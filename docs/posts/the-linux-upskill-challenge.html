<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://theleo.zone/posts/linux-upskill/">Original</a>
    <h1>The Linux Upskill Challenge</h1>
    
    <div id="readability-page-1" class="page"><div><p>The <a href="https://github.com/livialima/linuxupskillchallenge">Linux Upskill Challenge</a> is something I‚Äôve been following on
Reddit for a while and have been wanting to do. At this point, I‚Äôm pretty OK with computers, but I‚Äôd like to (re)learn
some fundamentals of Linux and Unix systems.</p><p>This post contains my notes as I underwent the process.</p><h2 id="day-0-setup">Day 0: Setup</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/00-AWS-Free-Tier.md">Link</a></p><p>They recommend provisioning a VPC somewhere in the cloud. I chose AWS - signed up a for a new account on the free tier
and created a t2.micro Ubuntu 20.04 LTS EC2 instance and an RSA key pair for it.</p><p>Changed the perms on the private key to <code>chmod 600</code> and added the following to my <code>~/.ssh/config</code>:</p><pre tabindex="0"><code>Host linux-upskill
  Hostname 18.xxx.xxx.xxx
  User ubuntu
  IdentityFile ~/.ssh/linux-upskill
</code></pre><p>Then running <code>ssh linux-upskill</code> dropped me in to a shell.</p><p>The article briefly mentions how AWS provisions a ‚Äútiny‚Äù VPS:</p><blockquote><p>In a datacentre somewhere, a single physical server running Linux will be split into a dozen or more Virtual servers,
using the KVM (Kernel-based Virtual Machine) feature that‚Äôs been part of Linux since early 2007.</p></blockquote><p>Well this is very cool! From <a href="https://ubuntu.com/blog/kvm-hyphervisor">this article</a> and other places:</p><blockquote><p>A hypervisor, also known as a virtual machine monitor or VMM, is software that creates and runs virtual machines (VMs)</p></blockquote><blockquote><p>[In KVM] Every VM runs as a separate Linux process under systemd, with dedicated virtual hardware resources
attached.</p></blockquote><blockquote><p>The main difference between Type 1 vs. Type 2 hypervisors is that Type 1 (e.g. KVM) runs on bare metal and Type 2
(e.g. Virtualbox) runs on top of an operating system.</p></blockquote><h2 id="day-1-get-to-know-your-server">Day 1: Get to know your server</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/01.md">Link</a></p><p>Nothing too wild here, but some fun tidbit learnings:</p><ul><li>prompt with <code>$</code> is non-root, <code>#</code> is root</li><li><code>free</code> and <code>uname -a</code> are nice utilities</li></ul><p>The further reading goes in to SSH port forwarding a bit. I‚Äôve seen some pretty cool remote dev setups in the past that
used port forwarding, and was able to get local port forwarding working using nginx:</p><div><pre tabindex="0"><code data-lang="shell"><span><span>ssh linux-upskill
</span></span><span><span>sudo apt-get install nginx -y
</span></span><span><span>sudo systemctl start nginx.service
</span></span><span><span>sudo systemctl status nginx.service
</span></span><span><span><span>exit</span>
</span></span><span><span>
</span></span><span><span>ssh -L localhost:8000:localhost:80 linux-upskill
</span></span><span><span>open http://localhost:8000
</span></span></code></pre></div><p>The http traffic went through my running ssh tunnel and voila, the nginx landing page!</p><p>I assume I could do the reverse, running nginx locally and using reverse port forwarding to <code>curl</code> the nginx server from
my remote server through an ssh tunnel running up with <code>ssh -R ...</code>.</p><p>Another thing I learned:</p><blockquote><p>Ports numbers less than 1024 are privileged ports and can be used only by root</p></blockquote><p>A Recurser pointed out that a list of all packages installed in a given distribution may be shared in a
public <code>.manifest</code> file,
e.g. <a href="http://releases.ubuntu.com/jammy/ubuntu-22.04.1-desktop-amd64.manifest">Ubuntu 22.04 Desktop</a>.</p><h2 id="day-2-basic-navigation">Day 2: Basic navigation</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/02.md">Link</a></p><p>Pretty basic, <code>cd</code>, <code>mkdir</code>, etc. Tidbit learnings:</p><ul><li>Boolean arguments to cli tools are called ‚Äúswitches‚Äù, e.g. the <code>-l</code> in <code>ls -l</code></li><li>The <code>-rt</code> switches to <code>ls</code> sort by time, reversed such that oldest modified files show up first</li><li>You can see the man page of <code>man</code> with <code>man man</code> - and there are actually a lot of options!</li><li>Prank your coworkers by putting this in a shell script at work: <code>PS1=&#34;$PS1&#34;üí©</code>. Every invocation of the script will add
another emoji to their prompt</li><li>This actually seems pretty handy for shell scripts at work: <code>export PS4=&#39;$0.$LINENO+ &#39;</code></li></ul><h2 id="day-3-power-trip">Day 3: Power trip!</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/03.md">Link</a></p><p>Roles and permissions!</p><ul><li>setting up non-root accounts with permission to run <code>sudo</code> for admins is standard</li><li><code>/etc/shadow</code> is where hashed passwords are kept</li><li><code>sudo -i</code> for running a series of commands as root</li><li><code>/var/log/auth.log</code> logs all uses of sudo (<code>grep &#34;sudo&#34; /var/log/auth.log</code>)</li><li><code>hostnamectl</code> to rename the server</li><li><code>/etc/cloud/cloud.cfg</code> has a <code>preserve_hostname</code> across reboots</li><li><code>timedatectl</code> for time, timezone, and date controls</li><li>john the ripper and hashcat are tools that can be used to crack passwords once you have <code>/etc/passwd</code>
and <code>/etc/shadow</code></li></ul><p>From <code>man sudo</code>:</p><blockquote><p>-i, ‚Äìlogin: Run the shell specified by the target user‚Äôs password database entry as a login shell‚Ä¶The command is
run with an environment similar to the one a user would receive at log in. Note that most shells behave differently
when a command is specified as compared to an interactive session.</p></blockquote><p>From <code>man su</code>:</p><blockquote><p>su allows to run commands with a substitute user and group ID.</p><p>When called without arguments, su defaults to running an interactive shell as root.</p></blockquote><p>Interestingly, the prompt is different for <code>sudo -i</code> and <code>sudo su</code>:</p><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo -i
</span></span><span><span>root@ip-172-31-24-204:~# <span>logout</span>
</span></span><span><span>
</span></span><span><span>ubuntu@ip-172-31-24-204:~$ sudo su
</span></span><span><span>root@ip-172-31-24-204:/home/ubuntu# <span>exit</span>
</span></span></code></pre></div><p>After some discussion with some <a href="https://recurse.com/">Recursers</a> we figured out that <code>sudo -i</code> and <code>sudo su -</code>
both <code>cd</code> to the home directory, whereas <code>sudo su</code> without the dash leaves you in the prior home
directory (<code>/home/ubuntu</code>).</p><h2 id="day-4-installing-software-exploring-the-file-structure">Day 4: Installing software, exploring the file structure</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/04.md">Link</a></p><p>Learned a good amount about the linux directory structure - <code>man hier</code> is gold!</p><ul><li><code>apt-get</code> is a full-featured but simplified interface to <code>dpkg</code>, and <code>apt</code> is a more user-friendly but slightly
stripped-back version of <code>apt-get</code></li><li><code>apt search</code> to find installable packages</li><li><code>man hier</code> to see a man page on the directory hierarchy</li><li><code>/sbin</code> contains commands needed to boot the system (‚Äúsystem binaries‚Äù)</li><li><code>/etc</code> contains static configuration files</li><li><code>/var</code> contains files that may change in size, e.g. log files</li><li><code>/etc/apt/sources.list</code> contains the repository locations, usually mirror servers closer to my server than the main
servers are</li></ul><p>Notably, these directory meanings shouldn‚Äôt be treated as gospel. It looks like <code>sbin</code> and <code>bin</code> are symlinks to
their <code>/usr</code> equivalents, e.g.</p><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ ls -la /sbin
</span></span><span><span>lrwxrwxrwx <span>1</span> root root <span>8</span> Dec  <span>1</span> 21:32 /sbin -&gt; usr/sbin
</span></span></code></pre></div><p>Further note on <code>apt</code> vs <code>dpkg</code> (<a href="https://www.makeuseof.com/apt-vs-dpkg/">source</a>):</p><blockquote><p>With APT, you can retrieve a file from a remote repository and install it, all in one command. This saves you from the
work of manually finding and downloading the package before installation.</p><p>With dpkg, you can only install local files you‚Äôve already downloaded yourself. It can‚Äôt search remote repositories or
pull packages from them.</p></blockquote><h2 id="day-5-more-or-less">Day 5: More or less‚Ä¶</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/05.md">Link</a></p><p>Mishmash of cli utilities, dotfiles, etc.</p><ul><li><code>more</code> is a worse version of <code>less</code> and I can probably always stick with <code>less</code></li><li><code>history</code> and running repeating commands with <code>!&lt;some number from history&gt;</code> is very nice, although I‚Äôll likely stick
to <code>Ctrl + r</code></li><li><code>nano</code> is sweet, but I‚Äôll prefer <code>vi</code> or <code>vim</code> when it‚Äôs installed</li></ul><h2 id="day-6-editing-with-vim">Day 6: Editing with ‚Äúvim‚Äù</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/06.md">Link</a></p><p>I use Vim keybindings in most places I edit text already, but there were some new tidbits for me here:</p><ul><li>Learned about the existence of <code>pico</code>, <code>joe</code>, and <code>jed</code> text editors</li><li><code>vi --version</code> to see if <code>vi</code> is actually <code>vim</code> on your machine</li><li><code>cp -v</code> for verbose copy</li><li><code>dd</code> deletes lines, whereas <code>d{motion}</code> deletes text that <code>{motion}</code> moves over</li><li><code>vi</code> is required by the <a href="https://en.wikipedia.org/wiki/Single_UNIX_Specification">Single Unix Specification and POSIX</a></li><li><code>vi</code> uses <code>hjkl</code> for motion because of the <a href="https://en.wikipedia.org/wiki/ADM-3A">ADM-3A terminal keyboard</a></li><li><code>neovim</code> has it‚Äôs own <code>:Tutor</code> command, whereas <code>vimtutor</code> is also always available for vanilla <code>vim</code> introduction</li></ul><p>A Recurser friend noted that another way to check the <code>vi</code> version/binary that is installed is using <code>readlink</code>
and <code>which</code>:</p><div><div><table><tbody><tr><td><pre tabindex="0"><code><span>1
</span></code></pre></td><td><pre tabindex="0"><code data-lang="shell"><span><span>readlink -f <span>$(</span>which vi<span>)</span>
</span></span></code></pre></td></tr></tbody></table></div></div><h2 id="day-7-the-server-and-its-services">Day 7: The server and its services</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/07.md">Link</a></p><p>Install and run Apache2 web server, similar to my nginx experiments on Day 1.</p><ul><li>since I allow all http traffic to my server on port 80, <a href="http://18.236.102.243/">http://18.236.102.243/</a> is available
to the public (might not work anymore if you are reading this in the future)</li><li>a virtual host is a contained site or system on a web server</li><li>I can edit the default page with <code>sudo vim /var/www/html/index.html</code></li><li><code>systemctl</code> manages <code>systemd</code> services</li><li><code>systemctl list-units [--all --state --type]</code> shows units, i.e. resources that systemd knows how to manage</li></ul><p>Notably, <a href="https://blog.nativesintech.org/apache-appropriation/">Apache may change its name soon</a>.</p><p>Since the web server is public, I got this fun entry in the <code>/var/log/apache2/access.log</code> the following day:</p><pre tabindex="0"><code>198.235.24.13 - - [10/Jan/2023:21:12:16 +0000]
&#34;GET / HTTP/1.0&#34; 200 11155 &#34;-&#34; &#34;Expanse, a Palo Alto Networks company,
searches across the global IPv4 space multiple times per day to identify
customers&amp;#39; presences on the Internet.
</code></pre><h2 id="day-8-the-infamous-grep-and-other-text-processors">Day 8: The infamous ‚Äúgrep‚Äù and other text processors</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/08.md">Link</a></p><p>A good day full of useful tools. Some new things I learned:</p><ul><li>ssh runs it‚Äôs own service, <code>sshd</code> (Secure Shell Daemon) <code>sudo systemctl status sshd</code></li><li><code>/var/log/auth.log</code> contains login and sudo usage information</li><li><code>tail -f</code> to follow</li></ul><blockquote><p>Use the <code>cut</code> command to select out most interesting portions of each line by specifying ‚Äú-d‚Äù for delimiter and ‚Äú-f‚Äù
for field - like: <code>grep &#34;authenticating&#34; /var/log/auth.log | grep &#34;root&#34; | cut -f 10- -d&#34; &#34;</code>
(field 10 onwards, where the delimiter between field is the &#34; &#34; character).</p></blockquote><ul><li>use <code>grep -v XXX</code> to invert the output (‚Äúall lines that do not contain XXX‚Äù)</li><li>it would be nice to get better at <code>awk</code> and <code>sed</code> one day</li></ul><h2 id="day-9-diving-into-networking">Day 9: Diving into networking</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/09.md">Link</a></p><p>Ok, I learned a LOT of stuff today!</p><h3 id="ports-and-network-devices">ports and network devices</h3><blockquote><p>a port is a number assigned to uniquely identify a connection endpoint and to direct data to a specific service</p></blockquote><ul><li><code>ss</code>, ‚Äúsocket status‚Äù, is one tool to examine open ports, replacing <code>netstat</code></li><li><code>nmap</code> is another, non-default tool for port examination</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo ss -ltpn
</span></span><span><span>State      Recv-Q     Send-Q         Local Address:Port           Peer Address:Port     Process
</span></span><span><span>LISTEN     <span>0</span>          <span>4096</span>           127.0.0.53%lo:53                  0.0.0.0:*         users:<span>((</span><span>&#34;systemd-resolve&#34;</span>,pid<span>=</span>417,fd<span>=</span>13<span>))</span>
</span></span><span><span>LISTEN     <span>0</span>          <span>128</span>                  0.0.0.0:22                  0.0.0.0:*         users:<span>((</span><span>&#34;sshd&#34;</span>,pid<span>=</span>653,fd<span>=</span>3<span>))</span>
</span></span><span><span>LISTEN     <span>0</span>          <span>511</span>                        *:80                        *:*         users:<span>((</span><span>&#34;apache2&#34;</span>,pid<span>=</span>29833,fd<span>=</span>4<span>)</span>,<span>(</span><span>&#34;apache2&#34;</span>,pid<span>=</span>29832,fd<span>=</span>4<span>)</span>,<span>(</span><span>&#34;apache2&#34;</span>,pid<span>=</span>26021,fd<span>=</span>4<span>))</span>
</span></span><span><span>LISTEN     <span>0</span>          <span>128</span>                     <span>[</span>::<span>]</span>:22                     <span>[</span>::<span>]</span>:*         users:<span>((</span><span>&#34;sshd&#34;</span>,pid<span>=</span>653,fd<span>=</span>4<span>))</span>
</span></span></code></pre></div><p>After <code>sudo apt install nmap</code>:</p><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ nmap localhost
</span></span><span><span>Starting Nmap 7.80 <span>(</span> https://nmap.org <span>)</span> at 2023-01-12 19:40 UTC
</span></span><span><span>Nmap scan report <span>for</span> localhost <span>(</span>127.0.0.1<span>)</span>
</span></span><span><span>Host is up <span>(</span>0.00011s latency<span>)</span>.
</span></span><span><span>Not shown: <span>998</span> closed ports
</span></span><span><span>PORT   STATE SERVICE
</span></span><span><span>22/tcp open  ssh
</span></span><span><span>80/tcp open  http
</span></span><span><span>
</span></span><span><span>Nmap <span>done</span>: <span>1</span> IP address <span>(</span><span>1</span> host up<span>)</span> scanned in 0.07 seconds
</span></span></code></pre></div><ul><li><code>nmap localhost</code> may show services that are <em>only</em> bound to <code>localhost</code> (the loopback network device), so can first
get actual network card IP address:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ ip address
</span></span><span><span>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span>65536</span> qdisc noqueue state UNKNOWN group default qlen <span>1000</span>
</span></span><span><span>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span><span>    inet 127.0.0.1/8 scope host lo
</span></span><span><span>       valid_lft forever preferred_lft forever
</span></span><span><span>    inet6 ::1/128 scope host
</span></span><span><span>       valid_lft forever preferred_lft forever
</span></span><span><span>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span>9001</span> qdisc fq_codel state UP group default qlen <span>1000</span>
</span></span><span><span>    link/ether 02:32:a6:75:13:17 brd ff:ff:ff:ff:ff:ff
</span></span><span><span>    inet 172.31.24.204/20 brd 172.31.31.255 scope global dynamic eth0
</span></span><span><span>       valid_lft 3099sec preferred_lft 3099sec
</span></span><span><span>    inet6 fe80::32:a6ff:fe75:1317/64 scope link
</span></span><span><span>       valid_lft forever preferred_lft forever
</span></span><span><span>
</span></span><span><span>ubuntu@ip-172-31-24-204:~$ nmap 172.31.24.204
</span></span><span><span>Starting Nmap 7.80 <span>(</span> https://nmap.org <span>)</span> at 2023-01-12 19:49 UTC
</span></span><span><span>Nmap scan report <span>for</span> ip-172-31-24-204.us-west-2.compute.internal <span>(</span>172.31.24.204<span>)</span>
</span></span><span><span>Host is up <span>(</span>0.00011s latency<span>)</span>.
</span></span><span><span>Not shown: <span>998</span> closed ports
</span></span><span><span>PORT   STATE SERVICE
</span></span><span><span>22/tcp open  ssh
</span></span><span><span>80/tcp open  http
</span></span><span><span>
</span></span><span><span>Nmap <span>done</span>: <span>1</span> IP address <span>(</span><span>1</span> host up<span>)</span> scanned in 0.07 seconds
</span></span></code></pre></div><ul><li>so in this case, the <em>exposed</em> services are the same ones bound to localhost, but this may not always be true</li></ul><h3 id="host-firewall">host firewall</h3><ul><li>a firewall is a network security system that monitors and controls incoming and outgoing network traffic based on
predetermined security rules</li><li>the linux kernel has built-in firewall functionality called netfilter</li><li><code>iptables</code> and <code>nftables</code> are utilities for configuring netfilter</li><li><code>ufw</code> (uncomplicated firewall) is a less complicated tool</li><li>checking what rules are in place:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo iptables -L
</span></span><span><span>Chain INPUT <span>(</span>policy ACCEPT<span>)</span>
</span></span><span><span>target     prot opt <span>source</span>               destination
</span></span><span><span>
</span></span><span><span>Chain FORWARD <span>(</span>policy ACCEPT<span>)</span>
</span></span><span><span>target     prot opt <span>source</span>               destination
</span></span><span><span>
</span></span><span><span>Chain OUTPUT <span>(</span>policy ACCEPT<span>)</span>
</span></span><span><span>target     prot opt <span>source</span>               destination
</span></span></code></pre></div><ul><li>this^ is equivalent to ‚Äúno firewall‚Äù</li><li>after <code>sudo apt install ufw</code>, can deny <code>http</code> traffic:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo ufw allow ssh
</span></span><span><span>Rules updated
</span></span><span><span>Rules updated <span>(</span>v6<span>)</span>
</span></span><span><span>
</span></span><span><span>ubuntu@ip-172-31-24-204:~$ sudo ufw deny http
</span></span><span><span>Rules updated
</span></span><span><span>Rules updated <span>(</span>v6<span>)</span>
</span></span><span><span>
</span></span><span><span>ubuntu@ip-172-31-24-204:~$ sudo ufw <span>enable</span>
</span></span><span><span>Command may disrupt existing ssh connections. Proceed with operation <span>(</span>y|n<span>)</span>? y
</span></span><span><span>Firewall is active and enabled on system startup
</span></span></code></pre></div><ul><li><code>sudo iptables -L</code> now has MANY rules, including</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>Chain ufw-user-input <span>(</span><span>1</span> references<span>)</span>
</span></span><span><span>target     prot opt <span>source</span>               destination
</span></span><span><span>ACCEPT     tcp  --  anywhere             anywhere             tcp dpt:ssh
</span></span><span><span>DROP       tcp  --  anywhere             anywhere             tcp dpt:http
</span></span></code></pre></div><ul><li>Now, <a href="http://18.236.102.243/">http://18.236.102.243/</a> fails to connect until I undo it with</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>sudo ufw allow http
</span></span><span><span>sudo ufw <span>enable</span>
</span></span></code></pre></div><ul><li>in general, not running unnecessary services is a good enough practice for protection depending on the server</li><li>changing the standard port, e.g. the <code>ssh</code> standard port 22 by editing <code>/etc/ssh/sshd_config</code>, is a fine ‚Äúsecurity by
obscurity‚Äù (<a href="https://danielmiessler.com/blog/no-moving-your-ssh-port-isnt-security-by-obscurity/">or not</a>, because
you‚Äôre not actually hiding the mechanism) thing to do</li></ul><h2 id="day-10-getting-the-computer-to-do-your-work-for-you">Day 10: Getting the computer to do your work for you</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/10.md">Link</a></p><ul><li><code>crontab -l</code> shows user crontab entry, add <code>sudo</code> for <code>root</code> user</li><li>system crontab at <code>/etc/crontab</code></li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ cat /etc/crontab
</span></span><span><span><span># /etc/crontab: system-wide crontab</span>
</span></span><span><span><span># Unlike any other crontab you don&#39;t have to run the `crontab&#39;</span>
</span></span><span><span><span># command to install the new version when you edit this file</span>
</span></span><span><span><span># and files in /etc/cron.d. These files also have username fields,</span>
</span></span><span><span><span># that none of the other crontabs do.</span>
</span></span><span><span>
</span></span><span><span><span>SHELL</span><span>=</span>/bin/sh
</span></span><span><span><span>PATH</span><span>=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
</span></span><span><span>
</span></span><span><span><span># Example of job definition:</span>
</span></span><span><span><span># .---------------- minute (0 - 59)</span>
</span></span><span><span><span># |  .------------- hour (0 - 23)</span>
</span></span><span><span><span># |  |  .---------- day of month (1 - 31)</span>
</span></span><span><span><span># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span>
</span></span><span><span><span># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span>
</span></span><span><span><span># |  |  |  |  |</span>
</span></span><span><span><span># *  *  *  *  * user-name command to be executed</span>
</span></span><span><span><span>17</span> *    * * *   root    <span>cd</span> / <span>&amp;&amp;</span> run-parts --report /etc/cron.hourly
</span></span><span><span><span>25</span> <span>6</span>    * * *   root    <span>test</span> -x /usr/sbin/anacron <span>||</span> <span>(</span> <span>cd</span> / <span>&amp;&amp;</span> run-parts --report /etc/cron.daily <span>)</span>
</span></span><span><span><span>47</span> <span>6</span>    * * <span>7</span>   root    <span>test</span> -x /usr/sbin/anacron <span>||</span> <span>(</span> <span>cd</span> / <span>&amp;&amp;</span> run-parts --report /etc/cron.weekly <span>)</span>
</span></span><span><span><span>52</span> <span>6</span>    <span>1</span> * *   root    <span>test</span> -x /usr/sbin/anacron <span>||</span> <span>(</span> <span>cd</span> / <span>&amp;&amp;</span> run-parts --report /etc/cron.monthly <span>)</span>
</span></span><span><span><span>#</span>
</span></span></code></pre></div><ul><li>there are hourly, daily, weekly, and monthly scripts run in <code>/etc/cron.hourly</code>, <code>/etc/cron.daily</code>, etc.</li><li><code>run-parts</code> runs scripts or programs in a directory in alphabetical order</li><li><code>logrotate</code> rotates, compresses, and mails system logs</li><li><code>systemd</code> can be used to run specific tasks at times using timers:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ systemctl list-timers
</span></span><span><span>NEXT                        LEFT          LAST                        PASSED       UNIT                         ACTIVATES
</span></span><span><span>Sat 2023-01-14 00:00:00 UTC 3h 7min left  Fri 2023-01-13 00:01:30 UTC 20h ago      logrotate.timer              logrotate.service
</span></span><span><span>Sat 2023-01-14 00:00:00 UTC 3h 7min left  Fri 2023-01-13 00:01:30 UTC 20h ago      man-db.timer                 man-db.service
</span></span><span><span>Sat 2023-01-14 01:00:13 UTC 4h 7min left  Fri 2023-01-13 10:59:30 UTC 9h ago       fwupd-refresh.timer          fwupd-refresh.service
</span></span><span><span>...
</span></span></code></pre></div><ul><li><code>anacron</code>, or ‚Äúanachronistic cron‚Äù, is good for e.g. laptops that are off some of the time</li></ul><h2 id="day-11-finding-things">Day 11: Finding things‚Ä¶</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/11.md">Link</a></p><p>How to find files and text in files efficiently.</p><ul><li><code>locate</code> (<code>sudo apt install mlocate</code>) is a very nifty version of <code>find / -name &lt;somefilename&gt; 2&gt;/dev/null</code></li><li>may want to run <code>sudo updatedb</code> to update the index <code>locate</code> searches (usually runs daily through cron)</li><li><code>find /home -mtime -3</code> finds all the files modified in the last 3 days</li><li>recursively search text with <code>grep -R -i &#34;PermitRootLogin&#34; /etc/* 2&gt;/dev/null</code></li><li><code>zless</code> and <code>zgrep</code> for viewing/searching compressed (e.g. gzip‚Äôd) files</li><li><code>find</code> flags and options:<ul><li><code>-iname</code> to ignore case for name</li><li><code>-o</code> for ‚Äúor‚Äù</li><li><code>-size</code> for size filtering, e.g. <code>-size +100M</code></li><li><code>-atime</code> for access time, e.g. <code>-atime 30</code> accessed in last 30 days</li><li><code>-ok</code> like <code>-exec</code>, but ask for confirmation, e.g. <code>find . -type f -ok cat {} \;</code></li></ul></li></ul><h2 id="day-12-transferring-files">Day 12: Transferring files</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/12.md">Link</a></p><p>File sharing protocols other than <code>ftp</code> and <code>scp</code>:</p><ul><li>SMB for Windows</li><li>AFP for local network of MacOS</li><li>WebDAV for http</li><li><code>rsync</code></li><li>SFTP over SSH - best for our purposes as we‚Äôre already ssh‚Äôing<ul><li>There is an <code>sftp</code> utility pre-installed on MacOS</li></ul></li></ul><p><a href="https://cyberduck.io/">Cyberduck</a> is a nice cloud storage browser with SFTP support, providing a GUI for
uploading/downloading files to/from remote servers. The logo and app icon alone make it well worth it.</p><p>A Recurser pointed out <a href="https://magic-wormhole.readthedocs.io/en/latest/welcome.html">magic-wormhole</a>, which is another
very cool program for transferring data securely.</p><h2 id="day-13-who-has-permission">Day 13: Who has permission?</h2><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/13.md">Link</a></p><p>I‚Äôve seen most of these before, but nice to do an actual overview of the tools where I grok what‚Äôs going on a bit
better.</p><ul><li>all files are tagged with the user and group that owns them</li><li><code>-rwxr-xr-x</code> are 3 groups of <code>rwx</code> (read/write/execute) for user, group, others respectively<ul><li>first char is a file type indicator (<code>-</code> for regular file)</li></ul></li><li><code>chmod</code> to change perms<ul><li><code>chmod u-w tuesday.txt</code> to remove write perms from the user</li><li><code>chmod g+w tuesday.txt</code> to add write perms to the group</li><li><code>chmod o-r tuesday.txt</code> to remove read perms from others</li><li><code>chmod u+rwx,go-rwx hello</code> to do multiple at once</li></ul></li><li>most linux systems create a group for each user</li><li><code>groups</code> to see groups you are a member of</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ groups
</span></span><span><span>ubuntu adm dialout cdrom floppy sudo audio dip video plugdev netdev lxd
</span></span></code></pre></div><ul><li><code>sudo usermod -a -G group user</code> to add user to group</li><li><code>sudo adduser fred</code> to create a user fred</li><li><code>sudo su fred</code> to ‚Äúbecome‚Äù fred</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo su fred
</span></span><span><span>fred@ip-172-31-24-204:/home/ubuntu$ groups
</span></span><span><span>fred
</span></span></code></pre></div><ul><li><code>sudo usermod -a -G sudo fred</code> to add fred to sudo group</li><li><code>umask</code> determines the permissions new files are given<ul><li>directories get <code>777</code> - umask, files get <code>666</code> - umask</li><li>example: umask = <code>0002</code>, dirs get <code>775</code>, files get <code>664</code></li></ul></li><li>octal mode of file permissions:<ul><li>r = 2^2 = 4</li><li>w = 2^1 = 2</li><li>x = 2^0 = 1</li><li>so 1 = <code>--x</code>, 7 = <code>rwx</code>, 5 = <code>r-x</code> etc.</li><li><code>chmod 664 myfile</code> is <code>rw-</code> for user and group, <code>r--</code> for others</li></ul></li><li><code>id</code> command to view user/group/etc ids:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ id
</span></span><span><span><span>uid</span><span>=</span>1000<span>(</span>ubuntu<span>)</span> <span>gid</span><span>=</span>1000<span>(</span>ubuntu<span>)</span> <span>groups</span><span>=</span>1000<span>(</span>ubuntu<span>)</span>,4<span>(</span>adm<span>)</span>,20<span>(</span>dialout<span>)</span>,24<span>(</span>cdrom<span>)</span>,25<span>(</span>floppy<span>)</span>,27<span>(</span>sudo<span>)</span>,29<span>(</span>audio<span>)</span>,30<span>(</span>dip<span>)</span>,44<span>(</span>video<span>)</span>,46<span>(</span>plugdev<span>)</span>,118<span>(</span>netdev<span>)</span>,119<span>(</span>lxd<span>)</span>
</span></span></code></pre></div><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/14.md">Link</a></p><ul><li><code>sudo adduser helen</code> to make new user</li><li><code>sudo EDITOR=vim visudo</code> to edit <code>/etc/sudoers</code> file, added:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span><span># Allow user &#34;helen&#34; to run &#34;sudo reboot&#34;</span>
</span></span><span><span><span># ...and don&#39;t prompt for a password</span>
</span></span><span><span><span>#</span>
</span></span><span><span>helen <span>ALL</span> <span>=</span> NOPASSWD:/sbin/reboot
</span></span></code></pre></div><ul><li>note that we could have run <code>sudo usermod -a -G sudo helen</code> to give helen ability to do ANYTHING with sudo, not just
reboot</li><li>remove with <code>sudo gpasswd -d helen sudo</code></li><li><code>/etc/passwd</code> and <code>/etc/group</code> have user and group info respectively</li><li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/create-key-pairs.html#having-ec2-create-your-key-pair">created new key pair in AWS using EC2</a></li><li>downloaded the private key</li><li><code>mv ~/Downloads/helen-linux-upskill.cer ~/.ssh/helen-linux-upskill</code></li><li><code>chmod 400 ~/.ssh/helen-linux-upskill</code> to correct perms</li><li><code>ssh-keygen -y -f ~/.ssh/helen-linux-upskill</code> to get public key</li><li>Then, ssh as <code>ubuntu</code> and ran <code>sudo su helen</code> to become helen</li><li><code>mkdir ~/.ssh</code></li><li><code>vim ~/.ssh/authorized_keys</code> and added public key there</li><li><code>chmod 600 ~/.ssh/authorized_keys</code></li><li>then added the following to my local <code>~/.ssh/config</code></li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>* Host helen-linux-upskill
</span></span><span><span>  Hostname 18.236.102.243
</span></span><span><span>  User helen
</span></span><span><span>  IdentityFile ~/.ssh/helen-linux-upskill
</span></span></code></pre></div><ul><li>then can <code>ssh helen-linux-upskill</code> and be helen :)</li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/15.md">Link</a></p><ul><li>linux versions come from release year (e.g. 18.04 = 2018)</li><li><code>/etc/apt/sources.list</code> shows urls to repositories that <code>apt</code> references to install things from</li><li>count installable packages with <code>apt-cache dump | grep &#34;Package:&#34; | wc -l</code></li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ apt-cache dump | grep <span>&#34;Package:&#34;</span> | wc -l
</span></span><span><span><span>106898</span>
</span></span></code></pre></div><ul><li>to add multiverse repository, uncommented it in <code>sources.list</code> and ran <code>sudo apt update</code></li><li>then could install packages from it, e.g. <code>netperf</code></li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~$ sudo apt install netperf
</span></span><span><span>...
</span></span><span><span>Get:1 http://us-west-2.ec2.archive.ubuntu.com/ubuntu focal/multiverse amd64 netperf amd64 2.6.0-2.1 <span>[</span><span>550</span> kB<span>]</span>
</span></span><span><span>...
</span></span></code></pre></div><ul><li>can also add via cli e.g. <code>sudo add-apt-repository ppa:dawidd0811/neofetch &amp;&amp; sudo apt update</code> (this is no longer
valid)</li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/16.md">Link</a></p><ul><li>create uncompressed tarball in current dir <code>tar -cvf myinits.tar /etc/init.d/</code></li><li>tar was short for ‚Äútape archive‚Äù</li><li>compress using GnuZip <code>gzip myinits.tar</code> to create <code>myinits.tar.gz</code></li><li>all in one step with <code>tar -cvzf myinits.tgz /etc/init.d/</code><ul><li><code>-c</code>: create archive</li><li><code>-v</code>: verbose</li><li><code>-z</code>: compress</li><li><code>-f</code>: output file</li></ul></li><li>untar with <code>tar -xvf myinits.tgz</code></li><li><a href="https://en.wikipedia.org/wiki/Bzip2">bzip2</a> is another compression algo similar to gzip</li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/17.md">Link</a></p><ul><li><code>sudo apt install build-essential</code> to install package of compiler tools</li><li><code>wget -v https://nmap.org/dist/nmap-7.93.tar.bz2</code> to get latest source of <code>nmap</code></li><li><code>tar -jxvf nmap-7.93.tar.bz2</code> to uncompress (<code>-j</code> for bzip2)</li><li><code>cat nmap-7.93/INSTALL</code> shows installation instructions</li><li>after following install directions:</li></ul><div><pre tabindex="0"><code data-lang="shell"><span><span>ubuntu@ip-172-31-24-204:~/nmap-7.93$ sudo updatedb
</span></span><span><span>ubuntu@ip-172-31-24-204:~/nmap-7.93$ locate bin/nmap
</span></span><span><span>/usr/bin/nmap
</span></span><span><span>/usr/local/bin/nmap
</span></span></code></pre></div><ul><li>this looks very cool: <a href="https://www.linuxfromscratch.org/lfs/">https://www.linuxfromscratch.org/lfs/</a></li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/18.md">Link</a></p><ul><li><code>logrotate</code> app for specifying log rotation behavior</li><li><code>ls /var/log</code> already shows rotated logs e.g. <code>syslog.2.gz</code></li><li>this is due to <code>/etc/cron.daily/logrotate</code></li><li>config file for <code>logrotate</code> at <code>/etc/logrotate.conf</code> and subfiles under <code>/etc/logrotate.d</code></li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/19.md">Link</a></p><ul><li>the Linux Virtual Filesystem (VFS) sits above other filesystems like <code>ext3</code>, <code>ext4</code>, etc.</li><li>layer between filename and data on disk = inode</li><li><code>ls -i</code> to show inodes</li><li>can also use <code>stat</code> command to show inode info</li><li>filenames point to inodes which point to data on disk</li><li>permissions, ownership, and dates of a file are at the inode, not filename level</li><li>several filenames can point to the same inode - a ‚Äúhard link‚Äù<ul><li><code>ln</code> creates a hard link</li><li><code>rm</code>‚Äòing one of the filenames will not remove the underlying inode, data, or other filename</li></ul></li><li>more common than hard links are soft links, or symlinks<ul><li><code>ln -s</code> creates a symlink. First arg is existing file or directory, second (optional) arg is symlink location</li><li>symlinks:<ul><li>can link to directories (hard links can‚Äôt)</li><li>can reference a file/directory on a different hard disk or volume (hard links can‚Äôt)</li><li>remain if the original is deleted (hard links don‚Äôt)</li><li>will not reference the file anymore if it is moved (hard links will)</li><li>have their own inodes/physical disk location (hard links reference the same inode)</li></ul></li></ul></li></ul><p><a href="https://github.com/livialima/linuxupskillchallenge/blob/master/20.md">Link</a></p><p>Nothing really new here for me as I have good familiarity with bash scripting already.</p><p>This was a good course, but more hands on and simplified than I was hoping for. I would still recommend it, particularly
early in your career. Interestingly, the bulk of the most interesting content came in the first 15 days or so.</p><p>I still have some knowledge gaps, including questions like:</p><ul><li>What does ‚Äúeverything is a file‚Äù mean?</li><li>What is a kernel, actually?</li><li>What is userspace vs kernelspace?</li><li>What is the ‚ÄúGNU‚Äù part of Linux?</li></ul><p>Time to read and google onwards :).</p></div></div>
  </body>
</html>
