<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://metaphysic.ai/to-uncover-a-deepfake-video-call-ask-the-caller-to-turn-sideways/">Original</a>
    <h1>To uncover a deepfake video call, ask the caller to turn sideways</h1>
    
    <div id="readability-page-1" class="page"><div>
    
    <div>
      <p>Sid Shanker - <time datetime="2022-08-04T04:00:38+00:00" itemprop="datePublished">Aug 4, 2022</time></p>
      
    </div>
  </div><div itemprop="articleBody">
      <p>For a while, I’ve wanted to have an easy way to see what trains
are arriving at my subway station, so I know when I need to leave
my house.</p>

<p>I have some free time now before I start a new job, so I decided
to actually build an arrivals board!</p>

<p>Here’s what it looks like:</p>

<p><img src="https://squidarth.com/assets/transit_board.jpeg" alt="transit_board"/></p>

<p>Check out the code for the webapp I built as a part of this here: <a href="https://github.com/squidarth/nyc-transit-hud">https://github.com/squidarth/nyc-transit-hud</a>.</p>



<p>The approach I took for this was pretty simple:</p>

<ol>
  <li>Build a webapp that displays the arrival times for trains at a given station. (<a href="https://nyc-transit-hub.onrender.com/">https://nyc-transit-hub.onrender.com/)</a>).</li>
  <li>Connect a Raspberry Pi to a monitor and load up the web app in Chrome</li>
  <li>Mount the monitor on the wall</li>
</ol>

<p>There was some work to do on the Raspberry Pi to load the page in full screen on startup,
but this all mostly worked without a ton of finagling.</p>



<p>It turns out that the MTA has a web API for all of their arrival times! The APIs are actually in a standardized
specification used by other transit agencies called <a href="https://developers.google.com/transit/gtfs-realtime/">GTFS</a>.
This made it really easy to just pick my subway station, and filter for all upcoming arrivals.</p>

<p>I was then easily able to display all of this information with a simple React app.</p>

<p>The way that arrivals are displayed are in the API is that each train currently running is listed,
along with upcoming stops:</p>

<div><div><pre><code>entity {
  id: &#34;000493&#34;
  trip_update {
    trip {
      trip_id: &#34;103750_7..N&#34;
      start_date: &#34;20220804&#34;
      route_id: &#34;7&#34;
    }
    stop_time_update {
      departure {
        time: 1659647850
      }
      stop_id: &#34;726N&#34;
    }
    stop_time_update {
      arrival {
        time: 1659648040
      }
      departure {
        time: 1659648060
      }
      stop_id: &#34;725N&#34;
    }
    ...
</code></pre></div></div>

<p>Here you can see that this is a “7” train, that will be stopping at the stations “726N” and “725N”, with
provided timestamps for those stops.</p>

<p>The MTA provides a simple CSV lines that gives pretty names to the stop ids.</p>

<p>One thing to note here is that the “N” (or “S” for the Southerly trains) at the end of the stop_id indicate the direction
that the train is going – “North” or “South”. Unfortunately, this is the only indication of the direction
of the train, so it’s not easy to list out the terminus’ or clearer directions (ie: Stillwell Ave or Wakefield-241st St) without hard-coding this for
each train. Luckily, for my station, all trains are either going North or South, but for other lines, like the L or 7, it could be
more confusing.</p>

<h3 id="did-this-need-to-be-built">Did this need to be built</h3>

<p>There are a lot of apps that display information in the way that I wanted here (such as https://transitapp.com/), but
nothing that was displayable in a web app in exactly the way that I wanted.</p>



<p>I lazily opted to not actually render the graphics on the Raspberry Pi, and instead just open a web browser and
load up the site that I made. This made the Raspberry Pi setup here really easy – as all I had to do configure
the Pi to load a web app in full screen on startup.</p>

<p>I was able to follow this guide pretty successfully: https://smarthomepursuits.com/open-website-on-startup-with-raspberry-pi-os/,
which uses the <code>autostart</code> capabilities of the Pi to load up the website on startup. I had to tweak the chromium-browser settings
a little bit to remove the “Restore Session” window, which was annoying:</p>

<div><div><pre><code># ~/.config/lxsession/LXDE-pi/autostart
@lxpanel --profile LXDE-pi
@chromium-browser --incognito --disable-session-crashed-bubble --start-fullscreen --start-maximized https://nyc-transit-hub.onrender.com/
</code></pre></div></div>



<p>Right now, the site I built is only useful if you live near the Barclays Center – the
next main step here is adapting the site to work for other subway stations (perhaps by using query parameters).</p>

<p>If that’s something that would be useful to you, I’d love to hear about it!</p>

  </div></div>
  </body>
</html>
