<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://silly.business/blog/why-i-cant-quit-magit/">Original</a>
    <h1>Why I Can&#39;t Quit Magit</h1>
    
    <div id="readability-page-1" class="page"><div>
  
<p>
A hot new VCS called <code>jujutsu</code> (<code>jj</code>) is <a href="https://www.stavros.io/posts/switch-to-jujutsu-already-a-tutorial/">all the rage right now</a>, and I want to be excited about it because it has some interesting new features like <code>undo</code>. But when I first tried it out I realized I would have to give up my beloved <a href="https://magit.vc/">Magit</a> and I knew <code>jj</code> on the command line could never hold a card to Magit, so I figured I&#39;d wait until a similar interface was built for <code>jj</code>.</p>
<p>
After reading <a href="https://steveklabnik.com/writing/i-see-a-future-in-jj/">more glowing praise</a> of <code>jj</code> today, but also seeing some <a href="https://heiwiper.com/posts/magit-is-awesome/">vague but relatable sentiments from another Emacs user about Magit</a>, I decided to give <code>jj</code> another shot, and I&#39;ve bounced off of it again.</p>
<p>
I think I can explain why <code>jj</code> doesn&#39;t feel like an immediate improvement to a Magit user, at least at first glance. There seemed to be a bit of confusion about this expressed in the various threads under the post I found vague and relatable. It&#39;s possible that I just haven&#39;t spent enough time with <code>jj</code> yet to &#34;get it.&#34; But let&#39;s talk about Magit.</p>
<p>
Magit makes <code>git</code> usage blazing fast, it&#39;s tightly integrated with my editor, and it encourages good <code>git</code> habits by making it easy to rewrite history and edit commit messages. As it turns out, a lot of those are advertised benefits of <code>jj</code>!</p>
<p>
But when I say blazing fast, I mean <em>really fucking fast</em>. I mean &#34;feels like an extension of yourself&#34; fast. Initiating actions in Magit may only take a handful of keypresses due to the brilliant use of &#34;<a href="https://github.com/magit/transient">transient</a>&#34; menus that appear and display the available options when you pause. When doing a common task, you review the menu a few times at first, but quickly develop literal muscle memory and do not need to review the menu to initiate commands, and eventually do common tasks quickly enough that it never appears at all.</p>
<p>
Here&#39;s an example:</p>
<p>
While editing my project (called <code>dvd</code>) I decide I am ready to save some changes. The way you open Magit is by invoking the <code>magit</code> command, which I have bound to <code>SPACE</code> <code>g</code> <code>g</code> â€“ a pattern I stole from Spacemacs when I first wrote my configuration.</p>
<p>
Three keystrokes, and we can see this, with Magit open on the bottom half of the window (&#34;frame&#34; to us Emacs users):</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/one.png" alt="one.png" title="one.png"/></p>
<p>
Here I can see the status of the staging area, which <code>jj</code> does away with, and some recent history, if I expand the two headers that are currently shown by placing my cursor on them and pressing tab:</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/two.png" alt="two.png" title="two.png"/></p>
<p>
In the diff view, I can stage and unstage everything, or individual files all at once, or individual hunks, or part of hunks, interactively. This is something I couldn&#39;t figure out how to do with <code>jj</code>, which seems to take the philosophy of running <code>git commit --amend --no-edit</code> and <code>git add -A</code> after every change. When calling <code>jj new</code>, is there a way to move part of your changes to the new working copy? I didn&#39;t find one immediately, but this is a genuine question.</p>
<p>
Regardless, I cannot give up the ability to commit some changes in a file and not others. With <code>jj</code> it seems like you have to delete the changes you do not wish to save, and then call <code>jj new</code>, or maybe some advanced use of <code>jj</code>&#39;s anonymous branches solves this problem?</p>
<p>
Anyway, here I commit some of the changes in <code>main.lua</code> but not all of them:</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/three.gif" alt="three.gif" title="three.gif"/></p>
<p>
Let&#39;s say I forgot to commit some changes that I meant to. Let me just amend the previous commit; it is only a few keystrokes (<code>ca</code> for <em>commit</em> and then <em>amend</em>), even if I do not wish to commit the whole file:</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/four.gif" alt="four.gif" title="four.gif"/></p>
<p>
When beginning an action, Magit helpfully presents the rest of the available options and actions in the menu. All the power of <code>git</code> is displayed before me on a palette, but I only need to pause and study it if I am doing something unusual. Normally, I can press <code>cc</code> to commit or <code>ca</code> to make an amendment to a commit without looking at the intermediary menus, because I have developed the muscle memory for those actions and can do them intuitively.</p>
<p>
If ever I am not sure what the actions are available, <code>?</code> on the status page shows the commands:</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/five.png" alt="five.png" title="five.png"/></p>
<p>
If I&#39;m not sure what&#39;s happened, I can look at the log that Magit produces (by pressing <code>`</code> or switching to the buffer in the buffer list):</p>
<p>
<img src="https://silly.business/blog/why-i-cant-quit-magit/six.png" alt="six.png" title="six.png"/></p>
<p>
This is especially helpful when discovering new <code>git</code> functionality while using Magit, which is a somewhat common occurrence. If ever I need to use the command line, it is nice to be able to look at what Magit does, and then replicate it. This is such a lovely bonus from using Magit, as it makes my <code>git</code> skills stronger, rather than allowing them to atrophy by using a GUI.</p>
<p>
This is just a quick demo, and it just barely scratches the surface of what is possible with Magit. <a href="https://emacsrocks.com/e17.html">Emacs Rocks! has more demos</a> that are getting a little old but are still relevant and excellent as ever.</p>
<p>
The full power of <code>git</code> is made accessible and ergonomic through Magit, and it is tragic that something this incredible is only available inside of Emacs (with the steep learning curve that it has), and I hope that other software steals ideas from it shamelessly. <a href="https://github.com/jesseduffield/lazygit">lazygit</a> is a project that looks promising for non-Emacs users who are jealous of Magit, but part of the magic of Magit is the deep integration with Emacs. </p>
<p>
<code>jj</code> seems like a really exciting development in the VCS space and I&#39;m looking forward to its maturation, and hopefully it will get a porcelain as lovely as Magit someday. For the time being, though, a lot of the advertised benefit of <code>jj</code> can be attained through Magit and while we&#39;re in a stage of development where most of us are interacting with <code>git</code> repositories <em>anyway</em> it seems like giving up too much to start using it today.</p>
<p>
In the meantime maybe someone can let me know how to use <code>jj</code> with hunks instead of whole files. What&#39;s the <code>git add -p</code> of <code>jj new</code>? How do I save some of my changes when creating a new commit, and move the rest to the working copy? I hope these questions have answers. If they do, I&#39;ll discover them another day.</p>
<p id="outline-container-headline-1">
<h2 id="headline-1">
Footnotes
</h2>
</p>


</div></div>
  </body>
</html>
