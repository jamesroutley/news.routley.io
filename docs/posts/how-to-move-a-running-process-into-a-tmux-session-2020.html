<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://xai.sh/2020/10/16/Move-running-process-into-tmux-session.html">Original</a>
    <h1>How to move a running process into a tmux session (2020)</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>It’s rare, but sometimes it still happens that I forget to open a tmux or
screen session when working with something that is supposed to be quickly done.
However, it also happens that “quickly done” turns into “tedious and ugly” and now
the process lives longer than it was supposed to and I become afraid of ssh
disconnects or something.</p>

<p>So an obvious solution is killing the process and running it in a newly
created tmux session — but what if the process ran for a while and I don’t want
to kill it because I either lose progress or end up in a mess?
Instead of killing and re-running a process, it would be much smoother to just
move it into a tmux session. This involves changing the parent of a process,
which is not exactly trivial, but thankfully @nelhage made a tool for that: <a href="https://github.com/nelhage/reptyr">reptyr</a>.
If you’re interested in how <code>reptyr</code> actually achieves its goal, check out his blog posts<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" rel="footnote">1</a></sup><sup id="fnref:2" role="doc-noteref"><a href="#fn:2" rel="footnote">2</a></sup>!</p>

<p>As for usage, it is very easy:</p>
<ol>
  <li>Suspend the respective process with <code>Ctrl-Z</code></li>
  <li>Send the job to background using <code>bg</code></li>
  <li>Take away the ownership from the shell using <code>disown</code></li>
  <li>Start or enter your tmux/screen session</li>
  <li>Run <code>reptyr PID</code> to attach the process to the current shell</li>
</ol>

<p>It also has some additional useful features, such as TTY-stealing,
which is documented in the man page.</p>

<p>Before compiling <code>reptyr</code>, make sure to check whether it is in you distributions repository. At the time of writing, this was at least the case for Fedora and Debian.</p>

<hr/>



  </div>
</article>

      </div>
    </div></div>
  </body>
</html>
