<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eli.thegreenplace.net/2023/static-server-an-http-server-in-go-for-static-content/">Original</a>
    <h1>static-server: an HTTP server in Go for static content</h1>
    
    <div id="readability-page-1" class="page"><div>
                
                <p>I put together a simple static file server in Go - useful for local testing
of web applications. Check it out at <a href="https://github.com/eliben/static-server">https://github.com/eliben/static-server</a></p>
<p>If you have Go installed on your machine, you don&#39;t have to download anything
else; you can run:</p>
<div><pre><span></span>$ go run github.com/eliben/static-server@latest
</pre></div>
<p>And it will start serving the current directory! Run it with <tt><span>-help</span></tt> for
usage information. No configuration files needed - the default is useful
and you can adjust it to your needs using command-line flags.</p>
<div id="why">
<h2>Why</h2>
<p>When developing web applications locally, for basic test cases we can
open an HTML file directly in the browser (using <a href="https://en.wikipedia.org/wiki/File_URI_scheme">file:/// scheme</a>). However, this is sometimes
insufficient, and in several scenarios it&#39;s necessary to properly <em>serve</em> the
HTML (along with its JS and CSS). Some cases where I encountered this are web
applications that use at least one of:</p>
<ul>
<li>Web workers</li>
<li>Web sockets</li>
<li>WASM</li>
<li>Separate API servers, requiring <a href="https://eli.thegreenplace.net/2023/introduction-to-cors-for-go-programmers/">CORS</a></li>
</ul>
<p>In the past, when I was more active in the Python ecosystem, I used
<tt>python <span>-m</span> SimpleHTTPServer &lt;port&gt;</tt> quite a bit. While it&#39;s nice, it has some
issues too: it&#39;s not very configurable, and it requires Python to be installed.</p>
<p>Another option I&#39;ve used is <a href="https://www.npmjs.com/package/http-server">http-server</a> from the Node.js ecosystem; in
fact, it has served as the inspiration for <tt><span>static-server</span></tt>. You can run it
with <tt>npx</tt> without installing, and it&#39;s also configurable through command-line
flags, without requiring configuration files.</p>
<p>But we can&#39;t expect all Go developers to have <tt>npm</tt> or <tt>npx</tt> installed.
Moreover, sometimes you want to tweak the server a bit and digging in JavaScript
is not any Go programmer&#39;s idea of a good time. Like many tools in that
ecosystem, this Node.js-based HTTP server is all in on dependencies - with 13
of them, it&#39;s not easy to understand or modify its code; much of it is split
across multiple helper packages, and making changes can be tricky.</p>
</div>
<div id="how">
<h2>How</h2>
<p>Spinning up a static file server in Go is very easy - I wrote a
<a href="https://eli.thegreenplace.net/2022/serving-static-files-and-web-apps-in-go/">whole blog post</a> about the
possibilities at some point. The simplest static server to serve the current
working directory is just:</p>
<div><pre><span></span><span>package</span><span> </span><span>main</span><span></span>

<span>import</span><span> </span><span>&#34;net/http&#34;</span><span></span>

<span>func</span><span> </span><span>main</span><span>()</span><span> </span><span>{</span><span></span>
<span>  </span><span>port</span><span> </span><span>:=</span><span> </span><span>&#34;:8080&#34;</span><span></span>
<span>  </span><span>handler</span><span> </span><span>:=</span><span> </span><span>http</span><span>.</span><span>FileServer</span><span>(</span><span>http</span><span>.</span><span>Dir</span><span>(</span><span>&#34;.&#34;</span><span>))</span><span></span>
<span>  </span><span>http</span><span>.</span><span>ListenAndServe</span><span>(</span><span>port</span><span>,</span><span> </span><span>handler</span><span>)</span><span></span>
<span>}</span><span></span>
</pre></div>
<p>Having found myself plopping a small <tt>server.go</tt> with these contents in too
many web projects, I decided enough was enough.
Thus <a href="https://github.com/eliben/static-server">static-server</a> was born.</p>
<p><tt><span>static-server</span></tt> is simple, yet versatile. It will do the right thing
by default, with no flags whatsoever. But you can also use flags to configure
a few aspects, e.g.: the port it serves on, CORS support, serving via TLS,
control how logging is done.</p>
<p><tt><span>static-server</span></tt> is hackable and easy to understand. All the code is in a
single file (with fewer than 200 lines of code, including comments and handling
flags) and there are <em>no dependencies</em> (except one package that is only used
for testing).</p>
<p>I find <tt><span>static-server</span></tt> very useful, and I hope others will too. If you run
into any problems or have questions, open a GitHub issue or send me an email.</p>
</div>

            </div></div>
  </body>
</html>
