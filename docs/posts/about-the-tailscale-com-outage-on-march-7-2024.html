<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tailscale.com/blog/tls-outage-20240307">Original</a>
    <h1>About the Tailscale.com outage on March 7, 2024</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><div><p>On March 7, 2024, tailscale.com was unavailable for approximately 90 minutes due to an expired TLS certificate. We were able to identify and address the issue quickly, and the downtime was mostly limited to our marketing materials and documentation, with a few exceptions we address below. Still, any unexpected downtime is a problem, and we want to take an opportunity to explain exactly what happened, what the impact was, and what steps we’ve taken to ensure it doesn’t happen again.</p><h2 id="what-happened"><span>What happened<a href="#what-happened" aria-hidden="true"> <svg xmlns="http://www.w3.org/2000/svg" width="0.4em" height="0.4em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></span></h2><p>We rolled out a major website refresh that included a migration to a new hosting provider in December of 2023, just about exactly 90 days before the outage. Keen-eyed readers may recognize that detail as foreshadowing. Our configuration is also a little unusual: because our hosting provider does not natively support IPv6, and because IPv6 is important to us and to our users, we run our own proxy to resolve such requests and list “extra” AAAA records accordingly.</p><p>That arrangement is deemed a “misconfiguration” by that provider, and we’ve been receiving alerts about it since rolling it out. We did not realize (and the alerts didn’t specify) that the configuration would prevent automatic certificate renewal from completing. One more bit of bad luck: Although we had probers checking certificate expirations, they were only checking over IPv6. As a result, our probers did not surface the impending certificate expiry because they were hitting the proxy—which had a valid certificate that we were managing independently.</p><p>In the absence of automatic renewal, the certificates for tailscale.com and www.tailscale.com expired on March 7, disrupting access to the site.</p><h2 id="the-impact"><span>The impact<a href="#the-impact" aria-hidden="true"> <svg xmlns="http://www.w3.org/2000/svg" width="0.4em" height="0.4em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></span></h2><p>Fortunately, most Tailscale operations do not require accessing the main website, so many users did not experience any interruption to normal Tailscale usage. The major disruptions instead were:</p><ul><li>Tailscale documentation, which lives at <a target="" rel="noreferrer" href="https://tailscale.com/kb">https://tailscale.com/kb</a>, was inaccessible during the downtime, along with our blog and other reference materials that are available through our website</li><li>Although our admin console and other settings pages were unaffected, users who did not know to navigate directly to <a target="" rel="noreferrer" href="httsp://login.tailscale.com">https://login.tailscale.com/</a> were unable to access those pages and may have assumed that they were offline</li><li>Our quick install script, hosted at <a target="" rel="noreferrer" href="https://tailscale.com/install.sh">https://tailscale.com/install.sh</a>, was also unavailable, which interfered with some installations (including some automated installs)</li></ul><p>The domains that actually serve Tailscale packages for installation remained accessible, and we believe that any interruptions to resolution through Go’s <code>go get</code> mechanism were minimal <a target="" rel="noreferrer" href="https://go.dev/blog/supply-chain#the-vcs-is-the-source-of-truth">thanks to caching</a>.</p><h2 id="steps-to-fix"><span>Steps to fix<a href="#steps-to-fix" aria-hidden="true"> <svg xmlns="http://www.w3.org/2000/svg" width="0.4em" height="0.4em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></span></h2><p>Once we had determined what the problem was, we responded by temporarily removing the “extra” AAAA records and manually renewing the certificates in question. That immediately resolved the user-facing issue.</p><p>Of course, we still want our site and our services to be available over IPv6, so we restored those records immediately thereafter. That means the root issue with renewal is still a problem, and we plan to address it in the short term much like our ancestors did: multiple redundant calendar alerts and a designated window to manually renew the certificates ourselves. We also plan to update our prober infrastructure to check IPv4 and IPv6 endpoints separately.</p><p>We also hope to make our proxy unnecessary by supporting IPv6 in a more straightforward way in our website infrastructure.</p><p>Finally, while we will endeavor to avoid any outage, it is a nice benefit of Tailscale’s design that this blip did not interrupt most uses for most users. One of our guiding principles is enabling direct connectivity between your machines and services, and that means your network is less reliant on any particular endpoint—even tailscale.com—being available at any given time.</p></div></div></div></div></div>
  </body>
</html>
