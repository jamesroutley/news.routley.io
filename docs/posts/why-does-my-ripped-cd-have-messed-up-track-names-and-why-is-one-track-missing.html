<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.akpain.net/blog/inside-a-cd/">Original</a>
    <h1>Why does my ripped CD have messed up track names? And why is one track missing?</h1>
    
    <div id="readability-page-1" class="page"><div><p>As of late, I&#39;ve been getting into growing my music collection by buying and <a href="https://en.wikipedia.org/wiki/CD_ripper">ripping CDs</a>. That was all fine and dandy until I discovered that one of my albums, Echo Afternoon by Finish Ticket, was slightly off.</p>
<figure>
<p><img src="https://macroscopicentric.net/blog/migrating-to-eleventy/2025-02-25_22-22.png" alt="a screenshot of the Bandcamp page for Echo Afternoon by Finish Ticket next to a playlist panel from VLC"/></p>
<figcaption>On the left, the artist&#39;s Bandcamp page. On the right, my ripped files in VLC.</figcaption>
</figure>
<p>There are three problems here:</p>
<ol>
<li>One track has changed name - Raincloud has turned into &#34;Rainclous&#34;.</li>
<li>Nothing Coming Soon should be 41 seconds long, but is instead 4 minutes, 26 seconds long.</li>
<li>We&#39;re missing The Weight at the end of the album.</li>
</ol>
<p>To work out just what&#39;s going on here, we&#39;ve got to delve into some techy details about data and CDs.</p>
<h2 id="toc_1">How a CD rip works</h2>
<p>If you ignore all the physics and lasers, an audio CD is a very simple thing. Aside from some audio tracks and a table of contents over those tracks, very little extra information is included on a disk - you&#39;ve pretty much only got the artist name, album name and track names actually burned into the disk.</p>
<p>When ripping a CD to get the nice, lossless audio out of it, this poses a little bit of a problem - we want as much metadata to be included with our resultant files as possible, but there&#39;s not really the space to include much of it on the disk. Plus, since library managers like <a href="https://www.navidrome.org/">Navidrome</a> rely on the metadata embedded within audio files to categorise and display information about our music, it kinda needs to be correct.</p>
<p>To get around this, open source metadata databases are used, like <a href="https://musicbrainz.org">MusicBrainz</a>, which you can think of as Wikipedia for music. High quality CD ripping programs (like <a href="https://github.com/whipper-team/whipper">Whipper</a> -- which I use -- and <a href="https://www.exactaudiocopy.de/">EAC</a>) will use the limited information available on a CD to look up a release on MusicBrainz and copy the metadata from there into the files it creates.</p>
<p>The key thing that allows this to happen is the table of contents (TOC) that&#39;s present at the front of any audio CD. This is used to indicate to the player how many tracks there are and how they&#39;re laid out on the disk. The TOC from Echo Afternoon looks like this:</p>
<pre><code>1 11 189706 150 16281 33398 51150 66607 84179 104157 119432 138080 145514 168515
</code></pre>
<p>This can be broken down as:</p>
<ul>
<li><code>1</code>: the disk number</li>
<li><code>11</code>: the number of tracks on this disk</li>
<li><code>189706</code>: The total number of sectors</li>
<li>followed by 11 track start positions<ul>
<li>Here, track 1 starts at sector 150, track 2 starts at sector 16281, etc., etc.</li>
</ul>
</li>
</ul>
<p>The raw TOC is used as a key to look up the disk on MusicBrainz, which has disk layouts stored alongside its metadata for releases with physical disks (since some releases are digital-only). While not technically a perfectly unique identifier for a disk, the TOC can be abused like this because of the sheer entropy it encodes. Each sector translates to 1/75th of a second of audio, so the resolution here means it&#39;s pretty improbable that two different releases will have perfectly identical TOCs.</p>
<p>Anyway, MusicBrainz has an API to guess the release from the TOC alone.</p>
<pre><code>$ curl --header &#34;Accept: application/json&#34; https://musicbrainz.org/ws/2/discid/-?toc=1+11+189706+trimmed
{&#34;releases&#34;:[{&#34;release-events&#34;:[{&#34;date&#34;:&#34;2024-09-06&#34;,&#34;area&#34;:null}],&#34;packaging-id&#34;:null,&#34;country&#34;:null,&#34;title&#34;:&#34;Echo Afternoon&#34;,&#34;id&#34;:&#34;af4dc096-65d2-4cc5-9e0c-176d64fc4d04&#34;,&#34;asin&#34;:null,&#34;quality&#34;:&#34;normal&#34;,&#34;disambiguation&#34;:&#34;&#34;,&#34;date&#34;:&#34;2024-09-06&#34;,&#34;cover-art-archive&#34;:{&#34;count&#34;:0,&#34;back&#34;:false,&#34;front&#34;:false,&#34;darkened&#34;:false,&#34;artwork&#34;:false},&#34;text-representation&#34;:{&#34;script&#34;:&#34;Latn&#34;,&#34;language&#34;:&#34;eng&#34;},&#34;status-id&#34;:&#34;4e304316-386d-3409-af2e-78857eec5cfe&#34;,&#34;barcode&#34;:&#34;846070070822&#34;,&#34;packaging&#34;:null,&#34;status&#34;:&#34;Official&#34;,&#34;media&#34;:[{&#34;position&#34;:1,&#34;format&#34;:&#34;CD&#34;,&#34;track-count&#34;:11,&#34;discs&#34;:[{&#34;sectors&#34;:189706,&#34;offsets&#34;:[150,16281,33398,51150,66607,84179,104157,119432,138080,145514,168515],&#34;id&#34;:&#34;kmIWXglj0JdNk4TAdp.nhkQ6Uhs-&#34;,&#34;offset-count&#34;:11}],&#34;format-id&#34;:&#34;9712d52a-4509-3d4b-a1a2-67c88c643e31&#34;,&#34;title&#34;:&#34;&#34;}]},{&#34;title&#34;:&#34;Heart Monster Fear Machine&#34;,&#34;country&#34;:&#34;SE&#34;,&#34;packaging-id&#34;:&#34;f7101ce3-0384-39ce-9fde-fbbd0044d35f&#34;,&#34;release-events&#34;:[{&#34;area&#34;:{&#34;disambiguation&#34;:&#34;&#34;,&#34;sort-name&#34;:&#34;Sweden&#34;,&#34;id&#34;:&#34;23d10872-f5ae-3f0c-bf55-332788a16ecb&#34;,&#34;type&#34;:null,&#34;name&#34;:&#34;Sweden&#34;,&#34;type-id&#34;:null,&#34;iso-3166-1-codes&#34;:[&#34;SE&#34;]},&#34;date&#34;:&#34;2010-08-27&#34;}],&#34;id&#34;:&#34;c24cd88d-9a98-43e8-9c6c-cbacb70b2d7f&#34;,&#34;asin&#34;:null,&#34;quality&#34;:&#34;normal&#34;,&#34;date&#34;:&#34;2010-08-27&#34;,&#34;disambiguation&#34;:&#34;&#34;,&#34;barcode&#34;:&#34;7320470137086&#34;,&#34;status-id&#34;:&#34;4e304316-386d-3409-af2e-78857eec5cfe&#34;,&#34;text-representation&#34;:{&#34;script&#34;:&#34;Latn&#34;,&#34;language&#34;:&#34;eng&#34;},&#34;cover-art-archive&#34;:{&#34;count&#34;:1,&#34;front&#34;:true,&#34;back&#34;:false,&#34;darkened&#34;:false,&#34;artwork&#34;:true},&#34;media&#34;:[{&#34;track-count&#34;:11,&#34;position&#34;:1,&#34;format&#34;:&#34;CD&#34;,&#34;title&#34;:&#34;&#34;,&#34;discs&#34;:[],&#34;format-id&#34;:&#34;9712d52a-4509-3d4b-a1a2-67c88c643e31&#34;}],&#34;packaging&#34;:&#34;Cardboard/Paper Sleeve&#34;,&#34;status&#34;:&#34;Official&#34;},{&#34;asin&#34;:&#34;B000DZJHQK&#34;,&#34;quality&#34;:&#34;normal&#34;,&#34;title&#34;:&#34;Planets Conspire&#34;,&#34;country&#34;:&#34;CA&#34;,&#34;packaging-id&#34;:null,&#34;release-events&#34;:[{&#34;area&#34;:{&#34;disambiguation&#34;:&#34;&#34;,&#34;sort-name&#34;:&#34;Canada&#34;,&#34;id&#34;:&#34;71bbafaa-e825-3e15-8ca9-017dcad1748b&#34;,&#34;type&#34;:null,&#34;name&#34;:&#34;Canada&#34;,&#34;type-id&#34;:null,&#34;iso-3166-1-codes&#34;:[&#34;CA&#34;]},&#34;date&#34;:&#34;2005&#34;}],&#34;id&#34;:&#34;df9a427d-88df-4b78-87dc-ad0d688041fd&#34;,&#34;media&#34;:[{&#34;format-id&#34;:&#34;9712d52a-4509-3d4b-a1a2-67c88c643e31&#34;,&#34;discs&#34;:[{&#34;offsets&#34;:[225,16630,34044,51197,67508,86538,105552,120642,139362,151441,170392],&#34;sectors&#34;:190968,&#34;id&#34;:&#34;g5AtalgG1KlL1R7ICe.iMkk8E6c-&#34;,&#34;offset-count&#34;:11}],&#34;title&#34;:&#34;&#34;,&#34;format&#34;:&#34;CD&#34;,&#34;position&#34;:1,&#34;track-count&#34;:11}],&#34;status&#34;:&#34;Official&#34;,&#34;packaging&#34;:null,&#34;date&#34;:&#34;2005&#34;,&#34;disambiguation&#34;:&#34;&#34;,&#34;barcode&#34;:&#34;638812728128&#34;,&#34;status-id&#34;:&#34;4e304316-386d-3409-af2e-78857eec5cfe&#34;,&#34;text-representation&#34;:{&#34;script&#34;:&#34;Latn&#34;,&#34;language&#34;:&#34;eng&#34;},&#34;cover-art-archive&#34;:{&#34;artwork&#34;:true,&#34;darkened&#34;:false,&#34;count&#34;:1,&#34;back&#34;:false,&#34;front&#34;:true}}],&#34;release-count&#34;:3,&#34;release-offset&#34;:0}
</code></pre>
<p>Even when this API returns multiple perfect matches for the same TOC, it&#39;s likely that all the hits are just different releases of the same music, like in <a href="https://musicbrainz.org/cdtoc/fDnchA56467jVW7a4U4J8Frj46o-">this example of That&#39;s the Spirit by Bring Me the Horizon</a>:</p>
<figure>
<p><img src="https://macroscopicentric.net/blog/migrating-to-eleventy/2025-02-25_22-02.png" alt="a screenshot of the musicbrainz disk ID details page linked above"/></p>
<figcaption>Note the &#34;attached to releases&#34; section at the bottom</figcaption>
</figure>
<p>Here you can see that three releases have the same disk layout - the only difference between them being the markets they were released in and some superficial metadata like the barcode number and release date.</p>
<p>Start to end, the rip process looks roughly like this:</p>
<ul>
<li>Read the TOC off of a disk</li>
<li>Look up the TOC on MusicBrainz</li>
<li>Select a release from the returned options (easy) and download its metadata</li>
<li>Dump audio from the disk to files</li>
<li>Apply the metadata to each track</li>
<li>Profit!</li>
</ul>
<h2 id="toc_2">So - what&#39;s wrong with my CD?</h2>
<p>Actually, two things. Which are both kind of the same problem.</p>
<h3 id="toc_3">Someone typed the wrong track name into MusicBrainz</h3>
<p>&#34;Raincloud&#34; had been typed in as &#34;Rainclous&#34;. That simple.</p>
<p>When this release was <a href="https://musicbrainz.org/edit/117414524">originally being added to MusicBrainz</a>, it looks like the editor just mistyped that track name and this got downloaded and applied to our rip.</p>
<h3 id="toc_4">Two tracks on the CD were combined</h3>
<p>This is a little bit weirder.</p>
<p>If you take another look at the screenshot of the artist&#39;s Bandcamp page, you might notice that there are 12 songs listed as being on the album, but only 11 included on the rip. One track is longer than it should be... and there&#39;s no track on the rip that&#39;s 41 seconds long, which is how long &#34;Nothing Coming Soon&#34; is.</p>
<p>In fact, it looks like &#34;Nothing Coming Soon&#34; has gotten 3 minutes and 44 seconds longer. Which is the exact length of the song after it, &#34;Don&#39;t Need a Reason&#34;.</p>
<p>Wait.</p>
<p>Have those two tracks been merged?</p>
<p>...</p>
<p>Hah. Yep.</p>
<p>Taking a look at the metadata embedded into the disk itself, we can see that track 6 is actually titled &#34;Don&#39;t Need a Reason&#34; on there:</p>
<pre><code>FILE &#34;./06. Finish Ticket - Nothing Coming Soon.flac&#34; WAVE
  TRACK 06 AUDIO
    TITLE &#34;Don&#39;t Need A Reason&#34;
    ISRC USDPK2300133
    INDEX 01 00:00:00
</code></pre>
<p>And taking a listen to it shows that the short track has been rolled into the next track to form one, longer track, despite it being listed as a separate one <em>on the back cover of the CD case</em>:</p>
<figure>
<p><img src="https://macroscopicentric.net/blog/migrating-to-eleventy/2025_02_25%2022_55%20Office%20Lens.jpg" alt="a photo of the back cover of the album Echo Afternoon by Finish Ticket"/></p>
<figcaption>Hello?????!?</figcaption>
</figure>
<p>So, the reason we&#39;re seeing a load of messed up track names on our rip is because:</p>
<ul>
<li>Two tracks got rolled into one on the CD but nowhere else</li>
<li>This confused whoever was originally adding it to Musicbrainz</li>
<li>The combined tracks get added seperately</li>
<li>The &#34;left over&#34; track at the end of the album that&#39;s supposed to be the 12th track on our 11 track disk gets missed off when being typed into MusicBrainz</li>
</ul>
<p>The root cause, again, is bad data in MusicBrainz that&#39;s been downloaded and applied to our otherwise correct rip!</p>
<h2 id="toc_5">The fix</h2>
<p>It turns out that two tracks being rolled into one on a disk is a relatively common problem, since the MusicBrainz style guide has a dedicated section on <a href="https://musicbrainz.org/doc/Style/Titles#Multiple_titles_.2F_Splits">dealing with tracks with multiple titles</a>. The title of our one, combined file becomes &#34;Nothing Coming Soon / Don&#39;t Need a Reason&#34;.</p>
<p>So, since MusicBrainz is publicly editable just like Wikipedia, I went ahead and amded the issues on this release myself (<a href="https://musicbrainz.org/edit/122458416">edit one</a>, <a href="https://musicbrainz.org/edit/122458694">edit two</a>).</p>
<p>Edits on MusicBrainz spend 7 days in limbo after they&#39;re created, to allow people time to vote on them. After 7 days, if they have a rating that isn&#39;t indicative of foul play, they get published. At the time of writing, my edits have 5 days left to go while they can be voted on, and are due to be made live on 2025-03-03. In the mean time, I edited the metadata of my ripped files manually to be in-line with what I updated MusicBrainz with and re-indexed my music database.</p>
<figure>
<p><img src="https://macroscopicentric.net/blog/migrating-to-eleventy/2025-02-25_23-14.png" alt="a screenshot showing VLC with the fixed track names"/></p>
<figcaption>All fixed :)</figcaption>
</figure>
<hr/>

</div></div>
  </body>
</html>
