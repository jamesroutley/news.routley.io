<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://numpy.org/devdocs/release/2.0.0-notes.html">Original</a>
    <h1>NumPy 2.0</h1>
    
    <div id="readability-page-1" class="page"><article>
                  
  <section id="numpy-2-0-0-release-notes">

<div>
<p>Note</p>
<p>The release of 2.0 is in progress and the current release overview and
highlights are still in a draft state. However, the highlights should
already list the most significant changes detailed in the full notes below,
and those full notes should be complete (if not copy-edited well enough
yet).</p>
</div>
<p>NumPy 2.0.0 is the first major release since 2006. It is the result of X months
of development since the last feature release by Y contributors, and contains a
large amount of exciting new features as well as a large amount of changes to
both the Python and C APIs.</p>
<p>This major release includes breaking changes that could not happen in a regular
minor (feature) release - including an ABI break, changes to type promotion
rules, and API changes which may not have been emitting deprecation warnings
in 1.26.x. Key documents related to how to adapt to changes in NumPy 2.0, in
addition to these release notes, include:</p>
<ul>
<li><p>The <a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span>NumPy 2.0 migration guide</span></a></p></li>
<li><p>The <a href="https://numpy.org/devdocs/dev/depending_on_numpy.html#numpy-2-abi-handling"><span>NumPy 2.0-specific advice</span></a> in
<a href="https://numpy.org/devdocs/dev/depending_on_numpy.html#for-downstream-package-authors"><span>For downstream package authors</span></a></p></li>
</ul>
<section id="highlights">
<h2>Highlights<a href="#highlights" title="Link to this heading">#</a></h2>
<p>Highlights of this release include:</p>
<ul>
<li><p>New features:</p>
<ul>
<li><p>A new variable-length string dtype, <a href="https://numpy.org/devdocs/reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code><span>StringDType</span></code></a> and a new
<a href="https://numpy.org/devdocs/reference/routines.strings.html#module-numpy.strings" title="numpy.strings"><code><span>numpy.strings</span></code></a> namespace with performant ufuncs for string operations,</p></li>
<li><p>Support for <code><span>float32</span></code> and <code><span>longdouble</span></code> in all <a href="https://numpy.org/devdocs/reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code><span>numpy.fft</span></code></a> functions,</p></li>
<li><p>Support for the array API standard in the main <code><span>numpy</span></code> namespace.</p></li>
</ul>
</li>
<li><p>Performance improvements:</p>
<ul>
<li><p>Sorting functions (<a href="https://numpy.org/devdocs/reference/generated/numpy.sort.html#numpy.sort" title="numpy.sort"><code><span>sort</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code><span>argsort</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.partition.html#numpy.partition" title="numpy.partition"><code><span>partition</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.argpartition.html#numpy.argpartition" title="numpy.argpartition"><code><span>argpartition</span></code></a>)
have been accelerated through the use of the Intel x86-simd-sort and Google
Highway libraries, and may see large (hardware-specific) speedups,</p></li>
<li><p>macOS Accelerate support and binary wheels for macOS &gt;=14, with significant
performance improvements for linear algebra operations on macOS, and wheels
that are about 3 times smaller,</p></li>
<li><p><a href="https://numpy.org/devdocs/reference/routines.char.html#module-numpy.char" title="numpy.char"><code><span>numpy.char</span></code></a> fixed-length string operations have been accelerated by
implementing ufuncs that also support <a href="https://numpy.org/devdocs/reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code><span>StringDType</span></code></a> in
addition to the the fixed-length string dtypes,</p></li>
<li><p>A new tracing and introspection API, <a href="https://numpy.org/devdocs/reference/generated/numpy.lib.introspect.opt_func_info.html#numpy.lib.introspect.opt_func_info" title="numpy.lib.introspect.opt_func_info"><code><span>opt_func_info</span></code></a>,
to determine which hardware-specific kernels are available and will be
dispatched to.</p></li>
</ul>
</li>
<li><p>Python API improvements:</p>
<ul>
<li><p>A clear split between public and private API, with a new
<a href="https://numpy.org/devdocs/reference/module_structure.html#module-structure"><span>module structure</span></a>, and each public function now
available in a single place,</p></li>
<li><p>Many removals of non-recommended functions and aliases. This should make
it easier to learn and use NumPy. The number of objects in the main
namespace decreased by ~10% and in <code><span>numpy.lib</span></code> by ~80%,</p></li>
<li><p><a href="https://numpy.org/devdocs/user/basics.types.html#canonical-python-and-c-types"><span>Canonical dtype names</span></a> and a new
<a href="https://numpy.org/devdocs/reference/generated/numpy.isdtype.html#numpy.isdtype" title="numpy.isdtype"><code><span>isdtype</span></code></a> introspection function,</p></li>
</ul>
</li>
<li><p>C API improvements:</p>
<ul>
<li><p>A new <a href="https://numpy.org/devdocs/reference/c-api/array.html#dtype-api"><span>public C API for creating custom dtypes</span></a>,</p></li>
<li><p>Many outdated functions and macros removed, and private internals hidden to
ease future extensibility,</p></li>
<li><p>New, easier to use, initialization functions:
<a href="https://numpy.org/devdocs/reference/c-api/array.html#c.PyArray_ImportNumPyAPI" title="PyArray_ImportNumPyAPI"><code><span>PyArray_ImportNumPyAPI</span></code></a> and <a href="https://numpy.org/devdocs/reference/c-api/ufunc.html#c.PyUFunc_ImportUFuncAPI" title="PyUFunc_ImportUFuncAPI"><code><span>PyUFunc_ImportUFuncAPI</span></code></a>.</p></li>
</ul>
</li>
<li><p>Improved behavior:</p>
<ul>
<li><p>Improvements to type promotion behavior was changed by adopting <a href="https://numpy.org/devdocs/release/NEP50">NEP
50</a>. This fixes many user surprises about promotions which
previously often depended on data values of input arrays rather than only
their dtypes.  Please see the NEP and the <a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span>NumPy 2.0 migration guide</span></a>
for details as this change can lead to changes in output dtypes and lower
precision results for mixed-dtype operations.</p></li>
<li><p>The default integer type on Windows is now <code><span>int64</span></code> rather than <code><span>int32</span></code>,
matching the behavior on other platforms,</p></li>
<li><p>The maximum number of array dimensions is changed from 32 to 64</p></li>
</ul>
</li>
<li><p>Documentation:</p>
<ul>
<li><p>The reference guide navigation was signficantly improved, and there is now
documentation on NumPy’s <a href="https://numpy.org/devdocs/reference/module_structure.html#module-structure"><span>module structure</span></a>,</p></li>
<li><p>The <a href="https://numpy.org/devdocs/building/index.html#building-from-source"><span>building from source</span></a> documentation was
completely rewritten,</p></li>
</ul>
</li>
</ul>
<p>Furthermore there are many changes to NumPy internals, including continuing to
migrate code from C to C++, that will make it easier to improve and maintain
NumPy in the future.</p>
<p>The “no free lunch” theorem dictates that there is a price to pay for all these
API and behavior improvements and better future extensibility. This price is:</p>
<ol>
<li><p>Backwards compatibility. There are a significant number of breaking changes
to both the Python and C APIs. In the majority of cases, there are clear
error messages that will inform the user how to adapt their code. However,
there are also changes in behavior for which it was not possible to give
such an error message - these cases are all covered in the Deprecation and
Compatibility sections below, and in the <a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span>NumPy 2.0 migration guide</span></a>.</p>
<p>Note that there is a <code><span>ruff</span></code> mode to auto-fix many things in Python code.</p>
</li>
<li><p>Breaking changes to the NumPy ABI. As a result, binaries of packages that
use the NumPy C API and were built against a NumPy 1.xx release will not
work with NumPy 2.0. On import, such packages will see an <code><span>ImportError</span></code>
with a message about binary incompatibiliy.</p>
<p>It is possible to build binaries against NumPy 2.0 that will work at runtime
with both NumPy 2.0 and 1.x. See <a href="https://numpy.org/devdocs/dev/depending_on_numpy.html#numpy-2-abi-handling"><span>NumPy 2.0-specific advice</span></a> for more details.</p>
<p><strong>All downstream packages that depend on the NumPy ABI are advised to do a
new release built against NumPy 2.0 and verify that that release works with
both 2.0 and 1.26 - ideally in the period between 2.0.0rc1 (which will be
ABI-stable) and the final 2.0.0 release to avoid problems for their users.</strong></p>
</li>
</ol>
<p>The Python versions supported by this release are 3.9-3.12.</p>
</section>
<section id="numpy-2-0-python-api-removals">
<h2>NumPy 2.0 Python API removals<a href="#numpy-2-0-python-api-removals" title="Link to this heading">#</a></h2>
<ul>
<li><p><code><span>np.geterrobj</span></code>, <code><span>np.seterrobj</span></code> and the related ufunc keyword argument
<code><span>extobj=</span></code> have been removed.  The preferred replacement for all of these
is using the context manager <code><span>with</span> <span>np.errstate():</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23922">gh-23922</a>)</p>
</li>
<li><p><code><span>np.cast</span></code> has been removed. The literal replacement for
<code><span>np.cast[dtype](arg)</span></code> is <code><span>np.asarray(arg,</span> <span>dtype=dtype)</span></code>.</p></li>
<li><p><code><span>np.source</span></code> has been removed. The preferred replacement is
<code><span>inspect.getsource</span></code>.</p></li>
<li><p><code><span>np.lookfor</span></code> has been removed.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24144">gh-24144</a>)</p>
</li>
<li><p><code><span>numpy.who</span></code> has been removed. As an alternative for the removed functionality, one
can use a variable explorer that is available in IDEs such as Spyder or Jupyter Notebook.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24321">gh-24321</a>)</p>
</li>
<li><p>Warnings and exceptions present in <a href="https://numpy.org/devdocs/reference/routines.exceptions.html#module-numpy.exceptions" title="numpy.exceptions"><code><span>numpy.exceptions</span></code></a> (e.g,
<a href="https://numpy.org/devdocs/reference/generated/numpy.exceptions.ComplexWarning.html#numpy.exceptions.ComplexWarning" title="numpy.exceptions.ComplexWarning"><code><span>ComplexWarning</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.exceptions.VisibleDeprecationWarning.html#numpy.exceptions.VisibleDeprecationWarning" title="numpy.exceptions.VisibleDeprecationWarning"><code><span>VisibleDeprecationWarning</span></code></a>) are no longer exposed in the
main namespace.</p></li>
<li><p>Multiple niche enums, expired members and functions have been removed from
the main namespace, such as: <code><span>ERR_*</span></code>, <code><span>SHIFT_*</span></code>, <code><span>np.fastCopyAndTranspose</span></code>,
<code><span>np.kernel_version</span></code>, <code><span>np.numarray</span></code>, <code><span>np.oldnumeric</span></code> and <code><span>np.set_numeric_ops</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24316">gh-24316</a>)</p>
</li>
<li><p>Replaced <code><span>from</span> <span>...</span> <span>import</span> <span>*</span></code> in the <code><span>numpy/__init__.py</span></code> with explicit imports.
As a result, these main namespace members got removed: <code><span>np.FLOATING_POINT_SUPPORT</span></code>,
<code><span>np.FPE_*</span></code>, <code><span>np.NINF</span></code>, <code><span>np.PINF</span></code>, <code><span>np.NZERO</span></code>, <code><span>np.PZERO</span></code>, <code><span>np.CLIP</span></code>,
<code><span>np.WRAP</span></code>, <code><span>np.WRAP</span></code>, <code><span>np.RAISE</span></code>, <code><span>np.BUFSIZE</span></code>, <code><span>np.UFUNC_BUFSIZE_DEFAULT</span></code>,
<code><span>np.UFUNC_PYVALS_NAME</span></code>, <code><span>np.ALLOW_THREADS</span></code>, <code><span>np.MAXDIMS</span></code>, <code><span>np.MAY_SHARE_EXACT</span></code>,
<code><span>np.MAY_SHARE_BOUNDS</span></code>, <code><span>add_newdoc</span></code>, <code><span>np.add_docstring</span></code> and
<code><span>np.add_newdoc_ufunc</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24357">gh-24357</a>)</p>
</li>
<li><p>Alias <code><span>np.float_</span></code> has been removed. Use <code><span>np.float64</span></code> instead.</p></li>
<li><p>Alias <code><span>np.complex_</span></code> has been removed. Use <code><span>np.complex128</span></code> instead.</p></li>
<li><p>Alias <code><span>np.longfloat</span></code> has been removed. Use <code><span>np.longdouble</span></code> instead.</p></li>
<li><p>Alias <code><span>np.singlecomplex</span></code> has been removed. Use <code><span>np.complex64</span></code> instead.</p></li>
<li><p>Alias <code><span>np.cfloat</span></code> has been removed. Use <code><span>np.complex128</span></code> instead.</p></li>
<li><p>Alias <code><span>np.longcomplex</span></code> has been removed. Use <code><span>np.clongdouble</span></code> instead.</p></li>
<li><p>Alias <code><span>np.clongfloat</span></code> has been removed. Use <code><span>np.clongdouble</span></code> instead.</p></li>
<li><p>Alias <code><span>np.string_</span></code> has been removed. Use <code><span>np.bytes_</span></code> instead.</p></li>
<li><p>Alias <code><span>np.unicode_</span></code> has been removed. Use <code><span>np.str_</span></code> instead.</p></li>
<li><p>Alias <code><span>np.Inf</span></code> has been removed. Use <code><span>np.inf</span></code> instead.</p></li>
<li><p>Alias <code><span>np.Infinity</span></code> has been removed. Use <code><span>np.inf</span></code> instead.</p></li>
<li><p>Alias <code><span>np.NaN</span></code> has been removed. Use <code><span>np.nan</span></code> instead.</p></li>
<li><p>Alias <code><span>np.infty</span></code> has been removed. Use <code><span>np.inf</span></code> instead.</p></li>
<li><p>Alias <code><span>np.mat</span></code> has been removed. Use <code><span>np.asmatrix</span></code> instead.</p></li>
<li><p><code><span>np.issubclass_</span></code> has been removed. Use the <code><span>issubclass</span></code> builtin instead.</p></li>
<li><p><code><span>np.asfarray</span></code> has been removed. Use <code><span>np.asarray</span></code> with a proper dtype instead.</p></li>
<li><p><code><span>np.set_string_function</span></code> has been removed. Use <code><span>np.set_printoptions</span></code>
instead with a formatter for custom printing of NumPy objects.</p></li>
<li><p><code><span>np.tracemalloc_domain</span></code> is now only available from <code><span>np.lib</span></code>.</p></li>
<li><p><code><span>np.recfromcsv</span></code> and <code><span>recfromtxt</span></code> are now only available from <code><span>np.lib.npyio</span></code>.</p></li>
<li><p><code><span>np.issctype</span></code>, <code><span>np.maximum_sctype</span></code>, <code><span>np.obj2sctype</span></code>, <code><span>np.sctype2char</span></code>,
<code><span>np.sctypes</span></code>, <code><span>np.issubsctype</span></code> were all removed from the
main namespace without replacement, as they where niche members.</p></li>
<li><p>Deprecated <code><span>np.deprecate</span></code> and <code><span>np.deprecate_with_doc</span></code> has been removed
from the main namespace. Use <code><span>DeprecationWarning</span></code> instead.</p></li>
<li><p>Deprecated <code><span>np.safe_eval</span></code> has been removed from the main namespace.
Use <code><span>ast.literal_eval</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24376">gh-24376</a>)</p>
</li>
<li><p><code><span>np.find_common_type</span></code> has been removed. Use <code><span>numpy.promote_types</span></code> or
<code><span>numpy.result_type</span></code> instead. To achieve semantics for the <code><span>scalar_types</span></code>
argument, use <code><span>numpy.result_type</span></code> and pass <code><span>0</span></code>, <code><span>0.0</span></code>, or <code><span>0j</span></code> as a
Python scalar instead.</p></li>
<li><p><code><span>np.round_</span></code> has been removed. Use <code><span>np.round</span></code> instead.</p></li>
<li><p><code><span>np.nbytes</span></code> has been removed. Use <code><span>np.dtype(&lt;dtype&gt;).itemsize</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24477">gh-24477</a>)</p>
</li>
<li><p><code><span>np.compare_chararrays</span></code> has been removed from the main namespace.
Use <code><span>np.char.compare_chararrays</span></code> instead.</p></li>
<li><p>The <code><span>charrarray</span></code> in the main namespace has been deprecated. It can be imported
without a deprecation warning from <code><span>np.char.chararray</span></code> for now,
but we are planning to fully deprecate and remove <code><span>chararray</span></code> in the future.</p></li>
<li><p><code><span>np.format_parser</span></code> has been removed from the main namespace.
Use <code><span>np.rec.format_parser</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24587">gh-24587</a>)</p>
</li>
<li><p>Support for seven data type string aliases has been removed from <code><span>np.dtype</span></code>:
<code><span>int0</span></code>, <code><span>uint0</span></code>, <code><span>void0</span></code>, <code><span>object0</span></code>, <code><span>str0</span></code>, <code><span>bytes0</span></code> and <code><span>bool8</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24807">gh-24807</a>)</p>
</li>
<li><p>The experimental <code><span>numpy.array_api</span></code> submodule has been removed. Use the main
<code><span>numpy</span></code> namespace for regular usage instead, or the separate
<code><span>array-api-strict</span></code> package for the compliance testing use case for which
<code><span>numpy.array_api</span></code> was mostly used.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25911">gh-25911</a>)</p>
</li>
</ul>
<section id="array-prepare-is-removed">
<h3><code><span>__array_prepare__</span></code> is removed<a href="#array-prepare-is-removed" title="Link to this heading">#</a></h3>
<p>UFuncs called <code><span>__array_prepare__</span></code> before running computations
for normal ufunc calls (not generalized ufuncs, reductions, etc.).
The function was also called instead of <code><span>__array_wrap__</span></code> on the
results of some linear algebra functions.</p>
<p>It is now removed. If you use it, migrate to <code><span>__array_ufunc__</span></code> or rely on
<code><span>__array_wrap__</span></code> which is called with a context in all cases, although only
after the result array is filled. In those code paths, <code><span>__array_wrap__</span></code> will
now be passed a base class, rather than a subclass array.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25105">gh-25105</a>)</p>
</section>
</section>
<section id="deprecations">
<h2>Deprecations<a href="#deprecations" title="Link to this heading">#</a></h2>
<ul>
<li><p><code><span>np.compat</span></code> has been deprecated, as Python 2 is no longer supported.</p></li>
<li><p><code><span>np.safe_eval</span></code> has been deprecated. <code><span>ast.literal_eval</span></code> should be used instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23830">gh-23830</a>)</p>
</li>
<li><p><code><span>np.recfromcsv</span></code>, <code><span>np.recfromtxt</span></code>, <code><span>np.disp</span></code>, <code><span>np.get_array_wrap</span></code>,
<code><span>np.maximum_sctype</span></code>, <code><span>np.deprecate</span></code> and <code><span>np.deprecate_with_doc</span></code>
have been deprecated.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24154">gh-24154</a>)</p>
</li>
<li><p><code><span>np.trapz</span></code> has been deprecated. Use <code><span>np.trapezoid</span></code> or a <code><span>scipy.integrate</span></code> function instead.</p></li>
<li><p><code><span>np.in1d</span></code> has been deprecated. Use <code><span>np.isin</span></code> instead.</p></li>
<li><p>Alias <code><span>np.row_stack</span></code> has been deprecated. Use <code><span>np.vstack</span></code> directly.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24445">gh-24445</a>)</p>
</li>
<li><p><code><span>__array_wrap__</span></code> is now passed <code><span>arr,</span> <span>context,</span> <span>return_scalar</span></code> and
support for implementations not accepting all three are deprecated.  Its signature
should be <code><span>__array_wrap__(self,</span> <span>arr,</span> <span>context=None,</span> <span>return_scalar=False)</span></code></p>
<p>(<a href="https://github.com/numpy/numpy/pull/25408">gh-25408</a>)</p>
</li>
<li><p>Arrays of 2-dimensional vectors for <code><span>np.cross</span></code> have been deprecated. Use
arrays of 3-dimensional vectors instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24818">gh-24818</a>)</p>
</li>
<li><p><code><span>np.dtype(&#34;a&#34;)</span></code> alias for <code><span>np.dtype(np.bytes_)</span></code> was deprecated. Use
<code><span>np.dtype(&#34;S&#34;)</span></code> alias instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24854">gh-24854</a>)</p>
</li>
<li><p>Use of keyword arguments <code><span>x</span></code> and <code><span>y</span></code> with functions
<code><span>assert_array_equal</span></code> and <code><span>assert_array_almost_equal</span></code> has been deprecated.
Pass the first two arguments as positional arguments instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24978">gh-24978</a>)</p>
</li>
</ul>
<section id="numpy-fft-deprecations-for-n-d-transforms-with-none-values-in-arguments">
<h3><a href="https://numpy.org/devdocs/reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code><span>numpy.fft</span></code></a> deprecations for n-D transforms with None values in arguments<a href="#numpy-fft-deprecations-for-n-d-transforms-with-none-values-in-arguments" title="Link to this heading">#</a></h3>
<p>Using <code><span>fftn</span></code>, <code><span>ifftn</span></code>, <code><span>rfftn</span></code>, <code><span>irfftn</span></code>, <code><span>fft2</span></code>, <code><span>ifft2</span></code>,
<code><span>rfft2</span></code> or <code><span>irfft2</span></code> with the <code><span>s</span></code> parameter set to a value that is not
<code><span>None</span></code> and the <code><span>axes</span></code> parameter set to <code><span>None</span></code> has been deprecated, in
line with the array API standard. To retain current behaviour, pass a sequence
[0, …, k-1] to <code><span>axes</span></code> for an array of dimension k.</p>
<p>Furthermore, passing an array to <code><span>s</span></code> which contains <code><span>None</span></code> values is
deprecated as the parameter is documented to accept a sequence of integers
in both the NumPy docs and the array API specification. To use the default
behaviour of the corresponding 1-D transform, pass the value matching
the default for its <code><span>n</span></code> parameter. To use the default behaviour for every
axis, the <code><span>s</span></code> argument can be omitted.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25495">gh-25495</a>)</p>
</section>
<section id="np-linalg-lstsq-now-defaults-to-a-new-rcond-value">
<h3><code><span>np.linalg.lstsq</span></code> now defaults to a new <code><span>rcond</span></code> value<a href="#np-linalg-lstsq-now-defaults-to-a-new-rcond-value" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.lstsq.html#numpy.linalg.lstsq" title="numpy.linalg.lstsq"><code><span>lstsq</span></code></a> now uses the new rcond value of the machine precision
times <code><span>max(M,</span> <span>N)</span></code>.  Previously, the machine precision was used but a
FutureWarning was given to notify that this change will happen eventually.
That old behavior can still be achieved by passing <code><span>rcond=-1</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25721">gh-25721</a>)</p>
</section>
</section>
<section id="expired-deprecations">
<h2>Expired deprecations<a href="#expired-deprecations" title="Link to this heading">#</a></h2>
<ul>
<li><p>The <code><span>np.core.umath_tests</span></code> submodule has been removed from the public API.
(Deprecated in NumPy 1.15)</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23809">gh-23809</a>)</p>
</li>
<li><p>The <code><span>PyDataMem_SetEventHook</span></code> deprecation has expired and it is
removed.  Use <code><span>tracemalloc</span></code> and the <code><span>np.lib.tracemalloc_domain</span></code>
domain.  (Deprecated in NumPy 1.23)</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23921">gh-23921</a>)</p>
</li>
<li><p>The deprecation of <code><span>set_numeric_ops</span></code> and the C functions
<code><span>PyArray_SetNumericOps</span></code> and <code><span>PyArray_GetNumericOps</span></code> has
been expired and the functions removed.  (Deprecated in NumPy 1.16)</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23998">gh-23998</a>)</p>
</li>
<li><p>The <code><span>fasttake</span></code>, <code><span>fastclip</span></code>, and <code><span>fastputmask</span></code>  <code><span>ArrFuncs</span></code>
deprecation is now finalized.</p></li>
<li><p>The deprecated function <code><span>fastCopyAndTranspose</span></code> and its C counterpart
are now removed.</p></li>
<li><p>The deprecation of <code><span>PyArray_ScalarFromObject</span></code> is now finalized.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24312">gh-24312</a>)</p>
</li>
<li><p><code><span>np.msort</span></code> has been removed. For a replacement, <code><span>np.sort(a,</span> <span>axis=0)</span></code>
should be used instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24494">gh-24494</a>)</p>
</li>
<li><p><code><span>np.dtype((&#34;f8&#34;,</span> <span>1)</span></code> will now return a shape 1 subarray dtype
rather than a non-subarray one.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25761">gh-25761</a>)</p>
</li>
<li><p>Assigning to the <code><span>.data</span></code> attribute of an ndarray is disallowed and will
raise.</p></li>
<li><p><code><span>np.binary_repr(a,</span> <span>width)</span></code> will raise if width is too small.</p></li>
<li><p>Using <code><span>NPY_CHAR</span></code> in <code><span>PyArray_DescrFromType()</span></code> will raise, use
<code><span>NPY_STRING</span></code> <code><span>NPY_UNICODE</span></code>, or <code><span>NPY_VSTRING</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25794">gh-25794</a>)</p>
</li>
</ul>
</section>
<section id="compatibility-notes">
<h2>Compatibility notes<a href="#compatibility-notes" title="Link to this heading">#</a></h2>
<section id="loadtxt-and-genfromtxt-default-encoding-changed">
<h3><code><span>loadtxt</span></code> and <code><span>genfromtxt</span></code> default encoding changed<a href="#loadtxt-and-genfromtxt-default-encoding-changed" title="Link to this heading">#</a></h3>
<p><code><span>loadtxt</span></code> and <code><span>genfromtxt</span></code> now both default to <code><span>encoding=None</span></code>
which may mainly modify how <code><span>converters</span></code> work.
These will now be passed <code><span>str</span></code> rather than <code><span>bytes</span></code>. Pass the
encoding explicitly to always get the new or old behavior.
For <code><span>genfromtxt</span></code> the change also means that returned values will now be
unicode strings rather than bytes.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25158">gh-25158</a>)</p>
</section>
<section id="f2py-compatibility-notes">
<h3><code><span>f2py</span></code> compatibility notes<a href="#f2py-compatibility-notes" title="Link to this heading">#</a></h3>
<p><code><span>f2py</span></code> will no longer accept ambiguous <code><span>-m</span></code> and <code><span>.pyf</span></code> CLI combinations.
When more than one <code><span>.pyf</span></code> file is passed, an error is raised. When both <code><span>-m</span></code>
and a <code><span>.pyf</span></code> is passed, a warning is emitted and the <code><span>-m</span></code> provided name is
ignored.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25181">gh-25181</a>)</p>
<p>The <code><span>f2py.compile()</span></code> helper has been removed because it leaked memory, has
been marked as experimental for several years now, and was implemented as a thin
<code><span>subprocess.run</span></code> wrapper. It is also one of the test bottlenecks. See
<a href="https://github.com/numpy/numpy/issues/25122">gh-25122</a> for the full
rationale. It also used several <code><span>np.distutils</span></code> features which are too fragile
to be ported to work with <code><span>meson</span></code>.</p>
<p>Users are urged to replace calls to <code><span>f2py.compile</span></code> with calls to
<code><span>subprocess.run(&#34;python&#34;,</span> <span>&#34;-m&#34;,</span> <span>&#34;numpy.f2py&#34;,...</span></code> instead, and to use
environment variables to interact with <code><span>meson</span></code>. <a href="https://mesonbuild.com/Machine-files.html">Native files</a> are also an option.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25193">gh-25193</a>)</p>
</section>
<section id="arange-s-start-argument-is-positional-only">
<h3><code><span>arange</span></code>’s <code><span>start</span></code> argument is positional-only<a href="#arange-s-start-argument-is-positional-only" title="Link to this heading">#</a></h3>
<p>The first argument of <code><span>arange</span></code> is now positional only. This way,
specifying a <code><span>start</span></code> argument as a keyword, e.g. <code><span>arange(start=0,</span> <span>stop=4)</span></code>,
raises a TypeError. Other behaviors, are unchanged so <code><span>arange(stop=4)</span></code>,
<code><span>arange(2,</span> <span>stop=4)</span></code> and so on, are still valid and have the same meaning as
before.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25336">gh-25336</a>)</p>
</section>
<section id="minor-changes-in-behavior-of-sorting-functions">
<h3>Minor changes in behavior of sorting functions<a href="#minor-changes-in-behavior-of-sorting-functions" title="Link to this heading">#</a></h3>
<p>Due to algorithmic changes and use of SIMD code, sorting functions with methods
that aren’t stable may return slightly different results in 2.0.0 compared to
1.26.x. This includes the default method of <a href="https://numpy.org/devdocs/reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code><span>argsort</span></code></a> and
<a href="https://numpy.org/devdocs/reference/generated/numpy.argpartition.html#numpy.argpartition" title="numpy.argpartition"><code><span>argpartition</span></code></a>.</p>
</section>
<section id="removed-ambiguity-when-broadcasting-in-np-solve">
<h3>Removed ambiguity when broadcasting in <code><span>np.solve</span></code><a href="#removed-ambiguity-when-broadcasting-in-np-solve" title="Link to this heading">#</a></h3>
<p>The broadcasting rules for <code><span>np.solve(a,</span> <span>b)</span></code> were ambiguous when <code><span>b</span></code> had 1
fewer dimensions than <code><span>a</span></code>. This has been resolved in a backward-incompatible
way and is now compliant with the Array API. The old behaviour can be
reconstructed by using <code><span>np.solve(a,</span> <span>b[...,</span> <span>None])[...,</span> <span>0]</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25914">gh-25914</a>)</p>
</section>
<section id="modified-representation-for-polynomial">
<h3>Modified representation for <code><span>Polynomial</span></code><a href="#modified-representation-for-polynomial" title="Link to this heading">#</a></h3>
<p>The representation method for <a href="https://numpy.org/devdocs/reference/generated/numpy.polynomial.polynomial.Polynomial.html#numpy.polynomial.polynomial.Polynomial" title="numpy.polynomial.polynomial.Polynomial"><code><span>Polynomial</span></code></a> was
updated to include the domain in the representation. The plain text and latex
representations are now consistent. For example the output of
<code><span>str(np.polynomial.Polynomial([1,</span> <span>1],</span> <span>domain=[.1,</span> <span>.2]))</span></code> used to be <code><span>1.0</span> <span>+</span>
<span>1.0</span> <span>x</span></code>, but now is <code><span>1.0</span> <span>+</span> <span>1.0</span> <span>(-3.0000000000000004</span> <span>+</span> <span>20.0</span> <span>x)</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/21760">gh-21760</a>)</p>
</section>
</section>
<section id="c-api-changes">
<h2>C API changes<a href="#c-api-changes" title="Link to this heading">#</a></h2>
<ul>
<li><p>The <code><span>PyArray_CGT</span></code>, <code><span>PyArray_CLT</span></code>, <code><span>PyArray_CGE</span></code>, <code><span>PyArray_CLE</span></code>,
<code><span>PyArray_CEQ</span></code>, <code><span>PyArray_CNE</span></code> macros have been removed.</p></li>
<li><p><code><span>PyArray_MIN</span></code> and <code><span>PyArray_MAX</span></code> have been moved from <code><span>ndarraytypes.h</span></code>
to <code><span>npy_math.h</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24258">gh-24258</a>)</p>
</li>
<li><p>A C API for working with <a href="https://numpy.org/devdocs/reference/routines.dtypes.html#numpy.dtypes.StringDType" title="numpy.dtypes.StringDType"><code><span>numpy.dtypes.StringDType</span></code></a> arrays has been exposed.
This includes functions for acquiring and releasing mutexes which lock access
to the string data, as well as packing and unpacking UTF-8 bytestreams from
array entries.</p></li>
<li><p><code><span>NPY_NTYPES</span></code> has been renamed to <code><span>NPY_NTYPES_LEGACY</span></code> as it does not
include new NumPy built-in DTypes. In particular the new string DType
will likely not work correctly with code that handles legacy DTypes.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25347">gh-25347</a>)</p>
</li>
<li><p>The C-API now only exports the static inline function versions
of the array accessors (previously this depended on using “deprecated API”).
While we discourage it, the struct fields can still be used directly.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25789">gh-25789</a>)</p>
</li>
<li><p>NumPy now defines <a href="https://numpy.org/devdocs/reference/c-api/array.html#c.PyArray_Pack" title="PyArray_Pack"><code><span>PyArray_Pack</span></code></a> to set an individual memory
address.  Unlike <code><span>PyArray_SETITEM</span></code> this function is equivalent to setting
an individual array item and does not require a NumPy array input.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25954">gh-25954</a>)</p>
</li>
<li><p>The <code><span>-&gt;f</span></code> slot has been removed from <code><span>PyArray_Descr</span></code>.
If you use this slot, replace accessing it with
<code><span>PyDataType_GetArrFuncs</span></code> (see its documentation and the
<a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#numpy-2-migration-guide"><span>NumPy 2.0 migration guide</span></a>). In some cases using other functions like
<code><span>PyArray_GETITEM</span></code> may be an alternatives.</p></li>
<li><p><code><span>PyArray_GETITEM</span></code> and <code><span>PyArray_SETITEM</span></code> now require the import of the
NumPy API table to be used and are no longer defined in <code><span>ndarraytypes.h</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25812">gh-25812</a>)</p>
</li>
<li><p>Due to runtime dependencies, the definition for functionality accessing
the dtype flags was moved from <code><span>numpy/ndarraytypes.h</span></code> and is only available
after including <code><span>numpy/ndarrayobject.h</span></code> as it requires <code><span>import_array()</span></code>.
This includes <code><span>PyDataType_FLAGCHK</span></code>, <code><span>PyDataType_REFCHK</span></code> and
<code><span>NPY_BEGIN_THREADS_DESCR</span></code>.</p></li>
<li><p>The dtype flags on <code><span>PyArray_Descr</span></code> must now be accessed through the
<code><span>PyDataType_FLAGS</span></code> inline function to be compatible with both 1.x and 2.x.
This function is defined in <code><span>npy_2_compat.h</span></code> to allow backporting.
Most or all users should use <code><span>PyDataType_FLAGCHK</span></code> which is available on
1.x and does not require backporting.
Cython users should use Cython 3.  Otherwise access will go through Python
unless they use <code><span>PyDataType_FLAGCHK</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25816">gh-25816</a>)</p>
</li>
</ul>
<section id="datetime-functionality-exposed-in-the-c-api-and-cython-bindings">
<h3>Datetime functionality exposed in the C API and Cython bindings<a href="#datetime-functionality-exposed-in-the-c-api-and-cython-bindings" title="Link to this heading">#</a></h3>
<p>The functions <code><span>NpyDatetime_ConvertDatetime64ToDatetimeStruct</span></code>,
<code><span>NpyDatetime_ConvertDatetimeStructToDatetime64</span></code>,
<code><span>NpyDatetime_ConvertPyDateTimeToDatetimeStruct</span></code>,
<code><span>NpyDatetime_GetDatetimeISO8601StrLen</span></code>, <code><span>NpyDatetime_MakeISO8601Datetime</span></code>,
and <code><span>NpyDatetime_ParseISO8601Datetime</span></code> have been added to the C API to
facilitate converting between strings, Python datetimes, and NumPy datetimes in
external libraries.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/21199">gh-21199</a>)</p>
</section>
<section id="const-correctness-for-the-generalized-ufunc-c-api">
<h3>Const correctness for the generalized ufunc C API<a href="#const-correctness-for-the-generalized-ufunc-c-api" title="Link to this heading">#</a></h3>
<p>The NumPy C API’s functions for constructing generalized ufuncs
(<code><span>PyUFunc_FromFuncAndData</span></code>, <code><span>PyUFunc_FromFuncAndDataAndSignature</span></code>,
<code><span>PyUFunc_FromFuncAndDataAndSignatureAndIdentity</span></code>) take <code><span>types</span></code> and <code><span>data</span></code>
arguments that are not modified by NumPy’s internals. Like the <code><span>name</span></code> and
<code><span>doc</span></code> arguments, third-party Python extension modules are likely to supply
these arguments from static constants. The <code><span>types</span></code> and <code><span>data</span></code> arguments are
now const-correct: they are declared as <code><span>const</span> <span>char</span> <span>*types</span></code> and
<code><span>void</span> <span>*const</span> <span>*data</span></code>, respectively. C code should not be affected, but C++
code may be.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23847">gh-23847</a>)</p>
</section>
<section id="larger-npy-maxdims-and-npy-maxargs-npy-ravel-axis-introduced">
<h3>Larger <code><span>NPY_MAXDIMS</span></code> and <code><span>NPY_MAXARGS</span></code>, <code><span>NPY_RAVEL_AXIS</span></code> introduced<a href="#larger-npy-maxdims-and-npy-maxargs-npy-ravel-axis-introduced" title="Link to this heading">#</a></h3>
<p><code><span>NPY_MAXDIMS</span></code> is now 64, you may want to review its use.  This is usually
used in a stack allocation, where the increase should be safe.
However, we do encourage generally to remove any use of <code><span>NPY_MAXDIMS</span></code> and
<code><span>NPY_MAXARGS</span></code> to eventually allow removing the constraint completely.
For the conversion helper and C-API functions mirroring Python ones such as
<code><span>take</span></code>, <code><span>NPY_MAXDIMS</span></code> was used to mean <code><span>axis=None</span></code>. Such usage must be
replaced with <code><span>NPY_RAVEL_AXIS</span></code>. See also <a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#migration-maxdims"><span>Increased maximum number of dimensions</span></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</section>
<section id="npy-maxargs-not-constant-and-pyarraymultiiterobject-size-change">
<h3><code><span>NPY_MAXARGS</span></code> not constant and <code><span>PyArrayMultiIterObject</span></code> size change<a href="#npy-maxargs-not-constant-and-pyarraymultiiterobject-size-change" title="Link to this heading">#</a></h3>
<p>Since <code><span>NPY_MAXARGS</span></code> was increased, it is now a runtime constant and not
compile-time constant anymore.
We expect almost no users to notice this.  But if used for stack allocations
it now must be replaced with a custom constant using <code><span>NPY_MAXARGS</span></code> as an
additional runtime check.</p>
<p>The <code><span>sizeof(PyArrayMultiIterObject)</span></code> no longer includes the full size
of the object.  We expect nobody to notice this change.  It was necessary
to avoid issues with Cython.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25271">gh-25271</a>)</p>
</section>
<section id="required-changes-for-custom-legacy-user-dtypes">
<h3>Required changes for custom legacy user dtypes<a href="#required-changes-for-custom-legacy-user-dtypes" title="Link to this heading">#</a></h3>
<p>In order to improve our DTypes it is unfortunately necessary
to break the ABI, which requires some changes for dtypes registered
with <code><span>PyArray_RegisterDataType</span></code>.
Please see the documentation of <code><span>PyArray_RegisterDataType</span></code> for how
to adapt your code and achieve compatibility with both 1.x and 2.x.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25792">gh-25792</a>)</p>
</section>
<section id="new-public-dtype-api">
<h3>New Public DType API<a href="#new-public-dtype-api" title="Link to this heading">#</a></h3>
<p>The C implementation of the NEP 42 DType API is now public. While the DType API
has shipped in NumPy for a few versions, it was only usable in sessions with a
special environment variable set. It is now possible to write custom DTypes
outside of NumPy using the new DType API and the normal <code><span>import_array()</span></code>
mechanism for importing the numpy C API.</p>
<p>See <a href="https://numpy.org/devdocs/reference/c-api/array.html#dtype-api"><span>Custom Data Types</span></a> for more details about the API. As always with a new
feature, please report any bugs you run into implementing or using a new
DType. It is likely that downstream C code that works with dtypes will need to
be updated to work correctly with new DTypes.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25754">gh-25754</a>)</p>
</section>
<section id="new-c-api-import-functions">
<h3>New C-API import functions<a href="#new-c-api-import-functions" title="Link to this heading">#</a></h3>
<p>We have now added <code><span>PyArray_ImportNumPyAPI</span></code> and <code><span>PyUFunc_ImportUFuncAPI</span></code>
as static inline functions to import the NumPy C-API tables.
The new functions have two advantages over <code><span>import_array</span></code> and
<code><span>import_ufunc</span></code>:</p>
<ul>
<li><p>They check whether the import was already performed and are light-weight
if not, allowing to add them judiciously (although this is not preferable
in most cases).</p></li>
<li><p>The old mechanisms were macros rather than functions which included a
<code><span>return</span></code> statement.</p></li>
</ul>
<p>The <code><span>PyArray_ImportNumPyAPI()</span></code> function is included in <code><span>npy_2_compat.h</span></code>
for simpler backporting.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25866">gh-25866</a>)</p>
</section>
<section id="structured-dtype-information-access-through-functions">
<h3>Structured dtype information access through functions<a href="#structured-dtype-information-access-through-functions" title="Link to this heading">#</a></h3>
<p>The dtype structures fields <code><span>c_metadata</span></code>, <code><span>names</span></code>,
<code><span>fields</span></code>, and <code><span>subarray</span></code> must now be accessed through new
functions following the same names, such as <code><span>PyDataType_NAMES</span></code>.
Direct access of the fields is not valid as they do not exist for
all <code><span>PyArray_Descr</span></code> instances.
The <code><span>metadata</span></code> field is kept, but the macro version should also be preferred.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25802">gh-25802</a>)</p>
</section>
<section id="descriptor-elsize-and-alignment-access">
<h3>Descriptor <code><span>elsize</span></code> and <code><span>alignment</span></code> access<a href="#descriptor-elsize-and-alignment-access" title="Link to this heading">#</a></h3>
<p>Unless compiling only with NumPy 2 support, the <code><span>elsize</span></code> and <code><span>aligment</span></code>
fields must now be accessed via <code><span>PyDataType_ELSIZE</span></code>,
<code><span>PyDataType_SET_ELSIZE</span></code>, and <code><span>PyDataType_ALIGNMENT</span></code>.
In cases where the descriptor is attached to an array, we advise
using <code><span>PyArray_ITEMSIZE</span></code> as it exists on all NumPy versions.
Please see <a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#migration-c-descr"><span>The PyArray_Descr struct has been changed</span></a> for more information.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25943">gh-25943</a>)</p>
</section>
</section>
<section id="numpy-2-0-c-api-removals">
<h2>NumPy 2.0 C API removals<a href="#numpy-2-0-c-api-removals" title="Link to this heading">#</a></h2>
<ul>
<li><p><code><span>npy_interrupt.h</span></code> and the corresponding macros like <code><span>NPY_SIGINT_ON</span></code>
have been removed.  We recommend querying <code><span>PyErr_CheckSignals()</span></code> or
<code><span>PyOS_InterruptOccurred()</span></code> periodically (these do currently require
holding the GIL though).</p></li>
<li><p>The <code><span>noprefix.h</span></code> header has been removed. Replace missing symbols with
their prefixed counterparts (usually an added <code><span>NPY_</span></code> or <code><span>npy_</span></code>).</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23919">gh-23919</a>)</p>
</li>
<li><p><code><span>PyUFunc_GetPyVals</span></code>, <code><span>PyUFunc_handlefperr</span></code>, and <code><span>PyUFunc_checkfperr</span></code>
have been removed.
If needed, a new backwards compatible function to raise floating point errors
could be restored. Reason for removal: there are no known users and the
functions would have made <code><span>with</span> <span>np.errstate()</span></code> fixes much more difficult).</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23922">gh-23922</a>)</p>
</li>
<li><p>The <code><span>numpy/old_defines.h</span></code> which was part of the API deprecated since NumPy 1.7
has been removed.  This removes macros of the form <code><span>PyArray_CONSTANT</span></code>.
The <a href="https://github.com/numpy/numpy/blob/main/tools/replace_old_macros.sed">replace_old_macros.sed</a>
script may be useful to convert them to the <code><span>NPY_CONSTANT</span></code> version.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24011">gh-24011</a>)</p>
</li>
<li><p>The <code><span>legacy_inner_loop_selector</span></code> member of the ufunc struct is removed
to simplify improvements to the dispatching system.
There are no known users overriding or directly accessing this member.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24271">gh-24271</a>)</p>
</li>
<li><p><code><span>NPY_INTPLTR</span></code> has been removed to avoid confusion (see <code><span>intp</span></code>
redefinition).</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24888">gh-24888</a>)</p>
</li>
<li><p>The advanced indexing <code><span>MapIter</span></code> and related API has been removed.
The (truly) public part of it was not well tested and had only one
known user (Theano).  Making it private will simplify improvements
to speed up <code><span>ufunc.at</span></code>, make advanced indexing more maintainable,
and was important for increasing the maximum number of dimensions of arrays
to 64. Please let us know if this API is important to you so we can find a
solution together.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25138">gh-25138</a>)</p>
</li>
<li><p>The <code><span>NPY_MAX_ELSIZE</span></code> macro has been removed, as it only ever reflected
builtin numeric types and served no internal purpose.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</li>
<li><p><code><span>PyArray_REFCNT</span></code> and <code><span>NPY_REFCOUNT</span></code> are removed. Use <code><span>Py_REFCNT</span></code> instead.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25156">gh-25156</a>)</p>
</li>
<li><p><code><span>PyArrayFlags_Type</span></code> and <code><span>PyArray_NewFlagsObject</span></code> as well as
<code><span>PyArrayFlagsObject</span></code> are private now.
There is no known use-case; use the Python API if needed.</p></li>
<li><p><code><span>PyArray_MoveInto</span></code>, <code><span>PyArray_CastTo</span></code>, <code><span>PyArray_CastAnyTo</span></code> are removed
use <code><span>PyArray_CopyInto</span></code> and if absolutely needed <code><span>PyArray_CopyAnyInto</span></code>
(the latter does a flat copy).</p></li>
<li><p><code><span>PyArray_FillObjectArray</span></code> is removed, its only true use is for
implementing <code><span>np.empty</span></code>.  Create a new empty array or use
<code><span>PyArray_FillWithScalar()</span></code> (decrefs existing objects).</p></li>
<li><p><code><span>PyArray_CompareUCS4</span></code> and <code><span>PyArray_CompareString</span></code> are removed.
Use the standard C string comparison functions.</p></li>
<li><p><code><span>PyArray_ISPYTHON</span></code> is removed as it is misleading, has no known
use-cases, and is easy to replace.</p></li>
<li><p><code><span>PyArray_FieldNames</span></code> is removed, as it is unclear what it would
be useful for.  It also has incorrect semantics in some possible
use-cases.</p></li>
<li><p><code><span>PyArray_TypestrConvert</span></code> is removed, since it seems a misnomer and unlikely
to be used by anyone.  If you know the size or are limited to few types, just
use it explicitly, otherwise go via Python strings.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25292">gh-25292</a>)</p>
</li>
<li><p><code><span>PyDataType_GetDatetimeMetaData</span></code> has been removed, it did not actually
do anything since at least NumPy 1.7.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25802">gh-25802</a>)</p>
</li>
</ul>
<section id="pyarray-getcastfunc-was-removed">
<h3><code><span>PyArray_GetCastFunc</span></code> was removed<a href="#pyarray-getcastfunc-was-removed" title="Link to this heading">#</a></h3>
<p>Note that custom legacy user dtypes can still provide a castfunc
as their implementation, but any access to them is now removed.
The reason for this is that NumPy never used these internally
for many years.
If you use simple numeric types, please just use C casts directly.
In case you require an alternative, please let us know so we can
create new API such as <code><span>PyArray_CastBuffer()</span></code> which could
use old or new cast functions depending on the NumPy version.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25161">gh-25161</a>)</p>
</section>
</section>
<section id="new-features">
<h2>New Features<a href="#new-features" title="Link to this heading">#</a></h2>
<ul>
<li><p><code><span>np.add</span></code> was extended to work with <code><span>unicode</span></code> and <code><span>bytes</span></code> dtypes.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24858">gh-24858</a>)</p>
</li>
</ul>
<section id="a-new-bitwise-count-function">
<h3>A new <code><span>bitwise_count</span></code> function<a href="#a-new-bitwise-count-function" title="Link to this heading">#</a></h3>
<p>This new function counts the number of 1-bits in a number.
<a href="https://numpy.org/devdocs/reference/generated/numpy.bitwise_count.html#numpy.bitwise_count" title="numpy.bitwise_count"><code><span>bitwise_count</span></code></a> works on all the numpy integer types and
integer-like objects.</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>a</span> <span>=</span> <span>np</span><span>.</span><span>array</span><span>([</span><span>2</span><span>**</span><span>i</span> <span>-</span> <span>1</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span><span>(</span><span>16</span><span>)])</span>
<span>&gt;&gt;&gt; </span><span>np</span><span>.</span><span>bitwise_count</span><span>(</span><span>a</span><span>)</span>
<span>array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15],</span>
<span>      dtype=uint8)</span>
</pre></div>
</div>
<p>(<a href="https://github.com/numpy/numpy/pull/19355">gh-19355</a>)</p>
</section>
<section id="macos-accelerate-support-including-the-ilp64">
<h3>macOS Accelerate support, including the ILP64<a href="#macos-accelerate-support-including-the-ilp64" title="Link to this heading">#</a></h3>
<p>Support for the updated Accelerate BLAS/LAPACK library, including ILP64 (64-bit
integer) support, in macOS 13.3 has been added. This brings arm64 support, and
significant performance improvements of up to 10x for commonly used linear
algebra operations. When Accelerate is selected at build time, or if no
explicit BLAS library selection is done, the 13.3+ version will automatically
be used if available.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24053">gh-24053</a>)</p>
<p>Binary wheels are also available. On macOS &gt;=14.0, users who install NumPy from
PyPI will get wheels built against Accelerate rather than OpenBLAS.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25255">gh-25255</a>)</p>
</section>
<section id="option-to-use-weights-for-quantile-and-percentile-functions">
<h3>Option to use weights for quantile and percentile functions<a href="#option-to-use-weights-for-quantile-and-percentile-functions" title="Link to this heading">#</a></h3>
<p>A <code><span>weights</span></code> keyword is now available for <a href="https://numpy.org/devdocs/reference/generated/numpy.quantile.html#numpy.quantile" title="numpy.quantile"><code><span>quantile</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.percentile.html#numpy.percentile" title="numpy.percentile"><code><span>percentile</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.nanquantile.html#numpy.nanquantile" title="numpy.nanquantile"><code><span>nanquantile</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.nanpercentile.html#numpy.nanpercentile" title="numpy.nanpercentile"><code><span>nanpercentile</span></code></a>. Only
<code><span>method=&#34;inverted_cdf&#34;</span></code> supports weights.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24254">gh-24254</a>)</p>
</section>
<section id="improved-cpu-optimization-tracking">
<h3>Improved CPU optimization tracking<a href="#improved-cpu-optimization-tracking" title="Link to this heading">#</a></h3>
<p>A new tracer mechanism is available which enables tracking of the enabled
targets for each optimized function (i.e., that uses hardware-specific SIMD
instructions) in the NumPy library. With this enhancement, it becomes possible
to precisely monitor the enabled CPU dispatch targets for the dispatched
functions.</p>
<p>A new function named <code><span>opt_func_info</span></code> has been added to the new namespace
<a href="https://numpy.org/devdocs/reference/generated/numpy.lib.introspect.html#module-numpy.lib.introspect" title="numpy.lib.introspect"><code><span>numpy.lib.introspect</span></code></a>, offering this tracing capability. This function allows
you to retrieve information about the enabled targets based on function names
and data type signatures.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24420">gh-24420</a>)</p>
</section>
<section id="a-new-meson-backend-for-f2py">
<h3>A new Meson backend for <code><span>f2py</span></code><a href="#a-new-meson-backend-for-f2py" title="Link to this heading">#</a></h3>
<p><code><span>f2py</span></code> in compile mode (i.e. <code><span>f2py</span> <span>-c</span></code>) now accepts the <code><span>--backend</span> <span>meson</span></code>
option. This is the default option for Python &gt;=3.12. For older Python versions,
<code><span>f2py</span></code> will still default to <code><span>--backend</span> <span>distutils</span></code>.</p>
<p>To support this in realistic use-cases, in compile mode <code><span>f2py</span></code> takes a
<code><span>--dep</span></code> flag one or many times which maps to <code><span>dependency()</span></code> calls in the
<code><span>meson</span></code> backend, and does nothing in the <code><span>distutils</span></code> backend.</p>
<p>There are no changes for users of <code><span>f2py</span></code> only as a code generator, i.e. without <code><span>-c</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24532">gh-24532</a>)</p>
</section>
<section id="bind-c-support-for-f2py">
<h3><code><span>bind(c)</span></code> support for <code><span>f2py</span></code><a href="#bind-c-support-for-f2py" title="Link to this heading">#</a></h3>
<p>Both functions and subroutines can be annotated with <code><span>bind(c)</span></code>. <code><span>f2py</span></code> will
handle both the correct type mapping, and preserve the unique label for other
C interfaces.</p>
<p><strong>Note:</strong> <code><span>bind(c,</span> <span>name</span> <span>=</span> <span>&#39;routine_name_other_than_fortran_routine&#39;)</span></code> is not
honored by the <code><span>f2py</span></code> bindings by design, since <code><span>bind(c)</span></code> with the <code><span>name</span></code>
is meant to guarantee only the same name in C and Fortran, not in Python and
Fortran.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24555">gh-24555</a>)</p>
</section>
<section id="a-new-strict-option-for-several-testing-functions">
<h3>A new <code><span>strict</span></code> option for several testing functions<a href="#a-new-strict-option-for-several-testing-functions" title="Link to this heading">#</a></h3>
<p>The <code><span>strict</span></code> keyword is now available for <a href="https://numpy.org/devdocs/reference/generated/numpy.testing.assert_allclose.html#numpy.testing.assert_allclose" title="numpy.testing.assert_allclose"><code><span>assert_allclose</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="numpy.testing.assert_equal"><code><span>assert_equal</span></code></a>, and <a href="https://numpy.org/devdocs/reference/generated/numpy.testing.assert_array_less.html#numpy.testing.assert_array_less" title="numpy.testing.assert_array_less"><code><span>assert_array_less</span></code></a>.
Setting <code><span>strict=True</span></code> will disable the broadcasting behaviour for scalars
and ensure that input arrays have the same data type.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24680">gh-24680</a>,
<a href="https://github.com/numpy/numpy/pull/24770">gh-24770</a>,
<a href="https://github.com/numpy/numpy/pull/24775">gh-24775</a>)</p>
</section>
<section id="add-np-core-umath-find-and-np-core-umath-rfind-ufuncs">
<h3>Add <code><span>np.core.umath.find</span></code> and <code><span>np.core.umath.rfind</span></code> UFuncs<a href="#add-np-core-umath-find-and-np-core-umath-rfind-ufuncs" title="Link to this heading">#</a></h3>
<p>Add two <code><span>find</span></code> and <code><span>rfind</span></code> UFuncs that operate on unicode or byte strings
and are used in <code><span>np.char</span></code>. They operate similar to <code><span>str.find</span></code> and
<code><span>str.rfind</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24868">gh-24868</a>)</p>
</section>
<section id="diagonal-and-trace-for-numpy-linalg">
<h3><code><span>diagonal</span></code> and <code><span>trace</span></code> for <a href="https://numpy.org/devdocs/reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code><span>numpy.linalg</span></code></a><a href="#diagonal-and-trace-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.diagonal.html#numpy.linalg.diagonal" title="numpy.linalg.diagonal"><code><span>numpy.linalg.diagonal</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.trace.html#numpy.linalg.trace" title="numpy.linalg.trace"><code><span>numpy.linalg.trace</span></code></a> have been
added, which are array API standard-compatible variants of <a href="https://numpy.org/devdocs/reference/generated/numpy.diagonal.html#numpy.diagonal" title="numpy.diagonal"><code><span>numpy.diagonal</span></code></a> and
<a href="https://numpy.org/devdocs/reference/generated/numpy.trace.html#numpy.trace" title="numpy.trace"><code><span>numpy.trace</span></code></a>. They differ in the default axis selection which define 2-D
sub-arrays.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24887">gh-24887</a>)</p>
</section>
<section id="new-long-and-ulong-dtypes">
<h3>New <code><span>long</span></code> and <code><span>ulong</span></code> dtypes<a href="#new-long-and-ulong-dtypes" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.long" title="numpy.long"><code><span>numpy.long</span></code></a> and <a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.ulong" title="numpy.ulong"><code><span>numpy.ulong</span></code></a> have been added as NumPy integers mapping
to C’s <code><span>long</span></code> and <code><span>unsigned</span> <span>long</span></code>. Prior to NumPy 1.24, <code><span>numpy.long</span></code> was
an alias to Python’s <code><span>int</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24922">gh-24922</a>)</p>
</section>
<section id="svdvals-for-numpy-linalg">
<h3><code><span>svdvals</span></code> for <a href="https://numpy.org/devdocs/reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code><span>numpy.linalg</span></code></a><a href="#svdvals-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.svdvals.html#numpy.linalg.svdvals" title="numpy.linalg.svdvals"><code><span>numpy.linalg.svdvals</span></code></a> has been added. It computes singular values for
(a stack of) matrices. Executing <code><span>np.svdvals(x)</span></code> is the same as calling
<code><span>np.svd(x,</span> <span>compute_uv=False,</span> <span>hermitian=False)</span></code>.
This function is compatible with the array API standard.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24940">gh-24940</a>)</p>
</section>
<section id="a-new-isdtype-function">
<h3>A new <code><span>isdtype</span></code> function<a href="#a-new-isdtype-function" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.isdtype.html#numpy.isdtype" title="numpy.isdtype"><code><span>numpy.isdtype</span></code></a> was added to provide a canonical way to classify NumPy’s dtypes
in compliance with the array API standard.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25054">gh-25054</a>)</p>
</section>
<section id="a-new-astype-function">
<h3>A new <code><span>astype</span></code> function<a href="#a-new-astype-function" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.astype.html#numpy.astype" title="numpy.astype"><code><span>numpy.astype</span></code></a> was added to provide an array API standard-compatible
alternative to the <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.astype.html#numpy.ndarray.astype" title="numpy.ndarray.astype"><code><span>numpy.ndarray.astype</span></code></a> method.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25079">gh-25079</a>)</p>
</section>
<section id="array-api-compatible-functions-aliases">
<h3>Array API compatible functions’ aliases<a href="#array-api-compatible-functions-aliases" title="Link to this heading">#</a></h3>
<p>13 aliases for existing functions were added to improve compatibility with the array API standard:</p>
<ul>
<li><p>Trigonometry: <code><span>acos</span></code>, <code><span>acosh</span></code>, <code><span>asin</span></code>, <code><span>asinh</span></code>, <code><span>atan</span></code>, <code><span>atanh</span></code>, <code><span>atan2</span></code>.</p></li>
<li><p>Bitwise: <code><span>bitwise_left_shift</span></code>, <code><span>bitwise_invert</span></code>, <code><span>bitwise_right_shift</span></code>.</p></li>
<li><p>Misc: <code><span>concat</span></code>, <code><span>permute_dims</span></code>, <code><span>pow</span></code>.</p></li>
<li><p>In <code><span>numpy.linalg</span></code>: <code><span>tensordot</span></code>, <code><span>matmul</span></code>.</p></li>
</ul>
<p>(<a href="https://github.com/numpy/numpy/pull/25086">gh-25086</a>)</p>
</section>
<section id="new-unique-functions">
<h3>New <code><span>unique_*</span></code> functions<a href="#new-unique-functions" title="Link to this heading">#</a></h3>
<p>The <a href="https://numpy.org/devdocs/reference/generated/numpy.unique_all.html#numpy.unique_all" title="numpy.unique_all"><code><span>unique_all</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.unique_counts.html#numpy.unique_counts" title="numpy.unique_counts"><code><span>unique_counts</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.unique_inverse.html#numpy.unique_inverse" title="numpy.unique_inverse"><code><span>unique_inverse</span></code></a>,
and <a href="https://numpy.org/devdocs/reference/generated/numpy.unique_values.html#numpy.unique_values" title="numpy.unique_values"><code><span>unique_values</span></code></a> functions have been added. They provide
functionality of <a href="https://numpy.org/devdocs/reference/generated/numpy.unique.html#numpy.unique" title="numpy.unique"><code><span>unique</span></code></a> with different sets of flags. They are array API
standard-compatible, and because the number of arrays they return does not
depend on the values of input arguments, they are easier to target for JIT
compilation.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25088">gh-25088</a>)</p>
</section>
<section id="matrix-transpose-support-for-ndarrays">
<h3>Matrix transpose support for ndarrays<a href="#matrix-transpose-support-for-ndarrays" title="Link to this heading">#</a></h3>
<p>NumPy now offers support for calculating the matrix transpose of an array (or
stack of arrays). The matrix transpose is equivalent to swapping the last two
axes of an array. Both <code><span>np.ndarray</span></code> and <code><span>np.ma.MaskedArray</span></code> now expose a
<code><span>.mT</span></code> attribute, and there is a matching new <a href="https://numpy.org/devdocs/reference/generated/numpy.matrix_transpose.html#numpy.matrix_transpose" title="numpy.matrix_transpose"><code><span>numpy.matrix_transpose</span></code></a>
function.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23762">gh-23762</a>)</p>
</section>
<section id="array-api-compatible-functions-for-numpy-linalg">
<h3>Array API compatible functions for <code><span>numpy.linalg</span></code><a href="#array-api-compatible-functions-for-numpy-linalg" title="Link to this heading">#</a></h3>
<p>Six new functions and two aliases were added to improve compatibility with
the Array API standard for <a href="https://numpy.org/devdocs/reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code><span>numpy.linalg</span></code></a>:</p>
<ul>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.matrix_norm.html#numpy.linalg.matrix_norm" title="numpy.linalg.matrix_norm"><code><span>numpy.linalg.matrix_norm</span></code></a> - Computes the matrix norm of a matrix (or a stack of matrices).</p></li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.vector_norm.html#numpy.linalg.vector_norm" title="numpy.linalg.vector_norm"><code><span>numpy.linalg.vector_norm</span></code></a> - Computes the vector norm of a vector (or batch of vectors).</p></li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.vecdot.html#numpy.vecdot" title="numpy.vecdot"><code><span>numpy.vecdot</span></code></a> - Computes the (vector) dot product of two arrays.</p></li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.vecdot.html#numpy.linalg.vecdot" title="numpy.linalg.vecdot"><code><span>numpy.linalg.vecdot</span></code></a> - An alias for <a href="https://numpy.org/devdocs/reference/generated/numpy.vecdot.html#numpy.vecdot" title="numpy.vecdot"><code><span>numpy.vecdot</span></code></a>.</p></li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.matrix_transpose.html#numpy.linalg.matrix_transpose" title="numpy.linalg.matrix_transpose"><code><span>numpy.linalg.matrix_transpose</span></code></a> - An alias for <a href="https://numpy.org/devdocs/reference/generated/numpy.matrix_transpose.html#numpy.matrix_transpose" title="numpy.matrix_transpose"><code><span>numpy.matrix_transpose</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25155">gh-25155</a>)</p>
</li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.outer.html#numpy.linalg.outer" title="numpy.linalg.outer"><code><span>numpy.linalg.outer</span></code></a> has been added. It computes the outer product of two
vectors. It differs from <a href="https://numpy.org/devdocs/reference/generated/numpy.outer.html#numpy.outer" title="numpy.outer"><code><span>numpy.outer</span></code></a> by accepting one-dimensional arrays
only. This function is compatible with the array API standard.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25101">gh-25101</a>)</p>
</li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.cross.html#numpy.linalg.cross" title="numpy.linalg.cross"><code><span>numpy.linalg.cross</span></code></a> has been added. It computes the cross product of two
(arrays of) 3-dimensional vectors. It differs from <a href="https://numpy.org/devdocs/reference/generated/numpy.cross.html#numpy.cross" title="numpy.cross"><code><span>numpy.cross</span></code></a> by accepting
three-dimensional vectors only. This function is compatible with the array
API standard.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25145">gh-25145</a>)</p>
</li>
</ul>
</section>
<section id="a-correction-argument-for-var-and-std">
<h3>A <code><span>correction</span></code> argument for <code><span>var</span></code> and <code><span>std</span></code><a href="#a-correction-argument-for-var-and-std" title="Link to this heading">#</a></h3>
<p>A <code><span>correction</span></code> argument was added to <a href="https://numpy.org/devdocs/reference/generated/numpy.var.html#numpy.var" title="numpy.var"><code><span>var</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.std.html#numpy.std" title="numpy.std"><code><span>std</span></code></a>, which is
an array API standard compatible alternative to <code><span>ddof</span></code>. As both arguments
serve a similar purpose, only one of them can be provided at the same time.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25169">gh-25169</a>)</p>
</section>
<section id="ndarray-device-and-ndarray-to-device">
<h3><code><span>ndarray.device</span></code> and <code><span>ndarray.to_device</span></code><a href="#ndarray-device-and-ndarray-to-device" title="Link to this heading">#</a></h3>
<p>An <code><span>ndarray.device</span></code> attribute and <code><span>ndarray.to_device</span></code> method were
added to <code><span>numpy.ndarray</span></code> for array API standard compatibility.</p>
<p>Additionally, <code><span>device</span></code> keyword-only arguments were added to:
<a href="https://numpy.org/devdocs/reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code><span>asarray</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.arange.html#numpy.arange" title="numpy.arange"><code><span>arange</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.empty.html#numpy.empty" title="numpy.empty"><code><span>empty</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.empty_like.html#numpy.empty_like" title="numpy.empty_like"><code><span>empty_like</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.eye.html#numpy.eye" title="numpy.eye"><code><span>eye</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.full.html#numpy.full" title="numpy.full"><code><span>full</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.full_like.html#numpy.full_like" title="numpy.full_like"><code><span>full_like</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.linspace.html#numpy.linspace" title="numpy.linspace"><code><span>linspace</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.ones.html#numpy.ones" title="numpy.ones"><code><span>ones</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.ones_like.html#numpy.ones_like" title="numpy.ones_like"><code><span>ones_like</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.zeros.html#numpy.zeros" title="numpy.zeros"><code><span>zeros</span></code></a>, and <a href="https://numpy.org/devdocs/reference/generated/numpy.zeros_like.html#numpy.zeros_like" title="numpy.zeros_like"><code><span>zeros_like</span></code></a>.</p>
<p>For all these new arguments, only <code><span>device=&#34;cpu&#34;</span></code> is supported.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25233">gh-25233</a>)</p>
</section>
<section id="stringdtype-has-been-added-to-numpy">
<h3>StringDType has been added to NumPy<a href="#stringdtype-has-been-added-to-numpy" title="Link to this heading">#</a></h3>
<p>We have added a new variable-width UTF-8 encoded string data type, implementing
a “NumPy array of Python strings”, including support for a user-provided missing
data sentinel. It is intended as a drop-in replacement for arrays of Python
strings and missing data sentinels using the object dtype. See <a href="https://numpy.org/neps/nep-0055-string_dtype.html">NEP 55</a> and <a href="https://numpy.org/devdocs/user/basics.strings.html#stringdtype"><span>the
documentation</span></a> for more details.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25347">gh-25347</a>)</p>
</section>
<section id="new-keywords-for-cholesky-and-pinv">
<h3>New keywords for <code><span>cholesky</span></code> and <code><span>pinv</span></code><a href="#new-keywords-for-cholesky-and-pinv" title="Link to this heading">#</a></h3>
<p>The <code><span>upper</span></code> and <code><span>rtol</span></code> keywords were added to <a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.cholesky.html#numpy.linalg.cholesky" title="numpy.linalg.cholesky"><code><span>numpy.linalg.cholesky</span></code></a> and
<a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.pinv.html#numpy.linalg.pinv" title="numpy.linalg.pinv"><code><span>numpy.linalg.pinv</span></code></a>, respectively, to improve array API standard compatibility.</p>
<p>For <a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.pinv.html#numpy.linalg.pinv" title="numpy.linalg.pinv"><code><span>pinv</span></code></a>, if neither <code><span>rcond</span></code> nor <code><span>rtol</span></code> is specified,
the <code><span>rcond</span></code>’s default is used. We plan to deprecate and remove <code><span>rcond</span></code> in
the future.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25388">gh-25388</a>)</p>
</section>
<section id="new-keywords-for-sort-argsort-and-linalg-matrix-rank">
<h3>New keywords for <code><span>sort</span></code>, <code><span>argsort</span></code> and <code><span>linalg.matrix_rank</span></code><a href="#new-keywords-for-sort-argsort-and-linalg-matrix-rank" title="Link to this heading">#</a></h3>
<p>New keyword parameters were added to improve array API standard compatibility:</p>
<ul>
<li><p><code><span>rtol</span></code> was added to <a href="https://numpy.org/devdocs/reference/generated/numpy.linalg.matrix_rank.html#numpy.linalg.matrix_rank" title="numpy.linalg.matrix_rank"><code><span>matrix_rank</span></code></a>.</p></li>
<li><p><code><span>stable</span></code> was added to <a href="https://numpy.org/devdocs/reference/generated/numpy.sort.html#numpy.sort" title="numpy.sort"><code><span>sort</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.argsort.html#numpy.argsort" title="numpy.argsort"><code><span>argsort</span></code></a>.</p></li>
</ul>
<p>(<a href="https://github.com/numpy/numpy/pull/25437">gh-25437</a>)</p>
</section>
<section id="new-numpy-strings-namespace-for-string-ufuncs">
<h3>New <code><span>numpy.strings</span></code> namespace for string ufuncs<a href="#new-numpy-strings-namespace-for-string-ufuncs" title="Link to this heading">#</a></h3>
<p>NumPy now implements some string operations as ufuncs. The old <code><span>np.char</span></code>
namespace is still available, and where possible the string manipulation
functions in that namespace have been updated to use the new ufuncs,
substantially improving their performance.</p>
<p>Where possible, we suggest updating code to use functions in <code><span>np.strings</span></code>
instead of <code><span>np.char</span></code>. In the future we may deprecate <code><span>np.char</span></code> in favor of
<code><span>np.strings</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25463">gh-25463</a>)</p>
</section>
<section id="numpy-fft-support-for-different-precisions-and-in-place-calculations">
<h3><a href="https://numpy.org/devdocs/reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code><span>numpy.fft</span></code></a> support for different precisions and in-place calculations<a href="#numpy-fft-support-for-different-precisions-and-in-place-calculations" title="Link to this heading">#</a></h3>
<p>The various FFT routines in <a href="https://numpy.org/devdocs/reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code><span>numpy.fft</span></code></a> now do their calculations natively in
float, double, or long double precision, depending on the input precision,
instead of always calculating in double precision. Hence, the calculation will
now be less precise for single and more precise for long double precision.
The data type of the output array will now be adjusted accordingly.</p>
<p>Furthermore, all FFT routines have gained an <code><span>out</span></code> argument that can be used
for in-place calculations.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25536">gh-25536</a>)</p>
</section>
<section id="configtool-and-pkg-config-support">
<h3>configtool and pkg-config support<a href="#configtool-and-pkg-config-support" title="Link to this heading">#</a></h3>
<p>A new <code><span>numpy-config</span></code> CLI script is available that can be queried for the
NumPy version and for compile flags needed to use the NumPy C API. This will
allow build systems to better support the use of NumPy as a dependency.
Also, a <code><span>numpy.pc</span></code> pkg-config file is now included with Numpy. In order to
find its location for use with <code><span>PKG_CONFIG_PATH</span></code>, use
<code><span>numpy-config</span> <span>--pkgconfigdir</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25730">gh-25730</a>)</p>
</section>
<section id="array-api-standard-support-in-the-main-namespace">
<h3>Array API standard support in the main namespace<a href="#array-api-standard-support-in-the-main-namespace" title="Link to this heading">#</a></h3>
<p>The main <code><span>numpy</span></code> namespace now supports the array API standard. See
<a href="https://numpy.org/devdocs/reference/array_api.html#array-api-standard-compatibility"><span>Array API standard compatibility</span></a> for details.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25911">gh-25911</a>)</p>
</section>
</section>
<section id="improvements">
<h2>Improvements<a href="#improvements" title="Link to this heading">#</a></h2>
<ul>
<li><p>Strings are now supported by <code><span>any</span></code>, <code><span>all</span></code>, and the logical ufuncs.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25651">gh-25651</a>)</p>
</li>
</ul>
<section id="integer-sequences-as-the-shape-argument-for-memmap">
<h3>Integer sequences as the shape argument for <code><span>memmap</span></code><a href="#integer-sequences-as-the-shape-argument-for-memmap" title="Link to this heading">#</a></h3>
<p><a href="https://numpy.org/devdocs/reference/generated/numpy.memmap.html#numpy.memmap" title="numpy.memmap"><code><span>numpy.memmap</span></code></a> can now be created with any integer sequence as the <code><span>shape</span></code>
argument, such as a list or numpy array of integers. Previously, only the
types of tuple and int could be used without raising an error.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23729">gh-23729</a>)</p>
</section>
<section id="errstate-is-now-faster-and-context-safe">
<h3><code><span>errstate</span></code> is now faster and context safe<a href="#errstate-is-now-faster-and-context-safe" title="Link to this heading">#</a></h3>
<p>The <a href="https://numpy.org/devdocs/reference/generated/numpy.errstate.html#numpy.errstate" title="numpy.errstate"><code><span>numpy.errstate</span></code></a> context manager/decorator is now faster and
safer.  Previously, it was not context safe and had (rare)
issues with thread-safety.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23936">gh-23936</a>)</p>
</section>
<section id="aarch64-quicksort-speed-improved-by-using-highway-s-vqsort">
<h3>AArch64 quicksort speed improved by using Highway’s VQSort<a href="#aarch64-quicksort-speed-improved-by-using-highway-s-vqsort" title="Link to this heading">#</a></h3>
<p>The first introduction of the Google Highway library, using VQSort on AArch64.
Execution time is improved by up to 16x in some cases, see the PR for benchmark
results. Extensions to other platforms will be done in the future.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24018">gh-24018</a>)</p>
</section>
<section id="complex-types-underlying-c-type-changes">
<h3>Complex types - underlying C type changes<a href="#complex-types-underlying-c-type-changes" title="Link to this heading">#</a></h3>
<ul>
<li><p>The underlying C types for all of NumPy’s complex types have been changed to
use C99 complex types.</p></li>
<li><p>While this change does not affect the memory layout of complex types, it
changes the API to be used to directly retrieve or write the real or
complex part of the complex number, since direct field access (as in <code><span>c.real</span></code>
or <code><span>c.imag</span></code>) is no longer an option. You can now use utilities provided in
<code><span>numpy/npy_math.h</span></code> to do these operations, like this:</p>
<div><div><pre><span></span><span>npy_cdouble</span><span> </span><span>c</span><span>;</span>
<span>npy_csetreal</span><span>(</span><span>&amp;</span><span>c</span><span>,</span><span> </span><span>1.0</span><span>);</span>
<span>npy_csetimag</span><span>(</span><span>&amp;</span><span>c</span><span>,</span><span> </span><span>0.0</span><span>);</span>
<span>printf</span><span>(</span><span>&#34;%d + %di</span><span>\n</span><span>&#34;</span><span>,</span><span> </span><span>npy_creal</span><span>(</span><span>c</span><span>),</span><span> </span><span>npy_cimag</span><span>(</span><span>c</span><span>));</span>
</pre></div>
</div>
</li>
<li><p>To ease cross-version compatibility, equivalent macros and a compatibility
layer have been added which can be used by downstream packages to continue
to support both NumPy 1.x and 2.x. See <a href="https://numpy.org/devdocs/reference/c-api/coremath.html#complex-numbers"><span>Support for complex numbers</span></a> for more info.</p></li>
<li><p><code><span>numpy/npy_common.h</span></code> now includes <code><span>complex.h</span></code>, which means that <code><span>complex</span></code>
is now a reserved keyword.</p></li>
</ul>
<p>(<a href="https://github.com/numpy/numpy/pull/24085">gh-24085</a>)</p>
</section>
<section id="iso-c-binding-support-and-improved-common-blocks-for-f2py">
<h3><code><span>iso_c_binding</span></code> support and improved common blocks for <code><span>f2py</span></code><a href="#iso-c-binding-support-and-improved-common-blocks-for-f2py" title="Link to this heading">#</a></h3>
<p>Previously, users would have to define their own custom <code><span>f2cmap</span></code> file to use
type mappings defined by the Fortran2003 <code><span>iso_c_binding</span></code> intrinsic module.
These type maps are now natively supported by <code><span>f2py</span></code></p>
<p>(<a href="https://github.com/numpy/numpy/pull/24555">gh-24555</a>)</p>
<p><code><span>f2py</span></code> now handles <code><span>common</span></code> blocks which have <code><span>kind</span></code> specifications from
modules. This further expands the usability of intrinsics like
<code><span>iso_fortran_env</span></code> and <code><span>iso_c_binding</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25186">gh-25186</a>)</p>
</section>
<section id="call-str-automatically-on-third-argument-to-functions-like-assert-equal">
<h3>Call <code><span>str</span></code> automatically on third argument to functions like <code><span>assert_equal</span></code><a href="#call-str-automatically-on-third-argument-to-functions-like-assert-equal" title="Link to this heading">#</a></h3>
<p>The third argument to functions like <a href="https://numpy.org/devdocs/reference/generated/numpy.testing.assert_equal.html#numpy.testing.assert_equal" title="numpy.testing.assert_equal"><code><span>assert_equal</span></code></a> now has
<code><span>str</span></code> called on it automatically. This way it mimics the built-in <code><span>assert</span></code>
statement, where <code><span>assert_equal(a,</span> <span>b,</span> <span>obj)</span></code> works like <code><span>assert</span> <span>a</span> <span>==</span> <span>b,</span> <span>obj</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24877">gh-24877</a>)</p>
</section>
<section id="support-for-array-like-atol-rtol-in-isclose-allclose">
<h3>Support for array-like <code><span>atol</span></code>/<code><span>rtol</span></code> in <code><span>isclose</span></code>, <code><span>allclose</span></code><a href="#support-for-array-like-atol-rtol-in-isclose-allclose" title="Link to this heading">#</a></h3>
<p>The keywords <code><span>atol</span></code> and <code><span>rtol</span></code> in <a href="https://numpy.org/devdocs/reference/generated/numpy.isclose.html#numpy.isclose" title="numpy.isclose"><code><span>isclose</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.allclose.html#numpy.allclose" title="numpy.allclose"><code><span>allclose</span></code></a>
now accept both scalars and arrays. An array, if given, must broadcast
to the shapes of the first two array arguments.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24878">gh-24878</a>)</p>
</section>
<section id="consistent-failure-messages-in-test-functions">
<h3>Consistent failure messages in test functions<a href="#consistent-failure-messages-in-test-functions" title="Link to this heading">#</a></h3>
<p>Previously, some <a href="https://numpy.org/devdocs/reference/routines.testing.html#module-numpy.testing" title="numpy.testing"><code><span>numpy.testing</span></code></a> assertions printed messages that
referred to the actual and desired results as <code><span>x</span></code> and <code><span>y</span></code>.
Now, these values are consistently referred to as <code><span>ACTUAL</span></code> and
<code><span>DESIRED</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24931">gh-24931</a>)</p>
</section>
<section id="n-d-fft-transforms-allow-s-i-1">
<h3>n-D FFT transforms allow <code><span>s[i]</span> <span>==</span> <span>-1</span></code><a href="#n-d-fft-transforms-allow-s-i-1" title="Link to this heading">#</a></h3>
<p>The <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.fftn.html#numpy.fft.fftn" title="numpy.fft.fftn"><code><span>fftn</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.ifftn.html#numpy.fft.ifftn" title="numpy.fft.ifftn"><code><span>ifftn</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.rfftn.html#numpy.fft.rfftn" title="numpy.fft.rfftn"><code><span>rfftn</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.fft.irfftn.html#numpy.fft.irfftn" title="numpy.fft.irfftn"><code><span>irfftn</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.fft2.html#numpy.fft.fft2" title="numpy.fft.fft2"><code><span>fft2</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.ifft2.html#numpy.fft.ifft2" title="numpy.fft.ifft2"><code><span>ifft2</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.rfft2.html#numpy.fft.rfft2" title="numpy.fft.rfft2"><code><span>rfft2</span></code></a>
and <a href="https://numpy.org/devdocs/reference/generated/numpy.fft.irfft2.html#numpy.fft.irfft2" title="numpy.fft.irfft2"><code><span>irfft2</span></code></a> functions now use the whole input array along the axis
<code><span>i</span></code> if <code><span>s[i]</span> <span>==</span> <span>-1</span></code>, in line with the array API standard.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25495">gh-25495</a>)</p>
</section>
<section id="guard-pyarrayscalar-val-and-pyunicodescalarobject-for-the-limited-api">
<h3>Guard PyArrayScalar_VAL and PyUnicodeScalarObject for the limited API<a href="#guard-pyarrayscalar-val-and-pyunicodescalarobject-for-the-limited-api" title="Link to this heading">#</a></h3>
<p><code><span>PyUnicodeScalarObject</span></code> holds a <code><span>PyUnicodeObject</span></code>, which is not available
when using <code><span>Py_LIMITED_API</span></code>. Add guards to hide it and consequently also make
the <code><span>PyArrayScalar_VAL</span></code> macro hidden.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25531">gh-25531</a>)</p>
</section>
</section>
<section id="changes">
<h2>Changes<a href="#changes" title="Link to this heading">#</a></h2>
<ul>
<li><p><code><span>np.gradient()</span></code> now returns a tuple rather than a list making the
return value immutable.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23861">gh-23861</a>)</p>
</li>
<li><p>Being fully context and thread-safe, <code><span>np.errstate</span></code> can only
be entered once now.</p></li>
<li><p><code><span>np.setbufsize</span></code> is now tied to <code><span>np.errstate()</span></code>: leaving an
<code><span>np.errstate</span></code> context will also reset the <code><span>bufsize</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23936">gh-23936</a>)</p>
</li>
<li><p>A new public <code><span>np.lib.array_utils</span></code> submodule has been introduced and it
currently contains three functions: <code><span>byte_bounds</span></code> (moved from
<code><span>np.lib.utils</span></code>), <code><span>normalize_axis_tuple</span></code> and <code><span>normalize_axis_index</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24540">gh-24540</a>)</p>
</li>
<li><p>Introduce <a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.bool" title="numpy.bool"><code><span>numpy.bool</span></code></a> as the new canonical name for NumPy’s boolean dtype,
and make <a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.bool_" title="numpy.bool_"><code><span>numpy.bool_</span></code></a> an alias to it. Note that until NumPy 1.24,
<code><span>np.bool</span></code> was an alias to Python’s builtin <code><span>bool</span></code>. The new name helps
with array API standard compatibility and is a more intuitive name.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25080">gh-25080</a>)</p>
</li>
<li><p>The <code><span>dtype.flags</span></code> value was previously stored as a signed integer.
This means that the aligned dtype struct flag lead to negative flags being
set (-128 rather than 128). This flag is now stored unsigned (positive). Code
which checks flags manually may need to adapt.  This may include code
compiled with Cython 0.29.x.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25816">gh-25816</a>)</p>
</li>
</ul>
<section id="representation-of-numpy-scalars-changed">
<h3>Representation of NumPy scalars changed<a href="#representation-of-numpy-scalars-changed" title="Link to this heading">#</a></h3>
<p>As per <a href="https://numpy.org/neps/nep-0051-scalar-representation.html#nep51" title="(in NumPy Enhancement Proposals)"><span>NEP 51</span></a>, the scalar representation has been
updated to include the type information to avoid confusion with
Python scalars.</p>
<p>Scalars are now printed as <code><span>np.float64(3.0)</span></code> rather than just <code><span>3.0</span></code>.
This may disrupt workflows that store representations of numbers
(e.g., to files) making it harder to read them. They should be stored as
explicit strings, for example by using <code><span>str()</span></code> or <code><span>f&#34;{scalar!s}&#34;</span></code>.
For the time being, affected users can use <code><span>np.set_printoptions(legacy=&#34;1.25&#34;)</span></code>
to get the old behavior (with possibly a few exceptions).
Documentation of downstream projects may require larger updates,
if code snippets are tested.  We are working on tooling for
<a href="https://github.com/scientific-python/pytest-doctestplus/issues/107">doctest-plus</a>
to facilitate updates.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/22449">gh-22449</a>)</p>
</section>
<section id="truthiness-of-numpy-strings-changed">
<h3>Truthiness of NumPy strings changed<a href="#truthiness-of-numpy-strings-changed" title="Link to this heading">#</a></h3>
<p>NumPy strings previously were inconsistent about how they defined
if the string is <code><span>True</span></code> or <code><span>False</span></code> and the definition did not
match the one used by Python.
Strings are now considered <code><span>True</span></code> when they are non-empty and
<code><span>False</span></code> when they are empty.
This changes the following distinct cases:</p>
<ul>
<li><p>Casts from string to boolean were previously roughly equivalent
to <code><span>string_array.astype(np.int64).astype(bool)</span></code>, meaning that only
valid integers could be cast.
Now a string of <code><span>&#34;0&#34;</span></code> will be considered <code><span>True</span></code> since it is not empty.
If you need the old behavior, you may use the above step (casting
to integer first) or <code><span>string_array</span> <span>==</span> <span>&#34;0&#34;</span></code> (if the input is only ever <code><span>0</span></code> or <code><span>1</span></code>).
To get the new result on old NumPy versions use <code><span>string_array</span> <span>!=</span> <span>&#34;&#34;</span></code>.</p></li>
<li><p><code><span>np.nonzero(string_array)</span></code> previously ignored whitespace so that
a string only containing whitespace was considered <code><span>False</span></code>.
Whitespace is now considered <code><span>True</span></code>.</p></li>
</ul>
<p>This change does not affect <code><span>np.loadtxt</span></code>, <code><span>np.fromstring</span></code>, or <code><span>np.genfromtxt</span></code>.
The first two still use the integer definition, while <code><span>genfromtxt</span></code> continues to
match for <code><span>&#34;true&#34;</span></code> (ignoring case).
However, if <code><span>np.bool_</span></code> is used as a converter the result will change.</p>
<p>The change does affect <code><span>np.fromregex</span></code> as it uses direct assignments.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/23871">gh-23871</a>)</p>
</section>
<section id="a-mean-keyword-was-added-to-var-and-std-function">
<h3>A <code><span>mean</span></code> keyword was added to var and std function<a href="#a-mean-keyword-was-added-to-var-and-std-function" title="Link to this heading">#</a></h3>
<p>Often when the standard deviation is needed the mean is also needed. The same
holds for the variance and the mean. Until now the mean is then calculated twice,
the change introduced here for the <a href="https://numpy.org/devdocs/reference/generated/numpy.var.html#numpy.var" title="numpy.var"><code><span>var</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.std.html#numpy.std" title="numpy.std"><code><span>std</span></code></a> functions
allows for passing in a precalculated mean as an keyword argument. See the
docstrings for details and an example illustrating the speed-up.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24126">gh-24126</a>)</p>
</section>
<section id="remove-datetime64-deprecation-warning-when-constructing-with-timezone">
<h3>Remove datetime64 deprecation warning when constructing with timezone<a href="#remove-datetime64-deprecation-warning-when-constructing-with-timezone" title="Link to this heading">#</a></h3>
<p>The <a href="https://numpy.org/devdocs/reference/arrays.scalars.html#numpy.datetime64" title="numpy.datetime64"><code><span>numpy.datetime64</span></code></a> method now issues a UserWarning rather than a
DeprecationWarning whenever a timezone is included in the datetime
string that is provided.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24193">gh-24193</a>)</p>
</section>
<section id="default-integer-dtype-is-now-64-bit-on-64-bit-windows">
<h3>Default integer dtype is now 64-bit on 64-bit Windows<a href="#default-integer-dtype-is-now-64-bit-on-64-bit-windows" title="Link to this heading">#</a></h3>
<p>The default NumPy integer is now 64-bit on all 64-bit systems as the historic
32-bit default on Windows was a common source of issues. Most users should not
notice this. The main issues may occur with code interfacing with libraries
written in a compiled language like C.  For more information see
<a href="https://numpy.org/devdocs/numpy_2_0_migration_guide.html#migration-windows-int64"><span>Windows default integer</span></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24224">gh-24224</a>)</p>
</section>
<section id="renamed-numpy-core-to-numpy-core">
<h3>Renamed <code><span>numpy.core</span></code> to <code><span>numpy._core</span></code><a href="#renamed-numpy-core-to-numpy-core" title="Link to this heading">#</a></h3>
<p>Accessing <code><span>numpy.core</span></code> now emits a DeprecationWarning. In practice
we have found that most downstream usage of <code><span>numpy.core</span></code> was to access
functionality that is available in the main <code><span>numpy</span></code> namespace.
If for some reason you are using functionality in <code><span>numpy.core</span></code> that
is not available in the main <code><span>numpy</span></code> namespace, this means you are likely
using private NumPy internals. You can still access these internals via
<code><span>numpy._core</span></code> without a deprecation warning but we do not provide any
backward compatibility guarantees for NumPy internals. Please open an issue
if you think a mistake was made and something needs to be made public.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24634">gh-24634</a>)</p>
<p>The “relaxed strides” debug build option, which was previously enabled through
the <code><span>NPY_RELAXED_STRIDES_DEBUG</span></code> environment variable or the
<code><span>-Drelaxed-strides-debug</span></code> config-settings flag has been removed.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24717">gh-24717</a>)</p>
</section>
<section id="redefinition-of-np-intp-np-uintp-almost-never-a-change">
<h3>Redefinition of <code><span>np.intp</span></code>/<code><span>np.uintp</span></code> (almost never a change)<a href="#redefinition-of-np-intp-np-uintp-almost-never-a-change" title="Link to this heading">#</a></h3>
<p>Due to the actual use of these types almost always matching the use of
<code><span>size_t</span></code>/<code><span>Py_ssize_t</span></code> this is now the definition in C.
Previously, it matched <code><span>intptr_t</span></code> and <code><span>uintptr_t</span></code> which would often
have been subtly incorrect.
This has no effect on the vast majority of machines since the size
of these types only differ on extremely niche platforms.</p>
<p>However, it means that:</p>
<ul>
<li><p>Pointers may not necessarily fit into an <code><span>intp</span></code> typed array anymore.
The <code><span>p</span></code> and <code><span>P</span></code> character codes can still be used, however.</p></li>
<li><p>Creating <code><span>intptr_t</span></code> or <code><span>uintptr_t</span></code> typed arrays in C remains possible
in a cross-platform way via <code><span>PyArray_DescrFromType(&#39;p&#39;)</span></code>.</p></li>
<li><p>The new character codes <code><span>nN</span></code> were introduced.</p></li>
<li><p>It is now correct to use the Python C-API functions when parsing
to <code><span>npy_intp</span></code> typed arguments.</p></li>
</ul>
<p>(<a href="https://github.com/numpy/numpy/pull/24888">gh-24888</a>)</p>
</section>
<section id="numpy-fft-helper-made-private">
<h3><code><span>numpy.fft.helper</span></code> made private<a href="#numpy-fft-helper-made-private" title="Link to this heading">#</a></h3>
<p><code><span>numpy.fft.helper</span></code> was renamed to <code><span>numpy.fft._helper</span></code> to indicate
that it is a private submodule. All public functions exported by it
should be accessed from <a href="https://numpy.org/devdocs/reference/routines.fft.html#module-numpy.fft" title="numpy.fft"><code><span>numpy.fft</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24945">gh-24945</a>)</p>
</section>
<section id="numpy-linalg-linalg-made-private">
<h3><code><span>numpy.linalg.linalg</span></code> made private<a href="#numpy-linalg-linalg-made-private" title="Link to this heading">#</a></h3>
<p><code><span>numpy.linalg.linalg</span></code> was renamed to <code><span>numpy.linalg._linalg</span></code>
to indicate that it is a private submodule. All public functions
exported by it should be accessed from <a href="https://numpy.org/devdocs/reference/routines.linalg.html#module-numpy.linalg" title="numpy.linalg"><code><span>numpy.linalg</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/24946">gh-24946</a>)</p>
</section>
<section id="out-of-bound-axis-not-the-same-as-axis-none">
<h3>Out-of-bound axis not the same as <code><span>axis=None</span></code><a href="#out-of-bound-axis-not-the-same-as-axis-none" title="Link to this heading">#</a></h3>
<p>In some cases <code><span>axis=32</span></code> or for concatenate any large value
was the same as <code><span>axis=None</span></code>.
Except for <code><span>concatenate</span></code> this was deprecate.
Any out of bound axis value will now error, make sure to use
<code><span>axis=None</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25149">gh-25149</a>)</p>
</section>
<section id="new-copy-keyword-meaning-for-array-and-asarray-constructors">
<span id="copy-keyword-changes-2-0"></span><h3>New <code><span>copy</span></code> keyword meaning for <code><span>array</span></code> and <code><span>asarray</span></code> constructors<a href="#new-copy-keyword-meaning-for-array-and-asarray-constructors" title="Link to this heading">#</a></h3>
<p>Now <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array"><code><span>numpy.array</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code><span>numpy.asarray</span></code></a> support three values for <code><span>copy</span></code> parameter:</p>
<ul>
<li><p><code><span>None</span></code> - A copy will only be made if it is necessary.</p></li>
<li><p><code><span>True</span></code> - Always make a copy.</p></li>
<li><p><code><span>False</span></code> - Never make a copy. If a copy is required a <code><span>ValueError</span></code> is raised.</p></li>
</ul>
<p>The meaning of <code><span>False</span></code> changed as it now raises an exception if a copy is needed.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25168">gh-25168</a>)</p>
</section>
<section id="the-array-special-method-now-takes-a-copy-keyword-argument">
<h3>The <code><span>__array__</span></code> special method now takes a <code><span>copy</span></code> keyword argument.<a href="#the-array-special-method-now-takes-a-copy-keyword-argument" title="Link to this heading">#</a></h3>
<p>NumPy will pass <code><span>copy</span></code> to the <code><span>__array__</span></code> special method in situations where
it would be set to a non-default value (e.g. in a call to
<code><span>np.asarray(some_object,</span> <span>copy=False)</span></code>). Currently, if an
unexpected keyword argument error is raised after this, NumPy will print a
warning and re-try without the <code><span>copy</span></code> keyword argument. Implementations of
objects implementing the <code><span>__array__</span></code> protocol should accept a <code><span>copy</span></code> keyword
argument with the same meaning as when passed to <a href="https://numpy.org/devdocs/reference/generated/numpy.array.html#numpy.array" title="numpy.array"><code><span>numpy.array</span></code></a> or
<a href="https://numpy.org/devdocs/reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code><span>numpy.asarray</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25168">gh-25168</a>)</p>
</section>
<section id="cleanup-of-initialization-of-numpy-dtype-with-strings-with-commas">
<h3>Cleanup of initialization of <code><span>numpy.dtype</span></code> with strings with commas<a href="#cleanup-of-initialization-of-numpy-dtype-with-strings-with-commas" title="Link to this heading">#</a></h3>
<p>The interpretation of strings with commas is changed slightly, in that a
trailing comma will now always create a structured dtype.  E.g., where
previously <code><span>np.dtype(&#34;i&#34;)</span></code> and <code><span>np.dtype(&#34;i,&#34;)</span></code> were treated as identical,
now <code><span>np.dtype(&#34;i,&#34;)</span></code> will create a structured dtype, with a single
field. This is analogous to <code><span>np.dtype(&#34;i,i&#34;)</span></code> creating a structured dtype
with two fields, and makes the behaviour consistent with that expected of
tuples.</p>
<p>At the same time, the use of single number surrounded by parenthesis to
indicate a sub-array shape, like in <code><span>np.dtype(&#34;(2)i,&#34;)</span></code>, is deprecated.
Instead; one should use <code><span>np.dtype(&#34;(2,)i&#34;)</span></code> or <code><span>np.dtype(&#34;2i&#34;)</span></code>.
Eventually, using a number in parentheses will raise an exception, like is the
case for initializations without a comma, like <code><span>np.dtype(&#34;(2)i&#34;)</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25434">gh-25434</a>)</p>
</section>
<section id="change-in-how-complex-sign-is-calculated">
<h3>Change in how complex sign is calculated<a href="#change-in-how-complex-sign-is-calculated" title="Link to this heading">#</a></h3>
<p>Following the array API standard, the complex sign is now calculated as
<code><span>z</span> <span>/</span> <span>|z|</span></code> (instead of the rather less logical case where the sign of
the real part was taken, unless the real part was zero, in which case
the sign of the imaginary part was returned).  Like for real numbers,
zero is returned if <code><span>z==0</span></code>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25441">gh-25441</a>)</p>
</section>
<section id="return-types-of-functions-that-returned-a-list-of-arrays">
<h3>Return types of functions that returned a list of arrays<a href="#return-types-of-functions-that-returned-a-list-of-arrays" title="Link to this heading">#</a></h3>
<p>Functions that returned a list of ndarrays have been changed to return a tuple
of ndarrays instead. Returning tuples consistently whenever a sequence of
arrays is returned makes it easier for JIT compilers like Numba, as well as for
static type checkers in some cases, to support these functions. Changed
functions are: <a href="https://numpy.org/devdocs/reference/generated/numpy.atleast_1d.html#numpy.atleast_1d" title="numpy.atleast_1d"><code><span>atleast_1d</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.atleast_2d.html#numpy.atleast_2d" title="numpy.atleast_2d"><code><span>atleast_2d</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.atleast_3d.html#numpy.atleast_3d" title="numpy.atleast_3d"><code><span>atleast_3d</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.broadcast_arrays.html#numpy.broadcast_arrays" title="numpy.broadcast_arrays"><code><span>broadcast_arrays</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.meshgrid.html#numpy.meshgrid" title="numpy.meshgrid"><code><span>meshgrid</span></code></a>, <a href="https://numpy.org/devdocs/reference/generated/numpy.ogrid.html#numpy.ogrid" title="numpy.ogrid"><code><span>ogrid</span></code></a>,
<a href="https://numpy.org/devdocs/reference/generated/numpy.histogramdd.html#numpy.histogramdd" title="numpy.histogramdd"><code><span>histogramdd</span></code></a>.</p>
</section>
<section id="np-unique-return-inverse-shape-for-multi-dimensional-inputs">
<h3><code><span>np.unique</span></code> <code><span>return_inverse</span></code> shape for multi-dimensional inputs<a href="#np-unique-return-inverse-shape-for-multi-dimensional-inputs" title="Link to this heading">#</a></h3>
<p>When multi-dimensional inputs are passed to <code><span>np.unique</span></code> with <code><span>return_inverse=True</span></code>,
the <code><span>unique_inverse</span></code> output is now shaped such that the input can be reconstructed
directly using <code><span>np.take(unique,</span> <span>unique_inverse)</span></code> when <code><span>axis=None</span></code>, and
<code><span>np.take_along_axis(unique,</span> <span>unique_inverse,</span> <span>axis=axis)</span></code> otherwise.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25553">gh-25553</a>,
<a href="https://github.com/numpy/numpy/pull/25570">gh-25570</a>)</p>
</section>
<section id="any-and-all-return-booleans-for-object-arrays">
<h3><code><span>any</span></code> and <code><span>all</span></code> return booleans for object arrays<a href="#any-and-all-return-booleans-for-object-arrays" title="Link to this heading">#</a></h3>
<p>The <code><span>any</span></code> and <code><span>all</span></code> functions and methods now return
booleans also for object arrays.  Previously, they did
a reduction which behaved like the Python <code><span>or</span></code> and
<code><span>and</span></code> operators which evaluates to one of the arguments.
You can use <code><span>np.logical_or.reduce</span></code> and <code><span>np.logical_and.reduce</span></code>
to achieve the previous behavior.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/25712">gh-25712</a>)</p>
</section>
<section id="np-can-cast-cannot-be-called-on-python-int-float-or-complex">
<h3><code><span>np.can_cast</span></code> cannot be called on Python int, float, or complex<a href="#np-can-cast-cannot-be-called-on-python-int-float-or-complex" title="Link to this heading">#</a></h3>
<p><code><span>np.can_cast</span></code> cannot be called with Python int, float, or complex instances
anymore.  This is because NEP 50 means that the result of <code><span>can_cast</span></code> must
not depend on the value passed in.
Unfortunately, for Python scalars whether a cast should be considered
<code><span>&#34;same_kind&#34;</span></code> or <code><span>&#34;safe&#34;</span></code> may depend on the context and value so that
this is currently not implemented.
In some cases, this means you may have to add a specific path for:
<code><span>if</span> <span>type(obj)</span> <span>in</span> <span>(int,</span> <span>float,</span> <span>complex):</span> <span>...</span></code>.</p>
<p><strong>Content from release note snippets in doc/release/upcoming_changes:</strong></p>
</section>
</section>
<section id="id1">
<h2>Deprecations<a href="#id1" title="Link to this heading">#</a></h2>
<blockquote>
<div><ul>
<li><p>The <em>fix_imports</em> keyword argument in <a href="https://numpy.org/devdocs/reference/generated/numpy.save.html#numpy.save" title="numpy.save"><code><span>numpy.save</span></code></a> is deprecated. Since
NumPy 1.17, <a href="https://numpy.org/devdocs/reference/generated/numpy.save.html#numpy.save" title="numpy.save"><code><span>numpy.save</span></code></a> uses a pickle protocol that no longer supports
Python 2, and ignored <em>fix_imports</em> keyword. This keyword is kept only
for backward compatibility. It is now deprecated.</p></li>
</ul>
</div></blockquote>
<p>(<a href="https://github.com/numpy/numpy/pull/26452">gh-26452</a>)</p>
</section>
<section id="id2">
<h2>Expired deprecations<a href="#id2" title="Link to this heading">#</a></h2>
<ul>
<li><p>Scalars and 0D arrays are disallowed for <a href="https://numpy.org/devdocs/reference/generated/numpy.nonzero.html#numpy.nonzero" title="numpy.nonzero"><code><span>numpy.nonzero</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.nonzero.html#numpy.ndarray.nonzero" title="numpy.ndarray.nonzero"><code><span>numpy.ndarray.nonzero</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26268">gh-26268</a>)</p>
</li>
</ul>
</section>
<section id="id3">
<h2>C API changes<a href="#id3" title="Link to this heading">#</a></h2>
<section id="api-symbols-now-hidden-but-customizable">
<h3>API symbols now hidden but customizable<a href="#api-symbols-now-hidden-but-customizable" title="Link to this heading">#</a></h3>
<p>NumPy now defaults to hide the API symbols it adds to allow all NumPy API
usage.
This means that by default you cannot dynamically fetch the NumPy API from
another library (this was never possible on windows).</p>
<p>If you are experiencing linking errors related to <code><span>PyArray_API</span></code> or
<code><span>PyArray_RUNTIME_VERSION</span></code>, you can define the
<a href="https://numpy.org/devdocs/reference/c-api/array.html#c.NPY_API_SYMBOL_ATTRIBUTE" title="NPY_API_SYMBOL_ATTRIBUTE"><code><span>NPY_API_SYMBOL_ATTRIBUTE</span></code></a> to opt-out of this change.</p>
<p>If you are experiencing problems due to an upstream header including NumPy,
the solution is to make sure you <code><span>#include</span> <span>&#34;numpy/ndarrayobject.h&#34;</span></code> before
their header and import NumPy yourself based on  <a href="https://numpy.org/devdocs/reference/c-api/array.html#including-the-c-api"><span>Including and importing the C API</span></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26103">gh-26103</a>)</p>
</section>
</section>
<section id="id4">
<h2>New Features<a href="#id4" title="Link to this heading">#</a></h2>
<ul>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.reshape.html#numpy.reshape" title="numpy.reshape"><code><span>numpy.reshape</span></code></a> and <a href="https://numpy.org/devdocs/reference/generated/numpy.ndarray.reshape.html#numpy.ndarray.reshape" title="numpy.ndarray.reshape"><code><span>numpy.ndarray.reshape</span></code></a> now support <code><span>shape</span></code> and <code><span>copy</span></code> arguments.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26292">gh-26292</a>)</p>
</li>
<li><p>NumPy now supports DLPack v1, support for older versions will
be deprecated in the future.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26501">gh-26501</a>)</p>
</li>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.asanyarray.html#numpy.asanyarray" title="numpy.asanyarray"><code><span>numpy.asanyarray</span></code></a> now supports <code><span>copy</span></code> and <code><span>device</span></code> arguments, matching <a href="https://numpy.org/devdocs/reference/generated/numpy.asarray.html#numpy.asarray" title="numpy.asarray"><code><span>numpy.asarray</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26580">gh-26580</a>)</p>
</li>
</ul>
</section>
<section id="id5">
<h2>Improvements<a href="#id5" title="Link to this heading">#</a></h2>
<section id="histogram-auto-binning-now-returns-bin-sizes-1-for-integer-input-data">
<h3><code><span>histogram</span></code> auto-binning now returns bin sizes &gt;=1 for integer input data<a href="#histogram-auto-binning-now-returns-bin-sizes-1-for-integer-input-data" title="Link to this heading">#</a></h3>
<p>For integer input data, bin sizes smaller than 1 result in spurious empty
bins.  This is now avoided when the number of bins is computed using one of the
algorithms provided by <a href="https://numpy.org/devdocs/reference/generated/numpy.histogram_bin_edges.html#numpy.histogram_bin_edges" title="numpy.histogram_bin_edges"><code><span>histogram_bin_edges</span></code></a>.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/12150">gh-12150</a>)</p>
</section>
</section>
<section id="performance-improvements-and-changes">
<h2>Performance improvements and changes<a href="#performance-improvements-and-changes" title="Link to this heading">#</a></h2>
<section id="ma-cov-and-ma-corrcoef-are-now-significantly-faster">
<h3><code><span>ma.cov</span></code> and <code><span>ma.corrcoef</span></code> are now significantly faster<a href="#ma-cov-and-ma-corrcoef-are-now-significantly-faster" title="Link to this heading">#</a></h3>
<p>The private function has been refactored along with <a href="https://numpy.org/devdocs/reference/generated/numpy.ma.cov.html#numpy.ma.cov" title="numpy.ma.cov"><code><span>ma.cov</span></code></a> and
<a href="https://numpy.org/devdocs/reference/generated/numpy.ma.corrcoef.html#numpy.ma.corrcoef" title="numpy.ma.corrcoef"><code><span>ma.corrcoef</span></code></a>. They are now significantly faster, particularly on large,
masked arrays.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26285">gh-26285</a>)</p>
<blockquote>
<div><ul>
<li><p><a href="https://numpy.org/devdocs/reference/generated/numpy.save.html#numpy.save" title="numpy.save"><code><span>numpy.save</span></code></a> now uses pickle protocol version 4 for saving arrays with
object dtype, which allows for pickle objects larger than 4GB and improves
saving speed by about 5% for large arrays.</p></li>
</ul>
</div></blockquote>
<p>(<a href="https://github.com/numpy/numpy/pull/26388">gh-26388</a>)</p>
</section>
</section>
<section id="id6">
<h2>Changes<a href="#id6" title="Link to this heading">#</a></h2>
<ul>
<li><p>As <a href="https://numpy.org/devdocs/reference/generated/numpy.vecdot.html#numpy.vecdot" title="numpy.vecdot"><code><span>numpy.vecdot</span></code></a> is now a ufunc it has a less precise signature.
This is due to the limitations of ufunc’s typing stub.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26313">gh-26313</a>)</p>
</li>
</ul>
<section id="ma-corrcoef-may-return-a-slightly-different-result">
<h3><code><span>ma.corrcoef</span></code> may return a slightly different result<a href="#ma-corrcoef-may-return-a-slightly-different-result" title="Link to this heading">#</a></h3>
<p>A pairwise observation approach is currently used in <a href="https://numpy.org/devdocs/reference/generated/numpy.ma.corrcoef.html#numpy.ma.corrcoef" title="numpy.ma.corrcoef"><code><span>ma.corrcoef</span></code></a> to
calculate the standard deviations for each pair of variables. This has been
changed as it is being used to normalise the covariance, estimated using
<a href="https://numpy.org/devdocs/reference/generated/numpy.ma.cov.html#numpy.ma.cov" title="numpy.ma.cov"><code><span>ma.cov</span></code></a>, which does not consider the observations for each variable in a
pairwise manner, rendering it unnecessary. The normalisation has been
replaced by the more appropriate standard deviation for each variable,
which significantly reduces the wall time, but will return slightly different
estimates of the correlation coefficients in cases where the observations
between a pair of variables are not aligned. However, it will return the same
estimates in all other cases, including returning the same correlation matrix
as <a href="https://numpy.org/devdocs/reference/generated/numpy.corrcoef.html#numpy.corrcoef" title="numpy.corrcoef"><code><span>corrcoef</span></code></a> when using a masked array with no masked values.</p>
<p>(<a href="https://github.com/numpy/numpy/pull/26285">gh-26285</a>)</p>
</section>
</section>
</section>


                </article></div>
  </body>
</html>
