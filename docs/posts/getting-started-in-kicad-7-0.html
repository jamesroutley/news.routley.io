<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://docs.kicad.org/7.0/en/getting_started_in_kicad/getting_started_in_kicad.html">Original</a>
    <h1>Getting Started in KiCad 7.0</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>With the schematic completed, go back to the Project Window and open the PCB
Editor, either by clicking the PCB Editor button or opening the board file.</p>
<div>
<h3 id="pcb_editor_basics">PCB Editor Basics</h3>
<p>Navigation in the PCB Editor is the same as the Schematic editor: pan by
dragging with the middle mouse button or right mouse button, and zoom with the
scrollwheel or <kbd>F1</kbd>/<kbd>F2</kbd>.</p>
<p>The main part of the PCB Editor is a canvas where the board will be designed.
The toolbar on the left side has various display options for the board,
including units and toggles for outline/filled display modes for tracks, vias,
pads, and zones. The toolbar just to the right of the canvas contains tools for
designing the PCB.</p>
<div>
<table>
<tbody><tr>
<td>
<i title="Note"></i>
</td>
<td>
Some buttons on the right toolbar have a small triangle in the bottom
right corner <span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/pcbnew_palette_buttons.png" alt="pcbnew palette buttons"/></span>. The triangle
indicates that the button has an expanding palette containing several
related tools, for example different kinds of dimensions. To select an
alternate tool, click and hold on the button until the palette appears,
then click on the alternate tool. Another way to use the palettes is to
click on the button and drag to the left until the palette appears, then
release the mouse button when the desired tool is highlighted.
</td>
</tr>
</tbody></table>
</div>
<p>At far right is the Appearance Panel and Selection Filter. The Appearance panel
is used to change visibility, colors, and opacity of PCB layers, objects, and
nets. The active layer is changed by clicking on the name of a layer.</p>
<p>Below the Appearance Panel is the Selection Filter, which enables and disables
selection of various types of PCB objects. This is useful to select specific
items in a crowded layout.</p>
</div>
<div>
<h3 id="board_setup_and_stackup">Board Setup and Stackup</h3>
<p>Before designing the board, set the page size and add information to the title
block. Click <strong>File</strong> → <strong>Page Settings…​</strong>, then choose an appropriate paper
size and enter a date, revision, and title.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/layout-page-setup.png" alt="Layout Page Settings"/>
</p>
</div>
<p>Next, go to <strong>File</strong> → <strong>Board Setup…​</strong> to define how the PCB will be
manufactured. The most important settings are the stackup, i.e. what copper and
dielectric layers the PCB will have (and their thicknesses), and the design
rules, e.g. sizes and spacing for tracks and vias.</p>
<p>To set the stackup, open the <strong>Board Stackup</strong> → <strong>Physical Stackup</strong> page of
the Board Setup window. For this guide, leave the number of copper layers at 2,
but more complicated projects might require more layers.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/board-setup-stackup.png" alt="Physical Stackup"/>
</p>
</div>
<p>Next, go to the <strong>Design Rules</strong> → <strong>Constraints</strong> page. The settings on this
page specify the overriding design rules for everything in the board design. For
the purposes of this guide, the defaults are fine. However, for a real project
these should be set according to the capabilities of the PCB fab house so that
the PCB design is manufacturable.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/board-setup-constraints.png" alt="Constraints"/>
</p>
</div>
<p>Finally, open the <strong>Design Rules</strong> → <strong>Net Classes</strong> page. A net class is a set
of design rules associated with a specific group of nets. This page lists the
design rules for each net class in the design and allows assigning nets to each
net class.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/board-setup-net-classes.png" alt="Net Classes"/>
</p>
</div>
<p>Track width and spacing can be managed manually by the designer during layout,
but net classes are recommended because they provide an automatic way to manage
and check design rules.</p>
<p>In this design, no net classes are specified, so all nets will belong to the
<code>Default</code> net class. The default design rules for this net class are
acceptable for this project, but other designs may have multiple net classes,
each with different design rules. For example a board might have a <code>High
Current</code> netclass with wide traces, or a <code>50 ohm</code> netclass with specific width
and clearance rules for 50 ohm controlled-impedance traces.</p>
</div>
<div>
<h3 id="importing_changes_from_schematic">Importing Changes From Schematic</h3>
<p>The schematic is complete, but there are not yet any components in the layout.
To import design data from the schematic into the layout, click <strong>Tools</strong> →
<strong>Update PCB from Schematic…​</strong>, or press <kbd>F8</kbd>. There is also a button
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/update_pcb_from_sch_24.png" alt="update pcb from sch 24"/></span> in the top toolbar.</p>
<p>Read through the messages in the <strong>Changes To Be Applied</strong> window, which will
say that the three components in the schematic will be added to the board. Click
<strong>Update PCB</strong>, <strong>Close</strong>, and click on the canvas to place the three
footprints. The location of each footprint relative to the others will be
changed later.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/update-pcb-from-schematic.png" alt="Update PCB from Schematic"/>
</p>
</div>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/footprints-added.png" alt="Footprints Added"/>
</p>
</div>
<p>In KiCad, updating the PCB with changes in the schematic is a manual process:
the designer decides when it is appropriate to update the PCB with modifications
in the schematic. Each time the schematic is edited, the designer must use the
<strong>Update PCB from Schematic</strong> tool to keep the schematic and layout in sync.</p>
</div>
<div>
<h3 id="drawing_a_board_outline">Drawing A Board Outline</h3>
<p>Now the three components have been placed, but the board itself has not been
defined. The board is defined by drawing a board outline on the <code>Edge.Cuts</code>
layer.</p>
<p>It’s often useful to draw the board outline with a coarse grid, which makes
it easy to get round numbers for the board size. Switch to a coarse grid by
selecting 1mm in the Grid dropdown menu above the canvas.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/coarse-grid.png" alt="1mm grid"/>
</p>
</div>
<p>To draw on the <code>Edge.Cuts</code> layer, click <strong>Edge.Cuts</strong> in the Layers tab of the
Appearance panel at right. Choose the rectangle tool
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_rectangle_24.png" alt="add rectangle 24"/></span>in the right toolbar, and use it to draw a
rectangle roughly surrounding the three footprints. The other graphic tools
(line <span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_line_24.png" alt="add line 24"/></span>, arc <span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_arc_24.png" alt="add arc 24"/></span>, circle
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_circle_24.png" alt="add circle 24"/></span>, or polygon
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_graphical_polygon_24.png" alt="add graphical polygon 24"/></span>) could also be used to define the
board outline; the only requirement is that the outline is a single closed shape
that doesn’t intersect itself.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/select-edge-cuts.png" alt="Edge Cuts"/>
</p>
</div>
</div>
<div>

<p>The next step in the layout process is to arrange the footprints on the board.
In general, there are a several considerations for positioning footprints:</p>
<div>
<ul>
<li>
<p>Some footprints may have exact requirements for their locations, such as
connectors, indicators, or buttons and switches.</p>
</li>
<li>
<p>Some components may need to be placed according to electrical considerations.
Bypass capacitors should be close to the power pins of the associated IC and
sensitive analog components should be far from digital interference.</p>
</li>
<li>
<p>Almost all components have a &#34;Courtyard&#34; (or two if both Front and Back are
defined). Generally Courtyards should not intersect.</p>
</li>
<li>
<p>Otherwise components should be positioned for ease of routing. Connected
components should generally be close together, and arranged to minimize
routing complexity. The ratsnest (the thin lines indicating connections
between pads) is useful for determining how best position footprints relative
to other footprints.</p>
</li>
</ul>
</div>
<p>For the purposes of this guide, the only placement goal is to make the routing
process as simple as possible.</p>
<p>Start by moving the battery holder <code>BT1</code> onto the back side of the board. Click
it to select it, then press <kbd>M</kbd> to move it. Press <kbd>F</kbd> to flip it to the
opposite side; it now appears mirrored and its pads have changed from red to
blue.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/bt1-flipped.png" alt="BT1 flipped to the back"/>
</p>
</div>
<p>All PCB layers are viewed from front side of the board. Footprints on the bottom
of the board are therefore upside down and appear mirrored.</p>
<p>Each PCB layer has a unique color, which is shown by the swatches in the Layers
tab of the Appearance panel. In the default color scheme, items on the <code>F.Cu</code>
(Front Copper) layer are red, while items on the <code>B.Cu</code> (Back Copper) are blue.</p>
<p>Now place the other two components. One at a time, select each component, then
move and rotate it with <kbd>M</kbd> and <kbd>R</kbd>. Watch the ratsnest lines between
each pad to choose the simplest arrangement of components; a good arrangement
will leave the lines untangled. One possible arrangement is shown in the
screenshot below.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/footprints-positioned.png" alt="Footprints positioned optimally"/>
</p>
</div>
</div>
<div>
<h3 id="routing_tracks">Routing Tracks</h3>
<p>With the components in place, it’s time to connect the pads with copper traces.</p>
<p>The first trace will be drawn on the front of the board, so change the active
layer to <code>F.Cu</code> in the Layers tab of the Appearance panel.</p>
<p>Click <strong>Route Tracks</strong> <span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_tracks_24.png" alt="add tracks 24"/></span> in the right-hand
toolbar or press <kbd>X</kbd>. Click on the <code>led</code> pad of <code>D1</code>. The ratsnest line
indicates there is an unrouted connection to the <code>led</code> pad of <code>R1</code>, so click on
that pad to draw a trace connecting the two pads. Clicking on the second pad
completes the trace. The ratsnest line between the <code>led</code> pins is no longer drawn
because the connection has been made in copper.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/route-first-connection.png" alt="First connection routed"/>
</p>
</div>
<p>Now draw a trace between the <code>GND</code> pads of <code>BT1</code> and <code>D1</code>, starting with the <code>BT1</code>
pad on the back of the board. Notice that the active layer automatically changed
to <code>B.Cu</code> after clicking on the <code>BT1</code> pad. Click on the <code>D1</code> pad to finish the
track.</p>
<p>While <code>BT1</code> has surface mount pads that are only on the bottom of the board,
<code>D1</code> has through hole pads that can connect to tracks on both the front and
back. Through hole pads are one way to make a connection between multiple
layers. In this case, <code>D1</code> is a component on the front side of the board, but
its through hole pads are used to connect to a trace on the back of the board.</p>
<p>Another way to make a connection across layers is with a via. Start routing at the
<code>VCC</code> pad of <code>BT1</code> on the back of the board. Press <kbd>V</kbd> and click halfway
between <code>BT1</code> and <code>R1</code> to insert a via, which also switches the active layer to
<code>F.Cu</code>. Complete the track on the top side of the board by clicking on the
<code>VCC</code> pad of <code>R1</code>.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/routing-complete.png" alt="All connections routed"/>
</p>
</div>
<p>At this point, all connections are routed. This can be confirmed by looking at
the status screen in the bottom left of the window, where the number of unrouted
nets is given as 0.</p>
</div>
<div>
<h3 id="placing_copper_zones">Placing Copper Zones</h3>
<p>Copper zones are often used for ground and power connections because they
provide a lower impedance connection than traces.</p>
<p>Add a <code>GND</code> zone on the bottom of the board by switching to the bottom copper
layer and clicking the <strong>Add a filled zone</strong> button
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/add_zone_24.png" alt="add zone 24"/></span> in the right toolbar. Click on the PCB to place
the first corner of the zone.</p>
<p>In the Copper Zone Properties dialog that appears, select the <code>GND</code> net and make
sure that the <code>B.Cu</code> layer is selected. Click <strong>OK</strong>, then click to place the other
three corners of the zone. Double click when placing the last corner to complete
the zone.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/zone-outline.png" alt="Zone outline"/>
</p>
</div>
<p>The zone outline is displayed on the canvas, but the zone is not yet filled — there is no copper in the zone area, and therefore the zone is not making any
electrical connections. Fill the zone with <strong>Edit</strong> → <strong>Fill All Zones</strong>
(<kbd>B</kbd>). Copper has been added to the zone, but it doesn’t connect to the
<code>VCC</code> or <code>led</code> pads and traces, and is clipped by the board edge. It overlaps
with the <code>GND</code> trace drawn earlier, and it connects to the <code>GND</code> pads through
thin traces. These are thermal reliefs, which make the pads easier to solder.
Thermal reliefs and other zone settings can be modified in the zone properties
dialog.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/zone-filled.png" alt="Filled copper zone"/>
</p>
</div>
<p>In KiCad, zones are not filled automatically when they are first drawn or
modified, or when footprints within them are moved. Zones are refilled by
manually filling them and when running <a href="#drc">DRC</a>. Make sure zone fills are
up-to-date before generating <a href="#fab">fabrication outputs</a>.</p>
<p>Sometimes filled zones can make it hard to see other objects in a crowded board
design. Zones can be hidden except for their boundaries using the <strong>Show only
zone boundaries</strong> button <span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/show_zone_disable_24.png" alt="show zone disable 24"/></span> on the
left-hand toolbar. Zones retain their filled status when only their outlines are
shown — hiding a zone fill is not the same as unfilling it.</p>
<p>Zones can also be made transparent using the Appearance panel, and inactive
layers can also be hidden or dimmed using the <strong>Layer Display Options</strong> in the
Appearance Panel.</p>
</div>
<div>
<h3 id="drc">Design Rule Checking</h3>
<p>Design Rule Checking is the layout equivalent of Electrical Rule Checking for
the schematic. DRC looks for design mistakes like mismatches between the
schematic and layout, copper regions that have insufficient clearance or are
shorted together, and traces that do not connect to anything. Custom rules can
also be written in KiCad 7.0. To view the full list of design rules that are
checked and to adjust their severity, go to <strong>File</strong> → <strong>Board Setup…​</strong> →
<strong>Design Rules</strong> → <strong>Violation Severity</strong>. Running DRC and fixing all errors
is strongly advised before generating <a href="#fab">fabrication outputs</a>.</p>
<p>Run a DRC check with <strong>Inspect</strong> → <strong>Design Rules Checker</strong>, or use the button
<span><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/erc_24.png" alt="erc 24"/></span> in the top toolbar. Click <strong>Run DRC</strong>. When the
checks are complete, no errors or warnings should be reported. Close the DRC
window.</p>
<p>Now intentionally cause a DRC error by moving the resistor footprint to overlap
the filled area of the zone. Use <kbd>D</kbd> (Drag) to move the resistor footprint
slightly while keeping the traces attached to its pads. This creates a clearance
violation because the <code>VCC</code> and <code>led</code> pads of the resistor are shorted to the
<code>GND</code> zone fill. Ordinarily this would be fixed by refilling the zone, but don’t
refill the zone yet.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/resistor-moved.png" alt="Resistor footprint moved to violate clearance"/>
</p>
</div>
<p>Run DRC again, but make sure to uncheck the <strong>Refill all zones before performing
DRC</strong> checkbox. DRC reports 6 violations: for each pad of <code>R1</code>, there is a
clearance violation between the pad and the zone, another clearance violation
between the pad’s through hole and the zone, and a third violation where the
pad’s solder mask opening exposes the copper of two different nets (the <code>GND</code>
fill and the trace connected to the pad). Arrows point to each violation in the
canvas. Clicking on each violation message zooms in on the respective
violation.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/drc-errors.png" alt="DRC errors due to clearance violation between R1 and GND"/>
</p>
</div>
<p>Close the DRC dialog, press <kbd>B</kbd> to refill the zone, and re-run DRC.
Alternatively, check the <strong>Refill all zones before performing DRC</strong> checkbox and
re-run DRC. All violations are fixed.</p>
</div>
<div>
<h3 id="3d_viewer">3D Viewer</h3>
<p>KiCad offers a 3D viewer that is useful for inspecting the PCB. Open the 3D
viewer with <strong>View</strong> → <strong>3D Viewer</strong>. Pan by dragging with the middle mouse
button, and orbit by dragging with the left mouse button. Orbit around the PCB
to see the LED and resistor on the top, and the battery holder on the bottom.</p>
<p>A raytracing mode is available, which is slower but offers more accurate
rendering. Switch to the raytracing mode with <strong>Preferences</strong> →
<strong>Raytracing</strong>.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/raytracing.png" alt="Raytraced view of the PCB"/>
</p>
</div>
<p>Many of the footprints in KiCad’s library come with 3D models, including all of
the footprints used in this guide. Some footprints do not come with 3D models,
<a href="#footprints-and-3d-models">but users can add their own</a>.</p>
</div>
<div>
<h3 id="fab">Fabrication Outputs</h3>
<p>With the board design finished, the final step is to generate fabrication
outputs so the board can be manufactured.</p>
<p>Open the Plot dialog with <strong>File</strong> → <strong>Plot…​</strong>. This dialog can plot the
design in several formats, but Gerber is usually the right format for ordering
from a PCB fabricator.</p>
<p>Specify an output directory so that the plotted files will be collected in a
folder. Otherwise, the default settings are fine, but make sure all the necessary
layers are checked: include the copper layers (<code>*.Cu</code>), board outline
(<code>Edge.Cuts</code>), soldermask (<code>*.Mask</code>), and silkscreen (<code>*.Silkscreen</code>).
The paste layers (<code>*.Paste</code>) are useful for manufacturing solder paste
stencils. The Adhesive layers (<code>*.Adhesive</code>) are needed only if any
components will be glued to the board during assembly. Other layers may be
useful to plot, but are not typically necessary for PCB fabrication.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/fabrication-outputs.png" alt="Plot dialog"/>
</p>
</div>
<p>Click <strong>Plot</strong> to generate the Gerber files. Also click <strong>Generate Drill
Files…​</strong> and then <strong>Generate Drill File</strong> to create files specifying the
location of all holes that will be drilled in the board. Finally, close the Plot
dialog. The design is finished.</p>
<div>
<p><img src="http://bookwyrm.social/user/wesleyac/review/2727255/s/images/generate-drill-files.png" alt="Generate Drill Files dialog"/>
</p>
</div>
</div>
</div></div>
  </body>
</html>
