<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rasteri/HIDman">Original</a>
    <h1>HIDman Adapting USB devices to work on old computers</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto"><h2 tabindex="-1" dir="auto">USB HID to XT / AT / PS/2 / Serial converter</h2><a id="user-content-usb-hid-to-xt--at--ps2--serial-converter" aria-label="Permalink: USB HID to XT / AT / PS/2 / Serial converter" href="#usb-hid-to-xt--at--ps2--serial-converter"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">HIDman is an open source device to allow the use of modern USB keyboards and mice on legacy PCs.</p>
<p dir="auto">Peripherals that support legacy PCs are becoming hard to find, especially for the very first PCs. This project aims to provide a simple cheap solution that will cover everything from the original IBM 5150 PC all the way up to modern computers that have PS/2 ports.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/hidmanfront.jpg"><img src="https://github.com/rasteri/HIDman/raw/main/images/hidmanfront.jpg" width="50%/"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/hidmanrear.jpg"><img src="https://github.com/rasteri/HIDman/raw/main/images/hidmanrear.jpg" width="50%/"/></a></p>

<ul dir="auto">
<li>(should) Support the majority of standard USB keyboards and mice, including ones that use wireless dongles.</li>
<li>Also supports (some) USB Game controllers - buttons/axes are mapped to keypresses or mouse actions</li>
<li>Can emulate the following keyboards :
<ul dir="auto">
<li>OG IBM PC / XT and clones</li>
<li>AT / PS/2</li>
<li>Amstrad PC (PC1512, PC1640, PC2xxx, PC3xxx, PC4xxx)</li>
</ul>
</li>
<li>And the following mice :
<ul dir="auto">
<li>Serial Mouse (with optional Logitech-style 3rd button)</li>
<li>PS/2 Mouse (with optional Intellipoint-style scroll wheel and up to 5 buttons)</li>
</ul>
</li>
<li>Driverless configuration menu - change settings just by opening a text editor</li>
</ul>


<p dir="auto">You can connect many different combinations of USB devices to HIDman.</p>
<p dir="auto">The most obvious being to connect a keyboard to one USB port, and a mouse to the other one :</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/usbsetup1.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/usbsetup1.svg" width="300/"/></a></p>
<p dir="auto">Or, you could perhaps connect a wireless keyboard+mouse dongle to one port, and a game controller to the other :</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/usbsetup2.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/usbsetup2.svg" width="500/"/></a></p>
<p dir="auto">Hub support can be hit-and-miss. This is (mostly) not HIDman&#39;s fault - many modern hubs don&#39;t support low-speed USB devices properly.</p>

<ul dir="auto">
<li>Connect male-to-male Mini-DIN cables from HIDman’s keyboard and mouse ports to your PC’s PS/2 ports.</li>
<li>Turn on your PC.</li>
<li>If necessary, press HIDman&#39;s ⏻ power button to select PS/2 mode (light blue).</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/newerpcs.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/newerpcs.svg" width="400/"/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Older PCs (AT/XT and Serial)</h2><a id="user-content-older-pcs-atxt-and-serial" aria-label="Permalink: Older PCs (AT/XT and Serial)" href="#older-pcs-atxt-and-serial"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Connect a male-to-male Mini-DIN Cable from HIDman&#39;s keyboard port into a Mini-DIN to DIN adapter.</li>
<li>Connect that adapter to your PC&#39;s keyboard port.</li>
<li>Connect a straight-through male-to-female DE-9 cable from HIDman&#39;s serial port to your PC&#39;s serial port.</li>
<li>Turn on your PC.</li>
<li>Press HIDman&#39;s ⏻ power button to select AT mode (light blue), or XT mode (orange) for early 80&#39;s IBM PCs and clones.</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/olderpcs.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/olderpcs.svg" width="500/"/></a></p>

<p dir="auto">Configuration is provided through a built-in menu system. No software install is required - all interaction is through the keyboard.</p>
<p dir="auto">Simply open a text editor on your target PC (eg notepad, edit, vi), then hold HIDman&#39;s power button for a few seconds. The menu will be typed out into your text editor.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/menu1.png"><img src="https://github.com/rasteri/HIDman/raw/main/images/menu1.png" width="394/"/></a></p>
<p dir="auto">&#34;Adv.Keyboard&#34; and &#34;Adv.Mouse&#34; switch the keyboard and mouse respectively into &#34;Native Mode&#34;. This may be required to access certain functions such as scroll wheels and extra buttons on mice.</p>
<p dir="auto">&#34;Intellimouse&#34; enables scroll wheel and 5-button support for PS/2 mice.</p>
<p dir="auto">&#34;Debug&#34; enables the debug menu. The most useful debugging option is &#34;Dump HID Data&#34;. Enabling this dumps information about all USB devices connected after that point.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/menu2.png"><img src="https://github.com/rasteri/HIDman/raw/main/images/menu2.png" width="450/"/></a></p>
<p dir="auto">If you are having trouble getting a USB device to work, enable HID Dumping then connect the troublesome USB device. Wait for it to finish dumping, then press ESC and save the resulting data to a text file. Then send it to me for analysis.</p>

<p dir="auto">Firmware development is continuing, so if you have problems it&#39;s always worth updating to the latest version.</p>
<p dir="auto">If you&#39;re on windows, first install WCH&#39;s ISP tool - <a href="https://www.wch-ic.com/downloads/WCHISPTool_Setup_exe.html" rel="nofollow">https://www.wch-ic.com/downloads/WCHISPTool_Setup_exe.html</a>
If on Mac or Linux, install ch55xtool : <a href="https://github.com/MarsTechHAN/ch552tool">https://github.com/MarsTechHAN/ch552tool</a></p>
<p dir="auto">The next step is to put the HIDman in firmware update mode.</p>
<ol dir="auto">
<li>Disconnect everything from HIDman, including all USB devices and PCs. (failure to do this may result in damage to HIDman, your PC, or both).</li>
<li>Hold down HIDman&#39;s ⏻ power button.</li>
<li>Use a USB A-to-A cable to connect HIDman&#39;s LOWER USB port to a USB port on your modern PC.</li>
</ol>
<p dir="auto">After that, update instructions will depend on your operating system.</p>

<p dir="auto">Follow the instructions in this diagram :</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/firmware2.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/firmware2.svg" width="800/"/></a></p>

<p dir="auto">Pass the -f parameter to ch55xtool specify the firmware file to load. For example :</p>
<div data-snippet-clipboard-copy-content="python3 ch55xtool.py -f hidman_axp_v1.1.bin"><pre><code>python3 ch55xtool.py -f hidman_axp_v1.1.bin
</code></pre></div>


<p dir="auto">HIDman actually outputs keyboard <em>and</em> mouse signals on <strong>BOTH</strong> PS/2 connectors. If you have a PC that can take advantage of this (typically Mini PCs or Laptops), you can keep the cabling neater by using only one cable.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/combined1.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/combined1.svg" width="500/"/></a></p>
<p dir="auto">Note that there are two different types of Combined PS/2 ports, and HIDman provides for both types. Generally, laptops will need plugged into the Mouse port on HIDman, and Mini PCs want the Keyboard port. If it doesn&#39;t work with one port, try the other one.</p>

<p dir="auto">Another way to take advantage of the Combined PS/2 port functionality is to use a widely-available PS/2 splitter :</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rasteri/HIDman/blob/main/images/splitter.svg"><img src="https://github.com/rasteri/HIDman/raw/main/images/splitter.svg" width="500/"/></a></p>
<p dir="auto">This also allows neater cabling, as you could connect both keyboard and mouse ports to the rear, and not have to connect to the front mouse port.</p>

<p dir="auto">The HIDman is based around the CH559 from WCH, a remarkably flexible chip with <strong>two</strong> USB HOST ports. This makes it ideal for our purposes.</p>
<p dir="auto">The code is forked from atc1441&#39;s excellent repository - <a href="https://github.com/atc1441/CH559sdccUSBHost">https://github.com/atc1441/CH559sdccUSBHost</a></p>
<p dir="auto">PCB and enclosure was designed in KiCad - source files are in the hardware directory.</p>
<p dir="auto">Development is very active but it is usable in its current state.</p>
</article></div></div>
  </body>
</html>
