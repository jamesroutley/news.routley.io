<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/transform-data/metricflow">Original</a>
    <h1>Show HN: MetricFlow – open-source metric framework</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://blog.veitheller.de/transform-data/metricflow/blob/main/assets/MetricFlow_logo.png"><img src="https://blog.veitheller.de/transform-data/metricflow/raw/main/assets/MetricFlow_logo.png"/></a>
</p>
<h2 dir="auto"><a id="user-content-welcome-to-metricflow" aria-hidden="true" href="#welcome-to-metricflow"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Welcome to MetricFlow</h2>
<p dir="auto">MetricFlow is a computational framework for building and maintaining consistent metric logic. The name comes from the approach taken to generate metrics. Using the user-defined semantic model, a query is first compiled into a metric dataflow plan. The plan is then converted to an abstract SQL object model, optimized, and rendered to engine-specific SQL.</p>
<p dir="auto">MetricFlow provides a set of abstractions that help you construct complicated logic and dynamically generate queries to handle:</p>
<ul dir="auto">
<li>Complex metric types such as ratio, expression, and cumulative</li>
<li>Multi-hop joins between fact and dimension sources</li>
<li>Metric aggregation to different time granularities</li>
<li>And so much more</li>
</ul>
<p dir="auto">As a developer, you can also use MetricFlow&#39;s interfaces to construct APIs for integrations to bring metrics into downstream tools in your data stack.</p>
<p dir="auto">MetricFlow itself acts as a semantic layer, compiling the semantic information described in the MetricFlow spec to SQL that can be executed against the data warehouse and served to downstream applications. It acts as a proxy, translating metric requests in the form of “metrics by dimensions” into SQL queries that traverse the data warehouse and the underlying semantic structure to resolve every possible combination of metric and dimension.</p>
<h3 dir="auto"><a id="user-content-core-tenets" aria-hidden="true" href="#core-tenets"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Core Tenets</h3>
<p dir="auto">The framework relies on a set of core tenets:</p>
<ul dir="auto">
<li><strong>DRY (Don’t Repeat Yourself)</strong>: This principle is the core objective of the underlying MetricFlow spec. Duplication of logic leads to incorrectly constructed metrics and should be avoided through thoughtfully-designed abstractions.</li>
<li><strong>SQL-centric compilation</strong>: Metric logic should never be constructed in a black-box. This SQL-centric approach to metric construction means that metric logic remains broadly accessible and introspectable.</li>
<li><strong>Maximal Flexibility</strong>: Construct any metric on any data model aggregated to any dimension. There are escape hatches, but we continually work to make them unnecessary.</li>
</ul>
<h3 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h3>
<p dir="auto">Key features of MetricFlow include:</p>
<ul dir="auto">
<li><strong>Metrics as Code:</strong> MetricFlow&#39;s metric spec allows you to define a wide-range of metrics through a clean set of abstractions that encourage DRY expression of logic in YAML and SQL.</li>
<li><strong>SQL Compilation:</strong> Generate SQL to build metrics, without the need to repeatedly express the same joins, aggregations, filters and expressions from your data warehouse in order to construct datasets for consumption.</li>
<li><strong>DW Connectors</strong>: Support for data warehouse (DW) connectors give the open-source community the power to contribute to DW-specific optimizations and support. DW connectors allow users to construct metric logic to various data warehouses.</li>
<li><strong>Command Line Interface (CLI)</strong>: Pull data into a local context for testing and development workflows.</li>
<li><strong>Python Library</strong>: Pull metrics into local Python environments such as Jupyter or other analytical interfaces.</li>
<li><strong>Materializations:</strong> Define a set of metrics and a set of dimensions that you want to materialize to the data warehouse. This enables rapid construction of denormalized datasets back to the warehouse.</li>
<li><strong>Accessible interfaces</strong>: Construct APIs and SDKs so you can pull metric datasets into downstream applications.
<ul dir="auto">
<li><em>React Components</em> to build embedded analytics</li>
<li><em>Airflow Operators</em> to schedule API requests and pre-construction of metrics</li>
<li><em>GraphQL interface</em> for end-users to build their own interfaces for metrics</li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-resources" aria-hidden="true" href="#resources"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Resources</h2>
<h3 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h3>
<p dir="auto">MetricFlow documentation can be found on the <a href="https://docs.transform.co/docs/overview/metricflow-overview" rel="nofollow">Transform Documentation site</a>.</p>
<h3 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h3>
<p dir="auto">If you’re new to MetricFlow, we suggest that you review our <a href="https://docs.transform.co/docs/metricflow/getting-started" rel="nofollow">Getting Started</a> section and <a href="https://docs.transform.co/docs/metricflow/metricflow-tutorial" rel="nofollow">tutorial</a>. To get started you can run the following commands:</p>
<p dir="auto">Install MetricFlow:</p>
<p dir="auto">If you do not have postgres on your machine, first install Postgres:</p>
<ul dir="auto">
<li>Postgres provides <a href="https://www.postgresql.org/download/" rel="nofollow">pre-built packages for download and installation</a></li>
<li>Mac users might prefer to use Homebrew: <code>brew install postgresql</code></li>
</ul>
<p dir="auto">Then, proceed with regular install as follows:</p>
<div data-snippet-clipboard-copy-content="pip install metricflow
mf setup
# Now you can connect your datawarehouse by modifying the parameters in {$HOME}/.metricflow/config.yml
mf health-checks # confirm your datawarehouse connection is working"><pre><code>pip install metricflow
mf setup
# Now you can connect your datawarehouse by modifying the parameters in {$HOME}/.metricflow/config.yml
mf health-checks # confirm your datawarehouse connection is working
</code></pre></div>
<p dir="auto">Run the tutorial:</p>
<div data-snippet-clipboard-copy-content="mf tutorial # optionally add `--skip-dw` if you have already confirmed your datawarehouse connection works"><pre><code>mf tutorial # optionally add `--skip-dw` if you have already confirmed your datawarehouse connection works
</code></pre></div>
<p dir="auto">For reference, the tutorial steps are below:</p>
<div data-snippet-clipboard-copy-content="🤓 Please run the following steps,

    1. In &#39;{$HOME}/.metricflow/config.yml&#39;, `model_path` should be &#39;{$HOME}/.metricflow/sample_models&#39;.
    2. Try validating your data model: `mf validate-configs`
    3. Check out your metrics: `mf list-metrics`
    4. Query your first metric: `mf query --metrics transactions --dimensions ds --order ds`
    5. Show the SQL MetricFlow generates: `mf query --metrics transactions --dimensions ds --order ds --explain`
    6. Add another dimension: `mf query --metrics transactions --dimensions ds,customer__country --order ds`
    7. Add a higher date granularity: `mf query --metrics transactions --dimensions ds__week --order ds__week`
    8. Try a more complicated query: `mf query --metrics transactions,transaction_usd_na,transaction_usd_na_l7d --dimensions ds,is_large --order ds --where &#34;ds between &#39;2022-03-20&#39; and &#39;2022-04-01&#39;&#34;`
    9. For more ways to interact with the sample models, go to ‘https://docs.transform.co/docs/metricflow/metricflow-tutorial’.
    10. Once you’re done, run `mf tutorial --skip-dw --drop-tables` to drop the sample tables."><pre><code>🤓 Please run the following steps,

    1. In &#39;{$HOME}/.metricflow/config.yml&#39;, `model_path` should be &#39;{$HOME}/.metricflow/sample_models&#39;.
    2. Try validating your data model: `mf validate-configs`
    3. Check out your metrics: `mf list-metrics`
    4. Query your first metric: `mf query --metrics transactions --dimensions ds --order ds`
    5. Show the SQL MetricFlow generates: `mf query --metrics transactions --dimensions ds --order ds --explain`
    6. Add another dimension: `mf query --metrics transactions --dimensions ds,customer__country --order ds`
    7. Add a higher date granularity: `mf query --metrics transactions --dimensions ds__week --order ds__week`
    8. Try a more complicated query: `mf query --metrics transactions,transaction_usd_na,transaction_usd_na_l7d --dimensions ds,is_large --order ds --where &#34;ds between &#39;2022-03-20&#39; and &#39;2022-04-01&#39;&#34;`
    9. For more ways to interact with the sample models, go to ‘https://docs.transform.co/docs/metricflow/metricflow-tutorial’.
    10. Once you’re done, run `mf tutorial --skip-dw --drop-tables` to drop the sample tables.
</code></pre></div>
<h3 dir="auto"><a id="user-content-additional-resources" aria-hidden="true" href="#additional-resources"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional Resources</h3>
<ul dir="auto">
<li><a href="https://transform.co/metricflow" rel="nofollow">Website</a></li>
<li><a href="https://docs.transform.co/docs/overview/metricflow-overview" rel="nofollow">Documentation</a></li>
<li><a href="https://community.transform.co/metricflow-signup" rel="nofollow">Slack Community</a></li>
<li><a href="https://github.com/transform-data/metricflow">MetricFlow Git Repository</a></li>
<li><a href="https://blog.veitheller.de/transform-data/metricflow/blob/main/CHANGELOG.md">CHANGELOG.md</a></li>
</ul>
<h2 dir="auto"><a id="user-content-install-metricflow" aria-hidden="true" href="#install-metricflow"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install MetricFlow</h2>
<p dir="auto">MetricFlow can be installed from PyPi for use as a Python library with the following command:</p>
<p dir="auto"><code>pip install metricflow</code></p>
<p dir="auto">Once installed, MetricFlow can be setup and connected to a data warehouse by following the instructions after issuing the command:</p>
<p dir="auto"><code>mf setup</code></p>
<p dir="auto">To see what MetricFlow can do without custom configurations, start the tutorial by running:</p>
<p dir="auto"><code>mf tutorial</code></p>
<p dir="auto">To get up and running with your own metrics, you should rely on MetricFlow’s documentation available at <a href="https://docs.transform.co/docs/metricflow/guides/introduction" rel="nofollow">MetricFlow docs</a>.</p>
<h2 dir="auto"><a id="user-content-contributing-and-code-of-conduct" aria-hidden="true" href="#contributing-and-code-of-conduct"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing and Code of Conduct</h2>
<p dir="auto">This project will be a place where people can easily contribute high-quality updates in a supportive environment.</p>
<p dir="auto">You might wish to read our <a href="http://community.transform.co/metricflow-signup" rel="nofollow">code of conduct</a> and  engineering practices  before diving in.</p>
<p dir="auto">To get started on direct contributions, head on over to our <a href="https://blog.veitheller.de/transform-data/metricflow/blob/main/CONTRIBUTING.md">contributor guide</a></p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">MetricFlow is open source software. The project relies on several licenses including AGPL-3.0-or-later and Apache (specified at folder level).</p>
<p dir="auto">MetricFlow is built by <a href="https://transform.co/" rel="nofollow">Transform</a>, the company behind the first metrics store.</p>
</article>
          </div></div>
  </body>
</html>
