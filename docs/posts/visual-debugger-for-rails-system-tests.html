<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/stepful/cyperful">Original</a>
    <h1>Show HN: Visual debugger for Rails system tests</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<blockquote>
<p dir="auto">The Capybara visual debugger</p>
</blockquote>
<p dir="auto"><a href="https://badge.fury.io/rb/cyperful" rel="nofollow"><img src="https://camo.githubusercontent.com/4a7c70b1a1196e6fd1019c083dbeaf5c018c1531408d5d49e6bacfaa423eda5b/68747470733a2f2f62616467652e667572792e696f2f72622f637970657266756c2e737667" alt="Gem Version" data-canonical-src="https://badge.fury.io/rb/cyperful.svg"/></a></p>
<p dir="auto">An addon for Ruby Capybara system tests that adds the great DX of tools like Cypress.io.</p>
<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span aria-label="Video description cyperful-demo.mp4">cyperful-demo.mp4</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/992076/320949587-dd1ef39c-98ca-48f3-8c3d-99ae057594e2.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTUxMDIyNDQsIm5iZiI6MTcxNTEwMTk0NCwicGF0aCI6Ii85OTIwNzYvMzIwOTQ5NTg3LWRkMWVmMzljLTk4Y2EtNDhmMy04YzNkLTk5YWUwNTc1OTRlMi5tcDQ_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNTA3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDUwN1QxNzEyMjRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNDAyNTNkZmU1ZGI3NjIwNzI0MDNmZDlhODU1YmQ5NGQzMGY4NzQ4ZjFjNDI2NzAzNTM2YzMxYjRjNzlkMTc2JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.Y38RiFDGQQ59orQo4lTDJaO1SCtAza1boK9Uzi8nQkg" data-canonical-src="https://private-user-images.githubusercontent.com/992076/320949587-dd1ef39c-98ca-48f3-8c3d-99ae057594e2.mp4?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTUxMDIyNDQsIm5iZiI6MTcxNTEwMTk0NCwicGF0aCI6Ii85OTIwNzYvMzIwOTQ5NTg3LWRkMWVmMzljLTk4Y2EtNDhmMy04YzNkLTk5YWUwNTc1OTRlMi5tcDQ_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNTA3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDUwN1QxNzEyMjRaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0yNDAyNTNkZmU1ZGI3NjIwNzI0MDNmZDlhODU1YmQ5NGQzMGY4NzQ4ZjFjNDI2NzAzNTM2YzMxYjRjNzlkMTc2JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.Y38RiFDGQQ59orQo4lTDJaO1SCtAza1boK9Uzi8nQkg" controls="controls" muted="muted">

  </video>
</details>


<ul>
<li> View the list of steps in a test, with live updates as the test runs</li>
<li> Pause the test at each step and interact with the page</li>
<li> View API requests and console logs between steps</li>
<li> Auto-restart the test when the source code is modified</li>
<li> Records a video of the test so you can preview the finished test at that point in time <em>(experimental)</em></li>
<li> View and run ANY test suite from the UI <em>(coming soon)</em></li>
<li> Record browser interactions to save as ruby code <em>(coming later)</em></li>
</ul>

<p dir="auto">ðŸš¨ Cyperful is in <strong>BETA</strong> and you will likely encounter issues/bugs! I have only confirmed it works on the default Rails 7.0 testing stack: <code>Minitest</code> and <code>Capybara</code>.</p>
<p dir="auto">Please open a Github issue if you&#39;d like to see support for other test frameworks (such as RSpec) or any other specific setups.</p>

<p dir="auto">First, install the gem:</p>

<p dir="auto">In your <code>application_system_test_case.rb</code> file, add the following:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CYPERFUL = !!ENV[&#34;CYPERFUL&#34;]

require &#34;cyperful&#34; if CYPERFUL

class ApplicationSystemTestCase &lt; ActionDispatch::SystemTestCase
  include Cyperful::SystemTestHelper if CYPERFUL

  # ...
end"><pre><span>CYPERFUL</span> <span>=</span> !!<span>ENV</span><span>[</span><span>&#34;CYPERFUL&#34;</span><span>]</span>

<span>require</span> <span>&#34;cyperful&#34;</span> <span>if</span> <span>CYPERFUL</span>

<span>class</span> <span>ApplicationSystemTestCase</span> &lt; <span>ActionDispatch</span>::<span>SystemTestCase</span>
  <span>include</span> <span>Cyperful</span>::<span>SystemTestHelper</span> <span>if</span> <span>CYPERFUL</span>

  <span># ...</span>
<span>end</span></pre></div>

<p dir="auto">Run a test with <code>CYPERFUL</code> env var, e.g.:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CYPERFUL=1 rails test test/system/my_test.rb:123"><pre>CYPERFUL=1 rails <span>test</span> test/system/my_test.rb:123</pre></div>
<p dir="auto">ðŸš¨ <strong>IMPORTANT NOTE:</strong>
Cyperful currently works best when you run a single test at a time i.e. your test file contains only 1 test OR you specify a single test with <code>&lt;filename&gt;:&lt;line_number&gt;</code>. A better DX for running multiple sequential tests is coming soon.</p>

<p dir="auto">Config options:</p>
<ul dir="auto">
<li><code>reload_test_files</code> (default: <code>true</code>) - Reset the test when the test&#39;s source code is modified.</li>
<li><code>auto_run_on_reload</code> (default: <code>true</code>) - Automatically start the test when the source code is modified. Only applies if <code>reload_test_files</code> is <code>true</code>.</li>
<li><code>history_recording</code> (default: <code>true</code>) - Record a video of the test while it is running for debugging.</li>
</ul>
<p dir="auto">You can set these options on the <code>Cyperful.config</code> object after requiring the gem, e.g.:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Cyperful.config.history_recording = false"><pre><span>Cyperful</span><span>.</span><span>config</span><span>.</span><span>history_recording</span> <span>=</span> <span>false</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# in a terminal, run the frontend dev server.
# this will watch for changes and rebuild the frontend
cd cyperful
pnpm run dev

# in another terminal, run any test.
# prepend `CYPERFUL_DEV=1` to tell cyperful to look at the
# dev server instead of the prebuilt frontend assets.
cd my_test_app
CYPERFUL_DEV=1 CYPERFUL=1 rails test test/system/my_test.rb"><pre><span><span>#</span> in a terminal, run the frontend dev server.</span>
<span><span>#</span> this will watch for changes and rebuild the frontend</span>
<span>cd</span> cyperful
pnpm run dev

<span><span>#</span> in another terminal, run any test.</span>
<span><span>#</span> prepend `CYPERFUL_DEV=1` to tell cyperful to look at the</span>
<span><span>#</span> dev server instead of the prebuilt frontend assets.</span>
<span>cd</span> my_test_app
CYPERFUL_DEV=1 CYPERFUL=1 rails <span>test</span> test/system/my_test.rb</pre></div>
</article></div></div>
  </body>
</html>
