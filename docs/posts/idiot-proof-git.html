<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://softwaredoug.com/blog/2022/11/09/idiot-proof-git-aliases.html">Original</a>
    <h1>Idiot Proof Git</h1>
    
    <div id="readability-page-1" class="page"><div>
	  <p>I’m an idiot. And git is hard. A lot of places use a <a href="https://medium.com/singlestone/a-git-workflow-using-rebase-1b1210de83e5">rebase-based Git workflow</a>, and I’ve made git less hard with a set of handy aliases. Put these in your <code>~/.gitconfig</code> and turn git into an actually less painful command line tool to use.</p>

<div><div><pre><code>[alias]
  # *********************
  # Rebase workflow
    mainbranch = &#34;!git remote show origin | sed -n &#39;/HEAD branch/s/.*: //p&#39;&#34;
    synced = &#34;!git pull origin $(git mainbranch) --rebase&#34;
    update = &#34;!git pull origin $(git rev-parse --abbrev-ref HEAD) --rebase&#34;
    squash = &#34;!git rebase -v -i $(git mainbranch)&#34;
    publish = push origin HEAD --force-with-lease
    pub = publish 
</code></pre></div></div>

<p>Here’s documentation for these idiot-proof git aliases.</p>

<h2 id="publish-your-branchs-changes-to-the-world">Publish your branch’s changes to the world</h2>

<p>The <code>publish</code> (abbrev <code>pub</code>) command publishes your changes to your branch Github. If other changes have been posted by another user to Github, then changes will be rejected. You should <code>update</code> first to incoroporate their changes and resolve any conflicts.</p>



<p>Under the hood this is a <a href="https://stackoverflow.com/a/52823955/8123">force push with lease</a> to your branch at origin.</p>

<h2 id="sync-your-branch-with-main--master-from-github">Sync your branch with main / master from Github</h2>

<p>The <code>synced</code> command will get your local branch up to date with your main branch (main or master) at origin (ie Github).</p>



<p>Under the hood, this fetches main or master from origin and performs a <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">rebase</a>, replaying your commits on top of the tip of main or master.</p>

<h2 id="update-your-branch-with-githubs-copy-of-your-branch">Update your branch with Github’s copy of your branch</h2>

<p>If your local branch gets out of date with origin’s version of your branch, then do an update. This would happen if you’re collaborating on the branch with a colleague and need to get up to date.</p>



<p>Under the hood, this fetches origin/your-branch and performs a <a href="https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase">rebase</a>.</p>

<h2 id="squash-commits">Squash commits</h2>

<p>Prior to merging, you likely want to shrink your branch’s many noisy commits to one or two meaningful ones. That’s what <code>squash</code> command does, giving you a chance to rewrite the branch’s history.</p>



<p>Under the hood, this is an <a href="https://thoughtbot.com/blog/git-interactive-rebase-squash-amend-rewriting-history">interactive rebase</a>.</p>



<ul>
  <li><code>git pr</code> -&gt; Open this PR at github.com</li>
  <li><code>git hub</code> -&gt; Open this repo at github.com</li>
  <li><code>git amend</code> -&gt; Alias for <code>git commit --amend</code></li>
  <li><code>git ammend</code>  -&gt; How I always misspell ‘amend’, also alias for <code>git commit --amend</code></li>
</ul>

<div><div><pre><code>  # ********************
  # My dumbass typos
    ammend = commit --amend 
    amend = commit --amend 

  # *********************
  # Github
  # From - https://salferrarello.com/git-alias-open-pull-request-github/
    pr = &#34;!f() { \
       open \&#34;$(git ls-remote --get-url $(git config --get branch.$(git rev-parse --abbrev-ref HEAD).remote) \
       | sed &#39;s|git@github.com:\\(.*\\)$|https://github.com/\\1|&#39; \
       | sed &#39;s|\\.git$||&#39;; \
       )/compare/$(\
       git config --get branch.$(git rev-parse --abbrev-ref HEAD).merge | cut -d &#39;/&#39; -f 3- \
       )?expand=1\&#34;; \
  }; f&#34;
    hub = &#34;!f() { \
       open \&#34;$(git ls-remote --get-url \
       | sed &#39;s|git@github.com:\\(.*\\)$|https://github.com/\\1|&#39; \
       | sed &#39;s|\\.git$||&#39;; \
       )\&#34;; \
  }; f&#34;
</code></pre></div></div>

<p><em>For simplicity, I use “Github” here to refer to the <code>origin</code> remote, but replace whatever your Github with whatever your <code>origin</code> is. The exception being <code>git pr</code> and <code>git hub</code> commands. Similarly I use <code>main</code> as the trunk/main/master. But both <code>main</code> and <code>master</code> are supported.</em></p>

      


	  </div></div>
  </body>
</html>
