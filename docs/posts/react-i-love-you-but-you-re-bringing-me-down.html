<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://marmelab.com/blog/2022/09/20/react-i-love-you.html">Original</a>
    <h1>React I Love You, but You&#39;re Bringing Me Down</h1>
    
    <div id="readability-page-1" class="page"><div><p>Dear <a href="https://reactjs.org/">React.js</a>,</p><p>We&#39;ve been together for almost 10 years. We&#39;ve come <a href="https://marmelab.com/react-admin/">a long way</a>. But things are getting out of hand. We need to talk.</p><p>It&#39;s embarrassing, I know. Nobody wants to have that conversation. So instead, I&#39;ll say it in songs.</p><h2 id="you-were-the-one"><a href="#you-were-the-one" aria-label="you were the one permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>You Were The One</h2><p>I&#39;m not a first-time JS lover. I&#39;ve had long adventures with jQuery, Backbone.js, and Angular.js before you. I knew what I could expect from a relationship with a JavaScript framework: Better UIs, more productivity, and a smoother developer experience - but also the frustrations of having to constantly change the way I think about my code to match the framework&#39;s mindset.</p><p>And when I met you, I was just out of a long relationship with <a href="https://angularjs.org/">Angular.js</a>. I was exhausted by <code>watch</code> and <code>digest</code>, not to mention <code>scope</code>. I was looking for something that didn&#39;t make me feel miserable.</p><p>It was love at first sight. Your <a href="https://reactjs.org/docs/thinking-in-react.html#step-5-add-inverse-data-flow">one-way data binding</a> was so refreshing compared to all I knew at the time. An entire category of problems I had with data synchronization and performance simply didn&#39;t exist with you. You were pure JavaScript, not a poor imitation expressed as a string in an HTML element. You had this thing, the &#34;declarative component&#34;, which was so beautiful that everyone kept looking at you.</p><p><span>
      <a href="https://sean.cm/static/1019d1daef4f6f43bcb03af50c0df098/60188/react-meme.jpg" target="_blank" rel="noopener">
    <span></span>
  <picture>
        <source srcset="/static/1019d1daef4f6f43bcb03af50c0df098/7c297/react-meme.webp 180w,/static/1019d1daef4f6f43bcb03af50c0df098/33ecc/react-meme.webp 360w,/static/1019d1daef4f6f43bcb03af50c0df098/df77d/react-meme.webp 720w,/static/1019d1daef4f6f43bcb03af50c0df098/3ea8a/react-meme.webp 750w" sizes="(max-width: 720px) 100vw, 720px" type="image/webp"/>
        <source srcset="/static/1019d1daef4f6f43bcb03af50c0df098/a789c/react-meme.jpg 180w,/static/1019d1daef4f6f43bcb03af50c0df098/ec190/react-meme.jpg 360w,/static/1019d1daef4f6f43bcb03af50c0df098/e0b4a/react-meme.jpg 720w,/static/1019d1daef4f6f43bcb03af50c0df098/60188/react-meme.jpg 750w" sizes="(max-width: 720px) 100vw, 720px" type="image/jpeg"/>
        <img src="https://sean.cm/static/1019d1daef4f6f43bcb03af50c0df098/e0b4a/react-meme.jpg" alt="React meme" title="React meme" loading="lazy"/>
      </picture>
  </a>
    </span></p><p>You were not the easy type. I had to work on my coding habits to get along with you, but boy was it worth it! At first, I was so happy with you that I kept telling everyone about you.</p><h2 id="heroes-of-new-forms"><a href="#heroes-of-new-forms" aria-label="heroes of new forms permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Heroes Of New Forms</h2><p>Things started getting weird when I asked you to handle forms. Forms and input are hard to cope with in vanilla JS. With React, they&#39;re even <em>harder</em>.</p><p>First, developers have to choose between <a href="https://reactjs.org/docs/uncontrolled-components.html">controlled and uncontrolled inputs</a>. Both have drawbacks and bugs in corner cases. But why do I have to make a choice in the first place? Two form strategies are one too many.</p><p>The &#34;recommended&#34; way, controlled components, is super verbose. This is the code I need for an addition form:</p><div data-language="jsx"><pre><code><span>import</span> React<span>,</span> <span>{</span> useState <span>}</span> <span>from</span> <span>&#39;react&#39;</span><span>;</span>

<span>export</span> <span>default</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> <span>[</span>a<span>,</span> setA<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>1</span><span>)</span><span>;</span>
    <span>const</span> <span>[</span>b<span>,</span> setB<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>2</span><span>)</span><span>;</span>

    <span>function</span> <span>handleChangeA</span><span>(</span><span>event</span><span>)</span> <span>{</span>
        <span>setA</span><span>(</span><span>+</span>event<span>.</span>target<span>.</span>value<span>)</span><span>;</span>
    <span>}</span>

    <span>function</span> <span>handleChangeB</span><span>(</span><span>event</span><span>)</span> <span>{</span>
        <span>setB</span><span>(</span><span>+</span>event<span>.</span>target<span>.</span>value<span>)</span><span>;</span>
    <span>}</span>

    <span>return</span> <span>(</span>
        <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>
            </span><span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>number<span>&#34;</span></span> <span>value</span><span><span>=</span><span>{</span>a<span>}</span></span> <span>onChange</span><span><span>=</span><span>{</span>handleChangeA<span>}</span></span> <span>/&gt;</span></span><span>
            </span><span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>number<span>&#34;</span></span> <span>value</span><span><span>=</span><span>{</span>b<span>}</span></span> <span>onChange</span><span><span>=</span><span>{</span>handleChangeB<span>}</span></span> <span>/&gt;</span></span><span>

            </span><span><span><span>&lt;</span>p</span><span>&gt;</span></span><span>
                </span><span>{</span>a<span>}</span><span> + </span><span>{</span>b<span>}</span><span> = </span><span>{</span>a <span>+</span> b<span>}</span><span>
            </span><span><span><span>&lt;/</span>p</span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
    <span>)</span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p>And if there were only two ways, I&#39;d be happy. But because of the huge amount of code required to build a real-life form with default values, validation, dependent inputs, and error messages, I have to use a third-party form framework. And they all fall short one way or another.</p><ul><li><a href="https://redux-form.com/8.3.0/">Redux-form</a> looked like a natural choice when we used Redux, but then his lead developer abandoned it to build</li><li><a href="https://final-form.org/react/">React-final-form</a>, which is full of unfixed bugs, and the lead developer left again. So I looked at</li><li><a href="https://formik.org/">Formik</a>, popular but heavyweight, slow for large forms, and limited in terms of features. So we decided to use</li><li><a href="https://react-hook-form.com/">React-hook-form</a>, which is fast, but has hidden bugs and has documentation structured like a maze.</li></ul><p>After years of building forms with React, I still struggle to make robust user experiences with legible code. When I look at how <a href="https://svelte.dev/blog/write-less-code">Svelte</a> deals with forms, I can&#39;t help but feel I&#39;m tied with the wrong abstraction. Look at this addition form:</p><div data-language="js"><pre><code><span>&lt;</span>script<span>&gt;</span>
    <span>let</span> a <span>=</span> <span>1</span><span>;</span>
    <span>let</span> b <span>=</span> <span>2</span><span>;</span>
<span>&lt;</span><span>/</span>script<span>&gt;</span>

<span>&lt;</span>input type<span>=</span><span>&#34;number&#34;</span> bind<span>:</span>value<span>=</span><span>{</span>a<span>}</span><span>&gt;</span>
<span>&lt;</span>input type<span>=</span><span>&#34;number&#34;</span> bind<span>:</span>value<span>=</span><span>{</span>b<span>}</span><span>&gt;</span>

<span>&lt;</span>p<span>&gt;</span><span>{</span>a<span>}</span> <span>+</span> <span>{</span>b<span>}</span> <span>=</span> <span>{</span>a <span>+</span> b<span>}</span><span>&lt;</span><span>/</span>p<span>&gt;</span></code></pre></div><h2 id="youre-too-context-sensitive"><a href="#youre-too-context-sensitive" aria-label="youre too context sensitive permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>You&#39;re Too Context Sensitive</h2><p>Shortly after we first met, you introduced me to your puppy <a href="https://redux.js.org/">Redux</a>. You couldn&#39;t go anywhere without it. I didn&#39;t mind at first, because it was cute. But then I realized that the world was spinning around it. Also, it made things harder when building a framework - other developers couldn&#39;t easily tweak an app with existing reducers.</p><p>But you noticed it, too, and you decided to get rid of Redux in favor of your own <code>useContext</code>. Except that <code>useContext</code> lacks a crucial feature of Redux: the ability to react to changes in parts of the context. These two are NOT equivalent in terms of performance:</p><div data-language="jsx"><pre><code>
<span>const</span> name <span>=</span> <span>useSelector</span><span>(</span><span>state</span> <span>=&gt;</span> state<span>.</span>user<span>.</span>name<span>)</span><span>;</span>

<span>const</span> <span>{</span> name <span>}</span> <span>=</span> <span>useContext</span><span>(</span>UserContext<span>)</span><span>;</span></code></pre></div><p>Because in the first example, the component will only rerender if the user name changes. In the second example, the component will rerender when <em>any</em> part of the user changes. This matters a lot, to the point that we have to split contexts to avoid unnecessary rerenders.</p><div data-language="jsx"><pre><code>
<span>export</span> <span>const</span> <span>CoreAdminContext</span> <span>=</span> <span>props</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> <span>{</span>
        authProvider<span>,</span>
        basename<span>,</span>
        dataProvider<span>,</span>
        i18nProvider<span>,</span>
        store<span>,</span>
        children<span>,</span>
        history<span>,</span>
        queryClient<span>,</span>
    <span>}</span> <span>=</span> props<span>;</span>

    <span>return</span> <span>(</span>
        <span><span><span>&lt;</span><span>AuthContext.Provider</span></span> <span>value</span><span><span>=</span><span>{</span>authProvider<span>}</span></span><span>&gt;</span></span><span>
            </span><span><span><span>&lt;</span><span>DataProviderContext.Provider</span></span> <span>value</span><span><span>=</span><span>{</span>dataProvider<span>}</span></span><span>&gt;</span></span><span>
                </span><span><span><span>&lt;</span><span>StoreContextProvider</span></span> <span>value</span><span><span>=</span><span>{</span>store<span>}</span></span><span>&gt;</span></span><span>
                    </span><span><span><span>&lt;</span><span>QueryClientProvider</span></span> <span>client</span><span><span>=</span><span>{</span>queryClient<span>}</span></span><span>&gt;</span></span><span>
                        </span><span><span><span>&lt;</span><span>AdminRouter</span></span> <span>history</span><span><span>=</span><span>{</span>history<span>}</span></span> <span>basename</span><span><span>=</span><span>{</span>basename<span>}</span></span><span>&gt;</span></span><span>
                            </span><span><span><span>&lt;</span><span>I18nContextProvider</span></span> <span>value</span><span><span>=</span><span>{</span>i18nProvider<span>}</span></span><span>&gt;</span></span><span>
                                </span><span><span><span>&lt;</span><span>NotificationContextProvider</span></span><span>&gt;</span></span><span>
                                    </span><span><span><span>&lt;</span><span>ResourceDefinitionContextProvider</span></span><span>&gt;</span></span><span>
                                        </span><span>{</span>children<span>}</span><span>
                                    </span><span><span><span>&lt;/</span><span>ResourceDefinitionContextProvider</span></span><span>&gt;</span></span><span>
                                </span><span><span><span>&lt;/</span><span>NotificationContextProvider</span></span><span>&gt;</span></span><span>
                            </span><span><span><span>&lt;/</span><span>I18nContextProvider</span></span><span>&gt;</span></span><span>
                        </span><span><span><span>&lt;/</span><span>AdminRouter</span></span><span>&gt;</span></span><span>
                    </span><span><span><span>&lt;/</span><span>QueryClientProvider</span></span><span>&gt;</span></span><span>
                </span><span><span><span>&lt;/</span><span>StoreContextProvider</span></span><span>&gt;</span></span><span>
            </span><span><span><span>&lt;/</span><span>DataProviderContext.Provider</span></span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;/</span><span>AuthContext.Provider</span></span><span>&gt;</span></span>
    <span>)</span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p><img src="https://sean.cm/969193de97d4281d629f3ec8fd9a2922/crazy.gif" alt="this is crazy"/></p><p>Most of the time, when I have a performance problem with you, it&#39;s because of a large context, and I have no choice but to split it.</p><p>I don&#39;t want to use <code>useMemo</code> or <code>useCallback</code>. Useless rerenders is <em>your</em> problem, not <em>mine</em>. But you force me to do it. Look at how I&#39;m supposed to build a simple form input to make it reasonably fast:</p><div data-language="jsx"><pre><code>
<span>const</span> NestedInput <span>=</span> <span>memo</span><span>(</span>
    <span>(</span><span><span>{</span> register<span>,</span> formState<span>:</span> <span>{</span> isDirty <span>}</span> <span>}</span></span><span>)</span> <span>=&gt;</span> <span>(</span>
        <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>
            &lt;input </span><span>{</span><span>...</span><span>register</span><span>(</span><span>&#39;test&#39;</span><span>)</span><span>}</span><span> /&gt;
            </span><span>{</span>isDirty <span>&amp;&amp;</span> <span><span><span>&lt;</span>p</span><span>&gt;</span></span><span>This field is dirty</span><span><span><span>&lt;/</span>p</span><span>&gt;</span></span><span>}</span><span>
        </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
    <span>)</span><span>,</span>
    <span>(</span><span>prevProps<span>,</span> nextProps</span><span>)</span> <span>=&gt;</span>
        prevProps<span>.</span>formState<span>.</span>isDirty <span>===</span> nextProps<span>.</span>formState<span>.</span>isDirty<span>,</span>
<span>)</span><span>;</span>

<span>export</span> <span>const</span> <span>NestedInputContainer</span> <span>=</span> <span>(</span><span><span>{</span> children <span>}</span></span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> methods <span>=</span> <span>useFormContext</span><span>(</span><span>)</span><span>;</span>

    <span>return</span> <span><span><span>&lt;</span><span>NestedInput</span></span> <span><span>{</span><span>...</span><span>methods</span><span>}</span></span> <span>/&gt;</span></span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p>It&#39;s been 10 years, and you still have that flaw. How hard is it to offer a <code>useContextSelector</code>?</p><p><a href="https://github.com/reactjs/rfcs/pull/118">You&#39;re aware of this</a>, of course. But you&#39;re looking elsewhere, even though it&#39;s probably your most important performance bottleneck.</p><h2 id="i-want-none-of-this"><a href="#i-want-none-of-this" aria-label="i want none of this permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I Want None Of This</h2><p>You&#39;ve explained to me that I shouldn&#39;t access DOM nodes directly, for my own good. I never thought that the DOM was dirty, but as it disturbed you, I stopped doing it. Now I use <a href="https://en.reactjs.org/docs/refs-and-the-dom.html">refs</a>, as you asked me to.</p><p>But this ref stuff spreads like a virus. Most of the time, when a component uses a ref, it passes it to a child component. If that second component is a React component, it must forward the ref to another component, and so on, until one component in the tree finally renders an HTML element. So the codebase ends up forwarding refs everywhere, reducing the legibility in the process.</p><p>Forwarding refs could be as simple as this:</p><div data-language="jsx"><pre><code><span>const</span> <span>MyComponent</span> <span>=</span> <span>props</span> <span>=&gt;</span> <span><span><span>&lt;</span>div</span> <span>ref</span><span><span>=</span><span>{</span>props<span>.</span>ref<span>}</span></span><span>&gt;</span></span><span>Hello, </span><span>{</span>props<span>.</span>name<span>}</span><span>!</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>;</span></code></pre></div><p>But no, that would be too easy. Instead, you&#39;ve invented this <code>react.forwardRef</code> abomination:</p><div data-language="jsx"><pre><code><span>const</span> MyComponent <span>=</span> React<span>.</span><span>forwardRef</span><span>(</span><span>(</span><span>props<span>,</span> ref</span><span>)</span> <span>=&gt;</span> <span>(</span>
    <span><span><span>&lt;</span>div</span> <span>ref</span><span><span>=</span><span>{</span>ref<span>}</span></span><span>&gt;</span></span><span>Hello, </span><span>{</span>props<span>.</span>name<span>}</span><span>!</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
<span>)</span><span>)</span><span>;</span></code></pre></div><p>Why is it so hard, you may ask? Because <a href="https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref">you simply can&#39;t make a generic component (in the sense of Typescript) with <code>forwardRef</code></a>.</p><div data-language="tsx"><pre><code>
<span>const</span> MyComponent <span>=</span> <span><span><span>&lt;</span><span>T</span></span><span>&gt;</span></span><span>(props: &lt;ComponentProps&lt;T&gt;) =&gt; (
    </span><span><span><span>&lt;</span>div</span> <span>ref</span><span><span>=</span><span>{</span><span>}</span></span><span>&gt;</span></span><span>Hello, </span><span>{</span>props<span>.</span>name<span>}</span><span>!</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>
);</span></code></pre></div><p>Besides, you&#39;ve decided that refs are not only DOM nodes, they&#39;re the equivalent of <code>this</code> for function components. Or, to put it otherwise, &#34;state that doesn&#39;t trigger a rerender&#34;. In my experience, each time I have to use such a ref, it&#39;s because of you - because your <code>useEffect</code> API is too weird. In other terms, <code>refs</code> are a solution to a problem you created.</p><h2 id="the-butterfly-use-effect"><a href="#the-butterfly-use-effect" aria-label="the butterfly use effect permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Butterfly (use) Effect</h2><p>Speaking of <code>useEffect</code>, I have a personal problem with it. I recognize that it&#39;s an elegant innovation that covers mount, unmount and update events in one unified API. But how is this supposed to count as progress?</p><div data-language="jsx"><pre><code>
<span>class</span> <span>MyComponent</span> <span>{</span>
    <span>componentWillUnmount</span><span>:</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        
    <span>}</span><span>;</span>
<span>}</span>


<span>const</span> <span>MyComponent</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
            
        <span>}</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p>You see, this line alone represents the griefs I have with your <code>useEffect</code>:</p><p>I see such cryptic suites of cabalistic signs all over my code, and they&#39;re all because of <code>useEffect</code>. Plus, you force me to keep track of dependencies, like in this code:</p><div data-language="jsx"><pre><code>
<span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span>
        query<span>.</span>page <span>&lt;=</span> <span>0</span> <span>||</span>
        <span>(</span><span>!</span>isFetching <span>&amp;&amp;</span> query<span>.</span>page <span>&gt;</span> <span>1</span> <span>&amp;&amp;</span> data<span>?.</span>length <span>===</span> <span>0</span><span>)</span>
    <span>)</span> <span>{</span>
        
        queryModifiers<span>.</span><span>setPage</span><span>(</span><span>1</span><span>)</span><span>;</span>
        <span>return</span><span>;</span>
    <span>}</span>
    <span>if</span> <span>(</span>total <span>==</span> <span>null</span><span>)</span> <span>{</span>
        <span>return</span><span>;</span>
    <span>}</span>
    <span>const</span> totalPages <span>=</span> Math<span>.</span><span>ceil</span><span>(</span>total <span>/</span> query<span>.</span>perPage<span>)</span> <span>||</span> <span>1</span><span>;</span>
    <span>if</span> <span>(</span><span>!</span>isFetching <span>&amp;&amp;</span> query<span>.</span>page <span>&gt;</span> totalPages<span>)</span> <span>{</span>
        
        
        queryModifiers<span>.</span><span>setPage</span><span>(</span>totalPages<span>)</span><span>;</span>
    <span>}</span>
<span>}</span><span>,</span> <span>[</span>isFetching<span>,</span> query<span>.</span>page<span>,</span> query<span>.</span>perPage<span>,</span> data<span>,</span> queryModifiers<span>,</span> total<span>]</span><span>)</span><span>;</span></code></pre></div><p>See this last line? I have to make sure I include all reactive variables in the dependency array. And I thought that <a href="https://en.wikipedia.org/wiki/Reference_counting">reference counting</a> was a native feature of all languages with a garbage collector. But no, I have to micromanage dependencies myself because you don&#39;t know how to do it.</p><p><img src="https://sean.cm/506e61839a76358ee103c1cd4d378efd/seriously.gif" alt="Seriously?"/></p><p>And very often, one of these dependencies is a function that I created. Because you don&#39;t make the difference between a variable and a function, I have to tell you, using <code>useCallback</code>, that you shouldn&#39;t rerender for anything. Same consequence, same final cryptic signature:</p><div data-language="jsx"><pre><code><span>const</span> handleClick <span>=</span> <span>useCallback</span><span>(</span>
    <span>async</span> <span>event</span> <span>=&gt;</span> <span>{</span>
        event<span>.</span><span>persist</span><span>(</span><span>)</span><span>;</span>
        <span>const</span> type <span>=</span>
            <span>typeof</span> rowClick <span>===</span> <span>&#39;function&#39;</span>
                <span>?</span> <span>await</span> <span>rowClick</span><span>(</span>id<span>,</span> resource<span>,</span> record<span>)</span>
                <span>:</span> rowClick<span>;</span>
        <span>if</span> <span>(</span>type <span>===</span> <span>false</span> <span>||</span> type <span>==</span> <span>null</span><span>)</span> <span>{</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span><span>[</span><span>&#39;edit&#39;</span><span>,</span> <span>&#39;show&#39;</span><span>]</span><span>.</span><span>includes</span><span>(</span>type<span>)</span><span>)</span> <span>{</span>
            <span>navigate</span><span>(</span><span>createPath</span><span>(</span><span>{</span> resource<span>,</span> id<span>,</span> type <span>}</span><span>)</span><span>)</span><span>;</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span>type <span>===</span> <span>&#39;expand&#39;</span><span>)</span> <span>{</span>
            <span>handleToggleExpand</span><span>(</span>event<span>)</span><span>;</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>if</span> <span>(</span>type <span>===</span> <span>&#39;toggleSelection&#39;</span><span>)</span> <span>{</span>
            <span>handleToggleSelection</span><span>(</span>event<span>)</span><span>;</span>
            <span>return</span><span>;</span>
        <span>}</span>
        <span>navigate</span><span>(</span>type<span>)</span><span>;</span>
    <span>}</span><span>,</span>
    <span>[</span>
        
        rowClick<span>,</span>
        id<span>,</span>
        resource<span>,</span>
        record<span>,</span>
        navigate<span>,</span>
        createPath<span>,</span>
        handleToggleExpand<span>,</span>
        handleToggleSelection<span>,</span>
    <span>]</span><span>,</span>
<span>)</span><span>;</span></code></pre></div><p>A simple component with a few event handlers and lifecycle callbacks becomes a pile of gibberish code just because I have to manage this dependency hell. All that is because you&#39;ve decided that a component may execute an arbitrary number of times.</p><p>So for example, if I want to make a counter that increases every second and every time the user clicks on a button, I have to do this:</p><div data-language="jsx"><pre><code><span>function</span> <span>Counter</span><span>(</span><span>)</span> <span>{</span>
    <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>

    <span>const</span> handleClick <span>=</span> <span>useCallback</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>setCount</span><span>(</span><span>count</span> <span>=&gt;</span> count <span>+</span> <span>1</span><span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span>setCount<span>]</span><span>)</span><span>;</span>

    <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>const</span> id <span>=</span> <span>setInterval</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
            <span>setCount</span><span>(</span><span>count</span> <span>=&gt;</span> count <span>+</span> <span>1</span><span>)</span><span>;</span>
        <span>}</span><span>,</span> <span>1000</span><span>)</span><span>;</span>
        <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>clearInterval</span><span>(</span>id<span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span>setCount<span>]</span><span>)</span><span>;</span>

    <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>&#39;The count is now&#39;</span><span>,</span> count<span>)</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span>count<span>]</span><span>)</span><span>;</span>

    <span>return</span> <span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span>handleClick<span>}</span></span><span>&gt;</span></span><span>Click Me</span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span><span>;</span>
<span>}</span></code></pre></div><p>While if you knew how to keep track of dependencies, I could simply write:</p><div data-language="jsx"><pre><code><span>function</span> <span>Counter</span><span>(</span><span>)</span> <span>{</span>
    <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>createSignal</span><span>(</span><span>0</span><span>)</span><span>;</span>

    <span>const</span> <span>handleClick</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>setCount</span><span>(</span><span>count</span><span>(</span><span>)</span> <span>+</span> <span>1</span><span>)</span><span>;</span>

    <span>const</span> timer <span>=</span> <span>setInterval</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setCount</span><span>(</span><span>count</span><span>(</span><span>)</span> <span>+</span> <span>1</span><span>)</span><span>,</span> <span>1000</span><span>)</span><span>;</span>

    <span>onCleanup</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>clearInterval</span><span>(</span>timer<span>)</span><span>)</span><span>;</span>

    <span>createEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span><span>&#39;The count is now&#39;</span><span>,</span> <span>count</span><span>(</span><span>)</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>

    <span>return</span> <span><span><span>&lt;</span>button</span> <span>onClick</span><span><span>=</span><span>{</span>handleClick<span>}</span></span><span>&gt;</span></span><span>Click Me</span><span><span><span>&lt;/</span>button</span><span>&gt;</span></span><span>;</span>
<span>}</span></code></pre></div><p>That&#39;s valid <a href="https://www.solidjs.com/">Solid.js</a> code, by the way.</p><p><img src="https://sean.cm/e0ef7d4b355b9ba20548b64a9501ad79/mind-blown.gif" alt="Mind blown"/></p><p>Finally, using <code>useEffect</code> wisely requires reading <a href="https://overreacted.io/a-complete-guide-to-useeffect/">a 53 pages dissertation</a>. I must say, that is a terrific piece of documentation. But if a library requires me to go through dozens of pages to use it properly, isn&#39;t it a sign that it&#39;s not well designed?</p><h2 id="makeup-your-mind"><a href="#makeup-your-mind" aria-label="makeup your mind permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Makeup Your Mind</h2><p>Since we&#39;ve already talked about the leaky abstraction that is <code>useEffect</code>, you&#39;ve tried to improve it. You&#39;ve introduced me to <a href="https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md"><code>useEvent</code></a>, <a href="https://reactjs.org/docs/hooks-reference.html#useinsertioneffect"><code>useInsertionEffect</code></a>, <a href="https://reactjs.org/docs/hooks-reference.html#usedeferredvalue"><code>useDeferredValue</code></a>, <a href="https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore"><code>useSyncWithExternalStore</code></a>, and other gimmicks.</p><p>And they do make you look beautiful:</p><div data-language="jsx"><pre><code><span>function</span> <span>subscribe</span><span>(</span><span>callback</span><span>)</span> <span>{</span>
    window<span>.</span><span>addEventListener</span><span>(</span><span>&#39;online&#39;</span><span>,</span> callback<span>)</span><span>;</span>
    window<span>.</span><span>addEventListener</span><span>(</span><span>&#39;offline&#39;</span><span>,</span> callback<span>)</span><span>;</span>
    <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        window<span>.</span><span>removeEventListener</span><span>(</span><span>&#39;online&#39;</span><span>,</span> callback<span>)</span><span>;</span>
        window<span>.</span><span>removeEventListener</span><span>(</span><span>&#39;offline&#39;</span><span>,</span> callback<span>)</span><span>;</span>
    <span>}</span><span>;</span>
<span>}</span>

<span>function</span> <span>useOnlineStatus</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>useSyncExternalStore</span><span>(</span>
        subscribe<span>,</span> 
        <span>(</span><span>)</span> <span>=&gt;</span> navigator<span>.</span>onLine<span>,</span> 
        <span>(</span><span>)</span> <span>=&gt;</span> <span>true</span><span>,</span> 
    <span>)</span><span>;</span>
<span>}</span></code></pre></div><p>But to me, this is lipstick on a pig. If reactive effects were easier to use, you wouldn&#39;t need all these other hooks.</p><p>To put it otherwise: you have no other solution than to grow the core API more and more over time. For people like me, who have to maintain huge codebases, this constant API inflation is a nightmare. Seing you wear more and more makeup everyday is a constant reminder of what you&#39;re trying to hide.</p><h2 id="strict-machine"><a href="#strict-machine" aria-label="strict machine permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict Machine</h2><p>Your hooks are a great idea, but they come at a cost. And this cost is the <a href="https://reactjs.org/docs/hooks-rules.html">Rules of Hooks</a>. They aren&#39;t easy to memorize, they aren&#39;t easy to put into practice. But they force me to spend time on code that shouldn&#39;t need it.</p><p>For instance, I have an &#34;inspector&#34; component that can be dragged around by the end user. Users can also hide the inspector. When hidden, the inspector component renders nothing. So I would very much like to &#34;leave early&#34;, and avoid registering event listeners for nothing.</p><div data-language="jsx"><pre><code><span>const</span> <span>Inspector</span> <span>=</span> <span>(</span><span><span>{</span> isVisible <span>}</span></span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span>isVisible<span>)</span> <span>{</span>
        
        <span>return</span> <span>null</span><span>;</span>
    <span>}</span>
    <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        
        <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
            
        <span>}</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>
    <span>return</span> <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>...</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p>But no, that&#39;s against the Rules of Hooks, as the <code>useEffect</code> hook may or may not be executed depending on props. Instead, I have to add a condition to all effects so that they leave early when the <code>isVisible</code> prop is false:</p><div data-language="jsx"><pre><code><span>const</span> <span>Inspector</span> <span>=</span> <span>(</span><span><span>{</span> isVisible <span>}</span></span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>if</span> <span>(</span><span>!</span>isVisible<span>)</span> <span>{</span>
            <span>return</span><span>;</span>
        <span>}</span>
        
        <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
            
        <span>}</span><span>;</span>
    <span>}</span><span>,</span> <span>[</span>isVisible<span>]</span><span>)</span><span>;</span>

    <span>if</span> <span>(</span><span>!</span>isVisible<span>)</span> <span>{</span>
        
        <span>return</span> <span>null</span><span>;</span>
    <span>}</span>
    <span>return</span> <span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>...</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>;</span>
<span>}</span><span>;</span></code></pre></div><p>As a consequence, all the effects will have the <code>isVisible</code> prop in their dependencies and potentially run too often (which can harm performance). I know, I should create an intermediate component that just rendrs nothing if <code>isVisible</code> is false. But why? This is only one example of the Rules of Hooks getting in my way - there are many others. One consequence is that a significant portion of the code of my React codebases is spent <em>satisfying the Rules of Hooks</em>.</p><p>The Rules of Hooks are a consequence of implementation detail - the implementation you chose for your hooks. But it doesn&#39;t have to be like that.</p><h2 id="youve-been-gone-too-long"><a href="#youve-been-gone-too-long" aria-label="youve been gone too long permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>You&#39;ve Been Gone Too Long</h2><p>You&#39;ve been around since 2013, and you&#39;ve made a point of keeping backward compatibility as long as possible. And I thank you for that - that&#39;s one of the reasons why I&#39;ve been able to build a huge codebase with you. But this backward compatibility comes at a cost: documentation and community resources are, at best outdated, at worst, misleading.</p><p>For instance, when I search for &#34;React mouse position&#34; on StackOverflow, the first result suggests this solution, which was already outdated React a century ago:</p><div data-language="jsx"><pre><code><span>class</span> <span>ContextMenu</span> <span>extends</span> <span>React<span>.</span>Component</span> <span>{</span>
    state <span>=</span> <span>{</span>
        visible<span>:</span> <span>false</span><span>,</span>
    <span>}</span><span>;</span>

    <span>render</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>(</span>
            <span><span><span>&lt;</span>canvas</span>
                <span>ref</span><span><span>=</span><span>&#34;</span>canvas<span>&#34;</span></span>
                <span>className</span><span><span>=</span><span>&#34;</span>DrawReflect<span>&#34;</span></span>
                <span>onMouseDown</span><span><span>=</span><span>{</span><span>this</span><span>.</span>startDrawing<span>}</span></span>
            <span>/&gt;</span></span>
        <span>)</span><span>;</span>
    <span>}</span>

    <span>startDrawing</span><span>(</span><span>e</span><span>)</span> <span>{</span>
        console<span>.</span><span>log</span><span>(</span>
            e<span>.</span>clientX <span>-</span> e<span>.</span>target<span>.</span>offsetLeft<span>,</span>
            e<span>.</span>clientY <span>-</span> e<span>.</span>target<span>.</span>offsetTop<span>,</span>
        <span>)</span><span>;</span>
    <span>}</span>

    <span>drawPen</span><span>(</span><span>cursorX<span>,</span> cursorY</span><span>)</span> <span>{</span>
        
        <span>this</span><span>.</span>context<span>.</span><span>updateDrawInfo</span><span>(</span><span>{</span>
            cursorX<span>:</span> cursorX<span>,</span>
            cursorY<span>:</span> cursorY<span>,</span>
            drawingNow<span>:</span> <span>true</span><span>,</span>
        <span>}</span><span>)</span><span>;</span>

        
        <span>const</span> canvas <span>=</span> <span>this</span><span>.</span>refs<span>.</span>canvas<span>;</span>
        <span>const</span> canvasContext <span>=</span> canvas<span>.</span><span>getContext</span><span>(</span><span>&#39;2d&#39;</span><span>)</span><span>;</span>
        canvasContext<span>.</span><span>beginPath</span><span>(</span><span>)</span><span>;</span>
        canvasContext<span>.</span><span>arc</span><span>(</span>
            cursorX<span>,</span>
            cursorY <span>,</span>
            <span>1</span> <span>,</span>
            <span>0</span> <span>,</span>
            <span>2</span> <span>*</span> Math<span>.</span><span>PI</span> <span>,</span>
        <span>)</span><span>;</span>
        canvasContext<span>.</span><span>stroke</span><span>(</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span></code></pre></div><p><img src="https://sean.cm/1a93743b9ce394ebc9f3bab37a686dc1/yuck.gif" alt="yuck"/></p><p>When I look for an npm package for a particular React feature, I mostly find abandoned packages with old, outdated syntax. Take <a href="https://github.com/react-grid-layout/react-draggable">react-draggable</a> for instance. It&#39;s the de facto standard for implementing drag and drop with React. It has <a href="https://github.com/react-grid-layout/react-draggable/issues">many open issues</a>, and <a href="https://github.com/react-grid-layout/react-draggable/graphs/contributors">low development activity</a>. Perhaps it&#39;s because it&#39;s still class components based - it&#39;s hard to attract contributors when the codebase is so old.</p><p>As for your <a href="https://reactjs.org/docs/state-and-lifecycle.html">official docs</a>, they still recommend using <code>componentDidMount</code> and <code>componentWillUnmount</code> instead of <code>useEffect</code>. The core team has been working on a new version, called <a href="https://beta.reactjs.org/">Beta docs</a>, <a href="https://github.com/reactjs/reactjs.org/issues/3308">for the last two years</a>. They&#39;re still not ready for prime time.</p><p>All in all, the loooong migration to hooks is still not finished, and it has produced a notable fragmentation in the community. New developers struggle to find their way in the React ecosystem, and old developers strive to keep up with the latest developments.</p><h2 id="family-affair"><a href="#family-affair" aria-label="family affair permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Family Affair</h2><p>At first, your father Facebook looked super cool. Facebook wanted to &#34;Bring people closer together&#34; - count me in! Whenever I visited your parents, I met new friends.</p><p>But then things got messy. Your parents enrolled in a <a href="https://en.wikipedia.org/wiki/Facebook%E2%80%93Cambridge_Analytica_data_scandal">crowd manipulation scheme</a>. They invented the concept of &#34;Fake News&#34;. They started keeping files on everyone, without their consent. Visiting your parents became scary - to the point that I&#39;ve <a href="https://www.facebook.com/help/delete_account">deleted my own Facebook account</a> a few years ago.</p><p>I know - you can&#39;t hold children accountable for the actions of their parents. But you still live with them. They fund your development. They&#39;re your biggest users. <strong>You depend on them</strong>. If one day, they fall because of their behavior, you&#39;ll fall with them.</p><p>Other major JS frameworks have been able to break free from their parents. They became independent and joined a foundation called <a href="https://openjsf.org/">The OpenJS Foundation</a>. Node.js, Electron, webpack, lodash, eslint, and even Jest are now funded by a collective of companies and individuals. Since they can, you can, too. But you don&#39;t. You&#39;re stuck with your parents. Why?</p><p><img src="https://sean.cm/f40620af5062b582193c0db1858a5ad9/vernon.gif" alt="Vernon"/></p><h2 id="its-not-me-its-you"><a href="#its-not-me-its-you" aria-label="its not me its you permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>It&#39;s Not Me, It&#39;s You</h2><p>You and I have the same purpose in life: to help developers build better UIs. I&#39;m doing it with <a href="https://marmelab.com/react-admin/">React-admin</a>. So I understand your challenges, and the tradeoffs you have to make. Your job is not an easy one, and you&#39;re probably solving tons of problems I even have no idea of.</p><p>But I find myself constantly trying to hide your flaws. When I talk about you, I never mention the issues above - I just pretend we&#39;re a great couple, with no clouds on the horizon. In react-admin, I introduce APIs that remove the hassle of dealing with you directly. And when people complain about react-admin, I do my best to address their problem - when most of the time, they have a problem with you. Being a framework developer, I&#39;m also on the front line. I get all the problems before everyone else.</p><p>I&#39;ve looked at other frameworks. They have their own flaws - Svelte is not JavaScript, SolidJS has nasty traps like:</p><div data-language="jsx"><pre><code>
<span>const</span> <span>BlueText</span> <span>=</span> <span>props</span> <span>=&gt;</span> <span><span><span>&lt;</span>span</span> <span><span>style</span><span><span>=</span><span>&#34;</span><span><span>color</span><span>:</span> blue</span><span>&#34;</span></span></span><span>&gt;</span></span><span>{</span>props<span>.</span>text<span>}</span><span><span><span>&lt;/</span>span</span><span>&gt;</span></span><span>;</span>


<span>const</span> <span>BlueText</span> <span>=</span> <span>(</span><span><span>{</span> text <span>}</span></span><span>)</span> <span>=&gt;</span> <span><span><span>&lt;</span>span</span> <span><span>style</span><span><span>=</span><span>&#34;</span><span><span>color</span><span>:</span> blue</span><span>&#34;</span></span></span><span>&gt;</span></span><span>{</span>text<span>}</span><span><span><span>&lt;/</span>span</span><span>&gt;</span></span><span>;</span></code></pre></div><p>But they don&#39;t have <strong>your</strong> flaws. The flaws that make me want to cry sometimes. The flaws that become so annoying after years of dealing with them. The flaws that make me want to try something else. In comparison, all other frameworks are refreshing.</p><h2 id="i-cant-quit-you-baby"><a href="#i-cant-quit-you-baby" aria-label="i cant quit you baby permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>I Can&#39;t Quit You Baby</h2><p>The problem is that I can&#39;t leave you.</p><p>First, I love your friends. <a href="https://mui.com/">MUI</a>, <a href="https://remix.run/">Remix</a>, <a href="https://tanstack.com/query/v4">react-query</a>, <a href="https://testing-library.com/docs/react-testing-library/intro/">react-testing-library</a>, <a href="https://tanstack.com/table/v8">react-table</a>... When I&#39;m with those guys, I always do amazing things. They make me a better developer - they make me a better person. I can&#39;t leave you without leaving them.</p><blockquote><p>It&#39;s the ecosystem, stupid.</p></blockquote><p>I can&#39;t deny that you have the best community and the best third-party modules. But honestly, it&#39;s a pity that developers choose you not for your qualities, but for the qualities of your ecosystem.</p><p>Second, I&#39;ve invested too much in you. I&#39;ve built <a href="https://github.com/marmelab/react-admin/pulse">a huge codebase</a> with you that can&#39;t possibly be migrated to another framework without turning crazy. I&#39;ve built <a href="https://marmelab.com/ra-enterprise/">a business</a> around you that lets me develop open-source software in a sustainable way.</p><p>I depend on you.</p><h2 id="call-me-maybe"><a href="#call-me-maybe" aria-label="call me maybe permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Call Me Maybe</h2><p>I&#39;ve been very transparent about my feelings. Now I&#39;d like you to do the same. Do you plan to address the points I&#39;ve listed above, and if so, when? How do you feel about library developers like me? Should I forget about you, and move on to something else? Or should we stay together, and work on our relationship?</p><p>What&#39;s next for us? You tell me.</p><p><img src="https://sean.cm/51a329a16eb9d96cc52b9460c0dd1911/hi.gif" alt="Hi"/></p></div></div>
  </body>
</html>
