<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.janetacarr.com/clojure-needs-a-rails/">Original</a>
    <h1>Clojure needs a Rails</h1>
    
    <div id="readability-page-1" class="page"><div id="gh-main">
    <article>
        <header>
        <p><time datetime="2022-07-30">Jul 30, 2022</time>
        </p>

    

        <p>I think there&#39;s another reason this problem persists in Clojure. There&#39;s no Rails for Clojure. </p>
</header>

    <figure>
        <img srcset="https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 300w,
                    https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 720w,
                    https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 960w,
                    https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 1200w,
                    https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 2000w" sizes="(max-width: 1200px) 100vw, 1200px" src="https://images.unsplash.com/photo-1523427373578-fa4bbfc4389a?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDV8fHJhaWxzfGVufDB8fHx8MTY1OTE5OTk5OQ&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000" alt="Clojure needs a Rails, but not for the reason you think"/>
            <figcaption>Photo by <a href="https://unsplash.com/@julianhochgesang?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Julian Hochgesang</a> / <a href="https://unsplash.com/?utm_source=ghost&amp;utm_medium=referral&amp;utm_campaign=api-credit">Unsplash</a></figcaption>
    </figure>

<section>
    <h3 id="first-a-quick-story">First, a quick story</h3><p>Suzi, a software engineer of suitable caliber, loves writing Clojure. At her ployglot employer, she often uses her technical freedom to bat for Clojure every chance she gets. One day her manager taps her for an opportunity, the company wants to build a scrappy, lean internal tooling team to build tools for sales, marketing, and so on. Â Perfect. </p><p>One the first day of the tooling team, the marketing team wants to move the website to something custom and use Stripe for payments from the lower segment customers. No problem. Clojure&#39;s web stack is very mature and will be sinch to whip-up this project for marketing. The website was easy enough to tackle, a little ring here, a little hiccup there, and presto! She has her website after just a couple of weeks of coding. </p><p>Next on her docket was the Stripe payment integration. Should be the same thing as the website. Suzi sees there are a number of Stripe Clojure libraries to choose from. </p><p>&#34;Perfect&#34; Suzi thinks to herself as she were in developer heaven. </p><p>Upon her first test with the repl, she gets an exception. She inspects her Stripe library by looking at the master branch on Github: <strong>Last commit 7 years ago. </strong>F**k. It&#39;s just some simple requests with clj-http and cheshire. Next library. <strong>Last commit 3 years ago. </strong></p><p><strong>&#34;</strong>Okay, looking better&#34; Suzi thinks to herself as she lets out a sigh of relief. </p><p>This library is almost the same thing as the last one, simple and only covering a fraction the API. Unsure if this new library actually keeps with the current API contract, no support for lazy pagination like the Java SDK, and it suffers from the Log4j vulnerability. <em>Fantastic, so much for that estimate. </em>The next day during stand up, Suzi explains to her colleagues that the project is going to take a bit longer because she didn&#39;t anticipate having to update libraries and implement features the Java crowd gets for free. </p><p>Fast forward a couple months. After the marketing website hurdles, a new project from IT is requested. They want a syslog relay for SOC2 monitoring stuff. That doesn&#39;t really sound like SOC2 compliance to Suzi, but she has her Clojure hammer and a good salary, so she gets to work. Once she finishes the requirments, she begins researching to give an estimate of how long the project will take, only to find there is no syslog server library for Clojure that she can find. She will have to write one herself. During stand up the next day, Suzi delivers the estimate to her team with her line manager, Sam, present. </p><p>&#34;It&#39;ll probably take two months to build this relay because there&#39;s no syslog server library for Clojure.&#34; she says.</p><p>&#34;Oh wow, I didn&#39;t think it would take <em>that long</em>.&#34; Sam says.</p><p>Dillion, a colleague in the standup, says &#34;Go has great syslog server library and even supports Rsyslog! Maybe you could use that&#34;. </p><p>&#34;That&#39;s probably a good idea, Suzi can estimate how long it&#39;ll take using Go?&#34; Sam replies.</p><p>Later that day, Suzi estimates the project with Go instead. The business case for Go is very strong now. Sh*t.</p><h3 id="strange-yet-familiar">Strange yet familiar </h3><p>If Suzi&#39;s story resonated with you, you&#39;re like me and dozens of other Clojure developers. Clojure suffers from missing or rotting software libraries<em> a lot</em>. Developers love writing code, but it&#39;s really hard to sell management on building an entire library when another language has so many batteries built in.</p><p>In a perfect world of open-source software, companies would give back to the community by building libraries they need and licenesing them in the wild. While some software companies do this, in my experience, it&#39;s usually the opposite that happens, most companies don&#39;t give back, but I think there&#39;s another reason this problem persists in Clojure. <strong>There&#39;s no Rails for Clojure. </strong></p><h3 id="railing-against-rails">Railing against Rails</h3><p>Because there is no Rails for Clojure, a lot of open-source software efforts in the Clojure community go towards developing web framworks, libraries, toolkits, and so on, trying to fill this &#34;Rails for Clojure&#34; vaccum. Yet, the web stack for Clojure is very mature. </p><figure><pre><code>- Ring (server)
- Compojure (router)
- Edge (framework)
- Bidi (router)
- Yada (library, bidi + aleph)
- Aleph (server)
- Reitit (router)
- Luminus (many libraries)
- Kit (framework)
- Pedestal (many libraries)
- Selmer (templates)
- Hiccup (HTML DSL)</code></pre><figcaption>Non-exhaustive list of Clojure web stuff in no particular order</figcaption></figure><p>Every time I see Clojure on the front page of Hacker News, it&#39;s a post talking about a new <strong>web</strong> framework, library, toolkit, or abstraction for Clojure, and (usually) the maintainer has abandoned the project since revealing it to the world. My theory is, this causes a lack of effort expended on mundane libraries. It&#39;s not the most fun thing to build. I get it. Really, I do, but lack of these API-wrapping and protocol-handling libraries put Clojure at a significant disadvantage in the business of software.</p><h3 id="interop-for-the-mundane">Interop for the mundane</h3><p><em>Why not just use Java and Javascript interop for the mundane, everyday libraries, is there something wrong with that?</em> </p><p>It&#39;s possible, but interop comes with caveats.</p><ul><li>Interop can be frustrating with big frameworks. </li><li>Interop relies heavily on reflection, and may require type hinting once it becomes a performance problem. </li><li>Interop implies the use of side-effects since we&#39;re relying on Java objects. </li><li>Java sequences and Collections may require a <code>clojure.walk/postwalk</code> and <code>zipmap</code> with coercion to get a good Clojure container/sequence/collection.</li><li>No variodic arguments to <code>deftype</code> or <code>defprotocol</code> for technical reasons, meaning overloading isn&#39;t happening when extending Java types.</li></ul><p>If we used interop for everything mundane, Clojure would really just be an S-expression shaped husk over Java code. Not a very good solution. </p><div><p>ðŸ’¡</p><p>A lot of the mundane Clojure libraries do actually wrap a Java SDK, giving us a clean, functional interface to work with. I think this is fine, but tough to keep up with if the right abstractions aren&#39;t used. Amazonica, a Clojure library for AWS, does this quite well by using macros to intern new Clojure functions that wrap Java methods, transforming types between Clojure and Java land. It takes a single function call to turn a new AWS package into a set of usable libraries.</p></div><h3 id="rallying-on-the-tracks">Rallying on the tracks</h3><p>Other programming languages have their definitive web framework. Ruby has Rails, Python has Django, Java has Play, Elixir has Pheonix. I know there are other web framework, libraries, toolkit, and so on for each of these programming languages, but their communities always seems to rally around each of these projects. Even a language as niche as Elixir, has it&#39;s own &#34;Rails&#34; (so to speak). Â </p><p>Why doesn&#39;t Clojure do this? From my observation, the Clojure community seems a bit more de-centralized and laid back. It&#39;s awesome, but can we please just get together at the next <a href="https://blog.janetacarr.com/clojure-needs-a-rails/clojure-conj.org">Conj</a> conference decide what our &#34;Rails&#34; is going to be? That way we can get down to business. </p><div><p><em>As always, You can also join the discussion about this post on twitter, Hacker News, or reddit if you think I&#39;m wrong. If you like what I have to say, subscribe for the next post, follow me on twitter <a href="https://twitter.com/janetacarr">@janetacarr</a> , or don&#39;t </em>Â¯\_(ãƒ„)_/Â¯ <em>.</em></p></div>
</section>

    
    </article>
</div></div>
  </body>
</html>
