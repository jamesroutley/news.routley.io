<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/wenzellabs/the_NSA_selector">Original</a>
    <h1>The NSA Selector</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">you can purchase the NSA selector at <a href="https://lectronz.com/products/thensaselector" rel="nofollow">my little shop over at lectronz</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_top.jpg"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_top.jpg" alt="the NSA selector top"/></a>  <a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_front.jpg"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_front.jpg" alt="the NSA selector front"/></a>   <a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_back.jpg"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_back.jpg" alt="the NSA selector back"/></a></p>

<p dir="auto">the NSA selector is a eurorack module with two ethernet jacks and one audio output.
any bit on the network will be sent to the audio output.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_selector_switch_schematic.png"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_selector_switch_schematic.png" alt="the NSA selector schematic"/></a></p>

<p dir="auto">this is not an &#34;audio interface&#34;. we do not play back any &#34;format&#34; such as RTP
or MP3 or WAV or the like. the eurorack module does not &#34;speak&#34; any protocol.
all traffic is forwarded from one network jack to the other unmodified.
it&#39;s just tapped, intercepted to convert it to audio.</p>

<p dir="auto">watch <a href="https://www.youtube.com/watch?v=vfgySTaM1TI" rel="nofollow">the NSA selector video</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_selector_LAN_flow.png"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_selector_LAN_flow.png" alt="the NSA selector LAN flow"/></a></p>

<p dir="auto">in the folder <a href="https://github.com/wenzellabs/the_NSA_selector/blob/main/sequencer"><code>sequencer/</code></a> you find a very simple shell script, that mimics a
sequencer by network pings of different size.</p>

<p dir="auto">if we transfer uncompressed, unencrypted images e.g. in the .bmp format,
we can hear the pixels. together with a small http server which is available
in the <a href="https://github.com/wenzellabs/the_NSA_selector/blob/main/fileserver"><code>fileserver/</code></a> folder. you can listen to your photos or drawing from
gimp (or photoshop in case you&#39;re a rich musician).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">encode audio to NSA&#39;s native format</h3><a id="user-content-encode-audio-to-nsas-native-format" aria-label="Permalink: encode audio to NSA&#39;s native format" href="#encode-audio-to-nsas-native-format"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">the NSA selector&#39;s native format is 4 bits and 25MS/s which originates from the
typical PHY MAC interface called <a href="https://en.wikipedia.org/wiki/Media-independent_interface" rel="nofollow">MII</a>.</p>
<p dir="auto">at first glance 4 bit audio appears to be really crappy, but we can use the
ridiculously high sample rate. what we need is called a delta-sigma modulator.
this lets us convert a simple mono 16 bit 48kHz .wav file to a 4 bit 25MHz
.nsa file.</p>
<p dir="auto">note that this saturates the link and through the added headers from ethernet,
IP, UDP or TCP and HTTP you&#39;ll get artifacts. and happy litte retransmissions.</p>
<p dir="auto">far from HiFi quality, but the method adds a lot of spice and excitement.</p>
<p dir="auto">there&#39;s a converter in the <a href="https://github.com/wenzellabs/the_NSA_selector/blob/main/upconverter"><code>upconverter/</code></a> folder.</p>

<p dir="auto">here&#39;s what a network packet can look like on the wire:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/wenzellabs/the_NSA_selector/blob/main/pics/NSA_selector_network_packet.png"><img src="https://github.com/wenzellabs/the_NSA_selector/raw/main/pics/NSA_selector_network_packet.png" alt="the NSA selector network packet"/></a></p>
<p dir="auto">and we&#39;re listening in on the &#34;4B&#34; side of the &#34;4B5B encoding&#34; layer.
so the first bits we hear are <a href="https://en.wikipedia.org/wiki/Ethernet_frame#Preamble_and_start_frame_delimiter" rel="nofollow">the preamble of the ethernet frame</a> and we follow up the stack. e.g. ethernet, IP, TCP, HTTP, BMP.</p>

<p dir="auto">there&#39;s a neat little idea I had during development to add a delay to say a
sequencer pattern. actually it&#39;s more like an echo than a delay since it lacks
precise timing control.
ssh log into the remote machine that creates the e.g. ping traffic. then dump
the network traffic to the text console to double it. you can increase verbosity
levels of the dump to crank up the echo until total saturation of the link
and lost captured packets. see the video if this explanation is not clear to you.</p>
<p dir="auto">commands I usually use:</p>
<p dir="auto"><code>tcpdump -ni eth0</code></p>
<p dir="auto"><code>tcpdump -nvi eth0</code></p>
<p dir="auto"><code>tcpdump -nvi eth0 icmp</code></p>
<p dir="auto"><code>tcpdump -nvxi eth0</code></p>
<p dir="auto"><code>tcpdump -nxi eth0</code></p>
<p dir="auto"><code>tcpdump -nxi eth0 not port ssh</code></p>

<p dir="auto">be creative!</p>
<p dir="auto">there&#39;s so much I hadn&#39;t been listening into, like</p>
<ul dir="auto">
<li>online games - I guess a wide variety is waiting here, and some will be very distinctive</li>
<li>doomscrolling on the various platforms</li>
<li>network backup</li>
<li>IoT stuff</li>
<li>remote desktop protocols</li>
<li>write your own code</li>
<li>bundle together ping, netcat, socat, nmap and whatnot and make them MIDI controllable through a software registered MIDI client</li>
</ul>
<p dir="auto">if possible disable encryption, then you can profit from not only timing
pattern (of white noise), but also listen in on the plaintext payload.
the NSA loves plaintext.</p>

<p dir="auto">the NSA selector is a fast ethernet (FE=100Mbps) network switch with three
ports. the two front ports are switched, and the third port is only available
internally as 4 bit MII bus. it is configured as a mirror port of the two front
ports and wired to a 4 bit DAC and a low-pass-filter.</p>
<ul dir="auto">
<li>4 HP wide</li>
<li>current consumption:
<ul dir="auto">
<li>12V : 100mA</li>
<li>5V : nothing</li>
<li>-12V :   2mA</li>
</ul>
</li>
</ul>

<p dir="auto">both versions are available in my store, a fully assembled eurorack module
and a kit version where you have to solder on the front plate.</p>
<p dir="auto">watch my <a href="https://www.youtube.com/watch?v=SXlfyeYuZuQ" rel="nofollow">NSA selector kit assembly</a> video on youtube.</p>

<p dir="auto">you can purchase the NSA selector at <a href="https://lectronz.com/products/thensaselector" rel="nofollow">my little shop over at lectronz</a>.</p>

<p dir="auto">#eurorack #NSA #theNSAselector #wenzellabs #the_NSA_selector</p>
</article></div></div>
  </body>
</html>
