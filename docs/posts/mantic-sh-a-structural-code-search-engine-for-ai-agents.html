<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/marcoaapfortes/Mantic.sh">Original</a>
    <h1>Show HN: Mantic.sh â€“ A structural code search engine for AI agents</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://www.npmjs.com/package/mantic.sh" rel="nofollow"><img src="https://camo.githubusercontent.com/8fd4cf3531a22e31dbd56afc53190eacb1905cdc99055537b5cf3d695d3974e8/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6d616e7469632e73682e7376673f7374796c653d666c61742d73717561726526636f6c6f723d434233383337" alt="npm version" data-canonical-src="https://img.shields.io/npm/v/mantic.sh.svg?style=flat-square&amp;color=CB3837"/></a>
<a href="https://cursor.com/en/install-mcp?name=mantic&amp;config=eyJ0eXBlIjogInN0ZGlvIiwgImNvbW1hbmQiOiAibnB4IiwgImFyZ3MiOiBbIi15IiwgIm1hbnRpYy5zaEBsYXRlc3QiLCAic2VydmVyIl19" rel="nofollow"><img src="https://camo.githubusercontent.com/3fde5f85795234de703c496ddd1b332e3bd493aca79e864752f892b6567416d5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f437572736f722d496e7374616c6c2d3030303030303f7374796c653d666c61742d737175617265266c6f676f3d637572736f72266c6f676f436f6c6f723d7768697465" alt="Install in Cursor" data-canonical-src="https://img.shields.io/badge/Cursor-Install-000000?style=flat-square&amp;logo=cursor&amp;logoColor=white"/></a>
<a href="https://vscode.dev/redirect/mcp/install?name=mantic&amp;config=%7B%22type%22%3A%20%22stdio%22%2C%20%22command%22%3A%20%22npx%22%2C%20%22args%22%3A%20%5B%22-y%22%2C%20%22mantic.sh%40latest%22%2C%20%22server%22%5D%7D" rel="nofollow"><img src="https://camo.githubusercontent.com/7d490a8681c33f53c62da2470fa6b440de8538520f417313e705f4b0afdc1aa7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5653253230436f64652d496e7374616c6c2d3030374143433f7374796c653d666c61742d737175617265266c6f676f3d76697375616c2d73747564696f2d636f6465266c6f676f436f6c6f723d7768697465" alt="Install in VS Code" data-canonical-src="https://img.shields.io/badge/VS%20Code-Install-007ACC?style=flat-square&amp;logo=visual-studio-code&amp;logoColor=white"/></a>
<a href="https://github.com/marcoaapfortes/Mantic.sh/blob/main/AGENT_RULES.md"><img src="https://camo.githubusercontent.com/686a51d34f2a6237c24fbd7b3231150a290ed5b990098bcdad34ae767dba25e4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4167656e7425323052756c65732d436f7079253230436f6e6669672d3841324245323f7374796c653d666c61742d737175617265266c6f676f3d726f626f74266c6f676f436f6c6f723d7768697465" alt="Agent Rules" data-canonical-src="https://img.shields.io/badge/Agent%20Rules-Copy%20Config-8A2BE2?style=flat-square&amp;logo=robot&amp;logoColor=white"/></a>
<a href="#mcp-server-installation"><img src="https://camo.githubusercontent.com/4c559b605ca8862b237a8d9d62a6d806c0a19007f35948d64808859a72bb2af8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436c617564652532304465736b746f702d536574757025323047756964652d4439344633303f7374796c653d666c61742d737175617265266c6f676f3d616e7468726f706963266c6f676f436f6c6f723d7768697465" alt="Claude Desktop" data-canonical-src="https://img.shields.io/badge/Claude%20Desktop-Setup%20Guide-D94F30?style=flat-square&amp;logo=anthropic&amp;logoColor=white"/></a></p>
<p dir="auto">A structural code search engine for AI agents. Provides sub-500ms file ranking across massive codebases without embeddings, vector databases, or external dependencies.</p>

<ul dir="auto">
<li><strong>Chromium Support</strong>: Fixed timeout bug - now handles 481k+ file repos (increased default timeout to 30s)</li>
<li><strong>Improved Ranking</strong>: Two-pass scoring with function/class name extraction - exact matches now rank first</li>
<li><strong>Multi-Language Support</strong>: Added patterns for Python (<code>def</code>), Rust (<code>fn</code>), and Go (<code>func</code>)</li>
<li><strong>Configurable Limits</strong>: New <code>MANTIC_FUNCTION_SCAN_LIMIT</code> env var for tuning accuracy vs performance</li>
<li><strong>Better Keyword Matching</strong>: Handles camelCase, snake_case, and individual keyword matching</li>
</ul>

<ul dir="auto">
<li><a href="#about-the-project">About the Project</a></li>
<li><a href="#proprietary-vs-mantic-cost-analysis">Proprietary vs Mantic</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#installation">Installation (CLI &amp; MCP)</a>
<ul dir="auto">
<li><a href="#cli-installation">CLI Installation</a></li>
<li><a href="#mcp-server-installation">MCP Server Installation</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
<li><a href="#agent-rules-auto-pilot">Agent Rules</a></li>
<li><a href="#performance">Performance</a></li>
<li><a href="#how-it-works">How It Works</a></li>
<li><a href="#license">License</a></li>
</ul>

<p dir="auto">Mantic is an infrastructure layer designed to remove unnecessary context retrieval overhead for AI agents. It infers intent from file structure and metadata rather than brute-force reading content, enabling retrieval speeds faster than human reaction time.</p>

<ul dir="auto">
<li><strong>Speed</strong>: Retrieval is consistently under 500ms, even for large repositories.</li>
<li><strong>Efficiency</strong>: Reduces token usage by up to 63% by filtering irrelevant files before reading.</li>
<li><strong>Privacy</strong>: Runs entirely locally with zero data egress.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Proprietary vs Mantic (Cost Analysis)</h3><a id="user-content-proprietary-vs-mantic-cost-analysis" aria-label="Permalink: Proprietary vs Mantic (Cost Analysis)" href="#proprietary-vs-mantic-cost-analysis"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For a team of 100 developers performing 100 searches per day:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Tool</th>
<th>Annual Cost</th>
<th>Per-Search Cost</th>
<th>Privacy</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Mantic</strong></td>
<td><strong>$0</strong></td>
<td><strong>$0</strong></td>
<td><strong>Local-First</strong></td>
</tr>
<tr>
<td>Vector Embeddings</td>
<td>$10,950</td>
<td>$0.003</td>
<td>Cloud</td>
</tr>
<tr>
<td>SaaS Alternatives</td>
<td>$109,500</td>
<td>$0.003</td>
<td>Cloud</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<ul dir="auto">
<li><strong>Sub-500ms retrieval</strong> on large monorepos (Chromium: 480k files).</li>
<li><strong>Zero external dependencies</strong> (no API keys, no databases).</li>
<li><strong>Git-native file scanning</strong> (prioritizes tracked files).</li>
<li><strong>Deterministic scoring</strong> (consistent, predictable results).</li>
<li><strong>Native MCP support</strong> (works with Claude Desktop, Cursor).</li>
<li><strong>Impact analysis</strong> (identifies potential blast radius of changes).</li>
</ul>


<p dir="auto"><strong>Quick Start</strong> (no installation required):</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run directly with npx
npx mantic.sh@latest &#34;your search query&#34;"><pre><span><span>#</span> Run directly with npx</span>
npx mantic.sh@latest <span><span>&#34;</span>your search query<span>&#34;</span></span></pre></div>
<p dir="auto"><strong>From Source</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/marcoaapfortes/Mantic.sh.git
cd Mantic.sh
npm install
npm run build
npm link"><pre>git clone https://github.com/marcoaapfortes/Mantic.sh.git
<span>cd</span> Mantic.sh
npm install
npm run build
npm link</pre></div>

<p dir="auto">Mantic works as an MCP (Model Context Protocol) server for Claude Desktop, Cursor, VS Code, and other MCP-compatible tools.</p>
<p dir="auto"><strong>One-Click Install:</strong></p>
<ul dir="auto">
<li><a href="https://cursor.com/en/install-mcp?name=mantic&amp;config=eyJ0eXBlIjogInN0ZGlvIiwgImNvbW1hbmQiOiAibnB4IiwgImFyZ3MiOiBbIi15IiwgIm1hbnRpYy5zaEBsYXRlc3QiLCAic2VydmVyIl19" rel="nofollow">Install in Cursor</a></li>
<li><a href="https://vscode.dev/redirect/mcp/install?name=mantic&amp;config=%7B%22type%22%3A%20%22stdio%22%2C%20%22command%22%3A%20%22npx%22%2C%20%22args%22%3A%20%5B%22-y%22%2C%20%22mantic.sh%40latest%22%2C%20%22server%22%5D%7D" rel="nofollow">Install in VS Code</a></li>
</ul>
<p dir="auto"><strong>Manual Configuration</strong> (for Claude Desktop or other MCP clients):</p>
<p dir="auto">Add this to your MCP settings file:</p>
<ul dir="auto">
<li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;mcpServers&#34;: {
    &#34;mantic&#34;: {
      &#34;command&#34;: &#34;npx&#34;,
      &#34;args&#34;: [&#34;-y&#34;, &#34;mantic.sh@latest&#34;, &#34;server&#34;]
    }
  }
}"><pre>{
  <span>&#34;mcpServers&#34;</span>: {
    <span>&#34;mantic&#34;</span>: {
      <span>&#34;command&#34;</span>: <span><span>&#34;</span>npx<span>&#34;</span></span>,
      <span>&#34;args&#34;</span>: [<span><span>&#34;</span>-y<span>&#34;</span></span>, <span><span>&#34;</span>mantic.sh@latest<span>&#34;</span></span>, <span><span>&#34;</span>server<span>&#34;</span></span>]
    }
  }
}</pre></div>
<p dir="auto">Restart Claude Desktop, and Mantic will be available as the <code>search_codebase</code> tool.</p>
<p dir="auto"><strong>For IDE Users (Cursor/VS Code):</strong></p>
<p dir="auto">If you&#39;re using Mantic in an IDE rather than Claude Desktop, you can also add the <a href="https://github.com/marcoaapfortes/Mantic.sh/blob/main/AGENT_RULES.md">Agent Rules</a> to your IDE&#39;s system prompt or &#34;Rules for AI&#34; section. This teaches the AI to automatically use Mantic before writing code. (Note: Agent Rules are for IDEs only, not needed for Claude Desktop)</p>


<p dir="auto">Find files matching your intent:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mantic &#34;stripe payment integration&#34;"><pre>mantic <span><span>&#34;</span>stripe payment integration<span>&#34;</span></span></pre></div>
<p dir="auto"><em>Returns JSON with ranked files, confidence scores, and token estimates.</em></p>

<div dir="auto" data-snippet-clipboard-copy-content="mantic &lt;query&gt; [options]

Options:
  --code          Only search code files (.ts, .js, etc)
  --config        Only search config files
  --test          Only search test files
  --json          Output as JSON (default)
  --files         Output as newline-separated file paths
  --impact        Include dependency analysis
  --session &lt;id&gt;  Use session for context carryover"><pre>mantic <span>&lt;</span>query<span>&gt;</span> [options]

Options:
  --code          Only search code files (.ts, .js, etc)
  --config        Only search config files
  --test          Only search <span>test</span> files
  --json          Output as JSON (default)
  --files         Output as newline-separated file paths
  --impact        Include dependency analysis
  --session <span>&lt;</span>id<span>&gt;</span>  Use session <span>for</span> context carryover</pre></div>

<p dir="auto">Want Cursor or Claude to use Mantic automatically?</p>
<ol dir="auto">
<li>Copy the <a href="https://github.com/marcoaapfortes/Mantic.sh/blob/main/AGENT_RULES.md">Agent Rules</a>.</li>
<li>Paste them into your AI tool&#39;s system prompt or &#34;Rules for AI&#34; section.</li>
<li>The Agent will now automatically use <code>mantic</code> to find context before writing code.</li>
</ol>

<div dir="auto"><h3 tabindex="-1" dir="auto">Latency Benchmarks (M1 Pro)</h3><a id="user-content-latency-benchmarks-m1-pro" aria-label="Permalink: Latency Benchmarks (M1 Pro)" href="#latency-benchmarks-m1-pro"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Codebase</th>
<th>Files</th>
<th>Size</th>
<th>Mantic</th>
<th>Vector Search</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cal.com</td>
<td>9,621</td>
<td>~500MB</td>
<td>0.32s</td>
<td>0.85s</td>
<td><strong>2.7x faster</strong></td>
</tr>
<tr>
<td>Chromium</td>
<td>480,000</td>
<td>59GB</td>
<td>0.46s</td>
<td>5-10s</td>
<td><strong>11-22x faster</strong></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>


<div data-snippet-clipboard-copy-content="User Query
    â†“
Intent Analyzer (categorizes: UI/backend/auth/etc)
    â†“
Brain Scorer (ranks files using metadata)
    â†“
File Classifier (filters by type: code/config/test)
    â†“
Impact Analyzer (calculates blast radius)
    â†“
Output (JSON/Files/Markdown/MCP)"><pre><code>User Query
    â†“
Intent Analyzer (categorizes: UI/backend/auth/etc)
    â†“
Brain Scorer (ranks files using metadata)
    â†“
File Classifier (filters by type: code/config/test)
    â†“
Impact Analyzer (calculates blast radius)
    â†“
Output (JSON/Files/Markdown/MCP)
</code></pre></div>

<ol dir="auto">
<li><strong>Intent Recognition</strong>: Analyzes query to determine code category (e.g., &#34;auth&#34;, &#34;ui&#34;).</li>
<li><strong>File Enumeration</strong>: Uses <code>git ls-files</code> for tracked files (significantly faster than standard traversals).</li>
<li><strong>Structural Scoring</strong>: Ranks files based on:
<ul dir="auto">
<li><strong>Path relevance</strong>: <code>packages/features/payments</code> indicates high signal.</li>
<li><strong>Filename matching</strong>: <code>stripe.service.ts</code> &gt; <code>stripe.txt</code>.</li>
<li><strong>Business logic awareness</strong>: <code>.service.ts</code> boosted over <code>.test.ts</code>.</li>
<li><strong>Boilerplate penalties</strong>: <code>index.ts</code> or <code>page.tsx</code> ranked lower to reduce noise.</li>
</ul>
</li>
<li><strong>Confidence Scoring</strong>: Assigns a relevance score to each result.</li>
</ol>

<p dir="auto">Mantic works out of the box with zero configuration for most projects.</p>

<div dir="auto" data-snippet-clipboard-copy-content="MANTIC_MAX_FILES=5000         # Maximum files to scan
MANTIC_TIMEOUT=30000          # Search timeout in ms (default: 30000)
MANTIC_IGNORE_PATTERNS=...    # Custom glob patterns to ignore
MANTIC_FUNCTION_SCAN_LIMIT=30 # Top files to scan for function names (default: dynamic, max 50)"><pre>MANTIC_MAX_FILES=5000         <span><span>#</span> Maximum files to scan</span>
MANTIC_TIMEOUT=30000          <span><span>#</span> Search timeout in ms (default: 30000)</span>
MANTIC_IGNORE_PATTERNS=...    <span><span>#</span> Custom glob patterns to ignore</span>
MANTIC_FUNCTION_SCAN_LIMIT=30 <span><span>#</span> Top files to scan for function names (default: dynamic, max 50)</span></pre></div>

<p dir="auto">Mantic is licensed under the <strong>AGPL-3.0 License</strong>.</p>

<p dir="auto"><strong>You can:</strong></p>
<ul dir="auto">
<li>âœ… Use Mantic commercially (in products you sell, as a hosted service, etc.)</li>
<li>âœ… Modify the source code</li>
<li>âœ… Distribute copies</li>
<li>âœ… Use it privately</li>
</ul>
<p dir="auto"><strong>You must:</strong></p>
<ul dir="auto">
<li>ðŸ“– Provide the source code to users if you distribute Mantic or run it as a network service</li>
<li>ðŸ“– Keep the AGPL-3.0 license and copyright notices</li>
<li>ðŸ“– Disclose any modifications you make</li>
</ul>
<p dir="auto"><strong>In practice:</strong></p>
<ul dir="auto">
<li>If you embed Mantic in a proprietary product or SaaS, you must open-source your modifications</li>
<li>If you want to keep your modifications private, contact us about a commercial license</li>
</ul>
<p dir="auto"><strong>Commercial License Inquiries:</strong> <a href="mailto:license@mantic.sh">license@mantic.sh</a></p>
<p dir="auto">See <a href="https://github.com/marcoaapfortes/Mantic.sh/blob/main/LICENSE">LICENSE</a> file for full legal terms.</p>
</article></div></div>
  </body>
</html>
