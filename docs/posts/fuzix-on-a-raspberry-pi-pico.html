<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ewpratten.com/blog/fuzix-pi-pico">Original</a>
    <h1>Fuzix on a Raspberry Pi Pico</h1>
    
    <div id="readability-page-1" class="page"><div>
        
        <div>
            
            
            <p><span>Because your $5 microcontroller needed to run UNIX</span>
            
        </p></div>
        

        <p>I recently discovered <a href="https://fuzix.org/">Fuzix</a> while falling down a rabbit hole of reading about people’s hobby operating systems. Since I had some supported hardware (a Raspberry Pi Pico) laying around, I figured I’d try it out for myself.</p>

<p>Fuzix is a descendant of UZI <em>(with some other forks merged in)</em>, which itself is effectively a port of UNIX to the Zilog Z80. I thought this was particularly interesting because I’ve long been on a quest to find a way to get an extremely stripped-down build of Linux (or perhaps a BSD) to run on one of my microcontrollers.</p>

<h2 id="compiling">Compiling</h2>

<p>I found that the most sensible OS to use as a host for compiling Fuzix is Debian Bookworm due to requirements on old-ish versions of various dependencies. Since I do not have any systems running Bookworm, I opted to throw together this little Dockerfile to set up my build environment:</p>

<div><div><pre><code><span>FROM</span><span> debian:bookworm</span>
<span>RUN </span>apt-get update
<span>RUN </span>apt-get <span>install</span> <span>-y</span> <span>\
</span>    git make cmake build-essential <span>\
</span>    gcc-arm-none-eabi libnewlib-arm-none-eabi <span>\
</span>    binutils-arm-none-eabi byacc python3
</code></pre></div></div>

<p>I then checked out Git tag <code>v0.4</code>, and patched out the “2048” game from the default applications directory, as this game cannot compile for the Pi Pico.</p>

<div><div><pre><code>git clone https://github.com/EtchedPixels/FUZIX
git reset <span>--hard</span> tags/v0.4
git submodule update <span>--init</span> <span>--recursive</span>

<span>echo</span> <span>&#34;all::&#34;</span> <span>&gt;</span> ./Applications/games/2048/Makefile.armm0
</code></pre></div></div>

<p>Finally, I compiled Fuzix with the following command:</p>

<div><div><pre><code>make <span>TARGET</span><span>=</span>rpipico <span>SUBTARGET</span><span>=</span>pico diskimage
</code></pre></div></div>

<h2 id="installation">Installation</h2>

<p>Compilation produces <code>fuzix.uf2</code> and <code>filesystem.uf2</code>, the first of which being the Fuxiz kernel.</p>

<p>This file can be “flashed” onto a Pi Pico like any other uf2 file. For the uninitiated, this means holding the “BOOTSEL” button while plugging a Pi Pico into your computer, and copying the file onto the virtual storage device that appears in your file explorer.</p>

<p>Fuzix supports external flash for storage, but since I have none, I opted to flash the additional <code>filesystem.uf2</code> file to my Pi, writing a familiar UNIX filesystem to a dedicated area in the Pi’s onboard flash.</p>

<h2 id="exploring-the-system">Exploring the system</h2>

<p>With these files written, the only remaining step is to connect to the Pi Pico over Serial.</p>

<div><div><pre><code>FUZIX version 0.5
Copyright (c) 1988-2002 by H.F.Bower, D.Braun, S.Nitschke, H.Peraza
Copyright (c) 1997-2001 by Arcady Schekochikhin, Adriano C. R. da Cunha
Copyright (c) 2013-2015 Will Sowerbutts &lt;will@sowerbutts.com&gt;
Copyright (c) 2014-2025 Alan Cox &lt;alan@etchedpixels.co.uk&gt;
Devboot
264KiB total RAM, 160KiB available to processes (15 processes max)
Enabling interrupts ... ok.
NAND flash, 1952kB physical 1296kB logical at 0x13018000: hda:
SD drive 0: no card found
bootdev: █
</code></pre></div></div>

<p>The bootloader prompts for a boot drive. I enter <code>hda</code> here to select  onboard flash.</p>

<div><div><pre><code>Mounting root fs (root_dev=0, ro): OK
Starting /init
init version 0.9.1
Checking root file system.
login: root

Welcome to FUZIX
# █
</code></pre></div></div>

<p>And just like that, I’m dropped into a simple shell, with access to many common utilities.</p>

<div><div><pre><code># env
CTTY=/dev/tty1
HOME=/root
LOGNAME=root
PATH=/bin:/usr/bin
SHELL=/bin/sh
TERM=vt52
# ls /bin | wc -l
    122
</code></pre></div></div>

<p>From my cursory exploration, the system seems to come pre-loaded with everything required to manipulate GPIO as well as write and run some simple scripts on-device.</p>

<h2 id="my-thoughts">My thoughts</h2>

<p>I’m honestly quite impressed to see a UNIX descendant running on my little Pi Pico.</p>

<p>Of course, I can sense my Father preparing some kind of “back in my day” line to remind me that my Pi out-powers his first computer, but its still pretty impressive to actually <em>play with</em> this system after spending my day working with, uh, <a href="https://blog.cloudflare.com/tag/hardware/">much more powerful</a> hardware.</p>


    </div></div>
  </body>
</html>
