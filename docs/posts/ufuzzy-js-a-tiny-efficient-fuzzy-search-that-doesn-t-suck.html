<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/leeoniya/uFuzzy">Original</a>
    <h1>Show HN: uFuzzy.js ‚Äì A tiny, efficient fuzzy search that doesn&#39;t suck</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 dir="auto"><a id="user-content--Œºfuzzy" aria-hidden="true" href="#-Œºfuzzy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>‚ñí ŒºFuzzy</h2>
<p dir="auto">A tiny, efficient, fuzzy search that doesn&#39;t suck.
This is my fuzzy <g-emoji alias="cat2" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f408.png">üêà</g-emoji>. <a href="#a-biased-appraisal-of-similar-work">There are many like it</a>, but this one is mine.</p>
<hr/>
<h3 dir="auto"><a id="user-content-overview" aria-hidden="true" href="#overview"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overview</h3>
<p dir="auto">uFuzzy is a <a href="https://en.wikipedia.org/wiki/Approximate_string_matching" rel="nofollow">fuzzy search</a> library designed to match a relatively short search phrase (needle) against a large list of short-to-medium phrases (haystack).
It might be best described as a more forgiving <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf" rel="nofollow">String.indexOf()</a>.
Common use cases are list filtering, auto-complete/suggest, and title/name/description/filename/function searches.</p>
<p dir="auto">Each uFuzzy match must contain all alpha-numeric characters from the needle in the same sequence, so is likely a poor fit for applications like spellcheck or fulltext/document search.
However, its speed leaves ample headroom to <a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy&amp;outOfOrder&amp;search=spac%20ca" rel="nofollow">match out-of-order terms</a> by combining results from all permutations of the needle.
When held <em>just right</em>, it can efficiently match against multiple object properties, too.</p>
<hr/>
<h3 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h3>
<ul dir="auto">
<li><strong>Junk-free, high quality results</strong> that are <em>dataset-independent</em>. No need to fine-tune indexing options or boosting params to attain some arbitrary quality score cut-off.</li>
<li><strong>Straightforward fuzziness control</strong> that can be explained to your grandma in 5min.</li>
<li><strong>Sorting you can reason about</strong> and customize using a simple <code>Array.sort()</code> which gets access to each match&#39;s stats/counters. There&#39;s no composite, black box &#34;score&#34; to understand.</li>
<li><strong>Concise set of options</strong> that don&#39;t interact in mysterious ways to drastically alter combined behavior.</li>
<li><strong>Fast with low resource usage</strong> - there&#39;s no index to build, so startup is below 1ms with near-zero memory overhead. Searching a three-term phrase in a 162,000 phrase dataset takes 12ms with in-order terms or 50ms with out-of-order terms.</li>
<li><strong>Micro, with zero dependencies</strong> - currently <a href="https://github.com/leeoniya/uFuzzy/blob/main/dist/uFuzzy.iife.min.js">&lt; 4KB min</a></li>
</ul>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy&amp;outOfOrder&amp;search=spac%20ca" rel="nofollow"><img src="https://github.com/leeoniya/uFuzzy/raw/main/uFuzzy.png" alt="uFuzzy demo"/></a></p>
<hr/>
<h3 dir="auto"><a id="user-content-demos" aria-hidden="true" href="#demos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demos</h3>
<p dir="auto"><strong>NOTE:</strong> The <a href="https://github.com/leeoniya/uFuzzy/blob/main/demos/testdata.json">testdata.json</a> file is a diverse 162,000 string/phrase dataset 4MB in size, so first load may be slow due to network transfer.
Try refreshing once it&#39;s been cached by your browser.</p>
<p dir="auto">First, uFuzzy in isolation to demonstrate its performance.</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy&amp;search=super%20ma" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy&amp;search=super%20ma</a></p>
<p dir="auto">Now the same comparison page, booted with <a href="https://github.com/farzher/fuzzysort">fuzzysort</a>, <a href="https://fwextensions.github.io/quick-score-demo/" rel="nofollow">QuickScore</a>, and <a href="https://fusejs.io/" rel="nofollow">Fuse.js</a>:</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=super%20ma" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=super%20ma</a></p>
<p dir="auto">Here is the full library list but with a reduced dataset (just <code>hearthstone_750</code>, <code>urls_and_titles_600</code>) to avoid crashing your browser:</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?lists=hearthstone_750,urls_and_titles_600&amp;search=moo" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?lists=hearthstone_750,urls_and_titles_600&amp;search=moo</a></p>
<hr/>
<h3 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h3>
<h3 dir="auto"><a id="user-content-node" aria-hidden="true" href="#node"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node</h3>

<div dir="auto" data-snippet-clipboard-copy-content="const uFuzzy = require(&#39;@leeoniya/ufuzzy&#39;);"><pre><span>const</span> <span>uFuzzy</span> <span>=</span> <span>require</span><span>(</span><span>&#39;@leeoniya/ufuzzy&#39;</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-browser" aria-hidden="true" href="#browser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser</h3>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;script src=&#34;./dist/uFuzzy.iife.min.js&#34;&gt;&lt;/script&gt;"><pre><span>&lt;</span><span>script</span> <span>src</span><span>=</span><span>&#34;./dist/uFuzzy.iife.min.js&#34;</span><span>&gt;</span><span>&lt;</span><span>/</span><span>script</span><span>&gt;</span></pre></div>
<hr/>
<h3 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h3>
<p dir="auto">uFuzzy works in 3 phases:</p>
<ol dir="auto">
<li><strong>Filter</strong> - This filters the full <code>haystack</code> with a fast RegExp compiled from your <code>needle</code> without doing any extra ops. It returns an array of matched indices in original order.</li>
<li><strong>Info</strong> - This collects more detailed stats about the filtered matches, such as start offsets, fuzz level, prefix/suffix counters, etc. It also gathers substring match positions for range highlighting. Finally, it filters out any matches that don&#39;t conform to the desired prefix/suffix rules. To do all this it re-compiles the <code>needle</code> into two more-expensive RegExps that can partition each match. Therefore, it should be run on a reduced subset of the haystack, usually returned by the Filter phase. The <a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy" rel="nofollow">uFuzzy demo</a> is gated at &lt;= 1,000 filtered items, before moving ahead with this phase.</li>
<li><strong>Sort</strong> - This does an <code>Array.sort()</code> to determine final result order, utilizing the <code>info</code> object returned from the previous phase. A custom sort function can be provided via a uFuzzy option: <code>{sort: (info, haystack, needle) =&gt; idxsOrder}</code>.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="let haystack = [
    &#39;puzzle&#39;,
    &#39;Super Awesome Thing (now with stuff!)&#39;,
    &#39;FileName.js&#39;,
    &#39;/feeding/the/catPic.jpg&#39;,
];

let needle = &#39;feed cat&#39;;

let opts = {};

let uf = new uFuzzy(opts);

// pre-filter
let idxs = uf.filter(haystack, needle);

// sort/rank only when &lt;= 1,000 items
if (idxs.length &lt;= 1e3) {
  let info = uf.info(idxs, haystack, needle);

  // order is a double-indirection array (a re-order of the passed-in idxs)
  // this allows corresponding info to be grabbed directly by idx, if needed
  let order = uf.sort(info, haystack, needle);

  // render post-filtered &amp; ordered matches
  for (let i = 0; i &lt; order.length; i++) {
    // using info.idx here instead of idxs because uf.info() may have
    // further reduced the initial idxs based on prefix/suffix rules
    console.log(haystack[info.idx[order[i]]]);
  }
}
else {
  // render pre-filtered but unordered matches
  for (let i = 0; i &lt; idxs.length; i++) {
    console.log(haystack[i]);
  }
}"><pre><span>let</span> <span>haystack</span> <span>=</span> <span>[</span>
    <span>&#39;puzzle&#39;</span><span>,</span>
    <span>&#39;Super Awesome Thing (now with stuff!)&#39;</span><span>,</span>
    <span>&#39;FileName.js&#39;</span><span>,</span>
    <span>&#39;/feeding/the/catPic.jpg&#39;</span><span>,</span>
<span>]</span><span>;</span>

<span>let</span> <span>needle</span> <span>=</span> <span>&#39;feed cat&#39;</span><span>;</span>

<span>let</span> <span>opts</span> <span>=</span> <span>{</span><span>}</span><span>;</span>

<span>let</span> <span>uf</span> <span>=</span> <span>new</span> <span>uFuzzy</span><span>(</span><span>opts</span><span>)</span><span>;</span>

<span>// pre-filter</span>
<span>let</span> <span>idxs</span> <span>=</span> <span>uf</span><span>.</span><span>filter</span><span>(</span><span>haystack</span><span>,</span> <span>needle</span><span>)</span><span>;</span>

<span>// sort/rank only when &lt;= 1,000 items</span>
<span>if</span> <span>(</span><span>idxs</span><span>.</span><span>length</span> <span>&lt;=</span> <span>1e3</span><span>)</span> <span>{</span>
  <span>let</span> <span>info</span> <span>=</span> <span>uf</span><span>.</span><span>info</span><span>(</span><span>idxs</span><span>,</span> <span>haystack</span><span>,</span> <span>needle</span><span>)</span><span>;</span>

  <span>// order is a double-indirection array (a re-order of the passed-in idxs)</span>
  <span>// this allows corresponding info to be grabbed directly by idx, if needed</span>
  <span>let</span> <span>order</span> <span>=</span> <span>uf</span><span>.</span><span>sort</span><span>(</span><span>info</span><span>,</span> <span>haystack</span><span>,</span> <span>needle</span><span>)</span><span>;</span>

  <span>// render post-filtered &amp; ordered matches</span>
  <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>order</span><span>.</span><span>length</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
    <span>// using info.idx here instead of idxs because uf.info() may have</span>
    <span>// further reduced the initial idxs based on prefix/suffix rules</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>haystack</span><span>[</span><span>info</span><span>.</span><span>idx</span><span>[</span><span>order</span><span>[</span><span>i</span><span>]</span><span>]</span><span>]</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span>
<span>else</span> <span>{</span>
  <span>// render pre-filtered but unordered matches</span>
  <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>idxs</span><span>.</span><span>length</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>haystack</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span></pre></div>
<hr/>
<h3 dir="auto"><a id="user-content-api" aria-hidden="true" href="#api"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API</h3>
<p dir="auto">A liberally-commented 100 LoC <a href="https://github.com/leeoniya/uFuzzy/blob/main/dist/uFuzzy.d.ts">uFuzzy.d.ts</a> file.</p>
<hr/>
<h3 dir="auto"><a id="user-content-options" aria-hidden="true" href="#options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Options</h3>
<p dir="auto">Options with an <strong>inter</strong> prefix apply to allowances <em>in between</em> search terms, while those with an <strong>intra</strong> prefix apply to allowances <em>within</em> each search term.</p>
<table>
    <thead>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Default</th>
            <th>Examples</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>intraMax</code></td>
            <td>Max number of extra chars allowed</td>
            <td><code>0</code></td>
            <td>
                Searching &#34;cat&#34;...</td>
        </tr>
        <tr>
            <td><code>interMax</code></td>
            <td>Max number of extra chars allowed between terms</td>
            <td><code>Infinity</code></td>
            <td>
                Searching &#34;where is&#34;...</td>
        </tr>
        <tr>
            <td><code>intraChars</code></td>
            <td>Partial regexp for allowed extra</td>
            <td><code>[a-z\d]</code></td>
            <td>
                <code>[a-z\d]</code> matches only alpha-numeric (case-insensitive)</td>
        </tr>
        <tr>
            <td><code>intraFilt</code></td>
            <td>Callback for excluding results based on term &amp; match</td>
            <td><code>(term, match, index) =&gt; true</code></td>
            <td>
                Do your own thing, maybe...
                - Length diff threshold</td>
        </tr>
        <tr>
            <td><code>interChars</code></td>
            <td>Partial regexp for allowed chars between terms</td>
            <td><code>.</code></td>
            <td>
                <code>.</code> matches all chars</td>
        </tr>
        <tr>
            <td><code>interLft</code></td>
            <td>Determines allowable term left boundary</td>
            <td><code>0</code></td>
            <td>
                Searching &#34;mania&#34;...</td>
        </tr>
        <tr>
            <td><code>interRgt</code></td>
            <td>Determines allowable term right boundary</td>
            <td><code>0</code></td>
            <td>
                Searching &#34;mania&#34;...</td>
        </tr>
        <tr>
            <td><code>sort</code></td>
            <td>Custom result sorting function</td>
            <td><code>(info, haystack, needle) =&gt; idxsOrder</code></td>
            <td>
                Default: <a href="https://github.com/leeoniya/uFuzzy/blob/bba02537334ae9d02440b86262fbfa40d86daa54/src/uFuzzy.js#L32-L52">Search sort</a>, prioritizes full term matches and char density</td>
        </tr>
    </tbody>
</table>
<hr/>
<h3 dir="auto"><a id="user-content-a-biased-appraisal-of-similar-work" aria-hidden="true" href="#a-biased-appraisal-of-similar-work"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>A biased appraisal of similar work</h3>
<p dir="auto">This assessment is extremely narrow and, of course, biased towards my use cases, text corpus, and my complete expertise in operating my own library.
It is highly probable that I&#39;m not taking full advantage of some feature in other libraries that may significantly improve outcomes along some axis;
I welcome improvement PRs from anyone with deeper library knowledge than afforded by my hasty 10min skim over any &#34;Basic usage&#34; example and README doc.</p>
<h4 dir="auto"><a id="user-content-search-quality" aria-hidden="true" href="#search-quality"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Search quality</h4>
<p dir="auto">Can-of-worms #1.</p>
<p dir="auto">Before we discuss <a href="#performance">performance</a> let&#39;s talk about search quality, because speed is irrelevant when your results are a strange medly of &#34;Oh yeah!&#34; and &#34;WTF?&#34;.</p>
<p dir="auto">Search quality is very subjective.
What constitutes a good top match in a &#34;typeahead / auto-suggest&#34; case can be a poor match in a &#34;search / find-all&#34; scenario.
Some solutions optimize for the latter, some for the former.
It&#39;s common to find knobs that skew the results in either direction, but these are often by-feel and imperfect, being little more than a proxy to producing a single, composite match &#34;score&#34;.</p>
<p dir="auto">Let&#39;s take a look at some matches produced by the most popular fuzzy search library, <a href="https://github.com/krisk/Fuse">Fuse.js</a> and some others for which match highlighting is implemented in the demo.</p>
<p dir="auto">Searching for the partial term <strong>&#34;twili&#34;</strong>, we see these results appearing above numerous obvious <strong>&#34;twilight&#34;</strong> results:</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=twili" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=twili</a></p>
<ul dir="auto">
<li><strong>twi</strong>r<strong>li</strong>ng</li>
<li>**The total number of received alerts that <strong>were <strong>inva</strong>li</strong>d.</li>
<li><strong>T</strong>om Clancy&#39;s Ghost Recon <strong>Wil</strong>dlands - AS<strong>I</strong>A Pre-order Standard Uplay Activation</li>
<li><strong>t</strong>heHunter‚Ñ¢: Call of the <strong>Wi</strong>ld - Bearclaw <strong>Li</strong>te CB-60</li>
</ul>
<p dir="auto">Not only are these poor matches in isolation, but they actually rank higher than literal substrings.</p>
<p dir="auto">Finishing the search term to <strong>&#34;twilight&#34;</strong>, <em>still</em> scores bizzare results higher:</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=twilight" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=twilight</a></p>
<ul dir="auto">
<li>Magic: <strong>T</strong>he Gathering - Duels of the Planeswalkers <strong>Wi</strong>ngs of <strong>Light</strong> Unlock</li>
<li><strong>T</strong>he <strong>Wil</strong>d E<strong>ight</strong></li>
</ul>
<p dir="auto">Some engines do better with partial prefix matches, at the expense of higher startup/indexing cost:</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,FlexSearch,match-sorter,MiniSearch&amp;search=twili" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,FlexSearch,match-sorter,MiniSearch&amp;search=twili</a></p>
<p dir="auto">Here, <code>match-sorter</code> returns 1,384 results, but only the first 40 are relevant. How do we know where the cut-off is?</p>
<p dir="auto"><a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,FlexSearch,match-sorter,MiniSearch&amp;search=super" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,FlexSearch,match-sorter,MiniSearch&amp;search=super</a></p>

<h4 dir="auto"><a id="user-content-performance" aria-hidden="true" href="#performance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h4>
<p dir="auto">Can-of-worms #2.</p>
<p dir="auto">All benchmarks suck, but this one might suck more than others.</p>
<ul dir="auto">
<li>I&#39;ve tried to follow any &#34;best performance&#34; advice when I could find it in each library&#39;s docs, but it&#39;s a certainty that some stones were left unturned when implementing ~20 different search engines.</li>
<li>Despite my best efforts, result quality is still extremely variable between libraries, and even between search terms. In some cases, results are very poor but the library is very fast; in other cases, the results are better, but the library is quite slow. What use is extreme speed when the search quality is sub-par? This is a subjective, nuanced topic that will surely affect how you interpret these numbers. I consider uFuzzy&#39;s search quality second-to-none, so my view of most faster libraries is typically one of quality trade-offs I&#39;m happy not to have made. I encourage you to evaluate the results for all benched search phrases manually to decide this for yourself.</li>
<li>Many fulltext &amp; document-search libraries compared here are designed to work best with exact terms rather than partial matches (which this benchmark is skewed towards).</li>
</ul>
<p dir="auto">Still, something is better than a hand-wavy YMMV/do-it-yourself dismissal and certainly better than nothing.</p>
<h4 dir="auto"><a id="user-content-benchmark" aria-hidden="true" href="#benchmark"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benchmark</h4>
<ul dir="auto">
<li>Each benchmark can be run by changing the <code>libs</code> parameter to the desired library name: <a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?bench&amp;libs=uFuzzy" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?bench&amp;libs=uFuzzy</a></li>
<li>Results output is suppressed in <code>bench</code> mode to avoid benchmarking the DOM.</li>
<li>Measurements are taken in the Performance secrion of Chrome&#39;s DevTools by recording several reloads of the bench page, with forced garbage collection in between. The middle/typical run is used to collect numbers.</li>
<li>The search corpus is 162,000 words and phrases, loaded from a 4MB <a href="https://github.com/leeoniya/uFuzzy/blob/main/demos/testdata.json">testdata.json</a>.</li>
<li>The benchmark types and then deletes, character-by-character (every 100ms) the following search terms, triggering a search for each keypress: <code>test</code>, <code>chest</code>, <code>super ma</code>, <code>mania</code>, <code>puzz</code>, <code>prom rem stor</code>, <code>twil</code>.</li>
</ul>
<p dir="auto">To evaluate the results for each library, or to compare several, simply visit the same page with more <code>libs</code> and without <code>bench</code>: <a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=super%20ma" rel="nofollow">https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy,fuzzysort,QuickScore,Fuse&amp;search=super%20ma</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leeoniya/uFuzzy/blob/main/bench.png"><img src="https://github.com/leeoniya/uFuzzy/raw/main/bench.png" alt="profile example"/></a></p>
<p dir="auto">There are several metrics evaluated:</p>
<ul dir="auto">
<li>Init time - how long it takes to load the library and build any required index to perform searching.</li>
<li>Bench runtime - how long it takes to execute all searches.</li>
<li>Memory required - peak JS heap size used during the bench as well as how much is still retained after a forced garbage collection at the end.</li>
<li>GC cost - how much time is needed to collect garbage at the end (main thread jank)</li>
</ul>

<table>
    <thead>
        <tr>
            <th>Lib</th>
            <th>Stars</th>
            <th>Size (min)</th>
            <th>Init</th>
            <th>Search</th>
            <th>Heap (peak)</th>
            <th>Retained</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <a href="https://github.com/leeoniya/uFuzzy">uFuzzy</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=uFuzzy&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 0</td>
            <td>4KB</td>
            <td>0.3ms</td>
            <td>620ms</td>
            <td>25.5MB</td>
            <td>7.5MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/krisk/Fuse">Fuse.js</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=Fuse&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 14.8k</td>
            <td>23.5KB</td>
            <td>40ms</td>
            <td>35432ms</td>
            <td>372MB</td>
            <td>14MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/nextapps-de/flexsearch">FlexSearch (Light)</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=FlexSearch&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 8.9k</td>
            <td>5.9KB</td>
            <td>3600ms</td>
            <td>130ms</td>
            <td>673MB</td>
            <td>316MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/olivernn/lunr.js">Lunr.js</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=Lunr&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 8.2k</td>
            <td>29.4KB</td>
            <td>1900ms</td>
            <td>755ms</td>
            <td>450MB</td>
            <td>231MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/LyraSearch/lyra">LyraSearch</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=LyraSearch&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 3.3k</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/kentcdodds/match-sorter">match-sorter</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=match-sorter&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 3.1k</td>
            <td>7.3KB</td>
            <td>0.03ms</td>
            <td>8900ms</td>
            <td>73.4MB</td>
            <td>7.4MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/farzher/fuzzysort">fuzzysort</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=fuzzysort&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 3k</td>
            <td>5.5KB</td>
            <td>50ms</td>
            <td>1400ms</td>
            <td>176MB</td>
            <td>84MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/kbrsh/wade">Wade</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=Wade&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 3k</td>
            <td>4KB</td>
            <td>770ms</td>
            <td>315ms</td>
            <td>436MB</td>
            <td>42MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/bevacqua/fuzzysearch">fuzzysearch</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=fuzzysearch&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 2.6k</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/weixsong/elasticlunr.js">Elasticlunr.js</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=Elasticlunr&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 1.9k</td>
            <td>18.1KB</td>
            <td>1000ms</td>
            <td>1630ms</td>
            <td>224MB</td>
            <td>70MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/lucaong/minisearch">MiniSearch</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=MiniSearch&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 1.5k</td>
            <td>22.4KB</td>
            <td>550ms</td>
            <td>1900ms</td>
            <td>423MB</td>
            <td>64MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/Glench/fuzzyset.js">Fuzzyset</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=Fuzzyset&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 1.3k</td>
            <td>2.8KB</td>
            <td>3100ms</td>
            <td>850ms</td>
            <td>660MB</td>
            <td>238MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/fergiemcdowall/search-index">search-index</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=search-index&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 1.3k</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/rmm5t/liquidmetal">LiquidMetal</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=LiquidMetal&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 285</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/itemsapi/itemsjs">ItemJS</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=ItemJS&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 260</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/wouter2203/fuzzy-search">FuzzySearch</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=fuzzy-search&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 184</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/jeancroy/FuzzySearch">FuzzySearch2</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=FuzzySearch2&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 173</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/fwextensions/quick-score">QuickScore</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=QuickScore&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 131</td>
            <td>9.1KB</td>
            <td>26ms</td>
            <td>7100ms</td>
            <td>171MB</td>
            <td>12.3MB</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/jhawthorn/fzy.js/">fzy</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=fzy&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 115</td>
        </tr>
        <tr>
            <td>
                <a href="https://github.com/grafana/grafana/blob/main/packages/grafana-ui/src/utils/fuzzy.ts">fuzzyMatch</a>
                (<a href="https://leeoniya.github.io/uFuzzy/demos/compare.html?libs=fuzzyMatch&amp;search=super%20ma" rel="nofollow">try</a>)
            </td>
            <td>‚òÖ 0</td>
        </tr>
    </tbody>
</table>
</article>
          </div></div>
  </body>
</html>
