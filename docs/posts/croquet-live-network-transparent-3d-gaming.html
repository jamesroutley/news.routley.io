<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.theregister.com/2023/03/23/croquet_for_unity/">Original</a>
    <h1>Croquet: Live, network-transparent 3D gaming</h1>
    
    <div id="readability-page-1" class="page"><div id="body">
<p><span>Updated</span> Which of these appeals more: a new, free, Javascript framework for writing network-enabled 3D games, complete with integrated physics modelling and spatial audio… or, a complete, mature, dynamic programming platform that can implement the metaverse?</p>
<p>Why not both?</p>
<p>The new <a href="https://www.prnewswire.com/news-releases/croquet-for-unity-set-to-transform-multiplayer-game-development-with-no-netcode-solution-301774531.html" rel="nofollow">announcement</a> from Croquet Corporation at the Game Developers Conference, <a href="https://gdconf.com/" rel="nofollow">GDC</a>, in San Francisco is a very rare thing to come across the <em>Reg</em> FOSS desk&#39;s virtual – er – desk in multiple ways. Although it&#39;s far removed from our usual stuff about Linux distributions, virtualization, and so on, this is much more important and could impact many more people. We hope you&#39;ll bear with us for a few paragraphs while we try to explain why, because we think it&#39;s a genuinely big deal.</p>

    

<p>On one hand, this is trendy stuff – 3D gaming, immersive VR, the metaverse, and so on. It&#39;s a new Javascript framework for network-transparent multi-device 3D apps. It can now talk to Unity, which we&#39;ve previously called <a href="https://www.theregister.com/2017/09/20/unity_can_train_ai/">&#34;the most popular cross-platform game engine favored by video game developers&#34;</a>. Although it&#39;s mainly in Javascript, it also supports Rust compiled to <a href="https://www.theregister.com/2022/02/19/webassembly_port_libreoffice/">the cross-platform WASM runtime</a>. It&#39;s free, but the company has a revenue model. If it&#39;s not already apparent, Croquet&#39;s press release, and its <a href="https://www.croquet.io/" rel="nofollow">website</a>, are both <em>highly</em> buzzword-compliant.</p>

        


        

<p>
  <a href="https://www.youtube.com/embed/FNCWi307UZM" data-media="x-videoplayer">Youtube Video</a>
</p>
<p>Croquet bills itself as &#34;the OS for the Open Metaverse&#34; and that is not an exaggeration: this could be one of most significant bits of software technology FOSS desk has seen so far this century. However, to get mainstream developers interested, the company is lightly disguising it, and marketing it as a tool for making it substantially easier to write cross-platform multiplayer games that work seamlessly over the internet, on desktop, laptop, tablet and smartphone. It is all that, but it&#39;s a lot more.</p>

        

<p>One thing Croquet <em>isn&#39;t</em> is a startup. Although this version of its eponymous product has been completely rewritten in vanilla Javascript, its first version was about 20 years ago, built on a transformative technology that was first released in 1985 and went open source in 1996. Despite the buzzwords, the tech is mature, with roots in designs that are older than Microsoft Windows. That also means that it&#39;s tiny, efficient, fast, lightweight, and in places, surprisingly simple. It&#39;s also got direct links to our story last week about <a href="https://www.theregister.com/2023/03/16/the_xerox_alto_50_years/">the Xerox Alto and the three ways it influenced modern computers</a>.</p>
<p>Croquet is a clever combination of some cutting-edge tech with some very powerful ideas that have been refined over decades. This is in part because Croquet was <a href="https://web.archive.org/web/20041204051011/http://opencroquet.org/About_Us/about.html" rel="nofollow">originally</a> built by some exceptionally smart people, most of whom today act as its <a href="https://www.croquet.io/advisors/" rel="nofollow">advisors</a>. Among them are Alan Kay, who largely invented the graphical user interface; Dan Ingalls, who implemented the original Smalltalk and several important later derivatives, and on the side invented pop-up menus; David P Reed, who invented the UDP protocol; Mark P McCahill, who invented the URL and Gopher; and VR pioneers Julian Lombardi and Avi Bar-Zeev. We&#39;ve <a href="https://www.theregister.com/2011/06/20/webgl_/">written about Bar-Zeev</a> before, but if you don&#39;t recognize the name, he built the original Google Earth (and much of Second Life), while Lombardi invented <a href="https://computer.howstuffworks.com/vios.htm" rel="nofollow">ViOS</a>, probably the earliest attempt to commercialize the metaverse concept.</p>
<p>Croquet Corporation&#39;s <a href="https://www.croquet.io/team/" rel="nofollow">founder and CTO</a> is David A Smith, who <a href="https://www.croquet.zone/2005/02/my-colony-memoir.html" rel="nofollow">wrote</a> arguably the first ever first-person 3D shoot-&#39;em-up <a href="https://ultimatehistoryvideogames.jimdofree.com/colony/" rel="nofollow"><em>The Colony</em></a>, released in 1988 – four years before <a href="https://www.theregister.com/2011/08/17/antique_code_show_wolfenstein_3d/"><em>Wolfenstein 3D</em> in 1992</a>. He also did the 3D visualization tool for the movie <em><a target="_blank" rel="nofollow" href="https://www.imdb.com/title/tt0096754/">The Abyss</a></em>, which led to the first commercial 3D visualization app, <a href="https://books.google.im/books?id=4T0EAAAAMBAJ&amp;pg=PA77&amp;lpg=PA77&amp;dq=Virtus+Walkthrough,&amp;source=bl&amp;ots=UVyHId-u6v&amp;sig=ACfU3U3SFeTxkTt0zFLmwc9YUbTRCoRj-A&amp;hl=en&amp;sa=X&amp;ved=2ahUKEwiSxu6ro-_9AhVITEEAHcsaDIIQ6AF6BQiXARAD#v=onepage&amp;q=Virtus%20Walkthrough%2C&amp;f=false" rel="nofollow">Virtus Walkthrough</a>. Alongside James Cameron, he&#39;s built projects with Tom Clancy, Michael Crichton, and worked for companies including Lockheed-Martin.</p>

        

<p>So it&#39;s really exceptionally safe to say that these folks really do know their stuff, because they invented it.</p>
<p>Croquet was originally implemented in <a href="https://squeak.org/" rel="nofollow">Squeak</a>. Derived from <a href="http://www.bitsavers.org/pdf/apple/mac/smalltalk/Smalltalk_80_for_the_Macintosh_Aug85.pdf" rel="nofollow">Apple Smalltalk-80</a> [PDF], released in 1985, Squeak is a Smalltalk whose VM is written in Smalltalk itself, by the same Dan Ingalls who implemented the Alto version at Xerox PARC.</p>
<p>There have been many implementations of Smalltalk, as well as later languages that it inspired. Notable among these is another Xerox PARC project, <a href="https://selflanguage.org/" rel="nofollow">Self</a>. Initially a dialect of Smalltalk, at Sun Microsystems this grew into its own thing: language rich, complete, and fast enough for a version of Smalltalk to be implemented in it. Self&#39;s just-in-time compiler turned into the Hotspot JIT in what is now Oracle&#39;s Java JVM. The most significant offspring of Self by far, though, is a version of it with curly-brackets syntax, whose creator described it as <a href="https://web.archive.org/web/20200204010840/https://brendaneich.com/2008/04/popularity/" rel="nofollow">&#34;a quickie love-child of C and Self</a>. That is, of course, JavaScript.</p>
<p>We were surprised by the glowing terms in which Smith described it to <em>The Reg</em>:</p>

<p>This is the point at which Croquet switching from Smalltalk to JavaScript suddenly made sense to us.</p>
<p>When this vulture first saw demos of Croquet in 2004–2005, it looked like a fun experiment in extending Smalltalk&#39;s two-dimensional, overlapping-window model into an 3D VR-style environment, using OpenGL to make it fast. This resulted in a translucent world, with windows that floated in mid-air. It looked to us a little like everything was underwater. It&#39;s intended for collaboration: each instance can talk to other instances over the network, synchronized via a lighweight protocol called <a href="https://dl.acm.org/doi/10.1145/1094855.1094861" rel="nofollow">TeaTime</a> invented by the aformentioned <a href="https://deepplum.com/" rel="nofollow">Dr Reed</a>. The Croquet environment could even embed other apps, such as a Mozilla-based web browser.</p>
<p>Right on the front page as it was in <a href="https://web.archive.org/web/20041014023137/http://www.opencroquet.org:80/Croquet_Technologies/downloads.html" rel="nofollow">2004</a>, it gave the then relatively modest hardware requirements:</p>

<p>In the <a href="https://web.archive.org/web/20041204044205/http://opencroquet.org/About_Croquet/faqs.html#1" rel="nofollow">FAQ</a>, they narrowed the latter down:</p>

<p>20 years ago, Croquet seemed quite large and complex. Now, specifications like these are trivial, and it runs on a far more heavily optimized, as well as ubiquitous, VM. Even the cheapest budget smartphone exceeds them by far, has hardware 3D rendering and fast, always-on communications.</p>
<p>Part of the problem, though, was persuading people to try it. Smalltalk is as much an operating system as it is a language, and most Smalltalk implementations run inside a self-contained VM, which is one of the things that has hindered its uptake. The main way to deploy a Smalltalk application is to ship an image of a VM with all of its components in place and ready to go. Smalltalk apps didn&#39;t look native on most OSes, and it&#39;s not trivial to keep Smalltalk code in a VCS such as Git, because Smalltalk apps are full of complex in-memory objects, not plain text.</p>
<p>But today, the most widespread programming language is a direct descendant of Smalltalk, which runs in a heavily optimized VM that&#39;s bundled with every browser on every computer and every fondleslab.</p>
<p>Smith told us:</p>

<p>Of the current version, he said:</p>

<p>The tooling is rich, mature, widespread and very well known. There are nearly 30 million developers in the world, and some <a href="https://devclass.com/2023/01/18/jetbrains-survey-developers-91-male-73-experience-burnout-more-liking-rust-and-go/">65 percent of them use JavaScript</a>. It&#39;s a perfect fit. One of the company&#39;s demo videos shows VS Code editing a snippet of the code that controls the world the presenter is in, while the code is also visible in a live window in that world.</p>
<p>
  <a href="https://www.youtube.com/embed/oeCdJRgBpso" data-media="x-videoplayer">Youtube Video</a>
</p>
<p>This degree of integration was unimaginable in the old Smalltalk version. And now, this tool can talk to Unity, too.</p>
<p>All Croquet virtual environments are independent and can be protected, but they run in sync with all other instances of that world thanks to TeaTime messages sent to internet servers called &#34;reflectors&#34;. Like the protocol, these are light enough to run on edge devices. Croquet Corp hosts its own, and charges for their use, so while the code is free, there is a revenue model.</p>
<p>No matter how many devices they are running on, new instances can join at any point and sync within seconds. There is no separate client-side code talking to a complex server with state to be transmitted. Indeed, you don&#39;t need to write network-access code <em>at all</em>. As the <a href="https://www.croquet.io/docs/croquet/index.html#what-is-croquet%3F" rel="nofollow">documentation</a> says (and the emphasis is in the original):</p>

<p>For comparison, think of live migration of VMs from one host to another: a snapshot of its state is saved, and while the VM is loading into memory on the new host, the state is sent across from the old host, so that the VM can pick up where it left off within seconds.</p>
<p>Here, rather than VMs, each Croquet instance loads from a URL, executes entirely within that browser, and the reflector just keeps them in step.</p>
<p>Developers don&#39;t <em>have</em> to use Unity. There are a variety of other tools, such as <a href="https://github.com/croquet/worldcore" rel="nofollow">Worldcore</a>, which is available direct from <a href="https://www.npmjs.com/package/@croquet/worldcore" rel="nofollow">NPM</a>.</p>
<p>The company has a simple, two-minute <a href="https://www.croquet.io/croquet-os/" rel="nofollow">explainer</a> on its homepage, with a short video demo at the end, as well as some snazzy demo <a href="https://www.croquet.io/microverse-demos/" rel="nofollow">videos</a>.</p>
<p>
  <a href="https://www.youtube.com/embed/M6m7xfsGAzU" data-media="x-videoplayer">Youtube Video</a>
</p>
<p>But this vulture felt that it was the <a href="https://www.croquet.io/examples/" rel="nofollow">examples</a> that started to make it more impressive, and more fun, though. Run any one of the programs embedded in the page – we liked the <em>Fountain</em> under <em>3D</em>. A fountain of 3D shapes starts; click your mouse, and you can throw new ones into the stream.</p>
<p>Each applet has a little hamburger menu at the bottom. Click this, and one of the options is to display a QR code. Scan the code with a handheld, and in a few seconds, it joins that instance, showing the same, live, content. Tap the phone&#39;s screen and the object you threw instantly appears on all other connected devices, collisions and ricochets and all. Other demos are more practical, involving live shared whiteboards, or collaborative code editing.</p>
<p>Although each instance is sandboxed within the browser, different virtual environments can communicate, via &#34;portals&#34;: live, realtime windows showing the contents of other instances, and if granted permission, users can step through the portal into that other instance. While embedding a browser in Smalltalk was impressive stuff in 2004, now that kind of trick is easy. Croquet environments can contain multiple live web views, and Croquet code can also fetch data from external sources and render it live within the virtual environment. It makes it very easy to, for instance, create a virtual exhibition space that users can enter, explore, and interact with, and any changes propagate instantly to all other instances – all in free Javascript code, without a client, on any device.</p>
<p>We were initially skeptical when we learned that one of the 21st century showcase applications for Smalltalk had been converted to Javascript, but after playing with a few demos, we&#39;re convinced. Croquet and JavaScript were made for one another.</p>
<p>Smalltalk shaped the UI of every modern end-user computer, even though most of them don&#39;t use Smalltalk. By the early 1980s, Smalltalk made developing windowing GUI apps <em>literally</em> child&#39;s play: primary school kids could easily assemble working, interactive programs, without ever knowing what arcane concepts from 1960s OSes like &#34;files&#34; or &#34;directories&#34; were.</p>
<p>The multiple multi-billion-dollar corporations of the modern software industry have spent decades transplanting these UI technologies on top of multiuser, multitasking OSes built on 1970s technologies such as C and Unix. After 40 years of epic development efforts, building GUI apps is now hugely complex and difficult, the domain of paid professionals maintaining vast multi-million-line codebases of extremely fragile code, much of it in non-memory-safe, compiled languages such as C and C++.</p>
<p>But at the same time that this was happening, Smalltalk was evolving into a new language that is now inside almost every computer. Quietly, mostly unnoticed, the people from Xerox PARC and the people who built TCP/IP and the Internet, were moving on to things far more ambitious.</p>
<p>Moving beyond overlapping rectangular windows and into internet-scale immersive-3D environments. Built, not from static, fragile, compiled languages, but live, <a href="https://www.techopedia.com/definition/24292/late-binding" rel="nofollow">late-bound languages</a>, code which can be edited, on the fly, in the tool itself while you&#39;re running it. Collaboratively, over the internet. And yet this is almost a peripheral attribute: this is a side-note, a nice extra for the people building it.</p>
<p>The applications for it are things like turning the web from a set of flat pages that link to one another, into a live collaborative virtual environment… with a physics model thrown in for free… with two-way gateways to and from other instances, and existing web pages and web apps… which is also a rich programming environment as well, but works with existing local tools too… and can also be used for building games, media players and other end-user apps… where putting together an application comparable to Zoom or Microsoft Teams is not a major tech undertaking involving hefty cloud servers, but a minor, almost trivial tech demo.</p>
<ul>

<li><a href="https://www.theregister.com/2023/03/02/linux_mint_212/">Linux Mint 21.2 and Cinnamon 5.8 desktop take shape</a></li>

<li><a href="https://www.theregister.com/2023/02/27/lomiri_desktop_on_debian/">Official: Lomiri desktop now runs on Debian</a></li>

<li><a href="https://www.theregister.com/2022/12/08/forthcoming_xfce_418_on_show/">Fresh version of Xfce, the oldest Linux desktop of them all, revealed in Xubuntu builds</a></li>

<li><a href="https://www.theregister.com/2023/02/23/ubuntu_remixes_drop_flatpak/">By order of Canonical: Official Ubuntu flavors must stop including Flatpak by default</a></li>
</ul>
<p>Where &#34;serverless&#34; doesn&#39;t mean &#34;it&#39;s on someone else&#39;s server but you don&#39;t need to know where&#34;, it actually means &#34;there are no servers&#34;.</p>
<p>And it&#39;s free, you can embed it into existing web pages, and it works with your existing infrastructure.</p>
<p>
  <a href="https://www.youtube.com/embed/q0cFApaNEBI" data-media="x-videoplayer">Youtube Video</a>
</p>
<p>We suggest taking a look, or better still, a try. Never mind screenshots, videos cannot do this justice. Run some of the code examples, scan the barcode on a phone, and watch them interact. It&#39;s probably the single most impressive tech the author has seen since the first GUI computers in the early 1980s, and it&#39;s <a target="_blank" href="https://www.croquet.io/faq/">free to use</a>. ®</p>
<h3>Updated to add:</h3>
<p>Smith has been in touch since the publication of this article to clarify Croquet&#39;s positioning on open source: &#34;All of our frameworks are open source. The kernel of the system – the virtual machine and the reflector – is currently not open source though.</p>
<p>&#34;This is mainly because of our concern about handing our business over to Amazon. We plan to open source the entire system once we are fully deployed. In fact, the fully decentralized system we will be making available next year will need to be open source.&#34;</p>
<p>He added that while the org has pricing for its web-based products (<a target="_blank" href="https://croquet.io/pricing/">here</a>), it has &#34;not established pricing for Croquet for Unity yet – this will be set once we have the commercial release in the next few months, but will be very competitive.&#34;</p>                                
                    </div></div>
  </body>
</html>
