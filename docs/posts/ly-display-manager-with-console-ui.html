<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/fairyglade/ly">Original</a>
    <h1>Ly: Display Manager with Console UI</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/5473047/88958888-65efbf80-d2a1-11ea-8ae5-3f263bce9cce.png"><img src="https://user-images.githubusercontent.com/5473047/88958888-65efbf80-d2a1-11ea-8ae5-3f263bce9cce.png" alt="Ly screenshot" title="Ly screenshot"/></a></p>
<p dir="auto">Ly is a lightweight TUI (ncurses-like) display manager for Linux and BSD.</p>

<ul dir="auto">
<li>Compile-time:
<ul dir="auto">
<li>zig 0.12.0</li>
<li>a C standard library</li>
<li>pam</li>
<li>xcb</li>
</ul>
</li>
<li>Runtime (with default config):
<ul dir="auto">
<li>xorg</li>
<li>xorg-xauth</li>
<li>mcookie</li>
<li>tput</li>
<li>shutdown</li>
</ul>
</li>
</ul>

<div data-snippet-clipboard-copy-content="# apt install build-essential libpam0g-dev libxcb-xkb-dev"><pre><code># apt install build-essential libpam0g-dev libxcb-xkb-dev
</code></pre></div>

<p dir="auto"><strong>Warning</strong>: You may encounter issues with SELinux on Fedora.
It is recommended to add a rule for Ly as it currently does not ship one.</p>
<div data-snippet-clipboard-copy-content="# dnf install kernel-devel pam-devel libxcb-devel"><pre><code># dnf install kernel-devel pam-devel libxcb-devel
</code></pre></div>

<p dir="auto">The following desktop environments were tested with success:</p>
<ul dir="auto">
<li>awesome</li>
<li>bspwm</li>
<li>budgie</li>
<li>cinnamon</li>
<li>deepin</li>
<li>dwl</li>
<li>dwm</li>
<li>enlightenment</li>
<li>gnome</li>
<li>i3</li>
<li>kde</li>
<li>labwc</li>
<li>lxde</li>
<li>lxqt</li>
<li>mate</li>
<li>maxx</li>
<li>pantheon</li>
<li>qtile</li>
<li>spectrwm</li>
<li>sway</li>
<li>windowmaker</li>
<li>xfce</li>
<li>xmonad</li>
</ul>
<p dir="auto">Ly should work with any X desktop environment, and provides
basic wayland support (sway works very well, for example).</p>

<p dir="auto">Unlike what you may have heard, Ly does not require <code>systemd</code>,
and was even specifically designed not to depend on <code>logind</code>.
You should be able to make it work easily with a better init,
changing the source code won&#39;t be necessary :)</p>

<p dir="auto">Clone the repository</p>
<div data-snippet-clipboard-copy-content="$ git clone https://github.com/fairyglade/ly"><pre><code>$ git clone https://github.com/fairyglade/ly
</code></pre></div>
<p dir="auto">Change the directory to ly</p>

<p dir="auto">Compile</p>

<p dir="auto">Test in the configured tty (tty2 by default)
or a terminal emulator (but desktop environments won&#39;t start)</p>

<p dir="auto">Install Ly and the provided systemd service file</p>
<div data-snippet-clipboard-copy-content="# zig build installsystemd"><pre><code># zig build installsystemd
</code></pre></div>
<p dir="auto">Enable the service</p>
<div data-snippet-clipboard-copy-content="# systemctl enable ly.service"><pre><code># systemctl enable ly.service
</code></pre></div>
<p dir="auto">If you need to switch between ttys after Ly&#39;s start you also have to
disable getty on Ly&#39;s tty to prevent &#34;login&#34; from spawning on top of it</p>
<div data-snippet-clipboard-copy-content="# systemctl disable getty@tty2.service"><pre><code># systemctl disable getty@tty2.service
</code></pre></div>

<p dir="auto"><strong>NOTE</strong>: On Gentoo, Ly will disable the <code>display-manager-init</code> service in order to run.</p>
<p dir="auto">Clone, compile and test.</p>
<p dir="auto">Install Ly and the provided OpenRC service</p>
<div data-snippet-clipboard-copy-content="# zig build installopenrc"><pre><code># zig build installopenrc
</code></pre></div>
<p dir="auto">Enable the service</p>

<p dir="auto">You can edit which tty Ly will start on by editing the <code>tty</code> option in the configuration file.</p>
<p dir="auto">If you choose a tty that already has a login/getty running (has a basic login prompt),
then you have to disable getty, so it doesn&#39;t respawn on top of ly</p>
<div data-snippet-clipboard-copy-content="# rc-update del agetty.tty2"><pre><code># rc-update del agetty.tty2
</code></pre></div>

<div data-snippet-clipboard-copy-content="# zig build installrunit
# ln -s /etc/sv/ly /var/service/"><pre><code># zig build installrunit
# ln -s /etc/sv/ly /var/service/
</code></pre></div>
<p dir="auto">By default, ly will run on tty2. To change the tty it must be set in <code>/etc/ly/config.ini</code></p>
<p dir="auto">You should as well disable your existing display manager service if needed, e.g.:</p>

<p dir="auto">The agetty service for the tty console where you are running ly should be disabled.
For instance, if you are running ly on tty2 (that&#39;s the default, check your <code>/etc/ly/config.ini</code>)
you should disable the agetty-tty2 service like this:</p>
<div data-snippet-clipboard-copy-content="# rm /var/service/agetty-tty2"><pre><code># rm /var/service/agetty-tty2
</code></pre></div>

<p dir="auto">You can also install Ly without copying the system service and the configuration file. That&#39;s
called <em>updating</em>. To update, simply run:</p>
<div data-snippet-clipboard-copy-content="# zig build installnoconf"><pre><code># zig build installnoconf
</code></pre></div>
<p dir="auto">If you want to also copy the default config file (but still not the system service), run:</p>


<p dir="auto">You can install ly from the <a href="https://archlinux.org/packages/extra/x86_64/ly/" rel="nofollow"><code>[extra]</code> repos</a>:</p>


<p dir="auto">You can find all the configuration in <code>/etc/ly/config.ini</code>.
The file is commented, and includes the default values.</p>

<p dir="auto">Use the up and down arrow keys to change the current field, and the
left and right arrow keys to change the target desktop environment
while on the desktop field (above the login field).</p>

<p dir="auto">If your .xinitrc doesn&#39;t work make sure it is executable and includes a shebang.
This file is supposed to be a shell script! Quoting from xinit&#39;s man page:</p>
<blockquote>
<p dir="auto">If no specific client program is given on the command line, xinit will look for a file in the user&#39;s home directory called .xinitrc to run as a shell script to start up client programs.</p>
</blockquote>
<p dir="auto">On Arch Linux, the example .xinitrc (/etc/X11/xinit/xinitrc) starts like this:</p>


<p dir="auto">The numlock and capslock state is printed in the top-right corner.
Use the F1 and F2 keys to respectively shutdown and reboot.
Take a look at your .xsession if X doesn&#39;t start, as it can interfere
(this file is launched with X to configure the display properly).</p>

<p dir="auto">To enable the famous PSX DOOM fire described by <a href="http://fabiensanglard.net/doom_fire_psx/index.html" rel="nofollow">Fabien Sanglard</a>,
just set <code>animation = doom</code> in <code>/etc/ly/config.ini</code>. You may also
disable the main box borders with <code>hide_borders = true</code>.</p>

<p dir="auto">The name &#34;Ly&#34; is a tribute to the fairy from the game Rayman.
Ly was tested by oxodao, who is some seriously awesome dude.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Gentoo (OpenRC) installation tip</h2><a id="user-content-gentoo-openrc-installation-tip" aria-label="Permalink: Gentoo (OpenRC) installation tip" href="#gentoo-openrc-installation-tip"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To avoid a console spawning on top on Ly, comment out the appropriate line from /etc/inittab (default is 2).</p>
</article></div></div>
  </body>
</html>
