<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shiki.matsu.io/">Original</a>
    <h1>Shiki Syntax Highlighter</h1>
    
    <div id="readability-page-1" class="page">
<p><a href="https://github.com/shikijs/shiki">Shiki</a> is a beautiful Syntax Highlighter.</p>
<p>It uses TextMate grammar to tokenize strings, and colors the tokens with VS Code themes. In short, Shiki generates HTML that looks exactly like your code in VS Code, and it works great in your static website generator (or your dynamic website).</p>
<p>It&#39;s simple to use:</p>
<pre tabindex="0"><code><span><span>const</span><span> </span><span>shiki</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>shiki</span><span>&#39;</span><span>)</span></span>
<span></span>
<span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>nord</span><span>&#39;</span></span>
<span><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>highlighter</span><span> </span><span>=&gt;</span><span> </span><span>{</span></span>
<span><span>  </span><span>console</span><span>.</span><span>log</span><span>(</span><span>highlighter</span><span>.</span><span>codeToHtml</span><span>(</span><span>`</span><span>console.log(&#39;shiki&#39;);</span><span>`</span><span>,</span><span> </span><span>{</span><span> </span><span>lang</span><span>:</span><span> </span><span>&#39;</span><span>js</span><span>&#39;</span><span> </span><span>}</span><span>))</span></span>
<span><span>}</span><span>)</span></span>
<span></span>
<span><span>// &lt;pre class=&#34;shiki&#34; style=&#34;background-color: #2e3440&#34;&gt;&lt;code&gt;</span></span>
<span><span>//   &lt;!-- Highlighted Code --&gt;</span></span>
<span><span>// &lt;/code&gt;&lt;/pre&gt;</span></span>
<span></span></code></pre>
<p>Here&#39;s me using Shiki and <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> to <a href="https://github.com/octref/shiki/blob/main/packages/site/gen-index.js">generate</a> this page:</p>
<pre tabindex="0"><code><span><span>const</span><span> </span><span>fs</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>fs</span><span>&#39;</span><span>)</span></span>
<span><span>const</span><span> </span><span>markdown</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>markdown-it</span><span>&#39;</span><span>)</span></span>
<span><span>const</span><span> </span><span>shiki</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>shiki</span><span>&#39;</span><span>)</span></span>
<span></span>
<span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>nord</span><span>&#39;</span></span>
<span><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>highlighter</span><span> </span><span>=&gt;</span><span> </span><span>{</span></span>
<span><span>  </span><span>const</span><span> </span><span>md</span><span> </span><span>=</span><span> </span><span>markdown</span><span>(</span><span>{</span></span>
<span><span>    </span><span>html</span><span>:</span><span> </span><span>true</span><span>,</span></span>
<span><span>    </span><span>highlight</span><span>:</span><span> </span><span>(</span><span>code</span><span>,</span><span> </span><span>lang</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span></span>
<span><span>      </span><span>return</span><span> </span><span>highlighter</span><span>.</span><span>codeToHtml</span><span>(</span><span>code</span><span>,</span><span> </span><span>{</span><span> </span><span>lang</span><span> </span><span>}</span><span>)</span></span>
<span><span>    </span><span>}</span></span>
<span><span>  </span><span>}</span><span>)</span></span>
<span></span>
<span><span>  </span><span>const</span><span> </span><span>html</span><span> </span><span>=</span><span> </span><span>md</span><span>.</span><span>render</span><span>(</span><span>fs</span><span>.</span><span>readFileSync</span><span>(</span><span>&#39;</span><span>index.md</span><span>&#39;</span><span>,</span><span> </span><span>&#39;</span><span>utf-8</span><span>&#39;</span><span>))</span></span>
<span><span>  </span><span>const</span><span> </span><span>out</span><span> </span><span>=</span><span> </span><span>`</span></span>
<span><span>    &lt;title&gt;Shiki&lt;/title&gt;</span></span>
<span><span>    &lt;link rel=&#34;stylesheet&#34; href=&#34;style.css&#34;&gt;</span></span>
<span><span>    </span><span>${</span><span>html</span><span>}</span></span>
<span><span>    &lt;script src=&#34;index.js&#34;&gt;&lt;/script&gt;</span></span>
<span><span>  </span><span>`</span></span>
<span><span>  </span><span>fs</span><span>.</span><span>writeFileSync</span><span>(</span><span>&#39;</span><span>index.html</span><span>&#39;</span><span>,</span><span> </span><span>out</span><span>)</span></span>
<span></span>
<span><span>  </span><span>console</span><span>.</span><span>log</span><span>(</span><span>&#39;</span><span>done</span><span>&#39;</span><span>)</span></span>
<span><span>}</span><span>)</span></span>
<span></span></code></pre>
<p>Why Shiki though? Take a look at this <a href="https://github.com/Microsoft/TypeScript-TmLanguage/blob/master/TypeScriptReact.tmLanguage">monstrous TextMate grammar</a>. It&#39;s what highlights TypeScript code in VS Code. Insane, I know. But it gets the color right.</p>
<pre tabindex="0"><code><span><span>import</span><span> </span><span>*</span><span> </span><span>as</span><span> </span><span>React</span><span> </span><span>from</span><span> </span><span>&#39;</span><span>react</span><span>&#39;</span><span>;</span></span>
<span><span>import</span><span> </span><span>&#39;</span><span>./App.css</span><span>&#39;</span><span>;</span></span>
<span><span>import</span><span> </span><span>Hello</span><span> </span><span>from</span><span> </span><span>&#39;</span><span>./components/Hello</span><span>&#39;</span><span>;</span></span>
<span></span>
<span><span>const</span><span> </span><span>logo</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>./logo.svg</span><span>&#39;</span><span>)</span><span>;</span></span>
<span></span>
<span><span>function</span><span> </span><span>App</span><span>()</span><span> </span><span>{</span></span>
<span><span>  </span><span>return</span><span> (</span></span>
<span><span>    </span><span>&lt;div</span><span> </span><span>className</span><span>=</span><span>&#34;</span><span>App</span><span>&#34;</span><span>&gt;</span></span>
<span><span>      </span><span>&lt;div</span><span> </span><span>className</span><span>=</span><span>&#34;</span><span>App-header</span><span>&#34;</span><span>&gt;</span></span>
<span><span>        </span><span>&lt;img</span><span> </span><span>src</span><span>={</span><span>logo</span><span>}</span><span> </span><span>className</span><span>=</span><span>&#34;</span><span>App-logo</span><span>&#34;</span><span> </span><span>alt</span><span>=</span><span>&#34;</span><span>logo</span><span>&#34;</span><span> </span><span>/&gt;</span></span>
<span><span>        </span><span>&lt;h2&gt;</span><span>Welcome to React</span><span>&lt;/h2&gt;</span></span>
<span><span>      </span><span>&lt;/div&gt;</span></span>
<span><span>      </span><span>&lt;p</span><span> </span><span>className</span><span>=</span><span>&#34;</span><span>App-intro</span><span>&#34;</span><span>&gt;</span></span>
<span><span>        To get started, edit </span><span>&lt;code&gt;</span><span>src/App.tsx</span><span>&lt;/code&gt;</span><span> and save to reload.</span></span>
<span><span>      </span><span>&lt;/p&gt;</span></span>
<span><span>      </span><span>&lt;</span><span>Hello</span><span> </span><span>name</span><span>=</span><span>&#34;</span><span>TypeScript</span><span>&#34;</span><span> </span><span>/&gt;</span></span>
<span><span>    </span><span>&lt;/div&gt;</span></span>
<span><span>  )</span><span>;</span></span>
<span><span>}</span></span>
<span></span>
<span><span>export</span><span> </span><span>default</span><span> </span><span>App</span><span>;</span></span>
<span></span></code></pre>
<p>Besides VS Code, TextMate (of course), Sublime Text and Atom all support <a href="https://macromates.com/manual/en/language_grammars">TextMate grammar</a>. If you can get syntax highlighting to work for <a href="https://codewithrockstar.com/">your favorite language</a> in any one of them, try to <a href="https://github.com/ra100/vscode-rockstar-language/blob/master/syntaxes/rockstar.tmLanguage.json">find its grammar</a> and load it in Shiki to syntax highlight it:</p>
<pre tabindex="0"><code><span><span>const</span><span> </span><span>shiki</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>shiki</span><span>&#39;</span><span>)</span></span>
<span></span>
<span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>nord</span><span>&#39;</span><span>,</span></span>
<span><span>  </span><span>langs</span><span>:</span><span> [</span></span>
<span><span>    </span><span>{</span></span>
<span><span>      </span><span>id</span><span>:</span><span> </span><span>&#39;</span><span>rockstar</span><span>&#39;</span><span>,</span></span>
<span><span>      </span><span>scopeName</span><span>:</span><span> </span><span>&#39;</span><span>source.rockstar</span><span>&#39;</span><span>,</span></span>
<span><span>      </span><span>path</span><span>:</span><span> </span><span>&#39;</span><span>./rockstar.tmLanguage.json</span><span>&#39;</span><span> </span><span>// or `plist`</span></span>
<span><span>    </span><span>}</span></span>
<span><span>  ]</span></span>
<span><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>highlighter</span><span> </span><span>=&gt;</span><span> </span><span>{</span></span>
<span><span>  </span><span>highlighter</span><span>.</span><span>codeToHtml</span><span>(</span><span>&#39;</span><span>Shout Rockstar</span><span>&#39;</span><span>,</span><span> </span><span>{</span><span> </span><span>lang</span><span>:</span><span> </span><span>&#39;</span><span>rockstar</span><span>&#39;</span><span> </span><span>}</span><span>)</span></span>
<span><span>}</span><span>)</span></span>
<span></span></code></pre>

<p>Over <a href="https://github.com/shikijs/shiki/tree/main/docs/languages.md">100 programming languages</a> are supported out of the box, including a traditional Chinese one, <a href="https://wy-lang.org/">文言</a>:</p>

<p>Shiki can load any VS Code themes. Just change this line:</p>
<pre tabindex="0"><code><span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>material-theme-palenight</span><span>&#39;</span></span>
<span><span>}</span><span>)</span></span>
<span></span></code></pre>
<p>And you get the above code in <a href="https://github.com/equinusocio/vsc-material-theme">Material Palenight</a>.</p>

<!-- <div id="palenight"></div> -->
<p>You can find all bundled themes in <a href="https://github.com/octref/shiki/tree/main/docs/themes.md">shiki-themes</a>, and use them like:</p>
<pre tabindex="0"><code><span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>// &#39;dark-plus&#39;   | &#39;light-plus&#39;     =&gt; for the classic VS Code feel</span></span>
<span><span>  </span><span>// &#39;github-dark&#39; | &#39;github-light&#39;   =&gt; for the GitHub feel</span></span>
<span><span>  </span><span>// &#39;material-theme-*&#39;               =&gt; for the materialists</span></span>
<span><span>  </span><span>// &#39;min-dark&#39;    | &#39;min-light&#39;      =&gt; for the minimalists</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>nord</span><span>&#39;</span></span>
<span><span>}</span><span>)</span></span>
<span></span></code></pre>
<p>But really, any VS Code theme will do. Here&#39;s <a href="https://github.com/anotherglitchinthematrix/monochrome">anotherglitchinthematrix/monochrome</a>:</p>

<p>Embedded language like Vue works great, too:</p>
<pre tabindex="0"><code><span><span>&lt;template&gt;</span></span>
<span><span>  </span><span>&lt;div</span><span> </span><span>id</span><span>=</span><span>&#34;</span><span>app</span><span>&#34;</span><span>&gt;</span></span>
<span><span>    </span><span>&lt;h1&gt;</span><span>My Todo App!</span><span>&lt;/h1&gt;</span></span>
<span><span>    </span><span>&lt;</span><span>TodoList</span><span>/&gt;</span></span>
<span><span>  </span><span>&lt;/div&gt;</span></span>
<span><span>&lt;/template&gt;</span></span>
<span></span>
<span><span>&lt;script&gt;</span></span>
<span><span>import</span><span> </span><span>TodoList</span><span> </span><span>from</span><span> </span><span>&#39;</span><span>./components/TodoList.vue</span><span>&#39;</span></span>
<span></span>
<span><span>export</span><span> </span><span>default</span><span> </span><span>{</span></span>
<span><span>  </span><span>components</span><span>:</span><span> </span><span>{</span></span>
<span><span>    </span><span>TodoList</span></span>
<span><span>  </span><span>}</span></span>
<span><span>}</span></span>
<span><span>&lt;/script&gt;</span></span>
<span></span>
<span><span>&lt;style</span><span> </span><span>lang</span><span>=</span><span>&#34;</span><span>scss</span><span>&#34;</span><span>&gt;</span></span>
<span><span>#</span><span>app</span><span> </span><span>{</span></span>
<span><span>  </span><span>max-width</span><span>:</span><span> </span><span>400</span><span>px;</span></span>
<span><span>  </span><span>margin</span><span>:</span><span> </span><span>0</span><span> </span><span>auto;</span></span>
<span><span>  </span><span>line-height</span><span>:</span><span> </span><span>1.4</span><span>;</span></span>
<span><span>  </span><span>font-family</span><span>:</span><span> </span><span>&#39;</span><span>Avenir</span><span>&#39;</span><span>, </span><span>Helvetica</span><span>, </span><span>Arial</span><span>, </span><span>sans-serif;</span></span>
<span><span>  </span><span>-webkit-font-smoothing</span><span>:</span><span> </span><span>antialiased;</span></span>
<span><span>  </span><span>-moz-osx-font-smoothing</span><span>:</span><span> </span><span>grayscale;</span></span>
<span><span>  </span><span>color</span><span>:</span><span> </span><span>$vue-blue</span><span>;</span></span>
<span></span>
<span><span>  </span><span>h1</span><span> </span><span>{</span></span>
<span><span>    </span><span>text-align</span><span>:</span><span> </span><span>center;</span></span>
<span><span>  </span><span>}</span></span>
<span><span>}</span></span>
<span><span>&lt;/style&gt;</span></span>
<span></span></code></pre>
<p>For those visually attentive, render your code to SVG,</p>

<p>drop the SVG into Figma, Affinity Designer or Adobe Illustrator,</p>
<p><img src="https://shiki.matsu.io/assets/svg-figma-af.jpg" alt="Dropping into Figma and Affinity Designer"/></p>
<p>and use the full arsenal of vector editing tools to enhance your code presentation:</p>
<p><img src="https://shiki.matsu.io/assets/figma-editing.png" alt="Editing In Figma"/></p>
<p>You can also build custom renderers to generate anything — a different HTML structure, SVG, or even images:</p>
<pre tabindex="0"><code><span><span>const</span><span> </span><span>shiki</span><span> </span><span>=</span><span> </span><span>require</span><span>(</span><span>&#39;</span><span>shiki</span><span>&#39;</span><span>)</span></span>
<span></span>
<span><span>shiki</span><span>.</span><span>getHighlighter</span><span>(</span><span>{</span></span>
<span><span>  </span><span>theme</span><span>:</span><span> </span><span>&#39;</span><span>nord</span><span>&#39;</span></span>
<span><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>highlighter</span><span> </span><span>=&gt;</span><span> </span><span>{</span></span>
<span><span>  </span><span>const</span><span> </span><span>tokens</span><span> </span><span>=</span><span> </span><span>highlighter</span><span>.</span><span>codeToThemedTokens</span><span>(</span><span>`</span><span>console.log(&#39;shiki&#39;);</span><span>`</span><span>,</span><span> </span><span>&#39;</span><span>js</span><span>&#39;</span><span>)</span></span>
<span><span>  </span><span>// default renderer, replace with yours</span></span>
<span><span>  </span><span>const</span><span> </span><span>html</span><span> </span><span>=</span><span> </span><span>shiki</span><span>.</span><span>renderToHtml</span><span>(</span><span>tokens</span><span>) </span></span>
<span><span>}</span><span>)</span></span>
<span></span></code></pre>
<p>Shiki is now used on <a href="https://code.visualstudio.com/api/extension-guides/notebook">VS Code website</a> to teach VS Code API, and on <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple">TypeScript website</a> to teach TypeScript:</p>
<p><img src="https://shiki.matsu.io/assets/vscode-ts.png" alt="VS Code and TypeScript website"/></p>
<p>Among all usages of Shiki, I like Fatih Kalifa&#39;s <a href="https://fatihkalifa.com/typescript-twoslash">beautiful presentation</a> most. Leandro Facchinetti has made <a href="https://github.com/leafac/shiki-latex">shiki-latex</a> to format his <a href="https://github.com/leafac/yocto-cfa">PhD dissertation</a>, which makes me feel incredibly inspired.</p>
<p><img src="https://shiki.matsu.io/assets/leandro-fatih.png" alt="Fatih Kalifa&#39;s website and Leandro Facchinetti&#39;s dissertation"/></p>
<p>Made by <a href="https://blog.matsu.io/about">Pine</a>. I enjoy building tools to help others. If you have found Shiki useful, please consider <a href="https://github.com/sponsors/octref">sponsoring</a> my Open Source development. Thank you.</p>

    
  </div>
  </body>
</html>
