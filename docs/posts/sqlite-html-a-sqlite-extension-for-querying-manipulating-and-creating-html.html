<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/asg017/sqlite-html">Original</a>
    <h1>SQLite-HTML: A SQLite extension for querying, manipulating, and creating HTML</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">A SQLite extension for querying, manipulating, and creating HTML elements.</p>
<ul dir="auto">
<li>Extract HTML or text from HTML with CSS selectors, like <code>.querySelector()</code>, <code>.innerHTML</code>, and <code>.innerText</code></li>
<li>Generate a table of matching elements from a CSS selector, like <code>.querySelectorAll()</code></li>
<li>Safely create HTML elements in a query, like <code>.createElement()</code> and <code>.appendChild()</code></li>
</ul>
<p dir="auto"><code>sqlite-html</code>&#39;s API is modeled after the official <a href="https://www.sqlite.org/json1.html#jmini" rel="nofollow">JSON1</a> SQLite extension.</p>
<p dir="auto">This extension is written in Go, thanks to <a href="https://github.com/riyaz-ali/sqlite">riyaz-ali/sqlite</a>. While this library aims to be fast and efficient, it is overall slower than what a pure C SQLite extension could be, but in practice you may not notice much of a difference.</p>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<div data-snippet-clipboard-copy-content=".load ./html0
select html_extract(&#39;&lt;p&gt; Anakin &lt;b&gt;Skywalker&lt;/b&gt; &lt;/p&gt;&#39;, &#39;b&#39;);
-- &#34;&lt;b&gt;Skywalker&lt;/b&gt;&#34;"><pre>.load .<span>/</span>html0
<span>select</span> html_extract(<span><span>&#39;</span>&lt;p&gt; Anakin &lt;b&gt;Skywalker&lt;/b&gt; &lt;/p&gt;<span>&#39;</span></span>, <span><span>&#39;</span>b<span>&#39;</span></span>);
<span><span>--</span> &#34;&lt;b&gt;Skywalker&lt;/b&gt;&#34;</span></pre></div>
<p dir="auto"><code>sqlite-html</code> is similar to other HTML scraping tools like <a href="https://beautiful-soup-4.readthedocs.io/en/latest/" rel="nofollow">BeautifulSoup</a> (Python) or <a href="https://cheerio.js.org/" rel="nofollow">cheerio</a> (Node.js) or <a href="https://nokogiri.org/" rel="nofollow">nokogiri</a> (Ruby). You can use CSS selectors to extract individual elements or groups of elements to query data from HTML sources.</p>
<p dir="auto">For example, here we find all <code>href</code> links in an <code>index.html</code> file.</p>
<div data-snippet-clipboard-copy-content="select
  text as name,
  html_attribute_get(anchors, &#39;a&#39;, &#39;href&#39;) as href
from html_each(readfile(&#39;index.html&#39;), &#39;a&#39;) as anchors"><pre><span>select</span>
  <span>text</span> <span>as</span> name,
  html_attribute_get(anchors, <span><span>&#39;</span>a<span>&#39;</span></span>, <span><span>&#39;</span>href<span>&#39;</span></span>) <span>as</span> href
<span>from</span> html_each(readfile(<span><span>&#39;</span>index.html<span>&#39;</span></span>), <span><span>&#39;</span>a<span>&#39;</span></span>) <span>as</span> anchors</pre></div>
<p dir="auto">We can also safely generate HTML with <code>html_element</code>, modeled after React&#39;s <a href="https://reactjs.org/docs/react-api.html#createelement" rel="nofollow"><code>React.createElement</code></a>.</p>
<div data-snippet-clipboard-copy-content="select html_element(&#39;p&#39;, null,
  &#39;Luke, I am your&#39;,
  html_element(&#39;b&#39;, null, &#39;father&#39;),
  &#39;!&#39;,

  html_element(&#39;img&#39;, json_object(
    &#39;src&#39;, &#39;https://images.dog.ceo/breeds/groenendael/n02105056_4600.jpg&#39;,
    &#39;width&#39;, 200
  ))
);

-- &#34;&lt;p&gt;Luke, I am your&lt;b&gt;father&lt;/b&gt;!&lt;img src=&#34;https://images.dog.ceo/breeds/groenendael/n02105056_4600.jpg&#34; width=&#34;200.000000&#34;/&gt;&lt;/p&gt;&#34;"><pre><span>select</span> html_element(<span><span>&#39;</span>p<span>&#39;</span></span>, <span>null</span>,
  <span><span>&#39;</span>Luke, I am your<span>&#39;</span></span>,
  html_element(<span><span>&#39;</span>b<span>&#39;</span></span>, <span>null</span>, <span><span>&#39;</span>father<span>&#39;</span></span>),
  <span><span>&#39;</span>!<span>&#39;</span></span>,

  html_element(<span><span>&#39;</span>img<span>&#39;</span></span>, json_object(
    <span><span>&#39;</span>src<span>&#39;</span></span>, <span><span>&#39;</span>https://images.dog.ceo/breeds/groenendael/n02105056_4600.jpg<span>&#39;</span></span>,
    <span><span>&#39;</span>width<span>&#39;</span></span>, <span>200</span>
  ))
);

<span><span>--</span> &#34;&lt;p&gt;Luke, I am your&lt;b&gt;father&lt;/b&gt;!&lt;img src=&#34;https://images.dog.ceo/breeds/groenendael/n02105056_4600.jpg&#34; width=&#34;200.000000&#34;/&gt;&lt;/p&gt;&#34;</span></pre></div>
<h2 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h2>
<p dir="auto">See <a href="https://github.com/asg017/sqlite-html/blob/main/docs.md"><code>docs.md</code></a> for a full API reference.</p>
<h2 dir="auto"><a id="user-content-installing" aria-hidden="true" href="#installing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing</h2>
<p dir="auto">The <a href="https://github.com/asg017/sqlite-lines/releases">Releases page</a> contains pre-built binaries for Linux amd64, MacOS amd64 (no arm), and Windows.</p>
<h3 dir="auto"><a id="user-content-as-a-loadable-extension" aria-hidden="true" href="#as-a-loadable-extension"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>As a loadable extension</h3>
<p dir="auto">If you want to use <code>sqlite-html</code> as a <a href="https://www.sqlite.org/loadext.html" rel="nofollow">Runtime-loadable extension</a>, Download the <code>html0.dylib</code> (for MacOS), <code>html0.so</code> (Linux), or <code>html0.dll</code> (Windows) file from a release and load it into your SQLite environment.</p>
<blockquote>
<p dir="auto"><strong>Note:</strong>
The <code>0</code> in the filename (<code>html0.dylib</code>/ <code>html0.so</code>/<code>html0.dll</code>) denotes the major version of <code>sqlite-html</code>. Currently <code>sqlite-html</code> is pre v1, so expect breaking changes in future versions.</p>
</blockquote>
<p dir="auto">For example, if you are using the <a href="https://www.sqlite.org/cli.html" rel="nofollow">SQLite CLI</a>, you can load the library like so:</p>
<div data-snippet-clipboard-copy-content=".load ./html0
select html_version();
-- v0.0.1"><pre>.load .<span>/</span>html0
<span>select</span> html_version();
<span><span>--</span> v0.0.1</span></pre></div>
<p dir="auto">Or in Python, using the builtin <a href="https://docs.python.org/3/library/sqlite3.html" rel="nofollow">sqlite3 module</a>:</p>
<div data-snippet-clipboard-copy-content="import sqlite3

con = sqlite3.connect(&#34;:memory:&#34;)

con.enable_load_extension(True)
con.load_extension(&#34;./html0&#34;)

print(con.execute(&#34;select html_version()&#34;).fetchone())
# (&#39;v0.0.1&#39;,)"><pre><span>import</span> <span>sqlite3</span>

<span>con</span> <span>=</span> <span>sqlite3</span>.<span>connect</span>(<span>&#34;:memory:&#34;</span>)

<span>con</span>.<span>enable_load_extension</span>(<span>True</span>)
<span>con</span>.<span>load_extension</span>(<span>&#34;./html0&#34;</span>)

<span>print</span>(<span>con</span>.<span>execute</span>(<span>&#34;select html_version()&#34;</span>).<span>fetchone</span>())
<span># (&#39;v0.0.1&#39;,)</span></pre></div>
<p dir="auto">Or in Node.js using <a href="https://github.com/WiseLibs/better-sqlite3">better-sqlite3</a>:</p>
<div data-snippet-clipboard-copy-content="const Database = require(&#34;better-sqlite3&#34;);
const db = new Database(&#34;:memory:&#34;);

db.loadExtension(&#34;./lines0&#34;);

console.log(db.prepare(&#34;select html_version()&#34;).get());
// { &#39;html_version()&#39;: &#39;v0.0.1&#39; }"><pre><span>const</span> <span>Database</span> <span>=</span> <span>require</span><span>(</span><span>&#34;better-sqlite3&#34;</span><span>)</span><span>;</span>
<span>const</span> <span>db</span> <span>=</span> <span>new</span> <span>Database</span><span>(</span><span>&#34;:memory:&#34;</span><span>)</span><span>;</span>

<span>db</span><span>.</span><span>loadExtension</span><span>(</span><span>&#34;./lines0&#34;</span><span>)</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>db</span><span>.</span><span>prepare</span><span>(</span><span>&#34;select html_version()&#34;</span><span>)</span><span>.</span><span>get</span><span>(</span><span>)</span><span>)</span><span>;</span>
<span>// { &#39;html_version()&#39;: &#39;v0.0.1&#39; }</span></pre></div>
<p dir="auto">Or with <a href="https://datasette.io/" rel="nofollow">Datasette</a>:</p>
<div data-snippet-clipboard-copy-content="datasette data.db --load-extension ./html0"><pre><code>datasette data.db --load-extension ./html0
</code></pre></div>
<h2 dir="auto"><a id="user-content-see-also" aria-hidden="true" href="#see-also"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See also</h2>
<ul dir="auto">
<li><a href="https://github.com/asg017/sqlite-http">sqlite-http</a>, for making HTTP requests in SQLite (pairs great with this tool)</li>
<li><a href="https://github.com/mgdm/htmlq">htmlq</a>, for a similar but CLI-based HTML query tool using CSS selectors</li>
<li><a href="https://github.com/riyaz-ali/sqlite">riyaz-ali/sqlite</a>, the brilliant Go library that this library depends on</li>
<li><a href="https://github.com/nalgeon/sqlean">nalgeon/sqlean</a>, several pre-compiled handy SQLite functions, in C</li>
</ul>
</article>
          </div></div>
  </body>
</html>
