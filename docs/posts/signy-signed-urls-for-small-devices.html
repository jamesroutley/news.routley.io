<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/golioth/signy">Original</a>
    <h1>Signy: Signed URLs for Small Devices</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Signed URLs for small devices.</p>

<p dir="auto"><code>signy</code> is a library for generating signed URLs on embedded devices using
asymmetric cryptography. Signed URLs are typically utilized to grant
time-limited access to private resources, such as those served by a <a href="https://en.wikipedia.org/wiki/Content_delivery_network" rel="nofollow">Content
Delivery Network (CDN)</a>.
In the context of embedded devices, signed URLs may be used to enable an
external system, or another component in the same system, to access a specific
resource. For example, a device may generate a signed URL and pass it to a more
capable system to allow it to download the resource on its behalf.</p>
<p dir="auto">Use of <code>signy</code> requires a server that is capable of verifying the signed URLs it
generates. If using <code>signy</code> with <a href="https://golioth.io" rel="nofollow">Golioth</a>, the certificates
associated with the Certificate Authority (CA) that issued the device
certificate must be <a href="https://docs.golioth.io/connectivity/credentials/pki#integrating-with-golioth" rel="nofollow">uploaded to your
project</a>.</p>

<p dir="auto"><code>signy</code> leverages the <a href="https://arm-software.github.io/psa-api/crypto/" rel="nofollow">Platform Security Architecture (PSA) Crypto
API</a> for signing operations.
Private keys must be
<a href="https://arm-software.github.io/psa-api/crypto/1.3/api/keys/management.html#c.psa_generate_key" rel="nofollow">generated</a>
or
<a href="https://arm-software.github.io/psa-api/crypto/1.3/api/keys/management.html#c.psa_import_key" rel="nofollow">imported</a>
using PSA Crypto APIs, and a signed certificate containing the public key must
be passed to the <code>signy</code> library.</p>
<p dir="auto">Signed URLs generated by <code>signy</code> adhere to the following format.</p>
<div data-snippet-clipboard-copy-content="BASEURL?nb=NOTBEFORE&amp;na=NOTAFTER&amp;cert=CERTIFICATE&amp;sig=SIGNATURE"><pre><code>BASEURL?nb=NOTBEFORE&amp;na=NOTAFTER&amp;cert=CERTIFICATE&amp;sig=SIGNATURE
</code></pre></div>
<ul dir="auto">
<li><code>BASEURL</code>: the location of the resource (e.g.
<code>https://gw.golioth.io/.u/c/image@1.0.0</code>)</li>
<li><code>NOTBEFORE</code> / <code>NOTAFTER</code>: the unix timestamps defining the window in which the
signed URL is valid. <code>signy</code> uses the device system time for <code>NOTBEFORE</code> and
sets the <code>NOTAFTER</code> timestamp based on <code>CONFIG_SIGNY_URL_VALIDITY_DURATION</code>.</li>
<li><code>CERTIFICATE</code>: the base64 unpadded URL encoding of the device certificate.</li>
<li><code>SIGNATURE</code>: the signature over the entire portion of the URL preceding
<code>&amp;sig=</code>.</li>
</ul>

<p dir="auto">The <code>signy</code> repository is a <a href="https://docs.zephyrproject.org/latest/develop/modules.html" rel="nofollow">Zephyr
module</a> and can be
included in any Zephyr project by adding the following to the project&#39;s
<code>west.yml</code> file.</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: signy
  path: modules/lib/signy
  revision: v0.2.0
  url: https://github.com/golioth/signy.git"><pre>- <span>name</span>: <span>signy</span>
  <span>path</span>: <span>modules/lib/signy</span>
  <span>revision</span>: <span>v0.2.0</span>
  <span>url</span>: <span>https://github.com/golioth/signy.git</span></pre></div>
<p dir="auto">See the Zephyr <a href="https://github.com/golioth/signy/blob/main/examples/zephyr">examples</a> for more information.</p>

<p dir="auto">The <code>signy</code> repository is an <a href="https://docs.espressif.com/projects/idf-component-manager/en/latest/guides/packaging_components.html" rel="nofollow">ESP-IDF
component</a>
and can be included in any ESP-IDF project by specifying it as a dependency in
the project&#39;s <code>idf_component.yml</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="dependencies:
  signy:
    version: v0.2.0
    git: https://github.com/golioth/signy.git"><pre><span>dependencies</span>:
  <span>signy</span>:
    <span>version</span>: <span>v0.2.0</span>
    <span>git</span>: <span>https://github.com/golioth/signy.git</span></pre></div>
<p dir="auto">See the <code>esp-idf</code> <a href="https://github.com/golioth/signy/blob/main/examples/esp-idf">examples</a> for more information.</p>
</article></div></div>
  </body>
</html>
