<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://nicole.express/2023/the-best-take-on-iran-contra.html">Original</a>
    <h1>The Parts-Bin Approach: Konami’s Contra</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Over and over, I look at games that are part of “systems”: the Sega <a href="https://nicole.express/2021/sega-system-1-system-1.html">System 1</a>, the <a href="https://nicole.express/2021/ultra-mega-hyper-neo-geo-64.html">Hyper Neo Geo 64</a>, the <a href="https://nicole.express/2022/games-made-in-a-cave.html">CAVE CV1000</a>. But there ain’t no rule that says you <em>have</em> to organize your games that way. You could just take whatever parts are most convenient. The <em>Panic Road</em> board I built a <a href="https://nicole.express/2022/panic-at-the-road.html">pinball controller</a> for is one example. But Konami is probably most associated with this approach. Let’s take <em>Contra</em> as a case study.</p>

<h2 id="contra-is-an-arcade-game"><em>Contra</em> is an arcade game?</h2>

<p><img src="https://nicole.express/assets/img/konamix/title.jpg" title="kind of surprised he still has the cigarette in the NES version" alt="Contra title screen"/></p>

<p><em>Contra</em> is a good example of a game whose original got completely overshadowed by the theoretically technically inferior NES port. Honestly I can see why; the NES forced the game to lose the weird vertical orientation and pastel color schemes, and it desperately needed some good co-op platformers. This version of the game’s still a fun play, though.</p>

<p><img src="https://nicole.express/assets/img/konamix/game.jpg" title="War is hell, son. Sometimes you can&#39;t see very far in front of you" alt="Contra gameplay in arcade"/></p>

<p>Arcade <em>Contra</em> is from 1987. I would say from a hardware standpoint, there’s nothing particularly state-of-the-art, but it’s nothing to sneeze at either. Multiple scrolling tilemaps and sprites, 15-bit color depth, and FM synth music. Admittedly, the levels are a bit shorter than the NES version.</p>

<p><img src="https://nicole.express/assets/img/konamix/score.jpg" title="What revision of the game is this? No idea" alt="Contra high score screen"/></p>

<p>So, how did Konami put this game together? <a href="http://www.system16.com/hardware.php?id=565&amp;gid=789#789">System16.com</a> reports a “Contra-based hardware” family, but as we’ll see, it’s only a very loose term.</p>

<h2 id="the-board">The board</h2>

<p><img src="https://nicole.express/assets/img/konamix/floorboard.JPEG" title="pick that up" alt="Konami Contra motherboard on the floor"/></p>

<p>Here it is: the Konami GX633 motherboard, used for <em>Contra</em> and nothing else. Unless you count <em>Gryzor</em> as a different game, which you really shouldn’t. (Looking for <em>Probotector</em>? That name was a console exclusive)</p>

<p><img src="https://nicole.express/assets/img/konamix/cpu.JPEG" title="the 6309 is one of the best 8-bit CPUs, but didn&#39;t get too much use" alt="Hitachi 63C09E"/></p>

<p>The CPU powering the show is the Hitachi 6309. Hitachi took Motorola’s well-regarded 6809, used in the <a href="https://nicole.express/2021/delicious-vectrex-pi.html">Vectrex</a> among other machines, and upgraded it to CMOS, as well as adding some nice performance improvements. You can think of it as the <a href="https://nicole.express/2018/replacing-the-cpu-in-a-tandy-1000-hx.html">V20</a> to the 6809’s 8088. Speaking of the 6809, Konami used one of those as the secondary sound CPU, also manufactured by Hitachi.</p>

<p><img src="https://nicole.express/assets/img/konamix/suond.JPEG" title="there&#39;s no way they&#39;ll tell we&#39;re using FM synthesis now! not like it&#39;s distinct or anything" alt="Sound CPU, a ROM, and a chip whose label is scratched off"/></p>

<p>Take a look below to CPU to see a chip whose label is scratched off here. That’s the Yamaha YM2151 FM synthesizer, used in the famous DX100 synth. Why it (and what I presume is its DAC) have had their surfaces scratched off is beyond me; I’m not sure if this is something Konami did or something else that happened to this board over its long life.</p>

<p><img src="https://nicole.express/assets/img/konamix/stereo.JPEG" title="the sweet sound of silence" alt="Sound mixers and a bunch of jumpers"/></p>

<p>Speaking of audio; this is actually a stereo game! You choose either stereo or mono based on the loopback connector’s position in CN3 or CN4; right now it’s in mono, but when I got it it was set to stereo; stereo sound is output through the CN2 connector, which has had its wires cut. One of these days I should wire up some RCA jacks to that connector; stereo sound on arcade boards is not common in this era.</p>

<h3 id="dual-videos-again">Dual videos again</h3>

<p><img src="https://nicole.express/assets/img/konamix/video.JPEG" title="is that an intel CPU" alt="A large chip with many pins"/></p>

<p>This beautiful large chip is the Konami 007121. (Konami custom chips often have a numeric code beginning with two zeroes) This is a pretty decent tilemap and sprites graphics chip, used in the following games:</p>

<ul>
  <li><em>Combat School</em></li>
  <li><em>Fast Lane</em></li>
  <li><em>Flak Attack</em></li>
  <li><em>Contra</em> (obviously)</li>
  <li><em>Haunted Castle</em></li>
  <li><em>Trick Trap</em></li>
</ul>

<p>In fact, I’m pretty sure the presence of the Konami 007121 is what System16 is using to define as the “<em>Contra</em>-based hardware”. But it’s worth noting that not every game that used the Konami 007121 used it in the same configuration. For example, <em>Contra</em> has two of them.</p>

<p><img src="https://nicole.express/assets/img/konamix/two.jpeg" title="out of hand, etc" alt="Two video chips"/></p>

<p>This is a lot like the <a href="https://nicole.express/2020/super-ultra-mega-tera-grafx.html">SuperGrafx</a> or the <a href="https://nicole.express/2022/the-sega-master-system-yet-again.html">Sega System E</a>; the difference is that this is pretty much par for the course for Konami. Note that much like the System E, I don’t believe there is as much priority control as the SuperGrafx. How the layers are drawn doesn’t vary. It doesn’t need to; this is a machine that just needs to play one game.</p>

<p><img src="https://nicole.express/assets/img/konamix/video2.JPEG" title="what could be inside" alt="A large black potted board"/></p>

<p>We’ll wrap up the video circuitry with the Konami 007593. This is another Konami part that was used in several places; here, it serves primarily as a video DAC. <a href="https://github.com/mamedev/mame/blob/0d1230d9693a77e332eeac959274dde099a7204f/src/mame/konami/contra.cpp#L73">MAME</a> claims it also has some I/O capability that isn’t used here. In any case, <a href="https://www.jammarcade.net/konami-007593-007327-reproduction/">jammarcade.net</a> has done some reverse engineering here to produce reproductions.</p>

<p>And yes, Konami did feel the need to extend their 00xxxx codes to the resistor packs, labeled 005273. I assume these opaque parts codes were meant at least in part to make things a little harder for bootleggers. Sure, you can’t stop them, but you can slow them down.</p>

<h3 id="one-more-thing">One more thing</h3>

<p><img src="https://nicole.express/assets/img/konamix/007452.jpeg" title="HIGH PIN DENSITY" alt="chip labeled VRC&amp;DMP 007452"/></p>

<p>Look just to the right of the 6309 CPU in the corner: here’s another Konami custom chip, the 007452. It’s also labeled the VRC&amp;DMP, and even better, <a href="https://www.patreon.com/posts/49965048">furrtek</a> has already done a very deep analysis of it, including decapping. The 007452 has some neat multiplication and division functionality; the 6809 has a hardware <code>MUL</code> opcode, and furrtek reports that the 007452’s multiply functionality isn’t used by <em>Contra</em>; only its division.</p>

<p><img src="https://nicole.express/assets/img/konamix/tubes.jpg" title="the Super Spy did it better. it didn&#39;t do anything else better that Contra did well, though" alt="Contra 3D stage"/></p>

<p>It also has bankswitching functionality; given the name VRC corresponds with the VRC series of mappers Konami used in Japan, that’s probably what this part of the “VRC&amp;DMP” name means. In that case, VRC stands for Virtual ROM Controller; if I had to guess, I’d assume DMP stands for Division and Multiplication Processor, but who knows. Furrtek’s work made it into <a href="https://www.mamedev.org/?p=498">MAME 0.231</a> in 2021, making the 3D stages in <em>Contra</em> just a little harder.</p>

<h2 id="why">Why</h2>

<p>So, why did Konami do this? Your guess is as good as mine; maybe they preferred the flexibility for developers over the flexibility of sales. A big advantage of the “System” setup that companies like Sega used is that a flop could easily be converted into a bigger seller; in the case of the System 16 and the System E, probably <em>Tetris</em>. Had <em>Contra</em> been a flop, Konami could’ve reused some parts, but the circuitboards would be useless.</p>

<p><img src="https://nicole.express/assets/img/konamix/spooky.png" title="a haunted DRACULA castle, perhaps?" alt="Haunted Castle title screen"/></p>

<p>But there were other benefits to Konami’s approach beyond programmer flexibility. Here’s <em>Haunted Castle</em>, another Konami game that used dual 007121 graphics chips. An enterprising pirate might want to convert <em>Contra</em> to this game; either because it’s 1988 and it’s the hot title, or it’s 2023 and <em>Haunted Castle</em> didn’t sell very well (it’s not great) but is associated with a famous series, so goes for way more money on the aftermarket. Well, too bad– <em>Haunted Castle</em> may use the same graphics chip, but it uses different Konami sound chips and a Konami-customized CPU. Protection even today.</p>

<p><img src="https://nicole.express/assets/img/konamix/0004.png" title="i&#39;m here to take your wife to a better game" alt="Haunted Castle screen, Dracula kidnaps the protagonist&#39;s wife, but Contra character Bill&#39;s head is photoshopped on top of Dracula"/></p>

  </div>

  
</article>

      </div>
    </div></div>
  </body>
</html>
