<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.netmeister.org/blog/ops-lessons.html">Original</a>
    <h1>(A Few) Ops Lessons We All Learn the Hard Way (2020)</h1>
    
    <div id="readability-page-1" class="page"><div width="75%">
    <tbody><tr>
      <td>
<p><small>January 24th, 2020</small></p>

<p> Nope, not another <a href="https://www.netmeister.org/blog/cs-falsehoods.html">Falsehoods</a> post, but not
entirely unlike one.  Only here we have a few lessons
in <a href="https://www.netmeister.org/blog/defining-operations.html">operations</a>
that we all (eventually) (have to) learn, often the
hard way.  Why things are the way they are, or what
the lessons <em>mean</em> is left to the reader to interpret,
agree, or disagree with.  It&#39;s more fun that way.
Enjoy!  </p>

<hr/>

<ol>
<li><a href="http://stevens.netmeister.org/615/tar.html"><img src="https://www.netmeister.org/blog/images/tar-is-not-a-plaything.png" alt="Bart Simpson writing &#39;Tar is not a play thing&#39; on the school chalkboard." title="It really isn&#39;t."/></a>Email is the worst monitoring and alerting mechanism except for all the others.</li>
<li>Absence of a signal is itself a signal.</li>
<li>The severity of an incident is measured by the number of rules broken in resolving it.</li>
<li>The mobile hotspot you&#39;re paying for so you can leave your house while you&#39;re oncall only works at home and in the office.</li>
<li>The only other person who knows how this works is also on vacation.</li>
<li>If a post-mortem follow-up task is not picked up within a week, it&#39;s unlikely to be completed at all.</li>
<li>That janky script you put together during the outage -- the one that uses <tt>expect(1)</tt> and &#39;<tt>ssh -t -t</tt>&#39; -- now is the foundation of the entire team&#39;s toolchest.</li>
<li>NTP being off may not be a root cause, but it sure didn&#39;t help.</li>
<li><a href="https://utc-or-gtfo.creator-spring.com/">UTC or GTFO</a>.</li>
<li><a name="certs"></a>Your infrastructure uses a lot more self-signed certificates than you think. A <em>lot</em> more. In places that make you weep.</li>
<li>Self-signed certificates beget long lived certs, which beget lack of certificate validity monitoring, which begets <tt>curl -k</tt>, which begets a lack of certificate deployment automation, which begets self-signed certificates.</li>
<li>For any N applications, at most N/2+1 use the same certificate bundle.</li>
<li>The system you&#39;re troubleshooting doesn&#39;t use the one the tool you&#39;re <a href="https://www.netmeister.org/blog/debugging-certificate-errors.html">troubleshooting</a> it with does.</li>
<li>An <a href="https://twitter.com/jschauma/status/1086305575443542017">API without a reference</a> implementation and command-line client is called a gray box.</li>
<li>Restricted shells are not as restricted as you think.</li>
<li>Very few operations are truly idempotent.</li>
<li>&#34;Asserting state&#34; beats &#34;monitoring for compliance&#34; any day.</li>
<li><a href="https://docs.microsoft.com/en-us/archive/blogs/larryosterman/one-in-a-million-is-next-tuesday">One in a Million is next Tuesday.</a></li>
<li>People give talks at conferences not to convince others that their work is awesome and totally worth the time and effort they put in, but themselves.</li>
<li><img src="https://www.netmeister.org/blog/images/there-is-no-cloud.png" alt="There is no cloud, it&#39;s just someone else&#39;s computer."/>It&#39;s ok to use shell for complex stuff; it often times is easier, faster, and still less of a mess than juggling libraries and dependencies.</li>
<li>There&#39;s nothing wrong with Perl.</li>
<li>Ok, we all at times keep adding <tt>$</tt>, <tt>{</tt>, <tt>}</tt>, and <tt>@</tt> in random places trying to make things work, but still.</li>
<li>Serverless isn&#39;t.</li>
<li><a href="https://en.wikipedia.org/wiki/Year_2038_problem">Y38K</a> is <a href="https://twitter.com/jxxf/status/1219009308438024200">already here</a>, it&#39;s just not evenly distributed.</li>
<li>If you determine &#34;<a href="https://www.netmeister.org/blog/humanerrno.html">human error</a>&#34; as the root cause, then you&#39;re doing it wrong.</li>
<li>Your network team has a way into the network that your security team doesn&#39;t know about.</li>
<li>And don&#39;t even as much as <em>mention</em> the serial console and IPMI networks, but boy are you glad you have &#39;em.</li>
<li>Blocking TCP port 53 traffic leads to very strange failures. Don&#39;t.</li>
<li>Somewhere in your infrastructure a service you didn&#39;t know uses DNS for endpoint discovery in a very surprising way.</li>
<li>Do. Not. Monkey. Around. With. <tt>/etc/hosts</tt>.</li>
<li>If you break it, you own it - for now; if you fix it, you own it - forever.</li>
<li>Turning it off and on again is actually quite a reasonable way to fix many things.</li>
<li>A <tt>README.md</tt> in git is no substitute for a manual page that&#39;s shipped with your tool.</li>
<li>A search for a document you know exists will only turn up links to documents referencing <em>but not actually linking to</em> the one you&#39;re looking for.</li>
<li>The document you&#39;re looking for was marked as obsolete and not migrated to the new content management solution.</li>
<li><img src="https://www.netmeister.org/blog/images/hot-water-pipes.jpg" alt="Connected hot water pipes." title="Illustration of ssh port forwarding."/>Sure, your current content management system sucks, but it&#39;s still better than the one you&#39;re moving to.</li>
<li>Nobody knows how git works; everybody simply <tt>rm -fr &amp;&amp; git checkout</tt>&#39;s periodically.</li>
<li>There are very few network restrictions creative and determined use of <tt>ssh(1)</tt> port forwarding can&#39;t overcome.</li>
<li>This is both incredibly useful and concerning.</li>
<li>It is tempting to jump right into implementing a solution when the right thing may well be to not do the thing that requires the solution in the first place.</li>
<li>Turning things off permanently is <a href="https://twitter.com/jschauma/status/1074684924588974080">surprisingly difficult</a>.</li>
<li>&#34;<em>Ancient</em>&#34; is a very relative term when it comes to software and protocols.</li>
<li>&#34;<em>Obsolete</em>&#34; doesn&#39;t mean it&#39;s not in use and relied on.</li>
<li>The sets of systems online before and after a data center power outage only intersect.  Some of the old systems coming online will immediately cause a different outage.</li>
<li>Some of your most critical services are kept alive by a handful of people whose job description does not mention those services at all.</li>
<!-- <li>The <a
href="https://twitter.com/jschauma/status/816409198116433920">evolution of configuration management</a>
<em>always</em> follows the 'ssh -> rsync -> parallel ssh -> switch to pull -> switch back to daemon pull -> deploy $product -> find edge-case not met -> goto 1' route. Multiple times.</li> -->
<li>After the initial &#34;down for everybody or just me ermahgehrd Slack is down&#34; drop, productivity increases linearly throughout the duration of the outage.</li>
<li>You&#39;re bound by the <a href="https://en.wikipedia.org/wiki/CAP_theorem">CAP theorem</a> much more often than you may think.  <a href="https://en.wikipedia.org/wiki/Halting_problem">Halting Problem</a>&#39;s a bitch, too.</li>
<li>Eventual consistency doesn&#39;t help when the system you&#39;re debugging hasn&#39;t converged yet.</li>
<li>The source you&#39;re looking at is not the code running in production.</li>
<li><tt>strace(1)</tt>/<tt>ktrace(1)</tt> doesn&#39;t lie.</li>
<li>Unless somebody&#39;s been playing <tt>LD_PRELOAD</tt> games.</li>
<li>Schr√∂dinger&#39;s Backup -- &#34;The condition of any backup is unknown until a restore is attempted.&#34; -- is overly optimistic.</li>
<li>There&#39;s <a href="https://xkcd.com/305/">an xkcd</a> for the precise situation you find yourself in. (There&#39;s also one for at least half of these.)</li>
<li>At some point in your career you will implement <a href="https://twitter.com/jschauma/status/643444266300239873">half of kerberos</a>. Poorly.</li>
<li>Any sufficiently successful product launch is indistinguishable from a DDoS; any sufficiently advanced user indistinguishable from an attacker.</li>
<li>Debugging any sufficiently complex open source product is indistinguishable from reverse engineering a black box.</li>
<li>&#34;We&#39;ve always done it this way.&#34; is not a good reason by itself, but there&#39;s bound to be one for why.</li>
<li>That reason may or may not be valid any longer, however.</li>
<li><img src="https://www.netmeister.org/blog/images/inferno.jpg" alt="Circles of Hell from Dante&#39;s Inferno" title="You see, it&#39;s a metaphor..."/>A junior engineer asking &#34;why&#34; and pointing out the docs don&#39;t reflect reality is at least as valuable as the senior engineer working blindly off tribal knowledge.</li>
<li>Your herculean efforts to upgrade the OS across your entire fleet completed just in time for the EOL announcement of the version you upgraded to.</li>
<li>This phenomenon was first described in Dante&#39;s <em>Inferno</em> as the Ninth Circle of Hell, Ring Four, aka <tt>RedHat Canto XXXIV</tt>.</li>
<li>Containers create at least as many problems as they solve.</li>
<li>The most ninja move the expert you hired for that third party black box product you rely on is to say &#34;Let me ping the support team&#34;.</li>
<li>Somewhere, somebody ran into this <em>exact</em> problem, but they never bothered to post a solution.</li>
<li>That completely automated solution you set up requires at least three manual steps you didn&#39;t document.</li>
<li>CAPEX budget always increases, OPEX budget always decreases.</li>
<li>CAPEX costs can be reasonably estimated, OPEX costs can only be ballparked.</li>
<li>Doubling your time estimate in the hopes of beating expectations won&#39;t work because your manager takes your estimate, has a hardy laugh, and then resets it back to what they already promised upchain.</li>
<li>Your quarterly planning means bubkes when the next re-org rolls around.</li>
<li>Most of your actual work is not covered by your <a href="https://www.netmeister.org/blog/okr-distractions.html">OKRs</a>.</li>
<li>Recursively applying the <a href="https://en.wikipedia.org/wiki/Pareto_principle">Pareto Principle</a> is a surprisingly accurate way to gauge your low hanging fruit, determine your high impact objectives, and ballpark your required effort.</li>
<li>Although, to be honest, it <a href="https://twitter.com/jschauma/status/962448995690967041">only works in about 80% of cases</a>.</li>
<!-- <li>Say "OKR" one more time, I dare you, I double dare you motherfucker, say "OKR" one more goddamn time!</li> -->
<li>Management will always happily <a href="https://www.netmeister.org/blog/crazy-like-a-fox.html">spend $$$ on outside consultants</a> to tell them what you&#39;ve been saying for years.</li>
<li>Management will much rather invest in inventing a new, square wheel than fixing an old round one.</li>
<li>In any organization practicing <a href="https://twitter.com/jschauma/status/1225455309919006720">continuous integration</a>, half of all commits are to fake out CI tests.</li>
<li>Good software development practices do not always translate well to ops and friends.</li>
<li>Mandatory <a href="https://twitter.com/jschauma/status/1019410471999467525">code reviews</a> do not automatically improve code quality nor reduce the frequency of incidents.</li>
<li>Every new paradigm tends to mostly add layers of abstractions; cutting through them and identifying what basic principles continue to apply is half the battle.</li>
<li><a href="https://en.wikipedia.org/wiki/Layer_8"><img src="https://www.netmeister.org/blog/images/osi-stack2.png" width="250" alt="OSI stack with layers 8 (Financial) and 9 (Political) added" title="Not to be confused with the 9 circles of hell..."/></a>
Real change can only be implemented <a href="https://en.wikipedia.org/wiki/Layer_8">above layer 7</a>.</li>
<li>&#34;Prod&#34; is just another name for &#34;staging&#34;.</li>
<li>Your source of truth lies.</li>
<li>Also: it&#39;s incomplete.</li>
<li><tt>pcap</tt> or it didn&#39;t happen.</li>
<li><tt>grep(1)</tt> &gt; Splunk (there, I said it)</li>
<li>Multithreading is rarely worth the added complexity.</li>
<li>Parallelism is not Concurrency.</li>
<li>Simplicity is King.</li>
<li>Nobody knows what exactly it is you do.</li>
</ol>

<p><small>January 24th, 2020</small></p>

<p><small>Related:</small></p>

<ul>
<li><small><a href="https://twitter.com/jschauma/status/1220902743482814467">This blog post as a Twitter thread</a></small></li>
<li><small><a href="https://ops-lessons.creator-spring.com/">This blog post as a Teespring store</a> (i.e., stickers&#39;n&#39;stuff)</small></li>
<li><small><a href="https://www.netmeister.org/blog/software-engineering-laws.html">10
Software Engineering Laws Everybody Loves To Ignore</a></small></li>
<li><small><a href="https://www.netmeister.org/blog/cs-falsehoods.html">Falsehoods CS Students (Still) Believe Upon Graduating</a></small></li>
<li><small><a href="https://www.netmeister.org/blog/semper-ubi-sub-ubi.html">Things They Don&#39;t Teach You In School</a></small></li>
<li><small><a href="https://www.netmeister.org/blog/defining-operations.html">Defining Operations</a></small></li>
<li><small><a href="https://www.netmeister.org/blog/humanerrno.html">Root Cause: Human Errno</a></small></li>
<li><small><a href="https://www.netmeister.org/blog/infosec-competencies.html">(Technical) Infosec Core Competencies</a></small></li>
<li><small>Discussions / Comments:</small>
  <ul>
	<li><small><a href="https://news.ycombinator.com/item?id=22144172">Discussion on Hacker News</a> (<a href="https://news.ycombinator.com/item?id=22149368">here, too</a>; <a href="https://news.ycombinator.com/item?id=22152705">and here</a>)</small></li>
	<li><small><a href="https://lobste.rs/s/bzwjia/few_ops_lessons_we_all_learn_hard_way">Discussion on Lobsters</a></small></li>
	<li><small><a href="https://www.reddit.com/r/devops/comments/eu7wv2/a_few_ops_lessons_we_all_learn_the_hard/">Discussion on r/devops</a>; <a href="https://www.reddit.com/r/sysadmin/comments/evecz9/a_few_ops_lessons_we_all_learn_the_hard_way/">r/sysadmin</a>; <a href="https://www.reddit.com/r/SysAdminBlogs/comments/exqqye/a_few_ops_lessons_we_all_learn_the_hard_way/">r/SysAdminBlogs</a></small></li>
	<li><small><a href="https://bbs.boingboing.net/t/the-ops-lessons-we-all-learn-the-hard-way/159939">Comments on Boing Boing</a></small></li>
  </ul>
</li>
</ul>

      </td>
    </tr>
  </tbody></div></div>
  </body>
</html>
