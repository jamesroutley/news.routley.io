<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/pufferffish/wireproxy">Original</a>
    <h1>Wireproxy: WireGuard client that exposes itself as a HTTP/SOCKS5 proxy</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://ntietz.com/pufferffish/wireproxy/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/c1d96069f24e1aa70192e61e304e8d766ca0c851bd14ed06b5eab62ddeb80d67/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4953432d626c7565" alt="ISC licensed" data-canonical-src="https://img.shields.io/badge/license-ISC-blue"/></a>
<a href="https://github.com/octeep/wireproxy/actions"><img src="https://github.com/octeep/wireproxy/actions/workflows/build.yml/badge.svg" alt="Build status"/></a>
<a href="https://pkg.go.dev/github.com/octeep/wireproxy" rel="nofollow"><img src="https://camo.githubusercontent.com/43df7d0d15a1b0fef6fab238d3f53d13da1bfff6a2a1c9cb606899aa52b8d875/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f676f646f632d7769726570726f78792d626c7565" alt="Documentation" data-canonical-src="https://img.shields.io/badge/godoc-wireproxy-blue"/></a></p>
<p dir="auto">A wireguard client that exposes itself as a socks5/http proxy or tunnels.</p>

<p dir="auto"><code>wireproxy</code> is a completely userspace application that connects to a wireguard peer,
and exposes a socks5/http proxy or tunnels on the machine. This can be useful if you need
to connect to certain sites via a wireguard peer, but can&#39;t be bothered to setup a new network
interface for whatever reasons.</p>

<ul dir="auto">
<li>You simply want to use wireguard as a way to proxy some traffic.</li>
<li>You don&#39;t want root permission just to change wireguard settings.</li>
</ul>
<p dir="auto">Currently, I&#39;m running wireproxy connected to a wireguard server in another country,
and configured my browser to use wireproxy for certain sites. It&#39;s pretty useful since
wireproxy is completely isolated from my network interfaces, and I don&#39;t need root to configure
anything.</p>
<p dir="auto">Users who want something similar but for Amnezia VPN can use <a href="https://github.com/juev/wireproxy/tree/feature/amnezia-go">this fork</a>
of wireproxy by <a href="https://github.com/juev">@juev</a>.</p>

<ul dir="auto">
<li>TCP static routing for client and server</li>
<li>SOCKS5/HTTP proxy (currently only CONNECT is supported)</li>
</ul>

<ul dir="auto">
<li>UDP Support in SOCKS5</li>
<li>UDP static routing</li>
</ul>

<div data-snippet-clipboard-copy-content="./wireproxy -c [path to config]"><pre><code>./wireproxy -c [path to config]
</code></pre></div>
<div data-snippet-clipboard-copy-content="usage: wireproxy [-h|--help] [-c|--config &#34;&lt;value&gt;&#34;] [-s|--silent]
                 [-d|--daemon] [-v|--version] [-n|--configtest]

                 Userspace wireguard client for proxying

Arguments:

  -h  --help        Print help information
  -c  --config      Path of configuration file
  -s  --silent      Silent mode
  -d  --daemon      Make wireproxy run in background
  -v  --version     Print version
  -n  --configtest  Configtest mode. Only check the configuration file for
                    validity."><pre><code>usage: wireproxy [-h|--help] [-c|--config &#34;&lt;value&gt;&#34;] [-s|--silent]
                 [-d|--daemon] [-v|--version] [-n|--configtest]

                 Userspace wireguard client for proxying

Arguments:

  -h  --help        Print help information
  -c  --config      Path of configuration file
  -s  --silent      Silent mode
  -d  --daemon      Make wireproxy run in background
  -v  --version     Print version
  -n  --configtest  Configtest mode. Only check the configuration file for
                    validity.
</code></pre></div>

<div data-snippet-clipboard-copy-content="git clone https://github.com/octeep/wireproxy
cd wireproxy
make"><pre><code>git clone https://github.com/octeep/wireproxy
cd wireproxy
make
</code></pre></div>

<p dir="auto">Instructions for using wireproxy with Firefox container tabs and auto-start on MacOS can be found <a href="https://ntietz.com/pufferffish/wireproxy/blob/master/UseWithVPN.md">here</a>.</p>

<div data-snippet-clipboard-copy-content="# The [Interface] and [Peer] configurations follow the same semantics and meaning
# of a wg-quick configuration. To understand what these fields mean, please refer to:
# https://wiki.archlinux.org/title/WireGuard#Persistent_configuration
# https://www.wireguard.com/#simple-network-interface
[Interface]
Address = 10.200.200.2/32 # The subnet should be /32 and /128 for IPv4 and v6 respectively
# MTU = 1420 (optional)
PrivateKey = uCTIK+56CPyCvwJxmU5dBfuyJvPuSXAq1FzHdnIxe1Q=
DNS = 10.200.200.1

[Peer]
PublicKey = QP+A67Z2UBrMgvNIdHv8gPel5URWNLS4B3ZQ2hQIZlg=
# PresharedKey = UItQuvLsyh50ucXHfjF0bbR4IIpVBd74lwKc8uIPXXs= (optional)
Endpoint = my.ddns.example.com:51820
# PersistentKeepalive = 25 (optional)

# TCPClientTunnel is a tunnel listening on your machine,
# and it forwards any TCP traffic received to the specified target via wireguard.
# Flow:
# &lt;an app on your LAN&gt; --&gt; localhost:25565 --(wireguard)--&gt; play.cubecraft.net:25565
[TCPClientTunnel]
BindAddress = 127.0.0.1:25565
Target = play.cubecraft.net:25565

# TCPServerTunnel is a tunnel listening on wireguard,
# and it forwards any TCP traffic received to the specified target via local network.
# Flow:
# &lt;an app on your wireguard network&gt; --(wireguard)--&gt; 172.16.31.2:3422 --&gt; localhost:25545
[TCPServerTunnel]
ListenPort = 3422
Target = localhost:25545

# STDIOTunnel is a tunnel connecting the standard input and output of the wireproxy
# process to the specified TCP target via wireguard.
# This is especially useful to use wireproxy as a ProxyCommand parameter in openssh
# For example:
#    ssh -o ProxyCommand=&#39;wireproxy -c myconfig.conf&#39; ssh.myserver.net
# Flow:
# Piped command --&gt;(wireguard)--&gt; ssh.myserver.net:22
[STDIOTunnel]
Target = ssh.myserver.net:22

# Socks5 creates a socks5 proxy on your LAN, and all traffic would be routed via wireguard.
[Socks5]
BindAddress = 127.0.0.1:25344

# Socks5 authentication parameters, specifying username and password enables
# proxy authentication.
#Username = ...
# Avoid using spaces in the password field
#Password = ...

# http creates a http proxy on your LAN, and all traffic would be routed via wireguard.
[http]
BindAddress = 127.0.0.1:25345

# HTTP authentication parameters, specifying username and password enables
# proxy authentication.
#Username = ...
# Avoid using spaces in the password field
#Password = ..."><pre><code># The [Interface] and [Peer] configurations follow the same semantics and meaning
# of a wg-quick configuration. To understand what these fields mean, please refer to:
# https://wiki.archlinux.org/title/WireGuard#Persistent_configuration
# https://www.wireguard.com/#simple-network-interface
[Interface]
Address = 10.200.200.2/32 # The subnet should be /32 and /128 for IPv4 and v6 respectively
# MTU = 1420 (optional)
PrivateKey = uCTIK+56CPyCvwJxmU5dBfuyJvPuSXAq1FzHdnIxe1Q=
DNS = 10.200.200.1

[Peer]
PublicKey = QP+A67Z2UBrMgvNIdHv8gPel5URWNLS4B3ZQ2hQIZlg=
# PresharedKey = UItQuvLsyh50ucXHfjF0bbR4IIpVBd74lwKc8uIPXXs= (optional)
Endpoint = my.ddns.example.com:51820
# PersistentKeepalive = 25 (optional)

# TCPClientTunnel is a tunnel listening on your machine,
# and it forwards any TCP traffic received to the specified target via wireguard.
# Flow:
# &lt;an app on your LAN&gt; --&gt; localhost:25565 --(wireguard)--&gt; play.cubecraft.net:25565
[TCPClientTunnel]
BindAddress = 127.0.0.1:25565
Target = play.cubecraft.net:25565

# TCPServerTunnel is a tunnel listening on wireguard,
# and it forwards any TCP traffic received to the specified target via local network.
# Flow:
# &lt;an app on your wireguard network&gt; --(wireguard)--&gt; 172.16.31.2:3422 --&gt; localhost:25545
[TCPServerTunnel]
ListenPort = 3422
Target = localhost:25545

# STDIOTunnel is a tunnel connecting the standard input and output of the wireproxy
# process to the specified TCP target via wireguard.
# This is especially useful to use wireproxy as a ProxyCommand parameter in openssh
# For example:
#    ssh -o ProxyCommand=&#39;wireproxy -c myconfig.conf&#39; ssh.myserver.net
# Flow:
# Piped command --&gt;(wireguard)--&gt; ssh.myserver.net:22
[STDIOTunnel]
Target = ssh.myserver.net:22

# Socks5 creates a socks5 proxy on your LAN, and all traffic would be routed via wireguard.
[Socks5]
BindAddress = 127.0.0.1:25344

# Socks5 authentication parameters, specifying username and password enables
# proxy authentication.
#Username = ...
# Avoid using spaces in the password field
#Password = ...

# http creates a http proxy on your LAN, and all traffic would be routed via wireguard.
[http]
BindAddress = 127.0.0.1:25345

# HTTP authentication parameters, specifying username and password enables
# proxy authentication.
#Username = ...
# Avoid using spaces in the password field
#Password = ...
</code></pre></div>
<p dir="auto">Alternatively, if you already have a wireguard config, you can import it in the
wireproxy config file like this:</p>
<div data-snippet-clipboard-copy-content="WGConfig = &lt;path to the wireguard config&gt;

# Same semantics as above
[TCPClientTunnel]
...

[TCPServerTunnel]
...

[Socks5]
..."><pre><code>WGConfig = &lt;path to the wireguard config&gt;

# Same semantics as above
[TCPClientTunnel]
...

[TCPServerTunnel]
...

[Socks5]
...
</code></pre></div>
<p dir="auto">Having multiple peers is also supported. <code>AllowedIPs</code> would need to be specified
such that wireproxy would know which peer to forward to.</p>
<div data-snippet-clipboard-copy-content="[Interface]
Address = 10.254.254.40/32
PrivateKey = XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=

[Peer]
Endpoint = 192.168.0.204:51820
PublicKey = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY=
AllowedIPs = 10.254.254.100/32
PersistentKeepalive = 25

[Peer]
PublicKey = ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ=
AllowedIPs = 10.254.254.1/32, fdee:1337:c000:d00d::1/128
Endpoint = 172.16.0.185:44044
PersistentKeepalive = 25


[TCPServerTunnel]
ListenPort = 5000
Target = service-one.servicenet:5000

[TCPServerTunnel]
ListenPort = 5001
Target = service-two.servicenet:5001

[TCPServerTunnel]
ListenPort = 5080
Target = service-three.servicenet:80"><pre><code>[Interface]
Address = 10.254.254.40/32
PrivateKey = XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=

[Peer]
Endpoint = 192.168.0.204:51820
PublicKey = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY=
AllowedIPs = 10.254.254.100/32
PersistentKeepalive = 25

[Peer]
PublicKey = ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ=
AllowedIPs = 10.254.254.1/32, fdee:1337:c000:d00d::1/128
Endpoint = 172.16.0.185:44044
PersistentKeepalive = 25


[TCPServerTunnel]
ListenPort = 5000
Target = service-one.servicenet:5000

[TCPServerTunnel]
ListenPort = 5001
Target = service-two.servicenet:5001

[TCPServerTunnel]
ListenPort = 5080
Target = service-three.servicenet:80
</code></pre></div>
<p dir="auto">Wireproxy can also allow peers to connect to it:</p>
<div data-snippet-clipboard-copy-content="[Interface]
ListenPort = 5400
...

[Peer]
PublicKey = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY=
AllowedIPs = 10.254.254.100/32
# Note there is no Endpoint defined here."><pre><code>[Interface]
ListenPort = 5400
...

[Peer]
PublicKey = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY=
AllowedIPs = 10.254.254.100/32
# Note there is no Endpoint defined here.
</code></pre></div>

<p dir="auto"><a href="https://starchart.cc/octeep/wireproxy" rel="nofollow"><img src="https://camo.githubusercontent.com/5c075afba2908eac3fe1330be304f1beca6c1b3d924cf55f5c06b95e876d961a/68747470733a2f2f7374617263686172742e63632f6f63746565702f7769726570726f78792e737667" alt="Stargazers over time" data-canonical-src="https://starchart.cc/octeep/wireproxy.svg"/></a></p>
</article></div></div>
  </body>
</html>
