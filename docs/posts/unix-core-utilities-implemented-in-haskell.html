<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Gandalf-/coreutils">Original</a>
    <h1>Unix core utilities implemented in Haskell</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Unix core utilities implemented in Haskell.</p>
<p dir="auto">Goals are:</p>
<ul dir="auto">
<li>Idiomatic implementations</li>
<li>Fast, lazy IO</li>
<li>Feature parity with BSD utils</li>
<li>Fully tested</li>
<li>Platform independent</li>
</ul>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Utility</th>
<th>Idiomatic</th>
<th>Fast</th>
<th>Lazy</th>
<th>Tests</th>
<th>Complete</th>
</tr>
</thead>
<tbody>
<tr>
<td>addrinfo</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>80</td>
</tr>
<tr>
<td>awk</td>
<td>✓</td>
<td></td>
<td>✓</td>
<td>✓</td>
<td>40</td>
</tr>
<tr>
<td>basename</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>cat</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>cmp</td>
<td>✓</td>
<td></td>
<td></td>
<td>✓</td>
<td>50</td>
</tr>
<tr>
<td>cut</td>
<td></td>
<td>75</td>
<td>✓</td>
<td>90</td>
<td>90</td>
</tr>
<tr>
<td>dirname</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>echo</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>env</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>exit</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>false</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>head</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>ls</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
<td>50</td>
</tr>
<tr>
<td>mkdir</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>nl</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>nologin</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>✓</td>
</tr>
<tr>
<td>paste</td>
<td>✓</td>
<td>✓✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>pwd</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>✓</td>
</tr>
<tr>
<td>random</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>realpath</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>rev</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>seq</td>
<td>✓</td>
<td>75</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>sleep</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>split</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>sponge</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>strings</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>80</td>
</tr>
<tr>
<td>sum</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>tac</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>90</td>
</tr>
<tr>
<td>tee</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>test</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>tr</td>
<td>✓</td>
<td>75</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>truncate</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>true</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>uniq</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
</tr>
<tr>
<td>wc</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td></td>
<td>✓</td>
</tr>
<tr>
<td>which</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>✓</td>
</tr>
<tr>
<td>whoami</td>
<td>✓</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>✓</td>
</tr>
<tr>
<td>yes</td>
<td>✓</td>
<td>✓</td>
<td>✓</td>
<td>-</td>
<td>✓</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Symbol</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>✓✓</td>
<td>Superior</td>
</tr>
<tr>
<td>✓</td>
<td>Complete</td>
</tr>
<tr>
<td>%</td>
<td>% Partial</td>
</tr>
<tr>
<td>-</td>
<td>Not applicable</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">This project compiles to a single executable which detects which utility to call
depending on the name of the binary.</p>

<p dir="auto">or</p>
<div data-snippet-clipboard-copy-content="stack install --flag coreutils:release"><pre><code>stack install --flag coreutils:release
</code></pre></div>

<p dir="auto">With <code>utils</code> on your path, you can call any utility by name, using the name as
the first argument.</p>
<div data-snippet-clipboard-copy-content="I leaf@elm ~&gt; utils echo hello | utils rev
olleh"><pre><code>I leaf@elm ~&gt; utils echo hello | utils rev
olleh
</code></pre></div>
<div data-snippet-clipboard-copy-content="C:\Users\leaf&gt;utils echo hello | utils rev
olleh"><pre><code>C:\Users\leaf&gt;utils echo hello | utils rev
olleh
</code></pre></div>
<p dir="auto">This is the best option for trying things out without committing your entire
shell to these implementations. The testing done is mostly thorough, but there&#39;s
some crazy usage of the coreutils out in the wild; like <code>cat - - -</code> in
build scripts. Who needs to read <code>stdin</code> three separate times? The standard
Haskell IO libraries make some sane assumptions that things like this don&#39;t
happen, so this project has balance ugly workarounds with idomatic behavior.
Where reasonable, idomatic is preferred. Further, this project relies on the
Haskell IO libraries for platform independence - where they decided to simplify
(permissions, file types), this project does also.</p>

<p dir="auto">If you do want to commit, symlink the utilities you&#39;d like to expose to your <code>$PATH</code> variable. If
<code>~/.local/bin/</code> has precedence over <code>/bin/</code> and <code>/usr/bin/</code>, these are the
versions your shell will use.</p>
<div data-snippet-clipboard-copy-content="cd ~/.local/bin/
ln -s utils cat
ln -s utils sleep
ln -s utils rev
...
I leaf@elm ~&gt; which which
/home/leaf/.local/bin/which"><pre><code>cd ~/.local/bin/
ln -s utils cat
ln -s utils sleep
ln -s utils rev
...
I leaf@elm ~&gt; which which
/home/leaf/.local/bin/which
</code></pre></div>

<p dir="auto">Symlinking doesn&#39;t appear to change the name reported by
<code>System.Environment.getProgName</code>, so you&#39;ll need to create copies of the binary
with different names.</p>
<div data-snippet-clipboard-copy-content="PS C:\&gt; cd (Split-Path -Parent (Get-Command utils.exe).Path)
PS C:\Users\leaf\AppData\Roaming\local\bin&gt; cp utils.exe which.exe
PS C:\Users\leaf\AppData\Roaming\local\bin&gt; cd C:\
PS C:\&gt; which calc.exe
C:\WINDOWS\system32\calc.exe
PS C:\&gt; which which.exe
C:\Users\leaf\AppData\Roaming\local\bin\which.exe"><pre><code>PS C:\&gt; cd (Split-Path -Parent (Get-Command utils.exe).Path)
PS C:\Users\leaf\AppData\Roaming\local\bin&gt; cp utils.exe which.exe
PS C:\Users\leaf\AppData\Roaming\local\bin&gt; cd C:\
PS C:\&gt; which calc.exe
C:\WINDOWS\system32\calc.exe
PS C:\&gt; which which.exe
C:\Users\leaf\AppData\Roaming\local\bin\which.exe
</code></pre></div>
</article></div></div>
  </body>
</html>
