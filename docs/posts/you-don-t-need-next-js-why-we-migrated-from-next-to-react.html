<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.comfydeploy.com/blog/you-dont-need-nextjs">Original</a>
    <h1>You don&#39;t need Next.js â€“ Why we migrated from Next to React</h1>
    
    <div id="readability-page-1" class="page"><div><blockquote>
<p>You don&#39;t need Next.js</p>
</blockquote>
<p>We migrated the ComfyDeploy dashboard from Next.js to just React</p>

<ul>
<li>Build time went from <strong>3 mins</strong> to <strong>18 secs</strong></li>
<li>Hot reload under <strong>200ms</strong></li>
<li>Everybody on the team is happier (like, way happier)</li>
</ul>
<p>My tweet about this blew up, so I thought it&#39;d be helpful to break down exactly why we made this move.</p>
<p><a href="https://x.com/BennyKokMusic/status/1873733195767971892">
<img src="https://cd-misc.s3.us-east-2.amazonaws.com/docs/CleanShot+2024-12-31+at+14.19.29%402x.png" alt="Server with GPUs"/>
</a></p>
<p>I started ComfyDeploy as an open source project (<a href="https://github.com/BennyKok/comfyui-deploy">GitHub</a>) - a full stack app with Next.js doing all the heavy lifting for both frontend and backend. We had Drizzle + Server Actions making everything type-safe and neat.</p>
<p>It was all good until things started hitting the fan:</p>
<ul>
<li>We received an unexpected $2,000 bill from Vercel due to high API usage from a single user</li>
<li>Testing APIs became a nightmare, because we had a lof of server actions mixed with api routes.</li>
<li>Build times got so slow it felt like watching paint dry.</li>
<li>Local dev was brutal - every tiny change triggered a full SSR reload</li>
</ul>
<p>Next.js is a powerful full-stack framework, but its all-in-one approach can lead to development complexity as your application grows. Our decision to migrate was driven by two key factors: First, as an API platform, we needed to scale beyond Vercel&#39;s function limitations - a dedicated auto-scaling server made more sense than Next.js&#39;s API layers. Second, since our dashboard was primarily React-based and didn&#39;t require Next.js&#39;s server-side features, the framework&#39;s optimizations were adding unnecessary overhead. Moving to a pure React setup was the logical choice for our use case.</p>

<p>As we kept growing, we kept adding more libraries. The build just kept getting slower and slower. At one point, after adding Sentry, it hit 7 minutes. Seven. Minutes. Fixing a typo literally give you a coffee break.</p>
<p>The local dev situation wasn&#39;t any better. We&#39;re running this monorepo with Turborepo, not to mention it became such a pain to manage. Starting up dev servers felt like booting up an old Windows 95 PC, on my M3 Max Macbook Pro.</p>
<p>Then Next.js 15 RC dropped. I thought, &#34;Hey, Turbopack might save us!&#34; Spent a week upgrading, only to run into compatibility issues. Another week later, we&#39;re back on 14, wondering why we&#39;re spending more time wrestling with Next.js than actually building our product.</p>

<p>One morning, I&#39;m sitting there watching Next.js take 10 seconds just to start up. That was it. I&#39;d had enough.</p>
<blockquote>
<p>&#34;Hey team, we&#39;re going back to React. Give me a week.&#34;</p>
</blockquote>
<p>We went all in with TanStack Router + Rspack. Moved our entire shadcn folder, our components, everything. And you know what? Within days, it felt like we&#39;d broken free from chains we didn&#39;t even know we had:</p>
<ul>
<li>Instant dev server - less than <strong>2 secs</strong>.</li>
<li>Vercel build under <strong>18 secs</strong>.</li>
<li>Web dev actually <strong>fun</strong> again!</li>
</ul>
<p>The migration forced us to clean house too - ditching old features we didn&#39;t need, dropping unused dependencies, and completely rethinking our API setup. Sometimes you need to tear things down to build them back better.</p>

<h2>Next js 15 with turbo mode</h2>
<p>Here&#39;s our local dev experience with next js 15 with turbo mode</p>













<div><table><thead><tr><th>Metric</th><th>Time</th></tr></thead><tbody><tr><td>First page build</td><td>10.4 secs</td></tr></tbody></table></div>

<h2>React with Tanstack Router + Rspack</h2>

















<div><table><thead><tr><th>Metric</th><th>Time</th></tr></thead><tbody><tr><td>Route compute</td><td>~200ms</td></tr><tr><td>Initial dev bundle</td><td>1.67 secs</td></tr></tbody></table></div>


<p>Let&#39;s be real - every technical decision comes with trade-offs. Here&#39;s what we gave up and gained:</p>
<h2>What We Lost</h2>
<ol>
<li><strong>Co-location of Frontend and Backend</strong></li>
</ol>
<p>Now we have separate frontend and backend codebases but end up having better separation of concerns, clearer boundaries</p>
<ol start="2">
<li><strong>Next.js Caching Features</strong></li>
</ol>
<p>We lost built-in caching mechanisms but actually most of our data needed real-time updates. We ended up implementing specific caching where actually needed</p>
<ol>
<li><strong>Pre-rendering and Initial Load</strong></li>
</ol>
<p>No more automatic static generation. Required more thoughtful code splitting to save page load speed. But actually improved UX. No more &#34;ghost clicks&#34; where users see buttons they can&#39;t interact with because JS hasn&#39;t loaded. More predictable loading states</p>
<ol start="4">
<li><strong>Server Components and Actions</strong></li>
</ol>
<p>Lost the &#34;magic&#34; of server components. Server Actions made quick data fetching too easy (maybe too easy?)
Forced us to design better, more intentional APIs
Better for our real-time needs - polling updates were actually harder with <a href="https://github.com/vercel/next.js/discussions/50743">blocking server actions</a>.</p>
<h2>The Reality Check</h2>
<p>Here&#39;s the thing: these &#34;losses&#34; forced us to make better architectural decisions. Instead of relying on framework magic, we had to:</p>
<ul>
<li>Design our API contracts more thoughtfully</li>
<li>Implement caching where it actually mattered</li>
<li>Think about data flow and state management more deliberately</li>
</ul>
<p>Sometimes constraints are exactly what you need to build something better.</p>

<p>If you want to compare the two version <a href="https://app.comfydeploy.com">ComfyDeploy React</a> vs <a href="https://www.comfydeploy.com/workflows">ComfyDeploy Next.js</a>.</p>
<p>Next.js is great for what it&#39;s meant to do - landing pages, SEO stuff, that kind of thing. It makes simple concepts look fancy (Server Actions - is just REST API calls).</p>
<p>But for most products? It&#39;s like using a sledgehammer to hang a picture frame. The jump from Next.js 14 to 15 really drove this home - dependencies breaking left and right, and even with Turbo mode, dev server is still slow enough to make you want to bang your head against the wall.</p>
<p>We still keep Next.js around for our landing page and SEO stuff, but the dashboard? Pure React with TanStack Router + Rspack. Our API? A simple Python FastAPI server chilling on Google Cloud Run, scaling whenever it needs to.</p>
<p>Sometimes less really is more. And in our case, less Next.js meant more shipping, more speed, and more happy developers.</p>
<p>And I want to be clear - Vercel itself is an amazing company that&#39;s built incredible products. We still use and love their platform for various projects. Next.js just turned out to be more than what we needed for our specific use case at this stage of our product.</p>

<p>We are looking for people obsessed with shipping dev tools, from pushing the pixels on the frontend to optimizing diffusion models in the backend. DM me on <a href="https://x.com/BennyKokMusic">twitter</a> if you&#39;re down.</p></div></div>
  </body>
</html>
