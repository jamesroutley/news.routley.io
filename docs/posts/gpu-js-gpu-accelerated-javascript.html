<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/gpujs/gpu.js">Original</a>
    <h1>Gpu.js: GPU Accelerated JavaScript</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a href="http://gpu.rocks/" rel="nofollow"><img width="100" alt="Logo" src="https://camo.githubusercontent.com/ce86b8d46be43d540e2781814fd92e8fb0a35f6b674665a41f23d07e89c0282f/687474703a2f2f6770752e726f636b732f7374617469632f6d656469612f6a656c6c792e33353837646536302e706e67" data-canonical-src="http://gpu.rocks/static/media/jelly.3587de60.png"/></a></p>

<p dir="auto">GPU.js is a JavaScript Acceleration library for GPGPU (General purpose computing on GPUs) in JavaScript for Web and Node.
GPU.js automatically transpiles simple JavaScript functions into shader language and compiles them so they run on your GPU.
In case a GPU is not available, the functions will still run in regular JavaScript.
For some more quick concepts, see <a href="https://github.com/gpujs/gpu.js/wiki/Quick-Concepts">Quick Concepts</a> on the wiki.</p>
<p dir="auto"><a href="https://gitter.im/gpujs/gpu.js?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://camo.githubusercontent.com/c63b5695c4c8fb33f5ff131b5baa2654ee28f7f711183bd1600d9ccc5c56bfa2/68747470733a2f2f6261646765732e6769747465722e696d2f6770756a732f6770752e6a732e737667" alt="Join the chat at https://gitter.im/gpujs/gpu.js" data-canonical-src="https://badges.gitter.im/gpujs/gpu.js.svg"/></a>
<a href="https://slack.bri.im" rel="nofollow"><img src="https://camo.githubusercontent.com/ddd0b8de6a1f2537ffc296f9941f963e8faa7d75c7438a6b6129ce7b09753391/68747470733a2f2f736c61636b2e6272692e696d2f62616467652e737667" alt="Slack" data-canonical-src="https://slack.bri.im/badge.svg"/></a></p>

<p dir="auto">Creates a GPU accelerated kernel transpiled from a javascript function that computes a single element in the 512 x 512 matrix (2D array).
The kernel functions are ran in tandem on the GPU often resulting in very fast computations!
You can run a benchmark of this <a href="http://gpu.rocks" rel="nofollow">here</a>. Typically, it will run 1-15x faster depending on your hardware.
Matrix multiplication (perform matrix multiplication on 2 matrices of size 512 x 512) written in GPU.js:</p>
<h2 dir="auto"><a id="user-content-browser" aria-hidden="true" href="#browser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser</h2>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;script src=&#34;dist/gpu-browser.min.js&#34;&gt;&lt;/script&gt;
&lt;script&gt;
    // GPU is a constructor and namespace for browser
    const gpu = new GPU();
    const multiplyMatrix = gpu.createKernel(function(a, b) {
        let sum = 0;
        for (let i = 0; i &lt; 512; i++) {
            sum += a[this.thread.y][i] * b[i][this.thread.x];
        }
        return sum;
    }).setOutput([512, 512]);

    const c = multiplyMatrix(a, b);
&lt;/script&gt;"><pre><span>&lt;</span><span>script</span> <span>src</span>=&#34;<span>dist/gpu-browser.min.js</span>&#34;<span>&gt;</span><span>&lt;/</span><span>script</span><span>&gt;</span>
<span>&lt;</span><span>script</span><span>&gt;</span>
    <span>// GPU is a constructor and namespace for browser</span>
    <span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
    <span>const</span> <span>multiplyMatrix</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
        <span>let</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
        <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>512</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
            <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>i</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>i</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
        <span>}</span>
        <span>return</span> <span>sum</span><span>;</span>
    <span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>512</span><span>,</span> <span>512</span><span>]</span><span>)</span><span>;</span>

    <span>const</span> <span>c</span> <span>=</span> <span>multiplyMatrix</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span><span>;</span>
<span>&lt;/</span><span>script</span><span>&gt;</span></pre></div>
<h2 dir="auto"><a id="user-content-cdn" aria-hidden="true" href="#cdn"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CDN</h2>
<div data-snippet-clipboard-copy-content="https://unpkg.com/gpu.js@latest/dist/gpu-browser.min.js
https://cdn.jsdelivr.net/npm/gpu.js@latest/dist/gpu-browser.min.js"><pre><code>https://unpkg.com/gpu.js@latest/dist/gpu-browser.min.js
https://cdn.jsdelivr.net/npm/gpu.js@latest/dist/gpu-browser.min.js
</code></pre></div>
<h2 dir="auto"><a id="user-content-node" aria-hidden="true" href="#node"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node</h2>
<div dir="auto" data-snippet-clipboard-copy-content="const { GPU } = require(&#39;gpu.js&#39;);
const gpu = new GPU();
const multiplyMatrix = gpu.createKernel(function(a, b) {
    let sum = 0;
    for (let i = 0; i &lt; 512; i++) {
        sum += a[this.thread.y][i] * b[i][this.thread.x];
    }
    return sum;
}).setOutput([512, 512]);

const c = multiplyMatrix(a, b);"><pre><span>const</span> <span>{</span> <span>GPU</span> <span>}</span> <span>=</span> <span>require</span><span>(</span><span>&#39;gpu.js&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>multiplyMatrix</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>let</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
    <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>512</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>i</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>i</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>}</span>
    <span>return</span> <span>sum</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>512</span><span>,</span> <span>512</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>c</span> <span>=</span> <span>multiplyMatrix</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-typescript" aria-hidden="true" href="#typescript"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Typescript</h2>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU } from &#39;gpu.js&#39;;
const gpu = new GPU();
const multiplyMatrix = gpu.createKernel(function(a: number[][], b: number[][]) {
  let sum = 0;
  for (let i = 0; i &lt; 512; i++) {
    sum += a[this.thread.y][i] * b[i][this.thread.x];
  }
  return sum;
}).setOutput([512, 512]);

const c = multiplyMatrix(a, b) as number[][];"><pre><span>import</span> <span>{</span> <span>GPU</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>multiplyMatrix</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span>: <span>number</span><span>[</span><span>]</span><span>[</span><span>]</span><span>,</span> <span>b</span>: <span>number</span><span>[</span><span>]</span><span>[</span><span>]</span><span>)</span> <span>{</span>
  <span>let</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
  <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>512</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
    <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>i</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>i</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
  <span>}</span>
  <span>return</span> <span>sum</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>512</span><span>,</span> <span>512</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>c</span> <span>=</span> <span>multiplyMatrix</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>as</span> <span>number</span><span>[</span><span>]</span><span>[</span><span>]</span><span>;</span></pre></div>
<p dir="auto"><a href="https://github.com/gpujs/gpu.js/blob/develop/examples">Click here</a> for more typescript examples.</p>

<p dir="auto">Notice documentation is off?  We do try our hardest, but if you find something,
<a href="https://github.com/gpujs/gpu.js/issues">please bring it to our attention</a>, or <em><a href="#contributors">become a contributor</a></em>!</p>
<ul dir="auto">
<li><a href="#demos">Demos</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#gpu-settings"><code>GPU</code> Settings</a></li>
<li><a href="#gpucreatekernel-settings"><code>gpu.createKernel</code> Settings</a>
<ul dir="auto">
<li><a href="#declaring-variablesfunctions-within-kernels">Declaring variables/functions within kernels</a></li>
</ul>
</li>
<li><a href="#creating-and-running-functions">Creating and Running Functions</a></li>
<li><a href="#debugging">Debugging</a></li>
<li><a href="#accepting-input">Accepting Input</a></li>
<li><a href="#graphical-output">Graphical Output</a></li>
<li><a href="#combining-kernels">Combining Kernels</a></li>
<li><a href="#create-kernel-map">Create Kernel Map</a></li>
<li><a href="#adding-custom-functions">Adding Custom Functions</a></li>
<li><a href="#adding-custom-functions-directly-to-kernel">Adding Custom Functions Directly to Kernel</a></li>
<li><a href="#types">Types</a></li>
<li><a href="#loops">Loops</a></li>
<li><a href="#pipelining">Pipelining</a>
<ul dir="auto">
<li><a href="#cloning-textures-new-in-v2">Cloning Textures</a></li>
<li><a href="#cleanup-pipeline-texture-memory-new-in-v24">Cleanup pipeline texture memory</a></li>
</ul>
</li>
<li><a href="#offscreen-canvas">Offscreen Canvas</a></li>
<li><a href="#cleanup">Cleanup</a></li>
<li><a href="#flattened-typed-array-support">Flattened typed array support</a></li>
<li><a href="#precompiled-and-lighter-weight-kernels">Precompiled and Lighter Weight Kernels</a>
<ul dir="auto">
<li><a href="#using-json">using JSON</a></li>
<li><a href="#exporting-kernel">Exporting kernel</a></li>
</ul>
</li>
<li><a href="#supported-math-functions">Supported Math functions</a></li>
<li><a href="#how-to-check-what-is-supported">How to check what is supported</a></li>
<li><a href="#typescript-typings">Typescript Typings</a></li>
<li><a href="#destructured-assignments-new-in-v2">Destructured Assignments</a></li>
<li><a href="#dealing-with-transpilation">Dealing With Transpilation</a></li>
<li><a href="#full-api-reference">Full API reference</a></li>
<li><a href="#how-possible-in-node">How possible in node</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#building">Building</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#terms-explained">Terms Explained</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 dir="auto"><a id="user-content-demos" aria-hidden="true" href="#demos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demos</h2>
<p dir="auto">GPU.js in the wild, all around the net.  Add yours here!</p>
<ul dir="auto">
<li><a href="https://observablehq.com/@rveciana/temperature-interpolation-using-gpu-js" rel="nofollow">Temperature interpolation using GPU.js</a></li>
<li><a href="https://observablehq.com/@ukabuer/julia-set-fractal-using-gpu-js" rel="nofollow">Julia Set Fractal using GPU.js</a></li>
<li><a href="https://observablehq.com/@fil/hello-gpu-js-v2" rel="nofollow">Hello, gpu.js v2</a></li>
<li><a href="https://observablehq.com/@rveciana/basic-gpu-js-canvas-example" rel="nofollow">Basic gpu.js canvas example</a></li>
<li><a href="https://observablehq.com/@fil/raster-projection-with-gpu-js" rel="nofollow">Raster projection with GPU.js</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/gpu-js-example-slow-fade" rel="nofollow">GPU.js Example: Slow Fade</a></li>
<li><a href="https://observablehq.com/@alexlamb/gpu-js-ca-proof-of-concept" rel="nofollow">GPU.JS CA Proof of Concept</a></li>
<li><a href="https://observablehq.com/@ukabuer/image-convolution-using-gpu-js" rel="nofollow">Image Convolution using GPU.js</a></li>
<li><a href="https://observablehq.com/@rveciana/leaflet-gpu-js-canvas" rel="nofollow">Leaflet + gpu.js canvas</a></li>
<li><a href="https://observablehq.com/@fil/image-to-gpu" rel="nofollow">Image to GPU.js</a></li>
<li><a href="https://observablehq.com/@tracyhenry/gpu-accelerated-heatmap-using-gpu-js" rel="nofollow">GPU Accelerated Heatmap using gpu.js</a></li>
<li><a href="https://observablehq.com/@fil/dijkstras-algorithm-in-gpu-js" rel="nofollow">Dijkstra’s algorithm in gpu.js</a></li>
<li><a href="https://observablehq.com/@fil/voronoi-with-gpu-js" rel="nofollow">Voronoi with gpu.js</a></li>
<li><a href="https://observablehq.com/@fil/the-gpu-js-loop" rel="nofollow">The gpu.js loop</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/gpu-js-example-mandelbrot-set" rel="nofollow">GPU.js Example: Mandelbrot Set</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/gpu-js-example-mandelbulb" rel="nofollow">GPU.js Example: Mandelbulb</a></li>
<li><a href="https://observablehq.com/@rveciana/inverse-of-the-distance-with-gpu-js" rel="nofollow">Inverse of the distance with gpu.js</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/gpu-js-laser-detection-v2" rel="nofollow">gpu.js laser detection v2</a></li>
<li><a href="https://observablehq.com/@hubgit/gpu-js-canvas" rel="nofollow">GPU.js Canvas</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/video-convolution-using-gpu-js" rel="nofollow">Video Convolution using GPU.js</a></li>
<li><a href="https://observablehq.com/@alexlamb/gpu-rock-paper-scissors" rel="nofollow">GPU Rock Paper Scissors</a></li>
<li><a href="https://observablehq.com/@rveciana/shaded-relief-with-gpujs-and-d3js/2" rel="nofollow">Shaded relief with gpujs and d3js</a></li>
<li><a href="https://observablehq.com/@robertleeplummerjr/caesar-cipher-gpu-js-example" rel="nofollow">Caesar Cipher GPU.js Example</a></li>
<li><a href="https://ng-gpu.surge.sh/" rel="nofollow">Matrix Multiplication GPU.js + Angular Example</a></li>
<li><a href="https://observablehq.com/@brakdag/conway-game-of-life-gpu-js" rel="nofollow">Conway&#39;s game of life</a></li>
</ul>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">On Linux, ensure you have the correct header files installed: <code>sudo apt install mesa-common-dev libxi-dev</code> (adjust for your distribution)</p>
<h3 dir="auto"><a id="user-content-npm" aria-hidden="true" href="#npm"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>npm</h3>
<div dir="auto" data-snippet-clipboard-copy-content="npm install gpu.js --save"><pre>npm install gpu.js --save</pre></div>
<h3 dir="auto"><a id="user-content-yarn" aria-hidden="true" href="#yarn"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>yarn</h3>

<p dir="auto"><a href="https://www.npmjs.com/package/gpu.js" rel="nofollow">npm package</a></p>
<h3 dir="auto"><a id="user-content-node-1" aria-hidden="true" href="#node-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const { GPU } = require(&#39;gpu.js&#39;);
const gpu = new GPU();"><pre><span>const</span> <span>{</span> <span>GPU</span> <span>}</span> <span>=</span> <span>require</span><span>(</span><span>&#39;gpu.js&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-node-typescript-new-in-v2" aria-hidden="true" href="#node-typescript-new-in-v2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node Typescript <strong>New in V2!</strong></h3>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU } from &#39;gpu.js&#39;;
const gpu = new GPU();"><pre><span>import</span> <span>{</span> <span>GPU</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-browser-1" aria-hidden="true" href="#browser-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Browser</h3>
<p dir="auto">Download the latest version of GPU.js and include the files in your HTML page using the following tags:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;script src=&#34;dist/gpu-browser.min.js&#34;&gt;&lt;/script&gt;
&lt;script&gt;
    const gpu = new GPU();
&lt;/script&gt;"><pre><span>&lt;</span><span>script</span> <span>src</span>=&#34;<span>dist/gpu-browser.min.js</span>&#34;<span>&gt;</span><span>&lt;/</span><span>script</span><span>&gt;</span>
<span>&lt;</span><span>script</span><span>&gt;</span>
    <span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>&lt;/</span><span>script</span><span>&gt;</span></pre></div>
<h2 dir="auto"><a id="user-content-gpu-settings" aria-hidden="true" href="#gpu-settings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>GPU</code> Settings</h2>
<p dir="auto">Settings are an object used to create an instance of <code>GPU</code>.  Example: <code>new GPU(settings)</code></p>
<ul dir="auto">
<li><code>canvas</code>: <code>HTMLCanvasElement</code>.  Optional.  For sharing canvas.  Example: use THREE.js and GPU.js on same canvas.</li>
<li><code>context</code>: <code>WebGL2RenderingContext</code> or <code>WebGLRenderingContext</code>.  For sharing rendering context.  Example: use THREE.js and GPU.js on same rendering context.</li>
<li><code>mode</code>: Defaults to &#39;gpu&#39;, other values generally for debugging:
<ul dir="auto">
<li>&#39;dev&#39; <strong>New in V2!</strong>: VERY IMPORTANT!  Use this so you can breakpoint and debug your kernel!  This wraps your javascript in loops but DOES NOT transpile your code, so debugging is much easier.</li>
<li>&#39;webgl&#39;: Use the <code>WebGLKernel</code> for transpiling a kernel</li>
<li>&#39;webgl2&#39;: Use the <code>WebGL2Kernel</code> for transpiling a kernel</li>
<li>&#39;headlessgl&#39; <strong>New in V2!</strong>: Use the <code>HeadlessGLKernel</code> for transpiling a kernel</li>
<li>&#39;cpu&#39;: Use the <code>CPUKernel</code> for transpiling a kernel</li>
</ul>
</li>
<li><code>onIstanbulCoverageVariable</code>: Removed in v2.11.0, use v8 coverage</li>
<li><code>removeIstanbulCoverage</code>: Removed in v2.11.0, use v8 coverage</li>
</ul>
<h2 dir="auto"><a id="user-content-gpucreatekernel-settings" aria-hidden="true" href="#gpucreatekernel-settings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>gpu.createKernel</code> Settings</h2>
<p dir="auto">Settings are an object used to create a <code>kernel</code> or <code>kernelMap</code>.  Example: <code>gpu.createKernel(settings)</code></p>
<ul dir="auto">
<li><code>output</code> or <code>kernel.setOutput(output)</code>: <code>array</code> or <code>object</code> that describes the output of kernel.  When using <code>kernel.setOutput()</code> you <em>can</em> call it after the kernel has compiled if <code>kernel.dynamicOutput</code> is <code>true</code>, to resize your output.  Example:
<ul dir="auto">
<li>as array: <code>[width]</code>, <code>[width, height]</code>, or <code>[width, height, depth]</code></li>
<li>as object: <code>{ x: width, y: height, z: depth }</code></li>
</ul>
</li>
<li><code>pipeline</code> or <code>kernel.setPipeline(true)</code> <strong>New in V2!</strong>: boolean, default = <code>false</code>
<ul dir="auto">
<li>Causes <code>kernel()</code> calls to output a <code>Texture</code>.  To get array&#39;s from a <code>Texture</code>, use:</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="const result = kernel();
result.toArray();"><pre><span>const</span> <span>result</span> <span>=</span> <span>kernel</span><span>(</span><span>)</span><span>;</span>
<span>result</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>;</span></pre></div>
<ul dir="auto">
<li>Can be passed <em>directly</em> into kernels, and is preferred:</li>
</ul>

</li>
<li><code>graphical</code> or <code>kernel.setGraphical(boolean)</code>: boolean, default = <code>false</code></li>
<li><code>loopMaxIterations</code> or <code>kernel.setLoopMaxIterations(number)</code>: number, default = 1000</li>
<li><code>constants</code> or <code>kernel.setConstants(object)</code>: object, default = null</li>
<li><code>dynamicOutput</code> or <code>kernel.setDynamicOutput(boolean)</code>: boolean, default = false - turns dynamic output on or off</li>
<li><code>dynamicArguments</code> or <code>kernel.setDynamicArguments(boolean)</code>: boolean, default = false - turns dynamic arguments (use different size arrays and textures) on or off</li>
<li><code>optimizeFloatMemory</code> or <code>kernel.setOptimizeFloatMemory(boolean)</code> <strong>New in V2!</strong>: boolean - causes a float32 texture to use all 4 channels rather than 1, using less memory, but consuming more GPU.</li>
<li><code>precision</code> or <code>kernel.setPrecision(&#39;unsigned&#39; | &#39;single&#39;)</code> <strong>New in V2!</strong>: &#39;single&#39; or &#39;unsigned&#39; - if &#39;single&#39; output texture uses float32 for each colour channel rather than 8</li>
<li><code>fixIntegerDivisionAccuracy</code> or <code>kernel.setFixIntegerDivisionAccuracy(boolean)</code> : boolean - some cards have accuracy issues dividing by factors of three and some other primes (most apple kit?). Default on for affected cards, disable if accuracy not required.</li>
<li><code>functions</code> or <code>kernel.setFunctions(array)</code>: array, array of functions to be used inside kernel.  If undefined, inherits from <code>GPU</code> instance. Can also be an array of <code>{ source: function, argumentTypes: object, returnType: string }</code>.</li>
<li><code>nativeFunctions</code> or <code>kernel.setNativeFunctions(array)</code>: object, defined as: <code>{ name: string, source: string, settings: object }</code>.  This is generally set via using GPU.addNativeFunction()
<ul dir="auto">
<li>VERY IMPORTANT! - Use this to add special native functions to your environment when you need specific functionality is needed.</li>
</ul>
</li>
<li><code>injectedNative</code> or <code>kernel.setInjectedNative(string)</code> <strong>New in V2!</strong>: string, defined as: <code>{ functionName: functionSource }</code>.  This is for injecting native code before translated kernel functions.</li>
<li><code>subKernels</code> or <code>kernel.setSubKernels(array)</code>: array, generally inherited from <code>GPU</code> instance.</li>
<li><code>immutable</code> or <code>kernel.setImmutable(boolean)</code>: boolean, default = <code>false</code>
<ul dir="auto">
<li>VERY IMPORTANT! - This was removed in v2.4.0 - v2.7.0, and brought back in v2.8.0 <a href="https://github.com/gpujs/gpu.js/issues/572" data-hovercard-type="issue" data-hovercard-url="/gpujs/gpu.js/issues/572/hovercard">by popular demand</a>, please upgrade to get the feature</li>
</ul>
</li>
<li><code>strictIntegers</code> or <code>kernel.setStrictIntegers(boolean)</code>: boolean, default = <code>false</code> - allows undefined argumentTypes and function return values to use strict integer declarations.</li>
<li><code>useLegacyEncoder</code> or <code>kernel.setUseLegacyEncoder(boolean)</code>: boolean, default <code>false</code> - more info <a href="https://github.com/gpujs/gpu.js/wiki/Encoder-details">here</a>.</li>
<li><code>tactic</code> or <code>kernel.setTactic(&#39;speed&#39; | &#39;balanced&#39; | &#39;precision&#39;)</code> <strong>New in V2!</strong>: Set the kernel&#39;s tactic for compilation.  Allows for compilation to better fit how GPU.js is being used (internally uses <code>lowp</code> for &#39;speed&#39;, <code>mediump</code> for &#39;balanced&#39;, and <code>highp</code> for &#39;precision&#39;).  Default is lowest resolution supported for output.</li>
</ul>
<h2 dir="auto"><a id="user-content-creating-and-running-functions" aria-hidden="true" href="#creating-and-running-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Creating and Running Functions</h2>
<p dir="auto">Depending on your output type, specify the intended size of your output.
You cannot have an accelerated function that does not specify any output size.</p>
<table>
<thead>
<tr>
<th>Output size</th>
<th>How to specify output size</th>
<th>How to reference in kernel</th>
</tr>
</thead>
<tbody>
<tr>
<td>1D</td>
<td><code>[length]</code></td>
<td><code>value[this.thread.x]</code></td>
</tr>
<tr>
<td>2D</td>
<td><code>[width, height]</code></td>
<td><code>value[this.thread.y][this.thread.x]</code></td>
</tr>
<tr>
<td>3D</td>
<td><code>[width, height, depth]</code></td>
<td><code>value[this.thread.z][this.thread.y][this.thread.x]</code></td>
</tr>
</tbody>
</table>
<div dir="auto" data-snippet-clipboard-copy-content="const settings = {
    output: [100]
};"><pre><span>const</span> <span>settings</span> <span>=</span> <span>{</span>
    <span>output</span>: <span>[</span><span>100</span><span>]</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">or</p>
<div dir="auto" data-snippet-clipboard-copy-content="// You can also use x, y, and z
const settings = {
    output: { x: 100 }
};"><pre><span>// You can also use x, y, and z</span>
<span>const</span> <span>settings</span> <span>=</span> <span>{</span>
    <span>output</span>: <span>{</span> <span>x</span>: <span>100</span> <span>}</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">Create the function you want to run on the GPU. The first input parameter to <code>createKernel</code> is a kernel function which will compute a single number in the output. The thread identifiers, <code>this.thread.x</code>, <code>this.thread.y</code> or <code>this.thread.z</code> will allow you to specify the appropriate behavior of the kernel function at specific positions of the output.</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
    return this.thread.x;
}, settings);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>;</span>
<span>}</span><span>,</span> <span>settings</span><span>)</span><span>;</span></pre></div>
<p dir="auto">The created function is a regular JavaScript function, and you can use it like one.</p>
<div dir="auto" data-snippet-clipboard-copy-content="kernel();
// Result: Float32Array[0, 1, 2, 3, ... 99]"><pre><span>kernel</span><span>(</span><span>)</span><span>;</span>
<span>// Result: Float32Array[0, 1, 2, 3, ... 99]</span></pre></div>
<p dir="auto">Note: Instead of creating an object, you can use the chainable shortcut methods as a neater way of specifying settings.</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
    return this.thread.x;
}).setOutput([100]);

kernel();
// Result: Float32Array[0, 1, 2, 3, ... 99]"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span>

<span>kernel</span><span>(</span><span>)</span><span>;</span>
<span>// Result: Float32Array[0, 1, 2, 3, ... 99]</span></pre></div>
<h3 dir="auto"><a id="user-content-declaring-variablesfunctions-within-kernels" aria-hidden="true" href="#declaring-variablesfunctions-within-kernels"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Declaring variables/functions within kernels</h3>
<p dir="auto">GPU.js makes variable declaration inside kernel functions easy.  Variable types supported are:</p>
<ul dir="auto">
<li><code>Number</code> (Integer or Number), example: <code>let value = 1</code> or <code>let value = 1.1</code></li>
<li><code>Boolean</code>, example: <code>let value = true</code></li>
<li><code>Array(2)</code>, example: <code>let value = [1, 1]</code></li>
<li><code>Array(3)</code>, example: <code>let value = [1, 1, 1]</code></li>
<li><code>Array(4)</code>, example: <code>let value = [1, 1, 1, 1]</code></li>
<li><code>private Function</code>, example: <code>function myFunction(value) { return value + 1; }</code></li>
</ul>
<p dir="auto"><code>Number</code> kernel example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 const i = 1;
 const j = 0.89;
 return i + j;
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>const</span> <span>i</span> <span>=</span> <span>1</span><span>;</span>
 <span>const</span> <span>j</span> <span>=</span> <span>0.89</span><span>;</span>
 <span>return</span> <span>i</span> <span>+</span> <span>j</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><code>Boolean</code> kernel example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
  const i = true;
  if (i) return 1;
  return 0;
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>i</span> <span>=</span> <span>true</span><span>;</span>
  <span>if</span> <span>(</span><span>i</span><span>)</span> <span>return</span> <span>1</span><span>;</span>
  <span>return</span> <span>0</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><code>Array(2)</code> kernel examples:
Using declaration</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 const array2 = [0.08, 2];
 return array2;
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>const</span> <span>array2</span> <span>=</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>]</span><span>;</span>
 <span>return</span> <span>array2</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Directly returned</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 return [0.08, 2];
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>return</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><code>Array(3)</code> kernel example:
Using declaration</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 const array2 = [0.08, 2, 0.1];
 return array2;
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>const</span> <span>array2</span> <span>=</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>,</span> <span>0.1</span><span>]</span><span>;</span>
 <span>return</span> <span>array2</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Directly returned</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 return [0.08, 2, 0.1];
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>return</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>,</span> <span>0.1</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><code>Array(4)</code> kernel example:
Using declaration</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 const array2 = [0.08, 2, 0.1, 3];
 return array2;
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>const</span> <span>array2</span> <span>=</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>,</span> <span>0.1</span><span>,</span> <span>3</span><span>]</span><span>;</span>
 <span>return</span> <span>array2</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Directly returned</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
 return [0.08, 2, 0.1, 3];
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
 <span>return</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>,</span> <span>0.1</span><span>,</span> <span>3</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><code>private Function</code> kernel example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function() {
  function myPrivateFunction() {
    return [0.08, 2, 0.1, 3];
  }
  
  return myPrivateFunction(); // &lt;-- type inherited here
}).setOutput([100]);"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>function</span> <span>myPrivateFunction</span><span>(</span><span>)</span> <span>{</span>
    <span>return</span> <span>[</span><span>0.08</span><span>,</span> <span>2</span><span>,</span> <span>0.1</span><span>,</span> <span>3</span><span>]</span><span>;</span>
  <span>}</span>
  
  <span>return</span> <span>myPrivateFunction</span><span>(</span><span>)</span><span>;</span> <span>// &lt;-- type inherited here</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-debugging" aria-hidden="true" href="#debugging"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Debugging</h2>
<p dir="auto">Debugging can be done in a variety of ways, and there are different levels of debugging.</p>
<ul dir="auto">
<li>Debugging kernels with breakpoints can be done with <code>new GPU({ mode: &#39;dev&#39; })</code>
<ul dir="auto">
<li>This puts <code>GPU.js</code> into development mode.  Here you can insert breakpoints, and be somewhat liberal in how your kernel is developed.</li>
<li>This mode <em>does not</em> actually &#34;compile&#34; (parse, and eval) a kernel, it simply iterates on your code.</li>
<li>You can break a lot of rules here, because your kernel&#39;s function still has context of the state it came from.</li>
<li>PLEASE NOTE: Mapped kernels are not supported in this mode.  They simply cannot work because of context.</li>
<li>Example:
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU({ mode: &#39;dev&#39; });
const kernel = gpu.createKernel(function(arg1, time) {
    // put a breakpoint on the next line, and watch it get hit
    const v = arg1[this.thread.y][this.thread.x * time];
    return v;
}, { output: [100, 100] });"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>{</span> <span>mode</span>: <span>&#39;dev&#39;</span> <span>}</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>arg1</span><span>,</span> <span>time</span><span>)</span> <span>{</span>
    <span>// put a breakpoint on the next line, and watch it get hit</span>
    <span>const</span> <span>v</span> <span>=</span> <span>arg1</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>*</span> <span>time</span><span>]</span><span>;</span>
    <span>return</span> <span>v</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span> <span>}</span><span>)</span><span>;</span></pre></div>
</li>
</ul>
</li>
<li>Debugging actual kernels on CPU with <code>debugger</code>:
<ul dir="auto">
<li>This will cause &#34;breakpoint&#34; like behaviour, but in an actual CPU kernel.  You&#39;ll peer into the compiled kernel here, for a CPU.</li>
<li>Example:
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU({ mode: &#39;cpu&#39; });
const kernel = gpu.createKernel(function(arg1, time) {
    debugger; // &lt;--NOTICE THIS, IMPORTANT!
    const v = arg1[this.thread.y][this.thread.x * time];
    return v;
}, { output: [100, 100] });"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>{</span> <span>mode</span>: <span>&#39;cpu&#39;</span> <span>}</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>arg1</span><span>,</span> <span>time</span><span>)</span> <span>{</span>
    <span>debugger</span><span>;</span> <span>// &lt;--NOTICE THIS, IMPORTANT!</span>
    <span>const</span> <span>v</span> <span>=</span> <span>arg1</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>*</span> <span>time</span><span>]</span><span>;</span>
    <span>return</span> <span>v</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span> <span>}</span><span>)</span><span>;</span></pre></div>
</li>
</ul>
</li>
<li>Debugging an actual GPU kernel:
<ul dir="auto">
<li>There are no breakpoints available on the GPU, period.  By providing the same level of abstraction and logic, the above methods should give you enough insight to debug, but sometimes we just need to see what is on the GPU.</li>
<li>Be VERY specific and deliberate, and use the kernel to your advantage, rather than just getting frustrated or giving up.</li>
<li>Example:
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU({ mode: &#39;cpu&#39; });
const kernel = gpu.createKernel(function(arg1, time) {
  const x = this.thread.x * time;
  return x; // &lt;--NOTICE THIS, IMPORTANT!
  const v = arg1[this.thread.y][x];
  return v;
}, { output: [100, 100] });"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>{</span> <span>mode</span>: <span>&#39;cpu&#39;</span> <span>}</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>arg1</span><span>,</span> <span>time</span><span>)</span> <span>{</span>
  <span>const</span> <span>x</span> <span>=</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>*</span> <span>time</span><span>;</span>
  <span>return</span> <span>x</span><span>;</span> <span>// &lt;--NOTICE THIS, IMPORTANT!</span>
  <span>const</span> <span>v</span> <span>=</span> <span>arg1</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>x</span><span>]</span><span>;</span>
  <span>return</span> <span>v</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span> <span>}</span><span>)</span><span>;</span></pre></div>
In this example, we return early the value of x, to see exactly what it is.  The rest of the logic is ignored, but now you can see the value that is calculated from <code>x</code>, and debug it.
This is an overly simplified problem.</li>
<li>Sometimes you need to solve graphical problems, that can be done similarly.</li>
<li>Example:
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU({ mode: &#39;cpu&#39; });
const kernel = gpu.createKernel(function(arg1, time) {
  const x = this.thread.x * time;
  if (x &lt; 4 || x &gt; 2) {
    // RED
    this.color(1, 0, 0); // &lt;--NOTICE THIS, IMPORTANT!
    return;
  }
  if (x &gt; 6 &amp;&amp; x &lt; 12) {
    // GREEN
    this.color(0, 1, 0); // &lt;--NOTICE THIS, IMPORTANT!
    return;
  }
  const v = arg1[this.thread.y][x];
  return v;
}, { output: [100, 100], graphical: true });"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>{</span> <span>mode</span>: <span>&#39;cpu&#39;</span> <span>}</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>arg1</span><span>,</span> <span>time</span><span>)</span> <span>{</span>
  <span>const</span> <span>x</span> <span>=</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>*</span> <span>time</span><span>;</span>
  <span>if</span> <span>(</span><span>x</span> <span>&lt;</span> <span>4</span> <span>||</span> <span>x</span> <span>&gt;</span> <span>2</span><span>)</span> <span>{</span>
    <span>// RED</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>1</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>)</span><span>;</span> <span>// &lt;--NOTICE THIS, IMPORTANT!</span>
    <span>return</span><span>;</span>
  <span>}</span>
  <span>if</span> <span>(</span><span>x</span> <span>&gt;</span> <span>6</span> <span>&amp;&amp;</span> <span>x</span> <span>&lt;</span> <span>12</span><span>)</span> <span>{</span>
    <span>// GREEN</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>0</span><span>,</span> <span>1</span><span>,</span> <span>0</span><span>)</span><span>;</span> <span>// &lt;--NOTICE THIS, IMPORTANT!</span>
    <span>return</span><span>;</span>
  <span>}</span>
  <span>const</span> <span>v</span> <span>=</span> <span>arg1</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>x</span><span>]</span><span>;</span>
  <span>return</span> <span>v</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span><span>,</span> <span>graphical</span>: <span>true</span> <span>}</span><span>)</span><span>;</span></pre></div>
Here we are making the canvas red or green depending on the value of <code>x</code>.</li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-accepting-input" aria-hidden="true" href="#accepting-input"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Accepting Input</h2>
<h3 dir="auto"><a id="user-content-supported-input-types" aria-hidden="true" href="#supported-input-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Input Types</h3>
<ul dir="auto">
<li>Numbers</li>
<li>1d,2d, or 3d Array of numbers
<ul dir="auto">
<li>Arrays of <code>Array</code>, <code>Float32Array</code>, <code>Int16Array</code>, <code>Int8Array</code>, <code>Uint16Array</code>, <code>uInt8Array</code></li>
</ul>
</li>
<li>Pre-flattened 2d or 3d Arrays using &#39;Input&#39;, for faster upload of arrays
<ul dir="auto">
<li>Example:</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="const { input } = require(&#39;gpu.js&#39;);
const value = input(flattenedArray, [width, height, depth]);"><pre><span>const</span> <span>{</span> input <span>}</span> <span>=</span> <span>require</span><span>(</span><span>&#39;gpu.js&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>value</span> <span>=</span> <span>input</span><span>(</span><span>flattenedArray</span><span>,</span> <span>[</span><span>width</span><span>,</span> <span>height</span><span>,</span> <span>depth</span><span>]</span><span>)</span><span>;</span></pre></div>
</li>
<li>HTML Image</li>
<li>Array of HTML Images</li>
<li>Video Element <strong>New in V2!</strong>
To define an argument, simply add it to the kernel function like regular JavaScript.</li>
</ul>
<h3 dir="auto"><a id="user-content-input-examples" aria-hidden="true" href="#input-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Input Examples</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function(x) {
    return x;
}).setOutput([100]);

kernel(42);
// Result: Float32Array[42, 42, 42, 42, ... 42]"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>x</span><span>)</span> <span>{</span>
    <span>return</span> <span>x</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span>

<span>kernel</span><span>(</span><span>42</span><span>)</span><span>;</span>
<span>// Result: Float32Array[42, 42, 42, 42, ... 42]</span></pre></div>
<p dir="auto">Similarly, with array inputs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function(x) {
    return x[this.thread.x % 3];
}).setOutput([100]);

kernel([1, 2, 3]);
// Result: Float32Array[1, 2, 3, 1, ... 1 ]"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>x</span><span>)</span> <span>{</span>
    <span>return</span> <span>x</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>%</span> <span>3</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span>

<span>kernel</span><span>(</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span><span>)</span><span>;</span>
<span>// Result: Float32Array[1, 2, 3, 1, ... 1 ]</span></pre></div>
<p dir="auto">An HTML Image:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function(image) {
    const pixel = image[this.thread.y][this.thread.x];
    this.color(pixel[0], pixel[1], pixel[2], pixel[3]);
})
  .setGraphical(true)
  .setOutput([100, 100]);

const image = document.createElement(&#39;img&#39;);
image.src = &#39;my/image/source.png&#39;;
image.onload = () =&gt; {
  kernel(image);
  // Result: colorful image
  
  document.getElementsByTagName(&#39;body&#39;)[0].appendChild(kernel.canvas);
};"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>image</span><span>)</span> <span>{</span>
    <span>const</span> <span>pixel</span> <span>=</span> <span>image</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>pixel</span><span>[</span><span>0</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>1</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>2</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>3</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>image</span> <span>=</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;img&#39;</span><span>)</span><span>;</span>
<span>image</span><span>.</span><span>src</span> <span>=</span> <span>&#39;my/image/source.png&#39;</span><span>;</span>
<span>image</span><span>.</span><span>onload</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>kernel</span><span>(</span><span>image</span><span>)</span><span>;</span>
  <span>// Result: colorful image</span>
  
  <span>document</span><span>.</span><span>getElementsByTagName</span><span>(</span><span>&#39;body&#39;</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span><span>appendChild</span><span>(</span><span>kernel</span><span>.</span><span>canvas</span><span>)</span><span>;</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">An Array of HTML Images:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function(image) {
    const pixel = image[this.thread.z][this.thread.y][this.thread.x];
    this.color(pixel[0], pixel[1], pixel[2], pixel[3]);
})
  .setGraphical(true)
  .setOutput([100, 100]);

const image1 = document.createElement(&#39;img&#39;);
image1.src = &#39;my/image/source1.png&#39;;
image1.onload = onload;
const image2 = document.createElement(&#39;img&#39;);
image2.src = &#39;my/image/source2.png&#39;;
image2.onload = onload;
const image3 = document.createElement(&#39;img&#39;);
image3.src = &#39;my/image/source3.png&#39;;
image3.onload = onload;
const totalImages = 3;
let loadedImages = 0;
function onload() {
  loadedImages++;
  if (loadedImages === totalImages) {
    kernel([image1, image2, image3]);
    // Result: colorful image composed of many images

     document.getElementsByTagName(&#39;body&#39;)[0].appendChild(kernel.canvas);
  }
};"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>image</span><span>)</span> <span>{</span>
    <span>const</span> <span>pixel</span> <span>=</span> <span>image</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>z</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>pixel</span><span>[</span><span>0</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>1</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>2</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>3</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>image1</span> <span>=</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;img&#39;</span><span>)</span><span>;</span>
<span>image1</span><span>.</span><span>src</span> <span>=</span> <span>&#39;my/image/source1.png&#39;</span><span>;</span>
<span>image1</span><span>.</span><span>onload</span> <span>=</span> <span>onload</span><span>;</span>
<span>const</span> <span>image2</span> <span>=</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;img&#39;</span><span>)</span><span>;</span>
<span>image2</span><span>.</span><span>src</span> <span>=</span> <span>&#39;my/image/source2.png&#39;</span><span>;</span>
<span>image2</span><span>.</span><span>onload</span> <span>=</span> <span>onload</span><span>;</span>
<span>const</span> <span>image3</span> <span>=</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;img&#39;</span><span>)</span><span>;</span>
<span>image3</span><span>.</span><span>src</span> <span>=</span> <span>&#39;my/image/source3.png&#39;</span><span>;</span>
<span>image3</span><span>.</span><span>onload</span> <span>=</span> <span>onload</span><span>;</span>
<span>const</span> <span>totalImages</span> <span>=</span> <span>3</span><span>;</span>
<span>let</span> <span>loadedImages</span> <span>=</span> <span>0</span><span>;</span>
<span>function</span> <span>onload</span><span>(</span><span>)</span> <span>{</span>
  <span>loadedImages</span><span>++</span><span>;</span>
  <span>if</span> <span>(</span><span>loadedImages</span> <span>===</span> <span>totalImages</span><span>)</span> <span>{</span>
    <span>kernel</span><span>(</span><span>[</span><span>image1</span><span>,</span> <span>image2</span><span>,</span> <span>image3</span><span>]</span><span>)</span><span>;</span>
    <span>// Result: colorful image composed of many images</span>

     <span>document</span><span>.</span><span>getElementsByTagName</span><span>(</span><span>&#39;body&#39;</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span><span>appendChild</span><span>(</span><span>kernel</span><span>.</span><span>canvas</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">An HTML Video: <strong>New in V2!</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel = gpu.createKernel(function(videoFrame) {
    const pixel = videoFrame[this.thread.y][this.thread.x];
    this.color(pixel[0], pixel[1], pixel[2], pixel[3]);
})
  .setGraphical(true)
  .setOutput([100, 100]);

const video = new document.createElement(&#39;video&#39;);
video.src = &#39;my/video/source.webm&#39;;
kernel(image); //note, try and use requestAnimationFrame, and the video should be ready or playing
// Result: video frame"><pre><span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>videoFrame</span><span>)</span> <span>{</span>
    <span>const</span> <span>pixel</span> <span>=</span> <span>videoFrame</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>pixel</span><span>[</span><span>0</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>1</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>2</span><span>]</span><span>,</span> <span>pixel</span><span>[</span><span>3</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>,</span> <span>100</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>video</span> <span>=</span> <span>new</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;video&#39;</span><span>)</span><span>;</span>
<span>video</span><span>.</span><span>src</span> <span>=</span> <span>&#39;my/video/source.webm&#39;</span><span>;</span>
<span>kernel</span><span>(</span><span>image</span><span>)</span><span>;</span> <span>//note, try and use requestAnimationFrame, and the video should be ready or playing</span>
<span>// Result: video frame</span></pre></div>
<h2 dir="auto"><a id="user-content-graphical-output" aria-hidden="true" href="#graphical-output"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Graphical Output</h2>
<p dir="auto">Sometimes, you want to produce a <code>canvas</code> image instead of doing numeric computations. To achieve this, set the <code>graphical</code> flag to <code>true</code> and the output dimensions to <code>[width, height]</code>. The thread identifiers will now refer to the <code>x</code> and <code>y</code> coordinate of the pixel you are producing. Inside your kernel function, use <code>this.color(r,g,b)</code> or <code>this.color(r,g,b,a)</code> to specify the color of the pixel.</p>
<p dir="auto">For performance reasons, the return value of your function will no longer be anything useful. Instead, to display the image, retrieve the <code>canvas</code> DOM node and insert it into your page.</p>
<div dir="auto" data-snippet-clipboard-copy-content="const render = gpu.createKernel(function() {
    this.color(0, 0, 0, 1);
})
  .setOutput([20, 20])
  .setGraphical(true);

render();

const canvas = render.canvas;
document.getElementsByTagName(&#39;body&#39;)[0].appendChild(canvas);"><pre><span>const</span> <span>render</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>,</span> <span>20</span><span>]</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span><span>;</span>

<span>render</span><span>(</span><span>)</span><span>;</span>

<span>const</span> <span>canvas</span> <span>=</span> <span>render</span><span>.</span><span>canvas</span><span>;</span>
<span>document</span><span>.</span><span>getElementsByTagName</span><span>(</span><span>&#39;body&#39;</span><span>)</span><span>[</span><span>0</span><span>]</span><span>.</span><span>appendChild</span><span>(</span><span>canvas</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Note: To animate the rendering, use <code>requestAnimationFrame</code> instead of <code>setTimeout</code> for optimal performance. For more information, see <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" rel="nofollow">this</a>.</p>
<h3 dir="auto"><a id="user-content-getpixels-new-in-v2" aria-hidden="true" href="#getpixels-new-in-v2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>.getPixels() <strong>New in V2!</strong></h3>
<p dir="auto">To make it easier to get pixels from a context, use <code>kernel.getPixels()</code>, which returns a flat array similar to what you get from WebGL&#39;s <code>readPixels</code> method.
A note on why: webgl&#39;s <code>readPixels</code> returns an array ordered differently from javascript&#39;s <code>getImageData</code>.
This makes them behave similarly.
While the values may be somewhat different, because of graphical precision available in the kernel, and alpha, this allows us to easily get pixel data in unified way.</p>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const render = gpu.createKernel(function() {
    this.color(0, 0, 0, 1);
})
  .setOutput([20, 20])
  .setGraphical(true);

render();
const pixels = render.getPixels();
// [r,g,b,a, r,g,b,a..."><pre><span>const</span> <span>render</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span><span>color</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>1</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>,</span> <span>20</span><span>]</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span><span>;</span>

<span>render</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>pixels</span> <span>=</span> <span>render</span><span>.</span><span>getPixels</span><span>(</span><span>)</span><span>;</span>
<span>// [r,g,b,a, r,g,b,a...</span></pre></div>
<h3 dir="auto"><a id="user-content-alpha" aria-hidden="true" href="#alpha"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alpha</h3>
<p dir="auto">Currently, if you need alpha do something like enabling <code>premultipliedAlpha</code> with your own gl context:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const canvas = DOM.canvas(500, 500);
const gl = canvas.getContext(&#39;webgl2&#39;, { premultipliedAlpha: false });

const gpu = new GPU({
  canvas,
  context: gl
});
const krender = gpu.createKernel(function(x) {
  this.color(this.thread.x / 500, this.thread.y / 500, x[0], x[1]);
})
  .setOutput([500, 500])
  .setGraphical(true);"><pre><span>const</span> <span>canvas</span> <span>=</span> <span>DOM</span><span>.</span><span>canvas</span><span>(</span><span>500</span><span>,</span> <span>500</span><span>)</span><span>;</span>
<span>const</span> <span>gl</span> <span>=</span> <span>canvas</span><span>.</span><span>getContext</span><span>(</span><span>&#39;webgl2&#39;</span><span>,</span> <span>{</span> <span>premultipliedAlpha</span>: <span>false</span> <span>}</span><span>)</span><span>;</span>

<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>{</span>
  canvas<span>,</span>
  <span>context</span>: <span>gl</span>
<span>}</span><span>)</span><span>;</span>
<span>const</span> <span>krender</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>x</span><span>)</span> <span>{</span>
  <span>this</span><span>.</span><span>color</span><span>(</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>/</span> <span>500</span><span>,</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span> <span>/</span> <span>500</span><span>,</span> <span>x</span><span>[</span><span>0</span><span>]</span><span>,</span> <span>x</span><span>[</span><span>1</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>500</span><span>,</span> <span>500</span><span>]</span><span>)</span>
  <span>.</span><span>setGraphical</span><span>(</span><span>true</span><span>)</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-combining-kernels" aria-hidden="true" href="#combining-kernels"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Combining kernels</h2>
<p dir="auto">Sometimes you want to do multiple math operations on the gpu without the round trip penalty of data transfer from cpu to gpu to cpu to gpu, etc.  To aid this there is the <code>combineKernels</code> method.
<em><strong>Note:</strong></em> Kernels can have different output sizes.</p>
<div dir="auto" data-snippet-clipboard-copy-content="const add = gpu.createKernel(function(a, b) {
  return a[this.thread.x] + b[this.thread.x];
}).setOutput([20]);

const multiply = gpu.createKernel(function(a, b) {
  return a[this.thread.x] * b[this.thread.x];
}).setOutput([20]);

const superKernel = gpu.combineKernels(add, multiply, function(a, b, c) {
  return multiply(add(a, b), c);
});

superKernel(a, b, c);"><pre><span>const</span> <span>add</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span> <span>+</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>multiply</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>superKernel</span> <span>=</span> <span>gpu</span><span>.</span><span>combineKernels</span><span>(</span><span>add</span><span>,</span> <span>multiply</span><span>,</span> <span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span> <span>{</span>
  <span>return</span> <span>multiply</span><span>(</span><span>add</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span><span>,</span> <span>c</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>

<span>superKernel</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span><span>;</span></pre></div>
<p dir="auto">This gives you the flexibility of using multiple transformations but without the performance penalty, resulting in a much much MUCH faster operation.</p>
<h2 dir="auto"><a id="user-content-create-kernel-map" aria-hidden="true" href="#create-kernel-map"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create Kernel Map</h2>
<p dir="auto">Sometimes you want to do multiple math operations in one kernel, and save the output of each of those operations. An example is <strong>Machine Learning</strong> where the previous output is required for back propagation. To aid this there is the <code>createKernelMap</code> method.</p>
<h3 dir="auto"><a id="user-content-object-outputs" aria-hidden="true" href="#object-outputs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>object outputs</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const megaKernel = gpu.createKernelMap({
  addResult: function add(a, b) {
    return a + b;
  },
  multiplyResult: function multiply(a, b) {
    return a * b;
  },
}, function(a, b, c) {
  return multiply(add(a[this.thread.x], b[this.thread.x]), c[this.thread.x]);
}, { output: [10] });

megaKernel(a, b, c);
// Result: { addResult: Float32Array, multiplyResult: Float32Array, result: Float32Array }"><pre><span>const</span> <span>megaKernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernelMap</span><span>(</span><span>{</span>
  <span>addResult</span>: <span>function</span> <span>add</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>a</span> <span>+</span> <span>b</span><span>;</span>
  <span>}</span><span>,</span>
  <span>multiplyResult</span>: <span>function</span> <span>multiply</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>a</span> <span>*</span> <span>b</span><span>;</span>
  <span>}</span><span>,</span>
<span>}</span><span>,</span> <span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span> <span>{</span>
  <span>return</span> <span>multiply</span><span>(</span><span>add</span><span>(</span><span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>,</span> <span>c</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>10</span><span>]</span> <span>}</span><span>)</span><span>;</span>

<span>megaKernel</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span><span>;</span>
<span>// Result: { addResult: Float32Array, multiplyResult: Float32Array, result: Float32Array }</span></pre></div>
<h3 dir="auto"><a id="user-content-array-outputs" aria-hidden="true" href="#array-outputs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>array outputs</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const megaKernel = gpu.createKernelMap([
  function add(a, b) {
    return a + b;
  },
  function multiply(a, b) {
    return a * b;
  }
], function(a, b, c) {
  return multiply(add(a[this.thread.x], b[this.thread.x]), c[this.thread.x]);
}, { output: [10] });

megaKernel(a, b, c);
// Result: { 0: Float32Array, 1: Float32Array, result: Float32Array }"><pre><span>const</span> <span>megaKernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernelMap</span><span>(</span><span>[</span>
  <span>function</span> <span>add</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>a</span> <span>+</span> <span>b</span><span>;</span>
  <span>}</span><span>,</span>
  <span>function</span> <span>multiply</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>a</span> <span>*</span> <span>b</span><span>;</span>
  <span>}</span>
<span>]</span><span>,</span> <span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span> <span>{</span>
  <span>return</span> <span>multiply</span><span>(</span><span>add</span><span>(</span><span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>,</span> <span>c</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>10</span><span>]</span> <span>}</span><span>)</span><span>;</span>

<span>megaKernel</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>,</span> <span>c</span><span>)</span><span>;</span>
<span>// Result: { 0: Float32Array, 1: Float32Array, result: Float32Array }</span></pre></div>
<p dir="auto">This gives you the flexibility of using parts of a single transformation without the performance penalty, resulting in much much <em>MUCH</em> faster operation.</p>
<h2 dir="auto"><a id="user-content-adding-custom-functions" aria-hidden="true" href="#adding-custom-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Adding custom functions</h2>
<h3 dir="auto"><a id="user-content-to-gpu-instance" aria-hidden="true" href="#to-gpu-instance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>To <code>GPU</code> instance</h3>
<p dir="auto">use <code>gpu.addFunction(function() {}, settings)</code> for adding custom functions to all kernels.  Needs to be called BEFORE <code>gpu.createKernel</code>. Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="gpu.addFunction(function mySuperFunction(a, b) {
  return a - b;
});
function anotherFunction(value) {
  return value + 1;
}
gpu.addFunction(anotherFunction);
const kernel = gpu.createKernel(function(a, b) {
  return anotherFunction(mySuperFunction(a[this.thread.x], b[this.thread.x]));
}).setOutput([20]);"><pre><span>gpu</span><span>.</span><span>addFunction</span><span>(</span><span>function</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span> <span>-</span> <span>b</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
<span>function</span> <span>anotherFunction</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>return</span> <span>value</span> <span>+</span> <span>1</span><span>;</span>
<span>}</span>
<span>gpu</span><span>.</span><span>addFunction</span><span>(</span><span>anotherFunction</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>anotherFunction</span><span>(</span><span>mySuperFunction</span><span>(</span><span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>]</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-to-kernel-instance" aria-hidden="true" href="#to-kernel-instance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>To <code>Kernel</code> instance</h3>
<p dir="auto">use <code>kernel.addFunction(function() {}, settings)</code> for adding custom functions to all kernels.  Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="kernel.addFunction(function mySuperFunction(a, b) {
  return a - b;
});
function anotherFunction(value) {
  return value + 1;
}
kernel.addFunction(anotherFunction);
const kernel = gpu.createKernel(function(a, b) {
  return anotherFunction(mySuperFunction(a[this.thread.x], b[this.thread.x]));
}).setOutput([20]);"><pre><span>kernel</span><span>.</span><span>addFunction</span><span>(</span><span>function</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span> <span>-</span> <span>b</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
<span>function</span> <span>anotherFunction</span><span>(</span><span>value</span><span>)</span> <span>{</span>
  <span>return</span> <span>value</span> <span>+</span> <span>1</span><span>;</span>
<span>}</span>
<span>kernel</span><span>.</span><span>addFunction</span><span>(</span><span>anotherFunction</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>anotherFunction</span><span>(</span><span>mySuperFunction</span><span>(</span><span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>]</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-adding-strongly-typed-functions" aria-hidden="true" href="#adding-strongly-typed-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Adding strongly typed functions</h3>
<p dir="auto">To manually strongly type a function you may use settings.
By setting this value, it makes the build step of the kernel less resource intensive.
Settings take an optional hash values:</p>
<ul dir="auto">
<li><code>returnType</code>: optional, defaults to inference from <code>FunctionBuilder</code>, the value you&#39;d like to return from the function.</li>
<li><code>argumentTypes</code>: optional, defaults to inference from <code>FunctionBuilder</code> for each param, a hash of param names with values of the return types.</li>
</ul>
<p dir="auto">Example on <code>GPU</code> instance:</p>
<div dir="auto" data-snippet-clipboard-copy-content="gpu.addFunction(function mySuperFunction(a, b) {
  return [a - b[1], b[0] - a];
}, { argumentTypes: { a: &#39;Number&#39;, b: &#39;Array(2)&#39;}, returnType: &#39;Array(2)&#39; });"><pre><span>gpu</span><span>.</span><span>addFunction</span><span>(</span><span>function</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>[</span><span>a</span> <span>-</span> <span>b</span><span>[</span><span>1</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>0</span><span>]</span> <span>-</span> <span>a</span><span>]</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>argumentTypes</span>: <span>{</span> <span>a</span>: <span>&#39;Number&#39;</span><span>,</span> <span>b</span>: <span>&#39;Array(2)&#39;</span><span>}</span><span>,</span> <span>returnType</span>: <span>&#39;Array(2)&#39;</span> <span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Example on <code>Kernel</code> instance:</p>
<div dir="auto" data-snippet-clipboard-copy-content="kernel.addFunction(function mySuperFunction(a, b) {
  return [a - b[1], b[0] - a];
}, { argumentTypes: { a: &#39;Number&#39;, b: &#39;Array(2)&#39;}, returnType: &#39;Array(2)&#39; });"><pre><span>kernel</span><span>.</span><span>addFunction</span><span>(</span><span>function</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>[</span><span>a</span> <span>-</span> <span>b</span><span>[</span><span>1</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>0</span><span>]</span> <span>-</span> <span>a</span><span>]</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>argumentTypes</span>: <span>{</span> <span>a</span>: <span>&#39;Number&#39;</span><span>,</span> <span>b</span>: <span>&#39;Array(2)&#39;</span><span>}</span><span>,</span> <span>returnType</span>: <span>&#39;Array(2)&#39;</span> <span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">NOTE: GPU.js infers types if they are not defined and is generally able to detect the types you need, however
&#39;Array(2)&#39;, &#39;Array(3)&#39;, and &#39;Array(4)&#39; are exceptions, at least on the kernel level.  Also, it is nice to have power
over the automatic type inference system.</p>
<h2 dir="auto"><a id="user-content-adding-custom-functions-directly-to-kernel" aria-hidden="true" href="#adding-custom-functions-directly-to-kernel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Adding custom functions directly to kernel</h2>
<div dir="auto" data-snippet-clipboard-copy-content="function mySuperFunction(a, b) {
  return a - b;
}
const kernel = gpu.createKernel(function(a, b) {
  return mySuperFunction(a[this.thread.x], b[this.thread.x]);
})
  .setOutput([20])
  .setFunctions([mySuperFunction]);
"><pre><span>function</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span> <span>-</span> <span>b</span><span>;</span>
<span>}</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>mySuperFunction</span><span>(</span><span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>,</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>)</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>20</span><span>]</span><span>)</span>
  <span>.</span><span>setFunctions</span><span>(</span><span>[</span><span>mySuperFunction</span><span>]</span><span>)</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-types" aria-hidden="true" href="#types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Types</h2>
<p dir="auto">GPU.js does type inference when types are not defined, so even if you code weak type, you are typing strongly typed.
This is needed because c++, which glsl is a subset of, is, of course, strongly typed.
Types that can be used with GPU.js are as follows:</p>
<h3 dir="auto"><a id="user-content-argument-types" aria-hidden="true" href="#argument-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Argument Types</h3>
<ul dir="auto">
<li>&#39;Array&#39;</li>
<li>&#39;Array(2)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array(3)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array(4)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array1D(2)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array1D(3)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array1D(4)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array2D(2)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array2D(3)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array2D(4)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array3D(2)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array3D(3)&#39; <strong>New in V2!</strong></li>
<li>&#39;Array3D(4)&#39; <strong>New in V2!</strong></li>
<li>&#39;HTMLCanvas&#39; <strong>New in V2.6</strong></li>
<li>&#39;OffscreenCanvas&#39; <strong>New in V2.13</strong></li>
<li>&#39;HTMLImage&#39;</li>
<li>&#39;ImageBitmap&#39; <strong>New in V2.14</strong></li>
<li>&#39;ImageData&#39; <strong>New in V2.15</strong></li>
<li>&#39;HTMLImageArray&#39;</li>
<li>&#39;HTMLVideo&#39; <strong>New in V2!</strong></li>
<li>&#39;Number&#39;</li>
<li>&#39;Float&#39;</li>
<li>&#39;Integer&#39;</li>
<li>&#39;Boolean&#39; <strong>New in V2!</strong></li>
</ul>
<h3 dir="auto"><a id="user-content-return-types" aria-hidden="true" href="#return-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Return Types</h3>
<p dir="auto">NOTE: These refer the the return type of the kernel function, the actual result will always be a collection in the size of the defined <code>output</code></p>
<ul dir="auto">
<li>&#39;Array(2)&#39;</li>
<li>&#39;Array(3)&#39;</li>
<li>&#39;Array(4)&#39;</li>
<li>&#39;Number&#39;</li>
<li>&#39;Float&#39;</li>
<li>&#39;Integer&#39;</li>
</ul>
<h3 dir="auto"><a id="user-content-internal-types" aria-hidden="true" href="#internal-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Internal Types</h3>
<p dir="auto">Types generally used in the <code>Texture</code> class, for #pipelining or for advanced usage.</p>
<ul dir="auto">
<li>&#39;ArrayTexture(1)&#39; <strong>New in V2!</strong></li>
<li>&#39;ArrayTexture(2)&#39; <strong>New in V2!</strong></li>
<li>&#39;ArrayTexture(3)&#39; <strong>New in V2!</strong></li>
<li>&#39;ArrayTexture(4)&#39; <strong>New in V2!</strong></li>
<li>&#39;NumberTexture&#39;</li>
<li>&#39;MemoryOptimizedNumberTexture&#39; <strong>New in V2!</strong></li>
</ul>
<h2 dir="auto"><a id="user-content-loops" aria-hidden="true" href="#loops"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Loops</h2>
<ul dir="auto">
<li>Any loops defined inside the kernel must have a maximum iteration count defined by the loopMaxIterations setting.</li>
<li>Other than defining the iterations by a constant or fixed value as shown <a href="https://github.com/gpujs/gpu.js/blob/develop/dynamic-sized-via-constants">Dynamic sized via constants</a>, you can also simply pass the number of iterations as a variable to the kernel</li>
</ul>
<h3 dir="auto"><a id="user-content-dynamic-sized-via-constants" aria-hidden="true" href="#dynamic-sized-via-constants"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dynamic sized via constants</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const matMult = gpu.createKernel(function(a, b) {
    var sum = 0;
    for (var i = 0; i &lt; this.constants.size; i++) {
        sum += a[this.thread.y][i] * b[i][this.thread.x];
    }
    return sum;
}, {
  constants: { size: 512 },
  output: [512, 512],
});"><pre><span>const</span> <span>matMult</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>var</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
    <span>for</span> <span>(</span><span>var</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>this</span><span>.</span><span>constants</span><span>.</span><span>size</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>i</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>i</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>}</span>
    <span>return</span> <span>sum</span><span>;</span>
<span>}</span><span>,</span> <span>{</span>
  <span>constants</span>: <span>{</span> <span>size</span>: <span>512</span> <span>}</span><span>,</span>
  <span>output</span>: <span>[</span><span>512</span><span>,</span> <span>512</span><span>]</span><span>,</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<h3 dir="auto"><a id="user-content-fixed-sized" aria-hidden="true" href="#fixed-sized"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fixed sized</h3>
<div dir="auto" data-snippet-clipboard-copy-content="const matMult = gpu.createKernel(function(a, b) {
    var sum = 0;
    for (var i = 0; i &lt; 512; i++) {
        sum += a[this.thread.y][i] * b[i][this.thread.x];
    }
    return sum;
}).setOutput([512, 512]);"><pre><span>const</span> <span>matMult</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>var</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
    <span>for</span> <span>(</span><span>var</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>512</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
        <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>i</span><span>]</span> <span>*</span> <span>b</span><span>[</span><span>i</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
    <span>}</span>
    <span>return</span> <span>sum</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>512</span><span>,</span> <span>512</span><span>]</span><span>)</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-pipelining" aria-hidden="true" href="#pipelining"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pipelining</h2>
<p dir="auto"><a href="https://en.wikipedia.org/wiki/Pipeline_(computing)" rel="nofollow">Pipeline</a> is a feature where values are sent directly from kernel to kernel via a texture.
This results in extremely fast computing.  This is achieved with the kernel setting <code>pipeline: boolean</code> or by calling <code>kernel.setPipeline(true)</code>
In an effort to make the CPU and GPU work similarly, pipeline on CPU and GPU modes causes the kernel result to be reused when <code>immutable: false</code> (which is default).
If you&#39;d like to keep kernel results around, use <code>immutable: true</code> and ensure you cleanup memory:</p>
<ul dir="auto">
<li>In gpu mode using <code>texture.delete()</code> when appropriate.</li>
<li>In cpu mode allowing values to go out of context</li>
</ul>
<h3 dir="auto"><a id="user-content-cloning-textures-new-in-v2" aria-hidden="true" href="#cloning-textures-new-in-v2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cloning Textures <strong>New in V2!</strong></h3>
<p dir="auto">When using pipeline mode the outputs from kernels can be cloned using <code>texture.clone()</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="const kernel1 = gpu.createKernel(function(v) {
    return v[this.thread.x];
})
  .setPipeline(true)
  .setOutput([100]);

const kernel2 = gpu.createKernel(function(v) {
    return v[this.thread.x];
})
  .setOutput([100]);

const result1 = kernel1(array);
// Result: Texture
console.log(result1.toArray());
// Result: Float32Array[0, 1, 2, 3, ... 99]

const result2 = kernel2(result1);
// Result: Float32Array[0, 1, 2, 3, ... 99]"><pre><span>const</span> <span>kernel1</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>v</span><span>)</span> <span>{</span>
    <span>return</span> <span>v</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setPipeline</span><span>(</span><span>true</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>kernel2</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>v</span><span>)</span> <span>{</span>
    <span>return</span> <span>v</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
<span>}</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>100</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>result1</span> <span>=</span> <span>kernel1</span><span>(</span><span>array</span><span>)</span><span>;</span>
<span>// Result: Texture</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>result1</span><span>.</span><span>toArray</span><span>(</span><span>)</span><span>)</span><span>;</span>
<span>// Result: Float32Array[0, 1, 2, 3, ... 99]</span>

<span>const</span> <span>result2</span> <span>=</span> <span>kernel2</span><span>(</span><span>result1</span><span>)</span><span>;</span>
<span>// Result: Float32Array[0, 1, 2, 3, ... 99]</span></pre></div>
<h3 dir="auto"><a id="user-content-cleanup-pipeline-texture-memory-new-in-v24" aria-hidden="true" href="#cleanup-pipeline-texture-memory-new-in-v24"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cleanup pipeline texture memory <strong>New in V2.4!</strong></h3>
<p dir="auto">When using <code>kernel.immutable = true</code> recycling GPU memory is handled internally, but a good practice is to clean up memory you no longer need it.
Cleanup kernel outputs by using <code>texture.delete()</code> to keep GPU memory as small as possible.</p>
<p dir="auto">NOTE: Internally textures will only release from memory if there are no references to them.
When using pipeline mode on a kernel <code>K</code> the output for each call will be a newly allocated texture <code>T</code>.
If, after getting texture <code>T</code> as an output, <code>T.delete()</code> is called, the next call to K will reuse <code>T</code> as its output texture.</p>
<p dir="auto">Alternatively, if you&#39;d like to clear out a <code>texture</code> and yet keep it in memory, you may use <code>texture.clear()</code>, which
will cause the <code>texture</code> to persist in memory, but its internal values to become all zeros.</p>
<h2 dir="auto"><a id="user-content-offscreen-canvas" aria-hidden="true" href="#offscreen-canvas"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Offscreen Canvas</h2>
<p dir="auto">GPU.js supports offscreen canvas where available.  Here is an example of how to use it with two files, <code>gpu-worker.js</code>, and <code>index.js</code>:</p>
<p dir="auto">file: <code>gpu-worker.js</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="importScripts(&#39;path/to/gpu.js&#39;);
onmessage = function() {
  // define gpu instance
  const gpu = new GPU();

  // input values
  const a = [1,2,3];
  const b = [3,2,1];

  // setup kernel
  const kernel = gpu.createKernel(function(a, b) {
    return a[this.thread.x] - b[this.thread.x];
  })
    .setOutput([3]);

  // output some results!
  postMessage(kernel(a, b));
};"><pre><span>importScripts</span><span>(</span><span>&#39;path/to/gpu.js&#39;</span><span>)</span><span>;</span>
<span>onmessage</span> <span>=</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>// define gpu instance</span>
  <span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>

  <span>// input values</span>
  <span>const</span> <span>a</span> <span>=</span> <span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>]</span><span>;</span>
  <span>const</span> <span>b</span> <span>=</span> <span>[</span><span>3</span><span>,</span><span>2</span><span>,</span><span>1</span><span>]</span><span>;</span>

  <span>// setup kernel</span>
  <span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
    <span>return</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span> <span>-</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
  <span>}</span><span>)</span>
    <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>3</span><span>]</span><span>)</span><span>;</span>

  <span>// output some results!</span>
  <span>postMessage</span><span>(</span><span>kernel</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span><span>)</span><span>;</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">file: <code>index.js</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="var worker = new Worker(&#39;gpu-worker.js&#39;);
worker.onmessage = function(e) {
  var result = e.data;
  console.log(result);
};"><pre><span>var</span> <span>worker</span> <span>=</span> <span>new</span> <span>Worker</span><span>(</span><span>&#39;gpu-worker.js&#39;</span><span>)</span><span>;</span>
<span>worker</span><span>.</span><span>onmessage</span> <span>=</span> <span>function</span><span>(</span><span>e</span><span>)</span> <span>{</span>
  <span>var</span> <span>result</span> <span>=</span> <span>e</span><span>.</span><span>data</span><span>;</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span>result</span><span>)</span><span>;</span>
<span>}</span><span>;</span></pre></div>
<h2 dir="auto"><a id="user-content-cleanup" aria-hidden="true" href="#cleanup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cleanup</h2>
<ul dir="auto">
<li>for instances of <code>GPU</code> use the <code>destroy</code> method.  Example: <code>gpu.destroy()</code></li>
<li>for instances of <code>Kernel</code> use the <code>destroy</code> method.  Example: <code>kernel.destroy()</code></li>
<li>for instances of <code>Texture</code> use the <code>delete</code> method. Example: <code>texture.delete()</code></li>
<li>for instances of <code>Texture</code> that you might want to reuse/reset to zeros, use the <code>clear</code> method. Example: <code>texture.clear()</code></li>
</ul>
<h2 dir="auto"><a id="user-content-flattened-typed-array-support" aria-hidden="true" href="#flattened-typed-array-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Flattened typed array support</h2>
<p dir="auto">To use the useful <code>x</code>, <code>y</code>, <code>z</code> <code>thread</code> lookup api inside of GPU.js, and yet use flattened arrays, there is the <code>Input</code> type.
This is generally much faster for when sending values to the gpu, especially with larger data sets.  Usage example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const { GPU, input, Input } = require(&#39;gpu.js&#39;);
const gpu = new GPU();
const kernel = gpu.createKernel(function(a, b) {
  return a[this.thread.y][this.thread.x] + b[this.thread.y][this.thread.x];
}).setOutput([3,3]);


kernel(
  input(
    new Float32Array([1,2,3,4,5,6,7,8,9]),
    [3, 3]
  ),
  input(
    new Float32Array([1,2,3,4,5,6,7,8,9]),
    [3, 3]
  )
);"><pre><span>const</span> <span>{</span> <span>GPU</span><span>,</span> input<span>,</span> Input <span>}</span> <span>=</span> <span>require</span><span>(</span><span>&#39;gpu.js&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>{</span>
  <span>return</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span> <span>+</span> <span>b</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>y</span><span>]</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>;</span>
<span>}</span><span>)</span><span>.</span><span>setOutput</span><span>(</span><span>[</span><span>3</span><span>,</span><span>3</span><span>]</span><span>)</span><span>;</span>


<span>kernel</span><span>(</span>
  <span>input</span><span>(</span>
    <span>new</span> <span>Float32Array</span><span>(</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>,</span><span>5</span><span>,</span><span>6</span><span>,</span><span>7</span><span>,</span><span>8</span><span>,</span><span>9</span><span>]</span><span>)</span><span>,</span>
    <span>[</span><span>3</span><span>,</span> <span>3</span><span>]</span>
  <span>)</span><span>,</span>
  <span>input</span><span>(</span>
    <span>new</span> <span>Float32Array</span><span>(</span><span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>,</span><span>5</span><span>,</span><span>6</span><span>,</span><span>7</span><span>,</span><span>8</span><span>,</span><span>9</span><span>]</span><span>)</span><span>,</span>
    <span>[</span><span>3</span><span>,</span> <span>3</span><span>]</span>
  <span>)</span>
<span>)</span><span>;</span></pre></div>
<p dir="auto">Note: <code>input(value, size)</code> is a simple pointer for <code>new Input(value, size)</code></p>
<h2 dir="auto"><a id="user-content-precompiled-and-lighter-weight-kernels" aria-hidden="true" href="#precompiled-and-lighter-weight-kernels"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Precompiled and Lighter Weight Kernels</h2>
<h3 dir="auto"><a id="user-content-using-json" aria-hidden="true" href="#using-json"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>using JSON</h3>
<p dir="auto">GPU.js packs a lot of functionality into a single file, such as a complete javascript parse, which may not be needed in some cases.
To aid in keeping your kernels lightweight, the <code>kernel.toJSON()</code> method was added.
This allows you to reuse a previously built kernel, without the need to re-parse the javascript.
Here is an example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU();
const kernel = gpu.createKernel(function() {
  return [1,2,3,4];
}, { output: [1] });
console.log(kernel()); // [Float32Array([1,2,3,4])];
const json = kernel.toJSON();
const newKernelFromJson = gpu.createKernel(json);
console.log(newKernelFromJSON()); // [Float32Array([1,2,3,4])];"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>[</span><span>1</span><span>,</span><span>2</span><span>,</span><span>3</span><span>,</span><span>4</span><span>]</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>1</span><span>]</span> <span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>kernel</span><span>(</span><span>)</span><span>)</span><span>;</span> <span>// [Float32Array([1,2,3,4])];</span>
<span>const</span> <span>json</span> <span>=</span> <span>kernel</span><span>.</span><span>toJSON</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>newKernelFromJson</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>json</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>newKernelFromJSON</span><span>(</span><span>)</span><span>)</span><span>;</span> <span>// [Float32Array([1,2,3,4])];</span></pre></div>
<p dir="auto">NOTE: There is lighter weight, pre-built, version of GPU.js to assist with serializing from to and from json in the dist folder of the project, which include:</p>
<ul dir="auto">
<li><a href="https://github.com/gpujs/gpu.js/blob/develop/dist/gpu-browser-core.js">dist/gpu-browser-core.js</a></li>
<li><a href="https://github.com/gpujs/gpu.js/blob/develop/dist/gpu-browser-core.min.js">dist/gpu-browser-core.min.js</a></li>
</ul>
<h3 dir="auto"><a id="user-content-exporting-kernel" aria-hidden="true" href="#exporting-kernel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exporting kernel</h3>
<p dir="auto">GPU.js supports seeing exactly how it is interacting with the graphics processor by means of the <code>kernel.toString(...)</code> method.
This method, when called, creates a kernel that executes <em>exactly the instruction set given to the GPU (or CPU)</em> <em>as a
very tiny reusable function</em> that instantiates a kernel.</p>
<p dir="auto">NOTE: When exporting a kernel and using <code>constants</code> the following constants are <em>not changeable</em>:</p>
<ul dir="auto">
<li><code>Array(2)</code></li>
<li><code>Array(3)</code></li>
<li><code>Array(4)</code></li>
<li><code>Integer</code></li>
<li><code>Number</code></li>
<li><code>Float</code></li>
<li><code>Boolean</code></li>
</ul>
<p dir="auto">Here is an example used to/from file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU } from &#39;gpu.js&#39;;
import * as fs from &#39;fs&#39;;
const gpu = new GPU();
const kernel = gpu.createKernel(function(v) {
  return this.thread.x + v + this.constants.v1;
}, { output: [10], constants: { v1: 100 } });
const result = kernel(1);
const kernelString = kernel.toString(1);
fs.writeFileSync(&#39;./my-exported-kernel.js&#39;, &#39;module.exports = &#39; + kernelString);
import * as MyExportedKernel from &#39;./my-exported-kernel&#39;;
import gl from &#39;gl&#39;;
const myExportedKernel = MyExportedKernel({ context: gl(1,1), constants: { v1: 100 } });"><pre><span>import</span> <span>{</span> <span>GPU</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>import</span> <span>*</span> <span>as</span> <span>fs</span> <span>from</span> <span>&#39;fs&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>v</span><span>)</span> <span>{</span>
  <span>return</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span> <span>+</span> <span>v</span> <span>+</span> <span>this</span><span>.</span><span>constants</span><span>.</span><span>v1</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>10</span><span>]</span><span>,</span> <span>constants</span>: <span>{</span> <span>v1</span>: <span>100</span> <span>}</span> <span>}</span><span>)</span><span>;</span>
<span>const</span> <span>result</span> <span>=</span> <span>kernel</span><span>(</span><span>1</span><span>)</span><span>;</span>
<span>const</span> <span>kernelString</span> <span>=</span> <span>kernel</span><span>.</span><span>toString</span><span>(</span><span>1</span><span>)</span><span>;</span>
<span>fs</span><span>.</span><span>writeFileSync</span><span>(</span><span>&#39;./my-exported-kernel.js&#39;</span><span>,</span> <span>&#39;module.exports = &#39;</span> <span>+</span> <span>kernelString</span><span>)</span><span>;</span>
<span>import</span> <span>*</span> <span>as</span> <span>MyExportedKernel</span> <span>from</span> <span>&#39;./my-exported-kernel&#39;</span><span>;</span>
<span>import</span> <span>gl</span> <span>from</span> <span>&#39;gl&#39;</span><span>;</span>
<span>const</span> <span>myExportedKernel</span> <span>=</span> <span>MyExportedKernel</span><span>(</span><span>{</span> <span>context</span>: <span>gl</span><span>(</span><span>1</span><span>,</span><span>1</span><span>)</span><span>,</span> <span>constants</span>: <span>{</span> <span>v1</span>: <span>100</span> <span>}</span> <span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Here is an example for just-in-time function creation:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU();
const kernel = gpu.createKernel(function(a) {
  let sum = 0;
  for (let i = 0; i &lt; 6; i++) {
    sum += a[this.thread.x][i];
  }
  return sum;
  }, { output: [6] });
kernel(input(a, [6, 6]));
const kernelString = kernel.toString(input(a, [6, 6]));
const newKernel = new Function(&#39;return &#39; + kernelString)()({ context });
newKernel(input(a, [6, 6]));"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>a</span><span>)</span> <span>{</span>
  <span>let</span> <span>sum</span> <span>=</span> <span>0</span><span>;</span>
  <span>for</span> <span>(</span><span>let</span> <span>i</span> <span>=</span> <span>0</span><span>;</span> <span>i</span> <span>&lt;</span> <span>6</span><span>;</span> <span>i</span><span>++</span><span>)</span> <span>{</span>
    <span>sum</span> <span>+=</span> <span>a</span><span>[</span><span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>]</span><span>[</span><span>i</span><span>]</span><span>;</span>
  <span>}</span>
  <span>return</span> <span>sum</span><span>;</span>
  <span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>6</span><span>]</span> <span>}</span><span>)</span><span>;</span>
<span>kernel</span><span>(</span><span>input</span><span>(</span><span>a</span><span>,</span> <span>[</span><span>6</span><span>,</span> <span>6</span><span>]</span><span>)</span><span>)</span><span>;</span>
<span>const</span> <span>kernelString</span> <span>=</span> <span>kernel</span><span>.</span><span>toString</span><span>(</span><span>input</span><span>(</span><span>a</span><span>,</span> <span>[</span><span>6</span><span>,</span> <span>6</span><span>]</span><span>)</span><span>)</span><span>;</span>
<span>const</span> <span>newKernel</span> <span>=</span> <span>new</span> <span>Function</span><span>(</span><span>&#39;return &#39;</span> <span>+</span> <span>kernelString</span><span>)</span><span>(</span><span>)</span><span>(</span><span>{</span> context <span>}</span><span>)</span><span>;</span>
<span>newKernel</span><span>(</span><span>input</span><span>(</span><span>a</span><span>,</span> <span>[</span><span>6</span><span>,</span> <span>6</span><span>]</span><span>)</span><span>)</span><span>;</span></pre></div>
<h4 dir="auto"><a id="user-content-using-constants-with-kerneltostringargs" aria-hidden="true" href="#using-constants-with-kerneltostringargs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>using constants with <code>kernel.toString(...args)</code></h4>
<p dir="auto">You can assign <em>some</em> new constants when using the function output from <code>.toString()</code>,</p>
<h2 dir="auto"><a id="user-content-supported-math-functions" aria-hidden="true" href="#supported-math-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported Math functions</h2>
<p dir="auto">Since the code running in the kernel is actually compiled to GLSL code, not all functions from the JavaScript Math module are supported.</p>
<p dir="auto">This is a list of the supported ones:</p>
<ul dir="auto">
<li><code>Math.abs()</code></li>
<li><code>Math.acos()</code></li>
<li><code>Math.acosh()</code></li>
<li><code>Math.asin()</code></li>
<li><code>Math.asinh()</code></li>
<li><code>Math.atan()</code></li>
<li><code>Math.atanh()</code></li>
<li><code>Math.atan2()</code></li>
<li><code>Math.cbrt()</code></li>
<li><code>Math.ceil()</code></li>
<li><code>Math.cos()</code></li>
<li><code>Math.cosh()</code></li>
<li><code>Math.exp()</code></li>
<li><code>Math.expm1()</code></li>
<li><code>Math.floor()</code></li>
<li><code>Math.fround()</code></li>
<li><code>Math.imul()</code></li>
<li><code>Math.log()</code></li>
<li><code>Math.log10()</code></li>
<li><code>Math.log1p()</code></li>
<li><code>Math.log2()</code></li>
<li><code>Math.max()</code></li>
<li><code>Math.min()</code></li>
<li><code>Math.pow()</code></li>
<li><code>Math.random()</code>
<ul dir="auto">
<li>A note on random.  We use <a href="https://github.com/gpujs/gpu.js/blob/develop/src/plugins/math-random-uniformly-distributed.js">a plugin</a> to generate random.
Random seeded <em>and</em> generated, <em>both from the GPU</em>, is not as good as random from the CPU as there are more things that the CPU can seed random from.
However, we seed random on the GPU, <em>from a random value in the CPU</em>.
We then seed the subsequent randoms from the previous random value.
So we seed from CPU, and generate from GPU.
Which is still not as good as CPU, but closer.
While this isn&#39;t perfect, it should suffice in most scenarios.
In any case, we must give thanks to <a href="https://www.randompower.eu/" rel="nofollow">RandomPower</a>, and this <a href="https://github.com/gpujs/gpu.js/issues/498" data-hovercard-type="issue" data-hovercard-url="/gpujs/gpu.js/issues/498/hovercard">issue</a>, for assisting in improving our implementation of random.</li>
</ul>
</li>
<li><code>Math.round()</code></li>
<li><code>Math.sign()</code></li>
<li><code>Math.sin()</code></li>
<li><code>Math.sinh()</code></li>
<li><code>Math.sqrt()</code></li>
<li><code>Math.tan()</code></li>
<li><code>Math.tanh()</code></li>
<li><code>Math.trunc()</code></li>
</ul>
<p dir="auto">This is a list and reasons of unsupported ones:</p>
<ul dir="auto">
<li><code>Math.clz32</code> - bits directly are hard</li>
<li><code>Math.hypot</code> - dynamically sized</li>
</ul>
<h2 dir="auto"><a id="user-content-how-to-check-what-is-supported" aria-hidden="true" href="#how-to-check-what-is-supported"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to check what is supported</h2>
<p dir="auto">To assist with mostly unit tests, but perhaps in scenarios outside of GPU.js, there are the following logical checks to determine what support level the system executing a GPU.js kernel may have:</p>
<ul dir="auto">
<li><code>GPU.disableValidation()</code> - turn off all kernel validation</li>
<li><code>GPU.enableValidation()</code> - turn on all kernel validation</li>
<li><code>GPU.isGPUSupported</code>: <code>boolean</code> - checks if GPU is in-fact supported</li>
<li><code>GPU.isKernelMapSupported</code>: <code>boolean</code> - checks if kernel maps are supported</li>
<li><code>GPU.isOffscreenCanvasSupported</code>: <code>boolean</code> - checks if offscreen canvas is supported</li>
<li><code>GPU.isWebGLSupported</code>: <code>boolean</code> - checks if WebGL v1 is supported</li>
<li><code>GPU.isWebGL2Supported</code>: <code>boolean</code> - checks if WebGL v2 is supported</li>
<li><code>GPU.isHeadlessGLSupported</code>: <code>boolean</code> - checks if headlessgl is supported</li>
<li><code>GPU.isCanvasSupported</code>: <code>boolean</code> - checks if canvas is supported</li>
<li><code>GPU.isGPUHTMLImageArraySupported</code>: <code>boolean</code> - checks if the platform supports HTMLImageArray&#39;s</li>
<li><code>GPU.isSinglePrecisionSupported</code>: <code>boolean</code> - checks if the system supports single precision float 32 values</li>
</ul>
<h2 dir="auto"><a id="user-content-typescript-typings" aria-hidden="true" href="#typescript-typings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Typescript Typings</h2>
<p dir="auto">Typescript is supported!  Typings can be found <a href="https://github.com/gpujs/gpu.js/blob/develop/src/index.d.ts">here</a>!
For strongly typed kernels:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU, IKernelFunctionThis } from &#39;gpu.js&#39;;
const gpu = new GPU();

function kernelFunction(this: IKernelFunctionThis): number {
  return 1 + this.thread.x;
}

const kernelMap = gpu.createKernel&lt;typeof kernelFunction&gt;(kernelFunction)
  .setOutput([3,3,3]);

const result = kernelMap();

console.log(result as number[][][]);"><pre><span>import</span> <span>{</span> <span>GPU</span><span>,</span> <span>IKernelFunctionThis</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>

<span>function</span> <span>kernelFunction</span><span>(</span><span>this</span>: <span>IKernelFunctionThis</span><span>)</span>: <span>number</span> <span>{</span>
  <span>return</span> <span>1</span> <span>+</span> <span>this</span><span>.</span><span>thread</span><span>.</span><span>x</span><span>;</span>
<span>}</span>

<span>const</span> <span>kernelMap</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>&lt;</span><span>typeof</span> <span>kernelFunction</span><span>&gt;</span><span>(</span><span>kernelFunction</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>3</span><span>,</span><span>3</span><span>,</span><span>3</span><span>]</span><span>)</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>kernelMap</span><span>(</span><span>)</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>result</span> <span>as</span> <span>number</span><span>[</span><span>]</span><span>[</span><span>]</span><span>[</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto">For strongly typed mapped kernels:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU, Texture, IKernelFunctionThis } from &#39;gpu.js&#39;;
const gpu = new GPU();

function kernelFunction(this: IKernelFunctionThis): [number, number] {
  return [1, 1];
}

function subKernel(): [number, number] {
  return [1, 1];
}

const kernelMap = gpu.createKernelMap&lt;typeof kernelFunction&gt;({
  test: subKernel,
}, kernelFunction)
  .setOutput([1])
  .setPipeline(true);

const result = kernelMap();

console.log((result.test as Texture).toArray() as [number, number][]);"><pre><span>import</span> <span>{</span> <span>GPU</span><span>,</span> <span>Texture</span><span>,</span> <span>IKernelFunctionThis</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>

<span>function</span> <span>kernelFunction</span><span>(</span><span>this</span>: <span>IKernelFunctionThis</span><span>)</span>: <span>[</span><span>number</span><span>,</span> <span>number</span><span>]</span> <span>{</span>
  <span>return</span> <span>[</span><span>1</span><span>,</span> <span>1</span><span>]</span><span>;</span>
<span>}</span>

<span>function</span> <span>subKernel</span><span>(</span><span>)</span>: <span>[</span><span>number</span><span>,</span> <span>number</span><span>]</span> <span>{</span>
  <span>return</span> <span>[</span><span>1</span><span>,</span> <span>1</span><span>]</span><span>;</span>
<span>}</span>

<span>const</span> <span>kernelMap</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernelMap</span><span>&lt;</span><span>typeof</span> <span>kernelFunction</span><span>&gt;</span><span>(</span><span>{</span>
  <span>test</span>: <span>subKernel</span><span>,</span>
<span>}</span><span>,</span> <span>kernelFunction</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>1</span><span>]</span><span>)</span>
  <span>.</span><span>setPipeline</span><span>(</span><span>true</span><span>)</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>kernelMap</span><span>(</span><span>)</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>(</span><span>result</span><span>.</span><span>test</span> <span>as</span> <span>Texture</span><span>)</span><span>.</span><span>toArray</span><span>(</span><span>)</span> <span>as</span> <span>[</span><span>number</span><span>,</span> <span>number</span><span>]</span><span>[</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto">For extending constants:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { GPU, IKernelFunctionThis } from &#39;gpu.js&#39;;
const gpu = new GPU();

interface IConstants {
  screen: [number, number];
}

type This = {
  constants: IConstants
} &amp; IKernelFunctionThis;

function kernelFunction(this: This): number {
  const { screen } = this.constants;
  return 1 + screen[0];
}

const kernelMap = gpu.createKernel&lt;typeof kernelFunction&gt;(kernelFunction)
  .setOutput([3,3,3])
  .setConstants&lt;IConstants&gt;({
    screen: [1, 1]
  });

const result = kernelMap();

console.log(result as number[][][]);"><pre><span>import</span> <span>{</span> <span>GPU</span><span>,</span> <span>IKernelFunctionThis</span> <span>}</span> <span>from</span> <span>&#39;gpu.js&#39;</span><span>;</span>
<span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>

<span>interface</span> <span>IConstants</span> <span>{</span>
  <span>screen</span>: <span>[</span><span>number</span><span>,</span> <span>number</span><span>]</span><span>;</span>
<span>}</span>

<span>type</span> <span>This</span> <span>=</span> <span>{</span>
  <span>constants</span>: <span>IConstants</span>
<span>}</span> <span>&amp;</span> <span>IKernelFunctionThis</span><span>;</span>

<span>function</span> <span>kernelFunction</span><span>(</span><span>this</span>: <span>This</span><span>)</span>: <span>number</span> <span>{</span>
  <span>const</span> <span>{</span> screen <span>}</span> <span>=</span> <span>this</span><span>.</span><span>constants</span><span>;</span>
  <span>return</span> <span>1</span> <span>+</span> <span>screen</span><span>[</span><span>0</span><span>]</span><span>;</span>
<span>}</span>

<span>const</span> <span>kernelMap</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>&lt;</span><span>typeof</span> <span>kernelFunction</span><span>&gt;</span><span>(</span><span>kernelFunction</span><span>)</span>
  <span>.</span><span>setOutput</span><span>(</span><span>[</span><span>3</span><span>,</span><span>3</span><span>,</span><span>3</span><span>]</span><span>)</span>
  <span>.</span><span>setConstants</span><span>&lt;</span><span>IConstants</span><span>&gt;</span><span>(</span><span>{</span>
    <span>screen</span>: <span>[</span><span>1</span><span>,</span> <span>1</span><span>]</span>
  <span>}</span><span>)</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>kernelMap</span><span>(</span><span>)</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>result</span> <span>as</span> <span>number</span><span>[</span><span>]</span><span>[</span><span>]</span><span>[</span><span>]</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><a href="https://github.com/gpujs/gpu.js/blob/develop/examples">Click here</a> for more typescript examples.</p>
<h2 dir="auto"><a id="user-content-destructured-assignments-new-in-v2" aria-hidden="true" href="#destructured-assignments-new-in-v2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Destructured Assignments <strong>New in V2!</strong></h2>
<p dir="auto">Destructured Objects and Arrays work in GPU.js.</p>
<ul dir="auto">
<li>Object destructuring
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU();
const kernel = gpu.createKernel(function() {
  const { thread: {x, y} } = this;
  return x + y;
}, { output: [2] });
console.log(kernel());"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>{</span> <span>thread</span>: <span>{</span>x<span>,</span> y<span>}</span> <span>}</span> <span>=</span> <span>this</span><span>;</span>
  <span>return</span> <span>x</span> <span>+</span> <span>y</span><span>;</span>
<span>}</span><span>,</span> <span>{</span> <span>output</span>: <span>[</span><span>2</span><span>]</span> <span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>kernel</span><span>(</span><span>)</span><span>)</span><span>;</span></pre></div>
</li>
<li>Array destructuring
<div dir="auto" data-snippet-clipboard-copy-content="const gpu = new GPU();
const kernel = gpu.createKernel(function(array) {
  const [first, second] = array;
  return first + second; 
}, {
  output: [2],
  argumentTypes: { array: &#39;Array(2)&#39; }
});
console.log(kernel([1, 2]));"><pre><span>const</span> <span>gpu</span> <span>=</span> <span>new</span> <span>GPU</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>kernel</span> <span>=</span> <span>gpu</span><span>.</span><span>createKernel</span><span>(</span><span>function</span><span>(</span><span>array</span><span>)</span> <span>{</span>
  <span>const</span> <span>[</span><span>first</span><span>,</span> <span>second</span><span>]</span> <span>=</span> <span>array</span><span>;</span>
  <span>return</span> <span>first</span> <span>+</span> <span>second</span><span>;</span> 
<span>}</span><span>,</span> <span>{</span>
  <span>output</span>: <span>[</span><span>2</span><span>]</span><span>,</span>
  <span>argumentTypes</span>: <span>{</span> <span>array</span>: <span>&#39;Array(2)&#39;</span> <span>}</span>
<span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>kernel</span><span>(</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>]</span><span>)</span><span>)</span><span>;</span></pre></div>
</li>
</ul>
<h2 dir="auto"><a id="user-content-dealing-with-transpilation" aria-hidden="true" href="#dealing-with-transpilation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dealing With Transpilation</h2>
<p dir="auto">Transpilation doesn&#39;t do the best job of keeping code beautiful.  To aid in this endeavor GPU.js can handle some scenarios to still aid you harnessing the GPU in less than ideal circumstances.
Here is a list of a few things that GPU.js does to fix transpilation:</p>
<ul dir="auto">
<li>When a transpiler such as <a href="https://babeljs.io/" rel="nofollow">Babel</a> changes <code>myCall()</code> to <code>(0, _myCall.myCall)</code>, it is gracefully handled.</li>
</ul>
<h2 dir="auto"><a id="user-content-full-api-reference" aria-hidden="true" href="#full-api-reference"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Full API Reference</h2>
<p dir="auto">You can find a <a href="https://doxdox.org/gpujs/gpu.js/" rel="nofollow">complete API reference here</a>.</p>
<h2 dir="auto"><a id="user-content-how-possible-in-node" aria-hidden="true" href="#how-possible-in-node"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How possible in node?</h2>
<p dir="auto">GPU.js uses <a href="https://github.com/stackgl/headless-gl">HeadlessGL</a> in node for GPU acceleration.
GPU.js is written in such a way, you can introduce your own backend.  Have a suggestion?  We&#39;d love to hear it!</p>
<h2 dir="auto"><a id="user-content-terms-explained" aria-hidden="true" href="#terms-explained"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Terms Explained</h2>
<ul dir="auto">
<li>Kernel - A function that is tightly coupled to program that runs on the Graphic Processor</li>
<li>Texture - A graphical artifact that is packed with data, in the case of GPU.js, bit shifted parts of a 32 bit floating point decimal</li>
</ul>
<h2 dir="auto"><a id="user-content-testing" aria-hidden="true" href="#testing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing</h2>
<p dir="auto">Testing is done (right now) manually, (help wanted <a href="https://github.com/gpujs/gpu.js/issues/515" data-hovercard-type="issue" data-hovercard-url="/gpujs/gpu.js/issues/515/hovercard">here</a> if you can!), using the following:</p>
<ul dir="auto">
<li>For browser, setup a webserver on the root of the gpu.js project and visit <a href="http://url/test/all.html" rel="nofollow">http://url/test/all.html</a></li>
<li>For node, run either of the 3 commands:
<ul dir="auto">
<li><code>yarn test test/features</code></li>
<li><code>yarn test test/internal</code></li>
<li><code>yarn test test/issues</code></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-building" aria-hidden="true" href="#building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h2>
<p dir="auto">Building isn&#39;t required on node, but is for browser.  To build the browser&#39;s files, run: <code>yarn make</code></p>

<h2 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h2>
<p dir="auto">Contributors are welcome! Create a merge request to the <code>develop</code> branch and we
will gladly review it. If you wish to get write access to the repository,
please email us and we will review your application and grant you access to
the <code>develop</code> branch.</p>
<p dir="auto">We promise never to pass off your code as ours.</p>
<h3 dir="auto"><a id="user-content-issues" aria-hidden="true" href="#issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Issues</h3>
<p dir="auto">If you have an issue, either a bug or a feature you think would benefit your project let us know and we will do our best.</p>
<p dir="auto">Create issues <a href="https://github.com/gpujs/gpu.js/issues">here</a> and follow the template.</p>
<h3 dir="auto"><a id="user-content-contributors" aria-hidden="true" href="#contributors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributors</h3>
<p dir="auto">This project exists thanks to all the people who contribute. [<a href="https://github.com/gpujs/gpu.js/blob/develop/CONTRIBUTING.md">Contribute</a>].
<a href="https://github.com/gpujs/gpu.js/graphs/contributors"><img src="https://camo.githubusercontent.com/531f21c91909204f6ebe5925b0028bb572acf505185b4390edb9104239279ae1/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f636f6e7472696275746f72732e7376673f77696474683d38393026627574746f6e3d66616c7365" data-canonical-src="https://opencollective.com/gpujs/contributors.svg?width=890&amp;button=false"/></a></p>
<h3 dir="auto"><a id="user-content-backers" aria-hidden="true" href="#backers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Backers</h3>
<p dir="auto">Thank you to all our backers! <g-emoji alias="pray" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f64f.png">🙏</g-emoji> [<a href="https://opencollective.com/gpujs#backer" rel="nofollow">Become a backer</a>]</p>
<p dir="auto"><a href="https://opencollective.com/gpujs#backers" rel="nofollow"><img src="https://camo.githubusercontent.com/99510f451f88af6a7bfed3749921a73ee43fb2e2ee4fcd901cd1ae9f67bcd03b/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f6261636b6572732e7376673f77696474683d383930" data-canonical-src="https://opencollective.com/gpujs/backers.svg?width=890"/></a></p>
<h3 dir="auto"><a id="user-content-sponsors" aria-hidden="true" href="#sponsors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sponsors</h3>
<p dir="auto">Support this project by becoming a sponsor. Your logo will show up here with a link to your website. [<a href="https://opencollective.com/gpujs#sponsor" rel="nofollow">Become a sponsor</a>]</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b322900cddbaae770f28e829592e36d77d46bb82022e0f41f47fee821bcf5e62/68747470733a2f2f7777772e6c65616465726770752e636f6d2f6173736574732f6d61696e2f6c6f676f5f6c65616465726770752d613863616361633063393064323034623766376636633834323063366131343965373165626535336633663238663366633934613031636430356330626439332e706e67"><img src="https://camo.githubusercontent.com/b322900cddbaae770f28e829592e36d77d46bb82022e0f41f47fee821bcf5e62/68747470733a2f2f7777772e6c65616465726770752e636f6d2f6173736574732f6d61696e2f6c6f676f5f6c65616465726770752d613863616361633063393064323034623766376636633834323063366131343965373165626535336633663238663366633934613031636430356330626439332e706e67" alt="" data-canonical-src="https://www.leadergpu.com/assets/main/logo_leadergpu-a8cacac0c90d204b7f7f6c8420c6a149e71ebe53f3f28f3fc94a01cd05c0bd93.png"/></a>
Sponsored NodeJS GPU environment from <a href="https://www.leadergpu.com" rel="nofollow">LeaderGPU</a> - These guys rock!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b6442ce5822a612afba742887c053e2543a664f1310b7599b1f145eb01848bea/68747470733a2f2f33667874717931386b796766336f6e33627533396b6839332d7770656e67696e652e6e6574646e612d73736c2e636f6d2f77702d636f6e74656e742f7468656d65732f62726f77736572737461636b2f696d672f62726f77736572737461636b2d6c6f676f2e737667"><img src="https://camo.githubusercontent.com/b6442ce5822a612afba742887c053e2543a664f1310b7599b1f145eb01848bea/68747470733a2f2f33667874717931386b796766336f6e33627533396b6839332d7770656e67696e652e6e6574646e612d73736c2e636f6d2f77702d636f6e74656e742f7468656d65732f62726f77736572737461636b2f696d672f62726f77736572737461636b2d6c6f676f2e737667" alt="" data-canonical-src="https://3fxtqy18kygf3on3bu39kh93-wpengine.netdna-ssl.com/wp-content/themes/browserstack/img/browserstack-logo.svg"/></a>
Sponsored Browser GPU environment&#39;s from <a href="https://browserstack.com" rel="nofollow">BrowserStack</a> - Second to none!</p>
<p dir="auto"><a href="https://opencollective.com/gpujs/sponsor/0/website" rel="nofollow"><img src="https://camo.githubusercontent.com/6d99ccbb3cc37f43d412264db172f4f5d41d706ec06fcabbb388fcbb94f6c47a/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f302f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/0/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/1/website" rel="nofollow"><img src="https://camo.githubusercontent.com/d83fc9c0fb534e8dca64a55c058c8bb721034fff064f903abf0f10c5b22d5ea9/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f312f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/1/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/2/website" rel="nofollow"><img src="https://camo.githubusercontent.com/c2119f37856ddf1f7579a317d66e6e9e1a080490d5f7e65ecdf95473e9baaafa/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f322f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/2/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/3/website" rel="nofollow"><img src="https://camo.githubusercontent.com/c770748d9637a6fcb5b97a84e073ca0ecf93cad208566caf61be13b46b04d6be/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f332f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/3/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/4/website" rel="nofollow"><img src="https://camo.githubusercontent.com/b423c180f8a09406cf1724bb82747514471650ecf0ab89c349a2630f71df729f/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f342f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/4/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/5/website" rel="nofollow"><img src="https://camo.githubusercontent.com/11c66e1d2b8f1e053bd27b7e40576798fa60ae4a45ed4f7694e908d15db7c059/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f352f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/5/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/6/website" rel="nofollow"><img src="https://camo.githubusercontent.com/f956f92e8e2f63e44c4784b41749019d7bb8ce1e6769a453bee1b5f69b04800f/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f362f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/6/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/7/website" rel="nofollow"><img src="https://camo.githubusercontent.com/2e66cd05488c75a5534b350cfb59d00ee401f55d6255c3ad238a584dc39afa2f/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f372f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/7/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/8/website" rel="nofollow"><img src="https://camo.githubusercontent.com/084364699f1207692e801e34dbc9ae3c05582fe219a8280aa814e7c2108c3b3e/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f382f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/8/avatar.svg"/></a>
<a href="https://opencollective.com/gpujs/sponsor/9/website" rel="nofollow"><img src="https://camo.githubusercontent.com/2f993aac92da01b71e306e6caba4bba810eaa84b5f82a0cbcb88159273f89c24/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6770756a732f73706f6e736f722f392f6176617461722e737667" data-canonical-src="https://opencollective.com/gpujs/sponsor/9/avatar.svg"/></a></p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="https://github.com/gpujs/gpu.js/blob/develop/LICENSE">License</a></h2>
</article>
          </div></div>
  </body>
</html>
