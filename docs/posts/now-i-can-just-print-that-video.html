<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.forret.com/2023/12/01/printthatvideo/">Original</a>
    <h1>Now I can just print that video</h1>
    
    <div id="readability-page-1" class="page"><div>
  
  <p><span>01 Dec 2023</span></p><p>It all started with Instagram Reels showing me too many yummy cooking videos. I wanted to try some recipes out myself. 
But I didn’t want to have to keep my phone in the kitchen, and I didn’t want to have to keep unlocking it to see the next step. 
I wanted to print the recipe out, and have it on the counter while I was cooking. 
Wouldn’t it be cool if I could just <strong>print that video</strong>?</p>

<blockquote>
  <p>TL;DR: I am making a <a href="https://printthatvideo.com">web service to print that video</a>.</p>
</blockquote>

<p><img src="https://blog.forret.com/wp-content/uploads/2023/12/url.download.339f88.jpg" alt="PrintThatVideo"/></p>

<p>Surely the current state of A.I. services should make this within reach. Let’s see what we need.</p>

<p>Where is the relevant information in a cooking video?</p>

<ul>
  <li>Sometimes it is posted as the body text with the video.</li>
  <li>Sometimes it is narrated by a voiceover.</li>
  <li>Sometimes it is a series of (sub)titles that are printed on the screen.</li>
  <li>Sometimes essential steps are shown on the screen (not with text).</li>
</ul>

<p>So I started a new <a href="https://laravel.com">Laravel</a> project and tried to tackle these one by one.</p>

<blockquote>
  <p>Running <code>curl -s &#34;https://laravel.build/NewAmazingIdea&#34; | bash</code> still gives me a kick every time.</p>
</blockquote>

<h2 id="step-1-downloading-the-video">Step 1: downloading the video</h2>

<p>The obvious choice there is <a href="https://github.com/yt-dlp/yt-dlp">yt-dlp</a>. 
It allows straightforward command-line downloading of YouTube, Instagram, TikTok, … videos.
I encapsulated it in a PHP Class <em>Downloader</em> that takes a URL and downloads the video to a local file.</p>

<h2 id="step-2-extracting-the-body-text">Step 2: extracting the body text</h2>

<p>Again <code>yt-dlp</code> comes to the rescue. It can also download an JSON metadata file that contains the title, body text, duration… of the video.</p>

<div><div><pre><code>yt-dlp <span>-q</span> <span>--write-info-json</span> <span>-o</span> <span>&#39;$output&#39;</span> <span>&#39;$url&#39;</span>
</code></pre></div></div>
<p>So the Downloader class now also downloads the metadata file and parses it.</p>

<p>In practice: this is often used in Instagram reels, and YouTube shorts, less so with TikTok posts.</p>



<p>This is where we open the Pandora’s box of A.I. services. I found an intermediate API service <a href="https://www.edenai.co">EdenAI</a> that allows me to easily switch between different providers of a certain service. E.g. for speech-to-text I can choose between Google, Amazon AWS, Microsoft, IBM, …I tried some services out for speech recognition and I got the best results with <a href="https://deepgram.com">Deepgram</a>, because they also format the resulting text in sentences with punctuation.</p>

<p>First I extract a mono audio file from the original video. Then I send it to the EdenAI API and get back a JSON file with the text.
The EdenAI API is asynchronous, so I had to add a polling mechanism to my PHP class. Laravel queue to the rescue. Generally I get results back within 5 secs.</p>

<p>The result is readable: “<em>We’re making hot sauce a sweeter cousin, fermented hot honey. You’re gonna need honey. I’ve got some incredible raw honey here. Choice, remove the stalks and chop out nice and small. If don’t worry about. Finely slice some real onion, here slice some garlic cloves and pick some fresh thyme. (…)</em>”</p>



<p>At first ,I was afraid I would have to render out 2 to 4 frames per second and run a OCR service on each of them (which would have been expensive). 
But I discovered there are already 2 <a href="https://www.edenai.co/providers?technologies=Video">video-to-text services</a> out there, Amazon and Google.</p>

<p>First I extract a lower-res lower-framerate video from the original video. Again I send it to the EdenAI API and get back a JSON file with all the detected pieces of text and when they appeared.</p>

<p>Unfortunately the readability of the results is not great.</p>

<table><tbody><tr><td><video controls="" width="250"><source src="/wp-content/uploads/2023/12/chilis.mp4" type="video/mp4"/></video></td>
<td>making hot sauce&#39;s • and leave to ferment • like and follow • and I don&#39;t wanna • you should smell • remove the stalks • and I wish • not to be missed • and don&#39;t forget • however you wish • you can leave the • stir everything together • the difference to • some garlic cloves • ready to enjoy • get those chillies • insanely good and • to like and follow • fresh thyme • honey to settle • for part 2 • nice and small • wait anymore • more honey as needed • all over this • sweeter cousin • and cover with that • it&#39;s like pizza • and chop it up • garlic and thyme (...)</td></tr></tbody></table>

<p>So I guess I need to work on this a bit longer.</p>



<p>For this Proof-of-Concept phase, I just extract 6 evenly spaces frames from the video. In theory, I could also use image recognition to extract the frames that contain the most relevant information, e.g. those that contain text (might be an illustrated instruction), or scene changes (might be a new step in the recipe).</p>



<h2 id="step-6-printing-the-result">Step 6: printing the result</h2>

<p>So what does that look like all together?</p>

<p>It sure works for some of the cooking/culinary videos that I had in mind. I’ve tested it with Instagram, YouTube and TikTok videos.
In theory, it could work for any video that has a voiceover or subtitles.
Fitness instructions, make-up videos, language lessons, …
I haven’t tried it out on those yet.</p>

<p>It had gotten me enthusiastic enough to spin it up as a separate project: <a href="https://printthatvideo.com">PrintThatVideo.com</a>.
Subscribe over there if you want to keep track of the progress.
Contact me at peter@printthatvideo.com if you have specific questions or suggestions, like “What does this look like for XYZ videos?” or “Can you also print the video on a t-shirt?”.</p>




</div></div>
  </body>
</html>
