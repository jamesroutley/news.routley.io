<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://simonwillison.net/2024/Nov/20/foursquare-open-source-places/">Original</a>
    <h1>Foursquare Open Source Places: A new foundational dataset</h1>
    
    <div id="readability-page-1" class="page"><div>



<p><strong><a href="https://location.foursquare.com/resources/blog/products/foursquare-open-source-places-a-new-foundational-dataset-for-the-geospatial-community/">Foursquare Open Source Places: A new foundational dataset for the geospatial community</a></strong> (<a href="https://waxy.org/2024/11/foursquare-open-sources-its-places-database/" title="Andy Baio">via</a>) I did not expect this!</p>
<blockquote>
<p>[...] we are announcing today the general availability of a foundational open data set, Foursquare Open Source Places (&#34;FSQ OS Places&#34;). This base layer of 100mm+ global places of interest (&#34;POI&#34;) includes 22 core attributes (see schema <a href="https://docs.foursquare.com/data-products/docs/places-os-data-schema">here</a>) that will be updated monthly and available for commercial use under the Apache 2.0 license framework.</p>
</blockquote>
<p>The data is available <a href="https://docs.foursquare.com/data-products/docs/access-fsq-os-places">as Parquet files</a> hosted on Amazon S3.</p>
<p>Here&#39;s how to list the available files:</p>
<pre><code>aws s3 ls s3://fsq-os-places-us-east-1/release/dt=2024-11-19/places/parquet/
</code></pre>
<p>I got back <code>places-00000.snappy.parquet</code> through <code>places-00024.snappy.parquet</code>, each file around 455MB for a total of 10.6GB of data.</p>
<p>I ran <code>duckdb</code> and then used DuckDB&#39;s ability to remotely query Parquet on S3 to explore the data a bit more without downloading it to my laptop first:</p>
<pre><code>select count(*) from &#39;s3://fsq-os-places-us-east-1/release/dt=2024-11-19/places/parquet/places-00000.snappy.parquet&#39;;
</code></pre>
<p>This got back 4,180,424 - that number is similar for each file, suggesting around 104,000,000 records total.</p>
<p>The I ran this query to retrieve 1,000 places from that first file as newline-delimited JSON:</p>
<pre><code>copy (
    select * from &#39;s3://fsq-os-places-us-east-1/release/dt=2024-11-19/places/parquet/places-00000.snappy.parquet&#39;
    limit 1000
) to &#39;/tmp/places.json&#39;;
</code></pre>
<p>Here&#39;s <a href="https://gist.github.com/simonw/53ad57ad42c7efe75e2028d975907180">that places.json file</a>, and here it is <a href="https://lite.datasette.io/?json=https://gist.github.com/simonw/53ad57ad42c7efe75e2028d975907180#/data/raw">imported into Datasette Lite</a>.</p>
<p>Finally, I got ChatGPT Code Interpreter to <a href="https://chatgpt.com/share/673d7b92-0b4c-8006-a442-c5e6c2713d9c">convert that file to GeoJSON</a> and pasted the result <a href="https://gist.github.com/simonw/1e2a170b7368932ebd3922cb5d234924">into this Gist</a>, giving me a map of those thousand places (because Gists automatically render GeoJSON):</p>
<p><img alt="A map of the world with 1000 markers on it. A marker in Columbia shows a dialog for Raisbeck, Bogota Dv, Cra 47 A 114 05 Second Floor" src="https://static.simonwillison.net/static/2024/places-geojson.jpg"/></p>



</div></div>
  </body>
</html>
