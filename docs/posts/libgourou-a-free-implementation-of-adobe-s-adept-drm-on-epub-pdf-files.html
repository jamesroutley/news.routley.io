<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://forge.soutade.fr/soutade/libgourou">Original</a>
    <h1>Libgourou: A Free Implementation of Adobe&#39;s Adept DRM on ePub/PDF Files</h1>
    
    <div id="readability-page-1" class="page"><div>
	
	<div>
		
		<div>
			
				<h2 id="user-content-introduction" dir="auto">Introduction</h2>
<p dir="auto">libgourou is a free implementation of Adobe&#39;s ADEPT protocol used to add DRM on ePub/PDF files. It overcome the lacks of Adobe support for Linux platforms.</p>
<h2 id="user-content-architecture" dir="auto">Architecture</h2>
<p dir="auto">Like RMSDK, libgourou has a client/server scheme. All platform specific functions (crypto, network...) has to be implemented in a client class (that derives from DRMProcessorClient) while server implements ADEPT protocol.
A reference implementation using cURL, OpenSSL and libzip is provided (in <em>utils</em> directory).</p>
<p dir="auto">Main fucntions to use from gourou::DRMProcessor are :</p>
<ul dir="auto">
<li>Get an ePub from an ACSM file : <em>fulfill()</em> and <em>download()</em></li>
<li>Create a new device : <em>createDRMProcessor()</em></li>
<li>Register a new device : <em>signIn()</em> and <em>activateDevice()</em></li>
<li>Remove DRM : <em>removeDRM()</em></li>
<li>Return loaned book : <em>returnLoan()</em></li>
</ul>
<p dir="auto">You can import configuration from (at least) :</p>
<ul dir="auto">
<li>Kobo device    : .adept/device.xml, .adept/devicesalt  and .adept/activation.xml</li>
<li>Bookeen device : .adobe-digital-editions/device.xml, root/devkey.bin and .adobe-digital-editions/activation.xml</li>
</ul>
<p dir="auto">Or create a new one. Be careful : there is a limited number of devices that can be created bye one account.</p>
<p dir="auto">ePub are encrypted using a shared key : one account / multiple devices, so you can create and register a device into your computer and read downloaded (and encrypted) ePub file with your eReader configured using the same AdobeID account.</p>
<p dir="auto">For those who wants to remove DRM without adept_remove, you can export your private key and import it within <a href="https://calibre-ebook.com/" rel="nofollow">Calibre</a> an its DeDRM plugin.</p>
<h2 id="user-content-dependencies" dir="auto">Dependencies</h2>
<p dir="auto">For libgourou :</p>
<p dir="auto"><em>externals</em> :</p>
<ul dir="auto">
<li>libpugixml</li>
</ul>
<p dir="auto"><em>internals</em> :</p>
<ul dir="auto">
<li>uPDFParser</li>
</ul>
<p dir="auto">For utils :</p>
<ul dir="auto">
<li>libcurl</li>
<li>OpenSSL</li>
<li>libzip</li>
<li>libpugixml</li>
</ul>
<p dir="auto">Internal libraries are automatically fetched and statically compiled during the first run.
When you update libgourou&#39;s repository, <strong>don&#39;t forget to update internal libraries</strong> with :</p>
<pre><code>make update_lib
</code></pre>
<h2 id="user-content-compilation" dir="auto">Compilation</h2>
<p dir="auto">Use <em>make</em> command</p>
<pre><code>make [CROSS=XXX] [DEBUG=(0*|1)] [STATIC_UTILS=(0*|1)] [BUILD_UTILS=(0|1*)] [BUILD_STATIC=(0*|1)] [BUILD_SHARED=(0|1*)] [all*|clean|ultraclean|build_utils|install|uninstall]
</code></pre>
<p dir="auto">CROSS can define a cross compiler prefix (ie arm-linux-gnueabihf-)</p>
<p dir="auto">DEBUG can be set to compile in DEBUG mode</p>
<p dir="auto">BUILD_UTILS to build utils or not</p>
<p dir="auto">STATIC_UTILS to build utils with static library (libgourou.a) instead of default dynamic one (libgourou.so)</p>
<p dir="auto">BUILD_STATIC build libgourou.a if 1, nothing if 0, can be combined with BUILD_SHARED</p>
<p dir="auto">BUILD_SHARED build libgourou.so if 1, nothing if 0, can be combined with BUILD_STATIC</p>
<p dir="auto">other variables are DESTDIR and PREFIX to handle destination install directory</p>
<ul dir="auto">
<li>Default value</li>
</ul>
<h2 id="user-content-utils" dir="auto">Utils</h2>
<p dir="auto">First, add libgourou.so to your LD_LIBRARY_PATH</p>
<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$PWD
</code></pre>
<p dir="auto">You can optionaly specify your .adept directory</p>
<pre><code>export ADEPT_DIR=/home/XXX
</code></pre>
<p dir="auto">Then, use utils as following :</p>
<p dir="auto">You can import configuration from your eReader or create a new one with <em>utils/adept_activate</em> :</p>
<pre><code>./utils/adept_activate -u &lt;AdobeID USERNAME&gt;
</code></pre>
<p dir="auto">Then a <em>/home//.config/adept</em> directory is created with all configuration file</p>
<p dir="auto">To download an ePub/PDF :</p>
<pre><code>./utils/acsmdownloader &lt;ACSM_FILE&gt;
</code></pre>
<p dir="auto">To export your private key (for DeDRM software) :</p>
<pre><code>./utils/acsmdownloader --export-private-key [-o adobekey_1.der]
</code></pre>
<p dir="auto">To remove ADEPT DRM :</p>
<pre><code>./utils/adept_remove &lt;encryptedFile&gt;
</code></pre>
<p dir="auto">To list loaned books :</p>
<pre><code>./utils/adept_loan_mgt [-l]
</code></pre>
<p dir="auto">To return a loaned book :</p>
<pre><code>./utils/adept_loan_mgt -r &lt;id&gt;
</code></pre>
<p dir="auto">You can get utils full options description with -h or --help switch</p>
<h2 id="user-content-docker" dir="auto">Docker</h2>
<p dir="auto">A docker image (by bcliang) is available at <a href="https://github.com/bcliang/docker-libgourou/" rel="nofollow">https://github.com/bcliang/docker-libgourou/</a></p>
<h2 id="user-content-copyright" dir="auto">Copyright</h2>
<p dir="auto">Grégory Soutadé</p>
<h2 id="user-content-license" dir="auto">License</h2>
<p dir="auto">libgourou : LGPL v3 or later</p>
<p dir="auto">utils     : BSD</p>
<h2 id="user-content-special-thanks" dir="auto">Special thanks</h2>
<ul dir="auto">
<li><em>Jens</em> for all test samples and utils testing</li>
<li><em>Milian</em> for debug &amp; code</li>
<li><em>Berwyn H</em> for all test samples, feedbacks, patches and kind donation</li>
</ul>

			
		</div>
	</div>
</div></div>
  </body>
</html>
