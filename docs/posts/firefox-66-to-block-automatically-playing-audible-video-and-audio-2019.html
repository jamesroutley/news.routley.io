<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hacks.mozilla.org/2019/02/firefox-66-to-block-automatically-playing-audible-video-and-audio/">Original</a>
    <h1>Firefox 66 to block automatically playing audible video and audio (2019)</h1>
    
    <div id="readability-page-1" class="page"><div id="content-main">
  <article role="article">
    <p>Isn’t it annoying when you click on a link or open a new browser tab and audible video or audio starts playing automatically?</p>
<p>We know that unsolicited volume can be a great source of distraction and frustration for users of the web. So we are making changes to how Firefox handles playing media with sound. We want to make sure web developers are aware of this new <em>autoplay blocking</em> feature in Firefox.</p>
<p>Starting with the release of Firefox 66 for desktop and Firefox for Android, Firefox will block audible audio and video by default. We only allow a site to play audio or video aloud via the <code>HTMLMediaElement</code> API once a web page has had user interaction to initiate the audio, such as the user clicking on a “play” button.</p>
<p>Any playback that happens before the user has interacted with a page via a mouse click, printable key press, or touch event, is deemed to be <em>autoplay</em> and will be blocked if it is potentially audible.</p>
<p>Muted autoplay is still allowed. So script can set the “muted” attribute on <code>HTMLMediaElement</code> to true, and autoplay will work.</p>
<p>We expect to roll out audible autoplay blocking enabled by default, in Firefox 66, scheduled for <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox#Firefox_channels" target="_blank" rel="noopener">general release</a> on 19 March 2019. In Firefox for Android, this will replace the existing block autoplay implementation with the same behavior we’ll be using in Firefox on desktop.</p>
<p>There are some sites on which users want audible autoplay audio and video to be allowed. When Firefox for Desktop blocks autoplay audio or video, an icon appears in the URL bar. Users can click on the icon to access the site information panel, where they can change the “Autoplay sound” permission for that site from the default setting of “Block” to “Allow”. Firefox will then allow that site to autoplay audibly. This allows users to easily curate their own whitelist of sites that they trust to autoplay audibly.</p>
<a href="https://hacks.mozilla.org/files/2019/01/doorhanger1.png" target="_blank" rel="noopener"><img decoding="async" src="https://hacks.mozilla.org/files/2019/01/doorhanger1.png" alt="" width="500" height="512"/></a>
<p>Firefox expresses a blocked <code>play()</code> call to JavaScript by rejecting the promise returned by <code>HTMLMediaElement.play()</code> with a <code>NotAllowedError</code>. All major browsers which block autoplay express a blocked play via this mechanism. In general, the advice for web authors when calling <code>HTMLMediaElement.play()</code>, is to <em>not assume</em> that calls to <code>play()</code> will always succeed, and to always handle the promise returned by <code>play()</code> being rejected.</p>
<p>If you want to avoid having your audible playback blocked, you should only play media inside a click or <a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent" target="_blank" rel="noopener">keyboard event</a> handler, or on mobile in a <a href="https://developer.mozilla.org/en-US/docs/Web/Events/touchend" target="_blank" rel="noopener">touchend event</a>. Another strategy to consider for video is to autoplay muted, and present an “unmute” button to your users. Note that muted autoplay is also currently allowed by default in all major browsers which block autoplay media.</p>
<p>We are also allowing sites to autoplay audibly if the user has previously granted them camera/microphone permission, so that sites which have explicit user permission to run WebRTC should continue to work as they do today.</p>
<p>At this time, we’re also working on blocking autoplay for <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API" target="_blank" rel="noopener">Web Audio</a> content, but have not yet finalized our implementation. We expect to ship with autoplay Web Audio content blocking enabled by default sometime in 2019. We’ll let you know!</p>
    <section>
                                
                                <p><a href="https://hacks.mozilla.org/author/cpearcemozilla-com/">More articles by Chris Pearce…</a></p>
                  </section>
  </article>
  <section>
    

  </section>
  

<section>
  <hr/>
  




</section></div></div>
  </body>
</html>
