<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://theleo.zone/posts/tidal-cycles-setup/">Original</a>
    <h1>setting up tidal cycles</h1>
    
    <div id="readability-page-1" class="page"><div>
      
<div>
  <p><a href="https://tidalcycles.org/">Tidal Cycles</a> is software that works on top of another piece of software called
<a href="https://supercollider.github.io/">SuperCollider</a>.</p>
<p>Together, you can use them to produce music using code.</p>
<p>Today I set up these tools and made my first sound with them. Setup was a bit tricky, and this post is as much for
myself to document what I did as it is for others pursuing their own setup in the future.</p>
<p>The first step is to install SuperCollider, following the install links for your platform
at <a href="https://supercollider.github.io/">supercollider.github.io</a>.</p>
<p>SuperCollider is a super cool tool in and of itself, featuring a fully formed object-oriented language with which to
generate, template, pattern and mix sounds.</p>
<p>Tidal Cycles features a completely different language, though: a domain-specific language in Haskell. In order to set up
Tidal Cycles, you don’t need to learn any of the native SuperCollider language or do any of the tutorials offered on
startup.</p>
<p>Once SuperCollider is installed, Tidal Cycles requires installation of some other dependencies. They offer good setup
instructions for each platform <a href="https://tidalcycles.org/docs/getting-started/macos_install">here</a>
(link leads to MacOS instructions, but other platforms are in the sidebar).</p>
<p>These dependencies include:</p>
<ul>
<li>SuperCollider: already installed above</li>
<li>SuperDirt: a SuperCollider sampler designed for Tidal Cycles</li>
<li>Atom Editor with Tidal Cycles plugin: optional (I uninstall it and don’t use it in the final setup, but good for
testing)</li>
<li>Haskell</li>
<li>The <code>tidal</code> Haskell package</li>
</ul>
<p>A good explanation for how these components
interact (<a href="https://tidalcycles.org/docs/getting-started/tidal_start">source</a>):</p>

<a target="_blank" href="https://theleo.zone/img/tidal.jpg">
  <figure>
      <img src="https://theleo.zone/img/tidal.jpg" alt="tidal.jpg"/>
      
      
  </figure>
</a>

<p>To test things are working:</p>
<ol>
<li>
<p>Open SuperCollider.</p>
</li>
<li>
<p>Paste in the left editor box <code>SuperDirt.start;</code>.</p>
</li>
<li>
<p>Run it by hitting Shift-Enter with your cursor on the same line. You should see output in the bottom right like:</p>
</li>
</ol>
<div><pre tabindex="0"><code data-lang="shell"><span><span>SuperDirt: listening to Tidal on port <span>57120</span></span></span></code></pre></div>
<ol start="4">
<li>
<p>Keeping SuperCollider and SuperDirt open and running, open Atom. Confirm Tidal Cycles plugin is installed (visible on
the bottom right).</p>
</li>
<li>
<p>Create a new file called <code>test.tidal</code></p>
</li>
<li>
<p>Add the line <code>d1 $ sound &#34;bd sd&#34;</code></p>
</li>
<li>
<p>Type ctrl-Enter or cmd-Enter with your cursor on the same line. A beat should play!</p>
</li>
</ol>
<p>Now this is the stock setup working. I changed mine a bit for convenience, but if you’d like to you can stop here
and proceed with actually using the software to make music :).</p>
<p>After this confirmation things were installed and working, I uninstalled Atom, as it’s not an editor I use regularly.
I’m a fan of <code>vim</code>.</p>
<p>I then went to SuperCollider and configured it to start up SuperDirt whenever it is first opened. I did this by clicking
<code>File -&gt; Open startup file</code>, pasting in the following text, and saving the startup file:</p>
<div><div>
<table><tbody><tr><td>
<pre tabindex="0"><code><span> 1
</span><span> 2
</span><span> 3
</span><span> 4
</span><span> 5
</span><span> 6
</span><span> 7
</span><span> 8
</span><span> 9
</span><span>10
</span><span>11
</span><span>12
</span><span>13
</span><span>14
</span><span>15
</span><span>16
</span><span>17
</span><span>18
</span><span>19
</span><span>20
</span><span>21
</span><span>22
</span><span>23
</span><span>24
</span><span>25
</span><span>26
</span><span>27
</span><span>28
</span><span>29
</span><span>30
</span><span>31
</span><span>32
</span><span>33
</span><span>34
</span><span>35
</span></code></pre></td>
<td>
<pre tabindex="0"><code data-lang="sh"><span><span>/*
</span></span><span><span>This is an example startup file. You can load it from your startup file
</span></span><span><span><span>(</span>to be found in Platform.userAppSupportDir +/+ <span>&#34;startup.scd&#34;</span><span>)</span>
</span></span><span><span>*/
</span></span><span><span>
</span></span><span><span><span>(</span>
</span></span><span><span>s.reboot <span>{</span> // server options are only updated on reboot
</span></span><span><span>    // configure the sound server: here you could add hardware specific options
</span></span><span><span>    // see http://doc.sccode.org/Classes/ServerOptions.html
</span></span><span><span>    s.options.numBuffers <span>=</span> <span>1024</span> * 256; // increase this <span>if</span> you need to load more samples
</span></span><span><span>    s.options.memSize <span>=</span> <span>8192</span> * 32; // increase this <span>if</span> you get <span>&#34;alloc failed&#34;</span> messages
</span></span><span><span>    s.options.numWireBufs <span>=</span> 64; // increase this <span>if</span> you get <span>&#34;exceeded number of interconnect buffers&#34;</span> messages 
</span></span><span><span>    s.options.maxNodes <span>=</span> <span>1024</span> * 32; // increase this <span>if</span> you are getting drop outs and the message <span>&#34;too many nodes&#34;</span>
</span></span><span><span>    s.options.numOutputBusChannels <span>=</span> 2; // <span>set</span> this to your hardware output channel size, <span>if</span> necessary
</span></span><span><span>    s.options.numInputBusChannels <span>=</span> 2; // <span>set</span> this to your hardware output channel size, <span>if</span> necessary
</span></span><span><span>    // boot the server and start SuperDirt
</span></span><span><span>    s.waitForBoot <span>{</span>
</span></span><span><span>        ~dirt <span>=</span> SuperDirt<span>(</span>2, s<span>)</span>; // two output channels, increase <span>if</span> you want to pan across more channels
</span></span><span><span>        ~dirt.loadSoundFiles;   // load samples <span>(</span>path containing a wildcard can be passed in<span>)</span>
</span></span><span><span>        // <span>for</span> example: ~dirt.loadSoundFiles<span>(</span><span>&#34;/Users/myUserName/Dirt/samples/*&#34;</span><span>)</span>;
</span></span><span><span>        // s.sync; // optionally: <span>wait</span> <span>for</span> samples to be <span>read</span>
</span></span><span><span>        ~dirt.start<span>(</span>57120, <span>0</span> ! 12<span>)</span>;   // start listening on port 57120, create two busses each sending audio to channel <span>0</span>
</span></span><span><span>
</span></span><span><span>        // optional, needed <span>for</span> convenient access from sclang:
</span></span><span><span>        <span>(</span>
</span></span><span><span>            ~d1 <span>=</span> ~dirt.orbits<span>[</span>0<span>]</span>; ~d2 <span>=</span> ~dirt.orbits<span>[</span>1<span>]</span>; ~d3 <span>=</span> ~dirt.orbits<span>[</span>2<span>]</span>;
</span></span><span><span>            ~d4 <span>=</span> ~dirt.orbits<span>[</span>3<span>]</span>; ~d5 <span>=</span> ~dirt.orbits<span>[</span>4<span>]</span>; ~d6 <span>=</span> ~dirt.orbits<span>[</span>5<span>]</span>;
</span></span><span><span>            ~d7 <span>=</span> ~dirt.orbits<span>[</span>6<span>]</span>; ~d8 <span>=</span> ~dirt.orbits<span>[</span>7<span>]</span>; ~d9 <span>=</span> ~dirt.orbits<span>[</span>8<span>]</span>;
</span></span><span><span>            ~d10 <span>=</span> ~dirt.orbits<span>[</span>9<span>]</span>; ~d11 <span>=</span> ~dirt.orbits<span>[</span>10<span>]</span>; ~d12 <span>=</span> ~dirt.orbits<span>[</span>11<span>]</span>;
</span></span><span><span>        <span>)</span>;
</span></span><span><span>    <span>}</span>;
</span></span><span><span>
</span></span><span><span>    s.latency <span>=</span> 0.3; // increase this <span>if</span> you get <span>&#34;late&#34;</span> messages
</span></span><span><span><span>}</span>;
</span></span><span><span><span>)</span>;
</span></span></code></pre></td></tr></tbody></table>
</div>
</div><p>I then aliased <code>sclang</code> to the installed script in my shell startup file (<code>~/.zshrc</code>). This may or may not be required
depending on your platform.</p>
<div><pre tabindex="0"><code data-lang="shell"><span><span><span>alias</span> <span>sclang</span><span>=</span><span>&#34;/Applications/SuperCollider.app/Contents/MacOS/sclang&#34;</span></span></span></code></pre></div>
<p>In order to use <code>vim</code> with Tidal Cycles, I installed <a href="https://github.com/tidalcycles/vim-tidal">vim-tidal</a>. Make sure
you run the <code>make</code> command to symlink the <code>tidalvim</code> and <code>tidal</code> scripts as recommended so that you can run <code>tidal</code>
in a terminal.</p>
<p>I then created a new <a href="https://github.com/tmuxinator/tmuxinator">tmuxinator</a> project called <code>music</code> with the following
configuration:</p>
<div><div>
<table><tbody><tr><td>
<pre tabindex="0"><code><span> 1
</span><span> 2
</span><span> 3
</span><span> 4
</span><span> 5
</span><span> 6
</span><span> 7
</span><span> 8
</span><span> 9
</span><span>10
</span><span>11
</span><span>12
</span><span>13
</span><span>14
</span></code></pre></td>
<td>
<pre tabindex="0"><code data-lang="yaml"><span><span><span># /Users/leo/.config/tmuxinator/music.yml</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>name</span>:<span> </span>music<span>
</span></span></span><span><span><span></span><span>socket_name</span>:<span> </span>music<span>
</span></span></span><span><span><span></span><span>root</span>:<span> </span>~/projects/music<span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>windows</span>:<span>
</span></span></span><span><span><span>  </span>- <span>editor</span>:<span>
</span></span></span><span><span><span>      </span><span>panes</span>:<span>
</span></span></span><span><span><span>        </span>- vim<span>
</span></span></span><span><span><span>  </span>- <span>server</span>:<span>
</span></span></span><span><span><span>      </span><span>panes</span>:<span>
</span></span></span><span><span><span>        </span>- sclang<span>
</span></span></span><span><span><span>        </span>- tidal<span>
</span></span></span></code></pre></td></tr></tbody></table>
</div>
</div><p>This allows me to run <code>tmuxinator start music</code> and 2 windows open up:</p>
<ul>
<li>a main window for vim</li>
<li>a hidden split window running <code>sclang</code>, a “headless” version of SuperCollider, and <code>tidal</code>, the vim-tidal plugin
script that starts the Haskell interpreter including the tidal package</li>
</ul>
<p>Finally, by adding the following configuration line to my <code>~/.vimrc</code>, I configure vim-tidal to send commands to the
correct tmux socket and window + pane (the <code>tidal</code> pane):</p>
<div><pre tabindex="0"><code data-lang="vim"><span><span><span>&#34; vim-tidal combined with tmuxinator music</span><span>
</span></span></span><span><span><span></span><span>let</span> g:tidal_default_config = {<span>&#34;socket_name&#34;</span>: <span>&#34;music&#34;</span>, <span>&#34;target_pane&#34;</span>: <span>&#34;music:2.2&#34;</span>}</span></span></code></pre></div>
<p>Now, I can fire up <code>vim</code> configured with SuperCollider and Tidal Cycles running with <code>tmuxinator start music</code>. When I’m
done, I save my files and run <code>tmuxinator stop music</code>, and everything shuts down.</p>

</div>

    </div></div>
  </body>
</html>
