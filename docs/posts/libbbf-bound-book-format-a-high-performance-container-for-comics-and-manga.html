<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ef1500/libbbf">Original</a>
    <h1>Libbbf: Bound Book Format, A high-performance container for comics and manga</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d04f94e7339a924438e7cf32ba69de2517901e552ed1a3db1bc7f45871cd3e6c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f466f726d61742d424246312d626c75652e737667"><img src="https://camo.githubusercontent.com/d04f94e7339a924438e7cf32ba69de2517901e552ed1a3db1bc7f45871cd3e6c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f466f726d61742d424246312d626c75652e737667" alt="alt text" data-canonical-src="https://img.shields.io/badge/Format-BBF1-blue.svg"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/784362b26e4b3546254f1893e778ba64616e362bd6ac791991d2c9e880a3a64e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d677265656e2e737667"><img src="https://camo.githubusercontent.com/784362b26e4b3546254f1893e778ba64616e362bd6ac791991d2c9e880a3a64e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d677265656e2e737667" alt="alt text" data-canonical-src="https://img.shields.io/badge/License-MIT-green.svg"/></a></p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p dir="auto"><strong>Official Source Notice: Please only download releases from this repository (ef1500/libbbf). External mirrors or forks may contain malware.</strong></p>
</div>
<p dir="auto">Bound Book Format (.bbf) is a high-performance binary container designed specifically for digital comic books and manga. Unlike CBR/CBZ, BBF is built for DirectSotrage/mmap, easy integrity checks, and mixed-codec containerization.</p>
<hr/>


<ul dir="auto">
<li>C++17 compliant compiler (GCC/Clang/MSVC), and optionally CMake</li>
<li><a href="https://github.com/Cyan4973/xxHash">xxHash</a> library</li>
</ul>


<div dir="auto" data-snippet-clipboard-copy-content="cmake -B build
cmake --build build
sudo cmake --install build"><pre>cmake -B build
cmake --build build
sudo cmake --install build</pre></div>

<p dir="auto">Linux</p>
<div dir="auto" data-snippet-clipboard-copy-content="g++ -std=c++17 bbfenc.cpp libbbf.cpp xxhash.c -o bbfmux -pthread"><pre>g++ -std=c++17 bbfenc.cpp libbbf.cpp xxhash.c -o bbfmux -pthread</pre></div>
<p dir="auto">Windows</p>
<div dir="auto" data-snippet-clipboard-copy-content="g++ -std=c++17 bbfenc.cpp libbbf.cpp xxhash.c -o bbfmux -municode"><pre>g++ -std=c++17 bbfenc.cpp libbbf.cpp xxhash.c -o bbfmux -municode</pre></div>
<p dir="auto">Alternatively, if you need python support, use <a href="https://github.com/ef1500/libbbf-python">libbbf-python</a>.</p>
<hr/>

<p dir="auto">BBF is designed as a Footer-indexed binary format. This allows for rapid append-only creation and immediate random access to any page without scanning the entire file.</p>

<p dir="auto">The <code>bbfmux</code> reference implementation utilizes <strong>Memory Mapping (mmap/MapViewOfFile)</strong>. Instead of reading file data into intermediate buffers, the tool maps the container directly into the process address space. This allows the CPU to access image data at the speed of your NVMe drive&#39;s hardware limit.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">High-Speed Parallel Verification</h3><a id="user-content-high-speed-parallel-verification" aria-label="Permalink: High-Speed Parallel Verification" href="#high-speed-parallel-verification"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Integrity checks utilize <strong>Parallel XXH3</strong>. On multi-core systems, the verifier splits the asset table into chunks and validates multiple pages simultaneously. This makes BBF verification up to <strong>10x faster</strong> than ZIP/RAR CRC checks.</p>

<p dir="auto">Every asset in a BBF file starts on a <strong>4096-byte boundary</strong>. This alignment is critical for modern hardware, allowing for DirectStorage transfers directly from disk to GPU memory, bypassing CPU bottlenecks entirely.</p>
<p dir="auto">Note: DirectStorage isn&#39;t avaliable for images yet (as far as I know), but I&#39;ve made sure to accomodate such a thing in the future with this format.</p>

<ol dir="auto">
<li><strong>Header (13 bytes)</strong>: Magic <code>BBF1</code>, versioning, and initial padding.</li>
<li><strong>Page Data</strong>: The raw image payloads (AVIF, PNG, etc.), each padded to <strong>4096-byte boundaries</strong>.</li>
<li><strong>String Pool</strong>: A deduplicated pool of null-terminated strings for metadata and section titles.</li>
<li><strong>Asset Table</strong>: A registry of physical data blobs with XXH3 hashes.</li>
<li><strong>Page Table</strong>: The logical reading order, mapping logical pages to assets.</li>
<li><strong>Section Table</strong>: Markers for chapters, volumes, or gallery sections.</li>
<li><strong>Metadata Table</strong>: Key-Value pairs for archival data (Author, Scanlation team, etc.).</li>
<li><strong>Footer (76 bytes)</strong>: Table offsets and a final integrity hash.</li>
</ol>
<p dir="auto">NOTE: <code>libbbf.h</code> includes a <code>flags</code> field, as well as extra padding for each asset entry. This is so that in the future <code>libbbf</code> can accomodate future technical advancements in both readers and image storage. I.E. If images support DirectStorage in the future, then BBF will be able to use it.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Feature Comparison: Digital Comic &amp; Archival Formats</h3><a id="user-content-feature-comparison-digital-comic--archival-formats" aria-label="Permalink: Feature Comparison: Digital Comic &amp; Archival Formats" href="#feature-comparison-digital-comic--archival-formats"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Feature</th>
<th><strong>BBF</strong></th>
<th>CBZ (Zip)</th>
<th>CBR (Rar)</th>
<th>PDF</th>
<th>EPUB</th>
<th>Folder</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Random Page Access</strong></td>
<td>✅</td>
<td>✅[8]</td>
<td>✅[8]</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Native Data Deduplication</strong></td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [1]</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Per-Asset Integrity (XXH3)</strong></td>
<td>✅</td>
<td><g-emoji alias="warning">⚠️</g-emoji>[9]</td>
<td><g-emoji alias="warning">⚠️</g-emoji>[9]</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><strong>4KB Sector Alignment</strong></td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Native Sections/Chapters</strong></td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Arbitrary Metadata (UTF-8)</strong></td>
<td>✅</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [2]</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Mixed-Codec Support</strong></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>DirectStorage/mmap Ready</strong></td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [3]</td>
</tr>
<tr>
<td><strong>Low Parser Complexity</strong></td>
<td>✅</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [4]</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Bit-Rot Detection</strong></td>
<td>✅</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [5]</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [5]</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Streaming-Friendly Index</strong></td>
<td><g-emoji alias="warning">⚠️</g-emoji> [6]</td>
<td><g-emoji alias="warning">⚠️</g-emoji> [6]</td>
<td>❌</td>
<td>✅ [7]</td>
<td><g-emoji alias="warning">⚠️</g-emoji></td>
<td>❌</td>
</tr>
<tr>
<td><strong>Wide Software Support</strong></td>
<td>❌</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

[1] - PDF supports XObjects to reuse resources, but lacks native content-hash deduplication; identical images must be manually referenced.</article></div></div>
  </body>
</html>
