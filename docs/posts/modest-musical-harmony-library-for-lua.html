<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/esbudylin/modest">Original</a>
    <h1>Show HN: Modest ‚Äì musical harmony library for Lua</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Musical harmony library for Lua.</p>

<ul dir="auto">
<li><a href="#orgea20c24">Chord Object</a>. Supports a wide range of chords, from simple major/minor to complex jazz chords. Provides a flexible string parsing, can identify a chord based on its notes. Can transpose chords and retrieve individual notes.</li>
<li><a href="#org17140ae">Note Object</a>. Handles alterations (sharps, flats, double accidentals), octaves, pitch classes.</li>
<li><a href="#orge7f9854">Interval Object</a>. Supports simple and compound intervals. Can identify the interval between two notes and represent it in semitones.</li>
</ul>

<p dir="auto">The easiest way to install Modest is via <a href="https://luarocks.org/" rel="nofollow">LuaRocks</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="luarocks install modest-harmony"><pre>luarocks install modest-harmony</pre></div>

<p dir="auto">If you want to avoid LuaRocks, you should consider two things about the project. First, Modest depends on <a href="https://www.inf.puc-rio.br/~roberto/lpeg/" rel="nofollow">LPeg</a>, a library partially written in C, which you will need to install separately. Second, the project is written in Fennel, a language that transpiles to Lua. To use Modest in your Lua code, you can either embed Fennel compiler in your project or perform ahead-of-time compilation of the Fennel files. I recommend the latter option. To do so, <a href="https://fennel-lang.org/setup#downloading-fennel" rel="nofollow">install Fennel</a> and run the following command from the project&#39;s root directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fennel --require-as-include --skip-include re,lpeg --compile modest/init.fnl &gt; modest.lua"><pre>fennel --require-as-include --skip-include re,lpeg --compile modest/init.fnl <span>&gt;</span> modest.lua</pre></div>
<p dir="auto">After running the command, move the resulting modest.lua file into your project and require it as you would any other Lua module.</p>


<ul dir="auto">
<li>The library supports both Lua 5.4 and LuaJIT. It should also be compatible with older Lua 5.x versions.</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">The library does note register any global values. Every example below assumes you have properly required it like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="local modest = require &#39;modest&#39;

local Chord, Interval, Note = modest.Chord, modest.Interval, modest.Note"><pre><span>local</span> <span>modest</span> <span>=</span> <span>require</span> <span><span>&#39;</span>modest<span>&#39;</span></span>

<span>local</span> <span>Chord</span>, <span>Interval</span>, <span>Note</span> <span>=</span> <span>modest</span>.<span>Chord</span>, <span>modest</span>.<span>Interval</span>, <span>modest</span>.<span>Note</span></pre></div>
</li>
</ul>

<ul dir="auto">
<li>Methods in the library do not mutate objects; instead, they return new instances. However, as these instances are regular Lua tables, they can still be modified after creation. It is strongly advised <strong>not</strong> to mutate them, as this could lead to unexpected behavior.</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">Each object provides a &#39;fromstring&#39; method, allowing object construction through string parsing. While Interval and Note requires strings in a strict format, Chord can parse almost any notation that may be encountered in musical scores or chord charts.</p>
</li>
<li>
<p dir="auto">Any method that requires one of the library objects as an argument can also accept a string, which will be parsed using the appropriate &#39;fromstring&#39; method. For example, both of the following expressions are valid.</p>
<div dir="auto" data-snippet-clipboard-copy-content="note = Note.fromstring(&#34;C5&#34;)
note:transpose(&#34;P5&#34;)
note:transpose(Interval.fromstring(&#34;P5&#34;))"><pre><span>note</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>C5<span>&#34;</span></span>)
<span>note</span>:<span>transpose</span>(<span><span>&#34;</span>P5<span>&#34;</span></span>)
<span>note</span>:<span>transpose</span>(<span>Interval</span>.<span>fromstring</span>(<span><span>&#34;</span>P5<span>&#34;</span></span>))</pre></div>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Representation of accidentals</h3><a id="user-content-representation-of-accidentals" aria-label="Permalink: Representation of accidentals" href="#representation-of-accidentals"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>The library supports two types of accidental representation: special Unicode symbols (&#39;‚ôØ&#39; for sharp, &#39;‚ô≠&#39; for flat, &#39;ùÑ™&#39; for double sharp, &#39;ùÑ´&#39; for double flat) and ASCII characters (&#39;#&#39;, &#39;b&#39;, &#39;x&#39;, &#39;bb&#39;, respectively).</li>
<li>The parsers of the Note and Chord objects can handle both types. When transforming these objects into strings, different methods are available for each representation (see below).</li>
</ul>

<ul dir="auto">
<li>Each object implements &#39;__tostring&#39; metamethod. In Lua, this metamethod is automatically called when an object needs to be represented as a string, such as during calls to &#39;print&#39; or &#39;tostring&#39; functions. The implementation uses Unicode symbols for accidentals.</li>
</ul>

<ul dir="auto">
<li>Modest is named after Modest Petrovich Mussorgsky.</li>
</ul>

<ol dir="auto">
<li><a href="#orgea20c24">Chord</a>
<ol dir="auto">
<li><a href="#orgeb03159">fromstring(string) -&gt; Chord</a></li>
<li><a href="#org099fac6">identify(&amp; notes) -&gt; Chord</a></li>
<li><a href="#orgaa64c5f">transpose(self, interval) -&gt; Chord</a></li>
<li><a href="#org2c06e96">transpose_down(self, interval) -&gt; Chord</a></li>
<li><a href="#org97ced0f">notes(self, octave=nil) -&gt; [Note]</a></li>
<li><a href="#org486bfd6">numeric(self) -&gt; [int]</a></li>
<li><a href="#org33dd510">tostring(self) -&gt; string</a></li>
<li><a href="#org3baafe0">toascii(self) -&gt; string</a></li>
</ol>
</li>
<li><a href="#orge7f9854">Interval</a>
<ol dir="auto">
<li><a href="#orgf3be097">fromstring(string) -&gt; Interval</a></li>
<li><a href="#org191ada3">new(size, quality=&#34;perfect&#34;) -&gt; Note</a></li>
<li><a href="#org94d2910">identify(note1, note2) -&gt; Interval</a></li>
<li><a href="#orgdb8adb6">semitones(self) -&gt; int</a></li>
<li><a href="#org9aa17df">tostring(self) -&gt; string</a></li>
</ol>
</li>
<li><a href="#org17140ae">Note</a>
<ol dir="auto">
<li><a href="#org94eb987">fromstring(string) -&gt; Note</a></li>
<li><a href="#org384a2e6">new(tone, accidental=0, octave=nil) -&gt; Note</a></li>
<li><a href="#org6863224">transpose(self, interval) -&gt; Note</a></li>
<li><a href="#orgae236e8">transpose_down(self, interval) -&gt; Note</a></li>
<li><a href="#org7fdb95d">pitch_class(self) -&gt; int</a></li>
<li><a href="#org129123f">tostring(self) -&gt; string</a></li>
<li><a href="#orgf65613a">toascii(self) -&gt; string</a></li>
</ol>
</li>
</ol>



<div dir="auto"><h4 tabindex="-1" dir="auto">fromstring(string) -&gt; Chord</h4><a id="user-content-fromstringstring---chord" aria-label="Permalink: fromstring(string) -&gt; Chord" href="#fromstringstring---chord"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Parses a string and returns a Chord object. Supports most of the chord types (see table below). Aims to be as flexible as possible when parsing a chord suffix, allowing various synonymous notations.</li>
</ul>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Supported chord type</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic triads</td>
<td>C, Cm</td>
</tr>
<tr>
<td>Augmented chords</td>
<td>Caug</td>
</tr>
<tr>
<td>Diminished and half-diminished</td>
<td>Cdim, C‚åÄ7, Cdim7</td>
</tr>
<tr>
<td>Suspended chords</td>
<td>Csus2, C9sus4</td>
</tr>
<tr>
<td>Seventh chords</td>
<td>C7, CM7, CminMaj7</td>
</tr>
<tr>
<td>Extended chords up to the 13th</td>
<td>C9, C13</td>
</tr>
<tr>
<td>Added sixth and 6/9 chords</td>
<td>C6, Cm(‚ô≠6), C6/9</td>
</tr>
<tr>
<td>Added tones</td>
<td>Cadd2, Cadd9, C(‚ôØ11)</td>
</tr>
<tr>
<td>Altered chords</td>
<td>C7‚ôØ5, C7‚ôØ5‚ô≠9</td>
</tr>
<tr>
<td>Power chords</td>
<td>C5</td>
</tr>
<tr>
<td>Slash chords</td>
<td>C/G</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<ul dir="auto">
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CM7 = Chord.fromstring(&#34;Cmaj7&#34;)"><pre><span>CM7</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>Cmaj7<span>&#34;</span></span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">identify(&amp; notes) -&gt; Chord</h4><a id="user-content-identify-notes---chord" aria-label="Permalink: identify(&amp; notes) -&gt; Chord" href="#identify-notes---chord"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Identifies a chord based on the given notes. Accepts a variable number of string representations or Note objects. Assumes the first argument for a chord root. If the octaves of the given notes are not specified, assumes they go in ascending order. Supports the same types of chords as the &#39;fromstring&#39; method, except for slash chords. Does not support inversions. Raises an error if the notes do not form a recognizable chord.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Cadd9 = Chord.identify(&#34;C&#34;, &#34;E&#34;, &#34;G&#34;, &#34;D&#34;)

-- Can also accept note objects
Daug = Chord.identify(&#34;D&#34;, &#34;F#&#34;, Note.fromstring(&#34;A#&#34;))"><pre><span>Cadd9</span> <span>=</span> <span>Chord</span>.<span>identify</span>(<span><span>&#34;</span>C<span>&#34;</span></span>, <span><span>&#34;</span>E<span>&#34;</span></span>, <span><span>&#34;</span>G<span>&#34;</span></span>, <span><span>&#34;</span>D<span>&#34;</span></span>)

<span><span>--</span> Can also accept note objects</span>
<span>Daug</span> <span>=</span> <span>Chord</span>.<span>identify</span>(<span><span>&#34;</span>D<span>&#34;</span></span>, <span><span>&#34;</span>F#<span>&#34;</span></span>, <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>A#<span>&#34;</span></span>))</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">transpose(self, interval) -&gt; Chord</h4><a id="user-content-transposeself-interval---chord" aria-label="Permalink: transpose(self, interval) -&gt; Chord" href="#transposeself-interval---chord"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Returns a new Chord transposed by the given interval.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Eb6_9 = Chord.fromstring(&#34;C6/9&#34;):transpose(&#34;m3&#34;)"><pre><span>Eb6_9</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>C6/9<span>&#34;</span></span>):<span>transpose</span>(<span><span>&#34;</span>m3<span>&#34;</span></span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">transpose_down(self, interval) -&gt; Chord</h4><a id="user-content-transpose_downself-interval---chord" aria-label="Permalink: transpose_down(self, interval) -&gt; Chord" href="#transpose_downself-interval---chord"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Similar to transpose, returns a chord transposed down by the given interval.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Db9 = Chord.fromstring(&#34;Ab9&#34;):transpose_down(&#34;P5&#34;)"><pre><span>Db9</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>Ab9<span>&#34;</span></span>):<span>transpose_down</span>(<span><span>&#34;</span>P5<span>&#34;</span></span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">notes(self, octave=nil) -&gt; [Note]</h4><a id="user-content-notesself-octavenil---note" aria-label="Permalink: notes(self, octave=nil) -&gt; [Note]" href="#notesself-octavenil---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Returns the notes that make up the chord. Optionally, specify the octave of the root note.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="notes = Chord.fromstring(&#34;F#&#34;):notes(4)
for _, note in ipairs(notes) do print(note) end"><pre><span>notes</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>F#<span>&#34;</span></span>):<span>notes</span>(<span>4</span>)
<span>for</span> <span>_</span>, <span>note</span> <span>in</span> <span>ipairs</span>(<span>notes</span>) <span>do</span> <span>print</span>(<span>note</span>) <span>end</span></pre></div>

</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Converts the chord into a numeric representation, with each note represented as the number of semitones from the C of the chord&#39;s root octave.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="numeric = Chord.fromstring(&#34;C/Bb&#34;):numeric()
print(table.concat(numeric, &#34;, &#34;))"><pre><span>numeric</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>C/Bb<span>&#34;</span></span>):<span>numeric</span>()
<span>print</span>(<span>table.concat</span>(<span>numeric</span>, <span><span>&#34;</span>, <span>&#34;</span></span>))</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="numeric = Chord.fromstring(&#34;G9&#34;):numeric()
print(table.concat(numeric, &#34;, &#34;))"><pre><span>numeric</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>G9<span>&#34;</span></span>):<span>numeric</span>()
<span>print</span>(<span>table.concat</span>(<span>numeric</span>, <span><span>&#34;</span>, <span>&#34;</span></span>))</pre></div>

</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Converts the chord into a string. Accidentals will be represented with special Unicode characters.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="chord = Chord.fromstring(&#34;C#maj7&#34;)
assert(chord:tostring() == &#34;C‚ôØM7&#34;)"><pre><span>chord</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>C#maj7<span>&#34;</span></span>)
<span>assert</span>(<span>chord</span>:<span>tostring</span>() <span>==</span> <span><span>&#34;</span>C‚ôØM7<span>&#34;</span></span>)</pre></div>
</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Returns the chord as a string with ASCII representations for accidentals.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="chord = Chord.fromstring(&#34;G7#11&#34;)
assert(chord:toascii() == &#34;G7(#11)&#34;)"><pre><span>chord</span> <span>=</span> <span>Chord</span>.<span>fromstring</span>(<span><span>&#34;</span>G7#11<span>&#34;</span></span>)
<span>assert</span>(<span>chord</span>:<span>toascii</span>() <span>==</span> <span><span>&#34;</span>G7(#11)<span>&#34;</span></span>)</pre></div>
</li>
</ul>



<div dir="auto"><h4 tabindex="-1" dir="auto">fromstring(string) -&gt; Interval</h4><a id="user-content-fromstringstring---interval" aria-label="Permalink: fromstring(string) -&gt; Interval" href="#fromstringstring---interval"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Parses a string and returns an Interval object. Examples:</p>
<ul dir="auto">
<li>&#34;m3&#34; = minor third</li>
<li>&#34;P4&#34; = perfect fourth</li>
<li>&#34;A5&#34; = augmented fifth</li>
<li>&#34;d7&#34; = diminished seventh</li>
<li>&#34;M6&#34; = major sixth.</li>
</ul>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="P4 = Interval.fromstring(&#34;P4&#34;)"><pre><span>P4</span> <span>=</span> <span>Interval</span>.<span>fromstring</span>(<span><span>&#34;</span>P4<span>&#34;</span></span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">new(size, quality=&#34;perfect&#34;) -&gt; Note</h4><a id="user-content-newsize-qualityperfect---note" aria-label="Permalink: new(size, quality=&#34;perfect&#34;) -&gt; Note" href="#newsize-qualityperfect---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Creates a new Interval object. Size should be an integer, and quality should be a string (valid options are &#34;dim&#34;, &#34;aug&#34;, &#34;min&#34;, &#34;maj&#34;, &#34;perfect&#34;). The method raises an error if the interval is invalid.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="A3 = Interval.new(3, &#34;aug&#34;)
M13 = Interval.new(13, &#34;maj&#34;)
P5 = Interval.new(5)"><pre><span>A3</span> <span>=</span> <span>Interval</span>.<span>new</span>(<span>3</span>, <span><span>&#34;</span>aug<span>&#34;</span></span>)
<span>M13</span> <span>=</span> <span>Interval</span>.<span>new</span>(<span>13</span>, <span><span>&#34;</span>maj<span>&#34;</span></span>)
<span>P5</span> <span>=</span> <span>Interval</span>.<span>new</span>(<span>5</span>)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="_, err = pcall(function() Interval.new(5, &#34;min&#34;) end)
print(err)"><pre><span>_</span>, <span>err</span> <span>=</span> <span>pcall</span>(<span>function</span>() <span>Interval</span>.<span>new</span>(<span>5</span>, <span><span>&#34;</span>min<span>&#34;</span></span>) <span>end</span>)
<span>print</span>(<span>err</span>)</pre></div>
<div data-snippet-clipboard-copy-content="./modest.lua:287: Invalid combination of size and quality"><pre><code>./modest.lua:287: Invalid combination of size and quality
</code></pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">identify(note1, note2) -&gt; Interval</h4><a id="user-content-identifynote1-note2---interval" aria-label="Permalink: identify(note1, note2) -&gt; Interval" href="#identifynote1-note2---interval"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Identifies the interval between two notes.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="P4 = Interval.identify(&#34;C&#34;, &#34;F&#34;)"><pre><span>P4</span> <span>=</span> <span>Interval</span>.<span>identify</span>(<span><span>&#34;</span>C<span>&#34;</span></span>, <span><span>&#34;</span>F<span>&#34;</span></span>)</pre></div>
</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Returns the number of semitones in the interval.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="semitones = Interval.fromstring(&#34;M3&#34;):semitones()
assert(semitones == 4)"><pre><span>semitones</span> <span>=</span> <span>Interval</span>.<span>fromstring</span>(<span><span>&#34;</span>M3<span>&#34;</span></span>):<span>semitones</span>()
<span>assert</span>(<span>semitones</span> <span>==</span> <span>4</span>)</pre></div>
</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Converts the interval into a string representation.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="m6 = Interval.new(6, &#34;min&#34;):tostring()"><pre><span>m6</span> <span>=</span> <span>Interval</span>.<span>new</span>(<span>6</span>, <span><span>&#34;</span>min<span>&#34;</span></span>):<span>tostring</span>()</pre></div>
</li>
</ul>



<div dir="auto"><h4 tabindex="-1" dir="auto">fromstring(string) -&gt; Note</h4><a id="user-content-fromstringstring---note" aria-label="Permalink: fromstring(string) -&gt; Note" href="#fromstringstring---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Parses a string and returns a Note object.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="C_sharp_4 = Note.fromstring(&#34;C#4&#34;)
E = Note.fromstring(&#34;E&#34;) -- the octave is optional"><pre><span>C_sharp_4</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>C#4<span>&#34;</span></span>)
<span>E</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>E<span>&#34;</span></span>) <span><span>--</span> the octave is optional</span></pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">new(tone, accidental=0, octave=nil) -&gt; Note</h4><a id="user-content-newtone-accidental0-octavenil---note" aria-label="Permalink: new(tone, accidental=0, octave=nil) -&gt; Note" href="#newtone-accidental0-octavenil---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Creates a new Note object. The tone should be a capital letter (e.g., &#34;C&#34;). The accidental should be a numeric value (e.g., -1 for flat, 1 for sharp). The octave is optional.</p>
</li>
<li>
<p dir="auto">Examples:</p>
<div dir="auto" data-snippet-clipboard-copy-content="D_sharp_5 = Note.new(&#34;D&#34;, 1, 5)
B_double_flat = Note.new(&#34;B&#34;, -2)"><pre><span>D_sharp_5</span> <span>=</span> <span>Note</span>.<span>new</span>(<span><span>&#34;</span>D<span>&#34;</span></span>, <span>1</span>, <span>5</span>)
<span>B_double_flat</span> <span>=</span> <span>Note</span>.<span>new</span>(<span><span>&#34;</span>B<span>&#34;</span></span>, <span>-</span><span>2</span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">transpose(self, interval) -&gt; Note</h4><a id="user-content-transposeself-interval---note" aria-label="Permalink: transpose(self, interval) -&gt; Note" href="#transposeself-interval---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Returns a new note transposed by the given interval.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="F4 = Note.fromstring(&#34;C4&#34;):transpose(&#34;P4&#34;)"><pre><span>F4</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>C4<span>&#34;</span></span>):<span>transpose</span>(<span><span>&#34;</span>P4<span>&#34;</span></span>)</pre></div>
</li>
</ul>

<div dir="auto"><h4 tabindex="-1" dir="auto">transpose_down(self, interval) -&gt; Note</h4><a id="user-content-transpose_downself-interval---note" aria-label="Permalink: transpose_down(self, interval) -&gt; Note" href="#transpose_downself-interval---note"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Returns a new note transposed down by the given interval.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="A3 = Note.fromstring(&#34;C4&#34;):transpose_down(&#34;m3&#34;)"><pre><span>A3</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>C4<span>&#34;</span></span>):<span>transpose_down</span>(<span><span>&#34;</span>m3<span>&#34;</span></span>)</pre></div>
</li>
</ul>


<ul dir="auto">
<li>
<p dir="auto">Returns a number from 0 to 11 representing the pitch class of the note (e.g., C=0, C‚ôØ/D‚ô≠=1, ‚Ä¶, B=11).</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pitch_class = Note.fromstring(&#34;G&#34;):pitch_class()
assert(pitch_class == 7)"><pre><span>pitch_class</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>G<span>&#34;</span></span>):<span>pitch_class</span>()
<span>assert</span>(<span>pitch_class</span> <span>==</span> <span>7</span>)</pre></div>
</li>
</ul>




<ul dir="auto">
<li>
<p dir="auto">Works similarly to the Chord methods of the same name.</p>
</li>
<li>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="note = Note.fromstring(&#34;D#4&#34;)

assert(note:tostring() == &#34;D‚ôØ4&#34;)
assert(note:toascii() == &#34;D#4&#34;)"><pre><span>note</span> <span>=</span> <span>Note</span>.<span>fromstring</span>(<span><span>&#34;</span>D#4<span>&#34;</span></span>)

<span>assert</span>(<span>note</span>:<span>tostring</span>() <span>==</span> <span><span>&#34;</span>D‚ôØ4<span>&#34;</span></span>)
<span>assert</span>(<span>note</span>:<span>toascii</span>() <span>==</span> <span><span>&#34;</span>D#4<span>&#34;</span></span>)</pre></div>
</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Similar libraries in other languages</h2><a id="user-content-similar-libraries-in-other-languages" aria-label="Permalink: Similar libraries in other languages" href="#similar-libraries-in-other-languages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/bspaans/python-mingus">Mingus</a> for Python,</li>
<li><a href="https://github.com/jsrmath/sharp11">Sharp11</a> for JavaScript,</li>
<li><a href="https://github.com/saebekassebil/teoria">Teoria</a> for JavaScript,</li>
<li><a href="https://github.com/tonaljs/tonal">Tonal</a> for JavaScript.</li>
</ul>
</article></div></div>
  </body>
</html>
