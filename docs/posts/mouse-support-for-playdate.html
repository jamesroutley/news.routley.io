<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.gingerbeardman.com/2024/05/11/mouse-support-for-playdate/">Original</a>
    <h1>Mouse Support for Playdate</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
          

          

          

          <p>Since some of my first prototypes with <em>Playdate</em> I’ve wanted there to be a way to interact with the device using a mouse. Well, today is that day!</p>

<iframe width="720" height="480" src="https://www.youtube.com/embed/PF4emlHhYCM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" loading="lazy"></iframe>

<p>No doubt you have some questions? How are you doing this? What’s the weather like? etc.</p>

<hr/>

<h2 id="how">How?</h2>

<p>A custom <a href="https://www.hammerspoon.org">Hammerspoon</a> script minitors mouse coordinates and sends them to the <em>Playdate</em> over serial connection. The game receives those messages through the recently added API <code>playdate.serialMessageReceived(message)</code>, parses them, and acts accordingly.</p>

<p>Currently the script sends messages such as:</p>

<div><div><pre><code>msg mouse on
msg 0,0
msg -19,84
msg mouse off
</code></pre></div></div>

<p>I use those to trigger on screen notifications, reset the game state, and move the cursor.</p>

<p>Note: use of serial means you can’t have the <em>Playdate</em> <em>Simulator</em> or <em>Mirror</em> open when trying this. If you invoke the script and it can’t open the serial connection for any reason it will sound an error beep.</p>

<hr/>

<h2 id="why">Why?</h2>

<p>Originally, back in 2020, I wanted to be able to position items in the in-game level editor of <a href="https://blog.gingerbeardman.com/tag/dailydriver/">my game <em>Daily Driver</em></a> more directly, using a mouse rather than typing co-ordinates into a file. Then I forgot about it for a while. Then in <a href="https://sdk.play.date/changelog/#_2_4_0"><em>Playdate <em>SDK</em> 2.4.0</em></a> (March 1, 2024) a new API was added that made me wonder if it was now possible.</p>

<p>I knew the <a href="https://itch.io/jam/uncrankdjam">Uncrank’d Game Jam</a> was in progress and was thinking about what to do, and then the mouse control idea came back to me. I first put together the bare bones of an app that drew a dot to the screen, mirrored both horizontally and vertically. Then I set about proving I could forward mouse events, which resulted in a <a href="https://github.com/gingerbeardman/playdate-mouse-support/blob/main/mouse/mouse_to_playdate.lua">small Hammerspoon script</a>.</p>

<p>After that, I built out the drawing app and that’s how <a href="https://gingerbeardman.itch.io/rorschach">Rorschach</a> came to be. It was originally built to showcase the mouse control, but has since evolved into a lovely little toy of its own. I thought a drawing app would be an easy-to-understand visual showcase for this innovation. But, really, the possibilities for its use are endless.</p>

<p>Developers can use it to speed up and simplify development, add finer control to their in-game level editors, and generally make their lives easier. There’s nothing stopping you giving users access to it in a game.</p>

<hr/>

<h2 id="installation">Installation</h2>

<ol>
  <li>Make sure you’re running <a href="https://gingerbeardman.itch.io/rorschach">Rorschach</a> or <a href="https://github.com/gingerbeardman/playdate-mouse-support/releases/tag/240511">Mouse Demo</a> on your device</li>
  <li>Attach your <em>Playdate</em> over USB and unlock the device</li>
  <li>Install <a href="https://www.hammerspoon.org/">Hammerspoon</a> automation tool for <em>macOS</em>
</li>
  <li>Install <a href="https://github.com/gingerbeardman/playdate-mouse-support/blob/main/mouse/mouse_to_playdate.lua"><code>mouse_to_playdate.lua</code></a> (instructions in the file)</li>
  <li>Press the hotkey (defaults to <code>F13</code>)</li>
  <li>The guide window (virtual trackpad?) appears so you can gauge <em>Playdate</em> screen size</li>
  <li>Move your mouse pointer and watch the drawing appear!</li>
</ol>

<p>I’ve tested this on a MBP running Sonoma with a mouse and a trackpad. There’s very little lag, it’s really quite usable. The video has substantial lag as I was capturing through QuickTime and my phone camera. Anyway, it’s super cool!</p>

<hr/>

<h2 id="demos">Demos</h2>

<ul>
  <li>Rorschach drawing app is at: <a href="https://gingerbeardman.itch.io/rorschach">https://gingerbeardman.itch.io/rorschach</a>
</li>
  <li>An example project with source code is at: <a href="https://github.com/gingerbeardman/playdate-mouse-support">github.com/gingerbeardman/playdate-mouse-support</a>
</li>
</ul>

<hr/>

<h2 id="notes">Notes</h2>

<ul>
  <li>This is a technical proof of concept, so it can be improved</li>
  <li>It was created to show that this can be done. It is not a final version or the most robust way of doing this. And, yes, sorry, it’s only available for <em>macOS</em>
</li>
  <li>My dream scenario would be for <em>Playdate</em> <em>Simulator</em> and <em>Mirror</em> to have this feature built-in, so you can enable the feature and then interact with the virtual screen to forward mouse events to <em>Playdate</em>
</li>
  <li>If that can’t happen, then maybe a more native mouse forwarding client can be created for each of <em>macOS</em>, <em>Windows</em>, and <em>Linux</em>
</li>
  <li>On <em>macOS</em> it would be cool if it supported <em>Apple Pencil</em> via an <em>iPad</em>/Sidecar</li>
</ul>

        </div></div>
  </body>
</html>
