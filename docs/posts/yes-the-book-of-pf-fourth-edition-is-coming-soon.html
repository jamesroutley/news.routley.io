<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bsdly.blogspot.com/2025/07/yes-book-of-pf-4th-edition-is-coming.html">Original</a>
    <h1>Yes, the Book of PF, Fourth Edition Is Coming Soon</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-5603227309887788301" itemprop="description articleBody">
<p>
  Â© 2025 Peter N. M. Hansteen
  </p><p>
<em>Long rumored and eagerly anticipated by some, the <a href="https://nostarch.com/book-of-pf-4th-edition">fourth edition</a> of The Book of PF is now available for preorder</em>
  </p><center>
    <a href="https://nostarch.com/book-of-pf-4th-edition"><img alt="The Book of PF, 4th edition front cover, placeholder" src=" https://nxdomain.no/~peter/blogpix/BookPF4e_placeholder.png" width="25%"/></a>
    </center>
      <p>
    This week it was finally time to announce, to the <a href="https://mastodon.social/@pitrh/114819512000389761">fediverse</a> and to <a href="https://marc.info/?l=openbsd-misc&amp;m=175205773526134&amp;w=2">mailing</a> <a href="https://marc.info/?l=freebsd-pf&amp;m=175205774826144&amp;w=2">lists</a>, that there <em>is</em> a new edition of <em>The Book of PF</em> in the works, and <a href="https://nostarch.com/book-of-pf-4th-edition">preordering</a> is now enabled.
    </p><hr/>
<!--  
<b>Note:</b> This piece is also available <i>with</i> trackers but nicer formatting <a href="https://bsdly.blogspot.com/2025/07/">here</a>.
      -->
        <p><b>Note:</b> This piece is also available <i>without</i> trackers but <em>classic</em> formatting only <a href="https://nxdomain.no/~peter/yes_the_book_of_pf_4th_ed_is_coming.html">here</a>.
      </p><hr/>
<p>
  A few questions immediately pop into readers&#39; minds on hearing this news. The ones I get most often are,
</p><blockquote>
    Why now? What took you so long?
  </blockquote>
<p>
  which quite frequently combines with
  </p><blockquote>
    What changed? Are previous editions now useless?
  </blockquote>
  <p>
    I&#39;ll address both after repeating what I said in the email announcements:
    </p><blockquote>
      The fourth edition was written to bring the text into sync with the realities of the 
modern Internet, seen from the perspective of someone working with <a href="https://www.openbsd.org/">OpenBSD</a> 7.8 or 
<a href="https://www.freebsd.org/">FreeBSD</a> 14-STABLE.</blockquote>
  <p>
    What happened was, for quite some time after the <a href="https://nostarch.com/pf3">third edition</a> was finished, there were essentially no user visible changes such as syntax changes in the configuration for <a href="https://www.openbsd.org/">OpenBSD</a> PF. 
    </p><p>
      The code was definitely being worked on, developers fixed bugs, introduced optimizations such as network stack wide improvements in multicore support. But user-visible changes other than likely performance improvements did not appear, so I saw no urgent need to make updates to the book.</p><p>
    During the years following the late 2014 <a href="https://bsdly.blogspot.com/2014/10/the-book-of-pf-3rd-edition-is-here.html">publication of third edition</a>, I went on giving talks and tutorials, and at some point I welcomed input and help from my present co-presenters of the <em><a href="https://nxdomain.no/~peter/pf_fullday.pdf">Network Management with the OpenBSD Packet Filter Toolset</a></em> tutorials, <em>Max Stucchi</em> and <em>Tom Smyth</em>. 
        </p><p>
          Over a few revisions, the tutorial sessions became ever more OpenBSD centered, possibly because we were all focusing more on that system than the others. And of course, over time we made tweaks to the material we present at the tutorials in response to our own real world experiences and feedback from attendees and others.
</p><p>
  This went on for some years, with the still moderately popular conference sessions each yielding incremental changes to the material. Then, COVID-19 put all physical conference activities on hold for the years 2020 and 2021. <a href="https://2022.eurobsdcon.org/">EuroBSDCon 2022</a> in Vienna (originally planned as the 2020 conference), was our first post-lockdown presentation and a well attended one at that. 
  </p><p>
    We went on to do more sessions at <a href="https://www.bsdcan.org/2023/index.html">BSDCan 2023</a> and <a href="https://2023.eurobsdcon.org/">EuroBSDCon 2023</a>. During the post-lockdown period, one question started popping up ever more frequently in email, social media (direct messages, even) and in connection with the sessions themselves,
  </p><blockquote>
    Are you working on a fourth edition?
  </blockquote><p>
  more often than not accompanied by
  </p><blockquote>
    I&#39;d love to get this in a FreeBSD version, can you do that too?
  </blockquote>
<p>
  My answers would be roughly, <em>&#34;No tech book writer will ever reveal what their current project is until they have a specific publication date set&#34;</em>, and <em>&#34;Sure, I will look into what I can do about that for sometime later&#34;</em>
  </p><p>
    On my way back from <a href="https://2023.eurobsdcon.org/">EuroBSDCon 2023</a> in Coimbra, where these questions had of course come up again, even from the quite small group of attendees at our session, I decided I that after eight years it might be worth at least looking into what, if anything beyond incrementing version numbers, would make sense to do to produce a new edition.
  </p><p>
    So I set out to assess. The book had seen some light touch updates for its second printing that were not in my pre-production <code>.odt</code> files, so I set out with the freshest <code>.pdf</code> and started making annotations. After a little while the volume of annotations had grown enough that I found it more useful to transfer those annotations to a normal text file. That file was becoming something like an outline of what a fourth edition would look like.
  </p><p>
    So testing my own 8 year old work against modern OpenBSD and FreeBSD, and poking around for PF material in general, I noticed several things. 
    </p><p>
    Since the third edition was written, <a href="https://www.netbsd.org/">NetBSD</a>, prominently featured in that edition, had developed their own <a href="https://man.netbsd.org/npf.7">NPF</a> packet filter subsystem and deprecated their PF port. While <a href="https://www.dragonflybsd.org/">DragonFly BSD</a> still had PF in their tree, it looked like their version was seriously out of date (as far as I could tell equal to roughly OpenBSD 3.6, released in 2004).
  </p><p>
    So concentrating on the two free systems I was anyway in daily contact with -- <a href="https://www.openbsd.org/">OpenBSD</a> and <a href="https://www.freebsd.org/">FreeBSD</a> -- made sense.
  </p><p>
    My notes of things that needed to be done swelled over the next few weeks. The revision notes work became my main activity on evenings and weekends for a while, and by late November I sent off that file as an attachment to a mail message to Bill at No Starch that started with,
    </p><blockquote>
      Dear Bill,</blockquote>
  <p>
    I went on to explain that while we had not had major announcements in the packet filtering space during the past few years, quite a few incremental and larger changes had indeed happened. A lot more had happened in user visible PF matters on the FreeBSD side than on the OpenBSD side, but incremental changes had happened there too. 
    </p><p>
      And as you could reasonably expect, the world around us had changed enough that in addition to introducing some new features, existing examples and the way we present the issues to the reader needed a refresh in order to be relevant to anyone working in or starting out with modern TCP/IP networks.
  </p><p>
    It took some weeks before the <em>yes, we&#39;re on board for a fourth edition</em> message came back. It is entirely possible that making an important business pitch just before Thanksgiving weekend is not an optimal thing to do, timing-wise.
  </p><p>
    But when the go-ahead came, I asked <em>Henning Brauer</em>, who had been very much involved with technical editing for the previous versions, and <em>Kristof Provost</em>, who does the major PF things on the FreeBSD side, to be my tech reviewers. Both accepted immediately.
  </p><p>
    Over the next few months intense editing and revising followed -- yes, I do make mistakes, and Henning and Kristof proved to be very good at catching them.
  </p><p>
    Now we are very close to having the final result. The fourth edition of The Book of PF focuses on PF on modern versions of OpenBSD and FreeBSD, with only minor mention of other platforms. The ports to Apple systems and <a href="https://nxdomain.no/~peter/solaris-admins-networking-future.html">Oracle Solaris</a> are mentioned, but I decided early on to focus on the free systems for all examples. The FreeBSD parts have received significantly more attention than in previous versions, to the extent that we jokingly referred to the fourth edition as the <em>be nice to FreeBSD</em> edition.
  </p><p>
    The editing process has taken longer than I had anticipated, but we are on track now to have copies in readers&#39; hands some time in the second half of 2025. I hope I will be able to bring physical copies of the fourth edition to <a href="https://2025.eurobsdcon.org/">EuroBSDcon 2025</a> in Zagreb in September. There will be a revised and updated version of the <em><a href="https://events.eurobsdcon.org/2025/talk/FW39CX/">Network Management with the OpenBSD Packet Filter Toolset</a></em> session there, a full day tutorial starting at 2025-09-25 10:30 CET. You can register for the conference and tutorial by following the links from the conference <a href="https://2025.eurobsdcon.org/registration.html">Registration and Prices</a> page.
  </p><p>
    So summing up,
     </p><blockquote>
      The fourth edition was written to bring the text into sync with the realities of the 
modern Internet, seen from the perspective of someone working with <a href="https://www.openbsd.org/">OpenBSD</a> 7.8 or 
<a href="https://www.freebsd.org/">FreeBSD</a> 14-STABLE.</blockquote>
  <p>
    If you have actually read this far, there is a good chance you might be interested in the book, the tutorial, or both. I welcome your comments and input.
    </p><hr/><p>
        If you found this piece to be useful, informative, annoying or would for some other reason like to contact me or comment, please do.
  </p><p>
    You might also be interested in reading selected pieces via <em><a href="https://nxdomain.no/~peter/the_short_reading_list.html">That Grumpy BSD Guy: A Short Reading List</a></em> (also <a href="https://bsdly.blogspot.com/2025/05/that-grumpy-bsd-guy-short-reading-list.html">here</a>).
    </p><hr/>
 

</div></div>
  </body>
</html>
