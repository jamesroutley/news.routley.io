<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://layandreas.github.io/personal-blog/posts/how-spotify-made-me-self-host/">Original</a>
    <h1>How Spotify Made Me Self Host</h1>
    
    <div id="readability-page-1" class="page"><div><blockquote><p><strong>Disclaimer:</strong> This post was written without the help of AI. Research for the self hosting setup (which docker images to use, Jellyfin vs. Plex) and the creation of initial configurations (docker-compose, wireguard) were supported by AI (among others like e.g. Reddit, Stackoverflow)</p></blockquote><h2 id="how-it-all-started">How It All Started</h2><p>If you don’t care about my motivations and are only interested in the technical setup just directly jump to <a href="#self-hosting-setup">Self Hosting Setup</a>!</p><h3 id="spotify-price-increase">Spotify Price Increase</h3><p>In August 2025 <a href="https://www.heise.de/en/news/Premium-is-getting-more-expensive-Spotify-raises-prices-in-Germany-10530712.html">Spotify announced a price increase in Germany</a>. I received a friendly message that while I was a valued Premium subscriber, my subscription price would <em>change</em> (some might say <em>increase</em>):</p><p><img loading="lazy" src="https://layandreas.github.io/personal-blog/spotify-price-increase.png" alt="Spotify Price Increase Mail"/></p><p>For the time being I decided to sit it out. So November 2025 arrived and my Premium membership ended.</p><p>I decided to give Spotify’s <em>free plan</em> a try. How bad can it be? I had used the free tier 10 years ago and it was perfectly fine. How wrong I was!</p><p><img loading="lazy" src="https://layandreas.github.io/personal-blog/spotify-random-order.JPG" alt="Spotify Free Tier: Play Song in Random Order"/></p><ul><li><p>The free tier forces shuffle after a certain amount of free choices. So while the tier might be free, your song choice is not. <a href="https://www.theverge.com/news/778176/spotify-free-user-upgrade-play-specific-songs">Although there are reports that Spotify supposedly got rid of this feature as of September 2025</a>, I still encountered this restriction as of end of December 2025</p></li><li><p>It’s not possible to scrub the song’s progress bar</p></li></ul><p>I don’t remember these restrictions being in place back in the day, but I may be wrong. It might be a case of <a href="https://en.wikipedia.org/wiki/Enshittification">enshittification of the free tier</a>?</p><p>Okay, fair enough: Companies need to make money, I’m not entitled to Spotify providing their services for free! For all those services I still pay for I certainly get an awesome user experience?</p><p>Not so fast…</p><h3 id="across-all-streaming-services-less-value-for-more-money">Across All Streaming Services: Less Value For More Money</h3><p>Across all streaming services I have noticed a decline in user friendliness, UX &amp; UI.</p><h4 id="price-increases">Price increases</h4><p>All streaming services have seen price increases and / or introduced ads. I get it, companies need to make money. My day job consists of helping companies increase their revenues, it pays my bills!</p><p><strong>The issue:</strong> These price increases are accompanied by a worse UX/UI. From a user perspective my interest lies in getting the best value for money!</p><h4 id="ads">Ads</h4><p>Amazon Prime introduced ads to an already paid service. This is a noticeable worse user experience. Netflix <a href="https://help.netflix.com/en/node/126831">introduced a paid plan with ads</a>. At least for me YouTube advertises mostly mobile games &amp; obvious scams (ever gotten one of these terrible <a href="https://www.reddit.com/r/selfimprovement/comments/1jhbatb/has_anyone_tried_liven_app_i_hear_its_a_scam_but/">liven app ads</a>?)</p><h4 id="ui">UI</h4><p>In May 2025 Netflix <a href="https://www.netflix.com/tudum/articles/netflix-new-tv-layout">introduced a new UI</a>. It’s a matter of taste and while some people may like it, I find it much worse.</p><h4 id="cracking-down-on-password-sharing">Cracking Down on Password Sharing</h4><p>Disney+ followed Netflix and <a href="https://www.businessinsider.com/streaming-password-sharing-crackdown-disney-netflix-max-2025-5">cracked down on password sharing</a>. This is a de facto price increase for many.</p><h2 id="self-hosting-setup">Self Hosting Setup</h2><p>So I decided to give self hosting a try. I’ve followed the <a href="https://www.reddit.com/r/selfhosted/">awesome selfhosted subreddit</a> for a while anyway and own a collection of shows, movies &amp; music anyway.</p><h3 id="deployment-hetzner-vps">Deployment: Hetzner VPS</h3><p>Instead of going with my own hardware I decided to go with a <a href="https://www.hetzner.com/cloud">VPS from Hetzner</a>. I chose a <a href="https://www.hetzner.com/cloud">CAX21</a> with 4 VCPUs, 8GB RAM, 20 TB of traffic included and 80 GB of SSD storage.</p><h3 id="storage-hetzner-storage-box">Storage: Hetzner Storage Box</h3><p>While I could use the server’s SSD to store my media, I decided to use Hetzner’s <a href="https://www.hetzner.com/storage/storage-box/">Storage Box</a>. This way I can easily <a href="https://docs.hetzner.com/de/storage/storage-box/access/access-samba-cifs/">mount my media library on my Macbook via SMB</a>.</p><h3 id="media-server-jellyfin">Media Server: Jellyfin</h3><p>I opted to use the open source <a href="https://jellyfin.org/">Jellyfin</a> as my media server. <a href="https://www.plex.tv/">Plex</a> would be an alternative but it appears to have fallen out of favour and <a href="https://stadt-bremerhaven.de/plex-blockt-zugriff-auf-hetzner-server/">blocks Hetzner anyway</a>, so it would not work for me anyway.</p><h3 id="remote-access-vpn-tunnel-via-wireguard">Remote Access: VPN Tunnel via WireGuard</h3><p>To access my VPS remotely either from home or on the road I use <a href="https://www.wireguard.com/">WireGuard</a>:</p><ul><li><p><strong>Home network:</strong> My FRITZ!Box router lets me easily <a href="https://fritz.com/pages/vpn-mit-fritz-box">add a WireGuard configuration</a> to my home network. This way any device in my home network can access my media network without having to run a VPN. This is especially useful for accessing Jellyfin on my LG webOS TV as there’s no easy way to connect my TV to WireGuard directly</p></li><li><p><strong>On the road</strong>: Simply <a href="https://www.wireguard.com/install/">install WireGuard on your device</a>. You will need to create a client configuration for each of your devices</p></li></ul><h4 id="server-config">Server Config</h4><div><pre tabindex="0"><code data-lang="ini"><span><span><span>[Interface]</span>
</span></span><span><span><span>Address</span> <span>=</span> <span>10.13.13.1/24</span>
</span></span><span><span><span>ListenPort</span> <span>=</span> <span>51820</span>
</span></span><span><span><span>PrivateKey</span> <span>=</span> <span>{{ wireguard_server_private_key }}</span>
</span></span><span><span>
</span></span><span><span><span>PostUp</span>   <span>=</span> <span>iptables -A INPUT -i wg0 -p tcp --dport 8096 -j ACCEPT; iptables -A FORWARD -i wg0 -j ACCEPT</span>
</span></span><span><span><span>PostDown</span> <span>=</span> <span>iptables -D INPUT -i wg0 -p tcp --dport 8096 -j ACCEPT; iptables -D FORWARD -i wg0 -j ACCEPT</span>
</span></span><span><span>
</span></span><span><span><span>[Peer]</span>
</span></span><span><span><span>PublicKey</span> <span>=</span> <span>{{ wireguard_client_public_key }}</span>
</span></span><span><span><span>AllowedIPs</span> <span>=</span> <span>10.13.13.2/32</span>
</span></span><span><span>
</span></span><span><span><span>[Peer]</span>
</span></span><span><span><span>PublicKey</span> <span>=</span> <span>{{ wireguard_client_public_key_iphone }}</span>
</span></span><span><span><span>AllowedIPs</span> <span>=</span> <span>10.13.13.3/32</span>
</span></span><span><span>
</span></span><span><span><span>[Peer]</span>
</span></span><span><span><span>PublicKey</span> <span>=</span> <span>{{ wireguard_client_public_key_fritzbox }}</span>
</span></span><span><span><span>AllowedIPs</span> <span>=</span> <span>10.13.13.4/32</span>
</span></span></code></pre></div><p><strong>Peers</strong></p><p>In my WireGuardserver config I currently have three devices added as peers:</p><ul><li>My Macbook (<code>wireguard_client_public_key</code>)</li><li>My iPhone (<code>wireguard_client_public_key_iphone</code>)</li><li>My FRITZ!Box router (<code>wireguard_client_public_key_fritzbox</code>)</li></ul><p>Each device has its corresponding private key stored inside its WireGuard configuration / app. The <code>AllowedIPs</code> only allows the corresponding peer to use this internal IP address. <strong>On your device</strong> (router, notebook, mobile phone, …) you’ll need to assign this IP address as the <strong>interface section</strong>.</p><p>Let’s dive a bit deeper into the interface block.</p><p><strong>Interface</strong></p><p>Configuration for the network interface created on the server.</p><ul><li><code>Address = 10.13.13.1/24</code>: This is the address of the Hetzner server in our VPN</li><li><code>ListenPort = 51820</code>: UDP port number the WireGuard server listens on for incoming VPN connections</li><li><code>PrivateKey = {{ wireguard_server_private_key }}</code>: WireGuard uses this private key to identify itself to clients (via the public key which is shared)</li><li><code>PostUp / PostDown</code>: Port forwarding - we allow WireGuard to forward incoming traffic</li></ul><h4 id="client-config">Client Config</h4><p>Here’s an example how a client config on my Macbook looks like:</p><p><img loading="lazy" src="https://layandreas.github.io/personal-blog/wireguard_client_config.png" alt="WireGuard Client Config"/></p><p>You’ll have a separate configuration for each of your devices.</p><h3 id="docker-compose">Docker Compose</h3><p>And finally here’s the compose config for the actualy deployment on the VPS:</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span>version</span><span>:</span><span> </span><span>&#34;3.9&#34;</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span></span><span>services</span><span>:</span><span>
</span></span></span><span><span><span>  </span><span>wireguard</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>image</span><span>:</span><span> </span><span>linuxserver/wireguard:latest</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>wireguard</span><span>
</span></span></span><span><span><span>    </span><span>cap_add</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>NET_ADMIN</span><span>
</span></span></span><span><span><span>      </span>- <span>SYS_MODULE</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>PUID=1000</span><span>
</span></span></span><span><span><span>      </span>- <span>PGID=1000</span><span>
</span></span></span><span><span><span>      </span>- <span>TZ=Etc/UTC</span><span>
</span></span></span><span><span><span>      </span>- <span>SERVERPORT=51820</span><span>
</span></span></span><span><span><span>      </span>- <span>SERVERURL=&lt;SERVERS-IP-ADDRESS&gt;</span><span>
</span></span></span><span><span><span>    </span><span>volumes</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>./wireguard/config:/config</span><span>
</span></span></span><span><span><span>      </span>- <span>/lib/modules:/lib/modules:ro</span><span>
</span></span></span><span><span><span>    </span><span>ports</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>&#34;51820:51820/udp&#34;</span><span>
</span></span></span><span><span><span>    </span><span>sysctls</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>net.ipv4.conf.all.src_valid_mark=1</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>jellyfin</span><span>:</span><span>
</span></span></span><span><span><span>    </span><span>image</span><span>:</span><span> </span><span>jellyfin/jellyfin:latest</span><span>
</span></span></span><span><span><span>    </span><span>container_name</span><span>:</span><span> </span><span>jellyfin</span><span>
</span></span></span><span><span><span>    </span><span>network_mode</span><span>:</span><span> </span><span>&#34;service:wireguard&#34;</span><span>
</span></span></span><span><span><span>    </span><span>user</span><span>:</span><span> </span><span>1000</span><span>:</span><span>1000</span><span>
</span></span></span><span><span><span>    </span><span>volumes</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>./jellyfin/config:/config</span><span>
</span></span></span><span><span><span>      </span>- <span>/mnt/storagebox:/media:ro</span><span>
</span></span></span><span><span><span>    </span><span>environment</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>TZ=UTC</span><span>
</span></span></span><span><span><span>    </span><span>restart</span><span>:</span><span> </span><span>unless-stopped</span><span>
</span></span></span><span><span><span>    </span><span>depends_on</span><span>:</span><span>
</span></span></span><span><span><span>      </span>- <span>wireguard</span><span>
</span></span></span></code></pre></div><p>Some notes:</p><ul><li>Wireguard:<ul><li><code>51820:51820/udp</code>: We only expose WireGuard UDP port</li></ul></li><li>Jellyfin:<ul><li><code>/mnt/storagebox:/media:ro</code>: Mounting my Hetzner storage box with my media library into the container</li><li><code>network_mode: &#34;service:wireguard&#34;</code>: Shares the WireGuard container’s network stack</li></ul></li></ul><h2 id="so-is-self-hosting-a-alternative-to-streaming-services">So Is Self Hosting a Alternative to Streaming Services?</h2><p>It depends. My personal media library isn’t big enough that it could rival any of the streaming services libraries. You also need to put in the work to get your self-hosted setup running which non-technical people won’t do, and even for technical people it might not be worth it. For me personally it’s totally worth it!</p></div></div>
  </body>
</html>
