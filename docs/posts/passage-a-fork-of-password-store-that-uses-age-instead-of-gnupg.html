<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/FiloSottile/passage">Original</a>
    <h1>Passage: A fork of password-store that uses age instead of GnuPG</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <div><pre>passage
=======

passage is a fork of password-store (<a href="https://www.passwordstore.org" rel="nofollow">https://www.passwordstore.org</a>) that uses
age (<a href="https://age-encryption.org" rel="nofollow">https://age-encryption.org</a>) as a backend instead of GnuPG.

Differences from pass
---------------------

The password store is at $HOME/.passage/store by default.

For decryption, the age identities at $HOME/.passage/identities are used with
the -i age CLI option.

For encryption, the nearest .age-recipients file (that is, the one in the same
directory as the secret, or in the closest parent) is used with the -R age CLI
option. If no .age-recipients files are found, the identities file is used with
the -i option.

Extensions are searched at $HOME/.passage/store. password-store extensions that
wish to be compatible with passage can switch on the PASSAGE variable.

The init command is not currently available, and moving or copying a secret
always re-encrypts it.

Example: simple set up
----------------------

In this setup, the key is simply saved on disk, which can be useful if the
password store is synced to a location less trusted than the local disk.

    age-keygen &gt;&gt; $HOME/.passage/identities

Example: set up with a password-protected key
--------------------------------------------

This setup allows using the identity file password as the primary password
to unlock the store.

    KEY=&#34;$(age-keygen)&#34;
    echo &#34;$KEY&#34; | age -p -a &gt;&gt; $HOME/.passage/identities
    echo &#34;$KEY&#34; | age-keygen -y &gt;&gt; $HOME/.passage/store/.age-recipients

Example: set up with rage and age-plugin-yubikey
------------------------------------------------

This setup uses rage (<a href="https://github.com/str4d/rage">https://github.com/str4d/rage</a>), since age v1.0.0 does
not support plugins yet, and the PIV plugin age-plugin-yubikey
(<a href="https://github.com/str4d/age-plugin-yubikey">https://github.com/str4d/age-plugin-yubikey</a>).

It&#39;s recommended to add more YubiKeys and/or age keys to the .age-recipients
file as recovery options, in case this YubiKey is lost.

    export PASSAGE_AGE=rage
    age-plugin-yubikey # run interactive setup
    age-plugin-yubikey --identity &gt;&gt; $HOME/.passage/identities
    age-plugin-yubikey --list &gt;&gt; $HOME/.passage/store/.age-recipients

Migrating from pass
-------------------

    set -o pipefail
    cd &#34;${PASSWORD_STORE_DIR:-$HOME/.password-store}&#34;
    while read -r -d &#34;&#34; passfile; do
      name=&#34;${${passfile#./}%.gpg}&#34;
      [[ -f &#34;${PASSAGE_DIR:-$HOME/.passage/store}/$name.age&#34; ]] &amp;&amp; continue
      pass &#34;$name&#34; | passage insert -m &#34;$name&#34; ||
        { passage rm &#34;$name&#34;; break }
    done &lt; &lt;(find . -path &#39;*/.git&#39; -prune -o -iname &#39;*.gpg&#39; -print0)

Environment variables
---------------------

  PASSAGE_DIR               Password store location

  PASSAGE_IDENTITIES_FILE   Identities file location

  PASSAGE_AGE               age binary (tested with age and rage)

  PASSAGE_RECIPIENTS_FILE   Override recipients for encryption operations
                            Passed to age with -R

  PASSAGE_RECIPIENTS        Override recipients for encryption operations
                            Space separated, each passed to age with -r

All other environment variables from password-store are respected, such as
PASSWORD_STORE_CLIP_TIME and PASSWORD_STORE_GENERATED_LENGTH.
</pre></div>
        </div></div>
  </body>
</html>
