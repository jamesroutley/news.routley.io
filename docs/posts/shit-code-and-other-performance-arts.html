<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/">Original</a>
    <h1>Shit-code and Other Performance Arts</h1>
    
    <div id="readability-page-1" class="page"><section>
            
<p>Something I firmly believe is that it&#39;s important to make jokes in any medium. Here at Nebcorp Heavy
Industries &amp; Sundries, despite occasional dabbling with the
<a href="https://proclamations.nebcorp-hias.com/sundries/a-thoroughly-digital-artifact/">physical</a>, we work primarily with software, and
software is one of our primary corporate humor channels. Below is just some of our work there,
from least to most useless.</p>
<h2 id="katabastird-a-graphical-countdown-timer"><em>katabastird, a graphical countdown timer</em></h2>
<p><a href="https://crates.io/crates/katabastird">katabastird</a> is, in its own words, &#34;a simple countdown timer
that is configured and launched from the commandline.&#34; It looks like this when it&#39;s running:</p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./katabastird_normal.png" alt="katabastird running normally" title="counting down with one hour, twenty-nine minutes, and forty-three seconds remaining"/></p>
<p>It was created for a couple reasons:</p>
<ul>
<li>I wanted to make a GUI program to learn how to use a <a href="https://github.com/emilk/egui">particular library called
&#34;egui&#34;</a>;</li>
<li>I had signed up to give a five-minute talk to demonstrate the latest release of a <a href="https://docs.rs/clap/4.0.0/clap/">commandline
argument parsing library called &#34;clap&#34;</a>, which I had titled,
&#34;Clap for Clap Four&#34;, and I needed a program to showcase it.</li>
</ul>
<p>Obviously the best way to showcase a commandline-parsing library is to incorporate it into a
graphical program. Other commandline-mission-critical features included changing the color of the
background to get more and more red as less time remained</p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./katabastird_almost_done.png" alt="katabastird almost done counting down" title="counting down with one second remaining"/></p>
<p>and using the font used by the alien in <em>Predator</em></p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./katabastird_predator.png" alt="get to the choppah" title="get to the choppah"/></p>
<p>But by far its greatest feature is an undocumented option, <code>-A</code>, that will play an <a href="https://gitlab.com/nebkor/katabastird/-/blob/4ccc2e4738df3f9d3af520e2d3875200534f4f6f/resources/airhorn_alarm.mp3">airhorn
salvo</a>
when it&#39;s done. This option is visible in the program&#39;s help text, but it&#39;s not described.</p>
<p>Truly honestly, this is not a great program. Once it&#39;s launched, it only understands two keyboard
inputs, <code>ESC</code> and <code>q</code>, both of which simply cause it to exit. Using the mouse, you can pause,
restart, and reset. And that&#39;s it, that&#39;s all the interaction you get.</p>
<p>In spite of this, I find myself using it all the time. It&#39;s easy to launch with different times (the
commandline parsing understands things like <code>-h</code> for hours, <code>-m</code> for minutes, etc.), and its last
invocation is just an up-arrow in my terminal away. The airhorn cracks me up every time.</p>
<p>At some point, I plan on changing it to something that uses the GPU to run a fire simulation on the
numbers, and have the flame intensity get higher as the time remaining gets lower. I&#39;ll save that
for when I want to get slightly more serious about graphics and shaders, though; it would basically
be a total re-write.</p>
<p>As for the name, it&#39;s just a perversion of &#34;katabasis&#34;, which means, &#34;descent to the Underworld&#34;. I
guess a bastardized &#34;bastard&#34; is in there, too. Listen, I&#39;m gonna level with you: I&#39;m not wild about the name, but
what&#39;s done is done.</p>
<h2 id="randical-a-commandline-program-for-generating-random-values"><em>randical, a commandline program for generating random values</em></h2>
<p>Some time ago, I was <a href="https://blog.joeardent.net/2018/07/right-and-wrong-ways-to-pick-random-points-inside-a-sphere/">trying to work out some ways to pick random points in a
sphere</a>,
and during that exploration, I found myself wanting to just be able to generate random values
outside of any program in particular. So, I wrapped a primitive interface around <a href="https://docs.rs/rand/0.8.0/rand/index.html">the random value
generation library</a> I was using. I wound up using it
selfishly and in a limited fashion for that project, but afterward, decided to expand it a bit and
release it, as my first <a href="https://crates.io/crates/randical">real Rust crate</a>.</p>
<p>I&#39;ll reproduce the help text here, since it&#39;s fairly comprehensive:</p>
<pre data-lang="text"><code data-lang="text"><span>$ randical -h
</span><span>Radical Random Value Generator 1.618033
</span><span>
</span><span>Generates arbitrary numbers of uniformly distributed random values.
</span><span>
</span><span>USAGE:
</span><span>    randical [FLAGS] [OPTIONS]
</span><span>
</span><span>FLAGS:
</span><span>        --buel       Prints either &#39;Here.&#39; or &#39;Um, he&#39;s sick. My best friend&#39;s sister&#39;s boyfriend&#39;s brother&#39;s girlfriend
</span><span>                     heard from this guy who knows this kid who&#39;s going with the girl who saw Ferris pass out at 31
</span><span>                     Flavors last night. I guess it&#39;s pretty serious.&#39;, with equal probability. Not compatible with `-t`
</span><span>                     or `--bule`.
</span><span>        --bule       Prints either &#39;true&#39; or &#39;false&#39;, with equal probability. Not compatible with `-t` or `--buel`.
</span><span>    -e, --exit       With equal probability, exit with either status 0, like /bin/true, or status 1, like /bin/false.
</span><span>                     Technically compatible with all other options, but exit status will have no relation to any
</span><span>                     generated output. Sets default number of values to print to 0.
</span><span>    -h, --help       Prints help information
</span><span>    -V, --version    Prints version information
</span><span>
</span><span>OPTIONS:
</span><span>    -n, --num-vals &lt;NUM_VALS&gt;    Number of random values to print out. Defaults to 1.
</span><span>    -t, --type &lt;TYPE&gt;            Type of random value to print. Defaults to &#39;bool&#39;.
</span><span>                                 Possible values are &#39;b&#39;ool, &#39;f&#39;loat64, &#39;U&#39;UIDv4, &#39;u&#39;nsigned64, &#39;s&#39;igned64, and &#39;k&#39;suid
</span><span>                                 with millisecond precision.
</span></code></pre>
<p>The <a href="https://github.com/nebkor/randical/blob/main/README.md">README</a> contains some examples of using
it to do various things, like simulate a fair coin toss, or an <em>unfair</em> coin toss, or &#34;a <em>Sliding
Doors</em>-style garden of forking paths alternate timeline for Ferris Bueller&#39;s presence or absence on
that fateful day.&#34;</p>
<p>I have one actual non-shithead usecase for this program: in my <a href="https://gitlab.com/nebkor/dotfiles/-/blob/3aaf06fc66cdb541b76dfd44d25c369c4762301f/.emacs#L113-116">.emacs file, I use it to
generate</a>
<a href="https://segment.com/blog/a-brief-history-of-the-uuid/">ksuids</a>. But I don&#39;t <em>really</em> use it.</p>
<p>I include it mostly because, by most measurable metrics, this is my most popular program with end
users that I can specifically identify:</p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./randical_installs.png" alt="randical&#39;s popularity is baffling" title="who the hell are these people?"/></p>
<p>Who is downloading my software, and why? I don&#39;t know, and more importantly, I don&#39;t care or need to
know. It&#39;s truly better for everyone that way.</p>
<h2 id="freedom-dates-a-library-neither-wanted-nor-needed"><em>freedom-dates, a library neither wanted nor needed</em></h2>
<p>When I started writing this post, &#34;freedom-dates&#34; existed strictly as a shit-head idea of mine about
the dumbest possible way to represent dates as a string. In fact, I had had it about a month before,
while chatting with some friends on Discord.</p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./birth_of_freedomdates.png" alt="the birth of the birth of freedom" title="a screencap of a conversation where I suggest &#39;freedom-formatted&#39; dates are &#39;seconds since july 4 1776&#39;"/>
<em></em></p><center><em><sup><sub>actually i did ask if i should</sub></sup></em></center>
<p>As usual, I thought tossing a small crate together to realize this joke would take, at most, one
hour, and be maybe ten lines long. At least this time, it only took five or six times as long as I
thought it would. In its own words, <code>freedom-dates</code></p>
<blockquote>
<p>provides a convenient suite of affordances for working with dates in <em>freedom format</em>. That is, it
takes representations of dates in Communinst formats like &#34;2023-02-08&#34;, and liberates them into a
Freedom format like &#34;2/8/23&#34;.</p>
</blockquote>
<p>For something like this, where I would not want to actually be accused of punching down or being a
jingoistic moron, it&#39;s important to be as multidimensionally absurd as possible; I really needed to
commit to the bit and provide maximum, richly-textured incongruity.</p>
<p>Luckily, using the <a href="https://www.rust-lang.org/">Rust language</a> helps with that in a lot of
ways. After I <a href="https://crates.io/crates/freedom-dates">published it to the official package
repository</a>, the official documentation site built and
published the <a href="https://docs.rs/freedom-dates/latest/freedom_dates/">autogenerated documentation</a> for
it. This leads to the creation of content that looks like this:</p>
<p><img src="https://proclamations.nebcorp-hias.com/sundries/shit-code-and-performance-art/./freedoms_birthday.png" alt="this is history" title="Freedom was born at noon on the Fourth of July, &#39;76, Eastern Time. This is History."/></p>
<p>The slick-looking defaults and basically frictionless process for participating in the Rust
ecosystem make it easy for culture-jamming like this. All I had to do was diligently comment, test,
and document my code, and the larger systems took care of the rest.</p>
<p>Rust also provides a lot of different fancy programming tools, like
<a href="https://docs.rs/freedom-dates/latest/freedom_dates/trait.FreedomTime.html"><code>Traits</code></a>, that allow
you to dress up deeply unserious content in deeply serious costume.</p>
<p>In all real seriousness, though, I hope that seeing how easy it is to get something this silly
published in the official channels inspires you to overcome any trepidation about doing that
yourself, if you have something you want to share!</p>
<h2 id="bad-print-a-silly-program"><em>bad_print, a silly program</em></h2>
<p>A few years ago, someone at the <a href="https://recurse.com/">Recurse Center</a> started a chat
thread titled &#34;bad print&#34;, and opened it with,</p>
<blockquote>
<p>you probably didn&#39;t know that you needed a bad print function, one that spawns a thread for each
character in your string and prints the single character before quitting... well, now that you
know that you needed this, i&#39;ve written one for you</p>
</blockquote>
<p>and then pasted a 3-line program in Haskell, and asked for other implementations of &#34;bad print&#34;, in
any language. I whipped one up using <a href="https://github.com/rayon-rs/rayon">Rayon</a>, a library for doing
some things in parallel really easily, but eventually settled on the following, which uses a much
smaller and more focused external library called
<a href="https://github.com/rust-threadpool/rust-threadpool">threadpool</a>:</p>
<pre data-lang="rust"><code data-lang="rust"><span>use </span><span>std::io::Write;
</span><span>use </span><span>std::{env, io};
</span><span>
</span><span>use </span><span>threadpool::ThreadPool;
</span><span>
</span><span>fn </span><span>main</span><span>() {
</span><span>    </span><span>let</span><span> args: Vec&lt;String&gt; = env::args().</span><span>collect</span><span>();
</span><span>    </span><span>if</span><span> args.</span><span>len</span><span>() &lt; </span><span>2 </span><span>{
</span><span>        panic!(&#34;</span><span>Please supply a phrase to be badly printed.</span><span>&#34;)
</span><span>    }
</span><span>    </span><span>let</span><span> string = args[</span><span>1</span><span>..].</span><span>join</span><span>(&#34; &#34;);
</span><span>    </span><span>let</span><span> num_threads = string.</span><span>len</span><span>();
</span><span>
</span><span>    println!(--------);
</span><span>    </span><span>let</span><span> pool = ThreadPool::new(num_threads);
</span><span>    </span><span>for</span><span> c in string.</span><span>chars</span><span>() {
</span><span>        pool.</span><span>execute</span><span>(</span><span>move </span><span>|| {
</span><span>            print!(&#34;</span><span>{}</span><span>&#34;, c);
</span><span>            </span><span>let </span><span>_ = io::stdout().</span><span>flush</span><span>();
</span><span>        });
</span><span>    }
</span><span>    pool.</span><span>join</span><span>();
</span><span>    println!();
</span><span>}
</span></code></pre>
<p>I noted about it, relative to earlier versions,</p>
<blockquote>
<p>It appears to output strings with an even larger edit distance from the arguments given to it,
presumably due to the chaos inherent to harnessing the power of one full tpc (thread per char).</p>
</blockquote>
<p>Indeed, witness it for yourself:</p>
<pre data-lang="text"><code data-lang="text"><span>$ bad_print Behold the awesome power of one full Thread Per Character.
</span><span>--------
</span><span>Bwoesmd elpoh or  onh eu Thread earPCh ceearfofelwtter la.
</span></code></pre>
<p>By far the most impressive was a bash script that did <em>Matrix</em>-style cascading text in your
terminal, called, appropriately enough, <code>bad_matrix</code>; that particular one was by someone <a href="https://www.evalapply.org/posts/shell-aint-a-bad-place-to-fp-part-2-functions-as-unix-tools/index.html#main">who&#39;s a
bit of a shell
wizard</a>.</p>

<p>An artist&#39;s medium is all of reality and all of time, so every piece of the work is eligible for
expression; the frame is also part of the work. Software in my culture is still embedded in a
context that is a bit stuffy, a bit up its ass about things like &#34;copyright&#34; and &#34;semantic
versioning&#34;, and so they&#39;re things I enjoy playing with, too.</p>
<p>At the bottom of the <a href="https://github.com/nebkor/misfit_toys/blob/master/freedom-dates/README.md">readme for
freedom-dates</a>, I have
the following about the version:</p>
<blockquote>
<p>Freedom <em>STARTS</em> at number 1, baby! And every release is ten times the last, so second release is
10, then 100, etc. FREEDOM!</p>
</blockquote>
<p>and indeed it is at version 1.0.0; the two <code>.0</code>s after the <code>1</code> are there to satisfy Cargo&#39;s
requirements about semver.</p>
<h2 id="goldver">goldver</h2>
<p>When I version software for public consumption, I tend to use a scheme I call
&#34;<a href="https://gitlab.com/nebkor/katabastird/-/blob/main/VERSIONING.md">goldver</a>&#34;, short for &#34;Golden
Versioning&#34;. It works like this:</p>
<blockquote>
<p>When projects are versioned with goldver, the first version is &#34;1&#34;. Note that it is not &#34;1.0&#34;, or,
&#34;1.0-prealpha-release-preview&#34;, or anything nonsensical like that. As new versions are released,
decimals from <em>phi</em>, the <a href="https://en.wikipedia.org/wiki/Golden_ratio">Golden Ratio</a>, are appended
after an initial decimal point. So the second released version will be &#34;1.6&#34;, the third would be
&#34;1.61&#34;, etc., and on until perfection is asymptotically approached as the number of released
versions goes to infinity.</p>
</blockquote>
<p>In order to be compliant with the semver version structure, the following rule is applied to
projects published to the official Rust package repository:</p>
<blockquote>
<p>Once there have been at least three releases, the version string in the Cargo.toml file will
always be of the form &#34;1.6.x&#34;, where x is at least one digit long, starting with &#34;1&#34;. Each
subsequent release will append the next digit of phi to x. The number of releases can be
calculated by counting the number of digits in x and adding 2 to that.</p>
</blockquote>
<p>I sincerely believe that this is <em>better than <a href="https://semver.org/">semver</a></em> for plenty of non-library
software. It was Windows 95 and then Windows 2000; obviously there was a lot of change. I don&#39;t care
about arguing about the whether or not this is a &#34;patch release&#34; or a &#34;minor release&#34; or a &#34;major
change&#34;. There are no downstream dependents who need to make sure they don&#39;t accidentally upgrade to
the latest release. If someone wants to update it, they know what they&#39;re getting into, and they do
it in an inherently manual way. </p>
<h2 id="chaos-license">chaos license</h2>
<p>Anything that I can, I license under the Chaos License, which states,</p>
<blockquote>
<p>This software is released under the terms of the Chaos License. In cases where the terms of the
license are unclear, refer to the <a href="https://git.sr.ht/~boringcactus/fafol/tree/master/LICENSE-v0.2.md">Fuck Around and Find Out
License</a>.</p>
</blockquote>
<p>This is about as
<a href="https://blog.joeardent.net/2017/01/say-no-to-corporate-friendly-licenses/">business-hostile</a> as I
can imagine, far worse even than the strong copyleft licenses that terrified the lawyers at ILM when
I was there. It oozes uncertainty and risk; you&#39;d have to be deranged to seriously engage with
it. But if you&#39;re just a person? Dive right in, it doesn&#39;t really matter!</p>
<hr/>
<p>That&#39;s about all I have for now, my droogs. Go take what you know and do something weird with it; it
may amuse you! You might learn something! You might make someone laugh!</p>
<hr/>





        </section></div>
  </body>
</html>
