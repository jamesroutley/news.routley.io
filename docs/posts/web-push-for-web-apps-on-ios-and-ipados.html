<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://webkit.org/blog/13878/web-push-for-web-apps-on-ios-and-ipados/">Original</a>
    <h1>Web Push for Web Apps on iOS and iPadOS</h1>
    
    <div id="readability-page-1" class="page"><div>
                                
                <p>Today marks the release of iOS and iPadOS 16.4 beta 1, and with it comes support for Web Push and other features for Home Screen web apps.</p>
<figure>
<img decoding="async" src="https://webkit.org/wp-content/uploads/Web_Push_on_iOS-1024x576.png" alt="iPhone Lock Screen showing a notification arriving" width="1024" height="576" srcset="https://webkit.org/wp-content/uploads/Web_Push_on_iOS-1024x576.png 1024w, https://webkit.org/wp-content/uploads/Web_Push_on_iOS-300x169.png 300w, https://webkit.org/wp-content/uploads/Web_Push_on_iOS-768x432.png 768w, https://webkit.org/wp-content/uploads/Web_Push_on_iOS-1536x864.png 1536w, https://webkit.org/wp-content/uploads/Web_Push_on_iOS.png 1920w" sizes="(max-width: 1024px) 100vw, 1024px"/><br/>
</figure>
<p>Today also brings the first beta of Safari 16.4. It’s a huge release, packed with over 135 features in WebKit — including RegExp lookbehind assertions, Import Maps, OffscreenCanvas, Media Queries Range Syntax, <code>@property</code>, <code>font-size-adjust</code>, Declarative Shadow DOM, and much more. We’ll write all about these new WebKit features when Safari 16.4 is released to the public. Meanwhile, you can read a comprehensive list of new features and fixes in the <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_4-release-notes">Safari 16.4 beta 1 release notes</a>.</p>
<p>But let’s set Safari aside and talk about Home Screen web apps on iOS and iPadOS.</p>
<p>Since the first iPhone, users could add any website to their Home Screen — whether it’s a brochure site, a blog, a newspaper, an online store, a social media platform, a streaming video site, productivity software, an application for creating artwork, or any other type of website. For the last ten years, users of Safari on iOS and iPadOS could do this by tapping the Share button to open the Share menu, and then tapping “Add to Home Screen”. The icon for that website then appears on their Home Screen, where a quick tap gets them back to the site.</p>
<p>Web developers have the option to create a <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest">manifest file</a> (with its  <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/display"><code>display</code></a> member set to <code>standalone</code> or <code>fullscreen</code>) and serve it along with their website. If they do, that site becomes a Home Screen web app. Then, when you tap on its icon, the web app opens like any other app on iOS or iPadOS instead of opening in a browser. You can see its app preview in the <a href="https://support.apple.com/en-us/HT202070">App Switcher</a>, separate from Safari or any other browser.</p>
<h2>Web Push for Web Apps added to the Home Screen</h2>
<p>Now with iOS and iPadOS 16.4 beta 1, we are adding support for Web Push to Home Screen web apps. Web Push makes it possible for web developers to send push notifications to their users through the use of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API">Push API</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API">Notifications API</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Workers</a> all working together.</p>
<p>A web app that has been added to the Home Screen can request permission to receive push notifications as long as that request is in response to direct user interaction — such as tapping on a ‘subscribe’ button provided by the web app. iOS or iPadOS will then prompt the user to give the web app permission to send notifications. Once allowed, the user can <a href="https://support.apple.com/en-us/HT201925">manage those permissions per web app</a> in Notifications Settings — just like any other app on iPhone and iPad.</p>
<p>The notifications from web apps work exactly like notifications from other apps. They show on the Lock Screen, in Notification Center, and on a paired Apple Watch.</p>
<p>This is the same W3C standards-based Web Push that was added in <a href="https://webkit.org/blog/13399/webkit-features-in-safari-16-1/#web-push-for-macos-ventura">Safari 16.1</a> for macOS Ventura last fall. If you’ve implemented standards-based Web Push for your web app with industry best practices — such as using feature detection instead of browser detection — it will automatically work on iPhone and iPad.</p>
<p>Web Push on iOS and iPadOS uses the same Apple Push Notification service that powers native push on all Apple devices. You do not need to be a member of the Apple Developer Program to use it. Just be sure to allow URLs from <code>*.push.apple.com</code> if you are in control of your server push endpoints.</p>
<p>To learn more about how to setup Web Push, read the article <a href="https://webkit.org/blog/12945/meet-web-push/">Meet Web Push</a> on webkit.org, or watch the WWDC22 session video <a href="https://developer.apple.com/videos/play/wwdc2022/10098/">Meet Web Push</a>.</p>
<h2>Focus support</h2>
<p>Notifications are a powerful tool, but it’s easy for people to get into situations where they are overwhelmed by too many of them. Notifications for Home Screen web apps on iPhone and iPad integrate with <a href="https://support.apple.com/en-us/HT212608">Focus</a>, allowing users to precisely configure when or where to receive them. For users who add the same web app to their Home Screen on more than one iOS or iPadOS device, Focus modes automatically apply to all of them.</p>
<h2>Badging API</h2>
<p>Home Screen web apps on iOS and iPadOS 16.4 beta 1 now support the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Badging_API">Badging API</a>. Just like any app on iOS and iPadOS, web apps are now able to set their badge count. Both <code>setAppBadge</code> and <code>clearAppBadge</code> change the count while the user has the web app open in the foreground or while the web app is handling push events in the background — even before permission to display the count has been granted.</p>
<p>Permission to display the badge on the app icon is granted in exactly the same way as other apps on iOS and iPadOS. Once a user gives permission to allow notifications, the icon on the Home Screen will immediately display the current badge count. Users can then configure permissions for Badging in Notifications Settings, just like any other app on iOS or iPadOS.</p>
<h2>Manifest ID</h2>
<p>WebKit for iOS and iPadOS 16.4 beta 1 adds support for the <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/id"><code>id</code> member</a> from the Web Application Manifest standard. It’s a string (in the form of a URL) that acts as the unique identifier for the web application, intended to be used by an OS in whatever way desired. iOS and iPadOS use the Manifest ID for the purpose of syncing <a href="https://support.apple.com/en-us/HT212608">Focus</a> settings across multiple devices.</p>
<p>iOS has supported multiple installs of the same web app since the very beginning. We believe the ability for people to install any web app more than once on their device can be useful — providing additional flexibility to support multiple accounts, separate work vs personal usage, and more.</p>
<p>When adding a web app to the Home Screen, users are given the opportunity to change the app’s name. iOS and iPadOS 16.4 beta 1 combine this name with the Manifest ID to uniquely identify the web app. That way, a user can install multiple copies of the web app on one device and give them different identities. For example, notifications from “Shiny (personal)” can be silenced by Focus while notifications from “Shiny (work)” can be allowed. If the user gives their favorite website the same name on multiple devices, Focus settings on one device will sync and apply to the others as well.</p>
<h2>Third-party browser support for Add to Home Screen</h2>
<p>In iOS and iPadOS 16.4 beta 1, third-party browsers can now offer their users the ability to add websites and web apps to the Home Screen from the Share menu.</p>
<p>Applications on iOS and iPadOS present the Share menu by creating a <code>UIActivityViewController</code> with an array of <code>activityItems</code>. For “Add to Home Screen” to be included in the Share menu the following must be true:</p>
<ol>
<li>The application has the <a href="https://developer.apple.com/documentation/bundleresources/entitlements/com_apple_developer_web-browser">com.apple.developer.web-browser</a> managed entitlement</li>
<li>A WKWebView is included in the array of <code>activityItems</code></li>
<li>The WKWebView is displaying a document with an HTTP or HTTPS URL</li>
<li>If the device is an iPad, it must not be configured as a <a href="https://support.apple.com/guide/deployment/shared-ipad-overview-dep9a34c2ba2/web">Shared iPad</a></li>
</ol>
<p>As described above, after a user adds to Home Screen, any website with a Manifest file that sets the <code>display</code> member to <code>standalone</code> or <code>fullscreen</code> will open as a web app when a user taps its icon. This is true no matter which browser added the website to the Home Screen.</p>
<p>If there is no manifest file configured to request web app behavior (and no <code>meta</code> tag marking the site as web app capable), then that website will be saved as a Home Screen bookmark. Starting in iOS and iPadOS 16.4 beta 1, Home Screen bookmarks will now open in the user’s current default browser.</p>
<h2>New Fallback Icon</h2>
<p>Web developers usually provide icons to represent their website throughout the interface of a browser. If icons for the Home Screen are not provided, previously iOS and iPadOS would create an icon from a screenshot of the site. Now, iOS and iPadOS 16.4 beta 1 will create and display a monogram icon using the first letter of the site’s name along with a color from the site instead.</p>
<p>To provide the icon to be used for your website or web app, list the <a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/icons">icons in the Manifest file</a> — a capability that’s been supported <a href="https://webkit.org/blog/12445/new-webkit-features-in-safari-15-4/#web-apps">since iOS and iPadOS 15.4</a>. Or you can use the long-supported technique of listing <code>apple-touch-icons</code> in the HTML document <code>head</code>. (If you do both, <code>apple-touch-icon</code> will take precedence over the Manifest-declared icons.)</p>
<h2>New Web API for Web Apps</h2>
<p>Besides Web Push, Badging API, and Manifest ID, many of the other new features in Webkit for iOS and iPadOS 16.4 beta 1 are of particular interest to web app developers focusing on Home Screen web apps. These include:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Screen_Wake_Lock_API">Screen Wake Lock API</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Screen_Orientation_API">Screen Orientation API</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/UserActivation">User Activation API</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API">Web Codecs API</a> video support</li>
</ul>
<p>See the release notes for <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_4-release-notes">Safari 16.4 beta 1</a> for the full list of features.</p>
<h2>Feedback</h2>
<p>Are you seeing a bug? That’s to be expected in a beta. Please help us such squash bugs before iOS and iPadOS 16.4 are released to the public by providing <a href="https://feedbackassistant.apple.com/">feedback</a> from your iPhone or iPad. Feedback Assistant will collect all the information needed to help us understand what’s happening.</p>
<p>Also, we love hearing from you. You can find us on Mastodon at <a href="https://front-end.social/@jensimmons">@jensimmons@front-end.social</a>, <a href="https://mastodon.social/@bradeeoh">@bradeeoh@mastodon.social</a> and <a href="https://mastodon.social/@jondavis">@jondavis@mastodon.social</a>. Or send a tweet to <a href="https://twitter.com/webkit">@webkit</a> to share your thoughts on these new features.</p>

                            </div></div>
  </body>
</html>
