<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://cunderwood.dev/2022/02/13/consent-gdpr-and-google-analytics/">Original</a>
    <h1>Consent, GDPR and Google Analytics</h1>
    
    <div id="readability-page-1" class="page"><div>
						
<p><strong>Note</strong>:  Not a Lawyer – speak to legal counsel before making any changes.</p>



<p>Following <a href="https://cunderwood.dev/2022/02/11/is-server-side-google-analytics-the-answer/">my evaluation of the Austrian case </a>over the weekend, several interesting discussions about the consent management aspect popped up.  I originally left it out because consent wasn’t obtained from the Austrian site prior to collection and in the German case, the consent wasn’t obtained prior to loading the consent manager (yes, I realize how that sounds).</p>



<p>This prompted me to review the cases again, and take a look at how this could likely play out.</p>



<p>So let’s start with understanding if consent would have changed things and what the specific requirements for consent would be.  If we look at the <a href="https://noyb.eu/sites/default/files/2022-01/E-DSB%20-%20Google%20Analytics_EN_bk.pdf">Austrian Decision</a>, starting on page 34 it speaks to the specifics that could be leveraged in order to conduct the transfer of data to external country (in this case the United States).  Such transfers can occur in different scenarios, but this case references Articles 45, 46 and 49 of the GDPR.   </p>



<h2 id="article-45">Article 45</h2>



<p>Article 45 speaks to data transfers that occur to a country which has data adequacy to the GDPR.  We know from <a href="http://curia.europa.eu/juris/document/document.jsf?text=&amp;docid=228677&amp;pageIndex=0&amp;doclang=en&amp;mode=lst&amp;dir=&amp;occ=first&amp;part=1&amp;cid=9791227">the case that ended the privacy shield</a>, that the U.S.A. does not have data adequacy, and so Article 45 can not apply.</p>



<p>The DPA says this on page page 34.</p>



<h2 id="article-46">Article 46</h2>



<p>Article 46 speaks to data transfers that occur to countries without data adequacy and evaluates the conditions of such as transfer.  The next 5 pages of the decision look at this from multiple angles.</p>



<p>In the case of the Austrian decision 2 pages are spent evaluating the ‘appropriate guarantees’ portion of the data transfer, and cite that due to the intelligence agencies of the United States, that this alone can not fulfill the standard data protection clauses required for such as transfer.</p>



<p>Google argued that additional safeguards where in place, and so the DPA considered those as well over the next several pages.   It had the following to say in light of the access to the data by Google and additionally by the United States government.</p>



<blockquote><p>As a further interim result, it should be noted that the “additional measures” in question not are effective, as these do not close the legal protection gaps identified in the framework of the judgment of the ECJ of June 20, 2020 – i.e. the access and monitoring options of US intelligence services.</p><cite>https://noyb.eu/sites/default/files/2022-01/E-DSB%20-%20Google%20Analytics_EN_bk.pdf</cite></blockquote>



<p>As such Article 46 does not apply (page 39).    This is a major finding because if Art. 46 does not apply the only remaining basis for transfer is Art 49, which has a higher bar for transfer.</p>



<h2 id="article-49">Article 49</h2>



<p>Article 49 covers various exceptions in which a data transfer may occur when they are not covered by Articles 45 or 46.</p>



<p>On Page 39 the Austrian DPA notes that user <strong>consent wasn’t obtained</strong> prior to transfer so Article 49, 1a does not apply and that they could not determine any other conditions of Article 49 to apply .</p>



<p>Thus the transfer to Google could not take place under Article 49.</p>



<h2 id="could-consent-have-made-the-difference">Could Consent have made the difference?</h2>



<p>In my <strong>non-legal</strong> opinion, <em>potentially</em>.  </p>



<p>If consent was granted the DPA would have had to consider Article 49 1(a) as a mechanic in which the user consented to the data transfer <em>prior</em> to the transfer occurring.  This assumes that the integration between the consent manager and tag manager worked properly.</p>



<h3 id="technical-concerns">Technical Concerns</h3>



<p>Technically, I think for this to be valid we’d have to either not request the analytics.js file until after consent, or we need to self-hosted the analytics.js file, because otherwise by simple virtue of loading the external resource, we may run afoul of GDPR as happened in the <a href="https://rewis.io/urteile/urteil/lhm-20-01-2022-3-o-1749320/">German case</a> I referenced previously where a site was fined for loading Google Fonts.</p>



<p>Ultimately it depends on what a DPA would determine is a <em>transfer</em>.  Certainly sending data to the analytics collection servers is transfer and the decision states as much.  Would a DPA side with the German court and rule that loading the analytics.js file hosted by Google is also a transfer?  It’s hard to say but based on recent decisions, I consider it probable.  If we asked permission prior to loading the an external analytics.js file (or used a self-hosted file) however, we’d be covered even against this possible interpretation. </p>



<h3 id="legal-aspects">Legal Aspects</h3>



<p>Legally, under Article 49 1a consent has specific requirements.</p>



<blockquote><p><strong>(a)</strong> the data subject has explicitly consented to the proposed transfer, <strong>after having been informed of the possible risks</strong> of such transfers for the data subject due to the absence of an adequacy decision and appropriate safeguards;</p><cite>https://gdpr-text.com/read/article-49/#links</cite></blockquote>



<p>The issue with the above, is that while it may be viable legally, I can’t actually picture any brand saying “Do you agree to let us run analytics, oh and by the way the United States Government may get a copy?” as part of their consent preferences.   I would think someone related to Brand Safety would strongly object to such a notice which you could (in theory) avoid entirely with a different non-U.S. based product.</p>



<h3 id="server-side-considerations">Server Side Considerations </h3>



<p>I also think these risks would need to be communicated even with most  <a href="https://cunderwood.dev/2022/02/11/is-server-side-google-analytics-the-answer/">server side tagging</a> solutions because logging is typically <a href="https://developers.google.com/tag-platform/tag-manager/server-side/script-user-guide#disable_app_engine_request_logging_optional">enabled by default</a> and the server side container processes the client side data to construct the redacted request ultimately served to the analytics collection server.   I am not confident a DPA would meaningfully differentiate between the analytics collection server, and the Google Tag Manager server side container when Google owns and has access to both.</p>



<p>Google would in theory have access to the original client side analytics hit to the server side container in the logging so I am not sure it matters that what the analytics server gets is a reduced data set where Google ultimately has access to both the original and the modified request at different points in the data flow.  </p>



<p>We haven’t see a DPA rule on this yet because this hasn’t been the architecture in any of the cases to date.  So I can <a href="https://cunderwood.dev/2022/02/07/an-uncertain-future-for-the-web-in-europe/">only theorize</a> about what they would ultimately rule based on the relevant cases I’ve reviewed to date.</p>



<h3 id="what-about-legitimate-interest">What about Legitimate Interest?</h3>



<p>Article 49 does make allowances for Legitimate Interest as seen here:</p>



<blockquote><p>Where a transfer could not be based on a provision in Article 45 or 46, including the provisions on binding corporate rules, and none of the derogations for a specific situation referred to in the first subparagraph of this paragraph is applicable, a transfer to a third country or an international organisation may take place only <mark>if the transfer is not repetitive</mark>, concerns only a limited number of data subjects, is necessary for the purposes of compelling legitimate interests pursued by the controller which are not overridden by the interests or rights and freedoms of the data subject, and the controller has assessed all the circumstances surrounding the data transfer and has on the basis of that assessment provided suitable safeguards with regard to the protection of personal data. The controller shall inform the supervisory authority of the transfer. The controller shall, in addition to providing the information referred to in Articles 13 and 14, inform the data subject of the transfer and on the compelling legitimate interests pursued.</p><cite>https://gdpr-text.com/read/article-49/</cite></blockquote>



<p>There’s a lot of conditions here to claim transfer on the basis of legitimate interest, but specifically as I have highlighted, the transfer in such as case is not repetitive.  Since an analytics software data collection <strong>is repetitive</strong>, it is exceptionally unlikely in my opinion to be a viable basis for transfer for the purposes of analytics.   </p>



<p>Given the above I think the best option is 49 1(a), which means you need user consent <strong>after</strong> telling them all the risks regardless of client or server side tagging.</p>



<h2 id="wrapping-up">Wrapping up</h2>



<p>Consent is still an evolving topic.  The Belgium DPA <a href="https://www.searchdiscovery.com/blog/tcf-framework-ruling/">recently ruled</a> against IAB Europe over the Transparency and Consent framework in part, because it wasn’t specific enough to the user.   Could user consent have altered the Austrian decision?  Perhaps.  We won’t know if user consent is enough to be compliant until a DPA  adjudicates and evaluates that specific scenario.  I am skeptical, however, that any site is properly communicating the risk at this point after going down this rabbit hole for the past several days.</p>




					</div></div>
  </body>
</html>
