<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/seven1m/natalie">Original</a>
    <h1>Natalie: An early-stage Ruby implementation that compiles to C&#43;&#43;</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><a href="https://github.com/seven1m/natalie/actions?query=workflow%3ABuild+branch%3Amaster"><img src="https://github.com/seven1m/natalie/actions/workflows/build.yml/badge.svg" alt="github build status"/></a>
<a href="https://builds.sr.ht/~tim/natalie?" rel="nofollow"><img src="https://camo.githubusercontent.com/4992c46b681123533974ed17822ec17deb7000ac10de37a8913cae9c3210ac24/68747470733a2f2f6275696c64732e73722e68742f7e74696d2f6e6174616c69652e737667" alt="builds.sr.ht status" data-canonical-src="https://builds.sr.ht/~tim/natalie.svg"/></a>
<a href="https://github.com/seven1m/natalie/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/2bb630e2707a04100cd270fd944d22816241c37b68a5a1629257920c65e17891/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c7565" alt="MIT License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue"/></a></p>
<p dir="auto">Natalie is a very early-stage work-in-progress Ruby implementation.</p>
<p dir="auto">It provides an ahead-of-time compiler using C++ and gcc/clang as the backend.
Also, the language has a REPL that performs incremental compilation.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="http://pepijndevos.nl/seven1m/natalie/blob/master/examples/demo.gif"><img src="http://pepijndevos.nl/seven1m/natalie/raw/master/examples/demo.gif" alt="demo screencast"/></a></p>
<p dir="auto">There is much work left to do before this is useful. Please let me know if you
want to help!</p>
<h2 dir="auto"><a id="user-content-helping-out" aria-hidden="true" href="#helping-out"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Helping Out</h2>
<p dir="auto">Contributions are welcome! You can learn more about how I work on Natalie via
the <a href="https://www.youtube.com/playlist?list=PLWUx_XkUoGTq-nkbhnk6PN4m109ISo5BX" rel="nofollow">hacking session videos on YouTube</a>.</p>
<p dir="auto">The easiest way to get started right now would be to find a method on an object
that is not yet implemented and make it yourself! Also take a look at
<a href="https://github.com/seven1m/natalie/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">good first issues</a>.
(See the &#39;Building&#39; and &#39;Running Tests&#39; sections below for some helpful steps.)</p>
<p dir="auto">We have a very quiet <a href="https://discord.gg/hnHp2tdQyn" rel="nofollow">Discord server</a> -- come and hang out!</p>
<h2 dir="auto"><a id="user-content-building" aria-hidden="true" href="#building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h2>
<p dir="auto">Natalie is tested on macOS, OpenBSD, and Ubuntu Linux. Windows is not yet supported.</p>
<p dir="auto">Natalie requires a system Ruby (MRI) to host the compiler.</p>
<p dir="auto">Prerequisites:</p>
<ul dir="auto">
<li>git</li>
<li>autoconf</li>
<li>automake</li>
<li>libtool</li>
<li>make</li>
<li>gcc or clang</li>
<li>Ruby 2.7.x or Ruby 3.0.x (<a href="https://github.com/rbenv/rbenv">rbenv</a> preferred)</li>
<li>ccache (optional)</li>
</ul>
<p dir="auto">Install the above prerequisites on your platform, then run:</p>
<div data-snippet-clipboard-copy-content="git clone https://github.com/seven1m/natalie
cd natalie
rake"><pre>git clone https://github.com/seven1m/natalie
<span>cd</span> natalie
rake</pre></div>
<p dir="auto"><strong>NOTE:</strong> Currently, the default build is the &#34;debug&#34; build, since Nataile is in active development.
But you can build in release mode with <code>rake build_release</code>.</p>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<p dir="auto"><strong>REPL:</strong></p>

<p dir="auto"><strong>Run a Ruby script:</strong></p>
<div data-snippet-clipboard-copy-content="bin/natalie examples/hello.rb"><pre>bin/natalie examples/hello.rb</pre></div>
<p dir="auto"><strong>Compile a file to an executable:</strong></p>
<div data-snippet-clipboard-copy-content="bin/natalie examples/hello.rb -c hello
./hello"><pre>bin/natalie examples/hello.rb -c hello
./hello</pre></div>
<h2 dir="auto"><a id="user-content-using-with-docker" aria-hidden="true" href="#using-with-docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using With Docker</h2>
<div data-snippet-clipboard-copy-content="docker build -t natalie .                                            # build image
docker run -it --rm natalie                                          # repl
docker run -it --rm natalie -e &#34;p 2 * 3&#34;                             # immediate
docker run -it --rm -v$(pwd)/myfile.rb:/myfile.rb natalie /myfile.rb # execute a local rb file
docker run -it --rm --entrypoint bash natalie                        # bash prompt"><pre><code>docker build -t natalie .                                            # build image
docker run -it --rm natalie                                          # repl
docker run -it --rm natalie -e &#34;p 2 * 3&#34;                             # immediate
docker run -it --rm -v$(pwd)/myfile.rb:/myfile.rb natalie /myfile.rb # execute a local rb file
docker run -it --rm --entrypoint bash natalie                        # bash prompt
</code></pre></div>
<h2 dir="auto"><a id="user-content-running-tests" aria-hidden="true" href="#running-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running Tests</h2>
<p dir="auto">To run a test (or spec), you can run it like a normal Ruby script:</p>
<div data-snippet-clipboard-copy-content="bin/natalie spec/core/string/strip_spec.rb"><pre>bin/natalie spec/core/string/strip_spec.rb</pre></div>
<p dir="auto">This will run the tests and tell you if there are any failures.</p>
<p dir="auto">If you want to run all the tests that we expect to pass, you can run:</p>

<p dir="auto">Lastly, if you need to run a handful of tests locally, you can use the
<code>test/runner.rb</code> helper script:</p>
<div data-snippet-clipboard-copy-content="bin/natalie test/runner.rb test/natalie/if_test.rb test/natalie/loop_test.rb"><pre>bin/natalie test/runner.rb test/natalie/if_test.rb test/natalie/loop_test.rb</pre></div>
<h3 dir="auto"><a id="user-content-whats-the-difference-between-the-spec-and-test-directories" aria-hidden="true" href="#whats-the-difference-between-the-spec-and-test-directories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What&#39;s the difference between the &#39;spec/&#39; and &#39;test/&#39; directories?</h3>
<p dir="auto">The files in <code>spec/</code> come from the excellent <a href="https://github.com/ruby/spec">ruby/spec</a>
project, which is a community-curated repo of test files that any Ruby
implementation can use to compare its conformance to what MRI (Matz&#39;s Ruby
Intepreter) does. We copy specs over as we implement the part of the language
that they cover.</p>
<p dir="auto">Everything in <code>test/</code> is stuff we wrote while working on Natalie. These are
tests that helped us bootstrap certain parts of the language and/or weren&#39;t
covered as much as we would like by the official Ruby specs. We use this
to supplement the specs in <code>spec/</code>.</p>
<h2 dir="auto"><a id="user-content-copyright--license" aria-hidden="true" href="#copyright--license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright &amp; License</h2>
<p dir="auto">Natalie is copyright 2021, Tim Morgan and contributors. Natalie is licensed
under the MIT License; see the <code>LICENSE</code> file in this directory for the full text.</p>
<p dir="auto">Some parts of this program are copied from other sources, and the copyright
belongs to the respective owner:</p>
<table>
<thead>
<tr>
<th>file(s)</th>
<th>copyright</th>
<th>license</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dtoa.c</code></td>
<td>David M. Gay, Lucent Technologies</td>
<td>custom permissive</td>
</tr>
<tr>
<td><code>fiber_value.*</code></td>
<td>Evan Jones</td>
<td>MIT</td>
</tr>
<tr>
<td><code>big_int.*</code></td>
<td>Syed Faheel Ahmad</td>
<td>MIT</td>
</tr>
<tr>
<td><code>spec/*</code> (see <code>spec/LICENSE</code>)</td>
<td>Engine Yard, Inc.</td>
<td>MIT</td>
</tr>
</tbody>
</table>
<p dir="auto">See each file above for full copyright and license text.</p>
</article>
        </div></div>
  </body>
</html>
