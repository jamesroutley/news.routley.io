<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/j6k4m8/epistolary">Original</a>
    <h1>Show HN: Epistolary â€“ Respond to your emails in handwriting</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">I find writing emails to be one of the most tedious and unpleasant tasks of my day. But I find the act of handwriting to be one of the most pleasant! The reMarkable is an e-ink tablet with a very pleasant writing experience. This software allows you to respond to emails by writing on the reMarkable, and then sends an OCR&#39;d version of your writing to the recipient.</p>
<hr/>
<p dir="auto">See <a href="https://loeber.substack.com/j6k4m8/epistolary/blob/main/docs/Overview.md">docs/Overview.md</a> for an example!</p>
<hr/>
<p dir="auto">This tool is designed to &#34;print&#34; emails to a PDF file (one thread per file), with a blank (ruled) page after each email.
You can write a reply to the email on the blank page, and Epistolary will convert your handwriting to text and send it as a reply to the email.</p>
<p dir="auto">It is originally designed to be used with the <a href="https://remarkable.com/" rel="nofollow">Remarkable</a> tablet, which is a great device for reading and annotating PDFs, but it should work with standalone PDFs, tablet devices, or scanned documents as well.</p>

<p dir="auto">The tool comprises three main components:</p>
<ul dir="auto">
<li><code>MailboxManager</code>: A class that manages the mailbox, and provides methods to get the next email to be printed, and to send a reply to an email.</li>
<li><code>DocumentManager</code>: A class that manages the PDF document library.</li>
<li><code>EpistolaryOrchestrator</code>: A class that manages the interaction between the <code>MailboxManager</code> and the <code>DocumentManager</code>, and provides OCR and main entry point functionality.</li>
</ul>


<p dir="auto">If you are using the tesseract OCR option, you must first install Tesseract for OCR. On MacOS, this can be done with <code>brew install tesseract</code>.</p>
<p dir="auto">If you are using the OpenAI OCR option, you should configure your OpenAI API key globally, or you can pass it in a config to the TextExtractor directly.</p>
<p dir="auto">If you are planning to use the reMarkable document management tools, you will also need to install <a href="https://github.com/juruen/rmapi">the <code>rmapi</code> tool</a> and configure it with your reMarkable account.</p>

<p dir="auto">Then install Python dependencies:</p>


<p dir="auto">Create a <code>~/.config/epistolary.json</code> file. (This is optional but recommended so that you don&#39;t have to put your password in the Python kernel directly.)</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &#34;email&#34;: &#34;####&#34;,
    &#34;password&#34;: &#34;####&#34;,
    &#34;imap&#34;: {
        &#34;host&#34;: &#34;####&#34;,
        &#34;port&#34;: 993
    },
    &#34;smtp&#34;: {
        &#34;host&#34;: &#34;####&#34;,
        &#34;port&#34;: 587
    }
}"><pre>{
    <span>&#34;email&#34;</span>: <span><span>&#34;</span>####<span>&#34;</span></span>,
    <span>&#34;password&#34;</span>: <span><span>&#34;</span>####<span>&#34;</span></span>,
    <span>&#34;imap&#34;</span>: {
        <span>&#34;host&#34;</span>: <span><span>&#34;</span>####<span>&#34;</span></span>,
        <span>&#34;port&#34;</span>: <span>993</span>
    },
    <span>&#34;smtp&#34;</span>: {
        <span>&#34;host&#34;</span>: <span><span>&#34;</span>####<span>&#34;</span></span>,
        <span>&#34;port&#34;</span>: <span>587</span>
    }
}</pre></div>

<p dir="auto">Here&#39;s an example of a Python script that uses the package:</p>
<div dir="auto" data-snippet-clipboard-copy-content="from epistolary.orchestrator import EpistolaryOrchestrator
from epistolary.mailbox_manager import SMTPIMAPMailboxManager
from epistolary.document_manager.remarkable_document_manager import RemarkableDocumentManager
from epistolary.text_extractor.openai_text_extractor import OpenAITextExtractor

EO = EpistolaryOrchestrator(
    SMTPIMAPMailboxManager.from_file(),
    RemarkableDocumentManager(),
    text_extractor=OpenAITextExtractor(),
    debug=True,
)

EO.refresh_document_mailbox()"><pre><span>from</span> <span>epistolary</span>.<span>orchestrator</span> <span>import</span> <span>EpistolaryOrchestrator</span>
<span>from</span> <span>epistolary</span>.<span>mailbox_manager</span> <span>import</span> <span>SMTPIMAPMailboxManager</span>
<span>from</span> <span>epistolary</span>.<span>document_manager</span>.<span>remarkable_document_manager</span> <span>import</span> <span>RemarkableDocumentManager</span>
<span>from</span> <span>epistolary</span>.<span>text_extractor</span>.<span>openai_text_extractor</span> <span>import</span> <span>OpenAITextExtractor</span>

<span>EO</span> <span>=</span> <span>EpistolaryOrchestrator</span>(
    <span>SMTPIMAPMailboxManager</span>.<span>from_file</span>(),
    <span>RemarkableDocumentManager</span>(),
    <span>text_extractor</span><span>=</span><span>OpenAITextExtractor</span>(),
    <span>debug</span><span>=</span><span>True</span>,
)

<span>EO</span>.<span>refresh_document_mailbox</span>()</pre></div>
<p dir="auto">And to send:</p>

<p dir="auto">Note that the <code>SMTPIMAPMailboxManager</code> uses the <code>epistolary.json</code> file to get the email and password, and the <code>RemarkableDocumentManager</code> uses the <code>rmapi</code> tool to manage the reMarkable documents (which depends upon a <code>~/.rmapi</code> file with your reMarkable credentials).</p>
<p dir="auto">If you do not choose to use the <code>#from_file()</code> method, you can pass in the email, password, and other parameters directly to the <code>SMTPIMAPMailboxManager</code> constructor.</p>

<ul dir="auto">
<li>No support for inline images or attachments yet... But it should be easy to add!</li>
<li>Spacing and formatting of the OCR&#39;d text is not perfect, but it&#39;s usually good enough for a quick reply.</li>
</ul>
</article></div></div>
  </body>
</html>
