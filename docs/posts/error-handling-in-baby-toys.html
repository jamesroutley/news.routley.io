<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://brainbaking.com/post/2024/04/error-handling-in-baby-toys/">Original</a>
    <h1>Error Handling in Baby Toys</h1>
    
    <div id="readability-page-1" class="page"><article>
	    <div>
	  		<p>Electrical baby toys are interesting to disassemble and look at how it’s made. Not up to the point of screwing out the PCB, decapping the chips and trying to reverse-engineer the ROM—I’m sure that’s interesting too—but just on a basic mechanical level. Companies like VTech and Clementoni apply simple but clever techniques for their systems to provide just enough variation while keeping the production costs low.</p>
<p>Consider the Baby Clementoni puzzle farmer themed laying board game. The board is divided into four sections, where our toddler can place three plastic blocks in their correct respective place in and around the farm. It’s just the plastic mold that keeps the puzzle pieces in place. But these pieces can also be inserted into the central mechanism that’ll emit a charming sound, identifying the piece: if our daughter manages to insert the cat piece, it’ll say <em>miauw</em>, and if that was the bird, you’ll hear chirping. How does it do that?</p>
<figure>
	
		
	
	<a href="https://brainbaking.com/post/2024/04/error-handling-in-baby-toys/../clementoni.jpg">
		<img src="https://brainbaking.com/post/2024/04/error-handling-in-baby-toys/../clementoni.jpg" loading="lazy" title="The Clementoni puzzle board, with four buttons clearly visible in the orange part in the center. Note the recesses in the plastic pieces." data-pagefind-index-attrs="title"/>
	</a>
	
		<figcaption>The Clementoni puzzle board, with four buttons clearly visible in the orange part in the center. Note the recesses in the plastic pieces.</figcaption>
	
</figure>

<p>The central system simply registers switch presses. It comes with 4 small switches, and the bottom size of the plastic puzzle pieces are cut out in a way that it’ll press a certain combination of those switches. That means there are <code>2^4</code> or 16 possible combinations. But wait! There are only 12 puzzle pieces. Does that mean you can buy an expansion? We categorized each puzzle number and came to the conclusion that there are three unregistered binary combinations:</p>
<table>
<thead>
<tr>
<th>Binary</th>
<th>Puzzle Piece</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1100</code></td>
<td>Cow</td>
</tr>
<tr>
<td><code>1011</code></td>
<td>Rabbit</td>
</tr>
<tr>
<td><code>0010</code></td>
<td>Cat</td>
</tr>
<tr>
<td><code>0100</code></td>
<td>Rooster</td>
</tr>
<tr>
<td><code>1110</code></td>
<td>Frog</td>
</tr>
<tr>
<td><code>0101</code></td>
<td>Chicken</td>
</tr>
<tr>
<td><code>0110</code></td>
<td>Horse</td>
</tr>
<tr>
<td><code>1000</code></td>
<td>Farmer</td>
</tr>
<tr>
<td><code>1010</code></td>
<td>Sheep</td>
</tr>
<tr>
<td><code>0011</code></td>
<td>Bird</td>
</tr>
<tr>
<td><code>0111</code></td>
<td>Duck</td>
</tr>
<tr>
<td><code>0001</code></td>
<td>Dog</td>
</tr>
</tbody>
</table>
<p>Then there’s of course <code>0000</code> which shouldn’t trigger any sound since it’s the default state, meaning we’re left with <code>1111</code>, <code>1001</code>, and <code>1101</code> as unassigned ones. Would pressing that combination of switches crash the whole thing? Nope! Clementoni’s engineers were smart enough to “catch” that error: triggering one of the unknown states by forcing a combination with your fingers emits a bloop followed by a voice saying “uh-oh!”. It made me laugh—good catch indeed!</p>
<p>You have to design these things a bit more robust: a baby or toddler mashing in plastic pieces without care in practice means our cow regularly sounds like the rooster, and our dog like the chicken: sometimes, the switches are stuck, and sometimes, the plastic pieces trigger <code>1</code>s next to the ones they’re supposed to trigger. In that case, having a fail-safe “uh-oh” seems like a good idea.</p>
<p>VTech uses this unique-combination-of-trigger mechanism in many of their products: on their <a href="https://www.vtechnl.com/onze-merken/zoef-zoef-dieren">Zoef Zoef Dieren</a> animals, cars, and water amusement park. That last one is more interesting, as the figures are round, meaning the plastic notches at the bottom pressing the buttons to identify the figurine have to take rotation into account. A <code>010010</code> and a <code>100100</code> and a <code>001001</code> produces different numbers (18, 36, 9), but it’s the same little hippo.</p>
<figure>
	
		
	
	<a href="https://brainbaking.com/post/2024/04/error-handling-in-baby-toys/../vtech.jpg">
		<img src="https://brainbaking.com/post/2024/04/error-handling-in-baby-toys/../vtech.jpg" loading="lazy" title="The VTech water fun play center, with two figurines upside-down (left; green) and three figurines on the right. Note the switches in the orange round section on the lower left that identify these pieces." data-pagefind-index-attrs="title"/>
	</a>
	
		<figcaption>The VTech water fun play center, with two figurines upside-down (left; green) and three figurines on the right. Note the switches in the orange round section on the lower left that identify these pieces.</figcaption>
	
</figure>

<p>Bit rotation can be implemented using a combination of bit shifting and or operations, and on a hardware level, with different locical XOR ports. That’s of course just one way, and you still need a way to identify the number without confusing it with another figure. Although I don’t think that last was implemented: if you select your starting bits in a smart way, there won’t be any overlap. The identification system here uses 14 bits, and all of the figures have either 6 or 7 <code>1</code>s, making it even possible to completely ignore bit rotation and just rely on the relative position of the enabled bits to do the identification. I’m of course merely guessing at this point.</p>
<p>The VTech animals of the zoo and farm emit a different sound based on the position where you put them in the zoo/farm. For example, before their feed tray, on the track itself, small plastic notches again press on the switches below the animals on wheels, triggering the correct “I love corn, yummy!” reaction.</p>
<p>Until you go off track, or the track breaks, that is.</p>
<p>So what happens when you press an unknown combination of buttons on VTech toys? Unfortunately, nothing. What a letdown and missed opportunity! Instead of putting in an easter egg like the Clementoni puzzle board, the VTech <em>Zoef Zoef</em> animals, <em>Toet Toet</em> cars, steam train blocks, and wobbly water fun figurines all go silent. Italian versus Chinese humor, perhaps?</p>
<p>That said, this article proves we have way too many battery-powered toys that make noise…</p>


		    
	  	</div>
	</article></div>
  </body>
</html>
