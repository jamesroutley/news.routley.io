<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eitherway.io/posts/esp32-buyers-guide/">Original</a>
    <h1>ESP32 Buyer’s Guide: Different Chips, Firmware, Sensors</h1>
    
    <div id="readability-page-1" class="page"><div><p>The ESP 32 was the most fun side project for me in 2022. For those who don’t know: the ESP32 is a small, cheap and wifi-enabled microchip. Many smart devices that you buy on Amazon have an ESP32 inside. It’s really amazing what you can do with a board that costs less than a good sandwich.</p><ul><li>You can build a small, low power WebCam for $7 (shipping from China included).</li><li>You can build a wireless temperature and humidity sensor, that sends you your current room temperature for $10 (again shipping included).</li><li>You can even run a small neural network on it to <a href="https://github.com/espressif/esp-who">detect whether cat faces are running through your camera</a> for $19.</li></ul><p>Have I sparked your interest? Good. That’s why I’m excited about these chips.</p><h2 id="what-the-heck-is-the-difference-between-esp8266-esp32-c3-esp32-s2-esp32-s3">What the heck is the difference between ESP8266, ESP32-C3, ESP32-S2, ESP32-S3,…?</h2><p>If you go on AliExpress, you will find a variety of ESP32 microcontroller boards. Which one should you buy?</p><h3 id="esp8266-vs-esp32">ESP8266 vs ESP32</h3><p>If you go shopping, you will find boards with an ESP8266 and an ESP32-xx. They belong to different microprocessor families. Strictly speaking, the ESP8266 is not a family, but only a single processor.</p><p><strong>Note:</strong> There are Boards with an ESPxx Module on them, but they have nothing to do with the ESP32. They are only a packaged version of an ESP8266.</p><p>The important differences are:</p><ul><li>ESP32 is the successor of the ESP8266.</li><li>They are developed with different core platforms (<a href="https://github.com/esp8266/Arduino">ESP8266 Arduino Core</a> and <a href="https://github.com/espressif/arduino-esp32">ESP32 Arduino Core</a>).</li></ul><p><strong>Therefore, I would recommend buying a mikrocontroller based on the ESP32.</strong> It’s the successor of the ESP8266 and comes with some fascinating processor varieties.
The ESP32 also supports the <a href="https://github.com/espressif/esp-idf">ESP-IDF</a> development framework, which could be interesting for more professional projects.</p><p>I wouldn’t recommend to mix between the ESP32 and the ESP8266 as these are not (fully) code compatible. It’s possible to develop code that works on the ESP32 and the ESP8266, but it’s tedious.</p><h3 id="esp32-s2-esp32-s3-esp32-c3-esp32-c6-">ESP32-S2, ESP32-S3, ESP32-C3, ESP32-C6, …</h3><p>These processors all belong to the ESP32 family. They differ in their features set and in their area of application.</p><ul><li><strong>ESP32-S2</strong> Old version of the ESP32-S3.</li><li><strong>ESP32-S3</strong> Low power. Dual-core. Wi-Fi and Bluetooth LE. 45 GPIOs. <a href="https://github.com/espressif/esp32-camera">Camera Support</a>. <a href="https://github.com/espressif/esp-who">AI Support</a>. <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s3/api-reference/peripherals/usb_device.html?highlight=usb">Native USB Support</a> (This let’s you develop your own <a href="https://www.youtube.com/watch?v=XnqDEV21BSA">USB rubber ducky or USB keyboard with the ESP32</a>).</li><li><strong>ESP32-C2</strong> Old version of the ESP32-C3.</li><li><strong>ESP32-C3</strong> Ultra Low Power. Single core. Wi-Fi and Bluetooth LE. 16 GPIOs. Not as powerful as the S-Variants (e.g. the ESP32-S3).</li><li><strong>ESP32-C6</strong> If you need Wi-Fi 6 or ZigBee Support, this is the SoC you want to look for.</li></ul><p>So basically:</p><ul><li>If you want a very tiny board that runs on battery and doesn’t need much IO, go for an <strong>ESP-C3</strong>.</li><li>If you want to have<ul><li>AI support, or</li><li>camera support, or</li><li>a lot of IO (which communicates with different protocols), or</li><li>you don’t know what you are going to do with this board, or</li><li>you want to develop your own USB peripherals,</li><li>go for an <strong>ESP-S3</strong>.</li></ul></li></ul><p>For a more detailed comparison, check out <a href="https://gist.github.com/sekcompsci/2bf39e715d5fe47579fa184fa819f421">this comparison table</a>.</p><h2 id="board-recommendations">Board recommendations</h2><p>All selected boards come with a USB-C connector. I personally don’t buy things anymore that don’t have a USB-C Connector or AAA batteries in them.
This also means that they all have a Serial Adapter. You can plug them directly into your computer and flash them.</p><h3 id="esp32-c3">ESP32-C3</h3><ul><li><a href="https://www.wemos.cc/en/latest/c3/c3_pico.html">Wemos Lolin C3 Pico</a>. 25.4 x 25.4mm. 12 GPIO. 6 Analog Pins. Built-in Button. Built-in LED. Built-in battery support, charging the battery and measuring the battery’s voltage.</li><li><a href="https://www.adafruit.com/product/5405">Adafruit QT Py ESP32-C3 Wi-Fi Dev Board</a>. 22.0 x 17.8mm. 13 GPIO. 5 Analog Pins. Built-in Button. Built-in LED. Stemma QT Connector (see Sensors Section).</li></ul><h3 id="esp32-s3">ESP32-S3</h3><ul><li><a href="https://www.wemos.cc/en/latest/s3/s3_pro.html">Wemos Lolin S3 PRO</a>. 65.3 x 25.4mm. 25 GPIO. 17 Analog Pins. Built-in Button. Built-in LED. 8MB PSRAM. Built-in battery support. Built-in MicroSD Slot. Built-in Display Connector (nice to have, but you don’t need that to connect a display).</li><li><a href="https://www.adafruit.com/product/5477">Adafruit ESP32-S3 Feather</a>. 52.3 x 22.7mm. 21 GPIO. 6 Analog Pins. Built-in LED. 2MB PSRAM (you need that for the ESP32-Camera). Built-in battery support. Stemma QT Connector (see Sensors Section).</li></ul><p>I personally own the WEMOS Lolin D1 Mini v4 and the WEMOS Lolin C3 Mini Boards. I also bought the Wemos Lolin C3 Pico and S3 Pro Board, but they are currently stuck in shipping.</p><p>I personally wouldn’t recommend to buy the D1 Mini or the C3 Mini, because the C3 Pico packs more features in a smaller form factor.</p><p>In the <a href="https://news.ycombinator.com/item?id=34653729">HackerNews discussion</a>, some people also mentioned that they had good luck with buying cheap ESP32 boards on Amazon. So this could be an option as well.</p><h2 id="sensors-and-i2c">Sensors and I2C</h2><p>An ESP Board alone wouldn’t let you do much.
Luckily you can choose from a variety of different externals. When you’re looking for externals, I would recommend to look for the I2C protocol.
Why? I2C is an easy-to-use protocol on 4 Pins which supports multiple targets. This means you can put multiple sensors on the same 4 contacts and use them without a hassle. The 4 lines are:</p><ul><li>GND (Ground)</li><li>3.3V (in the case of the ESP32)</li><li>SDA (this is the data line)</li><li>SCL (clock line).</li></ul><p>Each sensor has its own address and listens only for packets with that address.</p><p>These 4 pins are also sometimes connected with cables called Stemma QT or Qwiic. These should not be compatible with the solution from Wemos.</p><p>If you want a functioning ecosystem of sensors, take a look at the <a href="https://www.adafruit.com/category/1005">system from Adafruit (Stemma QT)</a>. <em>I’ve never tried the Adafruit System, but they have awesome documentation.</em></p><h2 id="firmware">Firmware</h2><p>The ESP has no integrated firmware. You write your code with your development framework of your choice and this code is then compiled into a firmware (<a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/esptool/flashing-firmware.html">more info</a>). This firmware is then flashed to the ESP Chip with the help of a “burned into the chip” ROM bootloader (<a href="https://docs.espressif.com/projects/esptool/en/latest/esp32/esptool/flasher-stub.html">more info</a>).</p><p>So, all you need to do is choose the development framework of your choice. There is a variety of options (most of them I’ve never tried):</p><ul><li><a href="https://esphome.io">ESPHome</a> Specifically for a smart home, you configure a yaml file which is then compiled into a firmware.</li><li><a href="https://micropython.org/">MicroPython</a> You flash the MicroPython Firmware to the ESP32, and then you can deploy the code e.g. via a REPL live on the ESP32.</li><li><a href="https://www.arduino.cc/en/software">Arduino</a> You modify the Arduino IDE, and then you can flash your compiled firmware + code onto the ESP32.</li><li><a href="https://github.com/espressif/esp-idf">ESP-IDF</a> The official Development Framework. Again, you compile the firmware + code and then flash it to the ESP32.</li><li>…</li></ul><h3 id="my-recommendation--my-way">My recommendation / My Way</h3><p>I personally use <a href="https://platformio.org/">PlatformIO</a>. It’s not a firmware but instead software helpers to deploy the firmware. You can choose between the ESP-IDF or the Arduino Development Framework.
It brings support for your favourite IDE like VSCode or CLion. Of course real men use CLion (that’s a joke; use whatever you want). If you go the Arduino way, you don’t have to use the Arduino IDE but instead an IDE with real auto-completion.</p><p><strong>How to do it:</strong></p><ul><li>Install Platform IO Core</li><li>Install Extension of pio (Platform IO) in your favourite IDE.</li><li>Clone an <a href="https://github.com/platformio/platform-espressif32/tree/master/examples">example project</a></li><li>Configure your platformio.ini file to your needs (or more specific: the need of your board[s])</li></ul><div><pre tabindex="0"><code data-lang="ini"><span><span><span>[env:lolin_c3_mini]</span>
</span></span><span><span><span>platform</span> <span>=</span> <span>espressif32</span>
</span></span><span><span><span>board</span> <span>=</span> <span>lolin_c3_mini</span>
</span></span><span><span><span>framework</span> <span>=</span> <span>arduino</span>
</span></span><span><span><span>build_flags</span> <span>=</span> <span>-DCORE_DEBUG_LEVEL=5</span>
</span></span><span><span><span>lib_deps</span> <span>=</span>
</span></span><span><span><span>; MQTT Library</span>
</span></span><span><span>    <span>knolleary/PubSubClient@^2.8</span>
</span></span><span><span>
</span></span><span><span><span>; TVOC &amp; eCO2</span>
</span></span><span><span>    <span>adafruit/Adafruit SGP30 Sensor@^2.0.0</span>
</span></span><span><span>
</span></span><span><span><span>; Temp &amp; Humidity</span>
</span></span><span><span>    <span>wemos/WEMOS SHT3x@^1.0.0</span>
</span></span><span><span>
</span></span><span><span><span>; Pressure</span>
</span></span><span><span>    <span>https://github.com/wemos/LOLIN_HP303B_Library#4deb5f568d4991abda28f716127946e6607bce6e</span>
</span></span><span><span>
</span></span><span><span><span>; Light</span>
</span></span><span><span>    <span>claws/BH1750@^1.3.0</span>
</span></span><span><span>
</span></span><span><span><span>; Software Serial Library Needed for AirGradient</span>
</span></span><span><span>    <span>plerup/EspSoftwareSerial@^6.16.1</span>
</span></span><span><span>
</span></span><span><span><span>; Display Library</span>
</span></span><span><span>    <span>thingpulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.3.0</span>
</span></span><span><span>    <span>adafruit/Adafruit GFX Library@^1.11.3</span>
</span></span><span><span>    <span>https://github.com/wemos/LOLIN_EPD_Library#100a6c8bd1dedd6768aa06faa5ae6e5fbc3ca67e</span>
</span></span><span><span>
</span></span><span><span><span>lib_ldf_mode</span> <span>=</span> <span>deep</span>
</span></span></code></pre></div><ul><li>Run <code>pio run -e lolin_c3_mini -t upload</code> for flashing the ESP32</li><li>Run <code>pio device monitor</code> to see the Serial Output (for Debugging Code).</li></ul><p>The <code>platformio.ini</code> example from above is from <a href="https://github.com/eitherway/lollidisplay">my project</a> and is configured for a Lolin C3 Mini Board.</p><h2 id="my-recent-project">My recent project</h2><figure><img src="https://eitherway.io/img/posts/esp32/lollidisplay-example.png" alt="Lollidisplay Example Image"/></figure><p>I built a little project which measures humidity, temperature, light and CO2.</p><p>The data is then displayed on the ePaper and sent to a central server for collection. The display also shows me the current weather report.</p><p>If you want more information about this project, check the <a href="https://github.com/eitherway/lollidisplay">GitHub Repo</a> or shoot me an email, and I will write a detailed post about it.</p><p>The code is not perfect (and was never meant to be published, but here we are), but you can look at it to get an idea how to code these ESPs. Enjoy!</p></div></div>
  </body>
</html>
