<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/scrtwpns/pigment-mixing">Original</a>
    <h1>Mixbox: Practical pigment mixing for digital painting</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/ff29c6889f12421528959800c1b437b98ea37287ed804543b8df98c475602917/68747470733a2f2f7363727477706e732e636f6d2f6d6978626f782f7465617365722e6a7067"><img src="https://camo.githubusercontent.com/ff29c6889f12421528959800c1b437b98ea37287ed804543b8df98c475602917/68747470733a2f2f7363727477706e732e636f6d2f6d6978626f782f7465617365722e6a7067" data-canonical-src="https://scrtwpns.com/mixbox/teaser.jpg"/></a>
</p>
<p dir="auto">Mixbox is a pigment mixing black-box. You pass RGB colors in and get the mixed RGB out.
Internally, Mixbox treats the colors as if they were made of actual real-world pigments.
It uses the Kubelka &amp; Munk theory to predict the color of the resulting mixture.
This way, Mixbox achieves that blue and yellow mix to green, the same way real pigments do.</p>
<ul dir="auto">
<li>Paper: <a href="https://scrtwpns.com/mixbox.pdf" rel="nofollow">https://scrtwpns.com/mixbox.pdf</a><br/></li>
<li>Video: <a href="https://youtu.be/ATzVPVNp1qA" rel="nofollow">https://youtu.be/ATzVPVNp1qA</a><br/></li>
<li>Talk: <a href="https://youtu.be/_qa5iWdfNKg" rel="nofollow">https://youtu.be/_qa5iWdfNKg</a><br/></li>
<li>Demo: <a href="https://scrtwpns.com/mixbox/painter" rel="nofollow">https://scrtwpns.com/mixbox/painter</a><br/></li>
</ul>
<p dir="auto">Mixbox is shipping in Rebelle 5 Pro as the <a href="https://www.escapemotions.com/products/rebelle/about" rel="nofollow">Rebelle Pigments</a> feature.</p>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<p dir="auto">The simplest way to use Mixbox is with the <em>lerp</em> interface:</p>
<div data-snippet-clipboard-copy-content="#include &lt;stdio.h&gt;
#include &#34;mixbox.h&#34;

int main()
{
  unsigned char r1=252, g1=211, b1=0;  // bright yellow
  unsigned char r2=0,   g2=0,   b2=96; // deep blue
  float t = 0.5;
  unsigned char r,g,b;
  
  mixbox_lerp_srgb8(r1,g1,b1,   // first color
                    r2,g2,b2,   // second color
                    t,          // mixing ratio
                    &amp;r,&amp;g,&amp;b);  // result

  printf(&#34;%d %d %d\n&#34;,r,g,b);
}"><pre>#<span>include</span> <span><span>&lt;</span>stdio.h<span>&gt;</span></span>
#<span>include</span> <span><span>&#34;</span>mixbox.h<span>&#34;</span></span>

<span>int</span> <span>main</span>()
{
  <span>unsigned</span> <span>char</span> r1=<span>252</span>, g1=<span>211</span>, b1=<span>0</span>;  <span><span>//</span> bright yellow</span>
  <span>unsigned</span> <span>char</span> r2=<span>0</span>,   g2=<span>0</span>,   b2=<span>96</span>; <span><span>//</span> deep blue</span>
  <span>float</span> t = <span>0.5</span>;
  <span>unsigned</span> <span>char</span> r,g,b;
  
  <span>mixbox_lerp_srgb8</span>(r1,g1,b1,   <span><span>//</span> first color</span>
                    r2,g2,b2,   <span><span>//</span> second color</span>
                    t,          <span><span>//</span> mixing ratio</span>
                    &amp;r,&amp;g,&amp;b);  <span><span>//</span> result</span>

  <span>printf</span>(<span><span>&#34;</span>%d %d %d<span>\n</span><span>&#34;</span></span>,r,g,b);
}</pre></div>
<p dir="auto">Alternatively, one can use the <em>latent</em> interface. This allows mixing multiple RGB colors at once using arbitrary weights:</p>
<div data-snippet-clipboard-copy-content="float latent1[MIXBOX_NUMLATENTS];
float latent2[MIXBOX_NUMLATENTS];
float latentMix[MIXBOX_NUMLATENTS];

mixbox_srgb8_to_latent(r1,g1,b1,latent1);
mixbox_srgb8_to_latent(r2,g2,b2,latent2);

for(int i=0;i&lt;MIXBOX_NUMLATENTS;i++)
{ 
  latentMix[i] = (1.0f-t)*latent1[i] + t*latent2[i]; 
}

mixbox_latent_to_srgb8(latentMix,&amp;r,&amp;g,&amp;b);  "><pre><span>float</span> latent1[MIXBOX_NUMLATENTS];
<span>float</span> latent2[MIXBOX_NUMLATENTS];
<span>float</span> latentMix[MIXBOX_NUMLATENTS];

<span>mixbox_srgb8_to_latent</span>(r1,g1,b1,latent1);
<span>mixbox_srgb8_to_latent</span>(r2,g2,b2,latent2);

<span>for</span>(<span>int</span> i=<span>0</span>;i&lt;MIXBOX_NUMLATENTS;i++)
{ 
  latentMix[i] = (<span>1</span>.<span>0f</span>-t)*latent1[i] + t*latent2[i]; 
}

<span>mixbox_latent_to_srgb8</span>(latentMix,&amp;r,&amp;g,&amp;b);  </pre></div>
<h2 dir="auto"><a id="user-content-demo" aria-hidden="true" href="#demo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demo</h2>
<p dir="auto">
  <a href="https://scrtwpns.com/mixbox/painter" rel="nofollow"><img src="https://camo.githubusercontent.com/009979b59f358b615ee860364dae1672171889ac6232133820a4111712fe8cc7/68747470733a2f2f7363727477706e732e636f6d2f6d6978626f782f7061696e7465725f6769742e6a7067" data-canonical-src="https://scrtwpns.com/mixbox/painter_git.jpg"/></a>
</p>
This is a toy painting app with soft round brush and a smudge tool. It runs two color mixing implementations in parallel: one based on Mixbox and the other that performs ordinary RGB mixing. The app allows switching between them on the fly, showing the differences between pigment-based mixing and the normal RGB mixing. To launch the demo in your browser, please <a href="https://scrtwpns.com/mixbox/painter" rel="nofollow">click here</a>.
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Copyright (c) 2022, Secret Weapons. All rights reserved.</p>
</article>
        </div></div>
  </body>
</html>
