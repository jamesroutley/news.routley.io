<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://xahlee.info/comp/ocaml_let_syntax.html">Original</a>
    <h1>OCaml Syntax Sucks</h1>
    
    <div id="readability-page-1" class="page"><div>





<p>OCaml&#39;s <code> let <var>…</var> = <var>…</var> in <var>…</var></code> is very confusing. When nested, you can&#39;t tell how it&#39;s nested.</p>

<pre>let wafin fd ?pos ?len buf = let loc = <span>&#34;wafin&#34;</span> in let pos = gop ~loc pos in let len = gol buf ~pos len in csa ~loc buf ~pos ~len; uw fd buf ~pos ~len ;;</pre>

<p>another problem is that you have global and local declaration with the same syntax, but no bracket to indicate scope. Example:</p>

<ul>
<li><code>let <var>…</var> = <var>…</var></code></li>
<li><code>let <var>…</var> = <var>…</var> in <var>…</var></code></li>
</ul>

<p>another problem is that function definition also uses the same syntax.
Example:</p>

<ul>
<li><code>let a = <var>…</var></code> → ( constant, or function of no arg )</li>
<li><code>let a b = <var>…</var></code> → ( function with 1 arg )</li>
<li><code>let a b c = <var>…</var></code> → ( function with 2 args )</li>
</ul>

<p>though the last point is consistent, because a 0 arity function without side-effect is just constant.</p>

<p>but the effect of all these is that in a ocaml source code you&#39;ll have nested let of the above. Quite confusing to read.</p>

<h2>MetaLanguage has an “end”</h2>

<p>In OCaml&#39;s parent language ML, it has a “end”, like this:</p>

<p><code> let <var>…</var> = <var>…</var> in <var>…</var> end</code></p>

<p>This is better in the sense that it more clearly indicates the begin and end points of the expression.</p>

<p>Not really better in practice because now it&#39;s more typing.</p>

<p>The advantage of clearer indication of nesting doesn&#39;t really apply, because in practice, the code is broken down to lines, with proper indentation.</p>

<p>see also
<a href="http://xahlee.info/comp/language_syntax_brackets_vs_begin_end.html">Nested Syntax: Brackets vs Begin/End vs Indentation</a></p>

<h2>History of OCaml Syntax, and The Next 700 Programming Languages</h2>

<figure>
<img src="http://xahlee.info/comp/i/ocaml_haskell_ISWIM.png" alt="ocaml haskell ISWIM" width="989" height="754"/>
</figure>

<p>Here is the lineage of OCaml&#39;s syntax:</p>

<ul>
<li>ISWIM (1966)</li>
<li>ML (1973)</li>
<li>Caml (1985)</li>
<li>OCaml (1996)</li>
</ul>

<p>Note that OCaml syntax came from ML, and ML syntax came from a article describing an ideal language called ISWIM, described in the paper:</p>

<p><a href="http://xahlee.info/comp/ocaml_haskell_syntax_history.html">History of OCaml and Haskell Syntax, and The Next 700 Programming Languages</a></p>

<h2>What Could be Better?</h2>

<p>So, if we stick with OCaml/ML&#39;s style of syntax, what could be better for the “let” syntax?</p>

<p>That&#39;s a hard question, because ML syntax is really a odd ball. It somewhat wanted to be like English.</p>

<p>Then, we trace its history, indeed, in ISWIM, it seems to be one man&#39;s
whim where it espouses a notation that&#39;s half English, half math notation,
and intended to be the syntax for the next seven hundred languages.</p>

<h2>Facebook Fix to OCaml Syntax</h2>

<p>If we do not stick to OCaml style of syntax, then, there&#39;s 2 obvious possibilities.
One is going with lisp. Another, is going with C-syntax.</p>

<p>Facebook created Reason, which is OCaml in JavaScript syntax.
<a href="https://reasonml.github.io/" data-accessed="2018-01-08" target="_blank" rel="noreferrer">https://reasonml.github.io/</a></p>

<p>See also:
<a href="http://xahlee.info/ocaml/ocaml.html">OCaml Tutorial</a></p>



</div></div>
  </body>
</html>
