<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.righto.com/2022/04/inside-apple-1s-shift-register-memory.html">Original</a>
    <h1>The Apple-1&#39;s shift-register memory</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-6988848721781537170" itemprop="description articleBody">


<p>Apple&#39;s first product was the Apple-1 computer, introduced exactly 46 years ago, on April 11, 1976. 
This early microcomputer used an unusual type of storage for its display: shift register memory.
Instead of storing data in RAM (random-access memory), it was stored
in a 1024-position shift register.
You put a bit into the shift register and 1024 clock cycles later, the bit pops out the other end.
In the early days of random-access memory chips, shift-register memory was cheaper so many systems used it.<span id="fnref:cost"><a href="#fn:cost">1</a></span>
The downside, of course, is that you had to use bits as they became available, rather than access arbitrary memory locations.<span id="fnref:delay"><a href="#fn:delay">2</a></span></p>
<!-- 2504 (1 kilobit shift register) cost $9 in 1976 (Byte, March, p89).
-->

<!-- http://www.bitsavers.org/components/national/_appNotes/AN-0076.pdf -->

<p><a href="https://static.righto.com/images/apple-shift-reg/die.jpg"><img alt="Die of the Signetics 2504 shift register chip. Click this image (or any other) for a larger version." height="418" src="https://static.righto.com/images/apple-shift-reg/die-w500.jpg" title="Die of the Signetics 2504 shift register chip. Click this image (or any other) for a larger version." width="500"/></a></p><p>Die of the Signetics 2504 shift register chip. Click this image (or any other) for a larger version.</p>
<p>The photo above shows the chip under the microscope.
The underlying silicon is grayish, with white metal wiring on top.
The thickest metal wiring provides power to the chip.
The chip also has wiring and transistors constructed from a type of silicon called polysilicon; the polysilicon
appears red in the photo.
Most of the die is occupied by the shift register, arranged in
rows that snake back and forth.
The squares around the edge of the die are bond pads, where bond wires connect the die to the chip&#39;s external pins.<span id="fnref:epoxy"><a href="#fn:epoxy">3</a></span></p>
<h2>The Apple-1&#39;s display</h2>
<p>The Apple-1 displayed 24 lines of forty characters on a television monitor.
Like most computers at the time, the Apple-1 stored characters rather than pixels to reduce memory requirements.
A <a href="http://amigan.yatho.com/2513.pdf">character-generation ROM</a> converted each character into a 5×7 matrix of pixels as it was displayed.
To reduce memory even more, the display didn&#39;t store full bytes, but 6-bit characters, supporting upper-case letters, numbers, and
some symbols.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/apple1.jpg"><img alt="The Apple-1 computer was sold as a circuit board. The user had to supply a keyboard, power supply, display, and case. Photo by Cynde Moya, CC BY-SA 4.0." height="387" src="https://static.righto.com/images/apple-shift-reg/apple1-w400.jpg" title="The Apple-1 computer was sold as a circuit board. The user had to supply a keyboard, power supply, display, and case. Photo by Cynde Moya, CC BY-SA 4.0." width="400"/></a></p><p>The Apple-1 computer was sold as a circuit board. The user had to supply a keyboard, power supply, display, and case. Photo by <a href="https://commons.wikimedia.org/wiki/File:LCM%2BL_Working_Apple_I.jpg">Cynde Moya</a>, <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA 4.0</a>.</p>
<p>The six-bit display characters were held in six 1024-bit shift registers. A seventh shift register tracked the cursor position.<span id="fnref:display"><a href="#fn:display">4</a></span>
The diagram below shows the shift registers and the clock driver on the Apple-1 circuit board. These chips are in 8-pin packages,
so two chips fit into the space of a regular TTL chip.<span id="fnref:tv-typewriter"><a href="#fn:tv-typewriter">5</a></span></p>
<p><a href="https://static.righto.com/images/apple-shift-reg/board-labeled.jpg"><img alt="Apple-1 circuit board, showing the 1024-bit shift register chips and the clock driver chip.
Original image from
Achim Baqué, CC BY-SA 4.0." height="384" src="https://static.righto.com/images/apple-shift-reg/board-labeled-w600.jpg" title="Apple-1 circuit board, showing the 1024-bit shift register chips and the clock driver chip.
Original image from
Achim Baqué, CC BY-SA 4.0." width="600"/></a></p><p>Apple-1 circuit board, showing the 1024-bit shift register chips and the clock driver chip.
Original image from
<a href="https://commons.wikimedia.org/wiki/File:CopsonApple1_2k_cropped.jpg">Achim Baqué</a>, <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">CC BY-SA 4.0</a>.</p>
<p>The image below shows how the 2504 shift register chips are represented on the
<a href="http://www.bitsavers.org/pdf/apple/apple_I/AppleI_Manual.pdf">Apple-1 schematic</a>.
The chips use just 6 pins.
Each chip has a single connection for bits coming in and a connection for the bits coming out.
The remaining pins provide the two clock signals and the ±5 volt power supplies.
Unlike RAM chips, these chips do not take an address.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/apple-schematic.png"><img alt="Detail of the Apple-1 schematic showing two of the shift register chips." height="251" src="https://static.righto.com/images/apple-shift-reg/apple-schematic-w250.png" title="Detail of the Apple-1 schematic showing two of the shift register chips." width="250"/></a></p><p>Detail of the Apple-1 <a href="http://www.bitsavers.org/pdf/apple/apple_I/AppleI_Manual.pdf">schematic</a> showing two of the shift register chips.</p>
<h2>PMOS integrated circuits</h2>
<p>This shift register chip was created around 1970, an interesting time in the development of MOS integrated circuits.
Early integrated circuits used a type of transistor known as bipolar.
However, the metal-oxide-semiconductor (MOS) transistor had the potential to make cheaper, high-density integrated circuits.
The first commercial MOS integrated circuit was a 20-bit shift register, created in <a href="https://www.computerhistory.org/siliconengine/first-commercial-mos-ic-introduced/">1964</a> by a company called General Microelectronics.</p>
<p>The diagram below shows the structure of a MOS transistor. At the bottom is the silicon, which is doped with impurities
to form p-type silicon.
The two conductive p-type regions are called the transistor&#39;s source and drain.
The channel acts as a switch between the source and drain, turned on by voltage in the metal gate above.
A thin insulating oxide layer separates the metal gate from the underlying silicon.
These three layers—metal, oxide, semiconductor— give the MOS transistor its name.
In the late 1960s, chips started to use gates made of polysilicon, a special type of silicon that produced better transistors
than metal gates.
This is the technology used by the 2504 shift register: the &#34;P-MOS silicon gate process&#34;.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/mosfet.jpg"><img alt="Structure of a P-type MOSFET." height="260" src="https://static.righto.com/images/apple-shift-reg/mosfet-w450.jpg" title="Structure of a P-type MOSFET." width="450"/></a></p><p>Structure of a P-type MOSFET.</p>
<p>By the mid-1970s, however, integrated circuits changed in two more ways.
First, P-MOS transistors were replaced by N-MOS transistors, which had better performance.
Second, the introduction of ion implantation machines allowed transistor characteristics to be adjusted, with &#34;depletion-mode&#34; transistors<span id="fnref:depletion"><a href="#fn:depletion">8</a></span> leading to faster, lower-power circuitry. 
These changes ushered in the age of popular microprocessors such as the Zilog Z80, MOS Technology 6502, and Intel 8085.
These had much better performance than earlier PMOS processors such as the Intel 8008.<span id="fnref:cmos"><a href="#fn:cmos">7</a></span>
The 6502, of course, was the processor in the Apple-1 (and Apple II).</p>
<h2>The shift register</h2>
<p>Next, I&#39;ll look at the details of how the shift register was constructed.
The idea of a shift register is that bits are passed from stage to stage, controlled by clock pulses.
With 1024 stages, the shift register can hold 1024 bits.
Each shift register stage uses two transistors and two inverters as shown below.
During the first clock phase, the first transistor turns on, allowing the input bit to pass through it and the first inverter.
During the second clock phase, the second transistor turns on, allowing the inverted value to pass through it and the second
inverter, producing the output.
Thus, a bit takes two clock phases to move through the shift register stage.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/shift-register-stage.png"><img alt="In the first clock phase, the input passes through the first transistor. In the second clock phase, the input is held by the gate capacitance and passes to the output." height="348" src="https://static.righto.com/images/apple-shift-reg/shift-register-stage-w400.png" title="In the first clock phase, the input passes through the first transistor. In the second clock phase, the input is held by the gate capacitance and passes to the output." width="400"/></a></p><p>In the first clock phase, the input passes through the first transistor. In the second clock phase, the input is held by the gate capacitance and passes to the output.</p>
<p>This circuit is a <em>dynamic</em> shift register, which works due to the circuit&#39;s capacitance.
When the first transistor turns off, the value
remains at the input to the first inverter, held by the capacitance of the circuit.
(And likewise for the second transistor.)
Because the gate of a MOSFET uses almost no current, the bit value will remain for a couple of milliseconds or so before it
drains away. (This is the same principle used by DRAM, holding bits through capacitance.)
As long as the clock keeps going, the bit gets refreshed by each stage.</p>
<p>Each inverter is implemented using two MOS transistors.
The concept is shown on the left, below.
A high input turns on the transistor, which pulls the output low.
A low input turns off the transistor allowing the pull-up resistor to pull the output high.
Thus, the circuit inverts its input.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/inverter.png"><img alt="Conceptually, the inverter uses the circuit on the left. The implementation uses the circuit on the right." height="187" src="https://static.righto.com/images/apple-shift-reg/inverter-w400.png" title="Conceptually, the inverter uses the circuit on the left. The implementation uses the circuit on the right." width="400"/></a></p><p>Conceptually, the inverter uses the circuit on the left. The implementation uses the circuit on the right.</p>
<p>The circuit is actually implemented with a transistor in place of the resistor, as shown on the right, because transistors are more compact than resistors.
A high input to the upper transistor turns it on, causing the pull-up current to flow.
In a standard inverter, the transistor would be connected to be always on.<span id="fnref:short"><a href="#fn:short">9</a></span>
However, the output of the inverter is only used during one clock phase.
To reduce power consumption, the transistor is wired to the clock so it only acts as a pull-up when needed.</p>
<h2>A shift-register stage on the die</h2>
<p>The diagram below shows how shift-register stages are physically constructed on the die.
The first part of the image shows how the circuitry appears under the microscope, a complicated jumble of silicon, polysilicon,
and metal circuitry.
In the middle, I&#39;ve highlighted the doped silicon in green and the polysilicon in red. A transistor gate (yellow) is formed where polysilicon
crosses silicon, with the source and drain on either side.
(The horizontal metal wiring should be clear without highlighting.)
Note the complex, optimized shapes of the polysilicon and the transistors.
Finally, a black dot indicates a contact that connects two layers.
In the bottom half of the image, bits are shifted to the right, while in the top half, bits are shifted to the left.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/die-stage-labeled.jpg"><img alt="One stage of the shift register." height="425" src="https://static.righto.com/images/apple-shift-reg/die-stage-labeled-w600.jpg" title="One stage of the shift register." width="600"/></a></p><p>One stage of the shift register.</p>
<p>In the lower right, one stage of the shift register is represented by a schematic on top of the underlying circuitry.
The stage is implemented with six transistors as described earlier.
Note that the pull-up transistors to Vdd are long and skinny, reducing their current.
The inverter transistors to Vcc, on the other hand, are wide, so they provide a lot of current.
The circuitry in the top half of the image is the same, but rotated 180°.
Note that the two rows of shift registers share the clock phase lines and Vdd, making the layout more efficient.<span id="fnref:schematic"><a href="#fn:schematic">6</a></span></p>
<h2>Topology of the chip</h2>
<p>You might expect the chip to consist of 1024 shift-register stages arranged into a chain.
However, the chip had an unusual topology that allowed it to operate at double speed: one bit per clock phase instead of one bit per
complete clock cycle.
It accomplished this with a simple trick: it was really two 512-bit shift registers operating in parallel.
The first operated on clock phase 1, phase 2, phase 1, ..., while the second was the opposite: phase 2, phase 1, phase 2, ...
The result was that one half would produce bits in phase 1, while the other would produce bits in phase 2.
The output circuit merged these together into a single output stream.
From the outside, it looked like a 1024-bit shift register that operated twice as fast.</p>
<p>Another complication is that 
Signetics produced three 1024-bit shift register chips from the same silicon layout: the 2502 (organized as four 256-bit shift registers), the 2503 (512×2), and the Apple-1&#39;s 2504 (1024×1).
The different chips were created by changing the metal wiring of the chip during manufacturing, which was much easier than building completely different chips.
To support this, the shift register was broken into eight 128-bit segments, shown below.
In the 1024×1 chip, two chains of four 128-bit segments ran in parallel (on opposite clock phases) to
produce a 1024-bit shift register.
The first chain used the light-colored segments A, B, C, D, while the second chain used the dark-colored segments.
The segments are connected by the metal wiring along the side of the die.
The chip&#39;s pads around the edges are labeled; the grayed-out ones are not used in this chip.
The large block of circuitry above the output pin combines the two chains into one output.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/topology.jpg"><img alt="The chip consists of 8 shift-register chains, each 128 bits long. They are connected in different ways to form different shift register chips." height="522" src="https://static.righto.com/images/apple-shift-reg/topology-w600.jpg" title="The chip consists of 8 shift-register chains, each 128 bits long. They are connected in different ways to form different shift register chips." width="600"/></a></p><p>The chip consists of 8 shift-register chains, each 128 bits long. They are connected in different ways to form different shift register chips.</p>
<p>The other variants of the chip wire the shift-register segments differently and use additional input and output pins.
The 512×2 2503 chip used four chains of 256 bits along with two input and output circuits.
The 2502B chip used all eight 128-bit chains in parallel to form a 256×4 shift register, with four
input and output circuits.<span id="fnref:2502B"><a href="#fn:2502B">10</a></span></p>
<p>The image below shows one of the unconnected outputs: the red polysilicon wire isn&#39;t connected at one end.
With a small change to the metal layer, the metal wiring between two segments can be broken and the segment wired to this output instead.
The other changes between chip versions are similar.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/unconnected.jpg"><img alt="The polysilicon wire in the middle is disconnected." height="155" src="https://static.righto.com/images/apple-shift-reg/unconnected-w250.jpg" title="The polysilicon wire in the middle is disconnected." width="250"/></a></p><p>The polysilicon wire in the middle is disconnected.</p>
<h2>The clock driver</h2>
<p>I&#39;ll wrap up with a brief mention of the clock driver chip that drives the shift registers.
Shift-register memory chips required clock pulses with high current and unusual voltages due to the PMOS circuitry: from +5 volts to -11 volts.
These pulses were provided by a special chip, the DS0025 Two-Phase MOS Clock Driver.
The die photo below shows this chip. The die is dominated by four power transistors that produced 1.5 amp pulses.
I wrote a <a href="https://www.righto.com/2022/03/inside-apple-1s-unusual-mos-clock.html">blog post</a> about the clock driver chip
if you want more details.</p>
<p><a href="https://static.righto.com/images/apple-shift-reg/driver-die.jpg"><img alt="Die photo of the DS0025 clock driver chip." height="342" src="https://static.righto.com/images/apple-shift-reg/driver-die-w500.jpg" title="Die photo of the DS0025 clock driver chip." width="500"/></a></p><p>Die photo of the DS0025 clock driver chip.</p>
<h2>Conclusion</h2>
<p>The Apple-1 is now a collector&#39;s item, with boards selling for hundreds of thousands of dollars.
However, when it was introduced in 1976, it wasn&#39;t a particularly important computer, with <a href="https://www.apple1registry.com/en/theapple1.html">about 200</a> sold at the price of $666.66.
The Apple II, which came out a year later in 1977, was a much more influential computer, selling millions to become one of the archetypical home
computers of that era.
The Apple II used RAM chips for all its storage, illustrating that shift-register memory had rapidly become obsolete.</p>
<p>The shift-register chip illustrates the amazing decline in memory prices, as reflected by Moore&#39;s Law.
This 1-kilobit shift register cost about $60 (in current dollars), while a 16-gigabit DRAM chip now <a href="https://www.trendforce.com/price">costs</a> about $6.
Thus, memory is about 160 million times cheaper now, an amazing drop.</p>
<p>I announce my latest blog posts on Twitter, so follow me <a href="https://twitter.com/kenshirriff">@kenshirriff</a>. I also have an <a href="https://www.righto.com/feeds/posts/default">RSS feed</a>.
Thanks to <a href="https://twitter.com/TubeTimeUS">@TubeTimeUS</a> for supplying the chip.
I&#39;ve written about the <a href="https://www.righto.com/2014/12/inside-intel-1405-die-photos-of-shift.html">Intel 1405 shift register memory</a> if you want to know more about this type of storage.</p>
<h2>Notes and references</h2>


</div></div>
  </body>
</html>
