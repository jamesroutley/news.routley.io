<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://bensch.ac/blog/how-to-configure-and-package-fonts-with-tamagui">Original</a>
    <h1>How to Configure and Package Fonts with Tamagui and Next.js</h1>
    
    <div id="readability-page-1" class="page"><div><div bordercurve="continuous"><div><p text-rendering="optimizelegibility">Documenting my journey for both my future self and others who might run into the same problem.</p>
<h2 role="heading" text-rendering="optimizelegibility">Problem</h2>
<p text-rendering="optimizelegibility">I was trying to add a font using Tamagui&#39;s font generation tool, but, the correct font wasn&#39;t being rendered to the (this) website. It took a good bit of trail and error to figure out what was going on, and how to fix it.</p>
<p text-rendering="optimizelegibility">Importing both the correct font files for web, mobile and general configuration is tetious, and error prone and just generally something that most developers don&#39;t want to spend time on.</p>
<p text-rendering="optimizelegibility">After digging around the generated package a bit, there were a couple of issues that stuck out:</p>
<p text-rendering="optimizelegibility">Only <span>.ttf</span> files were generated and packaged. For web projects <span>.woff2</span> files are generally the best option, <a href="https://fonts.google.com/knowledge/glossary/web_font">for many reasons</a>.
There was no <span>.css</span> files generated or rendered with the page.
There are a couple of hardcoded css variables that are used in the generated package.
Only the <span>font-family</span> was added to the component without changing the actual font being rendered to the screen.</p>
<h3 role="heading" text-rendering="optimizelegibility">Using the correct file type</h3>
<p text-rendering="optimizelegibility">For web using the <span>.woff2</span> file type is the most performant, and generally the best option. For mobile, using the <span>.otf</span> file type.</p>
<h2 role="heading" text-rendering="optimizelegibility">Looking into how Tamagui configures fonts</h2>
<p text-rendering="optimizelegibility">The <span>@tamagui/inter</span> package that is shipped by default was my starting place after trying to configure fonts generated with the tamagui cli tool.</p>
<h2 role="heading" text-rendering="optimizelegibility">Digging into <span>@tamagui/inter</span></h2>
<p text-rendering="optimizelegibility">There were a couple of things that I noticed that were different from the generated package and the <span>@tamagui/inter</span> package.</p>
<p text-rendering="optimizelegibility">Fonts are <span>base64</span> via <span>subset.ts</span> encoding for the fonts, which is generally <a href="https://csswizardry.com/2017/02/base64-encoding-and-performance/">not recommended</a>.
It exported a <span>css</span> file that was imported into the project.</p>
<h2 role="heading" text-rendering="optimizelegibility">Looking at the Tamagui.dev website source code</h2>
<p text-rendering="optimizelegibility"><span>cmd + shift + u</span> and searching on <span>.woff2</span>, fonts are being loaded from <span>public/</span> and served like any regular font.</p>
<h2 role="heading" text-rendering="optimizelegibility">Base64 encoding</h2>
<p text-rendering="optimizelegibility">I did a bit of searching and didn&#39;t find a compelling reason to use base64 encoding for fonts. <a href="https://csswizardry.com/2017/02/base64-encoding-and-performance/">It&#39;s generally not recommended, and can cause performance issues</a>.</p>
<h2 role="heading" text-rendering="optimizelegibility">Solution</h2>
<p text-rendering="optimizelegibility">Add <a href="https://nextjs.org/docs/app/building-your-application/optimizing/fonts"><span>next/font</span></a> to your <span>_app.tsx</span> file.
Add a className and font variable in your root.
Pull out a generic <span>createFont</span> function from <span>@tamagui/inter</span> and use it in your project.</p>
<pre><p><code><span><span>import</span><span> </span><span>&#39;@tamagui/core/reset.css&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>Source_Serif_4</span><span>,</span><span> </span><span>EB_Garamond</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;next/font/google&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>&#39;raf/polyfill&#39;</span><span>
</span></span><span>
</span><span><span></span><span>import</span><span> </span><span>React</span><span>,</span><span> </span><span>{</span><span> </span><span>ReactElement</span><span>,</span><span> </span><span>ReactNode</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;react&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>Head</span><span> </span><span>from</span><span> </span><span>&#39;next/head&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>GoogleAnalytics</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@next/third-parties/google&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>NextThemeProvider</span><span>,</span><span> useRootTheme </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@tamagui/next-theme&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>Provider</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;app/provider&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>AppProps</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;next/app&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>NextPage</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;next&#39;</span><span>
</span></span><span>
</span><span><span></span><span>import</span><span> </span><span>type</span><span> </span><span>{</span><span> </span><span>SolitoAppProps</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;solito&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> isWeb </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;tamagui&#39;</span><span>
</span></span><span>
</span><span><span></span><span>if</span><span> </span><span>(</span><span>process</span><span>.</span><span>env</span><span>.</span><span>NODE_ENV</span><span> </span><span>===</span><span> </span><span>&#39;production&#39;</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>require</span><span>(</span><span>&#39;../public/tamagui.css&#39;</span><span>)</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span>
</span><span><span></span><span>export</span><span> </span><span>type</span><span> </span><span>NextPageWithLayout</span><span>&lt;</span><span>P</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>,</span><span> </span><span>IP</span><span> </span><span>=</span><span> </span><span>P</span><span>&gt;</span><span> </span><span>=</span><span> </span><span>NextPage</span><span>&lt;</span><span>P</span><span>,</span><span> </span><span>IP</span><span>&gt;</span><span> </span><span>&amp;</span><span> </span><span>{</span><span>
</span></span><span><span>  getLayout</span><span>?</span><span>:</span><span> </span><span>(</span><span>page</span><span>:</span><span> </span><span>ReactElement</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>ReactNode</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span>
</span><span><span></span><span>export</span><span> </span><span>type</span><span> </span><span>AppPropsWithLayout</span><span> </span><span>=</span><span> </span><span>AppProps</span><span> </span><span>&amp;</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>Component</span><span>:</span><span> </span><span>NextPageWithLayout</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span><span></span><span>const</span><span> bodyFont </span><span>=</span><span> </span><span>Source_Serif_4</span><span>(</span><span>{</span><span>
</span></span><span><span>  subsets</span><span>:</span><span> </span><span>[</span><span>&#39;latin&#39;</span><span>]</span><span>,</span><span>
</span></span><span><span>  display</span><span>:</span><span> </span><span>&#39;swap&#39;</span><span>,</span><span>
</span></span><span><span>  variable</span><span>:</span><span> </span><span>&#39;--my-body-font&#39;</span><span>,</span><span>
</span></span><span><span></span><span>}</span><span>)</span><span>
</span></span><span>
</span><span><span></span><span>const</span><span> displayFont </span><span>=</span><span> </span><span>EB_Garamond</span><span>(</span><span>{</span><span>
</span></span><span><span>  subsets</span><span>:</span><span> </span><span>[</span><span>&#39;latin&#39;</span><span>]</span><span>,</span><span>
</span></span><span><span>  display</span><span>:</span><span> </span><span>&#39;swap&#39;</span><span>,</span><span>
</span></span><span><span>  variable</span><span>:</span><span> </span><span>&#39;--my-display-font&#39;</span><span>,</span><span>
</span></span><span><span></span><span>}</span><span>)</span><span>
</span></span><span>
</span><span><span></span><span>function</span><span> </span><span>MyApp</span><span>(</span><span>{</span><span> </span><span>Component</span><span>,</span><span> pageProps </span><span>}</span><span>:</span><span> </span><span>SolitoAppProps</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>const</span><span> getLayout </span><span>=</span><span> </span><span>Component</span><span>.</span><span>getLayout</span><span> </span><span>||</span><span> </span><span>(</span><span>(</span><span>page</span><span>)</span><span> </span><span>=&gt;</span><span> page</span><span>)</span><span>
</span></span><span><span>  </span><span>console</span><span>.</span><span>log</span><span>(</span><span>isWeb</span><span>)</span><span>
</span></span><span><span>  </span><span>return</span><span> </span><span>(</span><span>
</span></span><span><span>    </span><span>&lt;</span><span>&gt;</span><span>
</span></span><span><span>      </span><span>&lt;</span><span>Head</span><span>&gt;</span><span>
</span></span><span><span>        </span><span>&lt;</span><span>title</span><span>&gt;</span><span>bensch.ac</span><span>&lt;/</span><span>title</span><span>&gt;</span><span>
</span></span><span><span>        </span><span>&lt;</span><span>meta</span><span> </span><span>name</span><span>=</span><span>&#34;</span><span>bensch.ac</span><span>&#34;</span><span> </span><span>content</span><span>=</span><span>&#34;</span><span>benjamin</span><span>&#39;</span><span>s blog</span><span>&#34;</span><span> </span><span>/&gt;</span><span>
</span></span><span><span>        </span><span>&lt;</span><span>link</span><span> </span><span>rel</span><span>=</span><span>&#34;</span><span>icon</span><span>&#34;</span><span> </span><span>href</span><span>=</span><span>&#34;</span><span>/favicon.ico</span><span>&#34;</span><span> </span><span>/&gt;</span><span>
</span></span><span><span>        </span><span>&lt;</span><span>script</span><span>
</span></span><span><span>          </span><span>dangerouslySetInnerHTML</span><span>=</span><span>{</span><span>{</span><span>
</span></span><span><span>            </span><span>// avoid flash of animated things on enter:</span><span>
</span></span><span><span>            __html</span><span>:</span><span> </span><span>`</span><span>document.documentElement.classList.add(&#39;t_unmounted&#39;)</span><span>`</span><span>,</span><span>
</span></span><span><span>          </span><span>}</span><span>}</span><span>
</span></span><span><span>        </span><span>/&gt;</span><span>
</span></span><span><span>      </span><span>&lt;/</span><span>Head</span><span>&gt;</span><span>
</span></span><span><span>      </span><span>&lt;</span><span>ThemeProvider</span><span>&gt;</span><span>
</span></span><span><span>        </span><span>{</span><span>getLayout</span><span>(</span><span>&lt;</span><span>Component</span><span> </span><span>{</span><span>...</span><span>pageProps</span><span>}</span><span> </span><span>/&gt;</span><span>)</span><span>}</span><span>
</span></span><span><span>        </span><span>{</span><span>process</span><span>.</span><span>env</span><span>.</span><span>NODE_ENV</span><span> </span><span>!==</span><span> </span><span>&#39;production&#39;</span><span> </span><span>&amp;&amp;</span><span> </span><span>&lt;</span><span>GoogleAnalytics</span><span> </span><span>gaId</span><span>=</span><span>&#34;</span><span>G-M7M1C0YG29</span><span>&#34;</span><span> </span><span>/&gt;</span><span>}</span><span>
</span></span><span><span>      </span><span>&lt;/</span><span>ThemeProvider</span><span>&gt;</span><span>
</span></span><span><span>    </span><span>&lt;/</span><span>&gt;</span><span>
</span></span><span><span>  </span><span>)</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span>
</span><span><span></span><span>function</span><span> </span><span>ThemeProvider</span><span>(</span><span>{</span><span> children </span><span>}</span><span>:</span><span> </span><span>{</span><span> children</span><span>:</span><span> </span><span>React</span><span>.</span><span>ReactNode</span><span> </span><span>}</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>const</span><span> </span><span>[</span><span>theme</span><span>,</span><span> setTheme</span><span>]</span><span> </span><span>=</span><span> </span><span>useRootTheme</span><span>(</span><span>)</span><span>
</span></span><span>
</span><span><span>  </span><span>return</span><span> </span><span>(</span><span>
</span></span><span><span>    </span><span>&lt;</span><span>NextThemeProvider</span><span>
</span></span><span><span>      </span><span>// change default theme (system) here:</span><span>
</span></span><span><span>      </span><span>// defaultTheme=&#34;light&#34;</span><span>
</span></span><span><span>      </span><span>onChangeTheme</span><span>=</span><span>{</span><span>(</span><span>next</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span>
</span></span><span><span>        </span><span>setTheme</span><span>(</span><span>next </span><span>as</span><span> </span><span>any</span><span>)</span><span>
</span></span><span><span>      </span><span>}</span><span>}</span><span>
</span></span><span><span>    </span><span>&gt;</span><span>
</span></span><span><span>      </span><span>&lt;</span><span>Provider</span><span> </span><span>disableRootThemeClass</span><span> </span><span>disableInjectCSS</span><span> </span><span>defaultTheme</span><span>=</span><span>{</span><span>theme</span><span>}</span><span>&gt;</span><span>
</span></span><span><span>        </span><span>&lt;</span><span>div</span><span> </span><span>className</span><span>=</span><span>{</span><span>`</span><span>${</span><span>bodyFont</span><span>.</span><span>variable</span><span>}</span><span> </span><span>${</span><span>displayFont</span><span>.</span><span>variable</span><span>}</span><span>`</span><span>}</span><span>&gt;</span><span>{</span><span>children</span><span>}</span><span>&lt;/</span><span>div</span><span>&gt;</span><span>
</span></span><span><span>      </span><span>&lt;/</span><span>Provider</span><span>&gt;</span><span>
</span></span><span><span>    </span><span>&lt;/</span><span>NextThemeProvider</span><span>&gt;</span><span>
</span></span><span><span>  </span><span>)</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span>
</span><span><span></span><span>export</span><span> </span><span>default</span><span> </span><span>MyApp</span></span></code></p></pre>
<p text-rendering="optimizelegibility">and in your tamagui configuration</p>
<pre><p><code><span><span>import</span><span> </span><span>{</span><span> createTamagui </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;tamagui&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> shorthands </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@tamagui/shorthands&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> tokens</span><span>,</span><span> themes </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@tamagui/config/v3&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> createMedia </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@tamagui/react-native-media-driver&#39;</span><span>
</span></span><span><span></span><span>import</span><span> </span><span>{</span><span> </span><span>FillInFont</span><span>,</span><span> </span><span>GenericFont</span><span>,</span><span> createFont</span><span>,</span><span> getVariableValue</span><span>,</span><span> isWeb </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@tamagui/core&#39;</span><span>
</span></span><span>
</span><span><span></span><span>const</span><span> </span><span>LINE_HEIGHT</span><span> </span><span>=</span><span> </span><span>1.333</span><span>
</span></span><span><span></span><span>const</span><span> createDisplayFont </span><span>=</span><span> </span><span>&lt;</span><span>A</span><span> </span><span>extends</span><span> </span><span>GenericFont</span><span>&gt;</span><span>(</span><span>
</span></span><span><span>  font</span><span>:</span><span> </span><span>Partial</span><span>&lt;</span><span>A</span><span>&gt;</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>{</span><span>
</span></span><span><span>    </span><span>sizeLineHeight</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> size</span><span>,</span><span>
</span></span><span><span>    </span><span>sizeSize</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> size</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    sizeLineHeight</span><span>?</span><span>:</span><span> </span><span>(</span><span>fontSize</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>number</span><span>
</span></span><span><span>    sizeSize</span><span>?</span><span>:</span><span> </span><span>(</span><span>size</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>number</span><span>
</span></span><span><span>  </span><span>}</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>
</span></span><span><span></span><span>)</span><span>:</span><span> </span><span>FillInFont</span><span>&lt;</span><span>A</span><span>,</span><span> </span><span>keyof</span><span> </span><span>typeof</span><span> defaultSizes</span><span>&gt;</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>// merge to allow individual overrides</span><span>
</span></span><span><span>  </span><span>const</span><span> size </span><span>=</span><span> </span><span>Object</span><span>.</span><span>fromEntries</span><span>(</span><span>
</span></span><span><span>    </span><span>Object</span><span>.</span><span>entries</span><span>(</span><span>{</span><span>
</span></span><span><span>      </span><span>...</span><span>defaultSizes</span><span>,</span><span>
</span></span><span><span>      </span><span>...</span><span>font</span><span>.</span><span>size</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>)</span><span>.</span><span>map</span><span>(</span><span>(</span><span>[</span><span>k</span><span>,</span><span> v</span><span>]</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>[</span><span>k</span><span>,</span><span> </span><span>sizeSize</span><span>(</span><span>+</span><span>v</span><span>)</span><span>]</span><span>)</span><span>
</span></span><span><span>  </span><span>)</span><span>
</span></span><span><span>  </span><span>return</span><span> </span><span>createFont</span><span>(</span><span>{</span><span>
</span></span><span><span>    family</span><span>:</span><span> isWeb
</span></span><span><span>      </span><span>?</span><span> </span><span>&#39;var(--my-display-font), -apple-system, system-ui, BlinkMacSystemFont, &#34;Segoe UI&#34;, Roboto, Helvetica, Arial, sans-serif&#39;</span><span>
</span></span><span><span>      </span><span>:</span><span> </span><span>&#39;Playfair Display&#39;</span><span>,</span><span>
</span></span><span><span>    lineHeight</span><span>:</span><span> </span><span>Object</span><span>.</span><span>fromEntries</span><span>(</span><span>
</span></span><span><span>      </span><span>Object</span><span>.</span><span>entries</span><span>(</span><span>size</span><span>)</span><span>.</span><span>map</span><span>(</span><span>(</span><span>[</span><span>k</span><span>,</span><span> v</span><span>]</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>[</span><span>k</span><span>,</span><span> </span><span>sizeLineHeight</span><span>(</span><span>getVariableValue</span><span>(</span><span>v</span><span>)</span><span> </span><span>*</span><span> </span><span>LINE_HEIGHT</span><span>)</span><span>]</span><span>)</span><span>
</span></span><span><span>    </span><span>)</span><span>,</span><span>
</span></span><span><span>    weight</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>4</span><span>:</span><span> </span><span>&#39;300&#39;</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>    letterSpacing</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>4</span><span>:</span><span> </span><span>0</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>    </span><span>...</span><span>(</span><span>font </span><span>as</span><span> </span><span>any</span><span>)</span><span>,</span><span>
</span></span><span><span>    size</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>)</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span>
</span><span><span></span><span>const</span><span> createBodyFont </span><span>=</span><span> </span><span>&lt;</span><span>A</span><span> </span><span>extends</span><span> </span><span>GenericFont</span><span>&gt;</span><span>(</span><span>
</span></span><span><span>  font</span><span>:</span><span> </span><span>Partial</span><span>&lt;</span><span>A</span><span>&gt;</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>{</span><span>
</span></span><span><span>    </span><span>sizeLineHeight</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> size</span><span>,</span><span>
</span></span><span><span>    </span><span>sizeSize</span><span> </span><span>=</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> size</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    sizeLineHeight</span><span>?</span><span>:</span><span> </span><span>(</span><span>fontSize</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>number</span><span>
</span></span><span><span>    sizeSize</span><span>?</span><span>:</span><span> </span><span>(</span><span>size</span><span>:</span><span> </span><span>number</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>number</span><span>
</span></span><span><span>  </span><span>}</span><span> </span><span>=</span><span> </span><span>{</span><span>}</span><span>
</span></span><span><span></span><span>)</span><span>:</span><span> </span><span>FillInFont</span><span>&lt;</span><span>A</span><span>,</span><span> </span><span>keyof</span><span> </span><span>typeof</span><span> defaultSizes</span><span>&gt;</span><span> </span><span>=&gt;</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>// merge to allow individual overrides</span><span>
</span></span><span><span>  </span><span>const</span><span> size </span><span>=</span><span> </span><span>Object</span><span>.</span><span>fromEntries</span><span>(</span><span>
</span></span><span><span>    </span><span>Object</span><span>.</span><span>entries</span><span>(</span><span>{</span><span>
</span></span><span><span>      </span><span>...</span><span>defaultSizes</span><span>,</span><span>
</span></span><span><span>      </span><span>...</span><span>font</span><span>.</span><span>size</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>)</span><span>.</span><span>map</span><span>(</span><span>(</span><span>[</span><span>k</span><span>,</span><span> v</span><span>]</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>[</span><span>k</span><span>,</span><span> </span><span>sizeSize</span><span>(</span><span>+</span><span>v</span><span>)</span><span>]</span><span>)</span><span>
</span></span><span><span>  </span><span>)</span><span>
</span></span><span><span>  </span><span>return</span><span> </span><span>createFont</span><span>(</span><span>{</span><span>
</span></span><span><span>    family</span><span>:</span><span> isWeb
</span></span><span><span>      </span><span>?</span><span> </span><span>&#39;var(--my-body-font), -apple-system, system-ui, BlinkMacSystemFont, &#34;Segoe UI&#34;, Roboto, Helvetica, Arial, sans-serif&#39;</span><span>
</span></span><span><span>      </span><span>:</span><span> </span><span>&#39;Playfair Display&#39;</span><span>,</span><span>
</span></span><span><span>    lineHeight</span><span>:</span><span> </span><span>Object</span><span>.</span><span>fromEntries</span><span>(</span><span>
</span></span><span><span>      </span><span>Object</span><span>.</span><span>entries</span><span>(</span><span>size</span><span>)</span><span>.</span><span>map</span><span>(</span><span>(</span><span>[</span><span>k</span><span>,</span><span> v</span><span>]</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>[</span><span>k</span><span>,</span><span> </span><span>sizeLineHeight</span><span>(</span><span>getVariableValue</span><span>(</span><span>v</span><span>)</span><span> </span><span>*</span><span> </span><span>LINE_HEIGHT</span><span>)</span><span>]</span><span>)</span><span>
</span></span><span><span>    </span><span>)</span><span>,</span><span>
</span></span><span><span>    weight</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>4</span><span>:</span><span> </span><span>&#39;300&#39;</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>    letterSpacing</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>4</span><span>:</span><span> </span><span>0</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>    </span><span>...</span><span>(</span><span>font </span><span>as</span><span> </span><span>any</span><span>)</span><span>,</span><span>
</span></span><span><span>    size</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>)</span><span>
</span></span><span><span></span><span>}</span><span>
</span></span><span><span></span><span>const</span><span> defaultSizes </span><span>=</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>1</span><span>:</span><span> </span><span>11</span><span>,</span><span>
</span></span><span><span>  </span><span>2</span><span>:</span><span> </span><span>12</span><span>,</span><span>
</span></span><span><span>  </span><span>3</span><span>:</span><span> </span><span>13</span><span>,</span><span>
</span></span><span><span>  </span><span>4</span><span>:</span><span> </span><span>14</span><span>,</span><span>
</span></span><span><span>  </span><span>true</span><span>:</span><span> </span><span>14</span><span>,</span><span>
</span></span><span><span>  </span><span>5</span><span>:</span><span> </span><span>16</span><span>,</span><span>
</span></span><span><span>  </span><span>6</span><span>:</span><span> </span><span>18</span><span>,</span><span>
</span></span><span><span>  </span><span>7</span><span>:</span><span> </span><span>20</span><span>,</span><span>
</span></span><span><span>  </span><span>8</span><span>:</span><span> </span><span>23</span><span>,</span><span>
</span></span><span><span>  </span><span>9</span><span>:</span><span> </span><span>30</span><span>,</span><span>
</span></span><span><span>  </span><span>10</span><span>:</span><span> </span><span>46</span><span>,</span><span>
</span></span><span><span>  </span><span>11</span><span>:</span><span> </span><span>55</span><span>,</span><span>
</span></span><span><span>  </span><span>12</span><span>:</span><span> </span><span>62</span><span>,</span><span>
</span></span><span><span>  </span><span>13</span><span>:</span><span> </span><span>72</span><span>,</span><span>
</span></span><span><span>  </span><span>14</span><span>:</span><span> </span><span>92</span><span>,</span><span>
</span></span><span><span>  </span><span>15</span><span>:</span><span> </span><span>114</span><span>,</span><span>
</span></span><span><span>  </span><span>16</span><span>:</span><span> </span><span>134</span><span>,</span><span>
</span></span><span><span></span><span>}</span><span> </span><span>as</span><span> </span><span>const</span><span>
</span></span><span>
</span><span><span></span><span>import</span><span> </span><span>{</span><span> animations </span><span>}</span><span> </span><span>from</span><span> </span><span>&#39;@my/ui/src/animations&#39;</span><span>
</span></span><span>
</span><span><span></span><span>const</span><span> headingFont </span><span>=</span><span> </span><span>createDisplayFont</span><span>(</span><span>{</span><span>
</span></span><span><span>  size</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>6</span><span>:</span><span> </span><span>15</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  transform</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>6</span><span>:</span><span> </span><span>&#39;uppercase&#39;</span><span>,</span><span>
</span></span><span><span>    </span><span>7</span><span>:</span><span> </span><span>&#39;none&#39;</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  weight</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>6</span><span>:</span><span> </span><span>&#39;400&#39;</span><span>,</span><span>
</span></span><span><span>    </span><span>7</span><span>:</span><span> </span><span>&#39;700&#39;</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  color</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>6</span><span>:</span><span> </span><span>&#39;$colorFocus&#39;</span><span>,</span><span>
</span></span><span><span>    </span><span>7</span><span>:</span><span> </span><span>&#39;$color&#39;</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  letterSpacing</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>5</span><span>:</span><span> </span><span>2</span><span>,</span><span>
</span></span><span><span>    </span><span>6</span><span>:</span><span> </span><span>1</span><span>,</span><span>
</span></span><span><span>    </span><span>7</span><span>:</span><span> </span><span>0</span><span>,</span><span>
</span></span><span><span>    </span><span>8</span><span>:</span><span> </span><span>-</span><span>1</span><span>,</span><span>
</span></span><span><span>    </span><span>9</span><span>:</span><span> </span><span>-</span><span>2</span><span>,</span><span>
</span></span><span><span>    </span><span>10</span><span>:</span><span> </span><span>-</span><span>3</span><span>,</span><span>
</span></span><span><span>    </span><span>12</span><span>:</span><span> </span><span>-</span><span>4</span><span>,</span><span>
</span></span><span><span>    </span><span>14</span><span>:</span><span> </span><span>-</span><span>5</span><span>,</span><span>
</span></span><span><span>    </span><span>15</span><span>:</span><span> </span><span>-</span><span>6</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  face</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    face</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>// .. other font weights</span><span>
</span></span><span><span>      </span><span>700</span><span>:</span><span> </span><span>{</span><span> normal</span><span>:</span><span> </span><span>&#39;YOUR_FONT&#39;</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span></span><span>}</span><span>)</span><span>
</span></span><span><span></span><span>const</span><span> bodyFont </span><span>=</span><span> </span><span>createBodyFont</span><span>(</span><span>
</span></span><span><span>  </span><span>{</span><span>
</span></span><span><span>    face</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>// .. other font weights</span><span>
</span></span><span><span>      </span><span>700</span><span>:</span><span> </span><span>{</span><span> normal</span><span>:</span><span> </span><span>&#39;YOUR_FONT&#39;</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>{</span><span>
</span></span><span><span>    </span><span>sizeSize</span><span>:</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>Math</span><span>.</span><span>round</span><span>(</span><span>size </span><span>*</span><span> </span><span>1.1</span><span>)</span><span>,</span><span>
</span></span><span><span>    </span><span>sizeLineHeight</span><span>:</span><span> </span><span>(</span><span>size</span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>Math</span><span>.</span><span>round</span><span>(</span><span>size </span><span>*</span><span> </span><span>1.1</span><span> </span><span>+</span><span> </span><span>(</span><span>size </span><span>&gt;</span><span> </span><span>20</span><span> </span><span>?</span><span> </span><span>10</span><span> </span><span>:</span><span> </span><span>10</span><span>)</span><span>)</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>
</span></span><span><span></span><span>)</span><span>
</span></span><span>
</span><span><span></span><span>export</span><span> </span><span>const</span><span> config </span><span>=</span><span> </span><span>createTamagui</span><span>(</span><span>{</span><span>
</span></span><span><span>  defaultFont</span><span>:</span><span> </span><span>&#39;body&#39;</span><span>,</span><span>
</span></span><span><span>  animations</span><span>,</span><span>
</span></span><span><span>  shouldAddPrefersColorThemes</span><span>:</span><span> </span><span>true</span><span>,</span><span>
</span></span><span><span>  themeClassNameOnRoot</span><span>:</span><span> </span><span>true</span><span>,</span><span>
</span></span><span>
</span><span><span>  </span><span>// highly recommended to turn this on if you are using shorthands</span><span>
</span></span><span><span>  </span><span>// to avoid having multiple valid style keys that do the same thing</span><span>
</span></span><span><span>  </span><span>// we leave it off by default because it can be confusing as you onboard.</span><span>
</span></span><span><span>  onlyAllowShorthands</span><span>:</span><span> </span><span>false</span><span>,</span><span>
</span></span><span><span>  shorthands</span><span>,</span><span>
</span></span><span>
</span><span><span>  fonts</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    body</span><span>:</span><span> bodyFont</span><span>,</span><span>
</span></span><span><span>    heading</span><span>:</span><span> headingFont</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  settings</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>    allowedStyleValues</span><span>:</span><span> </span><span>&#39;somewhat-strict&#39;</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>,</span><span>
</span></span><span><span>  themes</span><span>,</span><span>
</span></span><span><span>  tokens</span><span>,</span><span>
</span></span><span><span>  media</span><span>:</span><span> </span><span>createMedia</span><span>(</span><span>{</span><span>
</span></span><span><span>    xs</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>660</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    sm</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>800</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    md</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>1020</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    lg</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>1280</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    xl</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>1420</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    xxl</span><span>:</span><span> </span><span>{</span><span> maxWidth</span><span>:</span><span> </span><span>1600</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    gtXs</span><span>:</span><span> </span><span>{</span><span> minWidth</span><span>:</span><span> </span><span>660</span><span> </span><span>+</span><span> </span><span>1</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    gtSm</span><span>:</span><span> </span><span>{</span><span> minWidth</span><span>:</span><span> </span><span>800</span><span> </span><span>+</span><span> </span><span>1</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    gtMd</span><span>:</span><span> </span><span>{</span><span> minWidth</span><span>:</span><span> </span><span>1020</span><span> </span><span>+</span><span> </span><span>1</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    gtLg</span><span>:</span><span> </span><span>{</span><span> minWidth</span><span>:</span><span> </span><span>1280</span><span> </span><span>+</span><span> </span><span>1</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    short</span><span>:</span><span> </span><span>{</span><span> maxHeight</span><span>:</span><span> </span><span>820</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    tall</span><span>:</span><span> </span><span>{</span><span> minHeight</span><span>:</span><span> </span><span>820</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    hoverNone</span><span>:</span><span> </span><span>{</span><span> hover</span><span>:</span><span> </span><span>&#39;none&#39;</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>    pointerCoarse</span><span>:</span><span> </span><span>{</span><span> pointer</span><span>:</span><span> </span><span>&#39;coarse&#39;</span><span> </span><span>}</span><span>,</span><span>
</span></span><span><span>  </span><span>}</span><span>)</span><span>,</span><span>
</span></span><span><span></span><span>}</span><span>)</span><span>
</span></span><span>
</span><span><span></span><span>// for the compiler to find it</span><span>
</span></span><span><span></span><span>export</span><span> </span><span>default</span><span> config</span></span></code></p></pre>
<p text-rendering="optimizelegibility">your fonts should be rendering as expected on your next.js site.</p></div></div></div></div>
  </body>
</html>
