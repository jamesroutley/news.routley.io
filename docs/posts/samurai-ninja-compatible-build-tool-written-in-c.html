<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/michaelforney/samurai">Original</a>
    <h1>samurai: Ninja-compatible build tool written in C</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://builds.sr.ht/~mcf/samurai" rel="nofollow"><img src="https://camo.githubusercontent.com/609af89465c545f1078c921e0ffa4f02e5a351d03cf691efa20cbbaedf9da09d/68747470733a2f2f6275696c64732e73722e68742f7e6d63662f73616d757261692e737667" alt="builds.sr.ht status" data-canonical-src="https://builds.sr.ht/~mcf/samurai.svg"/></a>
<a href="https://github.com/michaelforney/samurai/actions"><img src="https://github.com/michaelforney/samurai/workflows/build/badge.svg" alt="GitHub build status"/></a></p>
<p dir="auto">samurai is a ninja-compatible build tool written in C99 with a focus on
simplicity, speed, and portability.</p>
<h2 dir="auto"><a id="user-content-status" aria-hidden="true" href="#status"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h2>
<p dir="auto">samurai implements the ninja build language through version 1.9.0 except
for MSVC dependency handling (<code>deps = msvc</code>). It uses the same format
for <code>.ninja_log</code> and <code>.ninja_deps</code> as ninja, currently version 5 and 4
respectively.</p>
<p dir="auto">It is feature-complete and supports most of the same options as ninja.</p>
<h2 dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h2>
<p dir="auto">samurai requires various POSIX.1-2008 interfaces.</p>
<p dir="auto">Scheduling jobs based on load average requires through the non-standard, but
widely available <code>getloadavg</code> function. This feature can be disabled by
defining the <code>NO_GETLOADAVG</code> macro when calling the C compiler.</p>
<h2 dir="auto"><a id="user-content-differences-from-ninja" aria-hidden="true" href="#differences-from-ninja"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Differences from ninja</h2>
<p dir="auto">samurai tries to match ninja behavior as much as possible, but there
are several cases where it is slightly different:</p>
<ul dir="auto">
<li>samurai uses the <a href="https://ninja-build.org/manual.html#ref_scope" rel="nofollow">variable lookup order</a> documented in the ninja manual,
while ninja has a quirk (<a href="https://github.com/ninja-build/ninja/issues/1516" data-hovercard-type="issue" data-hovercard-url="/ninja-build/ninja/issues/1516/hovercard">ninja-build/ninja#1516</a>) that if the build
edge has no variable bindings, the variable is looked up in file scope
<em>before</em> the rule-level variables.</li>
<li>samurai schedules jobs using a stack, so the last scheduled job is
the first to execute, while ninja schedules jobs based on the pointer
value of the edge structure (they are stored in a <code>std::set&lt;Edge*&gt;</code>),
so the first to execute depends on the address returned by <code>malloc</code>.
This may result in build failures due to insufficiently specified
dependencies in the project&#39;s build system.</li>
<li>samurai does not post-process the job output in any way, so if it
includes escape sequences they will be preserved, while ninja strips
escape sequences if standard output is not a terminal. Some build
systems, like meson, force color output from gcc by default using
<code>-fdiagnostics-color=always</code>, so if you plan to save the output to a
log, you should pass <code>-Db_colorout=auto</code> to meson.</li>
<li>samurai follows the <a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html#tag_12_02" rel="nofollow">POSIX Utility Syntax Guidelines</a>, in particular
guideline 9, so it requires that any command-line options precede
the operands. It does not do GNU-style argument permutation.</li>
</ul>
</article>
          </div></div>
  </body>
</html>
