<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://caleb.software/posts/ios-delayed-messages.html">Original</a>
    <h1>Delayed Messages on iOS</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>When I got my first iPhone in March I was surprised to find that iMessage didn’t support sending messages later at a specified time. This feature is pretty common on some other messaging platforms, so I had come to depend on it in my daily workflow. It’s especially useful in situations where I have a work-related thought at 3AM and don’t want to risk waking up and annoying my co-workers.</p>

<p>At first I played around with trying to implement this with a simple <a href="https://support.apple.com/guide/shortcuts/welcome/ios">iOS Shortcut</a>, but since you can’t schedule shortcut actions to run at a later time, I had to get a little creative.</p>

<p>Here, we’ll see how you can use a combination of a <strong>shortcut</strong> and an <strong>automation</strong> (also via the Shortcuts app) plus a hidden iOS Calendar to schedule messages for sending later.</p>

<h2 id="a-new-calendar">A New Calendar</h2>

<p>First, we create a new calendar within the iOS Calendar app. I titled mine <code>Delayed Messages</code> here. We will use this calendar as a sort of queue for messages to be sent later, with individual calendar events storing the message text and recipient.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/calendar.PNG" alt="A new calendar"/></p>

<h2 id="the-shortcut">The Shortcut</h2>

<p>A <strong>shortcut</strong> is basically just a way to automate a task with multiple steps. You can think of it like a shell script, run immediately whenever we decide to queue up a new message.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/short-home.PNG" alt="The shortcuts app"/></p>

<p>Below, you can see the structure of the shortcut. It’s pretty straightforward: first, we grab the text content of the message, pick what date we want to send the message, and we ask the user to choose a phone number from their contacts.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/short-input.PNG" alt="Reading user input"/></p>

<p>Then we create a new calendar item in our <code>Delayed Messages</code> calendar with the information. The title of the calendar is the recipient’s phone number, and the <code>Notes</code> field contains the text of the message.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/short-add.PNG" alt="Creating the calendar event"/></p>

<h2 id="the-automation">The Automation</h2>

<p>If shortcuts are the equivalent a shell script, iOS <strong>automations</strong> are the equivalent of a cron job. They perform a series of actions at a regularly scheduled time (or in response to some event or trigger).</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/auto-home.PNG" alt=""/></p>

<p>Unfortunately, automations only have the option to be repeated daily, weekly, or monthly. This means we can’t specify the time to send the message with just one automation, though you could create multiple automations (and set a time on the calendar events instead of choosing <em>“all day”</em>) to send messages at varying points in the day. I settled on just sending all of the delayed messages at 9AM, since this fits my use-case the best.</p>

<p>First, our automation will grab any events in our <code>Delayed Messages</code> calendar that need to be sent today.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/auto-find.PNG" alt=""/></p>

<p>Then, we loop through each of the calendar events, and send the messages to the listed recipient.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/auto-loop.PNG" alt=""/></p>

<p>Finally, we delete the calendar events, though you could skip this step.</p>

<p><img src="http://caleb.software/assets/img/ios-delayed-messages/auto-delete.PNG" alt=""/></p>

<p>I turned off the <em>“ask before running”</em> and <em>“notify when run”</em> options just to make it a little easier. I’m also not sure how iOS automations handle cases where the automation wasn’t able to run (e.g. your phone is off/dead at 9AM on a certain day), so it might be a good idea to modify the automation’s <code>Find</code> action to fetch all calendar events at earlier dates as well to avoid a message from getting skipped (better late than never?)</p>

    </div></div>
  </body>
</html>
