<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bugsink.com/blog/why-i-gave-up-on-self-hosted-sentry/">Original</a>
    <h1>I gave up on self-hosted Sentry</h1>
    
    <div id="readability-page-1" class="page"><div>
        
        

        <div>
          

          <section>
            <div>
              <div>
                <div>
                




          <div>
            <div>
              <div>
                <p><img src="https://www.bugsink.com/static/images/klaas.beec86a2df8b.webp" alt="Klaas van Schelven"/>
                </p>
                <p><span>
                    Klaas van Schelven;
                  </span>
                  <span>
                    September 6, 2024 - 6 min read
                  </span>
                </p>
              </div>
            </div>
          </div>


          <figure>
            <p><img src="https://www.bugsink.com/static/images/self-hosting-sentry.56ae43bfd99e.webp" alt="Self-hosting Sentry"/>
            </p>
          </figure>

<p>In the early 2010s, I was a big fan of <a href="https://sentry.io/" rel="noopener noreferrer nofollow" target="_blank">Sentry</a>. It was a great tool for tracking errors in web
applications. At the time, I was making software for law firms, so sending error reports to a third-party service was
out of the question, I needed to host it myself. So I did.</p>
<p>After leaving the law firm world, I worked as a contractor for a few years. So when I overheard one of my colleagues
asking whether it would be possible to host Sentry on-premise, I figured I could help. I had already done it, after
all. <em>Big mistake</em>.</p>
<h3 id="scare-mongering">Scare-mongering</h3>
<p>The first thing I noticed was that the Sentry documentation was full of warnings about how self-hosting was a bad idea.
Here’s the <a href="https://sentry.io/resources/self-hosted-vs-cloud/" rel="noopener noreferrer nofollow" target="_blank">kind of quote</a> that you couldn’t make up if you were
<a href="https://www.bugsink.com/">their direct competitor</a>:</p>
<blockquote>
<p>we don’t necessarily recommend self-hosting to everyone. In addition to existing hidden costs, as Sentry evolves,
our self-hosted version will become more complex, demanding additional types of infrastructure. Our internal system
that powers our newest features will also advance and require more containers, including one for a new database.</p>
</blockquote>
<p>And they even have pretty pictures and a whole <a href="https://www.bugsink.com/static/build-vs-buy.4bd46d420f4e.pdf">pdf</a> to go with it:</p>

          <figure>
            <img src="https://www.bugsink.com/static/images/build-vs-buy.c31834c5d5e3.webp" alt="The cost of self-hosting Sentry"/>
            <figcaption>
                Credit: sentry.io
            </figcaption>
          </figure>


<h3 id="hardware-requirements">Hardware requirements</h3>
<p>Despite the warnings, I hadn’t given up yet. I had already done it once, after all. So I opened the
<a href="https://develop.sentry.dev/self-hosted/" rel="noopener noreferrer" target="_blank">documentation</a> and started reading. More warnings, in this case about the lack
of support for the self-hosted version. Given that they have to make money too, I could understand those (more than the
scary pictures).</p>
<p>But then come the hardware requirements: they recommend at least <strong>16GB of RAM</strong> and 4 cores. Coming from the time when
I ran Sentry on a 512MB VPS, this was a bit of a shock. So is that a real problem, or should I just get with the times,
and accept that 16GB is the new normal? I’d argue that it <em>is</em> a problem, for a few reasons.</p>
<p>First, there’s a <strong>signal being given</strong> about the <strong>complexity and fragility</strong> of the software. A 16GB RAM requirement
just screams “this is a big, complex piece of software that will break in mysterious ways”. Not very scientific, I know,
but based on experience.</p>
<p>Second, there’s the <strong>simple matter of cost</strong>. The cheapest VM at the super-cheap hosting company Hetzner costs €3.29
per month, but if you need 16GB, you’ll pay 15.90 per month – almost a factor 5 more. And that’s assuming you can run
things at el-cheapo hosting. If you pay-per-compute, or if you work at some big corp, the cost of machines may be much
higher.</p>
<p>Also relevant in corporate environments: there may very well be some threshold where it is easy to spin up “small”
machines (for some value of small), but above which you’ll need to <strong>beg for permission</strong> with a bean counter, sysadmin or manager.</p>
<p>Finally, as <a href="https://www.youtube.com/watch?v=idLyobOhtO4&amp;t=3030s" rel="noopener noreferrer" target="_blank">Linus
Torvalds</a> said</p>
<blockquote>
<p>if you can do something really fast, really well, people start using it differently.</p>
</blockquote>
<p>The same applies for “if it’s small”. One such different use-case is to just <strong>run it
locally</strong>, as an aid in local development. If you need 16GB of RAM to run Sentry, you’ll run the risk of slowing down
your laptop to a crawl, or at least having to think about it. If it’s in the 100MB range, you can just run it and forget
about it.</p>
<p>Oh and if you were thinking of running it on a Raspberry Pi, forget about it, but not (just) because of the RAM. The Pi
has an ARM processor, and <a href="https://github.com/getsentry/self-hosted/issues/1585" rel="noopener noreferrer" target="_blank">Sentry only supports amd64</a>.</p>
<h3 id="so-many-scripts">So many scripts…</h3>
<p>The next chapter in the documentation is about the <a href="https://develop.sentry.dev/self-hosted/#getting-started" rel="noopener noreferrer" target="_blank">actual
installation</a>.</p>
<p>The first thing you’ll notice is that the installation is done with a shell script. That is not a problem in itself, but
I’m also not the type of person who would just run a shell script from the internet without reading it first, so I did.</p>
<p>The actual script is some 30 lines, but each of those is an include of another script. Counting those, you get:</p>
<pre><code><div><pre><span></span>me@mymachine~/../self-hosted/install$ wc -l *.sh
  [...]
  837 total
</pre></div></code></pre>
<p>That’s not a time-investment I’m willing to make. Especially since this is, as per the documentation, only a first step
towards a reliable installation:</p>
<blockquote>
<p>packaged up for low-volume deployments and proofs-of-concept</p>
</blockquote>
<p>And remember that the whole reason for setting up Sentry was to help a colleague. I’m not going to leave them with a
proof-of-concept, and I also don’t want to become the guy who maintains the Sentry installation. And I’m not going to
tell them to read 837 lines of shell script either.</p>
<h3 id="further-searching">Further searching</h3>
<p>Finally, I did some random internet searching, to see what the actual experience was of people who had self-hosted
Sentry. Here are <a href="https://www.reddit.com/r/sre/comments/17xosxi/selfhosting_sentry_your_experience/" rel="noopener noreferrer" target="_blank">some quotes</a>:</p>
<blockquote>
<p>It’s a ton of docker containers. Things will fail randomly or maybe with a lot of traffic, don’t remember well. Hard
to upgrade or it would upgrade automatically and break?.</p>
</blockquote><blockquote>
<p>if you can dedicate like 1/4 to 1/2 an engineer on it then i think its worth it. keeping in mind that it is an
absolutely bear with an ungodly amount of stateful dependencies nowadays.</p>
</blockquote><blockquote>
<p>I can’t say it’s been pleasant, probably my least favorite service to do maintenance on or interact with</p>
</blockquote>
<p>Now let’s just assume these aren’t astro-turfed by Sentry’s own marketing department, i.e that these are real.
None of this looks very promising. And since I don’t have a 1/4 to 1/2 an engineer to dedicate to this, I would be
looking at a significant share of my own time.</p>
<h3 id="conclusion">Conclusion</h3>
<p>I gave up on self-hosted Sentry before even getting started.</p>
<p>I’m not going to run a piece of software that requires 16GB of RAM, has a complex
installation script, and is known to be a pain to maintain. I’m not going to recommend it to anyone else either.</p>
<p>So did some good come out of this? I’d like to think so… this small journey got me mad enough to just write a <a href="https://www.bugsink.com/">drop-in
replacement for Sentry</a> that can <a href="https://www.bugsink.com/scalable-and-reliable/">run on any cheap hardware you can find</a>. I hope that it is
a useful alternative for people with the same taste in software as me.</p>


                </div>
              </div>
            </div>
          </section>
        </div>
        
      </div></div>
  </body>
</html>
