<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/nearform/lyra">Original</a>
    <h1>Lyra: Fast, in-memory, typo-tolerant, full-text search engine in TypeScript</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/nearform/lyra/blob/main/docs/lyra-logo.png"><img src="https://github.com/nearform/lyra/raw/main/docs/lyra-logo.png" alt="Lyra"/></a></p>
<p dir="auto"><a href="https://github.com/nearform/lyra/actions/workflows/tests.yml"><img src="https://github.com/nearform/lyra/actions/workflows/tests.yml/badge.svg?branch=main" alt="Tests"/></a></p>

<p dir="auto">You can install Lyra using <code>npm</code>, <code>yarn</code>, <code>pnpm</code>:</p>




<p dir="auto">Lyra is quite simple to use. The first thing to do is to create a new database instance and set an indexing schema:</p>
<div data-snippet-clipboard-copy-content="import { create, insert, search, remove } from &#39;@nearform/lyra&#39;;

const db = create({
  schema: {
    author: &#39;string&#39;,
    quote: &#39;string&#39;
  }
});"><pre><span>import</span> <span>{</span> <span>create</span><span>,</span> <span>insert</span><span>,</span> <span>search</span><span>,</span> <span>remove</span> <span>}</span> <span>from</span> <span>&#39;@nearform/lyra&#39;</span><span>;</span>

<span>const</span> <span>db</span> <span>=</span> <span>create</span><span>(</span><span>{</span>
  <span>schema</span>: <span>{</span>
    <span>author</span>: <span>&#39;string&#39;</span><span>,</span>
    <span>quote</span>: <span>&#39;string&#39;</span>
  <span>}</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Lyra will only index string properties, but will allow you to set and store additional data if needed.</p>
<p dir="auto">Once the db instance is created, you can start adding some documents:</p>
<div data-snippet-clipboard-copy-content="insert(db, {
  quote: &#39;It is during our darkest moments that we must focus to see the light.&#39;,
  author: &#39;Aristotle&#39;
});

insert(db, {
  quote: &#39;If you really look closely, most overnight successes took a long time.&#39;,
  author: &#39;Steve Jobs&#39;
});

insert(db, {
  quote: &#39;If you are not willing to risk the usual, you will have to settle for the ordinary.&#39;,
  author: &#39;Jim Rohn&#39;
});

insert(db, {
  quote: &#39;You miss 100% of the shots you don\&#39;t take&#39;,
  author: &#39;Wayne Gretzky - Michael Scott&#39;
});"><pre><span>insert</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>quote</span>: <span>&#39;It is during our darkest moments that we must focus to see the light.&#39;</span><span>,</span>
  <span>author</span>: <span>&#39;Aristotle&#39;</span>
<span>}</span><span>)</span><span>;</span>

<span>insert</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>quote</span>: <span>&#39;If you really look closely, most overnight successes took a long time.&#39;</span><span>,</span>
  <span>author</span>: <span>&#39;Steve Jobs&#39;</span>
<span>}</span><span>)</span><span>;</span>

<span>insert</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>quote</span>: <span>&#39;If you are not willing to risk the usual, you will have to settle for the ordinary.&#39;</span><span>,</span>
  <span>author</span>: <span>&#39;Jim Rohn&#39;</span>
<span>}</span><span>)</span><span>;</span>

<span>insert</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>quote</span>: <span>&#39;You miss 100% of the shots you don\&#39;t take&#39;</span><span>,</span>
  <span>author</span>: <span>&#39;Wayne Gretzky - Michael Scott&#39;</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">After the data has been inserted, you can finally start to query the database.</p>
<div data-snippet-clipboard-copy-content="const searchResult = search(db, {
  term: &#39;if&#39;,
  properties: &#39;*&#39;
});"><pre><span>const</span> <span>searchResult</span> <span>=</span> <span>search</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>term</span>: <span>&#39;if&#39;</span><span>,</span>
  <span>properties</span>: <span>&#39;*&#39;</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">In the case above, you will be searching for all the documents containing the word <code>if</code>, looking up in every schema property (AKA index):</p>
<div data-snippet-clipboard-copy-content="{
  elapsed: 99,
  hits: [
    {
      id: &#39;ckAOPGTA5qLXx0MgNr1Zy&#39;,
      quote: &#39;If you really look closely, most overnight successes took a long time.&#39;,
      author: &#39;Steve Jobs&#39;
    },
    {
      id: &#39;fyl-_1veP78IO-wszP86Z&#39;,
      quote: &#39;If you are not willing to risk the usual, you will have to settle for the ordinary.&#39;,
      author: &#39;Jim Rohn&#39;
    }
  ],
  count: 2
}"><pre><span>{</span>
  <span>elapsed</span>: <span>99</span><span>,</span>
  <span>hits</span>: <span>[</span>
    <span>{</span>
      <span>id</span>: <span>&#39;ckAOPGTA5qLXx0MgNr1Zy&#39;</span><span>,</span>
      <span>quote</span>: <span>&#39;If you really look closely, most overnight successes took a long time.&#39;</span><span>,</span>
      <span>author</span>: <span>&#39;Steve Jobs&#39;</span>
    <span>}</span><span>,</span>
    <span>{</span>
      <span>id</span>: <span>&#39;fyl-_1veP78IO-wszP86Z&#39;</span><span>,</span>
      <span>quote</span>: <span>&#39;If you are not willing to risk the usual, you will have to settle for the ordinary.&#39;</span><span>,</span>
      <span>author</span>: <span>&#39;Jim Rohn&#39;</span>
    <span>}</span>
  <span>]</span><span>,</span>
  <span>count</span>: <span>2</span>
<span>}</span></pre></div>
<p dir="auto">You can also restrict the lookup to a specific property:</p>
<div data-snippet-clipboard-copy-content="const searchResult = search(db, {
  term: &#39;Michael&#39;,
  properties: [&#39;author&#39;]
});"><pre><span>const</span> <span>searchResult</span> <span>=</span> <span>search</span><span>(</span><span>db</span><span>,</span> <span>{</span>
  <span>term</span>: <span>&#39;Michael&#39;</span><span>,</span>
  <span>properties</span>: <span>[</span><span>&#39;author&#39;</span><span>]</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Result:</p>
<div data-snippet-clipboard-copy-content="{
  elapsed: 111,
  hits: [
    {
      id: &#39;L1tpqQxc0c2djrSN2a6TJ&#39;,
      quote: &#34;You miss 100% of the shots you don&#39;t take&#34;,
      author: &#39;Wayne Gretzky - Michael Scott&#39;
    }
  ],
  count: 1
}"><pre><span>{</span>
  <span>elapsed</span>: <span>111</span><span>,</span>
  <span>hits</span>: <span>[</span>
    <span>{</span>
      <span>id</span>: <span>&#39;L1tpqQxc0c2djrSN2a6TJ&#39;</span><span>,</span>
      <span>quote</span>: <span>&#34;You miss 100% of the shots you don&#39;t take&#34;</span><span>,</span>
      <span>author</span>: <span>&#39;Wayne Gretzky - Michael Scott&#39;</span>
    <span>}</span>
  <span>]</span><span>,</span>
  <span>count</span>: <span>1</span>
<span>}</span></pre></div>
<p dir="auto">If needed, you can also delete a given document by using the <code>remove</code> method:</p>
<div data-snippet-clipboard-copy-content="remove(db, &#39;L1tpqQxc0c2djrSN2a6TJ&#39;);"><pre><span>remove</span><span>(</span><span>db</span><span>,</span> <span>&#39;L1tpqQxc0c2djrSN2a6TJ&#39;</span><span>)</span><span>;</span></pre></div>

<p dir="auto">Lyra is licensed under the <a href="https://github.com/nearform/lyra/blob/main/LICENSE.md">Apache 2.0</a> license.</p>
</article>
          </div></div>
  </body>
</html>
