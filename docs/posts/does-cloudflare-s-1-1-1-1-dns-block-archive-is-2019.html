<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jarv.is/notes/cloudflare-dns-archive-is-blocked/">Original</a>
    <h1>Does Cloudflare’s 1.1.1.1 DNS Block Archive.is? (2019)</h1>
    
    <div id="readability-page-1" class="page"><div><p><strong>tl;dr:</strong> No. Quite the opposite, actually — <a target="_blank" rel="noopener noreferrer" href="https://archive.is/">Archive.is</a>’s owner is intentionally blocking 1.1.1.1 users.</p>
<p><img alt="Archive.today screenshot" fetchpriority="high" width="865" height="180" decoding="async" data-nimg="1" srcset="/_next/image/?url=%2Fstatic%2Fimages%2Fnotes%2Fcloudflare-dns-archive-is-blocked%2Farchive-is.png&amp;w=1080&amp;q=60 1x, /_next/image/?url=%2Fstatic%2Fimages%2Fnotes%2Fcloudflare-dns-archive-is-blocked%2Farchive-is.png&amp;w=1920&amp;q=60 2x" src="https://bellmar.medium.com/_next/image/?url=%2Fstatic%2Fimages%2Fnotes%2Fcloudflare-dns-archive-is-blocked%2Farchive-is.png&amp;w=1920&amp;q=60"/></p>
<p>A <a target="_blank" rel="noopener noreferrer" href="https://news.ycombinator.com/item?id=19828317">recent post on Hacker News</a> pointed out something I’ve noticed myself over the past year — the <a target="_blank" rel="noopener noreferrer" href="https://archive.is/">Archive.is</a> website archiving tool (aka <a target="_blank" rel="noopener noreferrer" href="https://archive.today/">Archive.today</a> and a few other TLDs) appears unresponsive when I’m on my home network, where I use Cloudflare’s fantastic public DNS service, <a target="_blank" rel="noopener noreferrer" href="https://1.1.1.1/">1.1.1.1</a>. I didn’t connect the two variables until I read this post, where somebody noticed that the Archive.is domain resolves for <a target="_blank" rel="noopener noreferrer" href="https://developers.google.com/speed/public-dns/">Google’s 8.8.8.8</a> DNS, but not 1.1.1.1. An interesting and timeless debate on <a target="_blank" rel="noopener noreferrer" href="https://www.adweek.com/digital/why-consumers-are-increasingly-willing-to-trade-privacy-for-convenience/">privacy versus convenience</a> ensued.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/eastdakota">Matthew Prince</a>, the CEO and co-founder of <a target="_blank" rel="noopener noreferrer" href="https://www.cloudflare.com/">Cloudflare</a> (who’s also <a target="_blank" rel="noopener noreferrer" href="https://news.ycombinator.com/user?id=eastdakota">very active</a> on Hacker News), responded to the observation <a target="_blank" rel="noopener noreferrer" href="https://news.ycombinator.com/item?id=19828702">with a detailed explanation</a> of what’s happening behind the scenes, revealing that Archive.is’s owner is actively refusing to resolve their own website for 1.1.1.1 users because Cloudflare’s DNS offers <strong><em>too much</em></strong> privacy. Excerpt below, emphasis mine:</p>
<blockquote>
<p>We don’t block archive.is or any other domain via 1.1.1.1. [...] Archive.is’s authoritative DNS servers <strong>return bad results to 1.1.1.1 when we query them</strong>. I’ve proposed we just fix it on our end but our team, quite rightly, said that too would violate the integrity of DNS and the privacy and security promises we made to our users when we launched the service. [...] The archive.is owner has explained that <strong>he returns bad results to us because we don’t pass along the EDNS subnet information</strong>. This information leaks information about a requester’s IP and, in turn, sacrifices the privacy of users. <a target="_blank" rel="noopener noreferrer" href="https://news.ycombinator.com/item?id=19828702">Read more »</a></p>
</blockquote>
<p>In other words, Archive.is’s nameservers throw a hissy fit and return a bogus IP when Cloudflare <strong>doesn’t</strong> leak your geolocation info to them via the optional <a target="_blank" rel="noopener noreferrer" href="https://tools.ietf.org/html/rfc7871">EDNS client subnet feature</a>. The owner of Archive.is has plainly admitted this with <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/archiveis/status/1018691421182791680">a questionable claim</a> (in my opinion) about the lack of EDNS information causing him “so many troubles.”</p>

<p>He’s even gone as far as <a target="_blank" rel="noopener noreferrer" href="https://community.cloudflare.com/t/archive-is-error-1001/18227/7">replying to support requests</a> by telling people to switch to Google’s DNS, which — surprise! — offers your location to nameservers <a target="_blank" rel="noopener noreferrer" href="https://developers.google.com/speed/public-dns/docs/ecs">with pleasure</a>.</p>
<p>I wrote the <a target="_blank" rel="noopener noreferrer" href="https://news.ycombinator.com/item?id=19828898">following reply</a> to Matthew, praising his team’s focus on the big picture:</p>
<blockquote>
<p>Honestly, Cloudflare choosing <em>not</em> to hastily slap a band-aid on a problem like this just makes me feel more compelled to continue using 1.1.1.1.</p>
<p>I hesitate to compare this to Apple calling themselves “courageous” when removing the headphone jack, but in this case, I think the word is appropriate. I’ll happily stand behind you guys if you take some PR hits while forcing the rest of the industry to make DNS safer — since it is understandable, admittedly, for users to conclude that “Cloudflare is blocking websites, sound the alarms!” at first glance.</p>
</blockquote>
<p>Sure, it’s annoying that I’ll need to use a VPN or change my DNS resolvers to use a pretty slick (and otherwise convenient) website archiver. But I’m more happy to see that Cloudflare is playing the privacy long-game, even at the risk of their users concluding that they’re blocking websites accessible to everyone else on the internet.</p></div></div>
  </body>
</html>
