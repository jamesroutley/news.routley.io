<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/openai/swarm">Original</a>
    <h1>Swarm, a new agent framework by OpenAI</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openai/swarm/blob/main/assets/logo.png"><img src="https://github.com/openai/swarm/raw/main/assets/logo.png" alt="Swarm Logo"/></a></p>

<p dir="auto">An ergonomic, lightweight multi-agent orchestration framework.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p dir="auto">Swarm is currently an experimental sample framework intended to explore ergonomic interfaces for multi-agent systems. It is not intended to be used in production, and therefore has no official support. (This also means we will not be reviewing PRs or issues!)</p>
<p dir="auto">The primary goal of Swarm is to showcase the handoff &amp; routines patterns explored in the <a href="https://cookbook.openai.com/examples/orchestrating_agents" rel="nofollow">Orchestrating Agents: Handoffs &amp; Routines</a> cookbook. It is not meant as a standalone library, and is primarily for educational purposes.</p>
</div>

<p dir="auto">Requires Python 3.10+</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install git+ssh://git@github.com/openai/swarm.git"><pre>pip install git+ssh://git@github.com/openai/swarm.git</pre></div>
<p dir="auto">or</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install git+https://github.com/openai/swarm.git"><pre>pip install git+https://github.com/openai/swarm.git</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="from swarm import Swarm, Agent

client = Swarm()

def transfer_to_agent_b():
    return agent_b


agent_a = Agent(
    name=&#34;Agent A&#34;,
    instructions=&#34;You are a helpful agent.&#34;,
    functions=[transfer_to_agent_b],
)

agent_b = Agent(
    name=&#34;Agent B&#34;,
    instructions=&#34;Only speak in Haikus.&#34;,
)

response = client.run(
    agent=agent_a,
    messages=[{&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;I want to talk to agent B.&#34;}],
)

print(response.messages[-1][&#34;content&#34;])"><pre><span>from</span> <span>swarm</span> <span>import</span> <span>Swarm</span>, <span>Agent</span>

<span>client</span> <span>=</span> <span>Swarm</span>()

<span>def</span> <span>transfer_to_agent_b</span>():
    <span>return</span> <span>agent_b</span>


<span>agent_a</span> <span>=</span> <span>Agent</span>(
    <span>name</span><span>=</span><span>&#34;Agent A&#34;</span>,
    <span>instructions</span><span>=</span><span>&#34;You are a helpful agent.&#34;</span>,
    <span>functions</span><span>=</span>[<span>transfer_to_agent_b</span>],
)

<span>agent_b</span> <span>=</span> <span>Agent</span>(
    <span>name</span><span>=</span><span>&#34;Agent B&#34;</span>,
    <span>instructions</span><span>=</span><span>&#34;Only speak in Haikus.&#34;</span>,
)

<span>response</span> <span>=</span> <span>client</span>.<span>run</span>(
    <span>agent</span><span>=</span><span>agent_a</span>,
    <span>messages</span><span>=</span>[{<span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: <span>&#34;I want to talk to agent B.&#34;</span>}],
)

<span>print</span>(<span>response</span>.<span>messages</span>[<span>-</span><span>1</span>][<span>&#34;content&#34;</span>])</pre></div>
<div data-snippet-clipboard-copy-content="Hope glimmers brightly,
New paths converge gracefully,
What can I assist?"><pre><code>Hope glimmers brightly,
New paths converge gracefully,
What can I assist?
</code></pre></div>

<ul dir="auto">
<li><a href="#overview">Overview</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#documentation">Documentation</a>
<ul dir="auto">
<li><a href="#running-swarm">Running Swarm</a></li>
<li><a href="#agents">Agents</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#streaming">Streaming</a></li>
</ul>
</li>
<li><a href="#evaluations">Evaluations</a></li>
<li><a href="#utils">Utils</a></li>
</ul>

<p dir="auto">Swarm focuses on making agent <strong>coordination</strong> and <strong>execution</strong> lightweight, highly controllable, and easily testable.</p>
<p dir="auto">It accomplishes this through two primitive abstractions: <code>Agent</code>s and <strong>handoffs</strong>. An <code>Agent</code> encompasses <code>instructions</code> and <code>tools</code>, and can at any point choose to hand off a conversation to another <code>Agent</code>.</p>
<p dir="auto">These primitives are powerful enough to express rich dynamics between tools and networks of agents, allowing you to build scalable, real-world solutions while avoiding a steep learning curve.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">Swarm Agents are not related to Assistants in the Assistants API. They are named similarly for convenience, but are otherwise completely unrelated. Swarm is entirely powered by the Chat Completions API and is hence stateless between calls.</p>
</div>

<p dir="auto">Swarm is lightweight, scalable, and highly customizable by design. It is best suited for situations dealing with a large number of independent capabilities and instructions that are difficult to encode into a single prompt.</p>
<p dir="auto">The Assistants API is a great option for developers looking for fully-hosted threads and built in memory management and retrieval. However, Swarm is optimal for developers who want full transparency and fine-grained control over context, steps, and tool calls. Swarm runs (almost) entirely on the client and, much like the Chat Completions API, does not store state between calls.</p>

<p dir="auto">Check out <code>/examples</code> for inspiration! Learn more about each one in its README.</p>
<ul dir="auto">
<li><a href="https://github.com/openai/swarm/blob/main/examples/basic"><code>basic</code></a>: Simple examples of fundamentals like setup, function calling, handoffs, and context variables</li>
<li><a href="https://github.com/openai/swarm/blob/main/examples/triage_agent"><code>triage_agent</code></a>: Simple example of setting up a basic triage step to hand off to the right agent</li>
<li><a href="https://github.com/openai/swarm/blob/main/examples/weather_agent"><code>weather_agent</code></a>: Simple example of function calling</li>
<li><a href="https://github.com/openai/swarm/blob/main/examples/airline"><code>airline</code></a>: A multi-agent setup for handling different customer service requests in an airline context.</li>
<li><a href="https://github.com/openai/swarm/blob/main/examples/support_bot"><code>support_bot</code></a>: A customer service bot which includes a user interface agent and a help center agent with several tools</li>
<li><a href="https://github.com/openai/swarm/blob/main/examples/personal_shopper"><code>personal_shopper</code></a>: A personal shopping agent that can help with making sales and refunding orders</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openai/swarm/blob/main/assets/swarm_diagram.png"><img src="https://github.com/openai/swarm/raw/main/assets/swarm_diagram.png" alt="Swarm Diagram"/></a></p>

<p dir="auto">Start by instantiating a Swarm client (which internally just instantiates an <code>OpenAI</code> client).</p>
<div dir="auto" data-snippet-clipboard-copy-content="from swarm import Swarm

client = Swarm()"><pre><span>from</span> <span>swarm</span> <span>import</span> <span>Swarm</span>

<span>client</span> <span>=</span> <span>Swarm</span>()</pre></div>

<p dir="auto">Swarm&#39;s <code>run()</code> function is analogous to the <code>chat.completions.create()</code> function in the Chat Completions API – it takes <code>messages</code> and returns <code>messages</code> and saves no state between calls. Importantly, however, it also handles Agent function execution, hand-offs, context variable references, and can take multiple turns before returning to the user.</p>
<p dir="auto">At its core, Swarm&#39;s <code>client.run()</code> implements the following loop:</p>
<ol dir="auto">
<li>Get a completion from the current Agent</li>
<li>Execute tool calls and append results</li>
<li>Switch Agent if necessary</li>
<li>Update context variables, if necessary</li>
<li>If no new function calls, return</li>
</ol>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>agent</strong></td>
<td><code>Agent</code></td>
<td>The (initial) agent to be called.</td>
<td>(required)</td>
</tr>
<tr>
<td><strong>messages</strong></td>
<td><code>List</code></td>
<td>A list of message objects, identical to <a href="https://platform.openai.com/docs/api-reference/chat/create#chat-create-messages" rel="nofollow">Chat Completions <code>messages</code></a></td>
<td>(required)</td>
</tr>
<tr>
<td><strong>context_variables</strong></td>
<td><code>dict</code></td>
<td>A dictionary of additional context variables, available to functions and Agent instructions</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><strong>max_turns</strong></td>
<td><code>int</code></td>
<td>The maximum number of conversational turns allowed</td>
<td><code>float(&#34;inf&#34;)</code></td>
</tr>
<tr>
<td><strong>model_override</strong></td>
<td><code>str</code></td>
<td>An optional string to override the model being used by an Agent</td>
<td><code>None</code></td>
</tr>
<tr>
<td><strong>execute_tools</strong></td>
<td><code>bool</code></td>
<td>If <code>False</code>, interrupt execution and immediately returns <code>tool_calls</code> message when an Agent tries to call a function</td>
<td><code>True</code></td>
</tr>
<tr>
<td><strong>stream</strong></td>
<td><code>bool</code></td>
<td>If <code>True</code>, enables streaming responses</td>
<td><code>False</code></td>
</tr>
<tr>
<td><strong>debug</strong></td>
<td><code>bool</code></td>
<td>If <code>True</code>, enables debug logging</td>
<td><code>False</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Once <code>client.run()</code> is finished (after potentially multiple calls to agents and tools) it will return a <code>Response</code> containing all the relevant updated state. Specifically, the new <code>messages</code>, the last <code>Agent</code> to be called, and the most up-to-date <code>context_variables</code>. You can pass these values (plus new user messages) in to your next execution of <code>client.run()</code> to continue the interaction where it left off – much like <code>chat.completions.create()</code>. (The <code>run_demo_loop</code> function implements an example of a full execution loop in <code>/swarm/repl/repl.py</code>.)</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>messages</strong></td>
<td><code>List</code></td>
<td>A list of message objects generated during the conversation. Very similar to <a href="https://platform.openai.com/docs/api-reference/chat/create#chat-create-messages" rel="nofollow">Chat Completions <code>messages</code></a>, but with a <code>sender</code> field indicating which <code>Agent</code> the message originated from.</td>
</tr>
<tr>
<td><strong>agent</strong></td>
<td><code>Agent</code></td>
<td>The last agent to handle a message.</td>
</tr>
<tr>
<td><strong>context_variables</strong></td>
<td><code>dict</code></td>
<td>The same as the input variables, plus any changes.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">An <code>Agent</code> simply encapsulates a set of <code>instructions</code> with a set of <code>functions</code> (plus some additional settings below), and has the capability to hand off execution to another <code>Agent</code>.</p>
<p dir="auto">While it&#39;s tempting to personify an <code>Agent</code> as &#34;someone who does X&#34;, it can also be used to represent a very specific workflow or step defined by a set of <code>instructions</code> and <code>functions</code> (e.g. a set of steps, a complex retrieval, single step of data transformation, etc). This allows <code>Agent</code>s to be composed into a network of &#34;agents&#34;, &#34;workflows&#34;, and &#34;tasks&#34;, all represented by the same primitive.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td><code>str</code></td>
<td>The name of the agent.</td>
<td><code>&#34;Agent&#34;</code></td>
</tr>
<tr>
<td><strong>model</strong></td>
<td><code>str</code></td>
<td>The model to be used by the agent.</td>
<td><code>&#34;gpt-4o&#34;</code></td>
</tr>
<tr>
<td><strong>instructions</strong></td>
<td><code>str</code> or <code>func() -&gt; str</code></td>
<td>Instructions for the agent, can be a string or a callable returning a string.</td>
<td><code>&#34;You are a helpful agent.&#34;</code></td>
</tr>
<tr>
<td><strong>functions</strong></td>
<td><code>List</code></td>
<td>A list of functions that the agent can call.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><strong>tool_choice</strong></td>
<td><code>str</code></td>
<td>The tool choice for the agent, if any.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto"><code>Agent</code> <code>instructions</code> are directly converted into the <code>system</code> prompt of a conversation (as the first message). Only the <code>instructions</code> of the active <code>Agent</code> will be present at any given time (e.g. if there is an <code>Agent</code> handoff, the <code>system</code> prompt will change, but the chat history will not.)</p>
<div dir="auto" data-snippet-clipboard-copy-content="agent = Agent(
   instructions=&#34;You are a helpful agent.&#34;
)"><pre><span>agent</span> <span>=</span> <span>Agent</span>(
   <span>instructions</span><span>=</span><span>&#34;You are a helpful agent.&#34;</span>
)</pre></div>
<p dir="auto">The <code>instructions</code> can either be a regular <code>str</code>, or a function that returns a <code>str</code>. The function can optionally receive a <code>context_variables</code> parameter, which will be populated by the <code>context_variables</code> passed into <code>client.run()</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="def instructions(context_variables):
   user_name = context_variables[&#34;user_name&#34;]
   return f&#34;Help the user, {user_name}, do whatever they want.&#34;

agent = Agent(
   instructions=instructions
)
response = client.run(
   agent=agent,
   messages=[{&#34;role&#34;:&#34;user&#34;, &#34;content&#34;: &#34;Hi!&#34;}],
   context_variables={&#34;user_name&#34;:&#34;John&#34;}
)
print(response.messages[-1][&#34;content&#34;])"><pre><span>def</span> <span>instructions</span>(<span>context_variables</span>):
   <span>user_name</span> <span>=</span> <span>context_variables</span>[<span>&#34;user_name&#34;</span>]
   <span>return</span> <span>f&#34;Help the user, <span><span>{</span><span>user_name</span><span>}</span></span>, do whatever they want.&#34;</span>

<span>agent</span> <span>=</span> <span>Agent</span>(
   <span>instructions</span><span>=</span><span>instructions</span>
)
<span>response</span> <span>=</span> <span>client</span>.<span>run</span>(
   <span>agent</span><span>=</span><span>agent</span>,
   <span>messages</span><span>=</span>[{<span>&#34;role&#34;</span>:<span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: <span>&#34;Hi!&#34;</span>}],
   <span>context_variables</span><span>=</span>{<span>&#34;user_name&#34;</span>:<span>&#34;John&#34;</span>}
)
<span>print</span>(<span>response</span>.<span>messages</span>[<span>-</span><span>1</span>][<span>&#34;content&#34;</span>])</pre></div>
<div data-snippet-clipboard-copy-content="Hi John, how can I assist you today?"><pre><code>Hi John, how can I assist you today?
</code></pre></div>

<ul dir="auto">
<li>Swarm <code>Agent</code>s can call python functions directly.</li>
<li>Function should usually return a <code>str</code> (values will be attempted to be cast as a <code>str</code>).</li>
<li>If a function returns an <code>Agent</code>, execution will be transfered to that <code>Agent</code>.</li>
<li>If a function defines a <code>context_variables</code> parameter, it will be populated by the <code>context_variables</code> passed into <code>client.run()</code>.</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="def greet(context_variables, language):
   user_name = context_variables[&#34;user_name&#34;]
   greeting = &#34;Hola&#34; if language.lower() == &#34;spanish&#34; else &#34;Hello&#34;
   print(f&#34;{greeting}, {user_name}!&#34;)
   return &#34;Done&#34;

agent = Agent(
   functions=[print_hello]
)

client.run(
   agent=agent,
   messages=[{&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;Usa greet() por favor.&#34;}],
   context_variables={&#34;user_name&#34;: &#34;John&#34;}
)"><pre><span>def</span> <span>greet</span>(<span>context_variables</span>, <span>language</span>):
   <span>user_name</span> <span>=</span> <span>context_variables</span>[<span>&#34;user_name&#34;</span>]
   <span>greeting</span> <span>=</span> <span>&#34;Hola&#34;</span> <span>if</span> <span>language</span>.<span>lower</span>() <span>==</span> <span>&#34;spanish&#34;</span> <span>else</span> <span>&#34;Hello&#34;</span>
   <span>print</span>(<span>f&#34;<span><span>{</span><span>greeting</span><span>}</span></span>, <span><span>{</span><span>user_name</span><span>}</span></span>!&#34;</span>)
   <span>return</span> <span>&#34;Done&#34;</span>

<span>agent</span> <span>=</span> <span>Agent</span>(
   <span>functions</span><span>=</span>[<span>print_hello</span>]
)

<span>client</span>.<span>run</span>(
   <span>agent</span><span>=</span><span>agent</span>,
   <span>messages</span><span>=</span>[{<span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: <span>&#34;Usa greet() por favor.&#34;</span>}],
   <span>context_variables</span><span>=</span>{<span>&#34;user_name&#34;</span>: <span>&#34;John&#34;</span>}
)</pre></div>

<ul dir="auto">
<li>If an <code>Agent</code> function call has an error (missing function, wrong argument, error) an error response will be appended to the chat so the <code>Agent</code> can recover gracefully.</li>
<li>If multiple functions are called by the <code>Agent</code>, they will be executed in that order.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Handoffs and Updating Context Variables</h3><a id="user-content-handoffs-and-updating-context-variables" aria-label="Permalink: Handoffs and Updating Context Variables" href="#handoffs-and-updating-context-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">An <code>Agent</code> can hand off to another <code>Agent</code> by returning it in a <code>function</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="sales_agent = Agent(name=&#34;Sales Agent&#34;)

def transfer_to_sales():
   return sales_agent

agent = Agent(functions=[transfer_to_sales])

response = client.run(agent, [{&#34;role&#34;:&#34;user&#34;, &#34;content&#34;:&#34;Transfer me to sales.&#34;}])
print(response.agent.name)"><pre><span>sales_agent</span> <span>=</span> <span>Agent</span>(<span>name</span><span>=</span><span>&#34;Sales Agent&#34;</span>)

<span>def</span> <span>transfer_to_sales</span>():
   <span>return</span> <span>sales_agent</span>

<span>agent</span> <span>=</span> <span>Agent</span>(<span>functions</span><span>=</span>[<span>transfer_to_sales</span>])

<span>response</span> <span>=</span> <span>client</span>.<span>run</span>(<span>agent</span>, [{<span>&#34;role&#34;</span>:<span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>:<span>&#34;Transfer me to sales.&#34;</span>}])
<span>print</span>(<span>response</span>.<span>agent</span>.<span>name</span>)</pre></div>

<p dir="auto">It can also update the <code>context_variables</code> by returning a more complete <code>Result</code> object. This can also contain a <code>value</code> and an <code>agent</code>, in case you want a single function to return a value, update the agent, and update the context variables (or any subset of the three).</p>
<div dir="auto" data-snippet-clipboard-copy-content="sales_agent = Agent(name=&#34;Sales Agent&#34;)

def talk_to_sales():
   print(&#34;Hello, World!&#34;)
   return Result(
       value=&#34;Done&#34;,
       agent=sales_agent,
       context_variables={&#34;department&#34;: &#34;sales&#34;}
   )

agent = Agent(functions=[talk_to_sales])

response = client.run(
   agent=agent,
   messages=[{&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;Transfer me to sales&#34;}],
   context_variables={&#34;user_name&#34;: &#34;John&#34;}
)
print(response.agent.name)
print(response.context_variables)"><pre><span>sales_agent</span> <span>=</span> <span>Agent</span>(<span>name</span><span>=</span><span>&#34;Sales Agent&#34;</span>)

<span>def</span> <span>talk_to_sales</span>():
   <span>print</span>(<span>&#34;Hello, World!&#34;</span>)
   <span>return</span> <span>Result</span>(
       <span>value</span><span>=</span><span>&#34;Done&#34;</span>,
       <span>agent</span><span>=</span><span>sales_agent</span>,
       <span>context_variables</span><span>=</span>{<span>&#34;department&#34;</span>: <span>&#34;sales&#34;</span>}
   )

<span>agent</span> <span>=</span> <span>Agent</span>(<span>functions</span><span>=</span>[<span>talk_to_sales</span>])

<span>response</span> <span>=</span> <span>client</span>.<span>run</span>(
   <span>agent</span><span>=</span><span>agent</span>,
   <span>messages</span><span>=</span>[{<span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: <span>&#34;Transfer me to sales&#34;</span>}],
   <span>context_variables</span><span>=</span>{<span>&#34;user_name&#34;</span>: <span>&#34;John&#34;</span>}
)
<span>print</span>(<span>response</span>.<span>agent</span>.<span>name</span>)
<span>print</span>(<span>response</span>.<span>context_variables</span>)</pre></div>
<div data-snippet-clipboard-copy-content="Sales Agent
{&#39;department&#39;: &#39;sales&#39;, &#39;user_name&#39;: &#39;John&#39;}"><pre><code>Sales Agent
{&#39;department&#39;: &#39;sales&#39;, &#39;user_name&#39;: &#39;John&#39;}
</code></pre></div>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">If an <code>Agent</code> calls multiple functions to hand-off to an <code>Agent</code>, only the last handoff function will be used.</p>
</div>

<p dir="auto">Swarm automatically converts functions into a JSON Schema that is passed into Chat Completions <code>tools</code>.</p>
<ul dir="auto">
<li>Docstrings are turned into the function <code>description</code>.</li>
<li>Parameters without default values are set to <code>required</code>.</li>
<li>Type hints are mapped to the parameter&#39;s <code>type</code> (and default to <code>string</code>).</li>
<li>Per-parameter descriptions are not explicitly supported, but should work similarly if just added in the docstring. (In the future docstring argument parsing may be added.)</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="def greet(name, age: int, location: str = &#34;New York&#34;):
   &#34;&#34;&#34;Greets the user. Make sure to get their name and age before calling.

   Args:
      name: Name of the user.
      age: Age of the user.
      location: Best place on earth.
   &#34;&#34;&#34;
   print(f&#34;Hello {name}, glad you are {age} in {location}!&#34;)"><pre><span>def</span> <span>greet</span>(<span>name</span>, <span>age</span>: <span>int</span>, <span>location</span>: <span>str</span> <span>=</span> <span>&#34;New York&#34;</span>):
   <span>&#34;&#34;&#34;Greets the user. Make sure to get their name and age before calling.</span>
<span></span>
<span>   Args:</span>
<span>      name: Name of the user.</span>
<span>      age: Age of the user.</span>
<span>      location: Best place on earth.</span>
<span>   &#34;&#34;&#34;</span>
   <span>print</span>(<span>f&#34;Hello <span><span>{</span><span>name</span><span>}</span></span>, glad you are <span><span>{</span><span>age</span><span>}</span></span> in <span><span>{</span><span>location</span><span>}</span></span>!&#34;</span>)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="{
   &#34;type&#34;: &#34;function&#34;,
   &#34;function&#34;: {
      &#34;name&#34;: &#34;greet&#34;,
      &#34;description&#34;: &#34;Greets the user. Make sure to get their name and age before calling.\n\nArgs:\n   name: Name of the user.\n   age: Age of the user.\n   location: Best place on earth.&#34;,
      &#34;parameters&#34;: {
         &#34;type&#34;: &#34;object&#34;,
         &#34;properties&#34;: {
            &#34;name&#34;: {&#34;type&#34;: &#34;string&#34;},
            &#34;age&#34;: {&#34;type&#34;: &#34;integer&#34;},
            &#34;location&#34;: {&#34;type&#34;: &#34;string&#34;}
         },
         &#34;required&#34;: [&#34;name&#34;, &#34;age&#34;]
      }
   }
}"><pre><span>{</span>
   <span>&#34;type&#34;</span>: <span>&#34;function&#34;</span><span>,</span>
   <span>&#34;function&#34;</span>: <span>{</span>
      <span>&#34;name&#34;</span>: <span>&#34;greet&#34;</span><span>,</span>
      <span>&#34;description&#34;</span>: <span>&#34;Greets the user. Make sure to get their name and age before calling.\n\nArgs:\n   name: Name of the user.\n   age: Age of the user.\n   location: Best place on earth.&#34;</span><span>,</span>
      <span>&#34;parameters&#34;</span>: <span>{</span>
         <span>&#34;type&#34;</span>: <span>&#34;object&#34;</span><span>,</span>
         <span>&#34;properties&#34;</span>: <span>{</span>
            <span>&#34;name&#34;</span>: <span>{</span><span>&#34;type&#34;</span>: <span>&#34;string&#34;</span><span>}</span><span>,</span>
            <span>&#34;age&#34;</span>: <span>{</span><span>&#34;type&#34;</span>: <span>&#34;integer&#34;</span><span>}</span><span>,</span>
            <span>&#34;location&#34;</span>: <span>{</span><span>&#34;type&#34;</span>: <span>&#34;string&#34;</span><span>}</span>
         <span>}</span><span>,</span>
         <span>&#34;required&#34;</span>: <span>[</span><span>&#34;name&#34;</span><span>,</span> <span>&#34;age&#34;</span><span>]</span>
      <span>}</span>
   <span>}</span>
<span>}</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="stream = client.run(agent, messages, stream=True)
for chunk in stream:
   print(chunk)"><pre><span>stream</span> <span>=</span> <span>client</span>.<span>run</span>(<span>agent</span>, <span>messages</span>, <span>stream</span><span>=</span><span>True</span>)
<span>for</span> <span>chunk</span> <span>in</span> <span>stream</span>:
   <span>print</span>(<span>chunk</span>)</pre></div>
<p dir="auto">Uses the same events as <a href="https://platform.openai.com/docs/api-reference/streaming" rel="nofollow">Chat Completions API streaming</a>. See <code>process_and_print_streaming_response</code> in <code>/swarm/repl/repl.py</code> as an example.</p>
<p dir="auto">Two new event types have been added:</p>
<ul dir="auto">
<li><code>{&#34;delim&#34;:&#34;start&#34;}</code> and <code>{&#34;delim&#34;:&#34;start&#34;}</code>, to signal each time an <code>Agent</code> handles a single message (response or function call). This helps identify switches between <code>Agent</code>s.</li>
<li><code>{&#34;response&#34;: Response}</code> will return a <code>Response</code> object at the end of a stream with the aggregated (complete) response, for convenience.</li>
</ul>

<p dir="auto">Evaluations are crucial to any project, and we encourage developers to bring their own eval suites to test the performance of their swarms. For reference, we have some examples for how to eval swarm in the <code>airline</code>, <code>weather_agent</code> and <code>triage_agent</code> quickstart examples. See the READMEs for more details.</p>

<p dir="auto">Use the <code>run_demo_loop</code> to test out your swarm! This will run a REPL on your command line. Supports streaming.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from swarm.repl import run_demo_loop
...
run_demo_loop(agent, stream=True)"><pre><span>from</span> <span>swarm</span>.<span>repl</span> <span>import</span> <span>run_demo_loop</span>
...
<span>run_demo_loop</span>(<span>agent</span>, <span>stream</span><span>=</span><span>True</span>)</pre></div>

<ul dir="auto">
<li>Ilan Bigio - <a href="https://github.com/ibigio">ibigio</a></li>
<li>James Hills - <a href="https://github.com/jhills20">jhills20</a></li>
<li>Shyamal Anadkat - <a href="https://github.com/shyamal-anadkat">shyamal-anadkat</a></li>
<li>Charu Jaiswal - <a href="https://github.com/charuj">charuj</a></li>
<li>Colin Jarvis - <a href="https://github.com/colin-openai">colin-openai</a></li>
</ul>
</article></div></div>
  </body>
</html>
