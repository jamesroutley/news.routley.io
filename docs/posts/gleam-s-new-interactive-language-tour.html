<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gleam.run/news/gleams-new-interactive-language-tour/">Original</a>
    <h1>Gleam&#39;s New Interactive Language Tour</h1>
    
    <div id="readability-page-1" class="page"><div class="page">
  <div>
  <p>
    Published 19 Jan, 2024 by Louis Pilfold
  </p>
<p>Gleam is a type safe and scalable language for the Erlang virtual machine and
JavaScript runtimes. Today Gleam‚Äôs new language tour has been launched, a way to
try and to learn Gleam without having to install anything on your computer.
Check it out, it looks like this:</p>

<p><a href="https://tour.gleam.run/"><img alt="A Gleam project being created and compiled with dependencies from both targets" src="https://gleam.run/images/news/gleams-new-interactive-language-tour/browser.png"/></a></p>

<p>The language tour guides you through the language, from the basics to the most
advanced features, introducing each concept in a way that builds on what has
come before. Gleam is a small and consistent language, designed to be as easy to
learn and predictable as possible, so the tour manages to cover the entire
language while still being a relatively short read. Once you‚Äôve completed the
tour you‚Äôll know everything you need to know to write your own Gleam programs,
or make contributions to existing ones.</p>

<p>The examples and any code you write are compiled and execute entirely
within the browser, rather sending the code to a build server for processing.
This coupled with Gleam‚Äôs fast compilation speed means that the tour is
super-snappy. You can experiment and try things without getting bogged down
waiting for the results to come back.</p>

<p>We‚Äôre super happy with how this work has turned out, and we‚Äôre hoping that this
will make it easier than ever for people to go from ‚ÄúGleam sounds interesting‚Äù
to ‚ÄúI can write code in Gleam!‚Äù.</p>

<p>Sound good? Find it at <a href="https://tour.gleam.run/">https://tour.gleam.run/</a> ‚ú®</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>Gleam‚Äôs <a href="https://github.com/gleam-lang/gleam/">compiler</a> is written in Rust, and all input/output is
provided to it via dependency injection. This means that it‚Äôs possible to
replace the command-line interface that reads and writes to files with an
in-memory one which can be compiled to <a href="https://webassembly.org/">WebAssembly</a> and run in the
browser.</p>

<p>Gleam compiles to either Erlang or JavaScript, so in the language tour
JavaScript is used as the target, and this compiled code can be executed
directly in the browser. Executing the code is a little tricky as Gleam outputs
esmodules, which cannot run using JavaScript‚Äôs <code>eval</code> function.
Instead the compiled code is base64 encoded and dynamically imported as a data
URL, after which the <code>main</code> function can be called.</p>

<pre><code>const encoded = btoa(unescape(encodeURIComponent(code)));
const module = await import(&#34;data:text/javascript;base64,&#34; + encoded);
module.main();
</code></pre>

<p>The other tricky part is that we need the code to be able to import and use
modules from the standard library. Compiled Gleam code uses relative paths to
import other Gleam modules. These paths get edited slightly in the tour to point
to where we have a precompiled copy of the standard library, which the browser can
download as needed. Another approach here would have been to include a
JavaScript bundler in the browser, but this more lightweight approach works well
for our needs.</p>

<p>The compiler is fast, but it‚Äôs important that the website and the browser
remain responsive even on slower hardware, or if compilation is slow for some
other unexpected reason. To avoid this problem compilation and execution is done
in a different thread to the browser‚Äôs UI using JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">Web Workers</a>.</p>

<p>The <a href="https://kazzkiq.github.io/CodeFlask.js/">CodeFlask</a> library is used to provide the code editor and syntax
highlighting. This was selected as it‚Äôs a lightweight and easy to use text
editor that has just the features we need, and no more.</p>

<p>The website is a static site that is deployed to <a href="https://pages.github.com/">GitHub Pages</a>. Rather
than using any specific static site generator it is built using a small Gleam
program that can be found <a href="https://github.com/gleam-lang/language-tour">here</a>.</p>

<h2 id="all-the-thanks">All the thanks</h2>

<p>Thanks to <a href="https://github.com/JohnDoneth">John Doneth</a> for his work getting the
compiler to work within the browser, and to
<a href="https://github.com/Enderchief">Enderchief</a> for taking this further still.</p>

<p>Thanks to <a href="https://github.com/hayleigh-dot-dev/">Hayleigh Thompson</a> for her
JavaScript witchcraft, including but not limited to helping us figure out what
our options are for executing esmodules in the browser.</p>

<p>Thanks to <a href="https://github.com/hibachrach/">Hazel Bachrach</a> for testing the tour
and suggesting use of a second thread, to keep the experience good for folks on
all devices.</p>

<p>Thanks to <a href="https://github.com/dmmulroy">Dillon Mulroy</a>, <a href="https://github.com/giacomocavalieri/">Giacomo Cavalieri</a>, <a href="https://github.com/inoas/">inoas</a>, and <a href="https://github.com/hunkyjimpjorps/">jimpjorps</a>
for giving feedback on the content of the tour, as well as unpicking my many
typos and grammatical errors.</p>

<p>This has been a long project, so I‚Äôm sure I‚Äôve missed some important people. I‚Äôm
very grateful for everyone‚Äôs help, thank you.</p>

<h2 id="support-gleam-development">Support Gleam development</h2>

<p>If you like Gleam consider becoming a sponsor or asking your employer to
<a href="https://github.com/sponsors/lpil">sponsor Gleam development</a>. I work full time
on Gleam and your kind sponsorship is how I pay my bills.</p>

<p>Thanks for reading! Happy hacking! üíú</p>

</div>

</div></div>
  </body>
</html>
