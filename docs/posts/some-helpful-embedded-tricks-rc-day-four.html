<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://the.scapegoat.dev/some-helpful-embedded-trick-rc-day-4/">Original</a>
    <h1>Some Helpful Embedded Tricks - RC Day Four</h1>
    
    <div id="readability-page-1" class="page"><div>
<div><h2 id="1-tape-everything-down">#1 - Tape everything down.</h2>
<p>Nothing is worse than ripping off connectors and wires, creating short circuits because your table is metal, having oscilloscope probes fling across the board touching random pins. Tape everything down to a piece of cardboard. Go even crazier and create custom rigs with MDF, additional plugs, buttons, switches, relays, lightbulbs.</p>
<p><img alt="Embedded cardboard" src="https://bear-images.sfo2.cdn.digitaloceanspaces.com/manuel-1656680295.jpg"/></p>
<h2 id="2-get-a-scope">#2 Get a scope</h2>
<p>Having an oscilloscope completely changes the way you approach a bug / hardware design.
I bought mine in 2003 and have never needed another one since, but I know there are plenty cheap and portable ones out there these days.
I do have a small saelae probe that will do in a pinch, and is useful for digital communication problems, but it doesn&#39;t replace a real scope.
You want to put a couple of probes here and there, turn 2 buttons, and get to look at your system behaving &#34;for real&#34;.
If you are serious about embedded, get a scope that fits like a glove. It&#39;s the same as getting a good chef&#39;s knife, you don&#39;t want a tool that irritates you.</p>
<h2 id="3-learn-gdb-commands">#3 Learn gdb <code>commands</code></h2>
<p>In gdb, you can set breakpoints and watchpoints.
Then, you can attach command sequences to each breakpoint watchpoints, kind of like a printf debugging that doesn&#39;t require recompile/reflashing.
The downside is that it often completely messes up the timing of your firmware, depending on the chip / probe / debug protocol combination.</p>
<p>For example:</p>
<div><pre><span></span><span>break</span> <span>main</span>.<span>rs</span>:<span>30</span>
<span>commands</span> <span>1</span>
<span>print</span> <span>x</span>
<span>print</span> <span>y</span>
<span>c</span> 
<span>end</span>
</pre></div>

<p>will add a breakpoint at main.rs:30, and then print out x, y before continuining.</p>
<h2 id="4-be-creative-in-your-debugging-input-output-channels">#4 - Be creative in your &#34;debugging input/output&#34; channels</h2>
<p>You don&#39;t need to just do printf debugging over the debugging interface or the serial interface. You can toggle GPIO pins, use LEDs. Other creative ideas I&#39;ve used in the past:</p>
<ul>
<li>Rotate a galvo to show how much memory is full and attach a little gauge to it.</li>
<li>Output MIDI notes on a scale because the serial interface was used for MIDI -&gt; if the melody changes, something weird happened.</li>
<li>Attach a piezo speaker and use variations in pitch to recognize timing issues / jitter. In general using audio for debugging is great because it frees up your eyes to look at logs or at the scope.</li>
<li>Buy or build a collection of &#34;physical probes&#34;, devices you can attach to a 3V / 5V pin that real world actions. For example, a solenoid that can be used to hit a bell, flip a button or slap you in the face when a certain debug pin is set.</li>
<li>Lego Mindstorms is great to build little contraptions that control your device, for example press buttons or move sliders around in an automated fashion.</li>
</ul>
</div>
</div></div>
  </body>
</html>
