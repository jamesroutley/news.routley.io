<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dubroy.com/blog/compatibility-packages/">Original</a>
    <h1>devlog: compatibility packages</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
		<div>
			
			<p><small>February 6, 2026
            </small></p><p><em>[this is a <em>devlog</em> post ‚Äî a quick, lightly-edited post about stuff I‚Äôm working on right now]</em></p>
<p>I‚Äôll be introducing some breaking changes in the next major version of <a href="https://ohmjs.org">Ohm</a> and I‚Äôd like to make the upgrade path as smooth as possible. So I‚Äôve been investigating patterns for specific ‚Äúmigration‚Äù and ‚Äúcompat‚Äù packages in the JS ecosystem.</p>
<p>I found a few interesting examples. Most of them aim to support incremental upgrades, allowing you to migrate to the new API piece by piece. This isn‚Äôt really a concern for Ohm. Mainly I‚Äôm interested in making it easy for to folks to try the new version behind a feature flag, and easily revert to the stable version if they run into any bugs.</p>
<p>Anyways, here‚Äôs what I found ‚Äî</p>
<h2><a href="https://www.npmjs.com/package/react-router-dom-v5-compat">react-router-dom-v5-compat</a></h2>
<blockquote>
<p>Instead of upgrading and updating all of your code at once (which is incredibly difficult and prone to bugs), the backwards compatibility package enables you to upgrade one component, one hook, and one route at a time by running both v5 and v6 in parallel. Any code you haven‚Äôt touched is still running the very same code it was before. Once all components are exclusively using the v6 APIs, your app no longer needs the compatibility package and is running on v6.</p>
<p>This package enables React Router web apps to incrementally migrate to the latest API in v6 by running it in parallel with v5. It is a copy of v6 with an extra couple of components to keep the two in sync.</p>
<p>Once you‚Äôve converted all of your code you can remove the compatibility package and install React Router DOM v6 directly.</p>
</blockquote>
<h2><a href="https://www.npmjs.com/package/@vue/compat">@vue/compat</a></h2>
<p>Looks like a similar approach to <code>react-router-dom-v5-compat</code> ‚Äî it includes new version, alongside compatibility features:</p>
<blockquote>
<p><code>@vue/compat</code> (aka ‚Äúthe migration build‚Äù) is a build of Vue 3 that provides configurable Vue 2 compatible behavior.</p>
<p>The migration build runs in Vue 2 mode by default - most public APIs behave exactly like Vue 2, with only a few exceptions. Usage of features that have changed or been deprecated in Vue 3 will emit runtime warnings. A feature‚Äôs compatibility can also be enabled/disabled on a per-component basis.</p>
</blockquote>
<h2><a href="https://github.com/colinhacks/zod/issues/4371">zod</a>‚Äòs subpath versioning</h2>
<p>Zod takes a slightly different approach ‚Äî rather than a separate package, it includes the new version as a submodule:</p>
<blockquote>
<p>The general approach:</p>
<ul>
<li>Zod 4 will not initially be published as <code>zod@4.0.0</code> on npm. Instead it will be exported at a subpath (<code>&#34;zod/v4&#34;</code>) alongside <code>zod@3.25.0</code>
Despite this, Zod 4 is considered stable and production-ready</li>
<li>Zod 3 will continue to be exported from the package root (<code>&#34;zod&#34;</code>) as well as a new subpath <code>&#34;zod/v3&#34;</code>. It will continue to receive bug fixes &amp; stability improvements.</li>
</ul>
<p>Sometime later:</p>
<ul>
<li>The package root (<code>&#34;zod&#34;</code>) will switch over from exporting Zod 3 to Zod 4</li>
<li>At this point <code>zod@4.0.0</code> will get published to npm</li>
<li>The <code>&#34;zod/v4&#34;</code> subpath will remain available forever</li>
</ul>
</blockquote>


<p>Another approach is a package intended to be used in <em>conjunction</em> with the new version, with extra functionality that useful during the migration.</p>
<h2><a href="https://github.com/ember-cli/ember-compatibility-helpers">ember-compatibility-helpers</a></h2>
<blockquote>
<p>Provides flags for features in Ember, allowing you to write code that will work with whatever version the consuming application is on. This addon is intended to help addon authors write backwards/forwards compatibility.</p>
<p>The flags are replaced at build time with boolean literals (<code>true</code> or <code>false</code>) by a Babel transform. When ran through a minifier (with dead code elimination) the entire section will be stripped, meaning that the section of code which is not used will not be added to production builds - zero cost compatibility!</p>
</blockquote>
<h2><a href="https://github.com/jquery/jquery-migrate">jQuery migrate</a></h2>
<blockquote>
<p>Upgrading libraries such as jQuery can be a lot of work, when breaking changes have been introduced. jQuery Migrate makes this easier, by restoring the APIs that were removed, and additionally shows warnings in the browser console (development version of jQuery Migrate only) when removed and/or deprecated APIs are used.</p>
</blockquote>


<p>üí¨ <em>Any others I should know about? <a href="https://dubroy.com/blog/about/#contact">Send me an email</a> or respond on <a href="https://bsky.app/profile/dubroy.com/post/3me7jxtdo5s2o">Bluesky</a> or <a href="https://hachyderm.io/@dubroy/116025109648450624">Mastodon</a>.</em></p>
		</div>	</div></div>
  </body>
</html>
