<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://firt.dev/ios-15.4b">Original</a>
    <h1>Push Notifications, WebXR, and better PWA support coming to iOS</h1>
    
    <div id="readability-page-1" class="page"><article role="article">        
    <section>
      <header>
          <p>iOS 15.4 beta has finally added icon support in the manifest, Web Push, AR, and VR experiments.</p><section id="meta">
              <p><time datetime="Invalid DateTime">Published 2 days ago (31 Jan 2022)      
            </time></p><p>About 8 min reading time
          </p></section>
      <section>
            
                  <a href="https://firt.dev/tags/ios/">#ios</a>
                  <a href="https://firt.dev/tags/webview/">#webview</a>
                  <a href="https://firt.dev/tags/pwa/">#pwa</a>
                  <a href="https://firt.dev/tags/store/">#store</a>
              
      </section>
      
          <p>Not every minor iOS version update includes changes in the Web platform. Still, iOS 15.4 will be an exception: we have 1) for the first time in 7 years, the appearance of Web Push for iOS (but wait for the fine print), 2) after three years of Web App Manifest support, we finally have support for the <code>icons</code> members, and 3) many new APIs such as WebXR (for virtual and augmented reality) are available.</p>
      </header><section>
        <nav>
        <ol><li><a href="#summary">Summary</a></li><li><a href="#progressive-web-apps-on-ios-15.x">Progressive Web Apps on iOS 15.x</a></li><li><a href="#web-app-manifest-support-gets-an-upgrade">Web App Manifest support gets an upgrade</a></li><li><a href="#web-push-notification-on-ios">Web Push Notification on iOS</a></li><li><a href="#untitled-bug-still-there">Untitled bug still there</a></li><li><a href="#pwas-are-still-out-of-app-library">PWAs are still out of App Library</a></li><li><a href="#experiments-reset">Experiments Reset</a></li><li><a href="#css-and-user-interface-goodies">CSS and User Interface goodies</a></li><li><a href="#web-performance-additions">Web Performance Additions</a></li><li><a href="#webxr-is-coming">WebXR is coming</a></li><li><a href="#media-and-webrtc-additions">Media and WebRTC Additions</a></li><li><a href="#other-additions">Other additions</a></li><li><a href="#anything-else%3F">Anything else?</a></li></ol>
      </nav>
      </section>
<p>And, as we are used to with Safari, <em>mostly none of these changes were announced</em>, so here you have a new edition of <em>&#34;Safari on iOS: the missing docs&#34;</em>.</p>
<blockquote>
<p>The information in this post is based on iPadOS and iOS 15.4 beta 1, so everything can change before the final stable version ships in a few weeks. <a href="https://developer.apple.com/documentation/ios-ipados-release-notes/ios-ipados-15_4-release-notes">Release Notes</a> don&#39;t include any of the information listed in this article and Safari 15.4 release notes don&#39;t exist, so I don&#39;t know how Apple expects to receive feedback while the beta program is in place. ü§¶‚Äç‚ôÇÔ∏è</p>
</blockquote>
<h2 id="summary">Summary <a href="#summary">#</a></h2>
<ul>
<li>Web App Manifest gets icons support and faster load.</li>
<li>Web Push Notifications on iOS. Yes, you read that right, but there is a catch.</li>
<li>Lot of CSS and UI goodies coming: <code>:has()</code>, <code>accent-color</code>, <code>&lt;dialog&gt;</code>, <code>resolution</code> media query, and many new experiments.</li>
<li>Web XR for Augmented and Virtual Reality is coming. Reason?.</li>
<li>Many Web Performance-related additions: Navigation Preload, Lazy Image Loading, Web Locks, TransformStream, and many new experiments.</li>
<li>Support for Opus Audio and Vorbis Audio codecs.</li>
<li>New Experiments.</li>
</ul>
<h2 id="progressive-web-apps-on-ios-15.x">Progressive Web Apps on iOS 15.x <a href="#progressive-web-apps-on-ios-15.x">#</a></h2>
<p>Before getting into what&#39;s new on iOS 15.4 beta, I need to make a quick recap of 15.0, the latest version with updates for Progressive Web Apps. While that version was released, I had some health issues, so the usual article was kept in draft forever. It&#39;s time for a summary:</p>
<ul>
<li>Theme color: supported on the <code>&lt;meta&gt;</code> tag and the Web App Manifest, it&#39;s used within Safari (status bar and Safari UI) and an installed PWA (status bar). If you don&#39;t provide a theme color, Safari can define one based on the color of your content. It finally deprecates the <code>apple-mobile-web-app-status-bar-style</code> meta tag, except for the <code>black-translucent</code> value that can&#39;t be replaced by any standard option.</li>
<li>iPad supports favicons in the tabs.</li>
<li>Service Worker registration supports the <code>updateViaCache</code> argument.</li>
<li>Safari View Controller: it can prewarm connections (similar to what can be done with Custom Tab on Android), and you can customize some buttons.</li>
<li>WebGL 2.0, Media Session, and Web Share 2.0 (sharing files) supported</li>
<li>One Time Codes auto-completition over SMS supported with <code>autocomplete=&#34;one-time-code&#34;</code> if the SMS&#39; content follows a protocol.</li>
<li>Safari can render AppClip cards on top of the web content if the website has registered an AppClip. Fortunately, after six months of this feature, it&#39;s not used a lot. See <a href="https://twitter.com/firt/status/1402331801666965507?s=21">how it looks like</a>.</li>
<li>WebView additions: it can capture audio and video, execute JavaScript asynchronously, read content&#39;s theme color, manage playback, and start and resume downloads.</li>
<li>Persistent Storage Manager was added in iOS 15.2 (it&#39;s almost impossible to test or see if it&#39;s really working for PWAs).</li>
</ul>
<h2 id="web-app-manifest-support-gets-an-upgrade">Web App Manifest support gets an upgrade <a href="#web-app-manifest-support-gets-an-upgrade">#</a></h2>
<p>While supported partially since iOS 11.3, Apple never documented anywhere which properties were actually supported. So I&#39;ve just <a href="https://firt.dev/notes/pwa-ios/">done it here</a></p>
<h3 id="improving-installation-reliability">Improving installation reliability <a href="#improving-installation-reliability">#</a></h3>
<p>The Web App Manifest is now loaded and parsed on the current beta when the page loads and not when you open the Share sheet for the first time. With this in mind, now the <code>theme_color</code> from the manifest can be applied on page load in the Safari UI, improving PWA installation reliability.</p>
<p>In the <a href="https://firt.dev/advanced-pwa/">Advanced PWA workshop</a>, I explained how to enhance installation reliability by preloading the manifest with a trick; from iOS 15.4, this hack won&#39;t be necessary anymore.</p>
<h3 id="icons%2C-finally!">Icons, finally! <a href="#icons%2C-finally!">#</a></h3>
<p>For four years, we have Safari on iOS supporting the Web App Manifest (from 11.3ÔºçMarch 2018), but the <code>icons</code> declaration was always ignored (a lack of support that was never documented by Apple or WebKit, BTW).</p>
<p>That led to many Progressive Web App installations on iOS without a proper icon, as you also need to add a <code>&lt;link&gt;</code> with <code>rel=apple-touch-icon</code> in your HTML, and not every PWA developer was doing that.</p>
<blockquote>
<p>I have created a <a href="https://firt.dev/notes/pwa-ios/">PWA on iOS Compatibility Table</a> with this information to have a place to see what&#39;s supported on not at a very fine level within the Web App Manifest.</p>
</blockquote>
<p>Since iOS 15.4, Safari parses the <code>icons</code> member of the Web App Manifest with some catches:</p>
<ul>
<li>
<p>If you provide icons in the manifest and through the <code>apple-touch-icon</code> link, the link will be prioritized by Safari.</p>
</li>
<li>
<p>Icons must be square and PNG only.</p>
</li>
<li>
<p>Safari looks for the closest icon to the expectable sizes (152x152 and 167x167 for iPads, 120x120 and 180x180 for iPhones). Therefore, if you provide only one icon of 512x512, Safari will take it and resize it as expected.</p>
</li>
<li>
<p>Safari will round the corners of your iPhone, but for some reason I can&#39;t understand, Safari skips icons with <code>purpose: &#39;maskable&#39;</code> that, according to the spec, should be the ones preferred when a mask is applied. I say I can&#39;t understand because <a href="https://github.com/WebKit/WebKit/blob/8b3d621b2da4620757903dd4c4d67f36951ba7f6/Source/WebCore/Modules/applicationmanifest/ApplicationManifest.h">WebKit source code</a> is actually parsing the <code>purpose</code> attribute and understanding <code>maskable</code> and <code>monochrome</code>, but it seems it&#39;s skipping icons with both values and using only icons with <code>any</code> or no <code>purpose</code> defined. Because of this behavior (bug?), Safari may pick the wrong icon for iOS, an icon without enough padding for the content.</p>
</li>
<li>
<p>The icon is not loaded when you open the share sheet ending up with an empty icon, but when you select Add to Home screen (See animation below).</p>
</li>
<li>
<p>Transparent icons are filled with a black background in the final icon, so you should avoid them if possible (See animation below). If you provide the same transparent icon as an <code>apple-touch-icon</code>, it&#39;s filled with white in the share sheet and black when installed on the home screen.</p>
</li>
<li>
<p>Safari loads two icons most of the time: you see the one icon from the manifest, and after a second or so, it&#39;s replaced by the final icon Safari chose (from the manifest or an <code>apple-touch-icon</code> link), making a weird behavior; if you add the PWA quickly, you will end up with the first icon selection in the home screen (See animation below).</p>
</li>
</ul>

<h2 id="web-push-notification-on-ios">Web Push Notification on iOS <a href="#web-push-notification-on-ios">#</a></h2>
<p>You read that right. For years, the most requested feature may finally arrive in iOS and iPadOS: Web Push and Web Notifications. But there are some catches:</p>
<p>1- It&#39;s a disabled-by-default experiment at this time</p>
<p>There are two new experiments on iPadOS and iOS 15.4: &#34;Built-In Web Notifications&#34; and &#34;Push API,&#34; both disabled by default in the latest beta.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAARCAYAAAAougcOAAAACXBIWXMAAAsTAAALEwEAmpwYAAADR0lEQVQ4jYWV647jRBCF8/7PhNAuICGxCHb/sMDOZWcmmdhx293uu9tOPlTt8UxWSGDpqC05XafqVJ3K7qQjnXaowdD3PVprnHPknJmmiRAzxiW0jVgfCSHW7/K7ruto27ZCKcU4jsQYSVPCpcAYHMZadvddZt952t4yjgbvPSklSimVJAZfLw/aoI3FGPMN5Ju1thILgdwrcyFOCR8j1gV2t03isXUclcVaR4iJnAtTmcl5InjPaAxD36NUX7OXrKXqLXNJRoLP88yyLBVTKcSU8SGzO5wsrRrR2jKlxFJmzsvCeV4oUyFJNqOtJKfT6VUakSuEUINfLhfkkVNwPp+Zy0yKGecSu89Plk9fHR/uPL89ZH5/Knzaz3zcz/zxXHhSE70ODIOpJEIgMomsmzwStAZ/IZmWgp8iJrjax93Hr56fbwLf/5l496Xw/napeHe78MvDzE0z0Q0BPayNHoahViDSSPCNYAMXCHNEZc3RK7Tz7H69Mfz018h3nz3vbwo/3J358f5czw+PCzdtQemA1oauW2WSCkT36+BrJedKYopjH1u+2md6Z9nd7TsED42hsxNDvKA3hDOjL4x2JVF9X6WS6fsvElcCTVLsXcvgHLvbu0ee9geU6lhKhssiLay4nBemXHBu7YlSqsolI1v9kFKdrFfpXkj8HOnSwNGJXI7d318euX848Nye6qX1wtrEeV5IuWDtG4l6Idp8IgMgRCuJ9ORCmjMmO5Q3jOKT+9tHnh4PtFckW/nLvJDTVP0jgaXxMmFybn4Rr8i9bQDkCXOiz4bG9xhp/PG5pWlauu70Ovfr1EglMusBazS6V/TDUMmk+dsp0m3JVTPOC6FEdLJvlRg9ogeD0VK66DwxTXOFvAfvGI1mEJK+r8El++t1IskJUe1RzozJ0sWB9rUSFWmVQ/UWZwMh5LpWcp6JUUjC1VpRr+tk23GySAUbibzb5BmiofN6reSgMk0fqxecky2ba/BKEDLeZ8Yx1AXZvfRi68MmkaAUQalymWxpoozwaR3h/yOR3SN7TYzYNE3dXdeG/Jfj2UZY8+y61fFmTJgxVlj5z7DpGxjjUUpzPDbs93sOh0OtRvoh0lxP45tPwpVPPP8ALoJfmMr0sDsAAAAASUVORK5CYII=" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/permissions.png?auto=format" width="2360" height="1640"/><figcaption>iOS and iPadOS offer new Safari experiments regarding Web Push Notifications.</figcaption></figure>
<blockquote>
<p>The feature is disabled by default in the latest beta, which may say that it won&#39;t be shipped now, and we may need to wait a couple of months for iOS 16 or later.</p>
</blockquote>
<h3 id="the-api-is-there%2C-but...">The API is there, but... <a href="#the-api-is-there%2C-but...">#</a></h3>
<p>The API to request notification permissions, subscribe to the Push service, and receive the push notification in the service worker context are available when you enable the experiments in Settings. Also, the notifications permission is not yet integrated with Safari UI permissions, and <code>showNotification</code> is not implemented in the Sevice Worker&#39;s context.</p>
<p>However, I couldn&#39;t make it work. The issue appears to be with Permissions, as permissions are always denied without seeing any permission dialog request, no matter if it&#39;s after a user action or not.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAFCAYAAACw/UeDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA70lEQVQYlY3NW07DMBCF4ayIJG58zdjO1SkI1LL/xfwoaSUKFRIPn87MPMyp1iiUFCkxUUQ4954SDLPriJ0iqBbfNn8K6pa2qTF1ja5f0Hs2d3VNNcfEkkfWYWHNM2WfU2ISIQVBXI+48KB/uvXW47XBqBNdq9A7dTpy36slJtZhoowrZVjY8kTJmTlGchCi//20/1EU7+m1PUqOgoeSXbWIHE+3YWLLI+eU2VJkkZ7RB7ILJOdv7C3FeoJxuM7iOnOw6oRpW3TTPKk+JHCJgWvsucbApziuYrn0hneveXMdr/bbvq9aMXYtsa2Rf/gCB9DQY5J2JB0AAAAASUVORK5CYII=" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/console.png?auto=format" width="1700" height="372"/><figcaption>No matter what, we always get permission denied</figcaption></figure>
<p>In the latest Safari Technology Preview for macOS, the notification dialog works, and even when that permission is granted, you can&#39;t get a Push subscription object from Safari, &#34;Push Permission was denied&#34; is the only message I could get.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAUCAYAAAB4d5a9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEGklEQVQ4jY1Va2/aVhjmd/RLpUZaG+1DBRgwtjEkXAK2Q8L9brCBYAiQQAMBka3aJdIqZdq6VJ02bVO1qt0f2Vr1Vz3Te4DEiRKpHx695/ic8zzv7Rw7tqUAgn4Bosd7Dc5zAwLngd/Nwe9yg3e5maU5fSfc3r8+E+QFhAMyHCQQ8PkgcOtD3JKQSFbEtB4NhqDFdrCfUKFGY4jIQUheH1tn+9x3nPP6EBJEOMjzpafk3dJL3uW6As2T8QSaJRMjY4qRPsfImMAsNpgo73TdC4pI9vFwiF4vBI9NxAYSET0e1LJlzA6+wU/DP3Fh/o6fh79i1p6jlMqzyNfO2LEWCTCR25HY4HM6Ift5NEstfN2+wC/tf3Cu/oGX5hss6t+iUWhA8noY4ToDftf1mHgln+/zRBp5A9P69zgv/4bT4I84L1ziWXEBPVuD5FuJuG9Fcp/Isug300WeFvfzGJlTPD+4wKz4AmfGC/SrY+STmVW67k41leFOkRtYfdvdiaOWq6Jd7KGZ6aFd7KKarUCNxWzEq65iWH6jegZ4W03sUZAXlKo1JK+XtawSjbFOS0SiCAcCjMTeibR3XR8m4vXaRTjIPI9oMAglErmCtrODZCIBJRpFfHubYWdtt7agxWJsLREOszmNCcRDfDciWXoqI6WqKGYyKGWzKOdy0EslNCoVVHI5FFIptkao5PNX62RpfyGdZvNqoYCUprFIiVdei2yJIjLJJDqmiePDQwy6XYz6fUzHY8xOTjAeDNC3LAy7XfQ7HQwsi+2ZHB/j2dERw2gwwHwywXQ0Yjx7ioKgIFxHsiVK2EskmIf1cnlpSyWYtRpDu9FAt9ViwqP+gAkREa0Z1erVvgPDQLNeZ+eVSBQhuwi9X/FwmKnvqyrLdTIeZ3MSp1Q0dR3DXg/H/T4jq+bzLL20P61pDKkV6CzV5UYk6+66D5RfOkhilVyepZY6jAj81JV0BVYvL90N9kxx3HVN6LLQc08dQ0R3YV9RmKd7qob4bgEBzYA32YdbseBWOuDUDrOuRAfOFdzhEnhZQcAv0lPvZ68phd9rtTC0LBx1uyvbw4gaodPBQV1HZj+LwJ6Fzcx3eKS/wWPzLVzWO4jD95CG7+G03uGJ+RYbjbfYzP0AV7wFSQzCQcVJa7voGAZm4zHOplN8dXqKswnZGZ7P51hMpjgZDKBXDWxVzvCF/hceHP6Lh0cfsDn5CPfiE7jFJ2yefMTDo//woP8Bj/S/8XR3DEkMLX9a1AnFdBptvQ7LNNE1m7CMpT1stdnYrFSQTqYga018mZxjo/ASj0uXeKq/gr/1GkLrNZz1V3hSvsRG4RKbyQVckRokvwwHvff096LLSLeWIXQb28xuSzJEMQxOUuEM5uAM5a/gso0JbkkDL4Qh8wL+B2yZodzswQG4AAAAAElFTkSuQmCC" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/safari-tp.png?auto=format" width="526" height="424"/><figcaption>Safari TP on macOS</figcaption></figure>
<p>These can be for several reasons:</p>
<p>1- They are finishing the API, and during subsequent betas, the permission dialog on iOS will finally appear.</p>
<p>You can see many online Web Push testers such as <a href="https://push-notifications-demo.netlify.app/">Push Notification Demo</a> detects support for it, but the permission is always denied.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAZCAYAAADTyxWqAAAACXBIWXMAAAsTAAALEwEAmpwYAAADr0lEQVQ4jZVUSU8jVxBuOIEQNw78EzaJ7YT4SchixwGJCweuE/BMlNFMcpxwywKI2Gi822PAeHe3t263jQEvLF/0VeZZRkSZpKVP9ep1va+WV/U0TdMwMDCAoaEhDA4Ooq+vD9z7Fvr7+zE8PIzR0VGMjIwIhzYxMYHp6WnMzs5iZmYG1MfGxgTj4+MC7ilMTk6KnJqawvz8PBYXF7GwsIC5uTloTqcTW1tbgs3NTaysrMDhcAiWl5exurqKtbU1rK+vi+5wOLC0tCR2Gxsb2N3dxd7eHvb396EFAgG43W4cHx/j9PQUJycn3fXZ2RnOz8/h8/kQjUYRDodBe7/fj1AoJIhEIojH49B1HZphGEgmk4jFYri8vMTFxYWsaUDwXz6fh23bqFarME0TlUpF1tyr1+toNpt4fn6GViqVhDWTySCXyyGbzYqkE+4XCgUhuLu7Q6vVwv39vawpqbfbbTw+PuLp6QmaZVkoFotykCQkZTQkVeCeIta/2imHdERiiYwGqVRK0kskEmLEvXK5LOlQUlfQdV3SJqgzmBdpptNpqRMjojca1Go1AetCnVLVzbIsiYjy5uZG0hUyeqc3EjJdEjBselO16ZXNZhMPDw/4p0+rmBXk9TzSmTSyuSx0Q4dRMGBaJkzLEu+0sap/R2PbtpCy6IymF1qlXEE+m0c6mUYqkUIuk4ORN2BbNup2XVCr2qjZNVSt6gsyfi/IcuUcIqkoPDEP3DEPvNc+hLNhxMvXSJpJJL5Crxmwb+1uK/CwIuum6dV9+OXqCG/8Bzj0u+AKvsUPkR/xPvYBHy9/xsfLn/D+4gN+zfyGa/sanafOq4iUrv2e/QOu6Dtsup347nwHTs82nJ4dbLm34XTvwOnexsafTrHxlnxoPbZeFV4Rap8NLz7Fj/AmcIDD4FscBF04CLhEukLvBN8HD/Hp6gjhQgSN+wbarTY6nc6rdDXd0nFlxBHMBBHMhOBPB/D52gtvwgdfyi/wp/z4kv2ClJ5CsVQEe5P9xovgGHXJGo0G6rU67KotN2iZFsqlMiqlCnjThFkxRZaKJRQLxe4YsWEZYfc22Uf0RIPuyLDXOOiGLg3Nde9/wzC60bGJVZtofEK4yRmkpM7widvbW4HS1WQ0m01ZE6pVhIxpcoTUPFJXh9QBRUC0Wi2BWnO0VN00btI7IyKRmj916N/w0EMkNSMRI1KvAOW3wMeBks6ZZpeMEamXQxX6v4AXwTllhF0yXq96bf8PeJsMpDeyvwANvXWTAybRhQAAAABJRU5ErkJggg==" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/denied.png?auto=format" width="1165" height="1563"/><figcaption>The permission is always denied without any UI permission dialog</figcaption></figure>
<blockquote>
<p>The API appears visible both in Safari and installed PWA in the latest beta. Still, I don&#39;t know if Web Push will be available for installed PWAs or not as they use isolated storage from Safari, and there may be some implementation issues.</p>
</blockquote>
<p>We will have to wait for someone at Apple to say something about this :(</p>
<h2 id="untitled-bug-still-there">Untitled bug still there <a href="#untitled-bug-still-there">#</a></h2>
<p>The bug that has been for years is still there. If a PWA link to an external app (native or browser), the back button from the OS still says &#34;Untitled,&#34; as seen in the following image:</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAHCAYAAAD9NeaIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQokZWPbU/aUBiG+0dExktLaTktLW0pFXxNNNFMwzCwjM04QSXOJVs0Sxa/LQ4Rxekfvsw5MYt+2MAPV577POe5z/0cLZU1yBcFwo8ohzGm8EjnTeYyOvJO1v+Ryhp/56RPvuX4EX6UYJcDMoaFlivYFIWnml6UUHT8FyHTmHsWKH26JSgHMVGyiFupkjNtNNsNCGsNFpbWqMR19ZM3usV8zlQmWf9FOm+S1otqXm6cM4Xy+9UF4voyXpigWw5aY2Wdze0WWzu7xI1VDLtMxiiRMewZKKFbLrYb4lRiheWGlLwIN6gh/Cqm8NEWVzfYab3nbbNNXF8hWxBPIdPJFgSFko8bJAS1JcJkWWm3UsOL6kpbToA2OP3G2Y8Lvp//5ODoC63OJ5rtLu9mofORTnefvYNjesen9AdflZZ8Pjxhvz/gw14PbTi+Yzx5UEj9azh+FZejW+Ub3d5zPXng6uaPOg+vJ/weTbi8uuERTFQzcgqRVQUAAAAASUVORK5CYII=" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/untitled.png?auto=format" width="1167" height="332"/><figcaption>Untitled back button bug on iOS</figcaption></figure>
<h2 id="pwas-are-still-out-of-app-library">PWAs are still out of App Library <a href="#pwas-are-still-out-of-app-library">#</a></h2>
<p>App Library is more useful on every new version as the Home Screen is now a place for widgets and for placing different icons based on different Focus settings. PWAs are still hidden from App Library&#39;s folders. They appear in App Library&#39;s Search, making a UX problem (they exist and do not exist simultaneously, in the same section).</p>
<p>The iOS Simulator renders the PWA icons in a &#34;WebClips&#34; category to make things even weirder. But this category doesn&#39;t exist on the actual device, which makes me think someone removed it explicitly from the devices.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAWCAYAAAA1vze2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAHJklEQVRIiS3R21OTiR3G8fwXux3bPbqzq44iRdRlPQErooIYohgIORAgmkQhEQIEAhGSkIQc3jdvyBmTcArhjLsq66qrqKtOW7fbaTvtbKfttFfdbacXnd52vh1sL5753T2f+c0ji4VGSQoupiQXOWmIfMjIjK+RBc8xltwlrLh3s+QuZX68mqyvhWSgm8mgk0jIhxAOIoRDhMNhwqEQgiAgSVESiSSJZJpINIY/GEa2jSQEF5nIGNmInVzwCjNeOQXP0dfIsmsXi+79zI1XkfU1k5zoJhp0Im4joSBCKPQaeI2EBSJihFgsQTyRJBKd/D8SdJII3yAjOsmJ/UwHDcz65BTHj7LiKWHVs5tlTykFbzX5iWbSwW5iYSeS4CcihBEF4fUH28D2FcUIk7E4k7EEQiSKNxBCFg8MkhEcTEtDFCZtLEWNrEktfB45y6ZUyT3pGJuTn/J5rJHVhIFiys5sxk9+Kkp2KsVUJk0mnSaVSpNMpojHk0RjcUKi9BoYG/chS/mtzEoDrGWGuZMb5IuslftZA49zKp5NN/FirokXCxq+XjLxeGWIB2tBNtfT3N6YZ2N9iZXlJYrFIvPzBWZm58hPz5LNTxNNpPAGwzjGPMhSrg6KkpW7OQePCiNszffzrNDNy6KRVyuX+eWGkV/dtvDt5hC/uOfn5f0ET+/PsfVwgwf373D37h02bn3Gyuo6i8srFIpLzBWKxFIZXBNBrg+NIIvZFeRcWhaCRpbFq6yKBm5JWjbjLTycamZrWs3ThU6eLlt4tOLgy7UAn6+lWN8osLS6zNzCIjfzMyTSU0S3d5CiBEWJG14/PQ4nBqsNmXCtCsl6mmivnMm+i8T6GknZ65m5Ucuyr5ZbQj2fTV5gPd7KYtzAdLyXVMKNlIwSTqTxSwnG/GGGnGP09Nnpum7DbO2ls8uK1tRFs8GMLNhRTujKMQLGWrymBsZNDQiWOjKDdcy6z1OYULIgaJgNqcn4WhHHO/H6BhgLTODwiwy4Q9iGPVzvd9Bl7cXcZaXzajfqy2Yu6g2c13YgE/T7Ea4cw2c6y0hnA/b2evzdCkKOTgLeIZz+EO6wiCQ6kbxGBHcHQ4NmLP022swW2szX6bI5uOETEJNZ4rlZwokMfWPjtJq7qVPrkUX1JURM1Ui9l4j0awj2qIgP6xl1jTKWKDKQe8HI3EvC2Xkm/HaE0XZsFh0dhnbqzis419iE2WLDnSog3XtFeOsPTH75CtfUAlcGhjnbqkcW15cQMFQRsjYh9jYTsDQhDmgwOYN03XyCZvkf6Fd/wDb9EIfPQ9Chw6iTI284Q2lpGWUHylHr2hlKrjC+9Tf6XvwH/7O/4y7cp9vp4cw2MqndT/jyp0g9SmIDGiI2NVFHB9e9YQYWt7hy/wdMD77HtvAVdp8H30AbZp2cJnkdhw4e5PChw2i0bdileUbv/hHrg38xeu8vjORuYx4ao7ZZhyyiLiNqrEW0KvF0NTNsbCLQ3874hAuhsMDw+iMcG09w5ouMjDvxDl5mqLsNe4+JKwY9HR16em023GKaUOEhgbVvEJefciM6Q0fPICeb1MjCrR8TbK+hT32adlUDGmUDN3o6Sbi6WMoHWV7LsrQ+zXROJDBqwT14Dck3zPJUgvVEmkJIIhWIMJnJk5xfpHhnk7nVFbyRGJprPVQpVMgCrccZ1ZzCqKpHq2tB06pi+FonN/ubeZzu45ulcX6+5OV2wk7ErsNhu8bMVIzfPHrIP7de8Kf1Te5lCyRm5vGmEsQXZojnMzj9QVpMFk40tiDzqWuwNdeiU12gWaNHoVBhbmlGNHzKk0wvv7sV5NfrE3wxaSHcLcd61ch0PsufX30L3/2Vfz//ludrd8jfXce3mCbx2SxSLsnwuB+VycqJRhWyUXUd/ToFfV1GLKZu9EodnYqLuNtquC2YeZnr43m2jwV3O4NtZ9GoNUwEQjz/aovvf/t7vvv6Z2wsriAUMwxO+fHkRcZEAavDhdJo4YSiFVmPsh6L+gI9hnZMunZUjUqUDQqutdQh9OnIjmhJD2kYNjRy6UwlVSfPoms34g9FmVtc5eZMEY8Q5fqEC4PbjtntwDjgQHvVhlxvpvKCGpn23Gm08nO0yuUo6s5Rf/oc9fUKmhQXaFU0oDl/EuWZSk6dOEbZgcPsLvmY8iMnqam/RJPaQLPOhFJnolFroEHbQaP+Mhf0ZuQ6I6dVHVRd1CCrrdwuqKTy6Ak+qTjO4YpKDlZUUV5Rzb6yo3y49zDvffRT3v6ghJ+8v48d7+1lx/sl/PiDUt7bc4jdZcc5cKSWiuoGjp5qpLLuEtVyFTVNWmqUOk4qdcgqDn3CwfIKSksPsmtPGTt3lfLuh/tf562d+9jx7h5+9PYu3nzrf3nj7d288c4e3nx3Lzt27uedXeV8uP8I+w5VU378DEdOyalqUFLTpKG2pY1alZ7/AgS/RPvbX7rXAAAAAElFTkSuQmCC" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/appgallery.png?auto=format" width="1164" height="1037"/><figcaption>iOS Simulator renders PWAs in WebClip category in App Library</figcaption></figure>
<h2 id="experiments-reset">Experiments Reset <a href="#experiments-reset">#</a></h2>
<p>This is a simple but powerful change: you can now reset all experimental features to default values to safely test new features while still understanding if the ability is available or not to your users on stable versions.</p>
<figure><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAVCAYAAACzK0UYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC8UlEQVRIiY2V2W7TQBSG+/4Pwi3LBQiJthRRgQCJoiJUFgXaOHG8zj5jj+P+6IyZxE6TlkhfjmcmPv/ZYh81TQcpFcqyxGKxCKRpGlitVpvruN4lz3MoofCD/8bj9BiPls9xWn4EayWUszCmxRGJGGMhhECeFyiKIghWVRUsQXtxf0JVoWY1jNK4lgu8yt/j6eoU59VnsFZAN24ropRBXdeTaCnCLMsm2WRZFvbHkJiSCjMxx8v8HE9WJ0GE72aitQHnfOIkRh/XdBYzpIDIRrTU+C0SvCre41n2Gu/qiyAyyWRbrsF5dEZEoUMiZVVCS4U/IsFp8QEv8rf4yL5Ctnos4ieZjInlYIyFcyEEpJRQSgUbscYi1xWu5Axf6u/4JW6gGgPjmmkm9ONxo0mELDn03uOhT9/3aLoWwkhwLaGthWv8XZE4UbFE+0Rub2/3QiLrbg1nGzjr4FwDqtKk8VSSOEn0X5nPEyRJEvZInIJwzqHruoMidGYsTZSBDUIbER82yMm4yXF8xyMtpUTbtveK2CBiQ0CbTKxtIaVBVdVYLimLFEmyCMzng02SJdJ0BcY4rG2wXpPDKd6v0bbk1EJrEnIg31o3OKIvpRyEoJJJ1EwGy7gaLBss5zRRdHMTyrALOaQzpWxAa4fo+4i+aOFsi8b5wK6DuG+DoyG6/0GpBlK6IROpW3DtUastbHRdSY9aegjtYawPtX6I2PSQCS2kXaMyPVayRyZ75KpHoQebqR5L0SOVPZjp4Xwfmnw/t6Fvw+Q21HgPaTqUukcqeqzEVogsCS/4IFSbHrbtg4OH6Lp1yGjbeCrXqCxUKh5LJj1KMcCVhzZ3e3aITbmoMaH5YQD+sVk3MIT5h97f3AF3B/IdGi8EPYH3wxi9Z+itKbdU9PghRLCMaXBuDvogQiZjaJMs3ZimJWazG3z79mOHn8FeXf3C9fUSRcEn9+5yUIQinM3m+PTpAicnb+5wfHyGs7NzXF5eYbGgR85w7z6hv7Kc01QAWyjLAAAAAElFTkSuQmCC" alt="" loading="lazy" data-src="https://firt.imgix.net/img/posts/ios15.4b/reset.png?auto=format" width="1162" height="979"/><figcaption>With Reset All to Defaults you can now go back to the standard experiment settings</figcaption></figure>
<h2 id="css-and-user-interface-goodies">CSS and User Interface goodies <a href="#css-and-user-interface-goodies">#</a></h2>
<p>There are many new experiments (some of them enabled by default, others disabled by default) around user interface and CSS including:</p>
<ul>
<li><code>has()</code> pseudo class (enabled) ‚úÖ</li>
<li>CSS 3D transform interoperability (disabled)</li>
<li>CSS Accent Color (enabled) ‚úÖ</li>
<li>CSS Container Queries (disabled)</li>
<li>CSS Gradient Interpolation Colors (disabled)</li>
<li>CSS Gradiente Premultiplied Alpha (enabled) ‚úÖ</li>
<li>CSS Motion Path (disabled)</li>
<li>Web Animation Custom effects (disabled)</li>
<li>Web Animations custom frame rate (disabled)</li>
<li><code>&lt;dialog&gt;</code> element now enabled ‚úÖ</li>
<li><code>resolution</code> Media Feature (enabled) ‚úÖ</li>
<li><code>inert</code> attribute (disabled)</li>
</ul>
<h2 id="web-performance-additions">Web Performance Additions <a href="#web-performance-additions">#</a></h2>
<ul>
<li>Service Worker Navigation Preload (enabled) ‚úÖ</li>
<li>Lazy Image Loading is now enabled ‚úÖ</li>
<li>RequestVideoFrameCallback (enabled) ‚úÖ</li>
<li>SharedWorker (disabled), after <a href="https://firt.dev/ios-7#html5-javascript-apis">it was removed in iOS 7</a> (8 years ago), Shared Workers are back.</li>
<li>Prefer Page Rendering Updates (enabled) ‚úÖ</li>
<li>Web Locks API (enabled) ‚úÖ</li>
<li>TransformStream API (enabled) ‚úÖ</li>
</ul>
<h2 id="webxr-is-coming">WebXR is coming <a href="#webxr-is-coming">#</a></h2>
<p>There are four new experiments (all disabled by default) around WebXR for augmented and virtual reality. The <code>immersive-ar</code> session mode (to use WebXR with your phone without any external device) doesn&#39;t seem to be supported.</p>
<blockquote>
<p>It&#39;s not yet evident the use case of this API on iPhone and iPad as it works with external devices and, as far I understand, no VR or AR device is compatible with iOS or iPadOS as of today. My best guess is that this is preparing the scenario for Apple&#39;s upcoming goggles or headsets.</p>
</blockquote>
<p>The experiments available are:</p>
<ul>
<li>WebXR Augmented Reality Mode (disabled)</li>
<li>WebXR Device API (disabled)</li>
<li>WebXR Gamepads module (disabled)</li>
<li>WebXR Hand Input Module (disabled)</li>
</ul>

<p>Four experiments are available around these topics:</p>
<ul>
<li>Experimental MediaSourceInline (disabled)</li>
<li>Opus audio decoder (enabled) ‚úÖ</li>
<li>Vorbis audio decoder (enabled) ‚úÖ</li>
<li>WebRTC Encoded Transform API (enabled) ‚úÖ</li>
</ul>
<h2 id="other-additions">Other additions <a href="#other-additions">#</a></h2>
<p>There are four experiments, all disabled by default, that will offer new additional abilities:</p>
<ul>
<li>Link Sanitizer, I don&#39;t fully get what&#39;s this is about</li>
<li>Permissions API: it works with <code>geolocation</code> and even with the new <code>notifications</code> permission. You can revoke permissions and query the current status. Requesting permission through this experimental API is not supported.</li>
<li>Scroll To Text Fragment, following other browsers in <a href="https://wicg.github.io/scroll-to-text-fragment/">this spec</a> that lets you link to specific parts of the page.</li>
<li>Track Configuration API (disabled), I couldn&#39;t find info about this API.</li>
</ul>
<h2 id="anything-else%3F">Anything else? <a href="#anything-else%3F">#</a></h2>
<p>Did you find anything else? Let me know on <a href="https://twitter.com/firt">Twitter @firt</a></p>


      <b><b>
    </b></b></section><b><b>
    
    
   


</b></b></article></div>
  </body>
</html>
