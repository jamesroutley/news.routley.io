<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.npmjs.com/package/@smoores/epub">Original</a>
    <h1>Show HN: @smoores/epub, a JavaScript library for working with EPUB publications</h1>
    
    <div id="readability-page-1" class="page"><div><article><div id="readme">
<p>A Node.js library for inspecting, modifying, and creating EPUB 3 publications.</p>

<ul>
<li><a href="#installation">Installation</a></li>
<li>
<a href="#about">About</a>
<ul>
<li><a href="#epub-basics">EPUB Basics</a></li>
<li><a href="#what-this-library-does">What this library does</a></li>
</ul>
</li>
<li>
<a href="#usage">Usage</a>
<ul>
<li><a href="#reading-from-a-file">Reading from a file</a></li>
<li><a href="#creating-from-scratch">Creating from scratch</a></li>
<li><a href="#adding-a-chapter">Adding a chapter</a></li>
</ul>
</li>
<li><a href="#development">Development</a></li>
<li><a href="#api-docs">API Docs</a></li>
</ul>


<p>npm:</p>
<div><pre>npm install @smoores/epub</pre></div>
<p>yarn:</p>


<p>Throughout this library&#39;s documentation, there will be many references to
<a href="https://www.w3.org/TR/epub-33/" rel="nofollow">the EPUB 3 specification</a>. The lower level APIs
exposed by this library require some knowledge of this specification. Here we
will cover the very basics necessary to work with the library, but we recommend
that users read through the linked specification to gain a deeper understanding
of the format.</p>

<p>An EPUB file is a ZIP archive with a partially specified directory and file
structure. Most of the metadata and content is specified as XML documents, with
additional resources referenced from those XML documents.</p>
<p>The most important of these documents is the
<a href="https://www.w3.org/TR/epub-33/#sec-package-doc" rel="nofollow">package document</a>.</p>
<blockquote>
<p>The package document is an XML document that consists of a set of elements
that each encapsulate information about a particular aspect of an EPUB
publication. These elements serve to centralize metadata, detail the
individual resources, and provide the reading order and other information
necessary for its rendering.</p>
</blockquote>
<p>This library is primarily concerned with providing access to the metadata,
manifest, and spine of the EPUB publication. Metadata refers to information
<em>about</em> the publication, such as its title or authors. The manifest refers to
the complete set of resources that are used to render the publication, such as
XHTML documents and image files. And the spine refers to the ordered list of
manifest items that represent the default reading order â€” the order that
readers will encounter the manifest items by simply turning pages one at a time.</p>

<p><code>@smoores/epub</code> provides an API to interact with the metadata, manifest, and
spine of the EPUB publication. There are higher level APIs that mostly abstract
away the implementation details of the EPUB specification, like
<code>epub.setTitle(title: string)</code> and <code>epub.getCreators()</code>, as well as lower level
APIs like <code>epub.writeItemContents(path: string, contents: Uint8Array)</code> and
<code>epub.addMetadata(entry: MetadataEntry)</code>, which require some understanding of
the EPUB structure to utilize effectively.</p>
<p>Because EPUB publications rely heavily on the XML document format, this library
also provides utility methods for parsing, manipulating, and building XML
documents. The underlying XML operations are based on
<a href="https://www.npmjs.com/package/fast-xml-parser" rel="nofollow">fast-xml-parser</a>.</p>

<p>The entrypoint to the library is through the <a href="#epub"><code>Epub</code></a> class. An <code>Epub</code>
can either be read from an existing EPUB publication file, or created from
scratch.</p>

<div><pre><span>import</span> <span>{</span> <span>Epub</span> <span>}</span> <span>from</span> <span>&#34;@smoores/epub&#34;</span>

<span>const</span> <span>epub</span> <span>=</span> <span>await</span> <span>Epub</span><span>.</span><span>from</span><span>(</span><span>&#34;path/to/book.epub&#34;</span><span>)</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>await</span> <span>epub</span><span>.</span><span>getTitle</span><span>(</span><span>)</span><span>)</span></pre></div>

<p>When creating an <code>Epub</code> from scratch, the <code>title</code>, <code>language</code>, and <code>identifier</code>
<em>must</em> be provided, as these are required for all publications by the EPUB 3
specification.</p>
<p>Other <a href="https://www.w3.org/TR/epub-33/#sec-opf-dcmes-hd" rel="nofollow">Dublin Core</a> and
non-core metadata may also be provided at creation time, or may be added
incrementally after creation.</p>
<div><pre><span>import</span> <span>{</span> <span>randomUUID</span> <span>}</span> <span>from</span> <span>&#34;node:crypto&#34;</span>

<span>import</span> <span>{</span> <span>Epub</span> <span>}</span> <span>from</span> <span>&#34;@smoores/epub&#34;</span>

<span>const</span> <span>epub</span> <span>=</span> <span>await</span> <span>Epub</span><span>.</span><span>create</span><span>(</span><span>{</span>
  <span>title</span>: <span>&#34;S&#39;mores For Everyone&#34;</span><span>,</span>
  <span>// This should be the primary language of the publication.</span>
  <span>// Individual content resources may specify their own languages.</span>
  <span>language</span>: <span>new</span> <span>Intl</span><span>.</span><span>Locale</span><span>(</span><span>&#34;en-US&#34;</span><span>)</span><span>,</span>
  <span>// This can be any unique identifier, including UUIDs, ISBNs, etc</span>
  <span>identifier</span>: <span>randomUUID</span><span>(</span><span>)</span><span>,</span>
<span>}</span><span>)</span></pre></div>

<div><pre><span>import</span> <span>{</span> <span>Epub</span><span>,</span> <span>ManifestItem</span> <span>}</span> <span>from</span> <span>&#34;@smoores/epub&#34;</span>

<span>const</span> <span>epub</span> <span>=</span> <span>await</span> <span>Epub</span><span>.</span><span>from</span><span>(</span><span>&#34;path/to/book.epub&#34;</span><span>)</span>

<span>// Construct a manifest item describing the chapter</span>
<span>const</span> <span>manifestItem</span>: <span>ManifestItem</span> <span>=</span> <span>{</span>
  <span>id</span>: <span>&#34;chapter-one&#34;</span><span>,</span>
  <span>// This is the filepath for the chapter contents within the</span>
  <span>// EPUB archive.</span>
  <span>href</span>: <span>&#34;XHTML/chapter-one.xhtml&#34;</span><span>,</span>
  <span>mediaType</span>: <span>&#34;application/xhtml+xml&#34;</span><span>,</span>
<span>}</span>

<span>// You can specify the contents as a string</span>
<span>const</span> <span>contents</span> <span>=</span> <span>`&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span>&lt;html xmlns=&#34;http://www.w3.org/1999/xhtml&#34;</span>
<span>      xmlns:epub=&#34;http://www.idpf.org/2007/ops&#34;</span>
<span>      xml:lang=&#34;en-US&#34;</span>
<span>      lang=&#34;en-US&#34;&gt;</span>
<span>  &lt;head&gt;&lt;/head&gt;</span>
<span>  &lt;body&gt;</span>
<span>    &lt;h1&gt;Chapter 1&lt;/h1&gt;</span>
<span>    &lt;p&gt;At first, there were s&#39;mores.&lt;/p&gt;</span>
<span>  &lt;/body&gt;</span>
<span>&lt;/html&gt;`</span>

<span>// Or you can specify the contents as an XML structure</span>
<span>const</span> <span>xmlContents</span> <span>=</span> <span>epub</span><span>.</span><span>createXhtmlDocument</span><span>(</span><span>[</span>
  <span>Epub</span><span>.</span><span>createXmlElement</span><span>(</span><span>&#34;h1&#34;</span><span>,</span> <span>{</span><span>}</span><span>,</span> <span>[</span><span>Epub</span><span>.</span><span>createXmlTextNode</span><span>(</span><span>&#34;Chapter 1&#34;</span><span>)</span><span>]</span><span>)</span><span>,</span>
  <span>Epub</span><span>.</span><span>createXmlElement</span><span>(</span><span>&#34;p&#34;</span><span>,</span> <span>{</span><span>}</span><span>,</span> <span>[</span>
    <span>Epub</span><span>.</span><span>createXmlTextNode</span><span>(</span><span>&#34;At first, there were s&#39;mores.&#34;</span><span>)</span><span>,</span>
  <span>]</span><span>)</span><span>,</span>
<span>]</span><span>)</span>

<span>// First, add the new item to the manifest, and add</span>
<span>// its contents to the publication</span>
<span>await</span> <span>epub</span><span>.</span><span>addManifestItem</span><span>(</span><span>manifestItem</span><span>,</span> <span>contents</span><span>,</span> <span>&#34;utf-8&#34;</span><span>)</span>

<span>// OR, using the XMl:</span>
<span>await</span> <span>epub</span><span>.</span><span>addManifestItem</span><span>(</span><span>manifestItem</span><span>,</span> <span>xmlContents</span><span>,</span> <span>&#34;xml&#34;</span><span>)</span>

<span>// Then add the item to the spine</span>
<span>await</span> <span>epub</span><span>.</span><span>addSpineItem</span><span>(</span><span>manifestItem</span><span>.</span><span>id</span><span>)</span></pre></div>
<p>For more details about using the API, see the <a href="#epub">API documentation</a>.</p>

<p>This package lives in the
<a href="https://gitlab.com/smoores/storyteller" rel="nofollow">Storyteller monorepo</a>, and is developed
alongside the <a href="https://smoores.gitlab.io/storyteller" rel="nofollow">Storyteller platform</a>.</p>
<p>To get started with developing in the Storyteller monorepo, check out the
<a href="https://smoores.gitlab.io/storyteller/docs/category/development" rel="nofollow">development guides in the docs</a>.</p>

<ul>
<li>
<a href="#epub">Epub</a>
<ul>
<li><a href="#link">Link</a></li>
<li>
<a href="#properties">Properties</a>
<ul>
<li><a href="#xhtmlbuilder">xhtmlBuilder</a></li>
<li><a href="#xhtmlparser">xhtmlParser</a></li>
<li><a href="#xmlbuilder">xmlBuilder</a></li>
<li><a href="#xmlparser">xmlParser</a></li>
</ul>
</li>
<li>
<a href="#methods">Methods</a>
<ul>
<li><a href="#addcontributor">addContributor()</a></li>
<li><a href="#addcreator">addCreator()</a></li>
<li><a href="#addmanifestitem">addManifestItem()</a></li>
<li><a href="#addmetadata">addMetadata()</a></li>
<li><a href="#addspineitem">addSpineItem()</a></li>
<li><a href="#addsubject">addSubject()</a></li>
<li><a href="#close">close()</a></li>
<li><a href="#createxhtmldocument">createXhtmlDocument()</a></li>
<li><a href="#getcontributors">getContributors()</a></li>
<li><a href="#getcoverimage">getCoverImage()</a></li>
<li><a href="#getcoverimageitem">getCoverImageItem()</a></li>
<li><a href="#getcreators">getCreators()</a></li>
<li><a href="#getlanguage">getLanguage()</a></li>
<li><a href="#getmanifest">getManifest()</a></li>
<li><a href="#getmetadata">getMetadata()</a></li>
<li><a href="#getpublicationdate">getPublicationDate()</a></li>
<li><a href="#getspineitems">getSpineItems()</a></li>
<li><a href="#getsubjects">getSubjects()</a></li>
<li><a href="#gettitle">getTitle()</a></li>
<li><a href="#gettype">getType()</a></li>
<li><a href="#readitemcontents">readItemContents()</a></li>
<li><a href="#readxhtmlitemcontents">readXhtmlItemContents()</a></li>
<li><a href="#removemanifestitem">removeManifestItem()</a></li>
<li><a href="#removespineitem">removeSpineItem()</a></li>
<li><a href="#replacemetadata">replaceMetadata()</a></li>
<li><a href="#setcoverimage">setCoverImage()</a></li>
<li><a href="#setlanguage">setLanguage()</a></li>
<li><a href="#setpublicationdate">setPublicationDate()</a></li>
<li><a href="#settitle">setTitle()</a></li>
<li><a href="#settype">setType()</a></li>
<li><a href="#updatemanifestitem">updateManifestItem()</a></li>
<li><a href="#writeitemcontents">writeItemContents()</a></li>
<li><a href="#writetofile">writeToFile()</a></li>
<li><a href="#writexhtmlitemcontents">writeXhtmlItemContents()</a></li>
<li><a href="#addlinktoxhtmlhead">addLinkToXhtmlHead()</a></li>
<li><a href="#create">create()</a></li>
<li><a href="#createxmlelement">createXmlElement()</a></li>
<li><a href="#createxmltextnode">createXmlTextNode()</a></li>
<li><a href="#findxmlchildbyname">findXmlChildByName()</a></li>
<li><a href="#formatsmilduration">formatSmilDuration()</a></li>
<li><a href="#from">from()</a></li>
<li><a href="#getxhtmlbody">getXhtmlBody()</a></li>
<li><a href="#getxhtmltextcontent">getXhtmlTextContent()</a></li>
<li><a href="#getxmlchildren">getXmlChildren()</a></li>
<li><a href="#getxmlelementname">getXmlElementName()</a></li>
<li><a href="#isxmltextnode">isXmlTextNode()</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#alternatescript">AlternateScript</a>
<ul>
<li>
<a href="#properties-1">Properties</a>
<ul>
<li><a href="#locale">locale</a></li>
<li><a href="#name">name</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#dccreator">DcCreator</a>
<ul>
<li>
<a href="#properties-2">Properties</a>
<ul>
<li><a href="#alternatescripts">alternateScripts?</a></li>
<li><a href="#fileas">fileAs?</a></li>
<li><a href="#name-1">name</a></li>
<li><a href="#role">role?</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#dcsubject">DcSubject</a>
<ul>
<li>
<a href="#properties-3">Properties</a>
<ul>
<li><a href="#authority">authority</a></li>
<li><a href="#term">term</a></li>
<li><a href="#value">value</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#dublincore">DublinCore</a>
<ul>
<li>
<a href="#properties-4">Properties</a>
<ul>
<li><a href="#contributors">contributors?</a></li>
<li><a href="#creators">creators?</a></li>
<li><a href="#date">date?</a></li>
<li><a href="#identifier">identifier</a></li>
<li><a href="#language">language</a></li>
<li><a href="#subjects">subjects?</a></li>
<li><a href="#title">title</a></li>
<li><a href="#type">type?</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#elementname">ElementName</a>
<ul>
<li><a href="#defined-in-72">Defined in</a></li>
</ul>
</li>
<li>
<a href="#epubmetadata">EpubMetadata</a>
<ul>
<li><a href="#defined-in-73">Defined in</a></li>
</ul>
</li>
<li>
<a href="#manifestitem">ManifestItem</a>
<ul>
<li>
<a href="#type-declaration">Type declaration</a>
<ul>
<li><a href="#fallback">fallback?</a></li>
<li><a href="#href">href</a></li>
<li><a href="#id">id</a></li>
<li><a href="#mediaoverlay">mediaOverlay?</a></li>
<li><a href="#mediatype">mediaType?</a></li>
<li><a href="#properties-5">properties?</a></li>
</ul>
</li>
<li><a href="#defined-in-74">Defined in</a></li>
</ul>
</li>
<li>
<a href="#metadataentry">MetadataEntry</a>
<ul>
<li>
<a href="#type-declaration-1">Type declaration</a>
<ul>
<li><a href="#id-1">id?</a></li>
<li><a href="#properties-6">properties</a></li>
<li><a href="#type-1">type</a></li>
<li><a href="#value-1">value</a></li>
</ul>
</li>
<li><a href="#defined-in-75">Defined in</a></li>
</ul>
</li>
<li>
<a href="#parsedxml">ParsedXml</a>
<ul>
<li><a href="#defined-in-76">Defined in</a></li>
</ul>
</li>
<li>
<a href="#xmlelementname">XmlElement&lt;Name&gt;</a>
<ul>
<li>
<a href="#type-declaration-2">Type declaration</a>
<ul>
<li><a href="#">:@?</a></li>
</ul>
</li>
<li><a href="#type-parameters-4">Type Parameters</a></li>
<li><a href="#defined-in-77">Defined in</a></li>
</ul>
</li>
<li>
<a href="#xmlnode">XmlNode</a>
<ul>
<li><a href="#defined-in-78">Defined in</a></li>
</ul>
</li>
<li>
<a href="#xmltextnode">XmlTextNode</a>
<ul>
<li>
<a href="#type-declaration-3">Type declaration</a>
<ul>
<li><a href="#text">#text</a></li>
</ul>
</li>
<li><a href="#defined-in-79">Defined in</a></li>
</ul>
</li>
</ul>

<p>A single EPUB instance.</p>
<p>The entire EPUB contents will be read into memory.</p>
<p>Example usage:</p>
<div><pre><span>import</span> <span>{</span> <span>Epub</span><span>,</span> <span>getBody</span><span>,</span> <span>findByName</span><span>,</span> <span>textContent</span> <span>}</span> <span>from</span> <span>&#34;@smoores/epub&#34;</span>

<span>const</span> <span>epub</span> <span>=</span> <span>await</span> <span>Epub</span><span>.</span><span>from</span><span>(</span><span>&#34;./path/to/book.epub&#34;</span><span>)</span>
<span>const</span> <span>title</span> <span>=</span> <span>await</span> <span>epub</span><span>.</span><span>getTitle</span><span>(</span><span>)</span>
<span>const</span> <span>spineItems</span> <span>=</span> <span>await</span> <span>epub</span><span>.</span><span>getSpineItems</span><span>(</span><span>)</span>
<span>const</span> <span>chptOne</span> <span>=</span> <span>spineItems</span><span>[</span><span>0</span><span>]</span>
<span>const</span> <span>chptOneXml</span> <span>=</span> <span>await</span> <span>epub</span><span>.</span><span>readXhtmlItemContents</span><span>(</span><span>chptOne</span><span>.</span><span>id</span><span>)</span>

<span>const</span> <span>body</span> <span>=</span> <span>getBody</span><span>(</span><span>chptOneXml</span><span>)</span>
<span>const</span> <span>h1</span> <span>=</span> <span>Epub</span><span>.</span><span>findXmlChildByName</span><span>(</span><span>&#34;h1&#34;</span><span>,</span> <span>body</span><span>)</span>
<span>const</span> <span>headingText</span> <span>=</span> <span>textContent</span><span>(</span><span>h1</span><span>)</span>

<span>await</span> <span>epub</span><span>.</span><span>setTitle</span><span>(</span><span>headingText</span><span>)</span>
<span>await</span> <span>epub</span><span>.</span><span>writeToFile</span><span>(</span><span>&#34;./path/to/updated.epub&#34;</span><span>)</span>
<span>await</span> <span>epub</span><span>.</span><span>close</span><span>(</span><span>)</span></pre></div>

<p><a href="https://www.w3.org/TR/epub-33/" rel="nofollow">https://www.w3.org/TR/epub-33/</a></p>


<blockquote>
<p><code>static</code> <strong>xhtmlBuilder</strong>: <code>XMLBuilder</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L229" rel="nofollow">index.ts:229</a></p>

<blockquote>
<p><code>static</code> <strong>xhtmlParser</strong>: <code>XMLParser</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L197" rel="nofollow">index.ts:197</a></p>

<blockquote>
<p><code>static</code> <strong>xmlBuilder</strong>: <code>XMLBuilder</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L222" rel="nofollow">index.ts:222</a></p>

<blockquote>
<p><code>static</code> <strong>xmlParser</strong>: <code>XMLParser</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L190" rel="nofollow">index.ts:190</a></p>


<blockquote>
<p><strong>addContributor</strong>(<code>contributor</code>, <code>index</code>?): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Add a contributor to the EPUB metadata.</p>
<p>If index is provided, the creator will be placed at that index in the list of
creators. Otherwise, it will be added to the end of the list.</p>
<p>This is a convenience method for
<code>epub.addCreator(contributor, index, &#39;contributor&#39;)</code>.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>contributor</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a></td>
</tr>
<tr>
<td>
<code>index</code>?</td>
<td><code>number</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dccreator" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dccreator</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1299" rel="nofollow">index.ts:1299</a></p>

<blockquote>
<p><strong>addCreator</strong>(<code>creator</code>, <code>index</code>?, <code>type</code>?): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Add a creator to the EPUB metadata.</p>
<p>If index is provided, the creator will be placed at that index in the list of
creators. Otherwise, it will be added to the end of the list.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>creator</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a></td>
<td><code>undefined</code></td>
</tr>
<tr>
<td>
<code>index</code>?</td>
<td><code>number</code></td>
<td><code>undefined</code></td>
</tr>
<tr>
<td>
<code>type</code>?</td>
<td>
<code>&#34;creator&#34;</code> | <code>&#34;contributor&#34;</code>
</td>
<td><code>&#34;creator&#34;</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dccreator" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dccreator</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1201" rel="nofollow">index.ts:1201</a></p>


<blockquote>
<p><strong>addManifestItem</strong>(<code>item</code>, <code>contents</code>, <code>encoding</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Create a new manifest item and write its contents to a new entry.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a></td>
<td>-</td>
</tr>
<tr>
<td><code>contents</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
<td>The new contents. May be either a parsed XML tree or a unicode string, as determined by the <code>as</code> argument.</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td><code>&#34;xml&#34;</code></td>
<td>Optional - whether to interpret contents as a parsed XML tree, a unicode string, or a byte array. Defaults to a byte array.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-manifest" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-manifest</a></p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1680" rel="nofollow">index.ts:1680</a></p>

<blockquote>
<p><strong>addManifestItem</strong>(<code>item</code>, <code>contents</code>, <code>encoding</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Create a new manifest item and write its contents to a new entry.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a></td>
<td>-</td>
</tr>
<tr>
<td><code>contents</code></td>
<td><code>string</code></td>
<td>The new contents. May be either a parsed XML tree or a unicode string, as determined by the <code>as</code> argument.</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td><code>&#34;utf-8&#34;</code></td>
<td>Optional - whether to interpret contents as a parsed XML tree, a unicode string, or a byte array. Defaults to a byte array.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-manifest" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-manifest</a></p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1685" rel="nofollow">index.ts:1685</a></p>

<blockquote>
<p><strong>addManifestItem</strong>(<code>item</code>, <code>contents</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Create a new manifest item and write its contents to a new entry.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a></td>
<td>-</td>
</tr>
<tr>
<td><code>contents</code></td>
<td>
<code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;</td>
<td>The new contents. May be either a parsed XML tree or a unicode string, as determined by the <code>as</code> argument.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-manifest" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-manifest</a></p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1690" rel="nofollow">index.ts:1690</a></p>

<blockquote>
<p><strong>addMetadata</strong>(<code>entry</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Add a new metadata entry to the Epub.</p>
<p>This method, like <code>epub.getMetadata()</code>, operates on metadata entries. For more
useful semantic representations of metadata, use specific methods such as
<code>setTitle()</code> and <code>setLanguage()</code>.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>entry</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#metadataentry"><code>MetadataEntry</code></a></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-metadata" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-metadata</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1828" rel="nofollow">index.ts:1828</a></p>

<blockquote>
<p><strong>addSpineItem</strong>(<code>manifestId</code>, <code>index</code>?): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Add an item to the spine of the EPUB.</p>
<p>If <code>index</code> is undefined, the item will be added to the end of the spine.
Otherwise it will be inserted at the specified index.</p>
<p>If the manifestId does not correspond to an item in the manifest, this will
throw an error.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>manifestId</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td>
<code>index</code>?</td>
<td><code>number</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-spine-elem" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-spine-elem</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1357" rel="nofollow">index.ts:1357</a></p>

<blockquote>
<p><strong>addSubject</strong>(<code>subject</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Add a subject to the EPUB metadata.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>subject</code></td>
<td>
<code>string</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#dcsubject"><code>DcSubject</code></a>
</td>
<td>May be a string representing just a schema-less subject name, or a DcSubject object</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dcsubject" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dcsubject</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L890" rel="nofollow">index.ts:890</a></p>

<blockquote>
<p><strong>close</strong>(): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Close the Epub. Must be called before the Epub goes out of scope/is garbage
collected.</p>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L407" rel="nofollow">index.ts:407</a></p>

<blockquote>
<p><strong>createXhtmlDocument</strong>(<code>body</code>, <code>head</code>?, <code>language</code>?):
<code>Promise</code>&lt;(<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>&#34;html&#34;</code>&gt; |
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>&#34;?xml&#34;</code>&gt;)[]&gt;</p>
</blockquote>
<p>Create a new XHTML document with the given body and head.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>body</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
<td>The XML nodes to place in the body of the document</td>
</tr>
<tr>
<td>
<code>head</code>?</td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
<td>Optional - the XMl nodes to place in the head</td>
</tr>
<tr>
<td>
<code>language</code>?</td>
<td><code>Locale</code></td>
<td>Optional - defaults to the EPUB&#39;s language</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;(<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>&#34;html&#34;</code>&gt; |
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>&#34;?xml&#34;</code>&gt;)[]&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1486" rel="nofollow">index.ts:1486</a></p>

<blockquote>
<p><strong>getContributors</strong>(): <code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]&gt;</p>
</blockquote>
<p>Retrieve the list of contributors.</p>
<p>This is a convenience method for <code>epub.getCreators(&#39;contributor&#39;)</code>.</p>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dccontributor" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dccontributor</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1188" rel="nofollow">index.ts:1188</a></p>

<blockquote>
<p><strong>getCoverImage</strong>(): <code>Promise</code>&lt;<code>null</code> | <code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;&gt;</p>
</blockquote>
<p>Retrieve the cover image data as a byte array.</p>
<p>This does not include, for example, the cover image&#39;s filename or mime type. To
retrieve the image manifest item, use epub.getCoverImageItem().</p>

<p><code>Promise</code>&lt;<code>null</code> | <code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-cover-image" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-cover-image</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L793" rel="nofollow">index.ts:793</a></p>

<blockquote>
<p><strong>getCoverImageItem</strong>(): <code>Promise</code>&lt;<code>null</code> |
<a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>&gt;</p>
</blockquote>
<p>Retrieve the cover image manifest item.</p>
<p>This does not return the actual image data. To retrieve the image data, pass
this item&#39;s id to epub.readItemContents, or use epub.getCoverImage() instead.</p>

<p><code>Promise</code>&lt;<code>null</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-cover-image" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-cover-image</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L774" rel="nofollow">index.ts:774</a></p>

<blockquote>
<p><strong>getCreators</strong>(<code>type</code>): <code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]&gt;</p>
</blockquote>
<p>Retrieve the list of creators.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td>
<code>&#34;creator&#34;</code> | <code>&#34;contributor&#34;</code>
</td>
<td><code>&#34;creator&#34;</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dccreator" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dccreator</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1130" rel="nofollow">index.ts:1130</a></p>

<blockquote>
<p><strong>getLanguage</strong>(): <code>Promise</code>&lt;<code>null</code> | <code>Locale</code>&gt;</p>
</blockquote>
<p>Retrieve the Epub&#39;s language as specified in its package document metadata.</p>
<p>If no language metadata is specified, returns null. Returns the language as an
Intl.Locale instance.</p>

<p><code>Promise</code>&lt;<code>null</code> | <code>Locale</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dclanguage" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dclanguage</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L974" rel="nofollow">index.ts:974</a></p>

<blockquote>
<p><strong>getManifest</strong>(): <code>Promise</code>&lt;<code>Record</code>&lt;<code>string</code>,
<a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>&gt;&gt;</p>
</blockquote>
<p>Retrieve the manifest for the Epub.</p>
<p>This is represented as a map from each manifest items&#39; id to the rest of its
properties.</p>

<p><code>Promise</code>&lt;<code>Record</code>&lt;<code>string</code>, <a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>&gt;&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-manifest" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-manifest</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L613" rel="nofollow">index.ts:613</a></p>

<blockquote>
<p><strong>getMetadata</strong>(): <code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epubmetadata"><code>EpubMetadata</code></a>&gt;</p>
</blockquote>
<p>Retrieve the metadata entries for the Epub.</p>
<p>This is represented as an array of metadata entries, in the order that they&#39;re
presented in the Epub package document.</p>
<p>For more useful semantic representations of metadata, use specific methods such
as <code>getTitle()</code> and <code>getAuthors()</code>.</p>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epubmetadata"><code>EpubMetadata</code></a>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-metadata" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-metadata</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L671" rel="nofollow">index.ts:671</a></p>

<blockquote>
<p><strong>getPublicationDate</strong>(): <code>Promise</code>&lt;<code>null</code> | <code>Date</code>&gt;</p>
</blockquote>
<p>Retrieve the publication date from the dc:date element in the EPUB metadata as a
Date object.</p>
<p>If there is no dc:date element, returns null.</p>

<p><code>Promise</code>&lt;<code>null</code> | <code>Date</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dcdate" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dcdate</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L830" rel="nofollow">index.ts:830</a></p>

<blockquote>
<p><strong>getSpineItems</strong>(): <code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>[]&gt;</p>
</blockquote>
<p>Retrieve the manifest items that make up the Epub&#39;s spine.</p>
<p>The spine specifies the order that the contents of the Epub should be displayed
to users by default.</p>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>[]&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-spine-elem" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-spine-elem</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1338" rel="nofollow">index.ts:1338</a></p>

<blockquote>
<p><strong>getSubjects</strong>(): <code>Promise</code>&lt;(<code>string</code> |
<a href="http://pepijndevos.nl/2024/12/12/README.md#dcsubject"><code>DcSubject</code></a>)[]&gt;</p>
</blockquote>
<p>Retrieve the list of subjects for this EPUB.</p>
<p>Subjects without associated authority and term metadata will be returned as
strings. Otherwise, they will be represented as DcSubject objects, with a value,
authority, and term.</p>

<p><code>Promise</code>&lt;(<code>string</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#dcsubject"><code>DcSubject</code></a>)[]&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dcsubject" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dcsubject</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L929" rel="nofollow">index.ts:929</a></p>

<blockquote>
<p><strong>getTitle</strong>(<code>short</code>): <code>Promise</code>&lt;<code>undefined</code> | <code>string</code>&gt;</p>
</blockquote>
<p>Retrieve the title of the Epub.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>short</code></td>
<td><code>boolean</code></td>
<td><code>false</code></td>
<td>Optional - whether to return only the first title segment if multiple are found. Otherwise, will follow the spec to combine title segments</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>undefined</code> | <code>string</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dctitle" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dctitle</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1016" rel="nofollow">index.ts:1016</a></p>

<blockquote>
<p><strong>getType</strong>(): <code>Promise</code>&lt;<code>null</code> |
<a href="http://pepijndevos.nl/2024/12/12/README.md#metadataentry"><code>MetadataEntry</code></a>&gt;</p>
</blockquote>
<p>Retrieve the publication type from the dc:type element in the EPUB metadata.</p>
<p>If there is no dc:type element, returns null.</p>

<p><code>Promise</code>&lt;<code>null</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#metadataentry"><code>MetadataEntry</code></a>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dctype" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dctype</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L877" rel="nofollow">index.ts:877</a></p>


<blockquote>
<p><strong>readItemContents</strong>(<code>id</code>): <code>Promise</code>&lt;<code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;&gt;</p>
</blockquote>
<p>Retrieve the contents of a manifest item, given its id.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to retrieve</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1458" rel="nofollow">index.ts:1458</a></p>

<blockquote>
<p><strong>readItemContents</strong>(<code>id</code>, <code>encoding</code>): <code>Promise</code>&lt;<code>string</code>&gt;</p>
</blockquote>
<p>Retrieve the contents of a manifest item, given its id.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to retrieve</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td><code>&#34;utf-8&#34;</code></td>
<td>Optional - must be the string &#34;utf-8&#34;. If provided, the function will encode the data into a unicode string. Otherwise, the data will be returned as a byte array.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>string</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1459" rel="nofollow">index.ts:1459</a></p>


<blockquote>
<p><strong>readXhtmlItemContents</strong>(<code>id</code>, <code>as</code>?):
<code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a>&gt;</p>
</blockquote>
<p>Retrieves the contents of an XHTML item, given its manifest id.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to retrieve</td>
</tr>
<tr>
<td>
<code>as</code>?</td>
<td><code>&#34;xhtml&#34;</code></td>
<td>Optional - whether to return the parsed XML document tree, or the concatenated text of the document. Defaults to the parsed XML tree.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-xhtml" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-xhtml</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1519" rel="nofollow">index.ts:1519</a></p>

<blockquote>
<p><strong>readXhtmlItemContents</strong>(<code>id</code>, <code>as</code>): <code>Promise</code>&lt;<code>string</code>&gt;</p>
</blockquote>
<p>Retrieves the contents of an XHTML item, given its manifest id.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to retrieve</td>
</tr>
<tr>
<td><code>as</code></td>
<td><code>&#34;text&#34;</code></td>
<td>Optional - whether to return the parsed XML document tree, or the concatenated text of the document. Defaults to the parsed XML tree.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>string</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-xhtml" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-xhtml</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1520" rel="nofollow">index.ts:1520</a></p>

<blockquote>
<p><strong>removeManifestItem</strong>(<code>id</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1620" rel="nofollow">index.ts:1620</a></p>

<blockquote>
<p><strong>removeSpineItem</strong>(<code>index</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Remove the spine item at the specified index.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>index</code></td>
<td><code>number</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-spine-elem" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-spine-elem</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1405" rel="nofollow">index.ts:1405</a></p>

<blockquote>
<p><strong>replaceMetadata</strong>(<code>predicate</code>, <code>entry</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Replace a metadata entry with a new one.</p>
<p>The <code>predicate</code> argument will be used to determine which entry to replace. The
first metadata entry that matches the predicate will be replaced.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>predicate</code></td>
<td>(<code>entry</code>) =&gt; <code>boolean</code>
</td>
<td>Calls predicate once for each metadata entry, until it finds one where predicate returns true</td>
</tr>
<tr>
<td><code>entry</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#metadataentry"><code>MetadataEntry</code></a></td>
<td>The new entry to replace the found entry with</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-metadata" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-metadata</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1876" rel="nofollow">index.ts:1876</a></p>

<blockquote>
<p><strong>setCoverImage</strong>(<code>href</code>, <code>data</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Set the cover image for the EPUB.</p>
<p>Adds a manifest item with the <code>cover-image</code> property, per the EPUB 3 spec, and
then writes the provided image data to the provided href within the publication.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>href</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>data</code></td>
<td>
<code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L807" rel="nofollow">index.ts:807</a></p>

<blockquote>
<p><strong>setLanguage</strong>(<code>locale</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Update the Epub&#39;s language metadata entry.</p>
<p>Updates the existing dc:language element if one exists. Otherwise creates a new
element</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>locale</code></td>
<td><code>Locale</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dclanguage" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dclanguage</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L999" rel="nofollow">index.ts:999</a></p>

<blockquote>
<p><strong>setPublicationDate</strong>(<code>date</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Set the dc:date metadata element with the provided date.</p>
<p>Updates the existing dc:date element if one exists. Otherwise creates a new
element</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>date</code></td>
<td><code>Date</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dcdate" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dcdate</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L845" rel="nofollow">index.ts:845</a></p>

<blockquote>
<p><strong>setTitle</strong>(<code>title</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Set the title of the Epub.</p>
<p>If a title already exists, only the first title metadata entry will be modified
to match the new value.</p>
<p>If no title currently exists, a single title metadata entry will be created.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>title</code></td>
<td><code>string</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dctitle" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dctitle</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1091" rel="nofollow">index.ts:1091</a></p>

<blockquote>
<p><strong>setType</strong>(<code>type</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Set the dc:type metadata element.</p>
<p>Updates the existing dc:type element if one exists. Otherwise creates a new
element.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td><code>string</code></td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-opf-dctype" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-opf-dctype</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L861" rel="nofollow">index.ts:861</a></p>

<blockquote>
<p><strong>updateManifestItem</strong>(<code>id</code>, <code>newItem</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Update the manifest entry for an existing item.</p>
<p>To update the contents of an entry, use <code>epub.writeItemContents()</code> or
<code>epub.writeXhtmlItemContents()</code></p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>newItem</code></td>
<td>
<code>Omit</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#manifestitem"><code>ManifestItem</code></a>, <code>&#34;id&#34;</code>&gt;</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-pkg-manifest" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-pkg-manifest</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1764" rel="nofollow">index.ts:1764</a></p>


<blockquote>
<p><strong>writeItemContents</strong>(<code>id</code>, <code>contents</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Write new contents for an existing manifest item, specified by its id.</p>
<p>The id must reference an existing manifest item. If creating a new item, use
<code>epub.addManifestItem()</code> instead.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to write new contents for</td>
</tr>
<tr>
<td><code>contents</code></td>
<td>
<code>Uint8Array</code>&lt;<code>ArrayBufferLike</code>&gt;</td>
<td>The new contents. May be either a utf-8 encoded string or a byte array, as determined by the encoding</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1572" rel="nofollow">index.ts:1572</a></p>

<blockquote>
<p><strong>writeItemContents</strong>(<code>id</code>, <code>contents</code>, <code>encoding</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Write new contents for an existing manifest item, specified by its id.</p>
<p>The id must reference an existing manifest item. If creating a new item, use
<code>epub.addManifestItem()</code> instead.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to write new contents for</td>
</tr>
<tr>
<td><code>contents</code></td>
<td><code>string</code></td>
<td>The new contents. May be either a utf-8 encoded string or a byte array, as determined by the encoding</td>
</tr>
<tr>
<td><code>encoding</code></td>
<td><code>&#34;utf-8&#34;</code></td>
<td>Optional - must be the string &#34;utf-8&#34;. If provided, the contents will be interpreted as a unicode string. Otherwise, the contents must be a byte array.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-contentdocs" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-contentdocs</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1573" rel="nofollow">index.ts:1573</a></p>

<blockquote>
<p><strong>writeToFile</strong>(<code>path</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Write the current contents of the Epub to a new EPUB archive on disk.</p>
<p>This <em>does not</em> close the Epub. It can continue to be modified after it has been
written to disk. Use <code>epub.close()</code> to close the Epub.</p>
<p>When this method is called, the &#34;dcterms:modified&#34; meta tag is automatically
updated to the current UTC timestamp.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The file path to write the new archive to. The parent directory does not need te exist -- the path will be recursively created.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1940" rel="nofollow">index.ts:1940</a></p>

<blockquote>
<p><strong>writeXhtmlItemContents</strong>(<code>id</code>, <code>contents</code>): <code>Promise</code>&lt;<code>void</code>&gt;</p>
</blockquote>
<p>Write new contents for an existing XHTML item, specified by its id.</p>
<p>The id must reference an existing manifest item. If creating a new item, use
<code>epub.addManifestItem()</code> instead.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>The id of the manifest item to write new contents for</td>
</tr>
<tr>
<td><code>contents</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
<td>The new contents. Must be a parsed XML tree.</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<code>void</code>&gt;</p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-xhtml" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-xhtml</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L1612" rel="nofollow">index.ts:1612</a></p>

<blockquote>
<p><code>static</code> <strong>addLinkToXhtmlHead</strong>(<code>xml</code>, <code>link</code>): <code>void</code></p>
</blockquote>
<p>Given an XML structure representing a complete XHTML document, add a <code>link</code>
element to the <code>head</code> of the document.</p>
<p>This method modifies the provided XML structure.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>xml</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
</tr>
<tr>
<td><code>link</code></td>
<td>{ <code>href</code>: <code>string</code>; <code>rel</code>: <code>string</code>; <code>type</code>: <code>string</code>; }</td>
</tr>
<tr>
<td><code>link.href</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>link.rel</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>link.type</code></td>
<td><code>string</code></td>
</tr>
</tbody>
</table>

<p><code>void</code></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L259" rel="nofollow">index.ts:259</a></p>

<blockquote>
<p><code>static</code> <strong>create</strong>(<code>dublinCore</code>, <code>additionalMetadata</code>):
<code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epub"><code>Epub</code></a>&gt;</p>
</blockquote>
<p>Construct an Epub instance, optionally beginning with the provided metadata.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dublinCore</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#dublincore"><code>DublinCore</code></a></td>
<td><code>undefined</code></td>
<td>Core metadata terms</td>
</tr>
<tr>
<td><code>additionalMetadata</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#epubmetadata"><code>EpubMetadata</code></a></td>
<td><code>[]</code></td>
<td>An array of additional metadata entries</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epub"><code>Epub</code></a>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L423" rel="nofollow">index.ts:423</a></p>

<blockquote>
<p><code>static</code> <strong>createXmlElement</strong>&lt;<code>Name</code>&gt;(<code>name</code>, <code>properties</code>, <code>children</code>):
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</p>
</blockquote>

<table>
<thead>
<tr>
<th>Type Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Name</code> <em>extends</em> `a${string}` | `b${string}` | `c${string}` | `d${string}` | `e${string}` | `f${string}` | `g${string}` | `h${string}` | `i${string}` | `j${string}` | `k${string}` | `l${string}` | `m${string}` | `n${string}` | `o${string}` | `p${string}` | `q${string}` | `r${string}` | `s${string}` | `t${string}` | `u${string}` | `v${string}` | `w${string}` | `x${string}` | `y${string}` | `z${string}` | `A${string}` | `B${string}` | `C${string}` | `D${string}` | `E${string}` | `F${string}` | `G${string}` | `H${string}` | `I${string}` | `J${string}` | `K${string}` | `L${string}` | `M${string}` | `N${string}` | `O${string}` | `P${string}` | `Q${string}` | `R${string}` | `S${string}` | `T${string}` | `U${string}` | `V${string}` | `W${string}` | `X${string}` | `Y${string}` | `Z${string}` | `?${string}`</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>Name</code></td>
<td><code>undefined</code></td>
</tr>
<tr>
<td><code>properties</code></td>
<td>
<code>Record</code>&lt;<code>string</code>, <code>string</code>&gt;</td>
<td><code>undefined</code></td>
</tr>
<tr>
<td><code>children</code></td>
<td>
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlnode"><code>XmlNode</code></a>[]</td>
<td><code>[]</code></td>
</tr>
</tbody>
</table>

<p><a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L294" rel="nofollow">index.ts:294</a></p>

<blockquote>
<p><code>static</code> <strong>createXmlTextNode</strong>(<code>text</code>): <a href="http://pepijndevos.nl/2024/12/12/README.md#xmltextnode"><code>XmlTextNode</code></a></p>
</blockquote>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>text</code></td>
<td><code>string</code></td>
</tr>
</tbody>
</table>

<p><a href="http://pepijndevos.nl/2024/12/12/README.md#xmltextnode"><code>XmlTextNode</code></a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L307" rel="nofollow">index.ts:307</a></p>

<blockquote>
<p><code>static</code> <strong>findXmlChildByName</strong>&lt;<code>Name</code>&gt;(<code>name</code>, <code>xml</code>, <code>filter</code>?):
<code>undefined</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</p>
</blockquote>
<p>Given an XML structure, find the first child matching the provided name and
optional filter.</p>

<table>
<thead>
<tr>
<th>Type Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Name</code> <em>extends</em> `a${string}` | `b${string}` | `c${string}` | `d${string}` | `e${string}` | `f${string}` | `g${string}` | `h${string}` | `i${string}` | `j${string}` | `k${string}` | `l${string}` | `m${string}` | `n${string}` | `o${string}` | `p${string}` | `q${string}` | `r${string}` | `s${string}` | `t${string}` | `u${string}` | `v${string}` | `w${string}` | `x${string}` | `y${string}` | `z${string}` | `A${string}` | `B${string}` | `C${string}` | `D${string}` | `E${string}` | `F${string}` | `G${string}` | `H${string}` | `I${string}` | `J${string}` | `K${string}` | `L${string}` | `M${string}` | `N${string}` | `O${string}` | `P${string}` | `Q${string}` | `R${string}` | `S${string}` | `T${string}` | `U${string}` | `V${string}` | `W${string}` | `X${string}` | `Y${string}` | `Z${string}` | `?${string}`</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>Name</code></td>
</tr>
<tr>
<td><code>xml</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
</tr>
<tr>
<td>
<code>filter</code>?</td>
<td>(<code>node</code>) =&gt; <code>boolean</code>
</td>
</tr>
</tbody>
</table>

<p><code>undefined</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L360" rel="nofollow">index.ts:360</a></p>

<blockquote>
<p><code>static</code> <strong>formatSmilDuration</strong>(<code>duration</code>): <code>string</code></p>
</blockquote>
<p>Format a duration, provided as a number of seconds, as a SMIL clock value, to be
used for Media Overlays.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>duration</code></td>
<td><code>number</code></td>
</tr>
</tbody>
</table>

<p><code>string</code></p>

<p><a href="https://www.w3.org/TR/epub-33/#sec-duration" rel="nofollow">https://www.w3.org/TR/epub-33/#sec-duration</a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L242" rel="nofollow">index.ts:242</a></p>

<blockquote>
<p><code>static</code> <strong>from</strong>(<code>path</code>): <code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epub"><code>Epub</code></a>&gt;</p>
</blockquote>
<p>Construct an Epub instance by reading an EPUB file from <code>path</code>.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>Must be a valid filepath to an EPUB archive</td>
</tr>
</tbody>
</table>

<p><code>Promise</code>&lt;<a href="http://pepijndevos.nl/2024/12/12/README.md#epub"><code>Epub</code></a>&gt;</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L502" rel="nofollow">index.ts:502</a></p>

<blockquote>
<p><code>static</code> <strong>getXhtmlBody</strong>(<code>xml</code>): <a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></p>
</blockquote>
<p>Given an XML structure representing a complete XHTML document, return the
sub-structure representing the children of the document&#39;s body element.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>xml</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
</tr>
</tbody>
</table>

<p><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L284" rel="nofollow">index.ts:284</a></p>

<blockquote>
<p><code>static</code> <strong>getXhtmlTextContent</strong>(<code>xml</code>): <code>string</code></p>
</blockquote>
<p>Given an XML structure representing a complete XHTML document, return a string
representing the concatenation of all text nodes in the document.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>xml</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></td>
</tr>
</tbody>
</table>

<p><code>string</code></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L316" rel="nofollow">index.ts:316</a></p>

<blockquote>
<p><code>static</code> <strong>getXmlChildren</strong>&lt;<code>Name</code>&gt;(<code>element</code>):
<a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></p>
</blockquote>
<p>Given an XMLElement, return a list of its children</p>

<table>
<thead>
<tr>
<th>Type Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Name</code> <em>extends</em> `a${string}` | `b${string}` | `c${string}` | `d${string}` | `e${string}` | `f${string}` | `g${string}` | `h${string}` | `i${string}` | `j${string}` | `k${string}` | `l${string}` | `m${string}` | `n${string}` | `o${string}` | `p${string}` | `q${string}` | `r${string}` | `s${string}` | `t${string}` | `u${string}` | `v${string}` | `w${string}` | `x${string}` | `y${string}` | `z${string}` | `A${string}` | `B${string}` | `C${string}` | `D${string}` | `E${string}` | `F${string}` | `G${string}` | `H${string}` | `I${string}` | `J${string}` | `K${string}` | `L${string}` | `M${string}` | `N${string}` | `O${string}` | `P${string}` | `Q${string}` | `R${string}` | `S${string}` | `T${string}` | `U${string}` | `V${string}` | `W${string}` | `X${string}` | `Y${string}` | `Z${string}` | `?${string}`</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>element</code></td>
<td>
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</td>
</tr>
</tbody>
</table>

<p><a href="http://pepijndevos.nl/2024/12/12/README.md#parsedxml"><code>ParsedXml</code></a></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L348" rel="nofollow">index.ts:348</a></p>

<blockquote>
<p><code>static</code> <strong>getXmlElementName</strong>&lt;<code>Name</code>&gt;(<code>element</code>): <code>Name</code></p>
</blockquote>
<p>Given an XMLElement, return its tag name.</p>

<table>
<thead>
<tr>
<th>Type Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Name</code> <em>extends</em> `a${string}` | `b${string}` | `c${string}` | `d${string}` | `e${string}` | `f${string}` | `g${string}` | `h${string}` | `i${string}` | `j${string}` | `k${string}` | `l${string}` | `m${string}` | `n${string}` | `o${string}` | `p${string}` | `q${string}` | `r${string}` | `s${string}` | `t${string}` | `u${string}` | `v${string}` | `w${string}` | `x${string}` | `y${string}` | `z${string}` | `A${string}` | `B${string}` | `C${string}` | `D${string}` | `E${string}` | `F${string}` | `G${string}` | `H${string}` | `I${string}` | `J${string}` | `K${string}` | `L${string}` | `M${string}` | `N${string}` | `O${string}` | `P${string}` | `Q${string}` | `R${string}` | `S${string}` | `T${string}` | `U${string}` | `V${string}` | `W${string}` | `X${string}` | `Y${string}` | `Z${string}` | `?${string}`</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>element</code></td>
<td>
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a>&lt;<code>Name</code>&gt;</td>
</tr>
</tbody>
</table>

<p><code>Name</code></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L333" rel="nofollow">index.ts:333</a></p>

<blockquote>
<p><code>static</code> <strong>isXmlTextNode</strong>(<code>node</code>): <code>node is XmlTextNode</code></p>
</blockquote>
<p>Given an XMLNode, determine whether it represents a text node or an XML element.</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>node</code></td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#xmlnode"><code>XmlNode</code></a></td>
</tr>
</tbody>
</table>

<p><code>node is XmlTextNode</code></p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L373" rel="nofollow">index.ts:373</a></p>
<hr/>



<blockquote>
<p><strong>locale</strong>: <code>Locale</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L141" rel="nofollow">index.ts:141</a></p>

<blockquote>
<p><strong>name</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L140" rel="nofollow">index.ts:140</a></p>
<hr/>



<blockquote>
<p><code>optional</code> <strong>alternateScripts</strong>:
<a href="http://pepijndevos.nl/2024/12/12/README.md#alternatescript"><code>AlternateScript</code></a>[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L148" rel="nofollow">index.ts:148</a></p>

<blockquote>
<p><code>optional</code> <strong>fileAs</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L147" rel="nofollow">index.ts:147</a></p>

<blockquote>
<p><strong>name</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L145" rel="nofollow">index.ts:145</a></p>

<blockquote>
<p><code>optional</code> <strong>role</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L146" rel="nofollow">index.ts:146</a></p>
<hr/>



<blockquote>
<p><strong>authority</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L135" rel="nofollow">index.ts:135</a></p>

<blockquote>
<p><strong>term</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L136" rel="nofollow">index.ts:136</a></p>

<blockquote>
<p><strong>value</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L134" rel="nofollow">index.ts:134</a></p>
<hr/>



<blockquote>
<p><code>optional</code> <strong>contributors</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L158" rel="nofollow">index.ts:158</a></p>

<blockquote>
<p><code>optional</code> <strong>creators</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#dccreator"><code>DcCreator</code></a>[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L157" rel="nofollow">index.ts:157</a></p>

<blockquote>
<p><code>optional</code> <strong>date</strong>: <code>Date</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L155" rel="nofollow">index.ts:155</a></p>

<blockquote>
<p><strong>identifier</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L154" rel="nofollow">index.ts:154</a></p>

<blockquote>
<p><strong>language</strong>: <code>Locale</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L153" rel="nofollow">index.ts:153</a></p>

<blockquote>
<p><code>optional</code> <strong>subjects</strong>: (<code>string</code> | <a href="http://pepijndevos.nl/2024/12/12/README.md#dcsubject"><code>DcSubject</code></a>)[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L156" rel="nofollow">index.ts:156</a></p>

<blockquote>
<p><strong>title</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L152" rel="nofollow">index.ts:152</a></p>

<blockquote>
<p><code>optional</code> <strong>type</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L159" rel="nofollow">index.ts:159</a></p>
<hr/>

<blockquote>
<p><strong>ElementName</strong>:
`${Letter | Uppercase&lt;Letter&gt; | QuestionMark}${string}`</p>
</blockquote>
<p>A valid name for an XML element (must start with a letter)</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L62" rel="nofollow">index.ts:62</a></p>
<hr/>

<blockquote>
<p><strong>EpubMetadata</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#metadataentry"><code>MetadataEntry</code></a>[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L131" rel="nofollow">index.ts:131</a></p>
<hr/>

<blockquote>
<p><strong>ManifestItem</strong>: <code>object</code></p>
</blockquote>


<blockquote>
<p><code>optional</code> <strong>fallback</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><strong>href</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><strong>id</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><code>optional</code> <strong>mediaOverlay</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><code>optional</code> <strong>mediaType</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><code>optional</code> <strong>properties</strong>: <code>string</code>[]</p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L81" rel="nofollow">index.ts:81</a></p>
<hr/>

<blockquote>
<p><strong>MetadataEntry</strong>: <code>object</code></p>
</blockquote>


<blockquote>
<p><code>optional</code> <strong>id</strong>: <code>string</code></p>
</blockquote>

<blockquote>
<p><strong>properties</strong>: <code>Record</code>&lt;<code>string</code>, <code>string</code>&gt;</p>
</blockquote>

<blockquote>
<p><strong>type</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#elementname"><code>ElementName</code></a></p>
</blockquote>

<blockquote>
<p><strong>value</strong>: <code>string</code> | <code>undefined</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L124" rel="nofollow">index.ts:124</a></p>
<hr/>

<blockquote>
<p><strong>ParsedXml</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#xmlnode"><code>XmlNode</code></a>[]</p>
</blockquote>
<p>An XML structure</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L79" rel="nofollow">index.ts:79</a></p>
<hr/>

<blockquote>
<p><strong>XmlElement</strong>&lt;<code>Name</code>&gt;: <code>object</code> &amp; <code>{ [key in Name]: ParsedXml }</code></p>
</blockquote>
<p>An XML element</p>


<blockquote>
<p><code>optional</code> <strong>:@</strong>: <code>Record</code>&lt;<code>string</code>, <code>string</code>&gt;</p>
</blockquote>

<table>
<thead>
<tr>
<th>Type Parameter</th>
<th>Default type</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>Name</code> <em>extends</em> <a href="http://pepijndevos.nl/2024/12/12/README.md#elementname"><code>ElementName</code></a>
</td>
<td><a href="http://pepijndevos.nl/2024/12/12/README.md#elementname"><code>ElementName</code></a></td>
</tr>
</tbody>
</table>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L66" rel="nofollow">index.ts:66</a></p>
<hr/>

<blockquote>
<p><strong>XmlNode</strong>: <a href="http://pepijndevos.nl/2024/12/12/README.md#xmlelementname"><code>XmlElement</code></a> |
<a href="http://pepijndevos.nl/2024/12/12/README.md#xmltextnode"><code>XmlTextNode</code></a></p>
</blockquote>
<p>A valid XML node. May be either an element or a text node.</p>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L76" rel="nofollow">index.ts:76</a></p>
<hr/>

<blockquote>
<p><strong>XmlTextNode</strong>: <code>object</code></p>
</blockquote>
<p>A text node in an XML document</p>


<blockquote>
<p><strong>#text</strong>: <code>string</code></p>
</blockquote>

<p><a href="https://gitlab.com/smoores/storyteller/-/blob/main/epub/index.ts#L73" rel="nofollow">index.ts:73</a></p>
</div></article></div></div>
  </body>
</html>
