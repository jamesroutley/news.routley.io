<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.mostlypython.com/django-from-first-principles/">Original</a>
    <h1>Building a full Django project, starting with a single file</h1>
    
    <div id="readability-page-1" class="page"><section>
            <p>MP 90: Building a complete Django project from a single file.</p><p><strong>Note: </strong><em>This is the first post in a </em><a href="https://www.mostlypython.com/django-from-first-principles-2/" rel="noreferrer"><em>series</em></a><em> about building a full Django project, starting with a single file. This series will be free to everyone, as soon as each post comes out.</em> <a href="#footnote-1" rel="noreferrer"><sup>1</sup></a></p><p>For a long time, Django has seemed more complex than other web frameworks such as Flask. This reputation is largely based on a somewhat unfair comparison between the &#34;simplest&#34; Django project and the &#34;simplest&#34; Flask project. That comparison often lands in favor of Flask, because Flask&#39;s documentation starts off with a single-file project consisting of just five lines of code.</p><p>In this project we&#39;ll build a Django project, but we&#39;ll take an approach that&#39;s much different from most Django tutorials. We&#39;ll start with a single file, just like the Flask example, and the single-file demos we see from other frameworks. As we build out the project, we&#39;ll add pieces one at a time, only as they&#39;re needed. By the time we&#39;re finished, we&#39;ll have a standard Django project built from the ground up.</p><h2 id="the-source-of-djangos-initial-complexity">The source of Django&#39;s (initial) complexity</h2><p>Django&#39;s initial complexity stems from the fact that most tutorials tell people to start with these two commands:</p>
<!--kg-card-begin: html-->
<pre data-caption="" data-hl-lines="[]" data-language="sh"><span></span><span>$ </span>django-admin<span> </span>startproject<span> </span>&lt;project-name&gt;<span> </span>.
<span>$ </span>python<span> </span>manage.py<span> </span>startapp<span> </span>&lt;app-name&gt;</pre>
<!--kg-card-end: html-->
<p>After running these two commands, there are twelve files you&#39;ll need to make sense of! If you&#39;re an experienced Django developer, that automatically-generated project structure is a big help. But if you&#39;re new to Django, it&#39;s not obvious at all how all these parts fit together.</p><h2 id="an-alternative-approach">An alternative approach</h2><p>Rather than starting with these commands, we&#39;ll start with just one file that serves our project&#39;s home page. We&#39;ll look at all the parts of the file, so the purpose of every aspect of the project is clear from the start. As we progress in building out the project, we&#39;ll only expand out into additional files and directories when they&#39;re needed.</p><figure><img src="https://www.mostlypython.com/content/images/2024/03/standard_vs_single_django-2-1.png" alt="Output of `tree` for a standard Django project, and a single-file version of the same project." loading="lazy" width="1720" height="1057" srcset="https://www.mostlypython.com/content/images/size/w600/2024/03/standard_vs_single_django-2-1.png 600w, https://www.mostlypython.com/content/images/size/w1000/2024/03/standard_vs_single_django-2-1.png 1000w, https://www.mostlypython.com/content/images/size/w1600/2024/03/standard_vs_single_django-2-1.png 1600w, https://www.mostlypython.com/content/images/2024/03/standard_vs_single_django-2-1.png 1720w" sizes="(min-width: 720px) 720px"/><figcaption><span>A standard Django project on the left, before writing any of your own code. There are 12 files that people new to Django need to make sense of. It&#39;s possible to start a Django project with just a single file, as shown on the right.</span></figcaption></figure><h2 id="where-well-end-up">Where we&#39;ll end up</h2><p>When the project is fully developed, we&#39;ll end up with a project structure that&#39;s almost identical to what you&#39;d get using the <code>startproject</code> and <code>startapp</code> commands. You probably won&#39;t ever use the ground-up approach shown in this series again, but you&#39;ll come away from it with a much better understanding of the structure of a typical Django project.</p><h2 id="a-simple-but-nontrivial-project">A simple but nontrivial project</h2><p>A good project for a tutorial series is simple, but nontrivial. This means it should use a database, incorporate user accounts, and feature styling that requires the use of static files.<a href="#footnote-2" rel="noreferrer"><sup>2</sup></a></p><p>In this series we&#39;ll build a project called <em>BlogMaker Lite</em>. It&#39;s my go-to project for Django discussions, because it ticks all the requirements for a simple but nontrivial project. We&#39;ll also deploy the project when we&#39;re finished, to prove that the final version of the project would work in production.</p><h2 id="conclusions">Conclusions</h2><p>Django <em>is</em> more complex than some other web frameworks, because it includes a lot more out of the box than minimalist frameworks. By the time you&#39;ve built out everything your real-world project needs, a typical Django project isn&#39;t much more complex than a fully-built project using a different framework.</p><p>While <code>startproject</code> and <code>startapp</code> give experienced Django developers a nice starting point for new projects, people learning about Django don&#39;t need to start with the complexity that those two commands introduce. Instead, we can start from a single file that&#39;s easier to understand, and build out each new piece as it&#39;s needed.</p><p>If you&#39;re new to Django, hopefully this series will be a helpful way to see the framework for the first time. If you&#39;ve been using Django for a while, you&#39;ll probably come away with a better understanding of the structure you&#39;ve already been seeing in your projects. And if you&#39;re really experienced with Django, maybe you&#39;ll see the framework from a newcomer&#39;s eyes once again.</p><p>In the next post, we&#39;ll start by writing a single file that serves the project&#39;s home page.</p><p><strong>Note:</strong> <em>I&#39;d love feedback throughout this series. If you have any thoughts or reactions, please leave a comment or reach out in </em><a href="https://www.mostlypython.com/contact/" rel="noreferrer"><em>whatever way</em></a><em> works best for you.</em></p>
<!--kg-card-begin: html-->
<hr/>
<!--kg-card-end: html-->
<p>Usually, new series on <em>Mostly Python</em> are only available to paid subscribers for a period of six weeks. This series will be free to everyone as soon as each post comes out. I&#39;m still finishing up the migration from Substack, and it&#39;s a little easier to only publish free posts for a little while longer.</p><p>More importantly, I want this series to be available to people in the Django community as soon as each post is published. This series builds on work that people have been sharing at a number of recent DjangoCons, where people have been challenging each other to come up with the shortest working single-file Django project possible.</p><p>If you&#39;re curious about some of this prior work, start by watching Carlton Gibson&#39;s Djang0Con US 2019 <a href="https://www.youtube.com/watch?v=w9cYEovduWI&amp;ref=mostlypython.com" rel="noreferrer">talk</a>, <em>Using Django as a Micro-Framework</em>. Then take a look at Will Vincent&#39;s <a href="https://github.com/wsvincent/django-microframework?ref=mostlypython.com" rel="noreferrer">django-microframework</a> repository; Will has done a nice job of collecting a few different single-file examples. Then check out Paolo Melchiorre&#39;s <a href="https://github.com/pauloxnet/uDjango?ref=mostlypython.com" rel="noreferrer">Î¼Django</a> project, which he demonstrated at DjangoCon US 2023. Andrew Mshar wrote an interesting blog post called <em>Moving from Django Microframework to Django</em>, following up on Paolo&#39;s work. Most recently, Andrew Godwin shared his <a href="https://github.com/andrewgodwin/django-singlefile?ref=mostlypython.com" rel="noreferrer">django-singlefile</a> project. This is the first example that seems to be meant for <a href="https://fosstodon.org/deck/@andrew@aeracode.org/112180445225617864?ref=mostlypython.com" rel="noreferrer">real-world use</a>, and I&#39;m curious to see where people go with it.</p><p>While these been interesting exercises, it can quickly turn into a game of code golf. Someone might come up with slightly shorter single-file projects, but many of these are just as hard for newer people to understand as a standard Django project generated from <code>startproject</code> and <code>startapp</code>. I&#39;ve been thinking for a while that one of the most interesting directions to take this work is building out a full project from one of these single-file examples. This series is my response to seeing everyone else&#39;s single-file projects; I hope the people who shared those projects like what they see here. :)</p>
<!--kg-card-begin: html-->

<!--kg-card-end: html-->
<p>It frustrates me to no end seeing hosting platforms use overly simplistic Django projects in their examples. Heroku once pushed a broken build process because the sample project they used for testing didn&#39;t even use a database.</p>
        </section></div>
  </body>
</html>
