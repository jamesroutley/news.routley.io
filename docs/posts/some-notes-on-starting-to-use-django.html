<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jvns.ca/blog/2026/01/27/some-notes-on-starting-to-use-django/">Original</a>
    <h1>Some notes on starting to use Django</h1>
    
    <p>Hello! One of my favourite things is starting to learn an
Old Boring Technology that I&rsquo;ve never tried before but that has been around for
20+ years. It feels really good when every problem I&rsquo;m ever going to have has
been solved already 1000 times and I can just get stuff done easily.</p>
<p>I&rsquo;ve thought it would be cool to learn a popular web framework like
Rails or Django or Laravel for a long time, but I&rsquo;d never really managed to
make it happen. But I started learning Django to make a website a few months
back, I&rsquo;ve been liking it so far, and here are a few quick notes!</p>
<h3 id="less-magic-than-rails">less magic than Rails</h3>
<p>I spent some time <a href="https://jvns.ca/blog/2020/11/09/day-1--a-little-rails-/">trying to learn Rails</a> in 2020,
and while it was cool and I really wanted to like Rails (the Ruby community is great!),
I found that if I left my Rails project alone for months, when I came
back to it it was hard for me to remember how to get anything done because
(for example) if it says <code>resources :topics</code> in your <code>routes.rb</code>, on its own
that doesn&rsquo;t tell you where the <code>topics</code> routes are configured, you need to
remember or look up the convention.</p>
<p>Being able to abandon a project for months or years and then come back to it is
really important to me (that&rsquo;s how all my projects work!), and Django feels easier
to me because things are more explicit.</p>
<p>In my small Django project it feels like I just have 5 main files (other
than the settings files): <code>urls.py</code>, <code>models.py</code>, <code>views.py</code>, <code>admin.py</code>, and
<code>tests.py</code>, and if I want to know where something else is (like an HTML template)
is then it&rsquo;s usually explicitly referenced from one of those files.</p>
<h3 id="a-built-in-admin">a built-in admin</h3>
<p>For this project I wanted to have an admin interface to manually edit or view
some of the data in the database. Django has a really nice built-in admin
interface, and I can customize it with just a little bit of code.</p>
<p>For example, here&rsquo;s part of one of my admin classes, which sets up which fields
to display in the &ldquo;list&rdquo; view,  which field to search on, and how to order them
by default.</p>
<pre><code>@admin.register(Zine)
class ZineAdmin(admin.ModelAdmin):
    list_display = [&quot;name&quot;, &quot;publication_date&quot;, &quot;free&quot;, &quot;slug&quot;, &quot;image_preview&quot;]
    search_fields = [&quot;name&quot;, &quot;slug&quot;]
    readonly_fields = [&quot;image_preview&quot;]
    ordering = [&quot;-publication_date&quot;]
</code></pre>
<h3 id="it-s-fun-to-have-an-orm">it&rsquo;s fun to have an ORM</h3>
<p>In the past my attitude has been &ldquo;ORMs? Who needs them? I can just write my own SQL queries!&rdquo;.
I&rsquo;ve been enjoying Django&rsquo;s ORM so far though, and I think it&rsquo;s cool how Django
uses <code>__</code> to represent a <code>JOIN</code>, like this:</p>
<pre><code>Zine.objects
    .exclude(product__order__email_hash=email_hash)
</code></pre>
<p>This query involves 5 tables: <code>zines</code>, <code>zine_products</code>, <code>products</code>, <code>order_products</code>, and <code>orders</code>.
To make this work I just had to tell Django that there&rsquo;s a <code>ManyToManyField</code>
relating &ldquo;orders&rdquo; and &ldquo;products&rdquo;, and another <code>ManyToManyField</code> relating
&ldquo;zines&rdquo;, and &ldquo;products&rdquo;, so that it knows how to connect <code>zines</code>, <code>orders</code>, <code>products</code>.</p>
<p>I definitely <em>could</em> write that query, but writing <code>product__order__email_hash</code> is
a lot less typing, it feels a lot easier to read, and honestly I think it would
take me a little while to figure out how to construct the query
(which needs to do a few other things than just those joins).</p>
<p>I have zero concern about the performance of my ORM-generated queries so I&rsquo;m
pretty excited about ORMs for now, though I&rsquo;m sure I&rsquo;ll find things to be
frustrated with eventually.</p>
<h3 id="automatic-migrations">automatic migrations!</h3>
<p>The other great thing about the ORM is migrations!</p>
<p>If I add, delete, or change a field in <code>models.py</code>, Django will automatically
generate a migration script like <code>migrations/0006_delete_imageblob.py</code>.</p>
<p>I assume that I could edit those scripts if I wanted, but so far I&rsquo;ve just
been running the generated scripts with no change and it&rsquo;s been going great. It
really feels like magic.</p>
<p>I&rsquo;m realizing that being able to do migrations easily is important for me right
now because I&rsquo;m changing my data model fairly often as I figure out how I want
it to work.</p>
<h3 id="i-like-the-docs">I like the docs</h3>
<p>I had a bad habit of <a href="https://www.youtube.com/watch?v=krMw1QTP2no">never reading the documentation</a>
but I&rsquo;ve been really enjoying the parts of Django&rsquo;s docs that I&rsquo;ve read so far.
This isn&rsquo;t by accident: Jacob Kaplan-Moss has a
<a href="https://pyvideo.org/pycon-us-2011/pycon-2011--writing-great-documentation.html">talk from PyCon 2011</a>
on Django&rsquo;s documentation culture.</p>
<p>For example the <a href="https://docs.djangoproject.com/en/6.0/topics/db/models/">intro to models</a>
lists the most important common fields you might want to set when using the ORM.</p>
<h3 id="using-sqlite">using sqlite</h3>
<p>After having a bad experience trying to operate Postgres and not being able to
understand what was going on, I decided to run all of my small websites with
SQLite instead. It&rsquo;s been going way better, and I love being able to backup by
just doing a <code>VACUUM INTO</code> and then copying the resulting single file.</p>
<p>I&rsquo;ve been following <a href="https://alldjango.com/articles/definitive-guide-to-using-django-sqlite-in-production">these instructions</a>
for using SQLite with Django in production.</p>
<p>I think it should be fine because I&rsquo;m expecting the site to have a few hundred
writes per day at most, much less than <a href="https://messwithdns.net/">Mess with DNS</a>
which has a lot more of writes and has been working well (though the writes are
split across 3 different SQLite databases).</p>
<h3 id="built-in-email-and-more">built in email (and more)</h3>
<p>Django seems to be very &ldquo;batteries-included&rdquo;, which I love &ndash; if I want CSRF
protection, or a <code>Content-Security-Policy</code>, or I want to send email, it&rsquo;s all
in there!</p>
<p>For example, I wanted to save the emails Django sends to a file in dev mode (so
that it didn&rsquo;t send real email to real people), which was just a little bit
of configuration.</p>
<p>I just put this <code>settings/dev.py</code>:</p>
<pre><code>EMAIL_BACKEND = &quot;django.core.mail.backends.filebased.EmailBackend&quot;
EMAIL_FILE_PATH = BASE_DIR / &quot;emails&quot;
</code></pre>
<p>and then set up the production email like this in <code>settings/production.py</code></p>
<pre><code>EMAIL_BACKEND = &quot;django.core.mail.backends.smtp.EmailBackend&quot;
EMAIL_HOST = &quot;smtp.whatever.com&quot;
EMAIL_PORT = 587
EMAIL_USE_TLS = True
EMAIL_HOST_USER = &quot;xxxx&quot;
EMAIL_HOST_PASSWORD = os.getenv('EMAIL_API_KEY')
</code></pre>
<p>That made me feel like if I want some other basic website feature, there&rsquo;s
likely to be an easy way to do it built into Django already.</p>
<h3 id="the-settings-file-still-feels-like-a-lot">the settings file still feels like a lot</h3>
<p>I&rsquo;m still a bit intimidated by the <code>settings.py</code> file: Django&rsquo;s settings system
works by setting a bunch of global variables in a file, and I feel a bit
stressed about&hellip; what if I make a typo in the name of one of those variables?
How will I know? What if I type <code>WSGI_APPLICATOIN = &quot;config.wsgi.application&quot;</code>
instead of <code>WSGI_APPLICATION</code>?</p>
<p>I guess I&rsquo;ve gotten used to having a Python language server tell me when I&rsquo;ve
made a typo and so now it feels a bit disorienting when I can&rsquo;t rely on the
language server support.</p>
<h3 id="that-s-all-for-now">that&rsquo;s all for now!</h3>
<p>I haven&rsquo;t really successfully used an actual web framework for a project before
(right now almost all of my websites are either a single Go binary or static
sites), so I&rsquo;m interested in seeing how it goes!</p>
<p>There&rsquo;s still lots for me to learn about, I still haven&rsquo;t really gotten into
Django&rsquo;s form validation tooling or authentication systems.</p>
<p>Thanks to Marco Rogers for convincing me to give ORMs a chance.</p>
<p>(we&rsquo;re still experimenting with the comments-on-Mastodon system! <a href="https://comments.jvns.ca/post/115969229107460589">Here are the comments on Mastodon</a>! tell me your favourite Django feature!)</p>

  </body>
</html>
