<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mullvad.net/en/blog/2022/1/12/diskless-infrastructure-beta-system-transparency-stboot/">Original</a>
    <h1>Diskless infrastructure in beta (System Transparency: stboot)</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p>Diskless infrastructure using stboot (in beta) is now available on a pair of WireGuard servers in Sweden.</p>

<p>Today we are introducing our first VPN servers booted with our new bootloader - stboot. This marks the <strong>start</strong> of our long-running public-facing journey to make our VPN infrastructure transparent and user-auditable.</p>

<h2>Diskless infrastructure for VPN servers</h2>

<p>Today we announce an early beta release of a part of our System Transparency technology running on one VPN server in Gothenburg and one in Stockholm, Sweden. Both of these servers are listed in a “System Transparency [BETA]” city in our server list, viewable within our app as well as on our website.</p>

<p>You can find these servers by selecting: Switch Location → Sweden → System Transparency [BETA]</p>

<p>Make sure you are using the WireGuard protocol (applies to desktop app only).</p>

<p>This means that we now have two servers running entirely on RAM, <strong>without any disks in use</strong>.</p>

<h3>What does “without any disks in use” mean?</h3>

<ol>
	<li>If the computer is powered off, moved or confiscated, there is no data to retrieve.</li>
	<li>We get the operational benefits of having fewer breakable parts. Disks are among the components that break often. Therefore, switching away from them makes our infrastructure more reliable.</li>
	<li>The operational tasks of setting up and upgrading package versions on servers become faster and easier.</li>
	<li>Running the system in RAM does not prevent the possibility of logging. It does however minimise the risk of accidentally storing something that can later be retrieved.</li>
</ol>

<h2>Where do you pull data from if you have no disks to store it on?</h2>

<p>For these servers we make use of provisioning servers in order to download an “OS Package”. These provisioning servers have disks but they contain only the signed images and some base configuration data that our System Transparency (or stbooted) servers will use.</p>

<p>Our VPN servers launch the System Transparency bootloader (stboot) which downloads the OS package from a provisioning server and verifies that it originates from relevant Mullvad VPN staff by checking its signatures. If the OS package is valid, the OS is booted. The server then waits for an authorised member of staff to provision and deploy it for customer use.</p>

<p>By and large, these servers will be configured in a similar manner to our other WireGuard servers, except we use no disks, and RAM is the only location where data is kept.</p>

<p><img alt="" src="https://mullvad.net/media/uploads/2022/01/12/stboot1.jpg"/></p>

<p>Debug output stboot starting up</p>

<p><img alt="" src="https://mullvad.net/media/uploads/2022/01/12/stboot2.jpg"/></p>

<p>Debug output OS package signatures verified</p>

<h2>What happens when the server is restarted?</h2>

<p>At this point, the server would boot up, unaware about its past history due to using no disk. The process would be the same as in the previous step (download, verify, wait for authorisation).</p>

<p>In other words, we have amnesia for servers.</p>

<h2>If this is the first of many steps, what happens next?</h2>

<p>We get your feedback, if any, on how well it works!</p>

<p>We will continue to develop our provisioning and deployment process of stbooted VPN servers, starting with the ones providing WireGuard tunnels. We will start adding more servers in different locations as we get more comfortable and the projects&#39; moving parts become more mature.</p>

<h2>End goal: Trustworthiness through transparency</h2>

<p>We are continuously striving to strengthen the trustworthiness of all aspects of our service. This is why our VPN apps have been open source since we started over 12 years ago. Achieving transparency on the server side is a very different challenge, as merely open sourcing our server software is not enough. We want our users to be able to verify and audit what is currently running on the VPN server they are connected to. This is our end goal with System Transparency.</p>

<h2>Note</h2>

<p>During this beta, WireGuard keys will be wiped on each server restart. If you are using configuration files to connect to the servers you will need to download new ones each time this happens. This does not affect the Mullvad App.</p>

<h2>Read more</h2>

<ul>
	<li><a href="https://mullvad.net/blog/2019/6/3/system-transparency-future/">System Transparency is the future</a></li>
	<li><a href="https://mullvad.net/blog/2019/8/7/open-source-firmware-future/">Open Source Firmware is the future</a></li>
	<li><a href="https://www.system-transparency.org/">System Transparency home page</a></li>
</ul>
        </div></div>
  </body>
</html>
