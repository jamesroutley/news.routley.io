<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/manzaltu/claude-code-ide.el">Original</a>
    <h1>Claude Code IDE Integration for Emacs</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/manzaltu/claude-code-ide.el/actions/workflows/test.yml"><img src="https://github.com/manzaltu/claude-code-ide.el/workflows/CI/badge.svg" alt="https://github.com/manzaltu/claude-code-ide.el/workflows/CI/badge.svg"/></a>
  <a href="https://www.gnu.org/software/emacs/" rel="nofollow"><img src="https://camo.githubusercontent.com/e5e2c0cdd7eb562ab27df3a8f5a564f5d96dce41857e6712bef14d9e5b49bf4a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f474e55253230456d6163732d32382d2d33302d626c756576696f6c65742e737667" alt="https://img.shields.io/badge/GNU%20Emacs-28--30-blueviolet.svg" data-canonical-src="https://img.shields.io/badge/GNU%20Emacs-28--30-blueviolet.svg"/></a>
  <a href="https://www.gnu.org/licenses/gpl-3.0" rel="nofollow"><img src="https://camo.githubusercontent.com/93ca07ea63e4649ae72b87de86d82eedeab50e744fa6e07ee95e5344779fb930/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d47504c25323076332d626c75652e737667" alt="https://img.shields.io/badge/License-GPL%20v3-blue.svg" data-canonical-src="https://img.shields.io/badge/License-GPL%20v3-blue.svg"/></a></p>

<p dir="auto">Claude Code IDE for Emacs provides native integration with Claude Code CLI through the Model Context Protocol (MCP). Unlike simple terminal wrappers, this package creates a bidirectional bridge between Claude and Emacs, enabling Claude to understand and leverage Emacs’ powerful features—from LSP and project management to custom Elisp functions. This transforms Claude into a true Emacs-aware AI assistant that works within your existing workflow and can interact with your entire Emacs ecosystem.</p>

<ul dir="auto">
  <li>Automatic project detection and session management</li>
  <li>Terminal integration with full color support using <code>vterm</code> or <code>eat</code></li>
  <li>MCP protocol implementation for IDE integration</li>
  <li>Tool support for file operations, editor state, and workspace info</li>
  <li>Extensible MCP tools server for accessing Emacs commands (xrefs, tree-sitter, project info, e.g.)</li>
  <li>Diagnostic integration with Flycheck and Flymake</li>
  <li>Advanced diff view with ediff integration</li>
  <li>Tab-bar support for proper context switching</li>
  <li>Selection and buffer tracking for better context awareness</li>
</ul>

<p dir="auto">This package enables Claude Code to leverage the full power of Emacs through MCP tools integration. Claude can directly access and utilize Emacs capabilities including:</p>
<ul dir="auto">
  <li><b>Language Server Protocol (LSP)</b> integration through xref commands for intelligent code navigation (eglot, lsp-mode and others)</li>
  <li><b>Tree-sitter</b> for syntax tree analysis and understanding code structure at the AST level</li>
  <li><b>Imenu</b> for structured symbol listing and navigation within files</li>
  <li><b>Project</b> integration for project-aware operations</li>
  <li><b>Any Emacs command or function</b> can be exposed as an MCP tool, allowing Claude to:
    <ul dir="auto">
      <li>Perform project-wide searches and refactoring</li>
      <li>Access specialized modes and their features</li>
      <li>Execute custom Elisp functions tailored to your workflow</li>
    </ul>
  </li>
</ul>
<p dir="auto">This deep integration means Claude Code understands your project context and can leverage Emacs’ extensive ecosystem to provide more intelligent and context-aware assistance.</p>


<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/manzaltu/claude-code-ide.el/blob/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/file.png"><img src="https://github.com/manzaltu/claude-code-ide.el/raw/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/file.png"/></a></p>
<p dir="auto"><i>Claude Code automatically knows which file you’re currently viewing in Emacs</i></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/manzaltu/claude-code-ide.el/blob/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/selection.png"><img src="https://github.com/manzaltu/claude-code-ide.el/raw/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/selection.png"/></a></p>
<p dir="auto"><i>Claude Code can access and work with selected text in your buffers</i></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Advanced Diff View with Diagnostics</h3><a id="user-content-advanced-diff-view-with-diagnostics" aria-label="Permalink: Advanced Diff View with Diagnostics" href="#advanced-diff-view-with-diagnostics"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/manzaltu/claude-code-ide.el/blob/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/ediff_diag.png"><img src="https://github.com/manzaltu/claude-code-ide.el/raw/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/ediff_diag.png"/></a></p>
<p dir="auto"><i>Integrated ediff view for code changes, with Claude Code able to directly access diagnostic data (errors, warnings, etc.) from opened files</i></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/manzaltu/claude-code-ide.el/blob/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/mentions.png"><img src="https://github.com/manzaltu/claude-code-ide.el/raw/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/mentions.png"/></a></p>
<p dir="auto"><i>Automatically mention and reference selected text in Claude conversations</i></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/manzaltu/claude-code-ide.el/blob/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/restore.png"><img src="https://github.com/manzaltu/claude-code-ide.el/raw/25053b5f1b8123eed5c3f00e8b3e9687ee33391d/screenshots/restore.png"/></a></p>
<p dir="auto"><i>Resume previous Claude Code conversations with the –resume flag</i></p>


<ul dir="auto">
  <li>Emacs 28.1 or higher</li>
  <li>Claude Code CLI installed and available in PATH</li>
  <li><code>vterm</code> or <code>eat</code> package (for terminal support)</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installing Claude Code CLI</h2><a id="user-content-installing-claude-code-cli" aria-label="Permalink: Installing Claude Code CLI" href="#installing-claude-code-cli"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Follow the installation instructions at <a href="https://docs.anthropic.com/en/docs/claude-code" rel="nofollow">Claude Code Documentation</a>.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installing the Emacs Package</h2><a id="user-content-installing-the-emacs-package" aria-label="Permalink: Installing the Emacs Package" href="#installing-the-emacs-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Currently, this package is in early development. To install using <code>use-package</code> and <a href="https://github.com/raxod502/straight.el">straight.el</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(use-package claude-code-ide
  :straight (:type git :host github :repo &#34;manzaltu/claude-code-ide.el&#34;)
  :bind (&#34;C-c C-&#39;&#34; . claude-code-ide-menu) ; Set your favorite keybinding
  :config
  (claude-code-ide-emacs-tools-setup)) ; Optionally enable Emacs MCP tools"><pre>(<span>use-package</span> claude-code-ide
  <span>:straight</span> (<span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>manzaltu/claude-code-ide.el<span>&#34;</span></span>)
  <span>:bind</span> (<span><span>&#34;</span>C-c C-&#39;<span>&#34;</span></span> <span>.</span> claude-code-ide-menu) <span><span>;</span> Set your favorite keybinding</span>
  <span>:config</span>
  (claude-code-ide-emacs-tools-setup)) <span><span>;</span> Optionally enable Emacs MCP tools</span></pre></div>


<p dir="auto">The easiest way to interact with Claude Code IDE is through the transient menu interface, which provides visual access to all available commands. Simply run <code>M-x claude-code-ide-menu</code> to open the interactive menu.</p>
<markdown-accessiblity-table><table>
  <tbody><tr><th>Command</th><th>Description</th></tr>
  <tr><td><code>M-x claude-code-ide-menu</code></td><td>Open transient menu with all Claude Code commands</td></tr>
  <tr><td><code>M-x claude-code-ide-emacs-tools-setup</code></td><td>Set up built-in MCP tools (e.g. xref, project)</td></tr>
  <tr><td><code>M-x claude-code-ide</code></td><td>Start Claude Code for the current project</td></tr>
  <tr><td><code>M-x claude-code-ide-send-prompt</code></td><td>Send prompt to Claude from minibuffer input</td></tr>
  <tr><td><code>M-x claude-code-ide-continue</code></td><td>Continue most recent conversation in directory</td></tr>
  <tr><td><code>M-x claude-code-ide-resume</code></td><td>Resume Claude Code with previous conversation</td></tr>
  <tr><td><code>M-x claude-code-ide-stop</code></td><td>Stop Claude Code for the current project</td></tr>
  <tr><td><code>M-x claude-code-ide-switch-to-buffer</code></td><td>Switch to project’s Claude buffer</td></tr>
  <tr><td><code>M-x claude-code-ide-list-sessions</code></td><td>List all active Claude Code sessions and switch</td></tr>
  <tr><td><code>M-x claude-code-ide-check-status</code></td><td>Check if Claude Code CLI is installed and working</td></tr>
  <tr><td><code>M-x claude-code-ide-insert-at-mentioned</code></td><td>Send selected text to Claude prompt</td></tr>
  <tr><td><code>M-x claude-code-ide-send-escape</code></td><td>Send escape key to Claude terminal</td></tr>
  <tr><td><code>M-x claude-code-ide-insert-newline</code></td><td>Insert newline in Claude prompt (sends \ + Enter)</td></tr>
  <tr><td><code>M-x claude-code-ide-toggle</code></td><td>Toggle visibility of Claude Code window</td></tr>
  <tr><td><code>M-x claude-code-ide-show-debug</code></td><td>Show the debug buffer with WebSocket messages</td></tr>
  <tr><td><code>M-x claude-code-ide-clear-debug</code></td><td>Clear the debug buffer</td></tr>
</tbody></table></markdown-accessiblity-table>

<p dir="auto">Claude Code IDE automatically detects your project using Emacs’ built-in <code>project.el</code>. Each project gets its own Claude Code instance with a unique buffer name like <code>*claude-code[project-name]*</code>.</p>
<p dir="auto">You can run multiple Claude Code instances simultaneously for different projects. Use <code>claude-code-ide-list-sessions</code> to see all active sessions and switch between them.</p>

<ul dir="auto">
  <li>Running <code>claude-code-ide</code> when a session is already active will toggle the window visibility</li>
  <li>The window can be closed with standard Emacs window commands (<code>C-x 0</code>) without stopping Claude</li>
</ul>


<markdown-accessiblity-table><table>
  <tbody><tr><th>Variable</th><th>Description</th><th>Default</th></tr>
  <tr><td><code>claude-code-ide-cli-path</code></td><td>Path to Claude Code CLI</td><td><code>&#34;claude&#34;</code></td></tr>
  <tr><td><code>claude-code-ide-buffer-name-function</code></td><td>Function for buffer naming</td><td><code>claude-code-ide--default-buffer-name</code></td></tr>
  <tr><td><code>claude-code-ide-cli-debug</code></td><td>Enable CLI debug mode (-d flag)</td><td><code>nil</code></td></tr>
  <tr><td><code>claude-code-ide-cli-extra-flags</code></td><td>Additional CLI flags (e.g. “–model”)</td><td><code>&#34;&#34;</code></td></tr>
  <tr><td><code>claude-code-ide-debug</code></td><td>Enable debug logging</td><td><code>nil</code></td></tr>
  <tr><td><code>claude-code-ide-terminal-backend</code></td><td>Terminal backend (vterm or eat)</td><td><code>&#39;vterm</code></td></tr>
  <tr><td><code>claude-code-ide-log-with-context</code></td><td>Include session context in log messages</td><td><code>t</code></td></tr>
  <tr><td><code>claude-code-ide-debug-buffer</code></td><td>Buffer name for debug output</td><td><code>&#34;*claude-code-ide-debug*&#34;</code></td></tr>
  <tr><td><code>claude-code-ide-use-side-window</code></td><td>Use side window vs regular buffer</td><td><code>t</code></td></tr>
  <tr><td><code>claude-code-ide-window-side</code></td><td>Side for Claude window</td><td><code>&#39;right</code></td></tr>
  <tr><td><code>claude-code-ide-window-width</code></td><td>Width for side windows (left/right)</td><td><code>90</code></td></tr>
  <tr><td><code>claude-code-ide-window-height</code></td><td>Height for side windows (top/bottom)</td><td><code>20</code></td></tr>
  <tr><td><code>claude-code-ide-focus-on-open</code></td><td>Focus Claude window when opened</td><td><code>t</code></td></tr>
  <tr><td><code>claude-code-ide-focus-claude-after-ediff</code></td><td>Focus Claude window after opening ediff</td><td><code>t</code></td></tr>
  <tr><td><code>claude-code-ide-show-claude-window-in-ediff</code></td><td>Show Claude window during ediff</td><td><code>t</code></td></tr>
  <tr><td><code>claude-code-ide-system-prompt</code></td><td>Custom system prompt to append</td><td><code>nil</code></td></tr>
  <tr><td><code>claude-code-ide-enable-mcp-server</code></td><td>Enable MCP tools server</td><td><code>nil</code></td></tr>
  <tr><td><code>claude-code-ide-mcp-server-port</code></td><td>Port for MCP tools server</td><td><code>nil</code> (auto-select)</td></tr>
  <tr><td><code>claude-code-ide-mcp-server-tools</code></td><td>Alist of exposed Emacs functions</td><td><code>nil</code></td></tr>
  <tr><td><code>claude-code-ide-diagnostics-backend</code></td><td>Diagnostics backend (auto/flycheck/flymake)</td><td><code>&#39;auto</code></td></tr>
  <tr><td><code>claude-code-ide-prevent-reflow-glitch</code></td><td>Prevent terminal reflow glitch (bug #1422)</td><td><code>t</code></td></tr>
</tbody></table></markdown-accessiblity-table>
<div dir="auto"><h3 tabindex="-1" dir="auto">Side Window Configuration</h3><a id="user-content-side-window-configuration" aria-label="Permalink: Side Window Configuration" href="#side-window-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Claude Code buffers open in a side window by default. You can customize the placement:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Open Claude on the left side
(setq claude-code-ide-window-side &#39;left)

;; Open Claude at the bottom with custom height
(setq claude-code-ide-window-side &#39;bottom
      claude-code-ide-window-height 30)

;; Open Claude on the right with custom width
(setq claude-code-ide-window-side &#39;right
      claude-code-ide-window-width 100)

;; Don&#39;t automatically focus the Claude window
(setq claude-code-ide-focus-on-open nil)

;; Keep focus on ediff control window when opening diffs
(setq claude-code-ide-focus-claude-after-ediff nil)

;; Hide Claude window during ediff for more screen space
(setq claude-code-ide-show-claude-window-in-ediff nil)"><pre><span><span>;</span>; Open Claude on the left side</span>
(<span>setq</span> claude-code-ide-window-side <span>&#39;left</span>)

<span><span>;</span>; Open Claude at the bottom with custom height</span>
(<span>setq</span> claude-code-ide-window-side <span>&#39;bottom</span>
      claude-code-ide-window-height <span>30</span>)

<span><span>;</span>; Open Claude on the right with custom width</span>
(<span>setq</span> claude-code-ide-window-side <span>&#39;right</span>
      claude-code-ide-window-width <span>100</span>)

<span><span>;</span>; Don&#39;t automatically focus the Claude window</span>
(<span>setq</span> claude-code-ide-focus-on-open <span>nil</span>)

<span><span>;</span>; Keep focus on ediff control window when opening diffs</span>
(<span>setq</span> claude-code-ide-focus-claude-after-ediff <span>nil</span>)

<span><span>;</span>; Hide Claude window during ediff for more screen space</span>
(<span>setq</span> claude-code-ide-show-claude-window-in-ediff <span>nil</span>)</pre></div>
<p dir="auto">Or, if you’d prefer to use a regular window:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Use regular window instead of side window
(setq claude-code-ide-use-side-window nil)"><pre><span><span>;</span>; Use regular window instead of side window</span>
(<span>setq</span> claude-code-ide-use-side-window <span>nil</span>)</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Terminal Backend Configuration</h3><a id="user-content-terminal-backend-configuration" aria-label="Permalink: Terminal Backend Configuration" href="#terminal-backend-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Claude Code IDE supports both <code>vterm</code> and <code>eat</code> as terminal backends. By default, it uses <code>vterm</code>, but you can switch to <code>eat</code> if preferred:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Use eat instead of vterm
(setq claude-code-ide-terminal-backend &#39;eat)

;; Or switch back to vterm (default)
(setq claude-code-ide-terminal-backend &#39;vterm)"><pre><span><span>;</span>; Use eat instead of vterm</span>
(<span>setq</span> claude-code-ide-terminal-backend <span>&#39;eat</span>)

<span><span>;</span>; Or switch back to vterm (default)</span>
(<span>setq</span> claude-code-ide-terminal-backend <span>&#39;vterm</span>)</pre></div>
<p dir="auto">The <code>eat</code> backend is a pure Elisp terminal emulator that may work better in some environments where <code>vterm</code> compilation is problematic. Both backends provide full terminal functionality including color support and special key handling.</p>

<p dir="auto">Claude Code IDE adds custom keybindings to the terminal for easier interaction:</p>
<markdown-accessiblity-table><table>
  <tbody><tr><th>Keybinding</th><th>Command</th><th>Description</th></tr>
  <tr><td><code>M-RET</code></td><td><code>claude-code-ide-insert-newline</code></td><td>Insert a newline in the prompt</td></tr>
  <tr><td><code>C-&lt;escape&gt;</code></td><td><code>claude-code-ide-send-escape</code></td><td>Send escape key to cancel operations</td></tr>
</tbody></table></markdown-accessiblity-table>
<p dir="auto">These keybindings are automatically set up for both <code>vterm</code> and <code>eat</code> backends and only apply within Claude Code terminal buffers.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Terminal Reflow Glitch Prevention (Temporary)</h4><a id="user-content-terminal-reflow-glitch-prevention-temporary" aria-label="Permalink: Terminal Reflow Glitch Prevention (Temporary)" href="#terminal-reflow-glitch-prevention-temporary"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Claude Code IDE includes a temporary workaround for a known Claude Code bug (<a href="https://github.com/anthropics/claude-code/issues/1422" data-hovercard-type="issue" data-hovercard-url="/anthropics/claude-code/issues/1422/hovercard">#1422</a>) where terminal reflows during window resizes can cause uncontrollable scrolling. This workaround is enabled by default but can be disabled if needed:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Disable the terminal reflow glitch prevention (not recommended until bug is fixed)
(setq claude-code-ide-prevent-reflow-glitch nil)"><pre><span><span>;</span>; Disable the terminal reflow glitch prevention (not recommended until bug is fixed)</span>
(<span>setq</span> claude-code-ide-prevent-reflow-glitch <span>nil</span>)</pre></div>
<p dir="auto">The workaround will be removed once the upstream bug is fixed.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Diagnostics Configuration</h3><a id="user-content-diagnostics-configuration" aria-label="Permalink: Diagnostics Configuration" href="#diagnostics-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Claude Code IDE supports both Flycheck and Flymake for code diagnostics. By default, it will automatically detect which one is active:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Let Claude Code automatically detect the active diagnostics backend
(setq claude-code-ide-diagnostics-backend &#39;auto) ; default

;; Or force a specific backend
(setq claude-code-ide-diagnostics-backend &#39;flycheck)
(setq claude-code-ide-diagnostics-backend &#39;flymake)"><pre><span><span>;</span>; Let Claude Code automatically detect the active diagnostics backend</span>
(<span>setq</span> claude-code-ide-diagnostics-backend <span>&#39;auto</span>) <span><span>;</span> default</span>

<span><span>;</span>; Or force a specific backend</span>
(<span>setq</span> claude-code-ide-diagnostics-backend <span>&#39;flycheck</span>)
(<span>setq</span> claude-code-ide-diagnostics-backend <span>&#39;flymake</span>)</pre></div>

<p dir="auto">You can customize how Claude Code buffers are named:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(setq claude-code-ide-buffer-name-function
      (lambda (directory)
        (if directory
            (format &#34;*Claude:%s*&#34; (file-name-nondirectory (directory-file-name directory)))
          &#34;*Claude:Global*&#34;)))"><pre>(<span>setq</span> claude-code-ide-buffer-name-function
      (<span>lambda</span> (<span>directory</span>)
        (<span>if</span> directory
            (<span>format</span> <span>&#34;</span><span>*Claude:<span>%s</span>*</span><span>&#34;</span> (<span>file-name-nondirectory</span> (<span>directory-file-name</span> directory)))
          <span><span>&#34;</span>*Claude:Global*<span>&#34;</span></span>)))</pre></div>

<p dir="auto">You can pass additional flags to the Claude Code CLI:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Use a specific model
(setq claude-code-ide-cli-extra-flags &#34;--model opus&#34;)

;; Pass multiple flags
(setq claude-code-ide-cli-extra-flags &#34;--model opus --no-cache&#34;)

;; Flags are added to all Claude Code sessions"><pre><span><span>;</span>; Use a specific model</span>
(<span>setq</span> claude-code-ide-cli-extra-flags <span><span>&#34;</span>--model opus<span>&#34;</span></span>)

<span><span>;</span>; Pass multiple flags</span>
(<span>setq</span> claude-code-ide-cli-extra-flags <span><span>&#34;</span>--model opus --no-cache<span>&#34;</span></span>)

<span><span>;</span>; Flags are added to all Claude Code sessions</span></pre></div>
<p dir="auto">Note: These flags are appended to the Claude command after any built-in flags like <code>-d</code> (debug) or <code>-r</code> (resume).</p>

<p dir="auto">You can append a custom system prompt to Claude’s default prompt, allowing you to customize Claude’s behavior for specific projects or contexts:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Set a custom system prompt
(setq claude-code-ide-system-prompt &#34;You are an expert in Elisp and Emacs development.&#34;)

;; Or configure it per-project using dir-locals.el
;; In .dir-locals.el:
((nil . ((claude-code-ide-system-prompt . &#34;Focus on functional programming patterns and avoid mutations.&#34;))))

;; Set via the transient menu: M-x claude-code-ide-menu → Configuration → Set system prompt"><pre><span><span>;</span>; Set a custom system prompt</span>
(<span>setq</span> claude-code-ide-system-prompt <span><span>&#34;</span>You are an expert in Elisp and Emacs development.<span>&#34;</span></span>)

<span><span>;</span>; Or configure it per-project using dir-locals.el</span>
<span><span>;</span>; In .dir-locals.el:</span>
((<span>nil</span> <span>.</span> ((claude-code-ide-system-prompt <span>.</span> <span><span>&#34;</span>Focus on functional programming patterns and avoid mutations.<span>&#34;</span></span>))))

<span><span>;</span>; Set via the transient menu: M-x claude-code-ide-menu → Configuration → Set system prompt</span></pre></div>
<p dir="auto">When set, this adds the <code>--append-system-prompt</code> flag to the Claude command. Set to <code>nil</code> to disable (default).</p>


<p dir="auto">To enable debug mode for Claude Code CLI (passes the <code>-d</code> flag):</p>
<div dir="auto" data-snippet-clipboard-copy-content="(setq claude-code-ide-cli-debug t)"><pre>(<span>setq</span> claude-code-ide-cli-debug <span>t</span>)</pre></div>

<p dir="auto">To enable debug logging within Emacs (logs WebSocket messages and JSON-RPC communication):</p>
<div dir="auto" data-snippet-clipboard-copy-content="(setq claude-code-ide-debug t)"><pre>(<span>setq</span> claude-code-ide-debug <span>t</span>)</pre></div>
<p dir="auto">Then view debug logs with:</p>
<ul dir="auto">
  <li><code>M-x claude-code-ide-show-debug</code> - Show the debug buffer</li>
  <li><code>M-x claude-code-ide-clear-debug</code> - Clear the debug buffer</li>
</ul>
<p dir="auto">The debug buffer shows:</p>
<ul dir="auto">
  <li>WebSocket connection events</li>
  <li>All JSON-RPC messages (requests/responses)</li>
  <li>Error messages and diagnostics</li>
  <li>General debug information with session context</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Multiple Claude Code Instances on One Project</h2><a id="user-content-multiple-claude-code-instances-on-one-project" aria-label="Permalink: Multiple Claude Code Instances on One Project" href="#multiple-claude-code-instances-on-one-project"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Using git worktrees is the recommended way for running multiple Claude Code instances on different branches of the same project. This allows you to develop features or fix bugs in parallel:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create a new worktree for a feature branch
git worktree add ../myproject-worktree feature-branch"><pre><span><span>#</span> Create a new worktree for a feature branch</span>
git worktree add ../myproject-worktree feature-branch</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content=";; Start Claude Code in the main project
find-file /path/to/myproject
M-x claude-code-ide

;; Start another Claude Code instance in the worktree
find-file /path/to/myproject-worktree
M-x claude-code-ide"><pre><span><span>;</span>; Start Claude Code in the main project</span>
<span>find-file</span> /path/to/myproject
M-x claude-code-ide

<span><span>;</span>; Start another Claude Code instance in the worktree</span>
<span>find-file</span> /path/to/myproject-worktree
M-x claude-code-ide</pre></div>
<p dir="auto">Each worktree is treated as a separate project by <code>project.el</code>, allowing you to have independent Claude Code sessions with their own buffers (e.g., <code>*claude-code[myproject]*</code> and <code>*claude-code[myproject-worktree]*</code>).</p>

<p dir="auto">Claude Code IDE includes built-in MCP tools that expose Emacs functionality to Claude, enabling powerful code navigation and analysis capabilities:</p>

<ul dir="auto">
  <li><code>xref-find-references</code> - Find all references to a symbol throughout the project</li>
  <li><code>xref-find-apropos</code> - Find symbols matching a pattern across the entire project</li>
  <li><code>treesit-info</code> - Get tree-sitter syntax tree information for deep code structure analysis</li>
  <li><code>imenu-list-symbols</code> - List all symbols (functions, classes, variables) in a file using imenu</li>
  <li><code>project-info</code> - Get information about the current project (directory, files, etc.)</li>
</ul>

<p dir="auto">To enable these tools, add to your configuration:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Set up the built-in Emacs tools
(claude-code-ide-emacs-tools-setup)"><pre><span><span>;</span>; Set up the built-in Emacs tools</span>
(claude-code-ide-emacs-tools-setup)</pre></div>
<p dir="auto">Once enabled, Claude can use these tools to navigate your codebase. For example:</p>
<ul dir="auto">
  <li>“Find the definition of function foo”</li>
  <li>“Show me all places where this variable is used”</li>
  <li>“What type of AST node is under the cursor?”</li>
  <li>“Analyze the parse tree of this entire file”</li>
  <li>“List all functions and variables in this file”</li>
  <li>“How many files are in this project?”</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Creating Custom MCP Tools</h2><a id="user-content-creating-custom-mcp-tools" aria-label="Permalink: Creating Custom MCP Tools" href="#creating-custom-mcp-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can expose your own Emacs functions to Claude through the MCP tools system. This allows Claude to interact with specialized Emacs features, custom commands, or domain-specific functionality.</p>

<p dir="auto">Each tool definition in <code>claude-code-ide-mcp-server-tools</code> follows this format:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;(function-name
  :description &#34;Human-readable description for Claude&#34;
  :parameters ((:name &#34;param1&#34;
                :type &#34;string&#34;
                :required t
                :description &#34;What this parameter does&#34;)
               (:name &#34;param2&#34;
                :type &#34;number&#34;
                :required nil
                :description &#34;Optional parameter&#34;)))"><pre>&#39;(function-name
  <span>:description</span> <span><span>&#34;</span>Human-readable description for Claude<span>&#34;</span></span>
  <span>:parameters</span> ((<span>:name</span> <span><span>&#34;</span>param1<span>&#34;</span></span>
                <span>:type</span> <span><span>&#34;</span>string<span>&#34;</span></span>
                <span>:required</span> <span>t</span>
                <span>:description</span> <span><span>&#34;</span>What this parameter does<span>&#34;</span></span>)
               (<span>:name</span> <span><span>&#34;</span>param2<span>&#34;</span></span>
                <span>:type</span> <span><span>&#34;</span>number<span>&#34;</span></span>
                <span>:required</span> <span>nil</span>
                <span>:description</span> <span><span>&#34;</span>Optional parameter<span>&#34;</span></span>)))</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Context-Aware Tool Example</h3><a id="user-content-context-aware-tool-example" aria-label="Permalink: Context-Aware Tool Example" href="#context-aware-tool-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="(defun my-project-grep (pattern)
  &#34;Search for PATTERN in the current session&#39;s project.&#34;
  (claude-code-ide-mcp-server-with-session-context nil
    ;; This executes with the session&#39;s project directory as default-directory
    (let* ((project-dir default-directory)
           (results (shell-command-to-string
                    (format &#34;rg -n &#39;%s&#39; %s&#34; pattern project-dir))))
      results)))

(add-to-list &#39;claude-code-ide-mcp-server-tools
             &#39;(my-project-grep
               :description &#34;Search for pattern in project files&#34;
               :parameters ((:name &#34;pattern&#34;
                            :type &#34;string&#34;
                            :required t
                            :description &#34;Pattern to search for&#34;))))"><pre>(<span>defun</span> <span>my-project-grep</span> (<span>pattern</span>)
  <span><span>&#34;</span>Search for PATTERN in the current session&#39;s project.<span>&#34;</span></span>
  (claude-code-ide-mcp-server-with-session-context <span>nil</span>
    <span><span>;</span>; This executes with the session&#39;s project directory as default-directory</span>
    (<span>let*</span> ((project-dir default-directory)
           (results (<span>shell-command-to-string</span>
                    (<span>format</span> <span>&#34;</span><span>rg -n &#39;<span>%s</span>&#39; <span>%s</span></span><span>&#34;</span> pattern project-dir))))
      results)))

(<span>add-to-list</span> <span>&#39;claude-code-ide-mcp-server-tools</span>
             &#39;(my-project-grep
               <span>:description</span> <span><span>&#34;</span>Search for pattern in project files<span>&#34;</span></span>
               <span>:parameters</span> ((<span>:name</span> <span><span>&#34;</span>pattern<span>&#34;</span></span>
                            <span>:type</span> <span><span>&#34;</span>string<span>&#34;</span></span>
                            <span>:required</span> <span>t</span>
                            <span>:description</span> <span><span>&#34;</span>Pattern to search for<span>&#34;</span></span>))))</pre></div>

<p dir="auto">This project is licensed under the GNU General Public License v3.0 or later. See the LICENSE file for details.</p>

<ul dir="auto">
  <li><a href="https://docs.anthropic.com/en/docs/claude-code" rel="nofollow">Claude Code CLI</a></li>
  <li><a href="https://github.com/anthropics/claude-code">Claude Code VS Code Extension</a></li>
  <li><a href="https://github.com/coder/claudecode.nvim">claudecode.nvim</a> - Neovim integration</li>
</ul>
</article></div></div>
  </body>
</html>
