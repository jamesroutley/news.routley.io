<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/noisysockets/nsh">Original</a>
    <h1>Show HN: A WireGuard Powered Remote Shell</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">The <a href="https://github.com/noisysockets/noisysockets">Noisy Sockets</a> CLI.</p>
<p dir="auto">The Noisy Sockets CLI can be used to configure and manage userspace WireGuard connections. Over time it will grow to include a collection of WireGuard powered apps.</p>
<p dir="auto">The first of these apps is the <a href="https://github.com/noisysockets/shell">Noisy Sockets Shell</a> which is a secure, remote shell that uses WireGuard for authentication and encryption. The shell is accessible via a terminal or a web browser.</p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/noisysockets/nsh/raw/main/docs/terminal_screenshot.png"><img src="https://github.com/noisysockets/nsh/raw/main/docs/terminal_screenshot.png" width="450" alt="Terminal Screenshot"/></a></p>
<p dir="auto"><em>Showing a terminal session using the in-browser client.</em></p>


<p dir="auto">The <code>config init</code> command will generate a new private key and populate the
configuration file with the provided options.</p>
<div dir="auto" data-snippet-clipboard-copy-content="nsh config init -c server.yaml -n server --listen-port=51820 --ip=172.21.248.1
nsh config init -c client.yaml -n client --listen-port=51821 --ip=172.21.248.2"><pre>nsh config init -c server.yaml -n server --listen-port=51820 --ip=172.21.248.1
nsh config init -c client.yaml -n client --listen-port=51821 --ip=172.21.248.2</pre></div>

<p dir="auto">The server and client will need to be aware of each other in order to establish
a connection. The <code>peer add</code> command will add a peer to the configuration file.</p>
<p dir="auto"><em>Note: The client will need to know the servers endpoint in order to establish a connection.</em></p>
<div dir="auto" data-snippet-clipboard-copy-content="nsh peer add -c server.yaml \
  --name=client \
  --public-key=$(nsh config show -c client.yaml &#39;public(.privateKey)&#39;) \
  --ip=$(nsh config show -c client.yaml &#39;.ips[0]&#39;)

nsh peer add -c client.yaml \
  --name=server \
  --public-key=$(nsh config show -c server.yaml &#39;public(.privateKey)&#39;) \
  --endpoint=$(nsh config show -c server.yaml &#39;&#34;localhost:&#34; + (.listenPort|tostring)&#39;) \
  --ip=$(nsh config show -c server.yaml &#39;.ips[0]&#39;)"><pre>nsh peer add -c server.yaml \
  --name=client \
  --public-key=<span><span>$(</span>nsh config show -c client.yaml <span><span>&#39;</span>public(.privateKey)<span>&#39;</span></span><span>)</span></span> \
  --ip=<span><span>$(</span>nsh config show -c client.yaml <span><span>&#39;</span>.ips[0]<span>&#39;</span></span><span>)</span></span>

nsh peer add -c client.yaml \
  --name=server \
  --public-key=<span><span>$(</span>nsh config show -c server.yaml <span><span>&#39;</span>public(.privateKey)<span>&#39;</span></span><span>)</span></span> \
  --endpoint=<span><span>$(</span>nsh config show -c server.yaml <span><span>&#39;</span>&#34;localhost:&#34; + (.listenPort|tostring)<span>&#39;</span></span><span>)</span></span> \
  --ip=<span><span>$(</span>nsh config show -c server.yaml <span><span>&#39;</span>.ips[0]<span>&#39;</span></span><span>)</span></span></pre></div>

<p dir="auto">In another tab, start the server.</p>
<div dir="auto" data-snippet-clipboard-copy-content="nsh shell serve -c server.yaml"><pre>nsh shell serve -c server.yaml</pre></div>


<p dir="auto">You can connect to the shell server by its hostname, or the IP address. In the
following example, we will connect to the server using the hostname.</p>
<div dir="auto" data-snippet-clipboard-copy-content="nsh shell connect -c client.yaml server"><pre>nsh shell connect -c client.yaml server</pre></div>

<p dir="auto">When using the wg kernel module, you will need t connect to the shell server
using the IP address (as we haven&#39;t yet implemented an integrated DNS resolver).</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo nsh config export -c client.yaml -o /etc/wireguard/nsh0.conf
sudo wg-quick up nsh0

xdg-open http://172.21.248.1"><pre>sudo nsh config <span>export</span> -c client.yaml -o /etc/wireguard/nsh0.conf
sudo wg-quick up nsh0

xdg-open http://172.21.248.1</pre></div>

<p dir="auto">The Noisy Sockets CLI is dual licensed under the <a href="https://github.com/noisysockets/nsh/blob/main/LICENSE-NSSL-1.0.txt">Noisy Sockets Source License 1.0 (NSSL-1.0)</a>
and the <a href="https://github.com/noisysockets/nsh/blob/main/LICENSE-AGPL-3.0.txt">Affero General Public License v3 (AGPL-3.0)</a>.</p>
<p dir="auto">The NSSL-1.0 is a source-available license derived from the <a href="https://fsl.software" rel="nofollow">FSL-1.1</a> with the following changes:</p>
<ul dir="auto">
<li>Code will become FOSS after 4 years rather than 2 years.</li>
<li>The future license is MPL-2.0 (a weak copyleft) rather than Apache-2.0.</li>
</ul>
<p dir="auto">You are welcome to use the Noisy Sockets CLI under the terms of either license.</p>

<p dir="auto">Noisy Sockets is based on code originally from the <a href="https://git.zx2c4.com/wireguard-go" rel="nofollow">wireguard-go</a> project by Jason A. Donenfeld.</p>
<p dir="auto">WireGuard is a registered trademark of Jason A. Donenfeld.</p>
</article></div></div>
  </body>
</html>
