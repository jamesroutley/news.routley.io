<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bugzilla.kernel.org/show_bug.cgi?id=206469">Original</a>
    <h1>Linux Intel WiFi driver broken with 5&amp;6GHz bands for longer than three years</h1>
    
    <div id="readability-page-1" class="page"><div id="comments">


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table>
<tbody><tr>
<td>
<div id="c0">

      


        


<pre id="comment_text_0">looks like lar_disable functionality was removed as of 5.5 kernel as a way to fix the firmware crash issue with iwlwifi, is that right? if i boot with 4.19 or 5.3 im able to use lar_diable but booting on 5.5 no longer even lists it as a iwlwifi module option.

without lar_disable all my 5ghz channels get disabled because the regulatory domain gets detected as shown by `iw reg get` as both &#34;country US: DFS-FCC&#34; which is correct (im in the US) and &#34;country ID: DFS-UNSET&#34; (Indonesia)which then disables all 5ghz channels except for 149-163 and only at 20mhz. the connection speed is less than 1/10th of what it should be. instead of the 360mbps i usually get, im barely able to get 9mbps when using those 5ghz channels. (actual fast.com speed test numbers, not link speed)

i&#39;ve tried replacing the wifi adapter but this happens on intel wireless-ac 3165, 8265, and 9260 dual band 160Mhz (currently installed adapter). i should add that this happens on both windows and linux but at least on linux i had a way of disabling LAR so my regulatory domain gets detected properly and all the wifi channels/widths works as they should.

on all 5.3 and earlier kernels, using lar_disable=1 all my channels work and i get a full 1733mbps link speed (5ghz ch.36 at 160mhz)as shown here

relevant outputs from 5.3 kernel:

[code]
~ &gt;&gt;&gt; uname -r                                                                                                                                                                                                     
5.3.13-zen1-1-zen
~ &gt;&gt;&gt; iw reg get                                                                                                                                                                                                   
global
country US: DFS-FCC
	(2402 - 2472 @ 40), (N/A, 30), (N/A)
	(5170 - 5250 @ 80), (N/A, 23), (N/A), AUTO-BW
	(5250 - 5330 @ 80), (N/A, 23), (0 ms), DFS, AUTO-BW
	(5490 - 5730 @ 160), (N/A, 23), (0 ms), DFS
	(5735 - 5835 @ 80), (N/A, 30), (N/A)
	(57240 - 63720 @ 2160), (N/A, 40), (N/A)

~ &gt;&gt;&gt; iw phy0 channels                                                                                                                                                                                             
Band 1:
	* 2412 MHz [1] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2417 MHz [2] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2422 MHz [3] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2427 MHz [4] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2432 MHz [5] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2437 MHz [6] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2442 MHz [7] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2447 MHz [8] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2452 MHz [9] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2457 MHz [10] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2462 MHz [11] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2467 MHz [12] (disabled)
	* 2472 MHz [13] (disabled)
Band 2:
	* 5180 MHz [36] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Channel widths: 20MHz HT40+ VHT80 VHT160
	* 5200 MHz [40] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	* 5220 MHz [44] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	* 5240 MHz [48] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	* 5260 MHz [52] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5280 MHz [56] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5300 MHz [60] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5320 MHz [64] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5500 MHz [100] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5520 MHz [104] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5540 MHz [108] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5560 MHz [112] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5580 MHz [116] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5600 MHz [120] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5620 MHz [124] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5640 MHz [128] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80 VHT160
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5660 MHz [132] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5680 MHz [136] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5700 MHz [140] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- HT40+ VHT80
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5720 MHz [144] 
	  Maximum TX power: 22.0 dBm
	  No IR
	  Radar detection
	  Channel widths: 20MHz HT40- VHT80
	  DFS state: usable (for 155 sec)
	  DFS CAC time: 60000 ms
	* 5745 MHz [149] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+ VHT80
	* 5765 MHz [153] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+ VHT80
	* 5785 MHz [157] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+ VHT80
	* 5805 MHz [161] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- VHT80
	* 5825 MHz [165] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz
~ &gt;&gt;&gt;                
~ &gt;&gt;&gt; iw wlan0 info                                                                                                                                                                                                
Interface wlan0
	ifindex 3
	wdev 0x1
	addr 24:ee:9a:88:66:84
	ssid wrt5-160
	type managed
	wiphy 0
	channel 36 (5180 MHz), width: 160 MHz, center1: 5250 MHz
	txpower 22.00 dBm
	multicast TXQ:
		qsz-byt	qsz-pkt	flows	drops	marks	overlmt	hashcol	tx-bytes	tx-packets
		0	0	0	0	0	0	0	0		0
~ &gt;&gt;&gt;              
[/code]

and the same outputs from 5.5 kernel (lar_disable not an option)
[code]
~ &gt;&gt;&gt; uname -r                                                                                                                                                                                                     
5.5.1-arch1-1
~ &gt;&gt;&gt; iw reg get                                                                                                                                                                                                   
global
country US: DFS-FCC
	(2402 - 2472 @ 40), (N/A, 30), (N/A)
	(5170 - 5250 @ 80), (N/A, 23), (N/A), AUTO-BW
	(5250 - 5330 @ 80), (N/A, 23), (0 ms), DFS, AUTO-BW
	(5490 - 5730 @ 160), (N/A, 23), (0 ms), DFS
	(5735 - 5835 @ 80), (N/A, 30), (N/A)
	(57240 - 63720 @ 2160), (N/A, 40), (N/A)

phy#0 (self-managed)
country ID: DFS-UNSET
	(2402 - 2437 @ 40), (6, 22), (N/A), AUTO-BW, NO-HT40MINUS, NO-80MHZ, NO-160MHZ
	(2422 - 2462 @ 40), (6, 22), (N/A), AUTO-BW, NO-80MHZ, NO-160MHZ
	(2447 - 2482 @ 40), (6, 22), (N/A), AUTO-BW, NO-HT40PLUS, NO-80MHZ, NO-160MHZ
	(5735 - 5815 @ 20), (6, 22), (N/A), AUTO-BW, NO-HT40MINUS, NO-HT40PLUS, NO-80MHZ, NO-160MHZ

~ &gt;&gt;&gt; iw phy0 channels                                                                                                                                                                                             
Band 1:
	* 2412 MHz [1] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2417 MHz [2] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2422 MHz [3] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2427 MHz [4] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40+
	* 2432 MHz [5] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2437 MHz [6] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2442 MHz [7] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2447 MHz [8] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2452 MHz [9] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40- HT40+
	* 2457 MHz [10] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2462 MHz [11] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2467 MHz [12] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2472 MHz [13] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz HT40-
	* 2484 MHz [14] (disabled)
Band 2:
	* 5180 MHz [36] (disabled)
	* 5200 MHz [40] (disabled)
	* 5220 MHz [44] (disabled)
	* 5240 MHz [48] (disabled)
	* 5260 MHz [52] (disabled)
	* 5280 MHz [56] (disabled)
	* 5300 MHz [60] (disabled)
	* 5320 MHz [64] (disabled)
	* 5340 MHz [68] (disabled)
	* 5360 MHz [72] (disabled)
	* 5380 MHz [76] (disabled)
	* 5400 MHz [80] (disabled)
	* 5420 MHz [84] (disabled)
	* 5440 MHz [88] (disabled)
	* 5460 MHz [92] (disabled)
	* 5480 MHz [96] (disabled)
	* 5500 MHz [100] (disabled)
	* 5520 MHz [104] (disabled)
	* 5540 MHz [108] (disabled)
	* 5560 MHz [112] (disabled)
	* 5580 MHz [116] (disabled)
	* 5600 MHz [120] (disabled)
	* 5620 MHz [124] (disabled)
	* 5640 MHz [128] (disabled)
	* 5660 MHz [132] (disabled)
	* 5680 MHz [136] (disabled)
	* 5700 MHz [140] (disabled)
	* 5720 MHz [144] (disabled)
	* 5745 MHz [149] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz
	* 5765 MHz [153] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz
	* 5785 MHz [157] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz
	* 5805 MHz [161] 
	  Maximum TX power: 22.0 dBm
	  Channel widths: 20MHz
	* 5825 MHz [165] (disabled)
	* 5845 MHz [169] (disabled)
	* 5865 MHz [173] (disabled)
	* 5885 MHz [177] (disabled)
	* 5905 MHz [181] (disabled)
~ &gt;&gt;&gt;  
~ &gt;&gt;&gt; iw wlan0 info                                                                                                                                                                                                
Interface wlan0
	ifindex 4
	wdev 0x100000001
	addr 24:ee:9a:88:66:84
	ssid HOME_2.4
	type managed
	wiphy 1
	channel 11 (2462 MHz), width: 40 MHz, center1: 2452 MHz
	txpower 22.00 dBm
	multicast TXQ:
		qsz-byt	qsz-pkt	flows	drops	marks	overlmt	hashcol	tx-bytes	tx-packets
		0	0	0	0	0	0	0	0		0

[/code]

when LAR fails, a way to disable it seems to be the only workaround and i say this after many hours over many months trying to figure out why. every kernel version ive tested (4.14 to 5.5) all behave the same if lar_disable=1 is not used.</pre>
    </div>

    <div id="c1">

      


        


<pre id="comment_text_1">sorry, i wasnt sure on how code boxes are used here.

other possible causes i tested while trying to figure this out and made no difference.

- replaced router.

- replaced wifi adapter.

- reset bios multiple times and flashed with 3 different bios versions.

- rolled back linux-firmware and tried every version since jan 2019 to current.

- removed current drives, and tried both a clean linux install and also a clean windows install (each separately, not dual boot and with a fresh bios flash in between)

- powered down every other wifi device except for this laptop with the reasoning that LAR works by picking up on other device&#39;s regdom (cant find documentation for LAR so im not sure).

- made sure every device including router is set to a US locale.


this issue started about 4-6 months ago on my dell inspiron 15-7559 and it&#39;s now started to happen on an msi gf63-8rd (both have intel wifi adapters). please let me know if further info is needed, thanks for your time.</pre>
    </div>

    <div id="c2">

      


        


<pre id="comment_text_2">Also issue for me, can&#39;t get the wifi card to work in AP mode on 5Ghz band, because it doesn&#39;t respect iw reg set and basically disables all channels:
$ iw reg get
global
country DE: DFS-ETSI
        (2400 - 2483 @ 40), (N/A, 20), (N/A)
        (5150 - 5250 @ 80), (N/A, 23), (N/A), NO-OUTDOOR, AUTO-BW
        (5250 - 5350 @ 80), (N/A, 20), (0 ms), NO-OUTDOOR, DFS, AUTO-BW
        (5470 - 5725 @ 160), (N/A, 26), (0 ms), DFS
        (5725 - 5875 @ 80), (N/A, 13), (N/A)
        (5945 - 6425 @ 160), (N/A, 23), (N/A), NO-OUTDOOR, AUTO-BW
        (57000 - 66000 @ 2160), (N/A, 40), (N/A)

phy#0 (self-managed)
country 00: DFS-UNSET
...

$ iw list
...
                Frequencies:
                        * 5180 MHz [36] (22.0 dBm) (no IR)
                        * 5200 MHz [40] (22.0 dBm) (no IR)
                        * 5220 MHz [44] (22.0 dBm) (no IR)
                        * 5240 MHz [48] (22.0 dBm) (no IR)
                        * 5260 MHz [52] (22.0 dBm) (no IR, radar detection)
                        * 5280 MHz [56] (22.0 dBm) (no IR, radar detection)
                        * 5300 MHz [60] (22.0 dBm) (no IR, radar detection)
                        * 5320 MHz [64] (22.0 dBm) (no IR, radar detection)
                        * 5340 MHz [68] (disabled)
                        * 5360 MHz [72] (disabled)
                        * 5380 MHz [76] (disabled)
                        * 5400 MHz [80] (disabled)
                        * 5420 MHz [84] (disabled)
                        * 5440 MHz [88] (disabled)
                        * 5460 MHz [92] (disabled)
                        * 5480 MHz [96] (disabled)
                        * 5500 MHz [100] (22.0 dBm) (no IR, radar detection)
                        * 5520 MHz [104] (22.0 dBm) (no IR, radar detection)
                        * 5540 MHz [108] (22.0 dBm) (no IR, radar detection)
                        * 5560 MHz [112] (22.0 dBm) (no IR, radar detection)
                        * 5580 MHz [116] (22.0 dBm) (no IR, radar detection)
                        * 5600 MHz [120] (22.0 dBm) (no IR, radar detection)
                        * 5620 MHz [124] (22.0 dBm) (no IR, radar detection)
                        * 5640 MHz [128] (22.0 dBm) (no IR, radar detection)
                        * 5660 MHz [132] (22.0 dBm) (no IR, radar detection)
                        * 5680 MHz [136] (22.0 dBm) (no IR, radar detection)
                        * 5700 MHz [140] (22.0 dBm) (no IR, radar detection)
                        * 5720 MHz [144] (22.0 dBm) (no IR, radar detection)
                        * 5745 MHz [149] (22.0 dBm) (no IR)
                        * 5765 MHz [153] (22.0 dBm) (no IR)
                        * 5785 MHz [157] (22.0 dBm) (no IR)
                        * 5805 MHz [161] (22.0 dBm) (no IR)
                        * 5825 MHz [165] (22.0 dBm) (no IR)
                        * 5845 MHz [169] (disabled)
                        * 5865 MHz [173] (disabled)
                        * 5885 MHz [177] (disabled)
                        * 5905 MHz [181] (disabled)</pre>
    </div>

    <div id="c3">

      


        


<pre id="comment_text_3">Exact same issue here.

On Intel ax210ngw all 5ghz channels are disabled and cannot be used to transmit</pre>
    </div>

    

    <div id="c5">

      


        


<pre id="comment_text_5">+1, similar ax210 hardware at hand.</pre>
    </div>

    <div id="c6">

      


        


<pre id="comment_text_6">On my AX200 i just get &#34;country 00: DFS-UNSET&#34; and i can&#39;t use AP mode on any channel.

How am i supposed to set up a 5GHz network in a basement when there obviously is no other APs to listen to down here for the retarded-firmware to find which country it is in??

Am i supposed to buy another sensible wifi card, host a 5GHz AP on that so the AX200 sees it and then allows me to use AP on that. What a joke.</pre>
    </div>

    <div id="c7">

      


        


<pre id="comment_text_7">I seem to have found a seemingly reliable partial workaround for when the country is 00.

I first start AP mode in 2.4GHz on ap0 which for some reason immediately sets the country to DE for me, which is still wrong but at least it is another EU country which i can work with. This allows me to use 5GHz channels 149-165:
iw list
 5745 MHz [149] (22.0 dBm)
 5765 MHz [153] (22.0 dBm)
 5785 MHz [157] (22.0 dBm)
 5805 MHz [161] (22.0 dBm)
 5825 MHz [165] (22.0 dBm)

But for the country DE to not be reset i have to keep the ap0 existing until the 5GHz ap1 is running. So i just down the ap0, start up 5GHz on ap1 ch 149 80Mhz and then i can remove the 2.4GHz ap0. This leaves me with a working 5GHz AP.

I have automated this using create_ap from <a href="https://github.com/dlenski/create_ap">https://github.com/dlenski/create_ap</a>:
echo &#34;# Starting 2.4 GHz on ap0 #&#34;
echo &#34;# Starting 2.4 GHz #&#34; &gt; /var/log/wifi2
create_ap --config /etc/create_ap2.conf --daemon --logfile /var/log/wifi2
sleep 2
cat /var/log/wifi2
echo &#34;# Downing 2.4 GHz ap0 #&#34;
ip link set down ap0
echo &#34;# Starting 5 GHz on ap1 #&#34;
echo &#34;# Starting 5 GHz #&#34; &gt; /var/log/wifi
create_ap --config /etc/create_ap5.conf --daemon --logfile /var/log/wifi
sleep 2
create_ap --stop ap0
tail -f /var/log/wifi

# cat /etc/create_ap2.conf 
# AP
SSID=test
PASSPHRASE=password
USE_PSK=0
HIDDEN=0

# Inernet sharing
WIFI_IFACE=wifi
INTERNET_IFACE=br0
SHARE_METHOD=bridge
GATEWAY=192.168.9.1
IPV6=1
ISOLATE_CLIENTS=0

# Wireless
FREQ_BAND=2.4
CHANNEL=1
COUNTRY=
WPA_VERSION=2
WPS=0
IEEE80211N=1
IEEE80211AC=1
HT_CAPAB=[HT40+][SHORT-GI-20][SHORT-GI-40]
VHT_CAPAB=[RXLDPC][TX-STBC-2BY1][RX-STBC-1]
BEACON_INTERVAL=100
DTIM_PERIOD=2

# Network
DHCP_DNS=gateway
ETC_HOSTS=0
NO_DNS=0
NO_DNSMASQ=0
MAC_FILTER=0
MAC_FILTER_ACCEPT=/etc/hostapd/hostapd.accept
NEW_MACADDR=

# Misc
DRIVER=nl80211
DAEMONIZE=0
NO_VIRT=0
NO_HAVEGED=0
DAEMON_PIDFILE=
DAEMON_LOGFILE=/var/log/wifi

# cat /etc/create_ap5.conf 
# AP
SSID=test
PASSPHRASE=password
USE_PSK=0
HIDDEN=0

# Inernet sharing
WIFI_IFACE=wifi
INTERNET_IFACE=br0
SHARE_METHOD=bridge
GATEWAY=192.168.9.1
IPV6=1
ISOLATE_CLIENTS=0

# Wireless
FREQ_BAND=5
CHANNEL=149
COUNTRY=
WPA_VERSION=2
WPS=0
IEEE80211N=1
IEEE80211AC=1
HT_CAPAB=[HT40+][SHORT-GI-20][SHORT-GI-40]
VHT_CAPAB=[VHT80][RXLDPC][SHORT-GI-80][TX-STBC-2BY1][RX-STBC-1]
# for 80MHz and up you need to add:
#  vht_oper_chwidth=1
#  vht_oper_centr_freq=seg0_idx=155 (for ch 149)
# to the create_ap script at line 1804 in section &#34;# hostapd config&#34;.
BEACON_INTERVAL=100
DTIM_PERIOD=2

# Network
DHCP_DNS=gateway
ETC_HOSTS=0
NO_DNS=0
NO_DNSMASQ=0
MAC_FILTER=0
MAC_FILTER_ACCEPT=/etc/hostapd/hostapd.accept
NEW_MACADDR=

# Misc
DRIVER=nl80211
DAEMONIZE=0
NO_VIRT=0
NO_HAVEGED=0
DAEMON_PIDFILE=
DAEMON_LOGFILE=/var/log/wifi</pre>
    </div>

    <div id="c8">

      


        


<pre id="comment_text_8">I just wonder what Intel engineers thought while masterminding their LAR implementation...

I&#39;ll tell you a secret - the rationale behind LAR is absolutely nonsensual. If you set up an AP that allows you to set any regulatory domain you want (there are many such devices), your modules will communicate with it anyway. Regardless if the frequency and power is legal at that location. LAR actually did not solve anything - it&#39;s alibism in it&#39;s purest form.

So now to push some real solution forward:

What would you recommend instead guys? Something with modems from Qualcomm, Broadcom or Realtek? Do you have good experience with any existing M.2 modules? i.e. from Sparklan?

Thanks!
My current emotional state is: very annoyed</pre>
    </div>

    <div id="c9">

      


        


<pre id="comment_text_9">I&#39;d understand LAR if it actually worked, right now it&#39;s simply very very wrong and there seems to be no official or unofficial way to correct it. This is very clearly buggy and unless fixed by Intel, the removal of the module option should be reverted. Why should people have to endure crippled hardware? 

Next up Intel screws up their implementation of software-enabled silicon and accidentally disables half of the cores and it&#39;s just kept?</pre>
    </div>

    <div id="c10">

      


        


<pre id="comment_text_10">I am facing a similar issue on an Intel 9560. 
LAR doesn&#39;t work, I have another AP right next to it, broadcasting two signals on channel 100 (5500 MHz), I even connect the Intel 9560 to them in AC mode, with the intent of forcing LAR to compute the region, but it never changes and continues to be 

...
phy#0 (self-managed)
country 00: DFS-UNSET
...

which effectively disables 5ghz channels in AP mode, making it useless.
Also, think that workaround should be there!</pre>
    </div>

    <div id="c11">

      


        


<pre id="comment_text_11">Guys, i battled an entire day to make a intel 3165 chip work in AP mode 5Ghz. Pulled almost all hair from my head. Specially because it already worked in 2.4Ghz. But i  can&#39;t use it, as it interferes with other 2.4Ghz stuff.

So, this means it won&#39;t work with ANY intel wifi chip? I was about to pull the trigger on a AX210 m.2 module...

No way to set the country manually? Is it possible to use a older version of the driver to disable LAR?

Anyone know of a good USB wifi adapter that works AP mode in 5Ghz?</pre>
    </div>

    <div id="c12">

      


        


<pre id="comment_text_12">How to edit the driver code and rebuild it?</pre>
    </div>

    <div id="c13">

      


        


<pre id="comment_text_13">Download the kernel source code, from kernel.org or your distro, do what you want and compile.</pre>
    </div>


  

</td>
<td>
    <ul>
      <li><a href="#" onclick="toggle_all_comments(&#39;collapse&#39;);
                               return false;">Collapse All Comments</a></li>
      <li><a href="#" onclick="toggle_all_comments(&#39;expand&#39;);
                               return false;">Expand All Comments</a></li>
        <li></li>
        <li><a href="#" onclick="return goto_add_comments(&#39;bug_status_bottom&#39;);">
            Add Comment</a></li>
    </ul>
</td>
</tr></tbody></table>
  </div></div>
  </body>
</html>
