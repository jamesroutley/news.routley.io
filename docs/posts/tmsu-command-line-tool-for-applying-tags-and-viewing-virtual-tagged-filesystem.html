<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tmsu.org/">Original</a>
    <h1>TMSU: Command-line tool for applying tags and viewing virtual tagged filesystem</h1>
    
    <div id="readability-page-1" class="page"><div id="main">
            <div>
                

                <p>
                TMSU is a tool for tagging your files. It provides a simple command-line tool for applying
                tags and a virtual filesystem so that you can get a tag-based view of your files from within any other program.
                </p>

                <p>
                TMSU does not alter your files in any way: they remain unchanged on disk, or on the network,
                wherever you put them. TMSU maintains its own database and you simply gain an additional
                view, which you can mount, based upon the tags you set up. The only commitment required is your time
                and there&#39;s absolutely no lock-in.
                </p> 

                

                <p>
                This tour will show you how to use the command-line tool to tag and query your files and how to mount and
                peruse the virtual file-system.
                </p>

                <h2>Tagging Files</h2>

                <p>
                Use the <span>tag</span> command to apply tags to files:
                </p>

                <pre>$ tmsu tag summer.mp3 music big-jazz mp3
tmsu: New tag &#39;music&#39;
tmsu: New tag &#39;big-jazz&#39;
tmsu: New tag &#39;mp3&#39;</pre>

                <p>
                If you have a set of files and would like to apply the same tags to each, then there is an alternative
                form of the command that lets you put the files last. For example we can tag all of the MP3 files in the
                current directory as both <span>music</span> and <span>mp3</span>:
                </p>

                <pre>$ tmsu tag --tags &#34;music mp3&#34; *.mp3</pre>

                <p>
                The &#39;New tag&#39; messages let you know that you have created new tags, which makes it easy to notice mispellings:
                </p>

                <pre>$ tmsu tag spring.mp3 music mp3 folk
$ tmsu tag winter.mp3 umsic mp3
tmsu: New tag &#39;umsic&#39;</pre>

                <p>
                But it&#39;s OK! We can fix this with the <span>merge</span> command, merging the accidentally created <span>umsic</span> tag into the
                existing <span>music</span> tag:
                </p>

                <pre>$ tmsu merge umsic music</pre>

                <p>
                In addition to simple tags, it is possible to specify values for tags when
                applying them to files. For example:
                </p>

                <pre>$ tmsu tag spring.mp3 year=2003
$ tmsu tag summer.mp3 year=2008
$ tmsu tag winter.mp3 year=2010</pre>

                <h2>Listing Tags</h2>

                <p>
                We can view the tags for our newly created tagged files with the <span>tags</span> command:
                </p>

                <pre>$ tmsu tags summer.mp3
big-jazz
mp3
music
year=2008

$ tmsu tags *.mp3
spring.mp3: folk mp3 music year=2003
summer.mp3: big-jazz mp3 music year=2008
winter.mp3: mp3 music year=2010</pre>

                <h2>Listing Files</h2>

                <p>
                Now we have a set of tagged files we can start using the tag information to do some simple queries.
                Let&#39;s list our <span>mp3</span> files with the <span>files</span> command:
                </p>

                <pre>$ tmsu files mp3
spring.mp3
summer.mp3
winter.mp3</pre>

                <p>
                Or we could get more specific and list just our <span>big-jazz</span> collection:
                </p>

                <pre>$ tmsu files mp3 big-jazz
summer.mp3</pre>

                <p>
                There is an implicit &#39;and&#39; when you list tags one after another.
                You can also specify the logical &#39;and&#39; explicitly if you so wish:
                </p>

                <pre>$ tmsu files mp3 and big-jazz
summer.mp3</pre>

                <p>
                The basic logical operators &#39;and&#39;, &#39;or&#39; and &#39;not&#39; are supported, as are parentheses.
                So it is possible to search our music collection to find exactly what we are looking for, such as our <span>mp3</span> or <span>flac</span> files excluding the <span>big-jazz</span> ones:
                </p>

                <pre>$ tmsu files &#34;(mp3 or flac) and not big-jazz&#34;
spring.mp3
winter.mp3</pre>

                <p>
                You can also retrieve files based upon the values of tags.
                We can retrieve all of our files from the year 2010, for example:
                </p>

                <pre>$ tmsu files year = 2010
winter.mp3</pre>

                <p>
                Or perhaps just music from the naughties:
                </p>

                <pre>$ tmsu files &#34;music and year &gt;= 2000 and year &lt; 2010&#34;
spring.mp3
summer.mp3</pre>

                <p>
                <span></span> Some characters may be interpretted by your shell: the query can typically
                be enclosed in quotation marks to avoid this.
                </p>

                <h2>Virtual File-System</h2>

                <p>
                Listing files from the command line is all very well but it is not very useful when we want to access
                our files from other programs, especially those with graphical interfaces. TMSU 
                also sports a virtual file-system (VFS) that we can mount:
                </p>

                <pre>$ mkdir mp
$ tmsu mount mp
$ ls mp
queries
tags
$ ls mp/tags
big-jazz mp3 music
$ ls -l mp/tags/music
drwxr-xr-x 0 paul paul 0 2012-04-13 20:00 big-jazz
drwxr-xr-x 0 paul paul 0 2012-04-13 20:00 mp3
drwxr-xr-x 0 paul paul 0 2012-04-13 20:00 spring.<span>2</span>.mp3 -&gt; /home/paul/spring.mp3
drwxr-xr-x 0 paul paul 0 2012-04-13 20:00 summer.<span>1</span>.mp3 -&gt; /home/paul/summer.mp3
drwxr-xr-x 0 paul paul 0 2012-04-13 20:00 winter.<span>3</span>.mp3 -&gt; /home/paul/winter.mp3
                                                 <span>â†‘</span>
                                             <span>file id</span></pre>

                <p>
                Files in the virtual file-system are actually just symbolic links back to the tagged file&#39;s
                real location elsewhere on the file-system. This means they can be used just like regular
                files from any application:
                </p>

                <pre>$ acmeplayer mp/tags/music/summer.1.mp3
[####&gt;-------] 34%</pre>

                <p>
                The entries contain an ID number which ensures the filename is unique within the tag directory,
                even when multiple files with the same name are tagged with the same tag.
                </p>

                <h3>Queries</h3>

                <p>
                In addition to the tags view, there is also a queries directory in which you can run view queries
                just like those we ran earlier with the <span>files</span> command.
                </p> 

                <p>To get a query based view you need merely create a directory (under &#39;queries&#39;) containing the query
                text:
                </p>

                <pre>$ ls mp/queries
README.md
$ mkdir &#34;mp/queries/mp3 and not folk&#34;
$ ls &#34;mp/queries/mp3 and not folk&#34;
summer.1.mp3
winter.3.mp3</pre>

                <p>
                In fact, it&#39;s even easier than that, as TMSU will automatically create the directory for you:
                </p>

                <pre>$ ls mp/queries
mp3 and not folk
$ ls &#34;mp/queries/mp3 and big-jazz&#34;
summer.1.mp3
$ ls mp/queries
mp3 and not folk  mp3 and big-jazz</pre>

                <p>
                This automatic creation of the query directories makes it possible to use new file queries within the
                file chooser of a graphical program simply by typing the query in.
                </p>

                <p>
                Unwanted query directories can be removed with &#39;rmdir&#39;.
                </p>

                <h3>Tag Management</h3>

                <p>
                TMSU also allows you to limited tag management operations via the virtual filesystem. For example,
                you can create a new tag by creating a new directory:
                </p>

                <pre>$ mkdir mp/tags/lounge</pre>

                <p>
                Remove specific tags from a file by deleting the symbolic link in the tag directory:
                </p>

                <pre>$ rm mp/tags/mp3/summer.1.mp3</pre>

                <p>
                Delete an unused tag by removing the empty tag directory:
                </p>

                <pre>$ rmdir mp/tags/house</pre>

                <p>
                Or delete a <i>used</i> tag by performing a recursive delete:
                </p>

                <pre>$ rm -r mp/tags/big-jazz</pre>

                <h2>Where Next?</h2>

                <p>
                The best place for more information is on the <a href="https://github.com/oniony/TMSU/wiki/">TMSU wiki</a>.
                </p>

                <p>
                TMSU also has integrated help:
                </p>

                <pre>$ tmsu help
$ tmsu help tag</pre>
            </div>
        </div></div>
  </body>
</html>
