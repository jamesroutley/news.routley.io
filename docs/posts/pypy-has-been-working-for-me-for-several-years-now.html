<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/python/PyPyQuietlyWorking">Original</a>
    <h1>PyPy has been working for me for several years now</h1>
    
    <div id="readability-page-1" class="page"><div><h2>PyPy has been quietly working for me for several years now</h2>

	<p><small>May 29, 2024</small></p>
</div><div><p>A number of years ago I switched to installing various Python
programs through <a href="https://pipx.pypa.io/stable/">pipx</a> so that each
of them got their own automatically managed virtual environment,
rather than me having to wrestle with various issues from <a href="https://utcc.utoronto.ca/~cks/space/blog/python/PipUpgradingPrograms">alternate
approaches</a>. On <a href="https://support.cs.toronto.edu/">our Ubuntu servers</a>, it wound up being simpler to do
this using <a href="https://utcc.utoronto.ca/~cks/space/blog/python/PyPyEasyHandInstall">my own version of PyPy</a> instead
of Ubuntu&#39;s CPython, for <a href="https://utcc.utoronto.ca/~cks/space/blog/python/PyPyAndPipx">various reasons</a>. I&#39;ve been
operating this way for long enough that I didn&#39;t really remember how
long.</p>

<p>Recently we got <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/FirstCloudVMAndAutomation">our first cloud server</a>, and I wound up installing
our cloud provider&#39;s basic CLI tool. This CLI tool has a number of
official ways of installing it, but when the dust settles I discovered
it was a Python package (with a bunch of additional complicated
dependencies) and this package is available on <a href="https://pypi.org/">PyPi</a>.
So I decided to see if &#39;pipx install &lt;x&gt;&#39; would work, which it did.
Only much later did it occur to me that this very large Python and
stuff tool was running happily under PyPy, because this is the
default if I just &#39;pipx install&#39; something.</p>

<p>As it turns out, everything I have installed through pipx on our
servers is currently installed using PyPy instead of CPython, and
all of it works fine. I&#39;ve been running all sorts of code with PyPy
for years without noticing anything different. There is definitely
code that will notice (<a href="https://utcc.utoronto.ca/~cks/space/blog/python/PyPyView">I used to have some</a>), but either
I haven&#39;t encountered any of it yet or significant packages are now
routinely tested under PyPy and hardened against things like deferred
garbage collection of open files.</p>

<p>(Some current Python idioms, such as <a href="https://docs.python.org/3/reference/compound_stmts.html#with">the &#39;<code>with</code>&#39; statement</a>,
avoid this sort of problem, because they explicitly close files and
otherwise release resources as you&#39;re done with them.)</p>

<p>In a way there&#39;s nothing remarkable about this. PyPy&#39;s goal is to
be a replacement for CPython that simply works while generally being
faster. In another way, it&#39;s nice to see that PyPy has been basically
completely successful in this for me, to the extent that I can forget
that my pipx-installed things are all running under PyPy and that a
big cloud vendor thing just worked.</p>
</div></div>
  </body>
</html>
