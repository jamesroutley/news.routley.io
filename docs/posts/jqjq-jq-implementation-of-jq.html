<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/wader/jqjq">Original</a>
    <h1>Jqjq: Jq Implementation of Jq</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">jq implementation of <a href="https://github.com/stedolan/jq">jq</a></p>
<blockquote>
<p dir="auto"><span><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"></path></svg>Warning</span> this project is mostly for learning, experimenting and fun.</p>
</blockquote>
<p dir="auto">Why? It started when I was researching how to write decoders directly in jq for <a href="https://github.com/wader/fq">fq</a> which ended up involving some syntax tree rewriting and walking and then it grow from there.</p>
<p dir="auto">But it&#39;s also a great way to promote and show that jq is a very expressive, capable and nice language! :)</p>
<h3 dir="auto"><a id="user-content-use-via-jqjq-wrapper" aria-hidden="true" href="#use-via-jqjq-wrapper"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use via <code>jqjq</code> wrapper</h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ ./jqjq -n &#39;def f: 1,8; [f,f] | map(.+105) | implode&#39;
&#34;jqjq&#34;

$ ./jqjq &#39;.+. | map(.+105) | implode&#39; &lt;&lt;&lt; &#39;[1,8]&#39;
&#34;jqjq&#34;

# jqjq using jqjq to run above example
# eval concatenation of jqjq.jq as a string and example
$ ./jqjq &#34;eval($(jq -Rs . jqjq.jq)+.)&#34; &lt;&lt;&lt; &#39;&#34;eval(\&#34;def f: 1,8; [f,f] | map(.+105) | implode\&#34;)&#34;&#39;
&#34;jqjq&#34;

$ ./jqjq --repl
&gt; 1,2,3 | .*2
2
4
6
&gt; &#34;jqjq&#34; | explode | map(.-32) | implode
&#34;JQJQ&#34;
&gt; &#34;jqjq&#34; | [eval(&#34;explode[] | .-32&#34;)] | implode
&#34;JQJQ&#34;
&gt; ^D

# 01mf02 adaptation of itchyny&#39;s bf.jq running fib.bf
$ ./jqjq -n &#34;\&#34;$(cat fib.bf)\&#34; | $(cat bf.jq)&#34;
&#34;1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233&#34;

$ ./jqjq -h
jqjq - jq implementation of jq
Usage: jqjq [OPTIONS] [--] [EXPR]
  --jq PATH        jq implementation to run with
  --lex            Lex EXPR
  --no-builtins    No builtins
  --null-input,-n  Null input
  --parse          Lex and parse EXPR
  --repl           REPL
  --run-tests      Run jq tests from stdin"><pre>$ ./jqjq -n <span><span>&#39;</span>def f: 1,8; [f,f] | map(.+105) | implode<span>&#39;</span></span>
<span><span>&#34;</span>jqjq<span>&#34;</span></span>

$ ./jqjq <span><span>&#39;</span>.+. | map(.+105) | implode<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>[1,8]<span>&#39;</span></span>
<span><span>&#34;</span>jqjq<span>&#34;</span></span>

<span><span>#</span> jqjq using jqjq to run above example</span>
<span><span>#</span> eval concatenation of jqjq.jq as a string and example</span>
$ ./jqjq <span><span>&#34;</span>eval(<span><span>$(</span>jq -Rs <span>.</span> jqjq.jq<span>)</span></span>+.)<span>&#34;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>&#34;eval(\&#34;def f: 1,8; [f,f] | map(.+105) | implode\&#34;)&#34;<span>&#39;</span></span>
<span><span>&#34;</span>jqjq<span>&#34;</span></span>

$ ./jqjq --repl
<span>&gt;</span> 1,2,3 <span>|</span> .<span>*</span>2
2
4
6
<span>&gt;</span> <span><span>&#34;</span>jqjq<span>&#34;</span></span> <span>|</span> explode <span>|</span> map(.-32) <span>|</span> implode
<span><span>&#34;</span>JQJQ<span>&#34;</span></span>
<span>&gt;</span> <span><span>&#34;</span>jqjq<span>&#34;</span></span> <span>|</span> [eval(<span><span>&#34;</span>explode[] | .-32<span>&#34;</span></span>)] <span>|</span> implode
<span><span>&#34;</span>JQJQ<span>&#34;</span></span>
<span>&gt;</span> ^D

<span><span>#</span> 01mf02 adaptation of itchyny&#39;s bf.jq running fib.bf</span>
$ ./jqjq -n <span><span>&#34;</span><span>\&#34;</span><span><span>$(</span>cat fib.bf<span>)</span></span><span>\&#34;</span> | <span><span>$(</span>cat bf.jq<span>)</span></span><span>&#34;</span></span>
<span><span>&#34;</span>1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233<span>&#34;</span></span>

$ ./jqjq -h
jqjq - jq implementation of jq
Usage: jqjq [OPTIONS] [--] [EXPR]
  --jq PATH        jq implementation to run with
  --lex            Lex EXPR
  --no-builtins    No builtins
  --null-input,-n  Null input
  --parse          Lex and parse EXPR
  --repl           REPL
  --run-tests      Run jq tests from stdin</pre></div>
<h3 dir="auto"><a id="user-content-use-with-jq" aria-hidden="true" href="#use-with-jq"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use with <code>jq</code></h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ jq -n -L . &#39;include &#34;jqjq&#34;; eval(&#34;def f: 1,8; [f,f] | map(.+105) | implode&#34;)&#39;
&#34;jqjq&#34;

$ jq -L . &#39;include &#34;jqjq&#34;; eval(&#34;(.+.) | map(.+105) | implode&#34;)&#39; &lt;&lt;&lt; &#39;[1,8]&#39;
&#34;jqjq&#34;"><pre>$ jq -n -L <span>.</span> <span><span>&#39;</span>include &#34;jqjq&#34;; eval(&#34;def f: 1,8; [f,f] | map(.+105) | implode&#34;)<span>&#39;</span></span>
<span><span>&#34;</span>jqjq<span>&#34;</span></span>

$ jq -L <span>.</span> <span><span>&#39;</span>include &#34;jqjq&#34;; eval(&#34;(.+.) | map(.+105) | implode&#34;)<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>[1,8]<span>&#39;</span></span>
<span><span>&#34;</span>jqjq<span>&#34;</span></span></pre></div>
<h3 dir="auto"><a id="user-content-run-tests" aria-hidden="true" href="#run-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run tests</h3>
<p dir="auto"><code>make test</code></p>
<h2 dir="auto"><a id="user-content-progress" aria-hidden="true" href="#progress"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Progress</h2>
<ul>
<li> <code>123, .123, 1.23, 1.23e2, 1.23e+2, &#34;abc&#34;, true, false, null</code> Scalar literals
<ul>
<li> Unicode codepoint escape <code>&#34;\ud83d\ude03&#34;</code></li>
<li> Control code and quote escape <code>&#34;\&#34;\n\r\t\f\b\\\/&#34;</code></li>
</ul>
</li>
<li> <code>{key: &#34;value&#34;}</code> Object literal
<ul>
<li> <code>{key}</code></li>
<li> <code>{&#34;key&#34;}</code></li>
<li> <code>{$key}</code></li>
<li> <code>{(...): ...}</code></li>
<li> <code>{(&#34;a&#34;,&#34;b&#34;): (1,2), c: 2}</code> Multiple key/value outputs</li>
<li> <code>{&#34;\()&#34;}</code></li>
<li> <code>{key: 1 | .}</code> Multi value queries</li>
</ul>
</li>
<li> <code>[1,2,3]</code> Array literal, collect</li>
<li> <code>1, 2</code> Comma operator</li>
<li> <code>1 | 2</code> Pipe operator</li>
<li> <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code> Arithmetic operators</li>
<li> <code>+123</code>, <code>-1</code> Unary operators</li>
<li> <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> Comparison operators</li>
<li> <code>123 as $a | ...</code> Binding
<ul>
<li> <code>(1,2,3) as $a | ...</code> Binding per output</li>
<li> <code>{a: [123]} as {a: [$v]}</code> Destructuring binding</li>
</ul>
</li>
<li> <code>.</code> Identity</li>
<li> <code>.key[123].&#34;key&#34;[f]</code> Index
<ul>
<li> <code>.a</code>, <code>.[&#34;a&#34;]</code> Simple index</li>
<li> <code>.&#34;key&#34;</code></li>
<li> <code>.a.b</code> Multi index</li>
<li> <code>.a?</code> Optional index</li>
<li> <code>.a[]</code> Iterate index</li>
</ul>
</li>
<li> <code>.[]</code> Iterate</li>
<li> <code>.[]?</code> Try iterate</li>
<li> <code>.[start:stop]</code>, <code>.[:stop]</code>, <code>.[start:]</code> Array slicing
<ul>
<li> <code>.[{start: 123, stop: 123}]</code> Slice using objec</li>
<li> Slice and path tracking <code>path(.[1:2]) -&gt; [{&#34;start&#34;:1,&#34;end&#34;:2}]</code></li>
</ul>
</li>
<li> <code>and</code>, <code>or</code> operators</li>
<li>  <code>not</code> operator</li>
<li> <code>if f then 2 else 3 end</code> Conditional
<ul>
<li> <code>if f then 2 end</code> Optional else</li>
<li> <code>if f then 2 elif f then 3 end</code> Else if clauses</li>
<li> <code>if true,false then &#34;a&#34; else &#34;b&#34; end</code> Multiple condition outputs</li>
</ul>
</li>
<li> <code>reduce f as $a (init; update)</code> Reduce output</li>
<li> <code>foreach f as $a (init; update; extract)</code> Foreach output, update state and output extracted value
<ul>
<li> Optional extract</li>
</ul>
</li>
<li> <code>f = v</code> Assignment</li>
<li> <code>f |= v</code>, <code>f +=</code> Update assignment</li>
<li> <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code> Arithmetic update assignment</li>
<li> <code>eval($expr)</code></li>
<li> <code>input</code>, <code>inputs</code></li>
<li> Builtins / standard library
<ul>
<li> <code>del(f)</code></li>
<li> <code>add</code></li>
<li> <code>all</code>, <code>all(cond)</code>, <code>all(gen; cond)</code></li>
<li> <code>any</code>, <code>any(cond)</code>, <code>any(gen; cond)</code></li>
<li> <code>debug</code> (passthrough)</li>
<li> <code>delpaths($paths)</code> (passthrough)</li>
<li> <code>empty</code> (passthrough)</li>
<li> <code>endswith($s)</code></li>
<li> <code>error($v)</code> (passthrough)</li>
<li> <code>error</code> (passthrough)</li>
<li> <code>explode</code> (passthrough)</li>
<li> <code>first(f)</code></li>
<li> <code>first</code></li>
<li> <code>flatten</code>, <code>flatten($depth)</code></li>
<li> <code>from_entries</code></li>
<li> <code>fromjson</code> (passthrough)</li>
<li> <code>getpath(path)</code> (passthrough)</li>
<li> <code>group</code>, <code>group_by(f)</code></li>
<li> <code>has($key)</code> (passthrough)</li>
<li> <code>implode</code> (passthrough)</li>
<li> <code>isempty</code></li>
<li> <code>join($s)</code></li>
<li> <code>last(f)</code></li>
<li> <code>last</code></li>
<li> <code>length</code> (passthrough)</li>
<li> <code>limit($n; f)</code></li>
<li> <code>map(f)</code></li>
<li> <code>max</code>, <code>max_by(f)</code></li>
<li> <code>min</code>, <code>min_by(f)</code></li>
<li> <code>nth($n; f); nth($n)</code></li>
<li> <code>range($to)</code>, <code>range($from; $to)</code>, <code>range($from; $to; $by)</code></li>
<li> <code>recurse</code>, <code>recurse(f)</code></li>
<li> <code>repeat</code></li>
<li> <code>reverse</code></li>
<li> <code>scalars</code></li>
<li> <code>select(f)</code></li>
<li> <code>setpath</code> (passthrough)</li>
<li> <code>sort</code>, <code>sort_by(f)</code></li>
<li> <code>startswith($s)</code></li>
<li> <code>to_entries</code></li>
<li> <code>tojson</code> (passthrough)</li>
<li> <code>tonumber</code> (passthrough)</li>
<li> <code>tostring</code> (passthrough)</li>
<li> <code>match($regex; $flags)</code> (passthrough)</li>
<li> <code>match($val)</code></li>
<li> <code>gsub($regex; f)</code> (passthrough)</li>
<li> <code>gsub($regex; f; $flags)</code></li>
<li> <code>transpose</code></li>
<li> <code>type</code> (passthrough)</li>
<li> <code>unique</code>, <code>unique_by(f)</code></li>
<li> <code>until(cond; next)</code></li>
<li> <code>while(cond; update)</code></li>
<li> <code>with_entries</code></li>
<li> Math functions, <code>sin/0</code>, ... <code>atan/2</code>, ...</li>
<li> More...</li>
</ul>
</li>
<li> <code>def f: .</code> Function declaration
<ul>
<li> <code>def f(lambda): lambda</code> Lambda argument</li>
<li> <code>(def f: 123; f) | .</code> Closure function</li>
<li> <code>def f: def _f: 123; _f; f</code> Local function</li>
<li> <code>def f($binding): $binding</code> Binding arguments</li>
<li> <code>def f: f;</code> Recursion</li>
</ul>
</li>
<li> <code>path(f)</code> Output paths for <code>f</code> for input</li>
<li> <code>try f</code>, <code>try f catch .</code> Catch error</li>
<li> <code>f?</code> Empty shorthand catch</li>
<li> <code>..</code> Recurse input</li>
<li> <code>//</code> Alternative operator</li>
<li> <code>?//</code> Alternative destructuring operator</li>
<li> <code>$ENV</code></li>
<li> <code>&#34;\(f)&#34;</code> String interpolation</li>
<li> <code>@format &#34;string&#34;</code> Format string</li>
<li> <code>label $out | break $out</code> Break out</li>
<li> <code>include &#34;f&#34;</code>, <code>import &#34;f&#34;</code> Include</li>
<li> Run jqjq with jqjq</li>
<li> Bugs</li>
</ul>
<h3 dir="auto"><a id="user-content-jqs-test-suite" aria-hidden="true" href="#jqs-test-suite"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>jq&#39;s test suite</h3>
<div data-snippet-clipboard-copy-content="$ ./jqjq --run-tests &lt; ../jq/tests/jq.test | grep passed
245 of 362 tests passed"><pre><code>$ ./jqjq --run-tests &lt; ../jq/tests/jq.test | grep passed
245 of 362 tests passed
</code></pre></div>
<p dir="auto">Note that expected test values are based on stedolan&#39;s jq. If you run with a different jq implementation like gojq some tests might fail because of different error messages, support for arbitrary precision integers etc.</p>
<h3 dir="auto"><a id="user-content-design-problems-issues-and-unknowns" aria-hidden="true" href="#design-problems-issues-and-unknowns"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Design problems, issues and unknowns</h3>
<ul dir="auto">
<li>Better parser errors.</li>
<li>The &#34;environment&#34; pass around is not very efficient and also it make support recursion a bit awkward (called function is injected in the env at call time).</li>
<li>&#34;,&#34; operator in jq (and gojq) is left associate but for the way jqjq parses it creates the correct parse tree when it&#39;s right associate. Don&#39;t know why.</li>
<li>Suffix with multiple <code>[]</code> outputs values in wrong order.</li>
<li>Non-associate operators like <code>==</code> should fail, ex: <code>1 == 2 == 3</code>.</li>
<li>Object are parsed differently compared to gojq. gojq has a list of pipe queries, jqjq will only have one that might be pipe op.</li>
<li>Less &#34;passthrough&#34; piggyback on jq features:
<ul dir="auto">
<li><code>reduce/foreach</code> via recursive function? similar to <code>if</code> or <code>{}</code>-literal?</li>
<li><code>try/catch</code> via some backtrack return value? change <code>[path, value]</code> to include an error somehow?</li>
</ul>
</li>
<li>How to support <code>label/break</code>?</li>
<li>How to support <code>delpaths</code> (usd by <code>del</code> etc). Have to keep paths same while deleting a group of paths? use sentinel value? work with paths instead?</li>
<li>Rewrite AST before eval, currently <code>if</code> and some other do rewrite (optional parts etc) while evaluating.</li>
<li>Rethink invalid path handling, current <code>[null]</code> is used as sentinel value.</li>
<li><code>{a:123} | .a |= empty</code> should remove key.</li>
</ul>
<h3 dir="auto"><a id="user-content-useful-references" aria-hidden="true" href="#useful-references"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Useful references</h3>
<ul dir="auto">
<li><a href="https://github.com/stedolan/jq">jq - Command-line JSON processor</a></li>
<li><a href="https://github.com/stedolan/jq/blob/master/src/builtin.jq">jq&#39;s builtin.jq</a></li>
<li><a href="https://github.com/stedolan/jq/wiki/jq-Language-Description">jq Language Description</a></li>
<li><a href="https://github.com/fadado/JBOL/blob/master/doc/JQ-language-grammar.md">jq simplified grammar</a></li>
<li><a href="https://github.com/itchyny/gojq">gojq - Pure Go implementation of jq</a></li>
<li><a href="https://github.com/01mf02/jaq">jaq - A jq clone focused on correctness, speed, and simplicity</a></li>
<li><a href="https://github.com/MiSawa/xq">xq - Pure rust implementation of jq</a></li>
<li><a href="https://github.com/stedolan/jq/wiki/Parsing-Expression-Grammars">jq wiki: jq as a PEG engine by pkoppstein</a></li>
<li><a href="https://www.engr.mun.ca/~theo/Misc/exp_parsing.htm#climbing" rel="nofollow">Precedence climbing</a></li>
</ul>
<h3 dir="auto"><a id="user-content-tools-and-tricks" aria-hidden="true" href="#tools-and-tricks"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tools and tricks</h3>
<ul dir="auto">
<li><code>jq -n --debug-dump-disasm &#39;...&#39;</code> show jq byte code</li>
<li><code>jq -n --debug-trace=all &#39;...&#39;</code> show jq byte code run trace</li>
<li><code>jq -n &#39;{a: &#34;hello&#34;} | debug&#39; 2&gt; &gt;(jq -R &#39;gsub(&#34;\u001b\\[.*?m&#34;;&#34;&#34;) | fromjson&#39; &gt;&amp;2)</code> pretty print debug messages</li>
<li><code>GOJQ_DEBUG=1 go run -tags gojq_debug cmd/gojq/main.go -n &#39;...&#39;</code> run gojq in debug mode</li>
<li><code>fq -n &#39;&#34;.a.b&#34; | _query_fromstring&#39;</code> gojq parse tree for string</li>
<li><code>fq -n &#39;{...} | _query_tostring&#39;</code> jq expression string for gojq parse tree</li>
<li>For a convenient jq development experience:
<ul dir="auto">
<li><a href="https://github.com/wader/jq-dash-docset">jq-dash-docset</a></li>
<li><a href="https://github.com/wader/vscode-jq">vscode-jq</a></li>
<li><a href="https://github.com/wader/jq-lsp">jq-lsp</a></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-thanks-to" aria-hidden="true" href="#thanks-to"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Thanks to</h2>
<ul dir="auto">
<li><a href="https://github.com/stedolan">stedolan</a> for jq and got me interesting in generator/backtracking based languages.</li>
<li><a href="https://github.com/pkoppstein">pkoppstein</a> for writing about <a href="https://github.com/stedolan/jq/wiki/Parsing-Expression-Grammars">jq and PEG parsing</a>.</li>
<li><a href="https://github.com/itchyny">itchyny</a> for jqjq fixes and <a href="https://github.com/itchyny/gojq">gojq</a> from which is learned a lot and is also from where most of jqjq&#39;s AST design comes from. Sharing AST design made it easier to compare parser output (ex via <a href="https://github.com/wader/fq">fq&#39;s <code>_query_fromstring</code></a>). gojq also fixes some confusing jq bugs and has better error messages which saves a lot of time.</li>
<li>Michael Färber <a href="https://github.com/01m">@01mf02</a> for <a href="https://github.com/01mf02/jaq">jaq</a> and where I also learned about precedence climbing.</li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Copyright (c) 2022 Mattias Wadman</p>
<p dir="auto">jqjq is distributed under the terms of the MIT License.</p>
<p dir="auto">See the <a href="https://github.com/wader/jqjq/blob/master/LICENSE">LICENSE</a> file for license details.</p>
</article>
          </div></div>
  </body>
</html>
