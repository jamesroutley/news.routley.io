<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dseltzer.gitlab.io/sping/docs/">Original</a>
    <h1>Show HN: Sping ‚Äì An HTTP/TCP latency tool that&#39;s easy on the eye</h1>
    
    <div id="readability-page-1" class="page">
    <p>Latest Version: 0.2.11</p>


<p>Modern terminal HTTP/TCP latency monitoring tool with real-time visualization. Think <code>httping</code> meets modern CLI design with rich terminal UI, phase timing, and advanced analytics.</p>

<p><strong>Status</strong>: Feature-complete MVP with HTTP/TCP support, phase timing, outlier detection, and comprehensive monitoring capabilities.</p>

<h2>Demo</h2>

<p><img src="https://dseltzer.gitlab.io/sping/docs/demo.gif" alt="sping Interactive Demo" width="50%"/></p>

<p><em>Real-time latency monitoring with interactive charts showing HTTP response times, outlier detection, and live statistics.</em></p>

<h2>Why?</h2>

<p>I&#39;ve frequently found myself using <a href="https://github.com/XuehaiPan/nvitop">nvitop</a> to diagnose GPU/CPU contention issues.</p>

<p>The two best things about it are:</p>

<ul>
<li>It&#39;s easy to install if I can access pip in the container</li>
<li>It makes a compelling screenshot (which helps me communicate with coworkers.)</li>
</ul>

<p>With those two lessons in mind: <strong>Here is Sping!</strong></p>

<p><strong>Purpose</strong>: Help observe and diagnose latency issues at layer 4+ (TCP/HTTP/HTTPS)</p>

<p>Two good things about it:</p>

<ul>
<li>It&#39;s easy to install if you have pip. (Available at <a href="https://pypi.org/project/service-ping-sping/">service-ping-sping</a> on PyPi)</li>
<li>It makes a compelling screenshot.</li>
</ul>

<h2>Features</h2>

<ul>
<li>üåê <strong>HTTP &amp; TCP Monitoring</strong>: Support for <code>http://</code>, <code>https://</code>, and <code>tcp://</code> protocols</li>
<li>üìä <strong>Real-time Visualization</strong>: Interactive charts and live statistics in your terminal</li>
<li>üîç <strong>Phase Breakdown</strong>: DNS, connection, TLS, request, and response timing</li>
<li>üö® <strong>Outlier Detection</strong>: Automatic outlier detection using MAD (Median Absolute Deviation)</li>
<li>‚ö†Ô∏è <strong>Threshold Alerting</strong>: Warning and critical thresholds with exit codes</li>
<li>üåç <strong>DNS Control</strong>: IPv4/IPv6 selection and DNS resolution caching</li>
<li>üìà <strong>Advanced Statistics</strong>: Percentiles (p50, p90, p95, p99), standard deviation</li>
<li>üíæ <strong>Multiple Output Formats</strong>: Interactive UI, plain text, JSON, and JSON export</li>
<li>üîê <strong>Authentication</strong>: Bearer tokens and basic auth support</li>
<li>üé® <strong>Rich Terminal UI</strong>: Beautiful charts, color-coded logs, and responsive layouts</li>
<li>üåà <strong>Color Palettes</strong>: Choose from 8 themed color schemes (sunset, ocean, forest, volcano, galaxy, arctic, neon, monochrome)</li>
</ul>

<h2>Install</h2>

<div>
<pre><span></span><code>pip<span> </span>install<span> </span>service-ping-sping
</code></pre>
</div>

<p>For development:</p>



<h2>Quick Start</h2>

<div>
<pre><span></span><code><span># HTTP monitoring with interactive UI</span>
sping<span> </span>google.com

<span># TCP connection monitoring</span>
sping<span> </span>tcp://google.com:80

<span># HTTPS with custom options</span>
sping<span> </span>https://api.example.com<span> </span>--interval<span> </span><span>0</span>.5<span> </span>--count<span> </span><span>20</span>

<span># JSON output for automation</span>
sping<span> </span>google.com<span> </span>--json<span> </span>--count<span> </span><span>5</span>

<span># Advanced monitoring with thresholds</span>
sping<span> </span>example.com<span> </span>--warn<span> </span><span>100</span><span> </span>--crit<span> </span><span>500</span><span> </span>--percentiles

<span># Try different color themes</span>
sping<span> </span>example.com<span> </span>--palette<span> </span>ocean
</code></pre>
</div>

<h2>Usage Examples</h2>

<h3>HTTP/HTTPS Monitoring</h3>

<div>
<pre><span></span><code><span># Basic HTTP monitoring (auto-adds http://)</span>
sping<span> </span>example.com

<span># HTTPS with custom method and body transfer</span>
sping<span> </span>https://api.example.com<span> </span>--method<span> </span>POST<span> </span>--body

<span># IPv4 only with DNS caching</span>
sping<span> </span>google.com<span> </span>--ipv4<span> </span>--resolve-once

<span># With authentication</span>
sping<span> </span>api.example.com<span> </span>--auth<span> </span><span>&#34;bearer:your-token&#34;</span>
sping<span> </span>api.example.com<span> </span>--auth<span> </span><span>&#34;user:password&#34;</span>
</code></pre>
</div>

<h3>TCP Connection Monitoring</h3>

<div>
<pre><span></span><code><span># Test TCP connectivity</span>
sping<span> </span>tcp://google.com:80
sping<span> </span>tcp://example.com:443

<span># Monitor database connections</span>
sping<span> </span>tcp://localhost:5432<span> </span>--interval<span> </span><span>0</span>.1
</code></pre>
</div>

<h3>Advanced Features</h3>

<div>
<pre><span></span><code><span># Outlier detection and thresholds</span>
sping<span> </span>example.com<span> </span>--warn<span> </span><span>100</span><span> </span>--crit<span> </span><span>500</span><span> </span>--count<span> </span><span>100</span>

<span># Export detailed timing data</span>
sping<span> </span>example.com<span> </span>--export-file<span> </span>results.json<span> </span>--count<span> </span><span>50</span>

<span># Show percentile statistics</span>
sping<span> </span>example.com<span> </span>--percentiles<span> </span>--count<span> </span><span>100</span>

<span># Plain output for scripting</span>
sping<span> </span>example.com<span> </span>--plain<span> </span>--count<span> </span><span>5</span>
</code></pre>
</div>

<h2>Outlier Detection</h2>

<p>sping automatically detects unusual latency spikes using <strong>Median Absolute Deviation (MAD)</strong> analysis:</p>

<h3>What Counts as an Outlier</h3>

<ul>
<li><strong>Latency outliers</strong>: Response times that deviate significantly from recent baseline performance</li>
<li><strong>Statistical threshold</strong>: Latencies that are more than <strong>6x the MAD</strong> away from the median</li>
<li><strong>Baseline requirement</strong>: Needs at least 10 successful samples to establish baseline  </li>
<li><strong>Rolling window</strong>: Uses the last 30 successful requests to calculate normal behavior</li>
<li><strong>Successful requests only</strong>: Only analyzes successful responses (errors are tracked separately)</li>
</ul>

<h3>How It Works</h3>

<ol>
<li><strong>Baseline calculation</strong>: Median of recent 30 successful latencies (e.g., 100ms)</li>
<li><strong>Variability measure</strong>: MAD of those latencies (e.g., 15ms)  </li>
<li><strong>Outlier threshold</strong>: <code>|current_latency - median| / MAD &gt; 6.0</code></li>
<li><strong>Example</strong>: If baseline is 100ms ¬± 15ms MAD, requests &gt; 190ms or &lt; 10ms would be outliers</li>
</ol>

<h3>Visual Indicators</h3>

<ul>
<li><strong>Interactive mode</strong>: Outlier requests show <code>[OUTLIER]</code> marker in the log</li>
<li><strong>Statistics bar</strong>: Shows red outlier count when detected (e.g., <code>outliers 3</code>)</li>
<li><strong>JSON output</strong>: <code>&#34;anomaly&#34;: true</code> field in export data (kept for API compatibility)</li>
</ul>

<p><em>Note: Outlier detection helps identify performance degradation, network issues, or service problems that might not trigger error thresholds.</em></p>

<h2>Command Line Options</h2>

<h3>Core Options</h3>

<ul>
<li><code>-i, --interval FLOAT</code>: Seconds between probes (default: 1.0)</li>
<li><code>-c, --count INT</code>: Number of probes then exit</li>
<li><code>--timeout FLOAT</code>: Request timeout in seconds (default: 10.0)</li>
<li><code>-X, --method TEXT</code>: HTTP method (default: HEAD)</li>
</ul>

<h3>Protocol &amp; DNS</h3>

<ul>
<li><code>--ipv4</code>: Force IPv4 only</li>
<li><code>--ipv6</code>: Force IPv6 only  </li>
<li><code>--resolve-once</code>: Resolve DNS only once and cache</li>
</ul>

<h3>HTTP Options</h3>

<ul>
<li><code>--body</code>: Include full body transfer time</li>
<li><code>--no-keepalive</code>: Disable persistent connections</li>
<li><code>--user-agent TEXT</code>: Custom User-Agent string</li>
<li><code>--auth TEXT</code>: Authentication (user:pass or bearer:token)</li>
<li><code>--insecure</code>: Skip TLS verification</li>
</ul>

<h3>Monitoring &amp; Alerts</h3>

<ul>
<li><code>--warn FLOAT</code>: Warning threshold in milliseconds</li>
<li><code>--crit FLOAT</code>: Critical threshold in milliseconds</li>
<li><code>--percentiles</code>: Show percentile statistics in summary</li>
</ul>

<h3>UI &amp; Display</h3>

<ul>
<li><code>--refresh-rate FLOAT</code>: UI update throttling in Hz (default: 4.0, higher = more responsive, lower = less CPU)</li>
<li><code>--palette PALETTE</code>: Color palette for latency visualization (default: sunset)</li>
<li><code>--xterm-colors-only</code>: Force basic terminal color compatibility (useful for older terminals)</li>
</ul>

<h3>Color Palettes</h3>

<p>Choose from beautiful themed color palettes to customize your latency visualization:</p>

<h4>Sunset Palette (Default)</h4>

<p><em>Warm oranges and reds reminiscent of a beautiful sunset</em></p>

<p><span title="#626262"></span><code>#626262</code> <span title="#808080"></span><code>#808080</code> <span title="#6B59C3"></span><code>#6B59C3</code> <span title="#836FFF"></span><code>#836FFF</code> <span title="#8968CD"></span><code>#8968CD</code> <span title="#AB82FF"></span><code>#AB82FF</code> <span title="#CD96CD"></span><code>#CD96CD</code> <span title="#FFBBFF"></span><code>#FFBBFF</code> <span title="#CD8C95"></span><code>#CD8C95</code> <span title="#FFAEB9"></span><code>#FFAEB9</code></p>

<details></details>

<div>
<pre><span></span><code><span># Examples with different palettes</span>
sping<span> </span>example.com<span> </span>--palette<span> </span>ocean
sping<span> </span>example.com<span> </span>--palette<span> </span>volcano<span> </span>--count<span> </span><span>20</span>
sping<span> </span>example.com<span> </span>--palette<span> </span>neon<span> </span>--percentiles
</code></pre>
</div>

<h4>Color Compatibility Notes</h4>

<p><strong>Terminal Color Support</strong>: sping automatically detects your terminal&#39;s color capabilities and adjusts accordingly. However, older terminals or certain environments may experience:</p>

<ul>
<li><strong>Limited Color Support</strong>: Older terminals may only support basic ANSI colors rather than rich RGB colors</li>
<li><strong>Solution</strong>: Set <code>TERM=xterm-256color</code> in your environment or use <code>--xterm-colors-only</code> for consistent basic colors</li>
<li><strong>Compatibility Mode</strong>: Use <code>--xterm-colors-only</code> to force basic terminal colors that work everywhere</li>
</ul>

<div>
<pre><span></span><code><span># For maximum compatibility with older terminals</span>
sping<span> </span>example.com<span> </span>--xterm-colors-only

<span># Or set environment variable for better color support</span>
<span>TERM</span><span>=</span>xterm-256color<span> </span>sping<span> </span>example.com
</code></pre>
</div>

<h3>Output Formats</h3>

<ul>
<li><code>--json</code>: JSON output mode (one object per line)</li>
<li><code>--plain</code>: Plain text output mode</li>
<li><code>--export-file FILE</code>: Export JSON results to file</li>
</ul>

<h2>Output Formats</h2>

<h3>Interactive Mode (Default)</h3>

<p>Real-time terminal UI with:</p>

<ul>
<li>Live latency chart with gradient coloring</li>
<li>Recent requests log with timing details</li>
<li>Statistics panel with min/mean/max/stdev</li>
<li>Outlier highlighting and threshold indicators</li>
</ul>

<h3>Plain Text Mode (<code>--plain</code>)</h3>

<pre><code>[1] 1755658486.287: 484.313ms 200 (application/json) from httpbin.org (52.1.207.236)
--- https://httpbin.org/get sping summary ---
1 probes, 1 ok, 0 errors
Latency (ms): min 484.313 mean 484.313 max 484.313
</code></pre>

<h3>JSON Mode (<code>--json</code>)</h3>

<div>
<pre><span></span><code><span>{</span><span>&#34;seq&#34;</span><span>:</span><span> </span><span>1</span><span>,</span><span> </span><span>&#34;timestamp&#34;</span><span>:</span><span> </span><span>1755658729.193</span><span>,</span><span> </span><span>&#34;latency_ms&#34;</span><span>:</span><span> </span><span>11.110</span><span>,</span><span> </span><span>&#34;status_code&#34;</span><span>:</span><span> </span><span>0</span><span>,</span><span> </span><span>&#34;error&#34;</span><span>:</span><span> </span><span>null</span><span>,</span><span> </span><span>&#34;bytes_read&#34;</span><span>:</span><span> </span><span>0</span><span>,</span><span> </span><span>&#34;content_type&#34;</span><span>:</span><span> </span><span>&#34;tcp/connection&#34;</span><span>,</span><span> </span><span>&#34;host_address&#34;</span><span>:</span><span> </span><span>&#34;google.com (142.250.65.238)&#34;</span><span>,</span><span> </span><span>&#34;anomaly&#34;</span><span>:</span><span> </span><span>false</span><span>,</span><span> </span><span>&#34;phases&#34;</span><span>:</span><span> </span><span>{</span><span>&#34;dns_ms&#34;</span><span>:</span><span> </span><span>5.444</span><span>,</span><span> </span><span>&#34;connect_ms&#34;</span><span>:</span><span> </span><span>5.598</span><span>,</span><span> </span><span>&#34;tls_ms&#34;</span><span>:</span><span> </span><span>null</span><span>,</span><span> </span><span>&#34;request_write_ms&#34;</span><span>:</span><span> </span><span>null</span><span>,</span><span> </span><span>&#34;ttfb_ms&#34;</span><span>:</span><span> </span><span>null</span><span>,</span><span> </span><span>&#34;body_read_ms&#34;</span><span>:</span><span> </span><span>null</span><span>,</span><span> </span><span>&#34;total_ms&#34;</span><span>:</span><span> </span><span>11.110</span><span>}}</span>
</code></pre>
</div>

<h2>Phase Timing Breakdown</h2>

<p>sping provides detailed timing for each phase of the connection:</p>

<ul>
<li><strong>DNS</strong>: Domain name resolution time</li>
<li><strong>Connect</strong>: TCP connection establishment  </li>
<li><strong>TLS</strong>: TLS/SSL handshake time (HTTPS only)</li>
<li><strong>Request Write</strong>: Time to send HTTP request</li>
<li><strong>TTFB</strong>: Time to first byte (response headers)</li>
<li><strong>Body Read</strong>: Time to read response body</li>
<li><strong>Total</strong>: End-to-end request time</li>
</ul>

<h2>Exit Codes</h2>

<ul>
<li><code>0</code>: Success</li>
<li><code>1</code>: Warning threshold exceeded (when <code>--warn</code> specified)</li>
<li><code>2</code>: Critical threshold exceeded (when <code>--crit</code> specified)</li>
</ul>

<p>Perfect for monitoring scripts and alerting systems.</p>

<h2>Quit Interactive Mode</h2>

<p>Press <code>Ctrl+C</code> to gracefully exit and see the final summary.</p>

<h2>Requirements</h2>

<ul>
<li>Python 3.9+</li>
<li>Modern terminal with color support recommended</li>
<li>Works on Linux, macOS, and Windows</li>
</ul>

<h2>License</h2>

<p>MIT - see <a href="https://gitlab.com/dseltzer/sping/-/blob/master/LICENSE.md">LICENSE.md</a></p>
<hr/><p><small>Latest documentation ‚Ä¢ <a href="https://dseltzer.gitlab.io/sping/docs/0.2.11/">Version 0.2.11 specific docs</a> ‚Ä¢ <a href="https://pypi.org/project/service-ping-sping/" target="_blank">Install from PyPI</a></small></p></div>
  </body>
</html>
