<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://puremourning.github.io/vimspector-web/">Original</a>
    <h1>Vimspector – the Vim debugger rules all</h1>
    
    <div id="readability-page-1" class="page"><section id="main_content">
          <h2 id="vimspector">Vimspector</h2>

<p>This site goes through an example of how to use <a href="https://github.com/puremourning/vimspector">Vimspector</a> to debug a C
program (Vim) and covers basic usage.</p>

<h2 id="contents">Contents</h2>

<!--ts-->
<ul>
  <li><a href="https://puremourning.github.io/vimspector-web/#getting-started">Getting Started</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#ui-overview">UI Overview</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#the-code-window">The code window</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#the-scopes-window">The scopes window</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#the-watch-window">The watch window</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#the-call-stack-window">The call stack window</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#the-output-window">The output window</a></li>
  <li><a href="https://puremourning.github.io/vimspector-web/#debugging">Debugging</a></li>
</ul>

<!-- Added by: ben, at: Sun 19 May 2019 20:01:31 BST -->

<!--te-->

<h2 id="getting-started">Getting Started</h2>

<p>A kind stranger (Igor Iranto) wrote up a <a href="https://dev.to/iggredible/debugging-in-vim-with-vimspector-4n0m">really nice tutorial</a> which is well worth a read.</p>

<p>In order to follow along at home, have a read of
<a href="https://puremourning.github.io/vimspector-web/demo-setup.html">these instructions</a>. They cover installing Vimspector and
overview configuring it to debug Vim, as an example of a C program.</p>

<p>See also the detailed <a href="https://puremourning.github.io/vimspector/">configuration documentation</a> and the
<a href="https://puremourning.github.io/vimspector/schema/">JSON schema</a> covering the <code>.vimspector.json</code> and <code>.gadgets.json</code>
formats.</p>

<h2 id="ui-overview">UI Overview</h2>

<p>When starting debugging, vimspector creates a new tab page with 5 main sections:</p>

<ul>
  <li>The code window</li>
  <li>The scopes window</li>
  <li>The watch window</li>
  <li>The call stack window.</li>
  <li>The output window</li>
</ul>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-overview.png" alt="Overview"/></p>

<h2 id="the-code-window">The code window</h2>

<p>This window has 2 elements:</p>

<ul>
  <li>The debug toolbar (WinBar), and</li>
  <li>The code buffer.</li>
</ul>

<p>In the code buffer, the current line is highlighted with a sign. When selecting a stack frame in the call stack, the code window is updated to display the current line in that stack frame:</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-code-window.png" alt="Code Window"/></p>

<p>You can even get a pop up with the vaue of the expression under the cursor.</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-variable-eval-hover.png" alt="Hover"/></p>

<h2 id="the-scopes-window">The scopes window</h2>

<p>Displays the variables in different visible scopes. Entries can be expanded by
putting the cursor on the line and pressing <code>&lt;CR&gt;</code>.</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-locals-window.png" alt="Scopes Window"/></p>

<h2 id="the-watch-window">The watch window</h2>

<p>Allows execution and display of arbitrary expressions. This window contains a
prompt buffer. When you enter insert mode (e.g. with <code>i</code>) you can type an
expression. When hitting <code>&lt;CR&gt;</code>, the expression is evaluated and the result is
displayed. If the result is has structure, it can be expanded like in the scoped
window by hitting <code>&lt;CR&gt;</code>. The little <code>+</code> and <code>-</code> icons show what is
expandable.</p>

<p>Watches are recomputed regularly so update as you’re stepping through code, for
example.</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-watch-window.png" alt="Watch Window"/></p>

<h2 id="the-call-stack-window">The call stack window</h2>

<p>This shows the call stack for all of the threads in the program.</p>

<p>As with variables, stacks can be expanded and collapsed with <code>&lt;CR&gt;</code> and have
little <code>+</code> and <code>-</code> icons where appropriate. In addition, hitting <code>&lt;CR&gt;</code> on a
particular stack frame will open the file in the code window and place the
cursor there.</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-callstack-window.png" alt="Call Stack"/></p>

<h2 id="the-output-window">The output window</h2>

<p>This contains a number of buffers for both monitoring debugger state an interracting with the debugger itself.</p>

<p>The most interesting buffers are:</p>

<ul>
  <li>The Console, which allows for an interactive REPL with most debug adapters,</li>
  <li>The debugee standard error stream, and</li>
  <li>The vimspector log, which allows for debugging when vimspector breaks</li>
</ul>

<p>These windows typically scroll automatically as new content is added asyncronously.</p>

<p><img src="https://puremourning.github.io/vimspector-web/img/vimspector-output-window.png" alt="Code Window"/></p>

<h2 id="debugging">Debugging</h2>

<p>For most debugging actions, I prefer the keyboard shortcuts, but if you are more
mouse-inclined, the WinBar is quite useful.</p>

<p>Here’s a summary of common actions in the code windows. See the <a href="https://github.com/puremourning/vimspector">Vimspector</a>
readme for full details.</p>

<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>WinBar</th>
      <th>Keyboard</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Start debugging</td>
      <td><em>None</em></td>
      <td><code>&lt;F5&gt;</code></td>
    </tr>
    <tr>
      <td>Continue until break</td>
      <td>Continue</td>
      <td><code>&lt;F5&gt;</code></td>
    </tr>
    <tr>
      <td>Step over</td>
      <td>Next</td>
      <td><code>&lt;F10&gt;</code></td>
    </tr>
    <tr>
      <td>Step into</td>
      <td>Step</td>
      <td><code>&lt;F11&gt;</code></td>
    </tr>
    <tr>
      <td>Complete the current funcion</td>
      <td>Finish</td>
      <td><code>&lt;F12&gt;</code></td>
    </tr>
    <tr>
      <td>Toggle breakpoint</td>
      <td><em>None</em></td>
      <td><code>&lt;F9&gt;</code></td>
    </tr>
    <tr>
      <td>Stop debugging</td>
      <td>Reset</td>
      <td><code>&lt;F3&gt;</code></td>
    </tr>
    <tr>
      <td>Start again with same options</td>
      <td>Restart</td>
      <td><code>&lt;F4&gt;</code></td>
    </tr>
    <tr>
      <td>Interrupt the debugee</td>
      <td>Pause</td>
      <td><code>&lt;F6&gt;</code></td>
    </tr>
  </tbody>
</table>

<p>Other common actions use different windows:</p>

<table>
  <thead>
    <tr>
      <th>Action</th>
      <th>Window</th>
      <th>Instructions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>View value of variable</td>
      <td>Code Window</td>
      <td>Hover the mouse on it</td>
    </tr>
    <tr>
      <td>View variable/expression</td>
      <td>Output Window</td>
      <td>Click <code>Console</code>, <code>i</code>, enter expression, <code>&lt;CR&gt;</code></td>
    </tr>
    <tr>
      <td>View variable structure</td>
      <td>Scopes Window</td>
      <td>Highlight it and hit <code>&lt;CR&gt;</code></td>
    </tr>
    <tr>
      <td>View variable/expression</td>
      <td>Watch Window</td>
      <td><code>i</code> then type expression, then <code>&lt;CR&gt;</code></td>
    </tr>
    <tr>
      <td>View backtrace</td>
      <td>Stack Trace Window</td>
      <td>Expand/collapse with <code>&lt;CR&gt;</code></td>
    </tr>
    <tr>
      <td>Jump to stack frame</td>
      <td>Stack Trace Window</td>
      <td>Put cursor on frame, hit <code>&lt;CR&gt;</code></td>
    </tr>
    <tr>
      <td>View process output</td>
      <td>Output Window</td>
      <td><code>stdout</code> or <code>stderr</code></td>
    </tr>
    <tr>
      <td>Delete a watch expression</td>
      <td>Watch Window</td>
      <td>Cursor on it, press <code>&lt;DEL&gt;</code></td>
    </tr>
    <tr>
      <td>Run to cursor</td>
      <td>Code Window</td>
      <td><code>&lt;F9&gt;</code>, <code>&lt;F5&gt;</code>, <code>&lt;F9&gt;</code></td>
    </tr>
    <tr>
      <td>Add a breakpoint while rnuning</td>
      <td>Code Window</td>
      <td><code>&lt;F6&gt;</code>, … <code>&lt;F9&gt;</code>, <code>&lt;F5&gt;</code></td>
    </tr>
  </tbody>
</table>


        </section></div>
  </body>
</html>
