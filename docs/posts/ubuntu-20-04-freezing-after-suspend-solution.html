<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://onestepcode.com/ubuntu-suspend-freeze-solution/?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=ubuntu-suspend-freeze-solution">Original</a>
    <h1>Ubuntu 20.04 freezing after suspend solution</h1>
    
    <div id="readability-page-1" class="page"><div>
						
<p>I had an issue with Ubuntu freezing after suspending the system. When I tried to wake up the OS, I’d hear the ventilator restarting, the keyboard lights would turn on, but the screen remained black. No way of getting the system back, besides a hard (<a href="https://blog.kember.net/posts/2008-04-reisub-the-gentle-linux-restart/">or soft</a>) reset. </p>



<p>TLDR: If nothing else works for you, verify you’re using the recommended <a href="https://itsfoss.com/swap-size/">swap size</a> for Ubuntu and <a href="https://linuxhandbook.com/increase-swap-ubuntu/">increase it</a> if needed.</p>



<h2>Diagnosis</h2>



<p>I had used been using Ubuntu 20.04 with no issues for almost 2 years. For no apparent reason, my system started freezing after suspend. I tried many proposed fixes (see the next section), but the problem persisted.</p>



<p>Finally, I decided to completely reinstall the system. Since the suspend function had been working fine before, it should work again in a fresh installation. </p>



<p>Reinstalling seemed to solve the problem for some time. However, as I started setting up Ubuntu and installing new applications, the problem arose again. The OS would freeze after suspend.</p>



<h2>Common solutions (that didn’t work for me)</h2>



<p>Some reported solutions to this problem:</p>



<ul><li>Modifying your <a href="https://askubuntu.com/a/1361408">grub configuration</a>.<ul><li>Different sources recommend different <a href="https://askubuntu.com/a/1383940">modifications</a>.</li></ul></li><li>Updating your Nvida drivers (if applicable).</li><li>Switching your display manager from gdm3 to lightdm.</li></ul>



<h2>Solution: Increase SWAP size</h2>



<p>I then realized that issue appeared as my disk memory started running low. </p>



<p>For my fresh installation, I allocated more disk space. I also used the default Ubuntu new system configurations, which allocated 2 GB of swap memory.</p>



<p>But this new setup didn’t work very well. Besides the suspend freeze issues that reappeared, my system would crash when I was running too many applications at the same time. <code><a href="https://htop.dev/">htop</a></code> revealed that in those situations my swap memory was almost full.</p>



<p>That’s when I decided to increase my swap memory and run across this Ubuntu system recommendation for the <a href="https://itsfoss.com/swap-size/">swap size</a>:</p>



<blockquote><p>If hibernation is used, swap size should be equal to size of RAM plus the square root of the RAM size.</p><cite>It’s FOSS</cite></blockquote>



<p>For example, if you have 8 GB of RAM, you should allocate about 11 GB for swap size. </p>



<p>To my great surprise, increasing the swap size not only remediated the system crashes, but also the suspend freezes! Yay!</p>



<p>So, if you’re system does not wake up after suspend, verify your swap size and increase it if necessary. You can follow <a href="https://linuxhandbook.com/increase-swap-ubuntu/">this guide</a>. </p>












					</div></div>
  </body>
</html>
