<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://deno.com/blog/deno-in-2021">Original</a>
    <h1>Deno in 2021</h1>
    
    <div id="readability-page-1" class="page"><div><p>2021 was the first full year of funded development on Deno.
<a href="https://deno.com/company" rel="noopener noreferrer">Our company</a> is 10 strong and growing.</p>
<p>Since <a href="https://deno.com/blog/v1" rel="noopener noreferrer">the 1.0 release in May 2020</a> the Deno CLI has
been developing at a steady pace. In 2021 we shipped 44 releases (11 minor, 33
patch), landing key features, countless bug fixes and significant performance
optimizations. For details on each release, see corresponding blog posts:
<a href="https://deno.com/blog/v1.7" rel="noopener noreferrer">v1.7</a>, <a href="https://deno.com/blog/v1.8" rel="noopener noreferrer">v1.8</a>,
<a href="https://deno.com/blog/v1.9" rel="noopener noreferrer">v1.9</a>, <a href="https://deno.com/blog/v1.10" rel="noopener noreferrer">v1.10</a>,
<a href="https://deno.com/blog/v1.11" rel="noopener noreferrer">v1.11</a>, <a href="https://deno.com/blog/v1.12" rel="noopener noreferrer">v1.12</a>,
<a href="https://deno.com/blog/v1.13" rel="noopener noreferrer">v1.13</a>, <a href="https://deno.com/blog/v1.14" rel="noopener noreferrer">v1.14</a>,
<a href="https://deno.com/blog/v1.15" rel="noopener noreferrer">v1.15</a>, <a href="https://deno.com/blog/v1.16" rel="noopener noreferrer">v1.16</a>,
<a href="https://deno.com/blog/v1.17" rel="noopener noreferrer">v1.17</a>.</p>
<p>Let&#39;s explore a few major developments:</p>
<h2 id="deno-deploy"><a aria-hidden="true" tabindex="-1" href="#deno-deploy"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deno Deploy</h2><p>We released the first Beta of <a href="https://deno.com/deploy" rel="noopener noreferrer">Deno Deploy</a> last summer. It&#39;s a modern
serverless cloud built from the ground up by our engineering team, that allows
users to very quickly deploy JavaScript, TypeScript, and WASM services to data
centers around the world.</p>
<p>We&#39;re actively developing &amp; investing in Deno Deploy. We think of it as our
third JavaScript runtime; after building Node.js and Deno CLI.</p>
<p>We&#39;re excited about the opportunity to build a modern runtime with cloud-first
primitives that shapes how teams build &amp; ship software.</p>
<p>We hope to share more about this next-generation system in the coming months.</p>
<h2 id="an-optimized-core"><a aria-hidden="true" tabindex="-1" href="#an-optimized-core"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>An optimized core</h2><p>Deno&#39;s core provides &#34;opcalls&#34; (similar to syscalls), allowing JavaScript to
call into Rust functions provided by the runtime (fs/net/url-parsing/...).</p>
<p>Prior to <a href="https://deno.com/blog/v1.9#faster-calls-into-rust-with-serde_v8" rel="noopener noreferrer">v1.9</a>
we marshalled opcall values via a mix of JSON &amp; binary buffers.</p>
<p>The efficiency of the op-layer is a key contributor to the runtime&#39;s overall
performance. Opcalls previously had ~4000ns of overhead per call, now reduced
nearly 100x to ~40ns per call.</p>
<p>The bulk of these efficiency gains were a result of
<a href="https://github.com/denoland/deno/tree/main/serde_v8" rel="noopener noreferrer">serde_v8</a>, a ~maximally
efficient bijection between Rust &amp; V8 values that we designed and shipped in
v1.9.</p>
<p>This alone reduced the cost of common operations (otherwise unchanged) such as
URL parsing by over 3x and has enabled Deno to mature as a fast JS runtime.</p>
<h2 id="native-http"><a aria-hidden="true" tabindex="-1" href="#native-http"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Native HTTP</h2><p>In <a href="https://deno.com/blog/v1.9#native-http2-web-server" rel="noopener noreferrer">Deno v1.9</a> we shipped
native HTTP server bindings, which were later stabilized in
<a href="https://deno.com/blog/v1.13#stabilize-native-http-server-api" rel="noopener noreferrer">Deno v1.13</a>.
These bindings allow you to create high-performance HTTP servers backed by
<a href="https://github.com/hyperium/hyper" rel="noopener noreferrer"><code>hyper</code></a> in only a few lines of code:</p>
<div><pre><span>import</span> <span>{</span> serve <span>}</span> <span>from</span> <span>&#34;https://deno.land/std@0.121.0/http/server.ts&#34;</span><span>;</span>
<span>serve</span><span>(</span><span>(</span><span>_req</span><span>)</span> <span>=&gt;</span> <span>new</span> <span>Response</span><span>(</span><span>&#34;Hello, world&#34;</span><span>)</span><span>,</span> <span>{</span> port<span>:</span> <span>3000</span> <span>}</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span><span>&#34;Listening on http://localhost:3000&#34;</span><span>)</span><span>;</span></pre></div><p>Because these bindings are built on
<a href="https://github.com/hyperium/hyper" rel="noopener noreferrer"><code>hyper</code></a>, they deliver great throughput and
latency.</p>
<h2 id="mdn-compatibility-tables"><a aria-hidden="true" tabindex="-1" href="#mdn-compatibility-tables"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MDN Compatibility Tables</h2><p>In <a href="https://deno.com/blog/deno-on-mdn" rel="noopener noreferrer">August 2021</a> Deno was added to the
<a href="https://developer.mozilla.org/pl/" rel="noopener noreferrer">MDN compatibility tables</a>.</p>
<p><img src="https://deno.com/deno-on-mdn/table.png" alt="MDN compat table for TextEncoderStream"/></p>
<p>Deno takes web compatibility seriously; we test Deno against
<a href="https://github.com/web-platform-tests/wpt" rel="noopener noreferrer">WPT</a> (or <code>Web Platform Tests</code>), a
test suite used by all major browsers to ensure spec compliance. Test suite
results can be found on
<a href="https://wpt.fyi/results/?label=master&amp;label=experimental&amp;product=chrome&amp;product=deno&amp;product=firefox&amp;product=safari&amp;aligned" rel="noopener noreferrer">wpt.fyi</a>.</p>
<h2 id="foreign-function-interface"><a aria-hidden="true" tabindex="-1" href="#foreign-function-interface"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Foreign Function Interface</h2><p>In
<a href="https://deno.com/blog/v1.13#experimental-ffi-replaces-native-plugin-system" rel="noopener noreferrer">Deno v1.13</a>
we replaced the unstable plugin system with a new Foreign Function Interface
API. The FFI is still considered unstable, but we think it&#39;s a signifiant
improvement.</p>
<p>Pre-1.13 the native plugin system allowed shipping dynamic libraries authored in
Rust. Due to unstable Rust ABI, as well as limiting the API authors to a single
language we decided to replace that system with a generic FFI API. This API
allows developers to write &#34;extensions&#34; to the Deno runtime in any language that
uses C calling convention.</p>
<p>We already saw some interesting projects using FFI API, showcasing how powerful
FFI API can be.</p>
<ul>
<li><a href="https://github.com/astrodon/astrodon" rel="noopener noreferrer">Desktop app framework</a></li>
<li><a href="https://github.com/denosaurs/deno_python" rel="noopener noreferrer">Python interpreter bindings</a></li>
<li><a href="https://github.com/littledivy/deno_sdl2" rel="noopener noreferrer">SDL2 bindings</a></li>
<li><a href="https://github.com/DjDeveloperr/deno_serial" rel="noopener noreferrer">SerialPort bindings</a></li>
<li><a href="https://github.com/denodrivers/sqlite3" rel="noopener noreferrer">SQLite bindings</a></li>
</ul>
<h2 id="slack--next-gen-platforms"><a aria-hidden="true" tabindex="-1" href="#slack--next-gen-platforms"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Slack &amp; next-gen platforms</h2><p>In November 2021, Slack announced its
<a href="https://api.slack.com/future" rel="noopener noreferrer">next generation development platform</a> built on
Deno. In addition to Slack, we&#39;ve been working with other partners to build &amp;
ship great Deno-powered products. We believe Deno Deploy&#39;s &#34;Isolates as a
Service&#34; provide solid foundations for:</p>
<ul>
<li>Modern edge-hosting</li>
<li>User-extendable platforms (bots, plugins, apps, etc...)</li>
<li>Low-code solutions</li>
</ul>
<p>If you&#39;re building similar products and think Deno technology could be a fit,
please reach out to <a href="mailto:deploy@deno.com" rel="noopener noreferrer">deploy@deno.com</a> !</p>
<h2 id="nodejs-compatibility"><a aria-hidden="true" tabindex="-1" href="#nodejs-compatibility"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Node.js Compatibility</h2><p>In Q4 2021 we started efforts to provide first-class Node.js compatibility.
Allowing Deno to run apps &amp; libraries (NPM packages) developed for Node.js
directly in Deno, unchanged.</p>
<p>In <a href="https://deno.com/blog/v1.15" rel="noopener noreferrer">Deno v1.15</a>, we shipped a first preview of
&#34;compat mode&#34;. The feature is still unstable but can be enabled using the
<code>--compat</code> flag. Most of the work involves providing polyfills in
<a href="https://deno.land/std/node" rel="noopener noreferrer">std/node</a>.</p>
<p>Some critical modules like <code>tls</code> and <code>zlib</code> are still incomplete, but in its
current form you can still run non-trivial applications. We&#39;re aiming to ship a
first iteration suitable for all users in the coming months.</p>
<h2 id="the-road-to-deno-2"><a aria-hidden="true" tabindex="-1" href="#the-road-to-deno-2"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Road to Deno 2</h2><p>In September of 2021, we started to discuss what a Deno 2 release might look
like. There are many obvious small API changes that should be addressed but we
are also investigating fundamental changes to improve the Deno workflow. Soon
we&#39;ll be releasing a roadmap for Deno 2 and hope to ship it in the first half of
this year. It will focus on better NPM ecosystem compatibility, better DX for
common workflows and exploring alternative package management solutions.</p>
</div></div>
  </body>
</html>
