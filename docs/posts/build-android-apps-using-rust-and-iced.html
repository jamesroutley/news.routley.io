<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ibaryshnikov/android-iced-example">Original</a>
    <h1>Build Android apps using Rust and Iced</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">There are <a href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/NativeActivity">NativeActivity</a> and <a href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/GameActivity">GameActivity</a> examples here.</p>
<p dir="auto">Based on several other examples:</p>
<ul dir="auto">
<li><code>na-mainloop</code> and <code>agdk-mainloop</code> from
<a href="https://github.com/rust-mobile/android-activity/tree/v0.6.0/examples">android-activity</a></li>
<li><a href="https://github.com/rust-mobile/rust-android-examples/tree/main/na-winit-wgpu">na-winit-wgpu</a>
from <code>rust-android-examples</code></li>
<li><a href="https://github.com/iced-rs/iced/tree/0.14/examples/integration">integration</a>
from <code>iced</code></li>
</ul>

<p dir="auto">iced integration example</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/pixel_1.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/pixel_1.png" alt="Pixel first screenshot"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/pixel_2.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/pixel_2.png" alt="Pixed second screenshot"/></a></p>
<p dir="auto">You can also run most of the examples from iced.
For this omit the scene rendering part and set the background of the root container.</p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/watch_1.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/watch_1.png" alt="Watch first"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/watch_2.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/watch_2.png" alt="Watch second"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/watch_3.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/watch_3.png" alt="Watch third"/></a></p>

<p dir="auto">Text input partially works, unresolved issues:</p>
<ul dir="auto">
<li>window doesn&#39;t resize on show/hide soft keyboard</li>
<li>how to change input language of soft keyboard</li>
<li>ime is not supported</li>
</ul>
<p dir="auto">Copy/paste and show/hide soft keyboard is implemented by calling Java</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/blob/master/pixel_3.png"><img src="https://blog.jacobvosmaer.nl/ibaryshnikov/android-iced-example/raw/master/pixel_3.png" alt="Pixel third screenshot"/></a></p>

<p dir="auto">Check <code>android-activity</code> crate for detailed instructions.
During my tests I was running the following command and using android studio afterwards:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export ANDROID_NDK_HOME=&#34;path/to/ndk&#34;
export ANDROID_HOME=&#34;path/to/sdk&#34;

rustup target add x86_64-linux-android
cargo install cargo-ndk

cargo ndk -t x86_64 -o app/src/main/jniLibs/  build"><pre><span>export</span> ANDROID_NDK_HOME=<span><span>&#34;</span>path/to/ndk<span>&#34;</span></span>
<span>export</span> ANDROID_HOME=<span><span>&#34;</span>path/to/sdk<span>&#34;</span></span>

rustup target add x86_64-linux-android
cargo install cargo-ndk

cargo ndk -t x86_64 -o app/src/main/jniLibs/  build</pre></div>
<p dir="auto">My setup is the following:</p>
<ul dir="auto">
<li>archlinux 6.9.6</li>
<li>jdk-openjdk 22</li>
<li>target api 35</li>
</ul>

<p dir="auto">Thanks to <code>android-activity</code> we can already build android apps in Rust, and
key crates such as <code>winit</code> and <code>wgpu</code> also support building for android.
<code>iced</code> doesn&#39;t support android out of the box, but it can be integrated with
existing graphics pipelines, as shown in
<a href="https://github.com/iced-rs/iced/tree/0.13.1/examples/integration">integration</a> example.
As a result, it was possible to convert existing example running <code>winit</code> + <code>wgpu</code> to
use <code>iced</code> on top.</p>
</article></div></div>
  </body>
</html>
