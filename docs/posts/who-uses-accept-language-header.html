<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://serpapi.com/blog/who-uses-accept-language-header/">Original</a>
    <h1>Who uses Accept-Language header?</h1>
    
    <div id="readability-page-1" class="page"><div>

        <section>
            <a href="https://serpapi.com/blog/tag/yelp/">yelp</a>
        </section>

        

        <p>Accept-Language header consists of the language preferred by the end-user.</p>

        <div>
            <section>
                <ul>
                    <li>
                        <a href="https://serpapi.com/blog/author/terry/">
                            <img src="https://serpapi.com/blog/content/images/size/w100/2022/07/profile.jpeg" alt="Terry Tan"/>
                        </a>
                    </li>
                </ul>
                <div>
                    
                    <p><time datetime="2024-09-09">Sep 9, 2024</time>
                        <span><span>‚Ä¢</span> 3 min read</span>
                    </p>
                </div>
            </section>
        </div>
    </div><div>
        

        <section>
            <p>In the past week, our <a href="https://serpapi.com/yelp-search-api">Yelp API</a> was experiencing slow response times. A search request that typically takes 3.x seconds (1.x seconds with Ludicrous Speed) was taking 40-50 seconds on average. We didn&#39;t push any update at that time, so we thought Yelp might have upgraded their detection mechanism. After checking our logs, we noticed an increasing of number of <code>403 - Forbidden</code> errors. We still saw some successful requests, but only a very small percentage. It&#39;s clear that we need to resolve the <code>403 - Forbidden</code> error.</p><p>It could have been a complex problem if we had to deal with cookies, randomly generated key in the header or other similar factors. However, after a few trials and errors, we were able to mitigate the problem simply by adding <code>Accept-Language</code> header.</p><figure><img src="https://serpapi.com/blog/content/images/2024/09/Graph.png" alt="" loading="lazy" width="2000" height="1005" srcset="https://serpapi.com/blog/content/images/size/w600/2024/09/Graph.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/09/Graph.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/09/Graph.png 1600w, https://serpapi.com/blog/content/images/2024/09/Graph.png 2182w" sizes="(min-width: 720px) 720px"/></figure><p>We swiftly implemented and deployed it to production, and our customers are now experiencing the same fast response times as before.</p><hr/><p>It‚Äôs great that the solution works, but I‚Äôm still curious about the reason behind it. The first question to consider is whether websites truly respect the <code>Accept-Language</code> header. If they do, what kind of websites are they? Probably those with global visitors, like Yelp. But does Yelp actually make use of it?</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.32.30-PM.png" alt="" loading="lazy" width="2000" height="1102" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-2.32.30-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-2.32.30-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-2.32.30-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.32.30-PM.png 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>Yelp Home Page</span></figcaption></figure><p>I have changed my language settings in Firefox to Japanese (so it&#39;s obvious to see the difference) and verified that the request was sending the correct <code>Accept-Language: ja</code> header. However, Yelp still responded with English text.</p><p>I observed the same results even when using a VPN set to Japan. The default location was correctly set to a place in Japan, yet the response remained in English, concluded that they don&#39;t actually use the header to determine the language to be served.</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.43.08-PM.png" alt="" loading="lazy" width="2000" height="1057" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-2.43.08-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-2.43.08-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-2.43.08-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.43.08-PM.png 2000w" sizes="(min-width: 720px) 720px"/></figure><p>The only way to change the language is to visit specific domain that Yelp provided. For example, selecting Japanese language will redirect you to <code>www.yelp.co.jp</code>.</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.49.38-PM.png" alt="" loading="lazy" width="2000" height="1191" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-2.49.38-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-2.49.38-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-2.49.38-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.49.38-PM.png 2000w" sizes="(min-width: 720px) 720px"/></figure><p>This is a common practice in many web applications, they either redirect visitors to a specific domain for the language or differentiate by using path like <code>/ja</code>. </p><p>Interestingly, Google does respect the <code>Accept-Language</code> header. While testing in Yelp domain, Google Sign-In widget popup appeared in Japanese. To confirm, I performed a search on Google and it worked as expected.</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.44.17-PM.png" alt="" loading="lazy" width="2000" height="874" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-2.44.17-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-2.44.17-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-2.44.17-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.44.17-PM.png 2000w" sizes="(min-width: 720px) 720px"/></figure><p>A simple test request using Postman also confirmed this.</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.33.54-PM.png" alt="" loading="lazy" width="2000" height="1522" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-2.33.54-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-2.33.54-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-2.33.54-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-2.33.54-PM.png 2068w" sizes="(min-width: 720px) 720px"/></figure><p>Meanwhile, Yelp appeared in English, as we observed.</p><figure><img src="https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-3.29.03-PM.png" alt="" loading="lazy" width="2000" height="1541" srcset="https://serpapi.com/blog/content/images/size/w600/2024/08/Screenshot-2024-08-22-at-3.29.03-PM.png 600w, https://serpapi.com/blog/content/images/size/w1000/2024/08/Screenshot-2024-08-22-at-3.29.03-PM.png 1000w, https://serpapi.com/blog/content/images/size/w1600/2024/08/Screenshot-2024-08-22-at-3.29.03-PM.png 1600w, https://serpapi.com/blog/content/images/2024/08/Screenshot-2024-08-22-at-3.29.03-PM.png 2082w" sizes="(min-width: 720px) 720px"/></figure><p>There are several discussions (on <a href="https://stackoverflow.com/questions/1020494/how-should-sites-google-and-or-you-treat-accept-language-header">StackOverflow</a> and <a href="https://borretti.me/article/uselessness-accept-language-header">article</a>) about the <code>Accept-Language</code> header. I think the takeaway is that it is probably a good design decision to consider <code>Accept-Language</code> header when designing multiple languages web application. </p><p>As far as web scraping is concern, it is a good practice to include the common headers in every request: <code>User-Agent, Accept, Accept-Encoding, Accept-Language, Connection, Cache-Control</code>.</p><h2 id="conclusion">Conclusion</h2><p><code>Accept-Language</code> should be respected when designing web applications for multiple languages, as it indicates the user&#39;s preferred language. Other indicators, such as location, can be considered afterward. Does that make sense? Feel free to reach out to me if you‚Äôd like to share your opinion.</p><p>Feel free to contact me (<a href="mailto:terry@serpapi.com">terry@serpapi.com</a>).</p>
<hr/>
<p>Join us on <a href="https://twitter.com/serp_api">X</a> | <a href="https://www.youtube.com/channel/UCUgIHlYBOD3yA3yDIRhg_mg">YouTube</a></p>
<p>Add a  <a href="https://github.com/serpapi/public-roadmap/issues">Feature Request</a>üí´ or a <a href="https://github.com/serpapi/public-roadmap/issues">Bug</a>üêû</p>
        </section>
    </div></div>
  </body>
</html>
