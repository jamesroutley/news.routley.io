<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bvisness.me/you-cant/">Original</a>
    <h1>You can&#39;t do that because I hate you</h1>
    
    <div id="readability-page-1" class="page"><div>
        

        
    <article>
      <header>
        
        
        <p><time datetime="2023-07-26T12:00:00+0000" itemprop="datePublished">July 26, 2023</time>
        </p>
    
      </header>
      
    <p>
        This is the truest tweet ever written:
    </p>

    <blockquote>
        <p>
            If you don&#39;t enjoy programming, don&#39;t worry, it is not your fault. Thousands of people around the world work hard day and night to make programming as miserable for you as possible. It&#39;s not suppose to be like that, really. ü´Ç
        </p>
        <p>
            <a href="https://twitter.com/tsoding">@tsoding</a> (<a href="https://twitter.com/tsoding/status/1682226717048422400">original</a>)
        </p>
    </blockquote>

    <p>
        Now, you might think this isn‚Äôt true. Programmers aren‚Äôt <em>really</em> making programming miserable on purpose, right? Wrong.
    </p>

    <p>
        Sometimes software is missing a feature you want. That‚Äôs understandable. But sometimes the devs <em>know</em> you want that feature, get your hopes up, and then let you down.
    </p>

    

    <p>
        Let‚Äôs start with Python. Every Python user has seen this message:
    </p>

    <pre><code><span><span>&gt;&gt;&gt; exit
</span></span><span><span>Use exit() or Ctrl-D (i.e. EOF) to exit</span></span></code></pre>

    <p>
        There are two reasonable things that Python could do here:
    </p>

    <ul>
        <li>Print <code>&lt;function exit&gt;</code>.</li>
        <li>Exit.</li>
    </ul>

    <p>
        But it does neither. It acknowledges your intent and refuses it. It‚Äôs saying ‚ÄúI know exactly what you want to do, but you‚Äôre doing it wrong. Do it right next time.‚Äù
    </p>

    <p>
        I understand that <code>&lt;function exit&gt;</code> might be confusing for newcomers, and exiting might be too destructive. But denying you the normal REPL behavior <em>and</em> denying you the ability to exit is just insulting.
    </p>

    

    <p>
        I will never understand why people like Rust‚Äôs tooling so much. Every time I have to touch it, it‚Äôs like the devs are mocking me.
    </p>

    <p>
        Today I had a Rust file that I wanted to autoformat. I wanted to tidy things up and wrap comments to 80 characters. So I ran <code>cargo fmt</code>. Nothing.
    </p>

    <p>
        I tried <code>cargo fmt -v</code>. It wasn‚Äôt seeing my file, despite it absolutely being part of the project. It even found the lib.rs in my crate but not this particular source file. I have no idea why, but I figured no worries, I can just do <code>cargo fmt src/myfile.rs</code>.
    </p>

    <p>
        But you can‚Äôt. <code>cargo fmt</code> doesn‚Äôt have an option for that. How is even possible for your format command to not let you format an individual file?
    </p>

    <p>
        So I went to Google. I found a <a href="https://github.com/rust-lang/rustfmt/issues/4485">GitHub issue</a> where one of the devs said ‚ÄúYou‚Äôre supposed to use <code>rustfmt</code>, not <code>cargo fmt</code>. Obviously these are very different tools and <code>cargo fmt</code> is not intended to be used in that way.‚Äù Problem is, I had never even heard of <code>rustfmt</code>. There is no indication that <code>cargo fmt</code> is merely a wrapper around <code>rustfmt</code>, much less that <code>rustfmt</code> would have <em>extra</em> options that the high-level wrapper does not have.
    </p>

    <p>
        Responses like this from devs are just maddening. Their tooling gives no indication of the ‚Äúcorrect‚Äù thing to do, and rather than change their tooling to help users out, they act as if users are already supposed to know the ‚Äúcorrect‚Äù thing.
    </p>

    <p>
        But fine. I can use <code>rustfmt</code>. So I ran <code>rustfmt src/myfile.rs</code>. It worked, but didn‚Äôt wrap comments. Ok fine, maybe it just doesn‚Äôt do that by default. So I went to Google again, and I found the official <code>rustfmt</code> documentation and the <code>wrap_comments</code> property. Great!
    </p>

    <p>
        I created a <code>.rustfmt.toml</code> file and added <code>wrap_comments = true</code>. Time to give it another go:
    </p>

    <pre><code><span><span>% rustfmt crates/wast/src/core/expr.rs
</span></span><span><span>Warning: can&#39;t set `wrap_comments = true`, unstable features are only available in nightly channel.</span></span></code></pre>

    <p>
        ‚ÄúUnstable features‚Äù???? How is wrapping text an unstable feature <em>in a code formatter?</em> What would it possibly take to ‚Äústabilize‚Äù such a feature? It is a completely trivial feature!
    </p>

    <p>
        But fine. I had nightly Rust installed, and I saw that the docs say you can include <code>unstable_features = true</code> to opt into unstable features. So I updated the config file and tried again:
    </p>

    <pre><code><span><span>% rustfmt crates/wast/src/core/expr.rs
</span></span><span><span>Warning: can&#39;t set `wrap_comments = true`, unstable features are only available in nightly channel.
</span></span><span><span>Warning: can&#39;t set `unstable_features = true`, unstable features are only available in nightly channel.</span></span></code></pre>

    <p>
        At this point I was just hopping mad. It <em>knew</em> that I wanted to wrap comments. But it refused, because this was ‚Äúunstable‚Äù. It knew that I wanted to opt into experimental features, but refused again.
    </p>

    <p>
        It would literally have been better if they had not shipped this <code>wrap_comments</code> feature at all. Instead they just keep dangling it in front of my face and snatching it away as soon as I try to use it. Because they hate me.
    </p>

    

    <p>
        I‚Äôm not done with Rust just yet.
    </p>

    <p>
        I recently tried updating one of my cargo dependencies (<code>wast</code>) to use my own fork for testing. Running <code>cargo vendor</code> after updating suddenly gave me this error:
    </p>

    <pre><code><span><span>error: failed to sync
</span></span><span><span>Caused by:
</span></span><span><span>  found duplicate version of package wasm-encoder v0.31.0&#39; vendored from two sources:
</span></span><span><span>
</span></span><span><span>        source 1: registry &#39;crates-io&#39;
</span></span><span><span>        source 2: https://github.com/bvisness/wasm-tools.git?rev=128f3a4#128f3a47
</span></span><span><span> 0:25.74 E Cargo vendor failed.</span></span></code></pre>

    <p>
        This was‚Ä¶weird. Why would there be a conflict? I just changed one dependency to my fork, and some other package started complaining.
    </p>

    <p>
        So I Googled it. I found a <a href="https://github.com/NixOS/nixpkgs/issues/30742">GitHub issue</a> that described the same problem, and someone said that there was a <code>--no-merge-sources</code> flag that fixed the issue. Sounded good, so I gave it a try:
    </p>

    <pre><code><span><span>error: the crates.io &#39;cargo vendor&#39; command has now been merged into Cargo itself
</span></span><span><span>and does not support the flag &#39;--no-merge-sources&#39; currently; to continue using the flag you
</span></span><span><span>can execute &#39;cargo-vendor vendor ...&#39; and if you would like to see this flag
</span></span><span><span>supported in Cargo itself please feel free to file an issue at
</span></span><span><span>https://github.com/rust-lang/cargo/issues/new</span></span></code></pre>

    <p>
        I was <em>stunned</em>. They deprecated a tool, deleted a flag, and <em>kept documentation for the flag</em> that just says ‚Äúyeah, we got rid of it, make a GitHub issue if you actually wanted that feature :)‚Äù
    </p>

    <p>
        But ok‚Ä¶they gave me a workaround. So I tried with <code>cargo-vendor</code>. And it <em>absolutely exploded</em>.
    </p>

    <p>
        Not only did <code>cargo-vendor --no-merge-sources</code> fail with a ton of errors, but it dumped a bunch of extra files into my project that were clearly wrong somehow. Evidently you‚Äôre not actually supposed to use <code>cargo-vendor</code> any more, period. I found another GitHub comment that corroborated this.
    </p>

    <p>
        So let‚Äôs summarize what happened here:
    </p>

    <ul>
        <li>The tooling gave me an opaque error with no context to help me understand.</li>
        <li>The flag that could fix it was removed by the devs and replaced with a passive-aggressive message and a workaround.</li>
        <li>The workaround <em>didn‚Äôt work</em> and blew up my project even more.</li>
    </ul>

    <p>
        So where was this supposed to leave me? What was I supposed to use? Yet again, the devs understood my intent (they recognized the old flag!) but they refused to actually do what I wanted to do.
    </p>

    <p>
        Nor did they give me any guidance on how to actually solve my problem. It turned out that there was another actual root cause for my problem, and fixing that was arguably more reasonable than using <code>--no-merge-sources</code>. But they provided nothing that would actually help me understand the problem. And the features they provided were literally worse than nothing - they extended me a helping hand, and then snatched it away. Because they hate me.
    </p>

    

    <p>
        In all three of these situations, the devs knew what I wanted to do, but refused to let me do it. This feels TERRIBLE as a user. It feels insulting and condescending. It feels like it‚Äôs deliberately withholding useful features, like it doesn‚Äôt trust me to use them correctly. It sucks.
    </p>

    <p>
        And as a dev, it just makes you look lazy. People will understand if you don‚Äôt support a feature - maybe it was replaced by something better, or maybe it‚Äôs easier for the user to fix their root problem. But if you ‚Äúsupport‚Äù the feature by telling the user ‚Äúno‚Äù, then why did you even bother ‚Äúsupporting‚Äù it?
    </p>

    <p>
        So don‚Äôt do that. Either support the feature, guide the user toward a better solution, or do nothing.
    </p>

    </article>
  
      </div></div>
  </body>
</html>
