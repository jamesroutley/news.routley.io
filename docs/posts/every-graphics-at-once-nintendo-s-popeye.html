<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://nicole.express/2023/yes-popeye-the-sailor-man.html">Original</a>
    <h1>Every Graphics at Once: Nintendo&#39;s Popeye</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>I’ve made some <a href="https://nicole-express.itch.io/space-ava">modern</a> <a href="https://nicole-express.itch.io/aspect-legend">games</a> <a href="https://nicole-express.itch.io/magisc-pong">in</a> <a href="https://nicole-express.itch.io/aspect-star-2">retro</a> <a href="https://nicole-express.itch.io/happy-train">style</a>, and one thing people will always tell you is, make sure your pixels are the same size. When your base resolution is 1080p, it’s pretty easy to accidentally include sprites scaled differently or at different resolutions; and most retro systems like the NES and Genesis only had one possible pixel size. But all rules are made to be broken– Nintendo brought out a system with <em>three</em> pixel sizes. Powered by spinach.</p>

<h2 id="a-brief-history-of-graphics">A brief history of graphics</h2>

<p>The very first arcade game with a CPU was Midway’s 1975 port of <em>Gun Fight</em>. (Oddly, the Taito original was a discrete-logic game) It used a simple 260x224 resolution, with each bit in video ram corresponding with a pixel on screen. This is often called a <strong>framebuffer</strong>.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/gun.png" title="easy to win when you only have one player" alt="A screenshot of Gun Fight, a monochrome game"/></p>

<p>That was fine for what it was, but suffered from a major flaw: it used a lot of RAM, in an era where RAM was very expensive. 7.1kiB was barely achievable at arcade prices– notice that the 1983 Famicom would have less than that in total, whereas for the Midway 8080 (also used by the megahit <em>Space Invaders</em>) that was only the video RAM, and additional memory was needed for the game state.</p>

<p>And remember, that’s all one bit per pixel, no room for color. Maybe <a href="https://nicole.express/2022/games-made-in-a-cave.html">eventually</a> RAM prices would be cheap enough to have a true framebuffer system, but the realities of 1970’s finances would require other solutions. (Or extremely low resolutions, like the <a href="https://nicole.express/2021/the-most-unfair-child.html">Channel F</a>)</p>

<p>The oldest form of digital graphics may very well be “text mode”, used in early screen terminals. The screen is divided into a grid of identically-sized rectangles, each of which has what’s usually a monochrome image. This dramatically reduces the amount of RAM needed; in the IBM PC text mode, a fairly typical example, each character can have different foreground and background colors. Games like <em>ZZT</em> can actually be very colorful.</p>

<p><img src="https://nicole.express/assets/img/fxtreme/zzt.jpg" title="nicole you got the wrong system card" alt="A screenshot of ZZT, a game running in VGA text mode"/></p>

<p>Now, it’s interesting that this is called “text mode”, when in 2023, most of the time we read text on the computer, it’s in a variable-width font. Text mode, remember, is fixed-width; on the other hand, as the PC example shows, the tiles can be anything, not just letters. So this is actually very useful for video games.</p>

<p>In video games, this is often called a <strong>tilemap</strong> rather than text mode, and the tiles can often be multiple colors. In arcade games, or in the Nintendo Entertainment System, they’re often stored in ROMs, just like a text-only graphics card might have its font in ROM.</p>

<p>This is a screenshot from the <a href="https://nicole.express/2019/making-of-aspect-star-n-coding.html">development</a> of <a href="https://nicole-express.itch.io/aspect-star-n"><i>Aspect Star “N”</i></a>. Everything you see on this screen is a tile; it’s bright and colorful, and higher-resolution than Midway’s 1977 system (which used <em>more</em> RAM). It’s also random, but that’s just because this happens to be a screenshot of a glitch.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/aspect-11.png" title="don&#39;t talk about attribute tables" alt="A screenshot of tiles"/></p>

<p>The limitation of tilemaps is that each tile has to be moved as a whole. This is fine in some cases, like the enemies in the NES port of <em>Gauntlet</em>’s, but if you play this game it’s very clear that they’re fixed to a grid. (Note that the NES, like many systems, features the ability to scroll the tilemap, so the corner of the screen doesn’t necessarily correspond to the corner of a tile)</p>

<p><img src="https://nicole.express/assets/img/nes/gaunt.jpg" title="Nicole shot the food, probably" alt="Gauntlet gameplay. Dungeon with lots of enemies"/></p>

<p>But in <em>Gauntlet</em> you’re not fixed to a grid. And that’s because the NES doesn’t just have a tilemap– it also has <strong>sprites</strong>. Sprites bridge the gap between tile mode and framebuffers– they are a set of fixed graphics that can be positioned freely on screen, subject to various system-dependent hardware limitations. In <em>Aspect Star “N”</em>, all of the enemies, the player, the bullets, and even some of the bugs are all sprites.</p>

<p><img src="https://nicole.express/assets/img/aspect/four-enemies.png" title="MissingNo the Mouse!" alt="An early development screen of Aspect Star N showing an unexpected fourth enemy"/></p>

<p>The combination of a tilemap with sprites in the arcades is usually attributed to Namco’s 1979 <em>Galaxian</em>, and in home systems with the TI TMS9918, which also debuted in the 1979 TI-99/4. Hardware like this quickly became the standard for 2D video games of the 1980’s and beyond because of its flexibility. Today’s game is no exception. Except when it is.</p>

<h2 id="nintendos-popeye">Nintendo’s <em>Popeye</em></h2>

<p>Sometimes, media from one country is very popular in another country, even moreso than its country of origin. That’s the case with King Features Syndicate’s comic character <em>Popeye</em>. As an American, I mostly remember it as an old children’s cartoon with an exceedingly catchy theme song. It doesn’t seem to be as popular today even as much as when I was a kid, I’m not sure if young people would recognize him at all. Even in my generation, I think a lot of people would be surprised to find the <a href="https://comicskingdom.com/popeye/2023-02-19">Sunday comic</a> is still ongoing.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/title.png" title="toot toot" alt="Popeye title screen"/></p>

<p>In Japan, on the other hand, Popeye was so popular that he lent his name to a <a href="https://www.instagram.com/popeye_magazine_official/">pop magazine</a> and his franchise is one of the highest-grossing <a href="https://nicole.express/2023/pachi-man-pachi-man-does-whatever-a-pachi-can.html">pachinko</a> machines. This is all on-going too, but it was also true– or even more so– in the early 1980’s.</p>

<p>Why did Popeye scratch the Japanese psyche? Was it a product of the post-war occupation of the country by the United States? Actually, it seems to predate the war– perhaps the everyman sailor just scratched the heart of the island nation regardless. In any case, Popeye the Sailor Man: he yam what he yam, he’s big in Japan, and Nintendo wanted his license. For Game &amp; Watch, and arcade.</p>



<p>Now, you might notice something about the screenshot I posted: It looks great. No way that’s a 240p image, right? Well, right. Popeye runs on a normal 15kHz arcade monitor, though. So how are they doing it?</p>

<p><img src="https://nicole.express/assets/img/inter&amp;lace/why-interlace.png" title="capitalism scan?" alt="Successive lines being scanned on a television, then the next field offsets"/></p>

<p>Oh right, <a href="https://nicole.express/2021/interlace-me-not.html">interlacing</a>. But still, this resolution in 1982 is nothing to sneeze at. Let’s see what tradeoffs they made.</p>

<h2 id="three-levels">Three levels</h2>

<p>The title screen is one thing. But here’s the first level of <em>Popeye</em>. A close look at this screen should start to show how this game works.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/catch.png" title="in a very confused timeline, this is pauline encouraging mario to catch hearts while donkey kong gets mad" alt="Popeye start of first level. Olive Oyl encourages Popeye to catch hearts. Bluto/Brutus isn&#39;t pleased."/></p>

<h3 id="tilemap">Tilemap</h3>

<p>The very top level is the <strong>tilemap</strong>. MAME happens to have a nice debug mode for this, since tilemaps are so common. In <em>Popeye</em>, though, the tilemap is pretty sparse, used for some scenery and the HUD mostly. Like any tilemap of the era, it’s made up of 8x8 tiles stored in ROM.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/tilemap.png" title="popeye olive" alt="Popeye tilemap."/></p>

<p>By the way, in case you were wondering, here’s what the title screen tilemap looks like.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/tilemap2.png" title="popeye what have they done to you" alt="Popeye tilemap for titlescreen. Parts of his face and the copyright year are visible, the rest is blacked out."/></p>

<p>What’s interesting here is that the tilemap is not actually interlaced. Well, it is to a degree, since the whole image will still be shifted, but it has no difference between frames. This is the same style and resolution of tilemap you’d see in, say, <em>Donkey Kong</em>. It might as well be 240p.</p>

<h3 id="sprite">Sprite</h3>

<p>Up next is the sprite layer. As you can guess, this is where we have the nice, detailed, interlacing. And as far as I can tell, the sprite layer is <em>always</em> drawn behind the tilemap layer. As a fixed tilemap always on top, this basically means the <em>Popeye</em> hardware is the same thing as the Neo Geo.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/overlap.png" title="look at those pixels" alt="Popeye behind the THRU sign, which is on the tilemap"/></p>



<p>While <em>Popeye</em>’s sprites are higher resolution than those in <em>Donkey Kong</em> or <em>Galaxian</em>, they’re actually more limited. For one thing, they have no clipping. Transparent pixels aren’t transparent to other sprites, only to the background.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/overlap2.png" title="It was the only way to end Brutus for good-- sadly Bluto survived" alt="Popeye overlaps Brutus and a square is cut out of him"/></p>

<p>Interestingly, when the Sea Hag phases in and out of existence, the sprite phases in every other line. Were the developers inspired by the interlaced nature of the graphics?</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/seahag.png" title="proof that interlacing is a form of dark magic" alt="Every other line of the Sea Hag is drawn"/></p>

<h3 id="the-background">The background</h3>

<p>The background is one of the more interesting elements, as I don’t think this sort of thing is seen very often in arcade games. Here’s an attempt I made to recreate the above scene, with only the background.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/bg.png" title="13 colors!" alt="The background layer, showing blocky houses and floors"/></p>

<p>The background layer is a 128x128 grid that is freely addressable in RAM. <a href="https://github.com/mamedev/mame/blob/master/src/mame/nintendo/popeye_v.cpp">Looking at the MAME source</a>, 4 bits are attributed to each pixel on screen, which would imply 8kiB of RAM. This is a framebuffer! And the flexibility of the framebuffer approach allows for some very nice variety between levels.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/city.png" title="in the big city" alt="The second level, with music notes and buildings"/></p>

<p>The tradeoff, though, is pretty clear: a 128x128 grid expanded to the full resolution of the screen means that the pixels are huge. This is the sort of thing I notice even playing the game in the arcade, or on my little trinitron PVM.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/trinitron.JPEG" title="the sprites look better in person, as with all interlaced things" alt="Popeye on a trinitron. The level is very blocky"/></p>

<p>And there we have it. <em>Popeye</em> does it all, a tilemap, sprites, and a framebuffer; plus, it does each at a different resolution with a different pixel size. How often do you see that?</p>

<h2 id="do-you-even-have-a-board">Do you even have a board</h2>

<p>Trinitron image aside, one other thing you might notice about all those images: they’re screenshots, taken in MAME. Usually, I like to show off real hardware on this blog. And I do have the real thing:</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/top.JPEG" title="all the power" alt="Top of the Popeye PCB, plugged into an adapter"/></p>

<p><em>Popeye</em> is a pretty large board, consisting of two separate attached circuit boards. It uses the same pinout as <em>Donkey Kong Jr.</em>, and so I can use the same adapter, which among other things, needs to reverse the video signals and amplify the audio, making it a bit complicated.</p>

<p>That chip under the giant grey heatsink is an AY-3-8910, by the way. I’m not sure why the AY-3 needed such a giant heatsink, as I have pretty much never seen it like that. It’s the same soundchip used in the <a href="https://nicole.express/2021/stop-mocking-me.html">Apple ][ Mockingboard</a> and in MSX computers.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/bottom.JPEG" title="the inside of the boards is the bottom of chips, so makes it easily inspectable" alt="Bottom of the PCB, mostly discrete logic with some EEPROMS and RAM"/></p>

<p>The second circuitboard is labeled TPP2-01-VIDEO, so I assume that this is the video circuitry. Perhaps it’d be worth trying to pull out.</p>

<h3 id="fancy-video-signals">Fancy video signals</h3>

<p>So, why don’t I have any capture? Well, the Framemeister, my usual old reliable for video capture, doesn’t lock onto its signal <em>at all</em>.</p>



<p>The <a href="https://nicole.express/2021/gbs-is-under-control.html">GBS Control</a> does a little better, but it still struggles a lot. Much like I do while playing the game.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/gbs.jpg" title="popeye it&#39;s too late olive oyl is lost to the darkness already" alt="A glitched screen of Popeye."/></p>

<p>Actually, looking closer at this, it’s hard to tell if the errors are coming from the GBS Control, or from the VGA to HDMI adapter. In either case, I can’t get a good capture though. Let’s try the RetroTINK-5X, taking it from its living room location where it still lives plugged into the <a href="https://nicole.express/2021/active-tink-retro-laser.html">LaserActive</a>.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/5x.jpg" title="I was messing with the brightness, don&#39;t mind that" alt="A glitched screen of popeye with stats on top of it"/></p>

<p>The RetroTINK-5X still had a rough time; its deinterlacer was unable to deal with it, and I got constant motion and loss of sync throughout. Not exactly playable, but I possibly could’ve hacked together some screenshots from this.</p>

<p>What’s interesting is that the picture didn’t load at all if I wasn’t in the RetroTINK-5X’s “Triple Buffer” mode. Which goes well with the stats we see: 61.40 Hz is, by video standards, well out of the 59.94 Hz we’d expect. Let’s take a similar screenshot of a more well-behaved 480i signal, the <a href="https://nicole.express/2021/sega-sammy-atomiswave.html">Atomiswave</a>.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/atomic.jpg" title="this was in bob deinterlacing mode" alt="A not-glitched screen with different stats, described below"/></p>

<p>You can see that this is a nice 59.94Hz. Remember when I looked at the <a href="https://nicole.express/2019/battle-of-the-neslikes.html">RetroUSB AVS</a>? That ran at a clean 59.94Hz, but the NES ran a slightly fast 60.10Hz. A 0.2% speed increase that nevertheless causes some issues. <em>Popeye</em> is running 2.5% fast, and it looks like it’s also not following the spec for the number of horizontal lines. So that’s something digital upscalers aren’t equipped to deal with.</p>

<p>I’d like to show you some nice oscilloscope plots here, but I don’t actually have a good enough oscilloscope to measure horizontal sync. I <em>can</em> at least show the differing vertical sync rates, though. Notice how quickly the two get out of sync with each other.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/osc.png" title="yep, those sure are lines" alt="A plot of two signals. One is faster than the other"/></p>



<h2 id="who-made-popeye">Who made <em>Popeye</em></h2>

<p>When I talked about the <a href="https://nicole.express/2022/future-spy-but-its-now-the-future.html">Sega <em>Zaxxon</em> hardware</a>, I noted that initially, Nintendo didn’t actually design their own arcade hardware. 1981’s <em>Donkey Kong</em> was made under contract by Ikegami Tsushinki, with Nintendo’s staff handling game design and Ikegami providing the programmers and boards.</p>

<p>Nintendo decided to manufacture their own boards from Ikegami’s design for later <em>Donkey Kong</em> releases, and cloned it wholesale for 1982’s sequel, <em>Donkey Kong Jr.</em> Ikegami didn’t take this well, and that’s likely one of the reasons why we ended up with Sega’s isometric <em>Congo Bongo</em>, another brainchild of Ikegami.</p>

<p><img src="https://nicole.express/assets/img/zaxxy/congo.png" title="as penance for stealing nintendo&#39;s game design, sega agreed to make the sg-1000 version really bad-- at least i assume they did, why else would it be that bad" alt="Congo Bongo gameplay. An explorer climbs a mountain to get back at an ape on the top of the screen"/></p>

<p>In any case, Nintendo from then on started developing their own arcade hardware; early 1984’s <em>Punch-Out!!</em> was, as far as I know, an in-house affair. (Or at least, they got a more ironclad contract than with Ikegami) It didn’t run in interlaced mode, but did have two screens and huge sprites with scaling, so their hardware team were no slouches.</p>

<p><strong>UPDATE 2/27/2023</strong>: <a href="https://www.twitch.tv/RachelRetro">RachelRetro</a> let me know that in fact, the arcade version of <em>Punch-Out!!</em> seems to use interlaced mode. The current version of MAME does not have this implemented, but there is a <a href="https://mametesters.org/view.php?id=5739">bug report</a>. The plot thickens?</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/punchout.png" title="hardware limitations mean that nothing like this could ever work on the NES, i assume without checking" alt="Punch-Out arcade, showing a scaled sprite punching me in the face"/></p>

<p><em>Popeye</em> came out in November 1982, four months after <em>Donkey Kong Jr.</em>, so you might assume that it was a starter work for Nintendo’s new hardware team. But there’s a problem. A problem by the name of Mr. You.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/you.png" title="this game is 100% classic nintendo jank and i love it. yes name your character mr. you that&#39;s wonderful" alt="Sky Skipper title screen"/></p>

<p>At the same time <em>Donkey Kong</em> was in development, Nintendo released another game with featuring a villainous gorilla: <em>Sky Skipper</em>. This game flopped incredibly hard on release testing. Nintendo wasn’t the hit-after-hit studio we know and love today.</p>

<p>Now, I don’t actually know if Ikegami Tsushinki did <em>Sky Skipper</em>. As we saw with <em>Donkey Kong</em> and <em>Zaxxon</em>, they often included little clues in their ROMs to show they made it, and I couldn’t find any text or images in <em>Sky Skipper</em> of that sort. <a href="https://en.wikipedia.org/wiki/Ikegami_Tsushinki">Wikipedia</a> credits them with it, based off of a book I don’t have. But one thing’s for sure, the hardware in <em>Popeye</em> is a direct derivative of the hardware used in <em>Sky Skipper</em>. In fact, it makes a lot more sense here.</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/flying.png" title="Popeye does a much better job of hiding the low resolution backgrounds" alt="Sky Skipper gameplay, scrolling around large blocky areas"/></p>

<p>The low resolution backgrounds have hardware scrolling capability because they are, in fact, scrolling. They didn’t just develop that for Brutus/Bluto (he has two names, for Complex Historical Reasons) hitting the side of the screen. And you can see all three layers.</p>

<p>I would argue <em>Popeye</em> looks a lot better, though, with the clever use of tiles to cover up the pixelatedness of the background. Of course, it’s easier to do tricks like that on a single-screen game that rarely scrolls– remember, the scrolling only applies to the background layer.</p>

<h2 id="toot-toot">Toot toot</h2>

<p>A long blog post! And to be honest, I didn’t even say anything about the gameplay. It’s an interesting concept, a hero who can’t jump, and one major enemy who very much can jump, and breaks the rules of platform games. Honestly, though, it’s not as fun as <em>Donkey Kong</em>– had King Features Syndicate been willing to sign the license agreement earlier, they would’ve got the better game. But it’s still fun, and seems to be a staple of retro game arcades even today– despite being hard to upscale on an LCD.</p>

<p>In any case, see you next time– and until then, may all your tilemaps be full of stars!</p>

<p><img src="https://nicole.express/assets/img/bigpopeye/stars.png" title="my god, it&#39;s full of stars - dave bowman on playing sky skipper" alt="Sky Skipper gameplay, the tilemap is full of stars"/></p>

  </div>

  
</article>

      </div>
    </div></div>
  </body>
</html>
