<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://manapool.com/">Original</a>
    <h1>Show HN: Mana Pool – Market for Magic Cards</h1>
    
    <div id="readability-page-1" class="page"><section id="A-Joy-to-Work-With">

<p>Today, I’ve been playing <a href="https://en.wikipedia.org/wiki/Joy_(programming_language%29">Joy</a>, a purely functional concatenative programming language.<label for="fn1"></label><span><span>Thanks to Shae for reminding me of Joy, and for suggesting that it might be useful for systems programming.</span></span></p>
<p>Everything in Joy is a function that takes a stack and returns a stack.</p>
<p>Hello world looks like this<label for="fn2"></label><span><span>Sourced from <a href="https://en.wikibooks.org/wiki/Computer_Programming/Hello_world#Joy">here</a></span></span>:</p>
<pre><code>&#34;Hello, world!\n&#34; putchars .
</code></pre>
<p>Piece by piece, <code>&#34;Hello, world!\n&#34;</code> puts a literal string on the stack.
<code>putchars</code> takes a stack consisting of a single string, and prints it to the console. The <code>.</code> character tells joy to execute the sequence of functions.</p>
<section id="Command-Line-Arguments">
<h2>Command Line Arguments</h2>
<p>My interest in Joy is for short executable programs, so I wanted to know how to learn how to use command line arguments in Joy.</p>
<p>Here’s what I came up with<label for="fn3"></label><span><span>I’m using a <code>joy</code> executable compiled from <a href="https://github.com/Wodan58/Joy">here</a></span></span>:</p>
<pre><code>#!/usr/bin/env joy
argv 1 drop [&#34; &#34; concat] map [putchars] step .
</code></pre>
<p>Piece by piece:</p>
<p><code>argv</code> takes all arguments passed in with the program, including the program’s name, and returns an aggregate (here a list of strings).</p>
<p><code>1</code> is a pure function that takes a stack and adds itself to that stack.</p>
<p><code>drop</code> takes an aggregate and a number, and drops <code>number</code> of elements from the aggregate. In this case, the name of the calling program.</p>
<p><code>[&#34; &#34; concat]</code> is a quote, which allows me to pass a function unexecuted onto the stack. I believe in this case the <code>concat</code> is partially applied with <code>&#34; &#34;</code> as the second argument.</p>
<p><code>concat</code> takes two sequences and concatentates them.</p>
<p><code>map</code> takes an aggregate and a quoted function, and executes the function on each element of the aggregate, returning a stack containing a new aggregate with elements transformed by the function. Here it will take each element from our modified <code>argv</code> aggregate and concatenates them with <code>&#34; &#34;</code>.</p>
<p><code>step</code> takes an aggregate and a quoted function, and executes the function once for each element of the aggregate. In this case, I call <code>putchars</code> for each string.</p>
<p>Thus:</p>
<pre><code>$ ./hello.joy hello world
hello world 
</code></pre>
<p>I’ve been using the resources found <a href="https://hypercubed.github.io/joy/joy.html">here</a> which have been most useful at making this short program work.</p>
</section>
</section></div>
  </body>
</html>
