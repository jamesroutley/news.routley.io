<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://glitch.land/micros/rust-nll/">Original</a>
    <h1>Rust Non-Lexical Lifetimes</h1>
    
    <div id="readability-page-1" class="page"><div><p>I thought it would <strong>not</strong> compile, because <code>a</code> takes read ownership, and <code>push</code> needs read + write access. But I was wrong!</p><p>It <strong>does</strong> compile! It’s due to a Rust feature called <code>Non-Lexical Lifetimes</code> (<a href="https://blog.rust-lang.org/2022/08/05/nll-by-default/">added</a> in 2018). So along with the other rules, the borrow checker <strong>also</strong> asks: <em>“Is there any path where the borrow is used after this point?”</em> If the answer is no, the borrow ends there!</p><div><pre tabindex="0"><code data-lang="rust"><span><span><span>  </span><span>let</span><span> </span><span>mut</span><span> </span>v<span> </span><span>=</span><span> </span><span>vec!</span><span>[</span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>3</span><span>];</span><span>
</span></span></span><span><span><span>  </span><span>let</span><span> </span>a<span> </span><span>=</span><span> </span><span>&amp;</span>v<span>[</span><span>0</span><span>];</span><span>      </span><span>// immutable borrow starts
</span></span></span><span><span><span></span><span>  </span><span>println!</span><span>(</span><span>&#34;</span><span>{a}</span><span>&#34;</span><span>);</span><span>    </span><span>// last use of `a` - borrow ENDS here with NLL
</span></span></span><span><span><span></span><span>  </span>v<span>.</span>push<span>(</span><span>4</span><span>);</span><span>          </span><span>// RW mutable borrow is fine, no conflict
</span></span></span></code></pre></div><p>I hope this helps others learning Rust (its a beautiful language)</p></div></div>
  </body>
</html>
