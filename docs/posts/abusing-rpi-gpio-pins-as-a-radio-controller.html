<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.riveducha.com/raspberry-pi-gpio-send-radio-signals">Original</a>
    <h1>Abusing RPi GPIO pins as a radio controller</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><p><em>(This is part 2 of 2. <a href="https://www.riveducha.com/decode-wireless-signal-with-usb-tv-tuner">Part 1 covered using a cheap USB TV Tuner (RTL-SDR) to receive and decode the signals.</a>)</em></p><p><iframe width="640" height="360" src="https://www.youtube-nocookie.com/embed/3lGU7PjJM7k?playsinline=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p><p><strong>The basic idea: can we use a digital GPIO pin as a radio transmitter?</strong></p><p>If so, I can control my ceiling fan/light combo units with nothing but a Raspberry Pi, which would be great because I&#39;m already using a Raspberry Pi running Home Assistant to automate things in the house. (I used an SDR receiver to figure out the radio protocol in the Part 1 video.)</p><p>This project was both fun and straightforward to do, because there&#39;s a <a href="https://github.com/F5OEO/rpitx">software package called rpitx</a> that handles the hard stuff. Basically, if you push bits out fast enough using GPCLK0 then you get - ta-da! - radio waves.</p><p><img src="https://i.imgur.com/HXCHU4q.png"/></p><p>The total time from finding rpitx to being able to control my ceiling fan was probably just half an hour - it could&#39;ve been faster if I didn&#39;t mess up the &#34;sendook&#34; command a few times.</p><p>I spent a bunch of time in the video talking about harmonics and slapping on a low-pass filter from eBay. This was, in keeping in the spirit of the videos, more of an educational diversion. Since the signal is not super strong to begin with, if I keep the RPi near the center of my house, the harmonics should be hardly noticeable outside the house anyways.</p><p>(There were a couple comments that pointed out that the long wire I used in the video to connect to the low-pass filter will emit the harmonics anyways. I&#39;ll be making the wires shorter before actually putting it into use someday...)</p><p>Also, I regret not showing the actual manufacturer-provided remote control in the video. Would&#39;ve been nice to see what is being replaced.</p><p>Some people wanted to know if this is doable with an Arduino. The Arduino simply can&#39;t toggle its digital out fast enough to transmit at this frequency, so the best option is probably to get a dedicated radio transmitter like <a href="https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=p2380057.m570.l1313&amp;_nkw=cc1101+arduino&amp;_sacat=0&amp;mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338790990&amp;customid=minkaaire2&amp;toolid=10001&amp;mkevt=1">a CC1101 module</a> that the Arduino can control. I don&#39;t have any experience with the CC1101 but several comments on my videos said they were useful.</p><p>If you missed it, <a href="https://www.riveducha.com/decode-wireless-signal-with-usb-tv-tuner">Part 1 - Hacking My Ceiling Fan&#39;s Wireless Remote with a USB TV Tuner</a> has the fun parts of decoding the radio signals and, IMHO, was rather more fun and interesting, if not as impressive.</p><h3>Raspberry Pi compatibility</h3><p>As of March 2021, the <a href="https://github.com/F5OEO/rpitx#hardware">rpitx Github README says</a> that Pi B+ compatibility is &#34;Partial&#34; and Pi 4 compatibility is in &#34;beta&#34;. To be honest, I don&#39;t know what that means and haven&#39;t tried it with anything other than a Pi 3b. YMMV.</p><h3>A note about selecting a low-pass filter</h3><p>Low-pass filters are advertised with the frequency range that they start filtering out signals at - it is not a sharp cut-off where signals at e.g. 399 MHz go through 100% but 400MHz signals are gone.</p><p>With a low-pass filter advertised as 400-470 MHz, the signal starts dropping off around or before 400 MHz and should mostly be gone by 470 MHz. We would say that this filter has a &#34;pass band&#34; of under 400 MHz, a &#34;transition band&#34; of 400-470 MHz, and a &#34;stop band&#34; of 470 MHz and higher.</p><p>There are, of course, other types of filters: high-pass filters and <a href="https://en.wikipedia.org/wiki/Band-pass_filter">band-pass filters</a>.</p><h3>Antennas and connectors</h3><p>The antenna shown in the video is a cheap antenna advertised as for 315 MHz. The antenna, filter, and connector on the other end of the filter are all SMA connectors. Note that SMA is <strong>not</strong> compatible with RP-SMA connectors that a lot of consumer wireless gear has. <a href="https://en.wikipedia.org/wiki/SMA_connector">Wikipedia explains the difference.</a></p><h3>Mentions</h3><p>Electromaker on YouTube: <a href="https://youtu.be/TDF12MVMOfM?t=1161">https://youtu.be/TDF12MVMOfM?t=1161</a></p><p>Hackster.io: <a href="https://www.hackster.io/news/river-s-educational-channel-controls-an-rf-fan-and-light-by-abusing-the-raspberry-pi-s-gpio-pins-910b452573e5">https://www.hackster.io/news/river-s-educational-channel-controls-an-rf-fan-and-light-by-abusing-the-raspberry-pi-s-gpio-pins-910b452573e5</a></p><p>RTL-SDR.com: <a href="https://www.rtl-sdr.com/controlling-a-wireless-ceiling-fan-with-an-rtl-sdr-and-rpitx-on-a-raspberry-pi/">https://www.rtl-sdr.com/controlling-a-wireless-ceiling-fan-with-an-rtl-sdr-and-rpitx-on-a-raspberry-pi/</a></p><p>Tom&#39;s Hardware: <a href="https://www.tomshardware.com/news/raspberry-pi-radio-wave-fan-controller">https://www.tomshardware.com/news/raspberry-pi-radio-wave-fan-controller</a></p></div></div></div></div>
  </body>
</html>
