<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blogit.michelin.io/clojure-programming/">Original</a>
    <h1>Bringing Clojure programming to Enterprise (2021)</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
    <div>

        <article>

            

            <figure>
                <img srcset="https://blogit.azureedge.net/images/2021/11/31736_lisp.jpg 300w,
                            https://blogit.azureedge.net/images/2021/11/31736_lisp.jpg 600w,
                            https://blogit.azureedge.net/images/2021/11/31736_lisp.jpg 1000w,
                            https://blogit.azureedge.net/images/2021/11/31736_lisp.jpg 2000w" sizes="(max-width: 800px) 400px,
                        (max-width: 1170px) 1170px,
                            2000px" src="https://blogit.azureedge.net/images/2021/11/31736_lisp.jpg" alt="Bringing Clojure programming to Enterprise"/>
            </figure>

            <section>
                <div>
                    <!--kg-card-begin: markdown--><p>I recently had to design a new reference data system for the manufacturing domain. During the initial design stages we brought up the idea of using the Clojure programming language. Even if at first I was skeptical on deviating from the standard development stack, I gradually realized the value of taking advantage of the multpile opportunities offered by this language.</p>
<p>This blog post is a high level take on the use of the Clojure programming language and its introduction into my development stack. I will present here the points that guided the decision to use it over more conventional languages like Java.</p>
<h2 id="firstwhatisclojure">First, What-is Clojure ?</h2>
<p>Clojure is a dynamic functional programming language that runs on the Java Virtual Machine and which is a member of the Lisp family ( yes you heard it right, the very old one )</p>
<p>
  <img src="https://clojuredocs.org/img/lisp_cycles.png"/>
</p>
<p>As a result, Clojure not only benefits all the well-known advantages of functional programming languages such as immutable data structures ( which I will not describe in this article ) but it also provides all the advantages related to its Lisp nature, such as code-as-data semantic.</p>
<p>In addition, the Clojure ecosystem provides a wide range of powerfull libraries and tools for manipulating data which makes it very convenient for prototyping complex data validation and transformation programs.</p>
<p>Clojure language is not a newcomer, it was created in 2007, but has been considered for many years as a &#34;hobbyist&#34; language used in very specific cases only, although it was intially designed with the objective of being multi-purpose and stable for business usage.</p>
<p>However reports tend to show a significant increase in the use of Clojure in enterprise in the recent years. I can mention the fact ThoughtWorks radar passed Clojure language to &#34;adopted&#34; since 2014, meaning Clojure position is an enterprise ready technology for quite a long time.</p>
<p>
  <img src="https://clojure.org/images/content/news/2020-02-20/use.png"/>
</p>
<h2 id="sowhydidigoforclojure">So why did I go for Clojure ?</h2>
<p>A first element of decision lied in the fact that our product used a great number of data structures and business management rules which aim to evolve very frequently and be adapted to new business contexts over time.</p>
<p>So the idea came to use text descriptors a.k.a DSL ( Domain Specific Language ) to specify business logic instead of &#34;hard-coded&#34; pieces of code.</p>
<p>On the other hand, I had to evaluate the complexity of some business-cases and demonstrate feasibility in the early stages of development. The Clojure-toolbox provided ways to ease data exploration, and allowed us to develop prototypes in a very short time while the use of alternative languages would have required a lot of boilerplate code.</p>
<h3 id="codeasdata">Code as Data</h3>
<p>The very first advantage of Clojure was bought by its nature of Lisp. Clojure uses a superset of <a href="https://github.com/edn-format/edn">EDN</a> (Extensible Notation Format) which allows code declaration in a readfullness notation format.</p>
<pre><code> (defn person-name
   [person]
   {:pre [(s/valid? :acct/person person)]
    :post [(s/valid? string? %)]}
   (str (:acct/first-name person) &#34; &#34; (:acct/last-name person)))
</code></pre>
<p>Thus, Clojure is well suited to creating rich DSLs that integrate seamlessly into the language. You may have heard Lisps boasting about code being data and data being code.</p>
<blockquote>
<p>Many of the features of Lisp have made it into other languages, but Lisp&#39;s approach to code-as-data and its macro system still set it apart.</p>
</blockquote>
<p>The software product I was working on required to implement a lighweight language to express business logic in a declarative way, like a rules-engine. This use-case has been achieved using a single Clojure variable.</p>
<pre><code>(def business-logic
   [:ruleset-group
    [:ruleset1 
     [:when [:condition1][:condition2]] 
     [:then [:and [:action1][:action2][:action3]]]
    [:ruleset2
     [:when [:condition3] [:or [:condition4][:condition5]]]
     [:then [:and [:action4][:action5][:action6]]]]]])
</code></pre>
<p>The ambition here was just to use a simple and concise data structures that can be easilly modified by non-developers and persisted in database. But Clojure provides features to implement way more complex DSLs using its macros system.</p>
<h3 id="replreadevalprintloop">REPL (Read Eval Print Loop)</h3>
<p>Another key feature that made me go for Clojure is its REPL environment (standing for Read-Eval-Print Loop) which enables the programmer to interact with a running program and modify it, by evaluating one code expression at a time.</p>
<p>REPL is a secret weapon for Lisp programmers and it is a tool that enables you to interactively contact with the program you write and evolve it rapidly. Discourses of REPL Driven Development never end in Clojure community and it has become quite popular. The reason for this is that you can productively and quickly write your code. The progresses such as finding a bug or adding/removing a feature can be easily carried out through quick feedbacks.</p>
<p>
  <img src="https://clojure.org/images/content/guides/repl/show-editor-repl.gif"/>
</p>
<p>The ability to develop and test quickly in an iterative approach helped a lot during the initial exploration phase. Developers had the possibility to instantly experiment new code snippets during workshop sessions, and therefore to incredibly increase efficiency. As the Clojure docs says very well :</p>
<blockquote>
<p>Many Clojure programmers consider the REPL, and the tight feedback loop it provides, to be the most compelling reason to use Clojure. This does not mean that the language features of Clojure, such as immutable data structures, are not valuable: the Clojure REPL gets most of its leverage because of these features, in particular because Clojure was designed with interactive development in mind.</p>
</blockquote>
<p>In addition, the integration of REPL in IDEs plugins such as <a href="https://cursive-ide.com">cursive</a> or <a href="https://calva.io/">calva</a> pushes this interactivity a step further, and allows on-demand execution of small portions of code or even single expressions.</p>
<h3 id="javainteroperability">Java Interoperability</h3>
<p>As it was written on the JVM, Clojure gives access to all available Java libraries and their frameworks. So you can call Java code from Clojure code, or vice versa.</p>
<p>
  <img src="https://clojure.org/images/content/guides/learn/syntax/clojure-evaluation.png"/>
</p>
<p>In my context this was a huge advantage, as it helped to integrate seamlessly Clojure with our standard development stack: Java/SpringBoot.</p>
<p>Nevertheless, despite the fact that the <a href="https://clojure.org/reference/java_interop">interop</a> feature reduced the difficulty for us to on-board the Clojure world, a crucial decision to be made was the depth of use.</p>
<p>Several options were put on the table, knowing that the more complex features were used, the more the required level of experience grew. The challenge for me was therefore to find a good balance between short-term productivity, and mid-term risks around the management of the skill matrix of our development team.</p>
<p>
  <img src="https://blogit.azureedge.net/images/2021/10/25947_clojure-depth-of-use-2.png" width="600"/>
</p>
<p>I finally decided to learn by walking, by first limiting use-cases to prototyping purposes, and then gradually integrating functions and modules into our product code.</p>
<p>In this way, we added with success several features directly taking advantage of code-as-data sematic and REPL, while limiting the overall complexity of our technical solution. Moreover this allowed the dev team to improve their knowledge of the Clojure programming language over time.</p>
<h3 id="otherbenefitstoconsider">Other benefits to consider</h3>
<p>See below a list of extra features that I considered for the future steps.</p>
<ul>
<li>
<p><strong>Macro system</strong>: allows the compiler to be extended by user code. Macros can be used to define syntactic constructs which would require primitives or built-in support in other languages. It fits well our custom DSL engine writing challenge.</p>
</li>
<li>
<p><strong>ClojureScript</strong>: ClojureScript is a compiler for clojure that targets JavaScript. It generates code that can be executed on browser side. Thus, it allows to reduce the technological frontier between frontend and backend</p>
</li>
<li>
<p><strong>Data-friendly Libraries</strong>: Clojure ecosystem provides a wide range of libraires such as <a href="https://clojure.org/guides/spec">ClojureSpec</a>, <a href="https://github.com/plumatic/schema">Schema</a> or <a href="https://github.com/metosin/malli">Malli</a> that would be interesting in our context.</p>
</li>
</ul>
<h2 id="learningcurve">Learning-Curve</h2>
<p>When deciding how deep to go with Clojure, it is important to take staffing into consideration. Clojure&#39;s functional and data-oriented approach is antagonistic to a lot of more traditional programming wisdom. For teams with experience in object-oriented development only, the learning curve can be steep. The number of experienced Clojure developers on the market also is relatively small.</p>
<p>It will therefore be better to consider a very progressive rampup on this technology in order to gradually leverage the nice features listed above, one after another.</p>
<blockquote>
<p>The man who removes a mountain begins by carrying away small stones.</p>
</blockquote>
<p>In my personal case, this method turned out to be worth-it because it allowed my team to be effective from the very first moments of project lifecycle, and then to deepen technical use cases as they went along.</p>
<p>To date, I&#39;m constantly re-evaluating the opportunities for exploiting Clojure in other parts of my software architecture, while taking care to improve and maintain a high level of competence in my development team.</p>
<h2 id="conclusion">Conclusion</h2>
<p>To summarize, here is a synthesis of arguments that made Clojure a go-to option.</p>
<ul>
<li>It is a functional language, convenient to handle data and transformations.</li>
<li>It is a LISP, well suited to write DSL by nature.</li>
<li>It provides REPL for short-loop developement and testing.</li>
<li>It has lots of powerfull data-driven schema libraries.</li>
<li>It provides java interop to integrate seamlessly in enterprise standards.</li>
</ul>
<p>That being said, one may serously considers to give it a try for new projects requiring rapid data-driven development.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://clojure.org/">https://clojure.org/</a></li>
<li><a href="http://clojure-doc.org/articles/tutorials/growing_a_dsl_with_clojure.html">http://clojure-doc.org/articles/tutorials/growing_a_dsl_with_clojure.html</a></li>
<li><a href="https://www.braveclojure.com/writing-macros/">https://www.braveclojure.com/writing-macros/</a></li>
</ul>
<!--kg-card-end: markdown-->
                </div>
                 <section>
                    
                 </section>
            </section>


            

            <section>
    <h3>Contact us</h3>
    <p>Have some feedback for us? Drop us a note</p>
        <a onclick="this.href = de(&#39;znvygb:s88sro3n.zvpuryva.pbz@rzrn.grnzf.zf&#39;)+&#39;?subject=Feedback on \&#39;Bringing Clojure programming to Enterprise\&#39;&#39;;">
            <span>Email Us</span>
        </a>
</section>

        </article>

    </div>
</div></div>
  </body>
</html>
