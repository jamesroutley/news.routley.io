<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://thelittleengineerthatcould.blogspot.com/2022/12/the-8-linux-computer.html">Original</a>
    <h1>The $8 Linux Computer</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-5465068983526337616" itemprop="description articleBody">
<p>
  Yes, you read that right... for <a href="https://pine64.com/product/128mb-ox64-sbc-available-on-december-2-2022/
    ">$8</a> you can run linux on a RISC-V computer.
  And not just a stripped down kernel without an MMU.
  No, the Ox64 comes with capable RISC-V cores.
  Heck, and not just one core, but three cores (all different.)
  Exciting times!
</p>

<p>
  <b>Caveat Emptor!</b> At the time of writing, ethernet, wifi and SD-Card are not working. It&#39;s good to realize this before jumping into this.
</p>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMR6WHmKku5veDN9XI3ZTSOw9dSsNTbCsuJ6LSSxejLaYPTO-V71zPoc_-fpF0QYx260DGx5RSEsx58z-xxsujTZLugdjAs_7uaG6YZMdHBxrGaxlx9Q-H-NYszKY7-pvv1bfxEtmH1C3HZSoVBlkm5kdangQQyXUyRGFX8ja04tWg6ZzwsNs_9DuJJA/s3114/ox64.jpeg"><img alt="" data-original-height="2084" data-original-width="3114" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiMR6WHmKku5veDN9XI3ZTSOw9dSsNTbCsuJ6LSSxejLaYPTO-V71zPoc_-fpF0QYx260DGx5RSEsx58z-xxsujTZLugdjAs_7uaG6YZMdHBxrGaxlx9Q-H-NYszKY7-pvv1bfxEtmH1C3HZSoVBlkm5kdangQQyXUyRGFX8ja04tWg6ZzwsNs_9DuJJA/s600/ox64.jpeg" width="672"/></a></p>

<p>
  It looks like a microcontroller, but behaves like a UNIX machine. Sweet, or what? 
  Getting it up and running, though, is far from trivial.
  There are so many hurdles to take!
</p>

<p>
  <b>Hurdle 1</b>: You cannot program it using USB, like you would an Arduino, ESP32, Stamp-C3 or rPi Pico.
  Nope... this needs to be programmed via the UART TX/RX pins.
  In the picture above, you can see them hooked up to GPIO14 / GPIO15 and GND.
</p>

<p>
  So, UART programming then... fine, we&#39;ll just use one of those little CH340G dongles.
  I got <a href="https://www.amazon.ca/gp/product/B07V556Q82">one</a> off Amazon, but it would not work... every time the handshake would fail in Dev Cube (<b>hurdle 2</b>).
</p>

<p>
  Luckily, <a href="https://discord.com/channels/463237927984693259/771032441971802142">some people</a> found out that you can program it with an RP2040 device, like the rPi Pico.
  I had a <a href="https://learn.adafruit.com/adafruit-kb2040">KB2040</a> from Adafruit lying around, so used that.
</p>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhouPPAyy5QKp275xjz4VaBCd191CAfVXivIQuqxSTve9OUbJwR7grqbrIPH1_GwGg6hCsev-2UL4hHoH3kECmDA-k4my1h4_Tbq_qc0I-h8xDG1U6HPCoyXmhfM0Kutb-rT3xyBM5-MwIvEEpIxzTjHyJd54uagXfUMMCpiRZLPRU-aHsJOCggKwi1Pg/s1618/kb2040.jpeg"><img alt="" data-original-height="1178" data-original-width="1618" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhouPPAyy5QKp275xjz4VaBCd191CAfVXivIQuqxSTve9OUbJwR7grqbrIPH1_GwGg6hCsev-2UL4hHoH3kECmDA-k4my1h4_Tbq_qc0I-h8xDG1U6HPCoyXmhfM0Kutb-rT3xyBM5-MwIvEEpIxzTjHyJd54uagXfUMMCpiRZLPRU-aHsJOCggKwi1Pg/s600/kb2040.jpeg" width="672"/></a></p>

<p>
  Which puts us at <b>hurdle 3</b>: How to turn a KB2040 into a serial bridge between PC and Ox64?
  Hook up GPIO-4 of the RP2040 to GPIO-15 of the Ox64. Hook up GPIO-5 of the RP2040 to GPIO-14 of the Ox64.
  Also, connect the grounds, of course.
  See below how to hook up for flashing the M0.\
</p>



<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhM9Xafi7eeiz0tNQWMUX4pULaTq4VGeupNLwmk-ox-bT6ESlBtjhC3ZxsI72G3c74a85T5lHmr96pv_wlREMl1u7Lqz2mlReGCn5AZ4Y7VXfv6UfdvutWR0wTUPW_6WRktiA_kXWlSAQ-zRkcV9620lXUIZmMTihFAKWqOllqFfIbvdVvKN_-7Uh0s7Q/s1463/wiring-kb2040-ox64.png"><img alt="" data-original-height="934" data-original-width="1463" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhM9Xafi7eeiz0tNQWMUX4pULaTq4VGeupNLwmk-ox-bT6ESlBtjhC3ZxsI72G3c74a85T5lHmr96pv_wlREMl1u7Lqz2mlReGCn5AZ4Y7VXfv6UfdvutWR0wTUPW_6WRktiA_kXWlSAQ-zRkcV9620lXUIZmMTihFAKWqOllqFfIbvdVvKN_-7Uh0s7Q/s600/wiring-kb2040-ox64.png" width="672"/></a></p>

<p>
  Then we need to load our RP2040 with <a href="https://github.com/raspberrypi/picoprobe">picoprobe</a> which we can do by holding BOOT while powering up, and feeding it the uf2 file with picoprobe.
</p>

<p>
  Ok, so now we can flash it then? Unfortunately, no, <b>hurdle 4</b>: DevCube is still not able to flash the Ox64, but we can use <a href="https://pypi.org/project/bflb-mcu-tool/">bflb-mcu-tool</a> instead.
</p>

<p>
  Ok, but with bflb-mcu-tool, we are all set! Are we? 
  Introducing <b>hurdle 5</b>: we need to modify the tool before it will work for us.
  This means stripping DTR and RTS stuff from the tool by editing the
  ~/.local/lib/python3.10/site-packages/bflb_mcu_tool/libs/bflb_interface_uart.py file.
  Here is <a href="https://gist.github.com/stolk/46228d2b7ab0ca5b0ff98a4ce3b2c6fe">my copy</a>.
</p>

<p>
  So with the Ox64 powered via MicroUSB, and the RP2040 connected to my PC using USB-C, I can finally flash something.
  For that, I took the low_load_bl808_m0.bin from the <a href="https://github.com/bouffalolab/bl808_linux">bl808 linux guide</a> and flashed it with:
  <SPAN size="2">
    </SPAN></p><pre><SPAN size="2">$ bflb-mcu-tool --chipname=bl808 --port=/dev/ttyACM2 --baudrate=2000000 --firmware=out/low_load_bl808_m0.bin
    </SPAN></pre><SPAN size="2">
  </SPAN>


<p>
  After which I now get output from my Ox64, via my KB2040 to my PC:
  <SPAN size="2">
    </SPAN></p><pre><SPAN size="2">dynamic memory init success,heap size = 156 Kbyte 
E907 start...
mtimer clk:1000000
psram clk init ok!
    </SPAN></pre><SPAN size="2">
  </SPAN>


<p>
  Ok, a modest start, but the Ox64 is talking to my PC now! Yay!
  Come back to my blog at a later time to see if I will manage to run Linux on the Ox64!
  Because as I understand it, I also need to flash something to the D0 and then flash the actual OS as well.
</p>

<p>
  <b>UPDATE:</b> Here is <a href="https://thelittleengineerthatcould.blogspot.com/2022/12/the-8-linux-computer-part-2.html">PART 2</a>.
</p>


















</div></div>
  </body>
</html>
