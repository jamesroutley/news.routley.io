<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://charles.inclouds.space/blog/birch-open-beta/">Original</a>
    <h1>Birch Log: Open Beta</h1>
    
    <div id="readability-page-1" class="page">

<h4>2022-07-29</h4>
<p>Last night I dreamt I was hit by a sandstorm. There were winds blowing so hard I had to cling to a groove in the wall not to be swept away. I tried running forward but everything was moving so fast around me. This is what development on Birch feels like.</p>
<p>I&#39;m launching Beta <code>v0.0</code>!
It&#39;s still missing some important features (*cough* integrations, forms *cough*), but I think what&#39;s there is solid.
You can try it out now! <a href="https://birch.ink">birch.ink</a></p>
<h3 id="progress-update">Progress Update</h3>
<p>What&#39;s changed since <a href="https://inclouds.space/blog/birch-mid-july/">last time</a>? Oh so much!</p>
<ul>
<li>We&#39;ve got a landing page.</li>
<li>We&#39;ve got documentation.</li>
<li>We&#39;ve got a <a href="https://forum.birch.ink/">forum</a>!</li>
<li>Â Â Â Â Â Â Â Â Â Â ... autocompletion in the editor!</li>
<li>Â Â Â Â Â Â Â Â Â Â ... nice error messages.</li>
<li>Â Â Â Â Â Â Â Â Â Â ... sandboxing with <a href="https://github.com/containers/bubblewrap">bubblewrap</a>.</li>
<li>Â Â Â Â Â Â Â Â Â Â ... &#34;Copy as Curl&#34; (easily copy a curl command to run a function).</li>
<li>Â Â Â Â Â Â Â Â Â Â ... even <a href="https://en.wikipedia.org/wiki/Blue-green_deployment">blue-green deployments</a>!</li>
</ul>
<p>What isn&#39;t there?</p>

<p>Well, there aren&#39;t quite enough operations on tables right now. It&#39;s just <code>.insert()</code>, <code>.last()</code>, and <code>.all()</code>.
No mutation, no indexing, no mapping, or filtering. That&#39;s all coming soon.</p>
<p>There&#39;s also no user-friendly way to get data <em>into</em> the system. You can hard-code functions yourself that insert the data you want, or you can <code>POST /api/run</code> Â  to call a function with some data, but you can&#39;t easily have a non-technical user give you data. What we need are <strong>first-class forms</strong>... <span>Coming Soonâ„¢!</span></p>
<p>And lastly, there&#39;s not much you can do <em>with</em> the data once it&#39;s in the system. I&#39;m talking running functions on a timer. I&#39;m talking integrations: First I&#39;ll add <code>get</code> and <code>post</code> primitives â€” sending http requests from Birch. Then an easy shortcut to email yourself. Maybe eventually... Airtable integrations? Google calendar? Salesforce...? Venmo!?</p>
<blockquote>
<p>So you&#39;re telling me there isn&#39;t an easy way to get the data into Birch and once you get it in there isn&#39;t much to do with it?</p>
</blockquote>
<p>Exactly! That&#39;s what makes me so excited â€“ there&#39;s so much to <em>build!</em></p>
<h3 id="general-thoughts">General Thoughts</h3>
<ul>
<li>Productionizing was harder than I anticipated. There were SSL issues with CloudFlare, bugs in Vite+Solid, and the usual annoyances of system administration.</li>
<li>As Birch is hosted on a single server, I can only store so much data that can fit, and I can only process as many function executions as that server can tolerate.</li>
<li>At some point I&#39;d like to move my databases to CockroachDB instead of Sqlite. This will let me load balance requests over several Birch servers and support users who want to work with BIG data.
<ul>
<li>Birch would have to automatically set up Postgres logins for each user and then permission them to the right tables. Right now, I&#39;m currently using bubblewrap to enforce data boundaries between users.</li>
</ul>
</li>
<li>Why is running tasks asynchronously still hard with Ruby/Sinatra?? Seriously? It&#39;s not clear to me how to start a process in ruby (I&#39;m using <a href="https://www.rubydoc.info/stdlib/open3/Open3.popen3">Open3</a>) and then wait until it&#39;s done <em>without</em> blocking the main thread. It&#39;s not that it can&#39;t be done â€” I&#39;m sure I could figure something out with EventMachine or by sending messages over the loopback network â€” but this is <em>absolutely trivial</em> in Go. (Or Elixir, or Javascript, kinda OCaml, maybe Python, maybe Rust)
<ul>
<li>My ruby server is only 875 lines; I might just rewrite it in a language built to handle async tasks.</li>
<li>It&#39;s nice to hit a problem that PL people love to talk about but never actually encounter while writing compilers ðŸ˜†</li>
</ul>
</li>
<li>I spent a couple days getting a billing system off the ground, but ended up shipping without one. Part of this work did make it in: a system for tracking how many function executions a user has left each month.
I think Birch is too volatile at the moment to recommend anyone use it to build serious apps. So for the time being, it only has a free tier.</li>
<li>I also set up a <a href="https://forum.birch.ink/">forum</a> for people to post questions and comments about Birch. I&#39;m hosting its server for $7 a month, and bought a <a href="https://mailpace.com/">MailPace</a> subscription for $40 a year. I really like MailPace! Their whole thing is that they monitor the latency it takes to deliver an email and keep it fast. This makes them especially good for so-called &#34;transactional&#34; email like magic-links and whatnot. This is what the forum software I&#39;m using (<a href="https://www.discourse.org/">Discourse</a>) does so I&#39;m glad people won&#39;t have to wait that extra few seconds to sign up. (I&#39;ve had speed problems in the past with MailGun and MailJet.)</li>
<li>I&#39;m using <a href="https://github.com/ai/nanoid#readme">NanoIDs</a> instead of UUIDs throughout. They&#39;re UUIDs but with a bigger alphabet, so they look smaller in the url which I love :)</li>
</ul>
<p>As always, my twitter is <a href="https://twitter.com/charlesetc">@charlesetc</a> and my email is <a href="https://charles.inclouds.space/cdn-cgi/l/email-protection#07646f66756b6274476975706f6b297f7e7d"><span data-cfemail="e0838881928c8593a08e9297888cce98999a">[emailÂ protected]</span></a>. Feel free to reach out! You can also subscribe to <a href="https://birchapp.gumroad.com/follow">Birch-specific updates</a>.</p>
<p>Thanks for reading and hope you have a great day!</p>
<p>Charles</p>
<p><a href="https://charles.inclouds.space/blog/">â†µ</a></p>


</div>
  </body>
</html>
