<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://serokell.io/blog/haskell-in-production-standard-chartered">Original</a>
    <h1>Haskell in Production: Standard Chartered</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>In this article of our <a href="https://serokell.io/blog/haskell-in-production">Haskell in Production</a> series, we interview José Pedro Magalhães from <a href="https://www.sc.com/en/">Standard Chartered</a> – a multinational bank that has over 6 million lines of code written in their own dialect of Haskell called Mu.</p>
<p>Read further to learn more about how Haskell is written at Standard Chartered, Pedro’s experience using the language, and what tips Pedro would give to academics looking to transition into a Haskell developer job.</p>
<h2 id="interview-with-jos%C3%A9-pedro-magalh%C3%A3es"><p>Interview with José Pedro Magalhães</p><div></div></h2>
<h3 id="hi-jos%C3%A9-pedro!-could-you-give-a-little-bit-of-introduction-to-yourself-and-the-work-you-do-at-standard-chartered%3F"><p>Hi José Pedro! Could you give a little bit of introduction to yourself and the work you do at Standard Chartered?</p><div></div></h3>
<p>My name is José Pedro Magalhães, but I generally go by Pedro. I’m the head of the Core Strats team at Standard Chartered Bank. Core Strats consists of over 40 developers using Haskell (well, actually Mu) as their main programming language. For most that is the only language they use, but a few also deal with C++, F#, or DevOps aspects.</p>
<p>I’ve been with Standard Chartered for over 8 years now, first in London, then in Singapore, and then back to London.</p>
<p><img src="https://blog.plover.com/files/wi/wit32wze.personal_card-Jos%C3%A9_Pedro__Magalh%C3%A3es_(1)_(1).png" alt="Personal card of the interviewee" loading="lazy"/></p>
<h3 id="where-does-standard-chartered-use-haskell%3F"><p>Where does Standard Chartered use Haskell?</p><div></div></h3>
<p>Pretty much everywhere in Financial Markets. Our core financial analytics library, Cortex, consists mostly of Mu/Haskell code (over 6.5 million lines) and forms the basis of our price and risk engine across all asset classes. It’s also pretty full-stack; we use it for everything, from server-side long-running batches handling millions of trades a day to front-end desktop graphical user interfaces.</p>
<h3 id="could-you-talk-a-bit-more-about-the-dialect-of-haskell-you%E2%80%99re-using-%E2%80%93-mu-%E2%80%93-and-the-reasons-for-its-creation%3F"><p>Could you talk a bit more about the dialect of Haskell you’re using – Mu –  and the reasons for its creation?</p><div></div></h3>
<p>Mu was created to allow us to bridge the gap from an existing C++ runtime and a proprietary Excel scripting language to a well-known, well-specified real functional language. We also wanted to be able to serialise practically all values (including functions), which GHC did not provide.</p>
<p>So we ended up with Mu, a whole-program compiler to a bytecode representation with a small runtime interpreter. We can seamlessly call C++ functions from Mu and vice-versa, and pure Mu functions can be used in Excel formulae via our Excel add-in. Mu has a strict runtime, which makes program performance easier to analyse and predict – but prevents us from just copy-pasting some Haskell libraries that rely crucially on lazy evaluation.</p>
<h3 id="what-has-been-your-experience-using-the-dialect-and-how-does-it-compare-to-writing-regular-haskell%3F"><p>What has been your experience using the dialect and how does it compare to writing regular Haskell?</p><div></div></h3>
<p>After a while you don’t really notice! Apart from the difference in operational semantics, as long as one is writing mostly vanilla Haskell you can’t tell the difference. We also have recursion disabled by default (simply because, unlike GHC, we have not optimised the compilation of recursive functions to avoid stack exhaustion) – but we actually don’t need it all too often, and we have all the usual recursive combinators (properly optimised) anyway.</p>
<h3 id="what-benefits-do-you-see-for-using-haskell-in-banking-and-fintech-areas%3F"><p>What benefits do you see for using Haskell in banking and fintech areas?</p><div></div></h3>
<p>One great advantage is static typing, which helps a lot in a large, diverse team and codebase. It’s not only software developers that use Mu at Standard Chartered; financial modellers and even some traders use it too. Purity also made it easy to integrate with Excel, which provided an avenue from something people knew (Excel) to something with many advantages (Mu).</p>
<h3 id="are-there-any-large-downsides-of-haskell-that-you%E2%80%99ve-encountered-during-your-work%3F"><p>Are there any large downsides of Haskell that you’ve encountered during your work?</p><div></div></h3>
<p>Every now and then we have to explain to the enterprise technology audience why we use a niche programming language, rather than an established giant. We also sometimes need to build libraries or APIs for integration with certain technology toolchains that are often available out-of-the-box in other programming languages. But I wouldn’t qualify either of these (or any other we’ve encountered) as a “large” downside – just minor inconveniences.</p>
<p>We do run into some issues due to the size of our codebase and our compiler not scaling well to large programs. Tooling like Hoogle, Haddock, and HLint still works well at this scale, but, as a whole-program compiler, Mu can easily take several minutes to compile a single large application. We will circumvent those problems by switching our front-end to use GHC directly – an effort that has been running for several years and that should become usable later this year.</p>
<h3 id="how-would-you-characterize-the-hiring-situation-in-haskell-currently%3F-are-you-having-any-issues-finding-qualified-candidates-for-job-positions%3F"><p>How would you characterize the hiring situation in Haskell currently? Are you having any issues finding qualified candidates for job positions?</p><div></div></h3>
<p>Not really. We’ve never hired a large (i.e. more than 10) number of developers at one single time, and the market for Haskell programmers has grown a lot in the past ten years. I never get many candidates for my roles, but I almost always get a few good candidates. And having too many candidates can be a problem too! I have heard of people worrying about how to sift through 500 applicants for a Java dev role – I never have that problem.</p>
<h3 id="does-standard-chartered-have-an-in-house-training-program-for-upskilling-haskell-developers%3F"><p>Does Standard Chartered have an in-house training program for upskilling Haskell developers?</p><div></div></h3>
<p>For training absolute beginners in Haskell we typically engage an external training partner. At the intermediate and advanced levels, we have a number of in-house resources, ranging from written materials to regularly scheduled tech talks (together with their video archives).</p>
<h3 id="what-direction-do-you-see-for-haskell-in-the-banking-%26-fintech-areas-in-the-next-10-years%3F"><p>What direction do you see for Haskell in the banking &amp; FinTech areas in the next 10 years?</p><div></div></h3>
<p>Being realistic, I think we can only expect a modest increase in the penetration of Haskell in those industries. We (as a community) have shown that you can use Haskell without fear in large industrial settings, but more mainstream programming languages have a large momentum that is hard to break through.</p>
<h3 id="is-there-any-other-language-that-you-think-could-be-better-in-this-sphere-than-haskell%3F-if-so%2C-why%3F"><p>Is there any other language that you think could be better in this sphere than Haskell? If so, why?</p><div></div></h3>
<p>No, I don’t think so – not only in this sphere but also almost any other! There are some specialised domains for which you might want to use a specialised language, but as far as general-purpose programming languages are concerned, I do not think there is currently a better option than Haskell. I do realise this is not a widely shared opinion… but it is my strong conviction.</p>
<h3 id="before-starting-work-at-standard-chartered%2C-you-were-working-as-a-postdoctoral-research-assistant-at-the-university-of-oxford.-do-you-think-your-academic-cs-experience-has-given-you-any-advantages-when-compared-to-other-haskell-developers%3F"><p>Before starting work at Standard Chartered, you were working as a postdoctoral research assistant at the University of Oxford. Do you think your academic CS experience has given you any advantages when compared to other Haskell developers?</p><div></div></h3>
<p>Yes, I think academia helped. Apart from the obvious general exposure to Haskell and functional programming, it gave me experience in communicating complex ideas to a larger audience, both in written and spoken form. This is an extremely important skill to have.</p>
<h3 id="what-tips-would-you-give-to-people-from-academia-that-want-to-transition-to-a-developer-position-in-the-industry%3F"><p>What tips would you give to people from academia that want to transition to a developer position in the industry?</p><div></div></h3>
<p>Narrowing it down to two things:</p>
<ol>
<li>If you’re considering switching to industry, try to pivot your research to something of an applied nature. You’ll probably have a harder time during CV review and job interviews if all your work is theoretical (e.g. type systems without an accompanying implementation in a practical programming language, category theory). There’s nothing wrong with those research subjects – but I think it’s easier to switch to industry if all your papers come with a working implementation, for example.</li>
<li>Try to have a public portfolio with your code contributions available online. Outside of the companies that perform research in an industrial setting, the number of ICFP papers you published will not matter as much as the Haskell code you wrote and can show.</li>
</ol>
<hr/>
<p>We hope you enjoyed our interview with Pedro!</p>
<p>To learn more about Haskell/Mu at Standard Chartered, you can watch <a href="https://www.youtube.com/watch?v=A70SN7vFsKU">Marten Agren’s talk</a> from HIW 2021.</p>
<p>If you would like to read more interviews like this, you’re welcome to visit our <a href="https://serokell.io/blog/interviews">interview section</a> and follow us on <a href="https://twitter.com/serokell">Twitter</a>.</p></div></div>
  </body>
</html>
