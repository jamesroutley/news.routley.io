<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/gorisanson/pikachu-volleyball">Original</a>
    <h1>Pikachu Volleyball</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><em>✓</em> <em>English</em> | <a href="https://github.com/gorisanson/pikachu-volleyball/blob/main/README.ko.md"><em>Korean(한국어)</em></a></p>
<p dir="auto">Pikachu Volleyball (対戦ぴかちゅ～　ﾋﾞｰﾁﾊﾞﾚｰ編) is an old Windows game which was developed by &#34;(C) SACHI SOFT / SAWAYAKAN Programmers&#34; and &#34;(C) Satoshi Takenouchi&#34; in 1997. The source code on this repository is gained by reverse engineering the core part of the machine code — including the physics engine and the AI — of the original game and implementing it into JavaScript.</p>
<p dir="auto">You can play this game on the website: <a href="https://gorisanson.github.io/pikachu-volleyball/en/" rel="nofollow">https://gorisanson.github.io/pikachu-volleyball/en/</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/gorisanson/pikachu-volleyball/blob/main/src/resources/assets/images/screenshot.png"><img src="https://github.com/gorisanson/pikachu-volleyball/raw/main/src/resources/assets/images/screenshot.png" alt="Pikachu Volleyball game screenshot" width="648"/></a></p>

<ol dir="auto">
<li>Clone this repository and get into the directory.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/gorisanson/pikachu-volleyball.git
cd pikachu-volleyball"><pre>git clone https://github.com/gorisanson/pikachu-volleyball.git
<span>cd</span> pikachu-volleyball</pre></div>
<ol start="2" dir="auto">
<li>Install dependencies. (If errors occur, you can try with <code>node v16</code> and <code>npm v8</code>.)</li>
</ol>

<ol start="3" dir="auto">
<li>Bundle the code.</li>
</ol>

<ol start="4" dir="auto">
<li>Run a local web server.</li>
</ol>

<ol start="5" dir="auto">
<li>Connect to the local web server on a web browser. (In most cases, the URL for connecting to the server would be <code>http://localhost:8080</code>. For the exact URL, it is supposed to be found on the printed messages on your terminal.)</li>
</ol>

<ul dir="auto">
<li>
<p dir="auto">Physics Engine: The physics engine, which calculates the position of the ball and the players (Pikachus), is contained in the file <a href="https://github.com/gorisanson/pikachu-volleyball/blob/main/src/resources/js/physics.js"><code>src/resources/js/physics.js</code></a>. (This file also containes the AI which determines the keyboard input of the computer when you are playing against your computer.) This source code file is gained by reverse engineering the function at the address 00403dd0 of the machine code of the original game.</p>
</li>
<li>
<p dir="auto">Rendering: <a href="https://github.com/pixijs/pixi.js">PixiJS</a> library is used for rendering the game.</p>
</li>
</ul>
<p dir="auto">Refer comments on <a href="https://github.com/gorisanson/pikachu-volleyball/blob/main/src/resources/js/main.js"><code>src/resources/js/main.js</code></a> for other details.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Methods used for reverse engineering</h2><a id="user-content-methods-used-for-reverse-engineering" aria-label="Permalink: Methods used for reverse engineering" href="#methods-used-for-reverse-engineering"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The main tools used for reverse engineering are following.</p>
<ul dir="auto">
<li><a href="https://ghidra-sre.org/" rel="nofollow">Ghidra</a></li>
<li><a href="https://www.cheatengine.org/" rel="nofollow">Cheat Engine</a></li>
<li><a href="http://www.ollydbg.de/" rel="nofollow">OllyDbg</a></li>
<li><a href="http://www.angusj.com/resourcehacker/" rel="nofollow">Resource Hacker</a></li>
</ul>
<p dir="auto"><a href="https://ghidra-sre.org/" rel="nofollow">Ghidra</a> is used for decompiling the machine code to C code. At first look, the decompiled C code looked incomprehensible. One of the reason was that the variable names (<code>iVar1</code>, <code>iVar2</code>, ...) and function names (<code>FUN_00402dc0</code>, <code>FUN_00403070</code>, ...) in the decompiled C code are meaningless. But, with the aid of <a href="https://www.cheatengine.org/" rel="nofollow">Cheat Engine</a>, I could find the location of some significant variables — x, y coordinate of the ball and the players. And reading from the location of the variables, the decompiled C code was comprehensible! <a href="http://www.ollydbg.de/" rel="nofollow">OllyDbg</a> was used for altering a specific part of the machine code. For example, to make slower version of the game so that it would be easier to count the number of frames of &#34;Ready?&#34; message on the start of new round in the game. <a href="http://www.angusj.com/resourcehacker/" rel="nofollow">Resource Hacker</a> was used for extract the assets (sprites and sounds) of the game.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">An intended deviation from the original game</h2><a id="user-content-an-intended-deviation-from-the-original-game" aria-label="Permalink: An intended deviation from the original game" href="#an-intended-deviation-from-the-original-game"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If there is no keyboard input, AI vs AI match is started after a while. In the original game, the match lasts only for about 40 seconds. But in this JavaScript version, there&#39;s no time limit to the AI vs AI match so you can watch it as long as you want.</p>
</article></div></div>
  </body>
</html>
