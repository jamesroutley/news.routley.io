<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.quindorian.org/2021/05/firmware-update-samsung-ssd-in-linux.html/">Original</a>
    <h1>Update Firmware of Samsung SSDs in Linux</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p>I love using Samsung SSDs (SATA or NVMe) and have them in most of my builds. But for some reason, Samsung does not publish a way to update the SSD firmware on Linux and their ISO boot tool is completely broken. Let‚Äôs fix that!</p>


<p>In my case I was trying to update 2 Samsung 980 Pro 1TB NVMe drives which are present in one of my Chia plotter boxes. This box is built around a x570 motherboard with a Ryzen 9 5900x.</p>
<p>Easy you‚Äôd say, just download the firmware update ISO, put it on a USB stick, boot, update the firmware, done!</p>
<p>Yeah, except that Samsungs Linux boot environment has been broken <strong>**for a few years now**</strong>! It will not work with your AMD system, two main problems:</p>
<ul>
<li>Refuses to recognize SATA SSDs
<ul>
<li>Doesn‚Äôt understand the controller somehow</li>
</ul>
</li>
<li>USB keyboard won‚Äôt work
<ul>
<li>Broken kernel, no way around it, have to use PS2 keyboard or you are just stuck</li>
</ul>
</li>
</ul>
<p>And well, I was stuck on the ‚Äúno keyboard‚Äù issue once again, like I had also been a few years back. At that time I solved it by moving those SATA drives to an Intel based system, but that was no option for these NVMe drives.</p>

<p>The machine these drives where in was running Ubuntu 21.04, luckily, with a few easy to follow command-line steps, we can extract the firmware tool from Samsungs ISO file and run it in our modern Linux environment, this helped flashing the drives without any issues for me!</p>
<p><span>Word of Warning</span></p>
<h3>Flashing steps</h3>
<p>First, unmount any filesystem mounted on the drive(s). If it‚Äôs your boot drive, no luck there and you can try flashing while it‚Äôs mounted.</p>
<h4>Get the URL for your SSD</h4>
<p>Samsung keeps a list of downloadable Firmware ISO files here: <a href="https://www.samsung.com/semiconductor/minisite/ssd/download/tools/" target="_blank" rel="noopener">https://www.samsung.com/semiconductor/minisite/ssd/download/tools/</a> right click on the version you need and select ‚Äúcopy link‚Äù and paste it in the command lines below.</p>
<pre data-enlighter-language="generic">umount /dev/md0

wget https://s3.ap-northeast-2.amazonaws.com/global.semi.static/SAMSUNG_BRAND_SSD_980PRO_ISO/FW/E2512E718DB3E7EWGAJLDA8A7108M1Y2D9M9090J2KIA55338/Samsung_SSD_980_PRO_3B2QGXA7.iso
apt-get -y install gzip unzip wget cpio
mkdir /mnt/iso
sudo mount -o loop ./Samsung_SSD_980_PRO_3B2QGXA7.iso /mnt/iso/
mkdir /tmp/fwupdate
cd /tmp/fwupdate
gzip -dc /mnt/iso/initrd | cpio -idv --no-absolute-filenames
cd root/fumagician/
sudo ./fumagician
</pre>
<p><a href="https://www.reddit.com/r/zfs/comments/fuqgoi/script_to_update_samsung_ssd_firmware/" target="_blank" rel="noopener">Parts borrowed from original post</a></p>
<h4>Flash the firmware</h4>
<p>Once the tool loads it should recognize your SSD/NVMe drives and ask you if you want to update them.</p>
<p>Once updated I strongly recommend rebooting or even turning the whole system off and then on again.</p>

<p>After the system booted up again, I noticed no issues and all my data was still there and I confirmed using ‚Äúsudo smartctl -a‚Äù on my NVMe drives that they where indeed running the new firmware!</p>
<p>I have no clue why Samsung stopped providing a way to firmware flash your SSDs from Linux, they used to do so but now only offer it for Enterprise SSDs.</p>
<p>This wouldn‚Äôt be too big of a problem if their own tooling would work, but as said, their ISO boot environment has been completely broken for a few years now, making it no option.</p>
<p>Next time buying SSDs, if there is a viable alternative vs the Samsung and they do offer tooling to do this, It‚Äôll be a plus on their side‚Ä¶.</p>
<p>If you are looking at picking up some of these Samsung SSDs (they are excellent performers), consider using my affiliate links:</p>
<p>Hope this helps you! üòÄ</p>
	</div></div>
  </body>
</html>
