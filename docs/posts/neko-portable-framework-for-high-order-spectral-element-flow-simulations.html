<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ExtremeFLOW/neko">Original</a>
    <h1>Neko: Portable framework for high-order spectral element flow simulations</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ExtremeFLOW/neko/workflows/CI/badge.svg"><img src="https://github.com/ExtremeFLOW/neko/workflows/CI/badge.svg" alt="CI"/></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/ExtremeFLOW/neko/workflows/develop/badge.svg"><img src="https://github.com/ExtremeFLOW/neko/workflows/develop/badge.svg" alt="develop"/></a> <a href="https://zenodo.org/doi/10.5281/zenodo.6631055" rel="nofollow"><img src="https://camo.githubusercontent.com/bb390f367e5d1d8900ad2820c5dfeba47350fcf33ff5f37cee9ee35912d89f81/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f3333383630373731362e737667" alt="DOI" data-canonical-src="https://zenodo.org/badge/338607716.svg"/></a></p>

<p dir="auto">Neko is a portable framework for high-order spectral element flow simulations. Written in modern Fortran, Neko adopts an object-oriented approach, allowing multi-tier abstractions of the solver stack and facilitating various hardware backends ranging from general-purpose processors, CUDA and HIP enabled accelerators to SX-Aurora vector processors. Neko has its roots in the spectral element code Nek5000 from UChicago/ANL, from where many of the namings, code structure and numerical methods are adopted.</p>

<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/ExtremeFLOW/neko"><pre>git clone https://github.com/ExtremeFLOW/neko</pre></div>

<p dir="auto">Documentation for Neko is available at <a href="https://neko.cfd" rel="nofollow">https://neko.cfd</a> and most things related to the code, cases, and different features are described there. The documentation is always improving, in large part due to our active users and if something is missing or hard to understand, don&#39;t be afraid to start a <a href="https://github.com/ExtremeFLOW/neko/discussions">discussion</a> or create a <a href="https://github.com/ExtremeFLOW/neko/pulls">Pull request</a>. It is a great way to help us improve and also to start getting involved in the project.</p>

<p dir="auto">To build the project you will need: A Fortran compiler supporting the Fortran-08 standard, a working MPI installation, JSON-Fortran, and BLAS/lapack. Optional dependencies are gslib and ParMETIS. We use autotools to build the project. These instructions should work in general, but as the project is quickly developing, things might change. While we assume MPI and BLAS are installed, if JSON-Fortran is not already available it can be cloned, installed, and the correct paths set with the following commands (Skip this step if you already have an installation of JSON-Fortran).</p>
<div dir="auto" data-snippet-clipboard-copy-content="export JSON_INSTALL=/path/to/json-fortran_install # Where you want to install json-fortran"><pre><span>export</span> JSON_INSTALL=/path/to/json-fortran_install <span><span>#</span> Where you want to install json-fortran</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="git clone --depth 1 https://github.com/ExtremeFLOW/json-fortran/
cmake -S json-fortran -B json-fortran/build -DCMAKE_INSTALL_PREFIX=${JSON_INSTALL} -DUSE_GNU_INSTALL_CONVENTION=ON ..
cmake --build json-fortran/build --parallel
cmake --install json-fortran/build
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${JSON_INSTALL}/lib/ #On some systems lib should be replaced with lib64
export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:${JSON_INSTALL}/lib/pkgconfig 
"><pre>git clone --depth 1 https://github.com/ExtremeFLOW/json-fortran/
cmake -S json-fortran -B json-fortran/build -DCMAKE_INSTALL_PREFIX=<span>${JSON_INSTALL}</span> -DUSE_GNU_INSTALL_CONVENTION=ON ..
cmake --build json-fortran/build --parallel
cmake --install json-fortran/build
<span>export</span> LD_LIBRARY_PATH=<span>${LD_LIBRARY_PATH}</span>:<span>${JSON_INSTALL}</span>/lib/ <span><span>#</span>On some systems lib should be replaced with lib64</span>
<span>export</span> PKG_CONFIG_PATH=<span>${PKG_CONFIG_PATH}</span>:<span>${JSON_INSTALL}</span>/lib/pkgconfig 
</pre></div>
<p dir="auto">A basic CPU version of Neko can then be installed according to the following</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd neko
./regen.sh
./configure --prefix=/path/to/neko_install # Where you want to install neko
make install"><pre><span>cd</span> neko
./regen.sh
./configure --prefix=/path/to/neko_install <span><span>#</span> Where you want to install neko</span>
make install</pre></div>
<p dir="auto">More detailed installation instructions and all the different options (such as how to install Neko for GPUs) can be found in the documentation available at <a href="https://neko.cfd" rel="nofollow">https://neko.cfd</a>.</p>

<p dir="auto">After the project has been built</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd examples/tgv
/path/to/neko_install/bin/makeneko tgv.f90
mpirun -np 4 ./neko tgv.case"><pre><span>cd</span> examples/tgv
/path/to/neko_install/bin/makeneko tgv.f90
mpirun -np 4 ./neko tgv.case</pre></div>
<p dir="auto">If there is not a .f90 (user) file in the example, the standard executable <code>neko</code> can also be used, for example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd examples/hemi
mpirun -np 4 /path/to/neko_install/bin/neko hemi.case"><pre><span>cd</span> examples/hemi
mpirun -np 4 /path/to/neko_install/bin/neko hemi.case</pre></div>
<p dir="auto">only uses built-in functions and does not need a compiled user file. Whether you will need a user file or not depends on what functionality you want and this is also documented in the documentation.</p>

<ul dir="auto">
<li>Jansson, N., 2021. <em>Spectral Element Simulations on the NEC SX-Aurora TSUBASA</em>. In proc. HPCAsia 2021.</li>
<li>Karp, M., Podobas, A., Kenter, T., Jansson, N., Plessl, C., Schlatter, P. and Markidis, S., 2022. <em>A high-fidelity flow solver for unstructured meshes on field-programmable gate arrays: Design, evaluation, and future challenges</em>. In proc. HPCAsia 2022.</li>
<li>Karp, M., Jansson, N., Podobas, A., Schlatter, P., and Markidis, S., 2022. <em>Reducing Communication in the Conjugate Gradient Method: A Case Study on High-Order Finite Elements</em>. In proc. PASC 2022.</li>
<li>Karp, M., Massaro, D., Jansson, N., Hart, A., Wahlgren, J., Schlatter, P., and Markidis, S., 2023. <em>Large-Scale Direct Numerical Simulations of Turbulence Using GPUs and Modern Fortran</em>. The International Journal of High Performance Computing Applications, 37, 5.</li>
<li>Jansson, N., Karp, M., Perez, A., Mukha, T., Ju, Y., Liu, J., Páll, S., Laure, E., Weinkauf, T., Schumacher, J., Schlatter, P., Markidis, S., 2023. <em>Exploring the Ultimate Regime of Turbulent Rayleigh–Bénard Convection Through Unprecedented Spectral-Element Simulations</em>. SC &#39;23: Proceedings of the International Conference for High Performance Computing, Networking, Storage and Analysis.</li>
<li>Jansson, N., Karp, M., Podobas, A., Markidis, S. and Schlatter, P., 2024. <em>Neko: A modern, portable, and scalable framework for high-fidelity computational fluid dynamics</em>. Computer &amp; Fluids, 275.</li>
</ul>

<p dir="auto">The development of Neko was supported by the European Commission Horizon 2020 project grant <em>EPiGRAM-HS: Exascale Programming Models for Heterogeneous Systems</em> (grant reference 801039), the Swedish Research Council project grant <em>Efficient Algorithms for Exascale Computational Fluid Dynamics</em> (grant reference 2019-04723) and the SeRC Exascale Simulation Software Initiative (SESSI). The Neko logo was designed by Robert Hansen Jagrelius.</p>
<p dir="auto"><a href="https://zulip.com" rel="nofollow"><img src="https://raw.githubusercontent.com/zulip/zulip/143baa42432cde9f288bd202336ef2b11172f6e4/static/images/logo/zulip-icon-128x128.png" width="32"/></a> Sponsored by Zulip, an open-source modern team chat app designed to keep both live and asynchronous conversations organized.</p>
</article></div></div>
  </body>
</html>
