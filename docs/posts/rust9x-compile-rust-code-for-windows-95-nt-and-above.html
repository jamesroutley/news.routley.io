<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://seri.tools/blog/announcing-rust9x/">Original</a>
    <h1>Rust9x: Compile Rust code for Windows 95, NT and above</h1>
    
    <div id="readability-page-1" class="page"><div><main><div><p>Posted: 2022-04-21</p><p><em>Discuss on <a href="https://www.reddit.com/r/rust/comments/u8skda/rust9x_compile_rust_code_for_windows_95_nt_and/">Reddit</a>, <a href="https://users.rust-lang.org/t/rust9x-compile-rust-code-for-windows-95-nt-and-above/74581">URLO</a>, <a href="https://news.ycombinator.com/item?id=31112273">HN</a></em></p><p><em>tl;dr:</em> see the project wiki on Github: <a href="https://github.com/rust9x/rust/wiki"><code>rust9x/rust</code></a></p><p>You might remember my old post about the journey to <a href="https://seri.tools/blog/compiling-rust-for-legacy-windows/">get at least a bit of Rust code working for Windows 98 SE</a>. Well, I&#39;m back, this time with a more ambitious package:</p><h2 id="announcing-rust9x-rust-1-61-0-beta">Announcing Rust9x (Rust 1.61.0-beta)<a href="#announcing-rust9x-rust-1-61-0-beta"> (link)</a></h2><p><a title="&#39;Ferrissoft Visual Rust 9X&#39;, logo in the style of old Visual Studio logos (just a joke, not the real name of the project :)" href="https://seri.tools/blog/announcing-rust9x/logo.svg"> <img alt="&#39;Ferrissoft Visual Rust 9X&#39;, logo in the style of old Visual Studio logos (just a joke, not the real name of the project :)" height="568" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/logo.svg" width="385"/> </a></p><blockquote><p><em>Blazingly fast! Y2k compliant! Works everywhere!</em></p></blockquote><p>Over on <a href="https://github.com/rust9x/rust/">Github</a> you&#39;ll find a forked Rust repository containing two new targets, <code>i586-rust9x-windows-msvc</code> and <code>i686-rust9x-windows-msvc</code>, as well as all the necessary changes to support most of what the Rust standard library offers, on <em>all*</em> 32-bit Windows versions, including Windows 95, 98, Me, NT 3.51, NT 4.0, 2000, XP and Vista.</p><p>* NT 3.1 and 3.5 were not tested (yet).</p><p>Please have a look at the <a href="https://github.com/rust9x/rust/wiki">wiki</a> for information on how to set up and use the toolchain if you so desire, and if you&#39;d like to have a look under the hood, have a look at the <a href="https://github.com/rust9x/rust/commits/rust9x">commits</a> themselves, which have some additional information about the changes, both in code and in the commit messages.</p><p>Do note that this is just a side project I&#39;ve done for fun; I&#39;ll probably not keep it up to date with upstream all the time.</p><p>If you have any questions, encounter issues (there surely are lots of them left) or would like to join the project, feel free to contact me via the links in the footer, and/or create an issue in the repositories. Thanks! &lt;3</p><h2 id="gallery">Gallery<a href="#gallery"> (link)</a></h2><h3 id="extremely-simple-file-downloader-using-ureq-and-clap">Extremely simple file downloader using <code>ureq</code> and <code>clap</code><a href="#extremely-simple-file-downloader-using-ureq-and-clap"> (link)</a></h3><p>This is a quick toy program I&#39;ve whipped up to show some actual code/crates running. It uses <a href="https://docs.rs/clap/latest/clap/"><code>clap</code></a> for command line parsing and <code>ureq</code> to do the request.</p><p>TLS is supported via <code>rustls</code> starting from Windows XP, as its dependency <code>ring</code> <a href="https://github.com/briansmith/ring/blob/main/src/rand.rs#L272">needs <code>RtlGenRandom</code></a>. I haven&#39;t looked into it too much, but from what I could tell, this should be the only additional API dependency, so by falling back to another way of getting randomness (probably compromising security in the process :)) this should work all the way down to Windows 95/NT 4.0 as well.</p><p>With TLS support on Windows XP SP3 (real hardware):</p><p><a title="ureq and clap running with TLS enabled on Windows XP SP3" href="https://seri.tools/blog/announcing-rust9x/winxp_ureq_tls.jpg"> <img alt="ureq and clap running with TLS enabled on Windows XP SP3" height="768" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/winxp_ureq_tls.jpg" width="1024"/> </a></p><p>Without TLS support on Windows 95 B (real hardware):</p><p><a title="ureq and clap running on Windows 95 B" href="https://seri.tools/blog/announcing-rust9x/w95b_ureq.png"> <img alt="ureq and clap running on Windows 95 B" height="768" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/w95b_ureq.png" width="1024"/> </a></p><h3 id="sample-program">Sample program<a href="#sample-program"> (link)</a></h3><p>Windows NT 3.51 (VM):</p><p>This one is missing the network tests as NT 3.51 and earlier never got WinSock 2 support.</p><p><a title="sample program running on Windows NT 3.51" href="https://seri.tools/blog/announcing-rust9x/win351.png"> <img alt="sample program running on Windows NT 3.51" height="480" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/win351.png" width="640"/> </a></p><p>Windows 95 B (real hardware):</p><p><a title="sample program running on Windows 95 B" href="https://seri.tools/blog/announcing-rust9x/w95b.png"> <img alt="sample program running on Windows 95 B" height="768" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/w95b.png" width="1024"/> </a></p><p>Windows XP (real hardware):</p><p><a title="sample program running on Windows XP" href="https://seri.tools/blog/announcing-rust9x/winxp.jpg"> <img alt="sample program running on Windows XP" height="768" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/winxp.jpg" width="1024"/> </a></p><p>Windows 11 (real hardware):</p><p><a title="sample program running on Windows XP" href="https://seri.tools/blog/announcing-rust9x/win11.jpg"> <img alt="sample program running on Windows XP" height="1579" loading="lazy" src="https://seri.tools/blog/announcing-rust9x/win11.jpg" width="1235"/> </a></p></div></main></div></div>
  </body>
</html>
