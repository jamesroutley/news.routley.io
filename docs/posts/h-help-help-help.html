<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.craftyguy.net/cmdline-help/">Original</a>
    <h1>-h –Help -help Help –? –?</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
      <p>Scenario:
Congratulations, you won the lottery! You can barely believe your eyes as you
stand there holding the winning ticket! It&#39;s amazing - so many feelings rush
over you as you realize that some of your dreams are within reach now! You run
over, nay, you float over to the lottery office to collect your winnings in
pure excitement. You push open the doors to the building, scamper up to the
front desk, present your ticket to the clerk, and the exchange goes something
like this:</p>
<p><strong>You</strong>: Hi! I won! Here&#39;s my ticket! Where do I collect my winnings?</p>
<p><strong>Clerk</strong>: Hello. I understand you would like to collect your winnings, but I&#39;m
afraid I cannot let you do that unless you ask me in a very specific way.</p>
<p><strong>You</strong>: .....</p>
<p><strong>Clerk</strong>: Perhaps try something like &#34;May I ..., please?&#34;</p>
<p><strong>You</strong>: May I have my winnings, please?</p>
<p><strong>Clerk</strong>: Hello. I understand you would like to collect your winnings, but I&#39;m
afraid I cannot let you do that unless you ask me in a very specific way.</p>
<p><strong>You</strong>: May I collect my winnings, please?</p>
<p><strong>Clerk</strong>: Congrats on winning! Here you go!</p>
<p>Of course this would never happen in real life, right? There&#39;s no possible
situation where the above interaction would make any sense in any way.</p>
<pre><code><span>$ podman -h
</span><span>Error: pflag: help requested
</span><span>See &#39;podman --help&#39;
</span></code></pre>
<p>Ya... Ok. I&#39;m picking on <code>podman</code>[1] above, but it&#39;s pervasive in many,
many command line tools. There are innumerable ways to ask a tool for help, and
this blog&#39;s title has the most common ways I&#39;ve seen, though I&#39;m quite sure
there are more. Anyway, the point of this post is to talk a little about the
various ways to ask for help on the command line and quickly go over pitfalls.</p>

<p>Ah, the POSIX short/long help options. These are classics. Any competent,
POSIX-compliant argument parser will handle them just fine. There are command
argument parsers in many, many languages that are (or claim to be) compliant. A
myriad of tools use these options, so there&#39;s a good chance your users are
familiar with using them to ask for help. In my humble opinion, these are the
best options to support because of how pervasive support is for them. In other
words, many users have been trained with plentiful tools over considerable
time, and have built these into their muscle memory. There&#39;s a reason why
emergency phone numbers don&#39;t change arbitrarily every time some operator wants
to &#34;disrupt&#34; the scene, thinking they know better. When it comes to asking for
help, you probably want your users to get what they need quickly so they can
use your tool.</p>

<p>This one might save you 1 keystroke over <code>--help</code>, but it breaks any attempt to
support short option chaining. For example, <code>tar -xjf</code> becomes impossible to
parse correctly if the tool expects long option names to be proceeded by a
single dash. Did the user mean <code>-x -j -f</code>? Or some option called <code>xjf</code> ?</p>
<p>Honestly, in practice, I&#39;ve seen many tools that support <code>-help</code> also allow
<code>--help</code> and <code>-h</code> for those who have the muscle memory reflex for those, so
it&#39;s not nearly as problematic.</p>

<p>Some folks like to treat &#34;help&#34; as a command/verb on the command line. Some
examples might include:</p>
<pre><code><span>$ go help build
</span><span>
</span><span>$ podman help run
</span><span>
</span></code></pre>
<p>Or more dramatically:</p>
<div>
  <center>
    <a href="https://blog.craftyguy.net/../images/2022-04-10-go-help.gif" target="_blank">
      <img src="https://blog.craftyguy.net/images/2022-04-10-go-help.gif"/>
      
    </a>
  </center>
</div>
<p>This pattern is cumbersome to deal with in practice, especially in tools that
use subcommands. Instead of typing <code>foo bar -h</code> to get help, you have to move
the cursor between <code>foo</code> and <code>bar</code> to insert <code>help</code>: <code>foo help bar</code> in order
to get help about the <code>bar</code> subcommand. Then, once you presumably know how to
use it, up-arrow, remove <code>help</code> from between the tool and subcommand, move to
the end of the line, and continue on.</p>
<p>&#34;Help&#34; is commonly used in speech as an interjection, &#34;Help!&#34;, and as a noun,
&#34;I need help with ____.&#34; It&#39;s also used as a verb, e.g., &#34;Can you help me with
____?&#34; However, I feel using it as a verb in command line tools that use the
command/subcommand structure is awkward at best, as demonstrated above. It&#39;s
also a verb in the following sentence: &#34;Are you going to help me?!&#34; Which is
exactly what I feel like shouting every time I am forced to deal with tools
that insist on using this pattern.</p>

<p>???? I have no idea where these came from, but my guess is that they are
migrants from <del>the wild west</del> Windows-land, where I assume the shell won&#39;t
try to expand <code>?</code> into anything. Using these options will cause problems for
anyone using common shells like bash, zsh, others. Don&#39;t do it.</p>

<p>One final bit to end with: As in the case of podman above, if you <em>know</em> your
user is asking for help, show them the damn help. It serves no one to chide
them for not guessing the specific way your app wants them to ask for help.
Better yet, support a more &#34;common&#34; way to allow users to ask for help if your
app doesn&#39;t already. /rant</p>
<ol>
<li>Handling -h aside, <a href="https://docs.podman.io">podman</a> is a really great
alternative to docker. I highly recommend it, for many technical and
non-technical reasons!</li>
</ol>

    </div></div>
  </body>
</html>
