<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://erikarow.land/notes/legible-timeouts-erlang">Original</a>
    <h1>Legible Timeouts with Erlangs timer</h1>
    
    <div id="readability-page-1" class="page"><section id="Legible-Timeouts-with-Erlangs-timer">

<p>By convention, timeouts in Erlang (and Elixir) are set in units of milliseconds. However, this isn’t type checked by either language, so you end up with magic integers for timeouts throughout a codebase.</p>
<p>While both Erlang and Elixir support underscores in numbers for readability: <code>5_000</code>, you’re still expected to know that timeouts are in milliseconds.</p>
<section id="Enter-timer">
<h2>Enter <code>timer</code></h2>
<p>Erlang’s <a href="https://www.erlang.org/doc/man/timer.html"><code>timer</code></a> provides legible helper functions for expressing timeouts:</p>
<pre><code>timer:seconds/1

timer:minutes/1

timer:hours/1
</code></pre>
<p>Each takes an integer and converts it from the stated time to milliseconds.</p>
<p><code>timer</code> also provides <code>timer:hms/3</code> for hours, minutes, and seconds, returning their sum in milliseconds.</p>
</section>
<section id="Using-timer-in-Elixir">
<h2>Using <code>:timer</code> in Elixir</h2>
<p>Elixir supports seamless integration of Erlang standard library functions, though the syntax is a bit different:</p>
<pre><code>:timer.seconds(5)
</code></pre>
<p>So you can replace<label for="fn1"></label>
<span></span>:</p>
<pre><code>Process.sleep(5000)
</code></pre>
<p>with:</p>
<pre><code>Process.sleep(:timer.seconds(5))
</code></pre>
</section>
<section id="Takeaway">
<h2>Takeaway</h2>
<p>Next time you need to set a timeout in Erlang or Elixir, consider using <code>timer</code> to embed your design decisions and communicate without magic numbers.<label for="fn2"></label>
<span></span></p>
</section>
</section></div>
  </body>
</html>
