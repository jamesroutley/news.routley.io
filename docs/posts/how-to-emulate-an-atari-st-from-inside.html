<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.raspberrypi.com/news/how-to-emulate-an-atari-st-from-inside/">Original</a>
    <h1>How to emulate an Atari ST from inside</h1>
    
    <div id="readability-page-1" class="page"><div>
        
<p><strong><em>Dr Andrew Lewis penned this Atari emulation tutorial especially for the latest issue of <a href="https://hackspace.raspberrypi.com/">HackSpace magazine</a>. If you like what you see, consider <a href="https://raspberrypipress.imbmsubscriptions.com/hackspace-magazine/">subscribing</a> so you never miss out again. </em></strong></p>


<div>
<figure><img decoding="async" loading="lazy" width="1024" height="765" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-1024x765.png" alt="" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-1024x765.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-300x225.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-768x574.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-800x598.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-450x336.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24-900x672.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.24.png 1392w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div>






<p>Like the Commodore Amiga, the Atari ST was an iconic home computer, offering many people their first glimpse of the 16-bit digital world. After almost 40 years, it’s still an engaging design, although the internal hardware may need a few repairs and upgrades to fit in with the modern standards. In this article, you’ll see how to replace the internal electronics of an Atari-ST with a Raspberry Pi, while retaining the original keyboard. None of the changes performed require modifications to the original case or to the circuitry of the Atari, making the process completely reversible in the future.</p>



<figure><img decoding="async" loading="lazy" width="1024" height="767" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-1024x767.png" alt="The Atari was hacked at some point to add a simple audio amplifier with an internal speaker, and an audio output on the rear 
of the case" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-1024x767.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-300x225.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-768x575.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-800x599.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-450x337.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25-900x674.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.25.png 1388w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>The Atari was hacked at some point to add a simple audio amplifier with an internal speaker, and an audio output on the rear of the case</figcaption></figure>



<p>Simulating a classic system on new hardware is nothing new, and after 40+ years of technological advancement, emulating home computers, classic mainframes, and even full-blown arcade machines is well within the reach of a small computer like the Raspberry Pi. What desktop emulation doesn’t have is the classic ’feel’ of the original machine. A modern keyboard and joystick don’t have the same tactile impact as a classic machine, and if you want to recapture that feeling but have access to modern system tools, then you’ll need to consider repurposing an existing machine.</p>



<h2><strong>Talk to the Keys</strong></h2>



<p>The classic Atari ST case with the built-in keyboard and parallelogram F key design is one of those features you can’t emulate in software, but it isn’t too difficult to interface original Atari hardware with a modern microcontroller, and you don’t even need to solder any wires to do so. Remove the screws from the base of your Atari ST, and remove the lid. Remove the motherboard and all internal components, keeping the keyboard and outer case to one side. This isn’t a difficult process, and there are no hidden screws or clips to worry about. You can safely store all of the components that you don’t need so that the whole process is reversible.</p>



<figure><img decoding="async" loading="lazy" width="1024" height="763" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-1024x763.png" alt="The classic Atari ST came without many of the features found in its successors. Smaller than later models, although it sported the classic Atari keyboard design, the early ST had no built-in floppy drives or internal power supply to bulk 
up its size" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-1024x763.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-300x225.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-768x572.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-800x596.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-450x335.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44-900x671.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.44.png 1390w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>The classic Atari ST came without many of the features found in its successors. Smaller than later models, although it sported the classic Atari keyboard design, the early ST had no built-in floppy drives or internal power supply to bulk</figcaption></figure>



<p>The original Atari keyboard has its own microcontroller built in to process key presses. Depending on your model of Atari, the keyboard will be connected to the motherboard by a single connector with either 8 or 18 connections. On earlier Atari machines, the 18-pin connector was used, routing joystick and mouse connections through the keyboard’s 6301 processor. On later machines like the 1040ST, only the keyboard signals were routed through the connector, so fewer pins were required.</p>



<figure><table><tbody><tr><td><strong>1040ST Pinout</strong></td></tr><tr><td><strong>1</strong></td><td>Ground</td></tr><tr><td><strong>2</strong></td><td>NC – Hole is blanked off to facilitate correct orientation of the plug</td></tr><tr><td><strong>3</strong></td><td>NC</td></tr><tr><td><strong>4</strong></td><td>5 V</td></tr><tr><td><strong>5</strong></td><td>RX</td></tr><tr><td><strong>6</strong></td><td>TX</td></tr><tr><td><strong>7</strong></td><td>Reset</td></tr><tr><td><strong>8</strong></td><td>NC</td></tr></tbody></table></figure>



<figure><table><tbody><tr><td><strong>520ST Pinout</strong></td></tr><tr><td><strong>1</strong></td><td>Ground</td></tr><tr><td><strong>2</strong></td><td>NC – Hole is blanked off</td></tr><tr><td><strong>3</strong></td><td>Joystick 0 Right</td></tr><tr><td><strong>4</strong></td><td>Joystick 0 Left</td></tr><tr><td><strong>5</strong></td><td>Joystick 0 Down</td></tr><tr><td><strong>6</strong></td><td>Joystick 0 Fire / Mouse Right Btn</td></tr><tr><td><strong>7</strong></td><td>Joystick 0 Up</td></tr><tr><td><strong>8</strong></td><td>Joystick 1 Right /Mouse YB</td></tr><tr><td><strong>9</strong></td><td>Joystick 1 Left / Mouse YA</td></tr><tr><td><strong>10</strong></td><td>Joystick 1 Down / Mouse XA</td></tr><tr><td><strong>11</strong></td><td>Joystick 1 Fire / Mouse Left Btn</td></tr><tr><td><strong>12</strong></td><td>Joystick 1 Up / Mouse XB\</td></tr><tr><td><strong>13</strong></td><td>+5 V</td></tr><tr><td><strong>14</strong></td><td>RX Data</td></tr><tr><td><strong>15</strong></td><td>TX Data</td></tr><tr><td><strong>16</strong></td><td>Reset</td></tr><tr><td><strong>17</strong></td><td>NC</td></tr><tr><td><strong>18</strong></td><td>NC</td></tr></tbody></table></figure>







<p>The full pinout is shown here for completeness, but to interface with the keyboard, only five pins are actually necessary. The 5 V and Ground lines are needed to power the keyboard’s microprocessor, and the RX/TX pins are used to communicate. The Reset pin is needed to initialise the keyboard, and contrary to what you might read online, failing to connect this pin can lead to some very strange behaviour from the keyboard. Talking to the keyboard with a Raspberry Pi is just a matter of connecting these five pins to a suitable microcontroller that can be configured as a USB HID, reading the outputs from the keyboard’s microcontroller using a serial connection, and mapping the outputs to a modern-day USB keyboard equivalent. The keyboard communicates using a slightly unusual 7812 bps connection, and the connections are made RX to RX, TX to TX, which is frustrating but not uncommon. The process of translating the keyboard signals has been made easier, thanks to <a href="https://github.com/devonshire/arduino-atari-hid-keyboard/blob/master/USB_HID_Keyboard.ino">the work of Kevin Peat</a> where you can find code for the Arduino Leonardo. The connection between the keyboard and the Arduino Leonardo can be accomplished with male DuPont connectors, meaning that no soldering or wire-cutting is necessary. A small dab of hot glue or Kapton tape will hold the connection together, and can be easily removed in the future.</p>


<div>
<figure><img decoding="async" loading="lazy" width="1024" height="762" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-1024x762.png" alt="You can add 3D-printed blanks for sockets on the case you’re not using without needing to modify the case itself" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-1024x762.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-300x223.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-768x572.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-800x595.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-450x335.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34-900x670.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.43.34.png 1392w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>You can add 3D-printed blanks for sockets on the case you’re not using without needing to modify the case itself</figcaption></figure></div>


<h2><strong>Waggle Your Joystick</strong></h2>



<p>After the keyboard, the most iconic thing about Atari computers (and, likely, the first thing that people think of when you say the name Atari) is probably the classic black joystick. Originating with the Atari 2600, the joystick is digital, with five internal switches connected to a 9-pin D-sub plug. This 9-pin joystick connector remained in use across many computers and consoles for many years, with some changes to the internal wiring. On early Atari ST computers, the first joystick socket was shared with the system mouse. On later versions of the ST, the 9-pin sockets were replaced with a 15-pin variant that allowed for more connected devices. Connecting a classic joystick to a modern computer is a common task, and there are a variety of different ways that you can accomplish the task. One option is to use an off-the-shelf converter that has the correct socket fitted to a USB plug. This is the easiest solution, and requires zero tinkering to get working. However, from an aesthetic point of view, it requires USB cables going into the classic case, and it can look a little bit odd. For a classic Atari ST with side-mounted sockets, it’s much neater to mount a USB joystick encoder inside the Atari ST, wired to D-sub connectors in their proper place on the side of the case. There is a 3D-printed mount provided in the files for this project that will let you mount the sockets to a board that matches the PCB layout of the Atari ST motherboard. This means you can place in a dummy PCB, and mount the 3D-printed socket adapter into the Atari without needing to use any permanent fixings. The pinout for the Atari joysticks is very simple, as you can see from the table here.</p>



<figure><table><tbody><tr><td><strong>1</strong></td><td>Up</td></tr><tr><td><strong>2</strong></td><td>Down</td></tr><tr><td><strong>3</strong></td><td>Left</td></tr><tr><td><strong>4</strong></td><td>Right</td></tr><tr><td><strong>5</strong></td><td>Reserved</td></tr><tr><td><strong>6</strong></td><td>Fire</td></tr><tr><td><strong>7</strong></td><td>+5 V</td></tr><tr><td><strong>8</strong></td><td>Ground</td></tr><tr><td><strong>9</strong></td><td>NC</td></tr></tbody></table></figure>







<p>If you’re wondering about the reason behind the Reserved and NC pins, those pins were used on the original Atari console for paddle controllers. In theory, you could use a joystick encoder to reproduce this functionality for emulation purposes, even though it isn’t a function found on Atari ST itself.</p>



<h2><strong>Of Mice and Mending</strong></h2>



<p>The difficult choice at this point is what to do with the mouse socket. The traditional Atari ST mouse plugged into the side of the Atari next to the joystick. If you wanted to play a game with two joysticks, you needed to remove the mouse and plug it in or build an external switch-box. With a modern machine, this isn’t an issue. You can either opt for a Bluetooth mouse, add extra USB sockets, or remain faithful to the original design and dedicate one of your sockets to being a mouse socket. If you’re lucky enough to have a working Atari ST mouse and want to do this, then there are <a href="https://www.tinkerboy.xyz/product/tinkerboy-amiga-atari-mouse-to-usb-converter/">adapters</a> around that will let you connect the mouse via USB in the same way that you can connect the keyboard or joystick. If you prefer to find out how the mouse works and have a go at implementing this yourself, you can start by having a look at this <a href="https://www.southampton.ac.uk/~bim/notes/cga/c01/mouse.html">Shaft Encoder Interface</a> for an explanation of how the Atari mouse works. However, even the most ardent fan of the Atari ST will admit that the ball mouse was a bit of a brick by modern standards, and after decades of use, many old mice have failed microswitches or encoders. For the sake of simplicity, it’s probably a good idea to rely on a modern Bluetooth or USB mouse to control the Raspberry Pi, and then dedicate the original mouse port exclusively for joysticks. If you’d like to add a more authentic look, you can use <a href="https://www.thingiverse.com/thing:4640541">this STL file of an Atari ST mouse</a> and 3D-print your own version.</p>


<div>
<figure><img decoding="async" loading="lazy" width="1024" height="697" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-1024x697.png" alt="The Atari keyboard has its own processor to deal with the key matrix. Different versions of the Atari ST had different internal connectors. This keyboard has the 18-pin connection, which also routes the keyboard and mouse sockets through the keyboard processor. Later versions had sockets with a smaller number of connections" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-1024x697.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-300x204.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-768x523.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-800x545.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-450x306.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35-900x613.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.35.png 1386w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>The Atari keyboard has its own processor to deal with the key matrix. Different versions of the Atari ST had different internal connectors. This keyboard has the 18-pin connection, which also routes the keyboard and mouse sockets through the keyboard processor. Later versions had sockets with a smaller number of connections</figcaption></figure></div>


<p>In terms of hardware, there’s little else to consider. Any holes left in the Atari ST case can be filled with 3D-printed plugs. No glue is required because the plugs are held in place with a rubber O-ring. A short HDMI extender fits neatly into the space previously occupied by the monitor socket, and a 2.5 mm socket mounted in the old power plug location can be used to provide power to the Raspberry Pi. USB extenders can bring out the USB sockets to the outside of the case in the same way.</p>



<p>Once you’ve connected up all of the necessary cables to your Raspberry Pi, it’s time to start thinking about emulation. The standard option for Atari ST emulation on a Raspberry Pi is Hatari, but since you’re already here, why not install support for something more than just the Atari ST?</p>


<div>
<figure><img decoding="async" loading="lazy" width="1024" height="755" src="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-1024x755.png" alt="A generic joystick board is the easiest way to connect Atari (or custom) controllers to the Raspberry Pi. The board shows up as a generic joystick device, and will return events when the joystick moves or a button is pressed. Although the board in this image supports modern analogue joysticks, it will work fine with a retro digital joystick" srcset="https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-1024x755.png 1024w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-300x221.png 300w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-768x567.png 768w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-800x590.png 800w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-450x332.png 450w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06-900x664.png 900w, https://www.raspberrypi.com/app/uploads/2023/08/Screenshot-2023-08-03-at-08.44.06.png 1388w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>A generic joystick board is the easiest way to connect Atari (or custom) controllers to the Raspberry Pi. The board shows up as a generic joystick device, and will return events when the joystick moves or a button is pressed. Although the board in this image supports modern analogue joysticks, it will work fine with a retro digital joystick</figcaption></figure></div>


<p>RetroPie is a specialised system that brings together several emulation projects on the Raspberry Pi, including the Hatari emulator. You can either install it onto an existing system, or you can download an installation image for the Raspberry Pi that does the majority of the work for you. Installing RetroPie is as easy as downloading the appropriate image from <strong><a href="https://retropie.org.uk/">retropie.org.uk</a></strong>, then write the image to a microSD card, insert the card into the Raspberry Pi, turn on the power, and follow the on-screen prompts.</p>



<p>The RetroPie website has excellent documentation, and <a href="https://retropie.org.uk/docs/First-Installation/">this is the best place to start</a>. Once RetroPie is installed, you’ll need to do a little bit of extra work to set up the Atari ST emulation. The Hatari emulator needs a valid TOS image installed in order to work.</p>



<p>The TOS image needs to be installed to the folder <strong>~/RetroPie/BIOS/tos.img</strong>, while game images are copied to <strong>/home/pi/RetroPie/roms/atarist</strong>. The Hatari emulator uses disk images to load games from a virtual floppy drive (or drives). Starting the emulator with a disk image inserted</p>



<h2>HackSpace magazine issue 69 out NOW!</h2>



<p>Each month, <a href="https://www.raspberrypi.com/news/tag/hackspace-magazine/">HackSpace magazine</a> brings you the best projects, tips, tricks and tutorials from the makersphere. You can get HackSpace from the <a href="https://store.rpipress.cc/collections/hackspace-magazine">Raspberry Pi Press online store</a> or your local newsagents.</p>


<div>
<figure><img decoding="async" loading="lazy" width="1024" height="1024" src="https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-1024x1024.jpg" alt="" srcset="https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-1024x1024.jpg 1024w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-300x300.jpg 300w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-150x150.jpg 150w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-768x768.jpg 768w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-1536x1536.jpg 1536w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-2048x2048.jpg 2048w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-800x800.jpg 800w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-100x100.jpg 100w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-450x450.jpg 450w, https://www.raspberrypi.com/app/uploads/2023/07/HS69_COVER-STORE-900x900.jpg 900w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div>    </div></div>
  </body>
</html>
