<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Daninet/mtxt">Original</a>
    <h1>Show HN: MTXT – Music Text Format</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">MTXT is a human-editable, text-based representation of music information.</p>

<ul dir="auto">
<li><strong>Beat-based</strong>: Events are placed on fractional beats using simple decimal notation (e.g., in a 4/4 time signature, 1 beat = 1 quarter note, so 3.25 represents 3 quarter notes plus 1 sixteenth note).</li>
<li><strong>One event per line</strong>: Easy to search and modify with any text editor.</li>
<li><strong>Human-friendly</strong>: Use of musical note names (C4, D#3, etc.) and custom note aliases (e.g. <code>kick</code> or <code>Cmaj7</code>). Hand-crafted files are practical and expressive.</li>
<li><strong>Transitions</strong>: Built-in support for gliding continuous parameters (CC, tempo) with customizable curves and timing.</li>
<li><strong>Real-time ready</strong>: Supports streaming musical events and real-time data transfer with transitions and flexible timing.</li>
<li><strong>Microtonal support</strong>: Built-in cents notation for notes (e.g. <code>C4+50</code>, <code>D4-25</code>) and global tuning commands for alternate tuning systems and just intonation.</li>
<li><strong>Flexible organization</strong>: Events can be written in any order in the file, with the parser handling chronological sorting.</li>
<li><strong>MIDI compatible</strong>: Reference implementation includes MIDI to MTXT and MTXT to MIDI conversion.</li>
<li><strong>LLM compatible</strong>: Can be easily generated and manipulated by language models.</li>
<li><strong>Future-proof</strong>: Supports up to 65535 channels, arbitrary CC parameters with custom string keys and custom metadata.</li>
</ul>

<div data-snippet-clipboard-copy-content="mtxt 1.0
meta global title Sunrise Melody
meta global author Jane Composer

// Define aliases for drums and chords
alias kick C1
alias Cmaj7 C4,E4,G4,B4

// Global tempo and time signature
0.0 tempo 100
0.0 timesig 4/4

// Set defaults for channel, duration, and velocity
ch=0
dur=1.0
vel=0.8

// Set voice. &#34;John&#39;s bright grand&#34; has precedence, but it falls back to a more generic &#34;piano&#34; if not found.
0.0 voice piano, John&#39;s bright grand

// Start silently
0.0 cc volume 0.0

// Fade in volume over 3.0 beats, ending at beat 4.0
4.0 cc volume 1.0 transition_time=3.0 transition_curve=0.5

// Play melody (uses default duration and velocity from above, unless overridden)
0.0 note C4
1.0 note E4 
2.0 note G4 vel=0.5
2.0 note G4 vel=0.5

// Chords can also be played (defined above as an alias for C4,E4,G4,B4 notes)
1.0 note Cmaj7 dur=2.0 vel=0.2

// Tempo ramp
8.0 tempo 120 transition_time=4.0

// Microtonal note (12TET equal temperament C4 + 50 cents)
3.0 note C4+50"><pre><code>mtxt 1.0
meta global title Sunrise Melody
meta global author Jane Composer

// Define aliases for drums and chords
alias kick C1
alias Cmaj7 C4,E4,G4,B4

// Global tempo and time signature
0.0 tempo 100
0.0 timesig 4/4

// Set defaults for channel, duration, and velocity
ch=0
dur=1.0
vel=0.8

// Set voice. &#34;John&#39;s bright grand&#34; has precedence, but it falls back to a more generic &#34;piano&#34; if not found.
0.0 voice piano, John&#39;s bright grand

// Start silently
0.0 cc volume 0.0

// Fade in volume over 3.0 beats, ending at beat 4.0
4.0 cc volume 1.0 transition_time=3.0 transition_curve=0.5

// Play melody (uses default duration and velocity from above, unless overridden)
0.0 note C4
1.0 note E4 
2.0 note G4 vel=0.5
2.0 note G4 vel=0.5

// Chords can also be played (defined above as an alias for C4,E4,G4,B4 notes)
1.0 note Cmaj7 dur=2.0 vel=0.2

// Tempo ramp
8.0 tempo 120 transition_time=4.0

// Microtonal note (12TET equal temperament C4 + 50 cents)
3.0 note C4+50
</code></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Rust Library and CLI Tool</h2><a id="user-content-rust-library-and-cli-tool" aria-label="Permalink: Rust Library and CLI Tool" href="#rust-library-and-cli-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repository includes a reference implementation in Rust that provides:</p>
<ul dir="auto">
<li><strong>Library (<code>mtxt</code>)</strong>: Rust crate for parsing and writing MTXT files, with MIDI conversion features.</li>
<li><strong>CLI tool</strong>: Command-line utility for converting between MIDI and MTXT formats with built-in transforms. Builds can be downloaded from <a href="https://github.com/Daninet/mtxt/releases">releases</a>.</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="mid2mtxt input.mid output.mtxt
mid2mtxt input.mtxt output.mid"><pre>mid2mtxt input.mid output.mtxt
mid2mtxt input.mtxt output.mid</pre></div>

<p dir="auto">The CLI supports various transforms that can be applied during conversion:</p>
<p dir="auto"><strong>Musical Transforms:</strong></p>
<ul dir="auto">
<li><code>--transpose &lt;SEMITONES&gt;</code> - Transpose all notes by semitones (e.g., <code>--transpose +2</code> or <code>--transpose -12</code>)</li>
<li><code>-q, --quantize &lt;GRID&gt;</code> - Quantize timing to a grid (e.g., <code>4</code> for quarter notes, <code>16</code> for 16th notes)</li>
<li><code>--swing &lt;AMOUNT&gt;</code> - Apply swing feel (0.0 to 1.0)</li>
<li><code>--humanize &lt;AMOUNT&gt;</code> - Add timing randomization for humanization (0.0 to 1.0)</li>
</ul>
<p dir="auto"><strong>Channel Filtering:</strong></p>
<ul dir="auto">
<li><code>--include-channels &lt;CHANNELS&gt;</code> - Include only specific channels (comma-separated, e.g., <code>1,2,10</code>)</li>
<li><code>--exclude-channels &lt;CHANNELS&gt;</code> - Exclude specific channels (comma-separated, e.g., <code>1,2,10</code>)</li>
</ul>
<p dir="auto"><strong>File Organization:</strong></p>
<ul dir="auto">
<li><code>--apply-directives</code> - Apply global directives to events (inline parameters)</li>
<li><code>--extract-directives</code> - Extract common inline parameters into global directives</li>
<li><code>--sort</code> - Sort events by time</li>
</ul>
<hr/>


<ul dir="auto">
<li>First line must declare version:

</li>
</ul>

<ul dir="auto">
<li>Lines beginning with <code>//</code> are comments and ignored by the parser.</li>
</ul>

<ul dir="auto">
<li>A file consists of:
<ol dir="auto">
<li>Version line</li>
<li>Global metadata (optional)</li>
<li>Events (can be in any timestamp order)</li>
</ol>
</li>
</ul>

<ul dir="auto">
<li>All times are in beats specified as fractional numbers. e.g. in a 4/4 time signature, 1 beat = 1 quarter note, so 3.25 represents 3 quarter notes plus 1 sixteenth note.</li>
<li>This allows changing the tempo and time signature without affecting the timing of events.</li>
<li>Events may appear in any order in the file; the parser will sort them before playback</li>
<li>Precision is limited to 5 decimal places (5 microseconds at 120 BPM).</li>
</ul>



<ul dir="auto">
<li>Declares the file format version in the major.minor format (e.g., <code>mtxt 1.0</code>).</li>
<li>Must be the first non-comment line.</li>
</ul>

<div data-snippet-clipboard-copy-content="// global meta (applies to the entire file and all channels)
meta global &lt;type&gt; &lt;value&gt;
// channel meta (applies to a single channel), starting from the specified time
[&lt;time&gt;] meta [ch=&lt;0..65535&gt;] &lt;type&gt; &lt;value&gt;"><pre><code>// global meta (applies to the entire file and all channels)
meta global &lt;type&gt; &lt;value&gt;
// channel meta (applies to a single channel), starting from the specified time
[&lt;time&gt;] meta [ch=&lt;0..65535&gt;] &lt;type&gt; &lt;value&gt;
</code></pre></div>
<ul dir="auto">
<li>Adds metadata (e.g., <code>title</code>, <code>author</code>, <code>copyright</code>, <code>trackname</code>, custom types).</li>
<li>Value extends from the type to the end of the line (or until inline comment).</li>
<li>Channel is optional, if not specified it inherits the channel from the previous <code>ch</code> command.</li>
<li>Time is optional, defaults to 0.0.</li>
<li>See <a href="#standard-meta-types">Standard Meta Types</a> for a list of standard types.</li>
<li>Newline characters in  need to be escaped to avoid breaking the syntax.</li>
</ul>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>title</code></td>
<td>Song title</td>
<td><code>meta global title My Song</code></td>
</tr>
<tr>
<td><code>author</code></td>
<td>Composer/author</td>
<td><code>meta global author John Doe</code></td>
</tr>
<tr>
<td><code>copyright</code></td>
<td>Copyright notice</td>
<td><code>meta global copyright © 2024 Music Corp</code></td>
</tr>
<tr>
<td><code>composer</code></td>
<td>Composer name</td>
<td><code>meta global composer John Doe</code></td>
</tr>
<tr>
<td><code>name</code></td>
<td>Channel name</td>
<td><code>meta ch=1 name Lead Guitar</code></td>
</tr>
<tr>
<td><code>instrument</code></td>
<td>Instrument name</td>
<td><code>meta ch=2 instrument Steinway Grand</code></td>
</tr>
<tr>
<td><code>smpte</code></td>
<td>SMPTE offset</td>
<td><code>meta global smpte 00:00:00:00</code></td>
</tr>
<tr>
<td><code>keysignature</code></td>
<td>Key signature</td>
<td><code>4.0 meta ch=3 keysignature C major</code></td>
</tr>
<tr>
<td><code>text</code></td>
<td>General text</td>
<td><code>meta text Verse 1</code></td>
</tr>
<tr>
<td><code>lyric</code></td>
<td>Lyrics</td>
<td><code>5.0 meta lyric Hello world</code></td>
</tr>
<tr>
<td><code>marker</code></td>
<td>Marker/cue point</td>
<td><code>6.0 meta marker Chorus</code></td>
</tr>
<tr>
<td><code>cue</code></td>
<td>Cue point</td>
<td><code>7.0 meta cue Solo begins</code></td>
</tr>
<tr>
<td><code>program</code></td>
<td>Program name</td>
<td><code>meta global program Piano Ballad</code></td>
</tr>
<tr>
<td><code>device</code></td>
<td>Device name</td>
<td><code>meta global device OpenPiano 1000</code></td>
</tr>
<tr>
<td><code>key</code></td>
<td>Key signature</td>
<td><code>meta global key C major</code></td>
</tr>
<tr>
<td><code>date</code></td>
<td>Creation date</td>
<td><code>meta global date 2024-01-01</code></td>
</tr>
<tr>
<td><code>genre</code></td>
<td>Musical genre</td>
<td><code>meta global genre Rock</code></td>
</tr>
<tr>
<td><code>album</code></td>
<td>Album name</td>
<td><code>meta global album Greatest Hits</code></td>
</tr>
<tr>
<td><code>url</code></td>
<td>Related URL</td>
<td><code>meta global url https://example.com</code></td>
</tr>
<tr>
<td><code>artist</code></td>
<td>Performer name</td>
<td><code>meta global artist The Band</code></td>
</tr>
<tr>
<td><code>license</code></td>
<td>Usage license</td>
<td><code>meta global license CC-BY-4.0</code></td>
</tr>
<tr>
<td><code>generator</code></td>
<td>Software tool</td>
<td><code>meta global generator MySequencer v1.0</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>


<ul dir="auto">
<li>Sets the default MIDI channel for subsequent events.</li>
<li>Inline <code>ch=&lt;N&gt;</code> on events overrides the default for that event only.</li>
<li>Required before channel-dependent events that omit inline <code>ch</code>.</li>
</ul>


<ul dir="auto">
<li>Defines a named alias for a note pitch or a chord.</li>
<li><code>&lt;name&gt;</code>: Alphanumeric identifier (e.g., <code>snare</code>, <code>Cmaj7</code>).</li>
<li><code>&lt;value&gt;</code>: Target note(s), comma-separated if multiple.</li>
<li>No timestamp. Applies to all subsequent events in the file until overridden.</li>
<li>Example:
<div data-snippet-clipboard-copy-content="alias snare C2
alias Cmaj7 C4,E4,G4,B4  // chord alias
0.0 note snare
1.0 note Cmaj7          // plays all 4 notes"><pre><code>alias snare C2
alias Cmaj7 C4,E4,G4,B4  // chord alias
0.0 note snare
1.0 note Cmaj7          // plays all 4 notes
</code></pre></div>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">vel (default note-on velocity)</h3><a id="user-content-vel-default-note-on-velocity" aria-label="Permalink: vel (default note-on velocity)" href="#vel-default-note-on-velocity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Sets the default note-on velocity.</li>
<li>Inline <code>vel=&lt;N&gt;</code> on <code>note</code>/<code>on</code> overrides for that event.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">offvel (default note-off velocity)</h3><a id="user-content-offvel-default-note-off-velocity" aria-label="Permalink: offvel (default note-off velocity)" href="#offvel-default-note-off-velocity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Sets the default note-off velocity.</li>
<li>Inline <code>offvel=&lt;N&gt;</code> on <code>note</code>/<code>off</code> overrides for that event.</li>
<li>Defaults to <code>1.0</code> if not set.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">dur (default note duration)</h3><a id="user-content-dur-default-note-duration" aria-label="Permalink: dur (default note duration)" href="#dur-default-note-duration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Sets the default note duration in beats.</li>
<li>Inline <code>dur=&lt;N&gt;</code> on <code>note</code> overrides for that event.</li>
<li>Defaults to <code>1.0</code> if not set.</li>
</ul>

<div data-snippet-clipboard-copy-content="transition_curve=&lt;float&gt;
transition_interval=&lt;float&gt;"><pre><code>transition_curve=&lt;float&gt;
transition_interval=&lt;float&gt;
</code></pre></div>
<ul dir="auto">
<li>Sets default transition parameters for <code>cc</code> and <code>tempo</code>.</li>
<li><code>transition_time</code> must be specified per event (default <code>0.0</code>).</li>
<li>See <strong>Transitions</strong> section for details.</li>
<li>Defaults: <code>curve=0.0</code>, <code>interval=1.0</code>.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; note &lt;NOTE&gt; [dur=&lt;float&gt;] [vel=&lt;0..1&gt;] [offvel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]"><pre><code>&lt;time&gt; note &lt;NOTE&gt; [dur=&lt;float&gt;] [vel=&lt;0..1&gt;] [offvel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]
</code></pre></div>
<ul dir="auto">
<li>Emits note-on at <code>&lt;time&gt;</code> and note-off at <code>&lt;time + dur&gt;</code>.</li>
<li>Uses defaults from <code>dur</code>, <code>vel</code>, <code>offvel</code>, and <code>ch</code> unless overridden.</li>
<li><code>&lt;time&gt;</code> is absolute beat <code>BEAT.SUB</code> (0-based). Example: <code>3.5</code>.</li>
<li><code>&lt;NOTE&gt;</code> can be a standard note name or an <code>alias</code>.</li>
<li>Standard names support <code>C..B</code> with <code>#</code>/<code>b</code>, octave required (e.g., <code>C4</code>).
<ul dir="auto">
<li>Allowed: <code>C, C#, Db, D, D#, Eb, E, F, F#, Gb, G, G#, Ab, A, A#, Bb, B</code></li>
<li><strong>Case insensitive</strong>: Both uppercase and lowercase are accepted (<code>C4</code>, <code>c4</code>, <code>Bb2</code>, <code>bb2</code>, <code>F#3</code>, <code>f#3</code>)</li>
<li>Double accidentals <strong>not allowed</strong>.</li>
<li>Microtonal: <code>+N</code>/<code>-N</code> cents (range <code>-99..+99</code>), applied via pitch bend. Examples: <code>C4+50</code> (50 cents sharp), <code>D4-25</code> (25 cents flat), <code>bb2+10.5</code> (10.5 cents sharp). Positive values require <code>+</code>.</li>
</ul>
</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; on &lt;NOTE&gt; [vel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]"><pre><code>&lt;time&gt; on &lt;NOTE&gt; [vel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]
</code></pre></div>
<ul dir="auto">
<li>Emits a note-on only; useful for streaming.</li>
<li>Uses default <code>vel</code> and <code>ch</code> unless overridden.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; off &lt;NOTE&gt; [offvel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]"><pre><code>&lt;time&gt; off &lt;NOTE&gt; [offvel=&lt;0..1&gt;] [ch=&lt;0..65535&gt;]
</code></pre></div>
<ul dir="auto">
<li>Emits a note-off only; useful for streaming.</li>
<li>Uses default <code>offvel</code> and <code>ch</code> unless overridden.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; cc [note] &lt;controller&gt; &lt;value&gt; [ch=&lt;0..65535&gt;] [transition_curve=&lt;float&gt;] [transition_time=&lt;float&gt;] [transition_interval=&lt;float&gt;]"><pre><code>&lt;time&gt; cc [note] &lt;controller&gt; &lt;value&gt; [ch=&lt;0..65535&gt;] [transition_curve=&lt;float&gt;] [transition_time=&lt;float&gt;] [transition_interval=&lt;float&gt;]
</code></pre></div>
<ul dir="auto">
<li>Sends a control change. <code>&lt;controller&gt;</code> identifies the parameter.</li>
<li><code>&lt;value&gt;</code> is <code>[0.0..1.0]</code>. Uses default <code>ch</code> unless overridden.</li>
<li>Uses global transition defaults unless overridden inline.</li>
<li>Optional <code>note</code> to apply CC to a specific note. If a note is specified, it applies to that note only.</li>
<li>When a note is not specified, it applies to all notes within a channel.</li>
<li>Arbitrary string keys can be used for custom parameters (e.g., <code>cc my_param 0.5</code>).</li>
</ul>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Name</th>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pitch</code></td>
<td><code>-12.0..12.0</code></td>
<td>Pitch bend in semitones. 0=none, 1 = one semitone up, <code>-0.005</code> = half cent down</td>
</tr>
<tr>
<td><code>aftertouch</code></td>
<td><code>0.0..1.0</code></td>
<td>Channel or Polyphonic Aftertouch</td>
</tr>
<tr>
<td><code>vibrato</code></td>
<td><code>0.0..1.0</code></td>
<td>Vibrato depth (Modulation Wheel)</td>
</tr>
<tr>
<td><code>vibrato_rate</code></td>
<td><code>0.0..1024.0</code></td>
<td>Vibrato rate in Hz</td>
</tr>
<tr>
<td><code>breath</code></td>
<td><code>0.0..1.0</code></td>
<td>Breath controller pressure</td>
</tr>
<tr>
<td><code>foot</code></td>
<td><code>0.0..1.0</code></td>
<td>Foot controller pedal position</td>
</tr>
<tr>
<td><code>portamento</code></td>
<td><code>0.0..1.0</code></td>
<td>Portamento glide time</td>
</tr>
<tr>
<td><code>volume</code></td>
<td><code>0.0..1.0</code></td>
<td>Channel volume level</td>
</tr>
<tr>
<td><code>balance</code></td>
<td><code>-1.0..1.0</code></td>
<td>Stereo balance (left &lt; 0, right &gt; 0)</td>
</tr>
<tr>
<td><code>pan</code></td>
<td><code>-1.0..1.0</code></td>
<td>Stereo panning position (left &lt; 0, right &gt; 0)</td>
</tr>
<tr>
<td><code>expression</code></td>
<td><code>0.0..1.0</code></td>
<td>Expression (secondary volume, relative to main)</td>
</tr>
<tr>
<td><code>sustain</code></td>
<td><code>0.0..1.0</code></td>
<td>Sustain pedal (damper) on/off (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>portamento_switch</code></td>
<td><code>0.0..1.0</code></td>
<td>Portamento on/off switch (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>sostenuto</code></td>
<td><code>0.0..1.0</code></td>
<td>Sostenuto pedal on/off (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>soft</code></td>
<td><code>0.0..1.0</code></td>
<td>Soft pedal (una corda) on/off (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>legato</code></td>
<td><code>0.0..1.0</code></td>
<td>Legato footswitch on/off (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>sound_variation</code></td>
<td><code>0.0..1.0</code></td>
<td>Sound variation</td>
</tr>
<tr>
<td><code>timbre</code></td>
<td><code>0.0..1.0</code></td>
<td>Timbre/harmonic intensity</td>
</tr>
<tr>
<td><code>resonance</code></td>
<td><code>0.0..1.0</code></td>
<td>Resonance/Harmonic Content</td>
</tr>
<tr>
<td><code>attack</code></td>
<td><code>0.0..1.0</code></td>
<td>Attack time</td>
</tr>
<tr>
<td><code>decay</code></td>
<td><code>0.0..1.0</code></td>
<td>Decay time</td>
</tr>
<tr>
<td><code>hold</code></td>
<td><code>0.0..1.0</code></td>
<td>Hold time</td>
</tr>
<tr>
<td><code>sustain_level</code></td>
<td><code>0.0..1.0</code></td>
<td>Sustain level (envelope)</td>
</tr>
<tr>
<td><code>release</code></td>
<td><code>0.0..1.0</code></td>
<td>Release time</td>
</tr>
<tr>
<td><code>cutoff</code></td>
<td><code>0.0..1.0</code></td>
<td>Filter cutoff frequency (Brightness)</td>
</tr>
<tr>
<td><code>reverb</code></td>
<td><code>0.0..1.0</code></td>
<td>Reverb send level</td>
</tr>
<tr>
<td><code>tremolo</code></td>
<td><code>0.0..1.0</code></td>
<td>Tremolo depth</td>
</tr>
<tr>
<td><code>tremolo_rate</code></td>
<td><code>0.0..1024.0</code></td>
<td>Tremolo rate in Hz</td>
</tr>
<tr>
<td><code>chorus</code></td>
<td><code>0.0..1.0</code></td>
<td>Chorus send level</td>
</tr>
<tr>
<td><code>detune</code></td>
<td><code>0.0..1.0</code></td>
<td>Detune depth</td>
</tr>
<tr>
<td><code>phaser</code></td>
<td><code>0.0..1.0</code></td>
<td>Phaser depth</td>
</tr>
<tr>
<td><code>distortion</code></td>
<td><code>0.0..1.0</code></td>
<td>Distortion/Drive amount</td>
</tr>
<tr>
<td><code>compression</code></td>
<td><code>0.0..1.0</code></td>
<td>Compression amount</td>
</tr>
<tr>
<td><code>local_control</code></td>
<td><code>0.0..1.0</code></td>
<td>Local control on/off (&gt; 0.5 is on)</td>
</tr>
<tr>
<td><code>polyphony</code></td>
<td><code>1.0..1024.0</code></td>
<td>Polyphony count (rounded to int). 1=mono</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div dir="auto"><h3 tabindex="-1" dir="auto">voice (instrument selection)</h3><a id="user-content-voice-instrument-selection" aria-label="Permalink: voice (instrument selection)" href="#voice-instrument-selection"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div data-snippet-clipboard-copy-content="&lt;time&gt; voice [ch=&lt;0..65535&gt;] &lt;voice_list&gt;"><pre><code>&lt;time&gt; voice [ch=&lt;0..65535&gt;] &lt;voice_list&gt;
</code></pre></div>
<ul dir="auto">
<li>Sets the instrument voice for the channel.</li>
<li><code>&lt;voice_list&gt;</code> is a comma-separated list of voice names (e.g., <code>piano, acoustic piano, john&#39;s super piano</code>).</li>
<li>The synthesizer should use the <strong>last</strong> voice in the list that it supports.</li>
<li>It is recommended to use a standard voice from <code>instruments.md</code> as the first item for compatibility.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; tempo &lt;bpm&gt; [transition_curve=&lt;float&gt;] [transition_time=&lt;float&gt;] [transition_interval=&lt;float&gt;]"><pre><code>&lt;time&gt; tempo &lt;bpm&gt; [transition_curve=&lt;float&gt;] [transition_time=&lt;float&gt;] [transition_interval=&lt;float&gt;]
</code></pre></div>
<ul dir="auto">
<li>Sets tempo in BPM at <code>&lt;time&gt;</code>.</li>
<li>Uses global transition defaults unless overridden inline.</li>
<li>By default, tempo is at 120 BPM at the start of the file.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; timesig &lt;NUM&gt;/&lt;DEN&gt;"><pre><code>&lt;time&gt; timesig &lt;NUM&gt;/&lt;DEN&gt;
</code></pre></div>
<ul dir="auto">
<li>Sets time signature; affects beat interpretation after <code>&lt;time&gt;</code>.</li>
<li>By default, time signature is 4/4 at the start of the file.</li>
</ul>

<div data-snippet-clipboard-copy-content="&lt;time&gt; tuning &lt;target&gt; &lt;cents&gt;"><pre><code>&lt;time&gt; tuning &lt;target&gt; &lt;cents&gt;
</code></pre></div>
<ul dir="auto">
<li>By default, notes are defined with equal temperament tuning (12TET).</li>
<li>Sets the global tuning offset for a note or pitch class.</li>
<li><code>&lt;target&gt;</code> can be a pitch class (e.g., <code>C</code>, <code>F#</code>) or a specific note (e.g., <code>C4</code>).</li>
<li><code>&lt;cents&gt;</code> is in range <code>[-100.0..+100.0]</code>. Positive values must use <code>+</code>.</li>
<li>Tuning is additive: <code>Final Pitch = Standard Pitch + Tuning + Note Offset</code>.</li>
<li>Changes are instantaneous (no interpolation).</li>
<li>Specific note tuning overrides pitch class tuning.</li>
<li>Example:
<div data-snippet-clipboard-copy-content="0.0 tuning E -13.7   // Flatten all Es
0.0 tuning G +3.5    // Sharpen all Gs
0.0 tuning E4 0.0    // Exception: E4 is standard tuning (overrides previous line)"><pre><code>0.0 tuning E -13.7   // Flatten all Es
0.0 tuning G +3.5    // Sharpen all Gs
0.0 tuning E4 0.0    // Exception: E4 is standard tuning (overrides previous line)
</code></pre></div>
</li>
</ul>


<ul dir="auto">
<li>Resets state variables to defaults.</li>
<li><code>&lt;target&gt;</code> options:
<ul dir="auto">
<li><code>all</code> (default): All notes off, all controllers reset, tuning cleared on all channels.</li>
<li><code>ch=&lt;N&gt;</code>: Resets controllers and turns off notes on specific channel.</li>
<li><code>tuning</code>: Clears all global tuning definitions.</li>
</ul>
</li>
<li>Example:
<div data-snippet-clipboard-copy-content="10.0 reset all
12.0 reset ch=1
14.0 reset tuning"><pre><code>10.0 reset all
12.0 reset ch=1
14.0 reset tuning
</code></pre></div>
</li>
</ul>


<ul dir="auto">
<li>Sends raw SysEx bytes (space-separated hex, including <code>F0</code>/<code>F7</code> as needed).</li>
<li>Example: <code>12.0 sysex F0 7E 7F 09 01 F7</code></li>
</ul>


<ul dir="auto">
<li>Lines beginning with <code>//</code> are ignored by the parser.</li>
</ul>

<p dir="auto">Use transitions to glide a continuous parameter to a target value by a specific beat, with a chosen feel.</p>
<ul dir="auto">
<li>Supported on: <code>cc</code>, <code>tempo</code>.</li>
<li>Fields:
<ul dir="auto">
<li><code>transition_curve=&lt;alpha&gt;</code> controls the feel of the glide:
<ul dir="auto">
<li><code>0.0</code> (linear): steady change from start to finish (default)</li>
<li><code>&gt; 0</code> (gentle start → speeds up): musical &#34;ease-in&#34;, swells late.</li>
<li><code>&lt; 0</code> (fast start → settles): musical &#34;ease-out&#34;, arrives smoothly.</li>
</ul>
</li>
<li><code>transition_time=&lt;duration&gt;</code> (<code>τ</code>) is the glide length in beats. Defaults to <code>0.0</code> (instant jump). The change begins at <code>T − τ</code> and reaches the target at command time <code>T</code>.</li>
<li><code>transition_interval=&lt;duration&gt;</code> is the minimum time between each value update in milliseconds. Defaults to <code>1.0</code> (as fast as possible).</li>
</ul>
</li>
</ul>
<p dir="auto">Examples:</p>
<ul dir="auto">
<li><code>0.0 cc pitch 0.0</code> — pitch is <code>0.0</code> at <code>0.0</code>.</li>
<li><code>1.0 cc pitch 0.5 transition_time=0.2</code> — pitch glides to <code>0.5</code> value between beats <code>0.8</code> and <code>1.0</code>.</li>
<li><code>5.0 cc pitch 0.95 transition_curve=0.5 transition_time=1.5</code> — starts at <code>3.5</code>, accelerates toward <code>0.95</code> near <code>5.0</code>.</li>
<li><code>7.0 cc volume 0.2 transition_curve=-0.4 transition_time=2.0</code> — begins at <code>5.0</code>, moves quickly then coasts into <code>0.2</code> at <code>7.0</code>.</li>
</ul>
<p dir="auto">Curve definition:</p>
<ul dir="auto">
<li><code>value(t) = V0 + (V1 − V0) * ( s + max(α,0) * (s^4 − s) − max(−α,0) * ((1 − (1 − s)^4) − s) )</code></li>
<li><code>s = (t − (T − τ)) / τ</code>; if <code>τ = 0</code>, the change is instant at <code>T</code>.</li>
</ul>
<p dir="auto">Notes:</p>
<ul dir="auto">
<li>Each transition needs a defined value before its end time <code>T</code> to establish the start (<code>V0</code> at <code>T − τ</code>). If no prior value exists, this is an error.</li>
<li>Overlapping transitions on the same parameter/channel: the new transition immediately aborts the previous at the current value and takes over. When segments conflict, the one with the later end beat (<code>T</code>) has precedence.</li>
</ul>
<hr/>

<p dir="auto">Copyright © 2025 Dani Biró</p>
<p dir="auto">Licensed under the MIT License.</p>
</article></div></div>
  </body>
</html>
