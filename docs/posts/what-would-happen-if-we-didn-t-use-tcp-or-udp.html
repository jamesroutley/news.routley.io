<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Hawzen/hdp">Original</a>
    <h1>What would happen if we didn&#39;t use TCP or UDP?</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Switches, bridges, routers, load balancers, firewalls‚Äîthese network boxes keep the internet running. Routing, blocking, mirroring, duplicating and deduplicating traffic in ways most people never think about. Without them, this document wouldn‚Äôt have reached you</p>
<p dir="auto">But the network is just one layer. The OS has its own way of handling packets‚Äîclassifying, queuing, enforcing firewall rules, translating addresses, deciding what gets through and what gets dropped without a trace. Every part plays by its own rules, shaping what‚Äôs ‚Äúallowed‚Äù and what&#39;s not</p>
<p dir="auto">At some point, I wondered‚Äî<em>what if I sent a packet using a transport protocol that didn‚Äôt exist?</em> Not TCP, not UDP, not even ICMP‚Äîsomething completely made up. Would the OS let it through? Would it get stopped before it even left my machine? Would routers ignore it, or would some middlebox kill it on sight? Could it actually move faster by slipping past common firewall rules?</p>
<p dir="auto">No idea.</p>
<p dir="auto">So I had to try.</p>
<p dir="auto">First, I sent the packets to myself, just to see how my own machine handled the poison I made up. Then, I sent them across continents to a remote Linux machine to see if they‚Äôd actually make it.</p>

<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">Feel free to skip this section if you already know how the internet works. Otherwise, continue reading on</p>
</div>
<p dir="auto">But wait‚Äîwhat exactly is a transport layer protocol?</p>
<p dir="auto">The internet isn‚Äôt magic. It just looks that way. Underneath, it‚Äôs a stack of protocols, each one shoving data to the next until it reaches its destination. At the application level, you send a request‚Äîloading a website, streaming a video, or whatever you do. That request gets wrapped by the OS in multiple layers of metadata, addresses, and headers, until it‚Äôs nothing but raw bits flying through the network</p>
<p dir="auto">It kinda works like this:</p>
<p dir="auto">  <a target="_blank" rel="noopener noreferrer" href="https://github.com/Hawzen/hdp/blob/master/readme_assets/internet_protocols.png"><img src="https://github.com/Hawzen/hdp/raw/master/readme_assets/internet_protocols.png" alt="a visual guide to how the internet works, it kinda sucks but that why i like it."/></a> </p>
<p dir="auto"><sub>The diagram is 100% correct and should be included in all networking textbooks.</sub></p>
<p dir="auto">At the top, apps‚Äîbrowsers, games, whatever‚Äîgenerate requests (Load this page, Send this message, Connect to this game server). Then the requests start their descent through the network stack, getting wrapped, encoded, and addressed at each layer, until all that‚Äôs left is a stream of bits flying into the void</p>
<p dir="auto">Each layer plays a role. IP assigns addresses and makes sure packets know where they‚Äôre going. The link layer handles the actual transmission‚ÄîWi-Fi, Ethernet, fiber optics, whatever. There‚Äôs more to it, but we‚Äôre not going down that rabbit hole right now. What matters is the layer that makes network communication actually usable</p>
<p dir="auto">The <strong>transport layer</strong> is where networking personally starts to get interesting. It‚Äôs the first truly complex protocol layer. It doesn‚Äôt just move packets‚Äîit manages connections, makes sure multiple applications can share the same machine, and decides how data should flow.</p>
<p dir="auto">This is where <strong>TCP</strong>, <strong>UDP</strong>, and their weird cousins live. The <strong>IP Protocol</strong> defines a field called <code>Protocol</code>. Setting this field to 6 means the encapsulated packet is TCP, 17 is UDP, and <a href="https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers" rel="nofollow">there are others defined</a> but some numbers are deliberately left out for future use</p>
<p dir="auto">But what if we used those <em>unused</em> numbers?</p>

<p dir="auto">There are simply too many variables to this experiment. My OS, my router, the receiver&#39;s OS, and god knows how many middle boxes are littered on the open internet. It&#39;s hard to extrapolate conclusions from experimentation with all these moving parts‚Äîso I thought of the following: To begin, I&#39;ll send the packets to <em>my own machine</em>, this guarantees that any results are solely due to my OS&#39;s behaviour</p>
<p dir="auto">First, I designed a <a href="https://github.com/Hawzen/hdp/blob/master/hdp_specification.md">simple protocol</a>: <strong>HDP</strong>. The specifics don‚Äôt matter‚Äîwhat matters is that it doesn‚Äôt resemble any known protocol. It‚Äôs an outsider, something the OS and network stack weren‚Äôt expecting</p>
<p dir="auto">Next, I built a <a href="https://github.com/Hawzen/hdp/blob/master/src/server/main.rs">server, or a listener</a>, whatever you call it. The machine running this code will be patiently waiting for any packets. Then I wrote a <a href="https://github.com/Hawzen/hdp/blob/master/src/client/main.rs">client</a>, the machine running this code will send HDP packets to the server</p>
<p dir="auto">Finally, here are the steps I&#39;ll attempt</p>
<ol dir="auto">
<li>Startup an HDP server
<ul dir="auto">
<li>Which will ask the OS to forward any packets with the protocol 255 to a socket it controls</li>
</ul>
</li>
<li>Run the HDP client, sending packets to my local machine
<ul dir="auto">
<li>The client will ask the OS to nicely deliver the packets to 127.0.01
<ul dir="auto">
<li>The OS is configured to hand packets with that target address to the loopback <a href="https://en.wikipedia.org/wiki/Network_interface_controller" rel="nofollow">network interface</a>
<ul dir="auto">
<li>The loopback interface should realize: &#34;uhhh.. this packet should go right back in?&#34;, and send it back to my own machine</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>The OS delivers them to the HDP server unmodified..?? ü§û</li>
</ol>
<p dir="auto">Let&#39;s do it</p>
<p dir="auto">I opened two shells‚Äîone was the server:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ sudo cargo run --bin server"><pre><span><span>$</span></span> sudo cargo run <span><span>--</span>bin server</span></pre></div>
<p dir="auto">And in another shell I opened the client</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ fortune | cowsay | sudo cargo run --bin client 127.0.0.1"><pre><span><span>$</span></span> fortune <span>|</span> cowsay <span>|</span> sudo cargo run <span><span>--</span>bin client 127.0.0.1</span></pre></div>
<p dir="auto">Alright, let&#39;s send the packet via the client. 3, 2, 1, and..</p>
<p dir="auto">The server got the message!</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ sudo cargo run --bin server
~~~ IP Header ~~~
Version: 4
IHL: 5
DSCP: 0
ECN: 0
Total Length: 58625
Identification: 36455
Flags: 0
Fragment Offset: 0
TTL: 64
Protocol: 255
Header Checksum: 0
Source IP: [127, 0, 0, 1]
Destination IP: [127, 0, 0, 1]


~~~ HDP Header &amp; Data ~~~
Source Port: 420
Destination Port: 420
Timestamp: 1739640243546134000
Data:  _________________________________________
/ Marriage is not merely sharing the      \
| fettucine, but sharing the burden of    |
| finding the fettucine restaurant in the |
| first place.                            |
|                                         |
\ -- Calvin Trillin                       /
 -----------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||"><pre><span><span>$</span></span> sudo cargo run <span><span>--</span>bin server</span>
<span>~~~</span> <span>IP</span> <span>Header</span> <span>~~~</span>
<span>Version</span><span>:</span> <span>4</span>
<span>IHL</span><span>:</span> <span>5</span>
<span>DSCP</span><span>:</span> <span>0</span>
<span>ECN</span><span>:</span> <span>0</span>
<span>Total</span> <span>Length</span><span>:</span> <span>58625</span>
<span>Identification</span><span>:</span> <span>36455</span>
<span>Flags</span><span>:</span> <span>0</span>
<span>Fragment</span> <span>Offset</span><span>:</span> <span>0</span>
<span>TTL</span><span>:</span> <span>64</span>
<span>Protocol</span><span>:</span> <span>255</span>
<span>Header</span> <span>Checksum</span><span>:</span> <span>0</span>
<span>Source</span> <span>IP</span><span>:</span> [<span>127</span>, <span>0</span>, <span>0</span>, <span>1</span>]
<span>Destination</span> <span>IP</span><span>:</span> [<span>127</span>, <span>0</span>, <span>0</span>, <span>1</span>]


<span>~~~</span> <span>HDP</span> <span>Header</span> <span>&amp;</span> <span>Data</span> <span>~~~</span>
<span>Source</span> <span>Port</span><span>:</span> <span>420</span>
<span>Destination</span> <span>Port</span><span>:</span> <span>420</span>
<span>Timestamp</span><span>:</span> <span>1739640243546134000</span>
<span>Data</span><span>:</span>  _________________________________________
<span><span>/</span></span> <span>Marriage</span> is <span>not</span> merely sharing the      \
<span>|</span> fettucine, but sharing the burden <span>of</span>    <span>|</span>
<span>|</span> finding the fettucine restaurant <span>in</span> the <span>|</span>
<span>|</span> first place<span>.</span>                            <span>|</span>
<span>|</span>                                         <span>|</span>
<span>\</span> <span><span>--</span> Calvin Trillin                       /</span>
 <span><span>-----------------------------------------</span></span>
        <span>\</span>   <span>^</span>__<span>^</span>
         <span>\</span>  (oo)<span>\</span>_______
            (__)<span>\</span>       )<span>\/\</span>
                <span>||----</span>w <span>|</span>
                <span>||</span>     <span>||</span></pre></div>
<p dir="auto">Success! The OS accepted my protocol, looped it back, and delivered it to the server with no shenanigans happening, unexpected!. But before calling it a day, I had another question:</p>
<p dir="auto">What would happen if we repeated this experiment, whilst changing the protocol number defined in the IP packet?</p>
<p dir="auto">My initial choice of <strong>255</strong> was arbitrary‚Äîit was an unused protocol number. But what if I tried something more‚Ä¶ unconventional? I decided to test different protocol numbers, including:</p>
<ul dir="auto">
<li>6, the number assigned to <strong>TCP</strong> packets</li>
<li>Or 2, which is the protocol number used for <strong>ICMP</strong> (i.e., the thing powering <code>ping</code>)</li>
<li>Or even 256, an index beyond the defined boundaries of the IP Protocol
Would they make it? Would the OS freak out?</li>
</ul>
<p dir="auto">Let&#39;s see:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fortune | cowsay | sudo cargo run --bin client 127.0.0.1 # This time looping over protocol numbers"><pre>fortune <span>|</span> cowsay <span>|</span> sudo cargo run <span><span>--</span>bin client 127.0.0.1 # This time looping over protocol numbers</span></pre></div>
<details>
<summary></summary>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Protocol Number</th>
<th>Source IP (Server)</th>
<th>Byte Sum (Server)</th>
<th>Received (Server)</th>
<th>Succeeded (Client)</th>
<th>Byte sum (Client)</th>
<th>Failure reason (Client)</th>
<th>Time difference (Œºs)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>70</td>
</tr>
<tr>
<td>1</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>nan</td>
</tr>
<tr>
<td>2</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>nan</td>
</tr>
<tr>
<td>3</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>61</td>
</tr>
<tr>
<td>4</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>5</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>54</td>
</tr>
<tr>
<td>6</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>nan</td>
</tr>
<tr>
<td>7</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>8</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>63</td>
</tr>
<tr>
<td>9</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>66</td>
</tr>
<tr>
<td>10</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>11</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>12</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>63</td>
</tr>
<tr>
<td>13</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>63</td>
</tr>
<tr>
<td>14</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>15</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>80</td>
</tr>
<tr>
<td>16</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>64</td>
</tr>
<tr>
<td>17</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>nan</td>
</tr>
<tr>
<td>18</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>42</td>
</tr>
<tr>
<td>19</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>82</td>
</tr>
<tr>
<td>20</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>21</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>22</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>23</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>51</td>
</tr>
<tr>
<td>24</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>54</td>
</tr>
<tr>
<td>25</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>26</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>48</td>
</tr>
<tr>
<td>27</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>43</td>
</tr>
<tr>
<td>28</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>29</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>66</td>
</tr>
<tr>
<td>30</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>56</td>
</tr>
<tr>
<td>31</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>65</td>
</tr>
<tr>
<td>32</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>56</td>
</tr>
<tr>
<td>33</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>49</td>
</tr>
<tr>
<td>34</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>47</td>
</tr>
<tr>
<td>35</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>48</td>
</tr>
<tr>
<td>36</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>37</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>47</td>
</tr>
<tr>
<td>38</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>45</td>
</tr>
<tr>
<td>39</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>40</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>57</td>
</tr>
<tr>
<td>41</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>56</td>
</tr>
<tr>
<td>42</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>51</td>
</tr>
<tr>
<td>43</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>45</td>
</tr>
<tr>
<td>44</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>58</td>
</tr>
<tr>
<td>45</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>46</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>47</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>48</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>51</td>
</tr>
<tr>
<td>49</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>84</td>
</tr>
<tr>
<td>50</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü§Ø</td>
<td>-</td>
<td>Operation not supported on socket (os error 102)</td>
<td>nan</td>
</tr>
<tr>
<td>51</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü§Ø</td>
<td>-</td>
<td>Operation not supported on socket (os error 102)</td>
<td>nan</td>
</tr>
<tr>
<td>52</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>53</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>115</td>
</tr>
<tr>
<td>54</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>81</td>
</tr>
<tr>
<td>55</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>83</td>
</tr>
<tr>
<td>56</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>57</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>58</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>69</td>
</tr>
<tr>
<td>59</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>80</td>
</tr>
<tr>
<td>60</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>84</td>
</tr>
<tr>
<td>61</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>105</td>
</tr>
<tr>
<td>62</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>109</td>
</tr>
<tr>
<td>63</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>64</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>100</td>
</tr>
<tr>
<td>65</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>66</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>124</td>
</tr>
<tr>
<td>67</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>101</td>
</tr>
<tr>
<td>68</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>100</td>
</tr>
<tr>
<td>69</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>87</td>
</tr>
<tr>
<td>70</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>71</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>101</td>
</tr>
<tr>
<td>72</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>73</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>111</td>
</tr>
<tr>
<td>74</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>104</td>
</tr>
<tr>
<td>75</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>115</td>
</tr>
<tr>
<td>76</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>77</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>78</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>65</td>
</tr>
<tr>
<td>79</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>54</td>
</tr>
<tr>
<td>80</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>150</td>
</tr>
<tr>
<td>81</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>82</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>83</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>74</td>
</tr>
<tr>
<td>84</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>93</td>
</tr>
<tr>
<td>85</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>86</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>87</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>70</td>
</tr>
<tr>
<td>88</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>49</td>
</tr>
<tr>
<td>89</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>90</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>74</td>
</tr>
<tr>
<td>91</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>78</td>
</tr>
<tr>
<td>92</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>61</td>
</tr>
<tr>
<td>93</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>94</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>55</td>
</tr>
<tr>
<td>95</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>96</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>97</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>98</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>66</td>
</tr>
<tr>
<td>99</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>54</td>
</tr>
<tr>
<td>100</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>53</td>
</tr>
<tr>
<td>101</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>102</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>148</td>
</tr>
<tr>
<td>103</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>111</td>
</tr>
<tr>
<td>104</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>119</td>
</tr>
<tr>
<td>105</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>106</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>107</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>53</td>
</tr>
<tr>
<td>108</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>52</td>
</tr>
<tr>
<td>109</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>44</td>
</tr>
<tr>
<td>110</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>59</td>
</tr>
<tr>
<td>111</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>51</td>
</tr>
<tr>
<td>112</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>45</td>
</tr>
<tr>
<td>113</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>114</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>115</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>85</td>
</tr>
<tr>
<td>116</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>84</td>
</tr>
<tr>
<td>117</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>64</td>
</tr>
<tr>
<td>118</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>24</td>
</tr>
<tr>
<td>119</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>120</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>62</td>
</tr>
<tr>
<td>121</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>48</td>
</tr>
<tr>
<td>122</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>123</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>124</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>49</td>
</tr>
<tr>
<td>125</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>74</td>
</tr>
<tr>
<td>126</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>54</td>
</tr>
<tr>
<td>127</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>46</td>
</tr>
<tr>
<td>128</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>103</td>
</tr>
<tr>
<td>129</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>73</td>
</tr>
<tr>
<td>130</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>57</td>
</tr>
<tr>
<td>131</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>49</td>
</tr>
<tr>
<td>132</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>62</td>
</tr>
<tr>
<td>133</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>43</td>
</tr>
<tr>
<td>134</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>47</td>
</tr>
<tr>
<td>135</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>136</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>112</td>
</tr>
<tr>
<td>137</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>138</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>53</td>
</tr>
<tr>
<td>139</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>57</td>
</tr>
<tr>
<td>140</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>74</td>
</tr>
<tr>
<td>141</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>64</td>
</tr>
<tr>
<td>142</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>143</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>144</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>145</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>146</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>88</td>
</tr>
<tr>
<td>147</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>148</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>106</td>
</tr>
<tr>
<td>149</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>72</td>
</tr>
<tr>
<td>150</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>80</td>
</tr>
<tr>
<td>151</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>77</td>
</tr>
<tr>
<td>152</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>78</td>
</tr>
<tr>
<td>153</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>154</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>155</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>80</td>
</tr>
<tr>
<td>156</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>157</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>110</td>
</tr>
<tr>
<td>158</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>105</td>
</tr>
<tr>
<td>159</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>83</td>
</tr>
<tr>
<td>160</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>89</td>
</tr>
<tr>
<td>161</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>162</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>111</td>
</tr>
<tr>
<td>163</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>103</td>
</tr>
<tr>
<td>164</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>165</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>166</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>167</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>84</td>
</tr>
<tr>
<td>168</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>57</td>
</tr>
<tr>
<td>169</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>50</td>
</tr>
<tr>
<td>170</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>65</td>
</tr>
<tr>
<td>171</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>172</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>80</td>
</tr>
<tr>
<td>173</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>78</td>
</tr>
<tr>
<td>174</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>67</td>
</tr>
<tr>
<td>175</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>55</td>
</tr>
<tr>
<td>176</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>60</td>
</tr>
<tr>
<td>177</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>85</td>
</tr>
<tr>
<td>178</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>78</td>
</tr>
<tr>
<td>179</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>73</td>
</tr>
<tr>
<td>180</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>79</td>
</tr>
<tr>
<td>181</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>182</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>183</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>88</td>
</tr>
<tr>
<td>184</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>185</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>186</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>74</td>
</tr>
<tr>
<td>187</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>188</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>79</td>
</tr>
<tr>
<td>189</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>75</td>
</tr>
<tr>
<td>190</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>81</td>
</tr>
<tr>
<td>191</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>192</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>193</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>194</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>88</td>
</tr>
<tr>
<td>195</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>196</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>99</td>
</tr>
<tr>
<td>197</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>198</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>199</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>100</td>
</tr>
<tr>
<td>200</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>201</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>89</td>
</tr>
<tr>
<td>202</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>100</td>
</tr>
<tr>
<td>203</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>204</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>109</td>
</tr>
<tr>
<td>205</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>104</td>
</tr>
<tr>
<td>206</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>108</td>
</tr>
<tr>
<td>207</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>208</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>209</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>210</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>76</td>
</tr>
<tr>
<td>211</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>212</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>78</td>
</tr>
<tr>
<td>213</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>214</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>215</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>216</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>93</td>
</tr>
<tr>
<td>217</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>105</td>
</tr>
<tr>
<td>218</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>219</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>220</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>98</td>
</tr>
<tr>
<td>221</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>222</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>108</td>
</tr>
<tr>
<td>223</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>224</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>104</td>
</tr>
<tr>
<td>225</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>109</td>
</tr>
<tr>
<td>226</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>227</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>99</td>
</tr>
<tr>
<td>228</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>229</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>79</td>
</tr>
<tr>
<td>230</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>84</td>
</tr>
<tr>
<td>231</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>79</td>
</tr>
<tr>
<td>232</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>102</td>
</tr>
<tr>
<td>233</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>101</td>
</tr>
<tr>
<td>234</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>113</td>
</tr>
<tr>
<td>235</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>95</td>
</tr>
<tr>
<td>236</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>100</td>
</tr>
<tr>
<td>237</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>238</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>106</td>
</tr>
<tr>
<td>239</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>92</td>
</tr>
<tr>
<td>240</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>97</td>
</tr>
<tr>
<td>241</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>89</td>
</tr>
<tr>
<td>242</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>99</td>
</tr>
<tr>
<td>243</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>244</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>98</td>
</tr>
<tr>
<td>245</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>93</td>
</tr>
<tr>
<td>246</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>247</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>91</td>
</tr>
<tr>
<td>248</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>249</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>250</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>90</td>
</tr>
<tr>
<td>251</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>88</td>
</tr>
<tr>
<td>252</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>94</td>
</tr>
<tr>
<td>253</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>96</td>
</tr>
<tr>
<td>254</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>76</td>
</tr>
<tr>
<td>255</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>nan</td>
</tr>
<tr>
<td>255</td>
<td>127.0.0.1</td>
<td>373</td>
<td>ü´°</td>
<td>ü´°</td>
<td>373</td>
<td>-</td>
<td>71</td>
</tr>
<tr>
<td>256</td>
<td>nan</td>
<td>nan</td>
<td>ü§Ø</td>
<td>ü§Ø</td>
<td>-</td>
<td>Invalid argument (os error 22)</td>
<td>nan</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
</details>
<div dir="auto"><h2 tabindex="-1" dir="auto">What‚Äôs up with these failures?</h2><a id="user-content-whats-up-with-these-failures" aria-label="Permalink: What‚Äôs up with these failures?" href="#whats-up-with-these-failures"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Most protocol numbers worked fine‚Äîthe OS saw the packet, looped it back, and my server received it without an issue. But a few of them outright¬†<em>failed</em>¬†at different points in the stack</p>
<ul dir="auto">
<li><strong>Protocols 1, 2, and 6 failed at the server side</strong>.¬†Meaning: the client successfully sent them, but the server never saw them</li>
<li><strong>Protocols 50 and 51 failed at the client side</strong>.¬†The OS refused to even send them</li>
<li><strong>Protocol 256 didn&#39;t even make it past the¬†<code>socket()</code>¬†call</strong></li>
</ul>
<p dir="auto">But¬†<em>why?</em>¬†What‚Äôs making the OS treat these packets differently?</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Syscalls: What actually matters</h2><a id="user-content-syscalls-what-actually-matters" aria-label="Permalink: Syscalls: What actually matters" href="#syscalls-what-actually-matters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">One of the most useful debugging techniques I learnt debugging this stuff is, when dealing with low-level code, trace the <em>system calls</em> a process is making</p>
<p dir="auto">A <a href="https://en.wikipedia.org/wiki/System_call" rel="nofollow">system call</a> for the uninitiated is just a function that allows applications to request privileged resources from the OS‚Äîwhether that‚Äôs opening a file, allocating memory, or, in our case,¬†sending a packet over the network</p>
<p dir="auto">In my Rust code I use a library called <a href="https://docs.rs/socket2/latest/socket2/index.html" rel="nofollow"><code>socket2</code></a> which implements a pretty wrapper over the system calls provided by my OS. And to send a packet, I request a socket‚Äîwhich you can think of as just a special file my code can write in to communicate over the network</p>
<p dir="auto">Here&#39;s what the client would do:</p>
<div dir="auto" data-snippet-clipboard-copy-content="int sockfd = socket(
    AF_INET,    // Domain: ARPA Internet protocols. This tells the OS that we&#39;re interested in the IP protocols
    SOCK_RAW,   // Type: Raw socket. The OS normally handles the transport layer, but this gives us full control.
    255         // Protocol: We looped over this field.
);"><pre><span>int</span> <span>sockfd</span> <span>=</span> <span>socket</span>(
    <span>AF_INET</span>,    <span>// Domain: ARPA Internet protocols. This tells the OS that we&#39;re interested in the IP protocols</span>
    <span>SOCK_RAW</span>,   <span>// Type: Raw socket. The OS normally handles the transport layer, but this gives us full control.</span>
    <span>255</span>         <span>// Protocol: We looped over this field.</span>
);</pre></div>

<p dir="auto"><strong>1, 2, and 6: The Server Never Sees Them</strong></p>
<p dir="auto">Originally, I assumed my server would capture any raw IP packet it received. The socket looked like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="int sockfd = socket(
    AF_INET,    // Internet domain
    SOCK_RAW,   // Raw socket: should give us full control
    0           // Let the OS decide the protocol
);"><pre><span>int</span> <span>sockfd</span> <span>=</span> <span>socket</span>(
    <span>AF_INET</span>,    <span>// Internet domain</span>
    <span>SOCK_RAW</span>,   <span>// Raw socket: should give us full control</span>
    <span>0</span>           <span>// Let the OS decide the protocol</span>
);</pre></div>
<p dir="auto">I expected 0 to mean:
<em>&#34;Give me everything‚ÄîTCP, UDP, whatever it is, forward it&#34;</em></p>
<p dir="auto">For context, I ran these experiments on my Mac, which runs Darwin. Looking at the <a href="https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man2/socket.2.html" rel="nofollow">documentation</a>, there is really nothing mentioning the Protocol Number = 0 trick</p>
<p dir="auto">Under the hood, Darwin is just like BSD but with a ton of makeup, meaning it inherits BSD‚Äôs socket behaviour and network stack quirks. And on a whim I checked the <strong><a href="https://man.openbsd.org/socket.2" rel="nofollow">BSD socket documentation</a></strong>, and I found this frustratingly vague line:</p>
<blockquote>
<p dir="auto">&#34;A value of 0 for <code>protocol</code> will let the system select an appropriate protocol for the requested socket type.&#34;</p>
</blockquote>
<p dir="auto">So instead of delivering <strong>all</strong> raw packets, my OS was silently (and haphazardly) filtering them. My server never even saw the ICMP (1), IGMP (2), or TCP (6) packets‚Äîbecause Darwin likely deemed my socket not appropriate to receive those protocols.. or something?</p>
<p dir="auto"><strong>50 and 51: The Client Can‚Äôt Even Send Them</strong></p>
<p dir="auto"><strong>256: The <code>socket()</code> Call Fails Immediately</strong></p>
<ul dir="auto">
<li>The IPv4 protocol field is 8 bits meaning valid values range from 0 to 255</li>
<li>256 is simply too large‚Äîthe OS rejects it outright as an invalid argument</li>
</ul>
<p dir="auto">No surprises here. But what <em>was</em> surprising is what happened when I tried the same experiment on Linux..</p>
<p dir="auto">After seeing these inconsistencies, I was curious as to how Linux would behave. So I spun up a Linux VM and re-ran the experiment. Right away, the behaviour was very different</p>
<p dir="auto">Running the server I quickly noticed that Linux does not allow binding a raw socket to protocol <code>0</code>‚ÄîSome invalid protocol numbers like 256 <em>worked</em>. For reference, I logged the results in <a href="https://github.com/Hawzen/hdp/blob/master/samples/results_no_server_linux_client_loopback.md"><code>results_no_server_linux_client_loopback</code></a>. I was satisfied that at least <em>some</em> of the protocol numbers were working as expected</p>

<p dir="auto">Custom transport-layer protocols are doable, buuuuut the OS isn‚Äôt exactly welcoming. The networking stack has so many assumptions baked in, and raw sockets aren‚Äôt as raw as you‚Äôd expect</p>
<p dir="auto">I imagine this is why most new protocols live at the application layer instead. Instead of fighting the OS, engineers just build on top of existing transport protocols. QUIC, for example, runs over UDP and avoids these issues entirely</p>
<p dir="auto">And if you&#39;re ever working with raw sockets, <em>please</em> test across multiple OSes. If Darwin lets you do something, Linux might shut it down. If Linux is fine with it, Windows might pretend it doesn‚Äôt exist. There‚Äôs really no universal behaviour, even if they claim to <em>implement the POSIX standard</em></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Next step: What happens outside loopback?</h2><a id="user-content-next-step-what-happens-outside-loopback" aria-label="Permalink: Next step: What happens outside loopback?" href="#next-step-what-happens-outside-loopback"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">So far, these packets never left my machine. Now, I want to send HDP over the public internet:</p>
<ul dir="auto">
<li>Will routers forward it, or will they drop it?</li>
<li>Will firewalls let it through, or flag it as an attack?</li>
<li>Will it have different latency compared to TCP?</li>
<li>Will I accidentally brick DigitalOcean‚Äôs network? :D
Time to find out</li>
</ul>

<p dir="auto">At first I expected this experiment to be straight-forward (spoilers: it was NOT). How could it not..?</p>
<p dir="auto">I planned to deploy my server on a machine using a cheap cloud provider like Digital Ocean‚Äîthen I&#39;d send all sorts of packets to it, TCP, UDP, my own protocol, you name it. Gathering statistics about packet drop, latency, whatever, then I&#39;d make conclusions about the feasibility of not using TCP/UDP</p>
<p dir="auto">Simple!</p>
<p dir="auto">But oh it was not, not at all. It wasn&#39;t that the experiment was difficult to setup‚Äîbut what weirded me out was the results.. they weren&#39;t anything I expected or was prepared to deal with. Keep reading to see why</p>

<p dir="auto">I rented the the cheapest VPS on Digital Ocean I could find, then set up my server and all the tooling I needed. Nice!</p>
<p dir="auto">Let&#39;s see where the server is..</p>
<div dir="auto" data-snippet-clipboard-copy-content="root@debian-s-1vcpu-512mb-10gb-fra1-01:~# curl myip.wtf
161.35.222.56
root@debian-s-1vcpu-512mb-10gb-fra1-01:~# curl ipinfo.io/161.35.222.56
{
  &#34;ip&#34;: &#34;161.35.222.56&#34;,
  &#34;city&#34;: &#34;Frankfurt am Main&#34;,
  &#34;region&#34;: &#34;Hesse&#34;,
  &#34;country&#34;: &#34;DE&#34;,
  &#34;loc&#34;: &#34;50.1155,8.6842&#34;,
  &#34;org&#34;: &#34;AS14061 DigitalOcean, LLC&#34;,
  &#34;postal&#34;: &#34;60306&#34;,
  &#34;timezone&#34;: &#34;Europe/Berlin&#34;,
  &#34;readme&#34;: &#34;https://ipinfo.io/missingauth&#34;
}"><pre>root<span>@</span>debian<span>-</span>s<span>-</span><span>1</span>vcpu<span>-</span><span>512</span>mb<span>-</span><span>10</span>gb<span>-</span>fra1<span>-</span><span>01</span><span>:~#</span> curl myip<span>.</span>wtf
<span>161.35</span><span>.</span><span>222.56</span>
root<span>@</span>debian<span>-</span>s<span>-</span><span>1</span>vcpu<span>-</span><span>512</span>mb<span>-</span><span>10</span>gb<span>-</span>fra1<span>-</span><span>01</span><span>:~#</span> curl ipinfo<span>.</span>io<span>/</span><span>161.35</span><span>.</span><span>222.56</span>
{
  <span><span>&#34;</span>ip<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>161.35.222.56<span>&#34;</span></span>,
  <span><span>&#34;</span>city<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>Frankfurt am Main<span>&#34;</span></span>,
  <span><span>&#34;</span>region<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>Hesse<span>&#34;</span></span>,
  <span><span>&#34;</span>country<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>DE<span>&#34;</span></span>,
  <span><span>&#34;</span>loc<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>50.1155,8.6842<span>&#34;</span></span>,
  <span><span>&#34;</span>org<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>AS14061 DigitalOcean, LLC<span>&#34;</span></span>,
  <span><span>&#34;</span>postal<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>60306<span>&#34;</span></span>,
  <span><span>&#34;</span>timezone<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>Europe/Berlin<span>&#34;</span></span>,
  <span><span>&#34;</span>readme<span>&#34;</span></span><span>:</span> <span><span>&#34;</span>https://ipinfo.io/missingauth<span>&#34;</span></span>
}</pre></div>
<p dir="auto">Alright, looks like the experiment will span continents given that I&#39;m running my client on Saudi Arabia, and the server is hosted in Frankfurt</p>
<p dir="auto">Before running any deep analysis, I wanted to check that there is a network path between my Mac and the server, so I <code>ping</code>&#39;ed the server from my Mac</p>
<div dir="auto" data-snippet-clipboard-copy-content="‚ùØ ping 161.35.222.56
PING 161.35.222.56 (161.35.222.56): 56 data bytes
64 bytes from 161.35.222.56: icmp_seq=0 ttl=47 time=125.364 ms
64 bytes from 161.35.222.56: icmp_seq=1 ttl=47 time=128.061 ms
64 bytes from 161.35.222.56: icmp_seq=2 ttl=47 time=177.931 ms
64 bytes from 161.35.222.56: icmp_seq=3 ttl=47 time=225.798 ms
64 bytes from 161.35.222.56: icmp_seq=4 ttl=47 time=130.101 ms
64 bytes from 161.35.222.56: icmp_seq=5 ttl=47 time=194.563 ms
64 bytes from 161.35.222.56: icmp_seq=6 ttl=47 time=159.518 ms
64 bytes from 161.35.222.56: icmp_seq=7 ttl=47 time=134.343 ms
64 bytes from 161.35.222.56: icmp_seq=8 ttl=47 time=501.139 ms
64 bytes from 161.35.222.56: icmp_seq=9 ttl=47 time=153.672 ms
64 bytes from 161.35.222.56: icmp_seq=10 ttl=47 time=137.927 ms
64 bytes from 161.35.222.56: icmp_seq=11 ttl=47 time=355.672 ms
64 bytes from 161.35.222.56: icmp_seq=12 ttl=47 time=138.777 ms
64 bytes from 161.35.222.56: icmp_seq=13 ttl=47 time=166.116 ms
64 bytes from 161.35.222.56: icmp_seq=14 ttl=47 time=288.758 ms
64 bytes from 161.35.222.56: icmp_seq=15 ttl=47 time=151.458 ms
64 bytes from 161.35.222.56: icmp_seq=16 ttl=47 time=164.025 ms
64 bytes from 161.35.222.56: icmp_seq=17 ttl=47 time=170.132 ms
64 bytes from 161.35.222.56: icmp_seq=18 ttl=47 time=279.034 ms
^C
--- 161.35.222.56 ping statistics ---
19 packets transmitted, 19 packets received, 0.0% packet loss"><pre><span>‚ùØ</span> ping <span>161.35</span><span>.</span><span>222.56</span>
<span>PING</span> <span>161.35</span><span>.</span><span>222.56</span> (<span>161.35</span><span>.</span><span>222.56</span>)<span>:</span> <span>56</span> <span>data</span> bytes
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>0</span> ttl<span>=</span><span>47</span> time<span>=</span><span>125.364</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>1</span> ttl<span>=</span><span>47</span> time<span>=</span><span>128.061</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>2</span> ttl<span>=</span><span>47</span> time<span>=</span><span>177.931</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>3</span> ttl<span>=</span><span>47</span> time<span>=</span><span>225.798</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>4</span> ttl<span>=</span><span>47</span> time<span>=</span><span>130.101</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>5</span> ttl<span>=</span><span>47</span> time<span>=</span><span>194.563</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>6</span> ttl<span>=</span><span>47</span> time<span>=</span><span>159.518</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>7</span> ttl<span>=</span><span>47</span> time<span>=</span><span>134.343</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>8</span> ttl<span>=</span><span>47</span> time<span>=</span><span>501.139</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>9</span> ttl<span>=</span><span>47</span> time<span>=</span><span>153.672</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>10</span> ttl<span>=</span><span>47</span> time<span>=</span><span>137.927</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>11</span> ttl<span>=</span><span>47</span> time<span>=</span><span>355.672</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>12</span> ttl<span>=</span><span>47</span> time<span>=</span><span>138.777</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>13</span> ttl<span>=</span><span>47</span> time<span>=</span><span>166.116</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>14</span> ttl<span>=</span><span>47</span> time<span>=</span><span>288.758</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>15</span> ttl<span>=</span><span>47</span> time<span>=</span><span>151.458</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>16</span> ttl<span>=</span><span>47</span> time<span>=</span><span>164.025</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>17</span> ttl<span>=</span><span>47</span> time<span>=</span><span>170.132</span> ms
<span>64</span> bytes from <span>161.35</span><span>.</span><span>222.56</span><span>:</span> icmp_seq<span>=</span><span>18</span> ttl<span>=</span><span>47</span> time<span>=</span><span>279.034</span> ms
<span><span>^</span></span><span>C</span>
<span><span>---</span> 161.35.222.56 ping statistics ---</span>
<span>19</span> packets transmitted, <span>19</span> packets received, <span>0.0</span><span>%</span> packet loss</pre></div>
<p dir="auto">It seems it&#39;s quite far, but looks fine to me, let&#39;s send some packets using our new protocol!</p>
<p dir="auto">First let&#39;s start the server in our Digital Ocean machine</p>
<div dir="auto" data-snippet-clipboard-copy-content="root@debian-s-1vcpu-512mb-10gb-fra1-01:~/hdp/hdp# sudo cargo run --bin server
Listening on protocol 255"><pre>root<span>@</span>debian<span>-</span>s<span>-</span><span>1</span>vcpu<span>-</span><span>512</span>mb<span>-</span><span>10</span>gb<span>-</span>fra1<span>-</span><span>01</span><span>:~/</span>hdp<span>/</span>hdp<span>#</span> sudo cargo run <span><span>--</span>bin server</span>
<span>Listening</span> on protocol <span>255</span></pre></div>
<p dir="auto">And now we can send a packet from my Mac</p>
<div dir="auto" data-snippet-clipboard-copy-content="‚ùØ fortune | cowsay | sudo cargo run --bin client 161.35.222.56
| Protocol Number | Succeeded (Client) | Time (Œºs) (Client) | Byte sum (Client) | Failure reason (Client) |
| 255 | ü´° | timestamp | 563 | - |"><pre><span>‚ùØ</span> fortune <span>|</span> cowsay <span>|</span> sudo cargo run <span><span>--</span>bin client 161.35.222.56</span>
<span>|</span> <span>Protocol</span> <span>Number</span> <span>|</span> <span>Succeeded</span> (<span>Client</span>) <span>|</span> <span>Time</span> (Œºs) (<span>Client</span>) <span>|</span> <span>Byte</span> <span>sum</span> (<span>Client</span>) <span>|</span> <span>Failure</span> reason (<span>Client</span>) <span>|</span>
<span>|</span> <span>255</span> <span>|</span> ü´° <span>|</span> timestamp <span>|</span> <span>563</span> <span>|</span> <span>-</span> <span>|</span></pre></div>
<p dir="auto">Packet sent. Let&#39;s check the server again</p>
<div dir="auto" data-snippet-clipboard-copy-content="root@debian-s-1vcpu-512mb-10gb-fra1-01:~/hdp/hdp# sudo cargo run --bin server
Listening on protocol 255
| Protocol Number | Time (Œºs) (Server) | Source IP (Server) | Byte Sum (Server) |
| --- | --- | --- |
| 255 | timestamp | my_ip | 563 |"><pre>root<span>@</span>debian<span>-</span>s<span>-</span><span>1</span>vcpu<span>-</span><span>512</span>mb<span>-</span><span>10</span>gb<span>-</span>fra1<span>-</span><span>01</span><span>:~/</span>hdp<span>/</span>hdp<span>#</span> sudo cargo run <span><span>--</span>bin server</span>
<span>Listening</span> on protocol <span>255</span>
<span>|</span> <span>Protocol</span> <span>Number</span> <span>|</span> <span>Time</span> (Œºs) (<span>Server</span>) <span>|</span> <span>Source</span> <span>IP</span> (<span>Server</span>) <span>|</span> <span>Byte</span> <span>Sum</span> (<span>Server</span>) <span>|</span>
<span>|</span> <span>---</span> <span>|</span><span> --- | --- |</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> my_ip <span>|</span> <span>563</span> <span>|</span></pre></div>
<p dir="auto">Excellent. It seems that all went well, or so I thought. In-fact, all went downhill starting here. I took a quick break then came back. Let&#39;s try sending the packet again..</p>
<div dir="auto" data-snippet-clipboard-copy-content="| Protocol Number | Time (Œºs) (Server) | Source IP (Server) | Byte Sum (Server) |
| --- | --- | --- |
| 255 | timestamp | my_ip | 563 |"><pre><span>|</span> <span>Protocol</span> <span>Number</span> <span>|</span> <span>Time</span> (Œºs) (<span>Server</span>) <span>|</span> <span>Source</span> <span>IP</span> (<span>Server</span>) <span>|</span> <span>Byte</span> <span>Sum</span> (<span>Server</span>) <span>|</span>
<span>|</span> <span>---</span> <span>|</span><span> --- | --- |</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> my_ip <span>|</span> <span>563</span> <span>|</span></pre></div>
<p dir="auto">It&#39;s stuck? I can&#39;t see the second packet</p>
<p dir="auto">I <code>Ctrl+C</code> and attempt doing it again. No results..? That can&#39;t be right, could it be a client side bug? Let&#39;s use <code>tcpdump</code> to see all outgoing packets from my device</p>
<div dir="auto" data-snippet-clipboard-copy-content="‚ùØ sudo tcpdump -i any &#39;ip[9] == 255&#39;
tcpdump: data link type PKTAP
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type PKTAP (Apple DLT_PKTAP), snapshot length 524288 bytes
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427
IP mac &gt; 161.35.222.56:  reserved 427"><pre><span>‚ùØ</span> sudo tcpdump <span>-</span>i <span>any</span> &#39;ip[<span>9</span>] <span>==</span> <span>255</span>&#39;
tcpdump<span>:</span> <span>data</span> link <span>type</span> <span>PKTAP</span>
tcpdump<span>:</span> verbose output suppressed, use <span>-</span>v[v]<span>...</span> for full protocol decode
listening on <span>any</span>, link<span>-</span><span>type</span> <span>PKTAP</span> (<span>Apple</span> <span>DLT_PKTAP</span>), snapshot <span>length</span> <span>524288</span> bytes
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span>
<span>IP</span> mac <span>&gt;</span> <span>161.35</span><span>.</span><span>222.56</span><span>:</span>  reserved <span>427</span></pre></div>
<p dir="auto">They&#39;re definitely leaving my Mac. What about doing the same thing on the receiving end?</p>
<div dir="auto" data-snippet-clipboard-copy-content="root@debian-s-1vcpu-512mb-10gb-fra1-01:~/hdp# tcpdump -i any &#39;ip[9] &gt; 17&#39;
tcpdump: data link type LINUX_SLL2
tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
listening on any, link-type LINUX_SLL2 (Linux cooked v2), snapshot length 262144 bytes
"><pre>root<span>@</span>debian<span>-</span>s<span>-</span><span>1</span>vcpu<span>-</span><span>512</span>mb<span>-</span><span>10</span>gb<span>-</span>fra1<span>-</span><span>01</span><span>:~/</span>hdp<span>#</span> tcpdump <span>-</span>i <span>any</span> &#39;ip[<span>9</span>] <span>&gt;</span> <span>17</span>&#39;
tcpdump<span>:</span> <span>data</span> link <span>type</span> <span>LINUX_SLL2</span>
tcpdump<span>:</span> verbose output suppressed, use <span>-</span>v[v]<span>...</span> for full protocol decode
listening on <span>any</span>, link<span>-</span><span>type</span> <span>LINUX_SLL2</span> (<span>Linux</span> cooked v2), snapshot <span>length</span> <span>262144</span> bytes
</pre></div>
<p dir="auto">Nothing appeared</p>
<p dir="auto">I began doubting my earlier results, there they are in my shell. The timestamps and byte sums match. Was I imagining them? Is Linus Torvalds himself gaslighting me??</p>
<p dir="auto">Wait..? How did my ISP&#39;s <a href="https://simple.wikipedia.org/wiki/Network_address_translation" rel="nofollow">NATing box</a> forward the packet? NAT&#39;ing relies on ports‚Äîbut my protocol is just black magic to them</p>
<p dir="auto">I&#39;m confused</p>
<p dir="auto">Very confused</p>
<p dir="auto">After digging a bit in, I found that Digital Ocean doesn&#39;t support non-standard IP Protocols</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Hawzen/hdp/blob/master/readme_assets/ihatedigitalocean.png"><img src="https://github.com/Hawzen/hdp/raw/master/readme_assets/ihatedigitalocean.png" alt="digital_ocean_sucks"/></a></p>
<p dir="auto">This still doesn&#39;t explain it. How did one packet survive? There really is no way to know, and I was banging my head against the wall trying to figure it out</p>

<p dir="auto">if any cloud provider would support non-standard IP Protocols, it&#39;d be AWS</p>
<p dir="auto">I provisioned two machines. Set them up. Server. Client. It works.. !</p>
<div dir="auto" data-snippet-clipboard-copy-content="admin@ip-172-31-13-218:~/hdp$ sudo cargo run --bin server 255
Server is listening on SockAddr { ss_family: 2, len: 16 }, protocol: 255
| Protocol Number | Time (Œºs) (Server) | Source IP (Server) | Byte Sum (Server) |
| --- | --- | --- |
| 255 | timestamp | 54.153.13.186 | 33 |
| 255 | timestamp | 54.153.13.186 | 34 |
| 255 | timestamp | 54.153.13.186 | 35 |
| 255 | timestamp | 54.153.13.186 | 36 |
"><pre>admin<span>@</span>ip<span>-</span><span>172</span><span>-</span><span>31</span><span>-</span><span>13</span><span>-</span><span>218</span><span>:~/</span>hdp<span>$</span> sudo cargo run <span><span>--</span>bin server 255</span>
<span>Server</span> is listening on <span>SockAddr</span> { ss_family<span>:</span> <span>2</span>, len<span>:</span> <span>16</span> }, protocol<span>:</span> <span>255</span>
<span>|</span> <span>Protocol</span> <span>Number</span> <span>|</span> <span>Time</span> (Œºs) (<span>Server</span>) <span>|</span> <span>Source</span> <span>IP</span> (<span>Server</span>) <span>|</span> <span>Byte</span> <span>Sum</span> (<span>Server</span>) <span>|</span>
<span>|</span> <span>---</span> <span>|</span><span> --- | --- |</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> <span>54.153</span><span>.</span><span>13.186</span> <span>|</span> <span>33</span> <span>|</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> <span>54.153</span><span>.</span><span>13.186</span> <span>|</span> <span>34</span> <span>|</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> <span>54.153</span><span>.</span><span>13.186</span> <span>|</span> <span>35</span> <span>|</span>
<span>|</span> <span>255</span> <span>|</span> timestamp <span>|</span> <span>54.153</span><span>.</span><span>13.186</span> <span>|</span> <span>36</span> <span>|</span>
</pre></div>
<p dir="auto">Granted, the server was just two hops away from the client, and it didn&#39;t have to pass through the scary sea of the internet</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Hawzen/hdp/blob/master/readme_assets/latency_difference_between_hdp_and_udp.png"><img src="https://github.com/Hawzen/hdp/raw/master/readme_assets/latency_difference_between_hdp_and_udp.png" alt="Description"/></a></p>
<p dir="auto"><sub>The latency is in the microseconds due to both machines being in the same datacenter.</sub></p>
<p dir="auto">The latency difference between the HDP &amp; UDP was a consistent, but negligible 20Œºs across various benchmarks</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">But what about the internet?</h4><a id="user-content-but-what-about-the-internet" aria-label="Permalink: But what about the internet?" href="#but-what-about-the-internet"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">I tried sending packets from my Mac to the AWS server, and I reproduced the same one packet behaviour above. I left a sample of the results in <a href="https://github.com/Hawzen/hdp/blob/master/samples/tcpdump_tokyo_sever_mac_client.md"><code>tcpdump_tokyo_server_mac_client.md</code></a>. I sent 1 packet for all protocols, and all of them stopped working after the first packet except TCP/UDP/ICMP</p>
<p dir="auto">And as expected, sending or recieving packets from the Digital Ocean machine to the AWS machine didn&#39;t work</p>
<p dir="auto">There&#39;s no way to know for sure.</p>

<p dir="auto">Technically <em>yes</em>, you could use your own IP protocol. But unless you&#39;re a masochist, I do not suggest it</p>
<ul dir="auto">
<li>Your code won&#39;t be portable, and you&#39;ll need to support various operating systems</li>
<li>Your protocol will be randomly dropped at NAT gateways &amp; firewalls. It might work on your own network, but I gaurentee it won&#39;t work on the internet</li>
<li>From my testing, there&#39;s no latency improvements from using a non-standard IP protocol</li>
</ul>
<p dir="auto">TL;DR: <em><strong>Use TCP or UDP</strong></em></p>

<ul dir="auto">
<li>The <a href="https://datatracker.ietf.org/doc/html/rfc768" rel="nofollow">UDP protocol specification</a> is so minimal it is almost funny</li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc3692#section-2.1" rel="nofollow">IP Protocol numbers that are assigned for testing</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_IP_protocol_numbers" rel="nofollow">The list of protocols</a> supported under the IP protocol is pretty interesting</li>
<li><a href="https://hackaday.com/2024/09/21/when-raw-network-sockets-arent-raw-raw-sockets-in-macos-and-linux/" rel="nofollow">This</a> article speaks about some differences between raw sockets in Linux &amp; FreeBSD</li>
<li>How would you implement NAT on something other than TCP or UDP? <a href="https://superuser.com/a/1108226" rel="nofollow">This</a> answer is pretty insightful</li>
</ul>
</article></div></div>
  </body>
</html>
