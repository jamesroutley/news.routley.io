<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shaneosullivan.wordpress.com/2025/08/11/fighting-with-youtube-to-show-a-preview-image/">Original</a>
    <h1>Fighting with YouTube to show a preview image</h1>
    
    <div id="readability-page-1" class="page"><article id="post-1269">
			<!-- .entry-header -->		<div>
			<p>
							<span>
					<a href="https://shaneosullivan.wordpress.com/category/technical/" rel="category tag">Technical</a>				</span></p><!-- .cat-links -->
			
			
			<p><span>
				<time datetime="2025-08-11T15:03:59+00:00">August 11, 2025</time><time datetime="2025-08-11T15:59:14+00:00">August 11, 2025</time>			</span>

			<span>2 Minutes</span>		</p></div><!-- .entry-meta -->
	
	<div>
		
<p><strong>TLDR: <a href="https://chofter.com/examples/youtubePreview.html" target="_blank" rel="noreferrer noopener">Click here</a> for code to implement a lightweight, resilient clickable YouTube preview.</strong></p>



<p>YouTube videos are expensive to load on a web page. This compounds if you want your page to display many videos at the same time for the user to choose from. Before the user even plays the video, it loads 4MB onto your previously zippy page.</p>



<figure><a href="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png"><img data-attachment-id="1272" data-permalink="https://shaneosullivan.wordpress.com/2025/08/11/fighting-with-youtube-to-show-a-preview-image/screenshot-2025-08-11-at-23-29-01/" data-orig-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png" data-orig-size="1410,1026" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="Screenshot 2025-08-11 at 23.29.01" data-image-description="" data-image-caption="" data-medium-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=300" data-large-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=1024" width="1024" height="745" src="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=1024" alt="" srcset="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=1024 1024w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=150 150w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=300 300w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png?w=768 768w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-11-at-23.29.01.png 1410w" sizes="(max-width: 1024px) 100vw, 1024px"/></a></figure>



<p>Of course, YouTube does a decent job of caching these resources, but your browser is still doing all this work, creating another complete page context per video, executing all it’s JavaScript etc.</p>



<p>The ideal state is that an <strong>iframe</strong> is only created when the user plays the video, so if you’re listing dozens of videos that can be played in place you only pay the performance penalty when the user actually requests the video to play.</p>



<p><strong>A solution … that YouTube makes brittle</strong></p>



<p>One solution is to first show a preview image using a thumbnail image from the video, and when that is clicked, swapping it out for the <strong>iframe</strong>. This works great! … until it doesn’t.</p>



<p><strong>The Problem</strong></p>



<p>The url for a thumbnail image looks like <a href="https://img.youtube.com/vi/bJ7mTY9501c/maxresdefault.jpg"><code>https://img.youtube.com/vi/bJ7mTY9501c/maxresdefault.jpg</code></a> . Note the <a href="https://img.youtube.com/vi/bJ7mTY9501c/maxresdefault.jpg"><code>maxresdefault.jpg</code></a> at the end, this specifies the highest quality possible preview image. The problem is that this only exists on some videos and not others. </p>



<p>It should be easy to add an <code>onerror</code> handler though right? Then we can fall back to a lower res preview image.  Haha, yeah, but no.</p>



<p>Instead of simply failing to return the image, sending a <code>404</code> response header and causing the <code>&lt;img /&gt;</code> element to trigger it’s <code>onerror</code> listener, YouTube <strong>both</strong> sends a <code>404</code> response <strong>and</strong> sends a small ugly placeholder image that makes your site look broken. This triggers the <code>onload</code> listener instead of the the expected <code>onerror</code> listener.</p>



<figure><a href="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/maxresdefault.jpg"><img data-attachment-id="1276" data-permalink="https://shaneosullivan.wordpress.com/2025/08/11/fighting-with-youtube-to-show-a-preview-image/maxresdefault/" data-orig-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/maxresdefault.jpg" data-orig-size="120,90" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="maxresdefault" data-image-description="" data-image-caption="" data-medium-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/maxresdefault.jpg?w=120" data-large-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/maxresdefault.jpg?w=120" width="120" height="90" src="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/maxresdefault.jpg?w=120" alt=""/></a></figure>



<p><strong>The Solution</strong></p>



<p>Instead of an <code>onerror</code> , add an <code>onload</code> handler to the <code>&lt;img /&gt;</code> element, and check the size of the image.  The ugly fallback image is 120px wide and 90px tall.  Check the size of the image, and if the fallback image is detected, iterate through the available thumnail images until one loads. The image below shows an implementation of this.</p>



<figure><a href="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png"><img data-attachment-id="1283" data-permalink="https://shaneosullivan.wordpress.com/2025/08/11/fighting-with-youtube-to-show-a-preview-image/screenshot-2025-08-12-at-00-01-36/" data-orig-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png" data-orig-size="1094,844" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="Screenshot 2025-08-12 at 00.01.36" data-image-description="" data-image-caption="" data-medium-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=300" data-large-file="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=1024" width="1024" height="789" src="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=1024" alt="" srcset="https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=1024 1024w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=150 150w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=300 300w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png?w=768 768w, https://shaneosullivan.wordpress.com/wp-content/uploads/2025/08/screenshot-2025-08-12-at-00.01.36.png 1094w" sizes="(max-width: 1024px) 100vw, 1024px"/></a></figure>



<p><strong>Full Example</strong></p>



<p>There’s a full no-framework example at <a href="https://chofter.com/examples/youtubePreview.html" target="_blank" rel="noreferrer noopener">https://chofter.com/examples/youtubePreview.html</a> , view the source for the full example. This can be easily adapted for any framework like React, Vue etc.</p>



<p><strong>Prior Art</strong></p>



<p>Paul Irish describes another solution to this problem that I found after I built this, check it out <a href="https://github.com/paulirish/lite-youtube-embed/blob/master/youtube-thumbnail-urls.md" target="_blank" rel="noreferrer noopener">here</a>.  That also points to these three implementations that are also worth perusing.</p>



<ul>
<li><a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-youtube">https://github.com/ampproject/amphtml/blob/master/extensions/amp-youtube </a></li>



<li><a href="https://github.com/Daugilas/lazyYT">https://github.com/Daugilas/lazyYT</a></li>



<li><a href="https://github.com/vb/lazyframe">https://github.com/vb/lazyframe</a></li>
</ul>



<p>I like mine as it uses the least code and is trivial to implement in whatever framework you like, but another of these might suit your needs or taste better.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

	<div>
				<div>
						<p><img referrerpolicy="no-referrer" alt="Unknown&#39;s avatar" src="https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=80&amp;d=identicon&amp;r=G" srcset="https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=80&amp;d=identicon&amp;r=G 1x, https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=120&amp;d=identicon&amp;r=G 1.5x, https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=160&amp;d=identicon&amp;r=G 2x, https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=240&amp;d=identicon&amp;r=G 3x, https://0.gravatar.com/avatar/9b6326a643e3c80cc172420aafbd5222a168b4657275c08cb7def287702bec3b?s=320&amp;d=identicon&amp;r=G 4x" height="80" width="80" loading="lazy" decoding="async"/>			</p><!-- .author-avatar -->
			
			<p>
				<h2>
					Published by <span>Shane O&#39;Sullivan</span>				</h2>
			</p><!-- .author-heading -->

			<p>
				I am a software engineer and manager from Ireland.  I spent 7 years working in Ireland from 2003 – 2010, then ten years in Silicon Valley from 2010 to 2020.

In California I spent about 6.5 years at Facebook Engineering, the last three of which I was an engineering manager in the Ads organisation focusing on customer facing products for creating and managing ads.

At Stripe I built the Developer Productivity organisation, with teams that were responsible for the use of the Ruby language, testing infrastructure, documentation, developer tooling (e.g. IDE integrations) and more.

At Promise, I was Head of Engineering from 2018 – 2020, responsible for building the first few iterations of our products, hiring for all product roles, meeting with clients and investors, and anything else needed to get a tiny startup bootstrapped and successful.

Now I’m back in Ireland, working various projects while advising the great people at Stainless (stainless.com).

This blog contains my various musings on all things technical/interesting on the interweb and beyond.				<a href="https://shaneosullivan.wordpress.com/author/shaneosullivan/" rel="author">
					View all posts by Shane O&#39;Sullivan				</a>
			</p><!-- .author-bio -->
		</div><!-- .entry-auhtor -->
				<p><strong>Published</strong>
			<time datetime="2025-08-11T15:03:59+00:00">August 11, 2025</time><time datetime="2025-08-11T15:59:14+00:00">August 11, 2025</time>		</p><!-- .site-posted-on -->
	</div>
</article></div>
  </body>
</html>
