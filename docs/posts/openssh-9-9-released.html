<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://undeadly.org/cgi?action=article;sid=20240921181110">Original</a>
    <h1>OpenSSH 9.9 Released</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="https://www.openssh.com">grey</a>
on <time datetime="2024-09-20T23:06:39Z">2024-09-20</time>
from the now with post-quantum key exchange! dept.</p>
<p>In a <a href="https://cybervillains.com/@djm/113166986221136141">fediverse post</a>,
Damien Miller (<code>djm@</code>) announced the availability of the new
<a href="https://www.openssh.com/">OpenSSH</a> version <a href="https://www.openssh.com/releasenotes.html#9.9">9.9</a>:</p>

<blockquote>
OpenSSH 9.9 has just been released. New features include support for hybrid <abbr>ML-KEM</abbr> X25519 post-quantum key exchange (using a formally-verified <abbr>ML-KEM</abbr> implementation), improved controls to drop and penalise unwanted connections, faster <abbr>NTRUPrime</abbr> key exchange code and more.
</blockquote>

<p>The release notes read:</p>

<blockquote>
<pre>OpenSSH 9.9 was released on 2024-09-19. It is available from the
mirrors listed at <a href="https://www.openssh.com/">https://www.openssh.com/</a>.
OpenSSH is a 100% complete S<abbr>NTRUPrime</abbr>SH protocol 2.0 implementation and
includes sftp client and server support.

Once again, we would like to thank the OpenSSH community for their
continued support of the project, especially those who contributed
code or patches, reported bugs, tested snapshots or donated to the
project. More information on donations may be found at:
<a href="https://www.openssh.com/donations.html">https://www.openssh.com/donations.html</a>

Future deprecation notice
=========================

OpenSSH plans to remove support for the <abbr>DSA</abbr> signature algorithm in
early 2025. This release disables <abbr>DSA</abbr> by default at compile time.

<abbr>DSA</abbr>, as specified in the <abbr>SSHv2</abbr> protocol, is inherently weak - being
limited to a 160 bit private key and use of the <abbr>SHA1</abbr> digest. Its
estimated security level is only 80 bits symmetric equivalent.

OpenSSH has disabled <abbr>DSA</abbr> keys by default since 2015 but has retained
run-time optional support for them. <abbr>DSA</abbr> was the only mandatory-to-
implement algorithm in the <abbr>SSHv2</abbr> <abbr>RFCs</abbr>, mostly because alternative
algorithms were encumbered by patents when the <abbr>SSHv2</abbr> protocol was
specified.

This has not been the case for decades at this point and better
algorithms are well supported by all actively-maintained <abbr>SSH</abbr>
implementations. We do not consider the costs of maintaining <abbr>DSA</abbr>
in OpenSSH to be justified and hope that removing it from OpenSSH
can accelerate its wider deprecation in supporting cryptography
libraries.

Currently <abbr>DSA</abbr> is disabled at compile time. The final step of
removing <abbr>DSA</abbr> support entirely is planned for the first OpenSSH
release of 2025.

<abbr>DSA</abbr> support may be re-enabled on OpenBSD by setting &#34;DSAKEY=yes&#34;
in Makefile.inc. To enable <abbr>DSA</abbr> support in portable OpenSSH, pass
the &#34;--enable-dsa-keys&#34; option to configure.

Potentially-incompatible changes
--------------------------------

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>: remove support for pre-authentication compression.
   OpenSSH has only supported post-authentication compression in
   the server for some years. Compression before authentication
   significantly increases the attack surface of <abbr>SSH</abbr> servers and risks
   creating oracles that reveal information about information sent
   during authentication.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: processing of the arguments to the &#34;Match&#34;
   configuration directive now follows more shell-like rules for
   quoted strings, including allowing nested quotes and \-escaped
   characters. If configurations contained workarounds for the
   previous simplistic quote handling then they may need to be
   adjusted. If this is the case, it&#39;s most likely to be in the
   arguments to a &#34;Match exec&#34; confition. In this case, moving the
   command to be evaluated from the Match line to an external shell
   script is easiest way to preserve compatibility with both the old
   and new versions.

Changes since OpenSSH 9.8
=========================

This release contains a number of new features and bugfixes.

New features
------------

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add support for a new hybrid post-quantum key
   exchange based on the <abbr>FIPS</abbr> 203 Module-Lattice Key Enapsulation
   mechanism (<abbr>ML-KEM</abbr>) combined with X25519 <abbr>ECDH</abbr> as described by
   <a href="https://datatracker.ietf.org/doc/html/draft-kampanakis-curdle-ssh-pq-ke-03">https://datatracker.ietf.org/doc/html/draft-kampanakis-curdle-ssh-pq-ke-03</a>
   This algorithm &#34;mlkem768x25519-sha256&#34; is available by default.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>: the <a href="https://man.openbsd.org/ssh_config.5">ssh_config</a> &#34;Include&#34; directive can now expand
   environment as well as the same set of %-tokens &#34;Match Exec&#34;
   supports.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add a sshd_config &#34;RefuseConnection&#34; option that, if set
   will terminate the connection at the first authentication request.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add a &#34;refuseconnection&#34; penalty class to sshd_config
   PerSourcePenalties that is applied when a connection is dropped by
   the new RefuseConnection keyword.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add a &#34;Match invalid-user&#34; predicate to sshd_config Match
   options that matches when the target username is not valid on the
   server.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: update the Streamlined <abbr>NTRUPrime</abbr> code to a
   substantially faster implementation.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: the hybrid Streamlined <abbr>NTRUPrime</abbr>/X25519 key
   exchange algorithm now has an <abbr>IANA</abbr>-assigned name in addition to
   the &#34;@openssh.com&#34; vendor extension name. This algorithm is now
   also available under this name <abbr>IANA</abbr>sntrup761x25519-sha512<abbr>IANA</abbr>

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>, <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>: prevent private keys from being
   included in core dump files for most of their lifespans. This is
   in addition to pre-existing controls in <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a> and <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>
   that prevented coredumps. This feature is supported on OpenBSD,
   Linux and FreeBSD.

 * All: convert key handling to use the libcrypto EVP_PKEY <abbr>API</abbr>, with
   the exception of <abbr>DSA</abbr>.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add a random amount of jitter (up to 4 seconds) to the
   grace login time to make its expiry unpredictable.

Bugfixes
--------

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: relax absolute path requirement back to what it was prior
   to OpenSSH 9.8, which incorrectly required that sshd was started
   with an absolute path in inetd mode. <a href="https://bugzilla.mindrot.org/show_bug.cgi?id=3717">bz3717</a>

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: fix regression introduced in openssh-9.8 that swapped the
   order of source and destination addresses in some sshd log messages.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: do not apply authorized_keys options when signature
   verification fails. Prevents more restrictive key options being
   incorrectly applied to subsequent keys in authorized_keys. <a href="https://bugzilla.mindrot.org/show_bug.cgi?id=3733">bz3733</a>

 * <a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>: include pathname in some of ssh-keygen&#39;s passphrase
   prompts. Helps the user know what&#39;s going on when ssh-keygen is
   invoked via other tools. Requested in <a href="https://github.com/openssh/openssh-portable/pull/503">GHPR503</a>

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/ssh-add.1">ssh-add(1)</a>: make parsing user@host consistently look for
   the last &#39;@&#39; in the string rather than the first. This makes it
   possible to more consistently use usernames that contain &#39;@&#39;
   characters.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>, <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: be more strict in parsing key type names. Only
   allow short names (e.g &#34;rsa&#34;) in user-interface code and require
   full <abbr>SSH</abbr> protocol names (e.g. &#34;ssh-rsa&#34;) everywhere else. <a href="https://bugzilla.mindrot.org/show_bug.cgi?id=3725">bz3725</a>

 * regress: many performance and correctness improvements to the
   re-keying regression test.

 * <a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>: clarify that ed25519 is the default key type
   generated and clarify that rsa-sha2-512 is the default signature
   scheme when <abbr>RSA</abbr> is in use. <a href="https://github.com/openssh/openssh-portable/pull/505">GHPR505</a>

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: fix minor memory leak in Subsystem option parsing; <a href="https://github.com/openssh/openssh-portable/pull/515">GHPR515</a>

 * All: additional hardening and consistency checks for the sshbuf
   code.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: reduce default logingrace penalty to ensure that a single
   forgotton login that times out will be below the penalty threshold.

 * <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>: fix proxy multiplexing (-O proxy) bug. If a <abbr>mux</abbr> started with
   ControlPersist then later has a forwarding added using <abbr>mux</abbr> proxy
   connection and the forwarding was used, then when the <abbr>mux</abbr> proxy
   session terminated, the mux master process would issue a bad message
   that terminated the connection.

Portability
-----------

 * sync contrib/ssh-copy-id to the latest upstream version.

 * regress: improve portablility for some <a href="https://man.openbsd.org/awk.1">awk(1)</a> usage (e.g. Solaris)

 * In the contrib/redhat <abbr>RPM</abbr> spec file, without_openssl was previously
   incorrectly enabled unconditionally.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a> restore audit call before exit that regressed in openssh-9.8
   Fixes an issue where the SSH_CONNECTION_ABANDON event was not
   recorded.

 * <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>: add support for class-imposed loging restrictions on FreeBSD.
   Allowing auth_hostok(3) and auth_timeok(3) to control logins.

 * Build fixes for Musl libc.

 * Fix detection of setres*id on <abbr>GNU</abbr>/Hurd

Checksums:
==========

 - <abbr>SHA1</abbr> (<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/openssh-9.9.tar.gz">openssh-9.9.tar.gz</a>) = 080acf6ff0b862e8faa3baa3920a079536d28e85
 - <abbr>SHA256</abbr> (<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/openssh-9.9.tar.gz">openssh-9.9.tar.gz</a>) = h1xwa7CVcJfN7I9MgxxPBpUELzo+tnmLy+6slYHTUtw=

 - <abbr>SHA1</abbr> (<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.9p1.tar.gz">openssh-9.9p1.tar.gz</a>) = 5ded7eb0add0b02b5d1a1c4bf5cb2c89d2117b53
 - <abbr>SHA256</abbr> (<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.9p1.tar.gz">openssh-9.9p1.tar.gz</a>) = s0P7zb/4fxWxmG5uFdbU/Jp9NgZr5rf7UHCHuo+WbAI=

Please note that the <abbr>SHA256</abbr> signatures are base64 encoded and not
hexadecimal (which is the default for most checksum tools). The PGP
key used to sign the releases is available from the mirror sites:
<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/RELEASE_KEY.asc">https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/RELEASE_KEY.asc</a>

Reporting Bugs:
===============

- Please read <a href="https://www.openssh.com/report.html">https://www.openssh.com/report.html</a>
  Security bugs should be reported directly to <a href="mailto:openssh@openssh.com">openssh@openssh.com</a>
</pre>
</blockquote>
</div></div>
  </body>
</html>
