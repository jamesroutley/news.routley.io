<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://charles.inclouds.space/blog/exploring-2022-03/">Original</a>
    <h1>Exploring: Forms and Languages</h1>
    
    <div id="readability-page-1" class="page">
<h2><a href="https://charles.inclouds.space/">Exploring: Forms and Languages</a></h2>
<h4>2022-03-06</h4>
<p>Hi all,</p>
<p>I&#39;m writing this as sort of a professional update during a period of unemployment / funemployment.</p>
<p>Let&#39;s see, I left Jane Street about 5 weeks ago. I went to Montreal for a little less than two weeks and have been in New York since. When I left Jane Street, there were two things I was thinking of working on: a &#34;form app&#34; and a &#34;structure editor&#34;.</p>
<h2 id="forms">Forms</h2>
<p>I am interested in making it easier for developers to both make forms and then manipulate the resulting data. In the past I&#39;ve made a Google form (though next time I would use <a href="https://tally.so">Tally</a>!), stored the data in Google sheets, and then used <code>curl</code> to get it in JSON format. Then to operate on this data in a type-safe language, I had to write a schema to parse said JSON.</p>
<p>One thing that&#39;s sad about this workflow is that I&#39;m effectively specifying the schema of the data twice: Once in Google form&#39;s <a href="https://en.wikipedia.org/wiki/WYSIWYG">wysiwyg</a> editor, and again to parse the data from JSON. Writing schemas are hard, so it&#39;s unfortunate to have to do it twice in different formats.</p>
<p>Another problem is that JSON doesn&#39;t support <a href="https://en.wikipedia.org/wiki/Tagged_union">variant types</a>. All the data from the form is stored as records in Google sheets with optional fields. This is dropping type information on the floor: I want to keep the data as well-structured as possible to avoid having to parse it again later down the road.</p>
<p>My goal, at some point, is to implement a library that lets people generate a form with a domain-specific language along these lines:</p>
<pre data-lang="rust"><code data-lang="rust"><span>let</span><span> name </span><span>= </span><span>String</span><span>.</span><span>input</span><span>(label: </span><span>&#34;Full name&#34;</span><span>)
</span><span>let</span><span> age </span><span>=</span><span> Int.</span><span>input</span><span>(label: </span><span>&#34;Age&#34;</span><span>)
</span><span>
</span><span>let</span><span> occupation </span><span>=
</span><span>    </span><span>if</span><span> age </span><span>&lt;= </span><span>18 </span><span>{
</span><span>        </span><span>let</span><span> grade </span><span>=</span><span> Int.</span><span>input</span><span>(min:</span><span>1</span><span>, max: </span><span>12</span><span>, </span><span>&#34;What grade are you in?&#34;</span><span>)
</span><span>        Student(grade)
</span><span>    } </span><span>else if</span><span> age </span><span>&lt;= </span><span>22 </span><span>{
</span><span>        </span><span>let</span><span> major </span><span>= </span><span>String</span><span>.</span><span>input</span><span>(label: </span><span>&#34;What&#39;s your major?&#34;</span><span>)
</span><span>        College(major)
</span><span>    } </span><span>else </span><span>{
</span><span>        </span><span>let</span><span> field </span><span>= </span><span>String</span><span>.</span><span>input</span><span>(label: </span><span>&#34;What field do you work in?&#34;</span><span>)
</span><span>        Worker(field)
</span><span>    }
</span><span>
</span><span>submit</span><span>({occupation ; name ; age})
</span></code></pre>
<p>Here the data passed to <code>submit</code> would be stored in a database, where people would be able to query and manipulate it in the same language. No more converting back and forth between JSON or records! A smart implementation of this could even infer the type of the data being submitted.</p>
<h2 id="figma-and-elixir">Figma and Elixir</h2>
<p>I spent the first two weeks of funemployment mostly thinking about this forms app. I did some prototyping with Figma and spent some time setting up and learning Elixir. I found Figma to be an excellent tool for thinking through designs!</p>
<p>Here you can see what that looks like and some of the things I was thinking about:</p>
<p><img src="https://charles.inclouds.space/figma1.png" alt="First figma example"/></p>
<p>and here was another iteration:</p>
<p><img src="https://charles.inclouds.space/figma2.png" alt="Second figma example"/></p>
<p>While I had a great experience with Figma, Elixir re-convinced me that there is a dire need for types. I went into learning Elixir with the hypothesis that maybe the strict type checking I had gotten used to wasn&#39;t necessary in all domains and that maybe I could iterate faster in a dynamic language.</p>
<p>After the fourth instance of passing two arguments in the wrong order and spending an hour debugging, I scrapped my Elixir prototype, donated some money to <a href="https://gleam.run/">Gleam</a> (an OCaml-like language on the BEAM), and began reading a type theory paper.</p>
<h2 id="elderberry">Elderberry</h2>
<p>For the last three weeks, I&#39;ve moved from thinking about forms to thinking about languages and types. In particular, I&#39;m creating a programming language called Elderberry. Its type system borrows heavily from a paper <a href="https://inclouds.space/papers/simplesub.pdf">The Simple Essence of Algebraic Subtyping (2020)</a>, which is a simplified re-presentation of <a href="https://inclouds.space/papers/mlsub.pdf">Polymorphism, Subtyping, and Type Inference in MLsub (2017)</a>.</p>
<p>I&#39;m pretty excited about Elderberry, but I don&#39;t want to hype features that don&#39;t exist yet. You can follow along with development with <a href="https://charles.inclouds.space/atom.xml">this blog&#39;s rss</a> for now or subscribe via email with <a href="https://charles.inclouds.space/cdn-cgi/l/email-protection#89e8ededc9fbfafaebf0a7ece4e8e0e5b6fafcebe3eceafdb4c3fcfafdacbbb9eae5e0eae2acbbb9faece7edacbbb9fde6acbbb9fafcebfaeafbe0ebeca8afe8e4f9b2ebe6edf0b4e1fdfdf9faacbac8acbbcfacbbcfe0e7eae5e6fcedfaa7faf9e8eaecacbbcfe8fde6e4a7f1e4e5"><span data-cfemail="f8999c9cb88a8b8b9a81d69d95999194">[email protected]</span></a>. I&#39;ll set up something more formal in the future!</p>
<h2 id="art">Art</h2>
<p>I&#39;ve also recently been making some art! My friend <a href="https://www.instagram.com/joyofrandomness">Rachel</a> has been doing a lot of generative art and has inspired me to get back into it.</p>
<p>So I made <a href="https://charles.inclouds.space/sketch/03/">this</a> with <a href="http://www.jinnycho.space/">Jinny</a>! It&#39;s amazing how fun and satisfying it is to create art like this! I want to do more of this and bring it to more people.</p>
<p>I have been dreaming about making a so-called &#34;structure&#34; editor tailored to Elderberry. A structure editor directly manipulates the syntax trees of a language instead of manipulating text, see <a href="https://hazel.org/build/dev/">Hazel</a> as an example. That is still very much in my sights and I&#39;ve been thinking about how to optimize it to make artistic programming as immersive and pleasant an experience as possible. Specifically, a design goal for Elderberry has been and will be to reduce the iteration cycle as much as possible with constant editor feedback and live evaluation. We shall see where it goes!</p>
<h2 id="fin">Fin</h2>
<p>There you have some things I&#39;ve been working on / thinking about! I intend to write a similar post as things move along — maybe towards the end of March or beginning of April — so do check back soon or follow along on the <a href="https://charles.inclouds.space/atom.xml">RSS</a>!</p>
<p>See you next time,
Charles</p>
<p><a href="https://charles.inclouds.space/blog/">↵</a></p>


</div>
  </body>
</html>
