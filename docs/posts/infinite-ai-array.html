<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ianbicking.org/blog/2023/01/infinite-ai-array.html">Original</a>
    <h1>Infinite AI Array</h1>
    
    <div id="readability-page-1" class="page"><div><center><blockquote><p lang="en" dir="ltr">making new string and list classes that call gpt3 under the hood so you can access elements beyond the final one. no more index errors!</p>— shb (@himbodhisattva) <a href="https://twitter.com/himbodhisattva/status/1606712418587267072?ref_src=twsrc%5Etfw">December 24, 2022</a></blockquote></center> 
<p>Some ideas are dumb enough you just have to try them, so I introduce to you the Python library: <a href="https://github.com/ianb/infinite-ai-array">Infinite <span>AI</span> Array</a>. Let’s see it in action…</p>
<div><pre><span></span><code><span>$</span> <span>pip</span> <span>install</span> <span>git</span><span>+</span><span>https</span><span>:</span><span>//</span><span>github</span><span>.</span><span>com</span><span>/</span><span>ianb</span><span>/</span><span>infinite</span><span>-</span><span>ai</span><span>-</span><span>array</span><span>.</span><span>git</span>
<span>$</span> <span>export</span> <span>OPENAI_API_KEY</span><span>=</span><span>sk</span><span>-...</span>
<span>$</span> <span>python</span>
<span>&gt;&gt;&gt;</span> <span>from</span> <span>iaia</span> <span>import</span> <span>InfiniteAIArray</span><span>,</span> <span>InfiniteAIDict</span>
<span>&gt;&gt;&gt;</span> <span>primes</span> <span>=</span> <span>InfiniteAIArray</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>primes</span><span>[:</span><span>10</span><span>]</span>
<span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>,</span> <span>11</span><span>,</span> <span>13</span><span>,</span> <span>17</span><span>,</span> <span>19</span><span>,</span> <span>23</span><span>,</span> <span>29</span><span>]</span>
<span>&gt;&gt;&gt;</span> <span>minnesota_cities</span> <span>=</span> <span>InfiniteAIArray</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>city_populations</span> <span>=</span> <span>InfiniteAIDict</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>for</span> <span>i</span><span>,</span> <span>city</span> <span>in</span> <span>enumerate</span><span>(</span><span>minnesota_cities</span><span>[:</span><span>6</span><span>]):</span>
<span>...</span>     <span>print</span><span>(</span><span>f</span><span>&#34;</span><span>{</span><span>i</span><span>+</span><span>1</span><span>:</span><span>&gt;2</span><span>}</span><span>. </span><span>{</span><span>city</span><span>:</span><span>&lt;20</span><span>}</span><span> </span><span>{</span><span>city_populations</span><span>[</span><span>city</span><span>]</span><span>}</span><span>&#34;</span><span>)</span>
 <span>1.</span> <span>Minneapolis</span>          <span>422331</span>
 <span>2.</span> <span>St</span><span>.</span> <span>Paul</span>             <span>302551</span>
 <span>3.</span> <span>Duluth</span>               <span>87622</span>
 <span>4.</span> <span>Rochester</span>            <span>111264</span>
 <span>5.</span> <span>Bloomington</span>          <span>84863</span>
 <span>6.</span> <span>St</span><span>.</span> <span>Cloud</span>            <span>68320</span>
</code></pre></div>

<p>Or more contextual…</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>favorite_books</span> <span>=</span> <span>InfiniteAIArray</span><span>([</span><span>&#34;Dune&#34;</span><span>,</span> <span>&#34;Perdido Street Station&#34;</span><span>,</span> <span>&#34;Red Mars&#34;</span><span>])</span>
<span>&gt;&gt;&gt;</span> <span>favorite_books</span><span>[:</span><span>8</span><span>]</span>
<span>[</span><span>&#39;Dune&#39;</span><span>,</span> <span>&#39;Perdido Street Station&#39;</span><span>,</span> <span>&#39;Red Mars&#39;</span><span>,</span> <span>&#34;The Hitchhiker&#39;s Guide to the Galaxy&#34;</span><span>,</span> <span>&#39;1984&#39;</span><span>,</span> <span>&#39;The Lord of the Rings&#39;</span><span>,</span> <span>&#34;The Handmaid&#39;s Tale&#34;</span><span>,</span> <span>&#39;The Martian Chronicles&#39;</span><span>]</span>
<span>&gt;&gt;&gt;</span> <span>other_favorite_books</span> <span>=</span> <span>InfiniteAIArray</span><span>([</span><span>&#34;Wizard Of Oz&#34;</span><span>,</span> <span>&#34;The Trials Of Morrigan Crow&#34;</span><span>,</span> <span>&#34;James and the Giant Peach&#34;</span><span>])</span>
<span>&gt;&gt;&gt;</span> <span>other_favorite_books</span><span>[:</span><span>8</span><span>]</span>
<span>[</span><span>&#39;Wizard Of Oz&#39;</span><span>,</span> <span>&#39;The Trials Of Morrigan Crow&#39;</span><span>,</span> <span>&#39;James and the Giant Peach&#39;</span><span>,</span> <span>&#39;The Catcher in the Rye&#39;</span><span>,</span> <span>&#39;The Lion, the Witch and the Wardrobe&#39;</span><span>,</span> <span>&#39;The Hobbit&#39;</span><span>,</span> <span>&#39;To Kill a Mockingbird&#39;</span><span>,</span> <span>&#39;The Alchemist&#39;</span><span>]</span>
</code></pre></div>

<h2>The Problem Statement</h2>
<p>All great tools <em>solve a problem</em>.</p>
<ul>
<li>Lists end</li>
<li>Dictionaries don’t have every key</li>
<li>I don’t have enough ideas</li>
<li>List operations usually happen right away and sometimes I’d like them to take a second or two so I can appreciate the effort involved in programming</li>
<li>My types and values are consistent like a program, not expressive and eclectic like natural language</li>
</ul>
<h2>But wait, there’s more!</h2>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>from</span> <span>iaia</span> <span>import</span> <span>magic</span>
<span>&gt;&gt;&gt;</span> <span>magic</span><span>.</span><span>first_wikipedia_paragraph</span><span>(</span><span>&#34;Minneapolis&#34;</span><span>)[:</span><span>80</span><span>]</span>
<span>Missing</span> <span>imports</span><span>:</span> <span>wikipedia</span>
  <span>To</span> <span>install</span> <span>(</span><span>gessing</span><span>):</span>
     <span>pip</span> <span>install</span> <span>wikipedia</span>
<span>Do</span> <span>it</span> <span>now</span><span>?</span> <span>[</span><span>y</span><span>/</span><span>N</span><span>]</span>
<span>y</span>
<span>...</span> <span>installation</span> <span>...</span>
<span>&#39;Minneapolis ( (listen)) is the largest city in Minnesota, United States, and the&#39;</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>magic</span><span>.</span><span>first_wikipedia_paragraph</span><span>)</span> <span># see what it&#39;s doing</span>
<span>def</span> <span>first_wikipedia_paragraph</span><span>(</span><span>arg1</span><span>:</span> <span>str</span><span>):</span> <span>...</span>
</code></pre></div>

<p>Who knew there was a <code>wikipedia</code> package? (<span>GPT</span> knew, but I did not.)</p>
<p>Let’s make it more like a chat, and circle in on our answer…</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>magic</span><span>.</span><span>primes</span><span>(</span><span>10</span><span>)</span>
<span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>]</span>
<span>&gt;&gt;&gt;</span> <span># We wanted the first 10 primes, not the primes up to 10, let&#39;s try...</span>
<span>&gt;&gt;&gt;</span> <span>magic</span><span>.</span><span>primes</span><span>(</span><span>count</span><span>=</span><span>10</span><span>)</span>
<span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>]</span>
<span>&gt;&gt;&gt;</span> <span>magic</span><span>.</span><span>primes</span><span>(</span><span>quantity</span><span>=</span><span>10</span><span>)</span>
<span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>,</span> <span>11</span><span>,</span> <span>13</span><span>,</span> <span>17</span><span>,</span> <span>19</span><span>,</span> <span>23</span><span>,</span> <span>29</span><span>]</span>
<span>&gt;&gt;&gt;</span> <span># We did it! Now let&#39;s stretch it...</span>
<span>&gt;&gt;&gt;</span> <span>magic</span><span>.</span><span>primes</span><span>(</span><span>quantity</span><span>=</span><span>&#34;11&#34;</span><span>)</span>
<span>Attempting</span> <span>to</span> <span>fix</span> <span>exception</span> <span>&#39;&lt;&#39;</span> <span>not</span> <span>supported</span> <span>between</span> <span>instances</span> <span>of</span> <span>&#39;int&#39;</span> <span>and</span> <span>&#39;str&#39;</span><span>...</span>
<span>[</span><span>2</span><span>,</span> <span>3</span><span>,</span> <span>5</span><span>,</span> <span>7</span><span>,</span> <span>11</span><span>,</span> <span>13</span><span>,</span> <span>17</span><span>,</span> <span>19</span><span>,</span> <span>23</span><span>,</span> <span>29</span><span>,</span> <span>31</span><span>]</span>
</code></pre></div>

<h2>Extending the problem statement</h2>
<ul>
<li>So many functions haven’t been written</li>
<li>Maybe functions should be more of a… negotiation?</li>
<li>Function signatures tell a story but the computer hasn’t been listening</li>
<li>All exceptions are bad and should be eliminated</li>
<li>Old security holes don’t offer us enough excitement, we need to explore new frontiers of vulnerabilities</li>
</ul>
<h2>But really, how does it work?</h2>
<p>To see what’s happening just set <code>$IAIA_VERBOSE</code> or run <code>iaia.set_verbose(True)</code>. You’ll see the <span>GPT</span> queries printed out. For lists they look like this:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>books</span> <span>=</span> <span>InfiniteAIArray</span><span>([</span><span>&#34;Les Misérables&#34;</span><span>])</span>
<span>&gt;&gt;&gt;</span> <span>books</span><span>[</span><span>1</span><span>]</span>
<span>Request</span> <span>1</span><span>:</span> <span>temperature</span><span>=</span><span>0.5</span>
<span>A</span> <span>list</span> <span>of</span> <span>2</span> <span>items</span><span>,</span> <span>created</span> <span>with</span> <span>the</span> <span>code</span> <span>`</span><span>books</span> <span>=</span>  <span>...</span><span># books`:</span>

<span>1.</span> <span>Les</span> <span>Misérables</span>
<span>2.</span>
<span>------------------------------------------------------------</span> <span>Response</span>
 <span>The</span> <span>Catcher</span> <span>in</span> <span>the</span> <span>Rye</span>
<span>Stop</span> <span>reason</span><span>:</span> <span>stop</span>
<span>Response</span> <span>time</span><span>:</span> <span>1.23</span><span>s</span>
<span>Tokens</span> <span>used</span><span>:</span> <span>30</span><span>+</span><span>6</span>  <span>total</span><span>:</span> <span>36</span> <span>+</span> <span>cached</span><span>:</span> <span>0</span> <span>=</span> <span>36</span> <span>(</span><span>$</span><span>0.0007</span> <span>w</span><span>/</span><span>o</span> <span>cache</span> <span>$</span><span>0.0007</span><span>)</span>
<span>&#39;The Catcher in the Rye&#39;</span>
</code></pre></div>

<p>In my experience <span>GPT</span> thinks very highly of <em>Catcher in the Rye</em>.</p>
<p>Dictionaries are similar:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>authors</span> <span>=</span> <span>InfiniteAIDict</span><span>()</span>
<span>&gt;&gt;&gt;</span> <span>authors</span><span>[</span><span>&#34;Les Misérables&#34;</span><span>]</span>
<span>Request</span> <span>2</span><span>:</span> <span>temperature</span><span>=</span><span>0.5</span>
<span>A</span> <span>list</span> <span>of</span> <span>name</span><span>:</span> <span>value</span> <span>pairs</span><span>,</span> <span>created</span> <span>with</span> <span>the</span> <span>code</span> <span>`</span><span>authors</span> <span>=</span>  <span>...</span><span># authors`:</span>


<span>1.</span> <span>Les</span> <span>Misérables</span><span>:</span>
<span>------------------------------------------------------------</span> <span>Response</span>
 <span>Victor</span> <span>Hugo</span>
<span>Stop</span> <span>reason</span><span>:</span> <span>stop</span>
<span>Response</span> <span>time</span><span>:</span> <span>1.04</span><span>s</span>
<span>Tokens</span> <span>used</span><span>:</span> <span>30</span><span>+</span><span>2</span>  <span>total</span><span>:</span> <span>68</span> <span>+</span> <span>cached</span><span>:</span> <span>0</span> <span>=</span> <span>68</span> <span>(</span><span>$</span><span>0.0014</span> <span>w</span><span>/</span><span>o</span> <span>cache</span> <span>$</span><span>0.0014</span><span>)</span>
<span>============================================================</span>
<span>&#39;Victor Hugo&#39;</span>
</code></pre></div>

<p>Functions are based on the signature:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>iaia</span><span>.</span><span>magic</span><span>.</span><span>arctan</span><span>(</span><span>1.0</span><span>)</span>
<span>Request</span> <span>1</span><span>:</span> <span>from</span> <span>cache</span>
<span>Create</span> <span>a</span> <span>function</span> <span>named</span> <span>`</span><span>arctan</span><span>`</span><span>:</span>

<span>```</span>
<span>def</span> <span>arctan</span><span>(</span><span>arg1</span><span>:</span> <span>float</span><span>):</span>
<span>------------------------------------------------------------</span> <span>Response</span>

    <span>&#34;&#34;&#34;</span>
<span>    Calculates the arctangent of a given number.</span>

<span>    Parameters:</span>
<span>    arg1 (float): The number to calculate the arctangent of.</span>

<span>    Returns:</span>
<span>    float: The arctangent of the given number.</span>
<span>    &#34;&#34;&#34;</span>
    <span>return</span> <span>math</span><span>.</span><span>atan</span><span>(</span><span>arg1</span><span>)</span>
<span>``</span>
<span>Stop</span> <span>reason</span><span>:</span> <span>stop</span>
<span>Tokens</span> <span>used</span><span>:</span> <span>25</span><span>+</span><span>76</span> <span>total</span><span>:</span> <span>0</span> <span>+</span> <span>cached</span><span>:</span> <span>0</span> <span>=</span> <span>0</span> <span>(</span><span>$</span><span>0</span> <span>w</span><span>/</span><span>o</span> <span>cache</span> <span>$</span><span>0</span><span>)</span>
<span>============================================================</span>
</code></pre></div>

<p>You’ll notice in this case it uses the <code>math</code> module but doesn’t import it. This causes an exception which is caught and <span>GPT</span> is asked to fix it:</p>
<div><pre><span></span><code><span>The</span><span> </span><span>following</span><span> </span><span>function</span><span> </span><span>throws</span><span> </span><span>an</span><span> </span><span>exception</span><span> </span><span>NameError</span>:<span> </span><span>name</span><span> </span><span>&#39;math&#39;</span><span> </span><span>is</span><span> </span><span>not</span><span> </span><span>defined</span><span></span>
<span>At</span><span> </span><span>the</span><span> </span><span>line</span><span> </span>`<span>return</span><span> </span><span>math</span>.<span>atan</span><span>(</span><span>arg1</span><span>)</span>`<span></span>

```<span></span>
<span>(</span><span>function</span><span> </span><span>definition</span><span>)</span><span></span>
```<span></span>

<span>The</span><span> </span><span>same</span><span> </span><span>function</span><span> </span><span>but</span><span> </span><span>with</span><span> </span><span>the</span><span> </span><span>NameError</span><span> </span><span>exception</span><span> </span><span>fixed</span>:<span></span>

```<span></span>
</code></pre></div>

<p>It tries one time to fix an exception, though if you keep calling the function using the same signature it will try each time to get rid of the exceptions and may incrementally succeed. Though with this prompt it tends to cover up errors as often as fix them.</p>
<h2>Following up…</h2>
<p>Comments welcome on <a href="https://hachyderm.io/@ianbicking/109621627461377616">Mastodon</a>, <a href="https://twitter.com/ianbicking/status/1610018555222695936">Twitter</a>, <a href="https://news.ycombinator.com/item?id=34224664">Hacker News discussion</a>. Contributions <a href="https://github.com/ianb/infinite-ai-array#contributing">kind of welcome</a>.</p>
<p>If you’ve gotten this far I will also throw in here that I (<a href="https://ianbicking.org">Ian</a>) am looking for a job, and maybe the best job for me is one that I don’t yet know exists. I’m particularly interested in the area of large language models (not just as a joke), new user interactions built on LLMs (especially their abilities to understand us in new ways). I’m excited about education, aiding in executive function, and human-centered interactions. <a href="mailto:ianbicking@gmail.com">Let me know if you have ideas</a>, I would appreciate it!</p></div></div>
  </body>
</html>
