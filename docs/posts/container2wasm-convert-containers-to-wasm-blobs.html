<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ktock/container2wasm">Original</a>
    <h1>Container2wasm: Convert Containers to WASM Blobs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a href="https://github.com/ktock/container2wasm/releases">[:arrow_down: <strong>Download</strong>]</a>
<a href="#command-reference">[:book: <strong>Command reference</strong>]</a>
<a href="#additional-resources">[:books: <strong>Additional Documents</strong>]</a>
<a href="https://ktock.github.io/container2wasm-demo/" rel="nofollow">[:arrow_forward: <strong>Demo</strong>]</a></p>

<p dir="auto">container2wasm is a container-to-wasm image converter that enables to run the container on WASM.</p>
<ul dir="auto">
<li>Converts a container to WASM with emulation by Bochs (for x86_64 containers) and TinyEMU (for riscv64 containers).</li>
<li>Runs on WASI runtimes (e.g. wasmtime, wamr, wasmer, wasmedge, wazero)</li>
<li>Runs on browser</li>
<li>x86_64 or riscv64 containers are recommended. Other platforms (e.g. arm64) also work (but slow).</li>
</ul>
<p dir="auto">This is an experimental software.</p>
<p dir="auto">Demo page of containers on browser (debian,python,node,vim): <a href="https://ktock.github.io/container2wasm-demo/" rel="nofollow">https://ktock.github.io/container2wasm-demo/</a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-examples" aria-hidden="true" tabindex="-1" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-container-image-to-wasm-wasi" aria-hidden="true" tabindex="-1" href="#container-image-to-wasm-wasi"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Container Image to WASM (WASI)</h3>
<div dir="auto" data-snippet-clipboard-copy-content="$ c2w ubuntu:22.04 out.wasm"><pre>$ <span>c2w ubuntu:22.04 out.wasm</span></pre></div>
<p dir="auto">The above command converts <code>ubuntu:22.04</code> container image to WASI image (<code>out.wasm</code>).</p>
<blockquote>
<p dir="auto">NOTE1: For selecting the container image&#39;s architecture other than <code>amd64</code>, use <code>--target-arch</code> flag of c2w (e.g. <code>c2w --target-arch=riscv64 riscv64/ubuntu:22.04 out.wasm</code>).</p>
</blockquote>
<blockquote>
<p dir="auto">NOTE2: x86_64 or riscv64 container is recommended. Other platform&#39;s containers should work but slow because of additional emulation.</p>
</blockquote>
<p dir="auto">The generated image runs on WASI runtimes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ wasmtime out.wasm uname -a
Linux localhost 6.1.0 #1 PREEMPT_DYNAMIC Mon Jun  5 11:57:09 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
$ wasmtime out.wasm ls /
bin   dev  home  lib32	libx32	mnt  proc  run	 srv  tmp  var
boot  etc  lib	 lib64	media	opt  root  sbin  sys  usr"><pre>$ <span>wasmtime out.wasm uname -a</span>
<span>Linux localhost 6.1.0 #1 PREEMPT_DYNAMIC Mon Jun  5 11:57:09 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux</span>
$ <span>wasmtime out.wasm ls /</span>
<span>bin   dev  home  lib32	libx32	mnt  proc  run	 srv  tmp  var</span>
<span>boot  etc  lib	 lib64	media	opt  root  sbin  sys  usr</span></pre></div>
<p dir="auto">Directory mapped from the host is accessible on the container.</p>
<div data-snippet-clipboard-copy-content="$ mkdir -p /tmp/share/ &amp;&amp; echo hi &gt; /tmp/share/from-host
$ wasmtime --mapdir /mnt/share::/tmp/share out.wasm cat /mnt/share/from-host
hi"><pre><code>$ mkdir -p /tmp/share/ &amp;&amp; echo hi &gt; /tmp/share/from-host
$ wasmtime --mapdir /mnt/share::/tmp/share out.wasm cat /mnt/share/from-host
hi
</code></pre></div>
<blockquote>
<p dir="auto">Please refer to <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/wasi"><code>./examples/networking/wasi/</code></a> for enabling networking</p>
</blockquote>
<h3 tabindex="-1" dir="auto"><a id="user-content-container-on-browser" aria-hidden="true" tabindex="-1" href="#container-on-browser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Container on Browser</h3>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ktock/container2wasm/blob/main/docs/images/ubuntu-wasi-on-browser.png"><img src="https://github.com/ktock/container2wasm/raw/main/docs/images/ubuntu-wasi-on-browser.png" alt="Container on browser"/></a></p>
<p dir="auto">You can run the container on browser as well.
There are two methods for running the container on browser.</p>
<blockquote>
<p dir="auto">Please also refer to <a href="https://github.com/ktock/container2wasm/blob/main/examples/wasi-browser"><code>./examples/wasi-browser</code></a> (WASI-on-browser example) and <a href="https://github.com/ktock/container2wasm/blob/main/examples/emscripten"><code>./examples/emscripten</code></a> (emscripten example).</p>
</blockquote>
<blockquote>
<p dir="auto">Please refer to <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking"><code>./examples/networking/</code></a> for details about enabling networking.</p>
</blockquote>
<h4 tabindex="-1" dir="auto"><a id="user-content-wasi-on-browser" aria-hidden="true" tabindex="-1" href="#wasi-on-browser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>WASI on browser</h4>
<p dir="auto">This example converts the container to WASI and runs it on browser.</p>
<p dir="auto">The following command generates a WASI image.</p>
<div data-snippet-clipboard-copy-content="$ c2w ubuntu:22.04 /tmp/out-js2/htdocs/out.wasm"><pre><code>$ c2w ubuntu:22.04 /tmp/out-js2/htdocs/out.wasm
</code></pre></div>
<p dir="auto">The following is an example of running the image on browser relying on <a href="https://github.com/mame/xterm-pty">xterm-pty</a> and <a href="https://github.com/bjorn3/browser_wasi_shim">browser_wasi_shim</a>.
This example serves the image on <code>localhost:8080</code> using apache http server.</p>
<div data-snippet-clipboard-copy-content="$ cp -R ./examples/wasi-browser/* /tmp/out-js2/ &amp;&amp; chmod 755 /tmp/out-js2/htdocs
$ docker run --rm -p 8080:80 \
         -v &#34;/tmp/out-js2/htdocs:/usr/local/apache2/htdocs/:ro&#34; \
         -v &#34;/tmp/out-js2/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \
         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;"><pre><code>$ cp -R ./examples/wasi-browser/* /tmp/out-js2/ &amp;&amp; chmod 755 /tmp/out-js2/htdocs
$ docker run --rm -p 8080:80 \
         -v &#34;/tmp/out-js2/htdocs:/usr/local/apache2/htdocs/:ro&#34; \
         -v &#34;/tmp/out-js2/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \
         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;
</code></pre></div>
<p dir="auto">You can run the container on browser via <code>localhost:8080</code>.</p>
<h5 tabindex="-1" dir="auto"><a id="user-content-wasi-on-browser-with-networking" aria-hidden="true" tabindex="-1" href="#wasi-on-browser-with-networking"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>WASI on browser with networking</h5>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ktock/container2wasm/blob/main/docs/images/debian-curl-wasi-on-browser-frontend-networking.png"><img src="https://github.com/ktock/container2wasm/raw/main/docs/images/debian-curl-wasi-on-browser-frontend-networking.png" alt="Debian container on browser with browser networking"/></a></p>
<p dir="auto">Container can also perform networking.
This section is the demo of using curl command in the container.</p>
<blockquote>
<p dir="auto">Tested only on Chrome. The example might not work on other browsers.</p>
</blockquote>
<div data-snippet-clipboard-copy-content="$ cat &lt;&lt;EOF | docker build -t debian-curl -
FROM debian:sid-slim
RUN apt-get update &amp;&amp; apt-get install -y curl
EOF
$ c2w debian-curl /tmp/out-js2/htdocs/out.wasm"><pre><code>$ cat &lt;&lt;EOF | docker build -t debian-curl -
FROM debian:sid-slim
RUN apt-get update &amp;&amp; apt-get install -y curl
EOF
$ c2w debian-curl /tmp/out-js2/htdocs/out.wasm
</code></pre></div>
<p dir="auto">This example serves the image on <code>localhost:8080</code> using apache http server.
The following also puts the <a href="https://github.com/ktock/container2wasm/blob/main/extras/c2w-net-proxy">network stack runnable on browser</a> to the document root.</p>
<div data-snippet-clipboard-copy-content="$ cp -R ./examples/wasi-browser/* /tmp/out-js2/ &amp;&amp; chmod 755 /tmp/out-js2/htdocs
$ wget -O /tmp/out-js2/htdocs/c2w-net-proxy.wasm https://github.com/ktock/container2wasm/releases/download/v0.5.0/c2w-net-proxy.wasm
$ docker run --rm -p 8080:80 \
         -v &#34;/tmp/out-js2/htdocs:/usr/local/apache2/htdocs/:ro&#34; \
         -v &#34;/tmp/out-js2/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \
         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;"><pre><code>$ cp -R ./examples/wasi-browser/* /tmp/out-js2/ &amp;&amp; chmod 755 /tmp/out-js2/htdocs
$ wget -O /tmp/out-js2/htdocs/c2w-net-proxy.wasm https://github.com/ktock/container2wasm/releases/download/v0.5.0/c2w-net-proxy.wasm
$ docker run --rm -p 8080:80 \
         -v &#34;/tmp/out-js2/htdocs:/usr/local/apache2/htdocs/:ro&#34; \
         -v &#34;/tmp/out-js2/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \
         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;
</code></pre></div>
<p dir="auto">You can run the container on browser with several types of configurations:</p>
<ul dir="auto">
<li><code>localhost:8080/?net=browser</code>: Container with networking. <a href="https://github.com/ktock/container2wasm/blob/main/extras/c2w-net-proxy">Network stack <code>c2w-net-proxy</code></a> implemented based on <a href="https://github.com/containers/gvisor-tap-vsock"><code>gvisor-tap-vsock</code></a> runs on browser and forwards HTTP/HTTPS packets using the browser&#39;s Fetch API. The set of accesible sites is restricted by the browser configuration (e.g. CORS restriction). See also <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/fetch"><code>./examples/networking/fetch</code></a> for detalis.</li>
<li><code>localhost:8080/?net=delegate=ws://localhost:8888</code>: Container with networking. You need to run <a href="https://github.com/ktock/container2wasm/blob/main/cmd/c2w-net">user-space network stack <code>c2w-net</code></a> implemented based on <a href="https://github.com/containers/gvisor-tap-vsock"><code>gvisor-tap-vsock</code></a> on the host (outside of browser). It forwards all packets received from the browser over WebSocket. See also <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/websocket"><code>./examples/networking/websocket</code></a> for detalis and configuration. (tested only on Linux)</li>
<li><code>localhost:8080</code>: Container without networking.</li>
</ul>
<h4 tabindex="-1" dir="auto"><a id="user-content-emscripten-on-browser" aria-hidden="true" tabindex="-1" href="#emscripten-on-browser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>emscripten on browser</h4>
<p dir="auto">This example uses emscripten for converting the container to WASM.</p>
<ul dir="auto">
<li>pros: WASM image size can be smaller than WASI.</li>
<li>cons: WASI-specific optimization like <a href="https://github.com/bytecodealliance/wizer/">Wizer</a> pre-initialization isn&#39;t available for this mode. So the startup of the container can be slow (For x86_64 containers it might take &gt;= 30s. For riscv64 containers it might take &gt;= 10s).</li>
</ul>
<p dir="auto">The following command generates a WASM image and a JS file runnable on browser.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ c2w --to-js ubuntu:22.04 /tmp/out-js/htdocs/"><pre>$ <span>c2w --to-js ubuntu:22.04 /tmp/out-js/htdocs/</span></pre></div>
<p dir="auto">The following is an example of running the image on browser relying on <a href="https://github.com/mame/xterm-pty">xterm-pty</a>.
This example serves the image on <code>localhost:8080</code> using apache http server.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ cp -R ./examples/emscripten/* /tmp/out-js/ &amp;&amp; chmod 755 /tmp/out-js/htdocs
$ docker run --rm -p 8080:80 \
         -v &#34;/tmp/out-js/htdocs:/usr/local/apache2/htdocs/:ro&#34; \
         -v &#34;/tmp/out-js/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \
         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;"><pre>$ <span>cp -R ./examples/emscripten/<span>*</span> /tmp/out-js/ <span>&amp;&amp;</span> chmod 755 /tmp/out-js/htdocs</span>
$ <span>docker run --rm -p 8080:80 \</span>
<span>         -v &#34;/tmp/out-js/htdocs:/usr/local/apache2/htdocs/:ro&#34; \</span>
<span>         -v &#34;/tmp/out-js/xterm-pty.conf:/usr/local/apache2/conf/extra/xterm-pty.conf:ro&#34; \</span>
<span>         --entrypoint=/bin/sh httpd -c &#39;echo &#34;Include conf/extra/xterm-pty.conf&#34; &gt;&gt; /usr/local/apache2/conf/httpd.conf &amp;&amp; httpd-foreground&#39;</span></pre></div>
<p dir="auto">You can run the container on browser via <code>localhost:8080</code>.</p>
<blockquote>
<p dir="auto">NOTE: It can take some time to load and start the container.</p>
</blockquote>
<p dir="auto">Networking can also be enabled using the <a href="https://github.com/ktock/container2wasm/blob/main/cmd/c2w-net">user-space network stack <code>c2w-net</code></a> implemented based on <a href="https://github.com/containers/gvisor-tap-vsock"><code>gvisor-tap-vsock</code></a> serving over WebSocket on the host (outside of browser).
See also <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/websocket"><code>./examples/networking/websocket</code></a> for detalis.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" tabindex="-1" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting Started</h2>
<ul dir="auto">
<li>requirements
<ul dir="auto">
<li>Docker 18.09+ (w/ <code>DOCKER_BUILDKIT=1</code>)</li>
<li><a href="https://docs.docker.com/build/install-buildx/" rel="nofollow">Docker Buildx</a> v0.8+ (recommended) or <code>docker build</code> (w/ <code>DOCKER_BUILDKIT=1</code>)</li>
</ul>
</li>
</ul>
<p dir="auto">You can install the converter command <code>c2w</code> using one of the following methods.</p>
<blockquote>
<p dir="auto">NOTE: The output binary also contains <a href="https://github.com/ktock/container2wasm/blob/main/cmd/c2w-net"><code>c2w-net</code></a> which a command usable for controlling networking feature (please see also <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking">./examples/networking</a> for details).</p>
</blockquote>
<h3 tabindex="-1" dir="auto"><a id="user-content-release-binaries" aria-hidden="true" tabindex="-1" href="#release-binaries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Release binaries</h3>
<p dir="auto">Binaries are available from <a href="https://github.com/ktock/container2wasm/releases">https://github.com/ktock/container2wasm/releases</a>
Extract the tarball and put the binary somewhere under <code>$PATH</code>.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-building-binaries-using-make" aria-hidden="true" tabindex="-1" href="#building-binaries-using-make"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Building binaries using make</h3>
<p dir="auto">Go 1.19+ is needed.</p>

<h2 tabindex="-1" dir="auto"><a id="user-content-command-reference" aria-hidden="true" tabindex="-1" href="#command-reference"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Command reference</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-c2w" aria-hidden="true" tabindex="-1" href="#c2w"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>c2w</h3>
<p dir="auto">Converts a container image into a WASM image and writes it to the specified path (default: <code>out.wasm</code> at the current directory).</p>
<p dir="auto">Usage: <code>c2w [options] image-name [output file]</code></p>
<ul dir="auto">
<li><code>image-name</code>: container image name (will be pulled from the registry if it doesn&#39;t exist in Docker)</li>
<li><code>[output file]</code>: path to the result WASM file.</li>
</ul>
<p dir="auto">Sub commands</p>
<ul dir="auto">
<li><code>help, h</code>: Shows a list of commands or help for one command</li>
</ul>
<p dir="auto">Options</p>
<ul dir="auto">
<li><code>--assets value</code>: Custom location of build assets.</li>
<li><code>--dockerfile value</code>: Custom location of Dockerfile (default: embedded to this command)</li>
<li><code>--builder value</code>: Bulider command to use (default: &#34;docker&#34;)</li>
<li><code>--target-arch value</code>: target architecture of the source image to use (default: &#34;amd64&#34;)</li>
<li><code>--build-arg value</code>: Additional build arguments (please see Dockerfile for available build args)</li>
<li><code>--to-js</code>: convert the container to WASM using emscripten</li>
<li><code>--debug-image</code>: Enable debug print in the output image</li>
<li><code>--show-dockerfile</code>: Show default Dockerfile</li>
<li><code>--legacy</code>: Use &#34;docker build&#34; instead of buildx (no support for assets flag) (default:false)</li>
<li><code>--help, -h</code>: show help</li>
<li><code>--version, -v: </code>print the version</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-run-time-flags-for-wasm-image" aria-hidden="true" tabindex="-1" href="#run-time-flags-for-wasm-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Run-time flags for WASM image</h3>
<p dir="auto">You can specify run-time flags to the generated wasm image for configuring the execution (e.g. for changing command to run in the container).</p>
<p dir="auto">Usage: <code>out.wasm [options] [COMMAND] [ARG...]</code></p>
<ul dir="auto">
<li><code>[COMMAND] [ARG...]</code>: command to run in the container. (default: commands specified in the image config)</li>
</ul>
<p dir="auto">Options</p>
<ul dir="auto">
<li><code>-entrypoint &lt;command&gt;</code> : entrypoint command. (default: entrypoint specified in the image config)</li>
<li><code>-no-stdin</code> : disable stdin. (default: false)</li>
</ul>
<p dir="auto">Example:</p>
<p dir="auto">The following changes the container&#39;s entrypoint to <code>echo</code> and pass <code>hello</code> to the arguments.</p>
<div data-snippet-clipboard-copy-content="wasmtime -- /app/out.wasm --entrypoint=echo hello"><pre><code>wasmtime -- /app/out.wasm --entrypoint=echo hello
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-directory-mapping" aria-hidden="true" tabindex="-1" href="#directory-mapping"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Directory mapping</h3>
<p dir="auto">Directory mapped from the host is accessible on the container.</p>
<div data-snippet-clipboard-copy-content="$ mkdir -p /tmp/share/ &amp;&amp; echo hi &gt; /tmp/share/hi
$ wasmtime --mapdir /test/dir/share::/tmp/share /app/out.wasm ls /test/dir/share/
hi"><pre><code>$ mkdir -p /tmp/share/ &amp;&amp; echo hi &gt; /tmp/share/hi
$ wasmtime --mapdir /test/dir/share::/tmp/share /app/out.wasm ls /test/dir/share/
hi
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-motivation" aria-hidden="true" tabindex="-1" href="#motivation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Motivation</h2>
<p dir="auto">Though more and more programming languages start to support WASM, it&#39;s not easy to run the existing programs on WASM.
This sometimes requires re-implementing and re-compiling them and costs extra time for development.
This is a PoC converter tries to solve it by enabling running unmodified containers on WASM.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-how-does-it-work" aria-hidden="true" tabindex="-1" href="#how-does-it-work"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How does it work</h2>
<p dir="auto">contaienr2wasm creates a WASM image that runs the container and the Linux kernel on the emulated CPU.</p>
<p dir="auto">The following shows the techniqual details:</p>
<ul dir="auto">
<li>Builder: <a href="https://github.com/moby/buildkit">BuildKit</a> runs the conversion steps written in Dockerfile.</li>
<li>Emulator: <a href="https://bochs.sourceforge.io/" rel="nofollow">Bochs</a> emulates x86_64 CPU on WASM. <a href="https://bellard.org/tinyemu/" rel="nofollow">TinyEMU</a> emulates RISC-V CPU on WASM. They&#39;re compiled to WASM using <a href="https://github.com/WebAssembly/wasi-sdk">wasi-sdk</a> (for WASI and on-browser) and <a href="https://github.com/emscripten-core/emscripten">emscripten</a> (for on-browser).</li>
<li>Guest OS: Linux runs on the emulated CPU. <a href="https://github.com/opencontainers/runc">runc</a> starts the container. Non-x86 and non-RISC-V containers runs with additional emulation by QEMU installed via <a href="https://github.com/tonistiigi/binfmt"><code>tonistiigi/binfmt</code></a>.</li>
<li>Directory Mapping: WASI filesystem API makes host directories visible to the emulator. Emulators mount them to the guest linux via virtio-9p.</li>
<li>Packaging: <a href="https://github.com/kateinoigakukun/wasi-vfs">wasi-vfs</a> (for WASI and on-browser) and emscripten (for on-browser) are used for packaging the dependencies. The kernel is pre-booted during the build using <a href="https://github.com/bytecodealliance/wizer/">wizer</a> to minimize the startup latency (for WASI only as of now).</li>
<li>Networking: Browser&#39;s Fetch API or WebSocket is used for on-browser image. <code>sock_*</code> API is used for WASI. <a href="https://github.com/containers/gvisor-tap-vsock"><code>gvisor-tap-vsock</code></a> can be used as the networking stack. (docs: <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking"><code>./examples/networking/</code></a>)</li>
<li>Security: The converted container runs in the sandboxed WASM (WASI) VM with the limited access to the host system.</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-wasi-runtimes-integration-status" aria-hidden="true" tabindex="-1" href="#wasi-runtimes-integration-status"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>WASI Runtimes Integration Status</h2>
<ul dir="auto">
<li>
<p dir="auto">✔️ : supported</p>
</li>
<li>
<p dir="auto">🚧 : WIP</p>
</li>
<li>
<p dir="auto"><strong>NOTE</strong>: WASI features not listed here are untested (future version will support more features)</p>
</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-x86_64-containers" aria-hidden="true" tabindex="-1" href="#x86_64-containers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>x86_64 containers</h3>
<table>
<thead>
<tr>
<th>runtime</th>
<th>stdio</th>
<th>mapdir</th>
<th>networking</th>
<th>note</th>
</tr>
</thead>
<tbody>
<tr>
<td>wasmtime</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️ (w/ <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/wasi">host-side network stack</a>)</td>
<td></td>
</tr>
<tr>
<td>wamr(wasm-micro-runtime)</td>
<td>✔️</td>
<td>✔️</td>
<td>🚧</td>
<td></td>
</tr>
<tr>
<td>wazero</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️ (w/ <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/wasi">host-side network stack</a></td>
<td></td>
</tr>
<tr>
<td>wasmer</td>
<td>🚧 (stdin unsupported)</td>
<td>✔️</td>
<td>🚧</td>
<td>non-blocking stdin doesn&#39;t seem to work</td>
</tr>
<tr>
<td>wasmedge</td>
<td>🚧 (stdin unsupported)</td>
<td>✔️</td>
<td>🚧</td>
<td>non-blocking stdin doesn&#39;t seem to work</td>
</tr>
</tbody>
</table>
<h3 tabindex="-1" dir="auto"><a id="user-content-risc-v-and-other-architecutres-containers" aria-hidden="true" tabindex="-1" href="#risc-v-and-other-architecutres-containers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>risc-v and other architecutre&#39;s containers</h3>
<table>
<thead>
<tr>
<th>runtime</th>
<th>stdio</th>
<th>mapdir</th>
<th>networking</th>
<th>note</th>
</tr>
</thead>
<tbody>
<tr>
<td>wasmtime</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️ (w/ <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/wasi">host-side network stack</a>)</td>
<td></td>
</tr>
<tr>
<td>wamr(wasm-micro-runtime)</td>
<td>✔️</td>
<td>✔️</td>
<td>🚧</td>
<td></td>
</tr>
<tr>
<td>wazero</td>
<td>✔️</td>
<td>✔️</td>
<td>✔️ (w/ <a href="https://github.com/ktock/container2wasm/blob/main/examples/networking/wasi">host-side network stack</a>)</td>
<td></td>
</tr>
<tr>
<td>wasmer</td>
<td>🚧 (stdin unsupported)</td>
<td>✔️</td>
<td>🚧</td>
<td>non-blocking stdin doesn&#39;t seem to work</td>
</tr>
<tr>
<td>wasmedge</td>
<td>🚧 (stdin unsupported)</td>
<td>✔️</td>
<td>🚧</td>
<td>non-blocking stdin doesn&#39;t seem to work</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto"><a id="user-content-similar-projects" aria-hidden="true" tabindex="-1" href="#similar-projects"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Similar projects</h2>
<p dir="auto">There are several container runtimes support running WASM applications, but they don&#39;t run containers on WASM.</p>
<ul dir="auto">
<li>WASM on container runtimes
<ul dir="auto">
<li>Docker+Wasm integration: <a href="https://docs.docker.com/desktop/wasm/" rel="nofollow">https://docs.docker.com/desktop/wasm/</a></li>
<li>runwasi: <a href="https://github.com/containerd/runwasi">https://github.com/containerd/runwasi</a></li>
<li>youki: <a href="https://github.com/containers/youki">https://github.com/containers/youki</a></li>
<li>crun: <a href="https://github.com/containers/crun">https://github.com/containers/crun</a></li>
<li>krustlet: <a href="https://github.com/krustlet/krustlet">https://github.com/krustlet/krustlet</a></li>
</ul>
</li>
</ul>
<p dir="auto">There are emulators that support running linux on WASM, but they don&#39;t support WASI.</p>
<ul dir="auto">
<li>
<p dir="auto">x86 on WASM</p>
<ul dir="auto">
<li>v86: <a href="https://github.com/copy/v86">https://github.com/copy/v86</a></li>
</ul>
</li>
<li>
<p dir="auto">RISCV on WASM</p>
<ul dir="auto">
<li>TinyEMU: <a href="https://bellard.org/tinyemu/" rel="nofollow">https://bellard.org/tinyemu/</a></li>
</ul>
</li>
</ul>
<p dir="auto">Some WASM API specs provides applications access to the host system.
Re-compilation (and possibe re-implementation) of the application is needed.</p>
<ul dir="auto">
<li>WASI: <a href="https://github.com/WebAssembly/WASI">https://github.com/WebAssembly/WASI</a></li>
<li>WASIX(WASI + additional syscall extensions): <a href="https://github.com/wasix-org">https://github.com/wasix-org</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-additional-resources" aria-hidden="true" tabindex="-1" href="#additional-resources"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Additional Resources</h2>
<ul dir="auto">
<li><a href="https://github.com/ktock/container2wasm/blob/main/examples"><code>./examples/</code></a>: Examples (python, php, on-browser, networking, etc.)</li>
<li><code>vscode-container-wasm</code>: VSCode extension for running containers on VSCode on browser (e.g. <code>github.dev</code>), leveraging container2wasm: <a href="https://github.com/ktock/vscode-container-wasm">https://github.com/ktock/vscode-container-wasm</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-acknowledgement" aria-hidden="true" tabindex="-1" href="#acknowledgement"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Acknowledgement</h2>
<ul dir="auto">
<li>
<p dir="auto">container2wasi itself is licensed under Apache 2.0 but the generated WASM image will include third-pirty softwares:</p>
<ul dir="auto">
<li>Bochs (<a href="https://github.com/bochs-emu/Bochs/blob/master/LICENSE">GNU Lesser General Public License v2.1</a>) <a href="https://bochs.sourceforge.io/" rel="nofollow">https://bochs.sourceforge.io/</a>
<ul dir="auto">
<li>Source code is contained in (<a href="https://github.com/ktock/container2wasm/blob/main/patches/bochs"><code>./patches/bochs</code></a>). Bochs is modified by our project for making it work with containers</li>
</ul>
</li>
<li>TinyEMU (<a href="https://opensource.org/license/mit/" rel="nofollow">MIT License</a>) <a href="https://bellard.org/tinyemu/" rel="nofollow">https://bellard.org/tinyemu/</a>
<ul dir="auto">
<li>Source code is contained in (<a href="https://github.com/ktock/container2wasm/blob/main/patches/tinyemu"><code>./patches/tinyemu</code></a>). TinyEMU is modified by our project for making it work with containers</li>
</ul>
</li>
<li>GRUB (<a href="https://www.gnu.org/licenses/gpl.html" rel="nofollow">GNU General Public License Version 3</a>): <a href="https://www.gnu.org/software/grub/" rel="nofollow">https://www.gnu.org/software/grub/</a></li>
<li>BBL(riscv-pk) (<a href="https://github.com/riscv-software-src/riscv-pk/blob/master/LICENSE">license</a>): <a href="https://github.com/riscv-software-src/riscv-pk">https://github.com/riscv-software-src/riscv-pk</a></li>
<li>Linux (<a href="https://github.com/torvalds/linux/blob/master/COPYING">GNU General Public License version 2</a>): <a href="https://github.com/torvalds/linux/">https://github.com/torvalds/linux/</a></li>
<li>tini (<a href="https://github.com/krallin/tini/blob/master/LICENSE">MIT License</a>): <a href="https://github.com/krallin/tini">https://github.com/krallin/tini</a></li>
<li>runc (<a href="https://github.com/opencontainers/runc/blob/main/LICENSE">Apache License 2.0</a>): <a href="https://github.com/opencontainers/runc">https://github.com/opencontainers/runc</a></li>
<li>Binfmt (<a href="https://github.com/tonistiigi/binfmt/blob/master/LICENSE">MIT License</a>): <a href="https://github.com/tonistiigi/binfmt">https://github.com/tonistiigi/binfmt</a></li>
<li>QEMU (<a href="https://github.com/qemu/qemu/blob/master/LICENSE">license</a>): <a href="https://github.com/qemu/qemu">https://github.com/qemu/qemu</a></li>
<li>vmtouch (<a href="https://github.com/hoytech/vmtouch/blob/master/LICENSE">license</a>): <a href="https://github.com/hoytech/vmtouch">https://github.com/hoytech/vmtouch</a></li>
<li>BusyBox (<a href="https://www.busybox.net/license.html" rel="nofollow">GNU General Public License version 2</a>): <a href="https://git.busybox.net/busybox" rel="nofollow">https://git.busybox.net/busybox</a></li>
</ul>
</li>
<li>
<p dir="auto">On-browser example relies on the following softwares.</p>
<ul dir="auto">
<li>xterm-pty (<a href="https://github.com/mame/xterm-pty/blob/main/LICENSE.txt">MIT License</a>): <a href="https://github.com/mame/xterm-pty">https://github.com/mame/xterm-pty</a></li>
<li><code>browser_wasi_shim</code> (either of <a href="https://github.com/bjorn3/browser_wasi_shim/blob/main/LICENSE-MIT">MIT License</a> and <a href="https://github.com/bjorn3/browser_wasi_shim/blob/main/LICENSE-APACHE">Apache License 2.0</a>): <a href="https://github.com/bjorn3/browser_wasi_shim">https://github.com/bjorn3/browser_wasi_shim</a></li>
<li><code>gvisor-tap-vsock</code> (<a href="https://github.com/containers/gvisor-tap-vsock/blob/main/LICENSE">Apache License 2.0</a>): <a href="https://github.com/containers/gvisor-tap-vsock">https://github.com/containers/gvisor-tap-vsock</a></li>
</ul>
</li>
</ul>
</article>
          </div></div>
  </body>
</html>
