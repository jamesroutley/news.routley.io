<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/borgo-lang/borgo">Original</a>
    <h1>Borgo is a statically typed language that compiles to Go</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/borgo-lang/borgo-lang.github.io/main/borgo.jpg"><img src="https://raw.githubusercontent.com/borgo-lang/borgo-lang.github.io/main/borgo.jpg" alt="Borgo sits between Go and Rust"/></a></p>
<hr/>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/borgo-lang/borgo/actions/workflows/ci.yml/badge.svg"><img src="https://github.com/borgo-lang/borgo/actions/workflows/ci.yml/badge.svg" alt="build"/></a></p>
<p dir="auto">I want a language for writing applications that is more expressive than Go but
less complex than Rust.</p>
<p dir="auto">Go is simple and straightforward, but I often wish it offered more type safety.
Rust is very nice to work with (at least for single threaded code) but it&#39;s too
broad and complex, sometimes painfully so.</p>
<p dir="auto"><strong>Borgo is a new language that transpiles to Go</strong>. It&#39;s fully compatible with
existing Go packages.</p>
<p dir="auto">Borgo syntax is similar to Rust, with optional semi-colons.</p>

<p dir="auto">Check out the <strong><a href="https://borgo-lang.github.io/" rel="nofollow">online playground</a></strong> for a tour
of the language.</p>
<p dir="auto">You can also take a look at test files for working Borgo code:</p>
<ul dir="auto">
<li><a href="https://github.com/borgo-lang/borgo/blob/main/compiler/test/codegen-emit.md">codegen-emit.md</a></li>
<li><a href="https://github.com/borgo-lang/borgo/blob/main/compiler/test/infer-expr.md">infer-expr.md</a></li>
<li><a href="https://github.com/borgo-lang/borgo/blob/main/compiler/test/infer-file.md">infer-file.md</a></li>
</ul>

<div dir="auto"><h2 tabindex="-1" dir="auto">Algebraic data types and pattern matching</h2><a id="user-content-algebraic-data-types-and-pattern-matching" aria-label="Permalink: Algebraic data types and pattern matching" href="#algebraic-data-types-and-pattern-matching"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="use fmt

enum NetworkState {
    Loading,
    Failed(int),
    Success(string),
}

let msg = match state {
    NetworkState.Loading =&gt; &#34;still loading&#34;,
    NetworkState.Failed(code) =&gt; fmt.Sprintf(&#34;Got error code: %d&#34;, code),
    NetworkState.Success(res) =&gt; res,
}"><pre><span>use</span> fmt<span></span>

<span>enum</span> <span>NetworkState</span> <span>{</span>
    <span>Loading</span><span>,</span>
    <span>Failed</span><span>(</span><span>int</span><span>)</span><span>,</span>
    <span>Success</span><span>(</span><span>string</span><span>)</span><span>,</span>
<span>}</span>

<span>let</span> msg = <span>match</span> state <span>{</span>
    <span>NetworkState</span><span>.</span><span>Loading</span> =&gt; <span>&#34;still loading&#34;</span><span>,</span>
    <span>NetworkState</span><span>.</span><span>Failed</span><span>(</span>code<span>)</span> =&gt; fmt<span>.</span><span>Sprintf</span><span>(</span><span>&#34;Got error code: %d&#34;</span><span>,</span> code<span>)</span><span>,</span>
    <span>NetworkState</span><span>.</span><span>Success</span><span>(</span>res<span>)</span> =&gt; res<span>,</span>
<span>}</span><span></span></pre></div>
<hr/>

<div dir="auto" data-snippet-clipboard-copy-content="// import packages from Go stdlib
use fmt
use os

let key = os.LookupEnv(&#34;HOME&#34;)

match key {
    Some(s) =&gt; fmt.Println(&#34;home dir:&#34;, s),
    None =&gt; fmt.Println(&#34;Not found in env&#34;),
}"><pre><span>// import packages from Go stdlib</span>
<span>use</span> fmt<span></span>
<span>use</span> os<span></span>

<span>let</span> key = os<span>.</span><span>LookupEnv</span><span>(</span><span>&#34;HOME&#34;</span><span>)</span><span></span>

<span>match</span> key <span>{</span>
    <span>Some</span><span>(</span>s<span>)</span> =&gt; fmt<span>.</span><span>Println</span><span>(</span><span>&#34;home dir:&#34;</span><span>,</span> s<span>)</span><span>,</span>
    <span>None</span> =&gt; fmt<span>.</span><span>Println</span><span>(</span><span>&#34;Not found in env&#34;</span><span>)</span><span>,</span>
<span>}</span></pre></div>
<hr/>
<div dir="auto"><h2 tabindex="-1" dir="auto"><code>Result&lt;T, E&gt;</code> instad of multiple return values</h2><a id="user-content-resultt-e-instad-of-multiple-return-values" aria-label="Permalink: Result&lt;T, E&gt; instad of multiple return values" href="#resultt-e-instad-of-multiple-return-values"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="use fmt
use net.http

fn makeRequest() -&gt; Result&lt;int, error&gt; {
    let request = http.Get(&#34;http://example.com&#34;)

    match request {
        Ok(resp) =&gt; Ok(resp.StatusCode),
        Err(err) =&gt; Err(fmt.Errorf(&#34;failed http request %w&#34;, err))
    }
}"><pre><span>use</span> fmt<span></span>
<span>use</span> net<span>.</span>http<span></span>

<span>fn</span> <span>makeRequest</span><span>(</span><span>)</span> -&gt; <span>Result</span><span>&lt;</span><span>int</span><span>,</span> <span>error</span><span>&gt;</span> <span>{</span>
    <span>let</span> request = http<span>.</span><span>Get</span><span>(</span><span>&#34;http://example.com&#34;</span><span>)</span><span></span>

    <span>match</span> request <span>{</span>
        <span>Ok</span><span>(</span>resp<span>)</span> =&gt; <span>Ok</span><span>(</span>resp<span>.</span><span>StatusCode</span><span>)</span><span>,</span>
        <span>Err</span><span>(</span>err<span>)</span> =&gt; <span>Err</span><span>(</span>fmt<span>.</span><span>Errorf</span><span>(</span><span>&#34;failed http request %w&#34;</span><span>,</span> err<span>)</span><span>)</span>
    <span>}</span>
<span>}</span></pre></div>
<hr/>
<div dir="auto"><h2 tabindex="-1" dir="auto">Error handling with <code>?</code> operator</h2><a id="user-content-error-handling-with--operator" aria-label="Permalink: Error handling with ? operator" href="#error-handling-with--operator"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="use fmt
use io
use os

fn copyFile(src: string, dst: string) -&gt; Result&lt;(), error&gt; {
    let stat = os.Stat(src)?

    if !stat.Mode().IsRegular() {
        return Err(fmt.Errorf(&#34;%s is not a regular file&#34;, src))
    }

    let source = os.Open(src)?
    defer source.Close()

    let destination = os.Create(dst)?
    defer destination.Close()

    // ignore number of bytes copied
    let _ = io.Copy(destination, source)?

    Ok(())
}"><pre><span>use</span> fmt<span></span>
<span>use</span> io<span></span>
<span>use</span> os<span></span>

<span>fn</span> <span>copyFile</span><span>(</span><span>src</span><span>:</span> <span>string</span><span>,</span> <span>dst</span><span>:</span> <span>string</span><span>)</span> -&gt; <span>Result</span><span>&lt;</span><span>(</span><span>)</span><span>,</span> <span>error</span><span>&gt;</span> <span>{</span>
    <span>let</span> stat = os<span>.</span><span>Stat</span><span>(</span>src<span>)</span>?<span></span>

    <span>if</span> !stat<span>.</span><span>Mode</span><span>(</span><span>)</span><span>.</span><span>IsRegular</span><span>(</span><span>)</span> <span>{</span>
        <span>return</span> <span>Err</span><span>(</span>fmt<span>.</span><span>Errorf</span><span>(</span><span>&#34;%s is not a regular file&#34;</span><span>,</span> src<span>)</span><span>)</span>
    <span>}</span>

    <span>let</span> source = os<span>.</span><span>Open</span><span>(</span>src<span>)</span>?
    defer source<span>.</span><span>Close</span><span>(</span><span>)</span><span></span>

    <span>let</span> destination = os<span>.</span><span>Create</span><span>(</span>dst<span>)</span>?
    defer destination<span>.</span><span>Close</span><span>(</span><span>)</span>

    <span>// ignore number of bytes copied</span><span></span>
    <span>let</span> _ = io<span>.</span><span>Copy</span><span>(</span>destination<span>,</span> source<span>)</span>?<span></span>

    <span>Ok</span><span>(</span><span>(</span><span>)</span><span>)</span>
<span>}</span></pre></div>
<hr/>

<p dir="auto">Small game from the Rust book, implemented in Borgo.</p>
<p dir="auto">Things to note:</p>
<ul dir="auto">
<li>import packages from Go stdlib</li>
<li><code>strconv.Atoi</code> returns an <code>Option&lt;int&gt;</code></li>
<li><code>Reader.ReadString</code> returns a <code>Result&lt;string, error&gt;</code> (which can be unwrapped)</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="use bufio
use fmt
use math.rand
use os
use strconv
use strings
use time

fn main() {
    let reader = bufio.NewReader(os.Stdin)

    rand.Seed(time.Now().UnixNano())
    let secret = rand.Intn(100) + 1

    loop {
        fmt.Println(&#34;Please input your guess.&#34;)

        let text = reader.ReadString(&#39;\n&#39;).Unwrap()
        let text = strings.TrimSpace(text)

        let guess = match strconv.Atoi(text) {
            Ok(n) =&gt; n,
            Err(_) =&gt; continue,
        }

        fmt.Println(&#34;You guessed: &#34;, guess)

        if guess &lt; secret {
            fmt.Println(&#34;Too small!&#34;)
        } else if guess &gt; secret {
            fmt.Println(&#34;Too big!&#34;)
        } else {
            fmt.Println(&#34;Correct!&#34;)
            break
        }
    }
}"><pre><span>use</span> bufio<span></span>
<span>use</span> fmt<span></span>
<span>use</span> math<span>.</span>rand
<span>use</span> os<span></span>
<span>use</span> strconv<span></span>
<span>use</span> strings<span></span>
<span>use</span> time<span></span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> reader = bufio<span>.</span><span>NewReader</span><span>(</span>os<span>.</span><span>Stdin</span><span>)</span>

    rand<span>.</span><span>Seed</span><span>(</span>time<span>.</span><span>Now</span><span>(</span><span>)</span><span>.</span><span>UnixNano</span><span>(</span><span>)</span><span>)</span><span></span>
    <span>let</span> secret = rand<span>.</span><span>Intn</span><span>(</span><span>100</span><span>)</span> + <span>1</span>

    <span>loop</span> <span>{</span>
        fmt<span>.</span><span>Println</span><span>(</span><span>&#34;Please input your guess.&#34;</span><span>)</span><span></span>

        <span>let</span> text = reader<span>.</span><span>ReadString</span><span>(</span><span>&#39;\n&#39;</span><span>)</span><span>.</span><span>Unwrap</span><span>(</span><span>)</span><span></span>
        <span>let</span> text = strings<span>.</span><span>TrimSpace</span><span>(</span>text<span>)</span><span></span>

        <span>let</span> guess = <span>match</span> strconv<span>.</span><span>Atoi</span><span>(</span>text<span>)</span> <span>{</span>
            <span>Ok</span><span>(</span>n<span>)</span> =&gt; n<span>,</span>
            <span>Err</span><span>(</span>_<span>)</span> =&gt; <span>continue</span><span>,</span>
        <span>}</span>

        fmt<span>.</span><span>Println</span><span>(</span><span>&#34;You guessed: &#34;</span><span>,</span> guess<span>)</span><span></span>

        <span>if</span> guess &lt; secret <span>{</span>
            fmt<span>.</span><span>Println</span><span>(</span><span>&#34;Too small!&#34;</span><span>)</span>
        <span>}</span> <span>else</span> <span>if</span> guess &gt; secret <span>{</span>
            fmt<span>.</span><span>Println</span><span>(</span><span>&#34;Too big!&#34;</span><span>)</span>
        <span>}</span> <span>else</span> <span>{</span>
            fmt<span>.</span><span>Println</span><span>(</span><span>&#34;Correct!&#34;</span><span>)</span>
            break
        <span>}</span>
    <span>}</span><span></span>
<span>}</span></pre></div>

<p dir="auto">Borgo is written in Rust, so you&#39;ll need <code>cargo</code>.</p>
<p dir="auto">To compile all <code>.brg</code> files in the current folder:</p>

<p dir="auto">The compiler will generate <code>.go</code> files, which you can run as normal:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# generate a go.mod file if needed
# $ go mod init foo
$ go run ."><pre><span><span>#</span> generate a go.mod file if needed</span>
<span><span>#</span> $ go mod init foo</span>
$ go run <span>.</span></pre></div>
</article></div></div>
  </body>
</html>
