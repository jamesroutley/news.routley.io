<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/MarcoLucidi01/ytcast">Original</a>
    <h1>Show HN: ytcast â€“ cast YouTube videos to your smart TV from command-line</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">cast YouTube videos to your smart TV from command-line.</p>
<p dir="auto">this program does roughly the same thing as the &#34;Play on TV&#34; button that appears
on the player bar when you visit youtube.com with Chrome or when you use the
YouTube smartphone app:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://notebook.wesleyac.com/MarcoLucidi01/ytcast/blob/master/play-on-tv.png"><img src="https://notebook.wesleyac.com/MarcoLucidi01/ytcast/raw/master/play-on-tv.png" alt="Play on TV button"/></a></p>
<p dir="auto">(<a href="https://support.google.com/youtube/answer/7640706" rel="nofollow">the feature is also described here</a>).</p>
<p dir="auto">I don&#39;t use Chrome as my daily driver because of <em>reasons</em> and I tend to use my
smartphone the least as possible when I&#39;m at home... but still I want the &#34;Play
on TV&#34; functionality to watch videos on the big television screen without having
to search them with the remote! this is why I wrote this tool. also my computing
workflow is &#34;command-line centric&#34; and <code>ytcast</code> fits well in my toolbox (see
<a href="#other-tools">other tools</a>).</p>
<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path fill-rule="evenodd" d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z"></path>
</svg>
    <span aria-label="Video description ytcast-demo-small.mp4">ytcast-demo-small.mp4</span>
    <span></span>
  </summary>

  <video src="https://user-images.githubusercontent.com/23704923/147848611-0d20563e-f656-487a-9774-9eb6feca1f58.mp4" data-canonical-src="https://user-images.githubusercontent.com/23704923/147848611-0d20563e-f656-487a-9774-9eb6feca1f58.mp4" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto">(<a href="https://www.youtube.com/watch?v=07aWOpi8DVk" rel="nofollow">video demo on YouTube if above doesn&#39;t play</a>).</p>
<h2 dir="auto"><a id="user-content-contents" aria-hidden="true" href="#contents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>contents</h2>
<ul dir="auto">
<li><a href="#usage">usage</a></li>
<li><a href="#install">install</a></li>
<li><a href="#how-it-works">how it works</a></li>
<li><a href="#bugs">BUGS</a></li>
<li><a href="#workarounds">workarounds</a></li>
<li><a href="#thanks">THANKS</a></li>
<li><a href="#other-tools">other tools</a></li>
</ul>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>usage</h2>
<ul dir="auto">
<li>the computer running <code>ytcast</code> and the target device must be on the <strong>same network</strong>.</li>
<li>the target device must support the <strong>DIAL protocol</strong> (see <a href="#how-it-works">how it works</a>).</li>
<li>the target device must have the <strong>YouTube on TV app already installed</strong>.</li>
</ul>
<p dir="auto">run <code>ytcast -h</code> for the full usage, here I&#39;ll show the basic options.</p>
<p dir="auto">the <code>-d</code> (device) option selects the target device matching by name, hostname
(ip), or unique service name:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -d fire https://www.youtube.com/watch?v=dQw4w9WgXcQ"><pre><code>$ ytcast -d fire https://www.youtube.com/watch?v=dQw4w9WgXcQ
</code></pre></div>
<p dir="auto">to see the already discovered (cached) devices use the <code>-l</code> (list) option:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -l
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         cached lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached"><pre><code>$ ytcast -l
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         cached lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached
</code></pre></div>
<p dir="auto">to update the devices cache use the <code>-s</code> (search) option (it&#39;s implicit when the
cache is empty or when <code>-d</code> doesn&#39;t match anything in the cache):</p>
<div data-snippet-clipboard-copy-content="$ ytcast -s
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached"><pre><code>$ ytcast -s
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached
</code></pre></div>
<p dir="auto">if your target device doesn&#39;t show up, you can try increasing the search timeout
with the <code>-t</code> (timeout) option to give the device more time to respond to the
query:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -s -t 10s
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached"><pre><code>$ ytcast -s -t 10s
28bc7426 192.168.1.35    &#34;FireTVStick di Marco&#34;         lastused
d0881fbe 192.168.1.227   &#34;[LG] webOS TV UM7100PLB&#34;      cached
</code></pre></div>
<p dir="auto">remember that the computer and the target device must be on the same network.
if it doesn&#39;t show up after several tries, you may consider using the <code>-pair</code>
option to skip the discovery process altogether. this adds some limitations
though, see <a href="#workarounds">workarounds</a>.</p>
<p dir="auto">to cast to the last used device use the <code>-p</code> option:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -p https://www.youtube.com/watch?v=dQw4w9WgXcQ"><pre><code>$ ytcast -p https://www.youtube.com/watch?v=dQw4w9WgXcQ
</code></pre></div>
<p dir="auto">when no url is passed in the arguments, <code>ytcast</code> reads video urls (or ids) from
<code>stdin</code> one per line:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -d lg &lt; watchlist"><pre><code>$ ytcast -d lg &lt; watchlist
</code></pre></div>
<p dir="auto">this makes it easy to combine <code>ytcast</code> with other tools like <a href="https://github.com/pystardust/ytfzf"><code>ytfzf</code></a> or my
<code>ytfzf</code> clone <a href="https://github.com/MarcoLucidi01/bin/blob/master/ytsearch"><code>ytsearch</code></a>.</p>
<p dir="auto">to see what&#39;s going on under the hood use the <code>-verbose</code> option:</p>
<div data-snippet-clipboard-copy-content="$ ytsearch fireplace 10 hours | ytcast -d lg -verbose
21:13:08 ytcast.go:82: ytcast v0.1.0-6-g8e6daeb
21:13:08 ytcast.go:168: mkdir -p /home/marco/.cache/ytcast
21:13:08 ytcast.go:177: loading cache /home/marco/.cache/ytcast/ytcast.json
21:13:08 ytcast.go:319: reading videos from stdin
21:13:15 dial.go:153: GET http://192.168.1.227:1754/
21:13:15 dial.go:153: GET http://192.168.1.227:36866/apps/YouTube
21:13:15 ytcast.go:293: &#34;YouTube&#34; is stopped on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:15 ytcast.go:306: launching &#34;YouTube&#34; on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:15 dial.go:153: POST http://192.168.1.227:36866/apps/YouTube
21:13:18 dial.go:153: GET http://192.168.1.227:36866/apps/YouTube
21:13:18 ytcast.go:293: &#34;YouTube&#34; is running on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:18 ytcast.go:358: requesting YouTube Lounge to play [cdKop6aixVE] on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:18 remote.go:233: POST https://www.youtube.com/api/lounge/bc/bind
21:13:18 remote.go:233: POST https://www.youtube.com/api/lounge/bc/bind
21:13:18 ytcast.go:197: saving cache /home/marco/.cache/ytcast/ytcast.json"><pre><code>$ ytsearch fireplace 10 hours | ytcast -d lg -verbose
21:13:08 ytcast.go:82: ytcast v0.1.0-6-g8e6daeb
21:13:08 ytcast.go:168: mkdir -p /home/marco/.cache/ytcast
21:13:08 ytcast.go:177: loading cache /home/marco/.cache/ytcast/ytcast.json
21:13:08 ytcast.go:319: reading videos from stdin
21:13:15 dial.go:153: GET http://192.168.1.227:1754/
21:13:15 dial.go:153: GET http://192.168.1.227:36866/apps/YouTube
21:13:15 ytcast.go:293: &#34;YouTube&#34; is stopped on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:15 ytcast.go:306: launching &#34;YouTube&#34; on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:15 dial.go:153: POST http://192.168.1.227:36866/apps/YouTube
21:13:18 dial.go:153: GET http://192.168.1.227:36866/apps/YouTube
21:13:18 ytcast.go:293: &#34;YouTube&#34; is running on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:18 ytcast.go:358: requesting YouTube Lounge to play [cdKop6aixVE] on &#34;[LG] webOS TV UM7100PLB&#34;
21:13:18 remote.go:233: POST https://www.youtube.com/api/lounge/bc/bind
21:13:18 remote.go:233: POST https://www.youtube.com/api/lounge/bc/bind
21:13:18 ytcast.go:197: saving cache /home/marco/.cache/ytcast/ytcast.json
</code></pre></div>
<p dir="auto">(please run with <code>-verbose</code> and <strong>attach the log</strong> when reporting an <a href="https://github.com/MarcoLucidi01/ytcast/issues">issue</a>).</p>
<h2 dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>install</h2>
<p dir="auto">you can get a pre-compiled binary from the <a href="https://github.com/MarcoLucidi01/ytcast/releases/latest">latest release</a> assets and copy
it somewhere in your <code>$PATH</code>.</p>
<p dir="auto">here a quick and dirty one-liner script to do it fast (adjust <code>target</code> and <code>dir</code>
to your needs, lookup available targets in the <a href="https://github.com/MarcoLucidi01/ytcast/releases/latest">latest release</a> assets):</p>
<div data-snippet-clipboard-copy-content="(target=&#34;linux-amd64&#34;; dir=&#34;$HOME/bin&#34;; \
  wget -O - https://api.github.com/repos/MarcoLucidi01/ytcast/releases/latest \
    | jq -r --arg target &#34;$target&#34; &#39;.assets[] | select(.name | match(&#34;checksums|&#34;+$target)) | .browser_download_url&#39; \
    | wget -i - \
   &amp;&amp; sha256sum -c --ignore-missing ytcast-v*-checksums.txt \
   &amp;&amp; tar -vxf ytcast-v*&#34;$target.tar.gz&#34; \
   &amp;&amp; install -m 755 ytcast-v*&#34;$target/ytcast&#34; &#34;$dir&#34;)"><pre><code>(target=&#34;linux-amd64&#34;; dir=&#34;$HOME/bin&#34;; \
  wget -O - https://api.github.com/repos/MarcoLucidi01/ytcast/releases/latest \
    | jq -r --arg target &#34;$target&#34; &#39;.assets[] | select(.name | match(&#34;checksums|&#34;+$target)) | .browser_download_url&#39; \
    | wget -i - \
   &amp;&amp; sha256sum -c --ignore-missing ytcast-v*-checksums.txt \
   &amp;&amp; tar -vxf ytcast-v*&#34;$target.tar.gz&#34; \
   &amp;&amp; install -m 755 ytcast-v*&#34;$target/ytcast&#34; &#34;$dir&#34;)
</code></pre></div>
<p dir="auto">if you run Arch Linux (btw I don&#39;t) you can get <a href="https://aur.archlinux.org/packages/ytcast-bin" rel="nofollow"><code>ytcast-bin</code> from the AUR</a>
(many thanks to the maintainer)!</p>
<p dir="auto">if your os or architecture are not available, or you want to get the latest
changes from <code>master</code>, you can compile from source. a <code>go</code> compiler and <code>make</code>
are required for building and installing:</p>
<div data-snippet-clipboard-copy-content="$ git clone https://github.com/MarcoLucidi01/ytcast.git
...
$ cd ytcast
$ make install
..."><pre><code>$ git clone https://github.com/MarcoLucidi01/ytcast.git
...
$ cd ytcast
$ make install
...
</code></pre></div>
<p dir="auto"><code>make install</code> installs in <code>/usr/local/bin</code> by default, you can change <code>PREFIX</code>
if you want, for example I like to keep my binaries inside <code>$HOME/bin</code> so I
usually install with:</p>
<div data-snippet-clipboard-copy-content="$ make install PREFIX=$HOME
...
go build -trimpath -tags netgo,osusergo -ldflags=&#34;-w -s -X main.progVersion=v0.5.0-3-gd513b8e&#34; -o ytcast
mkdir -p /home/marco/bin
install -m 755 ytcast /home/marco/bin"><pre><code>$ make install PREFIX=$HOME
...
go build -trimpath -tags netgo,osusergo -ldflags=&#34;-w -s -X main.progVersion=v0.5.0-3-gd513b8e&#34; -o ytcast
mkdir -p /home/marco/bin
install -m 755 ytcast /home/marco/bin
</code></pre></div>
<p dir="auto">to uninstall run <code>make uninstall</code> (with the same <code>PREFIX</code> used for <code>install</code>).</p>
<h2 dir="auto"><a id="user-content-how-it-works" aria-hidden="true" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>how it works</h2>
<p dir="auto">I&#39;ve always been curious to know how my phone can find my TV on my home network
and instruct it to start the YouTube on TV app and play a video right away
without basically any manual pairing.</p>
<p dir="auto">I did some research and found about this nice little protocol called <a href="http://www.dial-multiscreen.org" rel="nofollow">DIAL
(DIscovery And Launch)</a> developed by Netflix and Google which does the
initial part i.e. allows second-screen devices (phone, laptop, etc..) to
discover and launch apps on first-screen devices (TV, set-top, blu-ray, etc..).
there is a 40 pages <a href="http://www.dial-multiscreen.org/dial-protocol-specification/DIAL-2ndScreenProtocol-2.2.1.pdf" rel="nofollow">specification</a> and a <a href="https://github.com/Netflix/dial-reference">reference implementation</a> for
this protocol.</p>
<p dir="auto">the discovery part of DIAL is actually performed using another protocol, <a href="https://en.wikipedia.org/wiki/Simple_Service_Discovery_Protocol" rel="nofollow">SSDP
(Simple Service Discovery Protocol)</a>, which in turn is part of <a href="https://en.wikipedia.org/wiki/Universal_Plug_and_Play" rel="nofollow">UPnP</a>.</p>
<p dir="auto">all this is not enough to play videos. once the YouTube on TV app is started by
DIAL, we need some other way to &#34;tell&#34; the app which video we want to play
(actually DIAL allows to pass parameters to an app you want to launch, but this
mechanism is not used by the YouTube on TV app anymore).</p>
<p dir="auto">after a little more research, I found about the YouTube Lounge api which is used
by Chrome and the YouTube smartphone app to remotely control the YouTube on TV
app. it allows to start playing videos, pause, unpause, skip, add videos to the
queue and more. the api is <strong>not documented</strong> and understanding how it works
it&#39;s not an easy and fun job. luckily lots of people have already reverse
engineered the thing (see <a href="#thanks">THANKS</a>) so all I had to do was taking the bits I
needed to build <code>ytcast</code>.</p>
<p dir="auto">the bridge between DIAL and YouTube Lounge api is the <code>screenId</code> which as you
can imagine is an identifier for your &#34;screen&#34; (TV app). DIAL allows to get
information about the current &#34;state&#34; of an app on a particular device. some
fields of this state are required by DIAL, other fields are app specific (called
additional data). <code>screenId</code> is a YouTube specific field that can be used to get
a token from the YouTube Lounge api: with that token we can control the YouTube
on TV app via api calls.</p>
<p dir="auto">putting all together, what <code>ytcast</code> does is:</p>
<ol dir="auto">
<li>search DIAL enabled devices on the local network (SSDP)</li>
<li>get the state of the YouTube on TV app on the target device (DIAL)</li>
<li>if the app is stopped, start it (DIAL)</li>
<li>get the <code>screenId</code> of the app (DIAL)</li>
<li>get a token for that <code>screenId</code> (Lounge)</li>
<li>call the api&#39;s &#34;play video endpoint&#34; passing the token and the video urls to
play (Lounge)</li>
</ol>
<p dir="auto">(there is a &#34;devices cache&#34; involved so <code>ytcast</code> won&#39;t necessarily do all these
steps every time, also if the target device is turned off, <code>ytcast</code> tries to
wake it up with <a href="https://en.wikipedia.org/wiki/Wake-on-LAN" rel="nofollow">Wake-on-Lan</a>).</p>
<p dir="auto">as you may have already guessed, all this <strong>can stop working at any time!</strong> the
weakest point is the YouTube Lounge api since it&#39;s <strong>not documented</strong> and
<code>ytcast</code> depends heavily on it. moreover, <strong><code>ytcast</code> may not work at all on your
setup!</strong> I use and test <code>ytcast</code> with 2 devices:</p>
<ul dir="auto">
<li>Amazon Fire TV Stick</li>
<li>LG Smart TV running WebOS</li>
</ul>
<p dir="auto">that&#39;s all I have. <code>ytcast</code> works great with both these devices but I don&#39;t know
if it will work well on setups different than mine (it should, but I don&#39;t know
for sure). if it doesn&#39;t work on your setup please <a href="https://github.com/MarcoLucidi01/ytcast/issues">open an issue</a>
describing your setup and attach a <code>-verbose</code> log so we can investigate what&#39;s
wrong and hopefully fix it.</p>
<p dir="auto">also <strong>Chromecast</strong>. I don&#39;t own a Chromecast and you&#39;ll probably need to use
the <code>-pair</code> option (see <a href="#workarounds">workarounds</a>) to make <code>ytcast</code> work with Chromecast
because it <a href="https://en.wikipedia.org/wiki/Chromecast#Device_discovery_protocols" rel="nofollow">doesn&#39;t use the DIAL protocol anymore, but switched to mDNS for
discovery</a>.</p>
<h2 dir="auto"><a id="user-content-bugs" aria-hidden="true" href="#bugs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>BUGS</h2>
<ul dir="auto">
<li>
<p dir="auto">sometimes the playing queue gets &#34;messed up&#34; i.e. some videos are added
between others, some videos don&#39;t get added at all or even an old queue might
be &#34;reused&#34; so you could see videos from an old session after the ones you
requested to play. unfortunately, using (or misusing) an undocumented api may
lead to these kinds of problems and I haven&#39;t bothered too much trying to fix
them.</p>
</li>
<li>
<p dir="auto">the <code>-a</code> (add) option is slower because it does an api call for each video you
want to add and adds a random &#34;sleep delay&#34; <em>before</em> each call. without this
delay, the queue gets messed up more easily and videos get lost i.e. they
don&#39;t get added to the queue.</p>
</li>
<li>
<p dir="auto">playing a video from a specific starting time (<code>t</code> parameter in urls) works
only for the <em>first</em> video and only if you are <em>not</em> using the <code>-a</code> (add)
option.</p>
</li>
<li>
<p dir="auto"><code>ytcast</code> doesn&#39;t appear in <code>Settings &gt; Linked devices</code> menu. it used to show
up there and there was a button to &#34;unlink all devices&#34; which caused the
<code>screenId</code> to change, but a YouTube update &#34;broke&#34; this feature.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-workarounds" aria-hidden="true" href="#workarounds"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>workarounds</h2>
<ul dir="auto">
<li>
<p dir="auto">some devices don&#39;t support the DIAL protocol (<a href="https://en.wikipedia.org/wiki/Chromecast#Device_discovery_protocols" rel="nofollow">notably Chromecast</a>) so
they can&#39;t be discovered by <code>ytcast</code>. the YouTube on TV app has a <a href="https://support.google.com/youtube/answer/3230451" rel="nofollow">&#34;link with
code&#34; functionality</a> which can be used as workaround to pair <code>ytcast</code> with
these devices. the pairing code can be found in <code>Settings &gt; Link with TV code</code>
and then you can use the <code>-pair</code> option to do the pairing:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -pair 123456789101
8a59f138 unknown         &#34;YouTube on TV&#34;"><pre><code>$ ytcast -pair 123456789101
8a59f138 unknown         &#34;YouTube on TV&#34;
</code></pre></div>
<p dir="auto">once paired you can cast videos in the usual way:</p>
<div data-snippet-clipboard-copy-content="$ ytcast -d 8a59 https://www.youtube.com/watch?v=t0Q2otsqC4I"><pre><code>$ ytcast -d 8a59 https://www.youtube.com/watch?v=t0Q2otsqC4I
</code></pre></div>
<p dir="auto">when using this method, <code>ytcast</code> and the target device do <em>not</em> need to be on
the same network, but it adds many manual steps i.e. the YouTube on TV app
must be already open because <code>ytcast</code> won&#39;t be able to start it nor to
Wake-On-Lan the TV and it won&#39;t automatically &#34;re-pair&#34; when the <code>screenId</code>
changes (I don&#39;t know how often that happens).</p>
</li>
<li>
<p dir="auto">playlist urls don&#39;t work with <code>ytcast</code>, I haven&#39;t found a reliable way to pass
playlist ids to the api. <code>youtube-dl</code> comes to the rescue (see also <a href="#other-tools">other
tools</a>) since it can extract all video urls of YouTube playlists:</p>
<div data-snippet-clipboard-copy-content="$ youtube-dl -j --flat-playlist https://www.youtube.com/playlist?list=PLrOv9FMX8xJHqMvSGB_9G9nZZ_4IgteYf | jq -r &#39;.url&#39; | ytcast -p"><pre><code>$ youtube-dl -j --flat-playlist https://www.youtube.com/playlist?list=PLrOv9FMX8xJHqMvSGB_9G9nZZ_4IgteYf | jq -r &#39;.url&#39; | ytcast -p
</code></pre></div>
<p dir="auto">you can of course filter the pipeline as you like and this makes it so
flexible that I actually don&#39;t feel the need for <code>ytcast</code> to support playlist
urls: less is more!</p>
</li>
<li>
<p dir="auto">this might sound obvious, but if you are tired of typing the device name (even
a substring of it) every time you want to cast something or if you have
multiple devices with the same name, you can define shell aliases and benefit
from shell tab-completion feature:</p>
<div data-snippet-clipboard-copy-content="$ alias ytcbed=&#34;ytcast -d &#39;LG 32&#39;&#34;
$ ytcbed https://www.youtube.com/watch?v=dQw4w9WgXcQ"><pre><code>$ alias ytcbed=&#34;ytcast -d &#39;LG 32&#39;&#34;
$ ytcbed https://www.youtube.com/watch?v=dQw4w9WgXcQ
</code></pre></div>
<p dir="auto">(see your shell documentation to make aliases persistent, usually you have to
add them in the shell&#39;s <code>rc</code> file).</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-thanks" aria-hidden="true" href="#thanks"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>THANKS</h2>
<p dir="auto">I would like to thank all the people whose work has helped me tremendously in
building <code>ytcast</code>, especially the following projects/posts:</p>
<ul dir="auto">
<li><a href="https://0x41.cf/automation/2021/03/02/google-assistant-youtube-smart-tvs.html" rel="nofollow">https://0x41.cf/automation/2021/03/02/google-assistant-youtube-smart-tvs.html</a></li>
<li><a href="https://github.com/thedroidgeek/youtube-cast-automation-api">https://github.com/thedroidgeek/youtube-cast-automation-api</a></li>
<li><a href="https://github.com/mutantmonkey/youtube-remote">https://github.com/mutantmonkey/youtube-remote</a></li>
<li><a href="https://bugs.xdavidhu.me/google/2021/04/05/i-built-a-tv-that-plays-all-of-your-private-youtube-videos" rel="nofollow">https://bugs.xdavidhu.me/google/2021/04/05/i-built-a-tv-that-plays-all-of-your-private-youtube-videos</a></li>
<li><a href="https://github.com/aykevl/plaincast">https://github.com/aykevl/plaincast</a></li>
<li><a href="https://github.com/ur1katz/casttube">https://github.com/ur1katz/casttube</a></li>
</ul>
<h2 dir="auto"><a id="user-content-other-tools" aria-hidden="true" href="#other-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>other tools</h2>
<p dir="auto">as I said earlier, my computing environment is very command-line centric and I&#39;d
like to showcase the other tools I use to enjoy a &#34;no frills&#34; YouTube experience
from the terminal!</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://github.com/ytdl-org/youtube-dl"><code>youtube-dl</code></a> (actually <a href="https://github.com/yt-dlp/yt-dlp"><code>yt-dlp</code></a> these days) doesn&#39;t need
introduction, it&#39;s an awesome tool and it&#39;s well integrated with <a href="https://github.com/mpv-player/mpv"><code>mpv</code></a>
so I can watch videos with my favorite player without having my laptop fan
spin like an airplane engine thanks to this <code>mpv</code> config:</p>
<div data-snippet-clipboard-copy-content="ytdl-format=bestvideo[height&lt;=?1080][vcodec!=?vp9]+bestaudio/best"><pre><code>ytdl-format=bestvideo[height&lt;=?1080][vcodec!=?vp9]+bestaudio/best
</code></pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/MarcoLucidi01/bin/blob/master/ytsearch"><code>ytsearch</code></a> is my clone of the initial version of <a href="https://github.com/pystardust/ytfzf"><code>ytfzf</code></a>. it
allows to search and select video urls from the command-line using the
wonderful <a href="https://github.com/junegunn/fzf"><code>fzf</code></a> (fun fact: it&#39;s implemented basically as a single big
pipe ahah). you have already seen it in action in <code>ytcast</code> examples, but it
works great with <code>mpv</code> too:</p>
<div data-snippet-clipboard-copy-content="$ ytsearch matrix 4 | xargs mpv
$ ytsearch 9 symphony | xargs mpv --no-video"><pre><code>$ ytsearch matrix 4 | xargs mpv
$ ytsearch 9 symphony | xargs mpv --no-video
</code></pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/MarcoLucidi01/bin/blob/master/ytxrss"><code>ytxrss</code></a> allows to extract the rss feed url of a YouTube channel
starting from a video or channel url. I use rss feeds (<a href="https://github.com/newsboat/newsboat"><code>newsboat</code></a>) to
keep up-to-date with <em>things</em> and I&#39;m really glad YouTube still supports them
for channel uploads. if I&#39;m interested in a channel&#39;s future uploads, what I
usually do is:</p>
<div data-snippet-clipboard-copy-content="$ ytxrss https://www.youtube.com/user/Computerphile &gt;&gt; ~/.newsboat/urls"><pre><code>$ ytxrss https://www.youtube.com/user/Computerphile &gt;&gt; ~/.newsboat/urls
</code></pre></div>
</li>
</ul>
<hr/>
<p dir="auto">see <a href="https://notebook.wesleyac.com/MarcoLucidi01/ytcast/blob/master/license">license file</a> for copyright and license details.</p>
</article>
        </div></div>
  </body>
</html>
