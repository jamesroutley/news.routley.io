<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://notes.billmill.org/blog/2024/03/What_are_the__worst__spelling_bee_pangrams_.html">Original</a>
    <h1>What are the &#34;worst&#34; spelling bee pangrams?</h1>
    
    <div id="readability-page-1" class="page"><div>
    
    
    <p>Mar 17, 2024</p>
    <p>Thomas Ptacek wondered <a href="https://infosec.exchange/@tqbf/112100367570795574">on mastodon</a>  whether there were any <a href="https://en.wikipedia.org/wiki/The_New_York_Times_Spelling_Bee">Spelling Bee</a> pangrams that would get you to the highest scoring level on spelling bee just by finding that word.</p>
<p>I like to play spelling bee, and this seemed like a solvable problem, so I took a hack at it.</p>
<p><em>(update: there&#39;s a <a href="https://vishnubharathi.codes/blog/2024/03/mitzVah_-_the__worst__pangrams_part_2.html">part 2</a>)</em></p>

<p>In the spelling bee, you&#39;re given 7 letters, one of which must be in every word, and asked to make as many words as possible out of those seven.</p>
<p>If you use all seven letters, that&#39;s called a $pangram$. Every day&#39;s puzzle is guaranteed to have at least one pangram.</p>
<p><a href="https://vishnubharathi.codes/images/Pasted%20image%2020240315205821.png"><img src="https://vishnubharathi.codes/images/Pasted%20image%2020240315205821.png"/></a></p>
<p>Unfortunately, there were a couple of things I didn&#39;t know:</p>
<ul>
<li>A complete list of valid spelling bee words</li>
<li>The amount of points you need to score to reach the &#34;genius&#34; level</li>
</ul>
<p>So I decided to use a scrabble wordlist I found online, and to instead just find the &#34;worst&#34; pangrams, the ones somebody could make the fewest words out of.</p>
<h2 id="the-search">The search</h2>
<p>The basic algorithm I settled on was:</p>
<ul>
<li><strong>step 1</strong> calculate the score of every set of seven letters</li>
<li>let $scores$ be a hash of ${set(letters): int(score)}$ which defaults to 0 and represents the number of words playable via the given set of seven letters</li>
<li>For every word in the word list
<ul>
<li>make a set $s$ of unique letters in the word
<ul>
<li>add that set to every set of seven letters of which it&#39;s a subset</li>
<li>for every <a href="https://docs.python.org/3/library/itertools.html#itertools.combinations">combination</a> $c$ of $7-length(s)$ letters not in that set:
<ul>
<li>add one to $scores[c]$</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>step 2</strong> Now $scores$ has the score of every set of 7 letters that can be reached from the given word list, so we can iterate through each $pangram$, find its score, and sort the list to find the worst.</li>
<li>let $pangrams$ be a list of tuples $(n_{words}, pangram)$</li>
<li>For each word in the word list
<ul>
<li>make a set $s$ of unique letters in the word</li>
<li>if there are seven letters, it&#39;s a pangram. Look up its score in $scores$ and add it to $pangrams$</li>
</ul>
</li>
<li>Sort the $pangrams$ list</li>
<li><strong>step 3</strong> Print out the results</li>
</ul>
<p>The final code looks like this:</p>
<pre><code><div><pre><span></span><span># worst.py: print the worst possible pangrams for the New York Times spelling bee</span>

<span>from</span> <span>collections</span> <span>import</span> <span>Counter</span>
<span>from</span> <span>itertools</span> <span>import</span> <span>combinations</span>

<span># the spelling bee never includes the letter &#34;s&#34;</span>
<span>alphabet</span> <span>=</span> <span>frozenset</span><span>(</span><span>&#34;abcdefghijklmnopqrtuvwxyz&#34;</span><span>)</span>
<span>allwords</span> <span>=</span> <span>set</span><span>(</span><span>line</span><span>.</span><span>strip</span><span>()</span> <span>for</span> <span>line</span> <span>in</span> <span>open</span><span>(</span><span>&#34;words.txt&#34;</span><span>)</span> <span>if</span> <span>&#34;s&#34;</span> <span>not</span> <span>in</span> <span>line</span><span>)</span>

<span># get the score of every seven-letter combination</span>
<span>score</span> <span>=</span> <span>Counter</span><span>()</span>
<span>for</span> <span>word</span> <span>in</span> <span>allwords</span><span>:</span>
    <span>ws</span> <span>=</span> <span>frozenset</span><span>(</span><span>word</span><span>)</span>
    <span>if</span> <span>3</span> <span>&lt;</span> <span>len</span><span>(</span><span>word</span><span>)</span> <span>and</span> <span>len</span><span>(</span><span>ws</span><span>)</span> <span>&lt;</span> <span>7</span><span>:</span>
        <span>for</span> <span>letters</span> <span>in</span> <span>combinations</span><span>(</span><span>alphabet</span> <span>-</span> <span>ws</span><span>,</span> <span>7</span> <span>-</span> <span>len</span><span>(</span><span>ws</span><span>)):</span>
            <span>score</span><span>[</span><span>ws</span><span>.</span><span>union</span><span>(</span><span>letters</span><span>)]</span> <span>+=</span> <span>1</span>

<span># get a list of pangrams and sort it</span>
<span>pangrams</span> <span>=</span> <span>[</span>
    <span>(</span><span>score</span><span>[</span><span>frozenset</span><span>(</span><span>word</span><span>)]</span> <span>+</span> <span>1</span><span>,</span> <span>word</span><span>)</span>
    <span>for</span> <span>word</span> <span>in</span> <span>[</span><span>line</span><span>.</span><span>strip</span><span>()</span> <span>for</span> <span>line</span> <span>in</span> <span>open</span><span>(</span><span>&#34;words.txt&#34;</span><span>)]</span>
    <span>if</span> <span>&#34;s&#34;</span> <span>not</span> <span>in</span> <span>word</span> <span>and</span> <span>len</span><span>(</span><span>set</span><span>(</span><span>word</span><span>))</span> <span>==</span> <span>7</span>
<span>]</span>
<span>pangrams</span><span>.</span><span>sort</span><span>()</span>

<span># format the results</span>
<span>red</span> <span>=</span> <span>&#34;</span><span>\N{ESC}</span><span>[0;31m&#34;</span>
<span>green</span> <span>=</span> <span>&#34;</span><span>\N{ESC}</span><span>[0;32m&#34;</span>
<span>blue</span> <span>=</span> <span>&#34;</span><span>\N{ESC}</span><span>[0;34m&#34;</span>
<span>reset</span> <span>=</span> <span>&#34;</span><span>\N{ESC}</span><span>[0m&#34;</span>
<span>print</span><span>(</span><span>f</span><span>&#34;</span><span>{</span><span>green</span><span>}</span><span>words</span><span>\t</span><span>pangram&#34;</span><span>)</span>
<span>for</span> <span>n</span><span>,</span> <span>pangram</span> <span>in</span> <span>pangrams</span><span>[:</span><span>15</span><span>]:</span>
    <span>ps</span> <span>=</span> <span>set</span><span>(</span><span>pangram</span><span>)</span>
    <span>matches</span> <span>=</span> <span>&#34;,&#34;</span><span>.</span><span>join</span><span>(</span>
        <span>[</span>
            <span>w</span>
            <span>for</span> <span>w</span> <span>in</span> <span>[</span><span>l</span><span>.</span><span>strip</span><span>()</span> <span>for</span> <span>l</span> <span>in</span> <span>open</span><span>(</span><span>&#34;words.txt&#34;</span><span>)]</span>
            <span>if</span> <span>set</span><span>(</span><span>w</span><span>)</span><span>.</span><span>issubset</span><span>(</span><span>ps</span><span>)</span> <span>and</span> <span>len</span><span>(</span><span>w</span><span>)</span> <span>&gt;</span> <span>3</span> <span>and</span> <span>w</span> <span>!=</span> <span>pangram</span>
        <span>]</span>
    <span>)</span>
    <span>if</span> <span>len</span><span>(</span><span>matches</span><span>)</span> <span>&gt;</span> <span>60</span><span>:</span>
        <span>matches</span> <span>=</span> <span>matches</span><span>[:</span><span>59</span><span>]</span> <span>+</span> <span>&#34;...&#34;</span>
    <span>print</span><span>(</span><span>f</span><span>&#34;</span><span>{</span><span>blue</span><span>}{</span><span>n</span><span>:</span><span> &lt;8</span><span>}{</span><span>red</span><span>}{</span><span>pangram</span><span>:</span><span> &lt;15</span><span>}{</span><span>reset</span><span>}{</span><span>matches</span><span>}</span><span>&#34;</span><span>)</span>
</pre></div>
</code></pre>
<p>It&#39;s not efficient code, but it runs fast enough that I didn&#39;t worry about making it any faster.</p>
<p>The output of the program is:</p>
<p><a href="https://vishnubharathi.codes/images/Pasted%20image%2020240315211720.png"><img src="https://vishnubharathi.codes/images/Pasted%20image%2020240315211720.png"/></a></p>
<p>So according to it, <code>equivoke</code> is the &#34;worst&#34; possible pangram.</p>
<p>For kicks, I looked up some of the words on <a href="https://www.sbsolver.com/s/equivoke">sbsolver</a>. According to that site <code>equivoke</code> has a mere 6 legal words in the spelling bee dictionary: <code>equivoque</code>, <code>evoke</code>, <code>kook</code>, <code>queue</code>, and <code>quooke</code>.</p>

    
    
    
    
  </div></div>
  </body>
</html>
