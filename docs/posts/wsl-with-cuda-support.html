<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://news.ycombinator.com/item?id=30033690">Original</a>
    <h1>WSL with CUDA support</h1>
    
    <div id="readability-page-1" class="page"><div>Windows Subsystem for Linux with CUDA support + TensorFlow<p>Let me save you many hours of pain and just give you the rundown.</p><p>* You <i>MUST</i> be on Windows 10 21H2 or above. 21H2 cannot currently be updated to (yeah, it&#39;s because they are pushing Windows 11) so you need to download it as an ISO.</p><p>* Install the latest &#34;game ready driver&#34; for your card (you don&#39;t need a special driver despite the nvidia documentation, I got mine here: <a href="https://www.nvidia.com/Download/index.aspx" rel="nofollow">https://www.nvidia.com/Download/index.aspx</a>).</p><p>* In general you should ignore the nvidia documentation as they make it almost impossible to figure out what combination of cuda &amp; cudnn versions you need.</p><p>Steps to install:</p><p>1. Open CMD as administrator.</p><p>2. Run: wsl --install -d ubuntu</p><p>3. Open the Ubuntu WSL and enter the following commands:</p><p># Install CUDA</p><p>sudo apt-key adv --fetch-keys <a href="http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/7fa2af80.pub" rel="nofollow">http://developer.download.nvidia.com/compute/cuda/repos/ubun...</a></p><p>sudo sh -c &#39;echo &#34;deb <a href="http://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64" rel="nofollow">http://developer.download.nvidia.com/compute/cuda/repos/ubun...</a> /&#34; &gt; /etc/apt/sources.list.d/cuda.list&#39;</p><p>sudo apt-get update</p><p>sudo apt-get --yes install cuda-toolkit-11-2 cuda-toolkit-11-2</p><p>sudo sh -c &#39;echo &#34;deb <a href="http://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64" rel="nofollow">http://developer.download.nvidia.com/compute/machine-learnin...</a> /&#34; &gt; /etc/apt/sources.list.d/nvidia-machine-learning.list&#39;</p><p>sudo apt-get update</p><p>sudo apt install cuda-11-2 libcudnn8 libcudnn8-dev</p><p>sudo apt install libnvinfer8 libnvinfer-dev libnvinfer-plugin8</p><p># Verify CUDA installation</p><p>cd /usr/local/cuda-11.2/samples/4_Finance/BlackScholes</p><p>sudo make</p><p>./BlackScholes</p><p># Install TensorFlow</p><p>sudo apt-get update &amp;&amp; sudo apt-get install python3-pip python3-dev</p><p>pip3 install tensorflow-gpu</p><p>If you are reading this in the future I have some advice:</p><p>* Look at this page to get at least an idea of what versions of cuda and cudnn will work together: <a href="https://www.tensorflow.org/install/source#gpu" rel="nofollow">https://www.tensorflow.org/install/source#gpu</a></p><p>* Use apt-cache search &lt;THING&gt; to see the possible versions, allowing you to <i>guess</i> what you need to install. Good luck.</p></div></div>
  </body>
</html>
