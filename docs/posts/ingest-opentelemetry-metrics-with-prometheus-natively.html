<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://last9.io/blog/native-support-for-opentelemetry-metrics-in-prometheus/">Original</a>
    <h1>Ingest OpenTelemetry metrics with Prometheus natively</h1>
    
    <div id="readability-page-1" class="page"><div><div><p><a href="https://last9.io/blog/what-is-opentelemetry/">OpenTelemetry</a> and <a href="https://last9.io/blog/what-is-prometheus/">Prometheus</a> are two critical projects in the monitoring and observability world. Prometheus supports metrics monitoring, and OpenTelemetry also allows metrics besides logs and traces.</p><p>The <a href="https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/metrics/semantic_conventions/README.md">semantic convention for metrics in OpenTelemetry</a>(OTLP metrics) does not align with <a href="https://prometheus.io/docs/practices/naming/">Prometheus&#39; native metrics naming convention</a>. </p><p>To address this disparity, there is a <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/79513bac50520f5c9ccb3341996f35f5fd45b10c/pkg/translator/prometheus">module in <code>otel-collector-contrib</code></a> that offers centralized functions that facilitate the conversion of OpenTelemetry metrics into metrics compliant with Prometheus.</p><p>This package translates and maps metric names, units, and labels between the OpenTelemetry and Prometheus conventions. This translation allows sending OTLP metrics to Prometheus using an <a href="https://last9.io/blog/what-is-opentelemetry-collector">OpenTelemetry collector</a>. But the native support for ingesting OTLP metrics was absent in Prometheus.</p><h2 id="native-support-for-opentelemetry-metrics-in-prometheus">Native support for OpenTelemetry metrics in Prometheus</h2><figure><img src="https://last9.ghost.io/content/images/2023/07/image-6.png" alt="Send metrics to Prometheus via Otel Collector" loading="lazy" width="2000" height="794" srcset="https://last9.ghost.io/content/images/size/w600/2023/07/image-6.png 600w, https://last9.ghost.io/content/images/size/w1000/2023/07/image-6.png 1000w, https://last9.ghost.io/content/images/size/w1600/2023/07/image-6.png 1600w, https://last9.ghost.io/content/images/2023/07/image-6.png 2058w" sizes="(min-width: 720px) 720px"/><figcaption>Send metrics to Prometheus via Otel Collector.</figcaption></figure><p>Recently a <a href="https://github.com/prometheus/prometheus/pull/12571/files">pull request</a> was merged in the Prometheus codebase, which adds support for ingesting OpenTelmetry metrics using a new OTLP-compatible ingestion endpoint.</p><p>A new feature flag <code>otlp-write-receiver</code> has been added, enabling the feature for natively ingesting OpenTelemetry metrics.</p><p>The OpenTelemetry metrics can be sent on <code>/otlp/v1/metrics</code> the endpoint and ingested natively.</p><p>This change is still experimental, and before the final release, a lot of documentation updates will also happen; I will update this post with the changes and add the final Prometheus release version in which this change will be present!</p><div><p>ðŸ’¡</p><p>Stay in the loop about the latest developments in the realm of OpenTelemetry and Prometheus by <a href="https://last9.io/blog/subscribe">subscribing</a> to our blog. Receive regular updates and stay informed!</p></div></div></div></div>
  </body>
</html>
