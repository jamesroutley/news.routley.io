<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://vishnubharathi.codes/blog/the-absolute-minimum-things-that-i-need-to-know-about-helm/">Original</a>
    <h1>The absolute minimum things that I need to know about Helm</h1>
    
    <div id="readability-page-1" class="page"><div>
        
        <article itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    



    
  </header>
  

  <div itemprop="articleBody">
    <p>I am learning about <a target="_blank" rel="noopener" href="https://helm.sh/">helm</a>. It is a package manager for Kubernetes.</p>
<p>This documentation page provided me a good starting point: <a target="_blank" rel="noopener" href="https://helm.sh/docs/topics/architecture/">https://helm.sh/docs/topics/architecture/</a> and then I roamed around the docs gathering the below notes.</p>
<p>The latest helm version as of writing this notes is <code>v3.10.3</code>.</p>
<p>(If something is wrong, feel free to suggest a fix as a pull request <a target="_blank" rel="noopener" href="https://github.com/scriptnull/vishnubharathi.codes">here</a>)</p>
<ul>
<li>basics<ul>
<li>chart - kubernetes yaml definitions to run the app  </li>
<li>repository - collection of charts  </li>
<li>release - running instance of a chart. Two releases of same chart could be running at the same time in a kubernetes cluster (example: two redis instances used by different services)  </li>
</ul>
</li>
<li>helm repo add [name] [url]  <ul>
<li>add a repo to use the charts inside it.</li>
</ul>
</li>
<li>helm repo update  <ul>
<li>updates the list of charts available in the added repositories  </li>
</ul>
</li>
<li><p>versioning  </p>
<ul>
<li>a chart seem to contain two versions  <ul>
<li>chart version  </li>
<li>application version  </li>
</ul>
</li>
<li><p>example: vault’s chart and app versions  </p>
<blockquote>
<p>NAME               CHART VERSION    APP VERSION    DESCRIPTION</p>
</blockquote>
</li>
</ul>
</li>
<li><p>helm search hub [query]  </p>
<ul>
<li>searches for charts in artifact hub  </li>
</ul>
</li>
<li>helm search repo [query]  <ul>
<li>searches for charts in locally added repositories  </li>
</ul>
</li>
<li><p>helm install [release_name] [chart]  </p>
<ul>
<li>You can also use <code>helm install [chart] --generate-name</code> if you wish to generate a release name automatically (example: <code>redis-TIMESTAMP</code>)  </li>
<li>the order in which the kubernetes resources mentioned in the chart are installed is document at <a target="_blank" rel="noopener" href="https://helm.sh/docs/intro/using_helm/#helm-install-installing-a-package">https://helm.sh/docs/intro/using_helm/#helm-install-installing-a-package</a>  </li>
<li><blockquote>
<p>Helm does not wait until all of the resources are running before it exits. Many charts require Docker images that are over 600M in size, and may take a long time to install into the cluster.  </p>
</blockquote>
</li>
<li><p>Use <code>helm status</code> to get the state of the install  </p>
</li>
</ul>
</li>
<li>helm show values [chart]  <ul>
<li>You can customize the values that are configured in a chart before deploying a release  </li>
<li>This command will help you understand what values are available in a chart that could be modified  </li>
</ul>
</li>
<li>helm install -f values.yaml [release_name] [chart]  <ul>
<li>the vaules in <code>values.yaml</code> file will override the config values  </li>
</ul>
</li>
<li>Other methods of installing charts  <ul>
<li>A chart repository  </li>
<li>A local chart archive (<code>helm install foo foo-0.1.1.tgz</code>)  </li>
<li>An unpacked chart directory (<code>helm install foo path/to/foo</code>)  </li>
<li>A full URL (<code>helm install foo https://example.com/charts/foo-1.2.3.tgz</code>)  </li>
</ul>
</li>
<li><p>helm upgrade [release_name] [chart]  </p>
<ul>
<li><blockquote>
<p>When a new version of a chart is released, or when you want to change the configuration of your release, you can use the helm upgrade command.  </p>
</blockquote>
</li>
</ul>
</li>
<li><p>helm get values [release_name]  </p>
<ul>
<li>Useful in getting the values used in a release  </li>
</ul>
</li>
<li><p>helm rollback [release_name] [revision]  </p>
<ul>
<li><blockquote>
<p>The above rolls back our happy-panda to its very first release version. A release version is an incremental revision. Every time an install, upgrade, or rollback happens, the revision number is incremented by 1. The first revision number is always 1.  </p>
</blockquote>
</li>
</ul>
</li>
<li><p>helm list  </p>
<ul>
<li>Lists all the releases  </li>
</ul>
</li>
<li>helm history [release_name]  <ul>
<li>Lists all the revisions for a release  </li>
<li>You can then use <code>helm get values [release_name] --revision NUMBER</code> to get the values used in a particular revision  </li>
</ul>
</li>
<li>Helpful options during install/upgrade/rollback  <ul>
<li>–timeout  <ul>
<li>A <a target="_blank" rel="noopener" href="https://golang.org/pkg/time/#ParseDuration">Go duration</a> value to wait for Kubernetes commands to complete. This defaults to <code>5m0s</code>.  </li>
</ul>
</li>
<li><code>--wait</code>: Waits until all Pods are in a ready state, PVCs are bound, Deployments have minimum (<code>Desired</code> minus <code>maxUnavailable</code>) Pods in ready state and Services have an IP address (and Ingress if a <code>LoadBalancer</code>) before marking the release as successful. It will wait for as long as the <code>--timeout</code> value. If timeout is reached, the release will be marked as <code>FAILED</code>  </li>
</ul>
</li>
<li>helm uninstall [release_name]  <ul>
<li>use <code>--keep-history</code> if you wish to the uninstalled release to show up in <code>helm list --all</code>  </li>
</ul>
</li>
<li>helm create [name]  <ul>
<li>for creating a new chart  </li>
</ul>
</li>
<li>helm package [folder_name]  <ul>
<li>should output a <code>*.tgz</code> file (known as chart archive, I guess)  </li>
</ul>
</li>
</ul>

  </div>
</article>



        
          

        
        

    </div></div>
  </body>
</html>
