<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/morris/vanilla-prime">Original</a>
    <h1>Vanilla Prime: A simpler, more sustainable way of web development</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A simpler, more sustainable way of web development. A spiritual successor to <a href="https://github.com/morris/vanilla-todo">VANILLA TODO</a>, further into real-world practice.</p>
<p dir="auto">No frameworks, no bundlers, no required dependencies.
Just web standards, patterns, a unix-style toolset, and some elbow grease.</p>
<p dir="auto">Vanilla Prime is not meant to be <em>easy</em>.
From a developer&#39;s perspective,
it is certainly less ergonomic than your fully integrated framework du jour.</p>
<p dir="auto">But it can be learned,
and you will acquire deep knowledge of the web platform,
and your websites will be performant
and lightweight
and timeless
and independent
and hackable (in a good way),
and respect your user&#39;s and the world&#39;s resources.</p>
<blockquote>
<p dir="auto">Vanilla Prime is the Dark Souls of web development stacks:</p>
</blockquote>
<p dir="auto">This repository serves as a guide to Vanilla Prime,
as well as boilerplate for adopting it in new projects,
lest we eternally suffer from framework churn,
and never shake the ghastly, over-engineered coil
of contemporary web development.</p>

<ul dir="auto">
<li>Install <a href="https://nodejs.org/" rel="nofollow">Node.js</a> &gt;= 20.</li>
<li>Open a terminal.</li>
<li>Run <code>git clone --depth=1 https://github.com/morris/vanilla-prime.git my-website</code>.</li>
<li>Run <code>cd my-website</code>.</li>
<li>Run <code>npm install</code>.</li>
<li>Run <code>npm run dev</code>.</li>
<li>Visit <a href="http://localhost:8080" rel="nofollow">http://localhost:8080</a>.</li>
<li>Work on <code>./src</code>, <code>./public</code>, and anything else really.</li>
<li>Run <code>npm run build</code>.</li>
<li>Deploy <code>./dist</code> somewhere.</li>
</ul>
<hr/>
<p dir="auto">Only differentiating or novel concepts are explained in this guide.
Intermediate understanding of the web platform, and a curious mind, is wanted.
Inspect and experiment with the given boilerplate along the way.
<strong>Happy hacking!</strong></p>

<ul dir="auto">
<li><a href="https://nodejs.org/" rel="nofollow">Node.js</a> to run most other tools listed here.</li>
<li><a href="https://www.typescriptlang.org/" rel="nofollow">TypeScript</a> for JavaScript type safety and correctness.</li>
<li><a href="https://sass-lang.com/" rel="nofollow">SCSS</a> for CSS preprocessing.</li>
<li><a href="https://github.com/morris/s4d">s4d</a> as a local development server with live reload and SPA support.</li>
<li><a href="https://github.com/morris/exdom">exdom</a> as a supporting runtime library.</li>
<li><a href="https://playwright.dev/" rel="nofollow">Playwright</a> for end-to-end and unit testing.</li>
<li><a href="https://github.com/bcoe/c8">c8</a> for test coverage.</li>
<li><a href="https://terser.org/" rel="nofollow">terser</a> for JavaScript minification.</li>
<li><a href="https://github.com/morris/cbst">cbst</a> for cache busting.</li>
<li><a href="https://prettier.io/" rel="nofollow">Prettier</a> for code formatting.</li>
<li><a href="https://eslint.org/" rel="nofollow">ESLint</a> for JavaScript/TypeScript linting.</li>
<li><a href="https://stylelint.io/" rel="nofollow">Stylelint</a> for CSS linting.</li>
</ul>
<p dir="auto">All of these are optional.
In particular, TypeScript and SCSS are not strictly vanilla,
and may be dropped for even more purity.</p>
<p dir="auto">You will need to get familiar with the terminal and shell scripting,
which serves as the tooling&#39;s glue.</p>

<p dir="auto">The <code>./public</code> directory is the root directory for standard static files and assets,
e.g. HTML, CSS, JavaScript, images, and so on.</p>
<p dir="auto">The public directory is served during local development,
and should be deployable to a static web server as-is.</p>
<p dir="auto">Some files in the public directory may be generated from source files.
Further production optimizations may use the public directory as input.</p>

<p dir="auto">The <code>./src</code> directory is for non-standard source files that need to be compiled (if any),
e.g. TypeScript and SCSS files.</p>
<p dir="auto">The source directory has the same structure as the public directory.</p>

<p dir="auto">The <code>./scripts</code> directory contains shell scripts for development, testing and
building the project.</p>
<p dir="auto">It is recommended reading through the shell scripts
(and the various config files in the project root)
to understand their purpose, and to be able to adapt them as you see fit.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Reasonable System for CSS Stylesheet Structure (rscss)</h2><a id="user-content-reasonable-system-for-css-stylesheet-structure-rscss" aria-label="Permalink: Reasonable System for CSS Stylesheet Structure (rscss)" href="#reasonable-system-for-css-stylesheet-structure-rscss"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Follow <a href="https://rstacruz.github.io/rscss/" rel="nofollow">rscss</a> when authoring HTML and CSS.
It strikes a balance between structure and flexibility and aligns
well with the rest of Vanilla Prime&#39;s architecture.</p>

<p dir="auto">Write rather <em>large module files</em>, e.g. capturing a complete feature or domain.
This reduces network calls and simplifies
<a href="https://developer.mozilla.org/en-US/docs/Web/Performance/Speculative_loading" rel="nofollow">speculative loading</a>.</p>
<p dir="auto">Do not create one file per function or class or other code unit.
Do not use barrel indexes.
Use code folding to navigate large files.</p>

<p dir="auto">Use <em>mount functions</em> to organize UI code,
e.g. interactive components and dynamic behaviors.</p>
<p dir="auto">Mount functions accept a DOM element as their first argument.
Their responsibility is to set up initial state, event listeners, and provide behavior
and rendering for the target element (all of which are optional).</p>
<p dir="auto">Mount functions do not create or own their target elements.
Target elements must be created before mounting.</p>
<p dir="auto">A mount function for a component will often set some rigid initial HTML
and define an idempotent update function
that updates the dynamic parts of the component&#39;s DOM.
The update function is usually called in response to certain DOM events.</p>
<p dir="auto">Avoid manipulating the DOM directly from event handlers.</p>
<p dir="auto">Consider toggling visibility
instead of constructing different DOM trees based on some state.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Communicate via DOM Events</h2><a id="user-content-communicate-via-dom-events" aria-label="Permalink: Communicate via DOM Events" href="#communicate-via-dom-events"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Use <a href="https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events" rel="nofollow">DOM events</a>
to communicate across the user interface.
Use <code>CustomEvent</code> with <code>detail</code> to transmit data.</p>
<p dir="auto"><em>Data events</em> flow from parent components to child components
and do not bubble up.
Data events are in noun-form.</p>
<p dir="auto"><em>Action events</em> bubble up the DOM,
usually resulting in some parent component state change,
which is in turn propagated downwards through data events.
Action events are in verb-form.</p>

<p dir="auto"><em>Reconciliation</em> is the rendering and re-rendering of a variable number of
dynamic elements in a given container.</p>
<p dir="auto">Alas, for reconciliation we have not yet discovered an efficient vanilla form.
For now, use <code>reconcile</code> from <a href="https://github.com/morris/exdom">exdom</a>.</p>

<p dir="auto">Use <em>vendoring</em> when importing third-party libraries,
i.e. copy library files into a project&#39;s source or public directory
so that there&#39;s no need for bundling.</p>
<p dir="auto">To get pinned versions and type safety, install packages with <code>npm</code> first,
and copy the necessary files from <code>./node_modules/&lt;package&gt;</code> to <code>./src/js/vendor</code>.</p>
<p dir="auto">Then, create a <code>./src/js/vendor/&lt;package&gt;.d.ts</code> file containing <code>export * from &#39;&lt;package&gt;&#39;;</code>.
Automate this in <code>./scripts/vendor.sh</code>.</p>


<p dir="auto">Consider writing your entire library in one large ES module file.
Otherwise, provide individual ES modules, as well as a bundled ES module.</p>
<p dir="auto">Provide TypeScript typings (<code>*.d.ts</code>) or use <a href="https://jsdoc.app/" rel="nofollow">JSDoc</a>
to provide typings.</p>
<p dir="auto">Avoid dependencies. If necessary, accept dependencies as function or constructor arguments.</p>

<ul dir="auto">
<li>Find a unique prefix fitting to the library.</li>
<li>Prefix component and helper class names.</li>
<li>Do not prefix element and variant class names.</li>
<li>Prefix CSS variables.</li>
<li>Provide individual CSS files.</li>
<li>Provide a bundled CSS file.</li>
</ul>

<ul dir="auto">
<li><a href="https://developer.mozilla.org/" rel="nofollow">MDN Web Docs</a> for all things web platform.</li>
<li><a href="https://caniuse.com" rel="nofollow">Can I use...</a> for checking feature compatibility.</li>
<li><a href="https://rstacruz.github.io/rscss/" rel="nofollow">rscss</a> for organizing CSS (and HTML).</li>
<li><a href="https://github.com/morris/vanilla-todo">VANILLA TODO</a> (supporting research).</li>
</ul>

<p dir="auto">Vanilla Prime still has some gaps and rough edges.
Notable open questions include:</p>
<ul dir="auto">
<li>Can routing be done reasonably well with vanilla means?</li>
<li>Can vendoring be reasonably automated?</li>
<li>What is our stance on server-side generation?</li>
<li>How could environment variables be passed?</li>
</ul>
<p dir="auto">The work continues...</p>
</article></div></div>
  </body>
</html>
