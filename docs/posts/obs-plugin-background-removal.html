<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/royshil/obs-backgroundremoval">Original</a>
    <h1>OBS Plugin: Background Removal</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<ul dir="auto">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#building">Building</a>
<ul dir="auto">
<li><a href="#mac-osx">MacOSX</a></li>
<li><a href="#linux">Linux (Ubuntu, Arch)</a></li>
<li><a href="#windows">Windows</a></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-download" aria-hidden="true" href="#download"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Download</h2>
<p dir="auto">Check out the <a href="https://github.com/royshil/obs-backgroundremoval/releases">latest releases</a> for downloads and install instructions.</p>
<h2 dir="auto"><a id="user-content-introduction" aria-hidden="true" href="#introduction"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Introduction</h2>
<p dir="auto">This plugin is meant to make it easy to replace the background in portrait images and video.
It is using a neural network to predict the mask of the portrait and remove the background pixels.
It&#39;s easily composable with other OBS plugins to replace the background with e.g. an image or
a transparent color.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/royshil/obs-backgroundremoval/blob/main/demo.gif"><img src="https://github.com/royshil/obs-backgroundremoval/raw/main/demo.gif" alt=""/></a></p>
<p dir="auto">The models used for background detection are SINet: <a href="https://arxiv.org/abs/1911.09099" rel="nofollow">https://arxiv.org/abs/1911.09099</a> and MODNet: <a href="https://arxiv.org/pdf/2011.11961.pdf" rel="nofollow">https://arxiv.org/pdf/2011.11961.pdf</a>
The pre-trained model weights were taken from:</p>
<ul dir="auto">
<li><a href="https://github.com/anilsathyan7/Portrait-Segmentation/tree/master/SINet">https://github.com/anilsathyan7/Portrait-Segmentation/tree/master/SINet</a></li>
<li><a href="https://github.com/ZHKKKe/MODNet">https://github.com/ZHKKKe/MODNet</a></li>
</ul>
<p dir="auto">Some more information about how I built it: <a href="https://www.morethantechnical.com/2021/04/15/obs-plugin-for-portrait-background-removal-with-onnx-sinet-model/" rel="nofollow">https://www.morethantechnical.com/2021/04/15/obs-plugin-for-portrait-background-removal-with-onnx-sinet-model/</a></p>
<h2 dir="auto"><a id="user-content-building" aria-hidden="true" href="#building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h2>
<p dir="auto">The plugin was built and tested on Mac OSX, Windows and Ubuntu Linux. Help is appreciated in building on other OSs and formalizing the one-click installers.</p>
<h3 dir="auto"><a id="user-content-prerequisites-for-building" aria-hidden="true" href="#prerequisites-for-building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites for building</h3>
<ul dir="auto">
<li>OpenCV v4.2+: <a href="https://github.com/opencv/opencv/">https://github.com/opencv/opencv/</a></li>
<li>ONNXRuntime: <a href="https://github.com/microsoft/onnxruntime">https://github.com/microsoft/onnxruntime</a></li>
</ul>
<h3 dir="auto"><a id="user-content-mac-osx" aria-hidden="true" href="#mac-osx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mac OSX</h3>
<h4 dir="auto"><a id="user-content-install-dependencies" aria-hidden="true" href="#install-dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install dependencies</h4>
<p dir="auto">You may use homebrew:</p>
<div data-snippet-clipboard-copy-content="$ brew install opencv onnxruntime"><pre><code>$ brew install opencv onnxruntime
</code></pre></div>
<p dir="auto">Or - you may also build a (very minimal) version of OpenCV and ONNX Runtime for static-linking, instead of the homebrew ones:</p>
<div data-snippet-clipboard-copy-content="&lt;root&gt;/build/ $ ../scripts/makeOpenCV_osx.sh
&lt;root&gt;/build/ $ ../scripts/makeOnnxruntime_osx.sh"><pre><code>&lt;root&gt;/build/ $ ../scripts/makeOpenCV_osx.sh
&lt;root&gt;/build/ $ ../scripts/makeOnnxruntime_osx.sh
</code></pre></div>
<p dir="auto">Static linking should be more robust across versions of OSX, as well as building for 10.13.</p>
<h4 dir="auto"><a id="user-content-finding-libobs" aria-hidden="true" href="#finding-libobs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Finding libobs</h4>
<p dir="auto">If you install the desktop OBS app (<a href="https://obsproject.com/download" rel="nofollow">https://obsproject.com/download</a>) you already have the binaries
for libobs (e.g. <code>/Applications/OBS.app/Contents/Frameworks/libobs.0.dylib</code>)
But you don&#39;t have the headers - so clone the main obs repo e.g. <code>git clone --single-branch -b 27.1.3 git@github.com:obsproject/obs-studio.git</code> (match the version number to your OBS install. Right now on OSX it&#39;s 27.1.3)</p>
<h4 dir="auto"><a id="user-content-build" aria-hidden="true" href="#build"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build</h4>
<div data-snippet-clipboard-copy-content="$ mkdir -p build &amp;&amp; cd build
$ cmake .. -DobsLibPath=/Applications/OBS.app/Contents/Frameworks -DobsIncludePath=~/Downloads/obs-studio/libobs
$ cmake --build . --target dist
$ cpack"><pre><code>$ mkdir -p build &amp;&amp; cd build
$ cmake .. -DobsLibPath=/Applications/OBS.app/Contents/Frameworks -DobsIncludePath=~/Downloads/obs-studio/libobs
$ cmake --build . --target dist
$ cpack
</code></pre></div>
<h4 dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h4>
<p dir="auto">Unpack the package to the plugins directory of the system&#39;s Library folder (which is Apple&#39;s preffered way)</p>
<div data-snippet-clipboard-copy-content="$ unzip -o obs-backgroundremoval-macosx.zip -d &#34;/Library/Application Support/obs-studio/plugins&#34;"><pre><code>$ unzip -o obs-backgroundremoval-macosx.zip -d &#34;/Library/Application Support/obs-studio/plugins&#34;
</code></pre></div>
<p dir="auto">or directly to your OBS install directory, e.g.</p>
<div data-snippet-clipboard-copy-content="$ unzip -o obs-backgroundremoval-macosx.zip -d /Applications/OBS.app/Contents/"><pre><code>$ unzip -o obs-backgroundremoval-macosx.zip -d /Applications/OBS.app/Contents/
</code></pre></div>
<p dir="auto">The first is recommended as it preserves the plugins over the parallel installation of OBS versions (i.e. running the latest productive version and a release candidate) whereas the latter will also remove the plugin if you decide to delete the OBS application.</p>
<h3 dir="auto"><a id="user-content-linux" aria-hidden="true" href="#linux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Linux</h3>
<h4 dir="auto"><a id="user-content-ubuntu" aria-hidden="true" href="#ubuntu"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ubuntu</h4>
<div data-snippet-clipboard-copy-content="$ sudo apt install -y libobs-dev libopencv-dev language-pack-en wget git build-essential cmake
$ wget https://github.com/microsoft/onnxruntime/releases/download/v1.7.0/onnxruntime-linux-x64-1.7.0.tgz
$ sudo tar xzvf onnxruntime-linux-x64-1.7.0.tgz --strip-components=1 -C /usr/local/ --wildcards &#34;*/include/*&#34; &#34;*/lib*/&#34;"><pre><code>$ sudo apt install -y libobs-dev libopencv-dev language-pack-en wget git build-essential cmake
$ wget https://github.com/microsoft/onnxruntime/releases/download/v1.7.0/onnxruntime-linux-x64-1.7.0.tgz
$ sudo tar xzvf onnxruntime-linux-x64-1.7.0.tgz --strip-components=1 -C /usr/local/ --wildcards &#34;*/include/*&#34; &#34;*/lib*/&#34;
</code></pre></div>
<p dir="auto">Then build and install:</p>
<div data-snippet-clipboard-copy-content="$ mkdir build &amp;&amp; cd build
$ cmake .. &amp;&amp; cmake --build . &amp;&amp; sudo cmake --install ."><pre><code>$ mkdir build &amp;&amp; cd build
$ cmake .. &amp;&amp; cmake --build . &amp;&amp; sudo cmake --install .
</code></pre></div>
<p dir="auto">To build with CUDA support, you will need the CUDA libraries installed as well as the GPU version of the ONNX Runtime library.</p>
<p dir="auto">Use the instructions at <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation" rel="nofollow">https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation</a> to set up the NVIDIA Cuda repository, then:</p>
<blockquote>
<p dir="auto">These instructions use the 1.9.0 version of onnxruntime. If you wish to use a different version, change the export line
to the version number you require.</p>
</blockquote>
<div data-snippet-clipboard-copy-content="$ export ONNX_VERSION=1.9.0
$ sudo apt install cuda libcudnn8
$ wget https://github.com/microsoft/onnxruntime/releases/download/v${ONNX_VERSION}/onnxruntime-linux-x64-gpu-${ONNX_VERSION}.tgz
$ sudo tar xzvf onnxruntime-linux-x64-gpu-${ONNX_VERSION}.tgz --strip-components=1 -C /usr/local/ --wildcards &#34;*/include/*&#34; &#34;*/lib*/&#34;"><pre><code>$ export ONNX_VERSION=1.9.0
$ sudo apt install cuda libcudnn8
$ wget https://github.com/microsoft/onnxruntime/releases/download/v${ONNX_VERSION}/onnxruntime-linux-x64-gpu-${ONNX_VERSION}.tgz
$ sudo tar xzvf onnxruntime-linux-x64-gpu-${ONNX_VERSION}.tgz --strip-components=1 -C /usr/local/ --wildcards &#34;*/include/*&#34; &#34;*/lib*/&#34;
</code></pre></div>
<p dir="auto">Then build and install:</p>
<div data-snippet-clipboard-copy-content="$ sudo ldconfig  # required if you have previously had a different version of onnxruntime installed
$ mkdir build &amp;&amp; cd build
$ cmake -DWITH_CUDA=ON .. &amp;&amp; cmake --build . &amp;&amp; sudo cmake --install ."><pre><code>$ sudo ldconfig  # required if you have previously had a different version of onnxruntime installed
$ mkdir build &amp;&amp; cd build
$ cmake -DWITH_CUDA=ON .. &amp;&amp; cmake --build . &amp;&amp; sudo cmake --install .
</code></pre></div>
<p dir="auto">If after installing, the plugin fails to load and cannot be found in the interface, there are additional steps to carry out.</p>
<div data-snippet-clipboard-copy-content="$ mkdir -p ~/.config/obs-studio/plugins/obs-backgroundremoval/bin/64bit
$ ln -s /usr/local/lib/obs-plugins/obs-backgroundremoval.so ~/.config/obs-studio/plugins/obs-backgroundremoval/bin/64bit/
$ ln -s /usr/local/share/obs/obs-plugins/obs-backgroundremoval ~/.config/obs-studio/plugins/obs-backgroundremoval/data"><pre><code>$ mkdir -p ~/.config/obs-studio/plugins/obs-backgroundremoval/bin/64bit
$ ln -s /usr/local/lib/obs-plugins/obs-backgroundremoval.so ~/.config/obs-studio/plugins/obs-backgroundremoval/bin/64bit/
$ ln -s /usr/local/share/obs/obs-plugins/obs-backgroundremoval ~/.config/obs-studio/plugins/obs-backgroundremoval/data
</code></pre></div>
<p dir="auto">If you wish to install this system-wide, change obs-studio path from <code>~/.config/obs-studio/plugins</code> to <code>/usr/share/obs/obs-plugins</code>.</p>
<h4 dir="auto"><a id="user-content-archlinux" aria-hidden="true" href="#archlinux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Archlinux</h4>
<p dir="auto">A <code>PKGBUILD</code> file is provided for making the plugin package</p>
<div data-snippet-clipboard-copy-content="$ cd scripts
$ makepkg -s"><pre><code>$ cd scripts
$ makepkg -s
</code></pre></div>
<p dir="auto">Building for Arch in Docker (host OS e.g. MacOSX):</p>
<div data-snippet-clipboard-copy-content="$ docker pull archlinux:latest
$ docker run -it -v $(pwd):/src archlinux:latest /bin/bash
# pacman -Sy --needed --noconfirm sudo fakeroot binutils gcc make
# useradd builduser -m
# passwd -d builduser
# printf &#39;builduser ALL=(ALL) ALL\n&#39; | tee -a /etc/sudoers
# sudo -u builduser bash -c &#39;cd /src/scripts &amp;&amp; makepkg -s&#39;"><pre><code>$ docker pull archlinux:latest
$ docker run -it -v $(pwd):/src archlinux:latest /bin/bash
# pacman -Sy --needed --noconfirm sudo fakeroot binutils gcc make
# useradd builduser -m
# passwd -d builduser
# printf &#39;builduser ALL=(ALL) ALL\n&#39; | tee -a /etc/sudoers
# sudo -u builduser bash -c &#39;cd /src/scripts &amp;&amp; makepkg -s&#39;
</code></pre></div>
<h3 dir="auto"><a id="user-content-windows" aria-hidden="true" href="#windows"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows</h3>
<p dir="auto">We will use static linking (as much as possible) to aviod having to lug around .DLLs with the plugin.</p>
<h4 dir="auto"><a id="user-content-install-prerequisites" aria-hidden="true" href="#install-prerequisites"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Prerequisites</h4>
<p dir="auto">Install OpenCV via <code>vcpkg</code>:</p>
<div data-snippet-clipboard-copy-content="$ mkdir build
$ cd build
$ git clone https://github.com/microsoft/vcpkg
$ cd vcpkg
$ .\bootstrap-vcpkg.bat
$ .\vcpkg.exe install opencv[core]:x64-windows-static"><pre><code>$ mkdir build
$ cd build
$ git clone https://github.com/microsoft/vcpkg
$ cd vcpkg
$ .\bootstrap-vcpkg.bat
$ .\vcpkg.exe install opencv[core]:x64-windows-static
</code></pre></div>
<p dir="auto">Install Onnxruntime with NuGet:</p>
<div data-snippet-clipboard-copy-content="$ cd build
$ mkdir nuget
$ Invoke-WebRequest https://dist.nuget.org/win-x86-commandline/latest/nuget.exe -UseBasicParsing -OutFile nuget.exe
$ nuget.exe install Microsoft.ML.OnnxRuntime.DirectML -Version 1.7.0
$ nuget.exe install Microsoft.ML.OnnxRuntime.Gpu -Version 1.7.1"><pre><code>$ cd build
$ mkdir nuget
$ Invoke-WebRequest https://dist.nuget.org/win-x86-commandline/latest/nuget.exe -UseBasicParsing -OutFile nuget.exe
$ nuget.exe install Microsoft.ML.OnnxRuntime.DirectML -Version 1.7.0
$ nuget.exe install Microsoft.ML.OnnxRuntime.Gpu -Version 1.7.1
</code></pre></div>
<p dir="auto">Clone the OBS repo, <code>Downloads\ $ git clone --single-branch -b 27.0.1 git@github.com:obsproject/obs-studio.git</code>, to e.g. Downloads.</p>
<h4 dir="auto"><a id="user-content-build-and-install-the-plugin" aria-hidden="true" href="#build-and-install-the-plugin"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build and install the plugin</h4>
<div data-snippet-clipboard-copy-content="$ cmake .. -DobsPath=&#34;$HOME\Downloads\obs-studio\&#34;
$ cmake --build . --config Release
$ cpack
$ Expand-Archive .\obs-backgroundremoval-win64.zip -DestinationPath &#39;C:\Program Files\obs-studio\&#39; -Force"><pre><code>$ cmake .. -DobsPath=&#34;$HOME\Downloads\obs-studio\&#34;
$ cmake --build . --config Release
$ cpack
$ Expand-Archive .\obs-backgroundremoval-win64.zip -DestinationPath &#39;C:\Program Files\obs-studio\&#39; -Force
</code></pre></div>
<p dir="auto">To build with CUDA support, tell cmake to use the CUDA version of OnnxRuntime</p>
<div data-snippet-clipboard-copy-content="$ cmake .. -DobsPath=&#34;$HOME\Downloads\obs-studio\&#34; -DWITH_CUDA=ON"><pre><code>$ cmake .. -DobsPath=&#34;$HOME\Downloads\obs-studio\&#34; -DWITH_CUDA=ON
</code></pre></div>
<p dir="auto">The rest of the build process is similar, but the result archive will be
<code>obs-backgroundremoval-win64-cuda.zip</code>.</p>
</article>
        </div></div>
  </body>
</html>
