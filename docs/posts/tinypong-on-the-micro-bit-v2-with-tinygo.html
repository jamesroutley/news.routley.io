<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shannondybvig.com/posts/tiny-pong-on-microbit-v2/">Original</a>
    <h1>TinyPong on the micro:bit v2 with TinyGo</h1>
    
    <div id="readability-page-1" class="page"><div>
        
        <p><img src="https://www.matrixcalculus.org/tinypong-preview.gif" alt="Starting Position of TinyPong"/></p>
<figcaption>TinyPong start position</figcaption>
<p>Last week I got the <a href="https://microbit.org/" target="_blank" rel="noopener">micro:bit-v2</a> and the first thing I did was put Pong on it. I wrote the game in Go and compiled it with <a href="https://tinygo.org/" target="_blank" rel="noopener">TinyGo</a> (a Go compiler optimized for microcontrollers and other small contexts – and yes, <a href="https://tinygo.org/docs/reference/lang-support/#garbage-collection" target="_blank" rel="noopener">garbage collection</a> is supported!).</p>
<h2 id="gameplay">
  Gameplay
  <a href="#gameplay">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>The game is played between a human player and a naive computer opponent. A player scores a point by causing the ball to pass the other’s paddle, at which point the player who scored the point gets to serve the ball. The game continues until one player accumulates 5 points, then the players’ scores are displayed as a line of lit LEDs (one LED per point) on their side of the grid.</p>
<p><img src="https://www.matrixcalculus.org/tinypong-score.webp" alt="Score display after a game of TinyPong"/></p>
<figcaption>A score of 5-3 after a game of TinyPong</figcaption>
<p>The computer moves its paddle back and forth at a consistent rate and does not try to follow the ball when flung in its direction. When the computer gets the ball, it releases it immediately, without strategy (this creates conditions for the computer to score continuously).</p>
<p>The human player moves their paddle using the A button and releases the ball with the B button. Currently the player can only move in one direction until they hit the edge of the grid.</p>
<h2 id="the-code">
  The Code
  <a href="#the-code">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>TinyPong exists in a single source file, which I’ve split into pieces for ease of explanation. The <a href="https://github.com/mroobit/tiny-pong" target="_blank" rel="noopener">source code</a> is available if you’d like to read it as a continuous block, play with the code, or flash TinyPong to your own micro:bit-v2!</p>
<h3 id="imports">
  Imports
  <a href="#imports">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h3>
<p>For the game we need <code>time</code> from the Go standard library (to slow down the frequency of updating the game loop), TinyGo’s <code>machine</code> package to access the buttons, and the TinyGo <code>microbitmatrix</code> drivers to access individual LEDs in the grid.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>import</span> <span>(</span>
</span></span><span><span>	<span>&#34;time&#34;</span>
</span></span><span><span>
</span></span><span><span>	<span>&#34;github.com/tinygo-org/tinygo/src/machine&#34;</span>
</span></span><span><span>	<span>&#34;tinygo.org/x/drivers/microbitmatrix&#34;</span>
</span></span><span><span><span>)</span>
</span></span></code></pre></div><h2 id="main-function">
  Main Function
  <a href="#main-function">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>The main function starts with defining and configuring the LED grid, the input buttons, and initializing the two player paddles and ball (which will be defined later on).</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>func</span> <span>main</span><span>()</span> <span>{</span>
</span></span><span><span>	<span>// set LED display
</span></span></span><span><span><span></span>	<span>display</span> <span>:=</span> <span>microbitmatrix</span><span>.</span><span>New</span><span>()</span>
</span></span><span><span>	<span>display</span><span>.</span><span>Configure</span><span>(</span><span>microbitmatrix</span><span>.</span><span>Config</span><span>{})</span>
</span></span><span><span>
</span></span><span><span>	<span>// set buttons
</span></span></span><span><span><span></span>	<span>bta</span> <span>:=</span> <span>machine</span><span>.</span><span>BUTTONA</span>
</span></span><span><span>	<span>bta</span><span>.</span><span>Configure</span><span>(</span><span>machine</span><span>.</span><span>PinConfig</span><span>{</span><span>Mode</span><span>:</span> <span>machine</span><span>.</span><span>PinInputPullup</span><span>})</span>
</span></span><span><span>	<span>btb</span> <span>:=</span> <span>machine</span><span>.</span><span>BUTTONB</span>
</span></span><span><span>	<span>btb</span><span>.</span><span>Configure</span><span>(</span><span>machine</span><span>.</span><span>PinConfig</span><span>{</span><span>Mode</span><span>:</span> <span>machine</span><span>.</span><span>PinInputPullup</span><span>})</span>
</span></span><span><span>
</span></span><span><span>	<span>// set players, ball
</span></span></span><span><span><span></span>	<span>h</span> <span>:=</span> <span>NewPlayer</span><span>(</span>0<span>,</span> 2<span>)</span>
</span></span><span><span>	<span>h</span><span>.</span><span>ball</span> <span>=</span> <span>true</span>
</span></span><span><span>	<span>m</span> <span>:=</span> <span>NewPlayer</span><span>(</span>4<span>,</span> 2<span>)</span>
</span></span><span><span>	<span>b</span> <span>:=</span> <span>NewBall</span><span>()</span>
</span></span></code></pre></div><p>The first loop is the game loop, which is updated every 100000 microseconds. If the <code>time.Since()</code> check were not included, the game would go impossibly fast for a human player! I settled on this update rate because it feels reasonable, but it could be fun to change this speed as the game progresses.</p>
<p>The main game loop continues until one of the players scores 5 points. In the loop, the first thing that is checked is whether the ball has gone offscreen: if it has, the players’ positions are reset, and the player who caused the ball to go offscreen gets a point and receives the ball. Once this is resolved the computer opponent moves, and releases the ball if holding it. Then button B input is checked,</p>
<p>Main game loop:</p>
<ul>
<li>first, check if the ball has gone off-screen. If it has:
<ul>
<li>players’ positions are reset</li>
<li>a point is assigned to the player who caused the ball to go offscreen, and</li>
<li>that player is given the ball</li>
</ul>
</li>
<li>once this is resolved, the computer opponent moves (and releases the ball if they have it)</li>
<li>next, check if button B is pressed (if so, human player release ball if they have it)</li>
<li>if neither player has the ball, it is free to move and there is a check for whether it hits a paddle</li>
<li>then check if button A is pressed (if so, human player moves – direction cannot be changed at this time – and if they are holding the ball, the ball moves with them)</li>
</ul>
<p>After all of these logic checks and updates, and still inside the loop, the grid is cleared and the pixels for the two player paddles and the ball are set and displayed.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span>	<span>// game loop
</span></span></span><span><span><span></span>	<span>t</span> <span>:=</span> <span>time</span><span>.</span><span>Now</span><span>()</span>
</span></span><span><span>	<span>for</span> <span>h</span><span>.</span><span>score</span> <span>&lt;</span> 5 <span>&amp;&amp;</span> <span>m</span><span>.</span><span>score</span> <span>&lt;</span> 5 <span>{</span>
</span></span><span><span>		<span>if</span> <span>time</span><span>.</span><span>Since</span><span>(</span><span>t</span><span>).</span><span>Microseconds</span><span>()</span> <span>&gt;=</span> 100000 <span>{</span>
</span></span><span><span>			<span>// reset time
</span></span></span><span><span><span></span>			<span>t</span> <span>=</span> <span>time</span><span>.</span><span>Now</span><span>()</span>
</span></span><span><span>
</span></span><span><span>			<span>// check if ball is offscreen
</span></span></span><span><span><span></span>			<span>if</span> <span>b</span><span>.</span><span>Offscreen</span><span>()</span> <span>{</span>
</span></span><span><span>				<span>// reset player positions
</span></span></span><span><span><span></span>				<span>m</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>=</span> 2
</span></span><span><span>				<span>h</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>=</span> 2
</span></span><span><span>				<span>// add to score
</span></span></span><span><span><span></span>				<span>// assign ball to player who scored
</span></span></span><span><span><span></span>				<span>if</span> <span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> <span>-</span>1 <span>{</span>
</span></span><span><span>					<span>m</span><span>.</span><span>score</span><span>++</span>
</span></span><span><span>					<span>m</span><span>.</span><span>Get</span><span>(</span><span>b</span><span>)</span>
</span></span><span><span>					<span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>=</span> 3
</span></span><span><span>				<span>}</span>
</span></span><span><span>				<span>if</span> <span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> 5 <span>{</span>
</span></span><span><span>					<span>h</span><span>.</span><span>score</span><span>++</span>
</span></span><span><span>					<span>h</span><span>.</span><span>Get</span><span>(</span><span>b</span><span>)</span>
</span></span><span><span>					<span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>=</span> 1
</span></span><span><span>				<span>}</span>
</span></span><span><span>			<span>}</span>
</span></span><span><span>			
</span></span><span><span>			<span>//if ball isn&#39;t held, move the ball
</span></span></span><span><span><span></span>			<span>if</span> <span>!</span><span>m</span><span>.</span><span>ball</span> <span>&amp;&amp;</span> <span>!</span><span>h</span><span>.</span><span>ball</span> <span>{</span>
</span></span><span><span>				<span>b</span><span>.</span><span>Move</span><span>()</span>
</span></span><span><span>				<span>// if ball hits paddle, reverse both dirs
</span></span></span><span><span><span></span>				<span>b</span><span>.</span><span>Hit</span><span>(</span><span>m</span><span>,</span> <span>h</span><span>)</span>
</span></span><span><span>			<span>}</span>
</span></span><span><span>			
</span></span><span><span>			<span>// move machine player, release ball if machine carrying
</span></span></span><span><span><span></span>			<span>m</span><span>.</span><span>Move</span><span>()</span>
</span></span><span><span>			<span>if</span> <span>m</span><span>.</span><span>ball</span> <span>==</span> <span>true</span> <span>{</span>
</span></span><span><span>				<span>m</span><span>.</span><span>ball</span> <span>=</span> <span>false</span>
</span></span><span><span>			<span>}</span>
</span></span><span><span>			
</span></span><span><span>			<span>// if button b is pressed, release ball
</span></span></span><span><span><span></span>			<span>if</span> <span>!</span><span>btb</span><span>.</span><span>Get</span><span>()</span> <span>{</span>
</span></span><span><span>				<span>h</span><span>.</span><span>ball</span> <span>=</span> <span>false</span>
</span></span><span><span>			<span>}</span>
</span></span><span><span>			
</span></span><span><span>			<span>// if button a is pressed move human player (and ball if held)
</span></span></span><span><span><span></span>			<span>if</span> <span>!</span><span>bta</span><span>.</span><span>Get</span><span>()</span> <span>{</span>
</span></span><span><span>				<span>h</span><span>.</span><span>Move</span><span>()</span>
</span></span><span><span>				<span>if</span> <span>h</span><span>.</span><span>ball</span> <span>==</span> <span>true</span> <span>{</span>
</span></span><span><span>					<span>h</span><span>.</span><span>Carry</span><span>(</span><span>b</span><span>)</span>
</span></span><span><span>				<span>}</span>
</span></span><span><span>			<span>}</span>
</span></span><span><span>			<span>// clear display and set pixels for both paddles and ball
</span></span></span><span><span><span></span>			<span>display</span><span>.</span><span>ClearDisplay</span><span>()</span>
</span></span><span><span>			<span>display</span><span>.</span><span>SetPixel</span><span>(</span><span>h</span><span>.</span><span>loc</span><span>[</span>0<span>],</span> <span>h</span><span>.</span><span>loc</span><span>[</span>1<span>],</span> <span>microbitmatrix</span><span>.</span><span>BrightnessFull</span><span>)</span>
</span></span><span><span>			<span>display</span><span>.</span><span>SetPixel</span><span>(</span><span>m</span><span>.</span><span>loc</span><span>[</span>0<span>],</span> <span>m</span><span>.</span><span>loc</span><span>[</span>1<span>],</span> <span>microbitmatrix</span><span>.</span><span>BrightnessFull</span><span>)</span>
</span></span><span><span>			<span>display</span><span>.</span><span>SetPixel</span><span>(</span><span>b</span><span>.</span><span>loc</span><span>[</span>0<span>],</span> <span>b</span><span>.</span><span>loc</span><span>[</span>1<span>],</span> <span>microbitmatrix</span><span>.</span><span>BrightnessFull</span><span>)</span>
</span></span><span><span>		<span>}</span>
</span></span><span><span>		<span>// display pixel grid
</span></span></span><span><span><span></span>		<span>display</span><span>.</span><span>Display</span><span>()</span>
</span></span><span><span>	<span>}</span>
</span></span></code></pre></div><p>After either player accumulates 5 points, the game ends and the second loop (which displays the scores) begins. This is an infinite loop, as the scores should be displayed until the game is reset or the device is powered off. Once again the display is cleared, and for each point that each player scored, an LED is set to full brightness. After all the point LEDs are set, they are displayed on each player’s side of the grid.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span>	<span>for</span> <span>{</span>
</span></span><span><span>		<span>display</span><span>.</span><span>ClearDisplay</span><span>()</span>
</span></span><span><span>		<span>for</span> <span>i</span> <span>:=</span> 0<span>;</span> <span>i</span> <span>&lt;</span> <span>int</span><span>(</span><span>h</span><span>.</span><span>score</span><span>);</span> <span>i</span><span>++</span> <span>{</span>
</span></span><span><span>			<span>display</span><span>.</span><span>SetPixel</span><span>(</span>1<span>,</span> <span>int16</span><span>(</span><span>i</span><span>),</span> <span>microbitmatrix</span><span>.</span><span>BrightnessFull</span><span>)</span>
</span></span><span><span>		<span>}</span>
</span></span><span><span>		<span>for</span> <span>i</span> <span>:=</span> 0<span>;</span> <span>i</span> <span>&lt;</span> <span>int</span><span>(</span><span>m</span><span>.</span><span>score</span><span>);</span> <span>i</span><span>++</span> <span>{</span>
</span></span><span><span>			<span>display</span><span>.</span><span>SetPixel</span><span>(</span>3<span>,</span> <span>int16</span><span>(</span><span>i</span><span>),</span> <span>microbitmatrix</span><span>.</span><span>BrightnessFull</span><span>)</span>
</span></span><span><span>		<span>}</span>
</span></span><span><span>		<span>display</span><span>.</span><span>Display</span><span>()</span>
</span></span><span><span>	<span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><h2 id="player-struct-and-methods">
  Player struct and methods
  <a href="#player-struct-and-methods">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>The player struct is used for both the human and computer players. It holds the x,y coordinates of the paddle, which direction the paddle is moving, the player’s score, and whether they are holding the ball.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>type</span> <span>Player</span> <span>struct</span> <span>{</span>
</span></span><span><span>	<span>loc</span>   <span>[</span>2<span>]</span><span>int16</span>
</span></span><span><span>	<span>dir</span>   <span>int16</span>
</span></span><span><span>	<span>score</span> <span>int16</span>
</span></span><span><span>	<span>ball</span>  <span>bool</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>func</span> <span>NewPlayer</span><span>(</span><span>x</span><span>,</span> <span>y</span> <span>int16</span><span>)</span> <span>*</span><span>Player</span> <span>{</span>
</span></span><span><span>	<span>p</span> <span>:=</span> <span>&amp;</span><span>Player</span><span>{</span>
</span></span><span><span>		<span>loc</span><span>:</span> <span>[</span>2<span>]</span><span>int16</span><span>{</span><span>x</span><span>,</span> <span>y</span><span>},</span>
</span></span><span><span>		<span>dir</span><span>:</span> 1<span>,</span>
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>return</span> <span>p</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>Currently the player paddle moves in the direction it is already moving and only changes direction when it hits the edge of the grid. If the player is holding the ball, they will carry it (updating its location), and when the player hits the edge of the grid the ball is moved to the other side of the player and the direction it will launch is reversed.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>func</span> <span>(</span><span>p</span> <span>*</span><span>Player</span><span>)</span> <span>Move</span><span>()</span> <span>{</span>
</span></span><span><span>	<span>if</span> <span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 0 <span>||</span> <span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 4 <span>{</span>
</span></span><span><span>		<span>p</span><span>.</span><span>dir</span> <span>*=</span> <span>-</span>1
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>+=</span> <span>p</span><span>.</span><span>dir</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>func</span> <span>(</span><span>p</span> <span>*</span><span>Player</span><span>)</span> <span>Carry</span><span>(</span><span>b</span> <span>*</span><span>Ball</span><span>)</span> <span>{</span>
</span></span><span><span>	<span>if</span> <span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 0 <span>||</span> <span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 4 <span>{</span>
</span></span><span><span>		<span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span> <span>=</span> <span>p</span><span>.</span><span>dir</span> <span>*</span> <span>-</span>1
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>+=</span> <span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>After a point is scored, both players’ positions are reset to the middle and one player gets the ball. The ball’s horizontal direction is set to be the same as the player’s and the ball is offset by one in that direction.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>func</span> <span>(</span><span>p</span> <span>*</span><span>Player</span><span>)</span> <span>Get</span><span>(</span><span>b</span> <span>*</span><span>Ball</span><span>)</span> <span>{</span>
</span></span><span><span>	<span>p</span><span>.</span><span>ball</span> <span>=</span> <span>true</span>
</span></span><span><span>	<span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>=</span> <span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>+</span> <span>p</span><span>.</span><span>dir</span>
</span></span><span><span>	<span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span> <span>=</span> <span>p</span><span>.</span><span>dir</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>func</span> <span>(</span><span>p</span> <span>*</span><span>Player</span><span>)</span> <span>Reset</span><span>()</span> <span>{</span>
</span></span><span><span>	<span>p</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>=</span> 2
</span></span><span><span><span>}</span>
</span></span></code></pre></div><h2 id="ball-struct-and-methods">
  Ball struct and methods
  <a href="#ball-struct-and-methods">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>The Ball struct keeps track of the ball’s x,y coordinates and which directions it is moving on each of those axes. When a new ball is initialized at the beginning of the game, it always belongs to the human player (this could be randomized later if desired).</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>type</span> <span>Ball</span> <span>struct</span> <span>{</span>
</span></span><span><span>	<span>loc</span> <span>[</span>2<span>]</span><span>int16</span>
</span></span><span><span>	<span>dir</span> <span>[</span>2<span>]</span><span>int16</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>func</span> <span>NewBall</span><span>()</span> <span>*</span><span>Ball</span> <span>{</span>
</span></span><span><span>	<span>b</span> <span>:=</span> <span>&amp;</span><span>Ball</span><span>{</span>
</span></span><span><span>		<span>loc</span><span>:</span> <span>[</span>2<span>]</span><span>int16</span><span>{</span>1<span>,</span> 3<span>},</span>
</span></span><span><span>		<span>dir</span><span>:</span> <span>[</span>2<span>]</span><span>int16</span><span>{</span>1<span>,</span> 1<span>},</span>
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>return</span> <span>b</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>Movement in either direction is either 1 or -1, so when the ball hits the edge of the grid or a paddle, the direction just needs to be multiplied by -1 to be reversed.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>func</span> <span>(</span><span>b</span> <span>*</span><span>Ball</span><span>)</span> <span>Move</span><span>()</span> <span>{</span>
</span></span><span><span>	<span>if</span> <span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 0 <span>||</span> <span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> 4 <span>{</span>
</span></span><span><span>		<span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span> <span>*=</span> <span>-</span>1
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>+=</span> <span>b</span><span>.</span><span>dir</span><span>[</span>0<span>]</span>
</span></span><span><span>	<span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>+=</span> <span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>func</span> <span>(</span><span>b</span> <span>*</span><span>Ball</span><span>)</span> <span>Hit</span><span>(</span><span>m</span><span>,</span> <span>h</span> <span>*</span><span>Player</span><span>)</span> <span>{</span>
</span></span><span><span>	<span>if</span> <span>(</span><span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> 1 <span>&amp;&amp;</span> <span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> <span>h</span><span>.</span><span>loc</span><span>[</span>1<span>])</span> <span>||</span>
</span></span><span><span>		<span>(</span><span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> 3 <span>&amp;&amp;</span> <span>b</span><span>.</span><span>loc</span><span>[</span>1<span>]</span> <span>==</span> <span>m</span><span>.</span><span>loc</span><span>[</span>1<span>])</span> <span>{</span>
</span></span><span><span>		<span>b</span><span>.</span><span>dir</span><span>[</span>0<span>]</span> <span>*=</span> <span>-</span>1
</span></span><span><span>		<span>b</span><span>.</span><span>dir</span><span>[</span>1<span>]</span> <span>*=</span> <span>-</span>1
</span></span><span><span>	<span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>The ball can only go offscreen when a point is scored, so only the y location needs to be checked.</p>
<div><pre tabindex="0"><code data-lang="go"><span><span><span>func</span> <span>(</span><span>b</span> <span>*</span><span>Ball</span><span>)</span> <span>Offscreen</span><span>()</span> <span>bool</span> <span>{</span>
</span></span><span><span>	<span>if</span> <span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> <span>-</span>1 <span>||</span> <span>b</span><span>.</span><span>loc</span><span>[</span>0<span>]</span> <span>==</span> 5 <span>{</span>
</span></span><span><span>		<span>return</span> <span>true</span>
</span></span><span><span>	<span>}</span>
</span></span><span><span>	<span>return</span> <span>false</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><h2 id="some-nice-additions">
  Some Nice Additions
  <a href="#some-nice-additions">
    <i aria-hidden="true" title="Link to heading"></i>
    <span>Link to heading</span>
  </a>
</h2>
<p>Although the game is playable, it could be made more fun and interesting. Here are some aspects of the game I would consider changing or extending:</p>
<ul>
<li>Give the Computer Opponent Strategy
<ul>
<li>have the computer track the ball and attempt to move where it can hit the ball back</li>
<li>have computer track human paddle and attempt to server where human cannot reach</li>
</ul>
</li>
<li>Better Human Player Control
<ul>
<li>allow human player to change direction before hitting the edge of the grid, likely with the B button</li>
</ul>
</li>
<li>Speed Increase over Time
<ul>
<li>start the game with a slower update speed, but increment it as the game progresses until it goes impossibly fast. Given the small grid size, this may not be that enjoyable, or speed may not increase much before the game ends.</li>
</ul>
</li>
<li>2 Player Option (with menu to select mode)
<ul>
<li>Incompatible with the last point, two humans could play the game by controlling each paddle with just A or B. This would probably be a terrible play experience between limited input and crowding around the device :)</li>
</ul>
</li>
<li>Opening Animation (this is just a bit of gloss)</li>
</ul>
<p>This is the first time I’ve written code for a tiny computer. It’s very satisfying to write code that makes things happen when you press a button or causes LEDs to light up! I think I may need to acquire a few more boards.</p>

      </div></div>
  </body>
</html>
