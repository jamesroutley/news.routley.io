<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/blixt/sol-mate-eink">Original</a>
    <h1>Show HN: E-Paper 7-color display showing the current weather</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">I initially made <a href="https://chatgpt.com/g/g-QIydQSFRm-sol-mate" rel="nofollow">the ☀️ Sol Mate GPT</a>, but it didn&#39;t take too long until I wondered what it would look like on <a href="https://www.amazon.com/dp/B0BMQ83W7W" rel="nofollow">an e-Paper display</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/158591/337645173-1ef011a5-4c01-429f-872f-ea47f8c76e02.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTc3OTE1OTUsIm5iZiI6MTcxNzc5MTI5NSwicGF0aCI6Ii8xNTg1OTEvMzM3NjQ1MTczLTFlZjAxMWE1LTRjMDEtNDI5Zi04NzJmLWVhNDdmOGM3NmUwMi5qcGc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNjA3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDYwN1QyMDE0NTVaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT04MGQxYjIxNGNlNDExYWJlNzc2MDkxNmY3MTk3YWYxOTEyOWIwNGY5MTRmZDM3YjQxZTAwMjBmMGEzMjYyM2Q0JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.WatB0f8V5rZ8gqLTZVUpAU-WnlR5gD1O8pJfZ5TBtiU"><img src="https://private-user-images.githubusercontent.com/158591/337645173-1ef011a5-4c01-429f-872f-ea47f8c76e02.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTc3OTE1OTUsIm5iZiI6MTcxNzc5MTI5NSwicGF0aCI6Ii8xNTg1OTEvMzM3NjQ1MTczLTFlZjAxMWE1LTRjMDEtNDI5Zi04NzJmLWVhNDdmOGM3NmUwMi5qcGc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjQwNjA3JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI0MDYwN1QyMDE0NTVaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT04MGQxYjIxNGNlNDExYWJlNzc2MDkxNmY3MTk3YWYxOTEyOWIwNGY5MTRmZDM3YjQxZTAwMjBmMGEzMjYyM2Q0JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCZhY3Rvcl9pZD0wJmtleV9pZD0wJnJlcG9faWQ9MCJ9.WatB0f8V5rZ8gqLTZVUpAU-WnlR5gD1O8pJfZ5TBtiU" alt="IMG_5006"/></a></p>
<p dir="auto">The script to update the screen takes a location (maybe your own, maybe your best friend&#39;s, or even a fictional place!) and get the weather for that location, then generate an illustration of the location including the current weather and lighting conditions. So if it&#39;s raining, there will be people with umbrellas in the picture, and so on. If you do generate for a fictional location, the weather service will be given the latitude/longitude of the most similar place on Earth (according to GPT). The illustrations are rendered using Dall-E 3. This is why an OpenAI API token is necessary to run it.</p>
<p dir="auto">This repository contains all the code that was needed to generate and display a weather report for any specified location on a Raspberry Pi with an attached Waveshare e-Paper display.</p>

<ul dir="auto">
<li><a href="https://www.raspberrypi.com/products/raspberry-pi-5/" rel="nofollow">Raspberry Pi 5</a></li>
<li><a href="https://www.amazon.com/dp/B0BMQ83W7W" rel="nofollow">Waveshare e-Paper 7.3&#34; display</a> (code needs to be updated for other sizes)</li>
</ul>

<ul dir="auto">
<li><a href="https://x.com/blixt/status/1797317001372750301" rel="nofollow">4 examples, some with more color</a></li>
<li><a href="https://x.com/blixt/status/1796616909611278356" rel="nofollow">The setup, without the box</a></li>
<li><a href="https://x.com/blixt/status/1797350136080699837" rel="nofollow">Video of the thinness of the display</a></li>
</ul>

<p dir="auto">This should all run on your Raspberry Pi.</p>
<p dir="auto">I recommend setting up a virtual environment for Python, <a href="https://github.com/astral-sh/uv">such as uv</a>, first. Here are the instructions for if you&#39;re using <code>uv</code> (to be run inside the clone of this repo):</p>
<div dir="auto" data-snippet-clipboard-copy-content="uv venv
source .venv/bin/activate
uv pip install -r requirements.txt"><pre>uv venv
<span>source</span> .venv/bin/activate
uv pip install -r requirements.txt</pre></div>
<p dir="auto">Without <code>uv</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m venv .
source .venv/bin/activate
pip install -r requirements.txt"><pre>python -m venv <span>.</span>
<span>source</span> .venv/bin/activate
pip install -r requirements.txt</pre></div>
<p dir="auto">You will need to specify an <code>OPENAI_API_KEY</code> environment variable. For your convenience, the code will load environment variables from a <code>.env</code> file in the current working directory.</p>
<p dir="auto">Now you can use the <code>control.py</code> script to generate an image and show it on the screen:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python control.py show Barcelona"><pre>python control.py show Barcelona</pre></div>
<p dir="auto"><a href="https://www.waveshare.com/wiki/7.3inch_e-Paper_HAT_(F)_Manual#Precautions" rel="nofollow">Waveshare recommends</a> you don&#39;t leave the same image on the display for too long.</p>
<p dir="auto">Use the <code>clear</code> command to clear it:</p>

<p dir="auto">I set up a cron job (<code>crontab -e</code>) to update the image two times per day, but keep in mind this can end up costing a non-trivial amount:</p>
<div data-snippet-clipboard-copy-content="0 8 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py show Barcelona
0 18 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py show Barcelona
0 2 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py clear"><pre lang="crontab"><code>0 8 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py show Barcelona
0 18 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py show Barcelona
0 2 * * * cd ~/src/sol-mate-eink &amp;&amp; .venv/bin/python control.py clear
</code></pre></div>
<p dir="auto">(You&#39;ll need to tweak the paths for your setup, of course.)</p>

<p dir="auto">Feel free to use the private API I hosted to get the weather if you&#39;re not going to hammer it. I also use this backend for my GPT. However, if you have high volume ideas in mind, please self-host it! The source code is here:</p>
<p dir="auto"><a href="https://github.com/blixt/sol-mate">https://github.com/blixt/sol-mate</a></p>

<p dir="auto">I&#39;d love to help if I can – <a href="https://twitter.com/blixt" rel="nofollow">reach out on Twitter</a> or create an issue in this repo!</p>
</article></div></div>
  </body>
</html>
