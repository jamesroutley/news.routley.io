<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://karelvo.com/blog/selfhosting-forms-the-sane-way">Original</a>
    <h1>Self-hosting forms, the sane way</h1>
    
    <div id="readability-page-1" class="page"><div> 
<p>I run a few (very) small websites, nothing serious: they’re not businesses, they’re hobbies. There is no risk involved if they would go down, apart from maybe disappointing a few hundred people that found a link to it on search engines. Because working on them is sometimes a fun challenge, but at the same time I am not a developer/sysadmin, there are two rules I follow:</p>
<ul><li>Try to do as much as you can by yourself, and seek out the challenges.</li><li>…but seek alternatives when it gets too frustrating/scary. It’s a hobby, after all - no stress.</li></ul>
<p>Some examples of how the combo of those two things translates to my setup:</p>
<ul><li>I run all my sites by myself on a Linux server, <strong>BUT</strong> I rent the server (opening ports on my home network gives me more anxiety than I need).</li><li>I don’t use a CMS or “anything with a GUI”, <strong>BUT</strong> I do use static site builders (I can’t be bothered with raw-dogging plain HTML, CSS, and JS). My favorite is <a href="https://astro.build" title="">Astro</a>.</li><li>I host a few services, such as site analytics, myself so that any data passes through as few hands as possible, <strong>BUT</strong> I run <a href="https://coolify.io/" title="">Coolify</a> to deploy my sites (and lately, manage my server).</li></ul>
<p>In other words: DIY, unless there’s a great FOSS tool to help me out. The excuse I give myself is “this is more <em>hacky</em> than 95% of people doing the same thing, anyway”.</p>
<p id="diy-vs-form-services"> <hr/> <h2>DIY vs form services</h2> <hr/> </p>
<p>On one of my sites, I needed to install a form with file upload capability. After some research, I found a few solutions to solve my need:</p>
<ul><li><strong>Embedding a form that you build elsewhere.</strong> Examples are <a href="https://tally.so/" title="">Tally</a> (which is a really inspiring company, by the way), <a href="https://www.typeform.com/" title="">Typeform</a>, and <a href="https://www.jotform.com/" title="">Jotform</a>. I don’t like the idea of embedding as it doesn’t give me control over what’s on my site.</li><li><strong>Form backends</strong>, basically databases where you can send your form data to. Examples are <a href="https://formspree.io/" title="">Formspree</a>, <a href="https://formsubmit.co/" title="">FormSubmit</a>, <a href="https://getform.io/" title="">getform</a>, and <a href="https://www.submitjson.com/" title="">Submit JSON</a>. If my use-case was more professional, I’d choose this.</li><li><strong>DIY-ing it with PHP scripts</strong>, a.k.a. the old school way. Easy but relatively insecure and prone to breaking (for someone at my skill level).</li></ul>
<p>I didn’t like what I found: I wanted something</p>
<ul><li>…where I <strong>didn’t need to pay</strong> for a service (or be crippled in forms/submits/styling if I didn’t), meaning options 1 and 2 are off the table.</li><li>…that <strong>didn’t let other services process the form data</strong>, so again 1 and 2 weren’t an option.</li><li>…that was <strong>secure</strong> and <strong>wouldn’t give me a headache</strong>, so number 3 was off as well.</li></ul>
<p id="my-solution:-the-middle-ground"> <hr/> <h2>My solution: the middle ground</h2> <hr/> </p>
<p>In the end, I decided to build something myself that adhered to the above points as much as possible. In summary, it looks like this:</p>

<p>Most people reading this will understand this chart without much further explanation. Before I dive into the details, here are the pros and cons of this setup:</p>
<ul><li><a>Pro</a> - I can do whatever the hell I want with my form: have infinite submissions, fields, and style it however I desire. The only bottleneck is the capacity of my server.</li><li><a>Pro</a> - troubleshooting is a breeze; n8n as “central processor” is a gem to work with.</li><li><a>Pro/con</a> - the data only passes the user’s browser, my server and (unfortunately) an email server. If you want to be super strict, you could only send it to a database you host yourself - or host the email server yourself, which is notoriously a pain in the ass.</li><li><a>Con</a> - your server is a single point of failure. If it goes down, you lose everything apart from historical data you’ve received via email. Solution: host n8n on a different server, or do continuous offsite backups (which you should do anyway).</li></ul>
<p>Here’s the step by step process. Yes, it’s really this simple:</p>
<p id="form-gets-filled"> <hr/> <h3>Form gets filled</h3> <hr/> </p>
<ul><li>Your website hosts a form that looks like this:</li></ul>


<ul><li>User fills it out, presses the “Submit” button and 2 things happen:</li><ul><li>The form data is sent to the n8n webhook you declared in your form.</li><li>(Optional) The button click event is sent to your website analytics warehouse, <a href="https://umami.is/docs/track-events" title="">Umami</a> and event name <code>buttonname</code> in the example above.</li></ul></ul>
<p id="n8n-processes"> <hr/> <h3>n8n processes</h3> <hr/> </p>
<ul><li><a href="https://n8n.io/" title="">n8n</a> is a workflow automation tool (like <a href="https://zapier.com" title="">Zapier</a>) that <a href="https://docs.n8n.io/hosting" title="">you can host yourself</a>.</li><li>n8n receives the form data via the webhook.</li><li>(Optional but recommended) Add a <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.respondtowebhook/" title="">Respond to Webhook</a> step in which you define which page the form should redirect after submitting.</li><li>(Optional) Add data cleanup steps to format the data you received in whichever way you need.</li><li>Add 2 subsequent, independent steps:</li><ul><li>Send the form data to NocoDB (or a database of your choice) with its <a href="https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.nocodb/" title="">built-in NocoDB node</a>.</li><li>Send a notification of any kind to yourself - I do this via email with its <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.sendemail/" title="">built-in email node</a>.</li></ul></ul>
<p id="nocodb-collects"> <hr/> <h3>NocoDB collects</h3> <hr/> </p>
<ul><li><a href="https://nocodb.com/" title="">NocoDB</a> is a no-code database (like <a href="https://www.airtable.com/" title="">Airtable</a>) that <a href="https://docs.nocodb.com/getting-started/self-hosted/installation" title="">you can host yourself</a>.</li><li>If you create a table with columns table correspond to the form fields, you can select “Auto-Map Input Data to Columns” in the NocoDB step in n8n. Works like a charm! If not, or if you want more extensive data like time, IP address, etc., you can define it for each column.</li><li>Use NocoDB as your warehouse for all forms ever submitted.</li></ul>
<p id="email-notifies"> <hr/> <h3>Email notifies</h3> <hr/> </p>
<ul><li>I find it crucial to get notified of a form fill, because form fills are relatively rare on my sites. If you’re a business that gets multiple form fills a day, just syncing it to a CRM that gets checked daily if a more obvious choice, of course.</li><li>n8n has integrations with many services that can notify you (think of proprietary services <a href="https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.discord/" title="">Discord</a> or <a href="https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.slack/" title="">Slack</a>, but also things like <a href="https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.pushbullet/" title="">Pushbullet</a> or <a href="https://github.com/cryingpotat0/n8n-ntfy.sh)" title="">ntfy.sh</a>). I chose <a href="https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.sendemail/" title="">email</a>, however.</li><li>My email is hosted via <a href="https://fastmail.com/" title="">Fastmail</a>, which seamlessly and securely integrates with third-party applications via its <a href="https://www.fastmail.help/hc/en-us/articles/360058752854-App-passwords" title=""> app passwords</a>. Sending the email happens via SMTP.</li><li>I send an email containing the form data to myself via an alias.</li></ul>
<p><a>And there you have it: one way to host forms yourself, without losing your mind.</a> </p></div></div>
  </body>
</html>
