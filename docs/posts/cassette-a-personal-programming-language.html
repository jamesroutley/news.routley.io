<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://cassette-lang.com">Original</a>
    <h1>Show HN: Cassette, a Personal Programming Language</h1>
    
    <div id="readability-page-1" class="page"><div>
      <article>
                <p>Cassette is a small, Lisp-like programming language.
                It is a <a href="https://www.robinsloan.com/notes/home-cooked-app/">home-cooked
                meal</a>. It looks like this:</p>
                <div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>List</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>Math</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>Canvas</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>System</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>width</span> = <span>800</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span>height</span> = <span>480</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span>canvas</span> = <span>Canvas.new</span>(width, height)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span>canvas.text</span>(<span>&#34;Lines!&#34;</span>, {<span>200</span>, <span>2</span>})</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span>System.seed</span>(<span>System.time</span>())</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>rand-line</span>(<span>i</span>) <span>do</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span>let</span> <span>x0</span> = <span>Math.floor</span>(i<span> *</span> width<span> /</span> <span>100</span>),</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>      <span>y0</span> = <span>Math.rand-int</span>(<span>20</span>, height<span> /</span> <span>10</span>),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>      <span>x1</span> = <span>Math.rand-int</span>(<span>0</span>, width),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>      <span>y1</span> = <span>Math.rand-int</span>(<span>20</span>, height)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span>canvas.line</span>({x0, y0}, {x1, y1})</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span>end</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span>List.map</span>(<span>\</span><span>i</span> <span>-&gt;</span> <span>rand-line</span>(i), <span>List.range</span>(<span>0</span>, <span>100</span>))</span></code></pre></div>
                
                <h2 id="press-play"><a href="#press-play">Press
                <em>Play</em></a></h2>
                <p>I made Cassette as a simple language for “playful
                programming”. Playful programming is writing something
                for the sake of writing it. It’s making a software 3D
                renderer or a GIF reader, even though better
                implementations of those already exist. It’s making
                generative art programs and drawing them with a pen
                plotter. Cassette itself is playful programming—there
                are certainly other scripting languages that may be
                better for personal projects like these, but this one is
                mine.</p>
                <p>Here are some of the design goals of Cassette:</p>
                <ul>
                <li>Functional</li>
                <li>Immutable types</li>
                <li>Simplicity over efficiency</li>
                <li>Small implementation</li>
                <li>Few dependencies</li>
                </ul>
                <p>In particular, I wanted Cassette to feel “essential”,
                where each aspect of the language reflects some
                fundamental aspect of computing (from a functional
                language perspective, at least). For example, I consider
                garbage collection, lexical scopes, and immutable types
                essential. The result is a little boring, but I hope
                it’s a good platform to play with other programming
                concepts.</p>
                <p>Here’s some future work for Cassette:</p>
                <ul>
                <li>Bignum support</li>
                <li>Generational garbage collection</li>
                <li>Compiler &amp; VM optimization</li>
                <li>Support other backends (WebAssembly, LLVM)</li>
                <li>Destructuring assignment (v2?)</li>
                <li>Pattern-based function dispatch (v2?)</li>
                </ul>
                <h2 id="getting-started"><a href="#getting-started">Getting Started</a></h2>
                <p>This project requires a C build toolchain and SDL2.
                The source code can be found <a href="https://git.sr.ht/~zjm/Cassette">here</a>.</p>
                <ol type="1">
                <li>Clone the repo with
                <code>git clone https://git.sr.ht/~zjm/Cassette</code>.</li>
                <li>Run <code>make</code> to build the project. This
                creates the executable <code>cassette</code>.</li>
                <li>Optionally, run <code>make install</code> to install
                the Cassette executable. You can set the install folder
                in the Makefile.</li>
                <li>Try the example with
                <code>./cassette test/test.ct</code>.</li>
                <li>Write a little script and run it with
                <code>./cassette script.ct</code>.</li>
                </ol>
                <h2 id="syntax"><a href="#syntax">Syntax</a></h2>
                <div>
                <p>Cassette has two number types, integers and floats.
                Integers can be written in decimal, hexadecimal, or as a
                character. The normal infix arithmetic operations work
                on numbers, and bitwise operations work on
                integers.</p><div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span>-</span><span>1</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span>1</span>                 <span>; decimal integer</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span>0x1F</span>              <span>; hex integer</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span>$a</span>                <span>; =&gt; 0x61</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span>1</span>.<span>0</span>               <span>; float</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span>-</span><span>4</span>                <span>; =&gt; -4</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span>1</span><span> +</span> <span>2</span>             <span>; =&gt; 3</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span>5</span><span> *</span> <span>5</span>             <span>; =&gt; 25</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span>10</span><span> /</span> <span>2</span>            <span>; =&gt; 5.0</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span>12</span><span> %</span> <span>10</span>           <span>; =&gt; 2</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span>0xF0</span><span> &gt;&gt;</span> <span>4</span>         <span>; =&gt; 0x0F (shift right)</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span>0x55</span><span> &lt;&lt;</span> <span>1</span>         <span>; =&gt; 0xAA (shift left)</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span>0x37</span><span> &amp;</span> <span>0x0F</span>       <span>; =&gt; 0x07 (bitwise and)</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span>20</span><span> ^</span> <span>1</span>            <span>; =&gt; 21   (bitwise or)</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span>~</span><span>4</span>                <span>; =&gt; 3    (bitwise not)</span></span></code></pre></div>
                </div>
                <div>
                <p>Cassette has symbols, which represent an arbitrary
                value. <code>true</code> and <code>false</code> are
                symbols. In boolean operations, all values are truthy
                except <code>false</code> and <code>nil</code>.
                Comparison operators only work on numbers, but equality
                operators work on any type. The <code>and</code> and
                <code>or</code> operators are short-circuiting.</p><div id="cb3"><pre><code><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span>:ok</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span>:not_found</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span>3</span><span> &gt;</span> <span>1</span>             <span>; =&gt; true</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span>3</span><span> &lt;</span> <span>3</span>             <span>; =&gt; false</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span>5</span><span> &lt;=</span> <span>4</span><span> +</span> <span>1</span>        <span>; =&gt; true</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span>5</span><span> &gt;=</span> <span>4</span><span> +</span> <span>1</span>        <span>; =&gt; true</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span>:ok</span><span> ==</span> <span>:ok</span>        <span>; =&gt; true</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span>:ok</span><span> !=</span> <span>:ok</span>        <span>; =&gt; false</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span>3</span><span> &gt;</span> <span>1</span> <span>and</span> <span>4</span><span> ==</span> <span>5</span>  <span>; =&gt; false</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span>3</span><span> &gt;</span> <span>1</span> <span>or</span> <span>4</span><span> ==</span> <span>5</span>   <span>; =&gt; true</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span>3</span><span> &gt;=</span> <span>0</span> <span>and</span> <span>3</span><span> &lt;</span> <span>5</span>  <span>; =&gt; true</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span>nil</span> <span>and</span> <span>:ok</span>       <span>; =&gt; false</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span>:error</span> <span>and</span> <span>:ok</span>    <span>; =&gt; true</span></span></code></pre></div>
                </div>
                <div>
                <p>Strings are UTF-8 encoded binaries. You can find the
                length of a string, concatenate two binaries, and test
                if one string or byte is present in another string.
                Binaries also represent other arbitrary byte sequences,
                such as the contents of a file.</p><div id="cb4"><pre><code><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span>&#34;Hello!&#34;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span>#</span><span>&#34;Hello!&#34;</span>         <span>; =&gt; 6</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span>#</span><span>&#34;&#34;</span>               <span>; =&gt; 0</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span>&#34;Hi &#34;</span><span> &lt;&gt;</span> <span>&#34;there&#34;</span>  <span>; =&gt; &#34;Hi there&#34;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span>&#34;foo&#34;</span><span> &lt;&gt;</span> <span>&#34;bar&#34;</span>    <span>; =&gt; &#34;foobar&#34;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span>&#34;ob&#34;</span> <span>in</span> <span>&#34;foobar&#34;</span>  <span>; =&gt; true</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span>$r</span> <span>in</span> <span>&#34;foobar&#34;</span>    <span>; =&gt; true</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span>65</span> <span>in</span> <span>&#34;Alpha&#34;</span>     <span>; =&gt; true</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span>1000</span> <span>in</span> <span>&#34;foobar&#34;</span>  <span>; error: bytes must be between 0–255</span></span></code></pre></div>
                </div>
                <div>
                <p>Cassette has Lisp-style cons pairs, which form linked
                lists. Pairs are formed with the <code>|</code>
                operator, and can be used to easily prepend values to a
                list. <code>nil</code> is the empty list. You can find
                the length of a list, concatenate two lists, and test if
                a value is in a list. Lists can be accessed with an
                integer index.</p><div id="cb5"><pre><code><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>[<span>1</span>, <span>2</span>, <span>3</span>]         <span>; list</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>[<span>1</span>, <span>2</span>, <span>3</span>].<span>2</span>       <span>; =&gt; 3</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>[<span>1</span>, <span>2</span>, <span>3</span>].<span>8</span>       <span>; error: out of bounds</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>[<span>:a</span>, x, <span>42</span>]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span>nil ==</span> []         <span>; =&gt; true</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span>1</span><span> |</span> [<span>2</span>, <span>3</span>, <span>4</span>]     <span>; =&gt; [1, 2, 3, 4]</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span>3</span><span> |</span> <span>nil</span>           <span>; =&gt; [3]</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span>1</span><span> |</span> <span>2</span><span> |</span> <span>3</span><span> |</span> <span>nil</span>   <span>; =&gt; [1, 2, 3]</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span>#</span>[<span>1</span>, <span>2</span>, <span>3</span>]        <span>; =&gt; 3</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span>#nil</span>              <span>; =&gt; 0</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>[<span>1</span>, <span>2</span>]<span> &lt;&gt;</span> [<span>3</span>, <span>4</span>]  <span>; =&gt; [1, 2, 3, 4]</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span>:ok</span> <span>in</span> [<span>:ok</span>, <span>3</span>]   <span>; =&gt; true</span></span></code></pre></div>
                </div>
                <div>
                <p>Cassette has tuples, which are fixed-length arrays of
                values. Tuples are less flexible than lists, but use
                less memory and are a little faster to access. You can
                find the length of a tuple, concatenate two tuples, and
                test if a value is in a tuple. Tuples can be accessed
                with an integer index.</p><div id="cb6"><pre><code><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>{<span>1</span>, <span>2</span>, <span>3</span>}         <span>; tuple</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>{<span>1</span>, <span>2</span>, <span>3</span>}.<span>2</span>       <span>; =&gt; 3</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>{<span>1</span>, <span>2</span>, <span>3</span>}.<span>8</span>       <span>; error: out of bounds</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span>#</span>{<span>1</span>, <span>2</span>, <span>3</span>}        <span>; =&gt; 3</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span>#</span>{}               <span>; =&gt; 0</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>{<span>1</span>, <span>2</span>}<span> &lt;&gt;</span> {<span>3</span>, <span>4</span>}  <span>; =&gt; {1, 2, 3, 4}</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span>&#34;x&#34;</span> <span>in</span> {<span>&#34;y&#34;</span>, <span>&#34;z&#34;</span>} <span>; =&gt; false</span></span></code></pre></div>
                </div>
                <div>
                <p>Cassette has maps (a.k.a. dictionaries), which can be
                written like tuples with symbol keys. Map literals can
                only have symbol keys, but other functions can get and
                set keys of other types. You can find the number of
                key/value pairs in a map, merge two maps, and test if a
                map contains a key.</p><div id="cb7"><pre><code><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>{<span>x:</span> <span>3</span>, <span>y:</span> <span>4</span>}      <span>; a map with keys `:x` and `:y`</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>my_map.x          <span>; =&gt; 3</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>my_map.z          <span>; =&gt; nil</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span>#</span>{<span>x:</span> <span>1</span>, <span>y:</span> <span>2</span>}     <span>; =&gt; 2</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>{<span>x:</span> <span>1</span>, <span>z:</span> <span>4</span>}<span> &lt;&gt;</span> {<span>x:</span> <span>2</span>, <span>y:</span> <span>3</span>}</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                  <span>; =&gt; {x: 2, y: 3, z: 4}</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span>:x</span> <span>in</span> {<span>x:</span> <span>1</span>, <span>y:</span> <span>2</span>}  <span>; =&gt; true</span></span></code></pre></div>
                </div>
                <div>
                <p>Variables are defined with <code>let</code>. A
                <code>do</code> block can introduce a new scope, and can
                be used to combine a group of expressions into one.
                Cassette has lexical scoping. A variable must start with
                a letter or underscore, but may contain any characters
                afterward except for whitespace and these reserved
                characters: <code>;,.:()[]{}</code>. This means that if
                you want to write an infix expression, you must often
                include space around the operator to disambiguate it
                from its operands.</p><div id="cb8"><pre><code><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>x</span> = <span>1</span>, <span>y</span> = <span>2</span>, <span>x-y</span> = <span>3</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span>print</span>(x<span> -</span> y)     <span>; prints &#34;-1&#34;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span>print</span>(x-y)       <span>; prints &#34;3&#34;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span>do</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span>let</span> <span>y</span> = <span>3</span>, <span>z</span> = <span>4</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  x       <span>; =&gt; 1 (from the parent scope)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  y       <span>; =&gt; 3 (shadows the parent `y`)</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  z       <span>; =&gt; 4</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span>end</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>x         <span>; =&gt; 1</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>y         <span>; =&gt; 2</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>z         <span>; error: undefined variable</span></span></code></pre></div>
                </div>
                <div>
                <p>Cassette has <code>if</code>/<code>else</code> blocks
                and <code>cond</code> blocks for conditionals. A
                <code>cond</code> block will evaluate each predicate
                until one is true, then evaluate that clause.</p><div id="cb9"><pre><code><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span>if</span> x<span> ==</span> <span>0</span> <span>do</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span>IO.print</span>(<span>&#34;Uh oh!&#34;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span>:error</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span>else</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span>:ok</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span>end</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span>cond do</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  x<span> &gt;</span> <span>10</span>    <span>-&gt;</span> <span>:ten</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  x<span> &gt;</span> <span>1</span>     <span>-&gt;</span> <span>:one</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span>true</span>      <span>-&gt;</span> <span>:less</span>  <span>; default</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span>end</span></span></code></pre></div>
                </div>
                <div>
                <p>Lambdas can be created with a backslash, argument
                list, and an arrow. The <code>def</code> syntax is
                syntactic sugar for defining a lambda as a variable,
                with the distinction that <code>def</code>-declared
                functions have block scope, so they can be called
                recursively. Functions are called with
                parentheses.</p><div id="cb10"><pre><code><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>foo</span> = <span>\</span><span>x</span> <span>-&gt;</span> x<span> +</span> <span>1</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span>foo</span>(<span>3</span>)            <span>; =&gt; 4</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span>; equivalent, except for scope:</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>foo</span> = <span>\</span><span>x</span> <span>-&gt;</span> x<span> +</span> <span>1</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>foo</span>(<span>x</span>) x<span> +</span> <span>1</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span>; these produce an error, since `b` isn&#39;t defined when the body of `a` is compiled</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>a</span> = <span>\</span><span>x</span> <span>-&gt;</span> <span>b</span>(x<span> *</span> <span>3</span>),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span>b</span> = <span>\</span><span>x</span> <span>-&gt;</span> <span>a</span>(x<span> /</span> <span>2</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span>; these are ok, since `a` and `b` are in scope from the beginning of the block</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>a</span>(<span>x</span>) <span>b</span>(x<span> *</span> <span>3</span>)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>b</span>(<span>x</span>) <span>a</span>(x<span> /</span> <span>2</span>)</span></code></pre></div>
                </div>
                <div>
                <p>Cassette programs can be split up into different
                modules, one per file. Modules can be imported directly
                into a file’s scope, or aliased as a map.</p><div>
                <div id="cb11"><pre><code><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span>; file &#34;foo.ct&#34;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span>module</span> <span>Foo</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span>let</span> <span>pi</span> = <span>3</span>.<span>14</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>bar</span>(<span>x</span>) x<span> +</span> <span>1</span></span></code></pre></div>
                <div id="cb12"><pre><code><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span>; file &#34;main.ct&#34;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>Foo</span>        <span>; imported as a map called `Foo`</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span>Foo.bar</span>(<span>3</span>)        <span>; =&gt; 4</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>Foo.pi            <span>; =&gt; 3.14</span></span></code></pre></div>
                <div id="cb13"><pre><code><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span>; alternative &#34;main.ct&#34;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>Foo</span> <span>as</span> <span>F</span>   <span>; imported as a map called `F`</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span>def</span> <span>bar</span>(<span>x</span>) x<span> +</span> <span>8</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span>bar</span>(<span>3</span>)            <span>; =&gt; 11</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span>F.bar</span>(<span>3</span>)          <span>; =&gt; 4</span></span></code></pre></div>
                <div id="cb14"><pre><code><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span>; alternative &#34;main.ct&#34;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span>import</span> <span>Foo</span> <span>as</span> <span>*</span>   <span>; imported directly into current scope</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span>bar</span>(<span>3</span>)            <span>; =&gt; 4</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>pi                <span>; =&gt; 3.14</span></span></code></pre></div>
                </div>
                </div>
                <h2 id="more-info"><a href="#more-info">More
                Info</a></h2>
                <p>For more information about Cassette, check out some
                of these other documents. Stay tuned for future
                articles.</p>
                <ul>
                <li><a href="https://cassette-lang.com/reference.html">Function Reference</a>: A
                reference of built-in modules and functions</li>
                </ul>
      </article>
    </div></div>
  </body>
</html>
