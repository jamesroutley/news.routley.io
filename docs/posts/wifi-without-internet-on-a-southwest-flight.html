<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jamesbvaughan.com/southwest-wifi/">Original</a>
    <h1>WiFi without internet on a Southwest flight</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>I spent a recent flight finding out what I could do with a connection to the flight’s wifi, but without access to the internet.</p>
<p><img src="https://jamesbvaughan.com/southwest-wifi/flight.jpg" alt="The view from my seat on the flight"/></p>
<p>I was on my way home from Strange Loop, a direct flight from St. Louis to Oakland.
It’s a long enough flight that I planned to purchase the $8 internet access and get some work done, but Southwest’s wifi portal wouldn’t accept any form of payment.
The web page didn’t give me any helpful error messages, so I opened up my browser’s network dev tools to see if I could figure out what was going wrong.</p>
<p>I found the failing request, but it didn’t provide any useful hints to point me toward a solution.
While I was there, I saw another request that caught my eye: A repeating successful request for <code>current.json</code>.</p>
<p><img src="https://jamesbvaughan.com/southwest-wifi/current-json-requests.jpg" alt="A screenshot showing requests for current.json in my browser"/></p>
<p>Here’s an example response from one of those requests:</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>&#34;sat_commlink_portal&#34;</span>: {
</span></span><span><span>    <span>&#34;status&#34;</span>: <span>&#34;conn_ok&#34;</span>,
</span></span><span><span>    <span>&#34;time&#34;</span>: <span>&#34;Sun Sep 24 22:02:19 2023&#34;</span>
</span></span><span><span>  },
</span></span><span><span>  <span>&#34;pcent_flt_complete&#34;</span>: <span>33</span>,
</span></span><span><span>  <span>&#34;altVal&#34;</span>: <span>&#34;35998&#34;</span>,
</span></span><span><span>  <span>&#34;lon&#34;</span>: <span>&#34;-100.755&#34;</span>,
</span></span><span><span>  <span>&#34;satcomm_status&#34;</span>: {
</span></span><span><span>    <span>&#34;commlink&#34;</span>: <span>&#34;active&#34;</span>,
</span></span><span><span>    <span>&#34;linkparams&#34;</span>: <span>&#34;not-stale&#34;</span>
</span></span><span><span>  },
</span></span><span><span>  <span>&#34;dtzone&#34;</span>: <span>&#34;PDT&#34;</span>,
</span></span><span><span>  <span>&#34;within_us&#34;</span>: <span>true</span>,
</span></span><span><span>  <span>&#34;etad&#34;</span>: <span>&#34;06:19 PM&#34;</span>,
</span></span><span><span>  <span>&#34;lat&#34;</span>: <span>&#34;40.201&#34;</span>,
</span></span><span><span>  <span>&#34;gspdVal&#34;</span>: <span>&#34;487&#34;</span>,
</span></span><span><span>  <span>&#34;ttgc&#34;</span>: <span>&#34;2h 25m&#34;</span>,
</span></span><span><span>  <span>&#34;dist_remain&#34;</span>: <span>&#34;1167&#34;</span>,
</span></span><span><span>  <span>&#34;actime24&#34;</span>: <span>&#34;15:54&#34;</span>
</span></span><span><span>}
</span></span></code></pre></div><p>This appeared to be the data that drives the in-flight wifi portal’s flight status page.
Since this was one of the only things I could access on this network, I decided to make the most of it.</p>
<p>I used my browser’s “Copy as cURL” feature to quickly get a command to hit the endpoint.
As an aside, this feature is present in Firefox and all chromium-based browsers and it’s really handy if you ever need to reply requests made by your browser and want to send all the same headers.</p>
<p><img src="https://jamesbvaughan.com/southwest-wifi/copy-as-curl.jpg" alt="A screenshot showing where the “Copy as cURL” option is"/></p>
<p>After some experimenting, I found that none of the cookies or headers that were included in the request were strictly necessary, meaning that I could fetch the data with a simple <code>curl &#39;https://getconnected.southwestwifi.com/current.json&#39;</code>.
I set up a loop to dump the data in a log file:</p>
<div><pre tabindex="0"><code data-lang="bash"><span><span>watch -n <span>30</span> <span>&#34;curl https://getconnected.southwestwifi.com/current.json | jq -c &gt;&gt; flight-logs&#34;</span>
</span></span></code></pre></div><p>I didn’t know what I’d do with the data at this point, but I started collecting it right away so that I’d have as much as possible to play with later.</p>
<p>With that running, I decided to look more closely at the responses to figure out what exactly I had to work with.
Here’s that same example response, annotated with my best guess at what the fields represent:</p>
<div><pre tabindex="0"><code data-lang="json"><span><span>{
</span></span><span><span>  <span>// This looks like info about the system&#39;s satellite internet connection.
</span></span></span><span><span><span></span>  <span>&#34;sat_commlink_portal&#34;</span>: {
</span></span><span><span>    <span>// The connection is okay!
</span></span></span><span><span><span></span>    <span>&#34;status&#34;</span>: <span>&#34;conn_ok&#34;</span>,
</span></span><span><span>    <span>// I&#39;m not sure what this time is.
</span></span></span><span><span><span></span>    <span>// It hasn&#39;t changed at all.
</span></span></span><span><span><span></span>    <span>&#34;time&#34;</span>: <span>&#34;Sun Sep 24 22:02:19 2023&#34;</span>
</span></span><span><span>  },
</span></span><span><span>
</span></span><span><span>  <span>// The percentage progress of the current flight.
</span></span></span><span><span><span></span>  <span>// I don&#39;t know if this is in terms of distance or in terms of the estimated
</span></span></span><span><span><span></span>  <span>// lenght of time.
</span></span></span><span><span><span></span>  <span>&#34;pcent_flt_complete&#34;</span>: <span>33</span>,
</span></span><span><span>
</span></span><span><span>  <span>// The current altitude.
</span></span></span><span><span><span></span>  <span>&#34;altVal&#34;</span>: <span>&#34;35998&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// The current coordinates.
</span></span></span><span><span><span></span>  <span>&#34;lat&#34;</span>: <span>&#34;40.201&#34;</span>,
</span></span><span><span>  <span>&#34;lon&#34;</span>: <span>&#34;-100.755&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// This looks like (more?) info about the system&#39;s satellite internet connection.
</span></span></span><span><span><span></span>  <span>&#34;satcomm_status&#34;</span>: {
</span></span><span><span>    <span>// The connection is active!
</span></span></span><span><span><span></span>    <span>&#34;commlink&#34;</span>: <span>&#34;active&#34;</span>,
</span></span><span><span>    <span>// Something isn&#39;t stale!
</span></span></span><span><span><span></span>    <span>&#34;linkparams&#34;</span>: <span>&#34;not-stale&#34;</span>
</span></span><span><span>  },
</span></span><span><span>
</span></span><span><span>  <span>// This flight&#39;s destination timezone is PDT.
</span></span></span><span><span><span></span>  <span>&#34;dtzone&#34;</span>: <span>&#34;PDT&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// This flight is within the US.
</span></span></span><span><span><span></span>  <span>&#34;within_us&#34;</span>: <span>true</span>,
</span></span><span><span>
</span></span><span><span>  <span>// Our estimated time of arrival at the destination.
</span></span></span><span><span><span></span>  <span>&#34;etad&#34;</span>: <span>&#34;06:19 PM&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// Our current ground speed.
</span></span></span><span><span><span></span>  <span>&#34;gspdVal&#34;</span>: <span>&#34;487&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// The estimated time remaning. Maybe &#34;time-to-ground-contact&#34;?
</span></span></span><span><span><span></span>  <span>&#34;ttgc&#34;</span>: <span>&#34;2h 25m&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// The flight&#39;s remaining distance in miles.
</span></span></span><span><span><span></span>  <span>&#34;dist_remain&#34;</span>: <span>&#34;1167&#34;</span>,
</span></span><span><span>
</span></span><span><span>  <span>// The current time in some time zone.
</span></span></span><span><span><span></span>  <span>&#34;actime24&#34;</span>: <span>&#34;15:54&#34;</span>
</span></span><span><span>}
</span></span></code></pre></div><p>Most of that is straightforward, but I’m curious about a few parts:</p>
<ul>
<li>What’s the difference between <code>sat_commlink_portal.status</code> and <code>satcomm_status.commlink</code>?</li>
<li>Is <code>pcent_flt_complete</code> in terms of distance or in terms of estimated time?</li>
<li>How much with <code>altVal</code>, <code>etad</code>, and <code>gspdVal</code> fluctuate throughout the flight?</li>
<li>What is the <code>ac</code> in <code>actime24</code>? I would think “aircraft”, but in this case that time is the current time in our destination, not the current time in the aircraft’s location.</li>
</ul>
<p>I spent the flight working on some scripts that could visualize some of the data
after I finished collecting it.
Here’s what I came up with:</p>
<h2 id="change-in-altitude-over-time">Change in altitude over time</h2>
<p>Going into this, I was mostly curious to see how noisy the altitude data would be.</p>
<canvas id="altitude-chart-canvas" role="img" aria-label="Flight altitude chart" width="720" height="360">
  You should see a chart visualizing the flight&#39;s altitude over time here.
</canvas>

<p>It’s difficult to see the noise with such a large range.
Here’s the same data, but with the plane’s descent removed:</p>
<canvas id="cropped-altitude-chart-canvas" role="img" aria-label="Flight altitude chart (cropped)" width="720" height="360">
  You should see a chart visualizing the flight&#39;s altitude over time here.
</canvas>

<p>According to this data, the plane’s altitude was only fluctuating by about 20-30 feet.
This is more stable than I expected!
I had assumed that I’d see a lot more change here, but I don’t know what’s normal and I don’t know how accurate this data is.</p>
<h2 id="change-in-eta-over-time">Change in ETA over time</h2>
<p>I predicted that this would be reasonably stable, and it was.
This was a pretty smooth flight, at least after the initial departure.</p>
<canvas id="eta-chart-canvas" role="img" aria-label="ETA chart" width="720" height="360">
  You should see a chart visualizing the flight&#39;s change ETA over time here.
</canvas>

<p>I’m curious what this would have looked like if we had a delayed landing due to weather.
Would the reported ETA slowly creep up as the airline’s confidence in the delay increased, or would it spike up sharply near the end?</p>
<h2 id="change-in-ground-speed-over-time">Change in ground speed over time</h2>
<p>This was also stable, as expected.</p>
<canvas id="ground-speed-chart-canvas" role="img" aria-label="Ground speed chart" width="720" height="360">
  You should see a chart visualizing the flight&#39;s ground speed over time here.
</canvas>

<p><em>edit: I originally labeled these speeds as MPH, but <a href="https://news.ycombinator.com/item?id=37691582">some HN readers helpfully pointed out that these are more likely to be knots</a>.</em></p>
<p>I wish I had started collecting the data earlier in the flight.
I’m curious to see shape of this curve as we approached cruising speed.</p>
<hr/>
<p>I didn’t find anything particularly useful or surprising here, but this was a fun way to spend the flight!</p>

  </div></div>
  </body>
</html>
