<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.infoq.com/news/2023/10/cloudflare-sippy-migrate-s3/">Original</a>
    <h1>Cloudflare Sippy: Incrementally Migrate Data from AWS S3 to Reduce Egress Fees</h1>
    
    <div id="readability-page-1" class="page"><div>
								<p>Cloudflare recently announced the<a href="https://blog.cloudflare.com/sippy-incremental-migration-s3-r2/"> open beta of Sippy</a>, an incremental data migration service that copies data from Amazon S3 to Cloudflare R2 only the first time the data is requested. Sippy is designed to minimize migration-specific egress fees by leveraging requests within existing application flows while simultaneously copying objects to R2.</p>

<p>Earlier this year, Cloudflare announced <a href="https://www.infoq.com/news/2022/11/cloudflare-r2-super-slurper/">Super Slurper</a>, a data migration tool to copy large amounts of data from other object storage providers to Cloudflare R2. The new option targets scenarios where developers want to move only accessed data. <a href="https://www.linkedin.com/in/phillipdjones/">Phillip Jones</a>, senior product manager at Cloudflare, and <a href="https://www.linkedin.com/in/vlad-krasnov-2a00a666/">Vlad Krasnov</a>, principal system engineer at Cloudflare, explain the benefits of Sippy over the existing Super Slurper:</p>

<blockquote>
<p>While Super Slurper is perfect for cases where you want to move all of your data to R2 at once, there are scenarios where you may want to migrate your data incrementally over time. Maybe you want to avoid the one-time upfront AWS data transfer bill? Or perhaps you have legacy data that may never be accessed, and you only want to migrate what’s required?</p>
</blockquote>

<p>The new option acts as a middle layer between the client and the source object storage: when an object is requested from Workers, S3 API, or a public bucket, it is served from <a href="https://developers.cloudflare.com/r2">Cloudflare R2</a> if it is found. If not, the object will be returned from the source S3 bucket and copied simultaneously to R2. All other operations on R2, including put and delete, continue to work. Jones and Krasnov add:</p>

<blockquote>
<p>On top of addressing vendor lock-in, Sippy makes stressful, time-consuming migrations a thing of the past. All you need to do is replace the S3 endpoint in your application or attach your domain to your new R2 bucket and data will start getting copied over.</p>
</blockquote>

<p>The <a href="https://developers.cloudflare.com/r2/data-migration/sippy/">documentation</a> shows how to enable Sippy for an existing R2 bucket with <em>cURL</em>:</p>

<pre><code>curl -X PUT https://api.cloudflare.com/client/v4/accounts/{account_id}/r2/buckets/{bucket_name}/sippy \
--header &#34;Authorization: Bearer &lt;API_TOKEN&gt;&#34; \
--data &#39;{&#34;provider&#34;: &#34;AWS&#34;, &#34;bucket&#34;: &#34;&lt;AWS_BUCKET_NAME&gt;&#34;, &#34;zone&#34;: &#34;&lt;AWS_REGION&gt;&#34;,&#34;key_id&#34;: &#34;&lt;AWS_ACCESS_KEY_ID&gt;&#34;, &#34;access_key&#34;:&#34;&lt;AWS_SECRET_ACCESS_KEY&gt;&#34;, &#34;r2_key_id&#34;: &#34;&lt;R2_ACCESS_KEY_ID&gt;&#34;, &#34;r2_access_key&#34;: &#34;&lt;R2_SECRET_ACCESS_KEY&gt;&#34;}&#39;</code></pre>

<p>Cloudflare plans on making incremental migration configurable from the dashboard and providing analytics showing the progress of the migration and how much has been saved on egress fees for objects that have been copied over.</p>

<p>Sippy is currently in open beta and supports only Amazon S3 as a migration source. During the <a href="https://blog.cloudflare.com/birthday-week-2023-wrap-up/">Birthday Week</a>, the connectivity company made other announcements that target migrations from what Cloudflare calls &#34;legacy cloud providers&#34;: <a href="https://blog.cloudflare.com/amazon-2bn-ipv4-tax-how-avoid-paying/">how to avoid paying Amazon’s IPv4 tax</a>, the general availability of <a href="https://www.infoq.com/news/2023/10/cloudflare-turnstile-ga-free/">Turnstile</a>, a reCAPTCHA alternative, and <a href="https://www.infoq.com/news/2023/10/cloudflare-hyperdrive-postgres/">Hyperdrive</a>, a service that accelerates SQL queries reducing the load and cost on cloud-managed databases.</p>

								









  
    

							</div></div>
  </body>
</html>
