<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://thewebivore.com/using-object-fromentries-to-make-a-new-object/">Original</a>
    <h1>Using Object.fromEntries to make a new Object</h1>
    
    <div id="readability-page-1" class="page"><article id="post-1285">

		
		<div>
				<header>
		
		
	</header>
		    <div>
			    <p>Creating a new object from an existing one, or from an array, can have multiple solutions in JavaScript. I ran into a scenario where I had an object where the values are an array. I wanted to take this and create a new object (so I could store state related to the keys), so I wanted to dump the values and replace them for something else.</p>
<p>Start:</p>
<pre>const obj = { &#34;a&#34; : [1,2,3], &#34;b&#34;: [1,2,3] }</pre>
<p>Destination:</p>
<pre>const newObj = { &#34;a&#34; : &#34;val&#34;, &#34;b&#34;: &#34;val&#34; }</pre>
<p>The values could be whatever, the point is to take the keys and then a different set of values.</p>
<p>I can do this with brute force by enumerating over the keys in the object and assigning them to a new one:</p>
<pre>let newObj = {}</pre>
<p>However, for…in isn’t recommended by various guides/linters. Here’s some notes from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in">MDN</a>:</p>
<blockquote>
<p>Many JavaScript style guides and linters recommend against the use of <code>for...in</code>, because it iterates over the entire prototype chain which is rarely what one wants, and may be a confusion with the more widely-used <code>for...of</code> loop. <code>for...in</code> is most practically used for debugging purposes, being an easy way to check the properties of an object (by outputting to the console or otherwise). In situations where objects are used as ad hoc key-value pairs, <code>for...in</code> allows you check if any of those keys hold a particular value.</p>
</blockquote>
<p>There’s a newer (ES2019) utility, Object.fromEntries, which takes an iterable (arrays, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Maps</a>, but not an Object that you haven’t implemented an iterator on…) that can be used here:</p>
<pre>Object.fromEntries(Object.keys(obj).map(x =&gt; [x, &#34;foo&#34;]))</pre>
<p>To break it down:</p>
<pre>// create an object from the provided entries. cool cool.
<strong>Object.fromEntries</strong>(Object.keys(obj).map(x =&gt; [x, &#34;val&#34;]))</pre>
<pre>// give me the keys of the obj Object; [&#34;a&#34;, &#34;b&#34;]
Object.fromEntries(<strong>Object.keys(obj)</strong>.map(x =&gt; [x, &#34;val&#34;]))</pre>
<pre>// take those keys and make tuples; [ [&#34;a&#34;, &#34;val&#34; ], [&#34;b&#34;, &#34;val&#34; ] ]
Object.fromEntries(Object.keys(obj).<strong>map(x =&gt; [x, &#34;val&#34;]</strong>))</pre>
<p>To get to our result of</p>
<pre>{ a: &#34;val&#34;, b: &#34;val&#34; }</pre>
<p>Writing it out, I’m hoping to understand this more so I can understand it quickly when I see it. But I found it neat to stumble on a new-to-me utility.</p>
		    </div><!-- .entry-content -->

			
				<!-- .entry -->
			</div>

	</article></div>
  </body>
</html>
