<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/1017720/7155ecb9602e9ef2/">Original</a>
    <h1>A kernel developer plays with Home Assistant</h1>
    
    <div id="readability-page-1" class="page"><p>

<h2>[LWN subscriber-only content]</h2>
</p><div>
<p>
Those of us who have spent our lives playing with computers naturally see
the appeal of deploying them though the home for both data acquisition and
automation.  But many of us who have watched the evolution of the
technology industry are increasingly unwilling to entrust critical
household functions to cloud-based servers run by companies that may not
have our best interests at heart.  The Apache-licensed <a href="https://www.home-assistant.io/">Home Assistant</a> project offers a
welcome alternative: locally controlled automation with free software.
This two-part series covers roughly a year of Home Assistant use, starting
with a set of overall observations about the project.
</p><p>
This is not the first time that LWN has looked at this project, of course;
<a href="https://lwn.net/Articles/822350/">this review</a> gives a snapshot of what Home
Assistant looked like five years ago, while <a href="https://lwn.net/Articles/947843/">this 2023 article</a> gives a good overview of the
project&#39;s history, governance, and overall direction.  I will endeavor to
not duplicate that material here.
</p><h4>Project health</h4>
<p>
At a first glance, Home Assistant bears some of the hallmarks of a
company-owned project.  The company in question, <a href="https://www.nabucasa.com/">Nabu Casa</a>, was formed around the
project and employs a number of its key developers.  One of the ways in
which the company makes money is with a $65/year subscription service, providing
remote access to Home Assistant servers installed on firewalled residential
networks.  Home Assistant has support for that remote option, and no
others.  It would be interesting to see what would happen to a pull request
adding support for, say, <a href="https://opensprinklershop.de/en/2023/01/22/opensprinkler-fernzugriff-mit-openthings-cloud-otc-token/">OpenThings
Cloud</a> as an alternative.  The fate of that request would say a lot
about how open the project really is.
</p><blockquote>
LWN.net is able to bring you articles like this one because of our
generous subscribers. If you want to see more like it, consider taking
advantage of our special offer: <a href="https://lwn.net/Promo/daroc1/claim">1 month trial subscription</a>
</blockquote>
<p>
(For the record, I have bought the Nabu Casa subscription rather than, say,
using WireGuard to make a port available on an accessible system; it is a
hassle-free way to solve the problem and support the development of this
software).
</p><p>
That said, most of the warning signs that accompany a corporate-controlled
project are not present with Home Assistant.  The project&#39;s <a href="https://github.com/home-assistant/core/blob/dev/CLA.md">contributor
license agreement</a> is a derivative of the kernel&#39;s developer certificate
of origin; contributors retain their copyright on their work.  Since the <a href="https://www.home-assistant.io/blog/2024/04/03/release-20244/">2024.4
release</a>, the Home Assistant core repository has acquired over 17,000
changesets from over 900 contributors.  While a number of Nabu Casa
employees (helpfully listed on <a href="https://www.nabucasa.com/about/">this page</a>) appear in the top ten
contributors, they do not dominate that list.
</p><p>
Home Assistant is clearly an active project with a wide developer base.  In
2024, overall responsibility for this project was transferred to <a href="https://www.openhomefoundation.org/blog/announcing-the-open-home-foundation/">the
newly created Open Home Foundation</a>.  This project is probably here to
stay, and seems unlikely to take a hostile turn in the future.  For a
system that sits at the core of one&#39;s home, those are important
characteristics.
</p><h4>Installation and setup</h4>
<p>
Linux users tend to be somewhat spoiled; installing a new application is
typically a matter of a single package-manager command.  Home Assistant
does not really fit into that model.  The first three options on <a href="https://www.home-assistant.io/installation/">the installation
page</a> involve dedicated computers — two of which are sold by Nabu Casa.
For those wanting to install it on a general-purpose computer, the
recommended course is to install the <a href="https://github.com/home-assistant/operating-system">Home Assistant
Operating System</a>, a bespoke Linux distribution that runs Home Assistant
within a Docker container.  There is also a container-based method that can
run on another distribution, but this installation does not support <a href="https://www.home-assistant.io/addons/">the add-ons feature</a>.
</p><p>
Home Assistant, in other words, is not really set up to be just another
application on a Linux system.  If one scrolls far enough, though, one will
find, the instructions to install onto a &#34;normal&#34; Linux system, suitably
guarded with warnings about how it is an &#34;<q>advanced</q>&#34; method.
Of course, that is what I did, putting the software onto an existing system
running Fedora.  The whole thing subsequently broke when a
distribution upgrade replaced Python, but that was easily enough repaired.
As a whole, the installation has worked as expected.
</p><p>
Out of the box, though, a new Home Assistant installation does not do much.
Its job, after all, is to interface with the systems throughout the house,
and every house is different.  While Home Assistant can find some systems
automatically (it found the Brother printer and dutifully informed me that
the device was, inevitably, low on cyan toner), it usually needs to be
told about what is installed in the house.  Thus, the user quickly delves
into the world of &#34;integrations&#34; — the device drivers of Home Assistant.
</p><p>
For each remotely accessible device in the house, there is, hopefully, at
least one integration available that allows Home Assistant to work with it.
Many integrations are packaged with the system itself, and can be found by
way of a simple search screen in the Home Assistant web interface.  A much
larger set is packaged separately, usually in the <a href="https://www.hacs.xyz/">Home Assistant Community Store</a>, or HACS;
it is fair to say that most users will end up getting at least some
integrations from this source.  Setting up HACS requires a few steps and,
unfortunately, requires the user to have a GitHub account for full
integration.  It <i>is</i> possible to install HACS integrations without
that account, but it is a manual process that loses support for features
like update tracking.
</p><p>
Most integrations, at setup time, will discover any of the appropriate
devices on the network — if those devices support that sort of discovery,
of course.  Often, using an integration will require the credentials to log
into the cloud account provided by the vendor of the devices in question.
When possible, integrations mostly strive to operate entirely locally; some
only use the cloud connection for the initial device discovery.  When there
is no alternative, though, integrations will remain logged into the cloud
account and interact with their devices that way; this mode may or may not
be supported (or condoned) by the vendor.  There are, of course, some
vendors that <a href="https://www.bleepingcomputer.com/news/security/haier-hits-home-assistant-plugin-dev-with-takedown-notice/">are
actively hostile</a> to integration with Home Assistant.
</p><p>
As might be expected, the quality of integrations varies widely.  Most of
the integrations I have tried have worked well enough.  The OpenSprinkler
(<a href="https://lwn.net/Articles/940509/">reviewed here</a> in 2023) integration,
instead, thoroughly corrupted the device configuration, exposing me to the
shame of being seen with a less-than-perfect lawn; it was quickly
removed.  It is an especially nice surprise when a device comes with Home
Assistant support provided by the vendor, but that is still a relatively
rare occurrence.  Home Assistant now is in a position similar to Linux
25 years ago; many devices are supported, but often in spite of their
vendor, and one has to choose components carefully.
</p><h4>Security</h4>
<p>
Home Assistant sits at the core of the home network; it has access to
sensors that can reveal a lot about the occupants of the home, and it
collects data in a single location.  An installation will be exposed to the
Internet if its owner needs remote access.  There is clearly potential for
a security disaster here.
</p><p>
The project has <a href="https://www.home-assistant.io/security/">a posted
security policy</a> describing the project&#39;s stance; it asks for a 90-day
embargo on the reporting of any security issues.  Authors writing about the
project&#39;s security are encouraged to run their work past the project &#34;<q>so
we can ensure that all claims are correct</q>&#34;.  The security policy
explicitly excludes reports regarding third-party integrations (the core
project cannot fix those, after all).  The project is also uninterested in
any sort of privilege escalation by users who are logged into Home
Assistant, assuming that anybody who has an account is fully trusted.
</p><p>
The project has only issued <a href="https://github.com/home-assistant/core/security/advisories/GHSA-m3pm-rpgg-5wj6">one
security advisory</a> since the beginning of 2024.  There were several in
2023, mostly as the result of <a href="https://github.blog/security/vulnerability-research/securing-our-home-labs-home-assistant-code-review/">a
security audit</a> performed by GitHub.
</p><p>

There is no overall vetting of third-party integrations, which are, in the
end, just more Python code.  So loading an unknown integration is similar
to importing an unknown module from PyPI; it will probably work, but the
potential for trouble is there.  The project has occasionally <a href="https://www.home-assistant.io/blog/2021/01/23/security-disclosure2/">reported
security problems in third-party integrations</a>, but such reports are
rare.  I am unable to find any reports of actively malicious integrations
in the wild, but one seems destined to appear sooner or later.
</p><h4>Actually doing something with Home Assistant</h4>
<p>
The first step for the owner of a new Home Assistant installation is,
naturally, to seek out integrations for the devices installed in the home.
On successful installation and initialization, an integration will add one
or more &#34;devices&#34; to the system, each of which has some number of &#34;sensors&#34;
for data it reports, and possible &#34;controls&#34; to change its operating state.
A heat-pump head, for example, may have sensors for the current temperature
and humidity, and controls for its operating mode, fan speed, vane
direction, and more.
</p><p>
It is worth noting that the setup of these entities seems a bit
non-deterministic at times.  My solar system has 22 panels with
inverters, each of which reports nearly a dozen parameters (voltage,
current, frequency, temperature, etc.).  There is no easy way to determine
which panel is reporting, for example, <tt>sensor_amps_12</tt>, especially
since <tt>sensor_frequency_12</tt> almost certainly corresponds to a
<i>different</i> panel.  My experience is that Home Assistant is a system
for people who are willing to spend a lot of time fiddling around with
things to get them to a working state.  Dealing with these sensors was an
early introduction to that; it took some time to figure out the mapping
between names and rooftop positions, then to rename each sensor to
something more helpful.
</p><p>
The next level of fiddling around is setting up dashboards.  Home Assistant
offers a great deal of flexibility in the information and controls it
provides to the user; it is possible to set up screens focused on, say,
energy production or climate control.  Happily, the days when this
configuration had to be done by writing YAML snippets are mostly in the
past at this point; one occasionally still has to dip into YAML, but it
does not happen often.  The interface is not always intuitive,
but it is fairly slick, interactive, and functional.
</p><p>
Another part of Home Assistant that I have not yet played with much
is automations and scenes.  Automations are simple rule-triggered programs
that make changes to some controls.  They can carry out actions like
&#34;turn on the front light when it gets dark&#34; or &#34;play scary music if
somebody rings the doorbell and nobody is home&#34;.  Scenes are sets of canned
device configurations.  One might create a scene called &#34;in-laws visiting&#34;
that plays loud punk music, sets the temperature to just above freezing,
disables all voice control, and tunes all of the light bulbs to 6000K, for
example.
</p><p>
The good news is that, unless the fiddling itself is the point (and it can
be a good one), there comes a time when things just work and the fiddling
can stop.  A well-configured Home Assistant instance provides detailed
information about the state of the home — and control where the devices
allow it — to any web browser that can reach it and log in.  There are
(open-source) apps that bring this support to mobile devices in a way that
is nearly indistinguishable from how the web interface works.
</p><p>
All told, it is clear why Home Assistant has a strong and growing
following.  It is an open platform that brings control to an industry that
is doing its best to keep a firm grasp on our homes and the data they
create.  Home Assistant shows that we can do nicely without all of these
fragile, non-interoperable, rug-pull-susceptible cloud systems.  Just like
Linux proved that we can have control over our computers, Home Assistant
shows that we do not have to surrender control over our homes.
</p><p>
This article has gotten long, and is remarkably short on interesting things
that one can actually <i>do</i> with Home Assistant.  There are some
interesting stories to be told along those lines; they will appear shortly
in <a href="https://lwn.net/Articles/1017945/">the second, concluding part</a> of this series.<br clear="all"/></p>
               </div></div>
  </body>
</html>
