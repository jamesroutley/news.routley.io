<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://developer.chrome.com/blog/spa-view-transitions-land/">Original</a>
    <h1>SPA view transitions land in Chrome 111</h1>
    
    <div id="readability-page-1" class="page"><div><p>The View Transition API lets you update the DOM in a single step, while generating an animated transition between the two states.</p><figure><video playsinline="" muted="" loop="" controls="" autoplay=""> <source type="video/mp4" src="https://storage.googleapis.com/web-dev-uploads/video/CZmpGM8Eo1dFe0KNhEO9SGO8Ok23/hgnJfPFUbGlucFegEEtl.mp4"/> </video><figcaption>Transitions created with the View Transition API. <a href="https://http203-playlist.netlify.app/">Try the demo site</a>–Requires Chrome 111+.</figcaption></figure><div><p>In our efforts to work on future enhancements to this feature, we broke it in Chrome Canary. Oops! But hey, that&#39;s what Canary&#39;s for. If you want to try view transitions today, use stable Chrome 111, or beta Chrome 112.</p></div><p>These kinds of transitions were a frequently-requested feature from developers, including me, and I think we&#39;ve managed to land it in a way that balances good defaults with extensibility and customization. That sounds like we&#39;re patting ourselves on the back, but <a href="https://twitter.com/DavidKPiano/status/1428043899482824710">developer</a> <a href="https://twitter.com/jods16/status/1428434783441494023">feedback</a> was key to the design of this feature. <a href="https://github.com/WICG/view-transitions/tree/92ea1f3e8cd5e16099b288838644d04c6cb08b61">An earlier prototype</a> of this feature was much less flexible, and folks (like you?) who took the time to play with the prototypes and provide feedback triggered a total rethink. Thank you!</p><p>To get to grips with the feature, and play with some demos, <a href="https://developer.chrome.com/docs/web-platform/view-transitions/">check out our guide</a>. If there&#39;s something you feel isn&#39;t covered there, please <a href="https://twitter.com/jaffathecake">reach out to me on Twitter</a>, <a href="https://mastodon.social/@jaffathecake">Mastodon</a>, or <a href="mailto:view-transitions-api@chromium.org">via email</a>.</p><p>The View Transition API is currently only available in Chrome; thankfully it can be used as a progressive enhancement. The guide includes <a href="https://developer.chrome.com/docs/web-platform/view-transitions/#not-a-polyfill">a helper function</a> that you can use across browsers, but only browsers that support view transitions will get the animation.</p><p>We <a href="https://drafts.csswg.org/css-view-transitions-1/">developed this feature within the CSS Working Group</a>, with input from other browser vendors and independents. We don&#39;t know if or when other browsers will adopt View Transitions, but keep an eye on <a href="https://github.com/mozilla/standards-positions/issues/677">Mozilla&#39;s standards position</a>, and <a href="https://github.com/WebKit/standards-positions/issues/48">WebKit&#39;s standards position</a>.</p><h2 id="but-were-not-done-yet" tabindex="-1"><a href="#but-were-not-done-yet" aria-hidden="true">#</a> But, we&#39;re not &#39;done&#39; yet!</h2><p>The functionality landing in Chrome 111 is just the first release. We hope we&#39;ve already found all the bugs, but please file any issues you find at <a href="http://crbug.com/new">crbug.com</a>, preferably with a reduced demo. If that&#39;s not something you&#39;re familiar or comfortable with, <a href="https://twitter.com/jaffathecake">reach out to me on Twitter</a>, <a href="https://mastodon.social/@jaffathecake">Mastodon</a> or <a href="mailto:view-transitions-api@chromium.org">via email</a>, and I&#39;ll help.</p><p>This release is a small-but-hopefully-useful part of a bigger picture. We&#39;ve already sketched some extensions to this feature to ensure the parts we&#39;re shipping today are future-compatible.</p><p>Here&#39;s a sneak preview of what we&#39;re thinking. These aren&#39;t in priority order (well, maybe the first one is the most important for a lot of folks), so we&#39;d love feedback on which additions are the most important to you.</p><h3 id="transitions-across-documents" tabindex="-1"><a href="#transitions-across-documents" aria-hidden="true">#</a> Transitions across documents</h3><p>This is the one I think most developers want us to work on next, and the good news is that we&#39;re already working on it!</p><p>The View Transitions API was designed so it can work across same-origin documents. The only difference is, instead of <code>startViewTransition</code> signaling the DOM state change, the navigation itself will signal that change.</p><p>Our prototype of this behind the <code>chrome://flags/#view-transition-on-navigation</code> flag. Here&#39;s a <a href="https://simple-set-demos.glitch.me/mpa/">super-simple demo</a>, and a <a href="https://deploy-preview-28--http203-playlist.netlify.app/">more complex demo</a>.</p><p>To move this forward we need to figure out how each page opts into the transition. Right now we&#39;re using a meta tag: <code>&lt;meta name=&#34;view-transition&#34; content=&#34;same-origin&#34;&gt;</code>, but we think CSS is a better place for this. We also want to make it easier to know what kind of page you&#39;re transitioning from, preferably without needing to write JavaScript.</p><p>There&#39;s lots of work to do, and we&#39;d rather land it &#39;right&#39; than &#39;fast&#39;, but it&#39;s definitely a priority for us.</p><h3 id="compositor-driven-animations" tabindex="-1"><a href="#compositor-driven-animations" aria-hidden="true">#</a> Compositor-driven animations</h3><p>We chose to animate width and height on transition groups by default because it&#39;s much easier to customize. However, this means the animation runs on the main thread, which isn&#39;t ideal, particularly during page loads.</p><p>We plan to detect the default animations and common customizations, then reinterpret them as compositor-driven animations for a nice performance boost.</p><h3 id="scoped-transitions" tabindex="-1"><a href="#scoped-transitions" aria-hidden="true">#</a> Scoped transitions</h3><p>Right now, SPA transitions are scoped to the whole document, and only one transition can run at a time. We want to introduce a feature that allows transitions to be scoped to a particular element so that multiple page components can run transitions independently.</p><p>This would allow, say, an embedded video player to use view transitions, at the same time as an embedded chat widget.</p><h3 id="nested-transition-groups" tabindex="-1"><a href="#nested-transition-groups" aria-hidden="true">#</a> Nested transition groups</h3><p>Right now, all <code>::view-transition-group</code>s are siblings. This is often a good thing, as it allows views to transition from one container to another, and you don&#39;t have to worry about clipping.</p><p>However, sometimes you want a view to be clipped by some parent, which may also be involved in the transition.</p><p>We want to investigate an opt-in that places a particular <code>::view-transition-group</code> within another <code>::view-transition-group</code>.</p><h3 id="classes-of-transitions" tabindex="-1"><a href="#classes-of-transitions" aria-hidden="true">#</a> Classes of transitions</h3><p>Each <code>view-transition-name</code> must be unique. That&#39;s how we identify that a particular element is conceptually &#34;the same&#34; on either side of the DOM change, even if it isn&#39;t literally the same element.</p><p>However, sometimes things with different <code>view-transition-name</code>s should use the same kind of animation. Right now, this means adding a selector rule for every <code>view-transition-name</code>.</p><p>We&#39;d like to add a way to create <a href="https://github.com/w3c/csswg-drafts/issues/8319">classes of transitions</a> to overcome this limitation.</p><h3 id="ignore-offscreen-elements" tabindex="-1"><a href="#ignore-offscreen-elements" aria-hidden="true">#</a> Ignore offscreen elements</h3><p>If you give an element a <code>view-transition-name</code>, it will be involved in the transition as its own group. Sometimes this isn&#39;t ideal. For example, if you give a header a <code>view-transition-name</code>, and you go from a state where you&#39;re scrolled down by 2000 pixels, to a state at the top of the page, the header will animate from 2000 pixels away, which feels wrong in terms of timing.</p><p>Instead, we&#39;d like to add an opt-in where <a href="https://github.com/w3c/csswg-drafts/issues/8282">an element will be ignored</a>, as if it doesn&#39;t have a <code>view-transition-name</code>, if it&#39;s entirely outside the viewport.</p><p>You can already do this with JavaScript by dynamically setting <code>style.viewTransitionName</code>, but it feels like we should have a declarative solution for this.</p><h3 id="requestanimationframe-driven-animations" tabindex="-1"><a href="#requestanimationframe-driven-animations" aria-hidden="true">#</a> requestAnimationFrame-driven animations</h3><p>You can already <a href="https://developer.chrome.com/docs/web-platform/view-transitions/#animating-with-javascript">create view transition animations with JavaScript</a> via the <a href="https://developer.mozilla.org/docs/Web/API/Web_Animations_API">web animations API</a>, but sometimes you need to drive things frame-by-frame with <code><a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame">requestAnimationFrame</a></code>.</p><p>You can already do that, but it&#39;s a bit hacky. <a href="https://simple-set-demos.glitch.me/raf/">Here&#39;s a demo</a> with some helpers you might find useful. We want to make it not-hacky!</p><p>We’ll do this in two parts. One, by providing an API to <a href="https://github.com/w3c/csswg-drafts/issues/8132">indicate when the animation is done</a>. And two, by <a href="https://www.w3.org/TR/css-pseudo-4/#CSSPseudoElement-interface">providing JavaScript access to pseudo-elements</a>. That second part might be a pretty big job, but it feels like the right thing to do in the long term.</p><h2 id="now-go-make-some-great-view-transitions" tabindex="-1"><a href="#now-go-make-some-great-view-transitions" aria-hidden="true">#</a> Now go make some great view transitions!</h2><p>Hopefully, like me, you&#39;re excited about the present and future of this feature. If you have any feedback, or just want to show off some view transitions you made, be they <a href="https://twitter.com/jaffathecake/status/1630156449610362885">smooth and functional</a>, or just <a href="https://twitter.com/jaffathecake/status/1626161752827199489">plain</a> <a href="https://twitter.com/jaffathecake/status/1621949535437164546">silly</a>, please <a href="https://twitter.com/jaffathecake">reach out to me on Twitter</a> or <a href="https://mastodon.social/@jaffathecake">Mastodon</a>!</p></div></div>
  </body>
</html>
