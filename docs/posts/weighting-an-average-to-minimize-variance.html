<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.johndcook.com/blog/2025/11/12/minimum-variance/">Original</a>
    <h1>Weighting an average to minimize variance</h1>
    
    <div id="readability-page-1" class="page"><article id="post-246676">
	<!-- .entry-header -->

	<div>
		<p>Suppose you have $100 to invest in two independent assets, <em>A</em> and <em>B</em>, and you want to minimize volatility. Suppose <em>A</em> is more volatile than <em>B</em>. Then putting all your money on <em>A</em> would be the worst thing to do, but putting all your money on <em>B</em> would not be the best thing to do.</p>
<p>The optimal allocation would be some mix of <em>A</em> and <em>B</em>, with more (but not all) going to <em>B</em>. We will formalize this problem and determine the optimal allocation, then generalize the problem to more assets.</p>
<h2>Two variables</h2>
<p>Let <em>X</em> and <em>Y</em> be two independent random variables with finite variance and assume at least one of <em>X</em> and <em>Y</em> is not constant. We want to find <em>t</em> that minimizes</p>
<p><img decoding="async" src="https://www.johndcook.com/minvar1.svg" alt="\text{Var}[tX + (1-t)Y]" width="153" height="18"/></p>
<p>subject to the constraint 0 ≤ <em>t</em> ≤ 1. Because <em>X</em> and <em>Y</em> are independent,</p>
<p><img decoding="async" src="https://www.johndcook.com/minvar2.svg" alt="\text{Var}[tX + (1-t)Y] = t^2 \text{Var}[X] + (1-t)^2 \text{Var}[Y]" width="391" height="22"/></p>
<p>Taking the derivative with respect to <em>t</em> and setting it to zero shows that</p>
<p><img decoding="async" src="https://www.johndcook.com/minvar3.svg" alt="t = \frac{\text{Var}[Y]}{\text{Var}[X] + \text{Var}[Y]}" width="169" height="45"/></p>
<p>So the smaller the variance on <em>Y</em>, the less we allocate to <em>X</em>. If <em>Y</em> is constant, we allocate nothing to <em>X</em> and go all in on <em>Y</em>.  If <em>X</em> and <em>Y</em> have equal variance, we allocate an equal amount to each. If <em>X</em> has twice the variance of <em>Y</em>, we allocate 1/3 to <em>X</em> and 2/3 to <em>Y</em>.</p>
<h2>Multiple variables</h2>
<p>Now suppose we have <em>n</em> independent random variables <em>X</em><sub><em>i</em></sub> for <em>i</em> running from 1 to <em>n</em>, and at least one of the variables is not constant. Then we want to minimize</p>
<p><img loading="lazy" decoding="async" src="https://www.johndcook.com/minvar4.svg" alt="\text{Var}\left[ \sum_{i=1}^n t_i X_i \right] = \sum_{i=1}^n t_i^2 \text{Var}[X_i] " width="239" height="59"/></p>
<p>subject to the constraint</p>
<p><img loading="lazy" decoding="async" src="https://www.johndcook.com/minvar5.svg" alt="\sum_{i=1}^n t_i = 1" width="74" height="54"/></p>
<p>and all <em>t</em><sub><em>i</em></sub> non-negative. We can solve this optimization problem with <a href="https://www.johndcook.com/blog/2016/09/27/one-of-my-favorite-proofs-lagrange-multipliers/">Lagrange multipliers</a> and find that</p>
<p><img loading="lazy" decoding="async" src="https://www.johndcook.com/minvar6.svg" alt="t_i \text{Var}[X_i] = t_j \text{Var}[X_j]" width="173" height="19"/></p>
<p>for all 1 ≤ <em>i</em>, <em>j</em> ≤ <em>n</em>. These (<em>n</em> − 1) equations along with the constraint that all the <em>t</em><sub><em>i</em></sub> sum to 1 give us a system of equations whose solution is</p>
<p><img loading="lazy" decoding="async" src="https://www.johndcook.com/minvar7x.svg" alt="t_i = \frac{\prod_{j \ne i} \text{Var}[X_j]}{\sum_{i = 1}^n \prod_{j \ne i} \text{Var}[X_j]}" width="183" height="51"/></p>
<p>Incidentally, the denominator has a name: the (<em>n</em> − 1)st elementary symmetric polynomial in <em>n</em> variables. More on this in the <a href="https://www.johndcook.com/blog/2025/11/12/elementary-symmetric-polynomials/">next post</a>.</p>
<h2>Related posts</h2>
<ul>
<li><a href="https://www.johndcook.com/blog/2023/07/16/symmetric-statistics/">Symmetric funcions and U-statistics</a></li>
<li><a href="https://www.johndcook.com/blog/2023/09/29/platonic-solids-and-integration/">Regular solids and Monte Carlo integration</a></li>
<li><a href="https://www.johndcook.com/blog/2023/02/02/lagrange-multiplier/">Lagrange multiplier set up. Now what?</a></li>
</ul>
			</div><!-- .entry-content -->

	<!-- .entry-meta -->
</article></div>
  </body>
</html>
