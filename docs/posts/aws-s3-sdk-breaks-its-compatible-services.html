<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://xuanwo.io/links/2025/02/aws_s3_sdk_breaks_its_compatible_services/">Original</a>
    <h1>AWS S3 SDK breaks its compatible services</h1>
    
    <div id="readability-page-1" class="page"><div><p>The Apache Iceberg community has raised a PR <a href="https://github.com/apache/iceberg/pull/12264">S3: Disable strong integrity checksums</a> to disable the newly introduced integrity checksums in AWS S3 SDKs.</p><p>AWS has <a href="https://aws.amazon.com/blogs/aws/introducing-default-data-integrity-protections-for-new-objects-in-amazon-s3/">introduced default data integrity protections for new objects in Amazon S3</a>, which is a positive development. However, they have also chosen to update the default settings in all SDKs, breaking compatibility with nearly all S3-compatible services.</p><hr/><p>First of all, this is a good thing for me because checksums like <code>crc64-nvme</code> looks great—it&#39;s fast, secure, and has excellent SIMD support. As a user and developer, I&#39;m excited to use it and integrate it into my projects. However, the S3 API is more than that. Many S3-compatible services are recommending that their users use the S3 SDK directly, and changing the default settings in this way can have a direct impact on their users.</p><p>For examples:</p><ul><li>Cloudlare R2: <a href="https://community.cloudflare.com/t/an-error-occurred-internalerror-when-calling-the-putobject-operation/764905/1">An error occurred (InternalError) when calling the PutObject operation</a></li><li>Tigris: <a href="https://www.tigrisdata.com/blog/downgrade-py-js/">If you’ve upgraded boto3 or the JavaScript S3 client in the last week, uploading files won’t work. Here’s how to fix it.</a></li></ul><blockquote><p>The recent AWS SDK bump introduced strong integrity checksums, and broke compatibility with many S3-compatible object storages (pre-2025 Minio, Vast, Dell EC etc).</p><p>In Trino project, we received the error report (Missing required header for this request: Content-Md5) from several users and had to disable the check temporarily. We recommend disabling it in Iceberg as well. I faced this issue when I tried upgrading Iceberg library to 1.8.0 in Trino.</p></blockquote><p>Although this feature is good, the AWS team has implemented it poorly by enforcing it, causing issues for many users of related services. This reminds me of the position where <a href="https://github.com/apache/opendal">Apache OpenDAL</a> should stand.</p><p>OpenDAL integrates all services by directly communicating with APIs instead of relying on SDKs, protecting users from potential disruptions like this one. OpenDAL&#39;s community also takes checksum support into deep consideration and is working to find a solution that benefits users while ensuring compatibility with unsupported services.</p><p>Maybe it&#39;s time to move away from using S3 SDKs and switch to OpenDAL if you just want to access compatible services for data:</p><ul><li>OpenDAL has a wide range of integrations tests for s3 compatible services from minio to ceph.</li><li>OpenDAL is governed by <a href="https://people.apache.org/phonebook.html?project=opendal">the Apache OpenDAL PMC</a> under <a href="https://www.apache.org/theapacheway/">the Apache Way</a> and not controlled by any business entity.</li></ul></div></div>
  </body>
</html>
