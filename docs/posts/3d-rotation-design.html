<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.mattkeeter.com/projects/rotation/">Original</a>
    <h1>3D Rotation Design</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
<!-- End header -->
<h2>Introduction</h2>
<p>When interacting with 3D models on a 2D screen,
users expect to be able to spin the model around
and inspect it from all angles.</p>
<p>This turns out to be a fascinating <a href="https://en.wikipedia.org/wiki/Human%E2%80%93computer_interaction">HCI</a> problem,
with a large corpus of research
into different system designs.</p>
<p>Compare the rotation behavior in <a href="https://www.blender.org">Blender</a>
and <a href="http://www.meshlab.net/">Meshlab</a>:</p>
<p><img src="https://www.mattkeeter.com/projects/rotation/blender.gif" alt="Blender"/>
<img src="https://www.mattkeeter.com/projects/rotation/meshlab.gif" alt="Meshlab"/>
</p>
<p>There&#39;s a clear difference,
but it&#39;s not obvious how to put it into words or code.</p>
<p>Let&#39;s walk through a few common rotation systems,
looking at what they get right and wrong.</p>
<h2>Turntable</h2>
<p>Let&#39;s start with what&#39;s known as &#34;turntable&#34; rotation.
All of the systems we&#39;ll be exploring are mouse-based;
when you click and drag, the angle changes:</p>
<ul>
<li>Left and right rotate around the viewpoint&#39;s <strong>global</strong> z axis.</li>
<li>Up and down rotate around the viewpoint&#39;s <strong>local</strong> x axis.</li>
</ul>
<p>Click and drag to explore this system:</p>
<canvas id="turntable" width="600" height="300" touch-action="none">
    Your browser doesn&#39;t appear to support the
    <code>&lt;canvas&gt;</code> element.
</canvas>
<p>There&#39;s one obvious flaw with this system:
it&#39;s impossible to see the model from arbitrary angles,
because the model&#39;s Z axis is always pointing
up and down on the screen.</p>
<h2>Tumbler</h2>
<p>Let&#39;s modify our turntable system with a minor change:</p>
<ul>
<li>Left and right rotate around the viewpoint&#39;s <strong>local y</strong> axis.</li>
<li>Up and down rotate around the viewpoint&#39;s local x axis.</li>
</ul>
<canvas id="tumbler" width="600" height="300" touch-action="none">
    Your browser doesn&#39;t appear to support the
    <code>&lt;canvas&gt;</code> element.
</canvas>
<p>This system allows rotation to an arbitrary angle,
but feels very unintuitive:
users end up &#34;tumbling&#34; the model by moving the mouse in small circles,
walking towards the desired target position.</p>
<p>There&#39;s another, more subtle critique of this system:
it lacks <em>path independence</em>.
This means that if you start and end a drag
with your mouse at a particular location,
the rotation will depend on the path that your mouse took.</p>
<h2>Trackball</h2>
<p>Trackball rotation refers to a whole family of systems,
described in detail in
<a href="http://hjemmesider.diku.dk/%7Ekash/papers/DSAGM2002_henriksen.pdf">Virtual Trackballs Revisited</a>.</p>
<p>As hinted by its name, we project a sphere (the &#34;ball&#34;) onto the model.
When the user clicks,
we &#34;grab&#34; that point on the sphere.
As the mouse is dragged,
we derive the rotation that puts the grabbed point
onto the new mouse position.</p>
<p>Try it out below:</p>
<canvas id="trackball" width="600" height="300" touch-action="none">
    Your browser doesn&#39;t appear to support the
    <code>&lt;canvas&gt;</code> element.
</canvas>
<p>As you may notice when playing with this model,
you can only rotate the model a maximum of 180º.
If you keep dragging, rotation doesn&#39;t continue indefinitely.</p>
<p>There&#39;s a bit of subtlety
in how exactly screen coordinates are
mapped to the virtual trackball.
Here, I&#39;m using Holroyd&#39;s strategy:
instead of a pure sphere,
we blend between a sphere and a hyperbola.
This eliminates discontinuities at the sphere&#39;s radius.</p>
<p>For more details and alternate mappings, see the paper linked above.</p>
<h2>Summary</h2>
<p>What&#39;s the right rotation system for your 3D application?</p>
<p>The table below summarizes the desirable features that we&#39;ve identified.</p>
<table>
  <tbody><tr>
    <td></td>
    <td>Arbitrary rotation</td>
    <td>Path independent</td>
    <td>Unlimited rotation</td>
  </tr>
  <tr>
    <td>Turntable</td>
    <td>✘</td>
    <td>✔</td>
    <td>✔</td>
  </tr>
  <tr>
    <td>Tumbler</td>
    <td>✔</td>
    <td>✘</td>
    <td>✔</td>
  </tr>
  <tr>
    <td>Trackball</td>
    <td>✔</td>
    <td>✔</td>
    <td>✘</td>
  </tr>
</tbody></table>
<p>My casual recommendation is as follows:</p>
<ul>
<li>If the model has an associated real-world axis, then use turntable</li>
<li>If there&#39;s not a fixed, real-world axis, use trackball rotation</li>
<li>The only excuse for tumbler rotation is not knowing any better</li>
</ul>
<p>Interestingly, we mix turntable and trackball rotation in
<a href="https://formlabs.com/tools/preform/?utm_content=main-nav">Preform</a>,
Formlab&#39;s 3D printer host software.
Can you spot the difference?</p>
<p><img src="https://www.mattkeeter.com/projects/rotation/preform.gif" alt="Preform"/>
</p>
<p>Rotation of the viewport uses turntable rotation,
because the 3D space is mimicking the printer&#39;s build volume;
model rotation uses an arcball (with explicit UI hints)
because of the analogy to grabbing the model&#39;s surface.</p>
<!----------------------------------------------------------------------------->







<!-- Begin footer -->
</div></div>
  </body>
</html>
