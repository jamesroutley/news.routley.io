<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tokio.rs/blog/2025-01-01-announcing-axum-0-8-0">Original</a>
    <h1>Axum 0.8</h1>
    
    <div id="readability-page-1" class="page"><div><p>Happy new year! ðŸŽ‰</p>
<p>Today, we&#39;re happy to announce <a href="https://crates.io/crates/axum"><code>axum</code></a> version 0.8. <code>axum</code> is an ergonomic
and modular web framework built with <a href="https://crates.io/crates/tokio"><code>tokio</code></a>, <a href="https://crates.io/crates/tower"><code>tower</code></a>, and <a href="https://crates.io/crates/hyper"><code>hyper</code></a>.</p>
<p>This also includes new major versions of <a href="https://crates.io/crates/axum-core"><code>axum-core</code></a>, <a href="https://crates.io/crates/axum-extra"><code>axum-extra</code></a>, and
<a href="https://crates.io/crates/axum-macros"><code>axum-macros</code></a>.</p>
<p>Here is a small selection of the most notable changes in this release:</p>
<h2 id="path-parameter-syntax-changes">Path parameter syntax changes</h2>
<p>The path parameter syntax has changed from <code>/:single</code> and <code>/*many</code> to
<code>/{single}</code> and <code>/{*many}</code>.</p>
<p>There are many reasons for this change, but the most important one is that the
old syntax was not allowing route definitions with leading <code>:</code> or <code>*</code>
characters.</p>
<p>This new syntax was introduced with our upgrade to <a href="https://crates.io/crates/matchit"><code>matchit</code></a> 0.8. It should
feel somewhat familiar from the <code>format!()</code> macro, and it&#39;s also the syntax
that is being used in <a href="https://www.openapis.org/">OpenAPI</a> descriptions. Escaping is done with double
braces, so if you want to match a literal <code>{</code> or <code>}</code> character, you can do so
by writing <code>{{</code> or <code>}}</code>.</p>
<p>We understand that this is a breaking change for basically all axum users, but
we believe that it&#39;s better to make this change now than to have to do it later
when even more users depend on the old syntax. The migration path should also
be relatively straightforward, so we hope that this change won&#39;t cause too much
trouble for you.</p>
<p>You can find more information and migration examples in the corresponding
<a href="https://github.com/tokio-rs/axum/pull/2645">pull request</a>. Thank you to
<a href="https://github.com/mladedav">David MlÃ¡dek</a> for the implementation in <code>axum</code>
and to <a href="https://github.com/ibraheemdev/matchit">Ibraheem Ahmed</a> for your
continued work on <code>matchit</code>.</p>

<p>The way <code>Option&lt;T&gt;</code> is used as an extractor has changed. Previously, any
rejections from the <code>T</code> extractor were simply ignored and turned into <code>None</code>.</p>
<p>Now, <code>Option&lt;T&gt;</code> as an extractor requires <code>T</code> to implement the new trait
<code>OptionalFromRequestParts</code> (or <code>OptionalFromRequest</code>).</p>
<p>This makes it possible to handle rejections from the <code>T</code> extractor and turn them
into error responses, while still allowing extractors to be optional.</p>
<p>Imagine you have an <code>AuthenticatedUser</code> extractor that requires a valid token
to be present in the request, but in some cases authentication is optional.
You can now use <code>Option&lt;AuthenticatedUser&gt;</code> as an extractor without losing the
ability to return an error response if the token is invalid or the database
connection failed.</p>
<p>Thank you to <a href="https://github.com/jplatte">Jonas Platte</a> for the
<a href="https://github.com/tokio-rs/axum/pull/2475">pull request</a> that introduced this
new capability.</p>
<h2 id="async_trait-removal"><code>#[async_trait]</code> removal</h2>
<p>In late 2023, the Rust team made it possible to use <code>impl Future&lt;Output = _&gt;</code>
in traits. This feature is called <a href="https://blog.rust-lang.org/2023/12/21/async-fn-rpit-in-traits.html">return-position <code>impl Trait</code> in traits</a>.
and means that we no longer need the <code>#[async_trait]</code> macro to define async
methods in traits.</p>
<p>This change primarily affects our <code>FromRequestParts</code> and <code>FromRequest</code> traits,
since they use async methods. If you have custom extractors that implement these
traits, you will need to remove the <code>#[async_trait]</code> annotation from them.</p>
<p>This <a href="https://github.com/tokio-rs/axum/pull/2308">change</a> was implemented by
<a href="https://github.com/lz1998">Zheng Li</a>. Thank you for your contribution!</p>
<h2 id="see-the-changelog-for-more">See the changelog for more</h2>
<p>There are many more changes in this release, including new features, bug fixes,
and less visible breaking changes. We encourage you to read the <a href="https://github.com/tokio-rs/axum/blob/main/axum/CHANGELOG.md">changelog</a> to
see all the changes!</p>
<p>Also, please <a href="https://github.com/tokio-rs/axum/discussions">open a GitHub discussion</a> if you have trouble updating. You&#39;re
also welcome to ask questions in <a href="https://discord.gg/tokio">Discord</a>.</p>
<p>Finally, we want to thank all the <a href="https://github.com/tokio-rs/axum/graphs/contributors">contributors</a>
who helped make this release possible. Your work is greatly appreciated!</p>
</div></div>
  </body>
</html>
