<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://frontendmasters.com/blog/youtube-embeds-are-bananas-heavy-and-its-fixable/">Original</a>
    <h1>YouTube Embeds Are Bananas Heavy and It&#39;s Fixable</h1>
    
    <div id="readability-page-1" class="page"><div>
      
<p>TL;DR: YouTube Embeds are like 1.3MB in size with no shared resources between multiple embeds. Using a <a href="https://github.com/paulirish/lite-youtube-embed">&lt;lite-youtube&gt;</a> Web Component is more like 100k, <em>does</em> share resources, and sacrifices no functionality.  </p>



<p>You can put a YouTube video on any website. They help you do it. Under the <strong>Share </strong>menu right on youtube.com there is an option to <strong>&lt;&gt; Embed</strong> and you‚Äôll see bit of HTML with an <code>&lt;iframe&gt;</code> in it. </p>



<figure><img fetchpriority="high" decoding="async" width="1024" height="429" src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=1024%2C429&amp;ssl=1" alt="" srcset="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=1024%2C429&amp;ssl=1 1024w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=300%2C126&amp;ssl=1 300w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=768%2C322&amp;ssl=1 768w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=1536%2C643&amp;ssl=1 1536w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/06/CleanShot-2024-06-30-at-09.12.30@2x.png?resize=2048%2C858&amp;ssl=1 2048w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1"/><figcaption>&lt;iframe&gt;s are never wonderful for performance, but they make sense for protected third-party content.</figcaption></figure>



<p>This is what I‚Äôm getting as I write:</p>


<pre aria-describedby="shcb-language-1" data-shcb-language-name="HTML, XML" data-shcb-language-slug="xml"><span><code><span>&lt;<span>iframe</span> 
  <span>width</span>=<span>&#34;560&#34;</span> 
  <span>height</span>=<span>&#34;315&#34;</span> 
  <span>src</span>=<span>&#34;https://www.youtube.com/embed/LN1TQm942_U?si=EfW_M4bEHEO-idL3&#34;</span>
  <span>title</span>=<span>&#34;YouTube video player&#34;</span>
  <span>frameborder</span>=<span>&#34;0&#34;</span>
  <span>allow</span>=<span>&#34;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&#34;</span>
  <span>referrerpolicy</span>=<span>&#34;strict-origin-when-cross-origin&#34;</span>
  <span>allowfullscreen</span>&gt;</span>
<span>&lt;/<span>iframe</span>&gt;</span></code></span><small id="shcb-language-1"><span>Code language:</span> <span>HTML, XML</span> <span>(</span><span>xml</span><span>)</span></small></pre>


<p>If I were Team YouTube, I‚Äôd get <code>loading=&#34;lazy&#34;</code> on there to help with performance right away. No need for videos that aren‚Äôt even visible on the page to load right away. </p>


<pre aria-describedby="shcb-language-2" data-shcb-language-name="HTML, XML" data-shcb-language-slug="xml"><span><code><span><span><span>&lt;<span>iframe</span> </span>
</span></span><span><span><span>  <span>...</span></span>
</span></span><mark><span><span>  <span>loading</span>=<span>&#34;lazy&#34;</span></span>
</span></mark><span><span><span>  &gt;</span>
</span></span><span><span><span>&lt;/<span>iframe</span>&gt;</span>
</span></span></code></span><small id="shcb-language-2"><span>Code language:</span> <span>HTML, XML</span> <span>(</span><span>xml</span><span>)</span></small></pre>


<p>Plus I‚Äôd put some inline styles on there to keep the video fluid and maintain the original aspect ratio. Or you could target these and do that yourself in CSS. Here‚Äôs assuming the videos are the standard 16 / 9 aspect ratio:</p>


<pre aria-describedby="shcb-language-3" data-shcb-language-name="CSS" data-shcb-language-slug="css"><span><code><span>iframe</span><span>[src^=<span>&#34;https://www.youtube.com/embed/&#34;</span>]</span> {
  <span>inline-size</span>: <span>100%</span>;
  <span>block-size</span>: auto;
  <span>aspect-ratio</span>: <span>16</span> / <span>9</span>;
}</code></span><small id="shcb-language-3"><span>Code language:</span> <span>CSS</span> <span>(</span><span>css</span><span>)</span></small></pre>


<p>But‚Ä¶ let‚Äôs not keep this HTML at all. I‚Äôm sure you read this blog post title, but let‚Äôs put a point on it:</p>



<figure><img decoding="async" width="952" height="1024" src="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/07/CleanShot-2024-07-01-at-07.04.34@2x.png?resize=952%2C1024&amp;ssl=1" alt="" srcset="https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/07/CleanShot-2024-07-01-at-07.04.34@2x.png?resize=952%2C1024&amp;ssl=1 952w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/07/CleanShot-2024-07-01-at-07.04.34@2x.png?resize=279%2C300&amp;ssl=1 279w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/07/CleanShot-2024-07-01-at-07.04.34@2x.png?resize=768%2C826&amp;ssl=1 768w, https://i0.wp.com/frontendmasters.com/blog/wp-content/uploads/2024/07/CleanShot-2024-07-01-at-07.04.34@2x.png?w=1392&amp;ssl=1 1392w" sizes="(max-width: 952px) 100vw, 952px" data-recalc-dims="1"/></figure>



<p>On a page with literally <em>nothing at all on it</em> other than a YouTube Embed, we‚Äôre looking at:</p>



<ul>
<li>32 requests</li>



<li>1.3 MB of data transfer</li>



<li>2.76s to load the page on my current WiFi connection</li>
</ul>



<p><a href="https://www.zachleat.com/web/youtube-embeds/">Zach Leatherman, equally exasperated by this</a>, noted:</p>



<blockquote>
<p>The weight also grows linearly with every embed‚Äîresources are¬†<em>not</em>¬†shared: two embeds weigh 2.4 MB; three embeds weigh 3.6 MB (you get the idea).</p>
</blockquote>



<p>Wow.</p>



<p>Looks like sizes are up a bit since Zach last looked as well.</p>



<h2 id="toc-1"><a href="#the-appearance-functionality" aria-hidden="true" id="the-appearance-functionality"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Appearance &amp; Functionality</h2>



<p>This is what you get from a YouTube Embed:</p>



<ul>
<li>You see a ‚Äúposter‚Äù image of the video</li>



<li>You see the title of the video </li>



<li>You see a big play button ‚Äî click it to play the video</li>
</ul>



<p>This is very little UI and functionality, which is fine! We can absolutely do all this without this many resources.</p>



<h2 id="toc-2"><a href="#why-is-it-this-way-%f0%9f%a4%b7%e2%99%80%ef%b8%8f" aria-hidden="true" id="why-is-it-this-way-%f0%9f%a4%b7%e2%99%80%ef%b8%8f"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why is it this way? ü§∑‚Äç‚ôÄÔ∏è</h2>



<p>I don‚Äôt think we have any good answers here. In fact, I heard from a little birdie who ran it up the pole that they have tested lighter embeds and <em>found them to reduce engagement</em>. üò≠</p>



<p>I‚Äôm just gonna straight up say I don‚Äôt believe it. It‚Äôs like when Google told us that taking up half the screen with AI generated answers led to people clicking on third-party results <em>more</em>, but then refused to show data or allow us to track those clicks ourselves.</p>



<p>And hey ‚Äî sometimes there are unexpected results in testing. That‚Äôs why we test instead of guess. But because this is <em>so</em> counterintuitive and offtrack for so many other similar performance testing situations, this bears deeper scrutiny. It would benefit from an opening of the methodology and data. </p>



<p>Like if you tell me that if you hit people with a stick and they smile more, I‚Äôm gonna want you to stop until we can look at what‚Äôs going on there.</p>



<p>I <em>really</em> wish I could find a good link for this, but there is a famous story from YouTube engineers way-back-when who made a much lighter video page and put it into testing. They found, quite counterintuitively, that average page load times went <em>up.</em> But with a deeper look, they found that the lighter page was able to <em>reach more people, including people on low-power low-internet-speed devices</em> who were able to actually use YouTube for the first time, and them using it much more slowed those averages. That‚Äôs awesome! The speed of using the site was up <em>relatively</em> for everyone. The metric of the average page load speed was a red herring and ultimately not meaningful.</p>



<p>How do we know that‚Äôs not the same kind of thing happening here?</p>



<p>Remember the implications of all these resources isn‚Äôt just a little inconvenience. YouTube is so enormous we‚Äôre talking incredible amounts of wasted electricity and thus carbon output. Pulling a megabyte of data off every single YouTube Embed would be an incredible win all around. I might even say <em>not</em> improving this is environmentally negligent.</p>



<h2 id="toc-3"><a href="#the-solution-is-to-replicate-the-embed-experience-another-way-there-are-open-source-web-components-that-do-it-well" aria-hidden="true" id="the-solution-is-to-replicate-the-embed-experience-another-way-there-are-open-source-web-components-that-do-it-well"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Solution is to Replicate the Embed Experience Another Way. There are Open Source Web Components That Do It Well.</h2>



<p>With a little dab of irony, Google‚Äôs own performance champion Paul Irish has had a web component doing just this for years and years and years:</p>



<p><a href="https://github.com/paulirish/lite-youtube-embed">lite-youtube-embed</a></p>



<p>The pitch is solid:</p>



<blockquote>
<p>Provide videos with a supercharged focus on visual performance. This custom element renders just like the real thing but approximately 224√ó faster.</p>
</blockquote>



<p><strong>Two hundred and twenty four</strong> times faster. Which of course involves much less data transfer.</p>



<p>And I‚Äôd like to be very clear, also does the exact same thing as the default embed:</p>



<ul>
<li>You see a ‚Äúposter‚Äù image of the video</li>



<li>You see the title of the video </li>



<li>You see a big play button ‚Äî click it to play the video</li>
</ul>



<p>You lose nothing and gain tons of speed, efficiency, and default privacy.</p>



<h2 id="toc-4"><a href="#using-lite-youtube-embed" aria-hidden="true" id="using-lite-youtube-embed"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Lite YouTube Embed</h2>



<ol>
<li>Link up the JavaScript to instantiate the Web Component</li>



<li>Use it</li>
</ol>



<p>You could install it from npm or copy and paste a copy into your own project or whatever. Or link it from a CDN:</p>


<pre aria-describedby="shcb-language-4" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><span><code><span>import</span> <span>&#34;https://esm.sh/lite-youtube-embed&#34;</span>;</code></span><small id="shcb-language-4"><span>Code language:</span> <span>JavaScript</span> <span>(</span><span>javascript</span><span>)</span></small></pre>


<p>That‚Äôs like this:</p>







<p>But the best way to use it is right in the README:</p>



<blockquote>
<p>Use this as your HTML, load the script asynchronously, and let the JS progressively enhance it.</p>
</blockquote>


<pre aria-describedby="shcb-language-5" data-shcb-language-name="HTML, XML" data-shcb-language-slug="xml"><span><code><span>&lt;<span>script</span> <span>defer</span> <span>src</span>=<span>&#34;https://cdnjs.cloudflare.com/ajax/libs/lite-youtube-embed/0.3.2/lite-yt-embed.js&#34;</span>&gt;</span><span>&lt;/<span>script</span>&gt;</span>

<span>&lt;<span>link</span> <span>rel</span>=<span>&#34;stylesheet&#34;</span> <span>href</span>=<span>&#34;https://cdnjs.cloudflare.com/ajax/libs/lite-youtube-embed/0.3.2/lite-yt-embed.css&#34;</span> <span>integrity</span>=<span>&#34;sha512-utq8YFW0J2abvPCECXM0zfICnIVpbEpW4lI5gl01cdJu+Ct3W6GQMszVITXMtBLJunnaTp6bbzk5pheKX2XuXQ==&#34;</span> <span>crossorigin</span>=<span>&#34;anonymous&#34;</span> <span>referrerpolicy</span>=<span>&#34;no-referrer&#34;</span> /&gt;</span>

<span>&lt;<span>lite-youtube</span> <span>videoid</span>=<span>&#34;ogfYd705cRs&#34;</span> <span>style</span>=<span>&#34;background-image: url(&#39;https://i.ytimg.com/vi/ogfYd705cRs/hqdefault.jpg&#39;);&#34;</span>&gt;</span>
  <span>&lt;<span>a</span> <span>href</span>=<span>&#34;https://youtube.com/watch?v=ogfYd705cRs&#34;</span> <span>class</span>=<span>&#34;lty-playbtn&#34;</span> <span>title</span>=<span>&#34;Play Video&#34;</span>&gt;</span>
    <span>&lt;<span>span</span> <span>class</span>=<span>&#34;lyt-visually-hidden&#34;</span>&gt;</span>Play Video: Keynote (Google I/O &#39;18)<span>&lt;/<span>span</span>&gt;</span>
  <span>&lt;/<span>a</span>&gt;</span>
<span>&lt;/<span>lite-youtube</span>&gt;</span></code></span><small id="shcb-language-5"><span>Code language:</span> <span>HTML, XML</span> <span>(</span><span>xml</span><span>)</span></small></pre>


<p>With async loaded JavaScript, note the <code>background-image</code> is put into the HTML so it can all look right before the JavaScript loads. </p>







<h2 id="toc-5"><a href="#alternatives" aria-hidden="true" id="alternatives"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Alternatives</h2>



<ul>
<li><a href="https://github.com/justinribeiro/lite-youtube">Shadow DOM version</a> (more protected styling, more annoying to style)</li>



<li>Do it yourself
<ul>
<li>Raymond Camden: <a href="https://www.raymondcamden.com/2022/11/17/building-a-youtube-embed-web-component-both-vanilla-and-webc-flavored">Building a YouTube Embed Web Component (both vanilla and WebC flavored)</a></li>



<li>Adrian Roselli: <a href="https://adrianroselli.com/2024/06/youtube-and-vimeo-web-component.html">YouTube and Vimeo Web Component</a></li>
</ul>
</li>



<li>Mux: <code><a href="https://github.com/muxinc/media-elements/tree/main/packages/youtube-video-element">&lt;youtube-video&gt;</a></code> (matches <code>&lt;video&gt;</code> DOM APIs)</li>



<li><a href="https://github.com/ibrahimcesar/react-lite-youtube-embed">React Port</a> &amp; <a href="https://github.com/vercel/next.js/tree/canary/packages/third-parties#youtube-embed">Next.js Official Version</a></li>
</ul>

    </div></div>
  </body>
</html>
