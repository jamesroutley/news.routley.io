<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://corelatus.com/blog/Decoding_the_telephony_signals_in_Pink_Floyd_s__The_Wall_.html">Original</a>
    <h1>Decoding the telephony signals in Pink Floyd&#39;s &#39;The Wall&#39;</h1>
    
    <div id="readability-page-1" class="page"><div id="articles">
<div id="sidebar">
<div id="about">
<h3>
ABOUT</h3>

<p>
I&#39;m one of the founders at Corelatus. Our niche is telecom hardware for
the E1/T1 and SDH/SONET interfaces. I work with layer 2 signalling, i.e
SS7 MTP-2, ATM and frame relay, and the Erlang control system for our
embedded hardware.
</p>

<p>
You can reach me at <a href="mailto:matthias@corelatus.com?subject=blog%20comment">matthias@corelatus.com</a>
</p>
</div>
<div id="toc">
<h3>
CATEGORY: All</h3>
<h4>
2024</h4>
<div>
<p><a href="http://tinylogger.com/max/Decoding_the_telephony_signals_in_Pink_Floyd_s__The_Wall_.html">Decoding the telephony signals in Pink Floyd&#39;s &#39;The Wall&#39;</a></p></div>
<h4>
2023</h4>
<div>
<p><a href="http://tinylogger.com/max/How_far_can_I_place_a_PMP_from_the_tap_in_point___update_.html">How far can I place a PMP from the tap-in point? (update)</a></p></div>
<h4>
2019</h4>
<div>
<p><a href="http://tinylogger.com/max/Reading_SS7_packets_from_a_PCap_file_and_replaying.html">Reading SS7 packets from a PCap file and replaying</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Replaying_bit_exact_E1_T1_timeslot_recordings.html">Replaying bit-exact E1/T1 timeslot recordings</a></p></div>
<h4>
2017</h4>
<div>
<p><a href="http://tinylogger.com/max/Figuring_out_a_Corelatus_module_s__forgotten__IP_address.html">Figuring out a Corelatus module&#39;s (forgotten) IP address</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Finding_the_bad_link_in_an_SDH_network_using_BIP_counters.html">Finding the bad link in an SDH network using BIP counters</a></p></div>
<h4>
2016</h4>
<div>
<p><a href="http://tinylogger.com/max/What_does_an_improperly_placed_monitor_point_do_to_a_signal_.html">What does an improperly placed monitor point do to a signal?</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Debugging_a_PDH_frequency_offset.html">Debugging a PDH frequency offset</a></p></div>
<h4>
2015</h4>
<div>
<p><a href="http://tinylogger.com/max/Decoding_random_data.html">Decoding random data</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/I_have_47_E1s__How_much_hardware_do_I_need_to_monitor_them_.html">I have 47 E1s? How much hardware do I need to monitor them?</a></p></div>
<h4>
2014</h4>
<div>
<p><a href="http://tinylogger.com/max/MTP_2_Annex_A__High_Speed_Link__signalling.html">MTP-2 Annex A (High Speed Link) signalling</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Daisy_chaining_SDH_SONET_interfaces.html">Daisy-chaining SDH/SONET interfaces</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Getting_hex_dumps_of_E1_T1_timeslots.html">Getting hex dumps of E1/T1 timeslots</a></p></div>
<h4>
2013</h4>
<div>
<p><a href="http://tinylogger.com/max/save_to_pcap_now_supports_PCap_NG_for_Wireshark.html">save_to_pcap now supports PCap-NG for Wireshark</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Dimensioning_SDH_SONET_monitoring.html">Dimensioning SDH/SONET monitoring</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Configuring_SDH_SONET.html">Configuring SDH/SONET</a></p></div>
<h4>
2012</h4>
<div>
<p><a href="http://tinylogger.com/max/Retroactive_debugging__recording_signalling_for_later_analysis.html">Retroactive debugging: recording signalling for later analysis</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Upgrading_firmware_on_GTH.html">Upgrading firmware on GTH</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Decoding_signalling_on_the_Abis_interface_with_Wireshark.html">Decoding signalling on the Abis interface with Wireshark</a></p></div>
<h4>
2011</h4>
<div>
<p><a href="http://tinylogger.com/max/Controlling_a_GTH_from_Amazon_EC2.html">Controlling a GTH from Amazon EC2</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Live_Wireshark_captures_on_Windows.html">Live Wireshark captures on Windows</a></p></div>
<h4>
2010</h4>
<div>
<p><a href="http://tinylogger.com/max/Porting_C_socket_code_to_Windows.html">Porting C socket code to Windows</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Decoding_UMTS__3G__interfaces_with_Wireshark.html">Decoding UMTS (3G) interfaces with Wireshark</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Decoding_the_Gb_Interface_with_Wireshark.html">Decoding the Gb Interface with Wireshark</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/GTH__C__API.html">GTH &#39;C&#39; API</a></p></div>
<h4>
2009</h4>
<div>
<p><a href="http://tinylogger.com/max/Audio_power_levels_on_E1_T1_timeslots__the_digital_milliwatt.html">Audio power levels on E1/T1 timeslots: the digital milliwatt</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/How_does_TCP_behave_on_an_interrupted_network_.html">How does TCP behave on an interrupted network?</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Capturing_SS7_with_wireshark_or_tshark.html">Capturing SS7 with wireshark or tshark</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Generating_DTMF_using_a___039_player__039__on_GTH.html">Generating DTMF using a &#39;player&#39; on GTH</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Perl_example_code_for_GTH__SS7_ISUP_decoding_and_playback_record.html">Perl example code for GTH: SS7 ISUP decoding and playback/record</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Decoding_MTP_3_and_ISUP.html">Decoding MTP-3 and ISUP</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/The_timestamp_field_in_signalling_headers.html">The timestamp field in signalling headers</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/GTH_audio_streaming__why_stream_over_TCP_.html">GTH audio streaming: why stream over TCP?</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/SOX_parameters_for_downsampling_to_8kHz_Alaw.html">SOX parameters for downsampling to 8kHz Alaw</a></p></div>
<div>
<p><a href="http://tinylogger.com/max/Erlang_example_code_for_GTH.html">Erlang example code for GTH</a></p></div>
</div>
<div id="categories">
<h3>
CATEGORIES</h3>
<p>
<a href="http://tinylogger.com/max/index.html">All articles(35)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_C.html">C(5)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_GTH.html">GTH(34)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_SDH_and_SONET.html">SDH and SONET(5)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_Windows.html">Windows(3)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_erlang.html">erlang(2)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_python.html">python(3)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_questions_from_customers.html">questions-from-customers(5)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_telecom_signalling.html">telecom-signalling(24)</a></p>
<p>
<a href="http://tinylogger.com/max/tagged_with_wireshark.html">wireshark(7)</a></p>
</div>
</div>
<h2>
Decoding the telephony signals in Pink Floyd&#39;s &#39;The Wall&#39;</h2>
<p>
<em>Posted December 4th 2024</em></p>
<p>
  I like puzzles. Recently, someone asked me to identify the telephone
  network signalling in <em>The Wall</em>, a 1982 film featuring Pink
  Floyd. The signalling is audible when the main character, Pink,
  calls London from a payphone in Los Angeles,
  in <a href="https://youtu.be/yvG3WPYAXHM?si=ISfv0O_w2BC3v2ZI&amp;t=2162">this
    scene</a> (Youtube).
</p>

<p>Here&#39;s a five second audio clip from when Pink calls:</p>

<p>
  <audio src="static/2024_12_pinkfloyd.wav" controls="">
    (HTML5 audio player isn&#39;t supported by your browser)
  </audio>
</p>

<!--- =========================================================== --->
<h2>What&#39;s in the clip?</h2>

<p>
  The clip starts with some speech overlapping a dial-tone which in
  turn overlaps some rapid tone combinations, a ring tone and some
  pops, clicks and music. It ends with an answer tone.
</p>

<p>
  The most characteristic part is the telephone number encoded in the
  rapid tone combinations. Around 1980, when the film was made,
  different parts of the world used similar, but incompatible,
  tone-based signalling schemes. They were all based on the same idea:
  there are six or eight possible tones, and each digit is represented
  by a combination of two tones.
</p>

<h2>Let&#39;s examine a spectrogram</h2>

<p>
  <em>SoX</em>, an audio editing tool for PCs, can make charts that
  show the spectral components of the audio over time. The horizontal
  axis represents time, the vertical axis frequency, and darker
  sections show more audio power, and lighter sections less.
</p>

<p><img src="http://tinylogger.com/max/static/2024_12_spectrogram.png" alt="spectrogram of signalling"/>
</p>

<p>
  Signalling tones appear as dark horizontal lines in the spectrogram,
  with the digit signalling visible from 0.7 to 1.8 seconds. That part
  of the signalling has tones at roughly <b>700, 900, 1100, 1300, 1500
  and 1700 Hz</b>.
</p>

<h2>Which signalling standards were in common use?</h2>

<h3>DTMF (ITU-T Q.23 and Q.24)</h3>
<p>
  Everyone&#39;s heard DTMF (Dual Tone Multi Frequency). It&#39;s the sound
  your phone makes when you interact with one of those &#34;<em>Press 1 if
  you are a new customer. Press 2 if you have a billing enquiry. Press
  3...</em>&#34; systems. DTMF is still used by many fixed-line telephones
  to set up a call.
</p>

<p>
  In DTMF, each digit is encoded by playing a &#34;high&#34; tone and a &#34;low&#34;
  tone. The low ones can be 697, 770, 852 or 941 Hz.  The high ones
  1209, 1336, 1477 and 1633 Hz.
</p>

<p>None of the pairs in the audio match this, so <b>it&#39;s not
    DTMF</b>. Here&#39;s an audio clip of what it <em>would</em> sound like
  if we used DTMF signalling for the same number, with about the same
  speed of tones:
</p>

<p>
  <audio src="static/2024_12_dtmf.wav" controls="">
    (HTML5 audio player isn&#39;t supported by your browser)
  </audio>
</p>

<h3>CAS R2 (ITU-T Q.400—490)</h3>

<p>
  CAS R2 uses a two-out-of-six tone scheme with the frequencies 1380,
  1500, 1620, 1740, 1860 and 1980 Hz for one call direction and 1140,
  1020, 900, 780, 660 and 540 Hz for the other.  None of these are a
  good match for the tones we heard. Besides, Pink is in the USA, and
  the USA did not use CAS R2, so <b>it&#39;s not CAS</b>.
</p>

<p>This is what the digit signalling would have sounded like if
  CAS were used:</p>



<h3>SS5 (ITU-T Q.153 and Q.154)</h3>
<p>
  SS5 also uses a two-out-of-six scheme with the frequencies 700, 900,
  1100, 1300, 1500 and 1700 Hz.  This matches most of what we can
  hear, and SS5 is the signalling system most likely used for a call
  from the USA to the UK in the early 1980s.
</p>

<p>This is what the digit signalling sounds like in SS5, when
re-generated to get rid of all the other sounds:</p>

<p>
  <audio src="static/2024_12_ss5.wav" controls="true">
    (HTML5 audio player isn&#39;t supported by your browser)
  </audio>
  <br/>
</p>

<h3>SS7 (ITU-T Q.703—)</h3>

<p>
  <b>It can&#39;t be SS7</b>. Signalling system No. 7 (SS7) doesn&#39;t use
  tones at all; it&#39;s all digital. SS7 is carried separately from the
  audio channel, so it can&#39;t be heard by callers. SS7 wasn&#39;t in
  common use until later in the 1980s.
</p>

<h3>Comparing spectrograms</h3>

<p>
  I made a spectrogram which combines all three signalling types on
  the same chart. The difference between DTMF and SS5 is subtle, but
  recognisable. CAS is obviously different.
</p>

<p><img src="http://tinylogger.com/max/static/2024_12_synthetic_spectrogram.png" alt="spectrogram of signalling"/>
</p>

<h2>Let&#39;s feed the audio to some telecom hardware</h2>

  <p>
    I injected the audio file into a timeslot of an E1 line, connected
    it to Corelatus&#39; hardware and started an <em>ss5_registersig_monitor</em>.
  </p>

<p>
  The input audio has a lot of noise in addition to the signalling,
  but these protocols are robust enough for the digital filters in the
  hardware to be able to decode and timestamp the dialled digits
  anyway. Now, we know that the number signalling we hear was <b>044
  1831</b>. The next step is to analyse the frequencies present at the
  start time for each tone. I re-analysed the audio file
  with <em>SoX</em>, which did an FFT on snippets of the audio to find
  the actual tone frequencies at the times there were tones, like
  this:
</p>

<pre>    sox input.wav -n trim 0.700 0.060 stat -freq
</pre>

<p>The results are:</p>

  <table>
    <tbody><tr><th>Time</th><th>Frequencies</th><th>Interpretation</th></tr>
    <tr><td>0—1200 ms</td><td>483 Hz</td><td>dial tone</td>
    </tr><tr><td>729 </td><td>1105 + 1710</td><td>KP1 (start)</td>
    </tr><tr><td>891</td><td>1304 + 1507</td><td>0</td>
    </tr><tr><td>999</td><td>1306 + 703</td><td>4</td>
    </tr><tr><td>1107</td><td>1306 + 701</td><td>4</td>
    </tr><tr><td>1215</td><td>703 + 888</td><td>1</td>
    </tr><tr><td>1269</td><td>902 + 1503</td><td>8</td>
    </tr><tr><td>1377</td><td>902 + 1101</td><td>3</td>
    </tr><tr><td>1566</td><td>701 + 900</td><td>1</td>
    </tr><tr><td>1674</td><td>1501 + 1705</td><td>KF (stop)</td>
    </tr><tr><td>3800</td><td>2418 </td><td>Answer tone</td>
  </tr></tbody></table>

<p>
  At this point, I&#39;m certain <b>the signalling is SS5</b>. It uses the
  correct frequencies to transmit digits. It uses the correct digit
  timing. It obeys the SS5 rules for having KP1 before the digits and
  KF after the digits. It uses a tone close to 2400 Hz to indicate
  that the call was answered.
</p>


<p>
  I&#39;ve also listed the dial tone at the beginning, and the 2400 Hz
  <em>seizing</em> tone at the end. SS5 also uses a 2600 Hz tone,
  which is infamous for its use in blue box phreaking (telephone
  fraud) in the 1980s.
</p>

<h2>How was the film&#39;s audio made?</h2>

<p>
  My best guess is that, at the time the film was made, callers could
  hear the inter-exchange signalling during operator-assisted calls in
  the US. That would have allowed the sound engineer to record a real
  telephone in the US and accurately capture the feeling of a
  long-distance call. The number itself was probably made-up: it&#39;s too
  short and the area code doesn&#39;t seem valid.
</p>

<p>The audio was then cut and mixed to make the dial tone overlap the
  signalling. It sounds better that way and fits the scene&#39;s timing.
</p>


<h2>Addendum, 18. December 2024: the audio also appears in &#39;Young Lust&#39;</h2>

<p>
  It turns out that an extended version of the same phone call appears
  near the end of &#39;Young Lust&#39;, a track on the album &#39;The Wall&#39;. Other
  engineers with actual experience of 1970s telephone networks have
  <a href="https://telephoneworld.org/landline-telephone-history/pink-floyds-young-lust-explained-and-demystified/"> also analysed the signalling
  </a> in an interesting article with a host of details and background
  I didn&#39;t know about, including the likely names of the people in the
  call.
</p>

<p>
  It&#39;s nice to know that I got the digit decoding right, we both
  concluded it was 044 1831. One surprise is that the number called is
  probably a shortened real number in London, rather than a completely
  fabricated one as I suspected earlier. Most likely, several digits
  between the &#39;1&#39; and the &#39;8&#39; are cut out. Keith Monahan&#39;s analysis
  noted a <em>very ugly splice point</em> there, whereas I only
  briefly wondered why the digit start times are fairly regular for
  all digits except that the &#39;8&#39; starts early and the final &#39;1&#39; starts
  late.
</p>
<div><p><a href="http://tinylogger.com/max/Decoding_the_telephony_signals_in_Pink_Floyd_s__The_Wall_.html">Permalink</a> | Tags: <a href="http://tinylogger.com/max/tagged_with_GTH.html">GTH</a>, <a href="http://tinylogger.com/max/tagged_with_telecom_signalling.html">telecom-signalling</a></p></div></div></div>
  </body>
</html>
