<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Florian-Barthel/splatviz">Original</a>
    <h1>New Gaussian Splatting viewer that allows code modification during runtime</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto"><p> 
This interactive viewer allows you to display and edit 3D Gaussian Splatting scenes in real time. By using a 
native python GUI library (imgui) we can directly manipulate the Gaussian python object just before rendering it.
This enables endless editing and visualization possibilities, given that python is turing complete. 
You can also evaluate python expression just after the 
rendering, allowing you to access and debug the 3D scene just in time. Additionally, you can visualize multiple scenes
at the same time comparing them side by side or in a splitscreen view. Lastly, you can also save renderings, ply files
of the current scene and even videos of a 360Â° rotation around the scene.
</p><p dir="auto">See some example editings in this  <a href="https://www.youtube.com/watch?v=AJGSa_wnZS8&amp;ab_channel=FlorianBarthel" rel="nofollow">video</a>.</p>
</div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/teaser.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/teaser.png"/></a></p>

<p dir="auto">Clone repository <strong>recursively</strong> in order to install glm from the diff_gaussian_rasterization package.</p>
<div data-snippet-clipboard-copy-content="git clone https://github.com/Florian-Barthel/splatviz.git --recursive"><pre><code>git clone https://github.com/Florian-Barthel/splatviz.git --recursive
</code></pre></div>
<p dir="auto">Create conda environment with <strong>conda</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="conda env create -f environment.yml
conda activate gs-view"><pre>conda env create -f environment.yml
conda activate gs-view</pre></div>
<p dir="auto">Alternatively, create the environment with <strong>micromamba</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="micromamba env create --file environment.yml --channel-priority flexible -y
micromamba activate gs-view"><pre>micromamba env create --file environment.yml --channel-priority flexible -y
micromamba activate gs-view</pre></div>
<p dir="auto">Launch:
<code>python run_main.py</code></p>
<p dir="auto">Launch with a specified path to look for .ply or .yml files:
<code>python run_main.py --data_path=path/with/plys</code></p>

<div dir="auto"> 

<p dir="auto">Once you run the <code>run_main.py</code> file, the viewer will directly load the first scene that is found in the data
directory you have specified. You can change the scene by clicking the <strong>Browse</strong> button. You will be displayed a list
of available <em>.ply</em> files (or <em>.yml</em> files that correspond to compressed gaussian scenes using
<a href="https://fraunhoferhhi.github.io/Self-Organizing-Gaussians/" rel="nofollow">this</a> compression method). If you have a lot of
scenes to chose from, you can also use the <strong>Filter</strong> textfield providing comma separated keywords (eg. <em>lego,30000,baseline</em>).
You will then only see those scenes that contain all keywords.</p>
<p dir="auto">Additionally, you can also view multiple 3D scenes at once. Simply click <strong>Add Scene</strong>, which loads the same scene as
before and then change the respective scene to another .ply file using the new browse button. The scenes are either
rendered next to each other or in a split screen mode when activating the <strong>Splitscreen</strong> checkbox.</p>
<p dir="auto">You can download some example scenes <a href="https://drive.google.com/drive/folders/1RNMis5ibSrl2a87ZX614ZPsHKaY6ams6?usp=sharing" rel="nofollow">here</a>.
They were created using the gaussian splatting compression method from: <a href="https://fraunhoferhhi.github.io/Self-Organizing-Gaussians" rel="nofollow">https://fraunhoferhhi.github.io/Self-Organizing-Gaussians</a>.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/load.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/load.png"/></a></p><hr/>

<p dir="auto">The edit widget is the core functionality of this 3D viewer. It allows for real time editing of the gaussian
python object during runtime. The code that you type in this text area will be executed just before the gaussian object is
forwarded to the cuda renderer. This means, the editing capabilities are unlimited. As long as the provided code
is executable, you can type any kind of python code and also import new libraries. An example could look like this, where
all scales are set to -8 (before activating with <em>exp()</em>) and all opacity values are set to 10 (before activating with
<em>sigmoid()</em>), while also the background is set to 1, which corresponds to white.</p>
<div dir="auto" data-snippet-clipboard-copy-content="gaussian._scaling = gaussian._scaling * 0 - 8
gaussian._opacity = gaussian._opacity * 0 + 10
self.bg_color[:] = 1"><pre><span>gaussian</span>.<span>_scaling</span> <span>=</span> <span>gaussian</span>.<span>_scaling</span> <span>*</span> <span>0</span> <span>-</span> <span>8</span>
<span>gaussian</span>.<span>_opacity</span> <span>=</span> <span>gaussian</span>.<span>_opacity</span> <span>*</span> <span>0</span> <span>+</span> <span>10</span>
<span>self</span>.<span>bg_color</span>[:] <span>=</span> <span>1</span></pre></div>
<p dir="auto">To enable smooth editing transitions, you can create sliders (press <strong>Add Slider</strong>) which you can access in the
editor text by typing slider.name (eg. slider.x). An example could look as follows. Here, we create a boolean mask
that filters all gaussians that are smaller than the value stored in <strong>slider.x</strong>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="mask = torch.linalg.norm(gaussian._scaling, dim=-1) &lt; slider.x

gaussian._xyz = gaussian._xyz[mask]
gaussian._rotation = gaussian._rotation[mask]
gaussian._scaling = gaussian._scaling[mask]
gaussian._opacity = gaussian._opacity[mask]
gaussian._features_dc = gaussian._features_dc[mask]
gaussian._features_rest = gaussian._features_rest[mask]"><pre><span>mask</span> <span>=</span> <span>torch</span>.<span>linalg</span>.<span>norm</span>(<span>gaussian</span>.<span>_scaling</span>, <span>dim</span><span>=</span><span>-</span><span>1</span>) <span>&lt;</span> <span>slider</span>.<span>x</span>

<span>gaussian</span>.<span>_xyz</span> <span>=</span> <span>gaussian</span>.<span>_xyz</span>[<span>mask</span>]
<span>gaussian</span>.<span>_rotation</span> <span>=</span> <span>gaussian</span>.<span>_rotation</span>[<span>mask</span>]
<span>gaussian</span>.<span>_scaling</span> <span>=</span> <span>gaussian</span>.<span>_scaling</span>[<span>mask</span>]
<span>gaussian</span>.<span>_opacity</span> <span>=</span> <span>gaussian</span>.<span>_opacity</span>[<span>mask</span>]
<span>gaussian</span>.<span>_features_dc</span> <span>=</span> <span>gaussian</span>.<span>_features_dc</span>[<span>mask</span>]
<span>gaussian</span>.<span>_features_rest</span> <span>=</span> <span>gaussian</span>.<span>_features_rest</span>[<span>mask</span>]</pre></div>
<p dir="auto">Lastly, you can save and load presets of code snippets so that you don&#39;t have to type the same code again after
closing the application. Those presets are stored in a .json file (presets.json).</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/edit.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/edit.png"/></a></p><hr/>

<p dir="auto">The evaluate widget can be used to debug the gaussian splatting object. By typing
python code, which is executed after the rendering, you can access any variable
from the rendering context and visualize them in a histogram. Some useful variables might be:</p>
<ul dir="auto">
<li>gaussian</li>
<li>render</li>
<li>render_cam</li>
<li>self</li>
</ul>
<p dir="auto">You can also access variables that you have defined in the editor of the Edit Widget.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/eval.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/eval.png"/></a></p><hr/>

<p dir="auto">In the camera widget you can define the type and parameters of the camera. Most importantly, you can choose between the
two modes <strong>Orbit</strong> and <strong>WASD</strong>.</p>
<p dir="auto">In <strong>Orbit</strong> mode, the camera is looking at a specific point in 3D space, and you control the pitch and yaw of the camera
rotating on a sphere around that point by dragging with the mouse over the rendered view.</p>
<p dir="auto">In <strong>WASD</strong> mode, you fly through the scene using the mouse and the WASD keys similar to the camera controls in Unity.</p>
<p dir="auto"><strong>Important</strong>: If the loaded scene is rotated incorrectly, you can adjust that by steering the camera so that it is
looking straight up or down. Then set the up-vector to the current viewing direction by pressing <strong>Set Current Direction</strong>.
If you were looking down, you will have to press the <strong>Flip</strong> button, since the scene is now upside down.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/camera.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/camera.png"/></a></p><hr/>

<p dir="auto">The video widget creates a video sequence of a full rotation around the current object.
Simply define the height of the camera and the rendering resolution. While the video is
rendering, the UI is frozen. A loading screen is shown in the terminal output.</p>
<p dir="auto">ðŸš§This feature is still under construction ðŸš§. Currently, it is not very intuitive to generate videos, as the camera
position is only defined by the <b>Camera Height</b> parameter. This will be changed in the future.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/video.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/video.png"/></a></p><hr/>

<p dir="auto">In the performance widget, you can track the FPS of the viewer and the FPS of the renderer. You can also specify
limits for FPS and enable vertical synchronisation. In the future, there will also be a performance mode which
skips some editing and evaluation calculations.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/performance.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/performance.png"/></a></p><hr/>

<p dir="auto">In the render tab, you can specify the rendering resolution (at the moment only squared resolutions) and the rendering mode.
Next to RGB, you can also render the image 3D depth and the alpha values.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/render.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/render.png"/></a></p><hr/>

<p dir="auto">To save the .ply file or a rendering of the current (edited) 3D scene simply press the respective button in the
save widget. Those files will be saved under: _screenshots or _ply_files. The viewer might be frozen for a short
while, after saving a ply file.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/Florian-Barthel/splatviz/blob/main/images/save.png"><img src="https://github.com/Florian-Barthel/splatviz/raw/main/images/save.png"/></a>
</p></div>

<ul dir="auto">
<li>Attach to Gaussian Splatting training for live tracking</li>
<li>Test other 3DGS render for OSX support</li>
</ul>

<ul dir="auto">
<li>New Design</li>
<li>Compare two or more Gaussian Splatting scenes side by side</li>
<li>Improved camera controls
<ul dir="auto">
<li>Orbit Mode: Camera moves on a sphere around a look_at_point</li>
<li>Free mode: Camera moves free and can be controlled with WASD</li>
</ul>
</li>
</ul>

<p dir="auto">You are more than welcome to add further functionality or a better design to this interactive viewer!
The main goal is to create an easy-to-use tool that can be applied for debugging and for understanding
3D Gaussian Splatting objects.</p>

<p dir="auto">If you find this viewer useful, please consider citing our work:</p>
<div data-snippet-clipboard-copy-content="@misc{barthel2024gaussian,
    title={Gaussian Splatting Decoder for 3D-aware Generative Adversarial Networks}, 
    author={Florian Barthel and Arian Beckmann and Wieland Morgenstern and Anna Hilsmann and Peter Eisert},
    year={2024},
    eprint={2404.10625},
    archivePrefix={arXiv},
    primaryClass={cs.CV}
}"><pre><code>@misc{barthel2024gaussian,
    title={Gaussian Splatting Decoder for 3D-aware Generative Adversarial Networks}, 
    author={Florian Barthel and Arian Beckmann and Wieland Morgenstern and Anna Hilsmann and Peter Eisert},
    year={2024},
    eprint={2404.10625},
    archivePrefix={arXiv},
    primaryClass={cs.CV}
}
</code></pre></div>

<p dir="auto">This viewer is inspired by the visualizer from Efficient Geometry-aware 3D Generative Adversarial
Networks (EG3D).</p>
<p dir="auto">GUI: <a href="https://pyimgui.readthedocs.io/en/latest/guide/first-steps.html" rel="nofollow">pyimgui</a> and <a href="https://github.com/pthom/imgui_bundle">imgui_bundle</a></p>
<p dir="auto">Original code base: <a href="https://github.com/NVlabs/eg3d">EG3D</a></p>
<p dir="auto">3DGS: <a href="https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/" rel="nofollow"> 3D Gaussian Splatting</a></p>
<p dir="auto">Compressing 3DGS scenes: <a href="https://fraunhoferhhi.github.io/Self-Organizing-Gaussians/" rel="nofollow">Compact 3D Scene Representation via Self-Organizing Gaussian Grids</a></p>
<p dir="auto">3DGS Rasterizer with depth and alpha: <a href="https://github.com/slothfulxtx/diff-gaussian-rasterization">Diff rasterizer with depth and alpha</a></p>
</article></div></div>
  </body>
</html>
