<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://elijer.github.io/garden/devnotes/Databases/The-Strengths-of-MongoDB">Original</a>
    <h1>The Strengths of MongoDB</h1>
    
    <div id="readability-page-1" class="page"><div id="quartz-body"><div><article><p><img src="https://thornberry-obsidian-general.s3.us-east-2.amazonaws.com/attachments/9781765246ea951d9e98db16ad45b36e.png" alt="image"/></p>
<p>Most of my experience as a developer is with MongoDB. In a lot of ways, I regret this. SQL is the defacto database, data analysis skill, and data science tool. There’s just no way around it, and it’s for good reason - SQL queries are incredibly expressive and SQL databases tend to be well engineered, ACID-compliant machines that require applications to get their shit together and normalize their data before getting started.</p>
<p>That said, MongoDB is a beast too. It is very young compared to PostGreSQL and MySQL, but in recent years it has matured to the point where it can rival them in almost every feature. Some examples</p>
<ul>
<li>It’s ACID Compliant</li>
<li>It <em>does</em> allow for schema definition and enforcement</li>
<li>It can handle what would be known in SQL-language as joins (making it technically relational, albeit a little bit less relational in design)</li>
<li>It provides all sorts of other features like profiling, caching</li>
</ul>
<p>Of course it’s not the same.</p>
<ul>
<li>It allows documents to be embedded, which can lead to both wins and messes in data architecture</li>
<li>It’s easier to shard</li>
<li>It’s usually not as ACID as, say, PostGres, at least not when it comes to sharding, but this is mathematically a mutually-exclusive tradeoff anyway</li>
<li>Queries and configuration are in JSON, making it easy for JS engineers to pick up</li>
<li>Other devs usually don’t think you’re a real engineer if you use it</li>
</ul>
<p>It has a lot of differences, and as MongoDB has evolved, they’ve become increasingly more subtle and situationally nuanced. And I am still trying to understand them! That said, there a ton of things I love about it, so I thought I’d list them out here.</p>

<p><a href="https://www.mongodb.com/docs/manual/core/timeseries-collections/">Time Series Collections<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> - a collection type that can be useful for collecting and analyzing time-based data.</p>
<p><a href="https://www.mongodb.com/docs/manual/geospatial-queries/#geospatial-queries">Geospatial Queries<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> - useful query type for geospatial data, and I guess potentially any data that can be distributed across multiple dimensions.</p>
<p>[MongoDB Schemas](<a href="https://www.mongodb.com/developer/products/mongodb/mongodb-schema-design-best-practices/">MongoDB Schema Design: Data Modeling Best Practices<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>)- MongoDB is not famous for having schemas - that’s a SQL thing. But. It can. And they can be expressed and enforced thoroughly and granularly. It’s possible, for example, to define regular expressions that govern field data. With tools like the Compass (MongoDB’s official GUI) schema analysis tool and the ability to make schema-violations log <code>warnings</code> and not throw errors, there appears to be considerable support for incrementally migrate non-schema’d collections into ones with schema protection. This is potentially an amazing solution to nimble application design where the schema requirements start unknown and become more concrete development evolves.</p>
<p><a href="https://www.mongodb.com/docs/manual/aggregation/">Aggregation Operations<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> - very powerful tool for doing data transformation with database compute, and prior to sending data over the network. Because aggregations are expressed as arrays of JSON, it’s easy to define aggregations dynamically in javascript, which makes them even more flexible. They can be a little bit more confusing to reason about than SQL queries, but are very expressive, and maybe touring complete who knows.</p>
<p><a href="https://www.mongodb.com/docs/charts/">Atlas Charts<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>- configurable, tableaux-style data visualization dashboard with granular permissioning and programmatic configuration offered by the MongoDB organization to create charts and other (dynamically updating and embeddable) graphics using MongoDB data. Aggregations can be used as an intermediary to transform data before visualization. For convenience, aggregations can also be saved and re-used across multiple visualizations to fields that represent abstractions of other fields and update in realtime. Kind of OP.</p>
<p><a href="https://www.mongodb.com/docs/manual/tutorial/manage-the-database-profiler/">Profiling<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> - I guess I lumped these together because they are both just good tools for improving performance at scale for slow operations. The MongoDB query profiling is configurable and outputs logs for queries that take longer than a certain threshhold, as well as information about those queries. There is an Atlas service (atlas is the suite of services offered by the for-profit part of the MongoDB organization) that allows these logs to selectively create alerts, thereby allowing developers to identify key bottlenecks in queries.</p>
<p><a href="https://www.mongodb.com/docs/manual/core/wiredtiger/">WiredTiger<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>- WireTiger is a caching / “storage engine” program that can be used out of the box with MongoDB Atlas or can be configured to run on a server and cache frequent results.</p>

<ol>
<li><a href="https://github.com/Elijer/mongoose_lab">Mongoose Lab<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>(mongoose is a popular client library / ODM for using mongo)</li>
<li><a href="https://github.com/Elijer/mongo_query_optimization">Mongo Query Optimization<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> (data seeding and writing performance research)</li>
</ol></article><hr/></div></div></div>
  </body>
</html>
