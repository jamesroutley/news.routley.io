<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tesk.page/2024/06/03/libadwaita-splitting-gtk-and-design-language/">Original</a>
    <h1>Libadwaita: Splitting GTK and Design Language</h1>
    
    <div id="readability-page-1" class="page"><div>
  <article id="main">
    <header>
      
    </header>

    

    
      
      <section data-class="card">
          <details>
            <summary aria-label="Table of Contents"><strong>Table of Contents</strong></summary>
            <nav aria-label="Table of Contents">
              <ol id="toc">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#what-is-gtk">What Is GTK?</a></li>
<li>
<a href="#unnecessary-unification-of-the-toolkit-and-design-language">Unnecessary Unification of the Toolkit and Design Language</a>
<ol>
<li><a href="#clash-of-philosophies">Clash of Philosophies</a></li>
<li><a href="#inefficient-diversion-of-resources">Inefficient Diversion of Resources</a></li>
<li><a href="#libhandy-the-predecessor">Libhandy: the Predecessor</a></li>
</ol>
</li>
<li>
<a href="#libadwaita-the-successor">Libadwaita: the Successor</a>
<ol>
<li><a href="#porting-widgets-to-libadwaita">Porting Widgets to Libadwaita</a></li>
<li><a href="#scope-of-support">Scope of Support</a></li>
</ol>
</li>
<li><a href="#state-of-gtk-4-today">State of GTK 4 Today</a></li>
<li><a href="#alternate-platforms">Alternate Platforms</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
            </nav>
          </details>
      </section>
    

    <h2 id="introduction">
  
  
    Introduction<a href="#introduction" title="Permalink to “Introduction”" aria-label="Permalink to “Introduction”">§</a>
  
  
</h2>
    

<p>Recently, the Linux Mint Blog published <a href="https://blog.linuxmint.com/?p=4675" rel="external nofollow noopener" target="_blank">Monthly News – April 2024</a>, which goes into detail about wanting to fork and maintain older GNOME apps in collaboration with other GTK-based desktop environments.</p>

<p>Despite the good intentions of the author, Clem, many readers interpreted this as an attack against GNOME. Specifically: <a href="https://gtk.org" rel="external nofollow noopener" target="_blank">GTK</a>, <a href="https://gnome.pages.gitlab.gnome.org/libadwaita" rel="external nofollow noopener" target="_blank">libadwaita</a>, the relationship between them, and their relevance to any desktop environment or desktop operating system. Unfortunately, many of these readers seem to have a lot of difficulty understanding what GTK <em>is</em> trying to be, and how libadwaita helps.</p>

<p>In this article, we’ll look at the history of why and how libadwaita was born, the differences between GTK 4 and libadwaita in terms of scope of support, their relevance to each desktop environment and desktop operating system, and the state of GTK 4 today.</p>
<h2 id="what-is-gtk">
  
  
    What Is GTK?<a href="#what-is-gtk" title="Permalink to “What Is GTK?”" aria-label="Permalink to “What Is GTK?”">§</a>
  
  
</h2>
    

<p>First of all, what is GTK? GTK is a cross-platform widget toolkit from the GNOME Project, which means it provides interactive elements that developers can use to build their apps.</p>

<p>The latest major release of GTK is 4, which brings performance improvements over GTK 3. GTK 4 also removes several widgets that were part of the GNOME design language, which became a controversy. In the context of application design, a <em>design language</em> is the visual characteristics that are communicated to the user. Fonts, colors, shapes, forms, layouts, writing styles, spacing, etc. are all elements of the design language.<sup><a href="https://www.smashingmagazine.com/2020/03/visual-design-language-building-blocks/" rel="external nofollow noopener" target="_blank">(Source)</a></sup></p>

    

<p>In general, cross-platform toolkits tend to provide general-purpose/standard widgets, typically with a non-opinionated styling, i.e. widgets and design patterns that are used consistently across different operating systems (OSes) and desktop environments.</p>

<p>However, GTK had the unique case of bundling GNOME’s design language into GTK, which made it far from generic, leading to problems of different lexicons, mainly philosophical and technical problems.</p>
<h3 id="clash-of-philosophies">
  
  
    Clash of Philosophies<a href="#clash-of-philosophies" title="Permalink to “Clash of Philosophies”" aria-label="Permalink to “Clash of Philosophies”">§</a>
  
  
</h3>
    

<p>When we look at apps made for the GNOME desktop (will be referred to as “GNOME apps”) as opposed to non-GNOME apps, we notice that they’re distinctive: GNOME apps tend to have <a href="https://en.wikipedia.org/wiki/Hamburger_button" rel="external nofollow noopener" target="_blank">hamburger buttons</a>, larger buttons, larger padding and margins, etc., while most non-GNOME apps tend to be more compact, use <a href="https://en.wikipedia.org/wiki/Menu_bar" rel="external nofollow noopener" target="_blank">menu bars</a>, <a href="https://learn.microsoft.com/en-us/windows/apps/design/basics/titlebar-design#standard-design" rel="external nofollow noopener" target="_blank">standard title bars</a>, and many other design metaphors that may not be used in GNOME apps.</p>

<p>This is because, from a design philosophy standpoint, GNOME’s design patterns tend to go in a different direction than most apps. As a brand and product, GNOME has a design language it adheres to, which is accompanied by the GNOME <a href="https://developer.gnome.org/hig" rel="external nofollow noopener" target="_blank">Human Interface Guidelines</a> (HIG).</p>

<p>As a result, GTK and GNOME’s design language clashed together. Instead of being as general-purpose as possible, GTK as a cross-platform toolkit contained an entire design language intended to be used only by a specific desktop, thus defeating the purpose of a cross-platform toolkit.</p>

<p><em>For more information on GNOME’s design philosophy, see “<a href="https://tesk.page/2023/04/02/what-is-gnomes-philosophy/">What is GNOME’s Philosophy?</a>”.</em></p>
<h3 id="inefficient-diversion-of-resources">
  
  
    Inefficient Diversion of Resources<a href="#inefficient-diversion-of-resources" title="Permalink to “Inefficient Diversion of Resources”" aria-label="Permalink to “Inefficient Diversion of Resources”">§</a>
  
  
</h3>
    

<p>The unnecessary unification of the toolkit and design language also divided a significant amount of effort and maintenance: Instead of focusing solely on the general-purpose widgets that could be used across all desktop OSes and environments, much of the focus was on the widgets that were intended to conform to the GNOME HIG. Many of the general-purpose widgets also included features and functionality that were only relevant to the GNOME desktop, making them less general-purpose.</p>

<p>Thus, the general-purpose widgets were being implemented and improved slowly, and the large codebase also made the GNOME widgets and design language difficult to maintain, change, and adapt. In other words, almost everything was hindered by the lack of independence on both sides.</p>
<h3 id="libhandy-the-predecessor">
  
  
    Libhandy: the Predecessor<a href="#libhandy-the-predecessor" title="Permalink to “Libhandy: the Predecessor”" aria-label="Permalink to “Libhandy: the Predecessor”">§</a>
  
  
</h3>
    

<p>Because of the technical bottlenecks caused by the philosophical decisions, <a href="https://gnome.pages.gitlab.gnome.org/libhandy" rel="external nofollow noopener" target="_blank">libhandy</a> was created <a href="https://source.puri.sm/Librem5/libhandy/-/commit/d7b066dcac396ec65904a632fb91f63abe5b42cc" rel="external nofollow noopener" target="_blank">in 2017</a>, with the first experimental version released in <a href="https://source.puri.sm/Librem5/libhandy/-/commit/6b34695abbf64281f5a2879bd82fa5e8469ba7da" rel="external nofollow noopener" target="_blank">2018</a>. As described on the website, libhandy is a collection of “[b]uilding blocks for modern adaptive GNOME applications.” In other words, libhandy provides additional widgets that can be used by GNOME apps, especially those that use GTK 3. For example, <a href="https://gitlab.gnome.org/GNOME/gnome-boxes/-/blob/f253b5c9bc908c2c53ad7676394c25fd60d05410/src/meson.build#L105" rel="external nofollow noopener" target="_blank">Boxes uses libhandy</a>, and many GNOME apps that used to use GTK 3 also used libhandy.</p>

<p>However, some of the problems remained: Since libhandy was relatively new at the time, most GNOME widgets were still part of GTK 3, which continued to suffer from the consequences of merging the toolkit and design language. Furthermore, GTK 4 was released at the end of December 2020 — after libhandy. Since libhandy was created before the initial release of GTK 4, it made little sense to fully address these issues in GTK 3, especially when doing so would have caused major breakages and inconveniences for GTK, libhandy, and app developers. As such, it wasn’t worth the effort.</p>

<p>With these issues in mind, the best course of action was to introduce all these major changes and breakages in GTK 4, use libhandy as an experiment and to gain experience, and properly address these issues in a successor.</p>
<h2 id="libadwaita-the-successor">
  
  
    Libadwaita: the Successor<a href="#libadwaita-the-successor" title="Permalink to “Libadwaita: the Successor”" aria-label="Permalink to “Libadwaita: the Successor”">§</a>
  
  
</h2>
    

<p>Because of all the above problems, libadwaita was created: libhandy’s successor that will accompany GTK 4.</p>

<p>GTK 4 was initially released in <a href="https://blog.gtk.org/2020/12/16/gtk-4-0/" rel="external nofollow noopener" target="_blank">December 2020</a>, and libadwaita was released one year later, in <a href="https://blogs.gnome.org/alicem/2021/12/31/libadwaita-1-0/" rel="external nofollow noopener" target="_blank">December 2021</a>. With the experience gained from libhandy, libadwaita managed to become extensible and easy to maintain.</p>

<p>Libadwaita is a platform library accompanying GTK 4. A <em>platform library</em> is a library used to complement a specific platform. In the case of libadwaita, the platform it targets is the GNOME desktop.</p>
<h3 id="porting-widgets-to-libadwaita">
  
  
    Porting Widgets to Libadwaita<a href="#porting-widgets-to-libadwaita" title="Permalink to “Porting Widgets to Libadwaita”" aria-label="Permalink to “Porting Widgets to Libadwaita”">§</a>
  
  
</h3>
    

<p>Some GNOME widgets from GTK 3 (or earlier versions of GTK 4) were removed or deprecated in GTK 4 and were reimplemented in / transferred to libadwaita, for example:</p>
<ul>
  <li>
<del><a href="https://docs.gtk.org/gtk4/class.Dialog.html" rel="external nofollow noopener" target="_blank">GtkDialog</a></del> → <a href="https://gnome.pages.gitlab.gnome.org/libadwaita/doc/main/class.Dialog.html" rel="external nofollow noopener" target="_blank">AdwDialog</a>
</li>
  <li>
<del><a href="https://docs.gtk.org/gtk4/class.InfoBar.html" rel="external nofollow noopener" target="_blank">GtkInfoBar</a></del> → <a href="https://gnome.pages.gitlab.gnome.org/libadwaita/doc/main/class.Banner.html" rel="external nofollow noopener" target="_blank">AdwBanner</a>
</li>
</ul>

<p>These aforementioned widgets only benefited GNOME apps, as they were strictly designed to provide widgets that conformed to the GNOME HIG. Non-GNOME apps usually didn’t use these widgets, so they were practically irrelevant to everyone else.</p>

<p>In addition, libadwaita introduced several widgets as counterparts to GTK 4 to comply with the HIG:</p>
<ul>
  <li>
<a href="https://docs.gtk.org/gtk4/class.HeaderBar.html" rel="external nofollow noopener" target="_blank">GtkHeaderBar</a> → <a href="https://gnome.pages.gitlab.gnome.org/libadwaita/doc/main/class.HeaderBar.html" rel="external nofollow noopener" target="_blank">AdwHeaderBar</a>
</li>
  <li>
<a href="https://docs.gtk.org/gtk4/class.AlertDialog.html" rel="external nofollow noopener" target="_blank">GtkAlertDialog</a> → <a href="https://gnome.pages.gitlab.gnome.org/libadwaita/doc/main/class.AlertDialog.html" rel="external nofollow noopener" target="_blank">AdwAlertDialog</a>
</li>
  <li>
<a href="https://docs.gtk.org/gtk4/class.AboutDialog.html" rel="external nofollow noopener" target="_blank">GtkAboutDialog</a> → <a href="https://gnome.pages.gitlab.gnome.org/libadwaita/doc/main/class.AboutDialog.html" rel="external nofollow noopener" target="_blank">AdwAboutDialog</a>
</li>
</ul>

<p>Similarly, these aforementioned GTK 4 (the ones starting with <code>Gtk</code>) widgets are not designed to comply with the GNOME HIG. Since GTK 4 widgets are supposed to be general-purpose, they should not be platform-specific; the HIG no longer has any influence on GTK, only on the development of libadwaita.</p>
<h3 id="scope-of-support">
  
  
    Scope of Support<a href="#scope-of-support" title="Permalink to “Scope of Support”" aria-label="Permalink to “Scope of Support”">§</a>
  
  
</h3>
    

<p>The main difference between GTK 4 and libadwaita is the scope of support, specifically the priorities in terms of the GNOME desktop, and desktop environment and OS support. While the GNOME desktop is the top priority for both GTK and libadwaita, GTK 4 is nowhere near as focused on the GNOME desktop as libadwaita is. GTK 4, while opinionated, still tries to get closer to the traditional desktop metaphor by providing these general-purpose widgets, while libadwaita provides custom widgets to conform to the GNOME HIG.</p>

<p>Since libadwaita is only made for the GNOME desktop, and the GNOME desktop is primarily officially supported on Linux, libadwaita thus primarily supports Linux. In contrast, GTK is officially supported on all major operating systems (Windows, macOS, Linux). However, since GTK 4 is mostly developed by GNOME developers, it works best on Linux and <span>GNOME — hence</span> “opinionated”.</p>
<h2 id="state-of-gtk-4-today">
  
  
    State of GTK 4 Today<a href="#state-of-gtk-4-today" title="Permalink to “State of GTK 4 Today”" aria-label="Permalink to “State of GTK 4 Today”">§</a>
  
  
</h2>
    

<p>Thanks to the removal of GNOME widgets from GTK 4, GTK developers can continue to work on general-purpose widgets, without being influenced or restricted in any way by the GNOME HIG. Developers of cross-platform GTK 3 apps that rely exclusively on general-purpose widgets can be more confident that GTK 4 won’t remove these widgets, and hopefully enjoy the benefits that GTK 4 offers.</p>

<p>At the time of writing, there are several cross-platform apps that have either successfully ported to GTK 4, or are currently in the process of doing so. To name a few: <a href="https://flathub.org/apps/org.freeciv.gtk4" rel="external nofollow noopener" target="_blank">Freeciv gtk4 client</a>, <a href="https://handbrake.fr" rel="external nofollow noopener" target="_blank">HandBrake</a>, <a href="https://inkscape.org" rel="external nofollow noopener" target="_blank">Inkscape</a>, and <a href="https://transmissionbt.com" rel="external nofollow noopener" target="_blank">Transmission</a>. The <a href="https://libreoffice.org" rel="external nofollow noopener" target="_blank">LibreOffice</a> developers are working on the GTK 4 port, with the <a href="https://wiki.documentfoundation.org/Development/GTK4" rel="external nofollow noopener" target="_blank"><code>gtk4</code> VCL plugin</a> option enabled. For example, the <a href="https://archlinux.org/packages/extra/x86_64/libreoffice-fresh/" rel="external nofollow noopener" target="_blank"><code>libreoffice-fresh</code></a> package from Arch Linux has it <a href="https://gitlab.archlinux.org/archlinux/packaging/packages/libreoffice-fresh/-/blob/d5fc44b4659c0512fea49277d04ca505bd4e5299/PKGBUILD#L202" rel="external nofollow noopener" target="_blank">enabled</a>.</p>

<p>Here are screenshots of the aforementioned apps:</p>

<figure>

  <img src="https://tesk.page/assets/Articles/libadwaita-splitting-gtk-and-design-language/freeciv-gtk4.webp" loading="lazy" alt="" width="1664" height="1027"/>
  
    <figcaption><p><em>Freeciv gtk4 client</em> in the game view, displaying a title bar, a custom background, a menu bar, a tab view with the Chat tab selected, an entry, and a few buttons.</p>
</figcaption>
  
</figure>

<figure>

  <img src="https://tesk.page/assets/Articles/libadwaita-splitting-gtk-and-design-language/handbrake-gtk4.webp" loading="lazy" alt="" width="1245" height="766"/>
  
    <figcaption><p><em>HandBrake</em> in the main view, displaying a title bar, a menu bar, a horizontal toolbar below it with custom buttons, entries, popover buttons, a tab view with the Summary tab selected, containing a popover button and several checkboxes.</p>
</figcaption>
  
</figure>

<figure>

  <img src="https://tesk.page/assets/Articles/libadwaita-splitting-gtk-and-design-language/inkscape-gtk4.webp" loading="lazy" alt="" width="1850" height="1121"/>
  
    <figcaption><p>Development version of <em>Inkscape</em> in the main view, displaying a title bar, a menu bar, a horizontal toolbar below, vertical toolbars on the left and right, a canvas grid on the center left, a tab view on the center right with the Display Properties tab selected, and a toolbar at the bottom.</p>
</figcaption>
  
</figure>

<figure>

  <img src="https://tesk.page/assets/Articles/libadwaita-splitting-gtk-and-design-language/libreoffice-gtk4.webp" loading="lazy" alt="" width="1964" height="1180"/>
  
    <figcaption><p><em>LibreOffice Writer</em> with the experimental <code>gtk4</code> VCL plugin in workspace view, displaying a title bar, a menu bar, two horizontal toolbars below, a vertical toolbar on the right, a workspace grid in the middle with selected text, and a status bar at the bottom.</p>
</figcaption>
  
</figure>

<figure>

  <img src="https://tesk.page/assets/Articles/libadwaita-splitting-gtk-and-design-language/transmission-gtk4.webp" loading="lazy" alt="" width="1283" height="647"/>
  
    <figcaption><p><em>Transmission</em> in the main view, displaying a title bar, a menu bar, a horizontal toolbar, a filter bar, an empty field in the center of the view, and a status bar at the bottom.</p>
</figcaption>
  
</figure>
<h2 id="alternate-platforms">
  
  
    Alternate Platforms<a href="#alternate-platforms" title="Permalink to “Alternate Platforms”" aria-label="Permalink to “Alternate Platforms”">§</a>
  
  
</h2>
    

<p>While libadwaita is the most popular and widely used platform library that accompanies GTK 4, there are several alternatives to libadwaita:</p>

<ul>
  <li>
<a href="https://valadoc.org/granite-7/index.htm" rel="external nofollow noopener" target="_blank">Granite</a> is developed and maintained by <a href="https://elementary.io/brand" rel="external nofollow noopener" target="_blank">elementary, Inc.</a>, and focuses on <a href="https://elementary.io" rel="external nofollow noopener" target="_blank">elementary OS</a> and the Pantheon desktop. Apps that use Granite can be found in the <a href="https://appcenter.elementary.io/" rel="external nofollow noopener" target="_blank">elementary AppCenter</a>.</li>
  <li>
<a href="https://docs.developers.tauos.co/libhelium/libhelium-1" rel="external nofollow noopener" target="_blank">Libhelium</a> is developed and maintained by <a href="https://fyralabs.com" rel="external nofollow noopener" target="_blank">Fyra Labs</a>, and focuses on <a href="https://tauos.co" rel="external nofollow noopener" target="_blank">tauOS</a>. Apps using libhelium can be found in the <a href="https://github.com/topics/libhelium" rel="external nofollow noopener" target="_blank">“libhelium” topics on GitHub</a>.</li>
</ul>

<p>Just like libadwaita, these platform libraries offer custom widgets and styling that differ from GTK and are built for their respective platforms, so it’s important to realize that <strong>GTK is meant to be built with a complementary platform library that extends its functionality <u>when targeting a specific platform</u></strong>.</p>

<p>Similarly, <a href="https://develop.kde.org/frameworks/kirigami//" rel="external nofollow noopener" target="_blank">Kirigami</a> from KDE accompanies Qt to build Plasma apps. <a href="https://mauikit.org/" rel="external nofollow noopener" target="_blank">MauiKit</a> from the Maui Project (another KDE project) also accompanies Qt, but targets <a href="https://nxos.org/" rel="external nofollow noopener" target="_blank">Nitrux</a>. <a href="https://pop-os.github.io/libcosmic/cosmic/" rel="external nofollow noopener" target="_blank">Libcosmic</a> by System76 accompanies <a href="https://iced.rs/" rel="external nofollow noopener" target="_blank">iced</a> to build COSMIC apps.</p>
<h2 id="conclusion">
  
  
    Conclusion<a href="#conclusion" title="Permalink to “Conclusion”" aria-label="Permalink to “Conclusion”">§</a>
  
  
</h2>
    

<p>A cross-platform toolkit should primarily provide general-purpose widgets. Third parties should be able to extend the toolkit as they see fit through a platform library if they want to target a specific platform.</p>

<p>As we’ve seen throughout the philosophical and technical issues with GTK, a lot of effort has gone into moving GNOME widgets from GTK 4 to libadwaita. GTK 4 will continue to provide these general-purpose widgets for apps intended to run on any desktop or OS, while platform libraries such as libadwaita, Granite and libhelium provide styling and custom widgets that respect their respective platforms.</p>

<p>Libadwaita is targeted exclusively at the GNOME ecosystem, courtesy of the GNOME HIG. Apps built with libadwaita are intended to run best on GNOME, while GTK 4 apps that don’t come with a platform library are intended to run everywhere.</p>

  </article>
</div></div>
  </body>
</html>
