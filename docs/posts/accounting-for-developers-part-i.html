<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.moderntreasury.com/journal/accounting-for-developers-part-i">Original</a>
    <h1>Accounting For Developers, Part I</h1>
    
    <div id="readability-page-1" class="page"><div><h2 id="introduction">Introduction</h2><p>As a payment operations startup, accounting principles are core to our work. We have seen them implemented at scale at some of the largest fintechs and marketplaces. Yet, accounting seems like an arcane topic when you’re starting out. This <a tabindex="0" target="_blank" rel="noreferrer" href="https://news.ycombinator.com/item?id=23964513">HackerNews thread</a>, for example, is rather representative of the state of confusion around the topic. </p><p>Over the years, there have been many accounting for developer guides published (two great ones are <a tabindex="0" target="_blank" rel="noreferrer" href="https://beancount.github.io/docs/the_double_entry_counting_method.html#double-entry-bookkeeping">Martin Blais</a>&#39; and <a tabindex="0" target="_blank" rel="noreferrer" href="https://martin.kleppmann.com/2011/03/07/accounting-for-computer-scientists.html">Martin Kleppmans’</a>), but we wanted to add our two cents to the discussion. In our experience, a concepts-first approach to explaining accounting comes in handy when you are designing systems that move or touch money.</p><p>This post is divided into two parts. Part I covers the foundational accounting principles. Part II will show how to bring it all together by walking through how to build a Venmo clone.</p><h2 id="is-this-guide-for-you">Is this guide for you?</h2><p>This guide is designed for developers that work on applications that handle money in any way. You may work at a fintech company (the data you handle <em>is</em> money), or perhaps you are responsible for managing the fintech integrations in your startup (you handle data <em>and </em>money). We think that every engineer that builds or maintains such systems benefits from knowing the core principles of accounting.</p><h2 id="does-accounting-really-matter-in-software-development">Does accounting really matter in software development?</h2><p>Double-entry systems are more reliable at tracking money than any other viable alternative. As a payments infrastructure company, we often get to see the architecture of some of the most successful software companies. One design is constant: they use <a tabindex="0" href="https://www.moderntreasury.com/journal/what-is-double-entry-accounting">double-entry accounting</a> in their code. Some build their applications from the start with accounting concepts in mind, but in most cases, companies begin incorporating these concepts only after their original code starts causing problems.</p><p>When software fails to track money properly, it does so in a number of common patterns. The most common failure mode is software accidentally creating or destroying records of funds. This leads to all sorts of inconsistencies. Every developer we know has horror stories about explaining to their finance team why a customer is owed money or what caused a payout to have an unexpected amount. Internal records differing from bank statements, <a tabindex="0" href="https://www.moderntreasury.com/learn/bank-reconciliation">reconciliation</a> engines gone awry, balances that don’t make sense given a set of transactions—these are all problems that can be mitigated with double-entry accounting. For more evidence that double-entry systems are a good standard for scalable applications, see the stories of <a tabindex="0" target="_blank" rel="noreferrer" href="https://eng.uber.com/money-scale-strong-data/">Uber</a>, <a tabindex="0" target="_blank" rel="noreferrer" href="https://developer.squareup.com/blog/books-an-immutable-double-entry-accounting-database-service/">Square</a>, and <a tabindex="0" target="_blank" rel="noreferrer" href="https://medium.com/airbnb-engineering/tracking-the-money-scaling-financial-reporting-at-airbnb-6d742b80f040">Airbnb</a>.</p><p>The core principle of double-entry accounting is that <strong>every transaction should record both where the money came from and what the money was used for.</strong> This guide explains why that is and how it works.</p><h2 id="the-building-blocks-of-an-accounting-system">The building blocks of an accounting system</h2><p>A good starting point is understanding accounts and transactions.</p><h3>Accounts</h3><p>An account is a segregated pool of value. The easiest analogy here is your own bank checking account: money that a bank is holding on your behalf, clearly demarcated as yours. Any discrete balance can be an account: from a user’s balance on Venmo to the annual defense spending of the United States. Accounts generally correlate with the balances you want to track.</p><p>In accounting, accounts have <em>types</em>. More on this later.</p><h3>Transactions</h3><p>Transactions are atomic events that affect account balances. Transactions are composed of entries<strong>. </strong>A transaction has at least two entries, each of which corresponds to one account.</p><p>Let’s use a simple Venmo transfer as an example. Jim is sending $50 to Mary:</p><div><figure><span><span></span><img alt="Transaction: Jim sends $50 to Mary" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><p>The entries in this transaction tell which accounts were affected. If each user’s balance is set up as an account, a transaction can simultaneously write an entry against each account.</p><p>Now, let’s expand this model with more accounts and a handful of additional events:</p><div><figure><span><span></span><img alt="Simple ledger" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Simple ledger of Jim and Mary&#39;s accounts</figcaption><p>Here I have a ledger—a log of events with monetary impact. We often see developers mutating balances directly rather than computing a balance from a log of transactions. This is suboptimal.</p><p>While mutating a balance directly is more efficient and simpler to implement, it’s more accurate to store immutable transactions and always compute balances from those transactions. Mutating balances directly creates a system that is prone to errors, as it becomes non-trivial to detect and reconcile inaccuracies.</p><p>Notice how each transaction has multiple entries. Each entry belongs to a transaction and an account. By comparing entries side by side, one can clearly see where the money came from and what it was used for. Double-entry ensures that, as transactions are logged, sources and uses of funds are clearly shown, and balances can be reconstructed as of any date:</p><div><figure><span><span></span><img alt="Transaction #2 - Jim sends funds to Mary" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Zooming in on a transaction from Jim to Mary</figcaption><p>This core idea—<strong>one transaction, at least two entries, one representing the source and the other representing the use of funds</strong>—is one of the foundational ideas of double-entry accounting [<a href="#2e74e9c1afb3">1</a>]. We’ll expand more on this later.</p><h2 id="dual-aspect">Dual Aspect</h2><p>As mentioned before, another big innovation of accounting was giving <em>types </em>to accounts<em>. </em>The two types we will cover here are <strong>debit normal </strong>and <strong>credit normal.</strong></p><p>By definition:</p><ul><li>Accounts that represent funds you own, or <strong>uses</strong> of money, are <strong>debit normal</strong> accounts.</li><li>Accounts that represent funds you owe, or <strong>sources</strong> of money, are <strong>credit normal </strong>accounts<strong>.</strong></li></ul><p>Let’s illustrate that with a simple table with two columns, the right side listing credit normal accounts and the left side listing debit normal accounts. We will place accounts that track uses of funds on the debit normal side and accounts that track sources of funds on the credit normal side.</p><div><figure><span><span></span><img alt="Debit Normal and Credit Normal" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Debit Normal and Credit Normal</figcaption><p>Examples of <strong>uses</strong> of funds are<strong> assets </strong>and <strong>expenses. </strong>Buying inventory, making an investment, acquiring physical property, and so on. The term “use” here is broadly defined: letting cash sit in a bank account is a use of funds, as well as selling on credit to someone else (you are effectively ‘using’ the money you’d get on a sale by extending them credit). The accounts that represent these balances are all debit normal accounts.</p><p>Conversely<strong>, sources</strong> of funds—<strong>such as liabilities, equity, or revenue</strong>—can mean bank loans, investors&#39; capital, accumulated profits, or income. “Source” is broadly defined here, too: if you are buying on credit, for instance, that is a “source” of money for you in the sense that it prevents you from spending money right now. Accounts that represent these balances are credit normal accounts.</p><div><figure><span><span></span><img alt="Debit Normal v Credit Normal" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>What ladders up to debit normal and credit normal accounts</figcaption><p>Here is a handy table with the different account types:</p><div><figure><span><span></span><img alt="Account categories" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Account categories with simple mnemonics and examples</figcaption><p>(Notice that <strong>debit</strong> cards hold money you own, while <strong>credit</strong> cards hold money you owe.)</p><h2 id="debits-and-credits">Debits and credits</h2><p>Some of the guides we mentioned at the beginning of this post advise developers to “save the confusion and flush out debits and credits from your mind.” We do recognize that debits and credits can be challenging to grasp, but we think fully mastering these concepts is important when creating transaction handling rules.</p><p>Part of the confusion is that “debits” and “credits” are often used as verbs: to debit or to credit an account. Debits and credits can also refer to <em>entries, </em>for example:</p><div><figure><span><span></span><img alt="Debit and Credit Entries" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Debit and credit entries</figcaption><p>This sample transaction has two entries: we’re <strong>debiting </strong>our cash account and <strong>crediting </strong>our equity account for $1M. <em>Save for a few special situations, accounting systems only log positive numbers</em>. The effect on balances will depend on whether the entry is on the “debit side“ or “credit side.”</p><p>Debits and credits are a shorthand for the expected effects on accounts, depending on their type. A credit entry will always increase the balance of a credit normal account and decrease the balance of a debit normal account. Put differently:</p><div><figure><span><span></span><img alt="Effect on balance" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><p>Let’s continue to model out a few transactions to drive this point home. Let’s use a fictitious startup called Modern Bagelry—an eCommerce store for premium bagels.</p><p>In this example, we will use four accounts: <strong>Cash </strong>and <strong>Inventory </strong>(both debit normal accounts) as well as <strong>Equity</strong> and <strong>Loans</strong> (both credit normal accounts). Let’s say this ledger starts on a day T, and we are measuring time in days.</p><div><figure><span><span></span><img alt="Modern Bagelry Example" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Modern Bagelry example of debits and credits</figcaption><p>A common misconception is that one account needs to decrease while another needs to increase. However, they can both increase or decrease in tandem, depending on the debit and credit entries in the transaction and the account types. In the first transaction cash increases because it’s a debit entry in a debit normal account (cash); equity also increases because it’s a credit entry in a credit normal account (equity). Conversely, in the last transaction both balances decrease because we are adding a debit entry into a credit normal account (loans) and a credit entry into a debit normal account (cash).</p><h2 id="balancing-debits-and-credits">Balancing debits and credits</h2><p>Tracking sources and uses of funds in a <a tabindex="0" target="_blank" rel="noreferrer" href="https://www.moderntreasury.com/learn/single-vs-double-entry-accounting">single ledger with double-entry</a> is helpful to clearly show clearly that balances match.</p><p>Let’s say we are aggregating the balances for each account in the example above right after each transaction takes place:</p><div><figure><span><span></span><img alt="Ending balances" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="responsive"/></span></figure></div><figcaption>Ending balances for Modern Bagelry</figcaption><p>A system of accounts will <em>balance</em> as long as the balance on debit normal accounts equals the balance on credit normal accounts. The ending balances of <strong>Cash </strong>($1.22M)<strong> </strong>and <strong>Inventory</strong> ($250k) sum to $1.47M. That is <strong>equal</strong> to the sum of ending balances of <strong>Equity </strong>($1M)<strong> </strong>and <strong>Loans </strong>($470k). It is said that our accounts in this example are balanced. Not matching would mean the system created or lost money out of nothing.</p><p>We’ll walk through how to implement these concepts in more detail in our next post.</p><h2 id="in-summary">In summary</h2><p>Let’s recap the principles we reviewed so far:</p><ul><li>A ledger is a timestamped log of events that have a monetary impact.</li><li>An account is a discrete pool of value that represents a balance you want to track.</li><li>A transaction is an event recorded in the ledger.</li><li>Transactions must have two or more entries.</li><li>Entries belong to a ledger transaction and also belong to an account.</li><li>Accounts can be classified as credit normal or debit normal.</li><li>Entries can be added onto the ledger “on the debit side” or “on the credit side.&#34; Debits and credits refer to how a given entry will affect an account’s balance:<ul><li>Debits—or entries on the debit side—increase the balance of debit normal accounts, while credits decrease it.</li><li>Credits—or entries on the credit side—increase the balance of credit normal accounts, while debits decrease it.</li></ul></li><li>If the sum of balances of all credit normal accounts matches the sum of balances of all debit normal accounts in a single ledger, it is said that the ledger is balanced. This is an assurance of consistency and that all money is properly accounted for.</li></ul><p>In part two, we’ll add some complexity to transaction structures, and we’ll bring everything together by doing a walkthrough of how to build a Venmo clone.</p><p>If you are a developer who works with money, Modern Treasury <a tabindex="0" href="https://www.moderntreasury.com/products/ledgers">Ledgers</a> simplifies the process of building a double-entry system. Reach out to us here if we can be helpful.</p></div></div>
  </body>
</html>
