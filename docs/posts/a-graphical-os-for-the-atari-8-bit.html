<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://atari8.co.uk/gui/">Original</a>
    <h1>A Graphical OS for the Atari 8-bit</h1>
    
    <div id="readability-page-1" class="page"><div>
			
<div id="attachment_616"><p><a href="https://atari8.co.uk/wp-content/uploads/2015/03/gui3.png" data-slb-active="1" data-slb-asset="98041363" data-slb-internal="0" data-slb-group="37"><img aria-describedby="caption-attachment-616" src="https://atari8.co.uk/wp-content/uploads/2015/03/gui3-300x214.png" alt="gui3" width="300" height="214" srcset="https://atari8.co.uk/wp-content/uploads/2015/03/gui3-300x214.png 300w, https://atari8.co.uk/wp-content/uploads/2015/03/gui3-624x446.png 624w, https://atari8.co.uk/wp-content/uploads/2015/03/gui3.png 672w" sizes="(max-width: 300px) 100vw, 300px"/></a></p><p id="caption-attachment-616">The Graphical OS’s task monitor, with real-time CPU load monitoring</p></div>
<p>Atari 8-bit fans have long hankered after a GUI similar to GEOS on the Commodore 64. Diamond GOS went some way to addressing this deficiency, and since then there have been several creditable attempts at implementing a GUI OS on the A8. Now there’s another one in the pipeline: an as yet unnamed project which aims to bring a pre-emptive multi-tasking graphical operating system to the 8-bit Atari.</p>
<p>The most recent demo version of the GUI OS can be downloaded below:</p>
<p><a href="https://atari8.co.uk/wp-content/uploads/2015/03/GOS-ROMs.zip" data-mtli="mtli_filesize60794kB">Atari 8-bit Graphical OS</a></p>
<p>The ZIP file contains ROMs and ATR flashers for a variety of popular programmable cartridges, and separate versions are provided for use with Atari ST and Commodore Amiga mice.</p>
<h2>Info</h2>
<p>The GUI/OS project grew out of a simple mouse demo, based on the interrupt driven mouse handler by John Maris. However, thanks to ideas and help from AtariAge members analmux, andym00, and popmilo, a simulated hi-res hardware sprite pointer was developed, of which the underlying application is completely unaware.</p>
<div id="attachment_614"><p><a href="https://atari8.co.uk/wp-content/uploads/2015/03/gui.png" data-slb-active="1" data-slb-asset="370707359" data-slb-internal="0" data-slb-group="37"><img aria-describedby="caption-attachment-614" loading="lazy" src="https://atari8.co.uk/wp-content/uploads/2015/03/gui-300x214.png" alt="gui" width="300" height="214" srcset="https://atari8.co.uk/wp-content/uploads/2015/03/gui-300x214.png 300w, https://atari8.co.uk/wp-content/uploads/2015/03/gui-624x446.png 624w, https://atari8.co.uk/wp-content/uploads/2015/03/gui.png 672w" sizes="(max-width: 300px) 100vw, 300px"/></a></p><p id="caption-attachment-614">The Graphical OS running nine tasks</p></div>
<p>Meanwhile, Paul Fisher took on full responsibility for font design and production (creating a tool-chain for converting BDF fonts for use with our GUI), and has designed several hundred icons and dozens of other resources. He is also chief beta-tester, and without Paul’s assistance, this project would have been an impossible undertaking. Paul also created a number of screen mock-ups depicting how the finished UI might look and providing a template for the actual design. When completed, the completed graphical OS will include:</p>
<ul>
<li>A pre-emptively multitasking kernel supporting up to 16 processes</li>
<li>Inter-process messaging system, supporting up to 64 open messages</li>
<li>Completely replaces the Atari OS and DOS</li>
<li>File system drivers supporting FAT12, FAT16 and FAT32</li>
<li>Overlapping, movable, sizeable windows</li>
<li>Cascading pull-down and pop-up menus</li>
<li>Movable desktop icons and shortcuts</li>
<li>Per-process and overall CPU load profiling</li>
<li>Dialogue boxes with a rich control set (list boxes, spinners, sliders)</li>
<li>256 character fonts from 6 to 32 points</li>
<li>Italic, boldface, and underline, outline, and shadow styles for all fonts</li>
<li>Smooth, quick and responsive mouse control</li>
<li>Desktop file manager with drag-and-drop support</li>
<li>Comprehensive API and technical documentation for developers</li>
</ul>
<p>Here’s a video of the GOS in action following a recent re-write of the low-level graphics code:</p>
<p><iframe loading="lazy" width="500" height="375" src="https://www.youtube.com/embed/T14dL9MeMHE?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe></p>
<p>While it is hoped that the OS will support unexpanded 64KB XL/XE machines in some minimal way, the realistic base hardware requirement will be an 8-bit Atari XL/XE with at least 128KB, a flash cartridge (or Ultimate 1MB/Incognito), and an ST or Amiga compatible mouse or trackball.</p>
<p>In late 2012, Jörn Mika (aka Prodatron), author of the remarkable SymbOS Graphical Operating System for the CP/M, MSX and other Z80 platforms, approached me with some suggestions regarding rendering, window management and multi-tasking. Because of those pivotal conversations and the insight Jörn provided, the decision was made to abandon the A8 GUI’s right-threaded binary tree internal object structures (initially modelled after TOS on the ST), and adopt instead flat window records almost identical to those used by the SymbOS API. This change immediately yielded considerable reductions in code complexity and size, and an increase in efficiency. But yet there was still room for improvement in other areas.</p>
<div id="attachment_615"><p><a href="https://atari8.co.uk/wp-content/uploads/2015/03/gui2.png" data-slb-active="1" data-slb-asset="278676874" data-slb-internal="0" data-slb-group="37"><img aria-describedby="caption-attachment-615" loading="lazy" src="https://atari8.co.uk/wp-content/uploads/2015/03/gui2-300x214.png" alt="gui2" width="300" height="214" srcset="https://atari8.co.uk/wp-content/uploads/2015/03/gui2-300x214.png 300w, https://atari8.co.uk/wp-content/uploads/2015/03/gui2-624x446.png 624w, https://atari8.co.uk/wp-content/uploads/2015/03/gui2.png 672w" sizes="(max-width: 300px) 100vw, 300px"/></a></p><p id="caption-attachment-615">The cascading drop-down menu system in action</p></div>
<p>After a further six months of nagging doubts about the proprietary “window mask” technology I had designed, I decided to take the plunge and do what Jörn had suggested might lead to a considerable increase in rendering speed: namely, to abandon the window masks (which, it turned out, might as well have been called “regions”), and use a traditional dirty-rectangle window management system, as used in SymbOS. In summer/autumn 2013 I set about writing a full implementation of the rectangle-based window manager. Impressed with the result, I committed to the change and optimised the whole system to use the rectangles, and this massive rewrite resulted in a roughly 100 per cent efficiency improvement when rendering the content of overlapping windows. After further optimisation of the font renderer, we finally began to see performance which appeared to approach that of the seemingly magical SymbOS.</p>
<p>In addition to this, Jörn convinced me that pre-emptive multitasking was possible on the 6502, so in May 2014, I began the arduous task of converting the existing code to run from a bank-switched cartridge, while simultaneously designing the pre-emptively multitasking kernel. As of August 2014, the cartridge build is working well and the kernel is fully functional, and we can finally witness multiple tasks sharing CPU time on the 8-bit Atari, and using a messaging queue for communication. Thanks to Jörn and many members of the AtariAge forum, some really inventive techniques of stack and page zero management have been implemented.</p>
<p>What is especially heartening at this stage is that the 8-bit Atari can actually run a pre-emptive scheduler, and run it well – in spite of the 6502’s fixed stack. And the Atari’s custom hardware has made some other really nice things possible, such as the calculation of processor usage on a process-by-process basis, as well as the monitoring of CPU idle time.</p>
<p>To help potential developers, documentation of the API will continue throughout 2015/2016, and – perhaps unsurprisingly – this task becomes easier as the architecture of the system becomes more clearly defined while it’s being coded up. There’s still a lot of work to do (UI controls, file system, SIO driver, etc), but now that we have a rudimentary multi-tasking graphical OS – and one which is efficient and usable – there seems to be no limit to what is achievable.</p>
<h2>Donations</h2>
<p>If you want to show your support for this project and help to ensure it’s seen through to completion, please consider making a <a href="https://atari8.co.uk/donate/">donation</a>. Progress has been slow because my free time is in contention owing to the other Atari projects documented on these pages, but I hope to maintain a clear focus on the GOS project in the future.</p>
<h2>Contributions</h2>
<p>If you have ideas or suggestions regarding the A8 GOS, please <a href="https://atari8.co.uk/contact/">contact me</a> or participate in the <a href="http://atariage.com/forums/topic/154520-new-gui-for-the-atari-8-bit/page-143?hl=%2Bgui#entry3315839">GUI thread</a> over at AtariAge.</p>
					</div></div>
  </body>
</html>
