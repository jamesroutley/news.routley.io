<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://miod.online.fr/software/openbsd/stories/boot_hppa.html">Original</a>
    <h1>The scariest boot loader code</h1>
    
    <div id="readability-page-1" class="page"><div id="content">


<p>
In 1999, a company I had been working for in the past decommissioned some
hardware, including an
<a href="https://www.openpa.net/systems/hp-9000_720_730_750.html">HP 9000/720</a>
workstation, a somewhat early PA-RISC model.

</p><p>
In this company, we were using IBM (RS/6000), Silicon Graphics
(Indigo<sup>2</sup>, Octane) and (mainly) Sun SPARC (20) and UltraSPARC (2, 30)
workstations; that particular system had been bought to use a specific piece of
software I don&#39;t remember the details of, which was only available under HP/UX,
HP&#39;s own flavour of Unix.

</p><p>
After the person for which the software - and thus the machine - had
been bought left the company, the machine was left in a corner in the printers
room, acting as a boot server for the various
<a href="https://en.wikipedia.org/wiki/X_terminal">X terminals</a>
in use at the company.

</p><p>
The HP machine used to have two 425MB SCSI internal disk drives, but one of the
disks was dying, and the system would not come up multiuser without some
manual interaction to bypass the failing filesystem check and let the system
run in a somewhat degraded mode. But there was no intent to buy a replacement
disk, and as long as the X terminals could still boot, we would happily forget
about this machine until the next power outage, a rare event which would
suddenly remind every X terminal user and every system administrator that this
machine existed.

</p><p>
Don&#39;t get me wrong - this company had top notch system administrators
(except for me, the junior) - but there were always more important work to
do than work on this machine&#39;s replacement.

</p><p>
Then the company killed two birds with one stone by deciding to get rid of all
its X terminals.

</p><p>
I had remained in good terms with enough key people there,
that they told me I could drop by to say hello and get that machine if I was
interested in it. Needless to say, of course I was!
<i>(and a big &#34;thank you&#34; to Francis C. and Jean-Marie J.)</i>

</p><hr/>

<p>
But I was not interested in running HP/UX on it. I wanted to run OpenBSD, and
after I got that machine, I started following the OpenBSD porting effort
closely.

</p><p>
This porting effort was mostly the work of one man, the late
<b>Michael Shalayeff</b>,
who had been working on-and-off on it since 1998, slowly making progress despite
the lack of documentation and only the PA-RISC port of
<a href="https://www.openpa.net/mklinux_mach-linux_pa-risc.html">MkLinux</a>
(a niche software project at the end of the 1990s: a cross between the Mach
 microkernel and the Linux operating system, which never got popular and died
 into oblivion after a few years) as source code inspiration.

</p><p>
I was supposed to help him, but the memory management bugs he was fighting at
that time were way above my current skills at the time, and I couldn&#39;t really
work on device drivers until the kernel was stable enough to let userland have
its chance of using some processor time and exercize the drivers.

</p><p>
The best I could do at this point was moral support,
as well as testing his work.

</p><hr/>

<p>
Early 2002, while the OpenBSD code was still not stable, MIT student
<b>Matt Fredette</b> used it as a basis of a
<a href="https://mail-index.netbsd.org/port-hp700/2002/02/01/0000.html">NetBSD port</a>:

</p><div id="pre">
<pre>Date: Fri, 1 Feb 2002 11:53:40 -0500 (EST)
From: Matt Fredette
To: port-hp700@netbsd.org
Subject: sneak preview: hp700

Hi!  At the end of September I got an HP 9000/715, and I grabbed
all of the OpenBSD/hppa code and started working on it.  Michael
Shalayeff, the OpenBSD/hppa port maintainer, has a very good
foundation of code, which has saved me months of time.  Now, after   
a lot of coding myself I&#39;m into single-user mode.
  
This is really just a sneak preview - this entire effort is still
in its earliest stages.  The system is not stable.  Many questions
that you may have, I may not be able to answer (I&#39;m no expert on
the architecture - but I am learning more every day.)  I don&#39;t have
anything that can be downloaded and generally used yet, on the 715
or any other machine.
  
But things are looking up...
  
Matt
</pre>
</div>

<p>
After spotting and fixing the few remaining bugs which had prevented OpenBSD
to run so far, his system eventually
<a href="https://mail-index.netbsd.org/port-hp700/2002/03/03/0000.html">reached
multiuser</a>.

</p><p>
<i>Fredette went to become a </i>meteoritic<i> NetBSD
developer, creating two new ports (NetBSD/hp700 to the PA-RISC architecture,
which became
<a href="https://wiki.netbsd.org/ports/hppa/">NetBSD/hppa</a> a few years later,
and
<a href="https://wiki.netbsd.org/ports/sun2/">NetBSD/sun2</a> to the Sun-2
family of Sun workstations sporting a 68010 processor and Sun&#39;s custom MMU,
while the existing NetBSD ports for Motorola 68000 family processors until then
were limited to 68020 and later processors;
some limitations of the 68010 required enough changes and redesign
for this to be a significant <s>effort</s> endeavour)...
and disappearing from sight shortly after graduating.
</i>

</p><p>
<i>He also wrote
<a href="https://people.csail.mit.edu/fredette/tme/">TME</a>,
``The Machine Emulator&#39;&#39;, an
emulator for various Sun systems (Sun-2, Sun-3 and some SPARC)
on which you can run the original SunOS as well as NetBSD.
</i>

</p><p>
Shalayeff and Fredette did not ignore each other, and this NetBSD work caused
a healthy regain of activity on the OpenBSD side. Which meant more kernels to
test, preferrably on as many different systems as possible.

</p><div id="pre">
<pre>Date: Fri, 1 Feb 2002 13:07:39 -0500 (EST)   
From: Matt Fredette
To: Michael Shalayeff
Subject: Re: sneak preview: hp700

&gt; re
&gt; care to share the changes back ?
&gt; cu

Definitely.  If you want, I can give you a .tar of my sys/arch/hp700
right now, or soon I hope to start committing into the NetBSD CVS.

Matt
</pre>
</div>

<div id="pre">
<pre>Date: Thu, 7 Feb 2002 11:09:01 -0500 (EST)   
From: Matt Fredette
To: Michael Shalayeff
Subject: Re: sneak preview: hp700

[...]
&gt; just in case the idea of sharing the changes sounded
&gt; strange, let me put my point why i think it&#39;s a good thing.
&gt; mainly because that way we both advance faster and get
&gt; more work done by not stepping on each others toes.
&gt; what do you think?

I&#39;m a big believer in sharing, absolutely.  Within the next
week I hope to start committing to NetBSD&#39;s CVS.
[...]
</pre>
</div>

<hr/>

<p>
At that time, the most commonly encountered systems on the used workstations
market were models
<a href="https://www.openpa.net/systems/hp-9000_712.html">712</a>
and
<a href="https://www.openpa.net/systems/hp-9000_715.html">715</a>,
as well as less common models 720 (such as mine),
730 and 750, and their slightly less old counterparts 725, 735 and 755. But
712 and 715 were significantly more popular.

</p><p>
So while my 9000/720, which sported the so-called <i>PCXS</i> processor,
wouldn&#39;t be able to run OpenBSD until 2009, when I eventually completed the
necessary software support bits for that particular processor flavour,
I had already gathered at that time several 9000/712 and 9000/715 systems,
including a somewhat rare 9000/715/XC (100MHz processor, with 1MB L2 cache!)
which used to be in use at Rolls-Royce offices in the United Kingdom, running
CAD software.

</p><p>
The 9000/715 workstations were HP&#39;s basic workstations. Unlike the older
<a href="https://www.openpa.net/systems/hp-9000_705_710.html">9000/705 and 9000/710</a>
they were replacing, they had a larger chassis (desktop system form-factor
rather than pizzabox form-factor), which allowed room for two disks and a
5&#34;1/4 tape or CD-ROM drive, as well as an expansion slot (either
proprietary
<a href="https://www.openpa.net/cards.html#sgc">SGC</a>,
for frame buffers or fancy - FDDI and ATM - network,
or industry-standard
<a href="https://www.openpa.net/cards.html#eisa">EISA</a>),
while models 705 and 710 did not have any expansion capabilities and could only
accomodate one disk drive and a 5&#34;1/4 bay. So it should not be a surprise
that these models were quite popular in the middle of the 1990s.

</p><p>
Yet the price tag of these workstations could still be a problem for smaller
businesses. This led HP to start working on a stripped-down 715, which would
be closer to the form factor of the 705 and 710, retaining some expansion
capabilities with specific boards in a special form factor (which would be,
to SGC boards, what Mini-PCI were to be to PCI, years later).

</p><p>
Compared to the 715, the 712 only have one internal 3&#34;1/2 disk drive,
one optional floppy disk drive, and two mini expansion slots. They were also
limited in memory, with only four SIMM sockets, allowing for up to 128MB; the
later &#34;high-end&#34; 712/100 model, with a faster processor, had six sockets,
allowing for up to 192MB. (I own such a maxed out 712/100 system, courtesy of
<b>Mark Zyngier</b> of Linux fame, and it&#39;s a really nice critter)

</p><hr/>

<p>
Of course, if you are marketing a cheaper-but-covers-99%-of-your-customers-needs
workstation (the 712), chances are your customers will buy it instead of the
more versatile but more expensive workstation (the 715). So HP needed a way to
make the 715 more appealing than the 712 to a large enough part of the
workstation market.

</p><p>
Now, a key feature of Unix workstations is that, if there is no keyboard
plugged in on powerup, they recognize this and switch to serial console. This
feature is quite helpful and allows a workstation to be turned into a cheap
server by simply unplugging the keyboard (and powering the monitor down). All
workstations of the 1990s behave this way, except for two shameful exceptions:
the NeXT workstations (for which you need to plug a resistor in the keyboard
port for them to be able to power up in the absence of a keyboard),
and the Digital DECstation 5000/100 series (for no good reason, and I am
tempted to believe it&#39;s actually a firmware bug, since e.g. the 5000/200 series
show the expected behaviour when no keyboard is connected).

</p><p>
Thus some HP manager thought it was a good idea, in order to make customers
prefer the 715 to the 712, to not let the 712 work without a keyboard plugged
in. While you could run a 715 headless with a serial console, if you were to
dare powering up a 712 without the keyboard plugged in, its firmware would
complain that the keyboard is missing and freeze, refusing to boot the
operating system; one had to power down, plug a keyboard, and power the
machine back up for it to boot.

</p><p>
Except that, the 712 motherboard being roughly a stripped-down 715, there was
nothing preventing it to work headless. The requirement to have a keyboard
connected was built into the firmware, not in the hardware or the HP-UX
operating system. And (some) HP engineers working on 712 support preferred to
run their prototypes headless, in order to save desk space.

</p><hr/>

<p>
It shouldn&#39;t be surprising that the HP-UX FAQ eventually grew an entry for &#34;how
can I make a 712 run headless&#34;. It was possible, and to do it you had to change
the firmware &#34;console&#34; path. The 712 firmware would not allow you to do this,
to keep you locked to a keyboard and frame buffer console, but some of the
HP-UX standalone tools could be used to change this without the firmware getting
in the way, so the FAQ recipe was roughly &#34;abort the boot sequence, at the
<tt>BOOT_ADMIN&gt;</tt> prompt, do not start the HP-UX kernel but some
diagnostic tool, and then at the tools prompt, type a magic sequence without any
mistake or you&#39;ll be very, very, very sorry&#34;.

</p><p>
There was no exaggeration in these words: the magic sequence is
<tt>conspath 2/0/4.0x283</tt>, which is everything but
intuitive and easy to remember.

</p><p>
<i>Interestingly, while working on this story in 2025, I could not find
mention of the 712 serial console in the currently available HP/UX FAQs anymore.
I can only guess interest for this faded as soon as faster, PCI-capable PA-RISC
systems (B-class and C-class) became easily available and affordable on the
second hand market and 712 serial console no longer was a </i>frequently<i>
asked question.</i>

</p><p>
You can still find this procedure
<a href="http://lists.parisc-linux.org/pipermail/parisc-linux/1999-December/008117.html">explained</a>
by HP engineer Matt Taggart:
</p><div id="pre">
<pre>Date: Thu, 23 Dec 1999 12:31:55 -0700
From: Matt Taggart
To: Matthew Wilcox
Cc: Bill Katz, parisc-linux@thepuffingroup.com
Subject: Re: [parisc-linux] How to set serial console on 712 (fwd)

[...]

The above statement about serial console not being &#34;supported&#34; on 712 is
correct. That doesn&#39;t mean you can&#39;t do it. Here are the instructions,

-------------
CONFIGURING A RS-232 CONSOLE on a 712

An RS-232 console is not a supported feature in the 712 products. For this
reason users cannot select the RS-232 port as a console from the BOOT_ADMIN
prompt.

These instructions will configure an RS-232 console with 9600 Baud, 8 data
bits, 1 stop bit, and no parity.

HOW-TO INSTRUCTIONS

NOTE: If the following instructions are not entered correctly, your system
may be left in an un-usable state. Contact support to &#34;dagger&#34; your system
in this case.

     Power up the 712 system.
     Press (ESCAPE) during boot to abort auto booting the system.
     At the BOOT_ADMIN&gt; prompt, use the boot command and the isl keyword.
        This will stop the boot sequence at ISL instead of booting to the OS.
     For example: &#39;boot scsi.6 isl&#39;
     At the ISL&gt; prompt, type &#39;conspath 2/0/4.0x283&#39;
     At the ISL&gt; prompt, type &#39;disp&#39; and verify console path is:
        (hex) 2/0/4.283.0.0.0.0.0
     If necessary re-type the conspath command above.
     Connect an RS-232 terminal to the system.
     Power cycle the system to bring it up on an RS-232 console.
-------------

As it indicates above, *BE VERY CAREFUL* or you can hose your system. If you
do, I have one of the &#34;dagger&#34; cards that can be loaned out to fix it.
</pre>
</div>

<p>
And nowadays, of course, this procedure is still
<a href="https://www.netbsd.org/ports/hppa/serialconsole-712.html"> documented</a>
for NetBSD.

</p><hr/>

<p>
Now, in the late 1990s and early 2000s, hobbyists buying 712 (when not getting
them for free) did not care about HP choices, but wouldn&#39;t mind being able to
run their systems headless. Yet they might not have an HP-UX install
available, to follow the FAQ instruction and issue the arcane sequence of
instructions allowing the 712 to run with a serial console.

</p><p>
And anyway, we OpenBSD people definitely wanted to be able to use our 712
that way, without any outside help.

</p><p>
We knew better. We knew we could do better. But, somehow, I hadn&#39;t realized
this, yet:

</p><div id="pre">
<pre>Date: Wed, 6 Feb 2002 22:33:19 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: Re: console boot does not work well for me

[...]
I will have trouble switching the 712 to serial since doing so requires
a disk and the ability to &#34;boot scsi.# isl&#34; to enter the magic commands.
</pre>
</div><p>

To which he simply replied:

</p><div id="pre">
<pre>From: Michael Shalayeff
To: Miod Vallat
Subject: Re: console boot does not work well for me

yes, it needs hpux&#39;s isl
you can hack ours to do so ? (;
</pre>
</div><p>

(<i>ours</i> here, meaning the boot blocks).

And then it dawned on me. <b>Of course</b> we could do this!

</p><div id="pre">
<pre>Date: Wed, 6 Feb 2002 22:43:29 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: Re: console boot does not work well for me

&gt; yes, it needs hpux&#39;s isl
&gt; you can hack ours to do so ? (;
Why not? I&#39;ll have to check where you pick console settings to know if
it is safe to store values from the booter...
</pre>
</div>

<p>
So here I was, &#34;challenge accepted&#34;: allow the OpenBSD boot blocks (which were
extendable with machine-specific commands) to display and modify the
firmware&#39;s &#34;console path&#34;.

</p><p>
The HP-UX FAQ would warn that, if you were to make a mistake when setting the
console path from the HP-UX diagnostic tools, you would need an HP field
engineer to service your machine with a special &#34;dagger&#34; board, which would
<i>whack</i>/<i>reset</i>/<i>whatever</i> the firmware settings and revert the
machine to glass console, from which you could try your (un)luck a second time.

</p><p>
I had never seen such devices, I didn&#39;t even know if they were real or yet
another <i>Knecht Ruprecht</i> device intended to scare users in buying 715
systems and leaving their 712 alone. (I suppose they were only created after
some people at HP mistyped their commands and bricked their systems and the
hardware guys got tired of having to exchange their systems or replace their
eeprom chips and wanted a faster way to solve the problem)

</p><div id="pre">
<pre>Date: Wed, 6 Feb 2002 23:08:40 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: Re: console boot does not work well for me

&gt; perhaps 712 would not be a good test case though (;
That&#39;s what the other machines are for, eh!

&gt; although there are those &#34;dagger&#34; boards to fix &#39;em.
Frankly, I&#39;d rather never have to see one of these torture devices.
</pre>
</div>

<p>
So it was decided. I would work on the machine-specific command to setup the
console path, test it thoroughly on 715, when recovery was possible, and only
after, try in on 712.

</p><p>
The first part of changing things being knowing what you are working on, my
first step was to collect and display the console path.

</p><div id="pre">
<pre>Date: Fri, 8 Feb 2002 02:18:31 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: first step at the console stuff

Well, I am going to bed.
I have a boot loader that will let you play with the console settings,
but will not save them in any way (yet).

Attached are:
- a patch to sys/arch/hppa/stand/boot/Makefile.
- sys/arch/hppa/stand/boot/machine.c

Quick dox:
display console with &#34;machine console&#34;
change console with &#34;machine console port.speed.bits.parity&#34;
where:
  port = rs232 or rs232_2
  speed = 110, 150, 300, 600, 1200, 2400, 4800, 7200 or 9600 (default 9600)
  bits = 5, 6, 7 or 8 (default 8)
  parity = even, none or odd (default 8)
You can omit the latest fields if they are the default values:
  machine console rs232_2.1200
is equivalent to
  machine console rs232_2.1200.8.none
</pre>
</div>

<p>
The next day, I managed to switch my 712 to the canonical 9600 8N1 serial
settings.

</p><div id="pre">
<pre>Date: Fri, 8 Feb 2002 21:17:11 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: 712 runs serial!

Well, I got the 712 to talk to me over serial port.
Same problem once kernel is booted.

I have to go for the week-end, will come back on sunday evening.

In the meantime, attached are:
- remaining diffs (I need strcmp in stand.h, btw)
- latest cmd_hppa.c which will update stable storage and change
  settings.
</pre>
</div>

<p>
Three days later, OpenBSD/hppa was booting single-user for the first time on the
715/100/XC, which was a good milestone.

</p><p>
After spending a few weeks on the other platforms supported by OpenBSD, I
resumed working on OpenBSD/hppa and reached a good state early march:

</p><div id="pre">
<pre>Date: Fri, 1 Mar 2002 02:10:37 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: cmd_hppa.c, updated

Ok, here is the current status.

The detection and assignment of keyboard and serial paths works well
here, on the following machines:
- 720 (2 serial ports on the same bus, hil, asp)
- 712/60 (1 serial port, ps2, lasi)
- 715/33 (2 serial ports on the same bus, hil, asp)
- 715/100/XC (2 serial ports on two different bus, hil, ps2, lasi)

I am not very satisfied with the graphics path code. It happens to work
for me, but it&#39;s too much a wild guess - except to switch to the default
(first card) graphics path.

Comments, ideas, improvements?
</pre>
</div>

<p>
The day after, I ended up being satisfied with my work.

</p><div id="pre">
<pre>Date: Fri, 1 Mar 2002 23:04:52 +0000
From: Miod Vallat
To: Michael Shalayeff
Subject: hppa console stuff, revisited

Well, I think this version is safe and reliable enough to go into the
tree, and there is its man page as well.

It will let you switch back and forth between various graphics and
serial consoles without disturbing the PDC settings, while the previous
version did not. It will also correctly identify GIO-attached devices as
the main devices (the previous version did not order the framebuffers of
my 715/100XC correctly).

The only problem left is still the graphics console resolution. The code
will read it correctly in the console path, will write valid values back
in it, but that&#39;s not enough, and the resolution will reset to the
default one (i.e. graphics_#.1). I suppose this information is also
stored elsewhere, and the other area where it is stored has higher
priority in the PDC code.

I plan to investigate this problem soon, but in the meantime this is not
a too big problem, since you can set the console path from the pdc
itself. That&#39;s switching from and to serial console mode which matters,
in the 712 point of view at least.

The manual page could be a bit more verbose, but I think it&#39;s a decent
start. Heavily inspired from the i386 version.

I choose to left the &#34;set tty&#34; information commented out, since I doubt
it would work in hppa land currently.



Comments? Rants? Clear to commit?
</pre>
</div>

<p>
This work eventually got
<a href="https://github.com/openbsd/src/commit/4b857ded380d92df903e6f805425e5c00939a80f">commited</a>
on march 2nd, with
<a href="https://github.com/openbsd/src/commit/c178470fe008073d3a2e2f419c14a717f3acc2d5">further
improvements</a>
on march 7th.

</p><p>
Of course, I had to eventually document this in the
<a href="https://man.openbsd.org/man8/hppa/boot.8">boot loader</a>
as well as the
<a href="https://man.openbsd.org/hppa/boot_hppa.8">machine-specific boot
process details</a>
manual pages once the first working
<a href="https://www.openbsd.org/hppa.html">OpenBSD/hppa</a> release was getting
ready.

</p><div id="pre">
<pre>Date: Thu, 17 Oct 2002 21:49:58 +0000
From: Miod Vallat
To: Michael Shalayeff, Todd Fries
Subject: boot_hppa(8)

There are lots of repeated texts, but I think this will be useful
enough.

This definitely does not pretend to document all PDC usage, but should
be enough for people to be able to boot the way they want.

Note that I don&#39;t plan to commit this until I am done with the others
boot_foo.8 cleaning, unless mickey pressures me.

Comments?
</pre>
</div>

<hr/>

<p>
Now, you might remember the special command from the FAQ using <tt>0x283</tt>.
This number is an encoding of the speed, number of data bits, number of stop
bits, and parity.

</p><p>
Contrary to what I wrote in the first email on february 8th, there are more
speeds than 110 to 9600. The HP workstation firmware supports all these speeds:
50, 75, 110, 150, 300, 600, 1200, 2400, 4800, 7200, 9600, 19200, 38400, 57600,
115200 and 230400 bits per second.

</p><p>
Before I were to release my code to the general public, I needed to test all
these speeds. This is where the horror story starts. The machine I was testing
against (i.e. the other side of the serial link) was a Sun SPARCstation 20,
which serial ports can&#39;t go faster than 38400 bits per second. Because of this,
I did not test the three fastest speeds (I would have been able to test 57600 on
a PC, but nothing faster). Shame on me.

</p><p>
But I tested all the other speeds, from 38400 down to 50.

</p><p>
So every test went this way:
</p><ul>
<li>power cycle the machine to make the firmware use the newly configured
settings.
</li><li> wait about 10 seconds for it to perform its self test (including the memory
check) and start using the serial console.
</li><li>wait for the boot messages to appear:
<div id="pre">
<pre>


----------------------------------------------------------------------------
BootRom Version    1.1  
Memory Size:  128 MB
----------------------------------------------------------------------------




(c) Copyright 1990-1994, Hewlett-Packard Company.
All rights reserved

Press &lt;ESCAPE&gt; to stop boot sequence.

Starting Auto boot


Loading Initial Program Loader


IPL successfully loaded


Booting


&gt;&gt; OpenBSD/hppa BOOT 0.7
booting dk0a:/bsd
</pre>
</div>
</li><li>too many times,
realize I did not pay attention to abort the boot process, and reboot
once OpenBSD has completed booting.
</li><li>on the next boot, press escape like mad to abort the boot process
in time and get the boot administration menu:
<div id="pre">
<pre>----------------------------------------------------------------------------
Command                                Description
-------                                -----------
Auto [boot|search] [on|off]            Set/show auto mode
Boot [pri|alt [isl]]                   Boot from primary or alternate path
Boot [scsi|eisa.&lt;slot&gt;[.&lt;addr&gt;]] [isl] Boot from SCSI or EISA
Boot lan[.&lt;addr&gt;] [install] [isl]      Boot from LAN
Chassis [on|off]                       Set/show chassis codes display mode
DefaultSS                              Reboot and set EEPROM to default values
Diagnostic [on|off]                    Set/show diagnostic boot mode
Fastboot [on|off]                      Set/show fast boot mode
Help                                   Show this command menu
Information                            Show system information
LanAddress                             Show LAN station addresses
Monitor [&lt;DEV&gt;[.&lt;type&gt;]]               Set/show graphics monitor type
                                       (&lt;DEV&gt;=graphics|graphics_&lt;1|2&gt;)
Path [pri|alt [&lt;DEV&gt;[.&lt;addr&gt;]]]        Set/show boot source path
                                       (&lt;DEV&gt;=lan|scsi|eisa.&lt;slot&gt;)
Path [console [&lt;DEV&gt;[.&lt;parm&gt;]]]        Set/show boot console path
                                       (&lt;DEV&gt;=&lt;RS232&gt;|&lt;GRAPH&gt;
                                        &lt;RS232&gt;=rs232|rs232_2
                                        &lt;parm&gt;=&lt;baud&gt;.&lt;length&gt;.&lt;parity&gt;
                                        &lt;GRAPH&gt;=graphics|graphics_&lt;1|2&gt;
                                        &lt;parm&gt;=&lt;monitor&gt;)
Path [keyboard [hil|ps2]]              Set/show boot keyboard path
Pim [hpmc|toc|lpmc]                    Show PIM info
Search [ipl] [scsi|eisa]               Show potential boot devices
Search [ipl] [lan [install]]           Show potential boot LAN devices
Secure [on|off]                        Set/show security mode
----------------------------------------------------------------------------
BOOT_ADMIN&gt; 
</pre>
</div>
</li><li>ask for an interactive boot...
<div id="pre">
<pre>BOOT_ADMIN&gt; boot pri isl




Attempting to boot.

Loading Initial Program Loader


IPL successfully loaded


Booting


&gt;&gt; OpenBSD/hppa BOOT 0.7
boot&gt; 
</pre>
</div>
</li><li>...at which point I could check the current setting, and switch to the next
(slower) speed in the list:
<div id="pre">
<pre>boot&gt; machine console
Console path: rs232.9600.8.none
boot&gt; machine console rs232.4800
you will need to power-cycle your machine for the changes to take effect.
Console path: rs232.4800.8.none
boot&gt;
</pre>
</div>
</li></ul>

<p>
At first glance, there is nothing odd with this. It&#39;s only a tedious process
which will need to be repeated 13 times, from 38400 bps to 50.

</p><p>
But the help text before the <tt>BOOT_ADMIN&gt;</tt> prompt alone is 1967 bytes
long.

</p><p>
On a canonical <tt>9600 8N1</tt> setup (9600 bps, 8 data bits, 1 stop bits, no
parity), each visible byte needs to transmit 9 bits (due to the stop bit),
so 1967 bytes account for 17703 bits, which, at 9600 bps, take 1.844 second to
display. That doesn&#39;t feel slow.

</p><p>
But as soon as you start hitting the low speeds, that wall of text takes more
and more time to appear. At 1200 bps, it now takes 8 times longer, 14,75 seconds
to display. And after 1200 bps, there are still 6 slower speeds to try:
600, 300, 150, 115, 75 and 50 bps.

</p><p>
It would be <i>cliché</i> to tell you that you have enough time to see your life
flashing before your eyes while waiting for this display to complete, yet at the
slowest possible speed of 50bps, it takes a bit short of <b>6 minutes</b> for it
to appear in its entirety. And that&#39;s only one step of the process...

</p><p>
So what seemed to be a simple &#34;ok, let&#39;s try all the available speeds&#34; turned
out to last two good hours, and I really was relieved once completed and all
tested speeds had worked. But hey! That&#39;s the only way to really trust that
code. (I had also tested the various number of data and stop bits, as well as
the parity settings, at 9600 bps)

</p><hr/>

<p>
And while the HP/UX (or nowadays NetBSD) FAQ only lets you use 9600 bps because
of that <tt>0x283</tt> value, if you run OpenBSD (or simply boot its installer
once to perform that configuration change), you can run your 712 headless at
57600 bps. And be the coolest kid of the block.
</p></div></div>
  </body>
</html>
