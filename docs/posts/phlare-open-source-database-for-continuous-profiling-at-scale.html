<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://grafana.com/blog/2022/11/02/announcing-grafana-phlare-oss-continuous-profiling-database/">Original</a>
    <h1>Phlare: open-source database for continuous profiling at scale</h1>
    
    <div id="readability-page-1" class="page"><div><p>At <a href="https://grafana.com/blog/2022/11/02/observabilitycon-2022-announcements">ObservabilityCON</a> in New York City today, we announced a new open source backend for continuous profiling data: <a href="https://github.com/grafana/phlare" target="_blank" rel="noopener noreferrer">Grafana Phlare</a>. We are excited to share this horizontally scalable, highly available database with the open source community — along with a new <a href="https://grafana.com/docs/grafana/next/panels-visualizations/visualizations/flame-graph/?pg=blog&amp;plcmt=body-txt">flame graph panel</a> for visualizing profiling data in <a href="https://grafana.com/oss/grafana?pg=blog&amp;plcmt=body-txt">Grafana</a> — to help you use continuous profiling to understand your application performance and optimize your infrastructure spend. </p><div x-data="{ vimeo_is_up: false, responded: false }" x-init="fetch(`https://vimeo.com/api/oembed.json?url=https://vimeo.com/766320003`)
      .then(response =&gt; {
        responded = true;
        response &amp;&amp; response.status === 200 ? vimeo_is_up = true : vimeo_is_up = false;
      })
      .catch(error =&gt; {
        responded = true;
      })" x-cloak=""><template x-if="vimeo_is_up"><p><iframe src="https://player.vimeo.com/video/766320003?transparent=0" title="vimeo video" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></p></template><template x-if="responded &amp;&amp; !vimeo_is_up"><p>There’s supposed to be a video here, but for some reason there isn’t. Either we entered the id wrong (oops!), or Vimeo is down. If it’s the latter, we’d expect they’ll be back up and running soon. In the meantime, <a href="https://grafana.com/blog/">check out our blog</a>!</p></template></div><h2 id="what-is-continuous-profiling">What is continuous profiling?</h2><p>The concept is a valuable one: Profiling helps you understand the resource usage of your program, which in turn helps you optimize its performance and cost. The shift to distributed, cloud native architecture, however, has made this more complex, creating the need for continuous profiling, in which information about resource usage is automatically collected at regular intervals across an entire compute infrastructure, then compressed and stored as time series data. This allows you to visualize changes over time and zoom in on profiles that match a period of interest — for example, where CPU time was spent during its period of highest utilization. </p><p>For the value it brings, continuous profiling has been dubbed the <a href="https://grafana.com/blog/2019/05/27/grafana-labs-at-kubecon-what-is-the-future-of-observability/">fourth pillar of observability</a> (after metrics, logs, and traces). </p><p>At Grafana Labs, we started looking at using continuous profiling to understand the performance of the software we use to power <a href="https://grafana.com/products/cloud/?pg=blog&amp;plcmt=body-txt">Grafana Cloud</a>, including <a href="https://grafana.com/oss/loki/?pg=blog&amp;plcmt=body-txt">Grafana Loki</a>, <a href="https://grafana.com/oss/mimir/?pg=blog&amp;plcmt=body-txt">Grafana Mimir</a>, <a href="https://grafana.com/oss/tempo/?pg=blog&amp;plcmt=body-txt">Grafana Tempo</a>, and <a href="https://grafana.com/oss/grafana/?pg=blog&amp;plcmt=body-txt">Grafana</a>. If we’re paged about a slow query in Mimir, for example, we might use profiling to understand where in the Mimir codebase that query spent the most time. If we’re seeing Grafana repeatedly crash due to out-of-memory errors, we’ll take a look at a memory profile to look at what object was consuming the most memory right before the crash.</p><figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"><a href="https://grafana.com/static/assets/img/diagrams/grafana-diagram-phlare.png" itemprop="contentUrl"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="/static/assets/img/diagrams/grafana-diagram-phlare.png" alt="" width="" height="" title=""/></a></figure><p>While there are open source projects for storing and querying continuous profiling data, after some investigation, we struggled to find one that met the scaling, reliability, and performance requirements needed to support continuous profiling at the level Grafana Labs requires. During <a href="https://grafana.com/blog/2022/06/17/inside-grafana-labs-hackathons-how-they-work-and-what-projects-ended-up-on-the-product-roadmap/">a company-wide hackathon</a>, a group of engineers led a project that showed how valuable profiling data could be when connected with metrics, logs, and traces, further adding to our eagerness to roll out continuous profiling across all our environments. </p><p>So we decided to get to work creating a database for continuous profiling telemetry, based on the design principles that have made our other open source observability backends, Loki, Tempo, and Mimir, so successful: horizontally scalable architecture and use of object storage. </p><p>Open source is at the heart of Grafana Labs, and we wanted to share what we were building and learning with the community. </p><h2 id="introducing-grafana-phlare-for-continuous-profiling-data">Introducing Grafana Phlare for continuous profiling data</h2><p><a href="https://grafana.com/oss/phlare/?pg=blog&amp;plcmt=body-txt">Grafana Phlare</a> provides horizontally scalable, highly available, long-term storage and querying of profiling data. It’s easy to install with just one binary and no additional dependencies, just like <a href="https://grafana.com/oss/prometheus/?pg=blog&amp;plcmt=body-txt">Prometheus</a>. Because Phlare uses object storage (Amazon S3, Google Cloud Storage, Azure Blob Storage, OpenStack Swift, and any S3-compatible object storage), you can store all the history you need without breaking the bank. Its native multi-tenancy and isolation feature set make it possible to run one database for multiple independent teams or business units.</p><p>Phlare natively integrates with Grafana, making it possible for you to visualize your profiling data alongside your metrics, logs, and traces, and get a comprehensive view of your entire stack. We have also added a <a href="https://grafana.com/docs/grafana/next/panels-visualizations/visualizations/flame-graph/?pg=blog&amp;plcmt=body-txt">flame graph panel</a> to Grafana, which allows you to build dashboards that display profiling data next to data from any of the hundreds of <a href="https://grafana.com/grafana/plugins/?pg=blog&amp;plcmt=body-txt">disparate data sources</a> that can be visualized in Grafana. </p><figure itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject"><a href="https://grafana.com/static/assets/img/grafana-oss-phlare-screenshot.png" itemprop="contentUrl"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="/static/assets/img/grafana-oss-phlare-screenshot.png" alt="" width="" height="" title=""/></a></figure><p>By making it possible for you to visualize your data alongside every other data source you rely on, we believe we are massively increasing the usefulness of your profiling data.</p><p>This is, at its core, our big tent philosophy: We want you to be able to bring together all the data you need, no matter where it lives. So we’re excited to announce that in addition to releasing a <a href="https://grafana.com/docs/grafana/next/datasources/phlare/?pg=blog&amp;plcmt=body-txt">Grafana data source plugin for Phlare</a>, we’re also releasing a <a href="https://grafana.com/docs/grafana/next/datasources/parca/?pg=blog&amp;plcmt=body-txt">Grafana data source plugin for Parca</a>, another open source profiling database. Both can leverage <a href="https://grafana.com/docs/grafana/next/panels-visualizations/visualizations/flame-graph/?pg=blog&amp;plcmt=body-txt">Grafana’s new flame graph panel</a> as part of the Explore and dashboarding experiences in Grafana. With these two data sources, plus the existing <a href="https://grafana.com/grafana/plugins/pyroscope-panel/?pg=blog&amp;plcmt=body-txt">Pyroscope plugin</a> in Grafana, the continuous profiling community can now visualize profiling data from three different profiling databases in Grafana. As the adoption of continuous profiling continues to grow, we intend to add new panel and visualization types beyond the flame graph to help users more easily slice and dice their profiling data.</p><h2 id="whats-next-for-grafana-phlare">What’s next for Grafana Phlare? </h2><p>Now that Grafana Phlare has been released, we are eager to hear how you’re using continuous profiling and what you’d like to see next. On our end, we’re actively improving Phlare’s query path so users can query profiles further back in time and extending the <a href="https://github.com/grafana/agent" target="_blank" rel="noopener noreferrer">Grafana Agent</a> to collect and send profiles to Phlare. We’re also making it possible to enable profiling without the need to instrument your applications by leveraging technologies like <a href="https://ebpf.io/" target="_blank" rel="noopener noreferrer">eBPF</a>.</p><p>We’re excited to keep contributing to the open source community, and putting our engineering and operational knowledge behind making continuous profiling work for you as the fourth pillar of observability. </p><p>Try out <a href="https://github.com/grafana/phlare" target="_blank" rel="noopener noreferrer">Grafana Phlare</a>, learn how to get started with our <a href="https://grafana.com/docs/phlare/latest/?pg=blog&amp;plcmt=body-txt">Grafana Phlare documentation</a>, and let us know what you think!
Y﻿ou can <a href="https://github.com/grafana/phlare/issues/new/choose" target="_blank" rel="noopener noreferrer">open an issue</a> in the Phlare Github repo, join the conversation on the #phlare channel on the <a href="https://slack.grafana.com/" target="_blank" rel="noopener noreferrer">Grafana Labs Community Slack</a>, or join us for our first <a href="https://docs.google.com/document/d/18-ZhHAoFpBrxs6y7Ik2uu08AQslVJ55fJUmb9ctN3Tg/edit" target="_blank" rel="noopener noreferrer">community call</a> on Nov. 8 at 17:00 UTC.</p></div></div>
  </body>
</html>
