<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/RohanAdwankar/oxdraw">Original</a>
    <h1>Show HN: Diagram as code tool with draggable customizations</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span>oxdraw_demo.mov</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/39285979/505614361-de5222bb-9b65-43cf-a35b-5613d06343e8.mov?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjE0MzA4NTMsIm5iZiI6MTc2MTQzMDU1MywicGF0aCI6Ii8zOTI4NTk3OS81MDU2MTQzNjEtZGU1MjIyYmItOWI2NS00M2NmLWEzNWItNTYxM2QwNjM0M2U4Lm1vdj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMjUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDI1VDIyMTU1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTI5YzYyMzYzZjUxZDE2NjlkM2MwODY5MGFkZDkxMjA3MTI2ZTQyZTFmNjEzY2U0Y2Y0ZGZkYjUwYjA1OTNjOTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.ndrf4P7GygJaLwcnfHPfEUHJFhMVU1-ltyCSNIsFhbY" data-canonical-src="https://private-user-images.githubusercontent.com/39285979/505614361-de5222bb-9b65-43cf-a35b-5613d06343e8.mov?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjE0MzA4NTMsIm5iZiI6MTc2MTQzMDU1MywicGF0aCI6Ii8zOTI4NTk3OS81MDU2MTQzNjEtZGU1MjIyYmItOWI2NS00M2NmLWEzNWItNTYxM2QwNjM0M2U4Lm1vdj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMjUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDI1VDIyMTU1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTI5YzYyMzYzZjUxZDE2NjlkM2MwODY5MGFkZDkxMjA3MTI2ZTQyZTFmNjEzY2U0Y2Y0ZGZkYjUwYjA1OTNjOTkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.ndrf4P7GygJaLwcnfHPfEUHJFhMVU1-ltyCSNIsFhbY" controls="controls" muted="muted">

  </video>
</details>


<p dir="auto">The goal of <code>oxdraw</code> is to make it easy to create and maintain high-quality diagrams using a declarative and reproducible syntax.
Charts are written in <a href="https://mermaid.js.org/" rel="nofollow">Mermaid</a> syntax, while a web interface allows users to fine-tune positions connector paths, colors, and other styling components. Whenever a diagram is tweaked visually, the structural changes are persisted back to the source file as declarative code so that everything remains deterministic and versionable.
The changes are saved as comments in the mermaid file so it remains compatible with other Mermaid tools.
The repo is composed of the Rust CLI to compile <code>.mmd</code> files into images and the React based web interface to editing the files.</p>

<p dir="auto">The reason I started this project was I used Mermaid a lot in the past when making architecture diagrams or trying to understand large codebases through having AI tools generate .mmd files to visualize them. However what typically happened was since these diagrams couldn&#39;t be edited minutely for example cleaning up joints and chart organization, I would have to move over the diagrams I started to things like Lucidchart. So the big picture goal of this project is to unite the benefits of code generated diagramming like Mermaid with the customizability of diagram software like Lucidchart.</p>



<div dir="auto"><h3 tabindex="-1" dir="auto">Render a diagram from a file</h3><a id="user-content-render-a-diagram-from-a-file" aria-label="Permalink: Render a diagram from a file" href="#render-a-diagram-from-a-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<div dir="auto"><h3 tabindex="-1" dir="auto">Launch the interactive editor</h3><a id="user-content-launch-the-interactive-editor" aria-label="Permalink: Launch the interactive editor" href="#launch-the-interactive-editor"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="oxdraw --input flow.mmd --edit"><pre>oxdraw --input flow.mmd --edit</pre></div>


<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-i, --input &lt;PATH&gt;</code></td>
<td>Read a Mermaid source file; pass <code>-</code> to consume stdin instead.</td>
</tr>
<tr>
<td><code>-o, --output &lt;PATH&gt;</code></td>
<td>Write the rendered asset to a specific path; pass <code>-</code> to stream SVG to stdout. Defaults to <code>&lt;input&gt;.svg</code> (or <code>&lt;input&gt;.&lt;format&gt;</code> if an explicit format is chosen) and <code>out.svg</code> when reading from stdin.</td>
</tr>
<tr>
<td><code>--png</code></td>
<td>Shorthand for <code>--output-format png</code></td>
</tr>
<tr>
<td><code>--scale &lt;FACTOR&gt;</code></td>
<td>Scale multiplier for PNG rasterization (default <code>10.0</code>); values must be greater than zero. Ignored for SVG output.</td>
</tr>
<tr>
<td><code>--edit</code></td>
<td>Launch the interactive editor pointing at the supplied diagram instead of emitting an asset once.</td>
</tr>
<tr>
<td><code>--serve-host &lt;ADDR&gt;</code></td>
<td>Override the bind address used while <code>--edit</code> is active (default <code>127.0.0.1</code>).</td>
</tr>
<tr>
<td><code>--serve-port &lt;PORT&gt;</code></td>
<td>Override the HTTP port while <code>--edit</code> is active (default <code>5151</code>).</td>
</tr>
<tr>
<td><code>-b, --background-color &lt;COLOR&gt;</code></td>
<td>Background fill passed to the renderer (currently SVG only). Applies to both one-off renders and the editor preview.</td>
</tr>
<tr>
<td><code>-q, --quiet</code></td>
<td>Suppress informational stdout such as the success message after rendering to disk.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Control</th>
<th>What it does</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Delete selected</code></td>
<td>Removes the currently selected node or edge; available via the Delete/Backspace keys as well.</td>
</tr>
<tr>
<td>Node Fill/Stroke/Text pickers</td>
<td>Apply per-node color overrides; double-clicking a node clears its override.</td>
</tr>
<tr>
<td><code>Reset node style</code></td>
<td>Remove all color overrides for the selected node.</td>
</tr>
<tr>
<td>Edge Color picker</td>
<td>Override the selected edge stroke color.</td>
</tr>
<tr>
<td>Edge Line selector</td>
<td>Toggle between solid and dashed stroke styles.</td>
</tr>
<tr>
<td>Edge Arrow selector</td>
<td>Choose arrow directions (forward/backward/both/none).</td>
</tr>
<tr>
<td><code>Add control point</code></td>
<td>Insert a new draggable waypoint on the selected edge to fine-tune routing.</td>
</tr>
<tr>
<td><code>Reset edge style</code></td>
<td>Drop edge-specific styling and revert to defaults; double-clicking an edge handle also clears its manual path.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><strong>Canvas and editor interactions</strong></p>
<ul dir="auto">
<li>Drag nodes to update their stored positions with grid snapping and live alignment guides; Shift+Arrow nudges the selection in grid-sized jumps.</li>
<li>Drag edge handles (or the label handle) to reshape routes; double-click an edge to insert a handle and double-click a handle to remove overrides.</li>
<li>Drag an entire subgraph container to move all of its member nodes (and any edge overrides) together while maintaining separation from sibling groups.</li>
<li>The source panel mirrors the Mermaid file, auto-saves after short idle periods, and surfaces pending/saving/error states alongside the current selection.</li>
<li>Status text in the top toolbar signals loading, saving, and the currently edited file path.</li>
</ul>

<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span>path_algo.mov</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/39285979/505616593-4430147a-83d8-4d83-aca6-7beec197c0e3.mov?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjE0MzA4NTMsIm5iZiI6MTc2MTQzMDU1MywicGF0aCI6Ii8zOTI4NTk3OS81MDU2MTY1OTMtNDQzMDE0N2EtODNkOC00ZDgzLWFjYTYtN2JlZWMxOTdjMGUzLm1vdj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMjUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDI1VDIyMTU1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTM4YTBkNTc4Mjg4ZGIwMmEyNGUwMTk2Y2VhOGM4MmMxM2EwOWUzOGY3MGU0NmQzMjJmYzVmOTE5OTkyYTgyMDgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.ELWmZn86gq9Nl8oYneols80pirdHiD7ZlVWCr430OCo" data-canonical-src="https://private-user-images.githubusercontent.com/39285979/505616593-4430147a-83d8-4d83-aca6-7beec197c0e3.mov?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NjE0MzA4NTMsIm5iZiI6MTc2MTQzMDU1MywicGF0aCI6Ii8zOTI4NTk3OS81MDU2MTY1OTMtNDQzMDE0N2EtODNkOC00ZDgzLWFjYTYtN2JlZWMxOTdjMGUzLm1vdj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTEwMjUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUxMDI1VDIyMTU1M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTM4YTBkNTc4Mjg4ZGIwMmEyNGUwMTk2Y2VhOGM4MmMxM2EwOWUzOGY3MGU0NmQzMjJmYzVmOTE5OTkyYTgyMDgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.ELWmZn86gq9Nl8oYneols80pirdHiD7ZlVWCr430OCo" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto">The path drawing algorithm is fun because there is a lot of ambiguity with what optimal behavior could be.
Some prefer smooth lines because there is less total line but I prefer strong edges to make the diagram a bit more clear.
Some prefer no overlapping lines but I sometimes prefer an overlap rather than letting the lines get super long and string out of the diagram very far.
This is an example of using the delete key to remove one relationship and then using the arrow keys to move around one the nodes and seeing how the algorithm recomputes the positioning.
There&#39;s definitely some improvements to be made to this algorithm so I imagine this will keep getting better :)</p>
</article></div></div>
  </body>
</html>
