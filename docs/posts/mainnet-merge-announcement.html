<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.ethereum.org/2022/08/24/mainnet-merge-announcement/">Original</a>
    <h1>Mainnet Merge Announcement</h1>
    
    <div id="readability-page-1" class="page"><div role="main">
  <!-- <div class="row">
    <div class="col-md-10 col-md-offset-1 el-post"> -->
      

      <article>
        <ul>
  <li>Ethereum is moving to proof-of-stake! The transition, known as The Merge, must first be activated on the Beacon Chain with the Bellatrix upgrade. After this, the proof-of-work chain will migrate to proof-of-stake upon hitting a specific <code>Total Difficulty</code> value.</li>
  <li>The Bellatrix upgrade is scheduled for epoch <strong><code>144896</code></strong> on the Beacon Chain – <strong>11:34:47am UTC on Sept 6, 2022</strong>.</li>
  <li>The <code>Terminal Total Difficulty</code> value triggering The Merge is <strong><code>58750000000000000000000</code></strong>, expected between <strong>Sept 10-20, 2022</strong>.</li>
  <li>Note: as <a href="https://blog.ethereum.org/2022/06/21/testnet-deprecation/">announced earlier</a>, the Kiln testnet is being sunset. Operators will shut down on September 6, 2022.</li>
</ul>

<h2 id="background">Background</h2>

<p>Following years of hard work, Ethereum’s proof-of-stake upgrade is finally here! The successful upgrade of all public testnets is now complete, and The Merge has been scheduled for the Ethereum mainnet.</p>

<p>The Merge is different from previous network upgrades in two ways. First, node operators need to update both their consensus layer (CL) and execution layer (EL) clients in tandem, rather than just one of the two. Second, the upgrade activates in two phases: the first, named Bellatrix, at an epoch height on the Beacon Chain, and the second, named Paris, upon hitting a <a href="https://eips.ethereum.org/EIPS/eip-3675#terminal-total-difficulty-vs-block-number"><code>Total Difficulty</code></a> value on the execution layer.</p>

<h2 id="upgrade-information">Upgrade Information</h2>

<p><img src="https://storage.googleapis.com/ethereum-hackmd/upload_aa804448c0b15c877035c523d6ae948a.png" alt=""/></p>

<h3 id="timing">Timing</h3>

<p><em>The Merge</em> is a two-step process. The first step is a network upgrade, Bellatrix, on the consensus layer triggered by an epoch height. This is followed by the execution layer’s transition from proof-of-work to proof-of-stake, Paris, triggered by a specific <code>Total Difficulty</code> threshold called the <code>Terminal Total Difficulty</code> (<code>TTD</code>).</p>

<p>The Bellatrix upgrade is scheduled for epoch <strong><code>144896</code></strong> on the Beacon Chain – <strong>11:34:47am UTC on Sept 6, 2022</strong>.</p>

<p>Paris, the execution layer’s portion of the transition, will be triggered by the <code>Terminal Total Difficulty (TTD)</code> of <strong><code>58750000000000000000000</code></strong>, expected between <strong><code>Sept 10-20, 2022</code></strong>. The exact date at which <code>TTD</code> is reached depends proof-of-work hash rate. Estimates for the transition can be found at <a href="https://bordel.wtf/">bordel.wtf</a> and <a href="https://797.io/themerge/">797.io/themerge</a>.</p>

<p>Once the execution layer reaches or exceeds the <code>TTD</code>, the subsequent block will be produced by a Beacon Chain validator. The Merge transition is considered complete once the Beacon Chain finalizes this block. Under normal network conditions, this will happen 2 epochs (or ~13 minutes) after the first post-TTD block is produced!</p>

<p>A new JSON-RPC block tag, <code>finalized</code>, returns the latest finalized block or an error if no such post-merge block exists. This tag can be used by applications to check if The Merge has been completed. Similarly, smart contracts can <a href="https://eips.ethereum.org/EIPS/eip-4399#using-264-threshold-to-determine-pos-blocks">query the <code>DIFFICULTY</code> opcode (<code>0x44</code>)</a> (renamed to <code>PREVRANDAO</code> post-merge) to determine if The Merge has happened. We recommend infrastructure providers monitor overall network stability in addition to finalization status.</p>

<h3 id="client-releases">Client Releases</h3>

<p>The following client releases support The Merge on the Ethereum mainnet. Node operators must run <strong>both</strong> an execution and consensus layer client to remain on the network during and after The Merge.</p>

<p>When choosing which client to run, validators should be especially mindful of the risks of running a majority client on both the EL and CL. An explainer of these risks and their consequences can be found <a href="https://dankradfeist.de/ethereum/2022/03/24/run-the-majority-client-at-your-own-peril.html">here</a>. An estimate of current EL and CL client distribution and guides for switching from one client to another can be found <a href="https://clientdiversity.org/">here</a>.</p>

<h4 id="consensus-layer">Consensus Layer</h4>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Version</th>
      <th>Link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Lighthouse</td>
      <td>v3.0.0</td>
      <td><a href="https://github.com/sigp/lighthouse/releases/tag/v3.0.0">Download</a></td>
    </tr>
    <tr>
      <td>Lodestar</td>
      <td>v1.0.0</td>
      <td><a href="https://github.com/ChainSafe/lodestar/releases/tag/v1.0.0">Download</a></td>
    </tr>
    <tr>
      <td>Nimbus</td>
      <td>v22.8.0</td>
      <td><a href="https://github.com/status-im/nimbus-eth2/releases/tag/v22.8.0">Download</a></td>
    </tr>
    <tr>
      <td>Prysm</td>
      <td>v3.0.0</td>
      <td><a href="https://github.com/prysmaticlabs/prysm/releases/tag/v3.0.0">Download</a></td>
    </tr>
    <tr>
      <td>Teku</td>
      <td>22.8.1</td>
      <td><a href="https://github.com/ConsenSys/teku/releases/tag/22.8.1">Download</a></td>
    </tr>
  </tbody>
</table>

<h4 id="execution-layer">Execution Layer</h4>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Version</th>
      <th>Link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Besu</td>
      <td>22.7.1</td>
      <td><a href="https://github.com/hyperledger/besu/releases/tag/22.7.1">Download</a></td>
    </tr>
    <tr>
      <td>Erigon</td>
      <td>v2022.08.02-alpha</td>
      <td><a href="https://github.com/ledgerwatch/erigon/releases/tag/v2022.08.02">Download</a></td>
    </tr>
    <tr>
      <td>go-ethereum (geth)</td>
      <td>v1.10.23</td>
      <td><a href="https://github.com/ethereum/go-ethereum/releases/tag/v1.10.23">Download</a></td>
    </tr>
    <tr>
      <td>Nethermind</td>
      <td>v1.14.0</td>
      <td><a href="https://github.com/NethermindEth/nethermind/releases/tag/1.14.0">Download</a></td>
    </tr>
  </tbody>
</table>

<p><strong><em>Warning</em></strong>: geth version v1.10.22 contains a critical database issue, do not use this version, and if you have already upgraded, please upgrade to v1.10.23 as soon as possible.</p>

<h3 id="upgrade-specifications">Upgrade Specifications</h3>

<p>Consensus-critical changes for The Merge are specified in two places:</p>

<ul>
  <li>The consensus layer changes under the <a href="https://github.com/ethereum/consensus-specs/tree/dev/specs/bellatrix"><code>Bellatrix</code> directory</a> of the consensus-specs repository</li>
  <li>The execution layer changes under the <a href="https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/paris.md"><code>Paris</code> spec</a> in the execution-specs repository</li>
</ul>

<p>In addition to these, two other specifications cover how the consensus and execution layer clients interact:</p>

<ul>
  <li>The Engine API, specified in the <a href="https://github.com/ethereum/execution-apis/tree/main/src/engine">execution-apis repository</a>, is used for communication between the consensus and execution layers</li>
  <li>Optimistic Sync, specified in the <a href="https://github.com/ethereum/consensus-specs/blob/dev/sync/optimistic.md"><code>sync</code></a> folder of the consensus-specs repository, is used by the consensus layer to import blocks as the execution layer client is syncing and to provide a partial view of the head of the chain from the former to the latter</li>
</ul>

<h2 id="merge-bug-bounty-bonus">Merge Bug Bounty Bonus</h2>

<p>All Merge-related bounties for vulnerabilities have received a 4x multiplier between now and the 8th of September. Critical bugs are now worth up to <strong>$1 million USD</strong>.</p>

<p>See the <a href="https://bounty.ethereum.org">bug bounty program</a> for more details.</p>

<h2 id="faq">FAQ</h2>

<h3 id="as-a-node-operator-what-should-i-do">As a node operator, what should I do?</h3>

<p>Post-merge, an Ethereum full node is the combination of a consensus layer (CL) client which runs the proof-of-stake Beacon Chain and an execution layer (EL) client which manages the user-state and runs the computations associated with transactions. The EL and CL client communicate over an authenticated port using a new set of JSON RPC methods called the <a href="https://github.com/ethereum/execution-apis/tree/main/src/engine">Engine API</a>. The EL and CL client authenticate each other using a JWT secret. <strong>Node operators should refer to their clients’ documentation for instructions about how to generate and configure this value.</strong></p>

<p>In other words, if you were already running a node on the Beacon Chain, you now also need to run an execution layer client. Similarly, if you were running a node on the current proof-of-work network, you will need to run a consensus layer client. For them to communicate securely, a JWT token must be passed to each client. An update to the <a href="https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/">‘Run a Node’ section</a> of the ethereum.org website goes over these steps in more detail.</p>

<p>It is worth emphasizing that while they are both part of consensus layer client releases, running a Beacon Node is distinct from running a Validator Client. Stakers must run both, but node operators only need the former. <a href="https://docs.ethhub.io/ethereum-roadmap/ethereum-2.0/eth-2.0-client-architecture/">This post</a> explains the difference between both components in more detail.</p>

<p>Also, note that each layer will maintain an independent set of peers and expose its own APIs. The <a href="https://github.com/ethereum/beacon-apis">Beacon</a> and <a href="https://github.com/ethereum/execution-apis">JSON RPC</a> APIs will both continue working as expected.</p>

<h3 id="as-a-staker-what-do-i-need-to-do">As a staker, what do I need to do?</h3>

<p>As explained above, <strong>validators on the Beacon Chain will need to run an execution layer client after The Merge in addition to their consensus layer clients.</strong> Pre-merge, this was strongly recommended, but some validators have outsourced these functions to third-party providers. This was possible because the only data required on the execution layer were updates to the deposit contract.</p>

<p>Post-merge, validators must ensure that user transactions and state transitions blocks that they create and attest to are valid. To do this, each beacon node must be paired with an execution layer client. Note that multiple validators can still be paired to a single beacon node &amp; execution layer client combo. This expands validators’ responsibilities but also gives a validator who proposes a block the right to its associated transaction priority fees (which currently go to miners).</p>

<p>While validator rewards still accrue on the Beacon Chain and will require a subsequent network upgrade to be withdrawn, transaction fees will be paid, burned, and distributed on the execution layer. Validators can specify any Ethereum address as a recipient for transaction fees.</p>

<p><strong>After updating your consensus client, be sure to set the <code>fee recipient</code> as part of your validator client configurations to ensure transaction fees are sent to an address you control.</strong> If you have staked using a third-party provider, it is up to your selected provider to specify how these fees are allocated.</p>

<p>The Staking Launchpad has a <a href="https://launchpad.ethereum.org/en/merge-readiness">Merge Readiness Checklist</a> that stakers can use to ensure they have gone through each step of the process. EthStaker have also hosted <a href="https://ethstaker.cc/ethstaker-validator-workshop/">Validator Prep Workshops</a>, with more being planned.</p>

<p>Stakers who wish to run a validator on a testnet in preparation for the mainnet proof-of-stake transition can do so on Goerli (now merged with Prater), which also has a <a href="https://prater.launchpad.ethereum.org/">Staking Launchpad instance</a>.</p>

<h3 id="why-is-the-estimated-date-for-the-terminal-total-difficulty-so-broad">Why is the estimated date for the <code>Terminal Total Difficulty</code> so broad?</h3>

<p>The incremental difficulty added per block is dependent on the network hash rate which is volatile. If more hash rate joins the network, <code>TTD</code> will be reached sooner. Similarly, if hash rate leaves the network, <code>TTD</code> will be reached later. In the event of a significant drop in hash rate levels, a <code>TTD Override</code> could be coordinated as was done on <a href="https://blog.ethereum.org/2022/06/03/ropsten-merge-ttd/">Ropsten</a>.</p>

<h3 id="as-an-application-or-tooling-developer-what-should-i-do">As an application or tooling developer, what should I do?</h3>

<p>As explained in a <a href="https://blog.ethereum.org/2021/11/29/how-the-merge-impacts-app-layer/">previous post</a>, The Merge will have only minimal impact on a subset of contracts deployed on Ethereum, none of which should be breaking. Additionally, the lion’s share of user API endpoints remain stable (unless you use proof-of-work specific methods such as <code>eth_getWork</code>).</p>

<p>That said, most applications on Ethereum involve much more than on-chain contracts. <strong>Now is the time</strong> to ensure that your front-end code, tooling, deployment pipeline and other off-chain components work as intended. We strongly recommend that developers run through a complete testing &amp; deployment cycle on Sepolia or Goerli and report any issues with tools or dependencies to those projects’ maintainers. If you are unsure where to open an issue, please use <a href="https://github.com/eth-clients/merge-testnets/">this repository</a>.</p>

<p>Additionally, please note that all testnets aside from Sepolia and Goerli will be deprecated post-merge. If you are a user of Ropsten, Rinkeby or Kiln, you should plan to migrate to Goerli or Sepolia. More information about this can be found <a href="https://blog.ethereum.org/2022/06/21/testnet-deprecation/">here</a>.</p>

<h3 id="as-an-ethereum-user-or-ether-holder-is-there-anything-i-need-to-do">As an Ethereum user or Ether holder, is there anything I need to do?</h3>

<p>Whether you are using Ethereum applications on-chain, holding Ether on an exchange or in a self-custodied wallet, you do not have to do anything. If an application, exchange or wallet you use offers additonal instructions or recommendations, you should verify these are actually coming from them. Be on the lookout for scams!</p>

<h3 id="as-a-miner-is-there-anything-i-need-to-do">As a miner, is there anything I need to do?</h3>

<p>No. If you are mining on the Ethereum mainnet, you should be aware that the network will operate entirely under proof-of-stake after The Merge. At that point, mining will no longer be possible on the network.</p>

<h3 id="what-happens-if-i-am-a-miner-or-node-operator-and-i-do-not-participate-in-the-upgrade">What happens if I am a miner or node operator and I do not participate in the upgrade?</h3>

<p>If you are using an Ethereum client that is not updated to the latest version (listed above), your client will sync to the pre-fork blockchain once the upgrade occurs.</p>

<p>You will be stuck on an incompatible chain following the old rules and will be unable to send Ether or operate on the post-merge Ethereum network.</p>

<h3 id="as-a-validator-can-i-withdraw-my-stake">As a validator, can I withdraw my stake?</h3>

<p>No. The Merge is the most complicated upgrade to Ethereum to date. To minimize risks of network disruptions, a minimal approach was taken which excluded any non-transition changes from this upgrade.</p>

<p>Withdrawals from the Beacon Chain will likely be introduced in the first upgrade after The Merge. Specifications for both the <a href="https://github.com/ethereum/consensus-specs/issues/2758">consensus</a> and <a href="https://eips.ethereum.org/EIPS/eip-4895">execution</a> layers are in progress.</p>

<h3 id="i-have-more-questions-where-can-i-ask-them">I have more questions, where can I ask them?</h3>

<p>Join client team developers, members of ETHStaker, researchers, and more on the next <a href="https://github.com/ethereum/pm/issues/599">Merge Community Call</a> on Friday, Sept 9 at 14:00 UTC!</p>

<h2 id="thank-you">Thank You</h2>

<p>Ethereum’s transition to proof-of-stake has been a <em>loooong</em> time coming. Thank you to everyone who contributed to researching, specifying, developing, analyzing, testing, breaking, fixing, or explaining everything that got us to The Merge.</p>

<p>There have been far too many contributors over the years to list here, but you know who you are. Without all of you in the bazaar, we wouldn’t have built this cathedral.</p>

<p>wen merge? Very 🔜.</p>

<hr/>

<p>Thank you to Joseph Schweitzer and Tomo Saito for the cover image for this post!</p>

      </article>

      

      
        <!-- Check if any share-links are active -->





      

      

      
        
      
    <!-- </div>
  </div> -->
</div></div>
  </body>
</html>
