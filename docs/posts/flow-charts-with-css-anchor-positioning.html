<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://coryrylan.com/blog/flow-charts-with-css-anchor-positioning">Original</a>
    <h1>Flow Charts with CSS Anchor Positioning</h1>
    
    <div id="readability-page-1" class="page"><div bp-layout="block gap:md"><p>With the introduction of the CSS Anchor Position API in Chrome 125, it&#39;s never been easier to position an element relative to another element. This is a great way to manage complex positioning use cases like popovers and tooltips.</p>
<p>However, CSS Anchor Posititioning can be used for more than just popovers and tooltips, it can be used to create basic flow chart diagrams. In this post we will learn how to use CSS Anchor Positioning to create flow charts and diagram with just CSS.</p>
<p><img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart.png" alt="Basic Flow Chart using CSS Anchor Position" loading="lazy" width="694" height="482"/></p><p>This post won&#39;t cover the full Anchor Poisitioning API. To learn more about the CSS Anchor Positioning API in depth check out the Chrome Dev blog post <a href="https://developer.chrome.com/blog/anchor-positioning-api">Introducing the CSS anchor positioning API</a>.</p>
<h2 id="basic-positioning">Basic Positioning <a href="#basic-positioning" aria-label="heading permalink"><svg width="36" height="30" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 24.32l-2.46 2.44a4 4 0 01-5.62 0 3.92 3.92 0 010-5.55l4.69-4.65a4 4 0 015.62 0 3.86 3.86 0 011 1.71 2 2 0 00.27-.27l1.29-1.28a5.89 5.89 0 00-1.15-1.62 6 6 0 00-8.44 0l-4.7 4.69a5.91 5.91 0 000 8.39 6 6 0 008.44 0l3.65-3.62h-.5a8 8 0 01-2.09-.24z"></path><path d="M28.61 7.82a6 6 0 00-8.44 0l-3.65 3.62h.49a8 8 0 012.1.28l2.46-2.44a4 4 0 015.62 0 3.92 3.92 0 010 5.55l-4.69 4.65a4 4 0 01-5.62 0 3.86 3.86 0 01-1-1.71 2 2 0 00-.28.23l-1.29 1.28a5.89 5.89 0 001.15 1.62 6 6 0 008.44 0l4.69-4.65a5.92 5.92 0 000-8.39z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></a></h2>
<p>CSS Anchor Positioning is a great way to position an element relative to another element.</p>
<figure bp-layout="block inline:center">
<img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-anchor.png" alt="Basic CSS Anchor Position" loading="lazy" width="688" height="594"/>
<figcaption>
  <a href="https://stackblitz.com/edit/basic-css-anchor-positioning" target="_blank">Basic CSS Anchor Position Demo</a>
</figcaption>
</figure>
<p>To create our first anchored element we need to provide a name to div &#34;one&#34; so we can reference it. Anchor names must be unique and start with two dashes <code>--</code>.</p>
<pre><code><span>.one</span> <span>{</span></code></pre>
<p>Next we need to provide the anchor positioning for div &#34;two&#34;. We will use <code>anchor(--anchor-one top)</code> to position div &#34;two&#34; relative to the top of div &#34;one&#34;.</p>
<pre><code><span>.two</span> <span>{</span></code></pre>
<p>We assign the div &#34;two&#34; bottom position to the top of div &#34;one&#34; using <code>anchor(--anchor-one top)</code>. We also use <code>justify-self: anchor-center</code> to center div &#34;two&#34; horizontally relative to div &#34;one&#34;. We can position any side of dive &#34;two&#34; to any side of div &#34;one&#34; using the same syntax (top, left, bottom, right).</p>
<h2 id="multiple-anchors">Multiple Anchors <a href="#multiple-anchors" aria-label="heading permalink"><svg width="36" height="30" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 24.32l-2.46 2.44a4 4 0 01-5.62 0 3.92 3.92 0 010-5.55l4.69-4.65a4 4 0 015.62 0 3.86 3.86 0 011 1.71 2 2 0 00.27-.27l1.29-1.28a5.89 5.89 0 00-1.15-1.62 6 6 0 00-8.44 0l-4.7 4.69a5.91 5.91 0 000 8.39 6 6 0 008.44 0l3.65-3.62h-.5a8 8 0 01-2.09-.24z"></path><path d="M28.61 7.82a6 6 0 00-8.44 0l-3.65 3.62h.49a8 8 0 012.1.28l2.46-2.44a4 4 0 015.62 0 3.92 3.92 0 010 5.55l-4.69 4.65a4 4 0 01-5.62 0 3.86 3.86 0 01-1-1.71 2 2 0 00-.28.23l-1.29 1.28a5.89 5.89 0 001.15 1.62 6 6 0 008.44 0l4.69-4.65a5.92 5.92 0 000-8.39z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></a></h2>
<p>With CSS Anchor Positioning we can anchor an element to two other elements at the same time.</p>
<figure bp-layout="block inline:center">
<img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/css-anchor-positioning-multiple.png" alt="CSS Anchor Positioning Multiple" loading="lazy" width="980" height="710"/>
<figcaption>
  <a href="https://stackblitz.com/edit/css-anchor-positioning-multiple" target="_blank">CSS Anchor Positioning Multiple Demo</a>
</figcaption>
</figure>
<p>Just like div &#34;one&#34; we assign an anchor name to div &#34;two&#34; for our new third div to reference.</p>
<pre><code><span>.one</span> <span>{</span></code></pre>
<p>The third div can now reference anchors one and two for positioning. To poisition div &#34;three&#34; to the center of both divs &#34;one&#34; and &#34;two&#34;, we use the <code>anchor()</code> function for each side of the element. We can position any side of div &#34;three&#34; to any side of either div &#34;one&#34; or &#34;two&#34;.</p>
<p>In this instance we are using <code>center</code> instead of a side to position relative to. This creates a overlap effect for the anchors.</p>
<pre><code><span>.three</span> <span>{</span></code></pre>
<h2 id="basic-flow-chart-nodes">Basic Flow Chart Nodes <a href="#basic-flow-chart-nodes" aria-label="heading permalink"><svg width="36" height="30" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 24.32l-2.46 2.44a4 4 0 01-5.62 0 3.92 3.92 0 010-5.55l4.69-4.65a4 4 0 015.62 0 3.86 3.86 0 011 1.71 2 2 0 00.27-.27l1.29-1.28a5.89 5.89 0 00-1.15-1.62 6 6 0 00-8.44 0l-4.7 4.69a5.91 5.91 0 000 8.39 6 6 0 008.44 0l3.65-3.62h-.5a8 8 0 01-2.09-.24z"></path><path d="M28.61 7.82a6 6 0 00-8.44 0l-3.65 3.62h.49a8 8 0 012.1.28l2.46-2.44a4 4 0 015.62 0 3.92 3.92 0 010 5.55l-4.69 4.65a4 4 0 01-5.62 0 3.86 3.86 0 01-1-1.71 2 2 0 00-.28.23l-1.29 1.28a5.89 5.89 0 001.15 1.62 6 6 0 008.44 0l4.69-4.65a5.92 5.92 0 000-8.39z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></a></h2>
<p>Using what we leanered with anchor positioning we can create a basic flow chart.</p>
<figure bp-layout="block inline:center">
<img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart.png" alt="Basic Flow Chart using CSS Anchor Position" loading="lazy" width="694" height="482"/>
<figcaption>
  <a href="https://stackblitz.com/edit/stackblitz-starters-p5co3s" target="_blank">Basic Flow Chart using CSS Anchor Position Demo</a>
</figcaption>
</figure>
<p>Using the same technique by anchoring an element between two nodes we can create a flow chart like effect with some additional CSS tricks.</p>
<p><img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart-step-1.png" alt="Basic Flow Chart - Step 1" loading="lazy" width="710" height="484"/></p><p>For the third div we can change the background color to use a background gradient to create a line effect in the middle of the div.</p>
<pre><code><span>.line</span> <span>{</span></code></pre>
<p><img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart-step-2.png" alt="Basic Flow Chart - Step 2" loading="lazy" width="694" height="480"/></p><p>Now that we have the centered positioned line, we can use CSS pseudo elements to create the arrow head on each side of the line.</p>
<pre><code><span>.line::before</span> <span>{</span></code></pre>
<p><img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart-step-3.png" alt="Basic Flow Chart - Step 3" loading="lazy" width="694" height="478"/></p><p>Then again with a CSS pseudo element on the other side of the line.</p>
<pre><code><span>.line::before,</span> <span>{</span></code></pre>
<figure bp-layout="block inline:center">
<img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/basic-flow-chart.png" alt="Basic Flow Chart using CSS Anchor Position" loading="lazy" width="694" height="482"/>
<figcaption>
  <a href="https://stackblitz.com/edit/basic-flow-chart-using-css-anchor-position" target="_blank">Basic Flow Chart using CSS Anchor Position Demo</a>
</figcaption>
</figure>
<h2 id="multiple-node-flow-chart">Multiple Node Flow Chart <a href="#multiple-node-flow-chart" aria-label="heading permalink"><svg width="36" height="30" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 24.32l-2.46 2.44a4 4 0 01-5.62 0 3.92 3.92 0 010-5.55l4.69-4.65a4 4 0 015.62 0 3.86 3.86 0 011 1.71 2 2 0 00.27-.27l1.29-1.28a5.89 5.89 0 00-1.15-1.62 6 6 0 00-8.44 0l-4.7 4.69a5.91 5.91 0 000 8.39 6 6 0 008.44 0l3.65-3.62h-.5a8 8 0 01-2.09-.24z"></path><path d="M28.61 7.82a6 6 0 00-8.44 0l-3.65 3.62h.49a8 8 0 012.1.28l2.46-2.44a4 4 0 015.62 0 3.92 3.92 0 010 5.55l-4.69 4.65a4 4 0 01-5.62 0 3.86 3.86 0 01-1-1.71 2 2 0 00-.28.23l-1.29 1.28a5.89 5.89 0 001.15 1.62 6 6 0 008.44 0l4.69-4.65a5.92 5.92 0 000-8.39z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></a></h2>
<p>This approach can be expanded on by providing additional nodes and chaining the anchors. However when we add additional lines we need to flip the line directions depending on the nodes relative position to the anchor. The CSS <a href="https://developer.chrome.com/blog/anchor-positioning-api/#adjust_anchor_positions_with_position-try">position-try-options</a> allows a easy way to declare fallback positions to use if the element can&#39;t be rendered within the provided space relative to the anchor.</p>
<pre><code><span>.line</span> <span>{</span></code></pre>
<figure bp-layout="block inline:center">
<img src="http://eieio.games/assets/images/posts/2024-05-27-flow-charts-with-css-anchor-positioning/complex-flow-chart.png" alt="Complex Flow Chart using CSS Anchor Position" loading="lazy" width="2120" height="2122"/>
<figcaption>
  <a href="https://stackblitz.com/edit/multi-node-flow-chart-using-css-anchor-position" target="_blank">Complex Flow Chart using CSS Anchor Position Demo</a>
</figcaption>
</figure>
<h2 id="draggable-flow-chart">Draggable Flow Chart <a href="#draggable-flow-chart" aria-label="heading permalink"><svg width="36" height="30" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 24.32l-2.46 2.44a4 4 0 01-5.62 0 3.92 3.92 0 010-5.55l4.69-4.65a4 4 0 015.62 0 3.86 3.86 0 011 1.71 2 2 0 00.27-.27l1.29-1.28a5.89 5.89 0 00-1.15-1.62 6 6 0 00-8.44 0l-4.7 4.69a5.91 5.91 0 000 8.39 6 6 0 008.44 0l3.65-3.62h-.5a8 8 0 01-2.09-.24z"></path><path d="M28.61 7.82a6 6 0 00-8.44 0l-3.65 3.62h.49a8 8 0 012.1.28l2.46-2.44a4 4 0 015.62 0 3.92 3.92 0 010 5.55l-4.69 4.65a4 4 0 01-5.62 0 3.86 3.86 0 01-1-1.71 2 2 0 00-.28.23l-1.29 1.28a5.89 5.89 0 001.15 1.62 6 6 0 008.44 0l4.69-4.65a5.92 5.92 0 000-8.39z"></path><path fill="none" d="M0 0h36v36H0z"></path></svg></a></h2>
<p>Using a bit of JavaScript we can make our node elements draggable and create a draggable flow chart.</p>
<figure bp-layout="block inline:center">
<video src="https://coryrylan.web.app/assets/video/posts/2024-05-27-flow-charts-with-css-anchor-positioning/draggable-flow-chart.mp4" autoplay="" loop="" controls=""></video>
<figcaption>
  <a href="https://stackblitz.com/edit/draggable-flow-chart-using-css-anchor-position" target="_blank">Complex Flow Chart using CSS Anchor Position Demo</a>
</figcaption>
</figure></div></div>
  </body>
</html>
