<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://george.mand.is/2023/09/building-a-mute-button-toggler-for-zoom-with-espruino-and-puckjs/">Original</a>
    <h1>Building a Mute Button Toggler for Zoom with Espruino and Puck.js</h1>
    
    <div id="readability-page-1" class="page"><div><article><section><header><p><date>Saturday, September 9th 2023</date></p></header><p>Wouldn&#39;t it be nice if you had a little device you could click to mute and unmute yourself on a Zoom call? In this remote-work world many of us have plunged into post COVID, I don&#39;t think it&#39;s that uncommon to find yourself on an occasional Zoom meeting, camera-off, milling about your kitchen while you listen.</p><p>If you find yourself needing to chime-in though, what do you do? Run back over to your computer like a goofball Wrestle with the mouse or keyboard to unmute yourself and say &#34;Yup, that sounds about right!&#34; before running back to your kitchen business?</p><p>My friends, this is a task the <a href="https://www.puck-js.com/">Puck.js</a> was <em>born</em> to solve.</p><iframe width="100%" height="315" src="https://www.youtube.com/embed/KDszbcDRIL4?si=oIKa-vQcgbkkUUxh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe><p>Inspired by an idle thought from a coworker, I whipped up a simple program to turn my neglected clicker into a little Zoom muter.</p><h3>Espruino, Puck.js and JavaScripton Thingsâ„¢</h3><p>The Puck.js is a custom Bluetooth beacon powered by <a href="https://www.espruino.com/">Espruino</a>â€”a custom flavor of JavaScript designed to work on low-powered, single board microcontrollers. Both the language and the device(s) were designed by <a href="https://changelog.com/news/kickstarting-espruino-with-gordon-williams-ml1">Gordon Williams</a>.</p><h3>HID, Bluetooth HID and</h3><p>One of the more fun things you can do hacking around with a Bluetooth-capable controller is broadcast the services your device offers and identify what kind of device it is. Other device can see this &#34;profile&#34; broadcast and will use that to interpret how it should interface with you based on some established standard in the HID and/or BLE HID spec.</p><p>An exampe: I have (mostly undeserved) credit for contributing to the BLE MIDI module for the Espruino ecosystem here:</p><ul><li><a href="https://www.espruino.com/BLE+MIDI">https://www.espruino.com/BLE+MIDI</a></li></ul><p>That module makes it so that computers can specifically recognize it as a Bluetooth MIDI device. When it&#39;s connected to another device that understands it to be a BLE MIDI device, it&#39;s now for all intents and purposes a MIDI instrument and can behave/communicate as such.</p><p>ðŸ‘† If you&#39;re curious how or <em>why</em> I did this, check out my <a href="https://github.com/georgemandis/puck-js-midi-clicker">Puck.js MIDI instrument code</a> and peruse some of <a href="https://www.youtube.com/playlist?list=PLsTcGz22ZXo4omxUbGHooU8iaqyhMLG77">my videos on YouTube</a>.</p><p>What other kinds of devices can you <s>trick</s> tell other computers you are? A completely unexhaustive list includes:</p><ul><li>Joysticks</li><li>Mice</li><li>Keyboards</li><li>Headsets</li><li>MIDI Instruments (technically not HID, I think, but in the same spirit)</li><li>Webcams</li><li>Health Devices</li><li>Audio/Video Remote Controls</li></ul><p>Rules! Standards! They are what separate us from the animals... and also the reason your AirPods can talk to your Android phone.</p><h3>How did the Zoom mute toggler work?</h3><p>For our Zoom mute toggler, I focused on the keyboard profile. I was basically going to turn it into a bluetooth keboard that did exactly one thing.</p><p>My approach was simple:</p><ul><li>Tell the Puck.js to broadcast itself as <a href="https://www.espruino.com/BLE+Keyboard">BLE keyboard</a></li><li>When the button (there is only one button) is pressed, &#34;tap&#34; the keyboard shortcut for toggling the microphone in Zoom</li><li>When the button is released, &#34;type&#34; the same keyboard shortcut again (so it acts like a toggle)</li></ul><p>That&#39;s... it! All-in-all, about 20 lines of code:</p><ul><li><a href="https://github.com/georgemandis/espruino-zoom-muter">https://github.com/georgemandis/espruino-zoom-muter</a></li></ul><p>With the code flashed to the Puck.js I can now connect to it from the Bluetooth settings in macOS. It will recognize it as a BLE keyboard and start accepting keystrokes from it immediately.</p><p><strong>Shortcoming of this approach:</strong></p><ul><li>It is literally hard-coded to Zoom. If you&#39;re using ofter video chat software, you&#39;d have to change the keyboard shortcut.</li><li>It requires Zoom to be the application current in focus on your system. Otherwise it will send <code>Ctrl/Cmd+Shift+A</code> to whatever the foreground application is.</li></ul><p><strong>Future improvements:</strong></p><ul><li>Maybe I could adopt the single/double/triple click code I implemented for the MIDI clicker to give this device different &#34;modes&#34; depending on the video software I&#39;m using? It&#39;s mostly a Zoom world out there for me, but once in a while I find myself on a Slack huddle or Google ... whatever they&#39;re calling their video stuff these days. Meet?</li><li>The behavior currently is designed around holding it down when you want to speak and releasing the button when you want to go on mute again. Still not sure if that&#39;s the most ergonomic UX, but it seems fine for now.</li></ul><h3>I want one!</h3><p>If you&#39;d like your own, simply:</p><ol><li>Go to <a href="https://www.puck-js.com/">puck-js.com</a> and buy one</li><li><a href="https://github.com/georgemandis/espruino-zoom-muter">Copy the code</a> and flash it to your device using the <a href="https://www.espruino.com/ide/">Espruino Web IDE</a></li></ol><p>That&#39;s it!</p><p>If you&#39;d like me to <em>make one</em> for youâ€”or have some other idea for a single-button &#34;thing&#34; you&#39;d like to see implemented this wayâ€”<a href="https://george.mand.is/contact">get in touch</a>! My prices are very reasonably :-)</p></section></article></div></div>
  </body>
</html>
