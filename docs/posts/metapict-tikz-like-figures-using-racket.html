<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://soegaard.github.io/blog/metapict/">Original</a>
    <h1>Show HN: Metapict – TikZ like figures using Racket</h1>
    
    <div id="readability-page-1" class="page">
<p>The Metapict Blog</p><p>Jens Axel Søgaard, <span>jensaxel@soegaard.net</span></p><nav id="toc">
<ol role="directory"><li><a href="#1"><span>1</span>
     <span>Introduction</span></a></li><li><a href="#2"><span>2</span>
     <span>Arrows</span></a></li><li><a href="#3"><span>3</span>
     <span>Regular polygons</span></a></li><li><a href="#4"><span>4</span>
     <span>Venn Diagrams</span></a></li><li><a href="#5"><span>5</span>
     <span>Simple Block Diagrams - Passes in Racket</span></a></li><li><a href="#6"><span>6</span>
     <span>Clock</span></a></li></ol>
<a href="#index"><span>Index</span></a></nav><a name="1"></a><p>1.  Introduction</p><p>This blog features small programs using Metapict to draw figures and images.

Write to Jens Axel Søgaard at <span>jensaxel@soegaard.net</span> with comments and wishes for new topics.</p><a name="2"></a><p>2.  Arrows</p><div><p>
First let’s work on images of size 200x200 and let us keep the default
user window which has an <span>\(x\)</span>-range from -1 and 1 and an <span>\(y\)</span>-range from -1 to 1.
</p><blockquote></blockquote><p>


Given a curve </p><p><span>c</span></p><p>, the form </p><p><span><span><span>draw-arrow</span></span></span></p><p> is used to draw the curve
and arrow head(s). Let’s define some curves we can turn into arrows.
<span>Here <p><span>(</span><span><span><span>arc</span></span></span><span> </span><span>C</span><span> </span><span>A</span><span> </span><span>B</span><span>)</span></p> draws a circular arc from <span>\(A\)</span> to <span>\(B\)</span> with center <span>\(C\)</span>.</span></p><blockquote></blockquote>
<blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c1</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c2</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-double-arrow</span></span></span><span> </span><span>c3</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

The default behavior is to draw an arrow head at the end of the curve.
Use </p><p><span><span><span>draw-double-arrow</span></span></span></p><p> to draw arrow heads at both at the beginning and end
of the curve.</p></div><div><p>The discussion below goes into detail with the shape of the default arrow head,
but let’s demonstrate that there are alternative arrow heads available.



</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c1</span><span> </span><span>#:head</span><span> </span><span><span><span>arrow-head</span></span></span></td></tr><tr><td><span>  </span><span>                     </span><span>#:tail</span><span> </span><span><span><span>line-head</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c2</span><span> </span><span>#:head</span><span> </span><span><span><span>harpoon-up</span></span></span></td></tr><tr><td><span>  </span><span>                     </span><span>#:tail</span><span> </span><span><span><span>harpoon-down</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c3</span><span> </span><span>#:head</span><span> </span><span><span><span>hook-head</span></span></span></td></tr><tr><td><span>  </span><span>                     </span><span>#:tail</span><span> </span><span><span><span>reverse-hook-head</span></span></span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_2.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>

<p><span>Here “ah” is short for “arrow head”.</span>

Several parameters affect the size and shape of the default arrow head. The most important
is </p><p><span><span><span>ahlength</span></span></span></p><p> which holds the length of the arrowhead.
</p><blockquote><table><tbody><tr><td></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>my-arrow</span><span> </span><span>0.04</span><span> </span><span>c1</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>my-arrow</span><span> </span><span>0.08</span><span> </span><span>c2</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>my-arrow</span><span> </span><span>0.16</span><span> </span><span>c3</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_3.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
The unit used by </p><p><span><span><span>ahlength</span></span></span></p><p> is user coordinates. This can at times
be inconvenient, so you can use </p><p><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>x</span><span>)</span></p><p> to compute the size of <span>\(x\)</span> pixels
expressed in user coordinates.

</p><blockquote><table><tbody><tr><td></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>my-arrow</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span>  </span><span>4</span><span>)</span><span> </span><span>c1</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>my-arrow</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span>  </span><span>8</span><span>)</span><span> </span><span>c2</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>my-arrow</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>16</span><span>)</span><span> </span><span>c3</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_4.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
Now, let’s look closer at the default arrow head:
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>100</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_5.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>
<p><span>The default value for the parameter <p><span><span><span>ahangle</span></span></span></p> is 45 (degrees).</span>

Let’s try different values for the parameter </p><p><span><span><span>ahangle</span></span></span></p><p>.
And to make room for several arrow heads, we will reduce the pict size.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._set-curve-pict-size%2529%2529" data-pltdoc="x">set-curve-pict-size</a></span><span> </span><span>100</span><span> </span><span>100</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>50</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>head</span><span> </span><span><span><span>angle</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>ahangle</span></span></span><span> </span><span><span><span>angle</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._beside%2529%2529" data-pltdoc="x">beside</a></span><span> </span><span>(</span><span>head</span><span> </span><span>20</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>30</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>40</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>50</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>60</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_6.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
If you have two arrows pointing to the same point, and you feel the
overlap of the two arrow heads is too large, consider using a smaller value
for </p><p><span><span><span>ahangle</span></span></span></p><p>.</p></div><div><p>
The parameter </p><p><span><span><span>ahflankangle</span></span></span></p><p> controls the “flank angle”. The default is 10 (degrees).
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahangle</span></span></span><span> </span><span>45</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>head</span><span> </span><span><span><span>angle</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>ahflankangle</span></span></span><span> </span><span><span><span>angle</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._beside%2529%2529" data-pltdoc="x">beside</a></span><span> </span><span>(</span><span>head</span><span> </span><span>5</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>10</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>15</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>20</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>25</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_7.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>
The parameter </p><p><span><span><span>ahtailcurvature</span></span></span></p><p> controls the “tail curvature”. The default is 2.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahflankangle</span></span></span><span> </span><span>10</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>head</span><span> </span><span>curvature</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>ahtailcurvature</span></span></span><span> </span><span>curvature</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._beside%2529%2529" data-pltdoc="x">beside</a></span><span> </span><span>(</span><span>head</span><span> </span><span>2</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>4</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>8</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>16</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>32</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_8.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>
Finally, the parameter </p><p><span><span><span>ahratio</span></span></span></p><p> controls the size of the indentation
relative to the length of the arrow head. The default value is 0.9.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahtailcurvature</span></span></span><span> </span><span>2</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>head</span><span> </span><span>ratio</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>ahratio</span></span></span><span> </span><span>ratio</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._beside%2529%2529" data-pltdoc="x">beside</a></span><span> </span><span>(</span><span>head</span><span> </span><span>1</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>0.9</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>0.8</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>0.7</span><span>)</span><span> </span><span>(</span><span>head</span><span> </span><span>0.6</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_9.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>We can get a boring, standard arrow head like this:
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahflankangle</span></span></span><span> </span><span>0</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahtailcurvature</span></span></span><span> </span><span>0</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahratio</span></span></span><span> </span><span>1</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_10.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
Let’s set our parameters back to the default:
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahangle</span></span></span><span> </span><span>45</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahflankangle</span></span></span><span> </span><span>10</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahtailcurvature</span></span></span><span> </span><span>2</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahratio</span></span></span><span> </span><span>0.89</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_11.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>The parameters are convenient to use to set the appearance of all arrows in a figure.
If you need special values for a few arrows, then pass the settings as keyword arguments.
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span>        </span><span>c1</span><span> </span><span>#:length</span><span>        </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>8</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span>        </span><span>c2</span><span> </span><span>#:length-ratio</span><span>  </span><span>1</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-double-arrow</span></span></span><span> </span><span>c3</span><span> </span><span>#:head-angle</span><span>    </span><span>30</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_12.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>Apropos options, let’s play with colors and filling of the arrow heads.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>8</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c1</span><span> </span><span>#:color</span><span> </span><span>&#34;red&#34;</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c2</span><span> </span><span>#:fill-head</span><span> </span><span>#f</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>c3</span></td></tr><tr><td><span>  </span><span>              </span><span>#:stem-color</span><span> </span><span>&#34;blue&#34;</span></td></tr><tr><td><span>  </span><span>              </span><span>#:head-color</span><span> </span><span>&#34;cyan&#34;</span></td></tr><tr><td><span>  </span><span>              </span><span>#:head-outline-color</span><span> </span><span>&#34;darkgreen&#34;</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_13.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><a name="3"></a><p>3.  Regular polygons</p><p>In this example we will see several ways of drawing regular polygons.</p><div><p>We begin by importing </p><p><span>metapict</span></p><p> and setting the “curve pict size”.
</p><blockquote></blockquote><p>
When a curve is drawn by </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span></p><p>, the curve is drawn on a pict with this size.
Let’s draw a little test curve to see this.
</p><blockquote><table><tbody><tr><td></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>point</span><span> </span><span>&#34;red&#34;</span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span><span>-1</span></span><span>  </span><span>0</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>point</span><span> </span><span>&#34;violet&#34;</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>  </span><span>1</span><span>  </span><span>1</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>point</span><span> </span><span>&#34;blue&#34;</span><span>   </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>  </span><span>0</span><span> </span><span><span>-1</span></span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span><span>-1</span></span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>1</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span><span>-1</span></span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_14.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

We see that the default user coordinates has an <span>\(x\)</span>-range
<span>\[\text{from } x_\text{min}=-1 \text{ to } x_\text{max}=1, \]</span>and an <span>\(y\)</span>-range given by
<span>\[\text{from } y_\text{min}=-1 \text{ to }  y_\text{max}=1. \]</span>We will stick with this default window for now.</p></div><div><p>
We can manually draw a regular polygon with  <span>\(n=3\)</span> sides:
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%2529%2529" data-pltdoc="x">color</a></span><span> </span><span>&#34;gray&#34;</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>1</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>1</span><span> </span><span>0</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>(</span><span><span><span>cosd</span></span></span><span> </span><span>120</span><span>)</span><span> </span><span>(</span><span><span><span>sind</span></span></span><span> </span><span>120</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>(</span><span><span><span>cosd</span></span></span><span> </span><span>240</span><span>)</span><span> </span><span>(</span><span><span><span>sind</span></span></span><span> </span><span>240</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._cycle%2529%2529" data-pltdoc="x">cycle</a></span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_15.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
Here </p><p><span>(</span><span><span><span>cosd</span></span></span><span> </span><span>d</span><span>)</span></p><p> and </p><p><span>(</span><span><span><span>sind</span></span></span><span> </span><span>d</span><span>)</span></p><p> computes the cosine and sine respectively to <span>\(d\)</span> degrees.</p></div><div><p>
The function call </p><p><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>r</span><span> </span><span>θ</span><span>)</span></p><p> will return the point <span>\(P\)</span> that a distance <span>\(r\)</span> from
the origin  <span>\(O(0,0);\)</span> the angle between the <span>\(x\)</span>-axis and <span>\(P\)</span> will be <span>\(θ\)</span> degrees.
<span>The <p><span>d</span></p> in <p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span></p> stands for degrees.</span>
Using this function, we can write our example as:
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%2529%2529" data-pltdoc="x">color</a></span><span> </span><span>&#34;gray&#34;</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>1</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span>   </span><span>0</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span> </span><span>120</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span> </span><span>240</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._cycle%2529%2529" data-pltdoc="x">cycle</a></span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_16.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
In a similar fashion we can draw a regular polygon with  <span>\(n=4\)</span> sides:
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%2529%2529" data-pltdoc="x">color</a></span><span> </span><span>&#34;gray&#34;</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>1</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span>   </span><span>0</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span>  </span><span>90</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span> </span><span>180</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span> </span><span>270</span><span>)</span></td></tr><tr><td><span>  </span><span>             </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._cycle%2529%2529" data-pltdoc="x">cycle</a></span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_17.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
We begin to see a pattern. The points on the regular polygon
with <span>\(n\)</span> sides can be computed like this:
</p><blockquote><div><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>regular-points</span><span> </span><span>n</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" data-pltdoc="x">/</a></span><span> </span><span>360</span><span> </span><span>n</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/for.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._for%2Flist%29%29" data-pltdoc="x">for/list</a></span><span> </span><span>(</span><span>[</span><span>i</span><span> </span><span>n</span><span>]</span><span>)</span></td></tr><tr><td><span>  </span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>1</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>i</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></div></blockquote><p>
In order to draw the polygon, we need to add the path connector </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span></p><p>
between each point – and append </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._cycle%2529%2529" data-pltdoc="x">cycle</a></span></p><p>.

Since </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span></p><p> is a macro, we can’t apply </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span></p><p> to our path description,
instead we use the function version named </p><p><span><span><span>curve*</span></span></span></p><p>.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" data-pltdoc="x">require</a></span><span> </span><span>racket/list</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>regular</span><span> </span><span>n</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>ps</span><span>   </span><span>(</span><span>regular-points</span><span> </span><span>n</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span><span><span>path</span></span></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._append%29%29" data-pltdoc="x">append</a></span><span> </span><span>(</span><span>add-between</span><span> </span><span>ps</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span>)</span></td></tr><tr><td><span>  </span><span>                    </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._cycle%2529%2529" data-pltdoc="x">cycle</a></span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>curve*</span></span></span><span> </span><span><span><span>path</span></span></span><span>)</span><span>)</span></td></tr></tbody></table></td></tr></tbody></table></blockquote><p>

And we can now draw a regular polygon with  <span>\(n=6\)</span> sides:
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>regular</span><span> </span><span>6</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_18.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>

</div><a name="4"></a><p>4.  Venn Diagrams</p><p>In this section we are drawing Venn diagrams.</p><div><p>First we will set the size of the image and the window in user coordinates.
</p><blockquote></blockquote><p>

Let’s begin by drawing two circles with radius 5. 
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>r</span><span> </span><span>5</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>s</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" data-pltdoc="x">/</a></span><span> </span><span>r</span><span> </span><span>1.8</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>c1</span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>s</span><span>)</span><span> </span><span>0</span><span>)</span><span> </span><span>r</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>c2</span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>    </span><span>s</span><span>  </span><span>0</span><span>)</span><span> </span><span>r</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>c1</span><span> </span><span>c2</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_19.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

Now let’s pick some nice colors:
<span>The call <p><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>f</span><span> </span><span>color1</span><span> </span><span>color2</span><span>)</span></p> interpolates between the two colors.</span></p><blockquote></blockquote><p>

Let’s also pick a font:
</p><blockquote><div><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>font</span><span> </span><span>(</span><span><span><span>make-similar-font</span></span></span><span> </span><span>(</span><span><span><span>new-font</span></span></span><span>)</span></td></tr><tr><td><span>  </span><span>                             </span><span>#:size</span><span> </span><span>15</span></td></tr><tr><td><span>  </span><span>                             </span><span>#:face</span><span> </span><span>&#34;Arial&#34;</span><span>)</span><span>)</span></td></tr></tbody></table></div></blockquote><p>

We are now ready to tackle the problem of filling the inside of both circles.
The function </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span></p><p> is used to fill a curve. The pen is used for outlines
and the brush is used for areas. Setting </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span></p><p> will fill
the inside with a solid color.


</p><blockquote><table><tbody><tr><td></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_20.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

The rule used to determine whether a point <span>\(P\)</span> is in the interior:</p></div><p><span>Given a point <span>\(P\)</span>, consider a ray from <span>\(P\)</span> towards infinity.
For each intersection between the ray and the curve(s),
determine whether the curve crosses right-to-left or left-to-right.
Each right-to-left crossing counts as +1 and each left-to-right crossing as -1.
If the total sum of the counts is non-zero, then the point will be filled.</span></p><div><p>If we alter the orientation of the curve </p><p><span>c2</span></p><p> (the second circle) then the points
in the intersection of the two disks will sum to zero - so they won’t be filled.</p></div><div><p>We use </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve-reverse%2529%2529" data-pltdoc="x">curve-reverse</a></span></p><p> to reverse the orientation of a curve.

</p><blockquote></blockquote><p>

We want to fill the part of </p><p><span>c1</span></p><p> that lies outside </p><p><span>c2</span></p><p> with red.
Now too much is filled. If we clip out the left part, we have what we need.
We introduce two rectangles </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._left%2529%2529" data-pltdoc="x">left</a></span></p><p> and </p><p><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._right%2529%2529" data-pltdoc="x">right</a></span></p><p>.
</p><blockquote></blockquote></div><div><p>The function </p><p><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span><a href="http://docs.racket-lang.org/pict/Pict_Datatype.html#%28def._%28%28lib._pict%2Fmain..rkt%29._pict%29%29" data-pltdoc="x">pict</a></span><span>)</span></p><p> clips the part of the pict that is inside the curve.

</p><blockquote></blockquote><p>
Note that we could have used </p><p><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._left%2529%2529" data-pltdoc="x">left</a></span><span> </span><span>c1</span><span>)</span></p><p> and </p><p><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._right%2529%2529" data-pltdoc="x">right</a></span><span> </span><span>c2</span><span>)</span></p><p>
for the clipping instead.</p></div><div><p>Anyways, combining these two parts we get:
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._left%2529%2529" data-pltdoc="x">left</a></span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>red</span></td></tr><tr><td><span>  </span><span>                                 </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>(</span><span>rev</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._right%2529%2529" data-pltdoc="x">right</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>blue</span></td></tr><tr><td><span>  </span><span>                                 </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>(</span><span>rev</span><span> </span><span>c1</span><span>)</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>c1</span><span> </span><span>c2</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_24.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>
If we fill the entire figure with magenta first, and then draw these two parts
on top, we get:
</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>mag</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>c2</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._left%2529%2529" data-pltdoc="x">left</a></span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>red</span></td></tr><tr><td><span>  </span><span>                                 </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>(</span><span>rev</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._right%2529%2529" data-pltdoc="x">right</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>blue</span></td></tr><tr><td><span>  </span><span>                                 </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>(</span><span>rev</span><span> </span><span>c1</span><span>)</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>c1</span><span> </span><span>c2</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_25.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

Let’s end the example by adding labels to the figure.

</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>text-color</span></span></span><span> </span><span>&#34;white&#34;</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><span><span>with-font</span></span></span><span> </span><span>font</span></td></tr><tr><td><span>  </span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>mag</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>c2</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._left%2529%2529" data-pltdoc="x">left</a></span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>red</span></td></tr><tr><td><span>  </span><span>                                     </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>(</span><span>rev</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._right%2529%2529" data-pltdoc="x">right</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>blue</span></td></tr><tr><td><span>  </span><span>                                     </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>(</span><span>rev</span><span> </span><span>c1</span><span>)</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>c1</span><span> </span><span>c2</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Flabel..rkt%2529._label-cnt%2529%2529" data-pltdoc="x">label-cnt</a></span><span> </span><span>&#34;A&#34;</span><span>     </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>r</span><span>)</span><span> </span><span>0</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Flabel..rkt%2529._label-cnt%2529%2529" data-pltdoc="x">label-cnt</a></span><span> </span><span>&#34;B&#34;</span><span>     </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>    </span><span>r</span><span>  </span><span>0</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Flabel..rkt%2529._label-cnt%2529%2529" data-pltdoc="x">label-cnt</a></span><span> </span><span>&#34;A ∩ B&#34;</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>    </span><span>0</span><span>  </span><span>0</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_26.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><p>Let’s try and the same with three circles.</p><div><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" data-pltdoc="x">require</a></span><span> </span><span>metapict</span><span> </span><span>racket/list</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._set-curve-pict-size%2529%2529" data-pltdoc="x">set-curve-pict-size</a></span><span> </span><span>35</span><span> </span><span>35</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span>  </span><span>x</span><span>  </span><span>10</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span><span>-x</span></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>x</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._curve-pict-window%2529%2529" data-pltdoc="x">curve-pict-window</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._window%2529%2529" data-pltdoc="x">window</a></span><span> </span><span><span>-x</span></span><span> </span><span>x</span><span> </span><span><span>-x</span></span><span> </span><span>x</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>red</span><span>   </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.2</span><span> </span><span>&#34;red&#34;</span><span>   </span><span>&#34;white&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>blue</span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.2</span><span> </span><span>&#34;blue&#34;</span><span>  </span><span>&#34;white&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>green</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.2</span><span> </span><span>&#34;green&#34;</span><span> </span><span>&#34;white&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>gray</span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%252B%2529%2529" data-pltdoc="x">color+</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%252A%2529%2529" data-pltdoc="x">color*</a></span><span> </span><span>0.33</span><span> </span><span>red</span><span>)</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%252B%2529%2529" data-pltdoc="x">color+</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%252A%2529%2529" data-pltdoc="x">color*</a></span><span> </span><span>0.33</span><span> </span><span>green</span><span>)</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color%252A%2529%2529" data-pltdoc="x">color*</a></span><span> </span><span>0.33</span><span> </span><span>blue</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>mag</span><span>   </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.5</span><span> </span><span>&#34;red&#34;</span><span>  </span><span>&#34;blue&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>rg</span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.5</span><span> </span><span>&#34;red&#34;</span><span>  </span><span>&#34;green&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>bg</span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcolor..rkt%2529._color-med%2529%2529" data-pltdoc="x">color-med</a></span><span> </span><span>0.5</span><span> </span><span>&#34;blue&#34;</span><span> </span><span>&#34;green&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>r</span><span> </span><span>5</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>s</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" data-pltdoc="x">/</a></span><span> </span><span>r</span><span> </span><span>1.8</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>c1</span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>s</span><span>)</span><span> </span><span>0</span><span>)</span><span>        </span><span>r</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>c2</span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>    </span><span>s</span><span>  </span><span>0</span><span>)</span><span>        </span><span>r</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>c3</span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span>    </span><span>0</span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span><span>-1</span></span><span> </span><span>r</span><span>)</span><span>)</span><span> </span><span>r</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>rev</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve-reverse%2529%2529" data-pltdoc="x">curve-reverse</a></span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>r1</span><span> </span><span>(</span><span>rev</span><span> </span><span>c1</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>r2</span><span> </span><span>(</span><span>rev</span><span> </span><span>c2</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>r3</span><span> </span><span>(</span><span>rev</span><span> </span><span>c3</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>diagrams</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/for.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._for%2A%2Flist%29%29" data-pltdoc="x">for*/list</a></span><span> </span><span>(</span><span>[</span><span>Mag</span><span>   </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>mag</span><span>   </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Rg</span><span>    </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>rg</span><span>    </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Bg</span><span>    </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>bg</span><span>    </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Red</span><span>   </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>red</span><span>   </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Blue</span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>blue</span><span>  </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Green</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>green</span><span> </span><span>&#34;white&#34;</span><span>)</span><span>]</span></td></tr><tr><td><span>  </span><span>              </span><span>[</span><span>Gray</span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" data-pltdoc="x">list</a></span><span> </span><span>gray</span><span>  </span><span>&#34;white&#34;</span><span>)</span><span>]</span><span>)</span></td></tr><tr><td><span>  </span><span>    </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c1</span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c2</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Mag</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>c2</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c1</span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c3</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Rg</span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>c3</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c2</span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c3</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Bg</span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c2</span><span> </span><span>c3</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c1</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Red</span><span>   </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span> </span><span>r2</span><span> </span><span>r3</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c2</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Blue</span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c2</span><span> </span><span>r1</span><span> </span><span>r3</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c3</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Green</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c3</span><span> </span><span>r1</span><span> </span><span>r2</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c1</span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c2</span><span> </span><span>(</span><span><span><span>clipped</span></span></span><span> </span><span>c3</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._brushcolor%2529%2529" data-pltdoc="x">brushcolor</a></span><span> </span><span>Gray</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._fill%2529%2529" data-pltdoc="x">fill</a></span><span> </span><span>c1</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>          </span><span>c1</span><span> </span><span>c2</span><span> </span><span>c3</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">define</a></span><span> </span><span>(</span><span>rows</span><span> </span><span>xs</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" data-pltdoc="x">if</a></span><span> </span><span>(</span><span>empty?</span><span> </span><span>xs</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>&#39;</span><span>(</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._cons%29%29" data-pltdoc="x">cons</a></span><span> </span><span>(</span><span>take</span><span> </span><span>xs</span><span> </span><span>16</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span>rows</span><span> </span><span>(</span><span>drop</span><span> </span><span>xs</span><span> </span><span>16</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/procedures.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._apply%29%29" data-pltdoc="x">apply</a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._beside%2529%2529" data-pltdoc="x">beside</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/procedures.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._apply%29%29" data-pltdoc="x">apply</a></span><span> </span><span><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29" data-pltdoc="x">map</a></span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._above%2529%2529" data-pltdoc="x">above</a></span><span> </span><span>(</span><span>rows</span><span> </span><span>diagrams</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_27.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><a name="5"></a><p>5.  Simple Block Diagrams - Passes in Racket</p><div><p>In this example, we will take the following diagram of the passes
in Racket and turn it into a block diagram.

<span>\[\begin{align}
  \textrm{Source} &amp; \xrightarrow{\texttt{read}}    \textrm{Syntax Object}      \\\\
                  &amp; \xrightarrow{\texttt{expand}}  \textrm{Syntax Object}      \\\\
                  &amp; \xrightarrow{\texttt{compile}} \textrm{Compiled Expression}\\\\
                  &amp; \xrightarrow{\texttt{eval}}
\end{align} \]</span>

Let’s make a 800 by 100 picture and set the user coordinates of the window
to an <span>\(x\)</span>-range from 0 to 800 and the <span>\(y\)</span>-range from -50 to 50.
With this choice we can use  <span>\(y=0\)</span> for center position of our nodes.

</p><blockquote></blockquote></div><div><p>The block diagram consists of a number of nodes connected by arrows.
We will need nodes for “Source”, “Syntax Object”, “Syntax Object” and “Compiled Expression”.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n1</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Source&#34;</span><span>              </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>100</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n2</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>200</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n3</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>300</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n4</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Compiled Expression&#34;</span><span> </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>400</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_28.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>

<p><span>You can use <p><span>#:below</span></p>, <p><span>#:above</span></p>, <p><span>#:right-of</span></p>
and <p><span>#:left-of</span></p> to place nodes.</span>
This doesn’t look too good – the nodes are drawn on top of each other.
Instead of manually placing all nodes, let’s just place the first node
and then place each following node relative to the node on its left.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n1</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Source&#34;</span><span>              </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>100</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n2</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n1</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n3</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n2</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n4</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Compiled Expression&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n3</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_29.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

Better, but we need some distance between neighboring nodes.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>current-neighbour-distance</span></span></span><span> </span><span>70</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n1</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Source&#34;</span><span>              </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>100</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n2</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n1</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n3</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n2</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n4</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Compiled Expression&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n3</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_30.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

By default the rectangular path of a rectangle node is drawn with no
separation between the path and its contents. This looks cramped, when
the contents is a text, so we need to increase that inner separation.
This can be done with </p><p><span>#:inner-separation</span><span> </span><span>amount</span></p><p> when the
node is created. However we need to set this for all our nodes,
so instead we set the parameter </p><p><span><span><span>current-inner-separation</span></span></span></p><p>.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>current-neighbour-distance</span></span></span><span> </span><span>70</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>current-inner-separation</span></span></span><span>    </span><span>3</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n1</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Source&#34;</span><span>              </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>50</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n2</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n1</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n3</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n2</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n4</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Compiled Expression&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n3</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span><span>)</span></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_31.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

It is now time to add edges between the nodes.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e1</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>#:label</span><span> </span><span>&#34;read&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e2</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>#:label</span><span> </span><span>&#34;expand&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e3</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n3</span><span> </span><span>n4</span><span> </span><span>#:label</span><span> </span><span>&#34;compile&#34;</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span></td></tr><tr><td><span>  </span><span>      </span><span>e1</span><span> </span><span>e2</span><span> </span><span>e3</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_32.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>

<p><span>To set set the label gap size for a single edge, you can use
the keyword arguement <p><span>#:label-gap</span></p>.</span>
We see at least two problems: the arrow head size is so small,
we can’t see it – and the labels are placed on top of the edges.
The first problem is fixed by setting the arrow head
length with </p><p><span><span><span>ahlength</span></span></span></p><p>. The second problem is that
the default gap size between labels and edges is too small,
so we set the parameter </p><p><span><span><span>current-label-gap</span></span></span></p><p>.

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>current-label-gap</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e1</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>#:label</span><span> </span><span>&#34;read&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e2</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>#:label</span><span> </span><span>&#34;expand&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e3</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n3</span><span> </span><span>n4</span><span> </span><span>#:label</span><span> </span><span>&#34;compile&#34;</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span></td></tr><tr><td><span>  </span><span>      </span><span>e1</span><span> </span><span>e2</span><span> </span><span>e3</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_33.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

The astute reader has noticed that we are missing the last edge.
The last edge needs an end node, so we make an “invisible” node
(a text node that shows the empty string).

</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n5</span><span> </span><span>(</span><span><span><span>text-node</span></span></span><span> </span><span>&#34;&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e4</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n4</span><span> </span><span>n5</span><span> </span><span>#:label</span><span> </span><span>&#34;eval&#34;</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span></td></tr><tr><td><span>  </span><span>      </span><span>e1</span><span> </span><span>e2</span><span> </span><span>e3</span><span> </span><span>e4</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_34.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

The full example is:</p></div><div><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" data-pltdoc="x">require</a></span><span> </span><span>metapict</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._set-curve-pict-size%2529%2529" data-pltdoc="x">set-curve-pict-size</a></span><span> </span><span>800</span><span> </span><span>50</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._curve-pict-window%2529%2529" data-pltdoc="x">curve-pict-window</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._window%2529%2529" data-pltdoc="x">window</a></span><span> </span><span>0</span><span> </span><span>800</span><span> </span><span><span>-2</span>5</span><span> </span><span>25</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>current-label-gap</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdevice..rkt%2529._px%2529%2529" data-pltdoc="x">px</a></span><span> </span><span>4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>current-neighbour-distance</span></span></span><span> </span><span>70</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><span><span>current-inner-separation</span></span></span><span>    </span><span>3</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n1</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Source&#34;</span><span>              </span><span>#:at</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>50</span><span> </span><span>0</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n2</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n1</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n3</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Syntax Object&#34;</span><span>       </span><span>#:right-of</span><span> </span><span>n2</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n4</span><span> </span><span>(</span><span><span><span>rectangle-node</span></span></span><span> </span><span>&#34;Compiled Expression&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n3</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>n5</span><span> </span><span>(</span><span><span><span>text-node</span></span></span><span> </span><span>&#34;&#34;</span><span> </span><span>#:right-of</span><span> </span><span>n4</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e1</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>#:label</span><span> </span><span>&#34;read&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e2</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>#:label</span><span> </span><span>&#34;expand&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e3</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n3</span><span> </span><span>n4</span><span> </span><span>#:label</span><span> </span><span>&#34;compile&#34;</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>e4</span><span> </span><span>(</span><span><span><span>edge</span></span></span><span> </span><span>n4</span><span> </span><span>n5</span><span> </span><span>#:label</span><span> </span><span>&#34;eval&#34;</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>n1</span><span> </span><span>n2</span><span> </span><span>n3</span><span> </span><span>n4</span></td></tr><tr><td><span>  </span><span>      </span><span>e1</span><span> </span><span>e2</span><span> </span><span>e3</span><span> </span><span>e4</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_35.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote>

</div><a name="6"></a><p>6.  Clock</p><p>In this section, we will draw an analog clock with a clock face and hands.</p><div><p>Let’s begin with a circle centered in <span>\((0,0)\)</span> and an outer radius  <span>\(R=100\)</span>.

</p><blockquote></blockquote></div><div><p>Along this circle we will make a mark for every 12 minutes.
The hour marks will be slightly larger. When arguments are named <span>\(d\)</span>,
they will be in degrees. To make later drawings simpler, we let <span>\(d\)</span> denote
the angle measured from 12  <span>\(o&#39;clock\)</span> in clock-wise direction. The helper
function </p><p><span>point</span></p><p> computes the point on the outer that corresponds
to a clock angle <span>\(d\)</span>.

</p><blockquote><table><tbody><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>clock-angle-to-standard-angle</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>90</span><span> </span><span>d</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>point</span><span> </span><span>radius</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpt-vec..rkt%2529._pt%7E40d%2529%2529" data-pltdoc="x">pt@d</a></span><span> </span><span>radius</span><span> </span><span>(</span><span>clock-angle-to-standard-angle</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>hour-mark</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span>point</span><span> </span><span>R</span><span> </span><span>d</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>10</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>12-minute-mark</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span>point</span><span> </span><span>R</span><span> </span><span>d</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>5</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>minutes-in-half-day</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>12</span><span> </span><span>60</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>minute-angle</span><span>     </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" data-pltdoc="x">/</a></span><span> </span><span>360</span><span> </span><span>minutes-in-half-day</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>12-minute-angle</span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>12</span><span> </span><span>minute-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>hour-angle</span><span>       </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>60</span><span> </span><span>minute-angle</span><span>)</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._penwidth%2529%2529" data-pltdoc="x">penwidth</a></span><span> </span><span>4</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>R</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528form._%2528%2528lib._metapict%252Fdraw..rkt%2529._for%252Fdraw%2529%2529" data-pltdoc="x">for/draw</a></span><span> </span><span>(</span><span>[</span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" data-pltdoc="x">in-range</a></span><span> </span><span>0</span><span> </span><span>360</span><span> </span><span>12-minute-angle</span><span>)</span><span>]</span><span>)</span></td></tr><tr><td><span>  </span><span>        </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" data-pltdoc="x">if</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" data-pltdoc="x">zero?</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._remainder%29%29" data-pltdoc="x">remainder</a></span><span> </span><span>d</span><span> </span><span>hour-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span>hour-mark</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span>12-minute-mark</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_37.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><div><p>Now we need to add the numbers. 
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" data-pltdoc="x">require</a></span><span> </span><span>racket/format</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>hour-label</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>hours</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" data-pltdoc="x">/</a></span><span> </span><span>d</span><span> </span><span>hour-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span>~a</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" data-pltdoc="x">if</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" data-pltdoc="x">zero?</a></span><span> </span><span>hours</span><span>)</span><span> </span><span>12</span><span> </span><span>hours</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._penwidth%2529%2529" data-pltdoc="x">penwidth</a></span><span> </span><span>4</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>R</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528form._%2528%2528lib._metapict%252Fdraw..rkt%2529._for%252Fdraw%2529%2529" data-pltdoc="x">for/draw</a></span><span> </span><span>(</span><span>[</span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" data-pltdoc="x">in-range</a></span><span> </span><span>0</span><span> </span><span>360</span><span> </span><span>12-minute-angle</span><span>)</span><span>]</span><span>)</span></td></tr><tr><td><span>  </span><span>        </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" data-pltdoc="x">if</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" data-pltdoc="x">zero?</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._remainder%29%29" data-pltdoc="x">remainder</a></span><span> </span><span>d</span><span> </span><span>hour-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>hour-mark</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>                  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Flabel..rkt%2529._label-cnt%2529%2529" data-pltdoc="x">label-cnt</a></span><span> </span><span>(</span><span>hour-label</span><span> </span><span>d</span><span>)</span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>20</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span>12-minute-mark</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_38.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote><p>

Finally, let’s add the hands.
</p><blockquote><table><tbody><tr><td><span>&gt; </span><span>(</span><span><span><span>ahlength</span></span></span><span> </span><span>16</span><span>)</span></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>hour-hand</span><span> </span><span>hours</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>hours</span><span> </span><span>hour-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._penwidth%2529%2529" data-pltdoc="x">penwidth</a></span><span> </span><span>4</span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>60</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>(</span><span>minute-hand</span><span> </span><span>minutes</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" data-pltdoc="x">def</a></span><span> </span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" data-pltdoc="x">*</a></span><span> </span><span>minutes</span><span> </span><span>minute-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._penwidth%2529%2529" data-pltdoc="x">penwidth</a></span><span> </span><span>2</span><span> </span><span>(</span><span><span><span>draw-arrow</span></span></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._curve%2529%2529" data-pltdoc="x">curve</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fstructs..rkt%2529._pt%2529%2529" data-pltdoc="x">pt</a></span><span> </span><span>0</span><span> </span><span>0</span><span>)</span><span> </span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fcurve..rkt%2529._--%2529%2529" data-pltdoc="x"><span>--</span></a></span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>28</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><table><tbody><tr><td><span>&gt; </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fpict..rkt%2529._penwidth%2529%2529" data-pltdoc="x">penwidth</a></span><span> </span><span>4</span><span> </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span><span><span>circle</span></span></span><span> </span><span>R</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528form._%2528%2528lib._metapict%252Fdraw..rkt%2529._for%252Fdraw%2529%2529" data-pltdoc="x">for/draw</a></span><span> </span><span>(</span><span>[</span><span>d</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/sequences.html#%28def._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._in-range%29%29" data-pltdoc="x">in-range</a></span><span> </span><span>0</span><span> </span><span>360</span><span> </span><span>12-minute-angle</span><span>)</span><span>]</span><span>)</span></td></tr><tr><td><span>  </span><span>        </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" data-pltdoc="x">if</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" data-pltdoc="x">zero?</a></span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._remainder%29%29" data-pltdoc="x">remainder</a></span><span> </span><span>d</span><span> </span><span>hour-angle</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Fdraw..rkt%2529._draw%2529%2529" data-pltdoc="x">draw</a></span><span> </span><span>(</span><span>hour-mark</span><span> </span><span>d</span><span>)</span></td></tr><tr><td><span>  </span><span>                  </span><span>(</span><span><a href="https://docs.racket-lang.org/local-redirect/index.html?doc=metapict&amp;rel=index.html%23%2528def._%2528%2528lib._metapict%252Flabel..rkt%2529._label-cnt%2529%2529" data-pltdoc="x">label-cnt</a></span><span> </span><span>(</span><span>hour-label</span><span> </span><span>d</span><span>)</span><span> </span><span>(</span><span>point</span><span> </span><span>(</span><span><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" data-pltdoc="x"><span>-</span></a></span><span> </span><span>R</span><span> </span><span>20</span><span>)</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>            </span><span>(</span><span>12-minute-mark</span><span> </span><span>d</span><span>)</span><span>)</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>hour-hand</span><span> </span><span>2</span><span>)</span></td></tr><tr><td><span>  </span><span>      </span><span>(</span><span>minute-hand</span><span> </span><span>30</span><span>)</span><span>)</span></td></tr></tbody></table></td></tr><tr><td><p><img src="https://soegaard.github.io/blog/metapict/pict_39.svg" type="image/svg+xml"/></p></td></tr></tbody></table></blockquote></div><p><a name="index"></a> Index</p><p><span><span>ahangle</span>
<a href="#2">2</a>
<br/></span><span><span>ahflankangle</span>
<a href="#2">2</a>
<br/></span><span><span>ahlength</span>
<a href="#2">2</a>
<br/></span><span><span>ahratio</span>
<a href="#2">2</a>
<br/></span><span><span>ahtailcurvature</span>
<a href="#2">2</a>
<br/></span><span><span>arrow-head</span>
<a href="#2">2</a>
<br/></span><span>Arrows
<a href="#2">2</a>
<br/></span><span>block diagram
<a href="#5">5</a>
<br/></span><span><span>brushcolor</span>
<a href="#4">4</a>
<br/></span><span><span>circle</span>
<a href="#4">4</a>
<br/></span><span><span>clipped</span>
<a href="#4">4</a>
<br/></span><span>clock
<a href="#6">6</a>
<br/></span><span><span>color-med</span>
<a href="#4">4</a>
<br/></span><span><span>cosd</span>
<a href="#3">3</a>
<br/></span><span><span>curve*</span>
<a href="#3">3</a>
<br/></span><span><span>curve-reverse</span>
<a href="#4">4</a>
<br/></span><span>diagram, block
<a href="#5">5</a>
<br/></span><span>diagram, Venn
<a href="#4">4</a>
<br/></span><span><span>draw-arrow</span>
<a href="#2">2</a>
<br/></span><span><span>draw-double-arrow</span>
<a href="#2">2</a>
<br/></span><span><span>edge</span>
<a href="#5">5</a>
<br/></span><span><span>fill</span>
<a href="#4">4</a>
<br/></span><span>hand
<a href="#6">6</a>
<br/></span><span><span>harpoon-down</span>
<a href="#2">2</a>
<br/></span><span><span>harpoon-up</span>
<a href="#2">2</a>
<br/></span><span><span>hook-head</span>
<a href="#2">2</a>
<br/></span><span><span>label-cnt</span>
<a href="#6">6</a>
<br/></span><span><span>line-head</span>
<a href="#2">2</a>
<br/></span><span><span>make-similar-font</span>
<a href="#4">4</a>
<br/></span><span><span>new-font</span>
<a href="#4">4</a>
<br/></span><span><span>node</span>
<a href="#5">5</a>
<br/></span><span>polygon, regular
<a href="#3">3</a>
<br/></span><span><span>pt@d</span>
<a href="#3">3</a>
<br/></span><span>regular polygon
<a href="#3">3</a>
<br/></span><span><span>reverse-hook-head</span>
<a href="#2">2</a>
<br/></span><span><span>set-curve-pict-size</span>
<a href="#2">2</a>
<br/></span><span><span>sind</span>
<a href="#3">3</a>
<br/></span><span>Venn diagram
<a href="#4">4</a>
<br/></span></p>



</div>
  </body>
</html>
