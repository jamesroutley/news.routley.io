<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/python/TypeHintsMaybeNotForMe">Original</a>
    <h1>Python type hints may not be not for me in practice</h1>
    
    <div id="readability-page-1" class="page"><div><h2>Python type hints may not be not for me in practice</h2>

	<p><small>November 26, 2024</small></p>
</div><div><p>Python 3 has optional type hints (and has had them for some time),
and <a href="https://cceckman.com/~cks/space/blog/python/TypeHintsTemptation">some time ago I was a bit tempted to start using some of them</a>; more recently, <a href="https://cceckman.com/~cks/space/blog/python/TypeHintsBriefBrush">I wrote a small amount of
code using them</a>. Recently I needed to write
<a href="https://cceckman.com/~cks/space/blog/sysadmin/PrometheusMyQuietAlertMonitoring">a little Python program</a>
and as I started, I was briefly tempted to try type hints. Then I
decided not to, and I suspect that this is how it&#39;s going to go in
the future.</p>

<p>The practical problem of type hints for me when writing the kind
of (small) Python programs that I do today is that they necessarily
force me to think about the types involved. Well, that&#39;s wrong, or
at least incomplete; in practice, they force me to come up with
types. When I&#39;m putting together a small program, generally I&#39;m not
building any actual data structures, records, or the like (things
that have a natural type); instead I&#39;m passing around dictionaries
and lists and sets and other basic Python types, and I&#39;m revising
how I use them as I write more of the program and evolve it. Adding
type hints requires me to navigate assigning concrete types to all
of those things, and then updating them if I change my mind as I
come to a better understanding of the problem and how I want to
approach it.</p>

<p>(In writing this it occurs to me that I do often know that I have
distinct types (for example, for what functions return) and I
shouldn&#39;t mix them, but I don&#39;t want to specify their concrete shape
as dicts, tuples, or whatever. In looking through the <a href="https://docs.python.org/3/library/typing.html">typing</a> documentation and
trying some things, it doesn&#39;t seem like there&#39;s an obvious way to
do this. Type aliases are explicitly equivalent to their underlying
thing, so I can&#39;t create a bunch of different names for eg <a href="https://docs.python.org/3/library/typing.html#the-any-type">typing.Any</a> and
then expect type checkers to complain if I mix them.)</p>

<p>After the code has stabilized I can probably go back to write type
hints (at least until I get into apparently tricky things like
JSON), but I&#39;m not sure that this would provide very much value. I
may try it with <a href="https://cceckman.com/~cks/space/blog/sysadmin/PrometheusMyQuietAlertMonitoring">my recent little Python thing</a> just to see how
much work it is. One possible source of value is if I come back to
this code in six months or a year and want to make changes; typing
hints could give me both documentation and guardrails given that
I&#39;ll have forgotten about a lot of the code and structure by then.</p>

<p>(I think the usual advice is that you should write type hints as
you write the program, rather than go back after the fact and try
to add them, because incrementally writing them during development
is easier. But my new Python programs tend to sufficiently short
that doing all of the type hints afterward isn&#39;t too much work, and
if it gets me to do it at all it may be an improvement.)</p>

<p>PS: It might be easier to do type hints on the fly if I practiced
with them, but on the other hand I write new Python programs
relatively infrequently these days, making typing hints yet another
Python thing I&#39;d have to try to keep in my mind despite it being
months since I used them last.</p>

<p>PPS: I think my ideal type hint situation would be if I could create
distinct but otherwise unconstrained types for things like function
arguments and function returns, have mypy or other typing tools
complain when I mixed them, and then later go back to fill in the
concrete implementation details of each type hint (eg, &#39;this is a
list where each element is a ...&#39;).</p>
</div></div>
  </body>
</html>
