<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://undeadly.org/cgi?action=article;sid=20230507122935">Original</a>
    <h1>OpenBSD cron(8) now supports random ranges with steps</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="https://www.openbsdfoundation.org/donations.html">rueda</a>
on <time datetime="2023-05-07T06:19:26Z">2023-05-07</time>
from the not-a-random-walk dept.</p>
<p>Thanks to the following
commit
by Todd Miller (<code>millert@</code>),
<a href="https://man.openbsd.org/cron.8"><code>cron(8)</code></a>
now supports random values in a range
<em>with</em> a step value
(<abbr>i.e.</abbr>
&#34;<code><var>&lt;lo&gt;</var>~<var>&lt;hi&gt;</var>/<var>&lt;step&gt;</var></code>&#34;
in
<a href="https://man.openbsd.org/crontab.5#crontab"><code>crontab(5)</code></a> entries):
</p><blockquote>
<pre>CVSROOT:	/cvs
Module name:	src
Changes by:	millert@cvs.openbsd.org	2023/05/06 17:06:27

Modified files:
	usr.sbin/cron  : crontab.5 entry.c macros.h 

Log message:
Support random offsets when using ranges with a step value in cron.
This extends the random range syntax to support step values.  Instead
of choosing a random number between the high and low values, the
field is treated as a range with a random offset less than the step
value.  This can be used to avoid <a href="https://en.wikipedia.org/wiki/Thundering_herd_problem">thundering herd problems</a> where
multiple machines contact a server all at the same time via cron jobs.

The syntax is similar to the existing range/step syntax but uses a
random range.  For example, instead of &#34;0-59/10&#34; in the minutes
field, &#34;0~59/10&#34; can be used to run a command every 10 minutes where
the first command starts at a random offset in the range [0,9].
The high and low numbers are optional, &#34;~/10&#34; can be used instead.

Requested by job@, OK phessler@
</pre>
</blockquote>


</div></div>
  </body>
</html>
