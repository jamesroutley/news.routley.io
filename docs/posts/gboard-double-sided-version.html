<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/google/mozc-devices/tree/master/mozc-doublesided">Original</a>
    <h1>Gboard Double Sided Version</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">This directory contains the firmware and hardware design for Gboard double sided
version, which was released on <strong>Oct 1, 2024</strong>.</p>
<p dir="auto">This is not an officially supported Google product.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/header.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/header.webp" alt="Gboard double sided version"/></a></p>

<p dir="auto">The directory structure is as follows:</p>
<ul dir="auto">
<li>case/ : STL files for case</li>
<li>board/ : KiCad schematics and PCB layouts</li>
<li>firmware/ : Firmware resources for STM32CubeIDE</li>
<li>gerber/ : Gerber data for PCB production and assembly</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Building Gboard double-sided Version</h2><a id="user-content-building-gboard-double-sided-version" aria-label="Permalink: Building Gboard double-sided Version" href="#building-gboard-double-sided-version"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Assembled A Type Board: 26 boards (incl. 1 primary board) - See BOM below</li>
<li>Assembled B Type Board: 26 boards (incl. 1 primary board) - See BOM below</li>
<li>USB Board: 1 board - See BOM below</li>
<li>Cable A; JST ZH 1.5mm pitch 8pin 100mm forward double head: 25 units</li>
<li>Cable B; JST ZH 1.5mm pitch 7pin 100mm forward double head: 1 units</li>
<li>Pin Header; 1x4 pin 2.54mm pitch 12+mm height,
(<a href="https://akizukidenshi.com/catalog/g/g101382/" rel="nofollow">sample</a>): 52 headers.</li>
<li>3D printed case: 26 pcs</li>
<li>Self tapping screw (M2 10mm): 52 pcs</li>
<li>Key switch (Cherry MX or compatible): 208 pcs.</li>
<li>Key caps (For Cherry MX switch): 208 pcs.</li>
</ul>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Reference</th>
<th>Description</th>
<th>Qty</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>R1-R2</td>
<td>0402(metric: 1005) Resistor 510 ohm</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>R3-R4</td>
<td>0603(metric: 1608) Resistor 1K ohm</td>
<td>2</td>
<td>Primary board only</td>
</tr>
<tr>
<td>J2-J3</td>
<td>JST S8B-ZR</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>J4</td>
<td>JST S7B-ZR</td>
<td>1</td>
<td>Primary board only</td>
</tr>
<tr>
<td>U1</td>
<td>STMicro STM32F042F4P6</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>SW1-SW4</td>
<td>Kailh CPG151101S11-1</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>D1-D4</td>
<td>OPSCO Optoelectronics SK6812MINI-E</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>D5-D8</td>
<td>0805(metric: 2012) Small Signal Switching Diode</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>C1</td>
<td>0402(metric: 1005) Capacitor 0.1uF</td>
<td>1</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The parts that are only on the primary board are not included in the BOM file
(in <code>gerber/</code> directory), so make sure that you choose one board to be the
primary board and solder in the primary board specific parts.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Reference</th>
<th>Description</th>
<th>Qty</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>R2</td>
<td>0402(metric: 1005) Resistor 510 ohm</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>SW1-SW4</td>
<td>Kailh CPG151101S11-1</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>D1-D4</td>
<td>OPSCO Optoelectronics SK6812MINI-E</td>
<td>4</td>
<td></td>
</tr>
<tr>
<td>D5-D8</td>
<td>0805(metric: 2012) Small Signal Switching Diode</td>
<td>4</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Reference</th>
<th>Description</th>
<th>Qty</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>U1</td>
<td>1A/3.3V Regulator AMS1117-3.3</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>R1-R2</td>
<td>0402(metric: 1005) Resistor 5.1K ohm</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>R3-R4</td>
<td>0402(metric: 1005) Resistor 22 ohm</td>
<td>2</td>
<td></td>
</tr>
<tr>
<td>R5</td>
<td>0402(metric: 1005) Resistor 1.5K ohm</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>J1</td>
<td>JST S7B-ZR</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>J2</td>
<td>USB Type-C 16pin connector</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>C1</td>
<td>0402(metric: 1005) Capacitor 10uF</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>C2</td>
<td>0402(metric: 1005) Capacitor 2.2uF</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>C3-C4</td>
<td>0402(metric: 1005) Capacitor 47pF</td>
<td>2</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<div dir="auto"><h4 tabindex="-1" dir="auto">Step 1: Prepare 3d printed parts</h4><a id="user-content-step-1-prepare-3d-printed-parts" aria-label="Permalink: Step 1: Prepare 3d printed parts" href="#step-1-prepare-3d-printed-parts"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>case/</code> directory of this repository has STL files for the case. The case
consists of 26 parts (case00.stl - case25.stl). Each part has a number engraved
on the inside. For example, when assembling, you will insert the protrusion of
case 0 into the hole of case 1.</p>
<p dir="auto">We also provide a jig (<code>case/jig.stl</code>) for soldering between the A type boards
and B type boards. Please print this too.</p>

<p dir="auto"><strong>PCB Production and Assembly</strong></p>
<p dir="auto">First, you need to build 26 A type boards and 26 B type boards, and one USB
board. You may be able to use existing gerber data, BOM, and CPL (positions)
from <code>gerber/</code> directory.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Board Type</th>
<th>Gerber</th>
<th>BOM</th>
<th>CPL</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>main_panel.zip</td>
<td>main_panel_bom.csv</td>
<td>main_panel_positions.csv</td>
</tr>
<tr>
<td>B</td>
<td>sub_panel.zip</td>
<td>sub_panel_bom.csv</td>
<td>sub_panel_positions.csv</td>
</tr>
<tr>
<td>USB</td>
<td>usb.zip</td>
<td>usb_bom.csv</td>
<td>usb_positions.csv</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Prepared board data for the A type board and the B type board contains 9 boards
in a panel. So, you need to produce 3 panels to build 27 (26 required + 1 spare)
boards. You also need one USB board.</p>
<p dir="auto"><strong>Firmware upload</strong></p>
<p dir="auto">Next, let&#39;s burn the prebuilt firmware.</p>
<p dir="auto">Connect the following 4 pads, SWDIO, SWCLK, GND, and +3.3V with ST-LINK. You can
use
<a href="https://www.st.com/ja/development-tools/stm32cubeprog.html" rel="nofollow">STM32CubeProgrammer</a>
to configure the device and to burn the prebuilt firmware. There&#39;s no connector,
just holes in the PCB so make sure you keep a secure connection while
programming the device.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/pcb_swd.png"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/pcb_swd.png" alt="Required SWD and power pins"/></a></p>
<p dir="auto">Once the programmer establishes the connection with the A type board, you need
to write the <code>Option bytes</code>. Under the <code>User Configuration</code> section, you will
see the <code>BOOT_SEL</code> bit. You need to ensure the bit is unchecked before pushing
the <code>Apply</code> button.</p>
<p dir="auto">Next, you will go to the <code>Erasing &amp; Programming</code> section to burn the prebuilt
firmware, <code>firmware/prebuilt/mozc.elf</code>. Select the binary from the <code>Browse</code>
button, put <code>0x08000000</code> for the <code>Start address</code>, then press the <code>Start Programming</code> button.</p>
<p dir="auto">You need to burn the same settings and firmware into all the Boards A.</p>
<p dir="auto"><strong>Primary A Type Board Specific Modifications</strong></p>
<p dir="auto">You need to choose one of the A type boards to be the primary A type board and
add three parts to it.</p>
<ol dir="auto">
<li>J4 JST S7B-ZR connector header</li>
<li>R3 0603 Resistor 1K ohm</li>
<li>R4 0603 Resistor 1K ohm</li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/pcb_primary.png"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/pcb_primary.png" alt="Primary A Type Board Modifications Points"/></a></p>
<p dir="auto"><strong>Construct the A/B Type Board Pair Modules</strong></p>
<p dir="auto">You need to prepare 26 pairs of the A type board and B type board. They should
be paired as the following picture shows. Each <code>P Connector</code> and each <code>S connector</code> should be connected using the 1x4 pin headers respectively.</p>
<p dir="auto">Make sure that the <code>IN</code> side of the A type board and B type board face each
other.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/pcb_pair.png"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/pcb_pair.png" alt="Pairing A type board and B type boards"/></a></p>
<p dir="auto">Also, the distance should be adjusted to fit the case. It will help to print the
included jig STL to hold both boards while soldering the pin headers.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/pairing_case.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/pairing_case.webp" alt="Pairing with actual case"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/pairing_helper.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/pairing_helper.webp" alt="Pairing with helper case"/></a></p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 3: Insert PCB to case</h4><a id="user-content-step-3-insert-pcb-to-case" aria-label="Permalink: Step 3: Insert PCB to case" href="#step-3-insert-pcb-to-case"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Primary A/B Pair Module</strong></p>
<p dir="auto">Connect the primary module and the USB board.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/primary_usb.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/primary_usb.webp" alt="Connect Primary and USB board"/></a></p>
<p dir="auto">Insert the USB board into case 0.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/usb_case.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/usb_case.webp" alt="Insert USB board to the case"/></a></p>
<p dir="auto"><strong>All Pair Modules</strong></p>
<p dir="auto">Insert each paired module into a case. You need to ensure the A type board is
always placed on the bottom side.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/primary_case.webp"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/primary_case.webp" alt="Insert the pair board into the case"/></a></p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 4: Connect the cases together</h4><a id="user-content-step-4-connect-the-cases-together" aria-label="Permalink: Step 4: Connect the cases together" href="#step-4-connect-the-cases-together"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You need to connect all the <code>UP</code> socket and <code>DOWN</code> socket pairs. Please be
careful not to connect the same type of socket, i.e. <code>UP</code> and <code>UP</code>, or <code>DOWN</code>
and <code>DOWN</code> together. It will cause a short circuit and destroy the chips when
powered on. If you notice a smell or see smoke, disconnect the power
immediately. This may prevent damage to the boards.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/connect_boards.png"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/connect_boards.png" alt="Connect boards"/></a></p>
<p dir="auto">The below picture shows the connections. Please make sure that module 0 and
module 25 are not connected to each other.</p>
<p dir="auto">Note that this picture is simplified and doesn&#39;t reflect the 3d structure of the
keyboard. So, module 25 will be placed upside down.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/google/mozc-devices/blob/master/mozc-doublesided/images/connections.png"><img src="https://github.com/google/mozc-devices/raw/master/mozc-doublesided/images/connections.png" alt="Connections"/></a></p>
<p dir="auto">You can use screws to keep the boards tightly connected.</p>

<div dir="auto"><h4 tabindex="-1" dir="auto">Step 1: Environment setup</h4><a id="user-content-step-1-environment-setup" aria-label="Permalink: Step 1: Environment setup" href="#step-1-environment-setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You need to install STMicroelectronics&#39;s official tools to develop STM32.</p>
<ul dir="auto">
<li><a href="https://www.st.com/en/development-tools/stm32cubeide.html" rel="nofollow">STM32CubeIDE</a> -
Confirmed with 1.16.1.</li>
<li><a href="https://www.st.com/en/development-tools/stm32cubemx.html" rel="nofollow">STM32CubeMX</a> -
Confirmed with 6.12.1.</li>
</ul>
<p dir="auto">Alternatively, you can use Visual Studio Code with the STM32 VS Code Extension,
STM32CubeMX, and STM32CubeCLT if your development environment is not on Windows.</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://code.visualstudio.com/" rel="nofollow">Visual Studio Code</a> - Confirmed with
1.93.0.</p>
</li>
<li>
<p dir="auto"><a href="https://marketplace.visualstudio.com/items?itemName=stmicroelectronics.stm32-vscode-extension" rel="nofollow">STM32 VS Code Extension</a> -
Confirmed with 2.1.0.</p>
</li>
<li>
<p dir="auto"><a href="https://www.st.com/en/development-tools/stm32cubeclt.html" rel="nofollow">STM32CubeCLT</a> -
Confirmed with 1.16.1. You will be asked to specify the path to the VS Code
Extension. You may add <code>{ &#34;STM32VSCodeExtension.cubeCLT.path&#34;: &#34;/opt/ST/STM32CubeCLT_1.16.1&#34; }</code> to <code>.vscode/settings.json</code>.</p>
<p dir="auto">You will need the
<a href="https://www.st.com/ja/development-tools/st-link-v2.html" rel="nofollow">ST-LINK</a> or
something equivalent to upload the firmware.</p>
</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 2: Compile and upload</h4><a id="user-content-step-2-compile-and-upload" aria-label="Permalink: Step 2: Compile and upload" href="#step-2-compile-and-upload"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Steps for the STM32CubeIDE:</strong></p>
<ol dir="auto">
<li>Launch STM32CubeIDE with <code>mozc-doublesided</code> directory as <code>workspace</code>.</li>
<li>Start a project via <code>Start new project from STM32CubeMX file (.ioc)</code> to open
a configuration dialog.</li>
<li>Select <code>firmware/mozc-doublesided.ioc</code> as <code>STM32CubeMX .ioc file</code> and push
<code>Finish</code> button to generated required resources.</li>
<li>Apply patches. (See the following instructions)</li>
<li>Set <code>Release</code> as the active project, from <code>Project &gt; Build Configurations &gt; Set Active &gt; 2 Release</code>. <code>Debug</code> doesn&#39;t fit the available memory size.</li>
<li>Build, from <code>Project &gt; Build All</code>.</li>
</ol>
<p dir="auto">The built binary will be produced at <code>firmware/Release/firmware.elf</code>.</p>
<p dir="auto"><strong>Steps for the Visual Studio Code:</strong></p>
<ol dir="auto">
<li>Open <code>firmware/mozc-doublesided.ioc</code> by STM32CubeMX and push the <code>GENERATE CODE</code> button. You may need to follow instructions if you are asked to
install something required in the process.</li>
<li>Launch VSCode and open the folder <code>firmware</code>.</li>
<li>Apply patches. (See the following instructions)</li>
<li>Select <code>Release</code> or <code>RelWithDebInfo</code> from the build presets. <code>Debug</code> doesn&#39;t
fit the available memory size.</li>
<li><code>Build</code> from the status bar, or other user interfaces.</li>
</ol>
<p dir="auto">The built binary will be produced at <code>build/Release/firmware.elf</code>.</p>
<p dir="auto">If you saw errors on linking the binary involving <code>STM32F042F6Px_FLASH.ld</code>, you
may need a patch to make it work with your installed toolchain.</p>
<p dir="auto">Try <code>patch &lt; STM32F042F6Px_FLASH.ld.diff</code>.</p>
<p dir="auto"><strong>Steps to apply patches:</strong></p>
<p dir="auto">In the <code>firmware</code> directory, apply the <code>firmware.diff</code> patch to the generate
resources via the following command.</p>
<p dir="auto"><code>$ patch -p1 &lt; firmware.diff</code></p>

<p dir="auto">See <a href="https://github.com/google/mozc-devices/blob/master/LICENSE">LICENSE</a> file in this directory.</p>
</article></div></div>
  </body>
</html>
