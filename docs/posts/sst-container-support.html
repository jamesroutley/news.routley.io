<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sst.dev/blog/container-support/">Original</a>
    <h1>SST: Container Support</h1>
    
    <div id="readability-page-1" class="page"><div> <p>Historically, SST has primarily supported deploying serverless applications. But over the last month we’ve slowly expanded native support for containers on AWS.</p>
<lite-youtube videoid="sg4CnvoI7eg"> <a href="https://youtube.com/watch?v=sg4CnvoI7eg"> <span></span> </a> </lite-youtube>  
<p>This includes changes across the entire SST platform.</p>
<hr/>
<h3 id="1-components">1. Components</h3>
<p>There’s a new family of components that’ll help you build with containers.</p>
<ul>
<li>
<p><a href="https://sst.dev/docs/component/aws/cluster"><code dir="auto">Cluster</code></a> &amp; <a href="https://sst.dev/docs/component/aws/service"><code dir="auto">Service</code></a></p>
<p>These help you deploy your containerized applications to AWS using ECS and Fargate.</p>
<div><figure><pre data-language="ts"><code><div><p><span>const </span><span>cluster</span><span> = </span><span>new</span><span> </span><span>sst</span><span>.</span><span>aws</span><span>.</span><span>Cluster</span><span>(</span><span>&#34;</span><span>MyCluster</span><span>&#34;</span><span>, { </span><span>vpc</span><span> }</span><span>);</span></p></div><div></div><div><p><span>cluster</span><span>.</span><span>addService</span><span>(</span><span>&#34;</span><span>MyService</span><span>&#34;</span><span>, {</span></p></div><div><p><span><span>  </span></span><span>loadBalancer: {</span></p></div><div><p><span><span>    </span></span><span>ports: [{ listen: </span><span>&#34;</span><span>80/http</span><span>&#34;</span><span>, forward: </span><span>&#34;</span><span>3000/http</span><span>&#34;</span><span> }],</span></p></div><div><p><span><span>  </span></span><span>},</span></p></div><div><p><span><span>  </span></span><span>dev: {</span></p></div><div><p><span><span>    </span></span><span>command: </span><span>&#34;</span><span>npm run dev</span><span>&#34;</span><span>,</span></p></div><div><p><span><span>  </span></span><span>},</span></p></div><div><p><span>});</span></p></div></code></pre></figure></div>
<p>In addition to configuring ECS and Fargate, this also configures <a href="https://x.com/jayair/status/1853848336538673606"><strong>service discovery</strong></a> for your applications.</p>
</li>
<li>
<p><a href="https://sst.dev/docs/component/aws/vpc"><code dir="auto">Vpc</code></a></p>
<p>Container applications are usually deployed in a VPC. So this component makes it easy to create a VPC. And optionally add a bastion host or a NAT gateway.</p>
<div><figure><pre data-language="ts"><code><div><p><span>new</span><span> sst</span><span>.</span><span>aws</span><span>.</span><span>Vpc</span><span>(</span><span>&#34;</span><span>MyVpc</span><span>&#34;</span><span>, { bastion: </span><span>true</span><span>, nat: </span><span>&#34;</span><span>managed</span><span>&#34;</span><span> });</span></p></div></code></pre></figure></div>
</li>
<li>
<p><a href="https://sst.dev/docs/component/aws/postgres"><code dir="auto">Postgres</code></a>, <a href="https://sst.dev/docs/component/aws/redis"><code dir="auto">Redis</code></a>, &amp; <a href="https://sst.dev/docs/component/aws/efs"><code dir="auto">Efs</code></a></p>
<p>While these components are not specifically for containers, they’ve been designed to work well with the above <code dir="auto">Cluster</code> and <code dir="auto">Vpc</code> components.</p>
</li>
</ul>
<hr/>
<h4 id="cost">Cost</h4>
<p>Unlike our serverless components, that are pay-per-use, these components have a more traditional pricing structure. We’ve taken special care to ensure that these components are as cost effective as possible to get started with. While still allowing you to scale with them.</p>
<p>Unfortunately, AWS’ pricing pages for these services is not great. So the above components have a new <em>Cost</em> section in their docs. For example, here’s what the <a href="https://sst.dev/docs/component/aws/vpc#cost">cost of using the <code dir="auto">Vpc</code> component looks like</a>.</p>
<p>You can <a href="https://x.com/jayair/status/1851019182122652125">read more about what we’ve done here</a>.</p>
<hr/>
<h3 id="2-cli">2. CLI</h3>
<p>There are two big things we’ve done with our CLI to support containers.</p>
<ol>
<li>
<p>The <code dir="auto">dev</code> prop allows you to run your application locally in a new tab in the <code dir="auto">sst dev</code> multiplexer.</p>
</li>
<li>
<p>The new <a href="https://sst.dev/docs/reference/cli#tunnel"><code dir="auto">sst tunnel</code></a> command allows your local machine to connect to resources that’ve been deployed in a VPC. This is helpful because most of the container related components need a VPC. You can <a href="https://x.com/jayair/status/1844055259729007084">check it out in action here</a>.</p>
</li>
</ol>
<hr/>
<h3 id="3-console">3. Console</h3>
<p>The <a href="https://sst.dev/docs/console">SST Console</a> now shows you logs for your containers. And <a href="https://sst.dev/docs/console#autodeploy">Autodeploy</a> will support running in the same VPC as your app. This will allow your deploy process to have access to all the resources in your app.</p>
<hr/>
<h2 id="get-started">Get started</h2>
<p>We’ve updated all our tutorials to help you get started with the new containers.</p>
<ul>
<li><a href="https://sst.dev/docs/start/aws/bun">Bun</a></li>
<li><a href="https://sst.dev/docs/start/aws/nuxt">Nuxt</a></li>
<li><a href="https://sst.dev/docs/start/aws/solid">Solid</a></li>
<li><a href="https://sst.dev/docs/start/aws/deno">Deno</a></li>
<li><a href="https://sst.dev/docs/start/aws/hono">Hono</a></li>
<li><a href="https://sst.dev/docs/start/aws/astro">Astro</a></li>
<li><a href="https://sst.dev/docs/start/aws/remix">Remix</a></li>
<li><a href="https://sst.dev/docs/start/aws/svelte">Svelte</a></li>
<li><a href="https://sst.dev/docs/start/aws/nextjs">Next.js</a></li>
<li><a href="https://sst.dev/docs/start/aws/drizzle">Drizzle</a></li>
<li><a href="https://sst.dev/docs/start/aws/prisma">Prisma</a></li>
<li><a href="https://sst.dev/docs/start/aws/express">Express</a></li>
</ul>
<p>The frontends now support deploying to both serverless and containers.</p>
<hr/>
<h2 id="whats-next">What’s next</h2>
<p>Over the next few weeks we’ll extend support to other languages and frameworks. Like Rails, Laravel, Python, Elixir, Go, and more.</p> </div></div>
  </body>
</html>
