<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/MaxLeiter/Drift">Original</a>
    <h1>Drift. A self-hostable open-source Gist clone</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Drift is a self-hostable Gist clone. It&#39;s also a major work-in-progress, but is (almost, no database yet) completely functional.</p>
<p dir="auto">You can try a demo at <a href="https://drift.maxleiter.com" rel="nofollow">https://drift.maxleiter.com</a>. The demo is built on master but has no database, so files and accounts can be wiped at any time.</p>
<p dir="auto">If you want to contribute, need support, or want to stay updated, you can join the IRC channel at #drift on irc.libera.chat or <a href="https://twitter.com/Max_Leiter" rel="nofollow">reach me on twitter</a>. If you don&#39;t have an IRC client yet, you can use a webclient <a href="https://demo.thelounge.chat/#/connect?join=%23drift&amp;nick=drift-user&amp;realname=Drift%20User" rel="nofollow">here</a>.</p>
<h2 dir="auto"><a id="user-content-setup" aria-hidden="true" href="#setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Setup</h2>
<h3 dir="auto"><a id="user-content-development" aria-hidden="true" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h3>
<p dir="auto">In both <code>server</code> and <code>client</code>, run <code>yarn</code> (if you need yarn, you can download it <a href="https://yarnpkg.com/" rel="nofollow">here</a>.)
You can run <code>yarn dev</code> in either / both folders to start the server and client with file watching / live reloading.</p>
<h3 dir="auto"><a id="user-content-production" aria-hidden="true" href="#production"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Production</h3>
<p dir="auto"><strong>Note: Drift is not yet ready for production usage and should not be used too seriously. I&#39;ll make every effort to not lose data, but I won&#39;t make any guarantees until the project is further along.</strong></p>
<p dir="auto"><code>yarn build</code> in both <code>client/</code> and <code>server/</code> will produce production code for the client and server respectively. The client and server each also have Dockerfiles which you can use with a docker-compose (an example compose will be provided in the near future).</p>
<p dir="auto">If you&#39;re deploying the front-end to something like Vercel, you&#39;ll need to set the root folder to <code>client/</code>.</p>
<h3 dir="auto"><a id="user-content-environment-variables" aria-hidden="true" href="#environment-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Environment Variables</h3>
<p dir="auto">You can change these to your liking.</p>
<p dir="auto"><code>client/.env</code>:</p>
<ul dir="auto">
<li><code>API_URL</code>: defaults to localhost:3001, but allows you to host the front-end separately from the backend on a service like Vercel or Netlify</li>
<li><code>SECRET_KEY</code>: a secret key used for validating API requests that is never exposed to the browser</li>
</ul>
<p dir="auto"><code>server/.env</code>:</p>
<ul dir="auto">
<li><code>PORT</code>: the default port to start the server on (3000 by default)</li>
<li><code>NODE_ENV</code>: defaults to development, can be <code>production</code></li>
<li><code>JWT_SECRET</code>: a secure token for JWT tokens. You can generate one <a href="https://www.grc.com/passwords.htm" rel="nofollow">here</a>.</li>
<li><code>MEMORY_DB</code>: if <code>true</code>, a sqlite database will not be created and changes will only exist in memory. Mainly for the demo.</li>
<li><code>REGISTRATION_PASSWORD</code>: if MEMORY_DB is not <code>true</code>, the user will be required to provide this password to sign-up, in addition to their username and account password. If it&#39;s not set, no password will be required.</li>
<li><code>SECRET_KEY</code>: the same secret key as the client</li>
<li><code>WELCOME_CONTENT</code>: a markdown string that&#39;s rendered on the home page</li>
<li><code>WELCOME_TITLE</code>: the file title for the post on the homepage.</li>
<li><code>ENABLE_ADMIN</code>: the first account created is an administrator account</li>
<li><code>DRIFT_HOME</code>: defaults to ~/.drift, the directory for storing the database and eventually images</li>
</ul>
<h2 dir="auto"><a id="user-content-running-with-pm2" aria-hidden="true" href="#running-with-pm2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running with pm2</h2>
<p dir="auto">It&#39;s easy to start Drift using <a href="https://pm2.keymetrics.io/" rel="nofollow">pm2</a>.
First, add <code>.env</code> files to <code>client/</code> and <code>server/</code> with thev values you want (see the above section for possible values).
Then, use the following commands to start the client and server:</p>
<ul dir="auto">
<li><code>cd server &amp;&amp; yarn build &amp;&amp; pm2 start yarn --name drift-server --interpreter bash -- start</code></li>
<li><code>cd ..</code></li>
<li><code>cd client &amp;&amp; yarn build &amp;&amp; pm2 start yarn --name drift-client --interpreter bash -- start</code></li>
</ul>
<p dir="auto">You now use <code>pm2 ls</code> to see their statuses. Refer to pm2&#39;s docs or <code>pm2 help</code> for more information.</p>
<h2 dir="auto"><a id="user-content-current-status" aria-hidden="true" href="#current-status"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current status</h2>
<p dir="auto">Drift is a major work in progress. Below is a (rough) list of completed and envisioned features. If you want to help address any of them, please let me know regardless of your experience and I&#39;ll be happy to assist.</p>
<ul>
<li> creating and sharing private, public, unlisted posts
<ul>
<li> syntax highlighting (detected by file extension)</li>
<li> multiple files per post</li>
<li> uploading files via drag-and-drop</li>
</ul>
</li>
<li> responsive UI</li>
<li> user auth
<ul>
<li> SSO via HTTP header (Issue: <a href="https://github.com/MaxLeiter/Drift/issues/11" data-hovercard-type="issue" data-hovercard-url="/MaxLeiter/Drift/issues/11/hovercard">#11</a>)</li>
</ul>
</li>
<li> downloading files (individually and entire posts)</li>
<li> password protected posts</li>
<li> sqlite database</li>
<li> administrator account / settings</li>
<li> docker-compose (PR: <a href="https://github.com/MaxLeiter/Drift/pull/13" data-hovercard-type="pull_request" data-hovercard-url="/MaxLeiter/Drift/pull/13/hovercard">#13</a>)
<ul>
<li> publish docker builds</li>
</ul>
</li>
<li> user settings</li>
<li> works enough with JavaScript disabled</li>
<li> documentation</li>
<li> customizable homepage, so the demo can exist as-is but other instances can be built from the same source. Environment variable for the file contents?</li>
</ul>
</article>
          </div></div>
  </body>
</html>
