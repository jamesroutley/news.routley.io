<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://marcosh.github.io/post/2025/10/07/the-mondrian-introduction-to-functional-optics.html">Original</a>
    <h1>The Mondrian introduction to functional optics</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>In this post I’d like to try to discuss <em>what</em> functional optics are, without going too much into <em>why</em> they are so cool, and you should use them, or <em>how</em> they are implemented<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" rel="footnote">1</a></sup> and should be used with a specific language and library.</p>



<p>I personally think that functional optics should be a really easy concept to grasp, but currently learning them is harder than it should be mostly due to library implementation details, quite obscure documentation and an exotic usage of weird symbols.</p>



<p>Since a picture is worth a thousand words, I will introduce and use a graphical notation to illustrate the concepts we will discuss.</p>

<h2 id="types-and-values">Types and values</h2>

<p>Let’s start introducing our graphical notation from its basic building blocks.</p>



<p>We can represent a type with a simple coloured rectangle</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="121px" height="121px" viewBox="-0.5 -0.5 121 121" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.0.3&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;KFOvKJ2CKSVV_86AEirZ&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;2&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>A value for a given type will be represented as a horizontal line spanning the width of the rectangle</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="122px" height="121px" viewBox="-0.5 -0.5 122 121" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.0.3&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-4&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; target=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;460&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;450&#34; y=&#34;410&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-4"><g><path d="M 0 90 L 120 90" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<h2 id="sums-and-products">Sums and products</h2>

<p>When considering algebraic data types, we have two ways of combining types, using products and sums.</p>



<p>The product of two types <code>A</code> and <code>B</code> is a new type, which we will denote by <code>A*B</code>, whose values are composed of a value of type <code>A</code> and a value of type <code>B</code>. An example of a product type is a tuple like <code>(Int, String)</code> where each value is pair composed of an integer and a string.</p>



<p>Graphically we can represent a product type as two side by side rectangles</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="241px" height="121px" viewBox="-0.5 -0.5 241 121" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.0.7&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-1"><g><rect x="120" y="0" width="120" height="120" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>When it comes to values, we need to upgrade a little bit our graphical interpretation. Since a value in a product type is composed of values of its components, we will just represent it as piecewise horizontal line, composed by horizontal lines (possible at different heights) spanning its horizontal sub-rectangles.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="242px" height="121px" viewBox="-0.5 -0.5 242 121" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.0.7&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-3&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;400&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;290&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-4&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; target=&#34;m6WJKWTpqjJhG-RztG1W-1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;370&#34; y=&#34;300&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;420&#34; y=&#34;250&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-1"><g><rect x="120" y="0" width="120" height="120" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-3"><g><path d="M 0 90 L 120 90" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-4"><g><path d="M 120 30 L 240 30" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>On the other hand, the sum of two types is represented by two rectangles one on top of the other</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="121px" height="241px" viewBox="-0.5 -0.5 121 241" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;320&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-1"><g><rect x="0" y="120" width="120" height="120" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>A value of a sum type is a horizontal line spanning the width of the whole rectangle. If it is a horizontal line in the top rectangle, it means that we are selecting the first type, and we’re using one of its values.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="122px" height="241px" viewBox="-0.5 -0.5 122 241" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;320&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-1&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; target=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;370&#34; y=&#34;320&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;420&#34; y=&#34;270&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-1"><g><rect x="0" y="120" width="120" height="120" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-1"><g><path d="M 0 60 L 120 60" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>If it is a horizontal line in the bottom rectangle, it means that we are selecting the second type and one of its values.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="122px" height="241px" viewBox="-0.5 -0.5 122 241" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;lRH7b3wcrNEJ4w8In_7t-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;200&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;m6WJKWTpqjJhG-RztG1W-1&#34; value=&#34;&#34; style=&#34;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;320&#34; width=&#34;120&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-1&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;280&#34; y=&#34;379.8&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;379.8&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="lRH7b3wcrNEJ4w8In_7t-1"><g><rect x="0" y="0" width="120" height="120" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="m6WJKWTpqjJhG-RztG1W-1"><g><rect x="0" y="120" width="120" height="120" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-1"><g><path d="M 0 179.8 L 120 179.8" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>More generally, for any algebraic data type, we can represent it as a sum of products by stacking a series of rectangles one on top of the other, each one potentially divided horizontally in multiple sub-rectangles.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="161px" height="181px" viewBox="-0.5 -0.5 161 181" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;160&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="60" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="160" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="60" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="60" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="60" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>In general, we can continue to split any sub-rectangle horizontally or vertically (if you prefer a top-down point of view) or you can place two rectangles side by side or top to bottom.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="161px" height="181px" viewBox="-0.5 -0.5 161 181" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="80" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="0" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="70" y="60" width="90" height="60" fill="url(#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="80" y="30" width="80" height="30" fill="url(#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>A value of such a type is a piecewise horizontal line which can not cross a horizontal division.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="162px" height="181px" viewBox="-0.5 -0.5 162 181" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;475&#34; dy=&#34;276&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-18&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;hVsSfDapXN-nuvVv81QE-6&#34; target=&#34;hVsSfDapXN-nuvVv81QE-6&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;290&#34; y=&#34;380&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;340&#34; y=&#34;330&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-19&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;hVsSfDapXN-nuvVv81QE-7&#34; target=&#34;hVsSfDapXN-nuvVv81QE-7&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;340&#34; y=&#34;410&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;390&#34; y=&#34;360&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-20&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;hVsSfDapXN-nuvVv81QE-12&#34; target=&#34;hVsSfDapXN-nuvVv81QE-12&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;340&#34; y=&#34;410&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;390&#34; y=&#34;360&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="80" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="0" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="70" y="60" width="90" height="60" fill="url(#drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="80" y="30" width="80" height="30" fill="url(#drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-TmCbqGQn5Sf7Y4LRaOB3-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-18"><g><path d="M 0 127.5 L 60 127.5" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-19"><g><path d="M 60 150 L 120 150" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-20"><g><path d="M 120 170 L 160 170" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<h2 id="optics">Optics</h2>

<p>Now that we have this graphical representation to represent data types, we can use it to discuss various kinds of optics.</p>



<p>In general, we can think of an optic as a way to select, given our graphical representation of a type, one (or more) rectangle inside a given rectangle representing a type. For example in the following picture we are selecting the rectangle with the red boundary inside the main rectangle representing a complex type.</p>



<p>If call the main type <code>A</code> and the selected type <code>B</code>, we will denote the optic selecting <code>B</code> inside <code>A</code> with <code>Optic A B</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="181px" viewBox="-0.5 -0.5 163 181" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;396&#34; dy=&#34;230&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#FF3333;strokeWidth=3;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="80" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="0" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="80" y="30" width="80" height="30" fill="url(#drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="70" y="60" width="90" height="60" fill="url(#drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-NIXjyHQY85LdUeDxcsZw-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(255, 51, 51), rgb(255, 119, 119));" stroke="#ff3333" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>Before going into inspecting the various kinds of optics, let’s try to see if can can already derive some properties of optics just by looking at their graphical representation.</p>

<h2 id="compositionality">Compositionality</h2>

<p>One thing that we can notice is that optics compose really well. Suppose we have a type <code>A</code> represented by the following diagram</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="161px" height="181px" viewBox="-0.5 -0.5 161 181" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="80" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="0" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="70" y="60" width="90" height="60" fill="url(#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="80" y="30" width="80" height="30" fill="url(#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-VwDdBPCmGy-U6pHX-kjV-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>We can first select a sub-rectangle identifying a type <code>B</code> with an <code>Optic A B</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="164px" height="183px" viewBox="-0.5 -0.5 164 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;396&#34; dy=&#34;230&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;nXzzlKf4BNkx2kQisM7c-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;160&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="1" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="1" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="81" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="1" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="61" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="121" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="81" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="1" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="1" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="121" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="71" y="60" width="90" height="60" fill="url(#drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="81" y="30" width="80" height="30" fill="url(#drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-yM4yL1Ateo9qNM92byQG-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="nXzzlKf4BNkx2kQisM7c-4"><g><rect x="1" y="120" width="160" height="60" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>Starting now with the type <code>B</code> we can use an <code>Optic B C</code> to select a type <code>C</code> inside <code>B</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="64px" viewBox="-0.5 -0.5 163 64" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;396&#34; dy=&#34;230&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;nXzzlKf4BNkx2kQisM7c-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=#FF3333;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="1" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="1" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="1" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="31" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="21" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="nXzzlKf4BNkx2kQisM7c-5"><g><rect x="120" y="1" width="40" height="60" fill="none" stroke="#ff3333" style="stroke: light-dark(rgb(255, 51, 51), rgb(255, 119, 119));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>Using now the <code>Optic A B</code> and the <code>Optic B C</code> we just chose, we can compose them to obtain an <code>Optic A C</code> which directly selects <code>C</code> inside <code>A</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="183px" viewBox="-0.5 -0.5 163 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;396&#34; dy=&#34;230&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;nXzzlKf4BNkx2kQisM7c-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=light-dark(#ed333b, #ededed);strokeWidth=3;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="0" y="0" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="0" y="60" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="80" y="0" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="0" y="120" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="60" y="120" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="120" y="120" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="80" y="20" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="0" y="40" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="0" y="150" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="120" y="140" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="70" y="60" width="90" height="60" fill="url(#drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="80" y="30" width="80" height="30" fill="url(#drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-puV3vYn8efrCt4M2mSXX-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="nXzzlKf4BNkx2kQisM7c-8"><g><rect x="120" y="120" width="40" height="60" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>This optic composition operation is actually associative and has an identity element, turning optics into a <a href="https://en.wikipedia.org/wiki/Category_(mathematics)">Category</a>.</p>



<p>Let’s now start to have a look at some specific families of optics.</p>

<h2 id="iso">Iso</h2>

<p>The simplest optic we can define for any type <code>A</code> is the one that we can obtain by selecting the whole rectangle.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="183px" viewBox="-0.5 -0.5 163 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;nXzzlKf4BNkx2kQisM7c-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=light-dark(#ed333b, #ededed);strokeWidth=3;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;160&#34; height=&#34;180&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="1" y="1" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="1" y="61" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="81" y="1" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="1" y="121" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="61" y="121" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="121" y="121" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="81" y="21" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="1" y="41" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="1" y="151" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="121" y="141" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="71" y="61" width="90" height="60" fill="url(#drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="81" y="31" width="80" height="30" fill="url(#drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-sZxeAOTvKrQW_k22FRUr-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="nXzzlKf4BNkx2kQisM7c-8"><g><rect x="1" y="1" width="160" height="180" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>With such a selection we can see that for any value of the outer type <code>A</code>, we actually have a value of the type identified by the red rectangle, which we will call <code>B</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="183px" viewBox="-0.5 -0.5 163 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.1&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;CzpSF7XIA-RuL_gY3PdR&#34;&gt;
    &lt;mxGraphModel dx=&#34;570&#34; dy=&#34;331&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;300&#34; width=&#34;70&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;240&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;340&#34; y=&#34;360&#34; width=&#34;60&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fad7ac;strokeColor=#b46504;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;260&#34; width=&#34;80&#34; height=&#34;10&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-10&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;20&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;390&#34; width=&#34;60&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;380&#34; width=&#34;40&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;gradientColor=#7ea6e0;strokeColor=#6c8ebf;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;350&#34; y=&#34;300&#34; width=&#34;90&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;hVsSfDapXN-nuvVv81QE-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;360&#34; y=&#34;270&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;WsW2iOhSiS_W2Il1xUH2-2&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;nXzzlKf4BNkx2kQisM7c-8&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;550&#34; y=&#34;430&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;340&#34; y=&#34;375&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;WsW2iOhSiS_W2Il1xUH2-3&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;hVsSfDapXN-nuvVv81QE-7&#34; target=&#34;hVsSfDapXN-nuvVv81QE-7&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;350&#34; y=&#34;385&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;390&#34; y=&#34;395&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;WsW2iOhSiS_W2Il1xUH2-4&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;hVsSfDapXN-nuvVv81QE-12&#34; target=&#34;hVsSfDapXN-nuvVv81QE-12&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;390&#34; y=&#34;380&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;440&#34; y=&#34;330&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;nXzzlKf4BNkx2kQisM7c-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=light-dark(#ed333b, #ededed);strokeWidth=3;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;280&#34; y=&#34;240&#34; width=&#34;160&#34; height=&#34;180&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0"><stop offset="0%" stop-color="#dae8fc" style="stop-color: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#7ea6e0" style="stop-color: light-dark(rgb(126, 166, 224), rgb(67, 102, 151)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0"><stop offset="0%" stop-color="#e6d0de" style="stop-color: light-dark(rgb(230, 208, 222), rgb(67, 48, 60)); stop-opacity: 1;" stop-opacity="1"></stop><stop offset="100%" stop-color="#d5739d" style="stop-color: light-dark(rgb(213, 115, 157), rgb(181, 97, 133)); stop-opacity: 1;" stop-opacity="1"></stop></linearGradient></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hVsSfDapXN-nuvVv81QE-3"><g><rect x="1" y="1" width="80" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-4"><g><rect x="1" y="61" width="70" height="60" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-5"><g><rect x="81" y="1" width="80" height="20" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-6"><g><rect x="1" y="121" width="60" height="30" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-7"><g><rect x="61" y="121" width="60" height="60" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-8"><g><rect x="121" y="121" width="40" height="20" fill="#fad7ac" style="fill: light-dark(rgb(250, 215, 172), rgb(75, 45, 8)); stroke: light-dark(rgb(180, 101, 4), rgb(201, 133, 49));" stroke="#b46504" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-9"><g><rect x="81" y="21" width="80" height="10" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-10"><g><rect x="1" y="41" width="80" height="20" fill="#f5f5f5" style="fill: light-dark(rgb(245, 245, 245), rgb(26, 26, 26)); stroke: light-dark(rgb(102, 102, 102), rgb(149, 149, 149));" stroke="#666666" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-11"><g><rect x="1" y="151" width="60" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-12"><g><rect x="121" y="141" width="40" height="40" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-13"><g><rect x="71" y="61" width="90" height="60" fill="url(#drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0)" style="fill: url(&#34;#drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_dae8fc_1d293b_-1-light-dark_7ea6e0_436697_-1-s-0&#34;); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="hVsSfDapXN-nuvVv81QE-14"><g><rect x="81" y="31" width="80" height="30" fill="url(#drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0)" style="fill: url(&#34;#drawio-svg-Xaikthn4TMC6FW_89gF1-gradient-light-dark_e6d0de_43303c_-1-light-dark_d5739d_b56185_-1-s-0&#34;); stroke: light-dark(rgb(153, 97, 133), rgb(177, 129, 160));" stroke="#996185" pointer-events="all"></rect></g></g><g data-cell-id="WsW2iOhSiS_W2Il1xUH2-2"><g><path d="M 1 136 L 61 136" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="WsW2iOhSiS_W2Il1xUH2-3"><g><path d="M 61 166 L 121 166" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="WsW2iOhSiS_W2Il1xUH2-4"><g><path d="M 121 151 L 161 151" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="nXzzlKf4BNkx2kQisM7c-8"><g><rect x="1" y="1" width="160" height="180" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>This means that, given an <code>Iso A B</code>, we can actually define a function <code>view :: A -&gt; B</code> that for any value of <code>A</code> gives us a value of <code>B</code>.</p>



<p>But in this special case also the converse holds! For any value of <code>B</code>, since <code>B</code> is actually <code>A</code> itself, we have in fact a value of <code>A</code>. This gives rise to a function <code>review :: B -&gt; A</code>.</p>



<p>In fact <code>review . view = id_A</code> and <code>view . review = id_B</code> giving rise to a proper <a href="https://en.wikipedia.org/wiki/Isomorphism">isomorphism</a>.</p>

<h2 id="lens">Lens</h2>

<p>In our graphical representation, a <code>Lens</code> is a vertical slice of the main rectangle.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="242px" height="163px" viewBox="-0.5 -0.5 242 163" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;360&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;320&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;400&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="0" y="1" width="80" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="0" y="81" width="80" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="80" y="1" width="80" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="160" y="1" width="80" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="160" y="121" width="80" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="160" y="1" width="80" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>Any vertical slice cuts out a piece out of any horizontal line. In other terms, given a value of the type <code>A</code> represented by the main rectangle, we have a way to obtain a value of type <code>B</code> represented by our vertical slice. This means that also in this case we are able to define a function <code>view :: A -&gt; B</code> which allows us to focus from the main type to one of its component.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="242px" height="163px" viewBox="-0.5 -0.5 242 163" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;360&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;320&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;400&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;400&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-7&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;460&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;450&#34; y=&#34;410&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="0" y="1" width="80" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="0" y="81" width="80" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="80" y="1" width="80" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="160" y="1" width="80" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="160" y="121" width="80" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="160" y="1" width="80" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-7"><g><path d="M 0 41 L 240 41" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>On the other hand, it’s not possible with <code>Lens</code>es as it was with <code>Iso</code>s to build back a value of type <code>A</code> from a value of type <code>B</code>, since a value of type <code>B</code> is only a part of value of type <code>A</code>. What is actually possible, though, is to update only the part included in the red rectangle of a value of type <code>A</code>. In other terms, given a <code>Lens A B</code>, we can define a function <code>set :: B -&gt; A -&gt; A</code> which takes a value of type <code>B</code> and a value of type <code>A</code> and updates the section of the latter identified by the <code>Lens</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="243px" height="564px" viewBox="-0.5 -0.5 243 564" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;1240&#34; dy=&#34;719&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;80&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;80&#34; y=&#34;360&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;160&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;400&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;280&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-7&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;240&#34; y=&#34;460&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;290&#34; y=&#34;410&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;480&#34; width=&#34;80&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-9&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;600&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-10&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-9&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-9&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;400&#34; y=&#34;460&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;450&#34; y=&#34;410&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-11&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;80&#34; y=&#34;680&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-12&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;80&#34; y=&#34;760&#34; width=&#34;80&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-13&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;160&#34; y=&#34;680&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-14&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;680&#34; width=&#34;80&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-15&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;800&#34; width=&#34;80&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-19&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1.008;entryY=0.872;entryDx=0;entryDy=0;entryPerimeter=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-15&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-16&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;370&#34; y=&#34;760&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;390&#34; y=&#34;740&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-16&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;680&#34; width=&#34;80&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-17&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-11&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-16&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;240&#34; y=&#34;860&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;290&#34; y=&#34;810&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="0" y="1" width="80" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="0" y="81" width="80" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="80" y="1" width="80" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="160" y="1" width="80" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="160" y="121" width="80" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="160" y="1" width="80" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-7"><g><path d="M 0 41 L 240 41" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-8"><g><rect x="160" y="201" width="80" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-9"><g><rect x="160" y="321" width="80" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-10"><g><path d="M 160 341 L 240 341" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-11"><g><rect x="0" y="401" width="80" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-12"><g><rect x="0" y="481" width="80" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-13"><g><rect x="80" y="401" width="80" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-14"><g><rect x="160" y="401" width="80" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-15"><g><rect x="160" y="521" width="80" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-19"><g><path d="M 160 541 L 240.64 540.52" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-16"><g><rect x="160" y="401" width="80" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-17"><g><path d="M 0 441 L 160 441" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>Having a look at the graphical representations of the <code>view</code> and <code>set</code> functions, we can convince ourselves that the following properties hold:</p>

<ul>
  <li>If we <code>set</code> a value and then we <code>view</code> it, we must get back what we put in: <code>view (set b a) == b</code>.</li>
  <li>If we <code>set</code> what we get out of a <code>view</code>, nothing changes: <code>set (view a) a == a</code>.</li>
  <li>Setting a value twice is the same thing as setting it once: <code>set b (set b a) == set b a</code>.</li>
</ul>



<p>Moreover, we can notice that composing two lenses with the operation described in the <a href="#compositionality">Compositionality</a> section gives us back another lens. A vertical slice of a vertical slice is in fact still a vertical slice of the original rectangle. In other terms this means that <code>Lens</code>es form a subcategory of the bigger category of <code>Optic</code>s.</p>



<p>Composing adequately <code>set</code> and <code>view</code> we can also define a function <code>over :: (B -&gt; B) -&gt; A -&gt; A</code> as <code>over f a = set (f $ view a) a</code>. This means that if we have a function <code>f :: B -&gt; B</code> which can transform values of type <code>B</code>, we can use our lens to extract a <code>B</code> from an <code>A</code> via <code>view</code>, use <code>f</code> to transform the result, and eventually use <code>set</code> to update the <code>B</code> part inside the original <code>A</code>.</p>

<h2 id="prism">Prism</h2>

<p>If vertical slices are <code>Lens</code>es, it is only natural to wonder what are horizontal slices. They correspond to <code>Prism</code>s, and they are the dual concept of <code>Lens</code>es. Where a <code>Lens</code> represents a component in a product type, a <code>Prism</code> represents a component in a sum type.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="164px" height="183px" viewBox="-0.5 -0.5 164 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;1240&#34; dy=&#34;719&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;210&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;130&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;250&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;190&#34; y=&#34;330&#34; width=&#34;60&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;110&#34; y=&#34;370&#34; width=&#34;60&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;310&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="91" y="-10" width="60" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" transform="rotate(90,121,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="11" y="-10" width="60" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" transform="rotate(90,41,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="51" y="10" width="60" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" transform="rotate(90,81,90)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="71" y="90" width="60" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" transform="rotate(90,101,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="-9" y="130" width="60" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" transform="rotate(90,21,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="51" y="70" width="60" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" transform="rotate(90,81,150)" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>Looking at values, we can notice that a value in the main type could either be a value of the inner type or it could be completely outside of it. This implies that, given a <code>Prism A B</code>, we can define a function <code>preview :: A -&gt; Maybe B</code> which, given a value <code>a :: A</code> returns a <code>Just b</code> if <code>a</code> was inside the sub-rectangle identified by <code>B</code> and <code>Nothing</code> otherwise.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="364px" height="183px" viewBox="-0.5 -0.5 364 183" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;434&#34; dy=&#34;277&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;210&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;130&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;250&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;190&#34; y=&#34;330&#34; width=&#34;60&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;110&#34; y=&#34;370&#34; width=&#34;60&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;310&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;wvFn83hAZ2eeNdT3Gh0k-1&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34; source=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; target=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;210&#34; y=&#34;390&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;260&#34; y=&#34;340&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;wvFn83hAZ2eeNdT3Gh0k-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;390&#34; y=&#34;330&#34; width=&#34;60&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;wvFn83hAZ2eeNdT3Gh0k-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rotation=90;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;310&#34; y=&#34;370&#34; width=&#34;60&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;wvFn83hAZ2eeNdT3Gh0k-5&#34; value=&#34;&#34; style=&#34;endArrow=none;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;&#34; edge=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry width=&#34;50&#34; height=&#34;50&#34; relative=&#34;1&#34; as=&#34;geometry&#34;&gt;
            &lt;mxPoint x=&#34;320&#34; y=&#34;390&#34; as=&#34;sourcePoint&#34; /&gt;
            &lt;mxPoint x=&#34;480&#34; y=&#34;390&#34; as=&#34;targetPoint&#34; /&gt;
          &lt;/mxGeometry&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="91" y="-10" width="60" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" transform="rotate(90,121,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="11" y="-10" width="60" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" transform="rotate(90,41,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="51" y="10" width="60" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" transform="rotate(90,81,90)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="71" y="90" width="60" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" transform="rotate(90,101,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="-9" y="130" width="60" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" transform="rotate(90,21,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="51" y="70" width="60" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" transform="rotate(90,81,150)" pointer-events="all"></rect></g></g><g data-cell-id="wvFn83hAZ2eeNdT3Gh0k-1"><g><path d="M 1 150 L 161 150" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g><g data-cell-id="wvFn83hAZ2eeNdT3Gh0k-2"><g><rect x="271" y="90" width="60" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" transform="rotate(90,301,150)" pointer-events="all"></rect></g></g><g data-cell-id="wvFn83hAZ2eeNdT3Gh0k-3"><g><rect x="191" y="130" width="60" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" transform="rotate(90,221,150)" pointer-events="all"></rect></g></g><g data-cell-id="wvFn83hAZ2eeNdT3Gh0k-5"><g><path d="M 201 150 L 361 150" fill="none" stroke="#000000" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));" stroke-miterlimit="10" pointer-events="stroke"></path></g></g></g></g></g></svg>

<p>On the other hard, since a <code>Prism</code> constitutes a horizontal slice of the main rectangle, if we have a value of the sub-rectangle, we can always interpret it a value of the main rectangle. In other words, this means that for a <code>Prism A B</code> we can always define a function <code>review :: B -&gt; A</code> constructing a value of type <code>A</code> from a value of type <code>B</code>.</p>



<p>Again, having a look at the graphical representation we can convince ourselves that the following properties hold for <code>Prism</code>s:</p>

<ul>
  <li>If we preview through a <code>Prism</code> what we just built using the same <code>Prism</code>, we will get a value back: <code>preview (review b) == Just b</code>.</li>
  <li>If when we preview we get a <code>Just</code>, then reviewing the result through the same <code>Prism</code> will get us to the initial value: <code>preview s == Just a =&gt; review a == s</code></li>
</ul>



<p>For a <code>Prism A B</code> it is also possible to define a function <code>set :: B -&gt; A -&gt; A</code> as <code>set = flip $ const review</code>. This means that, being able to construct an <code>A</code> from a <code>B</code>, we are able to substitute a <code>B</code> inside an <code>A</code> just by discarding the initial <code>A</code> and building a new one from <code>B</code>. Graphically, we can interpret this as using the <code>B</code> value in the inner rectangle to build an <code>A</code> value, forgetting about the initial <code>A</code> value.</p>



<p>At this point we can also define another function <code>over :: (B -&gt; B) -&gt; A -&gt; A</code> which allows us to update the <code>B</code> part inside an <code>A</code>. We can define it as <code>over f a = maybe a review (f &lt;$&gt; preview a)</code>. In words, we use <code>preview</code> to get a <code>Maybe B</code> and we map <code>f</code> over it to get another <code>Maybe B</code>; if we have a value <code>Just b</code>, then we can use it to construct an <code>A</code> using <code>review</code>; on the other hand, if we ended up with a <code>Nothing</code>, we just keep the initial <code>A</code>. Graphically, we can interpret this as follows: if the <code>A</code> value is inside the <code>B</code> sub-rectangle, we apply <code>f</code> and then we use the result to build a new <code>A</code> value; if the value is not in <code>B</code>, we just leave it alone.</p>



<p>Looking at the graphical interpretation, it’s easy to convince ourselves that the composition of two <code>Prism</code>s is still a <code>Prism</code>, given that a horizontal slice of a horizontal slice is still a horizontal slice of the main rectangle. In other terms, also <code>Prism</code>s form a subcategory of the category of <code>Optic</code>s.</p>

<h2 id="affine-traversals">Affine traversals</h2>

<p>Now that we discussed <code>Lens</code>es and <code>Prism</code>s, one natural question which might arise is what happens when we try to compose a <code>Lens</code> and a <code>Prism</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="182px" viewBox="-0.5 -0.5 163 182" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.1.2&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;1426&#34; dy=&#34;827&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;210&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;130&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;250&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;190&#34; y=&#34;330&#34; width=&#34;60&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;110&#34; y=&#34;370&#34; width=&#34;60&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeWidth=3;strokeColor=light-dark(#ed333b, #ededed);rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;170&#34; y=&#34;310&#34; width=&#34;60&#34; height=&#34;160&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;zOTTJYkB1OkXbjc25o-X-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#0000FF;strokeWidth=2;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;160&#34; y=&#34;360&#34; width=&#34;120&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="91" y="-10" width="60" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" transform="rotate(90,121,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="11" y="-10" width="60" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" transform="rotate(90,41,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="51" y="10" width="60" height="160" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" transform="rotate(90,81,90)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="71" y="90" width="60" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" transform="rotate(90,101,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="-9" y="130" width="60" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" transform="rotate(90,21,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-6"><g><rect x="51" y="70" width="60" height="160" fill="none" stroke="#ed333b" style="stroke: light-dark(rgb(237, 51, 59), rgb(237, 237, 237));" stroke-width="3" transform="rotate(90,81,150)" pointer-events="all"></rect></g></g><g data-cell-id="zOTTJYkB1OkXbjc25o-X-5"><g><rect x="41" y="120" width="120" height="60" fill="none" stroke="#0000ff" style="stroke: light-dark(rgb(0, 0, 255), rgb(205, 205, 255));" stroke-width="2" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>In the picture above we see a <code>Lens</code> (the blue rectangle) composed with a <code>Prism</code> (the red rectangle). What we get out of the composition is the lower right rectangle, which is neither a <code>Lens</code>, nor a <code>Prism</code>, with respect to the main rectangle. It’s just a single inner rectangle.</p>



<p>On the other hand, if you think about it, every inner rectangle of the main rectangle could be obtained by composing <code>Lens</code>es and <code>Prism</code>s.</p>



<p>An <code>Optic</code> identifying an inner rectangle is called an <code>AffineTraversal</code>.</p>



<p>Combining the intuitions we had for <code>Lens</code>es and <code>Prism</code>s, it’s actually possible to define functions <code>set :: B -&gt; A -&gt; A</code> and <code>over :: (B -&gt; B) -&gt; A -&gt; A</code> also for <code>AffineTraversal</code>s.</p>



<p>Moreover, the graphical representation suggests us that also <code>AffineTraversal</code>s for a subcategory of <code>Optic</code>s, since a sub-rectangle of a sub-rectangle is actually a sub-rectangle of the initial one.</p>

<h2 id="why-stop-at-one">Why stop at one?</h2>

<p>All the <code>Optic</code>s that we discussed so far focus on a single sub-rectangle. But, if we want, we can consider also <code>Optic</code>s which focus on multiple sub-rectangles at the same time.</p>



<p>We will denote by <code>Traversal A B</code> the <code>Optic</code>s which focus on multiple sub-rectangles of type <code>B</code> inside a main rectangle of type <code>A</code>.</p>

<svg xmlns="http://www.w3.org/2000/svg" style="background: #ffffff; background-color: light-dark(#ffffff, var(--ge-dark-color, #121212)); color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="163px" height="182px" viewBox="-0.5 -0.5 163 182" content="&lt;mxfile host=&#34;app.diagrams.net&#34; agent=&#34;Mozilla/5.0 (X11; Linux x86_64; rv:140.0) Gecko/20100101 Firefox/140.0&#34; version=&#34;28.2.5&#34; scale=&#34;1&#34; border=&#34;0&#34;&gt;
  &lt;diagram name=&#34;Page-1&#34; id=&#34;z8OuRh85pukrXDgO7kjt&#34;&gt;
    &lt;mxGraphModel dx=&#34;595&#34; dy=&#34;379&#34; grid=&#34;1&#34; gridSize=&#34;10&#34; guides=&#34;1&#34; tooltips=&#34;1&#34; connect=&#34;1&#34; arrows=&#34;1&#34; fold=&#34;1&#34; page=&#34;1&#34; pageScale=&#34;1&#34; pageWidth=&#34;850&#34; pageHeight=&#34;1100&#34; math=&#34;0&#34; shadow=&#34;0&#34;&gt;
      &lt;root&gt;
        &lt;mxCell id=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;1&#34; parent=&#34;0&#34; /&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;225&#34; y=&#34;215&#34; width=&#34;30&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;130&#34; y=&#34;230&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;130&#34; y=&#34;290&#34; width=&#34;60&#34; height=&#34;80&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;190&#34; y=&#34;330&#34; width=&#34;60&#34; height=&#34;120&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;bTHEDbTsUVzmCIvmqzU7-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;rotation=90;&#34; parent=&#34;1&#34; vertex=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;110&#34; y=&#34;370&#34; width=&#34;60&#34; height=&#34;40&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-1&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;200&#34; y=&#34;270&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-2&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;270&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-3&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;200&#34; y=&#34;300&#34; width=&#34;80&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-4&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;200&#34; y=&#34;330&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-5&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;330&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-6&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF3333;strokeWidth=3;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;200&#34; y=&#34;270&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-7&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=light-dark(#FF3333,#EDEDED);strokeWidth=3;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;240&#34; y=&#34;330&#34; width=&#34;40&#34; height=&#34;30&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
        &lt;mxCell id=&#34;ASNb_kra0QyNIT7Ww5Bv-8&#34; value=&#34;&#34; style=&#34;rounded=0;whiteSpace=wrap;html=1;fillColor=none;strokeColor=#FF3333;strokeWidth=3;&#34; vertex=&#34;1&#34; parent=&#34;1&#34;&gt;
          &lt;mxGeometry x=&#34;120&#34; y=&#34;360&#34; width=&#34;40&#34; height=&#34;60&#34; as=&#34;geometry&#34; /&gt;
        &lt;/mxCell&gt;
      &lt;/root&gt;
    &lt;/mxGraphModel&gt;
  &lt;/diagram&gt;
&lt;/mxfile&gt;
"><defs></defs><rect fill="#ffffff" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));" width="100%" height="100%" x="0" y="0"></rect><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-1"><g><rect x="106" y="-25" width="30" height="80" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" transform="rotate(90,121,15)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-2"><g><rect x="11" y="-10" width="60" height="80" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" transform="rotate(90,41,30)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-3"><g><rect x="11" y="50" width="60" height="80" fill="#ffe6cc" style="fill: light-dark(rgb(255, 230, 204), rgb(54, 33, 10)); stroke: light-dark(rgb(215, 155, 0), rgb(153, 101, 0));" stroke="#d79b00" transform="rotate(90,41,90)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-4"><g><rect x="71" y="90" width="60" height="120" fill="#fff2cc" style="fill: light-dark(rgb(255, 242, 204), rgb(40, 29, 0)); stroke: light-dark(rgb(214, 182, 86), rgb(109, 81, 0));" stroke="#d6b656" transform="rotate(90,101,150)" pointer-events="all"></rect></g></g><g data-cell-id="bTHEDbTsUVzmCIvmqzU7-5"><g><rect x="-9" y="130" width="60" height="40" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" transform="rotate(90,21,150)" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-1"><g><rect x="81" y="30" width="40" height="30" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-2"><g><rect x="121" y="30" width="40" height="30" fill="#e1d5e7" style="fill: light-dark(rgb(225, 213, 231), rgb(57, 47, 63)); stroke: light-dark(rgb(150, 115, 166), rgb(149, 119, 163));" stroke="#9673a6" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-3"><g><rect x="81" y="60" width="80" height="30" fill="#dae8fc" style="fill: light-dark(rgb(218, 232, 252), rgb(29, 41, 59)); stroke: light-dark(rgb(108, 142, 191), rgb(92, 121, 163));" stroke="#6c8ebf" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-4"><g><rect x="81" y="90" width="40" height="30" fill="#d5e8d4" style="fill: light-dark(rgb(213, 232, 212), rgb(31, 47, 30)); stroke: light-dark(rgb(130, 179, 102), rgb(68, 110, 44));" stroke="#82b366" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-5"><g><rect x="121" y="90" width="40" height="30" fill="#f8cecc" style="fill: light-dark(rgb(248, 206, 204), rgb(81, 45, 43)); stroke: light-dark(rgb(184, 84, 80), rgb(215, 129, 126));" stroke="#b85450" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-6"><g><rect x="81" y="30" width="40" height="30" fill="none" stroke="#ff3333" style="stroke: light-dark(rgb(255, 51, 51), rgb(255, 119, 119));" stroke-width="3" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-7"><g><rect x="121" y="90" width="40" height="30" fill="none" stroke="#ff3333" style="stroke: light-dark(rgb(255, 51, 51), rgb(237, 237, 237));" stroke-width="3" pointer-events="all"></rect></g></g><g data-cell-id="ASNb_kra0QyNIT7Ww5Bv-8"><g><rect x="1" y="120" width="40" height="60" fill="none" stroke="#ff3333" style="stroke: light-dark(rgb(255, 51, 51), rgb(255, 119, 119));" stroke-width="3" pointer-events="all"></rect></g></g></g></g></g></svg>

<p>For <code>Traversal</code>s we can still define <code>set :: B -&gt; A -&gt; A</code> which replaces all the selected sub-rectangles of type <code>B</code>, inside the main rectangle of type <code>A</code>, with the same vale <code>b</code> of type <code>B</code>, to produce a new <code>A</code>.</p>



<p>Similarly, we can define <code>over :: (B -&gt; B) -&gt; A -&gt; A</code> which applies a function to all the selected sub-rectangles of type <code>B</code>, inside the main rectangle of type <code>A</code>, to produce a new <code>A</code>.</p>



<p>Another relevant function which makes sense to consider for <code>Traversal</code>s is <code>toListOf :: A -&gt; [B]</code>, which extracts all the values of the selected sub-rectangles of type <code>B</code> from the main rectangle of type <code>A</code>.</p>



<p>As usual, we can notice that <code>Traversal A B</code> form a subcategory of <code>Optic A B</code>, since a selection of sub-rectangles inside a selection 0f sub-rectangles is still a selection of sub-rectangles of the main rectangle.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The graphical representation we just introduced in this post provides us with a tool to navigate various kinds of <code>Optic</code>s and their operations. I hope it can provide a concrete way to understand the basic ideas behind <code>Lens</code>es, <code>Prism</code>s and other <code>Optic</code>s and make it easier to use them.</p>



<p>Such a representation could also help to explore and shed some light on the mysterious world of <code>Optic</code>s. One could try to search for other sub-categories in a graphical fashion and then ask what do they correspond to in other <code>Optic</code> representation. For example, what is the sub-category of <code>Optics</code> made by multiple horizontal slices? Or the one made by multiple vertical slices?</p>



<p>I need also to mention that such a representation is not able, as far as I can see, to fully represent the whole universe of <code>Optic</code>s. For example, it’s hard to distinguish a <code>Traversal</code> from a <code>Fold</code>, or describe what <code>Grate</code>s are.</p>



<p>All in all, I’m confident that describing and explaining optics in this graphical fashion could help people understand their beauty and usefulness! Thanks for reading up to here!</p>

<hr/>



  </div>

  
    


  

</article>

      </div>
    </div></div>
  </body>
</html>
