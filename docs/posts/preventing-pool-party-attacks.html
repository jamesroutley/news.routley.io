<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://brave.com/privacy-updates/13-pool-party-side-channels/">Original</a>
    <h1>Preventing Pool-Party Attacks</h1>
    
    <div id="readability-page-1" class="page"><article>
        
<p><em>This is the thirteenth post in an ongoing, regular series describing new and upcoming privacy features in Brave. This post describes the result of a research collaboration between Brave Software and Soroush Karami at the University of Illinois at Chicago. We also thank Michael Smith and Deian Stefan, at University of California San Diego, for their help with this project. This post was written by Director of Privacy, Peter Snyder.</em></p>

<h2 id="the-tldr">The TL;DR;</h2>
<p>Brave has identified a new category of tracking vulnerability, forms of which are present in all browsers. We call this category of attack <a href="https://arxiv.org/abs/2112.06324">‚Äúpool-party‚Äù attacks</a> because the attack uses collections (or ‚Äúpools‚Äù) of limited-but-shared resources to create <a href="https://en.wikipedia.org/wiki/Side-channel_attack">side channels</a>. Trackers can then use these side channels to track users across sites and circumvent other privacy protections available in browsers.</p>
<p>Previous work (including the excellent <a href="https://xsleaks.dev/">XSLeaks</a> project, and the recent <a href="https://xsinator.com/">XSinator</a>  <a href="https://xsinator.com/paper.pdf">paper</a>) has identified similar attacks in this area. <strong>Our work builds on those projects by showing that pool-party attacks are more powerful, practical, and pervasive than previously realized, and that all browsers are vulnerable.</strong></p>
<p>Even more concerning, we found that pool-party attacks can track users across profiles in Gecko-based browsers. Attackers targeting Gecko-based browsers can link activities in ‚Äú<a href="https://www.mozilla.org/en-US/firefox/features/private-browsing/">private browsing</a>‚Äù¬† windows with activities in ‚Äúnormal‚Äù browsing windows, linking someone‚Äôs private activities with their ‚Äútrue‚Äù identities.</p>
<p>Brave is already working on fixes for these issues, and we expect to begin shipping them to users in the next several weeks. Brave is also working with other browser vendors to address this problem. This blog post summarizes the findings of this research project; more details are available in this <a href="https://arxiv.org/abs/2112.06324">preprint version of the resulting research paper</a>.</p>

<h2 id="background-partitioning-for-privacy">Background: Partitioning for Privacy</h2>
<p>In response to user demands and legal requirements for better Web privacy, browsers have introduced more, and more robust, privacy protections. One important category of privacy protection is ‚Äúpartitioning,‚Äù where browsers prevent trackers from following you across sites by giving each site its own, distinct set of resources.</p>
<p>Partitioning protects users from the most common forms of cross-site tracking by preventing a tracker on one site from knowing you‚Äôre the same user on another site. Even if site-a.example and site-b.example both include a tracking script from tracker.example, partitioning prevents tracker.example from knowing the same person visited each site, preventing the tracker from linking your identity across sites.</p>
<p>Partitioning isn‚Äôt a panacea. There are many kinds of privacy harm that partitioning doesn‚Äôt protect users against (e.g., browser fingerprinting, cookie syncing from user identifiers, IP based tracking, etc.). Nevertheless, partitioning is a useful and important technique for protecting Web privacy.</p>
<table>
    <thead>
        <tr>
            <th></th>
            <th>
                <img src="https://brave.com/static-assets/images/brave-logo-sans-text.svg" alt="Brave"/>
                Brave
            </th>
            <th>
                <img src="https://brave.com/static-assets/images/chrome-logo.svg" alt="Chrome"/>
                Chrome
            </th>
            <th>
                <img src="https://brave.com/static-assets/images/edge-logo.svg" alt="Edge"/>
                Edge
            </th>
            <th>
                <img src="https://brave.com/static-assets/images/firefox-logo.svg" alt="Firefox"/>
                Firefox
            </th>
            <th>
                <img src="https://brave.com/static-assets/images/safari-logo.svg" alt="Safari"/>
                Safari
            </th>
            <th>
                <img src="https://brave.com/static-assets/images/tor_32x32.png" alt="Tor Browser"/>
                Tor Browser
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>DOM Storage</th>
            <td>‚úÖ</td>
            <td>‚ùå</td>
            <td>‚ùå</td>
            <td>‚úÖ</td>
            <td>‚úÖ</td>
            <td>‚úÖ</td>
        </tr>
        <tr>
            <th>Network State</th>
            <td>‚úÖ</td>
            <td>ü§î</td>
            <td>ü§î</td>
            <td>‚úÖ</td>
            <td>‚úÖ</td>
            <td>‚úÖ</td>
        </tr>
    </tbody>
    <caption>Types of partitioning protections</caption>
</table>
<p>Because of the usefulness of partitioning, privacy-focused browsers have introduced different kinds of partitioning protections. The above table summarizes which browsers have which partitioning protections. <strong>DOM storage</strong> generally refers to APIs that sites are intended for storing values explicitly. <strong>Network state</strong> generally refers to a wide range of other ways sites can store values implicitly in the browser, even if they‚Äôre not intended for applications to use in this way. ‚úÖ indicates features that are available to all browser users by default, ‚ùå refers to features that are unavailable in these browsers, and ü§î refers to features that are either disabled by default, or enabled only for a small percentage of users <sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>. The fantastic <a href="https://privacytests.org/nightly.html">privacytests.org</a> project also summarizes the state of partitioning features in popular browsers.</p>
<p>More information about Brave‚Äôs DOM storage partitioning features can be found in the <a href="https://brave.com/privacy-updates/7-ephemeral-storage/">‚ÄúEphemeral Third-Party Site Storage‚Äù blog post</a> in this series.</p>

<h2 id="problem-pool-party-attacks-defeat-partitioning-protections">Problem: Pool-Party Attacks Defeat Partitioning Protections</h2>
<p>Brave and our colleagues at University of Illinois at Chicago and University of California San Diego have found a variety of ways in which sites can circumvent the partitioning-based privacy protections in browsers. We call this category of attack ‚Äúpool-party‚Äù attacks, since attackers are able to communicate (and so, track) across site boundaries by manipulating resources shared between sites.</p>
<p>While some instances of this attack have been identified in the past (such as the <a href="https://xsleaks.dev/docs/attacks/timing-attacks/connection-pool/">‚Äúconnection pool‚Äù leak documented by the excellent XSLeaks project</a>, and more recently, the terrific <a href="https://xsinator.com/">xsinator.com project</a>), <a href="https://arxiv.org/abs/2112.06324">our work</a> includes three important new findings:</p>
<ul>
<li>First, the attacks identified by previous work identified only specific instances of a broader category of attack; we find that browsers are rife with vulnerabilities to attacks in this category.</li>
<li>Second, attacks in this category are more powerful than noted by some <a href="https://xsinator.com/paper.pdf">previous work</a>; sites can use pool-party attacks to pass arbitrary data between sites.</li>
<li>Third, pool-party attacks are not ‚Äútheoretical‚Äù, they‚Äôre practical and realistically exploitable threats to Web privacy.</li>
</ul>
<p>Pool-party attacks exist in all popular browsers, and can be exploited in many ways. Any resource pools, or resource limits, that are applied across site boundaries, can be exploited as a cross site tracking vector. Some examples of browser capabilities that can be abused to track Web users include WebSockets, server-sent events, limits on in-flight DNS requests, global limits on simultaneous HTTP requests when the browser is using a proxy, and restrictions around the Web Speech API, among others. Any API where the following conditions hold can be abused by trackers for cross-site tracking:</p>
<ol>
<li>The resource is <strong>limited</strong>: sites can request resources from the pool until a limit is hit, after which sites are prevented from accessing further resources.</li>
<li>The resource is <strong>unpartitioned</strong>: different sites draw from the same limited resource pool.</li>
<li>Sites can <strong>probe</strong> the resource pool and learn whether the pool has been exhausted, or whether some resources remain.</li>
<li>Sites can <strong>consume</strong> resources from the pool without restriction (when the pool has not been exhausted).</li>
</ol>
<p>In more technical terms, pool-party attacks are a class of side-channel that are present in all browser engines, and easier to exploit than most side-channel attacks. Most side-channel attacks target broadly-shared resources (e.g., CPU caches, memory caches, system interrupts), and so in practice are noisy and difficult to communicate across. Pool-party attacks, by contrast, target shared resources that are managed by‚Äîand specific to‚Äîthe browser. This means that they‚Äôre much less noisy, and much easier to communicate across.</p>

<h2 id="solution-how-to-defend-against-pool-party-attacks">Solution: How to Defend Against Pool-Party Attacks</h2>
<p>Brave is working with other browsers to protect users against pool-party attacks in general. Brave is also internally working on defenses to protect Brave users against the most practical pool-party attacks we‚Äôve identified. We plan to start rolling these protections out to our desktop and Android browsers in the next few weeks.</p>
<p>Defending against pool-party attacks in general is difficult, since at root, computers always have limits on how many resources they can provide to sites. Computers have only so much memory, so much disk space, etc., and truly dedicated attackers will always be able to use these limitations to conduct pool-party style attacks. Short of the browser automatically closing when pages start behaving oddly, some form of this attack will always be possible.</p>
<p>That said, there are still steps browsers can take to make pool-party attacks impractical for trackers. Even if browsers can‚Äôt solve the problem at a fundamental level, browsers can at least make the attack uncommon and costly for trackers to conduct. <a href="https://arxiv.org/abs/2112.06324">Our paper describes several ways browsers can defend against pool-party attacks</a>, but the general approach is to lift limits on high bandwidth resource pools. If trackers need to consume enough resources to start starving the entire system, the attacks will become noticeable to users. Web users would then stop visiting sites where pool-party attacks occurred, disincentivizing sites (and trackers hosted on sites) from conducting pool-party attacks in the first place.</p>
<p>Brave is actively planning our first set of pool-party attack defenses, and we expect to begin rolling out these defenses to Brave users shortly. Brave will also continue coordinating with other browser engine authors (e.g., Apple, Google, Mozilla) to design platform-wide defenses against pool-party attacks.</p>



<i></i>
    </article></div>
  </body>
</html>
