<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.voyageai.com/2024/09/18/voyage-3/">Original</a>
    <h1>32k context length text embedding models</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>




<div><div>
<p>TL;DR â€“ We are excited to announce <code>voyage-3</code> and <code>voyage-3-lite</code> embedding models, advancing the frontier of retrieval quality, latency, and cost. <code>voyage-3</code> outperforms OpenAI v3 large by 7.55% on average across all evaluated domains, including code, law, finance, multilingual, and long-context, with 2.2x lower costs and 3x smaller embedding dimension, resulting in 3x lower vectorDB costs. <code>voyage-3-lite</code> offers 3.82% better retrieval accuracy than OpenAI v3 large while costing 6x less and having 6x smaller embedding dimension. Both models support a 32K-token context length, 4x more than OpenAI.</p>



<p>In the last nine months, we have released a suite of our Voyage 2 series embedding models, including state-of-the-art general-purpose models, such as <code>voyage-large-2</code>, and domain-specific models, such as <a href="https://blog.voyageai.com/2024/01/23/voyage-code-2-elevate-your-code-retrieval/" rel="nofollow" target="_blank"><code>voyage-code-2</code></a>, <a href="https://blog.voyageai.com/2024/04/15/domain-specific-embeddings-and-retrieval-legal-edition-voyage-law-2/" rel="nofollow" target="_blank"><code>voyage-law-2</code></a>, <a href="https://blog.voyageai.com/2024/06/03/domain-specific-embeddings-finance-edition-voyage-finance-2/" rel="nofollow" target="_blank"><code>voyage-finance-2</code></a>, and <a href="https://blog.voyageai.com/2024/06/10/voyage-multilingual-2-multilingual-embedding-model/" rel="nofollow" target="_blank"><code>voyage-multilingual-2</code></a>, all extensively trained on data from their respective domains. For example, <a href="https://blog.voyageai.com/2024/06/10/voyage-multilingual-2-multilingual-embedding-model/" rel="nofollow" target="_blank"><code>voyage-multilingual-2</code></a> demonstrates superior retrieval quality in French, German, Japanese, Spanish, and Korean, while still providing best-in-class performance in English. We have also fine-tuned models for companies with specific use cases and data, e.g., <a href="https://www.harvey.ai/blog/harvey-partners-with-voyage-to-build-custom-legal-embeddings" rel="nofollow" target="_blank">Harvey.ai</a>.</p>



<p>Now, we are thrilled to introduce our Voyage 3 series embedding models, <code>voyage-3</code> and <code>voyage-3-lite</code>, with <code>voyage-3-large</code> coming in a few weeks. These models outperform competitors<sup data-fn="ad731864-0c51-472c-b41b-0d5050e7c0c5"><a href="#ad731864-0c51-472c-b41b-0d5050e7c0c5" id="ad731864-0c51-472c-b41b-0d5050e7c0c5-link">1</a></sup> in retrieval quality while significantly reducing price and downstream costs for vectorDB. Specifically, <code>voyage-3</code>:</p>



<ul>
<li>Outperforms OpenAI v3 large across all eight evaluated domains (tech, code, web, law, finance, multilingual, conservation, and long-context) by 7.55% on average.</li>



<li>Costs 2.2x less than OpenAI v3 large and 1.6x less than Cohere English v3, at $0.06 per 1M tokens.</li>



<li>Has a 3-4x smaller embedding dimension (1024) compared to OpenAI (3072) and E5 Mistral (4096), resulting in 3-4x lower vectorDB costs.</li>



<li>Supports a 32K-token context length, compared to OpenAI (8K) and Cohere (512).</li>
</ul>



<figure><img data-recalc-dims="1" fetchpriority="high" decoding="async" width="1024" height="909" data-attachment-id="990" data-permalink="https://blog.voyageai.com/2024/09/18/voyage-3/voyage-3-2/" data-orig-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?fit=1093%2C970&amp;quality=80&amp;ssl=1" data-orig-size="1093,970" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="voyage-3" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?fit=300%2C266&amp;quality=80&amp;ssl=1" data-large-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?fit=1024%2C909&amp;quality=80&amp;ssl=1" src="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?resize=1024%2C909&amp;quality=80&amp;ssl=1" alt="" srcset="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?resize=1024%2C909&amp;quality=80&amp;ssl=1 1024w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?resize=300%2C266&amp;quality=80&amp;ssl=1 300w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?resize=768%2C682&amp;quality=80&amp;ssl=1 768w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/voyage-3.png?w=1093&amp;quality=80&amp;ssl=1 1093w" sizes="(max-width: 1000px) 100vw, 1000px"/></figure>



<p><code>voyage-3-lite</code> is more lightweight model optimized for latency and low cost, which:</p>



<ul>
<li>Outperforms OpenAI v3 large by 3.82% on average across the domains.</li>



<li>Costs 6.5x less than OpenAI v3 large, at $0.02 per 1M tokens.</li>



<li>Outperforms OpenAI v3 small by 7.58% with the same price.</li>



<li>Has a 6-8x smaller embedding dimension (512) compared to OpenAI (3072) and E5 Mistral (4096), resulting in 6-8x lower vectorDB costs.</li>



<li>Supports a 32K-token context length, compared to OpenAI (8K) and Cohere (512).</li>
</ul>



<p>The table below summarize the important aspects of these models along with a few competitors, accompanied by a plot of retrieval quality versus cost<sup data-fn="d6a49e4c-56b4-4eac-8730-6b26f3e3f886"><a href="#d6a49e4c-56b4-4eac-8730-6b26f3e3f886" id="d6a49e4c-56b4-4eac-8730-6b26f3e3f886-link">2</a></sup>.</p>



<figure><table><thead><tr><th>Model</th><th data-align="center">Dimensions</th><th data-align="center">Context</th><th data-align="center">Cost</th><th data-align="center">Retrieval</th></tr></thead><tbody><tr><td>voyage-3</td><td data-align="center">1024</td><td data-align="center"><strong>32K</strong></td><td data-align="center">$0.06</td><td data-align="center"><strong>76.72</strong></td></tr><tr><td>voyage-3-lite</td><td data-align="center"><strong>512</strong></td><td data-align="center"><strong>32K</strong></td><td data-align="center">$0.02</td><td data-align="center">72.98</td></tr><tr><td>OpenAI v3 large</td><td data-align="center">3072</td><td data-align="center">8K</td><td data-align="center">$0.13</td><td data-align="center">69.17</td></tr><tr><td>OpenAI v3 small</td><td data-align="center">1536</td><td data-align="center">8K</td><td data-align="center">$0.02</td><td data-align="center">67.08</td></tr><tr><td>Cohere English v3</td><td data-align="center">1024</td><td data-align="center">512</td><td data-align="center">$0.10</td><td data-align="center">59.33</td></tr><tr><td>E5 Mistral</td><td data-align="center">4096</td><td data-align="center">4K</td><td data-align="center">$0.10</td><td data-align="center">70.13</td></tr><tr><td>BGE M3</td><td data-align="center">1024</td><td data-align="center">8K</td><td data-align="center"><strong>$0.016</strong></td><td data-align="center">66.61</td></tr></tbody></table></figure>



<figure><img data-recalc-dims="1" decoding="async" width="1024" height="730" data-attachment-id="969" data-permalink="https://blog.voyageai.com/2024/09/18/voyage-3/quality-vs-cost/" data-orig-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?fit=1331%2C949&amp;quality=80&amp;ssl=1" data-orig-size="1331,949" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="quality-vs-cost" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?fit=300%2C214&amp;quality=80&amp;ssl=1" data-large-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?fit=1024%2C730&amp;quality=80&amp;ssl=1" src="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?resize=1024%2C730&amp;quality=80&amp;ssl=1" alt="" srcset="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?resize=1024%2C730&amp;quality=80&amp;ssl=1 1024w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?resize=300%2C214&amp;quality=80&amp;ssl=1 300w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?resize=768%2C548&amp;quality=80&amp;ssl=1 768w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?resize=1200%2C856&amp;quality=80&amp;ssl=1 1200w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/quality-vs-cost.png?w=1331&amp;quality=80&amp;ssl=1 1331w" sizes="(max-width: 1000px) 100vw, 1000px"/></figure>



<p><code>voyage-3</code> and <code>voyage-3-lite</code> are the result of several research innovations, including an improved architecture, distillation from larger models, over 2T high-quality tokens in pre-training, and retrieval result alignment via human feedback.</p>



<p><strong>Recommendations</strong>. Any general-purpose embedding users can upgrade to <code>voyage-3</code> for better retrieval quality at a low cost, or <code>voyage-3-lite</code> for further cost saving. If you are particularly interested in code, law, finance, and multilingual retrieval, Voyage 2 series domain-specific models (<code>voyage-code-2</code>, <code>voyage-law-2</code>, <code>voyage-finance-2</code>, and <code>voyage-multilingual-2</code>) are still best for their respective domains, even though <code>voyage-3</code> has highly competitive performance as well (see Section below). If youâ€™ve used Voyage embeddings, you can simply specifyÂ <code>&#34;voyage-3&#34;</code>Â or <code>&#34;voyage-3-lite&#34;</code> as theÂ <code>model</code>Â parameter in <a href="https://docs.voyageai.com/docs/embeddings#python-api" rel="nofollow" target="_blank">Voyage API</a> calls, for both the corpus and queries.</p>



<h2>Evaluation Details</h2>



<p><strong>Datasets</strong>. We evaluate on 40 domain-specific retrieval datasets, spanning eight domains, technical documentation, code, law, finance, web reviews, multilingual, long documents, and conversations. Each dataset consists of a corpus to be retrieved from and a set of queries. The corpus typically encompasses documents in a particular domain, such as answers in StackExchange, court opinions, technical documentation, etc., and the queries can be questions, summarization of a long document, or simply individual documents. The following table list the datasets in the eight categories except multilingual. The multilingual domain covers 62 datasets covering 26 languages, including French, German, Japanese, Spanish, Korean, Bengali, Portuguese, and Russian. Each of the first 5 languages has multiple datasets.Â The other languages involve one dataset each and are grouped into an OTHER category in the multilingual radar chart below.</p>



<figure><table><thead><tr><th><strong>Category</strong></th><th><strong>Descriptions</strong></th><th><strong>Datasets</strong></th></tr></thead><tbody><tr><td>TECH</td><td>Technical documentation</td><td>Cohere, 5G, OneSignal, LangChain, PyTorch</td></tr><tr><td>CODE</td><td>Code snippets, docstrings</td><td>LeetCodeCpp, LeetCodeJava, LeetCodePython, HumanEval, MBPP, DS1000-referenceonly, DS1000, apps_5doc</td></tr><tr><td>LAW</td><td>Cases, court opinions, statutes, patents</td><td><a href="https://huggingface.co/datasets/mteb/LeCaRDv2" rel="nofollow" target="_blank">LeCaRDv2</a>, <a href="https://huggingface.co/datasets/mteb/LegalQuAD" rel="nofollow" target="_blank">LegalQuAD</a>, <a href="https://huggingface.co/datasets/mteb/legal_summarization" rel="nofollow" target="_blank">LegalSummarization</a>, <a href="https://huggingface.co/datasets/mteb/AILA_casedocs" rel="nofollow" target="_blank">AILA casedocs</a>, <a href="https://huggingface.co/datasets/mteb/AILA_statutes" rel="nofollow" target="_blank">AILA statutes</a></td></tr><tr><td>FINANCE</td><td>SEC filings, finance QA</td><td>RAG benchmark (Apple-10K-2022), FinanceBench, TAT-QA, Finance Alpaca, FiQA Personal Finance, Stock News Sentiment, ConvFinQA, FinQA, HC3 Finance</td></tr><tr><td>WEB</td><td>Reviews, forum posts, policy pages</td><td>Huffpostsports, Huffpostscience, Doordash, Health4CA</td></tr><tr><td>LONG-CONTEXT</td><td>Long documents on assorted topics: government reports, academic papers, and dialogues</td><td><a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">NarrativeQA</a>, <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">Needle</a>, <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">Passkey</a>, <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">QMSum</a>, <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">SummScreenFD</a>, <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" rel="nofollow" target="_blank">WikimQA</a></td></tr><tr><td>CONVERSATION</td><td>Meeting transcripts, dialogues</td><td>Dialog Sum, QA Conv, HQA</td></tr></tbody></table></figure>



<p>A list of all evaluation datasets is available in <a href="https://docs.google.com/spreadsheets/d/1d0-kNjBFCmzXbwac7vAf78v6X0DON1DTjBYhmSR8rUg/edit?gid=1788189981#gid=1788189981" rel="nofollow" target="_blank">this spreadsheet</a>.</p>



<p><strong>Models</strong>. We evaluate <code>voyage-3</code> and <code>voyage-3-lite</code> alongside several alternatives, including: OpenAI v3 small (<code>text-embedding-3-small</code>) and large (<code>text-embedding-3-large</code>), E5 Mistral (<code>intfloat/e5-mistral-7b-instruct</code>), BGE M3 (<code>BAAI/bge-m3</code>), Cohere English v3 (<code>embed-english-v3.0</code>), and <code>voyage-large-2-instruct</code>. For the domain-specific and multilingual datasets, we also evaluate <code>voyage-law-2</code>, <code>voyage-finance-2</code>, <code>voyage-multilingual-2</code>, Multilingual E5 (<code>infloat/multilingual-e5-large</code>) and Cohere multilingual v3 (<code>embed-multilingual-v3.0</code>).</p>



<p><strong>Metrics</strong>. Given a query, we retrieve the top 10 documents based on cosine similarities and report theÂ <a href="http://www.evidentlyai.com/ranking-metrics/ndcg-metric#:~:text=Normalized%20Discounted%20Cumulative%20Gain%20(NDCG)%20is%20a%20ranking%20quality%20metric,DCG%20representing%20a%20perfect%20ranking." rel="nofollow" target="_blank">normalized discounted cumulative gain</a>Â (NDCG@10), a standard metric for retrieval quality and a variant of the recall.</p>



<h2>Results</h2>



<p><strong>Retrieval Across Domains</strong>. As discussed earlier and shown in the first radar chart of this post, <code>voyage-3</code> outperforms OpenAI v3 large by an average of 7.55% across domains. Furthermore, <code>voyage-3</code> trails closely behind Voyageâ€™s domain-specific models as shown in the bar plots below.</p>



<figure><img data-recalc-dims="1" decoding="async" width="1024" height="531" data-attachment-id="1121" data-permalink="https://blog.voyageai.com/2024/09/18/voyage-3/bars-3/" data-orig-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?fit=1404%2C728&amp;quality=80&amp;ssl=1" data-orig-size="1404,728" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="bars" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?fit=300%2C156&amp;quality=80&amp;ssl=1" data-large-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?fit=1024%2C531&amp;quality=80&amp;ssl=1" src="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?resize=1024%2C531&amp;quality=80&amp;ssl=1" alt="" srcset="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?resize=1024%2C531&amp;quality=80&amp;ssl=1 1024w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?resize=300%2C156&amp;quality=80&amp;ssl=1 300w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?resize=768%2C398&amp;quality=80&amp;ssl=1 768w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?resize=1200%2C622&amp;quality=80&amp;ssl=1 1200w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/bars-2.png?w=1404&amp;quality=80&amp;ssl=1 1404w" sizes="(max-width: 1000px) 100vw, 1000px"/></figure>



<p><strong>Multilingual Retrieval</strong>. As shown in the radar chart below, <code>voyage-3</code>â€™s multilingual retrieval quality is just slightly behind <code>voyage-multilingual-2</code>, with a lower latency and at half the cost. <code>voyage-3-lite</code> outperforms all non-Voyage models, besting OpenAI v3 large, Cohere multilingual v3, and Multilingual E5 by 4.55%, 3.13%, and 3.89%, respectively.</p>



<figure><img data-recalc-dims="1" loading="lazy" decoding="async" width="913" height="990" data-attachment-id="1004" data-permalink="https://blog.voyageai.com/2024/09/18/voyage-3/multilingual-2/" data-orig-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?fit=913%2C990&amp;quality=80&amp;ssl=1" data-orig-size="913,990" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="multilingual" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?fit=277%2C300&amp;quality=80&amp;ssl=1" data-large-file="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?fit=913%2C990&amp;quality=80&amp;ssl=1" src="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?resize=913%2C990&amp;quality=80&amp;ssl=1" alt="" srcset="https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?w=913&amp;quality=80&amp;ssl=1 913w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?resize=277%2C300&amp;quality=80&amp;ssl=1 277w, https://i0.wp.com/blog.voyageai.com/wp-content/uploads/2024/09/multilingual-1.png?resize=768%2C833&amp;quality=80&amp;ssl=1 768w" sizes="auto, (max-width: 913px) 100vw, 913px"/></figure>



<p>All the evaluation results are available in <a href="https://docs.google.com/spreadsheets/d/1d0-kNjBFCmzXbwac7vAf78v6X0DON1DTjBYhmSR8rUg/edit?gid=1788189981#gid=1788189981" rel="nofollow" target="_blank">this spreadsheet</a>.</p>



<h2>Try Voyage 3 Series!</h2>



<p>Give <code>voyage-3</code> and <code>voyage-3-lite</code> a try today! The first 200M tokens are free. Head over to our <a href="https://docs.voyageai.com/docs/embeddings" rel="nofollow" target="_blank">docs</a> to learn more. If youâ€™re also interested in fine-tuning embeddings, weâ€™d love to hear from youâ€”please email us at <a href="mailto:contact@voyageai.com">contact@voyageai.com</a>. Follow us onÂ <a href="https://x.com/VoyageAI" rel="nofollow" target="_blank">X (Twitter)</a>Â andÂ <a href="https://www.linkedin.com/company/voyageai/" rel="nofollow" target="_blank">LinkedIn</a>,Â and join our <a href="https://discord.gg/zAU7GQEmvT" rel="nofollow" target="_blank">Discord</a> for more updates.</p>



<hr/>






</div></div>




</div>
</div></div>
  </body>
</html>
