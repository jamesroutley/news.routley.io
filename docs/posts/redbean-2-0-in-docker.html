<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/kissgyorgy/redbean-docker">Original</a>
    <h1>Show HN: Redbean 2.0 in Docker</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">The smallest possible web server in Docker!</p>
<p dir="auto">The final container takes only 501 kB:</p>
<div data-snippet-clipboard-copy-content="$ docker images redbean-static
REPOSITORY      TAG         IMAGE ID      CREATED         SIZE
redbean-static  latest      814da89a2fa7  16 minutes ago  501 kB"><pre><code>$ docker images redbean-static
REPOSITORY      TAG         IMAGE ID      CREATED         SIZE
redbean-static  latest      814da89a2fa7  16 minutes ago  501 kB
</code></pre></div>
<p dir="auto">or just 186 kB if you use the tinylinux version of Redbean:</p>
<div data-snippet-clipboard-copy-content="$ docker images redbean-tinylinux
REPOSITORY         TAG         IMAGE ID      CREATED        SIZE
redbean-tinylinux  latest      0b98596e96d8  2 seconds ago  186 kB"><pre><code>$ docker images redbean-tinylinux
REPOSITORY         TAG         IMAGE ID      CREATED        SIZE
redbean-tinylinux  latest      0b98596e96d8  2 seconds ago  186 kB
</code></pre></div>

<p dir="auto">There are a couple of example Dockerfiles in this repo if you want to build it yourself:</p>
<ul dir="auto">
<li><a href="https://github.com/kissgyorgy/redbean-docker/blob/master/Dockerfile-multistage">Dockerfile-multistage</a> of how to produce a container from &#34;scratch&#34;</li>
<li><a href="https://github.com/kissgyorgy/redbean-docker/blob/master/Dockerfile-tinylinux">Dockerfile-tinylinux</a> for the world record small version</li>
<li><a href="https://github.com/kissgyorgy/redbean-docker/blob/master/Dockerfile-onbuild">Dockerfile-onbuild</a> if you just want a scratch container</li>
</ul>

<p dir="auto">The <a href="https://hub.docker.com/r/kissgyorgy/redbean-onbuild" rel="nofollow">kissgyorgy/redbean-onbuild</a>
image is not suitable to use by itself, you can build your own image with it:</p>
<ol dir="auto">
<li>
<p dir="auto">Put your static files in the <code>assets</code> directory or set your own directory name with:</p>
<div data-snippet-clipboard-copy-content="docker build --build-arg ASSETS_DIR=something-else ."><pre><code>docker build --build-arg ASSETS_DIR=something-else .
</code></pre></div>
</li>
<li>
<p dir="auto">build a multi-stage Docker image with a <code>Dockerfile</code> like this:</p>
<div data-snippet-clipboard-copy-content="FROM kissgyorgy/redbean-onbuild as build

FROM scratch

COPY --from=build /redbean.com /
CMD [&#34;/redbean.com&#34;, &#34;-vv&#34;, &#34;-p&#34;, &#34;80&#34;]"><pre><span>FROM</span> kissgyorgy/redbean-onbuild as build

<span>FROM</span> scratch

<span>COPY</span> --from=build /redbean.com /
<span>CMD</span> [<span>&#34;/redbean.com&#34;</span>, <span>&#34;-vv&#34;</span>, <span>&#34;-p&#34;</span>, <span>&#34;80&#34;</span>]</pre></div>
</li>
</ol>
<p dir="auto">Now your image includes redbean with all your static files in it and ready to run!</p>
</article>
          </div></div>
  </body>
</html>
