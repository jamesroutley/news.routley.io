<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://evgeniipendragon.com/posts/customizing-tmux-and-making-it-less-dreadful/">Original</a>
    <h1>Customizing tmux</h1>
    
    <div id="readability-page-1" class="page"><div><article><div><p>I have been exploring some new tools here and there. When I started watching <a href="https://www.youtube.com/c/theprimeagen">Primeagen</a>, I took a note of several tools that he was using and advocating for. One of them was tmux.</p><p><a href="https://github.com/tmux/tmux/wiki">tmux</a> is a terminal multiplexer. What that means is you can have many terminals in one. According to tmux wiki:</p><blockquote><p>tmux is a program which runs in a terminal and allows multiple other terminal programs to be run inside it. Each program inside tmux gets its own terminal managed by tmux, which can be accessed from the single terminal where tmux is running - this called multiplexing and tmux is a terminal multiplexer.</p></blockquote><p>tmux goes further by allowing you to have a lot of control over how the terminals are displayed, how they function, and how are they styled. You can have many separate windows as tabs. You can have many panes within one window. Are you working on several different projects? Then why don’t you have multiple sessions - each of them containing sets of windows and panes - all giving you access to multiple terminals. With a tool like this you no longer need to arrange multiple terminal instance windows on your desktop or using multiple workspaces for those instances - you can have it all in one place.</p><p>One additional feature that tmux boasts in is the ability to retain the terminal session upon its closure. Imagine that you have a long running process like a local server or a persistent connection like ssh session. If you were to close that window, you would lose that session and the process that was in it. Tmux has the ability to detach and attach to multiple sessions making them easier to manage and not to worry about losing it.</p><p>tmux wiki goes into detail talking about several other features of tmux:</p><blockquote><p>The main uses of tmux are to:</p><ul><li><p>Protect running programs on a remote server from connection drops by running them inside tmux.</p></li><li><p>Allow programs running on a remote server to be accessed from multiple different local computers.</p></li><li><p>Work with multiple programs and shells together in one terminal, a bit like a window manager.</p></li></ul><p>For example:</p><ul><li><p>A user connects to a remote server using ssh(1) from an xterm(1) on their work computer and run several programs. perhaps an editor, a compiler and a few shells.</p></li><li><p>They work with these programs interactively, perhaps start compiling, then close the xterm(1) with tmux and go home for the day.</p></li><li><p>They are then able to connect to the same remote server from home, attach to tmux, and continue from where they were previously.</p></li></ul></blockquote><figure><img loading="lazy" src="https://github.com/tmux/tmux/wiki/images/tmux_default.png" alt="The first impression of tmux didn’t leave me with much excitement of exploring what is truly possible :/ Source: https://github.com/tmux/tmux/wiki/Getting-Started"/><figcaption><p>The first impression of tmux didn’t leave me with much excitement of exploring what is truly possible :/ Source: <a href="https://github.com/tmux/tmux/wiki/Getting-Started">https://github.com/tmux/tmux/wiki/Getting-Started</a></p></figcaption></figure><p>When I first started using tmux, I felt overwhelmed by the very poor default UI that it offers and the amount of options and shortcuts that I needed to know to operate it well and be productive. It took me several tries before I started to feel more or less comfortable with it.</p><p>One of the things that stood out to me right away was how dreadful UI looked. Not only it felt uninviting, but it almost felt “gatekeepy” - if you don’t know how to use it in this configuration, then might as well forget about it. But one thing that kept me going was the promise of a highly customizable terminal that I could make my own at some point.</p><figure><img loading="lazy" src="https://github.com/tmux/tmux/wiki/images/tmux_with_panes.png" alt="While promising all of these amazing features, the dreadful tmux UI didn’t necessarily inspire :( Source: https://github.com/tmux/tmux/wiki/Getting-Started"/><figcaption><p>While promising all of these amazing features, the dreadful tmux UI didn’t necessarily inspire :( Source: <a href="https://github.com/tmux/tmux/wiki/Getting-Started">https://github.com/tmux/tmux/wiki/Getting-Started</a></p></figcaption></figure><p>To preface, I must mention that I am using <a href="https://iterm2.com/">iterm2</a> with <a href="https://github.com/romkatv/powerlevel10k">Powerline10k</a> and <a href="https://github.com/ryanoasis/nerd-fonts">NerdFonts</a>. They heavily affect the final look of the tmux due to colors and icons being inherited from the iterm2 configuration. With that said, let’s get into it.</p><p>The file that is responsible for customizing tmux - its function and its look - is <code>.tmux.conf</code>. This file should be located in user’s Home folder a.k.a. <code>~/</code>. That is where tmux will be looking for it.</p><p>There are quite a few options when it comes to customizing tmux. One of the first things that I wanted to address was the <strong>prefix</strong> key binding. This prefix is a key combination that you would use to enter the tmux shortcut or command mode. By default, the prefix is <code>C-b</code> a.k.a. <code>Ctrl-b</code>. One of the common remaps that most people go with is to switch it to <code>C-a</code>, which is a lot easier to use. To do that, we need to add the following lines to the configuration file:</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># remap prefix from &#39;C-b&#39; to &#39;C-a&#39;</span>
</span></span><span><span>unbind C-b
</span></span><span><span>set-option -g prefix C-a
</span></span><span><span>bind-key C-a send-prefix
</span></span></code></pre></div><p>While researching ways to customize tmux, I stumbled upon several more useful key remaps, which I decided to use:</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># split panes using | and -</span>
</span></span><span><span><span>bind</span> <span>|</span> split-window -h
</span></span><span><span><span>bind</span> - split-window -v
</span></span><span><span>unbind <span>&#39;&#34;&#39;</span>
</span></span><span><span>unbind %
</span></span><span><span>
</span></span><span><span><span># reload config file (change file location to your the tmux.conf you want to use)</span>
</span></span><span><span><span>bind</span> r source-file ~/.tmux.conf<span>;</span> display-message <span>&#34;~/.tmux.conf reloaded.&#34;</span>
</span></span><span><span>
</span></span><span><span><span># switch panes using Alt-arrow without prefix</span>
</span></span><span><span><span>bind</span> -n M-Left <span>select</span>-pane -L
</span></span><span><span><span>bind</span> -n M-Right <span>select</span>-pane -R
</span></span><span><span><span>bind</span> -n M-Up <span>select</span>-pane -U
</span></span><span><span><span>bind</span> -n M-Down <span>select</span>-pane -D
</span></span><span><span>
</span></span><span><span><span># switch windows using Shift-arrow without prefix</span>
</span></span><span><span><span>bind</span> -n S-Left previous-window
</span></span><span><span><span>bind</span> -n S-Right next-window
</span></span></code></pre></div><p>Here we are changing function to split window from <code>C-a &#34;</code> to <code>C-a |</code> for vertical splits and from <code>C-a %</code> to <code>C-a -</code> for horizontal splits, which is a lot more intuitive. Next we are creating several useful keybinds: <code>C-a r</code> to source the configuration file, <code>M-Left</code>, <code>M-Right</code>, <code>M-Up</code>, <code>M-Down</code> for faster navigation between the panes (<code>M</code> being either <code>Alt</code> or <code>Option</code>), and <code>S-Left</code> and <code>S-Right</code> for better navigation between the windows (<code>S</code> being <code>Shift</code>). These changes alone have already made my tmux experience 10x better than before.</p><p>Next, I wanted to improve my experience when scrolling the terminal output. By default, if you were to attempt to scroll it up or down, tmux would iterate over the history of the commands that you have executed. I would like to be able to look over the previous output and be able to operate on it. By default it is possible by entering the copy mode using <code>C-a [</code>. Once you’re there, it gives you very little to work with - the default terminal output retention is quite small. To fix all of these issues, I used the following configuration:</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># Increase the scrollback buffer to a higher limit than the default 2000 lines</span>
</span></span><span><span><span>set</span> -g history-limit <span>9999999</span>
</span></span><span><span>
</span></span><span><span><span># Enable mouse control (clickable windows, panes, resizable panes)</span>
</span></span><span><span><span>set</span> -g mouse on
</span></span><span><span>
</span></span><span><span><span># Enable vim keybinds to be used in copy mode</span>
</span></span><span><span>set-window-option -g mode-keys vi
</span></span></code></pre></div><p>These settings enable tmux retain 9999999 lines of terminal output (more than enough for me), enable using mouse, which removes the necessity to enter the copy mode to browse terminal output, and lastly enable Vim key bindings when in copy mode to quickly search and navigate through it.</p><p>And that brings us to styling tmux. As I mentioned, I didn’t like the original UI much, so I felt strongly about changing that. To do that, I used the following configuration:</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># clock mode</span>
</span></span><span><span>setw -g clock-mode-colour yellow
</span></span><span><span>
</span></span><span><span><span># copy mode</span>
</span></span><span><span>setw -g mode-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span><span><span>
</span></span><span><span><span># panes</span>
</span></span><span><span><span>set</span> -g pane-border-style <span>&#39;fg=yellow&#39;</span>
</span></span><span><span><span>set</span> -g pane-active-border-style <span>&#39;fg=green&#39;</span>
</span></span><span><span>
</span></span><span><span><span># statusbar</span>
</span></span><span><span><span>set</span> -g status-position top
</span></span><span><span><span>set</span> -g status-justify left
</span></span><span><span><span>set</span> -g status-style <span>&#39;fg=green&#39;</span>
</span></span><span><span>
</span></span><span><span><span>set</span> -g status-left <span>&#39;&#39;</span>
</span></span><span><span><span>set</span> -g status-left-length <span>10</span>
</span></span><span><span>
</span></span><span><span><span>set</span> -g status-right <span>&#39;#[fg=green,bg=default,bright]#(tmux-mem-cpu-load) #[fg=red,dim,bg=default]#(uptime | cut -f 4-5 -d &#34; &#34; | cut -f 1 -d &#34;,&#34;) #[fg=white,bg=default]%a%l:%M:%S %p#[default] #[fg=blue]%Y-%m-%d&#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-current-style <span>&#39;fg=black bg=green&#39;</span>
</span></span><span><span>setw -g window-status-current-format <span>&#39; #I #W #F &#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-style <span>&#39;fg=green bg=black&#39;</span>
</span></span><span><span>setw -g window-status-format <span>&#39; #I #[fg=white]#W #[fg=yellow]#F &#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-bell-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span><span><span>
</span></span><span><span><span># messages</span>
</span></span><span><span><span>set</span> -g message-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span></code></pre></div><p>These lines attempt to create a (subjectively) better looking UI that is easier on the eyes and more intuitive. It uses standard color names that would fit the color scheme that your terminal is already using so that it doesn’t stick out too much. Although it is very much possible to use whatever colors you want here - tmux is your oyster. Here we are also calibrating the positioning of the elements like status bar, look and function of parts of the status bar, and lastly colors for messages and copy mode.</p><p>Finally, let’s add tmux plugin manager. That’s right - tmux has a whole library of community maintained plugins. If you want to you can find entire plugins that will change the look and feel or your tmux in an instant. The reason I decided to go with my own configuration is so that I could learn it better and own it. Any new theme plugin would require some learning to know how it functions and where everything is. Regardless, configuring tmux plugin manager can be done in just a few lines:</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># List of plugins</span>
</span></span><span><span><span>set</span> -g @plugin <span>&#39;tmux-plugins/tpm&#39;</span>
</span></span><span><span><span>set</span> -g @plugin <span>&#39;tmux-plugins/tmux-sensible&#39;</span>
</span></span><span><span>
</span></span><span><span><span># Other examples:</span>
</span></span><span><span><span># set -g @plugin &#39;github_username/plugin_name&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;github_username/plugin_name#branch&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;git@github.com:user/plugin&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;git@bitbucket.com:user/plugin&#39;</span>
</span></span><span><span>
</span></span><span><span><span># Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)</span>
</span></span><span><span>run <span>&#39;~/.tmux/plugins/tpm/tpm&#39;</span>
</span></span></code></pre></div><p>One note to make here is that you would need to clone the repository for tmux plugin manager into <code>~/.tmux/plugins/tpm</code> for it to work. You can do that by following instructions on the <a href="https://github.com/tmux-plugins/tpm">tmux plugin manager</a> GitHub repository.</p><p>I haven’t installed many plugins just yet because I am still exploring which plugins I would want to have installed. I have several that I’m interested in exploring and giving a go:</p><ul><li><a href="https://github.com/tmux-plugins/tmux-battery">tmux-battery</a></li><li><a href="https://github.com/b0o/tmux-autoreload">tmux-autoreload</a></li><li><a href="https://github.com/ofirgall/tmux-browser">tmux-browser</a></li><li><a href="https://github.com/lost-melody/tmux-command-palette">tmux-command-palette</a></li><li><a href="https://github.com/wfxr/tmux-fzf-url">tmux-fzf-url</a></li><li><a href="https://github.com/jaclu/tmux-menus">tmux-menus</a></li><li><a href="https://github.com/tmux-plugins/tmux-resurrect">tmux-ressurect</a></li></ul><p>Here is a full configuration file. It includes a couple of other features that I haven’t mentioned because they are less significant than the ones that I have highlighted.</p><div><pre tabindex="0"><code data-lang="shell"><span><span><span># remap prefix from &#39;C-b&#39; to &#39;C-a&#39;</span>
</span></span><span><span>unbind C-b
</span></span><span><span>set-option -g prefix C-a
</span></span><span><span>bind-key C-a send-prefix
</span></span><span><span>
</span></span><span><span><span># split panes using | and -</span>
</span></span><span><span><span>bind</span> <span>|</span> split-window -h
</span></span><span><span><span>bind</span> - split-window -v
</span></span><span><span>unbind <span>&#39;&#34;&#39;</span>
</span></span><span><span>unbind %
</span></span><span><span>
</span></span><span><span><span># reload config file (change file location to your the tmux.conf you want to use)</span>
</span></span><span><span><span>bind</span> r source-file ~/.tmux.conf<span>;</span> display-message <span>&#34;~/.tmux.conf reloaded.&#34;</span>
</span></span><span><span>
</span></span><span><span><span># switch panes using Alt-arrow without prefix</span>
</span></span><span><span><span>bind</span> -n M-Left <span>select</span>-pane -L
</span></span><span><span><span>bind</span> -n M-Right <span>select</span>-pane -R
</span></span><span><span><span>bind</span> -n M-Up <span>select</span>-pane -U
</span></span><span><span><span>bind</span> -n M-Down <span>select</span>-pane -D
</span></span><span><span>
</span></span><span><span><span># switch windows using Shift-arrow without prefix</span>
</span></span><span><span><span>bind</span> -n S-Left previous-window
</span></span><span><span><span>bind</span> -n S-Right next-window
</span></span><span><span>
</span></span><span><span><span># Increase the scrollback buffer to a higher limit than the default 2000 lines</span>
</span></span><span><span><span>set</span> -g history-limit <span>9999999</span>
</span></span><span><span>
</span></span><span><span><span># Enable mouse control (clickable windows, panes, resizable panes)</span>
</span></span><span><span><span>set</span> -g mouse on
</span></span><span><span>
</span></span><span><span><span># Enable vim keybinds to be used in copy mode</span>
</span></span><span><span>set-window-option -g mode-keys vi
</span></span><span><span>
</span></span><span><span><span># don&#39;t rename windows automatically</span>
</span></span><span><span><span># set-option -g allow-rename off</span>
</span></span><span><span>
</span></span><span><span><span># rename window to reflect current program</span>
</span></span><span><span>setw -g automatic-rename on
</span></span><span><span><span># renumber windows when a window is closed</span>
</span></span><span><span><span>set</span> -g renumber-windows on
</span></span><span><span>
</span></span><span><span><span># don&#39;t do anything when a &#39;bell&#39; rings</span>
</span></span><span><span><span>set</span> -g visual-activity off
</span></span><span><span><span>set</span> -g visual-bell off
</span></span><span><span><span>set</span> -g visual-silence off
</span></span><span><span>setw -g monitor-activity off
</span></span><span><span><span>set</span> -g bell-action none
</span></span><span><span>
</span></span><span><span><span># clock mode</span>
</span></span><span><span>setw -g clock-mode-colour yellow
</span></span><span><span>
</span></span><span><span><span># copy mode</span>
</span></span><span><span>setw -g mode-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span><span><span>
</span></span><span><span><span># panes</span>
</span></span><span><span><span>set</span> -g pane-border-style <span>&#39;fg=yellow&#39;</span>
</span></span><span><span><span>set</span> -g pane-active-border-style <span>&#39;fg=green&#39;</span>
</span></span><span><span>
</span></span><span><span>
</span></span><span><span><span># Allows for faster key repetition</span>
</span></span><span><span><span># set -s escape-time 50</span>
</span></span><span><span>
</span></span><span><span><span># statusbar</span>
</span></span><span><span><span>set</span> -g status-position top
</span></span><span><span><span>set</span> -g status-justify left
</span></span><span><span><span>set</span> -g status-style <span>&#39;fg=green&#39;</span>
</span></span><span><span>
</span></span><span><span><span>set</span> -g status-left <span>&#39;&#39;</span>
</span></span><span><span><span>set</span> -g status-left-length <span>10</span>
</span></span><span><span>
</span></span><span><span><span>set</span> -g status-right <span>&#39;#[fg=green,bg=default,bright]#(tmux-mem-cpu-load) #[fg=red,dim,bg=default]#(uptime | cut -f 4-5 -d &#34; &#34; | cut -f 1 -d &#34;,&#34;) #[fg=white,bg=default]%a%l:%M:%S %p#[default] #[fg=blue]%Y-%m-%d&#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-current-style <span>&#39;fg=black bg=green&#39;</span>
</span></span><span><span>setw -g window-status-current-format <span>&#39; #I #W #F &#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-style <span>&#39;fg=green bg=black&#39;</span>
</span></span><span><span>setw -g window-status-format <span>&#39; #I #[fg=white]#W #[fg=yellow]#F &#39;</span>
</span></span><span><span>
</span></span><span><span>setw -g window-status-bell-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span><span><span>
</span></span><span><span><span># messages</span>
</span></span><span><span><span>set</span> -g message-style <span>&#39;fg=black bg=yellow bold&#39;</span>
</span></span><span><span>
</span></span><span><span><span># List of plugins</span>
</span></span><span><span><span>set</span> -g @plugin <span>&#39;tmux-plugins/tpm&#39;</span>
</span></span><span><span><span>set</span> -g @plugin <span>&#39;tmux-plugins/tmux-sensible&#39;</span>
</span></span><span><span>
</span></span><span><span><span># Other examples:</span>
</span></span><span><span><span># set -g @plugin &#39;github_username/plugin_name&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;github_username/plugin_name#branch&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;git@github.com:user/plugin&#39;</span>
</span></span><span><span><span># set -g @plugin &#39;git@bitbucket.com:user/plugin&#39;</span>
</span></span><span><span>
</span></span><span><span><span># Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)</span>
</span></span><span><span>run <span>&#39;~/.tmux/plugins/tpm/tpm&#39;</span>
</span></span></code></pre></div><p>This file could also be found in my GitHub repo: <a href="https://github.com/EvgeniiKlepilin/config-files/blob/main/.tmux.conf">https://github.com/EvgeniiKlepilin/config-files/blob/main/.tmux.conf</a> . I will keep updating it as I continue my customization efforts, so stay tuned.</p><p>In the end, here is what my tmux looks like now:</p><figure><img loading="lazy" src="https://evgeniipendragon.com/posts/customizing-tmux-and-making-it-less-dreadful/tmux_is_awesome.png" alt="Much better! 😎"/><figcaption><p>Much better! 😎</p></figcaption></figure><p>I hope you will find this useful and maybe even inspiring to create something custom of your own!</p></div></article></div></div>
  </body>
</html>
