<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://docs.python.org/3.13/whatsnew/3.13.html">Original</a>
    <h1>Python 3.13.0 Is Released</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
        <div>
          <div role="main">
            
  <section id="what-s-new-in-python-3-13">

<dl>
<dt>Editors<span>:</span></dt>
<dd><p>Adam Turner and Thomas Wouters</p>
</dd>
</dl>
<p>This article explains the new features in Python 3.13, compared to 3.12.
Python 3.13 was released on October 7, 2024.
For full details, see the <a href="https://docs.python.org/3.13/whatsnew/changelog.html#changelog"><span>changelog</span></a>.</p>
<div>
<p>See also</p>
<p><span id="index-0"></span><a href="https://peps.python.org/pep-0719/"><strong>PEP 719</strong></a> – Python 3.13 Release Schedule</p>
</div>
<section id="summary-release-highlights">
<h2>Summary – Release Highlights<a href="#summary-release-highlights" title="Link to this heading">¶</a></h2>
<p>Python 3.13 is the latest stable release of the Python programming
language, with a mix of changes to the language, the implementation
and the standard library.
The biggest changes include a new <a href="#whatsnew313-better-interactive-interpreter">interactive interpreter</a>,
experimental support for running in a <a href="#whatsnew313-free-threaded-cpython">free-threaded mode</a> (<span id="index-1"></span><a href="https://peps.python.org/pep-0703/"><strong>PEP 703</strong></a>),
and a <a href="#whatsnew313-jit-compiler">Just-In-Time compiler</a> (<span id="index-2"></span><a href="https://peps.python.org/pep-0744/"><strong>PEP 744</strong></a>).</p>
<p>Error messages continue to improve, with tracebacks now highlighted in color
by default. The <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> builtin now has <a href="#whatsnew313-locals-semantics"><span>defined semantics</span></a> for changing the returned mapping,
and type parameters now support default values.</p>
<p>The library changes contain removal of deprecated APIs and modules,
as well as the usual improvements in user-friendliness and correctness.
Several legacy standard library modules have now <a href="#whatsnew313-pep594">been removed</a> following their deprecation in Python 3.11 (<span id="index-3"></span><a href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a>).</p>
<p>This article doesn’t attempt to provide a complete specification
of all new features, but instead gives a convenient overview.
For full details refer to the documentation,
such as the <a href="https://docs.python.org/3.13/library/index.html#library-index"><span>Library Reference</span></a>
and <a href="https://docs.python.org/3.13/reference/index.html#reference-index"><span>Language Reference</span></a>.
To understand the complete implementation and design rationale for a change,
refer to the PEP for a particular new feature;
but note that PEPs usually are not kept up-to-date
once a feature has been fully implemented.
See <a href="#porting-to-python-3-13">Porting to Python 3.13</a> for guidance on upgrading from
earlier versions of Python.</p>
<hr/>
<p>Interpreter improvements:</p>
<ul>
<li><p>A greatly improved <a href="#whatsnew313-better-interactive-interpreter"><span>interactive interpreter</span></a> and
<a href="#whatsnew313-improved-error-messages"><span>improved error messages</span></a>.</p></li>
<li><p><span id="index-4"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a>: The <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> builtin now has
<a href="#whatsnew313-locals-semantics"><span>defined semantics</span></a> when mutating the
returned mapping. Python debuggers and similar tools may now more reliably
update local variables in optimized scopes even during concurrent code
execution.</p></li>
<li><p><span id="index-5"></span><a href="https://peps.python.org/pep-0703/"><strong>PEP 703</strong></a>: CPython 3.13 has experimental support for running with the
<a href="https://docs.python.org/3.13/glossary.html#term-global-interpreter-lock"><span>global interpreter lock</span></a> disabled. See <a href="#whatsnew313-free-threaded-cpython"><span>Free-threaded CPython</span></a> for more details.</p></li>
<li><p><span id="index-6"></span><a href="https://peps.python.org/pep-0744/"><strong>PEP 744</strong></a>: A basic <a href="#whatsnew313-jit-compiler"><span>JIT compiler</span></a> was added.
It is currently disabled by default (though we may turn it on later).
Performance improvements are modest – we expect to improve this
over the next few releases.</p></li>
<li><p>Color support in the new <a href="#whatsnew313-better-interactive-interpreter"><span>interactive interpreter</span></a>,
as well as in <a href="#whatsnew313-improved-error-messages"><span>tracebacks</span></a>
and <a href="#whatsnew313-doctest"><span>doctest</span></a> output.
This can be disabled through the <span id="index-7"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_COLORS"><code><span>PYTHON_COLORS</span></code></a> and <a href="https://no-color.org/"><code><span>NO_COLOR</span></code></a>
environment variables.</p></li>
</ul>
<p>Python data model improvements:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/reference/datamodel.html#type.__static_attributes__" title="type.__static_attributes__"><code><span>__static_attributes__</span></code></a> stores the names of attributes accessed
through <code><span>self.X</span></code> in any function in a class body.</p></li>
<li><p><a href="https://docs.python.org/3.13/reference/datamodel.html#type.__firstlineno__" title="type.__firstlineno__"><code><span>__firstlineno__</span></code></a> records the first line number of a class
definition.</p></li>
</ul>
<p>Significant improvements in the standard library:</p>
<ul>
<li><p>Add a new <a href="https://docs.python.org/3.13/library/exceptions.html#PythonFinalizationError" title="PythonFinalizationError"><code><span>PythonFinalizationError</span></code></a> exception, raised when an operation
is blocked during <a href="https://docs.python.org/3.13/glossary.html#term-interpreter-shutdown"><span>finalization</span></a>.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code><span>argparse</span></code></a> module now supports deprecating command-line options,
positional arguments, and subcommands.</p></li>
<li><p>The new functions <a href="https://docs.python.org/3.13/library/base64.html#base64.z85encode" title="base64.z85encode"><code><span>base64.z85encode()</span></code></a> and <a href="https://docs.python.org/3.13/library/base64.html#base64.z85decode" title="base64.z85decode"><code><span>base64.z85decode()</span></code></a>
support encoding and decoding <a href="https://rfc.zeromq.org/spec/32/">Z85 data</a>.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/copy.html#module-copy" title="copy: Shallow and deep copy operations."><code><span>copy</span></code></a> module now has a <a href="https://docs.python.org/3.13/library/copy.html#copy.replace" title="copy.replace"><code><span>copy.replace()</span></code></a> function,
with support for many builtin types and any class defining
the <a href="https://docs.python.org/3.13/library/copy.html#object.__replace__" title="object.__replace__"><code><span>__replace__()</span></code></a> method.</p></li>
<li><p>The new <a href="https://docs.python.org/3.13/library/dbm.html#module-dbm.sqlite3" title="dbm.sqlite3: SQLite backend for dbm (All)"><code><span>dbm.sqlite3</span></code></a> module is now the default <a href="https://docs.python.org/3.13/library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &#34;database&#34; formats."><code><span>dbm</span></code></a> backend.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code><span>os</span></code></a> module has a <a href="https://docs.python.org/3.13/library/os.html#os-timerfd"><span>suite of new functions</span></a>
for working with Linux’s timer notification file descriptors.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code><span>random</span></code></a> module now has a <a href="https://docs.python.org/3.13/library/random.html#random-cli"><span>command-line interface</span></a>.</p></li>
</ul>
<p>Security improvements:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code><span>ssl.create_default_context()</span></code></a> sets <a href="https://docs.python.org/3.13/library/ssl.html#ssl.VERIFY_X509_PARTIAL_CHAIN" title="ssl.VERIFY_X509_PARTIAL_CHAIN"><code><span>ssl.VERIFY_X509_PARTIAL_CHAIN</span></code></a>
and <a href="https://docs.python.org/3.13/library/ssl.html#ssl.VERIFY_X509_STRICT" title="ssl.VERIFY_X509_STRICT"><code><span>ssl.VERIFY_X509_STRICT</span></code></a> as default flags.</p></li>
</ul>
<p>C API improvements:</p>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/c-api/module.html#c.Py_mod_gil" title="Py_mod_gil"><code><span>Py_mod_gil</span></code></a> slot is now used to indicate that
an extension module supports running with the <a href="https://docs.python.org/3.13/glossary.html#term-GIL"><span>GIL</span></a> disabled.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/c-api/time.html"><span>PyTime C API</span></a> has been added,
providing access to system clocks.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyMutex" title="PyMutex"><code><span>PyMutex</span></code></a> is a new lightweight mutex that occupies a single byte.</p></li>
<li><p>There is a new <a href="https://docs.python.org/3.13/c-api/monitoring.html#c-api-monitoring"><span>suite of functions</span></a>
for generating <span id="index-8"></span><a href="https://peps.python.org/pep-0669/"><strong>PEP 669</strong></a> monitoring events in the C API.</p></li>
</ul>
<p>New typing features:</p>
<ul>
<li><p><span id="index-9"></span><a href="https://peps.python.org/pep-0696/"><strong>PEP 696</strong></a>: Type parameters (<a href="https://docs.python.org/3.13/library/typing.html#typing.TypeVar" title="typing.TypeVar"><code><span>typing.TypeVar</span></code></a>, <a href="https://docs.python.org/3.13/library/typing.html#typing.ParamSpec" title="typing.ParamSpec"><code><span>typing.ParamSpec</span></code></a>,
and <a href="https://docs.python.org/3.13/library/typing.html#typing.TypeVarTuple" title="typing.TypeVarTuple"><code><span>typing.TypeVarTuple</span></code></a>) now support defaults.</p></li>
<li><p><span id="index-10"></span><a href="https://peps.python.org/pep-0702/"><strong>PEP 702</strong></a>: The new <a href="https://docs.python.org/3.13/library/warnings.html#warnings.deprecated" title="warnings.deprecated"><code><span>warnings.deprecated()</span></code></a> decorator adds support
for marking deprecations in the type system and at runtime.</p></li>
<li><p><span id="index-11"></span><a href="https://peps.python.org/pep-0705/"><strong>PEP 705</strong></a>: <a href="https://docs.python.org/3.13/library/typing.html#typing.ReadOnly" title="typing.ReadOnly"><code><span>typing.ReadOnly</span></code></a> can be used to mark an item of a
<a href="https://docs.python.org/3.13/library/typing.html#typing.TypedDict" title="typing.TypedDict"><code><span>typing.TypedDict</span></code></a> as read-only for type checkers.</p></li>
<li><p><span id="index-12"></span><a href="https://peps.python.org/pep-0742/"><strong>PEP 742</strong></a>: <a href="https://docs.python.org/3.13/library/typing.html#typing.TypeIs" title="typing.TypeIs"><code><span>typing.TypeIs</span></code></a> provides more intuitive
type narrowing behavior, as an alternative to <a href="https://docs.python.org/3.13/library/typing.html#typing.TypeGuard" title="typing.TypeGuard"><code><span>typing.TypeGuard</span></code></a>.</p></li>
</ul>
<p>Platform support:</p>
<ul>
<li><p><span id="index-13"></span><a href="https://peps.python.org/pep-0730/"><strong>PEP 730</strong></a>: Apple’s iOS is now an <a href="#whatsnew313-platform-support"><span>officially supported platform</span></a>, at <span id="index-14"></span><a href="https://peps.python.org/pep-0011/#tier-3"><strong>tier 3</strong></a>.</p></li>
<li><p><span id="index-15"></span><a href="https://peps.python.org/pep-0738/"><strong>PEP 738</strong></a>: Android is now an <a href="#whatsnew313-platform-support"><span>officially supported platform</span></a>, at <span id="index-16"></span><a href="https://peps.python.org/pep-0011/#tier-3"><strong>tier 3</strong></a>.</p></li>
<li><p><code><span>wasm32-wasi</span></code> is now supported as a <span id="index-17"></span><a href="https://peps.python.org/pep-0011/#tier-2"><strong>tier 2</strong></a> platform.</p></li>
<li><p><code><span>wasm32-emscripten</span></code> is no longer an officially supported platform.</p></li>
</ul>
<p>Important removals:</p>
<ul>
<li><p><a href="#whatsnew313-pep594"><span>PEP 594</span></a>: The remaining 19 “dead batteries”
(legacy stdlib modules) have been removed from the standard library:
<code><span>aifc</span></code>, <code><span>audioop</span></code>, <code><span>cgi</span></code>, <code><span>cgitb</span></code>, <code><span>chunk</span></code>,
<code><span>crypt</span></code>, <code><span>imghdr</span></code>, <code><span>mailcap</span></code>, <code><span>msilib</span></code>, <code><span>nis</span></code>,
<code><span>nntplib</span></code>, <code><span>ossaudiodev</span></code>, <code><span>pipes</span></code>, <code><span>sndhdr</span></code>,
<code><span>spwd</span></code>, <code><span>sunau</span></code>, <code><span>telnetlib</span></code>, <code><span>uu</span></code> and <code><span>xdrlib</span></code>.</p></li>
<li><p>Remove the <strong>2to3</strong> tool and <code><span>lib2to3</span></code> module
(deprecated in Python 3.11).</p></li>
<li><p>Remove the <code><span>tkinter.tix</span></code> module (deprecated in Python 3.6).</p></li>
<li><p>Remove the <code><span>locale.resetlocale()</span></code> function.</p></li>
<li><p>Remove the <code><span>typing.io</span></code> and <code><span>typing.re</span></code> namespaces.</p></li>
<li><p>Remove chained <a href="https://docs.python.org/3.13/library/functions.html#classmethod" title="classmethod"><code><span>classmethod</span></code></a> descriptors.</p></li>
</ul>
<p>Release schedule changes:</p>
<p><span id="index-18"></span><a href="https://peps.python.org/pep-0602/"><strong>PEP 602</strong></a> (“Annual Release Cycle for Python”) has been updated
to extend the full support (‘bugfix’) period for new releases to two years.
This updated policy means that:</p>
<ul>
<li><p>Python 3.9–3.12 have one and a half years of full support,
followed by three and a half years of security fixes.</p></li>
<li><p>Python 3.13 and later have two years of full support,
followed by three years of security fixes.</p></li>
</ul>
</section>
<section id="new-features">
<h2>New Features<a href="#new-features" title="Link to this heading">¶</a></h2>
<section id="a-better-interactive-interpreter">
<span id="whatsnew313-better-interactive-interpreter"></span><h3>A better interactive interpreter<a href="#a-better-interactive-interpreter" title="Link to this heading">¶</a></h3>
<p>Python now uses a new <a href="https://docs.python.org/3.13/glossary.html#term-interactive"><span>interactive</span></a> shell by default, based on code
from the <a href="https://pypy.org/">PyPy project</a>.
When the user starts the <a href="https://docs.python.org/3.13/glossary.html#term-REPL"><span>REPL</span></a> from an interactive terminal,
the following new features are now supported:</p>
<ul>
<li><p>Multiline editing with history preservation.</p></li>
<li><p>Direct support for REPL-specific commands like <kbd>help</kbd>, <kbd>exit</kbd>,
and <kbd>quit</kbd>, without the need to call them as functions.</p></li>
<li><p>Prompts and tracebacks with <a href="https://docs.python.org/3.13/using/cmdline.html#using-on-controlling-color"><span>color enabled by default</span></a>.</p></li>
<li><p>Interactive help browsing using <kbd>F1</kbd> with a separate command
history.</p></li>
<li><p>History browsing using <kbd>F2</kbd> that skips output as well as the
<a href="https://docs.python.org/3.13/glossary.html#term-0"><span>&gt;&gt;&gt;</span></a> and <a href="https://docs.python.org/3.13/glossary.html#term-..."><span>…</span></a> prompts.</p></li>
<li><p>“Paste mode” with <kbd>F3</kbd> that makes pasting larger blocks of code
easier (press <kbd>F3</kbd> again to return to the regular prompt).</p></li>
</ul>
<p>To disable the new interactive shell,
set the <span id="index-19"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_BASIC_REPL"><code><span>PYTHON_BASIC_REPL</span></code></a> environment variable.
For more on interactive mode, see <a href="https://docs.python.org/3.13/tutorial/appendix.html#tut-interac"><span>Interactive Mode</span></a>.</p>
<p>(Contributed by Pablo Galindo Salgado, Łukasz Langa, and
Lysandros Nikolaou in <a href="https://github.com/python/cpython/issues/111201">gh-111201</a> based on code from the PyPy project.
Windows support contributed by Dino Viehland and Anthony Shaw.)</p>
</section>
<section id="improved-error-messages">
<span id="whatsnew313-improved-error-messages"></span><h3>Improved error messages<a href="#improved-error-messages" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The interpreter now uses color by default when displaying tracebacks in the
terminal. This feature <a href="https://docs.python.org/3.13/using/cmdline.html#using-on-controlling-color"><span>can be controlled</span></a>
via the new <span id="index-20"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_COLORS"><code><span>PYTHON_COLORS</span></code></a> environment variable as well as
the canonical <a href="https://no-color.org/"><code><span>NO_COLOR</span></code></a> and <a href="https://force-color.org/"><code><span>FORCE_COLOR</span></code></a> environment variables.
(Contributed by Pablo Galindo Salgado in <a href="https://github.com/python/cpython/issues/112730">gh-112730</a>.)</p></li>
</ul>
<ul>
<li><p>A common mistake is to write a script with the same name as a
standard library module. When this results in errors, we now
display a more helpful error message:</p>
<div><div><pre><span></span><span>$ python random.py</span>
<span>Traceback (most recent call last):</span>
  File <span>&#34;/home/me/random.py&#34;</span>, line <span>1</span>, in <span>&lt;module&gt;</span>
<span>    </span><span>import</span> <span>random</span>
  File <span>&#34;/home/me/random.py&#34;</span>, line <span>3</span>, in <span>&lt;module&gt;</span>
<span>    </span><span>print</span><span>(</span><span>random</span><span>.</span><span>randint</span><span>(</span><span>5</span><span>))</span>
<span>          </span><span>^^^^^^^^^^^^^^</span>
<span>AttributeError</span>: <span>module &#39;random&#39; has no attribute &#39;randint&#39; (consider renaming &#39;/home/me/random.py&#39; since it has the same name as the standard library module named &#39;random&#39; and the import system gives it precedence)</span>
</pre></div>
</div>
<p>Similarly, if a script has the same name as a third-party
module that it attempts to import and this results in errors,
we also display a more helpful error message:</p>
<div><div><pre><span></span><span>$ python numpy.py</span>
<span>Traceback (most recent call last):</span>
  File <span>&#34;/home/me/numpy.py&#34;</span>, line <span>1</span>, in <span>&lt;module&gt;</span>
<span>    </span><span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
  File <span>&#34;/home/me/numpy.py&#34;</span>, line <span>3</span>, in <span>&lt;module&gt;</span>
<span>    </span><span>np</span><span>.</span><span>array</span><span>([</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>])</span>
<span>    </span><span>^^^^^^^^</span>
<span>AttributeError</span>: <span>module &#39;numpy&#39; has no attribute &#39;array&#39; (consider renaming &#39;/home/me/numpy.py&#39; if it has the same name as a third-party module you intended to import)</span>
</pre></div>
</div>
<p>(Contributed by Shantanu Jain in <a href="https://github.com/python/cpython/issues/95754">gh-95754</a>.)</p>
</li>
<li><p>The error message now tries to suggest the correct keyword argument
when an incorrect keyword argument is passed to a function.</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>&#34;Better error messages!&#34;</span><span>.</span><span>split</span><span>(</span><span>max_split</span><span>=</span><span>1</span><span>)</span>
<span>Traceback (most recent call last):</span>
  File <span>&#34;&lt;python-input-0&gt;&#34;</span>, line <span>1</span>, in <span>&lt;module&gt;</span>
<span>    </span><span>&#34;Better error messages!&#34;</span><span>.</span><span>split</span><span>(</span><span>max_split</span><span>=</span><span>1</span><span>)</span>
<span>    </span><span>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^</span>
<span>TypeError</span>: <span>split() got an unexpected keyword argument &#39;max_split&#39;. Did you mean &#39;maxsplit&#39;?</span>
</pre></div>
</div>
<p>(Contributed by Pablo Galindo Salgado and Shantanu Jain in <a href="https://github.com/python/cpython/issues/107944">gh-107944</a>.)</p>
</li>
</ul>
</section>
<section id="free-threaded-cpython">
<span id="whatsnew313-free-threaded-cpython"></span><h3>Free-threaded CPython<a href="#free-threaded-cpython" title="Link to this heading">¶</a></h3>
<p>CPython now has experimental support for running in a free-threaded mode,
with the <a href="https://docs.python.org/3.13/glossary.html#term-global-interpreter-lock"><span>global interpreter lock</span></a> (GIL) disabled.
This is an experimental feature and therefore is not enabled by default.
The free-threaded mode requires a different executable,
usually called <code><span>python3.13t</span></code> or <code><span>python3.13t.exe</span></code>.
Pre-built binaries marked as <em>free-threaded</em> can be installed as part of
the official <a href="https://docs.python.org/3.13/using/windows.html#install-freethreaded-windows"><span>Windows</span></a>
and <a href="https://docs.python.org/3.13/using/mac.html#install-freethreaded-macos"><span>macOS</span></a> installers,
or CPython can be built from source with the <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-disable-gil"><code><span>--disable-gil</span></code></a> option.</p>
<p>Free-threaded execution allows for full utilization of the available
processing power by running threads in parallel on available CPU cores.
While not all software will benefit from this automatically, programs
designed with threading in mind will run faster on multi-core hardware.
<strong>The free-threaded mode is experimental</strong> and work is ongoing to improve it:
expect some bugs and a substantial single-threaded performance hit.
Free-threaded builds of CPython support optionally running with the GIL
enabled at runtime using the environment variable <span id="index-21"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_GIL"><code><span>PYTHON_GIL</span></code></a> or
the command-line option <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>gil=1</span></code></a>.</p>
<p>To check if the current interpreter supports free-threading, <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-V"><code><span>python</span> <span>-VV</span></code></a>
and <a href="https://docs.python.org/3.13/library/sys.html#sys.version" title="sys.version"><code><span>sys.version</span></code></a> contain “experimental free-threading build”.
The new <code><span>sys._is_gil_enabled()</span></code> function can be used to check whether
the GIL is actually disabled in the running process.</p>
<p>C-API extension modules need to be built specifically for the free-threaded
build. Extensions that support running with the <a href="https://docs.python.org/3.13/glossary.html#term-GIL"><span>GIL</span></a> disabled should
use the <a href="https://docs.python.org/3.13/c-api/module.html#c.Py_mod_gil" title="Py_mod_gil"><code><span>Py_mod_gil</span></code></a> slot. Extensions using single-phase init should
use <a href="https://docs.python.org/3.13/c-api/module.html#c.PyUnstable_Module_SetGIL" title="PyUnstable_Module_SetGIL"><code><span>PyUnstable_Module_SetGIL()</span></code></a> to indicate whether they support
running with the GIL disabled. Importing C extensions that don’t use these
mechanisms will cause the GIL to be enabled, unless the GIL was explicitly
disabled with the <span id="index-22"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_GIL"><code><span>PYTHON_GIL</span></code></a> environment variable or the
<a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>gil=0</span></code></a> option.
pip 24.1 or newer is required to install packages with C extensions in the
free-threaded build.</p>
<p>This work was made possible thanks to many individuals and
organizations, including the large community of contributors to Python
and third-party projects to test and enable free-threading support.
Notable contributors include:
Sam Gross, Ken Jin, Donghee Na, Itamar Oren, Matt Page, Brett Simmers,
Dino Viehland, Carl Meyer, Nathan Goldbaum, Ralf Gommers,
Lysandros Nikolaou, and many others.
Many of these contributors are employed by Meta, which has
provided significant engineering resources to support this project.</p>

</section>
<section id="an-experimental-just-in-time-jit-compiler">
<span id="whatsnew313-jit-compiler"></span><h3>An experimental just-in-time (JIT) compiler<a href="#an-experimental-just-in-time-jit-compiler" title="Link to this heading">¶</a></h3>
<p>When CPython is configured and built using
the <code><span>--enable-experimental-jit</span></code> option,
a just-in-time (JIT) compiler is added which may speed up some Python programs.
On Windows, use <code><span>PCbuild/build.bat</span> <span>--experimental-jit</span></code> to enable the JIT
or <code><span>--experimental-jit-interpreter</span></code> to enable the Tier 2 interpreter.
Build requirements and further supporting information <a href="https://github.com/python/cpython/blob/main/Tools/jit/README.md">are contained at</a>
<code><span>Tools/jit/README.md</span></code>.</p>
<p>The <code><span>--enable-experimental-jit</span></code> option takes these (optional) values,
defaulting to <code><span>yes</span></code> if <code><span>--enable-experimental-jit</span></code> is present
without the optional value.</p>
<ul>
<li><p><code><span>no</span></code>: Disable the entire Tier 2 and JIT pipeline.</p></li>
<li><p><code><span>yes</span></code>: Enable the JIT.
To disable the JIT at runtime, pass the environment variable <code><span>PYTHON_JIT=0</span></code>.</p></li>
<li><p><code><span>yes-off</span></code>: Build the JIT but disable it by default.
To enable the JIT at runtime, pass the environment variable <code><span>PYTHON_JIT=1</span></code>.</p></li>
<li><p><code><span>interpreter</span></code>: Enable the Tier 2 interpreter but disable the JIT.
The interpreter can be disabled by running with <code><span>PYTHON_JIT=0</span></code>.</p></li>
</ul>
<p>The internal architecture is roughly as follows:</p>
<ul>
<li><p>We start with specialized <em>Tier 1 bytecode</em>.
See <a href="https://docs.python.org/3.13/whatsnew/3.11.html#whatsnew311-pep659"><span>What’s new in 3.11</span></a> for details.</p></li>
<li><p>When the Tier 1 bytecode gets hot enough, it gets translated
to a new purely internal intermediate representation (IR),
called the <em>Tier 2 IR</em>, and sometimes referred to as micro-ops (“uops”).</p></li>
<li><p>The Tier 2 IR uses the same stack-based virtual machine as Tier 1,
but the instruction format is better suited to translation to machine code.</p></li>
<li><p>We have several optimization passes for Tier 2 IR, which are applied
before it is interpreted or translated to machine code.</p></li>
<li><p>There is a Tier 2 interpreter, but it is mostly intended for debugging
the earlier stages of the optimization pipeline.
The Tier 2 interpreter can be enabled by configuring Python
with <code><span>--enable-experimental-jit=interpreter</span></code>.</p></li>
<li><p>When the JIT is enabled, the optimized
Tier 2 IR is translated to machine code, which is then executed.</p></li>
<li><p>The machine code translation process uses a technique called
<em>copy-and-patch</em>. It has no runtime dependencies, but there is a new
build-time dependency on LLVM.</p></li>
</ul>

<p>(JIT by Brandt Bucher, inspired by a paper by Haoran Xu and Fredrik Kjolstad.
Tier 2 IR by Mark Shannon and Guido van Rossum.
Tier 2 optimizer by Ken Jin.)</p>
</section>
<section id="defined-mutation-semantics-for-locals">
<span id="whatsnew313-locals-semantics"></span><h3>Defined mutation semantics for <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a><a href="#defined-mutation-semantics-for-locals" title="Link to this heading">¶</a></h3>
<p>Historically, the expected result of mutating the return value of
<a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> has been left to individual Python implementations to define.
Starting from Python 3.13, <span id="index-25"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a> standardises
the historical behavior of CPython for most code execution scopes,
but changes <a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scopes</span></a>
(functions, generators, coroutines, comprehensions, and generator expressions)
to explicitly return independent snapshots of the currently assigned local
variables, including locally referenced nonlocal variables captured in closures.</p>
<p>This change to the semantics of <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> in optimized scopes also
affects the default behavior of code execution functions that implicitly
target <code><span>locals()</span></code> if no explicit namespace is provided
(such as <a href="https://docs.python.org/3.13/library/functions.html#exec" title="exec"><code><span>exec()</span></code></a> and <a href="https://docs.python.org/3.13/library/functions.html#eval" title="eval"><code><span>eval()</span></code></a>).
In previous versions, whether or not changes could be accessed by calling
<code><span>locals()</span></code> after calling the code execution function was
implementation-dependent. In CPython specifically, such code would typically
appear to work as desired, but could sometimes fail in optimized scopes based
on other code (including debuggers and code execution tracing tools)
potentially resetting the shared snapshot in that scope.
Now, the code will always run against an independent snapshot of
the local variables in optimized scopes, and hence the changes will never
be visible in subsequent calls to <code><span>locals()</span></code>.
To access the changes made in these cases, an explicit namespace reference
must now be passed to the relevant function.
Alternatively, it may make sense to update affected code to use a higher level
code execution API that returns the resulting code execution namespace
(e.g. <a href="https://docs.python.org/3.13/library/runpy.html#runpy.run_path" title="runpy.run_path"><code><span>runpy.run_path()</span></code></a> when executing Python files from disk).</p>
<p>To ensure debuggers and similar tools can reliably update local variables in
scopes affected by this change, <a href="https://docs.python.org/3.13/reference/datamodel.html#frame.f_locals" title="frame.f_locals"><code><span>FrameType.f_locals</span></code></a> now
returns a write-through proxy to the frame’s local and locally referenced
nonlocal variables in these scopes, rather than returning an inconsistently
updated shared <code><span>dict</span></code> instance with undefined runtime semantics.</p>
<p>See <span id="index-26"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a> for more details, including related C API changes
and deprecations. Porting notes are also provided below for the affected
<a href="#pep667-porting-notes-py"><span>Python APIs</span></a> and <a href="#pep667-porting-notes-c"><span>C APIs</span></a>.</p>
<p>(PEP and implementation contributed by Mark Shannon and Tian Gao in
<a href="https://github.com/python/cpython/issues/74929">gh-74929</a>. Documentation updates provided by Guido van Rossum and
Alyssa Coghlan.)</p>
</section>
<section id="support-for-mobile-platforms">
<span id="whatsnew313-platform-support"></span><h3>Support for mobile platforms<a href="#support-for-mobile-platforms" title="Link to this heading">¶</a></h3>
<p><span id="index-27"></span><a href="https://peps.python.org/pep-0730/"><strong>PEP 730</strong></a>: iOS is now a <span id="index-28"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> supported platform, with the
<code><span>arm64-apple-ios</span></code> and <code><span>arm64-apple-ios-simulator</span></code> targets at tier 3
(iPhone and iPad devices released after 2013 and the Xcode iOS simulator
running on Apple silicon hardware, respectively).
<code><span>x86_64-apple-ios-simulator</span></code>
(the Xcode iOS simulator running on older <code><span>x86_64</span></code> hardware)
is not a tier 3 supported platform, but will have best-effort support.
(PEP written and implementation contributed by Russell Keith-Magee in
<a href="https://github.com/python/cpython/issues/114099">gh-114099</a>.)</p>
<p><span id="index-29"></span><a href="https://peps.python.org/pep-0738/"><strong>PEP 738</strong></a>: Android is now a <span id="index-30"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> supported platform, with the
<code><span>aarch64-linux-android</span></code> and <code><span>x86_64-linux-android</span></code> targets at tier 3.
The 32-bit targets <code><span>arm-linux-androideabi</span></code> and <code><span>i686-linux-android</span></code>
are not tier 3 supported platforms, but will have best-effort support.
(PEP written and implementation contributed by Malcolm Smith in
<a href="https://github.com/python/cpython/issues/116622">gh-116622</a>.)</p>

</section>
</section>
<section id="other-language-changes">
<h2>Other Language Changes<a href="#other-language-changes" title="Link to this heading">¶</a></h2>
<ul>
<li><p>The compiler now strips common leading whitespace
from every line in a docstring.
This reduces the size of the <a href="https://docs.python.org/3.13/glossary.html#term-bytecode"><span>bytecode cache</span></a>
(such as <code><span>.pyc</span></code> files), with reductions in file size of around 5%,
for example in <code><span>sqlalchemy.orm.session</span></code> from SQLAlchemy 2.0.
This change affects tools that use docstrings, such as <a href="https://docs.python.org/3.13/library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code><span>doctest</span></code></a>.</p>
<div><div><pre><span></span><span>&gt;&gt;&gt; </span><span>def</span> <span>spam</span><span>():</span>
<span>... </span><span>    </span><span>&#34;&#34;&#34;</span>
<span>... </span><span>        This is a docstring with</span>
<span>... </span><span>          leading whitespace.</span>
<span>...</span>
<span>... </span><span>        It even has multiple paragraphs!</span>
<span>... </span><span>    &#34;&#34;&#34;</span>
<span>...</span>
<span>&gt;&gt;&gt; </span><span>spam</span><span>.</span><span>__doc__</span>
<span>&#39;\nThis is a docstring with\n  leading whitespace.\n\nIt even has multiple paragraphs!\n&#39;</span>
</pre></div>
</div>
<p>(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/81283">gh-81283</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/reference/executionmodel.html#annotation-scopes"><span>Annotation scopes</span></a> within class scopes
can now contain lambdas and comprehensions.
Comprehensions that are located within class scopes
are not inlined into their parent scope.</p>
<div><div><pre><span></span><span>class</span> <span>C</span><span>[</span><span>T</span><span>]:</span>
    <span>type</span> <span>Alias</span> <span>=</span> <span>lambda</span><span>:</span> <span>T</span>
</pre></div>
</div>
<p>(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/109118">gh-109118</a> and <a href="https://github.com/python/cpython/issues/118160">gh-118160</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/reference/simple_stmts.html#future"><span>Future statements</span></a> are no longer triggered by
relative imports of the <a href="https://docs.python.org/3.13/library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code><span>__future__</span></code></a> module,
meaning that statements of the form <code><span>from</span> <span>.__future__</span> <span>import</span> <span>...</span></code>
are now simply standard relative imports, with no special features activated.
(Contributed by Jeremiah Gabriel Pascual in <a href="https://github.com/python/cpython/issues/118216">gh-118216</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/reference/simple_stmts.html#global"><code><span>global</span></code></a> declarations are now permitted in <a href="https://docs.python.org/3.13/reference/compound_stmts.html#except"><code><span>except</span></code></a> blocks
when that global is used in the <a href="https://docs.python.org/3.13/reference/compound_stmts.html#else"><code><span>else</span></code></a> block.
Previously this raised an erroneous <a href="https://docs.python.org/3.13/library/exceptions.html#SyntaxError" title="SyntaxError"><code><span>SyntaxError</span></code></a>.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/111123">gh-111123</a>.)</p></li>
<li><p>Add <span id="index-33"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_FROZEN_MODULES"><code><span>PYTHON_FROZEN_MODULES</span></code></a>, a new environment variable that
determines whether frozen modules are ignored by the import machinery,
equivalent to the <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>frozen_modules</span></code></a> command-line option.
(Contributed by Yilei Yang in <a href="https://github.com/python/cpython/issues/111374">gh-111374</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/howto/perf_profiling.html#perf-profiling"><span>support for the perf profiler</span></a> working
without <a href="https://en.wikipedia.org/wiki/Call_stack">frame pointers</a> through
the new environment variable <span id="index-34"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_PERF_JIT_SUPPORT"><code><span>PYTHON_PERF_JIT_SUPPORT</span></code></a>
and command-line option <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>perf_jit</span></code></a>.
(Contributed by Pablo Galindo in <a href="https://github.com/python/cpython/issues/118518">gh-118518</a>.)</p></li>
<li><p>The location of a <code><span>.python_history</span></code> file can be changed via the
new <span id="index-35"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_HISTORY"><code><span>PYTHON_HISTORY</span></code></a> environment variable.
(Contributed by Levi Sabah, Zackery Spytz and Hugo van Kemenade
in <a href="https://github.com/python/cpython/issues/73965">gh-73965</a>.)</p></li>
<li><p>Classes have a new <a href="https://docs.python.org/3.13/reference/datamodel.html#type.__static_attributes__" title="type.__static_attributes__"><code><span>__static_attributes__</span></code></a> attribute.
This is populated by the compiler with a tuple of the class’s attribute names
which are assigned through <code><span>self.&lt;name&gt;</span></code> from any function in its body.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/115775">gh-115775</a>.)</p></li>
<li><p>The compiler now creates a <code><span>__firstlineno__</span></code> attribute on classes
with the line number of the first line of the class definition.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/118465">gh-118465</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/functions.html#exec" title="exec"><code><span>exec()</span></code></a> and <a href="https://docs.python.org/3.13/library/functions.html#eval" title="eval"><code><span>eval()</span></code></a> builtins now accept
the <em>globals</em> and <em>locals</em> arguments as keywords.
(Contributed by Raphael Gaschignard in <a href="https://github.com/python/cpython/issues/105879">gh-105879</a>)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/functions.html#compile" title="compile"><code><span>compile()</span></code></a> builtin now accepts a new flag,
<code><span>ast.PyCF_OPTIMIZED_AST</span></code>, which is similar to <code><span>ast.PyCF_ONLY_AST</span></code>
except that the returned AST is optimized according to
the value of the <em>optimize</em> argument.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/108113">gh-108113</a>).</p></li>
<li><p>Add a <a href="https://docs.python.org/3.13/library/functions.html#property.__name__" title="property.__name__"><code><span>__name__</span></code></a> attribute on <a href="https://docs.python.org/3.13/library/functions.html#property" title="property"><code><span>property</span></code></a> objects.
(Contributed by Eugene Toder in <a href="https://github.com/python/cpython/issues/101860">gh-101860</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/exceptions.html#PythonFinalizationError" title="PythonFinalizationError"><code><span>PythonFinalizationError</span></code></a>, a new exception derived from
<a href="https://docs.python.org/3.13/library/exceptions.html#RuntimeError" title="RuntimeError"><code><span>RuntimeError</span></code></a> and used to signal when operations are blocked
during <a href="https://docs.python.org/3.13/glossary.html#term-interpreter-shutdown"><span>finalization</span></a>.
The following callables now raise <code><span>PythonFinalizationError</span></code>,
instead of <a href="https://docs.python.org/3.13/library/exceptions.html#RuntimeError" title="RuntimeError"><code><span>RuntimeError</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/_thread.html#thread.start_new_thread" title="_thread.start_new_thread"><code><span>_thread.start_new_thread()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.fork" title="os.fork"><code><span>os.fork()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.forkpty" title="os.forkpty"><code><span>os.forkpty()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/subprocess.html#subprocess.Popen" title="subprocess.Popen"><code><span>subprocess.Popen</span></code></a></p></li>
</ul>
<p>(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/114570">gh-114570</a>.)</p>
</li>
<li><p>Allow the <em>count</em> argument of <a href="https://docs.python.org/3.13/library/stdtypes.html#str.replace" title="str.replace"><code><span>str.replace()</span></code></a> to be a keyword.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/106487">gh-106487</a>.)</p></li>
<li><p>Many functions now emit a warning if a boolean value is passed as
a file descriptor argument.
This can help catch some errors earlier.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/82626">gh-82626</a>.)</p></li>
<li><p>Added <code><span>name</span></code> and <code><span>mode</span></code> attributes
for compressed and archived file-like objects in
the <a href="https://docs.python.org/3.13/library/bz2.html#module-bz2" title="bz2: Interfaces for bzip2 compression and decompression."><code><span>bz2</span></code></a>, <a href="https://docs.python.org/3.13/library/lzma.html#module-lzma" title="lzma: A Python wrapper for the liblzma compression library."><code><span>lzma</span></code></a>, <a href="https://docs.python.org/3.13/library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code><span>tarfile</span></code></a>, and <a href="https://docs.python.org/3.13/library/zipfile.html#module-zipfile" title="zipfile: Read and write ZIP-format archive files."><code><span>zipfile</span></code></a> modules.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/115961">gh-115961</a>.)</p></li>
</ul>
</section>
<section id="new-modules">
<h2>New Modules<a href="#new-modules" title="Link to this heading">¶</a></h2>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/dbm.html#module-dbm.sqlite3" title="dbm.sqlite3: SQLite backend for dbm (All)"><code><span>dbm.sqlite3</span></code></a>: An SQLite backend for <a href="https://docs.python.org/3.13/library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &#34;database&#34; formats."><code><span>dbm</span></code></a>.
(Contributed by Raymond Hettinger and Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/100414">gh-100414</a>.)</p></li>
</ul>
</section>
<section id="improved-modules">
<h2>Improved Modules<a href="#improved-modules" title="Link to this heading">¶</a></h2>
<section id="argparse">
<h3>argparse<a href="#argparse" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <em>deprecated</em> parameter to the
<a href="https://docs.python.org/3.13/library/argparse.html#argparse.ArgumentParser.add_argument" title="argparse.ArgumentParser.add_argument"><code><span>add_argument()</span></code></a>
and <code><span>add_parser()</span></code> methods, to enable deprecating
command-line options, positional arguments, and subcommands.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/83648">gh-83648</a>.)</p></li>
</ul>
</section>
<section id="array">
<h3>array<a href="#array" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <code><span>&#39;w&#39;</span></code> type code (<code><span>Py_UCS4</span></code>) for Unicode characters.
It should be used instead of the deprecated <code><span>&#39;u&#39;</span></code> type code.
(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/80480">gh-80480</a>.)</p></li>
<li><p>Register <a href="https://docs.python.org/3.13/library/array.html#array.array" title="array.array"><code><span>array.array</span></code></a> as a <a href="https://docs.python.org/3.13/library/collections.abc.html#collections.abc.MutableSequence" title="collections.abc.MutableSequence"><code><span>MutableSequence</span></code></a>
by implementing the <a href="https://docs.python.org/3.13/library/array.html#array.array.clear" title="array.array.clear"><code><span>clear()</span></code></a> method.
(Contributed by Mike Zimin in <a href="https://github.com/python/cpython/issues/114894">gh-114894</a>.)</p></li>
</ul>
</section>
<section id="ast">
<h3>ast<a href="#ast" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The constructors of node types in the <a href="https://docs.python.org/3.13/library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code><span>ast</span></code></a> module are now
stricter in the arguments they accept,
with more intuitive behavior when arguments are omitted.</p>
<p>If an optional field on an AST node is not included as an argument when
constructing an instance, the field will now be set to <code><span>None</span></code>. Similarly,
if a list field is omitted, that field will now be set to an empty list,
and if an <code><span>expr_context</span></code> field is omitted, it defaults to
<a href="https://docs.python.org/3.13/library/ast.html#ast.Load" title="ast.Load"><code><span>Load()</span></code></a>.
(Previously, in all cases, the attribute would be missing on the newly
constructed AST node instance.)</p>
<p>In all other cases, where a required argument is omitted,
the node constructor will emit a <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a>.
This will raise an exception in Python 3.15.
Similarly, passing a keyword argument to the constructor
that does not map to a field on the AST node is now deprecated,
and will raise an exception in Python 3.15.</p>
<p>These changes do not apply to user-defined subclasses of <a href="https://docs.python.org/3.13/library/ast.html#ast.AST" title="ast.AST"><code><span>ast.AST</span></code></a>
unless the class opts in to the new behavior
by defining the <a href="https://docs.python.org/3.13/library/ast.html#ast.AST._field_types" title="ast.AST._field_types"><code><span>AST._field_types</span></code></a> mapping.</p>
<p>(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/105858">gh-105858</a>, <a href="https://github.com/python/cpython/issues/117486">gh-117486</a>, and <a href="https://github.com/python/cpython/issues/118851">gh-118851</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/library/ast.html#ast.parse" title="ast.parse"><code><span>ast.parse()</span></code></a> now accepts an optional argument <em>optimize</em>
which is passed on to <a href="https://docs.python.org/3.13/library/functions.html#compile" title="compile"><code><span>compile()</span></code></a>.
This makes it possible to obtain an optimized AST.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/108113">gh-108113</a>.)</p></li>
</ul>
</section>
<section id="asyncio">
<h3>asyncio<a href="#asyncio" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.as_completed" title="asyncio.as_completed"><code><span>asyncio.as_completed()</span></code></a> now returns an object that is both an
<a href="https://docs.python.org/3.13/glossary.html#term-asynchronous-iterator"><span>asynchronous iterator</span></a> and a plain <a href="https://docs.python.org/3.13/glossary.html#term-iterator"><span>iterator</span></a>
of <a href="https://docs.python.org/3.13/glossary.html#term-awaitable"><span>awaitables</span></a>.
The awaitables yielded by asynchronous iteration include original task
or future objects that were passed in,
making it easier to associate results with the tasks being completed.
(Contributed by Justin Arthur in <a href="https://github.com/python/cpython/issues/77714">gh-77714</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/asyncio-eventloop.html#asyncio.loop.create_unix_server" title="asyncio.loop.create_unix_server"><code><span>asyncio.loop.create_unix_server()</span></code></a> will now automatically remove
the Unix socket when the server is closed.
(Contributed by Pierre Ossman in <a href="https://github.com/python/cpython/issues/111246">gh-111246</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/asyncio-protocol.html#asyncio.DatagramTransport.sendto" title="asyncio.DatagramTransport.sendto"><code><span>DatagramTransport.sendto()</span></code></a> will now send zero-length
datagrams if called with an empty bytes object.
The transport flow control also now accounts for the datagram header
when calculating the buffer size.
(Contributed by Jamie Phan in <a href="https://github.com/python/cpython/issues/115199">gh-115199</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/asyncio-queue.html#asyncio.Queue.shutdown" title="asyncio.Queue.shutdown"><code><span>Queue.shutdown</span></code></a>
and <a href="https://docs.python.org/3.13/library/asyncio-queue.html#asyncio.QueueShutDown" title="asyncio.QueueShutDown"><code><span>QueueShutDown</span></code></a> to manage queue termination.
(Contributed by Laurie Opperman and Yves Duprat in <a href="https://github.com/python/cpython/issues/104228">gh-104228</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/library/asyncio-eventloop.html#asyncio.Server.close_clients" title="asyncio.Server.close_clients"><code><span>Server.close_clients()</span></code></a> and <a href="https://docs.python.org/3.13/library/asyncio-eventloop.html#asyncio.Server.abort_clients" title="asyncio.Server.abort_clients"><code><span>Server.abort_clients()</span></code></a>
methods, which more forcefully close an asyncio server.
(Contributed by Pierre Ossman in <a href="https://github.com/python/cpython/issues/113538">gh-113538</a>.)</p></li>
<li><p>Accept a tuple of separators in <a href="https://docs.python.org/3.13/library/asyncio-stream.html#asyncio.StreamReader.readuntil" title="asyncio.StreamReader.readuntil"><code><span>StreamReader.readuntil()</span></code></a>,
stopping when any one of them is encountered.
(Contributed by Bruce Merry in <a href="https://github.com/python/cpython/issues/81322">gh-81322</a>.)</p></li>
<li><p>Improve the behavior of <a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.TaskGroup" title="asyncio.TaskGroup"><code><span>TaskGroup</span></code></a> when
an external cancellation collides with an internal cancellation.
For example, when two task groups are nested
and both experience an exception in a child task simultaneously,
it was possible that the outer task group would hang,
because its internal cancellation was swallowed by the inner task group.</p>
<p>In the case where a task group is cancelled externally
and also must raise an <a href="https://docs.python.org/3.13/library/exceptions.html#ExceptionGroup" title="ExceptionGroup"><code><span>ExceptionGroup</span></code></a>,
it will now call the parent task’s <a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.Task.cancel" title="asyncio.Task.cancel"><code><span>cancel()</span></code></a> method.
This ensures that a <a href="https://docs.python.org/3.13/library/asyncio-exceptions.html#asyncio.CancelledError" title="asyncio.CancelledError"><code><span>CancelledError</span></code></a> will be raised
at the next <a href="https://docs.python.org/3.13/reference/expressions.html#await"><code><span>await</span></code></a>, so the cancellation is not lost.</p>
<p>An added benefit of these changes is that task groups now preserve
the cancellation count (<a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.Task.cancelling" title="asyncio.Task.cancelling"><code><span>cancelling()</span></code></a>).</p>
<p>In order to handle some corner cases, <a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.Task.uncancel" title="asyncio.Task.uncancel"><code><span>uncancel()</span></code></a> may now
reset the undocumented <code><span>_must_cancel</span></code> flag
when the cancellation count reaches zero.</p>
<p>(Inspired by an issue reported by Arthur Tacca in <a href="https://github.com/python/cpython/issues/116720">gh-116720</a>.)</p>
</li>
<li><p>When <a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.TaskGroup.create_task" title="asyncio.TaskGroup.create_task"><code><span>TaskGroup.create_task()</span></code></a> is called on an inactive
<a href="https://docs.python.org/3.13/library/asyncio-task.html#asyncio.TaskGroup" title="asyncio.TaskGroup"><code><span>TaskGroup</span></code></a>, the given coroutine will be closed (which
prevents a <a href="https://docs.python.org/3.13/library/exceptions.html#RuntimeWarning" title="RuntimeWarning"><code><span>RuntimeWarning</span></code></a> about the given coroutine being
never awaited).
(Contributed by Arthur Tacca and Jason Zhang in <a href="https://github.com/python/cpython/issues/115957">gh-115957</a>.)</p></li>
</ul>
</section>
<section id="base64">
<h3>base64<a href="#base64" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/base64.html#base64.z85encode" title="base64.z85encode"><code><span>z85encode()</span></code></a> and <a href="https://docs.python.org/3.13/library/base64.html#base64.z85decode" title="base64.z85decode"><code><span>z85decode()</span></code></a> functions
for encoding <a href="https://docs.python.org/3.13/library/stdtypes.html#bytes" title="bytes"><code><span>bytes</span></code></a> as <a href="https://rfc.zeromq.org/spec/32/">Z85 data</a>
and decoding Z85-encoded data to <code><span>bytes</span></code>.
(Contributed by Matan Perelman in <a href="https://github.com/python/cpython/issues/75299">gh-75299</a>.)</p>
</li>
</ul>
</section>
<section id="compileall">
<h3>compileall<a href="#compileall" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The default number of worker threads and processes is now selected using
<a href="https://docs.python.org/3.13/library/os.html#os.process_cpu_count" title="os.process_cpu_count"><code><span>os.process_cpu_count()</span></code></a> instead of <a href="https://docs.python.org/3.13/library/os.html#os.cpu_count" title="os.cpu_count"><code><span>os.cpu_count()</span></code></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/109649">gh-109649</a>.)</p></li>
</ul>
</section>
<section id="concurrent-futures">
<h3>concurrent.futures<a href="#concurrent-futures" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The default number of worker threads and processes is now selected using
<a href="https://docs.python.org/3.13/library/os.html#os.process_cpu_count" title="os.process_cpu_count"><code><span>os.process_cpu_count()</span></code></a> instead of <a href="https://docs.python.org/3.13/library/os.html#os.cpu_count" title="os.cpu_count"><code><span>os.cpu_count()</span></code></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/109649">gh-109649</a>.)</p></li>
</ul>
</section>
<section id="configparser">
<h3>configparser<a href="#configparser" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/configparser.html#configparser.ConfigParser" title="configparser.ConfigParser"><code><span>ConfigParser</span></code></a> now has support for unnamed sections,
which allows for top-level key-value pairs.
This can be enabled with the new <em>allow_unnamed_section</em> parameter.
(Contributed by Pedro Sousa Lacerda in <a href="https://github.com/python/cpython/issues/66449">gh-66449</a>.)</p></li>
</ul>
</section>
<section id="copy">
<h3>copy<a href="#copy" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The new <a href="https://docs.python.org/3.13/library/copy.html#copy.replace" title="copy.replace"><code><span>replace()</span></code></a> function and the <a href="https://docs.python.org/3.13/library/copy.html#object.__replace__" title="object.__replace__"><code><span>replace</span> <span>protocol</span></code></a> make creating modified copies of objects much simpler.
This is especially useful when working with immutable objects.
The following types support the <a href="https://docs.python.org/3.13/library/copy.html#copy.replace" title="copy.replace"><code><span>replace()</span></code></a> function
and implement the replace protocol:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/collections.html#collections.namedtuple" title="collections.namedtuple"><code><span>collections.namedtuple()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/dataclasses.html#dataclasses.dataclass" title="dataclasses.dataclass"><code><span>dataclasses.dataclass</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/datetime.html#datetime.datetime" title="datetime.datetime"><code><span>datetime.datetime</span></code></a>, <a href="https://docs.python.org/3.13/library/datetime.html#datetime.date" title="datetime.date"><code><span>datetime.date</span></code></a>, <a href="https://docs.python.org/3.13/library/datetime.html#datetime.time" title="datetime.time"><code><span>datetime.time</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/inspect.html#inspect.Signature" title="inspect.Signature"><code><span>inspect.Signature</span></code></a>, <a href="https://docs.python.org/3.13/library/inspect.html#inspect.Parameter" title="inspect.Parameter"><code><span>inspect.Parameter</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/types.html#types.SimpleNamespace" title="types.SimpleNamespace"><code><span>types.SimpleNamespace</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/reference/datamodel.html#code-objects"><span>code objects</span></a></p></li>
</ul>
<p>Any user-defined class can also support <a href="https://docs.python.org/3.13/library/copy.html#copy.replace" title="copy.replace"><code><span>copy.replace()</span></code></a> by defining
the <a href="https://docs.python.org/3.13/library/copy.html#object.__replace__" title="object.__replace__"><code><span>__replace__()</span></code></a> method.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/108751">gh-108751</a>.)</p>
</li>
</ul>
</section>
<section id="ctypes">
<h3>ctypes<a href="#ctypes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>As a consequence of necessary internal refactoring, initialization of
internal metaclasses now happens in <code><span>__init__</span></code> rather
than in <code><span>__new__</span></code>. This affects projects that subclass these internal
metaclasses to provide custom initialization.
Generally:</p>
<ul>
<li><p>Custom logic that was done in <code><span>__new__</span></code> after calling <code><span>super().__new__</span></code>
should be moved to <code><span>__init__</span></code>.</p></li>
<li><p>To create a class, call the metaclass, not only the metaclass’s
<code><span>__new__</span></code> method.</p></li>
</ul>
<p>See <a href="https://github.com/python/cpython/issues/124520">gh-124520</a> for discussion and links to changes in some affected
projects.</p>
</li>
</ul>
</section>
<section id="dbm">
<h3>dbm<a href="#dbm" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/dbm.html#module-dbm.sqlite3" title="dbm.sqlite3: SQLite backend for dbm (All)"><code><span>dbm.sqlite3</span></code></a>, a new module which implements an SQLite backend,
and make it the default <code><span>dbm</span></code> backend.
(Contributed by Raymond Hettinger and Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/100414">gh-100414</a>.)</p></li>
<li><p>Allow removing all items from the database through
the new <a href="https://docs.python.org/3.13/library/dbm.html#dbm.gnu.gdbm.clear" title="dbm.gnu.gdbm.clear"><code><span>gdbm.clear()</span></code></a> and <a href="https://docs.python.org/3.13/library/dbm.html#dbm.ndbm.ndbm.clear" title="dbm.ndbm.ndbm.clear"><code><span>ndbm.clear()</span></code></a> methods.
(Contributed by Donghee Na in <a href="https://github.com/python/cpython/issues/107122">gh-107122</a>.)</p></li>
</ul>
</section>
<section id="dis">
<h3>dis<a href="#dis" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Change the output of <a href="https://docs.python.org/3.13/library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code><span>dis</span></code></a> module functions to show logical
labels for jump targets and exception handlers, rather than offsets.
The offsets can be added with the new
<a href="https://docs.python.org/3.13/library/dis.html#cmdoption-dis-O"><code><span>-O</span></code></a> command-line option
or the <em>show_offsets</em> argument.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/112137">gh-112137</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/dis.html#dis.get_instructions" title="dis.get_instructions"><code><span>get_instructions()</span></code></a> no longer represents cache entries
as separate instructions.
Instead, it returns them as part of the <a href="https://docs.python.org/3.13/library/dis.html#dis.Instruction" title="dis.Instruction"><code><span>Instruction</span></code></a>,
in the new <em>cache_info</em> field.
The <em>show_caches</em> argument to <a href="https://docs.python.org/3.13/library/dis.html#dis.get_instructions" title="dis.get_instructions"><code><span>get_instructions()</span></code></a> is deprecated
and no longer has any effect.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/112962">gh-112962</a>.)</p></li>
</ul>
</section>
<section id="doctest">
<span id="whatsnew313-doctest"></span><h3>doctest<a href="#doctest" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code><span>doctest</span></code></a> output is now colored by default.
This can be controlled via the new <span id="index-36"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_COLORS"><code><span>PYTHON_COLORS</span></code></a> environment
variable as well as the canonical <a href="https://no-color.org/"><code><span>NO_COLOR</span></code></a>
and <a href="https://force-color.org/"><code><span>FORCE_COLOR</span></code></a> environment variables.
See also <a href="https://docs.python.org/3.13/using/cmdline.html#using-on-controlling-color"><span>Controlling color</span></a>.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/117225">gh-117225</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/doctest.html#doctest.DocTestRunner.run" title="doctest.DocTestRunner.run"><code><span>DocTestRunner.run()</span></code></a> method now counts the number of skipped tests.
Add the <a href="https://docs.python.org/3.13/library/doctest.html#doctest.DocTestRunner.skips" title="doctest.DocTestRunner.skips"><code><span>DocTestRunner.skips</span></code></a> and <a href="https://docs.python.org/3.13/library/doctest.html#doctest.TestResults.skipped" title="doctest.TestResults.skipped"><code><span>TestResults.skipped</span></code></a> attributes.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108794">gh-108794</a>.)</p></li>
</ul>
</section>
<section id="email">
<h3>email<a href="#email" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Headers with embedded newlines are now quoted on output.
The <a href="https://docs.python.org/3.13/library/email.generator.html#module-email.generator" title="email.generator: Generate flat text email messages from a message structure."><code><span>generator</span></code></a> will now refuse to serialize (write) headers
that are improperly folded or delimited, such that they would be parsed as
multiple headers or joined with adjacent data.
If you need to turn this safety feature off,
set <a href="https://docs.python.org/3.13/library/email.policy.html#email.policy.Policy.verify_generated_headers" title="email.policy.Policy.verify_generated_headers"><code><span>verify_generated_headers</span></code></a>.
(Contributed by Bas Bloemsaat and Petr Viktorin in <a href="https://github.com/python/cpython/issues/121650">gh-121650</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/email.utils.html#email.utils.getaddresses" title="email.utils.getaddresses"><code><span>getaddresses()</span></code></a> and <a href="https://docs.python.org/3.13/library/email.utils.html#email.utils.parseaddr" title="email.utils.parseaddr"><code><span>parseaddr()</span></code></a> now
return <code><span>(&#39;&#39;,</span> <span>&#39;&#39;)</span></code> pairs in more situations where invalid email addresses
are encountered instead of potentially inaccurate values.
The two functions have a new optional <em>strict</em> parameter (default <code><span>True</span></code>).
To get the old behavior (accepting malformed input), use <code><span>strict=False</span></code>.
<code><span>getattr(email.utils,</span> <span>&#39;supports_strict_parsing&#39;,</span> <span>False)</span></code> can be used
to check if the <em>strict</em> parameter is available.
(Contributed by Thomas Dwyer and Victor Stinner for <a href="https://github.com/python/cpython/issues/102988">gh-102988</a> to improve
the <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-27043">CVE-2023-27043</a> fix.)</p></li>
</ul>
</section>
<section id="fractions">
<h3>fractions<a href="#fractions" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/fractions.html#fractions.Fraction" title="fractions.Fraction"><code><span>Fraction</span></code></a> objects now support the standard
<a href="https://docs.python.org/3.13/library/string.html#formatspec"><span>format specification mini-language</span></a> rules
for fill, alignment, sign handling, minimum width, and grouping.
(Contributed by Mark Dickinson in <a href="https://github.com/python/cpython/issues/111320">gh-111320</a>.)</p></li>
</ul>
</section>
<section id="glob">
<h3>glob<a href="#glob" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/glob.html#glob.translate" title="glob.translate"><code><span>translate()</span></code></a>, a function to convert a path specification
with shell-style wildcards to a regular expression.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/72904">gh-72904</a>.)</p></li>
</ul>
</section>
<section id="importlib">
<h3>importlib<a href="#importlib" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The following functions in <a href="https://docs.python.org/3.13/library/importlib.resources.html#module-importlib.resources" title="importlib.resources: Package resource reading, opening, and access"><code><span>importlib.resources</span></code></a> now allow accessing
a directory (or tree) of resources, using multiple positional arguments
(the <em>encoding</em> and <em>errors</em> arguments in the text-reading functions
are now keyword-only):</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.is_resource" title="importlib.resources.is_resource"><code><span>is_resource()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.open_binary" title="importlib.resources.open_binary"><code><span>open_binary()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.open_text" title="importlib.resources.open_text"><code><span>open_text()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.path" title="importlib.resources.path"><code><span>path()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.read_binary" title="importlib.resources.read_binary"><code><span>read_binary()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.read_text" title="importlib.resources.read_text"><code><span>read_text()</span></code></a></p></li>
</ul>
<p>These functions are no longer deprecated and are not scheduled for removal.
(Contributed by Petr Viktorin in <a href="https://github.com/python/cpython/issues/106532">gh-106532</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.html#importlib.resources.contents" title="importlib.resources.contents"><code><span>contents()</span></code></a> remains deprecated in favor of
the fully-featured <a href="https://docs.python.org/3.13/library/importlib.resources.abc.html#importlib.resources.abc.Traversable" title="importlib.resources.abc.Traversable"><code><span>Traversable</span></code></a> API.
However, there is now no plan to remove it.
(Contributed by Petr Viktorin in <a href="https://github.com/python/cpython/issues/106532">gh-106532</a>.)</p></li>
</ul>
</section>
<section id="io">
<h3>io<a href="#io" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/io.html#io.IOBase" title="io.IOBase"><code><span>IOBase</span></code></a> finalizer now logs any errors raised by
the <a href="https://docs.python.org/3.13/library/io.html#io.IOBase.close" title="io.IOBase.close"><code><span>close()</span></code></a> method with <a href="https://docs.python.org/3.13/library/sys.html#sys.unraisablehook" title="sys.unraisablehook"><code><span>sys.unraisablehook</span></code></a>.
Previously, errors were ignored silently by default,
and only logged in <a href="https://docs.python.org/3.13/library/devmode.html#devmode"><span>Python Development Mode</span></a>
or when using a <a href="https://docs.python.org/3.13/using/configure.html#debug-build"><span>Python debug build</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/62948">gh-62948</a>.)</p></li>
</ul>
</section>
<section id="ipaddress">
<h3>ipaddress<a href="#ipaddress" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <a href="https://docs.python.org/3.13/library/ipaddress.html#ipaddress.IPv4Address.ipv6_mapped" title="ipaddress.IPv4Address.ipv6_mapped"><code><span>IPv4Address.ipv6_mapped</span></code></a> property,
which returns the IPv4-mapped IPv6 address.
(Contributed by Charles Machalow in <a href="https://github.com/python/cpython/issues/109466">gh-109466</a>.)</p></li>
<li><p>Fix <code><span>is_global</span></code> and <code><span>is_private</span></code> behavior in
<a href="https://docs.python.org/3.13/library/ipaddress.html#ipaddress.IPv4Address" title="ipaddress.IPv4Address"><code><span>IPv4Address</span></code></a>, <a href="https://docs.python.org/3.13/library/ipaddress.html#ipaddress.IPv6Address" title="ipaddress.IPv6Address"><code><span>IPv6Address</span></code></a>,
<a href="https://docs.python.org/3.13/library/ipaddress.html#ipaddress.IPv4Network" title="ipaddress.IPv4Network"><code><span>IPv4Network</span></code></a>, and <a href="https://docs.python.org/3.13/library/ipaddress.html#ipaddress.IPv6Network" title="ipaddress.IPv6Network"><code><span>IPv6Network</span></code></a>.
(Contributed by Jakub Stasiak in <a href="https://github.com/python/cpython/issues/113171">gh-113171</a>.)</p></li>
</ul>
</section>
<section id="itertools">
<h3>itertools<a href="#itertools" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/itertools.html#itertools.batched" title="itertools.batched"><code><span>batched()</span></code></a> has a new <em>strict</em> parameter,
which raises a <a href="https://docs.python.org/3.13/library/exceptions.html#ValueError" title="ValueError"><code><span>ValueError</span></code></a> if the final batch is shorter
than the specified batch size.
(Contributed by Raymond Hettinger in <a href="https://github.com/python/cpython/issues/113202">gh-113202</a>.)</p></li>
</ul>
</section>
<section id="marshal">
<h3>marshal<a href="#marshal" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <em>allow_code</em> parameter in module functions.
Passing <code><span>allow_code=False</span></code> prevents serialization and de-serialization
of code objects which are incompatible between Python versions.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/113626">gh-113626</a>.)</p></li>
</ul>
</section>
<section id="math">
<h3>math<a href="#math" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The new function <a href="https://docs.python.org/3.13/library/math.html#math.fma" title="math.fma"><code><span>fma()</span></code></a> performs fused multiply-add operations.
This computes <code><span>x</span> <span>*</span> <span>y</span> <span>+</span> <span>z</span></code> with only a single round,
and so avoids any intermediate loss of precision.
It wraps the <code><span>fma()</span></code> function provided by C99,
and follows the specification of the IEEE 754 “fusedMultiplyAdd” operation
for special cases.
(Contributed by Mark Dickinson and Victor Stinner in <a href="https://github.com/python/cpython/issues/73468">gh-73468</a>.)</p></li>
</ul>
</section>
<section id="mimetypes">
<h3>mimetypes<a href="#mimetypes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <a href="https://docs.python.org/3.13/library/mimetypes.html#mimetypes.guess_file_type" title="mimetypes.guess_file_type"><code><span>guess_file_type()</span></code></a> function to guess a MIME type
from a filesystem path.
Using paths with <a href="https://docs.python.org/3.13/library/mimetypes.html#mimetypes.guess_type" title="mimetypes.guess_type"><code><span>guess_type()</span></code></a> is now <a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>soft deprecated</span></a>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/66543">gh-66543</a>.)</p></li>
</ul>
</section>
<section id="mmap">
<h3>mmap<a href="#mmap" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/mmap.html#mmap.mmap" title="mmap.mmap"><code><span>mmap</span></code></a> is now protected from crashing on Windows when the
mapped memory is inaccessible due to file system errors or access violations.
(Contributed by Jannis Weigend in <a href="https://github.com/python/cpython/issues/118209">gh-118209</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/mmap.html#mmap.mmap" title="mmap.mmap"><code><span>mmap</span></code></a> has a new <a href="https://docs.python.org/3.13/library/mmap.html#mmap.mmap.seekable" title="mmap.mmap.seekable"><code><span>seekable()</span></code></a> method
that can be used when a seekable file-like object is required.
The <a href="https://docs.python.org/3.13/library/mmap.html#mmap.mmap.seek" title="mmap.mmap.seek"><code><span>seek()</span></code></a> method now returns the new absolute position.
(Contributed by Donghee Na and Sylvie Liberman in <a href="https://github.com/python/cpython/issues/111835">gh-111835</a>.)</p></li>
<li><p>The new UNIX-only <em>trackfd</em> parameter for <a href="https://docs.python.org/3.13/library/mmap.html#mmap.mmap" title="mmap.mmap"><code><span>mmap</span></code></a> controls
file descriptor duplication;
if false, the file descriptor specified by <em>fileno</em> will not be duplicated.
(Contributed by Zackery Spytz and Petr Viktorin in <a href="https://github.com/python/cpython/issues/78502">gh-78502</a>.)</p></li>
</ul>
</section>
<section id="multiprocessing">
<h3>multiprocessing<a href="#multiprocessing" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The default number of worker threads and processes is now selected using
<a href="https://docs.python.org/3.13/library/os.html#os.process_cpu_count" title="os.process_cpu_count"><code><span>os.process_cpu_count()</span></code></a> instead of <a href="https://docs.python.org/3.13/library/os.html#os.cpu_count" title="os.cpu_count"><code><span>os.cpu_count()</span></code></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/109649">gh-109649</a>.)</p></li>
</ul>
</section>
<section id="os">
<h3>os<a href="#os" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/os.html#os.process_cpu_count" title="os.process_cpu_count"><code><span>process_cpu_count()</span></code></a> function to get the number
of logical CPU cores usable by the calling thread of the current process.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/109649">gh-109649</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.cpu_count" title="os.cpu_count"><code><span>cpu_count()</span></code></a> and <a href="https://docs.python.org/3.13/library/os.html#os.process_cpu_count" title="os.process_cpu_count"><code><span>process_cpu_count()</span></code></a> can be overridden
through the new environment variable <span id="index-37"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHON_CPU_COUNT"><code><span>PYTHON_CPU_COUNT</span></code></a>
or the new command-line option <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>cpu_count</span></code></a>.
This option is useful for users who need to limit CPU resources
of a container system without having to modify application code
or the container itself.
(Contributed by Donghee Na in <a href="https://github.com/python/cpython/issues/109595">gh-109595</a>.)</p></li>
<li><p>Add a <a href="https://docs.python.org/3.13/library/os.html#os-timerfd"><span>low level interface</span></a> to Linux’s
<em><a href="https://manpages.debian.org/timerfd_create(2)">timer file descriptors</a></em>
via <a href="https://docs.python.org/3.13/library/os.html#os.timerfd_create" title="os.timerfd_create"><code><span>timerfd_create()</span></code></a>,
<a href="https://docs.python.org/3.13/library/os.html#os.timerfd_settime" title="os.timerfd_settime"><code><span>timerfd_settime()</span></code></a>, <a href="https://docs.python.org/3.13/library/os.html#os.timerfd_settime_ns" title="os.timerfd_settime_ns"><code><span>timerfd_settime_ns()</span></code></a>,
<a href="https://docs.python.org/3.13/library/os.html#os.timerfd_gettime" title="os.timerfd_gettime"><code><span>timerfd_gettime()</span></code></a>, <a href="https://docs.python.org/3.13/library/os.html#os.timerfd_gettime_ns" title="os.timerfd_gettime_ns"><code><span>timerfd_gettime_ns()</span></code></a>,
<a href="https://docs.python.org/3.13/library/os.html#os.TFD_NONBLOCK" title="os.TFD_NONBLOCK"><code><span>TFD_NONBLOCK</span></code></a>, <a href="https://docs.python.org/3.13/library/os.html#os.TFD_CLOEXEC" title="os.TFD_CLOEXEC"><code><span>TFD_CLOEXEC</span></code></a>,
<a href="https://docs.python.org/3.13/library/os.html#os.TFD_TIMER_ABSTIME" title="os.TFD_TIMER_ABSTIME"><code><span>TFD_TIMER_ABSTIME</span></code></a>, and <a href="https://docs.python.org/3.13/library/os.html#os.TFD_TIMER_CANCEL_ON_SET" title="os.TFD_TIMER_CANCEL_ON_SET"><code><span>TFD_TIMER_CANCEL_ON_SET</span></code></a>
(Contributed by Masaru Tsuchiyama in <a href="https://github.com/python/cpython/issues/108277">gh-108277</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.lchmod" title="os.lchmod"><code><span>lchmod()</span></code></a> and the <em>follow_symlinks</em> argument of <a href="https://docs.python.org/3.13/library/os.html#os.chmod" title="os.chmod"><code><span>chmod()</span></code></a>
are both now available on Windows.
Note that the default value of <em>follow_symlinks</em>
in <code><span>lchmod()</span></code> is <code><span>False</span></code> on Windows.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/59616">gh-59616</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.fchmod" title="os.fchmod"><code><span>fchmod()</span></code></a> and support for file descriptors in <a href="https://docs.python.org/3.13/library/os.html#os.chmod" title="os.chmod"><code><span>chmod()</span></code></a>
are both now available on Windows.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/113191">gh-113191</a>.)</p></li>
<li><p>On Windows, <a href="https://docs.python.org/3.13/library/os.html#os.mkdir" title="os.mkdir"><code><span>mkdir()</span></code></a> and <a href="https://docs.python.org/3.13/library/os.html#os.makedirs" title="os.makedirs"><code><span>makedirs()</span></code></a> now support passing
a <em>mode</em> value of <code><span>0o700</span></code> to apply access control to the new directory.
This implicitly affects <a href="https://docs.python.org/3.13/library/tempfile.html#tempfile.mkdtemp" title="tempfile.mkdtemp"><code><span>tempfile.mkdtemp()</span></code></a>
and is a mitigation for <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-4030">CVE-2024-4030</a>.
Other values for <em>mode</em> continue to be ignored.
(Contributed by Steve Dower in <a href="https://github.com/python/cpython/issues/118486">gh-118486</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a> now accepts <code><span>None</span></code> for the <em>env</em> argument,
which makes the newly spawned process use the current process environment.
(Contributed by Jakub Kulik in <a href="https://github.com/python/cpython/issues/113119">gh-113119</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a> can now use the <a href="https://docs.python.org/3.13/library/os.html#os.POSIX_SPAWN_CLOSEFROM" title="os.POSIX_SPAWN_CLOSEFROM"><code><span>POSIX_SPAWN_CLOSEFROM</span></code></a>
attribute in the <em>file_actions</em> parameter on platforms that support
<code><span>posix_spawn_file_actions_addclosefrom_np()</span></code>.
(Contributed by Jakub Kulik in <a href="https://github.com/python/cpython/issues/113117">gh-113117</a>.)</p></li>
</ul>
</section>
<section id="os-path">
<h3>os.path<a href="#os-path" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/os.path.html#os.path.isreserved" title="os.path.isreserved"><code><span>isreserved()</span></code></a> to check if a path is reserved
on the current system.
This function is only available on Windows.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/88569">gh-88569</a>.)</p></li>
<li><p>On Windows, <a href="https://docs.python.org/3.13/library/os.path.html#os.path.isabs" title="os.path.isabs"><code><span>isabs()</span></code></a> no longer considers paths
starting with exactly one slash (<code><span>\</span></code> or <code><span>/</span></code>) to be absolute.
(Contributed by Barney Gale and Jon Foster in <a href="https://github.com/python/cpython/issues/44626">gh-44626</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.path.html#os.path.realpath" title="os.path.realpath"><code><span>realpath()</span></code></a> now resolves MS-DOS style file names
even if the file is not accessible.
(Contributed by Moonsik Park in <a href="https://github.com/python/cpython/issues/82367">gh-82367</a>.)</p></li>
</ul>
</section>
<section id="pathlib">
<h3>pathlib<a href="#pathlib" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.UnsupportedOperation" title="pathlib.UnsupportedOperation"><code><span>UnsupportedOperation</span></code></a>, which is raised instead of
<a href="https://docs.python.org/3.13/library/exceptions.html#NotImplementedError" title="NotImplementedError"><code><span>NotImplementedError</span></code></a> when a path operation isn’t supported.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/89812">gh-89812</a>.)</p></li>
<li><p>Add a new constructor for creating <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path" title="pathlib.Path"><code><span>Path</span></code></a> objects
from ‘file’ URIs (<code><span>file:///</span></code>), <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.from_uri" title="pathlib.Path.from_uri"><code><span>Path.from_uri()</span></code></a>.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/107465">gh-107465</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.full_match" title="pathlib.PurePath.full_match"><code><span>PurePath.full_match()</span></code></a> for matching paths with
shell-style wildcards, including the recursive wildcard “<code><span>**</span></code>”.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/73435">gh-73435</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.parser" title="pathlib.PurePath.parser"><code><span>PurePath.parser</span></code></a> class attribute to store the
implementation of <a href="https://docs.python.org/3.13/library/os.path.html#module-os.path" title="os.path: Operations on pathnames."><code><span>os.path</span></code></a> used
for low-level path parsing and joining.
This will be either <code><span>posixpath</span></code> or <code><span>ntpath</span></code>.</p></li>
<li><p>Add <em>recurse_symlinks</em> keyword-only argument to
<a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.glob" title="pathlib.Path.glob"><code><span>Path.glob()</span></code></a> and <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.rglob" title="pathlib.Path.rglob"><code><span>rglob()</span></code></a>.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/77609">gh-77609</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.glob" title="pathlib.Path.glob"><code><span>Path.glob()</span></code></a> and <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.rglob" title="pathlib.Path.rglob"><code><span>rglob()</span></code></a>
now return files and directories when given a pattern that ends with “<code><span>**</span></code>”.
Previously, only directories were returned.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/70303">gh-70303</a>.)</p></li>
<li><p>Add the <em>follow_symlinks</em> keyword-only argument to
<a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.is_file" title="pathlib.Path.is_file"><code><span>Path.is_file</span></code></a>,
<a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.is_dir" title="pathlib.Path.is_dir"><code><span>Path.is_dir</span></code></a>,
<a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.owner" title="pathlib.Path.owner"><code><span>Path.owner()</span></code></a>, and <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.group" title="pathlib.Path.group"><code><span>Path.group()</span></code></a>.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/105793">gh-105793</a> and Kamil Turek in <a href="https://github.com/python/cpython/issues/107962">gh-107962</a>.)</p></li>
</ul>
</section>
<section id="pdb">
<h3>pdb<a href="#pdb" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/functions.html#breakpoint" title="breakpoint"><code><span>breakpoint()</span></code></a> and <a href="https://docs.python.org/3.13/library/pdb.html#pdb.set_trace" title="pdb.set_trace"><code><span>set_trace()</span></code></a> now enter the debugger immediately
rather than on the next line of code to be executed. This change prevents the
debugger from breaking outside of the context when <code><span>breakpoint()</span></code> is positioned
at the end of the context.
(Contributed by Tian Gao in <a href="https://github.com/python/cpython/issues/118579">gh-118579</a>.)</p></li>
<li><p><code><span>sys.path[0]</span></code> is no longer replaced by the directory of the script
being debugged when <a href="https://docs.python.org/3.13/library/sys.html#sys.flags.safe_path" title="sys.flags.safe_path"><code><span>sys.flags.safe_path</span></code></a> is set.
(Contributed by Tian Gao and Christian Walther in <a href="https://github.com/python/cpython/issues/111762">gh-111762</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/zipapp.html#module-zipapp" title="zipapp: Manage executable Python zip archives"><code><span>zipapp</span></code></a> is now supported as a debugging target.
(Contributed by Tian Gao in <a href="https://github.com/python/cpython/issues/118501">gh-118501</a>.)</p></li>
<li><p>Add ability to move between chained exceptions during
post-mortem debugging in <a href="https://docs.python.org/3.13/library/pdb.html#pdb.pm" title="pdb.pm"><code><span>pm()</span></code></a> using
the new <a href="https://docs.python.org/3.13/library/pdb.html#pdbcommand-exceptions"><code><span>exceptions</span> <span>[exc_number]</span></code></a> command for Pdb.
(Contributed by Matthias Bussonnier in <a href="https://github.com/python/cpython/issues/106676">gh-106676</a>.)</p></li>
<li><p>Expressions and statements whose prefix is a pdb command are now correctly
identified and executed.
(Contributed by Tian Gao in <a href="https://github.com/python/cpython/issues/108464">gh-108464</a>.)</p></li>
</ul>
</section>
<section id="queue">
<h3>queue<a href="#queue" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/queue.html#queue.Queue.shutdown" title="queue.Queue.shutdown"><code><span>Queue.shutdown</span></code></a> and <a href="https://docs.python.org/3.13/library/queue.html#queue.ShutDown" title="queue.ShutDown"><code><span>ShutDown</span></code></a>
to manage queue termination.
(Contributed by Laurie Opperman and Yves Duprat in <a href="https://github.com/python/cpython/issues/104750">gh-104750</a>.)</p></li>
</ul>
</section>
<section id="random">
<h3>random<a href="#random" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add a <a href="https://docs.python.org/3.13/library/random.html#random-cli"><span>command-line interface</span></a>.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/118131">gh-118131</a>.)</p></li>
</ul>
</section>
<section id="re">
<h3>re<a href="#re" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Rename <code><span>re.error</span></code> to <a href="https://docs.python.org/3.13/library/re.html#re.PatternError" title="re.PatternError"><code><span>PatternError</span></code></a> for improved clarity.
<code><span>re.error</span></code> is kept for backward compatibility.</p></li>
</ul>
</section>
<section id="shutil">
<h3>shutil<a href="#shutil" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Support the <em>dir_fd</em> and <em>follow_symlinks</em> keyword arguments
in <a href="https://docs.python.org/3.13/library/shutil.html#shutil.chown" title="shutil.chown"><code><span>chown()</span></code></a>.
(Contributed by Berker Peksag and Tahia K in <a href="https://github.com/python/cpython/issues/62308">gh-62308</a>)</p></li>
</ul>
</section>
<section id="site">
<h3>site<a href="#site" title="Link to this heading">¶</a></h3>
<ul>
<li><p><code><span>.pth</span></code> files are now decoded using UTF-8 first,
and then with the <a href="https://docs.python.org/3.13/glossary.html#term-locale-encoding"><span>locale encoding</span></a> if UTF-8 decoding fails.
(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/117802">gh-117802</a>.)</p></li>
</ul>
</section>
<section id="sqlite3">
<h3>sqlite3<a href="#sqlite3" title="Link to this heading">¶</a></h3>
<ul>
<li><p>A <a href="https://docs.python.org/3.13/library/exceptions.html#ResourceWarning" title="ResourceWarning"><code><span>ResourceWarning</span></code></a> is now emitted if a <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code><span>Connection</span></code></a>
object is not <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.close" title="sqlite3.Connection.close"><code><span>closed</span></code></a> explicitly.
(Contributed by Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/105539">gh-105539</a>.)</p></li>
<li><p>Add the <em>filter</em> keyword-only parameter to <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.iterdump" title="sqlite3.Connection.iterdump"><code><span>Connection.iterdump()</span></code></a>
for filtering database objects to dump.
(Contributed by Mariusz Felisiak in <a href="https://github.com/python/cpython/issues/91602">gh-91602</a>.)</p></li>
</ul>
</section>
<section id="ssl">
<h3>ssl<a href="#ssl" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code><span>create_default_context()</span></code></a> API now includes
<a href="https://docs.python.org/3.13/library/ssl.html#ssl.VERIFY_X509_PARTIAL_CHAIN" title="ssl.VERIFY_X509_PARTIAL_CHAIN"><code><span>VERIFY_X509_PARTIAL_CHAIN</span></code></a> and <a href="https://docs.python.org/3.13/library/ssl.html#ssl.VERIFY_X509_STRICT" title="ssl.VERIFY_X509_STRICT"><code><span>VERIFY_X509_STRICT</span></code></a>
in its default flags.</p>
<div>
<p>Note</p>
<p><a href="https://docs.python.org/3.13/library/ssl.html#ssl.VERIFY_X509_STRICT" title="ssl.VERIFY_X509_STRICT"><code><span>VERIFY_X509_STRICT</span></code></a> may reject pre-<span id="index-38"></span><a href="https://datatracker.ietf.org/doc/html/rfc5280.html"><strong>RFC 5280</strong></a>
or malformed certificates that the underlying OpenSSL implementation
might otherwise accept.
Whilst disabling this is not recommended, you can do so using:</p>
<div><div><pre><span></span><span>import</span> <span>ssl</span>

<span>ctx</span> <span>=</span> <span>ssl</span><span>.</span><span>create_default_context</span><span>()</span>
<span>ctx</span><span>.</span><span>verify_flags</span> <span>&amp;=</span> <span>~</span><span>ssl</span><span>.</span><span>VERIFY_X509_STRICT</span>
</pre></div>
</div>
</div>
<p>(Contributed by William Woodruff in <a href="https://github.com/python/cpython/issues/112389">gh-112389</a>.)</p>
</li>
</ul>
</section>
<section id="statistics">
<h3>statistics<a href="#statistics" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/statistics.html#statistics.kde" title="statistics.kde"><code><span>kde()</span></code></a> for kernel density estimation.
This makes it possible to estimate a continuous probability density function
from a fixed number of discrete samples.
(Contributed by Raymond Hettinger in <a href="https://github.com/python/cpython/issues/115863">gh-115863</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/statistics.html#statistics.kde_random" title="statistics.kde_random"><code><span>kde_random()</span></code></a> for sampling from an
estimated probability density function created by <a href="https://docs.python.org/3.13/library/statistics.html#statistics.kde" title="statistics.kde"><code><span>kde()</span></code></a>.
(Contributed by Raymond Hettinger in <a href="https://github.com/python/cpython/issues/115863">gh-115863</a>.)</p></li>
</ul>
</section>
<section id="subprocess">
<span id="whatsnew313-subprocess"></span><h3>subprocess<a href="#subprocess" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code><span>subprocess</span></code></a> module now uses the <a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a> function in
more situations.</p>
<p>Notably, when <em>close_fds</em> is <code><span>True</span></code> (the default),
<a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a> will be used when the C library provides
<code><span>posix_spawn_file_actions_addclosefrom_np()</span></code>,
which includes recent versions of Linux, FreeBSD, and Solaris.
On Linux, this should perform similarly to the existing
Linux <code><span>vfork()</span></code> based code.</p>
<p>A private control knob <code><span>subprocess._USE_POSIX_SPAWN</span></code> can
be set to <code><span>False</span></code> if you need to force <a href="https://docs.python.org/3.13/library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code><span>subprocess</span></code></a>
to never use <a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a>.
Please report your reason and platform details in
the <a href="https://docs.python.org/3.13/bugs.html#using-the-tracker"><span>issue tracker</span></a> if you set this
so that we can improve our API selection logic for everyone.
(Contributed by Jakub Kulik in <a href="https://github.com/python/cpython/issues/113117">gh-113117</a>.)</p>
</li>
</ul>
</section>
<section id="sys">
<h3>sys<a href="#sys" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <a href="https://docs.python.org/3.13/library/sys.html#sys._is_interned" title="sys._is_interned"><code><span>_is_interned()</span></code></a> function to test if a string was interned.
This function is not guaranteed to exist in all implementations of Python.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/78573">gh-78573</a>.)</p></li>
</ul>
</section>
<section id="tempfile">
<h3>tempfile<a href="#tempfile" title="Link to this heading">¶</a></h3>
<ul>
<li><p>On Windows, the default mode <code><span>0o700</span></code> used by <a href="https://docs.python.org/3.13/library/tempfile.html#tempfile.mkdtemp" title="tempfile.mkdtemp"><code><span>tempfile.mkdtemp()</span></code></a> now
limits access to the new directory due to changes to <a href="https://docs.python.org/3.13/library/os.html#os.mkdir" title="os.mkdir"><code><span>os.mkdir()</span></code></a>.
This is a mitigation for <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-4030">CVE-2024-4030</a>.
(Contributed by Steve Dower in <a href="https://github.com/python/cpython/issues/118486">gh-118486</a>.)</p></li>
</ul>
</section>
<section id="time">
<h3>time<a href="#time" title="Link to this heading">¶</a></h3>
<ul>
<li><p>On Windows, <a href="https://docs.python.org/3.13/library/time.html#time.monotonic" title="time.monotonic"><code><span>monotonic()</span></code></a> now uses the
<code><span>QueryPerformanceCounter()</span></code> clock for a resolution of 1 microsecond,
instead of the <code><span>GetTickCount64()</span></code> clock which has
a resolution of 15.6 milliseconds.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/88494">gh-88494</a>.)</p></li>
<li><p>On Windows, <a href="https://docs.python.org/3.13/library/time.html#time.time" title="time.time"><code><span>time()</span></code></a> now uses the
<code><span>GetSystemTimePreciseAsFileTime()</span></code> clock for a resolution of 1 microsecond,
instead of the <code><span>GetSystemTimeAsFileTime()</span></code> clock which has
a resolution of 15.6 milliseconds.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/63207">gh-63207</a>.)</p></li>
</ul>
</section>
<section id="tkinter">
<h3>tkinter<a href="#tkinter" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add <a href="https://docs.python.org/3.13/library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code><span>tkinter</span></code></a> widget methods:
<code><span>tk_busy_hold()</span></code>, <code><span>tk_busy_configure()</span></code>,
<code><span>tk_busy_cget()</span></code>, <code><span>tk_busy_forget()</span></code>,
<code><span>tk_busy_current()</span></code>, and <code><span>tk_busy_status()</span></code>.
(Contributed by Miguel, klappnase and Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/72684">gh-72684</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code><span>tkinter</span></code></a> widget method <code><span>wm_attributes()</span></code> now accepts
the attribute name without the minus prefix to get window attributes,
for example <code><span>w.wm_attributes(&#39;alpha&#39;)</span></code>
and allows specifying attributes and values to set as keyword arguments,
for example <code><span>w.wm_attributes(alpha=0.5)</span></code>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/43457">gh-43457</a>.)</p></li>
<li><p><code><span>wm_attributes()</span></code> can now return attributes as a <a href="https://docs.python.org/3.13/library/stdtypes.html#dict" title="dict"><code><span>dict</span></code></a>,
by using the new optional keyword-only parameter <em>return_python_dict</em>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/43457">gh-43457</a>.)</p></li>
<li><p><code><span>Text.count()</span></code> can now return a simple <a href="https://docs.python.org/3.13/library/functions.html#int" title="int"><code><span>int</span></code></a>
when the new optional keyword-only parameter <em>return_ints</em> is used.
Otherwise, the single count is returned as a 1-tuple or <code><span>None</span></code>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/97928">gh-97928</a>.)</p></li>
<li><p>Support the “vsapi” element type in
the <a href="https://docs.python.org/3.13/library/tkinter.ttk.html#tkinter.ttk.Style.element_create" title="tkinter.ttk.Style.element_create"><code><span>element_create()</span></code></a> method of
<a href="https://docs.python.org/3.13/library/tkinter.ttk.html#tkinter.ttk.Style" title="tkinter.ttk.Style"><code><span>tkinter.ttk.Style</span></code></a>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/68166">gh-68166</a>.)</p></li>
<li><p>Add the <code><span>after_info()</span></code> method for Tkinter widgets.
(Contributed by Cheryl Sabella in <a href="https://github.com/python/cpython/issues/77020">gh-77020</a>.)</p></li>
<li><p>Add a new <code><span>copy_replace()</span></code> method to <code><span>PhotoImage</span></code>
to copy a region from one image to another,
possibly with pixel zooming, subsampling, or both.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/118225">gh-118225</a>.)</p></li>
<li><p>Add <em>from_coords</em> parameter to the <code><span>PhotoImage</span></code> methods
<code><span>copy()</span></code>, <code><span>zoom()</span></code> and <code><span>subsample()</span></code>.
Add <em>zoom</em> and <em>subsample</em> parameters to the <code><span>PhotoImage</span></code> method
<code><span>copy()</span></code>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/118225">gh-118225</a>.)</p></li>
<li><p>Add the <code><span>PhotoImage</span></code> methods
<code><span>read()</span></code> to read an image from a file
and <code><span>data()</span></code> to get the image data.
Add <em>background</em> and <em>grayscale</em> parameters to the <code><span>write()</span></code> method.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/118271">gh-118271</a>.)</p></li>
</ul>
</section>
<section id="traceback">
<h3>traceback<a href="#traceback" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException.exc_type_str" title="traceback.TracebackException.exc_type_str"><code><span>exc_type_str</span></code></a> attribute
to <a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException" title="traceback.TracebackException"><code><span>TracebackException</span></code></a>,
which holds a string display of the <em>exc_type</em>.
Deprecate the <a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException.exc_type" title="traceback.TracebackException.exc_type"><code><span>exc_type</span></code></a> attribute,
which holds the type object itself.
Add parameter <em>save_exc_type</em> (default <code><span>True</span></code>)
to indicate whether <code><span>exc_type</span></code> should be saved.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/112332">gh-112332</a>.)</p></li>
<li><p>Add a new <em>show_group</em> keyword-only parameter to
<a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException.format_exception_only" title="traceback.TracebackException.format_exception_only"><code><span>TracebackException.format_exception_only()</span></code></a> to (recursively) format
the nested exceptions of a <a href="https://docs.python.org/3.13/library/exceptions.html#BaseExceptionGroup" title="BaseExceptionGroup"><code><span>BaseExceptionGroup</span></code></a> instance.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/105292">gh-105292</a>.)</p></li>
</ul>
</section>
<section id="types">
<h3>types<a href="#types" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/types.html#types.SimpleNamespace" title="types.SimpleNamespace"><code><span>SimpleNamespace</span></code></a> can now take a single positional argument
to initialise the namespace’s arguments.
This argument must either be a mapping or an iterable of key-value pairs.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/108191">gh-108191</a>.)</p></li>
</ul>
</section>
<section id="typing">
<h3>typing<a href="#typing" title="Link to this heading">¶</a></h3>
<ul>
<li><p><span id="index-39"></span><a href="https://peps.python.org/pep-0705/"><strong>PEP 705</strong></a>: Add <a href="https://docs.python.org/3.13/library/typing.html#typing.ReadOnly" title="typing.ReadOnly"><code><span>ReadOnly</span></code></a>, a special typing construct
to mark a <a href="https://docs.python.org/3.13/library/typing.html#typing.TypedDict" title="typing.TypedDict"><code><span>TypedDict</span></code></a> item as read-only for type checkers.</p></li>
<li><p><span id="index-40"></span><a href="https://peps.python.org/pep-0742/"><strong>PEP 742</strong></a>: Add <a href="https://docs.python.org/3.13/library/typing.html#typing.TypeIs" title="typing.TypeIs"><code><span>TypeIs</span></code></a>, a typing construct
that can be used to instruct a type checker how to narrow a type.</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/typing.html#typing.NoDefault" title="typing.NoDefault"><code><span>NoDefault</span></code></a>, a sentinel object used to represent
the defaults of some parameters in the <a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a> module.
(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/116126">gh-116126</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/typing.html#typing.get_protocol_members" title="typing.get_protocol_members"><code><span>get_protocol_members()</span></code></a> to return the set of members
defining a <a href="https://docs.python.org/3.13/library/typing.html#typing.Protocol" title="typing.Protocol"><code><span>typing.Protocol</span></code></a>.
(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/104873">gh-104873</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/library/typing.html#typing.is_protocol" title="typing.is_protocol"><code><span>is_protocol()</span></code></a> to check whether a class
is a <a href="https://docs.python.org/3.13/library/typing.html#typing.Protocol" title="typing.Protocol"><code><span>Protocol</span></code></a>.
(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/104873">gh-104873</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/typing.html#typing.ClassVar" title="typing.ClassVar"><code><span>ClassVar</span></code></a> can now be nested in <a href="https://docs.python.org/3.13/library/typing.html#typing.Final" title="typing.Final"><code><span>Final</span></code></a>,
and vice versa.
(Contributed by Mehdi Drissi in <a href="https://github.com/python/cpython/issues/89547">gh-89547</a>.)</p></li>
</ul>
</section>
<section id="unicodedata">
<h3>unicodedata<a href="#unicodedata" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Update the Unicode database to <a href="https://www.unicode.org/versions/Unicode15.1.0/">version 15.1.0</a>.
(Contributed by James Gerity in <a href="https://github.com/python/cpython/issues/109559">gh-109559</a>.)</p>
</li>
</ul>
</section>
<section id="venv">
<h3>venv<a href="#venv" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add support for creating source control management (SCM) ignore files
in a virtual environment’s directory.
By default, Git is supported.
This is implemented as opt-in via the API,
which can be extended to support other SCMs
(<a href="https://docs.python.org/3.13/library/venv.html#venv.EnvBuilder" title="venv.EnvBuilder"><code><span>EnvBuilder</span></code></a> and <a href="https://docs.python.org/3.13/library/venv.html#venv.create" title="venv.create"><code><span>create()</span></code></a>),
and opt-out via the CLI, using <code><span>--without-scm-ignore-files</span></code>.
(Contributed by Brett Cannon in <a href="https://github.com/python/cpython/issues/108125">gh-108125</a>.)</p></li>
</ul>
</section>
<section id="warnings">
<h3>warnings<a href="#warnings" title="Link to this heading">¶</a></h3>
<ul>
<li><p><span id="index-41"></span><a href="https://peps.python.org/pep-0702/"><strong>PEP 702</strong></a>: The new <a href="https://docs.python.org/3.13/library/warnings.html#warnings.deprecated" title="warnings.deprecated"><code><span>warnings.deprecated()</span></code></a> decorator provides a way to
communicate deprecations to a <a href="https://docs.python.org/3.13/glossary.html#term-static-type-checker"><span>static type checker</span></a>
and to warn on usage of deprecated classes and functions.
A <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> may also be emitted when
a decorated function or class is used at runtime.
(Contributed by Jelle Zijlstra in <a href="https://github.com/python/cpython/issues/104003">gh-104003</a>.)</p></li>
</ul>
</section>
<section id="xml">
<h3>xml<a href="#xml" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Allow controlling Expat &gt;=2.6.0 reparse deferral (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-52425">CVE-2023-52425</a>)
by adding five new methods:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser.flush" title="xml.etree.ElementTree.XMLParser.flush"><code><span>xml.etree.ElementTree.XMLParser.flush()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLPullParser.flush" title="xml.etree.ElementTree.XMLPullParser.flush"><code><span>xml.etree.ElementTree.XMLPullParser.flush()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/pyexpat.html#xml.parsers.expat.xmlparser.GetReparseDeferralEnabled" title="xml.parsers.expat.xmlparser.GetReparseDeferralEnabled"><code><span>xml.parsers.expat.xmlparser.GetReparseDeferralEnabled()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/pyexpat.html#xml.parsers.expat.xmlparser.SetReparseDeferralEnabled" title="xml.parsers.expat.xmlparser.SetReparseDeferralEnabled"><code><span>xml.parsers.expat.xmlparser.SetReparseDeferralEnabled()</span></code></a></p></li>
<li><p><code><span>xml.sax.expatreader.ExpatParser.flush()</span></code></p></li>
</ul>
<p>(Contributed by Sebastian Pipping in <a href="https://github.com/python/cpython/issues/115623">gh-115623</a>.)</p>
</li>
<li><p>Add the <code><span>close()</span></code> method for the iterator returned by
<a href="https://docs.python.org/3.13/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse" title="xml.etree.ElementTree.iterparse"><code><span>iterparse()</span></code></a> for explicit cleanup.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/69893">gh-69893</a>.)</p></li>
</ul>
</section>
<section id="zipimport">
<h3>zipimport<a href="#zipimport" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add support for <a href="https://en.wikipedia.org/wiki/Zip_(file_format)#ZIP64">ZIP64</a> format files.
Everybody loves huge data, right?
(Contributed by Tim Hatch in <a href="https://github.com/python/cpython/issues/94146">gh-94146</a>.)</p>
</li>
</ul>
</section>
</section>
<section id="optimizations">
<h2>Optimizations<a href="#optimizations" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Several standard library modules have had
their import times significantly improved.
For example, the import time of the <a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a> module
has been reduced by around a third by removing dependencies
on <a href="https://docs.python.org/3.13/library/re.html#module-re" title="re: Regular expression operations."><code><span>re</span></code></a> and <a href="https://docs.python.org/3.13/library/contextlib.html#module-contextlib" title="contextlib: Utilities for with-statement contexts."><code><span>contextlib</span></code></a>.
Other modules to enjoy import-time speedups include
<a href="https://docs.python.org/3.13/library/email.utils.html#module-email.utils" title="email.utils: Miscellaneous email package utilities."><code><span>email.utils</span></code></a>, <a href="https://docs.python.org/3.13/library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><code><span>enum</span></code></a>, <a href="https://docs.python.org/3.13/library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects."><code><span>functools</span></code></a>,
<a href="https://docs.python.org/3.13/library/importlib.metadata.html#module-importlib.metadata" title="importlib.metadata: Accessing package metadata"><code><span>importlib.metadata</span></code></a>, and <a href="https://docs.python.org/3.13/library/threading.html#module-threading" title="threading: Thread-based parallelism."><code><span>threading</span></code></a>.
(Contributed by Alex Waygood, Shantanu Jain, Adam Turner, Daniel Hollas,
and others in <a href="https://github.com/python/cpython/issues/109653">gh-109653</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/textwrap.html#textwrap.indent" title="textwrap.indent"><code><span>textwrap.indent()</span></code></a> is now around 30% faster than before for large input.
(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/107369">gh-107369</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code><span>subprocess</span></code></a> module now uses the <a href="https://docs.python.org/3.13/library/os.html#os.posix_spawn" title="os.posix_spawn"><code><span>posix_spawn()</span></code></a> function in
more situations, including when <em>close_fds</em> is <code><span>True</span></code> (the default)
on many modern platforms.
This should provide a notable performance increase
when launching processes on FreeBSD and Solaris.
See the <a href="#whatsnew313-subprocess"><span>subprocess</span></a> section above for details.
(Contributed by Jakub Kulik in <a href="https://github.com/python/cpython/issues/113117">gh-113117</a>.)</p></li>
</ul>
</section>
<section id="removed-modules-and-apis">
<h2>Removed Modules And APIs<a href="#removed-modules-and-apis" title="Link to this heading">¶</a></h2>
<section id="pep-594-remove-dead-batteries-from-the-standard-library">
<span id="whatsnew313-pep594"></span><h3>PEP 594: Remove “dead batteries” from the standard library<a href="#pep-594-remove-dead-batteries-from-the-standard-library" title="Link to this heading">¶</a></h3>
<p><span id="index-42"></span><a href="https://peps.python.org/pep-0594/"><strong>PEP 594</strong></a> proposed removing 19 modules from the standard library,
colloquially referred to as ‘dead batteries’ due to their
historic, obsolete, or insecure status.
All of the following modules were deprecated in Python 3.11,
and are now removed:</p>
<ul>
<li><p><code><span>aifc</span></code></p></li>
<li><p><code><span>audioop</span></code></p></li>
<li><p><code><span>chunk</span></code></p></li>
<li><p><code><span>cgi</span></code> and <code><span>cgitb</span></code></p>
<ul>
<li><p><code><span>cgi.FieldStorage</span></code> can typically be replaced with
<a href="https://docs.python.org/3.13/library/urllib.parse.html#urllib.parse.parse_qsl" title="urllib.parse.parse_qsl"><code><span>urllib.parse.parse_qsl()</span></code></a> for <code><span>GET</span></code> and <code><span>HEAD</span></code> requests,
and the <a href="https://docs.python.org/3.13/library/email.message.html#module-email.message" title="email.message: The base class representing email messages."><code><span>email.message</span></code></a> module or the <a href="https://pypi.org/project/multipart/">multipart</a> library
for <code><span>POST</span></code> and <code><span>PUT</span></code> requests.</p></li>
<li><p><code><span>cgi.parse()</span></code> can be replaced by calling
<a href="https://docs.python.org/3.13/library/urllib.parse.html#urllib.parse.parse_qs" title="urllib.parse.parse_qs"><code><span>urllib.parse.parse_qs()</span></code></a> directly on the desired query string,
unless the input is <code><span>multipart/form-data</span></code>,
which should be replaced as described below for <code><span>cgi.parse_multipart()</span></code>.</p></li>
<li><p><code><span>cgi.parse_header()</span></code> can be replaced with the functionality
in the <a href="https://docs.python.org/3.13/library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code><span>email</span></code></a> package, which implements the same MIME RFCs.
For example, with <a href="https://docs.python.org/3.13/library/email.message.html#email.message.EmailMessage" title="email.message.EmailMessage"><code><span>email.message.EmailMessage</span></code></a>:</p>
<div><div><pre><span></span><span>from</span> <span>email.message</span> <span>import</span> <span>EmailMessage</span>

<span>msg</span> <span>=</span> <span>EmailMessage</span><span>()</span>
<span>msg</span><span>[</span><span>&#39;content-type&#39;</span><span>]</span> <span>=</span> <span>&#39;application/json; charset=&#34;utf8&#34;&#39;</span>
<span>main</span><span>,</span> <span>params</span> <span>=</span> <span>msg</span><span>.</span><span>get_content_type</span><span>(),</span> <span>msg</span><span>[</span><span>&#39;content-type&#39;</span><span>]</span><span>.</span><span>params</span>
</pre></div>
</div>
</li>
<li><p><code><span>cgi.parse_multipart()</span></code> can be replaced with the functionality
in the <a href="https://docs.python.org/3.13/library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code><span>email</span></code></a> package, which implements the same MIME RFCs,
or with the <a href="https://pypi.org/project/multipart/">multipart</a> library.
For example, the <a href="https://docs.python.org/3.13/library/email.message.html#email.message.EmailMessage" title="email.message.EmailMessage"><code><span>email.message.EmailMessage</span></code></a>
and <a href="https://docs.python.org/3.13/library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code><span>email.message.Message</span></code></a> classes.</p></li>
</ul>
</li>
<li><p><code><span>crypt</span></code> and the private <code><span>_crypt</span></code> extension.
The <a href="https://docs.python.org/3.13/library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code><span>hashlib</span></code></a> module may be an appropriate replacement
when simply hashing a value is required.
Otherwise, various third-party libraries on PyPI are available:</p>
<ul>
<li><p><a href="https://pypi.org/project/bcrypt/">bcrypt</a>:
Modern password hashing for your software and your servers.</p></li>
<li><p><a href="https://pypi.org/project/passlib/">passlib</a>:
Comprehensive password hashing framework supporting over 30 schemes.</p></li>
<li><p><a href="https://pypi.org/project/argon2-cffi/">argon2-cffi</a>:
The secure Argon2 password hashing algorithm.</p></li>
<li><p><a href="https://pypi.org/project/legacycrypt/">legacycrypt</a>:
<a href="https://docs.python.org/3.13/library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code><span>ctypes</span></code></a> wrapper to the POSIX crypt library call
and associated functionality.</p></li>
<li><p><a href="https://pypi.org/project/crypt_r/">crypt_r</a>:
Fork of the <code><span>crypt</span></code> module,
wrapper to the <em><a href="https://manpages.debian.org/crypt_r(3)">crypt_r(3)</a></em> library call
and associated functionality.</p></li>
</ul>
</li>
<li><p><code><span>imghdr</span></code>:
The <a href="https://pypi.org/project/filetype/">filetype</a>, <a href="https://pypi.org/project/puremagic/">puremagic</a>, or <a href="https://pypi.org/project/python-magic/">python-magic</a> libraries
should be used as replacements.
For example, the <code><span>puremagic.what()</span></code> function can be used
to replace the <code><span>imghdr.what()</span></code> function for all file formats
that were supported by <code><span>imghdr</span></code>.</p></li>
<li><p><code><span>mailcap</span></code>:
Use the <a href="https://docs.python.org/3.13/library/mimetypes.html#module-mimetypes" title="mimetypes: Mapping of filename extensions to MIME types."><code><span>mimetypes</span></code></a> module instead.</p></li>
<li><p><code><span>msilib</span></code></p></li>
<li><p><code><span>nis</span></code></p></li>
<li><p><code><span>nntplib</span></code>:
Use the <a href="https://pypi.org/project/pynntp/">pynntp</a> library from PyPI instead.</p></li>
<li><p><code><span>ossaudiodev</span></code>:
For audio playback, use the <a href="https://pypi.org/project/pygame/">pygame</a> library from PyPI instead.</p></li>
<li><p><code><span>pipes</span></code>:
Use the <a href="https://docs.python.org/3.13/library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code><span>subprocess</span></code></a> module instead.</p></li>
<li><p><code><span>sndhdr</span></code>:
The <a href="https://pypi.org/project/filetype/">filetype</a>, <a href="https://pypi.org/project/puremagic/">puremagic</a>, or <a href="https://pypi.org/project/python-magic/">python-magic</a> libraries
should be used as replacements.</p></li>
<li><p><code><span>spwd</span></code>:
Use the <a href="https://pypi.org/project/python-pam/">python-pam</a> library from PyPI instead.</p></li>
<li><p><code><span>sunau</span></code></p></li>
<li><p><code><span>telnetlib</span></code>,
Use the <a href="https://pypi.org/project/telnetlib3/">telnetlib3</a> or <a href="https://pypi.org/project/Exscript/">Exscript</a> libraries from PyPI instead.</p></li>
<li><p><code><span>uu</span></code>:
Use the <a href="https://docs.python.org/3.13/library/base64.html#module-base64" title="base64: RFC 4648: Base16, Base32, Base64 Data Encodings; Base85 and Ascii85"><code><span>base64</span></code></a> module instead, as a modern alternative.</p></li>
<li><p><code><span>xdrlib</span></code></p></li>
</ul>
<p>(Contributed by Victor Stinner and Zachary Ware in <a href="https://github.com/python/cpython/issues/104773">gh-104773</a> and <a href="https://github.com/python/cpython/issues/104780">gh-104780</a>.)</p>
</section>
<section id="to3">
<h3>2to3<a href="#to3" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <strong>2to3</strong> program and the <code><span>lib2to3</span></code> module,
previously deprecated in Python 3.11.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/104780">gh-104780</a>.)</p></li>
</ul>
</section>
<section id="builtins">
<h3>builtins<a href="#builtins" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove support for chained <a href="https://docs.python.org/3.13/library/functions.html#classmethod" title="classmethod"><code><span>classmethod</span></code></a> descriptors
(introduced in <a href="https://github.com/python/cpython/issues/63272">gh-63272</a>).
These can no longer be used to wrap other descriptors,
such as <a href="https://docs.python.org/3.13/library/functions.html#property" title="property"><code><span>property</span></code></a>.
The core design of this feature was flawed and led to several problems.
To “pass-through” a <a href="https://docs.python.org/3.13/library/functions.html#classmethod" title="classmethod"><code><span>classmethod</span></code></a>, consider using
the <code><span>__wrapped__</span></code> attribute that was added in Python 3.10.
(Contributed by Raymond Hettinger in <a href="https://github.com/python/cpython/issues/89519">gh-89519</a>.)</p></li>
<li><p>Raise a <a href="https://docs.python.org/3.13/library/exceptions.html#RuntimeError" title="RuntimeError"><code><span>RuntimeError</span></code></a> when calling <a href="https://docs.python.org/3.13/reference/datamodel.html#frame.clear" title="frame.clear"><code><span>frame.clear()</span></code></a>
on a suspended frame (as has always been the case for an executing frame).
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/79932">gh-79932</a>.)</p></li>
</ul>
</section>
<section id="id3">
<h3>configparser<a href="#id3" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the undocumented <code><span>LegacyInterpolation</span></code> class,
deprecated in the docstring since Python 3.2,
and at runtime since Python 3.11.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/104886">gh-104886</a>.)</p></li>
</ul>
</section>
<section id="importlib-metadata">
<h3>importlib.metadata<a href="#importlib-metadata" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove deprecated subscript (<a href="https://docs.python.org/3.13/reference/datamodel.html#object.__getitem__" title="object.__getitem__"><code><span>__getitem__()</span></code></a>) access for
<a href="https://docs.python.org/3.13/library/importlib.metadata.html#entry-points"><span>EntryPoint</span></a> objects.
(Contributed by Jason R. Coombs in <a href="https://github.com/python/cpython/issues/113175">gh-113175</a>.)</p></li>
</ul>
</section>
<section id="locale">
<h3>locale<a href="#locale" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <code><span>locale.resetlocale()</span></code> function, deprecated in Python 3.11.
Use <code><span>locale.setlocale(locale.LC_ALL,</span> <span>&#34;&#34;)</span></code> instead.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/104783">gh-104783</a>.)</p></li>
</ul>
</section>
<section id="opcode">
<h3>opcode<a href="#opcode" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Move <code><span>opcode.ENABLE_SPECIALIZATION</span></code> to <code><span>_opcode.ENABLE_SPECIALIZATION</span></code>.
This field was added in 3.12, it was never documented,
and is not intended for external use.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/105481">gh-105481</a>.)</p></li>
<li><p>Remove <code><span>opcode.is_pseudo()</span></code>, <code><span>opcode.MIN_PSEUDO_OPCODE</span></code>,
and <code><span>opcode.MAX_PSEUDO_OPCODE</span></code>, which were added in Python 3.12,
but were neither documented nor exposed through <a href="https://docs.python.org/3.13/library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code><span>dis</span></code></a>,
and were not intended to be used externally.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/105481">gh-105481</a>.)</p></li>
</ul>
</section>
<section id="id4">
<h3>pathlib<a href="#id4" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the ability to use <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path" title="pathlib.Path"><code><span>Path</span></code></a> objects as context managers.
This functionality was deprecated and has had no effect since Python 3.9.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/83863">gh-83863</a>.)</p></li>
</ul>
</section>
<section id="id5">
<h3>re<a href="#id5" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the undocumented, deprecated, and broken
<code><span>re.template()</span></code> function and <code><span>re.TEMPLATE</span></code> / <code><span>re.T</span></code> flag.
(Contributed by Serhiy Storchaka and Nikita Sobolev in <a href="https://github.com/python/cpython/issues/105687">gh-105687</a>.)</p></li>
</ul>
</section>
<section id="tkinter-tix">
<h3>tkinter.tix<a href="#tkinter-tix" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <code><span>tkinter.tix</span></code> module, deprecated in Python 3.6.
The third-party Tix library which the module wrapped is unmaintained.
(Contributed by Zachary Ware in <a href="https://github.com/python/cpython/issues/75552">gh-75552</a>.)</p></li>
</ul>
</section>
<section id="turtle">
<h3>turtle<a href="#turtle" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <code><span>RawTurtle.settiltangle()</span></code> method,
deprecated in the documentation since Python 3.1
and at runtime since Python 3.11.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/104876">gh-104876</a>.)</p></li>
</ul>
</section>
<section id="id6">
<h3>typing<a href="#id6" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <code><span>typing.io</span></code> and <code><span>typing.re</span></code> namespaces,
deprecated since Python 3.8.
The items in those namespaces can be imported directly
from the <a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a> module.
(Contributed by Sebastian Rittau in <a href="https://github.com/python/cpython/issues/92871">gh-92871</a>.)</p></li>
<li><p>Remove the keyword-argument method of creating
<a href="https://docs.python.org/3.13/library/typing.html#typing.TypedDict" title="typing.TypedDict"><code><span>TypedDict</span></code></a> types, deprecated in Python 3.11.
(Contributed by Tomas Roun in <a href="https://github.com/python/cpython/issues/104786">gh-104786</a>.)</p></li>
</ul>
</section>
<section id="unittest">
<h3>unittest<a href="#unittest" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the following <a href="https://docs.python.org/3.13/library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code><span>unittest</span></code></a> functions, deprecated in Python 3.11:</p>
<ul>
<li><p><code><span>unittest.findTestCases()</span></code></p></li>
<li><p><code><span>unittest.makeSuite()</span></code></p></li>
<li><p><code><span>unittest.getTestCaseNames()</span></code></p></li>
</ul>
<p>Use <a href="https://docs.python.org/3.13/library/unittest.html#unittest.TestLoader" title="unittest.TestLoader"><code><span>TestLoader</span></code></a> methods instead:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/unittest.html#unittest.TestLoader.loadTestsFromModule" title="unittest.TestLoader.loadTestsFromModule"><code><span>loadTestsFromModule()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/unittest.html#unittest.TestLoader.loadTestsFromTestCase" title="unittest.TestLoader.loadTestsFromTestCase"><code><span>loadTestsFromTestCase()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/unittest.html#unittest.TestLoader.getTestCaseNames" title="unittest.TestLoader.getTestCaseNames"><code><span>getTestCaseNames()</span></code></a></p></li>
</ul>
<p>(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/104835">gh-104835</a>.)</p>
</li>
<li><p>Remove the untested and undocumented <code><span>TestProgram.usageExit()</span></code>
method, deprecated in Python 3.11.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/104992">gh-104992</a>.)</p></li>
</ul>
</section>
<section id="urllib">
<h3>urllib<a href="#urllib" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the <em>cafile</em>, <em>capath</em>, and <em>cadefault</em> parameters of the
<a href="https://docs.python.org/3.13/library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen"><code><span>urllib.request.urlopen()</span></code></a> function, deprecated in Python 3.6.
Use the <em>context</em> parameter instead with an <a href="https://docs.python.org/3.13/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code><span>SSLContext</span></code></a> instance.
The <a href="https://docs.python.org/3.13/library/ssl.html#ssl.SSLContext.load_cert_chain" title="ssl.SSLContext.load_cert_chain"><code><span>ssl.SSLContext.load_cert_chain()</span></code></a> function
can be used to load specific certificates,
or let <a href="https://docs.python.org/3.13/library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code><span>ssl.create_default_context()</span></code></a> select
the operating system’s trusted certificate authority (CA) certificates.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105382">gh-105382</a>.)</p></li>
</ul>
</section>
<section id="webbrowser">
<h3>webbrowser<a href="#webbrowser" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove the untested and undocumented <code><span>MacOSX</span></code> class,
deprecated in Python 3.11.
Use the <code><span>MacOSXOSAScript</span></code> class (introduced in Python 3.2) instead.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/104804">gh-104804</a>.)</p></li>
<li><p>Remove the deprecated <code><span>MacOSXOSAScript._name</span></code> attribute.
Use the <a href="https://docs.python.org/3.13/library/webbrowser.html#webbrowser.controller.name" title="webbrowser.controller.name"><code><span>MacOSXOSAScript.name</span></code></a>
attribute instead.
(Contributed by Nikita Sobolev in <a href="https://github.com/python/cpython/issues/105546">gh-105546</a>.)</p></li>
</ul>
</section>
</section>
<section id="new-deprecations">
<h2>New Deprecations<a href="#new-deprecations" title="Link to this heading">¶</a></h2>
<ul>
<li><p><a href="https://docs.python.org/3.13/reference/datamodel.html#user-defined-funcs"><span>User-defined functions</span></a>:</p>
<ul>
<li><p>Deprecate assignment to a function’s <a href="https://docs.python.org/3.13/reference/datamodel.html#function.__code__" title="function.__code__"><code><span>__code__</span></code></a> attribute,
where the new code object’s type does not match the function’s type.
The different types are:
plain function, generator, async generator, and coroutine.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/81137">gh-81137</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/array.html#module-array" title="array: Space efficient arrays of uniformly typed numeric values."><code><span>array</span></code></a>:</p>
<ul>
<li><p>Deprecate the <code><span>&#39;u&#39;</span></code> format code (<code><span>wchar_t</span></code>) at runtime.
This format code has been deprecated in documentation since Python 3.3,
and will be removed in Python 3.16.
Use the <code><span>&#39;w&#39;</span></code> format code (<a href="https://docs.python.org/3.13/c-api/unicode.html#c.Py_UCS4" title="Py_UCS4"><code><span>Py_UCS4</span></code></a>)
for Unicode characters instead.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/80480">gh-80480</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code><span>ctypes</span></code></a>:</p>
<ul>
<li><p>Deprecate the undocumented <code><span>SetPointerType()</span></code> function,
to be removed in Python 3.15.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105733">gh-105733</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>Soft-deprecate</span></a> the <a href="https://docs.python.org/3.13/library/ctypes.html#ctypes.ARRAY" title="ctypes.ARRAY"><code><span>ARRAY()</span></code></a>
function in favour of <code><span>type</span> <span>*</span> <span>length</span></code> multiplication.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105733">gh-105733</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/decimal.html#module-decimal" title="decimal: Implementation of the General Decimal Arithmetic  Specification."><code><span>decimal</span></code></a>:</p>
<ul>
<li><p>Deprecate the non-standard and undocumented <a href="https://docs.python.org/3.13/library/decimal.html#decimal.Decimal" title="decimal.Decimal"><code><span>Decimal</span></code></a>
format specifier <code><span>&#39;N&#39;</span></code>,
which is only supported in the <code><span>decimal</span></code> module’s C implementation.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/89902">gh-89902</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code><span>dis</span></code></a>:</p>
<ul>
<li><p>Deprecate the <code><span>HAVE_ARGUMENT</span></code> separator.
Check membership in <a href="https://docs.python.org/3.13/library/dis.html#dis.hasarg" title="dis.hasarg"><code><span>hasarg</span></code></a> instead.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/109319">gh-109319</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/getopt.html#module-getopt" title="getopt: Portable parser for command line options; support both short and long option names."><code><span>getopt</span></code></a> and <a href="https://docs.python.org/3.13/library/optparse.html#module-optparse" title="optparse: Command-line option parsing library. (deprecated)"><code><span>optparse</span></code></a>:</p>
<ul>
<li><p>Both modules are now <a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>soft deprecated</span></a>,
with <a href="https://docs.python.org/3.13/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code><span>argparse</span></code></a> preferred for new projects.
This is a new soft-deprecation for the <code><span>getopt</span></code> module,
whereas the <code><span>optparse</span></code> module was already <em>de facto</em> soft deprecated.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106535">gh-106535</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code><span>gettext</span></code></a>:</p>
<ul>
<li><p>Deprecate non-integer numbers as arguments to functions and methods
that consider plural forms in the <code><span>gettext</span></code> module,
even if no translation was found.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/88434">gh-88434</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/glob.html#module-glob" title="glob: Unix shell style pathname pattern expansion."><code><span>glob</span></code></a>:</p>
<ul>
<li><p>Deprecate the undocumented <code><span>glob0()</span></code> and <code><span>glob1()</span></code> functions.
Use <a href="https://docs.python.org/3.13/library/glob.html#glob.glob" title="glob.glob"><code><span>glob()</span></code></a> and pass a <a href="https://docs.python.org/3.13/glossary.html#term-path-like-object"><span>path-like object</span></a> specifying
the root directory to the <em>root_dir</em> parameter instead.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/117337">gh-117337</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code><span>http.server</span></code></a>:</p>
<ul>
<li><p>Deprecate <a href="https://docs.python.org/3.13/library/http.server.html#http.server.CGIHTTPRequestHandler" title="http.server.CGIHTTPRequestHandler"><code><span>CGIHTTPRequestHandler</span></code></a>,
to be removed in Python 3.15.
Process-based CGI HTTP servers have been out of favor for a very long time.
This code was outdated, unmaintained, and rarely used.
It has a high potential for both security and functionality bugs.
(Contributed by Gregory P. Smith in <a href="https://github.com/python/cpython/issues/109096">gh-109096</a>.)</p></li>
<li><p>Deprecate the <code><span>--cgi</span></code> flag to
the <strong>python -m http.server</strong> command-line interface,
to be removed in Python 3.15.
(Contributed by Gregory P. Smith in <a href="https://github.com/python/cpython/issues/109096">gh-109096</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/mimetypes.html#module-mimetypes" title="mimetypes: Mapping of filename extensions to MIME types."><code><span>mimetypes</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>Soft-deprecate</span></a> file path arguments
to <a href="https://docs.python.org/3.13/library/mimetypes.html#mimetypes.guess_type" title="mimetypes.guess_type"><code><span>guess_type()</span></code></a>,
use <a href="https://docs.python.org/3.13/library/mimetypes.html#mimetypes.guess_file_type" title="mimetypes.guess_file_type"><code><span>guess_file_type()</span></code></a> instead.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/66543">gh-66543</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/re.html#module-re" title="re: Regular expression operations."><code><span>re</span></code></a>:</p>
<ul>
<li><p>Deprecate passing the optional <em>maxsplit</em>, <em>count</em>, or <em>flags</em> arguments
as positional arguments to the module-level
<a href="https://docs.python.org/3.13/library/re.html#re.split" title="re.split"><code><span>split()</span></code></a>, <a href="https://docs.python.org/3.13/library/re.html#re.sub" title="re.sub"><code><span>sub()</span></code></a>, and <a href="https://docs.python.org/3.13/library/re.html#re.subn" title="re.subn"><code><span>subn()</span></code></a> functions.
These parameters will become <a href="https://docs.python.org/3.13/glossary.html#keyword-only-parameter"><span>keyword-only</span></a>
in a future version of Python.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/56166">gh-56166</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code><span>pathlib</span></code></a>:</p>
<ul>
<li><p>Deprecate <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.is_reserved" title="pathlib.PurePath.is_reserved"><code><span>PurePath.is_reserved()</span></code></a>,
to be removed in Python 3.15.
Use <a href="https://docs.python.org/3.13/library/os.path.html#os.path.isreserved" title="os.path.isreserved"><code><span>os.path.isreserved()</span></code></a> to detect reserved paths on Windows.
(Contributed by Barney Gale in <a href="https://github.com/python/cpython/issues/88569">gh-88569</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code><span>platform</span></code></a>:</p>
<ul>
<li><p>Deprecate <a href="https://docs.python.org/3.13/library/platform.html#platform.java_ver" title="platform.java_ver"><code><span>java_ver()</span></code></a>,
to be removed in Python 3.15.
This function is only useful for Jython support, has a confusing API,
and is largely untested.
(Contributed by Nikita Sobolev in <a href="https://github.com/python/cpython/issues/116349">gh-116349</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code><span>pydoc</span></code></a>:</p>
<ul>
<li><p>Deprecate the undocumented <code><span>ispackage()</span></code> function.
(Contributed by Zackery Spytz in <a href="https://github.com/python/cpython/issues/64020">gh-64020</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code><span>sqlite3</span></code></a>:</p>
<ul>
<li><p>Deprecate passing more than one positional argument to
the <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.connect" title="sqlite3.connect"><code><span>connect()</span></code></a> function
and the <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code><span>Connection</span></code></a> constructor.
The remaining parameters will become keyword-only in Python 3.15.
(Contributed by Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/107948">gh-107948</a>.)</p></li>
<li><p>Deprecate passing name, number of arguments, and the callable as keyword
arguments for <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.create_function" title="sqlite3.Connection.create_function"><code><span>Connection.create_function()</span></code></a>
and <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.create_aggregate" title="sqlite3.Connection.create_aggregate"><code><span>Connection.create_aggregate()</span></code></a>
These parameters will become positional-only in Python 3.15.
(Contributed by Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/108278">gh-108278</a>.)</p></li>
<li><p>Deprecate passing the callback callable by keyword for the
<a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.set_authorizer" title="sqlite3.Connection.set_authorizer"><code><span>set_authorizer()</span></code></a>,
<a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.set_progress_handler" title="sqlite3.Connection.set_progress_handler"><code><span>set_progress_handler()</span></code></a>, and
<a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection.set_trace_callback" title="sqlite3.Connection.set_trace_callback"><code><span>set_trace_callback()</span></code></a>
<a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Connection" title="sqlite3.Connection"><code><span>Connection</span></code></a> methods.
The callback callables will become positional-only in Python 3.15.
(Contributed by Erlend E. Aasland in <a href="https://github.com/python/cpython/issues/108278">gh-108278</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code><span>sys</span></code></a>:</p>
<ul>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/library/sys.html#sys._enablelegacywindowsfsencoding" title="sys._enablelegacywindowsfsencoding"><code><span>_enablelegacywindowsfsencoding()</span></code></a> function,
to be removed in Python 3.16.
Use the <span id="index-43"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHONLEGACYWINDOWSFSENCODING"><code><span>PYTHONLEGACYWINDOWSFSENCODING</span></code></a> environment variable instead.
(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/73427">gh-73427</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code><span>tarfile</span></code></a>:</p>
<ul>
<li><p>Deprecate the undocumented and unused <code><span>TarFile.tarfile</span></code> attribute,
to be removed in Python 3.16.
(Contributed in <a href="https://github.com/python/cpython/issues/115256">gh-115256</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/traceback.html#module-traceback" title="traceback: Print or retrieve a stack traceback."><code><span>traceback</span></code></a>:</p>
<ul>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException.exc_type" title="traceback.TracebackException.exc_type"><code><span>TracebackException.exc_type</span></code></a> attribute.
Use <a href="https://docs.python.org/3.13/library/traceback.html#traceback.TracebackException.exc_type_str" title="traceback.TracebackException.exc_type_str"><code><span>TracebackException.exc_type_str</span></code></a> instead.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/112332">gh-112332</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a>:</p>
<ul>
<li><p>Deprecate the undocumented keyword argument syntax for creating
<a href="https://docs.python.org/3.13/library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code><span>NamedTuple</span></code></a> classes
(e.g. <code><span>Point</span> <span>=</span> <span>NamedTuple(&#34;Point&#34;,</span> <span>x=int,</span> <span>y=int)</span></code>),
to be removed in Python 3.15.
Use the class-based syntax or the functional syntax instead.
(Contributed by Alex Waygood in <a href="https://github.com/python/cpython/issues/105566">gh-105566</a>.)</p></li>
<li><p>Deprecate omitting the <em>fields</em> parameter when creating
a <a href="https://docs.python.org/3.13/library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code><span>NamedTuple</span></code></a> or <a href="https://docs.python.org/3.13/library/typing.html#typing.TypedDict" title="typing.TypedDict"><code><span>typing.TypedDict</span></code></a> class,
and deprecate passing <code><span>None</span></code> to the <em>fields</em> parameter of both types.
Python 3.15 will require a valid sequence for the <em>fields</em> parameter.
To create a NamedTuple class with zero fields,
use <code><span>class</span> <span>NT(NamedTuple):</span> <span>pass</span></code> or <code><span>NT</span> <span>=</span> <span>NamedTuple(&#34;NT&#34;,</span> <span>())</span></code>.
To create a TypedDict class with zero fields,
use <code><span>class</span> <span>TD(TypedDict):</span> <span>pass</span></code> or <code><span>TD</span> <span>=</span> <span>TypedDict(&#34;TD&#34;,</span> <span>{})</span></code>.
(Contributed by Alex Waygood in <a href="https://github.com/python/cpython/issues/105566">gh-105566</a> and <a href="https://github.com/python/cpython/issues/105570">gh-105570</a>.)</p></li>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/library/typing.html#typing.no_type_check_decorator" title="typing.no_type_check_decorator"><code><span>typing.no_type_check_decorator()</span></code></a> decorator function,
to be removed in in Python 3.15.
After eight years in the <a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a> module,
it has yet to be supported by any major type checker.
(Contributed by Alex Waygood in <a href="https://github.com/python/cpython/issues/106309">gh-106309</a>.)</p></li>
<li><p>Deprecate <a href="https://docs.python.org/3.13/library/typing.html#typing.AnyStr" title="typing.AnyStr"><code><span>typing.AnyStr</span></code></a>.
In Python 3.16, it will be removed from <code><span>typing.__all__</span></code>,
and a <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> will be emitted at runtime
when it is imported or accessed.
It will be removed entirely in Python 3.18.
Use the new <a href="https://docs.python.org/3.13/reference/compound_stmts.html#type-params"><span>type parameter syntax</span></a> instead.
(Contributed by Michael The in <a href="https://github.com/python/cpython/issues/107116">gh-107116</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/wave.html#module-wave" title="wave: Provide an interface to the WAV sound format."><code><span>wave</span></code></a>:</p>
<ul>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read.getmark" title="wave.Wave_read.getmark"><code><span>getmark()</span></code></a>, <code><span>setmark()</span></code>,
and <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read.getmarkers" title="wave.Wave_read.getmarkers"><code><span>getmarkers()</span></code></a> methods of
the <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read" title="wave.Wave_read"><code><span>Wave_read</span></code></a> and <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_write" title="wave.Wave_write"><code><span>Wave_write</span></code></a> classes,
to be removed in Python 3.15.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105096">gh-105096</a>.)</p></li>
</ul>
</li>
</ul>
<section id="pending-removal-in-python-3-14">
<h3>Pending Removal in Python 3.14<a href="#pending-removal-in-python-3-14" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code><span>argparse</span></code></a>: The <em>type</em>, <em>choices</em>, and <em>metavar</em> parameters
of <code><span>argparse.BooleanOptionalAction</span></code> are deprecated
and will be removed in 3.14.
(Contributed by Nikita Sobolev in <a href="https://github.com/python/cpython/issues/92248">gh-92248</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/ast.html#module-ast" title="ast: Abstract Syntax Tree classes and manipulation."><code><span>ast</span></code></a>: The following features have been deprecated in documentation
since Python 3.8, now cause a <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> to be emitted at
runtime when they are accessed or used, and will be removed in Python 3.14:</p>
<ul>
<li><p><code><span>ast.Num</span></code></p></li>
<li><p><code><span>ast.Str</span></code></p></li>
<li><p><code><span>ast.Bytes</span></code></p></li>
<li><p><code><span>ast.NameConstant</span></code></p></li>
<li><p><code><span>ast.Ellipsis</span></code></p></li>
</ul>
<p>Use <a href="https://docs.python.org/3.13/library/ast.html#ast.Constant" title="ast.Constant"><code><span>ast.Constant</span></code></a> instead.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/90953">gh-90953</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code><span>asyncio</span></code></a>:</p>
<ul>
<li><p>The child watcher classes <a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.MultiLoopChildWatcher" title="asyncio.MultiLoopChildWatcher"><code><span>MultiLoopChildWatcher</span></code></a>,
<a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.FastChildWatcher" title="asyncio.FastChildWatcher"><code><span>FastChildWatcher</span></code></a>, <a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.AbstractChildWatcher" title="asyncio.AbstractChildWatcher"><code><span>AbstractChildWatcher</span></code></a>
and <a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.SafeChildWatcher" title="asyncio.SafeChildWatcher"><code><span>SafeChildWatcher</span></code></a> are deprecated and
will be removed in Python 3.14.
(Contributed by Kumar Aditya in <a href="https://github.com/python/cpython/issues/94597">gh-94597</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.set_child_watcher" title="asyncio.set_child_watcher"><code><span>asyncio.set_child_watcher()</span></code></a>, <a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.get_child_watcher" title="asyncio.get_child_watcher"><code><span>asyncio.get_child_watcher()</span></code></a>,
<a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.AbstractEventLoopPolicy.set_child_watcher" title="asyncio.AbstractEventLoopPolicy.set_child_watcher"><code><span>asyncio.AbstractEventLoopPolicy.set_child_watcher()</span></code></a> and
<a href="https://docs.python.org/3.13/library/asyncio-policy.html#asyncio.AbstractEventLoopPolicy.get_child_watcher" title="asyncio.AbstractEventLoopPolicy.get_child_watcher"><code><span>asyncio.AbstractEventLoopPolicy.get_child_watcher()</span></code></a> are deprecated
and will be removed in Python 3.14.
(Contributed by Kumar Aditya in <a href="https://github.com/python/cpython/issues/94597">gh-94597</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/asyncio-eventloop.html#asyncio.get_event_loop" title="asyncio.get_event_loop"><code><span>get_event_loop()</span></code></a> method of the
default event loop policy now emits a <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> if there
is no current event loop set and it decides to create one.
(Contributed by Serhiy Storchaka and Guido van Rossum in <a href="https://github.com/python/cpython/issues/100160">gh-100160</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers"><code><span>collections.abc</span></code></a>: Deprecated <a href="https://docs.python.org/3.13/library/collections.abc.html#collections.abc.ByteString" title="collections.abc.ByteString"><code><span>ByteString</span></code></a>.
Prefer <code><span>Sequence</span></code> or <a href="https://docs.python.org/3.13/library/collections.abc.html#collections.abc.Buffer" title="collections.abc.Buffer"><code><span>Buffer</span></code></a>.
For use in typing, prefer a union, like <code><span>bytes</span> <span>|</span> <span>bytearray</span></code>,
or <a href="https://docs.python.org/3.13/library/collections.abc.html#collections.abc.Buffer" title="collections.abc.Buffer"><code><span>collections.abc.Buffer</span></code></a>.
(Contributed by Shantanu Jain in <a href="https://github.com/python/cpython/issues/91896">gh-91896</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code><span>email</span></code></a>: Deprecated the <em>isdst</em> parameter in <a href="https://docs.python.org/3.13/library/email.utils.html#email.utils.localtime" title="email.utils.localtime"><code><span>email.utils.localtime()</span></code></a>.
(Contributed by Alan Williams in <a href="https://github.com/python/cpython/issues/72346">gh-72346</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.html#module-importlib.abc" title="importlib.abc: Abstract base classes related to import"><code><span>importlib.abc</span></code></a> deprecated classes:</p>
<ul>
<li><p><code><span>importlib.abc.ResourceReader</span></code></p></li>
<li><p><code><span>importlib.abc.Traversable</span></code></p></li>
<li><p><code><span>importlib.abc.TraversableResources</span></code></p></li>
</ul>
<p>Use <a href="https://docs.python.org/3.13/library/importlib.resources.abc.html#module-importlib.resources.abc" title="importlib.resources.abc: Abstract base classes for resources"><code><span>importlib.resources.abc</span></code></a> classes instead:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.abc.html#importlib.resources.abc.Traversable" title="importlib.resources.abc.Traversable"><code><span>importlib.resources.abc.Traversable</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.resources.abc.html#importlib.resources.abc.TraversableResources" title="importlib.resources.abc.TraversableResources"><code><span>importlib.resources.abc.TraversableResources</span></code></a></p></li>
</ul>
<p>(Contributed by Jason R. Coombs and Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/93963">gh-93963</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/library/itertools.html#module-itertools" title="itertools: Functions creating iterators for efficient looping."><code><span>itertools</span></code></a> had undocumented, inefficient, historically buggy,
and inconsistent support for copy, deepcopy, and pickle operations.
This will be removed in 3.14 for a significant reduction in code
volume and maintenance burden.
(Contributed by Raymond Hettinger in <a href="https://github.com/python/cpython/issues/101588">gh-101588</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code><span>multiprocessing</span></code></a>: The default start method will change to a safer one on
Linux, BSDs, and other non-macOS POSIX platforms where <code><span>&#39;fork&#39;</span></code> is currently
the default (<a href="https://github.com/python/cpython/issues/84559">gh-84559</a>). Adding a runtime warning about this was deemed too
disruptive as the majority of code is not expected to care. Use the
<a href="https://docs.python.org/3.13/library/multiprocessing.html#multiprocessing.get_context" title="multiprocessing.get_context"><code><span>get_context()</span></code></a> or
<a href="https://docs.python.org/3.13/library/multiprocessing.html#multiprocessing.set_start_method" title="multiprocessing.set_start_method"><code><span>set_start_method()</span></code></a> APIs to explicitly specify when
your code <em>requires</em> <code><span>&#39;fork&#39;</span></code>.  See <a href="https://docs.python.org/3.13/library/multiprocessing.html#multiprocessing-start-methods"><span>Contexts and start methods</span></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code><span>pathlib</span></code></a>: <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.is_relative_to" title="pathlib.PurePath.is_relative_to"><code><span>is_relative_to()</span></code></a> and
<a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.relative_to" title="pathlib.PurePath.relative_to"><code><span>relative_to()</span></code></a>: passing additional arguments is
deprecated.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/pkgutil.html#module-pkgutil" title="pkgutil: Utilities for the import system."><code><span>pkgutil</span></code></a>: <a href="https://docs.python.org/3.13/library/pkgutil.html#pkgutil.find_loader" title="pkgutil.find_loader"><code><span>find_loader()</span></code></a> and <a href="https://docs.python.org/3.13/library/pkgutil.html#pkgutil.get_loader" title="pkgutil.get_loader"><code><span>get_loader()</span></code></a>
now raise <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a>;
use <a href="https://docs.python.org/3.13/library/importlib.html#importlib.util.find_spec" title="importlib.util.find_spec"><code><span>importlib.util.find_spec()</span></code></a> instead.
(Contributed by Nikita Sobolev in <a href="https://github.com/python/cpython/issues/97850">gh-97850</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/pty.html#module-pty" title="pty: Pseudo-Terminal Handling for Unix. (Unix)"><code><span>pty</span></code></a>:</p>
<ul>
<li><p><code><span>master_open()</span></code>: use <a href="https://docs.python.org/3.13/library/pty.html#pty.openpty" title="pty.openpty"><code><span>pty.openpty()</span></code></a>.</p></li>
<li><p><code><span>slave_open()</span></code>: use <a href="https://docs.python.org/3.13/library/pty.html#pty.openpty" title="pty.openpty"><code><span>pty.openpty()</span></code></a>.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code><span>sqlite3</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.version" title="sqlite3.version"><code><span>version</span></code></a> and <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.version_info" title="sqlite3.version_info"><code><span>version_info</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Cursor.execute" title="sqlite3.Cursor.execute"><code><span>execute()</span></code></a> and <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3.Cursor.executemany" title="sqlite3.Cursor.executemany"><code><span>executemany()</span></code></a>
if <a href="https://docs.python.org/3.13/library/sqlite3.html#sqlite3-placeholders"><span>named placeholders</span></a> are used and
<em>parameters</em> is a sequence instead of a <a href="https://docs.python.org/3.13/library/stdtypes.html#dict" title="dict"><code><span>dict</span></code></a>.</p></li>
<li><p>date and datetime adapter, date and timestamp converter:
see the <a href="https://docs.python.org/3.13/library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code><span>sqlite3</span></code></a> documentation for suggested replacement recipes.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/types.html#types.CodeType" title="types.CodeType"><code><span>types.CodeType</span></code></a>: Accessing <a href="https://docs.python.org/3.13/reference/datamodel.html#codeobject.co_lnotab" title="codeobject.co_lnotab"><code><span>co_lnotab</span></code></a> was
deprecated in <span id="index-44"></span><a href="https://peps.python.org/pep-0626/"><strong>PEP 626</strong></a>
since 3.10 and was planned to be removed in 3.12,
but it only got a proper <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> in 3.12.
May be removed in 3.14.
(Contributed by Nikita Sobolev in <a href="https://github.com/python/cpython/issues/101866">gh-101866</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a>: <a href="https://docs.python.org/3.13/library/typing.html#typing.ByteString" title="typing.ByteString"><code><span>ByteString</span></code></a>, deprecated since Python 3.9,
now causes a <a href="https://docs.python.org/3.13/library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code><span>DeprecationWarning</span></code></a> to be emitted when it is used.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/urllib.html#module-urllib" title="urllib"><code><span>urllib</span></code></a>:
<code><span>urllib.parse.Quoter</span></code> is deprecated: it was not intended to be a
public API.
(Contributed by Gregory P. Smith in <a href="https://github.com/python/cpython/issues/88168">gh-88168</a>.)</p></li>
</ul>
</section>
<section id="pending-removal-in-python-3-15">
<h3>Pending Removal in Python 3.15<a href="#pending-removal-in-python-3-15" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/ctypes.html#module-ctypes" title="ctypes: A foreign function library for Python."><code><span>ctypes</span></code></a>:</p>
<ul>
<li><p>The undocumented <code><span>ctypes.SetPointerType()</span></code> function
has been deprecated since Python 3.13.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code><span>http.server</span></code></a>:</p>
<ul>
<li><p>The obsolete and rarely used <a href="https://docs.python.org/3.13/library/http.server.html#http.server.CGIHTTPRequestHandler" title="http.server.CGIHTTPRequestHandler"><code><span>CGIHTTPRequestHandler</span></code></a>
has been deprecated since Python 3.13.
No direct replacement exists.
<em>Anything</em> is better than CGI to interface
a web server with a request handler.</p></li>
<li><p>The <code><span>--cgi</span></code> flag to the <strong>python -m http.server</strong>
command-line interface has been deprecated since Python 3.13.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code><span>importlib</span></code></a>: <code><span>__package__</span></code> and <code><span>__cached__</span></code> will cease to be set or
taken into consideration by the import system (<a href="https://github.com/python/cpython/issues/97879">gh-97879</a>).</p></li>
<li><p><a href="https://docs.python.org/3.13/library/locale.html#module-locale" title="locale: Internationalization services."><code><span>locale</span></code></a>:</p>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/locale.html#locale.getdefaultlocale" title="locale.getdefaultlocale"><code><span>getdefaultlocale()</span></code></a> function
has been deprecated since Python 3.11.
Its removal was originally planned for Python 3.13 (<a href="https://github.com/python/cpython/issues/90817">gh-90817</a>),
but has been postponed to Python 3.15.
Use <a href="https://docs.python.org/3.13/library/locale.html#locale.getlocale" title="locale.getlocale"><code><span>getlocale()</span></code></a>, <a href="https://docs.python.org/3.13/library/locale.html#locale.setlocale" title="locale.setlocale"><code><span>setlocale()</span></code></a>,
and <a href="https://docs.python.org/3.13/library/locale.html#locale.getencoding" title="locale.getencoding"><code><span>getencoding()</span></code></a> instead.
(Contributed by Hugo van Kemenade in <a href="https://github.com/python/cpython/issues/111187">gh-111187</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code><span>pathlib</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.PurePath.is_reserved" title="pathlib.PurePath.is_reserved"><code><span>PurePath.is_reserved()</span></code></a>
has been deprecated since Python 3.13.
Use <a href="https://docs.python.org/3.13/library/os.path.html#os.path.isreserved" title="os.path.isreserved"><code><span>os.path.isreserved()</span></code></a> to detect reserved paths on Windows.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code><span>platform</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/platform.html#platform.java_ver" title="platform.java_ver"><code><span>java_ver()</span></code></a> has been deprecated since Python 3.13.
This function is only useful for Jython support, has a confusing API,
and is largely untested.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/threading.html#module-threading" title="threading: Thread-based parallelism."><code><span>threading</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/threading.html#threading.RLock" title="threading.RLock"><code><span>RLock()</span></code></a> will take no arguments in Python 3.15.
Passing any arguments has been deprecated since Python 3.14,
as the  Python version does not permit any arguments,
but the C version allows any number of positional or keyword arguments,
ignoring every argument.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a>:</p>
<ul>
<li><p>The undocumented keyword argument syntax for creating
<a href="https://docs.python.org/3.13/library/typing.html#typing.NamedTuple" title="typing.NamedTuple"><code><span>NamedTuple</span></code></a> classes
(e.g. <code><span>Point</span> <span>=</span> <span>NamedTuple(&#34;Point&#34;,</span> <span>x=int,</span> <span>y=int)</span></code>)
has been deprecated since Python 3.13.
Use the class-based syntax or the functional syntax instead.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/typing.html#typing.no_type_check_decorator" title="typing.no_type_check_decorator"><code><span>typing.no_type_check_decorator()</span></code></a> decorator function
has been deprecated since Python 3.13.
After eight years in the <a href="https://docs.python.org/3.13/library/typing.html#module-typing" title="typing: Support for type hints (see :pep:`484`)."><code><span>typing</span></code></a> module,
it has yet to be supported by any major type checker.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/wave.html#module-wave" title="wave: Provide an interface to the WAV sound format."><code><span>wave</span></code></a>:</p>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read.getmark" title="wave.Wave_read.getmark"><code><span>getmark()</span></code></a>, <code><span>setmark()</span></code>,
and <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read.getmarkers" title="wave.Wave_read.getmarkers"><code><span>getmarkers()</span></code></a> methods of
the <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_read" title="wave.Wave_read"><code><span>Wave_read</span></code></a> and <a href="https://docs.python.org/3.13/library/wave.html#wave.Wave_write" title="wave.Wave_write"><code><span>Wave_write</span></code></a> classes
have been deprecated since Python 3.13.</p></li>
</ul>
</li>
</ul>
</section>
<section id="pending-removal-in-python-3-16">
<h3>Pending Removal in Python 3.16<a href="#pending-removal-in-python-3-16" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code><span>builtins</span></code></a>:</p>
<ul>
<li><p>Bitwise inversion on boolean types, <code><span>~True</span></code> or <code><span>~False</span></code>
has been deprecated since Python 3.12,
as it produces surprising and unintuitive results (<code><span>-2</span></code> and <code><span>-1</span></code>).
Use <code><span>not</span> <span>x</span></code> instead for the logical negation of a Boolean.
In the rare case that you need the bitwise inversion of
the underlying integer, convert to <code><span>int</span></code> explicitly (<code><span>~int(x)</span></code>).</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/array.html#module-array" title="array: Space efficient arrays of uniformly typed numeric values."><code><span>array</span></code></a>:</p>
<ul>
<li><p>The <code><span>&#39;u&#39;</span></code> format code (<code><span>wchar_t</span></code>)
has been deprecated in documentation since Python 3.3
and at runtime since Python 3.13.
Use the <code><span>&#39;w&#39;</span></code> format code (<a href="https://docs.python.org/3.13/c-api/unicode.html#c.Py_UCS4" title="Py_UCS4"><code><span>Py_UCS4</span></code></a>)
for Unicode characters instead.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code><span>shutil</span></code></a>:</p>
<ul>
<li><p>The <code><span>ExecError</span></code> exception
has been deprecated since Python 3.14.
It has not been used by any function in <code><span>shutil</span></code> since Python 3.4,
and is now an alias of <a href="https://docs.python.org/3.13/library/exceptions.html#RuntimeError" title="RuntimeError"><code><span>RuntimeError</span></code></a>.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/symtable.html#module-symtable" title="symtable: Interface to the compiler&#39;s internal symbol tables."><code><span>symtable</span></code></a>:</p>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/symtable.html#symtable.Class.get_methods" title="symtable.Class.get_methods"><code><span>Class.get_methods</span></code></a> method
has been deprecated since Python 3.14.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code><span>sys</span></code></a>:</p>
<ul>
<li><p>The <a href="https://docs.python.org/3.13/library/sys.html#sys._enablelegacywindowsfsencoding" title="sys._enablelegacywindowsfsencoding"><code><span>_enablelegacywindowsfsencoding()</span></code></a> function
has been deprecated since Python 3.13.
Use the <span id="index-45"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHONLEGACYWINDOWSFSENCODING"><code><span>PYTHONLEGACYWINDOWSFSENCODING</span></code></a> environment variable instead.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code><span>tarfile</span></code></a>:</p>
<ul>
<li><p>The undocumented and unused <code><span>TarFile.tarfile</span></code> attribute
has been deprecated since Python 3.13.</p></li>
</ul>
</li>
</ul>
</section>
<section id="pending-removal-in-future-versions">
<h3>Pending Removal in Future Versions<a href="#pending-removal-in-future-versions" title="Link to this heading">¶</a></h3>
<p>The following APIs will be removed in the future,
although there is currently no date scheduled for their removal.</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code><span>argparse</span></code></a>: Nesting argument groups and nesting mutually exclusive
groups are deprecated.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/array.html#module-array" title="array: Space efficient arrays of uniformly typed numeric values."><code><span>array</span></code></a>’s <code><span>&#39;u&#39;</span></code> format code (<a href="https://github.com/python/cpython/issues/57281">gh-57281</a>)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code><span>builtins</span></code></a>:</p>
<ul>
<li><p><code><span>bool(NotImplemented)</span></code>.</p></li>
<li><p>Generators: <code><span>throw(type,</span> <span>exc,</span> <span>tb)</span></code> and <code><span>athrow(type,</span> <span>exc,</span> <span>tb)</span></code>
signature is deprecated: use <code><span>throw(exc)</span></code> and <code><span>athrow(exc)</span></code> instead,
the single argument signature.</p></li>
<li><p>Currently Python accepts numeric literals immediately followed by keywords,
for example <code><span>0in</span> <span>x</span></code>, <code><span>1or</span> <span>x</span></code>, <code><span>0if</span> <span>1else</span> <span>2</span></code>.  It allows confusing and
ambiguous expressions like <code><span>[0x1for</span> <span>x</span> <span>in</span> <span>y]</span></code> (which can be interpreted as
<code><span>[0x1</span> <span>for</span> <span>x</span> <span>in</span> <span>y]</span></code> or <code><span>[0x1f</span> <span>or</span> <span>x</span> <span>in</span> <span>y]</span></code>).  A syntax warning is raised
if the numeric literal is immediately followed by one of keywords
<a href="https://docs.python.org/3.13/reference/expressions.html#and"><code><span>and</span></code></a>, <a href="https://docs.python.org/3.13/reference/compound_stmts.html#else"><code><span>else</span></code></a>, <a href="https://docs.python.org/3.13/reference/compound_stmts.html#for"><code><span>for</span></code></a>, <a href="https://docs.python.org/3.13/reference/compound_stmts.html#if"><code><span>if</span></code></a>,
<a href="https://docs.python.org/3.13/reference/expressions.html#in"><code><span>in</span></code></a>, <a href="https://docs.python.org/3.13/reference/expressions.html#is"><code><span>is</span></code></a> and <a href="https://docs.python.org/3.13/reference/expressions.html#or"><code><span>or</span></code></a>.  In a future release it
will be changed to a syntax error. (<a href="https://github.com/python/cpython/issues/87999">gh-87999</a>)</p></li>
<li><p>Support for <code><span>__index__()</span></code> and <code><span>__int__()</span></code> method returning non-int type:
these methods will be required to return an instance of a strict subclass of
<a href="https://docs.python.org/3.13/library/functions.html#int" title="int"><code><span>int</span></code></a>.</p></li>
<li><p>Support for <code><span>__float__()</span></code> method returning a strict subclass of
<a href="https://docs.python.org/3.13/library/functions.html#float" title="float"><code><span>float</span></code></a>: these methods will be required to return an instance of
<a href="https://docs.python.org/3.13/library/functions.html#float" title="float"><code><span>float</span></code></a>.</p></li>
<li><p>Support for <code><span>__complex__()</span></code> method returning a strict subclass of
<a href="https://docs.python.org/3.13/library/functions.html#complex" title="complex"><code><span>complex</span></code></a>: these methods will be required to return an instance of
<a href="https://docs.python.org/3.13/library/functions.html#complex" title="complex"><code><span>complex</span></code></a>.</p></li>
<li><p>Delegation of <code><span>int()</span></code> to <code><span>__trunc__()</span></code> method.</p></li>
<li><p>Passing a complex number as the <em>real</em> or <em>imag</em> argument in the
<a href="https://docs.python.org/3.13/library/functions.html#complex" title="complex"><code><span>complex()</span></code></a> constructor is now deprecated; it should only be passed
as a single positional argument.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/109218">gh-109218</a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/calendar.html#module-calendar" title="calendar: Functions for working with calendars, including some emulation of the Unix cal program."><code><span>calendar</span></code></a>: <code><span>calendar.January</span></code> and <code><span>calendar.February</span></code> constants are
deprecated and replaced by <a href="https://docs.python.org/3.13/library/calendar.html#calendar.JANUARY" title="calendar.JANUARY"><code><span>calendar.JANUARY</span></code></a> and
<a href="https://docs.python.org/3.13/library/calendar.html#calendar.FEBRUARY" title="calendar.FEBRUARY"><code><span>calendar.FEBRUARY</span></code></a>.
(Contributed by Prince Roshan in <a href="https://github.com/python/cpython/issues/103636">gh-103636</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/reference/datamodel.html#codeobject.co_lnotab" title="codeobject.co_lnotab"><code><span>codeobject.co_lnotab</span></code></a>: use the <a href="https://docs.python.org/3.13/reference/datamodel.html#codeobject.co_lines" title="codeobject.co_lines"><code><span>codeobject.co_lines()</span></code></a> method
instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/datetime.html#module-datetime" title="datetime: Basic date and time types."><code><span>datetime</span></code></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/datetime.html#datetime.datetime.utcnow" title="datetime.datetime.utcnow"><code><span>utcnow()</span></code></a>:
use <code><span>datetime.datetime.now(tz=datetime.UTC)</span></code>.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/datetime.html#datetime.datetime.utcfromtimestamp" title="datetime.datetime.utcfromtimestamp"><code><span>utcfromtimestamp()</span></code></a>:
use <code><span>datetime.datetime.fromtimestamp(timestamp,</span> <span>tz=datetime.UTC)</span></code>.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/gettext.html#module-gettext" title="gettext: Multilingual internationalization services."><code><span>gettext</span></code></a>: Plural value must be an integer.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code><span>importlib</span></code></a>:</p>
<ul>
<li><p><code><span>load_module()</span></code> method: use <code><span>exec_module()</span></code> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.html#importlib.util.cache_from_source" title="importlib.util.cache_from_source"><code><span>cache_from_source()</span></code></a> <em>debug_override</em> parameter is
deprecated: use the <em>optimization</em> parameter instead.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/importlib.metadata.html#module-importlib.metadata" title="importlib.metadata: Accessing package metadata"><code><span>importlib.metadata</span></code></a>:</p>
<ul>
<li><p><code><span>EntryPoints</span></code> tuple interface.</p></li>
<li><p>Implicit <code><span>None</span></code> on return values.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code><span>logging</span></code></a>: the <code><span>warn()</span></code> method has been deprecated
since Python 3.3, use <a href="https://docs.python.org/3.13/library/logging.html#logging.warning" title="logging.warning"><code><span>warning()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code><span>mailbox</span></code></a>: Use of StringIO input and text mode is deprecated, use
BytesIO and binary mode instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code><span>os</span></code></a>: Calling <a href="https://docs.python.org/3.13/library/os.html#os.register_at_fork" title="os.register_at_fork"><code><span>os.register_at_fork()</span></code></a> in multi-threaded process.</p></li>
<li><p><code><span>pydoc.ErrorDuringImport</span></code>: A tuple value for <em>exc_info</em> parameter is
deprecated, use an exception instance.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/re.html#module-re" title="re: Regular expression operations."><code><span>re</span></code></a>: More strict rules are now applied for numerical group references
and group names in regular expressions.  Only sequence of ASCII digits is now
accepted as a numerical reference.  The group name in bytes patterns and
replacement strings can now only contain ASCII letters and digits and
underscore.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/91760">gh-91760</a>.)</p></li>
<li><p><code><span>sre_compile</span></code>, <code><span>sre_constants</span></code> and <code><span>sre_parse</span></code> modules.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/shutil.html#module-shutil" title="shutil: High-level file operations, including copying."><code><span>shutil</span></code></a>: <a href="https://docs.python.org/3.13/library/shutil.html#shutil.rmtree" title="shutil.rmtree"><code><span>rmtree()</span></code></a>’s <em>onerror</em> parameter is deprecated in
Python 3.12; use the <em>onexc</em> parameter instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code><span>ssl</span></code></a> options and protocols:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code><span>ssl.SSLContext</span></code></a> without protocol argument is deprecated.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code><span>ssl.SSLContext</span></code></a>: <a href="https://docs.python.org/3.13/library/ssl.html#ssl.SSLContext.set_npn_protocols" title="ssl.SSLContext.set_npn_protocols"><code><span>set_npn_protocols()</span></code></a> and
<code><span>selected_npn_protocol()</span></code> are deprecated: use ALPN
instead.</p></li>
<li><p><code><span>ssl.OP_NO_SSL*</span></code> options</p></li>
<li><p><code><span>ssl.OP_NO_TLS*</span></code> options</p></li>
<li><p><code><span>ssl.PROTOCOL_SSLv3</span></code></p></li>
<li><p><code><span>ssl.PROTOCOL_TLS</span></code></p></li>
<li><p><code><span>ssl.PROTOCOL_TLSv1</span></code></p></li>
<li><p><code><span>ssl.PROTOCOL_TLSv1_1</span></code></p></li>
<li><p><code><span>ssl.PROTOCOL_TLSv1_2</span></code></p></li>
<li><p><code><span>ssl.TLSVersion.SSLv3</span></code></p></li>
<li><p><code><span>ssl.TLSVersion.TLSv1</span></code></p></li>
<li><p><code><span>ssl.TLSVersion.TLSv1_1</span></code></p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/sysconfig.html#sysconfig.is_python_build" title="sysconfig.is_python_build"><code><span>sysconfig.is_python_build()</span></code></a> <em>check_home</em> parameter is deprecated and
ignored.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/threading.html#module-threading" title="threading: Thread-based parallelism."><code><span>threading</span></code></a> methods:</p>
<ul>
<li><p><code><span>threading.Condition.notifyAll()</span></code>: use <a href="https://docs.python.org/3.13/library/threading.html#threading.Condition.notify_all" title="threading.Condition.notify_all"><code><span>notify_all()</span></code></a>.</p></li>
<li><p><code><span>threading.Event.isSet()</span></code>: use <a href="https://docs.python.org/3.13/library/threading.html#threading.Event.is_set" title="threading.Event.is_set"><code><span>is_set()</span></code></a>.</p></li>
<li><p><code><span>threading.Thread.isDaemon()</span></code>, <a href="https://docs.python.org/3.13/library/threading.html#threading.Thread.setDaemon" title="threading.Thread.setDaemon"><code><span>threading.Thread.setDaemon()</span></code></a>:
use <a href="https://docs.python.org/3.13/library/threading.html#threading.Thread.daemon" title="threading.Thread.daemon"><code><span>threading.Thread.daemon</span></code></a> attribute.</p></li>
<li><p><code><span>threading.Thread.getName()</span></code>, <a href="https://docs.python.org/3.13/library/threading.html#threading.Thread.setName" title="threading.Thread.setName"><code><span>threading.Thread.setName()</span></code></a>:
use <a href="https://docs.python.org/3.13/library/threading.html#threading.Thread.name" title="threading.Thread.name"><code><span>threading.Thread.name</span></code></a> attribute.</p></li>
<li><p><code><span>threading.currentThread()</span></code>: use <a href="https://docs.python.org/3.13/library/threading.html#threading.current_thread" title="threading.current_thread"><code><span>threading.current_thread()</span></code></a>.</p></li>
<li><p><code><span>threading.activeCount()</span></code>: use <a href="https://docs.python.org/3.13/library/threading.html#threading.active_count" title="threading.active_count"><code><span>threading.active_count()</span></code></a>.</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/typing.html#typing.Text" title="typing.Text"><code><span>typing.Text</span></code></a> (<a href="https://github.com/python/cpython/issues/92332">gh-92332</a>).</p></li>
<li><p><a href="https://docs.python.org/3.13/library/unittest.html#unittest.IsolatedAsyncioTestCase" title="unittest.IsolatedAsyncioTestCase"><code><span>unittest.IsolatedAsyncioTestCase</span></code></a>: it is deprecated to return a value
that is not <code><span>None</span></code> from a test case.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/urllib.parse.html#module-urllib.parse" title="urllib.parse: Parse URLs into or assemble them from components."><code><span>urllib.parse</span></code></a> deprecated functions: <a href="https://docs.python.org/3.13/library/urllib.parse.html#urllib.parse.urlparse" title="urllib.parse.urlparse"><code><span>urlparse()</span></code></a> instead</p>
<ul>
<li><p><code><span>splitattr()</span></code></p></li>
<li><p><code><span>splithost()</span></code></p></li>
<li><p><code><span>splitnport()</span></code></p></li>
<li><p><code><span>splitpasswd()</span></code></p></li>
<li><p><code><span>splitport()</span></code></p></li>
<li><p><code><span>splitquery()</span></code></p></li>
<li><p><code><span>splittag()</span></code></p></li>
<li><p><code><span>splittype()</span></code></p></li>
<li><p><code><span>splituser()</span></code></p></li>
<li><p><code><span>splitvalue()</span></code></p></li>
<li><p><code><span>to_bytes()</span></code></p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/urllib.request.html#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code><span>urllib.request</span></code></a>: <a href="https://docs.python.org/3.13/library/urllib.request.html#urllib.request.URLopener" title="urllib.request.URLopener"><code><span>URLopener</span></code></a> and
<a href="https://docs.python.org/3.13/library/urllib.request.html#urllib.request.FancyURLopener" title="urllib.request.FancyURLopener"><code><span>FancyURLopener</span></code></a> style of invoking requests is
deprecated. Use newer <a href="https://docs.python.org/3.13/library/urllib.request.html#urllib.request.urlopen" title="urllib.request.urlopen"><code><span>urlopen()</span></code></a> functions and methods.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/wsgiref.html#module-wsgiref" title="wsgiref: WSGI Utilities and Reference Implementation."><code><span>wsgiref</span></code></a>: <code><span>SimpleHandler.stdout.write()</span></code> should not do partial
writes.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code><span>xml.etree.ElementTree</span></code></a>: Testing the truth value of an
<a href="https://docs.python.org/3.13/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element" title="xml.etree.ElementTree.Element"><code><span>Element</span></code></a> is deprecated. In a future release it
will always return <code><span>True</span></code>. Prefer explicit <code><span>len(elem)</span></code> or
<code><span>elem</span> <span>is</span> <span>not</span> <span>None</span></code> tests instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/library/zipimport.html#zipimport.zipimporter.load_module" title="zipimport.zipimporter.load_module"><code><span>zipimport.zipimporter.load_module()</span></code></a> is deprecated:
use <a href="https://docs.python.org/3.13/library/zipimport.html#zipimport.zipimporter.exec_module" title="zipimport.zipimporter.exec_module"><code><span>exec_module()</span></code></a> instead.</p></li>
</ul>
</section>
</section>
<section id="cpython-bytecode-changes">
<h2>CPython Bytecode Changes<a href="#cpython-bytecode-changes" title="Link to this heading">¶</a></h2>
<ul>
<li><p>The oparg of <a href="https://docs.python.org/3.13/library/dis.html#opcode-YIELD_VALUE"><code><span>YIELD_VALUE</span></code></a> is now
<code><span>1</span></code> if the yield is part of a yield-from or await, and <code><span>0</span></code> otherwise.
The oparg of <a href="https://docs.python.org/3.13/library/dis.html#opcode-RESUME"><code><span>RESUME</span></code></a> was changed to add a bit indicating
if the except-depth is 1, which is needed to optimize closing of generators.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/111354">gh-111354</a>.)</p></li>
</ul>
</section>
<section id="c-api-changes">
<h2>C API Changes<a href="#c-api-changes" title="Link to this heading">¶</a></h2>
<section id="id7">
<h3>New Features<a href="#id7" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/monitoring.html#c-api-monitoring"><span>PyMonitoring C API</span></a>
for generating <span id="index-46"></span><a href="https://peps.python.org/pep-0669/"><strong>PEP 669</strong></a> monitoring events:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoringState" title="PyMonitoringState"><code><span>PyMonitoringState</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyStartEvent" title="PyMonitoring_FirePyStartEvent"><code><span>PyMonitoring_FirePyStartEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyResumeEvent" title="PyMonitoring_FirePyResumeEvent"><code><span>PyMonitoring_FirePyResumeEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyReturnEvent" title="PyMonitoring_FirePyReturnEvent"><code><span>PyMonitoring_FirePyReturnEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyYieldEvent" title="PyMonitoring_FirePyYieldEvent"><code><span>PyMonitoring_FirePyYieldEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireCallEvent" title="PyMonitoring_FireCallEvent"><code><span>PyMonitoring_FireCallEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireLineEvent" title="PyMonitoring_FireLineEvent"><code><span>PyMonitoring_FireLineEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireJumpEvent" title="PyMonitoring_FireJumpEvent"><code><span>PyMonitoring_FireJumpEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireBranchEvent" title="PyMonitoring_FireBranchEvent"><code><span>PyMonitoring_FireBranchEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireCReturnEvent" title="PyMonitoring_FireCReturnEvent"><code><span>PyMonitoring_FireCReturnEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyThrowEvent" title="PyMonitoring_FirePyThrowEvent"><code><span>PyMonitoring_FirePyThrowEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireRaiseEvent" title="PyMonitoring_FireRaiseEvent"><code><span>PyMonitoring_FireRaiseEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireCRaiseEvent" title="PyMonitoring_FireCRaiseEvent"><code><span>PyMonitoring_FireCRaiseEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireReraiseEvent" title="PyMonitoring_FireReraiseEvent"><code><span>PyMonitoring_FireReraiseEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireExceptionHandledEvent" title="PyMonitoring_FireExceptionHandledEvent"><code><span>PyMonitoring_FireExceptionHandledEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FirePyUnwindEvent" title="PyMonitoring_FirePyUnwindEvent"><code><span>PyMonitoring_FirePyUnwindEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_FireStopIterationEvent" title="PyMonitoring_FireStopIterationEvent"><code><span>PyMonitoring_FireStopIterationEvent()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_EnterScope" title="PyMonitoring_EnterScope"><code><span>PyMonitoring_EnterScope()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/monitoring.html#c.PyMonitoring_ExitScope" title="PyMonitoring_ExitScope"><code><span>PyMonitoring_ExitScope()</span></code></a></p></li>
</ul>
<p>(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/111997">gh-111997</a>).</p>
</li>
<li><p>Add <a href="https://docs.python.org/3.13/c-api/init.html#c.PyMutex" title="PyMutex"><code><span>PyMutex</span></code></a>, a lightweight mutex that occupies a single byte,
and the new <a href="https://docs.python.org/3.13/c-api/init.html#c.PyMutex_Lock" title="PyMutex_Lock"><code><span>PyMutex_Lock()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/init.html#c.PyMutex_Unlock" title="PyMutex_Unlock"><code><span>PyMutex_Unlock()</span></code></a> functions.
<code><span>PyMutex_Lock()</span></code> will release the <a href="https://docs.python.org/3.13/glossary.html#term-GIL"><span>GIL</span></a> (if currently held)
if the operation needs to block.
(Contributed by Sam Gross in <a href="https://github.com/python/cpython/issues/108724">gh-108724</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/time.html#c-api-time"><span>PyTime C API</span></a> to provide access to system clocks:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_t" title="PyTime_t"><code><span>PyTime_t</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_MIN" title="PyTime_MIN"><code><span>PyTime_MIN</span></code></a> and <a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_MAX" title="PyTime_MAX"><code><span>PyTime_MAX</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_AsSecondsDouble" title="PyTime_AsSecondsDouble"><code><span>PyTime_AsSecondsDouble()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_Monotonic" title="PyTime_Monotonic"><code><span>PyTime_Monotonic()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_MonotonicRaw" title="PyTime_MonotonicRaw"><code><span>PyTime_MonotonicRaw()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_PerfCounter" title="PyTime_PerfCounter"><code><span>PyTime_PerfCounter()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_PerfCounterRaw" title="PyTime_PerfCounterRaw"><code><span>PyTime_PerfCounterRaw()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_Time" title="PyTime_Time"><code><span>PyTime_Time()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/time.html#c.PyTime_TimeRaw" title="PyTime_TimeRaw"><code><span>PyTime_TimeRaw()</span></code></a>.</p></li>
</ul>
<p>(Contributed by Victor Stinner and Petr Viktorin in <a href="https://github.com/python/cpython/issues/110850">gh-110850</a>.)</p>
</li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_ContainsString" title="PyDict_ContainsString"><code><span>PyDict_ContainsString()</span></code></a> function
with the same behavior as <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_Contains" title="PyDict_Contains"><code><span>PyDict_Contains()</span></code></a>,
but <em>key</em> is specified as a <span><span>const</span><span> </span><span>char</span><span>*</span></span> UTF-8 encoded bytes string,
rather than a <span><a href="https://docs.python.org/3.13/c-api/structures.html#c.PyObject" title="PyObject"><span>PyObject</span></a><span>*</span></span>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108314">gh-108314</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_GetItemRef" title="PyDict_GetItemRef"><code><span>PyDict_GetItemRef()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_GetItemStringRef" title="PyDict_GetItemStringRef"><code><span>PyDict_GetItemStringRef()</span></code></a>
functions,
which behave similarly to <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_GetItemWithError" title="PyDict_GetItemWithError"><code><span>PyDict_GetItemWithError()</span></code></a>,
but return a  <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a> instead of a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
Moreover, these functions return <code><span>-1</span></code> on error,
removing the need to check <code><span>PyErr_Occurred()</span></code>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106004">gh-106004</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_SetDefaultRef" title="PyDict_SetDefaultRef"><code><span>PyDict_SetDefaultRef()</span></code></a> function,
which behaves similarly to <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_SetDefault" title="PyDict_SetDefault"><code><span>PyDict_SetDefault()</span></code></a>,
but returns a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a> instead of a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
This function returns <code><span>-1</span></code> on error,
<code><span>0</span></code> on insertion,
and <code><span>1</span></code> if the key was already present in the dictionary.
(Contributed by Sam Gross in <a href="https://github.com/python/cpython/issues/112066">gh-112066</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_Pop" title="PyDict_Pop"><code><span>PyDict_Pop()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_PopString" title="PyDict_PopString"><code><span>PyDict_PopString()</span></code></a> functions
to remove a key from a dictionary and optionally return the removed value.
This is similar to <a href="https://docs.python.org/3.13/library/stdtypes.html#dict.pop" title="dict.pop"><code><span>dict.pop()</span></code></a>,
though there is no default value,
and <a href="https://docs.python.org/3.13/library/exceptions.html#KeyError" title="KeyError"><code><span>KeyError</span></code></a> is not raised for missing keys.
(Contributed by Stefan Behnel and Victor Stinner in <a href="https://github.com/python/cpython/issues/111262">gh-111262</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_GetOptionalItem" title="PyMapping_GetOptionalItem"><code><span>PyMapping_GetOptionalItem()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_GetOptionalItemString" title="PyMapping_GetOptionalItemString"><code><span>PyMapping_GetOptionalItemString()</span></code></a> functions
as alternatives to <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_GetItem" title="PyObject_GetItem"><code><span>PyObject_GetItem()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_GetItemString" title="PyMapping_GetItemString"><code><span>PyMapping_GetItemString()</span></code></a> respectively.
The new functions do not raise <a href="https://docs.python.org/3.13/library/exceptions.html#KeyError" title="KeyError"><code><span>KeyError</span></code></a>
if the requested key is missing from the mapping.
These variants are more convenient and faster
if a missing key should not be treated as a failure.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/106307">gh-106307</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_GetOptionalAttr" title="PyObject_GetOptionalAttr"><code><span>PyObject_GetOptionalAttr()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_GetOptionalAttrString" title="PyObject_GetOptionalAttrString"><code><span>PyObject_GetOptionalAttrString()</span></code></a> functions
as alternatives to  <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_GetAttr" title="PyObject_GetAttr"><code><span>PyObject_GetAttr()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_GetAttrString" title="PyObject_GetAttrString"><code><span>PyObject_GetAttrString()</span></code></a> respectively.
The new functions do not raise <a href="https://docs.python.org/3.13/library/exceptions.html#AttributeError" title="AttributeError"><code><span>AttributeError</span></code></a>
if the requested attribute is not found on the object.
These variants are more convenient and faster
if the missing attribute should not be treated as a failure.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/106521">gh-106521</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_FormatUnraisable" title="PyErr_FormatUnraisable"><code><span>PyErr_FormatUnraisable()</span></code></a> function
as an extension to <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_WriteUnraisable" title="PyErr_WriteUnraisable"><code><span>PyErr_WriteUnraisable()</span></code></a>
that allows customizing the warning message.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/108082">gh-108082</a>.)</p></li>
<li><p>Add new functions that return a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a> instead of
a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a> for frame locals, globals, and builtins,
as part of <a href="#whatsnew313-locals-semantics"><span>PEP 667</span></a>:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetFrameBuiltins" title="PyEval_GetFrameBuiltins"><code><span>PyEval_GetFrameBuiltins()</span></code></a> replaces <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetBuiltins" title="PyEval_GetBuiltins"><code><span>PyEval_GetBuiltins()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetFrameGlobals" title="PyEval_GetFrameGlobals"><code><span>PyEval_GetFrameGlobals()</span></code></a> replaces <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetGlobals" title="PyEval_GetGlobals"><code><span>PyEval_GetGlobals()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetFrameLocals" title="PyEval_GetFrameLocals"><code><span>PyEval_GetFrameLocals()</span></code></a> replaces <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetLocals" title="PyEval_GetLocals"><code><span>PyEval_GetLocals()</span></code></a></p></li>
</ul>
<p>(Contributed by Mark Shannon and Tian Gao in <a href="https://github.com/python/cpython/issues/74929">gh-74929</a>.)</p>
</li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/object.html#c.Py_GetConstant" title="Py_GetConstant"><code><span>Py_GetConstant()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/object.html#c.Py_GetConstantBorrowed" title="Py_GetConstantBorrowed"><code><span>Py_GetConstantBorrowed()</span></code></a>
functions to get <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong</span></a>
or <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed</span></a> references to constants.
For example, <code><span>Py_GetConstant(Py_CONSTANT_ZERO)</span></code> returns a strong reference
to the constant zero.
(Contributed by Victor  Stinner in <a href="https://github.com/python/cpython/issues/115754">gh-115754</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_AddModuleRef" title="PyImport_AddModuleRef"><code><span>PyImport_AddModuleRef()</span></code></a> function
as a replacement for <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_AddModule" title="PyImport_AddModule"><code><span>PyImport_AddModule()</span></code></a>
that returns a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a> instead of a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105922">gh-105922</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/init.html#c.Py_IsFinalizing" title="Py_IsFinalizing"><code><span>Py_IsFinalizing()</span></code></a> function to check
whether the main Python interpreter is
<a href="https://docs.python.org/3.13/glossary.html#term-interpreter-shutdown"><span>shutting down</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108014">gh-108014</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/list.html#c.PyList_GetItemRef" title="PyList_GetItemRef"><code><span>PyList_GetItemRef()</span></code></a> function
as a replacement for <a href="https://docs.python.org/3.13/c-api/list.html#c.PyList_GetItem" title="PyList_GetItem"><code><span>PyList_GetItem()</span></code></a>
that returns a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a> instead of a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
(Contributed by Sam Gross in <a href="https://github.com/python/cpython/issues/114329">gh-114329</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/list.html#c.PyList_Extend" title="PyList_Extend"><code><span>PyList_Extend()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/list.html#c.PyList_Clear" title="PyList_Clear"><code><span>PyList_Clear()</span></code></a> functions,
mirroring the Python <code><span>list.extend()</span></code> and <code><span>list.clear()</span></code> methods.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/111138">gh-111138</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/long.html#c.PyLong_AsInt" title="PyLong_AsInt"><code><span>PyLong_AsInt()</span></code></a> function.
It behaves similarly to <a href="https://docs.python.org/3.13/c-api/long.html#c.PyLong_AsLong" title="PyLong_AsLong"><code><span>PyLong_AsLong()</span></code></a>,
but stores the result in a C <span><span>int</span></span> instead of a C <span><span>long</span></span>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108014">gh-108014</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/long.html#c.PyLong_AsNativeBytes" title="PyLong_AsNativeBytes"><code><span>PyLong_AsNativeBytes()</span></code></a>, <a href="https://docs.python.org/3.13/c-api/long.html#c.PyLong_FromNativeBytes" title="PyLong_FromNativeBytes"><code><span>PyLong_FromNativeBytes()</span></code></a>,
and <a href="https://docs.python.org/3.13/c-api/long.html#c.PyLong_FromUnsignedNativeBytes" title="PyLong_FromUnsignedNativeBytes"><code><span>PyLong_FromUnsignedNativeBytes()</span></code></a> functions
to simplify converting between native integer types
and Python <a href="https://docs.python.org/3.13/library/functions.html#int" title="int"><code><span>int</span></code></a> objects.
(Contributed by Steve Dower in <a href="https://github.com/python/cpython/issues/111140">gh-111140</a>.)</p></li>
<li><p>Add <a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_Add" title="PyModule_Add"><code><span>PyModule_Add()</span></code></a> function, which is similar to
<a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_AddObjectRef" title="PyModule_AddObjectRef"><code><span>PyModule_AddObjectRef()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_AddObject" title="PyModule_AddObject"><code><span>PyModule_AddObject()</span></code></a>,
but always steals a reference to the value.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/86493">gh-86493</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/hash.html#c.PyObject_GenericHash" title="PyObject_GenericHash"><code><span>PyObject_GenericHash()</span></code></a> function
that implements the default hashing function of a Python object.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/113024">gh-113024</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/hash.html#c.Py_HashPointer" title="Py_HashPointer"><code><span>Py_HashPointer()</span></code></a> function to hash a raw pointer.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/111545">gh-111545</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_VisitManagedDict" title="PyObject_VisitManagedDict"><code><span>PyObject_VisitManagedDict()</span></code></a> and
<a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_ClearManagedDict" title="PyObject_ClearManagedDict"><code><span>PyObject_ClearManagedDict()</span></code></a> functions.
which must be called by the traverse and clear functions of a type using
the <a href="https://docs.python.org/3.13/c-api/typeobj.html#c.Py_TPFLAGS_MANAGED_DICT" title="Py_TPFLAGS_MANAGED_DICT"><code><span>Py_TPFLAGS_MANAGED_DICT</span></code></a> flag.
The <a href="https://github.com/python/pythoncapi-compat/">pythoncapi-compat project</a> can be used to
use these functions with Python 3.11 and 3.12.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/107073">gh-107073</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/init.html#c.PyRefTracer_SetTracer" title="PyRefTracer_SetTracer"><code><span>PyRefTracer_SetTracer()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/init.html#c.PyRefTracer_GetTracer" title="PyRefTracer_GetTracer"><code><span>PyRefTracer_GetTracer()</span></code></a> functions,
which enable tracking object creation and destruction
in the same way that the <a href="https://docs.python.org/3.13/library/tracemalloc.html#module-tracemalloc" title="tracemalloc: Trace memory allocations."><code><span>tracemalloc</span></code></a> module does.
(Contributed by Pablo Galindo in <a href="https://github.com/python/cpython/issues/93502">gh-93502</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_AuditTuple" title="PySys_AuditTuple"><code><span>PySys_AuditTuple()</span></code></a> function
as an alternative to <a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_Audit" title="PySys_Audit"><code><span>PySys_Audit()</span></code></a>
that takes event arguments as a Python <a href="https://docs.python.org/3.13/library/stdtypes.html#tuple" title="tuple"><code><span>tuple</span></code></a> object.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/85283">gh-85283</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThreadState_GetUnchecked" title="PyThreadState_GetUnchecked"><code><span>PyThreadState_GetUnchecked()</span></code></a> function
as an alternative to <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThreadState_Get" title="PyThreadState_Get"><code><span>PyThreadState_Get()</span></code></a>
that doesn’t kill the process with a fatal error if it is <code><span>NULL</span></code>.
The caller is responsible for checking if the result is <code><span>NULL</span></code>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108867">gh-108867</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/type.html#c.PyType_GetFullyQualifiedName" title="PyType_GetFullyQualifiedName"><code><span>PyType_GetFullyQualifiedName()</span></code></a> function
to get the type’s fully qualified name.
The module name is prepended if <a href="https://docs.python.org/3.13/reference/datamodel.html#type.__module__" title="type.__module__"><code><span>type.__module__</span></code></a> is
a string and is not equal to either <code><span>&#39;builtins&#39;</span></code> or <code><span>&#39;__main__&#39;</span></code>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/111696">gh-111696</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/type.html#c.PyType_GetModuleName" title="PyType_GetModuleName"><code><span>PyType_GetModuleName()</span></code></a> function
to get the type’s module name. This is equivalent to getting the
<a href="https://docs.python.org/3.13/reference/datamodel.html#type.__module__" title="type.__module__"><code><span>type.__module__</span></code></a> attribute.
(Contributed by Eric Snow and Victor Stinner in <a href="https://github.com/python/cpython/issues/111696">gh-111696</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/unicode.html#c.PyUnicode_EqualToUTF8AndSize" title="PyUnicode_EqualToUTF8AndSize"><code><span>PyUnicode_EqualToUTF8AndSize()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/unicode.html#c.PyUnicode_EqualToUTF8" title="PyUnicode_EqualToUTF8"><code><span>PyUnicode_EqualToUTF8()</span></code></a> functions
to compare a Unicode object with a <span><span>const</span><span> </span><span>char</span><span>*</span></span> UTF-8 encoded string
and <code><span>1</span></code> if they are equal or <code><span>0</span></code> otherwise.
These functions do not raise exceptions.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/110289">gh-110289</a>.)</p></li>
<li><p>Add the <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetRef" title="PyWeakref_GetRef"><code><span>PyWeakref_GetRef()</span></code></a> function
as an alternative to  <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetObject" title="PyWeakref_GetObject"><code><span>PyWeakref_GetObject()</span></code></a>
that returns a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a>
or <code><span>NULL</span></code> if the referent is no longer live.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105927">gh-105927</a>.)</p></li>
<li><p>Add fixed variants of functions which silently ignore errors:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttrWithError" title="PyObject_HasAttrWithError"><code><span>PyObject_HasAttrWithError()</span></code></a> replaces <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttr" title="PyObject_HasAttr"><code><span>PyObject_HasAttr()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttrStringWithError" title="PyObject_HasAttrStringWithError"><code><span>PyObject_HasAttrStringWithError()</span></code></a>
replaces <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttrString" title="PyObject_HasAttrString"><code><span>PyObject_HasAttrString()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKeyWithError" title="PyMapping_HasKeyWithError"><code><span>PyMapping_HasKeyWithError()</span></code></a> replaces <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKey" title="PyMapping_HasKey"><code><span>PyMapping_HasKey()</span></code></a>.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKeyStringWithError" title="PyMapping_HasKeyStringWithError"><code><span>PyMapping_HasKeyStringWithError()</span></code></a>
replaces <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKeyString" title="PyMapping_HasKeyString"><code><span>PyMapping_HasKeyString()</span></code></a>.</p></li>
</ul>
<p>The new functions return <code><span>-1</span></code> for errors
and the standard <code><span>1</span></code> for true and <code><span>0</span></code> for false.</p>
<p>(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/108511">gh-108511</a>.)</p>
</li>
</ul>
</section>
<section id="changed-c-apis">
<h3>Changed C APIs<a href="#changed-c-apis" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <em>keywords</em> parameter of <a href="https://docs.python.org/3.13/c-api/arg.html#c.PyArg_ParseTupleAndKeywords" title="PyArg_ParseTupleAndKeywords"><code><span>PyArg_ParseTupleAndKeywords()</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/arg.html#c.PyArg_VaParseTupleAndKeywords" title="PyArg_VaParseTupleAndKeywords"><code><span>PyArg_VaParseTupleAndKeywords()</span></code></a>
now has type <span><span>char</span><span> </span><span>*</span><span>const</span><span>*</span></span> in C
and <span><span>const</span><span> </span><span>char</span><span> </span><span>*</span><span>const</span><span>*</span></span> in C++,
instead of <span><span>char</span><span>*</span><span>*</span></span>.
In C++, this makes these functions compatible with arguments
of type <span><span>const</span><span> </span><span>char</span><span> </span><span>*</span><span>const</span><span>*</span></span>, <span><span>const</span><span> </span><span>char</span><span>*</span><span>*</span></span>,
or <span><span>char</span><span> </span><span>*</span><span>const</span><span>*</span></span> without an explicit type cast.
In C, the functions only support arguments of type <span><span>char</span><span> </span><span>*</span><span>const</span><span>*</span></span>.
This can be overridden with the <a href="https://docs.python.org/3.13/c-api/arg.html#c.PY_CXX_CONST" title="PY_CXX_CONST"><code><span>PY_CXX_CONST</span></code></a> macro.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/65210">gh-65210</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/arg.html#c.PyArg_ParseTupleAndKeywords" title="PyArg_ParseTupleAndKeywords"><code><span>PyArg_ParseTupleAndKeywords()</span></code></a> now supports
non-ASCII keyword parameter names.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/110815">gh-110815</a>.)</p></li>
<li><p>The <code><span>PyCode_GetFirstFree()</span></code> function is now unstable API
and is now named <a href="https://docs.python.org/3.13/c-api/code.html#c.PyUnstable_Code_GetFirstFree" title="PyUnstable_Code_GetFirstFree"><code><span>PyUnstable_Code_GetFirstFree()</span></code></a>.
(Contributed by Bogdan Romanyuk in <a href="https://github.com/python/cpython/issues/115781">gh-115781</a>.)</p></li>
<li><p>The <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_GetItem" title="PyDict_GetItem"><code><span>PyDict_GetItem()</span></code></a>, <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_GetItemString" title="PyDict_GetItemString"><code><span>PyDict_GetItemString()</span></code></a>,
<a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKey" title="PyMapping_HasKey"><code><span>PyMapping_HasKey()</span></code></a>, <a href="https://docs.python.org/3.13/c-api/mapping.html#c.PyMapping_HasKeyString" title="PyMapping_HasKeyString"><code><span>PyMapping_HasKeyString()</span></code></a>,
<a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttr" title="PyObject_HasAttr"><code><span>PyObject_HasAttr()</span></code></a>, <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_HasAttrString" title="PyObject_HasAttrString"><code><span>PyObject_HasAttrString()</span></code></a>,
and <a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_GetObject" title="PySys_GetObject"><code><span>PySys_GetObject()</span></code></a> functions,
each of which clears all errors which occurred when calling them
now reports these errors using <a href="https://docs.python.org/3.13/library/sys.html#sys.unraisablehook" title="sys.unraisablehook"><code><span>sys.unraisablehook()</span></code></a>.
You may replace them with other functions as recommended in the documentation.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/106672">gh-106672</a>.)</p></li>
<li><p>Add support for the <code><span>%T</span></code>, <code><span>%#T</span></code>, <code><span>%N</span></code> and <code><span>%#N</span></code> formats
to <a href="https://docs.python.org/3.13/c-api/unicode.html#c.PyUnicode_FromFormat" title="PyUnicode_FromFormat"><code><span>PyUnicode_FromFormat()</span></code></a>:</p>
<ul>
<li><p><code><span>%T</span></code>: Get the fully qualified name of an object type</p></li>
<li><p><code><span>%#T</span></code>: As above, but use a colon as the separator</p></li>
<li><p><code><span>%N</span></code>: Get the fully qualified name of a type</p></li>
<li><p><code><span>%#N</span></code>: As above, but use a colon as the separator</p></li>
</ul>
<p>See <span id="index-47"></span><a href="https://peps.python.org/pep-0737/"><strong>PEP 737</strong></a> for more information.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/111696">gh-111696</a>.)</p>
</li>
<li><p>You no longer have to define the <code><span>PY_SSIZE_T_CLEAN</span></code> macro before
including <code><span>Python.h</span></code> when using <code><span>#</span></code> formats in
<a href="https://docs.python.org/3.13/c-api/arg.html#arg-parsing-string-and-buffers"><span>format codes</span></a>.
APIs accepting the format codes always use <code><span>Py_ssize_t</span></code> for <code><span>#</span></code> formats.
(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/104922">gh-104922</a>.)</p></li>
<li><p>If Python is built in <a href="https://docs.python.org/3.13/using/configure.html#debug-build"><span>debug mode</span></a>
or <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-with-assertions"><code><span>with</span> <span>assertions</span></code></a>,
<a href="https://docs.python.org/3.13/c-api/tuple.html#c.PyTuple_SET_ITEM" title="PyTuple_SET_ITEM"><code><span>PyTuple_SET_ITEM()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/list.html#c.PyList_SET_ITEM" title="PyList_SET_ITEM"><code><span>PyList_SET_ITEM()</span></code></a>
now check the index argument with an assertion.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106168">gh-106168</a>.)</p></li>
</ul>
</section>
<section id="limited-c-api-changes">
<h3>Limited C API Changes<a href="#limited-c-api-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The following functions are now included in the Limited C API:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/memory.html#c.PyMem_RawMalloc" title="PyMem_RawMalloc"><code><span>PyMem_RawMalloc()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/memory.html#c.PyMem_RawCalloc" title="PyMem_RawCalloc"><code><span>PyMem_RawCalloc()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/memory.html#c.PyMem_RawRealloc" title="PyMem_RawRealloc"><code><span>PyMem_RawRealloc()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/memory.html#c.PyMem_RawFree" title="PyMem_RawFree"><code><span>PyMem_RawFree()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_Audit" title="PySys_Audit"><code><span>PySys_Audit()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_AuditTuple" title="PySys_AuditTuple"><code><span>PySys_AuditTuple()</span></code></a></p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/type.html#c.PyType_GetModuleByDef" title="PyType_GetModuleByDef"><code><span>PyType_GetModuleByDef()</span></code></a></p></li>
</ul>
<p>(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/85283">gh-85283</a>, <a href="https://github.com/python/cpython/issues/85283">gh-85283</a>, and <a href="https://github.com/python/cpython/issues/116936">gh-116936</a>.)</p>
</li>
<li><p>Python built with <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-with-trace-refs"><code><span>--with-trace-refs</span></code></a> (tracing references)
now supports the <a href="https://docs.python.org/3.13/c-api/stable.html#limited-c-api"><span>Limited API</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108634">gh-108634</a>.)</p></li>
</ul>
</section>
<section id="removed-c-apis">
<h3>Removed C APIs<a href="#removed-c-apis" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remove several functions, macros, variables, etc
with names prefixed by <code><span>_Py</span></code> or <code><span>_PY</span></code> (which are considered private).
If your project is affected  by one of these removals
and you believe that the removed API should remain available,
please <a href="https://docs.python.org/3.13/bugs.html#using-the-tracker"><span>open a new issue</span></a> to request a public C API
and add <code><span>cc:</span> <span>@vstinner</span></code> to the issue to notify Victor Stinner.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106320">gh-106320</a>.)</p></li>
<li><p>Remove old buffer protocols deprecated in Python 3.0.
Use <a href="https://docs.python.org/3.13/c-api/buffer.html#bufferobjects"><span>Buffer Protocol</span></a> instead.</p>
<ul>
<li><p><code><span>PyObject_CheckReadBuffer()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code><span>PyObject_CheckBuffer()</span></code></a> to test
whether the object supports the buffer protocol.
Note that <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_CheckBuffer" title="PyObject_CheckBuffer"><code><span>PyObject_CheckBuffer()</span></code></a> doesn’t guarantee
that <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code><span>PyObject_GetBuffer()</span></code></a> will succeed.
To test if the object is actually readable,
see the next example of <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code><span>PyObject_GetBuffer()</span></code></a>.</p></li>
<li><p><code><span>PyObject_AsCharBuffer()</span></code>, <code><span>PyObject_AsReadBuffer()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code><span>PyObject_GetBuffer()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyBuffer_Release" title="PyBuffer_Release"><code><span>PyBuffer_Release()</span></code></a> instead:</p>
<div><div><pre><span></span><span>Py_buffer</span><span> </span><span>view</span><span>;</span>
<span>if</span><span> </span><span>(</span><span>PyObject_GetBuffer</span><span>(</span><span>obj</span><span>,</span><span> </span><span>&amp;</span><span>view</span><span>,</span><span> </span><span>PyBUF_SIMPLE</span><span>)</span><span> </span><span>&lt;</span><span> </span><span>0</span><span>)</span><span> </span><span>{</span>
<span>    </span><span>return</span><span> </span><span>NULL</span><span>;</span>
<span>}</span>
<span>// Use `view.buf` and `view.len` to read from the buffer.</span>
<span>// You may need to cast buf as `(const char*)view.buf`.</span>
<span>PyBuffer_Release</span><span>(</span><span>&amp;</span><span>view</span><span>);</span>
</pre></div>
</div>
</li>
<li><p><code><span>PyObject_AsWriteBuffer()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyObject_GetBuffer" title="PyObject_GetBuffer"><code><span>PyObject_GetBuffer()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/buffer.html#c.PyBuffer_Release" title="PyBuffer_Release"><code><span>PyBuffer_Release()</span></code></a> instead:</p>
<div><div><pre><span></span><span>Py_buffer</span><span> </span><span>view</span><span>;</span>
<span>if</span><span> </span><span>(</span><span>PyObject_GetBuffer</span><span>(</span><span>obj</span><span>,</span><span> </span><span>&amp;</span><span>view</span><span>,</span><span> </span><span>PyBUF_WRITABLE</span><span>)</span><span> </span><span>&lt;</span><span> </span><span>0</span><span>)</span><span> </span><span>{</span>
<span>    </span><span>return</span><span> </span><span>NULL</span><span>;</span>
<span>}</span>
<span>// Use `view.buf` and `view.len` to write to the buffer.</span>
<span>PyBuffer_Release</span><span>(</span><span>&amp;</span><span>view</span><span>);</span>
</pre></div>
</div>
</li>
</ul>
<p>(Contributed by Inada Naoki in <a href="https://github.com/python/cpython/issues/85275">gh-85275</a>.)</p>
</li>
<li><p>Remove various functions deprecated in Python 3.9:</p>
<ul>
<li><p><code><span>PyEval_CallObject()</span></code>, <code><span>PyEval_CallObjectWithKeywords()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_CallNoArgs" title="PyObject_CallNoArgs"><code><span>PyObject_CallNoArgs()</span></code></a> or <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code><span>PyObject_Call()</span></code></a> instead.</p>
<div>
<p>Warning</p>
<p>In <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code><span>PyObject_Call()</span></code></a>, positional arguments must be a <a href="https://docs.python.org/3.13/library/stdtypes.html#tuple" title="tuple"><code><span>tuple</span></code></a>
and must not be <code><span>NULL</span></code>,
and keyword arguments must be a <a href="https://docs.python.org/3.13/library/stdtypes.html#dict" title="dict"><code><span>dict</span></code></a> or <code><span>NULL</span></code>,
whereas the removed functions checked argument types
and accepted <code><span>NULL</span></code> positional and keyword arguments.
To replace <code><span>PyEval_CallObjectWithKeywords(func,</span> <span>NULL,</span> <span>kwargs)</span></code> with
<a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code><span>PyObject_Call()</span></code></a>,
pass an empty tuple as positional arguments using
<a href="https://docs.python.org/3.13/c-api/tuple.html#c.PyTuple_New" title="PyTuple_New"><code><span>PyTuple_New(0)</span></code></a>.</p>
</div>
</li>
<li><p><code><span>PyEval_CallFunction()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_CallFunction" title="PyObject_CallFunction"><code><span>PyObject_CallFunction()</span></code></a> instead.</p></li>
<li><p><code><span>PyEval_CallMethod()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_CallMethod" title="PyObject_CallMethod"><code><span>PyObject_CallMethod()</span></code></a> instead.</p></li>
<li><p><code><span>PyCFunction_Call()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/call.html#c.PyObject_Call" title="PyObject_Call"><code><span>PyObject_Call()</span></code></a> instead.</p></li>
</ul>
<p>(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105107">gh-105107</a>.)</p>
</li>
<li><p>Remove the following old functions to configure the Python initialization,
deprecated in Python 3.11:</p>
<ul>
<li><p><code><span>PySys_AddWarnOptionUnicode()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.warnoptions" title="PyConfig.warnoptions"><code><span>PyConfig.warnoptions</span></code></a> instead.</p></li>
<li><p><code><span>PySys_AddWarnOption()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.warnoptions" title="PyConfig.warnoptions"><code><span>PyConfig.warnoptions</span></code></a> instead.</p></li>
<li><p><code><span>PySys_AddXOption()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.xoptions" title="PyConfig.xoptions"><code><span>PyConfig.xoptions</span></code></a> instead.</p></li>
<li><p><code><span>PySys_HasWarnOptions()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.xoptions" title="PyConfig.xoptions"><code><span>PyConfig.xoptions</span></code></a> instead.</p></li>
<li><p><code><span>PySys_SetPath()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.module_search_paths" title="PyConfig.module_search_paths"><code><span>PyConfig.module_search_paths</span></code></a> instead.</p></li>
<li><p><code><span>Py_SetPath()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.module_search_paths" title="PyConfig.module_search_paths"><code><span>PyConfig.module_search_paths</span></code></a> instead.</p></li>
<li><p><code><span>Py_SetStandardStreamEncoding()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.stdio_encoding" title="PyConfig.stdio_encoding"><code><span>PyConfig.stdio_encoding</span></code></a> instead,
and set also maybe <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.legacy_windows_stdio" title="PyConfig.legacy_windows_stdio"><code><span>PyConfig.legacy_windows_stdio</span></code></a> (on Windows).</p></li>
<li><p><code><span>_Py_SetProgramFullPath()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.executable" title="PyConfig.executable"><code><span>PyConfig.executable</span></code></a> instead.</p></li>
</ul>
<p>Use the new <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig" title="PyConfig"><code><span>PyConfig</span></code></a> API of the <a href="https://docs.python.org/3.13/c-api/init_config.html#init-config"><span>Python Initialization
Configuration</span></a> instead (<span id="index-48"></span><a href="https://peps.python.org/pep-0587/"><strong>PEP 587</strong></a>), added to Python 3.8.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105145">gh-105145</a>.)</p>
</li>
<li><p>Remove <code><span>PyEval_AcquireLock()</span></code> and <code><span>PyEval_ReleaseLock()</span></code> functions,
deprecated in Python 3.2.
They didn’t update the current thread state.
They can be replaced with:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyEval_SaveThread" title="PyEval_SaveThread"><code><span>PyEval_SaveThread()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/init.html#c.PyEval_RestoreThread" title="PyEval_RestoreThread"><code><span>PyEval_RestoreThread()</span></code></a>;</p></li>
<li><p>low-level <a href="https://docs.python.org/3.13/c-api/init.html#c.PyEval_AcquireThread" title="PyEval_AcquireThread"><code><span>PyEval_AcquireThread()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/init.html#c.PyEval_RestoreThread" title="PyEval_RestoreThread"><code><span>PyEval_RestoreThread()</span></code></a>;</p></li>
<li><p>or <a href="https://docs.python.org/3.13/c-api/init.html#c.PyGILState_Ensure" title="PyGILState_Ensure"><code><span>PyGILState_Ensure()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/init.html#c.PyGILState_Release" title="PyGILState_Release"><code><span>PyGILState_Release()</span></code></a>.</p></li>
</ul>
<p>(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105182">gh-105182</a>.)</p>
</li>
<li><p>Remove the <code><span>PyEval_ThreadsInitialized()</span></code> function,
deprecated in Python 3.9.
Since Python 3.7, <code><span>Py_Initialize()</span></code> always creates the GIL:
calling <code><span>PyEval_InitThreads()</span></code> does nothing and
<code><span>PyEval_ThreadsInitialized()</span></code> always returns non-zero.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105182">gh-105182</a>.)</p></li>
<li><p>Remove the <code><span>_PyInterpreterState_Get()</span></code> alias to
<a href="https://docs.python.org/3.13/c-api/init.html#c.PyInterpreterState_Get" title="PyInterpreterState_Get"><code><span>PyInterpreterState_Get()</span></code></a>
which was kept for backward compatibility with Python 3.8.
The <a href="https://github.com/python/pythoncapi-compat/">pythoncapi-compat project</a> can be used to get
<a href="https://docs.python.org/3.13/c-api/init.html#c.PyInterpreterState_Get" title="PyInterpreterState_Get"><code><span>PyInterpreterState_Get()</span></code></a> on Python 3.8 and older.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106320">gh-106320</a>.)</p></li>
<li><p>Remove the private <code><span>_PyObject_FastCall()</span></code> function:
use <code><span>PyObject_Vectorcall()</span></code> which is available since Python 3.8
(<span id="index-49"></span><a href="https://peps.python.org/pep-0590/"><strong>PEP 590</strong></a>).
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106023">gh-106023</a>.)</p></li>
<li><p>Remove the <code><span>cpython/pytime.h</span></code> header file,
which only contained private functions.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/106316">gh-106316</a>.)</p></li>
<li><p>Remove the undocumented <code><span>PY_TIMEOUT_MAX</span></code> constant from the limited C API.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/110014">gh-110014</a>.)</p></li>
<li><p>Remove the old trashcan macros <code><span>Py_TRASHCAN_SAFE_BEGIN</span></code>
and <code><span>Py_TRASHCAN_SAFE_END</span></code>.
Replace both with the new macros <code><span>Py_TRASHCAN_BEGIN</span></code>
and <code><span>Py_TRASHCAN_END</span></code>.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/105111">gh-105111</a>.)</p></li>
</ul>
</section>
<section id="deprecated-c-apis">
<h3>Deprecated C APIs<a href="#deprecated-c-apis" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Deprecate old Python initialization functions:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_ResetWarnOptions" title="PySys_ResetWarnOptions"><code><span>PySys_ResetWarnOptions()</span></code></a>:
Clear <a href="https://docs.python.org/3.13/library/sys.html#sys.warnoptions" title="sys.warnoptions"><code><span>sys.warnoptions</span></code></a> and <code><span>warnings.filters</span></code> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetExecPrefix" title="Py_GetExecPrefix"><code><span>Py_GetExecPrefix()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.exec_prefix" title="sys.exec_prefix"><code><span>sys.exec_prefix</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPath" title="Py_GetPath"><code><span>Py_GetPath()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.path" title="sys.path"><code><span>sys.path</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPrefix" title="Py_GetPrefix"><code><span>Py_GetPrefix()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.prefix" title="sys.prefix"><code><span>sys.prefix</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetProgramFullPath" title="Py_GetProgramFullPath"><code><span>Py_GetProgramFullPath()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.executable" title="sys.executable"><code><span>sys.executable</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetProgramName" title="Py_GetProgramName"><code><span>Py_GetProgramName()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.executable" title="sys.executable"><code><span>sys.executable</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPythonHome" title="Py_GetPythonHome"><code><span>Py_GetPythonHome()</span></code></a>:
Get <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.home" title="PyConfig.home"><code><span>PyConfig.home</span></code></a>
or the <span id="index-50"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHONHOME"><code><span>PYTHONHOME</span></code></a> environment variable instead.</p></li>
</ul>
<p>(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105145">gh-105145</a>.)</p>
</li>
<li><p><a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>Soft deprecate</span></a> the
<a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetBuiltins" title="PyEval_GetBuiltins"><code><span>PyEval_GetBuiltins()</span></code></a>, <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetGlobals" title="PyEval_GetGlobals"><code><span>PyEval_GetGlobals()</span></code></a>,
and <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetLocals" title="PyEval_GetLocals"><code><span>PyEval_GetLocals()</span></code></a> functions,
which return a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
(Soft deprecated as part of <span id="index-51"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a>.)</p></li>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_ImportModuleNoBlock" title="PyImport_ImportModuleNoBlock"><code><span>PyImport_ImportModuleNoBlock()</span></code></a> function,
which is just an alias to <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_ImportModule" title="PyImport_ImportModule"><code><span>PyImport_ImportModule()</span></code></a> since Python 3.3.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105396">gh-105396</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/glossary.html#term-soft-deprecated"><span>Soft deprecate</span></a> the
<a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_AddObject" title="PyModule_AddObject"><code><span>PyModule_AddObject()</span></code></a> function.
It should be replaced with <a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_Add" title="PyModule_Add"><code><span>PyModule_Add()</span></code></a>
or <a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_AddObjectRef" title="PyModule_AddObjectRef"><code><span>PyModule_AddObjectRef()</span></code></a>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/86493">gh-86493</a>.)</p></li>
<li><p>Deprecate the old <code><span>Py_UNICODE</span></code> and <code><span>PY_UNICODE_TYPE</span></code> types
and the <code><span>Py_UNICODE_WIDE</span></code> define.
Use the <code><span>wchar_t</span></code> type directly instead.
Since Python 3.3, <code><span>Py_UNICODE</span></code> and <code><span>PY_UNICODE_TYPE</span></code>
are just aliases to <code><span>wchar_t</span></code>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105156">gh-105156</a>.)</p></li>
<li><p>Deprecate the <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetObject" title="PyWeakref_GetObject"><code><span>PyWeakref_GetObject()</span></code></a> and
<a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GET_OBJECT" title="PyWeakref_GET_OBJECT"><code><span>PyWeakref_GET_OBJECT()</span></code></a> functions,
which return a <a href="https://docs.python.org/3.13/glossary.html#term-borrowed-reference"><span>borrowed reference</span></a>.
Replace them with the new <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetRef" title="PyWeakref_GetRef"><code><span>PyWeakref_GetRef()</span></code></a> function,
which returns a <a href="https://docs.python.org/3.13/glossary.html#term-strong-reference"><span>strong reference</span></a>.
The <a href="https://github.com/python/pythoncapi-compat/">pythoncapi-compat project</a> can be used to get
<a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetRef" title="PyWeakref_GetRef"><code><span>PyWeakref_GetRef()</span></code></a> on Python 3.12 and older.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/105927">gh-105927</a>.)</p></li>
</ul>
<section id="id8">
<h4>Pending Removal in Python 3.14<a href="#id8" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The <code><span>ma_version_tag</span></code> field in <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDictObject" title="PyDictObject"><code><span>PyDictObject</span></code></a> for extension modules
(<span id="index-52"></span><a href="https://peps.python.org/pep-0699/"><strong>PEP 699</strong></a>; <a href="https://github.com/python/cpython/issues/101193">gh-101193</a>).</p></li>
<li><p>Creating <a href="https://docs.python.org/3.13/c-api/typeobj.html#c.Py_TPFLAGS_IMMUTABLETYPE" title="Py_TPFLAGS_IMMUTABLETYPE"><code><span>immutable</span> <span>types</span></code></a> with mutable
bases (<a href="https://github.com/python/cpython/issues/95388">gh-95388</a>).</p></li>
<li><p>Functions to configure Python’s initialization, deprecated in Python 3.11:</p>
<ul>
<li><p><code><span>PySys_SetArgvEx()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.argv" title="PyConfig.argv"><code><span>PyConfig.argv</span></code></a> instead.</p></li>
<li><p><code><span>PySys_SetArgv()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.argv" title="PyConfig.argv"><code><span>PyConfig.argv</span></code></a> instead.</p></li>
<li><p><code><span>Py_SetProgramName()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.program_name" title="PyConfig.program_name"><code><span>PyConfig.program_name</span></code></a> instead.</p></li>
<li><p><code><span>Py_SetPythonHome()</span></code>:
Set <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.home" title="PyConfig.home"><code><span>PyConfig.home</span></code></a> instead.</p></li>
</ul>
<p>The <a href="https://docs.python.org/3.13/c-api/init_config.html#c.Py_InitializeFromConfig" title="Py_InitializeFromConfig"><code><span>Py_InitializeFromConfig()</span></code></a> API should be used with
<a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig" title="PyConfig"><code><span>PyConfig</span></code></a> instead.</p>
</li>
<li><p>Global configuration variables:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_DebugFlag" title="Py_DebugFlag"><code><span>Py_DebugFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.parser_debug" title="PyConfig.parser_debug"><code><span>PyConfig.parser_debug</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_VerboseFlag" title="Py_VerboseFlag"><code><span>Py_VerboseFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.verbose" title="PyConfig.verbose"><code><span>PyConfig.verbose</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_QuietFlag" title="Py_QuietFlag"><code><span>Py_QuietFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.quiet" title="PyConfig.quiet"><code><span>PyConfig.quiet</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_InteractiveFlag" title="Py_InteractiveFlag"><code><span>Py_InteractiveFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.interactive" title="PyConfig.interactive"><code><span>PyConfig.interactive</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_InspectFlag" title="Py_InspectFlag"><code><span>Py_InspectFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.inspect" title="PyConfig.inspect"><code><span>PyConfig.inspect</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_OptimizeFlag" title="Py_OptimizeFlag"><code><span>Py_OptimizeFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.optimization_level" title="PyConfig.optimization_level"><code><span>PyConfig.optimization_level</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_NoSiteFlag" title="Py_NoSiteFlag"><code><span>Py_NoSiteFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.site_import" title="PyConfig.site_import"><code><span>PyConfig.site_import</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_BytesWarningFlag" title="Py_BytesWarningFlag"><code><span>Py_BytesWarningFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.bytes_warning" title="PyConfig.bytes_warning"><code><span>PyConfig.bytes_warning</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_FrozenFlag" title="Py_FrozenFlag"><code><span>Py_FrozenFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.pathconfig_warnings" title="PyConfig.pathconfig_warnings"><code><span>PyConfig.pathconfig_warnings</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_IgnoreEnvironmentFlag" title="Py_IgnoreEnvironmentFlag"><code><span>Py_IgnoreEnvironmentFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.use_environment" title="PyConfig.use_environment"><code><span>PyConfig.use_environment</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_DontWriteBytecodeFlag" title="Py_DontWriteBytecodeFlag"><code><span>Py_DontWriteBytecodeFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.write_bytecode" title="PyConfig.write_bytecode"><code><span>PyConfig.write_bytecode</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_NoUserSiteDirectory" title="Py_NoUserSiteDirectory"><code><span>Py_NoUserSiteDirectory</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.user_site_directory" title="PyConfig.user_site_directory"><code><span>PyConfig.user_site_directory</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_UnbufferedStdioFlag" title="Py_UnbufferedStdioFlag"><code><span>Py_UnbufferedStdioFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.buffered_stdio" title="PyConfig.buffered_stdio"><code><span>PyConfig.buffered_stdio</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_HashRandomizationFlag" title="Py_HashRandomizationFlag"><code><span>Py_HashRandomizationFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.use_hash_seed" title="PyConfig.use_hash_seed"><code><span>PyConfig.use_hash_seed</span></code></a>
and <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.hash_seed" title="PyConfig.hash_seed"><code><span>PyConfig.hash_seed</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_IsolatedFlag" title="Py_IsolatedFlag"><code><span>Py_IsolatedFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.isolated" title="PyConfig.isolated"><code><span>PyConfig.isolated</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_LegacyWindowsFSEncodingFlag" title="Py_LegacyWindowsFSEncodingFlag"><code><span>Py_LegacyWindowsFSEncodingFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyPreConfig.legacy_windows_fs_encoding" title="PyPreConfig.legacy_windows_fs_encoding"><code><span>PyPreConfig.legacy_windows_fs_encoding</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_LegacyWindowsStdioFlag" title="Py_LegacyWindowsStdioFlag"><code><span>Py_LegacyWindowsStdioFlag</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.legacy_windows_stdio" title="PyConfig.legacy_windows_stdio"><code><span>PyConfig.legacy_windows_stdio</span></code></a> instead.</p></li>
<li><p><code><span>Py_FileSystemDefaultEncoding</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.filesystem_encoding" title="PyConfig.filesystem_encoding"><code><span>PyConfig.filesystem_encoding</span></code></a> instead.</p></li>
<li><p><code><span>Py_HasFileSystemDefaultEncoding</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.filesystem_encoding" title="PyConfig.filesystem_encoding"><code><span>PyConfig.filesystem_encoding</span></code></a> instead.</p></li>
<li><p><code><span>Py_FileSystemDefaultEncodeErrors</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.filesystem_errors" title="PyConfig.filesystem_errors"><code><span>PyConfig.filesystem_errors</span></code></a> instead.</p></li>
<li><p><code><span>Py_UTF8Mode</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyPreConfig.utf8_mode" title="PyPreConfig.utf8_mode"><code><span>PyPreConfig.utf8_mode</span></code></a> instead.
(see <a href="https://docs.python.org/3.13/c-api/init_config.html#c.Py_PreInitialize" title="Py_PreInitialize"><code><span>Py_PreInitialize()</span></code></a>)</p></li>
</ul>
<p>The <a href="https://docs.python.org/3.13/c-api/init_config.html#c.Py_InitializeFromConfig" title="Py_InitializeFromConfig"><code><span>Py_InitializeFromConfig()</span></code></a> API should be used with
<a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig" title="PyConfig"><code><span>PyConfig</span></code></a> instead.</p>
</li>
</ul>
</section>
<section id="id9">
<h4>Pending Removal in Python 3.15<a href="#id9" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The bundled copy of <code><span>libmpdecimal</span></code>.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_ImportModuleNoBlock" title="PyImport_ImportModuleNoBlock"><code><span>PyImport_ImportModuleNoBlock()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/import.html#c.PyImport_ImportModule" title="PyImport_ImportModule"><code><span>PyImport_ImportModule()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetObject" title="PyWeakref_GetObject"><code><span>PyWeakref_GetObject()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GET_OBJECT" title="PyWeakref_GET_OBJECT"><code><span>PyWeakref_GET_OBJECT()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/weakref.html#c.PyWeakref_GetRef" title="PyWeakref_GetRef"><code><span>PyWeakref_GetRef()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/unicode.html#c.Py_UNICODE" title="Py_UNICODE"><code><span>Py_UNICODE</span></code></a> type and the <code><span>Py_UNICODE_WIDE</span></code> macro:
Use <code><span>wchar_t</span></code> instead.</p></li>
<li><p>Python initialization functions:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/sys.html#c.PySys_ResetWarnOptions" title="PySys_ResetWarnOptions"><code><span>PySys_ResetWarnOptions()</span></code></a>:
Clear <a href="https://docs.python.org/3.13/library/sys.html#sys.warnoptions" title="sys.warnoptions"><code><span>sys.warnoptions</span></code></a> and <code><span>warnings.filters</span></code> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetExecPrefix" title="Py_GetExecPrefix"><code><span>Py_GetExecPrefix()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.exec_prefix" title="sys.exec_prefix"><code><span>sys.exec_prefix</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPath" title="Py_GetPath"><code><span>Py_GetPath()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.path" title="sys.path"><code><span>sys.path</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPrefix" title="Py_GetPrefix"><code><span>Py_GetPrefix()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.prefix" title="sys.prefix"><code><span>sys.prefix</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetProgramFullPath" title="Py_GetProgramFullPath"><code><span>Py_GetProgramFullPath()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.executable" title="sys.executable"><code><span>sys.executable</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetProgramName" title="Py_GetProgramName"><code><span>Py_GetProgramName()</span></code></a>:
Get <a href="https://docs.python.org/3.13/library/sys.html#sys.executable" title="sys.executable"><code><span>sys.executable</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.Py_GetPythonHome" title="Py_GetPythonHome"><code><span>Py_GetPythonHome()</span></code></a>:
Get <a href="https://docs.python.org/3.13/c-api/init_config.html#c.PyConfig.home" title="PyConfig.home"><code><span>PyConfig.home</span></code></a>
or the <span id="index-53"></span><a href="https://docs.python.org/3.13/using/cmdline.html#envvar-PYTHONHOME"><code><span>PYTHONHOME</span></code></a> environment variable instead.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id10">
<h4>Pending Removal in Future Versions<a href="#id10" title="Link to this heading">¶</a></h4>
<p>The following APIs are deprecated and will be removed,
although there is currently no date scheduled for their removal.</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/typeobj.html#c.Py_TPFLAGS_HAVE_FINALIZE" title="Py_TPFLAGS_HAVE_FINALIZE"><code><span>Py_TPFLAGS_HAVE_FINALIZE</span></code></a>:
Unneeded since Python 3.8.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_Fetch" title="PyErr_Fetch"><code><span>PyErr_Fetch()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_GetRaisedException" title="PyErr_GetRaisedException"><code><span>PyErr_GetRaisedException()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_NormalizeException" title="PyErr_NormalizeException"><code><span>PyErr_NormalizeException()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_GetRaisedException" title="PyErr_GetRaisedException"><code><span>PyErr_GetRaisedException()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_Restore" title="PyErr_Restore"><code><span>PyErr_Restore()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_SetRaisedException" title="PyErr_SetRaisedException"><code><span>PyErr_SetRaisedException()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_GetFilename" title="PyModule_GetFilename"><code><span>PyModule_GetFilename()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/module.html#c.PyModule_GetFilenameObject" title="PyModule_GetFilenameObject"><code><span>PyModule_GetFilenameObject()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/sys.html#c.PyOS_AfterFork" title="PyOS_AfterFork"><code><span>PyOS_AfterFork()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/sys.html#c.PyOS_AfterFork_Child" title="PyOS_AfterFork_Child"><code><span>PyOS_AfterFork_Child()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/slice.html#c.PySlice_GetIndicesEx" title="PySlice_GetIndicesEx"><code><span>PySlice_GetIndicesEx()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/slice.html#c.PySlice_Unpack" title="PySlice_Unpack"><code><span>PySlice_Unpack()</span></code></a> and <a href="https://docs.python.org/3.13/c-api/slice.html#c.PySlice_AdjustIndices" title="PySlice_AdjustIndices"><code><span>PySlice_AdjustIndices()</span></code></a> instead.</p></li>
<li><p><code><span>PyUnicode_AsDecodedObject()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/codec.html#c.PyCodec_Decode" title="PyCodec_Decode"><code><span>PyCodec_Decode()</span></code></a> instead.</p></li>
<li><p><code><span>PyUnicode_AsDecodedUnicode()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/codec.html#c.PyCodec_Decode" title="PyCodec_Decode"><code><span>PyCodec_Decode()</span></code></a> instead.</p></li>
<li><p><code><span>PyUnicode_AsEncodedObject()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/codec.html#c.PyCodec_Encode" title="PyCodec_Encode"><code><span>PyCodec_Encode()</span></code></a> instead.</p></li>
<li><p><code><span>PyUnicode_AsEncodedUnicode()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/codec.html#c.PyCodec_Encode" title="PyCodec_Encode"><code><span>PyCodec_Encode()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/unicode.html#c.PyUnicode_READY" title="PyUnicode_READY"><code><span>PyUnicode_READY()</span></code></a>:
Unneeded since Python 3.12</p></li>
<li><p><code><span>PyErr_Display()</span></code>:
Use <a href="https://docs.python.org/3.13/c-api/exceptions.html#c.PyErr_DisplayException" title="PyErr_DisplayException"><code><span>PyErr_DisplayException()</span></code></a> instead.</p></li>
<li><p><code><span>_PyErr_ChainExceptions()</span></code>:
Use <code><span>_PyErr_ChainExceptions1()</span></code> instead.</p></li>
<li><p><code><span>PyBytesObject.ob_shash</span></code> member:
call <a href="https://docs.python.org/3.13/c-api/object.html#c.PyObject_Hash" title="PyObject_Hash"><code><span>PyObject_Hash()</span></code></a> instead.</p></li>
<li><p><code><span>PyDictObject.ma_version_tag</span></code> member.</p></li>
<li><p>Thread Local Storage (TLS) API:</p>
<ul>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_create_key" title="PyThread_create_key"><code><span>PyThread_create_key()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_tss_alloc" title="PyThread_tss_alloc"><code><span>PyThread_tss_alloc()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_delete_key" title="PyThread_delete_key"><code><span>PyThread_delete_key()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_tss_free" title="PyThread_tss_free"><code><span>PyThread_tss_free()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_set_key_value" title="PyThread_set_key_value"><code><span>PyThread_set_key_value()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_tss_set" title="PyThread_tss_set"><code><span>PyThread_tss_set()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_get_key_value" title="PyThread_get_key_value"><code><span>PyThread_get_key_value()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_tss_get" title="PyThread_tss_get"><code><span>PyThread_tss_get()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_delete_key_value" title="PyThread_delete_key_value"><code><span>PyThread_delete_key_value()</span></code></a>:
Use <a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_tss_delete" title="PyThread_tss_delete"><code><span>PyThread_tss_delete()</span></code></a> instead.</p></li>
<li><p><a href="https://docs.python.org/3.13/c-api/init.html#c.PyThread_ReInitTLS" title="PyThread_ReInitTLS"><code><span>PyThread_ReInitTLS()</span></code></a>:
Unneeded since Python 3.7.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="build-changes">
<h2>Build Changes<a href="#build-changes" title="Link to this heading">¶</a></h2>
<ul>
<li><p><code><span>arm64-apple-ios</span></code> and <code><span>arm64-apple-ios-simulator</span></code> are both
now <span id="index-54"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> tier 3 platforms.
(<a href="#whatsnew313-platform-support"><span>PEP 730</span></a> written
and implementation contributed by Russell Keith-Magee in <a href="https://github.com/python/cpython/issues/114099">gh-114099</a>.)</p></li>
<li><p><code><span>aarch64-linux-android</span></code> and <code><span>x86_64-linux-android</span></code> are both
now <span id="index-55"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> tier 3 platforms.
(<a href="#whatsnew313-platform-support"><span>PEP 738</span></a> written
and implementation contributed by Malcolm Smith in <a href="https://github.com/python/cpython/issues/116622">gh-116622</a>.)</p></li>
<li><p><code><span>wasm32-wasi</span></code> is now a <span id="index-56"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> tier 2 platform.
(Contributed by Brett Cannon in <a href="https://github.com/python/cpython/issues/115192">gh-115192</a>.)</p></li>
<li><p><code><span>wasm32-emscripten</span></code> is no longer a <span id="index-57"></span><a href="https://peps.python.org/pep-0011/"><strong>PEP 11</strong></a> supported platform.
(Contributed by Brett Cannon in <a href="https://github.com/python/cpython/issues/115192">gh-115192</a>.)</p></li>
<li><p>Building CPython now requires a compiler with support for the C11 atomic
library, GCC built-in atomic functions, or MSVC interlocked intrinsics.</p></li>
<li><p>Autoconf 2.71 and aclocal 1.16.4 are now required to regenerate
the <code><span>configure</span></code> script.
(Contributed by Christian Heimes in <a href="https://github.com/python/cpython/issues/89886">gh-89886</a>.)</p></li>
<li><p>SQLite 3.15.2 or newer is required to build
the <a href="https://docs.python.org/3.13/library/sqlite3.html#module-sqlite3" title="sqlite3: A DB-API 2.0 implementation using SQLite 3.x."><code><span>sqlite3</span></code></a> extension module.
(Contributed by Erlend Aasland in <a href="https://github.com/python/cpython/issues/105875">gh-105875</a>.)</p></li>
<li><p>CPython now bundles the <a href="https://github.com/microsoft/mimalloc/">mimalloc library</a> by default.
It is licensed under the MIT license;
see <a href="https://docs.python.org/3.13/license.html#mimalloc-license"><span>mimalloc license</span></a>.
The bundled mimalloc has custom changes, see <a href="https://github.com/python/cpython/issues/113141">gh-113141</a> for details.
(Contributed by Dino Viehland in <a href="https://github.com/python/cpython/issues/109914">gh-109914</a>.)</p>
</li>
<li><p>The <code><span>configure</span></code> option <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-with-system-libmpdec"><code><span>--with-system-libmpdec</span></code></a>
now defaults to <code><span>yes</span></code>.
The bundled copy of <code><span>libmpdecimal</span></code> will be removed in Python 3.15.</p></li>
<li><p>Python built with <code><span>configure</span></code> <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-with-trace-refs"><code><span>--with-trace-refs</span></code></a>
(tracing references) is now ABI compatible with the Python release build
and <a href="https://docs.python.org/3.13/using/configure.html#debug-build"><span>debug build</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108634">gh-108634</a>.)</p></li>
<li><p>On POSIX systems, the pkg-config (<code><span>.pc</span></code>) filenames now include the ABI
flags.  For example, the free-threaded build generates <code><span>python-3.13t.pc</span></code>
and the debug build generates <code><span>python-3.13d.pc</span></code>.</p></li>
<li><p>The <code><span>errno</span></code>, <code><span>fcntl</span></code>, <code><span>grp</span></code>, <code><span>md5</span></code>, <code><span>pwd</span></code>, <code><span>resource</span></code>,
<code><span>termios</span></code>, <code><span>winsound</span></code>,
<code><span>_ctypes_test</span></code>, <code><span>_multiprocessing.posixshmem</span></code>, <code><span>_scproxy</span></code>, <code><span>_stat</span></code>,
<code><span>_statistics</span></code>, <code><span>_testconsole</span></code>, <code><span>_testimportmultiple</span></code> and <code><span>_uuid</span></code>
C extensions are now built with the <a href="https://docs.python.org/3.13/c-api/stable.html#limited-c-api"><span>limited C API</span></a>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/85283">gh-85283</a>.)</p></li>
</ul>
</section>
<section id="porting-to-python-3-13">
<h2>Porting to Python 3.13<a href="#porting-to-python-3-13" title="Link to this heading">¶</a></h2>
<p>This section lists previously described changes and other bugfixes
that may require changes to your code.</p>
<section id="changes-in-the-python-api">
<h3>Changes in the Python API<a href="#changes-in-the-python-api" title="Link to this heading">¶</a></h3>
<ul id="pep667-porting-notes-py">
<li><p><a href="#whatsnew313-locals-semantics"><span>PEP 667</span></a> introduces several changes
to the semantics of <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> and <a href="https://docs.python.org/3.13/reference/datamodel.html#frame.f_locals" title="frame.f_locals"><code><span>f_locals</span></code></a>:</p>
<ul>
<li><p>Calling <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> in an <a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scope</span></a> now produces an
independent snapshot on each call, and hence no longer implicitly updates
previously returned references. Obtaining the legacy CPython behavior now
requires explicit calls to update the initially returned dictionary with the
results of subsequent calls to <code><span>locals()</span></code>. Code execution functions that
implicitly target <code><span>locals()</span></code> (such as <code><span>exec</span></code> and <code><span>eval</span></code>) must be
passed an explicit namespace to access their results in an optimized scope.
(Changed as part of <span id="index-58"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a>.)</p></li>
<li><p>Calling <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a> from a comprehension at module or class scope
(including via <code><span>exec</span></code> or <code><span>eval</span></code>) once more behaves as if the comprehension
were running as an independent nested function (i.e. the local variables from
the containing scope are not included). In Python 3.12, this had changed
to include the local variables from the containing scope when implementing
<span id="index-59"></span><a href="https://peps.python.org/pep-0709/"><strong>PEP 709</strong></a>. (Changed as part of <span id="index-60"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a>.)</p></li>
<li><p>Accessing <a href="https://docs.python.org/3.13/reference/datamodel.html#frame.f_locals" title="frame.f_locals"><code><span>FrameType.f_locals</span></code></a> in an
<a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scope</span></a> now returns a write-through proxy rather than a
snapshot that gets updated at ill-specified times. If a snapshot is desired,
it must be created explicitly with <code><span>dict</span></code> or the proxy’s <code><span>.copy()</span></code> method.
(Changed as part of <span id="index-61"></span><a href="https://peps.python.org/pep-0667/"><strong>PEP 667</strong></a>.)</p></li>
</ul>
</li>
<li><p><a href="https://docs.python.org/3.13/library/functools.html#functools.partial" title="functools.partial"><code><span>functools.partial</span></code></a> now emits a <a href="https://docs.python.org/3.13/library/exceptions.html#FutureWarning" title="FutureWarning"><code><span>FutureWarning</span></code></a>
when used as a method.
The behavior will change in future Python versions.
Wrap it in <a href="https://docs.python.org/3.13/library/functions.html#staticmethod" title="staticmethod"><code><span>staticmethod()</span></code></a> if you want to preserve the old behavior.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/121027">gh-121027</a>.)</p></li>
<li><p>An <a href="https://docs.python.org/3.13/library/exceptions.html#OSError" title="OSError"><code><span>OSError</span></code></a> is now raised by <a href="https://docs.python.org/3.13/library/getpass.html#getpass.getuser" title="getpass.getuser"><code><span>getpass.getuser()</span></code></a>
for any failure to retrieve a username,
instead of <a href="https://docs.python.org/3.13/library/exceptions.html#ImportError" title="ImportError"><code><span>ImportError</span></code></a> on non-Unix platforms
or <a href="https://docs.python.org/3.13/library/exceptions.html#KeyError" title="KeyError"><code><span>KeyError</span></code></a> on Unix platforms where the password database is empty.</p></li>
<li><p>The value of the <code><span>mode</span></code> attribute of <a href="https://docs.python.org/3.13/library/gzip.html#gzip.GzipFile" title="gzip.GzipFile"><code><span>gzip.GzipFile</span></code></a>
is now a string (<code><span>&#39;rb&#39;</span></code> or <code><span>&#39;wb&#39;</span></code>) instead of an integer (<code><span>1</span></code> or <code><span>2</span></code>).
The value of the <code><span>mode</span></code> attribute of the readable file-like object
returned by <a href="https://docs.python.org/3.13/library/zipfile.html#zipfile.ZipFile.open" title="zipfile.ZipFile.open"><code><span>zipfile.ZipFile.open()</span></code></a> is now <code><span>&#39;rb&#39;</span></code> instead of <code><span>&#39;r&#39;</span></code>.
(Contributed by Serhiy Storchaka in <a href="https://github.com/python/cpython/issues/115961">gh-115961</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/mailbox.html#mailbox.Maildir" title="mailbox.Maildir"><code><span>mailbox.Maildir</span></code></a> now ignores files with a leading dot (<code><span>.</span></code>).
(Contributed by Zackery Spytz in <a href="https://github.com/python/cpython/issues/65559">gh-65559</a>.)</p></li>
<li><p><a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.glob" title="pathlib.Path.glob"><code><span>pathlib.Path.glob()</span></code></a> and <a href="https://docs.python.org/3.13/library/pathlib.html#pathlib.Path.rglob" title="pathlib.Path.rglob"><code><span>rglob()</span></code></a> now return both
files and directories if a pattern that ends with “<code><span>**</span></code>” is given,
rather than directories only.
Add a trailing slash to keep the previous behavior and only match directories.</p></li>
<li><p>The <a href="https://docs.python.org/3.13/library/threading.html#module-threading" title="threading: Thread-based parallelism."><code><span>threading</span></code></a> module now expects the <code><span>_thread</span></code> module
to have an <code><span>_is_main_interpreter()</span></code> function.
This function takes no arguments and returns <code><span>True</span></code>
if the current interpreter is the main interpreter.</p>
<p>Any library or application that provides a custom <code><span>_thread</span></code> module
must provide <code><span>_is_main_interpreter()</span></code>,
just like the module’s other “private” attributes.
(<a href="https://github.com/python/cpython/issues/112826">gh-112826</a>.)</p>
</li>
</ul>
</section>
<section id="changes-in-the-c-api">
<h3>Changes in the C API<a href="#changes-in-the-c-api" title="Link to this heading">¶</a></h3>
<ul>
<li><p><code><span>Python.h</span></code> no longer includes the <code><span>&lt;ieeefp.h&gt;</span></code> standard header. It was
included for the <code><span>finite()</span></code> function which is now provided by the
<code><span>&lt;math.h&gt;</span></code> header. It should now be included explicitly if needed. Remove
also the <code><span>HAVE_IEEEFP_H</span></code> macro.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108765">gh-108765</a>.)</p></li>
<li><p><code><span>Python.h</span></code> no longer includes these standard header files: <code><span>&lt;time.h&gt;</span></code>,
<code><span>&lt;sys/select.h&gt;</span></code> and <code><span>&lt;sys/time.h&gt;</span></code>. If needed, they should now be
included explicitly. For example, <code><span>&lt;time.h&gt;</span></code> provides the <code><span>clock()</span></code> and
<code><span>gmtime()</span></code> functions, <code><span>&lt;sys/select.h&gt;</span></code> provides the <code><span>select()</span></code>
function, and <code><span>&lt;sys/time.h&gt;</span></code> provides the <code><span>futimes()</span></code>, <code><span>gettimeofday()</span></code>
and <code><span>setitimer()</span></code> functions.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108765">gh-108765</a>.)</p></li>
<li><p>On Windows, <code><span>Python.h</span></code> no longer includes the <code><span>&lt;stddef.h&gt;</span></code> standard
header file. If needed, it should now be included explicitly. For example, it
provides <code><span>offsetof()</span></code> function, and <code><span>size_t</span></code> and <code><span>ptrdiff_t</span></code> types.
Including <code><span>&lt;stddef.h&gt;</span></code> explicitly was already needed by all other
platforms, the <code><span>HAVE_STDDEF_H</span></code> macro is only defined on Windows.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/108765">gh-108765</a>.)</p></li>
<li><p>If the <a href="https://docs.python.org/3.13/c-api/stable.html#c.Py_LIMITED_API" title="Py_LIMITED_API"><code><span>Py_LIMITED_API</span></code></a> macro is defined, <code><span>Py_BUILD_CORE</span></code>,
<code><span>Py_BUILD_CORE_BUILTIN</span></code> and <code><span>Py_BUILD_CORE_MODULE</span></code> macros
are now undefined by <code><span>&lt;Python.h&gt;</span></code>.
(Contributed by Victor Stinner in <a href="https://github.com/python/cpython/issues/85283">gh-85283</a>.)</p></li>
<li><p>The old trashcan macros <code><span>Py_TRASHCAN_SAFE_BEGIN</span></code> and <code><span>Py_TRASHCAN_SAFE_END</span></code>
were removed. They should be replaced by the new macros <code><span>Py_TRASHCAN_BEGIN</span></code>
and <code><span>Py_TRASHCAN_END</span></code>.</p>
<p>A <code><span>tp_dealloc</span></code> function that has the old macros, such as:</p>
<div><div><pre><span></span><span>static</span> <span>void</span>
<span>mytype_dealloc</span><span>(</span><span>mytype</span> <span>*</span><span>p</span><span>)</span>
<span>{</span>
    <span>PyObject_GC_UnTrack</span><span>(</span><span>p</span><span>);</span>
    <span>Py_TRASHCAN_SAFE_BEGIN</span><span>(</span><span>p</span><span>);</span>
    <span>...</span>
    <span>Py_TRASHCAN_SAFE_END</span>
<span>}</span>
</pre></div>
</div>
<p>should migrate to the new macros as follows:</p>
<div><div><pre><span></span><span>static</span> <span>void</span>
<span>mytype_dealloc</span><span>(</span><span>mytype</span> <span>*</span><span>p</span><span>)</span>
<span>{</span>
    <span>PyObject_GC_UnTrack</span><span>(</span><span>p</span><span>);</span>
    <span>Py_TRASHCAN_BEGIN</span><span>(</span><span>p</span><span>,</span> <span>mytype_dealloc</span><span>)</span>
    <span>...</span>
    <span>Py_TRASHCAN_END</span>
<span>}</span>
</pre></div>
</div>
<p>Note that <code><span>Py_TRASHCAN_BEGIN</span></code> has a second argument which
should be the deallocation function it is in. The new macros were
added in Python 3.8 and the old macros were deprecated in Python 3.11.
(Contributed by Irit Katriel in <a href="https://github.com/python/cpython/issues/105111">gh-105111</a>.)</p>
</li>
</ul>
<ul id="pep667-porting-notes-c">
<li><p><a href="#whatsnew313-locals-semantics"><span>PEP 667</span></a> introduces several changes
to frame-related functions:</p>
<ul>
<li><p>The effects of mutating the dictionary returned from
<a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetLocals" title="PyEval_GetLocals"><code><span>PyEval_GetLocals()</span></code></a> in an <a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scope</span></a> have changed.
New dict entries added this way will now <em>only</em> be visible to
subsequent <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetLocals" title="PyEval_GetLocals"><code><span>PyEval_GetLocals()</span></code></a> calls in that frame,
as <a href="https://docs.python.org/3.13/c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code><span>PyFrame_GetLocals()</span></code></a>, <a href="https://docs.python.org/3.13/library/functions.html#locals" title="locals"><code><span>locals()</span></code></a>,
and <a href="https://docs.python.org/3.13/reference/datamodel.html#frame.f_locals" title="frame.f_locals"><code><span>FrameType.f_locals</span></code></a> no longer access
the same underlying cached dictionary.
Changes made to entries for actual variable names and names added via
the write-through proxy interfaces will be overwritten on subsequent calls
to <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetLocals" title="PyEval_GetLocals"><code><span>PyEval_GetLocals()</span></code></a> in that frame.
The recommended code update depends on how the function was being used,
so refer to the deprecation notice on the function for details.</p></li>
<li><p>Calling <a href="https://docs.python.org/3.13/c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code><span>PyFrame_GetLocals()</span></code></a> in an <a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scope</span></a>
now returns a write-through proxy rather than a snapshot
that gets updated at ill-specified times.
If a snapshot is desired, it must be created explicitly
(e.g. with <a href="https://docs.python.org/3.13/c-api/dict.html#c.PyDict_Copy" title="PyDict_Copy"><code><span>PyDict_Copy()</span></code></a>),
or by calling the new <a href="https://docs.python.org/3.13/c-api/reflection.html#c.PyEval_GetFrameLocals" title="PyEval_GetFrameLocals"><code><span>PyEval_GetFrameLocals()</span></code></a> API.</p></li>
<li><p><code><span>PyFrame_FastToLocals()</span></code> and <code><span>PyFrame_FastToLocalsWithError()</span></code>
no longer have any effect.
Calling these functions has been redundant since Python 3.11,
when <a href="https://docs.python.org/3.13/c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code><span>PyFrame_GetLocals()</span></code></a> was first introduced.</p></li>
<li><p><code><span>PyFrame_LocalsToFast()</span></code> no longer has any effect.
Calling this function is redundant now that <a href="https://docs.python.org/3.13/c-api/frame.html#c.PyFrame_GetLocals" title="PyFrame_GetLocals"><code><span>PyFrame_GetLocals()</span></code></a>
returns a write-through proxy for <a href="https://docs.python.org/3.13/glossary.html#term-optimized-scope"><span>optimized scopes</span></a>.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="regression-test-changes">
<h2>Regression Test Changes<a href="#regression-test-changes" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Python built with <code><span>configure</span></code> <a href="https://docs.python.org/3.13/using/configure.html#cmdoption-with-pydebug"><code><span>--with-pydebug</span></code></a> now
supports a <a href="https://docs.python.org/3.13/using/cmdline.html#cmdoption-X"><code><span>-X</span> <span>presite=package.module</span></code></a> command-line
option. If used, it specifies a module that should be imported early
in the lifecycle of the interpreter, before <code><span>site.py</span></code> is executed.
(Contributed by Łukasz Langa in <a href="https://github.com/python/cpython/issues/110769">gh-110769</a>.)</p></li>
</ul>
</section>
</section>


            
          </div>
        </div>
      </div>
      
      
    </div></div>
  </body>
</html>
