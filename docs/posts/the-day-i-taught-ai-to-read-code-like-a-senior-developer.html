<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://nmn.gl/blog/ai-senior-developer">Original</a>
    <h1>The day I taught AI to read code like a Senior Developer</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p><em>A messy experiment that changed how we think about AI code analysis</em></p>

<p>Last week, I watched our AI choke on a React codebase - again. As timeout errors flooded my terminal, something clicked. We’d been teaching AI to read code like a fresh bootcamp grad, not a senior developer.</p>

<p>Here’s what I mean.</p>

<!--more-->

<h2 id="the-bootcamp-vs-senior-mindset">The Bootcamp vs Senior Mindset</h2>

<p>Remember your first day reading production code? Without any experience with handling mature codebases, you probably quickly get lost in the details<sup>[0]</sup></p>

<p>But watch a senior dev review a massive PR:</p>

<ul>
  <li>They jump straight to the core files</li>
  <li>Group changes by feature (“all auth changes, all db changes”)</li>
  <li>Build a mental model of architecture first</li>
  <li>Only then dive into implementation</li>
</ul>

<p>Obvious in hindsight, right? This realization led us to completely rewire our analyzer.</p>

<h2 id="the-experiment">The Experiment</h2>

<p>Instead of dumping files linearly, we built a context-aware grouping system:</p>

<div><div><pre><code><span>interface</span> <span>FileGroup</span> <span>{</span>
  <span>files</span><span>:</span> <span>ProjectFile</span><span>[];</span>
  <span>totalSize</span><span>:</span> <span>number</span><span>;</span>
  <span>groupContext</span><span>:</span> <span>string</span><span>;</span> <span>// &#39;auth&#39;, &#39;database&#39;, etc.</span>
<span>}</span>

<span>export</span> <span>const</span> <span>groupFiles</span> <span>=</span> <span>(</span><span>files</span><span>:</span> <span>ProjectFile</span><span>[]):</span> <span>FileGroup</span><span>[]</span> <span>=&gt;</span> <span>{</span>
  <span>// Group files by related functionality and size</span>
  <span>const</span> <span>fileInfos</span> <span>=</span> <span>files</span><span>.</span><span>map</span><span>(</span><span>file</span> <span>=&gt;</span> <span>({</span>
    <span>file</span><span>,</span>
    <span>size</span><span>:</span> <span>file</span><span>.</span><span>content</span><span>?.</span><span>length</span> <span>||</span> <span>0</span><span>,</span>
    <span>context</span><span>:</span> <span>getFileContext</span><span>(</span><span>file</span><span>.</span><span>path</span><span>)</span>
  <span>}));</span>

  <span>// Process larger, more important files first</span>
  <span>fileInfos</span><span>.</span><span>sort</span><span>((</span><span>a</span><span>,</span> <span>b</span><span>)</span> <span>=&gt;</span> <span>b</span><span>.</span><span>size</span> <span>-</span> <span>a</span><span>.</span><span>size</span><span>);</span>

  <span>const</span> <span>groups</span><span>:</span> <span>FileGroup</span><span>[]</span> <span>=</span> <span>[];</span>
  <span>let</span> <span>currentGroup</span> <span>=</span> <span>createEmptyGroup</span><span>();</span>

  <span>for</span> <span>(</span><span>const</span> <span>{</span> <span>file</span><span>,</span> <span>size</span><span>,</span> <span>context</span> <span>}</span> <span>of</span> <span>fileInfos</span><span>)</span> <span>{</span>
    <span>if</span> <span>(</span><span>shouldStartNewGroup</span><span>(</span><span>currentGroup</span><span>,</span> <span>size</span><span>,</span> <span>context</span><span>))</span> <span>{</span>
      <span>groups</span><span>.</span><span>push</span><span>(</span><span>currentGroup</span><span>);</span>
      <span>currentGroup</span> <span>=</span> <span>createNewGroup</span><span>(</span><span>file</span><span>,</span> <span>size</span><span>,</span> <span>context</span><span>);</span>
    <span>}</span> <span>else</span> <span>{</span>
      <span>addFileToGroup</span><span>(</span><span>currentGroup</span><span>,</span> <span>file</span><span>,</span> <span>size</span><span>);</span>
    <span>}</span>
  <span>}</span>

  <span>return</span> <span>groups</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Then we changed how we prompt the AI. Instead of “analyze this file”, we give it context about the feature group first:</p>

<div><div><pre><code><span>const</span> <span>buildGroupPrompt</span> <span>=</span> <span>(</span><span>group</span><span>:</span> <span>FileGroup</span><span>):</span> <span>string</span> <span>=&gt;</span> <span>{</span>
  <span>return</span> <span>`
    Analyzing authentication system files:
    - Core token validation logic
    - Session management
    - Related middleware
    
    Focus on:
    1. How these integrate with existing auth patterns
    2. Security implications
    3. Performance impact on other systems

    Files to analyze:
    </span><span>${</span><span>formatFiles</span><span>(</span><span>group</span><span>.</span><span>files</span><span>)}</span><span>
  `</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<h2 id="the-holy-shit-moment">The Holy Shit Moment</h2>

<p>The results broke our benchmark script. We thought it was a bug.</p>

<p>The AI went from:</p>
<div><div><pre><code>&#34;This file contains authentication logic using JWT tokens&#34;
</code></pre></div></div>

<p>To:</p>
<div><div><pre><code>&#34;Warning: This auth change could impact websocket connections.
The token refresh logic shares patterns with the notification 
service (added last month), suggesting a potential race 
condition during high-traffic socket reconnects.

Related PR: #1234 (merged last week) modified the same
retry logic. Consider adding backoff.&#34;
</code></pre></div></div>

<p>That’s senior dev level awareness. It was catching connections we hadn’t explicitly taught it about.</p>

<h2 id="what-actually-changed">What Actually Changed?</h2>

<p>The magic isn’t in fancy ML or bigger models. It’s in mirroring how senior devs think:</p>

<ol>
  <li><strong>Context First</strong>: We front-load system understanding before diving into code</li>
  <li><strong>Pattern Matching</strong>: Group similar files to spot repeated approaches</li>
  <li><strong>Impact Analysis</strong>: Consider changes in relation to the whole system</li>
  <li><strong>Historical Understanding</strong>: Track why code evolved certain ways</li>
</ol>

<h2 id="the-unexpected-side-effects">The Unexpected Side Effects</h2>

<p>The system started catching things we didn’t design for:</p>

<ul>
  <li>Spotting copy-pasted code across different features</li>
  <li>Flagging inconsistent error handling patterns</li>
  <li>Warning about potential performance bottlenecks</li>
  <li>Suggesting architectural improvements based on usage patterns</li>
</ul>

<h2 id="why-this-matters">Why This Matters</h2>

<p>Every few days there’s a new “AI-powered IDE” on Product Hunt. They’re solving the wrong problem. Making code suggestions without deep context is like having a brilliant junior dev who just joined yesterday - they’ll write clean code that subtly breaks everything.</p>

<p>The key isn’t better code generation. It’s better code understanding.</p>

<h2 id="open-questions">Open Questions</h2>

<p>We’re still figuring out:</p>

<ul>
  <li>When to refresh vs preserve historical understanding</li>
  <li>How to handle conflicting patterns in different parts of the system</li>
  <li>Whether to expose uncertainty in the analysis</li>
</ul>

<h2 id="whats-next">What’s Next?</h2>

<p>I’m curious if we can teach AI to spot other senior dev instincts:</p>

<ul>
  <li>Identifying tech debt before it happens</li>
  <li>Suggesting architectural improvements</li>
  <li>Catching security issues from usage patterns</li>
  <li>Understanding unwritten team conventions</li>
</ul>

<p>The problem isn’t making AI write more code. It’s teaching it to think about code the way experienced developers do.</p>

<p><small>
[0] Previously said <em>You probably did what I did - start at line 1, read every file top to bottom, get lost in the details.</em>, edited in response to <a href="https://news.ycombinator.com/item?id=42602156">feedback from advael</a>
</small></p>

  </div></div>
  </body>
</html>
