<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.thechases.com/posts/assorted-less-tips/">Original</a>
    <h1>Assorted less(1) tips</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody text">
    <p>
In
<a href="https://www.reddit.com/r/commandline/comments/1oteeaj/whats_the_most_useful_commandline_trick_you/no5xkx4/">a
recent discussion on Reddit</a>
I shared a number of tips
about the common utility
<a href="https://man.openbsd.org/less.1"><code>less(1)</code></a>
that others found helpful
so I figured I&#39;d aggregate some of those tips here.
</p>

<h3 id="multiple-files">Operating on multiple files</h3>

<p>
While most folks invoke
<code>less</code>
at the tail of a pipeline like
</p><figure><pre><label>$ </label> <var>command</var> | less
</pre>
<figcaption>Invoking <code>less</code> in a pipeline</figcaption></figure><p>

you can directly provide one or more files to open

</p><figure><pre><label>$ </label> less <var>README.txt file.c *.md</var>
</pre>
<figcaption>Invoking <code>less</code> directly</figcaption></figure>

<h3 id="adding-files">Adding files after starting</h3>

<p>
When reading a document,
sometimes you want to view another file,
adding it to the file list.
Perhaps while reading some C source code
you want to also look over the corresponding header-file.
You can add that header-file to the argument list with
<code>:e file.h</code>
</p>

<h3 id="navigating-multiple">Navigating multiple files</h3>

<p>
You can navigate between multiple files using
<code>:n</code>
to go to the next file in the argument-list, and
<code>:p</code>
for the previous file.
You can also use
<code>:x</code>
to rewind to the first file in the argument-list
similar to how
<code>:rewind</code>
behaves in
<code>vi</code>/<code>vim</code>.
</p>

<h3 id="removing-files">Removing files after starting</h3>

<p>
While I rarely feel the need to,
if you have finished with a file
and want to keep your argument list clean,
you can use
<code>:d</code>
to delete the current file from the argument-list.
</p>

<h2 id="navigating-within">Navigating</h2>

<h3 id="jump-to-line">Jumping to a particular line-number</h3>

<p>
Use
<code><var>«count»</var>G</code>
to jump to a particular line-number.
So using
<code><var>3141</var>G</code>
will jump to line <var>3141</var>.
It helps to display
<a href="#option-N">line numbers</a>.
</p>

<h3 id="jump-to-percent">Jumping to a particular percentage-offset</h3>

<p>
Similarly, using
<code><var>«count»</var>%</code>
jumps to that percentage-offset of the file.
So if you want to go to ¾
of the way through the file, you can type
<code>75%</code>
to jump right there.
</p>

<h3 id="searching">Searching</h3>

<p>
While many folks know you can search forward with
<code>/<var>«pattern»</var></code>
and some people know you can use
<code>?<var>«pattern»</var></code>
to search backwards,
or use
<code>n</code>/<code>N</code>
to search again for the next/previous match,
<code>less</code>
provides modifiers you can specify
before the pattern to modify its behavior:
</p>

<dl id="search-modifier">
<dt><code>!</code></dt>
 <dd>
  Find the next line that
  <strong>doesn&#39;t</strong>
  match the pattern
 </dd>
 <dt><code>*</code></dt>
 <dd>
 search across multiple files,
 starting from the current location
 in the current file
 </dd>
 <dt><code>@</code></dt>
 <dd>
 rewind to the first file
 and search from there
 </dd>
 <dt><code>@*</code></dt>
 <dd>
 rewind to the first file
 and search from there
 across multiple files
 </dd>
</dl>
<p>
Thus you would use
<code>/@*<var>«pattern»</var></code>
to search for &#34;pattern&#34;
starting with the first file.
</p>

<h2 id="filtering">Filtering lines</h2>

<p>
Using
<code>&amp;</code>
lets you specify a pattern
and filter the displayed lines
to only those matching the pattern,
much like an internal
<code>grep</code>
command.
If you modify it with
<code>!</code>,
so it will display only those lines that do
<em>not match</em>
the pattern, like
<code>&amp;!<var>«pattern»</var></code>.
I find this particularly helpful for browsing log-files.
</p>

<h2 id="bookmarking">Bookmarking</h2>
<p>
You can bookmark points in a file with
<code>m</code>
followed by a letter,
then jump back to that bookmark with
<code>&#39;</code>
followed by the same letter.
These apply globally across all open files,
so if you
<code>ma</code>
in the third file,
then navigate away to other files,
using
<code>&#39;a</code>
will take you back to the marked location
in that third file.
I use marks most when reading man-pages,
dropping one mark at the
<tt>OPTIONS</tt>
section such as
<code>mo</code>,
and another at the
<tt>EXAMPLES</tt>
section,
such as
<code>me</code>,
then bounce back and forth between them with
<code>&#39;o</code>
and
<code>&#39;e</code>.
While you can use any of
the 26 lowercase or uppercase letters
(for a total of 52 marks),
I rarely use more than two or three
either in alphabetical order
(&#34;a&#34;, &#34;b&#34;, &#34;c&#34;),
or assigning mnemonics like in the
<code>man</code>-page example above.
</p>

<h3 id="bracket-matching">Bracket matching</h3>

<p>
If the first line on the screen contains a
<code>(</code>,
<code>[</code>,
or
<code>{</code>,
typing that character
will jump to the matching/closing character,
putting it on the bottom line of the screen.
Similarly, if a closing
<code>)</code>,
<code>]</code>,
or
<code>}</code>,
character appears on the last line,
typing that closing character
will jump to the matching/opening character,
putting it at the top of the screen.
I find it a little disorienting
if they fall <code>less</code> than a screen-height apart
because what feels like a forward motion
to find the next matching close-bracket
might actually result in shifting the screen
<em>down</em>
rather than
<em>up</em>
which feels backwards.
</p>

<p>
While I don&#39;t use it much,
you can also specify match-pairs using
<code><kbd>alt</kbd>+<kbd>ctrl+f</kbd></code>
or
<code><kbd>alt</kbd>+<kbd>ctrl+b</kbd></code>
followed by the opening/closing pair of characters
such as
<code><kbd>alt</kbd>+<kbd>ctrl+f&lt;&gt;</kbd></code>
to define a &#34;&lt;&#34;…&#34;&gt;&#34; pair
and jump between them
in a manner similar to the
<code>(</code>/<code>)</code>,
<code>[</code>/<code>]</code>,
and
<code>{</code>/<code>)</code>
motions.
</p>

<h2 id="toggling-options">Toggling options without restarting</h2>

<p>
While the
<code>man</code>-page
documents many flags you can pass
on the command-line,
you can also toggle boolean options from inside
<code>less</code>.
I find this particularly helpful
when I&#39;ve fed the output of a long-running process to
<code>less</code>
and don&#39;t want to re-run it
because it will take a long time.
Instead of quitting,
you can type a literal
<code>-</code>
followed by the option you want to change.
I most commonly want to toggle word-wrap for long lines,
so instead of quitting and adding
<code>-S</code>
at the end of my pipeline,
I can type
<code>-S</code>
directly in
<code>less</code>.
Options I commonly toggle:
</p>
<dl id="options">
<dt id="option-S"><code>-S</code></dt>
 <dd>word-wrap (mnemonic &#34;splitting long lines&#34;)</dd>
 <dt id="option-G"><code>-G</code></dt>
 <dd>search-highlighting</dd>
 <dt id="option-I">
<code>-i</code>/<code>-I</code>
</dt>
 <dd>smart-case/case-sensitivity for searches</dd>
 <dt id="option-R"><code>-R</code></dt>
 <dd>ANSI-color escaping</dd>
 <dt id="option-N">
<code>-N</code>/<code>-n</code>
</dt>
 <dd>show/hide line-numbers</dd>
</dl>
<h2 id="external-commands">Running external commands</h2>

<p>
The
<code>!</code>
lets you invoke an external command.
I don&#39;t do this often,
but occasionally I want some simple reference
like the current date
(<code>!date</code>)
or to do some simple math
(<code>!bc</code>).
</p>

<h2 id="env-vars">Default options with <code>$LESS</code>
</h2>

<p>
You might find yourself regularly setting
a common group of
<a href="#options">options</a>
so you can put those in your environment
(usually in your shell startup file like
<code>~/.bashrc</code>)
like
<code>LESS=&#34;-RNe&#34;</code>
if you want to
<a href="#option-R">show ANSI colors</a>,
<a href="#option-N">show line-numbers</a>,
and exit automatically when you reach the end of the file.
</p>

<h2 id="other-misc">Other misc</h2>

<p>
<code>less</code>
has a few other corners that I&#39;ve never really used,
but figured I&#39;d document here:
</p>

<h3 id="tags">Tags</h3>

<p>
While I&#39;ve used tags in
<code>vi</code>/<code>vim</code>
to easily jump between definitions.
However, even though
<code>less</code>
provides support for tags generated by
<code>ctags</code>.
I&#39;ve never found cause to use them.
</p>

<h3 id="external-editor">Editing the current document</h3>

<p>
The
<code>v</code>
command will open your
<code>$VISUAL</code>
editor on the current document.
</p>

<h3 id="log-output">&#34;Log&#34; output</h3>

<p>
<code>less</code>
lets you redirect the output
it has gathered from
<abbr title="standard input">stdin</abbr>
to a file using the
<code>o</code>
command
(or the
<code>O</code>
command to overwrite an existing file).
This might come in handy because
<code>less</code>
won&#39;t let you
<a href="#external-editor">edit stdin
in an external editor</a>
but you can write it directly to a file.
</p>
    </div></div>
  </body>
</html>
