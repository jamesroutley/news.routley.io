<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/antimatter15/alpaca.cpp">Original</a>
    <h1>Show HN: Alpaca.cpp â€“ Run an Instruction-Tuned Chat-Style LLM on a MacBook</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Run a fast ChatGPT-like model locally on your device. The screencast below is not sped up and running on an M2 Macbook Air with 4GB of weights.</p>
<p dir="auto"><a href="https://asciinema.org/a/dfJ8QXZ4u978Ona59LPEldtKK" rel="nofollow"><img src="https://ideasimagerystory.substack.com/antimatter15/alpaca.cpp/raw/master/screencast.gif" alt="asciicast" data-animated-image=""/></a></p>
<p dir="auto">This combines the <a href="https://github.com/facebookresearch/llama">LLaMA foundation model</a> with an <a href="https://github.com/tloen/alpaca-lora">open reproduction</a> of <a href="https://github.com/tatsu-lab/stanford_alpaca">Stanford Alpaca</a> a fine-tuning of the base model to obey instructions (akin to the <a href="https://huggingface.co/blog/rlhf" rel="nofollow">RLHF</a> used to train ChatGPT) and a set of modifications to <a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> to add a chat interface.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-get-started" aria-hidden="true" href="#get-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Get started</h2>
<div data-snippet-clipboard-copy-content="git clone https://github.com/antimatter15/alpaca.cpp
cd alpaca.cpp

make chat
./chat"><pre><code>git clone https://github.com/antimatter15/alpaca.cpp
cd alpaca.cpp

make chat
./chat
</code></pre></div>
<p dir="auto">You can download the weights for <code>ggml-alpaca-7b-q4.bin</code> with BitTorrent <code>magnet:?xt=urn:btih:5aaceaec63b03e51a98f04fd5c42320b2a033010&amp;dn=ggml-alpaca-7b-q4.bin&amp;tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&amp;tr=udp%3A%2F%2Fopentracker.i2p.rocks%3A6969%2Fannounce</code></p>
<p dir="auto">Alternatively you can download them with IPFS.</p>
<div data-snippet-clipboard-copy-content="# any of these will work
wget -O ggml-alpaca-7b-q4.bin -c https://gateway.estuary.tech/gw/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC
wget -O ggml-alpaca-7b-q4.bin -c https://ipfs.io/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC
wget -O ggml-alpaca-7b-q4.bin -c https://cloudflare-ipfs.com/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC"><pre><code># any of these will work
wget -O ggml-alpaca-7b-q4.bin -c https://gateway.estuary.tech/gw/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC
wget -O ggml-alpaca-7b-q4.bin -c https://ipfs.io/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC
wget -O ggml-alpaca-7b-q4.bin -c https://cloudflare-ipfs.com/ipfs/QmQ1bf2BTnYxq73MFJWu1B7bQ2UD6qG7D7YDCxhTndVkPC
</code></pre></div>
<p dir="auto">Save the <code>ggml-alpaca-7b-q4.bin</code> file in the same directory as your <code>./chat</code> executable.</p>
<p dir="auto">The weights are based on the published fine-tunes from <code>alpaca-lora</code>, converted back into a pytorch checkpoint with a <a href="https://github.com/tloen/alpaca-lora/pull/19" data-hovercard-type="pull_request" data-hovercard-url="/tloen/alpaca-lora/pull/19/hovercard">modified script</a> and then quantized with llama.cpp the regular way.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-credit" aria-hidden="true" href="#credit"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Credit</h2>
<p dir="auto">This combines <a href="https://github.com/facebookresearch/llama">Facebook&#39;s LLaMA</a>, <a href="https://crfm.stanford.edu/2023/03/13/alpaca.html" rel="nofollow">Stanford Alpaca</a>, <a href="https://github.com/tloen/alpaca-lora">alpaca-lora</a> and <a href="https://huggingface.co/tloen/alpaca-lora-7b/tree/main" rel="nofollow">corresponding weights</a> by Eric Wang (which uses <a href="https://github.com/huggingface/transformers/pull/21955" data-hovercard-type="pull_request" data-hovercard-url="/huggingface/transformers/pull/21955/hovercard">Jason Phang&#39;s implementation of LLaMA</a> on top of Hugging Face Transformers), and <a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> by Georgi Gerganov. The chat implementation is based on Matvey Soloviev&#39;s <a href="https://github.com/ggerganov/llama.cpp/pull/61" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/llama.cpp/pull/61/hovercard">Interactive Mode</a> for llama.cpp. Inspired by <a href="https://til.simonwillison.net/llms/llama-7b-m2" rel="nofollow">Simon Willison&#39;s</a> getting started guide for LLaMA.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-disclaimer" aria-hidden="true" href="#disclaimer"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Disclaimer</h2>
<p dir="auto">Note that the model weights are only to be used for research purposes, as they are derivative of LLaMA, and uses the published instruction data from the Stanford Alpaca project which is generated by OpenAI, which itself disallows the usage of its outputs to train competing models.</p>
</article>
          </div></div>
  </body>
</html>
