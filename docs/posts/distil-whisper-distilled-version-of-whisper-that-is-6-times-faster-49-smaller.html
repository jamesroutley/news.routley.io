<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/huggingface/distil-whisper">Original</a>
    <h1>Distil-Whisper: distilled version of Whisper that is 6 times faster, 49% smaller</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://github.com/huggingface/distil-whisper/blob/main/Distil_Whisper.pdf">[Paper]</a>
<a href="https://huggingface.co/collections/distil-whisper/distil-whisper-models-65411987e6727569748d2eb6" rel="nofollow">[Models]</a>
<a href="https://wandb.ai/sanchit-gandhi/distil-whisper/workspace?workspace=user-sanchit-gandhi" rel="nofollow">[wandb]</a></p>
<p dir="auto">Distil-Whisper is a distilled version of Whisper that is <strong>6 times faster</strong>, 49% smaller, and performs <strong>within 1% WER</strong> on
out-of-distribution evaluation sets.</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>distil-medium.en</code></td>
<td>To be published on November 2nd</td>
</tr>
<tr>
<td><code>distil-large-v2</code></td>
<td>To be published on November 2nd</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" id="user-content-1-usage-" dir="auto"><a href="#1-usage-">1. Usage üë®‚Äçüíª<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">The Distil-Whisper checkpoints will be released on November 2nd with a direct ü§ó Transformers integration. Instructions
for running inference will be provided here:</p>
<div dir="auto" data-snippet-clipboard-copy-content="from transformers import WhisperForConditionalGeneration

..."><pre><span>from</span> <span>transformers</span> <span>import</span> <span>WhisperForConditionalGeneration</span>

...</pre></div>
<h2 tabindex="-1" id="user-content-2-why-use-distil-whisper-Ô∏è" dir="auto"><a href="#2-why-use-distil-whisper-Ô∏è">2. Why use Distil-Whisper? <g-emoji alias="interrobang">‚ÅâÔ∏è</g-emoji><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Distil-Whisper is designed to be a drop-in replacement for Whisper on English ASR. Here are 4 reasons for making the
switch to Distil-Whisper:</p>
<ol dir="auto">
<li><strong>Faster inference:</strong> 6 times faster inference speed, while performing to within 1% WER of Whisper on out-of-distribution audio:</li>
</ol>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/ebf591a662450e6350988f3bd886ba5ab6fdaf2178fe5fa92bbdfe063047149c/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6d61696e5f7461626c652e706e673f7261773d74727565"><img src="https://camo.githubusercontent.com/ebf591a662450e6350988f3bd886ba5ab6fdaf2178fe5fa92bbdfe063047149c/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6d61696e5f7461626c652e706e673f7261773d74727565" width="600" data-canonical-src="https://huggingface.co/datasets/distil-whisper/figures/resolve/main/main_table.png?raw=true"/></a>
</p>
<ol start="2" dir="auto">
<li><strong>Robustness to noise:</strong> demonstrated by strong WER performance at low signal-to-noise ratios:</li>
</ol>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/af9186f374ecd1491c50806bb1981b463484359758c0a6d3009085576e3367f5/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6e6f6973652e706e673f7261773d74727565"><img src="https://camo.githubusercontent.com/af9186f374ecd1491c50806bb1981b463484359758c0a6d3009085576e3367f5/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6e6f6973652e706e673f7261773d74727565" width="600" data-canonical-src="https://huggingface.co/datasets/distil-whisper/figures/resolve/main/noise.png?raw=true"/></a>
</p>
<ol start="3" dir="auto">
<li><strong>Robustness to hallucinations:</strong> quantified by 1.3 times fewer repeated 5-gram word duplicates (5-Dup.) and 2.1% lower insertion error rate (IER) than Whisper:</li>
</ol>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/274feb17952aa4572d148dced4b452803a06c769e4e548e2632afbdaefd13128/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f68616c6c7563696e6174696f6e2e706e673f7261773d74727565"><img src="https://camo.githubusercontent.com/274feb17952aa4572d148dced4b452803a06c769e4e548e2632afbdaefd13128/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f68616c6c7563696e6174696f6e2e706e673f7261773d74727565" width="600" data-canonical-src="https://huggingface.co/datasets/distil-whisper/figures/resolve/main/hallucination.png?raw=true"/></a>
</p>
<ol start="4" dir="auto">
<li><strong>Designed for speculative decoding:</strong> Distil-Whisper can be used as an assistant model to Whisper, giving 2 times faster inference speed while mathematically ensuring the same outputs as the Whisper model.</li>
</ol>
<h2 tabindex="-1" id="user-content-3-approach-Ô∏è" dir="auto"><a href="#3-approach-Ô∏è">3. Approach ‚úçÔ∏è<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">To distill Whisper, we copy the entire encoder module and freeze it during training. We copy only two decoder layers,
which are initialised from the first and last decoder layers from Whisper. All other decoder layers from Whisper
are discarded.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/213d411e260670d7b418caa2c37ee9aebd107bff8637c81f38621dd2ccb08e00/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6172636869746563747572652e706e673f7261773d74727565"><img src="https://camo.githubusercontent.com/213d411e260670d7b418caa2c37ee9aebd107bff8637c81f38621dd2ccb08e00/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f6172636869746563747572652e706e673f7261773d74727565" width="600" data-canonical-src="https://huggingface.co/datasets/distil-whisper/figures/resolve/main/architecture.png?raw=true"/></a>
</p>
<p dir="auto">Distil-Whisper is trained on a <em>knowledge distillation</em> objective. Specifically, it is trained to minimise the KL divergence
between the distilled model and the Whisper model, as well as the cross-entropy loss on pseudo-labelled audio data.</p>
<p dir="auto">We train Distil-Whisper on a total of 22k hours of pseudo-labelled audio data, spanning 10 domains with over 18k speakers:</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/6fd49ea0e4d277311409ed41178109c5e6f39a05a1fa2cc2506ba0566f03448d/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f64617461736574732e706e673f7261773d74727565"><img src="https://camo.githubusercontent.com/6fd49ea0e4d277311409ed41178109c5e6f39a05a1fa2cc2506ba0566f03448d/68747470733a2f2f68756767696e67666163652e636f2f64617461736574732f64697374696c2d776869737065722f666967757265732f7265736f6c76652f6d61696e2f64617461736574732e706e673f7261773d74727565" width="600" data-canonical-src="https://huggingface.co/datasets/distil-whisper/figures/resolve/main/datasets.png?raw=true"/></a>
</p>
<p dir="auto">This diverse audio dataset is paramount to ensuring robustness of Distil-Whisper to different datasets and domains.</p>
<p dir="auto">In addition, we use a WER filter to discard pseudo-labels where Whisper mis-transcribes or hallucinates. This greatly
improves WER performance of the downstream distilled model.</p>
<p dir="auto">For full details on the distillation set-up and evaluation results, refer to the <a href="https://github.com/huggingface/distil-whisper/blob/main/Distil_Whisper.pdf">Distil-Whisper paper</a>.</p>
<h2 tabindex="-1" id="user-content-4-acknowledgements" dir="auto"><a href="#4-acknowledgements">4. Acknowledgements<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<ul dir="auto">
<li>OpenAI for the original Whisper <a href="https://huggingface.co/openai/whisper-large-v2" rel="nofollow">model</a> and <a href="https://github.com/openai/whisper">codebase</a></li>
<li>Google&#39;s <a href="https://sites.research.google/trc/about/" rel="nofollow">TPU Research Cloud (TRC)</a> programme for Cloud TPU v4s</li>
</ul>
</article>
          </div></div>
  </body>
</html>
