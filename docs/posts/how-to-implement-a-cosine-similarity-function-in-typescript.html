<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://alexop.dev/posts/how-to-implement-a-cosine-similarity-function-in-typescript-for-vector-comparison/">Original</a>
    <h1>How to Implement a Cosine Similarity Function in TypeScript</h1>
    
    <div id="readability-page-1" class="page"><article id="article"> <p>To understand how an AI can understand that the word ‚Äúcat‚Äù is similar to ‚Äúkitten,‚Äù you must realize cosine similarity. In short, with the help of embeddings, we can represent words as vectors in a high-dimensional space. If the word ‚Äúcat‚Äù is represented as a vector [1, 0, 0], the word ‚Äúkitten‚Äù would be represented as [1, 0, 1]. Now, we can use cosine similarity to measure the similarity between the two vectors. In this blog post, we will break down the concept of cosine similarity and implement it in TypeScript.</p>
<div> <p> <span>üí°</span> Note </p> <p>I won‚Äôt explain how embeddings work in this blog post, but only how to use them.</p> </div> 
<h2 id="what-is-cosine-similarity-a-simple-explanation">What Is Cosine Similarity? A Simple Explanation</h2>
<p>The cosine similarity formula measures how similar two vectors are by examining the angle between them, not their sizes. Here‚Äôs how it works in plain English:</p>
<ol>
<li>
<p><strong>What it does</strong>: It tells you if two vectors point in the same direction, opposite directions, or somewhere in between.</p>
</li>
<li>
<p><strong>The calculation</strong>:</p>
<ul>
<li>First, multiply the corresponding elements of both vectors and add these products together (the dot product)</li>
<li>Then, calculate how long each vector is (its magnitude)</li>
<li>Finally, divide the dot product by the product of the two magnitudes</li>
</ul>
</li>
<li>
<p><strong>The result</strong>:</p>
<ul>
<li>If you get 1, the vectors point in exactly the same direction (perfectly similar)</li>
<li>If you get 0, the vectors stand perpendicular to each other (completely unrelated)</li>
<li>If you get -1, the vectors point in exactly opposite directions (perfectly dissimilar)</li>
<li>Any value in between indicates the degree of similarity</li>
</ul>
</li>
<li>
<p><strong>Why it‚Äôs useful</strong>:</p>
<ul>
<li>It ignores vector size and focuses only on direction</li>
<li>This means you can consider two things similar even if one is much ‚Äúbigger‚Äù than the other</li>
<li>For example, a short document about cats and a long document about cats would show similarity, despite their different lengths</li>
</ul>
</li>
<li>
<p><strong>In AI applications</strong>:</p>
<ul>
<li>We convert words, documents, images, etc. into vectors with many dimensions</li>
<li>Cosine similarity helps us find related items by measuring how closely their vectors align</li>
<li>This powers features like semantic search, recommendations, and content matching</li>
</ul>
</li>
</ol>
<h2 id="why-cosine-similarity-matters-for-modern-web-development">Why Cosine Similarity Matters for Modern Web Development</h2>
<p>When you build applications with any of these features, you directly work with vector mathematics:</p>
<ul>
<li><strong>Semantic search</strong>: Finding relevant content based on meaning, not just keywords</li>
<li><strong>AI-powered recommendations</strong>: ‚ÄúUsers who liked this also enjoyed‚Ä¶‚Äù</li>
<li><strong>Content matching</strong>: Identifying similar articles, products, or user profiles</li>
<li><strong>Natural language processing</strong>: Understanding and comparing text meaning</li>
</ul>
<p>All of these require you to compare vectors, and cosine similarity offers one of the most effective methods to do so.</p>
<h2 id="visualizing-cosine-similarity">Visualizing Cosine Similarity</h2>
<astro-island uid="2wdQYc" component-url="/_astro/CosineSimilarityVisualizer.CeEglhDF.js" component-export="default" renderer-url="/_astro/client.DNEATWIj.js" props="{}" ssr="" client="only" opts="{&#34;name&#34;:&#34;CosineSimilarityVisualizer&#34;,&#34;value&#34;:&#34;react&#34;}"></astro-island>
<h3 id="cosine-similarity-explained">Cosine Similarity Explained</h3>
<p>Cosine similarity measures the cosine of the angle between two vectors, showing how similar they are regardless of their magnitude. The value ranges from:</p>
<ul>
<li><strong>+1</strong>: When vectors point in the same direction (perfectly similar)</li>
<li><strong>0</strong>: When vectors stand perpendicular (no similarity)</li>
<li><strong>-1</strong>: When vectors point in opposite directions (completely dissimilar)</li>
</ul>
<p>With the interactive visualization above, you can:</p>
<ol>
<li>Move both vectors by dragging the colored circles at their endpoints</li>
<li>Observe how the angle between them changes</li>
<li>See how cosine similarity relates to this angle</li>
<li>Note that cosine similarity depends only on the angle, not the vectors‚Äô lengths</li>
</ol>
<h2 id="step-by-step-example-calculation">Step-by-Step Example Calculation</h2>
<p>Let me walk you through a manual calculation of cosine similarity between two simple vectors. This helps build intuition before we implement it in code.</p>
<p>Given two vectors: <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover><mo>=</mo><mo stretchy="false">[</mo><mn>3</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\vec{v_1} = [3, 4]</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>[</span><span>3</span><span>,</span><span></span><span>4</span><span>]</span></span></span></span> and <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover><mo>=</mo><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\vec{v_2} = [5, 2]</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>[</span><span>5</span><span>,</span><span></span><span>2</span><span>]</span></span></span></span></p>
<p>I‚Äôll calculate their cosine similarity step by step:</p>
<p><strong>Step 1</strong>: Calculate the dot product.</p>
<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover><mo>‚ãÖ</mo><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover><mo>=</mo><mn>3</mn><mo>√ó</mo><mn>5</mn><mo>+</mo><mn>4</mn><mo>√ó</mo><mn>2</mn><mo>=</mo><mn>15</mn><mo>+</mo><mn>8</mn><mo>=</mo><mn>23</mn></mrow><annotation encoding="application/x-tex">\vec{v_1} \cdot \vec{v_2} = 3 \times 5 + 4 \times 2 = 15 + 8 = 23</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>‚ãÖ</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>3</span><span></span><span>√ó</span><span></span></span><span><span></span><span>5</span><span></span><span>+</span><span></span></span><span><span></span><span>4</span><span></span><span>√ó</span><span></span></span><span><span></span><span>2</span><span></span><span>=</span><span></span></span><span><span></span><span>15</span><span></span><span>+</span><span></span></span><span><span></span><span>8</span><span></span><span>=</span><span></span></span><span><span></span><span>23</span></span></span></span></span>
<p><strong>Step 2</strong>: Calculate the magnitude of each vector.</p>
<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mo>=</mo><msqrt><mrow><msup><mn>3</mn><mn>2</mn></msup><mo>+</mo><msup><mn>4</mn><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mn>9</mn><mo>+</mo><mn>16</mn></mrow></msqrt><mo>=</mo><msqrt><mn>25</mn></msqrt><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">||\vec{v_1}|| = \sqrt{3^2 + 4^2} = \sqrt{9 + 16} = \sqrt{25} = 5</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>‚à£‚à£</span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>‚à£‚à£</span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>3</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span></span><span>+</span><span></span><span><span>4</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>9</span><span></span><span>+</span><span></span><span>16</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>25</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>5</span></span></span></span></span>
<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mo>=</mo><msqrt><mrow><msup><mn>5</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup></mrow></msqrt><mo>=</mo><msqrt><mrow><mn>25</mn><mo>+</mo><mn>4</mn></mrow></msqrt><mo>=</mo><msqrt><mn>29</mn></msqrt><mo>‚âà</mo><mn>5.385</mn></mrow><annotation encoding="application/x-tex">||\vec{v_2}|| = \sqrt{5^2 + 2^2} = \sqrt{25 + 4} = \sqrt{29} \approx 5.385</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>‚à£‚à£</span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>‚à£‚à£</span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>5</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span></span><span>+</span><span></span><span><span>2</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>25</span><span></span><span>+</span><span></span><span>4</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>29</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>‚âà</span><span></span></span><span><span></span><span>5.385</span></span></span></span></span>
<p><strong>Step 3</strong>: Calculate the cosine similarity by dividing the dot product by the product of magnitudes.</p>
<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>cos</mi><mo>‚Å°</mo><mo stretchy="false">(</mo><mi>Œ∏</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover><mo>‚ãÖ</mo><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover></mrow><mrow><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mo>‚ãÖ</mo><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover><mi mathvariant="normal">‚à£</mi><mi mathvariant="normal">‚à£</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\cos(\theta) = \frac{\vec{v_1} \cdot \vec{v_2}}{||\vec{v_1}|| \cdot ||\vec{v_2}||}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>cos</span><span>(</span><span>Œ∏</span><span>)</span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span>‚à£‚à£</span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>‚à£‚à£</span><span></span><span>‚ãÖ</span><span></span><span>‚à£‚à£</span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>‚à£‚à£</span></span></span><span><span></span><span></span></span><span><span></span><span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span><span>‚ãÖ</span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span></span></span>
<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mfrac><mn>23</mn><mrow><mn>5</mn><mo>√ó</mo><mn>5.385</mn></mrow></mfrac><mo>=</mo><mfrac><mn>23</mn><mn>26.925</mn></mfrac><mo>‚âà</mo><mn>0.854</mn></mrow><annotation encoding="application/x-tex">= \frac{23}{5 \times 5.385} = \frac{23}{26.925} \approx 0.854</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span>5</span><span></span><span>√ó</span><span></span><span>5.385</span></span></span><span><span></span><span></span></span><span><span></span><span><span>23</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span>26.925</span></span></span><span><span></span><span></span></span><span><span></span><span><span>23</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>‚âà</span><span></span></span><span><span></span><span>0.854</span></span></span></span></span>
<p>Therefore, the cosine similarity between vectors <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>v</mi><mn>1</mn></msub><mo>‚Éó</mo></mover></mrow><annotation encoding="application/x-tex">\vec{v_1}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>1</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span> and <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>v</mi><mn>2</mn></msub><mo>‚Éó</mo></mover></mrow><annotation encoding="application/x-tex">\vec{v_2}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span>v</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span><span><span></span><span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"></path></svg></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span> is approximately 0.854, which shows that these vectors point in roughly the same direction.</p>
<h2 id="building-a-cosine-similarity-function-in-typescript">Building a Cosine Similarity Function in TypeScript</h2>
<p>Let‚Äôs implement an optimized cosine similarity function in TypeScript that combines the functional approach with the more efficient <code>Math.hypot()</code> method:</p>
<pre tabindex="0" data-language="typescript"><code><span><span>/**</span></span>
<span><span> * Calculates the cosine similarity between two vectors</span></span>
<span><span> * </span><span>@param</span><span> vecA</span><span> First vector</span></span>
<span><span> * </span><span>@param</span><span> vecB</span><span> Second vector</span></span>
<span><span> * </span><span>@returns</span><span> A value between -1 and 1, where 1 means identical</span></span>
<span><span> */</span></span>
<span><span>function</span><span> </span><span><span>cosineSimilarity</span></span><span>(</span><span><span>vecA</span></span><span>:</span><span> number</span><span>[]</span><span>,</span><span> </span><span><span>vecB</span></span><span>:</span><span> number</span><span>[])</span><span>:</span><span> number</span><span> {</span></span>
<span><span>  if</span><span> (</span><span><span>vecA</span></span><span>.</span><span><span>length</span></span><span> !==</span><span> </span><span><span>vecB</span></span><span>.</span><span><span>length</span></span><span>) {</span></span>
<span><span>    throw</span><span> new</span><span> </span><span><span>Error</span></span><span>(</span><span>&#34;</span><span>Vectors must have the same dimensions</span><span>&#34;</span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  // Calculate dot product: A¬∑B = Œ£(A[i] * B[i])</span></span>
<span><span>  const</span><span> </span><span><span>dotProduct</span></span><span> =</span><span> </span><span><span>vecA</span></span><span>.</span><span><span>reduce</span></span><span>((</span><span><span>sum</span></span><span>,</span><span> </span><span><span>a</span></span><span>,</span><span> </span><span><span>i</span></span><span>) </span><span>=&gt;</span><span> </span><span><span>sum</span></span><span> +</span><span> </span><span><span>a</span></span><span> *</span><span> </span><span><span>vecB</span></span><span>[</span><span><span>i</span></span><span>]</span><span>,</span><span> 0</span><span>)</span><span>;</span></span>
<span><span>  </span></span>
<span><span>  // Calculate magnitudes using Math.hypot()</span></span>
<span><span>  const</span><span> </span><span><span>magnitudeA</span></span><span> =</span><span> </span><span><span>Math</span></span><span>.</span><span><span>hypot</span></span><span>(</span><span>...</span><span><span>vecA</span></span><span>)</span><span>;</span></span>
<span><span>  const</span><span> </span><span><span>magnitudeB</span></span><span> =</span><span> </span><span><span>Math</span></span><span>.</span><span><span>hypot</span></span><span>(</span><span>...</span><span><span>vecB</span></span><span>)</span><span>;</span></span>
<span><span>  </span></span>
<span><span>  // Check for zero magnitude</span></span>
<span><span>  if</span><span> (</span><span><span>magnitudeA</span></span><span> ===</span><span> 0</span><span> ||</span><span> </span><span><span>magnitudeB</span></span><span> ===</span><span> 0</span><span>) {</span></span>
<span><span>    return</span><span> 0</span><span>;</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  // Calculate cosine similarity: (A¬∑B) / (|A|*|B|)</span></span>
<span><span>  return</span><span> </span><span><span>dotProduct</span></span><span> /</span><span> (</span><span><span>magnitudeA</span></span><span> *</span><span> </span><span><span>magnitudeB</span></span><span>)</span><span>;</span></span>
<span><span>}</span></span></code></pre>
<h2 id="testing-our-implementation">Testing Our Implementation</h2>
<p>Let‚Äôs see how our function works with some example vectors:</p>
<pre tabindex="0" data-language="typescript"><code><span><span>// Example 1: Similar vectors pointing in roughly the same direction</span></span>
<span><span>const</span><span> </span><span><span>vecA</span></span><span> =</span><span> [</span><span>3</span><span>,</span><span> 4</span><span>]</span><span>;</span></span>
<span><span>const</span><span> </span><span><span>vecB</span></span><span> =</span><span> [</span><span>5</span><span>,</span><span> 2</span><span>]</span><span>;</span></span>
<span><span><span>console</span></span><span>.</span><span><span>log</span></span><span>(</span><span>`</span><span>Similarity: </span><span>${</span><span>cosineSimilarity</span><span>(</span><span><span>vecA</span></span><span>,</span><span> </span><span><span>vecB</span></span><span>)</span><span>.</span><span>toFixed</span><span>(</span><span>3</span><span>)</span><span>}</span><span>`</span><span>)</span><span>;</span></span>
<span><span>// Output: Similarity: 0.857</span></span>
<span></span>
<span><span>// Example 2: Perpendicular vectors</span></span>
<span><span>const</span><span> </span><span><span>vecC</span></span><span> =</span><span> [</span><span>1</span><span>,</span><span> 0</span><span>]</span><span>;</span></span>
<span><span>const</span><span> </span><span><span>vecD</span></span><span> =</span><span> [</span><span>0</span><span>,</span><span> 1</span><span>]</span><span>;</span></span>
<span><span><span>console</span></span><span>.</span><span><span>log</span></span><span>(</span><span>`</span><span>Similarity: </span><span>${</span><span>cosineSimilarity</span><span>(</span><span><span>vecC</span></span><span>,</span><span> </span><span><span>vecD</span></span><span>)</span><span>.</span><span>toFixed</span><span>(</span><span>3</span><span>)</span><span>}</span><span>`</span><span>)</span><span>;</span></span>
<span><span>// Output: Similarity: 0.000</span></span>
<span></span>
<span><span>// Example 3: Opposite vectors</span></span>
<span><span>const</span><span> </span><span><span>vecE</span></span><span> =</span><span> [</span><span>2</span><span>,</span><span> 3</span><span>]</span><span>;</span></span>
<span><span>const</span><span> </span><span><span>vecF</span></span><span> =</span><span> [</span><span>-</span><span>2</span><span>,</span><span> -</span><span>3</span><span>]</span><span>;</span></span>
<span><span><span>console</span></span><span>.</span><span><span>log</span></span><span>(</span><span>`</span><span>Similarity: </span><span>${</span><span>cosineSimilarity</span><span>(</span><span><span>vecE</span></span><span>,</span><span> </span><span><span>vecF</span></span><span>)</span><span>.</span><span>toFixed</span><span>(</span><span>3</span><span>)</span><span>}</span><span>`</span><span>)</span><span>;</span></span>
<span><span>// Output: Similarity: -1.000</span></span></code></pre>
<p>Mathematically, we can verify these results:</p>
<p>For Example 1:
<span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>cosine¬†similarity</mtext><mo>=</mo><mfrac><mrow><mn>3</mn><mo>√ó</mo><mn>5</mn><mo>+</mo><mn>4</mn><mo>√ó</mo><mn>2</mn></mrow><mrow><msqrt><mrow><msup><mn>3</mn><mn>2</mn></msup><mo>+</mo><msup><mn>4</mn><mn>2</mn></msup></mrow></msqrt><mo>√ó</mo><msqrt><mrow><msup><mn>5</mn><mn>2</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup></mrow></msqrt></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>15</mn><mo>+</mo><mn>8</mn></mrow><mrow><msqrt><mn>25</mn></msqrt><mo>√ó</mo><msqrt><mn>29</mn></msqrt></mrow></mfrac><mo>=</mo><mfrac><mn>23</mn><mrow><mn>5</mn><mo>√ó</mo><msqrt><mn>29</mn></msqrt></mrow></mfrac><mo>‚âà</mo><mn>0.857</mn></mrow><annotation encoding="application/x-tex">\text{cosine similarity} = \frac{3 \times 5 + 4 \times 2}{\sqrt{3^2 + 4^2} \times \sqrt{5^2 + 2^2}} = \frac{15 + 8}{\sqrt{25} \times \sqrt{29}} = \frac{23}{5 \times \sqrt{29}} \approx 0.857</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>cosine¬†similarity</span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>3</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span><span>4</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>√ó</span><span><span><span><span><span><span></span><span><span><span>5</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span><span>2</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>3</span><span>√ó</span><span>5</span><span>+</span><span>4</span><span>√ó</span><span>2</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span><span><span><span><span><span></span><span><span>25</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>√ó</span><span><span><span><span><span><span></span><span><span>29</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>15</span><span>+</span><span>8</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>5</span><span>√ó</span><span><span><span><span><span><span></span><span><span>29</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>23</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>‚âà</span><span></span></span><span><span></span><span>0.857</span></span></span></span></p>
<p>For Example 2:
<span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>cosine¬†similarity</mtext><mo>=</mo><mfrac><mrow><mn>1</mn><mo>√ó</mo><mn>0</mn><mo>+</mo><mn>0</mn><mo>√ó</mo><mn>1</mn></mrow><mrow><msqrt><mrow><msup><mn>1</mn><mn>2</mn></msup><mo>+</mo><msup><mn>0</mn><mn>2</mn></msup></mrow></msqrt><mo>√ó</mo><msqrt><mrow><msup><mn>0</mn><mn>2</mn></msup><mo>+</mo><msup><mn>1</mn><mn>2</mn></msup></mrow></msqrt></mrow></mfrac><mo>=</mo><mfrac><mn>0</mn><mrow><mn>1</mn><mo>√ó</mo><mn>1</mn></mrow></mfrac><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\text{cosine similarity} = \frac{1 \times 0 + 0 \times 1}{\sqrt{1^2 + 0^2} \times \sqrt{0^2 + 1^2}} = \frac{0}{1 \times 1} = 0</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>cosine¬†similarity</span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>1</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span><span>0</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>√ó</span><span><span><span><span><span><span></span><span><span><span>0</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span><span>1</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>1</span><span>√ó</span><span>0</span><span>+</span><span>0</span><span>√ó</span><span>1</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>1</span><span>√ó</span><span>1</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>0</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>0</span></span></span></span></p>
<p>For Example 3:
<span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>cosine¬†similarity</mtext><mo>=</mo><mfrac><mrow><mn>2</mn><mo>√ó</mo><mo stretchy="false">(</mo><mo>‚àí</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>3</mn><mo>√ó</mo><mo stretchy="false">(</mo><mo>‚àí</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><mrow><msqrt><mrow><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><msup><mn>3</mn><mn>2</mn></msup></mrow></msqrt><mo>√ó</mo><msqrt><mrow><mo stretchy="false">(</mo><mo>‚àí</mo><mn>2</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mo>‚àí</mo><mn>3</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow></mfrac><mo>=</mo><mfrac><mrow><mo>‚àí</mo><mn>4</mn><mo>‚àí</mo><mn>9</mn></mrow><mrow><msqrt><mn>13</mn></msqrt><mo>√ó</mo><msqrt><mn>13</mn></msqrt></mrow></mfrac><mo>=</mo><mfrac><mrow><mo>‚àí</mo><mn>13</mn></mrow><mn>13</mn></mfrac><mo>=</mo><mo>‚àí</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\text{cosine similarity} = \frac{2 \times (-2) + 3 \times (-3)}{\sqrt{2^2 + 3^2} \times \sqrt{(-2)^2 + (-3)^2}} = \frac{-4 - 9}{\sqrt{13} \times \sqrt{13}} = \frac{-13}{13} = -1</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>cosine¬†similarity</span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>2</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span><span>3</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>√ó</span><span><span><span><span><span><span></span><span><span>(</span><span>‚àí</span><span>2</span><span><span>)</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span><span>+</span><span>(</span><span>‚àí</span><span>3</span><span><span>)</span><span><span><span><span><span><span></span><span><span>2</span></span></span></span></span></span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.5429em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>2</span><span>√ó</span><span>(</span><span>‚àí</span><span>2</span><span>)</span><span>+</span><span>3</span><span>√ó</span><span>(</span><span>‚àí</span><span>3</span><span>)</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span><span><span><span><span><span></span><span><span>13</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span>√ó</span><span><span><span><span><span><span></span><span><span>13</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>‚àí</span><span>4</span><span>‚àí</span><span>9</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>13</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>‚àí</span><span>13</span></span></span></span></span><span>‚Äã</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>‚àí</span><span>1</span></span></span></span></p>
<h2 id="complete-typescript-solution">Complete TypeScript Solution</h2>
<p>Here‚Äôs a complete TypeScript solution that includes our cosine similarity function along with some utility methods:</p>
<pre tabindex="0" data-language="typescript"><code><span><span>class</span><span> </span><span><span>VectorUtils</span></span><span> {</span></span>
<span><span>  /**</span></span>
<span><span>   * Calculates the cosine similarity between two vectors</span></span>
<span><span>   */</span></span>
<span><span>  static</span><span> </span><span><span>cosineSimilarity</span></span><span>(</span><span><span>vecA</span></span><span>:</span><span> number</span><span>[]</span><span>,</span><span> </span><span><span>vecB</span></span><span>:</span><span> number</span><span>[])</span><span>:</span><span> number</span><span> {</span></span>
<span><span>    if</span><span> (</span><span><span>vecA</span></span><span>.</span><span><span>length</span></span><span> !==</span><span> </span><span><span>vecB</span></span><span>.</span><span><span>length</span></span><span>) {</span></span>
<span><span>      throw</span><span> new</span><span> </span><span><span>Error</span></span><span>(</span><span>`</span><span>Vector dimensions don&#39;t match: </span><span>${</span><span><span>vecA</span></span><span>.</span><span><span>length</span></span><span>}</span><span> vs </span><span>${</span><span><span>vecB</span></span><span>.</span><span><span>length</span></span><span>}</span><span>`</span><span>)</span><span>;</span></span>
<span><span>    }</span></span>
<span><span>    </span></span>
<span><span>    const</span><span> </span><span><span>dotProduct</span></span><span> =</span><span> </span><span><span>vecA</span></span><span>.</span><span><span>reduce</span></span><span>((</span><span><span>sum</span></span><span>,</span><span> </span><span><span>a</span></span><span>,</span><span> </span><span><span>i</span></span><span>) </span><span>=&gt;</span><span> </span><span><span>sum</span></span><span> +</span><span> </span><span><span>a</span></span><span> *</span><span> </span><span><span>vecB</span></span><span>[</span><span><span>i</span></span><span>]</span><span>,</span><span> 0</span><span>)</span><span>;</span></span>
<span><span>    const</span><span> </span><span><span>magnitudeA</span></span><span> =</span><span> </span><span><span>Math</span></span><span>.</span><span><span>hypot</span></span><span>(</span><span>...</span><span><span>vecA</span></span><span>)</span><span>;</span></span>
<span><span>    const</span><span> </span><span><span>magnitudeB</span></span><span> =</span><span> </span><span><span>Math</span></span><span>.</span><span><span>hypot</span></span><span>(</span><span>...</span><span><span>vecB</span></span><span>)</span><span>;</span></span>
<span><span>    </span></span>
<span><span>    if</span><span> (</span><span><span>magnitudeA</span></span><span> ===</span><span> 0</span><span> ||</span><span> </span><span><span>magnitudeB</span></span><span> ===</span><span> 0</span><span>) {</span></span>
<span><span>      return</span><span> 0</span><span>;</span></span>
<span><span>    }</span></span>
<span><span>    </span></span>
<span><span>    return</span><span> </span><span><span>dotProduct</span></span><span> /</span><span> (</span><span><span>magnitudeA</span></span><span> *</span><span> </span><span><span>magnitudeB</span></span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>  </span></span>
<span><span>  /**</span></span>
<span><span>   * Calculates the dot product of two vectors</span></span>
<span><span>   */</span></span>
<span><span>  static</span><span> </span><span><span>dotProduct</span></span><span>(</span><span><span>vecA</span></span><span>:</span><span> number</span><span>[]</span><span>,</span><span> </span><span><span>vecB</span></span><span>:</span><span> number</span><span>[])</span><span>:</span><span> number</span><span> {</span></span>
<span><span>    if</span><span> (</span><span><span>vecA</span></span><span>.</span><span><span>length</span></span><span> !==</span><span> </span><span><span>vecB</span></span><span>.</span><span><span>length</span></span><span>) {</span></span>
<span><span>      throw</span><span> new</span><span> </span><span><span>Error</span></span><span>(</span><span>`</span><span>Vector dimensions don&#39;t match: </span><span>${</span><span><span>vecA</span></span><span>.</span><span><span>length</span></span><span>}</span><span> vs </span><span>${</span><span><span>vecB</span></span><span>.</span><span><span>length</span></span><span>}</span><span>`</span><span>)</span><span>;</span></span>
<span><span>    }</span></span>
<span><span>    </span></span>
<span><span>    return</span><span> </span><span><span>vecA</span></span><span>.</span><span><span>reduce</span></span><span>((</span><span><span>sum</span></span><span>,</span><span> </span><span><span>a</span></span><span>,</span><span> </span><span><span>i</span></span><span>) </span><span>=&gt;</span><span> </span><span><span>sum</span></span><span> +</span><span> </span><span><span>a</span></span><span> *</span><span> </span><span><span>vecB</span></span><span>[</span><span><span>i</span></span><span>]</span><span>,</span><span> 0</span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>  </span></span>
<span><span>  /**</span></span>
<span><span>   * Calculates the magnitude (length) of a vector</span></span>
<span><span>   */</span></span>
<span><span>  static</span><span> </span><span><span>magnitude</span></span><span>(</span><span><span>vec</span></span><span>:</span><span> number</span><span>[])</span><span>:</span><span> number</span><span> {</span></span>
<span><span>    return</span><span> </span><span><span>Math</span></span><span>.</span><span><span>hypot</span></span><span>(</span><span>...</span><span><span>vec</span></span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>  </span></span>
<span><span>  /**</span></span>
<span><span>   * Normalizes a vector (converts to unit vector)</span></span>
<span><span>   */</span></span>
<span><span>  static</span><span> </span><span><span>normalize</span></span><span>(</span><span><span>vec</span></span><span>:</span><span> number</span><span>[])</span><span>:</span><span> number</span><span>[]</span><span> {</span></span>
<span><span>    const</span><span> </span><span><span>mag</span></span><span> =</span><span> this</span><span>.</span><span><span>magnitude</span></span><span>(</span><span><span>vec</span></span><span>)</span><span>;</span></span>
<span><span>    </span></span>
<span><span>    if</span><span> (</span><span><span>mag</span></span><span> ===</span><span> 0</span><span>) {</span></span>
<span><span>      return</span><span> </span><span><span>Array</span></span><span>(</span><span><span>vec</span></span><span>.</span><span><span>length</span></span><span>)</span><span>.</span><span><span>fill</span></span><span>(</span><span>0</span><span>)</span><span>;</span></span>
<span><span>    }</span></span>
<span><span>    </span></span>
<span><span>    return</span><span> </span><span><span>vec</span></span><span>.</span><span><span>map</span></span><span>(</span><span><span>v</span></span><span> =&gt;</span><span> </span><span><span>v</span></span><span> /</span><span> </span><span><span>mag</span></span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>  </span></span>
<span><span>  /**</span></span>
<span><span>   * Converts cosine similarity to angular distance in degrees</span></span>
<span><span>   */</span></span>
<span><span>  static</span><span> </span><span><span>similarityToDegrees</span></span><span>(</span><span><span>similarity</span></span><span>:</span><span> number</span><span>)</span><span>:</span><span> number</span><span> {</span></span>
<span><span>    // Clamp similarity to [-1, 1] to handle floating point errors</span></span>
<span><span>    const</span><span> </span><span><span>clampedSimilarity</span></span><span> =</span><span> </span><span><span>Math</span></span><span>.</span><span><span>max</span></span><span>(</span><span>-</span><span>1</span><span>,</span><span> </span><span><span>Math</span></span><span>.</span><span><span>min</span></span><span>(</span><span>1</span><span>,</span><span> </span><span><span>similarity</span></span><span>))</span><span>;</span></span>
<span><span>    return</span><span> </span><span><span>Math</span></span><span>.</span><span><span>acos</span></span><span>(</span><span><span>clampedSimilarity</span></span><span>) </span><span>*</span><span> (</span><span>180</span><span> /</span><span> </span><span><span>Math</span></span><span>.</span><span><span>PI</span></span><span>)</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span></code></pre>
<h2 id="using-cosine-similarity-in-real-web-applications">Using Cosine Similarity in Real Web Applications</h2>
<p>When you work with AI in web applications, you‚Äôll often need to calculate similarity between vectors. Here‚Äôs a practical example:</p>
<pre tabindex="0" data-language="typescript"><code><span><span>// Example: Semantic search implementation</span></span>
<span><span>function</span><span> </span><span><span>semanticSearch</span></span><span>(</span><span><span>queryEmbedding</span></span><span>:</span><span> number</span><span>[]</span><span>,</span><span> </span><span><span>documentEmbeddings</span></span><span>:</span><span> </span><span><span>DocumentWithEmbedding</span></span><span>[])</span><span>:</span><span> </span><span><span>SearchResult</span></span><span>[]</span><span> {</span></span>
<span><span>  return</span><span> </span><span><span>documentEmbeddings</span></span></span>
<span><span>    .</span><span><span>map</span></span><span>(</span><span><span>doc</span></span><span> =&gt;</span><span> ({</span></span>
<span><span>      </span><span><span>document</span></span><span>:</span><span> </span><span><span>doc</span></span><span>,</span></span>
<span><span>      </span><span><span>relevance</span></span><span>:</span><span> </span><span>VectorUtils</span><span>.</span><span>cosineSimilarity</span><span>(</span><span><span>queryEmbedding</span></span><span>,</span><span> </span><span><span>doc</span></span><span>.</span><span>embedding</span><span>)</span></span>
<span><span>    }))</span></span>
<span><span>    .</span><span><span>filter</span></span><span>(</span><span><span>result</span></span><span> =&gt;</span><span> </span><span><span>result</span></span><span>.</span><span><span>relevance</span></span><span> &gt;</span><span> 0.7</span><span>) </span><span>// Only consider relevant results</span></span>
<span><span>    .</span><span><span>sort</span></span><span>((</span><span><span>a</span></span><span>,</span><span> </span><span><span>b</span></span><span>) </span><span>=&gt;</span><span> </span><span><span>b</span></span><span>.</span><span><span>relevance</span></span><span> -</span><span> </span><span><span>a</span></span><span>.</span><span><span>relevance</span></span><span>)</span><span>;</span></span>
<span><span>}</span></span></code></pre>
<h2 id="using-openai-embedding-models-with-cosine-similarity">Using OpenAI Embedding Models with Cosine Similarity</h2>
<p>While the examples above used simple vectors for clarity, real-world AI applications typically use embedding models that transform text and other data into high-dimensional vector spaces.</p>
<p>OpenAI provides powerful embedding models that you can easily incorporate into your applications. These models transform text into vectors with hundreds or thousands of dimensions that capture semantic meaning:</p>
<pre tabindex="0" data-language="typescript"><code><span><span>// Example of using OpenAI embeddings with our cosine similarity function</span></span>
<span><span>async</span><span> function</span><span> </span><span><span>compareTextSimilarity</span></span><span>(</span><span><span>textA</span></span><span>:</span><span> string</span><span>,</span><span> </span><span><span>textB</span></span><span>:</span><span> string</span><span>)</span><span>:</span><span> </span><span><span>Promise</span></span><span>&lt;</span><span>number</span><span>&gt;</span><span> {</span></span>
<span><span>  // Get embeddings from OpenAI API</span></span>
<span><span>  const</span><span> </span><span><span>responseA</span></span><span> =</span><span> await</span><span> </span><span><span>fetch</span></span><span>(</span><span>&#39;</span><span>https://api.openai.com/v1/embeddings</span><span>&#39;</span><span>,</span><span> {</span></span>
<span><span>    </span><span><span>method</span></span><span>:</span><span> &#39;</span><span>POST</span><span>&#39;</span><span>,</span></span>
<span><span>    </span><span><span>headers</span></span><span>:</span><span> {</span></span>
<span><span>      &#39;</span><span>Authorization</span><span>&#39;</span><span>:</span><span> `</span><span>Bearer </span><span>${</span><span><span>process</span></span><span>.</span><span><span>env</span></span><span>.</span><span><span>OPENAI_API_KEY</span></span><span>}</span><span>`</span><span>,</span></span>
<span><span>      &#39;</span><span>Content-Type</span><span>&#39;</span><span>:</span><span> &#39;</span><span>application/json</span><span>&#39;</span><span>,</span></span>
<span><span>    }</span><span>,</span></span>
<span><span>    </span><span><span>body</span></span><span>:</span><span> </span><span><span>JSON</span></span><span>.</span><span><span>stringify</span></span><span>({</span></span>
<span><span>      </span><span><span>model</span></span><span>:</span><span> &#39;</span><span>text-embedding-3-large</span><span>&#39;</span><span>,</span></span>
<span><span>      </span><span><span>input</span></span><span>:</span><span> </span><span><span>textA</span></span></span>
<span><span>    })</span></span>
<span><span>  })</span><span>;</span></span>
<span><span>  </span></span>
<span><span>  const</span><span> </span><span><span>responseB</span></span><span> =</span><span> await</span><span> </span><span><span>fetch</span></span><span>(</span><span>&#39;</span><span>https://api.openai.com/v1/embeddings</span><span>&#39;</span><span>,</span><span> {</span></span>
<span><span>    </span><span><span>method</span></span><span>:</span><span> &#39;</span><span>POST</span><span>&#39;</span><span>,</span></span>
<span><span>    </span><span><span>headers</span></span><span>:</span><span> {</span></span>
<span><span>      &#39;</span><span>Authorization</span><span>&#39;</span><span>:</span><span> `</span><span>Bearer </span><span>${</span><span><span>process</span></span><span>.</span><span><span>env</span></span><span>.</span><span><span>OPENAI_API_KEY</span></span><span>}</span><span>`</span><span>,</span></span>
<span><span>      &#39;</span><span>Content-Type</span><span>&#39;</span><span>:</span><span> &#39;</span><span>application/json</span><span>&#39;</span><span>,</span></span>
<span><span>    }</span><span>,</span></span>
<span><span>    </span><span><span>body</span></span><span>:</span><span> </span><span><span>JSON</span></span><span>.</span><span><span>stringify</span></span><span>({</span></span>
<span><span>      </span><span><span>model</span></span><span>:</span><span> &#39;</span><span>text-embedding-3-large</span><span>&#39;</span><span>,</span></span>
<span><span>      </span><span><span>input</span></span><span>:</span><span> </span><span><span>textB</span></span></span>
<span><span>    })</span></span>
<span><span>  })</span><span>;</span></span>
<span><span>  </span></span>
<span><span>  const</span><span> </span><span><span>embeddingA</span></span><span> =</span><span> (</span><span>await</span><span> </span><span><span>responseA</span></span><span>.</span><span><span>json</span></span><span>())</span><span>.</span><span>data</span><span>[</span><span>0</span><span>]</span><span>.</span><span>embedding</span><span>;</span></span>
<span><span>  const</span><span> </span><span><span>embeddingB</span></span><span> =</span><span> (</span><span>await</span><span> </span><span><span>responseB</span></span><span>.</span><span><span>json</span></span><span>())</span><span>.</span><span>data</span><span>[</span><span>0</span><span>]</span><span>.</span><span>embedding</span><span>;</span></span>
<span><span>  </span></span>
<span><span>  // Calculate similarity using our function</span></span>
<span><span>  return</span><span> </span><span>VectorUtils</span><span>.</span><span>cosineSimilarity</span><span>(</span><span><span>embeddingA</span></span><span>,</span><span> </span><span><span>embeddingB</span></span><span>)</span><span>;</span></span>
<span><span>}</span></span></code></pre>
<div> <p> <span>‚ö†Ô∏è</span> Warning </p> <p>In a production environment, you should pre-compute embeddings for your content (like blog posts, products, or documents) and store them in a vector database (like Pinecone, Qdrant, or Milvus). Re-computing embeddings for every user request as shown in this example wastes resources and slows performance. A better approach: embed your content once during indexing, store the vectors, and only embed the user‚Äôs query when performing a search.</p> </div> 
<p>OpenAI‚Äôs latest embedding models like <code>text-embedding-3-large</code> have up to 3,072 dimensions, capturing extremely nuanced semantic relationships between words and concepts. These high-dimensional embeddings enable much more accurate similarity measurements than simpler vector representations.</p>
<p>For more information on OpenAI‚Äôs embedding models, including best practices and implementation details, check out their documentation at <a href="https://platform.openai.com/docs/guides/embeddings">https://platform.openai.com/docs/guides/embeddings</a>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Understanding vectors and cosine similarity provides practical tools that empower you to work effectively with modern AI features. By implementing these concepts in TypeScript, you gain a deeper understanding and precise control over calculating similarity in your applications.
The interactive visualizations we‚Äôve explored help you build intuition about these mathematical concepts, while the TypeScript implementation gives you the tools to apply them in real-world scenarios.
Whether you build recommendation systems, semantic search, or content-matching features, the foundation you‚Äôve gained here will help you implement more intelligent, accurate, and effective AI-powered features in your web applications.</p> </article></div>
  </body>
</html>
