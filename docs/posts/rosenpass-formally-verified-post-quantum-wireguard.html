<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rosenpass/rosenpass">Original</a>
    <h1>Rosenpass – formally verified post-quantum WireGuard</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rosenpass/rosenpass/actions/workflows/nix.yaml/badge.svg"><img src="https://github.com/rosenpass/rosenpass/actions/workflows/nix.yaml/badge.svg" alt="Nix"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/rosenpass/rosenpass/actions/workflows/qc.yaml/badge.svg"><img src="https://github.com/rosenpass/rosenpass/actions/workflows/qc.yaml/badge.svg" alt="QC"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/60da4e3e89dfca6643493f3c0ddda0bb5479b00f415f8c0a183cbd3cd396aa6d/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726f73656e706173732e737667"><img src="https://camo.githubusercontent.com/60da4e3e89dfca6643493f3c0ddda0bb5479b00f415f8c0a183cbd3cd396aa6d/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726f73656e706173732e737667" alt="crates.io" data-canonical-src="https://img.shields.io/crates/v/rosenpass.svg"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/923cfe87a45ea7c39a28dd2b426886d6174a0945b42bac24606005221770dc77/68747470733a2f2f696d672e736869656c64732e696f2f6c6962726172696573696f2f72656c656173652f636172676f2f726f73656e70617373"><img src="https://camo.githubusercontent.com/923cfe87a45ea7c39a28dd2b426886d6174a0945b42bac24606005221770dc77/68747470733a2f2f696d672e736869656c64732e696f2f6c6962726172696573696f2f72656c656173652f636172676f2f726f73656e70617373" alt="Libraries.io dependency status for latest release" data-canonical-src="https://img.shields.io/librariesio/release/cargo/rosenpass"/></a></p>
<p dir="auto">This repository contains</p>
<ol dir="auto">
<li>A description of the <a href="https://github.com/rosenpass/rosenpass/raw/papers-pdf/whitepaper.pdf">Rosenpass protocol</a></li>
<li>The reference implementation of the protocol – the <a href="https://github.com/rosenpass/rosenpass/blob/main/src">rosenpass tool</a></li>
<li>A frontend integrating Rosenpass and WireGuard to create a vpn – the <a href="https://github.com/rosenpass/rosenpass/blob/main/rp">rp frontend</a></li>
<li><a href="https://github.com/rosenpass/rosenpass/blob/main/analysis">Security analysis</a> of the protocol using proverif</li>
</ol>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting started</h2>
<p dir="auto">First, <a href="#Getting-Rosenpass">install rosenpass</a>. Then, check out the help funtions of <code>rp</code> &amp; <code>rosenpass</code>:</p>

<p dir="auto">Follow <a href="https://rosenpass.eu/#start" rel="nofollow">quickstart instructions</a> to get a VPN up and running.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-software-architecture" aria-hidden="true" href="#software-architecture"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Software architecture</h2>
<p dir="auto">The <a href="https://github.com/rosenpass/rosenpass/blob/main/src">rosenpass tool</a> is written in Rust and uses liboqs<sup><a href="#user-content-fn-liboqs-703fca6e9989d71878f6f938446b72a7" id="user-content-fnref-liboqs-703fca6e9989d71878f6f938446b72a7" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup> and libsodium<sup><a href="#user-content-fn-libsodium-703fca6e9989d71878f6f938446b72a7" id="user-content-fnref-libsodium-703fca6e9989d71878f6f938446b72a7" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup>. The tool establishes a symmetric key and provides it to WireGuard. Since it supplies WireGuard with key through the PSK feature using Rosenpass+WireGuard is cryptographically no less secure than using WireGuard on its own (&#34;hybrid security&#34;). Rosenpass refreshes the symmetric key every two minutes.</p>
<p dir="auto">As with any application a small risk of critical security issues (such as buffer overflows, remote code execution) exists; the Rosenpass application is written in the Rust programming language which is much less prone to such issues. Rosenpass can also write keys to files instead of supplying them to WireGuard With a bit of scripting the stand alone mode of the implementation can be used to run the application in a Container, VM or on another host. This mode can also be used to integrate tools other than WireGuard with Rosenpass.</p>
<p dir="auto">The <a href="https://github.com/rosenpass/rosenpass/blob/main/rp"><code>rp</code></a> tool written in bash makes it easy to create a VPN using WireGuard and Rosenpass.</p>
<p dir="auto"><code>rp</code> is easy to get started with but has a few drawbacks; it runs as root, demanding access to both WireGuard
and Rosenpass private keys, takes control of the interface and works with exactly one interface. If you do not feel confident about running Rosenpass as root, you should use the stand-alone mode to create a more secure setup using containers, jails, or virtual machines.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-networking--ports" aria-hidden="true" href="#networking--ports"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Networking &amp; ports</h3>
<p dir="auto">rp allocates two UDP ports; if port N is specified for rosenpass, it will allocate port N+1 for WireGuard.</p>
<p dir="auto">Like WireGuard, Rosenpass does not enforce any separation between clients and servers.
If you do not specify the <code>listen</code> option, Rosenpass and WireGuard will choose random ports; this is <em>client mode</em>.
If you do not specify <code>endpoint</code>, Rosenpass will not try to connect to the peer and instead wait for connections from peers. This is <em>server mode</em>.
You may specify both. Leaving out both is not forbidden but also not very useful.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-security-analysis" aria-hidden="true" href="#security-analysis"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Security analysis</h2>

<p dir="auto">We are working on a cryptographic proof of security, but we already provide a symbolic analysis using proverif as part of the software package. You can run the security analysis using the nix package manager which handles installing the dependencies or you can call the <a href="https://github.com/rosenpass/rosenpass/blob/main/analyze.sh"><code>./analyze.sh</code></a> script directly. In this case, you need to ensure that <code>proverif</code>, <code>graphviz</code>, <code>awk</code>, and <code>cpp</code> are installed on your system.</p>
<div dir="auto" data-snippet-clipboard-copy-content="   (nix) $ nix build .#proof-proverif --print-build-logs
(manual) $ ./analyze.sh"><pre>   (nix) $ nix build .<span><span>#</span>proof-proverif --print-build-logs</span>
(manual) $ ./analyze.sh</pre></div>
<p dir="auto">The analysis is implemented according to modern software engineering principles: Using the C preprocessor, we where able to split the analysis into multiple files and uses some metaprogramming to avoid repetition.
The code uses a variety of optimizations to speed up analysis such as using secret functions to model trusted/malicious setup. We split the model into two separate entry points which can be analyzed in parallel. Each is much faster than both models combined.
A wrapper script provides instant feedback about which queries execute as expected in color: A red cross if a query fails and a green check if it succeeds.</p>

<p dir="auto">Rosenpass is packaged for more and more distros, maybe also for the distro of your choice?</p>
<p dir="auto"><a href="https://repology.org/project/rosenpass/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/37a995a7baa3f53afaf543768677520ccc3fa5dfbd77067ec1b722eab30d3f08/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f766572746963616c2d616c6c7265706f732f726f73656e706173732e737667" alt="Packaging status" data-canonical-src="https://repology.org/badge/vertical-allrepos/rosenpass.svg"/></a></p>

<p dir="auto">Funded through <a href="https://nlnet.nl/" rel="nofollow">NLNet</a> with financial support for the European Commission&#39;s <a href="https://nlnet.nl/assure" rel="nofollow">NGI Assure</a> program.</p>
<section data-footnotes="">
<ol dir="auto">
<li id="user-content-fn-liboqs-703fca6e9989d71878f6f938446b72a7">
<p dir="auto"><a href="https://openquantumsafe.org/liboqs/">https://openquantumsafe.org/liboqs/</a> <a href="#user-content-fnref-liboqs-703fca6e9989d71878f6f938446b72a7" data-footnote-backref="" aria-label="Back to reference 1"><g-emoji alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">↩</g-emoji></a></p>
</li>
<li id="user-content-fn-libsodium-703fca6e9989d71878f6f938446b72a7">
<p dir="auto"><a href="https://doc.libsodium.org/">https://doc.libsodium.org/</a> <a href="#user-content-fnref-libsodium-703fca6e9989d71878f6f938446b72a7" data-footnote-backref="" aria-label="Back to reference 2"><g-emoji alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">↩</g-emoji></a></p>
</li>
</ol>
</section>
</article>
          </div></div>
  </body>
</html>
