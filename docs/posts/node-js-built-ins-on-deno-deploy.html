<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://deno.com/blog/node-builtins-on-deploy">Original</a>
    <h1>Node.js built-ins on Deno Deploy</h1>
    
    <div id="readability-page-1" class="page"><div><p><em>We&#39;re excited to announce that starting today, Deno Deploy supports importing
Node.js built-in modules such as <code>http</code>, <code>fs</code>, and <code>path</code>. You can now run
existing Node.js apps at the edge.</em></p>
<p><img src="https://deno.com/blog/node-builtins-on-deploy/header.png" alt="A screenshot of a Deno Deploy playground using the `node:http` built-in module" width="1920" height="981"/></p>
<p>Deno Deploy is a
<a href="https://tinyclouds.org/javascript_containers" title="null" rel="noopener noreferrer">next-generation cloud platform</a>
built on JavaScript isolates. It runs your JavaScript, TypeScript, and
WebAssembly at the edge,
<a href="https://deno.com/deploy/docs/regions" title="null" rel="noopener noreferrer">in our 35 global regions</a>, close to your
users. It scales automatically, from zero to thousands of requests per second.
Deno Deploy comes built in with super speedy deployments from GitHub, and
<a href="https://deno.com/kv" title="null" rel="noopener noreferrer">a global database</a>.</p>
<p>Starting today, you can use Node.js built-in modules in your Deno Deploy
applications. <strong>Modules such as <code>fs</code>, <code>path</code>, <code>crypto</code>, or <code>http</code> now work out
of the box</strong>, enabling you to run existing Node.js apps at the edge, without
hassle.</p>
<div><pre><span>import</span> <span><span>{</span> createServer <span>}</span></span> <span>from</span> <span>&#34;node:http&#34;</span><span>;</span>
<span>import</span> <span>process</span> <span>from</span> <span>&#34;node:process&#34;</span><span>;</span>

<span>const</span> server <span>=</span> <span>createServer</span><span>(</span><span>(</span><span>req<span>,</span> res</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> message <span>=</span> <span><span>`</span><span>Hello from </span><span><span>${</span>process<span>.</span><span>env</span><span>.</span><span>DENO_REGION</span><span>}</span></span><span> at </span><span><span>${</span><span>new</span> <span>Date</span><span>(</span><span>)</span><span>}</span></span><span>`</span></span><span>;</span>
  res<span>.</span><span>end</span><span>(</span>message<span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>

server<span>.</span><span>listen</span><span>(</span><span>8080</span><span>)</span><span>;</span></pre></div><p><em>See this example live: <a href="https://dash.deno.com/playground/node-specifiers" title="undefined" rel="noopener noreferrer">https://dash.deno.com/playground/node-specifiers</a></em></p>
<p>This means that you can now run <a href="https://expressjs.com/" title="null" rel="noopener noreferrer">Express</a> applications
on Deno Deploy:</p>
<div><pre><span>import</span> <span>express</span> <span>from</span> <span>&#34;https://esm.sh/express?target=denonext&#34;</span><span>;</span>
<span>const</span> app <span>=</span> <span>express</span><span>(</span><span>)</span><span>;</span>
app<span>.</span><span>get</span><span>(</span><span>&#34;/&#34;</span><span>,</span> <span>(</span><span>req<span>,</span> res</span><span>)</span> <span>=&gt;</span> <span>{</span>
  res<span>.</span><span>send</span><span>(</span><span>&#34;Hello from Deno Deploy!&#34;</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>
app<span>.</span><span>listen</span><span>(</span><span>8080</span><span>)</span><span>;</span></pre></div><p><em>See this example live: <a href="https://dash.deno.com/playground/express-demo" title="undefined" rel="noopener noreferrer">https://dash.deno.com/playground/express-demo</a></em></p>
<p>Importing of all 47 Node.js built-in modules is supported. However, as all
applications running on Deno Deploy are sandboxed, some modules such as
<code>child_process</code> do not provide any useful functionality. For a full list of
supported modules and limitations, refer to the documentation:
<a href="https://deno.com/deploy/docs/runtime-node" title="undefined" rel="noopener noreferrer">https://deno.com/deploy/docs/runtime-node</a></p>
<p>While the Node.js built-in modules behave identically to their native Node.js
counterparts, there are cases where our implemenation is not yet perfect. If you
encounter any issues,
<a href="https://github.com/denoland/deno/issues/new" title="null" rel="noopener noreferrer">please file an issue</a>.</p>
<p>This is just the humble beginning of our Node.js compatibility story in Deno
Deploy. In the above express example, esm.sh is used to load the npm module
express. We are working to bring
<a href="https://deno.com/manual/node/npm_specifiers" title="null" rel="noopener noreferrer">npm specifiers</a> support natively
to Deno Deploy. Stay tuned for updates on this soon.</p>
</div></div>
  </body>
</html>
