<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eshelyaron.com/kubed.html">Original</a>
    <h1>Kubed (Emacs-based Kubernetes interface) user manual, now with pretty images</h1>
    
    <div id="readability-page-1" class="page"><p>This manual is for Kubed 0.4.1, a rich Emacs interface for Kubernetes.
</p><div id="Usage">

<h2 id="Usage-1"><span>3 Usage<a href="#Usage-1"> ¶</a></span></h2>
<p>Kubed comes with a large number of Emacs command for interacting with
Kubernetes. Some commands perform one action on one resource, while
others show you a menu with many resources and let you interact with any
number of them. Some commands are specific to one type of resources,
while others act on resources of any type. There are different ways to
use Kubed, depending on your use case.
</p>
<p>The two most important entry points for Kubed are
<code>kubed-prefix-map</code> and <code>kubed-transient</code>:
</p>
<dl><a id="index-keymap_002c-for-global-commands"></a><dt id="index-kubed_002dprefix_002dmap"><a id="index-keymap_002c-for-global-commands"><span>Keymap: </span><span><strong>kubed-prefix-map</strong></span></a><a href="#index-kubed_002dprefix_002dmap"> ¶</a></dt>
<dd><p>Keymap with bindings for many useful Kubed commands.
</p></dd></dl><p>The prefix keymap <code>kubed-prefix-map</code> gives you quick access to the
main Kubed commands. You may want to bind it to a convenient key in
your global keymap, for example:
</p>
<div>
<pre><span>(</span><span>keymap-global-set</span> <span>&#34;C-c k&#34;</span> &#39;kubed-prefix-map<span>)</span>
</pre></div>
<p>With this binding in place, you can create a new Kubernetes resource
with <kbd>C-c k +</kbd> and attach to a running pod with <kbd>C-c k p a</kbd>.
The <kbd>C-c k</kbd> binding is just a suggestion of course, feel free to
pick any key sequence you like.
</p>
<div>
<p><img src="https://eshelyaron.com/assets/kubed-prefix-map.png" alt="Emacs which-key popup for kubed-prefix-map keymap"/><img src="https://eshelyaron.com/assets/kubed-deployment-prefix-map.png" alt="Emacs which-key popup for kubed-deployment-prefix-map"/></p><p>Use <code>kubed-prefix-map</code> for quick access to the main Kubed commands</p></div>
<p>You can also access all of the commands in <code>kubed-prefix-map</code> via
the menu-bar ‘<samp>Kubernetes</samp>’ menu—to add this menu to your
menu-bar, enable the global minor mode <code>kubed-menu-bar-mode</code>:
</p>
<dl><a id="Definition-of-kubed_002dmenu_002dbar_002dmode"></a>
<dd><p>Add ‘<samp>Kubernetes</samp>’ menu to your menu bar.
</p></dd></dl><p>The other important entry point that Kubed provides for exploring and
performing different Kubernetes operations is <code>kubed-transient</code>:
</p>
<dl><dt id="index-kubed_002dtransient"><span>Command: </span><span><strong>kubed-transient</strong><a href="#index-kubed_002dtransient"> ¶</a></span></dt>
<dd><p>Open the main Kubed transient menu.
</p></dd></dl><p>This command pops up the Kubed transient menu, which gives you
interactive guidance for invoking Kubed commands.
See <a data-manual="transient" href="https://www.gnu.org/software/emacs/manual/html_mono/transient.html#Top">(transient)Top</a>.
</p>
<p>The following sections describe in detail the various Kubed commands.
</p>
<ul><li><a href="#Display-Resource" accesskey="1">Display Resource</a></li>
<li><a href="#Browse-Resources" accesskey="2">Browse Resources</a></li>
<li><a href="#Context-and-Namespace" accesskey="3">Context and Namespace</a></li>
<li><a href="#Transient-Menus" accesskey="4">Transient Menus</a></li>
<li><a href="#Scale-Deployment" accesskey="5">Scale Deployment</a></li>
</ul><hr/><div id="Display-Resource">

<h3 id="Display-Resource-1"><span>3.1 Display Resource<a href="#Display-Resource-1"> ¶</a></span></h3>
<p>You can view the YAML description of any resource in your Kubernetes
cluster. In Kubed, this is referred to as <em>displaying</em> the given
resource. The following commands display a Kubernetes resource:
</p>
<dl><dt id="index-kubed_002ddisplay_002dresource"><span>Command: </span><span><strong>kubed-display-resource</strong><a href="#index-kubed_002ddisplay_002dresource"> ¶</a></span></dt>
<dd><p>Display a Kubernetes resource.
</p></dd></dl><dl><dt id="index-kubed_002ddisplay_002dpod"><span>Command: </span><span><strong>kubed-display-pod</strong><a href="#index-kubed_002ddisplay_002dpod"> ¶</a></span></dt>
<dt id="index-kubed_002ddisplay_002ddeployment"><span>Command: </span><span><strong>kubed-display-deployment</strong><a href="#index-kubed_002ddisplay_002ddeployment"> ¶</a></span></dt>
<dt id="index-kubed_002ddisplay_002dnamespace"><span>Command: </span><span><strong>kubed-display-namespace</strong><a href="#index-kubed_002ddisplay_002dnamespace"> ¶</a></span></dt>
<dt id="index-kubed_002ddisplay_002dfoo"><span>Command: </span><span><strong>kubed-display-<var>foo</var></strong><a href="#index-kubed_002ddisplay_002dfoo"> ¶</a></span></dt>
<dd><p>Display Kubernetes resource of a given type.
</p></dd></dl><p>Command <code>kubed-display-resource</code> can display any Kubernetes
resource. It prompts you to select a resource type and a resource
name, and displays that resource in a dedicated buffer. By default,
this command assumes you want to display a resource that is in the
current namespace, but if you invoke <code>kubed-display-resource</code>
with a prefix argument (<kbd>C-u</kbd>) and choose a namespaced resource
type, then it also lets you select the namespace of the resource.
With a double prefix argument, it lets you select which
<code>kubectl</code> context to use too. See <a href="#Context-and-Namespace">Context and Namespace</a>.
</p>
<p>If you have <code>kubed-prefix-map</code> bound to <kbd>C-c k</kbd>, you can
invoke <code>kubed-display-resource</code> with <kbd>C-c k <kbd>RET</kbd></kbd>. This
command is also available from the menu-bar “Kubernetes” menu
(see <a href="#Definition-of-kubed_002dmenu_002dbar_002dmode">Definition of kubed-menu-bar-mode</a>), and from the transient
“Kubernetes Display” menu (see <a href="#Transient-Menus">Transient Menus</a>).
</p>
<p>You can also display the resource at point in resources list buffers
by simply typing <kbd><kbd>RET</kbd></kbd>. See <a href="#Browse-Resources">Browse Resources</a>.
</p>
<p>Kubed also provides a dedicated <code>kubed-display-<var>foo</var></code> command
for each supported resource type <var>foo</var>. These commands are just
like <code>kubed-display-resource</code>, except that they do not prompt you
for a type, since they are type-specific. For example,
<code>kubed-display-pod</code> only prompts you for a pod name, and then
displays it like <code>kubed-display-resource</code> does.
</p>
<p>You can invoke these commands by adding a type-specific key before
<kbd><kbd>RET</kbd></kbd> in <kbd>C-c k <kbd>RET</kbd></kbd>: <kbd>C-c k p <kbd>RET</kbd></kbd>
invokes <code>kubed-display-pod</code>, <kbd>C-c k d <kbd>RET</kbd></kbd> invokes
<code>kubed-display-deployment</code>, and so on.
</p>
<p>When Kubed prepares a buffer for displaying a resource, it runs the
hook <code>kubed-yaml-setup-hook</code> right after populating the buffer
with the YAML description of the resource:
</p>
<dl><dt id="index-kubed_002dyaml_002dsetup_002dhook"><span>User Option: </span><span><strong>kubed-yaml-setup-hook</strong><a href="#index-kubed_002dyaml_002dsetup_002dhook"> ¶</a></span></dt>
<dd><p>List of functions to call, in order, to prepare YAML buffers. The
first function on this hook is normally the major mode you want to use
for YAML buffers that display Kubernetes resources. By default, this
is the list <code>(yaml-ts-mode view-mode)</code>.
</p></dd></dl><p>In addition, Kubed enables a bespoke minor mode
<code>kubed-display-resource-mode</code> in buffers that display Kubernetes
resources:
</p>
<dl><dt id="index-kubed_002ddisplay_002dresource_002dmode"><span>Minor Mode: </span><span><strong>kubed-display-resource-mode</strong><a href="#index-kubed_002ddisplay_002dresource_002dmode"> ¶</a></span></dt>
<dd><p>Minor mode for buffers that display a Kubernetes resource.
</p></dd></dl><p>This minor mode does the following:
</p>
<ul><li>It shows the word ‘<samp>Kubed</samp>’ in the mode line, so you know you’re
seeing a rendered Kubernetes resource, rather than any old YAML file.
</li><li>It allows you to <em>bookmark</em> the resource your viewing and your
position in its YAML description with the regular Emacs bookmarks
commands (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Bookmarks">(emacs)Bookmarks</a>), namely <kbd>C-x r m</kbd>.
</li><li><a id="index-C_002dc-C_002dj">
</a><a id="index-kubed_002ddisplay_002dresource_002djump_002dto_002dlist">
It binds the key sequence <kbd>C-c C-j</kbd> to command
<code>kubed-display-resource-jump-to-list</code>, which pops up the
resources list buffer for the type of the displayed resource, and
takes you to the line corresponding to it.
</a></li><li><a id="index-C_002dc-C_002dc">
</a><a id="index-kubed_002ddisplay_002dresource_002dreplace">
</a><a id="index-C_002dc-C_002d_003d">
</a><a id="index-kubed_002ddisplay_002dresource_002ddiff">
</a><a id="index-C_002dx-C_002dq">
</a><a id="index-read_002donly_002dmode">
It binds <kbd>C-c C-c</kbd> to command
<code>kubed-display-resource-replace</code>, which lets you apply any
changes that you make in the YAML buffer back to the resource. When
you hit <kbd>C-c C-c</kbd>, Kubed asks you for confirmation before
proceeding; you can reply with <kbd>d</kbd> (‘<samp>diff</samp>’) to show a diff
between the current state of the resource and the current buffer
contents. You can also display this diff anytime with <kbd>C-c C-=</kbd>.
Note that by default Kubed displays resources in read-only buffers, so
you may need to hit <kbd>C-x C-q</kbd> (<code>read-only-mode</code>) before
making changes in the buffer.
</a></li><li><a id="index-C_002dx-x-g">
</a><a id="index-revert_002dbuffer">
</a><a id="index-revert_002dbuffer_002dquick">
It lets you repopulate the buffer with updated information about the
resource with <kbd>C-x x g</kbd> (<code>revert-buffer-quick</code>) and
<kbd>M-x revert-buffer</kbd>. This is also useful if you edit the
resource and want to restart from a clean slate.
</a></li></ul><a id="index-revert_002dbuffer_002dquick">
<hr/></a></div><div id="Browse-Resources">
<h3 id="Browse-Resources-1"><span>3.2 Browse Resources<a href="#Browse-Resources-1"> ¶</a></span></h3>
<p>Kubed gives you an interactive list of resources for each type, that
you access with the <code>kubed-list-<var>resource</var>s</code> commands, such
as <code>kubed-list-pods</code>.
</p>
<p>These commands are bound to <kbd>l</kbd> in Kubed’s type-specific prefix
keymaps, most of which are accessible via the global
<code>kubed-prefix-map</code> by default (see <a href="#Definition-of-kubed_002dprefix_002dmap">Definition of kubed-prefix-map</a>). So if you’ve bound <code>kubed-prefix-map</code> to
<kbd>C-c k</kbd>, you can pop up the pods list with <kbd>C-c k p l</kbd>, the
deployments list with <kbd>C-c k d l</kbd>, the jobs list with <kbd>C-c k j l</kbd>, etc. Normally, Kubed shows the list of resources in the
current namespace, but if you invoke these commands with a prefix
argument (say, <kbd>C-u C-c k p l</kbd>), they first prompt you to select a
namespace, and then show resources in the namespace you selected.
</p>
<p>The list of <var>resource</var>s in shown a buffer called <samp>*Kubed <var>resource</var>s@<var>namespace</var>[<var>context</var>]*</samp>, where
<var>context</var> is a <code>kubectl</code> context, and <var>namespace</var> is a
namespace in <var>context</var>. For example, Kubed shows the list of pods
in namespace ‘<samp>default</samp>’ for context ‘<samp>minikube</samp>’ in buffer
<samp>*Kubed pos@default[minikube]</samp>. For non-namespaced resources,
the ‘<samp>@<var>namespace</var></samp>’ part is omitted.
</p>
<p>Each resource type has its own major mode for list buffers with
type-specific commands and operations, but they are all also derived
from a shared parent mode. The pods list uses the
<code>kubed-pods-mode</code> (‘<samp>Kubernetes Pods</samp>’) major mode, the list
of Kubernetes deployments uses <code>kubed-deployments-mode</code>, and so
on.
</p>
<div>
<p><img src="https://eshelyaron.com/assets/kubed-list-transient.png" alt="Kubed pods list buffer with the help transient menu visible"/></p><p>Browse your pods, deployments, and other resources with Kubed list buffers</p></div>
<p>The common parent major mode is <code>kubed-list-mode</code>:
</p>
<dl><dt id="index-kubed_002dlist_002dmode"><span>Major Mode: </span><span><strong>kubed-list-mode</strong><a href="#index-kubed_002dlist_002dmode"> ¶</a></span></dt>
<dd><p>Major mode for listing generic Kubernetes resources.
</p></dd></dl><p>This mode provides the following commands for all type-specific
derived modes:
</p>
<dl><dt><a id="index-kubed_002dlist_002dtransient">
</a><a id="index-_003f"><span><kbd><kbd>?</kbd></kbd></span></a><a href="#index-_003f"> ¶</a></dt>
<dd><p>Show help in transient menu (<code>kubed-list-transient</code>).
<a id="index-RET">
</a><a id="index-kubed_002dlist_002dselect_002dresource">
</a></p></dd><a id="index-kubed_002dlist_002dselect_002dresource">
<dt><kbd><kbd>RET</kbd></kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dselect_002dresource"></a><p><a id="index-kubed_002dlist_002dselect_002dresource">Display the resource at point in the current window
(<code>kubed-list-select-resource</code>).
</a><a id="index-o">
</a><a id="index-kubed_002dlist_002dselect_002dresource_002dother_002dwindow">
</a></p></dd><a id="index-kubed_002dlist_002dselect_002dresource_002dother_002dwindow">
<dt><kbd>o</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dselect_002dresource_002dother_002dwindow"></a><p><a id="index-kubed_002dlist_002dselect_002dresource_002dother_002dwindow">Display the resource at point in another window and select that window
(<code>kubed-list-select-resource-other-window</code>).
</a><a id="index-C_002do">
</a><a id="index-kubed_002dlist_002ddisplay_002dresource">
</a></p></dd><a id="index-kubed_002dlist_002ddisplay_002dresource">
<dt><kbd>C-o</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002ddisplay_002dresource"></a><p><a id="index-kubed_002dlist_002ddisplay_002dresource">Display the resource at point in another window without selecting it
(<code>kubed-list-display-resource</code>).
</a><a id="index-D">
</a><a id="index-kubed_002dlist_002ddelete">
</a></p></dd><a id="index-kubed_002dlist_002ddelete">
<dt><kbd>D</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002ddelete"></a><p><a id="index-kubed_002dlist_002ddelete">Delete the resource at point (<code>kubed-list-delete</code>).
</a><a id="index-e">
</a><a id="index-kubed_002dlist_002dedit">
</a></p></dd><a id="index-kubed_002dlist_002dedit">
<dt><kbd>e</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dedit"></a><p><a id="index-kubed_002dlist_002dedit">Edit the resource at point (<code>kubed-list-edit</code>).
</a><a id="index-P">
</a><a id="index-kubed_002dlist_002dpatch">
</a></p></dd><a id="index-kubed_002dlist_002dpatch">
<dt><kbd>P</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dpatch"></a><p><a id="index-kubed_002dlist_002dpatch">Patch the resource at point (<code>kubed-list-patch</code>).
</a><a id="index-g">
</a><a id="index-kubed_002dlist_002dupdate">
</a></p></dd><a id="index-kubed_002dlist_002dupdate">
<dt><kbd>g</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dupdate"></a><p><a id="index-kubed_002dlist_002dupdate">Update the resources list by fetching new information from Kubernetes
(<code>kubed-list-update</code>).
</a><a id="index-_002f">
</a><a id="index-kubed_002dlist_002dset_002dfilter">
</a></p></dd><a id="index-kubed_002dlist_002dset_002dfilter">
<dt><kbd>/</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dset_002dfilter"></a><p><a id="index-kubed_002dlist_002dset_002dfilter">Filter the current list of resources (<code>kubed-list-set-filter</code>).
See </a><a href="#List-Filter">Filtering Resource Lists</a>.
<a id="index-d">
</a><a id="index-kubed_002dlist_002dmark_002dfor_002ddeletion">
</a></p></dd><a id="index-kubed_002dlist_002dmark_002dfor_002ddeletion">
<dt><kbd>d</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dmark_002dfor_002ddeletion"></a><p><a id="index-kubed_002dlist_002dmark_002dfor_002ddeletion">Mark the resource at point for deletion
(<code>kubed-list-mark-for-deletion</code>). Resources marked for deletion
have a ‘<samp>D</samp>’ in the beginning of their line.
</a><a id="index-x">
</a><a id="index-kubed_002dlist_002ddelete_002dmarked">
</a></p></dd><a id="index-kubed_002dlist_002ddelete_002dmarked">
<dt><kbd>x</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002ddelete_002dmarked"></a><p><a id="index-kubed_002dlist_002ddelete_002dmarked">Delete marked resources (<code>kubed-list-delete-marked</code>).
</a><a id="index-u">
</a><a id="index-kubed_002dlist_002dunmark">
</a></p></dd><a id="index-kubed_002dlist_002dunmark">
<dt><kbd>u</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dunmark"></a><p><a id="index-kubed_002dlist_002dunmark">Unmark from resource at point (<code>kubed-list-unmark</code>).
</a><a id="index-w">
</a><a id="index-kubed_002dlist_002dcopy_002das_002dkill">
</a></p></dd><a id="index-kubed_002dlist_002dcopy_002das_002dkill">
<dt><kbd>w</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dcopy_002das_002dkill"></a><p><a id="index-kubed_002dlist_002dcopy_002das_002dkill">Copy name of resource at point into the kill ring
(<code>kubed-list-copy-as-kill</code>).
</a><a id="index-n">
</a><a id="index-next_002dline">
</a></p></dd><a id="index-next_002dline">
<dt><kbd>n</kbd></dt>
</a><dd><a id="index-next_002dline"></a><p><a id="index-next_002dline">Move point to the next line (<code>next-line</code>).
</a><a id="index-p">
</a><a id="index-previous_002dline">
</a></p></dd><a id="index-previous_002dline">
<dt><kbd>p</kbd></dt>
</a><dd><a id="index-previous_002dline"></a><p><a id="index-previous_002dline">Move point to the previous line (<code>previous-line</code>).
</a><a id="index-TAB">
</a><a id="index-kubed_002dlist_002dnext_002dcolumn">
</a></p></dd><a id="index-kubed_002dlist_002dnext_002dcolumn">
<dt><kbd><kbd>TAB</kbd></kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dnext_002dcolumn"></a><p><a id="index-kubed_002dlist_002dnext_002dcolumn">Move point to the next column. If point is already at the last
column, move to the first column of the next line instead
(<code>kubed-list-next-column</code>).
</a><a id="index-S_002dTAB">
</a><a id="index-kubed_002dlist_002dprevious_002dcolumn">
</a></p></dd><a id="index-kubed_002dlist_002dprevious_002dcolumn">
<dt><kbd>S-<kbd>TAB</kbd></kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dprevious_002dcolumn"></a><p><a id="index-kubed_002dlist_002dprevious_002dcolumn">Move point to the previous column. If point is already at the first
column, move to the last column of the previous line instead
(<code>kubed-list-previous-column</code>).
</a><a id="index-S">
</a><a id="index-tabulated_002dlist_002dsort">
</a></p></dd><a id="index-tabulated_002dlist_002dsort">
<dt><kbd>S</kbd></dt>
</a><dd><a id="index-tabulated_002dlist_002dsort"></a><p><a id="index-tabulated_002dlist_002dsort">Sort lines by the column at point (<code>tabulated-list-sort</code>).
</a><a id="index-_007c">
</a><a id="index-kubed_002dlist_002dfit_002dcolumn_002dwidth_002dto_002dcontent">
</a></p></dd><a id="index-kubed_002dlist_002dfit_002dcolumn_002dwidth_002dto_002dcontent">
<dt><kbd>|</kbd></dt>
</a><dd><a id="index-kubed_002dlist_002dfit_002dcolumn_002dwidth_002dto_002dcontent"></a><p><a id="index-kubed_002dlist_002dfit_002dcolumn_002dwidth_002dto_002dcontent">Fit width of column at point to its content
(<code>kubed-list-fit-column-width-to-content</code>). With non-negative
prefix argument <var>n</var> (for example, <kbd>0 |</kbd>), fit <var>n</var>th
column. With negative prefix argument (<kbd>- |</kbd>), fit all columns.
</a><a id="index-_007b">
</a><a id="index-tabulated_002dlist_002dnarrow_002dcurrent_002dcolumn">
</a></p></dd><a id="index-tabulated_002dlist_002dnarrow_002dcurrent_002dcolumn">
<dt><kbd>{</kbd></dt>
</a><dd><a id="index-tabulated_002dlist_002dnarrow_002dcurrent_002dcolumn"></a><p><a id="index-tabulated_002dlist_002dnarrow_002dcurrent_002dcolumn">Narrow the column at point
(<code>tabulated-list-narrow-current-column</code>).
</a><a id="index-_007d">
</a><a id="index-tabulated_002dlist_002dwiden_002dcurrent_002dcolumn">
</a></p></dd><a id="index-tabulated_002dlist_002dwiden_002dcurrent_002dcolumn">
<dt><kbd>}</kbd></dt>
<dd><p>Widen the column at point
(<code>tabulated-list-widen-current-column</code>).
</p></dd>
</a></dl><p><a id="index-tabulated_002dlist_002dwiden_002dcurrent_002dcolumn">In addition, you can bookmark any Kubed resources list buffer with the
usual <kbd>C-x r m</kbd>. See </a><a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Bookmarks">(emacs)Bookmarks</a>.
</p>
<p>Note that <code>kubed-list-mode</code> (and its type-specific derivatives)
bind the <kbd>g</kbd> key, which is commonly bound to <code>revert-buffer</code>,
to <code>kubed-list-update</code>. The difference between these commands is
that <code>revert-buffer</code> only refreshes the list display, without
fetching updated data from Kubernetes. You can still invoke
<code>revert-buffer</code> with <kbd>C-x x g</kbd> or <kbd>M-x</kbd>, if you need it.
</p>
<ul><li><a href="#List-Filter" accesskey="1">Filtering Resource Lists</a></li>
</ul><hr/><div id="List-Filter">

<h4 id="Filtering-Resource-Lists"><span>3.2.1 Filtering Resource Lists<a href="#Filtering-Resource-Lists"> ¶</a></span></h4>
<p>In all Kubernetes resource list buffers, you can use <kbd>/</kbd>
(<code>kubed-list-set-filter</code>) to <em>filter</em> the list of resources.
This command sets the filter of the current buffer, which specifies
conditions on resources (lines). Resources that don’t satisfy the
conditions are hidden, so you can focus on those that do.
</p>
<p>Filters can be simple (<em>atomic filters</em>) or complex (<em>composed
filters</em>). In the simple case, you enter a filter in the minibuffer
in the format ‘<samp><var>op</var> <var>col</var> <var>val</var></samp>’, where <var>op</var>
is a comparison operator, one of ‘<samp>=</samp>’, ‘<samp>~</samp>’, ‘<samp>&lt;</samp>’ and
‘<samp>&gt;</samp>’; <var>col</var> is a column name; and <var>val</var> is a value to
compare to values of <var>col</var> with <var>op</var>.
</p>
<p>If <var>op</var> is ‘<samp>=</samp>’, it says to keep only lines whose <var>col</var>
equals <var>val</var>. If <var>op</var> is ‘<samp>~</samp>’, it says to keep lines
whose <var>col</var> matches the <var>val</var> as a regular expression.
‘<samp>&lt;</samp>’ and ‘<samp>&gt;</samp>’ compare column values to numeric values. For
example, the filter ‘<samp>= Name foobar</samp>’ keeps only resources whose
name is ‘<samp>foobar</samp>’. To include whitespace in <var>val</var>, wrap
<var>val</var> in double quotes: ‘<samp>= Name &#34;foo bar&#34;</samp>’.
</p>
<p>The possible values of <var>op</var> and their meanings are defined in
<code>kubed-list-filter-operator-alist</code>, which is a user option you
can use to add or change the meaning of filter operators:
</p>
<dl><dt id="index-kubed_002dlist_002dfilter_002doperator_002dalist"><span>User Option: </span><span><strong>kubed-list-filter-operator-alist</strong><a href="#index-kubed_002dlist_002dfilter_002doperator_002dalist"> ¶</a></span></dt>
<dd><p>Association list of filter operators and corresponding Emacs Lisp
functions. See the documentation string of this option for specifics.
</p></dd></dl><p>You can use more refined filters by composing simple filters. To add
another filter that resources must satisfy, wrap your two filters in
parentheses and put them next to each other:
</p>
<div>
<pre><span>(</span><span>=</span> <span>Name</span> <span>foobar</span><span>)</span> <span>(</span>~ Namespace kube<span>)</span>
</pre></div>
<p>This filter keeps only resources whose name is ‘<samp>foobar</samp>’ in
namespaces that include ‘<samp>kube</samp>’ as a substring, it expresses the
conjunction of the two simple filters.
</p>
<p>To negate a simple filter, put a single quote ahead of it, like so:
</p>
<div>
<pre><span>(</span><span>=</span> <span>Name</span> <span>foobar</span><span>)</span> &#39;<span>(</span>~ Namespace kube<span>)</span>
</pre></div>
<p>This matches resources named ‘<samp>foobar</samp>’ in namespaces that do
<em>not</em> contain ‘<samp>kube</samp>’.
</p>
<p>To specify a disjunction of simple filters (and negated simple
filters), add another level of nesting:
</p>
<div>
<pre><span>(</span><span>(</span>= Name spam<span>)</span> <span>(</span>= Name foobar<span>)</span><span>)</span> &#39;<span>(</span>~ Namespace kube<span>)</span>
</pre></div>
<p>This filter matches resources named either ‘<samp>spam</samp>’ or
‘<samp>foobar</samp>’, in namespaces that do not contain ‘<samp>kube</samp>’.
</p>
<p>While entering a filter in the minibuffer, <kbd><kbd>TAB</kbd></kbd> completion
is available for column names and values. To clear the filter, just
exit the minibuffer with an empty input.
</p>
<hr/></div>
</div>
<div id="Context-and-Namespace">

<h3 id="Context-and-Namespace-1"><span>3.3 Context and Namespace<a href="#Context-and-Namespace-1"> ¶</a></span></h3>
<p>Kubed uses <code>kubectl</code> to interact with Kubernetes clusters, and
you can use multiple <code>kubectl</code> <em>contexts</em> in Kubed to work
with different Kubernetes clusters in parallel. Within each context,
Kubed lets you work in multiple <em>namespaces</em> too. In general,
each buffer has its own <em>local context</em> and <em>local namespace</em>,
and Kubed commands use these local context and namespace by default.
This is similar to how different buffers have different values of
<code>default-directory</code> (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#File-Names">(emacs)File Names</a>), and how that
affects commands that interact with the filesystem.
</p>
<p>For Kubed buffers that display a Kubernetes resource (see <a href="#Display-Resource">Display Resource</a>) or a list of resources (see <a href="#Browse-Resources">Browse Resources</a>), the
buffer-local context and namespace are the context and namespace of
the resources the buffer displays. For non-Kubed buffers, the user
option <code>kubed-default-context-and-namespace</code> determines the
default local context and namespace.
</p>
<dl><dt id="index-kubed_002ddefault_002dcontext_002dand_002dnamespace"><span>User Option: </span><span><strong>kubed-default-context-and-namespace</strong><a href="#index-kubed_002ddefault_002dcontext_002dand_002dnamespace"> ¶</a></span></dt>
<dd><p>Default <code>kubectl</code> context and Kubernetes namespace for Kubed
commands. The value of this option is either a cons cell
<code>(<var>context</var> . <var>namespace</var>)</code> or <code>nil</code>. If it is
<code>nil</code>, Kubed initializes this option to a cons cell with the
current <code>kubectl</code> context and namespace for that context on
the first time Kubed consults this option.
</p></dd></dl><p>As mentioned above, most Kubed commands use the local context and
namespace by default—it is also conventional for Kubed commands to
let you choose a different namespace if you invoke them with a prefix
argument (<kbd>C-u</kbd>), and to also let you choose a different context
if you invoke them with a double prefix argument (<kbd>C-u C-u</kbd>).
</p>
<p>The following functions return the local context and namespace for
buffer in which you call them:
</p>
<dl><dt id="index-kubed_002dlocal_002dcontext"><span>Function: </span><span><strong>kubed-local-context</strong><a href="#index-kubed_002dlocal_002dcontext"> ¶</a></span></dt>
<dd><p>Return the local <code>kubectl</code> context for the current buffer.
</p></dd></dl><dl><dt id="index-kubed_002dlocal_002dnamespace"><span>Function: </span><span><strong>kubed-local-namespace</strong><a href="#index-kubed_002dlocal_002dnamespace"> ¶</a></span></dt>
<dd><p>Return the local Kubernetes namespace for the current buffer.
</p></dd></dl><dl><dt id="index-kubed_002dlocal_002dcontext_002dand_002dnamespace"><span>Function: </span><span><strong>kubed-local-context-and-namespace</strong><a href="#index-kubed_002dlocal_002dcontext_002dand_002dnamespace"> ¶</a></span></dt>
<dd><p>Return the local context and namespace for the current buffer as a
cons cell <code>(<var>context</var> . <var>namespace</var>)</code>.
</p></dd></dl><hr/></div>

<div id="Scale-Deployment">

<h3 id="Scale-Deployment-1"><span>3.5 Scale Deployment<a href="#Scale-Deployment-1"> ¶</a></span></h3>
<p>You can use Kubed to <em>scale</em> Kubernetes a deployment, which means
setting the size of the deployment in terms of the number of replicas
it governs.
</p>
<dl><dt id="index-kubed_002dscale_002ddeployment"><span>Command: </span><span><strong>kubed-scale-deployment</strong><a href="#index-kubed_002dscale_002ddeployment"> ¶</a></span></dt>
<dd><p>Scale a Kubernetes deployment.
</p></dd></dl><p><code>kubed-scale-deployment</code> is bound to <kbd>$</kbd> in the
<code>kubed-deployment-prefix-map</code>, so if you have
<code>kubed-prefix-map</code> bound to <kbd>C-c k</kbd> then you can invoke it
with <kbd>C-c k d $</kbd>. See <a href="#Definition-of-kubed_002dprefix_002dmap">Definition of kubed-prefix-map</a>. This
command prompts you for a deployment and then lets you select a new
number of replicas for that deployment. By default you are prompted
for deployment in the local context and namespace (see <a href="#Context-and-Namespace">Context and Namespace</a>); with a prefix argument, you can specify a different
namespace; with a double prefix argument (<kbd>C-u C-u</kbd>), you can
specify a different context too.
</p>
<p>In the deployments list buffer, you can scale the deployment at point
by simply typing <kbd>$</kbd>. See <a href="#Browse-Resources">Browse Resources</a>.
</p>
<div>
<p><img src="https://eshelyaron.com/assets/kubed-scale-deployments.png" alt="Help transient menu in Kubed deployments list buffer"/></p><p>Scale deployments with <kbd>$</kbd> in the deployments list buffer</p></div>
<p>Lastly, you can scale deployments using the transient menu
<code>kubed-transient-scale-deployment</code>, which is available from the
main Kubed transient by pressing <kbd>$</kbd>. See <a href="#Transient-Menus">Transient Menus</a>.
</p>
<hr/></div>
</div><div id="Extending-Kubed">

<h2 id="Extending-Kubed-1"><span>4 Extending Kubed<a href="#Extending-Kubed-1"> ¶</a></span></h2>
<p>Kubed has built-in support for many common types of Kubernetes
resources. “Support” for a resource type in Kubed just means
providing common commands for working with resources of that type,
such as a command for showing the interactive list of these resources,
like <code>kubed-list-pods</code> for Kubernetes pods. In Kubed, the macro
<code>kubed-define-resource</code> is used to define these common commands
and add support for more resource types:
</p>
<dl><dt id="index-kubed_002ddefine_002dresource"><span>Macro: </span><span><strong>kubed-define-resource</strong> <var>resource &amp;optional properties &amp;rest [ keyword argument ]… commands</var><a href="#index-kubed_002ddefine_002dresource"> ¶</a></span></dt>
<dd><p>Define commands for <var>resource</var>.
</p></dd></dl><p>Say you want to add support for your Kubernetes service accounts.
With <code>kubed-define-resource</code>, all you need to do is to add the
following line to your Emacs initialization file:
</p>
<div>
<pre><span>(</span><span>kubed-define-resource</span> <span>serviceaccount</span><span>)</span>
</pre></div>
<p>This line defines the following commands for you:
</p>
<ul><li><code>kubed-display-serviceaccount</code>
</li><li><code>kubed-list-serviceaccounts</code>
</li><li><code>kubed-edit-serviceaccount</code>
</li><li><code>kubed-delete-serviceaccount</code>
</li><li><code>kubed-create-serviceaccount</code>
</li><li><code>kubed-explain-serviceaccounts</code>
</li></ul><p>See the documentation string of <code>kubed-define-resource</code>
(<kbd>C-h f</kbd>) for details about the optional arguments of this
macro: the <var>properties</var> argument which lets you specify what Kubed
should show in the resource list buffer and the <code>commands</code> argument
which lets you associate additional commands with your resource type.
</p>
<hr/></div><div id="Contributing">

<h2 id="Contributing-1"><span>5 Contributing<a href="#Contributing-1"> ¶</a></span></h2>
<p>We highly appreciate all contributions, including bug reports,
patches, improvement suggestions, and general feedback!
</p>
<p>The best way to get in touch with the Kubed maintainers is via
<a href="https://lists.sr.ht/~eshel/kubed-devel">the Kubed mailing list</a>.
</p>
<dl><dt id="index-kubed_002dsubmit_002dbug_002dreport"><span>Command: </span><span><strong>kubed-submit-bug-report</strong><a href="#index-kubed_002dsubmit_002dbug_002dreport"> ¶</a></span></dt>
<dd><p>Report a bug in Kubed to the maintainers via mail.
</p></dd></dl><p>You can use the command <kbd>M-x kubed-submit-bug-report</kbd> to easily
contact the Kubed maintainers from within Emacs. This command opens a
new buffer with a message template ready to be sent to the development
mailing list.
</p>
<hr/></div></div>
  </body>
</html>
