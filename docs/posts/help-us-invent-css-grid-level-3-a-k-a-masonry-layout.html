<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://webkit.org/blog/15269/help-us-invent-masonry-layouts-for-css-grid-level-3/">Original</a>
    <h1>Help us invent CSS Grid Level 3, a.k.a. &#34;Masonry&#34; layout</h1>
    
    <div id="readability-page-1" class="page"><div>
                <menu><menuitem><h6><label for="table-of-contents-toggle">Contents</label></h6><ul><li><a href="#what-is-masonry-layout">What is masonry layout?</a></li><li><a href="#inventing-masonry">Inventing masonry</a></li><li><a href="#four-demos">Four demos</a></li><li><a href="#creating-a-classic-masonry-waterfall-layout">Creating a classic masonry / waterfall layout</a></li><li><a href="#leveraging-grid%e2%80%99s-full-power-to-define-columns">Leveraging Grid’s full power to define columns</a></li><li><a href="#leveraging-grid%e2%80%99s-ability-to-let-content-span-columns">Leveraging Grid’s ability to let content span columns</a></li><li><a href="#columnar-vs-modular-grids">Columnar vs. Modular Grids</a></li><li><a href="#using-subgrid-and-explicit-placement">Using subgrid and explicit placement</a></li><li><a href="#the-debate">The Debate</a></li><li><a href="#what-is-a-grid">What is a grid?</a></li><li><a href="#we-want-to-hear-from-you">We want to hear from you</a></li><li><a href="#p-s-about-the-name%e2%80%a6">P.S. About the name…</a></li></ul></menuitem></menu>                
                <p>If you’ve been making websites for years, you know how frustrating it was to lay out a web page with CSS floats. Managing sizes and placement was tedious and time consuming. Being creative was often impossible. <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Basic_concepts_of_grid_layout">CSS Grid</a> greatly eased that pain with Grid Level 1 in <a href="https://caniuse.com/css-grid">2017</a>, and <a href="https://caniuse.com/css-subgrid">now</a> with Grid Level 2, aka <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Subgrid">Subgrid</a>. But even with the powerful CSS of today, not every layout imaged by designers is possible. In fact, when CSS Grid shipped, one of the most commonly asked questions was: “how do I write CSS to accomplish a masonry layout?” Sadly, for the last seven years the answer has been — you can’t.</p>
<h2><a name="what-is-masonry-layout"></a>What is masonry layout?</h2>
<p>What do we mean by the term “masonry layout”? Basically it’s the pattern seen in the following image — where content packs together like a brick or stone wall. That’s where it gets the name “masonry”. It’s also frequently called “<a href="https://github.com/topics/waterfall-layout">waterfall layout</a>”, as a metaphor for how content flows down the page like a waterfall.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image1-masonry-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image1-masonry-light.png" alt="Two dozen photos of different aspect ratios laid out using a &#34;masonry&#34; pattern"/></picture></figure>
<p>This layout is popular because it solves a few problems that other layouts do not.</p>
<ol>
<li>It allows for content of different aspect ratios, and avoids the need to crop or truncate content in order to turn everything into uniform rectangles.</li>
<li>It distributes content across the page (instead of flowing down each column, one by one). This follows the natural reading order as you scroll the page. And it lets the website lazy-load additional content at the bottom without moving existing content around.</li>
</ol>
<p>This layout creates uniformly-sized columns, without any rows. It’s quite possible that because this layout has required JavaScript, anything more creative or complex has been too hard to pull off — and we’ve been left with an expectation that masonry layout should only ever be a simple pattern with uniformly-sized columns. Let’s see what’s possible if we build it into CSS instead.</p>
<h2><a name="inventing-masonry"></a>Inventing masonry</h2>
<p>A mechanism in CSS for “masonry layout” was first proposed by Mozilla in January 2020 as an extension of CSS Grid, and <a href="https://caniuse.com/mdn-css_properties_grid-template-rows_masonry">implemented</a> as an experiment behind a flag in Firefox Nightly. In 2022, Apple started implementing this <a href="https://drafts.csswg.org/css-grid-3/">CSS Grid Level 3</a> proposal in Safari Technology Preview (where it’s currently on by default), and we’ve been helping to move the web standard along to reach maturity.</p>
<p>However, there are big questions still being asked about how CSS should handle masonry-style layouts. Some people remain skeptical that this capability should be part of CSS Grid, and want it to instead be its own separate <code>display</code> type. Others are questioning whether or not this kind of layout is needed on the web at all — they aren’t sure that well-known websites will use it. With such fundamental disagreements at play, no browser can ship. We must first come to consensus in the CSS Working Group.</p>
<p>This is where we need your help. We’d like real-world web designers and developers to weigh into the discussion, and express what it is that you want. Your input really can make a difference.</p>
<p>In this article, we’ll walk through how the CSS Grid Level 3 proposal works, and how you can use its new capabilities. We’ll show you why we believe these features should be part of CSS Grid, and explain what the alternative would be if the CSS Working Group creates <code>display: masonry</code> instead. And then, we’ll ask you to join the debate to help move us forward. Please do read to the end.</p>
<h2><a name="four-demos"></a>Four demos</h2>
<p>To show why we at Apple believe this capability should be part of CSS Grid, we created four demonstrations. If you’d like, try them yourself at <a href="https://webkit.org/demos/grid3/">webkit.org/demos/grid3</a>. View these demos in a <a href="https://caniuse.com/mdn-css_properties_grid-template-rows_masonry">browser that supports Grid Level 3</a> — currently <a href="https://developer.apple.com/safari/technology-preview/">Safari Technology Preview</a> or Firefox after you’ve turned on <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Experimental_features#masonry_grid_layout">the feature flag</a>.</p>
<p>Note there’s a control panel for each demo, with the relevant layout code printed to the page. Turn on “Number items” to see the relationship between the HTML order of content and the layout placement of that content.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image4-controlsalternate-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image4-controlsalternate-light.png" alt="Screenshot showing the controls of the demo — here with the numbers turned on"/></picture></figure>
<p>Each demo has a multitude of variations. Switch between variations from the dropdown menu, which changes only the CSS. The HTML stays the same.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image3-controlsnumbering-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image3-controlsnumbering-light.png" alt="Screenshot showing the controls of the demo — here with the dropdown of various alternative layouts showing"/></picture></figure>
<h2><a name="creating-a-classic-masonry-waterfall-layout"></a>Creating a classic masonry / waterfall layout</h2>
<p>First, let’s take a look at how to build a classic masonry/waterfall layout. In this gallery of photos, each image is wrapped with a <code>figure</code> element, and the figures are direct children of a <code>main</code> element.</p>
<pre><code><span>&lt;<span>main</span>&gt;</span>
  <span>&lt;<span>figure</span>&gt;</span><span>&lt;<span>img</span> <span>src</span>=<span>&#34;photo-1.jpg&#34;</span>&gt;</span><span>&lt;/<span>figure</span>&gt;</span>
  <span>&lt;<span>figure</span>&gt;</span><span>&lt;<span>img</span> <span>src</span>=<span>&#34;photo-2.jpg&#34;</span>&gt;</span><span>&lt;/<span>figure</span>&gt;</span>
  <span>&lt;<span>figure</span>&gt;</span><span>&lt;<span>img</span> <span>src</span>=<span>&#34;photo-3.jpg&#34;</span>&gt;</span><span>&lt;/<span>figure</span>&gt;</span>
<span>&lt;/<span>main</span>&gt;</span>
</code></pre>
<p>We start by applying <code>display: grid</code> to the main element to create the Grid container. Then we can define <code>grid-template-columns</code> however we’d like.</p>
<p>In this case, let’s use <code>grid-template-columns: repeat(auto-fill, minmax(14rem, 1fr))</code> to ask the browser to repeat a looped definition to create a set of flexible columns that are each of a minimum of 14rem. This results in uniformly-sized columns, typical of the classic masonry/waterfall layout. The <code>gap: 1rem;</code> rule creates a 1rem-wide space between the items — both between the columns, and horizontally between items.</p>
<p>And then, we’ll define the “rows” with the <code>masonry</code> value. (It’s likely the name of this value will change before this ships in browsers — more on that at the end of this article. For now, <code>masonry</code> is what works.)</p>
<pre><code><span>main</span> { 
  <span>display</span>: <span>grid</span>;
  <span>grid-template-columns</span>: <span>repeat</span>(<span>auto-fill</span>, <span>minmax</span>(<span>14</span><span>rem</span>, <span>1</span><span>fr</span>));
  <span>gap</span>: <span>1</span><span>rem</span>;
  <span>grid-template-rows</span>: <span>masonry</span>;
}
</code></pre>
<p>The <code>grid-template-rows: masonry</code> rule tells the browser: “Please do <em>not</em> create rows. Instead pack the content into a masonry/waterfall-like pattern.”</p>
<p>That’s it! In four lines of CSS, with zero media queries or container queries, we’ve created a flexible layout that works on screens of all sizes. And there’s no need to crop content to force everything into same-sized boxes.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image4-masonrywider-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image4-masonrywider-light.png" alt="masonry layout of photos"/></picture></figure>
<p>In graphic design, a layout that has uniformly-sized columns and no rows is often called a “symmetrical columnar grid”. For centuries, columnar grids were the dominant type of grid used in page design.</p>
<h2><a name="leveraging-grid%e2%80%99s-full-power-to-define-columns"></a>Leveraging Grid’s full power to define columns</h2>
<p>Now let’s dive into the advantages of combining the full power of CSS Grid with masonry/waterfall packing. CSS Grid provides many options for defining grid our columns. Using <code>fr</code> units to create a symmetrical grid is only one option of many.</p>
<p>How could these possibilities be used for a masonry/waterfall-style layout? Let’s try mixing fixed-sized columns with flexible columns. We could make the first and last column fixed-sized, while the middle columns are flexible, changing in both size and number.</p>
<figure><video controls="" width="1920" height="1018"><source src="https://webkit.org/wp-content/uploads/video1-firstlastsmaller-dark.m4v" type="video/mp4" media="(prefers-color-scheme: dark)"/><source src="https://webkit.org/wp-content/uploads/video1-firstlastsmaller-light.m4v" type="video/mp4"/></video></figure>
<p>Specifically, the first and last columns are exactly 14 characters wide, while the middle columns are flexible (at least 28 characters wide) and change in number to fill the available space.</p>
<pre><code><span>main</span> { 
  <span>display</span>: <span>grid</span>;
  <span>grid-template-columns</span>: <span>14</span><span>ch</span> <span>repeat</span>(<span>auto-fill</span>, <span>minmax</span>(<span>28</span><span>ch</span>, <span>1</span><span>fr</span>)) <span>14</span><span>ch</span>;
  <span>grid-template-rows</span>: <span>masonry</span>;
  <span>gap</span>: <span>1</span><span>rem</span>;
}
</code></pre>
<p>This is just one of many, many possibilities.</p>
<p>CSS Grid allows for a lot of creativity with its options for defining grid tracks:</p>
<ul>
<li>fixed sizes defined in any unit (px, em, rem, cqi, lh, ch, ic, cap, vw, svh, and many <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Values_and_Units#numeric_data_types">more</a>)</li>
<li><code>max-content</code> and <code>min-content</code></li>
<li>the full power of <code>fr</code> units</li>
<li><code>minmax()</code> functions</li>
<li><code>%</code>-sized </li>
<li>auto </li>
</ul>
<p>These options in CSS Grid allow you to create something much more dynamic and flexible in interesting ways. You can create two stages of flexibility, because the <code>fr</code>-unit sized columns grow and shrink in a separate stage from the <code>minmax()</code>-sized columns. The <code>max-content</code> and  <code>min-content</code> values let you size the columns based on the content size, rather than sizing the content based on the column size. The <code>fr</code> units can easily be used to create compound or asymmetrical grids, where the columns are different sizes. The options are endless.</p>
<p>By adding the ability to pack content in a masonry/waterfall pattern to CSS Grid, we maintain the full power of Grid for defining our columns in whichever manner we like.</p>
<p>For example, let’s use <code>grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr) minmax(16rem, 2fr)) minmax(8rem, 1fr)</code> to create a pattern of alternating narrow and wider columns, where all the columns are flexible. More columns are added when there’s space. And there’s always an odd number of columns, ending with a narrow one.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image5-alternatingmontage-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image5-alternatingmontage-light.png" alt="three web browser windows next to each other, showing how the layout adjusts for narrow, medium and wider windows"/></picture></figure>
<p>Even when we define columns using only the simple <code>fr</code> unit, the full power provided in CSS Grid means different columns can be set to different sizes. For fun, let’s use <code>fr</code> units to define a set of columns sized to inject the vibes of the <a href="https://en.wikipedia.org/wiki/Golden_ratio">golden ratio</a> by using the <a href="https://en.wikipedia.org/wiki/Fibonacci_sequence">Fibonacci sequence</a> in <code>grid-template-columns: 1fr 1fr 2fr 3fr 5fr 8fr;</code></p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image6-fibonacci-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image6-fibonacci-light.png" alt="layout of photos where the columns on the left are very narrow, getting bigger and bigger as them move to the right, in a fibonacci sequence"/></picture></figure>
<p>In a more practical example, let’s use <code>max-content</code> when defining our columns. Content-based sizing is an incredibly power feature of CSS Grid. This demo of a mega menu layout uses <code>grid-template-columns: repeat(auto-fill, minmax(max-content, 30ch));</code> to ensure that every column is big enough to fit every link without wrapping text.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image7-megamenu-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image7-megamenu-light.png" alt="a menu with a ton of links, like in a website footer, laid out with Grid Level 3"/></picture></figure>
<p>Mega menus have been hard to code, especially across multiple screen sizes. With CSS Grid Level 3, it becomes incredibly easy. A few lines of code creates a dynamic layout which adds and removes columns one at a time as space allows — without any media/container queries, and with wrapping prevention.</p>
<p>Many of these examples could never be created with masonry as a separate display type. The discussion of <code>display: masonry</code> is to only allow symmetrical columns (columns that are the same size as each other), much like multicolumn layout does today.</p>
<h2><a name="leveraging-grid%e2%80%99s-ability-to-let-content-span-columns"></a>Leveraging Grid’s ability to let content span columns</h2>
<p>CSS Grid also lets us span items across multiple columns. Let’s use that capability to see what interesting options might emerge. How about making every 5th image span two grid columns, while the rest of the images are span one column.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image8-5thwider-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image8-5thwider-light.png" alt="same photo layout, now with random photos being bigger"/></picture></figure>
<p>What if instead, we put a <code>wider</code> class on specifically on images that have a wider aspect-ratio, to make those images span multiple columns. We can also change the styling a bit, making the corners square instead of round, and reducing the grid gap to zero. This gives us a different way to pack photos of different aspect ratios together.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image9-wideriswider-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image9-wideriswider-light.png" alt="another layout of image, this time where wider images are wider"/></picture></figure>
<p>We also experimented with combining the classic masonry/waterfall layout of photos with View Transitions. When a user  clicks/taps on any photo, it grows to span multiple columns. The browser automagically animates the transition. (This demo requires Safari Technology Preview 192 or later.)</p>
<figure><video controls="" width="1488" height="1080"><source src="https://webkit.org/wp-content/uploads/video2-viewtransitions-dark.m4v" type="video/mp4" media="(prefers-color-scheme: dark)"/><source src="https://webkit.org/wp-content/uploads/video2-viewtransitions-light.m4v" type="video/mp4"/></video></figure>
<p>These variations of the Photos and Mega Menu demos are just a small taste of all of the many possibilities you get when leveraging the full power of CSS Grid in the column direction, while simultaneously turning off rows.</p>
<h2><a name="columnar-vs-modular-grids"></a>Columnar vs. Modular Grids</h2>
<p>What happens when we keep experimenting? Let’s let go of thinking about “masonry”, and start imagining Grid Level 3 purely as an expansion of Grid. At its core, CSS Grid Level 3 provides a mechanism for turning off rows. It lets us create a <strong>columnar grid</strong> — a grid that’s made up of columns alone.</p>
<p>By contrast, a <strong>modular grid</strong> is a grid where everything is lined up in both columns and rows. They became popular in the 20th century during the dominance of modernism in graphic design. CSS Grid Level 1 is really good at making modular grids… that’s what it wants to do. In fact, float-based layouts also encouraged the creation of modular grids on the web, since you had to make all your content the same height to get your floats to clear. Images need to be the same aspect ratio. Text has to be the same length. This is often accomplished on the back-end with policies enforced by the content management system, or on the front-end by CSS that truncates/crops the content.</p>
<p>It’s incredible common for websites to do some variation of this sort of modular grid, laid out here with CSS Grid Level 1.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image10-textgrid1-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image10-textgrid1-light.png" alt="layout of text, in ridged sets of boxes, row after row, all the same height"/></picture></figure>
<p>Of course, this example is overly simplistic. The article ledes look bare with no teaser images. The uniformity is so strict and formal, the design lacks life. Real websites find other ways to breathe life back into the design.</p>
<p>But what if the layout itself could also provide some vitality and interest? What will happen if we use CSS Grid to create a columnar grid as easily as it creates a modular grid? What if we don’t truncate content, and instead let it be the size that it wants to be — and get the layout to work for the content, rather than forcing the content to work for the layout?</p>
<p>A classic masonry/waterfall layout with various lengths of text looks like this, which is already more engaging since a user can read more about each article:</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image11-textmasonry-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image11-textmasonry-light.png" alt="same article teaser text, this time laid out in columns set with masonry"/></picture></figure>
<p>Although, that’s still a bit visually repetitive. Symmetrical columnar grids often are. We need the rest of the power of CSS Grid to do something more interesting. Let’s make the latest article much bigger, and have it span four columns. A handful of other recent articles can be medium-sized and span two columns. While the older content is smaller, spanning one column.</p>
<figure><picture><source srcset="https://webkit.org/wp-content/uploads/image12-textgrid3-dark.png" media="(prefers-color-scheme: dark)"/><img decoding="async" src="https://webkit.org/wp-content/uploads/image12-textgrid3-light.png" alt="same text, this time laid out with much more dynamic use of &#39;masonry-style layout plus spanning columns"/></picture></figure>
<p>Now this otherwise visually boring text is starting to look fairly lively. If we were to add images to each of these articles, it would be it even more dynamic.</p>
<p>Let’s experiment with mixing images and text together on a webpage for a museum. The first grid item is a header that introduces the museum, and provides navigation to other resources. The rest of the content consists of pieces of artwork and their information: title, artist, year, medium, catalog number and location.</p>
<p>Because the paintings are gorgeous, the content looks pretty great in a classic masonry/waterfall layout.</p>
<figure><img decoding="async" src="https://webkit.org/wp-content/uploads/image13-museummasonry.png" alt="layout of cards, each with a painting and text"/></figure>
<p>Let’s see what else we can do by utilizing two more powerful features of CSS Grid — subgrid and explicit placement.</p>
<h2><a name="using-subgrid-and-explicit-placement"></a>Using subgrid and explicit placement</h2>
<p>The functionality provided by <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Subgrid">subgrid</a> in CSS Grid Level 2 is incredible, and it’s <a href="https://caniuse.com/css-subgrid">finally supported</a> in most browsers.</p>
<p>Instead of listing the painting’s metadata in a single left-aligned column, let’s see how we might better use the available space. By using <code>subgrid</code>, we can put the year and catalog number on the right of each card — and line up this data for one painting with the same data for the other paintings.</p>
<figure><img decoding="async" src="https://webkit.org/wp-content/uploads/image14-museumsubgridintooling.png" alt="close-up of this layout, with the Grid Inspector showing, with lines marking columns showing how subgrid works"/></figure>
<p>By adding this new functionality to CSS Grid Level 3, we get the benefit of existing developer tools. You can use the Grid Inspector in Safari Technology Preview today as you try out <code>grid-template-rows: masonry</code>.</p>
<p>If masonry is its own display type, and not part of CSS Grid, it will not get the benefit of subgrid.</p>
<p>We can also use the power of CSS Grid Level 1 to explicitly place the header into the last two columns, moving it to the top right corner of the page with <code>grid-column: -3 / -1</code>.</p>
<figure><video controls="" width="1670" height="1080"><source src="https://webkit.org/wp-content/uploads/video3-museum-dark.m4v" type="video/mp4" media="(prefers-color-scheme: dark)"/><source src="https://webkit.org/wp-content/uploads/video3-museum-light.m4v"/></video></figure>
<p>In just a few lines of layout code, we are using the full power of CSS Grid Levels 1, 2, and 3 to create flexible columns that change in number to accommodate the available size — without using any media queries or container queries.</p>
<p>Hopefully you can see the advantages of fully combining a mechanism for masonry/waterfall layouts with CSS Grid — providing many more creative possibilities than masonry alone.</p>
<h2><a name="the-debate"></a>The Debate</h2>
<p>So let’s get into the debate that’s been blocking the CSS Working Group from moving forward. Our hope is that web designers and developers chime in (post to social media, write blog posts) with your thoughts about which direction CSS should take.</p>
<p>Some people, including those of us at Apple, like having “Masonry” be part of CSS Grid. We believe this functionality is a mechanism to expand CSS Grid — allowing it to finally create columnar grids as well as modular grids. And we want this functionality to be mixed with all the other features of Grid, including the powerful options for defining a columns, track spanning, explicit placement, and subgrid.</p>
<p>Other people instead believe Masonry should be its own separate display type. At first glance, defining Masonry with a new display type might make a lot of sense. You do get a tidy separation between layout types.</p>
<pre><code><span>display</span>: <span>block</span>;
<span>display</span>: <span>inline</span>;
<span>display</span>: <span>flexbox</span>;
<span>display</span>: <span>grid</span>;
<span>display</span>: <span>masonry</span>;
</code></pre>
<p>The CSS Working Group has not discussed how the syntax for a separate Masonry display type would work, but perhaps it would be patterned after <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_multicol_layout">Multicolumn layout</a>.</p>
<pre><code><span>main</span> { 
  <span>display</span>: <span>masonry</span>;
  <span>columns</span>: <span>28</span><span>ch</span>;
}
</code></pre>
<p>Or perhaps the syntax would be patterned after Grid, <em>but with significant limitations</em>:</p>
<pre><code><span>main</span> {
  <span>display</span>: <span>masonry</span>;
  <span>masonry-columns</span>: <span>repeat</span>(<span>5</span>, <span>minmax</span>(<span>28</span><span>ch</span>, <span>1</span><span>fr</span>)); 
                   
}
</code></pre>
<p>Either way, it’s clear that advocates of this option want Masonry to be limited to a symmetrical grid — where all the columns are the same size as each other. None of the rest of CSS Grid’s track sizing capabilities would be allowed.</p>
<p>Making masonry a simple and separate layout type would avoid the work necessary to keep Grid and Masonry working together in combination — both now and in the long term. Doing this would simplify the layout model, make it easier to implement in browsers, reduce the potential for performance traps, and allow the feature sets of Grid and Masonry to diverge.</p>
<p>Conversely, we believe the effort needed to add this capability to CSS Grid is worth the many benefits to be had. The <a href="https://drafts.csswg.org/css-grid-3/">CSS Grid Level 3 specification</a> has already been written, and implemented in <a href="https://caniuse.com/mdn-css_properties_grid-template-rows_masonry">two browser engines</a>. And yes, while making CSS Grid more complex will make it harder to extend in the future, we believe there’s an advantage to having these two types of grid layouts intertwined. This way the CSS Working Group will always define all new additions for both modular and columnar grids. There won’t be something added to <code>display: grid</code> that will be left out of <code>display: masonry</code>, or vice versa. For example, many developers want CSS Grid Level 4 to provide a mechanism for styling grid areas and grid lines — perhaps a way to add a background color to a track, or create a rule line in a gap. It’d be great to ensure that will work for both modular and columnar grids from Day 1.</p>
<p>Another argument made by advocates of <code>display: masonry</code> is that that masonry is conceptually a fundamentally different layout type from CSS Grid, and therefore should have its own display type. They often describe CSS Grid as inherently being about “lining things up in two-dimensions”, and since masonry only lines things up in one dimension, “it’s not a grid”. (In fact, some have advocated that Masonry is more like Flexbox, since “both line things up in one direction”.)</p>
<p>In many ways, your perspective on this question might depends on what you imagine a grid is.</p>
<h2><a name="what-is-a-grid"></a>What is a grid?</h2>
<p>Grids are an incredibly important aspect of graphic design. Grids are used to line up text, images and other content in a regular pattern. They help readability and usability by making things predictable.</p>
<p>You can trace their use through thousands of years of history.</p>
<figure><img fetchpriority="high" decoding="async" src="https://webkit.org/wp-content/uploads/image15-historicalcolumnarlayouts.jpg" alt="two photos of book pages, showing historic columnar layouts from long ago" width="1500" height="765" srcset="https://webkit.org/wp-content/uploads/image15-historicalcolumnarlayouts.jpg 1500w, https://webkit.org/wp-content/uploads/image15-historicalcolumnarlayouts-300x153.jpg 300w, https://webkit.org/wp-content/uploads/image15-historicalcolumnarlayouts-1024x522.jpg 1024w, https://webkit.org/wp-content/uploads/image15-historicalcolumnarlayouts-768x392.jpg 768w" sizes="(max-width: 1500px) 100vw, 1500px"/><figcaption>[Left] Antoine Vérard published a French translation of Boccaccio in 1498. Seen in <i>Thirty Centuries of Graphic Design</i>, by James Craig and Bruce Barton, 1987. [Right] A Russian illustrated sheet proclaiming that ‘Hops are head above all other fruit’. Seen in <i>Books: A Living History</i> by Martyn Lyons, 2011.</figcaption></figure>
<p>It wasn’t until the 20th century that European and American modernists started promoting the idea that “proper” graphic design grids should line content up in both directions — in rows as well as columns.</p>
<figure><img decoding="async" src="https://webkit.org/wp-content/uploads/image16-vignelligrids.jpg" alt="spread from a book, showing two different newspaper home pages, where articles line up in a modular grid — in both row and column directions" width="1500" height="1125" srcset="https://webkit.org/wp-content/uploads/image16-vignelligrids.jpg 1500w, https://webkit.org/wp-content/uploads/image16-vignelligrids-300x225.jpg 300w, https://webkit.org/wp-content/uploads/image16-vignelligrids-1024x768.jpg 1024w, https://webkit.org/wp-content/uploads/image16-vignelligrids-768x576.jpg 768w" sizes="(max-width: 1500px) 100vw, 1500px"/><figcaption>Massimo Vignelli is especially well-known for promoting the idea that lining things up in both columns and rows is a superior practice of graphic design. Two examples from <i>The Vignelli Canon</i>, 2010.</figcaption></figure>
<p>Even today, there is a lot of debate about which type of grid is the best grid or the only legitimate grid. Many designers claim a 12 column grid is the only correct way to design a web page — or 12 columns for “desktop”, 8 columns for “tablet”, and 4 columns for “phones”. At times designers have gotten quite religious about their ideas of what a “proper grid” looks like.</p>
<p><a href="https://markboulton.co.uk/journal/five-simple-steps-to-designing-grid-systems-part-1/">Mark Boulton</a> argued for years that symmetrical columnar grids are incredibly formulaic and boring. He promoted the use of asymmetrical compound grids in design for the web. Today, luckily CSS Grid Level 1 makes it incredibly easy to create both asymmetrical grids and compound grids, giving designers the freedom to create what they want. But only if they also want all their grids to be a modular grids.</p>
<p>Both modular and columnar grids are in fact grids. And CSS Grid deserves the ability to also create columnar grids.</p>
<figure><img decoding="async" src="https://webkit.org/wp-content/uploads/image17-optionscolumnargrids.jpg" alt="photograph of an open book, showing many many hand-drawn diagrams of how different layouts can use different numbers of columns " width="1500" height="1125" srcset="https://webkit.org/wp-content/uploads/image17-optionscolumnargrids.jpg 1500w, https://webkit.org/wp-content/uploads/image17-optionscolumnargrids-300x225.jpg 300w, https://webkit.org/wp-content/uploads/image17-optionscolumnargrids-1024x768.jpg 1024w, https://webkit.org/wp-content/uploads/image17-optionscolumnargrids-768x576.jpg 768w" sizes="(max-width: 1500px) 100vw, 1500px"/><figcaption>Ideas for designing columnar grids, in <i>Editing by Design,</i> by Jan V. White.</figcaption></figure>
<p>We believe there’s an opportunity for CSS to enable a rich history of design grids to come to the web — and would be greatly disappointed to see the new masonry feature limited to only allowing symmetrical columnar grids.</p>
<p>But what do you think?</p>
<h2><a name="we-want-to-hear-from-you"></a>We want to hear from you</h2>
<p>This is where you come in. Try some demos of your own. Write about your thoughts on your own blog. <a href="https://github.com/w3c/csswg-drafts/issues/10233">Comment at the CSS Working Group in this issue</a>.</p>
<ul>
<li>Should “masonry”/“waterfall” be part of CSS Grid?</li>
<li>Do you want the capabilities to define a columnar grid with CSS Grid — to use subgrid, spanning, explicit placement, and all the many options for track sizing? Or do you only want the ability to define a classic masonry layout with equal-sized columns?</li>
<li>Will you use this? What might you create with it?</li>
<li>Do you have links to demos you’ve made?  We want to see your ideas and use cases.</li>
<li>Are there things you want to do that you can’t do with this model?</li>
</ul>
<p>Often, thinking about something theoretically and actually seeing it in use can be very different. To make sure the CSSWG gets the design of this feature correct, we need developers to gain some hands-on experience, and articulate your thoughts about what it’s like.</p>
<p>The WebKit team has been working on Masonry for a year and a half. It was first enabled by default in <a href="https://webkit.org/blog/13839/release-notes-for-safari-technology-preview-163/">Safari Technology Preview 163</a> in February 2023. There’s a bit more polish needed, and details to work out (naming being one). But we would like to ship this feature soon. To do so, these fundamental questions need to be resolved.</p>
<p>Thank you for your help!</p>
<h2><a name="p-s-about-the-name%e2%80%a6"></a>P.S. About the name…</h2>
<p>It’s likely <code>masonry</code> is not the best name for this new value. Names in CSS are usually simple words that directly describe the result they create — like <code>center</code>, <code>under</code>, <code>contain</code>, <code>clip</code>, <code>revert</code>, <code>ltr</code>, <code>always</code>, <code>break-word</code>, <code>hidden</code>, <code>allow-end</code>, <code>scale-down</code>, <code>wrap</code>, <code>smooth</code>.</p>
<p>The word “masonry” is more of a metaphor, where the meaning has to be explained with a backstory. Such a term is harder to remember for developers who do not speak English. And arguably, the syntax could just as easily be <code>grid-template-rows: waterfall</code> instead, since that’s the dominant word for this layout used in certain regions, not masonry.</p>
<p>Plus, once you start to write a lot of code using this feature, it’s likely you’ll come to the realization that we did — this really isn’t about the layout used by Pinterest or other similar sites. This is a mechanism for telling the browser, “please create a grid, but <em>without any rows.</em>”</p>
<p>Perhaps the best syntax could be <code>grid-template-rows: none;</code> to convey “please do not give me any rows”. Sadly, it’s too late to use this name, because <code>none</code> is the default value for <code>grid-template-*</code> and means “please give me only implicit rows, no explicit ones”.</p>
<p>Instead we could use the name <code>off</code> to convey “please turn off the grid in the row direction, and give me only columns”.</p>
<pre><code><span>main</span> { 
  <span>display</span>: <span>grid</span>;
  <span>grid-template-columns</span>: <span>repeat</span>(<span>auto-fill</span>, <span>minmax</span>(<span>14</span><span>rem</span>, <span>1</span><span>fr</span>));
  <span>grid-template-rows</span>: <span>off</span>; 
}
</code></pre>
<p>The CSSWG is debating this name in <a href="https://github.com/w3c/csswg-drafts/issues/9733">this issue</a>. If you have ideas or preferences for a name, please join that discussion.</p>
<p>Meanwhile, <code>masonry</code> is the value that is currently implemented in Safari Technology Preview, since that’s what the Editor’s Draft currently uses. And so that’s what we used in our demos above, and what you should use in yours. But do expect the name of this value to change in the future. And perhaps prepare for a future where we call this “columnar grid” or “Grid Level 3” instead of “Masonry”.</p>

                            </div></div>
  </body>
</html>
