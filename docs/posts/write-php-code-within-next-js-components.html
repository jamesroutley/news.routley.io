<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/bufferhead-code/nextjs-use-php">Original</a>
    <h1>Write PHP Code Within Next.js Components</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" id="user-content-nextjs-use-php" dir="auto"><a href="#nextjs-use-php">Next.js <code>use php</code><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Use PHP right inside of your Next.js project.
Just like <code>use server</code> (not really).</p>
<p dir="auto"><strong>You can watch how i made it <a href="http://www.youtube.com/watch?v=EGOkjmyfL6E" rel="nofollow">here</a></strong></p>
<p dir="auto"><a href="http://www.youtube.com/watch?v=EGOkjmyfL6E" title="Write PHP in Next.js/React Components" rel="nofollow"><img src="https://camo.githubusercontent.com/1cbcecfc7bc69a607317db82768346d243b4295cd5d3f0a71f39166ebd11c0df/687474703a2f2f696d672e796f75747562652e636f6d2f76692f45474f6b6a6d79664c36452f302e6a7067" alt="Youtube Video about how this project was made" data-canonical-src="http://img.youtube.com/vi/EGOkjmyfL6E/0.jpg"/></a></p>
<p dir="auto">You can use it in React Server Components just like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="return (
    &lt;button
        formAction={async () =&gt; {
            &#39;use php&#39;
            (new PDO(&#39;mysql:host=localhost:3306;dbname=public&#39;, &#39;root&#39;, &#39;root&#39;))
                -&gt;prepare(&#34;INSERT INTO Bookmarks (slug) VALUES (?)&#34;)
                -&gt;execute(array(&#39;new&#39;));
            }}&gt;
        Insert Bookmark
    &lt;/button&gt;
)"><pre><span>return</span> <span>(</span>
    <span>&lt;</span><span>button</span>
        <span>formAction</span><span>=</span><span>{</span><span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
            <span>&#39;use php&#39;</span>
            <span>(</span><span>new</span> <span>PDO</span><span>(</span><span>&#39;mysql:host=localhost:3306;dbname=public&#39;</span><span>,</span> <span>&#39;root&#39;</span><span>,</span> <span>&#39;root&#39;</span><span>)</span><span>)</span>
                <span>-</span><span>&gt;</span><span>prepare</span><span>(</span><span>&#34;INSERT INTO Bookmarks (slug) VALUES (?)&#34;</span><span>)</span>
                <span>-</span><span>&gt;</span><span>execute</span><span>(</span><span>array</span><span>(</span><span>&#39;new&#39;</span><span>)</span><span>)</span><span>;</span>
            <span>}</span><span>}</span><span>&gt;</span>
        Insert Bookmark
    <span>&lt;</span><span>/</span><span>button</span><span>&gt;</span>
<span>)</span></pre></div>
<p dir="auto">And if you want to it can even work with React Client Components</p>
<div dir="auto" data-snippet-clipboard-copy-content="// actions.js
&#39;use server&#39;

export async function phpHelloWorld() {
    &#39;use php&#39;
    print &#34;Hello from PHP&#34;;
}"><pre><span>// actions.js</span>
<span>&#39;use server&#39;</span>

<span>export</span> <span>async</span> <span>function</span> <span>phpHelloWorld</span><span>(</span><span>)</span> <span>{</span>
    <span>&#39;use php&#39;</span>
    <span>print</span><span></span> <span>&#34;Hello from PHP&#34;</span><span>;</span>
<span>}</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="// page.tsx
import {phpHelloWorld} from &#34;../actions&#34;;"><pre><span>// page.tsx</span>
<span>import</span> <span>{</span><span>phpHelloWorld</span><span>}</span> <span>from</span> <span>&#34;../actions&#34;</span><span>;</span></pre></div>
<p dir="auto">Yes this actually works. Trust me I wish it wouln&#39;t too.</p>
<h2 tabindex="-1" id="user-content-build" dir="auto"><a href="#build">Build<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">You can build the implementation by</p>
<div dir="auto" data-snippet-clipboard-copy-content="npm run build
npm run start"><pre>npm run build
npm run start</pre></div>
<p dir="auto">Open <a href="http://localhost:3000" rel="nofollow">http://localhost:3000</a> with your browser to see the result.</p>
<p dir="auto">If you want to try out the Database Example, you can use the docker-compose file provided in the repository.
after <code>docker-compose up -d</code> you need to create the database and table you want to insert into manually.</p>
<h2 tabindex="-1" id="user-content-roadmap-things-that-should-be-fixed-but-realistically-it-will-never-happen" dir="auto"><a href="#roadmap-things-that-should-be-fixed-but-realistically-it-will-never-happen">Roadmap (Things that should be fixed but realistically it will never happen)<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<ul>
<li> There is a probably a way to fix that nasty preprocess step with <a href="https://swc.rs/docs/plugin/ecmascript/getting-started" rel="nofollow">SWC Plugins</a> which are still in Beta with Next.js and also I think they will switch builder anyways soon so what&#39;s the point really? But hey if anyone wants to do it feel free.</li>
<li> I guess there is some hacky way to make props binding possible.</li>
</ul>
<h2 tabindex="-1" id="user-content-credits" dir="auto"><a href="#credits">Credits<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Check out the original implementations by elnardu for C and Rust:</p>
<ul dir="auto">
<li><a href="https://github.com/elnardu/react-use-c">https://github.com/elnardu/react-use-c</a></li>
<li><a href="https://github.com/elnardu/react-use-rust">https://github.com/elnardu/react-use-rust</a></li>
</ul>
<h2 tabindex="-1" id="user-content-disclaimer" dir="auto"><a href="#disclaimer">Disclaimer<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto"><em>I hope I don&#39;t have to say this but: If you even in the slightest consider to use this in any application at all you are an absolute madman and and should be locked out of the internet for the rest of your life, I hope you find some other fun activity, maybe gardening or woodwork.</em></p>
</article>
          </div></div>
  </body>
</html>
