<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://developer.chrome.com/blog/canvas2d/">Original</a>
    <h1>It&#39;s always been you, Canvas2D</h1>
    
    <div id="readability-page-1" class="page"><div><p>In a world of shaders, meshes, and filters, Canvas2D might not get you excited. But it should! 30-40% of web pages have a <code>&lt;canvas&gt;</code> element and 98% of all canvases use a Canvas2D rendering context. There are Canvas2Ds in cars, on fridges, <a href="https://lithiosapps.com/a-look-under-the-hood-of-spacexs-dragon-capsule/">and in space</a> (really).</p><p>Admittedly, the API is a bit behind the times when it comes to state-of-the-art 2D drawing. Fortunately we&#39;ve been hard at work implementing new features in Canvas2D to catch up to CSS, streamline ergonomics and improve performance.</p><h2 id="part-1-catching-up-with-css" tabindex="-1"><a href="#part-1-catching-up-with-css" aria-hidden="true">#</a> Part 1: catching up with CSS</h2><p>CSS has a few drawing commands that are sorely missing from Canvas2D. With the new API we&#39;ve added a handful of the most requested features:</p><h3 id="round-rect" tabindex="-1"><a href="#round-rect" aria-hidden="true">#</a> Round rect</h3><p>Rounded rectangles: the cornerstone of the internet, of computing, nigh, of civilization.</p><p>In all seriousness, rounded rectangles are extremely useful: as buttons, chat bubbles, thumbnails, speech bubbles, you name it. It&#39;s always been possible to make a rounded rectangle in Canvas2D, it&#39;s just been a bit messy:</p><pre><code>  <span>const</span> canvas <span>=</span> document<span>.</span><span>getElementById</span><span>(</span><span>&#34;canvas&#34;</span><span>)</span><span>;</span></code></pre><p>All this was necessary for a modest, simple rounded rectangle:</p><p><img alt="A rounded rectangle." decoding="async" height="150" loading="lazy" sizes="(min-width: 300px) 300px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/J9JnDFq28BhDGsMyw2zY.png?auto=format&amp;w=600 600w" width="300"/></p><p>With the new API there&#39;s a <code>roundRect()</code> method.</p><pre><code>	ctx<span>.</span><span>roundRect</span><span>(</span>upper<span>,</span> left<span>,</span> width<span>,</span> height<span>,</span> borderRadius<span>)</span><span>;</span></code></pre><p><code>ctx.roundRect()</code> also takes in an array for the <code>borderRadius</code> argument of up to four numbers. These radii control the four corners of the rounded rectangle the same way <a href="https://developer.mozilla.org/docs/Web/CSS/border-radius">as for CSS</a>. For example:</p><pre><code>	ctx<span>.</span><span>roundRect</span><span>(</span><span>10</span><span>,</span> <span>10</span><span>,</span> <span>200</span><span>,</span> <span>100</span><span>,</span> <span>[</span><span>15</span><span>,</span> <span>50</span><span>,</span> <span>30</span><span>]</span><span>)</span></code></pre><p><a href="https://pickle-gorgeous-treatment.glitch.me/">Check out the demo to play around</a>!</p><h3 id="conic-gradient" tabindex="-1"><a href="#conic-gradient" aria-hidden="true">#</a> Conic Gradient</h3><p>You&#39;ve seen linear gradients:</p><pre><code>  <span>const</span> gradient <span>=</span> ctx<span>.</span><span>createLinearGradient</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> <span>200</span><span>,</span> <span>100</span><span>)</span><span>;</span></code></pre><p><img alt="A linear gradient." decoding="async" height="150" loading="lazy" sizes="(min-width: 300px) 300px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/rkG4JDoOC42xn7szSZbL.png?auto=format&amp;w=600 600w" width="300"/></p><p>Radial gradients:</p><pre><code>  <span>const</span> radialGradient <span>=</span> ctx<span>.</span><span>createRadialGradient</span><span>(</span><span>150</span><span>,</span> <span>75</span><span>,</span> <span>10</span><span>,</span> <span>150</span><span>,</span> <span>75</span><span>,</span> <span>70</span><span>)</span><span>;</span></code></pre><p><img alt="A radial gradient." decoding="async" height="150" loading="lazy" sizes="(min-width: 300px) 300px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/NF89ac1lvs6jb2kxTAja.png?auto=format&amp;w=600 600w" width="300"/></p><p>But how about a nice conic gradient?</p><pre><code><span>const</span> grad <span>=</span> ctx<span>.</span><span>createConicGradient</span><span>(</span><span>0</span><span>,</span> <span>100</span><span>,</span> <span>100</span><span>)</span><span>;</span></code></pre><p><img alt="A conic gradient." decoding="async" height="329" loading="lazy" sizes="(min-width: 451px) 451px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=650 650w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=741 741w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=845 845w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/s05ut90JNhvLywJ9Sb9b.png?auto=format&amp;w=902 902w" width="451"/></p><h3 id="text-modifiers" tabindex="-1"><a href="#text-modifiers" aria-hidden="true">#</a> Text modifiers</h3><p>Canvas2Ds text rendering capabilities have been woefully behind. Chrome has added several new attributes to Canvas2D text rendering:</p><ul><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/letter-spacing">letterSpacing</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/word-spacing">wordSpacing</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/font-variant">fontVariant</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/font-kerning">fontKerning</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/font-stretch">fontStretch</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/text-decoration">textDecoration</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/text-underline-position">textUnderlinePosition</a></li><li>ctx.<a href="https://developer.mozilla.org/docs/Web/CSS/text-rendering">textRendering</a></li></ul><p>These attributes all match their CSS counterparts with the same names.</p><h2 id="part-2-ergonomic-tweaks" tabindex="-1"><a href="#part-2-ergonomic-tweaks" aria-hidden="true">#</a> Part 2: ergonomic tweaks</h2><p>Previously, some things with Canvas2D were possible, but needlessly complicated to implement. Here are some quality-of-life improvements for javascript developers who want to use Canvas2D:</p><h3 id="contextreset" tabindex="-1"><a href="#contextreset" aria-hidden="true">#</a> context.reset()</h3><p>To explain clearing a canvas, I&#39;ve written a silly little <a href="https://glitch.com/edit/#!/wax-rapid-antlion">function to draw a retro pattern</a>:</p><pre><code><span>draw90sPattern</span><span>(</span><span>)</span><span>;</span></code></pre><p><img alt="A retro pattern of triangles and squares." decoding="async" height="500" loading="lazy" sizes="(min-width: 500px) 500px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=650 650w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=741 741w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=845 845w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=964 964w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/KRHLGxmk98zv8mSEWdPI.png?auto=format&amp;w=1000 1000w" width="500"/></p><p>Great! Now that I&#39;m done with that pattern, I want to clear the canvas and draw something else. Wait, how do we clear a canvas again? Oh yeah! <code>ctx.clearRect()</code>, of course.</p><pre><code>ctx<span>.</span><span>clearRect</span><span>(</span><span>0</span><span>,</span> <span>0</span><span>,</span> canvas<span>.</span>width<span>,</span> canvas<span>.</span>height<span>)</span><span>;</span></code></pre><p>Huh… that didn&#39;t work. Oh yeah! I&#39;ve got to reset the transform first:</p><pre><code>ctx<span>.</span><span>resetTransform</span><span>(</span><span>)</span><span>;</span></code></pre><p><img alt="A blank canvas." decoding="async" height="500" loading="lazy" sizes="(min-width: 500px) 500px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=650 650w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=741 741w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=845 845w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=964 964w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/ddoRhRRV8AuTy1Z82yEj.png?auto=format&amp;w=1000 1000w" width="500"/></p><p>Perfect! A nice blank canvas. Now let&#39;s start drawing a nice horizontal line:</p><pre><code>  ctx<span>.</span><span>moveTo</span><span>(</span><span>10</span><span>,</span> <span>10</span><span>)</span><span>;</span></code></pre><p><img alt="A horizontal and a diagonal line." decoding="async" height="500" loading="lazy" sizes="(min-width: 500px) 500px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=650 650w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=741 741w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=845 845w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=964 964w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/VlZkoPMTOuzD6bUeTd1i.png?auto=format&amp;w=1000 1000w" width="500"/></p><p>Grrrr! That&#39;s not right! 😡 What&#39;s that extra line doing here? Also, why is it pink? Okay, let&#39;s just check StackOverflow.</p><pre><code>canvas<span>.</span>width <span>=</span> canvas<span>.</span>width<span>;</span></code></pre><p>Why is this so silly? Why is this so hard?</p><p>Well, it&#39;s not any more. With the new api we have the simple, elegant, beautiful groundbreaking:</p><pre><code>ctx<span>.</span><span>reset</span><span>(</span><span>)</span><span>;</span></code></pre><p>Sorry that took so long.</p><h3 id="filters" tabindex="-1"><a href="#filters" aria-hidden="true">#</a> Filters</h3><p>SVG filters are a world unto themselves. If they&#39;re new to you I highly recommend reading &#34;<a href="https://www.smashingmagazine.com/2015/05/why-the-svg-filter-is-awesome/">The Art Of SVG Filters And Why It Is Awesome</a>&#34;, which shows some of their amazing potential.</p><p>SVG style filters are already available for Canvas2D! You just have to be willing to pass the filter as a url pointing to another SVG filter element on the page:</p><pre><code><span><span><span>&lt;</span>svg</span><span>&gt;</span></span></code></pre><pre><code>  <span>const</span> canvas <span>=</span> document<span>.</span><span>createElement</span><span>(</span><span>&#34;canvas&#34;</span><span>)</span><span>;</span></code></pre><p>Which messes up our pattern pretty good:</p><p><img alt="The retro pattern with a blurred effect applied." decoding="async" height="500" loading="lazy" sizes="(min-width: 500px) 500px, calc(100vw - 48px)" src="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format" srcset="https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=200 200w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=228 228w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=260 260w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=296 296w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=338 338w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=385 385w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=439 439w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=500 500w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=571 571w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=650 650w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=741 741w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=845 845w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=964 964w, https://wd.imgix.net/image/kheDArv5csY6rvQUJDbWRscckLr1/IPgddXUAwJFZzowzdxtx.png?auto=format&amp;w=1000 1000w" width="500"/></p><p>But, what if you wanted to do the above but stay within JavaScript and not mess around with strings? With the new API, this is totally possible.</p><pre><code>  ctx<span>.</span>filter <span>=</span> <span>new</span> <span>CanvasFilter</span><span>(</span><span>[</span></code></pre><p>Easy as pie! Try it and play with the parameters <a href="https://glitch.com/edit/#!/pretty-dent-titanoceratops">in the demo here</a>.</p><h2 id="part-3-performance-improvements" tabindex="-1"><a href="#part-3-performance-improvements" aria-hidden="true">#</a> Part 3: performance improvements</h2><p>With the New Canvas2D API, we also wanted to improve performance where possible. We added a couple features to give developers finer-grained control of their websites and allow for the slickest possible framerates:</p><h3 id="will-read-frequently" tabindex="-1"><a href="#will-read-frequently" aria-hidden="true">#</a> Will Read Frequently</h3><p>Use <code>getImageData()</code> to read pixel data back from a canvas. It can be very slow. The new API gives you a way of explicitly marking a canvas for reading back (for generative effects, for example). This allows you to optimize things under the hood and keep canvas fast for a larger variety of use cases. This feature has been in Firefox for a while and we&#39;re finally making it part of the canvas spec.</p><pre><code><span>const</span> canvas <span>=</span> document<span>.</span><span>createElement</span><span>(</span><span>&#39;canvas&#39;</span><span>)</span><span>;</span></code></pre><h3 id="context-loss" tabindex="-1"><a href="#context-loss" aria-hidden="true">#</a> Context loss</h3><p>Let&#39;s make sad tabs happy again! In the event that a client runs out of GPU memory or some other disaster befalls your canvas, you can now receive a callback and redraw as needed:</p><pre><code><span>const</span> canvas <span>=</span> document<span>.</span><span>createElement</span><span>(</span><span>&#39;canvas&#39;</span><span>)</span><span>;</span></code></pre><p>If you want to read more about canvas context and loss, the WHATWG has <a href="https://wiki.whatwg.org/wiki/Canvas_Context_Loss_and_Restoration">a good explanation</a> on their wiki.</p><h2 id="conclusion" tabindex="-1"><a href="#conclusion" aria-hidden="true">#</a> Conclusion</h2><p>Whether you&#39;re new to Canvas2D, you&#39;ve been using it for years, or you&#39;ve been avoiding using it for years, I&#39;m here to tell you to give canvas another look. It&#39;s the API-next-door that&#39;s been there all along.</p><p><em>Hero image by <a href="https://unsplash.com/@honeypoppet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Sandie Clarke</a> on <a href="https://unsplash.com/s/photos/canvas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></em></p></div></div>
  </body>
</html>
