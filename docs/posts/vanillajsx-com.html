<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://vanillajsx.com/">Original</a>
    <h1>VanillaJSX.com</h1>
    
    <div id="readability-page-1" class="page"><div id="root"><p>What if JSX just returned DOM elements?</p><div data-sample="sample1"><div><p><a target="_blank" href="https://github.com/sdegutis/vanillajsx.com/blob/main/site/samples/sample1.tsx">View source</a></p><pre><code>export default function ClickMe() {
  let i = 0;
  const el = &lt;button&gt;Click me&lt;/button&gt; as HTMLButtonElement;
  el.onclick = (e) =&gt; {
    el.textContent = `Clicked ${++i} times`;
  };
  return el;
}
</code></pre></div></div><p>Would they be reusable?</p><p>Could they keep their own state?</p><div data-sample="sample2"><div><p><a target="_blank" href="https://github.com/sdegutis/vanillajsx.com/blob/main/site/samples/sample2.tsx">View source</a></p><pre><code>import ClickMe from &#34;./sample1.js&#34;;

export default () =&gt; &lt;&gt;
  &lt;p&gt;&lt;ClickMe /&gt;&lt;/p&gt;
  &lt;p&gt;&lt;ClickMe /&gt;&lt;/p&gt;
  &lt;p&gt;&lt;ClickMe /&gt;&lt;/p&gt;
&lt;/&gt;;
</code></pre></div></div><p>How would they work together?</p><p>Could they create an interactive DOM tree?</p><div data-sample="sample3"><div><p><a target="_blank" href="https://github.com/sdegutis/vanillajsx.com/blob/main/site/samples/sample3.tsx">View source</a></p><pre><code>function TodoInput(attrs: { add: (v: string) =&gt; void }) {
  const input = &lt;input /&gt; as HTMLInputElement;
  input.placeholder = &#39;Add todo item...&#39;;
  input.onkeydown = (e) =&gt; {
    if (e.key === &#39;Enter&#39;) {
      attrs.add(input.value);
      input.value = &#39;&#39;;
    }
  };
  return input;
}

class TodoList {
  ul = &lt;ul class=&#39;todolist&#39; /&gt; as HTMLUListElement;
  add(v: string) {
    const item = &lt;li&gt;{v}&lt;/li&gt; as HTMLLIElement;
    item.onclick = () =&gt; item.remove();
    this.ul.append(item);
  }
}

export default () =&gt; {
  const list = new TodoList();
  list.add(&#39;foo&#39;);
  list.add(&#39;bar&#39;);
  return &lt;&gt;
    &lt;TodoInput add={(v) =&gt; list.add(v)} /&gt;
    {list.ul}
  &lt;/&gt;;
};
</code></pre></div></div><p>How would they handle large data?</p><p>Could they be convenient without a virtual dom?</p><div data-sample="sample4"><div><p><a target="_blank" href="https://github.com/sdegutis/vanillajsx.com/blob/main/site/samples/sample4.tsx">View source</a></p><pre><code>import { data } from &#34;../fetch-dataset.js&#34;;

export default function FindNames() {
  const status = &lt;p style=&#39;margin:1em 0&#39; /&gt; as HTMLParagraphElement;
  const results = &lt;ul /&gt; as HTMLUListElement;
  const input = &lt;input
    value=&#39;eri(c|k)a?&#39;
    autocomplete=&#39;new-password&#39;
    oninput={updateMatches}
  /&gt; as HTMLInputElement;

  updateMatches();
  function updateMatches() {
    const matched = (data.entries()
      .filter(([k]) =&gt; k.match(input.value))
      .toArray());

    const matches = (Iterator.from(matched)
      .map(match =&gt; &lt;Item regex={input.value} match={match} /&gt;)
      .take(30));

    results.replaceChildren(...matches);
    status.textContent = `${matched.length} / ${data.size}`;
  }

  return &lt;div class=&#39;sample4&#39;&gt;
    {input}
    {status}
    {results}
  &lt;/div&gt;;
}

function Item(attrs: { match: [string, number], regex: string }) {
  const [name, count] = attrs.match;
  const total = &lt;small style=&#39;color:#fff3&#39;&gt;({count})&lt;/small&gt;;
  return &lt;li&gt;
    &lt;span innerHTML={highlight(name, attrs.regex)} /&gt; {total}
  &lt;/li&gt;;
}

function highlight(str: string, regex: string) {
  if (!regex) return str;
  const r = new RegExp(`(${regex})`, &#39;gi&#39;);
  return str.replace(r, &#39;&lt;span class=&#34;match&#34;&gt;$1&lt;/span&gt;&#39;);
}
</code></pre></div></div><p>That&#39;s why I wrote <a target="_blank" href="https://code.immaculatalibrary.com/">imlib</a> (<a href="https://github.com/sdegutis/imlib">src</a>).</p><p>It came out of my work on <a target="_blank" href="https://www.immaculatalibrary.com/">immaculatalibrary.com</a> (<a href="https://github.com/sdegutis/immaculatalibrary.com">src</a>).</p><p>I started using it to build <a target="_blank" href="https://minigamemaker.com/">minigamemaker.com</a> (<a href="https://github.com/sdegutis/minigamemaker.com">src</a>).</p><p>I also used it to build <a target="_blank" href="https://github.com/sdegutis/vanillajsx.com/tree/main/site">the website you&#39;re reading</a> (&lt;-- src).</p><p>It was created because the status quo wasn&#39;t good enough for my site.</p><p>It is now my favorite way to make apps.</p><p>(Also, here&#39;s a much better <a href="https://sdegutis.github.io/imlib-todolist/">imlib todo-list app</a> (<a href="https://github.com/sdegutis/imlib-todolist/blob/main/site/app.tsx">src</a>)).</p><p>The two most complex &#34;interactive apps&#34; I&#39;ve built with this are:</p><ul><li><a href="https://www.immaculatalibrary.com/books.html">Books search page</a> (<a href="https://github.com/sdegutis/immaculatalibrary.com/blob/main/site/scripts/books-page.tsx">src</a>)</li><li><a href="https://www.immaculatalibrary.com/prayers/">Prayer page</a> (<a href="https://github.com/sdegutis/immaculatalibrary.com/blob/main/site/prayers/client.tsx">src</a>)</li></ul></div></div>
  </body>
</html>
