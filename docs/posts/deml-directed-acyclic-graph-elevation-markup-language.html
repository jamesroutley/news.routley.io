<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Mcmartelle/deml">Original</a>
    <h1>Deml: Directed Acyclic Graph Elevation Markup Language</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Languages designed to represent all types of graph data structures, such as Graphviz&#39;s <a href="https://graphviz.org/doc/info/lang.html" rel="nofollow">DOT Language</a> and Mermaid JS&#39;s <a href="https://mermaid.js.org/syntax/flowchart.html" rel="nofollow">flowchart syntax</a>, don&#39;t take advantage of the properties specific to DAGs (<a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" rel="nofollow">Directed Acyclic Graphs</a>).</p>
<p dir="auto">DAGs act like rivers. Water doesn&#39;t flow upstream (tides and floods being exceptions). Sections of a river at the same elevation can&#39;t be the inputs or outputs of each other, like the nodes C, D, and E in the image below. Their input is B. C outputs to F, while D and E output to G.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Mcmartelle/deml/blob/main/assets/river-example.jpg"><img src="https://github.com/Mcmartelle/deml/raw/main/assets/river-example.jpg" alt="Photo of a river to illustrate how DAGs operate"/></a></p>
<p dir="auto">DEML&#39;s goal is to use this ordering as part of the file syntax to make it easier for humans to parse. In DEML we represent an elevation marker with <code>----</code> on a new line. The order of elevation clusters is significant, but the order of nodes between two <code>----</code> elevation markers is not significant.</p>
<div dir="auto" data-snippet-clipboard-copy-content="UpRiver &gt; A
----
A &gt; B
----
B &gt; C | D | E
----
C
D
E
----
F &lt; C
G &lt; D | E &gt; DownRiver
----
DownRiver &lt; F"><pre><span>UpRiver</span> <span>&gt;</span> <span>A</span>
<span><span>----</span></span>
<span>A</span> <span>&gt;</span> <span>B</span>
<span><span>----</span></span>
<span>B</span> <span>&gt;</span> <span>C</span> <span>|</span> <span>D</span> <span>|</span> <span>E</span>
<span><span>----</span></span>
<span>C</span>
<span>D</span>
<span>E</span>
<span><span>----</span></span>
<span>F</span> <span>&lt;</span> <span>C</span>
<span>G</span> <span>&lt;</span> <span>D</span> <span>|</span> <span>E</span> <span>&gt;</span> <span>DownRiver</span>
<span><span>----</span></span>
<span>DownRiver</span> <span>&lt;</span> <span>F</span></pre></div>
<p dir="auto">Nodes are defined by the first word on a line. The defined node can point to its outputs with <code>&gt;</code> and to its inputs with <code>&lt;</code>. Inputs and outputs are separated by <code>|</code>.</p>

<p dir="auto"><a href="https://github.com/open-rust-initiative/dagrs">Dagrs</a> is a library for running multiple tasks with dependencies defined in a DAG. In DEML, shell commands can be assigned to a node with <code>=</code>. DEML files can be run via dag-rs with the comand <code>deml run -i &lt;filepath&gt;</code>.</p>
<p dir="auto">To compare the difference in readability, here is the <a href="https://github.com/open-rust-initiative/dagrs#yaml-configuration-file">Dagrs YAML example</a> in both YAML and DEML</p>

<div dir="auto" data-snippet-clipboard-copy-content="dagrs:
  a:
    name: &#34;Task 1&#34;
    after: [ b, c ]
    cmd: echo a
  b:
    name: &#34;Task 2&#34;
    after: [ c, f, g ]
    cmd: echo b
  c:
    name: &#34;Task 3&#34;
    after: [ e, g ]
    cmd: echo c
  d:
    name: &#34;Task 4&#34;
    after: [ c, e ]
    cmd: echo d
  e:
    name: &#34;Task 5&#34;
    after: [ h ]
    cmd: echo e
  f:
    name: &#34;Task 6&#34;
    after: [ g ]
    cmd: python3 ./tests/config/test.py
  g:
    name: &#34;Task 7&#34;
    after: [ h ]
    cmd: node ./tests/config/test.js
  h:
    name: &#34;Task 8&#34;
    cmd: echo h"><pre><span>dagrs</span>:
  <span>a</span>:
    <span>name</span>: <span><span>&#34;</span>Task 1<span>&#34;</span></span>
    <span>after</span>: <span>[ b, c ]</span>
    <span>cmd</span>: <span>echo a</span>
  <span>b</span>:
    <span>name</span>: <span><span>&#34;</span>Task 2<span>&#34;</span></span>
    <span>after</span>: <span>[ c, f, g ]</span>
    <span>cmd</span>: <span>echo b</span>
  <span>c</span>:
    <span>name</span>: <span><span>&#34;</span>Task 3<span>&#34;</span></span>
    <span>after</span>: <span>[ e, g ]</span>
    <span>cmd</span>: <span>echo c</span>
  <span>d</span>:
    <span>name</span>: <span><span>&#34;</span>Task 4<span>&#34;</span></span>
    <span>after</span>: <span>[ c, e ]</span>
    <span>cmd</span>: <span>echo d</span>
  <span>e</span>:
    <span>name</span>: <span><span>&#34;</span>Task 5<span>&#34;</span></span>
    <span>after</span>: <span>[ h ]</span>
    <span>cmd</span>: <span>echo e</span>
  <span>f</span>:
    <span>name</span>: <span><span>&#34;</span>Task 6<span>&#34;</span></span>
    <span>after</span>: <span>[ g ]</span>
    <span>cmd</span>: <span>python3 ./tests/config/test.py</span>
  <span>g</span>:
    <span>name</span>: <span><span>&#34;</span>Task 7<span>&#34;</span></span>
    <span>after</span>: <span>[ h ]</span>
    <span>cmd</span>: <span>node ./tests/config/test.js</span>
  <span>h</span>:
    <span>name</span>: <span><span>&#34;</span>Task 8<span>&#34;</span></span>
    <span>cmd</span>: <span>echo h</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="H &gt; E | G = echo h
----
G = node ./tests/config/test.js
E = echo e
----
F &lt; G = python3 ./tests/config/test.py
C &lt; E | G = echo c
----
B &lt; C | F | G = echo b
D &lt; C | E = echo d
----
A &lt; B | C = echo a"><pre><span>H</span> <span>&gt;</span> <span>E</span> <span>|</span> <span>G</span> <span>=</span> echo h
<span><span>----</span></span>
<span>G</span> <span>=</span> node <span>./</span>tests<span>/</span>config<span>/</span>test<span>.</span>js
<span>E</span> <span>=</span> echo e
<span><span>----</span></span>
<span>F</span> <span>&lt;</span> <span>G</span> <span>=</span> python3 <span>./</span>tests<span>/</span>config<span>/</span>test<span>.</span>py
<span>C</span> <span>&lt;</span> <span>E</span> <span>|</span> <span>G</span> <span>=</span> echo c
<span><span>----</span></span>
<span>B</span> <span>&lt;</span> <span>C</span> <span>|</span> <span>F</span> <span>|</span> <span>G</span> <span>=</span> echo b
<span>D</span> <span>&lt;</span> <span>C</span> <span>|</span> <span>E</span> <span>=</span> echo d
<span><span>----</span></span>
<span>A</span> <span>&lt;</span> <span>B</span> <span>|</span> <span>C</span> <span>=</span> echo a</pre></div>

<p dir="auto">To convert DEML files to Mermaid Diagram files (.mmd) use the command <code>deml mermaid -i &lt;inputfile&gt; -o &lt;outputfile&gt;</code>. The mermaid file can be used to generate an image at <a href="https://mermaid.live/" rel="nofollow">mermaid.live</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Mcmartelle/deml/blob/main/assets/river-mermaid-diagram.jpg"><img src="https://github.com/Mcmartelle/deml/raw/main/assets/river-mermaid-diagram.jpg" alt="mermaid js flowchart image of the river DAG"/></a></p>

<ul>
<li> Put my idea for an elevation based DAG representation into the wild</li>
<li> Run DAGs with dag-rs</li>
<li> Convert DEML files to Mermaid Diagram files</li>
<li> Syntax highlighting <a href="https://github.com/Mcmartelle/tree-sitter-deml">tree-sitter-deml</a></li>
<li> Add a syntax to label edges</li>
</ul>

<p dir="auto">I was thinking about how it&#39;s annoying in languages like C when function declaration order matters. Then I wondered if there could be a case when it would be a nice feature for declaration order to matter and I thought of DAGs.</p>

<p dir="auto">Licensed under either of</p>
<ul dir="auto">
<li>Apache License, Version 2.0
(<a href="https://github.com/Mcmartelle/deml/blob/main/LICENSE-APACHE">LICENSE-APACHE</a> or <a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow">http://www.apache.org/licenses/LICENSE-2.0</a>)</li>
<li>MIT license
(<a href="https://github.com/Mcmartelle/deml/blob/main/LICENSE-MIT">LICENSE-MIT</a> or <a href="http://opensource.org/licenses/MIT" rel="nofollow">http://opensource.org/licenses/MIT</a>)</li>
</ul>
<p dir="auto">at your option.</p>

<p dir="auto">Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in the work by you, as defined in the Apache-2.0 license, shall be
dual licensed as above, without any additional terms or conditions.</p>
</article></div></div>
  </body>
</html>
