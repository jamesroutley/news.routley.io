<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://infrequently.org/2024/02/home-screen-advantage/">Original</a>
    <h1>Home Screen Advantage</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
      <!-- BLOCK_CONTENT -->

  
  <article>
    <header>
      <h2>
        <a href="https://infrequently.org/2024/02/home-screen-advantage/">Home Screen Advantage</a>
      </h2>
      <h3>Decoding Apple&#39;s Desperate Ploy To Scuttle PWAs</h3>
      
    </header>
    <p>After weeks of confusion and intentional chaos, Apple&#39;s plan to kneecap the web <a href="https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/">has crept into view,</a> menacing a PWApocalypse as the March 6th compliance deadline approaches for the EU&#39;s Digital Markets Act (DMA).</p>
<figure>
<picture width="608" height="256">
  <source sizes="(max-width: 1200px) 70vw, 600px" srcset="/2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=3600 2400w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=2400 1600w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=1800 1200w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=1200   800w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=900   600w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=750   500w,
                  /2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg?nf_resize=fit&amp;w=600   400w"/>
<img src="https://infrequently.org/2024/02/home-screen-advantage/SW4-SE-YavinOrbit3.jpg" alt="The view from Cupertino." width="608" height="256" decoding="async"/>
</picture>

  <figcaption>The view from Cupertino.</figcaption>
</figure>
<p>The DMA requires Apple to open the iPhone to competing app stores, and and its lopsided proposal for &#34;enabling&#34; them is <a href="https://on.ft.com/3wsiYZd">getting most of the press.</a> But Apple knows it has native stores right where it wants them. Cupertino&#39;s <a href="https://www.theverge.com/2024/1/25/24050696/epic-games-tim-sweeney-apple-app-store-response">noxious requirements</a> will take years to litigate. Meanwhile, potential competitors are only that.</p>
<p>But Cupertino can&#39;t delay the DMA&#39;s other mandate: <a href="https://www.theverge.com/2024/1/25/24050478/apple-ios-17-4-browser-engines-eu">real browsers,</a> downloaded from Apple&#39;s own app store. Since it can&#39;t keep them from emerging, it&#39;s trying to raise costs on competitors and lower their potential to disrupt Apple&#39;s cozy monopoly. How? By geofencing browser choice and kneecapping web apps, all while gaslighting users about who is breaking their web apps.</p>
<p>The immediate impact of iOS 17.4 in the EU will be broken apps and lost data, affecting schools, governments, startups, gamers, and anyone else with the temerity to look outside the one true app store for even a second.</p>
<p>The data loss will be catastrophic for many, as will the removal of foundational features like <a href="https://web.dev/articles/storage-for-the-web">reliable data storage,</a> <a href="https://web.dev/learn/pwa/app-design">app-like UI,</a> settings integration, <a href="https://web.dev/explore/notifications">Push Notifications,</a> and <a href="https://developer.chrome.com/docs/capabilities/web-apis/badging-api">unread counts</a>. This will <em>just so happen</em> to render PWAs useless to worldwide businesses looking to reach EU users. A <em>regrettable</em> accident, to be sure.</p>
<p>Apple&#39;s interpretation of the DMA <em>appears</em> to be that features not available on March 6th don&#39;t need to be shared with competitors, and it doesn&#39;t want to share web apps. The solution almost writes itself: sabotage PWAs ahead of the deadline and give affected users, businesses, and competitors minimal time to react.</p>
<p>Cupertino&#39;s not just trying to vandalise PWAs and critical re-engagement features for Safari; it&#39;s working to prevent <em>any</em> browser from <em>ever</em> offering them on iOS. If Apple succeeds in the next two weeks, it will cement a future in which the mobile web will never be permitted to grow beyond marketing pages for native apps.</p>
<p>By hook or by crook, Apple&#39;s going to maintain its home screen advantage.</p>
<p>The business goal is obvious: force firms back into the app store Apple taxes and out of the only ecosystem it can&#39;t — <a href="https://www.theverge.com/2023/10/26/23933206/google-apple-search-deal-safari-18-billion">at least not directly.</a> Apple&#39;s <a href="https://developer.apple.com/support/dma-and-apps-in-the-eu#8">justifications range from unfalsifiable smokescreens to blatant lies,</a> but to know it you have to have a background in browser engineering and the <a href="https://eur-lex.auropa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32022R1925&amp;qid=1708824200885">DMA&#39;s legalese.</a> The rest of this post will provide that context. Apologies in advance for the length.</p>
<p>If you&#39;d like to stop reading here, take with you the knowledge that Cupertino&#39;s attempt to scuttle PWAs under cover of chaos is exactly what it appears to be: a shocking attempt to keep the web from <em>ever</em> emerging as a true threat to the App Store and <a href="https://www.theregister.com/2024/02/16/apple_web_apps/">blame regulators for Apple&#39;s own malicious choices.</a></p>
<p>And they just might get away with it if we don&#39;t all <a href="https://open-web-advocacy.org/apple-attempts-killing-webapps/">get involved ASAP.</a></p>

<h2 id="chaos-monkey-business">Chaos Monkey Business <a href="#chaos-monkey-business">#</a></h2>
<p>Two weeks ago, Apple sprung its <a href="https://www.wired.com/story/developers-revolt-apple-dma/">EU Digital Markets Act (DMA) compliance plans on the world as a <em>fait accomplis</em>.</a></p>
<p>The last-minute unveil and months of radio silence were calculated to give competitors minimal time to react to the complex terms, conditions, and APIs. This tactic tries to set Apple&#39;s proposal as a negotiating baseline, forcing competitors to burn time and money arguing down plainly unacceptable terms before they can enter the market.</p>
<p>For native app store hopefuls, this means years of expensive disputes before they can begin to access an already geofenced market. This was all wrapped in <a href="https://www.apple.com/newsroom/2024/01/apple-announces-changes-to-ios-safari-and-the-app-store-in-the-european-union/#:~:text=the%20best%2C%20most%20secure%20experience%20possible%20for%20EU%20users.-,The%20new%20options%20for%20processing%20payments%20and%20downloading%20apps%20on%20iOS,the%20EU.%20Even%20with%20these%20safeguards%20in%20place%2C%20many%20risks%20remain.,-Developers%20can%20learn%20about%20these%20changes%20on%20the%20Apple">a peevish, belligerant presentation,</a> which the good folks over at <a href="https://theplatformlaw.blog/2024/01/26/when-apple-takes-the-european-commission-for-fools-an-initial-overview-of-apples-new-terms-and-conditions-for-ios-app-distribution-in-the-eu/">The Platform Law Blog have covered in depth.</a></p>
<p>Much of the analysis <a href="https://www.techmeme.com/240125/p30#a240125p30">has focused on the raw deal Apple is offering native app store competitors,</a> missing the forest for the trees: <a href="https://infrequently.org/2024/01/the-web-is-the-app-store/">the threat Apple can&#39;t delay by years comes from within.</a></p>
<p>Deep in the sub-basement of Apple&#39;s tower of tomfoolery are APIs and policies that purport to enable browser engine choice. If you haven&#39;t been working on browsers for 15 years, <a href="https://developer.apple.com/support/alternative-browser-engines/">the terms</a> might seem reasonable, but to these eyes they&#39;re <a href="https://techcrunch.com/2024/01/26/apple-dma-webkit/amp/">anything but.</a> OWA <a href="https://open-web-advocacy.org/blog/owa-review-apple-dma-compliance-for-web/">has a lengthy dissection of the tricks Apple&#39;s trying to pull.</a></p>
<figure>
<picture width="684" height="538">
  <source sizes="(max-width: 1200px) 70vw, 600px" srcset="/2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=3600 2400w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=2400 1600w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=1800 1200w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=1200   800w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=900   600w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=750   500w,
                  /2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp?nf_resize=fit&amp;w=600   400w"/>
<img src="https://infrequently.org/2024/02/home-screen-advantage/pray-i-do-not-comply-further.webp" alt="Apple&#39;s message of hope and optimism for a better web." width="684" height="538" decoding="async" loading="lazy"/>
</picture>

  <figcaption>Apple&#39;s message of hope and optimism for a better web.</figcaption>
</figure>
<p>The proposals are maximally onerous, but you don&#39;t have to take my word for it; here&#39;s Mozilla:</p>
<blockquote>
<p>We are ... extremely disappointed with Apple’s proposed plan to restrict the newly-announced BrowserEngineKit to EU-specific apps. The effect of this would be to force an independent browser like Firefox to build and maintain two separate browser implementations — a burden Apple themselves will not have to bear.</p>
<p>Apple’s proposals fail to give consumers viable choices by making it as painful as possible for others to provide competitive alternatives to Safari.</p>
<p>This is another example of Apple creating barriers to prevent true browser competition on iOS.</p>
<p>— <a href="https://www.theverge.com/2024/1/26/24052067/mozilla-apple-ios-browser-rules-firefox">Mozilla spokesperson</a></p>
</blockquote>
<p>The obvious strategy is to raise costs and lower the value of porting browsers to iOS. Other browser vendors have cited exactly these concerns when asked about plans to bring their best products to iOS. Apple&#39;s play is to engineer an unusable alternative then cite the lack of adoption to <em>other</em> regulators as proof that mandating real engine choice is unwise.</p>
<p>Instead of facilitating worldwide browser choice in good faith, Apple&#39;s working to geofence progress; classic &#34;divide and conquer&#34; stuff, justified with <a href="https://www.theregister.com/2021/05/27/safari_webkit_bug/">serially falsified security excuses.</a> Odious, brazen, and likely in violation of the DMA, but to the extent that it will now turn into a legal dispute, that&#39;s a feature (not a bug) from Apple&#39;s perspective.</p>
<p>When you&#39;re the monopolist, delay is winning.</p>
<h2 id="but-wait!-there&#39;s-more!">But Wait! There&#39;s More! <a href="#but-wait!-there&#39;s-more!">#</a></h2>
<p>All of this would be stock <a href="https://infrequently.org/2024/02/home-screen-advantage/2022/06/apple-is-not-defending-browser-engine-choice/#apple&#39;s-long-standing-policies-are-anti-diversity">FruitCo doing anti-competitive FruitCo things,</a> but they went further, <a href="https://open-web-advocacy.org/blog/did-apple-just-break-web-apps-in-ios17.4-beta-eu/">attempting to silently shiv PWAs and blame regulators for it.</a> And they did it in the dead of the night, silently disabling important features as close to the DMA compliance deadline as possible.</p>
<p>It&#39;s challenging, verging on impossible, to read this as anything but <em>extrordinary</em> bad faith, but Apple&#39;s tactics require context to understand. The <a href="https://digital-markets-act.ec.europa.eu/about-dma_en#:~:text=The%20DMA%20entered%20into%20force,and%20provide%20all%20relevant%20information.">DMA came into force in 2022,</a> putting everyone (including Apple) on notice that their biggest platforms and products would probably be &#34;designated&#34;, and after designation, they would have six months to &#34;comply&#34;. The first set of designation decisions <a href="https://theplatformlaw.blog/2023/09/06/european-commission-adopts-first-dma-designation-decisions/">went out last Sept</a>, obligating Android, Windows, iOS, Chrome, and Safari to comply <em>no later</em> than March 6th, 2024.</p>
<figure>
<a href="https://digital-markets-act.ec.europa.eu/about-dma_en" alt="Apple tried everything to &lt;a href=&#39;https://www.theregister.com/2023/11/02/apple_safari_browser/&#39;&gt;shrink the scope of enforcement&lt;/a&gt; and &lt;a href=&#39;https://www.theverge.com/2024/1/8/23961923/apple-app-store-appeal-european-union-digital-markets-act-core-platform-service-gatekeeper&#39;&gt;delay compliance,&lt;/a&gt; but in the end had the same two-years of notice and six-months warning from designation as everyone else." target="_new">
<picture width="712" height="287">
  <source sizes="(max-width: 1200px) 70vw, 600px" srcset="/2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=3600 2400w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=2400 1600w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=1800 1200w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=1200   800w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=900   600w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=750   500w,
                  /2024/02/home-screen-advantage/digital_markets_act_timeline_0.png?nf_resize=fit&amp;w=600   400w"/>
<img src="https://infrequently.org/2024/02/home-screen-advantage/digital_markets_act_timeline_0.png" alt="Apple tried everything to &lt;a href=&#39;https://www.theregister.com/2023/11/02/apple_safari_browser/&#39;&gt;shrink the scope of enforcement&lt;/a&gt; and &lt;a href=&#39;https://www.theverge.com/2024/1/8/23961923/apple-app-store-appeal-european-union-digital-markets-act-core-platform-service-gatekeeper&#39;&gt;delay compliance,&lt;/a&gt; but in the end had the same two-years of notice and six-months warning from designation as everyone else." width="712" height="287" decoding="async" loading="lazy"/>
</picture>

</a>
  <figcaption>Apple tried everything to <a href="https://www.theregister.com/2023/11/02/apple_safari_browser/">shrink the scope of enforcement</a> and <a href="https://www.theverge.com/2024/1/8/23961923/apple-app-store-appeal-european-union-digital-markets-act-core-platform-service-gatekeeper">delay compliance,</a> but in the end had the same two-years of notice and six-months warning from designation as everyone else.</figcaption>
</figure>
<p>A maximally aggressive legal interpretation might try to exploit ambiguity in what it means to comply and when responsibilities <em>actually</em> attach.</p>
<p>Does compliance mean providing open and fair access starting from when iOS and Safari were <em>designated</em>, or does compliance obligation only attach six months later? The DMA&#39;s text is not ironclad here:</p>
<blockquote>
<p>10: The gatekeeper shall comply with the obligations laid down in Articles 5, 6 and 7 within 6 months after a core platform service has been listed in the designation decision pursuant to paragraph 9 of this Article.</p>
<p><a href="https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32022R1925&amp;qid=1708824200885#003.010">DMA Article 3, Clause 10</a></p>
</blockquote>
<p>Firms looking to comply maliciously <em>might</em> try to remove troublesome features <em>just</em> before a compliance deadline, then argue they don&#39;t need to share them with competitors becuse they weren&#39;t available before the deadline set in. Apple looks set to argue, contra everyone else subject to the DMA, that the moment from which features must be made interoperable is the end of the fair-warning period, not the date of designation.</p>
<p>This appears to be Apple&#39;s play, and it stinks to high heavens.</p>
<h3 id="what&#39;s-at-risk%3F">What&#39;s At Risk? <a href="#what&#39;s-at-risk%3F">#</a></h3>
<p>Apple&#39;s change isn&#39;t merely cosmetic. In addition to immediate data loss, FruitCo&#39;s change will destroy:</p>
<ul>
<li><strong>App-like UI:</strong></li>
<li><strong>Reliable storage:</strong></li>
<li><strong>Push Notifications:</strong></li>
<li><strong>App Icon Badging:</strong></li>
</ul>
  <!-- - **Minimally-functional Fullscreen:**<br>Games, in particular, need to maximize phone real estate. Apple hasn't gone off its hobby of gaslighting webdevs. In addition to 8 years of Push Notification excuses, Safari's totally broken [Fullscreen API,](TODO) meant PWAs were the best (if not only) way to get a working UI surface for presenting a `<canvas>` that wouldn't be dismissed at the slightest misgesture. -->
<p>Removal of one would be a crisis. Together? Apple&#39;s engineering the PWApocalypse.</p>
<p>You can&#39;t build credible mobile experiences without these features. A social network without notifications? A notetaking app that randomly loses data? Businesses will get the message worldwide: if you want to be on the homescreen and deliver services that aren&#39;t foundationally compromised, the only game in town is Apple&#39;s app store.</p>
<p>Apple understands even the most aggressive legal theories about DMA timing wouldn&#39;t support kneecapping PWAs <em>after</em> March 6th. Even if you believe (as I do) their obligations attached back in September, there&#39;s at least an argument to be tested. Cupertino&#39;s white-shoe litigators would be laughed out of court and <a href="https://ec.europa.eu/commission/presscorner/detail/en/qanda_20_2349#:~:text=In%20case%20a,systemic%20non%2Dcompliance.">Apple would get fined ridiculous amounts</a> for non-compliance after trying to deny these features to other browsers after the end of the fair-warning period. To preserve the argument for litigation, it was necessary to do the dirty deed ahead of the last plausible deadline.</p>
<h3 id="not-with-a-bang%2C-but-with-a-beta">Not With A Bang, But With A Beta <a href="#not-with-a-bang%2C-but-with-a-beta">#</a></h3>
<p>The first indication something was amiss was a conspicuous lack of APIs for PWA support in the documentation for obviously long-baking <a href="https://developer.apple.com/documentation/browserenginekit"><code>BrowserEngineKit</code></a>, released on Feb 1st alongside Apple&#39;s <a href="https://www.apple.com/newsroom/2024/01/apple-announces-changes-to-ios-safari-and-the-app-store-in-the-european-union/">peevish, deeply misleading note</a> that attempted to whitewash malicious compliance in a thin coat of security theatre.</p>
<p>Two days later, after developers inside the EU got their hands on the iOS 17.4 Beta, <a href="https://mastodon.social/@mysk/111857830238574891">word started to leak out that PWAs were broken.</a> Nothing about the change was documented in iOS Beta or Safari release notes. Developers filed <a href="https://bugs.webkit.org/show_bug.cgi?id=268643">plaintive bugs</a> and some directly pinged Apple employees, but Cupertino remained shtum. This created panic and confustion as the window for DMA compliance and the inevitable iOS 17.4 final release closed.</p>

<!-- 
beta 1: https://mastodon.social/@mysk/111857830238574891
        https://www.youtube.com/watch?v=AST12aDGf0Q&feature=youtu.be
beta 2: https://mastodon.social/@mysk/111892461059533933
beta 3: https://mastodon.social/@mysk/111926735141742246 
-->
<p><a href="https://mastodon.social/@mysk/111926735141742246">Two more betas followed,</a> but no documentation or acknowledgement of the &#34;bug.&#34; Changes to the broken PWA behavior were introduced, but Apple failed to acknowledge the issue or confirm that it was intentional (and therefore likely to persist). After two weeks of <a href="https://open-web-advocacy.org/blog/did-apple-just-break-web-apps-in-ios17.4-beta-eu/">growing panic from web developers</a>, <a href="https://open-web-advocacy.org/blog/its-official-apple-kills-web-apps-in-the-eu/">Apple finally copped to intentionally crippling the only open, tax-free competitor to the app store.</a></p>
<p>Apple&#39;s Feb 15th statement is a masterclass in deflection and deceit. To understand why requires a deep understanding of browsers internals and how Apple&#39;s closed PWA — sorry, <em>&#34;home screen web app&#34;</em> — system for iOS works.<!-- [^technical-depths-of-depravity] --></p>
<p><em>TL;DR</em>? Apple&#39;s cover story is horseshit, stem to stern. Cupertino oughta be ashamed and we web developers are excused for glowing with incandescent rage over being used as pawns; first ignored, then gaslit, and finally betrayed.</p>
<h2 id="lies%2C-damned-lies%2C-and-%22still%2C-we-regret...%22">Lies, Damned Lies, and <em>&#34;Still, we regret...&#34;</em> <a href="#lies%2C-damned-lies%2C-and-%22still%2C-we-regret...%22">#</a></h2>
<p>I really, really hate to do this, but <a href="https://en.wikipedia.org/wiki/Brandolini%27s_law">Brandolini&#39;s Law</a> dictates that to refute Apple&#39;s <a href="https://en.wikipedia.org/wiki/On_Bullshit">bullshit,</a> I&#39;m going to need to go through <a href="https://developer.apple.com/support/dma-and-apps-in-the-eu#8">their gibberish excuses</a> line-by-line to explain and translate. This is going to hurt me more than it hurts you.</p>
<blockquote>
<p>Q: Why don’t users in the EU have access to Home Screen web apps?</p>
</blockquote>
<p>Translation: <em>&#34;Why did you break functionality that has been a foundational part of iOS since 2007?&#34;</em></p>
<blockquote>
<p>To comply with the Digital Markets Act, Apple has done an enormous amount of engineering work to add new functionality and capabilities for developers and users in the European Union — including more than 600 new APIs and a wide range of developer tools.</p>
</blockquote>
<p>Translation: <em>&#34;We&#39;re so very tired, you see. All of this litigating to avoid compliance tuckered us right out. Plus, those big meanies at the EU made us do <em>work</em>. It&#39;s all very unfair.&#34;</em></p>
<p>It goes without saying, but Apple&#39;s burden to add APIs it should have long ago provided for competing native app stores has no bearing whatsoever on its obligation to provide fair access to APIs that browser competitors need. Apple also had the same two years warning as everyone else. It knew this was coming, and special pleading at the 11th hour has big <em>&#34;the dog ate my homework&#34;</em> energy.</p>
<blockquote>
<p>The iOS system has traditionally provided support for Home Screen web apps by building directly on WebKit and its security architecture. That integration means Home Screen web apps are managed to align with the security and privacy model for native apps on iOS, including isolation of storage and enforcement of system prompts to access privacy impacting capabilities on a per-site basis.</p>
</blockquote>
<p>Finally! A recitation of facts.</p>
<p>Yes, iOS <em>has</em> historically forced a pretty busted model on PWAs, but iOS is not unique in providing system settings integration for PWAs. Indeed, many OSes have created the sort of integration infrastructure that Apple describes. These systems leave the question of how PWAs are actually run (and where their storage lives) to the browser that installs them, and the sky has yet to fall. Apple is trying to gussy up their mere preferences as hard requirements without any reasonable justification.</p>
<p>Here we see the outline of a strawman; Apple is insinuating that it can&#39;t provide API surface areas to allow the sorts of integrations that others already have. Why? Because it might involve writing a lot of code.</p>
<p><a href="https://support.apple.com/guide/iphone/whats-new-in-ios-17-iphfed2c4091/ios">Bless their hearts.</a></p>
<blockquote>
<p>Without this type of isolation and enforcement, malicious web apps could read data from other web apps and recapture their permissions to gain access to a user’s camera, microphone or location without a user’s consent.</p>
</blockquote>
<!-- This is the bullshit motherlode. The lair of lies. The dungeon of disingenuousness...you get the idea. -->
<p>Keeping one website from abusing permissions or improperly accessing data from another website is what browsers <em>do</em>. It&#39;s a browser&#39;s one job.</p>
<p>Correctly separating princpals is the very defintion of a &#34;secure&#34; browser. Every single browser vendor (<a href="https://mspoweruser.com/after-ignoring-it-for-6-weeks-apple-starts-testing-fix-for-major-apple-safari-privacy-bug-that-leaks-your-google-id/">save Apple</a>) treats subversion of the <a href="https://en.wikipedia.org/wiki/Same-origin_policy">Same Origin Policy</a> as a showstopping bug to be fixed ASAP. Unbelieveable amounts of engineering go to ensuring browsers overlay stronger sandboxing and more restrictive permissions on top of the universally weaker OS security primitives — iOS very much included.</p>
<p>Browser makers have become masters of origin separation because they run totally untrusted code from all over the internet. Security is paramount because browsers have to be paranoid. They can&#39;t just <a href="https://www.darkreading.com/cyberattacks-data-breaches/malicious-apps-millions-downloads-apple-google-app-stores">posture about how store reviews</a> will keep users safe; they have to <em>do the work</em>.</p>
<p>Good browsers separate web apps better than bad ones, which makes it particularly rich that Apple of all vendors is directly misleading this way. Apple&#39;s decade+ of under-investment in Safari ensured it was much less prepared for <a href="https://meltdownattack.com/">Spectre and Meltdown</a> and <a href="https://9to5mac.com/2021/07/14/zero-day-exploit-allowed-solarwinds-hackers-to-extract-login-information-from-ios-devices/">Solar Winds</a> that alternaties on other OSes. Competing engines had invested hundreds of engineer years into more advanced <a href="https://www.chromium.org/Home/chromium-security/site-isolation/">Site Isolation</a> technology than Apple had, and the iOS browser engine monoculture has put users at risk over and over again as a result.</p>
<p>With that as background, we can start to unpack Apple&#39;s garbled claim. What Cupertino is alluding to here is that it <em>does not want</em> to create APIs for syncing permission state that would enable the thin shim apps every PWA-supporting OS uses to make website &#34;first class&#34; in the OS — including iOS today. Further, it doesn&#39;t want to add APIs for attributing storage use, or clearing state, or other common management tasks.</p>
<p>If those APIs existed, Apple would still have a management question, which it&#39;s misdirections also allude to. But these aren&#39;t a problem in practice either. Every browser that would offer PWA support would <em>happily</em> sign up to security terms that required accurate synchronization of permission state between OS surfaces and web origins, in exactly the same way they&#39;d dutifully treat cross-origin subversion as a fatal bug to be hot-fixed.</p>
<p>Apple&#39;s excusemaking is a mirror of Cupertino&#39;s years of scaremongering about alternate browser engine security, only to <a href="https://infrequently.org/2021/08/webkit-ios-deep-dive/#the-abandonware-problem">take up my proposal more-or-less wholesale when the rubber hit the road.</a> Nothing about this is monumental to build or challenging to manage; FruitCo&#39;s just hoping you don&#39;t know better. And why would you? The set of people who understand these details generously number in the low dozens.</p>
<blockquote>
<p>Browsers also could install web apps on the system without a user’s awareness and consent.</p>
</blockquote>
<p>Apple know this is a lie. They retain full control over the system APIs that are called to add icons to the homescreen, install apps, and much else. They can shim in interstitial UI if they feel like doing so. If iOS left this to Safari and did not include these sorts precautions, those are choices Apple has made and has been given two years notice to fix.</p>
<p>Cuptertino seems to be saying <em>&#34;bad things might happen if we continued to do a shit job&#34;</em> and one can&#39;t help but agree. However, that&#39;s no way out of the DMA&#39;s obligations.</p>
<blockquote>
<p>Addressing the complex security and privacy concerns associated with web apps using alternative browser engines would require building an entirely new integration architecture that does not currently exist in iOS and was not practical to undertake given the other demands of the DMA and the very low user adoption of Home Screen web apps.</p>
</blockquote>
<p>[CITATION NEEDED]</p>
<p>Once again, Apple is counting on the opacity of it&#39;s own suppression of the web to keep commenters from understanding the game that&#39;s afoot. Through an enervating combination of <a href="https://infrequently.org/2022/06/apple-is-not-defending-browser-engine-choice/#choices%2C-choices">strategic underinvestment</a> and coerced monoculture, Apple created (and still maintains) a huge gap in discoverability and friction for installing web apps vs. their native competition. Stacking the deck for native has taken many forms:</p>
<ul>
<li>Preventing web apps from gaining distribution in the app store <a href="https://developer.apple.com/app-store/review/guidelines/#4.2">by explicit policy.</a></li>
<li><a href="https://developer.apple.com/documentation/webkit/promoting_apps_with_smart_app_banners">&#34;Smart Banners&#34;</a> that let sites easily offer installation of their native counterparts.</li>
<li>Steadfast refusal to implement <a href="https://web.dev/articles/promote-install#browser-promotion">analagous features for PWAs</a> or provide competing browsers <a href="https://web.dev/learn/pwa/installation-prompt">the OS and DOM APIs they need to do so.</a></li>
<li><a href="https://www.cdc.gov/niosh/mining/content/hearingloss/installPWA.html">Burying Web App installation behind a &#34;Share Sheet&#34; UI</a> that users and developers complain is incredibly hard to discover, <a href="https://documentation.onesignal.com/docs/getting-your-audience-to-add-to-home-screen">forcing site owners to build clunky intersitials.</a></li>
<li>Denying competitors the necessary API access to offer better install UI and only providing the underwhelming &#34;Share Sheet&#34; option <a href="https://webkit.org/blog/13878/web-push-for-web-apps-on-ios-and-ipados/">last year,</a> a full <em>15 years</em> after Safari could.</li>
</ul>
<p>This campaign of suppression has been widly effective. If users don&#39;t know they can install PWAs, it&#39;s because <em>Safari never tells them</em>, and until this time last year, neither could any other browser. Developers also struggled to justify building them because Apple&#39;s repression extended to neglect of critical features, opening and maininting a substantial capability gap.</p>
<p>If PWAs use on iOS is low, that&#39;s a consequence of Apple&#39;s own actions. On every other OS where I&#39;ve seen the data, not only are PWAs a success, they are growing rapidly. Perhaps that&#39;s why Apple feels a need to mislead by omission and fail to provide data to back their claim.</p>
<blockquote>
<p>And so, to comply with the DMA’s requirements, we had to remove the Home Screen web apps feature in the EU.</p>
</blockquote>
<p>Bullshit.</p>
<p>Apple&#39;s embedded argument expands to:</p>
<ul>
<li>We don&#39;t want to comply with the plain-letter language of the law.</li>
<li>To avoid that, we&#39;ve come up with a legal theory of compliance that&#39;s favourable to us.</li>
<li>To comply with <em>that</em> (dubious) theory, and to avoid doing any of the work we don&#39;t want to do, we&#39;ve been <em>forced</em> to bump off the one competitor we can&#39;t tax.</li>
</ul>
<p>Neat, tidy, and comprised entirely of bovine excrement.</p>
<blockquote>
<p>EU users will be able to continue accessing websites directly from their Home Screen through a bookmark with minimal impact to their functionality. We expect this change to affect a small number of users. Still, we regret any impact this change — that was made as part of the work to comply with the DMA — may have on developers of Home Screen web apps and our users.</p>
</blockquote>
<p>Translation: <em>&#34;Because fuck you, that&#39;s why&#34;</em></p>
<p>Apple is under no obligation by the DMA&#39;s terms to nuke PWAs.</p>
<p>Windows and Android will continue supporting PWAs just fine. Apple apparently hopes it can convince you to blame regulators for its own choices. Cupertino&#39;s counting the element of surprise plus the press&#39;s poorly developed understanding of the situation to keep blowback from snowballing into effective oppostion.</p>
<h3 id="the-point">The Point <a href="#the-point">#</a></h3>
<p>There&#39;s no possible way to justify a <a href="https://developer.apple.com/support/core-technology-fee/">&#34;Core Technology Fee&#34;</a> tax on an open, interoperable, standardsized platform that competitors would provide secure implementations of for free. What Apple&#39;s attempting isn&#39;t just some hand-wavey removal of a &#34;low use&#34; feature ([CITATION NEEDED]), it&#39;s sabotage of the only credible alternative to its app store monopoly.</p>
<figure>
<picture width="2134" height="1164">
  <source sizes="(max-width: 1200px) 70vw, 600px" srcset="/2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=3600 2400w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=2400 1600w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=1800 1200w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=1200   800w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=900   600w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=750   500w,
                  /2021/08/webkit-ios-deep-dive/epic_v_apple.jpg?nf_resize=fit&amp;w=600   400w"/>
<img src="https://infrequently.org/2021/08/webkit-ios-deep-dive/epic_v_apple.jpg" alt="A slide from Apple&#39;s presentation in Apple v. Epic, attempting to make the claim Epic could have just made a PWA if they didn&#39;t like the App Store terms because circa &#39;20 Safari was &lt;em&gt;so&lt;/em&gt; capable. &lt;br&gt;&lt;br&gt;&lt;a href=&#39;/2021/04/progress-delayed/&#39;&gt;LOL.&lt;/a&gt;" width="2134" height="1164" decoding="async" loading="lazy"/>
</picture>

  <figcaption>A slide from Apple&#39;s presentation in Apple v. Epic, attempting to make the claim Epic could have just made a PWA if they didn&#39;t like the App Store terms because circa &#39;20 Safari was <em>so</em> capable. </figcaption>
</figure>
<p>Businesses will get the message: from now on, the only reliable way to get your service under the thumb, or in the notification tray, of the most valuable users in the world is to capitulate to Apple&#39;s extortionate App Store taxes.</p>
<p>If the last 15 years are anything to judge by, developers will take longer to understand what&#39;s going on, but this is an attempt to pull a <em>&#34;Thoughts on Flash&#34;</em> for the web. Apple&#39;s suppression of the web has <a href="https://infrequently.org/2021/04/progress-delayed/">taken many forms</a> over the past decade, but the common thread has been inaction and anti-competitive scuppering of more capable engines. With one of those pillars crumbling, the knives glint a bit more brightly. This is Apple once and for all trying to relegate web development skills to the dustbin of the desktop.</p>
<p>Not only will Apple render web apps unreliable for Safari users, FruitCo is setting up an argument to prevent competitors from ever delivering features that challenge the app store in future. And it doesn&#39;t care who it hurts along the way.</p>
<h2 id="the-mask-is-off">The Mask Is Off <a href="#the-mask-is-off">#</a></h2>
<p>This is exactly what it looks like: a single-fingered salute to the web and web developers. The removal of features that <a href="https://en.wikipedia.org/wiki/IPhone_OS_1">allowed the iPhone to exist at all.</a> The end of <a href="https://www.macstories.net/stories/before-the-app-store-the-sweet-solution-of-web-apps-and-developers-relentless-passion/">Steve Jobs&#39; promise that you&#39;d be able to make great apps out of HTML, CSS, and JS.</a></p>
<p>For the past few years Apple has gamely sent $1600/yr lawyers and <a href="https://www.bloomberg.com/news/articles/2022-09-19/apple-flexes-muscle-as-quiet-power-behind-app-developer-group">astroturf lobbyists</a> to argue it didn&#39;t need to be regulated. That Apple was really on the developer&#39;s side. That even if it overstepped occasionally, it was all in the best interest of users.</p>
<p>Tell that to the millions of EU PWA users about to lose data. Tell that to the public services built on open technology. Tell it to the businesses that will fold, having sweated to deliver compelling experiences using the shite tools Apple web developers. Apple&#39;s rug pull is anti-user, anti-developer, and anti-competition.</p>
<p>Now we see the whole effort in harsh relief. A web Apple can&#39;t sandbag and degrade is one it can&#39;t abide. FruitCo&#39;s fear and loathing of an open platform it can&#39;t tax is palpable. The lies told to cover for avarice are ridiculous — literally, <a href="https://www.etymonline.com/word/ridiculous">&#34;worthy of ridicule&#34;.</a></p>
<p>It&#39;s ok to withhold the benefit of the doubt from Safari and Apple. It&#39;s ok to be livid. These lies aren&#39;t little or white; they&#39;re directly aimed at our future. They&#39;re designed to influence the way software will be developed and delivered for decades to come.</p>
<p>If you&#39;re as peeved about this as I am, go <a href="https://open-web-advocacy.org/apple-attempts-killing-webapps/">join OWA in the fight</a> and help them create the sort of pressure in the next 10 days that might actually stop a monopolist with money on their mind.</p>


    
    
  </article>
      <!-- END_BLOCK_CONTENT -->
    </div></div>
  </body>
</html>
