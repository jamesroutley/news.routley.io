<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lemire.me/blog/2023/03/01/arm-vs-intel-on-amazons-cloud/">Original</a>
    <h1>ARM vs. Intel on Amazon’s Cloud: A URL Parsing Benchmark</h1>
    
    <div id="readability-page-1" class="page"><article id="post-20257">

<div>
<p>Twitter user opdroid1234 remarked that <a href="https://twitter.com/opdroid1234/status/1631041253843382274">they are getting more performance out of the ARM nodes than out of the Intel nodes on Amazon’s cloud (AWS)</a>.</p>
<p><a href="https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42.png"><img decoding="async" src="https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42.png" alt="" width="600" height="206" srcset="https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42.png 1166w, https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42-300x103.png 300w, https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42-1024x351.png 1024w, https://lemire.me/blog/wp-content/uploads/2023/03/Capture-decran-le-2023-03-01-a-17.48.42-768x263.png 768w" sizes="(max-width: 600px) 100vw, 600px"/></a></p>
<p>I found previously that the <a href="https://lemire.me/blog/2022/06/07/memory-level-parallelism-intel-ice-lake-versus-amazon-graviton-3/">Graviton 3 processors had less bandwidth that comparable Intel systems</a>. However, I have not done much in terms of raw compute power.</p>
<p>The Intel processors have the crazily good AVX-512 instructions: ARM processors have nothing close except for dedicated accelerators. But what about more boring computing?</p>
<p>We wrote a fast <a href="https://github.com/ada-url/ada">URL parser</a> in C++. It does not do anything beyond portable C++: no assembly language, no explicit SIMD instructions, etc.</p>
<p>Can the ARM processors parse URLs faster?</p>
<p>I am going to compare the following node types:</p>
<ul>
<li><tt>c6i.large</tt>: Intel Ice Lake (0.085 US$/hour)</li>
<li><tt>c7g.large</tt>: Amazon Graviton 3 (0.0725 US$/hour)</li>
</ul>
<p>I am using Ubuntu 22.04 on both nodes. I make sure that cmake, ICU and GNU G++ are installed.</p>
<p>I run the following routine:</p>
<ul>
<li><tt>git clone https://github.com/ada-url/ada</tt></li>
<li><tt>cd ada</tt></li>
<li><tt>cmake -B build -D ADA_BENCHMARKS=ON</tt></li>
<li><tt>cmake --build build</tt></li>
<li><tt>cd build</tt></li>
<li><tt>./build/benchmarks/bench --benchmark_filter=Ada</tt></li>
</ul>
<p>The results are that the ARM processor is indeed slightly faster:</p>
<table>
<tbody>
<tr>
<td>Intel Ice Lake</td>
<td>364 ns/url</td>
</tr>
<tr>
<td>Graviton 3</td>
<td>320 ns/url</td>
</tr>
</tbody>
</table>
<p>The Graviton 3 processor is about 15% faster. It is not the 20% to 30% that opdroid1234 reports, but the Graviton 3 nodes are also slightly cheaper.</p>
<p>Please note that (1) I am presenting just one data point, I encourage you to run your own benchmarks (2) I am sure that opdroid1234 is being entirely truthful (3) I love all processors (Intel, ARM) equally (4) I am not claiming that ARM is better than Intel or AMD.</p>
<p><strong>Note</strong>: I do not own stock in ARM, Intel or Amazon. I do not work for any of these companies.</p>
</div>
<div>

<p><img alt="" src="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=56&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/2ca999bef9535950f5b84281a4dab006?s=112&amp;d=mm&amp;r=g 2x" height="56" width="56" loading="lazy" decoding="async"/> </p>

</div>

</article></div>
  </body>
</html>
