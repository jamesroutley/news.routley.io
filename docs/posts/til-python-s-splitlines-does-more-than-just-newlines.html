<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://yossarian.net/til/post/python-s-splitlines-does-a-lot-more-than-just-newlines/">Original</a>
    <h1>TIL: Python&#39;s splitlines does more than just newlines</h1>
    
    <div id="readability-page-1" class="page"><div>
            <p>(With thanks to <a href="https://sethmlarson.dev">Seth Larson</a> for taking me down this rabbit hole.)</p>
<p>I always assumed that Python&#39;s <a href="https://docs.python.org/3/library/stdtypes.html#str.splitlines"><code>str.splitlines()</code></a> split strings by
&#34;<a href="https://docs.python.org/3/glossary.html#term-universal-newlines">universal newlines</a>&#34;, i.e., <code>\n</code>, <code>\r</code>, and <code>\r\n</code>.</p>
<p>But it turns out it does a lot more than that. From the docs:</p>
<blockquote>
<p>This method splits on the following line boundaries. In particular, the
boundaries are a superset of <a href="https://docs.python.org/3/glossary.html#term-universal-newlines">universal newlines</a>.</p>
<table>
<thead>
<tr>
<th>Representation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\n</code></td>
<td>Line Feed</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>Carriage Return</td>
</tr>
<tr>
<td><code>\r\n</code></td>
<td>Carriage Return + Line Feed</td>
</tr>
<tr>
<td><code>\v</code> or <code>\x0b</code></td>
<td>Line Tabulation</td>
</tr>
<tr>
<td><code>\f</code> or <code>\x0c</code></td>
<td>Form Feed</td>
</tr>
<tr>
<td><code>\x1c</code></td>
<td>File Separator</td>
</tr>
<tr>
<td><code>\x1d</code></td>
<td>Group Separator</td>
</tr>
<tr>
<td><code>\x1e</code></td>
<td>Record Separator</td>
</tr>
<tr>
<td><code>\x85</code></td>
<td>Next Line (C1 Control Code)</td>
</tr>
<tr>
<td><code>\u2028</code></td>
<td>Line Separator</td>
</tr>
<tr>
<td><code>\u2029</code></td>
<td>Paragraph Separator</td>
</tr>
</tbody>
</table>
</blockquote>
<p>This results in some surprising (to me) splitting behavior:</p>
<pre><code><span><span>&gt;</span><span>&gt;</span><span>&gt;</span> <span><span>s</span></span> <span>=</span> <span><span><span>&#34;</span></span></span><span><span>line1<span>\n</span>line2<span>\r</span>line3<span>\r</span><span>\n</span>line4<span>\v</span>line5<span>\x1d</span>hello<span>&#34;</span></span></span>
<span>&gt;</span><span>&gt;</span><span>&gt;</span> <span><span><span>s</span><span>.</span></span><span><span>splitlines</span></span><span>(</span><span>)</span></span>
<span><span>[</span><span><span><span>&#39;</span></span></span><span><span>line1<span>&#39;</span></span></span><span>,</span> <span><span><span>&#39;</span></span></span><span><span>line2<span>&#39;</span></span></span><span>,</span> <span><span><span>&#39;</span></span></span><span><span>line3<span>&#39;</span></span></span><span>,</span> <span><span><span>&#39;</span></span></span><span><span>line4<span>&#39;</span></span></span><span>,</span> <span><span><span>&#39;</span></span></span><span><span>line5<span>&#39;</span></span></span><span>,</span> <span><span><span>&#39;</span></span></span><span><span>hello<span>&#39;</span></span></span><span>]</span></span>
</span></code></pre>
<p>Whereas I would have expected:</p>
<pre><code><span><span><span>[</span><span><span><span>&#34;</span></span></span><span><span>line1<span>&#34;</span></span></span><span>,</span> <span><span><span>&#34;</span></span></span><span><span>line2<span>&#34;</span></span></span><span>,</span> <span><span><span>&#34;</span></span></span><span><span>line3<span>&#34;</span></span></span><span>,</span> <span><span><span>&#34;</span></span></span><span><span>line4<span>\v</span>line5<span>\x1d</span>hello<span>&#34;</span></span></span><span>]</span></span>
</span></code></pre>
<p>This was a good periodic reminder that Unicode does <strong>not</strong> mean
&#34;printable,&#34; and that there are still plenty of ecosystems that
assign semantics to <a href="https://en.wikipedia.org/wiki/C0_and_C1_control_codes">C0 and C1 control codes</a>.</p>

        </div></div>
  </body>
</html>
