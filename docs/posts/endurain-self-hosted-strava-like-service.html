<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/joaovitoriasilva/endurain">Original</a>
    <h1>Endurain: Self-hosted Strava like service</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">Endurain is a Strava like service that you can selfhost.
It uses for the frontend PHP+HTML+basic JS+Bootstrap CSS, for the backend Python FastAPI and stravalib, MariaDB for the database engine and Jaeger for observability basic usage.
Docker images are available to deploy the service and you can check &#34;docker-compose.yml&#34; file for an example. Environemnt variables detailed bellow.</p>
<p dir="auto">I&#39;m not a developer by profession (my dev concepts are from university ten years ago) so this work had a lot of help from ChatGPT and the main purpose was to learn new technologies and new concepts, so please be gentle.
If you have recommendations for any topic please let me know.</p>
<p dir="auto">Currently the service supports:</p>
<ul dir="auto">
<li>Multi-user</li>
<li>Create/edit/delete users</li>
<li>Basic admin and regular users profiles that adapt the interface</li>
<li>Import activities using .gpx files</li>
<li>Connect with Strava and retrieve activities from Strava</li>
<li>Feed with user activities, current user week stats and month stats</li>
<li>Feed with followers activities</li>
<li>Basic activity privacy</li>
<li>Activity page with more in depth info of the activity</li>
<li>Delete activities</li>
<li>Create/edit/delete gear (wetsuit, bycicle and running shoes)</li>
<li>Add/edit/delete activity gear</li>
<li>User page with user stats and user activities per week</li>
<li>Follow user basic implementation</li>
</ul>
<p dir="auto">To do features (not by order):</p>
<ul dir="auto">
<li>Retrieve gear from Strava</li>
<li>Default gear for activity type</li>
<li>Track gear usage</li>
<li>Gear components logic for component usage tracking</li>
<li>Comments and likes logic for activities</li>
<li>Notifications logic</li>
<li>Activity Pub integration?</li>
</ul>
<hr/>

<p dir="auto">Table bellow shows supported environemnt variables. Variables marked with optional &#34;No&#34; should be set to avoid errors.</p>
<table>
<thead>
<tr>
<th>Environemnt variable</th>
<th>Default value</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>BACKEND_PROTOCOL</td>
<td>http</td>
<td>Yes</td>
</tr>
<tr>
<td>BACKEND_HOST</td>
<td>backend</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p dir="auto">Frontend dependencies:</p>
<ul dir="auto">
<li>php:8.3-apache</li>
<li>User avatars create using DiceBear (<a href="https://www.dicebear.com" rel="nofollow">https://www.dicebear.com</a>) avataaars style.</li>
<li>Bootstrap CSS v5.3.2</li>
<li>leaflet v1.7.1</li>
<li>fontawesome icons free version</li>
<li>Logo created using Canvas</li>
<li><a href="https://geocode.maps.co/" rel="nofollow">https://geocode.maps.co/</a> for reverse Geocode logic on activity parsing</li>
</ul>
<hr/>

<p dir="auto">Table bellow shows supported environemnt variables. Variables marked with optional &#34;No&#34; should be set to avoid errors.</p>
<table>
<thead>
<tr>
<th>Environemnt variable</th>
<th>Default value</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>DB_HOST</td>
<td>mariadb</td>
<td>Yes</td>
</tr>
<tr>
<td>DB_PORT</td>
<td>3306</td>
<td>Yes</td>
</tr>
<tr>
<td>DB_USER</td>
<td>gearguardian</td>
<td>Yes</td>
</tr>
<tr>
<td>DB_PASSWORD</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>DB_DATABASE</td>
<td>gearguardian</td>
<td>Yes</td>
</tr>
<tr>
<td>SECRET_KEY</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>ALGORITHM</td>
<td>HS256</td>
<td>Yes</td>
</tr>
<tr>
<td>ACCESS_TOKEN_EXPIRE_MINUTES</td>
<td>30</td>
<td>Yes</td>
</tr>
<tr>
<td>STRAVA_CLIENT_ID</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>STRAVA_CLIENT_SECRET</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>STRAVA_AUTH_CODE</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>JAEGER_ENABLED</td>
<td>true</td>
<td>Yes</td>
</tr>
<tr>
<td>JAEGER_PROTOCOL</td>
<td>http</td>
<td>Yes</td>
</tr>
<tr>
<td>JAEGER_HOST</td>
<td>jaeger</td>
<td>Yes</td>
</tr>
<tr>
<td>JAGGER_PORT</td>
<td>4317</td>
<td>Yes</td>
</tr>
<tr>
<td>STRAVA_DAYS_ACTIVITIES_ONLINK</td>
<td>30</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p dir="auto">Table bellow shows the obligatory environemnt variables for mariadb container. You should set them based on what was also set for backend container.</p>
<table>
<thead>
<tr>
<th>Environemnt variable</th>
<th>Default value</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>MYSQL_ROOT_PASSWORD</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
<tr>
<td>MYSQL_DATABASE</td>
<td>gearguardian</td>
<td><code>No</code></td>
</tr>
<tr>
<td>MYSQL_USER</td>
<td>gearguardian</td>
<td><code>No</code></td>
</tr>
<tr>
<td>MYSQL_PASSWORD</td>
<td>changeme</td>
<td><code>No</code></td>
</tr>
</tbody>
</table>
<p dir="auto">Python backend dependencies used:</p>
<ul dir="auto">
<li>python:3.11</li>
<li>fastapi</li>
<li>pydantic</li>
<li>uvicorn</li>
<li>python-dotenv</li>
<li>sqlalchemy</li>
<li>mysqlclient</li>
<li>python-jose[cryptography]</li>
<li>passlib[bcrypt]</li>
<li>apscheduler</li>
<li>requests</li>
<li>stravalib</li>
<li>opentelemetry-sdk</li>
<li>opentelemetry-instrumentation-fastapi</li>
<li>opentelemetry.exporter.otlp</li>
<li><a href="https://geocode.maps.co/" rel="nofollow">https://geocode.maps.co/</a> for reverse Geocode logic on activity parsing</li>
</ul>
<hr/>

<p dir="auto">For Strava integration API endpoint must be available to the Internet.
You will also need to create a API Application using a Strava account -&gt; more info here <a href="https://developers.strava.com/docs/getting-started/" rel="nofollow">https://developers.strava.com/docs/getting-started/</a></p>
</article>
          </div></div>
  </body>
</html>
