<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://wh0.github.io/2019/11/16/easter-egg-inspection.html">Original</a>
    <h1>Android Studio’s “Code contains easter egg” inspection (2019)</h1>
    
    <div id="readability-page-1" class="page"><div>
	
	<p>2019/11/16
</p>
	<p>There’s an inspection called “Code contains easter egg” that comes with Android Studio.
This one:</p>

<p><img src="https://wh0.github.io/assets/2019/easter-egg-inspection-inspections.png" alt=""/></p>

<p>How can it systematically detect an easter egg?</p>

<p>It turns out that this inspection is limited to a narrow definition of an easter egg used in the inspection’s description.
It finds a certain syntax of Java <em>code</em> that tries not to look like code, not features, like a flight simulator hidden in a spreadsheet program.</p>

<p>From <a href="https://android.googlesource.com/platform/tools/base/+/2f03004c181baf9d291a9bf992e1b444e83cd82d/lint/libs/lint-checks/src/main/java/com/android/tools/lint/checks/CommentDetector.java#177">the implementation</a> of this lint,
we can see that it searches for the string <code>\u002a\u002f</code> inside a comment.
That’s some kind of escaped form of <code>*/</code>.</p>

<p><a href="https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.2">Supposedly</a> it’s correct to unescape these sequences before even lexing comments.
But the syntax highlighting in Android Studio doesn’t behave this way.</p>

<p><img src="https://wh0.github.io/assets/2019/easter-egg-inspection-example.png" alt=""/></p>

<p>So indeed you might consider that code to be “hidden.”</p>

<hr/>

<p>Wait, does this mean Unicode string escapes aren’t actually parsed in the safe confines of a string literal?</p>

<p><img src="https://wh0.github.io/assets/2019/easter-egg-inspection-string.png" alt=""/></p>

<p>😱️</p>

	
	<p>
		
		My last post was about either
		
		<strong>Wire toothbrushes</strong> or <strong>Rasterization of coincident edges</strong>.
		
		Find out <a href="https://wh0.github.io/2019/11/05/rasterization.html">which</a>.
		
	</p>
	
</div></div>
  </body>
</html>
