<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://devblogs.microsoft.com/go/go-1-24-fips-update/">Original</a>
    <h1>Microsoft Go 1.24 FIPS changes</h1>
    
    <div id="readability-page-1" class="page"><div id="single-wrapper">
    
    <article data-clarity-region="article" id="post-345">
        <div data-bi-area="body_article" data-bi-id="post_page_body_article">
            <p>The Go 1.24 cryptography packages have been through a heavy refactoring to allow the Go standard library to be FIPS 140-3 compliant.
This was done per the proposal <a href="https://github.com/golang/go/issues/69536">#69536: crypto: obtain a FIPS 140-3 validation</a>.
The benefit is that the FIPS 140-3 compliant cryptographic module is written in pure Go (and Go assembly) rather than using cgo or syscalls to call into third-party libraries.
This is a major leap forward for the Go standard library, and it is a significant milestone for the Go community.
Take a look at the <a href="https://go.dev/doc/security/fips140">Go FIPS 140-3 Compliance</a> for more information.</p>
<p>In Go 1.23, it’s possible to use Go to build a FIPS-compliant application using <code>GOEXPERIMENT=boringcrypto</code>, but it’s <a href="https://github.com/golang/go/blob/release-branch.go1.23/src/crypto/internal/boring/README.md">not supported for use outside of Google</a>.
This works by using cgo to link in the FIPS-certified BoringCrypto library.
The cryptography packages then call into BoringCrypto to perform cryptographic operations.</p>
<p>Microsoft Go takes an alternative approach to FIPS compliance: it uses system libraries to perform cryptographic operations.
This premise hasn’t changed in Microsoft Go 1.24, and it will continue using <a href="https://openssl-library.org/">OpenSSL</a> on Linux and <a href="https://learn.microsoft.com/en-us/windows/win32/seccng/cng-portal">CNG</a> on Windows.
Microsoft Go 1.24 also improves compatibility with Azure Linux and introduces preview support for macOS.</p>
<p>We evaluated changing Microsoft Go to use the new Go FIPS module rather than system libraries.
However, we ultimately determined that this approach doesn’t align with Microsoft internal cryptography strategy and policies.
We recommend, though, that Go developers requiring FIPS 140-3 compliance use the official Go FIPS module, once it is certified, if it fits their needs.</p>
<p>Here are some more details about what’s changed in Microsoft Go 1.24:</p>
<h3>FIPS configuration</h3>
<p>The Microsoft Go toolchain has been updated to accept the FIPS-related settings that have been added to the upstream Go toolchain.
These new settings are preferred over the old ones, but the old ones are still supported until we remove them in Microsoft Go 1.25.</p>
<p>These are the new environment variable settings:</p>
<ul>
<li><code>GODEBUG=fips140=on</code> (runtime setting) enables the FIPS 140-3 compliant cryptographic module. Supersedes <code>GOFIPS=1</code>, which is now deprecated.</li>
<li><code>GODEBUG=fips140=only</code> (runtime setting) acts as <code>on</code>, but panics if a non-FIPS 140-3 compliant algorithm is used. This setting is partially supported in Go 1.24, and will be fully supported in Go 1.25.</li>
<li><code>GOFIPS140=latest</code> (build setting) sets <code>GODEBUG=fips140</code> to <code>on</code> by default. Replaces <code>-tags=requirefips</code>.</li>
</ul>
<p>To know more about these settings, please refer to the <a href="https://github.com/microsoft/go/blob/microsoft/main/eng/doc/fips/README.md">Microsoft Go FIPS documentation</a>.</p>
<p>Note that the Go runtime will automatically enter FIPS mode when running on a FIPS-compliant system, such as <a href="https://github.com/microsoft/azurelinux">Azure Linux</a> or <a href="https://learn.microsoft.com/en-us/windows/security/security-foundations/certification/fips-140-validation">Windows</a>, so you don’t need to set <code>GODEBUG=fips140=on</code> on those systems.</p>
<h3>New Platform: macOS support</h3>
<p>We are excited to announce that Microsoft Go 1.24 will include preview support for macOS system libraries.
The FIPS-certified <a href="https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man3/Common%20Crypto.3cc.html">Common Crypto</a> and <a href="https://developer.apple.com/documentation/cryptokit">CryptoKit</a> libraries are now supported.
This means that developers can leverage these libraries to perform cryptographic operations in a FIPS-compliant manner on macOS.
The integration ensures that cryptographic functions are executed using the system’s FIPS-certified libraries.
To use these libraries, build your macOS application with the <code>systemcrypto</code> goexperiment.
This support is currently experimental, and we are working to make it production-ready in Microsoft Go 1.25. Feedback is welcome, so please don’t hesitate to <a href="https://github.com/microsoft/go/issues/new">file an issue</a>!</p>
<h3>Enhanced Azure Linux 3 support</h3>
<p><a href="https://github.com/microsoft/azurelinux">Azure Linux</a> is a Linux distribution for Microsoft’s cloud infrastructure, edge products and services.
One of the key features of Azure Linux is that it is FIPS 140-3 compliant out of the box thanks to using the <a href="https://github.com/microsoft/SymCrypt-OpenSSL">SCOSSL (SymCrypt provider for OpenSSL)</a> provider.</p>
<p>Microsoft Go 1.24 has been improved to better support third-party OpenSSL providers like SCOSSL.
Important fixes were also backported to 1.22 and 1.23.
This allows Microsoft Go to take full advantage of the FIPS 140-3 compliant SymCrypt provider on Azure Linux.</p>
        </div><!-- .entry-content -->

        <!-- AI Disclaimer -->
            </article>
    
</div></div>
  </body>
</html>
