<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.tomayac.com/2023/06/07/web-apps-on-macos-sonoma-14-beta/">Original</a>
    <h1>Web Apps on macOS Sonoma 14 Beta</h1>
    
    <div id="readability-page-1" class="page"><section><h2 id="executive-summary" tabindex="-1">Executive summary <a href="#executive-summary" aria-hidden="true">🔗</a></h2><p>With macOS Sonoma, <strong>Apple goes all-in on the concept of installable web apps</strong>. They&#39;re highly integrated in the overall macOS experience and don&#39;t give away their web roots by not showing any Safari UI at all.</p><h2 id="testing-environment" tabindex="-1">Testing environment <a href="#testing-environment" aria-hidden="true">🔗</a></h2><p>Tested on macOS Sonoma 14.0 Beta (<code>23A5257q</code>) with Safari version 17.0 (<code>19616.1.14.11.11</code>). It probably doesn&#39;t matter, but the testing device was a 13-inch, M1, 2020 MacBook Pro.</p><h2 id="install-experience" tabindex="-1">Install experience <a href="#install-experience" aria-hidden="true">🔗</a></h2><p>On macOS Sonoma, you can add a website—any website, not just apps with a manifest—to your Dock. Go to the <strong>Share</strong> icon and click <strong>Add to Dock</strong>, or use the menu item <strong>File &gt; Add to Dock</strong>.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--u0q7vo9587s.png" alt="Adding an app via the Share icon."/></p><p><em>Adding an app via the <strong>Share</strong> icon.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--9zgyksdtzr.png" alt="Adding an app via the File menu."/></p><p><em>Adding an app via the <strong>File</strong> menu.</em></p><p>You can adjust the name and icon if desired. The URL is the URL you&#39;re on for pages without a manifest, or the <code>start_url</code> for pages with a manifest. It can&#39;t be changed. For pages without an icon, Safari will create a fallback icon based on the first letter of the page&#39;s title.</p><p><strong>👀 Observation:</strong> Unlike on iOS/iPadOS, you can&#39;t add the same app twice, unless you rename it.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--jbz4jqyyylc.png" alt="App name and icon are adjustable, the URL is not."/></p><p><em>App name and icon are adjustable, the URL is not.</em></p><p>The web app icon then appears in your Dock. Maskable icons are supported, and the typical macOS squircle shape is respected. Closing all windows of an app leaves the app running, aligned with macOS UX paradigms.</p><p><strong>👀 Observation:</strong> Unlike on Chrome, the app doesn&#39;t launch immediately and &#34;morph&#34; from in-tab to in-app, but instead you remain on the tab and need to launch the app manually.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--1iikfvhhzcr.png" alt="Web app added to the Dock."/></p><p><em>Web app added to the Dock.</em></p><p>When right-clicking the Dock icon, you can uncheck <strong>Keep in Dock</strong> and still launch the app via Launchpad, Spotlight Search, or even just by double-clicking the app icon in <code>~/Applications/</code>.</p><h2 id="launch-experience" tabindex="-1">Launch experience <a href="#launch-experience" aria-hidden="true">🔗</a></h2><p>The out-of-the box launch experience of web apps is fantastic. Nowhere does it give away that this is a web app. For apps with a manifest, there&#39;s no Safari UI whatsoever, and the expectation is that such apps are single-page apps that provide their own navigation controls. If an app is well made, lay persons probably wouldn&#39;t be able to tell that something is a web app.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--hysefdcnykc.png" alt="Web app running without any Safari UI."/></p><p><em>Web app running without any Safari UI.</em></p><p><strong>👀 Observation:</strong> Different from iOS/iPadOS, credentials in cookies are copied over, so if you were logged in when running in the tab, you&#39;re logged in when you launch the app. No other storage means apart from cookies are copied. <em>&#34;When a user adds a website to their Dock, Safari will copy the website&#39;s cookies to the web app. That way, if someone is logged into their account in Safari, they will remain logged in within the web app. This will only work if the authentication state is stored within cookies. Safari does not copy over any other kind of local storage. After a user adds a web app to the Dock, no other website data is shared, which is great for privacy&#34;.</em></p><p><strong>👀 Observation:</strong> Web Inspector (DevTools) is blocked, even with the <strong>Show features for web developers</strong> checkbox checked. There&#39;s no <strong>Develop</strong> menu item nor can you right-click and <strong>Inspect Element</strong>. This looks like a conscious decision. <strong>Update:</strong> <a href="https://mastodon.social/@samedwards">@samedwards@mastodon.social</a> helpfully <a href="https://mastodon.social/@samedwards/110504651650657859">pointed out</a> that you can debug apps via Safari&#39;s <strong>Develop &gt; $machineName &gt; $appName</strong> menu item. If all app windows are closed but the app isn&#39;t quit, a potential service worker will be inspectable until it gets terminated after a couple of seconds.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--hysefdcnykd.png" alt="Debugging a web app via Safari."/></p><p><em>Debugging a web app via Safari.</em></p><p><strong>👀 Observation:</strong> Extensions don&#39;t run and likewise aren&#39;t displayed. Also probably a conscious decision.</p><p><strong>👀 Observation:</strong> Same-origin (or in-<a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/scope">scope</a> if a manifest exists) links are handled in-app, cross-origin (or out-of-<a href="https://developer.mozilla.org/en-US/docs/Web/Manifest/scope">scope</a> if a manifest exists) links open in the default browser. A notable exception are OAuth flow links, which are handled in-app based on a heuristic.</p><p>If a user navigates to an already installed app in Safari, a prompt is displayed that invites the user to <strong>Open in web app</strong>.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--k85cr23x5v.png" alt="Prompt inviting the user to Open in web app."/></p><p><em>Prompt inviting the user to <strong>Open in web app</strong>.</em></p><h2 id="macos-integration-experience" tabindex="-1">macOS integration experience <a href="#macos-integration-experience" aria-hidden="true">🔗</a></h2><p>Web apps on Mac let you focus on the websites you use all the time, separate from the rest of your browsing. Like all Mac apps, web apps work great with Stage Manager, Mission Control, and keyboard shortcuts like Command + Tab. Web apps can be opened from the Dock, Launchpad, and Spotlight Search.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--6e18tk2ywgl.png" alt="Multitasking experience."/></p><p><em>Multitasking experience.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--gyygf94lo0l.png" alt="Spotlight search experience."/></p><p><em>Spotlight search experience.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--cwy5ftpy4qi.png" alt="Launchpad experience."/></p><p><em>Launchpad experience.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--wg589k8r7mh.png" alt="Stage Manager experience."/></p><p><em>Stage Manager experience.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--n1elzn6cq9n.png" alt="All web apps have an About dialog."/></p><p><em>All web apps have an <strong>About</strong> dialog.</em></p><h2 id="settings-and-permissions" tabindex="-1">Settings and permissions <a href="#settings-and-permissions" aria-hidden="true">🔗</a></h2><p>Web apps work with AutoFill credentials from iCloud Keychain and from third-party apps that have adopted the <a href="https://developer.apple.com/documentation/bundleresources/entitlements/com_apple_developer_authentication-services_autofill-credential-provider">Credential Provider Extension API</a>. Users can grant permission to a web app to use their camera, microphone and location in the same way they grant such permissions to other Mac apps through system prompts and the Privacy &amp; Security section of System Settings.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--2rirguybc3w.png" alt="System settings with Camera permissions."/></p><p><em>System settings with Camera permissions.</em></p><p>Web apps on Mac support <a href="https://developer.apple.com/documentation/usernotifications/sending_web_push_notifications_in_web_apps_safari_and_other_browsers?language=objc">web push</a>, <a href="https://webkit.org/blog/14112/badging-for-home-screen-web-apps/">badging</a>, and all the usual web standards implemented by WebKit, just like web apps <a href="https://webkit.org/blog/13878/web-push-for-web-apps-on-ios-and-ipados/">on iOS and iPadOS</a>.</p><p><strong>👀 Observation:</strong> There seems to be a <a href="https://bugs.webkit.org/show_bug.cgi?id=257807">bug</a> where the hosting Web App appears as the app requesting the Notifications permission. Notifications then work as expected, though, including using the correct icon.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--f4adwfi8t1.png" alt="Notifications permission prompt with the wrong app name and icon."/></p><p><em>Notifications permission prompt with the wrong app name and icon.</em></p><p>Web apps have their own <strong>Settings</strong> dialog. In <strong>General</strong>, the app name and icon can be changed and navigation controls can be toggled on or off. The <a href="https://developer.apple.com/documentation/safari-release-notes/safari-15-release-notes#:~:text=Added%20support%20for%20the%20theme%2Dcolor%20meta%20tag%20to%20change%20the%20tab%20bar%20background%20and%20over%2Dscroll%20area%20in%20macOS%20and%20iPadOS%2C%20and%20the%20status%20bar%20in%20iOS.">theming behavior of the title bar</a> can be changed, too.</p><p><strong>👀 Observation:</strong> Navigation controls are toggled off when there&#39;s a manifest with <code>&#34;display&#34;: &#34;standalone&#34;</code>. In all other cases, even if a manifest exists but with a different <code>&#34;display&#34;</code> mode, navigation controls are toggled on.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--kgsu98ksrqf.png" alt="Web app Settings dialog on the General tab."/> <em>Web app <strong>Settings</strong> dialog on the <strong>General</strong> tab.</em></p><p><strong>👀 Observation:</strong> There&#39;s currently a <a href="https://bugs.webkit.org/show_bug.cgi?id=257806">bug</a> where web apps don&#39;t correctly report <code>matchMedia(&#39;(display-mode: standalone)&#39;)</code>. Added to the Dock web apps think they run in a tab.</p><p>With navigation controls enabled, there&#39;s an <strong>Open in Safari</strong> icon in the upper right corner. Despite its label, it actually respects the user&#39;s default browser.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--c95fwgkg6e9.png" alt="Open in Safari icon."/></p><p><em><strong>Open in Safari</strong> icon.</em></p><p>Web pages get navigation affordances in the form of a back and forward button. There&#39;s no reload button.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--f5jaczcwma.png" alt="Back and forward buttons."/></p><p><em>Back and forward buttons.</em></p><p><strong>👀 Observation:</strong> With navigation controls toggled to off, the title of the web app sourced from the manifest is not shown. With navigation controls toggled to on, the title sourced from the <code>&lt;title&gt;</code> is shown.</p><p><strong>👀 Observation:</strong> When you right-click, there&#39;s a context menu with <strong>Reload</strong> or <strong>Back</strong> and <strong>Reload</strong>. This works independent from whether navigation controls are toggled on or off.</p><p>The <strong>Privacy</strong> tab allows the user to clear website data and links into the <strong>Privacy &amp; Security Settings</strong> of the System Settings app.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--f37x3wpvl5.png" alt="Web app Settings dialog on the Privacy tab."/></p><p><em>Web app <strong>Settings</strong> dialog on the <strong>Privacy</strong> tab.</em></p><h2 id="technical-analysis" tabindex="-1">Technical analysis <a href="#technical-analysis" aria-hidden="true">🔗</a></h2><p>(See <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1451667#c7">comment #7 of Chromium bug 1451667</a> for the full details.)</p><p>All apps are stored in <code>~/Applications/</code>. The package contents of each apps are:</p><ul><li>a <code>_CodeSignature</code> folder with code signature metadata</li><li>a <code>Resources</code> folder with just the app icons as a single <code>ApplicationIcon.icns</code> file</li><li>an <code>Info.plist</code> file.</li></ul><p><img src="https://teonbrooks.com/images/webappsonmacos--oekactyqlf.png" alt="The package contents of an app."/></p><p><em>The package contents of an app.</em></p><p>The <code>Info.plist</code> file interestingly contains an XML version of key parts of the manifest and metadata about the app.</p><pre><code><span>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span><span>&lt;!</span><span>DOCTYPE</span> <span>plist</span> <span>PUBLIC</span> <span>&#34;-//Apple//DTD PLIST 1.0//EN&#34;</span> <span>&#34;http://www.apple.com/DTDs/PropertyList-1.0.dtd&#34;</span><span>&gt;</span></span>
<span><span><span>&lt;</span>plist</span> <span>version</span><span><span>=</span><span>&#34;</span>1.0<span>&#34;</span></span><span>&gt;</span></span>
  <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleIconFile<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>ApplicationIcon<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleIdentifier<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span>
      <span>&gt;</span></span>com.apple.Safari.WebApp.svgco.de.53298B34-AF7F-4074-9CA9-1EE46B7E3E83<span><span><span>&lt;/</span>string</span>
    <span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleInfoDictionaryVersion<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>6.0<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleName<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>SVGcode<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundlePackageType<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>AAPL<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleShortVersionString<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>1.0<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleSupportedPlatforms<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>array</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>MacOSX<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>array</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleURLTypes<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>array</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleURLSchemes<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>array</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>x-webkit-app-launch<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
        <span><span><span>&lt;/</span>array</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>key</span><span>&gt;</span></span>LSHandlerRank<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>string</span><span>&gt;</span></span>None<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>array</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleVersion<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>1<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>LSMinimumSystemVersion<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>string</span><span>&gt;</span></span>14.0<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>LSTemplateApplication<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>true</span> <span>/&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>LSTemplateApplicationParameters<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>CFBundleIdentifier<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>com.apple.Safari.WebApp<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>TemplateAppUUID<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>53298B34-AF7F-4074-9CA9-1EE46B7E3E83<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>defaultarguments<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>true</span> <span>/&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>teamIdentifier<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span><span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>Manifest<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>description<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span>
        <span>&gt;</span></span>SVGcode is a Progressive Web App that lets you convert raster images
        like JPG, PNG, GIF, WebP, AVIF, etc. to vector graphics in SVG
        format.<span><span><span>&lt;/</span>string</span>
      <span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>display<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>standalone<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>icons<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>array</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>purpose<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>maskable<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>sizes<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>1024x1024<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>src<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de/favicon.png<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>type<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>image/png<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
        <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>purpose<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>any<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>sizes<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>150x150<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>src<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de/favicon.svg<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>type<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>image/svg+xml<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
        <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
        <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>purpose<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>monochrome<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>sizes<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>150x150<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>src<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de/favicon-bw.svg<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>key</span><span>&gt;</span></span>type<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
          <span><span><span>&lt;</span>string</span><span>&gt;</span></span>image/svg+xml<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
        <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
      <span><span><span>&lt;/</span>array</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>name<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>SVGcode<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>scope<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>short_name<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>SVGcode<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>start_url<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de/<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>theme_color<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>#ffffff<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>key</span><span>&gt;</span></span>WKPushBundleMetadata<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>dict</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>key</span><span>&gt;</span></span>manifestId<span><span><span>&lt;/</span>key</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>string</span><span>&gt;</span></span>https://svgco.de/<span><span><span>&lt;/</span>string</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
  <span><span><span>&lt;/</span>dict</span><span>&gt;</span></span>
<span><span><span>&lt;/</span>plist</span><span>&gt;</span></span></code></pre><p>Similar to iOS/iPadOS, web apps run in the context of a separate process called <code>Web App.app</code>, which resides in <code>/System/Volumes/Preboot/Cryptexes/App/System/Library/CoreServices/Web App.app</code>.</p><p><strong>👀 Observation:</strong> Separating Safari and Web App allows both to run independently. You can open a Web app without opening Safari, you can close Safari without all web apps closing.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--3cd4wjo74qu.png" alt="The Web App.app app in Finder."/></p><p><em>The <code>Web App.app</code> app in Finder.</em></p><p>Each web app runs as its own process of kind <code>Web</code>, accompanied by a number of helper processes of kind <code>Apple</code>. They can all be seen in Activity Monitor.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--cln1h5jyf1.png" alt="Activity Monitor showing all processes associated with a web app."/></p><p><em>Activity Monitor showing all processes associated with a web app.</em></p><h2 id="wish-list-for-apple" tabindex="-1">Wish list for Apple <a href="#wish-list-for-apple" aria-hidden="true">🔗</a></h2><p>(Also see <a href="https://docs.google.com/document/d/1chkEulpKBNQQfGIgTfQSbJhjw5mtZhvE47PF4tyTEXc/edit#">Most wanted PWA features on iOS/iPadOS/macOS Safari</a>.)</p><ul><li>Add support for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API">File System Access API</a>, so users can install apps and edit files directly, rather than opening them and then downloading a copy. [<a href="https://bugs.webkit.org/show_bug.cgi?id=231706">🧭 231706</a>]</li><li>Add support for <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/getAsFileSystemHandle"><code>DataTransferItem.getAsFileSystemHandle()</code></a>, so users can drag and drop files into web apps and edit the file. [<a href="https://bugs.webkit.org/show_bug.cgi?id=257792">🧭 257792</a>]</li><li>Add support for the <a href="https://developer.chrome.com/articles/web-share-target/">Web Share Target API</a>, so you can share data to installed web apps. [<a href="https://bugs.webkit.org/show_bug.cgi?id=194593">🧭 194593</a>]</li><li>Let web apps programmatically trigger the <strong>Add to Dock</strong> flow, since the <strong>Share</strong> icon and the <strong>File</strong> menu install ways are hard to discover. [<a href="https://bugs.webkit.org/show_bug.cgi?id=255716">🧭 255716</a>]</li><li>Add support for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window_Controls_Overlay_API">Window Controls Overlay API</a>, so the gorgeous current experience can be made even more gorgeous. [<a href="https://bugs.webkit.org/show_bug.cgi?id=257782">🧭 257782</a>]</li></ul><p><img src="https://teonbrooks.com/images/webappsonmacos--4dq3oazo75q.png" alt="Spotify native app title bar experience."/></p><p><em>Spotify native app title bar experience.</em></p><p><img src="https://teonbrooks.com/images/webappsonmacos--9bwtu16pbtv.png" alt="Spotify web app title bar experience."/></p><p><em>Spotify web app title bar experience.</em></p><ul><li>Add support for the <a href="https://github.com/WICG/file-handling/blob/main/explainer.md">File Handling API</a>, so web apps can open files from Finder by double click if the web app is registered as the default file handler for a given file type, or by right click and then <strong>Open with</strong> if the web app can handle a file type, but isn&#39;t the default file handler. [<a href="https://bugs.webkit.org/show_bug.cgi?id=257783">🧭 257783</a>]</li><li>Add support for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Launch_Handler_API">Launch Handler API</a>, so web apps can decide how they want to handle launch events. [<a href="https://bugs.webkit.org/show_bug.cgi?id=257785">🧭 257785</a>]</li><li>Reflect the cookie-copying logic on iOS/iPadOS. It&#39;s a very frustrating experience if you have to log in twice, even more so if two-factor authentication is involved. [<a href="https://bugs.webkit.org/show_bug.cgi?id=257786">🧭 257786</a>]</li><li>Allow users to turn off the <strong>Open in web app</strong> prompt.</li></ul><h2 id="recommendations-for-chrome" tabindex="-1">Recommendations for Chrome <a href="#recommendations-for-chrome" aria-hidden="true">🔗</a></h2><ul><li>Better respect macOS&#39; design paradigms. Currently web app icon handling looks not integrated and icon shapes are all over the place. This is tracked as <a href="https://crbug.com/1230792">crbug/1230792</a>. The examples below are all web apps installed via Chrome.</li></ul><p><img src="https://teonbrooks.com/images/webappsonmacos--pp6i6yqgm9l.png" alt="Web app icon shapes installed from Chrome don&#39;t respect the squircle."/></p><p><em>Web app icon shapes installed from Chrome don&#39;t respect the squircle.</em></p><ul><li>Move the extension puzzle piece and the Window Controls Overlay chevron into the three dots menu. Web apps can look so much cleaner without both in plain sight.</li></ul><p><img src="https://teonbrooks.com/images/webappsonmacos--gqdtdnumc98.png" alt="Window Controls Overlay chevron and extension puzzle piece clutter the UI of
Chrome-installed apps."/></p><p><em>Window Controls Overlay chevron and extension puzzle piece clutter the UI of Chrome-installed apps.</em></p><h2 id="new-fugu-api-needs" tabindex="-1">New Fugu API needs <a href="#new-fugu-api-needs" aria-hidden="true">🔗</a></h2><p>With Chrome and Safari now allowing web apps to be installed on macOS, it would be fantastic if installed apps could respect macOS UX guidelines and populate the system-level menu. Ideally Apple and Google engage jointly on the corresponding Project Fugu 🐡 API request tracked in <a href="https://crbug.com/1295253">crbug/1295253</a>.</p><p><img src="https://teonbrooks.com/images/webappsonmacos--gg6jy7x6mg.png" alt="Web app default menu."/></p><p><em>Web app default menu.</em></p><h2 id="conclusion" tabindex="-1">Conclusion <a href="#conclusion" aria-hidden="true">🔗</a></h2><p>Web apps in macOS Sonoma 14 Beta seamlessly integrate into the macOS experience, with no or very little visible Safari UI and with support for various operating system features. There is an enormous potential for web apps on macOS to succeed, and if Apple only works on a third of the items on my wish list, the potential is even bigger.</p><ul><li><a href="https://webkit.org/blog/14205/news-from-wwdc23-webkit-features-in-safari-17-beta/#web-apps">News from WWDC23: WebKit Features in Safari 17 beta</a></li><li><a href="https://developer.apple.com/videos/play/wwdc2023/10120/">What&#39;s new in web apps</a></li></ul></section></div>
  </body>
</html>
