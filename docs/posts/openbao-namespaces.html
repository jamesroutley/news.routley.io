<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://openbao.org/blog/namespaces-announcement/">Original</a>
    <h1>OpenBao Namespaces</h1>
    
    <div id="readability-page-1" class="page"><div id="__blog-post-container"><p>We are excited to introduce <strong>Namespaces</strong> to the OpenBao Secret Manager – a powerful feature designed to bring robust multi-tenancy and fine-grained isolation to your secrets management workflows.</p>
<h2 id="what-are-namespaces">What Are Namespaces?<a href="#what-are-namespaces" aria-label="Direct link to What Are Namespaces?" title="Direct link to What Are Namespaces?">​</a></h2>
<p>Namespaces in OpenBao are logical partitions within a single OpenBao instance, functioning as isolated environments where teams, organizations, or applications can operate independently.</p>
<p>Each namespace acts like a mini-OpenBao, with its own policies, authentication methods, secret engines, tokens, and identity groups. This architecture enables organizations to implement a true <em>OpenBao-as-a-Service</em> model, empowering internal customers to self-manage their environments securely and efficiently.</p>
<h2 id="why-namespaces">Why Namespaces?<a href="#why-namespaces" aria-label="Direct link to Why Namespaces?" title="Direct link to Why Namespaces?">​</a></h2>
<p>Strong isolation between teams, business units, or tenants becomes critical as organizations scale, especially when handling sensitive data.</p>
<p>Namespaces enable secure multi-tenancy. Each tenant (e.g., team, organisation, or application) operates within its namespace, isolated from others. Permissions are strictly scoped, preventing users from accessing or interfering with resources outside their assigned namespace.</p>
<p>Furthermore, namespaces enable the delegation of administration and promote self-service. Namespace admins can manage their own policies, secret engines, auth modes, or even quotas, without impacting other tenants, reducing the burden on cluster-level operators.</p>
<p>Finally, namespaces are one of a few planned stepping stones towards OpenBao&#39;s <a href="https://openbao.org/blog/vision-for-namespaces/" target="_blank" rel="noopener noreferrer">horizontal scalability</a> journey. OpenBao aims to allow support for large deployments with many infrequently accessed mounts, without overloading cluster nodes, while keeping a simpler cluster topology.</p>
<h2 id="how-to-use-namespaces">How to use Namespaces<a href="#how-to-use-namespaces" aria-label="Direct link to How to use Namespaces" title="Direct link to How to use Namespaces">​</a></h2>
<p>Namespaces will enable plenty of use cases and multi-tenancy scenarios. Let&#39;s consider a possible namespace setup for a SaaS Company. The platform team retains a top-level namespace for shared infrastructure. On the other hand, each tenant receives a fully isolated namespace to, e.g., model a staging system.</p>
<figure><figcaption>An example namespace structure to separate tenants and the platform team.</figcaption></figure>
<p>To use this new feature, no extra setup or configuration is required. The OpenBao CLI now features a special <code>namespace</code> sub-command, which can be used to administrate Namespaces.</p>
<p>To recreate the structure of the given example, we would do the following workflow:</p>
<ol>
<li><strong>Create Namespaces:</strong></li>
</ol>
<div><div><pre tabindex="0"><code><span><span># creates a namespace &#34;tenant&#34; on root-level</span><br/></span><span><span>$ bao namespace create tenants</span><br/></span><span><span># creates a child-namespace within tenants</span><br/></span><span><span>$ bao namespace create -ns tenants tenant-c</span><br/></span><span><span># creates a child-namespace within tenants/tenants-c</span><br/></span><span><span>$ bao namespace create -ns tenants/tenant-c prod</span><br/></span></code></pre></div></div>
<p>Note how we use the <code>-ns</code> (short form for <code>-namespace</code>) flag to create a child-namepace <code>tenant-c</code> within the namespace <code>tenant</code>. To view status and metadata, we can utilize the <code>lookup</code> command:</p>
<div><div><pre tabindex="0"><code><span><span>$ bao namespace lookup -ns tenants/tenant-c prod</span><br/></span><span><span>Key                Value</span><br/></span><span><span>---                -----</span><br/></span><span><span>custom_metadata    map[]</span><br/></span><span><span>id                 8QujqL</span><br/></span><span><span>path               tenants/tenant-c/prod/</span><br/></span><span><span>tainted            false</span><br/></span><span><span>uuid               f06d10c7-1300-6c4d-8616-c203b5fdf705</span><br/></span></code></pre></div></div>
<p>Furthermore, we can easily enumerate our hierarchy of namespaces by using the <code>scan</code> subcommand.</p>
<div><div><pre tabindex="0"><code><span><span>$ bao namespace scan</span><br/></span><span><span>Keys</span><br/></span><span><span>----</span><br/></span><span><span>tenants/</span><br/></span><span><span>tenants/tenant-c/</span><br/></span><span><span>tenants/tenant-c/prod/</span><br/></span></code></pre></div></div>
<ol start="2">
<li><strong>Create Resources within Namespaces</strong></li>
</ol>
<p>Since the introduction of Namespaces, many OpenBao commands have become namespace-aware. Similar to our example before, we can add <code>-namespace</code> or in short <code>-ns</code> to the command.</p>
<p>For demonstration purposes, let&#39;s create a KV secrets engine and populate it with a secret.</p>
<div><div><pre tabindex="0"><code><span><span>$ bao secrets enable -ns=tenants/tenant-c/prod -description=&#34;Production Secrets&#34; kv</span><br/></span><span><span>Success! Enabled the kv secrets engine at: kv/</span><br/></span></code></pre></div></div>
<p>Now that we have created a new kv secrets engine, it will be listed among our default engines:</p>
<div><div><pre tabindex="0"><code><span><span>$ bao secrets list -ns tenants/tenant-c/prod</span><br/></span><span><span>Path          Type            Accessor              Description</span><br/></span><span><span>----          ----            --------              -----------</span><br/></span><span><span>cubbyhole/    ns_cubbyhole    cubbyhole_9a4e44d3    per-token private secret storage</span><br/></span><span><span>identity/     ns_identity     identity_61c42408     identity store</span><br/></span><span><span>kv/           kv              kv_b993bbec           Production Secrets</span><br/></span><span><span>sys/          ns_system       system_ba514ba2       system endpoints used for control, policy and debugging</span><br/></span></code></pre></div></div>
<p>Let&#39;s read and write a secret...</p>
<div><div><pre tabindex="0"><code><span><span># Create the secret within namespace</span><br/></span><span><span>$ bao kv put -namespace=tenants/tenant-c/prod -mount=kv auth-token foo=bar</span><br/></span><span><span>Success! Data written to: kv/auth-token</span><br/></span><span><span></span><br/></span><span><span># Read it</span><br/></span><span><span>$ bao kv get -namespace=tenants/tenant-c/prod -mount=kv auth-token</span><br/></span><span><span>=== Data ===</span><br/></span><span><span>Key    Value</span><br/></span><span><span>---    -----</span><br/></span><span><span>foo    bar</span><br/></span></code></pre></div></div>
<ol start="3">
<li><strong>Lifecycle Operations</strong></li>
</ol>
<p>Over time, tenants will inevitably require various changes and customizations to their namespaces. Moving the administration away from the OpenBao operators means that the tenant operator can perform those changes on demand and individually. Consequently, we implemented the associated (and probably expected) lifecycle features such as:</p>
<ul>
<li>Namespace-aware policies and quotas</li>
<li>Moving or renaming secret or auth engines across namespaces</li>
<li>Locking and unlocking of namespaces</li>
</ul>
<p>While we have many plans on extending namespace capabilities in the future to make them even more helpful, we still maintain API compatibility with Vault Enterprise to enable a smooth migration path.</p>
<h2 id="looking-ahead-horizontal-scalability">Looking Ahead: Horizontal Scalability<a href="#looking-ahead-horizontal-scalability" aria-label="Direct link to Looking Ahead: Horizontal Scalability" title="Direct link to Looking Ahead: Horizontal Scalability">​</a></h2>
<p>Namespaces will give organisations the possibility to better structure and isolate secret information. However, the introduction of namespaces is just the first step. Our vision includes supporting <em>lazy loading</em> of namespaces and mounts, allowing OpenBao clusters to efficiently serve workloads with many infrequently accessed resources. This will enable even greater scalability and resilience, as nodes will no longer need to load the entire system state at once.</p>
<p><a href="https://openbao.org/blog/vision-for-namespaces/" target="_blank" rel="noopener noreferrer">Here</a> is another article that you can read more about OpenBaos&#39; scalability efforts. Sounds interesting? Reach out to the project via <a href="https://github.com/orgs/openbao/discussions" target="_blank" rel="noopener noreferrer">Github</a>, <a href="https://github.com/openbao#contact" target="_blank" rel="noopener noreferrer">Matrix</a>, or <a href="https://lists.lfedge.org/g/openbao" target="_blank" rel="noopener noreferrer">Mailinglist</a> if you want to support our work in the areas of namespaces or scalability.</p>
<h2 id="get-started">Get Started<a href="#get-started" aria-label="Direct link to Get Started" title="Direct link to Get Started">​</a></h2>
<p>We just carved a beta release of <a href="https://github.com/openbao/openbao/releases/tag/v2.3.0-beta20250528" target="_blank" rel="noopener noreferrer">OpenBao 2.3</a>. We encourage you to explore the new features and share your feedback as we continue to improve OpenBao as a secure, scalable, and self-service secrets management solution.</p>
<p>Looking ahead, the namespaces working group is actively exploring improvements such as namespace sealing, non-hierarchical namespaces, per-namespace storage backends, and plugin isolation. These efforts aim to make namespace usage more flexible, efficient, and secure in future releases.</p>
<p>We welcome contributions from individuals and organizations, whether helping to improve documentation, clarifying existing content, or contributing to upcoming features. Your input plays a vital role in shaping the future of OpenBao.</p></div></div>
  </body>
</html>
