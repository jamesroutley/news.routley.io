<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/davidgiven/cpm65">Original</a>
    <h1>Cpm65: CP/M for the 6502</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h2 dir="auto"><a id="user-content-what" aria-hidden="true" href="#what"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What?</h2>
<p dir="auto">This is a native port of Digital Research&#39;s seminal 1977 operating system CP/M
to the 6502. So far it runs on:</p>
<ul dir="auto">
<li>BBC Micro (and Master, and Tube)</li>
<li>Commodore 64</li>
</ul>
<p dir="auto">Unlike the original, it supports relocatable binaries, so allowing unmodified
binaries to run on any system: this is necessary as 6502 systems tend to be
much less standardised than 8080 and Z80 systems. On the BBC Micro in mode 7
you get a 21kB TPA, on the Master you get about 25kB, and on the C64 you get
46kB. A BBC Tube system will give you just under 57kB, which is nice.</p>
<p dir="auto">Currently you can cross-assemble programs from a PC, as well as a working C
toolchain with llvm-mos. I plan on finding an assembler and editor which will
run natively for full native development support.</p>
<p dir="auto">No, it won&#39;t let you run 8080 programs on the 6502!</p>
<p><a href="https://github.com/davidgiven/cpm65/blob/master/doc/bbcmicro.png"><img src="https://github.com/davidgiven/cpm65/raw/master/doc/bbcmicro.png" alt="CP/M-65 running on a BBC Micro"/></a>
<a href="https://github.com/davidgiven/cpm65/blob/master/doc/c64.png"><img src="https://github.com/davidgiven/cpm65/raw/master/doc/c64.png" alt="CP/M-65 running on a Commodore 64"/></a>
</p>
<h2 dir="auto"><a id="user-content-why" aria-hidden="true" href="#why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why?</h2>
<p dir="auto">Why not?</p>
<h2 dir="auto"><a id="user-content-where" aria-hidden="true" href="#where"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Where?</h2>
<p dir="auto">It&#39;s <a href="https://github.com/davidgiven/cpm65">open source on GitHub!</a></p>
<h2 dir="auto"><a id="user-content-how" aria-hidden="true" href="#how"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How?</h2>
<p dir="auto">Currently you need a bit of a mess of toolchains: cc65, cc1541, and <a href="https://github.com/davidgiven/llvm-mos-sdk">a patched
version of llvm-mos</a>. Once done,
you should just be able to run the Makefile and you&#39;ll get bootable disk images
for the Commodore 64 (with 1541 drive) and BBC Micro (producing a 200kB SSSD
DFS disk).</p>
<p dir="auto">BBC Micro notes:</p>
<ul dir="auto">
<li>
<p dir="auto">it&#39;ll autodetect the amount of available memory. If you&#39;re on a Master or
Tube system, I&#39;d suggest making sure you&#39;re in mode 0 or 3 before running.
On a BBC Micro... well, it <em>will</em> run in mode 0, but you&#39;ll only get a
2.5kB TPA! I suggest mode 7.</p>
</li>
<li>
<p dir="auto">the CP/M file system is stored in a big file (called cpmfs). This will
expand up to the size defined in diskdefs: currently, 192kB (the largest
that will fit on a SSSD disk). All disk access is done through MOS so you
should be able to use a ramdisk, hard disk, Econet, ADFS, VDFS, etc. If so,
you&#39;ll want to define your own disk format and adjust the drive definition
in the BIOS to get more space.</p>
</li>
</ul>
<p dir="auto">Commodore 64 notes:</p>
<ul dir="auto">
<li>
<p dir="auto">it&#39;s excruciatingly slow as it uses normal 1541 disk accesses at 300 bytes
per second. Everything works, but you won&#39;t enjoy it. At some point I want
to add a fastloader.</p>
</li>
<li>
<p dir="auto">the disk image produced is a hybrid of a CP/M file system and a CBMDOS file
system, which can be accessed as either. The disk structures used by the
other file system are hidden. You get about 170kB on a normal disk.</p>
</li>
<li>
<p dir="auto">disk accesses are done using direct block access, so it <em>won&#39;t</em> work on
anything other than a 1541. Sorry.</p>
</li>
</ul>
<p dir="auto">Supported programs:</p>
<p dir="auto">You don&#39;t get a lot. As transients, you get <code>DUMP</code>, <code>STAT</code> and <code>SUBMIT</code>.
There&#39;s also a <code>BITMAP</code>, which is for debugging and I&#39;m going to remove it. I&#39;d
love more --- send me pull requests! The build system supports cc65 assembler
and llvm-mos C programs.</p>
<p dir="auto">In the CCP, you get the usual <code>DIR</code>, <code>ERA</code>, <code>TYPE</code> and <code>USER</code>. There is no
<code>SAVE</code> as on the relocatable CP/M-65 system, assembling images in memory is of
questionable utility, but there&#39;s a new <code>FREE</code> command which shows memory
usage.</p>
<p dir="auto">Pokey the Penguin loves to read your <a href="https://github.com/davidgiven/cpm65/compare">pull
requests</a>!</p>
<h2 dir="auto"><a id="user-content-who" aria-hidden="true" href="#who"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Who?</h2>
<p dir="auto">You may contact me at <a href="mailto:dg@cowlark.com">dg@cowlark.com</a>, or visit my website at
<a href="http://www.cowlark.com" rel="nofollow">http://www.cowlark.com</a>.  There may or may not be anything interesting there.
The CP/M-65 project was designed and written by me, David Given.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Everything here so far is Â© 2022 David Given, and is licensed under the
two-clause BSD open source license. Please see <a href="https://github.com/davidgiven/cpm65/blob/master/LICENSE">LICENSE</a> for the full
text. The tl;dr is: you can do what you like with it provided you don&#39;t claim
you wrote it.</p>
</article>
          </div></div>
  </body>
</html>
