<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/commercial-emacs/commercial-emacs">Original</a>
    <h1>Commercial-Emacs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><blockquote>
<p dir="auto">Talking never moves anything in Emacs, never did, never will.</p>
<p dir="auto">— 2021 Maintainer of GNU Emacs, who then proceeded to keep talking.</p>
</blockquote>
<h2 dir="auto"><a id="user-content-frequently-anticipated-questions" aria-hidden="true" href="#frequently-anticipated-questions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Frequently Anticipated Questions</h2>
<h3 dir="auto"><a id="user-content-why" aria-hidden="true" href="#why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why?</h3>
<p dir="auto">This is the oft ideated, never sublimated &#34;forge&#34; repository for
emacs.  As it is hosted on a site using
<a href="https://www.gnu.org/philosophy/categories.en.html" rel="nofollow">non-free</a>
software, the work herein is not the official GNU Emacs source, and
does not entreat the FSF to enforce its license.</p>
<h3 dir="auto"><a id="user-content-how-to-build" aria-hidden="true" href="#how-to-build"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build?</h3>
<div data-snippet-clipboard-copy-content="git clone https://github.com/commercial-emacs/commercial-emacs.git
cd commercial-emacs
./autogen.sh
./configure --prefix=$HOME/.local
make -j4
src/emacs"><pre><code>git clone https://github.com/commercial-emacs/commercial-emacs.git
cd commercial-emacs
./autogen.sh
./configure --prefix=$HOME/.local
make -j4
src/emacs
</code></pre></div>
<p dir="auto">The <code>make</code> logic remains broken in the sense that frequently,
incompatible artifacts from a previous build do not get rebuilt.
Preceding the above with,</p>

<p dir="auto">rebuilds from scratch.</p>
<h3 dir="auto"><a id="user-content-how-often-are-you-merging-commits-from-gnu" aria-hidden="true" href="#how-often-are-you-merging-commits-from-gnu"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How often are you merging commits from GNU?</h3>
<p dir="auto">Roughly every hour.</p>
<h3 dir="auto"><a id="user-content-how-has-the-code-diverged-thus-far" aria-hidden="true" href="#how-has-the-code-diverged-thus-far"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How has the code diverged thus far?</h3>
<ul dir="auto">
<li>Performant long lines.</li>
<li><a href="#tree-sitter">Tree-sitter font highlighting</a>. <sup id="user-content-a1"><a href="#f1">1</a></sup></li>
<li>Gnus is rewritten to be non-blocking.</li>
<li>Process management is rewritten.</li>
<li>Tree-sitter replacement of ersatz PPSS syntactic parser.</li>
<li><a href="#moving-collector">Moving garbage collector rudiments</a>.</li>
</ul>
<h3 dir="auto"><a id="user-content-how-can-i-try-tree-sitter-highlighting" aria-hidden="true" href="#how-can-i-try-tree-sitter-highlighting"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-tree-sitter"></a>How can I try tree-sitter highlighting?</h3>
<p dir="auto">Install Rust library:</p>
<div data-snippet-clipboard-copy-content="git clone --depth 1 --branch 0.6.3alpha5 \
  https://github.com/commercial-emacs/tree-sitter.git
make -C tree-sitter install
pkg-config --exact-version=0.6.3alpha5 tree-sitter || echo not found"><pre>git clone --depth 1 --branch 0.6.3alpha5 \
  https://github.com/commercial-emacs/tree-sitter.git
make -C tree-sitter install
pkg-config --exact-version=0.6.3alpha5 tree-sitter <span>||</span> <span>echo</span> not found</pre></div>
<p dir="auto">Then build emacs:</p>
<div data-snippet-clipboard-copy-content="./autogen.sh
./configure --prefix=$HOME/.local --with-tree-sitter
make -j4
ldd src/emacs | grep -q tree-sitter || echo not found
make test/src/tree-sitter-tests
src/emacs -Q --eval \
  &#34;(custom-set-variables &#39;(font-lock-support-mode &#39;tree-sitter-lock-mode))&#34; \
  --visit src/xdisp.c"><pre>./autogen.sh
./configure --prefix=<span>$HOME</span>/.local --with-tree-sitter
make -j4
ldd src/emacs <span>|</span> grep -q tree-sitter <span>||</span> <span>echo</span> not found
make test/src/tree-sitter-tests
src/emacs -Q --eval \
  <span><span>&#34;</span>(custom-set-variables &#39;(font-lock-support-mode &#39;tree-sitter-lock-mode))<span>&#34;</span></span> \
  --visit src/xdisp.c</pre></div>
<h3 dir="auto"><a id="user-content-what-is-a-moving-garbage-collector" aria-hidden="true" href="#what-is-a-moving-garbage-collector"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a name="user-content-moving-collector"></a>What is a moving garbage collector?</h3>
<p dir="auto">Moving collectors relocate Lisp values in memory, in contrast to the
GNU Emacs collector, which upon allocating say a cons cell, will let
it remain at its birth address in perpetuity.</p>
<p dir="auto">GNU Emacs&#39;s non-moving collector has been unfairly maligned as
antiquated, generally by undergraduates who just implemented a toy
moving collector for their PL class.  They might be surprised to know
that the Boehm paper on which Emacs&#39;s collector is based was published
twenty years <em>after</em> Cheney&#39;s paper on moving collection.</p>
<p dir="auto">But one thing moving collectors can do that non-moving ones can&#39;t is
<em>generational</em> sequestration, that is, keeping the youngest cohort of
Lisp values separated from older ones.  This allows fast, intermediary
cycles which only scan the &#34;nursery&#34; generation (the rationale being
old objects are very likely to still be referenced).  A non-moving
collector must traverse the full set on each cycle since its
allocations are interleaved.  This is why Emacs bros are as eager to
raise collection thresholds as motherboard jockeys are to overclock
their BIOS.</p>
<h3 dir="auto"><a id="user-content-isnt-this-xemacs-all-over-again" aria-hidden="true" href="#isnt-this-xemacs-all-over-again"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Isn&#39;t this xemacs all over again?</h3>
<p dir="auto">Ah, but if it could reach those heights.  If by some miracle it did,
the choices for the FSF are the same as before: enlist RMS to embark
on a coding frenzy that achieves feature parity, grant myself commit
rights, or continue not noticing me.  If my history of user
acquisition is any indication, the last outcome is most likely.</p>
<p dir="auto"><b id="user-content-f1">[1]</b> By Yuan Fu and oldosfan. <a href="#a1"><g-emoji alias="leftwards_arrow_with_hook" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/21a9.png">↩</g-emoji></a></p>
</article>
          </div></div>
  </body>
</html>
