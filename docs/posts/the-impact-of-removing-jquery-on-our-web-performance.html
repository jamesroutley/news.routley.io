<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://insidegovuk.blog.gov.uk/2022/08/15/the-impact-of-removing-jquery-on-our-web-performance/">Original</a>
    <h1>The impact of removing jQuery on our web performance</h1>
    
    <div id="readability-page-1" class="page"><p>https://insidegovuk.blog.gov.uk/2022/08/15/the-impact-of-removing-jquery-on-our-web-performance/</p><div>
			<p><img src="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image4-620x413.jpg" alt="2 women at a desk in an office" width="620" height="413" srcset="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image4-620x413.jpg 620w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image4-310x207.jpg 310w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image4-768x512.jpg 768w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image4.jpg 900w" sizes="(max-width: 620px) 100vw, 620px"/></p>
<p>In the first blog post we covered <a href="https://insidegovuk.blog.gov.uk/2022/08/11/how-and-why-we-removed-jquery-from-gov-uk/">&#34;How and why we removed jQuery from GOV.UK&#34;</a>, let’s now turn our attention to what performance difference it has made for users. Please read that blog post before this one.</p>
<h2>Image data versus compressed data</h2>
<p><span>As mentioned previously, the jQuery library was </span><i><span>only </span></i><span>32 </span><span>Kb</span><span> of compressed and minified (when white space removed from code and repeated words substituted) JavaScript.</span> Now I know what you may be thinking, that doesn’t sound like a lot of data, especially compared to images which can be multiple megabytes in size. But when it’s on every page, from a web performance perspective, it equates to a lot of data. It’s also worth mentioning that there’s a big difference between image data and compressed JavaScript data. Browsers and devices handle the 2 data types very differently.</p>
<p>JavaScript is known as a “render-blocking” resource. This means when a browser encounters JavaScript it goes through a multistep process which involves it being downloaded, then uncompressed, before it’s finally parsed and executed. This all happens within a device&#39;s available Central Processing Unit (CPU) and memory. These tasks can be very slow and energy intensive depending on the device and connection.</p>
<p>Unfortunately, during this time, the actual drawing of pixels to the device&#39;s screen has to be paused until the execution of the JavaScript is completed. Upon completion the browser can then continue to paint pixels for the rest of the page.</p>
<p>Images and image data aren&#39;t “render-blocking”, meaning parts of the webpage can be painted to the page while additional image data is being downloaded in parallel. Therefore, a 32 Kb image has much less of a performance impact than 32 Kb of compressed JavaScript. This is especially true for users on low specification devices that are generally slower, older and less expensive.</p>
<p>We will focus on these users for the rest of the blog post.</p>
<h2>Helping users with low specification devices</h2>
<p>Lower specification devices are often considered to be older laptops and tablets, or ‘budget’ mobile devices (often Android devices on a limited data plan).</p>
<p>Since these users have the slowest devices, they’ll need the most help to make sure their visit to GOV.UK is as fast, efficient and as cheap as possible. Last October, <a href="https://www.ofcom.org.uk/__data/assets/pdf_file/0023/238361/online-nation-2022-report.pdf">Ofcom estimated 2 million households were &#34;experiencing affordability issues with either their fixed broadband and/or smartphone&#34;</a>, so our work here has the potential to reduce their internet costs.</p>
<p><img loading="lazy" src="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1-620x266.png" alt="Image of a load time distribution graph from Real User Monitoring data for GOV.UK over the month of May 2022, showing our 75th percentile load time is 0.824 seconds and that some users see a load time as big as 2.35 seconds." width="620" height="266" srcset="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1-620x266.png 620w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1-310x133.png 310w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1-768x329.png 768w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1-1536x659.png 1536w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image3-1.png 1999w" sizes="(max-width: 620px) 100vw, 620px"/></p>
<p>At this point, it’s worth mentioning that the anonymous <a href="https://insidegovuk.blog.gov.uk/2022/06/13/what-weve-learned-from-one-year-of-real-user-monitoring-data-on-gov-uk/">Real User Monitoring (RUM) data</a> we collect from user devices shows that GOV.UK is already a very quick website. For the majority of users, the site loads in less than 1 second. But the distribution graph (seen above) also shows that there are some users that see a page load time of up to 2.35 seconds. Examining these users’ RUM performance data more closely, we see:</p>
<ul>
<li>75% of users are based in the UK</li>
<li>35% of users are on an Android device</li>
<li>it’s taking almost 2 seconds for the first page pixels to display on their screens (this is called the start render metric)</li>
</ul>
<p>From the statistics above, we can assume it’s highly likely that many of these Android users are on low specification devices where CPU speed and memory capacity is limited.</p>
<p>With that assumption in mind, what performance impact will removing 32 kB of compressed JavaScript have?</p>
<h2>Testing the impact</h2>
<p>This is where our “lab-based” performance testing is very useful. We run tests every day on GOV.UK pages using specific simulated devices and connection speeds. Because we can repeat these tests every day, it allows us to monitor what the changes we are making to the site are doing for real users visiting GOV.UK.</p>
<p>For example, for a simulated user visiting the Universal Credit start page on a low specification device and 2G mobile connection, we can clearly see from the graph where the jQuery change was made.</p>
<p><img loading="lazy" src="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-620x289.png" alt="a graph of page render time performance over the past 3 months for the Universal Credit start page. In the graph, the performance difference can be clearly seen as a reduction in time when the jQuery change was made." width="620" height="289" srcset="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-620x289.png 620w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-310x144.png 310w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-768x358.png 768w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-1536x715.png 1536w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1-750x350.png 750w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image1.png 1999w" sizes="(max-width: 620px) 100vw, 620px"/></p>
<p>The reason why the Universal Credit page was chosen is because it’s the most visited page on GOV.UK according to our analytics data, so it is important that it loads quickly for all users, no matter what device or connection they are using. As the graph above shows, the time it took for the page to completely draw the pixels to the screen (visually complete) dropped from 11.3 seconds to 9.4 seconds (a 17% improvement).</p>
<p>As well as visually complete Improvements, page load time improvements were also clearly seen. The graph below shows the time until the page has fully loaded dropped from 20.42 seconds to 18.75 seconds (an 8% improvement) and total page load time dropped from 19.44 seconds to 17.75 seconds (a 9% improvement).</p>
<p><img loading="lazy" src="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1-620x266.png" alt="a graph of page render time performance over the past 3 months for the Universal Credit start page. In the graph, the performance difference can be clearly seen as a reduction in time when the jQuery change was made." width="620" height="266" srcset="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1-620x266.png 620w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1-310x133.png 310w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1-768x329.png 768w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1-1536x659.png 1536w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image2-1.png 1999w" sizes="(max-width: 620px) 100vw, 620px"/></p>
<p>Finally, we also see a significant improvement in the page&#39;s interactive performance metrics, meaning a user can interact with the page a lot sooner. Interactivity metrics are important to users as they show when the user can first interact with the page. Being able to interact with a page gives users confidence that the page is still working.</p>
<p>The graph below shows time to interactivity dropped from 11.34 seconds to 9.43 seconds (an improvement of 17%), and the devices First CPU idle dropped from 11.32 seconds to 9.42 seconds (an improvement of 17%).</p>
<p><img loading="lazy" src="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1-620x266.png" alt="a graph of interactive performance metrics over the past 3 months for the Universal Credit start page. In the graph, the performance difference can be clearly seen as a reduction in times when the jQuery change was made." width="620" height="266" srcset="https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1-620x266.png 620w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1-310x133.png 310w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1-768x329.png 768w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1-1536x659.png 1536w, https://insidegovuk.blog.gov.uk/wp-content/uploads/sites/24/2022/08/image5-1.png 1999w" sizes="(max-width: 620px) 100vw, 620px"/></p>
<h2>Improving GOV.UK for everyone</h2>
<p>Improving web performance is often made up of lots of smaller incremental changes over time. So it’s been great to see support for this change from the <a href="https://web.dev/gov-uk-drops-jquery/">wider web performance community</a>.</p>
<p>As you can see from our performance monitoring results above, we have improved page performance for many users who struggle on low specification devices and slow connections, even though GOV.UK is already a very quick website for the majority of users. It may sound like 32 kb of JavaScript is nothing on today&#39;s modern web with quick devices and fast broadband connections. But for a certain cohort of users, it makes a big difference to how they experience GOV.UK.</p>

        </div></div>
  </body>
</html>
