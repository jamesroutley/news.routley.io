<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/">Original</a>
    <h1>Adding a ROM switcher to the HR-16</h1>
    
    <div id="readability-page-1" class="page"><div><p><i><a href="https://blog.jacobvosmaer.nl/">Jacob Vosmaer&#39;s blog</a></i></p>

<p>2023-11-22</p>

<p>A fun little hack to the HR-16 drum machine I did a while back.</p>

<h2>The Alesis HR-16 and HR-16B</h2>

<p>The <a href="https://www.muzines.co.uk/articles/alesis-hr16-drum-machine-and-mmt8-midi-recorder/2078">Alesis HR-16</a> is a low-cost drum computer from 1987. Two years later Alesis released a new model called the HR-16B with different sounds. The HR-16B looks different because it&#39;s made of black plastic instead of grey, but the hardware on the inside was identical to the first model.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/alesis_hr16.jpg"/></p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/alesis_hr16b.jpg"/></p>

<p><em>Image source: <a href="https://www.vintagesynth.com/alesis/hr-16">Vintage Synth Explorer</a></em></p>

<p>Fancier drum machines of the time had individual output sockets for each of their drum sounds. The idea was that producers were used to recording a drum kit with many microphones going through various processing gear and into a mixer. The individual outputs of fancy drum machines are meant like virtual microphones, allowing you to tailor the drum sounds. For example, the <a href="https://www.youtube.com/watch?v=SHFbJKKze4E">raw sounds</a> of the <a href="https://www.muzines.co.uk/articles/yamaha-rx5/1956">Yamaha RX5</a> sound disappointingly plain when compared to how they are used in <a href="https://youtu.be/MZjAantupsA?feature=shared&amp;t=15">Cameo&#39;s Word Up</a>. Because the RX5 has individual outputs, Cameo were able to make the drum machine sound bigger and more interesting.</p>

<p>Not so with the HR-16, because it&#39;s a low cost machine. The drum sounds in the machine have their sound effects baked in. This saves costs (the hardware is simpler) and it makes sense for the intended market: bedroom producers probably don&#39;t have a wall of studio rack gear at their proposal to beef up their drum sounds.</p>

<p>I love these baked in effects because it makes the machine sound extra dated. Here is an example snippet of music I made which proudly uses the HR-16. Note how &#34;huge&#34; the snare drum is right out of the gate. The orchestra hits are from the JV-1010, not the HR-16.</p>



<p>When I got my own HR-16 and found out how much I liked the sound I wanted to use the HR-16B sounds  too.</p>

<h2>ROM chips</h2>

<p>Asides from the color of the plastic, to my knowledge the only difference between the HR-16 and HR-16B is the software and sample data. These are stored in socketed ROM IC&#39;s which means that you can swap them without having to do any soldering.</p>

<p>These ROMs are designed to be used on an 8-bit parallel data bus. To access one byte (8 bits) of data you must write an address to its address pins and enable the chip for reading. The number of address pins depends on the storage capacity.
The operating system of the HR-16, for example, is stored on a <a href="https://en.wikipedia.org/wiki/EPROM#EPROM_generations,_sizes_and_types">27C256</a> IC. Its address pins are numbered A0 to A14, meaning it has 15 of them, which tells us that its capacity is <code>2^15 = 32768</code> bytes. If the CPU wants to read the byte at address 0x10 in the ROM, it would write <code>000000000010000</code> (0x10 in binary) to the address bus and then read the corresponding 8 bits of data from the data bus.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/27c256.png"/></p>

<p>The sample data is stored across two 27C040, each of which hold 512 kB of data. The 27C040 works the same as the 27C256 but with more address pins.</p>

<h2>ROM switching</h2>

<p>One size up from the 27C256 is the 27C512 (64 kB). You can see the pinout below.
Note how both chips have 28 pins. There is one extra address pin on the 27C512, A15. On the 27C256 that pin is called VPP and it&#39;s used when programming the memory contents. In the HR-16 that pin is not connected to anything (&#34;floating&#34;) because the chip is only used for reading, not writing.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/27c512.png"/></p>

<p>This means that the 27C512 is <em>almost</em> compatible with circuits designed to read from a 27C256. The only thing to take care of is that A15 is tied either high (5V) or low (0V).</p>

<p>What is more, because the 27C512 is twice the size of the 27C256, one 27C512 chip could hold the OS of both the HR-16 and the HR-16B. If we tie A15 to 0V then the HR-16 &#34;sees&#34; one half of the chip. If we tie A15 to 5V then the HR-16 sees the other half.</p>

<p>Using our example from before, if the CPU wants to read the byte at 0x10, and we control the MSB, then what the CPU sees is either the byte at <code>0000000000010000</code> (MSB set to 0 by us) or  <code>1000000000010000</code> (MSB set to 1 by us).</p>

<p>The same pattern applies to the 27C040 sample data ROMs. Those chips have 32 pins, and so does the next size up 27C080. The MSB address pin of the 27C080 is unused on the 27C040.</p>

<p>This then leads to how I implemented the switching mechanism: I bent the most significant bit (MSB) address pin of each ROM out of its socket so that I can control what voltage it sees.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/closeup.jpg"/></p>

<p>I then joined all these MSB address wires together and tied them to the middle leg of a <a href="https://www.littelfuse.com/technical-resources/technical-centers/commercial-vehicle-technical-center/poles-and-throws.aspx">single pole double throw</a> switch. I connected the outer legs to 0V and 5V which signify 0 and 1 on the address bus respectively. Here you can see the bigger picture.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/IMG_1668.jpg"/></p>

<p>I drilled a small hole in the plastic of the HR-16 enclosure. I put it out of sight on the bottom half of the case.</p>

<p><img src="https://blog.jacobvosmaer.nl/0016-hr-16-rom-switcher/switch.jpg"/></p>

<p>And it works! I can flip the switch while the machine is off and it will start up as either an HR-16 or an HR-16B. Fortunately, the OS is similar enough between the two that they can read eachother&#39;s battery-backed RAM data. I don&#39;t have to wipe the RAM every time I switch the OS + sample ROMS.</p>

<p>I used a TL866  with the open source <a href="https://gitlab.com/DavidGriffith/minipro/">minipro</a> control software to burn the data onto the chips.</p>

<h2>Other possibilities</h2>

<p>It is possible to mess up old drum machines beyond recognition through techniques called <a href="https://www.circuitbenders.co.uk/drummachine/HR16.html">&#34;circuit bending&#34;</a>. I think it sounds lovely but I would have to buy a second HR-16 for that because I&#39;m not sure the process is reversible.</p>

<h2>Conclusion</h2>

<p>This was a very simple hack made possible by the compatible pin layouts on both the OS and the sample ROMs. It was fun to figure out this was possible and now I have two Alesis drum machines in one!</p>
<p>Tags:
<a href="https://blog.jacobvosmaer.nl/music.html">music</a>
<a href="https://blog.jacobvosmaer.nl/diy.html">diy</a>
</p><details><summary>Edit history</summary><table>
<tbody><tr><td>2023-12-26</td><td></td><td>0016: add HR-16B picture</td></tr>
<tr><td>2023-12-23</td><td></td><td>Add 0016 hr 16 roms</td></tr>
</tbody></table></details><p><a href="https://blog.jacobvosmaer.nl/">Back</a></p>
</div></div>
  </body>
</html>
