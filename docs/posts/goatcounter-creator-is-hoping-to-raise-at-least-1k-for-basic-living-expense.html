<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/arp242/goatcounter/releases/tag/v2.5.0">Original</a>
    <h1>GoatCounter creator is hoping to raise at least â‚¬1k for basic living expense</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>If you&#39;re enjoying GoatCounter and haven&#39;t donated yet, then now would be a good time.</p>
<p>In short, I&#39;m out of a job and out of money, and I&#39;m hoping to raise at least â‚¬1,000 for basic living expenses so I can (hopefully) sort things over the next month or two. While this seems a lot, there&#39;s a few thousand users who logged in during the last month (plus an unknown number of people self hosting); if everyone would make a (one-time!) donation of a few dimes then that would basically cover things.</p>
<p>As you may have heard, the job market has been been pretty brutal over the last year, and finding a job has been a near full-time occupation for months â€“ also turns out that CV with mainly software development is not all that useful for lot of things outside software dev :-/</p>
<p>I really hate to Jimmy Wales people about this and it&#39;s rather embarrassing. Thus far donations have more or less covered hosting costs and I&#39;m okay with that as such and wouldn&#39;t necessarily expect more, but it would make a huge difference.</p>
<p>Oh, and if you know if any jobs I might be a good fit for then now might be a good time to let me know about too ðŸ˜…</p>
<p><a href="https://github.com/sponsors/arp242">https://github.com/sponsors/arp242</a></p>
<p>Many thanks,</p>
<hr/>
<p>And then now for the actual changelog:</p>
<p>This release requires Go 1.21.</p>
<p>Features:</p>
<ul>
<li>
<p>Quite a few tables are rewritten to a more efficient format. For small to medium instances this will take a few minutes at the most, but if you have very large instances this may take a few hours. It also requires enough free disk space to rewrite the <code>hits</code> table.</p>
<p>If you want to run steps manually then you can view the migration with:</p>
<div data-snippet-clipboard-copy-content="% goatcounter db migrate -show 2023-05-16-1-hits"><pre><code>% goatcounter db migrate -show 2023-05-16-1-hits
</code></pre></div>
<p>Or if you use PostgreSQL:</p>
<div data-snippet-clipboard-copy-content="% goatcounter db migrate -show -db postgresql+dbname=goatcounter 2023-05-16-1-hits"><pre><code>% goatcounter db migrate -show -db postgresql+dbname=goatcounter 2023-05-16-1-hits
</code></pre></div>
</li>
<li>
<p>The <code>User-Agent</code> header is no longer stored; only the browser and system parsed out of there. It&#39;s pretty reliable, and especially mobile browser User-Agents are ridiculously unique. It was always stored only &#34;in case the detection got it horribly wrong&#34;, but this has never been needed.</p>
</li>
<li>
<p>Add <code>proxy</code> option in <code>serve -tls</code> flag,  to give a hint that a secure connection will be used, so we know what value to use for the cookie secure/samesite flags.</p>
</li>
<li>
<p>Add <em>experimental</em> &#34;dark mode&#34;; this needs to be enabled explicitly in the user settings. I need help to make this decent:</p>
</li>
<li>
<p>Show difference of pageviews compared to previous period on the dashboard.</p>
</li>
<li>
<p>Make setup of a new installation a bit easier: instead of telling people to use the CLI, display a form when the database is 100% empty.</p>
</li>
</ul>
<p>Fixes:</p>
<ul>
<li>
<p>Collecting stats was broken when &#34;sessions&#34; was disabled in the site settings.</p>
</li>
<li>
<p>Use navigator.sendBeacon by default in count.js. This will allow using click events on things like PDF files and external URLs:</p>
<div data-snippet-clipboard-copy-content="&lt;a href=&#34;file.pdf&#34; data-goatcounter-event=&#34;file.pdf&#34;&gt;
&lt;a href=&#34;http://example.com&#34; data-goatcounter-event=&#34;ext-example.com&#34;&gt;"><pre><code>&lt;a href=&#34;file.pdf&#34; data-goatcounter-event=&#34;file.pdf&#34;&gt;
&lt;a href=&#34;http://example.com&#34; data-goatcounter-event=&#34;ext-example.com&#34;&gt;
</code></pre></div>
</li>
<li>
<p>Sometimes the order of pages was wrong when using PostgreSQL.</p>
</li>
<li>
<p>Few smaller bugfixes.</p>
</li>
</ul></div></div>
  </body>
</html>
