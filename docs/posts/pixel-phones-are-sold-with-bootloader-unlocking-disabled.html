<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.fitzsim.org/blog/?p=545">Original</a>
    <h1>Pixel phones are sold with bootloader unlocking disabled</h1>
    
    <div id="readability-page-1" class="page"><article id="post-545">
		
	
	<div>
		<p><em><strong>Request to Google</strong>: ungrey the “OEM unlocking” toggle in the factory, before shipping store.google.com devices to customers. Do not make your customers connect the device to the Internet before they are allowed to install the operating system they want.</em></p>
<p>My wife had a requirement to use Android<sup id="sup-1"><a href="#footnote-1">1</a></sup>, and she wanted to run GrapheneOS; I experimented with other devices and ROMs to ensure the specific application she needed would run on GrapheneOS.</p>
<p>As part of my research, I read the GrapheneOS installation guide<sup id="sup-2"><a href="#footnote-2">2</a></sup>, which stated:</p>
<p><em>Enabling OEM unlocking</em></p>
<p><em>OEM unlocking needs to be enabled from within the operating system.</em></p>
<p><em>Enable the developer options menu by going to Settings &gt; About phone and repeatedly pressing the build number menu entry until developer mode is enabled.</em></p>
<p><em>Next, go to Settings &gt; System &gt; Developer options and toggle on the ‘OEM unlocking’ setting. On device model variants (SKUs) which support being sold as locked devices by carriers, enabling ‘OEM unlocking’ requires internet access so that the stock OS can check if the device was sold as locked by a carrier.”</em></p>
<p>None of the many many YouTube videos I watched about bootloader unlocking covered whether or not you need Internet connectivity. Nor did any of Google’s official documentation<sup id="sup-3"><a href="#footnote-3">3</a></sup>. GrapheneOS documentation is the only place on the Internet that documents this requirement, so, well done GrapheneOS documentation team!</p>
<p>GrapheneOS only supports recent Google Pixel phones. Those phones are nice hardware<sup id="sup-4"><a href="#footnote-4">4</a></sup>, and I can easily (so I thought) install a different operating system, so I decided to buy one. To be as future-proof as possible, I bought a Pixel 7 Pro from store.google.com (Canada).</p>
<p>I thought (based on the aforementioned GrapheneOS docs) that the device model variant I bought, being sold “unlocked”<sup id="sup-7.1"><a href="#footnote-7">7</a></sup> by Google, would not need the Internet connection. <strong>NOPE</strong>; Google sold it to me with “OEM unlocking” greyed out:</p>
<p><img src="https://www.fitzsim.org/screenshots/google-pixel-7-pro-sold-oem-locked.png" alt="The Pixel 7 Pro Developer options settings screen, showing the OEM unlocking slider greyed out, with the label Connect to the internet or contact your carrier" width="400"/></p>
<p>I consider this a customer-hostile practice. I should not have to connect a piece of hardware to the Internet, even once, to use all of its features. If I hadn’t connected the Pixel 7 Pro to the Internet, then “OEM unlocking” would have stayed greyed out, thus I would not have been able to unlock the bootloader, thus I would not have been able to install GrapheneOS<sup id="sup-5"><a href="#footnote-5">5</a></sup>.</p>
<p>Keep in mind that I bought this phone full price<sup id="sup-6"><a href="#footnote-6">6</a></sup> from store.google.com, where it was advertised right in the FAQ as an “unlocked smartphone”<sup id="sup-7.2"><a href="#footnote-7">7</a></sup>. There is zero carrier involvement here, so carriers cannot be blamed for this policy. Also, I paid full price for the phone, so this is not a case of “if you don’t pay for the product, you ARE the product”.</p>
<p>I probably should have returned the device for a refund. Instead, I set up a network debugging environment to see what activity happens when I connect the Pixel 7 Pro to the Internet.</p>
<p>By tailing some log files and watching them closely, I was able to determine that the final site accessed just before “OEM unlocking” goes from greyed to ungreyed is “<strong>afwprovisioning-pa.googleapis.com</strong>“. Here is the video of “OEM unlocking” ungreying:</p>
<p><video controls="" width="832" height="540"><source src="https://www.fitzsim.org/screenshots/oem-unlocking-ungreying.webm"/><a href="https://www.fitzsim.org/screenshots/oem-unlocking-ungreying.webm">A video showing the moment the OEM unlocking slider ungreys, i.e., becomes operable</a></video></p>
<p>Here is the rest of the network activity, all of which is TLS-encrypted by keys buried in the stock Google operating system, and thus not controlled by the device purchaser:</p>
<table>
<tbody>
<tr>
<th>Hostname</th>
<th nowrap="nowrap">Downloaded to phone</th>
<th nowrap="nowrap">Uploaded from phone</th>
</tr>
<tr>
<td>storage.googleapis.com</td>
<td>383 MiB</td>
<td>8 MiB</td>
</tr>
<tr>
<td>fonts.gstatic.com</td>
<td>137 MiB</td>
<td>3 MiB</td>
</tr>
<tr>
<td>afwprovisioning-pa.googleapis.com</td>
<td>18 MiB</td>
<td>1 MiB</td>
</tr>
<tr>
<td>www.gstatic.com</td>
<td>8 MiB</td>
<td>287 kiB</td>
</tr>
<tr>
<td nowrap="nowrap">googlehosted.l.googleusercontent.com</td>
<td>8 MiB</td>
<td>345 kiB</td>
</tr>
<tr>
<td>ota-cache1.googlezip.net</td>
<td>3 MiB</td>
<td>175 kiB</td>
</tr>
<tr>
<td>dl.google.com</td>
<td>3 MiB</td>
<td>86 kiB</td>
</tr>
<tr>
<td>instantmessaging-pa.googleapis.com</td>
<td>1 MiB</td>
<td>300 kiB</td>
</tr>
<tr>
<td>www.google.com</td>
<td>46 kiB</td>
<td>24 kiB</td>
</tr>
<tr>
<td>ssl.gstatic.com</td>
<td>25 kiB</td>
<td>3 kiB</td>
</tr>
<tr>
<td>ota.googlezip.net</td>
<td>17 kiB</td>
<td>6 kiB</td>
</tr>
<tr>
<td>digitalassetlinks.googleapis.com</td>
<td>17 kiB</td>
<td>4 kiB</td>
</tr>
<tr>
<td>clients.l.google.com</td>
<td>14 kiB</td>
<td>7 kiB</td>
</tr>
<tr>
<td>gstatic.com</td>
<td>13 kiB</td>
<td>3 kiB</td>
</tr>
<tr>
<td>mobile-gtalk.l.google.com</td>
<td>8 kiB</td>
<td>1 kiB</td>
</tr>
<tr>
<td>mobile.l.google.com</td>
<td>5 kiB</td>
<td>1 kiB</td>
</tr>
<tr>
<td>lpa.ds.gsma.com</td>
<td>5 kiB</td>
<td>4 kiB</td>
</tr>
<tr>
<td>connectivitycheck.gstatic.com</td>
<td>3 kiB</td>
<td>3 kiB</td>
</tr>
<tr>
<td>app-measurement.com</td>
<td>1 kiB</td>
<td>0 bytes</td>
</tr>
<tr>
<td>time.android.com</td>
<td>180 bytes</td>
<td>180 bytes</td>
</tr>
</tbody>
</table>
<p>Only Google knows precisely what all that data is and what it is used for.</p>
<p>As the video shows, the ungreying did happen; I had the Settings application open, then connected the phone to the Internet.  I had to close then re-open the Settings application; the access to “<strong>afwprovisioning-pa.googleapis.com</strong>” seemed to be co-timed with the Settings application restart.  After the Settings appliation restart, the “OEM unlocking” option was operable.</p>
<p>I don’t know what subset of the hosts in the above table need to be accessible to the phone for ungreying to take place; I considered firewalling each individually using a script, but I ran out of time. I also don’t know if a factory reset of the phone results in “OEM unlocking” being greyed again.  I ended my experimentation when the ungreying took place and I proceeded to install GrapheneOS successfully (the rest of the process was very straightforward, thanks to GrapheneOS’s great documentation and installation scripts).</p>
<p>All in all, cheers to Google for releasing Android as Free and Open Source software, and for selling devices which are (with steps) bootloader-unlockable; both of which make GrapheneOS feasible<sup id="sup-8"><a href="#footnote-8">8</a></sup>. Jeers to Google for selling devices from store.google.com that cannot have their bootloaders unlocked without first connecting them to the Internet.</p>
<h4>Footnotes</h4>
<ol>








</ol>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>
  </body>
</html>
