<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.novalistic.com/archives/2017/08/optional-end-tags-in-html/">Original</a>
    <h1>You are not required to close your &lt;p&gt;, &lt;li&gt;, &lt;img&gt;, or &lt;br&gt; tags in HTML</h1>
    
    <div id="readability-page-1" class="page"><div>
		
		<article id="post-359">
			<header>
				
			</header>
			
<p>Are you an author writing HTML?</p>
<p>Just so we’re clear: Not XHTML. <em>HTML.</em> Without the X.</p>
<p>If you are, repeat after me, because apparently this bears repeating (after the title):</p>
<p><strong><strong><strong><!-- Big strong emphasis was brutalized by HTML5, but is back stronger than ever! -->You are not required to close your <code>&lt;p&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;img&gt;</code>, or <code>&lt;br&gt;</code> tags in HTML.</strong></strong></strong></p>
<p>(The same applies to over a dozen other elements but these are the most common ones.)</p>
<p>There are a number of reasons it is <em>good practice</em> to do so (which I’ll get to later in this article), but it is not <em>wrong</em> or <em>inherently bad practice</em> not to do so with elements with optional end tags or elements <em>without end tags</em> (believe it or not, these exist — they’re called void elements). Browsers do not treat missing optional end tags as <em>errors</em> that need to be recovered from.</p>
<p>Anyone telling you otherwise about these elements was unfortunately misinformed by the one before them. <strong>Please correct them, perhaps by pointing them to this article</strong>; chances are you were referred here by me or someone else for this very reason.</p>
<p><a href="https://html.spec.whatwg.org/multipage/introduction.html#is-this-html5?">For the sake of convenience</a>, “HTML5” refers to either WHATWG HTML (the living standard) or W3C HTML5, whichever you’re personally more comfortable with. None of the differences between the two are pertinent to this article, so I won’t even make any references to either specification. But I consider the living spec by WHATWG canon, so all spec links will point to that.</p>

<h2>Table of contents</h2>
<ol>
<li><a href="#background">Background</a></li>
<li><a href="#rules">The rules in HTML, and XHTML</a></li>
<li><a href="#practices">Best practices in HTML</a></li>
</ol>
<h2 id="background">Background</h2>
<p>I see the following examples of misinformation being spread almost every day on Stack Overflow, in both comments and answers (that get upvoted!):</p>
<ul>
<li><q>Your markup is invalid — you must close all your tags or browsers will fix them for you.</q></li>
<li><q>You have not closed your <code>img</code> tags properly, this is how they should be: <code>&lt;img src=&#34;...&#34; /&gt;</code></q></li>
<li><q>Your <code>html</code>, <code>head</code> and <code>body</code> tags are missing; your page will not render correctly without them.</q></li>
</ul>
<p>As well as the following examples of confused comments, directed at me when I post HTML snippets with optional tags omitted for brevity, or when I state the same thing I just massively did above:</p>
<ul>
<li><q>Are you sure that’s valid? I’ve never seen a table without <code>&lt;/td&gt;</code>, <code>&lt;/th&gt;</code> or <code>&lt;/tr&gt;</code> closing tags.</q></li>
<li><q>Did you forget to close your <code>p</code> tags or is that on purpose?</q></li>
<li><q>The question <q>why self-close tags?</q> is in the same category as <q>why use DOCTYPE?</q> No one will complain if you don’t. But the guy is learning. Maybe you should learn strict coding standards instead of the quirky [sic] ones?</q></li>
</ul>
<p>These are all adapted from real comments; that last one was from just this week. Now, spreading misinformation is one thing. But spreading misinformation under the guise of “the guy is learning” (<em>and</em> attempting to school me about “strict coding standards”<sup id="fnref-359-1"><a href="#fn-359-1">1</a></sup>)? Sorry, but I can’t allow that. That’s why I finally got around to writing this article after sitting on it for years — for the benefit of those who are learning.</p>
<p>(BTW, no, those two questions aren’t in the same category at all. The DOCTYPE is mandatory, period. Self-closing void element tags in HTML using the <code>/&gt;</code> syntax is <strong>entirely a matter of personal preference</strong> — I cover this in full detail below.)</p>
<p>These misconceptions appear to stem from the XHTML fad of the 00s, before HTML5 emerged. XHTML, being based on XML as opposed to SGML, is notorious for being author-unfriendly due to its strictness, requiring start and end tags for all elements (including void elements using the <code>/&gt;</code> syntax) and quotes around attribute values, as well as forbidding minimization of Boolean attributes such as <code>checked</code>, <code>disabled</code> and <code>required</code>. (Nevertheless, everyone attempted to write XHTML, <a href="https://stackoverflow.com/a/8871965/106224">although almost no one ended up actually writing and serving true XHTML</a>.) It would seem that many authors who don’t know better have mistakenly believed that these rules carry over to HTML5 as they moved away from XHTML, and the misinformation has been spreading ever since.</p>
<h2 id="rules">The rules in HTML, and XHTML</h2>
<p>Let’s start with some markup examples. The following fragments are valid HTML and well-formed XHTML:</p>
<pre><code>&lt;p&gt;This paragraph has an end tag.&lt;/p&gt;
&lt;p&gt;So does this one.&lt;/p&gt;
</code></pre>
<pre><code>&lt;ol&gt;
    &lt;li&gt;This list item has an end tag.&lt;/li&gt;
    &lt;li&gt;So does this one.&lt;/li&gt;
&lt;/ol&gt;
</code></pre>
<p>Stuff you’re probably used to, where every element has a matching pair of start and end tags.</p>
<p>On the other hand, if the following fragments make you uncomfortable, relax — they may not be well-formed XHTML, but <strong>they are <em>valid</em> HTML</strong>, because the end tags of <a href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-p-element"><code>p</code></a> and <a href="https://html.spec.whatwg.org/multipage/grouping-content.html#the-li-element"><code>li</code></a> are optional and browsers are told exactly when to implicitly close a previously open element (again, this is <em>not</em> error recovery!):</p>
<pre><code>&lt;p&gt;This paragraph does not have an end tag.
&lt;p&gt;Neither does this one.
</code></pre>
<pre><code>&lt;ol&gt;
    &lt;li&gt;This list item does not have an end tag.
    &lt;li&gt;Neither does this one.
&lt;/ol&gt;
</code></pre>
<p>This is actually how I was taught HTML growing up! According to the Neopets HTML Guide, <a href="http://www.neopets.com/help/html_2.phtml"><code>&lt;p&gt;</code> tags were simply a way to start new paragraphs of text</a>, and similarly <a href="http://www.neopets.com/help/html_3.phtml"><code>&lt;li&gt;</code> tags represented the bullets or numbers themselves</a>. Following this logic, end tags weren’t needed. In fact, <a href="https://www.w3.org/MarkUp/draft-ietf-iiir-html-01.txt">the original 1993 draft of HTML</a> that pre-dates 1995’s <a href="https://tools.ietf.org/html/rfc1866">RFC 1866 (HTML 2.0)</a> described both <code>p</code> and <code>li</code> in nearly the exact same way as Neopets did, and defined them as having an empty content model, just like <code>br</code>, meaning they originally didn’t <em>have</em> end tags either! So, it actually <em>baffles</em> me any time someone claims that <code>p</code> and <code>li</code> have “always required” end tags. <i>Au contraire</i>, they <em>never</em> did, and never have in <strong>over 20 years</strong>. But I digress; enough about my childhood.</p>
<p>In situations where line breaks and indentation are involved, the only difference between these two pairs of fragments is how inter-element whitespace is treated: there <em>is no</em> inter-element whitespace between each pair of elements without their end tags — the whitespace all becomes part of the text content of the first element in each pair. <a href="https://stackoverflow.com/a/43164752/106224">This does have certain implications in CSS</a>, particularly in <a href="https://stackoverflow.com/a/5078297/106224">inline layout where whitespace processing plays a crucial, if not central, role</a>.</p>
<p>Next, let’s look at the shortcut “self-closing” syntax <code>/&gt;</code>. This syntax comes from XML, so it follows that it’s used in XHTML. So, if HTML5 is a language in its own right and neither based on SGML nor XML, what is <code>/&gt;</code> doing in HTML5? It’s there for exactly one reason: ease of migration from XHTML.<sup id="fnref-359-2"><a href="#fn-359-2">2</a></sup> You have an XHTML document with all these void elements closed with the <code>/&gt;</code> syntax as expected in XHTML. Migrating it to HTML5, provided there are no other compatibility issues such as the use of obsolete elements like <code>acronym</code>, is as easy as switching the DOCTYPE declaration to <code>&lt;!DOCTYPE html&gt;</code>. Bam. Done.</p>
<p>Alright, so, I keep mentioning void elements. What <em>is</em> a void element? A <dfn>void element</dfn> in HTML is an element that has a start tag and <strong>no end tag</strong> (and therefore no content, hence “void”). Common examples of void elements include <code>br</code>, <code>hr</code>, <code>img</code>, <code>input</code>, <code>link</code>, and <code>meta</code>. A full list can be found in the <a href="https://html.spec.whatwg.org/multipage/syntax.html#void-elements">spec</a>. In previous versions of HTML, they were known as empty elements, however <a href="https://stackoverflow.com/a/25314415/106224">XML and now HTML make a distinction between empty elements and void elements</a>, so the term to use going forward is “void elements”. In summary (these words are my own, taken from the link right before this sentence):</p>
<blockquote cite="https://stackoverflow.com/questions/25313426/are-void-elements-and-empty-elements-the-same/25314415#25314415">
<ul>
<li>An <strong>empty element</strong> is one that <em>has</em> no content, regardless of whether it is allowed to have content in the first place.</li>
<li>A <strong>void element</strong> is one that <em>cannot</em> have any content.</li>
</ul>
<p>Additionally, it can be said that all void elements are empty elements by definition, but an empty element does not necessarily represent a void element.</p>
</blockquote>
<p>Now that you understand where the <code>/&gt;</code> syntax came from and why it’s in use today, let’s look at some examples. The following fragment is valid HTML5 and well-formed XHTML, but not valid in any older version of HTML:</p>
<pre><code>&lt;p&gt;&lt;img src=&#34;lightbulb.jpg&#34; alt=&#34;&#34; /&gt;&lt;br /&gt;
I&#39;m aware that the use of &lt;code&gt;br&lt;/code&gt; here is incorrect;
this is simply for illustrative purposes.&lt;/p&gt;
</code></pre>
<p>Again, stuff you’re probably used to, especially if you were taught to always self-close your void element tags using <code>/&gt;</code>.</p>
<p>But, as the title of this article states, you are not <em>required</em> to do that. The following fragment is not well-formed XHTML, but <strong>it is valid in <em>all</em> versions of HTML</strong>:</p>
<pre><code>&lt;p&gt;&lt;img src=&#34;lightbulb.jpg&#34; alt=&#34;&#34;&gt;&lt;br&gt;
I&#39;m aware that the use of &lt;code&gt;br&lt;/code&gt; here is incorrect;
this is simply for illustrative purposes.&lt;/p&gt;
</code></pre>
<p>Before I go on, you may also have noticed that there has always been a space before the <code>/&gt;</code> in HTML5 and XHTML, even in the example fragments in this article. This is also <strong>not required</strong> in either dialect, in the sense that <code>&lt;br/&gt;</code> validates just as well as <code>&lt;br /&gt;</code> does.<sup id="fnref-359-3"><a href="#fn-359-3">3</a></sup> However, it <em>is</em> a tradition dating back nearly 20 years (again!), and the reason for this tradition was that Netscape Navigator 3 (you read that right, not even Netscape 4, but <em>Netscape 3</em>) would <em>choke</em> on <code>&lt;br/&gt;</code>.</p>
<p>Yes, an actual browser bug. I’m totally fine with tradition that has roots in actual cross-browser problems, because while those problems may no longer be relevant today, they were once upon a time, so people didn’t really have a choice back then. In contrast, <em>no browser in the history of XHTML</em> has ever treated the <code>/&gt;</code> syntax itself incorrectly — evidently, NN3 handled <em>that</em> just fine, provided you included the space — so there really is no excuse for claiming that <code>/&gt;</code> is required for void elements in HTML.</p>
<p>Speaking of which, best practices to come shortly, I promise. (You can also <a href="#practices">skip straight over</a> right now if you prefer, because what follows is advanced stuff.)</p>
<p>For now, this is where things get <em>really</em> interesting. The following fragment is well-formed XHTML<sup id="fnref-359-4"><a href="#fn-359-4">4</a></sup>, but <strong>not valid in <em>any</em> version of HTML</strong>:</p>
<pre><code>&lt;div /&gt;
&lt;p /&gt;
&lt;input type=&#34;text&#34;&gt;&lt;/input&gt;
</code></pre>
<p>First, the <code>&lt;/input&gt;</code> end tag is allowed in XHTML because XML <em>always</em> permits using either an explicit end tag or the <code>/&gt;</code> syntax to close an empty element. However, because <code>input</code> is a void element, <a href="https://stackoverflow.com/a/13232170/106224">it does not have an end tag in HTML, and therefore specifying an explicit one is forbidden</a>.</p>
<p>But because the <code>/&gt;</code> syntax comes from XML and not SGML, even though it exists in HTML5 solely to ease migration from XHTML, apart from foreign elements <strong>it is completely meaningless in HTML5 and invalid in all older, SGML-based versions of HTML</strong>. And since void elements <em>don’t have</em> end tags, <strong>whether or not you self-close them is entirely a matter of personal preference</strong>.</p>
<p>What about non-void elements? Well, not only is <a href="https://stackoverflow.com/a/5455770/106224"><code>&lt;div /&gt;</code> treated exactly the same as <code>&lt;div&gt;</code></a> (resulting in a <code>div</code> that is missing an end tag), but the same fragment above actually produces different DOM trees in HTML and XHTML (when served as <code>application/xhtml+xml</code> as intended) for this reason.</p>
<p>In the HTML DOM, the <code>input</code> becomes a child of the <code>p</code>, which in turn becomes a child of the <code>div</code> (inter-element whitespace not significant for the purposes of this example; explicit end tags added for clarity):</p>
<pre><code>&lt;div&gt;
    &lt;p&gt;
        &lt;input type=&#34;text&#34;&gt;
    &lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>In the XHTML DOM, the <code>div</code>, <code>p</code> and <code>input</code> are <em>empty siblings of one another</em> (again, explicit end tags added for clarity):</p>
<pre><code>&lt;div&gt;&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;input type=&#34;text&#34;&gt;&lt;/input&gt;
</code></pre>
<p>For most authors, this will never be a problem since anyone who tries to use <code>/&gt;</code> to self-close non-void elements tags in <code>text/html</code> will quickly find out that it doesn’t work anyway. (They probably spend a tad longer confused if writing “XHTML”, i.e. XHTML that’s not served as <code>application/xhtml+xml</code> as intended, but as mentioned almost no one ever serves it with the correct MIME type to begin with, so again this really is a non-issue.)</p>
<p>Alright! Now for best practices. What you can do, and what you <em>should</em> do when in doubt.</p>
<h2 id="practices">Best practices in HTML</h2>
<p><strong>Disclaimer:</strong> this is just my opinion, not gospel. But, if I do say so myself, I feel it’s advice worth considering. Having said that, if you have any views of your own that you’d like to share, feel free to leave a comment and we can discuss, so long as we promise to be respectful to one another.</p>
<p>Here’s what I recommend to anyone building a new site, whether they’re a new or seasoned HTML author: <strong>Be consistent.</strong> There is nothing wrong with leaving out optional end tags where permissible, and/or writing void element tags with <code>/&gt;</code>, but I recommend that you either do it consistently, or don’t do it at all (also consistently). Here’s my breakdown:</p>
<ul>
<li>For the well-versed, there’s no harm in leaving out optional tags for the sake of brevity, especially when you’re writing technical documentation and including short, self-contained example fragments like the ones in this very article, as long as you know what you’re doing. Tables benefit the most from this, as depending on how you use line breaks and indentation you can nearly <em>halve</em> the number of lines just by removing unnecessary end tags! (It also gives you an excuse to link back to this article when you get questioned the same way I do, but don’t tell anyone I told you that!)
<p>Just keep in mind the effect that placement of end tags has on inter-element whitespace, and in turn the effect on your CSS layout, as I mentioned earlier.</p>
</li>
<li>
<p>For those who are still getting the hang of it, those working in teams, or even just those who don’t want to deal with whitespace issues, I actually recommend that you always open and close your non-void element tags explicitly, even in situations where they’re not required. Generally speaking, it’s a good habit to cultivate especially for less experienced authors as it will help you keep track of where all your elements begin and end, especially when you’re nested several levels deep, and you don’t have to remember which elements require end tags and which ones don’t.</p>
<p>Not to mention, some IDEs and online editors don’t support optional end tags, and so will assume either that they’re missing, or you’ve incorrectly nested your markup even if you haven’t. On the other hand, you can <em>never</em> go wrong with closing all your non-void element tags — plus it’ll help editors and validators spot actual nesting errors.</p>
<p>I’ve heard that writing void element tags with <code>/&gt;</code> helps with readability as it trains people to internalize what the void elements are (here’s the link to the <a href="https://html.spec.whatwg.org/multipage/syntax.html#void-elements">spec</a> again) and, depending on how they see things, either that they’re “already closed”, or that they “don’t need to be closed”. If this is the case for you, I’d recommend sticking to it as well. Remember,  this only works for void elements; attempting to use it with non-void elements will cause problems, unless you’re going out of your way to write and serve <code>application/xhtml+xml</code>.</p>
</li>
</ul>
<p>I do want to highlight a somewhat interesting case. While the following fragment <a href="https://validator.nu/?showsource=yes&amp;doc=data%3Atext%2Fhtml%3Bcharset%3Dutf-8%2C%3C%21DOCTYPE+html%3E%3Ctitle%3Edev.NOVALISTIC%3C%2Ftitle%3E%250A%3Cinput+type%3Dcheckbox+checked+%2F%3E">validates as HTML5</a>:</p>
<pre><code>&lt;input type=checkbox checked /&gt;
</code></pre>
<p>… it does seem rather unusual, doesn’t it? It’s a mix of both HTML syntax (unquoted attribute values, minimized Boolean attributes) and XML syntax (<code>/&gt;</code>). Personally I think using <code>/&gt;</code> kinda partially cancels out the brevity afforded by leaving out attribute quotes. And while it does also contradict using minimized attributes in principle, at least we can make a really strong case for doing that since you can save yourself needlessly duplicating keystrokes and bytes. But yeah, I’d say just quote all your attribute values if you’re going to the trouble of using <code>/&gt;</code>:</p>
<pre><code>&lt;input type=&#34;checkbox&#34; checked /&gt;
</code></pre>
<p>As mentioned in the very beginning of this article, any time someone yells at you to close your <code>&lt;p&gt;</code>, <code>&lt;li&gt;</code>, <code>&lt;img&gt;</code>, or <code>&lt;br&gt;</code> tags because “your markup is invalid”, and you haven’t stated outright that you’re writing XHTML, refer them to this article, and <em>don’t worry about it</em>. <strong>You are doing nothing wrong.</strong> Even if you <em>meant</em> to include the end tags (perhaps based on my suggestions above) and simply left some out by accident, that’s a separate issue altogether. My point is that it’s not <em>invalid</em> as many seem to claim.</p>
<p>And here’s what I recommend when migrating an existing site to HTML5: <strong>If it ain’t broke, don’t fix it.</strong> In the vast majority of cases, provided your site already validates according to whatever DTD it had before, switching the DOCTYPE to <code>&lt;!DOCTYPE html&gt;</code> <em>should be enough</em>. It doesn’t matter whether the site was previously XHTML or an older version of HTML. Roll with it. HTML5 is cool like that, <em>by design</em>.</p>
<p>When the time comes for a redesign, then you can throw out everything you learned about XHTML and just focus on writing standards-compliant HTML<sup id="fnref-359-5"><a href="#fn-359-5">5</a></sup> — which <strong>does not <em>necessitate</em></strong> using the <code>/&gt;</code> syntax or expanding Boolean attributes. Don’t let anyone tell you otherwise.</p>

		</article>
		
		
		
	</div></div>
  </body>
</html>
