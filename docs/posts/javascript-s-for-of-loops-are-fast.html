<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://waspdev.com/articles/2026-01-01/javascript-for-of-loops-are-actually-fast">Original</a>
    <h1>JavaScript&#39;s For-Of Loops Are Fast</h1>
    
    <div id="readability-page-1" class="page"><article id="pageArticle">
	
				<p>
					Published on <time datetime="2026-01-01T00:00:00+04:00">01/01/2026</time>
					</p>
				<nav aria-label="Tags"><ul><li><a rel="tag" aria-label="ecmascript" href="https://waspdev.com/articles?tag=ecmascript">#ecmascript</a></li><li><a rel="tag" aria-label="javascript" href="https://waspdev.com/articles?tag=javascript">#javascript</a></li><li><a rel="tag" aria-label="benchmark" href="https://waspdev.com/articles?tag=benchmark">#benchmark</a></li></ul></nav>

	<p>
		When it comes to iterating over arrays, <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of">for...of</a>
		loops are believed to be significantly slower than traditional indexed loops. This has some grounding, since
		for-of loops are based on the <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">iteration
			protocol</a>, where the iterator has <code>next()</code> method returning an object like this:
		<code>{ value: /* element value */, done: /* a boolean, indicating the end of iteration */ }</code>. Obviously,
		returning such object for every element will add an
		overhead.
	</p>

	<p>
		However, I decided to test this since JS
		engines are constantly improving and sometimes can do amazing optimizations.
	</p>

	<nav aria-label="Table of contents"><strong>Table of contents</strong><ol><li><a href="#the_benchmark">The benchmark</a><ol><li><a href="#the_core_idea_of_the_benchmark">The core idea of the benchmark</a></li><li><a href="#the_setup">The setup</a></li><li><a href="#the_results">The results</a></li></ol></li><li><a href="#conclusion">Conclusion</a></li></ol></nav><h2 id="the_benchmark">The benchmark</h2>

	<p>
		I decided to do the benchmarks with <a target="_blank" href="https://jsbenchmark.com">jsbenchmark.com</a> on
		Chrome 143, Windows 11 and AMD Ryzen 5000U. All the benchmark tests are run sequentially.
	</p>

	<h3 id="the_core_idea_of_the_benchmark">The core idea of the benchmark</h3>

	<p>
		The idea is to create 5 types of arrays: integers, floats, strings, objects and mixed values.
	</p>

	<ul>
		<li>The benchmarks will be done with 3 array sizes: 5000, 50000, and 500000.</li>
		<li>
			There will be 6 types of loops:
			<ul>
				<li>
					<strong>Classic for with i++</strong>:
					<pre>						<code><span>for</span> (<span>let</span> i = <span>0</span>; i &lt; arr.<span>length</span>; i++) {
	<span>DATA</span>.<span>doSomethingWithValue</span>(arr[i]);
}</code>
					</pre>
				</li>

				<li>
					<strong>Classic for with i++ and cached array length</strong>:
					<pre>						<code><span>const</span> length = arr.<span>length</span>;

<span>for</span> (<span>let</span> i = <span>0</span>; i &lt; length; i++) {
	<span>DATA</span>.<span>doSomethingWithValue</span>(arr[i]);
}</code>
					</pre>
				</li>

				<li>
					<strong>Classic for with i-- reversed</strong>:
					<pre>						<code><span>for</span> (<span>let</span> i = arr.<span>length</span> - <span>1</span>; i &gt;= <span>0</span>; i--) {
	<span>DATA</span>.<span>doSomethingWithValue</span>(arr[i]);
}</code>
					</pre>
				</li>


				<li>
					<strong>for-of</strong>:
					<pre>						<code><span>for</span> (<span>const</span> x <span>of</span> arr) {
	<span>DATA</span>.<span>doSomethingWithValue</span>(x);
}</code>
					</pre>
				</li>

				<li>
					<strong>for-in</strong>:
					<pre>						<code><span>for</span> (<span>const</span> key <span>in</span> arr) {
	<span>DATA</span>.<span>doSomethingWithValue</span>(arr[key]);
}</code>
					</pre>
				</li>

				<li>
					<strong>forEach</strong>:
					<pre>						<code>arr.<span>forEach</span>(<span><span>x</span> =&gt;</span> <span>DATA</span>.<span>doSomethingWithValue</span>(x));</code>
					</pre>
				</li>
			</ul>
		</li>
	</ul>

	<p>
		All the loops call a dummy function <code>DATA.doSomethingWithValue()</code> for each array element to make
		sure V8 doesn&#39;t optimize out something too much.
	</p>


	<h3 id="the_setup">The setup</h3>

	<p>
		The setup will generate 5 types of arrays: random integers, random floats, random strings, objects and mixed
		values. It will also create a dummy function <code>doSomethingWithValue</code> (mentioned above).
	</p>

	<pre>		<code><span>const</span> N = <span>5000</span>; <span>// Can be 50000 and 500000 as well</span>
<span>const</span> <span>MAX_VALUE</span> = <span>1000</span>;

<span>const</span> integers = <span>Array</span>.<span>from</span>({ <span>length</span>: N }, <span>() =&gt;</span> <span>Math</span>.<span>floor</span>(<span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>));
<span>const</span> floats = <span>Array</span>.<span>from</span>({ <span>length</span>: N }, <span>() =&gt;</span> <span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>);
<span>const</span> strings = <span>Array</span>.<span>from</span>({ <span>length</span>: N }, <span>() =&gt;</span> <span>Math</span>.<span>random</span>().<span>toString</span>().<span>replace</span>(<span>&#34;.&#34;</span>, <span>&#34;&#34;</span>));
<span>const</span> objects = <span>Array</span>.<span>from</span>({ <span>length</span>: N }, <span>() =&gt;</span> ({
	<span>int</span>: <span>Math</span>.<span>floor</span>(<span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>),
	<span>float</span>: <span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>,
	<span>string</span>: <span>Math</span>.<span>random</span>().<span>toString</span>().<span>replace</span>(<span>&#34;.&#34;</span>, <span>&#34;&#34;</span>),
}));
<span>const</span> mixedValues = <span>Array</span>.<span>from</span>({ <span>length</span>: N }, <span>() =&gt;</span> {
	<span>switch</span> (<span>Math</span>.<span>floor</span>(<span>Math</span>.<span>random</span>() * <span>4</span>)) {
		<span>case</span> <span>0</span>: <span>return</span> <span>Math</span>.<span>floor</span>(<span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>);
		<span>case</span> <span>1</span>: <span>return</span> <span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>;
		<span>case</span> <span>2</span>: <span>return</span> <span>Math</span>.<span>random</span>().<span>toString</span>().<span>replace</span>(<span>&#34;.&#34;</span>, <span>&#34;&#34;</span>);
		<span>case</span> <span>3</span>: <span>return</span> {
			<span>int</span>: <span>Math</span>.<span>floor</span>(<span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>),
			<span>float</span>: <span>Math</span>.<span>random</span>() * <span>MAX_VALUE</span>,
			<span>string</span>: <span>Math</span>.<span>random</span>().<span>toString</span>().<span>replace</span>(<span>&#34;.&#34;</span>, <span>&#34;&#34;</span>),
		};
	}
});


<span>return</span> {
	integers,
	floats,
	strings,
	objects,
	mixedValues,
	<span>doSomethingWithValue</span>(<span></span>) {
		<span>// A dummy function to make sure V8 doesn&#39;t optimize out something too much</span>
	},
}</code>
	</pre>

	<p>
		<code>N</code> is the size of the arrays and can be 5000, 50000, 500000.
	</p>


	<h3 id="the_results">The results</h3>


	<figure>
		<img loading="lazy" alt="Benchmark results for N = 5000" src="https://waspdev.com/static/images/2026-01-01/5000.webp" width="1500" height="1670"/>
		<figcaption><a target="_blank" href="https://jsbenchmark.com/#eyJjYXNlcyI6W3siaWQiOiJTRExvZUhUbzcxYVp5TmRQVjlLeFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEludGVnZXJzIn0seyJpZCI6ImQwbWlfM2xRQmFmckp1VnJmSURtdSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEZsb2F0cyJ9LHsiaWQiOiJEbVpqdEZiZHNZSG1ZWTJDWUtTamUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gU3RyaW5ncyJ9LHsiaWQiOiJ6azkyQzRueDRkUG81YVNfYjFuTkMiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gT2JqZWN0cyJ9LHsiaWQiOiJad3JtRFlwTG1SV3NkcmZNOHVsMnkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIE1peGVkIHZhbHVlcyJ9LHsiaWQiOiJQMVVsb0RXYkJ1c1UtWEs4VUoxNW0iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gaW50ZWdlcnMifSx7ImlkIjoiYU02bGtnSkM0d0dfWlNyMEplZVdLIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBmbG9hdHMifSx7ImlkIjoiVFhhc3BEdGtocnhlNm9lZ1RnNGdpIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gc3RyaW5ncyJ9LHsiaWQiOiJnT1pjNnV2ME0xaDBSVGtfMFNJRWIiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBvYmplY3RzIn0seyJpZCI6IkVPd0lVWDYyeFYxWlZORjh1NjdxYSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiaTRtVEdNaHR3ZEZZRVdvcmVXYjd3IiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIGludGVnZXJzIn0seyJpZCI6Img5cXdXSlRza3prYjZyd0dkazV1SyIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gZmxvYXRzIn0seyJpZCI6IjdPTmtkemFDTzF3UUNTa2QxZGdLTCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLnN0cmluZ3M7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIHN0cmluZ3MifSx7ImlkIjoiSnhrU185TjFqRXh3LUk4OGhzUzhFIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gb2JqZWN0cyJ9LHsiaWQiOiI2aHVLZFJWNGNvcV9VNmxzSnEzZXciLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gbWl4ZWQgdmFsdWVzIn0seyJpZCI6IjdDckVQOHUzZHZ0Qld0NW1fVHBuTiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmludGVnZXJzO1xuXG5mb3IgKGNvbnN0IHggb2YgYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBvZiAtIGludGVnZXJzIn0seyJpZCI6IjBrYWJIdzVsXzEwczIyTEM2YkpYdCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBmbG9hdHMifSx7ImlkIjoibVl3ZkQwS0NuaDM0alZmNks1U0xEIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBzdHJpbmdzIn0seyJpZCI6IlRXMVVpcHIxNk1tVEg5TDBpd2tvWCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm9iamVjdHM7XG5cbmZvciAoY29uc3QgeCBvZiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZSh4KTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIG9mIC0gb2JqZWN0cyJ9LHsiaWQiOiJwZUsxV2Z2NDJVRTV3OUtRcUE3NW8iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiOUhIdGhmeDdoQjIwR21uZUVZckZGIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAoY29uc3Qga2V5IGluIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltrZXldKTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIGluIC0gaW50ZWdlcnMifSx7ImlkIjoiaEVKWFRYRmdfVW1nVXVvWFFuWjhrIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIGZsb2F0cyJ9LHsiaWQiOiJMMVRPbFF3aUFfLVowa2tFTTZDTjUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIHN0cmluZ3MifSx7ImlkIjoiQ2xiVXRReUttb3ZwNUJaLUd4MU5jIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChjb25zdCBrZXkgaW4gYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoYXJyW2tleV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3IgaW4gLSBvYmplY3RzIn0seyJpZCI6Im9qWUU5U1RkN2M4QmxXeWJZdW9XOSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIG1peGVkIHZhbHVlcyJ9LHsiaWQiOiJmOEJFU25nZ0NoTVF2RGl6SHpiUFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGludGVnZXJzIn0seyJpZCI6IkxVcks0aUViTGsyaS1vaUlSQUtLdiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGZsb2F0cyJ9LHsiaWQiOiJiZTFNRnVwVF85aExvTVZCeGxYcjQiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gc3RyaW5ncyJ9LHsiaWQiOiI3bU1VNWR0TE9YYml4T0wxVVU4Y3giLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gb2JqZWN0cyJ9LHsiaWQiOiIxa1dDMTd5OTY0VmxyeWJOMjlrcWkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIG1peGVkIHZhbHVlcyJ9XSwiY29uZmlnIjp7Im5hbWUiOiJMb29wcyBOPTUwMDAiLCJwYXJhbGxlbCI6ZmFsc2UsImRhdGFDb2RlIjoiY29uc3QgTiA9IDUwMDA7XG5jb25zdCBNQVhfVkFMVUU9IDEwMDA7XG5cbmNvbnN0IGludGVnZXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpKTtcbmNvbnN0IGZsb2F0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IE4gfSwgKCkgPT4gTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSk7XG5jb25zdCBzdHJpbmdzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuY29uc3Qgb2JqZWN0cyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IE4gfSwgKCkgPT4gKHtcbiAgaW50OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpLFxuICBmbG9hdDogTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSxcbiAgc3RyaW5nOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIiksXG59KSk7XG5jb25zdCBtaXhlZFZhbHVlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IE4gfSwgKCkgPT4ge1xuICBzd2l0Y2ggKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKTtcbiAgICBjYXNlIDE6IHJldHVybiBNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFO1xuICAgIGNhc2UgMjogcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcbiAgICBjYXNlIDM6IHJldHVybiB7XG4gICAgICBpbnQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSksXG4gICAgICBmbG9hdDogTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSxcbiAgICAgIHN0cmluZzogTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpLFxuICAgIH07XG4gIH1cbn0pO1xuXG5cbnJldHVybiB7XG4gIGludGVnZXJzLFxuICBmbG9hdHMsXG4gIHN0cmluZ3MsXG4gIG9iamVjdHMsXG4gIG1peGVkVmFsdWVzLFxuICBkb1NvbWV0aGluZ1dpdGhWYWx1ZSgpIHtcbiAgICAvLyBBIGR1bW15IGZ1bmN0aW9uIHRvIG1ha2Ugc3VyZSB0aGUgb3B0aW1pemVyIGRvZXNuJ3QgcmVtb3ZlIHRoZSBsb29wc1xuICB9LFxufVxuIiwiZ2xvYmFsVGVzdENvbmZpZyI6eyJkZXBlbmRlbmNpZXMiOltdfX19">Benchmark
				results for N = 5000</a></figcaption>
	</figure>

	<p>
		The best 2 are <strong>classic i++ cached length</strong> and <strong>for-of</strong> (a bit surprising).
		Almost the same performance. <strong>Classic i++</strong> and <strong>forEach</strong> are slightly behind.
		Looks
		like the reverse traversal
		in <strong>classic i-- reversed</strong> is doing more harm than good, probably has something to do with the CPU
		cache or V8 engine. The worst is <strong>for-in</strong>, which is not that surprising as it also does an
		additional access from the array.
	</p>


	<figure>
		<img loading="lazy" alt="Benchmark results for N = 50000" src="https://waspdev.com/static/images/2026-01-01/50000.webp" width="1500" height="1670"/>
		<figcaption><a target="_blank" href="https://jsbenchmark.com/#eyJjYXNlcyI6W3siaWQiOiJTRExvZUhUbzcxYVp5TmRQVjlLeFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEludGVnZXJzIn0seyJpZCI6ImQwbWlfM2xRQmFmckp1VnJmSURtdSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEZsb2F0cyJ9LHsiaWQiOiJEbVpqdEZiZHNZSG1ZWTJDWUtTamUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gU3RyaW5ncyJ9LHsiaWQiOiJ6azkyQzRueDRkUG81YVNfYjFuTkMiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gT2JqZWN0cyJ9LHsiaWQiOiJad3JtRFlwTG1SV3NkcmZNOHVsMnkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIE1peGVkIHZhbHVlcyJ9LHsiaWQiOiJQMVVsb0RXYkJ1c1UtWEs4VUoxNW0iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gaW50ZWdlcnMifSx7ImlkIjoiYU02bGtnSkM0d0dfWlNyMEplZVdLIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBmbG9hdHMifSx7ImlkIjoiVFhhc3BEdGtocnhlNm9lZ1RnNGdpIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gc3RyaW5ncyJ9LHsiaWQiOiJnT1pjNnV2ME0xaDBSVGtfMFNJRWIiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBvYmplY3RzIn0seyJpZCI6IkVPd0lVWDYyeFYxWlZORjh1NjdxYSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiaTRtVEdNaHR3ZEZZRVdvcmVXYjd3IiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIGludGVnZXJzIn0seyJpZCI6Img5cXdXSlRza3prYjZyd0dkazV1SyIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gZmxvYXRzIn0seyJpZCI6IjdPTmtkemFDTzF3UUNTa2QxZGdLTCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLnN0cmluZ3M7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIHN0cmluZ3MifSx7ImlkIjoiSnhrU185TjFqRXh3LUk4OGhzUzhFIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gb2JqZWN0cyJ9LHsiaWQiOiI2aHVLZFJWNGNvcV9VNmxzSnEzZXciLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gbWl4ZWQgdmFsdWVzIn0seyJpZCI6IjdDckVQOHUzZHZ0Qld0NW1fVHBuTiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmludGVnZXJzO1xuXG5mb3IgKGNvbnN0IHggb2YgYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBvZiAtIGludGVnZXJzIn0seyJpZCI6IjBrYWJIdzVsXzEwczIyTEM2YkpYdCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBmbG9hdHMifSx7ImlkIjoibVl3ZkQwS0NuaDM0alZmNks1U0xEIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBzdHJpbmdzIn0seyJpZCI6IlRXMVVpcHIxNk1tVEg5TDBpd2tvWCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm9iamVjdHM7XG5cbmZvciAoY29uc3QgeCBvZiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZSh4KTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIG9mIC0gb2JqZWN0cyJ9LHsiaWQiOiJwZUsxV2Z2NDJVRTV3OUtRcUE3NW8iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiOUhIdGhmeDdoQjIwR21uZUVZckZGIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAoY29uc3Qga2V5IGluIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltrZXldKTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIGluIC0gaW50ZWdlcnMifSx7ImlkIjoiaEVKWFRYRmdfVW1nVXVvWFFuWjhrIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIGZsb2F0cyJ9LHsiaWQiOiJMMVRPbFF3aUFfLVowa2tFTTZDTjUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIHN0cmluZ3MifSx7ImlkIjoiQ2xiVXRReUttb3ZwNUJaLUd4MU5jIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChjb25zdCBrZXkgaW4gYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoYXJyW2tleV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3IgaW4gLSBvYmplY3RzIn0seyJpZCI6Im9qWUU5U1RkN2M4QmxXeWJZdW9XOSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIG1peGVkIHZhbHVlcyJ9LHsiaWQiOiJmOEJFU25nZ0NoTVF2RGl6SHpiUFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGludGVnZXJzIn0seyJpZCI6IkxVcks0aUViTGsyaS1vaUlSQUtLdiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGZsb2F0cyJ9LHsiaWQiOiJiZTFNRnVwVF85aExvTVZCeGxYcjQiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gc3RyaW5ncyJ9LHsiaWQiOiI3bU1VNWR0TE9YYml4T0wxVVU4Y3giLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gb2JqZWN0cyJ9LHsiaWQiOiIxa1dDMTd5OTY0VmxyeWJOMjlrcWkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIG1peGVkIHZhbHVlcyJ9XSwiY29uZmlnIjp7Im5hbWUiOiJMb29wcyBOPTUwMDAwIiwicGFyYWxsZWwiOmZhbHNlLCJkYXRhQ29kZSI6ImNvbnN0IE4gPSA1MDAwMDtcbmNvbnN0IE1BWF9WQUxVRT0gMTAwMDtcblxuY29uc3QgaW50ZWdlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBOIH0sICgpID0-IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSkpO1xuY29uc3QgZmxvYXRzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKTtcbmNvbnN0IHN0cmluZ3MgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBOIH0sICgpID0-IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5jb25zdCBvYmplY3RzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiAoe1xuICBpbnQ6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSksXG4gIGZsb2F0OiBNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFLFxuICBzdHJpbmc6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSxcbn0pKTtcbmNvbnN0IG1peGVkVmFsdWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiB7XG4gIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkpIHtcbiAgICBjYXNlIDA6IHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpO1xuICAgIGNhc2UgMTogcmV0dXJuIE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUU7XG4gICAgY2FzZSAyOiByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xuICAgIGNhc2UgMzogcmV0dXJuIHtcbiAgICAgIGludDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKSxcbiAgICAgIGZsb2F0OiBNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFLFxuICAgICAgc3RyaW5nOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIiksXG4gICAgfTtcbiAgfVxufSk7XG5cblxucmV0dXJuIHtcbiAgaW50ZWdlcnMsXG4gIGZsb2F0cyxcbiAgc3RyaW5ncyxcbiAgb2JqZWN0cyxcbiAgbWl4ZWRWYWx1ZXMsXG4gIGRvU29tZXRoaW5nV2l0aFZhbHVlKCkge1xuICAgIC8vIEEgZHVtbXkgZnVuY3Rpb24gdG8gbWFrZSBzdXJlIHRoZSBvcHRpbWl6ZXIgZG9lc24ndCByZW1vdmUgdGhlIGxvb3BzXG4gIH0sXG59XG4iLCJnbG9iYWxUZXN0Q29uZmlnIjp7ImRlcGVuZGVuY2llcyI6W119fX0">Benchmark
				results for N = 50000</a></figcaption>
	</figure>

	<p>
		Almost the same pattern here, except <strong>forEach</strong> is becoming proportionally slower, closer to
		<strong>classic i-- reversed</strong>. <strong>for-in</strong> is becoming relatively worse than other loops.
	</p>

	<figure>
		<img loading="lazy" alt="Benchmark results for N = 500000" src="https://waspdev.com/static/images/2026-01-01/500000.webp" width="1500" height="1670"/>
		<figcaption><a target="_blank" href="https://jsbenchmark.com/#eyJjYXNlcyI6W3siaWQiOiJTRExvZUhUbzcxYVp5TmRQVjlLeFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEludGVnZXJzIn0seyJpZCI6ImQwbWlfM2xRQmFmckp1VnJmSURtdSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIEZsb2F0cyJ9LHsiaWQiOiJEbVpqdEZiZHNZSG1ZWTJDWUtTamUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gU3RyaW5ncyJ9LHsiaWQiOiJ6azkyQzRueDRkUG81YVNfYjFuTkMiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5mb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIC0gT2JqZWN0cyJ9LHsiaWQiOiJad3JtRFlwTG1SV3NkcmZNOHVsMnkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyAtIE1peGVkIHZhbHVlcyJ9LHsiaWQiOiJQMVVsb0RXYkJ1c1UtWEs4VUoxNW0iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gaW50ZWdlcnMifSx7ImlkIjoiYU02bGtnSkM0d0dfWlNyMEplZVdLIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBmbG9hdHMifSx7ImlkIjoiVFhhc3BEdGtocnhlNm9lZ1RnNGdpIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcbmNvbnN0IGxlbmd0aCA9IGFyci5sZW5ndGg7XG5cbmZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gc3RyaW5ncyJ9LHsiaWQiOiJnT1pjNnV2ME0xaDBSVGtfMFNJRWIiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBvYmplY3RzIn0seyJpZCI6IkVPd0lVWDYyeFYxWlZORjh1NjdxYSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuY29uc3QgbGVuZ3RoID0gYXJyLmxlbmd0aDtcblxuZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaSsrIGNhY2hlZCBsZW5ndGggLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiaTRtVEdNaHR3ZEZZRVdvcmVXYjd3IiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIGludGVnZXJzIn0seyJpZCI6Img5cXdXSlRza3prYjZyd0dkazV1SyIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gZmxvYXRzIn0seyJpZCI6IjdPTmtkemFDTzF3UUNTa2QxZGdLTCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLnN0cmluZ3M7XG5cbmZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA-PSAwOyBpLS0pIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJbaV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGktLSByZXZlcnNlZCAtIHN0cmluZ3MifSx7ImlkIjoiSnhrU185TjFqRXh3LUk4OGhzUzhFIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gb2JqZWN0cyJ9LHsiaWQiOiI2aHVLZFJWNGNvcV9VNmxzSnEzZXciLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6IkNsYXNzaWMgaS0tIHJldmVyc2VkIC0gbWl4ZWQgdmFsdWVzIn0seyJpZCI6IjdDckVQOHUzZHZ0Qld0NW1fVHBuTiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmludGVnZXJzO1xuXG5mb3IgKGNvbnN0IHggb2YgYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBvZiAtIGludGVnZXJzIn0seyJpZCI6IjBrYWJIdzVsXzEwczIyTEM2YkpYdCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBmbG9hdHMifSx7ImlkIjoibVl3ZkQwS0NuaDM0alZmNks1U0xEIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuc3RyaW5ncztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBzdHJpbmdzIn0seyJpZCI6IlRXMVVpcHIxNk1tVEg5TDBpd2tvWCIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm9iamVjdHM7XG5cbmZvciAoY29uc3QgeCBvZiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZSh4KTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIG9mIC0gb2JqZWN0cyJ9LHsiaWQiOiJwZUsxV2Z2NDJVRTV3OUtRcUE3NW8iLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChjb25zdCB4IG9mIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3Igb2YgLSBtaXhlZCB2YWx1ZXMifSx7ImlkIjoiOUhIdGhmeDdoQjIwR21uZUVZckZGIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuaW50ZWdlcnM7XG5cbmZvciAoY29uc3Qga2V5IGluIGFycikge1xuICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltrZXldKTtcbn0iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIGluIC0gaW50ZWdlcnMifSx7ImlkIjoiaEVKWFRYRmdfVW1nVXVvWFFuWjhrIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEuZmxvYXRzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIGZsb2F0cyJ9LHsiaWQiOiJMMVRPbFF3aUFfLVowa2tFTTZDTjUiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIHN0cmluZ3MifSx7ImlkIjoiQ2xiVXRReUttb3ZwNUJaLUd4MU5jIiwiY29kZSI6ImNvbnN0IGFyciA9IERBVEEub2JqZWN0cztcblxuZm9yIChjb25zdCBrZXkgaW4gYXJyKSB7XG4gIERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoYXJyW2tleV0pO1xufSIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3IgaW4gLSBvYmplY3RzIn0seyJpZCI6Im9qWUU5U1RkN2M4QmxXeWJZdW9XOSIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuXG5mb3IgKGNvbnN0IGtleSBpbiBhcnIpIHtcbiAgREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZShhcnJba2V5XSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvciBpbiAtIG1peGVkIHZhbHVlcyJ9LHsiaWQiOiJmOEJFU25nZ0NoTVF2RGl6SHpiUFoiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5pbnRlZ2VycztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGludGVnZXJzIn0seyJpZCI6IkxVcks0aUViTGsyaS1vaUlSQUtLdiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLmZsb2F0cztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIGZsb2F0cyJ9LHsiaWQiOiJiZTFNRnVwVF85aExvTVZCeGxYcjQiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5zdHJpbmdzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gc3RyaW5ncyJ9LHsiaWQiOiI3bU1VNWR0TE9YYml4T0wxVVU4Y3giLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5vYmplY3RzO1xuXG5hcnIuZm9yRWFjaCh4ID0-IERBVEEuZG9Tb21ldGhpbmdXaXRoVmFsdWUoeCkpOyIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJmb3JFYWNoIC0gb2JqZWN0cyJ9LHsiaWQiOiIxa1dDMTd5OTY0VmxyeWJOMjlrcWkiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuYXJyLmZvckVhY2goeCA9PiBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpKTsiLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yRWFjaCAtIG1peGVkIHZhbHVlcyJ9XSwiY29uZmlnIjp7Im5hbWUiOiJMb29wcyBOPTUwMDAwMCIsInBhcmFsbGVsIjpmYWxzZSwiZGF0YUNvZGUiOiJjb25zdCBOID0gNTAwMDAwO1xuY29uc3QgTUFYX1ZBTFVFPSAxMDAwO1xuXG5jb25zdCBpbnRlZ2VycyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IE4gfSwgKCkgPT4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKSk7XG5jb25zdCBmbG9hdHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBOIH0sICgpID0-IE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpO1xuY29uc3Qgc3RyaW5ncyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IE4gfSwgKCkgPT4gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbmNvbnN0IG9iamVjdHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBOIH0sICgpID0-ICh7XG4gIGludDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKSxcbiAgZmxvYXQ6IE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUsXG4gIHN0cmluZzogTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpLFxufSkpO1xuY29uc3QgbWl4ZWRWYWx1ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBOIH0sICgpID0-IHtcbiAgc3dpdGNoIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSkge1xuICAgIGNhc2UgMDogcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRSk7XG4gICAgY2FzZSAxOiByZXR1cm4gTWF0aC5yYW5kb20oKSAqIE1BWF9WQUxVRTtcbiAgICBjYXNlIDI6IHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIik7XG4gICAgY2FzZSAzOiByZXR1cm4ge1xuICAgICAgaW50OiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpLFxuICAgICAgZmxvYXQ6IE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUsXG4gICAgICBzdHJpbmc6IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSxcbiAgICB9O1xuICB9XG59KTtcblxuXG5yZXR1cm4ge1xuICBpbnRlZ2VycyxcbiAgZmxvYXRzLFxuICBzdHJpbmdzLFxuICBvYmplY3RzLFxuICBtaXhlZFZhbHVlcyxcbiAgZG9Tb21ldGhpbmdXaXRoVmFsdWUoKSB7XG4gICAgLy8gQSBkdW1teSBmdW5jdGlvbiB0byBtYWtlIHN1cmUgdGhlIG9wdGltaXplciBkb2Vzbid0IHJlbW92ZSB0aGUgbG9vcHNcbiAgfSxcbn1cbiIsImdsb2JhbFRlc3RDb25maWciOnsiZGVwZW5kZW5jaWVzIjpbXX19fQ">Benchmark
				results for N = 500000</a></figcaption>
	</figure>

	<p>
		This one is a bit interesting. <strong>for-of</strong> is now less optimal for 500000 items (especially for
		floats). This is probably
		because <strong>for-of</strong> is harder to optimize,
		and since it was long running and too few runs were performed, V8 didn&#39;t optimize it. The same with
		<strong>forEach</strong>.
	</p>


	<p>
		I decided to run a separate benchmark for <strong>classic i++ cached length</strong>, <strong>for-of</strong>
		and <strong>forEach</strong>, by repeating the loops 200 times, in order to warm the code up:
	</p>

	<figure>
		<img loading="lazy" alt="Benchmark results for N = 500000 - 200 repeats" src="https://waspdev.com/static/images/2026-01-01/500000-final.webp" width="1600" height="900"/>
		<figcaption><a target="_blank" href="https://jsbenchmark.com/#eyJjYXNlcyI6W3siaWQiOiJ5Y3R4MjJrbDdNNm1MWThJMjVTaGgiLCJjb2RlIjoiY29uc3QgYXJyID0gREFUQS5taXhlZFZhbHVlcztcblxuZm9yIChsZXQgaiA9IDA7IGogPCAyMDA7ICsraikge1xuICBjb25zdCBsZW5ndGggPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKGFycltpXSk7XG4gIH1cbn1cbiIsImRlcGVuZGVuY2llcyI6W10sIm5hbWUiOiJDbGFzc2ljIGkrKyBjYWNoZWQgbGVuZ3RoIC0gbWl4ZWQgdmFsdWVzIn0seyJpZCI6ImRMMjhvQnpRZFlwTEZQSHNZdml2eiIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuXG5mb3IgKGxldCBqID0gMDsgaiA8IDIwMDsgKytqKSB7XG4gIGZvciAoY29uc3QgeCBvZiBhcnIpIHtcbiAgICBEQVRBLmRvU29tZXRoaW5nV2l0aFZhbHVlKHgpO1xuICB9XG59XG4iLCJkZXBlbmRlbmNpZXMiOltdLCJuYW1lIjoiZm9yIG9mIC0gbWl4ZWQgdmFsdWVzIn0seyJpZCI6IlpwYzRxZnBzMk9tTGNXSUoxaUVNMyIsImNvZGUiOiJjb25zdCBhcnIgPSBEQVRBLm1peGVkVmFsdWVzO1xuXG5mb3IgKGxldCBqID0gMDsgaiA8IDIwMDsgKytqKSB7XG4gIGFyci5mb3JFYWNoKHggPT4gREFUQS5kb1NvbWV0aGluZ1dpdGhWYWx1ZSh4KSk7XG59IiwiZGVwZW5kZW5jaWVzIjpbXSwibmFtZSI6ImZvckVhY2ggLSBtaXhlZCB2YWx1ZXMifV0sImNvbmZpZyI6eyJuYW1lIjoiQ2xhc3NpYyBpKysgY2FjaGVkIHZzIGZvciBvZiB2cyBmb3JFYWNoIiwicGFyYWxsZWwiOmZhbHNlLCJkYXRhQ29kZSI6ImNvbnN0IE4gPSA1MDAwMDA7XG5jb25zdCBNQVhfVkFMVUU9IDEwMDA7XG5cbmNvbnN0IG1peGVkVmFsdWVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogTiB9LCAoKSA9PiB7XG4gIHN3aXRjaCAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCkpIHtcbiAgICBjYXNlIDA6IHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUUpO1xuICAgIGNhc2UgMTogcmV0dXJuIE1hdGgucmFuZG9tKCkgKiBNQVhfVkFMVUU7XG4gICAgY2FzZSAyOiByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xuICAgIGNhc2UgMzogcmV0dXJuIHtcbiAgICAgIGludDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFKSxcbiAgICAgIGZsb2F0OiBNYXRoLnJhbmRvbSgpICogTUFYX1ZBTFVFLFxuICAgICAgc3RyaW5nOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIiksXG4gICAgfTtcbiAgfVxufSk7XG5cblxucmV0dXJuIHtcbiAgbWl4ZWRWYWx1ZXMsXG4gIGRvU29tZXRoaW5nV2l0aFZhbHVlKCkge1xuICAgIC8vIEEgZHVtbXkgZnVuY3Rpb24gdG8gbWFrZSBzdXJlIHRoZSBvcHRpbWl6ZXIgZG9lc24ndCByZW1vdmUgdGhlIGxvb3BzXG4gIH0sXG59XG4iLCJnbG9iYWxUZXN0Q29uZmlnIjp7ImRlcGVuZGVuY2llcyI6W119fX0">Benchmark
				results for N = 500000 - 200 repeats</a></figcaption>
	</figure>

	<p>
		Now, <strong>for-of</strong> is closer to <strong>classic i++ cached length</strong>. Still slower, the bad
		results during the warmup phase might also drag the average down.
		Overall, the warmup helps a lot. However, <strong>forEach</strong> doesn&#39;t get any significant benefit from
		this.
	</p>


	<p>
		Still not fully satisfied, I did a benchmark once more with 1500 repeats for more warmup, but this time on <a target="_blank" href="https://jsben.ch">jsben.ch</a>. This is because <a target="_blank" href="https://jsbenchmark.com">jsbenchmark.com</a> has timeout issues with long running code.
	</p>

	<figure>
		<img loading="lazy" alt="Benchmark results for N = 500000 - 1500 repeats" src="https://waspdev.com/static/images/2026-01-01/500000-1500-repeats.webp" width="895" height="366"/>
		<figcaption><a target="_blank" href="https://jsben.ch/QCXCY">Benchmark results for N = 500000 - 1500 repeats</a>
		</figcaption>
	</figure>

	<p>
		Finally, <strong>for-of</strong> is on par with <strong>classic i++ cached length</strong>.
		<strong>forEach</strong> also got faster, but still the slowest of 3.
	</p>

	<h2 id="conclusion">Conclusion</h2>

	<p>
		In the recent years V8 has improved significantly in optimizing loops, including <strong>for-of</strong> loops.
		If your code is performance sensitive, <strong>for-of</strong> can be potentially as fast as classic loops. But
		as we see, for huge arrays the optimization is trickier and less reliable. You can still use it though if
		benchmarks show good performance.
		The most consistent winner is <strong>classic i++ cached array length</strong>, since JS engines are good at
		recognizing and optimizing such loops. For non performance sensitive code <strong>for-of</strong> still usually
		provides better ergonomics, so usually it should be preferred.
	</p>

	<p>
		Happy New Year!
	</p>

</article></div>
  </body>
</html>
