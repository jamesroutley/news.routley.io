<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/beartype/beartype">Original</a>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><a href="https://github.com/beartype/beartype/actions?workflow=test"><img alt="beartype continuous integration (CI) status" src="https://github.com/beartype/beartype/workflows/test/badge.svg"/>
</a> <a href="https://codecov.io/gh/beartype/beartype" rel="nofollow"><img alt="beartype test coverage status" src="https://camo.githubusercontent.com/03c85233c0ae1dbda2f23dc97a4b963448b11baeb5199305a2edf18625c2f998/68747470733a2f2f636f6465636f762e696f2f67682f62656172747970652f62656172747970652f6272616e63682f6d61696e2f67726170682f62616467652e7376673f746f6b656e3d45364634595359395a51" data-canonical-src="https://codecov.io/gh/beartype/beartype/branch/main/graph/badge.svg?token=E6F4YSY9ZQ"/></a></p>
<pre>Look for the bare necessities,
  the simple bare necessities.
Forget about your worries and your strife.

                        — <a href="https://www.gutenberg.org/files/236/236-h/236-h.htm" rel="nofollow">The Jungle Book</a>.
</pre>
<p dir="auto"><strong>Beartype</strong> is an open-source pure-Python <a href="#compliance">PEP-compliant</a>
<a href="#timings">constant-time</a> <a href="#usage">runtime type checker</a> emphasizing
efficiency, portability, and thrilling puns.</p>
<div data-snippet-clipboard-copy-content="# Install beartype.
$ pip3 install beartype

# So let&#39;s do this.
$ python3
"><pre><span><span>#</span> Install beartype.</span>
$ pip3 install beartype

<span><span>#</span> So let&#39;s do this.</span>
$ python3</pre></div>
<div data-snippet-clipboard-copy-content="# Import the @beartype decorator.
&gt;&gt;&gt; from beartype import beartype

# Annotate @beartype-decorated callables with PEP-compliant type hints.
&gt;&gt;&gt; @beartype
... def quote_wiggum(lines: list[str]) -&gt; None:
...     print(&#39;“{}”\n\t— Police Chief Wiggum&#39;.format(&#34;\n &#34;.join(lines)))

# Call those callables with valid parameters.
&gt;&gt;&gt; quote_wiggum([&#34;Okay, folks. Show&#39;s over!&#34;, &#34;Nothing to see here. Show&#39;s…&#34;,])
“Okay, folks. Show&#39;s over!
 Nothing to see here. Show&#39;s…”
   — Police Chief Wiggum

# Call those callables with invalid parameters.
&gt;&gt;&gt; quote_wiggum([b&#34;Oh, my God! A horrible plane crash!&#34;, b&#34;Hey, everybody! Get a load of this flaming wreckage!&#34;,])
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
  File &#34;&lt;string&gt;&#34;, line 30, in quote_wiggum
  File &#34;/home/springfield/beartype/lib/python3.9/site-packages/beartype/_decor/_code/_pep/_error/errormain.py&#34;, line 220, in raise_pep_call_exception
    raise exception_cls(
beartype.roar.BeartypeCallHintPepParamException: @beartyped
quote_wiggum() parameter lines=[b&#39;Oh, my God! A horrible plane
crash!&#39;, b&#39;Hey, everybody! Get a load of thi...&#39;] violates type hint
list[str], as list item 0 value b&#39;Oh, my God! A horrible plane crash!&#39;
not str.

# Squash bugs by refining type hints with PEP-compliant beartype validators.
# Import the requisite machinery.
&gt;&gt;&gt; from beartype.vale import Is
&gt;&gt;&gt; from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
# &gt;&gt;&gt; from typing_extensions import Annotated   # &lt;-- if Python &lt; 3.9.0

# Define validators by combining PEP-compliant type hints with lambda
# functions. This validator accepts any non-empty list of strings.
&gt;&gt;&gt; ListOfSomeStrings = Annotated[list[str], Is[lambda lst: bool(lst)]]

# Annotate @beartype-decorated callables with validators.
&gt;&gt;&gt; @beartype
... def quote_wiggum_safer(lines: ListOfSomeStrings) -&gt; None:
...     print(&#39;“{}”\n\t— Police Chief Wiggum&#39;.format(&#34;\n &#34;.join(lines)))

# Call those callables with invalid parameters.
&gt;&gt;&gt; quote_wiggum_safer([])
beartype.roar.BeartypeCallHintPepParamException: @beartyped
quote_wiggum_safer() parameter lines=[] violates type hint
typing.Annotated[list[str], Is[lambda lst: bool(lst)]], as value []
violates validator Is[lambda lst: bool(lst)].
"><pre><span># Import the @beartype decorator.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span># Annotate @beartype-decorated callables with PEP-compliant type hints.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>@<span>beartype</span></span>
... <span>def</span> <span>quote_wiggum</span>(<span>lines</span>: <span>list</span>[<span>str</span>]) <span>-&gt;</span> <span>None</span>:
...     <span>print</span>(<span>&#39;“{}”<span>\n</span><span>\t</span>— Police Chief Wiggum&#39;</span>.<span>format</span>(<span>&#34;<span>\n</span> &#34;</span>.<span>join</span>(<span>lines</span>)))

<span># Call those callables with valid parameters.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>quote_wiggum</span>([<span>&#34;Okay, folks. Show&#39;s over!&#34;</span>, <span>&#34;Nothing to see here. Show&#39;s…&#34;</span>,])
“<span>Okay</span>, <span>folks</span>. <span>Show</span>&#39;<span>s</span> <span>over</span>!
 <span>Nothing</span> <span>to</span> <span>see</span> <span>here</span>. <span>Show</span>&#39;<span>s</span>…”
   — <span>Police</span> <span>Chief</span> <span>Wiggum</span>

<span># Call those callables with invalid parameters.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>quote_wiggum</span>([<span>b&#34;Oh, my God! A horrible plane crash!&#34;</span>, <span>b&#34;Hey, everybody! Get a load of this flaming wreckage!&#34;</span>,])
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
  <span>File</span> <span>&#34;&lt;string&gt;&#34;</span>, <span>line</span> <span>30</span>, <span>in</span> <span>quote_wiggum</span>
  <span>File</span> <span>&#34;/home/springfield/beartype/lib/python3.9/site-packages/beartype/_decor/_code/_pep/_error/errormain.py&#34;</span>, <span>line</span> <span>220</span>, <span>in</span> <span>raise_pep_call_exception</span>
    <span>raise</span> <span>exception_cls</span>(
<span>beartype</span>.<span>roar</span>.<span>BeartypeCallHintPepParamException</span>: @<span>beartyped</span>
<span>quote_wiggum</span>() <span>parameter</span> <span>lines</span><span>=</span>[b&#39;<span>Oh</span>, <span>my</span> <span>God</span>! <span>A</span> <span>horrible</span> <span>plane</span>
<span>crash</span>!<span>&#39;, b&#39;</span><span>Hey</span>, <span>everybody</span>! <span>Get</span> <span>a</span> <span>load</span> <span>of</span> <span>thi</span>...&#39;] <span>violates</span> <span>type</span> <span>hint</span>
<span>list</span>[<span>str</span>], <span>as</span> <span>list</span> <span>item</span> <span>0</span> <span>value</span> <span>b&#39;Oh, my God! A horrible plane crash!&#39;</span>
<span>not</span> <span>str</span>.

<span># Squash bugs by refining type hints with PEP-compliant beartype validators.</span>
<span># Import the requisite machinery.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span># &gt;&gt;&gt; from typing_extensions import Annotated   # &lt;-- if Python &lt; 3.9.0</span>

<span># Define validators by combining PEP-compliant type hints with lambda</span>
<span># functions. This validator accepts any non-empty list of strings.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>ListOfSomeStrings</span> <span>=</span> <span>Annotated</span>[<span>list</span>[<span>str</span>], <span>Is</span>[<span>lambda</span> <span>lst</span>: <span>bool</span>(<span>lst</span>)]]

<span># Annotate @beartype-decorated callables with validators.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>@<span>beartype</span></span>
... <span>def</span> <span>quote_wiggum_safer</span>(<span>lines</span>: <span>ListOfSomeStrings</span>) <span>-&gt;</span> <span>None</span>:
...     <span>print</span>(<span>&#39;“{}”<span>\n</span><span>\t</span>— Police Chief Wiggum&#39;</span>.<span>format</span>(<span>&#34;<span>\n</span> &#34;</span>.<span>join</span>(<span>lines</span>)))

<span># Call those callables with invalid parameters.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>quote_wiggum_safer</span>([])
<span>beartype</span>.<span>roar</span>.<span>BeartypeCallHintPepParamException</span>: @<span>beartyped</span>
<span>quote_wiggum_safer</span>() <span>parameter</span> <span>lines</span><span>=</span>[] <span>violates</span> <span>type</span> <span>hint</span>
<span>typing</span>.<span>Annotated</span>[<span>list</span>[<span>str</span>], <span>Is</span>[<span>lambda</span> <span>lst</span>: <span>bool</span>(<span>lst</span>)]], <span>as</span> <span>value</span> []
<span>violates</span> <span>validator</span> <span>Is</span>[<span>lambda</span> <span>lst</span>: <span>bool</span>(<span>lst</span>)].</pre></div>
<p dir="auto">Beartype brings <a href="https://www.rust-lang.org" rel="nofollow">Rust</a>- and <a href="https://en.wikipedia.org/wiki/C%2B%2B" rel="nofollow">C++</a>-inspired <a href="https://boats.gitlab.io/blog/post/zero-cost-abstractions" rel="nofollow">zero-cost abstractions</a> into the lawless world of <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> Python by
<a href="#usage">enforcing type safety at the granular level of functions and methods</a> against <a href="#compliance">type hints standardized by the Python community</a> in <a href="#timings">O(1) non-amortized worst-case time with negligible
constant factors</a>. If the prior sentence was unreadable jargon,
<a href="#frequently-asked-questions-faq">see our friendly and approachable FAQ for a human-readable synopsis</a>.</p>
<p dir="auto">Beartype is <a href="https://github.com/beartype/beartype/tree/main/beartype">portably implemented</a> in <a href="https://www.python.org" rel="nofollow">Python 3</a>, <a href="https://github.com/beartype/beartype/actions?workflow=tests">continuously stress-tested</a> via <a href="https://github.com/features/actions">GitHub
Actions</a> <strong>+</strong> <a href="https://tox.readthedocs.io" rel="nofollow">tox</a> <strong>+</strong> <a href="https://docs.pytest.org" rel="nofollow">pytest</a> <strong>+</strong> <a href="https://about.codecov.io" rel="nofollow">Codecov</a>, and <a href="https://github.com/beartype/beartype/blob/main/LICENSE">permissively
distributed</a> under the <a href="https://opensource.org/licenses/MIT" rel="nofollow">MIT license</a>. Beartype has <em>no</em>
runtime dependencies, <a href="https://docs.pytest.org" rel="nofollow">only one test-time dependency</a>, and <a href="https://www.sphinx-doc.org" rel="nofollow">only
one documentation-time dependency</a>. Beartype supports <a href="https://devguide.python.org/#status-of-python-branches" rel="nofollow">all actively
developed Python versions</a>, <a href="#install">all Python package managers</a>, and <a href="#install">multiple platform-specific package managers</a>.</p>
<blockquote>
<p dir="auto">Beartype <a href="https://libraries.io/pypi/beartype/dependents" rel="nofollow">powers quality assurance across the Python ecosystem</a>.</p>
<p dir="auto"><a href="https://github.com/microsoft/graspologic"><img alt="Graspologic: Python package for graph statistical algorithms" src="https://user-images.githubusercontent.com/217028/138580730-dcb3ee22-6372-4a2d-93bf-d1a3c97e67cf.png"/></a> <a href="https://github.com/mit-ll-responsible-ai/hydra-zen"><img alt="Hydra-Zen: Reproducible Pythonic CLI&lt;-&gt;config APIs via Hydra" src="https://user-images.githubusercontent.com/217028/139522423-d987d484-425b-4e70-a0e7-7390593471f1.png"/></a> <a href="https://gitlab.com/pycrisp/pycrisp" rel="nofollow"><img alt="PyCrisp: Typed Python interactions with the Crisp API" src="https://user-images.githubusercontent.com/217028/138580797-1f09f0b4-bced-4651-82c9-6dae50afe883.png"/></a> <a href="https://github.com/sentimentinvestor/sentipy"><img alt="SentiPy: Typed Python interactions with the Sentiment Investor API" src="https://user-images.githubusercontent.com/217028/138581059-6e3218d0-2a2e-42b7-b15c-7e2759fa2399.png"/></a></p>
</blockquote>


<a name="user-content-news"></a>
<h2 dir="auto"><a id="user-content-news" aria-hidden="true" href="#news"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id7">News</a></h2>
<a name="user-content-numpy-consider-yourself-checked"></a>
<h3 dir="auto"><a id="user-content-2021-08-18-numpy-consider-yourself-checked" aria-hidden="true" href="#2021-08-18-numpy-consider-yourself-checked"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id8">2021-08-18: NumPy, Consider Yourself Checked</a></h3>
<p dir="auto"><strong>Beartype 0.8.0</strong> (codename: <em>Bear-sama</em>) has been released to polite golf
claps from cloud-hosted data scientists everywhere, expanding support for:</p>
<ul dir="auto">
<li><a href="#numpy-type-hints">NumPy ≥ 1.21.0 type hints</a> (e.g.,
<code>numpy.typing.NDArray[numpy.float64]</code>) under both Python ≥ 3.9.0 natively
<em>and</em> Python &lt; 3.9.0 via the <a href="https://pypi.org/project/typing-extensions" rel="nofollow">third-party &#34;typing_extensions&#34; package</a>.</li>
<li><a href="#beartype-validators">Beartype validators</a> under Python &lt; 3.9.0 via the
<a href="https://pypi.org/project/typing-extensions" rel="nofollow">third-party &#34;typing_extensions&#34; package</a>.</li>
</ul>
<p dir="auto">What we&#39;re saying is: <code>pip install typing-extensions</code>. Your data pipeline
will thank us later.</p>
<a name="user-content-validating-data-day-vd-day"></a>
<h3 dir="auto"><a id="user-content-2021-05-25-validating-data-day-vd-day" aria-hidden="true" href="#2021-05-25-validating-data-day-vd-day"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id9">2021-05-25: Validating Data Day (VD-Day)</a></h3>
<p dir="auto"><strong>Beartype 0.7.0</strong> (codename: <em>berry gud</em>) has been released to crickets
chirping, publishing <a href="#beartype-validators">Python&#39;s first Turing-complete type hint for validating
arbitrary data</a>.</p>
<p dir="auto"><a href="#beartype-validators">Beartype validators</a> enforce runtime constraints on
the internal structure and contents of parameters and returns using simple
user-defined lambda functions and declarative expressions – all seamlessly
composable with <a href="#standard-hints">standard type hints</a> via an <a href="#validator-syntax">expressive
domain-specific language (DSL)</a> designed <em>just for you.</em></p>
<a name="user-content-rejoice-it-s-beartype"></a>
<h3 dir="auto"><a id="user-content-2020-12-10-rejoice-its-beartype" aria-hidden="true" href="#2020-12-10-rejoice-its-beartype"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id10">2020-12-10: Rejoice! It&#39;s Beartype</a></h3>
<p dir="auto">Beartype has a <a href="https://github.com/beartype/beartype/issues/7">roadmap forward to our first major milestone</a>: <strong>beartype 1.0.0,</strong> delivering perfect constant-time compliance
with all annotation standards by late 2021. <sup>...in theory</sup></p>
<p dir="auto">Join <a href="https://github.com/beartype/beartype/issues/7">the strangely enticing conversation</a> and be a part of
the spicy runtime type-checker that <a href="https://www.youtube.com/watch?v=uMSV4OteqBE" rel="nofollow">goes up to eleven</a>.</p>
<a name="user-content-install"></a>
<h2 dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id11">Install</a></h2>
<p dir="auto">Let&#39;s install <code>beartype</code> with <a href="https://pip.pypa.io" rel="nofollow">pip</a>:</p>

<p dir="auto">Let&#39;s install <code>beartype</code> with <a href="https://docs.conda.io/en/latest/miniconda.html" rel="nofollow">Anaconda</a>:</p>
<div data-snippet-clipboard-copy-content="conda config --add channels conda-forge
conda install beartype
"><pre>conda config --add channels conda-forge
conda install beartype</pre></div>
<p dir="auto"><a href="#badge">Commemorate this moment in time</a> with <a href="https://beartype.rtfd.io" rel="nofollow"><img alt="bear-ified" src="https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg"/>
</a>, our
over<em>bear</em>ing project shield. What says quality like <a href="#badge">a bear on a badge</a>, amirite?</p>
<a name="user-content-platform"></a>
<h3 dir="auto"><a id="user-content-platform" aria-hidden="true" href="#platform"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id12">Platform</a></h3>
<p dir="auto">Beartype is also installable with platform-specific package managers, because
sometimes you just need this thing to work.</p>
<a name="user-content-macos"></a>
<h4 dir="auto"><a id="user-content-macos" aria-hidden="true" href="#macos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id13">macOS</a></h4>
<p dir="auto">Let&#39;s install <code>beartype</code> with <a href="https://brew.sh" rel="nofollow">Homebrew</a> on <a href="https://en.wikipedia.org/wiki/MacOS" rel="nofollow">macOS</a> courtesy <a href="https://github.com/beartype/homebrew-beartype">our third-party
tap</a>:</p>
<div data-snippet-clipboard-copy-content="brew install beartype/beartype/beartype
"><pre>brew install beartype/beartype/beartype</pre></div>
<p dir="auto">Let&#39;s install <code>beartype</code> with <a href="https://www.macports.org" rel="nofollow">MacPorts</a> on <a href="https://en.wikipedia.org/wiki/MacOS" rel="nofollow">macOS</a>:</p>
<div data-snippet-clipboard-copy-content="sudo port install py-beartype
"><pre>sudo port install py-beartype</pre></div>
<p dir="auto">A big bear hug to <a href="https://github.com/harens">our official macOS package maintainer @harens</a>
for <a href="https://ports.macports.org/port/py-beartype" rel="nofollow">packaging beartype for our Apple-appreciating audience</a>.</p>
<a name="user-content-linux"></a>
<h4 dir="auto"><a id="user-content-linux" aria-hidden="true" href="#linux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id14">Linux</a></h4>
<p dir="auto">Let&#39;s install <code>beartype</code> with <code>emerge</code> on <a href="https://www.gentoo.org" rel="nofollow">Gentoo</a> courtesy <a href="https://github.com/leycec/raiagent">a third-party
overlay</a>, because source-based Linux distributions are the
CPU-bound nuclear option:</p>
<div data-snippet-clipboard-copy-content="emerge --ask app-eselect/eselect-repository
mkdir -p /etc/portage/repos.conf
eselect repository enable raiagent
emerge --sync raiagent
emerge beartype
"><pre>emerge --ask app-eselect/eselect-repository
mkdir -p /etc/portage/repos.conf
eselect repository <span>enable</span> raiagent
emerge --sync raiagent
emerge beartype</pre></div>
<p dir="auto"><em>What could be simpler?</em> O_o</p>
<a name="user-content-badge"></a>
<h3 dir="auto"><a id="user-content-badge" aria-hidden="true" href="#badge"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id15">Badge</a></h3>
<p dir="auto">If you&#39;re feeling the quality assurance and want to celebrate, consider
signaling that you&#39;re now publicly <em>bear-</em>ified:</p>
<blockquote>
YummySoft is now <a href="https://beartype.rtfd.io" rel="nofollow"><img alt="bear-ified" src="https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg"/>
</a>!</blockquote>
<p dir="auto">All this magic and possibly more can be yours with:</p>
<ul dir="auto">
<li><p dir="auto"><strong>Markdown</strong>:</p>
<div data-snippet-clipboard-copy-content="YummySoft is now [![bear-ified](https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg)](https://beartype.rtfd.io)!
"><pre>YummySoft is now [![bear-ified](https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg)](https://beartype.rtfd.io)!</pre></div>
</li>
<li><p dir="auto"><strong>reStructuredText</strong>:</p>
<div data-snippet-clipboard-copy-content="YummySoft is now |bear-ified|!

.. # See https://docutils.sourceforge.io/docs/ref/rst/directives.html#image
.. |bear-ified| image:: https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg
   :align: top
   :target: https://beartype.rtfd.io
   :alt: bear-ified
"><pre>YummySoft is now <span>|bear-ified|</span>!

<span><span>..</span> # See https://docutils.sourceforge.io/docs/ref/rst/directives.html#image</span>
<span></span>.. |<span>bear-ified</span>| <span>image</span>:: <span>https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg</span>
   <span>:align:</span> <span>top</span>
   <span>:target:</span> <span>https://beartype.rtfd.io</span>
   <span>:alt:</span> <span>bear-ified</span></pre></div>
</li>
<li><p dir="auto"><strong>Raw HTML</strong>:</p>
<div data-snippet-clipboard-copy-content="YummySoft is now &lt;a href=&#34;https://beartype.rtfd.io&#34;&gt;&lt;img
  src=&#34;https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg&#34;
  alt=&#34;bear-ified&#34;
  style=&#34;vertical-align: middle;&#34;&gt;&lt;/a&gt;!
"><pre>YummySoft is now <span>&lt;</span><span>a</span> <span>href</span>=&#34;<span>https://beartype.rtfd.io</span>&#34;<span>&gt;</span><span>&lt;</span><span>img</span>
  <span>src</span>=&#34;<span>https://raw.githubusercontent.com/beartype/beartype-assets/main/badge/bear-ified.svg</span>&#34;
  <span>alt</span>=&#34;<span>bear-ified</span>&#34;
  <span>style</span>=&#34;<span>vertical-align: middle;</span>&#34;<span>&gt;</span><span>&lt;/</span><span>a</span><span>&gt;</span>!</pre></div>
</li>
</ul>
<p dir="auto">Let a soothing pastel bear give your users the reassuring <strong>OK</strong> sign.</p>
<a name="user-content-overview"></a>
<h2 dir="auto"><a id="user-content-overview" aria-hidden="true" href="#overview"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id16">Overview</a></h2>
<p dir="auto">Beartype is a novel first line of defense. In Python&#39;s vast arsenal of
<a href="https://en.wikipedia.org/wiki/Software_quality_assurance" rel="nofollow">software quality assurance (SQA)</a>, beartype holds the <a href="https://en.wikipedia.org/wiki/Shield_wall" rel="nofollow">shield wall</a>
against breaches in type safety by improper parameter and return values
violating developer expectations.</p>
<p dir="auto">Beartype is unopinionated. Beartype inflicts <em>no</em> developer constraints
beyond <a href="#cheatsheet">importation and usage of a single configuration-free decorator</a>. Beartype is trivially integrated into new and existing
applications, stacks, modules, and scripts already annotating callables with
<a href="#compliance">PEP-compliant industry-standard type hints</a>.</p>
<p dir="auto">Beartype is zero-cost. Beartype inflicts <em>no</em> harmful developer tradeoffs,
instead stressing expense-free strategies at both:</p>
<ul dir="auto">
<li><strong>Installation time.</strong> Beartype has no install-time or runtime dependencies,
<a href="#install">supports standard Python package managers</a>, and happily
coexists with competing static type checkers and other runtime type checkers.</li>
<li><strong>Runtime.</strong> Thanks to aggressive memoization and dynamic code generation at
decoration time, beartype guarantees <a href="#timings">O(1) non-amortized worst-case runtime
complexity with negligible constant factors</a>.</li>
</ul>
<a name="user-content-versus-static-type-checkers"></a>
<h3 dir="auto"><a id="user-content-versus-static-type-checkers" aria-hidden="true" href="#versus-static-type-checkers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id17">Versus Static Type Checkers</a></h3>
<p dir="auto">Like <a href="#static-type-checkers">competing static type checkers</a> operating at
the coarse-grained application level via ad-hoc heuristic type inference (e.g.,
<a href="https://pyre-check.org" rel="nofollow">Pyre</a>, <a href="http://mypy-lang.org" rel="nofollow">mypy</a>, <a href="https://github.com/Microsoft/pyright">pyright</a>, <a href="https://github.com/google/pytype">pytype</a>), beartype effectively <a href="#timings">imposes no runtime
overhead</a>. Unlike static type checkers:</p>
<ul dir="auto">
<li>Beartype operates exclusively at the fine-grained callable level of
pure-Python functions and methods via the standard decorator design pattern.
This renders beartype natively compatible with <em>all</em> interpreters and
compilers targeting the Python language – including <a href="https://www.pypy.org" rel="nofollow">PyPy</a>, <a href="https://numba.pydata.org" rel="nofollow">Numba</a>, <a href="https://nuitka.net" rel="nofollow">Nuitka</a>,
and (wait for it) <a href="https://github.com/python/cpython">CPython</a> itself.</li>
<li>Beartype enjoys deterministic Turing-complete access to the actual callables,
objects, and types being type-checked. This enables beartype to solve dynamic
problems decidable only at runtime – including type-checking of arbitrary
objects whose:<ul dir="auto">
<li>Metaclasses <a href="https://github.com/beartype/beartype/blob/main/_isinstancecheck">dynamically customize instance and subclass checks</a> by implementing the <code>__instancecheck__()</code> and/or
<code>__subclasscheck__()</code> dunder methods, including:<ul dir="auto">
<li><a href="https://www.python.org/dev/peps/pep-3119" rel="nofollow">PEP 3119</a>-compliant metaclasses (e.g., <a href="https://docs.python.org/3/library/abc.html#abc.ABCMeta" rel="nofollow">abc.ABCMeta</a>).</li>
</ul>
</li>
<li>Pseudo-superclasses <a href="https://github.com/beartype/beartype/blob/main/_mro_entries">dynamically customize the method resolution order
(MRO) of subclasses</a> by implementing the
<code>__mro_entries__()</code> dunder method, including:<ul dir="auto">
<li><a href="https://www.python.org/dev/peps/pep-0560" rel="nofollow">PEP 560</a>-compliant pseudo-superclasses.</li>
</ul>
</li>
<li>Classes dynamically register themselves with standard abstract base classes
(ABCs), including:<ul dir="auto">
<li><a href="https://www.python.org/dev/peps/pep-3119" rel="nofollow">PEP 3119</a>-compliant third-party virtual base classes.</li>
<li><a href="https://www.python.org/dev/peps/pep-3141" rel="nofollow">PEP 3141</a>-compliant third-party virtual number classes (e.g., <a href="https://www.sympy.org" rel="nofollow">SymPy</a>).</li>
</ul>
</li>
<li>Classes are dynamically constructed or altered, including by:<ul dir="auto">
<li>Class decorators.</li>
<li>Class factory functions and methods.</li>
<li>Metaclasses.</li>
<li>Monkey patches.</li>
</ul>
</li>
</ul>
</li>
</ul>
<a name="user-content-versus-runtime-type-checkers"></a>
<h3 dir="auto"><a id="user-content-versus-runtime-type-checkers" aria-hidden="true" href="#versus-runtime-type-checkers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id18">Versus Runtime Type Checkers</a></h3>
<p dir="auto">Unlike <a href="#runtime-type-checkers">comparable runtime type checkers</a> (e.g.,
<a href="https://pydantic-docs.helpmanual.io" rel="nofollow">pydantic</a>, <a href="https://github.com/agronholm/typeguard">typeguard</a>), beartype decorates callables with dynamically generated
wrappers efficiently type-checking each parameter passed to and value returned
from those callables in constant time. Since &#34;performance by default&#34; is our
first-class concern, generated wrappers are guaranteed to:</p>
<ul dir="auto">
<li>Exhibit <a href="#timings">O(1) non-amortized worst-case time complexity with negligible
constant factors</a>.</li>
<li>Be either more efficient (in the common case) or exactly as efficient minus
the cost of an additional stack frame (in the worst case) as equivalent
type-checking implemented by hand, <em>which no one should ever do.</em></li>
</ul>
<a name="user-content-frequently-asked-questions-faq"></a>
<h2 dir="auto"><a id="user-content-frequently-asked-questions-faq" aria-hidden="true" href="#frequently-asked-questions-faq"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id19">Frequently Asked Questions (FAQ)</a></h2>
<a name="user-content-what-is-beartype"></a>
<h3 dir="auto"><a id="user-content-what-is-beartype" aria-hidden="true" href="#what-is-beartype"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id20">What is beartype?</a></h3>
<p dir="auto">Why, it&#39;s the world&#39;s first <code>O(1)</code> runtime type checker in any
<a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> lang... oh, <em>forget it.</em></p>
<p dir="auto">You know <a href="https://github.com/agronholm/typeguard">typeguard</a>? Then you know <code>beartype</code> – more or less. <code>beartype</code> is
<a href="https://github.com/agronholm/typeguard">typeguard</a>&#39;s younger, faster, and slightly sketchier brother who routinely
ingests performance-enhancing anabolic nootropics.</p>
<a name="user-content-what-is-typeguard"></a>
<h3 dir="auto"><a id="user-content-what-is-typeguard" aria-hidden="true" href="#what-is-typeguard"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id21">What is typeguard?</a></h3>
<p dir="auto"><strong>Okay.</strong> Work with us here, people.</p>
<p dir="auto">You know how in low-level <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">statically-typed</a> <a href="https://en.wikipedia.org/wiki/Memory_safety" rel="nofollow">memory-unsafe</a> languages that no one should use like <a href="https://en.wikipedia.org/wiki/C_(programming_language)" rel="nofollow">C</a> and <a href="https://en.wikipedia.org/wiki/C%2B%2B" rel="nofollow">C++</a>, the compiler
validates at compilation time the types of all values passed to and returned
from all functions and methods across the entire codebase?</p>
<div data-snippet-clipboard-copy-content="$ gcc -Werror=int-conversion -xc - &lt;&lt;EOL
#include &lt;stdio.h&gt;
int main() {
    printf(&#34;Hello, world!&#34;);
    return &#34;Goodbye, world.&#34;;
}
EOL
&lt;stdin&gt;: In function ‘main’:
&lt;stdin&gt;:4:11: error: returning ‘char *’ from a function with return type
‘int’ makes integer from pointer without a cast [-Werror=int-conversion]
cc1: some warnings being treated as errors
"><pre>$ gcc -Werror=int-conversion -xc - <span><span>&lt;&lt;</span><span>EOL</span></span>
<span>#include &lt;stdio.h&gt;</span>
<span>int main() {</span>
<span>    printf(&#34;Hello, world!&#34;);</span>
<span>    return &#34;Goodbye, world.&#34;;</span>
<span>}</span>
<span><span>EOL</span></span>
<span>&lt;</span>stdin<span>&gt;</span>: In <span>function</span> <span>‘main’:</span>
<span>&lt;</span>stdin<span>&gt;</span>:4:11: error: returning ‘char <span>*</span>’ from a <span>function</span> <span>with</span> <span>return</span> <span>type</span>
‘int’ makes integer from pointer without a cast [-Werror<span>=</span>int-conversion]
cc1: some warnings being treated as errors</pre></div>
<p dir="auto">You know how in high-level <a href="https://en.wikipedia.org/wiki/Duck_typing" rel="nofollow">duck-typed</a> languages that
everyone should use instead like <a href="https://www.python.org" rel="nofollow">Python</a> and <a href="https://www.ruby-lang.org" rel="nofollow">Ruby</a>, the interpreter performs no
such validation at any interpretation phase but instead permits any arbitrary
values to be passed to or returned from any function or method?</p>
<div data-snippet-clipboard-copy-content="$ python3 - &lt;&lt;EOL
def main() -&gt; int:
    print(&#34;Hello, world!&#34;);
    return &#34;Goodbye, world.&#34;;
main()
EOL

Hello, world!
"><pre>$ python3 - <span><span>&lt;&lt;</span><span>EOL</span></span>
<span>def main() -&gt; int:</span>
<span>    print(&#34;Hello, world!&#34;);</span>
<span>    return &#34;Goodbye, world.&#34;;</span>
<span>main()</span>
<span><span>EOL</span></span>

Hello, world<span>!</span></pre></div>
<p dir="auto">Runtime type checkers like <a href="https://github.com/beartype/beartype">beartype</a> and <a href="https://github.com/agronholm/typeguard">typeguard</a> selectively shift the dial
on type safety in Python from <a href="https://en.wikipedia.org/wiki/Duck_typing" rel="nofollow">duck</a> to <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">static typing</a> while still preserving all of the permissive benefits of
the former as a default behaviour.</p>
<div data-snippet-clipboard-copy-content="$ python3 - &lt;&lt;EOL
from beartype import beartype
@beartype
def main() -&gt; int:
    print(&#34;Hello, world!&#34;);
    return &#34;Goodbye, world.&#34;;
main()
EOL

Hello, world!
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 6, in &lt;module&gt;
  File &#34;&lt;string&gt;&#34;, line 17, in main
  File &#34;/home/leycec/py/beartype/beartype/_decor/_code/_pep/_error/errormain.py&#34;, line 218, in raise_pep_call_exception
    raise exception_cls(
beartype.roar.BeartypeCallHintPepReturnException: @beartyped main() return
&#39;Goodbye, world.&#39; violates type hint &lt;class &#39;int&#39;&gt;, as value &#39;Goodbye,
world.&#39; not int.
"><pre>$ python3 - <span><span>&lt;&lt;</span><span>EOL</span></span>
<span>from beartype import beartype</span>
<span>@beartype</span>
<span>def main() -&gt; int:</span>
<span>    print(&#34;Hello, world!&#34;);</span>
<span>    return &#34;Goodbye, world.&#34;;</span>
<span>main()</span>
<span><span>EOL</span></span>

Hello, world<span>!</span>
Traceback (most recent call last):
  File <span><span>&#34;</span>&lt;stdin&gt;<span>&#34;</span></span>, line 6, <span>in</span> <span>&lt;</span>module<span>&gt;</span>
  File <span><span>&#34;</span>&lt;string&gt;<span>&#34;</span></span>, line 17, <span>in</span> main
  File <span><span>&#34;</span>/home/leycec/py/beartype/beartype/_decor/_code/_pep/_error/errormain.py<span>&#34;</span></span>, line 218, <span>in</span> raise_pep_call_exception
    raise exception_cls(
beartype.roar.BeartypeCallHintPepReturnException: @beartyped <span>main</span>() <span>return</span>
<span><span>&#39;</span>Goodbye, world.<span>&#39;</span></span> violates <span>type</span> hint <span>&lt;</span>class <span><span>&#39;</span>int<span>&#39;</span></span><span>&gt;</span>, as value <span><span>&#39;</span>Goodbye,</span>
<span>world.<span>&#39;</span></span> not int.</pre></div>
<a name="user-content-when-should-i-use-beartype"></a>
<h3 dir="auto"><a id="user-content-when-should-i-use-beartype" aria-hidden="true" href="#when-should-i-use-beartype"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id22">When should I use beartype?</a></h3>
<p dir="auto">Use <code>beartype</code> to assure the quality of Python code beyond what tests alone
can assure. If you have yet to test, do that first with a <a href="https://docs.pytest.org" rel="nofollow">pytest</a>-based test
suite, <a href="https://tox.readthedocs.io" rel="nofollow">tox</a> configuration, and <a href="https://en.wikipedia.org/wiki/Continuous_integration" rel="nofollow">continuous integration (CI)</a>. If you have any time, money, or motivation left, <a href="#compliance">annotate
callables with PEP-compliant type hints</a> and <a href="#usage">decorate those
callables with the @beartype.beartype decorator</a>.</p>
<p dir="auto">Prefer <code>beartype</code> over other runtime and static type checkers whenever you
lack control over the objects passed to or returned from your callables –
<em>especially</em> whenever you cannot limit the size of those objects. This includes
common developer scenarios like:</p>
<ul dir="auto">
<li>You are the author of an <strong>open-source library</strong> intended to be reused by a
general audience.</li>
<li>You are the author of a <strong>public app</strong> accepting as input or generating as
output sufficiently large data internally passed to or returned from app
callables.</li>
</ul>
<p dir="auto">If none of the above apply, prefer <code>beartype</code> over static type checkers
whenever:</p>
<ul dir="auto">
<li><p dir="auto">You want to <a href="#versus-static-type-checkers">check types decidable only at runtime</a>.</p>
</li>
<li><p dir="auto">You want to write code rather than fight a static type checker, because
<a href="https://en.wikipedia.org/wiki/Type_inference" rel="nofollow">static type inference</a> of a <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a>
language is guaranteed to fail and frequently does. If you&#39;ve ever cursed the
sky after suffixing working code incorrectly typed by <a href="http://mypy-lang.org" rel="nofollow">mypy</a> with non-portable
vendor-specific pragmas like <code># type: ignore[{unreadable_error}]</code>,
<code>beartype</code> was written for you.</p>
</li>
<li><p dir="auto">You want to preserve <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamic typing</a>, because Python is a
<a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> language. Unlike <code>beartype</code>, static type checkers
enforce <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">static typing</a> and are thus strongly opinionated; they believe
<a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamic typing</a> is harmful and emit errors on <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> code.
This includes common use patterns like changing the type of a variable by
assigning that variable a value whose type differs from its initial value.
Want to freeze a variable from a <code>set</code> into a <code>frozenset</code>? That&#39;s sad,
because static type checkers don&#39;t want you to. In contrast:</p>
<blockquote>
<p dir="auto"><strong>Beartype never emits errors, warnings, or exceptions on dynamically-typed
code,</strong> because Python is not an error.</p>
<p dir="auto"><strong>Beartype believes dynamic typing is beneficial by default,</strong> because
Python is beneficial by default.</p>
<p dir="auto"><strong>Beartype is unopinionated.</strong> That&#39;s because <code>beartype</code> <a href="#versus-static-type-checkers">operates
exclusively at the higher level of pure-Python callables</a> rather than the lower level of individual statements
<em>inside</em> pure-Python callables. Unlike static type checkers, <code>beartype</code>
can&#39;t be opinionated about things that no one should be.</p>
</blockquote>
</li>
</ul>
<p dir="auto">If none of the above <em>still</em> apply, still use <code>beartype</code>. It&#39;s <a href="https://en.wikipedia.org/wiki/Gratis_versus_libre" rel="nofollow">free
as in beer and speech</a>, <a href="#overview">cost-free at installation-
and runtime</a>, and transparently stacks with existing
type-checking solutions. Leverage <code>beartype</code> until you find something that
suites you better, because <code>beartype</code> is <em>always</em> better than nothing.</p>
<a name="user-content-why-should-i-use-beartype"></a>
<h3 dir="auto"><a id="user-content-why-should-i-use-beartype" aria-hidden="true" href="#why-should-i-use-beartype"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id23">Why should I use beartype?</a></h3>
<p dir="auto">The idea of <code>beartype</code> is that it never costs you anything. It might not do
as much as you&#39;d like, but it will always do <em>something</em> – which is more than
Python&#39;s default behaviour, which is to do <em>nothing</em> and ignore type hints
altogether. This means you can always safely add <code>beartype</code> to any Python
package, module, app, or script regardless of size, scope, funding, or audience
and never worry about your backend <a href="https://www.djangoproject.com" rel="nofollow">Django</a> server taking a nosedive on St.
Patty&#39;s Day just because your frontend <a href="https://reactjs.org" rel="nofollow">React</a> client helpfully sent a 5MB JSON
file serializing a doubly-nested list of integers.</p>
<p dir="auto">The idea of <a href="https://github.com/agronholm/typeguard">typeguard</a> is that it does <em>everything.</em> If you annotate a function
decorated by <a href="https://github.com/agronholm/typeguard">typeguard</a> as accepting a triply-nested list of integers and pass
that function a list of 1,000 nested lists of 1,000 nested lists of 1,000
integers, <em>every</em> call to that function will check <em>every</em> integer transitively
nested in that list – even if that list never changes. Did we mention that list
transitively contains 1,000,000,000 integers in total?</p>
<div data-snippet-clipboard-copy-content="$ python3 -m timeit -n 1 -r 1 -s &#39;
from typeguard import typechecked
@typechecked
def behold(the_great_destroyer_of_apps: list[list[list[int]]]) -&gt; int:
    return len(the_great_destroyer_of_apps)
&#39; &#39;behold([[[0]*1000]*1000]*1000)&#39;

1 loop, best of 1: 6.42e+03 sec per loop
"><pre>$ python3 -m timeit -n 1 -r 1 -s <span><span>&#39;</span></span>
<span>from typeguard import typechecked</span>
<span>@typechecked</span>
<span>def behold(the_great_destroyer_of_apps: list[list[list[int]]]) -&gt; int:</span>
<span>    return len(the_great_destroyer_of_apps)</span>
<span><span>&#39;</span></span> <span><span>&#39;</span>behold([[[0]*1000]*1000]*1000)<span>&#39;</span></span>

1 loop, best of 1: 6.42e+03 sec per loop</pre></div>
<p dir="auto">Yes, <code>6.42e+03 sec per loop == 6420 seconds == 107 minutes == 1 hour, 47
minutes</code> to check a single list once. Yes, it&#39;s an uncommonly large list, but
it&#39;s still just a list. This is the worst-case cost of a single call to a
function decorated by a naïve runtime type checker.</p>
<a name="user-content-what-does-beartype-do"></a>
<h3 dir="auto"><a id="user-content-what-does-beartype-do" aria-hidden="true" href="#what-does-beartype-do"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id24">What does beartype do?</a></h3>
<p dir="auto">Generally, as little as it can while still satisfying the accepted definition
of &#34;runtime type checker.&#34; Specifically, <code>beartype</code> performs a <a href="#that-s-some-catch-that-catch-22">one-way
random walk over the expected data structure of objects passed to and returned
from @beartype-decorated functions and methods</a>. Basically, <code>beartype</code> type-checks randomly sampled data.</p>
<p dir="auto">Consider <a href="#why-should-i-use-beartype">the prior example of a function annotated as accepting a
triply-nested list of integers passed a list containing 1,000 nested lists each
containing 1,000 nested lists each containing 1,000 integers</a>.</p>
<p dir="auto">When decorated by <a href="https://github.com/agronholm/typeguard">typeguard</a>, every call to that function checks every integer
nested in that list.</p>
<p dir="auto">When decorated by <code>beartype</code>, every call to the same function checks only a
single random integer contained in a single random nested list contained in a
single random nested list contained in that parent list. This is what we mean
by the quaint phrase &#34;one-way random walk over the expected data structure.&#34;</p>
<div data-snippet-clipboard-copy-content="$ python3 -m timeit -n 1024 -r 4 -s &#39;
from beartype import beartype
@beartype
def behold(the_great_destroyer_of_apps: list[list[list[int]]]) -&gt; int:
   return len(the_great_destroyer_of_apps)
&#39; &#39;behold([[[0]*1000]*1000]*1000)&#39;

1024 loops, best of 4: 13.8 usec per loop
"><pre>$ python3 -m timeit -n 1024 -r 4 -s <span><span>&#39;</span></span>
<span>from beartype import beartype</span>
<span>@beartype</span>
<span>def behold(the_great_destroyer_of_apps: list[list[list[int]]]) -&gt; int:</span>
<span>   return len(the_great_destroyer_of_apps)</span>
<span><span>&#39;</span></span> <span><span>&#39;</span>behold([[[0]*1000]*1000]*1000)<span>&#39;</span></span>

1024 loops, best of 4: 13.8 usec per loop</pre></div>
<p dir="auto"><code>13.8 usec per loop == 13.8 microseconds = 0.0000138 seconds</code> to transitively
check only a random integer nested in a single triply-nested list passed to
each call of that function. This is the worst-case cost of a single call to a
function decorated by an <code>O(1)</code> runtime type checker.</p>
<a name="user-content-how-do-i-type-check"></a>
<h3 dir="auto"><a id="user-content-how-do-i-type-check" aria-hidden="true" href="#how-do-i-type-check"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id25">How do I type-check...</a></h3>
<p dir="auto">...yes? Go on.</p>
<a name="user-content-boto3-types"></a>
<h4 dir="auto"><a id="user-content-boto3-types" aria-hidden="true" href="#boto3-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id26">...Boto3 types?</a></h4>
<p dir="auto"><strong>tl;dr:</strong> You just want <a href="https://github.com/paulhutchings/bearboto3">bearboto3</a>, a well-maintained third-party package
cleanly integrating <code>beartype</code> <strong>+</strong> <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a>. But you&#39;re not doing that.
You&#39;re reading on to find out why you want <a href="https://github.com/paulhutchings/bearboto3">bearboto3</a>, aren&#39;t you? I <em>knew</em> it.</p>
<p dir="auto"><a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a> is the official Amazon Web Services (AWS) Software Development Kit (SDK)
for Python. Type-checking <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a> types is decidedly non-trivial, because <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a>
dynamically fabricates unimportable types from runtime service requests. These
types <em>cannot</em> be externally accessed and thus <em>cannot</em> be used as type hints.</p>
<p dir="auto"><strong>H-hey!</strong> Put down the hot butter knife. Your Friday night may be up in
flames, but we&#39;re gonna put out the fire. It&#39;s what we do here. Now, you have
two competing solutions with concomitant tradeoffs. You can type-check <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a>
types against either:</p>
<ul dir="auto">
<li><strong>Static type checkers</strong> (e.g., <a href="http://mypy-lang.org" rel="nofollow">mypy</a>, <a href="https://github.com/Microsoft/pyright">pyright</a>) by importing <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a> stub
types from an external third-party dependency (e.g., <a href="https://mypy-boto3.readthedocs.io" rel="nofollow">mypy-boto3</a>), enabling
context-aware code completion across compliant IDEs (e.g., <a href="https://en.wikipedia.org/wiki/PyCharm" rel="nofollow">PyCharm</a>, <a href="https://github.com/microsoft/pylance-release">VSCode
Pylance</a>). Those types are merely placeholder stubs; they do <em>not</em>
correspond to actual <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a> types and thus break runtime type checkers
(including <code>beartype</code>) when used as type hints.</li>
<li><strong>Beartype</strong> by fabricating your own <a href="#beartype-validators">PEP-compliant beartype validators</a>, enabling <code>beartype</code> to validate arbitrary
objects against actual <a href="https://aws.amazon.com/sdk-for-python" rel="nofollow">Boto3</a> types at runtime when used as type hints. You
already require <code>beartype</code>, so no additional third-party dependencies are
required. Those validators are silently ignored by static type checkers; they
do <em>not</em> enable context-aware code completion across compliant IDEs.</li>
</ul>
<p dir="auto">&#34;B-but that <em>sucks</em>! How can we have our salmon and devour it too?&#34;, you demand
with a tremulous quaver. Excessive caffeine and inadequate gaming did you no
favors tonight. You know this. Yet again you reach for the hot butter knife.</p>
<p dir="auto"><strong>H-hey!</strong> You can, okay? You can have everything that market forces demand.
Bring to <em>bear</em> <sup>cough</sup> the combined powers of <a href="https://www.python.org/dev/peps/pep-0484/#type-aliases" rel="nofollow">PEP 484-compliant
type aliases</a>, the <a href="https://docs.python.org/3/library/typing.html#typing.TYPE_CHECKING" rel="nofollow">PEP 484-compliant &#34;typing.TYPE_CHECKING&#34;
boolean global</a>, and <a href="#beartype-validators">beartype validators</a> to satisfy both static and runtime type checkers:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from boto3 import resource
from boto3.resources.base import ServiceResource
from typing import TYPE_CHECKING

# If performing static type-checking (e.g., mypy, pyright), import boto3
# stub types safely usable *ONLY* by static type checkers.
if TYPE_CHECKING:
    from mypy_boto3_s3.service_resource import Bucket
# Else, @beartime-based runtime type-checking is being performed. Alias the
# same boto3 stub types imported above to their semantically equivalent
# beartype validators accessible *ONLY* to runtime type checkers.
else:
    # Import even more requisite machinery. Can&#39;t have enough, I say!
    from beartype.vale import IsAttr, IsEqual
    from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
    # from typing_extensions import Annotated   # &lt;-- if Python &lt; 3.9.0

    # Generalize this to other boto3 types by copy-and-pasting this and
    # replacing the base type and &#34;s3.Bucket&#34; with the wonky runtime names
    # of those types. Sadly, there is no one-size-fits all common base class,
    # but you should find what you need in the following places:
    # * &#34;boto3.resources.base.ServiceResource&#34;.
    # * &#34;boto3.resources.collection.ResourceCollection&#34;.
    # * &#34;botocore.client.BaseClient&#34;.
    # * &#34;botocore.paginate.Paginator&#34;.
    # * &#34;botocore.waiter.Waiter&#34;.
    Bucket = Annotated[ServiceResource,
        IsAttr[&#39;__class__&#39;, IsAttr[&#39;__name__&#39;, IsEqual[&#34;s3.Bucket&#34;]]]]

# Do this for the good of the gross domestic product, @beartype.
@beartype
def get_s3_bucket_example() -&gt; Bucket:
    s3 = resource(&#39;s3&#39;)
    return s3.Bucket(&#39;example&#39;)
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>boto3</span> <span>import</span> <span>resource</span>
<span>from</span> <span>boto3</span>.<span>resources</span>.<span>base</span> <span>import</span> <span>ServiceResource</span>
<span>from</span> <span>typing</span> <span>import</span> <span>TYPE_CHECKING</span>

<span># If performing static type-checking (e.g., mypy, pyright), import boto3</span>
<span># stub types safely usable *ONLY* by static type checkers.</span>
<span>if</span> <span>TYPE_CHECKING</span>:
    <span>from</span> <span>mypy_boto3_s3</span>.<span>service_resource</span> <span>import</span> <span>Bucket</span>
<span># Else, @beartime-based runtime type-checking is being performed. Alias the</span>
<span># same boto3 stub types imported above to their semantically equivalent</span>
<span># beartype validators accessible *ONLY* to runtime type checkers.</span>
<span>else</span>:
    <span># Import even more requisite machinery. Can&#39;t have enough, I say!</span>
    <span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsAttr</span>, <span>IsEqual</span>
    <span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
    <span># from typing_extensions import Annotated   # &lt;-- if Python &lt; 3.9.0</span>

    <span># Generalize this to other boto3 types by copy-and-pasting this and</span>
    <span># replacing the base type and &#34;s3.Bucket&#34; with the wonky runtime names</span>
    <span># of those types. Sadly, there is no one-size-fits all common base class,</span>
    <span># but you should find what you need in the following places:</span>
    <span># * &#34;boto3.resources.base.ServiceResource&#34;.</span>
    <span># * &#34;boto3.resources.collection.ResourceCollection&#34;.</span>
    <span># * &#34;botocore.client.BaseClient&#34;.</span>
    <span># * &#34;botocore.paginate.Paginator&#34;.</span>
    <span># * &#34;botocore.waiter.Waiter&#34;.</span>
    <span>Bucket</span> <span>=</span> <span>Annotated</span>[<span>ServiceResource</span>,
        <span>IsAttr</span>[<span>&#39;__class__&#39;</span>, <span>IsAttr</span>[<span>&#39;__name__&#39;</span>, <span>IsEqual</span>[<span>&#34;s3.Bucket&#34;</span>]]]]

<span># Do this for the good of the gross domestic product, @beartype.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>get_s3_bucket_example</span>() <span>-&gt;</span> <span>Bucket</span>:
    <span>s3</span> <span>=</span> <span>resource</span>(<span>&#39;s3&#39;</span>)
    <span>return</span> <span>s3</span>.<span>Bucket</span>(<span>&#39;example&#39;</span>)</pre></div>
<p dir="auto">You&#39;re welcome.</p>
<a name="user-content-numpy-arrays"></a>
<h4 dir="auto"><a id="user-content-numpy-arrays" aria-hidden="true" href="#numpy-arrays"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id27">...NumPy arrays?</a></h4>
<p dir="auto">Beartype fully supports <a href="#numpy-type-hints">typed NumPy arrays</a>. Because
beartype cares.</p>
<a name="user-content-usage"></a>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id28">Usage</a></h2>
<p dir="auto">Beartype makes type-checking painless, portable, and purportedly fun. Just:</p>
<blockquote>
<p dir="auto">Decorate functions and methods <a href="#standard-hints">annotated by standard type hints</a> with the <code>@beartype.beartype</code> decorator, which wraps those
functions and methods in performant type-checking dynamically generated
on-the-fly.</p>
<p dir="auto">When <a href="#standard-hints">standard type hints</a> fail to support your use
case, annotate functions and methods with <a href="#beartype-validators">beartype-specific validator type
hints</a> instead. Validators enforce runtime
constraints on the internal structure and contents of parameters and
returns via simple caller-defined lambda functions and declarative
expressions – all seamlessly composable with <a href="#standard-hints">standard type hints</a> in an <a href="#validator-syntax">expressive domain-specific language (DSL)</a> designed just for you.</p>
</blockquote>
<p dir="auto">&#34;Embrace the bear,&#34; says the bear peering over your shoulder as you read this.</p>
<a name="user-content-standard-hints"></a>
<h3 dir="auto"><a id="user-content-standard-hints" aria-hidden="true" href="#standard-hints"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id29">Standard Hints</a></h3>
<p dir="auto">Beartype supports <em>most</em> <a href="#compliance">type hints standardized by the developer community
through Python Enhancement Proposals (PEPs)</a>. Since type
hinting is its own special hell, we&#39;ll start by wading into the
thalassophobia-inducing waters of type-checking with a sane example – the O(1)
<code>@beartype</code> way.</p>
<a name="user-content-toy-example"></a>
<h4 dir="auto"><a id="user-content-toy-example" aria-hidden="true" href="#toy-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id30">Toy Example</a></h4>
<p dir="auto">Let&#39;s type-check a <code>&#34;Hello, Jungle!&#34;</code> toy example. Just:</p>
<ol dir="auto">
<li><p dir="auto">Import the <code>@beartype.beartype</code> decorator:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span></pre></div>
</li>
<li><p dir="auto">Decorate any annotated function with that decorator:</p>
<div data-snippet-clipboard-copy-content="from sys import stderr, stdout
from typing import TextIO

@beartype
def hello_jungle(
    sep: str = &#39; &#39;,
    end: str = &#39;\n&#39;,
    file: TextIO = stdout,
    flush: bool = False,
):
    &#39;&#39;&#39;
    Print &#34;Hello, Jungle!&#34; to a stream, or to sys.stdout by default.

    Optional keyword arguments:
    file:  a file-like object (stream); defaults to the current sys.stdout.
    sep:   string inserted between values, default a space.
    end:   string appended after the last value, default a newline.
    flush: whether to forcibly flush the stream.
    &#39;&#39;&#39;

    print(&#39;Hello, Jungle!&#39;, sep, end, file, flush)
"><pre><span>from</span> <span>sys</span> <span>import</span> <span>stderr</span>, <span>stdout</span>
<span>from</span> <span>typing</span> <span>import</span> <span>TextIO</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>hello_jungle</span>(
    <span>sep</span>: <span>str</span> <span>=</span> <span>&#39; &#39;</span>,
    <span>end</span>: <span>str</span> <span>=</span> <span>&#39;<span>\n</span>&#39;</span>,
    <span>file</span>: <span>TextIO</span> <span>=</span> <span>stdout</span>,
    <span>flush</span>: <span>bool</span> <span>=</span> <span>False</span>,
):
    <span>&#39;&#39;&#39;</span>
<span>    Print &#34;Hello, Jungle!&#34; to a stream, or to sys.stdout by default.</span>
<span></span>
<span>    Optional keyword arguments:</span>
<span>    file:  a file-like object (stream); defaults to the current sys.stdout.</span>
<span>    sep:   string inserted between values, default a space.</span>
<span>    end:   string appended after the last value, default a newline.</span>
<span>    flush: whether to forcibly flush the stream.</span>
<span>    &#39;&#39;&#39;</span>

    <span>print</span>(<span>&#39;Hello, Jungle!&#39;</span>, <span>sep</span>, <span>end</span>, <span>file</span>, <span>flush</span>)</pre></div>
</li>
<li><p dir="auto">Call that function with valid parameters and caper as things work:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; hello_jungle(sep=&#39;...ROOOAR!!!!&#39;, end=&#39;uhoh.&#39;, file=stderr, flush=True)
Hello, Jungle! ...ROOOAR!!!! uhoh.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>hello_jungle</span>(<span>sep</span><span>=</span><span>&#39;...ROOOAR!!!!&#39;</span>, <span>end</span><span>=</span><span>&#39;uhoh.&#39;</span>, <span>file</span><span>=</span><span>stderr</span>, <span>flush</span><span>=</span><span>True</span>)
<span>Hello</span>, <span>Jungle</span>! ...<span>ROOOAR</span>!!!! <span>uhoh</span>.</pre></div>
</li>
<li><p dir="auto">Call that function with invalid parameters and cringe as things blow up with
human-readable exceptions exhibiting the single cause of failure:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; hello_jungle(sep=(
...     b&#34;What? Haven&#39;t you ever seen a byte-string separator before?&#34;))
BeartypeCallHintPepParamException: @beartyped hello_jungle() parameter
sep=b&#34;What? Haven&#39;t you ever seen a byte-string separator before?&#34;
violates type hint &lt;class &#39;str&#39;&gt;, as value b&#34;What? Haven&#39;t you ever seen
a byte-string separator before?&#34; not str.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>hello_jungle</span>(<span>sep</span><span>=</span>(
...     <span>b&#34;What? Haven&#39;t you ever seen a byte-string separator before?&#34;</span>))
<span>BeartypeCallHintPepParamException</span>: @<span>beartyped</span> <span>hello_jungle</span>() <span>parameter</span>
<span>sep</span><span>=</span><span>b&#34;What? Haven&#39;t you ever seen a byte-string separator before?&#34;</span>
<span>violates</span> <span>type</span> <span>hint</span> <span>&lt;</span><span>class</span> <span>&#39;str&#39;</span><span>&gt;</span>, <span>as</span> <span>value</span> b&#34;<span>What</span>? <span>Haven</span>&#39;<span>t</span> <span>you</span> <span>ever</span> <span>seen</span>
<span>a</span> <span>byte</span><span>-</span><span>string</span> <span>separator</span> <span>before</span>?&#34; <span>not</span> <span>str</span>.</pre></div>
</li>
</ol>
<a name="user-content-industrial-example"></a>
<h4 dir="auto"><a id="user-content-industrial-example" aria-hidden="true" href="#industrial-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id31">Industrial Example</a></h4>
<p dir="auto">Let&#39;s wrap the <a href="https://numpy.org/doc/stable/reference/generated/numpy.empty_like.html" rel="nofollow">third-party numpy.empty_like() function</a>
with automated runtime type checking to demonstrate beartype&#39;s support for
non-trivial combinations of nested type hints compliant with different PEPs:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from collections.abc import Sequence
from typing import Optional, Union
import numpy as np

@beartype
def empty_like_bear(
    prototype: object,
    dtype: Optional[np.dtype] = None,
    order: str = &#39;K&#39;,
    subok: bool = True,
    shape: Optional[Union[int, Sequence[int]]] = None,
) -&gt; np.ndarray:
    return np.empty_like(prototype, dtype, order, subok, shape)
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>collections</span>.<span>abc</span> <span>import</span> <span>Sequence</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Optional</span>, <span>Union</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>empty_like_bear</span>(
    <span>prototype</span>: <span>object</span>,
    <span>dtype</span>: <span>Optional</span>[<span>np</span>.<span>dtype</span>] <span>=</span> <span>None</span>,
    <span>order</span>: <span>str</span> <span>=</span> <span>&#39;K&#39;</span>,
    <span>subok</span>: <span>bool</span> <span>=</span> <span>True</span>,
    <span>shape</span>: <span>Optional</span>[<span>Union</span>[<span>int</span>, <span>Sequence</span>[<span>int</span>]]] <span>=</span> <span>None</span>,
) <span>-&gt;</span> <span>np</span>.<span>ndarray</span>:
    <span>return</span> <span>np</span>.<span>empty_like</span>(<span>prototype</span>, <span>dtype</span>, <span>order</span>, <span>subok</span>, <span>shape</span>)</pre></div>
<p dir="auto">Note the non-trivial hint for the optional <code>shape</code> parameter, synthesized
from a <a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">PEP 484-compliant optional</a> of a <a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">PEP
484-compliant union</a> of a builtin type and a <a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" rel="nofollow">PEP
585-compliant subscripted abstract base class (ABC)</a>, accepting as valid either:</p>
<ul dir="auto">
<li>The <code>None</code> singleton.</li>
<li>An integer.</li>
<li>A sequence of integers.</li>
</ul>
<p dir="auto">Let&#39;s call that wrapper with both valid and invalid parameters:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; empty_like_bear(([1,2,3], [4,5,6]), shape=(2, 2))
array([[94447336794963,              0],
       [             7,             -1]])
&gt;&gt;&gt; empty_like_bear(([1,2,3], [4,5,6]), shape=([2], [2]))
BeartypeCallHintPepParamException: @beartyped empty_like_bear() parameter
shape=([2], [2]) violates type hint typing.Union[int,
collections.abc.Sequence, NoneType], as ([2], [2]):
* Not &lt;class &#34;builtins.NoneType&#34;&gt; or int.
* Tuple item 0 value [2] not int.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>empty_like_bear</span>(([<span>1</span>,<span>2</span>,<span>3</span>], [<span>4</span>,<span>5</span>,<span>6</span>]), <span>shape</span><span>=</span>(<span>2</span>, <span>2</span>))
<span>array</span>([[<span>94447336794963</span>,              <span>0</span>],
       [             <span>7</span>,             <span>-</span><span>1</span>]])
<span>&gt;&gt;</span><span>&gt;</span> <span>empty_like_bear</span>(([<span>1</span>,<span>2</span>,<span>3</span>], [<span>4</span>,<span>5</span>,<span>6</span>]), <span>shape</span><span>=</span>([<span>2</span>], [<span>2</span>]))
<span>BeartypeCallHintPepParamException</span>: @<span>beartyped</span> <span>empty_like_bear</span>() <span>parameter</span>
<span>shape</span><span>=</span>([<span>2</span>], [<span>2</span>]) <span>violates</span> <span>type</span> <span>hint</span> <span>typing</span>.<span>Union</span>[<span>int</span>,
<span>collections</span>.<span>abc</span>.<span>Sequence</span>, <span>NoneType</span>], <span>as</span> ([<span>2</span>], [<span>2</span>]):
<span>*</span> <span>Not</span> <span>&lt;</span><span>class</span> <span>&#34;builtins.NoneType&#34;</span><span>&gt;</span> <span>or</span> <span>int</span>.
<span>*</span> <span>Tuple</span> <span>item</span> <span>0</span> <span>value</span> [<span>2</span>] <span>not</span> <span>int</span>.</pre></div>
<p dir="auto">Note the human-readable message of the raised exception, containing a bulleted
list enumerating the various ways this invalid parameter fails to satisfy its
type hint, including the types and indices of the first container item failing
to satisfy the nested <code>Sequence[int]</code> hint.</p>
<p dir="auto">See a <a href="#implementation">subsequent section</a> for actual code dynamically
generated by <code>beartype</code> for real-world use cases resembling those above. Fun!</p>
<a name="user-content-would-you-like-to-know-more"></a>
<h3 dir="auto"><a id="user-content-would-you-like-to-know-more" aria-hidden="true" href="#would-you-like-to-know-more"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id32">Would You Like to Know More?</a></h3>
<p dir="auto">If you know <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">type hints</a>, you know <code>beartype</code>. Since
<code>beartype</code> is driven entirely by <a href="https://www.python.org/dev/peps" rel="nofollow">tool-agnostic community standards</a>, the public API for <code>beartype</code> is exactly the sum of those standards.
As the user, all you need to know is that decorated callables magically raise
human-readable exceptions when you pass parameters or return values violating
the PEP-compliant type hints annotating those parameters or returns.</p>
<p dir="auto">If you don&#39;t know <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">type hints</a>, this is your moment to go deep on
the hardest hammer in Python&#39;s <a href="https://en.wikipedia.org/wiki/Software_quality_assurance" rel="nofollow">SQA</a> toolbox. Here are a few friendly primers to
guide you on your maiden voyage through the misty archipelagos of type hinting:</p>
<ul dir="auto">
<li><a href="https://realpython.com/python-type-checking" rel="nofollow">&#34;Python Type Checking (Guide)&#34;</a>, a comprehensive third-party
introduction to the subject. Like most existing articles, this guide predates
<code>O(1)</code> runtime type checkers and thus discusses only static type checking.
Thankfully, the underlying syntax and semantics cleanly translate to runtime
type checking.</li>
<li><a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">&#34;PEP 484 -- Type Hints&#34;</a>, the defining standard, holy grail,
and first testament of type hinting <a href="https://en.wikipedia.org/wiki/Guido_van_Rossum" rel="nofollow">personally authored by Python&#39;s former
Benevolent Dictator for Life (BDFL) himself, Guido van Rossum</a>. Since it&#39;s surprisingly approachable and covers all the core
conceits in detail, we recommend reading at least a few sections of interest.
Since it&#39;s really a doctoral thesis by another name, we can&#39;t recommend
reading it in entirety. <em>So it goes.</em></li>
</ul>
<a name="user-content-beartype-validators"></a>
<h3 dir="auto"><a id="user-content-beartype-validators" aria-hidden="true" href="#beartype-validators"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id33">Beartype Validators</a></h3>
<pre>Validate anything with two-line type hints
       designed by you ⇄ built by beartype
</pre>
<p dir="auto">When official type hints fail to suffice, design your own PEP-compliant type
hints with compact two-line <strong>beartype validators:</strong></p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import Is
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching any two-dimensional NumPy array of floats of arbitrary
# precision. Aye, typing matey. Beartype validators a-hoy!
import numpy as np
Numpy2DFloatArray = Annotated[np.ndarray, Is[lambda array:
    array.ndim == 2 and np.issubdtype(array.dtype, np.floating)]]

# Annotate @beartype-decorated callables with beartype validators.
@beartype
def polygon_area(polygon: Numpy2DFloatArray) -&gt; float:
    &#39;&#39;&#39;
    Area of a two-dimensional polygon of floats defined as a set of
    counter-clockwise points, calculated via Green&#39;s theorem.

    *Don&#39;t ask.*
    &#39;&#39;&#39;

    # Calculate and return the desired area. Pretend we understand this.
    polygon_rolled = np.roll(polygon, -1, axis=0)
    return np.abs(0.5*np.sum(
        polygon[:,0]*polygon_rolled[:,1] -
        polygon_rolled[:,0]*polygon[:,1]))
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching any two-dimensional NumPy array of floats of arbitrary</span>
<span># precision. Aye, typing matey. Beartype validators a-hoy!</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>Numpy2DFloatArray</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>, <span>Is</span>[<span>lambda</span> <span>array</span>:
    <span>array</span>.<span>ndim</span> <span>==</span> <span>2</span> <span>and</span> <span>np</span>.<span>issubdtype</span>(<span>array</span>.<span>dtype</span>, <span>np</span>.<span>floating</span>)]]

<span># Annotate @beartype-decorated callables with beartype validators.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>polygon_area</span>(<span>polygon</span>: <span>Numpy2DFloatArray</span>) <span>-&gt;</span> <span>float</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Area of a two-dimensional polygon of floats defined as a set of</span>
<span>    counter-clockwise points, calculated via Green&#39;s theorem.</span>
<span></span>
<span>    *Don&#39;t ask.*</span>
<span>    &#39;&#39;&#39;</span>

    <span># Calculate and return the desired area. Pretend we understand this.</span>
    <span>polygon_rolled</span> <span>=</span> <span>np</span>.<span>roll</span>(<span>polygon</span>, <span>-</span><span>1</span>, <span>axis</span><span>=</span><span>0</span>)
    <span>return</span> <span>np</span>.<span>abs</span>(<span>0.5</span><span>*</span><span>np</span>.<span>sum</span>(
        <span>polygon</span>[:,<span>0</span>]<span>*</span><span>polygon_rolled</span>[:,<span>1</span>] <span>-</span>
        <span>polygon_rolled</span>[:,<span>0</span>]<span>*</span><span>polygon</span>[:,<span>1</span>]))</pre></div>
<p dir="auto">Validators enforce arbitrary runtime constraints on the internal structure and
contents of parameters and returns with user-defined lambda functions and
nestable declarative expressions leveraging <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">familiar &#34;typing&#34; syntax</a> – all seamlessly composable with <a href="#standard-hints">standard type hints</a> via an <a href="#validator-syntax">expressive domain-specific language (DSL)</a>.</p>
<p dir="auto">Validate custom project constraints <em>now</em> without waiting for the open-source
community to officially standardize, implement, and publish those constraints.
Filling in the Titanic-sized gaps between <a href="#compliance">Python&#39;s patchwork quilt of PEPs</a>, validators accelerate your QA workflow with your greatest
asset.</p>
<p dir="auto">Yup. It&#39;s your brain.</p>
<p dir="auto">See <a href="#validator-showcase">Validator Showcase</a> for comforting examples – or blithely continue for
uncomfortable details you may regret reading.</p>
<a name="user-content-validator-overview"></a>
<h4 dir="auto"><a id="user-content-validator-overview" aria-hidden="true" href="#validator-overview"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id34">Validator Overview</a></h4>
<p dir="auto">Beartype validators are <strong>zero-cost code generators.</strong> Like the rest of
beartype (but unlike other validation frameworks), beartype validators
dynamically generate optimally efficient pure-Python type-checking logic with
<em>no</em> hidden function or method calls, undocumented costs, or runtime overhead.</p>
<p dir="auto">Beartype validator code is thus <strong>call-explicit.</strong> Since pure-Python function
and method calls are notoriously slow in <a href="https://github.com/python/cpython">CPython</a>, the code we generate only
calls the pure-Python functions and methods you specify when you subscript
<code>beartype.vale.Is*</code> classes with those functions and methods. That&#39;s it. We
<em>never</em> call anything without your permission. For example:</p>
<ul dir="auto">
<li><p dir="auto">The declarative validator <code>Annotated[np.ndarray, IsAttr[&#39;dtype&#39;,
IsAttr[&#39;type&#39;, IsEqual[np.float64]]]]</code> detects NumPy arrays of 64-bit
floating-point precision by generating the fastest possible inline expression
for doing so:</p>
<div data-snippet-clipboard-copy-content="isinstance(array, np.ndarray) and array.dtype.type == np.float64
"><pre><span>isinstance</span>(<span>array</span>, <span>np</span>.<span>ndarray</span>) <span>and</span> <span>array</span>.<span>dtype</span>.<span>type</span> <span>==</span> <span>np</span>.<span>float64</span></pre></div>
</li>
<li><p dir="auto">The functional validator <code>Annotated[np.ndarray, Is[lambda array:
array.dtype.type == np.float64]]</code> also detects the same arrays by generating
a slightly slower inline expression calling the lambda function you define:</p>
<div data-snippet-clipboard-copy-content="isinstance(array, np.ndarray) and your_lambda_function(array)
"><pre><span>isinstance</span>(<span>array</span>, <span>np</span>.<span>ndarray</span>) <span>and</span> <span>your_lambda_function</span>(<span>array</span>)</pre></div>
</li>
</ul>
<p dir="auto">Beartype validators thus come in two flavours – each with its attendant
tradeoffs:</p>
<ul dir="auto">
<li><strong>Functional validators,</strong> created by subscripting the <code>beartype.vale.Is</code>
class with a function accepting a single parameter and returning <code>True</code>
only when that parameter satisfies a caller-defined constraint. Each
functional validator incurs the cost of calling that function for each call
to each <code>@beartype</code>-decorated callable annotated by that validator, but
is Turing-complete and thus supports all possible validation scenarios.</li>
<li><strong>Declarative validators,</strong> created by subscripting any <em>other</em> class in the
<code>beartype.vale</code> subpackage (e.g., <code>beartype.vale.IsEquals</code>) with
arguments specific to that class. Each declarative validator generates
efficient inline code calling <em>no</em> hidden functions and thus incurring no
function costs, but is special-purpose and thus supports only a narrow band
of validation scenarios.</li>
</ul>
<p dir="auto">Wherever you can, prefer declarative validators for efficiency. Everywhere
else, default to functional validators for generality.</p>
<a name="user-content-validator-api"></a>
<h4 dir="auto"><a id="user-content-validator-api" aria-hidden="true" href="#validator-api"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id35">Validator API</a></h4>
<p dir="auto"><em>class</em> beartype.vale.<strong>Is</strong>[collections.abc.Callable[[typing.Any], bool]]</p>
<blockquote>
<p dir="auto"><strong>Functional validator.</strong> A PEP-compliant type hint enforcing any arbitrary
runtime constraint, created by subscripting (indexing) the <code>Is</code> class
with a function accepting a single parameter and returning either:</p>
<ul dir="auto">
<li><code>True</code> if that parameter satisfies that constraint.</li>
<li><code>False</code> otherwise.</li>
</ul>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype.vale import Is
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching only strings with lengths ranging [4, 40].
LengthyString = Annotated[str, Is[lambda text: 4 &lt;= len(text) &lt;= 40]]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching only strings with lengths ranging [4, 40].</span>
<span>LengthyString</span> <span>=</span> <span>Annotated</span>[<span>str</span>, <span>Is</span>[<span>lambda</span> <span>text</span>: <span>4</span> <span>&lt;=</span> <span>len</span>(<span>text</span>) <span>&lt;=</span> <span>40</span>]]</pre></div>
<p dir="auto">Functional validators are caller-defined and may thus validate the internal
integrity, consistency, and structure of arbitrary objects ranging from
simple builtin scalars like integers and strings to complex data structures
defined by third-party packages like NumPy arrays and Pandas DataFrames.</p>
<p dir="auto">See <code>help(beartype.vale.Is)</code> for further details.</p>
</blockquote>
<p dir="auto"><em>class</em> beartype.vale.<strong>IsAttr</strong>[str, validator]</p>
<blockquote>
<p dir="auto"><strong>Declarative attribute validator.</strong> A PEP-compliant type hint
enforcing any arbitrary runtime constraint on any named object attribute,
created by subscripting (indexing) the <code>IsAttr</code> class with (in order):</p>
<ol dir="auto">
<li>The unqualified name of that attribute.</li>
<li>Any other beartype validator enforcing that constraint.</li>
</ol>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype.vale import IsAttr, IsEqual
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching only two-dimensional NumPy arrays. Given this,
# @beartype generates efficient validation code resembling:
#     isinstance(array, np.ndarray) and array.ndim == 2
import numpy as np
Numpy2DArray = Annotated[np.ndarray, IsAttr[&#39;ndim&#39;, IsEqual[2]]]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsAttr</span>, <span>IsEqual</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching only two-dimensional NumPy arrays. Given this,</span>
<span># @beartype generates efficient validation code resembling:</span>
<span>#     isinstance(array, np.ndarray) and array.ndim == 2</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>Numpy2DArray</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>, <span>IsAttr</span>[<span>&#39;ndim&#39;</span>, <span>IsEqual</span>[<span>2</span>]]]</pre></div>
<p dir="auto">The first argument subscripting this class <em>must</em> be a syntactically valid
unqualified Python identifier string containing only alphanumeric and
underscore characters (e.g., <code>&#34;dtype&#34;</code>, <code>&#34;ndim&#34;</code>). Fully-qualified
attributes comprising two or more dot-delimited identifiers (e.g.,
<code>&#34;dtype.type&#34;</code>) may be validated by nesting successive <code>IsAttr</code>
subscriptions:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only NumPy arrays of 64-bit floating-point numbers.
# From this, @beartype generates an efficient expression resembling:
#     isinstance(array, np.ndarray) and array.dtype.type == np.float64
NumpyFloat64Array = Annotated[np.ndarray,
    IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsEqual[np.float64]]]]
"><pre><span># Type hint matching only NumPy arrays of 64-bit floating-point numbers.</span>
<span># From this, @beartype generates an efficient expression resembling:</span>
<span>#     isinstance(array, np.ndarray) and array.dtype.type == np.float64</span>
<span>NumpyFloat64Array</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>,
    <span>IsAttr</span>[<span>&#39;dtype&#39;</span>, <span>IsAttr</span>[<span>&#39;type&#39;</span>, <span>IsEqual</span>[<span>np</span>.<span>float64</span>]]]]</pre></div>
<p dir="auto">The second argument subscripting this class <em>must</em> be a beartype validator.
This includes:</p>
<ul dir="auto">
<li><code>beartype.vale.Is</code>, in which case this parent <code>IsAttr</code> class
validates the desired object attribute to satisfy the caller-defined
function subscripting that child <code>Is</code> class.</li>
<li><code>beartype.vale.IsAttr</code>, in which case this parent <code>IsAttr</code> class
validates the desired object attribute to contain a nested object
attribute satisfying the child <code>IsAttr</code> class. See above example.</li>
<li><code>beartype.vale.IsEqual</code>, in which case this <code>IsAttr</code> class validates
the desired object attribute to be equal to the object subscripting that
<code>IsEqual</code> class. See above example.</li>
</ul>
<p dir="auto">See <code>help(beartype.vale.IsAttr)</code> for further details.</p>
</blockquote>
<p dir="auto"><em>class</em> beartype.vale.<strong>IsEqual</strong>[typing.Any]</p>
<blockquote>
<p dir="auto"><strong>Declarative equality validator.</strong> A PEP-compliant type hint enforcing
equality against any object, created by subscripting (indexing) the
<code>IsEqual</code> class with that object:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype.vale import IsEqual
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching only lists equal to [0, 1, 2, ..., 40, 41, 42].
AnswerToTheUltimateQuestion = Annotated[list, IsEqual[list(range(42))]]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsEqual</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching only lists equal to [0, 1, 2, ..., 40, 41, 42].</span>
<span>AnswerToTheUltimateQuestion</span> <span>=</span> <span>Annotated</span>[<span>list</span>, <span>IsEqual</span>[<span>list</span>(<span>range</span>(<span>42</span>))]]</pre></div>
<p dir="auto"><code>beartype.vale.IsEqual</code> generalizes the comparable <a href="https://www.python.org/dev/peps/pep-0586" rel="nofollow">PEP 586</a>-compliant
<a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a> type hint. Both check equality against user-defined
objects. Despite the differing syntax, these two type hints enforce the
same semantics:</p>
<div data-snippet-clipboard-copy-content="# This beartype validator enforces the same semantics as...
IsStringEqualsWithBeartype = Annotated[str,
    IsEqual[&#39;Don’t you envy our pranceful bands?&#39;] |
    IsEqual[&#39;Don’t you wish you had extra hands?&#39;]
]

# This PEP 586-compliant type hint.
IsStringEqualsWithPep586 = Literal[
    &#39;Don’t you envy our pranceful bands?&#39;,
    &#39;Don’t you wish you had extra hands?&#39;,
]
"><pre><span># This beartype validator enforces the same semantics as...</span>
<span>IsStringEqualsWithBeartype</span> <span>=</span> <span>Annotated</span>[<span>str</span>,
    <span>IsEqual</span>[<span>&#39;Don’t you envy our pranceful bands?&#39;</span>] <span>|</span>
    <span>IsEqual</span>[<span>&#39;Don’t you wish you had extra hands?&#39;</span>]
]

<span># This PEP 586-compliant type hint.</span>
<span>IsStringEqualsWithPep586</span> <span>=</span> <span>Literal</span>[
    <span>&#39;Don’t you envy our pranceful bands?&#39;</span>,
    <span>&#39;Don’t you wish you had extra hands?&#39;</span>,
]</pre></div>
<p dir="auto">The similarities end there, of course:</p>
<ul dir="auto">
<li><code>beartype.vale.IsEqual</code> permissively validates equality against objects
that are instances of <strong>any arbitrary type.</strong> <code>IsEqual</code> doesn&#39;t care
what the types of your objects are. <code>IsEqual</code> will test equality
against everything you tell it to, because you know best.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a> rigidly validates equality against objects that are
instances of <strong>only six predefined types:</strong><ul dir="auto">
<li>Booleans (i.e., <code>bool</code> objects).</li>
<li>Byte strings (i.e., <code>bytes</code> objects).</li>
<li>Integers (i.e., <code>int</code> objects).</li>
<li>Unicode strings (i.e., <code>str</code> objects).</li>
<li><a href="https://docs.python.org/3/library/enum.html#enum.Enum" rel="nofollow">enum.Enum</a> members. <a href="#enum-type" id="user-content-id1">[1]</a></li>
<li>The <code>None</code> singleton.</li>
</ul>
</li>
</ul>
<p dir="auto">Wherever you can (which is mostly nowhere), prefer <a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a>. Sure,
<a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a> is mostly useless, but it&#39;s standardized across
type checkers in a mostly useless way. Everywhere else, default to
<code>beartype.vale.IsEqual</code>.</p>
<p dir="auto">See <code>help(beartype.vale.IsEqual)</code> for further details.</p>
</blockquote>
<p dir="auto"><em>class</em> beartype.vale.<strong>IsSubclass</strong>[type, ...]</p>
<blockquote>
<p dir="auto"><strong>Declarative inheritance validator.</strong> A PEP-compliant type hint enforcing
subclassing of one or more superclasses (base classes), created by
subscripting (indexing) the <code>IsSubclass</code> class with those superclasses:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype.vale import IsEqual
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching only string and byte string subclasses.
StrOrBytesSubclass = Annotated[type, IsSubclass[str, bytes]]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsEqual</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching only string and byte string subclasses.</span>
<span>StrOrBytesSubclass</span> <span>=</span> <span>Annotated</span>[<span>type</span>, <span>IsSubclass</span>[<span>str</span>, <span>bytes</span>]]</pre></div>
<p dir="auto"><code>beartype.vale.IsSubclass</code> generalizes the comparable <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP
484</a>-compliant <a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a> and <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP 585</a>-compliant <a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a> type hints. All
three check subclassing of arbitrary superclasses. Despite the differing
syntax, these type hints enforce the same semantics:</p>
<div data-snippet-clipboard-copy-content="# This beartype validator enforces the same semantics as...
IsStringSubclassWithBeartype = Annotated[type, IsSubclass[str]]

# This PEP 484-compliant type hint.
IsStringSubclassWithPep484 = Type[str]

# This PEP 585-compliant type hint.
IsStringSubclassWithPep585 = type[str]
"><pre><span># This beartype validator enforces the same semantics as...</span>
<span>IsStringSubclassWithBeartype</span> <span>=</span> <span>Annotated</span>[<span>type</span>, <span>IsSubclass</span>[<span>str</span>]]

<span># This PEP 484-compliant type hint.</span>
<span>IsStringSubclassWithPep484</span> <span>=</span> <span>Type</span>[<span>str</span>]

<span># This PEP 585-compliant type hint.</span>
<span>IsStringSubclassWithPep585</span> <span>=</span> <span>type</span>[<span>str</span>]</pre></div>
<p dir="auto">The similarities end there, of course:</p>
<ul dir="auto">
<li><code>beartype.vale.IsSubclass</code> permissively validates type inheritance of
<strong>arbitrary classes</strong> (including possibly nested attributes of parameters
and returns when combined with <code>beartype.vale.IsAttr</code>) against <strong>one or
more superclasses.</strong></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a> and <a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a> rigidly validates type inheritance of only
<strong>parameters and returns</strong> against only <strong>one superclass.</strong></li>
</ul>
<p dir="auto">Consider this subclass validator, which validates type inheritance of a
deeply nested attribute and thus <em>cannot</em> be expressed with <a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a> or
<a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a>:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only NumPy arrays of reals (i.e., either integers
# or floats) of arbitrary precision, generating code resembling:
#    (isinstance(array, np.ndarray) and
#     issubclass(array.dtype.type, (np.floating, np.integer)))
NumpyRealArray = Annotated[
    np.ndarray, IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsSubclass[
        np.floating, np.integer]]]]
"><pre><span># Type hint matching only NumPy arrays of reals (i.e., either integers</span>
<span># or floats) of arbitrary precision, generating code resembling:</span>
<span>#    (isinstance(array, np.ndarray) and</span>
<span>#     issubclass(array.dtype.type, (np.floating, np.integer)))</span>
<span>NumpyRealArray</span> <span>=</span> <span>Annotated</span>[
    <span>np</span>.<span>ndarray</span>, <span>IsAttr</span>[<span>&#39;dtype&#39;</span>, <span>IsAttr</span>[<span>&#39;type&#39;</span>, <span>IsSubclass</span>[
        <span>np</span>.<span>floating</span>, <span>np</span>.<span>integer</span>]]]]</pre></div>
<p dir="auto">Wherever you can, prefer <a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a> and <a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a>. Sure, they&#39;re
inflexible, but they&#39;re inflexibly standardized across type checkers.
Everywhere else, default to <code>beartype.vale.IsSubclass</code>.</p>
<p dir="auto">See <code>help(beartype.vale.IsSubclass)</code> for further details.</p>
</blockquote>
<table id="user-content-enum-type">

<tbody>
<tr><td><a href="#id1">[1]</a></td><td>You don&#39;t want to know the type of <a href="https://docs.python.org/3/library/enum.html#enum.Enum" rel="nofollow">enum.Enum</a> members. No... srsly. You
don&#39;t. You do? Very well. It&#39;s <a href="https://docs.python.org/3/library/enum.html#enum.Enum" rel="nofollow">enum.Enum</a>. <sup>mic drop</sup></td></tr>
</tbody>
</table>
<a name="user-content-validator-syntax"></a>
<h4 dir="auto"><a id="user-content-validator-syntax" aria-hidden="true" href="#validator-syntax"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id36">Validator Syntax</a></h4>
<p dir="auto">Beartype validators support a rich domain-specific language (DSL) leveraging
familiar Python operators. Dynamically create new validators on-the-fly from
existing validators, fueling reuse and preserving <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow">DRY</a>:</p>
<ul dir="auto">
<li><p dir="auto"><strong>Negation</strong> (i.e., <code>not</code>). Negating any validator with the <code>~</code> operator
creates a new validator returning <code>True</code> only when the negated validator
returns <code>False</code>:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only strings containing *no* periods, semantically
# equivalent to this type hint:
#     PeriodlessString = Annotated[str, Is[lambda text: &#39;.&#39; not in text]]
PeriodlessString = Annotated[str, ~Is[lambda text: &#39;.&#39; in text]]
"><pre><span># Type hint matching only strings containing *no* periods, semantically</span>
<span># equivalent to this type hint:</span>
<span>#     PeriodlessString = Annotated[str, Is[lambda text: &#39;.&#39; not in text]]</span>
<span>PeriodlessString</span> <span>=</span> <span>Annotated</span>[<span>str</span>, <span>~</span><span>Is</span>[<span>lambda</span> <span>text</span>: <span>&#39;.&#39;</span> <span>in</span> <span>text</span>]]</pre></div>
</li>
<li><p dir="auto"><strong>Conjunction</strong> (i.e., <code>and</code>). And-ing two or more validators with the
<code>&amp;</code> operator creates a new validator returning <code>True</code> only when <em>all</em> of
the and-ed validators return <code>True</code>:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only non-empty strings containing *no* periods,
# semantically equivalent to this type hint:
#     NonemptyPeriodlessString = Annotated[
#         str, Is[lambda text: text and &#39;.&#39; not in text]]
SentenceFragment = Annotated[str, (
     Is[lambda text: bool(text)] &amp;
    ~Is[lambda text: &#39;.&#39; in text]
)]
"><pre><span># Type hint matching only non-empty strings containing *no* periods,</span>
<span># semantically equivalent to this type hint:</span>
<span>#     NonemptyPeriodlessString = Annotated[</span>
<span>#         str, Is[lambda text: text and &#39;.&#39; not in text]]</span>
<span>SentenceFragment</span> <span>=</span> <span>Annotated</span>[<span>str</span>, (
     <span>Is</span>[<span>lambda</span> <span>text</span>: <span>bool</span>(<span>text</span>)] <span>&amp;</span>
    <span>~</span><span>Is</span>[<span>lambda</span> <span>text</span>: <span>&#39;.&#39;</span> <span>in</span> <span>text</span>]
)]</pre></div>
</li>
<li><p dir="auto"><strong>Disjunction</strong> (i.e., <code>or</code>). Or-ing two or more validators with the <code>|</code>
operator creates a new validator returning <code>True</code> only when at least one of
the or-ed validators returns <code>True</code>:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only empty strings *and* non-empty strings containing
# one or more periods, semantically equivalent to this type hint:
#     EmptyOrPeriodfullString = Annotated[
#         str, Is[lambda text: not text or &#39;.&#39; in text]]
EmptyOrPeriodfullString = Annotated[str, (
    ~Is[lambda text: bool(text)] |
     Is[lambda text: &#39;.&#39; in text]
)]
"><pre><span># Type hint matching only empty strings *and* non-empty strings containing</span>
<span># one or more periods, semantically equivalent to this type hint:</span>
<span>#     EmptyOrPeriodfullString = Annotated[</span>
<span>#         str, Is[lambda text: not text or &#39;.&#39; in text]]</span>
<span>EmptyOrPeriodfullString</span> <span>=</span> <span>Annotated</span>[<span>str</span>, (
    <span>~</span><span>Is</span>[<span>lambda</span> <span>text</span>: <span>bool</span>(<span>text</span>)] <span>|</span>
     <span>Is</span>[<span>lambda</span> <span>text</span>: <span>&#39;.&#39;</span> <span>in</span> <span>text</span>]
)]</pre></div>
</li>
<li><p dir="auto"><strong>Enumeration</strong> (i.e., <code>,</code>). Delimiting two or or more validators with
commas at the top level of a <a href="https://docs.python.org/3/library/typing.html#typing.Annotated" rel="nofollow">typing.Annotated</a> type hint is an alternate
syntax for and-ing those validators with the <code>&amp;</code> operator, creating a new
validator returning <code>True</code> only when <em>all</em> of those delimited validators
return <code>True</code>.</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only non-empty strings containing *no* periods,
# semantically equivalent to the &#34;SentenceFragment&#34; defined above.
SentenceFragment = Annotated[str,
     Is[lambda text: bool(text)],
    ~Is[lambda text: &#39;.&#39; in text],
]
"><pre><span># Type hint matching only non-empty strings containing *no* periods,</span>
<span># semantically equivalent to the &#34;SentenceFragment&#34; defined above.</span>
<span>SentenceFragment</span> <span>=</span> <span>Annotated</span>[<span>str</span>,
     <span>Is</span>[<span>lambda</span> <span>text</span>: <span>bool</span>(<span>text</span>)],
    <span>~</span><span>Is</span>[<span>lambda</span> <span>text</span>: <span>&#39;.&#39;</span> <span>in</span> <span>text</span>],
]</pre></div>
<p dir="auto">Since the <code>&amp;</code> operator is more explicit <em>and</em> usable in a wider variety of
syntactic contexts, the <code>&amp;</code> operator is generally preferable to enumeration
(all else being equal).</p>
</li>
<li><p dir="auto"><strong>Interoperability.</strong> As PEP-compliant type hints, validators are safely
interoperable with other PEP-compliant type hints and usable wherever other
PEP-compliant type hints are usable. Standard type hints are subscriptable
with validators, because validators <em>are</em> standard type hints:</p>
<div data-snippet-clipboard-copy-content="# Type hint matching only sentence fragments defined as either Unicode or
# byte strings, generalizing &#34;SentenceFragment&#34; type hints defined above.
SentenceFragment = Union[
    Annotated[bytes, Is[lambda text: b&#39;.&#39; in text]],
    Annotated[str,   Is[lambda text: u&#39;.&#39; in text]],
]
"><pre><span># Type hint matching only sentence fragments defined as either Unicode or</span>
<span># byte strings, generalizing &#34;SentenceFragment&#34; type hints defined above.</span>
<span>SentenceFragment</span> <span>=</span> <span>Union</span>[
    <span>Annotated</span>[<span>bytes</span>, <span>Is</span>[<span>lambda</span> <span>text</span>: <span>b&#39;.&#39;</span> <span>in</span> <span>text</span>]],
    <span>Annotated</span>[<span>str</span>,   <span>Is</span>[<span>lambda</span> <span>text</span>: <span>u&#39;.&#39;</span> <span>in</span> <span>text</span>]],
]</pre></div>
</li>
</ul>
<p dir="auto"><a href="https://github.com/beartype/beartype/blob/main/_operatorprecedence">Standard Python precedence rules</a> may apply. DSL:
<em>it&#39;s not just a telecom acronym anymore.</em></p>
<a name="user-content-validator-caveats"></a>
<h4 dir="auto"><a id="user-content-validator-caveats" aria-hidden="true" href="#validator-caveats"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id37">Validator Caveats</a></h4>
<p dir="auto"><strong><g-emoji alias="bangbang" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/203c.png">‼</g-emoji> Validators require:</strong></p>
<ul dir="auto">
<li><strong>Beartype.</strong> Currently, all other static and runtime type checkers silently
ignore beartype validators during type-checking. This includes <a href="http://mypy-lang.org" rel="nofollow">mypy</a> – which
we could possibly solve by bundling a <a href="https://mypy.readthedocs.io/en/stable/extending_mypy.html" rel="nofollow">mypy plugin</a> with beartype that
extends <a href="http://mypy-lang.org" rel="nofollow">mypy</a> to statically analyze declarative beartype validators (e.g.,
<code>beartype.vale.IsAttr</code>, <code>beartype.vale.IsEqual</code>). We leave this as an
exercise to the idealistic doctoral thesis candidate. <sup>Please do
this for us, someone who is not us.</sup></li>
<li>Either <strong>Python ≥ 3.9</strong> <em>or</em> <a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions ≥ 3.9.0.0</a>. Validators piggyback onto the <a href="https://docs.python.org/3/library/typing.html#typing.Annotated" rel="nofollow">typing.Annotated</a>
class first introduced with Python 3.9.0 and since backported to older Python
versions by the <a href="https://pypi.org/project/typing-extensions" rel="nofollow">third-party &#34;typing_extensions&#34; package</a>, which beartype also transparently supports.</li>
</ul>
<a name="user-content-validator-showcase"></a>
<h4 dir="auto"><a id="user-content-validator-showcase" aria-hidden="true" href="#validator-showcase"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id38">Validator Showcase</a></h4>
<p dir="auto">Observe the disturbing (yet alluring) utility of beartype validators in action
as they unshackle type hints from the fetters of PEP compliance. Begone,
foulest standards!</p>
<a name="user-content-type-hint-connectives"></a>
<h5 dir="auto"><a id="user-content-type-hint-connectives" aria-hidden="true" href="#type-hint-connectives"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id39">Type Hint Connectives</a></h5>
<blockquote>
<strong>Subtitle:</strong> <em>From Set Theory They Shall Grow</em></blockquote>
<p dir="auto"><a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a> standardized the <a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a> factory <a href="https://en.wikipedia.org/wiki/Logical_disjunction" rel="nofollow">disjunctively</a> matching any of several equally permissible type hints ala
Python&#39;s builtin <code>or</code> operator or the overloaded <code>|</code> operator for sets.
That&#39;s great, because set theory is the beating heart behind type theory.</p>
<p dir="auto">But that&#39;s just <a href="https://en.wikipedia.org/wiki/Logical_disjunction" rel="nofollow">disjunction</a>. What about <a href="https://en.wikipedia.org/wiki/Intersection_(set_theory)" rel="nofollow">intersection</a> (e.g., <code>and</code>, <code>&amp;</code>),
<a href="https://en.wikipedia.org/wiki/Complement_(set_theory)#Relative_complement" rel="nofollow">complementation</a> (e.g., <code>not</code>, <code>~</code>), or any
of the vast multitude of <em>other</em> set theoretic operations? Can we logically
connect simple type hints validating trivial constraints into complex type
hints validating non-trivial constraints via PEP-standardized analogues of
unary and binary operators?</p>
<p dir="auto"><strong>Nope.</strong> They don&#39;t exist yet. But that&#39;s okay. You use beartype, which means
you don&#39;t have to wait for official Python developers to get there first.
You&#39;re already there. <sup>...woah</sup></p>
<a name="user-content-type-hint-elision"></a>
<h6 dir="auto"><a id="user-content-type-hint-elision" aria-hidden="true" href="#type-hint-elision"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id40">Type Hint Elision</a></h6>
<p dir="auto">Python&#39;s core type hierarchy conceals an ugly history of secretive backward
compatibility. In this subsection, we uncover the two filthiest, flea-infested,
backwater corners of the otherwise well-lit atrium that is the Python language
– and how exactly you can finalize them. Both obstruct type-checking, readable
APIs, and quality assurance in the post-Python 2.7 era.</p>
<p dir="auto">Guido doesn&#39;t want you to know. But you want to know, don&#39;t you? You are about
to enter another dimension, a dimension not only of syntax and semantics but of
shame. A journey into a hideous land of annotation wrangling. Next stop... <em>the
Beartype Zone.</em> Because guess what?</p>
<ul dir="auto">
<li><p dir="auto"><strong>Booleans are integers.</strong> They shouldn&#39;t be. Booleans aren&#39;t integers in
most high-level languages. Wait. Are you telling me booleans are
literally integers in Python? Surely you jest. That can&#39;t be. You can&#39;t <em>add</em>
booleans, can you? What would that even mean if you could? Observe and cower,
rigorous data engineers.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; True + 3.1415
4.141500000000001    # &lt;-- oh. by. god.
&gt;&gt;&gt; isinstance(False, int)
True                 # &lt;-- when nothing is true, everything is true
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>True</span> <span>+</span> <span>3.1415</span>
<span>4.141500000000001</span>    <span># &lt;-- oh. by. god.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>False</span>, <span>int</span>)
<span>True</span>                 <span># &lt;-- when nothing is true, everything is true</span></pre></div>
</li>
<li><p dir="auto"><strong>Strings are infinitely recursive sequences of...</strong> yup, it&#39;s strings. They
shouldn&#39;t be. Strings aren&#39;t infinitely recursive data structures in any
other language devised by incautious mortals – high-level or not. Wait. Are
you telling me strings are both indistinguishable from full-blown immutable
sequences containing arbitrary items <em>and</em> infinitely recurse into themselves
like that sickening non-Euclidean Hall of Mirrors I puked all over when I was
a kid? Surely you kid. That can&#39;t be. You can&#39;t infinitely index into strings
<em>and</em> pass and return the results to and from callables expecting either
<code>Sequence[Any]</code> or <code>Sequence[str]</code> type hints, can you? Witness and
tremble, stricter-than-thou QA evangelists.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#39;yougottabekiddi—&#39;[0][0][0][0][0][0][0][0][0][0][0][0][0][0][0]
&#39;y&#39;                 # &lt;-- pretty sure we just broke the world
&gt;&gt;&gt; from collections.abc import Sequence
&gt;&gt;&gt; isinstance(&#34;Ph&#39;nglui mglw&#39;nafh Cthu—&#34;[0][0][0][0][0], Sequence)
True                # &lt;-- ...curse you, curse you to heck and back
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#39;yougottabekiddi—&#39;</span>[<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>]
<span>&#39;y&#39;</span>                 <span># &lt;-- pretty sure we just broke the world</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>collections</span>.<span>abc</span> <span>import</span> <span>Sequence</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>&#34;Ph&#39;nglui mglw&#39;nafh Cthu—&#34;</span>[<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>], <span>Sequence</span>)
<span>True</span>                <span># &lt;-- ...curse you, curse you to heck and back</span></pre></div>
</li>
</ul>
<p dir="auto">When we annotate a callable as accepting an <code>int</code>, we <em>never</em> want that
callable to also silently accept a <code>bool</code>. Likewise, when we annotate another
callable as accepting a <code>Sequence[Any]</code> or <code>Sequence[str]</code>, we <em>never</em> want
that callable to also silently accept a <code>str</code>. These are sensible
expectations – just not in Python, where madness prevails.</p>
<p dir="auto">To resolve these counter-intuitive concerns, we need the equivalent of the
<a href="https://en.wikipedia.org/wiki/Complement_(set_theory)#Relative_complement" rel="nofollow">relative set complement (or difference)</a>. We now
call this thing... <strong>type elision!</strong> Sounds pretty hot, right? We know.</p>
<p dir="auto">Let&#39;s first validate <strong>non-boolean integers</strong> with a beartype validator
effectively declaring a new <code>int - bool</code> class (i.e., the subclass of all
integers that are <em>not</em> booleans):</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import Is
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching any non-boolean integer. This day all errata die.
IntNonbool = Annotated[int, Is[
    lambda number: not isinstance(number, bool)]]

# Type-check a list of non-boolean integers summing to a non-boolean
# integer. Beartype wills it. So it shall be.
@beartype
def sum_intlist(my_list: list[IntNonbool]) -&gt; IntNonbool:
    &#39;&#39;&#39;
    I cast thee out, mangy booleans!

    You plague these shores no more.
    &#39;&#39;&#39;

    return sum(my_list)
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching any non-boolean integer. This day all errata die.</span>
<span>IntNonbool</span> <span>=</span> <span>Annotated</span>[<span>int</span>, <span>Is</span>[
    <span>lambda</span> <span>number</span>: <span>not</span> <span>isinstance</span>(<span>number</span>, <span>bool</span>)]]

<span># Type-check a list of non-boolean integers summing to a non-boolean</span>
<span># integer. Beartype wills it. So it shall be.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>sum_intlist</span>(<span>my_list</span>: <span>list</span>[<span>IntNonbool</span>]) <span>-&gt;</span> <span>IntNonbool</span>:
    <span>&#39;&#39;&#39;</span>
<span>    I cast thee out, mangy booleans!</span>
<span></span>
<span>    You plague these shores no more.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>sum</span>(<span>my_list</span>)</pre></div>
<p dir="auto">Let&#39;s next validate <strong>non-string sequences</strong> with beartype validators
effectively declaring a new <code>Sequence - str</code> class (i.e., the subclass of all
sequences that are <em>not</em> strings):</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import Is
from collections.abc import Sequence
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching any non-string sequence. Your day has finally come.
SequenceNonstr = Annotated[Sequence, Is[
    lambda sequence: not isinstance(sequence, str)]]

# Type hint matching any non-string sequence *WHOSE ITEMS ARE ALL STRINGS.*
SequenceNonstrOfStr = Annotated[Sequence[str], Is[
    lambda sequence: not isinstance(sequence, str)]]

# Type-check a non-string sequence of arbitrary items coerced into strings
# and then joined on newline to a new string. (Beartype got your back, bro.)
@beartype
def join_objects(my_sequence: SequenceNonstr) -&gt; str:
    &#39;&#39;&#39;
    Your tide of disease ends here, &#34;str&#34; class!
    &#39;&#39;&#39;

    return &#39;\n&#39;.join(map(str, my_sequence))  # &lt;-- no idea how that works

# Type-check a non-string sequence whose items are all strings joined on
# newline to a new string. It isn&#39;t much, but it&#39;s all you ask.
@beartype
def join_strs(my_sequence: SequenceNonstrOfStr) -&gt; str:
    &#39;&#39;&#39;
    I expectorate thee up, sequence of strings.
    &#39;&#39;&#39;

    return &#39;\n&#39;.join(my_sequence)  # &lt;-- do *NOT* do this to a string
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>collections</span>.<span>abc</span> <span>import</span> <span>Sequence</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching any non-string sequence. Your day has finally come.</span>
<span>SequenceNonstr</span> <span>=</span> <span>Annotated</span>[<span>Sequence</span>, <span>Is</span>[
    <span>lambda</span> <span>sequence</span>: <span>not</span> <span>isinstance</span>(<span>sequence</span>, <span>str</span>)]]

<span># Type hint matching any non-string sequence *WHOSE ITEMS ARE ALL STRINGS.*</span>
<span>SequenceNonstrOfStr</span> <span>=</span> <span>Annotated</span>[<span>Sequence</span>[<span>str</span>], <span>Is</span>[
    <span>lambda</span> <span>sequence</span>: <span>not</span> <span>isinstance</span>(<span>sequence</span>, <span>str</span>)]]

<span># Type-check a non-string sequence of arbitrary items coerced into strings</span>
<span># and then joined on newline to a new string. (Beartype got your back, bro.)</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>join_objects</span>(<span>my_sequence</span>: <span>SequenceNonstr</span>) <span>-&gt;</span> <span>str</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Your tide of disease ends here, &#34;str&#34; class!</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>&#39;<span>\n</span>&#39;</span>.<span>join</span>(<span>map</span>(<span>str</span>, <span>my_sequence</span>))  <span># &lt;-- no idea how that works</span>

<span># Type-check a non-string sequence whose items are all strings joined on</span>
<span># newline to a new string. It isn&#39;t much, but it&#39;s all you ask.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>join_strs</span>(<span>my_sequence</span>: <span>SequenceNonstrOfStr</span>) <span>-&gt;</span> <span>str</span>:
    <span>&#39;&#39;&#39;</span>
<span>    I expectorate thee up, sequence of strings.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>&#39;<span>\n</span>&#39;</span>.<span>join</span>(<span>my_sequence</span>)  <span># &lt;-- do *NOT* do this to a string</span></pre></div>
<a name="user-content-full-fat-o-n-matching"></a>
<h5 dir="auto"><a id="user-content-full-fat-on-matching" aria-hidden="true" href="#full-fat-on-matching"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id41">Full-Fat O(n) Matching</a></h5>
<p dir="auto">Let&#39;s validate <strong>all integers in a list of integers in O(n) time</strong>, because
validators mean you no longer have to accept the QA scraps we feed you:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import Is
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching all integers in a list of integers in O(n) time. Please
# never do this. You now want to, don&#39;t you? Why? You know the price! Why?!?
IntList = Annotated[list[int], Is[lambda lst: all(
    isinstance(item, int) for item in lst)]]

# Type-check all integers in a list of integers in O(n) time. How could you?
@beartype
def sum_intlist(my_list: IntList) -&gt; int:
    &#39;&#39;&#39;
    The slowest possible integer summation over the passed list of integers.

    There goes your whole data science pipeline. Yikes! So much cringe.
    &#39;&#39;&#39;

    return sum(my_list)  # oh, gods what have you done
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching all integers in a list of integers in O(n) time. Please</span>
<span># never do this. You now want to, don&#39;t you? Why? You know the price! Why?!?</span>
<span>IntList</span> <span>=</span> <span>Annotated</span>[<span>list</span>[<span>int</span>], <span>Is</span>[<span>lambda</span> <span>lst</span>: <span>all</span>(
    <span>isinstance</span>(<span>item</span>, <span>int</span>) <span>for</span> <span>item</span> <span>in</span> <span>lst</span>)]]

<span># Type-check all integers in a list of integers in O(n) time. How could you?</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>sum_intlist</span>(<span>my_list</span>: <span>IntList</span>) <span>-&gt;</span> <span>int</span>:
    <span>&#39;&#39;&#39;</span>
<span>    The slowest possible integer summation over the passed list of integers.</span>
<span></span>
<span>    There goes your whole data science pipeline. Yikes! So much cringe.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>sum</span>(<span>my_list</span>)  <span># oh, gods what have you done</span></pre></div>
<p dir="auto">Welcome to <strong>full-fat type-checking.</strong> In <a href="https://github.com/beartype/beartype/issues/7">our disastrous roadmap to beartype
1.0.0</a>, we reluctantly admit that we&#39;d like to augment the
<code>@beartype</code> decorator with a new parameter enabling full-fat type-checking.
But don&#39;t wait on us. Force the issue now by just doing it yourself and then
mocking us all over Gitter! <em>Fight the bear, man.</em></p>
<p dir="auto">There are good reasons to believe that <a href="#what-does-beartype-do">O(1) type-checking is preferable</a>. Violating that core precept exposes your codebase to
scalability and security concerns. But you&#39;re the Big Boss, you swear you know
best, and (in any case) we can&#39;t stop you because we already let the unneutered
tomcat out of his trash bin by <a href="https://pypi.org/project/beartype" rel="nofollow">publishing this API into the badlands of PyPI</a>.</p>
<a name="user-content-tensor-property-matching"></a>
<h5 dir="auto"><a id="user-content-tensor-property-matching" aria-hidden="true" href="#tensor-property-matching"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id42">Tensor Property Matching</a></h5>
<p dir="auto">Let&#39;s validate <a href="#beartype-validators">the same two-dimensional NumPy array of floats of arbitrary
precision as in the lead example above</a> with an
efficient declarative validator avoiding the additional stack frame imposed by
the functional validator in that example:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import IsAttr, IsEqual
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Type hint matching only two-dimensional NumPy arrays of floats of
# arbitrary precision. This time, do it faster than anyone has ever
# type-checked NumPy arrays before. (Cue sonic boom, Chuck Yeager.)
import numpy as np
Numpy2DFloatArray = Annotated[np.ndarray,
    IsAttr[&#39;ndim&#39;, IsEqual[2]] &amp;
    IsAttr[&#39;dtype&#39;,
        IsAttr[&#39;type&#39;, IsEqual[np.float32] | IsEqual[np.float64]]]
]

# Annotate @beartype-decorated callables with beartype validators.
@beartype
def polygon_area(polygon: Numpy2DFloatArray) -&gt; float:
    &#39;&#39;&#39;
    Area of a two-dimensional polygon of floats defined as a set of
    counter-clockwise points, calculated via Green&#39;s theorem.

    *Don&#39;t ask.*
    &#39;&#39;&#39;

    # Calculate and return the desired area. Pretend we understand this.
    polygon_rolled = np.roll(polygon, -1, axis=0)
    return np.abs(0.5*np.sum(
        polygon[:,0]*polygon_rolled[:,1] -
        polygon_rolled[:,0]*polygon[:,1]))
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsAttr</span>, <span>IsEqual</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Type hint matching only two-dimensional NumPy arrays of floats of</span>
<span># arbitrary precision. This time, do it faster than anyone has ever</span>
<span># type-checked NumPy arrays before. (Cue sonic boom, Chuck Yeager.)</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>Numpy2DFloatArray</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>,
    <span>IsAttr</span>[<span>&#39;ndim&#39;</span>, <span>IsEqual</span>[<span>2</span>]] <span>&amp;</span>
    <span>IsAttr</span>[<span>&#39;dtype&#39;</span>,
        <span>IsAttr</span>[<span>&#39;type&#39;</span>, <span>IsEqual</span>[<span>np</span>.<span>float32</span>] <span>|</span> <span>IsEqual</span>[<span>np</span>.<span>float64</span>]]]
]

<span># Annotate @beartype-decorated callables with beartype validators.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>polygon_area</span>(<span>polygon</span>: <span>Numpy2DFloatArray</span>) <span>-&gt;</span> <span>float</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Area of a two-dimensional polygon of floats defined as a set of</span>
<span>    counter-clockwise points, calculated via Green&#39;s theorem.</span>
<span></span>
<span>    *Don&#39;t ask.*</span>
<span>    &#39;&#39;&#39;</span>

    <span># Calculate and return the desired area. Pretend we understand this.</span>
    <span>polygon_rolled</span> <span>=</span> <span>np</span>.<span>roll</span>(<span>polygon</span>, <span>-</span><span>1</span>, <span>axis</span><span>=</span><span>0</span>)
    <span>return</span> <span>np</span>.<span>abs</span>(<span>0.5</span><span>*</span><span>np</span>.<span>sum</span>(
        <span>polygon</span>[:,<span>0</span>]<span>*</span><span>polygon_rolled</span>[:,<span>1</span>] <span>-</span>
        <span>polygon_rolled</span>[:,<span>0</span>]<span>*</span><span>polygon</span>[:,<span>1</span>]))</pre></div>
<a name="user-content-trendy-string-matching"></a>
<h5 dir="auto"><a id="user-content-trendy-string-matching" aria-hidden="true" href="#trendy-string-matching"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id43">Trendy String Matching</a></h5>
<p dir="auto">Let&#39;s validate strings either at least 80 characters long <em>or</em> both quoted and
suffixed by a period. Look, it doesn&#39;t matter. Just do it already,
<code>@beartype</code>!</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import Is
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Validator matching only strings at least 80 characters in length.
IsLengthy = Is[lambda text: len(text) &gt;= 80]

# Validator matching only strings suffixed by a period.
IsSentence = Is[lambda text: text and text[-1] == &#39;.&#39;]

# Validator matching only single- or double-quoted strings.
def _is_quoted(text): return text.count(&#39;&#34;&#39;) &gt;= 2 or text.count(&#34;&#39;&#34;) &gt;= 2
IsQuoted = Is[_is_quoted]

# Combine multiple validators by just listing them sequentially.
@beartype
def desentence_lengthy_quoted_sentence(
    text: Annotated[str, IsLengthy, IsSentence, IsQuoted]]) -&gt; str:
    &#39;&#39;&#39;
    Strip the suffixing period from a lengthy quoted sentence... &#39;cause.
    &#39;&#39;&#39;

    return text[:-1]  # this is horrible

# Combine multiple validators by just &#34;&amp;&#34;-ing them sequentially. Yes, this
# is exactly identical to the prior function. We do this because we can.
@beartype
def desentence_lengthy_quoted_sentence_part_deux(
    text: Annotated[str, IsLengthy &amp; IsSentence &amp; IsQuoted]]) -&gt; str:
    &#39;&#39;&#39;
    Strip the suffixing period from a lengthy quoted sentence... again.
    &#39;&#39;&#39;

    return text[:-1]  # this is still horrible

# Combine multiple validators with as many &#34;&amp;&#34;, &#34;|&#34;, and &#34;~&#34; operators as
# you can possibly stuff into a module that your coworkers can stomach.
# (They will thank you later. Possibly much later.)
@beartype
def strip_lengthy_or_quoted_sentence(
    text: Annotated[str, IsLengthy | (IsSentence &amp; ~IsQuoted)]]) -&gt; str:
    &#39;&#39;&#39;
    Strip the suffixing character from a string that is lengthy and/or a
    quoted sentence, because your web app deserves only the best data.
    &#39;&#39;&#39;

    return text[:-1]  # this is frankly outrageous
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Validator matching only strings at least 80 characters in length.</span>
<span>IsLengthy</span> <span>=</span> <span>Is</span>[<span>lambda</span> <span>text</span>: <span>len</span>(<span>text</span>) <span>&gt;=</span> <span>80</span>]

<span># Validator matching only strings suffixed by a period.</span>
<span>IsSentence</span> <span>=</span> <span>Is</span>[<span>lambda</span> <span>text</span>: <span>text</span> <span>and</span> <span>text</span>[<span>-</span><span>1</span>] <span>==</span> <span>&#39;.&#39;</span>]

<span># Validator matching only single- or double-quoted strings.</span>
<span>def</span> <span>_is_quoted</span>(<span>text</span>): <span>return</span> <span>text</span>.<span>count</span>(<span>&#39;&#34;&#39;</span>) <span>&gt;=</span> <span>2</span> <span>or</span> <span>text</span>.<span>count</span>(<span>&#34;&#39;&#34;</span>) <span>&gt;=</span> <span>2</span>
<span>IsQuoted</span> <span>=</span> <span>Is</span>[<span>_is_quoted</span>]

<span># Combine multiple validators by just listing them sequentially.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>desentence_lengthy_quoted_sentence</span>(
    <span>text</span>: <span>Annotated</span>[<span>str</span>, <span>IsLengthy</span>, <span>IsSentence</span>, <span>IsQuoted</span>]]) <span>-&gt;</span> <span>str</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Strip the suffixing period from a lengthy quoted sentence... &#39;cause.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>text</span>[:<span>-</span><span>1</span>]  <span># this is horrible</span>

<span># Combine multiple validators by just &#34;&amp;&#34;-ing them sequentially. Yes, this</span>
<span># is exactly identical to the prior function. We do this because we can.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>desentence_lengthy_quoted_sentence_part_deux</span>(
    <span>text</span>: <span>Annotated</span>[<span>str</span>, <span>IsLengthy</span> <span>&amp;</span> <span>IsSentence</span> <span>&amp;</span> <span>IsQuoted</span>]]) <span>-&gt;</span> <span>str</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Strip the suffixing period from a lengthy quoted sentence... again.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>text</span>[:<span>-</span><span>1</span>]  <span># this is still horrible</span>

<span># Combine multiple validators with as many &#34;&amp;&#34;, &#34;|&#34;, and &#34;~&#34; operators as</span>
<span># you can possibly stuff into a module that your coworkers can stomach.</span>
<span># (They will thank you later. Possibly much later.)</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>strip_lengthy_or_quoted_sentence</span>(
    <span>text</span>: <span>Annotated</span>[<span>str</span>, <span>IsLengthy</span> <span>|</span> (<span>IsSentence</span> <span>&amp;</span> <span>~</span><span>IsQuoted</span>)]]) <span>-&gt;</span> <span>str</span>:
    <span>&#39;&#39;&#39;</span>
<span>    Strip the suffixing character from a string that is lengthy and/or a</span>
<span>    quoted sentence, because your web app deserves only the best data.</span>
<span>    &#39;&#39;&#39;</span>

    <span>return</span> <span>text</span>[:<span>-</span><span>1</span>]  <span># this is frankly outrageous</span></pre></div>
<a name="user-content-validator-alternatives"></a>
<h4 dir="auto"><a id="user-content-validator-alternatives" aria-hidden="true" href="#validator-alternatives"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id44">Validator Alternatives</a></h4>
<p dir="auto">If the unbridled power of beartype validators leaves you variously queasy,
uneasy, and suspicious of our core worldview, beartype also supports
third-party type hints like <a href="#numpy-type-hints">typed NumPy arrays</a>.</p>
<p dir="auto">Whereas beartype validators are verbose, expressive, and general-purpose, the
following hints are terse, inexpressive, and domain-specific. Since beartype
internally converts these hints to their equivalent validators, <a href="#validator-caveats">similar
caveats apply</a>. Notably, these hints require:</p>
<ul dir="auto">
<li>Either <strong>Python ≥ 3.9</strong> <em>or</em> <a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions ≥ 3.9.0.0</a>.</li>
</ul>
<a name="user-content-numpy-type-hints"></a>
<h5 dir="auto"><a id="user-content-numpy-type-hints" aria-hidden="true" href="#numpy-type-hints"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id45">NumPy Type Hints</a></h5>
<p dir="auto">Beartype conditionally supports <a href="https://numpy.org/devdocs/reference/typing.html" rel="nofollow">NumPy type hints (i.e., annotations created by
subscripting (indexing) various attributes of the &#34;numpy.typing&#34; subpackage)</a> when these optional runtime dependencies are <em>all</em>
satisfied:</p>
<ul dir="auto">
<li>Python ≥ 3.8.0.</li>
<li>beartype ≥ 0.8.0.</li>
<li><a href="https://numpy.org" rel="nofollow">NumPy ≥ 1.21.0</a>.</li>
<li>Either <strong>Python ≥ 3.9</strong> <em>or</em> <a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions ≥ 3.9.0.0</a>.</li>
</ul>
<p dir="auto">Beartype internally converts <a href="https://numpy.org/devdocs/reference/typing.html" rel="nofollow">NumPy type hints</a> into
<a href="#beartype-validators">equivalent beartype validators</a> at decoration time.
<a href="https://numpy.org/devdocs/reference/typing.html" rel="nofollow">NumPy type hints currently only validate dtypes</a>, a common
but limited use case. <a href="#beartype-validators">Beartype validators</a> validate
<em>any</em> arbitrary combinations of array constraints – including dtypes, shapes,
contents, and... well, <em>anything.</em> Which is alot. <a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">NumPy type hints</a> are thus just syntactic sugar for <a href="#beartype-validators">beartype
validators</a> – albeit quasi-portable syntactic sugar
also supported by <a href="http://mypy-lang.org" rel="nofollow">mypy</a>.</p>
<p dir="auto">Wherever you can, prefer <a href="https://numpy.org/devdocs/reference/typing.html" rel="nofollow">NumPy type hints</a> for portability.
Everywhere else, default to <a href="#beartype-validators">beartype validators</a> for
generality. Combine them for the best of all possible worlds:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from beartype.vale import IsAttr, IsEqual
from numpy import floating
from numpy.typing import NDArray
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Beartype validator + NumPy type hint matching all two-dimensional NumPy
# arrays of floating-point numbers of any arbitrary precision.
NumpyFloat64Array = Annotated[NDArray[floating], IsAttr[&#39;ndim&#39;, IsEqual[2]]]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>IsAttr</span>, <span>IsEqual</span>
<span>from</span> <span>numpy</span> <span>import</span> <span>floating</span>
<span>from</span> <span>numpy</span>.<span>typing</span> <span>import</span> <span>NDArray</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Beartype validator + NumPy type hint matching all two-dimensional NumPy</span>
<span># arrays of floating-point numbers of any arbitrary precision.</span>
<span>NumpyFloat64Array</span> <span>=</span> <span>Annotated</span>[<span>NDArray</span>[<span>floating</span>], <span>IsAttr</span>[<span>&#39;ndim&#39;</span>, <span>IsEqual</span>[<span>2</span>]]]</pre></div>
<p dir="auto">Rejoice! A one-liner solves everything yet again.</p>
<a name="user-content-typed-numpy-arrays"></a>
<h6 dir="auto"><a id="user-content-typed-numpy-arrays" aria-hidden="true" href="#typed-numpy-arrays"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id46">Typed NumPy Arrays</a></h6>
<p dir="auto">Type NumPy arrays by subscripting (indexing) the <a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">numpy.typing.NDArray</a> class
with one of three possible types of objects:</p>
<ul dir="auto">
<li>An <strong>array dtype</strong> (i.e., instance of the <a href="https://numpy.org/doc/stable/reference/arrays.dtypes.html" rel="nofollow">numpy.dtype</a> class).</li>
<li>A <strong>scalar dtype</strong> (i.e., concrete subclass of the <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.generic" rel="nofollow">numpy.generic</a> abstract
base class (ABC)).</li>
<li>A <strong>scalar dtype ABC</strong> (i.e., abstract subclass of the <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.generic" rel="nofollow">numpy.generic</a> ABC).</li>
</ul>
<p dir="auto">Beartype generates fundamentally different type-checking code for these types,
complying with both <a href="http://mypy-lang.org" rel="nofollow">mypy</a> semantics (which behaves similarly) and our userbase
(which demands this behaviour). May there be hope for our future…</p>
<p dir="auto"><em>class</em> numpy.typing.<strong>NDArray</strong>[numpy.dtype]</p>
<blockquote>
<p dir="auto"><strong>NumPy array typed by array dtype.</strong> A PEP-noncompliant type hint
enforcing object equality against any <strong>array dtype</strong> (i.e., <a href="https://numpy.org/doc/stable/reference/arrays.dtypes.html" rel="nofollow">numpy.dtype</a>
instance), created by subscripting (indexing) the <a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">numpy.typing.NDArray</a>
class with that array dtype.</p>
<p dir="auto">Prefer this variant when validating the exact data type of an array:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from numpy import dtype
from numpy.typing import NDArray

# NumPy type hint matching all NumPy arrays of 32-bit big-endian integers,
# semantically equivalent to this beartype validator:
#     NumpyInt32BigEndianArray = Annotated[
#         np.ndarray, IsAttr[&#39;dtype&#39;, IsEqual[dtype(&#39;&gt;i4&#39;)]]]
NumpyInt32BigEndianArray = NDArray[dtype(&#39;&gt;i4&#39;)]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>numpy</span> <span>import</span> <span>dtype</span>
<span>from</span> <span>numpy</span>.<span>typing</span> <span>import</span> <span>NDArray</span>

<span># NumPy type hint matching all NumPy arrays of 32-bit big-endian integers,</span>
<span># semantically equivalent to this beartype validator:</span>
<span>#     NumpyInt32BigEndianArray = Annotated[</span>
<span>#         np.ndarray, IsAttr[&#39;dtype&#39;, IsEqual[dtype(&#39;&gt;i4&#39;)]]]</span>
<span>NumpyInt32BigEndianArray</span> <span>=</span> <span>NDArray</span>[<span>dtype</span>(<span>&#39;&gt;i4&#39;</span>)]</pre></div>
</blockquote>
<p dir="auto"><em>class</em> numpy.typing.<strong>NDArray</strong>[numpy.dtype.type]</p>
<blockquote>
<p dir="auto"><strong>NumPy array typed by scalar dtype.</strong> A PEP-noncompliant type hint
enforcing object equality against any <strong>scalar dtype</strong> (i.e., concrete
subclass of the <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.generic" rel="nofollow">numpy.generic</a> ABC), created by subscripting (indexing) the
<a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">numpy.typing.NDArray</a> class with that scalar dtype.</p>
<p dir="auto">Prefer this variant when validating the exact scalar precision of an array:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from numpy import float64
from numpy.typing import NDArray

# NumPy type hint matching all NumPy arrays of 64-bit floats, semantically
# equivalent to this beartype validator:
#     NumpyFloat64Array = Annotated[
#         np.ndarray, IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsEqual[float64]]]]
NumpyFloat64Array = NDArray[float64]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>numpy</span> <span>import</span> <span>float64</span>
<span>from</span> <span>numpy</span>.<span>typing</span> <span>import</span> <span>NDArray</span>

<span># NumPy type hint matching all NumPy arrays of 64-bit floats, semantically</span>
<span># equivalent to this beartype validator:</span>
<span>#     NumpyFloat64Array = Annotated[</span>
<span>#         np.ndarray, IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsEqual[float64]]]]</span>
<span>NumpyFloat64Array</span> <span>=</span> <span>NDArray</span>[<span>float64</span>]</pre></div>
<p dir="auto">Common scalar dtypes include:</p>
<ul dir="auto">
<li><strong>Fixed-precision integer dtypes</strong> (e.g., <code>numpy.int32</code>,
<code>numpy.int64</code>).</li>
<li><strong>Fixed-precision floating-point dtypes</strong> (e.g.,
<code>numpy.float32</code>, <code>numpy.float64</code>).</li>
</ul>
</blockquote>
<p dir="auto"><em>class</em> numpy.typing.<strong>NDArray</strong>[type[numpy.dtype.type]]</p>
<blockquote>
<p dir="auto"><strong>NumPy array typed by scalar dtype ABC.</strong> A PEP-noncompliant type hint
enforcing type inheritance against any <strong>scalar dtype ABC</strong> (i.e.,
abstract subclass of the <a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.generic" rel="nofollow">numpy.generic</a> ABC), created by subscripting
(indexing) the <a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">numpy.typing.NDArray</a> class with that ABC.</p>
<p dir="auto">Prefer this variant when validating only the <em>kind</em> of scalars (without
reference to exact precision) in an array:</p>
<div data-snippet-clipboard-copy-content="# Import the requisite machinery.
from beartype import beartype
from numpy import floating
from numpy.typing import NDArray

# NumPy type hint matching all NumPy arrays of floats of arbitrary
# precision, equivalent to this beartype validator:
#     NumpyFloatArray = Annotated[
#         np.ndarray, IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsSubclass[floating]]]]
NumpyFloatArray = NDArray[floating]
"><pre><span># Import the requisite machinery.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>numpy</span> <span>import</span> <span>floating</span>
<span>from</span> <span>numpy</span>.<span>typing</span> <span>import</span> <span>NDArray</span>

<span># NumPy type hint matching all NumPy arrays of floats of arbitrary</span>
<span># precision, equivalent to this beartype validator:</span>
<span>#     NumpyFloatArray = Annotated[</span>
<span>#         np.ndarray, IsAttr[&#39;dtype&#39;, IsAttr[&#39;type&#39;, IsSubclass[floating]]]]</span>
<span>NumpyFloatArray</span> <span>=</span> <span>NDArray</span>[<span>floating</span>]</pre></div>
<p dir="auto">Common scalar dtype ABCs include:</p>
<ul dir="auto">
<li><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.integer" rel="nofollow">numpy.integer</a>, the superclass of all fixed-precision integer dtypes.</li>
<li><a href="https://numpy.org/doc/stable/reference/arrays.scalars.html?highlight=numpy%20generic#numpy.floating" rel="nofollow">numpy.floating</a>, the superclass of all fixed-precision floating-point
dtypes.</li>
</ul>
</blockquote>
<a name="user-content-warnings"></a>
<h3 dir="auto"><a id="user-content-warnings" aria-hidden="true" href="#warnings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id47">Warnings</a></h3>
<p dir="auto">Beartype occasionally emits non-fatal warnings at decoration time. While most
are self-explanatory, more than a few assume prior knowledge of arcane
type-hinting standards <em>or</em> require non-trivial resolutions warranting further
discussion. Let&#39;s ELI5 this for the good of the common... good.</p>
<a name="user-content-pep-484-deprecations"></a>
<h4 dir="auto"><a id="user-content-pep-484-deprecations" aria-hidden="true" href="#pep-484-deprecations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id48">PEP 484 Deprecations</a></h4>
<p dir="auto">Beartype may occasionally emit non-fatal <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a> deprecation warnings under
Python ≥ 3.9 resembling:</p>
<pre>/home/kumamon/beartype/_util/hint/pep/utilpeptest.py:377:
BeartypeDecorHintPep484DeprecationWarning: PEP 484 type hint
typing.List[int] deprecated by PEP 585 scheduled for removal in the first
Python version released after October 5th, 2025. To resolve this, either
drop Python &lt; 3.9 support and globally replace this hint by the equivalent
PEP 585 type hint (e.g., &#34;typing.List[int]&#34; by &#34;list[int]&#34;) or see this
discussion topic for saner and more portable solutions:
    https://github.com/beartype/beartype#pep-484-deprecations
</pre>
<p dir="auto">This is that discussion topic. Let&#39;s dissect this like a mantis shrimp
repeatedly punching out giant kraken.</p>
<a name="user-content-what-does-this-mean"></a>
<h5 dir="auto"><a id="user-content-what-does-this-mean" aria-hidden="true" href="#what-does-this-mean"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id49">What Does This Mean?</a></h5>
<p dir="auto">The <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP 585</a> standard first introduced by Python 3.9.0 deprecated (obsoleted)
<em>most</em> of the <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a> standard first introduced by Python 3.5.0 in the
official <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> module. All deprecated type hints are slated to &#34;be removed
from the <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> module in the first Python version released 5 years after the
release of Python 3.9.0.&#34; Spoiler: Python 3.9.0 was released on October 5th,
2020. Altogether, this means that:</p>
<blockquote>
<p dir="auto"><strong><g-emoji alias="bangbang" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/203c.png">‼</g-emoji></strong></p>
<p dir="auto"><strong>Most of the &#34;typing&#34; module will be removed in 2025 or 2026.</strong></p>
</blockquote>
<p dir="auto">If your codebase currently imports from the <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> module, <em>most</em> of those
imports will break under an upcoming Python release. This is what <code>beartype</code>
is shouting about. Bad Changes™ are coming to dismantle your working code.</p>
<a name="user-content-are-we-on-the-worst-timeline"></a>
<h5 dir="auto"><a id="user-content-are-we-on-the-worst-timeline" aria-hidden="true" href="#are-we-on-the-worst-timeline"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id50">Are We on the Worst Timeline?</a></h5>
<p dir="auto">Season Eight of <em>Game of Thrones</em> previously answered this question, but let&#39;s
try again. You have three options to avert the looming disaster that threatens
to destroy everything you hold dear (in ascending order of justice):</p>
<ol dir="auto">
<li><p dir="auto"><strong>Drop Python &lt; 3.9.</strong> The easiest (but worst) solution is to unilaterally
drop support for Python &lt; 3.9 by globally replacing all deprecated <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP
484</a>-compliant type hints with equivalent <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP 585</a>-compliant type hints
(e.g., <code>typing.List[int]</code> with <code>list[int]</code>). This is really only ideal
for closed-source proprietary projects with a limited userbase. All other
projects should prefer saner solutions outlined below.</p>
</li>
<li><p dir="auto"><strong>Hide warnings.</strong> The middle-finger way is to just squelch all deprecation
warnings with an ignore warning filter targeting the
<code>BeartypeDecorHintPep484DeprecationWarning</code> category. On the one hand,
this will still fail in 2025 or 2026 with fiery explosions and thus only
constitutes a temporary workaround at best. On the other hand, this has the
obvious advantage of preserving Python &lt; 3.9 support with minimal to no
refactoring costs. The two ways to do this have differing tradeoffs
depending on who you want to suffer most – your developers or your userbase:</p>
<div data-snippet-clipboard-copy-content="# Do it globally for everyone, whether they want you to or not!
# This is the &#34;Make Users Suffer&#34; option.
from beartype.roar import BeartypeDecorHintPep484DeprecationWarning
from warnings import filterwarnings
filterwarnings(&#34;ignore&#34;, category=BeartypeDecorHintPep484DeprecationWarning)
...

# Do it locally only for you! (Hope you like increasing your
# indentation level in every single codebase module.)
# This is the &#34;Make Yourself Suffer&#34; option.
from beartype.roar import BeartypeDecorHintPep484DeprecationWarning
from warnings import catch_warnings, filterwarnings
with catch_warnings():
    filterwarnings(&#34;ignore&#34;, category=BeartypeDecorHintPep484DeprecationWarning)
    ...
"><pre><span># Do it globally for everyone, whether they want you to or not!</span>
<span># This is the &#34;Make Users Suffer&#34; option.</span>
<span>from</span> <span>beartype</span>.<span>roar</span> <span>import</span> <span>BeartypeDecorHintPep484DeprecationWarning</span>
<span>from</span> <span>warnings</span> <span>import</span> <span>filterwarnings</span>
<span>filterwarnings</span>(<span>&#34;ignore&#34;</span>, <span>category</span><span>=</span><span>BeartypeDecorHintPep484DeprecationWarning</span>)
...

<span># Do it locally only for you! (Hope you like increasing your</span>
<span># indentation level in every single codebase module.)</span>
<span># This is the &#34;Make Yourself Suffer&#34; option.</span>
<span>from</span> <span>beartype</span>.<span>roar</span> <span>import</span> <span>BeartypeDecorHintPep484DeprecationWarning</span>
<span>from</span> <span>warnings</span> <span>import</span> <span>catch_warnings</span>, <span>filterwarnings</span>
<span>with</span> <span>catch_warnings</span>():
    <span>filterwarnings</span>(<span>&#34;ignore&#34;</span>, <span>category</span><span>=</span><span>BeartypeDecorHintPep484DeprecationWarning</span>)
    ...</pre></div>
</li>
<li><p dir="auto"><strong>Type aliases.</strong> The hardest (but best) solution is to use <a href="https://www.python.org/dev/peps/pep-0484/#type-aliases" rel="nofollow">type aliases</a>
to conditionally annotate callables with either <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a> <em>or</em> <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">585</a> type hints depending on the major version of the current Python
interpreter. Since this is life, the hard way is also the best way – but
also hard. Unlike the <strong>drop Python &lt; 3.9</strong> approach, this approach
preserves backward compatibility with Python &lt; 3.9. Unlike the <strong>hide
warnings</strong> approach, this approach also preserves forward compatibility with
Python ≥ 3.14159265. <a href="https://www.python.org/dev/peps/pep-0484/#type-aliases" rel="nofollow">Type aliases</a> means defining a new private
<code>{your_package}._typing</code> submodule resembling:</p>
<div data-snippet-clipboard-copy-content="# In &#34;{your_package}._typing&#34;:
from sys import version_info

if version_info &gt;= (3, 9):
    List = list
    Tuple = tuple
    ...
else:
    from typing import List, Tuple, ...
"><pre><span># In &#34;{your_package}._typing&#34;:</span>
<span>from</span> <span>sys</span> <span>import</span> <span>version_info</span>

<span>if</span> <span>version_info</span> <span>&gt;=</span> (<span>3</span>, <span>9</span>):
    <span>List</span> <span>=</span> <span>list</span>
    <span>Tuple</span> <span>=</span> <span>tuple</span>
    ...
<span>else</span>:
    <span>from</span> <span>typing</span> <span>import</span> <span>List</span>, <span>Tuple</span>, ...</pre></div>
<p dir="auto">Then globally refactor all deprecated <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a> imports from <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> to
<code>{your_package}._typing</code> instead:</p>
<div data-snippet-clipboard-copy-content="# Instead of this...
from typing import List, Tuple

# ...just do this.
from {your_package}._typing import List, Tuple
"><pre><span># Instead of this...</span>
<span>from</span> <span>typing</span> <span>import</span> <span>List</span>, <span>Tuple</span>

<span># ...just do this.</span>
<span>from</span> {<span>your_package</span>}.<span>_typing</span> <span>import</span> <span>List</span>, <span>Tuple</span></pre></div>
<p dir="auto">What could be simpler? <sup>...gagging noises faintly heard</sup></p>
</li>
</ol>
<p dir="auto">Coming up! A shocking revelation that cheaters prosper.</p>
<a name="user-content-cheatsheet"></a>
<h2 dir="auto"><a id="user-content-cheatsheet" aria-hidden="true" href="#cheatsheet"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id51">Cheatsheet</a></h2>
<p dir="auto">Let&#39;s type-check like <a href="https://www.youtube.com/watch?v=H-kL8A4RNQ8" rel="nofollow">greased lightning</a>:</p>
<div data-snippet-clipboard-copy-content="# ..................{              IMPORTS               }..................
# Import the core @beartype decorator.
from beartype import beartype

# Import PEP 585-compliant type hints. Note this requires Python ≥ 3.9.
from collections import abc

# Import PEP 484-compliant type hints, too. Note that many of these types
# have been deprecated by PEP 585-compliant type hints under Python ≥ 3.9,
# where @beartype emits non-fatal deprecation warnings at decoration time.
# See also: https://docs.python.org/3/library/typing.html
import typing

# Import backported PEP-compliant type hints from &#34;typing_extensions&#34;,
# improving portability across Python versions. &#34;typing.Literal&#34; requires
# Python ≥ 3.9; &#34;typing_extensions.Literal&#34; only requires Python ≥ 3.6.
import typing_extensions

# Import beartype-specific types to annotate callables with.
from beartype.cave import NoneType, NoneTypeOr, RegexTypes, ScalarTypes

# Import official abstract base classes (ABCs), too.
from numbers import Integral, Real

# Import user-defined classes, too.
from my_package.my_module import MyClass

# ..................{              TYPEVARS              }..................
# User-defined PEP 484-compliant type variable. Note @beartype currently
# ignores type variables, but that @beartype 1.0.0 is expected to fully
# support type variables. See also: https://github.com/beartype/beartype/issues/7
T = typing.TypeVar(&#39;T&#39;)

# ..................{              PROTOCOLS             }..................
# User-defined PEP 544-compliant protocol referenced below in type hints.
# Note this requires Python ≥ 3.8 and that protocols *MUST* be explicitly
# decorated by the @runtime_checkable decorator to be usable with @beartype.
@typing.runtime_checkable   # &lt;---- mandatory boilerplate line. it is sad.
class MyProtocol(typing.Protocol):
    def my_method(self) -&gt; str:
        return (
            &#39;Objects satisfy this protocol only if their classes &#39;
            &#39;define a method with the same signature as this method.&#39;
        )

# ..................{              FUNCTIONS             }..................
# Decorate functions with @beartype and...
@beartype
def my_function(
    # Annotate builtin types as is.
    param_must_satisfy_builtin_type: str,

    # Annotate user-defined classes as is, too. Note this covariantly
    # matches all instances of both this class and subclasses of this class.
    param_must_satisfy_user_type: MyClass,

    # Annotate PEP 593-compliant types, indexed by a PEP-compliant type hint
    # followed by zero or more arbitrary objects.
    param_must_satisfy_pep593: typing.Annotated[set[int], range(5), True],

    # Annotate PEP 586-compliant literals, indexed by either a boolean, byte
    # string, integer, string, &#34;enum.Enum&#34; member, or &#34;None&#34;.
    param_must_satisfy_pep586: typing.Literal[
        &#39;This parameter must equal this string.&#39;],

    # Annotate PEP 585-compliant builtin container types, indexed by the
    # types of items these containers are expected to contain.
    param_must_satisfy_pep585_builtin: list[str],

    # Annotate PEP 585-compliant standard collection types, indexed too.
    param_must_satisfy_pep585_collection: abc.MutableSequence[str],

    # Annotate PEP 544-compliant protocols, either unindexed or indexed by
    # one or more type variables.
    param_must_satisfy_pep544: MyProtocol[T],

    # Annotate PEP 484-compliant non-standard container types defined by the
    # &#34;typing&#34; module, optionally indexed and only usable as type hints.
    # Note that these types have all been deprecated by PEP 585 under Python
    # ≥ 3.9. See also: https://docs.python.org/3/library/typing.html
    param_must_satisfy_pep484_typing: typing.List[int],

    # Annotate PEP 484-compliant unions of arbitrary types, including
    # builtin types, type variables, and PEP 585-compliant type hints.
    param_must_satisfy_pep484_union: typing.Union[
        dict, T, tuple[MyClass, ...]],

    # Annotate PEP 484-compliant relative forward references dynamically
    # resolved at call time as unqualified classnames relative to the
    # current user-defined submodule. Note this class is defined below and
    # that beartype-specific absolute forward references are also supported.
    param_must_satisfy_pep484_relative_forward_ref: &#39;MyOtherClass&#39;,

    # Annotate PEP-compliant types indexed by relative forward references.
    # Forward references are supported everywhere standard types are.
    param_must_satisfy_pep484_indexed_relative_forward_ref: (
        typing.Union[&#39;MyPep484Generic&#39;, set[&#39;MyPep585Generic&#39;]]),

    # Annotate beartype-specific types predefined by the beartype cave.
    param_must_satisfy_beartype_type_from_cave: NoneType,

    # Annotate beartype-specific unions of types as tuples.
    param_must_satisfy_beartype_union: (dict, MyClass, int),

    # Annotate beartype-specific unions predefined by the beartype cave.
    param_must_satisfy_beartype_union_from_cave: ScalarTypes,

    # Annotate beartype-specific unions concatenated together.
    param_must_satisfy_beartype_union_concatenated: (
        abc.Iterator,) + ScalarTypes,

    # Annotate beartype-specific absolute forward references dynamically
    # resolved at call time as fully-qualified &#34;.&#34;-delimited classnames.
    param_must_satisfy_beartype_absolute_forward_ref: (
        &#39;my_package.my_module.MyClass&#39;),

    # Annotate beartype-specific forward references in unions of types, too.
    param_must_satisfy_beartype_union_with_forward_ref: (
        abc.Iterable, &#39;my_package.my_module.MyOtherClass&#39;, NoneType),

    # Annotate PEP 484-compliant optional types. Note that parameters
    # annotated by this type typically default to the &#34;None&#34; singleton.
    param_must_satisfy_pep484_optional: typing.Optional[float] = None,

    # Annotate PEP 484-compliant optional unions of types.
    param_must_satisfy_pep484_optional_union: (
        typing.Optional[typing.Union[float, int]]) = None,

    # Annotate beartype-specific optional types.
    param_must_satisfy_beartype_type_optional: NoneTypeOr[float] = None,

    # Annotate beartype-specific optional unions of types.
    param_must_satisfy_beartype_tuple_optional: NoneTypeOr[float, int] = None,

    # Annotate variadic positional arguments as above, too.
    *args: ScalarTypes + (Real, &#39;my_package.my_module.MyScalarType&#39;),

    # Annotate keyword-only arguments as above, too.
    param_must_be_passed_by_keyword_only: abc.Sequence[
        typing.Union[bool, list[str]]],

# Annotate return types as above, too.
) -&gt; Union[Integral, &#39;MyPep585Generic&#39;, bool]:
    return 0xDEADBEEF

# Decorate coroutines as above but returning a coroutine type.
@beartype
async def my_coroutine() -&gt; abc.Coroutine[None, None, int]:
    from async import sleep
    await sleep(0)
    return 0xDEFECA7E

# ..................{              GENERATORS            }..................
# Decorate synchronous generators as above but returning a synchronous
# generator type.
@beartype
def my_sync_generator() -&gt; abc.Generator[int, None, None]:
    yield from range(0xBEEFBABE, 0xCAFEBABE)

# Decorate asynchronous generators as above but returning an asynchronous
# generator type.
@beartype
async def my_async_generator() -&gt; abc.AsyncGenerator[int, None]:
    from async import sleep
    await sleep(0)
    yield 0x8BADF00D

# ..................{              CLASSES               }..................
# User-defined class referenced in forward references above.
class MyOtherClass:
    # Decorate instance methods as above without annotating &#34;self&#34;.
    @beartype
    def __init__(self, scalar: ScalarTypes) -&gt; None:
        self._scalar = scalar

    # Decorate class methods as above without annotating &#34;cls&#34;. When
    # chaining decorators, &#34;@beartype&#34; should typically be specified last.
    @classmethod
    @beartype
    def my_classmethod(cls, regex: RegexTypes, wut: str) -&gt; (
        Callable[(), str]):
        import re
        return lambda: re.sub(regex, &#39;unbearable&#39;, str(cls._scalar) + wut)

    # Decorate static methods as above.
    @staticmethod
    @beartype
    def my_staticmethod(callable: abc.Callable[[str], T], text: str) -&gt; T:
        return callable(text)

    # Decorate property getter methods as above.
    @property
    @beartype
    def my_gettermethod(self) -&gt; abc.Iterator[int]:
        return range(0x0B00B135 + int(self._scalar), 0xB16B00B5)

    # Decorate property setter methods as above.
    @my_gettermethod.setter
    @beartype
    def my_settermethod(self, bad: Integral = 0xBAAAAAAD) -&gt; None:
        self._scalar = bad if bad else 0xBADDCAFE

    # Decorate methods accepting or returning instances of the class
    # currently being declared with relative forward references.
    @beartype
    def my_selfreferential_method(self) -&gt; list[&#39;MyOtherClass&#39;]:
        return [self] * 42

# ..................{              GENERICS              }..................
# User-defined PEP 585-compliant generic referenced above in type hints.
# Note this requires Python ≥ 3.9.
class MyPep585Generic(tuple[int, float]):
    # Decorate static class methods as above without annotating &#34;cls&#34;.
    @beartype
    def __new__(cls, integer: int, real: float) -&gt; tuple[int, float]:
        return tuple.__new__(cls, (integer, real))

# User-defined PEP 484-compliant generic referenced above in type hints.
class MyPep484Generic(typing.Tuple[str, ...]):
    # Decorate static class methods as above without annotating &#34;cls&#34;.
    @beartype
    def __new__(cls, *args: str) -&gt; typing.Tuple[str, ...]:
        return tuple.__new__(cls, args)

# ..................{             VALIDATORS             }..................
# Import PEP 593-compliant beartype-specific type hints validating arbitrary
# caller constraints. Note this requires beartype ≥ 0.7.0 and either:
# * Python ≥ 3.9.0.
# * typing_extensions ≥ 3.9.0.0.
from beartype.vale import Is, IsAttr, IsEqual
from typing import Annotated   # &lt;--------------- if Python ≥ 3.9.0
#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0

# Import third-party packages to validate.
import numpy as np

# Validator matching only two-dimensional NumPy arrays of 64-bit floats,
# specified with a single caller-defined lambda function.
NumpyArray2DFloat = Annotated[np.ndarray, Is[
    lambda arr: arr.ndim == 2 and arr.dtype == np.dtype(np.float64)]]

# Validator matching only one-dimensional NumPy arrays of 64-bit floats,
# specified with two declarative expressions. Although verbose, this
# approach generates optimal reusable code that avoids function calls.
IsNumpyArray1D = IsAttr[&#39;ndim&#39;, IsEqual[1]]
IsNumpyArrayFloat = IsAttr[&#39;dtype&#39;, IsEqual[np.dtype(np.float64)]]
NumpyArray1DFloat = Annotated[np.ndarray, IsNumpyArray1D, IsNumpyArrayFloat]

# Validator matching only empty NumPy arrays, equivalent to but faster than:
#     NumpyArrayEmpty = Annotated[np.ndarray, Is[lambda arr: arr.size != 0]]
IsNumpyArrayEmpty = IsAttr[&#39;size&#39;, IsEqual[0]]
NumpyArrayEmpty = Annotated[np.ndarray, IsNumpyArrayEmpty]

# Validator composed with standard operators from the above validators,
# permissively matching all of the following:
# * Empty NumPy arrays of any dtype *except* 64-bit floats.
* * Non-empty one- and two-dimensional NumPy arrays of 64-bit floats.
NumpyArrayEmptyNonFloatOrNonEmptyFloat1Or2D = Annotated[np.ndarray,
    # &#34;&amp;&#34; creates a new validator matching when both operands match, while
    # &#34;|&#34; creates a new validator matching when one or both operands match;
    # &#34;~&#34; creates a new validator matching when its operand does not match.
    # Group operands to enforce semantic intent and avoid precedence woes.
    (IsNumpyArrayEmpty &amp; ~IsNumpyArrayFloat) | (
        ~IsNumpyArrayEmpty &amp; IsNumpyArrayFloat (
            IsNumpyArray1D | IsAttr[&#39;ndim&#39;, IsEqual[2]]
        )
    )
]

# Decorate functions accepting validators like usual and...
@beartype
def my_validated_function(
    # Annotate validators just like standard type hints.
    param_must_satisfy_validator: NumpyArrayEmptyOrNonemptyFloat1Or2D,
# Combine validators with standard type hints, too.
) -&gt; list[NumpyArrayEmptyNonFloatOrNonEmptyFloat1Or2D]:
    return (
        [param_must_satisfy_validator] * 0xFACEFEED
        if bool(param_must_satisfy_validator) else
        [np.array([i], np.dtype=np.float64) for i in range(0xFEEDFACE)]
    )

# ..................{             NUMPY                  }..................
# Import NumPy-specific type hints validating NumPy array constraints. Note:
# * These hints currently only validate array dtypes. To validate additional
#   constraints like array shapes, prefer validators instead. See above.
# * This requires NumPy ≥ 1.21.0, beartype ≥ 0.8.0, and either:
#   * Python ≥ 3.9.0.
#   * typing_extensions ≥ 3.9.0.0.
from numpy.typing import NDArray

# NumPy type hint matching all NumPy arrays of 64-bit floats. Internally,
# beartype reduces this to the equivalent validator:
#     NumpyArrayFloat = Annotated[
#         np.ndarray, IsAttr[&#39;dtype&#39;, IsEqual[np.dtype(np.float64)]]]
NumpyArrayFloat = NDArray[np.float64]

# Decorate functions accepting NumPy type hints like usual and...
@beartype
def my_numerical_function(
    # Annotate NumPy type hints just like standard type hints.
    param_must_satisfy_numpy: NumpyArrayFloat,
# Combine NumPy type hints with standard type hints, too.
) -&gt; tuple[NumpyArrayFloat, int]:
    return (param_must_satisfy_numpy, len(param_must_satisfy_numpy))
"><pre><span># ..................{              IMPORTS               }..................</span>
<span># Import the core @beartype decorator.</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span># Import PEP 585-compliant type hints. Note this requires Python ≥ 3.9.</span>
<span>from</span> <span>collections</span> <span>import</span> <span>abc</span>

<span># Import PEP 484-compliant type hints, too. Note that many of these types</span>
<span># have been deprecated by PEP 585-compliant type hints under Python ≥ 3.9,</span>
<span># where @beartype emits non-fatal deprecation warnings at decoration time.</span>
<span># See also: https://docs.python.org/3/library/typing.html</span>
<span>import</span> <span>typing</span>

<span># Import backported PEP-compliant type hints from &#34;typing_extensions&#34;,</span>
<span># improving portability across Python versions. &#34;typing.Literal&#34; requires</span>
<span># Python ≥ 3.9; &#34;typing_extensions.Literal&#34; only requires Python ≥ 3.6.</span>
<span>import</span> <span>typing_extensions</span>

<span># Import beartype-specific types to annotate callables with.</span>
<span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>NoneType</span>, <span>NoneTypeOr</span>, <span>RegexTypes</span>, <span>ScalarTypes</span>

<span># Import official abstract base classes (ABCs), too.</span>
<span>from</span> <span>numbers</span> <span>import</span> <span>Integral</span>, <span>Real</span>

<span># Import user-defined classes, too.</span>
<span>from</span> <span>my_package</span>.<span>my_module</span> <span>import</span> <span>MyClass</span>

<span># ..................{              TYPEVARS              }..................</span>
<span># User-defined PEP 484-compliant type variable. Note @beartype currently</span>
<span># ignores type variables, but that @beartype 1.0.0 is expected to fully</span>
<span># support type variables. See also: https://github.com/beartype/beartype/issues/7</span>
<span>T</span> <span>=</span> <span>typing</span>.<span>TypeVar</span>(<span>&#39;T&#39;</span>)

<span># ..................{              PROTOCOLS             }..................</span>
<span># User-defined PEP 544-compliant protocol referenced below in type hints.</span>
<span># Note this requires Python ≥ 3.8 and that protocols *MUST* be explicitly</span>
<span># decorated by the @runtime_checkable decorator to be usable with @beartype.</span>
<span>@<span>typing</span>.<span>runtime_checkable</span>   <span># &lt;---- mandatory boilerplate line. it is sad.</span></span>
<span>class</span> <span>MyProtocol</span>(<span>typing</span>.<span>Protocol</span>):
    <span>def</span> <span>my_method</span>(<span>self</span>) <span>-&gt;</span> <span>str</span>:
        <span>return</span> (
            <span>&#39;Objects satisfy this protocol only if their classes &#39;</span>
            <span>&#39;define a method with the same signature as this method.&#39;</span>
        )

<span># ..................{              FUNCTIONS             }..................</span>
<span># Decorate functions with @beartype and...</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>my_function</span>(
    <span># Annotate builtin types as is.</span>
    <span>param_must_satisfy_builtin_type</span>: <span>str</span>,

    <span># Annotate user-defined classes as is, too. Note this covariantly</span>
    <span># matches all instances of both this class and subclasses of this class.</span>
    <span>param_must_satisfy_user_type</span>: <span>MyClass</span>,

    <span># Annotate PEP 593-compliant types, indexed by a PEP-compliant type hint</span>
    <span># followed by zero or more arbitrary objects.</span>
    <span>param_must_satisfy_pep593</span>: <span>typing</span>.<span>Annotated</span>[<span>set</span>[<span>int</span>], <span>range</span>(<span>5</span>), <span>True</span>],

    <span># Annotate PEP 586-compliant literals, indexed by either a boolean, byte</span>
    <span># string, integer, string, &#34;enum.Enum&#34; member, or &#34;None&#34;.</span>
    <span>param_must_satisfy_pep586</span>: <span>typing</span>.<span>Literal</span>[
        <span>&#39;This parameter must equal this string.&#39;</span>],

    <span># Annotate PEP 585-compliant builtin container types, indexed by the</span>
    <span># types of items these containers are expected to contain.</span>
    <span>param_must_satisfy_pep585_builtin</span>: <span>list</span>[<span>str</span>],

    <span># Annotate PEP 585-compliant standard collection types, indexed too.</span>
    <span>param_must_satisfy_pep585_collection</span>: <span>abc</span>.<span>MutableSequence</span>[<span>str</span>],

    <span># Annotate PEP 544-compliant protocols, either unindexed or indexed by</span>
    <span># one or more type variables.</span>
    <span>param_must_satisfy_pep544</span>: <span>MyProtocol</span>[<span>T</span>],

    <span># Annotate PEP 484-compliant non-standard container types defined by the</span>
    <span># &#34;typing&#34; module, optionally indexed and only usable as type hints.</span>
    <span># Note that these types have all been deprecated by PEP 585 under Python</span>
    <span># ≥ 3.9. See also: https://docs.python.org/3/library/typing.html</span>
    <span>param_must_satisfy_pep484_typing</span>: <span>typing</span>.<span>List</span>[<span>int</span>],

    <span># Annotate PEP 484-compliant unions of arbitrary types, including</span>
    <span># builtin types, type variables, and PEP 585-compliant type hints.</span>
    <span>param_must_satisfy_pep484_union</span>: <span>typing</span>.<span>Union</span>[
        <span>dict</span>, <span>T</span>, <span>tuple</span>[<span>MyClass</span>, ...]],

    <span># Annotate PEP 484-compliant relative forward references dynamically</span>
    <span># resolved at call time as unqualified classnames relative to the</span>
    <span># current user-defined submodule. Note this class is defined below and</span>
    <span># that beartype-specific absolute forward references are also supported.</span>
    <span>param_must_satisfy_pep484_relative_forward_ref</span>: <span>&#39;MyOtherClass&#39;</span>,

    <span># Annotate PEP-compliant types indexed by relative forward references.</span>
    <span># Forward references are supported everywhere standard types are.</span>
    <span>param_must_satisfy_pep484_indexed_relative_forward_ref</span>: (
        <span>typing</span>.<span>Union</span>[<span>&#39;MyPep484Generic&#39;</span>, <span>set</span>[<span>&#39;MyPep585Generic&#39;</span>]]),

    <span># Annotate beartype-specific types predefined by the beartype cave.</span>
    <span>param_must_satisfy_beartype_type_from_cave</span>: <span>NoneType</span>,

    <span># Annotate beartype-specific unions of types as tuples.</span>
    <span>param_must_satisfy_beartype_union</span>: (<span>dict</span>, <span>MyClass</span>, <span>int</span>),

    <span># Annotate beartype-specific unions predefined by the beartype cave.</span>
    <span>param_must_satisfy_beartype_union_from_cave</span>: <span>ScalarTypes</span>,

    <span># Annotate beartype-specific unions concatenated together.</span>
    <span>param_must_satisfy_beartype_union_concatenated</span>: (
        <span>abc</span>.<span>Iterator</span>,) <span>+</span> <span>ScalarTypes</span>,

    <span># Annotate beartype-specific absolute forward references dynamically</span>
    <span># resolved at call time as fully-qualified &#34;.&#34;-delimited classnames.</span>
    <span>param_must_satisfy_beartype_absolute_forward_ref</span>: (
        <span>&#39;my_package.my_module.MyClass&#39;</span>),

    <span># Annotate beartype-specific forward references in unions of types, too.</span>
    <span>param_must_satisfy_beartype_union_with_forward_ref</span>: (
        <span>abc</span>.<span>Iterable</span>, <span>&#39;my_package.my_module.MyOtherClass&#39;</span>, <span>NoneType</span>),

    <span># Annotate PEP 484-compliant optional types. Note that parameters</span>
    <span># annotated by this type typically default to the &#34;None&#34; singleton.</span>
    <span>param_must_satisfy_pep484_optional</span>: <span>typing</span>.<span>Optional</span>[<span>float</span>] <span>=</span> <span>None</span>,

    <span># Annotate PEP 484-compliant optional unions of types.</span>
    <span>param_must_satisfy_pep484_optional_union</span>: (
        <span>typing</span>.<span>Optional</span>[<span>typing</span>.<span>Union</span>[<span>float</span>, <span>int</span>]]) <span>=</span> <span>None</span>,

    <span># Annotate beartype-specific optional types.</span>
    <span>param_must_satisfy_beartype_type_optional</span>: <span>NoneTypeOr</span>[<span>float</span>] <span>=</span> <span>None</span>,

    <span># Annotate beartype-specific optional unions of types.</span>
    <span>param_must_satisfy_beartype_tuple_optional</span>: <span>NoneTypeOr</span>[<span>float</span>, <span>int</span>] <span>=</span> <span>None</span>,

    <span># Annotate variadic positional arguments as above, too.</span>
    <span>*</span><span>args</span>: <span>ScalarTypes</span> <span>+</span> (<span>Real</span>, <span>&#39;my_package.my_module.MyScalarType&#39;</span>),

    <span># Annotate keyword-only arguments as above, too.</span>
    <span>param_must_be_passed_by_keyword_only</span>: <span>abc</span>.<span>Sequence</span>[
        <span>typing</span>.<span>Union</span>[<span>bool</span>, <span>list</span>[<span>str</span>]]],

<span># Annotate return types as above, too.</span>
) <span>-&gt;</span> <span>Union</span>[<span>Integral</span>, <span>&#39;MyPep585Generic&#39;</span>, <span>bool</span>]:
    <span>return</span> <span>0xDEADBEEF</span>

<span># Decorate coroutines as above but returning a coroutine type.</span>
<span>@<span>beartype</span></span>
<span>async</span> <span>def</span> <span>my_coroutine</span>() <span>-&gt;</span> <span>abc</span>.<span>Coroutine</span>[<span>None</span>, <span>None</span>, <span>int</span>]:
    <span>from</span> <span>async</span> <span>import</span> <span>sleep</span>
    <span>await</span> <span>sleep</span>(<span>0</span>)
    <span>return</span> <span>0xDEFECA7E</span>

<span># ..................{              GENERATORS            }..................</span>
<span># Decorate synchronous generators as above but returning a synchronous</span>
<span># generator type.</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>my_sync_generator</span>() <span>-&gt;</span> <span>abc</span>.<span>Generator</span>[<span>int</span>, <span>None</span>, <span>None</span>]:
    <span>yield</span> <span>from</span> <span>range</span>(<span>0xBEEFBABE</span>, <span>0xCAFEBABE</span>)

<span># Decorate asynchronous generators as above but returning an asynchronous</span>
<span># generator type.</span>
<span>@<span>beartype</span></span>
<span>async</span> <span>def</span> <span>my_async_generator</span>() <span>-&gt;</span> <span>abc</span>.<span>AsyncGenerator</span>[<span>int</span>, <span>None</span>]:
    <span>from</span> <span>async</span> <span>import</span> <span>sleep</span>
    <span>await</span> <span>sleep</span>(<span>0</span>)
    <span>yield</span> <span>0x8BADF00D</span>

<span># ..................{              CLASSES               }..................</span>
<span># User-defined class referenced in forward references above.</span>
<span>class</span> <span>MyOtherClass</span>:
    <span># Decorate instance methods as above without annotating &#34;self&#34;.</span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>__init__</span>(<span>self</span>, <span>scalar</span>: <span>ScalarTypes</span>) <span>-&gt;</span> <span>None</span>:
        <span>self</span>.<span>_scalar</span> <span>=</span> <span>scalar</span>

    <span># Decorate class methods as above without annotating &#34;cls&#34;. When</span>
    <span># chaining decorators, &#34;@beartype&#34; should typically be specified last.</span>
    <span>@<span>classmethod</span></span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>my_classmethod</span>(<span>cls</span>, <span>regex</span>: <span>RegexTypes</span>, <span>wut</span>: <span>str</span>) <span>-&gt;</span> (
        <span>Callable</span>[(), <span>str</span>]):
        <span>import</span> <span>re</span>
        <span>return</span> <span>lambda</span>: <span>re</span>.<span>sub</span>(<span>regex</span>, <span>&#39;unbearable&#39;</span>, <span>str</span>(<span>cls</span>.<span>_scalar</span>) <span>+</span> <span>wut</span>)

    <span># Decorate static methods as above.</span>
    <span>@<span>staticmethod</span></span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>my_staticmethod</span>(<span>callable</span>: <span>abc</span>.<span>Callable</span>[[<span>str</span>], <span>T</span>], <span>text</span>: <span>str</span>) <span>-&gt;</span> <span>T</span>:
        <span>return</span> <span>callable</span>(<span>text</span>)

    <span># Decorate property getter methods as above.</span>
    <span>@<span>property</span></span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>my_gettermethod</span>(<span>self</span>) <span>-&gt;</span> <span>abc</span>.<span>Iterator</span>[<span>int</span>]:
        <span>return</span> <span>range</span>(<span>0x0B00B135</span> <span>+</span> <span>int</span>(<span>self</span>.<span>_scalar</span>), <span>0xB16B00B5</span>)

    <span># Decorate property setter methods as above.</span>
    <span>@<span>my_gettermethod</span>.<span>setter</span></span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>my_settermethod</span>(<span>self</span>, <span>bad</span>: <span>Integral</span> <span>=</span> <span>0xBAAAAAAD</span>) <span>-&gt;</span> <span>None</span>:
        <span>self</span>.<span>_scalar</span> <span>=</span> <span>bad</span> <span>if</span> <span>bad</span> <span>else</span> <span>0xBADDCAFE</span>

    <span># Decorate methods accepting or returning instances of the class</span>
    <span># currently being declared with relative forward references.</span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>my_selfreferential_method</span>(<span>self</span>) <span>-&gt;</span> <span>list</span>[<span>&#39;MyOtherClass&#39;</span>]:
        <span>return</span> [<span>self</span>] <span>*</span> <span>42</span>

<span># ..................{              GENERICS              }..................</span>
<span># User-defined PEP 585-compliant generic referenced above in type hints.</span>
<span># Note this requires Python ≥ 3.9.</span>
<span>class</span> <span>MyPep585Generic</span>(<span>tuple</span>[<span>int</span>, <span>float</span>]):
    <span># Decorate static class methods as above without annotating &#34;cls&#34;.</span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>__new__</span>(<span>cls</span>, <span>integer</span>: <span>int</span>, <span>real</span>: <span>float</span>) <span>-&gt;</span> <span>tuple</span>[<span>int</span>, <span>float</span>]:
        <span>return</span> <span>tuple</span>.<span>__new__</span>(<span>cls</span>, (<span>integer</span>, <span>real</span>))

<span># User-defined PEP 484-compliant generic referenced above in type hints.</span>
<span>class</span> <span>MyPep484Generic</span>(<span>typing</span>.<span>Tuple</span>[<span>str</span>, ...]):
    <span># Decorate static class methods as above without annotating &#34;cls&#34;.</span>
    <span>@<span>beartype</span></span>
    <span>def</span> <span>__new__</span>(<span>cls</span>, <span>*</span><span>args</span>: <span>str</span>) <span>-&gt;</span> <span>typing</span>.<span>Tuple</span>[<span>str</span>, ...]:
        <span>return</span> <span>tuple</span>.<span>__new__</span>(<span>cls</span>, <span>args</span>)

<span># ..................{             VALIDATORS             }..................</span>
<span># Import PEP 593-compliant beartype-specific type hints validating arbitrary</span>
<span># caller constraints. Note this requires beartype ≥ 0.7.0 and either:</span>
<span># * Python ≥ 3.9.0.</span>
<span># * typing_extensions ≥ 3.9.0.0.</span>
<span>from</span> <span>beartype</span>.<span>vale</span> <span>import</span> <span>Is</span>, <span>IsAttr</span>, <span>IsEqual</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>   <span># &lt;--------------- if Python ≥ 3.9.0</span>
<span>#from typing_extensions import Annotated   # &lt;--- if Python &lt; 3.9.0</span>

<span># Import third-party packages to validate.</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>

<span># Validator matching only two-dimensional NumPy arrays of 64-bit floats,</span>
<span># specified with a single caller-defined lambda function.</span>
<span>NumpyArray2DFloat</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>, <span>Is</span>[
    <span>lambda</span> <span>arr</span>: <span>arr</span>.<span>ndim</span> <span>==</span> <span>2</span> <span>and</span> <span>arr</span>.<span>dtype</span> <span>==</span> <span>np</span>.<span>dtype</span>(<span>np</span>.<span>float64</span>)]]

<span># Validator matching only one-dimensional NumPy arrays of 64-bit floats,</span>
<span># specified with two declarative expressions. Although verbose, this</span>
<span># approach generates optimal reusable code that avoids function calls.</span>
<span>IsNumpyArray1D</span> <span>=</span> <span>IsAttr</span>[<span>&#39;ndim&#39;</span>, <span>IsEqual</span>[<span>1</span>]]
<span>IsNumpyArrayFloat</span> <span>=</span> <span>IsAttr</span>[<span>&#39;dtype&#39;</span>, <span>IsEqual</span>[<span>np</span>.<span>dtype</span>(<span>np</span>.<span>float64</span>)]]
<span>NumpyArray1DFloat</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>, <span>IsNumpyArray1D</span>, <span>IsNumpyArrayFloat</span>]

<span># Validator matching only empty NumPy arrays, equivalent to but faster than:</span>
<span>#     NumpyArrayEmpty = Annotated[np.ndarray, Is[lambda arr: arr.size != 0]]</span>
<span>IsNumpyArrayEmpty</span> <span>=</span> <span>IsAttr</span>[<span>&#39;size&#39;</span>, <span>IsEqual</span>[<span>0</span>]]
<span>NumpyArrayEmpty</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>, <span>IsNumpyArrayEmpty</span>]

<span># Validator composed with standard operators from the above validators,</span>
<span># permissively matching all of the following:</span>
<span># * Empty NumPy arrays of any dtype *except* 64-bit floats.</span>
<span>*</span> <span>*</span> <span>Non</span><span>-</span><span>empty</span> <span>one</span><span>-</span> <span>and</span> <span>two</span><span>-</span><span>dimensional</span> <span>NumPy</span> <span>arrays</span> <span>of</span> <span>64</span><span>-</span><span>bit</span> <span>floats</span>.
<span>NumpyArrayEmptyNonFloatOrNonEmptyFloat1Or2D</span> <span>=</span> <span>Annotated</span>[<span>np</span>.<span>ndarray</span>,
    <span># &#34;&amp;&#34; creates a new validator matching when both operands match, while</span>
    <span># &#34;|&#34; creates a new validator matching when one or both operands match;</span>
    <span># &#34;~&#34; creates a new validator matching when its operand does not match.</span>
    <span># Group operands to enforce semantic intent and avoid precedence woes.</span>
    (<span>IsNumpyArrayEmpty</span> <span>&amp;</span> <span>~</span><span>IsNumpyArrayFloat</span>) <span>|</span> (
        <span>~</span><span>IsNumpyArrayEmpty</span> <span>&amp;</span> <span>IsNumpyArrayFloat</span> (
            <span>IsNumpyArray1D</span> <span>|</span> <span>IsAttr</span>[<span>&#39;ndim&#39;</span>, <span>IsEqual</span>[<span>2</span>]]
        )
    )
]

<span># Decorate functions accepting validators like usual and...</span>
@<span>beartype</span>
<span>def</span> <span>my_validated_function</span>(
    <span># Annotate validators just like standard type hints.</span>
    <span>param_must_satisfy_validator</span>: <span>NumpyArrayEmptyOrNonemptyFloat1Or2D</span>,
<span># Combine validators with standard type hints, too.</span>
) <span>-</span><span>&gt;</span> <span>list</span>[<span>NumpyArrayEmptyNonFloatOrNonEmptyFloat1Or2D</span>]:
    <span>return</span> (
        [<span>param_must_satisfy_validator</span>] <span>*</span> <span>0xFACEFEED</span>
        <span>if</span> <span>bool</span>(<span>param_must_satisfy_validator</span>) <span>else</span>
        [<span>np</span>.<span>array</span>([<span>i</span>], <span>np</span>.<span>dtype</span><span>=</span><span>np</span>.<span>float64</span>) <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>0xFEEDFACE</span>)]
    )

<span># ..................{             NUMPY                  }..................</span>
<span># Import NumPy-specific type hints validating NumPy array constraints. Note:</span>
<span># * These hints currently only validate array dtypes. To validate additional</span>
<span>#   constraints like array shapes, prefer validators instead. See above.</span>
<span># * This requires NumPy ≥ 1.21.0, beartype ≥ 0.8.0, and either:</span>
<span>#   * Python ≥ 3.9.0.</span>
<span>#   * typing_extensions ≥ 3.9.0.0.</span>
<span>from</span> <span>numpy</span>.<span>typing</span> <span>import</span> <span>NDArray</span>

<span># NumPy type hint matching all NumPy arrays of 64-bit floats. Internally,</span>
<span># beartype reduces this to the equivalent validator:</span>
<span>#     NumpyArrayFloat = Annotated[</span>
<span>#         np.ndarray, IsAttr[&#39;dtype&#39;, IsEqual[np.dtype(np.float64)]]]</span>
<span>NumpyArrayFloat</span> <span>=</span> <span>NDArray</span>[<span>np</span>.<span>float64</span>]

<span># Decorate functions accepting NumPy type hints like usual and...</span>
<span>@<span>beartype</span></span>
<span>def</span> <span>my_numerical_function</span>(
    <span># Annotate NumPy type hints just like standard type hints.</span>
    <span>param_must_satisfy_numpy</span>: <span>NumpyArrayFloat</span>,
<span># Combine NumPy type hints with standard type hints, too.</span>
) <span>-&gt;</span> <span>tuple</span>[<span>NumpyArrayFloat</span>, <span>int</span>]:
    <span>return</span> (<span>param_must_satisfy_numpy</span>, <span>len</span>(<span>param_must_satisfy_numpy</span>))</pre></div>
<a name="user-content-features"></a>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id52">Features</a></h2>
<p dir="auto">Let&#39;s chart current and future compliance with Python&#39;s <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> landscape:</p>
<table>






<thead>
<tr><th>category</th>
<th>feature</th>
<th>versions partially supporting</th>
<th>versions fully supporting</th>
</tr>
</thead>
<tbody>
<tr><td>decoratable</td>
<td>classes</td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td>coroutines</td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>functions</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>generators (asynchronous)</td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>generators (synchronous)</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>methods</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td>parameters</td>
<td>optional</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>keyword-only</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>positional-only</td>
<td><strong>0.10.0</strong>—<em>current</em></td>
<td><strong>0.10.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>variadic keyword</td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td>variadic positional</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td>hints</td>
<td><a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)" rel="nofollow">covariant</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)" rel="nofollow">contravariant</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td>absolute forward references</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0484/#id28" rel="nofollow">relative forward references</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="#unions-of-types">tuple unions</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td>beartype.vale</td>
<td>Is</td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>IsAttr</td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>IsEqual</td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td>IsSubclass</td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/stdtypes.html" rel="nofollow">builtins</a></td>
<td><a href="https://docs.python.org/3/library/constants.html#None" rel="nofollow">None</a></td>
<td><strong>0.6.0</strong>—<em>current</em></td>
<td><strong>0.6.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/constants.html#NotImplemented" rel="nofollow">NotImplemented</a></td>
<td><strong>0.7.1</strong>—<em>current</em></td>
<td><strong>0.7.1</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict" rel="nofollow">dict</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" rel="nofollow">frozenset</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#lists" rel="nofollow">list</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" rel="nofollow">set</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#tuples" rel="nofollow">tuple</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/collections.html" rel="nofollow">collections</a></td>
<td><a href="https://docs.python.org/3/library/collections.html#collections.ChainMap" rel="nofollow">collections.ChainMap</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow">collections.Counter</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="nofollow">collections.OrderedDict</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow">collections.defaultdict</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow">collections.deque</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/collections.abc.html" rel="nofollow">collections.abc</a></td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator" rel="nofollow">collections.abc.AsyncGenerator</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterable" rel="nofollow">collections.abc.AsyncIterable</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator" rel="nofollow">collections.abc.AsyncIterator</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" rel="nofollow">collections.abc.Awaitable</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ByteString" rel="nofollow">collections.abc.ByteString</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" rel="nofollow">collections.abc.Callable</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection" rel="nofollow">collections.abc.Collection</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Container" rel="nofollow">collections.abc.Container</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Coroutine" rel="nofollow">collections.abc.Coroutine</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Generator" rel="nofollow">collections.abc.Generator</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ItemsView" rel="nofollow">collections.abc.ItemsView</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" rel="nofollow">collections.abc.Iterable</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" rel="nofollow">collections.abc.Iterator</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.KeysView" rel="nofollow">collections.abc.KeysView</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" rel="nofollow">collections.abc.Mapping</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MappingView" rel="nofollow">collections.abc.MappingView</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" rel="nofollow">collections.abc.MutableMapping</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableSequence" rel="nofollow">collections.abc.MutableSequence</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableSet" rel="nofollow">collections.abc.MutableSet</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Reversible" rel="nofollow">collections.abc.Reversible</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" rel="nofollow">collections.abc.Sequence</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Set" rel="nofollow">collections.abc.Set</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ValuesView" rel="nofollow">collections.abc.ValuesView</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/contextlib.html" rel="nofollow">contextlib</a></td>
<td><a href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractAsyncContextManager" rel="nofollow">contextlib.AbstractAsyncContextManager</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractContextManager" rel="nofollow">contextlib.AbstractContextManager</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td><a href="https://numpy.org/devdocs/reference/typing.html" rel="nofollow">numpy.typing</a></td>
<td><a href="https://numpy.org/devdocs/reference/typing.html#ndarray" rel="nofollow">numpy.typing.NDArray</a></td>
<td><strong>0.8.0</strong>—<em>current</em></td>
<td><strong>0.8.0</strong>—<em>current</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/re.html" rel="nofollow">re</a></td>
<td><a href="https://docs.python.org/3/library/re.html#match-objects" rel="nofollow">re.Match</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/re.html#regular-expression-objects" rel="nofollow">re.Pattern</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td><a href="https://www.sphinx-doc.org" rel="nofollow">sphinx</a></td>
<td><a href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html" rel="nofollow">sphinx.ext.autodoc</a></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td><a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a></td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AbstractSet" rel="nofollow">typing.AbstractSet</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Annotated" rel="nofollow">typing.Annotated</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Any" rel="nofollow">typing.Any</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AnyStr" rel="nofollow">typing.AnyStr</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AsyncContextManager" rel="nofollow">typing.AsyncContextManager</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AsyncGenerator" rel="nofollow">typing.AsyncGenerator</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AsyncIterable" rel="nofollow">typing.AsyncIterable</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator" rel="nofollow">typing.AsyncIterator</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Awaitable" rel="nofollow">typing.Awaitable</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" rel="nofollow">typing.BinaryIO</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ByteString" rel="nofollow">typing.ByteString</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Callable" rel="nofollow">typing.Callable</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ChainMap" rel="nofollow">typing.ChainMap</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ClassVar" rel="nofollow">typing.ClassVar</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Collection" rel="nofollow">typing.Collection</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Concatenate" rel="nofollow">typing.Concatenate</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Container" rel="nofollow">typing.Container</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ContextManager" rel="nofollow">typing.ContextManager</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Coroutine" rel="nofollow">typing.Coroutine</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Counter" rel="nofollow">typing.Counter</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.DefaultDict" rel="nofollow">typing.DefaultDict</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Deque" rel="nofollow">typing.Deque</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Dict" rel="nofollow">typing.Dict</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Final" rel="nofollow">typing.Final</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ForwardRef" rel="nofollow">typing.ForwardRef</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.FrozenSet" rel="nofollow">typing.FrozenSet</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Generator" rel="nofollow">typing.Generator</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Generic" rel="nofollow">typing.Generic</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Hashable" rel="nofollow">typing.Hashable</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.IO" rel="nofollow">typing.IO</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ItemsView" rel="nofollow">typing.ItemsView</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Iterable" rel="nofollow">typing.Iterable</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Iterator" rel="nofollow">typing.Iterator</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.KeysView" rel="nofollow">typing.KeysView</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.List" rel="nofollow">typing.List</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.3.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Mapping" rel="nofollow">typing.Mapping</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.MappinViewg" rel="nofollow">typing.MappingView</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Match" rel="nofollow">typing.Match</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" rel="nofollow">typing.MutableMapping</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" rel="nofollow">typing.MutableSequence</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.3.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.MutableSet" rel="nofollow">typing.MutableSet</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.NamedTuple" rel="nofollow">typing.NamedTuple</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.NewType" rel="nofollow">typing.NewType</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.NoReturn" rel="nofollow">typing.NoReturn</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">typing.Optional</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.OrderedDict" rel="nofollow">typing.OrderedDict</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ParamSpec" rel="nofollow">typing.ParamSpec</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ParamSpecArgs" rel="nofollow">typing.ParamSpecArgs</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ParamSpecKwargs" rel="nofollow">typing.ParamSpecKwargs</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Pattern" rel="nofollow">typing.Pattern</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Protocol" rel="nofollow">typing.Protocol</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Reversible" rel="nofollow">typing.Reversible</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence" rel="nofollow">typing.Sequence</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.3.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Set" rel="nofollow">typing.Set</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sized" rel="nofollow">typing.Sized</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsAbs" rel="nofollow">typing.SupportsAbs</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsBytes" rel="nofollow">typing.SupportsBytes</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsComplex" rel="nofollow">typing.SupportsComplex</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsFloat" rel="nofollow">typing.SupportsFloat</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsIndex" rel="nofollow">typing.SupportsIndex</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsInt" rel="nofollow">typing.SupportsInt</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.SupportsRound" rel="nofollow">typing.SupportsRound</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Text" rel="nofollow">typing.Text</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.TextIO" rel="nofollow">typing.TextIO</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Tuple" rel="nofollow">typing.Tuple</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.TypeGuard" rel="nofollow">typing.TypeGuard</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.TypedDict" rel="nofollow">typing.TypedDict</a></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.TypeVar" rel="nofollow">typing.TypeVar</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.ValuesView" rel="nofollow">typing.ValuesView</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.TYPE_CHECKING" rel="nofollow">typing.TYPE_CHECKING</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.final" rel="nofollow">@typing.final</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.no_type_check" rel="nofollow">@typing.no_type_check</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td><a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions</a></td>
<td><em>all attributes</em></td>
<td><strong>0.8.0</strong>—<em>current</em></td>
<td><strong>0.8.0</strong>—<em>current</em></td>
</tr>
<tr><td>PEP</td>
<td><a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">484</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0544" rel="nofollow">544</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0560" rel="nofollow">560</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0561" rel="nofollow">561</a></td>
<td><strong>0.6.0</strong>—<em>current</em></td>
<td><strong>0.6.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0563" rel="nofollow">563</a></td>
<td><strong>0.1.1</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0570" rel="nofollow">570</a></td>
<td><strong>0.10.0</strong>—<em>current</em></td>
<td><strong>0.10.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0572" rel="nofollow">572</a></td>
<td><strong>0.3.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">585</a></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
<td><strong>0.5.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0586" rel="nofollow">586</a></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0589" rel="nofollow">589</a></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0591" rel="nofollow">591</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0593" rel="nofollow">593</a></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
<td><strong>0.4.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0604" rel="nofollow">604</a></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0612" rel="nofollow">612</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-0647" rel="nofollow">647</a></td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-3102" rel="nofollow">3102</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-3119" rel="nofollow">3119</a></td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td><strong>0.9.0</strong>—<em>current</em></td>
</tr>
<tr><td> </td>
<td><a href="https://www.python.org/dev/peps/pep-3141" rel="nofollow">3141</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
</tr>
<tr><td>packages</td>
<td><a href="https://pypi.org/project/beartype" rel="nofollow">PyPI</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td><a href="https://anaconda.org/conda-forge/beartype" rel="nofollow">Anaconda</a></td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td><a href="https://github.com/leycec/raiagent">Gentoo Linux</a></td>
<td><strong>0.2.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td><a href="https://github.com/beartype/homebrew-beartype">macOS Homebrew</a></td>
<td><strong>0.5.1</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td><a href="https://ports.macports.org/port/py-beartype" rel="nofollow">macOS MacPorts</a></td>
<td><strong>0.5.1</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td>Python</td>
<td>3.5</td>
<td><strong>0.1.0</strong>—<strong>0.3.0</strong></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.6</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.7</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.8</td>
<td><strong>0.1.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.9</td>
<td><strong>0.3.2</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.10</td>
<td><strong>0.7.0</strong>—<em>current</em></td>
<td>—</td>
</tr>
<tr><td> </td>
<td>3.11</td>
<td><em>none</em></td>
<td><em>none</em></td>
</tr>
</tbody>
</table>
<a name="user-content-timings"></a>
<h2 dir="auto"><a id="user-content-timings" aria-hidden="true" href="#timings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id53">Timings</a></h2>
<p dir="auto">Let&#39;s profile <code>beartype</code> against other runtime type-checkers with <a href="https://github.com/beartype/beartype/blob/main/bin/profile.bash">a battery
of surely fair, impartial, and unbiased use cases</a>:</p>
<div data-snippet-clipboard-copy-content="$ bin/profile.bash

beartype profiler [version]: 0.0.2

python    [basename]: python3.9
python    [version]: Python 3.9.0
beartype  [version]: 0.6.0
typeguard [version]: 2.9.1

===================================== str =====================================
profiling regime:
   number of meta-loops:      3
   number of loops:           100
   number of calls each loop: 100
decoration         [none     ]: 100 loops, best of 3: 359 nsec per loop
decoration         [beartype ]: 100 loops, best of 3: 389 usec per loop
decoration         [typeguard]: 100 loops, best of 3: 13.5 usec per loop
decoration + calls [none     ]: 100 loops, best of 3: 14.8 usec per loop
decoration + calls [beartype ]: 100 loops, best of 3: 514 usec per loop
decoration + calls [typeguard]: 100 loops, best of 3: 6.34 msec per loop

=============================== Union[int, str] ===============================
profiling regime:
   number of meta-loops:      3
   number of loops:           100
   number of calls each loop: 100
decoration         [none     ]: 100 loops, best of 3: 1.83 usec per loop
decoration         [beartype ]: 100 loops, best of 3: 433 usec per loop
decoration         [typeguard]: 100 loops, best of 3: 15.6 usec per loop
decoration + calls [none     ]: 100 loops, best of 3: 17.7 usec per loop
decoration + calls [beartype ]: 100 loops, best of 3: 572 usec per loop
decoration + calls [typeguard]: 100 loops, best of 3: 10 msec per loop

=========================== List[int] of 1000 items ===========================
profiling regime:
   number of meta-loops:      1
   number of loops:           1
   number of calls each loop: 7485
decoration         [none     ]: 1 loop, best of 1: 10.1 usec per loop
decoration         [beartype ]: 1 loop, best of 1: 1.3 msec per loop
decoration         [typeguard]: 1 loop, best of 1: 41.1 usec per loop
decoration + calls [none     ]: 1 loop, best of 1: 1.24 msec per loop
decoration + calls [beartype ]: 1 loop, best of 1: 18.3 msec per loop
decoration + calls [typeguard]: 1 loop, best of 1: 104 sec per loop

============ List[Sequence[MutableSequence[int]]] of 10 items each ============
profiling regime:
   number of meta-loops:      1
   number of loops:           1
   number of calls each loop: 7485
decoration         [none     ]: 1 loop, best of 1: 11.8 usec per loop
decoration         [beartype ]: 1 loop, best of 1: 1.77 msec per loop
decoration         [typeguard]: 1 loop, best of 1: 48.9 usec per loop
decoration + calls [none     ]: 1 loop, best of 1: 1.19 msec per loop
decoration + calls [beartype ]: 1 loop, best of 1: 81.2 msec per loop
decoration + calls [typeguard]: 1 loop, best of 1: 17.3 sec per loop
"><pre>$ bin/profile.bash

beartype profiler [version]: 0.0.2

python    [basename]: python3.9
python    [version]: Python 3.9.0
beartype  [version]: 0.6.0
typeguard [version]: 2.9.1

===================================== str =====================================
profiling regime:
   number of meta-loops:      3
   number of loops:           100
   number of calls each loop: 100
decoration         [none     ]: 100 loops, best of 3: 359 nsec per loop
decoration         [beartype ]: 100 loops, best of 3: 389 usec per loop
decoration         [typeguard]: 100 loops, best of 3: 13.5 usec per loop
decoration + calls [none     ]: 100 loops, best of 3: 14.8 usec per loop
decoration + calls [beartype ]: 100 loops, best of 3: 514 usec per loop
decoration + calls [typeguard]: 100 loops, best of 3: 6.34 msec per loop

=============================== Union[int, str] ===============================
profiling regime:
   number of meta-loops:      3
   number of loops:           100
   number of calls each loop: 100
decoration         [none     ]: 100 loops, best of 3: 1.83 usec per loop
decoration         [beartype ]: 100 loops, best of 3: 433 usec per loop
decoration         [typeguard]: 100 loops, best of 3: 15.6 usec per loop
decoration + calls [none     ]: 100 loops, best of 3: 17.7 usec per loop
decoration + calls [beartype ]: 100 loops, best of 3: 572 usec per loop
decoration + calls [typeguard]: 100 loops, best of 3: 10 msec per loop

=========================== List[int] of 1000 items ===========================
profiling regime:
   number of meta-loops:      1
   number of loops:           1
   number of calls each loop: 7485
decoration         [none     ]: 1 loop, best of 1: 10.1 usec per loop
decoration         [beartype ]: 1 loop, best of 1: 1.3 msec per loop
decoration         [typeguard]: 1 loop, best of 1: 41.1 usec per loop
decoration + calls [none     ]: 1 loop, best of 1: 1.24 msec per loop
decoration + calls [beartype ]: 1 loop, best of 1: 18.3 msec per loop
decoration + calls [typeguard]: 1 loop, best of 1: 104 sec per loop

============ List[Sequence[MutableSequence[int]]] of 10 items each <span>============</span>
profiling regime:
   number of meta-loops:      1
   number of loops:           1
   number of calls each loop: 7485
decoration         [none     ]: 1 loop, best of 1: 11.8 usec per loop
decoration         [beartype ]: 1 loop, best of 1: 1.77 msec per loop
decoration         [typeguard]: 1 loop, best of 1: 48.9 usec per loop
decoration + calls [none     ]: 1 loop, best of 1: 1.19 msec per loop
decoration + calls [beartype ]: 1 loop, best of 1: 81.2 msec per loop
decoration + calls [typeguard]: 1 loop, best of 1: 17.3 sec per loop</pre></div>
<div dir="auto">
<p dir="auto">Note</p>
<ul dir="auto">
<li><code>sec</code> = seconds.</li>
<li><code>msec</code> = milliseconds = 10<sup>-3</sup> seconds.</li>
<li><code>usec</code> = microseconds = 10<sup>-6</sup> seconds.</li>
<li><code>nsec</code> = nanoseconds = 10<sup>-9</sup> seconds.</li>
</ul>
</div>
<a name="user-content-eli5"></a>
<h3 dir="auto"><a id="user-content-eli5" aria-hidden="true" href="#eli5"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id54">ELI5</a></h3>
<p dir="auto"><code>beartype</code> is:</p>
<ul dir="auto">
<li><strong>At least twenty times faster</strong> (i.e., 20,000%) and consumes <strong>three orders
of magnitude less time</strong> in the worst case than <a href="https://github.com/agronholm/typeguard">typeguard</a> – the only
comparable runtime type-checker also compatible with most modern Python
versions.</li>
<li><strong>Asymptotically faster</strong> in the best case than <a href="https://github.com/agronholm/typeguard">typeguard</a>, which scales
linearly (rather than not at all) with the size of checked containers.</li>
<li>Constant across type hints, taking roughly the same time to check parameters
and return values hinted by the builtin type <code>str</code> as it does to check
those hinted by the unified type <code>Union[int, str]</code> as it does to check
those hinted by the container type <code>List[object]</code>. <a href="https://github.com/agronholm/typeguard">typeguard</a> is
variable across type hints, taking significantly longer to check
<code>List[object]</code> as as it does to check <code>Union[int, str]</code>, which takes
roughly twice the time as it does to check <code>str</code>.</li>
</ul>
<p dir="auto"><code>beartype</code> performs most of its work at <em>decoration</em> time. The <code>@beartype</code>
decorator consumes most of the time needed to first decorate and then
repeatedly call a decorated function. <code>beartype</code> is thus front-loaded. After
paying the initial cost of decoration, each type-checked call thereafter incurs
comparatively little overhead.</p>
<p dir="auto">Conventional runtime type checkers perform most of their work at <em>call</em> time.
The <code>@typeguard.typechecked</code> and similar decorators consume almost none of
the time needed to first decorate and then repeatedly call a decorated
function. They are thus back-loaded. Although the initial cost of decoration is
essentially free, each type-checked call thereafter incurs significant
overhead.</p>
<a name="user-content-how-much-does-all-this-cost"></a>
<h3 dir="auto"><a id="user-content-how-much-does-all-this-cost" aria-hidden="true" href="#how-much-does-all-this-cost"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id55">How Much Does All This Cost?</a></h3>
<p dir="auto">Beartype dynamically generates functions wrapping decorated callables with
constant-time runtime type-checking. This separation of concerns means that
beartype exhibits different cost profiles at decoration and call time. Whereas
standard runtime type-checking decorators are fast at decoration time and slow
at call time, beartype is the exact opposite.</p>
<p dir="auto">At call time, wrapper functions generated by the <code>@beartype</code> decorator are
guaranteed to unconditionally run in <strong>O(1) non-amortized worst-case time with
negligible constant factors</strong> regardless of type hint complexity or nesting.
This is <em>not</em> an amortized average-case analysis. Wrapper functions really are
<code>O(1)</code> time in the best, average, and worst cases.</p>
<p dir="auto">At decoration time, performance is slightly worse. Internally, beartype
non-recursively iterates over type hints at decoration time with a
micro-optimized breadth-first search (BFS). Since this BFS is memoized, its
cost is paid exactly once per type hint per process; subsequent references to
the same hint over different parameters and returns of different callables in
the same process reuse the results of the previously memoized BFS for that
hint. The <code>@beartype</code> decorator itself thus runs in:</p>
<ul dir="auto">
<li><strong>O(1) amortized average-case time.</strong></li>
<li><strong>O(k) non-amortized worst-case time</strong> for <code>k</code> the number of child type
hints nested in a parent type hint and including that parent.</li>
</ul>
<p dir="auto">Since we generally expect a callable to be decorated only once but called
multiple times per process, we might expect the cost of decoration to be
ignorable in the aggregate. Interestingly, this is not the case. Although only
paid once and obviated through memoization, decoration time is sufficiently
expensive and call time sufficiently inexpensive that beartype spends most of
its wall-clock merely decorating callables. The actual function wrappers
dynamically generated by <code>@beartype</code> consume comparatively little wall-clock,
even when repeatedly called many times.</p>
<a name="user-content-that-s-some-catch-that-catch-22"></a>
<h3 dir="auto"><a id="user-content-thats-some-catch-that-catch-22" aria-hidden="true" href="#thats-some-catch-that-catch-22"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id56">That&#39;s Some Catch, That Catch-22</a></h3>
<p dir="auto">Beartype&#39;s greatest strength is that it checks types in constant time.</p>
<p dir="auto">Beartype&#39;s greatest weakness is that it checks types in constant time.</p>
<p dir="auto">Only so many type-checks can be stuffed into a constant slice of time with
negligible constant factors. Let&#39;s detail exactly what (and why) beartype
stuffs into its well-bounded slice of the CPU pie.</p>
<p dir="auto">Standard runtime type checkers naïvely brute-force the problem by type-checking
<em>all</em> child objects transitively reachable from parent objects passed to and
returned from callables in <code>O(n)</code> linear time for <code>n</code> such objects. This
approach avoids false positives (i.e., raising exceptions for valid objects)
<em>and</em> false negatives (i.e., failing to raise exceptions for invalid objects),
which is good. But this approach also duplicates work when those objects remain
unchanged over multiple calls to those callables, which is bad.</p>
<p dir="auto">Beartype circumvents that badness by generating code at decoration time
performing a one-way random tree walk over the expected nested structure of
those objects at call time. For each expected nesting level of each container
passed to or returned from each callable decorated by <code>@beartype</code> starting at
that container and ending either when a check fails <em>or</em> all checks succeed,
that callable performs these checks (in order):</p>
<ol dir="auto">
<li>A <strong>shallow type-check</strong> that the current possibly nested container is an
instance of the type given by the current possibly nested type hint.</li>
<li>A <strong>deep type-check</strong> that an item randomly selected from that container
itself satisfies the first check.</li>
</ol>
<p dir="auto">For example, given a parameter&#39;s type hint <code>list[tuple[Sequence[str]]]</code>,
beartype generates code at decoration time performing these checks at call time
(in order):</p>
<ol dir="auto">
<li>A check that the object passed as this parameter is a list.</li>
<li>A check that an item randomly selected from this list is a tuple.</li>
<li>A check that an item randomly selected from this tuple is a sequence.</li>
<li>A check that an item randomly selected from this sequence is a string.</li>
</ol>
<p dir="auto">Beartype thus performs one check for each possibly nested type hint for each
annotated parameter or return object for each call to each decorated callable.
This deep randomness gives us soft statistical expectations as to the number of
calls needed to check everything. Specifically, <a href="#nobody-expects-the-linearithmic-time">it can be shown that beartype
type-checks on average</a> <em>all</em> child
objects transitively reachable from parent objects passed to and returned from
callables in <code>O(n log n)</code> calls to those callables for <code>n</code> such objects.
Praise <a href="https://knowyourmeme.com/memes/rngesus" rel="nofollow">RNGesus</a>!</p>
<p dir="auto">Beartype avoids false positives and rarely duplicates work when those objects
remain unchanged over multiple calls to those callables, which is good. Sadly,
beartype also invites false negatives, because this approach only checks a
vertical slice of the full container structure each call, which is bad.</p>
<p dir="auto">We claim without evidence that false negatives are unlikely under the
optimistic assumption that most real-world containers are <strong>homogenous</strong> (i.e.,
contain only items of the same type) rather than <strong>heterogenous</strong> (i.e.,
contain items of differing types). Examples of homogenous containers include
(byte-)strings, <a href="https://docs.python.org/3/library/stdtypes.html#typesseq-range" rel="nofollow">ranges</a>, <a href="https://docs.python.org/3/library/io.html" rel="nofollow">streams</a>, <a href="https://docs.python.org/3/library/stdtypes.html#memory-views" rel="nofollow">memory views</a>, <a href="https://docs.python.org/3/library/stdtypes.html#class.__mro__" rel="nofollow">method resolution orders (MROs)</a>, <a href="https://docs.python.org/3/library/stdtypes.html#genericalias.__parameters__" rel="nofollow">generic alias
parameters</a>, lists returned by the <a href="https://docs.python.org/3/library/functions.html#dir" rel="nofollow">dir</a> builtin, iterables generated by the
<a href="https://docs.python.org/3/library/os.html#os.walk" rel="nofollow">os.walk</a> function, standard <a href="https://numpy.org" rel="nofollow">NumPy</a> arrays, <a href="https://pandas.pydata.org" rel="nofollow">Pandas</a> DataFrame columns,
<a href="https://pytorch.org" rel="nofollow">PyTorch</a> tensors, <a href="https://networkx.org" rel="nofollow">NetworkX</a> graphs, and really all scientific containers ever.</p>
<a name="user-content-nobody-expects-the-linearithmic-time"></a>
<h3 dir="auto"><a id="user-content-nobody-expects-the-linearithmic-time" aria-hidden="true" href="#nobody-expects-the-linearithmic-time"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id57">Nobody Expects the Linearithmic Time</a></h3>
<p dir="auto">Math time, people. <sup>it&#39;s happening</sup></p>
<p dir="auto">Most runtime type-checkers exhibit <code>O(n)</code> time complexity (where <code>n</code> is the
total number of items recursively contained in a container to be checked) by
recursively and repeatedly checking <em>all</em> items of <em>all</em> containers passed to
or returned from <em>all</em> calls of decorated callables.</p>
<p dir="auto"><code>beartype</code> guarantees <code>O(1)</code> time complexity by non-recursively but
repeatedly checking <em>one</em> random item at <em>all</em> nesting levels of <em>all</em>
containers passed to or returned from <em>all</em> calls of decorated callables, thus
amortizing the cost of deeply checking containers across calls. (See the
subsection on <a href="#constant-nested-deep-sequence-decoration">@beartype-generated code deeply type-checking arbitrarily nested
containers in constant time</a> for
what this means in practice.)</p>
<p dir="auto"><code>beartype</code> exploits the <a href="https://en.wikipedia.org/wiki/Coupon_collector%27s_problem" rel="nofollow">well-known coupon collector&#39;s problem</a> applied to abstract trees of nested type hints,
enabling us to statistically predict the number of calls required to fully
type-check all items of an arbitrary container on average. Formally, let:</p>
<ul dir="auto">
<li><code>E(T)</code> be the expected number of calls needed to check all items of a
container containing only non-container items (i.e., containing <em>no</em> nested
subcontainers) either passed to or returned from a <code>@beartype</code>-decorated
callable.</li>
<li><code>γ ≈ 0.5772156649</code> be the <a href="https://en.wikipedia.org/wiki/Euler%E2%80%93Mascheroni_constant" rel="nofollow">Euler–Mascheroni constant</a>.</li>
</ul>
<p dir="auto">Then:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+n+%5Clog+n+%2B+%5Cgamma+n+%2B+%5Cfrac%7B1%7D%7B2%7D+%2B+O%5Cleft%28%5Cfrac%7B1%7D%7Bn%7D%5Cright%29"><img alt="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+n+%5Clog+n+%2B+%5Cgamma+n+%2B+%5Cfrac%7B1%7D%7B2%7D+%2B+O%5Cleft%28%5Cfrac%7B1%7D%7Bn%7D%5Cright%29" src="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+n+%5Clog+n+%2B+%5Cgamma+n+%2B+%5Cfrac%7B1%7D%7B2%7D+%2B+O%5Cleft%28%5Cfrac%7B1%7D%7Bn%7D%5Cright%29"/></a></p>
<p dir="auto">The summation <code>½ + O(1/n)</code> is strictly less than 1 and thus negligible. While
non-negligible, the term <code>γn</code> grows significantly slower than the term
<code>nlogn</code>. So this reduces to:</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+O%28n+%5Clog+n%29"><img alt="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+O%28n+%5Clog+n%29" src="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28T%29+%3D+O%28n+%5Clog+n%29"/></a></p>
<p dir="auto">We now generalize this bound to the general case. When checking a container
containing <em>no</em> subcontainers, <code>beartype</code> only randomly samples one item from
that container on each call. When checking a container containing arbitrarily
many nested subcontainers, however, <code>beartype</code> randomly samples one random
item from each nesting level of that container on each call.</p>
<p dir="auto">In general, <code>beartype</code> thus samples <code>h</code> random items from a container on
each call, where <code>h</code> is that container&#39;s height (i.e., maximum number of
edges on the longest path from that container to a non-container leaf item
reachable from items directly contained in that container). Since <code>h ≥ 1</code>,
<code>beartype</code> samples at least as many items each call as assumed in the usual
<a href="https://en.wikipedia.org/wiki/Coupon_collector%27s_problem" rel="nofollow">coupon collector&#39;s problem</a> and thus paradoxically takes a fewer number of
calls on average to check all items of a container containing arbitrarily many
subcontainers as it does to check all items of a container containing <em>no</em>
subcontainers.</p>
<p dir="auto">Ergo, the expected number of calls <code>E(S)</code> needed to check all items of an
arbitrary container exhibits the same or better growth rate and remains bound
above by at least the same upper bounds – but probably tighter: e.g.,</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28S%29+%3D+O%28E%28T%29%29+%3D+O%28n+%5Clog+n%29%0A"><img alt="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28S%29+%3D+O%28E%28T%29%29+%3D+O%28n+%5Clog+n%29%0A" src="https://render.githubusercontent.com/render/math?math=%5Cdisplaystyle+E%28S%29+%3D+O%28E%28T%29%29+%3D+O%28n+%5Clog+n%29%0A"/></a></p>
<p dir="auto">Fully checking a container takes no more calls than that container&#39;s size times
the logarithm of that size on average. For example, fully checking a <strong>list of
50 integers</strong> is expected to take <strong>225 calls</strong> on average.</p>
<a name="user-content-compliance"></a>
<h2 dir="auto"><a id="user-content-compliance" aria-hidden="true" href="#compliance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id58">Compliance</a></h2>
<p dir="auto">Beartype is fully compliant with these <a href="https://www.python.org/dev/peps" rel="nofollow">Python Enhancement Proposals (PEPs)</a>:</p>
<ul dir="auto">
<li><a href="https://www.python.org/dev/peps/pep-0483" rel="nofollow">PEP 483 -- The Theory of Type Hints</a>, subject to <a href="#partial-compliance">caveats
detailed below</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484 -- Type Hints</a>, subject to <a href="#partial-compliance">caveats detailed below</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0544" rel="nofollow">PEP 544 -- Protocols: Structural subtyping (static duck typing)</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0560" rel="nofollow">PEP 560 -- Core support for typing module and generic types</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0561" rel="nofollow">PEP 561 -- Distributing and Packaging Type Information</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0563" rel="nofollow">PEP 563 -- Postponed Evaluation of Annotations</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0572" rel="nofollow">PEP 572 -- Assignment Expressions</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP 585 -- Type Hinting Generics In Standard Collections</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0586" rel="nofollow">PEP 586 -- Literal Types</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0589" rel="nofollow">PEP 589 -- TypedDict: Type Hints for Dictionaries with a Fixed Set of Keys</a>, subject to <a href="#partial-compliance">caveats detailed below</a></li>
<li><a href="https://www.python.org/dev/peps/pep-0593" rel="nofollow">PEP 593 -- Flexible function and variable annotations</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0604" rel="nofollow">PEP 604 -- Allow writing union types as X | Y</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-3141" rel="nofollow">PEP 3141 -- A Type Hierarchy for Numbers</a>.</li>
</ul>
<p dir="auto">Beartype is currently <em>not</em> compliant whatsoever with these PEPs:</p>
<ul dir="auto">
<li><a href="https://www.python.org/dev/peps/pep-0526" rel="nofollow">PEP 526 -- Syntax for Variable Annotations</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0591" rel="nofollow">PEP 591 -- Adding a final qualifier to typing</a>.</li>
<li><a href="https://www.python.org/dev/peps/pep-0612" rel="nofollow">PEP 612 -- Parameter Specification Variables</a>.</li>
</ul>
<p dir="auto">See also the <strong>PEP</strong> and <strong>typing</strong> categories of our <a href="#features">features matrix</a> for further details.</p>
<a name="user-content-full-compliance"></a>
<h3 dir="auto"><a id="user-content-full-compliance" aria-hidden="true" href="#full-compliance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id59">Full Compliance</a></h3>
<p dir="auto">Beartype <strong>deeply type-checks</strong> (i.e., directly checks the types of <em>and</em>
recursively checks the types of items contained in) parameters and return
values annotated by these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/library/constants.html#None" rel="nofollow">None</a>.</li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#lists" rel="nofollow">list</a>.</li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#tuples" rel="nofollow">tuple</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ByteString" rel="nofollow">collections.abc.ByteString</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableSequence" rel="nofollow">collections.abc.MutableSequence</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence" rel="nofollow">collections.abc.Sequence</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Annotated" rel="nofollow">typing.Annotated</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Any" rel="nofollow">typing.Any</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ByteString" rel="nofollow">typing.ByteString</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ForwardRef" rel="nofollow">typing.ForwardRef</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Hashable" rel="nofollow">typing.Hashable</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.List" rel="nofollow">typing.List</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Literal" rel="nofollow">typing.Literal</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" rel="nofollow">typing.MutableSequence</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.NewType" rel="nofollow">typing.NewType</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.NoReturn" rel="nofollow">typing.NoReturn</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">typing.Optional</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Sequence" rel="nofollow">typing.Sequence</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Sized" rel="nofollow">typing.Sized</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Text" rel="nofollow">typing.Text</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Tuple" rel="nofollow">typing.Tuple</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a>.</li>
<li><strong>Generics</strong> (i.e., classes subclassing one or more <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> non-class
objects), including:<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.IO" rel="nofollow">typing.IO</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.BinaryIO" rel="nofollow">typing.BinaryIO</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.TextIO" rel="nofollow">typing.TextIO</a>.</li>
</ul>
</li>
<li><strong>Protocols</strong> (i.e., classes directly subclassing the <a href="https://docs.python.org/3/library/typing.html#typing.Protocol" rel="nofollow">typing.Protocol</a>
abstract base class (ABC) <em>and</em> zero or more <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> non-class objects),
including:<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsAbs" rel="nofollow">typing.SupportsAbs</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsBytes" rel="nofollow">typing.SupportsBytes</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsComplex" rel="nofollow">typing.SupportsComplex</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsIndex" rel="nofollow">typing.SupportsIndex</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsInt" rel="nofollow">typing.SupportsInt</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsFloat" rel="nofollow">typing.SupportsFloat</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.SupportsRound" rel="nofollow">typing.SupportsRound</a>.</li>
</ul>
</li>
<li><a href="https://www.python.org/dev/peps/pep-0484/#id28" rel="nofollow">Forward references</a> (i.e., unqualified
relative classnames referring to user-defined classes that either have yet to
be declared <em>or</em> are currently being declared).</li>
<li><strong>Forward reference-subscripted types</strong> (i.e., <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> objects subscripted by
one or more <a href="https://www.python.org/dev/peps/pep-0484/#id28" rel="nofollow">forward references</a>).</li>
</ul>
<p dir="auto">Beartype also fully supports these third-party <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a>-like types:</p>
<ul dir="auto">
<li><strong>Typed NumPy arrays,</strong> including:<ul dir="auto">
<li><a href="#numpy-type-hints">numpy.typing.NDArray</a>.</li>
</ul>
</li>
<li><strong>Typing backports</strong> (i.e., public attributes of the third-party
<a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions</a> package, enabling <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types introduced by newer Python
versions to be used under older Python versions). Beartype transparently
supports all <a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions</a> equivalents of the previously listed <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a>
types, including:<ul dir="auto">
<li><a href="https://pypi.org/project/typing-extensions" rel="nofollow">typing_extensions.Annotated</a>, enabling <a href="#beartype-validators">beartype
validators</a> to be used under Python &lt; 3.9.0.</li>
</ul>
</li>
</ul>
<p dir="auto">Beartype also fully supports callables decorated by these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> decorators:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.no_type_check" rel="nofollow">@typing.no_type_check</a>.</li>
</ul>
<p dir="auto">Lastly, beartype also fully supports these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> constants:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.TYPE_CHECKING" rel="nofollow">typing.TYPE_CHECKING</a>.</li>
</ul>
<a name="user-content-partial-compliance"></a>
<h3 dir="auto"><a id="user-content-partial-compliance" aria-hidden="true" href="#partial-compliance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id60">Partial Compliance</a></h3>
<p dir="auto">Beartype currently only <strong>shallowly type-checks</strong> (i.e., only directly checks
the types of) parameters and return values annotated by these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" rel="nofollow">frozenset</a>.</li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset" rel="nofollow">set</a>.</li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#bltin-type-objects" rel="nofollow">type</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.ChainMap" rel="nofollow">collections.ChainMap</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="nofollow">collections.Counter</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" rel="nofollow">collections.OrderedDict</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" rel="nofollow">collections.defaultdict</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="nofollow">collections.deque</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator" rel="nofollow">collections.abc.AsyncGenerator</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterable" rel="nofollow">collections.abc.AsyncIterable</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncIterator" rel="nofollow">collections.abc.AsyncIterator</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable" rel="nofollow">collections.abc.Awaitable</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable" rel="nofollow">collections.abc.Callable</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Collection" rel="nofollow">collections.abc.Collection</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Container" rel="nofollow">collections.abc.Container</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Coroutine" rel="nofollow">collections.abc.Coroutine</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Generator" rel="nofollow">collections.abc.Generator</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ItemsView" rel="nofollow">collections.abc.ItemsView</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" rel="nofollow">collections.abc.Iterable</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterator" rel="nofollow">collections.abc.Iterator</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.KeysView" rel="nofollow">collections.abc.KeysView</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Mapping" rel="nofollow">collections.abc.Mapping</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MappingView" rel="nofollow">collections.abc.MappingView</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping" rel="nofollow">collections.abc.MutableMapping</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableSet" rel="nofollow">collections.abc.MutableSet</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Reversible" rel="nofollow">collections.abc.Reversible</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Set" rel="nofollow">collections.abc.Set</a>.</li>
<li><a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.ValuesView" rel="nofollow">collections.abc.ValuesView</a>.</li>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractAsyncContextManager" rel="nofollow">contextlib.AbstractAsyncContextManager</a>.</li>
<li><a href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractContextManager" rel="nofollow">contextlib.AbstractContextManager</a>.</li>
<li><a href="https://docs.python.org/3/library/re.html#match-objects" rel="nofollow">re.Match</a>.</li>
<li><a href="https://docs.python.org/3/library/re.html#regular-expression-objects" rel="nofollow">re.Pattern</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AbstractSet" rel="nofollow">typing.AbstractSet</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AnyStr" rel="nofollow">typing.AnyStr</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AsyncContextManager" rel="nofollow">typing.AsyncContextManager</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AsyncGenerator" rel="nofollow">typing.AsyncGenerator</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AsyncIterable" rel="nofollow">typing.AsyncIterable</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator" rel="nofollow">typing.AsyncIterator</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Callable" rel="nofollow">typing.Callable</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Collection" rel="nofollow">typing.Collection</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Container" rel="nofollow">typing.Container</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ContextManager" rel="nofollow">typing.ContextManager</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Coroutine" rel="nofollow">typing.Coroutine</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Counter" rel="nofollow">typing.Counter</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.DefaultDict" rel="nofollow">typing.DefaultDict</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Deque" rel="nofollow">typing.Deque</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Dict" rel="nofollow">typing.Dict</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.FrozenSet" rel="nofollow">typing.FrozenSet</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Generator" rel="nofollow">typing.Generator</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ItemsView" rel="nofollow">typing.ItemsView</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Iterable" rel="nofollow">typing.Iterable</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Iterator" rel="nofollow">typing.Iterator</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.KeysView" rel="nofollow">typing.KeysView</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.MappinViewg" rel="nofollow">typing.MappingView</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Mapping" rel="nofollow">typing.Mapping</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Match" rel="nofollow">typing.Match</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.MutableMapping" rel="nofollow">typing.MutableMapping</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.MutableSet" rel="nofollow">typing.MutableSet</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.NamedTuple" rel="nofollow">typing.NamedTuple</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.OrderedDict" rel="nofollow">typing.OrderedDict</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Pattern" rel="nofollow">typing.Pattern</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Reversible" rel="nofollow">typing.Reversible</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Set" rel="nofollow">typing.Set</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Type" rel="nofollow">typing.Type</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.TypedDict" rel="nofollow">typing.TypedDict</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.ValuesView" rel="nofollow">typing.ValuesView</a>.</li>
<li><strong>Subscripted builtins</strong> (i.e., <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP 585</a>-compliant C-based type hint
instantiated by subscripting either a concrete builtin container class like
<a href="https://docs.python.org/3/library/stdtypes.html#lists" rel="nofollow">list</a> or <a href="https://docs.python.org/3/library/stdtypes.html#tuples" rel="nofollow">tuple</a> <em>or</em> an abstract base class (ABC) declared by
the <a href="https://docs.python.org/3/library/collections.abc.html" rel="nofollow">collections.abc</a> or <a href="https://docs.python.org/3/library/contextlib.html" rel="nofollow">contextlib</a> modules like <a href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" rel="nofollow">collections.abc.Iterable</a>
or <a href="https://docs.python.org/3/library/contextlib.html#contextlib.AbstractContextManager" rel="nofollow">contextlib.AbstractContextManager</a> with one or more PEP-compliant child
type hints).</li>
<li><strong>Type variables</strong> (i.e., <a href="https://docs.python.org/3/library/typing.html#typing.TypeVar" rel="nofollow">typing.TypeVar</a> instances enabling general-purpose
type-checking of generically substitutable types), including:<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.AnyStr" rel="nofollow">typing.AnyStr</a>.</li>
</ul>
</li>
<li><strong>Type variable-parametrized types</strong> (i.e., <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> objects subscripted by
one or more type variables).</li>
</ul>
<p dir="auto">Subsequent beartype versions will deeply type-check these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types
while preserving our <a href="#timings">O(1) time complexity (with negligible constant factors)
guarantee</a>.</p>
<a name="user-content-no-compliance"></a>
<h3 dir="auto"><a id="user-content-no-compliance" aria-hidden="true" href="#no-compliance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id61">No Compliance</a></h3>
<p dir="auto">Beartype currently silently ignores these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types at decoration time:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/library/typing.html#typing.ClassVar" rel="nofollow">typing.ClassVar</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Final" rel="nofollow">typing.Final</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.final" rel="nofollow">@typing.final</a>.</li>
</ul>
<p dir="auto">Subsequent <code>beartype</code> versions will first shallowly and then deeply
type-check these <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a> types while preserving our <a href="#timings">O(1) time complexity (with
negligible constant factors) guarantee</a>.</p>
<a name="user-content-tutorial"></a>
<h2 dir="auto"><a id="user-content-tutorial" aria-hidden="true" href="#tutorial"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id62">Tutorial</a></h2>
<p dir="auto">Let&#39;s begin with the simplest type of type-checking supported by <code>@beartype</code>.</p>
<a name="user-content-builtin-types"></a>
<h3 dir="auto"><a id="user-content-builtin-types" aria-hidden="true" href="#builtin-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id63">Builtin Types</a></h3>
<p dir="auto"><strong>Builtin types</strong> like <code>dict</code>, <code>int</code>, <code>list</code>, <code>set</code>, and <code>str</code> are
trivially type-checked by annotating parameters and return values with those
types as is.</p>
<p dir="auto">Let&#39;s declare a simple beartyped function accepting a string and a dictionary
and returning a tuple:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype

@beartype
def law_of_the_jungle(wolf: str, pack: dict) -&gt; tuple:
    return (wolf, pack[wolf]) if wolf in pack else None
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle</span>(<span>wolf</span>: <span>str</span>, <span>pack</span>: <span>dict</span>) <span>-&gt;</span> <span>tuple</span>:
    <span>return</span> (<span>wolf</span>, <span>pack</span>[<span>wolf</span>]) <span>if</span> <span>wolf</span> <span>in</span> <span>pack</span> <span>else</span> <span>None</span></pre></div>
<p dir="auto">Let&#39;s call that function with good types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; law_of_the_jungle(wolf=&#39;Akela&#39;, pack={&#39;Akela&#39;: &#39;alone&#39;, &#39;Raksha&#39;: &#39;protection&#39;})
(&#39;Akela&#39;, &#39;alone&#39;)
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Akela&#39;</span>, <span>pack</span><span>=</span>{<span>&#39;Akela&#39;</span>: <span>&#39;alone&#39;</span>, <span>&#39;Raksha&#39;</span>: <span>&#39;protection&#39;</span>})
(<span>&#39;Akela&#39;</span>, <span>&#39;alone&#39;</span>)</pre></div>
<p dir="auto">Good function. Let&#39;s call it again with bad types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; law_of_the_jungle(wolf=&#39;Akela&#39;, pack=[&#39;Akela&#39;, &#39;Raksha&#39;])
Traceback (most recent call last):
  File &#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;, line 1, in &lt;module&gt;
    law_of_the_jungle(wolf=&#39;Akela&#39;, pack=[&#39;Akela&#39;, &#39;Raksha&#39;])
  File &#34;&lt;string&gt;&#34;, line 22, in __law_of_the_jungle_beartyped__
beartype.roar.BeartypeCallTypeParamException: @beartyped law_of_the_jungle() parameter pack=[&#39;Akela&#39;, &#39;Raksha&#39;] not a &lt;class &#39;dict&#39;&gt;.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Akela&#39;</span>, <span>pack</span><span>=</span>[<span>&#39;Akela&#39;</span>, <span>&#39;Raksha&#39;</span>])
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
    <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Akela&#39;</span>, <span>pack</span><span>=</span>[<span>&#39;Akela&#39;</span>, <span>&#39;Raksha&#39;</span>])
  <span>File</span> <span>&#34;&lt;string&gt;&#34;</span>, <span>line</span> <span>22</span>, <span>in</span> <span>__law_of_the_jungle_beartyped__</span>
<span>beartype</span>.<span>roar</span>.<span>BeartypeCallTypeParamException</span>: @<span>beartyped</span> <span>law_of_the_jungle</span>() <span>parameter</span> <span>pack</span><span>=</span>[<span>&#39;Akela&#39;</span>, <span>&#39;Raksha&#39;</span>] <span>not</span> <span>a</span> <span>&lt;</span><span>class</span> <span>&#39;dict&#39;</span><span>&gt;</span>.</pre></div>
<p dir="auto">The <code>beartype.roar</code> submodule publishes exceptions raised at both decoration
time by <code>@beartype</code> and at runtime by wrappers generated by <code>@beartype</code>. In
this case, a runtime type exception describing the improperly typed <code>pack</code>
parameter is raised.</p>
<p dir="auto">Good function! Let&#39;s call it again with good types exposing a critical issue in
this function&#39;s implementation and/or return type annotation:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; law_of_the_jungle(wolf=&#39;Leela&#39;, pack={&#39;Akela&#39;: &#39;alone&#39;, &#39;Raksha&#39;: &#39;protection&#39;})
Traceback (most recent call last):
  File &#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;, line 1, in &lt;module&gt;
    law_of_the_jungle(wolf=&#39;Leela&#39;, pack={&#39;Akela&#39;: &#39;alone&#39;, &#39;Raksha&#39;: &#39;protection&#39;})
  File &#34;&lt;string&gt;&#34;, line 28, in __law_of_the_jungle_beartyped__
beartype.roar.BeartypeCallTypeReturnException: @beartyped law_of_the_jungle() return value None not a &lt;class &#39;tuple&#39;&gt;.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Leela&#39;</span>, <span>pack</span><span>=</span>{<span>&#39;Akela&#39;</span>: <span>&#39;alone&#39;</span>, <span>&#39;Raksha&#39;</span>: <span>&#39;protection&#39;</span>})
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
    <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Leela&#39;</span>, <span>pack</span><span>=</span>{<span>&#39;Akela&#39;</span>: <span>&#39;alone&#39;</span>, <span>&#39;Raksha&#39;</span>: <span>&#39;protection&#39;</span>})
  <span>File</span> <span>&#34;&lt;string&gt;&#34;</span>, <span>line</span> <span>28</span>, <span>in</span> <span>__law_of_the_jungle_beartyped__</span>
<span>beartype</span>.<span>roar</span>.<span>BeartypeCallTypeReturnException</span>: @<span>beartyped</span> <span>law_of_the_jungle</span>() <span>return</span> <span>value</span> <span>None</span> <span>not</span> <span>a</span> <span>&lt;</span><span>class</span> <span>&#39;tuple&#39;</span><span>&gt;</span>.</pre></div>
<p dir="auto"><em>Bad function.</em> Let&#39;s conveniently resolve this by permitting this function to
return either a tuple or <code>None</code> as <a href="#unions-of-types">detailed below</a>:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from beartype.cave import NoneType
&gt;&gt;&gt; @beartype
... def law_of_the_jungle(wolf: str, pack: dict) -&gt; (tuple, NoneType):
...     return (wolf, pack[wolf]) if wolf in pack else None
&gt;&gt;&gt; law_of_the_jungle(wolf=&#39;Leela&#39;, pack={&#39;Akela&#39;: &#39;alone&#39;, &#39;Raksha&#39;: &#39;protection&#39;})
None
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>NoneType</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>@<span>beartype</span></span>
... <span>def</span> <span>law_of_the_jungle</span>(<span>wolf</span>: <span>str</span>, <span>pack</span>: <span>dict</span>) <span>-&gt;</span> (<span>tuple</span>, <span>NoneType</span>):
...     <span>return</span> (<span>wolf</span>, <span>pack</span>[<span>wolf</span>]) <span>if</span> <span>wolf</span> <span>in</span> <span>pack</span> <span>else</span> <span>None</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Leela&#39;</span>, <span>pack</span><span>=</span>{<span>&#39;Akela&#39;</span>: <span>&#39;alone&#39;</span>, <span>&#39;Raksha&#39;</span>: <span>&#39;protection&#39;</span>})
<span>None</span></pre></div>
<p dir="auto">The <code>beartype.cave</code> submodule publishes generic types suitable for use with
the <code>@beartype</code> decorator and anywhere else you might need them. In this
case, the type of the <code>None</code> singleton is imported from this submodule and
listed in addition to <code>tuple</code> as an allowed return type from this function.</p>
<p dir="auto">Note that usage of the <code>beartype.cave</code> submodule is entirely optional (but
more efficient and convenient than most alternatives). In this case, the type
of the <code>None</code> singleton can also be accessed directly as <code>type(None)</code> and
listed in place of <code>NoneType</code> above: e.g.,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; @beartype
... def law_of_the_jungle(wolf: str, pack: dict) -&gt; (tuple, type(None)):
...     return (wolf, pack[wolf]) if wolf in pack else None
&gt;&gt;&gt; law_of_the_jungle(wolf=&#39;Leela&#39;, pack={&#39;Akela&#39;: &#39;alone&#39;, &#39;Raksha&#39;: &#39;protection&#39;})
None
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>@<span>beartype</span></span>
... <span>def</span> <span>law_of_the_jungle</span>(<span>wolf</span>: <span>str</span>, <span>pack</span>: <span>dict</span>) <span>-&gt;</span> (<span>tuple</span>, <span>type</span>(<span>None</span>)):
...     <span>return</span> (<span>wolf</span>, <span>pack</span>[<span>wolf</span>]) <span>if</span> <span>wolf</span> <span>in</span> <span>pack</span> <span>else</span> <span>None</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>law_of_the_jungle</span>(<span>wolf</span><span>=</span><span>&#39;Leela&#39;</span>, <span>pack</span><span>=</span>{<span>&#39;Akela&#39;</span>: <span>&#39;alone&#39;</span>, <span>&#39;Raksha&#39;</span>: <span>&#39;protection&#39;</span>})
<span>None</span></pre></div>
<p dir="auto">Of course, the <code>beartype.cave</code> submodule also publishes types <em>not</em>
accessible directly like <code>RegexCompiledType</code> (i.e., the type of all compiled
regular expressions). All else being equal, <code>beartype.cave</code> is preferable.</p>
<p dir="auto">Good function! The type hints applied to this function now accurately document
this function&#39;s API. All&#39;s well that ends typed well. Suck it, <a href="https://en.wikipedia.org/wiki/Shere_Khan" rel="nofollow">Shere Khan</a>.</p>
<a name="user-content-arbitrary-types"></a>
<h3 dir="auto"><a id="user-content-arbitrary-types" aria-hidden="true" href="#arbitrary-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id64">Arbitrary Types</a></h3>
<p dir="auto">Everything above also extends to:</p>
<ul dir="auto">
<li><strong>Arbitrary types</strong> like user-defined classes and stock classes in the Python
stdlib (e.g., <code>argparse.ArgumentParser</code>) – all of which are also trivially
type-checked by annotating parameters and return values with those types.</li>
<li><strong>Arbitrary callables</strong> like instance methods, class methods, static methods,
and generator functions and methods – all of which are also trivially
type-checked with the <code>@beartype</code> decorator.</li>
</ul>
<p dir="auto">Let&#39;s declare a motley crew of beartyped callables doing various silly things
in a strictly typed manner, <em>just &#39;cause</em>:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from beartype.cave import GeneratorType, IterableType, NoneType

class MaximsOfBaloo(object):
    @beartype
    def __init__(self, sayings: IterableType):
        self.sayings = sayings

@beartype
def inform_baloo(maxims: MaximsOfBaloo) -&gt; GeneratorType:
    for saying in maxims.sayings:
        yield saying
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>GeneratorType</span>, <span>IterableType</span>, <span>NoneType</span>

<span>class</span> <span>MaximsOfBaloo</span>(<span>object</span>):
    <span>@<span>beartype</span></span>
    <span>def</span> <span>__init__</span>(<span>self</span>, <span>sayings</span>: <span>IterableType</span>):
        <span>self</span>.<span>sayings</span> <span>=</span> <span>sayings</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>inform_baloo</span>(<span>maxims</span>: <span>MaximsOfBaloo</span>) <span>-&gt;</span> <span>GeneratorType</span>:
    <span>for</span> <span>saying</span> <span>in</span> <span>maxims</span>.<span>sayings</span>:
        <span>yield</span> <span>saying</span></pre></div>
<p dir="auto">For genericity, the <code>MaximsOfBaloo</code> class initializer accepts <em>any</em> generic
iterable (via the <code>beartype.cave.IterableType</code> tuple listing all valid
iterable types) rather than an overly specific <code>list</code> or <code>tuple</code> type. Your
users may thank you later.</p>
<p dir="auto">For specificity, the <code>inform_baloo</code> generator function has been explicitly
annotated to return a <code>beartype.cave.GeneratorType</code> (i.e., the type returned
by functions and methods containing at least one <code>yield</code> statement). Type
safety brings good fortune for the New Year.</p>
<p dir="auto">Let&#39;s iterate over that generator with good types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; maxims = MaximsOfBaloo(sayings={
...     &#39;&#39;&#39;If ye find that the Bullock can toss you,
...           or the heavy-browed Sambhur can gore;
...      Ye need not stop work to inform us:
...           we knew it ten seasons before.&#39;&#39;&#39;,
...     &#39;&#39;&#39;“There is none like to me!” says the Cub
...           in the pride of his earliest kill;
...      But the jungle is large and the Cub he is small.
...           Let him think and be still.&#39;&#39;&#39;,
... })
&gt;&gt;&gt; for maxim in inform_baloo(maxims): print(maxim.splitlines()[-1])
       Let him think and be still.
       we knew it ten seasons before.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>maxims</span> <span>=</span> <span>MaximsOfBaloo</span>(<span>sayings</span><span>=</span>{
...     <span>&#39;&#39;&#39;If ye find that the Bullock can toss you,</span>
<span>...           or the heavy-browed Sambhur can gore;</span>
<span>...      Ye need not stop work to inform us:</span>
<span>...           we knew it ten seasons before.&#39;&#39;&#39;</span>,
...     <span>&#39;&#39;&#39;“There is none like to me!” says the Cub</span>
<span>...           in the pride of his earliest kill;</span>
<span>...      But the jungle is large and the Cub he is small.</span>
<span>...           Let him think and be still.&#39;&#39;&#39;</span>,
... })
<span>&gt;&gt;</span><span>&gt;</span> <span>for</span> <span>maxim</span> <span>in</span> <span>inform_baloo</span>(<span>maxims</span>): <span>print</span>(<span>maxim</span>.<span>splitlines</span>()[<span>-</span><span>1</span>])
       <span>Let</span> <span>him</span> <span>think</span> <span>and</span> <span>be</span> <span>still</span>.
       <span>we</span> <span>knew</span> <span>it</span> <span>ten</span> <span>seasons</span> <span>before</span>.</pre></div>
<p dir="auto">Good generator. Let&#39;s call it again with bad types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; for maxim in inform_baloo([
...     &#39;Oppress not the cubs of the stranger,&#39;,
...     &#39;     but hail them as Sister and Brother,&#39;,
... ]): print(maxim.splitlines()[-1])
Traceback (most recent call last):
  File &#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;, line 30, in &lt;module&gt;
    &#39;     but hail them as Sister and Brother,&#39;,
  File &#34;&lt;string&gt;&#34;, line 12, in __inform_baloo_beartyped__
beartype.roar.BeartypeCallTypeParamException: @beartyped inform_baloo() parameter maxims=[&#39;Oppress not the cubs of the stranger,&#39;, &#39;     but hail them as Sister and ...&#39;] not a &lt;class &#39;__main__.MaximsOfBaloo&#39;&gt;.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>for</span> <span>maxim</span> <span>in</span> <span>inform_baloo</span>([
...     <span>&#39;Oppress not the cubs of the stranger,&#39;</span>,
...     <span>&#39;     but hail them as Sister and Brother,&#39;</span>,
... ]): <span>print</span>(<span>maxim</span>.<span>splitlines</span>()[<span>-</span><span>1</span>])
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;ipython-input-10-7763b15e5591&gt;&#34;</span>, <span>line</span> <span>30</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
    <span>&#39;     but hail them as Sister and Brother,&#39;</span>,
  <span>File</span> <span>&#34;&lt;string&gt;&#34;</span>, <span>line</span> <span>12</span>, <span>in</span> <span>__inform_baloo_beartyped__</span>
<span>beartype</span>.<span>roar</span>.<span>BeartypeCallTypeParamException</span>: @<span>beartyped</span> <span>inform_baloo</span>() <span>parameter</span> <span>maxims</span><span>=</span>[<span>&#39;Oppress not the cubs of the stranger,&#39;</span>, <span>&#39;     but hail them as Sister and ...&#39;</span>] <span>not</span> <span>a</span> <span>&lt;</span><span>class</span> <span>&#39;__main__.MaximsOfBaloo&#39;</span><span>&gt;</span>.</pre></div>
<p dir="auto">Good generator! The type hints applied to these callables now accurately
document their respective APIs. Thanks to the pernicious magic of beartype, all
ends typed well... <em>yet again.</em></p>
<a name="user-content-unions-of-types"></a>
<h3 dir="auto"><a id="user-content-unions-of-types" aria-hidden="true" href="#unions-of-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id65">Unions of Types</a></h3>
<p dir="auto">That&#39;s all typed well, but everything above only applies to parameters and
return values constrained to <em>singular</em> types. In practice, parameters and
return values are often relaxed to any of <em>multiple</em> types referred to as
<strong>unions of types.</strong> <sup>You can thank set theory for the jargon... unless
you hate set theory. Then it&#39;s just our fault.</sup></p>
<p dir="auto">Unions of types are trivially type-checked by annotating parameters and return
values with the <a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a> type hint containing those types. Let&#39;s declare
another beartyped function accepting either a mapping <em>or</em> a string and
returning either another function <em>or</em> an integer:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from collections.abc import Callable, Mapping
from numbers import Integral
from typing import Any, Union

@beartype
def toomai_of_the_elephants(memory: Union[Integral, Mapping[Any, Any]]) -&gt; (
    Union[Integral, Callable[(Any,), Any]]):
    return memory if isinstance(memory, Integral) else lambda key: memory[key]
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>collections</span>.<span>abc</span> <span>import</span> <span>Callable</span>, <span>Mapping</span>
<span>from</span> <span>numbers</span> <span>import</span> <span>Integral</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Any</span>, <span>Union</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>toomai_of_the_elephants</span>(<span>memory</span>: <span>Union</span>[<span>Integral</span>, <span>Mapping</span>[<span>Any</span>, <span>Any</span>]]) <span>-&gt;</span> (
    <span>Union</span>[<span>Integral</span>, <span>Callable</span>[(<span>Any</span>,), <span>Any</span>]]):
    <span>return</span> <span>memory</span> <span>if</span> <span>isinstance</span>(<span>memory</span>, <span>Integral</span>) <span>else</span> <span>lambda</span> <span>key</span>: <span>memory</span>[<span>key</span>]</pre></div>
<p dir="auto">For genericity, the <code>toomai_of_the_elephants</code> function both accepts and
returns <em>any</em> generic integer (via the standard <code>numbers.Integral</code> abstract
base class (ABC) matching both builtin integers and third-party integers from
frameworks like <a href="https://numpy.org" rel="nofollow">NumPy</a> and <a href="https://www.sympy.org" rel="nofollow">SymPy</a>) rather than an overly specific <code>int</code> type.
The API you relax may very well be your own.</p>
<p dir="auto">Let&#39;s call that function with good types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; memory_of_kala_nag = {
...     &#39;remember&#39;: &#39;I will remember what I was, I am sick of rope and chain—&#39;,
...     &#39;strength&#39;: &#39;I will remember my old strength and all my forest affairs.&#39;,
...     &#39;not sell&#39;: &#39;I will not sell my back to man for a bundle of sugar-cane:&#39;,
...     &#39;own kind&#39;: &#39;I will go out to my own kind, and the wood-folk in their lairs.&#39;,
...     &#39;morning&#39;:  &#39;I will go out until the day, until the morning break—&#39;,
...     &#39;caress&#39;:   &#39;Out to the wind’s untainted kiss, the water’s clean caress;&#39;,
...     &#39;forget&#39;:   &#39;I will forget my ankle-ring and snap my picket stake.&#39;,
...     &#39;revisit&#39;:  &#39;I will revisit my lost loves, and playmates masterless!&#39;,
... }
&gt;&gt;&gt; toomai_of_the_elephants(len(memory_of_kala_nag[&#39;remember&#39;]))
56
&gt;&gt;&gt; toomai_of_the_elephants(memory_of_kala_nag)(&#39;remember&#39;)
&#39;I will remember what I was, I am sick of rope and chain—&#39;
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>memory_of_kala_nag</span> <span>=</span> {
...     <span>&#39;remember&#39;</span>: <span>&#39;I will remember what I was, I am sick of rope and chain—&#39;</span>,
...     <span>&#39;strength&#39;</span>: <span>&#39;I will remember my old strength and all my forest affairs.&#39;</span>,
...     <span>&#39;not sell&#39;</span>: <span>&#39;I will not sell my back to man for a bundle of sugar-cane:&#39;</span>,
...     <span>&#39;own kind&#39;</span>: <span>&#39;I will go out to my own kind, and the wood-folk in their lairs.&#39;</span>,
...     <span>&#39;morning&#39;</span>:  <span>&#39;I will go out until the day, until the morning break—&#39;</span>,
...     <span>&#39;caress&#39;</span>:   <span>&#39;Out to the wind’s untainted kiss, the water’s clean caress;&#39;</span>,
...     <span>&#39;forget&#39;</span>:   <span>&#39;I will forget my ankle-ring and snap my picket stake.&#39;</span>,
...     <span>&#39;revisit&#39;</span>:  <span>&#39;I will revisit my lost loves, and playmates masterless!&#39;</span>,
... }
<span>&gt;&gt;</span><span>&gt;</span> <span>toomai_of_the_elephants</span>(<span>len</span>(<span>memory_of_kala_nag</span>[<span>&#39;remember&#39;</span>]))
<span>56</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>toomai_of_the_elephants</span>(<span>memory_of_kala_nag</span>)(<span>&#39;remember&#39;</span>)
&#39;<span>I</span> <span>will</span> <span>remember</span> <span>what</span> <span>I</span> <span>was</span>, <span>I</span> <span>am</span> <span>sick</span> <span>of</span> <span>rope</span> <span>and</span> <span>chain</span>—&#39;</pre></div>
<p dir="auto">Good function. Let&#39;s call it again with a tastelessly bad type:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; toomai_of_the_elephants(
...     &#39;Shiv, who poured the harvest and made the winds to blow,&#39;)
BeartypeCallHintPepParamException: @beartyped toomai_of_the_elephants()
parameter memory=&#39;Shiv, who poured the harvest and made the winds to blow,&#39;
violates type hint typing.Union[numbers.Integral, collections.abc.Mapping],
as &#39;Shiv, who poured the harvest and made the winds to blow,&#39; not &lt;protocol
ABC &#34;collections.abc.Mapping&#34;&gt; or &lt;protocol &#34;numbers.Integral&#34;&gt;.
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>toomai_of_the_elephants</span>(
...     <span>&#39;Shiv, who poured the harvest and made the winds to blow,&#39;</span>)
<span>BeartypeCallHintPepParamException</span>: @<span>beartyped</span> <span>toomai_of_the_elephants</span>()
<span>parameter</span> <span>memory</span><span>=</span><span>&#39;Shiv, who poured the harvest and made the winds to blow,&#39;</span>
<span>violates</span> <span>type</span> <span>hint</span> <span>typing</span>.<span>Union</span>[<span>numbers</span>.<span>Integral</span>, <span>collections</span>.<span>abc</span>.<span>Mapping</span>],
<span>as</span> <span>&#39;Shiv, who poured the harvest and made the winds to blow,&#39;</span> <span>not</span> <span>&lt;</span><span>protocol</span>
<span>ABC</span> <span>&#34;collections.abc.Mapping&#34;</span><span>&gt;</span> <span>or</span> <span>&lt;</span><span>protocol</span> <span>&#34;numbers.Integral&#34;</span><span>&gt;</span>.</pre></div>
<p dir="auto">Good function! The type hints applied to this callable now accurately documents
its API. All ends typed well... <em>still again and again.</em></p>
<a name="user-content-optional-types"></a>
<h4 dir="auto"><a id="user-content-optional-types" aria-hidden="true" href="#optional-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id66">Optional Types</a></h4>
<p dir="auto">That&#39;s also all typed well, but everything above only applies to <em>mandatory</em>
parameters and return values whose types are never <code>NoneType</code>. In practice,
parameters and return values are often relaxed to optionally accept any of
multiple types including <code>NoneType</code> referred to as <strong>optional types.</strong></p>
<p dir="auto">Optional types are trivially type-checked by annotating optional parameters
(parameters whose values default to <code>None</code>) and optional return values
(callables returning <code>None</code> rather than raising exceptions in edge cases)
with the <code>typing.Optional</code> type hint indexed by those types.</p>
<p dir="auto">Let&#39;s declare another beartyped function accepting either an enumeration type
<em>or</em> <code>None</code> and returning either an enumeration member <em>or</em> <code>None</code>:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from beartype.cave import EnumType, EnumMemberType
from typing import Optional

@beartype
def tell_the_deep_sea_viceroys(story: Optional[EnumType] = None) -&gt; (
    Optional[EnumMemberType]):
    return story if story is None else list(story.__members__.values())[-1]
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>EnumType</span>, <span>EnumMemberType</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Optional</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>tell_the_deep_sea_viceroys</span>(<span>story</span>: <span>Optional</span>[<span>EnumType</span>] <span>=</span> <span>None</span>) <span>-&gt;</span> (
    <span>Optional</span>[<span>EnumMemberType</span>]):
    <span>return</span> <span>story</span> <span>if</span> <span>story</span> <span>is</span> <span>None</span> <span>else</span> <span>list</span>(<span>story</span>.<span>__members__</span>.<span>values</span>())[<span>-</span><span>1</span>]</pre></div>
<p dir="auto">For efficiency, the <code>typing.Optional</code> type hint creates, caches, and returns
new tuples of types appending <code>NoneType</code> to the original types it&#39;s indexed
with. Since efficiency is good, <code>typing.Optional</code> is also good.</p>
<p dir="auto">Let&#39;s call that function with good types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from enum import Enum
&gt;&gt;&gt; class Lukannon(Enum):
...     WINTER_WHEAT = &#39;The Beaches of Lukannon—the winter wheat so tall—&#39;
...     SEA_FOG      = &#39;The dripping, crinkled lichens, and the sea-fog drenching all!&#39;
...     PLAYGROUND   = &#39;The platforms of our playground, all shining smooth and worn!&#39;
...     HOME         = &#39;The Beaches of Lukannon—the home where we were born!&#39;
...     MATES        = &#39;I met my mates in the morning, a broken, scattered band.&#39;
...     CLUB         = &#39;Men shoot us in the water and club us on the land;&#39;
...     DRIVE        = &#39;Men drive us to the Salt House like silly sheep and tame,&#39;
...     SEALERS      = &#39;And still we sing Lukannon—before the sealers came.&#39;
&gt;&gt;&gt; tell_the_deep_sea_viceroys(Lukannon)
&lt;Lukannon.SEALERS: &#39;And still we sing Lukannon—before the sealers came.&#39;&gt;
&gt;&gt;&gt; tell_the_deep_sea_viceroys()
None
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>enum</span> <span>import</span> <span>Enum</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>class</span> <span>Lukannon</span>(<span>Enum</span>):
...     <span>WINTER_WHEAT</span> <span>=</span> <span>&#39;The Beaches of Lukannon—the winter wheat so tall—&#39;</span>
...     <span>SEA_FOG</span>      <span>=</span> <span>&#39;The dripping, crinkled lichens, and the sea-fog drenching all!&#39;</span>
...     <span>PLAYGROUND</span>   <span>=</span> <span>&#39;The platforms of our playground, all shining smooth and worn!&#39;</span>
...     <span>HOME</span>         <span>=</span> <span>&#39;The Beaches of Lukannon—the home where we were born!&#39;</span>
...     <span>MATES</span>        <span>=</span> <span>&#39;I met my mates in the morning, a broken, scattered band.&#39;</span>
...     <span>CLUB</span>         <span>=</span> <span>&#39;Men shoot us in the water and club us on the land;&#39;</span>
...     <span>DRIVE</span>        <span>=</span> <span>&#39;Men drive us to the Salt House like silly sheep and tame,&#39;</span>
...     <span>SEALERS</span>      <span>=</span> <span>&#39;And still we sing Lukannon—before the sealers came.&#39;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>tell_the_deep_sea_viceroys</span>(<span>Lukannon</span>)
<span>&lt;</span><span>Lukannon</span>.<span>SEALERS</span>: <span>&#39;And still we sing Lukannon—before the sealers came.&#39;</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>tell_the_deep_sea_viceroys</span>()
<span>None</span></pre></div>
<p dir="auto">You may now be pondering to yourself grimly in the dark: &#34;...but could we not
already do this just by manually annotating optional types with
<code>typing.Union</code> type hints explicitly indexed by <code>NoneType</code>?&#34;</p>
<p dir="auto">You would, of course, be correct. Let&#39;s grimly redeclare the same function
accepting and returning the same types – only annotated with <code>NoneType</code>
rather than <code>typing.Optional</code>:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from beartype.cave import EnumType, EnumMemberType, NoneType
from typing import Union

@beartype
def tell_the_deep_sea_viceroys(story: Union[EnumType, NoneType] = None) -&gt; (
    Union[EnumMemberType, NoneType]):
    return list(story.__members__.values())[-1] if story is not None else None
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>EnumType</span>, <span>EnumMemberType</span>, <span>NoneType</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Union</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>tell_the_deep_sea_viceroys</span>(<span>story</span>: <span>Union</span>[<span>EnumType</span>, <span>NoneType</span>] <span>=</span> <span>None</span>) <span>-&gt;</span> (
    <span>Union</span>[<span>EnumMemberType</span>, <span>NoneType</span>]):
    <span>return</span> <span>list</span>(<span>story</span>.<span>__members__</span>.<span>values</span>())[<span>-</span><span>1</span>] <span>if</span> <span>story</span> <span>is</span> <span>not</span> <span>None</span> <span>else</span> <span>None</span></pre></div>
<p dir="auto">Since <code>typing.Optional</code> internally reduces to <code>typing.Union</code>, these two
approaches are semantically equivalent. The former is simply syntactic sugar
simplifying the latter.</p>
<p dir="auto">Whereas <code>typing.Union</code> accepts an arbitrary number of child type hints,
however, <code>typing.Optional</code> accepts only a single child type hint. This can be
circumvented by either indexing <code>typing.Optional</code> by <code>typing.Union</code> <em>or</em>
indexing <code>typing.Union</code> by <code>NoneType</code>. Let&#39;s exhibit the former approach by
declaring another beartyped function accepting either an enumeration type,
enumeration type member, or <code>None</code> and returning either an enumeration type,
enumeration type member, or <code>None</code>:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype
from beartype.cave import EnumType, EnumMemberType, NoneType
from typing import Optional, Union

@beartype
def sang_them_up_the_beach(
    woe: Optional[Union[EnumType, EnumMemberType]] = None) -&gt; (
    Optional[Union[EnumType, EnumMemberType]]):
    return woe if isinstance(woe, (EnumMemberType, NoneType)) else (
        list(woe.__members__.values())[-1])
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>from</span> <span>beartype</span>.<span>cave</span> <span>import</span> <span>EnumType</span>, <span>EnumMemberType</span>, <span>NoneType</span>
<span>from</span> <span>typing</span> <span>import</span> <span>Optional</span>, <span>Union</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>sang_them_up_the_beach</span>(
    <span>woe</span>: <span>Optional</span>[<span>Union</span>[<span>EnumType</span>, <span>EnumMemberType</span>]] <span>=</span> <span>None</span>) <span>-&gt;</span> (
    <span>Optional</span>[<span>Union</span>[<span>EnumType</span>, <span>EnumMemberType</span>]]):
    <span>return</span> <span>woe</span> <span>if</span> <span>isinstance</span>(<span>woe</span>, (<span>EnumMemberType</span>, <span>NoneType</span>)) <span>else</span> (
        <span>list</span>(<span>woe</span>.<span>__members__</span>.<span>values</span>())[<span>-</span><span>1</span>])</pre></div>
<p dir="auto">Let&#39;s call that function with good types:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; sang_them_up_the_beach(Lukannon)
&lt;Lukannon.SEALERS: &#39;And still we sing Lukannon—before the sealers came.&#39;&gt;
&gt;&gt;&gt; sang_them_up_the_beach()
None
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>sang_them_up_the_beach</span>(<span>Lukannon</span>)
<span>&lt;</span><span>Lukannon</span>.<span>SEALERS</span>: <span>&#39;And still we sing Lukannon—before the sealers came.&#39;</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>sang_them_up_the_beach</span>()
<span>None</span></pre></div>
<p dir="auto">Behold! The terrifying power of the <code>typing.Optional</code> type hint, resplendent
in its highly over-optimized cache utilization.</p>
<a name="user-content-implementation"></a>
<h2 dir="auto"><a id="user-content-implementation" aria-hidden="true" href="#implementation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id67">Implementation</a></h2>
<p dir="auto">Let&#39;s take a deep dive into the deep end of runtime type checking – the
<code>beartype</code> way. In this subsection, we show code generated by the
<code>@beartype</code> decorator in real-world use cases and tell why that code is the
fastest possible code type-checking those cases.</p>
<a name="user-content-identity-decoration"></a>
<h3 dir="auto"><a id="user-content-identity-decoration" aria-hidden="true" href="#identity-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id68">Identity Decoration</a></h3>
<p dir="auto">We begin by wading into the torpid waters of the many ways <code>beartype</code> avoids
doing any work whatsoever, because laziness is the virtue we live by. The
reader may recall that the fastest decorator at decoration- <em>and</em> call-time is
the <strong>identity decorator</strong> returning its decorated callable unmodified: e.g.,</p>
<div data-snippet-clipboard-copy-content="from collections.abc import Callable

def identity_decorator(func: Callable): -&gt; Callable:
    return func
"><pre><span>from</span> <span>collections</span>.<span>abc</span> <span>import</span> <span>Callable</span>

<span>def</span> <span>identity_decorator</span>(<span>func</span>: <span>Callable</span>): <span>-</span><span>&gt;</span> <span>Callable</span>:
    <span>return</span> <span>func</span></pre></div>
<p dir="auto"><code>beartype</code> silently reduces to the identity decorator whenever it can, which
is surprisingly often. Our three weapons are laziness, surprise, ruthless
efficiency, and an almost fanatical devotion to constant-time type checking.</p>
<a name="user-content-unconditional-identity-decoration"></a>
<h4 dir="auto"><a id="user-content-unconditional-identity-decoration" aria-hidden="true" href="#unconditional-identity-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id69">Unconditional Identity Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by <em>no</em> type hints:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle(strike_first_and_then_give_tongue):
    return strike_first_and_then_give_tongue
"><pre><span>def</span> <span>law_of_the_jungle</span>(<span>strike_first_and_then_give_tongue</span>):
    <span>return</span> <span>strike_first_and_then_give_tongue</span></pre></div>
<p dir="auto">Let&#39;s decorate that function by <code>@beartype</code> and verify that <code>@beartype</code>
reduced to the identity decorator by returning that function unmodified:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from beartype import beartype
&gt;&gt;&gt; beartype(law_of_the_jungle) is law_of_the_jungle
True
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>beartype</span>(<span>law_of_the_jungle</span>) <span>is</span> <span>law_of_the_jungle</span>
<span>True</span></pre></div>
<p dir="auto">We&#39;ve verified that <code>@beartype</code> reduces to the identity decorator when
decorating unannotated callables. That&#39;s but the tip of the iceberg, though.
<code>@beartype</code> unconditionally reduces to a noop when:</p>
<ul dir="auto">
<li>The decorated callable is itself decorated by the <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a>-compliant
<a href="https://docs.python.org/3/library/typing.html#typing.no_type_check" rel="nofollow">@typing.no_type_check</a> decorator.</li>
<li>The decorated callable has already been decorated by <code>@beartype</code>.</li>
<li>Interpreter-wide optimization is enabled: e.g.,<ul dir="auto">
<li><a href="https://docs.python.org/3/using/cmdline.html#cmdoption-o" rel="nofollow">CPython is invoked with the &#34;-O&#34; command-line option</a>.</li>
<li><a href="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONOPTIMIZE" rel="nofollow">The &#34;PYTHONOPTIMIZE&#34; environment variable is set</a>.</li>
</ul>
</li>
</ul>
<a name="user-content-shallow-identity-decoration"></a>
<h4 dir="auto"><a id="user-content-shallow-identity-decoration" aria-hidden="true" href="#shallow-identity-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id70">Shallow Identity Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by the <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a>-compliant
<a href="https://docs.python.org/3/library/typing.html#typing.Any" rel="nofollow">typing.Any</a> type hint:</p>
<div data-snippet-clipboard-copy-content="from typing import Any

def law_of_the_jungle_2(never_order_anything_without_a_reason: Any) -&gt; Any:
    return never_order_anything_without_a_reason
"><pre><span>from</span> <span>typing</span> <span>import</span> <span>Any</span>

<span>def</span> <span>law_of_the_jungle_2</span>(<span>never_order_anything_without_a_reason</span>: <span>Any</span>) <span>-&gt;</span> <span>Any</span>:
    <span>return</span> <span>never_order_anything_without_a_reason</span></pre></div>
<p dir="auto">Again, let&#39;s decorate that function by <code>@beartype</code> and verify that
<code>@beartype</code> reduced to the identity decorator by returning that function
unmodified:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from beartype import beartype
&gt;&gt;&gt; beartype(law_of_the_jungle_2) is law_of_the_jungle_2
True
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>beartype</span>(<span>law_of_the_jungle_2</span>) <span>is</span> <span>law_of_the_jungle_2</span>
<span>True</span></pre></div>
<p dir="auto">We&#39;ve verified that <code>@beartype</code> reduces to the identity decorator when
decorating callables annotated by <a href="https://docs.python.org/3/library/typing.html#typing.Any" rel="nofollow">typing.Any</a> – a novel category of type hint
we refer to as <strong>shallowly ignorable type hints</strong> (known to be ignorable by
constant-time lookup in a predefined frozen set). That&#39;s but the snout of the
crocodile, though. <code>@beartype</code> conditionally reduces to a noop when <em>all</em>
type hints annotating the decorated callable are shallowly ignorable. These
include:</p>
<ul dir="auto">
<li><a href="https://docs.python.org/3/reference/datamodel.html#basic-customization" rel="nofollow">object</a>, the root superclass of Python&#39;s class hierarchy. Since all objects
are instances of <a href="https://docs.python.org/3/reference/datamodel.html#basic-customization" rel="nofollow">object</a>, <a href="https://docs.python.org/3/reference/datamodel.html#basic-customization" rel="nofollow">object</a> conveys no meaningful constraints as a type
hint and is thus shallowly ignorable.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Any" rel="nofollow">typing.Any</a>, equivalent to <a href="https://docs.python.org/3/reference/datamodel.html#basic-customization" rel="nofollow">object</a>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Generic" rel="nofollow">typing.Generic</a>, equivalent to <code>typing.Generic[typing.Any]</code>, which conveys
no meaningful constraints as a type hint and is thus shallowly ignorable.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Protocol" rel="nofollow">typing.Protocol</a>, equivalent to <code>typing.Protocol[typing.Any]</code> and shallowly
ignorable for similar reasons.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a>, equivalent to <code>typing.Union[typing.Any]</code>, equivalent to
<code>Any</code>.</li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">typing.Optional</a>, equivalent to <code>typing.Optional[typing.Any]</code>, equivalent
to <code>Union[Any, type(None)]</code>. Since any union subscripted by ignorable type
hints is itself ignorable, <a href="#union-ignorable" id="user-content-id2">[2]</a> <a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">typing.Optional</a> is shallowly
ignorable as well.</li>
</ul>
<table id="user-content-union-ignorable">

<tbody>
<tr><td><a href="#id2">[2]</a></td><td>Unions are only as narrow as their widest subscripted argument. However,
ignorable type hints are ignorable <em>because</em> they are maximally wide.
Unions subscripted by ignorable arguments are thus the widest possible
unions, conveying no meaningful constraints and thus themselves ignorable.</td></tr>
</tbody>
</table>
<a name="user-content-deep-identity-decoration"></a>
<h4 dir="auto"><a id="user-content-deep-identity-decoration" aria-hidden="true" href="#deep-identity-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id71">Deep Identity Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by a non-trivial <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a>-, <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">585</a>- and <a href="https://www.python.org/dev/peps/pep-0593" rel="nofollow">593</a>-compliant type hint that superficially
<em>appears</em> to convey meaningful constraints:</p>
<div data-snippet-clipboard-copy-content="from typing import Annotated, NewType, Union

hint = Union[str, list[int], NewType(&#39;MetaType&#39;, Annotated[object, 53])]
def law_of_the_jungle_3(bring_them_to_the_pack_council: hint) -&gt; hint:
    return bring_them_to_the_pack_council
"><pre><span>from</span> <span>typing</span> <span>import</span> <span>Annotated</span>, <span>NewType</span>, <span>Union</span>

<span>hint</span> <span>=</span> <span>Union</span>[<span>str</span>, <span>list</span>[<span>int</span>], <span>NewType</span>(<span>&#39;MetaType&#39;</span>, <span>Annotated</span>[<span>object</span>, <span>53</span>])]
<span>def</span> <span>law_of_the_jungle_3</span>(<span>bring_them_to_the_pack_council</span>: <span>hint</span>) <span>-&gt;</span> <span>hint</span>:
    <span>return</span> <span>bring_them_to_the_pack_council</span></pre></div>
<p dir="auto">Despite appearances, it can be shown by exhaustive (and frankly exhausting)
reduction that that hint is actually ignorable. Let&#39;s decorate that function by
<code>@beartype</code> and verify that <code>@beartype</code> reduced to the identity decorator
by returning that function unmodified:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from beartype import beartype
&gt;&gt;&gt; beartype(law_of_the_jungle_3) is law_of_the_jungle_3
True
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>beartype</span>(<span>law_of_the_jungle_3</span>) <span>is</span> <span>law_of_the_jungle_3</span>
<span>True</span></pre></div>
<p dir="auto">We&#39;ve verified that <code>@beartype</code> reduces to the identity decorator when
decorating callables annotated by the above object – a novel category of type
hint we refer to as <strong>deeply ignorable type hints</strong> (known to be ignorable only
by recursive linear-time inspection of subscripted arguments). That&#39;s but the
trunk of the elephant, though. <code>@beartype</code> conditionally reduces to a noop
when <em>all</em> type hints annotating the decorated callable are deeply ignorable.
These include:</p>
<ul dir="auto">
<li>Parametrizations of <a href="https://docs.python.org/3/library/typing.html#typing.Generic" rel="nofollow">typing.Generic</a> and <a href="https://docs.python.org/3/library/typing.html#typing.Protocol" rel="nofollow">typing.Protocol</a> by type variables.
Since <a href="https://docs.python.org/3/library/typing.html#typing.Generic" rel="nofollow">typing.Generic</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Protocol" rel="nofollow">typing.Protocol</a>, <em>and</em> type variables all fail to
convey any meaningful constraints in and of themselves, these
parametrizations are safely ignorable in all contexts.</li>
<li>Calls to <a href="https://docs.python.org/3/library/typing.html#typing.NewType" rel="nofollow">typing.NewType</a> passed an ignorable type hint.</li>
<li>Subscriptions of <a href="https://docs.python.org/3/library/typing.html#typing.Annotated" rel="nofollow">typing.Annotated</a> whose first argument is ignorable.</li>
<li>Subscriptions of <a href="https://docs.python.org/3/library/typing.html#typing.Optional" rel="nofollow">typing.Optional</a> and <a href="https://docs.python.org/3/library/typing.html#typing.Union" rel="nofollow">typing.Union</a> by at least one ignorable
argument.</li>
</ul>
<a name="user-content-constant-decoration"></a>
<h3 dir="auto"><a id="user-content-constant-decoration" aria-hidden="true" href="#constant-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id72">Constant Decoration</a></h3>
<p dir="auto">We continue by trundling into the turbid waters out at sea, where <code>beartype</code>
reluctantly performs its minimal amount of work with a heavy sigh.</p>
<a name="user-content-constant-builtin-type-decoration"></a>
<h4 dir="auto"><a id="user-content-constant-builtin-type-decoration" aria-hidden="true" href="#constant-builtin-type-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id73">Constant Builtin Type Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by type hints that are builtin types:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype

@beartype
def law_of_the_jungle_4(he_must_be_spoken_for_by_at_least_two: int):
    return he_must_be_spoken_for_by_at_least_two
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle_4</span>(<span>he_must_be_spoken_for_by_at_least_two</span>: <span>int</span>):
    <span>return</span> <span>he_must_be_spoken_for_by_at_least_two</span></pre></div>
<p dir="auto">Let&#39;s see the wrapper function <code>@beartype</code> dynamically generated from that:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle_4(
    *args,
    __beartype_func=__beartype_func,
    __beartypistry=__beartypistry,
    **kwargs
):
    # Localize the number of passed positional arguments for efficiency.
    __beartype_args_len = len(args)
    # Localize this positional or keyword parameter if passed *OR* to the
    # sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.
    __beartype_pith_0 = (
        args[0] if __beartype_args_len &gt; 0 else
        kwargs.get(&#39;he_must_be_spoken_for_by_at_least_two&#39;, __beartypistry)
    )

    # If this parameter was passed...
    if __beartype_pith_0 is not __beartypistry:
        # Type-check this passed parameter or return value against this
        # PEP-compliant type hint.
        if not isinstance(__beartype_pith_0, int):
            __beartype_raise_pep_call_exception(
                func=__beartype_func,
                pith_name=&#39;he_must_be_spoken_for_by_at_least_two&#39;,
                pith_value=__beartype_pith_0,
            )

    # Call this function with all passed parameters and return the value
    # returned from this call.
    return __beartype_func(*args, **kwargs)
"><pre><span>def</span> <span>law_of_the_jungle_4</span>(
    <span>*</span><span>args</span>,
    <span>__beartype_func</span><span>=</span><span>__beartype_func</span>,
    <span>__beartypistry</span><span>=</span><span>__beartypistry</span>,
    <span>**</span><span>kwargs</span>
):
    <span># Localize the number of passed positional arguments for efficiency.</span>
    <span>__beartype_args_len</span> <span>=</span> <span>len</span>(<span>args</span>)
    <span># Localize this positional or keyword parameter if passed *OR* to the</span>
    <span># sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.</span>
    <span>__beartype_pith_0</span> <span>=</span> (
        <span>args</span>[<span>0</span>] <span>if</span> <span>__beartype_args_len</span> <span>&gt;</span> <span>0</span> <span>else</span>
        <span>kwargs</span>.<span>get</span>(<span>&#39;he_must_be_spoken_for_by_at_least_two&#39;</span>, <span>__beartypistry</span>)
    )

    <span># If this parameter was passed...</span>
    <span>if</span> <span>__beartype_pith_0</span> <span>is</span> <span>not</span> <span>__beartypistry</span>:
        <span># Type-check this passed parameter or return value against this</span>
        <span># PEP-compliant type hint.</span>
        <span>if</span> <span>not</span> <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>int</span>):
            <span>__beartype_raise_pep_call_exception</span>(
                <span>func</span><span>=</span><span>__beartype_func</span>,
                <span>pith_name</span><span>=</span><span>&#39;he_must_be_spoken_for_by_at_least_two&#39;</span>,
                <span>pith_value</span><span>=</span><span>__beartype_pith_0</span>,
            )

    <span># Call this function with all passed parameters and return the value</span>
    <span># returned from this call.</span>
    <span>return</span> <span>__beartype_func</span>(<span>*</span><span>args</span>, <span>**</span><span>kwargs</span>)</pre></div>
<p dir="auto">Let&#39;s dismantle this bit by bit:</p>
<ul dir="auto">
<li>The code comments above are verbatim as they appear in the generated code.</li>
<li><code>law_of_the_jungle_4()</code> is the ad-hoc function name
<code>@beartype</code> assigned this wrapper function.</li>
<li><code>__beartype_func</code> is the original <code>law_of_the_jungle_4()</code> function.</li>
<li><code>__beartypistry</code> is a thread-safe global registry of all types, tuples of
types, and forward references to currently undeclared types visitable from
type hints annotating callables decorated by <code>@beartype</code>. We&#39;ll see more
about the <code>__beartypistry</code> in a moment. For know, just know that
<code>__beartypistry</code> is a private singleton of the <code>beartype</code> package. This
object is frequently accessed and thus localized to the body of this wrapper
rather than accessed as a global variable, which would be mildly slower.</li>
<li><code>__beartype_pith_0</code> is the value of the first passed parameter, regardless
of whether that parameter is passed as a positional or keyword argument. If
unpassed, the value defaults to the <code>__beartypistry</code>. Since <em>no</em> caller
should access (let alone pass) that object, that object serves as an
efficient sentinel value enabling us to discern passed from unpassed
parameters. <code>beartype</code> internally favours the term &#34;pith&#34; (which we
absolutely just made up) to transparently refer to the arbitrary object
currently being type-checked against its associated type hint.</li>
<li><code>isinstance(__beartype_pith_0, int)</code> tests whether the value passed for
this parameter satisfies the type hint annotating this parameter.</li>
<li><code>__beartype_raise_pep_call_exception()</code> raises a human-readable exception
if this value fails this type-check.</li>
</ul>
<p dir="auto">So good so far. But that&#39;s easy. Let&#39;s delve deeper.</p>
<a name="user-content-constant-non-builtin-type-decoration"></a>
<h4 dir="auto"><a id="user-content-constant-non-builtin-type-decoration" aria-hidden="true" href="#constant-non-builtin-type-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id74">Constant Non-Builtin Type Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by type hints that are pure-Python
classes rather than builtin types:</p>
<div data-snippet-clipboard-copy-content="from argparse import ArgumentParser
from beartype import beartype

@beartype
def law_of_the_jungle_5(a_cub_may_be_bought_at_a_price: ArgumentParser):
    return a_cub_may_be_bought_at_a_price
"><pre><span>from</span> <span>argparse</span> <span>import</span> <span>ArgumentParser</span>
<span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle_5</span>(<span>a_cub_may_be_bought_at_a_price</span>: <span>ArgumentParser</span>):
    <span>return</span> <span>a_cub_may_be_bought_at_a_price</span></pre></div>
<p dir="auto">Let&#39;s see the wrapper function <code>@beartype</code> dynamically generated from that:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle_5(
    *args,
    __beartype_func=__beartype_func,
    __beartypistry=__beartypistry,
    **kwargs
):
    # Localize the number of passed positional arguments for efficiency.
    __beartype_args_len = len(args)
    # Localize this positional or keyword parameter if passed *OR* to the
    # sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.
    __beartype_pith_0 = (
        args[0] if __beartype_args_len &gt; 0 else
        kwargs.get(&#39;a_cub_may_be_bought_at_a_price&#39;, __beartypistry)
    )

    # If this parameter was passed...
    if __beartype_pith_0 is not __beartypistry:
        # Type-check this passed parameter or return value against this
        # PEP-compliant type hint.
        if not isinstance(__beartype_pith_0, __beartypistry[&#39;argparse.ArgumentParser&#39;]):
            __beartype_raise_pep_call_exception(
                func=__beartype_func,
                pith_name=&#39;a_cub_may_be_bought_at_a_price&#39;,
                pith_value=__beartype_pith_0,
            )

    # Call this function with all passed parameters and return the value
    # returned from this call.
    return __beartype_func(*args, **kwargs)
"><pre><span>def</span> <span>law_of_the_jungle_5</span>(
    <span>*</span><span>args</span>,
    <span>__beartype_func</span><span>=</span><span>__beartype_func</span>,
    <span>__beartypistry</span><span>=</span><span>__beartypistry</span>,
    <span>**</span><span>kwargs</span>
):
    <span># Localize the number of passed positional arguments for efficiency.</span>
    <span>__beartype_args_len</span> <span>=</span> <span>len</span>(<span>args</span>)
    <span># Localize this positional or keyword parameter if passed *OR* to the</span>
    <span># sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.</span>
    <span>__beartype_pith_0</span> <span>=</span> (
        <span>args</span>[<span>0</span>] <span>if</span> <span>__beartype_args_len</span> <span>&gt;</span> <span>0</span> <span>else</span>
        <span>kwargs</span>.<span>get</span>(<span>&#39;a_cub_may_be_bought_at_a_price&#39;</span>, <span>__beartypistry</span>)
    )

    <span># If this parameter was passed...</span>
    <span>if</span> <span>__beartype_pith_0</span> <span>is</span> <span>not</span> <span>__beartypistry</span>:
        <span># Type-check this passed parameter or return value against this</span>
        <span># PEP-compliant type hint.</span>
        <span>if</span> <span>not</span> <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>__beartypistry</span>[<span>&#39;argparse.ArgumentParser&#39;</span>]):
            <span>__beartype_raise_pep_call_exception</span>(
                <span>func</span><span>=</span><span>__beartype_func</span>,
                <span>pith_name</span><span>=</span><span>&#39;a_cub_may_be_bought_at_a_price&#39;</span>,
                <span>pith_value</span><span>=</span><span>__beartype_pith_0</span>,
            )

    <span># Call this function with all passed parameters and return the value</span>
    <span># returned from this call.</span>
    <span>return</span> <span>__beartype_func</span>(<span>*</span><span>args</span>, <span>**</span><span>kwargs</span>)</pre></div>
<p dir="auto">The result is largely the same. The only meaningful difference is the
type-check on line 20:</p>
<div data-snippet-clipboard-copy-content="if not isinstance(__beartype_pith_0, __beartypistry[&#39;argparse.ArgumentParser&#39;]):
"><pre><span>if</span> <span>not</span> <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>__beartypistry</span>[<span>&#39;argparse.ArgumentParser&#39;</span>]):</pre></div>
<p dir="auto">Since we annotated that function with a pure-Python class rather than builtin
type, <code>@beartype</code> registered that class with the <code>__beartypistry</code> at
decoration time and then subsequently looked that class up with its
fully-qualified classname at call time to perform this type-check.</p>
<p dir="auto">So good so far... so what! Let&#39;s spelunk harder.</p>
<a name="user-content-constant-shallow-sequence-decoration"></a>
<h4 dir="auto"><a id="user-content-constant-shallow-sequence-decoration" aria-hidden="true" href="#constant-shallow-sequence-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id75">Constant Shallow Sequence Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by type hints that are <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP
585</a>-compliant builtin types subscripted by ignorable arguments:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype

@beartype
def law_of_the_jungle_6(all_the_jungle_is_thine: list[object]):
    return all_the_jungle_is_thine
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle_6</span>(<span>all_the_jungle_is_thine</span>: <span>list</span>[<span>object</span>]):
    <span>return</span> <span>all_the_jungle_is_thine</span></pre></div>
<p dir="auto">Let&#39;s see the wrapper function <code>@beartype</code> dynamically generated from that:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle_6(
    *args,
    __beartype_func=__beartype_func,
    __beartypistry=__beartypistry,
    **kwargs
):
    # Localize the number of passed positional arguments for efficiency.
    __beartype_args_len = len(args)
    # Localize this positional or keyword parameter if passed *OR* to the
    # sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.
    __beartype_pith_0 = (
        args[0] if __beartype_args_len &gt; 0 else
        kwargs.get(&#39;all_the_jungle_is_thine&#39;, __beartypistry)
    )

    # If this parameter was passed...
    if __beartype_pith_0 is not __beartypistry:
        # Type-check this passed parameter or return value against this
        # PEP-compliant type hint.
        if not isinstance(__beartype_pith_0, list):
            __beartype_raise_pep_call_exception(
                func=__beartype_func,
                pith_name=&#39;all_the_jungle_is_thine&#39;,
                pith_value=__beartype_pith_0,
            )

    # Call this function with all passed parameters and return the value
    # returned from this call.
    return __beartype_func(*args, **kwargs)
"><pre><span>def</span> <span>law_of_the_jungle_6</span>(
    <span>*</span><span>args</span>,
    <span>__beartype_func</span><span>=</span><span>__beartype_func</span>,
    <span>__beartypistry</span><span>=</span><span>__beartypistry</span>,
    <span>**</span><span>kwargs</span>
):
    <span># Localize the number of passed positional arguments for efficiency.</span>
    <span>__beartype_args_len</span> <span>=</span> <span>len</span>(<span>args</span>)
    <span># Localize this positional or keyword parameter if passed *OR* to the</span>
    <span># sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.</span>
    <span>__beartype_pith_0</span> <span>=</span> (
        <span>args</span>[<span>0</span>] <span>if</span> <span>__beartype_args_len</span> <span>&gt;</span> <span>0</span> <span>else</span>
        <span>kwargs</span>.<span>get</span>(<span>&#39;all_the_jungle_is_thine&#39;</span>, <span>__beartypistry</span>)
    )

    <span># If this parameter was passed...</span>
    <span>if</span> <span>__beartype_pith_0</span> <span>is</span> <span>not</span> <span>__beartypistry</span>:
        <span># Type-check this passed parameter or return value against this</span>
        <span># PEP-compliant type hint.</span>
        <span>if</span> <span>not</span> <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>list</span>):
            <span>__beartype_raise_pep_call_exception</span>(
                <span>func</span><span>=</span><span>__beartype_func</span>,
                <span>pith_name</span><span>=</span><span>&#39;all_the_jungle_is_thine&#39;</span>,
                <span>pith_value</span><span>=</span><span>__beartype_pith_0</span>,
            )

    <span># Call this function with all passed parameters and return the value</span>
    <span># returned from this call.</span>
    <span>return</span> <span>__beartype_func</span>(<span>*</span><span>args</span>, <span>**</span><span>kwargs</span>)</pre></div>
<p dir="auto">We are still within the realm of normalcy. Correctly detecting this type hint
to be subscripted by an ignorable argument, <code>@beartype</code> only bothered
type-checking this parameter to be an instance of this builtin type:</p>
<div data-snippet-clipboard-copy-content="if not isinstance(__beartype_pith_0, list):
"><pre><span>if</span> <span>not</span> <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>list</span>):</pre></div>
<p dir="auto">It&#39;s time to iteratively up the ante.</p>
<a name="user-content-constant-deep-sequence-decoration"></a>
<h4 dir="auto"><a id="user-content-constant-deep-sequence-decoration" aria-hidden="true" href="#constant-deep-sequence-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id76">Constant Deep Sequence Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by type hints that are <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP
585</a>-compliant builtin types subscripted by builtin types:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype

@beartype
def law_of_the_jungle_7(kill_everything_that_thou_canst: list[str]):
    return kill_everything_that_thou_canst
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle_7</span>(<span>kill_everything_that_thou_canst</span>: <span>list</span>[<span>str</span>]):
    <span>return</span> <span>kill_everything_that_thou_canst</span></pre></div>
<p dir="auto">Let&#39;s see the wrapper function <code>@beartype</code> dynamically generated from that:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle_7(
    *args,
    __beartype_func=__beartype_func,
    __beartypistry=__beartypistry,
    **kwargs
):
    # Generate and localize a sufficiently large pseudo-random integer for
    # subsequent indexation in type-checking randomly selected container items.
    __beartype_random_int = __beartype_getrandbits(64)
    # Localize the number of passed positional arguments for efficiency.
    __beartype_args_len = len(args)
    # Localize this positional or keyword parameter if passed *OR* to the
    # sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.
    __beartype_pith_0 = (
        args[0] if __beartype_args_len &gt; 0 else
        kwargs.get(&#39;kill_everything_that_thou_canst&#39;, __beartypistry)
    )

    # If this parameter was passed...
    if __beartype_pith_0 is not __beartypistry:
        # Type-check this passed parameter or return value against this
        # PEP-compliant type hint.
        if not (
            # True only if this pith shallowly satisfies this hint.
            isinstance(__beartype_pith_0, list) and
            # True only if either this pith is empty *OR* this pith is
            # both non-empty and deeply satisfies this hint.
            (not __beartype_pith_0 or isinstance(__beartype_pith_0[__beartype_random_int % len(__beartype_pith_0)], str))
        ):
            __beartype_raise_pep_call_exception(
                func=__beartype_func,
                pith_name=&#39;kill_everything_that_thou_canst&#39;,
                pith_value=__beartype_pith_0,
            )

    # Call this function with all passed parameters and return the value
    # returned from this call.
    return __beartype_func(*args, **kwargs)
"><pre><span>def</span> <span>law_of_the_jungle_7</span>(
    <span>*</span><span>args</span>,
    <span>__beartype_func</span><span>=</span><span>__beartype_func</span>,
    <span>__beartypistry</span><span>=</span><span>__beartypistry</span>,
    <span>**</span><span>kwargs</span>
):
    <span># Generate and localize a sufficiently large pseudo-random integer for</span>
    <span># subsequent indexation in type-checking randomly selected container items.</span>
    <span>__beartype_random_int</span> <span>=</span> <span>__beartype_getrandbits</span>(<span>64</span>)
    <span># Localize the number of passed positional arguments for efficiency.</span>
    <span>__beartype_args_len</span> <span>=</span> <span>len</span>(<span>args</span>)
    <span># Localize this positional or keyword parameter if passed *OR* to the</span>
    <span># sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.</span>
    <span>__beartype_pith_0</span> <span>=</span> (
        <span>args</span>[<span>0</span>] <span>if</span> <span>__beartype_args_len</span> <span>&gt;</span> <span>0</span> <span>else</span>
        <span>kwargs</span>.<span>get</span>(<span>&#39;kill_everything_that_thou_canst&#39;</span>, <span>__beartypistry</span>)
    )

    <span># If this parameter was passed...</span>
    <span>if</span> <span>__beartype_pith_0</span> <span>is</span> <span>not</span> <span>__beartypistry</span>:
        <span># Type-check this passed parameter or return value against this</span>
        <span># PEP-compliant type hint.</span>
        <span>if</span> <span>not</span> (
            <span># True only if this pith shallowly satisfies this hint.</span>
            <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>list</span>) <span>and</span>
            <span># True only if either this pith is empty *OR* this pith is</span>
            <span># both non-empty and deeply satisfies this hint.</span>
            (<span>not</span> <span>__beartype_pith_0</span> <span>or</span> <span>isinstance</span>(<span>__beartype_pith_0</span>[<span>__beartype_random_int</span> <span>%</span> <span>len</span>(<span>__beartype_pith_0</span>)], <span>str</span>))
        ):
            <span>__beartype_raise_pep_call_exception</span>(
                <span>func</span><span>=</span><span>__beartype_func</span>,
                <span>pith_name</span><span>=</span><span>&#39;kill_everything_that_thou_canst&#39;</span>,
                <span>pith_value</span><span>=</span><span>__beartype_pith_0</span>,
            )

    <span># Call this function with all passed parameters and return the value</span>
    <span># returned from this call.</span>
    <span>return</span> <span>__beartype_func</span>(<span>*</span><span>args</span>, <span>**</span><span>kwargs</span>)</pre></div>
<p dir="auto">We have now diverged from normalcy. Let&#39;s dismantle this iota by iota:</p>
<ul dir="auto">
<li><code>__beartype_random_int</code> is a pseudo-random unsigned 32-bit integer whose
bit length intentionally corresponds to the <a href="https://stackoverflow.com/a/11704178/2809027" rel="nofollow">number of bits generated by each
call to Python&#39;s C-based Mersenne Twister</a> internally
performed by the <a href="https://docs.python.org/3/library/random.html#random.getrandbits" rel="nofollow">random.getrandbits</a> function generating this integer.
Exceeding this length would cause that function to internally perform that
call multiple times for no gain. Since the cost of generating integers to
this length is the same as generating integers of smaller lengths, this
length is preferred. Since most sequences are likely to contain fewer items
than this integer, pseudo-random sequence items are indexable by taking the
modulo of this integer with the sizes of those sequences. For big sequences
containing more than this number of items, <code>beartype</code> deeply type-checks
leading items with indices in this range while ignoring trailing items. Given
the practical infeasibility of storing big sequences in memory, this seems an
acceptable real-world tradeoff. Suck it, big sequences!</li>
<li>As before, <code>@beartype</code> first type-checks this parameter to be a list.</li>
<li><code>@beartype</code> then type-checks this parameter to either be:<ul dir="auto">
<li><code>not __beartype_pith_0</code>, an empty list.</li>
<li><code>isinstance(__beartype_pith_0[__beartype_random_int %
len(__beartype_pith_0)], str)</code>, a non-empty list whose pseudo-randomly
indexed list item satisfies this nested builtin type.</li>
</ul>
</li>
</ul>
<p dir="auto">Well, that escalated quickly.</p>
<a name="user-content-constant-nested-deep-sequence-decoration"></a>
<h4 dir="auto"><a id="user-content-constant-nested-deep-sequence-decoration" aria-hidden="true" href="#constant-nested-deep-sequence-decoration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id77">Constant Nested Deep Sequence Decoration</a></h4>
<p dir="auto">Let&#39;s define a trivial function annotated by type hints that are <a href="https://www.python.org/dev/peps/pep-0585" rel="nofollow">PEP
585</a>-compliant builtin types recursively subscripted by instances of
themselves, because <em>we are typing masochists</em>:</p>
<div data-snippet-clipboard-copy-content="from beartype import beartype

@beartype
def law_of_the_jungle_8(pull_thorns_from_all_wolves_paws: (
    list[list[list[str]]])):
    return pull_thorns_from_all_wolves_paws
"><pre><span>from</span> <span>beartype</span> <span>import</span> <span>beartype</span>

<span>@<span>beartype</span></span>
<span>def</span> <span>law_of_the_jungle_8</span>(<span>pull_thorns_from_all_wolves_paws</span>: (
    <span>list</span>[<span>list</span>[<span>list</span>[<span>str</span>]]])):
    <span>return</span> <span>pull_thorns_from_all_wolves_paws</span></pre></div>
<p dir="auto">Let&#39;s see the wrapper function <code>@beartype</code> dynamically generated from that:</p>
<div data-snippet-clipboard-copy-content="def law_of_the_jungle_8(
    *args,
    __beartype_func=__beartype_func,
    __beartypistry=__beartypistry,
    **kwargs
):
    # Generate and localize a sufficiently large pseudo-random integer for
    # subsequent indexation in type-checking randomly selected container items.
    __beartype_random_int = __beartype_getrandbits(32)
    # Localize the number of passed positional arguments for efficiency.
    __beartype_args_len = len(args)
    # Localize this positional or keyword parameter if passed *OR* to the
    # sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.
    __beartype_pith_0 = (
        args[0] if __beartype_args_len &gt; 0 else
        kwargs.get(&#39;pull_thorns_from_all_wolves_paws&#39;, __beartypistry)
    )

    # If this parameter was passed...
    if __beartype_pith_0 is not __beartypistry:
        # Type-check this passed parameter or return value against this
        # PEP-compliant type hint.
        if not (
            # True only if this pith shallowly satisfies this hint.
            isinstance(__beartype_pith_0, list) and
            # True only if either this pith is empty *OR* this pith is
            # both non-empty and deeply satisfies this hint.
            (not __beartype_pith_0 or (
                # True only if this pith shallowly satisfies this hint.
                isinstance(__beartype_pith_1 := __beartype_pith_0[__beartype_random_int % len(__beartype_pith_0)], list) and
                # True only if either this pith is empty *OR* this pith is
                # both non-empty and deeply satisfies this hint.
                (not __beartype_pith_1 or (
                    # True only if this pith shallowly satisfies this hint.
                    isinstance(__beartype_pith_2 := __beartype_pith_1[__beartype_random_int % len(__beartype_pith_1)], list) and
                    # True only if either this pith is empty *OR* this pith is
                    # both non-empty and deeply satisfies this hint.
                    (not __beartype_pith_2 or isinstance(__beartype_pith_2[__beartype_random_int % len(__beartype_pith_2)], str))
                ))
            ))
        ):
            __beartype_raise_pep_call_exception(
                func=__beartype_func,
                pith_name=&#39;pull_thorns_from_all_wolves_paws&#39;,
                pith_value=__beartype_pith_0,
            )

    # Call this function with all passed parameters and return the value
    # returned from this call.
    return __beartype_func(*args, **kwargs)
"><pre><span>def</span> <span>law_of_the_jungle_8</span>(
    <span>*</span><span>args</span>,
    <span>__beartype_func</span><span>=</span><span>__beartype_func</span>,
    <span>__beartypistry</span><span>=</span><span>__beartypistry</span>,
    <span>**</span><span>kwargs</span>
):
    <span># Generate and localize a sufficiently large pseudo-random integer for</span>
    <span># subsequent indexation in type-checking randomly selected container items.</span>
    <span>__beartype_random_int</span> <span>=</span> <span>__beartype_getrandbits</span>(<span>32</span>)
    <span># Localize the number of passed positional arguments for efficiency.</span>
    <span>__beartype_args_len</span> <span>=</span> <span>len</span>(<span>args</span>)
    <span># Localize this positional or keyword parameter if passed *OR* to the</span>
    <span># sentinel value &#34;__beartypistry&#34; guaranteed to never be passed otherwise.</span>
    <span>__beartype_pith_0</span> <span>=</span> (
        <span>args</span>[<span>0</span>] <span>if</span> <span>__beartype_args_len</span> <span>&gt;</span> <span>0</span> <span>else</span>
        <span>kwargs</span>.<span>get</span>(<span>&#39;pull_thorns_from_all_wolves_paws&#39;</span>, <span>__beartypistry</span>)
    )

    <span># If this parameter was passed...</span>
    <span>if</span> <span>__beartype_pith_0</span> <span>is</span> <span>not</span> <span>__beartypistry</span>:
        <span># Type-check this passed parameter or return value against this</span>
        <span># PEP-compliant type hint.</span>
        <span>if</span> <span>not</span> (
            <span># True only if this pith shallowly satisfies this hint.</span>
            <span>isinstance</span>(<span>__beartype_pith_0</span>, <span>list</span>) <span>and</span>
            <span># True only if either this pith is empty *OR* this pith is</span>
            <span># both non-empty and deeply satisfies this hint.</span>
            (<span>not</span> <span>__beartype_pith_0</span> <span>or</span> (
                <span># True only if this pith shallowly satisfies this hint.</span>
                <span>isinstance</span>(<span>__beartype_pith_1</span> <span>:=</span> <span>__beartype_pith_0</span>[<span>__beartype_random_int</span> <span>%</span> <span>len</span>(<span>__beartype_pith_0</span>)], <span>list</span>) <span>and</span>
                <span># True only if either this pith is empty *OR* this pith is</span>
                <span># both non-empty and deeply satisfies this hint.</span>
                (<span>not</span> <span>__beartype_pith_1</span> <span>or</span> (
                    <span># True only if this pith shallowly satisfies this hint.</span>
                    <span>isinstance</span>(<span>__beartype_pith_2</span> <span>:=</span> <span>__beartype_pith_1</span>[<span>__beartype_random_int</span> <span>%</span> <span>len</span>(<span>__beartype_pith_1</span>)], <span>list</span>) <span>and</span>
                    <span># True only if either this pith is empty *OR* this pith is</span>
                    <span># both non-empty and deeply satisfies this hint.</span>
                    (<span>not</span> <span>__beartype_pith_2</span> <span>or</span> <span>isinstance</span>(<span>__beartype_pith_2</span>[<span>__beartype_random_int</span> <span>%</span> <span>len</span>(<span>__beartype_pith_2</span>)], <span>str</span>))
                ))
            ))
        ):
            <span>__beartype_raise_pep_call_exception</span>(
                <span>func</span><span>=</span><span>__beartype_func</span>,
                <span>pith_name</span><span>=</span><span>&#39;pull_thorns_from_all_wolves_paws&#39;</span>,
                <span>pith_value</span><span>=</span><span>__beartype_pith_0</span>,
            )

    <span># Call this function with all passed parameters and return the value</span>
    <span># returned from this call.</span>
    <span>return</span> <span>__beartype_func</span>(<span>*</span><span>args</span>, <span>**</span><span>kwargs</span>)</pre></div>
<p dir="auto">We are now well beyond the deep end, where the benthic zone and the cruel
denizens of the fathomless void begins. Let&#39;s dismantle this pascal by pascal:</p>
<ul dir="auto">
<li><code>__beartype_pith_1 := __beartype_pith_0[__beartype_random_int %
len(__beartype_pith_0)]</code>, a <a href="https://www.python.org/dev/peps/pep-0572" rel="nofollow">PEP 572</a>-style assignment expression
localizing repeatedly accessed random items of the first nested list for
efficiency.</li>
<li><code>__beartype_pith_2 := __beartype_pith_1[__beartype_random_int %
len(__beartype_pith_1)]</code>, a similar expression localizing repeatedly
accessed random items of the second nested list.</li>
<li>The same <code>__beartype_random_int</code> pseudo-randomly indexes all three lists.</li>
<li>Under older Python interpreters lacking <a href="https://www.python.org/dev/peps/pep-0572" rel="nofollow">PEP 572</a> support, <code>@beartype</code>
generates equally valid (albeit less efficient) code repeating each
nested list item access.</li>
</ul>
<p dir="auto">In the kingdom of the linear-time runtime type checkers, the constant-time
runtime type checker really stands out like a sore giant squid, doesn&#39;t it?</p>
<p dir="auto">See the <a href="#developers">Developers</a> section for further commentary on runtime optimization from
the higher-level perspective of architecture and internal API design.</p>
<a name="user-content-developers"></a>
<h2 dir="auto"><a id="user-content-developers" aria-hidden="true" href="#developers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id78">Developers</a></h2>
<p dir="auto">Let&#39;s contribute <a href="https://github.com/beartype/beartype/pulls">pull requests</a> to <code>beartype</code> for the
good of <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">typing</a>. The <a href="https://github.com/leycec">primary maintainer of this repository is a friendly
beardless Canadian guy</a> who guarantees that he will <em>always</em> be
nice and congenial and promptly merge all requests that pass continuous
integration (CI) tests.</p>
<p dir="auto">And thanks for merely reading this! Like all open-source software, <code>beartype</code>
thrives on community contributions, activity, and interest. <em>This means you,
stalwart Python hero.</em></p>
<p dir="auto"><code>beartype</code> has <a href="#moar-depth">two problem spots (listed below in order of decreasing
importance and increasing complexity)</a> that could <em>always</em>
benefit from a volunteer army of good GitHub Samaritans.</p>
<a name="user-content-workflow"></a>
<h3 dir="auto"><a id="user-content-workflow" aria-hidden="true" href="#workflow"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id79">Workflow</a></h3>
<p dir="auto">Let&#39;s take this from the top.</p>
<ol dir="auto">
<li><p dir="auto">Create a <a href="https://github.com/join">GitHub user account</a>.</p>
</li>
<li><p dir="auto">Login to <a href="https://github.com/login">GitHub with that account</a>.</p>
</li>
<li><p dir="auto"><strong>Click the &#34;Fork&#34; button</strong> in the upper right-hand corner of <a href="https://github.com/beartype/beartype">the
&#34;beartype/beartype&#34; repository page</a>.</p>
</li>
<li><p dir="auto"><strong>Click the &#34;Code&#34; button</strong> in the upper right-hand corner of your fork page
that appears.</p>
</li>
<li><p dir="auto"><strong>Copy the URL</strong> that appears.</p>
</li>
<li><p dir="auto"><strong>Open a terminal.</strong></p>
</li>
<li><p dir="auto"><strong>Change to the desired parent directory</strong> of your local fork.</p>
</li>
<li><p dir="auto"><strong>Clone your fork,</strong> replacing <code>{URL}</code> with the previously copied URL.</p>

</li>
<li><p dir="auto"><strong>Add a new remote</strong> referring to this upstream repository.</p>
<div data-snippet-clipboard-copy-content="git remote add upstream https://github.com/beartype/beartype.git
"><pre>git remote add upstream https://github.com/beartype/beartype.git</pre></div>
</li>
<li><p dir="auto"><strong>Uninstall all previously installed versions</strong> of <code>beartype</code>. For
example, if you previously installed <code>beartype</code> with <code>pip</code>, manually
uninstall <code>beartype</code> with <code>pip</code>.</p>

</li>
<li><p dir="auto">Install <code>beartype</code> with <code>pip</code> in <strong>editable mode.</strong> This synchronizes
changes made to your fork against the <code>beartype</code> package imported in
Python. Note the <code>[dev]</code> extra installs developer-specific mandatory
dependencies required at test or documentation time.</p>

</li>
<li><p dir="auto"><strong>Create a new branch</strong> to isolate changes to, replacing <code>{branch_name}</code>
with the desired name.</p>
<div data-snippet-clipboard-copy-content="git checkout -b {branch_name}
"><pre>git checkout -b {branch_name}</pre></div>
</li>
<li><p dir="auto"><strong>Make changes to this branch</strong> in your favourite <a href="https://en.wikipedia.org/wiki/Integrated_development_environment" rel="nofollow">Integrated Development
Environment (IDE)</a>. Of course, this means <a href="https://www.vim.org" rel="nofollow">Vim</a>.</p>
</li>
<li><p dir="auto"><strong>Test these changes.</strong> Note this command assumes you have installed <em>all</em>
<a href="#features">major versions of both CPython and PyPy supported by the next stable
release of beartype you are hacking on</a>. If this is <em>not</em> the
case, install these versions with <a href="https://operatingops.org/2020/10/24/tox-testing-multiple-python-versions-with-pyenv" rel="nofollow">pyenv</a>. This is vital, as type hinting
support varies significantly between major versions of different Python
interpreters.</p>

<p dir="auto">The resulting output should ideally be suffixed by a synopsis resembling:</p>
<pre>________________________________ summary _______________________________
py36: commands succeeded
py37: commands succeeded
py38: commands succeeded
py39: commands succeeded
pypy36: commands succeeded
pypy37: commands succeeded
congratulations :)
</pre>
</li>
<li><p dir="auto"><strong>Stage these changes.</strong></p>

</li>
<li><p dir="auto"><strong>Commit these changes.</strong></p>

</li>
<li><p dir="auto"><strong>Push these changes</strong> to your remote fork.</p>

</li>
<li><p dir="auto"><strong>Click the &#34;Create pull request&#34; button</strong> in the upper right-hand corner of
your fork page.</p>
</li>
<li><p dir="auto">Afterward, <strong>routinely pull upstream changes</strong> to avoid desynchronization
with <a href="https://github.com/beartype/beartype">the &#34;beartype/beartype&#34; repository</a>.</p>
<div data-snippet-clipboard-copy-content="git checkout main &amp;&amp; git pull upstream main
"><pre>git checkout main <span>&amp;&amp;</span> git pull upstream main</pre></div>
</li>
</ol>
<a name="user-content-moar-depth"></a>
<h3 dir="auto"><a id="user-content-moar-depth" aria-hidden="true" href="#moar-depth"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id80">Moar Depth</a></h3>
<p dir="auto">So, you want to help <code>beartype</code> deeply type-check even <em>more</em> type hints than
she already does? Let us help you help us, because you are awesome.</p>
<p dir="auto">First, an egregious lore dump. It&#39;s commonly assumed that <code>beartype</code> only
internally implements a single type-checker. After all, every <em>other</em> static
and runtime type-checker only internally implements a single type-checker.
Why would a type-checker internally implement several divergent overlapping
type-checkers and... what would that even mean? Who would be so vile, cruel,
and sadistic as to do something like that?</p>
<p dir="auto"><em>We would.</em> <code>beartype</code> often violates assumptions. This is no exception.
Externally, of course, <code>beartype</code> presents itself as a single type-checker.
Internally, <code>beartype</code> is implemented as a two-phase series of orthogonal
type-checkers. Why? Because efficiency, which is the reason we are all here.
These type-checkers are (in the order that callables decorated by <code>beartype</code>
perform them at runtime):</p>
<ol dir="auto">
<li><strong>Testing phase.</strong> In this fast first pass, each callable decorated by
<code>@beartype</code> only <em>tests</em> whether all parameters passed to and values
returned from the current call to that callable satisfy all type hints
annotating that callable. This phase does <em>not</em> raise human-readable
exceptions (in the event that one or more parameters or return values fails
to satisfy these hints). <code>@beartype</code> highly optimizes this phase by
dynamically generating one wrapper function wrapping each decorated callable
with unique pure-Python performing these tests in O(1) constant-time. This
phase is <em>always</em> unconditionally performed by code dynamically generated
and returned by:<ul dir="auto">
<li>The fast-as-lightning <code>pep_code_check_hint()</code> function declared in the
<a href="https://github.com/beartype/beartype/blob/main/beartype/_decor/_code/_pep/_pephint.py">&#34;beartype._decor._code._pep._pephint&#34; submodule</a>,
which generates memoized O(1) code type-checking an arbitrary object
against an arbitrary PEP-compliant type hint by iterating over all child
hints nested in that hint with a highly optimized breadth-first search
(BFS) leveraging extreme caching, fragile cleverness, and other salacious
micro-optimizations.</li>
</ul>
</li>
<li><strong>Error phase.</strong> In this slow second pass, each call to a callable decorated
by <code>@beartype</code> that fails the fast first pass (due to one or more
parameters or return values failing to satisfy these hints) recursively
discovers the exact underlying cause of that failure and raises a
human-readable exception precisely detailing that cause. <code>@beartype</code> does
<em>not</em> optimize this phase whatsoever. Whereas the implementation of the
first phase is uniquely specific to each decorated callable and constrained
to O(1) constant-time non-recursive operation, the implementation of the
second phase is generically shared between all decorated callables and
generalized to O(n) linear-time recursive operation. Efficiency no longer
matters when you&#39;re raising exceptions. Exception handling is slow in any
language and doubly slow in <a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> (and mostly interpreted)
languages like Python, which means that performance is mostly a non-concern
in &#34;cold&#34; code paths guaranteed to raise exceptions. This phase is only
<em>conditionally</em> performed when the first phase fails by:<ul dir="auto">
<li>The slow-as-molasses <code>raise_pep_call_exception()</code> function declared in
the <a href="https://github.com/beartype/beartype/blob/main/beartype/_decor/_code/_pep/_error/errormain.py">&#34;beartype._decor._error.errormain&#34; submodule</a>, which generates human-readable exceptions after
performing unmemoized O(n) type-checking of an arbitrary object against a
PEP-compliant type hint by recursing over all child hints nested in that
hint with an unoptimized recursive algorithm prioritizing debuggability,
readability, and maintainability.</li>
</ul>
</li>
</ol>
<p dir="auto">This separation of concerns between performant O(1) <em>testing</em> on the one hand
and perfect O(n) <em>error handling</em> on the other preserves both runtime
performance and readable errors at a cost of developer pain. This is good!
<sup>...what?</sup></p>
<p dir="auto">Secondly, the same separation of concerns also complicates the development of
<code>@beartype</code>. This is bad. Since <code>@beartype</code> internally implements two
divergent type-checkers, deeply type-checking a new category of type hint
requires adding that support to (wait for it) two divergent type-checkers –
which, being fundamentally distinct codebases sharing little code in common,
requires violating the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" rel="nofollow">Don&#39;t Repeat Yourself (DRY) principle</a> by
reinventing the wheel in the second type-checker. Such is the high price of
high-octane performance. You probably thought this would be easier and funner.
So did we.</p>
<p dir="auto">Thirdly, this needs to be tested. After surmounting the above roadblocks by
deeply type-checking that new category of type hint in <em>both</em> type-checkers,
you&#39;ll now add one or more unit tests exhaustively exercising that checking.
Thankfully, we already did all of the swole lifting for you. All <em>you</em> need to
do is add at least one PEP-compliant type hint, one object satisfying that
hint, and one object <em>not</em> satisfying that hint to:</p>
<ul dir="auto">
<li>A new <code>PepHintMetadata</code> object in the existing tuple passed to the
<code>data_module.HINTS_PEP_META.extend(...)</code> call in the existing test data
submodule for this PEP residing under the
<a href="https://github.com/beartype/beartype/blob/main/beartype_test/unit/data/hint/pep/proposal">&#34;beartype_test.unit.data.hint.pep.proposal&#34; subpackage</a>. For example, if this is a <a href="https://www.python.org/dev/peps/pep-0484" rel="nofollow">PEP 484</a>-compliant type hint, add that
hint and associated metadata to the
<a href="https://github.com/beartype/beartype/blob/main/beartype_test/unit/data/hint/pep/proposal/data_hintpep484.py">&#34;beartype_test.unit.data.hint.pep.proposal.data_hintpep484&#34; submodule</a>.</li>
</ul>
<p dir="auto">You&#39;re done! <em>Praise Guido.</em></p>
<a name="user-content-moar-compliance"></a>
<h3 dir="auto"><a id="user-content-moar-compliance" aria-hidden="true" href="#moar-compliance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id81">Moar Compliance</a></h3>
<p dir="auto">So, you want to help <code>beartype</code> comply with even <em>more</em> <a href="https://www.python.org/dev/peps" rel="nofollow">Python Enhancement
Proposals (PEPs)</a> than she already complies with? Let us help you
help us, because you are young and idealistic and you mean well.</p>
<p dir="auto">You will need a spare life to squander. A clone would be most handy. In short,
you will want to at least:</p>
<ul dir="auto">
<li>Define a new utility submodule for this PEP residing under the
<a href="https://github.com/beartype/beartype/blob/main/beartype/_util/hint/pep/proposal">&#34;beartype._util.hint.pep.proposal&#34; subpackage</a>
implementing general-purpose validators, testers, getters, and other
ancillary utility functions required to detect and handle <em>all</em> type hints
compliant with this PEP. For efficiency, utility functions performing
iteration or other expensive operations should be memoized via our internal
<a href="https://github.com/beartype/beartype/blob/main/beartype/_util/cache/utilcachecall.py">@callable_cached</a> decorator.</li>
<li>Define a new data utility submodule for this PEP residing under the
<a href="https://github.com/beartype/beartype/blob/main/beartype/_util/hint/data/pep/proposal">&#34;beartype._util.data.hint.pep.proposal&#34; subpackage</a> adding various signs (i.e., arbitrary objects uniquely identifying
type hints compliant with this PEP) to various global variables defined by
the parent <a href="https://github.com/beartype/beartype/blob/main/_beartypeutildatapepparent">&#34;beartype._util.data.hint.pep.utilhintdatapep&#34; submodule</a>.</li>
<li>Define a new test data submodule for this PEP residing under the
<a href="https://github.com/beartype/beartype/blob/main/beartype_test/unit/data/hint/pep/proposal">&#34;beartype_test.unit.data.hint.pep.proposal&#34; subpackage</a>.</li>
</ul>
<p dir="auto">You&#39;re probably not done by a long shot! But the above should at least get you
fitfully started, though long will you curse our names. <em>Praise Cleese.</em></p>
<a name="user-content-license"></a>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id82">License</a></h2>
<p dir="auto"><code>beartype</code> is <a href="https://github.com/beartype/beartype/blob/main/LICENSE">open-source software released</a> under the
<a href="https://opensource.org/licenses/MIT" rel="nofollow">permissive MIT license</a>.</p>
<a name="user-content-funding"></a>
<h2 dir="auto"><a id="user-content-funding" aria-hidden="true" href="#funding"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id83">Funding</a></h2>
<p dir="auto"><code>beartype</code> is currently financed as a purely volunteer open-source project –
which is to say, it&#39;s unfinanced. Prior funding sources (<em>yes, they once
existed</em>) include:</p>
<ol dir="auto">
<li>A <a href="https://www.alleninstitute.org/what-we-do/frontiers-group/news-press/press-resources/press-releases/paul-g-allen-frontiers-group-announces-allen-discovery-center-tufts-university" rel="nofollow">Paul Allen Discovery Center award</a> from the <a href="https://www.alleninstitute.org/what-we-do/frontiers-group" rel="nofollow">Paul G. Allen Frontiers
Group</a> under the administrative purview of the <a href="http://www.alleninstitute.org/what-we-do/frontiers-group/discovery-centers/allen-discovery-center-tufts-university" rel="nofollow">Paul Allen Discovery
Center</a> at <a href="https://www.tufts.edu" rel="nofollow">Tufts University</a> over the period 2015—2018 preceding the
untimely death of <a href="https://en.wikipedia.org/wiki/Paul_Allen" rel="nofollow">Microsoft co-founder Paul Allen</a>, during
which <code>beartype</code> was maintained as the private <code>@type_check</code> decorator
in the <a href="https://gitlab.com/betse/betse" rel="nofollow">Bioelectric Tissue Simulation Engine (BETSE)</a>.
<sup>Phew!</sup></li>
</ol>
<a name="user-content-authors"></a>
<h2 dir="auto"><a id="user-content-authors" aria-hidden="true" href="#authors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id84">Authors</a></h2>
<p dir="auto"><code>beartype</code> is developed with the grateful assistance of a volunteer community
of enthusiasts, including (<em>in chronological order of issue or pull request</em>):</p>
<ol dir="auto">
<li><a href="https://github.com/leycec">Cecil Curry (@leycec)</a>. <sup>Hi! It&#39;s me.</sup> From
beartype&#39;s early gestation as a nondescript <code>@type_check</code> decorator
in the <a href="https://gitlab.com/betse/betse" rel="nofollow">Bioelectric Tissue Simulation Engine (BETSE)</a> to its
general-audience release as a <a href="#install">public package supported across multiple
Python and platform-specific package managers</a>, I shepherd the
fastest, hardest, and deepest runtime type-checking solution in any
<a href="https://en.wikipedia.org/wiki/Type_system" rel="nofollow">dynamically-typed</a> language towards a well-typed future of PEP-compliance
and boundless quality assurance. <em>Cue epic taiko drumming.</em></li>
<li><a href="https://github.com/felix-hilden">Felix Hildén (@felix-hilden)</a>, the Finnish <a href="https://en.wikipedia.org/wiki/Computer_vision" rel="nofollow">computer
vision</a> expert world-renowned for his effulgent fun-loving disposition
<em>and</em>:<ul dir="auto">
<li><a href="https://github.com/beartype/beartype/issues/8#issuecomment-760103474">Branding beartype with the Logo of the Decade</a>, say nine out of ten Finnish brown bears. &#34;The other bears
are just jelly,&#34; claims Hildén.</li>
<li><a href="https://github.com/beartype/beartype/pull/8">Documenting beartype with its first Sphinx-based directory structure</a>.</li>
<li><a href="https://github.com/beartype/beartype/pull/9">Configuring that structure for Read The Docs (RTD)-friendly rendering</a>.</li>
</ul>
</li>
<li><a href="https://github.com/harens">@harens</a>, the boisterous London developer acclaimed for his
defense of British animals that quack pridefully as they peck you in city
parks <em>as well as</em>:<ul dir="auto">
<li><a href="https://github.com/beartype/beartype/pull/26">Renovating beartype for conformance with both static type checking under</a> <a href="http://mypy-lang.org" rel="nofollow">mypy</a> and <a href="https://www.python.org/dev/peps/pep-0561" rel="nofollow">PEP 561</a>.</li>
<li>Maintaining our first third-party packages:<ul dir="auto">
<li><a href="https://github.com/beartype/homebrew-beartype">A macOS-specific Homebrew tap predicted to solve all your problems</a>.</li>
<li><a href="https://ports.macports.org/port/py-beartype" rel="nofollow">A macOS-specific MacPorts Portfile expected to solve even more problems</a>.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/Heliotrop3">@Heliotrop3</a>, the <a href="https://en.wikipedia.org/wiki/Heliotropium" rel="nofollow">perennial flowering plant genus from
Peru</a> whose &#34;primal drive for ruthless efficiency makes
overcoming these opportunities for growth [<em>and incoming world conquest</em>]
inevitable&#34; as well as:<ul dir="auto">
<li><a href="https://github.com/beartype/beartype/pull/19">Introspecting human-readable labels from arbitrary callables</a>.</li>
<li>Improving quality assurance across internal:<ul dir="auto">
<li><a href="https://github.com/beartype/beartype/pull/15">Caching data structures</a>.</li>
<li><a href="https://github.com/beartype/beartype/pull/24">String munging utilities</a>.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/posita">@posita</a>, the superpositive code luminary of superpositional
genius status singularly responsible for:<ul dir="auto">
<li><a href="https://github.com/beartype/beartype/pull/26">Generalizing &#34;NotImplemented&#34; support to non-boolean binary dunder
methods</a>.</li>
</ul>
</li>
</ol>
<a name="user-content-see-also"></a>
<h2 dir="auto"><a id="user-content-see-also" aria-hidden="true" href="#see-also"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id85">See Also</a></h2>
<p dir="auto">External <code>beartype</code> resources include:</p>
<ul dir="auto">
<li><a href="https://libraries.io/pypi/beartype/dependents" rel="nofollow">This list of all open-source PyPI-hosted dependents of this package</a> (i.e., third-party packages requiring <code>beartype</code>
as a runtime dependency), kindly furnished by the <a href="https://libraries.io" rel="nofollow">Libraries.io package
registry</a>.</li>
</ul>
<p dir="auto">Related type-checking resources include:</p>
<a name="user-content-runtime-type-checkers"></a>
<h3 dir="auto"><a id="user-content-runtime-type-checkers" aria-hidden="true" href="#runtime-type-checkers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id86">Runtime Type Checkers</a></h3>
<p dir="auto"><strong>Runtime type checkers</strong> (i.e., third-party Python packages dynamically
validating callables annotated by type hints at runtime, typically via
decorators, function calls, and import hooks) include:</p>
<table>






<thead>
<tr><th>package</th>
<th>active</th>
<th>PEP-compliant</th>
<th>time multiplier <a href="#speed" id="user-content-id3">[3]</a></th>
</tr>
</thead>
<tbody>
<tr><td><code>beartype</code></td>
<td><strong>yes</strong></td>
<td><strong>yes</strong></td>
<td>1 ✕ <code>beartype</code></td>
</tr>
<tr><td><a href="https://github.com/RussBaz/enforce">enforce</a></td>
<td>no</td>
<td><strong>yes</strong></td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://github.com/matchawine/python-enforce-typing">enforce_typing</a></td>
<td>no</td>
<td><strong>yes</strong></td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://pydantic-docs.helpmanual.io" rel="nofollow">pydantic</a></td>
<td><strong>yes</strong></td>
<td>no</td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://github.com/Stewori/pytypes">pytypes</a></td>
<td>no</td>
<td><strong>yes</strong></td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://github.com/k2bd/typen">typeen</a></td>
<td>no</td>
<td>no</td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://github.com/seandstewart/typical">typical</a></td>
<td><strong>yes</strong></td>
<td><strong>yes</strong></td>
<td><em>unknown</em></td>
</tr>
<tr><td><a href="https://github.com/agronholm/typeguard">typeguard</a></td>
<td>no</td>
<td><strong>yes</strong></td>
<td>20 ✕ <code>beartype</code></td>
</tr>
</tbody>
</table>
<table id="user-content-speed">

<tbody>
<tr><td><a href="#id3">[3]</a></td><td><p dir="auto">The <em>time multliplier</em> column approximates <strong>how much slower on average
than</strong> <code>beartype</code> <strong>that checker is</strong> as <a href="#timings">timed by our profile suite</a>. A time multiplier of:</p>
<ul dir="auto">
<li>&#34;1&#34; means that checker is approximately as fast as <code>beartype</code>, which
means that checker is probably <code>beartype</code> itself.</li>
<li>&#34;20&#34; means that checker is approximately twenty times slower than
<code>beartype</code> on average.</li>
</ul>
</td></tr>
</tbody>
</table>
<p dir="auto">Like <a href="#static-type-checkers">static type checkers</a>, runtime type checkers
<em>always</em> require callables to be annotated by type hints. Unlike <a href="#static-type-checkers">static type
checkers</a>, runtime type checkers do <em>not</em> necessarily
comply with community standards; although some do require callers to annotate
callables with strictly PEP-compliant type hints, others permit or even require
callers to annotate callables with PEP-noncompliant type hints. Runtime type
checkers that do so violate:</p>
<ul dir="auto">
<li><p dir="auto"><a href="https://www.python.org/dev/peps/pep-0561" rel="nofollow">PEP 561 -- Distributing and Packaging Type Information</a>, which
requires callables to be annotated with strictly PEP-compliant type hints.
Packages violating <a href="https://www.python.org/dev/peps/pep-0561" rel="nofollow">PEP 561</a> even once cannot be type-checked with <a href="#static-type-checkers">static
type checkers</a> (e.g., <a href="http://mypy-lang.org" rel="nofollow">mypy</a>), unless each such
violation is explicitly ignored with a checker-specific filter (e.g., with a
<a href="http://mypy-lang.org" rel="nofollow">mypy</a>-specific inline type comment).</p>
</li>
<li><p dir="auto"><a href="https://www.python.org/dev/peps/pep-0563" rel="nofollow">PEP 563 -- Postponed Evaluation of Annotations</a>, which
explicitly deprecates PEP-noncompliant type hints:</p>
<blockquote>
<p dir="auto">With this in mind, <strong>uses for annotations incompatible with the
aforementioned PEPs</strong> <em>[i.e., PEPs 484, 544, 557, and 560]</em> <strong>should be
considered deprecated.</strong></p>
</blockquote>
</li>
</ul>
<a name="user-content-runtime-data-validators"></a>
<h3 dir="auto"><a id="user-content-runtime-data-validators" aria-hidden="true" href="#runtime-data-validators"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id87">Runtime Data Validators</a></h3>
<p dir="auto"><strong>Runtime data validators</strong> (i.e., third-party Python packages dynamically
validating callables decorated by caller-defined contracts, constraints, and
validation routines at runtime) include:</p>
<ul dir="auto">
<li><a href="https://github.com/AlexandruBurlacu/pycontracts">PyContracts</a>.</li>
<li><a href="https://pypi.org/project/contracts" rel="nofollow">contracts</a>.</li>
<li><a href="https://github.com/kisielk/covenant">covenant</a>.</li>
<li><a href="https://pypi.org/project/dpcontracts" rel="nofollow">dpcontracts</a>.</li>
<li><a href="https://github.com/Parquery/icontract">icontract</a>.</li>
<li><a href="https://pypi.org/project/pcd" rel="nofollow">pcd</a>.</li>
<li><a href="https://pypi.org/project/pyadbc" rel="nofollow">pyadbc</a>.</li>
</ul>
<p dir="auto">Unlike both <a href="#runtime-type-checkers">runtime type checkers</a> and <a href="#static-type-checkers">static type
checkers</a>, most runtime data validators do <em>not</em>
require callables to be annotated by type hints. Like some <a href="#runtime-type-checkers">runtime type
checkers</a>, most runtime data validators do <em>not</em>
comply with community standards but instead require callers to either:</p>
<ul dir="auto">
<li>Decorate callables with package-specific decorators.</li>
<li>Annotate callables with package-specific and thus PEP-noncompliant type
hints.</li>
</ul>
<a name="user-content-static-type-checkers"></a>
<h3 dir="auto"><a id="user-content-static-type-checkers" aria-hidden="true" href="#static-type-checkers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="#id88">Static Type Checkers</a></h3>
<p dir="auto"><strong>Static type checkers</strong> (i.e., third-party tooling validating Python callable
and/or variable types across an application stack at static analysis time
rather than Python runtime) include:</p>
<ul dir="auto">
<li><a href="http://mypy-lang.org" rel="nofollow">mypy</a>.</li>
<li><a href="https://pyre-check.org" rel="nofollow">Pyre</a>, published by FaceBook. <sup>...yah.</sup></li>
<li><a href="https://github.com/Microsoft/pyright">pyright</a>, published by Microsoft.</li>
<li><a href="https://github.com/google/pytype">pytype</a>, published by Google.</li>
</ul>

</article>
        </div></div>
  </body>
</html>
