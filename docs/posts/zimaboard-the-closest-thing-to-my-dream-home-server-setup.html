<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/">Original</a>
    <h1>Zimaboard: The closest thing to my dream home server setup</h1>
    
    <div id="readability-page-1" class="page"><div>
      
      <p>I stumbled upon <a href="https://youtu.be/V_ZdvrIMKEQ">this Hardware Haven video about the Zimaboard recently.</a></p>
<p>I liked it a lot.</p>
<p>I finally bought one.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/cover.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/cover_hu2c08a0a24f9b2677477296053ae56db2_2448960_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
</figure>

<p>In short, <a href="https://www.zimaboard.com/zimaboard/product">Zimaboard</a> is a small single-board computer that is relatively affordable and comes
with an interesting selection of ports, which includes an exposed PCI Express port.</p>
<p>Before we get down to the build, here’s a list of aspects that I want to see in my dream home server:</p>
<ul>
<li>low power usage (2-15W typical power usage)</li>
<li>8GB of RAM or better</li>
<li>enough performance to run my workloads, most of which are containerized</li>
<li>2x SATA or NVMe SSD slots, plus option for a third drive for the OS</li>
<li>passively cooled and completely silent</li>
<li>compact size</li>
<li>gigabit Ethernet or better</li>
</ul>
<p>You might be thinking, “<em>Wait, that’s your <strong>dream setup</strong>? No clusters of machines, Threadrippers, 10 Gigabit networking, crazy number of disks?</em>”.
Well, yes. After years of trying all sorts of setups and learning about my home server usage patterns, this is the set of requirements that finds a balance between performance, efficiency
and silence.</p>
<h3 id="basics">Basics</h3>
<p>I recommend checking <a href="https://www.zimaboard.com/zimaboard/product">the product page</a> to see the exact specifications.
The configuration I bought was the 832 model: 8GB of RAM, 32GB of eMMC storage and a quad-core Intel Celeron N3450 CPU.
It’s not the most powerful setup or even a recent one with the CPU being from 2016, but it’s just powerful enough to fit
my needs.</p>
<p>This variant of the board costs 200 USD, but other configurations cost much less
than that, I just needed the extra memory to be on the safe side. If you don’t
care about the noise and size aspect of home servers, then you can get a better
deal on the used market (<a href="https://www.servethehome.com/introducing-project-tinyminimicro-home-lab-revolution/">see the TinyMiniMicro project for inspiration)</a>,
but as you know by this point, I care about those aspects a lot.</p>
<h3 id="the-package">The package</h3>
<p>What sets the Zimaboard apart from other single board computers is how polished the product feels.
Unlike a board like the Raspberry Pi, this one comes with a case and a cooling setup
already attached to it. I suspect that a similarily configured Raspberry Pi 4/5
with all the accessories added on top would result in a price that’s quite
similar to the cost of a top-of-the-line Zimaboard.</p>
<p>The heatsink looks great and is practical at the same time.
Under the most torturous loads I could only see the CPU being around 72°C and due
to it being passively cooled it made absolutely no noise. With the case being
present, I do not have to worry about placing the board on my desk and scratching
the table or shorting something out.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/theboard.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/theboard_hu6c1b6a830bf3d559150de9b4726aa27f_3498380_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Just plop it wherever.

    </figcaption>
	
</figure>

<p>The board does not seem to have a power button, but by default it’s configured
to power on as soon as you connect the power supply, which is great if you’re
going to use this as a home server.</p>
<p>The box that the board was shipped survived and overall I’d say that the packaging
is good. The board comes with some stickers and a single SATA data+power cable.
The included power adapter comes with EU, US and UK plugs all included.</p>
<p>Shipping to Estonia was quite fast, taking just 10 days. The shipping costs were
18 USD.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/box.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/box_hu76da91a855cec7efe7cc445c706070f2_2144401_1024x0_resize_q80_box.jpg" width="1024" height="768"/>
    </a>
    
    <figcaption>
      
The box did its job.

    </figcaption>
	
</figure>

<h3 id="storage">Storage</h3>
<p>The included 32GB eMMC storage is fine for hosting your operating system. The
read speeds cap out at around 175 MB/s and the typical write speeds I observed
were around 50-100 MB/s. The storage is identified as <code>mmc-BJTD4R_0xc7d04e40</code> under
<code>/dev/disk/by-id/</code>, and searching online suggests that it’s a Samsung chip.</p>
<p>Because this board offers two SATA ports, I also added a SATA Y-cable to my order
(4 USD) so that I can take my existing Samsung 870 QVO 4TB SATA drives and move
my home server setup to this board.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/ycable.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/ycable_hu274ae1922594f3b973c5b875085287a1_3577750_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
SATA Y-cable in action.

    </figcaption>
	
</figure>

<p>Allegedly this cable can also be used to drive
two 3.5&#34; hard drives powered by the board itself according to <a href="https://shop.zimaboard.com/products/sata-y-cable-for-zimaboard-2-5-inch-hdd-3-5-inch-hdd-raid-free-nas-unraid">the shop page
for the Y-cable</a>, but I suspect that at that point you’ll be pushing the limits of
the 12V/3A power adapter.</p>
<p>There is also a white drive activity LED
placed near the SATA power connector on the board. Perhaps not for everyone, but I
like the aesthetic and the sight of the server doing server things.</p>
<p>The performance of the SATA ports is what you would expect. When performing
read operations on both SSD-s I saw the maximum total transfer rates hover around
900-950MB/s, which is pretty close to the SATA III transfer speed limit.</p>
<p>There is no native way to mount the two SATA drives to the Zimaboard. The creators
of the board do sell a metal bracket, but it doesn’t seem to integrate that well
to the board. However, <a href="https://www.printables.com/model/224057-zimaboard-dual-hdd-stand">there exists a 3D printable design that houses two
2.5&#34; drives, even 15mm ones</a>, and
that’s how I ended up using a 3D printer for the first time in my life.
The print was done using a <a href="https://wiki.k-space.ee/en/utilities/3D-Printer">Voron v2 Afterburner printer hosted at k-space</a>
and it came out pretty well.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-1.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-1_huf70380e185f90e159fc776b2831d9896_3078409_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Print in progress.

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-2.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-2_hu752c37d1e17753c6e343ccb4b873a65f_2168377_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
The final product

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-3.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-3_hu10c2dc0a06747a74e577cc516acca8dd_2202245_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Another angle.

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-4.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/3dprint-4_huf319adc4e48cc6a298722bcfb2e7e1c5_2316941_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Some 3D printing related inconsistencies, but nothing serious.

    </figcaption>
	
</figure>

<p>The SSD mounting holes were a bit finicky due
to slight printing errors, and during my first installation attempt I forgot to
put in the plastic middle layer of the case that’s between the PCB and the stock
bottom cover, but other than that the installation was a breeze.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/board-backside.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/board-backside_hu274ae1922594f3b973c5b875085287a1_3220963_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Installation of the caddy requires removing the stock backplate and splitting it.

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-1.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-1_hua9184edc251c38c0f11832201baa618f_2992666_1024x0_resize_q80_box.jpg" width="1024" height="768"/>
    </a>
    
    <figcaption>
      
The finished result.

    </figcaption>
	
</figure>

<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-2.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-2_hu06f0f4a327e982253f04ee2e79d40f70_1943488_1024x0_resize_q80_box.jpg" width="1024" height="768"/>
    </a>
    
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-3.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-3_huee34d1e5685f5eec5ce4dd6fd718bd5e_1955399_1024x0_resize_q80_box.jpg" width="1024" height="768"/>
    </a>
    
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-4.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-4_huc3f76dc845f779b66651336a37be1923_2389369_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-5.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-5_huaae2ce206b36cbc8496a7ca6fb8df953_2182946_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-6.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-6_hu274ae1922594f3b973c5b875085287a1_2559258_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-7.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/caddy-7_hu6005690906979ff4f13657485fce192e_1574253_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
</figure>

<p>The drives never hit above 64°C, which is absolutely okay for these SSD-s. I’m not
sure how actual spinning hard drives might fare in this environment, but I don’t
think that it’s going to be that serious because 2.5&#34; hard drives should not
generate as much heat in the first place.</p>
<h3 id="power-consumption">Power consumption</h3>
<p>What I love about this board is the power usage. At this point my home server
is not even the most power hungry component of my setup, that honor now goes
to the ISP-provided router/modem combo box that always draws at least 12W, even
when it’s in bridge mode.</p>
<p>Here are my power usage measurements (measured with a simple power meter):</p>
<ul>
<li>idle: 2.5W</li>
<li>no drives attached, CPU stress test (<code>stress -c 4</code>): 9.0W</li>
<li>one Samsung 870 QVO 4TB SSD attached, CPU stress test: 13.2W</li>
<li>2 SSD-s attached, typical power draw in my setup (~10-40% CPU usage): ~8-9W</li>
<li>2 SSD-s attached, max load on SSD-s and CPU: ~14W</li>
</ul>
<p>The Zimaboard, ISP modem/router box, my TP-Link router/Wi-Fi AP and my CyberPower
UPS all together use at most around 34W, all combined. That’s even less than
what my Dell monitor uses at reasonably low brightness levels!</p>
<p>These tests are not scientifically accurate, but they should give you an idea on what
power consumption numbers to expect when running this setup.</p>
<h3 id="performance">Performance</h3>
<p>I use a simple Prometheus Node Exporter + Grafana setup to view how much resources
my various servers use. My home server has lately either been an <a href="https://ounapuu.ee/2022/01/17/asrock-x300-future-of-desktops/">ASRock Deskmini X300 based setup</a> or
an <a href="https://ounapuu.ee/posts/2022/05/10/thinkpad-as-a-home-server/">old ThinkPad T430</a>, and something that both had in common was that the CPU usage was
generally very low, mostly at or below the 10% mark. There would be bursty loads
from time to time and backup processes running that bump that up, but not significantly.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/prom-old.png">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/prom-old_huea11d161badcce588cbed615ac1c56a1_132285_1024x0_resize_q80_box_3.png" width="1024" height="539"/>
    </a>
    
    <figcaption>
      
Typical CPU performance on a ThinkPad T430 acting as a home server.

    </figcaption>
	
</figure>

<p>Memory usage of my setup was also quite low, with all my services and containers
fitting into 2GB during typical usage. With this information and some CPU performance
comparisons done, I knew that the Zimaboard will likely be able to handle my home
server tasks.</p>
<p>This board is not very powerful, but if you mainly rely on containerized workloads
and can rely on Intel QuickSync to accelerate media transcodes, then you’ll be
just fine.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/prom-new.png">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/prom-new_hu9c391d9431a1ac152a2c6a20c90ec904_336307_1024x0_resize_q80_box_3.png" width="1024" height="539"/>
    </a>
    
    <figcaption>
      
Zimaboard CPU usage, which includes migrating filesystems, creating new multi-TB
backups from scratch and a lot of Jellyfin playback and GPU-accelerated transcoding.
Pretty much the worst case scenario for this board.

    </figcaption>
	
</figure>

<p>I was actually impressed with how well the GPU-accelerated transcode
worked on this machine once you set everything up properly.
If you’re running Linux and Jellyfin,
run <code>vainfo</code> to get a list of supported codecs and make sure that you have hardware
decoding selected for those in Jellyfin settings. Also enable hardware encoding.
I checked with <code>intel_gpu_top</code> to see if work was offloaded to the GPU and saw
activity there, which means that hardware acceleration for Jellyfin worked out great!
<a href="https://jellyfin.org/docs/general/administration/hardware-acceleration/">Check the Jellyfin hardware acceleration for more details on other requirements
that have to be met for all of this to work.</a></p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/jellyfin-qs-conf.png">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/jellyfin-qs-conf_hu43c0581b909067652f5756f1f94a087a_121374_1024x0_resize_q80_box_3.png" width="1024" height="1146"/>
    </a>
    
    <figcaption>
      
The Jellyfin QuickSync hardware acceleration config that works on my Zimaboard.
May not be 100% correct but so far have not encountered issues.

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/intel-gpu-top.png">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/intel-gpu-top_huea9f3ca46683dfd1ed036b99d4cb02af_34076_1024x0_resize_q80_box_3.png" width="1024" height="163"/>
    </a>
    
    <figcaption>
      
intel_gpu_top during Jellyfin transcoded media playback. 

    </figcaption>
	
</figure>

<h3 id="caveats">Caveats</h3>
<p>The Zimaboard does ship with a Linux-based OS called CasaOS. However, I had no
intention of using it as I know what my requirements are and my infrastructure
is already decently documented and set up via Ansible, which is why I can’t say
how good that experience is. I also did not test Windows 10 or 11.</p>
<p>During testing, I noticed that the USB 3 ports can act a bit weird. The Fedora
Server USB stick would not boot properly if connected to one of the USB ports,
and when doing other tests with external USB storage I noticed hiccups from time to time.
Not sure what might be the cause, but I’m writing it down nevertheless. It’s not
a dealbreaker for me luckily since I don’t rely much on the USB ports in typical use anyway.</p>
<p>I did not test the PCI Express port, simply because I don’t need it, yet. It’s
a great addition, though, and opens up plenty of modding capabilities in the
future.</p>
<h3 id="fedora-server-and-btrfs">Fedora Server and btrfs</h3>
<p>The Zimaboard gave me an opportunity to start fresh with my home server.</p>
<p>I made a leap: I’ve ditched ZFS and am now running
Fedora Server with my storage being on a btrfs RAID1 setup, snapshotted
and backed up using <a href="https://ounapuu.ee/posts/2022/07/09/btrbk-is-awesome/">btrbk</a>.
It was a bit tricky to migrate and set everything
up regarding backups and snapshotting, but I got it working.</p>
<p>ZFS is great, but it has always felt like an unwanted guest in the Linux ecosystem.
The kernel developers don’t care much for maintaining compatibility with ZFS since
it’s not in the kernel due to licensing issues, and Ubuntu has been one of the few
distros that actually ships a kernel that includes ZFS built in. I didn’t want
to be tied to Ubuntu forever, especially because of how they try to make <code>snap</code>
a thing. ZFS DKMS builds are generally okay on distros like Debian, but on
others you might find yourself not being able to access your data after a reboot
because of a kernel update.</p>
<p>btrfs has had some issues in the past, especially with the RAID5/6 setup, but
in my single and dual disk setups it has been solid for years, except for that one time around
2018-2019 when I ran btrfs RAID1 over USB storage. To be fair to btrfs, that
was a pretty stupid setup.</p>
<p>Before committing
to btrfs, I used two USB sticks to create a RAID1 setup and created real torture test scenarios.
Tests looked something like this:</p>
<ul>
<li>write a file to the filesystem</li>
<li>use <code>md5sum</code> to calculate a hash of it for verification purposes</li>
<li>completely wipe one USB drive with <code>dd</code></li>
<li>run <code>md5sum</code> to calculate the hash again (it matched every time)</li>
<li>run <code>btrfs scrub</code> on the filesystem to fix all errors</li>
<li>rinse and repeat with variations to this setup</li>
</ul>
<p>After doing all that, I was quite confident that this was going to work.</p>
<p>One thing to note with <code>btrfs</code>: if you’re running any type of multi-disk and
redundant setup like RAID1 or RAID10, then make sure to include the mount option
<code>degraded</code> in <code>/etc/fstab</code> so that you can still mount your filesystem if one or
more of your drives fail. If you lose too many drives then it’s still probably going to fail to boot.</p>
<p>Here’s my <code>/etc/fstab</code> setup to serve as an example:</p>
<pre tabindex="0"><code>LABEL=turbo /turbo      btrfs subvol=turbo,compress-force=zstd:1,ssd,degraded,nofail            0 0
</code></pre><p>When doing the migration I kept all the paths the same, and each ZFS dataset
was recreated using <code>btrfs</code> subvolumes, which is why this filesystem is mounted on a top-level folder.</p>
<h3 id="alternatives">Alternatives</h3>
<p>My notes for the next dream home server setup included a few candidates:</p>
<ul>
<li>the Zimaboard</li>
<li><a href="https://www.asustor.com/en/product?p_id=79">Asustor Flashstor 6</a> or <a href="https://www.asustor.com/en/product?p_id=80">Flashstor 12</a></li>
<li>a TinyMiniMicro style machine with at least two NVMe SSD slots</li>
</ul>
<p>The first two fall nicely into my requirements for the dream home server. I picked
the Zimaboard mainly because it’s much cheaper and I was already running two SATA SSD-s
for my home server storage, so migrating would be really easy and I would not
have to buy any new drives.</p>
<p>If large capacity SATA SSD-s start becoming less common and NVMe SSD-s become
even cheaper than they already are, then I’ll have to look into something like a Flashstor.</p>
<h3 id="conclusion">Conclusion</h3>
<p>Overall, I’m very happy with this purchase. The performance is just enough for
my services to work reasonably fast, the board uses very little power and it’s
silent, and it looks good on my wall.</p>






  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/wallsetup.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/wallsetup_hu147012bd2854d1f9428512f78d118e50_2529969_1024x0_resize_q80_box.jpg" width="1024" height="1365"/>
    </a>
    
    <figcaption>
      
Oh it&#39;s a setup it&#39;s a setup it&#39;s a setup 🎶

    </figcaption>
	
</figure>







  




<figure>
    <a href="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/cablegore.jpg">
	<img src="https://ounapuu.ee/posts/2023/10/09/zimaboard/media/cablegore_hu31ef052dce3896a81eccf0b787f8cd55_2097261_1024x0_resize_q80_box.jpg" width="1024" height="768"/>
    </a>
    
    <figcaption>
      
Managing the coax cable like this feels so wrong, and yet it works fine.

    </figcaption>
	
</figure>

<p>My setup is also quite flexible, so in case I need more resources, I can get
more Zimaboards and make them serve different purposes. However, it’s more likely
that I’m going to discover a new toy to experiment and play with by the time
I run out of resources on this one.</p>

<p>If you’re not a spammer,
<a href="mailto:ihavesomethoughtsonyourblog@ounapuu.ee">just send me an e-mail!</a></p>
<p>Places where you can discuss this post:</p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=37819114">Hacker News</a></li>
<li><a href="https://www.linkedin.com/posts/%F0%9F%94%A5-herman-%C3%B5unapuu-600516152_zimaboard-the-closest-thing-to-my-dream-activity-7117104232809345024-p4iP">LinkedIn</a></li>
<li><a href="https://forum.level1techs.com/t/hddhermans-blog/180788/36?u=hddherman">Level1Techs forum</a></li>
</ul>

    </div></div>
  </body>
</html>
