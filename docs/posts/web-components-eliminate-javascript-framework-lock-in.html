<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jakelazaroff.com/words/web-components-eliminate-javascript-framework-lock-in/">Original</a>
    <h1>Web Components Eliminate JavaScript Framework Lock-in</h1>
    
    <div id="readability-page-1" class="page"><div data-content="" data-astro-cid-rnrqlda2=""> 
<p>We’ve seen a lot of great posts about web components lately.
Many have focused on the burgeoning <a href="https://adactio.com/journal/20618" data-astro-cid-bi7aps5f="">HTML web components</a><a data-tooltip="" href="https://adactio.com/journal/20618" data-astro-cid-bi7aps5f=""> <img src="https://adactio.com/images/photo-300.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">HTML web components</span> <span data-astro-cid-bi7aps5f="">Don’t replace. Augment.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://adactio.com/icon.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">adactio.com/journal/20618</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> pattern, which eschews shadow DOM in favor of progressively enhancing existing markup.
There’s also been discussion — including <a href="https://jakelazaroff.com/words/web-components-will-outlive-your-javascript-framework/" data-astro-cid-bi7aps5f="">this post by yours truly</a><a data-tooltip="" href="https://jakelazaroff.com/words/web-components-will-outlive-your-javascript-framework/" data-astro-cid-bi7aps5f=""> <img src="https://jakelazaroff.com/og/web-components-will-outlive-your-javascript-framework.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Web Components Will Outlive Your JavaScript Framework | jakelazaroff.com</span> <span data-astro-cid-bi7aps5f="">If we&#39;re building things that we want to work in five or ten or even 20 years, we need to avoid dependencies and use the web with no layers in between.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://jakelazaroff.com/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">jakelazaroff.com/words/web-components-will-outlive-your-javascript-framework/</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> — about fully replacing JavaScript frameworks with web components.</p>
<p>Those aren’t the only options, though.
You can also use web components <em>in tandem</em> with JavaScript frameworks.
To that end, I want to talk about a key benefit that I haven’t seen mentioned as much: <strong>web components can dramatically loosen the coupling of JavaScript frameworks</strong>.</p>
<p>To prove it, we’re going to do something kinda crazy: build an app where <em>every single component</em> is written with a different framework.</p>
<p>It probably goes without saying that you should not build a real app like this!
But there <em>are</em> valid reasons for mixing frameworks.
Maybe you’re gradually migrating from React to Vue.
Maybe your app is built with Solid, but you want to use a third-party library that only exists as an Angular component.
Maybe you want to use Svelte for a few “islands of interactivity” in an otherwise static website.</p>
<p>Here’s what we’re going to create: a simple little todo app based loosely on <a href="https://todomvc.com" data-astro-cid-bi7aps5f="">TodoMVC</a><a data-tooltip="" href="https://todomvc.com" data-astro-cid-bi7aps5f=""> <img src="https://raw.github.com/tastejs/todomvc/gh-pages/site-assets/screenshot.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">TodoMVC</span> <span data-astro-cid-bi7aps5f="">Helping you select an MV* framework - Todo apps for Backbone.js, Ember.js, AngularJS, Spine and many more</span> <span data-astro-cid-bi7aps5f=""> <img src="https://todomvc.com/site-assets/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">todomvc.com</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</p>
<todo-demo show-layout="true" show-input="true" show-todos="true" show-filters="true"></todo-demo>

<p>As we build it, we’ll see how web components can <em>encapsulate</em> JavaScript frameworks, allowing us to use them without imposing broader constraints on the rest of the application.</p>
<h3 id="whats-a-web-component">What’s a Web Component?</h3>
<p>In case you’re not familiar with web components, here’s a brief primer on how they work.</p>
<p>First, we declare a subclass of <code>HTMLElement</code> in JavaScript. Let’s call it <code>MyComponent</code>:</p>
<pre><code><span>class</span> <span>MyComponent</span> <span>extends</span> <span>HTMLElement</span> <span>{</span>
  <span>constructor</span><span>(</span><span>)</span> <span>{</span>
    <span>super</span><span>(</span><span>)</span><span>;</span>
    <span>this</span><span>.</span>shadow <span>=</span> <span>this</span><span>.</span><span>attachShadow</span><span>(</span><span>{</span> <span>mode</span><span>:</span> <span>&#34;open&#34;</span> <span>}</span><span>)</span><span>;</span>
  <span>}</span>

  <span>connectedCallback</span><span>(</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>shadow<span>.</span>innerHTML <span>=</span> <span><span>`</span><span>
      &lt;p&gt;Hello from a web component!&lt;/p&gt;
      &lt;style&gt;
        p {
          color: pink;
          font-weight: bold;
          padding: 1rem;
          border: 4px solid pink;
        }
      &lt;/style&gt;
    </span><span>`</span></span><span>;</span>
  <span>}</span>
<span>}</span></code></pre>
<p>That call to <code>attachShadow</code> in the constructor makes our component use the <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" data-astro-cid-bi7aps5f="">shadow DOM</a><a data-tooltip="" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Using shadow DOM - Web APIs | MDN</span> <span data-astro-cid-bi7aps5f="">An important aspect of custom elements is encapsulation, because a custom element, by definition, is a piece of reusable functionality: it might be dropped into any web page and be expected to work. So it&#39;s important that code running in the page should not be able to accidentally break a custom element by modifying its internal implementation. Shadow DOM enables you to attach a DOM tree to an element, and have the internals of this tree hidden from JavaScript and CSS running in the page.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/favicon-48x48.cbbd161b.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>, which encapsulates the markup and styles inside our component from the rest of the page.
<code>connectedCallback</code> is called when the web component is actually connected to the DOM tree, rendering the HTML contents into the component’s “shadow root”.</p>
<p>This foreshadows how we’ll make our frameworks work with web components.<sup><a href="#user-content-fn-rimshot" id="user-content-fnref-rimshot" data-footnote-ref="" aria-describedby="footnote-label" data-astro-cid-bi7aps5f="">1</a></sup>
We normally “attach” frameworks to a DOM element, and let the framework take over <em>all</em> ancestors of that element.
With web components, we can attach the framework to the shadow root, which ensures that it can only access the component’s “shadow tree”.</p>
<p>Next, we define a custom element name for our <code>MyComponent</code> class:</p>
<pre><code>customElements<span>.</span><span>define</span><span>(</span><span>&#34;my-component&#34;</span><span>,</span> MyComponent<span>)</span><span>;</span></code></pre>
<p>Whenever a tag with that custom element name appears on the page, the corresponding DOM node is actually an instance of <code>MyComponent</code>!</p>
<pre><code><span><span><span>&lt;</span>my-component</span><span>&gt;</span></span><span><span><span>&lt;/</span>my-component</span><span>&gt;</span></span>
<span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
  <span>const</span> myComponent <span>=</span> document<span>.</span><span>querySelector</span><span>(</span><span>&#34;my-component&#34;</span><span>)</span><span>;</span>
  console<span>.</span><span>log</span><span>(</span>myComponent <span>instanceof</span> <span>MyComponent</span><span>)</span><span>;</span> 
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span></code></pre>
<p>Check it out:</p>
<my-component></my-component>

<p>There’s more to web components, but that’s enough to get you through the rest of the article.</p>
<h3 id="scaffolding-layout">Scaffolding Layout</h3>
<p>The entrypoint of our app will be a React component.<sup><a href="#user-content-fn-preact" id="user-content-fnref-preact" data-footnote-ref="" aria-describedby="footnote-label" data-astro-cid-bi7aps5f="">2</a></sup> Here’s our humble start:</p>
<pre><code>
<span>export</span> <span>default</span> <span>function</span> <span>TodoApp</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span><span><span>&lt;</span></span><span>&gt;</span></span><span><span><span>&lt;/</span></span><span>&gt;</span></span><span>;</span>
<span>}</span></code></pre>
<p>We could start adding elements here to block out the basic DOM structure, but I want to write another component for that to show how we can nest web components in the same way we nest framework components.</p>
<p>Most frameworks support composition via nesting like normal HTML elements.
From the outside, it usually looks something like this:</p>
<pre><code><span><span><span>&lt;</span><span>Card</span></span><span>&gt;</span></span><span>
  </span><span><span><span>&lt;</span><span>Avatar</span></span> <span>/&gt;</span></span><span>
</span><span><span><span>&lt;/</span><span>Card</span></span><span>&gt;</span></span></code></pre>
<p>On the inside, there are a few ways that frameworks handle this.
For example, React and Solid give you access to those children as a special <code>children</code> prop:</p>
<pre><code><span>function</span> <span>Card</span><span>(</span><span>props</span><span>)</span> <span>{</span>
  <span>return</span> <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>&#34;</span>card<span>&#34;</span></span><span>&gt;</span></span><span>{</span>props<span>.</span>children<span>}</span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>;</span>
<span>}</span></code></pre>
<p>With web components that use shadow DOM, we can do the same thing using the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot" data-astro-cid-bi7aps5f=""><code>&lt;slot&gt;</code> element</a><a data-tooltip="" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot" data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">&lt;slot&gt;: The Web Component Slot element - HTML: HyperText Markup Language | MDN</span> <span data-astro-cid-bi7aps5f="">The &lt;slot&gt; HTML element—part of the Web Components technology suite—is a placeholder inside a web component that you can fill with your own markup, which lets you create separate DOM trees and present them together.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/favicon-48x48.cbbd161b.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">developer.mozilla.org/en-US/docs/Web/HTML/Element/slot</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>. When the browser encounters a <code>&lt;slot&gt;</code>, it replaces it with the children of the web component.</p>
<p><code>&lt;slot&gt;</code> is actually more powerful than React or Solid’s <code>children</code>.
If we give each slot a <code>name</code> attribute, a web component can have multiple <code>&lt;slot&gt;</code>s, and we can determine where each nested element goes by giving it a <code>slot</code> attribute matching the <code>&lt;slot&gt;</code>’s <code>name</code>.</p>
<p>Let’s see what this looks like in practice.
We’ll write our layout component using <a href="https://www.solidjs.com" data-astro-cid-bi7aps5f="">Solid</a><a data-tooltip="" href="https://www.solidjs.com" data-astro-cid-bi7aps5f=""> <img src="https://www.solidjs.com/og.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">SolidJS</span> <span data-astro-cid-bi7aps5f="">Solid is a purely reactive library. It was designed from the ground up with a reactive core. It&#39;s influenced by reactive principles developed by previous libraries.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://www.solidjs.com/img/favicons/favicon-32x32.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">www.solidjs.com</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>:</p>
<pre><code>
<span>import</span> <span>{</span> render <span>}</span> <span>from</span> <span>&#34;solid-js/web&#34;</span><span>;</span>

<span>function</span> <span>TodoLayout</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>&#34;</span>wrapper<span>&#34;</span></span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>header</span> <span>class</span><span><span>=</span><span>&#34;</span>header<span>&#34;</span></span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;</span>slot</span> <span>name</span><span><span>=</span><span>&#34;</span>title<span>&#34;</span></span> <span>/&gt;</span></span><span>
        </span><span><span><span>&lt;</span>slot</span> <span>name</span><span><span>=</span><span>&#34;</span>filters<span>&#34;</span></span> <span>/&gt;</span></span><span>
      </span><span><span><span>&lt;/</span>header</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>div</span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;</span>slot</span> <span>name</span><span><span>=</span><span>&#34;</span>todos<span>&#34;</span></span> <span>/&gt;</span></span><span>
      </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>footer</span><span>&gt;</span></span><span>
        </span><span><span><span>&lt;</span>slot</span> <span>name</span><span><span>=</span><span>&#34;</span>input<span>&#34;</span></span> <span>/&gt;</span></span><span>
      </span><span><span><span>&lt;/</span>footer</span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span>

customElements<span>.</span><span>define</span><span>(</span>
  <span>&#34;todo-layout&#34;</span><span>,</span>
  <span>class</span> <span>extends</span> HTMLElement <span>{</span>
    <span>constructor</span><span>(</span><span>)</span> <span>{</span>
      <span>super</span><span>(</span><span>)</span><span>;</span>
      <span>this</span><span>.</span>shadow <span>=</span> <span>this</span><span>.</span><span>attachShadow</span><span>(</span><span>{</span> <span>mode</span><span>:</span> <span>&#34;open&#34;</span> <span>}</span><span>)</span><span>;</span>
    <span>}</span>

    <span>connectedCallback</span><span>(</span><span>)</span> <span>{</span>
      <span>render</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span><span><span>&lt;</span><span>TodoLayout</span></span> <span>/&gt;</span></span><span>,</span> <span>this</span><span>.</span>shadow<span>)</span><span>;</span>
    <span>}</span>
  <span>}</span>
<span>)</span><span>;</span></code></pre>
<p>There are two parts to our Solid web component: the web component wrapper at the top, and the actual Solid component at the bottom.</p>
<p>The most important thing to notice about the Solid component is that we’re using named <code>&lt;slot&gt;</code>s instead of the <code>children</code> prop.
Whereas <code>children</code> is handled by Solid and would only let us nest other Solid components, <code>&lt;slot&gt;</code>s are handled by the browser itself and will let us nest <em>any</em> HTML element — including web components written with other frameworks!</p>
<p>The web component wrapper is pretty similar to <a href="#whats-a-web-component" data-astro-cid-bi7aps5f="">the example above</a>.
It creates a shadow root in the constructor, and then renders the Solid component into it in the <code>connectedCallback</code> method.</p>
<p>Note that this is not a complete implementation of the web component wrapper!
At the very least, we’d probably want to define an <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Components/Using_custom_elements#responding_to_attribute_changes" data-astro-cid-bi7aps5f=""><code>attributeChangedCallback</code> method</a><a data-tooltip="" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Components/Using_custom_elements#responding_to_attribute_changes" data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Using custom elements - Web APIs | MDN</span> <span data-astro-cid-bi7aps5f="">One of the key features of web components is the ability to create custom elements: that is, HTML elements whose behavior is defined by the web developer, that extend the set of elements available in the browser.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/favicon-48x48.cbbd161b.png#responding_to_attribute_changes" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">developer.mozilla.org/en-US/docs/Web/API/Web_Components/Using_custom_elements#responding_to_attribute_changes</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> so we can re-render the Solid component when the attributes change.
If you’re using this in production, you should probably use a package Solid provides called <a href="https://www.npmjs.com/package/solid-element" data-astro-cid-bi7aps5f="">Solid Element</a><a data-tooltip="" href="https://www.npmjs.com/package/solid-element" data-astro-cid-bi7aps5f=""> <img src="https://static-production.npmjs.com/338e4905a2684ca96e08c7780fc68412.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">solid-element</span> <span data-astro-cid-bi7aps5f="">Webcomponents wrapper for Solid. Latest version: 1.8.0, last published: a month ago. Start using solid-element in your project by running `npm i solid-element`. There are 59 other projects in the npm registry using solid-element.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://static-production.npmjs.com/b0f1a8318363185cc2ea6a40ac23eeb2.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">www.npmjs.com/package/solid-element</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> that handles all this for you.</p>
<p>Back in our React app, we can now use our <code>TodoLayout</code> component:</p>
<pre><code>
<span>export</span> <span>default</span> <span>function</span> <span>TodoApp</span><span>(</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>todo-layout</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>h1</span> <span>slot</span><span><span>=</span><span>&#34;</span>title<span>&#34;</span></span><span>&gt;</span></span><span>Todos</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>todo-layout</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span></code></pre>
<p>Note that we don’t need to import anything from <code>TodoLayout.jsx</code> — we just use the custom element tag that we defined.</p>
<p>Check it out:</p>
<todo-demo show-layout="true"></todo-demo>

<p>That’s a React component rendering a Solid component, which takes a nested React element as a child.</p>
<h3 id="adding-todos">Adding Todos</h3>
<p>For the todo input, we’ll peel the onion back a bit further and write it with no framework at all!</p>
<pre><code>
customElements<span>.</span><span>define</span><span>(</span><span>&#34;todo-input&#34;</span><span>,</span> TodoInput<span>)</span><span>;</span>

<span>class</span> <span>TodoInput</span> <span>extends</span> <span>HTMLElement</span> <span>{</span>
  <span>constructor</span><span>(</span><span>)</span> <span>{</span>
    <span>super</span><span>(</span><span>)</span><span>;</span>
    <span>this</span><span>.</span>shadow <span>=</span> <span>this</span><span>.</span><span>attachShadow</span><span>(</span><span>{</span> <span>mode</span><span>:</span> <span>&#34;open&#34;</span> <span>}</span><span>)</span><span>;</span>
  <span>}</span>

  <span>connectedCallback</span><span>(</span><span>)</span> <span>{</span>
    <span>this</span><span>.</span>shadow<span>.</span>innerHTML <span>=</span> <span><span>`</span><span>
      &lt;form&gt;
        &lt;input name=&#34;text&#34; type=&#34;text&#34; placeholder=&#34;What needs to be done?&#34; /&gt;
      &lt;/form&gt;
    </span><span>`</span></span><span>;</span>

    <span>this</span><span>.</span>shadow<span>.</span><span>querySelector</span><span>(</span><span>&#34;form&#34;</span><span>)</span><span>.</span><span>addEventListener</span><span>(</span><span>&#34;submit&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>{</span>
      evt<span>.</span><span>preventDefault</span><span>(</span><span>)</span><span>;</span>
      <span>const</span> data <span>=</span> <span>new</span> <span>FormData</span><span>(</span>evt<span>.</span>target<span>)</span><span>;</span>

      <span>this</span><span>.</span><span>dispatchEvent</span><span>(</span><span>new</span> <span>CustomEvent</span><span>(</span><span>&#34;add&#34;</span><span>,</span> <span>{</span> <span>detail</span><span>:</span> data<span>.</span><span>get</span><span>(</span><span>&#34;text&#34;</span><span>)</span> <span>}</span><span>)</span><span>)</span><span>;</span>
      evt<span>.</span>target<span>.</span><span>reset</span><span>(</span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span></code></pre>
<p>Between this, the example web component and our Solid layout, you’re probably noticing a pattern: attach a shadow root and then render some HTML inside it.
Whether we hand-write the HTML or use a framework to generate it, the process is roughly the same.</p>
<p>Here, we’re using a <a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent" data-astro-cid-bi7aps5f="">custom event</a><a data-tooltip="" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent" data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/mdn-social-share.cd6c4a5a.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">CustomEvent - Web APIs | MDN</span> <span data-astro-cid-bi7aps5f="">The CustomEvent interface represents events initialized by an application for any purpose.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://developer.mozilla.org/favicon-48x48.cbbd161b.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">developer.mozilla.org/en-US/docs/Web/API/CustomEvent</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> to communicate with the parent component.
When the form is submitted, we dispatch an <code>add</code> event with the input text.</p>
<p>Event queues are often used to <a href="https://gameprogrammingpatterns.com/event-queue.html" data-astro-cid-bi7aps5f="">decouple communication</a><a data-tooltip="" href="https://gameprogrammingpatterns.com/event-queue.html" data-astro-cid-bi7aps5f="">  <span data-astro-cid-bi7aps5f="">Event Queue · Decoupling Patterns · Game Programming Patterns</span>  <span data-astro-cid-bi7aps5f=""> <img src="https://gameprogrammingpatterns.com/favicon-32x32.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">gameprogrammingpatterns.com/event-queue.html</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> between components of a software system.
Browsers lean heavily on events, and custom events in particular are an important tool in the web components toolbox — especially so because the custom element acts as a natural event bus that can be accessed from outside the web component.</p>
<p>Before we can continue adding components, we need to figure out how to handle our state.
For now, we’ll just keep it in our React <code>TodoApp</code> component.
Although we’ll eventually outgrow <code>useState</code>, it’s a perfect place to start.</p>
<p>Each todo will have three properties: an <code>id</code>, a <code>text</code> string describing it, and a <code>done</code> boolean indicating whether it’s been completed.</p>
<pre><code>
<span>import</span> <span>{</span> useCallback<span>,</span> useState <span>}</span> <span>from</span> <span>&#34;react&#34;</span><span>;</span>

<span>let</span> id <span>=</span> <span>0</span><span>;</span>
<span>export</span> <span>default</span> <span>function</span> <span>TodoApp</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>

  <span>export</span> <span>function</span> <span>addTodo</span><span>(</span><span>text</span><span>)</span> <span>{</span>
    <span>setTodos</span><span>(</span><span>todos</span> <span>=&gt;</span> <span>[</span><span>...</span>todos<span>,</span> <span>{</span> <span>id</span><span>:</span> id<span>++</span><span>,</span> text<span>,</span> <span>done</span><span>:</span> <span>false</span> <span>}</span><span>]</span><span>)</span><span>;</span>
  <span>}</span>

  <span>const</span> inputRef <span>=</span> <span>useCallback</span><span>(</span><span>ref</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span>ref<span>)</span> <span>return</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;add&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>addTodo</span><span>(</span>evt<span>.</span>detail<span>)</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>todo-layout</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>h1</span> <span>slot</span><span><span>=</span><span>&#34;</span>title<span>&#34;</span></span><span>&gt;</span></span><span>Todos</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>todo-input</span> <span>slot</span><span><span>=</span><span>&#34;</span>input<span>&#34;</span></span> <span>ref</span><span><span>=</span><span>{</span>inputRef<span>}</span></span><span>&gt;</span></span><span><span><span>&lt;/</span>todo-input</span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>todo-layout</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span></code></pre>
<p>We’ll keep an array of our todos in React state.
When we add a todo, we’ll add it to the array.</p>
<p>The one awkward part of this is that <code>inputRef</code> function.
Our <code>&lt;todo-input&gt;</code> emits a custom <code>add</code> event when the form is submitted.
Usually with React, we’d attach event listeners using props like <code>onClick</code> — but that only works for events that React already knows about.
We need to listen for <code>add</code> events directly.<sup><a href="#user-content-fn-ondirective" id="user-content-fnref-ondirective" data-footnote-ref="" aria-describedby="footnote-label" data-astro-cid-bi7aps5f="">3</a></sup></p>
<p>In React Land, we use <a href="https://react.dev/learn/manipulating-the-dom-with-refs" data-astro-cid-bi7aps5f="">refs</a><a data-tooltip="" href="https://react.dev/learn/manipulating-the-dom-with-refs" data-astro-cid-bi7aps5f=""> <img src="https://react.dev/images/og-learn.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Manipulating the DOM with Refs – React</span> <span data-astro-cid-bi7aps5f="">The library for web and native user interfaces</span> <span data-astro-cid-bi7aps5f=""> <img src="https://react.dev/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">react.dev/learn/manipulating-the-dom-with-refs</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> to directly interact with the DOM.
We most commonly use them with the <code>useRef</code> hook, but that’s not the only way!
The <code>ref</code> prop is actually just a function that gets called with a DOM node.
Rather than passing a ref returned from the <code>useRef</code> hook to that prop, we can instead pass a function that attaches the event listener to the DOM node directly.</p>
<p>You might be wondering why we have to wrap the function in <code>useCallback</code>.
The answer lies in the <a href="https://legacy.reactjs.org/docs/refs-and-the-dom.html#caveats-with-callback-refs" data-astro-cid-bi7aps5f="">legacy React docs on refs</a><a data-tooltip="" href="https://legacy.reactjs.org/docs/refs-and-the-dom.html#caveats-with-callback-refs" data-astro-cid-bi7aps5f=""> <img src="https://legacy.reactjs.org/logo-og.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Refs and the DOM – React</span> <span data-astro-cid-bi7aps5f="">A JavaScript library for building user interfaces</span> <span data-astro-cid-bi7aps5f=""> <img src="https://legacy.reactjs.org/favicon.ico#caveats-with-callback-refs" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">legacy.reactjs.org/docs/refs-and-the-dom.html#caveats-with-callback-refs</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> (and, as far as I can tell, has not been brought over to the new docs):</p>
<blockquote>
<p>If the <code>ref</code> callback is defined as an inline function, it will get called twice during updates, first with <code>null</code> and then again with the DOM element. This is because a new instance of the function is created with each render, so React needs to clear the old ref and set up the new one. You can avoid this by defining the <code>ref</code> callback as a bound method on the class, but note that it shouldn’t matter in most cases.</p>
</blockquote>
<p>In this case, it <em>does</em> matter, since we don’t want to attach the event listener again on every render.
So we wrap it in <code>useCallback</code> to ensure that we pass the same instance of the function every time.</p>
<todo-demo show-layout="true" show-input="true"></todo-demo>

<h3 id="todo-items">Todo Items</h3>
<p>So far, we can add todos, but not see them.
The next step is writing a component to show each todo item.
We’ll write that component with <a href="https://svelte.dev" data-astro-cid-bi7aps5f="">Svelte</a><a data-tooltip="" href="https://svelte.dev" data-astro-cid-bi7aps5f=""> <img src="https://svelte.dev/images/twitter-thumbnail.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Svelte • Cybernetically enhanced web apps</span>  <span data-astro-cid-bi7aps5f=""> <img src="https://svelte.dev/favicon.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">svelte.dev</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</p>
<p>Svelte supports custom elements <a href="https://svelte.dev/docs/custom-elements-api" data-astro-cid-bi7aps5f="">out of the box</a><a data-tooltip="" href="https://svelte.dev/docs/custom-elements-api" data-astro-cid-bi7aps5f=""> <img src="https://svelte.dev/images/twitter-thumbnail.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Custom elements API • Docs • Svelte</span>  <span data-astro-cid-bi7aps5f=""> <img src="https://svelte.dev/favicon.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">svelte.dev/docs/custom-elements-api</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.
Rather than continuing to show the same web component wrapper boilerplate every time, we’ll just use that feature!</p>
<p>Here’s the code:</p>
<pre><code>
<span><span><span>&lt;</span><span>svelte:</span>options</span> <span>customElement</span><span><span>=</span><span>&#34;</span>todo-item<span>&#34;</span></span> <span>/&gt;</span></span>

<span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span>
  <span>import</span> <span>{</span> createEventDispatcher <span>}</span> <span>from</span> <span>&#34;svelte&#34;</span><span>;</span>

  <span>export</span> <span>let</span> id<span>;</span>
  <span>export</span> <span>let</span> text<span>;</span>
  <span>export</span> <span>let</span> done<span>;</span>

  <span>const</span> dispatch <span>=</span> <span>createEventDispatcher</span><span>(</span><span>)</span><span>;</span>
  <span>$</span><span>:</span> <span>dispatch</span><span>(</span><span>&#34;check&#34;</span><span>,</span> <span>{</span> id<span>,</span> done <span>}</span><span>)</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>div</span><span>&gt;</span></span>
   <span><span><span>&lt;</span>input</span> <span>id</span><span><span>=</span><span>&#34;</span>todo-{id}<span>&#34;</span></span> <span>type</span><span><span>=</span><span>&#34;</span>checkbox<span>&#34;</span></span> <span><span>bind:</span>checked</span><span><span>=</span>{done}</span> <span>/&gt;</span></span>
  <span><span><span>&lt;</span>label</span> <span>for</span><span><span>=</span><span>&#34;</span>todo-{id}<span>&#34;</span></span><span>&gt;</span></span>{text}<span><span><span>&lt;/</span>label</span><span>&gt;</span></span>
  &lt;button aria-label=&#34;delete {text}&#34; on:click={() =&gt; dispatch(&#34;delete&#34;, { id })}&gt;
    <span><span><span>&lt;</span>svg</span> <span>xmlns</span><span><span>=</span><span>&#34;</span>http://www.w3.org/2000/svg<span>&#34;</span></span> <span>width</span><span><span>=</span><span>&#34;</span>12<span>&#34;</span></span> <span>height</span><span><span>=</span><span>&#34;</span>12<span>&#34;</span></span> <span>viewBox</span><span><span>=</span><span>&#34;</span>0 0 12 12<span>&#34;</span></span><span>&gt;</span></span>
      <span><span><span>&lt;</span>path</span>
        <span>d</span><span><span>=</span><span>&#34;</span>M10.707,1.293a1,1,0,0,0-1.414,0L6,4.586,2.707,1.293A1,1,0,0,0,1.293,2.707L4.586,6,1.293,9.293a1,1,0,1,0,1.414,1.414L6,7.414l3.293,3.293a1,1,0,0,0,1.414-1.414L7.414,6l3.293-3.293A1,1,0,0,0,10.707,1.293Z<span>&#34;</span></span>
        <span>fill</span><span><span>=</span><span>&#34;</span>currentColor<span>&#34;</span></span>
      <span>/&gt;</span></span>
    <span><span><span>&lt;/</span>svg</span><span>&gt;</span></span>
  <span><span><span>&lt;/</span>button</span><span>&gt;</span></span>
<span><span><span>&lt;/</span>div</span><span>&gt;</span></span></code></pre>
<p>With Svelte, the <code>&lt;script&gt;</code> tag isn’t literally rendered to the DOM — instead, that code runs when the component is instantiated.
Our Svelte component takes three props: <code>id</code>, <code>text</code> and <code>done</code>.
It also creates a custom event dispatcher, which can dispatch events on the custom element.</p>
<p>The <code>$:</code> syntax declares a reactive block.
It means that whenever the values of <code>id</code> or <code>done</code> change, it will dispatch a <code>check</code> event with the new values.
<code>id</code> probably won’t change, so what this means in practice is that it’ll dispatch a <code>check</code> event whenever we check or uncheck the todo.</p>
<p>Back in our React component, we loop over our todos and use our new <code>&lt;todo-item&gt;</code> component.
We also need a couple more utility functions to remove and check todos, and another ref callback to attach the event listeners to each <code>&lt;todo-item&gt;</code>.</p>
<p>Here’s the code:</p>
<pre><code>
<span>import</span> <span>{</span> useCallback<span>,</span> useState <span>}</span> <span>from</span> <span>&#34;react&#34;</span><span>;</span>

<span>let</span> id <span>=</span> <span>0</span><span>;</span>
<span>export</span> <span>default</span> <span>function</span> <span>TodoApp</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>[</span>todos<span>,</span> setTodos<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>

  <span>export</span> <span>function</span> <span>addTodo</span><span>(</span><span>text</span><span>)</span> <span>{</span>
    <span>setTodos</span><span>(</span><span>todos</span> <span>=&gt;</span> <span>[</span><span>...</span>todos<span>,</span> <span>{</span> <span>id</span><span>:</span> id<span>++</span><span>,</span> text<span>,</span> <span>done</span><span>:</span> <span>false</span> <span>}</span><span>]</span><span>)</span><span>;</span>
  <span>}</span>

  <span>export</span> <span>function</span> <span>removeTodo</span><span>(</span><span>id</span><span>)</span> <span>{</span>
    <span>setTodos</span><span>(</span><span>todos</span> <span>=&gt;</span> todos<span>.</span><span>filter</span><span>(</span><span>todo</span> <span>=&gt;</span> todo<span>.</span>id <span>!==</span> id<span>)</span><span>)</span><span>;</span>
  <span>}</span>

  <span>export</span> <span>function</span> <span>checkTodo</span><span>(</span><span>id<span>,</span> done</span><span>)</span> <span>{</span>
    <span>setTodos</span><span>(</span><span>todos</span> <span>=&gt;</span> todos<span>.</span><span>map</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>(</span>todo<span>.</span>id <span>===</span> id <span>?</span> <span>{</span> <span>...</span>todo<span>,</span> done <span>}</span> <span>:</span> todo<span>)</span><span>)</span><span>)</span><span>;</span>
  <span>}</span>

  <span>const</span> inputRef <span>=</span> <span>useCallback</span><span>(</span><span>ref</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span>ref<span>)</span> <span>return</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;add&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>addTodo</span><span>(</span>evt<span>.</span>detail<span>)</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>const</span> todoRef <span>=</span> <span>useCallback</span><span>(</span><span>ref</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span>ref<span>)</span> <span>return</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;check&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>checkTodo</span><span>(</span>evt<span>.</span>detail<span>.</span>id<span>,</span> evt<span>.</span>detail<span>.</span>done<span>)</span><span>)</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;delete&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>removeTodo</span><span>(</span>evt<span>.</span>detail<span>.</span>id<span>)</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>todo-layout</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>h1</span> <span>slot</span><span><span>=</span><span>&#34;</span>title<span>&#34;</span></span><span>&gt;</span></span><span>Todos</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>ul</span><span>&gt;</span></span><span>
        </span><span>{</span>todos<span>.</span><span>map</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>(</span>
          <span><span><span>&lt;</span>li</span> <span>key</span><span><span>=</span><span>{</span>todo<span>.</span>id<span>}</span></span><span>&gt;</span></span><span>
            </span><span><span><span>&lt;</span>todo-item</span> <span>ref</span><span><span>=</span><span>{</span>todoRef<span>}</span></span> <span><span>{</span><span>...</span>todo<span>}</span></span> <span>/&gt;</span></span><span>
          </span><span><span><span>&lt;/</span>li</span><span>&gt;</span></span>
        <span>)</span><span>)</span><span>}</span><span>
      </span><span><span><span>&lt;/</span>ul</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>todo-input</span> <span>slot</span><span><span>=</span><span>&#34;</span>input<span>&#34;</span></span> <span>ref</span><span><span>=</span><span>{</span>inputRef<span>}</span></span><span>&gt;</span></span><span><span><span>&lt;/</span>todo-input</span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>todo-layout</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span></code></pre>
<p>Now the list actually shows all our todos! And when we add a new todo, it shows up in the list!</p>
<todo-demo show-layout="true" show-input="true" show-todos="true"></todo-demo>

<h3 id="filtering-todos">Filtering Todos</h3>
<p>The last feature to add is the ability to filter todos.</p>
<p>Before we can add that, though, we need to do a bit of refactoring.</p>
<p>I want to show another way that web components can communicate with each other: using a shared store.
Many of the frameworks we’re using have their own store implementations, but we need a store that we can use with <em>all</em> of them.
For that reason, we’ll use a library called <a href="https://github.com/nanostores/nanostores" data-astro-cid-bi7aps5f="">Nano Stores</a><a data-tooltip="" href="https://github.com/nanostores/nanostores" data-astro-cid-bi7aps5f=""> <img src="https://opengraph.githubassets.com/ca56eede252d8d8e13d7d56f8ef7ec53f6103ccdca592e4cbcb2db28de18300a/nanostores/nanostores" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores</span> <span data-astro-cid-bi7aps5f="">A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores - GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svel...</span> <span data-astro-cid-bi7aps5f=""> <img src="https://github.githubassets.com/favicons/favicon.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">github.com/nanostores/nanostores</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</p>
<p>First, we’ll make a new file called <code>store.js</code> with our todo state rewritten using Nano Stores:</p>
<pre><code>
<span>import</span> <span>{</span> atom<span>,</span> computed <span>}</span> <span>from</span> <span>&#34;nanostores&#34;</span><span>;</span>

<span>let</span> id <span>=</span> <span>0</span><span>;</span>
<span>export</span> <span>const</span> $todos <span>=</span> <span>atom</span><span>(</span><span>[</span><span>]</span><span>)</span><span>;</span>
<span>export</span> <span>const</span> $done <span>=</span> <span>computed</span><span>(</span>$todos<span>,</span> <span>todos</span> <span>=&gt;</span> todos<span>.</span><span>filter</span><span>(</span><span>todo</span> <span>=&gt;</span> todo<span>.</span>done<span>)</span><span>)</span><span>;</span>
<span>export</span> <span>const</span> $left <span>=</span> <span>computed</span><span>(</span>$todos<span>,</span> <span>todos</span> <span>=&gt;</span> todos<span>.</span><span>filter</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>!</span>todo<span>.</span>done<span>)</span><span>)</span><span>;</span>

<span>export</span> <span>function</span> <span>addTodo</span><span>(</span><span>text</span><span>)</span> <span>{</span>
  $todos<span>.</span><span>set</span><span>(</span><span>[</span><span>...</span>$todos<span>.</span><span>get</span><span>(</span><span>)</span><span>,</span> <span>{</span> <span>id</span><span>:</span> id<span>++</span><span>,</span> text <span>}</span><span>]</span><span>)</span><span>;</span>
<span>}</span>

<span>export</span> <span>function</span> <span>checkTodo</span><span>(</span><span>id<span>,</span> done</span><span>)</span> <span>{</span>
  $todos<span>.</span><span>set</span><span>(</span>$todos<span>.</span><span>get</span><span>(</span><span>)</span><span>.</span><span>map</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>(</span>todo<span>.</span>id <span>===</span> id <span>?</span> <span>{</span> <span>...</span>todo<span>,</span> done <span>}</span> <span>:</span> todo<span>)</span><span>)</span><span>)</span><span>;</span>
<span>}</span>

<span>export</span> <span>function</span> <span>removeTodo</span><span>(</span><span>id</span><span>)</span> <span>{</span>
  $todos<span>.</span><span>set</span><span>(</span>$todos<span>.</span><span>get</span><span>(</span><span>)</span><span>.</span><span>filter</span><span>(</span><span>todo</span> <span>=&gt;</span> todo<span>.</span>id <span>!==</span> id<span>)</span><span>)</span><span>;</span>
<span>}</span>

<span>export</span> <span>const</span> $filter <span>=</span> <span>atom</span><span>(</span><span>&#34;all&#34;</span><span>)</span><span>;</span></code></pre>
<p>The core logic is the same; most of the changes are just porting from the <code>useState</code> API to the Nano Stores API.
We did add two new <a href="https://github.com/nanostores/nanostores#computed-stores" data-astro-cid-bi7aps5f="">computed stores</a><a data-tooltip="" href="https://github.com/nanostores/nanostores#computed-stores" data-astro-cid-bi7aps5f=""> <img src="https://opengraph.githubassets.com/a1d5ab752b126fb874def999f648ce36cc67e8e625235f2c731a0eb940fc256b/nanostores/nanostores" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores</span> <span data-astro-cid-bi7aps5f="">A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores - GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svel...</span> <span data-astro-cid-bi7aps5f=""> <img src="https://github.githubassets.com/favicons/favicon.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">github.com/nanostores/nanostores#computed-stores</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>, <code>$done</code> and <code>$left</code>, which are “derived” from the <code>$todos</code> store and return completed and incomplete todos, respectively.
We also added a new store, <code>$filter</code>, which will hold the current filter value.</p>
<p>We’ll write our filter component with <a href="https://vuejs.org" data-astro-cid-bi7aps5f="">Vue</a><a data-tooltip="" href="https://vuejs.org" data-astro-cid-bi7aps5f=""> <img src="https://vuejs.org/images/logo.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Vue.js - The Progressive JavaScript Framework | Vue.js</span> <span data-astro-cid-bi7aps5f="">Vue.js - The Progressive JavaScript Framework</span> <span data-astro-cid-bi7aps5f=""> <img src="https://vuejs.org/logo.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">vuejs.org</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</p>
<pre><code>
<span><span><span>&lt;</span>script</span> <span>setup</span><span>&gt;</span></span><span><span>
  <span>import</span> <span>{</span> useStore<span>,</span> useVModel <span>}</span> <span>from</span> <span>&#34;@nanostores/vue&#34;</span><span>;</span>

  <span>import</span> <span>{</span> $todos<span>,</span> $done<span>,</span> $left<span>,</span> $filter <span>}</span> <span>from</span> <span>&#34;./store.js&#34;</span><span>;</span>

  <span>const</span> filter <span>=</span> <span>useVModel</span><span>(</span>$filter<span>)</span><span>;</span>
  <span>const</span> todos <span>=</span> <span>useStore</span><span>(</span>$todos<span>)</span><span>;</span>
  <span>const</span> done <span>=</span> <span>useStore</span><span>(</span>$done<span>)</span><span>;</span>
  <span>const</span> left <span>=</span> <span>useStore</span><span>(</span>$left<span>)</span><span>;</span>
</span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span>

<span><span><span>&lt;</span>template</span><span>&gt;</span></span>
  <span><span><span>&lt;</span>div</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>label</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>radio<span>&#34;</span></span> <span>name</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>value</span><span><span>=</span><span>&#34;</span>all<span>&#34;</span></span> <span>v-model</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>/&gt;</span></span>
      <span><span><span>&lt;</span>span</span><span>&gt;</span></span> All ({{ todos.length }})<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>label</span><span>&gt;</span></span>
    <span><span><span>&lt;</span>label</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>radio<span>&#34;</span></span> <span>name</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>value</span><span><span>=</span><span>&#34;</span>todo<span>&#34;</span></span> <span>v-model</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>/&gt;</span></span>
      <span><span><span>&lt;</span>span</span><span>&gt;</span></span> Todo ({{ left.length }})<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>label</span><span>&gt;</span></span>

    <span><span><span>&lt;</span>label</span><span>&gt;</span></span>
      <span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>radio<span>&#34;</span></span> <span>name</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>value</span><span><span>=</span><span>&#34;</span>done<span>&#34;</span></span> <span>v-model</span><span><span>=</span><span>&#34;</span>filter<span>&#34;</span></span> <span>/&gt;</span></span>
      <span><span><span>&lt;</span>span</span><span>&gt;</span></span> Done ({{ done.length }})<span><span><span>&lt;/</span>span</span><span>&gt;</span></span>
    <span><span><span>&lt;/</span>label</span><span>&gt;</span></span>
  <span><span><span>&lt;/</span>div</span><span>&gt;</span></span>
<span><span><span>&lt;/</span>template</span><span>&gt;</span></span></code></pre>
<p>The syntax is pretty similar to Svelte’s: the <code>&lt;script&gt;</code> tag at the top is run when the component is instantiated, and the <code>&lt;template&gt;</code> tag contains the component’s markup.</p>
<p>Vue doesn’t make compiling a component to a custom element <em>quite</em> as simple as Svelte does. We need to create another file, import the Vue component and call <a href="https://vuejs.org/guide/extras/web-components.html" data-astro-cid-bi7aps5f=""><code>defineCustomElement</code></a><a data-tooltip="" href="https://vuejs.org/guide/extras/web-components.html" data-astro-cid-bi7aps5f=""> <img src="https://vuejs.org/images/logo.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Vue and Web Components | Vue.js</span> <span data-astro-cid-bi7aps5f="">Vue.js - The Progressive JavaScript Framework</span> <span data-astro-cid-bi7aps5f=""> <img src="https://vuejs.org/logo.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">vuejs.org/guide/extras/web-components.html</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> on it:</p>
<pre><code>
<span>import</span> <span>{</span> defineCustomElement <span>}</span> <span>from</span> <span>&#34;vue&#34;</span><span>;</span>

<span>import</span> TodoFilters <span>from</span> <span>&#34;./TodoFilters.ce.vue&#34;</span><span>;</span>

customElements<span>.</span><span>define</span><span>(</span><span>&#34;todo-filters&#34;</span><span>,</span> <span>defineCustomElement</span><span>(</span>TodoFilters<span>)</span><span>)</span><span>;</span></code></pre>
<p>Back in React Land, we’ll refactor our component to use Nano Stores rather than <code>useState</code>, and bring in the <code>&lt;todo-filters&gt;</code> component:</p>
<pre><code>
<span>import</span> <span>{</span> useStore <span>}</span> <span>from</span> <span>&#34;@nanostores/react&#34;</span><span>;</span>
<span>import</span> <span>{</span> useCallback <span>}</span> <span>from</span> <span>&#34;react&#34;</span><span>;</span>

<span>import</span> <span>{</span> $todos<span>,</span> $done<span>,</span> $left<span>,</span> $filter<span>,</span> addTodo<span>,</span> removeTodo<span>,</span> checkTodo <span>}</span> <span>from</span> <span>&#34;./store.js&#34;</span><span>;</span>

<span>export</span> <span>default</span> <span>function</span> <span>App</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> filter <span>=</span> <span>useStore</span><span>(</span>$filter<span>)</span><span>;</span>
  <span>const</span> todos <span>=</span> <span>useStore</span><span>(</span>$todos<span>)</span><span>;</span>
  <span>const</span> done <span>=</span> <span>useStore</span><span>(</span>$done<span>)</span><span>;</span>
  <span>const</span> left <span>=</span> <span>useStore</span><span>(</span>$left<span>)</span><span>;</span>
  <span>const</span> visible <span>=</span> filter <span>===</span> <span>&#34;todo&#34;</span> <span>?</span> left <span>:</span> filter <span>===</span> <span>&#34;done&#34;</span> <span>?</span> done <span>:</span> todos<span>;</span>

  <span>const</span> todoRef <span>=</span> <span>useCallback</span><span>(</span><span>ref</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span><span>!</span>ref<span>)</span> <span>return</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;check&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>checkTodo</span><span>(</span>evt<span>.</span>detail<span>.</span>id<span>,</span> evt<span>.</span>detail<span>.</span>done<span>)</span><span>)</span><span>;</span>
    ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;delete&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>removeTodo</span><span>(</span>evt<span>.</span>detail<span>.</span>id<span>)</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>const</span> inputRef <span>=</span> <span>useCallback</span><span>(</span><span>ref</span> <span>=&gt;</span> <span>{</span>
    <span>if</span> <span>(</span>ref<span>)</span> ref<span>.</span><span>addEventListener</span><span>(</span><span>&#34;add&#34;</span><span>,</span> <span>evt</span> <span>=&gt;</span> <span>addTodo</span><span>(</span>evt<span>.</span>detail<span>)</span><span>)</span><span>;</span>
  <span>}</span><span>,</span> <span>[</span><span>]</span><span>)</span><span>;</span>

  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span>todo-layout</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>h1</span> <span>slot</span><span><span>=</span><span>&#34;</span>title<span>&#34;</span></span><span>&gt;</span></span><span>Todos</span><span><span><span>&lt;/</span>h1</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>todo-filters</span> <span>slot</span><span><span>=</span><span>&#34;</span>filters<span>&#34;</span></span> <span>/&gt;</span></span><span>

      </span><span><span><span>&lt;</span>div</span> <span>slot</span><span><span>=</span><span>&#34;</span>todos<span>&#34;</span></span><span>&gt;</span></span><span>
        </span><span>{</span>visible<span>.</span><span>map</span><span>(</span><span>todo</span> <span>=&gt;</span> <span>(</span>
          <span><span><span>&lt;</span>todo-item</span> <span>key</span><span><span>=</span><span>{</span>todo<span>.</span>id<span>}</span></span> <span>ref</span><span><span>=</span><span>{</span>todoRef<span>}</span></span> <span><span>{</span><span>...</span>todo<span>}</span></span> <span>/&gt;</span></span>
        <span>)</span><span>)</span><span>}</span><span>
      </span><span><span><span>&lt;/</span>div</span><span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span>todo-input</span> <span>ref</span><span><span>=</span><span>{</span>inputRef<span>}</span></span> <span>slot</span><span><span>=</span><span>&#34;</span>input<span>&#34;</span></span> <span>/&gt;</span></span><span>
    </span><span><span><span>&lt;/</span>todo-layout</span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span></code></pre>
<p>We did it!
We now have a fully functional todo app, written with four different frameworks — React, Solid, Svelte and Vue — <em>plus</em> a component written in vanilla JavaScript.</p>
<todo-demo show-layout="true" show-input="true" show-todos="true" show-filters="true"></todo-demo>

<h3 id="moving-forward">Moving Forward</h3>
<p>The point of this article is not to convince you that this is a good way to write web apps.
It’s to show that there are ways to build a web app other than writing the entire thing with a single JavaScript framework — and furthermore, that web components actually make it <em>significantly easier</em> to do that.</p>
<p>You can progressively enhance static HTML.
You can build rich interactive JavaScript “islands” that naturally communicate with hypermedia libraries like <a href="https://htmx.org" data-astro-cid-bi7aps5f="">HTMX</a><a data-tooltip="" href="https://htmx.org" data-astro-cid-bi7aps5f="">  <span data-astro-cid-bi7aps5f="">&lt;/&gt; htmx - high power tools for html</span>  <span data-astro-cid-bi7aps5f=""> <img src="https://htmx.org/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">htmx.org</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.
You can even wrap a web component around a framework component, and use it with <em>any</em> other framework.</p>
<p>Web components drastically loosen the coupling of JavaScript frameworks by providing a common interface that <em>all</em> frameworks can use.
From a consumer’s point of view, web components are just HTML tags — it doesn’t matter what goes on “under the hood”.</p>
<p>If you want to play around with this yourself, I’ve made a <a href="https://codesandbox.io/p/devbox/polyglot-todos-wm4lwn" data-astro-cid-bi7aps5f="">CodeSandbox with our example todo app</a><a data-tooltip="" href="https://codesandbox.io/p/devbox/polyglot-todos-wm4lwn" data-astro-cid-bi7aps5f="">    <span data-astro-cid-bi7aps5f=""> <img src="https://codesandbox.io/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">codesandbox.io/p/devbox/polyglot-todos-wm4lwn</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</p>
<h3 id="reading-list">Reading List</h3>
<p>If you’re interested, here are some good articles that dive even deeper into the topic:</p>
<ul>
<li>Chris Ferdinandi wrote about wrapping his own UI library <a href="https://reefjs.com" data-astro-cid-bi7aps5f="">Reef</a><a data-tooltip="" href="https://reefjs.com" data-astro-cid-bi7aps5f=""> <img src="https://gomakethings.com/img/chris-ferdinandi-high-res.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Reef</span> <span data-astro-cid-bi7aps5f="">A tiny utility library for building reactive state-based UI. Reef is a simpler alternative to React, Vue, and other UI libraries.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://reefjs.com/img/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">reefjs.com</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> with a web component in <a href="https://gomakethings.com/reactive-web-components-and-dom-diffing/" data-astro-cid-bi7aps5f="">Reactive Web Components and DOM Diffing</a><a data-tooltip="" href="https://gomakethings.com/reactive-web-components-and-dom-diffing/" data-astro-cid-bi7aps5f=""> <img src="https://gomakethings.com/img/og.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Reactive Web Components and DOM diffing</span> <span data-astro-cid-bi7aps5f="">This week, I had a conversation on Mastodon with Kyle Leaders and Jake Lazaroff about reactivity and DOM diffing in Web Components…
 I have to say I’ve been actually enjoying working with #webcomponents in #vanillajs lately. I haven’t attempted anything too complicated, but I love the idea of reusable components. Next up, I need to figure out how to best do reactive updates.
 This is one area where the native web platform falls a bit short.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://gomakethings.com/img/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">gomakethings.com/reactive-web-components-and-dom-diffing/</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</li>
<li>Andrico Karoulla wrote a great overview of how to write framework-agnostic components aptly titled <a href="https://component-odyssey.com/articles/01-writing-components-that-work-in-any-framework" data-astro-cid-bi7aps5f="">Writing Components That Work in Any Framework</a><a data-tooltip="" href="https://component-odyssey.com/articles/01-writing-components-that-work-in-any-framework" data-astro-cid-bi7aps5f=""> <img src="https://component-odyssey.com/images/articles/01-writing-components-that-work-in-any-framework/open-graph.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Writing Components That Work In Any Frontend Framework</span> <span data-astro-cid-bi7aps5f="">Web components let developers write interoperable components, but at the cost of lots of boilerplate. Learn how you can write components that work in Svelte, Vue, React, and other frameworks, with minimal boilerplate.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://component-odyssey.com/favicon-32x32.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">component-odyssey.com/articles/01-writing-components-that-work-in-any-framework</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</li>
<li>Thomas Wilburn shows how to use web components to build “languages” within HTML in <a href="https://www.milezero.org/index.php/tech/web/components/chiaroscuro.html" data-astro-cid-bi7aps5f="">Chiaroscuro, or Expressive Trees in Web Components</a><a data-tooltip="" href="https://www.milezero.org/index.php/tech/web/components/chiaroscuro.html" data-astro-cid-bi7aps5f=""> <img src="https://milezero.org/blog/mugshot.jpg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Chiaroscuro, or Expressive Trees in Web Components</span> <span data-astro-cid-bi7aps5f="">This space intentionally left blank.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://www.milezero.org/blog/milezeromono.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">www.milezero.org/index.php/tech/web/components/chiaroscuro.html</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</li>
<li>Maxi Ferreira wrote a wonderful article called <a href="https://frontendatscale.com/blog/islands-architecture-state/" data-astro-cid-bi7aps5f="">Sharing State with Islands Architecture</a><a data-tooltip="" href="https://frontendatscale.com/blog/islands-architecture-state/" data-astro-cid-bi7aps5f=""> <img src="https://frontendatscale.com/og-image-islands-architecture-state.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Sharing State with Islands Architecture | Frontend at Scale</span> <span data-astro-cid-bi7aps5f="">Strategies for communicating between interactive components using Islands Architecture, with examples using Astro and React.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://frontendatscale.com/favicon.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">frontendatscale.com/blog/islands-architecture-state/</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> that goes into detail more about custom events and stores.</li>
<li>The official Astro documentation has a page on <a href="https://docs.astro.build/en/core-concepts/sharing-state/" data-astro-cid-bi7aps5f="">sharing state between islands</a><a data-tooltip="" href="https://docs.astro.build/en/core-concepts/sharing-state/" data-astro-cid-bi7aps5f=""> <img src="https://docs.astro.build/open-graph/en/core-concepts/sharing-state.png" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">Share State Between Islands</span> <span data-astro-cid-bi7aps5f="">Learn how to share state across framework components with Nano Stores.</span> <span data-astro-cid-bi7aps5f=""> <img src="https://docs.astro.build/favicon.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">docs.astro.build/en/core-concepts/sharing-state/</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> using <a href="https://github.com/nanostores/nanostores" data-astro-cid-bi7aps5f="">Nano Stores</a><a data-tooltip="" href="https://github.com/nanostores/nanostores" data-astro-cid-bi7aps5f=""> <img src="https://opengraph.githubassets.com/ca56eede252d8d8e13d7d56f8ef7ec53f6103ccdca592e4cbcb2db28de18300a/nanostores/nanostores" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores</span> <span data-astro-cid-bi7aps5f="">A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svelte with many atomic tree-shakable stores - GitHub - nanostores/nanostores: A tiny (298 bytes) state manager for React/RN/Preact/Vue/Svel...</span> <span data-astro-cid-bi7aps5f=""> <img src="https://github.githubassets.com/favicons/favicon.svg" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">github.com/nanostores/nanostores</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a>.</li>
<li>Although it doesn’t explicitly mention web components, the HTMX essay on <a href="https://htmx.org/essays/hypermedia-friendly-scripting/" data-astro-cid-bi7aps5f="">hypermedia-friendly scripting</a><a data-tooltip="" href="https://htmx.org/essays/hypermedia-friendly-scripting/" data-astro-cid-bi7aps5f="">  <span data-astro-cid-bi7aps5f="">&lt;/&gt; htmx ~ Hypermedia-Friendly Scripting</span>  <span data-astro-cid-bi7aps5f=""> <img src="https://htmx.org/favicon.ico" alt="" onerror="this.remove()" data-astro-cid-bi7aps5f=""/> <span data-astro-cid-bi7aps5f="">htmx.org/essays/hypermedia-friendly-scripting/</span> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"> <use href="/icons.svg#share"></use> </svg> </span> </a> brings up events and islands as ways for client-side scripting to interact with hypermedia-driven web applications.</li>
</ul>
 </div></div>
  </body>
</html>
