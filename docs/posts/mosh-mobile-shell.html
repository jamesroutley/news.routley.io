<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mosh.org">Original</a>
    <h1>Mosh Mobile Shell</h1>
    
    <div id="readability-page-1" class="page"><div>

<section id="about">
  <div>
    <div>
      <div>
        
        <h2>(mobile shell)</h2>
        <p>Remote terminal application that
        allows <strong>roaming</strong>, supports <strong>intermittent connectivity</strong>, and provides intelligent <strong>local echo</strong> and line editing of user keystrokes.</p>
        <p>Mosh is a replacement for interactive SSH terminals. It&#39;s more robust and responsive, especially over Wi-Fi, cellular, and long-distance links.</p>
        <p>Mosh is free software, available for GNU/Linux, BSD, macOS, Solaris, Android, Chrome, and iOS.</p>
      </div>
      <p><img src="https://mosh.org/mosh.png" alt=""/>
      </p>
    </div>

    <p><a href="#getting">Getting Mosh »</a>
    <a href="#techinfo">Tech Video »</a></p>
  </div>

  <div id="features">
  <div>
      <div>
        <h2>Change IP. Stay connected.</h2>
        <p>Mosh automatically roams as you move between Internet
        connections. Use Wi-Fi on the train, Ethernet in a hotel,
        and LTE on a beach: you&#39;ll stay logged in. Most network
        programs lose their connections after roaming,
        including SSH and Web apps like Gmail. Mosh
        is different.</p>
      </div>
      <div>
        <h2>Makes for sweet dreams.</h2>
        <p>With Mosh, you can put your laptop to sleep and wake it
        up later, keeping your connection intact. If your
        Internet connection drops, Mosh will warn you — but
        the connection resumes when network service
        comes back.</p>
      </div>
      <div>
        <h2>Get rid of network lag.</h2>
        <p>SSH waits for the server&#39;s reply before showing you your
        own typing. That can make for a lousy user interface. Mosh
        is different: it gives an instant response to typing,
        deleting, and line editing. It does this adaptively and
        works even in full-screen programs like emacs and vim. On
        a bad connection, outstanding predictions are underlined
        so you won&#39;t be misled.
        </p>
      </div>
      <div>
        <h2>No privileged code. No daemon.</h2>
        <p>You don&#39;t need to be the superuser to install or run
        Mosh. The client and server are executables run by an
        ordinary user and last only for the life of the
        connection.</p>
      </div>
  </div>
  <div>
      <div>
        <h2>Same login method.</h2>
        <p>Mosh doesn&#39;t listen on network ports or authenticate
         users. The <span>mosh</span> client logs in to the server via
         SSH, and users present the same credentials (e.g.,
         password, public key) as before. Then Mosh runs the
         <span>mosh-server</span> remotely and connects to it over UDP.</p>
      </div>
      <div>
        <h2>Runs inside your terminal, but better.</h2>
        <p>Mosh is a command-line program, like ssh. You can use it
        inside xterm, gnome-terminal, urxvt, Terminal.app, iTerm,
        emacs, screen, or tmux. But mosh was designed from scratch
        and supports just one character set: UTF-8. It fixes Unicode
        bugs in other terminals and in SSH.</p>
      </div>
      <div>
        <h2>Control-C works great.</h2>
        <p>Unlike SSH, mosh&#39;s UDP-based protocol handles packet loss
          gracefully, and sets the frame rate based on network conditions. Mosh
          doesn&#39;t fill up network buffers, so Control-C always works
          to halt a runaway process.</p>
      </div>
  </div>
  </div>
</section>
      
<section id="news">
  

  <ul id="news-list">
    <li><b>October 31, 2022</b>: <a href="https://mosh.org/mosh-1.4.0-released.html">Mosh 1.4.0 released</a>, with Alex Chernyakhovsky and Benjamin Barenblat as release managers, and major contributions
      from Wolfgang Sanyer, John Hood, Anders Kaseorg, and Andrew Chin. The release adds true-color support as well as other features, bug fixes, and fuzzing infrastructure.</li>

    <li><b>September 29, 2017</b>: The
	macOS <a href="https://github.com/Homebrew/homebrew-core/pull/18636">Homebrew
	collection renames its formula from “mobile-shell” to
	“mosh”</a>.</li>

    <li><b>July 21, 2017</b>: <a href="https://mailman.mit.edu/pipermail/mosh-users/2017-July/000357.html">Mosh 1.3.2 released</a>, with John Hood as
      release lead. The release includes improved tests, bug fixes,
      and improvements to IPv6 support on non-Linux systems.</li>

    <li><b>March 25,
2017</b>: <a href="http://mailman.mit.edu/pipermail/mosh-users/2017-March/000341.html">Mosh
1.3.0 released</a>, with John Hood as release lead. The release
includes broader platform compatibility, robustness improvements,
better testing, and fixes for excess CPU consumption in some cases. We
have switched to semver.org-style versioning and will increment the
minor version number whenever we add new functionality. (In our
previous practice, this release would probably have been called
“1.2.7.”)</li>

    <li><b>September 20, 2016</b>: <a href="http://blink.sh">Blink Shell: Mosh &amp; SSH Terminal for iOS</a> has its first gold release on the <a href="https://itunes.apple.com/app/id1156707581">App Store</a>. Free version is available on <a href="https://github.com/blinksh/blink">GitHub</a>.
    </li><li><b>August 10,
2016</b>: <a href="https://mailman.mit.edu/pipermail/mosh-users/2016-August/000330.html">Mosh
1.2.6 released</a>, with John Hood as release lead. New features
include huge performance improvements, especially on large terminals,
the ability to set a timeout to end dormant sessions automatically,
and support for crypto libraries other than OpenSSL.</li>

<li><b>August 10, 2016</b>: The Mosh website moves to <a href="https://mosh.org">https://mosh.org</a>. We continue to be grateful for hosting provided
by the MIT <a href="https://sipb.mit.edu">Student Information Processing Board</a>.</li>

    <li><b>June 15, 2016</b>: <a href="https://github.com/blinksh/blink">Mosh for iOS (Blink)</a> has its first <a href="https://mailman.mit.edu/pipermail/mosh-devel/2016-June/001339.html">alpha release</a>.

    </li><li><b>April 17, 2016</b>: <a href="https://f-droid.org/en/packages/com.termux">Termux</a> (open source Linux environment for Android) adds a mosh 1.2.5 package.</li>
    <li><b>July 23, 2015</b>: <a href="https://mailman.mit.edu/pipermail/mosh-users/2015-July/000283.html">Mosh 1.2.5 released</a>, with John Hood as release lead. New features include support for mouse modes and a reconfigurable escape character, and initial support for IPv6.</li>
    <li><b>May 31, 2015</b>: Another team of Stanford students has <a href="https://reproducingnetworkresearch.wordpress.com/2015/05/31/cs244-15-mosh-reproducing-network-research-results/">reproduced some of the Mosh research paper&#39;s results</a>.
    </li><li><b>January 20, 2014</b>: <a href="https://github.com/rpwoodbu/mosh-chrome/wiki">Mosh for Chrome</a>, which brings Mosh to the Chrome browser and Chrome OS, is released. It can be installed <a href="https://chrome.google.com/webstore/detail/mosh/ooiklbnjmhbcgemelgfhaeaocllobloj">here</a>.</li>
    <li><b>August 9, 2013</b>: <a href="https://play.google.com/store/apps/details?id=com.sonelli.juicessh">JuiceSSH</a> (SSH client for Android) adds official Mosh support — available on the <a href="https://play.google.com/store/apps/details?id=com.sonelli.juicessh">Play Store</a></li>
    <li><b>April 14, 2013</b>: Mosh has posted an <a href="https://docs.google.com/document/d/10o-TLA03bY4cZzEIZR-5wKmBecvYKpOEFRqSJFbIm3M/edit?usp=sharing">Ideas List</a> for interested contributors!</li>
    <li><b>March 27,
    2013</b>: <a href="https://mailman.mit.edu/pipermail/mosh-users/2013-March/000167.html">Mosh
    1.2.4 has been released</a>. Changes largely include bug
    fixes, improved robustness, and added platform support (now
    on AIX and stock Solaris!). This version will be in Ubuntu
    13.04 (raring).</li>
    <li><b>March 24, 2013</b>: The <a href="https://twitter.com/zacchiro/status/315893796695064576">Debian Project Leader switches to Mosh</a>. Welcome, Stefano! We&#39;re proud to have you.</li>
    <li><b>March 14, 2013</b>: Two teams of Stanford students have
    reproduced parts of the <a href="https://mosh.org/mosh-paper.pdf">Mosh research paper</a> on Stanford&#39;s
    <a href="https://reproducingnetworkresearch.wordpress.com">Reproducing Network Research blog</a>. Kanthi Nagaraj and Emily McMilin <a href="https://reproducingnetworkresearch.wordpress.com/2013/03/14/mosh-cs244-13/">tested SSP&#39;s resilience to packet loss</a>, and Ahmed Aljunied and Anand Atreya <a href="https://reproducingnetworkresearch.wordpress.com/2013/03/13/cs244-2013-evaluation-of-mosh-mobile-shell-performance-results/">evaluated Mosh&#39;s predictive local echo</a>.
    </li><li><b>March 12, 2013</b>: Mosh celebrates its first anniversary of
1.0. Hard to believe it&#39;s already been a year. We could not have done
it without the hard work of many of you, especially Hari Balakrishnan,
Keegan McAllister, Anders Kaseorg, Quentin Smith, Richard Tibbetts,
Nelson Elhage, Christine Spang, Stefie Tellex, Joseph Sokol-Margolis,
Waseem Daher, Bill McCloskey, Austin Roach, Greg Hudson, Karl Ramm,
Alexander Chernyakhovsky, Peter Iannucci, Evan Broder, Neha Narula,
Katrina LaCurts, Ramesh Chandra, Peter Jeremy, Ed Schouten, Ryan
Steinmetz, Jay Freeman, Dave Täht, Larry Doolittle, Daniel Drown, Timo
Juhani Lindfors, Timo Sirainen, Ira Cooper, Felix Gröbert, Luke
Mewburn, Anton Lundin, Kevin Ballard, and Axel Beckert!</li>
    <li><b>November 2012</b>: Mosh on the cover of <a href="http://www.linux-magazine.com/Issues/2012/144/Mosh-and-AutoSSH">Linux Magazine</a>.
    </li><li><b>Oct. 19,
    2012</b>: <a href="https://mailman.mit.edu/pipermail/mosh-users/2012-October/000152.html">Mosh
    1.2.3 has been released</a>. Changes include more resilience to
evil NATs, power savings for mobile clients, switching to OpenSSL&#39;s AES
implementation, and a licensing exception to allow Mosh on Apple&#39;s app store.
This version will be in Debian 7.0 (wheezy).
    </li><li><b>Aug. 22, 2012</b>: Mosh (and its tolerance for high
packet loss) helps Iain Learmonth <a href="https://mosh.org/elevator.txt">escape from an elevator</a>.
  </li></ul>
</section>

<section id="getting">
  

  <!-- OSX / Darwin -->
  

  <!-- Windows -->
  <div>
    <div>
      <h3><img src="https://mosh.org/windows.png" alt=""/>Windows</h3>
      
      <p><small>There is no &#34;native&#34; mosh executable for Windows available at this time. The <a href="https://chrome.google.com/webstore/detail/mosh/ooiklbnjmhbcgemelgfhaeaocllobloj">Chrome version of Mosh</a> is the easiest way to use mosh on Windows.</small></p>
    </div>
  
    <div>
      <h3><a href="https://www.cygwin.com"><img src="https://mosh.org/Cygwin_logo.svg" width="50" height="50" alt=""/></a>Cygwin</h3>
      <pre>C:\&gt; setup.exe -q mosh</pre>
      <p><small>Mosh on Cygwin uses OpenSSH and is suitable for Windows users with advanced SSH configurations.
	  </small></p>
    </div>
  </div>

  <!-- Google / Mobile platforms -->
  

  <!-- Linux -->
  
  
  <div>
    <div>
      <h3><a href="http://www.ubuntu.com"><img src="https://mosh.org/ubuntu.png" alt=""/></a>Ubuntu <small>12.04 and later</small></h3>
            <pre>$ sudo apt-get install mosh</pre>
      <p><small>The <a href="https://launchpad.net/~keithw/+archive/ubuntu/mosh-dev">ppa:keithw/mosh-dev</a> PPA tracks the development version of Mosh.</small></p>
      <br/>
    </div>
  </div>


  <!-- *BSD -->
  

  <!-- Other UNIXes -->
  <div>
    <div>
      <h3><a href="https://www.opencsw.org"><img src="https://mosh.org/opencsw.png" alt=""/></a>OpenCSW <small>Solaris 10 Update 8 or later</small></h3>
      <pre># pkgutil -i mosh</pre>
      <br/>
    </div>
  </div>

  <p><small>Operating system logos are trademarks or registered trademarks and are displayed for identification
only. The vendors shown aren&#39;t affiliated with and haven&#39;t endorsed Mosh.</small></p>

  

  <div>
    
    <div>
      <div>
            <h3>Security on new operating systems</h3></div>
    </div>
  </div>
</section>

<section id="usage">
  

  <h3>Replaces interactive SSH. Instant keystroke response, robust to roaming. <small>But you&#39;ll need working UDP.</small></h3>

  <div>
    <div>
      <h2>Typical usage</h2>
      <pre>$ mosh <i>chewbacca.norad.mil</i></pre>
      <p>Mosh will log the user in via SSH, then start a connection on a UDP port between 60000 and 61000.</p>
    </div>

    <div>
      <h3>Different username</h3>
      <pre>$ mosh <b>potus@</b><i>ackbar.bls.gov</i></pre>
    </div>

    <div>
      <h3>Server binary outside path</h3>
      <pre>$ mosh <b>--server=/tmp/mosh-server</b> <i>r2d2</i></pre>
      <p>The user can specify an alternate path for the <code>mosh-server</code> on the remote host. The server binary can even
        be installed in the user&#39;s home directory.</p>
    </div>
  </div>

  <div>

    <div>
      <h3>Selecting Mosh UDP port</h3>
      <pre>$ mosh <b>-p 1234</b> <i>darth</i></pre>
      <p>Useful when the server is behind a port-forwarder or NAT.</p>
    </div>

          <div>
            <h3>Selecting SSH port</h3>
            <pre>$ mosh <b>--ssh=&#34;ssh -p 2222&#34;</b> <i>figrindan</i></pre>
          </div>

          <div>
            <h3>Other SSH options</h3>
            <pre>$ mosh <b>--ssh=&#34;~/bin/ssh -i ./identity&#34;</b> <i>fett</i></pre>
          </div>

        </div>

  <div>

    <div>
      <h3>Disable instant echo</h3>
      <pre>$ mosh <b>--predict=never</b> <i>niennunb</i></pre>
      <p>The <code>-n</code> switch is a synonym. By contrast,
      passing <code>--predict=always</code> or <code>-a</code>
      will enable instant local echo even on low-delay
      links.</p>
    </div>

    <div>
      <h3>With a command</h3>
      <pre>$ mosh <i>pello</i> <b>-- screen -dr</b></pre>
      <p>This reattaches to a long-running screen session.</p>
    </div>
  </div>

  <h3>Ending the connection</h3>

  <p>Normally, <span>logout</span> or <span>exit</span> on the remote host will close
    the session. Mosh accepts the escape sequence <code>Ctrl-^
    .</code>  (typically typed with Control-Shift-6, then a
    period) to end the connection forcibly. To send a
    literal Ctrl-^, type <code>Ctrl-^ ^</code>.</p>

  <h3>Manual</h3>

  <p>More details can be found in
  the <code>mosh(1)</code>, <code>mosh-client(1)</code>,
  and <code>mosh-server(1)</code> manual pages.</p>

</section>

<section id="techinfo">
  
  

  <h2>Papers</h2>

  <div>
    <div>
      <p>The <a href="https://mosh.org/mosh-paper.pdf"><img src="https://mosh.org/pdf.png" alt=""/> Mosh research paper</a> describes the
        design and evaluation of Mosh in more detail than you may
        want.
        The paper was presented at the
      <a href="https://www.usenix.org/conference/atc12/tech-schedule/usenix-atc-12-technical-sessions">2012 USENIX
        Annual Technical Conference</a>, held June 13–15, 2012, in
        sunny Boston, Mass.</p>

      <p>In addition,
the <a href="https://www.usenix.org/system/files/login/articles/winstein.pdf"><img src="https://mosh.org/pdf.png" alt=""/> Mosh: A State-of-the-Art Good
Old-Fashioned Mobile Shell</a> essay gives further information about
the design principles behind Mosh, including the &#34;prophylactic
retransmission&#34; technique. The essay was published
in <a href="https://www.usenix.org/publications/login">USENIX
;login:</a> magazine, August 2012.</p>

      <div><h3>“ISO 2022 locking escape
    sequences oh flying spaghetti monster please kill me
    now.” </h3>

        <p>(Why you should trust Mosh with your remote terminal needs: we
        worry about details so obscure, even USENIX reviewers don&#39;t want to
            hear about them.)</p>

      </div>
    </div>

    <p>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/XsIxNYl0oyU?rel=0" allowfullscreen=""></iframe>
    </p>
  </div>

  <h2>How Mosh works</h2>

  <div>
    <div>
  <p>Remote-shell protocols traditionally work by conveying a
    byte-stream from the server to the client, to be interpreted
    by the client&#39;s terminal. (This includes TELNET, RLOGIN, and
    SSH.) Mosh works differently and at a different layer. With
      Mosh, the server and client both maintain a snapshot of
      the current screen state. The problem becomes one of
      state-synchronization: getting the client to the
      most recent server-side screen as efficiently as
      possible.</p>

    <p>This is accomplished using a new protocol called the
      <strong>State Synchronization Protocol</strong>, for which Mosh is the
      first application. SSP runs over UDP, synchronizing the
      state of any object from one host to another. Datagrams
      are encrypted and authenticated
      using <a href="http://www.cs.ucdavis.edu/~rogaway/ocb/">AES-128
      in OCB3 mode</a>. While SSP takes care of the networking
      protocol, it is the implementation of the object being
      synchronized that defines the ultimate semantics of the
      protocol.</p>

    <p>Roaming with SSP becomes easy: the client sends datagrams
      to the server with increasing sequence numbers, including
      a &#34;heartbeat&#34; at least once every three seconds. Every time
      the server receives an authentic packet from the client
      with a sequence number higher than any it has previously
      received, the IP source address of that packet becomes the
      server&#39;s new target for its outgoing packets. By doing
      roaming “statelessly” in this manner, roaming works in and
      out of NATs, even ones that may themselves be
      roaming. Roaming works even when the client is not aware
      that its Internet-visible IP address has changed. The
      heartbeats allow Mosh to inform the user when it hasn&#39;t
      heard from the server in a while (unlike SSH, where users
      may be unaware of a dropped connection until they try to
      type).</p>

    <p>Mosh runs two copies of SSP, one in each direction of the
      connection. The connection from client to server
      synchronizes an object that represents the keys typed by
      the user, and with TCP-like semantics. The connection from
      server to client synchronizes an object that represent the
      current screen state, and the goal is always to convey the
      client to the most recent server-side state, possibly
    skipping intermediate frames.</p>

    <p>Because SSP works at the object layer and can control the
      rate of synchronization (in other words, the frame rate),
      it does not need to send every byte it receives from the
      application. That means Mosh can regulate the frames so as
      not to fill up network buffers, retaining the
      responsiveness of the connection and making sure Control-C
      always works quickly. Protocols that must send every byte
      can&#39;t do this.</p>

  <h3>Careful terminal emulation</h3>

    <p>One benefit of working at the terminal layer
      was the opportunity to build a clean UTF-8 terminal
      emulator from scratch. Mosh fixes several Unicode bugs in
      existing terminals and in SSH, and was designed as a fresh
      start to try to be robust and correct even for
      pathological inputs.</p>

<dl>
  <dt>Tricky unicode</dt>

  <dd><p>Only Mosh and the OS X Terminal correctly handle a Unicode combining character in the first column.</p>
    
  </dd>

  <dt>ISO 2022 locking escapes</dt>

  <dd><p>Only Mosh will never get stuck in hieroglyphs when a nasty program writes to the terminal. (See Markus Kuhn&#39;s discussion of the relationship between
<a href="https://www.cl.cam.ac.uk/~mgk25/unicode.html#term">ISO 2022 and UTF-8</a>.)</p>

    
  </dd>

  <dt>Evil escape sequences</dt>

  <dd><p>Only Mosh and GNOME Terminal have a defensible rendering when
Unicode mixes with an ECMA-48/ANSI escape sequence. The OS X Terminal
unwisely tries to normalize its input before the vt500 state machine,
causing it to misinterpret and become unusable after receiving the
following input!* (This also means the OS X Terminal&#39;s interpretation
of the incoming octet stream <strong>varies</strong> depending on how
the incoming octets are split across TCP segments, because the
normalization only looks ahead to available bytes.)</p>

<p><small>* We earlier wrote that this misbehaving sequence &#34;crashes&#34;
the OS X Terminal.app. This was mistaken—instead, Terminal.app
interprets the escape sequence as shutting off keyboard input, and
because of an unrelated bug in Terminal.app, it is not possible for
the user to restore keyboard input by resetting the terminal from the
menu.</small></p>

    
  </dd>

  <dt>Mosh sets IUTF8</dt>

  <dd><p>In the POSIX framework, the kernel needs to know whether
    the user is typing in an 8-bit character set or in UTF-8,
    because in canonical mode (i.e. &#34;cooked&#34; mode), the kernel
    needs to be able to delete a typed multibyte character
    sequence from an input buffer.  On OS X and Linux, this is
    done with the &#34;IUTF8&#34; termios flag.)
    (See <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=665757">diagnostic
        explaining the need for this flag.</a>)</p>

    <p>Mosh sets the IUTF8 flag when possible and stubbornly refuses to start up unless the user has a
    UTF-8-clean environment. SSH does not set the IUTF8 flag, which can lead to garbage in input buffers.</p>
  </dd>
</dl>

  <h3>Instant local echo and line editing</h3>

    <p>The other major benefit of working at the
      terminal-emulation layer is that the Mosh client is free
      to scribble on the local screen without lasting
      consequence. We use this to implement intelligent local
      echo. The client runs a predictive model in the background
      of the server&#39;s behavior, hypothesizing that each
      keystroke will be echoed at the cursor location and that
      the backspace and left- and right-arrow keys will have
      their traditional effect. But only when a prediction is
      confirmed by the server are these effects actually shown
      to the user. (In addition, by default predictions are only
      displayed on high-delay connections or during a network
      “glitch.”) Predictions are done in epochs: when the
      user does something that might alter the echo behavior
      — like hit ESC or carriage return or an up- or
      down-arrow — Mosh goes back into making background
      predictions until a prediction from the new batch can be
      confirmed as correct.</p>

    <p>Thus, unlike previous attempts at local echo with TELNET
      and RLOGIN, Mosh&#39;s local echo can be used everywhere, even
      in full-screen programs like emacs and vi.</p>

  <h3>Real-world benefits</h3>

<p>We evaluated Mosh using traces contributed by six users, covering
about 40 hours of real-world usage and including 9,986 total
keystrokes. These traces included the timing and contents of all
writes from the user to the host and vice versa. The users were asked
to contribute &#34;typical, real-world sessions.&#34; In practice, the traces
include use of popular programs such as the bash shell and zsh shells,
the alpine and mutt e-mail clients, the emacs and vim text editors,
the irssi and barnowl chat clients, the links text-mode Web browser,
and several programs unique to each user.</p>

<p>To evaluate typical usage of a &#34;mobile&#34; terminal, we replayed the
traces over an otherwise unloaded Sprint commercial EV-DO (3G)
cellular Internet connection in Cambridge, Mass. A client-side process
played the user portion of the traces, and a server-side process
waited for the expected user input and then replied (in time) with the
prerecorded server output. We speeded up long periods with no
activity.  The average round-trip time on the link was about half a
second.</p>

<p>We replayed the traces over two different transports, SSH and Mosh,
and recorded the user interface response latency to each simulated
user keystroke. The Mosh predictive algorithm was frozen prior to
collecting the traces and was not adjusted in response to their
contents or results.</p>

<h4>The results</h4>
<div>
  <p><img src="https://mosh.org/cdfs.png" alt=""/></p><h4>Cumulative distribution of keystroke response times with Sprint EV-DO (3G) Internet service</h4>
</div>
</div>
  </div>
</section>

      <section id="faq">
  

  <div>
  <div>
  <dl>
  <dt>Q: Who wrote Mosh?</dt>

  <dd><p>Mosh was written by Keith Winstein, along with Anders Kaseorg, Quentin Smith, Richard Tibbetts, Keegan McAllister, and John Hood.</p></dd>

  <dt>Q: Why another remote-terminal protocol?</dt>

  <dd><p>Practical latency on the Internet is on the increase, with
    the rise of bufferbloat and sophisticated wireless links
    that optimize for throughput over delay. And roaming is more
    common than ever, now that laptops and handheld devices have
    largely displaced desktops. SSH is great, but frustrating to
    use when you want to change IP addresses or have a
    long-delay link or a dodgy connection.</p>

  <p>Moreover, TELNET had some good things going for it — a
    local-echo mode and a well-defined network virtual
    terminal. Even today, SSH doesn&#39;t properly support UTF-8
    end-to-end on a POSIX system.</p></dd>

  <dt>Q: Are the mosh principles relevant to other network applications?</dt>

  <dd><p>We think so. The design principles that Mosh stands for are
    conservative: warning the user if the state being displayed
    is out of date, serializing and checkpointing all
    transactions so that if there are no warnings, the user
    knows every prior transaction has succeeded, and handling expected events (like roaming from one
    WiFi network to another) gracefully.</p>

  <p>Those don&#39;t seem too controversial, but fancy apps like
  Gmail-in-Chromium or on Android still behave atrociously on
  dodgy connections or after switching IP addresses. (Have you
  ever had Gmail leave an e-mail message in &#34;Sending...&#34; for ten
  hours while merrily retrieving new mail and not indicating any
  kind of error? Us too.) We think there may be considerable
  room for improvement in many network user interfaces from the
  application of these values.</p></dd>

  <!--
  <dt>Q: I'm using gnome-terminal or xfce4-terminal and seeing glitches in the last line of the terminal. Sometimes they go away when I select the text.</dt>

  <dd><p>This is a bug in some versions of VTE, the terminal emulation library that powers gnome-terminal, xfce4-terminal, and some other terminal emulators. The VTE maintainers have fixed this bug; please see the below referenced bugzillas and other links. Another option is to switch to a non-VTE-based terminal, such as rxvt-unicode or xterm.</p>

	<p>After installing a fixed package, for the fix to become effective,
	please make sure to restart <b>all</b> instances of the terminal.</p>

	<p>See also:</p>

	<ul>
	<li>Original (?): <a href="https://bugzilla.gnome.org/show_bug.cgi?id=542087"
		>542087 - Graphical glitches after "change scroll region"</a></li>
	<li>One of its duplicates: <a href="https://bugzilla.gnome.org/show_bug.cgi?id=686097"
		>686097 - screen not redrawn correctly when using mosh</a></li>
	<li>Fedora bugzilla, including a rebuild script:
		<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1080662#c1">RHBZ #1080662</a></li>
	<li>vte upstream commit <a href="https://git.gnome.org/browse/vte/commit/?id=88e8e89560a62d0981ce2b18974a230d0a07dbdd"
		>88e8e89 widget: Fix invalidation region</a></li>
	</ul>
  </dd>
-->

  <dt>Q: I&#39;m getting &#34;mosh requires a UTF-8 locale.&#34; How can I fix this?</dt>

        <dd><p>To diagnose the problem, run <code>locale</code> on the local
        terminal, and <code>ssh <i>remotehost</i> locale</code>. To use Mosh,
        both sides of the connection will need to show a UTF-8 locale, like
        <code>LC_CTYPE=&#34;en_US.UTF-8&#34;</code>.</p>

        <p>On many systems, SSH will transfer the locale-related
        environment variables, which are then inherited by
        <code>mosh-server</code>.  If this mechanism fails, Mosh (as of
        version 1.2) will pass the variables itself.  If neither
        mechanism is successful, you can do something like</p>

        <pre>mosh <i>remotehost</i> <b>--server=&#34;LANG=en_US.UTF-8 mosh-server&#34;</b></pre>

        <p>If <code>en_US.UTF-8</code> does not exist on the remote server,
        you can replace this with a UTF-8 locale that does exist.  You
        may also need to set LANG locally for the benefit of
        <code>mosh-client</code>.  It is possible that the local and
        remote machines will need different locale names. See also <a href="https://github.com/keithw/mosh/issues/98">this GitHub
        ticket</a>.</p></dd>

  <dt>Q: What does the message &#34;Nothing received from the server on UDP port 60003&#34; mean?</dt>

  <dd>
    <p>This means that <code>mosh</code> was able to start
    <code>mosh-server</code> successfully on the remote machine, but the client is
    not able to communicate with the server.  This generally means that
    some type of firewall is
    blocking the UDP packets between the client and the server.  If you
    had to forward TCP port 22 on a NAT for SSH, then you will have to
    forward UDP ports as well.  Mosh will use the first available
    UDP port, starting at 60001 and stopping at 60999.  If you are only
    going to have a small handful of concurrent sessions on a server, then you can
    forward a smaller range of ports (e.g., 60000 to 60010).
    </p>

    <p>
    Tools like netstat, netcat, socat, and tcpdump can be useful for debugging
    networking and firewall problems.
    </p>

    <p>This problem can also be the result of a bug in glibc 2.22 that
      affects programs that link with protobuf and utempter and use
      aggressive compiler hardening flags. (<a href="https://sourceware.org/bugzilla/show_bug.cgi?id=19861">glibc bugtracker entry</a>, as well as <a href="https://github.com/mobile-shell/mosh/issues/727">Mosh bugtracker entry</a>.) The
      problem causes mosh-server to segfault immediately on startup. We
      believe we have worked around this problem in Mosh 1.2.6, but please
      report a bug if you find otherwise.</p>
  </dd>

  <dt>Q: Why do you insist on UTF-8 everywhere?</dt>

  <dd><p>We&#39;re really not UTF-8 zealots. But it&#39;s a lot easier to
  correctly implement <strong>one</strong> terminal emulator
  than to try to do the right thing in a variety of difficult
  edge cases. (This is what GNU screen tries to do, and in our
  experience it leads to some very tricky-to-debug situations.)
  So mosh just won&#39;t start up until the user has everything
  configured for a UTF-8-clean pathway. It may be annoying, but
  it also probably reduces frustration down the
  road. (Unfortunately an 8-bit vt220 and a UTF-8 vt220 are
  different and incompatible terminal types; the UTF-8 goes
  in <strong>underneath</strong> the vt220 state machine.)</p></dd>

  <dt>Q: How do I use a different SSH port (not 22)?</dt>

        <dd><p>As of Mosh 1.2, you can pass arguments to <code>ssh</code> like so:</p>

        <pre>mosh <i>remotehost</i> <b>--ssh=&#34;ssh -p 2222&#34;</b></pre>

        <p>Or configure a host alias in <code>~/.ssh/config</code> with a
        <code>Port</code> directive.  Mosh will respect that too.</p></dd>

  <dt>Q: I&#39;m getting &#39;mosh-server not found&#39;.</dt>

  <dd><p>Please make sure that mosh is installed on the client, and
  mosh (or at least mosh-server) is installed on the server you are
  trying to connect to.  Also, the server is expected to be available
  on your server&#39;s default login <code>PATH</code>, which is not
  usually true on OS X and BSD servers, or if you install mosh-server
  in your home directory.  In these cases please see the &#34;Server
  binary outside path&#34; instructions in the Usage section,
  above.</p></dd>

  <dt>Q: SSH authenticates using Kerberos tickets, but Mosh asks me for a password.</dt>
        <dd><p>In some configurations, SSH canonicalizes the hostname
        before passing it to the Kerberos GSSAPI plugin.  This breaks
        for Mosh, because the initial forward DNS lookup is done by
        the Mosh wrapper script.  To work around this, invoke Mosh as</p>

        <pre>mosh <i>remotehost</i> <b>--ssh=&#34;ssh -o GSSAPITrustDns=no&#34;</b></pre>

        <p>This <a href="https://bugzilla.mindrot.org/show_bug.cgi?id=1008">will
        often fail</a> on a round-robin DNS setup.  In that case it is probably
        best to pick a specific host from the round-robin pool.</p></dd>

  <dt>Q: Why is my terminal&#39;s scrollback buffer incomplete?</dt>

        <dd><p>Mosh synchronizes only the <b>visible</b> state of the terminal.  We
are tracking this issue; see <a href="https://github.com/keithw/mosh/issues/2">this issue</a> and the
        others which are linked from there.  For now, the workaround is to use
        <a href="https://www.gnu.org/software/screen/">screen</a> or <a href="https://github.com/tmux/tmux">tmux</a> on the remote side.</p></dd>

  <dt>Q: How do I get 256 colors?</dt>

  <dd><p>Make sure you are running mosh in a terminal that
  advertises itself as 256-color capable. (This generally means
  TERM will be xterm-256color or screen-256color-bce.)</p></dd>

  <dt>Q: How do I type C-^, Mosh&#39;s default escape character?</dt>

  <dd><p>On keyboards with the United States layout, this can be typed
  as Ctrl-Shift-6, or often as Ctrl-6 (this depends on your OS and
  terminal emulator).  On non-US keyboards, it is often hard to find
  the right key, and sometimes it&#39;s not available at all.  If your
  keyboard has a dead key with an accent-circumflex, this is not
  likely to be the right key.  Ctrl-6 sometimes works, though.  If you
  are unable to type this character, you will need to set
  the <code>MOSH_ESCAPE_KEY</code> variable; see the Mosh man page for
  details.</p></dd>

  <dt>Q: How can I make the server automatically clean up dormant sessions?</dt>

  <dd><p>Please see the entries for <code>MOSH_SERVER_NETWORK_TMOUT</code>
      and <code>MOSH_SERVER_SIGNAL_TMOUT</code> in the <i>mosh-server(1)</i> man page.</p></dd>

  <dt>Q: What is Mosh&#39;s security track record so far?</dt>

  <dd><p>Mosh 1.0 was released in March 2012. As of the release of Mosh
      1.4.0 in October 2022, as far as the developers are aware:

      </p><ul>
      
      <li>In the last decade, <b>no security vulnerabilities of
	any kind</b> (major or minor) have been reported in Mosh.

      </li><li>No major security vulnerabilities have <b>ever</b> been
      reported in Mosh. We define major security vulnerabilities to
      include privilege escalation, remote code execution,
      denial-of-service by a third party, etc.

      </li><li>Two denial-of-service issues were discovered and fixed in
	releases in 2012. One issue allowed a mosh-server to cause the
	mosh-client to spend excess CPU (CVE-2012-2385, fixed in Mosh
	1.2.1, released May 2012). Another issue allowed the server
	host to cause the mosh-client to send UDP datagrams to an
	incorrect address, foiling its attempt to connect (fixed in
	Mosh 1.2.3, released October 2012).
      </li></ul></dd>

      <dt>Q: How does Mosh&#39;s security compare with SSH&#39;s?</dt>
      
    <dd><p>We think that Mosh&#39;s conservative design means that its attack
      surface compares favorably with more-complicated systems like
      OpenSSL and OpenSSH. Mosh&#39;s track record has so
      far borne this out. Ultimately, however, only time will tell
      when the first serious security vulnerability is discovered in
      Mosh—either because it was there all along or because it
      was added inadvertently in development. OpenSSH and OpenSSL have
      had more vulnerabilities, but they have also been released
      longer and are more prevalent.</p>

    <p>In one concrete respect, the Mosh protocol is more secure than
      SSH&#39;s: SSH relies on unauthenticated TCP to carry the contents
      of the secure stream. That means that an attacker can end an SSH
      connection with a single phony &#34;RST&#34; segment. By contrast, Mosh
      applies its security at a different layer (authenticating every
      datagram), so an attacker cannot end a Mosh session unless the
      attacker can <b>continuously</b> prevent packets from reaching
      the other side. A transient attacker can cause only a transient
      user-visible outage; once the attacker goes away, Mosh will
      resume the session.</p>

    <p>However, in typical usage, Mosh relies on SSH to exchange keys
      at the beginning of a session, so Mosh will inherit the
      weaknesses of SSH—at least insofar as they affect the
      brief SSH session that is used to set up a long-running Mosh
      session.</p></dd>

  <dt>Q: Is Mosh affected by the 2018 <a href="https://eprint.iacr.org/2018/1040.pdf">attacks against the OCB2 cipher mode</a>?</dt>

  <dd><p>Not that we know of—Mosh uses OCB3. The authors of the
paper write that the attack is not applicable to OCB3.</p></dd>

  <dt>Q: Why does mosh use AES-128 for a session-key, not AES-192 or AES-256?</dt>

  <dd>
    <ul>
      <li>AES-128 is more than an adequate key length for a session key.</li>

      <li>The <a href="https://web.cs.ucdavis.edu/~rogaway/ocb/ocb-faq.htm#what-blockcipher">OCB FAQ</a> recommends AES-128.</li>

      <li>AES-128 is a bit nicer and is not subject to the related-key attacks that afflict AES-192 and AES-256. (Schneier: &#34;the key schedule for 256-bit version is pretty lousy -- something we pointed out in our 2000 paper -- but doesn&#39;t extend to AES with a 128-bit key.&#34; See <a href="https://www.schneier.com/blog/archives/2009/07/another_new_aes.html">this blog post</a>.)</li>
    </ul>
  </dd>

  <dt>Q: Does mosh work with Amazon EC2?</dt>

  <dd><p>Yes, it works great, but please remember to open up UDP ports 60000–61000 on the EC2 firewall.</p></dd>

  <dt>Q: How do I tell if mosh is working correctly?</dt>

  <dd>
      <p>After you run <code>mosh user@server</code>, if successful you will be dropped into your login
      shell on the remote machine.

      If you want
      to check that mosh is being used instead of ssh, try typing <code>Ctrl-^ Ctrl-Z</code>
      to suspend the session (with mosh 1.2.4 or later on the client). Running <code>fg</code> will then return.
      </p>
  </dd>

  <dt>Q: What&#39;s the difference between mosh, mosh-client, and mosh-server?   Which one do I use?</dt>

  <dd>
      <p>The <code>mosh</code> command is a wrapper script that is designed to be the primary way that
      you use mosh.  In most cases, you can simply just replace &#34;ssh&#34; with &#34;mosh&#34; in your command line.
      Behind the scenes, the <code>mosh</code> wrapper script will SSH to the server, start up
      <code>mosh-server</code>, and then close the SSH connection.  Then it will start up the
      <code>mosh-client</code> executable on the client, passing it the necessary information for
      it to connect to the newly spawned <code>mosh-server</code> instance.
      </p>

      <p>In normal usage, <code>mosh-client</code> and
      <code>mosh-server</code> don&#39;t need to be run directly.
      </p>
  </dd>

  <dt>Q: How do I run the mosh client and server separately?</dt>

  <dd><p>If the <code>mosh</code> wrapper script isn&#39;t working for you, you can try running
    the <code>mosh-client</code> and <code>mosh-server</code> programs separately to
    form a connection. This can be a useful debugging technique.</p>

  <p>1. Log in to the remote host, and run <code>mosh-server</code>.</p>

  <p>It will give output like:</p>
<pre>$ mosh-server 

MOSH CONNECT <b>60004</b> <b>4NeCCgvZFe2RnPgrcU1PQw</b>

mosh-server (mosh 1.1.3)
Copyright 2012 Keith Winstein &lt;<a href="https://mosh.org/cdn-cgi/l/email-protection" data-cfemail="bbd6d4c8d396dfdecdded7fbd6d2cf95dedfce">[email protected]</a>&gt;
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

[mosh-server detached, pid = 30261]
</pre>

  <p>2. On the local host, run:</p>
<pre>$ MOSH_KEY=<b>key</b> mosh-client <b>remote-IP</b> <b>remote-PORT</b></pre>

<p>where &#34;key&#34; is the 22-byte string printed by mosh-server (in this
example, &#34;4NeCCgvZFe2RnPgrcU1PQw&#34;), &#34;remote-PORT&#34; is the port number
given by the server (60004 in this case), and &#34;remote-IP&#34; is the IP address of the server. You can look up the
server&#39;s IP address with &#34;host remotehost&#34;.</p>

  <p>3. If all goes well, you should have a working Mosh connection. Information about where the process fails can help us debug why Mosh isn&#39;t working for you.</p>

  </dd><dt>Q: With the mosh-server on FreeBSD or OS X, I sometimes get weird color problems. What&#39;s wrong?</dt>

  <dd><p>This <a href="https://github.com/keithw/mosh/pull/129">bug</a> is fixed in Mosh 1.2. Thanks to Ed Schouten and Peter Jeremy for tracking this down.</p></dd>

  <dt>Q: How do I contribute to mosh?</dt>

  <dd><p>We welcome your contribution! Please join us in <code>#mosh</code> channel on <a href="https://libera.chat/">Libera Chat</a> IRC, <a href="https://github.com/mobile-shell">visit us on GitHub</a>,
  or email <code><a href="https://mosh.org/cdn-cgi/l/email-protection" data-cfemail="9df0f2eef5b0f9f8ebf8f1ddf0f4e9b3f8f9e8">[email protected]</a></code>.  To contribute to our code base, please fork the repository on GitHub and open a pull request there.</p></dd>

  <dt>Q: Who helped with mosh?</dt>

  <dd><p>We&#39;re very grateful for assistance and support from:</p>

    <ul>

<li>Hari Balakrishnan, who advised this work and came up with the name.

</li><li><a href="http://www.vt100.net">Paul Williams</a>, whose reverse-engineered vt500 state diagram is the basis for the Mosh parser.

</li><li>The anonymous users who contributed session logs for tuning and measuring Mosh&#39;s predictive echo.

</li><li>Nickolai Zeldovich for helpful comments on the Mosh research paper.

</li><li>Richard Stallman for helpful discussion about the capabilities of the <a href="https://dspace.mit.edu/handle/1721.1/5694">SUPDUP Local Editing Protocol</a>.

</li><li>Nelson Elhage

</li><li>Christine Spang

</li><li>Stefie Tellex

</li><li>Joseph Sokol-Margolis

</li><li>Waseem Daher

</li><li>Bill McCloskey

</li><li>Austin Roach

</li><li>Greg Hudson

</li><li>Karl Ramm

</li><li>Alexander Chernyakhovsky

</li><li>Peter Iannucci

</li><li>Evan Broder

</li><li>Neha Narula

</li><li>Katrina LaCurts

</li><li>Ramesh Chandra

</li><li>Peter Jeremy

</li><li>Ed Schouten

</li><li>Ryan Steinmetz

</li><li>Jay Freeman

</li><li>Dave Täht

</li><li>Larry Doolittle

</li><li>Daniel Drown

</li><li>Timo Juhani Lindfors

</li><li>Timo Sirainen

</li><li>Ira Cooper

</li><li>Felix Gröbert

</li><li>Luke Mewburn

</li><li>Anton Lundin

</li><li>Philipp Haselwarter

</li><li>Timo J. Rinne

</li><li>Barosl Lee

</li><li>Andrew Chin

</li><li>Louis Kruger

</li><li>Jérémie Courrèges-Anglas

</li><li>Pasi Sjöholm

</li><li>Richard Woodbury

</li><li>Igor Bukanov

</li><li>Geoffrey Thomas

</li><li>Steve Dignam

</li><li>HIGUCHI Yuta

</li><li>Baruch Siach

</li></ul></dd>
</dl>
</div>
</div>
</section>

<section id="contact">
  
  
  


</section>

    </div></div>
  </body>
</html>
