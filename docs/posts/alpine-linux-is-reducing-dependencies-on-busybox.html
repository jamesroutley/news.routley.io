<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gitlab.alpinelinux.org/alpine/tsc/-/issues/52">Original</a>
    <h1>Alpine Linux is reducing dependencies on Busybox</h1>
    
    <div id="readability-page-1" class="page"><div>
<main id="content-body" itemscope="" itemtype="http://schema.org/SoftwareSourceCode">






<div>
<div>
<div data-full-path="alpine/tsc" data-initial="{&#34;endpoint&#34;:&#34;/alpine/tsc/-/issues/52&#34;,&#34;updateEndpoint&#34;:&#34;/alpine/tsc/-/issues/52.json&#34;,&#34;canUpdate&#34;:false,&#34;canDestroy&#34;:false,&#34;issuableRef&#34;:&#34;#52&#34;,&#34;markdownPreviewPath&#34;:&#34;/alpine/tsc/preview_markdown?target_id=52\u0026target_type=Issue&#34;,&#34;markdownDocsPath&#34;:&#34;/help/user/markdown&#34;,&#34;lockVersion&#34;:0,&#34;state&#34;:&#34;opened&#34;,&#34;issuableTemplateNamesPath&#34;:&#34;/alpine/tsc/description_templates/names/issue&#34;,&#34;initialTitleHtml&#34;:&#34;[3.17] Rework device manager handling, split busybox-initscripts&#34;,&#34;initialTitleText&#34;:&#34;[3.17] Rework device manager handling, split busybox-initscripts&#34;,&#34;initialDescriptionHtml&#34;:&#34;\u003cp data-sourcepos=\&#34;1:1-1:186\&#34; dir=\&#34;auto\&#34;\u003eIt all started in the 3.16 merge window with \u003ca href=\&#34;https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459\&#34; data-original=\&#34;a merge request\&#34; data-link=\&#34;true\&#34; data-link-reference=\&#34;true\&#34; data-project=\&#34;1\&#34; data-merge-request=\&#34;37206\&#34; data-project-path=\&#34;alpine/aports\&#34; data-iid=\&#34;34459\&#34; data-mr-title=\&#34;main/mdevd: make it a fully supported alternative to mdev\&#34; data-reference-type=\&#34;merge_request\&#34; data-container=\&#34;body\&#34; data-placement=\&#34;top\&#34; title=\&#34;\&#34; class=\&#34;gfm gfm-merge_request\&#34;\u003ea merge request\u003c/a\u003e that sparked a lot more pushback than I was expecting.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&#34;3:1-3:215\&#34; dir=\&#34;auto\&#34;\u003eGranted, the timing was bad, and the proposed changes had more impact than I realized. So \u003ca href=\&#34;/ncopa\&#34; data-user=\&#34;6\&#34; data-reference-type=\&#34;user\&#34; data-container=\&#34;body\&#34; data-placement=\&#34;top\&#34; class=\&#34;gfm gfm-project_member js-user-link\&#34; title=\&#34;Natanael Copa\&#34;\u003e@ncopa\u003c/a\u003e cherry-picked a few non-controversial changes that could be made before 3.16, and the remainder of the MR was shelved.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&#34;5:1-5:204\&#34; dir=\&#34;auto\&#34;\u003eToday I&#39;m coming back to discuss changes in \u003ca href=\&#34;https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459\&#34; data-original=\&#34;the rest of this MR (which I just reworked)\&#34; data-link=\&#34;true\&#34; data-link-reference=\&#34;true\&#34; data-project=\&#34;1\&#34; data-merge-request=\&#34;37206\&#34; data-project-path=\&#34;alpine/aports\&#34; data-iid=\&#34;34459\&#34; data-mr-title=\&#34;main/mdevd: make it a fully supported alternative to mdev\&#34; data-reference-type=\&#34;merge_request\&#34; data-container=\&#34;body\&#34; data-placement=\&#34;top\&#34; title=\&#34;\&#34; class=\&#34;gfm gfm-merge_request\&#34;\u003ethe rest of this MR (which I just reworked)\u003c/a\u003e, that I think would be beneficial for Alpine.\u003c/p\u003e\u0026#x000A;\u003cul data-sourcepos=\&#34;7:1-10:0\&#34; dir=\&#34;auto\&#34;\u003e\u0026#x000A;\u003cli data-sourcepos=\&#34;7:1-7:65\&#34;\u003eSplit \u003ccode\u003emdev-conf\u003c/code\u003e and \u003ccode\u003emdev-openrc\u003c/code\u003e from \u003ccode\u003ebusybox-initscripts\u003c/code\u003e.\u003c/li\u003e\u0026#x000A;\u003cli data-sourcepos=\&#34;8:1-8:118\&#34;\u003eMake \u003ccode\u003emdev-openrc\u003c/code\u003e, \u003ccode\u003emdevd-openrc\u003c/code\u003e and \u003ccode\u003eudev-init-scripts-openrc\u003c/code\u003e all provide the \u003ccode\u003edev-initscripts\u003c/code\u003e virtual package.\u003c/li\u003e\u0026#x000A;\u003cli data-sourcepos=\&#34;9:1-10:0\&#34;\u003eMake \u003ccode\u003ealpine-base\u003c/code\u003e depend on \u003ccode\u003edev-initscripts\u003c/code\u003e.\u003c/li\u003e\u0026#x000A;\u003c/ul\u003e\u0026#x000A;\u003cp data-sourcepos=\&#34;11:1-11:377\&#34; dir=\&#34;auto\&#34;\u003eThe goal is to have mdev, mdevd and udev all symmetrical, instead of having mdev be privileged because it&#39;s provided by busybox and the other device managers be hacks around it. (Eventually, in the future, I would like mdevd to become the default because it can be paired with libudev-zero to provide full udev emulation - whereas mdev cannot - but this is not the point here.)\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&#34;13:1-13:443\&#34; dir=\&#34;auto\&#34;\u003eAs \u003ca href=\&#34;/ncopa\&#34; data-user=\&#34;6\&#34; data-reference-type=\&#34;user\&#34; data-container=\&#34;body\&#34; data-placement=\&#34;top\&#34; class=\&#34;gfm gfm-project_member js-user-link\&#34; title=\&#34;Natanael Copa\&#34;\u003e@ncopa\u003c/a\u003e pointed out, the changes require additional modifications to \u003ccode\u003emkinitfs\u003c/code\u003e, which I am willing and able to provide manpower for: implementing the fixes, testing that things don&#39;t break, and communicating clearly and efficiently with other testers. I think the reduction in ad-hocness, which means a reduction in technical debt, is worth the effort in the long run - although \u003ca href=\&#34;/ncopa\&#34; data-user=\&#34;6\&#34; data-reference-type=\&#34;user\&#34; data-container=\&#34;body\&#34; data-placement=\&#34;top\&#34; class=\&#34;gfm gfm-project_member js-user-link\&#34; title=\&#34;Natanael Copa\&#34;\u003e@ncopa\u003c/a\u003e was 100% right to refuse during the 3.16 merge window.\u003c/p\u003e\u0026#x000A;\u003cp data-sourcepos=\&#34;15:1-15:921\&#34; dir=\&#34;auto\&#34;\u003eMore generally, and this is more a matter of opinion and totally debatable, I would like functionality to be progressively stripped from \u003ccode\u003ebusybox-initscripts\u003c/code\u003e, which is a package that gathers a bunch of miscellaneous policy scripts that are only related by the fact that their mechanism is provided by busybox. I don&#39;t think this package makes sense from a semantics point of view; it is more logical to provide the policy scripts classified by \u003cem\u003eservice\u003c/em\u003e, no matter whether or not the implementation of the service is done by busybox. To me, ideally, \u003ccode\u003ebusybox-initscripts\u003c/code\u003e would be empty, and we&#39;d have virtual packages for every service that is currently defined in it, so support for alternative implementations can be added over time. This would also ease the path to getting out of busybox, or at least providing alternative coreutils/low-level utilities implementations, is there is ever a will from Alpine to do so.\u003c/p\u003e&#34;,&#34;initialDescriptionText&#34;:&#34;It all started in the 3.16 merge window with [a merge request](https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459) that sparked a lot more pushback than I was expecting.\n\nGranted, the timing was bad, and the proposed changes had more impact than I realized. So @ncopa cherry-picked a few non-controversial changes that could be made before 3.16, and the remainder of the MR was shelved.\n\nToday I&#39;m coming back to discuss changes in [the rest of this MR (which I just reworked)](https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459), that I think would be beneficial for Alpine.\n\n- Split `mdev-conf` and `mdev-openrc` from `busybox-initscripts`.\n- Make `mdev-openrc`, `mdevd-openrc` and `udev-init-scripts-openrc` all provide the `dev-initscripts` virtual package.\n- Make `alpine-base` depend on `dev-initscripts`.\n\nThe goal is to have mdev, mdevd and udev all symmetrical, instead of having mdev be privileged because it&#39;s provided by busybox and the other device managers be hacks around it. (Eventually, in the future, I would like mdevd to become the default because it can be paired with libudev-zero to provide full udev emulation - whereas mdev cannot - but this is not the point here.)\n\nAs @ncopa pointed out, the changes require additional modifications to `mkinitfs`, which I am willing and able to provide manpower for: implementing the fixes, testing that things don&#39;t break, and communicating clearly and efficiently with other testers. I think the reduction in ad-hocness, which means a reduction in technical debt, is worth the effort in the long run - although @ncopa was 100% right to refuse during the 3.16 merge window.\n\nMore generally, and this is more a matter of opinion and totally debatable, I would like functionality to be progressively stripped from `busybox-initscripts`, which is a package that gathers a bunch of miscellaneous policy scripts that are only related by the fact that their mechanism is provided by busybox. I don&#39;t think this package makes sense from a semantics point of view; it is more logical to provide the policy scripts classified by *service*, no matter whether or not the implementation of the service is done by busybox. To me, ideally, `busybox-initscripts` would be empty, and we&#39;d have virtual packages for every service that is currently defined in it, so support for alternative implementations can be added over time. This would also ease the path to getting out of busybox, or at least providing alternative coreutils/low-level utilities implementations, is there is ever a will from Alpine to do so.&#34;,&#34;initialTaskStatus&#34;:&#34;0 of 0 tasks completed&#34;,&#34;hasClosingMergeRequest&#34;:false,&#34;issueType&#34;:&#34;issue&#34;,&#34;zoomMeetingUrl&#34;:null,&#34;sentryIssueIdentifier&#34;:null,&#34;iid&#34;:&#34;52&#34;,&#34;isHidden&#34;:false,&#34;canCreateIncident&#34;:false,&#34;projectPath&#34;:&#34;tsc&#34;,&#34;projectId&#34;:1319,&#34;projectNamespace&#34;:&#34;alpine&#34;}" id="js-issuable-app">

<div>
<div><p data-sourcepos="1:1-1:186" dir="auto">It all started in the 3.16 merge window with <a href="https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459" data-original="a merge request" data-link="true" data-link-reference="true" data-project="1" data-merge-request="37206" data-project-path="alpine/aports" data-iid="34459" data-mr-title="main/mdevd: make it a fully supported alternative to mdev" data-reference-type="merge_request" data-container="body" data-placement="top" title="">a merge request</a> that sparked a lot more pushback than I was expecting.</p>
<p data-sourcepos="3:1-3:215" dir="auto">Granted, the timing was bad, and the proposed changes had more impact than I realized. So <a href="https://jvns.ca/ncopa" data-user="6" data-reference-type="user" data-container="body" data-placement="top" title="Natanael Copa">@ncopa</a> cherry-picked a few non-controversial changes that could be made before 3.16, and the remainder of the MR was shelved.</p>
<p data-sourcepos="5:1-5:204" dir="auto">Today I&#39;m coming back to discuss changes in <a href="https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/34459" data-original="the rest of this MR (which I just reworked)" data-link="true" data-link-reference="true" data-project="1" data-merge-request="37206" data-project-path="alpine/aports" data-iid="34459" data-mr-title="main/mdevd: make it a fully supported alternative to mdev" data-reference-type="merge_request" data-container="body" data-placement="top" title="">the rest of this MR (which I just reworked)</a>, that I think would be beneficial for Alpine.</p>
<ul data-sourcepos="7:1-10:0" dir="auto">
<li data-sourcepos="7:1-7:65">Split <code>mdev-conf</code> and <code>mdev-openrc</code> from <code>busybox-initscripts</code>.</li>
<li data-sourcepos="8:1-8:118">Make <code>mdev-openrc</code>, <code>mdevd-openrc</code> and <code>udev-init-scripts-openrc</code> all provide the <code>dev-initscripts</code> virtual package.</li>
<li data-sourcepos="9:1-10:0">Make <code>alpine-base</code> depend on <code>dev-initscripts</code>.</li>
</ul>
<p data-sourcepos="11:1-11:377" dir="auto">The goal is to have mdev, mdevd and udev all symmetrical, instead of having mdev be privileged because it&#39;s provided by busybox and the other device managers be hacks around it. (Eventually, in the future, I would like mdevd to become the default because it can be paired with libudev-zero to provide full udev emulation - whereas mdev cannot - but this is not the point here.)</p>
<p data-sourcepos="13:1-13:443" dir="auto">As <a href="https://jvns.ca/ncopa" data-user="6" data-reference-type="user" data-container="body" data-placement="top" title="Natanael Copa">@ncopa</a> pointed out, the changes require additional modifications to <code>mkinitfs</code>, which I am willing and able to provide manpower for: implementing the fixes, testing that things don&#39;t break, and communicating clearly and efficiently with other testers. I think the reduction in ad-hocness, which means a reduction in technical debt, is worth the effort in the long run - although <a href="https://jvns.ca/ncopa" data-user="6" data-reference-type="user" data-container="body" data-placement="top" title="Natanael Copa">@ncopa</a> was 100% right to refuse during the 3.16 merge window.</p>
<p data-sourcepos="15:1-15:921" dir="auto">More generally, and this is more a matter of opinion and totally debatable, I would like functionality to be progressively stripped from <code>busybox-initscripts</code>, which is a package that gathers a bunch of miscellaneous policy scripts that are only related by the fact that their mechanism is provided by busybox. I don&#39;t think this package makes sense from a semantics point of view; it is more logical to provide the policy scripts classified by <em>service</em>, no matter whether or not the implementation of the service is done by busybox. To me, ideally, <code>busybox-initscripts</code> would be empty, and we&#39;d have virtual packages for every service that is currently defined in it, so support for alternative implementations can be added over time. This would also ease the path to getting out of busybox, or at least providing alternative coreutils/low-level utilities implementations, is there is ever a will from Alpine to do so.</p></div>
</div>

</div>
</div>


</div>






</main>
</div></div>
  </body>
</html>
