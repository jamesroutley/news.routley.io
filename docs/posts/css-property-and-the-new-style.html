<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ryanmulligan.dev/blog/css-property-new-style/">Original</a>
    <h1>CSS @property and the new style</h1>
    
    <div id="readability-page-1" class="page"><div id="main"><figure aria-hidden="true">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256">
    <rect width="256" height="256" fill="none"></rect>
    <circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle>
    <circle cx="128" cy="128" r="88" fill="none" stroke="currentcolor" stroke-miterlimit="10" stroke-width="16"></circle>
    <line x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
    <line x1="104" y1="8" x2="152" y2="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line>
  </svg>
</figure>




<section>
  <div>
    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentcolor" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><path d="M40,88H216V48a8,8,0,0,0-8-8H48a8,8,0,0,0-8,8Z" fill="var(--color-theme-accent)"></path><rect x="40" y="40" width="176" height="176" rx="8" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></rect><line x1="176" y1="24" x2="176" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="80" y1="24" x2="80" y2="56" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="40" y1="88" x2="216" y2="88" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line></svg>

    <p><span>Posted on <strong>September 2, 2024</strong></span>
  </p></div>
  <div>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="var(--color-text-accent)" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><circle cx="128" cy="128" r="88" fill="var(--color-theme)"></circle><circle cx="128" cy="128" r="88" fill="none" stroke="var(--color-text-accent)" stroke-miterlimit="10" stroke-width="16"></circle><line x1="128" y1="128" x2="167.6" y2="88.4" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="104" y1="8" x2="152" y2="8" fill="none" stroke="var(--color-text-accent)" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line></svg>

    <p><span> Takes about <strong>9 minutes</strong> to read </span>
  </p></div>
</section>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@property"><code>@property</code></a> at-rule recently gained support across all modern browsers, unlocking the ability to explicitly define a syntax, initial value, and inheritance for CSS custom properties. It seems like forever ago that CSS Houdini and its <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API">CSS Properties and Values API</a> were initially introduced. I experimented sparingly over time, reading articles that danced around the concepts, but I had barely scratched the surface of what <code>@property</code> could offer. The ensuing demo explores what&#39;s possible in the next generation of CSS.</p>
<h2 id="calls-to-action">Calls to action</h2>
<p>Ever seen those sleek, attention-seeking, shiny call-to-action webpage elements? Waves of sites across the web, especially the ones marketing services and software urging for you to &#34;Upgrade your account&#34; or &#34;Sign up today,&#34; have discovered the look and latched on. I&#39;m not here to knock it and admittedly think it&#39;s kind of fresh. I thought I&#39;d give that style a try myself. Check out the result in the CodePen below.</p>
<p data-height="500" data-preview="false" data-default-tab="result" data-slug-hash="MWMqXbK" data-user="hexagoncircle">
  <a href="https://codepen.io/hexagoncircle/pen/MWMqXbK??editors=0100">
    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" fill="currentcolor"><path d="M502.285 159.704l-234-156c-7.987-4.915-16.511-4.96-24.571 0l-234 156C3.714 163.703 0 170.847 0 177.989v155.999c0 7.143 3.714 14.286 9.715 18.286l234 156.022c7.987 4.915 16.511 4.96 24.571 0l234-156.022c6-3.999 9.715-11.143 9.715-18.286V177.989c-.001-7.142-3.715-14.286-9.716-18.285zM278 63.131l172.286 114.858-76.857 51.429L278 165.703V63.131zm-44 0v102.572l-95.429 63.715-76.857-51.429L234 63.131zM44 219.132l55.143 36.857L44 292.846v-73.714zm190 229.715L61.714 333.989l76.857-51.429L234 346.275v102.572zm22-140.858l-77.715-52 77.715-52 77.715 52-77.715 52zm22 140.858V346.275l95.429-63.715 76.857 51.429L278 448.847zm190-156.001l-55.143-36.857L468 219.132v73.714z"></path></svg>
    <span>Open CodePen demo</span>
  </a>
</p>

<p>There&#39;s a ton to unpack in this demo. Let&#39;s start with that shine looping around the button. Toggle open the demo&#39;s CSS panel to find a collection of <code>@property</code> rules related to those custom properties that need to animate. Here&#39;s the one defined for the <code>--gradient-angle</code>:</p>
<pre><code><span><span>@property</span> --gradient-angle</span> <span>{</span>
  <span>syntax</span><span>:</span> <span>&#34;&lt;angle&gt;&#34;</span><span>;</span>
  <span>initial-value</span><span>:</span> 0deg<span>;</span>
  <span>inherits</span><span>:</span> <span>false</span><span>;</span>
<span>}</span></code></pre>
<p>The <code>@property</code> rule communicates to the browser that <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/angle"><code>&lt;angle&gt;</code></a> is the allowed syntax for this custom property and its initial value is <code>0deg</code>. This enables the browser to smoothly transition from <code>0deg</code> to <code>360deg</code> and output a rotating gradient.</p>
<pre><code><span><span>@keyframes</span> rotate-gradient</span> <span>{</span>
  <span>to </span><span>{</span> <span>--gradient-angle</span><span>:</span> 360deg<span>;</span> <span>}</span>
<span>}</span>

<span>.rotate-gradient </span><span>{</span>
  <span>background</span><span>:</span> <span>conic-gradient</span><span>(</span>from <span>var</span><span>(</span>--gradient-angle<span>)</span><span>,</span> transparent<span>,</span> black<span>)</span><span>;</span>
  <span>animation</span><span>:</span> rotate-gradient 10s linear infinite<span>;</span>
<span>}</span></code></pre>
<p>I put together a simple gradient spin demo to focus on the handful of lines necessary to render this concept.</p>
<p data-height="300" data-preview="true" data-default-tab="result" data-slug-hash="eYwLqJx" data-user="hexagoncircle">
  <a href="https://codepen.io/hexagoncircle/pen/eYwLqJx">
    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" fill="currentcolor"><path d="M502.285 159.704l-234-156c-7.987-4.915-16.511-4.96-24.571 0l-234 156C3.714 163.703 0 170.847 0 177.989v155.999c0 7.143 3.714 14.286 9.715 18.286l234 156.022c7.987 4.915 16.511 4.96 24.571 0l234-156.022c6-3.999 9.715-11.143 9.715-18.286V177.989c-.001-7.142-3.715-14.286-9.716-18.285zM278 63.131l172.286 114.858-76.857 51.429L278 165.703V63.131zm-44 0v102.572l-95.429 63.715-76.857-51.429L234 63.131zM44 219.132l55.143 36.857L44 292.846v-73.714zm190 229.715L61.714 333.989l76.857-51.429L234 346.275v102.572zm22-140.858l-77.715-52 77.715-52 77.715 52-77.715 52zm22 140.858V346.275l95.429-63.715 76.857 51.429L278 448.847zm190-156.001l-55.143-36.857L468 219.132v73.714z"></path></svg>
    <span>Open CodePen demo</span>
  </a>
</p>

<p>We can achieve the shiny animated border effect by evolving this code a bit. We&#39;ll introduce a <code>linear-gradient</code> as the first value of the element&#39;s <code>background</code> property and set a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/background-origin"><code>background-origin</code></a> to each value.</p>
<ul>
<li>The origin of the <code>linear-gradient</code> is set to <code>padding-box</code>. This prevents the gradient from spilling into the border area.</li>
<li>The <code>conic-gradient</code> origin is set to <code>border-box</code>. This gradient overflows into the space created by the border width.</li>
<li>To reveal the rotating <code>conic-gradient</code>, a single-pixel transparent border is added.</li>
</ul>
<pre><code><span>.border-gradient </span><span>{</span>
  <span>background</span><span>:</span> 
    <span>linear-gradient</span><span>(</span>black<span>,</span> black<span>)</span> padding-box<span>,</span>
    <span>conic-gradient</span><span>(</span>from <span>var</span><span>(</span>--gradient-angle<span>)</span><span>,</span> transparent 25%<span>,</span> white<span>,</span> transparent 50%<span>)</span> border-box<span>;</span>
  <span>border</span><span>:</span> 1px solid transparent<span>;</span>
<span>}</span></code></pre>
<p>In the CSS panel of the <a href="#cp_embed_eYwLqJx">simple gradient spin demo</a>, uncomment the <code>.border-gradient</code> ruleset to reveal the shiny animated border. Looking pretty slick! For more examples, I&#39;ve included a bunch of animated gradient border articles in the <a href="#helpful-resources">resources section</a> at the end of the post.</p>
<h2 id="silky-smooth-hover-transitions">Silky smooth hover transitions</h2>
<p>A few special ingredients help facilitate a buttery smooth gradient transition when the element is hovered. Let&#39;s dig into its <code>background</code> values:</p>
<pre><code><span>.shiny-cta </span><span>{</span>
  <span>background</span><span>:</span> 
    <span>linear-gradient</span><span>(</span><span>var</span><span>(</span>--shiny-cta-bg<span>)</span><span>,</span> <span>var</span><span>(</span>--shiny-cta-bg<span>)</span><span>)</span> padding-box<span>,</span>
    <span>conic-gradient</span><span>(</span>
        <span>from</span> <span>calc</span><span>(</span><span>var</span><span>(</span>--gradient-angle<span>)</span> <span>-</span> <span>var</span><span>(</span>--gradient-angle-offset<span>)</span><span>)</span><span>,</span>
        transparent<span>,</span>
        <span>var</span><span>(</span>--shiny-cta-highlight<span>)</span> <span>var</span><span>(</span>--gradient-percent<span>)</span><span>,</span>
        <span>var</span><span>(</span>--gradient-shine<span>)</span> <span>calc</span><span>(</span><span>var</span><span>(</span>--gradient-percent<span>)</span> <span>*</span> 2<span>)</span><span>,</span>
        <span>var</span><span>(</span>--shiny-cta-highlight<span>)</span> <span>calc</span><span>(</span><span>var</span><span>(</span>--gradient-percent<span>)</span> <span>*</span> 3<span>)</span><span>,</span>
        transparent <span>calc</span><span>(</span><span>var</span><span>(</span>--gradient-percent<span>)</span> <span>*</span> 4<span>)</span>
      <span>)</span>
      border-box<span>;</span>
<span>}</span></code></pre>
<p>Each custom property that needs to animate has a <code>syntax</code> declared in its <code>@property</code> definition so that the browser can interpolate between corresponding value changes and transition them seamlessly. The size of the shiny area is determined by the <code>--gradient-percent</code> value. On hover, a higher percentage lengthens the shine. The <code>--gradient-angle-offset</code> value is used to readjust the gradient angle so that the shine doesn&#39;t rubber band back and forth on hover.</p>
<figure>
    <video preload="metadata" loop="" muted="" playsinline="" controls="">
      <source src="/videos/shiny-cta-angle-offset.webm#t=0.001" type="video/webm"/>
      <source src="/videos/shiny-cta-angle-offset.mp4#t=0.001" type="video/mp4"/>
      <p>Your browser cannot play the provided video file.</p>
    </video>
  <figcaption>Demonstrating the transition behavior without the angle offset value</figcaption></figure>
<p>I had to fine-tune the percent and offset values until the shine length and transition felt optically aligned. Finally, the <code>--gradient-shine</code> brightness gets toned down to blend more seamlessly with the adjacent highlight colors.</p>
<h2 id="slow-it-on-down">Slow it on down</h2>
<p>This <a href="https://css-tip.com/slow-down-rotation/">CSS tip to slow down a rotation on hover</a> truly blew my mind. In the tip&#39;s example code, the same rotate animation is declared twice. The second one is reversed and paused, its duration divided in half. When the element is hovered, <code>animation-play-state: running</code> overrides the <code>paused</code> value and slows the rotation to half speed. The mind-blowing part, at least to me, is that the animation speeds back up at the current position when the element is no longer hovered. No snapping back to a start position, no extra wrapper elements necessary. That is one heck of a tip.</p>
<p>The <a href="#cp_embed_MWMqXbK">call-to-action animations</a> rely on this method to slow them down when the button is hovered. This technique keeps all the rotations and movements in sync as they change speed.</p>
<h2 id="tiny-shiny-dots">Tiny shiny dots</h2>
<p>Looking even closer, we&#39;ll discover pinhole-sized dots shimmering inside the button as the shiny border passes near them. To render this dot pattern, a <code>radial-gradient</code> background is created.</p>
<pre><code><span>.shiny-cta::before </span><span>{</span>
  <span>--position</span><span>:</span> 2px<span>;</span>
  <span>--space</span><span>:</span> <span>calc</span><span>(</span><span>var</span><span>(</span>--position<span>)</span> <span>*</span> 2<span>)</span><span>;</span>
  <span>background</span><span>:</span> <span>radial-gradient</span><span>(</span>
      circle at <span>var</span><span>(</span>--position<span>)</span> <span>var</span><span>(</span>--position<span>)</span><span>,</span>
      white <span>calc</span><span>(</span><span>var</span><span>(</span>--position<span>)</span> <span>/</span> 4<span>)</span><span>,</span>
      transparent 0
    <span>)</span>
    padding-box<span>;</span>
  <span>background-size</span><span>:</span> <span>var</span><span>(</span>--space<span>)</span> <span>var</span><span>(</span>--space<span>)</span><span>;</span>
  <span>background-repeat</span><span>:</span> space<span>;</span>
<span>}</span></code></pre>
<p>Remember that <code>--gradient-angle</code> custom property? It has returned! But this time, it&#39;s being used in a <code>conic-gradient</code> mask that reveals parts of the dot pattern as it rotates. The gradient angle is offset by 45 degrees to align it perfectly with the shiny border rotation.</p>
<pre><code><span>.shiny-cta::before </span><span>{</span>
  <span>mask-image</span><span>:</span> <span>conic-gradient</span><span>(</span>
    <span>from</span> <span>calc</span><span>(</span><span>var</span><span>(</span>--gradient-angle<span>)</span> <span>+</span> 45deg<span>)</span><span>,</span>
    black<span>,</span>
    transparent 10% 90%<span>,</span>
    black
  <span>)</span><span>;</span>
<span>}</span></code></pre>
<p>For one last touch of magic, a gradient containing the highlight color is added to the <code>::after</code> pseudo element, spinning in unison with the shine area. These highlights flowing through the button add a pleasant, welcoming ambience that was previously missing.</p>
<h2 id="enhancing-the-hover-colors">Enhancing the hover colors</h2>
<p>The hover styles looked decent. But they didn&#39;t seem totally finished. I felt the desire to enhance. Create more depth. <a href="https://ryanmulligan.dev/blog/detect-js-support-in-css/#:~:text=%22Make%20it%20pop!%22">Make it pop, as they say</a>.</p>
<p>The button&#39;s <code>::before</code> and <code>::after</code> pseudo elements were already in use so I wrapped the button text in a <code>span</code> element. A blurred <code>box-shadow</code> containing the highlight color is applied to one of its pseudo elements which is then expanded to fill the button dimensions. On hover, the pseudo element slowly scales up and down, evoking a vibe similar to relaxed breathing. Paired with the spinning highlight color inside the button, the effect finally resonated with me. This intricately designed call-to-action button felt complete.</p>
<h2 id="in-with-the-new-style">In with the new style</h2>
<p>Many of the above techniques would have been nearly impossible only a short time ago. Explicitly defining custom properties unlocks a great big world of opportunity. I&#39;m especially eager to see how <code>@property</code> will be utilized in large-scale applications and design systems. <a href="https://moderncss.dev/providing-type-definitions-for-css-with-at-property/">Providing Type Definitions for CSS with @property</a> by Stephanie Eckles as well as Adam Argyle&#39;s <a href="https://nerdy.dev/cant-break-this-design-system">Type safe CSS design systems with @property</a> are just a couple glimpses into a really promising future for publishing our CSS.</p>
<h2 id="helpful-resources">Helpful resources</h2>
<ul>
<li><a href="https://www.learnwithjason.dev/blog/animated-css-gradient-border/">Animated CSS gradient borders (no JavaScript, no hacks)</a></li>
<li><a href="https://ibelick.com/blog/create-animated-gradient-borders-with-css">Creating an animated gradient border with CSS</a></li>
<li><a href="https://web.dev/articles/css-border-animations">CSS border animations</a></li>
<li><a href="https://www.bram.us/2021/01/29/animating-a-css-gradient-border/">Animating a CSS Gradient Border</a></li>
<li><a href="https://codepen.io/hexagoncircle/full/LYKJPjm">CSS border ripple effect</a></li>
<li><a href="https://www.smashingmagazine.com/2024/05/times-need-custom-property-instead-css-variable/">The Times You Need A Custom @property Instead Of A CSS Variable</a></li>
<li><a href="https://web.dev/blog/at-property-baseline">@property: Next-gen CSS variables now with universal browser support</a></li>
</ul>

<p>
  <a href="https://ryanmulligan.dev/blog/">Back to all blog posts</a>
</p>


</div></div>
  </body>
</html>
