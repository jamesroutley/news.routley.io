<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://muratbuffalo.blogspot.com/2023/08/distributed-transactions-at-scale-in.html">Original</a>
    <h1>Distributed Transactions at Scale in Amazon DynamoDB (2023)</h1>
    
    <div id="readability-page-1" class="page"><div>

<main id="main" role="main" tabindex="-1">
<div id="page_body" name="Page Body">
<div data-version="2" id="Blog1">
<div>
<article>
<div>
<div>

<h3>
Distributed Transactions at Scale in Amazon DynamoDB 
</h3>


<div id="post-body-4255466835420589187">
<p><a href="https://www.usenix.org/system/files/atc23-idziorek.pdf">This paper appeared in July at USENIX ATC 2023.</a></p><p>A killer feature of DynamoDB is predictability at any scale. Do read <a href="https://brooker.co.za/blog/2022/01/19/predictability.html">Marc Brooker&#39;s post to fully appreciate this feature.</a></p><p>Using one-shot transactions, and adopting OCC TSO algorithm checks all the boxes, and provides a transaction protocol true to DynamoDB spirit of predictable response times. After all isn&#39;t systems design all about choosing the right tradeoffs? </p><p>“Find out who you are and do it on purpose” --Dolly Parton<br/></p><p>Ok, now let&#39;s regroup. Here is what we will cover in the rest of this post. We will review the API and then learn about how the transactions are implemented. Finally we will discuss some experiment results.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEiK7WDKU-lrvnGQtLR_hfnBoKNCRw1s87tprZQMXHWYzBwDSltJwUPcW-I5MLDsZkMP4geWQ0_d3anREK12CUYzJ5HYAMT3gIL4RvXmIt2dZKQ6pEu5VNMQHcQKpSdhRGWxd-0ZUiMUB6qU0x7ahO1iDzaUjySDXZ7YMlEAVSnSjdU3FFTI9qMbT4ZlmOc"><img alt="" data-original-height="806" data-original-width="1584" height="326" src="https://blogger.googleusercontent.com/img/a/AVvXsEiK7WDKU-lrvnGQtLR_hfnBoKNCRw1s87tprZQMXHWYzBwDSltJwUPcW-I5MLDsZkMP4geWQ0_d3anREK12CUYzJ5HYAMT3gIL4RvXmIt2dZKQ6pEu5VNMQHcQKpSdhRGWxd-0ZUiMUB6qU0x7ahO1iDzaUjySDXZ7YMlEAVSnSjdU3FFTI9qMbT4ZlmOc=w640-h326" width="640"/></a></p></div>

</div>
</div>

</article>
</div>
</div><div data-version="2" id="PopularPosts1">
<h3>
Popular posts from this blog
</h3>
<div>
<div role="feed">
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2023/10/hints-for-distributed-systems-design.html">Hints for Distributed Systems Design</a></h3>

<div>
<div>
<p>
This is with apologies to Butler Lampson, who published the &#34; Hints for computer system design &#34; paper 40 years ago in SOSP&#39;83. I don&#39;t claim to match that work of course. I just thought I could draft this post to organize my thinking about designing distributed systems and get feedback from others. I start with the same  disclaimer Lampson gave. These hints are not novel, not foolproof recipes, not laws of design, not precisely formulated, and not always appropriate. They are just hints.  They are context dependent, and some of them may be controversial. That being said, I have seen these hints successfully applied in distributed systems design throughout my 25 years in the field, starting from the theory of distributed systems (98-01), immersing into the practice of wireless sensor networks (01-11), and working on cloud computing systems both in the academia and industry ever since. These heuristic principles have been applied knowingly or unknowingly and has proven...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2020/06/learning-about-distributed-systems.html"> Learning about distributed systems: where to start?</a></h3>

<div>
<div>
<p>
This is definitely not a &#34;learn distributed systems in 21 days&#34; post. I recommend a principled, from the foundations-up, studying of distributed systems, which will take a good three months in the first pass, and many more months to build competence after that.   If you are practical and coding oriented you may not like my advice much. You may object saying, &#34;Shouldn&#39;t I learn distributed systems with coding and hands on? Why can I not get started by deploying a Hadoop cluster, or studying the Raft code.&#34; I think that is the wrong way to go about learning distributed systems, because seeing similar code and programming language constructs will make you think this is familiar territory, and will give you a false sense of security. But, nothing can be further from the truth.   Distributed systems need radically different software than centralized systems do.    --A. Tannenbaum  This quotation is literally the first sentence in my distributed systems syllabus. Inst...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/08/making-database-systems-usable.html">Making database systems usable</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2024/08/making-database-systems-usable.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhu7wbyNklGJSrFBgwWvytde4zWr00DqBpM_uusD-YJZABk50a8eu21vI-lY-okTFhxFBAFAdkldB4xmyoGPmzuxJ2Ku4EE4Wk1F07ATfAtfdDjFJbUZSmFD8Id4_9UuHdny4PIRI4PUffxjoiwd2Lgtqx1QnPOOQu9JNvJYh4pdGUrxAd2wI6V3qNN6d4/w640-h365/Screenshot%202024-08-19%20at%208.34.42%E2%80%AFPM.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhu7wbyNklGJSrFBgwWvytde4zWr00DqBpM_uusD-YJZABk50a8eu21vI-lY-okTFhxFBAFAdkldB4xmyoGPmzuxJ2Ku4EE4Wk1F07ATfAtfdDjFJbUZSmFD8Id4_9UuHdny4PIRI4PUffxjoiwd2Lgtqx1QnPOOQu9JNvJYh4pdGUrxAd2wI6V3qNN6d4/w72-h72-p-k-no-nu/Screenshot%202024-08-19%20at%208.34.42%E2%80%AFPM.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhu7wbyNklGJSrFBgwWvytde4zWr00DqBpM_uusD-YJZABk50a8eu21vI-lY-okTFhxFBAFAdkldB4xmyoGPmzuxJ2Ku4EE4Wk1F07ATfAtfdDjFJbUZSmFD8Id4_9UuHdny4PIRI4PUffxjoiwd2Lgtqx1QnPOOQu9JNvJYh4pdGUrxAd2wI6V3qNN6d4/w144-h144-p-k-no-nu/Screenshot%202024-08-19%20at%208.34.42%E2%80%AFPM.png 144w"/>
</a>
</p>
<div>
<p>
C. J. Date&#39;s Sigmod 1983 keynote, &#34;Database Usability&#34;, was prescient. Usability is the most important thing to the customers. They care less about impressive benchmarks or clever algorithms, and more about whether they can operate and use a database efficiently to query, update, analyze, and persist their data with minimal headache. (BTW, does anyone have a link to the contents of this Sigmod&#39;83 talk? There is no transcript around, except for this short abstract .) The paper we cover today is from Sigmod 2007.  It takes on the database usability problem raised in that 1983 keynote head-on, and calls out that the king is still naked.  Let&#39;s give some context for the year 2007. Yes, XML format was still popular then. The use-case in the paper is XQuery. The paper does not contain any  reference to json. MongoDB would be released in 2009 with the document model; and that seems to be great timing for some of the usability pains mentioned in the paper! Web 2.0 was in ...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/08/looming-liability-machines.html">Looming Liability Machines (LLMs)</a></h3>

<div>
<div>
<p>
As part of our zoom reading group ( wow, 4.5 years old now ), we discussed a paper that uses LLMs for automatic root cause analysis (RCA) for cloud incidents. This was a pretty straightforward application of LLMs. The proposed system employs an LLM to match incoming incidents to incident handlers based on their alert types, predicts the incident&#39;s root cause category, and provides an explanatory narrative. The only customization is through prompt-engineering. Since this is a custom domain, I think a more principled and custom-designed  machine learning system would be more appropriate rather than adopting LLMs. Anyways, the use of LLMs for RCAs spooked me vicerally. I couldn&#39;t find the exact words during the paper discussion, but I can articulate this better now. Let me explain. RCA is serious business Root cause analysis (RCA) is the process of identifying the underlying causes of a problem/incident, rather than just addressing its symptoms. One RCA heuristic is asking 5 Why...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/07/advice-to-young.html">Advice to the young</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2024/07/advice-to-young.html">
<img alt="Image" sizes="72px" src="https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_tByUqGIFkfyekNj-Jp0BeUfnD0pf0myg8xNyt3DK2l7kk4M4P2GMsV2SXJ9Uj-fcAVvDHpH2HncIwoFrcp0ht0gAONYgLl2zgL_F1gP-Prn3ZwGg" srcset="https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_tByUqGIFkfyekNj-Jp0BeUfnD0pf0myg8xNyt3DK2l7kk4M4P2GMsV2SXJ9Uj-fcAVvDHpH2HncIwoFrcp0ht0gAONYgLl2zgL_F1gP-Prn3ZwGg=w72-h72-n-k-no-nu 72w, https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_tByUqGIFkfyekNj-Jp0BeUfnD0pf0myg8xNyt3DK2l7kk4M4P2GMsV2SXJ9Uj-fcAVvDHpH2HncIwoFrcp0ht0gAONYgLl2zgL_F1gP-Prn3ZwGg=w144-h144-n-k-no-nu 144w"/>
</a>
</p>
<div>
<p>
I notice I haven&#39;t written any advice posts recently. Here is a collection of my advice posts pre 2020. I&#39;ve been feeling all this elderly wisdom pent up in me, ready to pour at any moment. So here it goes. Get ready to quench your thirst from my fount of wisdom. No man, think for yourself, only get what works for you. It is called foundations, not theory Foundations of computer science (or rather any field of study) are the most important topics you can learn. These lay down the frame of thinking/perspective for that area of study. Yet, I am saddened to hear these called as &#34;theory&#34;, and labeled as &#34;unpractical&#34;. This couldn&#39;t be farther from the truth. Take a look at how I recommend studying distributed systems . Don&#39;t you dare call this &#34;theory&#34; and &#34;unpractical&#34;. This lays the bedrock that you build your practice on. Don&#39;t skimp on the foundations. Don&#39;t build your home on quicksand. Keep your hands dirty, your mind cl...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/02/foundational-distributed-systems-papers.html"> Foundational distributed systems papers</a></h3>

<div>
<div>
<p>
I talked about the importance of reading foundational papers  last week. To followup, here is my compilation of foundational papers in the distributed systems area. (I focused on the core distributed systems area, and did not cover networking, security, distributed ledgers, verification work etc. I even left out distributed transactions, I hope to cover them at a later date.)  I classified the papers by subject, and listed them in chronological order. I also listed expository papers and blog posts at the end of each section. Time and State in Distributed Systems Time, Clocks, and the Ordering of Events in a Distributed System.  Leslie Lamport, Commn. of the ACM,  1978. Distributed Snapshots: Determining Global States of a Distributed System.  K. Mani Chandy Leslie Lamport, ACM Transactions on Computer Systems, 1985. Virtual Time and Global States of Distributed Systems.  Mattern, F. 1988. Practical uses of synchronized clocks in distributed systems.  B. Liskov, 1991.  Exp...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/08/linearizability-correctness-condition.html">Linearizability: A Correctness Condition for Concurrent Objects</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2024/08/linearizability-correctness-condition.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghnCgM-ioYdzIe_FTaeiO8P0NFlNx0Ex9SalCNl4SS9UOET5Wt_mmomXMed1Ife1ooH_4BbZLVUWZX-daZpKRlztrG1HA2SMiWI52DYiAejC-u1LSpJCRdhWBOIZCLvppl7V40m5K2TmR96zOmoOqWVTPj-eLQu5L7jrFsLOrlGRDb2Eb1EPWnOfU__kc/w526-h640/Screenshot%202024-08-09%20at%205.17.14%E2%80%AFPM.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghnCgM-ioYdzIe_FTaeiO8P0NFlNx0Ex9SalCNl4SS9UOET5Wt_mmomXMed1Ife1ooH_4BbZLVUWZX-daZpKRlztrG1HA2SMiWI52DYiAejC-u1LSpJCRdhWBOIZCLvppl7V40m5K2TmR96zOmoOqWVTPj-eLQu5L7jrFsLOrlGRDb2Eb1EPWnOfU__kc/w72-h72-p-k-no-nu/Screenshot%202024-08-09%20at%205.17.14%E2%80%AFPM.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEghnCgM-ioYdzIe_FTaeiO8P0NFlNx0Ex9SalCNl4SS9UOET5Wt_mmomXMed1Ife1ooH_4BbZLVUWZX-daZpKRlztrG1HA2SMiWI52DYiAejC-u1LSpJCRdhWBOIZCLvppl7V40m5K2TmR96zOmoOqWVTPj-eLQu5L7jrFsLOrlGRDb2Eb1EPWnOfU__kc/w144-h144-p-k-no-nu/Screenshot%202024-08-09%20at%205.17.14%E2%80%AFPM.png 144w"/>
</a>
</p>
<div>
<p>
This paper is from Herlihy and Wing appeared in ACM Transactions on Programming Languages and Systems 1990.  This is the canonical reference for the linearizability definition. I had not read this paper in detail before, so I thought it would be good to go to the source to see if there are additional delightful surprises in the original text. Hence, this post. I will dive into a technical analysis of the paper first, and then discuss some of my takes toward the end. I had written an accessible explanation of linearizability earlier; you may want to read that first.  I will assume an understanding of linearizability to keep this review at reasonable length. Introduction I love how the old papers just barge in with the model, without bothered by pleasantries such as motivation of the problem. These are the first two sentences of the introduction. &#34;A concurrent system consists of a collection of sequential processes that communicate through shared typed objects . This model encompass...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/07/understanding-performance-implications.html">Understanding the Performance Implications of Storage-Disaggregated Databases</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2024/07/understanding-performance-implications.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXJxQq9Z2rYXlrqOgBmtt3gLR84OV8Jmcril1xkXuTal47vU2cKM0pjnQAo6X_PpQS44ZfSgLr2oPgpEIp0xWjyanyHD40TJKXNrvVwXQUWRFsBZBudfnqh7aR8p0rmrnA3mFjp79doyQ67JH8QcV6xyba2DbGm2z_6UvVeK05VR5TqC1qmLPZ2bkbf78/s320/Screenshot%202024-07-23%20at%204.28.42%E2%80%AFPM.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXJxQq9Z2rYXlrqOgBmtt3gLR84OV8Jmcril1xkXuTal47vU2cKM0pjnQAo6X_PpQS44ZfSgLr2oPgpEIp0xWjyanyHD40TJKXNrvVwXQUWRFsBZBudfnqh7aR8p0rmrnA3mFjp79doyQ67JH8QcV6xyba2DbGm2z_6UvVeK05VR5TqC1qmLPZ2bkbf78/w72-h72-p-k-no-nu/Screenshot%202024-07-23%20at%204.28.42%E2%80%AFPM.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjXJxQq9Z2rYXlrqOgBmtt3gLR84OV8Jmcril1xkXuTal47vU2cKM0pjnQAo6X_PpQS44ZfSgLr2oPgpEIp0xWjyanyHD40TJKXNrvVwXQUWRFsBZBudfnqh7aR8p0rmrnA3mFjp79doyQ67JH8QcV6xyba2DbGm2z_6UvVeK05VR5TqC1qmLPZ2bkbf78/w144-h144-p-k-no-nu/Screenshot%202024-07-23%20at%204.28.42%E2%80%AFPM.png 144w"/>
</a>
</p>
<div>
<p>
Storage-compute disaggregation in databases has emerged as a pivotal architecture in cloud environments, as evidenced by Amazon ( Aurora ), Microsoft ( Socrates ), Google (AlloyDB), Alibaba ( PolarDB ), and Huawei (Taurus). This approach decouples compute from storage, allowing for independent and elastic scaling of compute and storage resources. It provides fault-tolerance at the storage level. You can then share the storage for other services, such as adding read-only replicas for the databases. You can even use the storage level for easier sharding of your database. Finally, you can also use this for exporting a changelog asynchronously to feed into peripheral cloud services, such as analytics. Disaggregated architecture was the topic of Sigmod 23 panel . I think this quote summarizes the industry&#39;s thinking on the topic. &#34;Disaggregated architecture is here, and is not going anywhere. In a disaggregated architecture, storage is fungible, and computing scales independently. ...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2024/08/designing-data-intensive-applications.html">Designing Data Intensive Applications (DDIA) Book </a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2024/08/designing-data-intensive-applications.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiydFgFMoNlmW2nI8DYWY2lYzd8EaBUfKh0A1puG7NHL9txcdjnpi2BLcZWV2orSFZHX0GaNeBvhCBAWQifPzVXD9r4T5J-pYfRacGpMZqmF6r8AuQ6tsIiCxSCgGT75DLkwrzv5DX-tUH_ge_1XA5qiqL9vlSyyZYGjZTxexydGW1pMQmeD_we-GNdZ4A/s320/Screenshot%202024-08-06%20at%2012.40.58%E2%80%AFPM.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiydFgFMoNlmW2nI8DYWY2lYzd8EaBUfKh0A1puG7NHL9txcdjnpi2BLcZWV2orSFZHX0GaNeBvhCBAWQifPzVXD9r4T5J-pYfRacGpMZqmF6r8AuQ6tsIiCxSCgGT75DLkwrzv5DX-tUH_ge_1XA5qiqL9vlSyyZYGjZTxexydGW1pMQmeD_we-GNdZ4A/w72-h72-p-k-no-nu/Screenshot%202024-08-06%20at%2012.40.58%E2%80%AFPM.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiydFgFMoNlmW2nI8DYWY2lYzd8EaBUfKh0A1puG7NHL9txcdjnpi2BLcZWV2orSFZHX0GaNeBvhCBAWQifPzVXD9r4T5J-pYfRacGpMZqmF6r8AuQ6tsIiCxSCgGT75DLkwrzv5DX-tUH_ge_1XA5qiqL9vlSyyZYGjZTxexydGW1pMQmeD_we-GNdZ4A/w144-h144-p-k-no-nu/Screenshot%202024-08-06%20at%2012.40.58%E2%80%AFPM.png 144w"/>
</a>
</p>
<div>
<p>
We started reading this book as part of Alex Petrov&#39;s book club . We just got started, so you can join us, by joining the discord channel above. We meet Wednesday&#39;s 11am Eastern Time.  Previously we had read transaction processing book by Grey and Reuters. This page links to my summaries of that book. Chp 1. Reliable, Scalable, and Maintainable Applications I love the diagrams opening each chapter. Beautiful! The first chapter consists of warm up stuff. It talks about the definitions of reliabilty, scalability, and maintainability. It is still engaging, because  it is written with an educator and technical blogger voice, rather than a dry academic voice. This book came out on 2017. Martin is working on the new version. So if you have comments for things to focus on for the new version, it would be helpful to collect them in a document and email it to Martin. For example, I am curious about how the below paragraph from the Preface will get revised with 8 more years of hindsight...
</p>
</div>

</div>
</article>
</div>
</div>
</div></div>
</main>
</div></div>
  </body>
</html>
