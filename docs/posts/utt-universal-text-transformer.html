<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/queer/utt">Original</a>
    <h1>Show HN: utt â€“ Universal Text Transformer</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">utt is the <strong>u</strong>niversal <strong>t</strong>ext <strong>t</strong>ransformer. utt is intended for
converting between textual data representations. For example, utt can be used
to convert from JSON to YAML:</p>
<div data-snippet-clipboard-copy-content="$ echo &#34;[1, 2, 3]&#34; | utt -i json -o yaml
---
- 1
- 2
- 3

$ "><pre>$ <span>echo</span> <span><span>&#34;</span>[1, 2, 3]<span>&#34;</span></span> <span>|</span> utt -i json -o yaml
---
- 1
- 2
- 3

$ </pre></div>
<p dir="auto">Formats may be supported for input-only or output-only. You can see all
supported formats by running <code>utt</code> with no arguments.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/71d94f97c8614032e5c9d2e904f996c01d430f0c3a8cb62dea6643a0bef761c2/68747470733a2f2f63646e2e6d65776e612e78797a2f323032322f30332f30382f6a3534547030794f59357847772e706e67"><img src="https://camo.githubusercontent.com/71d94f97c8614032e5c9d2e904f996c01d430f0c3a8cb62dea6643a0bef761c2/68747470733a2f2f63646e2e6d65776e612e78797a2f323032322f30332f30382f6a3534547030794f59357847772e706e67" alt="" data-canonical-src="https://cdn.mewna.xyz/2022/03/08/j54Tp0yOY5xGw.png"/></a></p>
<p dir="auto">Note: &#34;universal&#34; is a <em>big</em> claim, and I understand that utt isn&#39;t truly
universal. However, it is an active goal to work on supporting more and more
formats and transformations to make utt as close to truly universal as
possible.</p>
<h2 dir="auto"><a id="user-content-getting-it" aria-hidden="true" href="#getting-it"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting it</h2>
<p dir="auto">A UNIX-compatible binary is automatically released here: <a href="https://github.com/queer/utt/releases">https://github.com/queer/utt/releases</a>.
This binary is just:</p>
<div data-snippet-clipboard-copy-content="$ echo &#34;#!/usr/bin/env -S java -jar&#34; &gt; utt &amp;&amp; cat utt-*.jar &gt;&gt; utt &amp;&amp; chmod +x utt"><pre>$ <span>echo</span> <span><span>&#34;</span>#!/usr/bin/env -S java -jar<span>&#34;</span></span> <span>&gt;</span> utt <span>&amp;&amp;</span> cat utt-<span>*</span>.jar <span>&gt;&gt;</span> utt <span>&amp;&amp;</span> chmod +x utt</pre></div>
<p dir="auto">On Windows, run <code>mvn clean package</code> to create a JAR file in <code>target/</code>.</p>
<h2 dir="auto"><a id="user-content-what-and-why" aria-hidden="true" href="#what-and-why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What and why</h2>
<p dir="auto">utt (case-sensitive) is a tool for converting between textual data formats. utt
was originally written for a project that involved a lot of annoying
conversions, to the point where one-off scripts wouldn&#39;t be enough.</p>
<p dir="auto">utt makes some tradeoffs in the name of functionality. For example, utt does
<em>not</em> process data in a streaming manner, but rather loads the entire dataset
into memory before processing. In exchange, utt is more flexible in what it
accepts as input and output formats. For example, utt can only output to CSV by
<a href="https://github.com/queer/utt/blob/ffb886a64ecc24cf1320cf8adf5ec02cd9ad8221/src/main/java/gg/amy/utt/transform/impl/CsvTransformer.java#L34-L89">iterating over the input data to determine the output schema</a>.
Similarly, utt&#39;s mapping functionality relies on the GraalVM Polyglot API,
which has a high (~500ms) startup time.</p>
<h2 dir="auto"><a id="user-content-examples" aria-hidden="true" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<h3 dir="auto"><a id="user-content-convert-from-json-to-yaml" aria-hidden="true" href="#convert-from-json-to-yaml"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Convert from JSON to YAML</h3>
<div data-snippet-clipboard-copy-content="$ echo &#39;{&#34;key&#34;: [1, 2, 3]}&#39; | utt -i json -o yaml
---
key:
- 1
- 2
- 3

$"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;key&#34;: [1, 2, 3]}<span>&#39;</span></span> <span>|</span> utt -i json -o yaml
---
key:
- 1
- 2
- 3

$</pre></div>
<h3 dir="auto"><a id="user-content-extract-keys-from-a-json-object" aria-hidden="true" href="#extract-keys-from-a-json-object"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extract keys from a JSON object</h3>
<div data-snippet-clipboard-copy-content="$ echo &#39;[{&#34;key&#34;: 1}, {&#34;key&#34;: 2}, {&#34;key&#34;: 3}]&#39; | utt -i json -o json -M &#39;_.key&#39;
[1.0,2.0,3.0]
$"><pre>$ <span>echo</span> <span><span>&#39;</span>[{&#34;key&#34;: 1}, {&#34;key&#34;: 2}, {&#34;key&#34;: 3}]<span>&#39;</span></span> <span>|</span> utt -i json -o json -M <span><span>&#39;</span>_.key<span>&#39;</span></span>
[1.0,2.0,3.0]
$</pre></div>
<h3 dir="auto"><a id="user-content-flatten-a-list" aria-hidden="true" href="#flatten-a-list"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Flatten a list</h3>
<div data-snippet-clipboard-copy-content="$ echo &#39;[[1], [2], [3]]&#39; | utt -i json -o json -F
[1.0,2.0,3.0]
$"><pre>$ <span>echo</span> <span><span>&#39;</span>[[1], [2], [3]]<span>&#39;</span></span> <span>|</span> utt -i json -o json -F
[1.0,2.0,3.0]
$</pre></div>
<h3 dir="auto"><a id="user-content-encode-text-with-base64" aria-hidden="true" href="#encode-text-with-base64"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encode text with base64</h3>
<div data-snippet-clipboard-copy-content="$ echo &#34;this is a test&#34; | utt -i plain -o base64
dGhpcyBpcyBhIHRlc3Q=
$"><pre>$ <span>echo</span> <span><span>&#34;</span>this is a test<span>&#34;</span></span> <span>|</span> utt -i plain -o base64
dGhpcyBpcyBhIHRlc3Q=
$</pre></div>
<h3 dir="auto"><a id="user-content-extract-inner-values-and-flatten" aria-hidden="true" href="#extract-inner-values-and-flatten"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extract inner values and flatten</h3>
<div data-snippet-clipboard-copy-content="$ echo &#39;{&#34;key&#34;: [1, [2], [[3]]]}&#39; | utt -i json -o json -M &#39;_.key&#39; -F
[1.0,2.0,3.0]
$ "><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;key&#34;: [1, [2], [[3]]]}<span>&#39;</span></span> <span>|</span> utt -i json -o json -M <span><span>&#39;</span>_.key<span>&#39;</span></span> -F
[1.0,2.0,3.0]
$ </pre></div>
<h3 dir="auto"><a id="user-content-extract-a-json-array-from-an-xml-object" aria-hidden="true" href="#extract-a-json-array-from-an-xml-object"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extract a JSON array from an XML object</h3>
<div data-snippet-clipboard-copy-content="$ echo &#34;&lt;a&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;/a&gt;&#34; | utt -i xml -o json -M &#39;$.b&#39;
[&#34;c&#34;,&#34;c&#34;,&#34;c&#34;,&#34;c&#34;]
$"><pre>$ <span>echo</span> <span><span>&#34;</span>&lt;a&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;b&gt;c&lt;/b&gt;&lt;/a&gt;<span>&#34;</span></span> <span>|</span> utt -i xml -o json -M <span><span>&#39;</span>$.b<span>&#39;</span></span>
[<span><span>&#34;</span>c<span>&#34;</span></span>,<span><span>&#34;</span>c<span>&#34;</span></span>,<span><span>&#34;</span>c<span>&#34;</span></span>,<span><span>&#34;</span>c<span>&#34;</span></span>]
$</pre></div>
<h3 dir="auto"><a id="user-content-apply-a-map-function-to-the-values-of-a-list" aria-hidden="true" href="#apply-a-map-function-to-the-values-of-a-list"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Apply a map function to the values of a list</h3>
<div data-snippet-clipboard-copy-content="$ echo &#34;[1,2,3]&#34; | utt -i json -o yaml -M &#34;_ * 2&#34;
---
- 2.0
- 4.0
- 6.0

$"><pre>$ <span>echo</span> <span><span>&#34;</span>[1,2,3]<span>&#34;</span></span> <span>|</span> utt -i json -o yaml -M <span><span>&#34;</span>_ * 2<span>&#34;</span></span>
---
- 2.0
- 4.0
- 6.0

$</pre></div>
</article>
        </div></div>
  </body>
</html>
