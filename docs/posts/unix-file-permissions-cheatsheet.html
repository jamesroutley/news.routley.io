<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://iafisher.com/blog/2024/11/unix-file-permissions-cheatsheet">Original</a>
    <h1>Unix file permissions cheatsheet</h1>
    
    <div id="readability-page-1" class="page"><div class="page">
  <header>
  <a href="https://github.com/">home</a>
  <a href="https://github.com/blog">blog</a>
  <a href="https://github.com/portfolio">portfolio</a>
  <a href="https://outsiderart.substack.com/" target="_blank">outsider art</a>
  <a href="https://github.com/iafisher" target="_blank">github</a>
</header>


  
  

  <ul>
<li>What permission do I need to <strong>access a path</strong> <code>a/b/c</code>, where <code>c</code> is not a directory?<ul>
<li><code>+x</code> on every directory in the path, and whatever relevant permissions on <code>c</code> (<code>+r</code> to read it, <code>+w</code> to write to it, etc.)</li>
<li>If <code>a/b/c</code> is a relative path, then also <code>+x</code> on the implicit current directory.</li>
<li>(All following examples assume these basic permissions.)</li>
</ul>
</li>
<li>…to <strong>list</strong> a directory&#39;s contents?<ul>
<li><code>+r</code> on the directory</li>
</ul>
</li>
<li>…to <strong>change</strong> into a directory?<ul>
<li><code>+x</code> on the directory</li>
</ul>
</li>
<li>…to <strong>create</strong> a new file in a directory?<ul>
<li><code>+wx</code> on the directory</li>
</ul>
</li>
<li>…to <strong>remove</strong> a file from a directory?<ul>
<li><code>+wx</code> on the directory</li>
</ul>
</li>
<li>…to <strong>rename</strong> a file?<ul>
<li><code>+wx</code> on the directory</li>
</ul>
</li>
<li>…to <strong>move</strong> a file to another directory?<ul>
<li>The short answer is <code>+wx</code> on both the directory of the source file and the target directory.</li>
<li>For the long answer, see <a href="https://iafisher.com/blog/2024/11/mv-file-permissions">my previous blog post</a>.</li>
</ul>
</li>
<li>…to <strong>copy</strong> a file from one directory to another?<ul>
<li><code>+x</code> on the source directory, <code>+wx</code> on the target directory, and <code>+r</code> on the file</li>
</ul>
</li>
<li>Who can <strong>change a file&#39;s permissions</strong>?<ul>
<li>Only the file&#39;s owner (or the super-user).</li>
</ul>
</li>
<li>Who can <strong>change a file&#39;s owner</strong>?<ul>
<li>Only the super-user.</li>
</ul>
</li>
<li>Who can <strong>change a file&#39;s group</strong>?<ul>
<li>Only the file&#39;s owner, and only to a group that they belong to (or the super-user can change it to any group).</li>
</ul>
</li>
<li>How do I <strong>deny access</strong> to a directory?<ul>
<li><code>chmod 700 dir</code></li>
</ul>
</li>
<li>How do I make a <strong>directory world-readable</strong> but writable only by me?<ul>
<li><code>chmod 755 dir</code></li>
</ul>
</li>
<li>How do I make a <strong>file world-readable</strong> but writable only by me?<ul>
<li><code>chmod 644 file</code>, or <code>chmod 755 file</code> if it should also be executable</li>
</ul>
</li>
<li>What <strong>user and group does a process run as</strong>?<ul>
<li>The same user and primary group as the parent process (e.g., the shell) – unless the <code>setuid</code> bit is set on the process&#39;s executable file, in which case it runs instead as the executable file&#39;s owner. Likewise for the <code>setgid</code> bit and the executable file&#39;s group.</li>
</ul>
</li>
<li>What is the <strong>owner and group of a newly-created file</strong>?<ul>
<li>The owner is the effective user ID of the process that created it.</li>
<li>The group is either the group ID of the parent directory (macOS and Linux when the parent&#39;s <code>setgid</code> bit is set) or the effective group ID of the process (Linux when the parent&#39;s <code>setgid</code> bit is not set).</li>
</ul>
</li>
<li>What are the <strong>default permissions of a newly-created file</strong>?<ul>
<li>Typically, <code>644</code> for files and <code>755</code> for directories.</li>
<li>The full answer is &#34;the explicit permissions passed to <code>open(2)</code>, with any bits that are set to 1 in the process&#39;s <code>umask</code> set to 0.&#34;</li>
<li>Standard libraries set the permissions to <code>666</code> for regular files (e.g., <a href="https://github.com/rust-lang/rust/blob/1.82.0/library/std/src/sys/pal/unix/fs.rs#L1064">Rust</a>, <a href="https://github.com/python/cpython/blob/v3.13.0/Lib/_pyio.py#L1556">Python</a>) and <code>777</code> for directories, and the <code>umask</code> is typically <code>022</code>.</li>
</ul>
</li>
<li>What is the <strong>sticky bit</strong>?<ul>
<li>When set on a directory, the sticky bit enforces that files can only be renamed or removed by the owner of the file or the owner of the directory.</li>
<li>The sticky bit is commonly set on shared directories like <code>/tmp</code>.</li>
</ul>
</li>
</ul>
<h2>Appendix: Numeric permission codes</h2>
<p>Unix file permissions are commonly expressed as <a href="https://en.wikipedia.org/wiki/Octal">octal</a> numeric strings like <code>755</code> and <code>644</code>. The first digit is the permissions for the file&#39;s owner, the second for anyone in the file&#39;s group, and the third for anyone else.</p>
<p>You can interpret the whole string by considering each digit on its own. The trick is to remember that the order of the bits is <code>rwx</code> (read-write-execute) – familiar from the output of <code>ls -l</code>.</p>
<ul>
<li>The <em>execute</em> bit is in the 1&#39;s place, so it has a value of 1.</li>
<li>The <em>write</em> bit is in the 2&#39;s place (binary), so it has a value of 2.</li>
<li>The <em>read</em> bit is in the 4&#39;s place, so it has a value of 4.</li>
</ul>
<p>Some examples:</p>
<ul>
<li>6 = 4 + 2 = read + write</li>
<li>7 = 4 + 2 + 1 = read + write + execute</li>
<li>5 = 4 + 1 = read + execute</li>
</ul>
<h2>Further reading</h2>
<ul>
<li><a href="https://iafisher.com/blog/2024/11/mv-file-permissions">What file permissions does mv need?</a></li>
<li><a href="https://iafisher.com/blog/2024/11/path-access-depends-on-name">Whether you can access a path depends on how you name it</a></li>
<li>Chapter 4 of <em>Advanced Programming in the Unix Environment</em> ∎</li>
</ul>

  
</div></div>
  </body>
</html>
