<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.fuse-t.org/">Original</a>
    <h1>Kext-less FUSE library for macOS</h1>
    
    <div id="readability-page-1" class="page"><section id="h.2a941037646aa5d_79"><div><div tabindex="-1"><div><div><div jscontroller="sGwD4d" jsaction="zXBUYb:zTPCnb;zQF9Uc:Qxe3nd;" jsname="F57UId"><div><div id="h.2a941037646aa5d_76"><div><div><h2 id="h.hjhhr7b9cmpr_l" dir="ltr" tabindex="-1"></h2><p dir="ltr"><span>FUSE-T is a kext-less implementation of FUSE for macOS that uses NFS v4 local server instead of a kernel extension.</span></p><p dir="ltr"><span>The main motivation for this project is to replace </span><span><em>macfuse</em></span><span> (</span><span><a href="https://www.google.com/url?q=https%3A%2F%2Fosxfuse.github.io%2F&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw2a5o2iE87UtHv8onGs4Jxh" target="_blank">https://osxfuse.github.io/</a></span><span>) that implements its own kext to make fuse work. With each version of macOS it&#39;s getting harder and harder to load kernel extensions. Apple strongly discourages it and, for this reason, software distributions that include </span><span><em>macfuse are very</em></span><span> difficult to install. </span></p><p dir="ltr"><span>Additionally, the </span><span><em>macfuse</em></span><span> kext is unstable, may cause frequent system crashes and kernel lock-ups. Given those limitations many software publishers are unable to use </span><span><em>macfuse</em></span><span> anymore.</span></p><p dir="ltr"><span>FUSE-T doesn&#39;t make use of kernel extension, it implements its own userspace server that converts between FUSE protocol and NFS calls and let macOS mount NFS volume instead of a kernel filesystem.</span></p><h2 id="h.vl92sc26gonv_l" dir="ltr" tabindex="-1"></h2><ul><li dir="ltr"><p dir="ltr"><span>Drop-in replacement for </span><span><em>osxfuse</em></span><span> (</span><span><a href="https://www.google.com/url?q=https%3A%2F%2Fosxfuse.github.io%2F&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw2a5o2iE87UtHv8onGs4Jxh" target="_blank">https://osxfuse.github.io/</a></span><span>). API headers in </span><span><em>libfuse</em></span><span> are identical so there&#39;s no need to change anything in the filesystem implementation. The APIs are compatible with </span><span><em>macfuse</em></span><span> but differ from the Linux version of </span><span><em>libfuse </em></span><span> because the </span><span><em>macfuse</em></span><span> project was not updated in sync with the corresponding Linux version</span></p></li><li dir="ltr"><p dir="ltr"><span>Kext-less, no kernel extensions needed</span></p></li><li dir="ltr"><p dir="ltr"><span>NFSv4 protocol to better support macOS features such as extended attributes, file locks and others</span></p></li><li dir="ltr"><p dir="ltr"><span>Stable, easy to mount and unmount volumes with macOS built-in tools, no need for proprietary fusermount</span></p></li><li dir="ltr"><p dir="ltr"><span>Performance, FUSE-T offers much better performance and this is due to excellent macOS client side NFSv4 implementation</span></p></li></ul><h2 id="h.q9gr8r80cw4z_l" dir="ltr" tabindex="-1"></h2><p dir="ltr"><span>When a filesystem issues a mount API call, libfuse launches a FUSE-T NFS server that exposes a local TCP port to the macOS mount process and another communication channel to libfuse. </span></p><p dir="ltr"><span>After that a macOS mount_nfs command is executed and NFS RPCs are getting called on the server. The server converts NFS RPC calls into FUSE requests that emulate the original kernel to </span><span><em>libfuse</em></span><span> protocol. Those requests are executed in </span><span><em>libfuse</em></span><span> and then passed to the corresponding FUSE filesystem, the result is passed back to the macOS NFS client. </span></p><p dir="ltr"><span>After the filesystem process dies the NFS server unmounts the NFS folder mounted previously and terminate itself.</span></p><h2 id="h.ktsd4dwwb3j0_l" dir="ltr" tabindex="-1"></h2><p dir="ltr"><span><a href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fmacos-fuse-t%2Ffuse-t&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw2o9Hmlnk2Ffk3qP2igLoLE" target="_blank">The github project page</a></span></p><p dir="ltr"><span><a href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fmacos-fuse-t%2Flibfuse&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw2rQLlgKHqBCWiErFa58T-F" target="_blank">The libfuse project</a></span></p><p dir="ltr"><span><a href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fmacos-fuse-t%2Fsshfs&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw1wxm1uLoV5X85RM6jS8C3-" target="_blank">sshfs project</a></span></p><p dir="ltr"><span><a href="https://www.google.com/url?q=https%3A%2F%2Fgithub.com%2Fmacos-fuse-t%2Ffuse-t%2Fwiki&amp;sa=D&amp;sntz=1&amp;usg=AOvVaw0XJmviOVEKFKlMsV1rvc9e" target="_blank">Wiki for developers</a></span></p><h2 id="h.uh11s7mrirvk_l" dir="ltr" tabindex="-1"></h2><p dir="ltr"><span>Email me at</span>  <span><a href="mailto:alex@fuse-t.org" target="_blank">alex@fuse-t.org</a></span></p></div></div></div></div></div></div></div></div></div></section></div>
  </body>
</html>
