<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hdoro.dev/learn-typescript-trick">Original</a>
    <h1>Learn Typescript by writing Javascript</h1>
    
    <div id="readability-page-1" class="page"><div><p><strong>TL;DR</strong>: while learning its syntax, instead of trying to write <a href="https://typescriptlang.org/" target="_blank" rel="noopener">Typescript</a>, you can write Javascript and let the compiler and your IDE do the work for you.</p><figure><div data-alt="Screenshot of a code editor showing a `sampleUser` Javascript object being used in a function through `typeof sampleUser`" data-src="https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1300&amp;fit=max&amp;auto=format" data-srcset=" https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=100&amp;fit=max&amp;auto=format 100w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=300&amp;fit=max&amp;auto=format 300w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=500&amp;fit=max&amp;auto=format 500w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=700&amp;fit=max&amp;auto=format 700w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=900&amp;fit=max&amp;auto=format 900w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1100&amp;fit=max&amp;auto=format 1100w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1300&amp;fit=max&amp;auto=format 1300w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1500&amp;fit=max&amp;auto=format 1500w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1700&amp;fit=max&amp;auto=format 1700w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=1900&amp;fit=max&amp;auto=format 1900w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=2100&amp;fit=max&amp;auto=format 2100w, https://cdn.sanity.io/images/bmj8cwsg/production/fb0ba172a45587f482fc3d0411bb8233de6ba85a-880x1092.png?w=2300&amp;fit=max&amp;auto=format 2300w" data-sizes="(max-width: 800px) 100vw, 800px"></div><figcaption>Hover over Javascript functions &amp; variables to see their TS definitions</figcaption></figure><p>If you want to type an existing piece function or value, you can use <code>typeof VARIABLE_NAME</code> and Typescript&#39;s compiler will introspect the type from your Javascript, without you having to manually type it out. </p><p>Besides lowering the barrier to entry, this also speeds things up quite significantly. And you still get TS&#39;s amazing auto-complete and warnings!</p><figure><div data-alt="Screenshot of a code editor with an autocomplete dialog in the invocation of a `registerUser` function" data-src="https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1300&amp;fit=max&amp;auto=format" data-srcset=" https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=100&amp;fit=max&amp;auto=format 100w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=300&amp;fit=max&amp;auto=format 300w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=500&amp;fit=max&amp;auto=format 500w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=700&amp;fit=max&amp;auto=format 700w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=900&amp;fit=max&amp;auto=format 900w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1100&amp;fit=max&amp;auto=format 1100w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1300&amp;fit=max&amp;auto=format 1300w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1500&amp;fit=max&amp;auto=format 1500w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1700&amp;fit=max&amp;auto=format 1700w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=1900&amp;fit=max&amp;auto=format 1900w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=2100&amp;fit=max&amp;auto=format 2100w, https://cdn.sanity.io/images/bmj8cwsg/production/0bd3cc8d13a137f4cc5ba3f01945530e35d32fb2-1128x884.png?w=2300&amp;fit=max&amp;auto=format 2300w" data-sizes="(max-width: 800px) 100vw, 800px"></div><figcaption>✨</figcaption></figure><p>Perhaps more importantly, if you use TS-friendly IDEs like <a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a> you can hover over a variable definition to get the shape of the data and start learning its syntax.</p><p>Use these tricks with a basic knowledge of <a href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#type-aliases" target="_blank" rel="noopener">Type Aliases</a>, and you&#39;ve pretty much got to <strong>80% of Typescript values</strong>.</p><p>Of course, there are unions, assertions, narrowing, type casting, constraints, overloads <em>and-otherso-confusing-my-brain-is-melting</em> features 🫠</p><p>These are mainly for library authors, though.</p><p>I&#39;ve been using TS for almost 5 years and I still write mostly <code>type</code> definitions (or <code>interface</code>, basically the same but for objects) and <a href="https://www.typescriptlang.org/docs/handbook/enums.html" target="_blank" rel="noopener">enums</a> (fancy key/value objects). Here&#39;s an adaption of real-world code I wrote recently:</p><div data-explanation="false"><pre>

<span>import</span> <span>{</span> SanityDocument <span>}</span> <span>from</span> <span>&#39;@sanity/client&#39;</span>

<span>type</span> <span>TranslationInMeta</span> <span>=</span> <span>{</span>
  
  _key<span>:</span> <span>string</span>
  _ref<span>:</span> <span>string</span>
<span>}</span>


<span>type</span> <span>TranslationMetaDoc</span> <span>=</span> TranslationInMeta <span>&amp;</span> SanityDocument <span>{</span>
  locales<span>:</span> TranslationInMeta<span>[</span><span>]</span>
<span>}</span>

<span>export</span> <span>function</span> <span>useDocumentTranslations</span><span>(</span><span>{</span>
  currentDocument<span>,</span>
<span>}</span><span>:</span> <span>{</span>
  currentDocument<span>?</span><span>:</span> SanityDocument
<span>}</span><span>)</span> <span>{</span>
  
  <span>const</span> routerContext <span>=</span> React<span>.</span><span><span>useContext</span><span><span>&lt;</span><span>any</span><span>&gt;</span></span></span><span>(</span>RouterContext<span>)</span>

  <span>const</span> <span>[</span>translationsDocument<span>,</span> setTranslationsDocument<span>]</span> <span>=</span>
    React<span>.</span><span><span>useState</span><span><span>&lt;</span>TranslationMetaDoc <span>|</span> <span>null</span><span>&gt;</span></span></span><span>(</span><span>null</span><span>)</span>

  
<span>}</span>
<br/></pre></div><p>Looks mostly like <del>React</del> Javascript, right? That&#39;s because it is! Just a &#34;flavored&#34; version of it 😉</p><p>Now, if you&#39;re a library author, you may find yourself writing code like this... (<a href="https://github.com/statelyai/xstate/blob/4dac83587291eeca41ddb595f0f181766e399196/packages/core/src/Machine.ts#L84-L112" target="_blank" rel="noopener">source</a>)</p><div data-explanation="false"><pre><span>export</span> <span>function</span> <span><span>createMachine</span><span><span>&lt;</span>
  TContext<span>,</span>
  TEvent <span>extends</span> EventObject <span>=</span> AnyEventObject<span>,</span>
  TTypestate <span>extends</span> Typestate<span>&lt;</span>TContext<span>&gt;</span> <span>=</span> <span>{</span> value<span>:</span> <span>any</span><span>;</span> context<span>:</span> TContext <span>}</span><span>,</span>
  TServiceMap <span>extends</span> ServiceMap <span>=</span> ServiceMap<span>,</span>
  TTypesMeta <span>extends</span> TypegenConstraint <span>=</span> TypegenDisabled
<span>&gt;</span></span></span><span>(</span>
  config<span>:</span> MachineConfig<span>&lt;</span>
    TContext<span>,</span>
    <span>any</span><span>,</span>
    TEvent<span>,</span>
    BaseActionObject<span>,</span>
    TServiceMap<span>,</span>
    TTypesMeta
  <span>&gt;</span><span>,</span>
  options<span>?</span><span>:</span> InternalMachineOptions<span>&lt;</span>
    TContext<span>,</span>
    TEvent<span>,</span>
    ResolveTypegenMeta<span>&lt;</span>TTypesMeta<span>,</span> TEvent<span>,</span> BaseActionObject<span>,</span> TServiceMap<span>&gt;</span>
  <span>&gt;</span>
<span>)</span><span>:</span> StateMachine<span>&lt;</span>
  TContext<span>,</span>
  <span>any</span><span>,</span>
  TEvent<span>,</span>
  TTypestate<span>,</span>
  BaseActionObject<span>,</span>
  TServiceMap<span>,</span>
  ResolveTypegenMeta<span>&lt;</span>TTypesMeta<span>,</span> TEvent<span>,</span> BaseActionObject<span>,</span> TServiceMap<span>&gt;</span>
<span>&gt;</span><span>;</span><br/></pre></div><p>I honestly don&#39;t even know how this code works - it&#39;s a function that has no body, and there&#39;s another declaration of a function with the same name <a href="https://github.com/statelyai/xstate/blob/4dac83587291eeca41ddb595f0f181766e399196/packages/core/src/Machine.ts#L114" target="_blank" rel="noopener">right below it</a>. Too much for my brain to handle 😵‍💫</p><p>So yeah, <strong>take it easy</strong>, start by writing Javascript and adopt TS incrementally :)</p><hr/><p>Credits to Clara Amenyo for sparking this idea in a pairing session during my <a href="https://www.recurse.com/" target="_blank" rel="noopener">Recurse Center</a> batch :)</p></div></div>
  </body>
</html>
