<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/KivApple/dell-charger-emulator">Original</a>
    <h1>Emulator of Original Dell Charger Using ATTINY85</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">Emulator of original Dell charger using ATTINY85</p>
<p dir="auto">Power adapter for Dell laptops contains IC to determine adapter capabilities (watts, voltage, current).
If you connect an unoriginal adapter, the laptop refuses to charge the battery.
This project allows to use the cheap and small microcontroller ATTINY85 for emulating the answers
of the original adapter to the requests of the laptop.</p>
<p dir="auto">You can configure adapter settings in the file eeprom-data.hex. This file contains EEPROM data in Intel Hex format.
Format of Dell charger identification shown below:</p>
<table>
<thead>
<tr>
<th>Offset</th>
<th>Length</th>
<th>Content</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>4</td>
<td>DELL</td>
<td>Manufacturer identifier</td>
</tr>
<tr>
<td>4</td>
<td>4</td>
<td>00AC</td>
<td>Adapter type</td>
</tr>
<tr>
<td>8</td>
<td>3</td>
<td>045</td>
<td>Watts (45W)</td>
</tr>
<tr>
<td>11</td>
<td>3</td>
<td>195</td>
<td>Tenths of a volt (19.5V)</td>
</tr>
<tr>
<td>14</td>
<td>3</td>
<td>023</td>
<td>Tenths of amps (2.3A)</td>
</tr>
<tr>
<td>17</td>
<td>23</td>
<td>CN0CDF577243865Q27F2A05</td>
<td>Serial number</td>
</tr>
<tr>
<td>40</td>
<td>2</td>
<td>0x3D 0x94</td>
<td>CRC-16/ARC (LSB first)</td>
</tr>
</tbody>
</table>
<p dir="auto">The description may not be entirely accurate. I&#39;ll be glad if you clarify.</p>
<p dir="auto">You can use Python utility dell-charger-data-editor.py to easily change this values.</p>
<p dir="auto">You must flash the EEPROM data together with the program code. Later you can only re-write EEPROM.</p>
<p dir="auto"><strong>Warning: do not mask the weak power adapter to a more powerful one. This can lead to hardware damage.</strong></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/KivApple/dell-charger-emulator/blob/master/board/schematic.png"><img src="https://github.com/KivApple/dell-charger-emulator/raw/master/board/schematic.png" alt="Schematic"/></a></p>
<p dir="auto">You need ATTINY25, ATTINY45 or ATTINY85 MCU (you may need to change compiler flags in Makefile) running at 8 MHz (the internal RC-oscillator is suitable, but if desired, you can use an external crystal - adjust the fuses accordingly). The Dell power adapter connector has three pins - GND, VOUT (19V) and ID. Connect the ID to the PB2 pin of the microcontroller. Also provide 3.3V power for MCU (you can use a simple linear regulator 78L33 to make the desired voltage from 19V).</p>
<h2 dir="auto"><a id="user-content-reading-and-writing-eeprom" aria-hidden="true" href="#reading-and-writing-eeprom"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reading and writing EEPROM</h2>
<p dir="auto">You can read and write EEPROM using dell-charger-data-editor.py (see console menu of this utility).</p>
<p dir="auto">You need connect OneWire bus to any USB-UART adapter using simple schematic with diode:</p>
<div data-snippet-clipboard-copy-content="TXD --------|&lt;|----*-------- ID
                   |
RXD ----------------

GND ------------------------ GND"><pre><code>TXD --------|&lt;|----*-------- ID
                   |
RXD ----------------

GND ------------------------ GND
</code></pre></div>
<p dir="auto"><strong>Warning: USB-UART adapter should use 3.3V or 5V logic levels. 12V levels will damage EEPROM IC.</strong></p>
<p dir="auto">You can read by this utility both original EEPROM and emulated by AVR. You can write only emulated EEPROM.</p>
</article>
        </div></div>
  </body>
</html>
