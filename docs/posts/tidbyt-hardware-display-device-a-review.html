<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://macwright.com/2022/03/11/tidbyt-review.html">Original</a>
    <h1>Tidbyt hardware display device: a review</h1>
    
    <div id="readability-page-1" class="page"><div><p>This is about <a href="https://tidbyt.com/">the Tidbyt</a>, a hardware display device I bought and am using to show some numbers and charts in my apartment as ambient data. I think it’s pretty cool.</p><p><picture><source srcset="/images/2022-03-11-tidbyt-review-tidbyt-on-a-shelf.webp" type="image/webp"/><img alt="Tidbyt on a shelf" src="https://macwright.com/images/2022-03-11-tidbyt-review-tidbyt-on-a-shelf.jpg"/></picture></p><h3 id="alternative-display-hardware">Alternative display hardware</h3><p>I really like alternative display technology. eInk displays, unlit LEDs, like on my <a href="https://en.wikipedia.org/wiki/AlphaSmart">AlphaSmart</a>, or <a href="https://en.wikipedia.org/wiki/Flip-disc_display">flip-disc displays</a>, <a href="https://en.wikipedia.org/wiki/Vane_display">vane displays</a>, <a href="https://en.wikipedia.org/wiki/Split-flap_display">split-flap displays</a> - I wish it was all more widespread. Sure, those flip board displays have mechanical failures more often than traditional screens, but they <a href="https://www.youtube.com/watch?v=XMqtcXTPZyI">look and sound so nice</a>.</p><p>Most alternative display technology is expensive and inconvenient, especially when compared to the absolute marvel of supply-chain efficiency that is modern traditional LED displays. You can buy a decent 39” TV for a little over $200 today. A 31” eInk panel will run you $1,500, and a flipboard display costs around <a href="https://www.vestaboard.com/shop-detail">$3k</a>. The TV I have in my living room is a monument to the problematic but relentless optimization of free markets and mass industrialization: a <a href="https://www.oatfoundry.com/split-flap-2/">handmade split-flap display</a> is not.</p><p><picture><source srcset="/images/2022-03-11-tidbyt-review-macro-view-of-the-tidbyt-display.webp" type="image/webp"/><img alt="Macro view of the Tidbyt display" src="https://macwright.com/images/2022-03-11-tidbyt-review-macro-view-of-the-tidbyt-display.jpg"/></picture></p><p>The Tidbyt is a 64x32 full-color LED matrix display. You can see the individual pixels.</p><p>The display itself isn’t super-rare: you can <a href="https://www.sparkfun.com/products/14646">buy two 32x32 LED panels</a> on Sparkfun for $97. But turning those raw displays into something that can show an image will require much more hardware, and then you’ll need to construct an enclosure, deal with a power supply, and enough small tasks to easily occupy a few weeks.</p><p>The Tidbyt costs $200 (currently $180). I think it’s a steal for that price: it’s a niche product with real hardware and a walnut enclosure, produced during a pandemic with supply chain issues. The hardware feels solid, everything well-aligned, no rattling when you move it around. The panel on the back is simple and nicely finished, even though nobody will see it.</p><p><picture><source srcset="/images/2022-03-11-tidbyt-review-back-of-the-tidbyt.webp" type="image/webp"/><img alt="Back of the tidbyt" src="https://macwright.com/images/2022-03-11-tidbyt-review-back-of-the-tidbyt.jpg"/></picture></p><p>And yes, it took eight months between my pre-order and arrival, but for an early hardware project that might be better than average.</p><h3 id="the-software">The software</h3><p>The setup flow for the Tidbyt is slick. You pair it with the iPhone or Android app, connect it to Wifi, and you’re set. It worked perfectly for me and has had no issues since. You can control it from the iPhone app and choose from a bunch of pre-built applets that will auto-rotate.</p><p>So, does it “just work”? In my experience, yes. The pre-built applets are pretty good, too: you’ve got weather, calendar events, subway departures. All of the community apps are <a href="https://github.com/tidbyt/community">managed in a GitHub repo</a> and you can just submit a Pull Request. It seems like the Tidbyt team are actively reviewing and merging new apps often.</p><h3 id="my-custom-applet">My custom applet</h3><p>The default applets are nice, but I wanted to make something custom. The whole point of this display for me is that it feels quiet, personal, and ambient. I could string together some of the prebuilt applets, but that would make the display switch between graphics. I don’t want a new distraction.</p><p>So, I wanted to build an applet: one with all the data combined and composed. That led me to <a href="https://github.com/tidbyt/pixlet">Pixlet</a>, Tidbyt’s development tool. It’s a toolchain written in Go, that executes scripts written in <a href="https://github.com/bazelbuild/starlark">Starlark</a>. I am an expert in neither.</p><p>Thankfully, Starlark is very similar to Python, and the modules that pixlet includes (hattip <a href="https://github.com/qri-io/starlib">starlib project &amp; Qri</a>) make it relatively smooth to generate some graphics. The whole <a href="https://github.com/tidbyt/pixlet/blob/main/docs/widgets.md">widget system</a> reminds me of React or Qt, which is really nice - this being a raster system, I expected something more like a Canvas-like API that would require a lot more thinking.</p><p><img alt="Pixlet serve" src="https://macwright.com/images/2022-03-11-tidbyt-review-pixlet-serve.png"/></p><p>There’s an option in the CLI to test out your applets locally, which works smoothly. Really, this developer experience is pretty nice.</p><p>As you can see above, this applet includes: the time, the number of emails in my inbox, the number of tasks on my todo list, a chart of my runs in the last 7 days, and the temperature.</p><p>These come from the <a href="https://fastmail.com/">Fastmail</a> JMAP API, the <a href="https://todoist.com/">Todoist</a> API, a convoluted export flow from my Strava account, and <a href="https://www.weather.gov/documentation/services-web-api">NOAA Weather Services</a>.</p><p>So all that was left was to run this on the device.</p><h3 id="running-my-applet">Running my applet</h3><p>Okay, so this part was tough. As it turns out, the Tidbyt doesn’t run the applets you write in Starlark. When you set your Tidbyt to run a community applet, a server is generating the graphics and sending them to you. When you use the CLI tool to run <code>pixlet push</code> and show your custom applet on the device, it’s just showing an image, generated on your computer. So it won’t update.</p><p>The responsibilities of the Tidbyt hardware are thus very narrowly defined: it connects to the network, belongs to a user, and displays some graphics. I get it - and this honestly seems like an okay design decision. This device just works, and probably a large part of that is that its firmware doesn’t have to deal with all the complexity of running and storing applets.</p><p>There is an issue lurking here: you are relying on Tidbyt’s servers for this thing to work. The device itself can <a href="https://discuss.tidbyt.com/t/self-hosted-tidbyt-server/330/2?u=tmcw">accept new firmware</a>, so I’m guessing, or hoping, that if the company goes defunct, the community will rally to implement an alternative.</p><p>But there were more immediate problems to solve: how was I going to put my own data on this device? I reviewed a few options:</p><ul><li>A cloud server, like a Digital Ocean droplet. This would probably work, but I currently run zero personal cloud servers, so I don’t have any patterns for it and I’d rather not.</li><li>A cron job on my laptop. This would only work when my computer is on, which is not always.</li><li>Running it on my <a href="https://www.synology.com/en-us">Synology NAS</a>, which is almost a server, but runs in my apartment, and I use for other odds and ends already. I tried this, but compiling pixlet on the NAS was very difficult: you’ve got shared libraries that also need to be compiled for the NAS, I had to compile Go in order to compile pixlet. Once I started having to deal with <code>libwebp</code> linking problems, I bailed.</li><li>Running it on a <a href="https://www.raspberrypi.com/products/raspberry-pi-zero-w/">Raspberry Pi W</a> that I had in a drawer.</li></ul><p><picture><source srcset="/images/2022-03-11-tidbyt-review-raspberry-pi-w.webp" type="image/webp"/><img alt="Raspberry Pi W" src="https://macwright.com/images/2022-03-11-tidbyt-review-raspberry-pi-w.jpg"/></picture></p><p>So, the Pi was the solution, partly to assuage the guilt of leaving a fully-functional computer lying unplugged in a drawer for years at a time. I flashed the thing with the newest Raspbian OS, went through the strangely-obtuse processes of setting up SSH &amp; Wifi, compiled pixlet on it, and we were nearly there.</p><p><img alt="Flow chart" src="https://macwright.com/images/2022-03-11-tidbyt-review-flow-chart.png"/></p><p>So we end up with something like this - I develop the applet on my computer, push the code to the Raspberry Pi, which renders an image every twenty seconds and pushes that image to the Tidbyt <em>via</em> the Tidbyt servers. It’s a little hacky, but it works well.</p><h3 id="building-a-private-applet">Building a private applet</h3><p>There are some notable gotchas around building Tidbyt applets just for yourself.</p><p>First, the whole Starlark/pixlet environment is based around a principle of hermetic execution:</p><blockquote><p>Hermetic execution. Execution cannot access the file system, network, system clock. It is safe to execute untrusted code.</p></blockquote><p>This makes a lot of sense for a hosted service like the one Tidbyt is running for community apps, but it’s limiting for personal applications. In particular, you can’t read from the filesystem. So, say if you need to use a Python or JavaScript library to generate some information, it’s hard to say how you get that information into your applet - running a local device microservice?</p><p>I’ve steered clear of microservices, so I did something weirder: I run scripts that modify the Starlark code. Like Python, you can mostly put JSON values directly into Starlark code and they’ll work, so I did something like this:</p><div><div><pre><code><span>runs_line</span> <span>=</span> <span>&#34;RUNS = %s&#34;</span> <span>%</span> <span>json</span><span>.</span><span>dumps</span><span>(</span><span>sparks</span><span>)</span>
<span>star</span> <span>=</span> <span>os</span><span>.</span><span>path</span><span>.</span><span>join</span><span>(</span><span>cwd</span><span>,</span> <span>&#34;tmcw.star&#34;</span><span>)</span>
<span>with</span> <span>open</span><span>(</span><span>star</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
    <span>text</span> <span>=</span> <span>f</span><span>.</span><span>read</span><span>()</span>
    <span>lines</span> <span>=</span> <span>&#39;</span><span>\n</span><span>&#39;</span><span>.</span><span>join</span><span>(</span><span>list</span><span>(</span><span>map</span><span>(</span><span>lambda</span> <span>line</span><span>:</span> <span>runs_line</span> <span>if</span> <span>line</span><span>.</span><span>startswith</span><span>(</span>
        <span>&#39;RUNS =&#39;</span><span>)</span> <span>else</span> <span>line</span><span>,</span> <span>text</span><span>.</span><span>split</span><span>(</span><span>&#39;</span><span>\n</span><span>&#39;</span><span>))))</span>
<span>with</span> <span>open</span><span>(</span><span>star</span><span>,</span> <span>&#39;w&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
    <span>f</span><span>.</span><span>write</span><span>(</span><span>lines</span><span>)</span>
</code></pre></div></div><p>So, every time the script runs, it includes a new “hardcoded” dataset. Works fine.</p><p>There’s also the question of configuration: as you might’ve noticed in the screenshot of the pixlet environment, there’s a configuration system in which you can define inputs for your applets. It’s pretty sophisticated. When those applets are deployed, you can configure them from your phone.</p><p>But none of that applies to private applets, so I just hardcoded everything. Here’s <a href="https://gist.github.com/tmcw/5cf14730d0564e9106bcf3d4ed92f2bb">what the applet looks like, minus all of the hardcoded parts</a>.</p><h3 id="takeaways">Takeaways</h3><p><picture><source srcset="/images/2022-03-11-tidbyt-review-close-on-view-of-the-tidbyt-hardware.webp" type="image/webp"/><img alt="Close-on view of the Tidbyt hardware" src="https://macwright.com/images/2022-03-11-tidbyt-review-close-on-view-of-the-tidbyt-hardware.jpg"/></picture></p><p>So, in short, the Tidbyt is a beautiful and well-made device that is simple to use with its prebuilt applets.</p><p>If you’re like me and want something custom on it, be prepared to do more work. But the yak-shaving hacking required to put custom data on the Tidbyt is nothing compared to starting from scratch: their system vastly simplifies the task.</p></div></div>
  </body>
</html>
