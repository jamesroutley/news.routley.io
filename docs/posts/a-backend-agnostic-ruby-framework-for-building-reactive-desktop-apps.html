<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://codeberg.org/skinnyjames/hokusai">Original</a>
    <h1>Show HN: A backend agnostic Ruby framework for building reactive desktop apps</h1>
    
    <div id="readability-page-1" class="page"><div id="readme">

	

	
	<div>
		
		<div>
			
				
<p dir="auto">A Ruby library for authoring GUI applications</p>
<p dir="auto"><a href="https://ci.skinnyjames.net/skinnyjames/hokusai" rel="nofollow"><img src="https://ci.skinnyjames.net/api/badges/skinnyjames/hokusai/status.svg" alt="status-badge"/></a>
<a href="https://hokusai.skinnyjames.net" rel="nofollow"><img src="https://img.shields.io/badge/guide-skinnyjames.net-black.svg" alt="guides"/></a>
<a href="https://skinnyjames.codeberg.page/hokusai/" rel="nofollow"><img src="https://img.shields.io/badge/documentation-codeberg_pages-blue.svg" alt="docs"/></a>
<a href="https://wiki.p2pfoundation.net/Peer_Production_License" rel="nofollow"><img src="https://img.shields.io/badge/license-peer_production-teal.svg" alt="license"/></a></p>
<h2 id="user-content-getting-started" dir="auto">Getting started</h2>
<p dir="auto">In your Gemfile</p>
<pre><code><span>gem</span> <span>&#34;hokusai-zero&#34;</span><span>,</span>  <span>&#34;0.1.7&#34;</span>
</code></pre><h2 id="user-content-in-order-to-run-an-application-you-will-need-to-install-a-backend" dir="auto">In order to run an application, you will need to install a backend</h2>
<h3 id="user-content-raylib" dir="auto">Raylib</h3>
<ul dir="auto">
<li>Install <a href="https://github.com/raysan5/raylib" rel="nofollow">raylib &gt;= 5.0</a></li>
<li>Write your app</li>
<li>Run app with <code>RAYLIB_PATH=/libpath/for/libraylib.(so|dylib) ruby &lt;your app&gt;.rb</code></li>
</ul>
<h3 id="user-content-sdl2" dir="auto">SDL2</h3>
<ul dir="auto">
<li>
<p dir="auto">Install the following deps</p>
<ul dir="auto">
<li><a href="https://github.com/libsdl-org/SDL" rel="nofollow">libsdl</a></li>
<li><a href="https://www.ferzkopp.net/wordpress/2016/01/02/sdl_gfx-sdl2_gfx/" rel="nofollow">libscdl-gfx</a></li>
<li><a href="https://github.com/libsdl-org/SDL_ttf" rel="nofollow">libsdl-ttf</a></li>
<li><a href="https://github.com/libsdl-org/SDL_image" rel="nofollow">libsdl-image</a></li>
</ul>
</li>
<li>
<p dir="auto">Write your app</p>
</li>
<li>
<p dir="auto">Run app with <code>SDL_PATH=/libpath/for/libsdl.(so|dylib) ruby &lt;your app&gt;.rb</code></p>
</li>
</ul>
<h2 id="user-content-example-counter-application" dir="auto">Example counter application</h2>
<pre><code><span>require</span> <span>&#34;hokusai&#34;</span>
<span>require</span> <span>&#34;hokusai/backends/raylib&#34;</span>

<span>class</span> <span>Counter</span> <span>&lt;</span> <span>Hokusai</span><span>::</span><span>Block</span>
  <span>template</span> <span>&lt;&lt;-EOF
</span><span></span>  <span>[</span><span>template</span><span>]</span>
    <span>vblock</span>
      <span>hblock</span>
        <span>label</span> <span>{</span>
          <span>:content</span><span>=</span><span>&#34;count&#34;</span>
          <span>size</span><span>=</span><span>&#34;130&#34;</span> 
          <span>:color</span><span>=</span><span>&#34;count_color&#34;</span>
        <span>}</span>
      <span>hblock</span>
        <span>vblock</span>
          <span>label</span> <span>{</span> 
            <span>content</span><span>=</span><span>&#34;Add&#34;</span>
            <span>@click</span><span>=</span><span>&#34;increment&#34;</span> 
          <span>}</span>
        <span>vblock</span>
          <span>label</span> <span>{</span> 
            <span>content</span><span>=</span><span>&#34;Subtract&#34;</span>
            <span>@click</span><span>=</span><span>&#34;decrement&#34;</span> 
          <span>}</span>
  <span>EOF</span>

  <span>uses</span><span>(</span>
    <span>vblock</span><span>:</span> <span>Hokusai</span><span>::</span><span>Blocks</span><span>::</span><span>Vblock</span><span>,</span>
    <span>hblock</span><span>:</span> <span>Hokusai</span><span>::</span><span>Blocks</span><span>::</span><span>Hblock</span><span>,</span>
    <span>label</span><span>:</span> <span>Hokusai</span><span>::</span><span>Blocks</span><span>::</span><span>Label</span><span>,</span>
  <span>)</span>

  <span>attr_accessor</span> <span>:count</span>

  <span>def</span> <span>increment</span><span>(</span><span>event</span><span>)</span>
    <span>self</span><span>.</span><span>count</span> <span>+=</span> <span>1</span>
  <span>end</span>

  <span>def</span> <span>decrement</span><span>(</span><span>event</span><span>)</span>
    <span>self</span><span>.</span><span>count</span> <span>-=</span> <span>1</span>
  <span>end</span>

  <span>def</span> <span>count_color</span>
    <span>self</span><span>.</span><span>count</span> <span>&gt;</span> <span>0</span> <span>?</span> <span>[</span><span>0</span><span>,</span><span>0</span><span>,</span><span>255</span><span>]</span> <span>:</span> <span>[</span><span>255</span><span>,</span><span>0</span><span>,</span><span>0</span><span>]</span>
  <span>end</span>

  <span>def</span> <span>initialize</span><span>(</span><span>**</span><span>args</span><span>)</span>
    <span>@count</span> <span>=</span> <span>0</span>

    <span>super</span><span>(</span><span>**</span><span>args</span><span>)</span>
  <span>end</span>
<span>end</span>

<span>Hokusai</span><span>::</span><span>Backends</span><span>::</span><span>RaylibBackend</span><span>.</span><span>run</span><span>(</span><span>Counter</span><span>)</span> <span>do</span> <span>|</span><span>config</span><span>|</span>
  <span>config</span><span>.</span><span>width</span> <span>=</span> <span>500</span>
  <span>config</span><span>.</span><span>height</span> <span>=</span> <span>500</span>
  <span>config</span><span>.</span><span>title</span> <span>=</span> <span>&#34;Counter application&#34;</span>
<span>end</span>
</code></pre><h2 id="user-content-development" dir="auto">Development</h2>
<p dir="auto">The build tooling of this project is <a href="https://xmake.io/#/" rel="nofollow">xmake</a>.  You will need it to compile dependencies and run demos.</p>
<p dir="auto">Hokusai contains a tree-sitter grammar to parse templates, and uses <code>md4c</code> to parse markdown.</p>
<p dir="auto">When compiling the C portion of hokusai, tree-sitter will be statically linked.</p>
<p dir="auto">Requirements:</p>
<ul dir="auto">
<li><a href="https://xmake.io/#/" rel="nofollow">xmake</a> to build dependencies</li>
<li>Ruby to run applications</li>
</ul>
<p dir="auto">Steps:</p>
<ul dir="auto">
<li>Download project</li>
<li>Install dependencies
<ul dir="auto">
<li><code>bundle install</code></li>
<li><code>xmake q hoku-tree-sitter</code></li>
<li><code>xmake q hoku-md4c</code></li>
<li>For Raylib
<ul dir="auto">
<li><code>xmake q raylib</code></li>
</ul>
</li>
<li>For SDL2
<ul dir="auto">
<li><code>xmake q libsdl</code></li>
<li><code>xmake q libsdl_gfx</code></li>
<li><code>xmake q lbsdl_ttf</code></li>
<li><code>xmake q libsdl_image</code></li>
</ul>
</li>
</ul>
</li>
<li>Build grammar and ast code
<ul dir="auto">
<li><code>xmake b hokusai</code></li>
</ul>
</li>
<li>Run specs
<ul dir="auto">
<li><code>xmake b -g test</code></li>
</ul>
</li>
<li>Run a demo
<ul dir="auto">
<li><code>xmake demo counter</code></li>
</ul>
</li>
</ul>
<h2 id="user-content-license" dir="auto">License</h2>
<p dir="auto">Hokusai is released under the <a href="https://wiki.p2pfoundation.net/Peer_Production_License" rel="nofollow">Peer Production License</a></p>

			
		</div>
	</div>
</div></div>
  </body>
</html>
