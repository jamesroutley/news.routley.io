<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://evilmartians.com/chronicles/oklch-in-css-why-quit-rgb-hsl">Original</a>
    <h1>Oklch in CSS: why we moved from RGB and HSL (2024)</h1>
    
    <div id="readability-page-1" class="page"><div data-theme-reset="true"><p>The new <a href="https://www.w3.org/TR/css-color-4/" target="_blank" rel="noopener noreferrer">CSS Color 4</a> specification has added the new <span><code>oklch()</code></span> notation for declaring colors. In this post, we explain why this is important for design systems and color palettes.</p>
<h2 id="the-extremely-short-version">The extremely short version</h2>
<p><span><code>oklch()</code></span> is a new way to define CSS colors. In <span><code>oklch(L C H)</code></span> or <span><code>oklch(L C H / a)</code></span>, each item corresponds as follows:</p>
<ul>
<li><span><code>L</code></span> is <em>perceived</em> lightness (<span><code>0%</code></span>-<span><code>100%</code></span>). “Perceived” means that it has consistent lightness for our eyes, unlike <span><code>L</code></span> in <span><code>hsl()</code></span>.</li>
<li><span><code>C</code></span> is chroma, from gray to the most saturated color.</li>
<li><span><code>H</code></span> is the hue angle (<span><code>0</code></span>-<span><code>360</code></span>).</li>
<li><span><code>a</code></span> is opacity (<span><code>0</code></span>-<span><code>1</code></span> or <span><code>0</code></span>-<span><code>100%</code></span>).</li>
</ul>
<div><div><p><span><div data-language="css"><pre><code><span>a:hover</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.45 0.26 264<span>)</span><span>;</span> 
  <span>color</span><span>:</span>        <span>oklch</span><span>(</span>1 0 0<span>)</span><span>;</span>     
  <span>color</span><span>:</span>        <span>oklch</span><span>(</span>0 0 0 / 50%<span>)</span><span>;</span> 
<span>}</span></code></pre></div></span></p></div></div>
<section><a href="https://cal.com/team/evilmartians/exploration" target="_blank" rel="noopener noreferrer" button_text="Book a call" cal_com_link="team/evilmartians/exploration"><div><div><p><img src="https://evilmartians.com/static/ira-a6db0f09d8c14693c5f73dcff15b70fa.webp" alt="Schedule call"/></p></div></div><p><b>Irina Nazarova</b> <small>CEO at Evil Martians</small></p></a></section>
<p>The benefits of OKLCH:</p>
<ol>
<li>OKLCH frees designers from the need to manually choose every color. Designers can define a formula, choose a few colors, and an entire design system <strong>palette is automatically generated</strong>.</li>
<li>OKLCH can be used for wide-gamut <strong>P3 colors</strong>. For instance, new devices (like those from Apple) can display more colors than old sRGB monitors, and we can use OKLCH to specify these new colors.</li>
<li>Unlike <span><code>hsl()</code></span>, OKLCH is <strong>better for color modifications</strong> and palette generation. It uses perceptual lightness, so no more unexpected results, like we had with <span><code>darken()</code></span> in Sass.</li>
<li>Further, with its predictable lightness, OKLCH provides <strong>better a11y</strong>.</li>
<li>Unlike <span><code>rgb()</code></span> or hex (<span><code>#ca0000</code></span>), OKLCH is <strong>human readable</strong>. You can quickly and easily know which color an OKLCH value represents simply by looking at the numbers. OKLCH works like HSL, but it encodes lightness better than HSL.</li>
</ol>

<p>But, that being said, OKLCH comes with two challenges:</p>
<ol>
<li>With OKLCH and LCH, not all combinations of <span><code>L</code></span>, <span><code>C</code></span>, and <span><code>H</code></span> will result in colors that are supported by every monitor. Although browsers will try to find the closest supported color, it’s still safer to check colors using our <a href="https://oklch.com/" target="_blank" rel="noopener noreferrer">color picker</a>.</li>
<li>OKLCH is a new color space. At the time of this writing in 2024, its ecosystem is still limited (for Figma we have <a href="https://www.figma.com/community/plugin/1173638098109123591/okcolor" target="_blank" rel="noopener noreferrer">the plugin</a> but not <a href="https://forum.figma.com/t/support-oklab-and-oklch/18287" target="_blank" rel="noopener noreferrer">official support</a>), but we already have a <a href="https://huetone.ardov.me/" target="_blank" rel="noopener noreferrer">palette generator</a>, <a href="https://oklch.com/" target="_blank" rel="noopener noreferrer">color picker</a>, and <a href="https://bottosson.github.io/posts/oklab/#oklab-implementations" target="_blank" rel="noopener noreferrer">many converters</a>.</li>
</ol>
<figure><p><img alt="The OKLCH color picker by Evil Martians shows the OKLCH space and lightness, chroma, alpha, and hue sliders." src="https://evilmartians.com/static/6a2410421d022095da498de7ce6721c3/oklch-picker.png" height="586" width="1156" loading="lazy"/></p><figcaption><p>OKLCH space in color picker</p></figcaption></figure>
<p>So, that’s the short version, but if you want the whole story, let’s start from the beginning in the next section.</p>
<p><strong>Table of contents</strong>:</p>
<ol>
<li><a href="#how-css-colors-have-changed">How CSS colors have changed</a></li>
<li><a href="#comparing-oklch-with-other-css-color-formats">Comparing OKLCH with other CSS color formats</a></li>
<li><a href="#how-oklch-works">How OKLCH works</a></li>
<li><a href="#how-to-add-oklch-to-your-project">How to add OKLCH to your project</a></li>
<li><a href="#summing-up-the-results">Summing up the results</a></li>
</ol>
<h2 id="how-css-colors-have-changed">How CSS colors have changed</h2>
<h3 id="css-colors-module-4">CSS Colors Module 4</h3>
<p>Some recent history: the <a href="https://www.w3.org/TR/css-color-4/" target="_blank" rel="noopener noreferrer">CSS Color Module Level 4</a> specification become a candidate recommendation on July 5, 2022.</p>
<p>It added new syntactic sugar to color functions, which we will use in this article:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.old</span> <span>{</span>
  <span>color</span><span>:</span>   <span>rgb</span><span>(</span>51<span>,</span> 170<span>,</span> 51<span>)</span><span>;</span>
  <span>color</span><span>:</span>   <span>rgba</span><span>(</span>51<span>,</span> 170<span>,</span> 51<span>,</span> 0.5<span>)</span><span>;</span>
<span>}</span>
<span>.new</span> <span>{</span>
  <span>color</span><span>:</span>   <span>rgb</span><span>(</span>51 170 51<span>)</span><span>;</span>
  <span>color</span><span>:</span>   <span>rgb</span><span>(</span>51 170 51 / 50%<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<blockquote>
<p>But more importantly, CSS Color 4 also added 14 new ways to define colors—and these are not just syntactic sugar. These new color-writing methods (like <span><code>oklch()</code></span>) improve code readability, a11y, and have the potential to add new features to your website.</p>
</blockquote>
<h3 id="p3-colors">P3 colors</h3>
<p>Modern displays can’t actually display all the colors which are visible to the human eye. The current standard color subset is called sRGB and it can render only 35% of these human-visible colors.</p>
<p>New screens fix this a bit, since they add 30% more new colors; this set of colors is called P3 (also known as wide-gamut). In terms of adoption, all modern Apple devices, and many OLED screens, have P3 color support. So, this isn’t something from the distant future—this is happening now.</p>

<p>This additional 30% of color can be very useful for designers:</p>
<ul>
<li>Some of these new colors are more saturated. Thus, you can produce more eye-catching landing pages.</li>
<li>The additional colors give your designers more flexibility with palette generation for their design systems.</li>
</ul>
<figure><p><img alt="On the left side, a shape shows the extra P3 colors extending from sRGB, represented as an extended wedge from the original shape. On the right side, the left icon is rendered in sRGB, and the right icon is rendered with P3 colors, showing how they are more vibrant." src="https://evilmartians.com/static/34e8eeed150629f41555c92b01f36644/p3.png" height="300" width="842" loading="lazy"/></p><figcaption><p>Newly available P3 colors for green on the left. Real-world icon comparison with sRGB vs. P3 on the right.</p></figcaption></figure>
<p>So, we have P3 colors! That’s great and all, but to actually use them, we’ll need to find a color format in order to support P3. <span><code>rgb()</code></span>, <span><code>hsl()</code></span>, or hex formats can’t be used to specify P3 colors. We could, however, use the new <span><code>color(display-p3 1 0 0)</code></span>, but it still shares the readability problems of the RGB format.</p>
<p>Luckily, OKLCH has good readability, supports P3 and beyond, as well as any color visible to the human eye.</p>
<h3 id="css-native-color-manipulations">CSS native color manipulations</h3>
<p>While it’s true that CSS Color 4 is a big step forward, the upcoming <a href="https://www.w3.org/TR/css-color-5/" target="_blank" rel="noopener noreferrer">CSS Color 5</a> will be even more useful; it will finally give us native color manipulation in CSS.</p>
<div><div><p><span><div data-language="css"><pre><code>
<span>:root</span> <span>{</span>
  <span>--accent</span><span>:</span>   <span>hsl</span><span>(</span>63 61% 40%<span>)</span><span>;</span>
<span>}</span>
<span>.error</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>hsl</span><span>(</span>from <span>var</span><span>(</span>--accent<span>)</span> 20 s l<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>hsl</span><span>(</span>from <span>var</span><span>(</span>--accent<span>)</span> h s <span>calc</span><span>(</span>l + 0.1<span>)</span><span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>With this new syntax, you can take one color (for instance, from a custom property) and change the individual components of the color format.</p>
<p>Still, as mentioned, there is a drawback to this approach as using the <span><code>hsl()</code></span> format is bad for a11y. Results will have unpredictable lightness because the <span><code>l</code></span> values are different for different hues.</p>
<p>A familiar refrain emerges: we need a color space where color manipulations produce expected results. Like, for instance, OKLCH.</p>
<div><div><p><span><div data-language="css"><pre><code><span>:root</span> <span>{</span>
  <span>--accent</span><span>:</span>   <span>oklch</span><span>(</span>0.7 0.14 113<span>)</span><span>;</span>
<span>}</span>
<span>.error</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--accent<span>)</span> l c 15<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--accent<span>)</span> <span>calc</span><span>(</span>l + 0.1<span>)</span> c h<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>Note: You don’t need to use OKLCH to input the <span><code>--accent</code></span> colors of <span><code>oklch(from …)</code></span>, but using a consistent format is better for code readability.</p>
<h2 id="comparing-oklch-with-other-css-color-formats">Comparing OKLCH with other CSS color formats</h2>
<p>Hopefully, the previous section gave you some context about where we’ve been, where we are, and where we’re going, as well as <span><code>oklch()</code></span>, P3 colors, native color manipulation, and how they all fit together.</p>
<p>Of course, rather than just going all in with <span><code>oklch()</code></span>, we could mix and match formats, using different color formats for things like custom properties, P3, or color modifications as needed—but, naturally, having the same color format for most tasks is much better for code maintainability.</p>

<p>So, with this in mind, let’s go ahead and assume that we’ll try to find <strong>just one color format</strong> for the future of CSS. I believe that format should meet the following criteria:</p>
<ol>
<li>It should have native CSS support.</li>
<li>The format must be able to encode wide-gamut color: P3 and beyond.</li>
<li>It should be well suited to color modification:<!-- -->
<ul>
<li>This includes a human-readable axis (<span><code>lightness</code></span> instead of <span><code>amount of red</code></span>).</li>
<li>All axes should be independent. Changing the value of a hue’s axis color should maintain the same level of contrast. Saturation changes should not change hue.</li>
</ul>
</li>
</ol>
<p>So, now that we have our criteria in mind, let’s compare formats.</p>
<h3 id="oklch-vs-rgbhex">OKLCH vs. RGB/Hex</h3>
<p>The color formats <span><code>rgb(109 162 218)</code></span>, <span><code>#6ea3db</code></span>, or the P3-analog <span><code>color(display-p3 0.48 0.63 0.84)</code></span>, each contain 3 numbers that represent the amount of red, green and blue. Note: <span><code>1</code></span> in <span><code>color(display-p3)</code></span> encodes a larger value than <span><code>255</code></span> in RGB.</p>
<p>The above formats all share essentially the same problem: they’re completely unreadable for most developers. Instead, people just use them like they are some sort of magic number, absent of any real understanding or way to compare them.</p>
<blockquote>
<p>RGB, hex and color(display-p3) aren’t convenient for color modifications because, for the vast majority of humans, it’s difficult to intuitively set colors by changing the amount of red, blue and green. Further, RGB and hex also can’t encode P3 colors.</p>
</blockquote>
<p>On the other hand, OKLCH, LCH, HSL have values we can set that are much closer to the way people naturally think about colors. OKLCH and LCH contain 3 numbers which, respectively, represent the following: lightness, chroma (or saturation), and hue.</p>
<p>Compare hex and OKLCH:</p>

<p>OKLCH’s intuitive values sound great, no? But, here’s where we need to talk about the flip side of the coin. The main disadvantage of OKLCH is that, unlike the others, it has a “young” color space and the ecosystem is still in the development process.</p>
<h3 id="oklch-vs-hsl">OKLCH vs. HSL</h3>
<p>Now, let’s move on and compare OKLCH with HSL. HSL contains 3 numbers to encode hue, saturation, and lightness, like so: <span><code>hsl(210 60% 64%)</code></span>.</p>
<p>The main problem with HSL is that it has a cylindrical color space. Every hue has the same amount of saturation (<span><code>0—100%</code></span>). But in reality, our displays and eyes have different max saturations for different hues. HSL hides this complexity by deforming the color space and extending colors to have the same max values.</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;517&#39;%20width=&#39;1070&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/d75be34c77afcc756a653cc400821711/f7f6f/hsl-vs-oklch.webp 268w,/static/d75be34c77afcc756a653cc400821711/cb6db/hsl-vs-oklch.webp 535w,/static/d75be34c77afcc756a653cc400821711/854e8/hsl-vs-oklch.webp 1070w,/static/d75be34c77afcc756a653cc400821711/ff798/hsl-vs-oklch.webp 2140w" sizes="(min-width: 1070px) 1070px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 1070px) 1070px, 100vw" decoding="async" loading="lazy" data-src="/static/d75be34c77afcc756a653cc400821711/a5ead/hsl-vs-oklch.png" data-srcset="/static/d75be34c77afcc756a653cc400821711/0d2af/hsl-vs-oklch.png 268w,/static/d75be34c77afcc756a653cc400821711/7686d/hsl-vs-oklch.png 535w,/static/d75be34c77afcc756a653cc400821711/a5ead/hsl-vs-oklch.png 1070w,/static/d75be34c77afcc756a653cc400821711/78d21/hsl-vs-oklch.png 2140w" alt="There are 4 illustrations. The two in the top row show HSL and OKLCH color spaces with the same chroma/saturation values. The two illustrations in the bottom row show the same color spaces, but in black and white."/></picture></div></div><figcaption><p>Hue-Lightness slice of HSL and OKLCH spaces with the same chroma/saturation and black-and-white versions below. HSL lightness is not consistent across hue axes.</p></figcaption></figure>
<p>As a result, an HSL-deformed color space can’t be used for proper color modifications; here, the <span><code>L</code></span> (lightness) component is not accurate. Different hues represent different “real” lightness values. This leads to issues with contrast and bad accessibility.</p>

<p>Here are a few real use case examples to demonstrate this problem:</p>
<ol>
<li>Adding 10% lightness will have different results for blue and purple colors. (SASS users may remember how <span><code>darken()</code></span> generates unexpected results.)</li>
<li>Hue changes (for instance, producing an error-like red color using a company’s accent color) could also change lightness, thus making text unreadable.</li>
</ol>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;218&#39;%20width=&#39;343&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/aa9c5f16846bf4d62a124a3da058c3e4/e246b/buttons-hsl-vs-oklch.webp 86w,/static/aa9c5f16846bf4d62a124a3da058c3e4/fb10c/buttons-hsl-vs-oklch.webp 172w,/static/aa9c5f16846bf4d62a124a3da058c3e4/99afd/buttons-hsl-vs-oklch.webp 343w,/static/aa9c5f16846bf4d62a124a3da058c3e4/fe210/buttons-hsl-vs-oklch.webp 686w" sizes="(min-width: 343px) 343px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 343px) 343px, 100vw" decoding="async" loading="lazy" data-src="/static/aa9c5f16846bf4d62a124a3da058c3e4/1ab18/buttons-hsl-vs-oklch.png" data-srcset="/static/aa9c5f16846bf4d62a124a3da058c3e4/0d9de/buttons-hsl-vs-oklch.png 86w,/static/aa9c5f16846bf4d62a124a3da058c3e4/a8bac/buttons-hsl-vs-oklch.png 172w,/static/aa9c5f16846bf4d62a124a3da058c3e4/1ab18/buttons-hsl-vs-oklch.png 343w,/static/aa9c5f16846bf4d62a124a3da058c3e4/89afa/buttons-hsl-vs-oklch.png 686w" alt="There are 4 buttons. The first column has two buttons and represents the HSL space before and after using the rotation angle, and the second column with the other two buttons represents the OKLCH space before and after using the rotation angle. After changes in HSL, the contrast between the background and text is lower, unlike OKLCH."/></picture></div></div><figcaption><p>In HSL, hue changes could lead to accessibility issues from low contrast</p></figcaption></figure>
<p>HSL is bad for color modification. Many teams have asked the community to <a href="https://wildbit.com/blog/accessible-palette-stop-using-hsl-for-color-systems" target="_blank" rel="noopener noreferrer">avoid HSL</a> for design system palette generation. Additionally, like RGB and hex, HSL can’t be used to define P3 colors.</p>
<p>OKLCH doesn’t deform the space; it shows the real color space with all its complexity. On one hand, this feature allows us to have predictable lightness values after color transformations and P3 color definition. But, on other hand, not all number combinations in OKLCH generate visible colors: some are only visible on P3 monitors. But there’s still some good here: browsers will render the closest supported color.</p>
<h3 id="oklch-vs-oklab--lch-vs-lab">OKLCH vs. Oklab &amp; LCH vs. Lab</h3>
<p>CSS has two functions for Oklab space: <span><code>oklab()</code></span> and <span><code>oklch()</code></span> and the same for Lab: <span><code>lab()</code></span> and <span><code>lch()</code></span>. So, what’s the difference?</p>
<p>While they use the same space, they use different ways of encoding a point in this space. Oklab and Lab cartesian coordinates (<span><code>a</code></span>: the green/red value of a color, <span><code>b</code></span>: blue/yellow value), and OKLCH and LCH use polar coordinates (angle for hue and distance for chroma).</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;273&#39;%20width=&#39;601&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/2a08d3d2ca022b7d57d8ad75ac9459ba/70b23/oklab-vs-oklch.webp 150w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/bf647/oklab-vs-oklch.webp 301w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/c6a69/oklab-vs-oklch.webp 601w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/160f0/oklab-vs-oklch.webp 1202w" sizes="(min-width: 601px) 601px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 601px) 601px, 100vw" decoding="async" loading="lazy" data-src="/static/2a08d3d2ca022b7d57d8ad75ac9459ba/ed38d/oklab-vs-oklch.png" data-srcset="/static/2a08d3d2ca022b7d57d8ad75ac9459ba/dd607/oklab-vs-oklch.png 150w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/e495f/oklab-vs-oklch.png 301w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/ed38d/oklab-vs-oklch.png 601w,/static/2a08d3d2ca022b7d57d8ad75ac9459ba/f098e/oklab-vs-oklch.png 1202w" alt="There are two circles to illustrate the difference between Oklab&#39;s cartesian coordinates, with a right angle showing a and b, and OKLCH&#39;s polar coordinates, which appear as an acute angle with the top ray labeled as &#39;chroma&#39; and the angle itself labeled as &#39;hue&#39;."/></picture></div></div><figcaption><p>Cartesian coordinates (Oklab) vs. polar coordinates (OKLCH) in Oklab space</p></figcaption></figure>
<p>In short, OKLCH and LCH are both better choices for developer readability and color modification because the chroma and hue values are closer to how people actually think about color, rather than simply <span><code>a</code></span> and <span><code>b</code></span>.</p>
<h3 id="oklch-vs-lch">OKLCH vs. LCH</h3>
<p><a href="https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/" target="_blank" rel="noopener noreferrer">LCH</a> is a good format on top of the CIE LAB (Lab) space that was created to solve all the problems of HSL and RGB. It can encode P3 colors and, in most cases, produces predictable color modification results.</p>
<p>But LCH has one painful bug: an unexpected hue shift on chroma and lightness changes in blue colors (between hue values of <span><code>270</code></span> and <span><code>330</code></span>).</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;333&#39;%20width=&#39;842&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/0bdcb6be282c87ca198aaf61ce808faf/5558a/lch-vs-oklch.webp 211w,/static/0bdcb6be282c87ca198aaf61ce808faf/ab2d1/lch-vs-oklch.webp 421w,/static/0bdcb6be282c87ca198aaf61ce808faf/7329d/lch-vs-oklch.webp 842w,/static/0bdcb6be282c87ca198aaf61ce808faf/b23ee/lch-vs-oklch.webp 1684w" sizes="(min-width: 842px) 842px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 842px) 842px, 100vw" decoding="async" loading="lazy" data-src="/static/0bdcb6be282c87ca198aaf61ce808faf/d9b38/lch-vs-oklch.png" data-srcset="/static/0bdcb6be282c87ca198aaf61ce808faf/4e5f4/lch-vs-oklch.png 211w,/static/0bdcb6be282c87ca198aaf61ce808faf/9904f/lch-vs-oklch.png 421w,/static/0bdcb6be282c87ca198aaf61ce808faf/d9b38/lch-vs-oklch.png 842w,/static/0bdcb6be282c87ca198aaf61ce808faf/694e5/lch-vs-oklch.png 1684w" alt="Two triangles that are constant-hue slice of LCH and OKLCH spaces with the same hue. The LCH slice, the leftmost triangular shape, is blue on one side and purple on the other. The right shape, OKLCH, keeps a constant hue, as expected."/></picture></div></div><figcaption><p>A constant-hue slice of LCH and OKLCH spaces with the same hue. The LCH slice is blue on one side and purple on the other. OKLCH keeps a constant hue as expected.</p></figcaption></figure>
<p>Here is a small real case:</p>

<p>The Oklab and OKLCH spaces <a href="https://bottosson.github.io/posts/oklab/" target="_blank" rel="noopener noreferrer">were created</a> to solve this hue shift bug.</p>
<p>But OKLCH isn’t merely a bugfix, it also has <a href="https://www.w3.org/TR/css-color-4/#ok-lab" target="_blank" rel="noopener noreferrer">nice new features</a> related to the math behind color axes. For instance, it has improved <a href="https://bottosson.github.io/posts/gamutclipping/" target="_blank" rel="noopener noreferrer">gamut correction</a> and CSSWG <a href="https://www.w3.org/TR/css-color-4/#css-gamut-mapping" target="_blank" rel="noopener noreferrer">recommends using OKLCH</a> for gamut mapping.</p>
<h2 id="how-oklch-works">How OKLCH works</h2>
<h3 id="a-little-bit-of-history">A little bit of history</h3>
<p>The Oklab &amp; OKLCH color spaces were created by <a href="https://twitter.com/bjornornorn" target="_blank" rel="noopener noreferrer">Björn Ottosson</a> in 2020. The primary reason they were created was to fix the CIE LAB &amp; LCH issue. Björn wrote <a href="https://bottosson.github.io/posts/oklab/" target="_blank" rel="noopener noreferrer">a great article</a> detailing the reasons he made them and their implementation details.</p>
<p>To be clear, Oklab is very young and this is its primary weak point.</p>
<p>But, after just 4 years, Oklab has already seen very good adoption:</p>
<ul>
<li>It was added to the <a href="https://www.w3.org/TR/css-color-4/#ok-lab" target="_blank" rel="noopener noreferrer">CSS specification</a>.</li>
<li>Chrome, Safari, and Firefox have <span><code>oklch()</code></span> support.</li>
<li>Photoshop <a href="https://helpx.adobe.com/photoshop/using/gradient-interpolation.html" target="_blank" rel="noopener noreferrer">added</a> Oklab for gradient interpolation.</li>
<li>OKLab is used in <a href="https://huetone.ardov.me/" target="_blank" rel="noopener noreferrer">color palette generators</a> for good accessibility.</li>
<li>OKLCH already can be used in Figma using <a href="https://www.figma.com/community/plugin/1173638098109123591/OkColor" target="_blank" rel="noopener noreferrer">this plugin</a>.</li>
</ul>
<p>I personally think, that the big changes coming with CSS Colors 4 and 5 are a good time to grab the latest and best solution. In any case, we’ll need to create a new ecosystem around new features from new CSS specs.</p>
<h3 id="axes">Axes</h3>
<p>Colors in OKLCH are encoded with 4 numbers. In CSS, it looks like this: <span><code>oklch(L C H)</code></span> or <span><code>oklch(L C H / a)</code></span>.</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;235.00000000000003&#39;%20width=&#39;1073&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/1ba334bc155f6d4652884281b72aa948/2b605/oklch-axes.webp 268w,/static/1ba334bc155f6d4652884281b72aa948/2dd1c/oklch-axes.webp 537w,/static/1ba334bc155f6d4652884281b72aa948/e8688/oklch-axes.webp 1073w,/static/1ba334bc155f6d4652884281b72aa948/a0c8c/oklch-axes.webp 2146w" sizes="(min-width: 1073px) 1073px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 1073px) 1073px, 100vw" decoding="async" loading="lazy" data-src="/static/1ba334bc155f6d4652884281b72aa948/8c5cf/oklch-axes.png" data-srcset="/static/1ba334bc155f6d4652884281b72aa948/41c43/oklch-axes.png 268w,/static/1ba334bc155f6d4652884281b72aa948/0f844/oklch-axes.png 537w,/static/1ba334bc155f6d4652884281b72aa948/8c5cf/oklch-axes.png 1073w,/static/1ba334bc155f6d4652884281b72aa948/cad31/oklch-axes.png 2146w" alt="Four bars show the OKLCH axes. The top-left is lightness; it begins with a dark purple, becoming a light purple as it moves to the right, and eventually there is a hard change to white. The top-right bar is chroma; it begins as a grayish purple and transitions to a light purple, from roughly 33% of the bar to the right there is a hard change to white. The bottom-left is alpha: an alpha channel transitions to a light purple as it stretches to the right. The light purple reaches the end of the bar&#39;s left side. The bottom-right is hue: a range of vibrant colors transition as the bar goes from left to right."/></picture></div></div><figcaption><p>OKLCH axes</p></figcaption></figure>
<p>Here’s a more detailed explanation of each value:</p>
<ul>
<li><span><code>L</code></span> is <em>perceived</em> <strong>lightness</strong>. It ranges from <span><code>0</code></span> (black) to <span><code>1</code></span> (white). It accepts percentage too (from <span><code>0%</code></span> to <span><code>100%</code></span>), but <span><code>%</code></span> doesn’t work in <span><code>calc()</code></span> or relative colors.</li>
<li><span><code>C</code></span> is <strong>chroma</strong>, the saturation of color. It goes from <span><code>0</code></span> (gray) to infinity. In practice there is actually a limit, but it depends on a screen’s color gamut (P3 colors will have bigger values than sRGB) and each hue has a different maximum chroma. For both P3 and sRGB the value will be always below <span><code>0.37</code></span>.</li>
<li><span><code>H</code></span> is the <strong>hue</strong> angle. It goes from <span><code>0</code></span> to <span><code>360</code></span>, through red <span><code>20</code></span>, yellow <span><code>90</code></span>, green <span><code>140</code></span>, blue <span><code>220</code></span>, purple <span><code>320</code></span> and then back to red. You can use <a href="https://en.wikipedia.org/wiki/ROYGBIV" target="_blank" rel="noopener noreferrer">Roy G. Biv</a> mnemonic by giving around 50° to each letter. Since it is an angle, <a href="https://oklch.com/#70,0.1,0,100" target="_blank" rel="noopener noreferrer"><span><code>0</code></span></a> and <a href="https://oklch.com/#70,0.1,360,100" target="_blank" rel="noopener noreferrer"><span><code>360</code></span></a> encode the same hue. <span><code>H</code></span> can be written with units <span><code>60deg</code></span>, or without <span><code>60</code></span>.</li>
<li><span><code>a</code></span> is <strong>opacity</strong> (<span><code>0</code></span>-<span><code>1</code></span> or <span><code>0</code></span>-<span><code>100%</code></span>).</li>
</ul>
<p>Here is a few examples of OKLCH colors:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.bw</span> <span>{</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0 0 0<span>)</span><span>;</span>     
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>1 0 0<span>)</span><span>;</span>     
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>1 0.2 100<span>)</span><span>;</span> 
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.5 0 0<span>)</span><span>;</span>   
<span>}</span>
<span>.colors</span> <span>{</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.8 0.12 100<span>)</span><span>;</span> 
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.6 0.12 100<span>)</span><span>;</span> 
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.8 0.05 100<span>)</span><span>;</span> 
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.8 0.12 225<span>)</span><span>;</span> 
<span>}</span>
<span>.opacity</span> <span>{</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.8 0.12 100 / 50%<span>)</span><span>;</span> 
<span>}</span></code></pre></div></span></p></div></div>
<p>Note, that some components could have <a href="https://www.w3.org/TR/css-color-4/#valdef-color-none" target="_blank" rel="noopener noreferrer"><span><code>none</code></span></a> as a value. This may occur after a color transformation. For instance, white has no hue, and browsers will parse <span><code>none</code></span> as <span><code>0</code></span>.</p>
<div><div><p><span><div data-language="css"><pre><code><span>.white</span> <span>{</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>1 0 none<span>)</span><span>;</span> 
<span>}</span></code></pre></div></span></p></div></div>
<h3 id="color-modifications-in-css">Color modifications in CSS</h3>
<p>In <a href="https://www.w3.org/TR/css-color-5/" target="_blank" rel="noopener noreferrer">CSS Colors 5</a>, we’ll be able to have native color modifications. This will shine a light on one of my favorite perks of OKLCH: it’s the best color space for color modification because it has very predictable results.</p>
<p>Color modification syntax looks like this:</p>
<div><div><p><span><div data-language="css"><pre><code><span>:root</span> <span>{</span>
  <span>--origin</span><span>:</span>   #ff000<span>;</span>
<span>}</span>
<span>.foo</span> <span>{</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--origin<span>)</span> l c h<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>The origin color (<span><code>var(--origin)</code></span> in the example above) can be:</p>
<ul>
<li>A color in any format: <span><code>#ff0000</code></span>, <span><code>rgb(255, 0, 0)</code></span>, or <span><code>oklch(62.8% 0.25 30)</code></span>.</li>
<li>A CSS custom property with a color in any format.</li>
</ul>
<p>Each component (<span><code>l</code></span>, <span><code>c</code></span>, <span><code>h</code></span>) after <span><code>from X</code></span> can be:</p>
<ul>
<li>A letter (<span><code>l</code></span>, <span><code>c</code></span>, <span><code>h</code></span>), indicating to keep the component the same as it was in the origin color.</li>
<li>A <span><code>calc()</code></span> expression. You can use a letter (<span><code>l</code></span>, <span><code>c</code></span>, <span><code>h</code></span>) instead of a number to reference the value in the origin color.</li>
<li>A new value, which will replace the component.</li>
</ul>
<p>It may sound complex, but seeing some examples can help illustrate:</p>
<div><div><p><span><div data-language="css"><pre><code><span>:root</span> <span>{</span>
  <span>--error</span><span>:</span>   <span>oklch</span><span>(</span>0.6 0.16 30<span>)</span><span>;</span>
<span>}</span>
<span>.message.is-error</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--error<span>)</span> l c h / 60%<span>)</span><span>;</span>
  
  <span>border-color</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--error<span>)</span> <span>calc</span><span>(</span>l - 0.1<span>)</span> c h<span>)</span>
<span>}</span>
<span>.message.is-success</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--error<span>)</span> l c 140<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>The predicted lightness of OKLCH is very useful when generating accent colors from user input (check an example with our <a href="https://oklch.com/" target="_blank" rel="noopener noreferrer">OKLCH color picker</a>):</p>
<p><span><div data-language="css"><pre><code><span>:root</span> <span>{</span>
  
  <span>--accent</span><span>:</span> <span>oklch</span><span>(</span>from <span>(</span>--user-input<span>)</span> 0.87 0.06 h<span>)</span><span>;</span>
<span>}</span>

<span>body</span> <span>{</span>
  <span>background</span><span>:</span> <span>var</span><span>(</span>--accent<span>)</span><span>;</span>
  
  <span>color</span><span>:</span> black<span>;</span>
<span>}</span></code></pre></div></span></p><h3 id="gamut-correction">Gamut correction</h3>
<p>OKLCH has an another interesting feature: device independence. That is, OKLCH wasn’t just created for current monitors with sRGB colors.</p>
<p>You can encode any possible color with OKLCH: sRGB, P3, Rec2020 and beyond. Some number combinations will require a P3 monitor to be displayed. For some other combinations, the proper monitors necessary for their display have still yet to be created.</p>
<p>But really, don’t worry about being out of the gamut (the colors supported by a user’s monitor) because browsers will render the closest possible color. Finding the closest color in another gamut is called “gamut mapping” or “gamut correction”.</p>
<p>And this is why you can see holes in axes of the <a href="https://oklch.com/#60,0.16,140,100" target="_blank" rel="noopener noreferrer">OKLCH color picker</a>: every hue has a different maximum chroma. Unfortunately, this isn’t just a problem with OKLCH color encoding; it’s a limit both of currently available monitors, and our own sense of vision. For some lightness values, there is only a blue color with a large chroma. For other lightness values, a green color will not have a corresponding pair in a blue or a red with the same chroma.</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;214&#39;%20width=&#39;511&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/26212691a88eaba1dbf9e4609bf7373b/32c44/oklch-l-44.webp 128w,/static/26212691a88eaba1dbf9e4609bf7373b/37765/oklch-l-44.webp 256w,/static/26212691a88eaba1dbf9e4609bf7373b/727cc/oklch-l-44.webp 511w,/static/26212691a88eaba1dbf9e4609bf7373b/7e6de/oklch-l-44.webp 1022w" sizes="(min-width: 511px) 511px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 511px) 511px, 100vw" decoding="async" loading="lazy" data-src="/static/26212691a88eaba1dbf9e4609bf7373b/3c11f/oklch-l-44.png" data-srcset="/static/26212691a88eaba1dbf9e4609bf7373b/cb941/oklch-l-44.png 128w,/static/26212691a88eaba1dbf9e4609bf7373b/2d996/oklch-l-44.png 256w,/static/26212691a88eaba1dbf9e4609bf7373b/3c11f/oklch-l-44.png 511w,/static/26212691a88eaba1dbf9e4609bf7373b/12f89/oklch-l-44.png 1022w" alt="A graph with two axes, C on the left and H on the bottom, shows a shape that has huge circular bites missing; as the shape moves from left to right, various colors are seen, appearing as multiple transitioning gradients."/></picture></div></div><figcaption><p>For 44% lightness only blue has high chrome colors visible on sRGB screens</p></figcaption></figure>
<p>There are 2 ways of gamut mapping:</p>
<ul>
<li>Convert the color to RGB (or P3) and clip values above 100% or below 0%: <span><code>rgb(150% -20% 30%)</code></span> → <span><code>rgb(100% 0 30%)</code></span>. This is the fastest method, but it has the worst results—it could change a color’s hue and this change will be visible to users.</li>
<li>Convert the color to OKLCH and reduce the chroma and lightness. This keeps the origin hue but is a little slower to render.</li>
</ul>
<p>Chris Lilley has created <a href="https://svgees.us/Color/ok-clip-lch-explorer.html" target="_blank" rel="noopener noreferrer">a nice comparison between different gamut mapping methods</a>.</p>
<p>The CSS Colors 4 spec <a href="https://www.w3.org/TR/css-color-4/#css-gamut-mapping" target="_blank" rel="noopener noreferrer">requires</a> browsers to use the OKLCH method for gamut mapping. But still, right now, Chrome and Safari use the fast, but inaccurate, clipping method. That’s why we currently recommend manual gamut mapping and adding both sRGB and P3 colors to CSS:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.martian</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.6973 0.155 112.79<span>)</span><span>;</span>
<span>}</span>
<span><span>@media</span> <span>(</span><span>color-gamut</span><span>:</span> p3<span>)</span></span> <span>{</span>
  <span>.martian</span> <span>{</span>
    <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.6973 0.176 112.79<span>)</span><span>;</span>
    
  <span>}</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>And here’s some good news: <a href="https://github.com/fpetrakov/stylelint-gamut" target="_blank" rel="noopener noreferrer">stylelint-gamut</a> can automatically detect all P3 colors which need to be wrapped with <span><code>@media</code></span>.</p>
<h2 id="how-to-add-oklch-to-your-project">How to add OKLCH to your project</h2>
<p>Right now, all browsers <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/oklch" target="_blank" rel="noopener noreferrer">support</a> <span><code>oklch()</code></span>. You don’t need <a href="https://preset-env.cssdb.org/" target="_blank" rel="noopener noreferrer">old polyfills</a>.</p>
<h3 id="step-1-converting-currently-existing-colors">Step 1: Converting currently existing colors</h3>
<p>You can replace all colors using hex, <span><code>rgb()</code></span> or <span><code>hsl()</code></span> formats to OKLCH; they’ll work in every browser.</p>
<p>Search for any colors in your CSS source code and convert them to <span><code>oklch()</code></span> using the <a href="https://oklch.com/" target="_blank" rel="noopener noreferrer">OKLCH convertor</a>.</p>
<p><span><div data-language="diff"><pre><code>.header {
<span><span>-</span> background: #f3f7fa;
</span><span><span>+</span> background: oklch(0.97 0.006 240);
</span>}</code></pre></div></span></p><p>You may also use <a href="https://github.com/fpetrakov/convert-to-oklch" target="_blank" rel="noopener noreferrer">this script</a> to automatically convert all the colors:</p>
<p><span><div data-language="sh"><pre><code>npx convert-to-oklch ./src/**/*.css</code></pre></div></span></p><p>If you only have a Figma file, you can use the <a href="https://www.figma.com/community/plugin/1173638098109123591/OkColor" target="_blank" rel="noopener noreferrer">OkColor</a> plugin to copy colors in <span><code>oklch()</code></span> directly from Figma (using the <span><code>OkLCH (CSS)</code></span> format).</p>

<p>Perhaps this little bit of refactoring is also a good time to increase your CSS code’s maintainability by moving the colors onto a palette:</p>

<p>These are the requirements for color palettes:</p>
<ul>
<li>All colors are described as CSS Custom Properties.</li>
<li>React/Vue/etc. components only use these colors as <span><code>var(--error)</code></span>.</li>
<li>Designers should try to re-use colors to reduce number of color variations.</li>
<li>For a dark or high-contrast theme, you do not need <span><code>@media</code></span> in your components’ CSS, you just change CSS Custom Properties in the palette.</li>
</ul>
<p>Here’s <a href="https://github.com/evilmartians/oklch-picker/blob/main/view/base/colors.css" target="_blank" rel="noopener noreferrer">an example</a> of this approach.</p>
<p><span><div data-language="css"><pre><code><span>:root</span> <span>{</span>
  <span>--surface-0</span><span>:</span> <span>oklch</span><span>(</span>0.96 0.005 300<span>)</span><span>;</span>
  <span>--surface-1</span><span>:</span> <span>oklch</span><span>(</span>1 0 0<span>)</span><span>;</span>
  <span>--surface-2</span><span>:</span> <span>oklch</span><span>(</span>0.99 0 0 / 85%<span>)</span><span>;</span>
  <span>--text-primary</span><span>:</span> <span>oklch</span><span>(</span>0 0 0<span>)</span><span>;</span>
  <span>--text-secondary</span><span>:</span> <span>oklch</span><span>(</span>0.54 0 0<span>)</span><span>;</span>
  <span>--accent</span><span>:</span> <span>oklch</span><span>(</span>0.57 0.18 286<span>)</span><span>;</span>
  <span>--danger</span><span>:</span> <span>oklch</span><span>(</span>0.59 0.23 7<span>)</span><span>;</span>
<span>}</span>

<span><span>@media</span> <span>(</span><span>prefers-color-scheme</span><span>:</span> dark<span>)</span></span> <span>{</span>
  <span>:root</span> <span>{</span>
    <span>--surface-0</span><span>:</span> <span>oklch</span><span>(</span>0 0 0<span>)</span><span>;</span>
    <span>--surface-1</span><span>:</span> <span>oklch</span><span>(</span>0.29 0.01 300<span>)</span><span>;</span>
    <span>--surface-2</span><span>:</span> <span>oklch</span><span>(</span>0.29 0 0 / 85%<span>)</span><span>;</span>
    <span>--text-primary</span><span>:</span> <span>oklch</span><span>(</span>1 0 0<span>)</span><span>;</span>
  <span>}</span>
<span>}</span></code></pre></div></span></p><p>And plus, moving over to <span><code>oklch()</code></span> will be a little easier after palette creation.</p>
<h3 id="step-2-maintaining-oklch-with-stylelint">Step 2: Maintaining OKLCH with Stylelint</h3>
<p><a href="https://stylelint.io/" target="_blank" rel="noopener noreferrer">Stylelint</a> is a style linter that’s useful for finding common mistakes and promoting best practices. It’s like ESLint, but for CSS, SASS, or CSS-in-JS.</p>
<p>Stylelint can be very useful when migrating to <span><code>oklch()</code></span> because you can:</p>
<ul>
<li>Specify that colors using hex, <span><code>rgb()</code></span>, <span><code>hsl()</code></span> will not be used and instead keep all the colors in <span><code>oklch()</code></span> to improve consistency.</li>
<li>Double-check that all P3 colors are inside <span><code>@media (color-gamut: p3)</code></span> to avoid browser gamut correction (right now, Chrome and Safari don’t do this correctly).</li>
</ul>
<p>Let’s install Stylelint and the <a href="https://www.npmjs.com/package/stylelint-gamut" target="_blank" rel="noopener noreferrer">stylelint-gamut</a> plugin using your package manager. With NPM, run:</p>
<p><span><div data-language="sh"><pre><code><span>npm</span> <span>install</span> stylelint stylelint-gamut</code></pre></div></span></p><p>Create <span><code>.stylelintrc</code></span> config with:</p>
<p><span><div data-language="json"><pre><code><span>{</span>
  <span>&#34;plugins&#34;</span><span>:</span> <span>[</span>
    <span>&#34;stylelint-gamut&#34;</span>
  <span>]</span><span>,</span>
  <span>&#34;rules&#34;</span><span>:</span> <span>{</span>
    <span>&#34;gamut/color-no-out-gamut-range&#34;</span><span>:</span> <span>true</span><span>,</span>
    <span>&#34;function-disallowed-list&#34;</span><span>:</span> <span>[</span><span>&#34;rgba&#34;</span><span>,</span> <span>&#34;hsla&#34;</span><span>,</span> <span>&#34;rgb&#34;</span><span>,</span> <span>&#34;hsl&#34;</span><span>]</span><span>,</span>
    <span>&#34;color-function-notation&#34;</span><span>:</span> <span>&#34;modern&#34;</span><span>,</span>
    <span>&#34;color-no-hex&#34;</span><span>:</span> <span>true</span>
  <span>}</span>
<span>}</span></code></pre></div></span></p><p>Add the Stylelint call to <span><code>npm test</code></span> to run it on CI. Change <span><code>package.json</code></span> like so:</p>
<p><span><div data-language="diff"><pre><code><span><span> </span> &#34;scripts&#34;: {
</span><span><span>-</span>   &#34;test&#34;: &#34;eslint .&#34;
</span><span><span>+</span>   &#34;test&#34;: &#34;eslint . &amp;&amp; stylelint **/*.css&#34;
</span><span><span> </span> }</span></code></pre></div></span></p><p>Run <span><code>npm test</code></span> to find any colors which should be converted to <span><code>oklch()</code></span>.</p>
<p>We also recommend adding the <a href="https://github.com/stylelint/stylelint-config-recommended" target="_blank" rel="noopener noreferrer"><span><code>stylelint-config-recommended</code></span></a> to <span><code>.stylelintrc</code></span>. This Stylelint sharable config will ensure that your CSS code is using the popular best practices.</p>

<p>Replacing colors with <span><code>oklch()</code></span> will improve code readability and maintainability, but it will not add new features for users. However, there is an additional feature of OKLCH which <em>will</em> be visible to users: we can add rich, wide-gamut P3 colors to our websites. For instance, we could add deep colors to a landing page.</p>

<p>Here’s how to do it:</p>
<ol>
<li>In your CSS, choose some saturated color, like an accent color.</li>
<li>Copy it into <a href="https://oklch.com/" target="_blank" rel="noopener noreferrer">OKLCH Color Picker</a>.</li>
<li>Change the <span><code>Chroma</code></span> and <span><code>Lightness</code></span> values to move the color into the P3 area. The <span><code>Lightness</code></span> chart will provide the best feedback. Simply move the color above the thin white line.</li>
<li>Copy the result and wrap it with a <span><code>color-gamut: p3</code></span> media query.</li>
</ol>
<div><div><p><span><div data-language="diff"><pre><code><span><span> </span> :root {
<span> </span>   --accent:   oklch(0.7 0.2 145);
<span> </span> }
</span><span><span>+</span> @media (color-gamut: p3) {
<span>+</span>   :root {
<span>+</span>     --accent:   oklch(0.7 0.29 145);
<span>+</span>   }
<span>+</span> }</span></code></pre></div></span></p></div></div>

<p>You can use OKLCH, not only in CSS, but also in SVGs (or HTML). For instance, this could be useful for adding unique, rich colors to <a href="https://codepen.io/egodyston/pen/rNJRgBo" target="_blank" rel="noopener noreferrer">app icons</a>.</p>

<div><div><p><span><div data-language="xml"><pre><code><span><span><span>&lt;</span>svg</span> <span>viewBox</span><span><span>=</span><span>&#34;</span>0 0 120 120<span>&#34;</span></span> <span>xmlns</span><span><span>=</span><span>&#34;</span>http://www.w3.org/2000/svg<span>&#34;</span></span><span>&gt;</span></span>
  <span><span><span>&lt;</span>style</span><span>&gt;</span></span>
    @media (color-gamut: p3) {
      rect {
        fill:   oklch(0.55 0.23 146)
      }
    }
  <span><span><span>&lt;/</span>style</span><span>&gt;</span></span>
  <span><span><span>&lt;</span>rect</span> <span>x</span><span><span>=</span><span>&#34;</span>10<span>&#34;</span></span> <span>y</span><span><span>=</span><span>&#34;</span>10<span>&#34;</span></span> <span>width</span><span><span>=</span><span>&#34;</span>100<span>&#34;</span></span> <span>height</span><span><span>=</span><span>&#34;</span>100<span>&#34;</span></span>
        <span>fill</span><span><span>=</span><span>&#34;</span>   #048c2c<span>&#34;</span></span> <span>/&gt;</span></span>
<span><span><span>&lt;/</span>svg</span><span>&gt;</span></span></code></pre></div></span></p></div></div>

<p>A gradient is a path through a color space between 2 or more dots. This means that if you change your color space, you’ll end up with a very different gradient for the same starting and ending colors.</p>
<figure><div><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#39;261&#39;%20width=&#39;842&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/c6a285357558ad9f86f206d7f92fbe5c/43693/color-space-gradients.webp 211w,/static/c6a285357558ad9f86f206d7f92fbe5c/629f6/color-space-gradients.webp 421w,/static/c6a285357558ad9f86f206d7f92fbe5c/5e5db/color-space-gradients.webp 842w,/static/c6a285357558ad9f86f206d7f92fbe5c/a0f16/color-space-gradients.webp 1684w" sizes="(min-width: 842px) 842px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 842px) 842px, 100vw" decoding="async" loading="lazy" data-src="/static/c6a285357558ad9f86f206d7f92fbe5c/5a09e/color-space-gradients.png" data-srcset="/static/c6a285357558ad9f86f206d7f92fbe5c/f0f96/color-space-gradients.png 211w,/static/c6a285357558ad9f86f206d7f92fbe5c/0d8e2/color-space-gradients.png 421w,/static/c6a285357558ad9f86f206d7f92fbe5c/5a09e/color-space-gradients.png 842w,/static/c6a285357558ad9f86f206d7f92fbe5c/eb273/color-space-gradients.png 1684w" alt="There are four squares. Each square shows the code for gradients with sRBG, Oklab, and OKLCH. The code in each block is the same, but for each color space, the gradient is slightly different."/></picture></div></div><figcaption><p>Gradients in different color spaces</p></figcaption></figure>
<p>For gradients, there is no silver bullet; different tasks will require a different color space. But the Oklab color space (OKLCH’s sister that lives on top of cartesian coordinates) often has good results:</p>

<ul>
<li>It has no grayish area in the middle as default (sRGB) gradients.</li>
<li>It has not blue-to-purple shift as Lab.</li>
</ul>
<p><a href="https://drafts.csswg.org/css-images-4/#linear-gradients" target="_blank" rel="noopener noreferrer">CSS Image 4 specification</a> has a special syntax to change the color space in gradients:</p>
<p><span><div data-language="css"><pre><code><span>.oklch</span> <span>{</span>
	<span>background</span><span>:</span> <span>linear-gradient</span><span>(</span>in oklab<span>,</span> blue<span>,</span> green<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p>
<p>Right now all browser supports native CSS color modification (relative colors) from <a href="https://www.w3.org/TR/css-color-5/#relative-colors" target="_blank" rel="noopener noreferrer">CSS Colors 5</a>.</p>
<p>OKLCH is incredibly good for color modification: unlike HSL, it has predicted lightness, and unlike LCH, it doesn’t have any problems with hue shifts upon chroma changes.</p>

<p>Here’s how you can define a 10% darker <span><code>:hover</code></span> background for a button:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.button</span> <span>{</span>
  <span>background</span><span>:</span>   <span>var</span><span>(</span>--accent<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--accent<span>)</span> <span>calc</span><span>(</span>l - 0.1<span>)</span> c h<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>With CSS Custom Properties, we can define the <span><code>:hover</code></span> logic just once and then create many variants simply by changing the source color.</p>
<div><div><p><span><div data-language="css"><pre><code><span>.button</span> <span>{</span>
  <span>background</span><span>:</span> <span>var</span><span>(</span>--button-color<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  
  <span>background</span><span>:</span> <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--button-color<span>)</span> <span>calc</span><span>(</span>l + 0.1<span>)</span> c h<span>)</span><span>;</span>
<span>}</span>

<span>.button</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--accent<span>)</span><span>;</span>
<span>}</span>
<span>.button.is-secondary</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--dimmed<span>)</span><span>;</span>
<span>}</span>
<span>.button.is-error</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--error<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<p>Thanks to OKLCH’s predictable lightness, we can work with colors from user input and have good a11y on our sites.</p>
<p><span><div data-language="css"><pre><code><span>.header</span> <span>{</span>
  
  <span>background</span><span>:</span> <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--user-avatar-dominant<span>)</span> 0.8 0.17 h<span>)</span><span>;</span>
  
  <span>color</span><span>:</span> black<span>;</span>
<span>}</span></code></pre></div></span></p>
<p>With <a href="https://colorjs.io/" target="_blank" rel="noopener noreferrer">Color.js</a> or <a href="https://culorijs.org/" target="_blank" rel="noopener noreferrer">culori</a>, you can transform colors in JS while reaping all the benefits of OKLCH color space. You can check examples with culori using the <a href="https://github.com/evilmartians/oklch-picker" target="_blank" rel="noopener noreferrer">OKLCH Color Picker source code</a>. In this article, I’ll use Color.js.</p>
<p>Here’s an example that shows off making an accent color from a custom color:</p>
<p><span><div data-language="js"><pre><code><span>import</span> Color <span>from</span> <span>&#39;colorjs.io&#39;</span>


<span>let</span> accent <span>=</span> <span>new</span> <span>Color</span><span>(</span>userAvatarDominant<span>)</span>


accent<span>.</span>oklch<span>.</span>l <span>=</span> <span>0.8</span>
accent<span>.</span>oklch<span>.</span>c <span>=</span> <span>0.17</span>


<span>if</span> <span>(</span><span>!</span>accent<span>.</span><span>inGamut</span><span>(</span><span>&#39;srgb&#39;</span><span>)</span><span>)</span> <span>{</span>
  accent <span>=</span> accent<span>.</span><span>toGamut</span><span>(</span><span>{</span> <span>space</span><span>:</span> <span>&#39;srgb&#39;</span> <span>}</span><span>)</span>
<span>}</span>


<span>let</span> hover <span>=</span> accent<span>.</span><span>clone</span><span>(</span><span>)</span>
hover<span>.</span>oklch<span>.</span>l <span>+=</span> <span>0.1</span>

document<span>.</span>body<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>&#39;--accent&#39;</span><span>,</span> accent<span>.</span><span>to</span><span>(</span><span>&#39;srgb&#39;</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span>
document<span>.</span>body<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>&#39;--accent-hover&#39;</span><span>,</span> hover<span>.</span><span>to</span><span>(</span><span>&#39;srgb&#39;</span><span>)</span><span>.</span><span>toString</span><span>(</span><span>)</span><span>)</span></code></pre></div></span></p><p>You can use these libraries to generate an entire design system palette in the OKLCH color space. This allows you to have predicted contrast and better accessibility. As an example of this in practice, <a href="https://huetone.ardov.me/" target="_blank" rel="noopener noreferrer">Huetone</a>, an accessible palette generator, uses Oklab by default.</p>
<h2 id="summing-why-we-moved-to-oklch">Summing why we moved to OKLCH</h2>
<p>At our company, we already use OKLCH in our projects—as a matter of fact, the website you’re on right now uses <span><code>oklch()</code></span>, too. So, here’s the question of the moment: what benefits have we gained after moving to OKLCH?</p>
<h3 id="1-better-readability">1. Better readability</h3>
<p>With OKLCH, we can understand colors just by looking at code.</p>
<p>For instance, we can compare darkness in the code and find some contrast-related accessibility issues:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.text</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.8 0.02 300<span>)</span><span>;</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>1 0 0<span>)</span><span>;</span>
<span>}</span>

<span>.error</span> <span>{</span>
  
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.9 0.04 30<span>)</span><span>;</span>
  <span>color</span><span>:</span>   <span>oklch</span><span>(</span>0.5 0.19 27<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<h3 id="2-simple-color-modifications">2. Simple color modifications</h3>
<p>We can apply simple color modifications right in the code and get predictable results:</p>
<div><div><p><span><div data-language="css"><pre><code><span>.button</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.5 0.2 260<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.6 0.2 260<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<h3 id="3-relative-colors">3. Relative Colors</h3>
<p>You can define design systems in CSS using relative colors. OKLCH is the best color space to do any automatic transformations for colors.</p>
<div><div><p><span><div data-language="css"><pre><code><span>.button</span> <span>{</span>
  <span>background</span><span>:</span> <span>var</span><span>(</span>--button-color<span>)</span><span>;</span>
<span>}</span>
<span>.button:hover</span> <span>{</span>
  
  <span>background</span><span>:</span> <span>oklch</span><span>(</span>from <span>var</span><span>(</span>--button-color<span>)</span> <span>calc</span><span>(</span>l + 0.1<span>)</span> c h<span>)</span><span>;</span>
<span>}</span>

<span>.button</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--accent<span>)</span><span>;</span>
<span>}</span>
<span>.button.is-secondary</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--dimmed<span>)</span><span>;</span>
<span>}</span>
<span>.button.is-error</span> <span>{</span>
  <span>--button-color</span><span>:</span>   <span>var</span><span>(</span>--error<span>)</span><span>;</span>
<span>}</span></code></pre></div></span></p></div></div>
<h3 id="4-p3-colors">4. P3 colors</h3>
<p>We can use the same color functions for both sRGB and P3 wide-gamut colors.</p>
<div><div><p><span><div data-language="css"><pre><code><span>.buy-button</span> <span>{</span>
  <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.62 0.19 145<span>)</span><span>;</span>
<span>}</span>
<span><span>@media</span> <span>(</span><span>color-gamut</span><span>:</span> p3<span>)</span></span> <span>{</span>
  <span>.buy-button</span> <span>{</span>
    <span>background</span><span>:</span>   <span>oklch</span><span>(</span>0.62 0.26 145<span>)</span><span>;</span>
  <span>}</span>
<span>}</span></code></pre></div></span></p></div></div>
<h3 id="5-better-communication-with-design-teams">5. Better communication with design teams</h3>
<p>Since OKLCH is much closer to real-life color, using <span><code>oklch()</code></span> in CSS will actually educate developers and lead the community to an overall better understanding of color itself.</p>
<p>Further, this move could have even larger ramifications: one small step towards improving communication between development and design teams.</p>
<p>Modern design tools (like <a href="https://huetone.ardov.me/" target="_blank" rel="noopener noreferrer">palette generators</a>) use Oklab for better accessability. Figma has the <a href="https://www.figma.com/community/plugin/1173638098109123591/OkColor" target="_blank" rel="noopener noreferrer">OkColor</a> plugin. Using the same <span><code>oklch()</code></span> in both designer tools and developer CSS will keep everyone on the same page.</p>
<details><summary>Changelog</summary><h3 id="2024-07-18">2024-07-18</h3><ul>
<li>Move from <span><code>%</code></span> in <span><code>L</code></span> to float because browsers don’t require <span><code>%</code></span> anymore but <span><code>calc()</code></span> don’t support <span><code>%</code></span> in relative colors.</li>
</ul><h3 id="2024-07-15">2024-07-15</h3><ul>
<li>Add note about <span><code>%</code></span> issue in relative colors.</li>
</ul><h3 id="2024-07-13">2024-07-13</h3><ul>
<li>Update guide to reflect that all browsers supports <span><code>oklch()</code></span> and relative colors.</li>
</ul><h3 id="2023-08-08">2023-08-08</h3><ul>
<li>Add Figma plugin for OKLCH.</li>
</ul><h3 id="2023-05-17">2023-05-17</h3><ul>
<li>Recommend <span><code>stylelint-gamut</code></span> to detect P3 without <span><code>@media</code></span> instead of polyfill tools.</li>
</ul><h3 id="2023-05-10">2023-05-10</h3><ul>
<li>Browser support was updated: stable Firefox got <span><code>oklch()</code></span> support with a flag, Chrome got Oklab/OKLCH support for gradients.</li>
</ul><h3 id="2023-03-08">2023-03-08</h3><ul>
<li>Browser support was updated: Chrome and Firefox Nightly got <span><code>oklch()</code></span> support.</li>
</ul><h3 id="2023-02-05">2023-02-05</h3><ul>
<li>“Contrast” was replaced with “lightness”. Developers should use <a href="https://www.myndex.com/APCA/" target="_blank" rel="noopener noreferrer">APCA</a> to detect contrast. Just OKLCH is not enough.</li>
</ul><h3 id="2023-01-25">2023-01-25</h3><ul>
<li>Added ROYGBIV mnemonic rule to remember OKLCH’s hue values.</li>
</ul></details></div></div>
  </body>
</html>
