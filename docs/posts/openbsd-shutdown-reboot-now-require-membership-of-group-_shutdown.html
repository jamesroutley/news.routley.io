<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.undeadly.org/cgi?action=article;sid=20230620064255">Original</a>
    <h1>OpenBSD: Shutdown/reboot now require membership of group _shutdown</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Contributed by
<a href="https://www.openbsdfoundation.org/donations.html">rueda</a>
on <time datetime="2023-06-20T04:48:33Z">2023-06-20</time>
from the cleanliness dept.</p>
<p>Theo de Raadt (<code>deraadt@</code>)
<a href="https://marc.info/?l=openbsd-cvs&amp;m=168717991404730&amp;w=2">committed</a>
changes which result in
the
<a href="https://man.openbsd.org/shutdown.8#shutdown">shutdown(8)</a>
and
<a href="https://man.openbsd.org/reboot.8#reboot">reboot(8)</a>
commands
(in -current)
requiring membership of the the (new) group
&#34;<code>_shutdown</code>&#34;.
The commit message explains the rationale:</p>

<blockquote>
<pre>CVSROOT:	/cvs
Module name:	src
Changes by:	deraadt@cvs.openbsd.org	2023/06/19 07:05:25

Modified files:
	etc            : group 
	sbin/shutdown  : Makefile shutdown.8 

Log message:
The group &#34;operator&#34; gatekeeps a few superuser abilities (dumping disks,
manipulating tape drives -&gt; means gid operator on device nodes).  This group
is also used with group-access bit on the setuid-root shutdown command
(<a href="https://man.openbsd.org/chmod.1">mode</a> ug+x,u+s).  Some people use this to shutdown/reboot their machines, but
use of that group is giving them disk read access also, which is wrong.
It would be a pain to re-gid all the device nodes, so instead let&#39;s renumber
the operator execution gid into group &#34;_shutdown&#34;.
Users using this shutdown/reboot functionality will notice it no longer works,
and move themselves to the correct group.
Various choices discussed at large, this seems our best choice.
</pre>
</blockquote>

<p>The <code>xfce</code> port has already
<a href="https://marc.info/?l=openbsd-ports-cvs&amp;m=168719822914949&amp;w=2">been</a>
<a href="https://marc.info/?l=openbsd-ports-cvs&amp;m=168719827414965&amp;w=2">modified</a>
to accommodate this.</p>
<p>It is entirely possible other ports need to be updated too, so please test your favorite (and maybe some not-so-favorite) software on the latest snapshot you can get your hands on!</p>

</div></div>
  </body>
</html>
