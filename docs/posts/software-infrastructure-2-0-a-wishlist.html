<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://erikbern.com/2021/04/19/software-infrastructure-2.0-a-wishlist.html">Original</a>
    <h1>Software Infrastructure 2.0: A Wishlist</h1>
    
    <div id="readability-page-1" class="page"><article>
  
  <time datetime="2021-04-19T00:00:00Z">2021-04-19</time>
  <p>Software infrastructure (by which I include everything ending with *aaS, or anything remotely similar to it) is an exciting field, in particular because (despite what the neo-luddites may say) it keeps getting better every year! I love working with something that moves so quickly.</p>
<p>In the last few months, I&#39;ve thought a lot about where it&#39;s going in the next 5-10 years and an wishlist has taken shape in my head. It&#39;s very opinionated! As in, you may not agree with these. That&#39;s fine — these are fundamentally <em>predictions</em> I&#39;m making, or at least a wishlist. I&#39;m OK if I&#39;m right about some but not all of these. Let&#39;s dive right in.</p>

<p>You know how crappy software is crappy in ways that are so blatantly obvious to the user that you wonder why it was released? A touchscreen interface that&#39;s super laggy, or an appointment booking app that forces you to go in and out of possible dates and fill in all information before it tells you if it&#39;s available. We&#39;ve all seen janky stuff like that, and they are generally janky in the same way: it feels like <em>no one actually used the product</em> after it was built, and said like, hey, this is kind of annoying, maybe we should make it more intuitive?</p>
<p>In 99% of the cases, I imagine they ended up in this situation because someone spelled out a long checklist of requirements, but there was nothing on the checklist to make sure <em>the experience is delightful</em>. Like, someone started with a wall full of post-it notes going “as a user, I want to …&#34;. Which I think logically makes sense — you can define a requirement that users should be able to do x, y, z, but you can&#39;t <em>define</em> that the experience shouldn&#39;t suck.</p>
<p>Anyway, I feel like this applies to like 90% of software infrastructure products.</p>
<p>I mean, as a user, I can set up a static website in AWS, but it takes 45 steps in the console and 12 of them are highly confusing if you never did it before. And it&#39;s also super slow to do it, and any time I make a mistake, I end up in some weird state where maybe I broke something terribly and I might have to start over. It&#39;s <em>sad</em> this is the current state of infrastructure.</p>
<p>There&#39;s a lot to learn from how the best companies build consumer products. How they use data to identify friction points, and constantly experiment with changes to make things easier. I have a lot of hope here that natural selection will favor the products that are easy to get started and fun to use. The first step is, we just need more alternatives and not just a handful of big semi-monopolies. Can&#39;t wait.</p>

<p>We are, like what, 10 years into the cloud adoption? Most companies (at least the ones I talk to) run their stuff in the cloud. So why is software still acting as if the cloud doesn&#39;t exist?</p>
<ul>
<li>The word <em>cluster</em> is an anachronism to an end-user in the cloud! I&#39;m already running things <em>in the cloud</em> where there&#39;s elastic resources available at any time. Why do I have to think about the underlying pool of resources? Just maintain it for me.</li>
<li>I don&#39;t ever want to <em>provision</em> anything in advance of load.</li>
<li>I don&#39;t want to pay for idle resources. Just let me pay for whatever resources I&#39;m actually using.</li>
<li>Serverless doesn&#39;t mean it&#39;s a burstable VM that saves its instance state to disk during periods of idle.</li>
</ul>
<p>I could go on, but I won&#39;t. I&#39;m dreaming of a world where things are <em>truly</em> serverless. As in, I don&#39;t want to think about future resource needs, I just want things to magically handle it. The good news is I think we&#39;re actually getting closer to this dream every year!</p>
<p>The beauty of this is that a lot of the configuration stuff goes away magically. The competitive advantage of most startups is to deliver business value through business logic, not capacity planning and capacity management!</p>
<p>Not just that, but multi-tenancy is actually truly a “free lunch” from a resource utilization point of view, so any opportunity to pool resources represents a true win-win bargain. At the scale data centers worldwide, it&#39;s big — it depends on who you are, but you could either get excited about the gigatons of CO<sub>2</sub> saved, or the increased corporate net income margin (I guess I like both!)</p>

<p>I don&#39;t mean fast as in, serving requests fast. We have software that does a great job doing this! Honestly, I think it&#39;s mind blowing how good it is: you can run functions at the edge and get response times around the world on the order of milliseconds.</p>
<p>The speed that&#39;s not there is setting up infrastructure. If I make a change in the AWS console, or if I add a new pod to Kubernetes, or whatever, I want that to happen in seconds. I&#39;m not asking for milliseconds! Just <em>please</em> at least get it to less than a second. If we can serve requests in milliseconds then I have no doubt that we can get it there. We have the tech to boot VMs and containers basically instantaneously.</p>
<p>The speed matters because this is a serious waste of time for engineers. I feel like I&#39;ve wasted years staring at some infrastructure change to kick in. I&#39;ll get back to this topic in a second because I think it&#39;s an important one!</p>

<p>Almost all infrastructure I&#39;ve worked with treats resources as something meant to exist indefinitely. If I create a database in the cloud, it sticks around, and unless I do anything, it will clutter up the console forever and I will pay money for it forever.</p>
<p>I used to think this was fine! My justification was that, well, if you want to run a test suite, just run the database yourself locally, maybe in a container. This is fine for some stuff, but I&#39;ve come to think that it&#39;s probably pretty bad:</p>
<ul>
<li>It&#39;s a <em>lot</em> of work to build your own replica of the infrastructure so you can run it locally.</li>
<li>The development-production delta gets bigger. There&#39;s always going to be subtle differences in how cloud infra works vs when you run it locally.</li>
<li>A lot of cloud infra is proprietary and impossible to run locally!</li>
</ul>
<p>My deep desire is to make it easy to create ephemeral resources. Do you need a database for your test suite? Create it <em>in the cloud</em> in a way so that it gets garbage collected once your test suite is done. Run your tests against the cloud infra!</p>
<p>My dumb take is I feel like the debate in the last 5 years roughly looks like this:</p>
<p><img src="https://erikbern.com/assets/test_in_production.png" alt="test in prodouction"/></p>
<p>(To be 100% clear, what I&#39;m advocating for <em>in this blog post</em> isn&#39;t necessarily pushing out changes in front of users immediately, although I generally support that for <em>other</em> reasons not covered in this blog post: go read <a href="https://charity.wtf">everything written by Charity Majors</a>. I&#39;m saying — let me use production-like infrastructure as much as possible throughout the process of building and testing code.)</p>
<p>The point about ephemeral resources gets 100x more powerful in conjunction with the previous point about letting me create resources quickly. The general pattern of how code gets built is that infrastructure has been decoupled from logic, and the logic is tested independently. Slightly simplified, you can think of the development process of a set of nested loops where the cycle time of each loop gets exponentially worse at each level:</p>
<p><img src="https://erikbern.com/assets/programming_loops.png" alt="programming loops"/></p>
<p>At each loop level, the stakes get higher and the feedback cycle gets slower. This has an extremely strong relationship to productivity! The key thing to note is how important it is to <strong>shift concerns from outer loops into inner loops.</strong> Getting iteration speeds down by an order of magnitude has dramatic impacts on getting things done.</p>
<p>Having fast ephemeral cloud infra resources would let us move a lot of the infrastructure concerns from the outermost loop to the innermost loop. This lets you get feedback in seconds or at least minutes, rather than hours or more.</p>

<p>There are at least 4 ways I can think of that you can interact with infrastructure:</p>
<ol>
<li>Web interface</li>
<li>Local configuration, then run some command-line client that talks to the system</li>
<li>APIs and you have to build the client yourself</li>
<li>Client libraries</li>
</ol>
<p>The first one is great to have but generally only for getting started. Once you have something set up, you typically move away from it as a way to make changes, and maybe only use it for monitoring etc.</p>
<p>Local configuration seems to be the general next step. Which is fine for a while, but half the time you realize that</p>
<ul>
<li>Actually, I want this framework to be controlled by another framework at a higher level. In this case, you have two (both bad) options: expose configuration for both frameworks, or have the outermost framework generate configuration dynamically for the other framework.</li>
<li>You need to generate resources dynamically, maybe in a for-loop or whatever.</li>
</ul>
<p>Now suddenly you move from YAML to YAML generated using Jinja or Handlebars or whatever. Slowly, you start adding custom functions to those template languages to make it easier to generate configuration. Eventually, it evolves into its own super-custom DSL with its own documentation.</p>
<p>This is super annoying! 10 times out of 10, I prefer to have everything accessible through a nice little client library. This library might in turn be a simple wrapper around a solid API. Now I can write my own for-loops! I can generate things dynamically! I don&#39;t have to learn a custom DSL! The world is a happy place again.</p>

<p>I wanted to wrap this up under sort of a meta-point which isn&#39;t really a point in itself but more of a mindset change and maybe a corollary of all the other points.</p>
<p>Infrastructure <em>feels like</em> it&#39;s been built to solve hard scalability and reliability problems. There&#39;s some amazing infra and I&#39;m in awe how much hard thinking must have gone into it. But things are rarely built to <em>optimize for developer productivity</em>. I think long term, the tools that “win” are generally the tools that optimize directly for that. Actually it&#39;s not just productivity, it&#39;s also quality, and these tools push the quality-productivity tradeoff “up and to the right”:</p>
<p><img src="https://erikbern.com/assets/programming_tradeoff_curve.png" alt="programming tradeoff curve"/></p>
<p>My point is, the new tradeoff curve lets you “cash out” the improvements in different ways: maybe purely as higher quality, maybe purely as higher productivity, maybe a bit of both.</p>
<p>To me, this represents a <em>massive</em> opportunity gap over the next 5-10 years. I can&#39;t wait for <a href="https://erikbern.com/2020/12/16/giving-more-tools-to-software-engineers-the-reorganization-of-the-factory">engineers to unleash another order of magnitude of productivity</a>. There&#39;s so much software waiting to get built!</p>
<p><img src="https://erikbern.com/assets/paradise.png" alt="paradise"/></p>


  
<strong>

    Tagged with: 
    <a href="https://erikbern.com/tags/software">software</a>, <a href="https://erikbern.com/tags/infrastructure">infrastructure</a>, <a href="https://erikbern.com/tags/economics">economics</a>, <a href="https://erikbern.com/tags/programming">programming</a>, <a href="https://erikbern.com/tags/popular">popular</a>
</strong>

</article></div>
  </body>
</html>
