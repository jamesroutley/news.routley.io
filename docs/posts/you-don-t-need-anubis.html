<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://fxgn.dev/blog/anubis/">Original</a>
    <h1>You Don&#39;t Need Anubis</h1>
    
    <div id="readability-page-1" class="page"><div data-astro-cid-qo5xhe7c=""><div data-astro-cid-qo5xhe7c=""><article><p>In the past years, scrapers operated by LLM training companies have become more relentless. They no longer respect <code>robots.txt</code>, spoof their User Agents and IP addresses and even DDoS small sites with aggessive requests.<label data-astro-cid-ic4jgs3n=""><small data-astro-cid-ic4jgs3n="">This seems to mostly apply to Anthropic’s ClaudeBot. OpenAI’s GPTBot is pretty <a href="https://platform.openai.com/docs/bots">well documented</a> and easy to block.</small></label></p><p>This has led to more and more websites using <a href="https://github.com/TecharoHQ/anubis">Anubis</a>, a proof-of-work based bot protection solution that requires all visitors to solve a small cryptographic problem on their device before proceeding.</p><p>But here’s the thing: <strong>Anubis doesn’t work.</strong> Well, alright, it does - it can be a good DDoS protection solution, especially for people who don’t want to use Cloudflare. But it seems like most users of Anubis <em>don’t need DDoS protection</em> - only protection agaist agressive LLM scrapers. And if that’s your only usecase, you probably <strong>don’t need Anubis</strong>.</p><p>People often claim that Anubis stops bots by making it too computationally expensive to access your website. Unfortunately, the price LLM companies would have to pay to scrape every single Anubis deployment out there is <a href="https://lock.cmpxchg8b.com/anubis.html">approximately $0.00</a>.</p><p>But it still works, right? People use Anubis because it actually stops LLM bots from scraping their site, so it must work, right?</p><p>Yeah, but only because the LLM bots simply <strong>don’t run JavaScript</strong>.</p><p>I recently selfhosted <a href="https://github.com/redlib-org/redlib">Redlib</a>, and despite not sharing my instance with anyone, it got rate-limited by Reddit due to all the scraper bots trying to get that sweet Reddit content. Here is my solution to the issue, a 12-line Caddyfile:</p><pre data-language="caddy" tabindex="0"><code><span><span>domain.com</span><span> {</span></span>
<span><span>    # Match all requests without a &#34;verified&#34; cookie&#34;</span></span>
<span><span>    @unverified</span><span> not header Cookie *verified*</span></span>
<span></span>
<span><span>    # Serve them a JS page that sets the cookie</span></span>
<span><span>    handle </span><span>@unverified</span><span> {</span></span>
<span><span>        header Content-Type text/html</span></span>
<span><span>        respond </span><span>&lt;&lt;EOF</span></span>
<span><span>            &lt;script&gt;</span></span>
<span><span>            document.cookie = &#39;verified=1; Path=/;&#39;;</span></span>
<span><span>            window.location.reload();</span></span>
<span><span>            &lt;/script&gt;</span></span>
<span><span>        EOF</span><span> 418</span></span>
<span><span>    }</span></span>
<span></span>
<span><span>    # Proxy all other requests normally</span></span>
<span><span>    reverse_proxy </span><span>localhost:3001</span></span>
<span><span>}</span></span></code></pre><p>Yes, it works, and does so as effectively as Anubis, while not bothering your visitors with a 10-second page load time.</p><p>Sure, the bots may start running JS code one day, and then this will no longer work. But this also applies to Anubis - even people who use it often say that it’s just “a temporary stopgap until the bots learn how to bypass it”.<label data-astro-cid-ic4jgs3n=""><small data-astro-cid-ic4jgs3n="">In fact, Huawei’s bots run JavaScript, and <a href="https://social.anoxinon.de/@Codeberg/115033782514845941">they have no problem solving Anubis challenges</a>.</small></label> So if you use a temporary solution anyway, why not use one that is practically invisible for your users?</p><p>Unfortunately, Cloudflare<label data-astro-cid-ic4jgs3n=""><small data-astro-cid-ic4jgs3n="">I don’t know if they have any good competition, but “Cloudflare” here refers to all similar bot protection services.</small></label> is pretty much the only reliable way to protect against bots. While the higher protection modes are still very annoying, especially to users on a VPN, there are some situations like actual DDoS attacks where you don’t have any other options. Even Anubis’ own README says:</p><blockquote><p>In most cases, you should not need this and can probably get by using Cloudflare to protect a given origin. However, for circumstances where you can’t or won’t use Cloudflare, Anubis is there for you.</p></blockquote><p>I get that many people are strongly against Cloudflare’s internet monopoly, and I don’t blame them for using solutions like Anubis to protect their sites against real attacks. I’m also obviously not trying to throw shade on the Anubis project or its developers. I think it has a use as a DDoS protection solution - it’s just extremely overused by people who don’t need it.</p><p>So if your only concern is ClaudeBot, which seems to be the case for most of the websites that use Anubis, please, go and replace your annoying stopgap solution with a non-annoying one.</p><hr/><p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a href="https://fxgn.dev/blog/anubis" rel="cc:attributionURL" property="dct:title">you don&#39;t need anubis</a> by <a href="https://fxgn.dev" rel="cc:attributionURL dct:creator" property="cc:attributionName">flexagoon</a> is marked with <span><a href="https://creativecommons.org/publicdomain/zero/1.0/?ref=chooser-v1" rel="license noopener noreferrer" target="_blank">CC0 1.0<img alt="Creative Commons Logo" src="https://fxgn.dev/images/cc.svg" decoding="async" height="17" loading="lazy" width="17"/><img alt="CC0 1.0 Badge" src="https://fxgn.dev/images/cc0.svg" decoding="async" height="17" loading="lazy" width="17"/></a></span></p></article></div></div></div>
  </body>
</html>
