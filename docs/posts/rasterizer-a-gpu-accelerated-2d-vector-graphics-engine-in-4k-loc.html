<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mindbrix/Rasterizer">Original</a>
    <h1>Rasterizer: A GPU-accelerated 2D vector graphics engine in ~4k LOC</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Inspired by my love of Adobe Flash, I started to work on a GPU-accelerated 2D vector graphics engine for the original iPhone, and then the Mac. Three iterations, and many years later, I have finally released <code>Rasterizer</code>. It is up to 60x faster than the CPU, making it ideal for vector animated UI (press the <code>T</code> key in the demo app to see an example).</p>
<p dir="auto">The 10-year gestation was the result of endlessly iterating over the core problem of efficiently turning vector paths into reference-quality anti-aliased pixels -- plus a touch of burnout after settling on the best solutions, some of which may extend the state of the art.</p>
<p dir="auto">The current implementation targets macOS using C++ 11 and Metal, but it will work on any GPU that supports instancing and floating point render targets.</p>
<p dir="auto">An iOS port is in the pipelline.</p>

<p dir="auto">The Xcode demo app project builds out of the box as all dependencies are included. For best performance, select the Run Rasterizer scheme.</p>

<p dir="auto">The demo app can open SVG and PDF files. Use to -/+ keys to select PDF pages. Other key mappings are shown on the HUD top left.</p>
<p dir="auto">Use the trackpad and/or mouse to drag and zoom/rotate the canvas around its center. Hold the <code>Shift</code> key to zoom/rotate around the pointer.</p>
<p dir="auto">A single font is used, settable via the fonts panel (<code>&lt;Cmd&gt;T</code>).</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/mindbrix/Rasterizer/blob/master/Screenshot.png"><img src="https://github.com/mindbrix/Rasterizer/raw/master/Screenshot.png" alt="image"/></a></p>

<p dir="auto"><code>Path</code> objects follow the Postscript model, with the same even-odd and non-zero fill rules. Stroking is also supported.</p>
<p dir="auto"><code>Scene</code> objects group <code>Path</code> objects together with their draw parameters: color, affine transform, stroke width (0 for a fill, +ve for user space, -ve for device space), flags (fill rule, end caps etc.) and an optional clip bounds.</p>
<p dir="auto">For rendering, <code>SceneList</code> objects group <code>Scene</code> objects together with their draw parameters: affine transform and an optional clip bounds.</p>
<p dir="auto">Filled paths are rasterized in 2 stages: first to a float mask buffer, then to the color buffer.</p>
<p dir="auto">Small screen space fills (e.g. glyphs) are optimal, as raw <code>Path</code> geometry can be <code>memcpy</code>ed into GPU memory.</p>
<p dir="auto">Larger fills use a fat scanlines algorithm on clipped, device-space <code>Path</code> geometry.</p>
<p dir="auto">Pixel area coverage is calculated using a novel windowed-inverse-lerp algorithm.</p>
<p dir="auto">Stroked paths are rasterized straight to the color buffer using GPU triangulation.</p>
<p dir="auto">Quadratic BÃ©zier curves are solved on the GPU, enabling coarse curve geometry.</p>
<p dir="auto">The CPU stages use simple batch parallelism for efficiency.</p>
<p dir="auto">The GPU holds no state. Frames are written afresh to double-buffered shared memory. In practice, <code>memcpy</code> is cheaper than managing GPU-resident <code>Path</code> objects in a parallel context.</p>

<p dir="auto">A huge thanks to the creators of the following libraries:</p>
<p dir="auto"><a href="https://xxhash.com" rel="nofollow">XXHash</a></p>
<p dir="auto"><a href="https://github.com/memononen/nanosvg">NanoSVG</a></p>
<p dir="auto"><a href="https://github.com/nothings/stb">STB Truetype</a></p>
<p dir="auto"><a href="https://pdfium.googlesource.com/pdfium/" rel="nofollow">PDFium</a></p>

<p dir="auto">This library is licensed under a <a href="https://github.com/mindbrix/Rasterizer/blob/master/LICENSE.txt">personal use zlib license</a></p>

<p dir="auto">You can show appreciation for my work <a href="https://paypal.me/mindbrix" rel="nofollow">here</a></p>
</article></div></div>
  </body>
</html>
