<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tech.ahrefs.com/how-ahrefs-saved-us-400m-in-3-years-by-not-going-to-the-cloud-8939dd930af8?gi=9f36e9e63dcb">Original</a>
    <h1>Ahrefs Saved US$400M in 3 Years by Not Going to the Cloud</h1>
    
    <div id="readability-page-1" class="page"><section><div><div><p id="7058">Clouds for IT infrastructure are so popular lately that moving into the cloud has become a trend. Infrastructure as a service (IaaS) cloud provides multiple advantages: flexibility, low time for deployment, easy scaling, instant presence in many regions of the world, and many others.</p><p id="2f26">Cloud service providers have become knowledgeable outsourcers of IT services, providing convenient and often easy-to-use services. With excellent marketing, conferences, certifications, and cherry-picked use case scenarios, it’s easy for one to think that clouds are the only reasonable destination for the IT of a modern business.</p><p id="e178">But the costs of these outsourced cloud benefits are sometimes high. They’re so high we were concerned about whether our business could exist if our infrastructure was 100% in the cloud. This inspired us to make an actual comparison based on facts. And here they are:</p><p id="47bb">Ahrefs has a rented colocation data center in Singapore with a rather homogenous infrastructure. So we decided to consolidate all the costs spent for this data center, divide them by the number of servers, and compare them to the cost of a similar installation in the Amazon Web Services (AWS) cloud (we use this as the leading IaaS example).</p><figure><div role="button" tabindex="0"><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b46_nh6MIV29SfWnkH3s_A.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*b46_nh6MIV29SfWnkH3s_A.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/1*b46_nh6MIV29SfWnkH3s_A.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/1*b46_nh6MIV29SfWnkH3s_A.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/1*b46_nh6MIV29SfWnkH3s_A.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/1*b46_nh6MIV29SfWnkH3s_A.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/1*b46_nh6MIV29SfWnkH3s_A.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/1*b46_nh6MIV29SfWnkH3s_A.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" width="700" height="1055" loading="lazy" role="presentation"/></picture></div></div><figcaption>Ahrefs servers</figcaption></figure><p id="367b">Our hardware is relatively new. The colocation contract started in the middle of 2020, during the peak of the COVID-19 lockdowns. All the installed equipment had been bought since then. Our servers in this data center have similar configurations. The only difference is in the CPUs of two generations with the same number of cores. We use high core-count CPUs, 2TB RAM, and 2x 100Gbps per server. On average, our servers have about 16x 15TB drives.</p><p id="0fe0">For the monthly cost calculation, we assumed that all the hardware will be used for only five years. We decided to consider anything beyond five years a “freebie.” Based on this, the monthly part of the initial equipment cost is its original price divided by 5*12 = 60 months.</p><p id="70f2">Our colocation payments consist of two major parts: rent and <em>de facto</em> consumed metered electricity. The electricity price has significantly increased since the beginning of 2022. But we calculated our monthly charges based on the latest, higher electricity charges, not on the average for the whole rental period, which would be lower. Therefore, this should give AWS an advantage.</p><p id="5fa3">Also, we pay for IP Transit and dark fiber between the data center and our point of presence.</p><p id="626c">The following table shows our monthly spending per server. Server hardware takes up two-thirds of the overall monthly expenditure, while the data center rent with electricity (DC), internet service providers (ISP) with IP Transit, dark fiber (DF), and internal network hardware (Network HW) make up the remaining one-third.</p><figure><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 1100w, https://miro.medium.com/v2/resize:fit:1136/format:webp/1*rcAPM3tL76cnBbq0fZ4amw.png 1136w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 568px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*rcAPM3tL76cnBbq0fZ4amw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*rcAPM3tL76cnBbq0fZ4amw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*rcAPM3tL76cnBbq0fZ4amw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*rcAPM3tL76cnBbq0fZ4amw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*rcAPM3tL76cnBbq0fZ4amw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*rcAPM3tL76cnBbq0fZ4amw.png 1100w, https://miro.medium.com/v2/resize:fit:1136/1*rcAPM3tL76cnBbq0fZ4amw.png 1136w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 568px"/><img alt="" width="568" height="162" loading="lazy" role="presentation"/></picture></div><figcaption>Our own on-premise hardware cost structure</figcaption></figure><p id="f590">Since our colocation in review is in Singapore, we used AWS prices for their Asia Pacific (Singapore) region for comparison.</p><p id="1c30">The cost structure for AWS is different from the colocation. Unfortunately, AWS doesn’t provide an EC2 instance with the number of cores we have. So we found an EC2 configuration with half the cores and 1TB RAM. We then compared one Ahrefs server cost to the cost of two such EC2 instances.</p><p id="eb12">Also, we considered long-term EC2 usage. Thus, we compared the lowest price of a three-year reserved EC2 instance to five years of on-premises servers.</p><p id="7c0a">Apart from EC2 instances, we added Elastic Block Storage (EBS). It is not an accurate replacement for directly attached storage, as we use big and fast NVMe drives in the servers. To make things simple, we chose cheaper <em>gp3</em> EBS (much slower than ours, though). Its cost consists of two parts: storage size and charges for IOPS.</p><p id="39c2">We keep two copies of a data chunk on our servers. But we only order usable space in EBS that takes care of the replication for us. So we should consider the price of the <em>gp3</em> storage size equal to the size of our drives divided by 2: (1*1TB + 16*15TB)/2 ≈ 120TB per server.</p><p id="bef0">We didn’t add the cost of higher IOPS. We also discarded various limitations EBS <em>gp3</em> has; for example, <em>gp3</em> Max Throughput/Instance is 10GB/s. At the same time, the performance of a single PCIe Gen 4 NVMe drive is 6–7GB/s, and we have 16 of those working in parallel. Thus, it’s not an apples-to-apples comparison. But this approach should significantly reduce the cost of storage in AWS, giving it a further advantage.</p><p id="38d5">Unlike in the colocation, AWS charges per GB downloaded, not for bandwidth. So we roughly estimated what our average download per server is and used the figure for the AWS network calculation.</p><p id="60d6">Bringing all three components together, we have the following cost distribution for AWS.</p><figure><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 1100w, https://miro.medium.com/v2/resize:fit:1200/format:webp/1*NfHz2NJmziXaeMawV7fH3Q.png 1200w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 600px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*NfHz2NJmziXaeMawV7fH3Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*NfHz2NJmziXaeMawV7fH3Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*NfHz2NJmziXaeMawV7fH3Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*NfHz2NJmziXaeMawV7fH3Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*NfHz2NJmziXaeMawV7fH3Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*NfHz2NJmziXaeMawV7fH3Q.png 1100w, https://miro.medium.com/v2/resize:fit:1200/1*NfHz2NJmziXaeMawV7fH3Q.png 1200w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 600px"/><img alt="" width="600" height="162" loading="lazy" role="presentation"/></picture></div><figcaption>AWS cost structure</figcaption></figure><p id="f754">Upon consolidating the above tables, we see that the imaginary AWS spending is much, much higher.</p><figure><div role="button" tabindex="0"><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EGfpRwrzQhPqcCpwcwALWA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*EGfpRwrzQhPqcCpwcwALWA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*EGfpRwrzQhPqcCpwcwALWA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*EGfpRwrzQhPqcCpwcwALWA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*EGfpRwrzQhPqcCpwcwALWA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*EGfpRwrzQhPqcCpwcwALWA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*EGfpRwrzQhPqcCpwcwALWA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*EGfpRwrzQhPqcCpwcwALWA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" width="700" height="132" loading="lazy" role="presentation"/></picture></div></div><figcaption>Own hardware vs. AWS EC2 monthly spending</figcaption></figure><p id="5269">A replacement EC2 instance with similar usable SSD space in AWS would cost us roughly the same amount of money for 11.3 servers in a colocation data center. Accordingly, that means our 20-server rack would transform into just ~2 servers.</p><figure><div role="button" tabindex="0"><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 640w, https://miro.medium.com/v2/resize:fit:720/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 720w, https://miro.medium.com/v2/resize:fit:750/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 750w, https://miro.medium.com/v2/resize:fit:786/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 786w, https://miro.medium.com/v2/resize:fit:828/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 828w, https://miro.medium.com/v2/resize:fit:1100/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 1100w, https://miro.medium.com/v2/resize:fit:1400/1*kOnp_uj5VcAxbnSaznj7uQ.jpeg 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" width="700" height="1055" loading="lazy" role="presentation"/></picture></div></div><figcaption>Cost of 20 Ahrefs servers compared to cost of 2 servers in AWS</figcaption></figure><p id="6924">So let’s say we run our 850 servers during the actual 2½ years of our data center usage. Once we compute the numbers, we can see a dramatic difference.</p><figure><div role="button" tabindex="0"><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3Dk20-Zjoq9K2nlN5Oitmw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*3Dk20-Zjoq9K2nlN5Oitmw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*3Dk20-Zjoq9K2nlN5Oitmw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*3Dk20-Zjoq9K2nlN5Oitmw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*3Dk20-Zjoq9K2nlN5Oitmw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*3Dk20-Zjoq9K2nlN5Oitmw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*3Dk20-Zjoq9K2nlN5Oitmw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*3Dk20-Zjoq9K2nlN5Oitmw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" width="700" height="106" loading="lazy" role="presentation"/></picture></div></div><figcaption>AWS vs. On-Prem costs for 850 servers within 30 months</figcaption></figure><p id="f123">We would need to pay AWS a whopping <strong>~USD</strong> <strong>400 million </strong>more to keep our infrastructure running in Singapore since 2020.</p><p id="8bf3">One may think, “Perhaps Ahrefs can afford this?”</p><p id="b6e6">It’s true that Ahrefs is a profitable and sustainable company, so let’s take a look at its revenue and use it in our calculations. That being said, we are a private company and aren’t obliged to publish our financial data. But one can find some information about Ahrefs’ revenue in The Straits Times articles on Singapore’s fastest-growing companies in <a href="https://www.straitstimes.com/fastest-growing-companies-2022" rel="noopener ugc nofollow" target="_blank">2022</a> and <a href="https://www.straitstimes.com/fastest-growing-companies-2023" rel="noopener ugc nofollow" target="_blank">2023</a>. These articles provide Ahrefs’ revenue figures for the years 2020 and 2021.</p><p id="d5c1">We can linearly extrapolate revenue for 2022 too. It is a rough estimate. But it is enough for us to draw some conclusions.</p><figure><div role="button" tabindex="0"><div><picture><source srcset="https://miro.medium.com/v2/resize:fit:640/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6cfTq45mOr1oEJtzWP4fXQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcset="https://miro.medium.com/v2/resize:fit:640/1*6cfTq45mOr1oEJtzWP4fXQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*6cfTq45mOr1oEJtzWP4fXQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*6cfTq45mOr1oEJtzWP4fXQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*6cfTq45mOr1oEJtzWP4fXQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*6cfTq45mOr1oEJtzWP4fXQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*6cfTq45mOr1oEJtzWP4fXQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*6cfTq45mOr1oEJtzWP4fXQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" width="700" height="149" loading="lazy" role="presentation"/></picture></div></div><figcaption>Ahrefs’ 2020–2022 revenue estimations</figcaption></figure><p id="4565">From the table above, we can see that Ahrefs’ total revenue for the last three years was ~USD 257 million. But we also calculated that the AWS costs would be ~USD 448 million for such a data center replacement. Thus, the company revenue wouldn’t even be close to covering the 2½-year AWS usage costs.</p><p id="7c2e">What a stunning result!</p><p id="1bda">But where would all our profit go?</p><p id="072d">As per <a href="https://www.documentcloud.org/documents/69746-hart-smith-on-outsourcing.html" rel="noopener ugc nofollow" target="_blank">this 20-year-old report by Dr. LJ Hart-Smith for Boeing</a>: “If the prime manufacturer, or systems integrator, cannot make his fortune by giving all his work away, who does benefit? The subcontractors, of course.”</p><p id="1b8b">It is good to remember that we already provided several advantages to AWS by using higher-than-average electricity costs for our colocation data center, calculating only the storage part of EBS, and ignoring how slow the EBS storage is. Also, this data center is not the only cost center for us. We spend money on other data centers, servers, services, people, offices, marketing activities, etc.</p><p id="7269">Therefore, Ahrefs would hardly survive if a cloud was our primary infrastructure destination.</p><h2 id="8ba0">Other considerations</h2><p id="4147">This article doesn’t take into account other aspects that would make the comparison even more complicated. These include people skills, financial controls, cash flow, capacity planning depending on the load type, etc.</p><p id="4423">Ahrefs has saved <strong>~USD</strong> <strong>400 million</strong> by ensuring its infrastructure is NOT 100% in the IaaS cloud during the last 2½ years. This figure is growing bigger, as currently we are starting another massive colocation data center with new hardware.</p><p id="3f87">While Ahrefs uses AWS benefits for hosting our frontend in different parts of the world, the vast majority of Ahrefs’ infrastructure iceberg hides in the colocation with owned hardware. <strong>Ahrefs wouldn’t be profitable, or even exist, if our products were 100% on AWS.</strong></p><p id="6344">If we used a cloud-only approach, our infrastructure costs would be 10+ times higher. But because we don’t do that, we can spend the money we saved on actual product improvements and developments. Consequently, having faster and better results means that our servers are much faster than what a cloud can provide (given its limitations). Our reports are also generated faster and are more comprehensive, as the time needed per report is shorter.</p><p id="480b">On that note, I recommend CFOs, CEOs, and business owners interested in sustainable growth to consider and periodically re-evaluate cloud benefits vs. actual costs. While clouds are the natural go-to choice for an early-stage startup, staying 100% in clouds with substantial infrastructure may sink a company as it and its infrastructure grow.</p><p id="3277">And here comes the dilemma.</p><p id="37b1">It is complicated to leave a cloud once you are there. A cloud is convenient and locked in. Also, abandoning a cloud infrastructure due to higher costs may not be what the engineering team wants. They may rightly view a cloud as a much easier and more flexible environment compared to old-fashioned brick-and-mortar data centers with physical servers. </p><p id="892a">Big companies, FAANG in particular, vacuumed the job market for many years. They had been hiring engineers to run their enormous data centers and infrastructure, leaving only a few for smaller companies. But with the mass layoffs in Big Tech in recent months, this may be an opportunity to re-evaluate the approach to the cloud, consider a reverse migration from the cloud, and hire seasoned professionals of the data center world.</p><p id="82b3">And if you start a new company, consider buying a rack and server and putting them in your basement. That might improve your sustainability from day one.</p></div></div></section></div>
  </body>
</html>
