<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://docs.tscircuit.com/tutorials/building-led-matrix">Original</a>
    <h1>I designed my LED matrix PCB with code</h1>
    
    <div id="readability-page-1" class="page"><div><header></header><h2 id="overview">Overview<a href="#overview" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>This tutorial will walk you through building a 3x5 LED matrix controlled by a Raspberry Pi Pico using tscircuit.</p>
<!-- -->

<h2 id="objectives-of-building-an-led-matrix">Objectives of Building an LED Matrix<a href="#objectives-of-building-an-led-matrix" aria-label="Direct link to Objectives of Building an LED Matrix" title="Direct link to Objectives of Building an LED Matrix">​</a></h2>
<p>Some practical applications of building an LED Matrix include:</p>
<ul>
<li><strong>Signage</strong> - Building signs for events, products, etc.</li>
<li><strong>Data Visualization Tool</strong> - Displaying real-time data metrics like GitHub contributions, website traffic, or temperature readings through color intensity</li>
<li><strong>Interactive Notification System</strong> - Creating a physical notification system for emails, social media, or calendar events with customizable brightness levels</li>
</ul>
<h2 id="led-matrix-requirements">LED Matrix Requirements<a href="#led-matrix-requirements" aria-label="Direct link to LED Matrix Requirements" title="Direct link to LED Matrix Requirements">​</a></h2>
<ul>
<li>The LED matrix must be WiFi-controllable</li>
<li>The matrix layout pattern must be grid-based</li>
<li>Each LED should be individually controllable for brightness and color</li>
</ul>
<h2 id="system-diagram">System Diagram<a href="#system-diagram" aria-label="Direct link to System Diagram" title="Direct link to System Diagram">​</a></h2>
<p>The matrix connects to the Pico microcontroller via a data chain. The Pico connects to WiFi through the <code>PICO_W</code> module.
The components and connections between them are shown in the diagram below:</p>
<p><img decoding="async" loading="lazy" alt="System Diagram" src="https://docs.tscircuit.com/assets/images/matrix-system-requirements-db266ef7e2f69520f89dec615e6f370c.png" width="2147" height="1460"/></p>
<h2 id="schematic-capture">Schematic Capture<a href="#schematic-capture" aria-label="Direct link to Schematic Capture" title="Direct link to Schematic Capture">​</a></h2>
<p>Let&#39;s import the Pico microcontroller and LED components by following the steps in the <a href="https://docs.tscircuit.com/guides/importing-modules-and-chips/importing-from-jlcpcb">Importing from JLCPCB</a> section.</p>
<p>We will follow the following steps to build the circuit step by step:</p>
<ol>
<li>Import the Pico microcontroller Schematic</li>
<li>Import the LED Schematic</li>
<li>Chain two LEDs together</li>
<li>Chain many LEDs together</li>
<li>Connect the Pico to the LED matrix</li>
</ol>
<h3 id="pico-schematic">Pico Schematic<a href="#pico-schematic" aria-label="Direct link to Pico Schematic" title="Direct link to Pico Schematic">​</a></h3>
<p>Schematic of the Pico microcontroller <a href="https://docs.tscircuit.com/guides/importing-modules-and-chips/importing-from-jlcpcb">imported from JLCPCB</a> is shown below:</p>

<h3 id="led-schematic">LED Schematic<a href="#led-schematic" aria-label="Direct link to LED Schematic" title="Direct link to LED Schematic">​</a></h3>
<p>We are using IC LEDs (specifically <a href="https://jlcpcb.com/partdetail/Worldsemi-WS2812B2020/C965555" target="_blank" rel="noopener noreferrer">WS2812B</a>), which have an RGB LED and control chip integrated into the same package. These IC LEDs offer several advantages over traditional RGB LEDs:</p>
<ul>
<li><strong>Simplified Wiring</strong> - Only 4 pins needed (VDD, GND, Data In, Data Out) compared to 4+ pins for traditional RGB LEDs</li>
<li><strong>Serial Communication</strong> - LEDs can be daisy-chained together, requiring only one data pin from the microcontroller</li>
<li><strong>Individual Control</strong> - Each LED in the chain can be controlled independently for color and brightness</li>
</ul>

<h3 id="chaining-two-leds-together">Chaining Two LEDs together<a href="#chaining-two-leds-together" aria-label="Direct link to Chaining Two LEDs together" title="Direct link to Chaining Two LEDs together">​</a></h3>
<p>To connect two LEDs together, we need to connect the data output <code>DO</code> of the first LED to the data input <code>DI</code> of the second LED. This creates a chain of LEDs.</p>

<h3 id="connecting-pico-to-the-led-matrix">Connecting Pico to the LED Matrix<a href="#connecting-pico-to-the-led-matrix" aria-label="Direct link to Connecting Pico to the LED Matrix" title="Direct link to Connecting Pico to the LED Matrix">​</a></h3>
<p>The Pico is connected to the LED matrix via a general purpose input/output (GPIO) pin in this example we are using <code>GP6</code>,
and the other pins of the Pico are connected to ground.</p>

<h3 id="chaining-many-leds-together">Chaining many LEDs together<a href="#chaining-many-leds-together" aria-label="Direct link to Chaining many LEDs together" title="Direct link to Chaining many LEDs together">​</a></h3>
<h4 id="led-matrix-layout">LED Matrix Layout<a href="#led-matrix-layout" aria-label="Direct link to LED Matrix Layout" title="Direct link to LED Matrix Layout">​</a></h4>
<p>We can connect multiple LEDs together by chaining them, but doing this for a large number of LEDs would be tedious.
Luckily, tscircuit has a <a href="https://github.com/tscircuit/math-utils" target="_blank" rel="noopener noreferrer">helper function to create a grid</a> of components. We will be using that helper function to create our matrix layout.</p>
<p>Here we are using the <a href="https://github.com/tscircuit/math-utils/blob/main/src/grid.ts" target="_blank" rel="noopener noreferrer"><code>grid</code></a> function to create a 3x5 LED matrix. The <code>grid</code> function takes in the number of columns and rows, and the spacing between the components.</p>

<h3 id="connecting-the-pico-to-the-led-matrix">Connecting the Pico to the LED matrix<a href="#connecting-the-pico-to-the-led-matrix" aria-label="Direct link to Connecting the Pico to the LED matrix" title="Direct link to Connecting the Pico to the LED matrix">​</a></h3>
<p>Here we are merging all the learnings from the previous examples to create a complete circuit. The Pico is connected to the LED matrix via the <code>GP6</code> pin, and the other pins of the Pico are connected to ground.
The <code>GP6</code> pin is connected to the data input <code>DI</code> of the first LED, and the data output <code>DO</code> of each LED is connected to the data input <code>DI</code> of the next LED in the chain.
While connecting the LEDs together, we are also connecting the <code>GND</code> and <code>VDD</code> pins of the LEDs to ground and 5V supply respectively.</p>
<p>Complete circuit is shown below:</p>

<h2 id="pcb-layout">PCB Layout<a href="#pcb-layout" aria-label="Direct link to PCB Layout" title="Direct link to PCB Layout">​</a></h2>
<p>We can translate our schematic into a PCB layout by specifying the physical positions of components on the board.</p>
<p>Here we are adding the positions of the components on the PCB:</p>
<ul>
<li>Pico microcontroller is added at <code>pcbX={-15} pcbY={0}</code> with a rotation of <code>90deg</code> (Rotation is needed for the Pico to be in the correct orientation)</li>
<li>LEDs are added at positions calculated by the grid function with a spacing of <code>8mm</code> horizontally and <code>5mm</code> vertically</li>
</ul>

<p>Check out this circuit in our <a href="https://tscircuit.com/editor?snippet_id=e30ad928-3432-49a4-826c-f50cae1490ef" target="_blank" rel="noopener noreferrer">Playground</a>.</p>
<h2 id="ordering-the-pcb">Ordering the PCB<a href="#ordering-the-pcb" aria-label="Direct link to Ordering the PCB" title="Direct link to Ordering the PCB">​</a></h2>
<p>You can order this PCB by downloading the fabrication files and uploading them to JLCPCB. Follow the instructions from <a href="https://docs.tscircuit.com/building-electronics/ordering-prototypes">here</a>.</p>
<h2 id="controlling-the-led-matrix">Controlling the LED Matrix<a href="#controlling-the-led-matrix" aria-label="Direct link to Controlling the LED Matrix" title="Direct link to Controlling the LED Matrix">​</a></h2>
<p>The LED matrix can be controlled through a simple web interface that provides a visual grid for controlling individual LEDs. The control system includes:</p>

<ol>
<li>
<p><strong>Web Interface</strong>: A 3x5 grid interface where clicking each cell cycles through:</p>
<ul>
<li>Off (Gray)</li>
<li>Red</li>
<li>Green</li>
<li>Blue</li>
</ul>
</li>
<li>
<p><strong>API Integration</strong>: The matrix state can be controlled and monitored through REST endpoints, making it easy to integrate with other applications.</p>
</li>
<li>
<p><strong>Pico W Connection</strong>: The matrix connects to WiFi using the Pico W&#39;s wireless capabilities, allowing for remote control through the web interface.</p>
</li>
</ol>
<p>The complete implementation, including the web interface and Pico W code, is available in our <a href="https://github.com/tscircuit/led-matrix-server" target="_blank" rel="noopener noreferrer">LED Matrix Server repository</a>.</p></div></div>
  </body>
</html>
