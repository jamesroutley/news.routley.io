<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.unterminated.com/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop">Original</a>
    <h1>How to copy a file from a 30-year-old laptop</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>How do you transfer files off an Apple laptop from 1994? It&#39;s harder than it sounds!</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-165126_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-165126_size.jpg" alt="" title="Close-up of PowerBook Duo 280c laptop" width="1024" height="680"/></a></p>

<h3>Between a dock and a hard place</h3>

<p>A family member presented me with an interesting problem: a PowerBook Duo 280c laptop from 1994 containing a few short audio recordings he wanted to preserve. A quick analysis of the problem at hand revealed a couple things working in our favor:</p>

<ul>
<li>The laptop still boots... after a few gentle taps on the hard drive to get it to spin up!</li>
<li>The audio files play back locally through the laptop&#39;s internal speakers.</li>
</ul>

<p>On the other hand:</p>

<ul>
<li>The laptop has no audio jacks, so we couldn&#39;t get good analog copies of the recordings even if we wanted to.</li>
<li>The internal hard drive uses SCSI with an unusual connector. Adapting it didn&#39;t seem straightforward, and we weren&#39;t confident the old file system (HFS) would be easy to read from a modern system.</li>
<li>An external floppy drive accompanied the laptop... but the computer would not run with it connected. We couldn&#39;t figure out the hardware fault causing this.</li>
<li>The laptop has an AppleTalk port and a phone jack... but no networking software installed.</li>
</ul>

<p>Remember, it comes from a time before the Internet was mainstream. HTTP, the protocol underpinning the modern Internet, wasn&#39;t finalized until 1996. Software for connecting to a dial-up provider would have been available at the time, but was never installed. However, the laptop does have a phone dialer application, which gave us our first clue towards a potential solution.</p>

<h3>Deus fax machina</h3>

<p>While the laptop has no networking software, it does have <em>fax</em> software. We confirmed the modem could dial, so this might just be crazy enough to work.</p>

<p>The first question was how to turn the audio file into something faxable. The laptop contains a collection of games. Alongside them is a resource editor, called ResEdit, which had previously been used to inspect and modify the aforementioned games. Let&#39;s see what it can do.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151605_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151605_size.jpg" alt="" title="The games folder contained a collection of games in addition to a resource editor" width="1024" height="680"/></a></p>

<p>ResEdit has probably the most adorable splash screen ever.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/ResEdit_animated.gif" title="ResEdit splash screen" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/ResEdit_animated.gif" alt="" title="ResEdit splash screen" width="1024" height="680"/></a></p>

<p>Luckily, it includes a hex editor which allows you to view the raw contents of files in hexadecimal form. This is exactly what we need! Although, since ResEdit doesn&#39;t support printing, we&#39;ll have to copy the text into a different application that does.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151716_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151716_size.jpg" alt="" title="The contents of the sound file are selected in the hex editor" width="1024" height="680"/></a></p>

<p>This particular sound file is 37,928 bytes long. The hexadecimal representation is double that, since each byte is represented by two characters (0-F).</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151722_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-151722_size.jpg" alt="" title="An error message says, &#34;Can&#39;t cut or copy more than 32000 characters at one time.&#34;" width="1024" height="680"/></a></p>

<p>Huh. I guess we&#39;ll have to do it piecemeal. (And yes, that message literally means 32000, not 32767. Some programmer must have really liked base-10 numbers and signed shorts.) We&#39;ll use batches of 12288 (0x3000 in hex) to make the offsets easier to remember.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152059_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152059_size.jpg" alt="" title="Less of the document is selected in the hex editor, to stay within the 32,000 character limit" width="1024" height="680"/></a></p>

<p>Now that we have a chunk of the document in the clipboard, what do we do with it? Thankfully, Microsoft Office is also installed on this laptop, and it supports printing!</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152119_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152119_size.jpg" alt="" title="Microsoft Word 5.1a in the applications folder" width="1024" height="680"/></a></p>

<p>Pasting the contents of the clipboard into a Word document inserts the hexadecimal representation verbatim.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152256_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152256_size.jpg" alt="" title="Blocks of hexidecimal text are copied into Microsoft Word" width="1024" height="680"/></a></p>

<p>These sound files are all under 100KB, so copying them into Word doesn&#39;t take long. I&#39;d estimate the transfer speed of manually copying the contents from ResEdit into Word via the clipboard averages about 316 bytes/second.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152449_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-152449_size.jpg" alt="" title="The remainder of the sound file&#39;s hexidecimal representation is copied into Word" width="1024" height="680"/></a></p>

<p>With the whole file copied into a text document, we can leverage the previously-discovered fax software from the print dialog. But, who do we send the fax to?</p>

<h3>Fax is the new file copy</h3>

<p>My college laptop, a ThinkPad T60, is the only computer I still own with an internal dial-up modem. It&#39;s running Windows XP, which includes a fax application that can listen to the modem for incoming faxes and store them as multi-page TIF images.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-165154_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-165154_size.jpg" alt="" title="ThinkPad T60 with phone cable plugged in" width="1024" height="680"/></a></p>

<p>There&#39;s a problem though. Simply plugging the two laptops together with a phone cable doesn&#39;t work. The PowerBook dials, but the ThinkPad doesn&#39;t answer. There is an &#34;Ignore Dial Tone&#34; option, but it makes no difference.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153033_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153033_size.jpg" alt="" title="Dialing options for the fax, showing the &#34;Ignore Dial Tone&#34; option checked" width="1024" height="680"/></a></p>

<p>It turns out the voltage provided by an actual landline is important for the modem to function properly. Fortunately, a simple <a href="https://www.segasaturnshiro.com/guide-build-a-line-voltage-inducer/">phone line simulator circuit</a> can overcome this problem, and is very easy to build with some common electronic components and a 9V battery.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-164725_crop_size_original.jpg" title="" width="1024" height="682"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-164725_crop_size.jpg" alt="" title="Primitive phone line circuit simulator, assembled with a resistor, capacitor, and a 9V battery" width="1024" height="682"/></a></p>

<p>It&#39;s crude, but effective! (Side note: WAGO lever nuts are super handy for all sorts of electrical projects.) This schematic shows the circuit diagram of the mess of wires above.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/PhoneLineSimulatorCircuit_large_edit.png" title="Example phone line simulator circuit diagram" width="512" height="384"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/PhoneLineSimulatorCircuit_large_edit.png" alt="" title="Example phone line simulator circuit diagram" width="512" height="384"/></a></p>

<p>With the two laptops now connected via a simulated phone line, we attempt to fax the document again.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153219_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153219_size.jpg" alt="" title="An error message says I am not in compliance with FCC regulation 68.318.C3 because I did not include a cover page. Oops." width="1024" height="680"/></a></p>

<p>Oops. The FCC says I need a cover page. Let&#39;s try to appease them.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/CoverPage_edit_original.png" title="" width="864" height="375"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/CoverPage_edit.png" alt="" title="Example cover page generated by the fax software" width="864" height="375"/></a></p>

<p>There we go.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153232_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153232_size.jpg" alt="" title="Successfully started printing the fax" width="1024" height="680"/></a></p>

<p>It&#39;s working! It takes a while for it to rasterize the fax pages. After that&#39;s done, it estimates the fax will take 24 minutes to send.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153307_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153307_size.jpg" alt="" title="Rasterization completed, it will take 24 minutes to fax all 20 pages" width="1024" height="680"/></a></p>

<p>That&#39;s kind of long. What if we reduce the font size?</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153856_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-153856_size.jpg" alt="" title="With the font size reduced, it will take 7 minutes to fax 6 pages" width="1024" height="680"/></a></p>

<p>Down to 6 pages in 7 minutes. Much better. It chugs along at 14400bps until the fax is fully received by the ThinkPad.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/WindowsFaxComplete.png" title="Successfully received the fax on the Windows PC" width="314" height="394"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/WindowsFaxComplete.png" alt="" title="Successfully received the fax on the Windows PC" width="314" height="394"/></a></p>

<p>It worked! Now the last step is figuring out how to turn this image back into a binary file.</p>

<h3>The file transfer to end all file transfers</h3>

<p>My first idea is to convert the TIF to a PDF and use optical character recognition (OCR) to translate it back to text. These images seem like the ideal candidate for an OCR algorithm:</p>

<ul>
<li>The text is computer-generated, so it&#39;s perfectly aligned and consistent.</li>
<li>Only 16 different characters are used (0-9, A-F).</li>
<li>It uses Courier, an extremely common fixed-width font.</li>
</ul>

<p>After running the PDF run through an OCR process, the text is now selectable. I can copy it into a hex editor and save it as a binary file.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/HexImage_OCR.png" title="PDF contains selectable text after performing OCR" width="500" height="114"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/HexImage_OCR.png" alt="" title="PDF contains selectable text after performing OCR" width="500" height="114"/></a></p>

<p>The resulting file&#39;s size is close to, but not exactly, what I expected. Nonetheless, I import it into Audacity which is able to deduce the audio format: unsigned 8-bit PCM, little-endian, 22050 Hz, mono. A waveform appears!</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_Overview.png" title="A waveform of the audio as seen in Audacity" width="500" height="125"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_Overview.png" alt="" title="A waveform of the audio as seen in Audacity" width="500" height="125"/></a></p>

<p>I play it back, and it sounds pretty good! Especially considering it was recorded from the internal microphone of a laptop from 1994. There&#39;s an audible problem though, and it&#39;s actually visible on the waveform itself. Zooming in reveals it more clearly.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_Closeup.png" title="Closeup of the waveform from the OCR&#39;d data contains sporadic errors" width="500" height="125"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_Closeup.png" alt="" title="Closeup of the waveform from the OCR&#39;d data contains sporadic errors" width="500" height="125"/></a></p>

<p>All of those abrupt dips are the result of OCR transcription errors. They manifest as crackling or popping noises throughout the recording. I need a better way to convert this text to a file.</p>

<p>I try a bunch of different OCR programs, but can&#39;t find any that can transcribe the document with 100% accuracy. They often confuse certain letters or numbers (like 0 and C, 9 and 4, 0 and D). Sometimes they omit characters, sometimes they introduce new ones. I try different font sizes and different fonts, but it doesn&#39;t matter.</p>

<p>I need to process these files with perfect accuracy, and OCR software is not going to cut it. With no sign of improvement a couple dozen faxes later, I decide to write my own.</p>

<h3>The fax, the whole fax, and nothing but the fax</h3>

<p>Knowing that the text in these images is tightly structured, I can make a lot of assumptions when processing them. They were generated with a fixed-width font, which means the whole document is essentially an evenly-spaced grid of characters. Once I figure out the correct starting point, character offsets, and line spacing, I can capture and analyze each character individually.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/FaxToBinary1_original.png" title="" width="761" height="647"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/FaxToBinary1.png" alt="" title="Screenshot of the fax image to binary converter program I wrote, showing a document being processed" width="761" height="647"/></a></p>

<p>I can use the preview on the left to quickly confirm whether the size and offset parameters are correct. Once they are, there will be no drift in the preview when moving between characters or lines. Processing can commence.</p>

<p>The actual character recognition takes a quick-and-dirty approach. For each unique pattern encountered, the program simply asks you to specify what it is, and subsequently remembers the answer for the next time it finds an identical-looking character.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/FaxToBinary2.png" title="The fax to binary program asks the user to identify each character the first time it&#39;s encountered" width="400" height="200"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/FaxToBinary2.png" alt="" title="The fax to binary program asks the user to identify each character the first time it&#39;s encountered" width="400" height="200"/></a></p>

<p>(If for some strange reason anyone might find this program valuable, the source is available to download <a href="https://www.unterminated.com/files/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/FaxToBinary.zip">here</a>.)</p>

<p>After a bit of manual training, it outputs the file. Success! The audio plays back smoothly without any popping. It&#39;s a perfect byte-for-byte copy of the original file!</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_before_after.gif" title="Comparison of the waveform with and without transcription errors" width="500" height="125"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/Waveform_before_after.gif" alt="" title="Comparison of the waveform with and without transcription errors" width="500" height="125"/></a></p>

<p>With the most complicated file copy in history finally complete, there&#39;s only one thing left to do.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-161802_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-161802_size.jpg" alt="" title="id Software logo" width="1024" height="680"/></a></p>

<p>Nostalgia achievement unlocked.</p>

<p><a href="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-161809_size_original.jpg" title="" width="1024" height="680"><img src="https://www.unterminated.com/images/random-fun/how-to-copy-a-file-from-a-30-year-old-laptop/DSC_230304-161809_size.jpg" alt="" title="DOOM loading screen" width="1024" height="680"/></a></p>

<p>(Of course it runs DOOM.)</p>
</div></div>
  </body>
</html>
