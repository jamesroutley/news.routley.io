<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://simonwillison.net/2024/Dec/24/qvq/">Original</a>
    <h1>Trying out QvQ – Qwen&#39;s new visual reasoning model</h1>
    
    <div id="readability-page-1" class="page"><div>


<div data-permalink-context="/2024/Dec/24/qvq/">

<p>24th December 2024</p>



<p>I thought we were done for major model releases in 2024, but apparently not: Alibaba’s Qwen team just dropped the Apache 2.0 licensed QvQ-72B-Preview, “an experimental research model focusing on enhancing visual reasoning capabilities”.</p>
<p>Their blog post is titled <a href="https://qwenlm.github.io/blog/qvq-72b-preview/">QvQ: To See the World with Wisdom</a>—similar flowery language to their QwQ announcement <a href="https://qwenlm.github.io/blog/qwq-32b-preview/">QwQ: Reflect Deeply on the Boundaries of the Unknown</a> a few weeks ago in November.</p>
<p>It’s a vision-focused follow-up to QwQ, which I <a href="https://simonwillison.net/2024/Nov/27/qwq/">wrote about previousy</a>. QwQ is an impressive openly licensed inference-scaling model: give it a prompt and it will think out loud over many tokens while trying to derive a good answer, similar to OpenAI’s o1 and o3 models.</p>
<p>The new QvQ adds vision to the mix. You can try it out <a href="https://huggingface.co/spaces/Qwen/QVQ-72B-preview">on Hugging Face Spaces</a>—it accepts an image and a single prompt and then streams out a <em>very</em> long response where it thinks through the problem you have posed it. There’s no option to send a follow-up prompt.</p>
<p>I’ve tried it out with a bunch of things, with mixed results—but it’s really fun seeing how it works through a problem.</p>
<p>My most successful prompt was “Count the pelicans” with this image:</p>
<p><img src="https://static.simonwillison.net/static/2024/count-pelicans-easy.jpg" alt="A photograph of four glorious young California Brown Pelicans perched on a dock. The back end of another pelican is visible at the front of the photo."/></p>
<p>Here’s <a href="https://gist.github.com/simonw/6c296f4b9323736dc77978447b6368fc#response">the full response</a>. Some highlights:</p>
<blockquote>
<p>So I’ve got this picture of some pelicans, and I need to count them. Let me see... First off, I know that pelicans are those big birds with the massive beaks, right? [...]</p>
<p>Let me try counting again, more carefully this time. Starting from the left:</p>
<ol>
<li>The first pelican is fully visible, standing at the front.</li>
<li>Behind it, slightly to the right, is the second pelican.</li>
<li>Then, further back, there’s a third pelican.</li>
<li>And next to that one, there’s a fourth pelican.</li>
</ol>
<p>So, that’s four pelicans in total. But, I notice that on the far right of the image, there’s part of another bird, maybe a pelican’s back or tail feathers, but it’s not fully in the frame, so I don’t think I should count it as a whole pelican.</p>
</blockquote>
<p>Something about the tone of voice it uses, “First off, I know that pelicans are those big birds with the massive beaks, right?”, tickles me.</p>
<p>I also tried this on a <a href="https://gist.github.com/simonw/6c296f4b9323736dc77978447b6368fc#image-2">much harder image</a>—it counted 17 which looks about right to me but honestly I have trouble with that image myself.</p>
<p>I fed in <a href="https://gist.github.com/simonw/6c296f4b9323736dc77978447b6368fc#arc-agi-puzzle-0d87d2a6">one of the ARC-AGI puzzles</a> that o3 had failed at.</p>
<p><img alt="A puzzle with colored squares, where drawing a line between the single blue squares and turning any intersected rectangles blue is clearly the solution." src="https://static.simonwillison.net/static/2024/arc-agi-task-0d87d2a6.png"/></p>
<p>It produced <a href="https://gist.github.com/simonw/6c296f4b9323736dc77978447b6368fc#response-1">a very lengthy chain of thought</a> that was almost entirely incorrect, but had some interesting “ideas” in it:</p>
<blockquote>
<p>[...] Let me try to think in terms of cellular automata rules, like Conway’s Game of Life.</p>
<p>In Game of Life, each cell’s state in the next generation is determined by its current state and the states of its eight neighbors.</p>
<p>Perhaps a similar rule applies here.</p>
</blockquote>
<p>Finally, I asked it to “Estimate the height of the dinosaur” against this image (which, as it correctly noted, is actually an inflatable dragon):</p>
<p><img src="https://static.simonwillison.net/static/2024/inflatable-dragon.jpg" alt="A large inflatable Christmas decoration of a reindeer riding a dragon - both reindeer and dragon are wearing Christmas hats"/></p>
<p>I’m not sure this task is even possible given the lack of items in the frame of comparable known height. It <a href="https://gist.github.com/simonw/6c296f4b9323736dc77978447b6368fc#response-3">had a good go at it</a> though! I particularly enjoyed how it began:</p>
<blockquote>
<p>So I’ve got this inflatable Christmas decoration, and it’s a dragon! But not just any dragon—it’s a green dragon wearing a Santa hat and a red and white scarf. And get this, there’s a reindeer on its back, also wearing a Santa hat and holding onto the dragon’s wings. It’s pretty festive and colorful, with lots of vibrant greens, reds, and yellows.</p>
<p>The dragon has these big, friendly eyes and a smiling face, which makes it look really cheerful. Its wings are spread out, and it has white claws on its feet. The reindeer is brown with antlers and seems to be enjoying the ride on the dragon’s back.</p>
<p>Now, the question is, how tall is this inflatable dragon? I need to estimate its height. Let me see. I’m standing next to it, and I’m about 5 feet 10 inches tall. The dragon is definitely taller than me. Maybe around 8 or 9 feet high? But I should try to be more precise.</p>
</blockquote>
<p>I wonder how it decided that its own height was 5 feet 10 inches!</p>
<h4 id="running-qvq-locally">Running QvQ locally</h4>
<p>All of my experiments so far have used the <a href="https://huggingface.co/spaces/Qwen/QVQ-72B-preview">hosted Hugging Face demo</a>. I’m hoping to try it out on my own laptop soon—I think it should just fit in 64GB of M2, maybe with a smaller quantization.</p>
<p>Right now the options are:</p>
<ul>
<li>
<a href="https://huggingface.co/Qwen/QVQ-72B-Preview">Qwen/QVQ-72B-Preview</a> on Hugging Face has the GPU model weights, for use with Hugging Face Transformers and the <a href="https://pypi.org/project/qwen-vl-utils/">qwen-vl-utils</a> Python package.</li>
<li>Prince Canuma <a href="https://twitter.com/Prince_Canuma/status/1871687356815716672">converted the model for Apple’s MLX framework</a> as <a href="https://huggingface.co/collections/mlx-community/qvq-72b-preview-676b345a6f93172ba980c0d5">mlx-community/qvq-72b-preview</a> and got it working with his excellent <a href="https://github.com/Blaizzy/mlx-vlm">mlx-vlm</a> package.</li>
</ul>
<p>As a happy user of Ollama’s <a href="https://ollama.com/library/qwq">qwq port</a> I’m hoping they add a QvQ release at some point soon as well.</p>


</div>


</div></div>
  </body>
</html>
