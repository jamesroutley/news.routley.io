<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.i-programmer.info/news/90-tools/15901-a-compiler-writing-playground.html">Original</a>
    <h1>A Compiler Writing Playground</h1>
    
    <div id="readability-page-1" class="page"><div>
<td id="IprogrammerMainArticleTextBody">
<p>&#34;Create Your Own Compiler&#34; is an interactive tutorial that step by step shows how to write your own simple compiler that transforms JavaScript into Lisp. Along with it, we take a look at what a compiler actually is and the state of the art that is Roslyn.</p>



<p>Compilers are important, but most people go day by day using their favorite programming language and tools without</p>
<p>However peeking into that black box and learning to write a compiler gives you super powers. It will allow you to write custom tools, min languages/DSLs, make your own fully fledged language, or as in &#34;Create Your Own Compiler&#34;, transform one language to another!</p>
<p>A prime example of why the latter, in other words transpilation, has proved indispensable is the case of Babel. Since not all browsers are able to cope with all the latest Javascript language features, Babel translates that newest Javascript code into backwards compatible version of JavaScript in current and older browsers or environments.</p>
<p>Yet another example is the case of Typescript which adds optional typing (on that matter make sure to also check <a href="https://www.i-programmer.info/news/98-languages/11936-sorbet-making-ruby-statically-typed.html" target="_self">Sorbet - Making Ruby Statically Typed</a>) to Javascript, acting as a statically typed and better superset of it. The TypeScript compiler analyzes and compiles the TypeScript code into JavaScript in order to run on any browser. Since the VM engine that runs Javascript is there, why not reuse it instead of building one from scratch to support our own language? It&#39;s easier to convert!</p>
<p>Fable, is yet another X-to-Javascript transpiler. Fable transpiles F# to ES2015 JavaScript so code written in F# can run anywhere JavaScript runs - the browser, Node.js, Electron,React Native or generally V8.</p>
<p>But a compiler&#39;s most popular application is for programs to translate from a higher language to a lower-level language in order to create an executable program;see C.</p>
<p>Every compiler works by executing several well defined phases, each phase taking the input of the previous one until it finally produces runnable code.</p>
<p>The first phase is tokenization by the part called the lexer. It takes a stream of characters and using regexes groups them according the language syntax into what&#39;s called the tokens - keywords functions, operators, etc.</p>
<p>The next phase is parsing. The parser takes the stream of tokens made by the lexer and represents them in a structure, the abstract syntax tree, something much easier to work with.</p>
<p>The next phase is the semantic analysis where the compiler considers the language&#39;s syntax constraints and the data types. It makes sure that the code is well-formed and well-typed.</p>
<p>The next phase is to optimize the AST - eliminating dead code using techniques like Tree shaking for example. The result of this phase is the Intermediate Representation or IR. IR does itself undergo optimizations specific to the target CPU architecture to produce machine code.</p>
<p>The last step is to produce a standalone executable (runtimes that work with bytecode like the JVM, work with IR instead of creating an executable), something usual in C programming but with the new tools now available, even high level languages like Java, under GraalVM, can compile to native executables.</p>
<p>The above list is simplified of course but in general the steps you have to take in order to take an input source and transform it to the desired output are</p>

<ul>
<li>Lexing</li>
<li>Parsing</li>
<li>Building up an Abstract Syntax Tree (AST)</li>
<li>Generating IR code for the given AST</li>
<li>Optimizations on the generated IR code</li>
<li>Generate machine code</li>
</ul>

<p>Add to those the step of defining the syntax of your new programming language, if you want to go that way.</p>
<p>The &#34;Create Your Own Compiler&#34; playground makes that complicated process easy to go through. Actualy is an annotated walkthrough of Jamie Kyle&#39;s &#34;The Super Tiny Compiler&#34;, a simple compiler written in Javascript. The goal of the tutorial is to compile a Lisp statement into Javascript. Along the way we go through the different stages of Lexical Analysis, Syntactic Analysis, Transformation, and Code Generation.</p>
<p>Each stage is broken into multiple steps and each step comes with the annotated code interactively. It&#39;s a great way to get your feet wet and to grasp the bare concepts.</p>
<p><img src="https://www.i-programmer.info/images/stories/News/2022/Nov/B/compilerfun.jpg" width="400" height="352"/></p>
<p>The other, post-modern way of building compilers is by going the Roslyn way. Write a compiler for the language in that language? Microsoft has done that with the state of the art compiler platform, Roslyn.</p>
<p>As to the question of what Roslyn actually is, what is better than getting the authoritative answer than by a member of the Roslyn team , the renowned C# Guru himself, Eric Lippert? The opportunity came about in the form of an <a href="http://www.i-programmer.info/professional-programmer/i-programmer/7154-c-guru-an-interview-with-eric-lippert.html" target="_self">interview</a> that he gave us back in 2014:</p>
<p><em><strong>NV:</strong> Roslyn&#39;s official definition states that it is a &#34;project to fully rewrite the Visual Basic and C# compilers and language services in their own respective managed code language; Visual Basic is being rewritten in Visual Basic and C# is being rewritten in C#. &#34;</em></p>
<p><em><strong>EL:</strong> When I was at Microsoft I saw so many people write their own little C# parsers or IDEs or little mini compilers or whatever, for their own purposes. That&#39;s very difficult, it’s time-consuming, it&#39;s expensive, and it&#39;s almost impossible to do right. Roslyn changes all that, by giving everyone a library of analysis tools for C# and VB which is correct, very fast, and designed specifically to make tool builder&#39;s lives better. I am very excited that it is almost done! I worked on it for many years and can&#39;t wait to get my hands on the release version.</em></p>
<p>Click on <a href="https://www.i-programmer.info/professional-programmer/i-programmer/7154-c-guru-an-interview-with-eric-lippert.html" target="_self">this link</a> to read the rest of the Eric&#39;s comments.</p>
<p>Building your compiler using Roslyn gives you distinct advantages:</p>

<ul>
<li>Massive performance improvement and built-in mechanism for handling dynamic objects. Crucial functionality for code emitting, parsing assemblies and the structure of the compiler itself that result in assemblies portability and the possibility of integrating it with tools available only for C# (code analysis, VS extensions).</li>
<li>Cross platform capability since Roslyn produces portable class libraries compatible with Mono and the . NET Core.</li>
<li>Visual studio integration and other functionality including code colourization, syntax highlighting and IntelliSense.</li>
</ul>

<p>Magic!</p>
<h4>More Information</h4>
<p><a href="https://citw.dev/tutorial/create-your-own-compiler" target="_self">Create your own compiler</a></p>
<h4>Related Articles</h4>
<p><a href="https://www.i-programmer.info/professional-programmer/i-programmer/7154-c-guru-an-interview-with-eric-lippert.html" target="_self">C# Guru - An Interview With Eric Lippert</a></p>
<p><a href="https://www.i-programmer.info/news/87-web-development/14969-fable-write-front-end-apps-for-the-web-in-f.html" target="_self">Fable - Write Front-End Apps For The Web In F#</a></p>
<p><a href="https://www.i-programmer.info/news/98-languages/11936-sorbet-making-ruby-statically-typed.html" target="_self">Sorbet - Making Ruby Statically Typed</a></p>
<p><a href="https://www.i-programmer.info/bookreviews/14-other-languages/11016-how-to-create-pragmatic-lightweight-languages.html" target="_self">How To Create Pragmatic, Lightweight Languages</a></p>
<p><a href="https://www.i-programmer.info/news/150-training-a-education/14290-take-cornells-cs-6120-advanced-compilers-for-free.html" target="_self">Take Cornell&#39;s CS 6120 Advanced Compilers For Free</a>  </p>

<p>To be informed about new articles on I Programmer, sign up for our <a href="https://www.i-programmer.info/edit-profile.html?layout=form">weekly newsletter</a>,<a target="_blank" href="https://s3.amazonaws.com/com.alexa.toolbar/atbp/hfdfGO/download/index.htm"> </a>subscribe to the <a href="https://www.i-programmer.info/component/ninjarsssyndicator/?feed_id=3&amp;format=raw" target="_blank">RSS feed</a> and follow us on <a href="http://twitter.com/Iprogrammerinfo" target="_blank">Twitter,</a> <a href="http://www.facebook.com/pages/iProgrammer/127140977307932#%21/pages/iProgrammer/127140977307932?v=wall" target="_blank">Facebook</a> or <a href="http://www.linkedin.com/company/i-programmer" target="_blank">Linkedin</a>.</p>


<p><a href="https://www.iopress.info/index.php/author-s-pages/harry-fairhead" target="_blank"><img src="https://www.i-programmer.info/images/stories/InArticle/picocsqare.gif" alt="picobook" width="400" height="350"/></a></p>




<h4>Comments</h4>

<p>or email your comment to: <a href="mailto:comments@i-programmer.info">comments@i-programmer.info</a></p></td>
</div></div>
  </body>
</html>
