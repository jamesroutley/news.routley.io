<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jdx/mise/discussions/6779">Original</a>
    <h1>Fnox, a secret manager that pairs well with mise</h1>
    
    <div id="readability-page-1" class="page"><div role="presentation" data-paste-markdown-skip="">
    <tbody data-target-translation-id="9073537" data-target-translation-type="discussion">
        <tr>
    <td>
        <p dir="auto">I&#39;m excited to announce <strong><a href="https://github.com/jdx/fnox">fnox</a></strong> â€“ a new secret management tool designed to work seamlessly alongside mise in your development workflow.</p>
<p dir="auto">While it&#39;s brand new, I have labeled it 1.0 since it seems pretty feature complete and given my experience with several experiments with secrets over the years with mise, I think will be a lot more stable than its young age would indicate.</p>
<h2 dir="auto">What is fnox?</h2>
<p dir="auto">fnox (think &#34;Fort Knox&#34;) is a command-line secret manager that handles encrypted and remote secrets for development, CI/CD, and production environments. It provides a unified interface for managing sensitive data through either local encryption or remote storage backends.</p>
<h2 dir="auto">Why fnox?</h2>
<p dir="auto">While mise has built-in secret support (age encryption and sops), these work best for simple, file-based scenarios. For more complex production needs, fnox provides:</p>
<ul dir="auto">
<li><strong>Remote storage</strong> in cloud providers (AWS Secrets Manager, Azure Key Vault) or password managers (1Password, Bitwarden)</li>
<li><strong>Keychain support</strong> using local OS cred stores</li>
<li><strong>Remote encryption</strong> using cloud KMS services</li>
<li><strong>Team collaboration</strong> with per-user encryption keys</li>
<li><strong>Enterprise integration</strong> with HashiCorp Vault and other secret stores</li>
<li><strong>Real-time access</strong> without caching security concerns trying to do this in mise would&#39;ve involved</li>
</ul>
<h3 dir="auto">ðŸš€ <strong>Developer-Friendly</strong></h3>
<ul dir="auto">
<li><strong>Shell integration</strong>: Automatically loads secrets when you <code>cd</code> into directories</li>
<li><strong>Profile support</strong>: Different secret sets for prod, staging, dev</li>
<li><strong>Simple TOML config</strong>: Checked into git (no secrets in the file itself)</li>
<li><strong>Works offline</strong>: When using encryption providers</li>
</ul>
<h3 dir="auto">ðŸ‘¥ <strong>Team-Ready</strong></h3>
<ul dir="auto">
<li>Multiple recipients can decrypt the same secrets</li>
<li>Each team member can use their own SSH/age keys or leverage KMS</li>
<li>No shared master passwords</li>
</ul>
<h2 dir="auto">Getting Started</h2>
<p dir="auto">Install fnox with mise:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ mise use -g fnox
$ fnox --version"><pre>$ <span>mise use -g fnox</span>
$ <span>fnox --version</span></pre></div>
<p dir="auto">Create your first secret:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ fnox init
$ fnox provider add age --id main --recipients ~/.ssh/id_ed25519.pub
$ fnox secret set API_KEY --value &#34;your-secret-value&#34; --provider main"><pre>$ <span>fnox init</span>
$ <span>fnox provider add age --id main --recipients <span>~</span>/.ssh/id_ed25519.pub</span>
$ <span>fnox secret <span>set</span> API_KEY --value <span><span>&#34;</span>your-secret-value<span>&#34;</span></span> --provider main</span></pre></div>
<p dir="auto">Use secrets in your workflow:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Export secrets as environment variables
$ fnox exec -- your-command

# Get a single secret
$ fnox get API_KEY

# Shell integration (auto-load secrets on cd)
$ fnox shell hook"><pre># <span>Export secrets as environment variables</span>
$ <span>fnox <span>exec</span> -- your-command</span>

# <span>Get a single secret</span>
$ <span>fnox get API_KEY</span>

# <span>Shell integration (auto-load secrets on cd)</span>
$ <span>fnox shell hook</span></pre></div>
<h2 dir="auto">How It Works with mise</h2>
<p dir="auto">fnox and mise work independently but complement each other:</p>
<ul dir="auto">
<li><strong>mise</strong>: Manages tools, tasks, and general environment variables</li>
<li><strong>fnox</strong>: Manages sensitive secrets with encryption and remote storage</li>
</ul>
<p dir="auto">A typical setup:</p>
<p dir="auto"><strong><code>mise.toml</code></strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[env]
NODE_ENV = &#34;development&#34;
DATABASE_HOST = &#34;localhost&#34;

[tools]
node = &#34;20&#34;
fnox = &#34;latest&#34;"><pre>[<span>env</span>]
<span>NODE_ENV</span> = <span><span>&#34;</span>development<span>&#34;</span></span>
<span>DATABASE_HOST</span> = <span><span>&#34;</span>localhost<span>&#34;</span></span>

[<span>tools</span>]
<span>node</span> = <span><span>&#34;</span>20<span>&#34;</span></span>
<span>fnox</span> = <span><span>&#34;</span>latest<span>&#34;</span></span></pre></div>
<p dir="auto"><strong><code>fnox.toml</code></strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[providers.age]
type = &#34;age&#34;
recipients = [&#34;age1ql3z7...&#34;]

[secrets]
DATABASE_PASSWORD = { provider = &#34;age&#34;, value = &#34;AGE-SECRET-KEY...&#34; }
API_KEY = { provider = &#34;1password&#34;, ref = &#34;op://dev/api/credential&#34; }"><pre>[<span>providers</span>.<span>age</span>]
<span>type</span> = <span><span>&#34;</span>age<span>&#34;</span></span>
<span>recipients</span> = [<span><span>&#34;</span>age1ql3z7...<span>&#34;</span></span>]

[<span>secrets</span>]
<span>DATABASE_PASSWORD</span> = { <span>provider</span> = <span><span>&#34;</span>age<span>&#34;</span></span>, <span>value</span> = <span><span>&#34;</span>AGE-SECRET-KEY...<span>&#34;</span></span> }
<span>API_KEY</span> = { <span>provider</span> = <span><span>&#34;</span>1password<span>&#34;</span></span>, <span>ref</span> = <span><span>&#34;</span>op://dev/api/credential<span>&#34;</span></span> }</pre></div>
<p dir="auto">Then use both together:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ mise x -- fnox x -- npm start"><pre>$ <span>mise x -- fnox x -- npm start</span></pre></div>
<p dir="auto">Or you can activate one or the other in your shell to avoid that.</p>
<h2 dir="auto">Why Separate Tools?</h2>
<p dir="auto">You might wonder why fnox isn&#39;t built into mise. The answer comes down to fundamental architectural constraints:</p>
<p dir="auto"><strong>The Performance Problem</strong>: mise reloads its environment frequently (on directory changes, after commands, etc.). If secrets relied on remote calls to services like KMS or 1Password, each reload would require network requests, making mise unacceptably slow.</p>
<p dir="auto"><strong>The Security Tradeoff</strong>: Caching could solve the performance issue, but introduces security risks:</p>
<ul dir="auto">
<li>Where do you store encrypted cache files safely?</li>
<li>Where do you put the encryption keys needed to decrypt those caches?</li>
<li>How do you prevent cache files from becoming a security vulnerability?</li>
</ul>
<p dir="auto"><strong>The Architecture Challenge</strong>: Making mise skip reloading certain env vars would require a major architectural overhaulâ€”a change that would complicate the codebase significantly.</p>
<p dir="auto">By creating fnox as a separate tool with its own shell integration, we avoid these problems entirely. Each tool can focus on what it does best:</p>
<ul dir="auto">
<li><strong>mise</strong>: Fast environment management with aggressive caching</li>
<li><strong>fnox</strong>: Secure secret management with real-time access to remote providers</li>
</ul>
<blockquote>
<p dir="auto"><strong>Note</strong>: For more context on this architectural decision, see the <a href="https://github.com/jdx/mise/discussions/3712" data-hovercard-type="discussion" data-hovercard-url="/jdx/mise/discussions/3712/hovercard">vaults/secrets management discussion</a>.</p>
</blockquote>
<h2 dir="auto">What&#39;s going to happen to mise secrets?</h2>
<p dir="auto">They&#39;re still marked as experimental so the future is technically up in the air. That said, mise does work well for age/sops encryption so I think it could probably come out of experimental. For now, I don&#39;t have plans to introduce remote secret backends like fnox provides.</p>
<h2 dir="auto">Learn More</h2>
<ul dir="auto">
<li><strong>GitHub</strong>: <a href="https://github.com/jdx/fnox">https://github.com/jdx/fnox</a></li>
<li><strong>Documentation</strong>: <a href="https://github.com/jdx/fnox#readme">https://github.com/jdx/fnox#readme</a></li>
<li><strong>mise Registry</strong>: Now available as <code>mise use fnox</code></li>
</ul>
    </td>
  </tr>

    </tbody>
  </div></div>
  </body>
</html>
