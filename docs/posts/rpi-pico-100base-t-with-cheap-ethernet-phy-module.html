<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/maximeborges/pico-rmii-ethernet">Original</a>
    <h1>RPi Pico: 100BASE-T with cheap ethernet PHY module</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">Enable 100Mbit/s Ethernet connectivity on your <a href="https://www.raspberrypi.org/products/raspberry-pi-pico/" rel="nofollow">Raspberry Pi Pico</a> with an RMII based Ethernet PHY module.</p>
<p dir="auto">Leverages the Raspberry Pi RP2040 MCU&#39;s PIO, DMA, and dual core capabilities to create a Ethernet MAC stack in software!</p>
<h2 dir="auto"><a id="user-content-hardware" aria-hidden="true" href="#hardware"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hardware</h2>
<ul dir="auto">
<li><a href="https://www.raspberrypi.org/products/raspberry-pi-pico/" rel="nofollow">Raspberry Pico</a></li>
<li>Any RMII based Ethernet PHY module, such as the <a href="https://www.waveshare.com/lan8720-eth-board.htm" rel="nofollow">Waveshare LAN8720 ETH Board</a></li>
</ul>
<h2 dir="auto"><a id="user-content-modification-to-do" aria-hidden="true" href="#modification-to-do"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Modification to do</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/159235/147747551-1fca8e2f-e9c8-4833-9947-0a49e2bda6a9.png"><img src="https://user-images.githubusercontent.com/159235/147747551-1fca8e2f-e9c8-4833-9947-0a49e2bda6a9.png" alt="image"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/159235/147748051-1d8e7100-147f-4f92-9b2f-91e2398c6e03.jpg"><img src="https://user-images.githubusercontent.com/159235/147748051-1d8e7100-147f-4f92-9b2f-91e2398c6e03.jpg" alt="schematic"/></a></p>
<p dir="auto">We&#39;re generating the 50MHz RMII clock on the RP2040 instead of getting it from the LAN8720A crystal. For that, we remove the two R12 and R14 resistors, and connect one of them back on the two top pads instead to avoid connecting the onboard crystal to the clock, and instead connect the nINT/RETCLK pin from the connector to the XTAL1/CLKIN pin of the LAN8720A chip.</p>
<h3 dir="auto"><a id="user-content-wiring" aria-hidden="true" href="#wiring"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Wiring</h3>
<table>
<thead>
<tr>
<th>RMII Module</th>
<th>Raspberry Pi Pico</th>
<th>Library Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>TX1</td>
<td>TX0 + 1</td>
<td>11</td>
</tr>
<tr>
<td>TX-EN</td>
<td>TX0 + 2</td>
<td>12</td>
</tr>
<tr>
<td>TX0</td>
<td>any GPIO</td>
<td>10</td>
</tr>
<tr>
<td>RX0</td>
<td>any GPIO</td>
<td>6</td>
</tr>
<tr>
<td>RX1</td>
<td>RX0 + 1</td>
<td>7</td>
</tr>
<tr>
<td>nINT / RETCLK</td>
<td>21/23/24/25</td>
<td>21</td>
</tr>
<tr>
<td>CRS</td>
<td>RX0 + 2</td>
<td>8</td>
</tr>
<tr>
<td>MDIO</td>
<td>any GPIO</td>
<td>14</td>
</tr>
<tr>
<td>MDC</td>
<td>MDIO + 1</td>
<td>15</td>
</tr>
<tr>
<td>VCC</td>
<td>3V3</td>
<td></td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
<td></td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-examples" aria-hidden="true" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<p dir="auto">See <a href="https://github.com/maximeborges/pico-rmii-ethernet/blob/main/examples">examples</a> folder. <a href="https://www.nongnu.org/lwip/" rel="nofollow">LWIP</a> is included as the TCP/IP stack.</p>

<ul dir="auto">
<li>Built-in LWIP stack is compiled with <code>NO_SYS</code> so LWIP Netcon and Socket API&#39;s are not enabled</li>
<li>Auto-negotiation to 10BASE-T is not supported</li>
<li>MDIO is bit-banged</li>
</ul>
</article>
        </div></div>
  </body>
</html>
