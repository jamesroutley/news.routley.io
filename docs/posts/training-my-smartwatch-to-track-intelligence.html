<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dmvaldman.github.io/rooklift/">Original</a>
    <h1>Training my smartwatch to track intelligence</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>




<p>Some mornings I’d wake ready for the world—I’d feel alert, clear-headed, present. Other days, I’d retrace my steps 20 times to find my keys, dreading the long day ahead. My sleep was erratic and I didn’t know why. I had invested in a Garmin watch to clarify trends, and it was helping, but it was also missing something. Though great at tracking the body, it was mediocre at tracking the mind.</p>

<p>There’s another signal I was using to track the mind, which is chess. I play almost daily, and I found winning or losing to be a good proxy for mental clarity. Chess was the signal absent from my Garmin that I hoped could bridge body to mind. Time to verify if I was right.</p>

<h2 id="building-a-model">Building a Model</h2>

<p>I downloaded my chess data (<code>date</code>, <code>start ELO</code>, <code>ΔELO</code>) from Lichess, and my Garmin data (about 1.5 years of cross-referenced signal) and put on my data science hat. I was tracking ~20 signals related to exercise and sleep and from them built various statistical models to predict my daily <a href="https://en.wikipedia.org/wiki/Elo_rating_system">ELO</a> fluctuations. What worked best was also the simplest: tried and true logistic regression. I could predict winning/losing with about 60% accuracy (and confirmed that number through cross-validation). 60% seemed pretty good: absent any signal, the chance of winning should be about 50% because chess apps pair you with like-ELO players.</p>

<p>That I could do better than chance wasn’t too surprising. A lot of cognition depends on how well you sleep and exercise. But what exactly does it mean to sleep and exercise well? Which of the signals were actually important? Using a sparse logistic regression solver is a straightforward method to show which features have little (or redundant) predictive power, and I was pretty surprised by the results. Here’s a sample of independent signals from most positively correlated to most negatively correlated</p>

<table>
  <thead>
    <tr>
      <th>Feature</th>
      <th>Correlation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span>REM sleep duration</span></td>
      <td><span>Positive</span></td>
    </tr>
    <tr>
      <td><span>Stress<sup>*</sup> duration</span></td>
      <td><span>Positive</span></td>
    </tr>
    <tr>
      <td><span>Stress<sup>*</sup> average</span></td>
      <td><span>Positive</span></td>
    </tr>
    <tr>
      <td><span>Deep sleep duration</span></td>
      <td><span>None</span></td>
    </tr>
    <tr>
      <td><span>Sedentary duration</span></td>
      <td><span>None</span></td>
    </tr>
    <tr>
      <td><span>Active calories</span></td>
      <td><span>Negative</span></td>
    </tr>
    <tr>
      <td><span>Light sleep duration</span></td>
      <td><span>Negative</span></td>
    </tr>
  </tbody>
</table>

<p><em><sup>*</sup>Stress is a proprietary algorithm of Garmin’s creation but is best approximated by 1 / HRV</em></p>

<p>REM sleep was out on top, which isn’t much of a surprise. But apparently <strong><em>it helps to be stressed out and avoid recent exercise</em></strong>.</p>

<p><strong><em>Exercise Made Me Dumber</em></strong> – I’d assumed fitness and sharpness went together. And long-term they probably do, but short-term, you’re pitting body against mind. The literature confirms this: exercise-induced fatigue impairs complex cognitive tasks.<sup id="fnref:1"><a href="#fn:1" rel="footnote" role="doc-noteref">1</a></sup></p>

<p><strong><em>Deep Sleep had no Effect</em></strong> – Supposedly the most restorative phase, but unhelpful for chess. Chess demands working memory and planning, and research shows it’s REM and not deep sleep that targets these capacities.<sup id="fnref:2"><a href="#fn:2" rel="footnote" role="doc-noteref">2</a></sup><sup id="fnref:3"><a href="#fn:3" rel="footnote" role="doc-noteref">3</a></sup></p>

<p><strong><em>Stress Made Me Smarter</em></strong> – As inverse HRV, Garmin’s stress signal really measures your sympathetic nervous system, which is also heightened during alertness and engagement, not just anxiety. According to the <a href="https://en.wikipedia.org/wiki/Yerkes%E2%80%93Dodson_law">Yerkes-Dodson law</a>, moderate arousal improves performance on complex tasks. For your mind to be clear, you actually don’t want to be very relaxed.</p>

<p>The takeaway is that near-term mental clarity and long-term health aren’t that aligned. This is I think why Garmin’s sleep metrics can often be miscalibrated with performance. To Garmin, for example, stress is always bad. Moreover, this was a model built custom for my data—I wasn’t fitting into some aggregated statistics of Garmin’s design.</p>

<h2 id="building-a-garmin-app">Building a Garmin App</h2>

<p>With a better model in hand, I decided to make a better model on my hand. I was going to make a Garmin watch app that would tell smart from dumb. Each morning it would turn the previous day’s metrics into the probability my ELO would go up that day. The model would also update weekly with the new data and I’d be able to verify if the same features were consistently predictive (which by and large they were).</p>

<p><img src="https://dmvaldman.github.io/assets/img/rooklift/watch2.jpg" alt="glance view"/>
<img src="https://dmvaldman.github.io/assets/img/rooklift/watch1.jpg" alt="fullscreen view"/>
</p>
<p><em>Glance view and Fullscreen view</em></p>

<p>If curious about the code, here’s what <a href="https://github.com/dmvaldman/rooklift">builds the model</a> and here’s the <a href="https://github.com/dmvaldman/rooklift-frontend">frontend for the watch UI</a>.</p>

<h2 id="reflections-on-use">Reflections on Use</h2>

<p>I’ve been using the app for several months now. It’s definitely predictive not only of my chess aptitude but other cognitively demanding tasks, at times contradicting Garmin’s “morning review”. Often, it would also contradict how I was internally feeling. I’d wake up feeling rested, see my stats are low, and play a game of chess out of algorithmic rebellion, only to feel my mind up against a barrier and handedly lose. I’ve now been taking its predictions more seriously and scheduling less demandingly cognitive tasks when my metrics are low, adopting a “we’ll get em next time” strategy.</p>

<p>I’ve also made some behavior changes. I’ve invested much more into getting enough REM sleep. What’s helped the most has been cutting down alcohol. I’ll avoid the “have a glass of wine to relax” thing. Even a single serving of alcohol disproportionately impares REM sleep.<sup id="fnref:4"><a href="#fn:4" rel="footnote" role="doc-noteref">4</a></sup> Begrudgingly, I’ve adopted another west-coast trope. Getting a weighted blanket has also helped me be get more REM and deep sleep and fewer 5am wakeups for no reason.</p>

<p>I’d like to put this app into the Garmin marketplace, but unfortunately Garmin <a href="https://forums.garmin.com/developer/connect-iq/i/bug-reports/feature-request-add-sleep-data-to-the-sdk">doesn’t provide</a> sleep data on device and is also very <a href="https://stackoverflow.com/questions/53454382/can-i-get-access-to-the-garmin-health-api-as-a-hobbyist">restrictive</a> on hobby projects that need Health API access. For now it can only be a personal tool. Hope that changes at some point! Do reach out if you want one for yourself and I can help you set up a local version.</p>

<p><img src="https://dmvaldman.github.io/assets/img/rooklift/logo.png" alt=""/></p>

<hr/>








</div>

    </div></div>
  </body>
</html>
