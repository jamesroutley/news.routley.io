<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.jeffgeerling.com/blog/2025/how-install-truenas-on-raspberry-pi">Original</a>
    <h1>How to install TrueNAS on a Raspberry Pi</h1>
    
    <div id="readability-page-1" class="page"><div><p>Now that Joel0 in the TrueNAS community has created a <a href="https://forums.truenas.com/t/truenas-on-arm-now-available/49160/16?u=geerlingguy">fork of TrueNAS that runs on Arm</a>, I thought I&#39;d give it a spin—on a Raspberry Pi.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/pi-5-with-hard-drives.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-7d31be78-66b1-44d6-85c3-3c427ad83265" data-insert-attach="{&#34;id&#34;:&#34;7d31be78-66b1-44d6-85c3-3c427ad83265&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Raspberry Pi 5 with Hard Drives"/></p>

<p>I currently run an <a href="https://www.jeffgeerling.com/blog/2024/building-efficient-server-grade-arm-nas">Ampere Arm server in my rack with Linux and ZFS</a> as my primary storage server, and a <a href="https://www.jeffgeerling.com/blog/2024/radxas-sata-hat-makes-compact-pi-5-nas">Raspberry Pi with four SATA SSDs and ZFS</a> as backup replica in my studio. My <a href="https://github.com/geerlingguy/arm-nas">configuration for these Arm NASes is up on GitHub</a>.</p>

<p>I&#39;ve been looking forward to TrueNAS support on Arm for years, though it seems the sentiment in that community was &#39;Arm servers aren&#39;t powerful enough to run serious storage servers&#39;—despite myself and many others doing so for many years... but that&#39;s besides the point.</p>

<h2>On a Raspberry Pi?</h2>

<p>Yes, in fact.</p>

<p>I&#39;ve found <em>numerous</em> times, running modern applications on slower hardware is an <em>excellent</em> way to expose little configuration flaws and misconceptions that lead to learning how to run the applications <em>much</em> better on more capable machines.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/pi-nas-ssd.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-4ed5f5d6-1d77-4c2e-b32e-4dd31135ffda" data-insert-attach="{&#34;id&#34;:&#34;4ed5f5d6-1d77-4c2e-b32e-4dd31135ffda&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Raspberry Pi 5 NAS with SSDs"/></p>

<p>From my <a href="https://pidramble.com">Pi Dramble</a> to my <a href="https://www.jeffgeerling.com/blog/2022/petabyte-pi-project">Petabyte Pi Project</a>, running apps intended for much more powerful hardware taught me a lot. So maybe running TrueNAS, which demands <a href="https://www.truenas.com/docs/core/13.0/gettingstarted/corehardwareguide/">8 GB of RAM and 16 GB of primary storage</a>, would be a fun learning exercise.</p>

<p>I&#39;ve done it on x86 servers, but that&#39;s boring. It&#39;s <em>easy</em>. I don&#39;t learn much when a project goes off without a hitch, and I&#39;m not forced to look closer at some of the configuration quirks.</p>

<p>You can watch the video for a full demo, or read on below:</p>

<div>
<p><iframe src="https://www.youtube.com/embed/XvaXemGDSpk" frameborder="0" allowfullscreen=""></iframe></p>
</div>

<h2>On a Raspberry Pi, there&#39;s no UEFI</h2>

<p>One glaring problem with the Raspberry Pi is no official support for UEFI, a standard way to boot computers and interface operating systems to device firmware. Raspberry Pi only <em>officially</em> supports device-tree-based Linux booting, which is much less standard. That means you can&#39;t just throw any old Linux distribution on the Pi, you have to have ones tailored to the Pi. There <em>are</em> good OSes for the Pi, like Raspberry Pi OS, based on Debian. But it&#39;s not the same as <a href="https://www.jeffgeerling.com/blog/2025/system76-built-fastest-windows-arm-pc">grabbing Windows on Arm and installing it on my Ampere workstation</a>.</p>

<p>To get past this restriction, we have to rely on a community project, forked from <a href="https://worproject.com">Windows on Raspberry Pi</a>. Specifically, I&#39;m using <a href="https://github.com/NumberOneGit/rpi5-uefi">NumberOneGit&#39;s rpi5-uefi fork</a>.</p>

<p>To get your Pi 5 to support UEFI (CM5 process may be slightly different):</p>

<ol>
<li>Update the EEPROM to the 2025-06-09 release (or later - check what version you&#39;re running in Pi OS with the command <code>rpi-eeprom-update</code>):
 a. Typically, you can upgrade using <a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a>, <code>sudo apt full-upgrade -y</code>, or <code>sudo rpi-eeprom-update -a</code>. However, at the time of this writing, those methods will get you to the latest stable release (2025-05-08), so until then, use one of these methods:
 b. Manually update the bootloader with <a href="https://github.com/raspberrypi/usbboot"><code>usbboot</code></a> from source.
 c. Switch to the beta bootloader release channel: <code>sudo nano /etc/default/rpi-eeprom-update</code>, then change <code>latest</code> to <code>beta</code>, and run <code>sudo rpi-eeprom-update -a</code>.
 d. Verify the bootloader version you&#39;re running with <code>rpi-eeprom-update</code> after a reboot.</li>
<li>Download the latest .zip file release from <a href="https://github.com/NumberOneGit/rpi5-uefi/releases">rpi5-uefi Releases</a>.</li>
<li>Take a microSD card that&#39;s already formatted for the Pi (I just pulled the Pi OS card out of my Pi 5 that I just used for the EEPROM update), and clear out the contents of the FAT32 &#39;bootfs&#39; volume. Copy all the contents of the .zip file you downloaded into that folder (including <code>RPI_EFI.fd</code>).</li>
<li>Eject the microSD card, insert it into the Pi, and power it on with an HDMI display connected.</li>
<li>You should see a Raspberry Pi logo and the EDK2 bootloader screen appear. Unless you have NVMe or USB boot media installed, it will say &#34;Press any key to enter the Boot Manager Menu.&#34;</li>
<li>Since I couldn&#39;t find the &#39;any&#39; key, I pressed &#39;Enter&#39;, then I could navigate through a standard boot manager menu. In there you can configure SD card speeds, set the PCIe bus speed, etc.</li>
<li>After you&#39;ve changed the settings to your liking (see some <a href="https://github.com/NumberOneGit/rpi5-uefi?tab=readme-ov-file#linux">suggestions for Linux</a>), save and reset.</li>
</ol>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/pi5-uefi-boot-menu.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-9b5cafd3-b809-40ce-8dd8-6daac7197d56" data-insert-attach="{&#34;id&#34;:&#34;9b5cafd3-b809-40ce-8dd8-6daac7197d56&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Raspberry Pi 5 UEFI Boot Menu"/></p>

<h2>TrueNAS on a Pi 5</h2>

<p>Now that the Pi is booting into UEFI mode, you can install TrueNAS. To do that:</p>

<ol>
<li>Download a TrueNAS on Arm ISO from <a href="https://truenas-releases.jmay.us">https://truenas-releases.jmay.us</a> (I chose <a href="https://truenas-releases.jmay.us/TrueNAS-SCALE-Fangtooth/TrueNAS-SCALE-25.04.2-aarch64.iso">25.04.2</a>).</li>
<li>Use a tool like <a href="https://etcher.balena.io">Etcher</a> to write the ISO to a USB drive.</li>
<li>After Etcher finishes, eject the USB drive and insert it into the Pi (I used a USB 3 thumb drive, so I inserted it into one of the blue USB 3 ports on the Pi for maximum speed).</li>
<li>If it doesn&#39;t automatically boot to the TrueNAS installer, select the external USB drive in the UEFI boot manager and boot into the TrueNAS installer.</li>
<li>Follow the TrueNAS installer&#39;s prompts to install TrueNAS on any device other than the installer drive or the microSD card (I used a second USB flash drive plugged into the other USB 3 port). Wait for installation to complete.</li>
<li>When prompted, reboot and remove the USB drive.</li>
</ol>

<p>TrueNAS SCALE should boot up, and the first boot can take a while as many services need to generate files, configure services, and start them the first time.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/truenas-raspberry-pi-5-setup-ix-etc-fail.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-5a56a1cc-dac6-405d-80d3-43c1183099c5" data-insert-attach="{&#34;id&#34;:&#34;5a56a1cc-dac6-405d-80d3-43c1183099c5&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="TrueNAS installer ix-etc failure to start"/></p>

<p>In my case, on first boot, the <code>ix-etc</code> service failed to start (it timed out), and its purpose is to <code>Generate TrueNAS /etc files</code>. After booting, I chose to enter the Linux console, then ran <code>systemctl start ix-etc</code>, and rebooted.</p>

<p>After a reboot, TrueNAS seemed to launch all its services without issue, including the web UI. I visited the IP address printed on the console, logged in as the admin user I set up during install, and was greeted with the TrueNAS dashboard:</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/truenas-raspberry-pi-5.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-43bb5c4b-deff-4367-b979-304ae9f3ed55" data-insert-attach="{&#34;id&#34;:&#34;43bb5c4b-deff-4367-b979-304ae9f3ed55&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="TrueNAS running on Raspberry Pi 5"/></p>

<h2>Current Limitations</h2>

<p>Right now, most of the limitations are around <a href="https://github.com/NumberOneGit/rpi5-uefi?tab=readme-ov-file#supported-peripherals-in-uefi">missing features in UEFI mode</a>; since Raspberry Pi hasn&#39;t pushed RP1 support into the Linux kernel, and nobody&#39;s yet reverse-engineered RP1 interfaces, you can&#39;t use:</p>

<ul>
<li>Fan header PWM support (no fan control)</li>
<li>CSI/DSI connections for displays/cameras</li>
<li>GPIO</li>
<li>Built-in Ethernet</li>
</ul>

<p>The Ethernet limitation is especially annoying, as you are <em>forced</em> to use an external USB Ethernet dongle, just like on most non-Qualcomm systems running Windows on Arm.</p>

<p>Andrea della Porta from SUSE is <a href="https://www.phoronix.com/news/Raspberry-Pi-5-RP1-Linux-RFC">working on upstreaming RP1 support into Linux</a> with some <a href="https://forums.raspberrypi.com/viewtopic.php?t=360653">help from Raspberry Pi</a>, but progress has been a bit slow.</p>

<p>What I&#39;ve been wondering lately, more and more: <em>why doesn&#39;t Raspberry Pi consider official UEFI support in the first place?</em> With or <em>without</em> Microsoft&#39;s official blessing, being able to boot vanilla Windows 11 for Arm on the Pi would be neat. Not to mention, any regular Linux Arm distro (including TrueNAS SCALE) would boot too...</p>

<h2>Next Steps</h2>

<p>I recently received a new hardware project, the <a href="https://github.com/kelroy1990/Homelabs-Pi-Storage">Homelabs Pi Storage server</a>, which uses a custom CM5 SATA backplane and a 3D printable enclosure for a 6-bay NAS:</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/homelabs-pi-storage-server-cm5.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-23a178a0-d361-429c-8b65-d81dad1d2162" data-insert-attach="{&#34;id&#34;:&#34;23a178a0-d361-429c-8b65-d81dad1d2162&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Homelabs Pi Storage server"/></p>

<p>I got TrueNAS installed on a CM5 Lite (using the same process as above), but when I installed four SATA hard drives, they spun up, but were not recognized. Right now the <a href="https://github.com/NumberOneGit/rpi5-uefi/issues/21">Pi 5 UEFI support doesn&#39;t allow for more than one PCIe device</a>, and the Homelabs Pi Storage server has a PCIe switch that branches off to 2.5 Gbps Ethernet and a 6-port SATA controller.</p>

<p>These devices all work perfectly out of the box on Raspberry Pi OS (and I was able to set up a ZFS array, getting 250 MB/s over the built-in 2.5G Ethernet—see below), but they aren&#39;t recognized currently when running under UEFI :(</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/windows-zfs-file-copy-homelabs-pi.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-87ec9e17-4873-4def-babf-7025dbf865f6" data-insert-attach="{&#34;id&#34;:&#34;87ec9e17-4873-4def-babf-7025dbf865f6&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Homelabs Pi ZFS array Samba Windows 250 MB per second"/></p>

<p>I&#39;m already running vanilla ZFS under Raspberry Pi OS on my other <a href="https://www.jeffgeerling.com/blog/2024/radxas-sata-hat-makes-compact-pi-5-nas">Raspberry Pi storage server</a>, and that&#39;s running on four SSDs and no hard drives. It can sustain 200 MB/sec writes, and I presume TrueNAS would be able to do the same.</p>

<p>There are also NVMe-only boards, like the <a href="https://amzn.to/41Us51s">$50 GeeekPi N16 Quad-NVMe HAT</a>, which provide a pretty small footprint all-flash server option. But again, since those boards use switch chips (because the Pi is limited to 1 PCIe lane), none of those drives would be accessible to TrueNAS as it stands today. Your best bet if you want to use <em>TrueNAS</em> instead of just managing ZFS on you own on a Pi would be to use a single-purpose HAT or SATA controller or HBA in IT mode, to connect disks directly to the Pi.</p>

<p>Because of the current UEFI limitations, I would still recommend running TrueNAS on higher-end Arm hardware (like Ampere servers). If you want to stick to an SBC, there&#39;s <a href="https://github.com/edk2-porting/edk2-rk3588">UEFI firmware for RK3588 platforms</a> under active development. It may offer even more functionality for some boards, so check the <a href="https://github.com/edk2-porting/edk2-rk3588?tab=readme-ov-file#platinum">compatibility list</a>.</p>

<p>Or you could be boring and just install TrueNAS on x86, where it&#39;s fully supported ;)</p></div></div>
  </body>
</html>
