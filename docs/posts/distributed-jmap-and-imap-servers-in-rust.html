<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/stalwartlabs/jmap-server">Original</a>
    <h1>Show HN: Distributed JMAP and IMAP Servers in Rust</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://github.com/stalwartlabs/jmap-server/actions/workflows/test.yml"><img src="https://github.com/stalwartlabs/jmap-server/actions/workflows/test.yml/badge.svg" alt="Test"/></a>
<a href="https://github.com/stalwartlabs/jmap-server/actions/workflows/build.yml"><img src="https://github.com/stalwartlabs/jmap-server/actions/workflows/build.yml/badge.svg" alt="Build"/></a>
<a href="https://www.gnu.org/licenses/agpl-3.0" rel="nofollow"><img src="https://camo.githubusercontent.com/ff112811173c529c5c1b7ed5ab8dc2fd2d388c2a86b0fd4efb5dd119850fcdb3/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4147504c5f76332d626c75652e737667" alt="License: AGPL v3" data-canonical-src="https://img.shields.io/badge/License-AGPL_v3-blue.svg"/></a>
<a href="https://discord.gg/jtgtCNj66U" rel="nofollow"><img src="https://camo.githubusercontent.com/47f0dbe3b4ccd2cc3f76aff81b090501444b15642b8c74721cae1ba552238e4e/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f3932333631353836333033373339303838393f6c6162656c3d43686174" alt="" data-canonical-src="https://img.shields.io/discord/923615863037390889?label=Chat"/></a>
<a href="https://twitter.com/stalwartlabs" rel="nofollow"><img src="https://camo.githubusercontent.com/2adff3c3fbf787d8832a131b73e58ae967305fa4a7a0572c7eaaef782526a387/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f7374616c776172746c6162733f7374796c653d666c6174" alt="" data-canonical-src="https://img.shields.io/twitter/follow/stalwartlabs?style=flat"/></a></p>
<p dir="auto"><strong>Stalwart JMAP</strong> is an open-source JSON Meta Application Protocol server designed to be secure, fast, robust and scalable.
JMAP is a modern protocol for synchronising data such as mail, calendars, or contacts that makes much more efficient use of network resources.</p>
<p dir="auto">Key features:</p>
<ul dir="auto">
<li><strong>JMAP</strong> full compliance:
<ul dir="auto">
<li>JMAP Core (<a href="https://datatracker.ietf.org/doc/html/rfc8620" rel="nofollow">RFC 8620</a>)</li>
<li>JMAP Mail (<a href="https://datatracker.ietf.org/doc/html/rfc8621" rel="nofollow">RFC 8621</a>)</li>
<li>JMAP over WebSocket (<a href="https://datatracker.ietf.org/doc/html/rfc8887" rel="nofollow">RFC 8887</a>)</li>
</ul>
</li>
<li><strong>IMAP4</strong> full compliance:
<ul dir="auto">
<li>IMAP4rev2 (<a href="https://datatracker.ietf.org/doc/html/rfc9051" rel="nofollow">RFC 9051</a>)</li>
<li>IMAP4rev1 (<a href="https://datatracker.ietf.org/doc/html/rfc3501" rel="nofollow">RFC 3501</a>)</li>
<li>Numerous <a href="https://stalw.art/imap/development/rfc/#imap4-extensions" rel="nofollow">extensions</a> supported.</li>
</ul>
</li>
<li><strong>Robust</strong> storage:
<ul dir="auto">
<li><a href="http://rocksdb.org/" rel="nofollow">RocksDB</a> backend.</li>
<li>Full-text search support available in 17 languages.</li>
<li>Blob storage for raw e-mail messages.</li>
</ul>
</li>
<li><strong>Secure</strong>:
<ul dir="auto">
<li>OAuth 2.0 <a href="https://www.rfc-editor.org/rfc/rfc8628" rel="nofollow">authorization code</a> and <a href="https://www.rfc-editor.org/rfc/rfc8628" rel="nofollow">device authorization</a> flows.</li>
<li>Domain Keys Identified Mail (<a href="https://www.rfc-editor.org/rfc/rfc6376" rel="nofollow">DKIM</a>) message signing.</li>
<li>Access Control Lists (ACLs).</li>
<li>Rate limiting.</li>
<li>Memory safe (thanks to Rust).</li>
</ul>
</li>
<li><strong>Scalable and fault-tolerant</strong>:
<ul dir="auto">
<li>Node autodiscovery and failure detection over gossip protocol.</li>
<li>Replication and cluster consensus over the <a href="https://raft.github.io/" rel="nofollow">Raft</a> protocol.</li>
<li>Read-only replicas.</li>
<li>No third-party replication or cluster coordination software required.</li>
</ul>
</li>
<li>Local Mail Transfer Protocol (<a href="https://datatracker.ietf.org/doc/html/rfc2033" rel="nofollow">LMTP</a>) message ingestion.</li>
</ul>
<h2 dir="auto"><a id="user-content-get-started" aria-hidden="true" href="#get-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Get Started</h2>
<p dir="auto">Install Stalwart JMAP on your server by following the instructions for your platform:</p>
<ul dir="auto">
<li><a href="https://stalw.art/jmap/get-started/linux/" rel="nofollow">Linux / MacOS</a></li>
<li><a href="https://stalw.art/jmap/get-started/windows/" rel="nofollow">Windows</a></li>
<li><a href="https://stalw.art/jmap/get-started/docker/" rel="nofollow">Docker</a></li>
</ul>
<p dir="auto">You may also <a href="https://stalw.art/jmap/development/compile/" rel="nofollow">compile Stalwart JMAP from the source</a>.</p>
<h2 dir="auto"><a id="user-content-support" aria-hidden="true" href="#support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Support</h2>
<p dir="auto">If you are having problems running Stalwart JMAP, you found a bug or just have a question,
do not hesitate to reach us on <a href="https://github.com/stalwartlabs/jmap-server/discussions">Github Discussions</a> or <a href="https://discord.gg/jtgtCNj66U" rel="nofollow">Discord</a>.
Additionally you may become a sponsor to obtain priority support from Stalwart Labs Ltd.</p>
<h2 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h2>
<p dir="auto">Table of Contents</p>
<ul dir="auto">
<li>Get Started
<ul dir="auto">
<li><a href="https://stalw.art/jmap/get-started/linux/" rel="nofollow">Linux / MacOS</a></li>
<li><a href="https://stalw.art/jmap/get-started/windows/" rel="nofollow">Windows</a></li>
<li><a href="https://stalw.art/jmap/get-started/docker/" rel="nofollow">Docker</a></li>
</ul>
</li>
<li>Configuration
<ul dir="auto">
<li><a href="https://stalw.art/jmap/configure/overview/" rel="nofollow">Overview</a></li>
<li><a href="https://stalw.art/jmap/configure/webserver/" rel="nofollow">Web Server</a></li>
<li><a href="https://stalw.art/jmap/configure/database/" rel="nofollow">Database</a></li>
<li><a href="https://stalw.art/jmap/configure/lmtp/" rel="nofollow">LMTP Delivery</a></li>
<li><a href="https://stalw.art/jmap/configure/smtp/" rel="nofollow">SMTP Relay</a></li>
<li><a href="https://stalw.art/jmap/configure/oauth/" rel="nofollow">OAuth Settings</a></li>
<li><a href="https://stalw.art/jmap/configure/jmap/" rel="nofollow">JMAP Settings</a></li>
<li><a href="https://stalw.art/jmap/configure/push/" rel="nofollow">Push Notifications</a></li>
<li><a href="https://stalw.art/jmap/configure/websocket/" rel="nofollow">WebSockets</a></li>
<li><a href="https://stalw.art/jmap/configure/rate-limit/" rel="nofollow">Rate Limiter</a></li>
</ul>
</li>
<li>Management
<ul dir="auto">
<li><a href="https://stalw.art/jmap/manage/overview/" rel="nofollow">Overview</a></li>
<li><a href="https://stalw.art/jmap/manage/accounts/" rel="nofollow">Accounts</a></li>
<li><a href="https://stalw.art/jmap/manage/domains/" rel="nofollow">Domains</a></li>
<li><a href="https://stalw.art/jmap/manage/groups/" rel="nofollow">Groups</a></li>
<li><a href="https://stalw.art/jmap/manage/lists/" rel="nofollow">Mailing Lists</a></li>
<li><a href="https://stalw.art/jmap/manage/acl/" rel="nofollow">Access Control Lists</a></li>
</ul>
</li>
<li>Migration
<ul dir="auto">
<li><a href="https://stalw.art/jmap/migrate/overview/" rel="nofollow">Overview</a></li>
<li><a href="https://stalw.art/jmap/migrate/accounts/" rel="nofollow">Import Accounts</a></li>
<li><a href="https://stalw.art/jmap/migrate/mailboxes/" rel="nofollow">Import Mailboxes</a></li>
</ul>
</li>
<li>Clustering
<ul dir="auto">
<li><a href="https://stalw.art/jmap/cluster/quick-start/" rel="nofollow">Quick Start</a></li>
<li><a href="https://stalw.art/jmap/cluster/gossip/" rel="nofollow">Gossip Protocol</a></li>
<li><a href="https://stalw.art/jmap/cluster/raft/" rel="nofollow">Consensus Protocol</a></li>
<li><a href="https://stalw.art/jmap/cluster/rpc/" rel="nofollow">RPC</a></li>
</ul>
</li>
<li>Development
<ul dir="auto">
<li><a href="https://stalw.art/jmap/development/compile/" rel="nofollow">Compiling</a></li>
<li><a href="https://stalw.art/jmap/development/test/" rel="nofollow">Tests</a></li>
<li><a href="https://stalw.art/jmap/development/rfc/" rel="nofollow">RFCs conformed</a></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-roadmap" aria-hidden="true" href="#roadmap"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Roadmap</h2>
<p dir="auto">The following major features and enhancements are planned for Stalwart JMAP:</p>
<ul dir="auto">
<li>Quota support</li>
<li>Filtering support (Sieve filters as well as other mechanisms)</li>
<li>JMAP Contacts, Calendars and Tasks support (currently IETF drafts)</li>
<li>Performance enhancements</li>
<li>Jepsen testing</li>
</ul>
<h2 dir="auto"><a id="user-content-testing" aria-hidden="true" href="#testing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing</h2>
<h3 dir="auto"><a id="user-content-base-tests" aria-hidden="true" href="#base-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Base tests</h3>
<p dir="auto">The base tests perform basic testing on different functions across the Stalwart JMAP
code base. To run the base test suite execute:</p>

<h3 dir="auto"><a id="user-content-database-tests" aria-hidden="true" href="#database-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Database tests</h3>
<p dir="auto">The database test suite performs a range of tests on the embedded key-value store such as:</p>
<ul dir="auto">
<li>Concurrent insertions.</li>
<li>Database queries.</li>
<li>Concurrent blob insertions and blob expiration.</li>
<li>Log compactions.</li>
</ul>
<p dir="auto">To run the database test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test store_tests -- --ignored"><pre>cargo <span>test</span> store_tests -- --ignored</pre></div>
<h3 dir="auto"><a id="user-content-core-tests" aria-hidden="true" href="#core-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Core tests</h3>
<p dir="auto">The core test suite performs authorization, authentication and JMAP protocol compliance tests such as:</p>
<ul dir="auto">
<li>Access Control Lists (ACL) enforcement.</li>
<li>Authorization and Rate Limiting.</li>
<li>Event Source (JMAP Core).</li>
<li>OAuth authentication.</li>
<li>Push Subscriptions (JMAP Core).</li>
<li>WebSockets (JMAP over WebSocket).</li>
</ul>
<p dir="auto">To run the core test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test jmap_core_tests -- --ignored"><pre>cargo <span>test</span> jmap_core_tests -- --ignored</pre></div>
<h3 dir="auto"><a id="user-content-mail-tests" aria-hidden="true" href="#mail-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mail tests</h3>
<p dir="auto">The mail test suite performs e-mail and JMAP Mail protocol compliance tests such as:</p>
<ul dir="auto">
<li><code>Email/*</code> functionality and compliance.</li>
<li><code>Mailbox/*</code> functionality and compliance.</li>
<li><code>Thread/*</code> functionality and compliance.</li>
<li><code>EmailSubmission/*</code> functionality and compliance.</li>
<li><code>SearchSnippet/get</code> functionality and compliance.</li>
<li><code>VacationResponse/*</code> functionality and compliance.</li>
<li>Message thread id creation.</li>
<li>LMTP message ingestion.</li>
</ul>
<p dir="auto">To run the mail test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test jmap_mail_tests -- --ignored"><pre>cargo <span>test</span> jmap_mail_tests -- --ignored</pre></div>
<h3 dir="auto"><a id="user-content-stress-tests" aria-hidden="true" href="#stress-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stress tests</h3>
<p dir="auto">The stress test suite generates concurrent random insert, get, query, update and delete
operations on different JMAP datatypes to ensure data integrity. To run the stress test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test jmap_stress_tests -- --ignored"><pre>cargo <span>test</span> jmap_stress_tests -- --ignored</pre></div>
<p dir="auto">Another way of stress testing Stalwart JMAP is by using the <a href="https://stalw.art/imap/development/test" rel="nofollow">IMAP stress test tool</a>.</p>
<h3 dir="auto"><a id="user-content-cluster-tests" aria-hidden="true" href="#cluster-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cluster tests</h3>
<p dir="auto">The cluster test suite starts a Stalwart JMAP cluster consisting of five nodes and performs the
following tests:</p>
<ul dir="auto">
<li>Distributed insert, read, update and delete operations.</li>
<li>Distributed e-mail thread merges.</li>
<li>Read replicas.</li>
<li>LMTP ingestion over RPC.</li>
<li>Raft elections.</li>
<li>Raft log conflict resolution.</li>
</ul>
<p dir="auto">To run the cluster test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test cluster_tests -- --ignored"><pre>cargo <span>test</span> cluster_tests -- --ignored</pre></div>
<h3 dir="auto"><a id="user-content-cluster-fuzz" aria-hidden="true" href="#cluster-fuzz"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cluster fuzz</h3>
<p dir="auto">The cluster fuzz test suite starts a Stalwart JMAP cluster consisting of five nodes and attempts
to corrupt the cluster state and/or its data by randomly performimg the following operations:</p>
<ul dir="auto">
<li>Crash current leader.</li>
<li>Crash follower.</li>
<li>Start offline follower.</li>
<li>Start all offline nodes.</li>
<li>Insert record.</li>
<li>Update record.</li>
<li>Delete record.</li>
</ul>
<p dir="auto">Please note that this test runs on a loop and does not stop unless a leader fails to be elected
or a data corruption problem is found. If something goes wrong while running the tests,
all the actions that were executed up to that point will be printed to screen as a JSON structure.
This JSON dump can be later used to reproduce and eventually debug the problem.</p>
<p dir="auto">To run the cluster fuzz test suite execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo test cluster_fuzz -- --ignored"><pre>cargo <span>test</span> cluster_fuzz -- --ignored</pre></div>
<h3 dir="auto"><a id="user-content-cluster-jepsen-tests" aria-hidden="true" href="#cluster-jepsen-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cluster Jepsen tests</h3>
<p dir="auto">Support for Jepsen testing is <a href="https://github.com/stalwartlabs/jmap-server/issues/8" data-hovercard-type="issue" data-hovercard-url="/stalwartlabs/jmap-server/issues/8/hovercard">planned</a> and in the roadmap. Until then, the clustering module will remain in beta.</p>
<h3 dir="auto"><a id="user-content-jmap-test-suite" aria-hidden="true" href="#jmap-test-suite"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>JMAP test suite</h3>
<p dir="auto">Compliance with the JMAP protocol may also be tested using Fastmail&#39;s JMAP-TestSuite:</p>
<ul dir="auto">
<li>Clone the JMAP TestSuite repository:
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/stalwartlabs/jmap-test-suite.git
cd jmap-test-suite/"><pre>git clone https://github.com/stalwartlabs/jmap-test-suite.git
<span>cd</span> jmap-test-suite/</pre></div>
</li>
<li>Install the recommended Perl dependencies:

</li>
<li>Run one of the tests, for example:
<div dir="auto" data-snippet-clipboard-copy-content="JMAP_SERVER_ADAPTER_FILE=eg/stalwart.json perl -I&lt;PATH_TO_PERL_LIB&gt; -I lib t/basic.t"><pre>JMAP_SERVER_ADAPTER_FILE=eg/stalwart.json perl -I<span>&lt;</span>PATH_TO_PERL_LIB<span>&gt;</span> -I lib t/basic.t</pre></div>
</li>
</ul>
<h3 dir="auto"><a id="user-content-fuzz" aria-hidden="true" href="#fuzz"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fuzz</h3>
<p dir="auto">To fuzz Stalwart JMAP server with <code>cargo-fuzz</code> execute:</p>
<div dir="auto" data-snippet-clipboard-copy-content=" $ cargo +nightly fuzz run jmap_server"><pre> $ cargo +nightly fuzz run jmap_server</pre></div>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Licensed under the terms of the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html" rel="nofollow">GNU Affero General Public License</a> as published by
the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
See <a href="https://github.com/stalwartlabs/jmap-server/blob/main/LICENSE">LICENSE</a> for more details.</p>
<p dir="auto">You can be released from the requirements of the AGPLv3 license by purchasing
a commercial license. Please contact <a href="mailto:licensing@stalw.art">licensing@stalw.art</a> for more details.</p>
<h2 dir="auto"><a id="user-content-copyright" aria-hidden="true" href="#copyright"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Copyright</h2>
<p dir="auto">Copyright (C) 2020-2022, Stalwart Labs Ltd.</p>
</article>
          </div></div>
  </body>
</html>
