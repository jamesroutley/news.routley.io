<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/chr15m/runprompt">Original</a>
    <h1>Show HN: Runprompt â€“ run .prompt files from the command line</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A single-file Python script for running <a href="https://github.com/google/dotprompt">.prompt files</a>.</p>
<p dir="auto"><a href="#quick-start">Quick start</a> | <a href="#examples">Examples</a> | <a href="#configuration">Configuration</a> | <a href="#providers">Providers</a></p>

<div dir="auto" data-snippet-clipboard-copy-content="curl -O https://raw.githubusercontent.com/chr15m/runprompt/main/runprompt
chmod +x runprompt"><pre>curl -O https://raw.githubusercontent.com/chr15m/runprompt/main/runprompt
chmod +x runprompt</pre></div>
<p dir="auto">Create <code>hello.prompt</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="---
model: anthropic/claude-sonnet-4-20250514
---
Say hello to {{name}}!"><pre><span>---</span>
<span><span>model</span>: <span>anthropic/claude-sonnet-4-20250514</span></span>
<span>---</span>
Say hello to <span>{{</span><span>name</span><span>}}</span>!</pre></div>
<p dir="auto">Run it:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export ANTHROPIC_API_KEY=&#34;your-key&#34;
echo &#39;{&#34;name&#34;: &#34;World&#34;}&#39; | ./runprompt hello.prompt"><pre><span>export</span> ANTHROPIC_API_KEY=<span><span>&#34;</span>your-key<span>&#34;</span></span>
<span>echo</span> <span><span>&#39;</span>{&#34;name&#34;: &#34;World&#34;}<span>&#39;</span></span> <span>|</span> ./runprompt hello.prompt</pre></div>

<p dir="auto">In addition to the following, see the <a href="https://thewitchofendor.com/chr15m/runprompt/blob/main/tests">tests folder</a> for more example <code>.prompt</code> files.</p>

<div dir="auto" data-snippet-clipboard-copy-content="---
model: anthropic/claude-sonnet-4-20250514
---
Summarize this text: {{STDIN}}"><pre><span>---</span>
<span><span>model</span>: <span>anthropic/claude-sonnet-4-20250514</span></span>
<span>---</span>
Summarize this text: <span>{{</span><span>STDIN</span><span>}}</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="cat article.txt | ./runprompt summarize.prompt"><pre>cat article.txt <span>|</span> ./runprompt summarize.prompt</pre></div>
<p dir="auto">The special <code>{{STDIN}}</code> variable always contains the raw stdin as a string.</p>

<p dir="auto">Extract structured data using an output schema:</p>
<div dir="auto" data-snippet-clipboard-copy-content="---
model: anthropic/claude-sonnet-4-20250514
input:
  schema:
    text: string
output:
  format: json
  schema:
    name?: string, the person&#39;s name
    age?: number, the person&#39;s age
    occupation?: string, the person&#39;s job
---
Extract info from: {{text}}"><pre><span>---</span>
<span><span>model</span>: <span>anthropic/claude-sonnet-4-20250514</span></span>
<span><span>input</span>:</span>
<span>  <span>schema</span>:</span>
<span>    <span>text</span>: <span>string</span></span>
<span><span>output</span>:</span>
<span>  <span>format</span>: <span>json</span></span>
<span>  <span>schema</span>:</span>
<span>    <span>name?</span>: <span>string, the person&#39;s name</span></span>
<span>    <span>age?</span>: <span>number, the person&#39;s age</span></span>
<span>    <span>occupation?</span>: <span>string, the person&#39;s job</span></span>
<span>---</span>
Extract info from: <span>{{</span><span>text</span><span>}}</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="echo &#34;John is a 30 year old teacher&#34; | ./runprompt extract.prompt
# {&#34;name&#34;: &#34;John&#34;, &#34;age&#34;: 30, &#34;occupation&#34;: &#34;teacher&#34;}"><pre><span>echo</span> <span><span>&#34;</span>John is a 30 year old teacher<span>&#34;</span></span> <span>|</span> ./runprompt extract.prompt
<span><span>#</span> {&#34;name&#34;: &#34;John&#34;, &#34;age&#34;: 30, &#34;occupation&#34;: &#34;teacher&#34;}</span></pre></div>
<p dir="auto">Fields ending with <code>?</code> are optional. The format is <code>field: type, description</code>.</p>

<p dir="auto">Pipe structured output between prompts:</p>
<div dir="auto" data-snippet-clipboard-copy-content="echo &#34;John is 30&#34; | ./runprompt extract.prompt | ./runprompt generate-bio.prompt"><pre><span>echo</span> <span><span>&#34;</span>John is 30<span>&#34;</span></span> <span>|</span> ./runprompt extract.prompt <span>|</span> ./runprompt generate-bio.prompt</pre></div>
<p dir="auto">The JSON output from the first prompt becomes template variables in the second.</p>

<p dir="auto">Override any frontmatter value from the command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="./runprompt --model anthropic/claude-haiku-4-20250514 hello.prompt
./runprompt --name &#34;Alice&#34; hello.prompt"><pre>./runprompt --model anthropic/claude-haiku-4-20250514 hello.prompt
./runprompt --name <span><span>&#34;</span>Alice<span>&#34;</span></span> hello.prompt</pre></div>


<p dir="auto">Set API keys for your providers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export ANTHROPIC_API_KEY=&#34;...&#34;
export OPENAI_API_KEY=&#34;...&#34;
export GOOGLE_API_KEY=&#34;...&#34;
export OPENROUTER_API_KEY=&#34;...&#34;"><pre><span>export</span> ANTHROPIC_API_KEY=<span><span>&#34;</span>...<span>&#34;</span></span>
<span>export</span> OPENAI_API_KEY=<span><span>&#34;</span>...<span>&#34;</span></span>
<span>export</span> GOOGLE_API_KEY=<span><span>&#34;</span>...<span>&#34;</span></span>
<span>export</span> OPENROUTER_API_KEY=<span><span>&#34;</span>...<span>&#34;</span></span></pre></div>

<p dir="auto">Override any frontmatter value via environment variables prefixed with <code>RUNPROMPT_</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export RUNPROMPT_MODEL=&#34;anthropic/claude-haiku-4-20250514&#34;
./runprompt hello.prompt"><pre><span>export</span> RUNPROMPT_MODEL=<span><span>&#34;</span>anthropic/claude-haiku-4-20250514<span>&#34;</span></span>
./runprompt hello.prompt</pre></div>
<p dir="auto">This is useful for setting defaults across multiple prompt runs.</p>

<p dir="auto">Use <code>-v</code> to see request/response details:</p>
<div dir="auto" data-snippet-clipboard-copy-content="./runprompt -v hello.prompt"><pre>./runprompt -v hello.prompt</pre></div>

<p dir="auto">Models are specified as <code>provider/model-name</code>:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Provider</th>
<th>Model format</th>
<th>API key env var</th>
</tr>
</thead>
<tbody>
<tr>
<td>Anthropic</td>
<td><code>anthropic/claude-sonnet-4-20250514</code></td>
<td><code>ANTHROPIC_API_KEY</code></td>
</tr>
<tr>
<td>OpenAI</td>
<td><code>openai/gpt-4o</code></td>
<td><code>OPENAI_API_KEY</code></td>
</tr>
<tr>
<td>Google AI</td>
<td><code>googleai/gemini-1.5-pro</code></td>
<td><code>GOOGLE_API_KEY</code></td>
</tr>
<tr>
<td>OpenRouter</td>
<td><code>openrouter/anthropic/claude-sonnet-4-20250514</code></td>
<td><code>OPENROUTER_API_KEY</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a href="https://openrouter.ai" rel="nofollow">OpenRouter</a> provides access to models from many providers (Anthropic, Google, Meta, etc.) through a single API key.</p>
</article></div></div>
  </body>
</html>
