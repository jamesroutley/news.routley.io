<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.zachdaniel.dev/p/serialization-is-the-secret">Original</a>
    <h1>Serialization Is the Secret</h1>
    
    <div id="readability-page-1" class="page"><div><div dir="auto"><p><span>One of the major elements that sets Elixir apart from most other programming languages is </span><em>immutability. </em><span>But what does that </span><em>actually</em><span> mean? What does it do for us?</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp" width="360" height="360" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/c0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1024,&#34;width&#34;:1024,&#34;resizeWidth&#34;:360,&#34;bytes&#34;:444248,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/webp&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:true,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc0497788-9426-45ac-abe6-4ffb3a6ee35f_1024x1024.webp 1456w" sizes="100vw" fetchpriority="high"/></picture></div></a></figure></div><p><span>The word immutable is defined by Merriam-Webster as ‚Äúnot capable of or susceptible to change‚Äù. If nothing ever </span><em>observes</em><span> a change, it may as well have not happened anyway, so we will be discussing mutation as two discrete concepts: mutation, and the </span><em>observation</em><span> of mutation.</span></p><p>Here is a simple example of a mutable program in Javascript.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png" width="346" height="160" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/f221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:160,&#34;width&#34;:346,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:10308,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff221a286-b09d-4853-8a79-06ac9cca68a3_346x160.png 1456w" sizes="100vw"/></picture></div></a></figure></div><p>Here is a simple example of an immutable program in Elixir.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png" width="344" height="147.2" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:184,&#34;width&#34;:430,&#34;resizeWidth&#34;:344,&#34;bytes&#34;:9405,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2607fa7c-5a27-4519-9368-77e0f77a04ce_430x184.png 1456w" sizes="100vw"/></picture></div></a></figure></div><p><span>They look very similar. And in fact, they both have consistent behavior if we next line of the program was to print out the value of counter, we are guaranteed in both cases to see the value </span><code>1 </code><span>printed. It would </span><em>appear</em><span> that the </span><em>observation</em><span> of variables behaves the same.</span></p><p><span>Before I explain the benefits of immutability, it‚Äôs important to disambiguate something that folks often initially </span><em>believe</em><span> is mutation.</span></p><p><span>In the Javascript example, our </span><em>reference</em><span> to the counter is </span><em><span>mutated</span><strong>. </strong></em><span>However, in the Elixir example, what we‚Äôve done is </span><em>rebound</em><span> the variable. No pointers or values have changed. In Javascript, primitive values are immutable, but a variable‚Äôs reference is not. In later examples we‚Äôll see how Javascript allows mutating other values i.e objects, called reference values.</span></p><p><span>The first is an actual mutation of memory. The second is an allocation of new memory. The old memory is unaffected. One could argue that this is a form of mutation. This mutation, however, is </span><em>syntactic.</em></p><p><span>This is a convenience that the language provides. When you </span><em>rebind</em><span> a variable, it is equivalent to creating a new variable, and altering references to that variable in the same scope to use that new name instead. Let‚Äôs look at what this means in practice. </span></p><p>In Javascript, we mutate the actual underlying memory. What this looks like in practice:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png" width="386" height="282.8448275862069" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:340,&#34;width&#34;:464,&#34;resizeWidth&#34;:386,&#34;bytes&#34;:21240,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F357daaa5-a1fb-4ee6-9ff7-b8c53b89ca38_464x340.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>Notice how the value for </span><code>counter </code><span>is now </span><code>1</code><span>. In Elixir, however, this behaves differently.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png" width="386" height="282.8448275862069" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/a19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:340,&#34;width&#34;:464,&#34;resizeWidth&#34;:386,&#34;bytes&#34;:21725,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa19b06cb-a7ba-4875-be09-91ddcd358109_464x340.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>How can this be? We‚Äôve clearly reassigned </span><code>counter</code><span>. The reason for this is that </span><em>rebinding</em><span> is equivalent to creating a new variable. Just like in Javascript, a variable is not available outside of the scope it was defined in. The Elixir code is </span><em>effectively </em><span>rewritten to this:</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png" width="378" height="267.75" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:340,&#34;width&#34;:480,&#34;resizeWidth&#34;:378,&#34;bytes&#34;:21960,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8a248a51-e7f9-4400-a2c8-224c0e7ea6c3_480x340.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>In this way, no reference to a given variable can ever truly be mutated in Elixir. You only ever create new bindings with new values. There is just a language level construct that allows you to reuse the same variable name.</p><p><span>Now that you understand that rebinding isn‚Äôt mutation, you can see the fact that the value of a given variable will </span><em>never</em><span> change. This lends itself to well to understandable code. For example, in Javascript, objects are mutable, and are passed to functions by reference. Which means that calling functions can do ‚Äúsurprising stuff‚Äù:</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png" width="420" height="314.6488294314381" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:448,&#34;width&#34;:598,&#34;resizeWidth&#34;:420,&#34;bytes&#34;:48283,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e0d49d4-1c1e-4bd8-bca5-aaebe67b82ef_598x448.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>After executing this code, </span><code>profile</code><span> has </span><em>mutated</em><span>. Before calling </span><code>newScore</code><span>, </span><code>profile.score</code><span> was </span><code>3</code><span>. Afterwards, it is </span><code>7. </code><span>This would be a pretty beginner mistake to make, but it is still something that you have to contend with. You will always have to consider using things like </span><code>Object.freeze</code><span> or </span><code>Object.seal</code><span>, or just trusting that your other code makes no mutations to the parameters that you pass in.</span></p><p><span>In Elixir, it is </span><em>just not possible</em><span> for that to happen. If I call a function, it can do all kinds of side effects, but it will </span><em>never</em><span> be able to affect the values of the variables that are currently in scope for me. </span></p><p><span>This is where </span><em>observation</em><span> of mutation comes into play. In the Javascript example, mutation can be observed effectively at any time. If I started an async function, for example, and passed in a mutable variable, it could change </span><em>at any time</em><span>.</span></p><p><span>And I don‚Äôt mean dealing with time zones. Although maybe </span><em>that</em><span> actually is the most frustrating part of programming.</span></p><p>What I mean is handling the passage of time. Let‚Äôs go back to our Javascript example, and introduce some concurrency. When concurrency comes into play, we can no longer think in terms of a discrete, causal series of events. Instead, we have to think of ‚Äústate over time‚Äù.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png" width="496" height="323.6807511737089" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:556,&#34;width&#34;:852,&#34;resizeWidth&#34;:496,&#34;bytes&#34;:74836,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a5a6f6d-decf-4acd-828d-266aed25d805_852x556.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>The value of </span><code>profile.score</code><span> at the end of this program is </span><em>entirely dependent</em><span> on how long it takes to </span><code>doSomethingElse(). </code><span>That means that sequential runs of this program can produce different results. There are absolutely steps to mitigate this. For instance, you can </span><code>await</code><span> newScore. You can make </span><code>doSomethingElse()</code><span> an </span><code>async</code><span> function, and await them both using </span><code>Promise.all()</code><span>.</span></p><p><span>But imagine that you had passed `profile` into both of those now-async functions? And each one modified it at a different time? Handling race conditions like this can be very difficult, and oftentimes immutable data structures are </span><em>the </em><span>solution. You can use things like locks and mutexes, but that is just as easy to get wrong as any other thing.</span></p><p><span>So, to summarize, mutation can </span><em>occur</em><span> at any time and can also be </span><em>observed</em><span> at any time in Javascript.</span></p><p><span>In Elixir, everything runs in a process. It is a garbage collected language. Each process has its own stack, and its own heap. This garbage collection means that the memory location of a variable can technically </span><a href="https://www.erlang.org/doc/apps/erts/garbagecollection.html#the-collector" rel="">change</a><span> at any time. So from a pedantic standpoint, you could have two variables whose memory location swaps at some point while running your program. This is transparent to the programmer (which is good). </span></p><p>With this in mind, an argument could be made that anything stored in a process‚Äôs heap is mutable state. For example, let‚Äôs take a simple, GenServer-backed counter in Elixir. </p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png" width="494" height="370.22121896162525" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/d0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:664,&#34;width&#34;:886,&#34;resizeWidth&#34;:494,&#34;bytes&#34;:85220,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd0bf4247-2955-4117-a73e-8a10f19a0c6e_886x664.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>When I increment this counter, new memory is allocated for the new number to live in. When I access this counter, I‚Äôm reading from that memory location. At some point, a garbage collection comes through, cleaning up the references to the old variables, and potentially moving the location of the new variable in memory.</p><p><span>So this process, while indirect, actually has all of the hallmarks of </span><em>mutation</em><span>! The same variable changing its location in memory in a way that is completely out of the developer‚Äôs control. Other variables being removed from memory or moved around at any time. SpoOoOoky!</span></p><p><span>So Elixir is mutable then? By some definitions, sure. In Elixir, </span><em>values</em><span> are immutable, but ultimately there is state, somewhere in our system. And it even changes over time! So what gives? </span></p><p>There are two secret sauces in the Elixir restaurant. They are:</p><ul><li><p>Function calling as the only way to observe mutating state</p></li></ul><ul><li><p>Serialized access to mutating state</p></li></ul><p>Something we have available to us in Elixir is the ‚Äúprocess dictionary‚Äù. By many definitions, the process dictionary is mutable state. I would argue that, from the perspective of our program, it is not more or less mutable than any other thing. The reason for this, is that in Elixir, all mutating state requires calling a function to observe it.</p><p><span>Want to know the current time? You must call </span><code>DateTime.now(). </code><span>You can change the process dictionary with </span><code>Process.put</code><span>. You can even call a function that makes this change. Lets look at an example based on the Javascript ‚Äúmutating profile‚Äù example from before:</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png" width="456" height="338.048" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/e76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:556,&#34;width&#34;:750,&#34;resizeWidth&#34;:456,&#34;bytes&#34;:73977,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe76279ea-529b-4484-ae4b-20c3b84e83f1_750x556.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>Here we are ‚Äúmutating‚Äù the process dictionary state. It was one thing, and now it is something else. However, we cannot </span><em>observe</em><span> this mutation without calling </span><code>Process.get. </code><span>The </span><code>profile </code><span>variable will always, unambiguously, equal </span><code>%{score: 3}</code><span>. The only way that could change is by reassigning the variable, and calling a function. For example:</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png" width="418" height="394.1501501501501" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:628,&#34;width&#34;:666,&#34;resizeWidth&#34;:418,&#34;bytes&#34;:81236,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null,&#34;isProcessing&#34;:false}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F794bfb52-1460-4f10-9ef4-335db0233f52_666x628.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>Our variable values are always safe in Elixir ü•≥</p><p>This is the most important part of the whole equation. We‚Äôve shown that we can accomplish mutating state in Elixir, albeit in a different way than you might have seen elsewhere. But what about the race condition example from before? We can‚Äôt really write an equivalent example to that in Elixir. Our concurrency primitive is to start another process, which has its own isolated process dictionary. There is no way to modify another process‚Äôs state.</p><p>So we‚Äôll base this on our counter example, which is how you‚Äôd actually do This Kind Of Thing‚Ñ¢ in Elixir. Each process handles messages serially, one-at-a-time. This means that, from the perspective of the counter, there is no such thing as a race condition! And callers, in order to interact with the counter, must call functions to send it a message, or to observe its changing state. Nothing the counter does can modify the state of the callers.</p><p><strong>By forcing the mutation of state to be serialized through a process‚Äôs mailbox, and limiting the observation of mutating state to calling functions, our programs are more understandable, and less surprising.</strong></p><p>There is a lot more to say on this topic, and I fully intend to do so! Understandability and predictability are not the only benefits of the concepts described above. Many of the benefits only even come into the picture when it‚Äôs time to scale, or to model graceful failure of our application components, and its those properties that I‚Äôll be writing about next.</p></div></div></div>
  </body>
</html>
