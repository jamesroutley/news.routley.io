<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.avestura.dev/blog/hide-a-photo-inside-another-photo">Original</a>
    <h1>Hide a photo inside another photo</h1>
    
    <div id="readability-page-1" class="page"><div><p>Have you ever thought of hiding a photo inside another photo? So when you share the photo,
it looks like a single ordinary photo,
but it&#39;s actually two photos. One of them is hidden inside of the other,
and it can only be revealed using an external tool.</p>
<p><img src="https://www.avestura.dev/static/images/posts/hide-photo/mark-send-to-julia.svg" alt="Mark sends photo to Julia"/></p><h2 id="photos-as-matrices"><a href="#photos-as-matrices" aria-hidden="true" tabindex="-1"><span></span></a>Photos as matrices</h2>
<p>To be able to manipulate photos and embedding things inside them, we first need to know
how they are represented and stored. One way to look at the photos is to see them as a
mathematical matrix, where every cell of the matrix represents a pixel, and the value
of it is the color of that pixel/cell.</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>P</mi><mrow><mi>m</mi><mo separator="true">,</mo><mi>n</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mo separator="true">,</mo><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mo separator="true">,</mo><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mo separator="true">,</mo><mi>n</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mo separator="true">,</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mo separator="true">,</mo><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>m</mi><mo separator="true">,</mo><mi>n</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation*}
P_{m,n} = 
\begin{pmatrix}
a_{1,1} &amp; a_{1,2} &amp; \cdots &amp; a_{1,n} \\
a_{2,1} &amp; a_{2,2} &amp; \cdots &amp; a_{2,n} \\
\vdots  &amp; \vdots  &amp; \ddots &amp; \vdots  \\
a_{m,1} &amp; a_{m,2} &amp; \cdots &amp; a_{m,n} 
\end{pmatrix}
\end{equation*}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>P</span><span><span><span><span><span><span></span><span><span><span>m</span><span>,</span><span>n</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span></span><span>=</span><span></span><span><span><span><span><span><span><span><span></span><span><span>⎝</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="1.816em" style="width:0.875em" viewBox="0 0 875 1816" preserveAspectRatio="xMinYMin"><path d="M291 0 H417 V1816 H291z M291 0 H417 V1816 H291z"></path></svg></span></span><span><span></span><span><span>⎛</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span><span><span><span><span><span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>1</span><span>,</span><span>1</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>2</span><span>,</span><span>1</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>⋮</span><span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>m</span><span>,</span><span>1</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>1</span><span>,</span><span>2</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>2</span><span>,</span><span>2</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>⋮</span><span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>m</span><span>,</span><span>2</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>⋯</span></span></span><span><span></span><span><span>⋯</span></span></span><span><span></span><span><span>⋱</span></span></span><span><span></span><span><span>⋯</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>1</span><span>,</span><span>n</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>2</span><span>,</span><span>n</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span><span><span></span><span><span><span>⋮</span><span></span></span></span></span><span><span></span><span><span><span>a</span><span><span><span><span><span><span></span><span><span><span>m</span><span>,</span><span>n</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span><span></span><span><span>⎠</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="1.816em" style="width:0.875em" viewBox="0 0 875 1816" preserveAspectRatio="xMinYMin"><path d="M457 0 H583 V1816 H457z M457 0 H583 V1816 H457z"></path></svg></span></span><span><span></span><span><span>⎞</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>For example for a matrix like this:</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>P</mi><mrow><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>134</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>47</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>255</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>255</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>193</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>47</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation*}
P_{3,3} = 
\begin{pmatrix}
134 &amp; 47 &amp; 0 \\
255 &amp; 255 &amp; 0 \\
193  &amp; 47  &amp; 0
\end{pmatrix}
\end{equation*}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>P</span><span><span><span><span><span><span></span><span><span><span>3</span><span>,</span><span>3</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span></span><span>=</span><span></span><span><span><span><span><span><span><span><span></span><span><span>⎝</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M291 0 H417 V16 H291z M291 0 H417 V16 H291z"></path></svg></span></span><span><span></span><span><span>⎛</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span><span><span><span><span><span><span><span></span><span><span>134</span></span></span><span><span></span><span><span>255</span></span></span><span><span></span><span><span>193</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>47</span></span></span><span><span></span><span><span>255</span></span></span><span><span></span><span><span>47</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>0</span></span></span><span><span></span><span><span>0</span></span></span><span><span></span><span><span>0</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span><span></span><span><span>⎠</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M457 0 H583 V16 H457z M457 0 H583 V16 H457z"></path></svg></span></span><span><span></span><span><span>⎞</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>We&#39;ll get a photo like this:</p>
<p><img src="https://www.avestura.dev/static/images/posts/hide-photo/photo-grayscale.svg" alt="Mark sends photo to Julia"/></p><p>As you can see in the matrix and the photo, the closer the value is to <code>255</code> the whiter the pixel becomes. <code>0</code> means black, and anything
between <code>0</code> and <code>255</code> describes a shade of gray.</p>
<h2 id="photos-as-matrices-of-bits"><a href="#photos-as-matrices-of-bits" aria-hidden="true" tabindex="-1"><span></span></a>Photos as matrices of bits</h2>
<p>We&#39;ve already presented our photos as a bunch of matrices. Lets push our nerdiness a little bit
further and represent value of each cell using binaries, instead of decimals (I swear it
will come in handy later). The same photo we&#39;ve seen before will be represented using this matrix:</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>P</mi><mrow><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10000110</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00101111</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000000</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11111111</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11111111</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000000</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11000001</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00101111</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000000</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation*}
P_{3,3} = 
\begin{pmatrix}
10000110 &amp; 00101111 &amp; 00000000 \\
11111111 &amp; 11111111 &amp; 00000000 \\
11000001 &amp; 00101111 &amp; 00000000
\end{pmatrix}
\end{equation*}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>P</span><span><span><span><span><span><span></span><span><span><span>3</span><span>,</span><span>3</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span></span><span>=</span><span></span><span><span><span><span><span><span><span><span></span><span><span>⎝</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M291 0 H417 V16 H291z M291 0 H417 V16 H291z"></path></svg></span></span><span><span></span><span><span>⎛</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span><span><span><span><span><span><span><span></span><span><span>10000110</span></span></span><span><span></span><span><span>11111111</span></span></span><span><span></span><span><span>11000001</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>00101111</span></span></span><span><span></span><span><span>11111111</span></span></span><span><span></span><span><span>00101111</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>00000000</span></span></span><span><span></span><span><span>00000000</span></span></span><span><span></span><span><span>00000000</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span><span></span><span><span>⎠</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M457 0 H583 V16 H457z M457 0 H583 V16 H457z"></path></svg></span></span><span><span></span><span><span>⎞</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Now let&#39;s find out what happens to the photo if we change the least significant bit
(LSB, aka the rightmost bit). So I&#39;m gonna swap all of the LSBs and see how the new matrix
and the photo will look like:</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>P</mi><mrow><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10000111</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00101110</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000001</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11111110</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11111110</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000001</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11000000</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00101110</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>00000001</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation*}
P_{3,3} = 
\begin{pmatrix}
10000111 &amp; 00101110 &amp; 00000001 \\
11111110 &amp; 11111110 &amp; 00000001 \\
11000000 &amp; 00101110 &amp; 00000001
\end{pmatrix}
\end{equation*}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>P</span><span><span><span><span><span><span></span><span><span><span>3</span><span>,</span><span>3</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span></span><span>=</span><span></span><span><span><span><span><span><span><span><span></span><span><span>⎝</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M291 0 H417 V16 H291z M291 0 H417 V16 H291z"></path></svg></span></span><span><span></span><span><span>⎛</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span><span><span><span><span><span><span><span></span><span><span>10000111</span></span></span><span><span></span><span><span>11111110</span></span></span><span><span></span><span><span>11000000</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>00101110</span></span></span><span><span></span><span><span>11111110</span></span></span><span><span></span><span><span>00101110</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>00000001</span></span></span><span><span></span><span><span>00000001</span></span></span><span><span></span><span><span>00000001</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span><span></span><span><span>⎠</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M457 0 H583 V16 H457z M457 0 H583 V16 H457z"></path></svg></span></span><span><span></span><span><span>⎞</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><img src="https://www.avestura.dev/static/images/posts/hide-photo/photo-grayscale-swapped.svg" alt="Mark sends photo to Julia"/></p><p>Can your eyes detect any changes in the result photo? I assume no, it surely looks like the previous photo
(unless you&#39;ve got supernatural eyes), because we&#39;ve
only changed a single bit with the least significance.
With this basic trick we can embed a photo inside another photo without anyone noticing that something is a
little bit off (pun intended).</p>
<h2 id="emdeb-the-other-photo"><a href="#emdeb-the-other-photo" aria-hidden="true" tabindex="-1"><span></span></a>Emdeb the other photo</h2>
<p>For embedding the other photo, we need to replace every LSB of the main photo with every single bit of the
hidden photo, which means the hidden photo has to be smaller than the main photo in size.</p>
<p><img src="https://www.avestura.dev/static/images/posts/hide-photo/small-and-large-photo.svg" alt="Mark sends photo to Julia"/></p><p>But how much smaller shall the hidden photo be? For a visible photo of size <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>∗</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n * m</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>n</span><span></span><span>∗</span><span></span></span><span><span></span><span>m</span></span></span></span></span> there are <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>n</mi><mi>m</mi></mrow><mn>8</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{nm}{8}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>8</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>nm</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span></span></span> LSBs,
which means we can have a hidden photo of the size <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mfrac><mrow><mi>n</mi><mi>m</mi></mrow><mn>8</mn></mfrac></msqrt><mo>∗</mo><msqrt><mfrac><mrow><mi>n</mi><mi>m</mi></mrow><mn>8</mn></mfrac></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\frac{nm}{8}} * \sqrt{\frac{nm}{8}}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span><span></span><span><span><span><span><span><span></span><span><span><span>8</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>nm</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span>∗</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span><span></span><span><span><span><span><span><span></span><span><span><span>8</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>nm</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"></path></svg></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span> inside the visible photo.
As an example, for a visible photo of the size <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mo>∗</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">1000 * 1000</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>1000</span><span></span><span>∗</span><span></span></span><span><span></span><span>1000</span></span></span></span></span> we have:</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msqrt><mfrac><mrow><mn>1000</mn><mo>∗</mo><mn>1000</mn></mrow><mn>8</mn></mfrac></msqrt><mo>=</mo><msqrt><mfrac><mn>1000000</mn><mn>8</mn></mfrac></msqrt><mo>=</mo><msqrt><mn>125000</mn></msqrt><mo>=</mo><mn>353.553...</mn></mrow><annotation encoding="application/x-tex">\sqrt{\frac{1000 * 1000}{8}} = \sqrt{\frac{1000000}{8}} = \sqrt{125000} = 353.553...</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span></span><span><span><span></span><span><span><span><span><span><span></span><span><span>8</span></span></span><span><span></span><span></span></span><span><span></span><span><span>1000</span><span></span><span>∗</span><span></span><span>1000</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewBox="0 0 400000 2592" preserveAspectRatio="xMinYMin slice"><path d="M424,2478
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l0 -0c4,-6.7,10,-10,18,-10 H400000
v40H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M1001 80
h400000v40h-400000z"></path></svg></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span><span></span><span><span><span><span><span><span></span><span><span>8</span></span></span><span><span></span><span></span></span><span><span></span><span><span>1000000</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="2.48em" viewBox="0 0 400000 2592" preserveAspectRatio="xMinYMin slice"><path d="M424,2478
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l0 -0c4,-6.7,10,-10,18,-10 H400000
v40H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M1001 80
h400000v40h-400000z"></path></svg></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span><span><span><span><span></span><span><span>125000</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"></path></svg></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>353.553...</span></span></span></span></span></p>
<p>That means we can hide a photo with the size of <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>353</mn><mo>∗</mo><mn>353</mn></mrow><annotation encoding="application/x-tex">353 * 353</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>353</span><span></span><span>∗</span><span></span></span><span><span></span><span>353</span></span></span></span></span> inside of a host photo with size of <span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mo>∗</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">1000 * 1000</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>1000</span><span></span><span>∗</span><span></span></span><span><span></span><span>1000</span></span></span></span></span>.</p>
<h2 id="rgb-photos"><a href="#rgb-photos" aria-hidden="true" tabindex="-1"><span></span></a>RGB Photos</h2>
<p>In colorful photos, every pixel of the photo is represented by three matrices.
Red matrix, Green matrix, and the Blue matrix. Instead of 3 different matrices, you might also think of it
as a single matrix with a tuple of 3 values, all ranging from 0 to 255.</p>
<p><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.16em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>P</mi><mrow><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>12</mn><mo separator="true">,</mo><mn>20</mn><mo separator="true">,</mo><mn>133</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>15</mn><mo separator="true">,</mo><mn>47</mn><mo separator="true">,</mo><mn>255</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>255</mn><mo separator="true">,</mo><mn>255</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>210</mn><mo separator="true">,</mo><mn>20</mn><mo separator="true">,</mo><mn>230</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>21</mn><mo separator="true">,</mo><mn>14</mn><mo separator="true">,</mo><mn>133</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>255</mn><mo separator="true">,</mo><mn>255</mn><mo separator="true">,</mo><mn>255</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>80</mn><mo separator="true">,</mo><mn>50</mn><mo separator="true">,</mo><mn>90</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>96</mn><mo separator="true">,</mo><mn>68</mn><mo separator="true">,</mo><mn>160</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo stretchy="false">(</mo><mn>140</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>130</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{equation*}
P_{3,3} = 
\begin{pmatrix}
(12, 20, 133) &amp; (15, 47, 255) &amp; (255, 255, 0) \\
(210, 20, 230) &amp; (21, 14, 133) &amp; (255, 255, 255) \\
(80, 50, 90) &amp; (96, 68, 160) &amp; (140, 0, 130)
\end{pmatrix}
\end{equation*}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span><span></span><span><span><span>P</span><span><span><span><span><span><span></span><span><span><span>3</span><span>,</span><span>3</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span></span><span>=</span><span></span><span><span><span><span><span><span><span><span></span><span><span>⎝</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M291 0 H417 V16 H291z M291 0 H417 V16 H291z"></path></svg></span></span><span><span></span><span><span>⎛</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span><span><span><span><span><span><span><span><span></span><span><span>(</span><span>12</span><span>,</span><span></span><span>20</span><span>,</span><span></span><span>133</span><span>)</span></span></span><span><span></span><span><span>(</span><span>210</span><span>,</span><span></span><span>20</span><span>,</span><span></span><span>230</span><span>)</span></span></span><span><span></span><span><span>(</span><span>80</span><span>,</span><span></span><span>50</span><span>,</span><span></span><span>90</span><span>)</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>(</span><span>15</span><span>,</span><span></span><span>47</span><span>,</span><span></span><span>255</span><span>)</span></span></span><span><span></span><span><span>(</span><span>21</span><span>,</span><span></span><span>14</span><span>,</span><span></span><span>133</span><span>)</span></span></span><span><span></span><span><span>(</span><span>96</span><span>,</span><span></span><span>68</span><span>,</span><span></span><span>160</span><span>)</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span><span></span><span><span><span><span><span><span></span><span><span>(</span><span>255</span><span>,</span><span></span><span>255</span><span>,</span><span></span><span>0</span><span>)</span></span></span><span><span></span><span><span>(</span><span>255</span><span>,</span><span></span><span>255</span><span>,</span><span></span><span>255</span><span>)</span></span></span><span><span></span><span><span>(</span><span>140</span><span>,</span><span></span><span>0</span><span>,</span><span></span><span>130</span><span>)</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span><span></span><span><span>⎠</span></span></span><span><span></span><span><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="0.016em" style="width:0.875em" viewBox="0 0 875 16" preserveAspectRatio="xMinYMin"><path d="M457 0 H583 V16 H457z M457 0 H583 V16 H457z"></path></svg></span></span><span><span></span><span><span>⎞</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Our approach to hide the photo still works in this case. You just need to replace all the LSBs for every matrix of every cell.</p>
<h2 id="png-jpeg-and-compressions"><a href="#png-jpeg-and-compressions" aria-hidden="true" tabindex="-1"><span></span></a>PNG, JPEG, and compressions</h2>
<p>As you might already know, some photo formats (like JPEG) heavily compress the source image
using different mathematical approaches (e.g. <a target="_blank" rel="noopener noreferrer" href="https://en.wikipedia.org/wiki/Haar_wavelet">Haar wavelet</a>).
So you might ask what happens to the hidden photo in that case? Well, the
hidden photo will most likely be destroyed and you&#39;ll see a bunch of noises after trying to
reveal your secret. But there are other formats like PNG that preserve your photo as is, and you
can try this trick using those formats.</p>
<h2 id="implementation"><a href="#implementation" aria-hidden="true" tabindex="-1"><span></span></a>Implementation</h2>
<p>I&#39;ve implemented this method long ago back when I was a bachelor student. You might want to check it out at
<a target="_blank" rel="noopener noreferrer" href="https://github.com/avestura/PhotoFiremark">github.com/avestura/PhotoFiremark</a>. It&#39;s a desktop application, and
uses Emgu CV to play with photo bits.</p></div></div>
  </body>
</html>
