<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.fermyon.com/blog/introducing-spinkube-fermyon-platform-for-k8s">Original</a>
    <h1>Spinkube: Running WASM in Kubernetes</h1>
    
    <div id="readability-page-1" class="page"><div>
            <article>

                <nav>
                    <a href="https://www.fermyon.com/blog/index">
                        <img src="https://www.fermyon.com/static/image/arrow-green.svg" alt="Back to Blog index"/>
                        <span>Back</span>
                    </a>
                </nav>

                <div>

                    

                    

                    <div>
                            <p><img src="https://www.fermyon.com/static/image/profile/radu-and-mikkel.jpg" alt="Radu Matei &amp; Mikkel Mørk Hegnhøj"/>

                        </p><p>
                            <span>
                                <span>spin</span>
                                <span>wasm</span>
                                <span>kubernetes</span>
                                <span>webassembly</span>
                            </span>
                        </p>
                    </div>

                    <p><span>
                        <img src="https://www.fermyon.com/static/image/twc-introducing-spinkube-platform-for-kubernetes.jpg" alt="Introducing SpinKube and Fermyon Platform for Kubernetes"/>
 
                    </span>
                </p></div>

                
                <p>Today, we are proud to introduce <a href="https://spinkube.dev">SpinKube</a> and the <a href="https://www.fermyon.com/platform">Fermyon Platform for Kubernetes</a>. Both projects enable Kubernetes to get first-class support for running Spin WebAssembly applications, giving you the opportunity to run your applications far more efficiently, and with higher density across any processing architecture, in your Kubernetes cluster.</p>
<p>SpinKube is an open source project that streamlines the experience of developing, deploying, and operating WebAssembly workloads on Kubernetes. SpinKube combines the <a href="https://github.com/spinkube/spin-operator">Spin Operator</a>, <a href="https://github.com/spinkube/containerd-shim-spin">containerd Spin shim</a>, and the <a href="https://github.com/spinkube/runtime-class-manager">runtime class manager</a> (formerly <a href="https://kwasm.sh/">KWasm</a>) open source projects with contributions from Microsoft, SUSE, Liquid Reply, and Fermyon. <a href="https://www.spinkube.dev/">It’s available today, and free to use</a>.</p>
<p><a href="https://www.fermyon.com/platform">Fermyon Platform for Kubernetes</a> provides unseen density of applications on Kubernetes, in a robust, easy-to-use serverless platform that enables developers to quickly deploy WebAssembly (Wasm) applications to Kubernetes. It also enables enterprises to run more workloads on their Kubernetes clusters and easily scale up or down based on usage, thereby increasing performance and lowering costs. Fermyon Platform for Kubernetes runs on self-hosted infrastructure, whether cloud-hosted or on-premise, alleviating vendor lock-in. Fermyon Platform for Kubernetes is also available today, so please reach out for further information.</p>
<!-- break -->
<h2>A look back at where we are with Spin and WebAssembly</h2>
<p>Since the initial release of Spin, our mission has been to enable WebAssembly as a core technology in the next wave of cloud computing. With the release of <a href="https://www.fermyon.com/blog/announcing-spin-2-2">Spin 2.2</a>, we have implemented support for <a href="https://bytecodealliance.org/articles/WASI-0.2">WASI 0.2</a>, and today Spin gives you the best developer experience for producing <a href="https://github.com/WebAssembly/wasi-http">wasi-http</a> compatible Webassembly components.</p>
<p>Wasi-http components have up until now had many compatible hosts: <a href="https://www.fermyon.com/spin">Spin as a CLI</a>, <a href="https://www.fermyon.com/cloud">Fermyon Cloud</a>, <a href="https://wasmtime.dev/">Wasmtime</a>, and <a href="https://unit.nginx.org/news/2024/fermyon-spin-rust-sdk/">NGINX Unit</a> (to mention some). With today’s releases, SpinKube and Fermyon Platform for Kubernetes are added to that list, and enable these portable workloads to run in Kubernetes.</p>
<h2>SpinKube - a bit more details</h2>
<p>As mentioned in the beginning, the SpinKube project is a collection of existing and new open source technologies. The goal of the project has been to gather, and align, the bits and pieces needed to make it really easy to run Spin WebAssembly applications on Kubernetes. Let’s see how easy it actually is:</p>
<p><img src="https://www.fermyon.com/static/image/blog/spinkube-commands.png" alt="Five shell commands to deploy a spin application"/></p>
<iframe width="800" height="464" src="https://www.youtube.com/embed/TTXAUSicj04" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
<h3>The Containerd Shim Spin</h3>
<p>At the core of the project, is the <a href="https://www.spinkube.dev/docs/containerd-shim-spin/">Containerd Shim Spin</a>. This shim implementation, uses <a href="https://github.com/deislabs/runwasi">runwasi</a>, to enable containerd to run Spin WebAssembly applications in a Kubernetes cluster. The shim provides all the capabilities needed in a Kubernetes cluster, to pull application images from registries, start the applications and inject configuration, etc. This project has been contributed by the <a href="https://github.com/deislabs">Microsoft Deislabs team</a> to the SpinKube project.</p>
<h3>The Runtime Class Manager</h3>
<p>The <a href="https://www.spinkube.dev/docs/runtime-class-manager/">Runtime Class Manager</a>, is the successor to Kwasm, and a contribution by Liquid Reply and SUSE to SpinKube. The Runtime Class Manager enables you to easily annotate your nodes, to install and configure containerd with the Shim Spin, thus enabling Spin Webassembly applications.</p>
<h3>The Spin Operator</h3>
<p>Now this wouldn’t be a true Kubernetes project without an Operator :-) <a href="https://www.spinkube.dev/docs/spin-operator/">The Spin Operator</a> enables you to define Spin WebAssembly applications as native resources in Kubernetes, and orchestrate the creation of deployments, pods, services, enabling integration with containers, and making Spin WebAssembly applications behave just like you would expect from any workload deployed to Kubernetes. The Spin Operator has been developed and contributed by Fermyon, to the SpinKube project.</p>
<h3>The <code>spin kube</code> Plugin</h3>
<p>And to make sure, you can get the best experience as a developer and operator, we’ve also enabled easy integration with the Spin CLI, by including the <a href="https://www.spinkube.dev/docs/spin-plugin-kube/">Kubernetes plugin for Spin</a>, in the repository. This enables the easy steps of <code>spin new</code> —&gt; <code>spin build</code> —&gt; <code>spin registry push</code> —&gt;<code>spin kube scaffold</code> —&gt;<code>kubctl -f apply</code>. This is also a contribution of Fermyon.</p>
<p>Bringing all of these projects together under a non-restrictive open source license, enables everyone to start enjoying Spin WebAssembly workloads in Kubernetes.</p>
<h2>Fermyon Platform for Kubernetes</h2>
<p>Today, we’re also releasing <a href="https://www.fermyon.com/platform">Fermyon Platform for Kubernetes</a>. With this release, we want to bring our technology behind Fermyon Cloud to your Kubernetes clusters. Fermyon Cloud is a highly scalable, multi-tenant WebAssembly platform that has proven to be able to achieve extreme density of applications by hosting more than 5,000 applications on a single node. 20 times the current pod limit in Kubernetes and often 50-100 times the number of pods running on a Kubernetes node. Starting today, we can show you how you can host 5,000 applications on a single Kubernetes node using the Fermyon Platform for Kubernetes.</p>
<p>Fermyon Platform for Kubernetes uses a highly specialized runtime in Kubernetes, to enable the high density of applications. This runtime will benefit scenarios where you have many applications with varying degrees of utilization over time. The instant availability of the applications (always scaled up, but not utilizing resources), and not having to get complicated scaling rules right, are clear immediate benefits you will get from the Fermyon Platform for Kubernetes. All of this while still being able to <a href="#early-adopters-and-collaborators">save 60% on your compute cost</a>.</p>
<p>Fermyon Platform for Kubernetes uses the Spin Operator enabling to you choose the runtime of your applications inside your Kubernetes cluster (container-shim-spin or Fermyon Platform for Kubernetes), to get the best of both worlds.</p>
<p>For more information about The Fermyon Platform for Kubernetes, and to request a demonstration, <a href="https://www.fermyon.com/demo">please reach out here</a>.</p>
<iframe width="800" height="464" src="https://www.youtube.com/embed/EfWLvuLrASA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
<h2>Why do we need Spin WebAssembly applications in Kubernetes?</h2>
<p>WebAssembly brings us a lot of great benefits when developing services. The binary output is really small; it starts up instantaneously, is sandboxed, and is portable across processing architectures and operating systems. All of these benefits from WebAssembly, can be directly mapped to improvements in how we can run workloads in Kubernetes, and help solve some of today’s challenges faced when using containers:</p>
<ul>
<li>
<p>The binary output is really small.</p>
<ul>
<li>A key piece of any orchestration engine is to efficiently place a workload on a given node to run it. Smaller binaries makes the operation of downloading, extracting and eventually running a workload quick. A hello-world Spin WebAssembly application written in Rust is a 284KiB OCI image.</li>
</ul>
<p><img src="https://www.fermyon.com/static/image/blog/spinkube-localhost.png" alt="OCI Manifest of a WebAssembly image"/></p>
</li>
<li>
<p>They start up almost immediately.</p>
<ul>
<li>Once scheduled, a Spin WebAssembly component will start in <a href="https://fermyon.github.io/spin-benchmarks/criterion/reports/spin-executor_sleep-1ms/index.html">less than a millisecond</a>. This is particularly beneficial for Spin applications consisting of multiple components, and for any application scheduled with the Fermyon Platform for Kubernetes, as they are only loaded and run, when needed.</li>
</ul>
<p><img src="https://www.fermyon.com/static/image/blog/spinkube-executor-full.png" alt="SpinExecutor performance graph"/></p>
</li>
<li>
<p>They are sandboxed.</p>
<ul>
<li>WebAssembly components are sandboxed and are by default denied access to resources on the system - e.g., the filesystem or networking, through its <a href="https://github.com/WebAssembly/WASI#capability-based-security">capability-based security design</a>. This not only makes the workloads safe to for hosting untrusted code, but also enables you to efficiently host multiple apps in a single runtime instance, which is part of the efficiency the Fermyon Platform for Kubernetes runtime brings.</li>
</ul>
<p><img src="https://www.fermyon.com/static/image/blog/spinkube-full.png" alt="Illustration of sandboxed WebAssembly modules"/></p>
</li>
<li>
<p>They are portable across processing architectures and operating systems.</p>
<ul>
<li>
<p>You can swap out the underlying nodes processing architecture without having to produce separate pipelines and deploy artifacts. In many cases, switching to an ARM64-based server gives you an immediate cost saving.</p>
<p><img src="https://www.fermyon.com/static/image/blog/spinkube-cpu-full.png" alt="Illustration of one WebAssembly module running on multiple CPU arhictectures"/></p>
</li>
</ul>
</li>
</ul>
<h2>Early Adopters and Collaborators</h2>
<p>ZEISS, Microsoft and Fermyon have been working together on testing SpinKube with Azure Kubernetes Services, and <a href="https://github.com/ZEISS/enterprise-wasm">existing workloads which ZEISS is running today</a>. The setup includes the use of <a href="https://azure.microsoft.com/en-us/products/service-bus/">Azure Service Bus</a>, <a href="https://dapr.io/">Dapr</a>, <a href="https://keda.sh/">KEDA</a>, <a href="https://azure.microsoft.com/en-us/products/kubernetes-service/">Azure Kubernetes Services</a>, <a href="https://www.fermyon.com/spin">Spin</a>, and <a href="https://www.spinkube.dev/">SpinKube</a> to validate how well Spin WebAssembly applications perform in this environment, compared to the existing implementation using containers.</p>
<blockquote>
<p>“Utilizing Spin WebAssembly with SpinKube on Microsoft’s Azure Kubernetes Service helps us to achieve faster scalability, and reach higher density without the need to dramatically change our operational posture. With that we’ve been able to take a Kubernetes batch process of tens of thousands of orders and cut the compute cost by 60% without trading off performance,” said Kai Walter, Distinguished Architect, ZEISS Group. “We are excited to see WebAssembly become a first-class workload in Kubernetes. SpinKube and Fermyon Platform for Kubernetes will reshape how we all do high-performance computing in Kubernetes.”</p>
</blockquote>
<p>Some members of the cloud-native community have also had a chance to try out SpinKube prior to the launch, providing the following feedback on the experience:</p>
<blockquote>
<p>“The SpinKube project uses all the conventional Kubernetes tools to easily get it installed and set up. It took me 5 minutes before I could start deploying Spin WebAssembly applications to my cluster,” said <a href="https://blog.kasperhermansen.com">Kasper Juul Hermansen</a>, Platform/Data Engineer, Lunar.</p>
</blockquote>
<p>To learn more about:</p>
<ul>
<li>the SpinKube project, how to try it out, and how to get involved in the project, check out the <a href="https://www.spinkube.dev/">spinkube.dev</a> website.</li>
<li>the Fermyon Platform for Kubernetes, and scheduling a demonstration and technical walk-through, <a href="https://www.fermyon.com/platform">check out here</a>.</li>
<li>developing Spin applications, check out the <a href="https://developer.fermyon.com/spin/v2/quickstart">quickstart</a>, and examples of applications on the <a href="https://developer.fermyon.com/hub">Spin Up Hub</a>.</li>
</ul>
  
            </article>
        </div></div>
  </body>
</html>
