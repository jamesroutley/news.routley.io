<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://alexxcons.github.io/blogpost_15.html">Original</a>
    <h1>Xfwl4 – The Roadmap for a Xfce Wayland Compositor</h1>
    
    <div id="readability-page-1" class="page"><div id="wrapper">
        
        <div id="body">
            <h4>Jan 27,2026</h4>
            <h2>Xfwl4 - The roadmap for a Xfce Wayland Compositor</h2>

            <p>We, the Xfce team are excited to share some great news!</p>

            <p>After careful consideration, we’ve decided on a meaningful way to use the generous donations from our community: funding longtime Xfce core developer <a href="https://gitlab.xfce.org/kelnos" target="_blank">Brian Tarricone</a> to create xfwl4, a brand-new Wayland compositor for Xfce.</p>

            <p>This initiative will utilize a significant portion of the project’s donated funds, but we believe it’s an important investment in Xfce’s future.</p>
 
            <p>The goal is, that xfwl4 will offer the same functionality and behavior as xfwm4 does, or as much as possible considering the differences between X11 and Wayland. Using xfwl4 should feel just like using xfwm4 on X11. We even plan to reuse the existing xfwm4 configuration dialogs and xfconf settings to ensure a seamless transition.</p>

            <p>Xfwl4 will not be based on the existing xfwm4 code. Instead, it will be written from scratch in rust, using <a href="https://github.com/Smithay/smithay/" target="_blank">smithay</a> building blocks.</p>

            <h3>Why doing a rewrite?</h3>

            <p>The first attempt at creating an Xfce Wayland compositor involved modifying the existing xfwm4 code to support both X11 and Wayland in parallel. However, this approach turned out to be the wrong path forward for several reasons:</p>
            <ul>
              <li>Xfwm4 is architected in a way that makes it very difficult to put the window management behavior behind generic interfaces that don&#39;t include X11 specifics.</li>
              <li>Refactoring Xfwm4 is risky, since it might introduce new bugs to X11. Having two parallel code bases will allow for rapid development and experimentation with the Wayland compositor, with zero risk to break xfwm4.</li>
              <li>Some X11 window management concepts just aren&#39;t available or supported by Wayland protocols at this time, and dealing with those differences can be difficult in an X11-first code base.</li>
              <li>Using the existing codebase would require us to use C and wlroots, even if a better alternative is available.</li>
            </ul>
            <h3>Why to base xfwl4 on smithay?</h3>

            <p>Once the decision to write a compositor from scratch was done, the next major question was: Which Wayland support library to use as a base? In order to find an answer on that question Brian evaluated wlroots and smithay. The decision to use smithay as a base was done for the following reasons:</p>
            <ul>            
              <li>smithay supports most/all official Wayland protocol extensions, as well as the wlroots protocols and some KDE protocols.</li>
              <li>smithay has no high level abstraction, as wlroots has. However, it allows for very deep customization of the graphics and input pipeline, as well as all aspects of Wayland protocol and desktop/shell handling.</li>
              <li>smithay has great documentation.</li>
              <li>Using rust makes it easier to avoid memory related bugs and decreases the chances of crashes, something that should never happen for a Wayland compositor.</li>
              <li>Rather subjective: Brian has a strong preference to write code in rust over writing code in C.</li>
              <li>wlroots is written in C, in a way which makes it very difficult to write <a href="https://way-cooler.org/blog/2019/04/29/rewriting-way-cooler-in-c.html" target="_blank">wlroots rust bindings</a>.</li>
            </ul>
            <h3>Scope of the project</h3>

            <p>Besides getting feature parity with xfwm4, the xfwl4 project scope includes as well some other related tasks:</p>
            <ul>
              <li>Major changes to session-startup will be required, since on Wayland the compositor has to be the root of the session instead of xfce4-session.</li>
              <li>Support for the xdg-session-management protocol is another goal.</li>
              <li>As well support for XWayland is part of the roadmap.</li>
              <li>The build system of the Xfce CI container will need to be upgraded in order to support building rust code via meson.</li>
            </ul>

            <p>Brian has already started work on the project, so stay tuned for the first development release of xfwl4, which we hope to share around mid-year.</p>

            <p>If you’re interested in the detailed reasoning behind the project or want to explore all the technical details, check out the <a href="https://gitlab.xfce.org/kelnos/xfwl4/-/issues" target="_blank">issues</a> and the <a href="https://gitlab.xfce.org/kelnos/xfwl4" target="_blank">work in progress source code</a>.</p>
            <p>For any questions related to xfwl4, please visit our Matrix channel <a href="https://matrix.to/#/#xfce-dev:matrix.org">#xfce-dev</a>.</p>
            <p>We’d like to extend our heartfelt thanks to our generous supporters on <a href="https://opencollective.com/xfce" target="_blank">Open Collective US</a> and <a href="https://opencollective.com/xfce-eu" target="_blank">Open Collective EU</a> for making this project possible!</p>

            
            <p>Best regards,</p>
            <p>The Xfce development team</p>
        </div>
        
    </div></div>
  </body>
</html>
