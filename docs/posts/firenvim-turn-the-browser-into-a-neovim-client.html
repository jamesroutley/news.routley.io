<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/glacambre/firenvim">Original</a>
    <h1>Firenvim â€“ Turn the browser into a Neovim client</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Turn your browserÂ¹ into a Neovim client (demos: <a href="https://www.youtube.com/watch?v=suvh0yFfIB8" rel="nofollow">justinmk ðŸ‡ºðŸ‡¸</a>, <a href="https://www.youtube.com/watch?v=dNQJONKnJrg" rel="nofollow">Sean Feng ðŸ‡¨ðŸ‡³</a>).</p>
<p dir="auto">Â¹ <sub>Firefox and Chrome are specifically supported. Other Chromium based browsers such as Brave, Vivaldi, Opera, and Arc should also work but are not specifically tested.</sub></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://bjorg.bjornroche.com/glacambre/firenvim/blob/master/firenvim.gif"><img src="https://bjorg.bjornroche.com/glacambre/firenvim/raw/master/firenvim.gif" alt="Firenvim demo" data-animated-image=""/></a></p>

<p dir="auto">Just click on any textarea and it will be immediately replaced by an instance of Firenvim. To set the content of the now hidden textarea to the content of the Neovim instance, simply <code>:w</code>. If you want to close the Firenvim overlay and return to the textarea, use <code>:q</code>. If you selected an element where you expected the Firenvim frame to appear and it didn&#39;t, try pressing <code>&lt;C-e&gt;</code>.</p>

<p dir="auto">Before installing anything please read <a href="https://bjorg.bjornroche.com/glacambre/firenvim/blob/master/SECURITY.md">SECURITY.md</a> and make sure you&#39;re okay with everything mentioned. In the event you think of a way to compromise Firenvim, please send me an email (you can find my address on my website).</p>
<ol dir="auto">
<li>
<p dir="auto">Install Firenvim as a regular NeoVim plugin, then run the built-in post-install script.</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://github.com/folke/lazy.nvim">lazy</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="{ &#39;glacambre/firenvim&#39;, build = &#34;:call firenvim#install(0)&#34; }
"><pre>{ <span><span>&#39;</span>glacambre/firenvim<span>&#39;</span></span>, <span>build</span> <span>=</span> <span><span>&#34;</span>:call firenvim#install(0)<span>&#34; </span></span>}
</pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/junegunn/vim-plug">vim-plug</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="Plug &#39;glacambre/firenvim&#39;, { &#39;do&#39;: { _ -&gt; firenvim#install(0) } }"><pre>Plug <span><span>&#39;</span>glacambre/firenvim<span>&#39;</span></span>, { <span><span>&#39;</span>do<span>&#39;</span></span>: { _ <span>-</span>&gt; <span>firenvim#install</span>(<span>0</span>) } }</pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/k-takata/minpac">minpac</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="call minpac#add(&#39;glacambre/firenvim&#39;, { &#39;type&#39;: &#39;opt&#39;, &#39;do&#39;: &#39;packadd firenvim | call firenvim#install(0)&#39;})
if exists(&#39;g:started_by_firenvim&#39;)
  packadd firenvim
endif"><pre><span>call</span> <span>minpac#add</span>(<span><span>&#39;</span>glacambre/firenvim<span>&#39;</span></span>, { <span><span>&#39;</span>type<span>&#39;</span></span>: <span><span>&#39;</span>opt<span>&#39;</span></span>, <span><span>&#39;</span>do<span>&#39;</span></span>: <span><span>&#39;</span>packadd firenvim | call firenvim#install(0)<span>&#39;</span></span>})
<span>if</span> <span>exists</span>(<span><span>&#39;</span>g:started_by_firenvim<span>&#39;</span></span>)
  <span>packadd</span> firenvim
<span>endif</span></pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/VundleVim/Vundle.vim">vundle</a>, others</p>
<p dir="auto">Install the plugin as you usually would, then run this shell command:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ nvim --headless &#34;+call firenvim#install(0) | q&#34;"><pre>$ nvim --headless <span><span>&#34;</span>+call firenvim#install(0) | q<span>&#34;</span></span></pre></div>
</li>
</ul>
</li>
<li>
<p dir="auto">Install the Firenvim addon for your browser from <a href="https://addons.mozilla.org/en-US/firefox/addon/firenvim/" rel="nofollow">Mozilla&#39;s store</a> or <a href="https://chrome.google.com/webstore/detail/firenvim/egpjdkipkomnmjhjmdamaniclmdlobbo" rel="nofollow">Google&#39;s</a>.</p>
</li>
</ol>
<p dir="auto">If you would rather build and install Firenvim from source, check <a href="https://bjorg.bjornroche.com/glacambre/firenvim/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>

<p dir="auto">Other browsers aren&#39;t supported for now. Opera, Vivaldi and other Chromium-based browsers should however work just like in Chromium and have similar install steps. Brave, Edge, and Arc might work, Safari doesn&#39;t (it doesn&#39;t support Webextensions).</p>

<p dir="auto">Firenvim currently requires the following permissions for the following reasons:</p>
<ul dir="auto">
<li><a href="https://support.mozilla.org/en-US/kb/permission-request-messages-firefox-extensions?as=u&amp;utm_source=inproduct#w_access-your-data-for-all-websites" rel="nofollow">Access your data for all websites</a>: this is necessary in order to be able to append elements (= the neovim iframe) to the DOM.</li>
<li><a href="https://support.mozilla.org/en-US/kb/permission-request-messages-firefox-extensions?as=u#w_exchange-messages-with-programs-other-than-firefox" rel="nofollow">Exchange messages with programs other than Firefox</a>: this is necessary in order to be able to start neovim instances.</li>
</ul>

<div dir="auto"><h3 tabindex="-1" dir="auto">Manually triggering Firenvim</h3><a id="user-content-manually-triggering-firenvim" aria-label="Permalink: Manually triggering Firenvim" href="#manually-triggering-firenvim"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can configure the keybinding to manually trigger Firenvim (<code>&lt;C-e&gt;</code> by default) in <a href="https://support.mozilla.org/en-US/kb/manage-extension-shortcuts-firefox" rel="nofollow">the shortcuts menu in <code>about://addons</code></a> on Firefox, or in <code>chrome://extensions/shortcuts</code> on Chrome.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Temporarily disabling Firenvim in a tab</h3><a id="user-content-temporarily-disabling-firenvim-in-a-tab" aria-label="Permalink: Temporarily disabling Firenvim in a tab" href="#temporarily-disabling-firenvim-in-a-tab"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Temporarily disabling (and re-enabling) Firenvim in a tab can be done either by clicking on the Firenvim button next to the urlbar or by configuring a browser shortcut (see the previous section to find out how browser shortcuts can be configured).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Building a Firenvim-specific config</h3><a id="user-content-building-a-firenvim-specific-config" aria-label="Permalink: Building a Firenvim-specific config" href="#building-a-firenvim-specific-config"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Note: If you would prefer VimScript examples, you can consult the (outdated) readme from commit 132979166a02319f0b49815135e60a4e4599de91 or earlier.</p>
<p dir="auto"><strong>New</strong>: With Neovim nightly builds from 2023/02/17 or more recent, you can use <a href="https://neovim.io/doc/user/starting.html#$NVIM_APPNAME" rel="nofollow">$NVIM_APPNAME</a> to define a completely separate firenvim config. In order to do that, make sure &#34;NVIM_APPNAME&#34; is appropriately set when you run firenvim#install().</p>
<p dir="auto">When it starts Neovim, Firenvim sets the variable <code>g:started_by_firenvim</code> which you can check to run different code in your init.lua. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="if vim.g.started_by_firenvim == true then
  vim.o.laststatus = 0
else
  vim.o.laststatus = 2
end"><pre><span>if</span> <span>vim</span>.<span>g</span>.<span>started_by_firenvim</span> <span>==</span> <span>true</span> <span>then</span>
  <span>vim</span>.<span>o</span>.<span>laststatus</span> <span>=</span> <span>0</span>
<span>else</span>
  <span>vim</span>.<span>o</span>.<span>laststatus</span> <span>=</span> <span>2</span>
<span>end</span></pre></div>
<p dir="auto">Alternatively, you can detect when Firenvim connects to Neovim by using the <code>UIEnter</code> autocmd event:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_create_autocmd({&#39;UIEnter&#39;}, {
    callback = function(event)
        local client = vim.api.nvim_get_chan_info(vim.v.event.chan).client
        if client ~= nil and client.name == &#34;Firenvim&#34; then
            vim.o.laststatus = 0
        end
    end
})"><pre><span>vim</span>.<span>api</span>.<span>nvim_create_autocmd</span>({<span><span>&#39;</span>UIEnter<span>&#39;</span></span>}, {
    <span>callback</span> <span>=</span> <span>function</span>(<span>event</span>)
        <span>local</span> <span>client</span> <span>=</span> <span>vim</span>.<span>api</span>.<span>nvim_get_chan_info</span>(<span>vim</span>.<span>v</span>.<span>event</span>.<span>chan</span>).<span>client</span>
        <span>if</span> <span>client</span> <span>~=</span> <span>nil</span> <span>and</span> <span>client</span>.<span>name</span> <span>==</span> <span><span>&#34;</span>Firenvim<span>&#34; </span></span><span>then</span>
            <span>vim</span>.<span>o</span>.<span>laststatus</span> <span>=</span> <span>0</span>
        <span>end</span>
    <span>end</span>
})</pre></div>
<p dir="auto">Similarly, you can detect when Firenvim disconnects from a Neovim instance with the <code>UILeave</code> autocommand.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Using different settings depending on the url/page/element being edited</h3><a id="user-content-using-different-settings-depending-on-the-urlpageelement-being-edited" aria-label="Permalink: Using different settings depending on the url/page/element being edited" href="#using-different-settings-depending-on-the-urlpageelement-being-edited"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The nvim buffer loaded into a textarea is given a unique name. All buffers are named something like this: <code>domainname_page_selector.txt</code> (see the <a href="https://bjorg.bjornroche.com/glacambre/firenvim/blob/master/src/utils/utils.ts">toFileName function</a>).</p>
<p dir="auto">This alows you to configure different settings by creating autocommands targeting/matching the buffername for that url/page/element. For example, this will set file type to markdown for all GitHub buffers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_create_autocmd({&#39;BufEnter&#39;}, {
    pattern = &#34;github.com_*.txt&#34;,
    command = &#34;set filetype=markdown&#34;
})"><pre><span>vim</span>.<span>api</span>.<span>nvim_create_autocmd</span>({<span><span>&#39;</span>BufEnter<span>&#39;</span></span>}, {
    <span>pattern</span> <span>=</span> <span><span>&#34;</span>github.com_*.txt<span>&#34;</span></span>,
    <span>command</span> <span>=</span> <span><span>&#34;</span>set filetype=markdown<span>&#34;</span></span>
})</pre></div>
<p dir="auto">To view the buffername of your nvim instance in a textarea, use <code>:buffers</code>.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Understanding Firenvim&#39;s configuration object</h3><a id="user-content-understanding-firenvims-configuration-object" aria-label="Permalink: Understanding Firenvim&#39;s configuration object" href="#understanding-firenvims-configuration-object"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can configure everything else about Firenvim by creating a dictionary named <code>vim.g.firenvim_config</code> in your init.lua and setting the keys &#34;globalSettings&#34; and &#34;localSettings&#34;. In the dictionary <code>vim.g.firenvim_config[&#34;localSettings&#34;]</code> you can map Javascript patterns that match against the full URL to settings that are used for all URLs matched by that pattern. When multiple patterns match a URL, the pattern with the highest &#34;priority&#34; value is used. Here is an example (the settings and their possible values will be explained in the next subsections):</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config = {
    globalSettings = { alt = &#34;all&#34; },
    localSettings = {
        [&#34;.*&#34;] = {
            cmdline  = &#34;neovim&#34;,
            content  = &#34;text&#34;,
            priority = 0,
            selector = &#34;textarea&#34;,
            takeover = &#34;always&#34;
        }
    }
}"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span> <span>=</span> {
    <span>globalSettings</span> <span>=</span> { <span>alt</span> <span>=</span> <span><span>&#34;</span>all<span>&#34; </span></span>},
    <span>localSettings</span> <span>=</span> {
        [<span><span>&#34;</span>.*<span>&#34;</span></span>] <span>=</span> {
            <span>cmdline</span>  <span>=</span> <span><span>&#34;</span>neovim<span>&#34;</span></span>,
            <span>content</span>  <span>=</span> <span><span>&#34;</span>text<span>&#34;</span></span>,
            <span>priority</span> <span>=</span> <span>0</span>,
            <span>selector</span> <span>=</span> <span><span>&#34;</span>textarea<span>&#34;</span></span>,
            <span>takeover</span> <span>=</span> <span><span>&#34;</span>always<span>&#34;</span></span>
        }
    }
}</pre></div>
<p dir="auto">With this configuration, <code>takeover</code> will be set to <code>always</code> on all websites. If we wanted to override this value on british websites, we could add the following lines to our init.vim. Notice how the priority of this new regex is higher than that of the <code>.*</code> regex:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#34;https?://[^/]+\\.co\\.uk/&#34;] = { takeover = &#39;never&#39;, priority = 1 }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#34;</span>https?://[^/]+<span>\\</span>.co<span>\\</span>.uk/<span>&#34;</span></span>] <span>=</span> { <span>takeover</span> <span>=</span> <span><span>&#39;</span>never<span>&#39;</span></span>, <span>priority</span> <span>=</span> <span>1</span> }</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Configuring what elements Firenvim should appear on</h3><a id="user-content-configuring-what-elements-firenvim-should-appear-on" aria-label="Permalink: Configuring what elements Firenvim should appear on" href="#configuring-what-elements-firenvim-should-appear-on"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>selector</code> attribute of a localSetting controls what elements Firenvim automatically takes over. Here&#39;s the default value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { selector = &#39;textarea:not([readonly], [aria-readonly]), div[role=&#34;textbox&#34;]&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>selector</span> <span>=</span> <span><span>&#39;</span>textarea:not([readonly], [aria-readonly]), div[role=&#34;textbox&#34;]<span>&#39; </span></span>}</pre></div>
<p dir="auto">If you don&#39;t want to use Firenvim with rich text editors (e.g. Gmail, Outlook, Slackâ€¦) as a general rule, you might want to restrict Firenvim to simple textareas:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { selector = &#39;textarea&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>selector</span> <span>=</span> <span><span>&#39;</span>textarea<span>&#39; </span></span>}</pre></div>
<p dir="auto">Since <code>selector</code> is just a CSS selector, you have access to all of CSS&#39;s pseudo selectors, including <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not" rel="nofollow"><code>:not()</code></a>, which allows you to exclude elements that have certain attributes, like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { selector = &#39;textarea:not([class=xxx])&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>selector</span> <span>=</span> <span><span>&#39;</span>textarea:not([class=xxx])<span>&#39; </span></span>}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Configuring Firenvim to not always take over elements</h3><a id="user-content-configuring-firenvim-to-not-always-take-over-elements" aria-label="Permalink: Configuring Firenvim to not always take over elements" href="#configuring-firenvim-to-not-always-take-over-elements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Firenvim has a setting named <code>takeover</code> that can be set to <code>always</code>, <code>empty</code>, <code>never</code>, <code>nonempty</code> or <code>once</code>. When set to <code>always</code>, Firenvim will always take over elements for you. When set to <code>empty</code>, Firenvim will only take over empty elements. When set to <code>never</code>, Firenvim will never automatically appear, thus forcing you to use a keyboard shortcut in order to make the Firenvim frame appear. When set to <code>nonempty</code>, Firenvim will only take over elements that aren&#39;t empty. When set to <code>once</code>, Firenvim will take over elements the first time you select them, which means that after <code>:q</code>&#39;ing Firenvim, you&#39;ll have to use the keyboard shortcut to make it appear again. Here&#39;s how to use the <code>takeover</code> setting:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { takeover = &#39;always&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>takeover</span> <span>=</span> <span><span>&#39;</span>always<span>&#39; </span></span>}</pre></div>

<p dir="auto">You can chose between neovim&#39;s built-in command line, firenvim&#39;s command line and no command line at all by setting the localSetting named <code>cmdline</code> to either <code>neovim</code>, <code>firenvim</code> or <code>none</code>, e.g.:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { cmdline = &#39;firenvim&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>cmdline</span> <span>=</span> <span><span>&#39;</span>firenvim<span>&#39; </span></span>}</pre></div>
<p dir="auto">Choosing <code>none</code> does not make sense unless you have alternative way to display the command line such as <a href="https://github.com/folke/noice.nvim">noice.nvim</a>.</p>

<p dir="auto">The <code>content</code> localSetting controls how Firenvim should read the content of an element. Setting it to <code>html</code> will make Firenvim fetch the content of elements as HTML, <code>text</code> will make it use plaintext. The default value is <code>text</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config.localSettings[&#39;.*&#39;] = { content = &#39;html&#39; }"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span>.<span>localSettings</span>[<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> { <span>content</span> <span>=</span> <span><span>&#39;</span>html<span>&#39; </span></span>}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Special characters on MacOS</h3><a id="user-content-special-characters-on-macos" aria-label="Permalink: Special characters on MacOS" href="#special-characters-on-macos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On MacOS, the default keyboard layouts emit special characters when the alt (i.e. option) key is held down. From the perspective of the browser, these special characters replace the underlying &#34;main&#34; character of a keystroke event while retaining the modifier. For example, in the standard US layout the key chord alt-o is received in the browser as alt-Ã¸ rather than alt-o. Further, certain alt-chords represent &#34;dead keys&#34;, which apply a diacritic to the next character entered. Pressing alt-e followed by a produces the single character &#34;Ã¡&#34; while alt-u followed by a produces &#34;Ã¤&#34;. To produce this behavior, diacritic-mapped strokes like alt-e and alt-u are themselves mapped to a <a href="https://en.wikipedia.org/wiki/Dead_key" rel="nofollow">&#34;Dead key&#34; character</a>.</p>
<p dir="auto">These behaviors complicate the support of special character and alt/meta (A- or M-) vim mappings on MacOS in two ways:</p>
<ol dir="auto">
<li>
<p dir="auto">There is no way to generate unmodified special character key events. For example, since the only way to generate the character &#34;Ã¸&#34; via the keyboard is by holding down alt, any key event with the &#34;Ã¸&#34; character will also have an alt modifier. If we forward this directly to Vim, it will be received as <code>&lt;M-Ã¸&gt;</code>.</p>
</li>
<li>
<p dir="auto">There is no way to generate alt-modified plain alphanumeric characters. For example, an <code>&lt;M-o&gt;</code> mapping won&#39;t work because pressing alt-o generates <code>&lt;M-Ã¸&gt;</code> rather than <code>&lt;M-o&gt;</code>.</p>
</li>
</ol>
<p dir="auto">Terminal and standalone GUI applications can solve these problems by changing the interpretation of the alt key at the application level. <code>Terminal.app</code> and <code>iTerm2</code>, for instance, both provide a &#34;use Option as Meta key&#34; preference that converts incoming alt-chords at the application level. Firenvim, however, is a browser extension that operates off of browser keystroke events rather than application-level events. At present, we are unsure how to implement this &#34;use option as meta&#34; functionality at the browser event level (help here is welcome!). However, there are some workarounds.</p>
<p dir="auto">For problem (1), Firenvim will by default drop the alt key on MacOS for any special character, defined here as non-alphanumeric (not matching <code>/[a-zA-Z0-9]/</code>). This means alt-o will be forwarded to NeoVim as &#34;Ã¸&#34; rather than &#34;M-Ã¸&#34;. Note that this behavior can be changed by setting the <code>alt</code> setting of the <code>globalSettings</code> configuration to <code>all</code>, like this:</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Making Firenvim ignore keys</h3><a id="user-content-making-firenvim-ignore-keys" aria-label="Permalink: Making Firenvim ignore keys" href="#making-firenvim-ignore-keys"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can make Firenvim ignore key presses (thus letting the browser handle them) by setting key-value pairs in <code>globalSettings.ignoreKeys</code>. The key needs to be the neovim mode the key press should be ignored in and the value should be an array containing the textual representation of the key press you want ignored. If you want to ignore a key press in all modes, you can use <code>all</code> as mode key.</p>
<p dir="auto">For example, if you want to make Firenvim ignore <code>&lt;C-1&gt;</code> and <code>&lt;C-2&gt;</code> in normal mode and <code>&lt;C--&gt;</code> in all modes to let your browser handle them, you should define ignoreKeys like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config = {
    globalSettings = {
        ignoreKeys = {
            all = { &#39;&lt;C--&gt;&#39; },
            normal = { &#39;&lt;C-1&gt;&#39;, &#39;&lt;C-2&gt;&#39; }
        }
    }
}"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span> <span>=</span> {
    <span>globalSettings</span> <span>=</span> {
        <span>ignoreKeys</span> <span>=</span> {
            <span>all</span> <span>=</span> { <span><span>&#39;</span>&lt;C--&gt;<span>&#39; </span></span>},
            <span>normal</span> <span>=</span> { <span><span>&#39;</span>&lt;C-1&gt;<span>&#39;</span></span>, <span><span>&#39;</span>&lt;C-2&gt;<span>&#39; </span></span>}
        }
    }
}</pre></div>
<p dir="auto">Mode names are defined in <a href="https://github.com/neovim/neovim/blob/master/src/nvim/cursor_shape.c">Neovim&#39;s cursor_shape.c</a>. Note that if the key press contains multiple modifiers, Shift needs to be first, Alt second, Control third and OS/Meta last (e.g. <code>Ctrl+Alt+Shift+1</code> needs to be <code>&lt;SAC-1&gt;</code>). If your keyboard layout requires you to press shift in order to press numbers, shift should be present in the key representation (e.g. on french azerty keyboards, <code>&lt;C-1&gt;</code> should actually be <code>&lt;SC-1&gt;</code>).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Interacting with the page</h3><a id="user-content-interacting-with-the-page" aria-label="Permalink: Interacting with the page" href="#interacting-with-the-page"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can execute javascript in the page by using <code>firenvim#eval_js</code>. The code has to be a valid javascript expression (NOT a statement). You can provide the name of a function that should be executed with the result of the expression. Note that some pages prevent evaluating JavaScript with their <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" rel="nofollow">CSP</a> and this can&#39;t be worked around. Here&#39;s an example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.fn[&#39;firenvim#eval_js&#39;](&#39;alert(&#34;Hello World!&#34;)&#39;, &#39;MyFunction&#39;)"><pre><span>vim</span>.<span>fn</span>[<span><span>&#39;</span>firenvim#eval_js<span>&#39;</span></span>](<span><span>&#39;</span>alert(&#34;Hello World!&#34;)<span>&#39;</span></span>, <span><span>&#39;</span>MyFunction<span>&#39;</span></span>)</pre></div>
<p dir="auto">You can move focus from the editor back to the page or the input field by calling <code>firenvim#focus_page</code> or <code>firenvim#focus_input</code>. Here&#39;s an example that does exactly this if you press <code>&lt;Esc&gt;</code> twice while in normal mode:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_set_keymap(&#34;n&#34;, &#34;&lt;Esc&gt;&lt;Esc&gt;&#34;, &#34;&lt;Cmd&gt;call firenvim#focus_page()&lt;CR&gt;&#34;, {})"><pre><span>vim</span>.<span>api</span>.<span>nvim_set_keymap</span>(<span><span>&#34;</span>n<span>&#34;</span></span>, <span><span>&#34;</span>&lt;Esc&gt;&lt;Esc&gt;<span>&#34;</span></span>, <span><span>&#34;</span>&lt;Cmd&gt;call firenvim#focus_page()&lt;CR&gt;<span>&#34;</span></span>, {})</pre></div>
<p dir="auto">There is also a function named <code>firenvim#hide_frame()</code> which will temporarily hide the Firenvim frame. You will then be able to bring the neovim frame back either by unfocusing and refocusing the textarea or by using the <a href="https://github.com/glacambre/firenvim#manually-triggering-firenvim">keybinding to manually trigger Firenvim</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_set_keymap(&#34;n&#34;, &#34;&lt;C-z&gt;&#34;, &#34;&lt;Cmd&gt;call firenvim#hide_frame()&lt;CR&gt;&#34;, {})"><pre><span>vim</span>.<span>api</span>.<span>nvim_set_keymap</span>(<span><span>&#34;</span>n<span>&#34;</span></span>, <span><span>&#34;</span>&lt;C-z&gt;<span>&#34;</span></span>, <span><span>&#34;</span>&lt;Cmd&gt;call firenvim#hide_frame()&lt;CR&gt;<span>&#34;</span></span>, {})</pre></div>
<p dir="auto">A function named <code>firenvim#press_keys()</code> will allow you to send key events to the underlying input field by taking a list of vim-like keys (e.g. <code>a</code>, <code>&lt;CR&gt;</code>, <code>&lt;Space&gt;</code>â€¦) as argument. Note that this only &#34;triggers&#34; an event, it does not add text to the input field. For example if you&#39;d like firenvim to send <code>&lt;CR&gt;</code> to the webpage when you press <code>&lt;CR&gt;</code> in the editor, you can use the following mapping which is useful with chat apps:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_create_autocmd({&#39;BufEnter&#39;, {
    pattern = &#34;riot.im_*&#34;,
    command = [[inoremap &lt;CR&gt; &lt;Esc&gt;:w&lt;CR&gt;:call firenvim#press_keys(&#34;&lt;LT&gt;CR&gt;&#34;)&lt;CR&gt;ggdGa]],
})"><pre><span>vim</span>.<span>api</span>.<span>nvim_create_autocmd</span>({<span><span>&#39;</span>BufEnter<span>&#39;</span></span>, {
    <span>pattern</span> <span>=</span> <span><span>&#34;</span>riot.im_*<span>&#34;</span></span>,
    <span>command</span> <span>=</span> <span><span>[[</span>inoremap &lt;CR&gt; &lt;Esc&gt;:w&lt;CR&gt;:call firenvim#press_keys(&#34;&lt;LT&gt;CR&gt;&#34;)&lt;CR&gt;ggdGa<span>]]</span></span>,
})</pre></div>
<p dir="auto">Note that our goal is to make the mapping type <code>firenvim#press_keys(&#34;&lt;CR&gt;&#34;)</code> in vim&#39;s command prompt and then execute it. Since we want the keys <code>&lt;CR&gt;</code> to be typed and not <kbd>Enter</kbd> to be pressed, we can&#39;t use <code>&lt;CR&gt;</code> because it would be interpreted by <code>inoremap</code>. Hence we use <code>&lt;LT&gt;CR&gt;</code> in order to type the keys <code>&lt;CR&gt;</code>. Similarly, if you want to type the keys <code>&lt;C-CR&gt;</code> you&#39;d use <code>&lt;LT&gt;C-CR&gt;</code>.</p>
<p dir="auto">Known Issues: some websites do not react to <code>firenvim#press_keys</code> (e.g. Slack).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Automatically syncing changes to the page</h3><a id="user-content-automatically-syncing-changes-to-the-page" aria-label="Permalink: Automatically syncing changes to the page" href="#automatically-syncing-changes-to-the-page"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Since Firenvim simply uses the BufWrite event in order to detect when it needs to write neovim&#39;s buffers to the page, Firenvim can be made to automatically synchronize all changes like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_create_autocmd({&#39;TextChanged&#39;, &#39;TextChangedI&#39;}, {
    nested = true,
    command = &#34;write&#34;
})"><pre><span>vim</span>.<span>api</span>.<span>nvim_create_autocmd</span>({<span><span>&#39;</span>TextChanged<span>&#39;</span></span>, <span><span>&#39;</span>TextChangedI<span>&#39;</span></span>}, {
    <span>nested</span> <span>=</span> <span>true</span>,
    <span>command</span> <span>=</span> <span><span>&#34;</span>write<span>&#34;</span></span>
})</pre></div>
<p dir="auto">Depending on how large the edited buffer is, this could be a little slow. This more sophisticated approach will throttle writes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.api.nvim_create_autocmd({&#39;TextChanged&#39;, &#39;TextChangedI&#39;}, {
    callback = function(e)
        if vim.g.timer_started == true then
            return
        end
        vim.g.timer_started = true
        vim.fn.timer_start(10000, function()
            vim.g.timer_started = false
            vim.cmd(&#39;silent write&#39;)
        end)
    end
})"><pre><span>vim</span>.<span>api</span>.<span>nvim_create_autocmd</span>({<span><span>&#39;</span>TextChanged<span>&#39;</span></span>, <span><span>&#39;</span>TextChangedI<span>&#39;</span></span>}, {
    <span>callback</span> <span>=</span> <span>function</span>(<span>e</span>)
        <span>if</span> <span>vim</span>.<span>g</span>.<span>timer_started</span> <span>==</span> <span>true</span> <span>then</span>
            <span>return</span>
        <span>end</span>
        <span>vim</span>.<span>g</span>.<span>timer_started</span> <span>=</span> <span>true</span>
        <span>vim</span>.<span>fn</span>.<span>timer_start</span>(<span>10000</span>, <span>function</span>()
            <span>vim</span>.<span>g</span>.<span>timer_started</span> <span>=</span> <span>false</span>
            <span>vim</span>.<span>cmd</span>(<span><span>&#39;</span>silent write<span>&#39;</span></span>)
        <span>end</span>)
    <span>end</span>
})</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Configuring message timeout</h3><a id="user-content-configuring-message-timeout" aria-label="Permalink: Configuring message timeout" href="#configuring-message-timeout"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Due to space constraints, the external command line covers part of the buffer. This can be a problem as sometimes neovim will send a message that tells Firenvim to draw the command line, and then never send the message to tell Firenvim to stop displaying it. In order to work around this problem, a &#34;cmdlineTimeout&#34; configuration option has been implemented, which makes Firenvim hide the external command line after the cursor has moved and some amount of milliseconds have passed:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config = {
    globalSettings = {
        cmdlineTimeout = 3000
    }
}"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span> <span>=</span> {
    <span>globalSettings</span> <span>=</span> {
        <span>cmdlineTimeout</span> <span>=</span> <span>3000</span>
    }
}</pre></div>

<p dir="auto">It is possible to configure the name of the file used by Firenvim with the <code>filename</code> localSetting. This setting is a format string where each element in curly braces will be replaced with a value and where the maximum length can be specified with a percentage. Possible format elements are <code>hostname</code> (= the domain name of the website), <code>pathname</code> (= the path of the page), <code>selector</code> (= the CSS selector of the text area), <code>timestamp</code> (= the current date) and <code>extension</code> (the language extension when using Firenvim on a code editor or <code>txt</code> otherwise). For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config = {
    localSettings = {
        [&#39;.*&#39;] = {
            filename = &#39;/tmp/{hostname}_{pathname%10}.{extension}&#39;
        }
    }
}"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span> <span>=</span> {
    <span>localSettings</span> <span>=</span> {
        [<span><span>&#39;</span>.*<span>&#39;</span></span>] <span>=</span> {
            <span>filename</span> <span>=</span> <span><span>&#39;</span>/tmp/{hostname}_{pathname%10}.{extension}<span>&#39;</span></span>
        }
    }
}</pre></div>
<p dir="auto">Will result in Firenvim using <code>/tmp/github.com_issues-new.txt</code> on Github&#39;s new issue page. The default value of this setting is <code>{hostname%32}_{pathname%32}_{selector%32}_{timestamp%32}.{extension}</code>.</p>

<p dir="auto">Some keybindings, such as <code>&lt;C-n&gt;</code>, <code>&lt;C-t&gt;</code> and <code>&lt;C-w&gt;</code> are not overridable through usual means. This means that you have to tell your browser to let Firenvim override them by using <a href="https://support.mozilla.org/en-US/kb/manage-extension-shortcuts-firefox" rel="nofollow">the shortcuts menu in <code>about://addons</code></a> on Firefox and <code>chrome://extensions/shortcuts</code> in Chrome.</p>
<p dir="auto">When it is possible to do so, if you press one of these keyboard shortcuts while not in a Firenvim frame, Firenvim will attempt to emulate the expected behavior of the shortcut. For example, pressing <code>&lt;C-w&gt;</code> in a Firenvim frame will tell neovim you pressed <code>&lt;C-w&gt;</code>, but outside of it it will tell the browser to close the current tab.</p>
<p dir="auto">Controlling whether Firenvim should attempt to emulate the browser&#39;s default behavior can be done with global settings. The following snippet will tell Firenvim to simulate <code>&lt;C-n&gt;</code>&#39;s default behavior while never simulating <code>&lt;C-w&gt;</code>&#39;s:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g.firenvim_config = {
    globalSettings = {
      [&#39;&lt;C-w&gt;&#39;] = &#39;noop&#39;,
      [&#39;&lt;C-n&gt;&#39;] = &#39;default&#39;
    }
}"><pre><span>vim</span>.<span>g</span>.<span>firenvim_config</span> <span>=</span> {
    <span>globalSettings</span> <span>=</span> {
      [<span><span>&#39;</span>&lt;C-w&gt;<span>&#39;</span></span>] <span>=</span> <span><span>&#39;</span>noop<span>&#39;</span></span>,
      [<span><span>&#39;</span>&lt;C-n&gt;<span>&#39;</span></span>] <span>=</span> <span><span>&#39;</span>default<span>&#39;</span></span>
    }
}</pre></div>
<p dir="auto">Note that on Firefox on Linux some keyboard shortcuts might not be overridable. I circumvent this issue by running a <a href="https://github.com/glacambre/firefox-patches">patched</a> version of Firefox (note: once Firefox is patched, you won&#39;t need to setup webextension keyboard shortcuts).</p>

<ul dir="auto">
<li><a href="https://github.com/tridactyl/tridactyl">Tridactyl</a>, provides vim-like keybindings to use Firefox. Also lets you edit input fields and text areas in your favourite editor with its <code>:editor</code> command.</li>
<li><a href="https://github.com/GhostText/GhostText">GhostText</a>, lets you edit text areas in your editor with a single click. Requires installing a plugin in your editor too. Features live updates!</li>
<li><a href="https://github.com/jlebon/textern">Textern</a>, a Firefox addon that lets you edit text areas in your editor without requiring you to install a plugin in your editor.</li>
<li><a href="https://github.com/asamuzaK/withExEditor">withExEditor</a>, same thing as Textern, except you can also edit/view a page&#39;s source with your editor.</li>
</ul>
</article></div></div>
  </body>
</html>
