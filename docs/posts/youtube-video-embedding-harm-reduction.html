<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dustri.org/b/youtube-video-embedding-harm-reduction.html">Original</a>
    <h1>YouTube video embedding harm reduction</h1>
    
    <div id="readability-page-1" class="page"><div role="main">
      <section id="content">
        <article>
          <header>
            <h2>
              <a href="https://dustri.org/b/youtube-video-embedding-harm-reduction.html" rel="bookmark" title="Permalink to Youtube video embedding harm reduction">Youtube video embedding harm reduction</a>
               <p>
                 Tue 27 February 2024 â€” <a href="https://dustri.org/b/youtube-video-embedding-harm-reduction.markdown">download</a><br/>
               </p>
            </h2>
          </header>
          <div>
            <p>Embedding external content on a website in the current enshittocene period is
more annoying than ever, so here is a copy-pasteable snippet to embed a youtube
video while reducing its tracking and nuisance capabilities as much as possible:</p>
<div><pre><span></span><code><span>&lt;</span><span>iframe</span>
    <span>credentialless</span>
    <span>allowfullscreen</span>
    <span>referrerpolicy</span><span>=</span><span>&#34;no-referrer&#34;</span>
    <span>sandbox</span><span>=</span><span>&#34;allow-scripts allow-same-origin&#34;</span>
    <span>allow</span><span>=</span><span>&#34;accelerometer &#39;none&#39;; ambient-light-sensor &#39;none&#39;; autoplay &#39;none&#39;; battery &#39;none&#39;; browsing-topics &#39;none&#39;; camera &#39;none&#39;; display-capture &#39;none&#39;; domain-agent &#39;none&#39;; document-domain &#39;none&#39;; encrypted-media &#39;none&#39;; execution-while-not-rendered &#39;none&#39;; execution-while-out-of-viewport &#39;&#39;; gamepad &#39;none&#39;; geolocation &#39;none&#39;; gyroscope &#39;none&#39;; hid &#39;none&#39;; identity-credentials-get &#39;none&#39;; idle-detection &#39;none&#39;; local-fonts &#39;none&#39;; magnetometer &#39;none&#39;; microphone &#39;none&#39;; midi &#39;none&#39;; otp-credentials &#39;none&#39;; payment &#39;none&#39;; picture-in-picture &#39;none&#39;; publickey-credentials-create &#39;none&#39;; publickey-credentials-get &#39;none&#39;; screen-wake-lock &#39;none&#39;; serial &#39;none&#39;; speaker-selection &#39;none&#39;; usb &#39;none&#39;; window-management &#39;none&#39;; xr-spatial-tracking &#39;none&#39;&#34;</span><span>,</span>
    <span>csp</span><span>=</span><span>&#34;sandbox allow-scripts allow-same-origin;&#34;</span>
    <span>width</span><span>=</span><span>&#34;560&#34;</span>
    <span>height</span><span>=</span><span>&#34;315&#34;</span>
    <span>src</span><span>=</span><span>&#34;https://www.youtube-nocookie.com/embed/jfKfPfyJRdk&#34;</span>
    <span>title</span><span>=</span><span>&#34;lofi hip hop radio ðŸ“š - beats to relax/study to&#34;</span>
    <span>frameborder</span><span>=</span><span>&#34;0&#34;</span>
    <span>loading</span><span>=</span><span>&#34;lazy&#34;</span>
<span>&gt;&lt;/</span><span>iframe</span><span>&gt;</span>
</code></pre></div>

<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/IFrame_credentialless"><code>credentialless</code></a> to load youtube in a blank disposable context,
  without access to the origin&#39;s network, cookies, and storage data.</li>
<li><code>allowfullscreen</code> because some people like it</li>
<li><code>referrerpolicy</code> set to not leak your <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer">referer</a></li>
<li><code>sandbox</code> to only allow javascript execution and SOP. Downloads, forms,
  modals, screen orientation, pointer lock, popups, presentation session,
  <a href="https://developer.mozilla.org/en-US/docs/Web/API/Storage_Access_API">storage access</a> and thus third-party cookies, 
  top-navigation, â€¦ are all denied.</li>
<li><code>allow</code> with <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy#directives">every single directives</a>
  set to &#34;absolutely-fucking-not&#34;, and yes, they have to be all set one by one,
  because there is <a href="https://github.com/w3c/webappsec-permissions-policy/issues/208">no deny-all in the spec</a>. No doubt
  this spec was designed with end-users&#39; privacy and security in mind.</li>
<li><code>src</code> set to <code>www.youtube-nocookie.com</code> instead of <code>youtube.com</code>. Both
   are official Google urls, but the former doesn&#39;t do tracking via cookies,
   and disables API and interaction and interaction logging. Amusingly, it&#39;s
   the player used on <code>whitehouse.gov</code>.</li>
<li><code>csp</code> set to <code>sandbox allow-scripts allow-same-origin;</code> for compatibility&#39;s
  sake, just in case.
  I&#39;d love to use a more restrictive policy, but the spec doesn&#39;t allow to
  provide one, except if the embedded website explicitly allows it, and of
  course youtube doesn&#39;t.</li>
<li><code>loading=&#34;lazy&#34;</code> in case people don&#39;t scroll far enough to see the video, no
  need to make them do queries to Google for no reasons.</li>
</ul>
<p>Don&#39;t forget to put a <code>title</code> for <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#accessibility_concerns">accessibility&#39;s sake</a>.</p>
          </div>
        </article>
      </section>
  </div></div>
  </body>
</html>
