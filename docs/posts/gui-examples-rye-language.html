<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ryelang.org/cookbook/rye-fyne/examples/">Original</a>
    <h1>GUI Examples – Rye Language</h1>
    
    <div id="readability-page-1" class="page"><div>
  <p>Rye started out focused on ‘backed development’ and ‘interactive use in console’ and it still is. But <strong><a href="https://fyne.io/">Go’s Fyne GUI library</a></strong> was just too tempting not to try to integrate. It’s easy to deploy, works on desktop and mobile platforms and keeps getting better.</p>
<p>If the code below doesn’t always make sense to you, check out <a href="https://ryelang.org/meet_rye/">Meet Rye</a>, especially the part about <a href="https://ryelang.org/meet_rye/specifics/opwords/">op and pipe-words</a>.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="hello-fyne-world">Hello fyne world</h2>
<p>What’s new: <code>app</code> <code>window</code> <code>label</code> <code>set-content</code> <code>show-and-run</code></p>
<p>We’ll start with a Hello world app. We can see the basic building blocks of every Fyne app here, constructor functions for <code>app</code>, <code>window</code> and a widget <code>label</code> and functions <code>set-content</code> and <code>show-and-run</code>.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/hello_fyne_world_s.png" alt="Hello fyne World"/></p>
<pre><code>do\in fyne { 
	
	win: app .window &#34;Hello&#34;
	win .set-content label &#34;Hello fyne world!&#34;
	win .show-and-run	
}
</code></pre>
<h2 id="first-layout">First layout</h2>
<p>What’s new: <code>h-box</code> <code>v-box</code></p>
<p>Fyne uses various layout components that you can combine to declaratively lay out the widgets. The two very basic ones are horizontal and vertical boxes <code>h-box</code> and <code>v-box</code>.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/layouts.png" alt="layouts"/></p>
<pre><code>do\in fyne { 
	
	win: app .window &#34;Layouts&#34;
	win .set-content v-box [ 
		h-box [
			label &#34;Don&#39;t look RIGHT&#34;
			label &#34;Don&#39;t look LEFT&#34;
		]
		label &#34;Don&#39;t look UP&#34;
	]
	win .show-and-run	
}
</code></pre>
<h2 id="button-and-spacer">Button and spacer</h2>
<p>What’s new: <code>button</code> <code>set-text</code> <code>layout-spacer</code> <code>resize</code></p>
<p>A button comes with a callback function that gets called when the button is clicked. <code>does</code> is a Rye function that creates a function with no arguments.</p>
<p>Since we want the button in this case to remain at the bottom of our window, when we resize it, we also add a <code>layout-spacer</code>, which takes that extra space that is available, in this case vertically.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/button.png" alt="Button"/></p>
<pre><code>do\in fyne { 

	lab: label &#34;I&#39;m Waiting ...&#34;
	btn: button &#34;Click here&#34; does { lab .set-text &#34;Finally ...&#34; }
	box: v-box [ lab layout-spacer btn ]
	
	with app .window &#34;Button&#34; {
		.resize size 200.0 100.0 ,
		.set-content box ,
		.show-and-run
	}
}
</code></pre>
<h2 id="feedback-form">Feedback form</h2>
<p>What’s new: <code>entry</code> <code>multi-line!</code> <code>select</code> <code>get-text</code> <code>show-pop-up</code></p>
<p>Let’s now combine an entry widget, make it multi-line, a select field and a button to make our first potentially practical applet.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/feedback.png" alt="Feedback form"/></p>
<pre><code>do\in fyne {

	app .window &#34;Feedback&#34; :win
	
	cont: v-box [
		label &#34;Send us feedback:&#34;
		entry .multi-line! true :ent
		select [ &#34;Happy&#34; &#34;Normal&#34; &#34;Confused&#34; ] fn { v } { }
		|place-holder! &#34;How do you feel ...&#34;
		button &#34;Send&#34; does {
			msg: ent .text?
			show-pop-up label &#34;Sending: &#34; + msg  win .canvas
		}
	]
	
	win |set-content cont |show-and-run
}
</code></pre>

<p><em>By Rye convention a <code>noun!</code> means set-noun, and <code>noun?</code> means get-noun. This is also used in Fyne bindings to name functions that set and get Fynes structs’ properties.</em></p>
<h2 id="live-clock">Live clock</h2>
<p>What’s new: <code>go (goroutines)</code></p>
<p>Rye inherits awesome goroutines from Go and Fyne seems to works very nicely with them. So doing live updates to the GUI (main thread) from a paralel “process”, like a goroutine, is just as simple as it could be.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/clock.gif" alt="Date &amp; Time"/></p>
<pre><code>do\in fyne { 

	lab: label &#34;&lt;date &amp; time&gt;&#34;

	update-time: does { lab .set-text now .to-string }

	go does { forever { sleep 100 , update-time } }
	
	with app .window &#34;Date &amp; Time&#34; {
		.set-content lab ,
		.show-and-run
	}
}
</code></pre>
<h2 id="my-home">My home</h2>
<p>What’s new: <code>canvas-image-from-file</code> <code>fill-mode!</code></p>
<p>In fact, goroutines get handy in a lot of cases. Imagine we are making an app that display basic live information about our home. Let’s throw in an example of using an image also.</p>
<p>This app simulates reading outside temperature from a sensor that updates every 300 milliseconds.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/home_app.gif" alt="My home"/></p>
<pre><code>Sensors: context {
	; dummy sensor
	get-temperature: does { sleep 300 , 20 + random-integer 12 }
}

do\par fyne {

	win: app .window &#34;My Home&#34;

	temp: label &#34;Reading ...&#34;
	img: canvas-image-from-file &#34;home.png&#34;
	img .fill-mode! canvas-image-fill-original
	
	go fn { } {
		sleep 3 .seconds  ; waiting for sensors to wake up
		forever {
			Sensors/get-temperature .to-string + &#34; °C&#34;
			|concat* &#34;Outside temp: &#34;
			|set-text* temp ,
			sleep 1 .seconds
		}
	}
	
	with win  {
		.set-content v-box [ img temp ] ,
		.show-and-run
	}
}
</code></pre>
<h2 id="signup-form">Signup form</h2>
<p>What’s new: <code>form</code> <code>password-entry</code> <code>check</code> <code>disable</code> <code>enable</code></p>
<p>Back to more static world. Fyne has this nice concept of <code>form</code>-s, which is very handy. You can fill the right side of the form item with any widget.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/form.png" alt="Form"/></p>
<pre><code>do\in fyne {
	
	win: app .window &#34;Form&#34;

	btn: disable button &#34;Sign up&#34; does {
		show-pop-up label &#34;You rock!&#34;  win .canvas
	} 

	cont: form [
		form-item &#34;Username&#34; entry
		form-item &#34;Password&#34; password-entry 
		form-item &#34;Terms&#34; chk: check &#34;I fully agree&#34; 
		                       fn { v } { btn .enable }
		form-item &#34;&#34; btn
	]

	win .set-content cont |show-and-run
}
</code></pre>
<h2 id="1-million-items-list">1 million items list</h2>
<p>What’s new: <code>list</code></p>
<p>Fyne handles lists in a quite simple and effective way. To construct a list you give constructor function <code>list</code> 3 functions.
First returns the number of items, second constructs and the widget(s) for an item and in the third you update the given widgets
for a given row index. In this way Fyne reuses list item widgets and can basically display lists of any size.</p>
<p>Below we create a list with 1 million line items and it works with no performance problems.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/1millionlist.png" alt="1 million list"/></p>
<pre><code>do\par fyne {

	lst: list does { 1000000 }
	does { label &#34;num&#34; }
	fn { i item } { item .set-text to-string i + 1 }

	app .window &#34;1 million list&#34;
	|resize size 220.0 200.0
	|set-content lst
	|show-and-run
}
</code></pre>
<h2 id="players-list">Players’ list</h2>
<p>What’s new: <code>list</code> <code>h-box</code> <code>set-title</code></p>
<p>To me at least the main indicator of GUI framework’s elegance is to see how it handles lists with composed list items. Fyne’s approach does very good in this regard.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/list_gastown.png" alt="Gastown bingo players"/></p>
<pre><code>players: { { &#34;WildJane&#34; 5210 } { &#34;MadBob&#34; 4991 } { &#34;GreeNoob&#34; 12 } }

do\par fyne { 

	win: app .window &#34;Wroom ...&#34;
	
	lst: list does { length? players }
	does { h-box [ label &#34;name&#34; label &#34;score&#34; ] }
	fn { i box } { set! box .objects? { name score }
		name .set-text 0 &lt;- i &lt;- players
		score .set-text to-string 1 &lt;- i &lt;- players }
	
	with win {
		.resize size 220.0 200.0 ,
		.set-content lst ,
		.set-title &#34;Gastown bingo players&#34; ,
		.show-and-run
	}
}
</code></pre>
<h2 id="multiplication-table">Multiplication table</h2>
<p>What’s new: <code>table</code> <code>row?</code> <code>col?</code></p>
<p>Fyne also has tables that are conceptually very similar to Lists.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/multiplication_table.png" alt="Multiplication table"/></p>
<pre><code>do\par fyne { 

	win: app .window &#34;Multiplication table&#34;
	
	tab: table does { [ 10 10 ] }
	does { label &#34;...&#34; }
	fn { i o } {
		r: 1 + i .row? , c: 1 + i .col?
		o .set-text to-string r * c
	}
	
	with win {
		.resize size 330.0 400.0 ,
		.set-content tab ,
		.show-and-run
	}
}
</code></pre>
<h2 id="percentages-clock">Percentages clock</h2>
<p>What’s new: <code>progress-bar</code></p>
<p>Progress bars often have to be updated from another “thread”. With Fyne / Goroutines / Rye this is again no problem at all.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/percentage_clock.gif" alt="Percentages clock"/></p>
<pre><code>do\in fyne {

	app .window &#34;Percentage Clock&#34; :win
	
	cont: v-box [
		label &#34;Year:&#34; :ly
		progress-bar :py
		label &#34;Today&#39;s hours:&#34;
		progress-bar :ph
		label &#34;Minutes:&#34;
		progress-bar :pm
		label &#34;Seconds:&#34;
		progress-bar :ps
	]

	leap-year: fn { y } { all { y .multiple-of 4  not y .multiple-of 100  not y .multiple-of 400 } }
	days-in: fn { y } { .leap-year .either { 366 } { 365 } }
	
	go fn\par { } current {
		forever {
			now
			|pass { .year? ::y |concat* &#34;Year &#34; |set-text* ly }
			|pass { .year-day? / days-in y  |set-value* py }
			|pass { .hour?     / 24 |set-value* ph }
			|pass { .minute?   / 60 |set-value* pm }
			|pass { .second?   / 60 |set-value* ps }
			sleep 500
		}
	}
	
	win |resize size 300.0 200.0 |set-content cont |show-and-run
}
</code></pre>
<h2 id="csv-file-in-a-table">CSV file in a table</h2>
<p>What’s new: <code>header?</code> <code>show-header-row!</code> <code>update-header!</code></p>
<p>Rye comes with the Spreadsheet value type. Here we load it from CSV and then display it in a Fyne table.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/lotr_team.png" alt="LOTR team"/></p>
<pre><code>team: load\csv %lotr_team.csv

do\par fyne { 

	win: app .window &#34;LOTR Team&#34;
	
	tab: table does { [ team .length? team .header? .length? ] }
	does { label &#34;.......................&#34; }
	fn { i o } {
		row: i .row? , col: i .col?
		team -&gt; row -&gt; col |set-text* o
	}
	|show-header-row! true
	|update-header! fn { i o } {
		team .header? -&gt; i .col? |to-string .set-text* o
	}
	
	with win {
		.resize size 350.0 300.0 ,
		.set-content tab ,
		.show-and-run
	}
}
</code></pre>

<p>What’s new: <code>button-with-icon</code> <code>objects?</code> <code>set-checked</code> <code>place-holder!</code> <code>on-submitted!</code> <code>refresh</code></p>
<p>This is a very simple work in progress app with simple state management using a Rye’s spreadsheet value type. Spreadsheets were like other values in Rye basically immutable data strucures, so they can’t be
efficietly used as a app-level “database”. We are changing some things so they can also be usefull in this situation. While the default use is still immutable.</p>
<p><img src="https://ryelang.org/cookbook/rye-fyne/shopping_list.png" alt="shoping list app"/></p>
<pre><code>Data: context {

	add!: fn { task } { change! tasks .add-row task &#39;tasks }
	remove!: fn { idx } { print &#34;Delete row: &#34; + idx } ; tasks .remove-row! idx }
	check!: fn { idx val } { print &#34;Check row: &#34; + idx } ; tasks .update-row idx [ &#39;done val ] } }
	
	tasks: spreadsheet { &#39;done &#39;text } {
		0 &#34;Goat cheese&#34;
		0 &#34;Eggs&#34;
		0 &#34;Oats&#34;
		0 &#34;Anchovies&#34;
		0 &#34;Bread&#34;
		0 &#34;A4 paper&#34; }
}

do\par fyne { 

	win: app .window &#34;Shopping List&#34;

	lst: list
	does { length? Data/tasks }
	does {
		idx: hide label &#34;idx&#34;
		h-box [
			check &#34;&#34; 
			  fn\par { v } current { print &#34;Check row: &#34; + idx .text? }
			label &#34;&#34;
			idx
			layout-spacer
			button-with-icon &#34;&#34; delete-icon 
			  fn\par { } current { Data/remove! to-integer idx .text? }
		]
	}
	fn { i box } { 
		set! box .objects? { chk lbl hdn xo btn }
		chk .set-checked 0 &lt;- i &lt;- Data/tasks
		lbl .set-text 1 &lt;- i &lt;- Data/tasks
		hdn .set-text to-string i
	}

	input: entry
	|place-holder! &#34;Add to list here ...&#34;
	|on-submitted! fn { x } {
		Data/add! [ 0 x ]
		input .set-text &#34;&#34;
		lst .refresh
	}

	cont: border nil input nil nil [ lst ]
	
	with win {
		.resize size 300.0 300.0 ,
		.set-content cont ,
		.show-and-run
	}
}
</code></pre>
<h2 id="there-is-more">There is more</h2>
<p>These are not all Fyne’s components at all, so this document will get part 2 in the future.  Thanks for reading this so far.</p>
<p>Current version: <strong>09/24/2024</strong></p>

<ul>
<li>
<p><a href="https://ryelang.org">Rye language</a></p>
</li>
<li>
<p><a href="https://fyne.io">Fyne GUI library</a></p>
</li>
<li>
<p><a href="https://github.com/refaktor/rye">Rye language</a> - main language repository</p>
</li>
<li>
<p><a href="https://github.com/refaktor/rye-fyne">Rye-Fyne project</a> - Rye extended with Fyne</p>
</li>
<li>
<p><a href="https://github.com/refaktor/rye-fyne">ryegen</a> - binding generator</p>
</li>
</ul>

</div></div>
  </body>
</html>
