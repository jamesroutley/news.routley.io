<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://architecturenotes.co/fallacies-of-distributed-systems/">Original</a>
    <h1>Fallacies of distributed systems</h1>
    
    <div id="readability-page-1" class="page"><article>
		<div>
				
		<p>The mass adoption of microservices has forced more engineers to understand the implications of that decision within their systems.</p><p>I often see these 8 fallacies generally ignored or downplayed when discussing system design.</p><p>I thought it might be fun to cover them and their potential mitigations.</p><div data-kg-toggle-state="close"><div><p>Microservices - also known as the microservice architecture - is an architectural style that structures an application as a collection of services that are</p><ul><li>Highly maintainable and testable</li><li>Loosely coupled</li><li>Independently deployable</li><li>Organized around business capabilities</li><li>Owned by a small team</li></ul><p>The microservice architecture enables the rapid, frequent and reliable delivery of large, complex applications. It also enables an organization to evolve its technology stack.</p></div></div><h2 id="the-network-is-reliable">The network is reliable</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-04.jpg" alt="" loading="lazy" width="1284" height="805" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-04.jpg 600w, https://architecturenotes.co/content/images/size/w1000/2022/06/8-lessons-v2-separate-04.jpg 1000w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-04.jpg 1284w" sizes="(min-width: 720px) 720px"/></figure><p>To build a reliable system, you have to understand and come to terms with the fact that any particular communication can fail; Therefore, we need to provide a way for systems to deal with this potential miscommunication. So ultimately, this comes down to retransmission, which can come in many forms.</p><p>One such pattern is the <strong>store and forward</strong> pattern. Instead of sending the data directly to the downstream server, we store it locally or elsewhere. This also allows for recovery in catastrophic scenarios where a simple retry loop would have lacked such guarantees.</p><p>There are multitudes of technologies that fit his pattern <a href="https://www.rabbitmq.com">RabbitMQ</a>, <a href="https://activemq.apache.org">ActiveMQ</a> and various proprietary solution from your favourite cloud vendor. ¬†</p><div><p>üê¶</p><p>We are hoping to build the largest system design community on the internet! We would love for you to join us. You can find us here on <a href="https://twitter.com/arcnotes">Twitter</a>.</p></div><h2 id="latency-is-zero">Latency is zero</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-05.jpg" alt="" loading="lazy" width="827" height="890" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-05.jpg 600w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-05.jpg 827w" sizes="(min-width: 720px) 720px"/><figcaption>Pictured on the right is the time to access memory in a modern system, on the left the time it takes to do a round trip across the world.¬†</figcaption></figure><p>I like to think about latency as strictly overhead to get any request done. Message can be large, or it can be small, and latency is unchanged. Unlike bandwidth, latency usually has to do with the speed of light and the communication distance (or path). So the distance between the two systems plays a significant role here.</p><p>Latency is omnipresent. It occurs in all communication.</p><p>Ideally, this overhead should be small as possible. Latency is very similar to unloading groceries from the car. ¬†The time it takes you to travel ¬†from the kitchen to the car is latency.</p><p>Do you want to grab as much as you can in one trip, or do you want to bring the items individually, taking several hundred round-trips to unload the car?<br/></p><div data-kg-toggle-state="close"><div><p>A content delivery network (CDN) refers to a geographically distributed group of servers which work together to provide fast delivery of Internet content.</p><p>A CDN allows for the quick transfer of assets needed for loading Internet content including HTML pages, javascript files, stylesheets, images, and videos. The popularity of CDN services continues to grow, and today the majority of web traffic is served through CDNs, including traffic from major sites like Facebook, Netflix, and Amazon.</p></div></div><p>Content delivery networks and edge computing are essentially trying to make the distance between the fridge and trunk as close as possible. By duplicating the data closer to where it is needed we significantly reduce latency. </p><h2 id="bandwidth-is-infinite">Bandwidth is infinite</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-01.jpg" alt="" loading="lazy" width="1240" height="423" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-01.jpg 600w, https://architecturenotes.co/content/images/size/w1000/2022/06/8-lessons-v2-separate-01.jpg 1000w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-01.jpg 1240w" sizes="(min-width: 720px) 720px"/></figure><p>Assuming that you continue to increase data size on a channel without limit; can be quite the mistake. This problem only turns its head when scale difficulties enter the conversation, and specific communication channels hit their limits.</p><p>I first ran into this problem when I accidentally increased the payload that my homepage needed to function by a factor of 10. This specific API was an uncached call for 3 MBs on every page load. This included a round trip to the database as well for the entire payload. </p><p>We quickly hit several bandwidth limits in our system, which brought the site down fairly quickly.</p><p>Now you may be thinking ¬†<em>you just told me to take as much as I could on each round trip</em> to reduce the effects of latency. That is true, but it does have its limits. This depend highly on your systems design and respective priorities but being aware of the trade off is critically important.</p><h2 id="the-network-is-secure">The network is secure</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-06.jpg" alt="" loading="lazy" width="717" height="713" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-06.jpg 600w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-06.jpg 717w"/></figure><p>Assuming you can trust the network you are on or the people you are building your system for can be a crucial mistake.</p><p>Nowadays, this has become even more apparent with the advent of crowdsourced bug bounty programs and significant exploits in the news every day.</p><p>Taking a security-first stance when designing your systems will reap dividends in the future. Even taking the time to assess your current system for security vulnerabilities can be a great place to start and will quickly produce a short list for improvement.</p><h2 id="topology-doesnt-change">Topology doesn&#39;t change</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-07.jpg" alt="" loading="lazy" width="827" height="629" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-07.jpg 600w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-07.jpg 827w" sizes="(min-width: 720px) 720px"/></figure><p>Network structure won&#39;t always be the same. For example, if a critical piece of infrastructure goes down, can the traffic continue to flow to appropriate destinations? Do we have single point of failure?</p><p>With the advent of Docker and Kubernetes, the ease of changing network topology now almost makes us take it for granted, almost dangerously so. </p><p>Building systems that can react to these change in topology can be tricky, but ultimately result in much more resilient systems. </p><h2 id="there-is-one-administrator">There is one administrator</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-02.jpg" alt="" loading="lazy" width="614" height="355" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-02.jpg 600w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-02.jpg 614w"/></figure><p>This one took me some time to grasp, essentially saying that you can&#39;t control everything.</p><p>As your systems grow, they will rely on other systems outside your control. So ¬†take a second to think about all the dependencies; you have everything from your code down to the servers you run them on.</p><p>It&#39;s essential to have a clear way of managing your systems and their respective configurations. As the number of systems with various configuration increases it becomes hard to manage and track. ¬†Infrastructure as Code (IaC) can help codify those variations in your systems.</p><p>Having a good way of diagnosing issues when they come up, monitoring and observability will be critical tools that can save you hours.</p><p>Appropriate decoupling can also help ensure overall system resiliency and uptime.</p><div data-kg-toggle-state="close"><div><h4>What is Infrastructure as Code (IaC)?</h4></div><div><p>Infrastructure as Code (IaC) is the managing and provisioning of infrastructure through code instead of through manual processes.</p><p>With IaC, configuration files are created that contain your infrastructure specifications, which makes it easier to edit and distribute configurations. It also ensures that you provision the same environment every time. By codifying and documenting your configuration specifications, IaC aids configuration management and helps you to avoid undocumented, ad-hoc configuration changes.</p></div></div><h2 id="transport-cost-is-zero">Transport cost is zero</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-03.jpg" alt="" loading="lazy" width="650" height="341" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-03.jpg 600w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-03.jpg 650w"/></figure><p>We often think that the resources we use to send data between systems are a simple business cost. Now when things are small, this overhead and cost can be negligible. </p><p>Still, as systems grow, that cost may be worth optimizing message formats like JSON can be a bit heavy (pun intended) compared to transfer optimized formats like gRPC or MessagePack. </p><p>Being aware of such costs is essential; however, it does have its tradeoffs. Doing so early may create more headache than its worth in the near term. </p><h2 id="the-network-is-homogeneous">The network is homogeneous</h2><figure><img src="https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-08.jpg" alt="" loading="lazy" width="1018" height="568" srcset="https://architecturenotes.co/content/images/size/w600/2022/06/8-lessons-v2-separate-08.jpg 600w, https://architecturenotes.co/content/images/size/w1000/2022/06/8-lessons-v2-separate-08.jpg 1000w, https://architecturenotes.co/content/images/2022/06/8-lessons-v2-separate-08.jpg 1018w" sizes="(min-width: 720px) 720px"/></figure><p>I have written my fair share of shims in my day; taking one format of data and transforming it into another.</p><p>We like everything to be clean and tidy, but the real world is far from it. Being interoperable is essential.</p><p>This flexibility ensures our systems continue to function when the &#34;new hot framework&#34; comes into play or when you need to run your new system in environments it wasn&#39;t intended for. (obviously, interoperability has its limits)</p><p>Knowing that all systems aren&#39;t the same and not coupling your solution to one aspect can save you time and headaches down the road. </p><!--kg-card-begin: html--><div>
	<div>
		
		<p><small>Processing your application</small>
			<small>Please check your inbox and click the link to confirm your subscription.</small>
			<small>There was an error sending the email</small>
		</p>
	</div>
</div>
<!--kg-card-end: html--><h2 id="references">References</h2><figure><a href="https://www.networkworld.com/article/3224893/what-is-edge-computing-and-how-it-s-changing-the-network.html"><div><p>What is edge computing and why does it matter?</p><p>With deployments of IoT devices and the arrival of 5G fast wireless, placing compute, storage, and analytics close to where data is created is making the case for edge computing.</p><p><img src="https://idge.staticworld.net/nww/nww_logo_300x300.png" alt=""/><span>Jon Gold and Keith Shaw</span></p></div><p><img src="https://images.idgesg.net/images/article/2017/09/thinkstockphotos-639780580-100735148-large.jpg?auto=webp&amp;quality=85,70" alt=""/></p></a></figure><figure><a href="https://www.rabbitmq.com"><div><p>Messaging that just works ‚Äî RabbitMQ</p><p><img src="https://www.rabbitmq.com/favicon.ico" alt=""/><span>RabbitMQ</span></p></div><p><img src="https://www.rabbitmq.com/img/logo-rabbitmq.svg" alt=""/></p></a></figure><figure><a href="https://activemq.apache.org"><div><p>ActiveMQ</p><p><img src="https://activemq.apache.org/assets/img/favicon.png" alt=""/></p></div><p><img src="https://activemq.apache.org/assets/img/activemq_logo_black_small.png" alt=""/></p></a></figure><figure><a href="https://www.redhat.com/en/topics/automation/what-is-infrastructure-as-code-iac"><div><p>What is Infrastructure as Code (IaC)?</p><p>Infrastructure as Code (IaC) is the managing and provisioning of infrastructure through code instead of through manual processes.</p><p><img src="https://www.redhat.com/misc/favicon.ico" alt=""/><span>Red Hat Summit</span></p></div><p><img src="https://www.redhat.com/profiles/rh/themes/redhatdotcom/img/red-hat-social-share.jpg" alt=""/></p></a></figure><figure><a href="https://www.consul.io"><div><p>Consul by HashiCorp</p><p>Consul is a service networking solution to automate network configurations, discover services, and enable secure connectivity across any cloud or runtime.</p><p><img src="https://www.consul.io/consul/_favicon.ico" alt=""/><span>Consul by HashiCorp</span></p></div><p><img src="https://www.datocms-assets.com/58478/1638544092-og-image.png?fit=max&amp;fm=jpg&amp;w=1000" alt=""/></p></a></figure><figure><a href="https://zookeeper.apache.org"><div><p>Apache ZooKeeper</p><p><img src="https://zookeeper.apache.org/images/favicon.ico" alt=""/><span>Apache ZooKeeper‚Ñ¢</span></p></div><p><img src="https://zookeeper.apache.org/images/zookeeper_small.gif" alt=""/></p></a></figure><figure><a href="https://microservices.io"><div><p>What are microservices?</p><p>Microservices - also known as the microservice architecture - is an architectural style that structures an application as a collection of loosely coupled services, which implement business capabilities. The microservice architecture enables the continuous delivery/deployment of large, complex applic‚Ä¶</p><p><span>Chris Richardson</span></p></div><p><img src="https://microservices.io/i/Microservices-Patterns-Cover-published.png" alt=""/></p></a></figure><figure><a href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing"><div><p>Fallacies of distributed computing - Wikipedia</p><p><img src="https://en.wikipedia.org/static/apple-touch/wikipedia.png" alt=""/><span>Wikimedia Foundation, Inc.</span><span>Contributors to Wikimedia projects</span></p></div><p><img src="https://upload.wikimedia.org/wikipedia/en/thumb/9/99/Question_book-new.svg/50px-Question_book-new.svg.png" alt=""/></p></a></figure>
			</div>
</article></div>
  </body>
</html>
