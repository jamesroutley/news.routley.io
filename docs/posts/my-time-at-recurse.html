<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mytimeatrecurse.substack.com/p/coming-soon">Original</a>
    <h1>My Time At Recurse</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<figure><p>
<iframe title="WPA2 Wifi on Windows95/98 and DOS Laptops" width="640" height="360" src="https://www.youtube.com/embed/Pc2PUysWG2E?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</p></figure>



<hr/>



<p>My fascination with PCMCIA cards was created out of “necessity”.   Most of my retro computing interest revolves around networking,   and I wanted something that could natively attach to modern Wifi networks without the need to maintain an old linksys router just for my retro computers.   There are many ways to do this, I just wanted something as clean and compact as possible.   I was also left out of being able to use the various ESP based wifi modems as I mainly use an IBM PC110 and it has no serial port without a dock.</p>



<hr/>



<div><figure><img loading="lazy" width="1024" height="683" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/EjzKmDgXsAILM8G-1024x683.jfif" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/EjzKmDgXsAILM8G-1024x683.jfif 1024w, https://www.yyzkevin.com/wp-content/uploads/2022/09/EjzKmDgXsAILM8G-300x200.jfif 300w, https://www.yyzkevin.com/wp-content/uploads/2022/09/EjzKmDgXsAILM8G-768x512.jfif 768w, https://www.yyzkevin.com/wp-content/uploads/2022/09/EjzKmDgXsAILM8G.jfif 1314w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure><p>At the start I looked at  butchering existing ethernet cards and  wiring in a wifi232 module coupling together the ethernet PHYs.  This was very sketchy and the module was large, no real hope of scaling it down.   </p></div>



<hr/>



<div><figure><img loading="lazy" width="683" height="1024" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-683x1024.jfif" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-683x1024.jfif 683w, https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-200x300.jfif 200w, https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-768x1152.jfif 768w, https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-1024x1536.jfif 1024w, https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-1365x2048.jfif 1365w, https://www.yyzkevin.com/wp-content/uploads/2022/09/Emhr7frXIAgQ7LB-scaled.jpg 1707w" sizes="(max-width: 683px) 100vw, 683px"/></figure><div>
<p>I quickly moved onto attempting to make my own entire card.   I used a small GAL for  some address decoding, a parallel UART chip and a flash chip along side the esp8266.   This worked quite well and depending on the  crystal selected,  when having the divisor at 0 (usually 115200 baud) it would actually be 460800.  It was quite feasible to fit this onto a board in a tiny case, but  the speed limitations and it only being a  serial interface always had me thinking about an ethernet interface instead of or in addition to the UART.  I did play with SLIP and various ways to use the serial interface to get onto the LAN, but it was not fast enough  or transparent enough for what I wanted.</p>




</div></div>



<hr/>



<div><figure><img loading="lazy" width="727" height="969" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0652.jpg" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0652.jpg 727w, https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0652-225x300.jpg 225w" sizes="(max-width: 727px) 100vw, 727px"/></figure><p>I came back to trying to emulate an NE2000 card on the ESP8266 (also tried ESP32).  It was just too slow though, the interrupt latency on the ESP was already almost my entire 12uS time limit for an I/O cycle, and because of the limited IO on the all the ESP’s I needed to use an I/O expander chip or external multiplexer,   and in both cases it was just so slow there was no chance.  I even played with using a dual-port sram to act as a place to store the CIS on boot and to simulate the registers but there was just no overcoming how slow the ESP was in handling interrupts and  manipulating the external multiplexer or expander.  Maybe there were some other approaches but I put this back on to the back burner.</p></div>



<hr/>



<div><figure><img loading="lazy" width="727" height="969" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0693.jpg" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0693.jpg 727w, https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0693-225x300.jpg 225w" sizes="(max-width: 727px) 100vw, 727px"/></figure><p>Then I saw the work by <a rel="noreferrer noopener" href="https://twitter.com/ianpolpo" target="_blank">Ian Scott</a> on the <a rel="noreferrer noopener" href="https://github.com/polpo/picogus" target="_blank">PicoGUS</a> that was using a Rasberry Pi Pico to talk to an ISA bus.    This brought the Pico to my attention and I quickly connected one to the PCMCIA bus to  play around.  I quickly saw that the interrupt latency for the PIO was very low, and the PIO itself allowed some very fast and easy coordination of the I/O wait signals and other potential multiplexing and that is how I arrived where I am at now.</p></div>



<hr/>



<div><figure><img loading="lazy" width="727" height="969" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0771.jpg" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0771.jpg 727w, https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0771-225x300.jpg 225w" sizes="(max-width: 727px) 100vw, 727px"/></figure><div>
<p>It is a very simple design.    I use a CPLD to handle some of the “glue logic”,  and to deal with the multiplexing, and it has the added benefit of  having 3.3V I/O which is compatible with the Pico, but the I/O is also 5V tolerant which is compatible with the PCMCIA bus.</p>








</div></div>



<hr/>



<div><figure><img loading="lazy" width="727" height="969" src="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0792.jpg" alt="" srcset="https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0792.jpg 727w, https://www.yyzkevin.com/wp-content/uploads/2022/09/IMG_0792-225x300.jpg 225w" sizes="(max-width: 727px) 100vw, 727px"/></figure><div>
<p>Next steps, I would like to  encapsulate it into a card much like the legacy wifi cards.  There will be some bonus functionality available through the USB port operating in host mode.</p>



<p>And depending on mechanical limitations perhaps an audio jack.  That may get left to a larger version of the card with more functionality in the future.   With the Pico there are so many possibilities.</p>




</div></div>
			</div></div>
  </body>
</html>
