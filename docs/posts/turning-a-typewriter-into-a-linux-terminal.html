<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://habr.com/en/post/692488/">Original</a>
    <h1>Turning a Typewriter into a Linux Terminal</h1>
    
    <div id="readability-page-1" class="page"><div data-gallery-root="" lang="en"> <div id="post-content-body"><div><div><div xmlns="http://www.w3.org/1999/xhtml"><p>Hi everyone, a few months ago I got a Brother AX-25, and since then, I&#39;ve been working on turning it into a computer. It uses an Arduino to scan the custom mechanical keyboard and control the typewriter, and a Raspberry Pi is connected to the Arduino over serial so I can log into it in headless mode.</p><figure><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/c35/ab8/8c0/c35ab88c03a15def17c8bfc4bcf995ca.png" width="2560" height="1440" data-src="https://habrastorage.org/getpro/habr/upload_files/c35/ab8/8c0/c35ab88c03a15def17c8bfc4bcf995ca.png"/><figcaption></figcaption></figure><p>This video goes over the design and assembly of it. There&#39;s also a test of the typewriter in action, as well as a sound test at the end of the video.</p><h2>Inspiration</h2><p>Back in high school, one of my friends was working on making a computer using a Z80 for a school project. He had it set up on a few breadboards in a briefcase, and after we talked about it for a bit, we decided that we would try to put it in an old typewriter. We wanted to make our own <a href="https://en.wikipedia.org/wiki/Commodore_64" rel="noopener noreferrer nofollow">Commodore 64</a>. We gutted an old electronic typewriter, but never got around to putting the computer in it. For the past 6 years, I&#39;ve had that typewriter&#39;s shell sitting in my room.</p><p>For a while, I wanted to turn the typewriter into a cyberdeck. I planned on putting a screen in it, and a Raspberry Pi with a hefty battery. I had that idea rolling around in my head until a couple years ago, when I saw <a href="https://www.youtube.com/watch?v=2XLZ4Z8LpEE&amp;t=659s" rel="noopener noreferrer nofollow">CuriousMarc&#39;s video</a> about his teletype turned into a Linux terminal. I wanted to do the same to a typewriter, but I never had the time to do it and couldn’t find a typewriter at any thrift stores. After graduating from college, I finally had enough spare time, and knowledge, to turn a typewriter into a computer, so I went to a thrift store and bought the first electronic typewriter I could find.</p><h2>Functionality</h2><p>I can use <a href="https://youtu.be/JvhT_Bru0AA?t=88" rel="noopener noreferrer nofollow">all sorts Linux commands</a>, and by processing the escape sequences that the Raspberry Pi outputs, it can <a href="https://youtu.be/R64IrgVJKC0?t=137" rel="noopener noreferrer nofollow">automatically toggle the typewriter’s formatting features</a>. I can also <a href="https://youtu.be/q0EehDyZOKk?t=233" rel="noopener noreferrer nofollow">type commands using the typewriter&#39;s keyboard</a>.  </p><p>I&#39;ve also used it to print some ASCII art, I think the results look pretty great!</p><h2>Reverse-engineering and Design</h2><figure><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/3f4/eb4/8a3/3f4eb48a326e76419f035dff7dc6209c.jpg" alt="The typewriter&#39;s keyboard connectors with jumper wires wired up to them" title="The typewriter&#39;s keyboard connectors with jumper wires wired up to them" width="3840" height="2160" data-src="https://habrastorage.org/getpro/habr/upload_files/3f4/eb4/8a3/3f4eb48a326e76419f035dff7dc6209c.jpg" data-blurred="true"/><figcaption>The typewriter&#39;s keyboard connectors with jumper wires wired up to them</figcaption></figure><p>The typewriter’s keyboard is wired up in an 8x11 matrix, and it connects to the typewriter using two connectors, one for the rows, and one for the columns. When you press one of the keys, it connects one of the row pins to a column pin, which the typewriter then detects. To figure out which pair of pins each key corresponds to, I connected each pair by hand one at a time, and wrote down what key was printed. I did this until I had the entire matrix mapped out.</p><figure><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/fbc/3f2/fcd/fbc3f2fcde23d8d96a734d5d5fffe7e3.png" width="1198" height="189" data-src="https://habrastorage.org/getpro/habr/upload_files/fbc/3f2/fcd/fbc3f2fcde23d8d96a734d5d5fffe7e3.png"/><figcaption></figcaption></figure><p>The typewriter uses a 7805 linear regulator to power its 5V components, and I was able to locate an unused 5V pad and ground pad that I can tap into to power my circuit. I had to add a heatsink to the regulator to accommodate for the increased power consumption of my circuit.</p><figure><img src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/7b7/562/a81/7b7562a81a3ce2469c97ae082473c772.png" alt="Schematic for my design" title="Schematic for my design" width="4961" height="3508" data-src="https://habrastorage.org/getpro/habr/upload_files/7b7/562/a81/7b7562a81a3ce2469c97ae082473c772.png"/><figcaption>Schematic for my design</figcaption></figure><h2>Interfacing with the Typewriter</h2><p>The Arduino code is available on <a href="https://github.com/artillect/serial-typewriter" rel="noopener noreferrer nofollow">my GitHub repository</a> if you’d like to look at it in more detail! My Arduino controls the typewriter using two multiplexers, one connected to each of the keyboard connectors. The multiplexer’s signal pins are connected so they can be used to connect pairs of pins on the keyboard connectors together. To send a key, the Arduino selects a pin on each multiplexer to connect them, which tricks the typewriter into thinking that a key has been pressed.</p><figure><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/1f8/d86/a2f/1f8d86a2ff7b520c904d89ee947c944f.jpg" alt="The final circuit all wired up, I had to hand-wire it because I broke the surface-mount multiplexers I was using" title="The final circuit all wired up, I had to hand-wire it because I broke the surface-mount multiplexers I was using" width="1979" height="1979" data-src="https://habrastorage.org/getpro/habr/upload_files/1f8/d86/a2f/1f8d86a2ff7b520c904d89ee947c944f.jpg" data-blurred="true"/><figcaption>The final circuit all wired up, I had to hand-wire it because I broke the surface-mount multiplexers I was using</figcaption></figure><p>The Arduino is connected via serial to the Pi, which has the serial console enabled on its UART pins. I chose to use an Arduino in addition to the Raspberry Pi because I’m more familiar with them, and it makes interfacing with the Raspberry Pi’s UART console much easier. The Arduino and the Raspberry Pi communicate at a rate of 120 characters per second, but the typewriter can only type 12 per second. To prevent long messages from getting cut off, I added serial flow control to my code. This allows the Arduino to tell the Pi when to start and stop sending text. The Raspberry Pi is running Raspberry Pi OS Lite, since I only need access to the terminal.</p><h2>Scanning the Keyboard</h2><p>To scan the keyboard, I used essentially the same circuit; two  multiplexers, one for the rows, one for the columns. The Arduino scans  the keyboard one key at a time by selecting a channel on each  multiplexer. When it detects that a key has been pressed, it sends that  character to the Raspberry Pi so it can be processed.</p><figure><img src="https://habrastorage.org/getpro/habr/upload_files/b0f/cad/9b0/b0fcad9b02403761292a18cc92a469e4.JPG" alt="The original prototype for the keyboard scanning circuit" title="The original prototype for the keyboard scanning circuit" width="3520" height="1980"/><figcaption>The original prototype for the keyboard scanning circuit</figcaption></figure><figure><img src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/c54/6c6/5a8/c546c65a874a42e278b2ed78d6e932e4.jpeg" alt="The final version of the keyboard with the multiplexers wired up to it" title="The final version of the keyboard with the multiplexers wired up to it" width="1024" height="576" data-src="https://habrastorage.org/getpro/habr/upload_files/c54/6c6/5a8/c546c65a874a42e278b2ed78d6e932e4.jpeg" data-blurred="true"/><figcaption>The final version of the keyboard with the multiplexers wired up to it</figcaption></figure><p>I could have used the typewriter’s original keyboard for this project, but I decided to replace it with a custom mechanical keyboard, with Matias Alps Clicky switches, which feel awesome to type on!</p><h2>Conclusion</h2><p>By turning my typewriter into a computer, I was able to recreate the  experience of using a teletype. Now I know what it was like to use Unix in the 1960s when it was originally being developed! The custom mechanical keyboard feels amazing to type on, and is a huge upgrade over the mushy membrane keyboard it originally had. With these upgrades, my typewriter is much more powerful now! </p></div></div></div> <!----> <!----></div> <!----> <!----></div></div>
  </body>
</html>
