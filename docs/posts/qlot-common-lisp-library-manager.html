<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/fukamachi/qlot">Original</a>
    <h1>Qlot: Common Lisp Library Manager</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/fukamachi/qlot/actions"><img src="https://github.com/fukamachi/qlot/workflows/CI/badge.svg" alt="Build Status"/></a>
<a href="https://quickdocs.org/qlot" rel="nofollow"><img src="https://camo.githubusercontent.com/b350660183c5a84ed93d7a3cbae426cc52e2cd799d95a6c54dfecb0e30d6c911/68747470733a2f2f6170692e717569636b646f63732e6f72672f62616467652f716c6f742e737667" alt="" data-canonical-src="https://api.quickdocs.org/badge/qlot.svg"/></a></p>
<p dir="auto"><strong>Qlot</strong> (pronounced <code>kyü-&#39;lät</code>, like culotte) is a project-local library installer using Quicklisp facility. This aims to be like <a href="http://bundler.io" rel="nofollow">Bundler</a> of Ruby or <a href="http://search.cpan.org/~miyagawa/Carton/lib/Carton.pm" rel="nofollow">Carton</a> of Perl.</p>

<ul dir="auto">
<li><a href="#usage">Usage</a></li>
<li><a href="#what-qlot-is-trying-to-solve">What Qlot is trying to solve</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a>
<ul dir="auto">
<li><a href="#automatic-installer-recommended">Automatic installer</a></li>
<li><a href="#via-roswell">via Roswell</a></li>
<li><a href="#via-quicklisp">via Quicklisp</a></li>
<li><a href="#manual-installation">Manual installation</a></li>
<li><a href="#install-from-source">Install from source</a></li>
<li><a href="#via-docker">via Docker</a></li>
</ul>
</li>
<li><a href="#optional-settings">Optional settings</a>
<ul dir="auto">
<li><a href="#asdf-configuration-to-prevent-from-loading-by-mistake">ASDF configuration to prevent from loading by mistake</a></li>
</ul>
</li>
<li><a href="#tutorial">Tutorial</a></li>
<li><a href="#qlfile-syntax">qlfile syntax</a></li>
<li><a href="#priorities-of-distributions">Priorities of distributions</a></li>
<li><a href="#working-with-slime">Working with SLIME</a>
<ul dir="auto">
<li><a href="#lem">Lem</a></li>
<li><a href="#emacs">Emacs</a></li>
<li><a href="#vimneovim">Vim/Neovim</a></li>
</ul>
</li>
<li><a href="#working-with-local-git-repositories">Working with local git repositories</a></li>
</ul>


<div data-snippet-clipboard-copy-content="$ cd /path/to/myapp

# Initialize the project to start using Qlot.
$ qlot init

# Install libraries project-locally.
$ qlot install

# Add the upstream version of a library
$ qlot add mito --upstream

# Add a library from GitHub
$ qlot add fukamachi/anypool

# Update specific libraries
$ qlot update mito

# Run a REPL with a project-local Quicklisp
$ qlot exec sbcl"><pre><code>$ cd /path/to/myapp

# Initialize the project to start using Qlot.
$ qlot init

# Install libraries project-locally.
$ qlot install

# Add the upstream version of a library
$ qlot add mito --upstream

# Add a library from GitHub
$ qlot add fukamachi/anypool

# Update specific libraries
$ qlot update mito

# Run a REPL with a project-local Quicklisp
$ qlot exec sbcl
</code></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content=";; Move to the project root
;; (not necessary if the REPL is invoked by &#39;qlot exec&#39;)
(setf qlot:*project-root* #P&#34;/path/to/project/&#34;)

;; Initialize the project to start using Qlot.
(qlot:init #P&#34;/path/to/project/&#34;)

;; Install libraries project-locally.
(qlot:install)

;; Add the upstream version of a library
(qlot:add :mito :upstream t)

;; Add a library from GitHub
(qlot:add &#34;fukamachi/anypool&#34;)

;; Update specific libraries
(qlot:update :mito)"><pre><span><span>;</span>; Move to the project root</span>
<span><span>;</span>; (not necessary if the REPL is invoked by &#39;qlot exec&#39;)</span>
(<span>setf</span> <span>qlot</span>:<span>*project-root*</span> <span>#P</span><span><span>&#34;</span>/path/to/project/<span>&#34;</span></span>)

<span><span>;</span>; Initialize the project to start using Qlot.</span>
(<span>qlot</span>:init <span>#P</span><span><span>&#34;</span>/path/to/project/<span>&#34;</span></span>)

<span><span>;</span>; Install libraries project-locally.</span>
(<span>qlot</span>:install)

<span><span>;</span>; Add the upstream version of a library</span>
(<span>qlot</span>:add <span>:mito</span> <span>:upstream</span> <span>t</span>)

<span><span>;</span>; Add a library from GitHub</span>
(<span>qlot</span>:add <span><span>&#34;</span>fukamachi/anypool<span>&#34;</span></span>)

<span><span>;</span>; Update specific libraries</span>
(<span>qlot</span>:update <span>:mito</span>)</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">What Qlot is trying to solve</h2><a id="user-content-what-qlot-is-trying-to-solve" aria-label="Permalink: What Qlot is trying to solve" href="#what-qlot-is-trying-to-solve"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We have Quicklisp, the central library registry. It made installation of libraries damn easy.</p>
<p dir="auto">However, what only you can specify is the month of distribution. Which means you have to use all libraries of the same moment and you cannot use a newer/older version of a library for your project.</p>
<p dir="auto">&#34;local-projects/&#34; or ASDF configurations may be a solution to this problem, but there are a couple of problems.</p>
<ol dir="auto">
<li>
<p dir="auto"><em>They are not project-local.</em> If you have multiple projects that use different versions of the same library, it would be a problem.</p>
</li>
<li>
<p dir="auto"><em>They are difficult to fix the version or to update them.</em> If your project needs to work on other than your machine, for instance on other people&#39;s machines or on servers, the version of depending libraries should be the same.</p>
</li>
</ol>
<p dir="auto">This is what Qlot is trying to solve.</p>

<ul dir="auto">
<li><a href="https://github.com/roswell/roswell/">Roswell</a> or <a href="https://www.sbcl.org/" rel="nofollow">SBCL</a></li>
<li>OpenSSL (Unix only)
<ul dir="auto">
<li><strong>[Ubuntu/Debian]</strong> <code>sudo apt install libssl-dev</code></li>
<li><strong>[macOS]</strong> <code>brew install openssl</code></li>
</ul>
</li>
<li>git (for installation from git repositories)</li>
</ul>

<div dir="auto"><h3 tabindex="-1" dir="auto">Automatic installer (recommended)</h3><a id="user-content-automatic-installer-recommended" aria-label="Permalink: Automatic installer (recommended)" href="#automatic-installer-recommended"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="$ curl -L https://qlot.tech/installer | sh"><pre>$ curl -L https://qlot.tech/installer <span>|</span> sh</pre></div>
<p dir="auto">It also requires <code>curl</code> (or <code>wget</code>) and <code>tar</code>.</p>
<p dir="auto">To uninstall Qlot, run a Qlot uninstaller like:</p>
<div data-snippet-clipboard-copy-content="$ ~/.qlot/qlot/scripts/qlot-uninstaller.sh"><pre><code>$ ~/.qlot/qlot/scripts/qlot-uninstaller.sh
</code></pre></div>

<p dir="auto">If you&#39;re already using Roswell, Qlot can be installed by <code>ros install</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Install from the Quicklisp dist
$ ros install qlot
# Or, install the latest version from the git repository
$ ros install fukamachi/qlot

# For older Roswell (Not required since v23.10.14.114 or above)
$ ros -e &#39;(ql:quickload :qlot/distify)&#39;"><pre><span><span>#</span> Install from the Quicklisp dist</span>
$ ros install qlot
<span><span>#</span> Or, install the latest version from the git repository</span>
$ ros install fukamachi/qlot

<span><span>#</span> For older Roswell (Not required since v23.10.14.114 or above)</span>
$ ros -e <span><span>&#39;</span>(ql:quickload :qlot/distify)<span>&#39;</span></span></pre></div>
<p dir="auto">Roswell adds an executable script under <code>$HOME/.roswell/bin</code>. Make sure the directory exists in <code>$PATH</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ which qlot
/Users/fukamachi/.roswell/bin/qlot"><pre>$ which qlot
/Users/fukamachi/.roswell/bin/qlot</pre></div>
<p dir="auto">Run <code>ros update qlot</code> to update Qlot.</p>

<p dir="auto">If <a href="https://www.quicklisp.org/" rel="nofollow">Quicklisp</a> is set up on your home directory, Qlot can be installed by <code>ql:quickload</code>.</p>

<p dir="auto">Use functions exported by <code>qlot</code> package for using Qlot.</p>
<p dir="auto">To update Qlot, run <code>(ql:update-all-dists)</code> in the REPL.</p>

<p dir="auto">If you don&#39;t use both Roswell and Quicklisp for some reason, Qlot also can be installed manually.</p>
<p dir="auto">The advantage of this method is no dependencies are required other than <code>sbcl</code> and <code>OpenSSL</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Getting the latest version
$ curl -sL https://api.github.com/repos/fukamachi/qlot/releases/latest | jq -rM &#39;.name&#39;
1.3.5"><pre><span><span>#</span> Getting the latest version</span>
$ curl -sL https://api.github.com/repos/fukamachi/qlot/releases/latest <span>|</span> jq -rM <span><span>&#39;</span>.name<span>&#39;</span></span>
1.3.5</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="$ curl https://github.com/fukamachi/qlot/releases/download/1.3.5/qlot-1.3.5.tar.gz -o qlot.tar.gz
$ tar xfz qlot.tar.gz
$ cd qlot
$ scripts/setup.sh
$ sudo scripts/install.sh"><pre>$ curl https://github.com/fukamachi/qlot/releases/download/1.3.5/qlot-1.3.5.tar.gz -o qlot.tar.gz
$ tar xfz qlot.tar.gz
$ <span>cd</span> qlot
$ scripts/setup.sh
$ sudo scripts/install.sh</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/fukamachi/qlot
$ cd qlot
$ scripts/setup.sh
$ sudo scripts/install.sh"><pre>$ git clone https://github.com/fukamachi/qlot
$ <span>cd</span> qlot
$ scripts/setup.sh
$ sudo scripts/install.sh</pre></div>
<p dir="auto">To update Qlot, run <code>git pull &amp;&amp; scripts/setup.sh</code>.</p>
<p dir="auto"><strong>WARNING</strong>: Don&#39;t add the Qlot source directory to any ASDF loadable directories, such as <code>~/common-lisp</code> or <code>~/quicklisp/local-projects</code>. ASDF accidentally loads dependencies of Qlot in a REPL even in case you don&#39;t need it. (See also <a href="#asdf-configuration-to-prevent-from-loading-by-mistake">ASDF configuration</a> section)</p>

<p dir="auto"><a href="https://hub.docker.com/r/fukamachi/qlot/" rel="nofollow"><img src="https://camo.githubusercontent.com/6b2ce181b6add351a21c7bbc2f44ea6aea522d52a0d51a05d814005d79e2e148/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f66756b616d616368692f716c6f742e737667" alt="Docker Pulls" data-canonical-src="https://img.shields.io/docker/pulls/fukamachi/qlot.svg"/></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="$ docker run --rm -it fukamachi/qlot"><pre>$ docker run --rm -it fukamachi/qlot</pre></div>
<p dir="auto">You can build it by yourself with <code>docker build</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/fukamachi/qlot
$ cd qlot
$ docker build -t qlot ."><pre>$ git clone https://github.com/fukamachi/qlot
$ <span>cd</span> qlot
$ docker build -t qlot <span>.</span></pre></div>

<div dir="auto"><h3 tabindex="-1" dir="auto">ASDF configuration to prevent from loading by mistake</h3><a id="user-content-asdf-configuration-to-prevent-from-loading-by-mistake" aria-label="Permalink: ASDF configuration to prevent from loading by mistake" href="#asdf-configuration-to-prevent-from-loading-by-mistake"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">ASDF loads any ASD files under a directory <code>~/common-lisp</code> including its subdirectories. It is easily understandable and convenient. However, it will lead to a problematic situation which ASDF accidentally loads libraries under &#34;.qlot/&#34; even in case you don&#39;t need it.</p>
<p dir="auto">To avoid the situation, we recommend not to use <code>~/common-lisp</code> directory, or add the following lines to your Lisp&#39;s init file such as <code>~/.sbclrc</code> for SBCL.</p>
<div data-snippet-clipboard-copy-content=";; .sbclrc
(push &#34;.qlot&#34; asdf::*default-source-registry-exclusions*)
(asdf:initialize-source-registry)"><pre><code>;; .sbclrc
(push &#34;.qlot&#34; asdf::*default-source-registry-exclusions*)
(asdf:initialize-source-registry)
</code></pre></div>
<p dir="auto">Roswell doesn&#39;t require this setting since it ignores directories starting with a dot.</p>



<p dir="auto">It creates 2 files &#34;qlfile&#34; and &#34;qlfile.lock&#34;, and a directory &#34;.qlot/&#34; at the root of your project directory.</p>
<p dir="auto"><code>qlfile</code> is a file clarifying the project dependencies. See <a href="#qlfile-syntax">qlfile syntax</a> for the details.</p>
<p dir="auto"><code>qlfile.lock</code> is similar to <code>qlfile</code> except the library versions are clarified. This will ensure that other developers or your deployment environment use exactly the same versions of libraries you just installed.</p>
<p dir="auto">Make sure you add <code>qlfile</code> and <code>qlfile.lock</code> to your version-controlled repository.</p>
<div data-snippet-clipboard-copy-content="$ git add qlfile qlfile.lock
$ git commit -m &#39;Start using Qlot.&#39;"><pre><code>$ git add qlfile qlfile.lock
$ git commit -m &#39;Start using Qlot.&#39;
</code></pre></div>

<div data-snippet-clipboard-copy-content="$ qlot add &lt;library name&gt;              # Add a new library from Quicklisp explicitly
$ qlot add &lt;library name&gt; --upstream   # Add an upstream version of a Quicklisp library
$ qlot add &lt;username/repository&gt;       # Add a new library from a GitHub repository"><pre><code>$ qlot add &lt;library name&gt;              # Add a new library from Quicklisp explicitly
$ qlot add &lt;library name&gt; --upstream   # Add an upstream version of a Quicklisp library
$ qlot add &lt;username/repository&gt;       # Add a new library from a GitHub repository
</code></pre></div>
<p dir="auto">You can also edit a <code>qlfile</code> file directly. See <a href="#qlfile-syntax">qlfile syntax</a> section to know how to write it. Be sure to run <code>qlot install</code> to install new dependencies.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Updating the project-local Quicklisp</h3><a id="user-content-updating-the-project-local-quicklisp" aria-label="Permalink: Updating the project-local Quicklisp" href="#updating-the-project-local-quicklisp"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can update the version of dependencies via:</p>
<div data-snippet-clipboard-copy-content="$ qlot update

# Update a specific project
$ qlot update mito
$ qlot update mito sxql"><pre><code>$ qlot update

# Update a specific project
$ qlot update mito
$ qlot update mito sxql
</code></pre></div>
<p dir="auto">It will also overwrite <code>qlfile.lock</code>.</p>


<p dir="auto"><code>qlot install</code> will install Quicklisp and libraries that are declared in <code>qlfile</code> project-locally. <code>qlfile.lock</code> will be used with precedence if it exists.</p>


<p dir="auto"><code>qlot update</code> will update the project-local <code>.qlot/</code> directory using <code>qlfile</code>.</p>
<div data-snippet-clipboard-copy-content="$ qlot update

# Update a specific project
$ qlot update mito
$ qlot update mito sxql"><pre><code>$ qlot update

# Update a specific project
$ qlot update mito
$ qlot update mito sxql
</code></pre></div>

<p dir="auto"><code>qlot add</code> will add a line to <code>qlfile</code> and invoke <code>qlot install</code> internally. It replaces an existing line if a library with the same name already exists.</p>
<p dir="auto">Its arguments are same as the qlfile syntax.</p>
<div data-snippet-clipboard-copy-content="$ qlot add mito                                # ql mito
$ qlot add mito --latest                       # ql mito :latest
$ qlot add mito --upstream                     # ql mito :upstream
$ qlot add fukamachi/datafly                   # github datafly fukamachi/datafly
$ qlot add fukamachi/datafly --branch stable   # github datafly fukamachi/datafly :branch stable
$ qlot add ultralisp egao1980-cl-idna          # ultralisp egao1980-cl-idna"><pre><code>$ qlot add mito                                # ql mito
$ qlot add mito --latest                       # ql mito :latest
$ qlot add mito --upstream                     # ql mito :upstream
$ qlot add fukamachi/datafly                   # github datafly fukamachi/datafly
$ qlot add fukamachi/datafly --branch stable   # github datafly fukamachi/datafly :branch stable
$ qlot add ultralisp egao1980-cl-idna          # ultralisp egao1980-cl-idna
</code></pre></div>

<p dir="auto"><code>qlot remove</code> will remove libraries from <code>qlfile</code> and invoke <code>qlot install</code> internally.</p>
<div data-snippet-clipboard-copy-content="$ qlot remove mito
$ qlot remove mito datafly   # can specify multiple names"><pre><code>$ qlot remove mito
$ qlot remove mito datafly   # can specify multiple names
</code></pre></div>

<p dir="auto"><code>qlot exec</code> does following:</p>
<ul dir="auto">
<li>configures ASDF&#39;s source registries;</li>
<li>adds Roswell&#39;s <code>bin</code> directory to the <code>PATH</code> environment variable;</li>
<li>executes given command with arguments.</li>
</ul>
<p dir="auto">Here are few useful commands:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>qlot exec ros emacs</code> - starts Emacs for development. Inferior lisp will use only
systems, installed by <code>qlot install</code>. If you want to use systems from directories other than
current and <code>./.qlot/</code>, then set <code>CL_SOURCE_REGISTRY</code> variable before starting <code>qlot</code>.
This can be useful in case, if you have development versions of some systems, for example,
in <code>~/common-lisp/</code> directory and want to use them during project development:</p>
<div data-snippet-clipboard-copy-content="CL_SOURCE_REGISTRY=~/common-lisp// qlot exec ros emacs"><pre><code>CL_SOURCE_REGISTRY=~/common-lisp// qlot exec ros emacs
</code></pre></div>
<p dir="auto">Read more about <code>CL_SOURCE_REGISTRY</code> in
<a href="https://common-lisp.net/project/asdf/asdf/Shell_002dfriendly-syntax-for-configuration.html" rel="nofollow">asdf&#39;s documentation</a>.</p>
</li>
<li>
<p dir="auto"><code>qlot exec ros build some-app.ros</code> - another command, useful, to build a binary
from systems, fixed in <code>qlfile</code> and <code>qlfile.lock</code>. This way you can be sure that your builds are stable.</p>
</li>
</ul>

<p dir="auto">&#34;qlfile&#34; is a collection of Quicklisp dist declarations. Each line of that represents a dist.</p>
<div data-snippet-clipboard-copy-content="&lt;source&gt; &lt;project name&gt; [arg1, arg2..]"><pre><code>&lt;source&gt; &lt;project name&gt; [arg1, arg2..]
</code></pre></div>
<p dir="auto">Currently, <code>&lt;source&gt;</code> must be one of <code>dist</code>, <code>ql</code>, <code>ultralisp</code>, <code>http</code>, <code>git</code> or <code>github</code>.</p>

<div data-snippet-clipboard-copy-content="ql &lt;project name&gt; &lt;version&gt;
ql &lt;project name&gt;"><pre><code>ql &lt;project name&gt; &lt;version&gt;
ql &lt;project name&gt;
</code></pre></div>
<p dir="auto"><code>ql</code> source will download libraries from Quicklisp official dist.</p>
<p dir="auto">If you want to use Clack in Quicklisp dist of January 13, 2014, qlfile would be like this.</p>

<p dir="auto">If <code>:latest</code> is specified for the version, the latest Quicklisp dist version will be used.</p>
<p dir="auto">If <code>:upstream</code> is specified, Qlot downloads the latest code from the upstream git repository.</p>

<div data-snippet-clipboard-copy-content="ultralisp &lt;project name&gt; &lt;version&gt;
ultralisp &lt;project name&gt;"><pre><code>ultralisp &lt;project name&gt; &lt;version&gt;
ultralisp &lt;project name&gt;
</code></pre></div>
<p dir="auto"><code>ultralisp</code> is same as <code>ql</code> except downloading from Ultralisp.</p>

<div data-snippet-clipboard-copy-content="http &lt;project name&gt; &lt;url&gt; [&lt;file md5&gt;]"><pre><code>http &lt;project name&gt; &lt;url&gt; [&lt;file md5&gt;]
</code></pre></div>
<p dir="auto"><code>http</code> source will download a tarball.</p>
<div data-snippet-clipboard-copy-content="http yason http://netzhansa.com/yason.tar.gz"><pre><code>http yason http://netzhansa.com/yason.tar.gz
</code></pre></div>

<div data-snippet-clipboard-copy-content="git &lt;project name&gt; &lt;repos url&gt;
git &lt;project name&gt; &lt;repos url&gt; :ref &lt;commit ref&gt;
git &lt;project name&gt; &lt;repos url&gt; :branch &lt;branch name&gt;
git &lt;project name&gt; &lt;repos url&gt; :tag &lt;tag name&gt;"><pre><code>git &lt;project name&gt; &lt;repos url&gt;
git &lt;project name&gt; &lt;repos url&gt; :ref &lt;commit ref&gt;
git &lt;project name&gt; &lt;repos url&gt; :branch &lt;branch name&gt;
git &lt;project name&gt; &lt;repos url&gt; :tag &lt;tag name&gt;
</code></pre></div>
<p dir="auto"><code>git</code> source will download libraries from a public git repository.</p>
<div data-snippet-clipboard-copy-content="git clack https://github.com/fukamachi/clack.git"><pre><code>git clack https://github.com/fukamachi/clack.git
</code></pre></div>
<p dir="auto">You can also specify <code>:ref</code>, <code>:branch</code> or <code>:tag</code>.</p>
<div data-snippet-clipboard-copy-content="git clack https://github.com/fukamachi/clack.git :branch develop
git datafly https://github.com/fukamachi/datafly.git :tag v0.7.4
git cl-dbi https://github.com/fukamachi/cl-dbi.git :ref 54928984e5756e92ba298aae51de8b95a6b0cf4b"><pre><code>git clack https://github.com/fukamachi/clack.git :branch develop
git datafly https://github.com/fukamachi/datafly.git :tag v0.7.4
git cl-dbi https://github.com/fukamachi/cl-dbi.git :ref 54928984e5756e92ba298aae51de8b95a6b0cf4b
</code></pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Retrieving from private repository</h4><a id="user-content-retrieving-from-private-repository" aria-label="Permalink: Retrieving from private repository" href="#retrieving-from-private-repository"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Qlot doesn&#39;t authenticate itself, but retrieving from private repository can be done via git&#39;s SSH key authentication. This means, if the current user can <code>git clone</code>, Qlot also would be possible to do it.</p>
<div data-snippet-clipboard-copy-content="git myapp git@github.com:somewrite-adtech/myapp"><pre><code>git myapp git@github.com:somewrite-adtech/myapp
</code></pre></div>

<div data-snippet-clipboard-copy-content="github &lt;username/repository&gt;
github &lt;username/repository&gt; :ref &lt;commit ref&gt;
github &lt;username/repository&gt; :branch &lt;branch name&gt;
github &lt;username/repository&gt; :tag &lt;tag name&gt;"><pre><code>github &lt;username/repository&gt;
github &lt;username/repository&gt; :ref &lt;commit ref&gt;
github &lt;username/repository&gt; :branch &lt;branch name&gt;
github &lt;username/repository&gt; :tag &lt;tag name&gt;
</code></pre></div>
<p dir="auto"><code>github</code> source is similar to <code>git</code>, but it is specifically for GitHub. As it uses GitHub API and tarballs GitHub serves, it doesn&#39;t require &#34;git&#34; command.</p>
<div data-snippet-clipboard-copy-content="github fukamachi/datafly
github fukamachi/datafly :branch develop"><pre><code>github fukamachi/datafly
github fukamachi/datafly :branch develop
</code></pre></div>

<div data-snippet-clipboard-copy-content="local &lt;project name&gt; &lt;directory path&gt;"><pre><code>local &lt;project name&gt; &lt;directory path&gt;
</code></pre></div>
<p dir="auto">Add a directory to the ASDF&#39;s source registry.</p>
<div data-snippet-clipboard-copy-content="local rove ~/Programs/lib/rove"><pre><code>local rove ~/Programs/lib/rove
</code></pre></div>

<div data-snippet-clipboard-copy-content="dist &lt;distribution URL&gt; [&lt;dist version&gt;]"><pre><code>dist &lt;distribution URL&gt; [&lt;dist version&gt;]
</code></pre></div>
<p dir="auto"><code>dist</code> allows to use a custom Quicklisp dist, like Ultralisp.</p>
<div data-snippet-clipboard-copy-content="dist http://beta.quicklisp.org/dist/quicklisp.txt
dist http://dist.ultralisp.org/"><pre><code>dist http://beta.quicklisp.org/dist/quicklisp.txt
dist http://dist.ultralisp.org/
</code></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Priorities of distributions</h2><a id="user-content-priorities-of-distributions" aria-label="Permalink: Priorities of distributions" href="#priorities-of-distributions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If multiple distributions provide the same library, lower ones would take priority over higher ones.</p>

<p dir="auto"><a href="https://github.com/slime/slime">SLIME</a> is the most popular development environment in Common Lisp. However, its REPL always loads the global Quicklisp, not the project-local one.</p>
<p dir="auto">Here&#39;s quick steps to start project-local REPL with SLIME for each text editor:</p>

<ol dir="auto">
<li>Add <a href="https://github.com/lem-project/micros">lem-project/micros</a> to <code>.qlot/local-projects</code>.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/lem-project/micros .qlot/local-projects/micros"><pre>$ git clone https://github.com/lem-project/micros .qlot/local-projects/micros</pre></div>
<ol start="2" dir="auto">
<li>Add the following function to <code>~/.lem/init.lisp</code>.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="(define-command slime-qlot-exec () ()
  (let ((command (first (lem-lisp-mode/implementation::list-roswell-with-qlot-commands))))
    (when command
      (lem-lisp-mode:run-slime command))))"><pre>(define-command slime-qlot-exec () ()
  (<span>let</span> ((command (<span>first</span> (<span>lem-lisp-mode/implementation</span>::list-roswell-with-qlot-commands))))
    (<span>when</span> command
      (<span>lem-lisp-mode</span>:run-slime command))))</pre></div>
<ol start="3" dir="auto">
<li>
<p dir="auto">Relaunch the Lem, or reload the init file with <code>M-x lisp-load-file RET ~/.lem/init.lisp</code>.</p>
</li>
<li>
<p dir="auto">Invoke <code>M-x slime-qlot-exec RET /path/to/project/</code>.</p>
</li>
</ol>

<ol dir="auto">
<li>Add one of the following functions to <code>init.el</code>.</li>
</ol>

<div dir="auto" data-snippet-clipboard-copy-content="(setq slime-lisp-implementations
      &#39;((sbcl (&#34;sbcl&#34;) :coding-system utf-8-unix)
        (qlot (&#34;qlot&#34; &#34;exec&#34; &#34;sbcl&#34;) :coding-system utf-8-unix)))"><pre>(<span>setq</span> slime-lisp-implementations
      &#39;((sbcl (<span><span>&#34;</span>sbcl<span>&#34;</span></span>) <span>:coding-system</span> utf-8-unix)
        (qlot (<span><span>&#34;</span>qlot<span>&#34;</span></span> <span><span>&#34;</span>exec<span>&#34;</span></span> <span><span>&#34;</span>sbcl<span>&#34;</span></span>) <span>:coding-system</span> utf-8-unix)))</pre></div>
<p dir="auto">See the <a href="https://slime.common-lisp.dev/doc/html/Multiple-Lisps.html#Multiple-Lisps" rel="nofollow">SLIME manual</a> to set up multiple Lisps.</p>

<div dir="auto" data-snippet-clipboard-copy-content="(setq sly-lisp-implementations
      &#39;((sbcl (&#34;sbcl&#34;) :coding-system utf-8-unix)
        (qlot (&#34;qlot&#34; &#34;exec&#34; &#34;sbcl&#34;) :coding-system utf-8-unix)))"><pre>(<span>setq</span> sly-lisp-implementations
      &#39;((sbcl (<span><span>&#34;</span>sbcl<span>&#34;</span></span>) <span>:coding-system</span> utf-8-unix)
        (qlot (<span><span>&#34;</span>qlot<span>&#34;</span></span> <span><span>&#34;</span>exec<span>&#34;</span></span> <span><span>&#34;</span>sbcl<span>&#34;</span></span>) <span>:coding-system</span> utf-8-unix)))</pre></div>
<p dir="auto">See the <a href="https://joaotavora.github.io/sly/#Multiple-Lisps" rel="nofollow">Sly manual</a> to set up multiple Lisps.</p>
<ol start="2" dir="auto">
<li>Relaunch the Emacs or load the config file.</li>
<li>Invoke <code>M-- M-x slime RET qlot RET</code>.</li>
</ol>

<ol dir="auto">
<li>Install <a href="https://github.com/vlime/vlime">vlime/vlime</a>.</li>
<li>Add the following code to your Vim/Neovim init.vim.</li>
</ol>
<div data-snippet-clipboard-copy-content="let g:vlime_cl_use_terminal = v:true
let s:vlime_path = &#39;/path/to/vlime&#39;
function! VlimeBuildServerCommandFor_qlot(vlime_loader, vlime_eval)
    return [&#34;qlot&#34;, &#34;exec&#34;, &#34;ros&#34;, &#34;run&#34;,
               \ &#34;--load&#34;, s:vlime_path . &#34;/lisp/load-vlime.lisp&#34;,
               \ &#34;--eval&#34;, vlime_eval]
endfunction
function! VlimeQlotExec()
    call vlime#server#New(v:true, get(g:, &#34;vlime_cl_use_terminal&#34;, v:false), v:null, &#34;qlot&#34;)
endfunction"><pre lang="vimscript"><code>let g:vlime_cl_use_terminal = v:true
let s:vlime_path = &#39;/path/to/vlime&#39;
function! VlimeBuildServerCommandFor_qlot(vlime_loader, vlime_eval)
    return [&#34;qlot&#34;, &#34;exec&#34;, &#34;ros&#34;, &#34;run&#34;,
               \ &#34;--load&#34;, s:vlime_path . &#34;/lisp/load-vlime.lisp&#34;,
               \ &#34;--eval&#34;, vlime_eval]
endfunction
function! VlimeQlotExec()
    call vlime#server#New(v:true, get(g:, &#34;vlime_cl_use_terminal&#34;, v:false), v:null, &#34;qlot&#34;)
endfunction
</code></pre></div>
<ol start="3" dir="auto">
<li>Relaunch the Vim/Neovim.</li>
<li>Change the directory by <code>:cd /path/to/project/</code> and invoke <code>:call VlimeQlotExec()</code>.</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Working with local git repositories</h2><a id="user-content-working-with-local-git-repositories" aria-label="Permalink: Working with local git repositories" href="#working-with-local-git-repositories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>PROJECT_ROOT/.qlot/local-projects</code> can be used for local git repositories. Symbolic links are also accessible in Qlot environment.</p>

<ul dir="auto">
<li>Eitaro Fukamachi (<a href="mailto:e.arrows@gmail.com">e.arrows@gmail.com</a>)</li>
</ul>

<p dir="auto">See <a href="https://tech.michaelaltfield.net/fukamachi/qlot/blob/master/LICENSE.txt">LICENSE.txt</a>.</p>
<p dir="auto">The license of bundled Quicklisp installer can be found at <a href="https://tech.michaelaltfield.net/fukamachi/qlot/blob/master/quicklisp/LICENSE.txt">quicklisp/LICENSE.txt</a>.</p>
</article></div></div>
  </body>
</html>
