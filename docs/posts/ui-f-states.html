<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://daverupert.com/2024/02/ui-states/">Original</a>
    <h1>UI = f(statesⁿ)</h1>
    
    <div id="readability-page-1" class="page"><div id="layout">
    

    <main id="content">
      


<article>
  

  <div>
    

    <p>“UI is a function of state” is a pretty popular saying in the front-end world. In context (<em>pun intended</em>), that’s typically referring to application or component state. I thought I’d pull that thread a little further and explore all the states that can effect the UI layer…</p>
<h2>First-party application states</h2>
<p>Every application whether it’s a to-do list or a shopping cart or some radically complex app will have some state. State isn’t uniform and typically exists at a variety of different levels. We’ll start at the top and drill down…</p>
<h3>Global state</h3>
<p>Data stores and feature gating that typically happens at the application level.</p>
<ul>
<li>Stores - different locations for storing data
<ul>
<li>Application store - Redux, Vuex, Mobx, Signals</li>
<li>Browser store - localStorage, sessionStorage, cookies, IndexedDB</li>
</ul>
</li>
<li>Data - different types of global data
<ul>
<li>Access control data - authentication tokens, paid/unpaid, geolocated, age, verified, member, etc.</li>
<li>User data - name, icon, etc</li>
<li>Collections - e.g. list of posts</li>
<li>Session data</li>
<li>… etc</li>
</ul>
</li>
</ul>
<h3>Page/Component state</h3>
<p>Vince Speelman’s wonderful <a href="https://medium.com/swlh/the-nine-states-of-design-5bfe9b3d6d85">Nine States of Design</a> do a great job summing up all the states that a page or component might exist in.</p>
<ul>
<li>Nothing - An empty element</li>
<li>Loading - A <code>fetch</code> is happening</li>
<li>None - No items returned</li>
<li>One - A single item comes back</li>
<li>Some - A few items comes back</li>
<li>Too Many - Too many items, need pagination (or similar)</li>
<li>Incorrect - An error occurred</li>
<li>Correct - A success happened</li>
<li>Done - The operation finished</li>
</ul>
<p>Vince’s list is perfect to me and keeps being relevant after all these years, I would add two items.</p>
<ul>
<li>Custom states - Any bespoke or custom states relevant to your application</li>
<li>Realtime multi-player event mesages- Picture the state and event message in a chat app or realtime stock ticker. Stored at the component level or thrown into global state.</li>
</ul>
<p>In my experience both the page and each component will contain some mixture of these states as well as being reactive to global state changes.</p>
<h3>Element state</h3>
<p>Individual elements can (and will) have their own states. At this layer, features of HTML, CSS, and ARIA start to reveal themselves.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/cursor">Cursor</a> state
<ul>
<li><code>default, pointer, wait, text, move, grab, crosshair, zoom-in, zoom-out</code>, … etc</li>
<li>Custom cursors</li>
</ul>
</li>
<li>Stacking context
<ul>
<li><code>z-index</code></li>
<li>Layer
<ul>
<li>Root</li>
<li><code>::backdrop</code></li>
<li>Top</li>
</ul>
</li>
</ul>
</li>
<li>Attribute states - states reflected in HTML
<ul>
<li>Visibility = <code>hidden, visible</code></li>
<li>Language = <code>dir, lang</code></li>
<li>Functionaltiy = <code>contenteditable, draggable, invoketarget</code></li>
<li>Display = <code>inert, open, popover</code></li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes">Pseudo-class</a> states - states reflected in CSS
<ul>
<li>Action = <code>:hover, :active, :focus, :focus-visible, :focus-within</code></li>
<li>Input = <code>:autofill, :checked, :disabled, :valid, :invalid, :user-valid, :user-invalid, :required</code>, … etc.</li>
<li>Display = <code>:fullscreen, :modal, :picture-in-picture</code></li>
<li>Language = <code>:dir(), :lang()</code></li>
<li>Location = <code>:link, :visited, :target</code>, … etc.</li>
<li>Resource = <code>:playing, :paused</code></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CustomStateSet">CustomStateSet</a> = custom states for web components</li>
<li>… etc</li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/web/Accessibility/ARIA/Attributes">ARIA states</a> - <a href="https://css-tricks.com/user-facing-state/">user-facing states</a> reflected in ARIA
<ul>
<li><code>aria-current</code></li>
<li><code>aria-expanded</code></li>
<li><code>aria-pressed</code></li>
<li><code>aria-hidden</code></li>
<li>… etc</li>
</ul>
</li>
</ul>
<h2>Second-party user (or device) states</h2>
<p>The user of the application and their device, peripherals, and browser have a lot of say in how the final application renders. This is by design and <a href="https://www.w3.org/TR/html-design-principles/#priority-of-constituencies">built into the foundations of the web</a>.</p>
<h3>Language and localization</h3>
<p>Surprise! Not all users live in US-West-2.</p>
<ul>
<li>Text direction = <code>ltr, rtl</code></li>
<li>Writing mode = <code>horizontal-tb, vertical-lr, vertical-rl</code></li>
<li>Distance to server/CDN (latency)</li>
<li>Auto-translations</li>
<li>Words are long (e.g. German)</li>
<li>Words are short (e.g. Chinese)</li>
</ul>
<h3>Device constraints</h3>
<p>A user’s device has a lot of variation and customization and may be your biggest unknown bottleneck for rendering to glass.</p>
<ul>
<li>Network connection = Fiber, cable, wi-fi, 5G, 4G, 3G, “<a href="https://web.dev/articles/performance-poor-connectivity#lie-fi">lie-fi</a>”</li>
<li>Viewport = <code>height, width, initial-scale, horizontal-viewport-segments, vertical-viewport-segments, viewport-segment-width, viewport-segment-height</code>, … etc.</li>
<li>Environment contstants = <code>safe-area-inset-*</code>, <code>titlebar-area-*</code>, <code>keyboard-inset-*</code>(e.g, <a href="https://css-tricks.com/the-notch-and-css/">iPhone Notch</a>, rounded corners, <a href="https://alistapart.com/article/breaking-out-of-the-box/">installed apps</a>)</li>
<li>Pixel density = 1x, 2x (Retina), 3x, … etc.</li>
<li>Low-power mode</li>
<li>Screen brightness</li>
<li>CPU speed</li>
<li>GPU/dGPU</li>
<li>L1/L2/L3 cache</li>
<li>CPU/GPU/Memory contention (e.g., other apps open)</li>
<li>Color-gamut support = Rec2020, P3, sRGB, …etc</li>
<li>Keyboard = Embedded, External, <a href="https://en.wikipedia.org/wiki/T9_(predictive_text)">T9</a>, Virtual On-screen, Touchbar, … etc</li>
<li>XR support = <code>inline, immersive-vr, immersive-ar</code></li>
</ul>
<h3>Modalities</h3>
<p>Users aren’t uniform in how they interact with their devices and may be using one or any combination of inputs and outputs all at once.</p>
<ul>
<li>Inputs
<ul>
<li>Mouse = one-button, two-button, mousewheel, trackball, touchpad, high/low DPI</li>
<li>Keyboard = 100%, 60%, 10-key, querty, colemak, Ergonomic, split, mechanical, … etc</li>
<li>Touch/Tap = coarse pointer, no hover</li>
<li>Stylus = fine pointer, hover, pressure sensitivity</li>
<li>Gestures = pinch-zoom, two/three/four-finger swipe</li>
<li>Motion = accelleration, shake-to-undo, bump, … etc</li>
<li>Orientation = landscape, portrait, alpha/beta/gamma (360º/180º/90º, respectively) rotation</li>
<li>Speech recognition = Dragon NaturallySpeaking, voice assistants</li>
<li>Switches = button, sip, puff</li>
<li>Eye-tracking</li>
<li>Gamepad</li>
<li>XR = 3 DOF, 6 DOF</li>
</ul>
</li>
<li>Outputs
<ul>
<li>Screen</li>
<li>Text-to-speech</li>
<li>Screen reader</li>
<li>Braille</li>
<li>Screen magnifier</li>
<li>Vibration</li>
<li>RSS?</li>
</ul>
</li>
</ul>
<h3>Browser states</h3>
<p>Finally, a user’s browser choice and preferred plugins determines a lot about how they experience (or would prefer to experience) your UI and your application can be responsive to some of those preferences.</p>
<ul>
<li>User preferences
<ul>
<li>prefers-color-scheme = light, dark, forced-colors</li>
<li>prefers-reduced-motion = reduce, no-preference</li>
<li>prefers-reduced-transparency = reduce, no-preference</li>
<li>user zoom = 100% to 400%</li>
<li>text size = small to x-large</li>
</ul>
</li>
<li>Features and functionality
<ul>
<li>Browser version = latest version, last 2 versions, older</li>
<li>Feature detection = <code>@support</code> or polyfills</li>
<li>Color-gamut support = Rec2020, P3, sRGB, …etc</li>
<li>Browser cache hit</li>
<li>Service worker hit</li>
<li>Display mode = fullscreen | standalone | minimal-ui | browser</li>
<li><code>beforeinstallprompt</code></li>
<li>Print mode</li>
<li>Reader mode</li>
<li>JavaScript disabled = yes, I actually know people who do this.</li>
<li>Sleeping tabs</li>
</ul>
</li>
<li>Permissions
<ul>
<li>Camera = true, false</li>
<li>Microphone = true, false</li>
<li>Geolocation = allowed, not allowed, only while using the app</li>
<li>Notifications = true, false</li>
<li>File access = true, false</li>
</ul>
</li>
<li>Plugins
<ul>
<li>Ad blockers - UBlock, Safari ITP, Ghostery, … etc</li>
<li>Custom plugins/Boosts</li>
</ul>
</li>
</ul>
<h3>User states</h3>
<p>Thus far we’ve talked about technology, now let’s consider the actual human being at the other end of the transaction. A user’s physical or mental state impact their cognitive or literal bandwidth to enjoy your experience.</p>
<ul>
<li><a href="https://meyerweb.com/eric/thoughts/2016/01/25/designing-for-crisis-design-for-real-life/">Having an emergency/crisis</a></li>
<li>Cognitive impairment</li>
<li>Permanently or temporarily disabled</li>
<li><a href="https://butyoudontlooksick.com/articles/written-by-christine/the-spoon-theory/">“Out of spoons”</a></li>
<li>Inside or outside</li>
<li>On a plane or train</li>
<li>In the city or in the woods</li>
</ul>
<h2>Third-party service states</h2>
<p>Third parties have an outsized impact on the user experience of a UI.</p>
<h3>Availability/Status</h3>
<p>The status/availability/uptime of other servers is the biggest surface area for failure for a UI.</p>
<ul>
<li>Server hardware status = online, offline, partial availability</li>
<li>Database status = online, offline, transaction locked</li>
<li>API status = online, offline, partial availability</li>
<li>Web font service = online, offline, partial availability</li>
<li>DNS status = may take up to 72 hours to resolve</li>
<li>Package dependencies = working, broken, malicious injection, protestware, … etc</li>
<li>Asset delivery and caching status
<ul>
<li>Cloudflare</li>
<li>S3</li>
</ul>
</li>
</ul>
<h3>Script injections</h3>
<p>Third-party script injections are the biggest contributor to performance degradation on a UI. Some services even take over the user experience of an application. This is often out of your control.</p>
<ul>
<li>Analytics/tracking services</li>
<li>User session recording services</li>
<li>A/B test injections</li>
<li>Instructional overlays</li>
<li>Accessibility overlays</li>
<li>Third-party authentication (OAuth) services</li>
<li>Captcha/verification services</li>
</ul>
<p>You haven’t truly lived life until one of these unchecked services takes down an application.</p>
<h2>There’s more to UI than just state…</h2>
<p>I’m sure I’ve forgotten whole categories of state. I haven’t even gotten into the hundreds of CSS properties and the thousands of values and their potential conflicts. I didn’t talk about the intricacies of styling form controls or building dropdowns with the required ARIA property combinations. I didn’t touch on <a href="https://cloudfour.com/thinks/responsive-images-101-definitions/">the decision matrix required to put an image on the page</a>. Nor does this get into <a href="https://github.com/joshbuchea/HEAD">setting all the proper tags in the <code>head</code></a> <a href="https://rviscomi.github.io/capo.js/">in the right order</a>. Nor does this discuss <a href="https://microformats.org/">microformats</a> for SEO or all the code you need to properly setup a UI to send analtyics data.</p>
<p>In closing, hire people who are good at UI.</p>

  </div>

  
</article>



    </main>

    
  </div></div>
  </body>
</html>
