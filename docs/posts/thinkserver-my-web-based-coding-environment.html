<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://checkmyworking.com/posts/2025/02/thinkserver-my-web-based-coding-environment/">Original</a>
    <h1>Thinkserver: My web-based coding environment</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody text">
    <p>I&#39;ve made my own web-based coding environment for working on little projects.</p>
<p>A few years ago I found <a href="https://glitch.com">Glitch</a>.</p>
<p>It&#39;s great: a web-based coding environment that makes it really easy to quickly start editing a web page.
It has a live preview that helps to quickly see changes take effect.</p>
<p>But over time, as more and more of my stuff ended up living on Glitch, I was a bit uneasy about relying on someone else&#39;s service, and I also wanted to make some changes that would be idiosyncratic.
In particular, I make a lot of things with <a href="https://elm-lang.org/">Elm</a> and while Glitch has some mechanisms for changing how a project is built, it&#39;s not documented well and my solution kept breaking.
I also keep having trouble logging into Glitch, and the editor doesn&#39;t work particularly well on my phone.</p>
<p>So I decided to try making my own knock-off.</p>
<!-- TEASER_END -->
<p>I&#39;ve been using it for about a year now.
I&#39;m really happy with it and I feel like I should share it, in case it&#39;s useful to anyone else.</p>
<p>The back-end is a Django server which keeps some metadata about projects: just a name and the creation time, really.
Each project has a directory on disk where all its files are kept.</p>
<p>Glitch gives new projects a name randomly-generated from a list of nice words.
It troubles me that they&#39;re not namespaced by user, but I can also avoid thinking about that because I&#39;m the only user of my server.
For my list of nice words, I decided to write down a food starting with each letter of the alphabet, and use three of them for a project name.
That gives me 17576 possible projects, which I think is plenty.</p>
<p>The public view of each project is served from a subdomain <code><span>&lt;project&gt;.think.somethingorotherwhatever.com</span></code>.
I got a wildcard certificate from Let&#39;s Encrypt.</p>
<p>I added a flag to set a project as a &#34;template&#34;, which I can remix from the server&#39;s home page.
This is really handy as a way of starting off a project.
I have a generic &#34;page&#34; template, one for Elm which has all the necessary JSON files and a Makefile to build it, as well as a couple more templates to do with libraries I often look at for work.</p>
<figure><img alt="The index page. A list of templates, a list of recent projects, then collapsed categories." src="https://checkmyworking.com/images/thinkserver-index.png"/><figcaption><p>The index page. I&#39;ve got list of templates and recent projects for quick access, then everything else is organised into categories.</p>
</figcaption></figure><p>The editor interface is an Elm page showing an editor interface, the file tree, the build log and a live preview.</p>
<p>As I type in the editor, the file is automatically saved.
If there&#39;s a <cite>Makefile</cite> in the project&#39;s root directory, it&#39;s run each time a file is saved.
I can configure which file extensions will trigger a make with the file <code>.watchmakerc</code>.</p>
<figure><img alt="The editor interface. The title, &#34;metro-info&#34;, at the top, and some links to preview, rename, delete or remix it. Then a three-column interface with a file tree and logs, a code editor, and a live preview." src="https://checkmyworking.com/images/thinkserver-editor.png"/><figcaption><p>The editor interface.</p>
</figcaption></figure><p>After a while, I added a little form to run a shell command in the project&#39;s directory, to do things like install Elm packages or copy files from other projects.
Because I&#39;m the only user, I can be quite relaxed about the security implications of this.</p>
<p>And then I added a form just for installing Elm packages, so I can just type <code>elm/json</code> instead of <code>bash <span>-c</span> &#34;echo &#39;Y&#39; | elm install elm/json&#34;</code>.</p>
<p>That&#39;s pretty much it!
It&#39;s satisfying how little work I needed to do to make a coding environment that I really enjoy.</p>
<p>As I write this I&#39;ve got 80 projects in my think server.
A lot of them are little things I made as quick experiments or pieces of art.
A handful of them are tools that I use every day, like my <a href="https://metro-info.think.somethingorotherwhatever.com/">Metro arrival times page</a>.</p>
<p>This weekend, I got antsy about how many things I have in this server with no backup, so I spent some time adding tools to commit to a Git repository and push it to my home <a href="https://forgejo.org/">Forgejo</a> instance.</p>
<p>I spent a few hours making a very complicated system for doing git commits through the web interface before I remembered that <a href="https://jj-vcs.github.io/jj/latest/">Jujutsu (jj)</a> exists, and switched to that.
The way jj works suits this case much better than git: you don&#39;t explicitly add particular files to the repository or have a staging environment.
Instead, the current state of the working directory is supposed to be the same as the state of the top of the repository, and you have to explicitly ignore files that you don&#39;t want to check in.
So I just need a &#34;commit&#34; command in the editor which takes a message and adds a commit to the repo history, without any other decisions to make.</p>
<p>I discovered the &#34;create-on-push&#34; feature of Forgejo, so I can also push the repository without having to go to Forgejo to create a corresponding repo there.</p>
<p>The <a href="https://code.lawson-perfect.uk/clp/thinkserver">thinkserver code is on my Forgejo instance</a>.
Feel free to take it, run it yourself and modify it.</p>
<p>I&#39;m not interested in making this a collaborative project, or taking feature requests.
Please don&#39;t make me regret sharing it by finding security vulnerabilities!</p>
    </div></div>
  </body>
</html>
