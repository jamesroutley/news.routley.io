<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ounapuu.ee/posts/2023/04/28/dell-latitude-5411/">Original</a>
    <h1>Dell Latitude 5411: the Linux compatibility sweet spot</h1>
    
    <div id="readability-page-1" class="page"><div>
      
      <p><em>Oh boy, here I go testing a new laptop again!</em></p>
<p>Well, it <em>was</em> new back in 2020.</p>

  <figure>
    <img src="https://ounapuu.ee/media/dell-latitude-5411/cover.jpg"/>
    
  </figure>


<p>You might remember <a href="https://ounapuu.ee/posts/2022/01/09/why-i-went-back-to-using-a-thinkpad-from-2012/">my article on why I went back to a ThinkPad T430 in 2022</a>.
Or that other time when I got a new HP laptop for testing and got so frustrated that <a href="https://ounapuu.ee/posts/2022/11/21/hp-elitebook-845-g9/">I wrote about it</a>.</p>
<p>Well, today I’m writing about the <a href="https://www.dell.com/en-nz/shop/business-laptop-notebook-computers/latitude-5411-business-laptop/spd/latitude-14-5411-laptop">Dell Latitude 5411</a>.</p>
<p>It’s not the newest laptop in the world, but I decided to give it a go because of a few reasons:</p>
<ul>
<li>nobody wanted one at work due to the reputation of this laptop (sounds like a jet engine)</li>
<li>it’s almost 3 years old at this point, which is the Linux compatibility sweet spot (in theory)</li>
<li>there were some changes coming to the office, which meant more flexible seating arrangements and everything
being designed around USB-C, and I wanted to continue my employment at the same company which might have been tricky
with a ThinkPad T430</li>
</ul>
<p>And that’s how I ended up with one.</p>
<h3 id="the-linux-compatibility-sweet-spot">The Linux compatibility sweet spot</h3>
<p>If you have spent any time using new hardware on Linux, then you probably know how painful it can be.
You might get lucky and receive hardware that has support right from the get-go, but in most cases
there are issues around that may or may not get fixed with time.</p>
<p>If you take the same device a couple of years later, it’s highly likely that the Linux support on it
will be much better. The price of the device will also be much lower than before, especially if you get
it on the second hand market.</p>
<p>Any machine that falls into this time window is what I like to call “the Linux compatibility sweet spot”.
This Dell happens to be one such machine.</p>
<p>Here’s a quick rundown of some specifications:</p>
<ul>
<li>CPU: Intel Core i7-10850H 6C/12T, 2.7 GHz/ 5.1 GHz</li>
<li>RAM: 32GB DDR4</li>
<li>SSD: 512 GB NVMe</li>
<li>OS: Fedora Linux 38</li>
<li>Thunderbolt support</li>
<li>Wi-Fi, Ethernet based on Intel chips</li>
</ul>
<p>The Dell Latitude 5411 is powerful, and the components in it seem to be working just fine under Linux.
The USB-C port has not had major issues in a work environment, and it also works tolerably with a Dell WD19TB Thunderbolt 3
dock. My ultrawide monitor works, the Ethernet port on the dock can push gigabit speeds, and USB 3 ports work as expected.</p>
<p>Honestly, that’s pretty much it regarding compatibility. It just works <em>most of the time</em>, and that’s why I like this machine.</p>
<h3 id="oh-god-the-noise">Oh god, the noise</h3>
<p>Not everything about this machine is ideal, though.</p>
<p>One of the first things I noticed with this machine is some kind of electrical noise. Some call it “coil whine”,
but all I know is that it’s this high-pitched squealing that’s coming from the laptop. Based on some searching
and personal testing I can confirm that the noise is related to the CPU switching between idle and really high turbo boost speeds very quickly. If you remember
the spec sheet, you’ll know that this CPU can reach <strong>5.1 GHz</strong>. The noise is apparent whenever there’s a load
on the CPU, and it’s probably the sound of the power delivery components screaming in pain to deliver all this power
that this furnace of a CPU requires.</p>
<p>There is a workaround to the electrical noise: try running the CPU at a lower speed. You can do that by disabling
Intel Turbo Boost, for example. There’s an UEFI setting for that, but on Fedora Linux 38 there’s an even easier
option in the form of the “Power Profiles” setting. When running the CPU slower, the noise is much less severe.</p>

  <figure>
    <img src="https://ounapuu.ee/media/dell-latitude-5411/image-1.png" alt="Power Profiles in GNOME 44."/>
    
      <figcaption>Power Profiles in GNOME 44.</figcaption>
    
  </figure>


<p>This machine got the reputation of being a jet engine at work, and I agree with those people as this thing can
be damn loud even when it’s seemingly not doing much. This is a result of the CPU demanding a lot of power and the
cooling solution not being able to catch up. I feel that the stock fan curve is quite aggressive to prevent
any reliability issues after long-term use.</p>
<p>If you have the same laptop and are looking for a fix to that issue, then you’re in luck!
There are plenty of solutions out there and I am personally a fan of <a href="https://wiki.archlinux.org/title/fan_speed_control#Dell_laptops">this Arch Wiki section</a>.
I use <a href="https://github.com/TomFreudenberg/dell-bios-fan-control">dell-bios-fan-control</a> to be able to control
the fan speed myself, and a simple script to fine-tune the behaviour of the system. The script looks something like
this:</p>
<div><pre tabindex="0"><code data-lang="shell"><span><span><span>#!/bin/bash
</span></span></span><span><span><span></span>
</span></span><span><span>set -e
</span></span><span><span>
</span></span><span><span>echo <span>&#34;Finding device path.&#34;</span>
</span></span><span><span>device_path<span>=</span><span>$(</span>echo /sys/devices/platform/dell_smm_hwmon/hwmon/hwmon*<span>)</span>
</span></span><span><span>echo <span>&#34;Device path: </span>$device_path<span>&#34;</span>
</span></span><span><span>
</span></span><span><span>echo <span>&#34;Testing existence of paths.&#34;</span>
</span></span><span><span>cat <span>&#34;</span>$device_path<span>&#34;</span>/temp1_input
</span></span><span><span>cat <span>&#34;</span>$device_path<span>&#34;</span>/pwm1
</span></span><span><span>echo <span>&#34;Testing existence of paths done.&#34;</span>
</span></span><span><span>
</span></span><span><span>echo <span>&#34;Disabling Dell stock BIOS fan control.&#34;</span>
</span></span><span><span>/root/.local/bin/dell-bios-fan-control <span>0</span>
</span></span><span><span>echo <span>&#34;Done!&#34;</span>
</span></span><span><span>
</span></span><span><span><span>while</span> true; <span>do</span>
</span></span><span><span>
</span></span><span><span>  temp<span>=</span><span>$(</span>cat <span>&#34;</span>$device_path<span>&#34;</span>/temp1_input<span>)</span>
</span></span><span><span>
</span></span><span><span>  <span># Only two fan speed levels seem to exist, anything above 200 is basically</span>
</span></span><span><span>  <span># equivalent to full speed.</span>
</span></span><span><span>  <span>if</span> <span>((</span>temp &gt; 50000<span>))</span>; <span>then</span>
</span></span><span><span>    echo <span>64</span> &gt;<span>&#34;</span>$device_path<span>&#34;</span>/pwm1
</span></span><span><span>  <span>else</span>
</span></span><span><span>    echo <span>0</span> &gt;<span>&#34;</span>$device_path<span>&#34;</span>/pwm1
</span></span><span><span>  <span>fi</span>
</span></span><span><span>
</span></span><span><span>  sleep <span>15</span>
</span></span><span><span><span>done</span>
</span></span></code></pre></div><p>The CPU is already temperature limited even in the stock configuration and will throttle under load, which should
mean that running the machine at a lower fan speed is just fine. Let’s hope that I’m right.</p>
<h3 id="the-damn-usb-c-port">The damn USB-C port</h3>
<p>While the USB-C port generally works well, I do still get annoyed with it. When connecting it to my
Dell WD19TB Thunderbolt 3 dock, there’s a good chance that it will do nothing but charge. Restarting the machine
with the dock connected will usually work, but it does take away from the portability of the setup.</p>
<p>I’m convinced at this point that USB-C is a cursed standard and will never “just work”. If you disagree, then
please look up any article that tries to explain how USB-C works and all the things you have to keep in
mind if you want to buy a damn cable for your device that does what you want. And then add Thunderbolt to the mix.</p>
<p>If this aspect starts becoming very annoying, then it might become a dealbreaker for me, but right now it happens
infrequently enough that I can ignore it.</p>
<p>Oh, wait, it happened again while writing this article. Damn it all.</p>
<h3 id="other-notes">Other notes</h3>
<p>Here’s a rundown of some observations that I’ve made while using this machine:</p>
<ul>
<li>you can actually boot from the microSD card, which is nice</li>
<li>if you dual boot Fedora (two completely separate installations), then you’ll get two Fedora entries
in the boot options list, and although the names are identical, you can set a preferred boot order just fine</li>
<li>keyboard and touchpad are not the best things out there, but they are at the very least tolerable</li>
<li>cannot say the same about the <a href="https://xkcd.com/243/">clit mouse</a>, it’s not that good</li>
<li>battery life is what I expected from a laptop that’s not an Apple M1/M2 based laptop: 2-4 hours of use when doing
any real work, and up to 8 hours if your work involves staring at the screen with the brightness set to low and Wi-Fi/Bluetooth
turned off</li>
<li>lowest power draw I observed with <code>upower</code> was around 6 watts</li>
<li>this machine has enough power to be a solid desktop replacement for software development</li>
<li>the above is true even when you switch turbo boost off, you still have 6 cores running at 2.7 GHz!</li>
<li>never managed to overheat the machine, even if I accidentally forgot to turn the laptop fan back on
while running heavy loads (CPU throttled to around 2.2-2.4 GHz, which is impressive!), or when I accidentally
put it in my backpack while it was still running</li>
<li>“power on with USB-C connected” or any other UEFI setting with a similar purpose should be avoided, you
<strong>will</strong> end up putting it into your backpack while it’s running</li>
<li>this laptop has a full sized Ethernet port, which is incredibly handy for many IT professionals</li>
<li>it even has the old Dell barrel plug charging port, which is great for situations where you’ve damaged the only
USB-C port on the laptop</li>
<li>I don’t have too much faith in the construction of the machine, some parts feel very plasticky and might not hold up
well 5-10 years from now</li>
<li>I was the one who actually made the recommendation to purchase this particular laptop model at my current job
back in 2020 due to the fleet of ThinkPads being compatibility nightmares with the monitors and docks available, and
in that regard it was an improvement. Shame about the fan and electrical noise.</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>Will I end up switching to a modern laptop now? Maybe. I’ve done so for my day job already, but the jury is still
out on whether I might end up with this particular model for my personal use (especially because of the damn Thunderbolt
dock issue). There are alternative laptops out there with similar pricing that are also in this Linux compatibility sweet spot.</p>
<p>Should you get one? If the price is right and you don’t mind applying the workarounds for the issues I mentioned, then
go for it!</p>
<p>I have restored some faith in modern laptops now. They all suck in different ways, but this one is
not the worst one, and that’s good enough for me. Probably. I’ll keep my ThinkPad T430 in an easy to reach spot, just in
case.</p>

<p>If you prefer to share your thoughts on this post privately,
<a href="mailto:ihavesomethoughtsonyourblog@ounapuu.ee">just send me an e-mail!</a></p>
<p>Places where you can discuss this post:</p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=35737613">Hacker News</a></li>
<li><a href="https://www.linkedin.com/posts/%F0%9F%94%A5-herman-%C3%B5unapuu-600516152_dell-latitude-5411-the-linux-compatibility-activity-7057579530546286593-Hgre">LinkedIn</a></li>
<li><a href="https://www.reddit.com/user/hddherman/comments/131i5ol/dell_latitude_5411_the_linux_compatibility_sweet/">Reddit</a></li>
<li><a href="https://forum.level1techs.com/t/hddhermans-blog/180788/33?u=hddherman">Level1Techs forum</a></li>
</ul>

    </div></div>
  </body>
</html>
