<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://codethrasher.com/post/2022-09-09-evolving-my-note-taking-processes/">Original</a>
    <h1>Evolving my note-taking processes</h1>
    
    <div id="readability-page-1" class="page"><div><p>It took me a while to understand that I need/needed to write <em>everything</em> down or there was a greater-than-fifty-percent chance that, whatever it was, I&#39;d forget about it. Initially I was scribbling on random bits of paper, then moleskins, then markdown files scattered around my hard drive, then I started messing with <a href="https://standardnotes.com/">Standard Notes</a>; which I used happily for nearly a year. But then I started predominantly using Emacs for my development work (after moving <em>from</em> Vim &#34;just cuz&#34;) and got tired of moving out of Emacs to write notes. </p>
<p>I knew of Org-mode, but it seemed odd to me. I was still married to the syntax of standard Markdown, so the org syntax grated on me.</p>
<p>No longer. Down the org rabbit hole...</p>

<p>Like most new-to-org/emacs users, I relied (and still do, to some extent) heavily on external packages. Many of them are wonderful pieces of software and I tip my hat to the creators of those packages (namely, <a href="https://github.com/jethrokuan/">@jethrokuan</a> and <a href="https://github.com/alphapapa">@alphapapa</a>; both of whom have been personally helpful when I&#39;ve asked questions). Whether it was initiated by my need to tweak my editor to <em>my</em> specifications or simply to satisfy my curiosity, I started writing tiny functions in Elisp to aid in getting my notes written-out as quickly--and painlessly--as possible.</p>
<p>Generally, my note-taking process in Emacs is as such:</p>
<ol>
<li>key command to open my daily note (&#34;dailies&#34; in org-roam parlance)</li>
<li>pre-defined template inserted (see image below)</li>
</ol>
<p><a href="https://codethrasher.com/static/0ca2d9767baa253ec364058602915740/8d582/template.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="My initial template" title="initial template" src="https://codethrasher.com/static/0ca2d9767baa253ec364058602915740/8d582/template.png" srcset="/static/0ca2d9767baa253ec364058602915740/c5a17/template.png 512w,
/static/0ca2d9767baa253ec364058602915740/8d582/template.png 726w" sizes="(max-width: 726px) 100vw, 726px"/>
  </span>
  </a></p>
<ol start="3">
<li>Begin writing! I use an org-headline (*) for each &#34;thing&#34; I&#39;m thinking about/working on throughout the day, e.g.:  </li>
</ol>
<p><a href="https://codethrasher.com/static/f9829dd663da942871981c0fbf79f296/02744/heading.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="example heading" title="" src="https://codethrasher.com/static/f9829dd663da942871981c0fbf79f296/02744/heading.png" srcset="/static/f9829dd663da942871981c0fbf79f296/c5a17/heading.png 512w,
/static/f9829dd663da942871981c0fbf79f296/02744/heading.png 560w" sizes="(max-width: 560px) 100vw, 560px"/>
  </span>
  </a></p>
<p>I&#39;ve purposely hidden my org-tags via their face configuration. I don&#39;t find them useful (with the exception of one, which I&#39;ll discuss later), but I do tag my headings heavily.</p>
<p>In #3&#39;s image I&#39;ve linked to the last time I worked on &#34;Project X&#34; via the &#34;see yesterday&#34; org-link, which references...you guessed it, my note from yesterday.</p>

<p>The above has worked well for me for a while, but I continually found myself either losing context in the sprawl of daily notes in my org directory, people mentioned in my notes, or how to quickly lookup a conversation I had with such-and-such person. So, as any good hacker is wont to do, I stayed up later and started losing myself in the parenthetical ~hell~ heaven. Some of the pain points I hit were tagging people and building references (backlinks) to notes. It was easy enough to store a link and insert it where I needed it, but there was a bi-directionality that I was missing.</p>
<h2>Homegrown backlinks</h2>
<p>Let&#39;s say I want to insert a link like the &#34;see yesterday&#34; link in the image above. Simple, right? <code>org-store-link</code>...move to necessary file/region...<code>org-insert-link</code>. Done.</p>
<p>But then I hit the problem of knowing if the note I&#39;m reading has been referenced anywhere else. It&#39;s not a thing I do a lot, but I do occasionally need to do it. Grep/ag/ripgrep work, but that&#39;s a lot of work. So I wrote this elisp function:</p>
<div data-language="lisp"><pre><code><span>(</span><span><span>defun</span> <span>my/org-insert-link-and-ref</span> <span>(</span><span></span><span>)</span></span>
  <span>&#34;effectively duplicates the org-insert-link function and adds a ref (a link to the file the
   linked-entry is pasted into) in the linked-entries property drawer.&#34;</span>
  <span>(</span><span>interactive</span><span>)</span>
  <span>(</span><span>let*</span> <span>(</span><span>(</span><span>buf</span> <span>(</span><span>current-buffer</span><span>)</span><span>)</span>
         <span>(</span><span>current-heading-id</span> <span>(</span><span>org-id-get-create</span><span>)</span><span>)</span>
         <span>(</span><span>current-heading</span> <span>(</span><span>format</span> <span>&#34;%s&#34;</span> <span>(</span><span>org-get-heading</span> <span>t</span> <span>t</span> <span>t</span> <span>t</span><span>)</span><span>)</span><span>)</span>
         <span>(</span><span>heading-of-inserted-link</span> <span>(</span><span>format</span> <span>&#34;%s&#34;</span> <span>(</span><span>cadr</span> <span>(</span><span>car</span> org-stored-links<span>)</span><span>)</span><span>)</span><span>)</span>
         <span>(</span><span>id-of-inserted-link</span> <span>(</span><span>substring-no-properties</span> <span>(</span><span>car</span> <span>(</span><span>car</span> org-stored-links<span>)</span><span>)</span><span>)</span><span>)</span>
         <span>(</span><span>file-of-inserted-link</span> <span>(</span><span>car</span> <span>(</span><span>org-id-find</span> <span>(</span><span>cadr</span> <span>(</span><span>split-string</span> id-of-inserted-link <span>&#34;id:&#34;</span><span>)</span><span>)</span><span>)</span><span>)</span><span>)</span>
         <span>(</span><span>buffer-of-inserted-link</span> <span>(</span><span>org-find-base-buffer-visiting</span> file-of-inserted-link<span>)</span><span>)</span>
         <span>(</span><span>marker-to-inserted-link</span> <span>(</span><span>org-find-exact-headline-in-buffer</span> heading-of-inserted-link buffer-of-inserted-link<span>)</span><span>)</span>
         <span>(</span><span>marker-to-current-link</span> <span>(</span><span>org-find-exact-headline-in-buffer</span> current-heading buf<span>)</span><span>)</span><span>)</span>
    <span>(</span><span>with-current-buffer</span> <span>(</span><span>get-buffer-create</span> buffer-of-inserted-link<span>)</span>
      
      <span>(</span><span>if</span> <span>(</span><span>org-entry-get</span> marker-to-inserted-link <span>&#34;REFS&#34;</span><span>)</span>
          
          <span>(</span><span>if</span> <span>(</span><span>not</span> <span>(</span><span>string-match-p</span> current-heading-id <span>(</span><span>format</span> <span>&#34;%s&#34;</span> <span>(</span><span>org-entry-get</span> marker-to-inserted-link <span>&#34;REFS&#34;</span><span>)</span><span>)</span><span>)</span><span>)</span>
              
              <span>(</span><span>org-entry-put</span> marker-to-inserted-link <span>&#34;REFS&#34;</span>
                             <span>(</span><span>format</span> <span>&#34;%s //// [[id:%s][%s]]&#34;</span>
                                     <span>(</span><span>org-entry-get</span> marker-to-inserted-link <span>&#34;REFS&#34;</span><span>)</span> current-heading-id current-heading<span>)</span><span>)</span><span>)</span>
             
            <span>(</span><span>org-entry-put</span> marker-to-inserted-link <span>&#34;REFS&#34;</span>
                           <span>(</span><span>format</span> <span>&#34;[[id:%s][%s]]&#34;</span> current-heading-id current-heading<span>)</span><span>)</span><span>)</span>
        <span>(</span><span>save-buffer</span><span>)</span><span>)</span>
      <span>(</span><span>insert</span> <span>(</span><span>format</span> <span>&#34;[[id:%s][%s]]&#34;</span> id-of-inserted-link heading-of-inserted-link<span>)</span><span>)</span><span>)</span><span>)</span></code></pre></div>
<p>There&#39;s a lot going on here and I&#39;m completely aware that <code>org-roam</code> solves this with its <code>backlinks</code> paradigm, but I like to make life harder and learn on my own, so here&#39;s a recreated wheel!</p>
<p>What <code>my/org-insert-link-and-ref</code> does is insert the &#34;last stored&#34; org link, visits the headline that was just inserted, adds a property <code>REFS</code> to the <code>PROPERTY</code> drawer of said headline, and adds (or appends) a link to the headline that I just inserted <em>into</em>. This might be better visualized with another image:</p>
<p><a href="https://codethrasher.com/static/2a4c3b9e4b0b36e2b3d0fbfa4dd78f58/89f99/hume_ref.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="example of a " ref""="" title="" src="https://codethrasher.com/static/2a4c3b9e4b0b36e2b3d0fbfa4dd78f58/89f99/hume_ref.png" srcset="/static/2a4c3b9e4b0b36e2b3d0fbfa4dd78f58/c5a17/hume_ref.png 512w,
/static/2a4c3b9e4b0b36e2b3d0fbfa4dd78f58/89f99/hume_ref.png 629w" sizes="(max-width: 629px) 100vw, 629px"/>
  </span>
  </a></p>
<p>Now, when I read that note, I can easily see that I referenced it somewhere else (namely, in a headline dubbed &#34;More Hume&#34;). Excellent. </p>
<p>But what about people? I would like to be able to consolidate my conversations with people so that I can &#34;at&#34; a person (<code>@someperson</code>) in a note and look that up easily. For example, one day I might think,</p>
<blockquote>
<p>I know I had a convo with so-and-so about unit tests, but I don&#39;t know when that was...</p>
</blockquote>
<p>I could search my tags for various terms (<code>unit_tests</code>, <code>convo</code>, <code>so-and-so</code>, etc.), but that&#39;s pretty inefficient. What if I had a file I called <code>contacts.org</code> that held headlines of each person I&#39;ve ever mentioned in my note taking? That could work. There might also be a package for it, but why not just re-invent another wheel? Let&#39;s do it...</p>
<h2>Contacts</h2>
<p>When I press <code>CTRL-@</code> I get an <code>ivy</code> popup which let&#39;s me select a name that is queried from a <code>contacts</code> file:</p>
<p><a href="https://codethrasher.com/static/2471744213c5a8f0699c792c6674bcd3/82024/contacts.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="contacts popup" title="" src="https://codethrasher.com/static/2471744213c5a8f0699c792c6674bcd3/82024/contacts.png" srcset="/static/2471744213c5a8f0699c792c6674bcd3/82024/contacts.png 413w" sizes="(max-width: 413px) 100vw, 413px"/>
  </span>
  </a></p>
<p>If a name doesn&#39;t exist, I get prompted to add the name to the file as well as an alias (which is stored in the person&#39;s PROPERTY drawer), that will be placed in the tag (link) like so:</p>
<p><a href="https://codethrasher.com/static/601f990a79c45906bb4882cc4357ca1d/1016b/linked_person.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="linked person" title="" src="https://codethrasher.com/static/601f990a79c45906bb4882cc4357ca1d/1016b/linked_person.png" srcset="/static/601f990a79c45906bb4882cc4357ca1d/c5a17/linked_person.png 512w,
/static/601f990a79c45906bb4882cc4357ca1d/1016b/linked_person.png 539w" sizes="(max-width: 539px) 100vw, 539px"/>
  </span>
  </a></p>
<p>When I <code>@</code> a person in my notes I have a custom function which links the heading I&#39;m pasting <em>into</em> into the person&#39;s heading in the <code>contacts</code> file. It&#39;s really helpful for answering the question of &#34;I know I talked to...but I can&#39;t remember...&#34;:</p>
<p><a href="https://codethrasher.com/static/57d24e9d6324d5b86093b110b4acb76e/3a666/referenced_convo.png" target="_blank" rel="noopener">
    <span>
    <span></span>
    <img alt="Referenced heading for person" title="" src="https://codethrasher.com/static/57d24e9d6324d5b86093b110b4acb76e/3a666/referenced_convo.png" srcset="/static/57d24e9d6324d5b86093b110b4acb76e/3a666/referenced_convo.png 434w" sizes="(max-width: 434px) 100vw, 434px"/>
  </span>
  </a></p>
<h2>Current tasks</h2>
<p>When I begin a new note I like to have a running list of things I&#39;m working on. I define these by tagging a given heading with an <code>in_progress</code> tag. When my file is generated I get a list of things marked as &#34;in progress&#34;. Yeah, I could probably use <code>TODO</code>s and look at my agenda, but in all honesty, I haven&#39;t leaned too much on <code>org-agenda</code> yet. I like to keep as much context in my daily notes as possible.</p>
<div data-language="lisp"><pre><code><span>(</span><span><span>defun</span> <span>my/get-current-tasks</span> <span>(</span><span></span><span>)</span></span>
  <span>(</span><span>interactive</span><span>)</span>
<span>(</span><span>insert</span> <span>&#34;Current tasks:\n&#34;</span><span>)</span>
  <span>(</span><span>dolist</span> <span>(</span><span>item</span> <span>(</span><span>org-ql-select</span> <span>(</span><span>org-agenda-files</span><span>)</span> <span>&#39;(</span><span>tags</span> <span>&#34;in_progress&#34;</span><span>)</span><span>)</span><span>)</span>
    <span>(</span><span>insert</span> <span>(</span><span>format</span> <span>&#34;<span>-</span> [[id:%s][%s]] (last worked-on: %s)\n&#34;</span>
<span>(</span><span>org-element-property</span> <span>:ID</span> item<span>)</span>
<span>(</span><span>org-element-property</span> <span>:raw-value</span> item<span>)</span>
<span>(</span><span>org-element-property</span> <span>:DATE_MODIFIED</span> item<span>)</span><span>)</span><span>)</span><span>)</span><span>)</span></code></pre></div>

<p>Those are, roughly, the wheels I&#39;ve recreated. I still have some pain-points I&#39;m working through, but I really like my flow so far. If you have any questions or suggestions feel free to reach out to me: <em>dev (AT) mttyng (dot) com</em></p></div></div>
  </body>
</html>
