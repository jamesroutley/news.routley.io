<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bram.us/2023/10/09/the-future-of-css-easy-light-dark-mode-color-switching-with-light-dark/">Original</a>
    <h1>The Future of CSS: Easy Light-Dark Mode Color Switching with Light-Dark()</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p><img decoding="async" fetchpriority="high" src="https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark.png" alt="" width="4162" height="1996" srcset="https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark.png 4162w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-560x269.png 560w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-1120x537.png 1120w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-768x368.png 768w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-1536x737.png 1536w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-2048x982.png 2048w, https://www.bram.us/wordpress/wp-content/uploads/2023/10/css-light-dark-1568x752.png 1568w" sizes="(max-width: 4162px) 100vw, 4162px"/></p>
<p>To change a color based on whether Light Mode or Dark Mode used, you‚Äôd typically use a <code>prefers-color-scheme</code> Media Query. To make things easier, CSS now comes with a utility function named <code>light-dark()</code>. The function accepts two color values as its arguments. Based on which color scheme you are actively using, it will output the first or the second argument.</p>
<p>~</p>
<h3><a name="mq" href="#mq">#</a> Responding to Light or Dark Mode</h3>
<p>To change a color value ‚Äì or any other value for that matter ‚Äì based on Light Mode or Dark Mode being used, you‚Äôd typically use a <code>prefers-color-scheme</code> Media Query to change the value of a Custom Property:</p>
<pre><code>:root {
  --text-color: #333; /* Value for Light Mode */
}

@media (prefers-color-scheme: dark) {
  --text-color: #ccc; /* Value for Dark Mode */
}</code></pre>
<p>When <a href="https://www.bram.us/2019/12/10/how-to-add-dark-mode-to-a-javascript-app-react-angular-vue-etc/">implementing Dark Mode</a>, you typically end up with a bunch of duplicated CSS variables that set the values for each mode. The rest of your CSS then uses these custom properties for the actual declarations.</p>
<pre><code>body {
  color: var(--text-color);
}</code></pre>
<p>~</p>
<h3><a name="light-dark" href="#light-dark">#</a> Responding to Light or Dark Mode with <code>light-dark()</code></h3>
<p>A new addition to the <a href="https://drafts.csswg.org/css-color-5/">CSS Color Module Level 5 Specification</a> is the <code>light-dark()</code> function. The function accepts two color values as its arguments. Based on which color scheme you are actively using, it will output the first or the second color argument.</p>
<pre><code>light-dark(&lt;color&gt;, &lt;color&gt;);</code></pre>
<p>As <a href="https://drafts.csswg.org/css-color-5/#light-dark">per spec</a>:</p>
<blockquote><p>This function computes to the computed value of the first color, if the used color scheme is <code>light</code> or unknown, or to the computed value of the second color, if the used color scheme is <code>dark</code>.</p></blockquote>
<p>The used color scheme is not only based on the users Light/Dark Mode setting, but also on the value of the <code>color-scheme</code> property. This similar to how <a href="https://blog.jim-nielsen.com/2021/css-system-colors/">System Colors</a> get computed.</p>
<blockquote><p>The <code>color-scheme</code> property allows an element to indicate which color schemes it is designed to be rendered with. These values are negotiated with the user‚Äôs preferences, resulting in a used color scheme [‚Ä¶].</p></blockquote>
<p>That means, for <code>light-dark()</code> to work, you <strong>must</strong> also include a <code>color-scheme</code> declaration.</p>
<pre><code>:root {
  color-scheme: light dark;
}

:root {
  --text-color: light-dark(#333, #ccc); /* In Light Mode = return 1st value. In Dark Mode = return 2nd value. */
}</code></pre>
<p>Because <code>color-scheme</code> is taken into account, that also means that you can override its value per element, to force it into a certain mode:</p>
<pre><code>.dark {
  color-scheme: dark; /* light-dark() on this element and its children will always return dark */
}</code></pre>
<div>
<p>ü§î If this <code>light-dark()</code> seems familiar: Chromium internally sports a <code>-internal-light-dark()</code> which <a href="https://www.bram.us/2022/01/11/customize-the-password-hide-reveal-button-in-microsoft-edge/#light-dark">I wrote about before</a>. Based on this functionality, <a href="https://github.com/w3c/csswg-drafts/issues/7561">the proposal was made within the CSS Working Group</a> to expose a similar function to authors. The result is <code>light-dark()</code>.</p>
<p>Unlike <code>-internal-light-dark()</code> which is for any type of value, <code>light-dark()</code> can only be used for colors.</p></div>
<p>~</p>
<h3><a name="schemed-value" href="#schemed-value">#</a> What about other non-<code>&lt;color&gt;</code> values and responding to other color schemes?</h3>
<p>Yes, <code>light-dark()</code> is fairly limited in what it can do: it can only do light/dark and only return <code>&lt;color&gt;</code> values. But that‚Äôs intentional, as it is an intermediary step towards a final solution.</p>
<p>As proposed in <a href="https://github.com/w3c/csswg-drafts/issues/7561">the CSS Working Group issue</a>, the end goal is to have a function <em>(tentatively)</em> named <code>schemed-value()</code> in the future. That function can:</p>
<ul>
<li>Respond to any value of <code>color-scheme</code>.</li>
<li>Return more than <code>&lt;color&gt;</code> values</li>
</ul>
<p>It <em>could</em> look something like this:</p>
<pre><code>:root {
  color-scheme: dark light custom;
}

body {
  color: schemed-value(light hotpink, dark lime, custom rebeccapurple);
}</code></pre>
<p>But, for now, we ‚Äúonly‚Äù have <code>light-dark()</code> and I personally think that‚Äôs fine, as it rhymes with today‚Äôs reality of what browsers can do:</p>
<ul>
<li>It only supports <code>light</code> or <code>dark</code> because browsers right now <a href="https://drafts.csswg.org/css-color-adjust/#color-scheme-prop:~:text=%3Ccustom%2Dident%3E%20values%20are%20meaningless%2C%20and%20exist%20only%20for%20future%20compatibility%2C%20so%20that%20future%20added%20color%20schemes%20do%20not%20invalidate%20the%20color%2Dscheme%20declaration%20in%20legacy%20user%20agents">don‚Äôt support <code>&lt;custom-ident&gt;</code> in <code>color-scheme</code></a>, so there‚Äôs no use in supporting other values right now.</li>
<li>It can only do <code>&lt;color&gt;</code> values because <a href="https://www.w3.org/TR/css-syntax-3/#parse-grammar">the parser needs to know the value type of what it is parsing</a> ahead of time. <code>light-dark()</code> is <a href="https://drafts.csswg.org/css-color-5/#color-syntax">explicitly defined to be a <code>&lt;color&gt;</code></a>.</li>
</ul>
<p>Narrowing things down in scope/things it can do, allowed <code>light-dark()</code> to be defined now, instead of putting it on the long track. The name and syntax of <code>light-dark()</code> that was resolved on is very memorable, easy to use, and offers a solution to a common use-case.</p>
<div>
<p>When <code>schemed-value()</code> ever becomes a thing, <code>light-dark()</code> would become <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a> for it.</p>
<pre><code>light-dark(&lt;color&gt;, &lt;color&gt;); = schemed-value(light &lt;color&gt;, dark &lt;color&gt;);</code></pre>
</div>
<p>~</p>
<h3><a href="#browser-support" name="browser-support">#</a> Browser Support</h3>
<p>üí° Although this post was originally published in October 2023, the section below is constantly being updated. <em>Last update: October 09, 2023</em>.</p>
<p>Here is an up-to-date list of browser support for CSS <code>light-dark()</code>:</p>
<dl>
<dt>Chromium <em>(Blink)</em></dt>
<dd>
<p>‚ùå No support</p>
</dd>
<dt>Firefox <em>(Gecko)</em></dt>
<dd>
<p>‚úÖ Supported in Firefox 120.</p>
</dd>
<dt>Safari <em>(WebKit)</em></dt>
<dd>
<p>‚ùå No support</p>
</dd>
</dl>
<p><em>(If you‚Äôre wondering why this doesn‚Äôt show up on CanIUse yet: this feature is brand new. The <a href="https://github.com/mdn/browser-compat-data/pull/20935">PR to add the data</a> is still pending.)</em></p>
<p>The pen embedded below will indicate if the browser you are currently using supports CSS <code>light-dark()</code> or not:</p>
<p data-height="470" data-default-tab="result" data-slug-hash="ExGrNVx" data-user="bramus" data-token="8087f9a9706b4efd52ef87f16f504ef2">
  <span>See the Pen <a href="https://codepen.io/bramus/pen/ExGrNVx/8087f9a9706b4efd52ef87f16f504ef2"></a> by Bramus (<a href="https://codepen.io/bramus">@bramus</a>)</span>
</p>

<p>To stay up-to-date regarding browser support, you can follow these tracking issues:</p>
<ul>
<li>Chromium/Blink: <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1490618">Issue #1490618</a> ‚Äî Assigned (Open)</li>
<li>Firefox/Gecko: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1856999">Issue #1856999</a> ‚Äî RESOLVED FIXED</li>
<li>Safari/WebKit: <a href="https://bugs.webkit.org/show_bug.cgi?id=262914">Issue #262914</a> ‚Äî NEW</li>
</ul>
<p>~</p>
<h3><a href="#demo" name="demo">#</a> Demo</h3>
<p>If your browser supports <code>light-dark()</code>, the demo below will show a few <code>&lt;div&gt;</code>s labeled <code>.auto</code> that respond to Light/Dark mode being toggled. The <code>&lt;div&gt;</code>s with the class <code>.light</code> or <code>.dark</code> are forced into their proper mode.</p>
<p data-height="700" data-default-tab="result" data-slug-hash="LYMqRqV" data-user="bramus" data-token="8704297cfbc9e0a6bf843726a928c0e2">
  <span>See the Pen <a href="https://codepen.io/bramus/pen/LYMqRqV/8704297cfbc9e0a6bf843726a928c0e2"></a> by Bramus (<a href="https://codepen.io/bramus">@bramus</a>)</span>
</p>

<p>~</p>
<h3><a href="#spread-the-word name=" spread-the-word"="">#</a> Spread the word</h3>
<p>To help spread the contents of this post, feel free to retweet its announcement <del>tweet</del><ins>post</ins>/<del>toot</del><ins>post</ins>:</p>
<blockquote>
<p lang="en" dir="ltr">To change a color based on Light Mode or Dark Mode, you‚Äôd typically use a `prefers-color-scheme` Media Query.</p>
<p>To make things easier, CSS now comes with a `light-dark()` utility function.</p>
<p>Read <a href="https://t.co/uzcTGPo8dY">https://t.co/uzcTGPo8dY</a> to get to know the details.</p>
<p>Browser Support: Firefox 120. <a href="https://t.co/1rmGkKy2yl">pic.twitter.com/1rmGkKy2yl</a></p>
<p>‚Äî Bramus (@bramus) <a href="https://twitter.com/bramus/status/1711488907014021267?ref_src=twsrc%5Etfw">October 9, 2023</a></p></blockquote>


<p>~</p>

	</div></div>
  </body>
</html>
