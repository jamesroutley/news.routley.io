<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://charlie-volow.com/blog/posts/test_interface.html">Original</a>
    <h1>A 16-Line Test Interface</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
            <p>It is 9:59 AM in Melbourne, 9th October, 2024. Sunlight filters through my windows, illuminating swirling motes of dust across my living room. There is a cup of tea in my hand. I take a sip and savor it.</p>
<p>I text the other senior engineer, who unlike me is full-time, on the team: &#34;I&#39;m ready to start at 10&#34;, as is our custom.</p>
<p>The minute hand moves.</p>
<p>It is 10:00 AM in Melbourne, 9th October, 2024. The sun is immediately extinguished and replaced by a shrieking skull hanging low in a frigid sky. I glance down at my tea, and it is as blood. I take a sip and savor it.</p>
<p>I text the other senior engineer on the team: &#34;Are you ready to enter the Pain Zone?&#34;<sup id="fnref:1"><a href="#fn:1">1</a></sup>, as is our custom.</p>

<p>The Pain Zone, coated in grass which rends those who tread upon it like a legion of upraised spears, is an enterprise data warehouse platform. At the small scale we operate at, with little loss of detail, a <em>data warehouse platform</em> simply means that we copy a bunch of text files from different systems into a single place every morning.</p>
<p>The word <em>enterprise</em> means that we do this in a way that makes people say &#34;Dear God, why would anyone ever design it that way?&#34;, &#34;But that doesn&#39;t even help with security&#34; and &#34;Everyone involved should be fired for the sake of all that is holy and pure.&#34;</p>
<p>For example, the architecture diagram which describes how we copy text files to our storage location has <em>one hundred and four</em> separate operations on it. When I went to count this, I was expecting to write <em>forty</em> and that was meant to illustrate my point. Instead, I ended up counting them up three times because there was <em>no way</em> it could be over a hundred. This whole thing should have ten operations in it.</p>
<p>Retrieve file. Validate file. Save file. Log what you did. Those could all be one point on the diagram, but I&#39;m being generous. And you can keep the extra six points for stuff I forgot. That&#39;s ten. Why are there <em>a hundred and four</em>? Sweet merciful Christ, why?</p>
<p>At two of the four businesses I&#39;ve worked at, the most highly-performing engineers have resorted to something that I think of as Pain Zone navigation. It&#39;s the practice of never working unless pair programming simply to have someone next to you, bolstering your resolve, so that you can gaze upon the horrors of the Pain Zone without immediately losing your mind. Of course, no code alone can make people this afraid of work. Code is, ultimately, characters on a screen, and software engineers do nothing but hammer that code into shapes that spark Joy and Money. The fear and dread comes from a culture where people feel <em>bad</em> that they can&#39;t work quickly enough in the terrible codebase, where they feel <em>judged</em> for slowing down to hammer the code into better shapes that sadly aren&#39;t on the Jira board, and where management looks down on people who practice craftsmanship.</p>
<p>The last doesn&#39;t even require malicious management — it just needs people that don&#39;t respect how deep craftsmanship can go. These are the same people that do not appreciate that an expert pianist is not simply pressing keys, they are obsessively perfecting timing and the force applied to each key, alongside dozens of factors that I can&#39;t comprehend. An unthoughtful person will see something and think &#34;It can&#39;t be that hard&#34; or more generously &#34;That looks quite hard&#34; . The <em>respectful</em> thought to have when viewing any competent professional in a foreign domain, in <em>every</em> domain that I&#39;m aware of, is &#34;That must be way harder than it looks.&#34;</p>
<p>I have now seen enough workplaces, and thanks to the blog have access to enough executives, to know that this is what most cultures degenerate into. Terrible companies are perpetual cognitohazards where everyone is bullied all day. The <em>median</em> companies (which some people call &#34;good&#34; for lack of ever having seen better) lack the outright bullying but still consist of people that are trying to convince themselves that it&#39;s <em>fine</em> to feel disempowered or subservient all day. There are times in my life where I have to deal with this, but it is hardly <em>fine</em>. The <em>best</em> are places where you can get at least <em>some</em> of the things that a person needs other than rent money<sup id="fnref:2"><a href="#fn:2">2</a></sup> .</p>
<p>This place has a better culture than most, as bullying is <em>mostly</em> not tolerated, we have fully remote work, and it is a terrible faux pas to accuse someone of not working fast enough outright, though you can hint at it gently.</p>
<p>It is worse than most places at software engineering, as... oh, you&#39;ll see.</p>
<p>In any case, I have a deal with the team. Every morning, grab your coffee, attend your meetings, and at 10 AM we navigate the Pain Zone together for at least three to four hours. Management is blissfully unaware that this force of camaraderie and mutual psychotherapy is the only way that things continue to limp along.</p>

<p>We have one simple job today. The organization wants to know:</p>
<ol>
<li>Is data coming into our system?</li>
<li>Is any data being lost?</li>
<li>Each data source goes through approximately thirteen steps on average — how many are getting stuck along the way?</li>
</ol>
<p>Someone has already landed all of the logs our system produces in the data warehouse, so we can examine them in there, alongside the actual data. Is that smart? I dunno, something feels a bit weird about it <em>but</em> I have no concrete objection. My co-navigator and I decide to look at the logs for one data source.</p>
<p>This is where, five seconds in, we begin to become lost in the Pain Zone.</p>
<p>Let&#39;s say the data source we picked was &#34;Google Analytics&#34;. We search the landed logs for Google Analytics, expecting to see something like this.</p>
<table>
<thead>
<tr>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>Google Analytics</td>
</tr>
</tbody>
</table>
<p>Here is what I actually see in the source column, and yes, it actually looked exactly this bad.</p>
<table>
<thead>
<tr>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr>
<td>6g94-8jjf-eo84757h4758z&#34;, &#34;jobStatus&#34;: &#34;JobStatus.Waiting&#34;, &#34;jobExpiry&#34;:&#34;2023-10</td>
</tr>
</tbody>
</table>
<p>That... is not &#34;Google Analytics&#34;. In fact, what the fuck is that? It looks like someone has dumped a random snippet of JSON into the logs, but not even the entirety of the JSON. The strings aren&#39;t terminated. We should have around fifty source systems, so how many distinct source systems appear in—  <em>FIFTY-SEVEN THOUSAND?</em></p>
<p>We&#39;ve been writing <em>total nonsense</em> to half the logs for <em>over a year</em> and no one noticed? We only have <em>two jobs</em>. Get the data and log that we got the data. But the logs are nonsense, so we aren&#39;t doing the second thing, and because the logs are nonsense <em>I don&#39;t know if we&#39;ve been doing the first thing</em>.</p>
<p>I take a deep breath. The plan is to submit my notice on <a href="https://ludic.mataroa.blog/blog/quitting-my-job-for-the-way-of-pain/">December 2nd</a> anyway, so this is fine. This is so <em>fine</em>. The other engineers already know I&#39;m leaving, and we&#39;ve all committed to do the best we can for two months for our spiritual growth. The ability to do painful things is a virtuous skill to cultivate as a responsible adult.</p>
<p>Okay, how is this happening? Well, it turns out that we&#39;re embedding a <em>huge</em> amount of metadata in filenames, and the Lambda functions that produce all of this — of course, we&#39;re serverless, because how can you hurt yourself without a cutting-edge? — use lots of regex to extract data. Unfortunately, because we don&#39;t have any tests, someone eventually wrote some code to download data that passed a big JSON blob instead of a filename to the logging function, and that function happily went &#34;Great, I&#39;ll just regex out the source system from the file name!&#34; Except it wasn&#39;t a filename, so it has instead spewed garbage into the system for months.</p>
<p>I find something like this <em>every time</em> we enter the Pain Zone. Sometimes we&#39;ve laughed so hard that we&#39;ve <em>cried</em> at the things we&#39;ve seen $2,000 per day consultants do.</p>
<p>The issue is raised with the team, but because fixing this critical error in our auditability is not on the board and <a href="https://ludic.mataroa.blog/blog/tossed-salads-and-scrumbled-eggs/">Velocity Must Be Up</a>, fixing the logs is judged to be less important than... parsing... the nonsense logs. Why? We have another saying on our team, which is &#34;Stop asking questions, you&#39;re only going to hurt yourself&#34;.</p>
<p>I take another deep breath.</p>
<p>Okay, we&#39;ll continue with the work instead of fixing the critical production error. We can&#39;t query the Google Analytics stuff based on source system, so let&#39;s pick another one. We also draw data from Twitter once every two hours, and that source column isn&#39;t broken for that. I just need to be able to associate the log events to begin working on that. That is, we&#39;ll have one log that says &#34;I downloaded the data from Twitter&#34; and another log that says &#34;I checked that it had all the correct stuff in it&#34;, and I just have to tie them together.</p>
<p>I don&#39;t like the way this table is configured for various reasons, but I&#39;m expecting to see:</p>
<table>
<thead>
<tr>
<th>Event ID</th>
<th>Source</th>
<th>Event</th>
<th>Success</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Twitter</td>
<td>Downloaded</td>
<td>True</td>
</tr>
<tr>
<td>1</td>
<td>Twitter</td>
<td>Validated</td>
<td>True</td>
</tr>
</tbody>
</table>
<p>Then I can just do something like:</p>
<pre><code>select
  event,
  success
from
  log_table
where event_id = 1 and source = &#39;twitter&#39;
</code></pre>
<p>Now I can see if all the correct stuff happened.</p>
<p>But I cannot find an event_id column or anything that looks like one. I hit up the expert on this system, and am informed that I should use the <code>awslog</code> column. I look at it.</p>
<p>It looks like this:</p>
<table>
<thead>
<tr>
<th>awslog</th>
</tr>
</thead>
<tbody>
<tr>
<td>converted/twitter/retweets_per_post/year=2023/month=03/day=11/retweets_per_post_fact-00045-8b3226g9.txt | Validated</td>
</tr>
</tbody>
</table>
<p>I mean, firstly, what the fuck is this? Secondly, what the <em>fuck</em> is this? Thirdly, well, you get it. Why not just store this in a relational format? Why are they all in one column? Why do you hate me specifically?</p>
<p>Stop asking questions, you&#39;re only going to hurt yourself.</p>
<p>I am expected to use regular expressions <em>to construct a key in my query</em>. As far as I can tell, the numbers and letters don&#39;t represent or uniquely identify anything, they&#39;ve really just been appended for no reason. I waste a fair amount of time figuring out if I can use them.</p>
<p>December 2nd, I tell myself. Of course, I <em>could</em> be working on a book, shipping a hobby project, and dedicating more time to the business we&#39;re committing to in January, but December 2nd was the plan. It will be a great exercise to come up with a plan to gradually refactor all of this while delivering the things we&#39;re supposed to. It will make me a better engineer. December 2nd, December 2nd, hold fast.</p>

<p>Okay, we can write a regular expression to identify all Twitter sources that came from 11/03/2023. This is very stupid, but compared to minimum wage in my home country, I am being compensated <em>spectacularly</em> to deal with this particular brand of stupidity.</p>
<p>But wait, we retrieve this once every two hours, which means that while I can find all the Twitter data pulls from the 11th, I can&#39;t actually tell which rows are associated with the 8 AM run versus the 2 PM run. This perplexing awslog column only identifies things down to the <em>day</em>, not the hour. We have another column that logs the exact time down to the second that a Lambda function has fired, but each step happens at a slightly different time, and each source takes different amounts of time based on filesize.</p>
<p>I message the team. &#34;Any ideas for how to identify specific runs that don&#39;t assume there is only one run per day?&#34;</p>
<p>We take a ten minute break. We return.</p>
<p>I am informed that there is no way to do this. All I can think of is to create a heuristic <em>per data source</em>, such that I see when the file was acquired then scan for the validation event that happens closest to the acquisition event without going so far ahead that I read the <em>next</em> successful validation event by mistake. <em>I just wanted to see if data was landing in the platform</em>. And to make things worse, I suddenly remember that I&#39;ve seen this awslog thing before. A month after I joined the business, I saw it, and I said that it was unacceptably bad. The response was that it&#39;s okay because all the data we want is technically inside those strings, and this design is more <a href="https://ludic.mataroa.blog/blog/flexible-schemas-are-the-mindkiller/">flexible</a>. Of course, since then we&#39;ve added our first data source that is downloaded more than once a day, so it turns out, shockingly, that they should have Just Used Postgres and not tried to be excessively clever. As always.</p>
<p>How have we been running things like this for <em>two years</em>? Millions of dollars were spent on this system. Our CTO, who has never written code themselves, gets on stages every few months and just <em>lies to people</em> about things that the CTO can&#39;t possibly understand, pretending that any of this works and that they&#39;re a leader in the space. Then their friends buy the same software — I know because recruiters keep calling to ask me if I&#39;ll help lead the efforts. Almost every large business in Melbourne is rushing to purchase our tooling, tools like Snowflake and Databricks, because the industry is pretending that any of this is more important than hiring competent people and treating them well. I could build something superior to this with an ancient laptop, an internet connection, and spreadsheets. It would take me a month tops.</p>
<p>I&#39;ve known for a long time that I can&#39;t change things here. But in this moment, I realize that the organization values things that I don&#39;t value, and it&#39;s as simple as that. I could pretend to be neutral and say that my values aren&#39;t <em>better</em>, but you know what, my values <em>are</em> better. Having tested code is better. Having comprehensible logs is better. I&#39;m wasting their money sitting around until December, which is unethical. I&#39;m disrespecting myself waiting two more months for a measly Christmas break payout, which is unwise. I&#39;ve even <em>degraded team morale</em> because I&#39;ve convinced some of the engineers that things should be better, but not management, so now some of the engineers are upset. I&#39;m a net negative for this team, except for <a href="https://ludic.mataroa.blog/blog/i-accidentally-saved-half-a-million-dollars/">that one time I saved them so much money that it continues to cover all three of our managers&#39; salaries combined</a>.</p>
<p>As an afterthought, the person who just informed us that we have no way to associate logs to their respective ingestion events adds:</p>
<p>&#34;By the way, I think that there&#39;s a chance some of the logs don&#39;t actually report the right things. Like the ones that say <code>Validated: True</code> are actually just hardcoded strings in the Lambda functions, and the people that wrote them may have meant to type in things like <code>File Landed: True</code> but made mistakes.&#34;</p>
<p>I am dumbstruck. The other senior is laughing hysterically. </p>
<p>It is 11:30 AM in Melbourne, 9th October, 2024. The wind is a vortex of ghost-knives sending birds careening from the sky. I glance down at my tea, and it is liquid hatred. I take a sip and savor it.</p>
<p>&#34;Hey, are you still there?&#34;, my pairing partner replies.</p>
<p>&#34;Yeah. Yeah. Listen, I&#39;m done. I&#39;m out today.&#34;</p>
<p>&#34;What? What about December?&#34;</p>
<p>&#34;I could get the entire terrible first draft of a whole book out by December if I wasn&#39;t wasting time on this.&#34;</p>
<p>&#34;... Fair.&#34;</p>
<p>I briefly consider contacting my partner, but I know she&#39;ll support me. I could check in with my parents, but they&#39;d just worry for no reason. I could chat with my co-founders, but they&#39;re just going to tell me to do what I need to do. I could sleep on it, but that would just be to give myself the illusion of responsibility even as I barrel towards wasting two more months to earn money that, thanks to five years of diligently navigating various Pain Zones, I don&#39;t even need.</p>
<p>I resign at 2:00 PM.</p>

<p>It is 3:00 PM in Melbourne, 9th October, 2024. I have called my director, who is highly competent, and explained why every engineer wants to quit, and finalized the paperwork. My last day is the 5th of November, 2024. My only job title is now director of my own consultancy, and in January my savings will start to tick down. I glance down at my tea, and it is tea. I take a sip and savor it.</p>
<h3 id="ps">PS:</h3>
<p>Firstly, I gave a talk at GDG Melbourne which you can watch <a href="https://www.youtube.com/watch?v=xlf4oXoP8qI">here</a>. The audio quality is not great, so I forgive anyone who taps out. The comments are weird because I asked people to flip a coin and respond with &#34;This guy is the next Steve Jobs&#34; or &#34;This guy seems like a real piece of work&#34;, which I only regret a little bit. I should not be allowed to run a business.</p>
<p>Secondly, I gave a webinar to US board members at the invitation of the Financial Times. Suffice it to say that while people are sincerely trying their best, our leaders are not even <em>remotely</em> equipped to handle the volume of people just outright lying to them about IT. Also apparently my psychotic blog does not disqualify me from Financial Times affiliation, which is <em>wild</em>, but is maybe a useful lesson that the world is desperate for sincerity even when it isn&#39;t dressed up as corporate maturity.</p>
<div>
<hr/>
<ol>
<li id="fn:1">
<p>We do actually say this every morning. <a href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>The people that expect to get <em>all</em> of them are probably not doing themselves any favors either. <a href="#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
</ol>
</div>
        </div></div>
  </body>
</html>
