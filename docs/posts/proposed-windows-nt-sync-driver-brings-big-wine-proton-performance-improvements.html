<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.gamingonlinux.com/2024/01/proposed-windows-nt-sync-driver-brings-big-wine-proton-performance-improvements/">Original</a>
    <h1>Proposed Windows NT sync driver brings big Wine/Proton performance improvements</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Zeb Figura of CodeWeavers <a href="https://lore.kernel.org/lkml/20240124004028.16826-1-zfigura@codeweavers.com/" target="_blank">has proposed</a> a Windows NT synchronization primitive driver to help performance of running games and applications designed for Windows on Linux with Wine / Proton.</p>
<p>As per the RFC (request for comments) posted onto the Linux kernel mailing list Figura notes: &#34;This patch series introduces a new char misc driver, /dev/ntsync, which is used to implement Windows NT synchronization primitives.&#34;</p>
<p>Then giving some background on it: &#34;The Wine project emulates the Windows API in user space. One particular part of</p>
<p>The NT synchronization APIs are too complex to implement on top of existing primitives without sacrificing correctness. Certain operations, such as NtPulseEvent() or the &#34;wait-for-all&#34; mode of NtWaitForMultipleObjects(), require direct control over the underlying wait queue, and implementing a wait queue sufficiently robust for Wine in user space is not possible. This proposed driver, therefore, implements the problematic interfaces directly in the Linux kernel.&#34;</p>
<p>Figura did a presentation on it at the Linux Plumbers Conference in 2023 that you can see below:</p>

<p>What kind of performance difference might we see with something like this? The difference depends on your hardware and what you&#39;re trying to run but some FPS examples were given from multiple users including:</p>

<p><em>What hardware and software each was tested on was not noted.</em></p>
<p>Some impressive numbers but again it&#39;s hardware dependent, but even so any performance uplift would be welcome, so hopefully the patch series gets some good comments and approval after any tweaks are done that may be needed. Looks like we could end up seeing a nice future performance improvement for Linux and Steam Deck gaming with Wine and Proton.</p>
<p><em>Source: <a href="https://www.phoronix.com/news/Windows-NT-Sync-RFC-Linux" target="_blank">Phoronix</a></em></p>
<p><span>Article taken from <a href="https://www.gamingonlinux.com/">GamingOnLinux.com.</a></span>
</p></div></div>
  </body>
</html>
