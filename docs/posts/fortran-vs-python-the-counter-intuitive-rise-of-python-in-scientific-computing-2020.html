<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://fortran-lang.discourse.group/t/the-counter-intuitive-rise-of-python-in-scientific-computing/469">Original</a>
    <h1>Fortran vs Python: The counter-intuitive rise of Python in scientific computing (2020)</h1>
    
    <div id="readability-page-1" class="page"><div id="main-outlet" role="main">
        

  

    <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="The counter-intuitive rise of Python in scientific computing"/>
      
        <meta itemprop="articleSection" content="Uncategorized"/>
      <meta itemprop="keywords" content=""/>
      


          <div id="post_1">
            <div>
              

                

              <p><span>
                  <time itemprop="datePublished" datetime="2020-12-08T13:38:32Z">
                    December 8, 2020,  1:38pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-08T13:38:32Z"/>
              <span itemprop="position">1</span>
              </span>
            </p></div>
            <div itemprop="text">
              

<p>I found this blog post interesting, even though I do not fully agree with the authors’ conclusion. I don’t think it is the agility of Python as a programming language itself, but the developed infrastructure of libraries, online documentation and learning resources, which enabled Bob to quickly find the Python kdtree in the first place. There <em>is</em> in fact a <a href="https://github.com/jmhodges/kdtree2" rel="noopener nofollow ugc">kdtree</a> library available for Fortran. According to <a href="https://stackoverflow.com/a/15230041/4283055" rel="noopener nofollow ugc">some resources</a> it even delivers performance similar to mature C and C++ libraries. However, it lacks the nice webpage, proper unit testing, documentation, and user examples, which are needed so it could stand out.</p>
<p>Flipping the coin of the debate, we could also say it is the lack of Fortran developer resources (and developers themselves), particularly for “classic” computer science algorithms like searching, sorting, heaps, stacks and queues, tree construction, etc., which obstructs adoption of Fortran in some domains of computational science.</p>
<p>The previous weekend I followed a Python <a href="https://scipython.com/blog/quadtrees-2-implementation-in-python/" rel="noopener nofollow ugc">quadtree tutorial</a> and was quickly able to adapt it to Fortran (code is available <a href="https://gist.github.com/ivan-pi/47d257f00bba4ae064580413f8bc9da9" rel="noopener nofollow ugc">here</a>). Usage of the tree is not any more complicated than in Python:</p>
<pre><code>integer, parameter :: n = 140
real(wp) :: points(n,2)
type(qtree) :: tree
integer, allocatable :: idxs(:)

! Square quadtree box with center at (0.5,0.5) and width 1
call tree%init(0.5_wp,0.5_wp,1.0_wp,1.0_wp)

! Populate with random points
call random_number(points)
call tree%populate(points)

! Query indexes in rectangle centered at (0.75,0.75) and width 0.6
idxs = tree%query(boundaries(0.75_wp,0.75_wp,0.6_wp,0.6_wp))

! Query indexes in circle with radius 0.3 centered at (0.75,0.75)
idxs = tree%query_radius([0.75_wp,0.75_wp],0.3_wp)

</code></pre>
<p>Sample output:<br/>
</p><div><a href="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/original/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2.png" data-download-href="/uploads/short-url/8rnqG0RhpprqMOy1l1iAqz5magq.png?dl=1" title="qtree" rel="noopener nofollow ugc"><img src="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2_2_375x375.png" alt="qtree" data-base62-sha1="8rnqG0RhpprqMOy1l1iAqz5magq" width="375" height="375" srcset="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2_2_375x375.png, https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2_2_562x562.png 1.5x, https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2_2_750x750.png 2x" data-small-upload="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/3b29a95d726c1e37d4dde6671227b8811d3efbe2_2_10x10.png"/></a></div>
<p>A few months ago I also followed a <a href="https://gist.github.com/jakevdp/5216193" rel="noopener nofollow ugc">gist</a> by <a href="https://jakevdp.github.io/pages/about.html" rel="noopener nofollow ugc">Jake Vanderplas</a> and created a <a href="https://gist.github.com/ivan-pi/661c0884069baced35c71e6d5b6fe3ce" rel="noopener nofollow ugc">Fortran Balltree</a>. Some errors remains in the query function <img src="https://emoji.discourse-cdn.com/twitter/frowning.png?v=9" title=":frowning:" alt=":frowning:"/> ), but at the time the build process worked nicely:</p>
<div><a href="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/original/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed.png" data-download-href="/uploads/short-url/jjeu8OnX7MBzcNeZ1hvQDnoRf41.png?dl=1" title="ball_tree_cropped" rel="noopener nofollow ugc"><img src="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed_2_517x294.png" alt="ball_tree_cropped" data-base62-sha1="jjeu8OnX7MBzcNeZ1hvQDnoRf41" width="517" height="294" srcset="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed_2_517x294.png, https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed_2_775x441.png 1.5x, https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed_2_1034x588.png 2x" data-small-upload="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/optimized/1X/8755e4efbd9bd3c136e2ee6daf0a173487fca2ed_2_10x10.png"/></a></div>
<p>I was planning to polish these some more and make them available in the future as an <code>fpm</code> package. It would be nice to find some collaborators!</p>
            </div>

            

            

                
          </div>
          <div id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/awvwgk"><span itemprop="name">awvwgk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-08T20:28:49Z">
                    December 8, 2020,  8:28pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-08T20:28:49Z"/>
              <span itemprop="position">2</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Sadly, the linked <code>kdtree</code> library seems to be not actively maintained anymore.</p>
<p>I can think of at least one of my projects which could make good use of such a library in production and would be certainly interested in helping out.</p>
            </div>

            

            

          </div>
          <div id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/certik"><span itemprop="name">certik</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-08T20:39:02Z">
                    December 8, 2020,  8:39pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-08T20:39:02Z"/>
              <span itemprop="position">3</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Part of the advantage of Python is that it is interactive. We will fix that for Fortran with LFortran.</p>
<p>Finally, Python has more mature tooling, allowing rapid prototyping. I strongly believe that such modern tooling can be implemented for Fortran also. But currently it does not exist, and that is why Python is no doubt easier to use, even for me.</p>
<p>But I think if we keep our current direction and momentum, this can be fixed. Python had realized its full potential. Fortran has not realized its full potential. If we can realize Fortran’s full potential, I think it will be a better language for scientific computing than Python.</p>
            </div>

            

            

                
          </div>
          <div id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>The author of this code is Matthew Kennel. According to the publication where it was introduced (back in 2004!) (<a href="https://arxiv.org/pdf/physics/0408067.pdf" rel="noopener nofollow ugc">https://arxiv.org/pdf/physics/0408067.pdf</a>) it is provided under terms of the <a href="https://en.wikipedia.org/wiki/Academic_Free_License" rel="noopener nofollow ugc">Academic Free License</a>. I have done some refactoring of it before in a private fork.</p>
<p>The Scipy library has a useful kd-tree which is described briefly in their Nature Methods paper (see Fig. 3 in <a href="https://www.nature.com/articles/s41592-019-0686-2" rel="noopener nofollow ugc">https://www.nature.com/articles/s41592-019-0686-2</a>). The latest version is actually written in C++:</p>
<p>          <a href="https://media.springernature.com/full/springer-static/image/art:10.1038/s41592-019-0686-2/MediaObjects/41592_2019_686_Fig3_HTML.png?as=webp" target="_blank" rel="noopener nofollow ugc">
            <img src="https://media.springernature.com/full/springer-static/image/art:10.1038/s41592-019-0686-2/MediaObjects/41592_2019_686_Fig3_HTML.png?as=webp" width="690" height="247"/>
          </a>
</p>
<p>The benchmark is to construct a tree of n = 10000 uniformly distributed points, and query the nearest neighbors for r = 1000 random vectors in m = 3, 8, and 16 dimensions. The exact benchmark setup can be found here: <a href="https://github.com/scipy/scipy/blob/10c8c8de491a607378d6dca7602b0a3ed440a4b4/benchmarks/benchmarks/spatial.py#L110-L139" rel="noopener nofollow ugc">https://github.com/scipy/scipy/blob/10c8c8de491a607378d6dca7602b0a3ed440a4b4/benchmarks/benchmarks/spatial.py#L110-L139</a></p>
<p>I have repeated this test with the <code>kdtree2</code> code from Matthew Kennel:</p>
<pre><code>program kdtree_benchmark
  use kdtree2_module
  implicit none

  type(kdtree2), pointer :: tree
  real(kdkind), dimension(:,:), allocatable :: data, queries
  type(kdtree2_result) :: results(1)

  real :: t0, t1, t2
  integer, parameter :: m(3) = [3, 8, 16]
  integer, parameter :: n = 10000, r = 1000
  integer :: idxs(r), idx
  integer :: i

  do i = 1, 3

    write(*,*) &#34;Dimension = &#34;, m(i)

    allocate(data(m(i),n))
    call random_number(data)

    allocate(queries(m(i),r))
    call random_number(queries)

    ! Populate tree
    call cpu_time(t0)
    tree =&gt; kdtree2_create(data,sort=.true.,rearrange=.true.)
    call cpu_time(t1)

    ! Query random vectors
    do idx = 1, r
      call kdtree2_n_nearest(tp=tree,qv=queries(:,idx),nn=1,results=results)
      idxs(idx) = results(1)%idx
    end do
    call cpu_time(t2)

    write(*,*) &#34;Tree build (s): &#34;, t1 - t0
    write(*,*) &#34;Tree query (s): &#34;, t2 - t1

    call kdtree2_destroy(tree)  
    deallocate(data)
    deallocate(queries)

  end do

end program
</code></pre>
<p>Running the program on a &gt;5 year old ThinkPad T530 with an Intel® Core™ i5-3320M CPU:</p>
<pre><code>$ gfortran -O3 src/kdtree2_precision_module.f90 src/kdtree2_priority_queue_module.f90 src/kdtree2_module.f90 tests/time.f90 -o time
$ ./time
 Dimension =            3
 Tree build (s):    3.41600017E-03
 Tree query (s):    1.05800014E-03
 Dimension =            8
 Tree build (s):    4.14900016E-03
 Tree query (s):    1.39079997E-02
 Dimension =           16
 Tree build (s):    5.63300028E-03
 Tree query (s):   0.218334988    
</code></pre>
<p>The 16 year old Fortran code delivers similar performance to the latest Scipy version!</p>
<p>Had Bob from the blog post known about it, he could have told those Python youngsters…</p>
            </div>

            

            

          </div>
          <div id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/certik"><span itemprop="name">certik</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-09T00:18:46Z">
                    December 9, 2020, 12:18am
                  </time>
                  <meta itemprop="dateModified" content="2020-12-09T00:18:46Z"/>
              <span itemprop="position">5</span>
              </span>
            </p>
            <p>Can you try compiling with <code>gfortran -O3 -march=native -funroll-loops -ffast-math</code> and post the timing results?</p>

            

            

          </div>
          <div id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<pre><code>$ ./time
 Dimension =            3
 Tree build (s):    5.34399971E-03
 Tree query (s):    1.52799953E-03
 Dimension =            8
 Tree build (s):    3.08299996E-03
 Tree query (s):    1.24450000E-02
 Dimension =           16
 Tree build (s):    4.65999916E-03
 Tree query (s):   0.195482999    
</code></pre>
<p>Some small improvements for higher dimensions, but it also makes the 3d tree results worse. Apart from the Euclidean distance calculation there is not much floating point math involved in the tree. But I am sure there is some space for further performance tuning.</p>
<p>I also did not use the same random number seed, so that might also affect the results.</p>
            </div>

            

            

          </div>
          <div id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>iI was intrigued with timing this using the current default parameters</p>
<p>It was interesting to see what effort it took taking a small project I</p>
<p>The LICENSE was very open (included for the original ktree package) so</p>
<pre><code>#!/bin/bash
########################################################
SKIP(){
# fpm package at
wget http://urbanjost.altervista.org/REMOVE/ktree.tgz
tar xvfz ktree.tgz
cd ktree
}
########################################################
(
exec 2&gt;&amp;1
fpm run --compiler ifort
fpm run --release --compiler ifort
fpm run --compiler nvfortran
fpm run --release --compiler nvfortran
fpm run --compiler gfortran
fpm run --release --compiler gfortran
)| tee $(basename $0).out
########################################################
exit
########################################################

</code></pre>
<h2>ifort</h2>
<pre><code>+ build/ifort_debug/app/ktree
Dimension =            3
Dimension =            3
Tree build (s):   1.3705999E-02
Tree query (s):   3.7389994E-03
Dimension =            8
Tree build (s):   1.3826996E-02
Tree query (s):   3.7319958E-03
Dimension =            8
Tree build (s):   2.1205008E-02
Tree query (s):   6.4843997E-02
Dimension =           16
Tree build (s):   2.1082014E-02
Tree query (s):   6.5044999E-02
Dimension =           16
Tree build (s):   3.3169001E-02
Tree query (s):    1.363189
Tree build (s):   3.3977002E-02
Tree query (s):    1.368700
+ build/ifort_release/app/ktree
Dimension =            3
Tree build (s):   5.2239895E-03
Tree query (s):   2.0000041E-03
Dimension =            8
Dimension =            3
Tree build (s):   5.2229986E-03
Tree query (s):   2.0080060E-03
Dimension =            8
Tree build (s):   7.9360008E-03
Tree query (s):   3.4193993E-02
Dimension =           16
Tree build (s):   7.9390034E-03
Tree query (s):   3.4123003E-02
Dimension =           16
Tree build (s):   1.3113007E-02
Tree query (s):   0.6742060
Tree build (s):   1.3014004E-02
Tree query (s):   0.6697240
</code></pre>
<h2>nfortran</h2>
<pre><code>+ build/nvfortran_debug/app/ktree
Dimension =             3
Tree build (s):    3.7317991E-02
Tree query (s):    8.9461803E-03
Dimension =             8
Tree build (s):    5.5178881E-02
Tree query (s):    0.1370029
Dimension =            16
Tree build (s):    8.2104921E-02
Tree query (s):     2.857805
+ build/nvfortran_release/app/ktree
Dimension =             3
Tree build (s):    1.2266159E-02
Tree query (s):    4.1868687E-03
Dimension =             8
Tree build (s):    1.7192841E-02
Tree query (s):    6.0570002E-02
Dimension =            16
Tree build (s):    2.4964094E-02
Tree query (s):     1.122507
</code></pre>
<h2>gfortran</h2>
<pre><code>+ build/ifort_debug/app/ktree
+ build/gfortran_debug/app/ktree
Dimension =            3
Tree build (s):    1.19459992E-02
Tree query (s):    3.73700075E-03
Dimension =            8
Tree build (s):    1.78890005E-02
Tree query (s):    6.33680001E-02
Dimension =           16
Tree build (s):    2.55430043E-02
Tree query (s):    1.31747389
+ build/gfortran_release/app/ktree
Dimension =            3
Tree build (s):    5.34000061E-03
Tree query (s):    1.76099967E-03
Dimension =            8
Tree build (s):    7.67700002E-03
Tree query (s):    2.68570017E-02
Dimension =           16
Tree build (s):    1.12170018E-02
Tree query (s):   0.501192987
</code></pre>
<p>I wanted to compare these times with the original parameters</p>
            </div>

            

            

          </div>
          <div id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>The double output with ifort is kind of strange indeed. <code>nvfortran</code> also seems to be struggling.</p>
<p>Does opposite of what you expected mean faster?</p>
            </div>

            

            

          </div>
          <div id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>Well, I typically find nvfortran the fastest with code in this category; I find ifort the most reliable for compiling up standard code (maybe this is not) but looked like I was hitting some kind of bug, …</p>
<p>On a different note It emphasized to me there is a need for allowing for custom build options with  Fortran <code>fpm</code> but it proved that an <code>fpm</code> setup can be created relatively easily with small projects and is then theoretically easily distributed and used by others; albeit I did not actually make it into a proper repository on something like github</p>
<p>Note I have had problems with larger projects with nvfortran and am frustrated by it not supporting <code>real128</code> as many packages I have have general code in them with a version for integer, real, doubleprecision, … so in this case it built fine out of the box but was slow, which was a particular surprise.</p>
<p>Also note I actually started with a version that might not be the same as the one you used, as I had some bizarre download error with my old Firefox version with your link but found what appears to be the same code in the CFD repository. It  said it was an unaltered copy. Don’t want to get off on too many tangents but if you have wget or even a browser you can grab that quick <code>fpm</code> setup and see if I did anything obviously wrong.</p>
<p>I was more interested in comparing your times to the base <code>fpm</code> parameters initially; but got distracted by the results and just thought they might be interesting to others.  Since the hardware is very different comparing my times to yours is “Apples to Oranges” so if I want to do the same compile you did but with <code>fpm</code> that currently means I have to make a quick hack of <code>fpm</code> or do the build outside of <code>fpm</code>; but that might change soon and is an entirely different topic. Think how easy it would be for me to run your tests with your code on my hardware if it was a <code>fpm</code> package on a git server! Just a few lines of commands!</p>
<p>So I was actually just diverting myself on a lark with a different purpose than  what really is being discussed here but within a few minutes I had a result I thought might be of interest. On second thought it appears too divergent! Seems like a nice project that would make a great <code>fpm</code> package though.</p>
<p>In a past lifetime this library would have been particularly pertinent to me but not now, but it woke up some dormant brain cells and really caught my attention. I hope you complete your proposed project!</p>
            </div>

            

            

          </div>
          <div id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/billlong"><span itemprop="name">billlong</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-09T12:45:38Z">
                    December 9, 2020, 12:45pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-09T12:45:38Z"/>
              <span itemprop="position">10</span>
              </span>
            </p>
            <p>Fortran has been through the “latest shiny object” process before, with Java and C++.  HR departments and managers want to hire programmers who are already trained.  C++ was at one time the default language taught to college students. (Before that, Pascal, and then C.)  C++ was replaced by Java. Now it is Python.   The issue is not which language is best, but rather which language the colleges and universities teach.  CS departments generally don’t teach Fortran at all (most of the faculty do not know the language).</p>

            

            

          </div>
          <div id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/zerothi"><span itemprop="name">zerothi</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-11T14:58:51Z">
                    December 11, 2020,  2:58pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-11T15:03:41Z"/>
              <span itemprop="position">11</span>
              </span>
            </p>
            <div itemprop="text">
              <p>We really have to be realistic here. <a href="https://fortran-lang.discourse.group/u/ivanpribec">@ivanpribec</a> I don’t agree that fortran is as easy to program in as Python. There are pitfalls and in particular, users have to compile the code.</p>
<p>Consider person A, he develops some code in fortran and finds some weird behaviour. He wants to plot some of the data structures while running to get an idea of the flow.</p>
<p>If you haven’t already setup your own program to be linkable with X plotting library of fortran, then this is a nightmare to begin with (yeah, fpm will help), but problem is that users have to deal with things such as 1) adding use statements, 2) adding temporary variables, 3) fixing build scripts to add libraries for plotting, 4) be sure about types etc. passing down correct stuff.</p>
<p>Yeah, “block” is your best friend in this case! <img src="https://emoji.discourse-cdn.com/twitter/wink.png?v=9" title=":wink:" alt=":wink:"/></p>
<p>But really, in Python, any body can just do 3 lines of code to get a functional plot.</p>
<p>What we surely should aim for is a thriving community, increasing package repositories and improving documentation whole-wide to make it fresh and shiny again. But even then. I still think that users will be more “productive” in scripting languages.</p>
<p>Not to bash, just to add to the thread <img src="https://emoji.discourse-cdn.com/twitter/wink.png?v=9" title=":wink:" alt=":wink:"/></p>
<p>Also, being a supporter at an HPC site, I can safely say that the majority of scientists are <em>not</em> interested in learning a language deep enough to be fluent without having documentation in a tab nearby. They care about their end-goal; the problem at hand. They don’t even care about performance (as long as it takes some days).</p>
            </div>

            

            

          </div>
          <div id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>Finally some responses which return to the source of the thread <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=9" title=":slight_smile:" alt=":slight_smile:"/></p>
<p>I don’t think I made any statements about Fortran being <em>easier</em> than Python. Only that in the case of the story in the blog post, it was not the agility of Python that lead to triumph over Fortran for the specific problem, but the well developed community infrastructure. Of course you could argue that Python being easy and more accessible (and as <a href="https://fortran-lang.discourse.group/u/billlong">@billlong</a> mentioned, being taught at universities) is partially the reason why more libraries are developed in it.</p>
<p>I think there are pitfalls to using Python too. Being a Python user myself, I know I have struggled a lot with pip, conda, virtual environments, incompatibility between Python 2 and 3, wrong python paths, Python classes and decorators, etc. While Python can be used interactively in the interpreter or in a Jupyter notebook, I usually find myself putting things in a script, and running from a shell. This is probably just a consequence of not being bothered to configure an IDE, and being so used to the shell &lt;-&gt; editor cycle from Fortran.</p>
<p>Concerning use statements, Python has these too -&gt; <code>import</code>. While it works great for pre-installed pacakages, I always need a documentation tab open to figure out how the folder structure relates to the import names in my own libraries. I’ve also had problems with absolute and relative import paths, when interacting with Python users doing developmnet in PyCharms on Windows.</p>
<p>While the dynamic typing in Python makes the language feel simple, I have had cases before where it introduced subtle bugs. A simple example that comes to my mind is</p>
<pre><code>a = np.array([1,2,3])
b = a
</code></pre>
<p>where the array <code>b</code> is now only a pointer to <code>a</code>. Modifying elements of <code>b</code> will also modify elements of <code>a</code>. In my experience, explaining this to a beginner can be challenging. A second example is passing the wrong dummy variables in a function call. In recent codes I also see Python users specifying <a href="https://docs.python.org/3/library/typing.html">type hints</a> which brings us half-way back to static typing like in Fortran.</p>
<p>But I agree that for the average scientific user, which is just interested in solving a problem with some existing algorithm implementation, it will be easier to accomplish in Python.</p>
            </div>

            

            

          </div>
          <div id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/certik"><span itemprop="name">certik</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-11T16:12:53Z">
                    December 11, 2020,  4:12pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-11T16:12:53Z"/>
              <span itemprop="position">13</span>
              </span>
            </p>
            <div itemprop="text">
              <p><a href="https://fortran-lang.discourse.group/u/zerothi">@zerothi</a>, I think part of your comment mirrors what I wrote above: Fortran is currently not as easy to use as Python.</p>
<p>The part where we might differ is in what “might be” in the future: I think if we develop all the tools and compilers, Fortran <em>might</em> be as easy to use as Python. I understand if you are skeptical.</p>
            </div>

            

            

          </div>
          <div id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/urbanjost"><span itemprop="name">urbanjost</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-11T17:47:56Z">
                    December 11, 2020,  5:47pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-11T17:47:56Z"/>
              <span itemprop="position">14</span>
              </span>
            </p>
            <p>Having used a Fortran-based routine called INSPECT() that when passed an array lets you interact with it using matlab-like commands both from text and stdin that allows for plotting; as well as writing the output to a process, as a NAMELIST file, and as a Matlab input file I know that it is not the language per-se but the easily available tools that can make a language feel simple. You can make system calls at the prompt so you can call other simple utilties that compare the NAMELIST file to previous dumps and give a statistical summary of the data as well.  All Fortran except a binding to low-level graphics. Easier to use than any other utility I have personally tried with a built-in user manual for when I forget.  It can also be called as a stand-alone program</p>

            

            

          </div>
          <div id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/vmagnin"><span itemprop="name">vmagnin</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-11T18:08:05Z">
                    December 11, 2020,  6:08pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-11T18:08:05Z"/>
              <span itemprop="position">15</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Personally, I don’t use Python for scientific computing. Perhaps because I learned Python 15 years after Fortran… But ten years after learning Python, I have finally never tried things like scipy or numpy, which are probably wonderful tools. I love Fortran because it’s made for crunching numbers and it’s perennial (no problem to run a 25 years old code). When the CPU temperature is rising, I know it is for good reasons.</p>
<p>But I understand that Python is attractive and I love it too : you can do so much by writing so few lines… The syntax is sobre (like a Google search engine homepage…) And, the standard library is huge: <a href="https://docs.python.org/3/library/index.html" rel="noopener nofollow ugc">https://docs.python.org/3/library/index.html</a></p>
<p>Of course, as stated by Ivan, you can also have a lot of troubles with some Python features…</p>
<p>Finally, I think the Fortran standard library could be a killer feature, then fpm, then a Fortran interpreter.</p>
            </div>

            

            

          </div>
          <div id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>I personally do think Fortran language itself also requires an urgent boost to serve well the scientific and technical computing arenas.  And this is in addition to everything needed in its “ecosystem”: standard library, interpreter and other enhancements in tooling, etc.</p>
<p>The notion of <code>Turing-complete</code> may be too abstract and even too basic any longer for any practical utility with modern languages.  Nonetheless, one can think of an even more abstract notion of <strong>feature-completeness</strong> that can be more practical and which can resonate intuitively with those coding-in-anger regularly in scientific and technical domains.  This notion is decidedly dependent on the time period, the state-of-art in computing at a given instance in time.  On this count, Fortran has perennially fallen short of the needs of practitioners since ANSI FORTRAN publication back in 1978.  And the deficit continues to this day.</p>
<p>I had previously noted 6 items in this <a href="https://fortran-lang.discourse.group/t/high-performance-fortran-hpf-history-and-lessons/367/22"><strong>thread</strong></a> which are crucial for  immediate survival of the language as a legitimate contender in the scientific and technical computing space.</p>
<p>However I do believe there is a list of miscellaneous items in the <code>syntactic sugar</code> category that can make coding in Fortran far more <strong>safe</strong>, straightforward, and appealing and enjoyable, especially for scientists and engineers who should be and want to be domain experts in their respective fields, and not language masters:</p>
<ul>
<li>
<p>Why are we still <strong>required</strong> to include <code>implicit none</code> in every scope in Fortran?  Particularly in <code>INTERFACE .. END INTERFACE</code> constructs that has its own scope and which made it into the language much after the legacy with IMPLICIT statements.  This is especially pernicious, particularly with any respect to diversity and inclusivity which is all the rage these days with social justice.  Because the common refrain is “I don’t mind adding that statement” in all my codes, so nor should you - this is inherently disrespectful.  Well, there is a vast group of scientists and engineers who are either unable or unwilling to follow the discipline in terms of this verbosity.  And the cost of any indiscipline can be prohibitively expensive, particularly in commercial environments.  And continuously <strong>excluding</strong> the inclinations of those wanting to advance to a modern state where the desire to be explicit with types is the default “value proposition” from language design considerations is forcefully ignored not only belittles any concept of type safety but disrespects the most precious commodity, the time of practitioners.</p>
</li>
<li>
<p>There are so many domains now where 100% of the computing is performed using IEEE floating-point arithmetic.  Then, why are we still required to go through a long preamble with one’s own KIND module that sets the desired floating-point KINDs for use with IEEE formats.  Fortran can do with built-in aliases, say <code>ieee_fpb32</code>, <code>ieee_fpb64</code>, etc. (or something less verbose) that coders can immediately employ toward floating-point computations with an intuitive grasp and confidence in the types.</p>
</li>
<li>
<p>Same applies to other intrinsic types and their kinds, especially <code>INTEGER</code> and <code>CHARACTER</code> with `c_char’ kind.</p>
</li>
<li>
<p>And of course, a built-in string type.  Sure, initial experimentation in a standard-library years after <code>ISO_VARYING_STRING</code> is a decent reset, but it is the base language itself that needs this facility to be included intrinsically.</p>
</li>
</ul>
<p>The rate of change with all of these features in standard Fortran is either too slow or zero.  Fortran is headed to science museum archives unless things change for the better at a much faster pace.</p>
            </div>

            

            

          </div>
          <div id="post_17" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/Beliavsky"><span itemprop="name">Beliavsky</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-12T16:42:42Z">
                    December 12, 2020,  4:42pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-12T16:42:42Z"/>
              <span itemprop="position">17</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>FortranFan’s attempt to make IMPLICIT NONE a political issue is strained.</p>
<p>Do people agree with me that the standards committee should make implicit typing obsolescent? Every compiler will retain it, but people who insisted on implicit typing would have to use a std=legacy option.</p>
            </div>

            

            

          </div>
          <div id="post_19" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://fortran-lang.discourse.group/u/Beliavsky"><span itemprop="name">Beliavsky</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-12-12T17:22:41Z">
                    December 12, 2020,  5:22pm
                  </time>
                  <meta itemprop="dateModified" content="2020-12-12T17:30:34Z"/>
              <span itemprop="position">19</span>
              </span>
            </p>
            <div itemprop="text">
              <p>I’m not suggesting that gfortran or any other compiler remove the ability to compile code with implicit typing, just that users who still want this feature should use a compiler option that acknowledges their code is not standard-conforming. A large fraction would already be using the std=legacy option for reasons Steve Kargl described.</p>
<p>Sometimes I forget to use IMPLICIT NONE and get syntax errors that puzzle me. I doubt I am the only one. Making IMPLICIT NONE the default would save people writing new code a little time.</p>
            </div>

            

            

          </div>
          <div id="post_20" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>At least for new codes such errors can be prevented on the level of tooling.</p>
<p>As an example using the new Fortran package manager:</p>
<pre><code>~/fortran$ fpm new test_fpm
 + mkdir -p test_fpm
 + cd test_fpm
 + mkdir -p test_fpm/src
 + mkdir -p test_fpm/test
 + mkdir -p test_fpm/app
 + git init test_fpm
Initialized empty Git repository in /home/fortran/test_fpm/.git/
~/fortran$ cd test_fpm/
~/fortran/test_fpm$ cat src/test_fpm.f90 
module test_fpm
  implicit none
  private

  public :: say_hello
contains
  subroutine say_hello
    print *, &#34;Hello, test_fpm!&#34;
  end subroutine say_hello
end module test_fpm
</code></pre>
<p>Or using code completion upon pressing tab (in my case using <a href="https://www.sublimetext.com/">Sublime Text</a>):</p>
<p><img src="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/original/1X/9a3962ef61fd2df26f24fffb16d76334efaa150d.png" alt="implicit_none1" data-base62-sha1="m0ktMAUfrXu9Fg2rHxIJTll0EPz" width="387" height="169"/></p>
<p><img src="https://canada1.discourse-cdn.com/free1/uploads/fortran_lang/original/1X/fdc2337d9ca3a13a83c9ac1446678b1449de45cd.png" alt="implicit_none2" data-base62-sha1="AcQSbNzOvpGQLHco52nQwePJNFj" width="303" height="141"/></p>
<p>The code completion templates can be customized up to ones preferences.</p>
            </div>

            

            

          </div>
          <div id="post_21" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>It’s NOT political, but <em><strong>social</strong></em> - a fundamental difference, please make an effort to understand - see this also: <a href="https://mailman.j3-fortran.org/pipermail/j3/2020-June/012160.html">[J3] nailed to the church door</a>.  The social considerations underpin everything, increasingly the functioning of ISO and ANSI and their committees also.</p>
<p>Progress on any effort is almost always smacked down with “we’ve always done it this way, that’s how it should remain, we don’t mind continuing with it, we don’t think it’s trouble for us” and then tacitly conveying to take it or leave it.  And people will leave.</p>
<p>The resistance to making <code>implicit none</code> the default in Fortran is but a small (and some will think trivial) example yet it’s a classic illustration of which one can see the whole picture of also what holds the language back.</p>
<p>Converse to the cliched expression “you’d me at hello,” countless scientists and engineers are lost to Fortran at <code>implicit none</code> itself, often the first section in an introduction to the language.  And like with this <a href="https://en.wikipedia.org/wiki/For_Want_of_a_Nail"><strong>story</strong></a>, many a battle is lost.</p>
            </div>

            

            

          </div>
    </div>

    

  




    </div></div>
  </body>
</html>
