<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://news.ycombinator.com/item?id=31796311">Original</a>
    <h1>Redis vs. KeyDB vs. Dragonfly vs. Skytable</h1>
    
    <div id="readability-page-1" class="page"><div>It seems that several projects claim that they have built the &#34;world&#39;s fastest key/value store&#34; or sometimes the phrase used is even more outrageous. The following projects are in question:<p>- Redis: <a href="https://github.com/redis/redis" rel="nofollow">https://github.com/redis/redis</a></p><p>- KeyDB: <a href="https://github.com/snapchat/keydb" rel="nofollow">https://github.com/snapchat/keydb</a></p><p>- Dragonfly: <a href="https://github.com/dragonflydb/dragonfly" rel="nofollow">https://github.com/dragonflydb/dragonfly</a></p><p>- Skytable: <a href="https://github.com/skytable/skytable" rel="nofollow">https://github.com/skytable/skytable</a></p><p>And, these are my benchmark results (30 threads, 1 client per thread with GET/SET. See below for setup):</p><p>1. Redis: 112,100 / 99,892</p><p>2. KeyDB: 288,931 / 282,997</p><p>3. Dragonfly: 408,322 / 392,446</p><p>4. Skytable: 619,992 / 676,091</p><p># Notes</p><p>1. Redis:
I&#39;ll start with Redis which I&#39;d like to call the &#34;original&#34; key/value store (after memcached) because it is the oldest and most widely used of all. Being a long-time follower of Redis, I do know it&#39;s single-threaded (and uses io-threads since 6.0) and hence it achieves lesser throughput than the other stores listed above which are multi-threaded, at least to some extent. The best parts about Redis: it&#39;s the most feature complete of all the systems here, and is the oldest. (not saying old necessarily means better).</p><p>2. KeyDB:
The second is KeyDB. IIRC, I saw it in a blog post which said that it is a &#34;multithreaded fork of Redis that is 5X faster&#34;[1]. I really liked the idea because I was previously running several instances of Redis on the same node and proxying them like a &#34;single-node cluster.&#34; Why? To increase CPU utilization. A single KeyDB instance could replace the unwanted proxying funkiness, so I ditched Redis for KeyDB. Has been a fine experience so far, except for some occasional crashes.</p><p>3. Dragonfly:
Just found it on HN and seems to be relatively new. Dragonfly claims that it is 25X faster (that I couldn&#39;t reproduce) than Redis[2] and has the slogan &#34;Probably, the fastest in-memory store in the universe!&#34;. Doesn&#39;t support all the Redis commands yet, but I find it interesting mainly because of performance. Also, it&#39;s good to know why it is faster because it clearly outlines the underlying architecture[2]. The other three stores don&#39;t say much about it. Will be following the project.</p><p>4. Skytable:
Found it while looking for projects written in Rust. Claims to be &#34;insanely fast.&#34; Skytable&#39;s &#34;experimental benchmarks&#34; claim that it is something around 10X faster than Redis and some 2X-3X faster than KeyDB[3]. I hadn&#39;t heard of Skytable and it doesn&#39;t seem to be as widely used (unless I&#39;m missing something?). I find it interesting because of the planned features[4] and performance. Only Skytable natively runs on Windows out of the four. Will be following the project.</p><p>5. My thoughts:
Redis needs no introduction and is arguably super stable for use on production systems (using widely in our systems). KeyDB seems to be &#34;stable enough&#34; and it seems to be good for prod since Snapchat uses it already[5] (and so do we!). I found no Dragonfly v/s Skytable benchmarks.
The best part about Redis, KeyDB and Skytable is that they don&#39;t make any &#34;crazy assumptions&#34; about the system they run on. What do I mean?</p><p>Dragonfly expects you to have the latest hardware[6] and the latest kernel[7] on all your servers. I find this outrageous because not all servers run 5.10 and a majority of them are still using long-running branches on 4.x. Also, I don&#39;t expect them to have the latest processors, either. I&#39;d argue if the other three stores started assuming the latest features, they&#39;d be far faster than what they are today. Finally, both Dragonfly and Skytable are still early in their development so it may not be fair to compare their features against Redis and KeyDB who have been around for far longer. Also, all projects other than Skytable have companies behind them (unless I&#39;m missing something).</p><p>Edit #1: I have run the benchmarks myself for each store. In the benchmark with Redis, KeyDB and Skytable (redis-benchmark, memtier and sky-bench): Redis and KeyDB benchmarks seem to be very consistent, Skytable is a little inconsistent at times. However, in the benchmark with Redis, KeyDB and Dragonfly (with memtier), I was NOT able to reproduce the 25X speed that Dragonfly claims. I ran all tests on two m5.4xlarge servers (one with the k/v store and one with the benchmark tool).</p><p>Edit #2: Added benchmark results</p><p>What are your thoughts? Have you tried benchmarking any of them locally or in the cloud?</p><p>References:</p><p>[1]: <a href="https://docs.keydb.dev/blog/2019/10/07/blog-post" rel="nofollow">https://docs.keydb.dev/blog/2019/10/07/blog-post</a></p><p>[2]: <a href="https://github.com/dragonflydb/dragonfly" rel="nofollow">https://github.com/dragonflydb/dragonfly</a></p><p>[3]: <a href="https://github.com/ohsayan/sky-benches" rel="nofollow">https://github.com/ohsayan/sky-benches</a></p><p>[4]: <a href="https://github.com/skytable/skytable/issues/203" rel="nofollow">https://github.com/skytable/skytable/issues/203</a></p><p>[5]: <a href="https://docs.keydb.dev/news/2022/05/12/keydb-joins-snap" rel="nofollow">https://docs.keydb.dev/news/2022/05/12/keydb-joins-snap</a></p><p>[6]: <a href="https://github.com/dragonflydb/dragonfly/issues/124" rel="nofollow">https://github.com/dragonflydb/dragonfly/issues/124</a></p><p>[7]: <a href="https://github.com/dragonflydb/dragonfly/issues/96" rel="nofollow">https://github.com/dragonflydb/dragonfly/issues/96</a></p></div></div>
  </body>
</html>
