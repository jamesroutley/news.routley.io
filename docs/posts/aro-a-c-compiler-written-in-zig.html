<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Vexu/arocc">Original</a>
    <h1>Aro: A C compiler written in Zig</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">A C compiler with the goal of providing fast compilation and low memory usage with good diagnostics.</p>
<p dir="auto">Currently it can preprocess, parse and semantically analyze ~85% of standard C17 with
work still being needed to support all of the usual extensions.</p>
<p dir="auto">Basic code generation is supported for x86-64 linux and can produce a valid hello world:</p>
<div data-snippet-clipboard-copy-content="$ cat hello.c
extern int printf(const char *restrict fmt, ...);
int main(void) {
    printf(&#34;Hello, world!\n&#34;);
    return 0;
}
$ zig build run -- hello.c -c
$ zig run hello.o -lc
Hello, world!
$"><pre>$ <span>cat hello.c</span>
<span>extern int printf(const char *restrict fmt, ...);</span>
<span>int main(void) {</span>
<span>    printf(&#34;Hello, world!\n&#34;);</span>
<span>    return 0;</span>
<span>}</span>
$ <span>zig build run -- hello.c -c</span>
$ <span>zig run hello.o -lc</span>
<span>Hello, world!</span>
$</pre></div>
<p dir="auto">Future plans for the project include making it the C backend of Zig&#39;s <code>translate-c</code> feature and
making it an optional C frontend for the self-hosted Zig compiler.</p>
<div data-snippet-clipboard-copy-content="#define MAIN ma##in

#ifndef FOO
int *something[5];
#endif

#if defined MAIN
int MAIN(int argc, const char *argv[]) {
    return (argc * (char)4)[argv];
}
#endif"><pre>#<span>define</span> <span>MAIN</span> ma##in

#<span>ifndef</span> FOO
<span>int</span> *something[<span>5</span>];
#<span>endif</span>

#<span>if</span> defined MAIN
<span>int</span> <span>MAIN</span>(<span>int</span> argc, <span>const</span> <span>char</span> *argv[]) {
    <span>return</span> (argc * (<span>char</span>)<span>4</span>)[argv];
}
#<span>endif</span></pre></div>
<div data-snippet-clipboard-copy-content="var: &#39;[5]*int&#39;
 name: something

fn_def: &#39;fn (argc: int, argv: **const char) int&#39;
 name: main
 body:
  compound_stmt_two: &#39;void&#39;
    return_stmt: &#39;void&#39;
     expr:
      array_access_expr: &#39;*const char&#39; lvalue
       lhs:
        lval_to_rval: &#39;**const char&#39;
          decl_ref_expr: &#39;**const char&#39; lvalue
           name: argv
       index:
        paren_expr: &#39;int&#39;
         operand:
          mul_expr: &#39;int&#39;
           lhs:
            lval_to_rval: &#39;int&#39;
              decl_ref_expr: &#39;int&#39; lvalue
               name: argc
           rhs:
            int_cast: &#39;int&#39; (value: 4)
              cast_expr: &#39;char&#39;
               operand:
                int_literal: &#39;int&#39;
                 value: 4
"><pre><code>var: &#39;[5]*int&#39;
 name: something

fn_def: &#39;fn (argc: int, argv: **const char) int&#39;
 name: main
 body:
  compound_stmt_two: &#39;void&#39;
    return_stmt: &#39;void&#39;
     expr:
      array_access_expr: &#39;*const char&#39; lvalue
       lhs:
        lval_to_rval: &#39;**const char&#39;
          decl_ref_expr: &#39;**const char&#39; lvalue
           name: argv
       index:
        paren_expr: &#39;int&#39;
         operand:
          mul_expr: &#39;int&#39;
           lhs:
            lval_to_rval: &#39;int&#39;
              decl_ref_expr: &#39;int&#39; lvalue
               name: argc
           rhs:
            int_cast: &#39;int&#39; (value: 4)
              cast_expr: &#39;char&#39;
               operand:
                int_literal: &#39;int&#39;
                 value: 4

</code></pre></div>
<p dir="auto"><sup>types are printed in Zig style as C types are more confusing than necessary, actual error messages contain proper C like types</sup></p>
</article>
        </div></div>
  </body>
</html>
