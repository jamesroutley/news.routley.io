<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/MillenniumDB/MillenniumDB">Original</a>
    <h1>MillenniumDB: Property graph and RDF engine, still in development</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">MillenniumDB is a graph oriented database management system developed by the <a href="https://imfd.cl/" rel="nofollow">Millennium Institute for Foundational Research on Data (IMFD)</a>.</p>
<p dir="auto">The main objective of this project is to create a fully functional and easy-to-extend DBMS that serves as the basis for testing new techniques and algorithms related to databases and graphs. We support multiple graph models, RDF/SPARQL support is fairly complete and we have a custom language to work with Property Graphs. We are working to add support for GQL in the near future.</p>
<p dir="auto">This project is still in active development and is not production ready yet, some functionality is missing and there may be bugs.</p>

<ul dir="auto">
<li><a href="#graph-models">Graph Models</a>
<ul dir="auto">
<li><a href="#rdf-model">RDF</a></li>
<li><a href="#property-graph-model">Property Graphs</a></li>
</ul>
</li>
<li><a href="#project-build">Project Build</a></li>
<li><a href="#using-millenniumdb">Using MillenniumDB</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#docker">Docker</a></li>
</ul>

<p dir="auto">We support two different graph models, each graph model has its corresponding query language (i.e. once you import an RDF graph, you must use SPARQL to query it, our property graph query language will not work in that graph).</p>

<p dir="auto">We can import RDF graphs in <code>.ttl</code>, <code>.n3</code> or <code>.nt</code> formats and we support most of  <a href="https://www.w3.org/TR/sparql11-query/" rel="nofollow">SPARQL</a>, with exceptions explained below.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Currently Unsupported SPARQL Features</h2><a id="user-content-currently-unsupported-sparql-features" aria-label="Permalink: Currently Unsupported SPARQL Features" href="#currently-unsupported-sparql-features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Updates other that <a href="https://www.w3.org/TR/2013/REC-sparql11-update-20130321/#insertData" rel="nofollow">INSERT DATA</a> and <a href="https://www.w3.org/TR/2013/REC-sparql11-update-20130321/#deleteData" rel="nofollow">DELETE DATA</a></li>
<li>Named graphs</li>
<li>The <code>FROM</code> clause</li>
<li>The <code>GRAPH</code> keyword</li>
<li>Regular expression flags other than <code>i</code></li>
<li>Property paths with Negated Property Sets</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Deviations from the SPARQL Specification</h2><a id="user-content-deviations-from-the-sparql-specification" aria-label="Permalink: Deviations from the SPARQL Specification" href="#deviations-from-the-sparql-specification"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong>Language tag</strong> (<code>@</code>) handling is <strong>case sensitive</strong> for <code>JOIN</code>s and related operators, but in <strong>expressions</strong> it is <strong>case insensitive</strong>.</li>
<li>We do <strong>not</strong> store the exact <strong>lexical representation</strong> of numeric datatypes, only the <strong>numeric value</strong>. For example, <code>&#34;01&#34;^^xsd:integer</code> and <code>&#34;1&#34;^^xsd:integer</code> are identical in MillenniumDB.
<ul dir="auto">
<li>This implies that expressions that work with the lexical representation may result in a different value. For example <code>STR(1e0)</code> should be <code>&#34;1e0&#34;</code> according to the standard, but MillenniumDB will evaluate it as <code>&#34;1.0E0&#34;</code>.</li>
</ul>
</li>
<li>We do not differentiate between <code>&#34;0&#34;^^xsd:boolean</code> and <code>false</code> / <code>&#34;false&#34;^^xsd:boolean</code> or between <code>&#34;1&#34;^^xsd:boolean</code> and <code>true</code> / <code>&#34;true&#34;^^xsd:boolean</code>.</li>
<li>Our implementation uses <strong>ECMAScript</strong> regular expressions, not <strong>Perl</strong> regular expressions.</li>
<li>The regular path expression <code>?s :P* ?o</code> won&#39;t return all the nodes in the database that appears as a subject or object in some triple as the standard says. Instead it will only return the nodes that appears as a subject in a triple with predicate <code>:P</code>.</li>
</ul>
<p dir="auto">This is explained in more detail <a href="https://kracekumar.com/MillenniumDB/MillenniumDB/blob/main/doc/sparql/sparql_deviations.md">here</a>.</p>

<p dir="auto">The definition of the graph model and how to create a graph file is explained <a href="https://kracekumar.com/MillenniumDB/MillenniumDB/blob/main/doc/quad_model/data_model.md">here</a>.
The query language is inspired on Cypher and its defined <a href="https://kracekumar.com/MillenniumDB/MillenniumDB/blob/main/doc/quad_model/query_language.md">here</a>.</p>

<p dir="auto">MillenniumDB should be able to be built on any x86-64 Linux distribution.
On windows, Windows Subsystem for Linux (WSL) can be used. MacOS is supported if using a Mac chip.
For Mac with Intel chips or Windows without WSL, Docker can be used: see <a href="#docker">Docker</a>.</p>

<p dir="auto">MillenniumDB needs the following dependencies:</p>
<ul dir="auto">
<li>GCC &gt;= 8.1</li>
<li>CMake &gt;= 3.12</li>
<li>Git</li>
<li>libssl</li>
<li>ncursesw and less for the CLI</li>
<li>Python &gt;= 3.8 with venv to run tests</li>
<li>Boost 1.82</li>
</ul>
<p dir="auto">On current Debian and Ubuntu based distributions they can be installed by running:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo apt update &amp;&amp; sudo apt install git g++ cmake libssl-dev libncurses-dev less python3 python3-venv libicu-dev"><pre>sudo apt update <span>&amp;&amp;</span> sudo apt install git g++ cmake libssl-dev libncurses-dev less python3 python3-venv libicu-dev</pre></div>
<p dir="auto">On mac:</p>
<div dir="auto" data-snippet-clipboard-copy-content="brew install cmake ncurses openssl@3 icu4c"><pre>brew install cmake ncurses openssl@3 icu4c</pre></div>

<p dir="auto">Clone this repository, enter the repository root directory and set <code>MDB_HOME</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone git@github.com:MillenniumDB/MillenniumDB.git
cd MillenniumDB
export MDB_HOME=$(pwd)"><pre>git clone git@github.com:MillenniumDB/MillenniumDB.git
<span>cd</span> MillenniumDB
<span>export</span> MDB_HOME=<span><span>$(</span>pwd<span>)</span></span></pre></div>

<p dir="auto">Download <a href="https://archives.boost.io/release/1.82.0/source/boost_1_82_0.tar.gz" rel="nofollow"><code>boost_1_82_0.tar.gz</code></a> using a browser or wget:</p>
<div dir="auto" data-snippet-clipboard-copy-content="wget -q --show-progress https://archives.boost.io/release/1.82.0/source/boost_1_82_0.tar.gz"><pre>wget -q --show-progress https://archives.boost.io/release/1.82.0/source/boost_1_82_0.tar.gz</pre></div>
<p dir="auto">and run the following in the directory where boost was downloaded:</p>
<div dir="auto" data-snippet-clipboard-copy-content="tar -xf boost_1_82_0.tar.gz
mkdir -p $MDB_HOME/third_party/boost_1_82/include
mv boost_1_82_0/boost $MDB_HOME/third_party/boost_1_82/include
rm -r boost_1_82_0.tar.gz boost_1_82_0"><pre>tar -xf boost_1_82_0.tar.gz
mkdir -p <span>$MDB_HOME</span>/third_party/boost_1_82/include
mv boost_1_82_0/boost <span>$MDB_HOME</span>/third_party/boost_1_82/include
rm -r boost_1_82_0.tar.gz boost_1_82_0</pre></div>

<p dir="auto">Go back into the repository root directory and configure and build MillenniumDB:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cmake -Bbuild/Release -DCMAKE_BUILD_TYPE=Release &amp;&amp; cmake --build build/Release/"><pre>cmake -Bbuild/Release -DCMAKE_BUILD_TYPE=Release <span>&amp;&amp;</span> cmake --build build/Release/</pre></div>
<p dir="auto">To use multiple cores during compilation (much faster) use the following command and replace <code>&lt;n&gt;</code> with the desired number of threads:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cmake -Bbuild/Release -DCMAKE_BUILD_TYPE=Release &amp;&amp; cmake --build build/Release/ -j &lt;n&gt;"><pre>cmake -Bbuild/Release -DCMAKE_BUILD_TYPE=Release <span>&amp;&amp;</span> cmake --build build/Release/ -j <span>&lt;</span>n<span>&gt;</span></pre></div>

<p dir="auto">MillenniumDB supports two database formats: RDF and QuadModel. A RDF database can only be queried with SPARQL and a QuadModel database can only be queried with MQL. In this document we will focus on RDF/SPARQL.</p>

<div dir="auto" data-snippet-clipboard-copy-content="build/Release/bin/mdb-import &lt;data-file&gt; &lt;db-directory&gt; [--prefixes &lt;prefixes-file&gt;]"><pre>build/Release/bin/mdb-import <span>&lt;</span>data-file<span>&gt;</span> <span>&lt;</span>db-directory<span>&gt;</span> [--prefixes <span>&lt;</span>prefixes-file<span>&gt;</span>]</pre></div>
<ul dir="auto">
<li><code>&lt;data-file&gt;</code> is the path to the file containing the data to import, using the <a href="https://www.w3.org/TR/turtle/" rel="nofollow">Turtle</a> format for RDF, or <a href="https://kracekumar.com/MillenniumDB/MillenniumDB/blob/main/doc/quad_model/data_model.md#import-format">QuadModel Format</a> for Property Graphs.</li>
<li><code>&lt;db-directory&gt;</code> is the path of the directory where the new database will be created.</li>
<li><code>--prefixes &lt;prefixes-file&gt;</code> is an optional path to a prefixes file (used only when using RDF).</li>
</ul>

<p dir="auto">The optional prefixes file passed using the <code>--prefixes</code> option contains one prefix per line. Each line consists of a prefix alias and the prefix itself:</p>
<div data-snippet-clipboard-copy-content="http://www.myprefix.com/
https://other.prefix.com/foo
https://other.prefix.com/bar"><pre><code>http://www.myprefix.com/
https://other.prefix.com/foo
https://other.prefix.com/bar
</code></pre></div>
<p dir="auto">Using a prefix file is optional, but helps reduce the space occupied by IRIs in the database when using the RDF model. MillenniumDB generates IDs for each prefix, and when importing IRIs into the database replaces any prefixes with IDs. For large databases this can safe a significant amount of space. The total number of user defined prefixes cannot exceed 255.</p>

<p dir="auto">We implement the typical client/server model, so in order to query a database, you need to have a server running and then send queries to it.</p>

<p dir="auto">To run the server use the following command, passing the <code>&lt;db-directory&gt;</code> where the database was created:</p>
<div dir="auto" data-snippet-clipboard-copy-content="build/Release/bin/mdb-server &lt;db-directory&gt;"><pre>build/Release/bin/mdb-server <span>&lt;</span>db-directory<span>&gt;</span></pre></div>
<p dir="auto"><strong>IMPORTANT:</strong> we supposing you execute the server from the root directory of this repository (<code>MDB_HOME</code>). If you execute the server from another directory, the web server won&#39;t be available unless set the environment variable <code>MDB_BROWSER</code> is <code>$MDB_HOME/browser</code>.</p>

<p dir="auto">The easiest way to run a query is to use the Web Browser at <a href="http://localhost:4321/" rel="nofollow">http://localhost:4321/</a> after starting the server.</p>
<p dir="auto">The other option is sending the query via HTTP request.</p>
<p dir="auto">The MillenniumDB SPARQL server supports all three query operations specified in the <a href="https://www.w3.org/TR/2013/REC-sparql11-protocol-20130321/#query-operation" rel="nofollow">SPARQL 1.1 Protocol</a>:</p>
<ul dir="auto">
<li><code>query via GET</code></li>
<li><code>query via URL-encoded POST</code></li>
<li><code>query via POST directly</code></li>
</ul>
<p dir="auto">When using Property Graphs, we expect an HTTP POST where query is contained in the request body.</p>
<p dir="auto">We provide a script to make queries using curl.
To use it you have to pass a file with the query as a parameter:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bash scripts/query &lt;query-file&gt;"><pre>bash scripts/query <span>&lt;</span>query-file<span>&gt;</span></pre></div>
<p dir="auto">where <code>&lt;query-file&gt;</code> is the path to a file containing a query in SPARQL format.</p>
<p dir="auto">For updates, we have an analogous script:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bash scripts/update &lt;query-file&gt;"><pre>bash scripts/update <span>&lt;</span>query-file<span>&gt;</span></pre></div>

<p dir="auto">This is a step by step example of creating a database, running the server and making a query.
To run this example MillenniumDB has to be <a href="#project-build">built</a> first.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Create an Example Database</h2><a id="user-content-create-an-example-database" aria-label="Permalink: Create an Example Database" href="#create-an-example-database"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">From the repository root directory run the following command to create the example database:</p>
<div dir="auto" data-snippet-clipboard-copy-content="build/Release/bin/mdb-import data/example-rdf-database.ttl data/example-rdf-database"><pre>build/Release/bin/mdb-import data/example-rdf-database.ttl data/example-rdf-database</pre></div>
<p dir="auto">That should have created the directory <code>data/example-rdf-database</code> containing a database initialized with the data from <code>data/example-rdf-database.ttl</code>.</p>

<p dir="auto">The server can now be launched with the previously created database:</p>
<div data-snippet-clipboard-copy-content="build/Release/bin/mdb-server data/example-rdf-database"><pre><code>build/Release/bin/mdb-server data/example-rdf-database
</code></pre></div>

<p dir="auto">Go to <a href="http://localhost:4321/" rel="nofollow">http://localhost:4321/</a></p>

<p dir="auto">To remove the database that was created just delete the directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rm -r data/example-rdf-database"><pre>rm -r data/example-rdf-database</pre></div>

<p dir="auto">We also supply a Dockerfile to build and run MillenniumDB using Docker.</p>

<p dir="auto">To build a Docker image of MillenniumDB run the following:</p>


<p dir="auto">Put any <code>.ttl</code> files into the <code>data</code> directory and from the repository root directory run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run --rm --volume &#34;$PWD&#34;/data:/data mdb \
    mdb-import \
    /data/example-rdf-database.ttl \
    /data/example-rdf-database"><pre>docker run --rm --volume <span><span>&#34;</span><span>$PWD</span><span>&#34;</span></span>/data:/data mdb \
    mdb-import \
    /data/example-rdf-database.ttl \
    /data/example-rdf-database</pre></div>
<p dir="auto">You can change <code>/data/example-rdf-database.ttl</code> to the path of of your <code>.ttl</code> and
<code>/data/example-rdf-database</code> to the directory where you want the database to be
created. The <code>.ttl</code> files and database directories have to be inside <code>data</code>. The <code>.ttl</code>
file must not be a symbolic link to a <code>.ttl</code> file but a real one. Also the <code>.ttl</code> file must exist or else the DB will be created empty.</p>

<p dir="auto">To run the server with the previously created database use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run --rm --volume &#34;$PWD&#34;/data:/data -p 1234:1234 -p 4321:4321 mdb \
    mdb-server \
    /data/example-rdf-database"><pre>docker run --rm --volume <span><span>&#34;</span><span>$PWD</span><span>&#34;</span></span>/data:/data -p 1234:1234 -p 4321:4321 mdb \
    mdb-server \
    /data/example-rdf-database</pre></div>

<p dir="auto">Go to <a href="http://localhost:4321/" rel="nofollow">http://localhost:4321/</a> to see the web interface (available while running the server).</p>
<p dir="auto">Also we provide a script to make queries using the console:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bash scripts/query &lt;query-file&gt;"><pre>bash scripts/query <span>&lt;</span>query-file<span>&gt;</span></pre></div>

<p dir="auto">To remove the database that was created just delete the directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rm -r data/example-rdf-database"><pre>rm -r data/example-rdf-database</pre></div>
<p dir="auto">Depending on your Docker configuration you may have to use sudo.</p>
</article></div></div>
  </body>
</html>
