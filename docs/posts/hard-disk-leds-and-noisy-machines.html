<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blogsystem5.substack.com/p/hard-disk-leds-and-noisy-machines">Original</a>
    <h1>Hard disk LEDs and noisy machines</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p>The computers of yesteryear had this little feature known as blinking LED lights 🔆. They also had this other feature called noisy disks 💾 and loud fans 🪭. Uh wait. Features? Why “features” and not “annoyances”?!</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg" width="396" height="396" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:false,&#34;imageSize&#34;:&#34;normal&#34;,&#34;height&#34;:396,&#34;width&#34;:396,&#34;resizeWidth&#34;:396,&#34;bytes&#34;:21643,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:true,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F582ae704-2dd0-4b93-a9ec-5fb42c2ca5bd_396x396.jpeg 1456w" sizes="100vw" fetchpriority="high"/></picture></div></a><figcaption>Front panel of a common PC case in the late 1990s. My Pentium MMX 166 was hosted in one of these.</figcaption></figure></div><p>You see, these bright lights and loud noises acted as canaries 🐦 in a performance mine. They gave developers a chance to notice when things were off performance-wise. If your code abused the CPU or the hard disk by mistake, you could tell right away.</p><p>Nowadays, developer machines tend to be quiet under heavy load, and the vast majority of laptops don’t even have lights anymore. The obvious example are Macs: they haven’t had hard disk LEDs for a really long time, and since the M1, they are silent and cold too.</p><p><span>These characteristics are nice from a usability perspective. Unfortunately, as a developer, you now need to first </span><em>imagine</em><span> that something is wrong before even deciding to look for a problem. If the thought never crosses your mind, then you may never look.</span></p><p>Let me give you a few examples of the kinds of inefficiencies that I’m talking about. These would have been trivially noticed by the presence of indicators. These are all based on real-world situations I faced at some point in the (recent) past.</p><p><span>🪵 In a project I worked on, our development builds started writing about 80 MB of log messages </span><em>per second</em><span> to disk. No matter how you look at it, that’s </span><em>a lot</em><span> of disk traffic, and yet… the problematic code passed code review and was merged into the main branch.</span></p><p><span>The only indication that something was wrong was when </span><em>other</em><span> developers came asking for help because their local disk space was running out faster than usual. There was no other symptom behind the problem.</span></p><p>You’d hope that this inefficiency would be caught while qualifying the new release for production because, in theory, such logging waste would translate in an increase in CPU consumption or network bandwidth. But… I’m not so sure the issue would have been noticed.</p><p>🌐 In another project I worked on, I noticed that Bazel took an incredibly long time to complete some actions. It wasn’t until I looked in detail that I saw it stuck in a loop fetching the same remote artifact over and over again due to connection resets.</p><p>The build completed successfully after many minutes once Bazel gave up on the downloads and fell back local execution. There was no reason to suspect that something was wrong other than “these actions are just huge”. In reality, though, there was a bug somewhere.</p><p><span>🧱 Just today, I was in a video call and noticed that my laptop was reading 100MB/s from disk non-stop. I concluded the meeting but the disk reads didn’t stop. A quick peek at </span><code>top</code><span> showed something called </span><code>WallpaperVideoExtension</code><span> that seemed to have gone rogue.</span></p><p>This background process was consuming one full CPU, but such load wasn’t enough to make the system feel slower nor noisier. I suppose I would eventually have noticed that the battery was running out quicker than usual, but maybe not.</p><p><span>Killing the process made the problem go away and the constant disk reads stopped. Looking online, I find other instances of </span><code>WallpaperVideoExtension</code><span> consuming lots of CPU and memory, so this seems to be a bug. But if it’s common, why wasn’t it noticed in the first place?</span></p><p>In any case, this last scenario gives you a hint 🔍 as to where I’m going: how did I even notice this last problem? After all, my M1 Mac was working just fine: it was just slightly warmer than usual but there was no loud fan noise nor lights to tell me about disk activity.</p><p>The answer is simple: I have an omnipresent performance monitor in my screen that shows CPU load, memory pressure, disk I/O throughput, and network traffic. This monitor is always visible, taking little space in the menu bar or the task bar.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png" width="646" height="1266" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1266,&#34;width&#34;:646,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:387258,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7ba9b823-6f31-4f90-ac66-7adbd3d51902_646x1266.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>iStat Menus on the macOS menu bar, with the panel for CPU usage tracking open.</figcaption></figure></div><p>Every time I sense something is a tiny bit off, I glance 👀 at the monitor. You cannot imagine how many times I’ve gone “huh, that’s interesting” by seeing unexpected activity and then went on to discover big performance problems somewhere in the system.</p><p><span>My recommendation is that you stop what you are doing and go and install such a performance monitor </span><em>right now</em><span>. I’d even argue that having one always visible should be a hard requirement for any development machine and corp IT departments should preinstall one.</span></p><p><span>Personally, I’m a huge fan of </span><a href="https://bjango.com/mac/istatmenus/" rel="">iStat Menus</a><span> for macOS and have been using it for years. But if macOS is not your thing, you can find similar tools for other platforms like </span><a href="https://extensions.gnome.org/extension/3010/system-monitor-next/" rel="">system-monitor-next</a><span> for Gnome.</span></p><p>Unfortunately, these monitors only help if you develop on your local machine—a workflow that’s becoming exceedingly rare. If, instead, you SSH into remote virtual machines to do your development or use VSCode’s remote features, you’ll need a different answer.</p><p>This is a situation I face right now. The modern ThinkStation I have in the garage is well-equipped with useful lights… but I only access it over SSH for development so those lights and its disk noises are kinda useless from where I sit.</p><p><span>And I’m not sure what the right answer here is. If you have been around for a while, you may remember </span><a href="http://gkrellm.srcbox.net" rel="">GKrellM</a><span>, which I was an avid user of. This system monitor had the ability to display </span><em>remote</em><span> machine activity and I’d love to have that again.</span></p><p><span>(</span><a href="https://twitter.com/jmmv/status/1735712759604711494" rel="">You can read the original of this text in its Twitter thread form.</a><span>)</span></p></div></div></div></article></div></div></div>
  </body>
</html>
