<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rudransh61/Physix-go">Original</a>
    <h1>Particle Based Physics Engine in Golang</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto">
	<div dir="auto"><h2 tabindex="-1" dir="auto">A Simple Physics Engine in GoLang ☻</h2><a id="user-content-a-simple-physics-engine-in-golang-" aria-label="Permalink: A Simple Physics Engine in GoLang ☻" href="#a-simple-physics-engine-in-golang-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
  <p><a target="_blank" rel="noopener noreferrer" href="https://solar.lowtechmagazine.com/rudransh61/Physix-go/blob/master/Phi%206.png"><img src="https://solar.lowtechmagazine.com/rudransh61/Physix-go/raw/master/Phi%206.png" width="300"/></a>
</p></div>


<p dir="auto">Physix.go is a simple, easy-to-use, and fast physics engine written in GoLang. It provides functions to perform physics calculations efficiently, including particle-based physics simulations.</p>

<ul dir="auto">
<li>Vector Calculations</li>
<li>Physics Calculations</li>
<li>Spring Dynamics</li>
<li>Easy to use with <a href="https://ebitengine.org/" rel="nofollow">Ebiten.go</a></li>
</ul>


<ul dir="auto">
<li>GoLang must be installed.</li>
<li><a href="https://ebiten.org" rel="nofollow">Ebiten</a> must be installed.</li>
</ul>

<p dir="auto">To start, clone this project:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/rudransh61/Physix.go"><pre>git clone https://github.com/rudransh61/Physix.go</pre></div>
<p dir="auto">Or install it using <code>go get</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="go get github.com/rudransh61/Physix.go"><pre>go get github.com/rudransh61/Physix.go</pre></div>
<p dir="auto">Then run the example files from the <code>./examples</code> folder. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="go run ./examples/ex4.go # which is a simple circular motion"><pre>go run ./examples/ex4.go <span><span>#</span> which is a simple circular motion</span></pre></div>


<p dir="auto">Vectors are a datatype to store vectors. Import the following file to use vectors:</p>
<div dir="auto" data-snippet-clipboard-copy-content="package main 

import (
  //...other imports
  &#34;github.com/rudransh61/Physix-go/pkg/vector&#34;
)"><pre><span>package</span> main 

<span>import</span> (
  <span>//...other imports</span>
  <span>&#34;github.com/rudransh61/Physix-go/pkg/vector&#34;</span>
)</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="var MyVector = vector.Vector{X: 30, Y: 20}
// X is the x component and Y is the y component of the Vector"><pre><span>var</span> <span>MyVector</span> <span>=</span> vector.<span>Vector</span>{<span>X</span>: <span>30</span>, <span>Y</span>: <span>20</span>}
<span>// X is the x component and Y is the y component of the Vector</span></pre></div>
<p dir="auto">Using Function</p>
<div dir="auto" data-snippet-clipboard-copy-content="var NewVec = vector.NewVector(x, y)"><pre><span>var</span> <span>NewVec</span> <span>=</span> <span>vector</span>.<span>NewVector</span>(<span>x</span>, <span>y</span>)</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="var NewVector = Vec1.Add(Vec2)"><pre><span>var</span> <span>NewVector</span> <span>=</span> <span>Vec1</span>.<span>Add</span>(<span>Vec2</span>)</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="var NewVector = Vec1.Sub(Vec2)"><pre><span>var</span> <span>NewVector</span> <span>=</span> <span>Vec1</span>.<span>Sub</span>(<span>Vec2</span>)</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">Inner Product of 2 Vectors</h5><a id="user-content-inner-product-of-2-vectors" aria-label="Permalink: Inner Product of 2 Vectors" href="#inner-product-of-2-vectors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="var DotProduct = Vec1.InnerProduct(Vec2)"><pre><span>var</span> <span>DotProduct</span> <span>=</span> <span>Vec1</span>.<span>InnerProduct</span>(<span>Vec2</span>)</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">Scale a Vector by a scalar</h5><a id="user-content-scale-a-vector-by-a-scalar" aria-label="Permalink: Scale a Vector by a scalar" href="#scale-a-vector-by-a-scalar"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="var ScaledVector = Vec1.Scale(num)"><pre><span>var</span> <span>ScaledVector</span> <span>=</span> <span>Vec1</span>.<span>Scale</span>(<span>num</span>)</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="var Magnitude = Vec1.Magnitude()"><pre><span>var</span> <span>Magnitude</span> <span>=</span> <span>Vec1</span>.<span>Magnitude</span>()</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="var NormalizeVector = Vec1.Normalize()"><pre><span>var</span> <span>NormalizeVector</span> <span>=</span> <span>Vec1</span>.<span>Normalize</span>()</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">Distance between Heads of 2 Vectors</h5><a id="user-content-distance-between-heads-of-2-vectors" aria-label="Permalink: Distance between Heads of 2 Vectors" href="#distance-between-heads-of-2-vectors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="var distance = vector.Distance(Vec1, Vec2)"><pre><span>var</span> <span>distance</span> <span>=</span> <span>vector</span>.<span>Distance</span>(<span>Vec1</span>, <span>Vec2</span>)</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">Perpendicular Vector of a given Vector</h5><a id="user-content-perpendicular-vector-of-a-given-vector" aria-label="Permalink: Perpendicular Vector of a given Vector" href="#perpendicular-vector-of-a-given-vector"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="var Orthogonal_Vector = vector.Orthogonal(Vec1)"><pre><span>var</span> <span>Orthogonal_Vector</span> <span>=</span> <span>vector</span>.<span>Orthogonal</span>(<span>Vec1</span>)</pre></div>

<p dir="auto">To create an instance of RigidBody, you need to provide all the required fields. First, import these files:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import (
  &#34;github.com/rudransh61/Physix-go/dynamics/physics&#34;
  &#34;github.com/rudransh61/Physix-go/pkg/rigidbody&#34;
)"><pre><span>import</span> (
  <span>&#34;github.com/rudransh61/Physix-go/dynamics/physics&#34;</span>
  <span>&#34;github.com/rudransh61/Physix-go/pkg/rigidbody&#34;</span>
)</pre></div>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="ball = &amp;rigidbody.RigidBody{
	Position:  vector.Vector{X: 400, Y: 100},
	Velocity:  vector.Vector{X: 0, Y: 2},
	Mass:      1,
	Force:     vector.Vector{X: 0, Y: 5},
	IsMovable: true,
	Shape:     &#34;Circle&#34;, // Example shape
	Radius:    10,       // Required for Circle
}"><pre><span>ball</span> <span>=</span> <span>&amp;</span>rigidbody.<span>RigidBody</span>{
	<span>Position</span>:  vector.<span>Vector</span>{<span>X</span>: <span>400</span>, <span>Y</span>: <span>100</span>},
	<span>Velocity</span>:  vector.<span>Vector</span>{<span>X</span>: <span>0</span>, <span>Y</span>: <span>2</span>},
	<span>Mass</span>:      <span>1</span>,
	<span>Force</span>:     vector.<span>Vector</span>{<span>X</span>: <span>0</span>, <span>Y</span>: <span>5</span>},
	<span>IsMovable</span>: <span>true</span>,
	<span>Shape</span>:     <span>&#34;Circle&#34;</span>, <span>// Example shape</span>
	<span>Radius</span>:    <span>10</span>,       <span>// Required for Circle</span>
}</pre></div>
<p dir="auto">To update the position of a RigidBody, use <strong>ApplyForce</strong> in a loop:</p>
<div dir="auto" data-snippet-clipboard-copy-content="for i := 0; i &lt; 100; i++ {
    physix.ApplyForce(ball, vector.Vector{X: 10, Y: 0}, dt) // Apply force
    // .. other code
}"><pre><span>for</span> <span>i</span> <span>:=</span> <span>0</span>; <span>i</span> <span>&lt;</span> <span>100</span>; <span>i</span><span>++</span> {
    <span>physix</span>.<span>ApplyForce</span>(<span>ball</span>, vector.<span>Vector</span>{<span>X</span>: <span>10</span>, <span>Y</span>: <span>0</span>}, <span>dt</span>) <span>// Apply force</span>
    <span>// .. other code</span>
}</pre></div>
<p dir="auto">To access or change the <strong>Force</strong>, <strong>Velocity</strong>, <strong>Position</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="ball.Velocity // Get the velocity of the ball as a vector.Vector
ball.Position.X += 5 // Increase the position of the ball in X direction by 5"><pre><span>ball</span>.<span>Velocity</span> <span>// Get the velocity of the ball as a vector.Vector</span>
<span>ball</span>.<span>Position</span>.<span>X</span> <span>+=</span> <span>5</span> <span>// Increase the position of the ball in X direction by 5</span></pre></div>

<p dir="auto">There are two types of collision systems for different shapes:</p>
<ul dir="auto">
<li>Rectangle-Rectangle collision</li>
<li>Circle-Circle collision</li>
</ul>

<p dir="auto">For example, you have two Rectangles:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rect1 = &amp;rigidbody.RigidBody{
	Position: vector.Vector{X: 100, Y: 200},
	Velocity: vector.Vector{X: 50, Y: -50},
	Mass:     1.0,
	Shape:    &#34;Rectangle&#34;,
	Width:    100,
	Height:   90,
	IsMovable: true,
}
rect2 = &amp;rigidbody.RigidBody{
	Position: vector.Vector{X: 400, Y: 300},
	Velocity: vector.Vector{X: 60, Y: 50},
	Mass:     2.0,
	Shape:    &#34;Rectangle&#34;,
	Width:    70,
	Height:   70,
	IsMovable: true,
}"><pre><span>rect1</span> <span>=</span> <span>&amp;</span>rigidbody.<span>RigidBody</span>{
	<span>Position</span>: vector.<span>Vector</span>{<span>X</span>: <span>100</span>, <span>Y</span>: <span>200</span>},
	<span>Velocity</span>: vector.<span>Vector</span>{<span>X</span>: <span>50</span>, <span>Y</span>: <span>-</span><span>50</span>},
	<span>Mass</span>:     <span>1.0</span>,
	<span>Shape</span>:    <span>&#34;Rectangle&#34;</span>,
	<span>Width</span>:    <span>100</span>,
	<span>Height</span>:   <span>90</span>,
	<span>IsMovable</span>: <span>true</span>,
}
<span>rect2</span> <span>=</span> <span>&amp;</span>rigidbody.<span>RigidBody</span>{
	<span>Position</span>: vector.<span>Vector</span>{<span>X</span>: <span>400</span>, <span>Y</span>: <span>300</span>},
	<span>Velocity</span>: vector.<span>Vector</span>{<span>X</span>: <span>60</span>, <span>Y</span>: <span>50</span>},
	<span>Mass</span>:     <span>2.0</span>,
	<span>Shape</span>:    <span>&#34;Rectangle&#34;</span>,
	<span>Width</span>:    <span>70</span>,
	<span>Height</span>:   <span>70</span>,
	<span>IsMovable</span>: <span>true</span>,
}</pre></div>
<p dir="auto">Now you want to detect collision between them:</p>
<div dir="auto" data-snippet-clipboard-copy-content="if collision.RectangleCollided(rect1, rect2) {
	fmt.Println(&#34;Collided!&#34;)
}"><pre><span>if</span> <span>collision</span>.<span>RectangleCollided</span>(<span>rect1</span>, <span>rect2</span>) {
	<span>fmt</span>.<span>Println</span>(<span>&#34;Collided!&#34;</span>)
}</pre></div>
<p dir="auto">And if you want to add a bounce effect in this collision according to the <strong>Momentum Conservation</strong> and <strong>Energy Conservation</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="if collision.RectangleCollided(rect1, rect2) {
	float64 e = 0.9999999999; // e is the coefficient of restitution in collision
	collision.BounceOnCollision(rect1, rect2, e) // NOTE: e&lt;1 is a bit glitchy and goes wild, use it at your own risk :)
}"><pre><span>if</span> <span>collision</span>.<span>RectangleCollided</span>(<span>rect1</span>, <span>rect2</span>) {
	<span>float64</span> <span>e</span> <span>=</span> <span>0.9999999999</span>; <span>// e is the coefficient of restitution in collision</span>
	<span>collision</span>.<span>BounceOnCollision</span>(<span>rect1</span>, <span>rect2</span>, <span>e</span>) <span>// NOTE: e&lt;1 is a bit glitchy and goes wild, use it at your own risk :)</span>
}</pre></div>

<p dir="auto">Now if you want to detect collisions between a circle and a circle:</p>
<div dir="auto" data-snippet-clipboard-copy-content="if collision.CircleCollided(rect1, rect2) {
	fmt.Println(&#34;Collided!&#34;)
}"><pre><span>if</span> <span>collision</span>.<span>CircleCollided</span>(<span>rect1</span>, <span>rect2</span>) {
	<span>fmt</span>.<span>Println</span>(<span>&#34;Collided!&#34;</span>)
}</pre></div>
<p dir="auto">And use the same <code>BounceOnCollision</code> function for bouncing.</p>

<p dir="auto">Springs can be used to simulate elastic connections between rigid bodies. To create a spring, you need to define two rigid bodies and specify the spring&#39;s stiffness and damping properties.</p>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="spring := spring.NewSpring(ballA, ballB, stiffness, damping)"><pre><span>spring</span> <span>:=</span> <span>spring</span>.<span>NewSpring</span>(<span>ballA</span>, <span>ballB</span>, <span>stiffness</span>, <span>damping</span>)</pre></div>
<p dir="auto">To apply the spring force in your simulation loop:</p>

<p dir="auto">This will apply the forces based on Hooke&#39;s Law and damping to the connected rigid bodies.</p>

<p dir="auto">Check examples in the <code>./examples</code> folder.</p>


<p dir="auto">To update our <strong>entity</strong>, we have two functions: <strong>ApplyForce</strong> and <strong>ApplyForcePolygon</strong>, as the name suggests, one is for RigidBody and one for polygons.</p>
<p dir="auto">This function will move one frame forward or &#39;dt&#39; time forward (which is the time between two frames).</p>
<p dir="auto"><strong>NOTE:</strong> Define <code>dt</code> (0.1 mostly) at the top globally for good code.</p>
<div dir="auto" data-snippet-clipboard-copy-content="ball = &amp;rigidbody.RigidBody{
	Position: vector.Vector{X: 400, Y: 100},
	Velocity: vector.Vector{X: 0, Y: 2},
	Mass:     1,
	Force:    vector.Vector{X: 0, Y: 5},
	IsMovable: true,
}

physix.ApplyForce(ball, vector.Vector{X: 10, Y: 0}, dt) // To apply force on the rigid body"><pre><span>ball</span> <span>=</span> <span>&amp;</span>rigidbody.<span>RigidBody</span>{
	<span>Position</span>: vector.<span>Vector</span>{<span>X</span>: <span>400</span>, <span>Y</span>: <span>100</span>},
	<span>Velocity</span>: vector.<span>Vector</span>{<span>X</span>: <span>0</span>, <span>Y</span>: <span>2</span>},
	<span>Mass</span>:     <span>1</span>,
	<span>Force</span>:    vector.<span>Vector</span>{<span>X</span>: <span>0</span>, <span>Y</span>: <span>5</span>},
	<span>IsMovable</span>: <span>true</span>,
}

<span>physix</span>.<span>ApplyForce</span>(<span>ball</span>, vector.<span>Vector</span>{<span>X</span>: <span>10</span>, <span>Y</span>: <span>0</span>}, <span>dt</span>) <span>// To apply force on the rigid body</span></pre></div>
<p dir="auto">To get both utilities in the code, import this file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import (
	...
	&#34;github.com/rudransh61/Physix-go/dynamics/physics&#34;
	...
)"><pre><span>import</span> (
	<span>...</span>
	<span>&#34;github.com/rudransh61/Physix-go/dynamics/physics&#34;</span>
	<span>...</span>
)</pre></div>

<p dir="auto">New contributors are welcome! If you have any doubts related to its working, you can ask us by opening an issue.</p>

<p dir="auto">See <code>LICENSE.md</code> file.</p>

<p dir="auto">Inspired by <a href="https://www.youtube.com/channel/UCvjgXvBlbQiydffZU7m1_aw" rel="nofollow">Coding Train - Daniel Shiffman</a></p>
</article></div></div>
  </body>
</html>
