<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://meta.wikimedia.org/wiki/Wikimedia_DNS">Original</a>
    <h1>Wikimedia DNS</h1>
    
    <div id="readability-page-1" class="page"><div id="mw-content-text" lang="en" dir="ltr"><div><table><tbody><tr><th scope="row">Hostname</th><td><code>wikimedia-dns.org</code></td></tr><tr><th scope="row">IP address</th><td><code>185.71.138.138</code></td></tr><tr><th scope="row">Supported protocols</th><td><a href="https://en.wikipedia.org/wiki/DNS_over_HTTPS" title="en:DNS over HTTPS">DoH</a> and <a href="https://en.wikipedia.org/wiki/DNS_over_TLS" title="en:DNS over TLS">DoT</a></td></tr></tbody></table>
<p><i>This is currently a small-scale beta project.</i>
</p>

<p><b>Wikimedia DNS</b> (formerly called <b>Wikidough</b>), is a caching, recursive, public <a href="https://en.wikipedia.org/wiki/DNS_over_HTTPS" title="en:DNS over HTTPS">DNS-over-HTTPS (DoH)</a> and <a href="https://en.wikipedia.org/wiki/DNS_over_TLS" title="en:DNS over TLS">DNS-over-TLS (DoT)</a> resolver service that is run and managed by the Site Reliability Engineering (Traffic) team at the Foundation. Wikimedia DNS helps prevent some surveillance and censorship of our wikis and other websites by securing DNS lookups.
</p><p>This document outlines what the service is about, why the SRE/Traffic team is working on it, and what benefits it provides for the Wikimedia community. We welcome any discussions about this project on the talk page.
</p>



<h3><span id="What_is_DNS.3F"></span><span id="What_is_DNS?" data-mw-thread-id="h-What_is_DNS?-Introduction_to_DNS"><span data-mw-comment-start="" id="h-What_is_DNS?-Introduction_to_DNS"></span>What is DNS?<span data-mw-comment-end="h-What_is_DNS?-Introduction_to_DNS"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=2" title="Edit section: What is DNS?">edit</a><span>]</span></span></h3>
<p>The <a href="https://en.wikipedia.org/wiki/Domain_Name_System" title="en:Domain Name System">Domain Name System</a> (DNS) is the phonebook of the internet. It provides a lookup of domain names (such as wikipedia.org) to their IP addresses (<code>208.80.154.224</code>). Whenever you visit a resource on the internet like a website, a DNS resolver — typically run by your Internet Service Provider (ISP) — resolves the domain to an IP address and is the first step in the creation of a connection to a website; without the IP address you won&#39;t be able to find the right website. This process happens in the background and because of the way the internet works, most people automatically connect to their ISP&#39;s DNS resolver to perform these DNS queries. 
</p><p>DNS is a critical part of the internet and DNS lookups happen irrespective of which resource you want to access or where you access it from (mobile or phone).
</p>
<h3><span id="DNS-based_surveillance_and_censorship" data-mw-thread-id="h-DNS-based_surveillance_and_censorship-Introduction_to_DNS"><span data-mw-comment-start="" id="h-DNS-based_surveillance_and_censorship-Introduction_to_DNS"></span>DNS-based surveillance and censorship<span data-mw-comment-end="h-DNS-based_surveillance_and_censorship-Introduction_to_DNS"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=3" title="Edit section: DNS-based surveillance and censorship">edit</a><span>]</span></span></h3>
<p>Even though DNS has been around for decades, a DNS query (<i>what is the IP address of wikipedia.org?</i>) and the response (<i>the IP address is 208.80.154.224</i>) are not encrypted. This is a significant privacy and security risk. An on-path observer — such as your coffee shop, ISP, or your government — can observe your DNS queries/responses and build a list of the resources you access on the internet, and perhaps worse, censor you by preventing access to content they deem unacceptable.
</p><p>Since we are primarily concerned with censorship in the context of the movement, Wikipedia and other Wikimedia projects have been censored through DNS and this has been observed in <a rel="nofollow" href="https://explorer.ooni.org">various countries</a> where we are active. DNS censorship is easy to implement, scales effectively, and also since DNS is the first step in the connection to a remote resource, most ISPs and governments use DNS censorship to prevent people from accessing content on the internet. 
</p><p>As an example, censoring queries for <i>*.wikipedia.org</i> to prevent people from accessing any language edition of Wikipedia is trivial to implement in most DNS resolver software and is a one-line change.
</p>
<h3><span id="DNS_encryption" data-mw-thread-id="h-DNS_encryption-Introduction_to_DNS"><span data-mw-comment-start="" id="h-DNS_encryption-Introduction_to_DNS"></span>DNS encryption<span data-mw-comment-end="h-DNS_encryption-Introduction_to_DNS"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=4" title="Edit section: DNS encryption">edit</a><span>]</span></span></h3>
<p>To solve the problem of surveillance and censorship of DNS, various DNS encryption protocols have been proposed over the years. Due to various reasons including a lack of a standard, adaptability, implementation, none of the proposed protocols have seen mass adoption until DNS-over-HTTPS was <a rel="nofollow" href="https://datatracker.ietf.org/doc/html/rfc8484">proposed and standardized</a> in 2018. The Mozilla Firefox browser helped push adoption of DoH by enabling it by <a rel="nofollow" href="https://blog.mozilla.org/en/products/firefox/firefox-continues-push-to-bring-dns-over-https-by-default-for-us-users/">default for US users in 2020</a> and has since rolled this out to other countries as well.
</p>
<h3><span id="DoH_and_DoT" data-mw-thread-id="h-DoH_and_DoT-Introduction_to_DNS"><span data-mw-comment-start="" id="h-DoH_and_DoT-Introduction_to_DNS"></span>DoH and DoT<span data-mw-comment-end="h-DoH_and_DoT-Introduction_to_DNS"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=5" title="Edit section: DoH and DoT">edit</a><span>]</span></span></h3>
<p><a href="https://en.wikipedia.org/wiki/DNS_over_HTTPS" title="en:DNS over HTTPS">DNS-over-HTTPS</a>, also called DoH, encrypts DNS by sending queries and getting responses over HTTPS, thus preventing censorship and surveillance: because an on-path observer can no longer see the queries or the responses, they cannot censor it or build a profile of the data. DoH works by sending DNS queries over a secure HTTPS channel.
</p><p><a href="https://en.wikipedia.org/wiki/DNS_over_TLS" title="en:DNS over TLS">DNS-over-TLS</a>, also called DoT, is a related DNS encryption protocol offering encryption over just TLS. It hasn&#39;t seen the same rate of adoption DNS-over-HTTPS has seen for various reasons that we will discuss later. Nevertheless, we consider both of these protocols related for the purpose of this discussion and the Wikimedia DNS service, even though there are differences between them at the protocol level.
</p><p>To use this new DNS encryption technology, you need a DoH- or DoT-enabled client and a resolver.
</p>

<p>Wikimedia DNS is a public DNS-over-HTTPS and DNS-over-TLS resolver service. For users who wish to secure their DNS lookups to prevent surveillance or to circumvent DNS-based censorship, Wikimedia DNS helps protect your DNS queries/responses by providing encryption of the same. For a user securing their DNS lookups via Wikimedia DNS, all that an on-path observer or a censor can see is a connection to the Wikimedia DNS service but not the content of the DNS queries or responses.
</p>
<h3><span id="History_of_Wikimedia_DNS" data-mw-thread-id="h-History_of_Wikimedia_DNS-Wikimedia_DNS"><span data-mw-comment-start="" id="h-History_of_Wikimedia_DNS-Wikimedia_DNS"></span>History of Wikimedia DNS<span data-mw-comment-end="h-History_of_Wikimedia_DNS-Wikimedia_DNS"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=7" title="Edit section: History of Wikimedia DNS">edit</a><span>]</span></span></h3>
<p>The SRE/Traffic team in the Wikimedia Foundation is tasked with running the Wikimedia proxy servers and data centers. We are also interested in understanding where and how our websites are censored on a technical level. Note that HTTPS makes it impossible for censors to block access to specific articles, thus forcing them to choose between blocking nothing or the entire website. We are not concerned with censorship of the content of the articles — even though that&#39;s related — but rather the website/ecosystem as a whole.
</p><p>In studying and researching censorship of Foundation websites, we discovered that the most common form of this censorship was through filtering the DNS. The idea of running a secure, encrypted DNS service thus stemmed from those observations. The annual plan for FY 2022-23, under its <a href="https://meta.wikimedia.org/wiki/Wikimedia_Foundation_Annual_Plan/2023-2024/Goals/Safety_%26_Inclusion#Disinformation" title="metawiki:Wikimedia Foundation Annual Plan/2023-2024/Goals/Safety &amp; Inclusion">goal for Safety and Inclusion</a>, talks about &#34;Implement technical improvements to strengthen security and privacy of volunteers on-wiki, protect against surveillance, and enhance the communities&#39; ability to effectively govern themselves and address disinformation and human rights risks.&#34; You can follow the task on <a href="https://phabricator.wikimedia.org/T252132" title="phab:T252132">Phabricator</a>.
</p>

<h3><span id="Why_is_Wikimedia_running_this_service.3F"></span><span id="Why_is_Wikimedia_running_this_service?" data-mw-thread-id="h-Why_is_Wikimedia_running_this_service?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Why_is_Wikimedia_running_this_service?-Wikimedia_DNS_FAQ"></span>Why is Wikimedia running this service?<span data-mw-comment-end="h-Why_is_Wikimedia_running_this_service?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=9" title="Edit section: Why is Wikimedia running this service?">edit</a><span>]</span></span></h3>
<p>We cannot recommend external resolver services such as those run by Google, Cloudflare, Quad9, among others, for a variety of reasons. We have no control over how these services are run or what private data is logged. Even though most of these services have explicit privacy policies, they do log some data and we have no control or insight into that. 
</p><p>Furthermore, some of these services use content filtering. Cloudflare&#39;s DNS service for families was <a rel="nofollow" href="https://blog.cloudflare.com/the-mistake-that-caused-1-1-1-3-to-block-lgbtqia-sites-today/">caught blocking LGBTQ content</a> (and then <a rel="nofollow" href="https://gizmodo.com/cloudflare-says-it-never-meant-to-block-lgbtq-sites-1846940317">did it again</a>). Other services indulge in various forms of <a rel="nofollow" href="https://www.quad9.net/service/threat-blocking/">content filtering</a> as well.
</p><p>The SRE team is well poised to run such a service and can provide a reliable alternative to secure DNS resolver services run by for-profit corporations.
</p>
<h3><span id="Does_this_project_solve_all_internet_censorship_issues.3F"></span><span id="Does_this_project_solve_all_internet_censorship_issues?" data-mw-thread-id="h-Does_this_project_solve_all_internet_censorship_issues?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Does_this_project_solve_all_internet_censorship_issues?-Wikimedia_DNS_FAQ"></span>Does this project solve all internet censorship issues?<span data-mw-comment-end="h-Does_this_project_solve_all_internet_censorship_issues?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=10" title="Edit section: Does this project solve all internet censorship issues?">edit</a><span>]</span></span></h3>
<p>No. While DNS protocols such as DoH and DoT encrypt DNS queries between your client (like Firefox) and a resolver (Wikimedia DNS), an on-path observer (such as your ISP/government) can still identify which websites you are connecting to through the SNI field in the ClientHello message (currently unencrypted) or the IP address of the website. Nevertheless, given that DNS-based censorship and surveillance is often the easiest to implement, securing your DNS is a good first step towards improving your privacy and resisting censorship.
</p><p>The <a rel="nofollow" href="https://datatracker.ietf.org/doc/draft-ietf-tls-esni/">Encrypted Client Hello extension</a> (ECH; formerly called Encrypted SNI) to TLSv1.3 encrypts the SNI field and because of how it works, ECH requires encrypted DNS to be effective. Coupled together and once properly deployed, these two technologies will help address long-standing issues with privacy of users on the internet. While this doesn&#39;t solve all our issues, we also need encrypted DNS for future work against surveillance and censorship to be effective.
</p>
<h3><span id="Can.27t_a_censor_just_block_this_as_well.3F"></span><span id="Can&#39;t_a_censor_just_block_this_as_well?" data-mw-thread-id="h-Can&#39;t_a_censor_just_block_this_as_well?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Can&#39;t_a_censor_just_block_this_as_well?-Wikimedia_DNS_FAQ"></span>Can&#39;t a censor just block this as well?<span data-mw-comment-end="h-Can&#39;t_a_censor_just_block_this_as_well?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=11" title="Edit section: Can&#39;t a censor just block this as well?">edit</a><span>]</span></span></h3>
<p>Yes, a censor can just block Wikimedia DNS. But we believe that coupling encrypted DNS with Encrypted Client Hello (that depends on encrypted DNS) is going to make the blocking of websites more difficult, thus helping minimize the possibility of blocking Wikimedia DNS because censors will no longer be able to see the SNI for it. Additionally, most censors don&#39;t typically block DNS resolvers, as observed by the prevalence and usage of <code>1.1.1.1</code> and <code>8.8.8.8</code>.
</p><p>Wikimedia DNS is not a complete solution to all censorship issues. It is just one part of our strategy in fighting against censorship and while it might not help protect all users everywhere, it will help secure DNS lookups for the vast majority of them and help lay the foundation for upcoming protocols.
</p>
<h3><span id="Can_you_explain_the_ECH_and_Client_Hello_part_a_bit_more.3F"></span><span id="Can_you_explain_the_ECH_and_Client_Hello_part_a_bit_more?" data-mw-thread-id="h-Can_you_explain_the_ECH_and_Client_Hello_part_a_bit_more?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Can_you_explain_the_ECH_and_Client_Hello_part_a_bit_more?-Wikimedia_DNS_FAQ"></span>Can you explain the ECH and Client Hello part a bit more?<span data-mw-comment-end="h-Can_you_explain_the_ECH_and_Client_Hello_part_a_bit_more?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=12" title="Edit section: Can you explain the ECH and Client Hello part a bit more?">edit</a><span>]</span></span></h3>
<p>Let&#39;s assume you want to connect to <i>en.wikipedia.org</i>. The first step is the DNS resolution, so a DNS resolver will give you back the IP address of en.wiki for you to create a connection to it. The next stage in that process is that when you want to connect to the IP address, you have to specify the <i><a href="https://en.wikipedia.org/wiki/Server_Name_Indication" title="en:Server Name Indication">server name indication</a></i> or the SNI as well, which in this case is <i>en.wikipedia.org</i>. This SNI field, like DNS, has been unencrypted so far and a censor that has the capabilities to inspect your traffic can see that you are connecting to en.wiki and prevent you from making that connection. 
</p><p>SNI-based censorship is the most common form of restricting access to websites (not just ours) after DNS, the difference being that it requires more resources in the form of specialized blocking equipment that does deep-packet inspection on the traffic so not every censor is motivated to pursue it or has the equipment to be able to do so.
</p><p>Encrypted Client Hello (formerly called Encrypted Server Name Indication or ESNI), encrypts this SNI field, thus preventing a censor from blocking traffic based on the SNI field. ECH depends on encrypted DNS to be effective as the key distribution for ECH happens over DNS HTTPS resource records. In the absence of encrypted DNS, a censor could simply filter or poison the DNS result, making ECH ineffective. The Firefox browser for example will <a rel="nofollow" href="https://groups.google.com/a/mozilla.org/g/dev-platform/c/uv7PNrHUagA/m/BNA4G8fOAAAJ">not enable ECH if encrypted DNS is also not enabled</a>.
</p><p>Thus the work on Wikimedia DNS not only secures DNS but also lays the foundation for future implementations of internet security protocols such as ECH.
</p>
<h3><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=13" title="Edit section: Do I need to install some extra software to use this?">edit</a><span>]</span></span></h3>
<p>All major desktop and mobile operating systems and browsers support either DoH or DoT in 2023. Users will need to point their browser/OS to Wikimedia DNS but no extra software is required. 
</p><p>There are no discovery mechanisms for DoH and DoT yet, so the configuration is still manual; the hostname or IP address of the service is all that is required for someone to use the service.
</p><p>If you don&#39;t want to use Wikimedia DNS nothing will change for you.
</p>
<h3><span id="What_do_I_need_to_use_this.3F"></span><span id="What_do_I_need_to_use_this?" data-mw-thread-id="h-What_do_I_need_to_use_this?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-What_do_I_need_to_use_this?-Wikimedia_DNS_FAQ"></span>What do I need to use this?<span data-mw-comment-end="h-What_do_I_need_to_use_this?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=14" title="Edit section: What do I need to use this?">edit</a><span>]</span></span></h3>
<ol><li>A client that supports DoH or DoT. You can <a href="https://en.wikipedia.org/wiki/DNS_over_HTTPS#Software_support" title="en:DNS over HTTPS">find a list here</a>.</li>
<li>The URL of the service (<code><a rel="nofollow" href="https://wikimedia-dns.org/dns-query">https://wikimedia-dns.org/dns-query</a></code>) or the IP address (<code>185.71.138.138</code>).</li></ol>
<h3><span id="Is_this_a_VPN.3F"></span><span id="Is_this_a_VPN?" data-mw-thread-id="h-Is_this_a_VPN?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Is_this_a_VPN?-Wikimedia_DNS_FAQ"></span>Is this a VPN?<span data-mw-comment-end="h-Is_this_a_VPN?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=15" title="Edit section: Is this a VPN?">edit</a><span>]</span></span></h3>
<p>No. Using Wikimedia DNS does not relay the contents of the communication and does not change the IP address of a user. It only secures the metadata, which in this case is the DNS lookup.
</p>
<h3><span id="Why_not_run_a_VPN_service_instead.3F"></span><span id="Why_not_run_a_VPN_service_instead?" data-mw-thread-id="h-Why_not_run_a_VPN_service_instead?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Why_not_run_a_VPN_service_instead?-Wikimedia_DNS_FAQ"></span>Why not run a VPN service instead?<span data-mw-comment-end="h-Why_not_run_a_VPN_service_instead?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=16" title="Edit section: Why not run a VPN service instead?">edit</a><span>]</span></span></h3>
<p>Running a VPN service requires a lot more resources and carries with a lot more liability, as we would be relaying the contents of the transmission as well, not just the metadata.
</p><p>There are also usability and accessibility issues with VPNs. Those who know what VPNs are and can configure them will use them whereas most other users won&#39;t be able to do that. Thus if we are offering a censorship circumvention tool, it should work for everyone and while we are not there with DoH or DoT yet, those protocols are more standardized and easier to use than setting up and running a VPN client.
</p>
<h3><span id="Will_this_affect_IP_masking_or_any_other_vandalism-fighting_tools.3F"></span><span id="Will_this_affect_IP_masking_or_any_other_vandalism-fighting_tools?" data-mw-thread-id="h-Will_this_affect_IP_masking_or_any_other_vandalism-fighting_tools?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Will_this_affect_IP_masking_or_any_other_vandalism-fighting_tools?-Wikimedia_DNS_FAQ"></span>Will this affect IP masking or any other vandalism-fighting tools?<span data-mw-comment-end="h-Will_this_affect_IP_masking_or_any_other_vandalism-fighting_tools?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=17" title="Edit section: Will this affect IP masking or any other vandalism-fighting tools?">edit</a><span>]</span></span></h3>
<p>No. Wikimedia DNS does not affect those in any way. Checkusers, stewards and others will still have access to the same information about editors if they use Wikimedia DNS as if they are not.
</p>
<h3><span id="Does_this_require_a_username.2Fpassword_or_some_other_form_of_authentication.3F"></span><span id="Does_this_require_a_username/password_or_some_other_form_of_authentication?" data-mw-thread-id="h-Does_this_require_a_username/password_or_some_other_form_of_authentication?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Does_this_require_a_username/password_or_some_other_form_of_authentication?-Wikimedia_DNS_FAQ"></span>Does this require a username/password or some other form of authentication?<span data-mw-comment-end="h-Does_this_require_a_username/password_or_some_other_form_of_authentication?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=18" title="Edit section: Does this require a username/password or some other form of authentication?">edit</a><span>]</span></span></h3>
<p>No, just the hostname or the IP address. This is a public service and can be used by anyone.
</p>
<h3><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=19" title="Edit section: Can this be restricted to just the Wikimedia community?">edit</a><span>]</span></span></h3>
<p>No. We have no technical way of restricting access to the service. Anyone with the hostname/IP address can use it.
</p>
<h3><span id="Does_this_enable_bad_actors_on_the_internet_to_secure_their_DNS_lookups.3F"></span><span id="Does_this_enable_bad_actors_on_the_internet_to_secure_their_DNS_lookups?" data-mw-thread-id="h-Does_this_enable_bad_actors_on_the_internet_to_secure_their_DNS_lookups?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-Does_this_enable_bad_actors_on_the_internet_to_secure_their_DNS_lookups?-Wikimedia_DNS_FAQ"></span>Does this enable bad actors on the internet to secure their DNS lookups?<span data-mw-comment-end="h-Does_this_enable_bad_actors_on_the_internet_to_secure_their_DNS_lookups?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=20" title="Edit section: Does this enable bad actors on the internet to secure their DNS lookups?">edit</a><span>]</span></span></h3>
<p>Yes, Wikimedia DNS, just like another DNS service (and even the one run by your ISP), can allow bad actors to perform DNS resolution and to secure their DNS lookups. Note that Wikimedia DNS just provides the metadata for the communication (the <i>phone number</i>) but it is not involved in the actual communication itself (the <i>phone call</i>). Thus the utility Wikimedia DNS provides to bad actors is quite limited when they have better tools available to secure the contents of the communication itself, such as the many free and commercial VPN services or other proxies.
</p><p>Wikimedia DNS is an alternative to already available commercial DNS providers and is not the only such service. Most people will still use Google and Cloudflare to secure their DNS lookups because these services will be much faster than ours because of the scale at which they operate.
</p>
<h3><span id="I_have_configured_the_service._How_do_I_make_sure_that_I_am_using_it.3F"></span><span id="I_have_configured_the_service._How_do_I_make_sure_that_I_am_using_it?" data-mw-thread-id="h-I_have_configured_the_service._How_do_I_make_sure_that_I_am_using_it?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-I_have_configured_the_service._How_do_I_make_sure_that_I_am_using_it?-Wikimedia_DNS_FAQ"></span>I have configured the service. How do I make sure that I am using it?<span data-mw-comment-end="h-I_have_configured_the_service._How_do_I_make_sure_that_I_am_using_it?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=21" title="Edit section: I have configured the service. How do I make sure that I am using it?">edit</a><span>]</span></span></h3>
<p>Once you have set up Wikimedia DNS, you can visit <a rel="nofollow" href="https://check.wikimedia-dns.org/">https://check.wikimedia-dns.org/</a> to confirm that your DNS queries are going over Wikimedia DNS and not your local/ISP&#39;s resolver. 
</p><p>You can also directly access the API from the command line: <code>curl <a rel="nofollow" href="https://${RANDOM}.check.wikimedia-dns.org/check">https://${RANDOM}.check.wikimedia-dns.org/check</a></code>.
</p>
<h3><span id="DoH_vs_DoT._Which_one_should_I_use.3F"></span><span id="DoH_vs_DoT._Which_one_should_I_use?" data-mw-thread-id="h-DoH_vs_DoT._Which_one_should_I_use?-Wikimedia_DNS_FAQ"><span data-mw-comment-start="" id="h-DoH_vs_DoT._Which_one_should_I_use?-Wikimedia_DNS_FAQ"></span>DoH vs DoT. Which one should I use?<span data-mw-comment-end="h-DoH_vs_DoT._Which_one_should_I_use?-Wikimedia_DNS_FAQ"></span></span><span><span>[</span><a href="https://meta.wikimedia.org/w/index.php?title=Wikimedia_DNS&amp;action=edit&amp;section=22" title="Edit section: DoH vs DoT. Which one should I use?">edit</a><span>]</span></span></h3>
<p>Wikimedia DNS supports DoH on TCP/443 and DoT on TCP/853. Users can select either protocol to secure their DNS as both DoH and DoT share the same privacy and security guarantees within Wikimedia DNS, but users are reminded to be mindful of the differences between the protocols themselves. 
</p>
<ul><li>DoH running on port 443 makes it harder for it to be blocked as censors would have to block potentially all HTTPS traffic. DoT runs on a dedicated port, 853, thus making it easier to block.</li></ul>
<ul><li>Typically, DoH support is in the browser (thus securing DNS lookups only from within that browser), while DoT lookups happen at the OS level, for all applications. DoT might be more preferable in that sense unless censorship is an issue.</li></ul>

<p>You can find a more exhaustive list of technical features on the <a href="https://wikitech.wikimedia.org/wiki/Wikimedia_DNS" title="wikitech:Wikimedia DNS">Wikitech</a> page but here is a summary:
</p>
<ul><li>This is an <a href="https://wikitech.wikimedia.org/wiki/Anycast" title="wikitech:Anycast">anycasted</a> service, running on all six of our data centers. You should in most cases connect to the data center nearest you, even when you configure it with the IP address.</li></ul>
<ul><li>Wikimedia DNS supports strong encryption: <i>TLSv1.3</i> and <i>TLSv1.2</i> (AEAD ciphers only) for DoH, and <i>TLSv1.3</i> for DoT. For mobile clients (or clients that otherwise prioritize it), Wikimedia DNS prioritizes <i>ChaCha20-Poly1305</i>.</li></ul>
<ul><li>This is meant to be a secure DNS service and we don&#39;t support unencrypted DNS over either UDP or TCP and have no plans to do so.</li></ul>
<ul><li>IPv6 is fully supported.</li></ul>

<p>The deployment of Wikimedia DNS corresponds to the source code in our <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production">Puppet repository</a>. The <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsdist/" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsdist/">dnsdist module</a> covers setting up and configuring a dnsdist instance, the <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsrecursor/" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsrecursor/">dnsrecursor module</a> does the same for a PowerDNS Recursor instance, and both of these are called by the Wikidough (codename) <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/role/manifests/wikidough.pp" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/role/manifests/wikidough.pp">role</a> and <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/profile/manifests/wikidough.pp" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/profile/manifests/wikidough.pp">profile</a> and customized with the configuration data from <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/hieradata/role/common/wikidough.yaml" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/hieradata/role/common/wikidough.yaml">wikidough.yaml</a>.
</p><p>The configuration files for dnsdist can be found at <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsdist/templates/dnsdist.conf.erb" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsdist/templates/dnsdist.conf.erb">dnsdist.conf.erb</a> and for PowerDNS Recursor at <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsrecursor/templates/recursor.conf.erb" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsrecursor/templates/recursor.conf.erb">recursor.conf.erb</a>.
</p>

<p>Wikimedia DNS is currently deployed on all six data centers, running on two ECMP load-balanced Ganeti virtual machines (for a total of 12 VMs). There are an additional twelve VMs for the check service (check.wikimedia-dns.org) above.
</p>

<p>The Wikimedia DNS project is by the SRE/Traffic team. We welcome questions, comments and discussions about the project on the Talk page.
</p><p>For technical discussions about the project, please join our IRC channel: <code>#wikimedia-traffic</code> on <i>Libera Chat</i>. The email contact for the team is <code>wikimedia-dns@wikimedia.org</code>.
</p>

<p>Wikimedia DNS is still being beta-tested and evaluated both internally and with our community. As such, there are no guarantees of the reliability or future availability of the service, and there is no formal privacy policy published yet. That said, our current configuration (visible here: <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsdist/templates/dnsdist.conf.erb" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsdist/templates/dnsdist.conf.erb">dnsdist.conf.erb</a> and <a href="https://gerrit.wikimedia.org/r/plugins/gitiles/operations/puppet/%2B/refs/heads/production/modules/dnsrecursor/templates/recursor.conf.erb" title="gerrit:plugins/gitiles/operations/puppet/+/refs/heads/production/modules/dnsrecursor/templates/recursor.conf.erb">recursor.conf.erb</a>) does not currently log anything. 
</p><p>We currently intend, in broad strokes, to adhere to the Foundation&#39;s long-standing values around privacy-related issues, as well as to <a rel="nofollow" href="https://wiki.mozilla.org/Security/DOH-resolver-policy">Mozilla&#39;s TRR policy</a>, when and if this service is more-formally launched in the future.
</p>
<!-- 
NewPP limit report
Parsed by mw2385
Cached time: 20230907010126
Cache expiry: 1814400
Reduced expiry: false
Complications: [show‐toc]
DiscussionTools time usage: 0.011 seconds
CPU time usage: 0.064 seconds
Real time usage: 0.082 seconds
Preprocessor visited node count: 300/1000000
Post‐expand include size: 1499/2097152 bytes
Template argument size: 62/2097152 bytes
Highest expansion depth: 10/100
Expensive parser function count: 0/500
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1848/5000000 bytes
Lua time usage: 0.015/10.000 seconds
Lua memory usage: 774557/52428800 bytes
Number of Wikibase entities loaded: 0/400
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   56.471      1 -total
 56.03%   31.643      1 Template:Infobox
 43.86%   24.767      1 Template:Tracked
 17.28%    9.757      1 Template:Dir
 13.67%    7.717      1 Template:Pagelang
 10.33%    5.831      2 Template:LangSwitch
  5.43%    3.067      1 Template:Template_other
  3.12%    1.762      1 Template:Colon
-->

<!-- Saved in parser cache with key metawiki:pcache:idhash:12410890-0!canonical and timestamp 20230907010126 and revision id 25579259. Rendering was triggered because: page-view
 -->
</div><!--esi <esi:include src="/esitest-fa8a495983347898/content" /> -->
</div></div>
  </body>
</html>
