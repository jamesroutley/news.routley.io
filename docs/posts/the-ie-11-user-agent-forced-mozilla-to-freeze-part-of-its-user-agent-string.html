<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://miketaylr.com/posts/2022/12/how-the-IE-11-ua-string-broke-sites-in-firefox.html">Original</a>
    <h1>The IE 11 user-agent forced Mozilla to freeze part of its user-agent string</h1>
    
    <div id="readability-page-1" class="page"><div><p>If you happen to be using Firefox Beta 109 on an overpriced MacBook Pro that has a sticky letter s today (the 29th of December, 2022), this is what the User-Agent string looks like:</p>

<p><code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/109.0</code></p>

<p>And as of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1805967">last week</a>, the UA string in Firefox for versions 110 and higher looks like:</p>

<p><code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:109.0) Gecko/20100101 Firefox/110.0</code></p>

<p>If you managed to visually discover the difference (I guess in the world’s lamest “Spot the Difference” game), congrats. If you didn’t, take note that <code>rv:109.0</code> <em>did not</em> change in the second one—but <code>Firefox/110.0</code> <em>did</em>.</p>

<p>So why did Mozilla just freeze <code>rv:109.0</code> in the User-Agent string? Perhaps forever, or just <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1806690">perhaps until Firefox 120 is released</a>?</p>

<p>Presumably in an attempt to unburden itself from a legacy of UA-sniffing-driven workarounds for a browser that hadn’t historically supported a lot of useful things (like WebGL, or some ES5 or ES6 stuff - I don’t really remember and can’t be bothered to look it up), the IE team decided to change up their User-Agent string back in 2013.</p>

<p>Here’s the IE10 UA, which followed the same-ish predictable pattern they had since the IE 2.0:</p>

<p><code>Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)</code></p>

<p>And here’s an IE11 UA:</p>

<p><code>Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; AS; rv:11.0) like Gecko</code></p>

<p>Basically they were trying to solve the problem of “now that we’ve invested seriously in web standards, how do we get access to content that makes use of those features, and still have a detectable version number for analytics (or whatever). And it makes sense to borrow Firefox’s <code>rv:</code> convention (slapping an extra “like Gecko” in there for good luck can’t hurt, I suppose (but more realistically, there was probably some bank or government site that sniffed for Safari’s <code>like Gecko</code> token)).</p>

<p>And then cut to today, about 9 years later where a <a href="https://github.com/webcompat/web-bugs/labels/version110">handful of sites</a> (including popular ones like bestbuy and cvs) tell Firefox users to upgrade to a modern browser, because there’s probably something really clever like <code>var isIE = /rv:11/i.test(navigator.userAgent);</code>.</p>

<p>That’s obviously lame, and hence, Mozilla has frozen another part of its UA string for compatibility. Anyways, happy new years, especially to the folks working to make sure the web is still usable in Firefox.</p>

</div></div>
  </body>
</html>
