<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/aappleby/hancho">Original</a>
    <h1>Show HN: Hancho – A simple and pleasant build system in ~500 lines of Python</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">&#34;班長, hanchō - &#34;Squad leader”, from 19th c. Mandarin 班長 (bānzhǎng, “team leader”)&#34;</p>
<p dir="auto">Hancho is a simple, pleasant build system with few moving parts.</p>
<p dir="auto">Hancho fits comfortably in 500 lines of Python and requires no installation, just copy-paste it into your source tree.</p>
<p dir="auto">Hancho is inspired by Ninja (for speed and simplicity) and Bazel (for syntax and extensibility).</p>
<p dir="auto">Like Ninja, it knows nothing about your build tools and is only trying to assemble and run commands as fast as possible.</p>
<p dir="auto">Unlike Ninja, you don&#39;t need a separate build rule invocation for every single output file.</p>
<p dir="auto">Like Bazel, you invoke build rules by calling them as if they were functions with keyword arguments.</p>
<p dir="auto">Unlike Bazel, you can create build rules that call arbitary Python code (for better or worse).</p>
<p dir="auto">Hancho should suffice for small to medium sized projects.</p>
<p dir="auto"><a href="https://github.com/aappleby/hancho/blob/main/tutorial">Tutorial Here</a></p>
<p dir="auto"><a href="https://github.com/aappleby/hancho/blob/main/docs">Some Additional Documentation Here</a></p>

<ul dir="auto">
<li>2024-03-02 - Initial release. Some test cases yet to be written.</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="wget https://raw.githubusercontent.com/aappleby/hancho/main/hancho.py
chmod +x hancho.py
./hancho.py --help"><pre>wget https://raw.githubusercontent.com/aappleby/hancho/main/hancho.py
chmod +x hancho.py
./hancho.py --help</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# examples/hello_world/build.hancho

config.set(build_dir = &#34;build&#34;)

compile = Rule(
  desc      = &#34;Compile {files_in} -&gt; {files_out}&#34;,
  command   = &#34;g++ -MMD -c {files_in} -o {files_out}&#34;,
  files_out = &#34;{swap_ext(files_in, &#39;.o&#39;)}&#34;,
  depfile   = &#34;{swap_ext(files_out, &#39;.d&#39;)}&#34;,
)

link = Rule(
  desc      = &#34;Link {files_in} -&gt; {files_out}&#34;,
  command   = &#34;g++ {files_in} -o {files_out}&#34;,
)

main_o = compile(&#34;main.cpp&#34;)
main_app = link(main_o, &#34;app&#34;)"><pre><span># examples/hello_world/build.hancho</span>

<span>config</span>.<span>set</span>(<span>build_dir</span> <span>=</span> <span>&#34;build&#34;</span>)

<span>compile</span> <span>=</span> <span>Rule</span>(
  <span>desc</span>      <span>=</span> <span>&#34;Compile {files_in} -&gt; {files_out}&#34;</span>,
  <span>command</span>   <span>=</span> <span>&#34;g++ -MMD -c {files_in} -o {files_out}&#34;</span>,
  <span>files_out</span> <span>=</span> <span>&#34;{swap_ext(files_in, &#39;.o&#39;)}&#34;</span>,
  <span>depfile</span>   <span>=</span> <span>&#34;{swap_ext(files_out, &#39;.d&#39;)}&#34;</span>,
)

<span>link</span> <span>=</span> <span>Rule</span>(
  <span>desc</span>      <span>=</span> <span>&#34;Link {files_in} -&gt; {files_out}&#34;</span>,
  <span>command</span>   <span>=</span> <span>&#34;g++ {files_in} -o {files_out}&#34;</span>,
)

<span>main_o</span> <span>=</span> <span>compile</span>(<span>&#34;main.cpp&#34;</span>)
<span>main_app</span> <span>=</span> <span>link</span>(<span>main_o</span>, <span>&#34;app&#34;</span>)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="// examples/hello_world/main.cpp
#include &lt;stdio.h&gt;

int main(int argc, char** argv) {
  printf(&#34;Hello World\n&#34;);
  return 0;
}"><pre><span><span>//</span> examples/hello_world/main.cpp</span>
#include &lt;stdio.h&gt;

<span>int</span> <span>main</span>(<span>int</span> argc, <span>char</span>** argv) {
  <span>printf</span>(<span><span>&#34;</span>Hello World<span>\n</span><span>&#34;</span></span>);
  <span>return</span> <span>0</span>;
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="user@host:~/hancho/examples/hello_world$ ../../hancho.py --verbose
[1/2] Compile main.cpp -&gt; build/main.o
Reason: Rebuilding [&#39;build/main.o&#39;] because some are missing
g++ -MMD -c main.cpp -o build/main.o
[2/2] Link build/main.o -&gt; build/app
Reason: Rebuilding [&#39;build/app&#39;] because some are missing
g++ build/main.o -o build/app
hancho: BUILD PASSED

user@host:~/hancho/examples/hello_world$ build/app
Hello World

user@host:~/hancho/examples/hello_world$ ../../hancho.py --verbose
hancho: BUILD CLEAN"><pre>user@host:<span>~</span>/hancho/examples/hello_world$ ../../hancho.py --verbose
[1/2] Compile main.cpp -<span>&gt;</span> build/main.o
Reason: Rebuilding [<span><span>&#39;</span>build/main.o<span>&#39;</span></span>] because some are missing
g++ -MMD -c main.cpp -o build/main.o
[2/2] Link build/main.o -<span>&gt;</span> build/app
Reason: Rebuilding [<span><span>&#39;</span>build/app<span>&#39;</span></span>] because some are missing
g++ build/main.o -o build/app
hancho: BUILD PASSED

user@host:<span>~</span>/hancho/examples/hello_world$ build/app
Hello World

user@host:<span>~</span>/hancho/examples/hello_world$ ../../hancho.py --verbose
hancho: BUILD CLEAN</pre></div>
</article></div></div>
  </body>
</html>
