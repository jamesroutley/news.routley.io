<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dani-garcia/vaultwarden/pull/3899">Original</a>
    <h1>Vaultwarden commit introduces SSO using OpenID Connect</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
  
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">This is based on previous PR (<a data-error-text="Failed to load title" data-id="1393923105" data-permission-text="Title is private" data-url="https://github.com/dani-garcia/vaultwarden/issues/2787" data-hovercard-type="pull_request" data-hovercard-url="/dani-garcia/vaultwarden/pull/2787/hovercard" href="https://github.com/dani-garcia/vaultwarden/pull/2787">#2787</a>, <a data-error-text="Failed to load title" data-id="1222679031" data-permission-text="Title is private" data-url="https://github.com/dani-garcia/vaultwarden/issues/2449" data-hovercard-type="pull_request" data-hovercard-url="/dani-garcia/vaultwarden/pull/2449/hovercard" href="https://github.com/dani-garcia/vaultwarden/pull/2449">#2449</a> and <a data-error-text="Failed to load title" data-id="1549282841" data-permission-text="Title is private" data-url="https://github.com/dani-garcia/vaultwarden/issues/3154" data-hovercard-type="pull_request" data-hovercard-url="/dani-garcia/vaultwarden/pull/3154/hovercard" href="https://github.com/dani-garcia/vaultwarden/pull/3154">#3154</a>) with work done by <a data-hovercard-type="user" data-hovercard-url="/users/pinpox/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pinpox">@pinpox</a>, <a data-hovercard-type="user" data-hovercard-url="/users/m4w0lf/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/m4w0lf">@m4w0lf</a>, <a data-hovercard-type="user" data-hovercard-url="/users/Sheap/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Sheap">@Sheap</a>, <a data-hovercard-type="user" data-hovercard-url="/users/bmunro-peralex/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bmunro-peralex">@bmunro-peralex</a>, <a data-hovercard-type="user" data-hovercard-url="/users/tribut/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tribut">@tribut</a> and others I probably missed sorry.</p>
<p dir="auto">This PR add support for OpenId Connect to handle authentication to an external SSO.</p>
<p dir="auto">A master password is still required and not controlled by the SSO (depending on your point of view this might be a feature ;).</p>
<p dir="auto">Bitwarden <a href="https://bitwarden.com/help/about-key-connector" rel="nofollow">key connector</a> is not supported and due to the <a href="https://github.com/bitwarden/key-connector/blob/main/LICENSE.txt">license</a> it&#39;s highly unlikely that it will ever be:</p>
<blockquote>
<p dir="auto">2.1 Commercial Module License. Subject to Your compliance with this Agreement, Bitwarden hereby grants to You a limited, non-exclusive, non-transferable, royalty-free license to use the Commercial Modules for the sole purposes of internal development and internal testing, and only in a non-production environment.</p>
</blockquote>
<h2 dir="auto">Usage</h2>
<p dir="auto">This should be agnostic to the SSO used as long as it supports client secret authentication and expose an OpenID Connect Discovery endpoint. (I&#39;m testing it with Keycloak at the moment, a demo test stack is available <a href="https://github.com/Timshel/vaultwarden/blob/sso-support/test/oidc/README.md">README.md</a>)</p>
<p dir="auto">Added some documentation at the root of the project <a href="https://github.com/Timshel/vaultwarden/blob/sso-support/SSO.md">SSO.md</a> that could be later moved to the wiki.</p>
<p dir="auto">I made some additional modification in my <a href="https://github.com/Timshel/vaultwarden/blob/main/README.md">main branch</a> to allow for easier testing (modified Docker image to use prebuilt patched front-end).</p>
<p dir="auto">On front-end modification, I made patched versions available at <a href="https://github.com/Timshel/oidc_web_builds">Timshel/oidc_web_builds</a>. Two versions are available :</p>
<ul dir="auto">
<li>One contains the change expected to be merged (named <code>button</code>); all change needs to be compatible with the non-sso version.</li>
<li>Second one set <code>#sso</code> as the default redirect url.</li>
</ul>
<h2 dir="auto">Issues</h2>
<p dir="auto">As mentioned in the previous PR one of the main issue is the inability for the organization invitation to work with the SSO redirection. To fix it a <a href="https://github.com/Timshel/oidc_web_builds/blob/master/oidc_invite.patch">patch</a> to the front-end is needed.</p>
<h2 dir="auto"><strong><g-emoji alias="warning">⚠️</g-emoji><g-emoji alias="warning">⚠️</g-emoji> <g-emoji alias="warning">⚠️</g-emoji>  If you have issues or need help testing the PR  <g-emoji alias="warning">⚠️</g-emoji> <g-emoji alias="warning">⚠️</g-emoji>  <g-emoji alias="warning">⚠️</g-emoji></strong></h2>
<p dir="auto">Please open issues in <a href="https://github.com/Timshel/vaultwarden/issues">Timshel/vaultwarden</a> in order to keep the discussion here focused on merging this work.</p>
<p dir="auto">But please try to keep commenting in this PR to a minimum to keep it legible, the previous one has over 200 comments ...</p>
    </div>
  </task-lists>
  
</div>

      </div></div>
  </body>
</html>
