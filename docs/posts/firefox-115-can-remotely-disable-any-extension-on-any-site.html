<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lapcatsoftware.com/articles/2023/7/1.html">Original</a>
    <h1>Firefox 115 can remotely disable any extension on any site</h1>
    
    <div id="readability-page-1" class="page">
<nav>
Previous: <a href="https://lapcatsoftware.com/articles/2023/6/4.html">My thoughts on Apple Vision Pro</a>
</nav>
<header><a href="https://lapcatsoftware.com">Jeff Johnson</a> (<a href="https://underpassapp.com">My apps</a>, <a href="https://www.paypal.me/JeffJohnsonWI">PayPal.Me</a>, <a href="https://appdot.net/@lapcatsoftware" title="@lapcatsoftware@appdot.net">Mastodon</a>)</header>

<h3>July 5 2023</h3>

<p>Firefox version 115.0 was released on July 4, but I&#39;m not celebrating. I&#39;m concerned about a new &#34;feature&#34; in the <a href="https://www.mozilla.org/en-US/firefox/115.0/releasenotes/">release notes</a>.</p>
<blockquote><p>Certain Firefox users may come across a message in the extensions panel indicating that their add-ons are not allowed on the site currently open. We have introduced a new back-end feature to only <a href="https://support.mozilla.org/kb/quarantined-domains">allow some extensions monitored by Mozilla to run on specific websites</a> for various reasons, including security concerns.</p></blockquote>
<p>For various reasons. That&#39;s quite uninformative and mysterious.</p>
<p>I&#39;m all in favor of giving users control over which extensions are allowed to load on which sites. Safari already has this feature on both macOS and iOS. My concern is not about user control—little of which even exists in Firefox 115, as I&#39;ll show later—but rather about the remote control that Mozilla has now given itself, as mentioned in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1832791" title="Implement a Remote Settings for the Quarantined Domains pref">a Bugzilla report</a>.</p>
<blockquote>
<p>We need to have ability to set the list of quarantined domains remotely.  The pref should be a string with the same format as <code>extensions.webextensions.restrictedDomains</code>.</p>
<p>The pref will be <code>extensions.webextensions.quarantinedDomains</code>, and it will have a default value set in a patch for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1745823" title="ASSIGNED - Implement negative permissions">bug 1745823</a> (to include a couple real but &#34;test&#34; subdomains from badssl.com).</p>
<p>Filing as confidential for now, until we ship the system addon.</p>
</blockquote>
<p>You have to wonder why an open source project required confidentiality about this. Incidentally, neither Safari nor Chrome, or any other browser as far as I know, has such a remote domain-specific kill switch for extensions, so you have to wonder why it was necessary in Firefox.</p>
<p>I believe that Mozilla already had the capability to remotely disable an individual extension, if it turned out to be malware. After all, every Firefox extension needs to be uploaded to Mozilla for analysis and cryptographically code signed before it can be installed in Firefox. <b>[Edit: I&#39;ve now <a href="https://support.mozilla.org/kb/add-ons-cause-issues-are-on-blocklist" title="Add-ons that cause stability or security issues are put on a blocklist">confirmed</a> that Mozilla has an extensions blocklist.]</b> Given this preexisting capability, it&#39;s unclear why there should be a list of domains where all except a lucky few chosen extensions are disabled, regardless of whether the disabled extensions have shown signs of misbehavior.</p>
<p>The Firefox quarantined domains list is currently empty. Mozilla hasn&#39;t said which domains it intends to add, or even why a domain-specific list is required. I find this troubling. It&#39;s a feature with no apparent motivation, supposedly for &#34;security concerns&#34;—among other &#34;various reasons&#34;—but what <em>are</em> the specific security concerns here, that would be addressed by a remotely controlled domain list? Mozilla&#39;s opacity and vagueness feels almost deliberate, undermining our trust.</p>
<p>Let&#39;s see how the user interface actually works in Firefox 115. Although the quarantined domains list is empty by default, you can edit the list manually in the <code>about:config</code> page.</p>
<p><img src="https://lapcatsoftware.com/articles/2023/7/1-1.png" width="810" height="440" alt="Firefox about:config extensions.quarantinedDomains.list www.youtube.com"/></p>
<p>I&#39;ve added the domain <code>www.youtube.com</code> to the list. After relaunching Firefox, you can see the warning in the Extensions popup.</p>
<p><img src="https://lapcatsoftware.com/articles/2023/7/1-2.png" width="810" height="440" alt="Some extensions are not allowed. Only some extensions monitored by Mozilla are allowed on this site to protect your data."/></p>
<p>My own extension <a href="https://underpassapp.com/StopTheMadness/">StopTheMadness</a>, which is not &#34;monitored by Mozilla&#34;, is &#34;Not allowed by Mozilla&#34; on YouTube. (This warning is inaccurate, of course, since it was me rather than Mozilla who added YouTube to the domains list.) Apparently <a href="https://addons.mozilla.org/en-US/firefox/addon/ublock-origin/">uBlock Origin</a> is monitored by Mozilla, for it is allowed on YouTube despite my quarantined domains list. It&#39;s nice to be big, I guess.</p>
<p>Note that the warning appears <em>in</em> the Extensions popup rather than <em>on</em> the Extensions icon, so you wouldn&#39;t know that StopTheMadness was disabled on YouTube unless you opened the popup (or unless you saw the autoplaying videos on YouTube that StopTheMadness would otherwise stop.)</p>
<p>What happens, though, if you pin the extensions to the toolbar for easy access to their settings?</p>
<p><img src="https://lapcatsoftware.com/articles/2023/7/1-3.png" width="810" height="440" alt="StopTheMadness and uBlock Origin pinned to Firefox toolbar"/></p>
<p>It turns out that when you pin an extension to the toolbar, it no longer appears in the Extensions popup! Consequently, the quarantined domains warning no longer appears in the Extensions popup either. In fact, there&#39;s no longer an Extensions popup: clicking the Extensions toolbar icon simply opens the <code>about:addons</code> page, which doesn&#39;t show the quarantined domains warning anywhere.</p>
<p><img src="https://lapcatsoftware.com/articles/2023/7/1-4.png" width="810" height="440" alt="Firefox Add-ons Manager"/></p>
<p>This is a terrible user interface design for the new so-called &#34;security&#34; feature, silently disabling extensions while hiding the warning from the user. And remember, the quarantined domains list can be changed remotely at any time by Mozilla, without needing a Firefox software update. Firefox just has to &#34;phone home&#34; to Mozilla. (Another reason to install <a href="https://www.obdev.at/products/littlesnitch/">Little Snitch</a>. <b>[Edit: I believe the domain is <a href="https://support.mozilla.org/kb/domains-allow-firefox" title="Domains to Allow for Firefox">firefox.settings.services.mozilla.com</a> in this case.]</b>)</p>
<p>We have no idea how Mozilla intends to use the quarantined domains list. Some people are speculating, with no evidence, about &#34;banking&#34;. But there are innumerable banks in the world. What is Mozilla supposed to do, make and maintain a list of every banking web site in the world? While it makes sense for users to have the ability to manually exclude their own banking sites from extension access if they prefer, what sense does it make for Mozilla to arbitrarily select certain web site domains for general exclusion? Another question: is it impossible for the user to purposely exclude extensions that are &#34;monitored by Mozilla&#34; and given special treatment by Firefox?</p>
<p>My own extension StopTheMadness stops web sites from disabling your browser&#39;s built-in paste and autofill features, a kind of madness commonly implemented by sites that have a misguided, ignorant notion about what makes a login form &#34;secure&#34;. Thus, it would be a disservice rather than a service to users for Mozilla to remotely disable user extensions on some arbitrarily selected banking sites.</p>
<p>As a little indie software developer, I&#39;m disappointed and irritated that Mozilla, a little developer compared to its competitors—corporate giant browser vendors Apple, Google, and Microsoft—would choose to create a two-tier system in which only the biggest extension developers get exclusive access and exemptions. I know that users love uBlock Origin, but I hate the idea of a world where uBlock Origin is the <em>only</em> extension allowed. That&#39;s the type of consumer and power centralization that Firefox and Mozilla are supposed to be fighting against. I don&#39;t like an extension monopoly any more than I like a browser monopoly.</p>

<header><a href="https://lapcatsoftware.com">Jeff Johnson</a> (<a href="https://underpassapp.com">My apps</a>, <a href="https://www.paypal.me/JeffJohnsonWI">PayPal.Me</a>, <a href="https://appdot.net/@lapcatsoftware" title="@lapcatsoftware@appdot.net">Mastodon</a>)</header>
<nav><a href="https://lapcatsoftware.com/articles/index.html" title="The Desolation of Blog">Articles index</a></nav>


</div>
  </body>
</html>
