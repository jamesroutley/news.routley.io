<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.jeffgeerling.com/blog/2023/risc-v-business-testing-starfives-visionfive-2-sbc">Original</a>
    <h1>RISC-V Business: Testing StarFive&#39;s VisionFive 2 SBC</h1>
    
    <div id="readability-page-1" class="page"><div><p>It&#39;s risky business fighting Intel, AMD, and Arm, and that&#39;s <em>exactly</em> what Star Five is trying to do with this:</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-black-background.jpeg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-47ab36cd-64e6-41e6-b6de-5ca50c3c2589" data-insert-attach="{&#34;id&#34;:&#34;47ab36cd-64e6-41e6-b6de-5ca50c3c2589&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="StarFive VisionFive 2 Black Background"/></p>

<p>The chip on this new single board computer could be the start of a computing <em>revolution</em>—at least that&#39;s what some people think!</p>

<p>The VisionFive 2 has a JH7110 SoC on it, sporting a new Instruction Set Architecture (ISA) called RISC-V.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/StarFive-VisionFive-2-Focus-Stacked.jpeg" width="700" height="463" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-9c5701f1-8521-4828-9380-93f6e116135a" data-insert-attach="{&#34;id&#34;:&#34;9c5701f1-8521-4828-9380-93f6e116135a&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="StarFive VisionFive 2 - Focus Stacked"/></p>

<p>On board are four 1.5 GHz CPU cores, so it&#39;s no slouch. And the one I&#39;m testing is the high-end configuration, with 8 gigs of RAM, an M.2 slot, USB 3.0, and <em>two</em> Gigabit Ethernet ports.</p>

<p><em>On paper</em>, this board looks like it can compete with something like a Raspberry Pi. Can it?</p>

<p>Yes and no.</p>

<p>RISC-V is the new kid on the block. It&#39;s so new software isn&#39;t really optimized for it yet. And some software won&#39;t run at <em>all</em>.</p>

<p>But a lot will. Especially if we&#39;re talking about Linux.</p>

<h2>Video</h2>

<p>This blog post is a lightly-edited transcript of the following video—feel free to either watch the video or read the rest of the blog post:</p>

<div>
<p><iframe src="https://www.youtube.com/embed/aFze0XVhHZA" frameborder="0" allowfullscreen=""></iframe></p>
</div>

<p>StarFive sent me the board I tested in this review, but I also have an order in for another one. I welcome another competitor in the chip space, especially when there&#39;s a more open community around it.</p>

<p>Intel&#39;s X86 architecture and ARM&#39;s instruction sets are tightly controlled and licensed. RISC-V has an &#39;open&#39; architecture—though individual designs (like the cores used in the JH7110) are often proprietary and licensed, since that&#39;s how chip manufacturers make money.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-jh7110-riscv.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-1d07d3d1-487f-4ad2-964a-e83381fe4ebb" data-insert-attach="{&#34;id&#34;:&#34;1d07d3d1-487f-4ad2-964a-e83381fe4ebb&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="StarFive JH7110 SoC Closeup"/></p>

<p>A few years ago I would&#39;ve said RISC-V had a huge hurdle for adoption. But now, with a new geopolitical landscape, trade wars, and the <a href="https://www.theregister.com/2023/01/04/arm_qualcomm_lawsuit/">lawsuit between Qualcomm and Arm</a>... eh... maybe it&#39;s not so risky after all!</p>

<p>But back to this board. This is the first mass market RISC-V board with compelling hardware specs. So what should you expect if you pick one up?</p>

<p>Initially, not much.</p>

<h2>Bringup</h2>

<p>Like many other boards that I&#39;ve tested from Chinese manufacturers, the initial experience is a bit jarring, especially if you&#39;re new to SBCs.</p>

<p>But considering the entire architecture&#39;s new, I&#39;m willing to cut it some slack. It&#39;s still better than most of the Pi clones—but that&#39;s not saying much.</p>

<p>The board was hard to bring up. I had to dig into some forum threads and eventually <a href="https://jamesachambers.com/starfive-visionfive-2-firmware-update-guide/">this blog post</a> to figure out how to upgrade the firmware, just so I could install the latest OS.</p>

<p>Upgrading the firmware involved running a special buildroot image and logging in with SSH, so already, just to start using the board, it&#39;s not simple.</p>

<p>And then I had trouble with HDMI! The GPU supposedly handles 4K, but I couldn&#39;t even get it working with my old HD monitor. I tried debugging it with modesed and tried different cables, but I just couldn&#39;t get it working. Eventually I was able to get my Atomos Ninja V working, at least, but it seems like HDMI is a little buggy right now.</p>

<p>To add insult to injury, when I went to log in over SSH I tried following the <a href="https://doc-en.rvspace.org/VisionFive2/PDF/VisionFive2_QSG.pdf">getting started guide</a>. But I <a href="https://github.com/geerlingguy/sbc-reviews/issues/10#issuecomment-1421465432">found out</a> it had the wrong login user. It should be &#39;user&#39; but the guide said &#39;root.&#39; (Note: Default SSH behavior has changed in the most recent image.)</p>

<p>Knowing it&#39;s not a true plug-and-play experience, how does this thing <em>perform</em>?</p>

<p>Well, right now, not that well.</p>

<h2>Benchmarking</h2>

<p>Before I show you any test results, I have to warn to you take them with a grain of salt. My results today might be different than someone re-testing everything in a month, or even a year from now.</p>

<p>And that&#39;s because RISC-V and the processor on this board are so new that there are thousands of little optimizations that aren&#39;t even made yet. Most developers who could <em>make</em> those optimizations don&#39;t even have RISC-V hardware to test &#39;em.</p>

<p>Especially for things like basic math operations or cryptography, this chip looks glacial. In some ways it isn&#39;t, but it&#39;s not always clear if that&#39;s a <em>hardware</em> issue or <em>software</em>.</p>

<p>I want compare the VisionFive 2 to two boards you might be more familiar with: the Raspberry Pi 3 B+, and the Raspberry Pi 4.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-raspberry-pis.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-345d45ff-fd49-4140-8505-61b222ba13a5" data-insert-attach="{&#34;id&#34;:&#34;345d45ff-fd49-4140-8505-61b222ba13a5&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="VisionFive 2 Raspberry Pi 3 and 4"/></p>

<p>Putting aside <a href="https://rpilocator.com">availability</a>, the VisionFive 2 is <em>marketed</em> as something between those two boards, but not quite as good as a Pi 4.</p>

<p>So how is it?</p>

<p>Well, just running a basic benchmark like Geekbench, the VisionFive 2 scored 78 single core and 276 multicore.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-geekbench-5-benchmark.png" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-21585483-b3b5-4a3a-9442-3fd6768a1d53" data-insert-attach="{&#34;id&#34;:&#34;21585483-b3b5-4a3a-9442-3fd6768a1d53&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="VisionFive 2 Geekbench benchmarks"/></p>

<p>It&#39;s a LOT slower than a Pi 4. And it&#39;s even <a href="https://browser.geekbench.com/v5/cpu/compare/20730472?baseline=20776700">noticeably slower than a Pi 3 B+</a>.</p>

<p>But looking deeper at the <a href="https://browser.geekbench.com/v5/cpu/compare/20730472?baseline=20776700">individual test results</a>, it seems the VisionFive 2 scores especially bad in image-related tests (like Camera, Gaussian Blur, and Structure from Motion). And for Machine Learning, it&#39;s only getting 2-4% of the performance of the Pi. What gives?</p>

<p>Reading Geekbench&#39;s <a href="https://www.geekbench.com/doc/geekbench5-cpu-workloads.pdf">documentation</a>, it says the Machine Learning workload &#34;performs an image classification task&#34; with a small image. So, another image-based test.</p>

<p>It uses MobileNet v1, an older machine learning model that&#39;s <em>probably</em> not optimized for the chip on this board. But it&#39;s not like Geekbench&#39;s results are useless—if you buy this board today, then for some things it really is that much slower.</p>

<p>Like when I logged in over SSH, the initial login is noticeably slower than the Pi. And image processing and cryptography will be a lot slower on this board.</p>

<p>The lag is bad enough it feels like I&#39;m working on an original Raspberry Pi sometimes.</p>

<p>I also wanted to run linpack to test floating point performance, but I had trouble compiling the Python cryptography library, so I put that on hold.</p>

<p>Before the RISC-V apologists crucify me, I&#39;ll add that the JH7110 isn&#39;t the only RISC-V chip on the market. And this year other chips which will do better on image processing, neural nets, and encryption are coming.</p>

<p>This is a review of one particular board that happens to be RISC-V. Not the entire RISC-V ecosystem—keep that in mind.</p>

<h2>IO Performance</h2>

<p>Moving on to IO performance, I tested both gigabit Ethernet ports, and they both pumped through a full gigabit on their little Motorcomm NICs, so no complaints there.</p>

<p>But what I really wanted to test is the M.2 slot on the bottom. It&#39;s got one lane of PCI express Gen 2, just like the Pi 4. On a Compute Module 4, I can get 350-400 MB/sec with a good NVMe SSD.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-bottom-nvme-ssd-kioxia-xg6.jpg" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-afd01f27-179d-4a7e-829f-c4b8d5ffd2d7" data-insert-attach="{&#34;id&#34;:&#34;afd01f27-179d-4a7e-829f-c4b8d5ffd2d7&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Kioxia XG6 NVMe SSD on bottom of VisionFive 2"/></p>

<p>Testing the VisionFive 2 I only get about 250 MB/sec. The drive showed up at the correct speed but the board just couldn&#39;t put through as much data.</p>

<p>And the built in microSD card slot isn&#39;t that fast, either—I only got about 24 MB/sec. The <a href="https://pibenchmarks.com/benchmark/56575/">Pi 4 gets double that</a>, so again, this board is more in line with a Pi 3. More of my test results can be found <a href="https://github.com/geerlingguy/sbc-reviews/issues/10">here</a>.</p>

<h2>Integrated GPU</h2>

<p>Next, what about the GPU? One big marketing point is the VisionFive 2 <a href="https://www.starfivetech.com/en/site/boards">is the world&#39;s first high-performance RISC-V computer with an integrated GPU</a>!</p>

<p>The hardware supports HDMI 2, with H.264 and 265 decoding at 4K courtesy of an Imagination BXE GPU.</p>

<p>But can we even <em>use</em> it? One of the curses of Single Board Computers is how hard it is to get the GPU to do anything in Linux. Watching 1080p video on YouTube is a typical use case, and on this board, it&#39;s excruciating.</p>

<p>Just <em>opening</em> YouTube is painful enough—it took 30 seconds just to get to the home page! And once you get a video to load, playback is glacial. At HD resolution, almost all the frames were dropped.</p>

<p>It&#39;s early days, so the experience should get better. A lot is being worked on right now, like <a href="https://github.com/riscv/meta-riscv/pull/382">this pull request that gets hardware acceleration off the ground</a>.</p>

<p>But forget all that. This thing has an M.2 slot, which means I can take my <a href="https://amzn.to/3KTtX2H">M.2 to PCIe x16 adapter</a> and plug in anything I want!</p>

<h2>PCI Express Shenanigans</h2>

<p>I found <a href="http://forum.rvspace.org/t/how-to-use-external-gpu-on-visionfive-v2/1302/4">this forum post</a> about someone else already having some success getting an AMD graphics card working, so I pulled out my old Radeon HD 7470, grabbed a copy of Linux, and compiled my own custom kernel.</p>

<p>Surprisingly, compiling Linux for RISC-V using <a href="https://github.com/starfive-tech/linux">StarFive&#39;s Linux fork</a> was easy. I enabled the <code>radeon</code> kernel module, then compiled it on the board. It took about an hour.</p>

<p>Once I copied the new kernel in place and rebooted, the GPU worked!</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-amd-radeon-hd-7470.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-204dbcfb-9659-461c-a831-5e29e732ac25" data-insert-attach="{&#34;id&#34;:&#34;204dbcfb-9659-461c-a831-5e29e732ac25&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="AMD Radeon HD 7470 on VisionFive 2 SBC"/></p>

<p>On the Raspberry Pi, I ran into memory access bugs, and we had to write a bunch of ugly hacky patches. I was expecting it to be even worse on an entirely new architecture, but it wasn&#39;t!</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-amd-radeon-console-output.jpeg" width="700" height="467" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-f6b15ca6-075a-443a-a2a2-fab7613ae1ac" data-insert-attach="{&#34;id&#34;:&#34;f6b15ca6-075a-443a-a2a2-fab7613ae1ac&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="VisionFive 2 Console Output from AMD Radeon HD 7470"/></p>

<p>I did run into this weird issue where the screen flashes for a while and all these &#34;PVR_K&#34; errors popped up on the screen. So it&#39;s not entirely usable yet, but I think there&#39;s definitely more fun to be had here.</p>

<p>Trying an Nvidia GTX 750 Ti, the open source nouveau driver made the system freeze up, so I put that on hold—it&#39;s likely I ran into a power issue and I&#39;ll have to revisit it later.</p>

<p>René Rebe also <a href="https://riscv.org/news/2021/07/rene-rebe-patches-the-linux-kernel-for-worlds-first-look-at-a-radeon-rx-6700xt-on-a-risc-v-pc-gareth-halfacree-hackster-io/">get a newer AMD card working on another RISC-V board</a>, so maybe RISC-V has a leg up on Arm—at least for these tiny SBCs. Getting graphics cards running on low end Arm is painful.</p>

<p>I also checked into hardware video transcoding, but like I said earlier, that&#39;s still being worked on. The VisionFive 2 could be useful for things like Plex or Jellyfin—someday.</p>

<h2>Power Consumption / Efficiency</h2>

<p>All that would be for naught, though, if this thing isn&#39;t also <em>efficient</em>. And it&#39;s not gonna take the crown, but it&#39;s decent, using 3W at idle, and a little over 5W fully stressed.</p>

<p><img src="https://www.jeffgeerling.com/sites/default/files/images/visionfive-2-power-benchmark.png" width="700" height="394" data-insert-type="image" data-entity-type="file" data-entity-uuid="insert-image-684f77cf-e32b-422c-a356-938d228c9ccd" data-insert-attach="{&#34;id&#34;:&#34;684f77cf-e32b-422c-a356-938d228c9ccd&#34;,&#34;attributes&#34;:{&#34;alt&#34;:[&#34;alt&#34;,&#34;description&#34;],&#34;title&#34;:[&#34;title&#34;]}}" alt="Power Consumption VisionFive 2 SBC"/></p>

<p>This board could be an efficient homelab companion, as long as the software you need can run on it. I haven&#39;t had a chance to test other things like Home Assistant or Docker, but I know for many things, just getting the software running right now can be painful.</p>

<h2>Conclusion</h2>

<p>But Arm boards—even the darling child Raspberry Pi—were in a similar state a decade ago. StarFive is coming into an already-crowded market and already creating a lotta buzz.</p>

<p>Right now between the Raspberry Pi shortage and the clone manufacturers dropping the ball on software and support, RISC-V SBCs have a prime opportunity.</p>

<p>My biggest question—and I&#39;m not sure if this is praise of the RISC-V community or condemnation of the Arm status quo—is this: How is it that this fledgling RISC-V board, barely off the ground, <em>already</em> has documentation and support that&#39;s miles ahead of most other SBCs?</p>

<p>Besides a few small warts in the getting started guide, the <a href="https://rvspace.org">documentation</a> is pretty good. The <a href="https://forum.rvspace.org">forums</a> are active, and I didn&#39;t have to lurk on Discord just to get help.</p>

<p>And compared to the Raspberry Pi, well, the Pi isn&#39;t unimpeachable, but the VisionFive 2 definitely isn&#39;t the board to take away <em>its</em> crown.</p>

<p>What it <em>is</em>, is an early warning shot across Arm&#39;s bow. If each RISC-V board improves at the pace the Pi has over the years, we could see a more competitive landscape, when it comes to energy efficient Linux SoCs.</p>

<p>The JH7110 isn&#39;t amazing. But it&#39;s not bad, either.</p>

<p>I still wouldn&#39;t recommend most people buy this board, unless you already know a lot about Linux and SBCs in general. That may change a year from now, but right now, this board isn&#39;t targeted at the same market as a Raspberry Pi.</p>

<p>At <a href="https://ameridroid.com/products/visionfive-2?variant=40845950779426">around $100</a>, and not being quite production-ready, I&#39;m only recommending this board to people interested in exploring RISC-V for now.</p>

<p>But that&#39;s the &#39;risky&#39; business StarFive finds themselves in today.</p></div></div>
  </body>
</html>
