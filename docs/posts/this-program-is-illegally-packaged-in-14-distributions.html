<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://artemis.sh/2022/08/21/this-program-is-illegally-packaged-in-14-distributions.html">Original</a>
    <h1>This Program is Illegally Packaged in 14 Distributions</h1>
    
    <div id="readability-page-1" class="page"><article>
            <header>
                
                <time datetime="2022-08-21 00:00:00 +0000">2022-08-21</time>
            </header>
            <p>I am not a lawyer. Today I wanted to package the <a href="https://gitea.com/gitea/tea">tea</a> command line utility, which is a CLI frontend for the <a href="https://gitea.io">gitea</a> git forge. Gentoo‚Äôs guidelines for Go helpfully states: ‚ÄúSince Go programs are statically linked, it is important that your ebuild‚Äôs <code>LICENSE=</code> setting includes the licenses of all statically linked dependencies. So please make sure it is accurate‚Äù. Naturally, I‚Äôm happy to oblige. So you know, I go looking at the licenses for <code>tea</code>‚Äôs dependencies, and it turns out one of those dependencies doesn‚Äôt have a license at all! I‚Äôm no expert, but this may violate the GNU Free System Distribution Guidelines that <a href="https://www.parabola.nu/packages/community/x86_64/tea/">distributions like parabola strive to adhere to</a>. Oh fun.</p>

<p>And this isn‚Äôt a targeted dig at parabola. Looking at <a href="https://repology.org/project/gitea-tea/versions">repology‚Äôs list of distributions that package tea</a>, we see Arch in there, Alpine, nixpkgs. It seems like ‚ÄúMIT‚Äù is the most common license that distros are listing this as. Everyone seems oblivious to the fact that this binary is a license <a href="https://en.wikipedia.org/wiki/Turducken">turducken</a> several times over. (EDIT: <a href="https://gitlab.alpinelinux.org/alpine/aports/-/issues/14129">it‚Äôs 30 minutes after posting and there is now an issue on alpine‚Äôs aports about this</a>.)</p>

<p>So what is this unlicensed package? Well according to <a href="https://github.com/mitchellh/golicense"><code>golicense</code></a>,</p>

<div><div><pre><code>üö´ gitea.com/noerw/unidiff-comments   &lt;license not found or detected&gt;
</code></pre></div></div>

<p>Checking <a href="https://gitea.com/noerw/unidiff-comments">gitea.com/noerw/unidiff-comments</a>, we see that this is actually just a mirror (fork?) of <a href="https://github.com/seletskiy/godiff">github.com/seletskiy/godiff</a>, just repackaged a bit for go modules. And there‚Äôs <a href="https://github.com/seletskiy/godiff/issues/4">an open issue</a> on the original repo, by the owner of the unidiff-comments repo on gitea, with no response:</p>

<p><img src="https://artemis.sh/assets/posts/2022-08-21-this-program-is-illegally-packaged-in-14-distributions/github-issue.png" alt="noerw on github asks &#39;Can you clarify under what license this is code provided? Thanks&#39;. They receive no reply"/></p>

<p>lmao. So basically, someone forked seletskiy/godiff, wrapped it up into a module, imported it in <code>tea</code> for a couple lines of functionality, and now every distro is claiming that this binary is licensed under a license it almost certainly is not, and probably redistributing it illegally. You can‚Äôt just do this. When a source code doesn‚Äôt have a license, you don‚Äôt just get to decide you want to use it anyway, and if you do, people certainly can‚Äôt go around distributing binaries of it.</p>

<p>But it gets worse. Let‚Äôs take a look at another go package, Restic. At least all the code for this one is licensed. But looking at the repos for <a href="https://metadata.ftp-master.debian.org/changelogs//main/r/restic/restic_0.11.0-1_copyright">debian</a> and <a href="https://archlinux.org/packages/community/x86_64/restic/">arch</a>, they don‚Äôt even agree on which license it‚Äôs using! It seems like basically every go package is listed under the license of ONLY the top-level project rather than including the dependency tree, and at least one of them is getting THAT wrong too. Meanwhile, restic uses software licensed under MIT, BSD, Apache, <a href="https://github.com/bazil/fuse/blob/master/LICENSE">and whatever fresh hell is going on over here</a>.</p>

<p>I checked the <a href="https://www.debian.org/doc/debian-policy/ch-archive.html#copyright-considerations">Debian Policy Manual</a>, which states:</p>

<blockquote>
  <p>the copyright notices for any files which are compiled into the object code shipped in the binary package must all be included in /usr/share/doc/PACKAGE/copyright when the license requires that copyright information be included in all copies and/or binary distributions, as most do.</p>
</blockquote>

<p>Which is definitely not what‚Äôs going on here. And if you thought this just affected go packages, compare <code>cargo license</code> against debian‚Äôs <code>copyright</code> file for ripgrep:</p>

<div><div><pre><code>$ rg &#39;License:&#39; /usr/share/doc/ripgrep/copyright 
8:License: Unlicense or MIT
12:License: BSD-3-clause
18:License: Unlicense or MIT
20:License: MIT
39:License: Unlicense
63:License: BSD-3-clause

# The N/A here is because the version of encoding_rs in the dep-tree had their
# license specified in a way that confused `cargo license`, don&#39;t worry about
# that part.
$ cargo license
Apache-2.0 OR BSL-1.0 (1): ryu
Apache-2.0 OR MIT (36): base64, bitflags, bstr, bytecount, cc, cfg-if, crossbeam-channel, crossbeam-utils, encoding_rs_io, fnv, glob, hermit-abi, itoa, jemalloc-sys, jemallocator, jobserver, lazy_static, libc, log, memmap2, num_cpus, once_cell, proc-macro2, quote, regex, regex-syntax, serde, serde_derive, serde_json, syn, thread_local, unicode-width, unicode-xid, winapi, winapi-i686-pc-windows-gnu, winapi-x86_64-pc-windows-gnu
MIT (5): atty, clap, fs_extra, strsim, textwrap
MIT OR Unlicense (16): aho-corasick, globset, grep, grep-cli, grep-matcher, grep-printer, grep-regex, grep-searcher, ignore, memchr, regex-automata, ripgrep, same-file, termcolor, walkdir, winapi-util
N/A (1): encoding_rs
</code></pre></div></div>

<p>COOOOOOL.</p>

<p>So, to recap, we‚Äôve got distributions of a go package that includes entirely unlicensed code, which I will remind you does NOT mean you get to just use it because you feel like it. We‚Äôve got a host of go packages that may not be complying with the terms of the license (iamnotalawyer), and it‚Äôs apparently not limited just to go. Can someone please tell me what the fuck is going on with licensing because I am losing my goddamn mind.</p>

        </article></div>
  </body>
</html>
