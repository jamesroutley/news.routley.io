<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://memgraph.com/blog/pagerank-algorithm-for-graph-databases">Original</a>
    <h1>PageRank algorithm for graph databases</h1>
    
    <div id="readability-page-1" class="page"><div id="content"><p>The most interesting and famous application of PageRank is certainly the one that actually sparked its creation. Google founders Larry Page and Sergey Brin needed <a href="http://infolab.stanford.edu/~backrub/google.html">an algorithm to rank pages</a> and provide users with the best possible search results.</p>
<p>Using the PageRank algorithm, each page receives a ranking based on the number and importance of other pages that are linking to it. The pages with a higher page rank, increase the ranking of the page they link to more than the pages with a lower rank.</p>
<p>In graph database terminology, the PageRank algorithm is used to measure the importance of each node based on the number of incoming relationships and the rank of the related source nodes. What the PageRank algorithm actually outputs is a probability distribution that represents the likelihood of visiting any particular node by randomly traversing the graph.</p>
<p>So, it’s basically a node popularity contest.</p>
<p><img src="https://assets.website-files.com/6141c89a3874c3702674a1c0/63d38ade011a3985b8309cb9_memgraph-pagerank-vin-visual.png" alt="memgraph-pagerank-vin-visual"/></p>
<p>A widely used type of PageRank is Personalized PageRank, which is extremely useful in recommendation systems. With Personalized PageRank, you can restrain the random walk by allowing it to start only from one of the nodes in a given set, and jump only to one of the nodes in a given set. This type of PageRank brings out central nodes from the perspective of that set of specific nodes. For example, <a href="https://dl.acm.org/doi/10.1145/2488388.2488433">Twitter uses Personalized PageRank</a>  to recommend who to follow online.</p>
<p>The animation below shows the results of PageRank on a simple network. A sequel of a well-liked movie will automatically be more popular than just a random new title because it already has an established fan base. In graph terms, the biggest node pointing to an adjacent node makes it more important.</p>
<p><img src="https://assets.website-files.com/6141c89a3874c3702674a1c0/63d38ade011a392cd3309cbb_memgraph-pagerank-movie-animation.gif" alt="gif animation"/></p>
<p>PageRank can be used as a measure of influence that can be used on a variety of applications, not just on website and movie rankings.</p>
<h2>PageRank use cases</h2>
<p>If a social network or a search engine are not the products you are developing, check out how you can utilize PageRank in various other use cases or knowledge graphs built to infer knowledge in these niches.</p>
<h3>Recommendation Engines</h3>
<p>In Recommendation Engines, PageRank algorithm can be utilized <a href="https://memgraph.com/blog/five-recommendation-algorithms-no-recommendation-engine-is-whole-without">to recommend products</a> that match the target user’s preferences or are currently trending among all the other users. The algorithm considers the number of purchases and the reliability of the users who bought or reviewed the product.</p>
<p>A reliable user has a valid usage history and reviews, while unreliable users are fake customers whose purpose is to artificially inflate the metrics of certain products to make them appear more desirable.</p>
<h3>Data Lineage</h3>
<p>Knowing the importance of documents in the data lineage graph has two important applications: impact analysis and system reliability.</p>
<p>In events of adding new data property, migration or major updates, such as merging data sources after the acquisition, impact analysis can help assess the upstream and downstream impacts of such changes.</p>
<p>PageRank can also help identify high-impact nodes that are required to remain highly reliable because they are used in many other places throughout the organization.</p>
<h3>Fraud Detection</h3>
<p>In <a href="https://memgraph-staging.webflow.io/fraud-detection-insurance">fraud detection</a>, PageRank can be used as an additional feature (input) to a machine learning algorithm, to improve classification and reduce the false positives.</p>
<p>Users who are involved in <a href="https://memgraph.com/fraud-detection-card">fraudulent transactions with shared cards</a> are more likely to be fraudsters. So the node ranks involved in these particular transactions can be a piece of valuable information that can be used in machine learning models to predict and detect fraud among individuals that have connections with known fraudsters in the network.</p>
<p>Nodes can also be ranked based on how much money flows through each one to flag transactions that move much more money than what is average for a specific user.</p>
<h3>Identity and Access Management</h3>
<p>While managing permission, it is important to restrict access to sensitive assets, as their exploitation could cause expensive damage to the company. In many systems, due to a lack of time and resources, high permissions are often given to people that don’t actually need them.</p>
<p>PageRank can help identify which sensitive assets are accessible by many users to determine who, in fact, requires access and remove permissions for the rest of the users.</p>
<p><img src="https://assets.website-files.com/6141c89a3874c3702674a1c0/63d38ade011a393bb8309cba_memgraph-pagerank-classified-visual.png" alt="memgraph-pagerank-classified-visual"/></p>
<h3>Network Optimization</h3>
<p>Critical infrastructures are systems that can be represented as a network of highly interdependent nodes and relationships. Due to their nature, failure in one node may result in a cascade of failures in other nodes. PageRank can help identify nodes likely to fail and if they would cascade to other nodes in the network.</p>
<p><img src="https://assets.website-files.com/6141c89a3874c3702674a1c0/63d38ade011a39512b309cbd_memgraph-pagerank-network-optimization.png" alt="memgraph-pagerank-network-optimization"/></p>
<p>As energy infrastructure is also a network, using PageRank to identify vulnerabilities in the topology is invaluable and can save time, money and frustration for both companies and users.</p>
<h3>Cyber Security</h3>
<p>As it is not feasible to remove absolutely every threat in the system. PageRank can help calculate probabilities of certain malignant events causing severe attacks. Just as PageRank’s original purpose was to determine which sites will more probably be randomly clicked on due to all the other sites pointing at it, in the security system, it can be used to point out which attack will more probably be performed, and consequences of which attacks will be more severe.</p>
<h2>Implementation in Memgraph</h2>
<p><a href="https://memgraph.com/docs/mage/query-modules/cpp/pagerank">Memgraph has implemented PageRank using C++</a> which makes it ideal for use cases where performance is highly valuable. The graph needs to be directed, and the algorithm doesn’t take relationships’ weight into account.</p>
<p>Default arguments are the same as in the NetworkX PageRank implementation, so <a href="https://memgraph.com/memgraph-for-networkx">if you are a NetworkX user</a> it will be smooth sailing:</p>
<ul>
<li><code>max_iterations</code>: integer (default = 100) ➡ The maximum number of iterations within the PageRank algorithm.</li>
<li><code>damping_factor</code>: double (default = 0.85) ➡ PageRanks damping factor. This is the probability of continuing the random walk from a random node within the graph.</li>
<li><code>stop_epsilon</code>: double (default = 1e-5) ➡ Value used to terminate the iterations of PageRank. If the change from one iteration to another is lower than <code>stop_epsilon</code>, execution is stopped.</li>
</ul>
<p>To call PageRank in Memgraph use the following query:</p>
<pre><code>CALL pagerank.get()
YIELD node, rank
RETURN node, rank;
</code></pre>
<p>You can try it out on Playground, in the Sandbox of the <a href="https://playground.memgraph.com/sandbox/europe-gas-pipelines-scigrid">Europe gas pipelines</a> dataset. Check the nodes with the highest value (that could cause problems if they fail) with the following query:</p>
<pre><code>CALL pagerank.get()
YIELD node, rank
RETURN node, rank
ORDER BY node DESC;
</code></pre>
<p><img src="https://assets.website-files.com/6141c89a3874c3702674a1c0/63d38ade011a391d97309cbc_memgraph-pagerank-eu-gas-pipline.png" alt="memgraph-pagerank-eu-gas-pipline"/></p>
<p>As with all the other algorithms in the MAGE open-source library, you can run PageRank only on a specific group of nodes with the <a href="https://memgraph.com/docs/mage/how-to-guides/run-a-subgraph-module"><code>project()</code> function</a>. Save the sub-graph in a variable, then provide it as a first argument of the algorithm:</p>
<pre><code>MATCH p=(n:SpecificLabel)
WITH project(p) AS subgraph
CALL pagerank.get(subgraph)
YIELD node, rank
RETURN node, rank;
</code></pre>
<p>If your application is highly time-sensitive and nodes and relationships are arriving in a short period of time, use the <a href="https://memgraph.com/docs/mage/algorithms/dynamic-graph-analytics/pagerank-online-algorithm">Dynamic PageRank</a> which allows the preservation of the previously processed state. When entities are updated or new ones arrive in the graph, instead of restarting the algorithm over the whole graph, only the neighborhood objects of that arriving entity are processed at a constant time.</p>
<h2>Conclusion</h2>
<p>PageRank is a mature graph algorithm that hasn’t yet lost its relevance. Even more so, with the rise of graph database usage it will surely find its place in many management systems. For more examples of using PageRank check <a href="https://memgraph.com/blog?topics=PageRank">Memgraph’s blog posts on the same topic</a>, or explore more <a href="https://memgraph.com/blog?topics=Graph+Algorithms">graph algorithms</a>.</p>
<p>If you ever have any doubts about whether you are using PageRank correctly, or you need help with implementing it into your use case, a welcoming community at <a href="https://discord.com/invite/memgraph">Memgraph’s Discord server</a> will be more than happy to help you integrate graphs and algorithms into your system.</p>
</div></div>
  </body>
</html>
