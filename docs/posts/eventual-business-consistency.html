<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tidyfirst.substack.com/p/eventual-business-consistency">Original</a>
    <h1>Eventual Business Consistency</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p>I’m a geek speaking to you, a technology-savvy executive, about why we are doing things in a more complicated way than seems necessary. You may have heard the word “bi-temporal”. What’s that about?</p><p>In a nutshell, we want what’s recorded in the system to match the real world. We know this is impossible (delays, mistakes, changes) but are getting as close as we can. The promise is that if what’s in the system matches the real world as closely as possible, costs go down, customer satisfaction goes up, &amp; we are able to scale further faster.</p><p>Here’s how it works.</p><p>We’ll take addresses as our example. Addresses are useful for sending correspondence, calculating taxes, determining regulations, &amp; targeting marketing. Addresses, though, change.</p><p><strong>Simplest</strong><span>—we’ll just store the address in the database. When the address changes, we’ll change what’s in the database. Finito.</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png" width="1456" height="430" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/e43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:430,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:668086,&#34;alt&#34;:&#34;Change the database when the data changes&#34;,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:true,&#34;internalRedirect&#34;:null}" alt="Change the database when the data changes" title="Change the database when the data changes" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fe43f54dc-3b90-4ca1-90a4-3789943e157a_1500x443.png 1456w" sizes="100vw" fetchpriority="high"/></picture></div></a></figure></div><p>Not quite. The customer calls and says, “Why did you charge me California sales tax for this order? I don’t live in California. 🤬” We look in the database &amp; there it is, a California address. “I just moved you numbskulls. The order was sent to me when I was in Colorado.”</p><p>We’re terribly sorry for the mistake. Here’s a voucher for an ice cream cone.</p><p>Not a good experience for the customer. Not a good experience for us.</p><p><strong>Dated data</strong><span>—we choose to remember the history of all the addresses &amp; tag them with their date. This is more complicated. Now the customer service screens have to display a list of addresses instead of just one. The database will be bigger because we don’t throw addresses away. The code will be more complicated because we can no longer say, “Here’s a customer. What’s their address?” we have to say, “Here’s a customer. What’s their address on this date?”</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png" width="1456" height="368" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:368,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:null,&#34;alt&#34;:&#34;Add an entry to the database, tagged with the date, when the data changes&#34;,&#34;title&#34;:null,&#34;type&#34;:null,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="Add an entry to the database, tagged with the date, when the data changes" title="Add an entry to the database, tagged with the date, when the data changes" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5a615322-6e13-4ef0-a86e-af27f9f8bcd1_1482x375.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>Yes, it’s more complicated, but in return we get to answer our irate customer’s question. “Our records show that you placed the order on June 15 &amp; you moved on June 1.” Oh.</p><p>Okay, so date-tagged data is better for us at the cost of a bit more complexity. </p><p>However… What happens when a customer says, “Oh, by the way, I moved 2 months ago.”? What date do we use for the tag? Today? Then we won’t know that we need to recalculate 2 months’ worth of statements. Two months ago? Then we won’t be able to explain (to the customer, tax authorities, whoever) why we did what we did.</p><p>The fundamental, inescapable problem? What is in the system is a flawed reflection of what is going on in reality. We want what is in the system to be as close as possible to reality, but we also need to acknowledge that consistency between the system &amp; reality will only ever be approached, not achieved. The system will record changes in reality eventually, but by then we may have made decisions that need to be undone.</p><p>Sound difficult? Only a little more than what we’ve done already.</p><p><strong>Double-dated data</strong><span>—we tag each bit of business data with 2 dates:</span></p><ul><li><p><span>The date on which the data changed out in the real world, the </span><em>effective</em><span> date.</span></p></li><li><p><span>The date on which the system found out about the change, the </span><em>posting</em><span> date.</span></p></li></ul><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png" width="1456" height="264" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/a23bfe21-9587-4d80-8a89-544676e04850_2049x372.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:264,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:null,&#34;alt&#34;:&#34;Tag the data with both the date it changed &amp; the date we recorded the change&#34;,&#34;title&#34;:null,&#34;type&#34;:null,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="Tag the data with both the date it changed &amp; the date we recorded the change" title="Tag the data with both the date it changed &amp; the date we recorded the change" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa23bfe21-9587-4d80-8a89-544676e04850_2049x372.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p> This is the simple case where effective &amp; posting dates match.</p><p>(These 2 dates are why we call such systems “bi-temporal”. We have 2 timelines. One is the timeline of when things actually happened, the other the timeline of when we found out about it. The purpose of the 2 dates is to make sure that our system is eventually consistent with reality.)</p><p>Another way to look at the example above is to show the timelines explicitly.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png" width="1157" height="341" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:341,&#34;width&#34;:1157,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:null,&#34;alt&#34;:&#34;Graphical depiction of the same scenario with a timeline for effective date on top &amp; posting date on the bottom &amp; a labelled arrow for the change&#34;,&#34;title&#34;:null,&#34;type&#34;:null,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="Graphical depiction of the same scenario with a timeline for effective date on top &amp; posting date on the bottom &amp; a labelled arrow for the change" title="Graphical depiction of the same scenario with a timeline for effective date on top &amp; posting date on the bottom &amp; a labelled arrow for the change" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5df299cd-1688-4cad-8bb9-7dc3d96283ef_1157x341.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>Using effective &amp; posting dates together we can record all the strange twists &amp; turns of feeding data into a system.</p><p>“I forgot to tell you that I moved last year.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png" width="1456" height="201" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/c567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:201,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:650427,&#34;alt&#34;:&#34;The arrow slants left for a retroactive change&#34;,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="The arrow slants left for a retroactive change" title="The arrow slants left for a retroactive change" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fc567f8e2-a87f-4c14-9862-9f877eb000d9_2015x278.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>“You got last year’s address change wrong.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png" width="369" height="122.26894502228826" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/622d963e-7c24-48be-a733-4007875bfbc6_673x223.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:223,&#34;width&#34;:673,&#34;resizeWidth&#34;:369,&#34;bytes&#34;:189943,&#34;alt&#34;:&#34;The arrow slants left &amp; lands on the same effective date as the previous change&#34;,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="The arrow slants left &amp; lands on the same effective date as the previous change" title="The arrow slants left &amp; lands on the same effective date as the previous change" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F622d963e-7c24-48be-a733-4007875bfbc6_673x223.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>“I’m going to move next year.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png" width="381" height="155.73303167420815" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:271,&#34;width&#34;:663,&#34;resizeWidth&#34;:381,&#34;bytes&#34;:211181,&#34;alt&#34;:&#34;The arrow slants right for a prospective change&#34;,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="The arrow slants right for a prospective change" title="The arrow slants right for a prospective change" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5e08b3f5-b132-43e3-afe2-f1394d666d1b_663x271.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p>And this is the magic one, the nightmare scenario that just can’t be automatically handled otherwise.</p><p>“You got last year’s address change wrong. I actually moved 2 years ago.”</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png" width="407" height="156.9596412556054" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/f224af63-e6b8-426f-b7c1-9321af870a71_669x258.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:258,&#34;width&#34;:669,&#34;resizeWidth&#34;:407,&#34;bytes&#34;:208237,&#34;alt&#34;:&#34;One arrow crosses the other for a retroactive correction&#34;,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="One arrow crosses the other for a retroactive correction" title="One arrow crosses the other for a retroactive correction" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ff224af63-e6b8-426f-b7c1-9321af870a71_669x258.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a></figure></div><p><span>To accurately process this scenario we need to </span><em>undo</em><span> 2 years’ worth of processing, </span><em>redo</em><span> those years with the correct address, the continue from there. Without both dates we’re throwing the corrections into an account called “Manual Corrections” &amp; praying those corrections won’t cause problems in the future (praying in vain, as it turns out).</span></p><p>The goal of our design is to provide eventual business consistency, for what’s recorded in the system to match what’s happening in the real world as well as possible at a reasonable cost. Since perfect consistency is impossible:</p><ul><li><p>We save everything we learn.</p></li><li><p>We track when changes occurred in reality.</p></li><li><p>We track when we found out about those changes in the system.</p></li></ul><p>We invest additional programming complexity so we can:</p><ul><li><p>Reduce costs (fewer complaints, faster resolution).</p></li><li><p>Reduce mistakes.</p></li><li><p>Improve compliance.</p></li></ul><p>That’s the tradeoff. That’s what we’re doing we say we are bi-temporal. GeekSpeak for “better business”.</p><blockquote><p><span>I’d like to thank Massimo Arnoldi &amp; the </span><a href="https://www.lifeware.ch/" rel="">Lifeware</a><span> gang for teaching me bi-temporality, teaching me how to effectively visualize the two timelines, &amp; using bi-temporality to provide outstanding customer service to millions of insurance customers for decades. </span></p></blockquote><p><span>Bi-temporal data has been around since the early 1990’s, based on the pioneering work of </span><a href="https://en.wikipedia.org/wiki/Richard_T._Snodgrass" rel="">Richard Snodgrass</a><span>. Part of the reason it hasn’t taken off is because of the additional complexity it imposes on programmers. However, I think part of the reason it hasn’t become more popular, given the benefits it brings, is just the name. Hence my proposed rebranding to “eventual business consistency”.</span></p><p>Unfortunately, that name is itself a geeky analogy. If you already understand “eventual consistency”, the analogy makes immediate sense. If not, probably not so much. At the risk of “explaining the joke” (which never works, right?), here is the analogy.</p><p>Say we have a critically important database. We store the data on 2 machines so if one machine crashes we still have access to our data.</p><p>Say the network between the 2 machines is flaky (protip: it is). When we write data to one machine &amp; the network is down we can either:</p><ul><li><p>Wait for the network to come back, which imposes unpredictable delays. If the data absolutely, positively have to be consistent between the 2 machines we may be willing to pay this cost.</p></li><li><p>Write the data to one machine now &amp; catch up later. If we absolutely, positively need to be able to write data at all times but it’s okay if the data is a little out of sync, this is an acceptable tradeoff. We call this scenario “eventual consistency”.</p></li></ul><p>It’s this latter, “catch up later”, strategy that we draw our analogy from. Just as the 2 databases are consistent, but only eventually, our system data matches reality, but only eventually. We acknowledge that the system &amp; reality are a little out of whack but we’re transparent about inconsistencies &amp; fix them as well as possible as soon as possible.</p></div></div></div></article></div></div></div>
  </body>
</html>
