<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://davidamos.dev/the-rule-of-six/">Original</a>
    <h1>Want cleaner code? Use the rule of six</h1>
    
    <div id="readability-page-1" class="page"><article>
	
	<div>
		<!--kg-card-begin: html--><p>
    <em>This article contains affiliate links. See my <a href="https://davidamos.dev/affiliate-disclosure/">affiliate disclosure</a> for more information.</em>
</p><!--kg-card-end: html--><p>Everyone wants to write clean code. There are whole books about it!</p><p>But you don&#39;t need to read a book to write cleaner code right now. There&#39;s one &#34;trick&#34; that every coder can learn to make their code less confusing.</p><p>The key is:</p><h2 id="every-line-does-only-one-thing">Every line does only one thing</h2><p>One line, one task.</p><p>But don&#39;t go crazy with it.</p><figure><img src="https://davidamos.dev/content/images/2022/09/dont_be_a_purist.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/dont_be_a_purist.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/dont_be_a_purist.png 1000w, https://davidamos.dev/content/images/2022/09/dont_be_a_purist.png 1120w" sizes="(min-width: 720px) 720px"/><figcaption>Don&#39;t be like this.</figcaption></figure><p>Here&#39;s the main idea: Short lines of code require less brainpower to read than long ones. Code that&#39;s easy to read is easier to reason about. Programs with shorter lines are, in theory, easier to maintain.</p><p>But compact code can be cryptic. (Ever seen <a href="https://en.wikipedia.org/wiki/APL_(programming_language)">APL</a>?) And just because you <em>can</em> split a line doesn&#39;t mean you should.</p><p>In some languages, you can assign two values to two variables on one line:</p><pre><code>x, y = 2, 7</code></pre><p>You <em>could</em> put both assignments on their own line:</p><pre><code>x = 2
y = 7</code></pre><p>But, c&#39;mon. Do you really <em>need</em> to? How can you tell if a line should be split up?</p><h2 id="its-not-all-about-line-length">It&#39;s not all about line length</h2><p>Felienne Herman opens her book <em><a href="https://www.manning.com/books/the-programmers-brain?utm_source=somacdivad&amp;utm_medium=affiliate&amp;utm_campaign=book_hermans2_programmers_12_8_20&amp;a_aid=somacdivad&amp;a_bid=d7c7c538">The Programmer&#39;s Brain</a></em> with an undeniable truth: &#34;Confusion is a part of programming.&#34;</p><figure><img src="https://davidamos.dev/content/images/2022/09/wut-1.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/wut-1.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/wut-1.png 1000w, https://davidamos.dev/content/images/2022/09/wut-1.png 1120w" sizes="(min-width: 720px) 720px"/><figcaption>It probably means it&#39;s time to take a break.</figcaption></figure><p>Herman&#39;s book (which I highly recommend) explains how your brain&#39;s three memory functions work together to understand code:</p><ul><li><strong>Long-term memory (LTM):</strong> Stores information for long-term retrieval, such as keywords, syntax, and commonly used idioms and patterns.</li><li><strong>Short-term memory (STM):</strong> Stores new information for short-term retrieval (less than 30 seconds!), such as variable names and special values.</li><li><strong>Working memory (WM):</strong> Processes information from LTM and STM to draw conclusions and derive new knowledge.</li></ul><p>STM and WM are small. Both can only store <a href="https://en.m.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two">about 4 to 6 things</a> at a time! Overload them and you&#39;ve got a recipe for confusion.</p><figure><img src="https://davidamos.dev/content/images/2022/09/3-memory-functions.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/3-memory-functions.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/3-memory-functions.png 1000w, https://davidamos.dev/content/images/2022/09/3-memory-functions.png 1120w" sizes="(min-width: 720px) 720px"/><figcaption>How your brain processes information.</figcaption></figure><p>That gives us a rule for deciding if a line of code is too complex:</p><p><strong>A line of code containing 6+ pieces of information should be simplified.</strong></p><p>I call it the &#34;rule of six.&#34;</p><p>Here&#39;s an example in Python:</p><pre><code>map(lambda x: x.split(&#39;=&#39;)[1], s.split(&#39;?&#39;)[1].split(&#39;&amp;&#39;)[-3:])</code></pre><p>Is that hard for you to read? Me too. There&#39;s a good reason why.</p><p>You have to know what <code>map</code>, <code>lambda</code>, and <code>.split()</code> are. The variables <code>x</code> and <code>s</code>, the strings <code>&#39;=&#39;</code>, <code>&#39;?&#39;</code>, and <code>&#39;&amp;&#39;</code>, the index <code>[1]</code>, and the slice <code>[-3:]</code> all take up space in STM and WM. In total: ten things! Your brain can&#39;t keep up.</p><p>Or maybe <em>yours</em> can.</p><p>If so, you&#39;ve got some good experience under your belt.</p><p>Your brain &#34;chunks&#34; syntax like <code>s.split(&#39;?&#39;)[1]</code> into &#34;the part of the string to the right of the question mark.&#34; And you can reconstruct the code using information stored in your LTM. But you still only process a few chunks at a time. </p><p>Soâ€¦ we can identify when a line of code is too complex. <em>Now</em> what?</p><!--kg-card-begin: html--><center>
    <div>
        <div>
			<h3>Want more like this?</h3>
            <p>
                One email, every Saturday, with one actionable tip.</p>
        </div>
		
	</div>
</center><!--kg-card-end: html--><h2 id="if-code-is-confusing-break-it">If code is confusing, break it</h2><p>Break it into smaller pieces, that is!</p><p>There are two strategies I use to break up code. I call them SIMPLE and MORF.</p><p>The <strong>SIMPLE strategy</strong> <em>adds </em>lines of code to <em>decrease </em>cognitive load.</p><figure><img src="https://davidamos.dev/content/images/2022/09/SIMPLE.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/SIMPLE.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/SIMPLE.png 1000w, https://davidamos.dev/content/images/2022/09/SIMPLE.png 1120w" sizes="(min-width: 720px) 720px"/></figure><p>Let&#39;s apply SIMPLE to that nasty one-liner we saw earlier. Remove the second argument from <code>map()</code> and put it on its own line:</p><pre><code>query_params = s.split(&#39;?&#39;)[1].split(&#39;&amp;&#39;)[-3:]
map(lambda x: x.split(&#39;=&#39;)[1], query_params)</code></pre><p>It still might be hard to read. There are seven things to keep track of in the first line:</p><ul><li><code>query_params</code></li><li><code>s</code></li><li><code>.split()</code></li><li><code>&#39;?&#39;</code></li><li><code>[1]</code></li><li><code>&#39;&amp;&#39;</code></li><li><code>[-3:]</code></li></ul><p>But each line has fewer things to track than before. Your brain can process them more easily.</p><p>Apply SIMPLE again and move <code>s.split(&#39;?&#39;)[1]</code> to a new line:</p><pre><code>url_query_string = s.split(&#39;?&#39;)[1]
query_params = url_query_string.split(&#39;&amp;&#39;)[-3:]
map(lambda x: x.split(&#39;=&#39;)[1], query_params)</code></pre><p>Compare that to the original one-liner. Which one is easier to process?</p><p>The <strong>MORF strategy</strong> takes a different approach and groups code into functions.</p><figure><img src="https://davidamos.dev/content/images/2022/09/MORF.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/MORF.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/MORF.png 1000w, https://davidamos.dev/content/images/2022/09/MORF.png 1120w" sizes="(min-width: 720px) 720px"/></figure><p>Here&#39;s what MORF looks like applied to our one-liner:</p><pre><code>def query_params(url):
    return url.split(&#39;?&#39;)[1].split(&#39;&amp;&#39;)[-3:]

map(lambda x: x.split(&#39;=&#39;)[1], query_params(s))</code></pre><p>You can even combine MORF and SIMPLE:</p><pre><code>def query_params(url):
    query_string = url.split(&#39;?&#39;)[1]
    return query_string.split(&#39;&amp;&#39;)[-3:]
    
map(lambda x: x.split(&#39;=&#39;)[1], query_params(s))</code></pre><p>You don&#39;t have to understand the code to feel the effect. Each line is easier for your brain to process.</p><p>There&#39;s a bonus benefit, too!</p><p>Once you know that your WM and STM aren&#39;t overloaded, you know that any confusion left over is due to missing information in your LTM.</p><p>In other words, SIMPLE and MORF don&#39;t just help you write cleaner code. They help you identify knowledge gaps that you can improve with practice!</p><hr/><p>Want to know more about how your brain works while you&#39;re coding?</p><p>Check out <em>The Programmer&#39;s Brain</em> by Felienne Herman.</p><p>Get instant access through <a href="https://www.manning.com/books/the-programmers-brain?utm_source=somacdivad&amp;utm_medium=affiliate&amp;utm_campaign=book_hermans2_programmers_12_8_20&amp;a_aid=somacdivad&amp;a_bid=d7c7c538">Manning</a>, or order it from <a href="https://amzn.to/3rl3W1D">Amazon</a>.</p><figure><img src="https://davidamos.dev/content/images/2022/09/the_programmers_brain.png" alt="" loading="lazy" width="1120" height="630" srcset="https://davidamos.dev/content/images/size/w600/2022/09/the_programmers_brain.png 600w, https://davidamos.dev/content/images/size/w1000/2022/09/the_programmers_brain.png 1000w, https://davidamos.dev/content/images/2022/09/the_programmers_brain.png 1120w" sizes="(min-width: 720px) 720px"/></figure><hr/><h2 id="exercise">Exercise</h2><p>Look at the code we ended up with using SIMPLE:</p><pre><code>url_query_string = s.split(&#39;?&#39;)[1]
query_params = url_query_string.split(&#39;&amp;&#39;)[-3:]
map(lambda x: x.split(&#39;=&#39;)[1], query_params)</code></pre><p>One line still has over six &#34;ideas&#34; in it and should, according to the rule of six, be split up:</p><ul><li>Which line?</li><li>What are the &#34;ideas?&#34;</li><li>How would you split it up?</li><li>Did splitting it up make a big difference?</li></ul><!--kg-card-begin: html--><center>
    
</center><!--kg-card-end: html-->
			</div>
</article></div>
  </body>
</html>
