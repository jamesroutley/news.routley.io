<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.wesleyac.com/posts/snes-dev-3-input">Original</a>
    <h1>SNES Development Part 3: Input</h1>
    
    <div id="readability-page-1" class="page"><div>
            <p><em>This is part three of my series on SNES development. You may want to start with the <a href="https://blog.wesleyac.com/posts/snes-dev-1-getting-started">first post</a>.</em></p>

<p>In the <a href="https://blog.wesleyac.com/posts/snes-dev-2-background-graphics">previous part</a>, we got some graphics rendered to the screen! Now, we&#39;re going to read some input from the controller (&#34;joypad&#34;, in official Nintendo parlance) so we can move the graphics around.</p>

<p>On the whole, this is pretty simple — we&#39;ll enable &#34;auto-read&#34;, which will cause the input data to be read into the <code>JOY1L</code> and <code>JOY1H</code> registers, which we can then read from to get the state of all of the buttons.</p>

<p>We enable the auto-read feature by setting the 0th bit of the <code>NMITIMEN</code> register.</p>

<p>That&#39;s really all you need to know to get input working! You can see the <a href="https://github.com/WesleyAC/snes-dev/tree/main/part3">example code</a> and <a href="https://github.com/WesleyAC/snes-dev/compare/part3-base..part3">diff</a> as per usual.</p>

<p>The example code just waits to write the tile to the screen until the down button is pressed.</p>

<p>Now that you can read input, there&#39;s plenty of interesting stuff you can do! I&#39;d recommend:</p>

<ul>
<li>Change which button is used to render the tile.

<ul>
<li>Make a file that has constants like <code>JOYH_UP</code>, <code>JOYH_DOWN</code>, etc, so you don&#39;t have to keep looking up the bitmasks.</li>
</ul></li>
<li>Make different buttons render different tiles.</li>
</ul>

<p>It might be tempting to jump right in and try to make a tile you can move around, but that&#39;s not going to work very well just yet — since this code is running in a tight loop, it&#39;ll move way too fast to be controllable at all. The <a href="https://blog.wesleyac.com/posts/snes-dev-4-nmi-and-vblank">next part</a> will cover synchronizing with vblank so that we can get a fixed framerate.</p>

          </div></div>
  </body>
</html>
