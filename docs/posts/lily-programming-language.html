<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lily-lang.org">Original</a>
    <h1>Lily Programming Language</h1>
    
    <div id="readability-page-1" class="page"><div>
            <p>Lily is <strong>statically-typed</strong>, with an interpreter as a reference. Lily uses
<strong>reference counting</strong> for memory management with <strong>garbage collection</strong> as a
fallback.</p>
<p>Key features of Lily:</p>
<ul>
<li>Built-in template mode</li>
<li>Embed/extend in C</li>
<li>Single-inheritance classes</li>
<li>Exceptions</li>
<li>Generics</li>
<li>Algebraic data types (with <code>Option</code> and <code>Result</code> predefined).</li>
</ul>
<p>Here&#39;s a small example showing most of Lily&#39;s features:</p>
<pre><code>var math_ops = [&#34;+&#34; =&gt; (|a: Integer, b: Integer| a + b),
                &#34;-&#34; =&gt; (|a, b| a - b),
                &#34;*&#34; =&gt; (|a, b| a * b),
                &#34;/&#34; =&gt; (|a, b| a / b)]

define rpn(input: String): Result[String, List[Integer]]
{
    var values = input.split(&#34; &#34;)
    var stack: List[Integer] = []

    for v in values: {
        with v.parse_i() as Some(s): {
            s |&gt; stack.push
        else:
            if stack.size() &lt; 2: {
                return Failure(&#34;Stack underflow.&#34;)
            }

            var right = stack.pop()
            var left = stack.pop()
            try: {
                var op_fn = math_ops[v]
                var op_value = op_fn(left, right)
                stack.push(op_value)
            except KeyError:
                return Failure(&#34;Invalid operation {}.&#34;.format(v))
            except DivisionByZeroError:
                return Failure(&#34;Attempt to divide by zero.&#34;)
            except Exception:
                return Failure(&#34;Unexpected error from op {}.&#34;.format(v))
            }
        }
    }

    return Success(stack)
}

print(&#34;1 2 3 4 * + -&#34;  |&gt; rpn) # Success([-13])
print(&#34;2 2 2 2 * *&#34;    |&gt; rpn) # Success([2, 8])
print(&#34;*&#34;              |&gt; rpn) # Failure(&#34;Stack underflow.&#34;)
print(&#34;1 2 ?&#34;          |&gt; rpn) # Failure(&#34;Invalid operation ?.&#34;)
</code></pre>
        </div></div>
  </body>
</html>
