<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mitmproxy.org/posts/releases/mitmproxy9/">Original</a>
    <h1>Mitmproxy 9: WireGuard Mode</h1>
    
    <div id="readability-page-1" class="page"><div>
    <article>
    <header>
        
        <h5>28 Oct 2022<i>, Maximilian Hils
    <a href="https://twitter.com/maximilianhils">@maximilianhils</a>
</i>

</h5>
    </header>
    <section>
        <p>We‚Äôre excited to announce the release of mitmproxy 9, a free and open source interactive HTTPS proxy.
This release brings support for raw UDP and DTLS, a new WireGuard proxy mode, and major usability improvements.</p>
<h3 id="raw-udp-and-dtls-support">Raw UDP and DTLS Support</h3>
<figure><img src="https://mitmproxy.org/posts/releases/mitmproxy9/udp.png" alt="A UDP flow in the mitmweb UI"/><figcaption>
            <p>Raw UDP packets passing through mitmproxy.</p>
        </figcaption>
</figure>

<p>After adding <a href="https://docs.mitmproxy.org/dev/concepts-modes/#dns-server">DNS support</a> in mitmproxy 8.1,
<a href="https://github.com/meitinger">Manuel Meitinger (@meitinger)</a> now brings us support for raw UDP flows!
Just like raw TCP mode, the new raw UDP mode allows you to
intercept and modify any UDP-based protocol. To spice things up, <a href="https://github.com/kckeiks">Miguel Guarniz (@kckeiks)</a>
added automatic DTLS detection and interception on top, which makes it possible to peek into many encrypted UDP protocols.</p>
<h3 id="wireguard-mode-and-rust">WireGuard Mode (and Rust)</h3>
<figure>
<video controls="">
    <source src="mitmweb-wireguard-android.mp4#t=0.4" type="video/mp4"/>
</video>
<figcaption>Setting up an Android smartphone (right) to use mitmweb (left).</figcaption>
</figure>
<p><a href="https://github.com/decathorpe">Fabio Valentini (@decathorpe)</a> has been working on an experimental new proxy mode based on WireGuard.
This new mode makes transparent proxying as easy as running <code>mitmweb --mode wireguard</code> connecting to a WireGuard VPN.</p>
<p>This represents a significat usability improvement for transparent mode (no more iptables), and ‚Äì thanks to WireGuard‚Äôs fantastic mobile
support ‚Äì makes it possible to only proxy specific apps on Android. On top of that, it‚Äôs the first feature in mitmproxy that is implemented in Rust.
Head over to Fabio‚Äôs <a href="https://mitmproxy.org/posts/wireguard-mode/">blog post</a> to learn more!</p>
<h3 id="console-usability">Console Usability</h3>
<figure><img src="https://mitmproxy.org/posts/releases/mitmproxy9/quickhelp.png"/>
</figure>

<p>Similar to <code>nano</code> or <code>htop</code>, the mitmproxy console UI now shows a help bar with common keybindings at the bottom.
This makes it easier to learn the most important features,
but also helps to discover more advanced ones.
It looks like even <a href="https://github.com/mitmproxy/mitmproxy/pull/5652#issuecomment-1283748819">our most experienced users</a>
may learn something new! üéâ</p>
<h3 id="full-changelog">Full Changelog</h3>
<p>Since the last release, the project has had 187 commits by 31 contributors, resulting in 89 closed issues and 108
closed pull requests, all of this in just over 165 days.</p>
<ul>
<li>Mitmproxy binaries now ship with Python 3.11.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5678">#5678</a>, @mhils)</li>
<li>One mitmproxy instance can now spawn multiple proxy servers.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5393">#5393</a>, @mhils)</li>
<li>Add syntax highlighting to JSON and msgpack content view.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5623">#5623</a>, @SapiensAnatis)</li>
<li>Add MQTT content view.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5588">#5588</a>, @nikitastupin, @abbbe)</li>
<li>Setting <code>connection_strategy</code> to <code>lazy</code> now also disables early
upstream connections to fetch TLS certificate details.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5487">#5487</a>, @mhils)</li>
<li>Fix order of event hooks on startup.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5376">#5376</a>, @meitinger)</li>
<li>Include server information in bind/listen errors.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5495">#5495</a>, @meitinger)</li>
<li>Include information about lazy connection_strategy in related errors.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5465">#5465</a>, @meitinger, @mhils)</li>
<li>Fix <code>tls_version_server_min</code> and <code>tls_version_server_max</code> options.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5546">#5546</a>, @mhils)</li>
<li>Added Magisk module generation for Android onboarding.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5547">#5547</a>, @jorants)</li>
<li>Update Linux binary builder to Ubuntu 20.04, bumping the minimum glibc version to 2.31.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5547">#5547</a>, @jorants)</li>
<li>Add ‚ÄúSave filtered‚Äù button in mitmweb.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5531">#5531</a>, @rnbwdsh, @mhils)</li>
<li>Render application/prpc content as gRPC/Protocol Buffers
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5568">#5568</a>, @selfisekai)</li>
<li>Mitmweb now supports <code>content_view_lines_cutoff</code>.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5548">#5548</a>, @sanlengjingvv)</li>
<li>Fix a mitmweb crash when scrolling down the flow list.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5507">#5507</a>, @LIU-shuyi)</li>
<li>Add HTTP/3 binary frame content view.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5582">#5582</a>, @mhils)</li>
<li>Fix mitmweb not properly opening a browser and being stuck on some Linux.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5522">#5522</a>, @Prinzhorn)</li>
<li>Fix race condition when updating mitmweb WebSocket connections that are closing.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5405">#5405</a>, <a href="https://github.com/mitmproxy/mitmproxy/issues/5686">#5686</a>, @mhils)</li>
<li>Fix mitmweb crash when using filters.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5658">#5658</a>, <a href="https://github.com/mitmproxy/mitmproxy/issues/5661">#5661</a>, @LIU-shuyi, @mhils)</li>
<li>Fix missing default port when starting a browser.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5687">#5687</a>, @rbdixon)</li>
<li>Add docs for transparent mode on Windows.
(<a href="https://github.com/mitmproxy/mitmproxy/issues/5402">#5402</a>, @stephenspol)</li>
</ul>
<h4 id="deprecations">Deprecations</h4>
<ul>
<li>Deprecate <code>add_log</code> event hook. Users should use the builtin <code>logging</code> module instead.
See <a href="https://docs.mitmproxy.org/dev/addons-api-changelog/">the docs</a> for details and upgrade instructions.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5590">#5590</a>, @mhils)</li>
<li>Deprecate <code>mitmproxy.ctx.log</code> in favor of Python‚Äôs builtin <code>logging</code> module.
See <a href="https://docs.mitmproxy.org/dev/addons-api-changelog/">the docs</a> for details and upgrade instructions.
(<a href="https://github.com/mitmproxy/mitmproxy/pull/5590">#5590</a>, @mhils)</li>
</ul>
    </section>
    
</article>

</div></div>
  </body>
</html>
