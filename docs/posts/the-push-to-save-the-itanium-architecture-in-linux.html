<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/950466/0999d63fdf270781/">Original</a>
    <h1>The push to save the Itanium architecture in Linux</h1>
    
    <div id="readability-page-1" class="page"><div>
<!-- $Id: slink-none,v 1.2 2005-11-04 22:11:18 corbet Exp $ -->
<blockquote>
<div>
<h3>Welcome to LWN.net</h3>
<p>
The following subscription-only content has been made available to you 
by an LWN subscriber.  Thousands of subscribers depend on LWN for the 
best news from the Linux and free software communities.  If you enjoy this 
article, please consider <a href="https://www.wildlondon.org.uk/subscribe/">subscribing to LWN</a>.  Thank you
for visiting LWN.net!
</p></div>
</blockquote>
<p>
It is (relatively) easy to add code to the kernel; it tends to be much
harder to remove that code later.  The most recent example of this dynamic
can be seen in the story of the ia64 (&#34;Itanium&#34;) architecture, support for
which was removed during the 6.7 merge window.  That removal has left a
small group of dedicated ia64 users unhappy and clinging to a faint hope
that this support could return in a year&#39;s time.
</p><p>
At the end of the 1990s, it had become clear that 32-bit processors were
approaching the end of their useful life for many applications; in
particular, 32 bits is not enough to address the memory sizes that
were beginning to show up on higher-end systems.  In response, Intel
launched into a program that it called &#34;Merced&#34; to create the successor to
the x86.  It was a RISC architecture, wholly incompatible with anything
that Intel had sold before.  But it was going to be the Next Big Thing
because that was what Intel was doing.
</p><p>
At the time, information about this new architecture was being held under
nondisclosure agreements, and it was far from clear when Linux developers
would be able to port the kernel to Merced, if ever.  This was before
Intel&#39;s <a href="https://www.wildlondon.org.uk/1998/1001/">investment in Red Hat</a> that signaled the
beginning of the arrival of big money into Linux.  It seemed entirely
possible that Linux would be cut out of the processor that, we were all
reliably informed, would be the future of computing; choices would be
limited to Windows and proprietary Unix.
</p><p>
That, of course, is not how things worked out.  Intel became one of the
earliest corporate supporters of Linux and ensured, under a project known
as <a href="https://www.redhat.com/en/about/press-releases/35">Trillian</a>, that
Linux ran well on this new architecture, which was eventually named ia64
(or &#34;Itanium&#34; in the sales literature).  Initial Itanium support found its
way into the 2.3.43 development kernel release in early 2000.  The way was
clear for our bright Linux-on-Itanium future.
</p><p>
The only problem, of course, is that things didn&#39;t work out that way
either.  Early Itanium systems failed to perform at anything close to the
speeds that the hype had promised.  Meanwhile, AMD created the x86-64
architecture, adding 64-bit operation while maintaining as much
compatibility with the vast world of deployed 32-bit software as possible.
This new architecture quickly won over the market, forcing Intel to follow
in AMD&#39;s footsteps; Itanium ended up as a nearly forgotten footnote.  Some
systems were sold, and Intel continued manufacturing the CPUs for many
years, but their market was limited.  Red Hat dropped ia64 support in 2010.
</p><p>
Through all of this, the ia64 architecture code was maintained in the
kernel, but interest dropped rapidly.  In recent years, the ia64 code has
often been seen as a drag on kernel development in general.  After a bug
originating in the ia64 code was <a href="https://www.wildlondon.org.uk/Articles/920259/">tracked
down</a> in January, kernel developers started talking more seriously about
just removing support for that architecture entirely.  There was some
discussion at the time, with a few hobbyist users complaining about the
idea, but no changes were made then.
</p><p>
The topic came back in May, though, When Ard Biesheuvel <a href="https://lore.kernel.org/all/CAMj1kXFCMh_578jniKpUtx_j8ByHnt=s7S+yQ+vGbKt9ud7+kQ@mail.gmail.com/">pushed
for the removal of ia64 support</a> from the kernel, saying that the
architecture was impeding his work in the EFI subsystem:
</p><blockquote>
	As a maintainer, I feel uncomfortable asking contributors to build
	test their changes for Itanium, and boot testing is infeasible for
	most, even if some people are volunteering access to infrastructure
	for this purpose. In general, hacking on kernels or bootloaders
	(which is where the EFI pieces live) is tricky using remote access.
<p>
	The bottom line is that, while I know of at least 2 people (on cc)
	that test stuff on itanium, and package software for it, I don&#39;t
	think there are any actual users remaining, and so it is doubtful
	whether it is justified to ask people to spend time and effort on
	this.
</p></blockquote>
<p>
In that discussion, John Paul Adrian Glaubitz (who maintains the Debian
ia64 port) <a href="https://lore.kernel.org/all/ff58a3e76e5102c94bb5946d99187b358def688a.camel@physik.fu-berlin.de/">suggested</a>
that ia64 support should be kept until after the next long-term-support
kernel release, after which it could be dropped.  That would, he said,
maximize the amount of time in which ia64 would be supported for any
remaining users out there.  That is how it appears to have played out:
during the 6.7 merge window, <a href="https://git.kernel.org/linus/cf8e8658100d">ia64 support was
removed</a>.  The ia64 story is now done, as far as Linux is concerned.
</p><p>
Except that, seemingly, it is not.  Shortly after ia64 support disappeared
from the kernel, Frank Scheiner <a href="https://www.wildlondon.org.uk/ml/linux-kernel/8ff191a0-41fa-4f36-86e8-3d32ff3fe75c@web.de/">complained</a>
to the mailing list, saying that he and others had been working to resolve
the problems with this architecture and had been rewarded by seeing it
removed anyway.  Linus Torvalds <a href="https://www.wildlondon.org.uk/ml/linux-kernel/CAHk-=whFLZ67ffzt1juryCYcYz6eL_XjQF8WucDzwUR5H65+rA@mail.gmail.com/">responded</a>
that he might be willing to see it come back — eventually:
</p><blockquote>
	So I&#39;d be willing to come back to the &#34;can we resurrect it&#34;
	discussion, but not immediately - more along the lines of a &#34;look,
	we&#39;ve been maintaining it out of tree for a year, the other
	infrastructure is still alive, there is no impact on the rest of
	the kernel, can we please try again&#34;?
</blockquote>
<p>
Scheiner was <a href="https://www.wildlondon.org.uk/ml/linux-kernel/6e745433-d7eb-45df-b607-5589f1e04e86@web.de/">not
entirely pleased</a> with the removal of ia64 support, but Glaubitz <a href="https://www.wildlondon.org.uk/ml/linux-kernel/396c3aebd6a382aa5a9cbf333f93d876467e12e9.camel@physik.fu-berlin.de/">described</a>
the one-year plan as &#34;<q>very reasonable</q>&#34;.
</p><p>
So the hobbyists who want to keep Linux support for this architecture
alive, and who faced a difficult task before, have now seen the challenge
become more severe.  Maintaining support for an architecture out of tree is
not a task for the faint of heart, especially as the mainline kernel goes
forward with changes that had been held back by the need to keep ia64
working until now.  To complicate the picture, as Tony Luck <a href="https://lore.kernel.org/all/SJ1PR11MB60833AF98E6E9D3CD89AB393FC439@SJ1PR11MB6083.namprd11.prod.outlook.com/">pointed
out</a> in May, it is entirely possible that future kernel changes may,
when backported to the stable kernel updates, break ia64 in those kernels.
Since nobody working on the stable updates is able to test ia64 systems
(even if they wanted to), such problems could go unnoticed for some time.
</p><p>
One should also not miss the other condition that Torvalds placed on a
return of ia64: that &#34;<q>the other infrastructure is still alive</q>&#34;.  The
ia64 enthusiasts did not miss that, so it is unsurprising that they were
concerned when Adhemerval Zanella <a href="https://www.wildlondon.org.uk/ml/libc-alpha/445c5c7c-315f-495d-81ce-a5bdc30e2b8e@linaro.org/">proposed</a>
removing ia64 support from the GNU C Library (glibc) — one of the most
important pieces of other infrastructure.  Zanella pointed out that the
ia64 port is in poor shape, with a number of outstanding problems that seem
unlikely to be solved.  Scheiner <a href="https://www.wildlondon.org.uk/ml/libc-alpha/37fcf02a-6977-42ff-bed2-e1813f3f61ef@web.de/">answered</a>
that it might be possible to provide (limited) access to ia64 machines for
library testing, and asked for more time to address some of the problems.
</p><p>
Zanella, though, followed up with <a href="https://www.wildlondon.org.uk/ml/libc-alpha/20231104190225.2060378-1-adhemerval.zanella@linaro.org/">a
patch</a> to remove ia64 support.  Scheiner <a href="https://www.wildlondon.org.uk/ml/libc-alpha/fbdeb854-ca42-4835-8cdc-fb130ea2b747@web.de/">responded</a>:
&#34;<q>The speed this happens really surprises me and I hope there is no need
to rush with this removal</q>&#34;.  Other developers, though, including <a href="https://www.wildlondon.org.uk/ml/libc-alpha/e5e9a6f8-f391-51f5-f4d9-384810c3c3aa@codesourcery.com/">Joseph
Myers</a>, <a href="https://www.wildlondon.org.uk/ml/libc-alpha/8734xiyhgu.fsf@mid.deneb.enyo.de/">Florian Weimer</a>,
and glibc maintainer <a href="https://www.wildlondon.org.uk/ml/libc-alpha/a53a3413-bb07-9d29-d692-777f54ad3065@redhat.com/">Carlos
O&#39;Donell</a>, are all in favor of dropping ia64 support.  It would, thus,
not be surprising to see the removal happen as soon as the 2.39 release,
due in February, or at the latest in the release after that.
</p><p>
That, needless to say, raises the bar for ia64 supporters even further.
While one should never discount what a group of determined developers can
accomplish, it is probably safe to conclude that ia64 support is gone from
the kernel for good.  Some may see this as a disappointment, but it is also
a testament to how hard the community will work to keep an architecture
alive even though it never had a lot of users and has almost none now.
This support, arguably, could have been removed years ago without causing
any great discomfort, but taking code out of the kernel is hard.  As
has been seen here, though, it is occasionally possible.<br clear="all"/></p><table>
           <tbody><tr><th colspan="2">Index entries for this article</th></tr>
           <tr><td><a href="https://www.wildlondon.org.uk/Kernel/Index">Kernel</a></td><td><a href="https://www.wildlondon.org.uk/Kernel/Index#Architectures-ia64">Architectures/ia64</a></td></tr>
            <tr><td><a href="https://www.wildlondon.org.uk/Kernel/Index">Kernel</a></td><td><a href="https://www.wildlondon.org.uk/Kernel/Index#Releases-6.7">Releases/6.7</a></td></tr>
            </tbody></table></div></div>
  </body>
</html>
