<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://databasearchitects.blogspot.com/2024/02/ssds-have-become-ridiculously-fast.html">Original</a>
    <h1>SSDs have become fast, except in the cloud</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-1474926564874918617" itemprop="description articleBody">
<p>In recent years, flash-based SSDs have largely replaced disks for most storage use cases. Internally, each SSD consists of many independent flash chips, each of which can be accessed in parallel. Assuming the SSD controller keeps up, the throughput of an SSD therefore primarily depends on the interface speed to the host. In the past six years, we have seen a rapid transition from SATA to PCIe 3.0 to PCIe 4.0 to PCIe 5.0. As a result, there was an explosion in SSD throughput:
<img src="https://db.in.tum.de/~leis/dbtrends/ssd-bandwidth.svg" width="90%"/>  </p>

<p>
At the same time, we saw not just better performance, but also more capacity per dollar:
</p>
<p><img src="https://db.in.tum.de/~leis/dbtrends/ssd-capacity.svg" width="90%"/></p><p>
The two plots illustrate the power of a commodity market. The combination of open standards (NVMe and PCIe), huge demand, and competing vendors led to great benefits for customers. Today, top PCIe 5.0 data center SSDs such as the <a href="https://europe.kioxia.com/en-europe/business/ssd/enterprise-ssd.html">Kioxia CM7-R</a> or <a href="https://semiconductor.samsung.com/emea/ssd/enterprise-ssd/pm1743/">Samsung PM1743</a> achieve up to 13 GB/s read throughput and 2.7M+ random read IOPS. Modern servers have around 100 PCIe lanes, making it possible to have a dozen of SSDs (each usually using 4 lanes) in a single server at full bandwidth. For example, in our lab we have a single-socket Zen 4 server with 8 Kioxia CM7-R SSDs, which achieves 100GB/s (!) I/O bandwidth:</p>
<p><img src="https://db.in.tum.de/~leis/dbtrends/iostat.png" width="90%"/></p><p>
AWS EC2 was an early NVMe pioneer, launching the <a href="https://aws.amazon.com/blogs/aws/now-available-i3-instances-for-demanding-io-intensive-applications/">i3 instance</a> with 8 physically-attached NVMe SSDs in early 2017. At that time, NVMe SSDs were still expensive, and having 8 in a single server was quite remarkable. The per-SSD read (2 GB/s) and write (1 GB/s) performance was considered state of the art as well. Another step forward occurred in 2019 with the launch of <a href="https://aws.amazon.com/blogs/aws/new-the-next-generation-i3en-of-i-o-optimized-ec2-instances/">i3en instances</a>, which doubled storage capacity per dollar.</p>

<p>
Since then, several NVMe instance types, including i4i and im4gn, have been launched. Surprisingly, however, the performance has not increased; seven years after the i3 launch, we are still stuck with 2 GB/s per SSD. Indeed, the venerable i3 and i3en instances basically remain the best EC2 has to offer in terms of IO-bandwidth/$ and SSD-capacity/$, respectively. Personally, I find this very surprising given the SSD bandwidth explosion and cost reductions we have seen on the commodity market. At this point, the performance gap between state-of-the-art SSDs and those offered by major cloud vendors, especially in read throughput, write throughput, and IOPS, is nearing an order of magnitude. (Azure&#39;s top NVMe instances are only slightly faster than AWS&#39;s.)</p>

<p>
What makes this stagnation in the cloud even more surprising is that we have seen great advances in other areas. For example, during the same 2017 to 2023 time frame, EC2 network bandwidth exploded, increasing from 10 Gbit/s (c4) to 200 Gbit/s (c7gn). Now, I can only speculate why the cloud vendors have not caught up on the storage side:
</p><ul>
<li> One theory is that EC2 intentionally caps the write speed at 1 GB/s to avoid frequent device failure, given the total number of writes per SSD is limited. However, this does not explain why the read bandwidth is stuck at 2 GB/s.</li>
<li> A second possibility is that there is no demand for faster storage because very few storage systems can actually exploit tens of GB/s of I/O bandwidth. See our <a href="https://www.vldb.org/pvldb/vol16/p2090-haas.pdf">recent VLDB paper</a>. On the other hand, as long as fast storage devices are not widely available, there is also little incentive to optimize existing systems.</li>
<li> A third theory is that if EC2 were to launch fast and cheap NVMe instance storage, it would disrupt the cost structure of its other storage service (in particular EBS). This is, of course, the classic innovator&#39;s dilemma, but one would hope that one of the smaller cloud vendors would make this step to gain a competitive edge.</li>
</ul>


<p>
Overall, I&#39;m not fully convinced by any of these three arguments. Actually, I hope that we&#39;ll soon see cloud instances with 10 GB/s SSDs, making this post obsolete.
</p>

</div></div>
  </body>
</html>
