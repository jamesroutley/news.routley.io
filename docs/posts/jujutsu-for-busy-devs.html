<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://maddie.wtf/posts/2025-07-21-jujutsu-for-busy-devs">Original</a>
    <h1>Jujutsu for busy devs</h1>
    
    <div id="readability-page-1" class="page"><div><article><ul><li><em>Posted <time datetime="2025-07-21">21 July 2025</time></em></li><li><a href="https://maddie.wtf/tagged/jujutsu"><code>jujutsu</code></a></li><li><a href="https://maddie.wtf/tagged/development"><code>development</code></a></li><li><a href="https://maddie.wtf/tagged/guide"><code>guide</code></a></li></ul><nav><h2>Table of Contents</h2><ul id="toc-list"><li><a href="#elevator-pitch">Elevator Pitch</a></li><li><a href="#getting-started">Getting Started</a></li><li><a href="#how-to-use-it">How To Use It</a></li><ul><li><a href="#starting-a-new-revision">Starting A New Revision</a></li><li><a href="#making-changes">Making Changes</a></li><ul><li><a href="#navigating">Navigating</a></li></ul><li><a href="#branches-bookmarks">Branches (Bookmarks)</a></li><li><a href="#conflicts">Conflicts</a></li></ul></ul></nav><!-- TOC marker --><h2 id="elevator-pitch">Elevator Pitch</h2>
<p><a href="https://jj-vcs.github.io/jj/latest">Jujutsu</a> (<code>jj</code>) is a version control system with a
significantly simplified mental model and command-line interface compared to Git, without
sacrificing expressibility or power (in fact, you could argue Jujutsu is more powerful).
Stacked-diff workflows, seamless rebases, and ephemeral revisions are all natural with <code>jj</code>, and it
uses Git as a backend, which means you can begin using it non-destructively with a single command
and can always drop back down to Git if you need to.</p>
<!-- TOC marker --><h2 id="getting-started">Getting Started</h2>
<p><a href="https://jj-vcs.github.io/jj/latest/install-and-setup">Install the <code>jj</code> command line tool</a>. Make sure you set your authorship information, and
also don&#39;t skip the section on setting up shell completions (the newer dynamic completions are well
worth it).</p>
<pre><code><span><span><span>jj</span></span><span> config set<span><span> --</span>user</span> user.name <span><span>&#34;</span>Your Name<span>&#34;</span></span></span>
<span><span>jj</span></span><span> config set<span><span> --</span>user</span> user.email <span><span>&#34;</span>your.name@example.com<span>&#34;</span></span></span>
</span></code></pre>
<p>Then you&#39;ll need a repository to work with. You could use an existing repository of yours (although
I&#39;d recommend cloning a fresh copy, or at the very least making sure all your in-progress changes
are committed and pushed), or if you want to follow along more closely, you can clone <a href="https://github.com/maddiemort/maddie-wtf">the
repository containing this website&#39;s source code</a>.</p>
<p>To use an existing repository, <code>cd</code> into it and run:</p>
<pre><code><span><span><span>jj</span></span><span> git init<span><span> --</span>colocate</span> .</span>
</span></code></pre>
<p>To clone a new one, you can do the clone and the <code>jj</code> initialisation in one step with (e.g.):</p>
<pre><code><span><span><span>jj</span></span><span> git clone<span><span> --</span>colocate</span> git@github.com:maddiemort/maddie-wtf.git</span>
</span></code></pre>
<p>In either case, you&#39;ll end up with a Jujutsu repository alongside the existing Git repository, in
<code>.jj/</code>. This will not be visible to Git, and there&#39;s no risk of desynchronisation between the two:
Jujutsu uses the Git repo as its storage backend, so whenever you interact with either <code>jj</code> or
<code>git</code>, you&#39;re operating on the same data. The fact you&#39;re using Jujutsu rather than Git will not
impact anyone else who interacts with the repository.</p>

<p>After initialising the colocated Git repo, <code>jj</code> will suggest that you track all of the remote
branches that are associated with the ones you have checked out, and it helpfully provides a command
that will track all of them at once (something like <code>jj bookmark track main@origin</code>, but containing
each of the branch names that you have local checkouts of). Copy and paste it, and run it.</p>
<!-- TOC marker --><h2 id="how-to-use-it">How To Use It</h2>
<p>Jujutsu&#39;s command line interface has a much smaller surface area than Git, and its mental model is
simpler. That means there&#39;s much less to learn—this should be less intimidating than Git was when
you originally learned it—but it <em>does</em> mean you&#39;re going to have to adapt to a slightly different
workflow.</p>
<p>You might also find <a href="https://steveklabnik.github.io/jujutsu-tutorial">Steve&#39;s Jujutsu Tutorial</a> a helpful resource, but this page
will try to provide a higher-level overview for busy devs who just want to get on with it.</p>
<!-- TOC marker --><h3 id="starting-a-new-revision">Starting A New Revision</h3>
<p>When you start working on something new with Git, the first thing you&#39;d usually do is check out
<code>main</code>, pull the latest version of it from the remote, and then create a new branch off from there.
Jujutsu isn&#39;t as branch-oriented as Git is, so you don&#39;t start by creating a new branch—you just
place a new <em>revision</em> on top of an existing one and start working inside it.</p>
<p>First, get the latest changes from the remote:</p>
<pre><code><span><span><span>jj</span></span><span> git fetch</span>
</span></code></pre>
<p>Take a look at the repo history to orient yourself:</p>
<pre><code><span><span><span>jj</span></span><span> log</span>
</span></code></pre>
<p>You should see something like this (if you&#39;re doing this in a fresh clone of a repo, this is
probably <em>all</em> you&#39;ll see):</p>
<pre><span></span><span>@</span>  <span></span><span>rx</span><span>lwrvrr</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>19 minutes ago</span><span> </span><span>5</span><span>1931bfc</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
<span></span><span>◆</span>  <span></span><span>rt</span><span>tmyopz</span> <span>blog@maddie.wtf</span> <span>23 hours ago</span> <span>main</span> <span>git_head()</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>In an attempt to be helpful, Jujutsu has done something that&#39;s actually a bit inconvenient for this
tutorial: it created a new empty revision for you on top of <code>main</code>. Since in your typical workflow
you would probably start out somewhere else in the history, this doesn&#39;t really fit with what I&#39;m
trying to teach—so for now, <strong>ignore that first entry</strong>.</p>
<p>The second entry is the important one. This is an entry in the log for a revision with ID
<code><strong>rt</strong>tmyopz</code>, authored by <code>blog@maddie.wtf</code> 23 hours ago, and it&#39;s got
<code>main</code> pointing to it.</p>
<p>You&#39;ll also notice that there&#39;s a commit hash associated with this,
<code><strong>9</strong>0ee7425</code>, and that&#39;s the same one you&#39;d see if you ran <code>git log</code>. The
reason for the two different kinds of ID is that Jujutsu assigns an identifier to each revision,
which it keeps stable even as the underlying Git commit might change (it will make more sense later
why the Git hash might change).</p>
<p>Any of those identifiers can be used to refer to this revision (<code>rttmyopz</code>, or its highlighted
prefix <code>rt</code>; <code>90ee7425</code>, or its highlighted prefix <code>9</code>; or <code>main</code>). Since, semantically, we want our
new changes to be based on the current tip of <code>main</code> no matter what revision that is, let&#39;s use that
identifier to create a new revision:</p>
<pre><code><span><span><span>jj</span></span><span> new main</span>
</span></code></pre>
<p>Looking at the log reveals what happened:</p>
<pre><span></span><span>@</span>  <span></span><span>o</span><span>zpszrnr</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>3 seconds ago</span><span> </span><span>c</span><span>0f838b6</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>23 hours ago</span> <span>main</span> <span>git_head()</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>A new revision has been created on top of the one at the tip of <code>main</code>, and it&#39;s been given the
identifier <code><strong>o</strong>zpszrnr</code> (whose shortest unique prefix is <code>o</code>, so I&#39;ll
refer to it as such from now on). The <code>@</code> on the left hand side marks that this is the working copy
(current revision)—any changes we make are going to become part of this revision. We can use <code>@</code> in
commands to refer to whatever the current revision is at any given time.</p>
<p>You&#39;ll notice that the revision I told you to ignore earlier (<code>rxlwrvrr</code>) is gone. I&#39;ll explain why
it disappeared <a href="#navigating">in the next section</a>. We <em>could</em> have just used that one, but I asked
you to run <code>jj new</code> in order to demonstrate the full process of beginning a new set of changes on
top of <code>main</code>.</p>

<!-- TOC marker --><h3 id="making-changes">Making Changes</h3>
<p>As soon as you edit a file, the changes will be included in whatever revision you&#39;re currently
editing—there&#39;s no separate staging area in Jujutsu. I&#39;ll make a change to <code>README.md</code> and then look
at the log again.</p>
<pre><span></span><span>@</span>  <span></span><span>o</span><span>zpszrnr</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>1 second ago</span><span> </span><span>0</span><span>88e997b</span><span></span>
│  <span></span><span>(no description set)</span><span></span>
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span>git_head()</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>A few things have changed. The revision is no longer marked as empty, because the change I just made
is in it. If you&#39;re particularly sharp-eyed, you might notice that the Git commit hash immediately
changed (but the Jujutsu revision ID remained the same). That&#39;s because as soon as changes were
made, Jujutsu took care of keeping that synchronised with the underlying Git repo in the background
by creating a new commit (you can <code>git show</code> it if you want!)—but those details are all abstracted
away from us.</p>
<p>Let&#39;s say we&#39;re finished with this change and want to move on to the next revision (the same point
at which you would have run <code>git commit</code> with Git). Jujutsu <em>does</em> have a <code>jj commit</code> command, but
it&#39;s just a helper that combines two operations: a <code>jj describe</code> and a <code>jj new</code>. Doing the two steps
individually will help build your mental model:</p>
<pre><code><span><span><span>jj</span></span><span> describe<span><span> -</span>m</span> <span><span>&#34;</span>chore: add a line to README.md<span>&#34;</span></span></span>
</span></code></pre>
<p>The log now shows:</p>
<pre><span></span><span>@</span>  <span></span><span>o</span><span>zpszrnr</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>2 seconds ago</span><span> </span><span>0</span><span>af545e5</span><span></span>
│  <span>chore: add a line to README.md</span>
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span>git_head()</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>We&#39;ve added a message to the revision, but we&#39;re still editing it (see the <code>@</code> on the left?). To
move on to the next revision, we can run <code>jj new o</code> (or just <code>jj new</code>, since it defaults to creating
a new revision on top of the current revision).</p>
<pre><span></span><span>@</span>  <span></span><span>k</span><span>krnnmxs</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>1 second ago</span><span> </span><span>c</span><span>50fbae5</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
○  <span></span><span>o</span><span>zpszrnr</span> <span>blog@maddie.wtf</span> <span>29 seconds ago</span> <span>git_head()</span> <span></span><span>0</span><span>af545e5</span>
│  chore: add a line to README.md
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>Hopefully now you can see why <code>jj commit</code> is just <code>jj describe</code> followed by <code>jj new</code>—it would have
done exactly what we just did.</p>
<!-- TOC marker --><h4 id="navigating">Navigating</h4>
<p>I&#39;ll take a moment for a brief interlude to teach you a few things about how to navigate around with
Jujutsu.</p>
<ul>
<li>Whenever you run <code>jj new</code>, Jujutsu creates a new empty revision—but if you ever move somewhere
else and that revision is still empty and still has no description, it will be automatically
abandoned. You therefore don&#39;t have to worry about littering your history with a bunch of empty
revisions. You can try this right now in the tutorial with no ill effects—run <code>jj new main</code>, look
at the log, then run <code>jj new o</code> again!</li>
<li>You can manually abandon a revision, even if it contains changes and/or has a description, with
<code>jj abandon &lt;rev ID&gt;</code>. This is a destructive operation—it will abandon the rev without
confirmation—but you can undo it with <code>jj op undo</code>. See the <a href="https://jj-vcs.github.io/jj/latest/operation-log/">docs for the operation
log</a> if you want to know more about undoing.</li>
<li>As an alternative to creating new revisions, you can also move to <em>inside</em> an existing revision by
running <code>jj edit &lt;rev ID&gt;</code>. If you were to run <code>jj edit o</code> at this point in the tutorial and check
the log, you&#39;d see an <code>@</code> next to <code>o</code>, indicating it&#39;s the current revision (you&#39;re editing it).
Then to get back to where you were, run <code>jj new o</code> again.</li>
<li>You can also refer to revisions in these commands using <a href="https://jj-vcs.github.io/jj/latest/revsets/">revset
expressions</a> rather than by their IDs. Some useful
ones to know:
<ul>
<li><code>@</code> - the current revision</li>
<li><code>x-</code> - the parent(s) of some revision <code>x</code> (&#34;the revision before it&#34; in the simple case)</li>
<li><code>y+</code> - the child(ren) of <code>y</code> (&#34;the revision after it&#34; in the simple case)</li>
<li><code>z::</code> - all descendants of <code>z</code>, including <code>z</code></li>
</ul>
</li>
</ul>
<!-- TOC marker --><h3 id="branches-bookmarks">Branches (Bookmarks)</h3>
<p>You&#39;ll have noticed that at no point so far did we ever think about creating a branch. That&#39;s
because Jujutsu&#39;s relationship to branches is a bit different to Git&#39;s—they&#39;re just pointers that
you move around so they point to whichever revision you want them to at a given time. There&#39;s no
concept of &#34;being on a branch&#34; in Jujutsu, you&#39;re always just editing a revision.</p>
<p>In fact, Jujutsu&#39;s branches are different enough from Git&#39;s that they were recently renamed to
&#34;bookmarks&#34; instead.</p>
<p>Let&#39;s say that our revision, <code>o</code>, contains the only changes we needed to make for this particular
unit of work, and we&#39;re ready to create a PR. In order to share our changes, we&#39;ll need to create a
bookmark:</p>
<pre><code><span><span><span>jj</span></span><span> bookmark create add-readme-line<span><span> -</span>r</span> o</span>
</span></code></pre>
<p>This command says &#34;create a new bookmark called <code>add-readme-line</code> pointing to the revision <code>o</code>&#34;. The
log reflects that:</p>
<pre><span></span><span>@</span>  <span></span><span>k</span><span>krnnmxs</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>3 minutes ago</span><span> </span><span>c</span><span>50fbae5</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
○  <span></span><span>o</span><span>zpszrnr</span> <span>blog@maddie.wtf</span> <span>3 minutes ago</span> <span>add-readme-line</span> <span>git_head()</span> <span></span><span>0</span><span>af545e5</span>
│  chore: add a line to README.md
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>There&#39;s now an <code>add-readme-line</code> bookmark pointing to the revision <code>o</code>. If we want to push our
changes, now we can:</p>
<pre><code><span><span><span>jj</span></span><span> git push<span><span> -</span>b</span> add-readme-line<span><span> --</span>allow-new</span></span>
</span></code></pre>
<p>The <code>--allow-new</code> arg tells Jujutsu it&#39;s okay to create a new branch on the remote (this
confirmation is necessary because <code>jj git push</code> without a bookmark name will try to push all
bookmarks that appear in the ancestors of the current revision).</p>
<p>The workflow from here on is the same as with Git—if you&#39;re using GitHub, the remote will reply with
a message in your terminal containing a shortcut link straight to creating a PR with the new branch,
just like usual.</p>
<p>Let&#39;s say you realise you need to add some more changes to your PR. I&#39;ll run through the first few
commands all at once, since they&#39;re the same as above.</p>
<pre><code><span><span><span>jj</span></span><span> log</span>

<span><span>jj</span></span><span> new o</span>

<span></span><span><span>&lt;</span>make some changes<span>&gt;</span>
</span>
<span><span>jj</span></span><span> commit<span><span> -</span>m</span> <span><span>&#34;</span>chore: fix typo in README.md<span>&#34;</span></span></span>
</span></code></pre>
<p>Here&#39;s the state of our repository now:</p>
<pre><span></span><span>@</span>  <span></span><span>w</span><span>lwmnxxn</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>2 seconds ago</span><span> </span><span>4</span><span>0959102</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
○  <span></span><span>k</span><span>krnnmxs</span> <span>blog@maddie.wtf</span> <span>2 seconds ago</span> <span>git_head()</span> <span></span><span>07</span><span>602d4e</span>
│  chore: fix typo in README.md
○  <span></span><span>o</span><span>zpszrnr</span> <span>blog@maddie.wtf</span> <span>5 minutes ago</span> <span>add-readme-line</span> <span></span><span>0a</span><span>f545e5</span>
│  chore: add a line to README.md
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>Most of this won&#39;t be surprising, but one important thing to notice is that the bookmark <em>didn&#39;t
move</em>—Jujutsu bookmarks don&#39;t automatically move when you commit, you just move them around yourself
whenever they need to move. So let&#39;s do that:</p>
<pre><code><span><span><span>jj</span></span><span> bookmark move add-readme-line<span><span> --</span>to</span> k</span>
</span></code></pre>
<p>The log:</p>
<pre><span></span><span>@</span>  <span></span><span>w</span><span>lwmnxxn</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>1 minute ago</span><span> </span><span>4</span><span>0959102</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
○  <span></span><span>k</span><span>krnnmxs</span> <span>blog@maddie.wtf</span> <span>1 minute ago</span> <span>add-readme-line*</span> <span>git_head()</span> <span></span><span>07</span><span>602d4e</span>
│  chore: fix typo in README.md
○  <span></span><span>o</span><span>zpszrnr</span> <span>blog@maddie.wtf</span> <span>6 minutes ago</span> <span>add-readme-line@origin</span> <span></span><span>0a</span><span>f545e5</span>
│  chore: add a line to README.md
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<p>The asterisk after the bookmark name indicates that the bookmark has diverged from the remote branch
it&#39;s tracking (the remote branch is listed separately on the revision below as
<code>add-readme-line@origin</code>). We can sort that out easily:</p>
<pre><code><span><span><span>jj</span></span><span> git push</span>
</span></code></pre>
<pre><span></span><span>@</span>  <span></span><span>w</span><span>lwmnxxn</span><span> </span><span>blog@maddie.wtf</span><span> </span><span>1 minute ago</span><span> </span><span>4</span><span>0959102</span><span></span>
│  <span></span><span>(empty)</span><span> </span><span>(no description set)</span><span></span>
○  <span></span><span>k</span><span>krnnmxs</span> <span>blog@maddie.wtf</span> <span>1 minute ago</span> <span>add-readme-line</span> <span>git_head()</span> <span></span><span>07</span><span>602d4e</span>
│  chore: fix typo in README.md
○  <span></span><span>o</span><span>zpszrnr</span> <span>blog@maddie.wtf</span> <span>7 minutes ago</span> <span></span><span>0a</span><span>f545e5</span>
│  chore: add a line to README.md
<span></span><span>◆</span>  <span></span><span>r</span><span>ttmyopz</span> <span>blog@maddie.wtf</span> <span>1 day ago</span> <span>main</span> <span></span><span>9</span><span>0ee7425</span>
│  fix: add missed code tag around links to tags
~
</pre>
<!-- TOC marker --><h3 id="conflicts">Conflicts</h3>
<p>Jujutsu handles conflicts in a much less panicky way than Git does: whenever conflicts occur for any
reason, it just marks the conflicted revisions and any of their children with a <code>conflicted</code> marker
and then lets you continue with your day.</p>
<p>Inside those conflicted revisions, there will be conflict markers in the files that need them, and
the way you resolve conflicts is simply to make the conflict markers go away by editing those files.
You can do this in one of two ways: either directly edit a conflicted revision with <code>jj edit &lt;revision ID&gt;</code>, or create a new revision on top of the conflicted one with <code>jj new &lt;revision ID&gt;</code>,
resolve the conflicts in that new revision, and then squash the resolution changes in with <code>jj squash</code>.</p>

</article></div></div>
  </body>
</html>
