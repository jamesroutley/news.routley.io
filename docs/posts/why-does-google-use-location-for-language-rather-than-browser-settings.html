<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://smaller.fish/posts/language">Original</a>
    <h1>Why does Google use location for language rather than browser settings?</h1>
    
    <div id="readability-page-1" class="page"><div role="main">
      
  
  <article>

    <div>
      <p><span> 10 minutes read</span>
        <span>— 1996 words</span>
      </p><p>“Internationalization” is, roughly speaking, geek-speak for the process of supporting multiple languages on a website. For a company doing business in multiple countries, it needs to be done - otherwise you’ll risk losing the attention of people who don’t speak your development team’s native language. There are standards defined that specify what language to serve a website in to a particular user. So why do some of the world’s biggest sites get it wrong? Let’s take a tour of the landscape.</p>
<p>First of all, what is the standard? Let’s quote from the MDN article which describes the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code> header</a>:</p>
<blockquote>
<p>The Accept-Language request HTTP header indicates the natural language and locale that the client prefers. The server uses content negotiation to select one of the proposals and informs the client of the choice with the Content-Language response header. Browsers set required values for this header according to their active user interface language. Users rarely change it, and such changes are not recommended because they may lead to fingerprinting.</p>
</blockquote>
<p>This is pretty simple stuff. The user’s browser sets the Accept-Language header, based upon the operating system settings. This header is sent to websites to tell them what language to serve the site in. In other words, you tell your computer that you want everything to be English, or Dutch, or Spanish; your computer then passes that information on to websites when you connect to them, and you should get the website back in the language of your preference, if you are in their target market.</p>
<p>And yet, in the alternate reality that we all live in, if you take your laptop from one country to another then suddenly some websites will start serving you content in a different language, based solely on your <em>location</em> having changed. This shouldn’t happen, since the language preferences in your browser haven’t changed when you entered the new country. While clearly there is a general correlation between average audience language and location, it is <em>not</em> true to say that location equals language. It is in fact a fallacy to make that assumption.</p>

<p>I did a lot of testing to see how widespread this issue is. A quick summary of my setup:</p>
<ul>
<li>In Chrome’s and Firefox’s browser settings, the only language I specify is English</li>
<li>I live in Costa Rica</li>
<li>My ISP connects to fiber that runs from Costa Rica directly to the west coast of the US</li>
<li>My IP address geolocates to San Jose, Costa Rica (the capital city.)</li>
</ul>
<p><img src="https://smaller.fish/images/language-1.png" alt="Browser Settings"/></p>
<p>Using the handy <a href="https://www.whatismybrowser.com/detect/what-http-headers-is-my-browser-sending">WhatIsMyBrowser.com</a> I can see that the requested language is being sent as I specified:</p>
<p><img src="https://smaller.fish/images/language-2.png" alt="Accept-Language"/></p>

<p>Google is the most prominent offender. If I’m signed in to my browser profile in Chrome, the search engine is served in English. No problem. The moment I try to access it from incognito, or Firefox, however, I get the Spanish language version of Google.</p>
<p><img src="https://smaller.fish/images/language-3.png" alt="Google Is Wrong"/></p>
<p>Bing doesn’t do this.</p>
<p><img src="https://smaller.fish/images/language-4.png" alt="Bing Is Right"/></p>
<p>Neither do Facebook, Amazon, Instagram, Pinterest. Even Youtube (of course, a Google property) gets it right! (And yes, all of these sites switch to serving Spanish if I switch the browser language.)</p>
<p><img src="https://smaller.fish/images/language-5.png" alt="Correct"/></p>
<p><img src="https://smaller.fish/images/language-6.png" alt="Correct"/></p>
<p><img src="https://smaller.fish/images/language-9.png" alt="Correct"/></p>
<p><img src="https://smaller.fish/images/language-10.png" alt="Correct"/></p>
<p><img src="https://smaller.fish/images/language-11.png" alt="Correct"/></p>
<p>Google have the same issue on their auth service.</p>
<p><img src="https://smaller.fish/images/language-12.png" alt="False"/></p>
<p>It gets even worse though. When I search Spanish language Google (which, remember, is the version of Google I get when I’m not signed into my profile, despite asking for English via browser settings), I get…wait for it…Spanish language results, which are completely different sites from those that I’d get had I searched English language Google.</p>
<p><img src="https://smaller.fish/images/language-13.png" alt="WTF Google"/></p>
<p><img src="https://smaller.fish/images/language-14.png" alt="WTF Google"/></p>
<p>Granted that one of these results is an ad, but presumably the reason that it didn’t show in the Spanish Google version is that they filtered me out from English language ads, doubling down on the location equals language fallacy.</p>
<p>Furthermore, as we all know, many users of the web just type site names into Google in order to navigate the web; the location bar is a weird mystery to them. If I search for Facebook in Spanish language Google and click on the first result, now Facebook is in the wrong language, because Google sends you to the localized version.</p>
<p><img src="https://smaller.fish/images/language-15.png" alt="WTF Google"/></p>
<p>It does the same thing with the US embassy site (which serves in English from English Google, and serves in English if I navigate directly to it.) Might be a problem for travelers, no?</p>
<p><img src="https://smaller.fish/images/language-16.png" alt="WTF Google"/></p>
<p>Or with Wikipedia (which, again, does the right thing if you navigate directly to it):</p>
<p><img src="https://smaller.fish/images/language-25.png" alt="WTF Google"/></p>
<p>This <em>also</em> happens if I type “Facebook” or “US Embassy” directly into the location bar of Chrome (with Google as my search provider). Granted that this isn’t the end of the world between Spanish and English, but if you were in a country with a completely different alphabet, you might be totally lost. This isn’t a new problem with Google. I remember visiting France in 2017, and having the same problem then on my laptop which only hours before was giving me results in English.</p>

<p>Google isn’t fully alone in this, although almost all startup sites (that I tried) get it right.</p>
<h2 id="microsoft">Microsoft</h2>
<p>While we saw that Bing does the right thing, above, Microsoft is horrendously inconsistent. Microsoft.com and Microsoft365.com are wrong:</p>
<p><img src="https://smaller.fish/images/language-17.png" alt="WTF Microsoft"/></p>
<p><img src="https://smaller.fish/images/language-18.png" alt="WTF Microsoft"/></p>
<p>And yet Office.com is correct:</p>
<p><img src="https://smaller.fish/images/language-19.png" alt="WTF Microsoft"/></p>
<p>Xbox.com looks promising:</p>
<p><img src="https://smaller.fish/images/language-24.png" alt="WTF Microsoft"/></p>
<p>…but when I switch to Spanish it’s still served in English, AND it fails to find the main content page. (Note the es-CR in the URL; since I specified the language as “Spanish” rather than “Spanish (Latin America)”, that indicates that they’re geolocating.)</p>
<p><img src="https://smaller.fish/images/language-35.png" alt="WTF Microsoft"/></p>
<p>Yammer, another Microsoft property, hedges its bets. Main site content is based on Accept-Language, but they pop up a language chooser based on geolocation, just in case. This is justifiable.</p>
<p><img src="https://smaller.fish/images/language-37.png" alt="WTF Microsoft"/></p>
<h2 id="yahoo">Yahoo</h2>
<p>Yahoo (remember them?) do it wrong.</p>
<p><img src="https://smaller.fish/images/language-22.png" alt="WTF Yahoo"/></p>
<h2 id="ebay--paypal">EBay &amp; Paypal</h2>
<p>Both EBay and Paypal equate language with location. Of course they’re separate companies these days; but it’s an interesting commonality - maybe there’s some shared infrastructure deep in the codebase. Venmo and Cash.app both get it right.</p>
<p><img src="https://smaller.fish/images/language-26.png" alt="WTF Ebay/Paypal"/></p>
<p><img src="https://smaller.fish/images/language-27.png" alt="WTF Ebay/Paypal"/></p>
<h2 id="ibm-vs-red-hat-deloitte-vs-accenture">IBM (vs Red Hat), Deloitte (vs Accenture)</h2>
<p>IBM gets it wrong.</p>
<p><img src="https://smaller.fish/images/language-28.png" alt="WTF IBM"/></p>
<p>Red Hat on the other hand seems correct…</p>
<p><img src="https://smaller.fish/images/language-29.png" alt="WTF IBM"/></p>
<p>…but it turns out (when I switch language to Spanish) that they only got as far as internationalizing their cookie banner before giving up:</p>
<p><img src="https://smaller.fish/images/language-36.png" alt="WTF IBM"/></p>
<p>Deloitte wrong.</p>
<p><img src="https://smaller.fish/images/language-30.png" alt="WTF IBM"/></p>
<p>Accenture, despite their $50 billion in revenue, haven’t bothered to internationalize, and serve English content for both Spanish and English requests.</p>
<p><img src="https://smaller.fish/images/language-31.png" alt="WTF IBM"/></p>
<h2 id="dhl-vs-fedex--ups">DHL (vs Fedex &amp; UPS)</h2>
<p>DHL wrong.</p>
<p><img src="https://smaller.fish/images/language-32.png" alt="WTF DHL"/></p>
<p>Fedex don’t trust browser settings, and always serve an English language page asking you to choose your locale. They <em>also</em> evidently don’t trust geolocation, so they have a crappy default selection of your location:</p>
<p><img src="https://smaller.fish/images/language-33.png" alt="WTF DHL"/></p>
<p>…as do UPS:</p>
<p><img src="https://smaller.fish/images/language-34.png" alt="WTF DHL"/></p>
<h2 id="walmart">Walmart</h2>
<p>Walmart, despite having a physical presence in Latin America, serve only the language of Freedom, no matter what browser langauge you request:</p>
<p><img src="https://smaller.fish/images/language-8.png" alt="WTF Walmart"/></p>
<h2 id="hbo-max">HBO Max</h2>
<p>HBO Max of course is its usual half-assed dumpster fire. Despite the app being in English, it sends me Spanish language notifications, and some error messages appear in Spanish.</p>
<h2 id="netflix">Netflix</h2>
<p>For different technical reasons, Netflix gets subtitles horrendously wrong. My Netflix profile is set to English.</p>
<p>Let’s say I wanted to watch Parasite, an excellent Korean language movie, and need subtitles. Guess what:</p>
<p><img src="https://smaller.fish/images/language-20.png" alt="WTF Netflix"/></p>
<p>Start watching Parasite in the US, and you’ll get English as an option under subtitles. On the other hand, Squid Game is fine.</p>
<p><img src="https://smaller.fish/images/language-21.png" alt="WTF Netflix"/></p>
<p>This, Netflix support insisted, is due to the licensing of their catalog. Seems like a poor implementation to me though.</p>
<p>There’s another, more esoteric problem with subtitles. Suppose I’m watching a movie with some Costa Rican friends, and they insist that we watch in English (they are relatively fluent in English, don’t like dubbing, and also want to improve their English language skills). However, we turn on Spanish language subtitles to help them out on words that they don’t know. Halfway through the movie, there’s a scene between two Russian gangsters, with Russian dialog. If the Spanish subtitles weren’t on, you’d get subtitles in English covering the Russian dialog. But because you can only have subtitles in one language at a time, the English subtitles never show up, despite the movie playing primarily with English audio. Of course it would be ridiculous to have subtitles in two languages at one time, right? Right? Right?</p>

<p>So what’s the reason for this being done so badly in these various cases? I don’t have a slam dunk theory, but below are some possibilities.</p>
<h2 id="age-of-website">Age of Website</h2>
<p>Is it possible that the age of website is somehow correlated with a bad internationalisation implementation (e.g. using IP geolocation rather than Accept-Language)? This seems unlikely, given that HTTP 1.1, which introduced Accept-Language, was published in 1997.</p>
<h2 id="location-of-servers">Location of Servers</h2>
<p>Truly international websites will have servers in different regions of the world. Through the magic of the internet, when you go to their domain, you get redirected to the servers nearest you. Those servers default to the language of the locale. I find this explanation plausible, but it’d certainly be a bug (since, again, it’s ignoring the Accept-Language header.)</p>
<h2 id="some-weird-audience-optimization">Some Weird Audience Optimization</h2>
<p>Microsoft and Google are big guns in tech; they don’t have any inconsistencies in their products and everything they do is deliberate, so they surely know what they’re doing here (slash s). Maybe statistics they’ve run prove that they get higher engagement by frustrated users scrambling around in an interface they don’t understand to find the god damned language switcher, and therefore the A/B models prove it’s the right thing to do. Or something like that.</p>
<h2 id="incentivizing-signing-in">Incentivizing Signing In</h2>
<p>The company went to the trouble of creating user profiles in which you can set your language preferences. To encourage people to sign into their profile (so they can be tracked better), maybe it’s a deliberate choice to display the language based on geolocation? I don’t think this makes much sense, since if that were the case why wouldn’t the signed out version be deficient in ways that encourage sign-in when travelers were on home turf?</p>
<h2 id="org-too-big-nobody-cares">Org Too Big, Nobody Cares</h2>
<p>You don’t put your best engineers on the task of internationalization. It’s a boring, routine task, and involves lots of boilerplate. Nobody’s getting a promotion over translating the site. Maybe it gets half-assed, issues missed in QA, and site launched. Maybe once launched into a new market, you care about the 95% of users who work in the primary language of the country, and that’s good enough. Everybody moves on. The support organization hears about the problem periodically, but they’re not allowed to talk to the development team, and their script says “this is deliberately based on your region”, so nothing ever gets back to decision makers in the organization.</p>
<h2 id="overly-specific-product-managers">Overly Specific Product Managers</h2>
<p>Most product managers won’t know about Accept-Language. In Chrome, the Language setting is buried under “Advanced” settings (I guess it’s “Advanced” to speak something other than English), so it’s not unreasonable to not have known that you can set it in the browser. It’s easy to imagine a product manager who writes “Site language should be based on the primary language of the country” because they didn’t know any better, and a sub-par development team implementing to spec because they assumed the spec had been well though through.</p>

<p>If plausible reasons surface from discussion, I will update this post. Failing that, if you work at Google (or Microsoft), please fix this.</p>

<p>I posted this on <a href="https://news.ycombinator.com/item?id=30638590">hacker news</a>; the answer, at least for Google, seems to be:</p>
<blockquote>
<p>I worked at Google in 2000, and I found this annoying too, so I asked about it. The official reason was that a lot of browsers defaulted to en-US, so Google effectively treats an Accept-Language of en-US as a no-op, and then it falls through to location-based. (I don’t agree with this rationale, and said as much, but there you have it.) Note that other values for Accept-Language are not ignored. I haven’t tried it myself, but I’ve heard some people say that setting their language to en-GB or en-CA works well.
You can also use &amp;hl=en-US, which always takes precedence.</p>
<ul>
<li>xenomachina
<a href="https://news.ycombinator.com/item?id=30642273">https://news.ycombinator.com/item?id=30642273</a></li>
</ul>
</blockquote>
<ul>
  
   <li>
     <a href="https://smaller.fish/tags/tech">tech</a>
   </li>
  
   <li>
     <a href="https://smaller.fish/tags/costarica">costarica</a>
   </li>
  
</ul>

    </div>


  </article>

    </div></div>
  </body>
</html>
