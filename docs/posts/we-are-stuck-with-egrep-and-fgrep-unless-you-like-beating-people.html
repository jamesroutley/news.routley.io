<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/unix/EgrepFgrepStuckWith">Original</a>
    <h1>We are stuck with egrep and fgrep (unless you like beating people)</h1>
    
    <div id="readability-page-1" class="page"><div><h2>We are stuck with <code>egrep</code> and <code>fgrep</code> (unless you like beating people)</h2>

	<p><small>October 12, 2022</small></p>
</div><div><p>Over on Twitter <a href="https://twitter.com/thatcks/status/1580217914560770048">I had a reaction</a>:</p>

<blockquote><p>I see that a bunch of system administrators (or distribution
packagers) are going to set GNU Grep 3.8 on fire with the power of
their minds. Spoiler: new warnings are an API change.</p>
</blockquote>

<p>What&#39;s special about GNU Grep 3.8 is that <a href="https://www.phoronix.com/news/GNU-Grep-3.8-Stop-egrep-fgrep">its version of <code>egrep</code>
and <code>fgrep</code> now print an extra message when you run them</a>.
Specifically, these messages &#39;warn&#39; (ie nag) you to stop using them
and use &#39;grep -E&#39; and &#39;grep -F&#39; instead.</p>

<p>(I assume that these messages are printed to standard error,
because not even GNU Grep would be so hostile as to put them
in standard output.)</p>

<p>There are two problems with this. The first issue is what&#39;s going
to cause system administrators and distribution packagers to set
GNU Grep 3.8 on fire, which is that in practice <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/FatalWarnings">adding warnings
and other new messages is a breaking API change</a>. There are many places where adding
new messages will cause breakage and pain (for example, in scripts
run from cron where unexpected output will result in the sysadmins
getting mailed, perhaps a lot).</p>

<p>The second issue is that this is unpleasant to actual people. There
are a lot of people who are used to using (and typing) &#39;<code>fgrep</code>&#39;
and to a lesser extent &#39;<code>egrep</code>&#39; when they want certain sorts of
results from grep. These people don&#39;t care that the people behind
GNU Grep (and POSIX) don&#39;t like these commands; they are used to
them, and now they&#39;re being nagged (and threatened with actual
removal). There&#39;s also a lot of writing about Unix out there in the
world that uses &#39;<code>fgrep</code>&#39; and &#39;<code>egrep</code>&#39;; GNU Grep wants to make all
of this perfectly good writing less useful. It doesn&#39;t matter to
GNU Grep that <code>fgrep</code> and <code>egrep</code> have been present in Unix since
<a href="https://minnie.tuhs.org/cgi-bin/utree.pl?file=V7/usr/man/man1/grep.1">V7</a>.
Out they go, because POSIX says so.</p>

<p>As a side note, I believe that one reason that people continue using
fgrep and egrep is simply that they&#39;re easier and faster to type.
Typing &#39;fgrep&#39; is one continuous run of lower case letters; typing
&#39;grep -F&#39; is two more characters, one of them shifted. People are
lazy, and GNU Grep wants them to work harder for no particularly
good reason.</p>

<p>(Or it wants everyone in the world to create their own &#39;fgrep&#39; and
&#39;egrep&#39; cover scripts, which is a terrible amount of redundant
work.)</p>

<p>If Unix didn&#39;t already have fgrep and egrep, people probably wouldn&#39;t
add them. But this isn&#39;t the world we have; this is a world where
fgrep and egrep have been around for over 40 years.  In that world,
Unix is stuck with them unless you want to beat up people&#39;s scripts,
documentation, writing, habits, and reflexes. Doing that is not
progress or being friendly to people.</p>

<p>(<a href="https://utcc.utoronto.ca/~cks/space/blog/unix/UnixFossilizationBad">I&#39;m definitely not in favor of fossilizing Unix</a>,
but there&#39;s a difference between avoiding fossilization and the
kind of minimal, mathematical purity that we see GNU Grep trying
to impose here. Unix has long since passed the point where it had
that sort of minimalism in the standard commands. Modern Unix has
all sorts of duplications and flourishes that aren&#39;t strictly
necessary, and for good reasons. One of them is that it&#39;s nicer for
the actual people using Unix. You don&#39;t strictly speaking need
&#39;<a href="https://utcc.utoronto.ca/~cks/space/blog/unix/GNUSortHOption">sort -h</a>&#39;, but <a href="https://utcc.utoronto.ca/~cks/space/blog/unix/GNUSortHOption">it&#39;s quite convenient</a>.)</p>
</div></div>
  </body>
</html>
