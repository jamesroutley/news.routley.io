<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://robertwpearce.com/how-to-lose-functional-programming-at-work.html">Original</a>
    <h1>How to Lose Functional Programming at Work</h1>
    
    <div id="readability-page-1" class="page"><div id="content" tabindex="-1">
<article>
<header>

<p><small>2023-01-30</small>
</p>
</header>
<section><p>Hi! If you’re looking to lose functional programming at work, here are a bunch
of mistakes I’ve made on JS-heavy web teams over the years that can help you do
the same.</p>
<p>Enjoy!</p>
<p><em>Note: if sarcasm and self-deprecation aren’t your thing, you can skip to the
<a href="#real-talk-takeaways">real-talk takeaways</a>.</em></p>
<h2 id="pdf-version">PDF version</h2>
<p>Here is the much prettier PDF version that is also useful for sending to your
teammates or using in your own lunch-n-learn tech talk.</p>
<p><em>Thanks to <a href="https://news.ycombinator.com/item?id=34569625">KronisLV on the orange
site</a> for helping me fix an issue
where the PDF was accidentally auto-downloading in Firefox.</em></p>

<p><a href="https://robertwpearce.com/pdfs/2023-01-24-how-to-lose-fp-at-work.pdf">
How to Lose Functional Programming at Work - PDF
</a></p>
<h2 id="dont-have-static-type-checking">Don’t have static type checking</h2>
<ul>
<li>No <a href="https://www.typescriptlang.org">TypeScript</a></li>
<li>No <a href="https://flow.org">Flow</a></li>
<li>No <a href="https://reasonml.github.io">ReasonML</a></li>
<li>No <a href="https://elm-lang.org/">Elm</a></li>
<li>No (insert language with static type checking that compiles to JS)</li>
</ul>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span>const</span> processData <span>=</span> <span>composeP</span>(syncWithBackend<span>,</span> cleansePII<span>,</span> validateData)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span>// * What arguments and their types are expected here?</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span>//</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span>// * If each function is written like this, how can</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span>//   one suss out what data are flowing where?</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span>//</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span>// * How hard is this going to be to debug?</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span>//   Use this everywhere: `(x) =&gt; (console.log(x), x)`</span></span></code></pre></div>
<p>Oh, so point-free style programming is the problem? Not so fast:</p>
<div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span>async</span> <span>function</span> <span>processData</span>(data) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>validateData</span>(data)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span>const</span> cleansedData <span>=</span> <span>cleansePII</span>(data)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>syncWithBackend</span>(cleansedData)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span>return</span> data</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span>// or for the Promise-chainers…</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span>const</span> processData <span>=</span> data <span>=&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span>validateData</span>(data)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span>.</span><span>then</span>(cleansePII)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span>.</span><span>then</span>(syncWithBackend)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span>.</span><span>then</span>(() <span>=&gt;</span> data)</span></code></pre></div>
<p>Do keep telling yourself that any of these 3, on their own, are easy for your
teammates to work with after 3 months.</p>

<ul>
<li>No <a href="https://jsdoc.app">jsdoc</a></li>
<li>…are there any other contenders?</li>
</ul>
<p>Deprive your team of this clarity and helpful auto-completion:</p>
<div id="cb3"><pre><code><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span>// </span><span>NOTE</span><span>: this is an untested, small example</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span>/**</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@typedef</span><span> </span><span>{Object}</span><span> </span><span>ReportingInfo</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@property</span><span> </span><span>{</span><span>(&#34;light&#34;|&#34;dark&#34;)} userTheme - Current user&#39;s preferred theme</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@property</span><span> </span><span>{string}</span><span> userName - Current user&#39;s name</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@property</span><span> </span><span>{UUID}</span><span> postId - The current post&#39;s ID</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span> */</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span>/**</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span> * Validates that the reporting data (current user site prefences and post info)</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span> * is OK, removes personally identifiable information, syncs this info with the</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span> * backend, and gives us back the original data.</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span> *</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@param</span><span> </span><span>{ReportingInfo}</span><span> data - The current user&#39;s site preferences and post info</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span> * </span><span>@returns</span><span> {Promise</span><span>&lt;ReportingInfo&gt;</span><span>} - The original reporting data</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span> */</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span>const</span> processData <span>=</span> data <span>=&gt;</span> <span>// …</span></span></code></pre></div>
<h2 id="dont-properly-train-new-and-existing-colleagues">Don’t properly train new and existing colleagues</h2>
<p>Truly believe, in your heart, that you can write a pile of blog posts, collect a
bunch of other great learning resources, hand them all to a new FP learner,
recommend they read as much as they can then come back with questions, and
expect them to come out the other side at all.</p>
<p>Conversely, spend all your time and energy on a couple of individuals, neglect
the others, fail to write any useful learnings down, and forget to encourage
these initiates to turn around and help teach their other colleagues, in turn.</p>
<h2 id="dont-bother-getting-the-other-engineering-teams-on-board-and-rowing-in-the-same-direction">Don’t bother getting the other engineering teams on board and rowing in the same direction</h2>
<ul>
<li>“If I build it, they will notice… right?”</li>
<li><em>Idea: Lunch ’n learn about FP?</em> Me: They’ll find out I don’t know things.</li>
<li><em>Idea: Meet with other team leaders and see if they’re interested in adoption, what
could be better, or share why they’re not interested?</em> Me: This includes
managers who report on things, and if they think I’m dumb or rocking the boat
too much, I might look worse than I potentially already do.</li>
</ul>
<p>Instead, if you keep it to yourself, other teams won’t get to contribute and
probably improve the state of things.</p>
<h2 id="do-live-by-the-creed-point-free-or-die">Do live by the creed, “Point-free or die”</h2>
<p>Watch the video, <a href="https://www.youtube.com/watch?v=seVSlKazsNk">“Point-Free or Die: Tacit Programming in Haskell and
Beyond”</a>, by Amar Shah</p>
<p>Contrived example:</p>
<div id="cb4"><pre><code><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span>import</span> { __<span>,</span> any<span>,</span> lt } <span>from</span> <span>&#39;ramda&#39;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span>const</span> anyLt0 <span>=</span> <span>any</span>(<span>lt</span>(<span>0</span><span>,</span> __)) <span>// hint: this has a bug in it</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span>anyLt0</span>([<span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span>]) <span>// true — ugh…</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span>// vs. the probably pretty simple…</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span>const</span> anyLt0 <span>=</span> numbers <span>=&gt;</span> numbers<span>.</span><span>some</span>(n <span>=&gt;</span> n <span>&lt;</span> <span>0</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span>anyLt0</span>([<span>0</span><span>,</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span>]) <span>// false</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span>anyLt0</span>([<span>0</span><span>,</span> <span>1</span><span>,</span> <span>2</span><span>,</span> <span>-</span><span>1</span><span>,</span> <span>3</span>]) <span>// true — looks good</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span>// 👆 should we resist eta-converting this?!</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span>// …</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span>// NOT ON MY WATCH</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span>const</span> any <span>=</span> fn <span>=&gt;</span> array <span>=&gt;</span> array<span>.</span><span>some</span>(fn)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span>const</span> isLtN <span>=</span> x <span>=&gt;</span> n <span>=&gt;</span> x <span>&lt;</span> n</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span>const</span> isLt0 <span>=</span> <span>isLtN</span>(<span>0</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span>const</span> anyLt0 <span>=</span> <span>any</span>(isLt0)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span>anyLt0</span>([<span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span>]) <span>// true — ugh; the bug is back</span></span></code></pre></div>
<p>Real, but altered, example:</p>
<div id="cb5"><pre><code><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span>const</span> finishItems <span>=</span> <span>compose</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span>flip</span>(merge)({ <span>isDone</span><span>:</span> <span>true</span><span>,</span> <span>amtComplete</span><span>:</span> <span>100</span> })<span>,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span>over</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span>lensProp</span>(<span>&#39;indexedObjects&#39;</span>)<span>,</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span>mapVals</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>      <span>compose</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span>over</span>(<span>lensProp</span>(<span>&#39;indexedObjects&#39;</span>)<span>,</span> <span>mapVals</span>(<span>assoc</span>(<span>&#39;isDone&#39;</span><span>,</span> <span>true</span>)))<span>,</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span>assoc</span>(<span>&#39;isDone&#39;</span><span>,</span> <span>true</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<h2 id="do-prefer-the-wrong-abstraction-over-the-right-duplication">Do prefer the wrong abstraction over the right duplication</h2>
<p>I was at Sandi Metz’ RailsConf 2014 Chicago talk, <a href="https://www.youtube.com/watch?v=8bZh5LMaSmE">All the Little
Things</a>, where she blew my mind
with the simplicity of “preferring duplication over the wrong abstraction”. Two
years later, she followed it up with some great blog commentary, <a href="https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction">The Wrong
Abstraction</a>.</p>
<p>But in this case, dilute your core business logic to broad generalizations that
can be extracted and abstracted over and over, fail to understand category
theory enough for this to be useful, and be the only one who knows how these
abstractions work.</p>
<p>You’ll know you’ve lost people when normally thorough PR reviews now look like,
“👍”.</p>
<h2 id="dont-refactor-old-patterns-that-clearly-dont-work-for-the-team">Don’t refactor old patterns that clearly don’t work for the team</h2>
<p>Make sure that people coming into the project have your old code patterns to
emulate that you cringe looking at years later but never made the time to
update.</p>
<p>While you could allocate investment time to this or reading up on how to
improve your technical leadership skills, spend that time making new features,
instead.</p>
<h2 id="do-force-functional-patterns-into-a-language-that-wasnt-built-for-them-bonus-cryptic-stack-traces">Do force functional patterns into a language that wasn’t built for them (bonus: cryptic stack traces)</h2>
<ul>
<li>Lean into recursive functions, realize ES2015 tail call optimization is
only a thing in Safari nowadays (if that?), and sprinkle a
<a href="https://github.com/getify/Functional-Light-JS/blob/master/manuscript/ch8.md/#trampolines"><code>trampoline</code></a> function over
the issue to make it go away and not blow out your call stack</li>
<li>Get cryptic error messages and stack traces because JS isn’t going to be able
to follow your custom <code>curry</code> and <code>compose</code> functions by default, meaning
you’ll have to go the extra mile like Brian does in <a href="https://medium.com/@drboolean/debugging-functional-7deb4688a08c">Debugging
functional</a> to
prevent the issues described by Thai in <a href="https://medium.com/hackernoon/partially-applied-curried-functions-could-obfuscate-the-javascript-stack-trace-84d66bd8032e">Partially-applied (or curried)
functions could obfuscate the JavaScript stack trace</a>
(Thai’s ultimate recommendations are <em>“use a typed language that guarantees that
your functions will never receive an invalid data”</em> or <em>“just don’t go
overboard with pointfree style JavaScript”</em>).</li>
<li>The Glasgow Haskell Compiler can be optimized to fuse <code>map g . map f</code> into a
single <code>map</code> thanks to composition, knocking out the work in one go at
runtime. While <code>.map(…).map(…).map(…)</code> seems to be optimized pretty ok
in JS runtimes, you’re still asking it do <em>N</em> times the work, and you may not
realize it. Oops.</li>
<li>BYO algebraic data type libraries (many of these are awesome, though)</li>
</ul>
<h2 id="do-opaquely-compose-and-sequence-the-entirety-of-your-api-endpoints-and-make-them-hard-to-debug">Do opaquely compose and sequence the entirety of your API endpoints and make them hard to debug</h2>
<p>On the surface, this isn’t so difficult to read…</p>
<div id="cb6"><pre><code><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span>// handler for POST /posts</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span>import</span> { createPost } <span>from</span> <span>&#39;app/db/posts&#39;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span>import</span> { authenticateUser<span>,</span> authorizeUser } <span>from</span> <span>&#39;app/lib/auth&#39;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span>import</span> { trackEvent } <span>from</span> <span>&#39;app/lib/tracking&#39;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span>const</span> validateRequestSchema <span>=</span> payload <span>=&gt;</span> { <span>/* … */</span> }</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span>export</span> <span>const</span> handleCreatePost <span>=</span> <span>curry</span>(metadata <span>=&gt;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span>pipeP</span>(</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span>authenticateUser</span>(metadata)<span>,</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span>authorizeUser</span>(metadata)<span>,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    validateRequestSchema<span>,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span>createPost</span>(metadata)<span>,</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span>tapP</span>(<span>trackEvent</span>(<span>&#39;post:create&#39;</span><span>,</span> metadata))<span>,</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span>pick</span>([ <span>&#39;id&#39;</span><span>,</span> <span>&#39;authorId&#39;</span><span>,</span> <span>&#39;title&#39;</span> ])</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Did you catch that this expects 2 arguments? Did you also know that
<code>authenticateUser</code> ignores the 2nd argument sent to it? How would you? And what
about <code>trackEvent</code>? Does it receive the <code>payload</code>, or does <code>createPost()</code> return
post-related data?</p>
<p>Let’s write this another way:</p>
<div id="cb7"><pre><code><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span>export</span> <span>async</span> <span>function</span> <span>handleCreatePost</span>(metadata<span>,</span> payload) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>authenticateUser</span>(metadata)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>authorizeUser</span>(metadata<span>,</span> payload)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>validateRequestSchema</span>(payload)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span>const</span> post <span>=</span> <span>await</span> <span>createPost</span>(metadata<span>,</span> payload)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span>await</span> <span>trackEvent</span>(<span>&#39;post:create&#39;</span><span>,</span> metadata<span>,</span> payload)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span>return</span> {</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span>id</span><span>:</span> post<span>.</span><span>id</span><span>,</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span>authorId</span><span>:</span> post<span>.</span><span>authorId</span><span>,</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span>title</span><span>:</span> post<span>.</span><span>title</span><span>,</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>I’m not saying that option #2 is an awesome handler, but if you want to make it
trickier for people, go with option #1.</p>
<h2 id="do-recreate-imperative-procedural-programming-while-calling-it-declarative">Do recreate imperative, procedural programming while calling it “declarative”</h2>
<div id="cb8"><pre><code><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span>const</span> setBookReadPercentByType <span>=</span> (contentType<span>,</span> statusObject) <span>=&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span>assoc</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span>&#39;readPercent&#39;</span><span>,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span>pipe</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span>prop</span>(<span>&#39;subItems&#39;</span>)<span>,</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      values<span>,</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span>filter</span>(<span>propEq</span>(contentType<span>,</span> <span>&#39;chapter&#39;</span>))<span>,</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      length<span>,</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>      <span>flip</span>(divide)(<span>compose</span>(length<span>,</span> keys<span>,</span> <span>prop</span>(<span>&#39;subItems&#39;</span>))(statusObject))<span>,</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>      <span>multiply</span>(<span>100</span>)<span>,</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>      <span>Math</span><span>.</span><span>round</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    )(statusObject)<span>,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    statusObject</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Do have 8+-ish different patterns for function composition</p>
<div id="cb9"><pre><code><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span>// 👇 These 4, plus Promisified versions of them,</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span>//    plus combinations of them all used at once;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span>//    doesn&#39;t include ramda&#39;s pipeWith and composeWith</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span>// compose</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span>const</span> getHighScorers <span>=</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span>compose</span>(</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span>mapProp</span>(<span>&#39;name&#39;</span>)<span>,</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span>takeN</span>(<span>3</span>)<span>,</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span>descBy</span>(<span>&#39;score&#39;</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span>// pipe</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span>const</span> getHighScorers <span>=</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span>pipe</span>(</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span>descBy</span>(<span>&#39;score&#39;</span>)<span>,</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span>takeN</span>(<span>3</span>)<span>,</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    <span>mapProp</span>(<span>&#39;name&#39;</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span>// composeWithValue</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span>const</span> getHighScorers <span>=</span> players <span>=&gt;</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span>composeWithValue</span>(</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span>mapProp</span>(<span>&#39;name&#39;</span>)<span>,</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span>takeN</span>(<span>3</span>)<span>,</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span>descBy</span>(<span>&#39;score&#39;</span>)<span>,</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    players</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span>// pipeWithValue</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span>const</span> getHighScorers <span>=</span> players <span>=&gt;</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span>pipeWithValue</span>(</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    players<span>,</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span>descBy</span>(<span>&#39;score&#39;</span>)<span>,</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span>takeN</span>(<span>3</span>)<span>,</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span>mapProp</span>(<span>&#39;name&#39;</span>)</span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span>// …but then now mix and match them with actual,</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span>// real-life business logic.</span></span></code></pre></div>
<h2 id="do-make-yourself-one-of-the-few-who-can-debug-algebraic-data-types-during-midnight-incidents">Do make yourself one of the few who can debug algebraic data types during midnight incidents</h2>
<p>Ensure your team is surprised by all of the following words when debugging or
altering your code in the pursuit of their own work tasks:</p>
<ul>
<li><code>Task</code>, <code>Maybe</code>, <code>Either</code>, <code>Result</code>, <code>Pair</code>, <code>State</code></li>
<li><code>bimap</code></li>
<li><code>chain</code></li>
<li><code>bichain</code></li>
<li><code>option</code></li>
<li><code>coalesce</code></li>
<li><code>fork</code></li>
<li><code>sequence</code></li>
<li><code>ap</code></li>
<li><code>map</code> — and I don’t mean <code>Array.prototype.map</code>, nor a <code>new Map()</code>, nor a
key/value object</li>
</ul>
<h2 id="dont-have-sql-a-declarative-language-do-data-transformations-for-you--diwhy-it-yourself">Don’t have SQL (a declarative language) do data transformations for you — DIWHY??? it yourself</h2>
<p>Instead, and in the name of immutability, use data pipelines in your app to
apply changes to your data, one transformation at a time, and accidentally do as
many key/value iterations and memory allocations as possible. 😬</p>
<h2 id="do-suggest-on-prs-that-colleagues-completely-refactor-what-theyve-done-to-fit-your-functional-style">Do suggest, on PRs, that colleagues completely refactor what they’ve done to fit <em>your</em> functional style</h2>
<blockquote>
<p>What you have here works great, but what could this look like if we flipped
all the function arguments around, removed all these intermediate variables, and
mapped these operations over an <code>Either</code>?</p>
</blockquote>
<p>or</p>
<blockquote>
<p>I noticed you’re explicitly constructing these objects in their functions. If
you were to use &lt;UTILITY-FUNCTION&gt;, you could declare the shape of your
outputted object and use functions as the values to look up or compute each
value given some data.</p>
</blockquote>
<h2 id="and-for-some-quick-final-ones">And for some quick final ones…</h2>
<ul>
<li>Do sow imposter syndrome in others and exclude them by sharing non-beginner FP articles</li>
<li>Do keep writing code using FP tools even when nobody else on the team is</li>
<li>Do achieve peak perceived passive-aggression by getting tired and commenting PRs with emojis</li>
<li>Do have “the FP talk” at work, and then publicly own your mistakes</li>
</ul>
<h2 id="real-talk-takeaways">Real-talk takeaways</h2>
<p>Much of the backwards recommendations here can be, on the surface, written off
as symptoms of inexperience, a lack of technical leadership from me, and
obviously not the right paths.</p>
<p>But I think it’s something deeper than those easy explanations.</p>
<p>Most things in life need to be tended to in order for them to go the ways that
we’d like them to; our relationships, our physical &amp; mental health, our gardens.
With most of these things in life, we strive to purposefully sculpt our futures.</p>
<p>However, there are many things that we accidentally sculpt. For example, if the
fastest way from your back door to your garden is through your grassy yard, the
simplest thing is to walk over the grass to get there. It makes sense for a
while, but over time, your stepping on the grass carves a path that you never
intended to create — it was an unintended consequence of your gardening.</p>
<p>This same thing happens with our minds and in our work. If we’re not paying
attention to the big picture, the path of least resistance can carve canyons.</p>
<p>In my case, here, not taking responsibility of a path I helped create, coupled
with persistent imposter syndrome and a feeling I needed to ship features and
just look out for myself, instead of making time for re-evaluation, helped lead
to the difficulties above for others and a loss of “higher” functional
programming in a pretty good workplace that gives teams the freedom to choose
their own tools.</p>
<p>But all is not lost! The core tenets of FP seem to remain:</p>
<ul>
<li>Immutability: Preferring to <em>efficiently</em> recreate objects over mutating the
originals</li>
<li>Purity: call the same function with the same arguments, and you
get the same results</li>
<li>Moving effects to the conceptual edge of an application</li>
<li>Very few classes (if any; <code>React</code> doesn’t count), no inheritance,
<code>map</code>/<code>filter</code>/<code>reduce</code>, etc.</li>
</ul>
<p>It seems a happy balance has been collectively decided on, and I’m excited to
see where it goes. Perhaps, this time around, I’ll be better.</p>
<hr/>
<p>Thanks for reading,
</p></section>
</article>
</div></div>
  </body>
</html>
