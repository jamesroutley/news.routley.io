<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.libretro.com/index.php/retroarch-1-9-13-automatic-frame-delay/">Original</a>
    <h1>RetroArch: Automatic Frame Delay to reduce input latency</h1>
    
    <div id="readability-page-1" class="page"><article id="post-50018">
<div>
<p><strong>Article written by Ryunam</strong></p>
<p>RetroArch 1.9.13 introduces a new option called “Automatic Frame Delay”. It has been added to the Latency sub-menu (found under Settings -&gt; Latency).</p>
<p>This new feature provides an effective way to avoid having to configure a specific value for the “Frame Delay” option for each and every core and individual piece of content that you may want to run, by automatically tuning down its strength based on your system performance.</p>
<h3>What is “Frame Delay”?</h3>
<p>The setting known as “Frame Delay” has actually existed for some time in RetroArch. However, due to its nature and the complexity of its effect, it has always required a level of strictly manual adjustment and finetuning on the user side.</p>
<p>To best describe the underlying mechanism, let us briefly touch upon the timing of when a new frame is produced (including when the inputs are sampled) and then displayed on-screen.</p>
<p><img src="https://www.libretro.com/wp-content/uploads/2021/11/normalframetime-1024x590.png" alt="" width="750" height="432" srcset="https://www.libretro.com/wp-content/uploads/2021/11/normalframetime-1024x590.png 1024w, https://www.libretro.com/wp-content/uploads/2021/11/normalframetime-300x173.png 300w, https://www.libretro.com/wp-content/uploads/2021/11/normalframetime-768x443.png 768w, https://www.libretro.com/wp-content/uploads/2021/11/normalframetime.png 1292w" sizes="(max-width: 750px) 100vw, 750px"/></p>
<p>The way frames are rendered and then displayed on video can be best understood by considering this sequence:</p>
<p>While the process described here is normal and does not usually yield a considerable impact on latency, the fact that the next frame has to be put “on hold” and wait a certain amount of time from the moment it finishes rendering until the end of the frame period does in fact contribute to the combined responsiveness of the inputs.</p>
<p>This is where “Frame Delay” comes into play.</p>
<p><img src="https://www.libretro.com/wp-content/uploads/2021/11/framedelay-1024x590.png" alt="" width="750" height="432" srcset="https://www.libretro.com/wp-content/uploads/2021/11/framedelay-1024x590.png 1024w, https://www.libretro.com/wp-content/uploads/2021/11/framedelay-300x173.png 300w, https://www.libretro.com/wp-content/uploads/2021/11/framedelay-768x443.png 768w, https://www.libretro.com/wp-content/uploads/2021/11/framedelay.png 1292w" sizes="(max-width: 750px) 100vw, 750px"/></p>
<p>Depending on the value set for the “Frame Delay” option, the creation of the new frame including the input polling can be postponed by a certain number of milliseconds, until the last moment that is realistically viable.</p>
<p>Doing this requires some additional CPU processing power depending on the chosen amount of delay, but it also helps decrease the number of milliseconds that the new frame – which has been prepared and is ready to be presented on video – has to remain on hold. As a consequence, adjusting the “Frame Delay” setting can offer a slight – albeit measurable – improvement to the perceived input latency.</p>
<h3>The “Automatic Frame Delay” setting</h3>
<p>The problem with the “Frame Delay” setting has been traditionally that the many cores and types of content available, as one may expect, are vastly different and often have varying degrees of system and CPU requirements. </p>
<p>Users have had to constantly tweak the “Frame Delay” values for each specific situation, often resorting to set either per-core or per-content overrides, so that the benefits of the latency reduction could be had without stumbling on framerate drops, stutter, audio crackling and all sorts of other issues.</p>
<p><img src="https://www.libretro.com/wp-content/uploads/2021/11/automaticframedelay.png" alt="" width="934" height="165" srcset="https://www.libretro.com/wp-content/uploads/2021/11/automaticframedelay.png 934w, https://www.libretro.com/wp-content/uploads/2021/11/automaticframedelay-300x53.png 300w, https://www.libretro.com/wp-content/uploads/2021/11/automaticframedelay-768x136.png 768w" sizes="(max-width: 934px) 100vw, 934px"/></p>
<p>With the introduction of the “Automatic Frame Delay” toggle, the use of this functionality becomes simpler: the amount of delay time for the rendering of the new frame will scale down automatically, if the system detects any framerate fluctuation/drop, until it reaches a value that allows your gameplay to remain stable while still retaining a certain extent of latency reduction.</p>
<p> • if you set “Frame Delay” to 0 and “Automatic Frame Delay” to ON, the starting point of the delay that is applied to the new frame will be half your “frame period”. For instance, on a typical 60hz screen with a frame time of 16.7 ms, the initial value applied will be “8”, as in 8 milliseconds of delay. Afterwards, if drops or hiccups are detected in the video performance, this value will be reduced dynamically until it reaches a stable point;</p>
<p> • if you set “Frame Delay” to any value higher than 0 and “Automatic Frame Delay” to ON, the starting point will be the delay value that was manually set. For instance, if “Frame Delay” is set to 10, the initial amount of delay for the processing of the new frame will be 10ms. Then, it will be adjusted downwards in case any framerate drop is detected;</p>
<p> • if you set “Frame Delay” to any value higher than 0 and “Automatic Frame Delay” to OFF, the automated scaling of the frame delay setting will be disabled. The amount of delay applied to the rendering of the new frame will be exactly the one chosen and will not change or decrease during gameplay at all;</p>
<p> • if you set “Frame Delay” to 0 and “Automatic Frame Delay” to OFF, no amount of delay will be applied to the rendering of the new frame. Frame Delay will be disabled entirely.</p>
<h3>Conclusion</h3>
<p>While the tangible effects of “Frame Delay” on the total combined latency might be small compared to other implementations such as Runahead, this setting has the advantage of being applicable to all cores and content, albeit to varying degrees. </p>
<p>The added convenience of having “Frame Delay” scale down automatically is yet another asset in making sure that you can run your content with the lowest latency possible.</p>
<p>Hopefully this new toggle allows a greater ease of use of this particular option for our users. We definitely encourage experimenting with it and testing it with the wide array of cores available for the libretro platform!</p>
</div>

</article></div>
  </body>
</html>
