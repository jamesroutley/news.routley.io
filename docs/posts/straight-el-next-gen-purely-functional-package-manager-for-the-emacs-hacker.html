<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/radian-software/straight.el">Original</a>
    <h1>Straight.el: next-gen, purely functional package manager for the Emacs hacker</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><strong>straight.el</strong>: next-generation, purely functional package manager
for the <a href="https://www.gnu.org/software/emacs/" rel="nofollow">Emacs</a> hacker.</p>
<p dir="auto"><strong>Please check out the <a href="#faq">FAQ</a> and <a href="#news">news</a> :)</strong></p>
<p dir="auto"><a href="https://gitter.im/raxod502/straight.el" rel="nofollow"><img src="https://camo.githubusercontent.com/8cac39bd8b0bd3f12c76257f86a02fe3a4f7bdd7e72654248780ea22a8b9a0c4/68747470733a2f2f6261646765732e6769747465722e696d2f7261786f643530322f73747261696768742e656c2e737667" alt="Gitter chat" data-canonical-src="https://badges.gitter.im/raxod502/straight.el.svg"/></a></p>


<ul dir="auto">
<li><a href="#features">Features</a></li>
<li><a href="#guiding-principles">Guiding principles</a></li>
<li><a href="#getting-started">Getting started</a>
<ul dir="auto">
<li><a href="#debugging">Debugging</a></li>
</ul>
<ul dir="auto">
<li><a href="#install-packages">Install packages</a></li>
<li><a href="#but-what-about-my-fork-of-obscure-el-package">But what about my fork of (obscure .el package)?</a></li>
<li><a href="#integration-with-use-package">Integration with <code>use-package</code></a></li>
<li><a href="#edit-packages-locally">Edit packages locally</a></li>
<li><a href="#automatic-repository-management">Automatic repository management</a></li>
<li><a href="#configuration-reproducibility">Configuration reproducibility</a></li>
</ul>
</li>
<li><a href="#conceptual-overview">Conceptual overview</a>
<ul dir="auto">
<li><a href="#tldr">TL;DR</a></li>
<li><a href="#what-is-a-package">What is a package?</a></li>
<li><a href="#where-do-packages-come-from">Where do packages come from?</a></li>
<li><a href="#what-does-this-look-like-on-disk">What does this look like on disk?</a></li>
<li><a href="#where-do-repositories-come-from">Where do repositories come from?</a></li>
<li><a href="#what-does-it-mean-to-load-a-package">What does it mean to load a package?</a></li>
<li><a href="#where-do-recipes-come-from">Where do recipes come from?</a></li>
<li><a href="#what-happens-when-i-call-straight-use-package">What happens when I call <code>straight-use-package</code>?</a></li>
<li><a href="#what-does-it-mean-to-register-a-package">What does it mean to register a package?</a></li>
<li><a href="#how-does-straightel-know-when-to-rebuild-packages">How does <code>straight.el</code> know when to rebuild packages?</a></li>
<li><a href="#how-does-straightel-know-what-packages-are-installed">How does <code>straight.el</code> know what packages are installed?</a></li>
</ul>
</li>
<li><a href="#comparison-to-other-package-managers">Comparison to other package managers</a>
<ul dir="auto">
<li><a href="#tldr-1">TL;DR</a></li>
<li><a href="#comparison-to-packageel">Comparison to <code>package.el</code></a>
<ul dir="auto">
<li><a href="#advantages-of-straightel">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-packageel">Advantages of <code>package.el</code></a></li>
<li><a href="#additional-notes">Additional notes</a></li>
</ul>
</li>
<li><a href="#comparison-to-quelpa">Comparison to Quelpa</a>
<ul dir="auto">
<li><a href="#advantages-of-straightel-1">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-quelpa">Advantages of Quelpa</a></li>
<li><a href="#additional-notes-1">Additional notes</a></li>
</ul>
</li>
<li><a href="#comparison-to-cask">Comparison to Cask</a>
<ul dir="auto">
<li><a href="#advantages-of-straightel-2">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-cask">Advantages of Cask</a></li>
</ul>
</li>
<li><a href="#comparison-to-el-get">Comparison to el-get</a>
<ul dir="auto">
<li><a href="#advantages-of-straightel-3">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-el-get">Advantages of el-get</a></li>
</ul>
</li>
<li><a href="#comparison-to-borg">Comparison to Borg</a>
<ul dir="auto">
<li><a href="#advantages-of-straightel-4">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-borg">Advantages of Borg</a></li>
</ul>
</li>
<li><a href="#comparison-to-the-manual-approach">Comparison to the manual approach</a>
<ul dir="auto">
<li><a href="#advantages-of-straightel-5">Advantages of <code>straight.el</code></a></li>
<li><a href="#advantages-of-the-manual-approach">Advantages of the manual approach</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#user-manual">User manual</a>
<ul dir="auto">
<li><a href="#bootstrapping-straightel">Bootstrapping <code>straight.el</code></a></li>
<li><a href="#installing-packages-programmatically">Installing packages programmatically</a>
<ul dir="auto">
<li><a href="#installing-with-a-custom-recipe">Installing with a custom recipe</a></li>
<li><a href="#additional-arguments-to-straight-use-package">Additional arguments to <code>straight-use-package</code></a></li>
<li><a href="#variants-of-straight-use-package">Variants of <code>straight-use-package</code></a></li>
<li><a href="#customizing-when-packages-are-built">Customizing when packages are built</a>
<ul dir="auto">
<li><a href="#custom-or-manual-modification-detection">Custom or manual modification detection</a></li>
<li><a href="#summary-of-options-for-package-modification-detection">Summary of options for package modification detection</a>
<ul dir="auto">
<li><a href="#find-at-startup"><code>find-at-startup</code></a></li>
<li><a href="#check-on-save"><code>check-on-save</code></a></li>
<li><a href="#watch-files"><code>watch-files</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#customizing-how-packages-are-built">Customizing how packages are built</a>
<ul dir="auto">
<li><a href="#autoload-generation">Autoload generation</a></li>
<li><a href="#byte-compilation">Byte compilation</a></li>
<li><a href="#native-compilation">Native compilation</a></li>
<li><a href="#symbolic-links">Symbolic links</a></li>
</ul>
</li>
<li><a href="#customizing-how-packages-are-made-available">Customizing how packages are made available</a></li>
<li><a href="#hooks-run-by-straight-use-package">Hooks run by <code>straight-use-package</code></a></li>
</ul>
</li>
<li><a href="#the-recipe-format">The recipe format</a>
<ul dir="auto">
<li><a href="#version-control-backends">Version-control backends</a></li>
<li><a href="#git-backend">Git backend</a>
<ul dir="auto">
<li><a href="#deprecated-upstream-keyword">Deprecated <code>:upstream</code> keyword</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#recipe-lookup">Recipe lookup</a>
<ul dir="auto">
<li><a href="#updating-recipe-repositories">Updating recipe repositories</a></li>
<li><a href="#customizing-recipe-repositories">Customizing recipe repositories</a>
<ul dir="auto">
<li><a href="#gnu-elpa">GNU ELPA</a></li>
<li><a href="#emacsmirror">Emacsmirror</a></li>
<li><a href="#defining-new-recipe-repositories">Defining new recipe repositories</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#overriding-recipes">Overriding recipes</a>
<ul dir="auto">
<li><a href="#overriding-the-recipe-for-straightel">Overriding the recipe for <code>straight.el</code></a></li>
</ul>
</li>
<li><a href="#interactive-usage">Interactive usage</a>
<ul dir="auto">
<li><a href="#version-control-operations">Version control operations</a></li>
</ul>
</li>
<li><a href="#lockfile-management">Lockfile management</a>
<ul dir="auto">
<li><a href="#the-profile-system">The profile system</a></li>
</ul>
</li>
<li><a href="#packages-and-the-init-file">Packages and the init-file</a></li>
<li><a href="#using-straightel-to-reproduce-bugs">Using <code>straight.el</code> to reproduce bugs</a>
<ul dir="auto">
<li><a href="#-in-other-packages">... in other packages</a></li>
<li><a href="#-in-straightel-itself">... in <code>straight.el</code> itself</a></li>
</ul>
</li>
<li><a href="#using-straightel-to-develop-packages">Using <code>straight.el</code> to develop packages</a></li>
<li><a href="#integration-with-other-packages">Integration with other packages</a>
<ul dir="auto">
<li><a href="#integration-with-use-package-1">Integration with <code>use-package</code></a></li>
<li><a href="#integration-with-packageel">&#34;Integration&#34; with <code>package.el</code></a></li>
<li><a href="#integration-with-flycheck">Integration with Flycheck</a></li>
<li><a href="#integration-with-hydra">Integration with Hydra</a></li>
</ul>
</li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a href="#developer-manual">Developer manual</a>
<ul dir="auto">
<li><a href="#low-level-functions">Low-level functions</a></li>
</ul>
</li>
<li><a href="#trivia">Trivia</a>
<ul dir="auto">
<li><a href="#comments-and-docstrings">Comments and docstrings</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#faq">FAQ</a>
<ul dir="auto">
<li><a href="#my-init-time-got-slower">My init time got slower</a></li>
<li><a href="#could-not-find-package-in-recipe-repositories">&#34;Could not find package in recipe repositories&#34;</a></li>
<li><a href="#how-do-i-update-melpa-et-al">How do I update MELPA et al.?</a></li>
<li><a href="#my-use-package-form-isnt-working-properly">My <code>use-package</code> form isn&#39;t working properly</a></li>
<li><a href="#how-do-i-uninstall-a-package">How do I uninstall a package?</a></li>
<li><a href="#the-wrong-version-of-my-package-was-loaded">The wrong version of my package was loaded</a></li>
<li><a href="#i-get-could-not-read-usernamepassword-errors">I get &#34;could not read username/password&#34; errors</a></li>
<li><a href="#how-do-i-pin-package-versions-or-use-only-tagged-releases">How do I pin package versions or use only tagged releases?</a></li>
<li><a href="#how-can-i-use-the-built-in-version-of-a-package">How can I use the built-in version of a package?</a></li>
</ul>
</li>
<li><a href="#news">News</a>
<ul dir="auto">
<li><a href="#jan-1-2021">Jan 1, 2021</a></li>
<li><a href="#april-19-2020">April 19, 2020</a></li>
</ul>
</li>
</ul>


<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<ul dir="auto">
<li>Install Emacs packages listed on <a href="http://melpa.org/#/" rel="nofollow">MELPA</a>, <a href="https://elpa.gnu.org/" rel="nofollow">GNU ELPA</a>, or
<a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a>, or provide your own recipes.</li>
<li>Packages are cloned as Git (or other) repositories, not as opaque
tarballs.</li>
<li>Make changes to a package simply by editing its source code, no
additional steps required. Contribute upstream just by pushing your
changes.</li>
<li>Powerful interactive workflows (with popups à la Magit) for
performing bulk maintenance on the Git repositories for your
packages.</li>
<li>Save and load version lockfiles that ensure 100% reproducibility for
your Emacs configuration. Package state is defined entirely by your
init-file and (optional) lockfile, with no extra persistent data
floating around.</li>
<li>Specify package descriptions using a powerful format based on <a href="https://github.com/melpa/melpa#recipe-format">MELPA
recipes</a> (with a familiar but improved syntax).</li>
<li><a href="https://github.com/jwiegley/use-package"><code>use-package</code></a> integration.</li>
<li>Modular: you can install your packages manually and straight.el will
load them for you. Or you can also have straight.el install your
packages, while you provide the recipes explicitly. Or straight.el
can also fetch recipes, if you want. Bulk repository management and
package updates are also optional.</li>
<li>Extensible APIs to add new recipe sources and version-control
backends.</li>
<li>The cleanest source code you&#39;ve ever seen. <a href="#comments-and-docstrings">45%</a>
of <code>straight.el</code> is comments and docstrings.</li>
</ul>
<p dir="auto">Note: <code>straight.el</code> is a replacement for <code>package.el</code>, <strong>not</strong>
<code>use-package</code>. <code>use-package</code> can be used with either <code>package.el</code> or
<code>straight.el</code>.</p>
<h2 dir="auto"><a id="user-content-guiding-principles" aria-hidden="true" href="#guiding-principles"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Guiding principles</h2>
<ul dir="auto">
<li>Init-file and version lockfiles as the sole source of truth. No
persistent state kept elsewhere.</li>
<li>100% reproducible package management, accounting for changes in
packages, recipe repositories, configuration, and the package
manager itself.</li>
<li>No support whatsoever for <code>package.el</code>.</li>
<li>Edit packages by editing their code, no extra steps required. Allow
for manual version control operations.</li>
<li>Compatibility with MELPA, GNU ELPA, and Emacsmirror.</li>
<li>Trivial to quickly try out a package without permanently installing
it.</li>
<li>Good for reproducing an issue with <code>emacs -Q</code>.</li>
</ul>
<h2 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting started</h2>
<blockquote>
<p dir="auto"><strong>Note: <code>straight.el</code> supports a minimum version of Emacs 25.1, and
works on macOS, Windows, and most flavors of Linux. You must install
<a href="https://git-scm.com/" rel="nofollow">Git</a> in order to use <code>straight.el</code>.</strong></p>
</blockquote>
<p dir="auto">First, place the following bootstrap code in your init-file:</p>

<div data-snippet-clipboard-copy-content="(defvar bootstrap-version)
(let ((bootstrap-file
       (expand-file-name &#34;straight/repos/straight.el/bootstrap.el&#34; user-emacs-directory))
      (bootstrap-version 5))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
        (url-retrieve-synchronously
         &#34;https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el&#34;
         &#39;silent &#39;inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil &#39;nomessage))"><pre>(<span>defvar</span> <span>bootstrap-version</span>)
(<span>let</span> ((bootstrap-file
       (<span>expand-file-name</span> <span><span>&#34;</span>straight/repos/straight.el/bootstrap.el<span>&#34;</span></span> user-emacs-directory))
      (bootstrap-version <span>5</span>))
  (<span>unless</span> (<span>file-exists-p</span> bootstrap-file)
    (<span>with-current-buffer</span>
        (<span>url-retrieve-synchronously</span>
         <span><span>&#34;</span>https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el<span>&#34;</span></span>
         <span>&#39;silent</span> <span>&#39;inhibit-cookies</span>)
      (<span>goto-char</span> (<span>point-max</span>))
      (<span>eval-print-last-sexp</span>)))
  (<span>load</span> bootstrap-file <span>nil</span> <span>&#39;nomessage</span>))</pre></div>

<p dir="auto">Here are some variables you may be interested in (some of them must be
set <strong>before</strong> the bootstrap code runs, if they might affect how
<code>straight.el</code> itself is loaded):</p>
<ul dir="auto">
<li><a href="#overriding-the-recipe-for-straightel"><code>straight-repository-branch</code></a> -- to
get the latest version of <code>straight.el</code> from the <code>develop</code> branch,
rather than the default <code>master</code> which is updated less frequently
but which is ostensibly more stable.</li>
<li><a href="#customizing-when-packages-are-built"><code>straight-check-for-modifications</code></a> --
to configure an alternate way for <code>straight.el</code> to check for
modifications made to package source code, rather than the default
(which is 100% reliable, but has a minor cost to startup time).</li>
<li><a href="#integration-with-use-package-1"><code>straight-use-package-by-default</code></a>
-- if you use <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a>, then this makes each
<code>use-package</code> form also invoke <code>straight.el</code> to install the package,
unless otherwise specified.</li>
<li><a href="#git-backend"><code>straight-vc-git-default-protocol</code></a> -- by
default, <code>straight.el</code> clones over HTTPS. If you need packages from
private Git repositories in your configuration, then you might want
to use SSH instead.</li>
<li><code>straight-base-dir</code> --
by default, straight&#39;s main directory, containing it&#39;s build files and
package repos, is located in <code>user-emacs-directory</code>. You can change
the location of straight&#39;s base directory via this variable.</li>
<li><code>straight-build-dir</code> --
by default, the directory in which packages are built is located at
<code>straight-base-dir</code>/build. Changing this variable will change the name
of that directory and the name of the build cache file (unless
<code>straight-build-cache-fixed-name</code> is non-nil).</li>
</ul>
<p dir="auto">You should remove any code that relates to <code>package.el</code>; for example,
references to <code>package-initialize</code>, <code>package-archives</code>, and (if you&#39;re
using <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a>) <code>:ensure</code> or
<code>use-package-always-ensure</code>.</p>
<p dir="auto">Users of Emacs versions &gt;= 27 will want to add:</p>
<div data-snippet-clipboard-copy-content="(setq package-enable-at-startup nil)"><pre>(<span>setq</span> package-enable-at-startup <span>nil</span>)</pre></div>
<p dir="auto">to their <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Early-Init-File.html" rel="nofollow">early init-file</a> to prevent package.el
loading packages prior to their init-file loading.</p>
<p dir="auto">While it is technically possible to use
both <code>package.el</code> and <code>straight.el</code> at the same time, there is no real
reason to, and it might result in oddities like packages getting
loaded more than once.</p>
<h4 dir="auto"><a id="user-content-debugging" aria-hidden="true" href="#debugging"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Debugging</h4>
<ul dir="auto">
<li>
<p dir="auto">Sometimes, in a corporate environment, <code>url-retrieve-synchronously</code>
may not work and <code>straight.el</code> will be unable to download the
installation script mentioned in the bootstrap snippet. In this
case, you may simply clone this repository into
<code>~/.emacs.d/straight/repos/straight.el</code> and check out your desired
revision/branch. The installation script is just a more convenient
way of doing that automatically when necessary (and looking up the
correct revision of <code>straight.el</code> in your lockfile, if any).</p>
</li>
<li>
<p dir="auto">On macOS, you may receive an error:</p>
<div data-snippet-clipboard-copy-content="Could not create connection to raw.githubusercontent.com:443"><pre><code>Could not create connection to raw.githubusercontent.com:443
</code></pre></div>
<p dir="auto">This is likely because you are using an ancient version of Emacs
which has a broken TLS configuration. Upgrade with <code>brew upgrade emacs</code>.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-install-packages" aria-hidden="true" href="#install-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install packages</h3>
<p dir="auto">Out of the box, you can install any package listed on <a href="http://melpa.org/#/" rel="nofollow">MELPA</a>, <a href="https://elpa.gnu.org/" rel="nofollow">GNU
ELPA</a>, or <a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a>, which is to say any package in
existence. (Although MELPA is used as a package listing, packages are
installed by cloning their Git repositories rather than by downloading
tarballs like <code>package.el</code> does.) To install a package temporarily
(until you restart Emacs), run <code>M-x straight-use-package</code> and select
the package you want. To install a package permanently, place a call
to <code>straight-use-package</code> in your init-file, like:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;el-patch)"><pre>(<span>straight-use-package</span> <span>&#39;el-patch</span>)</pre></div>
<p dir="auto">Note that installing a package will activate all of its autoloads, but
it will not actually <code>require</code> the features provided by the package.
This means that you might need to use <code>require</code> or <code>autoload</code> for some
antiquated packages that do not properly declare their autoloads.</p>
<p dir="auto">To learn more, see the documentation on <a href="#installing-packages-programmatically">the package
lifecycle</a>.</p>
<h3 dir="auto"><a id="user-content-but-what-about-my-fork-of-obscure-el-package" aria-hidden="true" href="#but-what-about-my-fork-of-obscure-el-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>But what about my fork of (obscure .el package)?</h3>
<p dir="auto">Instead of passing just a package name to <code>straight-use-package</code>, you
can pass a list (&#34;recipe&#34;). You can see the default recipe for any
given package by running <code>M-x straight-get-recipe</code>. For example, the
recipe for <code>el-patch</code> is:</p>
<div data-snippet-clipboard-copy-content="(el-patch :type git :host github :repo &#34;raxod502/el-patch&#34;)"><pre>(el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>)</pre></div>
<p dir="auto">So, if you have forked <code>el-patch</code> and you want to use your fork
instead of the upstream, do:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :type git :host github :repo &#34;your-name/el-patch&#34;))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>))</pre></div>
<p dir="auto">In fact, <code>straight.el</code> has explicit support for using a forked
package, since this is so common:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :type git :host github :repo &#34;raxod502/el-patch&#34;
            :fork (:host github
                   :repo &#34;your-name/el-patch&#34;)))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
            <span>:fork</span> (<span>:host</span> github
                   <span>:repo</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>)))</pre></div>
<p dir="auto">In the above, <code>:type git</code> may be omitted if you leave
<code>straight-default-vc</code> at its default value of <code>git</code>. Parts of the
<code>:fork</code> keyword may be omitted as well. One common case is when
your fork is on the same host and has the same name as the upstream
repository. In this case, assuming <code>straight-host-usernames</code> is set,
specifying a fork is as simple as:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :type git :host github :repo &#34;raxod502/el-patch&#34;
            :fork t))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
            <span>:fork</span> <span>t</span>))</pre></div>
<p dir="auto">Note that <code>straight.el</code> doesn&#39;t do any Git operations during startup
unless it needs to clone a package from scratch. This is for
performance. You can explicitly request for <code>straight.el</code> to fix up
the Git configuration after you change a package recipe, e.g. to add a
fork. See <a href="#automatic-repository-management">Automatic repository management</a> below.</p>
<p dir="auto">To learn more, see the documentation on <a href="#the-recipe-format">the recipe
format</a> and <a href="#git-backend">the Git backend</a>.</p>
<h3 dir="auto"><a id="user-content-integration-with-use-package" aria-hidden="true" href="#integration-with-use-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with <code>use-package</code></h3>
<p dir="auto"><a href="https://github.com/jwiegley/use-package"><code>use-package</code></a> is a macro that provides convenient
syntactic sugar for many common tasks related to installing and
configuring Emacs packages. Of course, it does not actually install
the packages, but instead defers to a package manager, like
<code>straight.el</code> (which comes with <code>use-package</code> integration by default).</p>
<p dir="auto">To use <code>use-package</code>, first install it with <code>straight.el</code>:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;use-package)"><pre>(<span>straight-use-package</span> <span>&#39;use-package</span>)</pre></div>
<p dir="auto">Now <code>use-package</code> will use <code>straight.el</code> to automatically install
missing packages if you provide <code>:straight t</code>:</p>
<div data-snippet-clipboard-copy-content="(use-package el-patch
  :straight t)"><pre>(<span>use-package</span> el-patch
  <span>:straight</span> <span>t</span>)</pre></div>
<p dir="auto">You can still provide a custom recipe for the package:</p>
<div data-snippet-clipboard-copy-content="(use-package el-patch
  :straight (el-patch :type git :host github :repo &#34;raxod502/el-patch&#34;
                      :fork (:host github
                             :repo &#34;your-name/el-patch&#34;)))"><pre>(<span>use-package</span> el-patch
  <span>:straight</span> (el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
                      <span>:fork</span> (<span>:host</span> github
                             <span>:repo</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>)))</pre></div>
<p dir="auto">The <code>:straight</code> keyword accepts backquoted forms.
This makes it possible to dynamically compute part of the recipe:</p>
<div data-snippet-clipboard-copy-content="(use-package el-patch
  :straight `(el-patch :type git
                       :repo ,(alist-get &#39;el-patch my-package-urls)))"><pre>(<span>use-package</span> el-patch
  <span>:straight</span> `(el-patch <span>:type</span> git
                       <span>:repo</span> ,(<span>alist-get</span> <span>&#39;el-patch</span> my-package-urls)))</pre></div>
<p dir="auto">Specifying <code>:straight t</code> is unnecessary if you set
<code>straight-use-package-by-default</code> to a non-nil value. (Note that the
variable <code>use-package-always-ensure</code> is associated with <code>package.el</code>,
and you should not use it with <code>straight.el</code>.)</p>
<p dir="auto">To learn more, see the documentation on <a href="#integration-with-use-package-1"><code>straight.el</code>&#39;s <code>use-package</code>
integration</a>.</p>
<h3 dir="auto"><a id="user-content-edit-packages-locally" aria-hidden="true" href="#edit-packages-locally"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Edit packages locally</h3>
<p dir="auto">One of the biggest strengths of <code>straight.el</code> is that editing packages
locally is trivial. You literally just edit the files (<code>find-function</code>
and friends all work as you would expect). Packages will be
automatically rebuilt if necessary when Emacs next starts up.</p>
<p dir="auto">You can even commit your changes and push or pull to various remotes
using Git. You have complete control over your packages&#39; Git
repositories.</p>
<p dir="auto">To learn more, see the documentation on <a href="#installing-packages-programmatically">the package
lifecycle</a>.</p>
<h3 dir="auto"><a id="user-content-automatic-repository-management" aria-hidden="true" href="#automatic-repository-management"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Automatic repository management</h3>
<p dir="auto">While being able to make arbitrary changes to your packages is very
powerful, it can also get tiring to keep track of the all those
changes. For this reason, <code>straight.el</code> provides a suite of powerful
interactive workflows to perform bulk operations on your packages.</p>
<ul dir="auto">
<li>
<p dir="auto">To restore each package to its canonical state (a clean working
directory with the main branch checked out, and the remotes set
correctly), run <code>M-x straight-normalize-package</code> or <code>M-x straight-normalize-all</code>.</p>
</li>
<li>
<p dir="auto">To fetch from each package&#39;s configured remote, run <code>M-x straight-fetch-package-and-deps</code> or <code>M-x straight-fetch-all</code>; to
also fetch from the upstream for forked packages, supply a prefix
argument.</p>
</li>
<li>
<p dir="auto">To merge changes from each package&#39;s configured remote, run <code>M-x straight-merge-package-and-deps</code> or <code>M-x straight-merge-all</code>; to
also merge from the upstream for forked packages, supply a prefix
argument.</p>
</li>
<li>
<p dir="auto">To push all local changes to each package&#39;s configured remote, run
<code>M-x straight-push-package</code> or <code>M-x straight-push-all</code>.</p>
</li>
</ul>
<p dir="auto">All of these commands are highly interactive and ask you before making
any changes. At any point, you can stop and perform manual operations
with Magit or other tools in a recursive edit.</p>
<p dir="auto">To learn more, see the documentation on <a href="#version-control-operations">bulk repository
management</a>.</p>
<h3 dir="auto"><a id="user-content-configuration-reproducibility" aria-hidden="true" href="#configuration-reproducibility"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configuration reproducibility</h3>
<p dir="auto">To save the currently checked out revisions of all of your packages,
run <code>M-x straight-freeze-versions</code>. The resulting file
(<code>~/.emacs.d/straight/versions/default.el</code>), together with your
init-file, perfectly define your package configuration. Keep your
version lockfile checked into version control; when you install your
Emacs configuration on another machine, the versions of packages
specified in your lockfile will automatically be checked out after the
packages are installed. You can manually revert all packages to the
revisions specified in the lockfile by running <code>M-x straight-thaw-versions</code>.</p>
<p dir="auto">To learn more, see the documentation on <a href="#lockfile-management">version
lockfiles</a>.</p>
<h2 dir="auto"><a id="user-content-conceptual-overview" aria-hidden="true" href="#conceptual-overview"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Conceptual overview</h2>
<p dir="auto">This section describes, at a high level, how the different mechanisms
in <code>straight.el</code> play together. This illustrates how <code>straight.el</code>
manages to accomplish all of its <a href="#guiding-principles">guiding principles</a>.</p>
<h3 dir="auto"><a id="user-content-tldr" aria-hidden="true" href="#tldr"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TL;DR</h3>
<p dir="auto"><code>straight.el</code> operates by cloning Git repositories and then symlinking
files into Emacs&#39; load path. The collection of symlinked files
constitutes the package, which is defined by its recipe. The recipe
also describes which local repository to link the files from, and how
to clone that repository, if it is absent.</p>
<p dir="auto">When you call <code>straight-use-package</code>, the recipe you provide is
registered with <code>straight.el</code> for future reference. Then the package&#39;s
repository is cloned if it is absent, the package is rebuilt if its
files have changed since the last build (as determined by <code>find(1)</code>),
and its autoloads are evaluated.</p>
<p dir="auto">You can also provide only a package name, in which case the recipe
will be looked up in one of several configurable recipe repositories,
which are just packages themselves (albeit with the build step
disabled).</p>
<p dir="auto"><code>straight.el</code> determines which packages are installed solely by how
and when <code>straight-use-package</code> is invoked in your init-file.</p>
<h3 dir="auto"><a id="user-content-what-is-a-package" aria-hidden="true" href="#what-is-a-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is a package?</h3>
<p dir="auto">A <em>package</em> is a collection of Emacs Lisp (and possibly other) files.
The most common case is just a single <code>.el</code> file, but some packages
have many <code>.el</code> files, and some even have a directory structure.</p>
<p dir="auto">Note that a package is defined only as a collection of files. It
doesn&#39;t necessarily correspond to a Git repository, or an entry on
MELPA, or anything like that. Frequently there is a relationship
between all of these concepts, but that relationship does not always
have to be direct or one-to-one.</p>
<p dir="auto">A package also has a name, which must be unique. This is the name that
is used for the folder holding the package&#39;s files. It is frequently
the same as the name of a Git repository, or an entry on MELPA, but
again this does not have to be the case.</p>
<h3 dir="auto"><a id="user-content-where-do-packages-come-from" aria-hidden="true" href="#where-do-packages-come-from"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Where do packages come from?</h3>
<p dir="auto">If you really wanted all of your packages to be unambiguously defined,
you could just copy and paste all of their files into version control.
But that would defeat the purpose of using a package manager like
<code>straight.el</code>. In <code>straight.el</code>, packages are defined by two sources
of information:</p>
<ul dir="auto">
<li>a <em>local repository</em></li>
<li>a <em>build recipe</em></li>
</ul>
<p dir="auto">The local repository is just a directory containing some files. Of
course, it also has a name, which may or may not be the same as the
package&#39;s name. Frequently, the local repository is also a Git
repository, but this is not necessary.</p>
<p dir="auto">The build recipe is not a literal data structure. It is a concept that
represents a certain subset of the package&#39;s recipe. Specifically, the
<code>:files</code>, <code>:local-repo</code>, and <code>:build</code> keywords.</p>
<p dir="auto">To transform this <em>information</em> into an actual package that Emacs can
load, <code>straight.el</code> <em>builds</em> the package. This means that some
symbolic links are created in the package&#39;s directory that point back
into the local repository&#39;s directory. Exactly how these symlinks are
created is determined by the <code>:files</code> directive, and which local
repository the symlinks point to is determined by the <code>:local-repo</code>
directive.</p>
<p dir="auto">After the symlinks are created, the resulting files are byte-compiled,
and their autoloads are generated and written into a file in the
package&#39;s directory.</p>
<p dir="auto">If <code>:build nil</code> is specified, however, this entire process is skipped.
This mechanism is used for recipe repositories.</p>
<h3 dir="auto"><a id="user-content-what-does-this-look-like-on-disk" aria-hidden="true" href="#what-does-this-look-like-on-disk"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What does this look like on disk?</h3>
<p dir="auto">The local repositories are kept in <code>~/.emacs.d/straight/repos</code>, and
the built packages are kept in <code>~/.emacs.d/straight/build</code>. If you
have initialized <code>straight.el</code> and loaded package <code>el-patch</code>, then
your <code>~/.emacs.d/straight</code> directory will look roughly like this (some
irrelevant details have been omitted for pedagogical purposes):</p>

<div data-snippet-clipboard-copy-content="straight
├── build
│   ├── el-patch
│   │   ├── el-patch-autoloads.el
│   │   ├── el-patch.el -&gt; ~/.emacs.d/straight/repos/el-patch/el-patch.el
│   │   └── el-patch.elc
│   └── straight
│       ├── straight-autoloads.el
│       ├── straight.el -&gt; ~/.emacs.d/straight/repos/straight.el/straight.el
│       └── straight.elc
└── repos
    ├── el-patch
    │   ├── CHANGELOG.md
    │   ├── LICENSE.md
    │   ├── README.md
    │   └── el-patch.el
    └── straight.el
        ├── LICENSE.md
        ├── Makefile
        ├── README.md
        ├── bootstrap.el
        ├── install.el
        └── straight.el"><pre><code>straight
├── build
│   ├── el-patch
│   │   ├── el-patch-autoloads.el
│   │   ├── el-patch.el -&gt; ~/.emacs.d/straight/repos/el-patch/el-patch.el
│   │   └── el-patch.elc
│   └── straight
│       ├── straight-autoloads.el
│       ├── straight.el -&gt; ~/.emacs.d/straight/repos/straight.el/straight.el
│       └── straight.elc
└── repos
    ├── el-patch
    │   ├── CHANGELOG.md
    │   ├── LICENSE.md
    │   ├── README.md
    │   └── el-patch.el
    └── straight.el
        ├── LICENSE.md
        ├── Makefile
        ├── README.md
        ├── bootstrap.el
        ├── install.el
        └── straight.el
</code></pre></div>

<p dir="auto">As you can see, the package names are <code>el-patch</code> and <code>straight</code>. While
<code>el-patch</code> is built from a local repository of the same name,
<code>straight</code> is built from a local repository by the name <code>straight.el</code>.
Also note that only <code>.el</code> files are symlinked, since only they are
relevant to Emacs.</p>
<h3 dir="auto"><a id="user-content-where-do-repositories-come-from" aria-hidden="true" href="#where-do-repositories-come-from"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Where do repositories come from?</h3>
<p dir="auto">Local repositories provide a way to define packages without specifying
the contents of all of their files explicitly. But that&#39;s not helpful
without a higher-level way to define local repositories without
specifying the contents of all of <em>their</em> files. In <code>straight.el</code>,
local repositories are defined by two sources of information:</p>
<ul dir="auto">
<li>a <em>fetch recipe</em></li>
<li>the <em>version lockfiles</em></li>
</ul>
<p dir="auto">The fetch recipe is, like the build recipe, a concept representing a
certain subset of the package&#39;s overall recipe. The situation is more
interesting here because <code>straight.el</code> supports multiple
version-control backends. The version-control backend specified by the
fetch recipe is determined by the <code>:type</code> directive (which defaults to
<code>straight-default-vc</code>). Each version-control backend then accepts some
set of additional directives. For example, the <code>git</code> backend accepts:</p>
<ul dir="auto">
<li><code>:repo</code></li>
<li><code>:host</code></li>
<li><code>:branch</code></li>
<li><code>:nonrecursive</code></li>
<li><code>:fork</code></li>
<li><code>:protocol</code></li>
</ul>
<p dir="auto">If a local repository is not present, then its fetch recipe describes
how to obtain it. This is done using the <code>straight-vc-clone</code> function,
which delegates to one of the backend implementations of the <code>clone</code>
operation, according to <code>:type</code>. (The option <code>:type built-in</code> is a
special case that results in all version-control operations for the
package being ignored. You can also use <code>:type nil</code> to accomplish the
same, but with the difference that the package is still loaded from
its specified <code>:local-repo</code>.)</p>
<p dir="auto">However, even with a particular repository source specified, there is
still the question of which version of the repository to use. This is
where the version lockfiles come in. When a local repository is
cloned, the version lockfiles are searched to see if there is a
particular commit specified for that local repository&#39;s name. If so,
that commit is checked out. (For the <code>git</code> backend, commits are
40-character strings representing SHA-1 hashes, but the representation
of a commit identifier could be different across different backends.)</p>
<p dir="auto">The <code>straight-freeze-versions</code> and <code>straight-thaw-versions</code> methods
also use backend-delegating methods; in this case, they are
<code>straight-vc-get-commit</code> and <code>straight-vc-check-out-commit</code>.</p>
<p dir="auto">The fetch recipe and version lockfiles, together with the
configuration options for <code>straight.el</code>, precisely define the state of
a local repository. Of course, you may make any changes you want to
the local repository. But this information defines a &#34;canonical&#34; state
that you may revert to at any time.</p>
<p dir="auto">When this information is combined with the build recipe, <code>straight.el</code>
is able to construct canonical, universal versions of your Emacs
packages that will be the same everywhere and forever.</p>
<p dir="auto">Note that you do not have to provide fetch recipes or version
lockfiles. You may manage your local repositories manually, if you
wish, although this has obvious disadvantages in terms of
repeatability and maintainability.</p>
<h3 dir="auto"><a id="user-content-what-does-it-mean-to-load-a-package" aria-hidden="true" href="#what-does-it-mean-to-load-a-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What does it mean to load a package?</h3>
<p dir="auto">A prerequisite to loading a package is making sure the package has
been built. After that is done, loading the package means adding its
directory to the load path and evaluating its autoloads file.</p>
<p dir="auto">Adding the directory to the load path means that you can use <code>require</code>
to load the package&#39;s files. Note that <code>straight.el</code> does not do this
for you, since loading packages immediately is usually not necessary
and it immensely slows down Emacs startup.</p>
<p dir="auto">Evaluating the autoloads file means that calling the functions that
are defined in the autoloads file will automatically <code>require</code> the
files that define those functions. All modern packages define their
functions in autoloads and are designed to be loaded on-demand when
those functions are called. Antiquated packages may need you to
explicitly define autoloads, or to just <code>require</code> the package right
away.</p>
<h3 dir="auto"><a id="user-content-where-do-recipes-come-from" aria-hidden="true" href="#where-do-recipes-come-from"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Where do recipes come from?</h3>
<p dir="auto"><code>straight-use-package</code> does not require an actual recipe. You can just
give it a package name, and it will look up the recipe. This is done
using <em>recipe repositories</em>. Recipe repositories are set up as a
swappable backend system, much like the version-control backend
system.</p>
<p dir="auto">A recipe repository consists of four parts:</p>
<ul dir="auto">
<li>a fetch recipe for the local repository (this will typically include
<code>:build nil</code>, since recipe repositories usually do not need to be
built)</li>
<li>a function that, provided the local repository is already available,
returns a list of all packages that have recipes in the recipe
repository</li>
<li>a function that, given a package name, returns the recipe for that
package, or nil if the recipe repository does not provide a recipe
for the package</li>
<li>an entry in <code>straight-recipe-repositories</code> indicating that the
recipe provided actually corresponds to a recipe repository
(otherwise it would just be a regular package)</li>
</ul>
<p dir="auto">Note that recipe repositories are implemented as regular packages!
This means that all the usual package management operations work on
them as well. It also means that you use <code>straight-use-package</code> to
register them (although typically you will provide arguments to
<code>straight-use-package</code> so that the recipe repository is only
registered, and not cloned until it is needed; see <a href="#what-happens-when-i-call-straight-use-package">the section on
<code>straight-use-package</code></a>).</p>
<p dir="auto">If you give <code>straight-use-package</code> just a package name, then each
recipe repository in <code>straight-recipe-repositories</code> is checked for a
recipe for that package. Once one is found, it is used. Otherwise, an
error is signaled (unless the package is built-in to Emacs, according
to <code>package.el</code>).</p>
<p dir="auto">Note that <code>straight.el</code> uses its own recipe format which is similar,
but not identical, to the one used by MELPA (see <a href="#the-recipe-format">the section on the
recipe format</a> for information on the differences). The
recipe repository backends abstract over the formatting differences in
different recipe sources to translate recipes into the uniform format
used by <code>straight.el</code>. When you run <code>M-x straight-get-recipe</code>, the
translated recipe is what is returned.</p>
<h3 dir="auto"><a id="user-content-what-happens-when-i-call-straight-use-package" aria-hidden="true" href="#what-happens-when-i-call-straight-use-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What happens when I call <code>straight-use-package</code>?</h3>
<p dir="auto">There are three actions that <code>straight-use-package</code> can take:</p>
<ul dir="auto">
<li>Register a package&#39;s recipe with <code>straight.el</code>.</li>
<li>Clone a package&#39;s local repository, if it is missing.</li>
<li>Build a package, if it has been changed since the last time it was
built, and load it.</li>
</ul>
<p dir="auto">These actions must be performed in order. Depending on the arguments
you pass to <code>straight-use-package</code>, one, two, or all three may be
performed.</p>
<p dir="auto">The normal case is to do all three. The fetch recipe is only required
if the local repository is actually missing, but the build recipe is
always required.</p>
<p dir="auto">Deferred installation can be accomplished by telling
<code>straight-use-package</code> to stop if the local repository is not already
available. The deferred installation can be triggered by invoking
<code>straight-use-package</code> again, but telling it to go ahead and clone the
repository (this is the default behavior). Because
<code>straight-use-package</code> already registered the package&#39;s recipe the
first time, you don&#39;t have to provide it again.</p>
<p dir="auto">In some extraordinary circumstances (such as when <code>straight.el</code> is
bootstrapping its own installation), it may be desirable to clone a
package&#39;s local repository if it is missing, but to stop before
building and loading the package. This can also be done by
<code>straight-use-package</code>.</p>
<h3 dir="auto"><a id="user-content-what-does-it-mean-to-register-a-package" aria-hidden="true" href="#what-does-it-mean-to-register-a-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What does it mean to register a package?</h3>
<p dir="auto">Package registration is the first action taken by
<code>straight-use-package</code>, before building and cloning. First, if only a
package name was provided to <code>straight-use-package</code>, a recipe is
obtained from the configured recipe repositories. Next, the resulting
recipe is recorded in various caches.</p>
<p dir="auto">This is important, since it allows for several things to happen:</p>
<ul dir="auto">
<li>if you later want to perform another operation on the package using
<code>straight.el</code>, you do not need to provide the recipe again</li>
<li>if you use a custom recipe for Package A, and Package B requires
Package A as a dependency, your custom recipe is remembered and
re-used when Package A is used as a dependency, to avoid conflicts.</li>
<li>when multiple packages are built from the same local repository, and
you have specified a custom fetch recipe for one of those packages,
<code>straight.el</code> can intelligently merge that fetch recipe into the
automatically retrieved recipes of dependencies, in order to avoid
conflicts.</li>
<li><code>straight.el</code> knows which packages you have installed, if you want
to perform interactive operations on them.</li>
<li>if you accidentally provide two different recipes for the same
package, <code>straight.el</code> can issue a helpful warning, since this may
lead to surprising behavior.</li>
</ul>
<h3 dir="auto"><a id="user-content-how-does-straightel-know-when-to-rebuild-packages" aria-hidden="true" href="#how-does-straightel-know-when-to-rebuild-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How does <code>straight.el</code> know when to rebuild packages?</h3>
<p dir="auto">When you request for <code>straight.el</code> to load a package (using
<code>straight-use-package</code>), it first checks if the package needs to be
rebuilt. This means that some of the files in its local repository
have been modified since the last time the package was built.
<code>straight.el</code> uses an optimized <code>find(1)</code> command to check for package
modifications, and it uses some caching mechanisms to perform bulk
<code>find(1)</code> operations on multiple packages, to speed up these checks
(although it never performs optimizations that may result in erroneous
behavior).</p>
<p dir="auto">This check occurs during Emacs init, when your init-file makes calls
to <code>straight-use-package</code>. You may notice a significant delay on the
first <code>straight-use-package</code> call, because this is when <code>straight.el</code>
performs a bulk <code>find(1)</code> call and caches the results for later usage
(this speeds up init considerably). The total delay is likely to be on
the order of 100ms for a double-digit number of packages.</p>
<p dir="auto">The rebuild detection system is what allows for you to make changes to
packages whenever you would like, without performing any additional
operations.</p>
<p dir="auto">(Packages are also rebuilt when their recipes change, of course.)</p>
<h3 dir="auto"><a id="user-content-how-does-straightel-know-what-packages-are-installed" aria-hidden="true" href="#how-does-straightel-know-what-packages-are-installed"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How does <code>straight.el</code> know what packages are installed?</h3>
<p dir="auto"><code>straight.el</code> does not require you to declare a central list of
packages anywhere, like Cask does. Instead, it determines what
packages are to be loaded implicitly, by your invocations of
<code>straight-use-package</code> during Emacs initialization. Furthermore,
<code>straight.el</code> allows you to install packages after initialization
using <code>M-x straight-use-package</code> (or even by evaluating
<code>straight-use-package</code> forms). However, <code>straight.el</code> still provides
advanced features such as bulk package management and version locking.
This creates some interesting challenges which other package managers
do not have to deal with.</p>
<p dir="auto"><code>straight.el</code> solves these problems using a concept called
<em>transactions</em>. The operation of the transaction system is mostly
transparent to the user, at least in recent versions of <code>straight.el</code>.
Basically, it provides a way for <code>straight.el</code> to keep track of what
happens within a single user operation (e.g. evaluate a buffer of
<code>straight-use-package</code> calls, or load the init-file).</p>
<p dir="auto"><code>straight.el</code> uses the transaction system to keep track of what
packages you request in your init-file. If you invoke
<code>straight-use-package</code> interactively, then this invalidates that
information, since you have now requested a package that is not in
your init-file. For this reason, if you have invoked
<code>straight-use-package</code> interactively, running <code>M-x straight-freeze-versions</code> will prompt you to first reload your
init-file.</p>
<p dir="auto"><strong>Note: reloading your init-file must have the effect of running all
of the same <code>straight.el</code>-related functions again. For example, if you
bootstrap <code>straight.el</code> in a sub-file that you only <code>require</code> instead
of <code>load</code>, then the reloading functionality will not work correctly
and you may receive the message <code>Caches are still outdated; something is seriously wrong</code>. See <a href="https://github.com/raxod502/straight.el/issues/437" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/437/hovercard">#437</a> for discussion.</strong></p>
<h2 dir="auto"><a id="user-content-comparison-to-other-package-managers" aria-hidden="true" href="#comparison-to-other-package-managers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to other package managers</h2>
<p dir="auto">(Disclaimer: while I try to be as objective and comprehensive as
possible here, I&#39;m obviously biased. Please submit corrections if I
have unfairly disparaged your favorite package manager!)</p>
<p dir="auto">There are many package managers for Emacs, ranging from simple scripts
to download files from EmacsWiki to full-featured package management
solutions like <code>straight.el</code>. Here are the most feature-rich
alternatives to <code>straight.el</code>:</p>
<ul dir="auto">
<li><a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Packages.html" rel="nofollow"><code>package.el</code></a>: de facto standard, bundled with Emacs.</li>
<li><a href="https://github.com/quelpa/quelpa">Quelpa</a>: allows you to use external sources like GitHub with
<code>package.el</code>. Essentially a local <a href="http://melpa.org/#/" rel="nofollow">MELPA</a>.</li>
<li><a href="https://github.com/cask/cask">Cask</a>: another <code>package.el</code> wrapper. Specify your dependencies in a
<code>Cask</code> file; can be used for project management or an Emacs
configuration.</li>
<li><a href="https://github.com/dimitri/el-get">el-get</a>: ridiculously OP in terms of how many different sources you
can pull packages from (<code>package.el</code>, every known VCS, distro
package managers, <code>go get</code>(!!)).</li>
<li><a href="https://github.com/emacscollective/borg">Borg</a>: assimilates packages as Git submodules into <code>.emacs.d</code>,
relying on <a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a>.</li>
<li>&#34;Screw package managers! I&#39;ll just handle it all myself!&#34;</li>
</ul>
<h3 dir="auto"><a id="user-content-tldr-1" aria-hidden="true" href="#tldr-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TL;DR</h3>
<p dir="auto">Here is a summary of the main differences in philosophy between the
package managers:</p>
<ul dir="auto">
<li>Use <code>package.el</code> if you want package management to be as easy as
possible, and do not much care for installing packages from specific
sources, keeping track of their versions, or doing local development
on them.</li>
<li>Use Quelpa if you like <code>package.el</code> but really wish you could
specify the sources of your packages.</li>
<li>Use Cask if you like <code>package.el</code> but wish it came with some project
management tools, as well.</li>
<li>Use el-get if you want to easily install packages from as many
different sources as possible.</li>
<li>Use Borg if you like a more lightweight approach to package
management that leverages existing solutions, if contributing
changes to packages upstream is important to you, and if using Git
submodules isn&#39;t a deal-breaker.</li>
<li>Use the manual approach if you need to contribute changes to a
package that is versioned in something other than Git.</li>
<li>Use <code>straight.el</code> if you like reproducibility in your Emacs
configuration, you regularly contribute changes to packages
upstream, or you are writing an Emacs configuration to be used by
others.</li>
</ul>
<p dir="auto">And here is a brief list of the main reasons you might not want to use
<code>straight.el</code>:</p>
<ul dir="auto">
<li><code>straight.el</code> is largely unusable if you do not have Git installed,
although it is still possible to use the package-building features
if you manage your repositories manually (you also cannot use the
magic bootstrap snippet, in that case). If you don&#39;t want to install
Git, you&#39;ll have to use <code>package.el</code> or take the manual approach.</li>
<li><code>straight.el</code> is not built in to Emacs. If you want something that
will work right out of the box, you&#39;re stuck with <code>package.el</code> or
the manual approach.</li>
<li><code>straight.el</code> takes a minute or two to update all your packages,
since it does not rely on a centralized server. If you want quick
update checking, you&#39;ll have to use <code>package.el</code>.</li>
<li><code>straight.el</code> does not provide any user interface for package
management. For that, you&#39;ll have to use <code>package.el</code>, el-get, Cask,
or Borg (which expects you to use <a href="https://github.com/emacscollective/epkg"><code>epkg</code></a> for browsing
packages).</li>
<li><code>straight.el</code> does not currently support using only stable versions
of packages (i.e. tagged revisions), although this is a <a href="https://github.com/raxod502/straight.el/issues/31" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/31/hovercard">planned
feature</a>. If this is important to you, you probably want to go
with <code>package.el</code> (with GNU ELPA and MELPA Stable), Cask, or Quelpa.</li>
<li>If you don&#39;t like having to modify your init-file to do package
management, then <code>straight.el</code> is absolutely not for you. You want
<code>package.el</code>, Quelpa, el-get, or Borg.</li>
<li>If you really want to contribute changes to packages that are not
versioned in Git, then <code>straight.el</code> will not help you. You&#39;ll have
to manage the package&#39;s repository manually. Unfortunately, there is
no existing package manager that supports both non-Git
version-control systems and contributing changes upstream. You&#39;ll
have to go with the manual approach.</li>
<li><code>straight.el</code> does not provide project management tools. It is a
package manager. If you want project management tools, check out
Cask.</li>
<li><code>straight.el</code> is quite new and moving fast. Things might break. The
other package managers can generally be ranked as follows, from most
active to least active: el-get, Quelpa, Borg, Cask, <code>package.el</code>
(glacial).</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-packageel" aria-hidden="true" href="#comparison-to-packageel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to <code>package.el</code></h3>
<ul dir="auto">
<li><code>package.el</code> downloads pre-built packages from central servers using
a special (undocumented?) HTTP protocol, while <code>straight.el</code> clones
Git (or other) repositories and builds packages locally.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel" aria-hidden="true" href="#advantages-of-straightel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> allows you to install a package from any branch of any
Git repository. <code>package.el</code> only allows you to install a package
from a <code>package.el</code>-compliant central server.</li>
<li><code>straight.el</code> allows you to check out any Git revision of any
package. <code>package.el</code> only allows you to install the latest version,
and there is no way to downgrade.</li>
<li><code>straight.el</code> supports Emacsmirror, while <code>package.el</code> does not.</li>
<li><code>straight.el</code> uses your init-file as the sole source of truth for
package operations. <code>package.el</code> loads every package you ever
installed at startup, even if some of those packages are no longer
referenced by your init-file.</li>
<li><code>straight.el</code> supports 100% reproducibility for your Emacs packages
with version lockfiles. <code>package.el</code> cannot provide reproducibility
for the set of packages installed, the central servers they were
installed from, or the versions in use.</li>
<li><code>straight.el</code> allows you to make arbitrary changes to your packages
locally. While it is possible to make local changes to <code>package.el</code>
packages, these changes cannot be version-controlled and they will
be silently overwritten whenever <code>package.el</code> performs an update.</li>
<li><code>straight.el</code> allows you to perform arbitrary version-control
operations on your package&#39;s Git repositories, including
contributing changes upstream. <code>straight.el</code> has explicit support
for specifying both an upstream and a fork for a package.
Contributing changes upstream with <code>package.el</code> is impossible.</li>
<li><code>straight.el</code> is designed with <code>emacs -Q</code> bug reports in mind.
<code>package.el</code> is unsuitable for minimal bug reproductions, since it
automatically loads all of your packages on any package operation,
even in <code>emacs -Q</code>.</li>
<li><code>straight.el</code> operates quietly when all is going well. <code>package.el</code>
displays all messages, errors, and warnings that come from
byte-compilation and autoload generation.</li>
<li><code>straight.el</code> considers modifying the user&#39;s init-file extremely
uncouth. <code>package.el</code> aggressively inserts (via Customize)
auto-generated code setting <code>package-selected-packages</code> into the
init-file whenever a package is installed. Furthermore, <code>package.el</code>
has a history of impolite treatment of user configuration, which I
think says some things about the design: until Emacs 27.1 (when <a href="https://git.savannah.gnu.org/cgit/emacs.git/commit/?id=24acb31c04b4048b85311d794e600ecd7ce60d3b" rel="nofollow">my
patch to fix this issue</a> was adopted after
around 300 emails&#39; worth of squabbling on emacs-devel), it also
inserted a call to the <code>package-initialize</code> function into the
init-file if it was not already present, with the officially
recommended workaround &#34;comment it out if you don&#39;t want it, but
don&#39;t get rid of it&#34;.</li>
<li><code>straight.el</code> has a profile system that allows users of someone
else&#39;s Emacs configuration to manage an additional subset of
packages, or to override upstream package configuration, without
forking the upstream. <code>package.el</code> has no such concept.</li>
<li><code>straight.el</code> is developed openly on GitHub, using a modern <a href="https://github.com/raxod502/straight.el/issues">issue
tracker</a> and continuous integration from GitHub Actions. It
welcomes contributions of any type. <code>straight.el</code> is licensed under
the permissive MIT license and does not require a copyright
assignment. <code>straight.el</code> is developed actively and has explicit
support for installing development versions of itself, as well as
for contributing upstream changes. <code>package.el</code> is maintained as a
part of Emacs core, meaning that the contribution process is poorly
documented and discouraging. Releases of <code>package.el</code> coincide with
releases of Emacs, which are infrequent and inflexible. There is no
issue tracker specifically for <code>package.el</code>, only the Emacs bug
tracker and the emacs-devel mailing list. Contributing to
<code>package.el</code> requires a poorly-documented, cumbersome copyright
assignment process and is done by submitting patches to an
antiquated mailing list, unsupported by modern code review tooling
or continuous integration.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-packageel" aria-hidden="true" href="#advantages-of-packageel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>package.el</code></h4>
<ul dir="auto">
<li><code>package.el</code> does not require that you have Git installed, since the
central server deals with where the packages originally came from.
<code>straight.el</code> cannot be used at all without Git.</li>
<li><code>package.el</code> is built in to Emacs and does not require additional
configuration to get started with. <code>straight.el</code> requires the use of
a 10-line bootstrap snippet in your init-file.</li>
<li><code>package.el</code> can perform bulk package updates more quickly since it
relies on central servers.</li>
<li><code>package.el</code> has a user interface for package management that also
displays package metadata. <code>straight.el</code> has no user interface for
package management; any UI is provided by the user&#39;s
<code>completing-read</code> framework.</li>
<li><code>package.el</code> does not require you to touch your init-file to install
packages, while <code>straight.el</code> absolutely refuses to permanently
install a package without an explicit reference to it in your
init-file (although this may be considered an advantage, depending
on your perspective).</li>
<li>Using MELPA Stable, <code>package.el</code> can install only stable versions of
packages. By default, <code>package.el</code> also installs only stable
versions of packages from GNU ELPA. These modes of operation are
unsupported by <code>straight.el</code> at this time, although this is a
<a href="https://github.com/raxod502/straight.el/issues/31" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/31/hovercard">planned feature</a>.</li>
</ul>
<h4 dir="auto"><a id="user-content-additional-notes" aria-hidden="true" href="#additional-notes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional notes</h4>
<ul dir="auto">
<li><code>package.el</code> and <code>straight.el</code> usually take approximately the same
time to install packages, despite the fact that <code>straight.el</code> is
cloning entire Git repositories. This is because network latency and
byte-compilation are the dominant factors.</li>
<li>Some <code>package.el</code> servers build packages from non-Git upstreams.
<code>package.el</code> can install these packages, while <code>straight.el</code> cannot.
However, since <code>package.el</code> has no version-control support, this is
more or less equivalent to installing those packages from the
<a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a>, which <code>straight.el</code> can do by default.</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-quelpa" aria-hidden="true" href="#comparison-to-quelpa"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to Quelpa</h3>
<ul dir="auto">
<li>Quelpa allows for fetching packages from arbitrary sources and
building them into a format that can be installed by <code>package.el</code>.
<code>straight.el</code> has a philosophy which is fundamentally incompatible
with <code>package.el</code>, and non-compatibility with <code>package.el</code> is one of
its design goals.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel-1" aria-hidden="true" href="#advantages-of-straightel-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> has out-of-the-box compatibility with MELPA, GNU ELPA,
and Emacsmirror, while Quelpa only has support for MELPA. To use GNU
ELPA, you must drop down to <code>package.el</code>. <a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a> is not
supported by default, although it is easy to specify an Emacsmirror
repository in a recipe. While Quelpa allows you to specify custom
recipe folders, it does not have support for cloning these folders
automatically from version control, nor for generating the recipes
in any way other than copying them literally from files.
<code>straight.el</code> allows you full flexibility in this regard.</li>
<li><code>straight.el</code> has integrated support for selecting particular Git
revisions of packages. This process is more manual in Quelpa, as it
requires placing the commit hash into the recipe, which disables
updates.</li>
<li><code>straight.el</code> uses your init-file as the sole source of truth for
package operations. Since Quelpa is based on <code>package.el</code>, it also
loads every package you ever installed at startup, even if those
packages are no longer referenced by your init-file. Furthermore,
there is an additional caching layer, so that deleting a package
from the <code>package.el</code> interface and removing it from your init-file
still does not actually delete it.</li>
<li><code>straight.el</code> supports 100% reproducibility for your Emacs packages
with version lockfiles. Quelpa can theoretically provide some
measure of reproducibility, but this requires significant manual
effort since all packages are not associated with specific revisions
by default, nor is the revision of MELPA saved anywhere.</li>
<li><code>straight.el</code> allows you to make arbitrary changes to your packages
locally. While it is possible to make local changes to Quelpa
packages, there are two places to do so: the built package, which is
the default destination of <code>find-function</code>, and the original
repository. Changes to the former are not version-controlled and
will be silently overwritten by <code>package.el</code> operations, while
changes to the latter will be silently overwritten by Quelpa
operations.</li>
<li><code>straight.el</code> has explicit support for configuring both an upstream
repository and a fork for the same package. Quelpa does not have
such a concept.</li>
<li><code>straight.el</code> allows you complete control over how your repositories
are managed, and the default behavior is to draw all packages
versioned in a single repository from a single copy of that
repository. Quelpa is hardcoded to require a separate repository for
each package, so that installing Magit requires three copies of the
Magit repository.</li>
<li><code>straight.el</code> builds packages using symlinks, meaning that
<code>find-function</code> works as expected. Quelpa builds packages by
copying, a feature inherited from MELPA. This means that
<code>find-function</code> brings you to the built package, instead of the
actual repository, which is not version-controlled and will be
overwritten whenever <code>package.el</code> performs an update.</li>
<li><code>straight.el</code> allows you to perform arbitrary version-control
operations on your package&#39;s Git repositories. Quelpa allows this,
but all local changes will be silently overridden whenever Quelpa
performs an update.</li>
<li><code>straight.el</code> is designed with <code>emacs -Q</code> bug reports in mind. Since
Quelpa is based on <code>package.el</code>, it is also unsuitable for minimal
bug reproductions, since it automatically loads all of your packages
on any package operation, even in <code>emacs -Q</code>.</li>
<li><code>straight.el</code> operates quietly when all is going well. Since Quelpa
is based on <code>package.el</code>, it displays all messages, errors, and
warnings that come from byte-compilation and autoload generation. It
also displays additional messages while cloning Git repositories,
downloading files, and building packages from their repositories
into <code>package.el</code> format.</li>
<li><code>straight.el</code> does not modify your init-file. Since Quelpa is based
on <code>package.el</code>, it inherits the behavior of aggressively inserting
a call to <code>package-initialize</code> into your init-file on any package
management operation.</li>
<li><code>straight.el</code> has a profile system that allows users of someone
else&#39;s Emacs configuration to manage an additional subset of
packages, or to override upstream package configuration, without
forking the upstream. Quelpa has no such concept.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-quelpa" aria-hidden="true" href="#advantages-of-quelpa"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of Quelpa</h4>
<ul dir="auto">
<li>Quelpa supports all the version-control systems supported by MELPA,
which is to say almost every commonly and uncommonly used VCS.
<code>straight.el</code> only supports Git, although it is designed to support
other version-control backends.</li>
<li>Quelpa allows for installing only stable versions of packages, from
any source. This mode of operation is unsupported by <code>straight.el</code>,
although it is a <a href="https://github.com/raxod502/straight.el/issues/31" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/31/hovercard">planned feature</a>.</li>
<li>Since Quelpa is based on <code>package.el</code>, it inherits a user interface
for package management that also displays package metadata.
<code>straight.el</code> has no such interface.</li>
</ul>
<h4 dir="auto"><a id="user-content-additional-notes-1" aria-hidden="true" href="#additional-notes-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional notes</h4>
<ul dir="auto">
<li><code>straight.el</code> and Quelpa both allow you to manage your package&#39;s
local repositories manually, if you wish.</li>
<li>In principle, <code>straight.el</code> and Quelpa have identical package
installation times, since they are performing the same operations.
In practice, Quelpa is slightly slower since it builds packages by
copying rather than symlinking, and it clones multiple copies of the
same Git repository when multiple packages are built from it.</li>
<li><code>straight.el</code> encourages you to keep a tight handle on your package
versions by default. Quelpa encourages you to stick to the latest
versions of your packages, and to upgrade them automatically.</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-cask" aria-hidden="true" href="#comparison-to-cask"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to Cask</h3>
<p dir="auto">I have not used Cask extensively, so please feel especially free to
offer corrections for this section.</p>
<ul dir="auto">
<li>Cask installs packages using the <code>package.el</code> protocol, based on a
<code>Cask</code> file written in the Cask DSL. <code>straight.el</code> eschews
<code>package.el</code> entirely, and clones packages from source based on how
you invoke <code>straight-use-package</code> in your init-file.</li>
<li>Cask focuses more on being a build manager, like Maven or Leiningen,
while <code>straight.el</code> focuses <em>exclusively</em> on being a package
manager.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel-2" aria-hidden="true" href="#advantages-of-straightel-2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> has out-of-the-box compatibility with Emacsmirror,
while Cask only supports <code>package.el</code>-compliant repositories.
However, it is easy to specify an Emacsmirror repository in a
recipe. Cask does not support custom package sources. <code>straight.el</code>
supports MELPA, GNU ELPA, and Emacsmirror, and allows you to add any
other sources you would like.</li>
<li><code>straight.el</code> has integrated support for selecting particular Git
revisions of packages. This process is more manual in Cask, as it
requires placing the commit hash into the recipe, which disables
updates.</li>
<li><code>straight.el</code> uses your init-file as the sole source of truth for
package operations. Since Cask is based on <code>package.el</code>, it loads
every package you ever installed at startup, even if some of those
packages are no longer referenced by your <code>Cask</code> file.</li>
<li><code>straight.el</code> determines your package management configuration
implicitly by detecting how you call <code>straight-use-package</code> in your
init-file and making the appropriate changes immediately. Cask
requires manual intervention (for example, issuing a <code>cask install</code>
command when you have updated your <code>Cask</code> file). However, both
<code>straight.el</code> and Cask can be considered declarative package
managers.</li>
<li><code>straight.el</code> supports 100% reproducibility for your Emacs packages
with version lockfiles. Cask can theoretically provide some measure
of reproducibility, but this requires significant manual effort
since all packages are not associated with specific revisions by
default, nor is the revision of Cask saved anywhere.</li>
<li><code>straight.el</code> allows you to make arbitrary changes to your packages
locally. While it is possible to make local changes to Cask
packages, these will not be version-controlled and they will be
silently overwritten or shadowed when Cask performs an update.</li>
<li><code>straight.el</code> allows you to perform arbitrary version-control
operations on your package&#39;s Git repositories, including
contributing changes upstream. <code>straight.el</code> has explicit support
for specifying both an upstream and a fork for a package.
Contributing changes upstream with Cask is impossible.</li>
<li><code>straight.el</code> is designed with <code>emacs -Q</code> bug reports in mind. Cask
appears to be unsuitable for minimal bug reproductions, since there
does not appear to be a straightforward way to load a single
package, without loading all other packages configured in your
<code>Cask</code> file.</li>
<li><code>straight.el</code> operates quietly when all is going well. Since Cask is
based on <code>package.el</code>, it displays all messages, errors, and
warnings that come from byte-compilation and autoload generation.</li>
<li><code>straight.el</code> has a profile system that allows users of someone
else&#39;s Emacs configuration to manage an additional subset of
packages, or to override upstream package configuration, without
forking the upstream. Cask has no such concept.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-cask" aria-hidden="true" href="#advantages-of-cask"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of Cask</h4>
<ul dir="auto">
<li>Cask provides a useful toolbox of operations for project management,
which are completely absent from <code>straight.el</code>.</li>
<li>Since Cask is based on <code>package.el</code>, it does not require that you
have Git installed. (It does require Python, however.) <code>straight.el</code>
is mostly unusable without Git.</li>
<li>Since Cask is based on <code>package.el</code>, it can perform bulk package
updates more quickly than <code>straight.el</code>.</li>
<li>Since Cask is based on <code>package.el</code>, it inherits a user interface
for package management that also displays package metadata.</li>
<li>Since Cask is based on <code>package.el</code>, you can install packages
without editing a file manually, although this rather defeats the
entire purpose of using Cask instead of <code>package.el</code>. <code>straight.el</code>
absolutely refuses to permanently install a package without an
explicit reference to it in your init-file (although this may be
considered an advantage, depending on your perspective).</li>
<li>Using MELPA Stable, Cask can install only stable versions of
packages. By default, Cask also installs only stable versions of
packages from GNU ELPA. These modes of operation are unsupported by
<code>straight.el</code> at this time, although this is a <a href="https://github.com/raxod502/straight.el/issues/31" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/31/hovercard">planned
feature</a>.</li>
<li>Cask supports more version-control systems than <code>straight.el</code> (which
only supports Git).</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-el-get" aria-hidden="true" href="#comparison-to-el-get"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to el-get</h3>
<p dir="auto">I have not used el-get extensively, so please feel especially free to
offer corrections for this section.</p>
<ul dir="auto">
<li>Both el-get and <code>straight.el</code> implement their own package management
abstractions instead of delegating to <code>package.el</code>. However:
<ul dir="auto">
<li>el-get goes the route of adding as many package sources as
possible (e.g. <code>package.el</code>, many different version-control
systems, various specific websites, and even system package
managers) so that packages can be used very easily.</li>
<li><code>straight.el</code> only supports Git and in doing so is able to
provide more advanced package management features.</li>
</ul>
</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel-3" aria-hidden="true" href="#advantages-of-straightel-3"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> uses your init-file as the sole source of truth for
package operations. el-get has additional metadata stored outside
the init-file, although specifying all packages in your init-file is
a supported mode of operation.</li>
<li><code>straight.el</code> supports 100% reproducibility for your Emacs packages
with version lockfiles. el-get can theoretically provide some
measure of reproducibility, but this requires significant manual
effort since all packages are not associated with specific revisions
by default, nor is the revision of el-get saved anywhere.</li>
<li><code>straight.el</code> allows you to make arbitrary changes to your packages
locally, and conflicts during updates are presented to the user and
resolved interactively. While it is possible to make local changes
to el-get packages, the el-get manual warns that such changes may
break the update mechanism.</li>
<li><code>straight.el</code> has explicit support for configuring both an upstream
repository and a fork for the same package. el-get does not have
such a concept.</li>
<li><code>straight.el</code> allows you to perform arbitrary version-control
operartions on your package&#39;s Git repositories. el-get allows this,
but local changes will be overwritten when el-get performs an
update.</li>
<li><code>straight.el</code> provides a suite of powerful interactive workflows for
performing bulk operations on your package&#39;s Git repositories.
el-get only allows you to install, uninstall, and update packages.</li>
<li><code>straight.el</code> operates quietly when all is going well. el-get
reports its progress verbosely.</li>
<li><code>straight.el</code> has a profile system that allows users of someone
else&#39;s Emacs configuration to manage an additional subset of
packages, or to override upstream package configuration, without
forking the upstream. el-get has no such concept.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-el-get" aria-hidden="true" href="#advantages-of-el-get"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of el-get</h4>
<ul dir="auto">
<li>el-get supports virtually all known version-control systems, as well
as system package managers, EmacsWiki, arbitrary HTTP, and even <code>go get</code>. <code>straight.el</code> supports only Git, although it does allow you to
manage your local repositories manually if you would like.</li>
<li>el-get has been around since 2010 and is on its fifth major version,
whereas <code>straight.el</code> was created in January 2017 and is only now
approaching a 1.0 release. Clearly, el-get is more stable, although
despite its recency <code>straight.el</code> is already almost 50% of the size
of el-get, by the line count. Both package managers are actively
maintained.</li>
<li>el-get has a recipe format which is several orders of magnitude more
powerful than that of <code>straight.el</code>, since it supports many more
package sources that can be configured and since it allows for a
more complex build process.</li>
<li>el-get provides a number of features for running per-package
initialization and setup code, including pulling that code from
arbitrary sources. <code>straight.el</code> does not support this and expects
you to use a dedicated tool like <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a> (with
which integration is built in) for that purpose.</li>
<li>el-get has a user interface for package management that also
displays package metadata, similarly to <code>package.el</code>. <code>straight.el</code>
has no user interface for package management; any UI is provided by
the user&#39;s <code>completing-read</code> framework.</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-borg" aria-hidden="true" href="#comparison-to-borg"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to Borg</h3>
<ul dir="auto">
<li>Borg and <code>straight.el</code> are perhaps the two most similar package
managers on this list. The difference is that Borg is very minimal
and expects you to complement it with other tools such as <a href="https://magit.vc/" rel="nofollow">Magit</a>,
<a href="https://github.com/emacscollective/epkg">epkg</a>, <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a>, and <a href="https://github.com/tarsius/auto-compile">auto-compile</a>. On the
other hand, <code>straight.el</code> aspires to be a one-stop package
management solution, although it does not try to replace dedicated
version-control packages (Magit) or dedicated package
<em>configuration</em> packages (<code>use-package</code>).</li>
<li>Borg uses Git submodules, while <code>straight.el</code> uses independently
managed Git repositories.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel-4" aria-hidden="true" href="#advantages-of-straightel-4"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> supports MELPA, GNU ELPA, Emacsmirror, and custom
recipe sources. Borg only supports Emacsmirror and custom recipe
sources. However, as the Emacsmirror is a near-complete superset of
both GNU ELPA and MELPA, this does not necessarily mean you have
access to more packages: it just means you benefit from the recipe
maintenance efforts of the MELPA team and the Emacsmirror team,
rather than only the latter.</li>
<li>Borg, even when combined with related tools, do not allow for the
kind of massive interactive repository management provided by
<code>straight.el</code>.</li>
<li><code>straight.el</code> provides an API designed for other version-control
backends to be added in future. Borg is inextricably tied to Git.</li>
<li>The interface for Git submodules has a number of sharp edges.</li>
<li><code>straight.el</code> provides dependency management. This is a manual
process in Borg.</li>
<li><code>straight.el</code> provides mechanisms for updating your packages. This
is a manual process in Borg.</li>
<li><code>straight.el</code> is configured solely by how you use in your init-file.
Configuring Borg requires customizing <code>~/.emacs.d/.gitmodules</code>,
which means (for example) that you cannot generate recipes
dynamically. (However, the handling of configuration is
<a href="https://github.com/raxod502/straight.el/issues/95#issuecomment-316379495" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/95/hovercard">planned</a> to be improved in a future release.)</li>
<li><code>straight.el</code> has a profile system that allows users of someone
else&#39;s Emacs configuration to manage an additional subset of
packages, or to override upstream package configuration, without
forking the upstream. Borg has no such concept.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-borg" aria-hidden="true" href="#advantages-of-borg"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of Borg</h4>
<ul dir="auto">
<li>Borg does a heck of a lot less magic, so if you want a solution with
simple implementation details, <code>straight.el</code> may not be for you.
(But see the developer manual and docstrings, first.)</li>
</ul>
<h3 dir="auto"><a id="user-content-comparison-to-the-manual-approach" aria-hidden="true" href="#comparison-to-the-manual-approach"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comparison to the manual approach</h3>
<ul dir="auto">
<li>The manual approach is to download packages yourself and put them on
your <code>load-path</code>. <code>straight.el</code> is more or less what you get when
you take the manual approach, think very hard about the best way to
do everything, and then automate all of it.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-straightel-5" aria-hidden="true" href="#advantages-of-straightel-5"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of <code>straight.el</code></h4>
<ul dir="auto">
<li><code>straight.el</code> figures out where to clone your packages from for you.</li>
<li><code>straight.el</code> byte-compiles your packages for you and generates
their autoloads automatically.</li>
<li><code>straight.el</code> frees you from needing to manually recompile and
regenerate autoloads.</li>
<li><code>straight.el</code> keeps track of dependencies for you.</li>
<li><code>straight.el</code> provides tools to manage all your packages in bulk,
which would otherwise be a long, tedious process.</li>
<li><code>straight.el</code> allows you to get reproducibility for your
configuration without needing to keep all of your packages under
version control.</li>
<li><code>straight.el</code> links packages into a separate build directories.
Running packages directly from their repositories has a number of
problems, including:
<ul dir="auto">
<li>making it impossible to run only one package, if others are
provided in the same repository.</li>
<li>making your working directory dirty when the package author
forgot to add their build artifacts like <code>*.elc</code> and autoload
files to the <code>.gitignore</code>.</li>
<li>instantly losing compatibility with MELPA recipes.</li>
</ul>
</li>
<li><code>straight.el</code> offers you a single entry point to install only a
single package in isolation, for a minimal bug reproduction. With
the manual approach this would be more complicated, especially if
the package has dependencies.</li>
<li><code>straight.el</code> frees you from needing to think about package
management, since I already did all the thinking to figure how best
to design everything.</li>
</ul>
<h4 dir="auto"><a id="user-content-advantages-of-the-manual-approach" aria-hidden="true" href="#advantages-of-the-manual-approach"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advantages of the manual approach</h4>
<ul dir="auto">
<li>No dependencies.</li>
<li>You learn a lot, if you don&#39;t give up first.</li>
<li>You might end up writing a package manager (case in point).</li>
<li>This is the only way to deal with packages that have non-Git
upstreams which you need to contribute changes to. (However, you can
always use the manual approach for one package and <code>straight.el</code> for
the rest. Or you can just eschew <code>straight.el</code>&#39;s version-control
support for that package, and use it only for building the package.)</li>
</ul>
<h2 dir="auto"><a id="user-content-user-manual" aria-hidden="true" href="#user-manual"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>User manual</h2>
<p dir="auto">This section tells you everything you need to know about the
user-facing features of <code>straight.el</code>. For implementation details, see
the <a href="#developer-manual">developer manual</a>. It may also be helpful to get some
perspective on the overarching concepts of <code>straight.el</code> from the
<a href="#conceptual-overview">conceptual overview</a>.</p>
<h3 dir="auto"><a id="user-content-bootstrapping-straightel" aria-hidden="true" href="#bootstrapping-straightel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bootstrapping <code>straight.el</code></h3>
<p dir="auto">In order to use <code>straight.el</code>, you will need to somehow get it loaded
into Emacs. (This is easy for <code>package.el</code>, since <code>package.el</code> is
built in to Emacs. <code>straight.el</code> must work a little harder.)</p>
<p dir="auto"><code>straight.el</code> comes with a file to do just this, <code>bootstrap.el</code>. All
you need to do is load that file. You can do this with <code>M-x load-file</code>
or by a call to <code>load</code> in your init-file. However, there is an obvious
shortcoming: <code>bootstrap.el</code> will only be available once <code>straight.el</code>
is already installed.</p>
<p dir="auto">You could just invoke <code>git clone</code> from your init-file, if
<code>straight.el</code> is not installed, but then you would have to manually
take care of selecting the correct branch, parsing your version
lockfile to check out the right revision, and so on. Instead, you can
just use this snippet, which uses a copious amount of magic to take
care of all these details for you:</p>

<div data-snippet-clipboard-copy-content="(defvar bootstrap-version)
(let ((bootstrap-file
       (expand-file-name &#34;straight/repos/straight.el/bootstrap.el&#34; user-emacs-directory))
      (bootstrap-version 5))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
        (url-retrieve-synchronously
         &#34;https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el&#34;
         &#39;silent &#39;inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil &#39;nomessage))"><pre>(<span>defvar</span> <span>bootstrap-version</span>)
(<span>let</span> ((bootstrap-file
       (<span>expand-file-name</span> <span><span>&#34;</span>straight/repos/straight.el/bootstrap.el<span>&#34;</span></span> user-emacs-directory))
      (bootstrap-version <span>5</span>))
  (<span>unless</span> (<span>file-exists-p</span> bootstrap-file)
    (<span>with-current-buffer</span>
        (<span>url-retrieve-synchronously</span>
         <span><span>&#34;</span>https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el<span>&#34;</span></span>
         <span>&#39;silent</span> <span>&#39;inhibit-cookies</span>)
      (<span>goto-char</span> (<span>point-max</span>))
      (<span>eval-print-last-sexp</span>)))
  (<span>load</span> bootstrap-file <span>nil</span> <span>&#39;nomessage</span>))</pre></div>

<p dir="auto">Despite the reference to <code>develop</code>, this snippet actually installs
from the <code>master</code> branch by default, just like every other package.
Furthermore, the correct revision of <code>straight.el</code> is checked out, if
you have one specified in your lockfile. Even better, you can
<a href="#overriding-the-recipe-for-straightel">override the recipe for <code>straight.el</code></a>,
just like for any other package.</p>
<h3 dir="auto"><a id="user-content-installing-packages-programmatically" aria-hidden="true" href="#installing-packages-programmatically"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing packages programmatically</h3>
<p dir="auto">The primary entry point to <code>straight.el</code> is the <code>straight-use-package</code>
function. It can be invoked interactively (for installing a package
temporarily) or programmatically (for installing a package
permanently). This section covers the programmatic usage; see
<a href="#interactive-usage">later</a> for interactive usage.</p>
<p dir="auto">Here is the basic usage of <code>straight-use-package</code>:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;el-patch)"><pre>(<span>straight-use-package</span> <span>&#39;el-patch</span>)</pre></div>
<p dir="auto">This will ensure that the package <code>el-patch</code> is installed and loaded.
(Note that <code>straight-use-package</code> takes a symbol, not a string, for
the name of the package.) Precisely, this is what happens:</p>
<ul dir="auto">
<li>If the local Git repository for <code>el-patch</code> is not available, it is
cloned, and the appropriate revision is checked out (if one is
specified in your version lockfiles).</li>
<li>If the local Git repository has been modified since the last time
the package was built, it is rebuilt. This means:
<ul dir="auto">
<li>The <code>.el</code> files are symlinked into a separate directory to
isolate them from other, irrelevant files.</li>
<li>The main package file is checked for dependencies, which are
installed recursively if necessary using <code>straight-use-package</code>.</li>
<li>The <code>.el</code> files are byte-compiled.</li>
<li>Autoloads are extracted from the <code>.el</code> files and saved into a
separate file.</li>
</ul>
</li>
<li>The package&#39;s directory is added to Emacs&#39; <code>load-path</code>.</li>
<li>The package&#39;s autoloads are evaluated.</li>
</ul>
<p dir="auto">Package authors should note that <code>straight.el</code> checks for dependencies
that are specified in the <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Packaging-Basics.html" rel="nofollow"><code>package.el</code> format</a>. To
spare you reading that documentation, this is either a
<code>Package-Requires</code> header in <code>PACKAGENAME.el</code>, or an argument to a
<code>define-package</code> invocation in <code>PACKAGENAME-pkg.el</code>. Despite the <a href="#advantages-of-straightel">many
shortcomings</a> of <code>package.el</code>, it
has done a good job of creating a standardized format for dependency
declarations.</p>
<p dir="auto">There is one exception to the above statement: not all entries
specified in the <code>Package-Requires</code> header necessarily correspond to
packages. For example, specifying a minimum Emacs version for a
package is done by depending on the <code>emacs</code> pseudo-package. Such
packages are simply ignored by <code>straight.el</code>, using the variable
<code>straight-built-in-pseudo-packages</code>.</p>
<p dir="auto">Note that loading a package does not entail invoking <code>require</code> on any
of its features. If you wish to actually load the files of the
package, you need to do this separately. This is because most packages
do not need to be loaded immediately, and are better served by the
autoload system.</p>
<h4 dir="auto"><a id="user-content-installing-with-a-custom-recipe" aria-hidden="true" href="#installing-with-a-custom-recipe"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing with a custom recipe</h4>
<p dir="auto"><code>straight-use-package</code> can also take a list instead of a symbol. In
that case, the first member of the list is a symbol giving the package
name, and the remainder of the list is a <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Property-Lists.html" rel="nofollow">property
list</a> providing information about how to install and
build the package. Here is an example:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :type git :host github :repo &#34;raxod502/el-patch&#34;
            :fork (:host github
                   :repo &#34;your-name/el-patch&#34;)))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
            <span>:fork</span> (<span>:host</span> github
                   <span>:repo</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>)))</pre></div>
<p dir="auto">If you give <code>straight-use-package</code> just a package name, then a recipe
will be looked up by default (see the section on <a href="#recipe-lookup">recipe
lookup</a>). You can see the default recipe for a package
by invoking <a href="#interactive-usage"><code>M-x straight-get-recipe</code></a>.</p>
<p dir="auto">If <code>straight-allow-recipe-inheritance</code> is non-nil, then you only need
to specify the components of the recipe that you want to override. All
other components will still be looked up in the default recipe. In the
example above, we are only interested in changing the <code>:fork</code>
component. Therefore if <code>straight-allow-recipe-inheritance</code> is set,
the recipe could be simplifed as follows:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :fork (:repo &#34;your-name/el-patch&#34;)))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:fork</span> (<span>:repo</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>)))</pre></div>
<p dir="auto">or even simpler:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :fork &#34;your-name/el-patch&#34;))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:fork</span> <span><span>&#34;</span>your-name/el-patch<span>&#34;</span></span>))</pre></div>
<p dir="auto">The <code>:files</code> keyword and all version control keywords support
inheritance.</p>
<p dir="auto">To learn more, see the section on <a href="#the-recipe-format">the recipe format</a>.</p>
<h4 dir="auto"><a id="user-content-additional-arguments-to-straight-use-package" aria-hidden="true" href="#additional-arguments-to-straight-use-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional arguments to <code>straight-use-package</code></h4>
<p dir="auto">The full user-facing signature of <code>straight-use-package</code> is:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package PACKAGE-OR-RECIPE &amp;optional NO-CLONE NO-BUILD)"><pre>(<span>straight-use-package</span> PACKAGE-OR-RECIPE <span>&amp;optional</span> NO-CLONE NO-BUILD)</pre></div>
<p dir="auto">As discussed <a href="#installing-packages-programmatically">previously</a>, by default
<code>straight-use-package</code> will do three things:</p>
<ul dir="auto">
<li>Register the recipe provided with <code>straight.el</code>.</li>
<li>Clone the package&#39;s local repository, if it is absent.</li>
<li>Rebuild the package if necessary, and load it.</li>
</ul>
<p dir="auto">By providing the optional arguments, you may cause processing to halt
before all three of these tasks are completed. Specifically, providing
<code>NO-CLONE</code> causes processing to halt after registration but before
cloning, and providing <code>NO-BUILD</code> causes processing to halt after
cloning (if necessary) but before building and loading.</p>
<p dir="auto"><code>straight.el</code> supports lazy-loading by means of a special value for
<code>NO-CLONE</code>, the symbol <code>lazy</code>. If this symbol is passed, then
processing will halt at the clone step, unless the package is already
cloned. This means that the package is built and loaded if it is
already installed, but otherwise installation is deferred until later.
When you want to trigger the lazy installation, simply call
<code>straight-use-package</code> again, but without <code>NO-CLONE</code>. (There is no
need to pass the recipe again; see <a href="#recipe-lookup">recipe lookup</a>.)</p>
<p dir="auto">You can also pass functions for <code>NO-CLONE</code> or <code>NO-BUILD</code>, which will
be called with the package name as a string; their return values will
then be used instead.</p>
<p dir="auto">Note that if it makes no sense to build a package, then you should put
<code>:build nil</code> in its <a href="#the-recipe-format">recipe</a>, rather than specifying
<code>NO-BUILD</code> every time you register it with <code>straight.el</code>. (This is
especially relevant when writing recipes for <a href="#customizing-recipe-repositories">recipe
repositories</a>.)</p>
<h4 dir="auto"><a id="user-content-variants-of-straight-use-package" aria-hidden="true" href="#variants-of-straight-use-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Variants of <code>straight-use-package</code></h4>
<p dir="auto">For convenience, <code>straight.el</code> provides some functions that wrap
<code>straight-use-package</code> with particular arguments, to cover all of the
common cases. Each of these functions takes only a package name or
recipe, and no additional arguments.</p>
<ul dir="auto">
<li><code>straight-register-package</code>: always stop after the registration
step. This may be useful for specifying the recipe for an optional
dependency (see <a href="#recipe-lookup">recipe lookup</a>, but see also <a href="#overriding-recipes">recipe
overrides</a>).</li>
<li><code>straight-use-package-no-build</code>: always stop before the build step.
This is used by <a href="#lockfile-management"><code>straight-freeze-versions</code></a> to
make sure packages are cloned, since building them is unnecessary
for writing the lockfiles.</li>
<li><code>straight-use-package-lazy</code>: stop at the clone step if the package&#39;s
local repository is not already cloned. This is used for
lazy-loading.</li>
</ul>
<h4 dir="auto"><a id="user-content-customizing-when-packages-are-built" aria-hidden="true" href="#customizing-when-packages-are-built"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizing when packages are built</h4>
<p dir="auto">By default, when <code>straight.el</code> is bootstrapped during Emacs init, it
uses a bulk <code>find(1)</code> command to identify files that were changed
since the last time a package depending on them was built. These
packages are then rebuilt when they are requested via
<code>straight-use-package</code>. Normally, <code>straight.el</code> will try to detect
what sort of <code>find(1)</code> program is installed, and issue the appropriate
command. If it makes a mistake, then you can manually customize
<code>straight-find-flavor</code>. Alternately, you can install GNU find and
customize the variable <code>straight-find-executable</code> to point to it.</p>
<p dir="auto">For about 100 packages on an SSD, calling <code>find(1)</code> to detect
modifications takes about 500ms. You can save this time by customizing
<code>straight-check-for-modifications</code>. This is a list of symbols which
determines how <code>straight.el</code> detects package modifications. The
default value is <code>(find-at-startup find-when-checking)</code>, which means
that <code>find(1)</code> is used to detect modifications at startup, and also
when you invoke <code>M-x straight-check-package</code> or <code>M-x straight-check-all</code>. If you prefer to avoid this performance hit, or
do not have <code>find(1)</code> installed, then you can remove these symbols
from the list. In that case, you will probably want to add either
<code>check-on-save</code> or <code>watch-files</code> to the list.</p>
<p dir="auto"><code>check-on-save</code> causes <code>straight.el</code> to use <code>before-save-hook</code> to
detect package modifications as you make them (modifications made by
the <code>straight.el</code> repository management commands are also detected).
This reduces init time, but modifications made outside of Emacs (or
modifications that bypass <code>before-save-hook</code>) are not detected. Pull
requests extending the number of cases in which <code>straight.el</code> is able
to detect live modifications are welcome. Also, for the sake of
efficiency, this form of modification checking is restricted to
subdirectories of <code>~/.emacs.d/straight/repos</code>, so you must put your
local repositories into that directory for it to work. (Pull requests
to change this would be welcome.)</p>
<p dir="auto"><code>watch-files</code> causes <code>straight.el</code> to automatically invoke a
filesystem watcher to detect modifications as they are made, inside or
outside of Emacs. For this setting to work, you must have
<a href="https://www.python.org/" rel="nofollow"><code>python3</code></a> and <a href="https://github.com/mattgreen/watchexec"><code>watchexec</code></a> installed on your
<code>PATH</code>. By default, the watcher persists after Emacs is closed. You
can stop it manually by running <code>M-x straight-watcher-stop</code>, and start
it again by running <code>M-x straight-watcher-start</code>. The watcher script
is designed so that when one instance is started, all the others
gracefully shut down, so you don&#39;t have to worry about accidentally
ending up with more than one. There is nothing exciting in the process
buffer for the watcher, but if you are interested in it then its name
is given by <code>straight-watcher-process-buffer</code>. (By default, the name
has a leading space so that the buffer does not appear in the buffer
list.)</p>
<p dir="auto">There is probably no good reason to use both <code>check-on-save</code> and
<code>watch-files</code> at the same time. Your configuration can dynamically
switch between which one is used depending on <code>(executable-find &#34;watchexec&#34;)</code> or similar.</p>
<p dir="auto">If you prefer to eschew automatic package rebuilding entirely, you can
just set <code>straight-check-for-modifications</code> to <code>nil</code>. In that case,
packages will only be rebuilt when metadata (e.g. the recipe or the
Emacs version) changes, or when you manually invoke <code>M-x straight-rebuild-package</code> or <code>M-x straight-rebuild-all</code>.</p>
<p dir="auto">Regardless of your preferred setting for
<code>straight-check-for-modifications</code>, you should set it before the
<code>straight.el</code> bootstrap snippet is run, since hooks relating to this
variable are set during bootstrap.</p>
<p dir="auto">On Microsoft Windows, <code>find(1)</code> is generally not available, so the
default value of <code>straight-check-for-modifications</code> is instead
<code>(check-on-save)</code>.</p>
<h5 dir="auto"><a id="user-content-custom-or-manual-modification-detection" aria-hidden="true" href="#custom-or-manual-modification-detection"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom or manual modification detection</h5>
<p dir="auto">You can also use the low-level functions for modification detection
directly.</p>
<p dir="auto">The function <code>straight-register-repo-modification</code> takes a string
(e.g. <code>&#34;straight.el&#34;</code>) corresponding to the name of a local
repository, and marks all packages from that local repository to be
rebuilt at next Emacs startup. This function silently ignores local
repositories which contain slashes, a limitation which might be
removed in future.</p>
<p dir="auto">The function <code>straight-register-file-modification</code> takes no arguments
and checks if the file visited by the current buffer (if any) is
contained by any local repository. If so, it delegates to
<code>straight-register-repo-modification</code>. The <code>check-on-save</code> value for
<code>straight-check-for-modifications</code> just adds
<code>straight-register-file-modification</code> to <code>before-save-hook</code>.</p>
<h5 dir="auto"><a id="user-content-summary-of-options-for-package-modification-detection" aria-hidden="true" href="#summary-of-options-for-package-modification-detection"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Summary of options for package modification detection</h5>
<h6 dir="auto"><a id="user-content-find-at-startup" aria-hidden="true" href="#find-at-startup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>find-at-startup</code></h6>
<p dir="auto">Save build timestamps and run <code>find(1)</code> at startup to detect changes</p>
<ul dir="auto">
<li>Most reliable, never misses changes</li>
<li>Requires <code>find(1)</code></li>
<li>Slows down startup</li>
</ul>
<h6 dir="auto"><a id="user-content-check-on-save" aria-hidden="true" href="#check-on-save"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>check-on-save</code></h6>
<p dir="auto">Use <code>before-save-hook</code> to detect changes</p>
<ul dir="auto">
<li>No external dependencies</li>
<li>No startup delay</li>
<li>No additional CPU or memory impact</li>
<li>Doesn&#39;t catch changes made except via <code>save-file</code> inside Emacs</li>
</ul>
<h6 dir="auto"><a id="user-content-watch-files" aria-hidden="true" href="#watch-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>watch-files</code></h6>
<p dir="auto">Run filesystem watcher to detect changes</p>
<ul dir="auto">
<li>Requires Python 3 and Watchexec</li>
<li>No startup delay</li>
<li>Takes a few seconds to build virtualenv the first time</li>
<li>Memory and CPU impact of running filesystem watcher</li>
<li>Only misses changes if you make them after booting the system but
before starting Emacs</li>
</ul>
<hr/>
<h4 dir="auto"><a id="user-content-customizing-how-packages-are-built" aria-hidden="true" href="#customizing-how-packages-are-built"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizing how packages are built</h4>
<p dir="auto">By specifying <code>:build nil</code> in a package&#39;s <a href="#the-recipe-format">recipe</a>, you
may prevent the package from being built at all. This is usually
useful for recipe repositories which do not bundle executable Lisp
code. (Make sure to use <a href="#customizing-recipe-repositories"><code>straight-use-recipes</code></a>
for registering recipe repositories.)</p>
<h5 dir="auto"><a id="user-content-autoload-generation" aria-hidden="true" href="#autoload-generation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Autoload generation</h5>
<p dir="auto">By specifying <code>:build (:not autoloads)</code> in a package&#39;s recipe, you may
prevent any autoloads provided by the package from being generated and
loaded into Emacs. This is mostly useful if the package provides a
large number of autoloads, you know you need only a few of them, and
you wish to optimize your startup time (although this is almost
certainly premature optimization unless you <em>really</em> know what you&#39;re
doing). You can also customize the variable
<code>straight-disable-autoloads</code> to effect this change on all recipes
which do not explicitly disable autoloads via the <code>:build</code> keyword.</p>
<h5 dir="auto"><a id="user-content-byte-compilation" aria-hidden="true" href="#byte-compilation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Byte compilation</h5>
<p dir="auto">By specifying <code>:build (:not compile)</code> in a package&#39;s recipe, you may
inhibit byte-compilation. See <a href="https://github.com/raxod502/straight.el/issues/357" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/357/hovercard">this issue</a> for discussion of why
this might be useful. You can also customize the variable
<code>straight-disable-compile</code> to effect this change on all
recipes which do not explicitly disable byte-compilation via the
<code>:build</code> keyword.</p>
<h5 dir="auto"><a id="user-content-native-compilation" aria-hidden="true" href="#native-compilation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Native compilation</h5>
<p dir="auto">Experimental support for native compilation of Emacs Lisp code is
currently under development in the <code>feature/native-comp</code> branch of the
official Emacs repository (see <a href="http://akrl.sdf.org/gccemacs.html" rel="nofollow">gccemacs</a>). When running on
this version of Emacs, <code>straight.el</code> will perform native compilation
of packages.</p>
<p dir="auto">By specifying a <code>:build (:not native-compile)</code> in a package&#39;s recipe,
you may inhibit native compilation. You can also customize the
variable <code>straight-disable-native-compile</code> to effect this change on
all recipes which do not explicitly disable native-compilation via the
<code>:build</code> keyword.</p>
<p dir="auto">Native compilation requires byte-compilation, so <code>:build (:not compile)</code>
and <code>straight-disable-compile</code> will also disable native
compilation.</p>
<h5 dir="auto"><a id="user-content-symbolic-links" aria-hidden="true" href="#symbolic-links"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Symbolic links</h5>
<p dir="auto">Usually, <code>straight.el</code> uses symbolic links (&#34;symlinks&#34;) to make
package files available from the build directory. This happens when
<code>straight-use-symlinks</code> is non-nil, the default. On Microsoft Windows,
however, support for symlinks is not always available, so the default
value of <code>straight-use-symlinks</code> is nil on that platform. That causes
copying to be used instead, and an advice is placed on <code>find-file</code> to
cause the copied files to act as symlinks if you try to edit them.</p>
<p dir="auto">If you want to activate symlink-support on MS Windows 7, 8, or 10, you
should ensure the following requirements:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>straight-use-symlinks</code> has to be set to non-nil manually.</p>
</li>
<li>
<p dir="auto">Your user-account needs to be assigned the right to create symbolic
links. To do so, run &#34;secpol.msc&#34; and in &#34;Local Policies → User
Rights Assignment&#34; assign the right to &#34;Create symbolic links&#34; to
your user-account.</p>
</li>
<li>
<p dir="auto">If you have User Account Control (UAC) enabled and your user-account
belongs to the the <em>Administrators</em> group you&#39;ll need to run Emacs
in elevated mode to be able to create symlinks (see
<a href="https://community.perforce.com/s/article/3472" rel="nofollow">here</a> and <a href="https://stackoverflow.com/a/29065060/3538165" rel="nofollow">here</a> and,
for an official reference, section Access Token Changes <a href="https://msdn.microsoft.com/en-us/library/bb530410.aspx#vistauac_topic8" rel="nofollow">in this
document</a>.</p>
</li>
<li>
<p dir="auto"><a href="https://blogs.windows.com/buildingapps/2016/12/02/symlinks-windows-10/" rel="nofollow">Windows Creators Update</a> supports
symlink-creation without any special permission setup.</p>
</li>
</ul>
<h4 dir="auto"><a id="user-content-customizing-how-packages-are-made-available" aria-hidden="true" href="#customizing-how-packages-are-made-available"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizing how packages are made available</h4>
<p dir="auto">By setting the variable <code>straight-cache-autoloads</code> to a non-nil value,
you can cause <code>straight.el</code> to cache the autoloads of all used
packages in a single file on disk, and load them from there instead of
from the individual package files if they are still up to date. This
reduces the number of disk IO operations during startup from O(number
of packages) to O(1), so it should improve performance. No other
configuration should be necessary to make this work; however, you may
wish to call <a href="#interactive-usage"><code>straight-prune-build</code></a> occasionally,
since otherwise this cache file may grow quite large over time.</p>
<h4 dir="auto"><a id="user-content-hooks-run-by-straight-use-package" aria-hidden="true" href="#hooks-run-by-straight-use-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hooks run by <code>straight-use-package</code></h4>
<p dir="auto">Currently, <code>straight-use-package</code> supports three hooks:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>straight-vc-git-post-clone-hook</code>: The functions in this hook are
run just after cloning a git repository.  This allows users to
automate custom configuration of Elisp Git repositories after they
have been cloned.  For example, the <code>user.email</code> <code>git-config</code>
variable could be set on clone, to make upstream contributions more
convenient for developers who use different email addresses for
different repositories.</p>
<p dir="auto">Each hook function is passed the following <a href="https://www.emacswiki.org/emacs/KeywordArguments" rel="nofollow">keyword arguments</a>:</p>
<ul dir="auto">
<li><code>:repo-dir</code> - the local directory to which the repository was
cloned</li>
<li><code>:remote</code> - the name of the remote from which the repository was
cloned</li>
<li><code>:url</code> - the URL from which the repository was cloned</li>
<li><code>:branch</code> - the branch as specified by the recipe, if any,
otherwise <code>nil</code></li>
<li><code>:depth</code> - the clone depth as specified by the recipe or
<code>straight-vc-git-default-clone-depth</code></li>
<li><code>:commit</code> - the specific commit which was requested via the
lockfile, if any, otherwise <code>nil</code></li>
</ul>
<p dir="auto">Since keyword arguments are used, each function should be defined
via <code>cl-defun</code>, and <code>&amp;key</code> used at the front of the argument list.</p>
</li>
<li>
<p dir="auto"><code>straight-use-package-prepare-functions</code>: The functions in this hook
are run just before a package would be built, even if the package
does not actually need to be rebuilt. They are passed the name of
the package being (maybe) built as a string, and should take and
ignore any additional arguments.</p>
</li>
<li>
<p dir="auto"><code>straight-use-package-pre-build-functions</code>: The functions in this
hook are run just before building a package (and only if the package
needs to be built). They are passed the name of the package being
built as a string, and should take and ignore any additional
arguments.</p>
</li>
<li>
<p dir="auto"><code>straight-use-package-post-build-functions</code>: The functions in this
hook are run just after building a package (and only if the package
needs to be built). They are passed the name of the package being
built as a string, and should take and ignore any additional
arguments.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-the-recipe-format" aria-hidden="true" href="#the-recipe-format"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The recipe format</h3>
<p dir="auto">The general format for a <code>straight.el</code> recipe is:</p>
<div data-snippet-clipboard-copy-content="(package-name :keyword value :keyword value ...)"><pre>(package-name <span>:keyword</span> value <span>:keyword</span> value ...)</pre></div>
<p dir="auto">Note that if you wish to pass a recipe to <code>straight-use-package</code>, you
will need to quote it. If you need to compute part of the recipe
dynamically, use backquoting:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
  `(el-patch :type git :repo ,(alist-get &#39;el-patch my-package-urls)))"><pre>(<span>straight-use-package</span>
  `(el-patch <span>:type</span> git <span>:repo</span> ,(<span>alist-get</span> <span>&#39;el-patch</span> my-package-urls)))</pre></div>
<p dir="auto">The supported keywords are <em>similar, but not identical</em> to those used
in MELPA recipes. There is a complete list below which you can compare
with the <a href="https://github.com/melpa/melpa#recipe-format">MELPA documentation</a>, but the main
differences from the user&#39;s point of view are:</p>
<ul dir="auto">
<li>
<p dir="auto">We use <code>:host</code> instead of <code>:fetcher</code>.</p>
</li>
<li>
<p dir="auto">We only support Git recipes by default, although the system is
extensible to other VCs to be added in the future or in user
configurations. Thus the supported <code>:host</code> values are <code>nil</code> (any Git
repository), <code>github</code>, <code>gitlab</code>, and <code>bitbucket</code> (Git only).</p>
</li>
<li>
<p dir="auto">We support <code>:branch</code>, but not <code>:commit</code> or <code>:version-regexp</code>. To
lock a package to a specific commit, use a
<a href="#lockfile-management">lockfile</a>. See also <a href="https://github.com/raxod502/straight.el/issues/246" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/246/hovercard">#246</a> for discussion of
extensions to the recipe to support package pinning, which is a
planned feature.</p>
</li>
<li>
<p dir="auto">We support several additional keywords that affect how a package is
built; see below.</p>
</li>
<li>
<p dir="auto">There are consistency and feature improvements to edge cases of the
<code>:files</code> keyword as documented in <code>straight-expand-files-directive</code>.</p>
</li>
<li>
<p dir="auto"><code>:includes</code> indicates a package is a superset of another package.</p>
</li>
</ul>
<p dir="auto">Here is a comprehensive list of all keywords which have special
meaning in a recipe (unknown keywords are ignored but preserved):</p>
<ul dir="auto">
<li>
<p dir="auto"><code>:local-repo</code></p>
<p dir="auto">This is the name of the local repository that is used for the
package. If a local repository by that name does not exist when you
invoke <code>straight-use-package</code>, one will be cloned according to the
package&#39;s <a href="#version-control-backends">version-control settings</a>.</p>
<p dir="auto">Multiple packages can use the same local repository. If so, then a
change to the local repository will cause both packages to be
rebuilt. Typically, if multiple packages are drawn from the same
repository, both should specify a <code>:files</code> directive.</p>
<p dir="auto">If you do not provide <code>:local-repo</code>, then it defaults to a value
derived from the <a href="#version-control-backends">version-control
settings</a>, or as a last resort the
package name.</p>
</li>
<li>
<p dir="auto"><code>:files</code></p>
<p dir="auto">This is a list specifying which files in a package&#39;s local
repository need to be symlinked into its build directory, and how to
arrange the symlinks. For most packages, the default value
(<code>straight-default-files-directive</code>) will suffice, and you do not
need to specify anything.</p>
<p dir="auto">If you do need to override the <code>:files</code> directive (this happens most
commonly when you are taking a single package from a repository that
holds multiple packages), it is almost always sufficient to just
specify a list of globs or filenames. All matching files will be
linked into the top level of the package&#39;s build directory.</p>
<p dir="auto">In spite of this, the <code>:files</code> directive supports an almost
comically powerful DSL (with nested excludes and everything!) that
allows you full flexibility on how the links are made; see the
docstring of <code>straight-expand-files-directive</code> for the full details.</p>
</li>
<li>
<p dir="auto"><code>:flavor</code></p>
<p dir="auto">If this is non-nil, then it changes the interpretation of the
<code>:files</code> directive for compatibility with an existing upstream
recipe source. See the docstring of
<code>straight-expand-files-directive</code> for details.</p>
</li>
<li>
<p dir="auto"><code>:build</code>
This specifies the steps taken on the files symlinked within a
package&#39;s straight/build/PACKAGE directory. It may be any of the
following values:</p>
<ul dir="auto">
<li>nil, in which case nothing is done.
This also prevents :pre/:post-build commands from running.</li>
</ul>
</li>
</ul>

<ul dir="auto">
<li>t, runs the steps listed in <code>straight--build-default-steps</code>.
Note this ignores all <code>straight-disable-SYMBOL</code> keywords.</li>
</ul>

<ul dir="auto">
<li>A list of steps.
Each step is a symbol which represents a function named:
<code>straight--build-SYMBOL</code>.
The function is passed the recipe as its sole argument.
Steps are exectuted in the order they are listed. e.g.</li>
</ul>
<div data-snippet-clipboard-copy-content="(example :build (autoloads compile native-compile info))"><pre>(example <span>:build</span> (autoloads compile native-compile info))</pre></div>
<ul dir="auto">
<li>A list which has <code>:not</code> as its car and step symbols as its cdr.
This eliminates the listed steps from the default steps. e.g.
The following recipe will not be compiled or have its texinfo generated:</li>
</ul>
<div data-snippet-clipboard-copy-content="(example :build (:not compile info))"><pre>(example <span>:build</span> (<span>:not</span> compile info))</pre></div>
<p dir="auto">Steps may be disabled globally for recipes which do not explicilty
declare their <code>:build</code> via the defcustom variables named
<code>straight--build-SYMBOL</code>. e.g. The last example but for all recipes
without a <code>:build</code>:</p>
<div data-snippet-clipboard-copy-content="(setq straight-disable-compile t
      straight-disable-info t)"><pre>(<span>setq</span> straight-disable-compile <span>t</span>
      straight-disable-info <span>t</span>)</pre></div>
<p dir="auto">In the absence of a <code>:build</code> keyword, <code>straight--build-default-steps</code> are run.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>:pre-build</code></p>
<p dir="auto">This specifies system commands and/or elisp to be evaluated before
symlinking, and running a recipe&#39;s <code>:build</code> steps.</p>
<p dir="auto">Each command is either an elisp form to be evaluated or a list of
strings to be executed in a shell context of the form:</p>
</li>
</ul>

<p dir="auto">Commands are executed in the package&#39;s repository directory.</p>
<p dir="auto">The <code>:pre-build</code> keyword&#39;s value may be:</p>
<ul dir="auto">
<li>
<p dir="auto">A single command</p>
</li>
<li>
<p dir="auto">A list of commands</p>
</li>
<li>
<p dir="auto">nil, in which case no commands are executed.</p>
<p dir="auto">For example:</p>
</li>
</ul>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;( example :type git :host github :repo &#34;user/example.el&#34;
    :pre-build (&#34;make&#34; &#34;all&#34;)))

(straight-use-package
 `( example :type git :host github :repo &#34;user/example.el&#34;
    :pre-build ,(pcase system-type
                  (`windows-nt &#39;(message &#34;This might take a while&#34;))
                  (_ &#39;((&#34;./configure&#34;) (&#34;make&#34;) (&#34;make&#34; &#34;install&#34;))))))
"><pre>(<span>straight-use-package</span>
 &#39;( example <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>user/example.el<span>&#34;</span></span>
    <span>:pre-build</span> (<span><span>&#34;</span>make<span>&#34;</span></span> <span><span>&#34;</span>all<span>&#34;</span></span>)))

(<span>straight-use-package</span>
 `( example <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>user/example.el<span>&#34;</span></span>
    <span>:pre-build</span> ,(<span>pcase</span> system-type
                  (`windows-nt &#39;(<span>message</span> <span><span>&#34;</span>This might take a while<span>&#34;</span></span>))
                  (_ &#39;((<span><span>&#34;</span>./configure<span>&#34;</span></span>) (<span><span>&#34;</span>make<span>&#34;</span></span>) (<span><span>&#34;</span>make<span>&#34;</span></span> <span><span>&#34;</span>install<span>&#34;</span></span>))))))
</pre></div>
<ul dir="auto">
<li>
<p dir="auto"><code>:post-build</code></p>
<p dir="auto">This specifies system commands and/or elisp to be evaluated after
the <code>:build</code> steps are run.</p>
<p dir="auto">Otherwise, it is identical to the <code>:pre-build</code> keyword in terms of the values
it accepts and how it is executed.</p>
<p dir="auto">For example:</p>
</li>
</ul>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;( example :type git :host github :repo &#34;user/example.el&#34;
    :pre-build  ((&#34;./pre-build.sh&#34;) (message &#34;hi&#34;))
    :post-build ((&#34;./post-build.sh&#34;) (message &#34;bye&#34;))))"><pre>(<span>straight-use-package</span>
 &#39;( example <span>:type</span> git <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>user/example.el<span>&#34;</span></span>
    <span>:pre-build</span>  ((<span><span>&#34;</span>./pre-build.sh<span>&#34;</span></span>) (<span>message</span> <span>&#34;</span><span>hi</span><span>&#34;</span>))
    <span>:post-build</span> ((<span><span>&#34;</span>./post-build.sh<span>&#34;</span></span>) (<span>message</span> <span>&#34;</span><span>bye</span><span>&#34;</span>))))</pre></div>
<ul dir="auto">
<li>
<p dir="auto"><code>:type</code></p>
<p dir="auto">This specifies the version-control backend to use for cloning and
managing the package&#39;s local repository. It defaults to the value of
<code>straight-default-vc</code>, which defaults to <code>git</code>.</p>
<p dir="auto">The only traditional version-control backend currently supported is
<code>git</code>, although more backends may be added.</p>
<p dir="auto">As a special case, however, you may specify the value <code>built-in</code>,
which results in all version-control operations on the package being
ignored. This allows you to tell <code>straight.el</code> that a package has
already been provided (for example, because a version of it is
shipped by Emacs) and does not have a local repository which needs
to be cloned, updated, and so on. Here is how you can tell
<code>straight.el</code> that you would like to use the Emacs-provided copy of
Org, rather than cloning it from the upstream repository if another
package declares it as a dependency:</p>
</li>
</ul>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(org :type built-in))"><pre>(<span>straight-use-package</span> &#39;(<span>org</span> <span>:type</span> built-in))</pre></div>
<p dir="auto">You can also use <code>:type nil</code>, which has the same effect as <code>:type &#39;built-in</code>, except that the package is still loaded from its
configured <code>:local-repo</code>.</p>
<ul dir="auto">
<li><code>:source</code></li>
</ul>
<p dir="auto">Overrides <code>straight-recipe-repositories</code> on a per-recipe basis.
Its value may be:</p>
<ul dir="auto">
<li>a symbol representing a recipe repository</li>
<li>a list of such symbols
The order of the symbols determines their precedence. For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(package :source melpa))"><pre>(<span>straight-use-package</span> &#39;(<span>package</span> <span>:source</span> <span>melpa</span>))</pre></div>
<p dir="auto">Will search only the melpa recipe repository for package&#39;s recipe. While:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(package :source (melpa gnu-elpa-mirror)))"><pre>(<span>straight-use-package</span> &#39;(<span>package</span> <span>:source</span> (<span>melpa</span> gnu-elpa-mirror)))</pre></div>
<p dir="auto">will search for package&#39;s recipe first in melpa.
If it is not found there it will check gnu-elpa-mirror next.</p>
<ul dir="auto">
<li>
<p dir="auto">backend-specific keywords</p>
<p dir="auto">Depending on the value of <code>:type</code>, additional keywords (relevant to
how the package&#39;s repository is cloned and managed) will be
meaningful. See the next section.</p>
<p dir="auto">The <code>built-in</code> and <code>nil</code> pseudo-backends do not take any other
keywords.</p>
</li>
<li>
<p dir="auto"><code>:includes</code></p>
</li>
</ul>
<p dir="auto">Informs <code>straight.el</code> that a package is a superset of another package.
For example <code>org-contrib</code> includes <code>ol-vm</code>.
The following will prevent <code>straight.el</code> from attempting to install <code>ol-vm</code>
after <code>org-contrib</code> has been installed:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(org-contrib :includes ol-vm))"><pre>(<span>straight-use-package</span> &#39;(org-contrib <span>:includes</span> ol-vm))</pre></div>
<p dir="auto">Its value may also be a list of symbols indicating multiple packages:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(example :includes (foo bar)))"><pre>(<span>straight-use-package</span> &#39;(example <span>:includes</span> (foo bar)))</pre></div>
<ul dir="auto">
<li><code>:inherit</code></li>
</ul>
<p dir="auto">Overrides <code>straight-allow-recipe-inheritance</code> on a per-recipe basis.
If its value is non-nil, inheritance is enabled for the recipe.
Otherwise it is not.</p>
<h4 dir="auto"><a id="user-content-version-control-backends" aria-hidden="true" href="#version-control-backends"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Version-control backends</h4>
<p dir="auto">Defining a version-control backend consists of declaring a number of
functions named as <code>straight-vc-BACKEND-METHOD</code>, where <code>BACKEND</code> is
the name of the version-control backend being defined and <code>METHOD</code> is
a backend API method. The relevant methods are:</p>
<ul dir="auto">
<li><code>clone</code>: given a recipe and a commit object, clone the repository
and attempt to check out the given commit.</li>
<li><code>commit-present-p</code>: given a recipe and a commit object, return
whether the commit can be checked out offline, i.e., without
fetching from the remote.</li>
<li><code>normalize</code>: given a recipe, &#34;normalize&#34; the repository (this
generally means reverting it to a standard state, such as a clean
working directory, but does not entail checking out any particular
commit).</li>
<li><code>fetch-from-remote</code>: given a recipe, fetch the latest version from
its configured remote, if one is specified.</li>
<li><code>fetch-from-upstream</code>: given a recipe, fetch the latest version from
its configured upstream, if the package is forked.</li>
<li><code>merge-from-remote</code>: given a recipe, merge the latest version
fetched from the configured remote, if any, to the local copy.</li>
<li><code>merge-from-upstream</code>: given a recipe, merge the latest version
fetched from the configured upstream, if the package is forked, to
the local copy.</li>
<li><code>push-to-remote</code>: given a recipe, push the current version of the
repository to its configured remote, if one is specified.</li>
<li><code>check-out-commit</code>: given a recipe and a commit object, attempt to
check out that commit in the repository for that recipe.</li>
<li><code>get-commit</code>: given a local repository name, return the commit
object that is currently checked out, or nil if the local repository
should not be included in a lockfile.</li>
<li><code>local-repo-name</code>: given a recipe, return a good name for the local
repository, or nil.</li>
<li><code>keywords</code>: return a list of keywords which are meaningful for this
version-control backend.</li>
</ul>
<p dir="auto">Most of these methods are highly interactive: they don&#39;t actually do
anything without prompting you to confirm it, and very often they will
offer you a number of different options to proceed (including starting
a recursive edit and allowing you to do whatever you would like).</p>
<p dir="auto">Also, all of the methods in this section take <a href="#developer-manual"><code>straight.el</code>-style
recipes</a>; see the section on <a href="#developer-manual">defining VC
backends</a> in the developer manual for more details.</p>
<h4 dir="auto"><a id="user-content-git-backend" aria-hidden="true" href="#git-backend"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Git backend</h4>
<p dir="auto">These are the keywords meaningful for the <code>git</code> backend:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>:repo</code>: the clone URL for the Git repository.</p>
</li>
<li>
<p dir="auto"><code>:host</code>: either nil or one of the symbols <code>github</code>, <code>gitlab</code>,
<code>bitbucket</code>.</p>
<ul dir="auto">
<li>If nil, then <code>:repo</code> should be a string which is the full URL of
the target repository. For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host nil :type git
  :repo &#34;http://myhost.tld/repo&#34;)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> <span>nil</span> <span>:type</span> git
  <span>:repo</span> <span><span>&#34;</span>http://myhost.tld/repo<span>&#34;</span></span>)</pre></div>
<ul dir="auto">
<li>If non-nil, then <code>:repo</code> should be a string &#34;username/repo&#34;,
and the URL is constructed automatically.  For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git
  :repo &#34;username/repo&#34;)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git
  <span>:repo</span> <span><span>&#34;</span>username/repo<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto"><code>:branch</code>: the name of the branch used for primary development, as a
string. If your version lockfiles do not specify a commit to check
out when the repository is cloned, then this branch is checked out,
if possible. This branch is also viewed as the &#34;primary&#34; branch for
the purpose of normalization and interaction with the remote.</p>
</li>
<li>
<p dir="auto"><code>:remote</code>: the name to use for the Git remote. If the package is
forked, this name is used for the upstream remote.</p>
</li>
<li>
<p dir="auto"><code>:nonrecursive</code>: if non-nil, then submodules are not cloned. This is
particularly important for the Emacsmirror recipe repository, which
contains every known Emacs package in existence as submodules.</p>
</li>
<li>
<p dir="auto"><code>:fork</code>: the settings for a fork, if desired.
This causes the <code>fetch-from-remote</code> method to operate on the fork;
you can use the <code>fetch-from-upstream</code> method to operate on the
upstream instead.</p>
<p dir="auto">Note: the following section assumes <code>straight-host-usernames</code>
has a value of:</p>
</li>
</ul>
<div data-snippet-clipboard-copy-content="&#39;((github    . &#34;githubUser&#34;)
  (gitlab    . &#34;gitlabUser&#34;)
  (bitbucket . &#34;bitbucketUser&#34;)))"><pre>&#39;((github    <span>.</span> <span><span>&#34;</span>githubUser<span>&#34;</span></span>)
  (gitlab    <span>.</span> <span><span>&#34;</span>gitlabUser<span>&#34;</span></span>)
  (bitbucket <span>.</span> <span><span>&#34;</span>bitbucketUser<span>&#34;</span></span>)))</pre></div>
<p dir="auto">Its value may be:</p>
<ul dir="auto">
<li><code>t</code>:
Look up the username in <code>straight-host-usernames</code>.
Inherit the repository name from the upstream repository.
For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork t)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> <span>t</span>)</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>githubUser/repo</code>.</p>
<ul dir="auto">
<li>a string (optionally ending with &#34;/&#34;):
Use the string as the username.
Inherit repository name from the upstream repository.
For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork &#34;user&#34;)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> <span><span>&#34;</span>user<span>&#34;</span></span>)</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>user/repo</code>.</p>
<ul dir="auto">
<li>a string starting with &#34;/&#34;:
Look up the username in <code>straight-host-usernames</code>.
Use the string as the repository name.
For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork &#34;/renamed&#34;)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> <span><span>&#34;</span>/renamed<span>&#34;</span></span>)</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>githubUser/renamed</code>.</p>
<ul dir="auto">
<li>a string with both the recipe and repository specified:
Use string as the <code>:repo</code> value for the fork.
For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork &#34;user/renamed&#34;)"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> <span><span>&#34;</span>user/renamed<span>&#34;</span></span>)</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>user/renamed</code>.</p>
<ul dir="auto">
<li>a plist:
The allowed keywords are <code>:repo</code>, <code>:host</code>, <code>:branch</code>, and <code>:remote</code>.
The same rules as above apply for the <code>:repo</code> string.
Likewise, if the <code>:host</code> is overridden and the <code>:repo</code> does not
provide the username, it is looked up in <code>straight-host-usernames</code>.
For example:</li>
</ul>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork (:host gitlab))"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> (<span>:host</span> gitlab))</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>gitlabUser/repo</code>.</p>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork (:host gitlab :repo &#34;/renamed&#34;))"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> (<span>:host</span> gitlab <span>:repo</span> <span><span>&#34;</span>/renamed<span>&#34;</span></span>))</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>gitlabUser/renamed</code>.</p>
<div data-snippet-clipboard-copy-content="( :package &#34;package&#34; :host github :type git :repo &#34;upstream/repo&#34;
  :fork (:host gitlab :repo &#34;user&#34;))"><pre>( <span>:package</span> <span><span>&#34;</span>package<span>&#34;</span></span> <span>:host</span> github <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>upstream/repo<span>&#34;</span></span>
  <span>:fork</span> (<span>:host</span> gitlab <span>:repo</span> <span><span>&#34;</span>user<span>&#34;</span></span>))</pre></div>
<p dir="auto">computes the fork&#39;s <code>:repo</code> value as <code>user/repo</code>.</p>
<ul dir="auto">
<li><code>:depth</code>: either the symbol <code>full</code> or an integer. If <code>full</code>, then
the repository is cloned with its whole history. If an integer <code>N</code>,
then the repository is cloned with the option <code>--depth N</code>. This
works even when a commit is specified (e.g. by version lockfiles).
The default value is <code>full</code>.</li>
<li><code>:protocol</code>: If non-nil, force this protocol to be used when
interacting with the remote repository. Takes the same values as
<code>straight-vc-git-default-protocol</code>.</li>
</ul>
<p dir="auto">This section tells you how the <code>git</code> backend, specifically, implements
the version-control backend API:</p>
<ul dir="auto">
<li><code>clone</code>: clones the repository, including submodules if
<code>:nonrecursive</code> is not provided. Checks out the commit specified in
your revision lockfile, or the <code>:branch</code> (from the <code>:fork</code>
configuration, if given), or <code>origin/HEAD</code>. If a <code>:fork</code> is
specified, also fetches from the upstream.</li>
<li><code>commit-present-p</code>: checks if the commit SHA is among the revisions
that are present locally.</li>
<li><code>normalize</code>: verifies that remote URLs are set correctly, that no
merge is in progress, that the worktree is clean, and that the
primary <code>:branch</code> (from the <code>:fork</code> configuration, if given) is
checked out.</li>
<li><code>fetch-from-remote</code>: checks that remote URLs are set correctly, then
fetches from the primary remote (the fork, if the package is
forked).</li>
<li><code>fetch-from-upstream</code>: checks that remote URLs are set correctly,
then fetches from the upstream remote. If the package is not a fork,
does nothing.</li>
<li><code>merge-from-remote</code>: performs normalization, then merges from the
primary remote (the fork, if the package is forked) into the primary
local <code>:branch</code>.</li>
<li><code>merge-from-upstream</code>: performs normalization, then merges from the
upstream remote into the primary local <code>:branch</code>. If the package is
not a fork, does not attempt to merge.</li>
<li><code>push-to-remote</code>: performs normalization, pulls from the primary
remote if necessary, and then pushes if necessary. This operation
acts on the fork, if the package is forked.</li>
<li><code>check-out-commit</code>: verifies that no merge is in progress and that
the worktree is clean, then resets the worktree to the specified
commit.</li>
<li><code>get-commit</code>: returns HEAD as a 40-character string.</li>
<li><code>local-repo-name</code>: if <code>:host</code> is non-nil, then <code>:repo</code> will be of
the form &#34;username/repository&#34;, and &#34;repository&#34; is used. Otherwise,
if the URL is of the form <code>.../&lt;something&gt;.git</code>, then <code>&lt;something&gt;</code>
is used. Otherwise, nil is returned.</li>
<li><code>keywords</code>: see the list of keywords above.</li>
</ul>
<p dir="auto">You can customize the following user options:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>straight-vc-git-default-remote-name</code>: the name to use for the
primary remote, or the upstream remote if the package is forked.
Defaults to &#34;origin&#34;. The <code>:remote</code> keyword may be used to override
the value of this variable on a per-repository basis.</p>
</li>
<li>
<p dir="auto"><code>straight-vc-git-default-fork-name</code>: the name to use for the fork
remote, if the package is forked. Defaults to &#34;fork&#34;. The <code>:remote</code>
keyword may be used to override the value of this variable on a
per-repository basis.</p>
</li>
<li>
<p dir="auto"><code>straight-vc-git-default-protocol</code>: the default protocol to use for
automatically generated URLs when <code>:host</code> is non-nil. It can be
either <code>https</code> or <code>ssh</code>, and defaults to <code>https</code> because this
requires less work to set up.</p>
</li>
<li>
<p dir="auto"><code>straight-vc-git-force-protocol</code>: if this is non-nil, then HTTPS and
SSH URLs are not treated as equivalent, so that bulk version-control
operations will offer to re-set your remote URLs from HTTPS to SSH
or vice versa, depending on the value of
<code>straight-vc-git-default-protocol</code>. This is nil by default.</p>
</li>
<li>
<p dir="auto"><code>straight-vc-git-auto-fast-forward</code>: if this is non-nil, pulling
will quietly do fast-forward, to suppress asking for instructions on
each package with updates, unless they&#39;re not trivial. Set to nil if
you&#39;d prefer to inspect all changes.</p>
</li>
<li>
<p dir="auto"><code>straight-vc-git-default-clone-depth</code>: the default value for the
<code>:depth</code> keyword. It can be either the symbol <code>full</code> or an integer,
and defaults to <code>full</code>. Setting this variable to a small integer will
reduce the size of repositories. This variable affects all packages,
even those whose versions are locked.</p>
<p dir="auto">Please be careful with setting <code>straight-vc-git-default-clone-depth</code>,
which may break some packages&#39; installing processes such as <code>elfeed</code>
that depend on <code>org</code>.</p>
</li>
</ul>
<h5 dir="auto"><a id="user-content-deprecated-upstream-keyword" aria-hidden="true" href="#deprecated-upstream-keyword"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deprecated <code>:upstream</code> keyword</h5>
<p dir="auto"><code>straight.el</code> previously supported fork configuration in recipes using
an <code>:upstream</code> keyword rather than a <code>:fork</code> keyword. For various
reasons, this was more complex to handle, which is why the change was
made. For backwards compatibility, the <code>:upstream</code> keyword is still
accepted, with the following behavior.</p>
<p dir="auto">When <code>straight.el</code> processes a recipe which uses the <code>:upstream</code>
keyword, it moves the <code>:repo</code>, <code>:host</code>, and <code>:branch</code> keywords from
that sub-plist to the top level, and moves those top-level keywords to
a new <code>:fork</code> sub-plist. Then it sets the top-level and <code>:fork</code>
sub-plist values of <code>:remote</code> to the values of the deprecated
variables <code>straight-vc-git-upstream-remote</code> (defaults to &#34;upstream&#34;)
and <code>straight-vc-git-primary-remote</code> (defaults to &#34;origin&#34;),
respectively.</p>
<p dir="auto">For backwards compatibility, if <code>straight-vc-git-primary-remote</code>
differs from its default value of &#34;origin&#34;, then its value is used in
place of <code>straight-vc-git-default-remote-name</code>.</p>
<h3 dir="auto"><a id="user-content-recipe-lookup" aria-hidden="true" href="#recipe-lookup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Recipe lookup</h3>
<p dir="auto">If you only provide a symbol (package name) to <code>straight-use-package</code>,
then the recipe is looked up automatically. By default, <a href="http://melpa.org/#/" rel="nofollow">MELPA</a>, <a href="https://elpa.gnu.org/" rel="nofollow">GNU
ELPA</a>, and <a href="https://emacsmirror.net/" rel="nofollow">Emacsmirror</a> are searched for recipes, in that
order. This means that one or more of them may need to be cloned.
Recipe repositories are actually just the same as ordinary packages,
except that their recipes specify <code>:build nil</code>, so they are not
symlinked or added to the <code>load-path</code>.</p>
<p dir="auto">Note that dependencies always use the default recipes, since the only
information <code>straight.el</code> gets about a package&#39;s dependencies are
their names.</p>
<p dir="auto">This leads to a few interesting questions regarding requesting a
package multiple times. For example, you might need to load two
features using <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a> that are provided from the
same package, or one of the packages you have installed is also
requested as a dependency by another package. <code>straight.el</code> uses a
number of heuristics to try to make these interactions as intuitive
and painless as possible:</p>
<ul dir="auto">
<li>
<p dir="auto">The first time a package is registered with <code>straight.el</code>, its
recipe (either the recipe that you provided, or the one that was
looked up from a recipe repository) is recorded. In future
registration, if you just provide the package name to
<code>straight-use-package</code>, the existing recipe is reused.</p>
<p dir="auto">Note, however: <em>if</em> you want to use a custom recipe for a given
package, you must load it <em>before</em> all of its dependencies.
Otherwise, the package will first be registered as a dependency,
using the default recipe.</p>
</li>
<li>
<p dir="auto">If a package has already been registered with <code>straight.el</code>, and you
attempt to load it again with an explicit recipe which is different
from the one previously registered, the new recipe is used but a
warning is signalled.</p>
</li>
<li>
<p dir="auto">If you attempt to register a package which shares a <code>:local-repo</code>
(either by default, or due to explicit specification) with a
previously registered package, and the two packages specify
different values for their version-control keywords (see
<a href="#version-control-backends">version-control backends</a>), then the new
recipe is used but a warning is signalled. If the repository was
already cloned, this means the second recipe will have no effect.</p>
<p dir="auto">But if the second recipe was fetched automatically from a recipe
repository, all of its version-control keywords will be silently
overwritten with the ones from the first recipe, to avoid conflicts
(although if there are conflicts in other parts of the recipe, a
warning will still be displayed).</p>
</li>
</ul>
<h4 dir="auto"><a id="user-content-updating-recipe-repositories" aria-hidden="true" href="#updating-recipe-repositories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Updating recipe repositories</h4>
<p dir="auto">As mentioned in the <a href="#where-do-recipes-come-from">conceptual overview</a>, recipe
repositories are just regular packages, with some extra code to look
up recipes in the relevant local repository.</p>
<p dir="auto">This means that updating a recipe repository may be done the same way as
updating a regular package, i.e. with <a href="#version-control-operations"><code>M-x straight-pull-package</code></a>.
A convenience command with interactive completion for recipe repositories,
<code>straight-pull-recipe-repositories</code>, is provided as well.
You should use one of these if you find that a package isn&#39;t listed by <code>M-x straight-use-package</code>—perhaps it was added recently.</p>
<p dir="auto">Note that there is currently some potentially surprising behavior if
you update all packages at once using <code>M-x straight-pull-all</code> or <code>M-x straight-merge-all</code>, and this bulk update includes recipe repository
updates: see <a href="https://github.com/raxod502/straight.el/issues/323" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/323/hovercard">#323</a>.</p>
<h4 dir="auto"><a id="user-content-customizing-recipe-repositories" aria-hidden="true" href="#customizing-recipe-repositories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customizing recipe repositories</h4>
<p dir="auto">The recipe repository system is designed to be extended. Firstly, you
can control which recipe repositories are searched, and in what order
of precedence, by customizing <code>straight-recipe-repositories</code>. The
default value is:</p>
<div data-snippet-clipboard-copy-content="(org-elpa melpa gnu-elpa-mirror el-get emacsmirror)"><pre>(org-elpa <span>melpa</span> gnu-elpa-mirror el-get emacsmirror)</pre></div>
<h5 dir="auto"><a id="user-content-gnu-elpa" aria-hidden="true" href="#gnu-elpa"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>GNU ELPA</h5>
<p dir="auto">You can customize the following user options:</p>
<ul dir="auto">
<li><code>straight-recipes-gnu-elpa-url</code>: The Git URL to use for the
<code>gnu-elpa</code> recipe repository.</li>
<li><code>straight-recipes-gnu-elpa-use-mirror</code>: GNU ELPA uses a stupidly
complex build system for no good reason, and it&#39;s unlikely to change
any time soon. What this means for you is that you have to run the
Elisp-powered Makefile of the GNU ELPA repository (which has a fatal
bug last I checked, so you&#39;d have to patch it locally) <em>and</em> have a
full checkout of the Emacs source repository (more than 1GB) if you
want all the packages to work correctly. To work around this
problem, I maintain a <a href="https://github.com/emacs-straight">full mirror of GNU ELPA on
GitHub</a>. (The tooling used to maintain this mirror
is located <a href="https://github.com/raxod502/gnu-elpa-mirror">here</a>.) By default, <code>straight.el</code>
retrieves packages from this mirror instead of the source
repository; this behavior is controlled by the value of
<code>straight-recipes-gnu-elpa-use-mirror</code>. You must do any
customization of this variable <em>before</em> the <code>straight.el</code>
<a href="#getting-started">bootstrap</a>. Note that setting the value of this user
option to nil causes the default value of
<code>straight-recipe-repositories</code> to shift to:</li>
</ul>
<div data-snippet-clipboard-copy-content="(org-elpa melpa gnu-elpa el-get emacsmirror)"><pre>(org-elpa <span>melpa</span> gnu-elpa el-get emacsmirror)</pre></div>
<h5 dir="auto"><a id="user-content-emacsmirror" aria-hidden="true" href="#emacsmirror"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Emacsmirror</h5>
<p dir="auto">You can customize the following user option:</p>
<ul dir="auto">
<li><code>straight-recipes-emacsmirror-use-mirror</code>: Yes, there is also a
mirror for Emacsmirror. This is because the <a href="https://github.com/emacsmirror/epkgs">epkgs</a> repository
contains a (frequently updated) SQLite database in it, which means
the Git repository takes <em>forever</em> to clone (see <a href="https://github.com/raxod502/straight.el/issues/356" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/356/hovercard">#356</a>). My
solution to this problem is to generate a new repository which
contains the information that <code>straight.el</code> needs but which is much
smaller. By default, <code>straight.el</code> uses the official <a href="https://github.com/emacsmirror/epkgs">epkgs</a>
repository to find packages on Emacsmirror, but you can tell it to
use my mirror by configuring the value of this variable to non-nil.
You must do any customization of this variable <em>before</em> the
<code>straight.el</code> <a href="#getting-started">bootstrap</a>. Note that setting the value
of this user option to non-nil causes the default value of
<code>straight-recipe-repositories</code> to shift to:</li>
</ul>
<div data-snippet-clipboard-copy-content="(org-elpa melpa gnu-elpa-mirror el-get emacsmirror-mirror)"><pre>(org-elpa <span>melpa</span> gnu-elpa-mirror el-get emacsmirror-mirror)</pre></div>
<h5 dir="auto"><a id="user-content-defining-new-recipe-repositories" aria-hidden="true" href="#defining-new-recipe-repositories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Defining new recipe repositories</h5>
<p dir="auto">To define a new recipe repository called <code>NAME</code>, you should do the
following things:</p>
<ul dir="auto">
<li>
<p dir="auto">Define a function <code>straight-recipes-NAME-retrieve</code>, which takes a
package name as a symbol and returns a recipe for that package if it
is available, else nil. This is used for recipe lookup. This
function may assume that the local repository for the recipe
repository has already been cloned, and that <code>default-directory</code> has
been set to that local repository. This is used for recipe lookup
during the course of <code>straight-use-package</code>.</p>
<p dir="auto">If the returned recipe is a backquoted list, it will be evaluated
during <code>straight--convert-recipe</code>. This is useful for specifying
dynamic elements within the recipe such as system-specific
build commands. For example, if <code>straight-recipes-NAME-retrieve</code>
returns:</p>
</li>
</ul>
<div data-snippet-clipboard-copy-content="&#39;`( package :type git :repo &#34;host/repo&#34;
    :pre-build ,(pcase system-type
                  (`berkeley-unix &#39;(&#34;gmake&#34;))
                  (_ &#39;(&#34;make&#34;)))
    :files (:defaults))"><pre>&#39;`( <span>package</span> <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>host/repo<span>&#34;</span></span>
    <span>:pre-build</span> ,(<span>pcase</span> system-type
                  (`berkeley-unix &#39;(<span><span>&#34;</span>gmake<span>&#34;</span></span>))
                  (_ &#39;(<span><span>&#34;</span>make<span>&#34;</span></span>)))
    <span>:files</span> (<span>:defaults</span>))</pre></div>
<p dir="auto">The recipe is converted to:</p>
<div data-snippet-clipboard-copy-content="(package :type git :repo &#34;host/repo&#34;
 :pre-build (&#34;make&#34;)
 :files (:defaults))"><pre>(<span>package</span> <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>host/repo<span>&#34;</span></span>
 <span>:pre-build</span> (<span><span>&#34;</span>make<span>&#34;</span></span>)
 <span>:files</span> (<span>:defaults</span>))</pre></div>
<p dir="auto">on a <code>gnu/linux</code> system, and:</p>
<div data-snippet-clipboard-copy-content="(package :type git :repo &#34;host/repo&#34;
         :pre-build (&#34;gmake&#34;)
         :files (:defaults))"><pre>(<span>package</span> <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>host/repo<span>&#34;</span></span>
         <span>:pre-build</span> (<span><span>&#34;</span>gmake<span>&#34;</span></span>)
         <span>:files</span> (<span>:defaults</span>))</pre></div>
<p dir="auto">on a <code>berkely-unix</code> system.</p>
<p dir="auto">The recipe could be read from a file in the recipe repository as
well. In this case, the quote is <em>not</em> included in the recipe, as
<code>straight-recipes-NAME-retrieve</code> would make use of <code>read</code>, which
will return the literal Lisp object. For example, considering the
following retrieval function:</p>
<div data-snippet-clipboard-copy-content="(defun straight-recipes-example-retrieve (name)
  (with-temp-buffer
    (insert-file-literally &#34;./recipes/example.recipe&#34;)
    (read (buffer-string))))"><pre>(<span>defun</span> <span>straight-recipes-example-retrieve</span> (<span>name</span>)
  (<span>with-temp-buffer</span>
    (<span>insert-file-literally</span> <span><span>&#34;</span>./recipes/example.recipe<span>&#34;</span></span>)
    (<span>read</span> (<span>buffer-string</span>))))</pre></div>
<p dir="auto">The recipe from above could be stored in the file, <code>example.recipe</code>, as:</p>
<div data-snippet-clipboard-copy-content="`( package :type git :repo &#34;host/repo&#34;
   :pre-build ,(pcase system-type
                 (`berkeley-unix &#39;(&#34;gmake&#34;))
                 (_ &#39;(&#34;make&#34;)))
   :files (:defaults))"><pre>`( <span>package</span> <span>:type</span> git <span>:repo</span> <span><span>&#34;</span>host/repo<span>&#34;</span></span>
   <span>:pre-build</span> ,(<span>pcase</span> system-type
                 (`berkeley-unix &#39;(<span><span>&#34;</span>gmake<span>&#34;</span></span>))
                 (_ &#39;(<span><span>&#34;</span>make<span>&#34;</span></span>)))
   <span>:files</span> (<span>:defaults</span>))</pre></div>
<ul dir="auto">
<li>Define a function <code>straight-recipes-NAME-list</code>, which takes no
arguments and returns a list of strings representing packages for
which recipes are available. It is permissible to return some
strings for which recipes are actually not available, for
performance reasons. However, this is discouraged. (The <a href="http://melpa.org/#/" rel="nofollow">MELPA</a>
backend uses this functionality, since all files in the <code>recipes</code>
directory are potentially recipes, but only the Git-based ones can
actually be used.)</li>
<li>(Optional) Define a function <code>straight-recipes-NAME-version</code> which
returns a non-nil value indicating the current version of the logic
in your <code>straight-recipes-NAME-retrieve</code> function. Each time you
change the logic, this version value must be changed. If this
function is defined, then <code>straight.el</code> automatically and
transparently caches calls to <code>straight-recipes-NAME-retrieve</code>
persistently, using your version value (and its detection of
modifications to the recipe repository) to decide when to invalidate
the cache.</li>
<li>Call <code>straight-use-recipes</code> with the recipe for your recipe
repository. Make sure to include <code>:build nil</code> in the recipe, unless
you also want to use the recipe repository as an executable Emacs
Lisp package. Alternatively, you can take the manual approach:
<ul dir="auto">
<li>Call <code>straight-use-package-lazy</code> with the recipe for your recipe
repository.</li>
<li>Add the symbol for your recipe repository&#39;s name (the car of the
recipe you provided, that is) to <code>straight-recipe-repositories</code>,
at the appropriate place.</li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-overriding-recipes" aria-hidden="true" href="#overriding-recipes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overriding recipes</h3>
<p dir="auto">You can always use <code>straight-register-package</code> to specify a specific
recipe for a package without cloning or building it, so that just in
case that package is requested later (possibly as a dependency, or in
somebody else&#39;s code) your recipe will be used instead of the default
one. However, this does not help in the case that a specific recipe is
passed to <code>straight-use-package</code>.</p>
<p dir="auto">Also, it is obviously impossible to call <code>straight-register-package</code>
before <code>straight.el</code> has been loaded, so you can&#39;t use it to specify a
custom recipe for <code>straight.el</code> itself.</p>
<p dir="auto">To remedy these difficulties, <code>straight.el</code> provides a mechanism for
specifically overriding the recipe for a particular package. You can
use it by customizing <code>straight-recipe-overrides</code>, or by calling
<code>straight-override-recipe</code>.</p>
<p dir="auto"><code>straight-recipe-overrides</code> is an association list from <a href="#the-profile-system">profile
names</a> to <em>override alists</em>. If you don&#39;t
care about the profile system, you can just use a single override
specification, with the profile name nil. Each override alist is just
a list of recipes. Because the car of a recipe is just the package
name as a symbol, this list of recipes is also an alist whose keys are
recipe names and whose values are the plists for those recipes.</p>
<p dir="auto">Even if an explicit recipe is supplied to <code>straight-use-package</code>, the
one given in <code>straight-recipe-overrides</code> will be used instead, if such
a recipe is specified there.</p>
<p dir="auto">For convenience, you may add to <code>straight-recipe-overrides</code> by passing
a recipe to <code>straight-override-recipe</code>. This will register it in the
override alist for the current profile. Note that if you do this, you
will probably want to explicitly set <code>straight-recipe-overrides</code> to
nil before bootstrapping <code>straight.el</code>. This will make it so that if
you remove a call to <code>straight-override-recipe</code> from your init-file
and then reload it, the entry will actually be removed from
<code>straight-recipe-overrides</code>.</p>
<h4 dir="auto"><a id="user-content-overriding-the-recipe-for-straightel" aria-hidden="true" href="#overriding-the-recipe-for-straightel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overriding the recipe for <code>straight.el</code></h4>
<p dir="auto">As was briefly mentioned earlier, you can actually override the recipe
of <code>straight.el</code> itself using <code>straight-recipe-overrides</code>! How does
this work? Well, it&#39;s basically black magic. If you want the details,
go read the <a href="#developer-manual">developer manual</a>. All you need to
know is that you can set <code>straight-recipe-overrides</code>, and it will
magically work. The only caveat is that if you change the
<code>:local-repo</code> for <code>straight.el</code>, then you will also need to adjust the
value of <code>bootstrap-file</code> in the <a href="#getting-started">bootstrap snippet</a>
accordingly, since otherwise your init-file will not know where to
find <code>straight.el</code>. (You must use <code>straight-recipe-overrides</code> instead
of <code>straight-override-recipe</code>, since the latter function definition
hasn&#39;t been loaded yet before <code>straight.el</code> is installed and
bootstrapped.)</p>
<p dir="auto">Here is the default recipe used for <code>straight.el</code>, if you don&#39;t
override it:</p>
<div data-snippet-clipboard-copy-content="(straight :type git :host github
          :repo ,(format &#34;%s/straight.el&#34; straight-repository-user)
          :files (&#34;straight*.el&#34;)
          :branch ,straight-repository-branch)"><pre>(straight <span>:type</span> git <span>:host</span> github
          <span>:repo</span> ,(<span>format</span> <span>&#34;</span><span><span>%s</span>/straight.el</span><span>&#34;</span> straight-repository-user)
          <span>:files</span> (<span><span>&#34;</span>straight*.el<span>&#34;</span></span>)
          <span>:branch</span> <span><span>,</span>straight-repository-branch</span>)</pre></div>
<p dir="auto">Note that even though the bootstrap snippet references the <code>develop</code>
branch of <code>straight.el</code>, the default recipe installs from <code>master</code>.</p>
<p dir="auto">If all you want to do is change which branch you are installing
<code>straight.el</code> from, simply customize the variable
<code>straight-repository-branch</code>, which is provided for this purpose.
(Although using <code>straight-recipe-overrides</code> will work just as well, at
least until the recipe happens to be changed upstream and your
init-file isn&#39;t updated.)</p>
<p dir="auto">Similarly, if all you want to do is switch to your own fork of
<code>straight.el</code> on GitHub, simply customize the variable
<code>straight-repository-user</code> to your GitHub username.</p>
<p dir="auto">There is one minor caveat to the above discussion. If your fork makes
changes to the way in which recipes are interpreted, then those
changes will not be effective during the interpretation of your own
recipe for <code>straight.el</code>. If you wish for them to be, then you will
have to follow the same procedure that is followed in <code>straight.el</code>
itself for making changes to recipe interpretation. These details are
outlined in the <a href="#developer-manual">developer manual</a>; see also
<code>install.el</code> for an explanation of this aspect of the bootstrap
mechanism.</p>
<h3 dir="auto"><a id="user-content-interactive-usage" aria-hidden="true" href="#interactive-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Interactive usage</h3>
<p dir="auto">The primary usage of <code>straight.el</code> is expected to be in your
init-file. For example, this is where you will need to put the
bootstrap code as well as any packages that you always want to be
installed. However, there are three important interactive uses of
<code>straight.el</code>: temporary installation of packages, various helpful
utility functions, and <a href="#version-control-operations">version control
operations</a>.</p>
<p dir="auto">To install a package temporarily, run <code>M-x straight-use-package</code>. All
registered recipe repositories will be cloned, and you will be
presented with a combined list of all recipes available from them.
Simply select a package and it will be cloned, built, and loaded
automatically. This does not affect future Emacs sessions.</p>
<p dir="auto">If you provide a prefix argument to <code>M-x straight-use-package</code>, then
you are presented with a list of registered recipe repositories. After
you select one, you are shown a list of recipes specifically from that
recipe repository. This is helpful if you do not want to clone all
registered recipe repositories, or you have a particular recipe
repository in mind.</p>
<p dir="auto">You can also call <code>M-x straight-get-recipe</code>, which has the same
interface as <code>M-x straight-use-package</code>, except that instead of the
package being cloned, built, and loaded, its recipe is copied to the
kill ring. If you are writing a custom recipe, this may be helpful,
because you may be able to reuse parts of the existing recipe,
particularly the <code>:files</code> directive.</p>
<p dir="auto">Normally, packages are rebuilt automatically if needed, when Emacs
restarts. If you for some reason want them to be rebuilt at another
time, you can call <code>M-x straight-check-all</code> to rebuild all packages
that have been modified since their last build. Alternatively, use
<code>M-x straight-rebuild-all</code> to unconditionally rebuild all packages.
Note that this will probably take a while. There are also <code>M-x straight-check-package</code> and <code>M-x straight-rebuild-package</code>, which
allow you to select a particular package to check or rebuild.</p>
<p dir="auto">Finally, you may use <code>M-x straight-prune-build</code> in order to tell
<code>straight.el</code> to forget about any packages which were not registered
since the last time you loaded your init-file. This may improve
performance, although only slightly, and will clean up stale entries
in the <code>build</code> directory. You can call this function in your init-file
if you really wish your filesystem to be as clean as possible,
although it&#39;s not particularly recommended as the performance
implications are uninvestigated. If you do call it in your init-file,
be sure to only call it on a fully successful init; otherwise, an
error during init will result in some packages&#39; build information
being discarded, and they will need to be rebuilt next time.</p>
<p dir="auto">If you have enabled <a href="#customizing-how-packages-are-made-available">autoloads caching</a>, it is
advisable to call <code>straight-prune-build</code> occasionally, since otherwise
the build cache may grow quite large over time.</p>
<h4 dir="auto"><a id="user-content-version-control-operations" aria-hidden="true" href="#version-control-operations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Version control operations</h4>
<p dir="auto"><code>straight.el</code> provides a number of highly interactive workflows for
managing your package&#39;s local repositories, using the configured
<a href="#version-control-backends">version-control backends</a>. They are as
follows:</p>
<ul dir="auto">
<li><code>M-x straight-normalize-package</code>: normalize a package</li>
<li><code>M-x straight-normalize-all</code>: normalize all packages</li>
<li><code>M-x straight-fetch-package</code>: fetch from a package&#39;s configured
remote; with prefix argument, then for forks also fetch from the
upstream</li>
<li><code>M-x straight-fetch-package-and-deps</code>: fetch from the configured
remotes of a package and all of its dependencies (including the
dependencies of its dependencies); with prefix argment, then for
forks also fetch from the upstream</li>
<li><code>M-x straight-fetch-all</code>: fetch from all packages&#39; configured
remotes; with prefix argument, then for forks also fetch from the
upstreams</li>
<li><code>M-x straight-merge-package</code>: merge the latest version fetched from
a package&#39;s configured remote into the local copy; with prefix
argument, then for forks also merge from the upstream</li>
<li><code>M-x straight-merge-package-and-deps</code>: merge the latest versions
fetched from the configured remotes of a package and all of its
dependencies (including the dependencies of its dependencies); with
prefix argment, then for forks also merge from the upstreams</li>
<li><code>M-x straight-merge-all</code>: merge the latest versions fetched from
each package&#39;s configured remote into its local copy; with prefix
argument, then for forks also merge from the upstreams</li>
<li><code>M-x straight-pull-package</code>: combination of <code>M-x straight-fetch-package</code> and <code>M-x straight-merge-package</code></li>
<li><code>M-x straight-pull-package-and-deps</code>: combination of <code>M-x straight-fetch-package-and-deps</code> and <code>M-x straight-merge-package-and-deps</code></li>
<li><code>M-x straight-pull-all</code>: combination of <code>M-x straight-fetch-all</code> and
<code>M-x straight-merge-all</code></li>
<li><code>M-x straight-push-package</code>: push a package to its remote, if
necessary</li>
<li><code>M-x straight-push-all</code>: push all packages to their remotes, if
necessary</li>
</ul>
<p dir="auto">See the sections on <a href="#version-control-backends">version-control
backends</a> and the <a href="#git-backend">Git
backend</a> in particular for more information about
the meanings of these operations.</p>
<h3 dir="auto"><a id="user-content-lockfile-management" aria-hidden="true" href="#lockfile-management"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Lockfile management</h3>
<p dir="auto"><code>straight.el</code> determines your package management configuration from
two, and only two, sources: the contents of your init-file, and your
version lockfiles (which are optional). Your init-file specifies the
configuration of <code>straight.el</code> (for example, the values of
<code>straight-recipe-overrides</code> and <code>straight-default-vc</code>), the packages
you want to use, and their recipes. Your version lockfiles specify the
exact revisions of each package, recipe repository, and even
<code>straight.el</code> itself. Together, they lock down your Emacs
configuration to a state of no uncertainty: perfect reproducibility.</p>
<p dir="auto">To write the current revisions of all your packages into version
lockfiles, run <code>M-x straight-freeze-versions</code>. This will first check
that <code>straight.el</code> has an up-to-date account of what packages are
installed by your init-file, then ensure that all your local changes
are pushed (remember, we are aiming for perfect reproducibility!). If
you wish to bypass these checks, provide a prefix argument.</p>
<p dir="auto"><strong>Note: reloading your init-file must have the effect of running all
of the same <code>straight.el</code>-related functions again. For example, if you
bootstrap <code>straight.el</code> in a sub-file that you only <code>require</code> instead
of <code>load</code>, then the reloading functionality will not work correctly
and you may receive the message <code>Caches are still outdated; something is seriously wrong</code>. See <a href="https://github.com/raxod502/straight.el/issues/437" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/437/hovercard">#437</a> for discussion.</strong></p>
<p dir="auto">Version lockfiles are written into <code>~/.emacs.d/straight/versions</code>. By
default, there will be one, called <code>default.el</code>. It is recommended
that you keep your version lockfiles under version control with the
rest of your Emacs configuration. If you symlink your init-file into
<code>~/.emacs.d</code> from somewhere else, you should also make sure to symlink
your version lockfiles into <code>~/.emacs.d/straight/versions</code>. On a new
machine, do this <em>before</em> launching Emacs: that way, <code>straight.el</code> can
make sure to check out the specified revisions of each package when
cloning them for the first time.</p>
<p dir="auto">To install the versions of the packages specified in your version
lockfiles, run <code>M-x straight-thaw-versions</code>. Thawing will
interactively check for local changes before checking out the relevant
revisions, so don&#39;t worry about things getting overwritten.</p>
<h4 dir="auto"><a id="user-content-the-profile-system" aria-hidden="true" href="#the-profile-system"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The profile system</h4>
<p dir="auto"><code>straight.el</code> has support for writing multiple version lockfiles,
instead of just one. Why? Consider a large Emacs configuration such as
<a href="https://github.com/raxod502/radian">Radian</a>, <a href="http://spacemacs.org/" rel="nofollow">Spacemacs</a>, or <a href="https://github.com/bbatsov/prelude">Prelude</a>, which is used by many different
people. There are two parts to the configuration that is actually
loaded: the &#34;default&#34; part, and the local customizations that each
user has added. Generally, these configurations have a mechanism for
making local customizations without forking the entire project.</p>
<p dir="auto">So Radian will have some set of packages that it requires, and my
local customizations of Radian have some other set of packages that
they require. In order for me to maintain Radian, I need to be able to
separate Radian&#39;s packages (which go into a versions lockfile in the
Radian repository) from my own local packages (which go into a
versions lockfile in my own private local dotfiles repository).
<code>straight.el</code> provides this ability through the <em>profile system</em>.</p>
<p dir="auto">The idea is that whenever a package is registered, either directly or
as a dependency, it is associated with a given profile. Any given
package can be associated with multiple profiles.</p>
<p dir="auto">When you call <code>straight-use-package</code>, which profile the registered
packages are associated with is determined by the value of
<code>straight-current-profile</code>, which defaults to nil. In Radian, for
example, <code>straight-current-profile</code> is bound to <code>radian</code> while the
Radian libraries are being loaded, and it is bound to <code>radian-local</code>
while the user&#39;s local customizations are being loaded. This results
in Radian packages being associated with the <code>radian</code> profile, and the
user&#39;s local packages being associated with the <code>radian-local</code>
profile.</p>
<p dir="auto">When you call <code>M-x straight-freeze-versions</code>, one or more version
lockfiles are written, according to the value of <code>straight-profiles</code>.
This variable is an association list whose keys are symbols naming
profiles and whose values are filenames for the corresponding version
lockfiles to be written into <code>~/.emacs.d/straight/versions</code>. You
should make sure that each potential value of
<code>straight-current-profile</code> has a corresponding entry in
<code>straight-profiles</code>, since otherwise some packages might not be
written into your lockfiles.</p>
<p dir="auto">When customizing <a href="#overriding-recipes"><code>straight-recipe-overrides</code></a>, note
that if multiple profiles are set to override the same recipe, then
the last one listed in <code>straight-profiles</code> will take precedence.
Similarly, when using <code>M-x straight-thaw-versions</code>, if different
lockfiles specify revisions for the same local repository, the last
one in <code>straight-profiles</code> will take precedence.</p>
<h3 dir="auto"><a id="user-content-packages-and-the-init-file" aria-hidden="true" href="#packages-and-the-init-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Packages and the init-file</h3>
<p dir="auto">Package managers like <code>package.el</code> store mutable state outside your
init-file, including the set of packages that are installed.
<code>straight.el</code> does not do this, so it has a rather different way of
determining what packages are installed. To <code>straight.el</code>, a package
is part of your Emacs configuration if it is passed to
<code>straight-use-package</code> when your init-file is loaded.</p>
<p dir="auto">Note that this means packages installed interactively (using <code>M-x straight-use-package</code>) are not considered part of your Emacs
configuration, since the invocation of <code>straight-use-package</code> does not
happen in your init-file.</p>
<p dir="auto">This raises an interesting question: if you <em>add</em> a package to your
init-file, how can you convince <code>straight.el</code> that it really is part
of your init-file, and not just part of a temporary
<code>straight-use-package</code> form that you evaluated ad-hoc? The answer is
simple: <em>reload your entire init-file</em>. That way, <code>straight.el</code> will
see whether or not that package is registered during your init-file.</p>
<p dir="auto">One might ask how <code>straight.el</code> determines that you have finished
loading your init-file. The answer is simple: <code>post-command-hook</code> is
used to execute code only after the current interactive operation has
finished. The implementation of this concept is part of the
<em>transaction system</em> of <code>straight.el</code>, and it is also used to amortize
certain performance costs when many calls to <code>straight-use-package</code>
are made sequentially. However, since the transaction system (at least
in recent versions of <code>straight.el</code>) operates transparently, its
details are relegated to the <a href="#developer-manual">developer manual</a>.</p>
<h3 dir="auto"><a id="user-content-using-straightel-to-reproduce-bugs" aria-hidden="true" href="#using-straightel-to-reproduce-bugs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using <code>straight.el</code> to reproduce bugs</h3>
<h4 dir="auto"><a id="user-content--in-other-packages" aria-hidden="true" href="#-in-other-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>... in other packages</h4>
<p dir="auto">One of the major reasons I wanted to write <code>straight.el</code> was that
existing package managers were not good for reproducing bugs. For
instance, some of them would load all installed packages when the
package manager was initialized! Obviously that is not acceptable for
a &#34;minimal test case&#34;.</p>
<p dir="auto">On the contrary, bootstrapping <code>straight.el</code> does not load anything
except for <code>straight.el</code> itself (the default recipe repositories are
registered, but not cloned until needed). You should normally be
loading <code>straight.el</code> by means of the <a href="#getting-started">bootstrap
snippet</a>, but when you are in <code>emacs -Q</code>, here is how you
can initialize <code>straight.el</code>:</p>
<div data-snippet-clipboard-copy-content="M-x load-file RET ~/.emacs.d/straight/repos/straight.el/bootstrap.el RET"><pre><code>M-x load-file RET ~/.emacs.d/straight/repos/straight.el/bootstrap.el RET
</code></pre></div>
<p dir="auto">You can also do this from the command line, perhaps by creating an
alias for it:</p>
<div data-snippet-clipboard-copy-content="$ emacs -Q -l ~/.emacs.d/straight/repos/straight.el/bootstrap.el"><pre><code>$ emacs -Q -l ~/.emacs.d/straight/repos/straight.el/bootstrap.el
</code></pre></div>
<p dir="auto">Let&#39;s say you are making a bug report for Projectile. To load just
Projectile and all of its dependencies, run:</p>
<div data-snippet-clipboard-copy-content="M-x straight-use-package RET projectile RET"><pre><code>M-x straight-use-package RET projectile RET
</code></pre></div>
<p dir="auto">Note that this will use the currently checked-out revisions of
Projectile and all of its dependencies, so you should take note of
those in order to make your bug report.</p>
<h4 dir="auto"><a id="user-content--in-straightel-itself" aria-hidden="true" href="#-in-straightel-itself"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>... in <code>straight.el</code> itself</h4>
<p dir="auto"><code>straight.el</code> provides a macro, <code>straight-bug-report</code>, to test
<code>straight.el</code> in a clean environment. If possible, please use this
when creating bug reports.</p>
<p dir="auto"><code>straight-bug-report</code> accepts the following keyword value pairs:</p>
<ul dir="auto">
<li><code>:pre-bootstrap (Form)...</code> Forms evaluated before bootstrapping
<code>straight.el</code> e.g.</li>
</ul>
<div data-snippet-clipboard-copy-content="(setq straight-repository-branch &#34;develop&#34;)"><pre>(<span>setq</span> straight-repository-branch <span><span>&#34;</span>develop<span>&#34;</span></span>)</pre></div>
<div data-snippet-clipboard-copy-content="Note this example is already in the default bootstrapping code."><pre><code>Note this example is already in the default bootstrapping code.
</code></pre></div>
<ul dir="auto">
<li><code>:post-bootstrap (Form)...</code> Forms evaluated in the testing
environment after boostrapping. e.g.</li>
</ul>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(example :type git :host github))"><pre>(<span>straight-use-package</span> &#39;(example <span>:type</span> git <span>:host</span> github))</pre></div>
<ul dir="auto">
<li>
<p dir="auto"><code>:interactive Boolean</code> If nil, the subprocess will immediately exit
after the test. Output will be printed to
<code>straight-bug-report--process-buffer</code> Otherwise, the subprocess
will be interactive.</p>
</li>
<li>
<p dir="auto"><code>:preserve Boolean</code> If t, the test directory is left in the
directory stored in the variable `temporary-file-directory&#39;.
Otherwise, it is immediately removed after the test is run.</p>
</li>
<li>
<p dir="auto"><code>:executable String</code> Indicate the Emacs executable to launch.
Defaults to <code>&#34;emacs&#34;</code>.</p>
</li>
<li>
<p dir="auto"><code>:raw Boolean</code> If t, the raw process output is sent to
<code>straight-bug-report--process-buffer</code>. Otherwise, it is formatted
as markdown for submitting as an issue.&#34;</p>
</li>
</ul>
<p dir="auto">For example:</p>
<div data-snippet-clipboard-copy-content="(straight-bug-report
  :pre-bootstrap
  (message &#34;before bootstrap&#34;)
  (message &#34;multiple forms allowed&#34;)
  :post-bootstrap
  (message &#34;after bootstrap&#34;)
  (message &#34;multiple forms allowed&#34;)
  (straight-use-package &#39;(my-broken-package))
  (message &#34;bye&#34;))"><pre>(straight-bug-report
  <span>:pre-bootstrap</span>
  (<span>message</span> <span>&#34;</span><span>before bootstrap</span><span>&#34;</span>)
  (<span>message</span> <span>&#34;</span><span>multiple forms allowed</span><span>&#34;</span>)
  <span>:post-bootstrap</span>
  (<span>message</span> <span>&#34;</span><span>after bootstrap</span><span>&#34;</span>)
  (<span>message</span> <span>&#34;</span><span>multiple forms allowed</span><span>&#34;</span>)
  (<span>straight-use-package</span> &#39;(my-broken-package))
  (<span>message</span> <span>&#34;</span><span>bye</span><span>&#34;</span>))</pre></div>
<p dir="auto">The above will run your test in a clean environment and produce a
buffer with information you can paste directly into the issue body.</p>
<h3 dir="auto"><a id="user-content-using-straightel-to-develop-packages" aria-hidden="true" href="#using-straightel-to-develop-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using <code>straight.el</code> to develop packages</h3>
<p dir="auto">The workflow for developing a package using <code>straight.el</code> is quite
straightforward:</p>
<ul dir="auto">
<li>Add the package to your configuration as usual, via a call to
<code>straight-use-package</code>.</li>
<li>Use <code>M-x find-function</code> or a similar command to jump to the code you
wish to edit.</li>
<li>Edit the code.</li>
<li>Either evaluate the edited code using <code>M-x eval-buffer</code>, <code>M-x eval-defun</code>, or a similar command, or just restart Emacs to pick up
your changes.</li>
<li>When you are satisfied with your changes, use <a href="https://magit.vc/" rel="nofollow">Magit</a> or just Git
directly in order to commit and possibly push them. I suggest using
<a href="https://github.com/magit/forge">Forge</a> to create pull requests directly from Emacs, with Magit
integration.</li>
</ul>
<h3 dir="auto"><a id="user-content-integration-with-other-packages" aria-hidden="true" href="#integration-with-other-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with other packages</h3>
<h4 dir="auto"><a id="user-content-integration-with-use-package-1" aria-hidden="true" href="#integration-with-use-package-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with <code>use-package</code></h4>
<p dir="auto">By default, <code>straight.el</code> installs a new keyword <code>:straight</code> for
<code>use-package</code> which may be used to install packages via <code>straight.el</code>.
The algorithm is extremely simple. This:</p>
<div data-snippet-clipboard-copy-content="(use-package el-patch
  :straight t)"><pre>(<span>use-package</span> el-patch
  <span>:straight</span> <span>t</span>)</pre></div>
<p dir="auto">macroexpands (essentially) to:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;el-patch)"><pre>(<span>straight-use-package</span> <span>&#39;el-patch</span>)</pre></div>
<p dir="auto">And this:</p>
<div data-snippet-clipboard-copy-content="(use-package el-patch
  :straight (:host github :repo &#34;raxod502/el-patch&#34;
             :branch &#34;develop&#34;))"><pre>(<span>use-package</span> el-patch
  <span>:straight</span> (<span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
             <span>:branch</span> <span><span>&#34;</span>develop<span>&#34;</span></span>))</pre></div>
<p dir="auto">becomes:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package
 &#39;(el-patch :host github :repo &#34;raxod502/el-patch&#34;
            :branch &#34;develop&#34;))"><pre>(<span>straight-use-package</span>
 &#39;(el-patch <span>:host</span> github <span>:repo</span> <span><span>&#34;</span>raxod502/el-patch<span>&#34;</span></span>
            <span>:branch</span> <span><span>&#34;</span>develop<span>&#34;</span></span>))</pre></div>
<p dir="auto">If the feature you are requiring with <code>use-package</code> is different from
the package name, you can provide a full recipe:</p>
<div data-snippet-clipboard-copy-content="(use-package tex-site
  :straight (auctex :host github
                    :repo &#34;emacsmirror/auctex&#34;
                    :files (:defaults (:exclude &#34;*.el.in&#34;))))"><pre>(<span>use-package</span> tex-site
  <span>:straight</span> (auctex <span>:host</span> github
                    <span>:repo</span> <span><span>&#34;</span>emacsmirror/auctex<span>&#34;</span></span>
                    <span>:files</span> (<span>:defaults</span> (<span>:exclude</span> <span><span>&#34;</span>*.el.in<span>&#34;</span></span>))))</pre></div>
<p dir="auto">And you may also provide just the package name:</p>
<div data-snippet-clipboard-copy-content="(use-package tex-site
  :straight auctex)"><pre>(<span>use-package</span> tex-site
  <span>:straight</span> auctex)</pre></div>
<p dir="auto">If you don&#39;t provide <code>:straight</code>, then by default nothing happens. You
may customize <code>straight-use-package-by-default</code> to make it so that
<code>:straight t</code> is assumed unless you explicitly override it with
<code>:straight nil</code>.</p>
<p dir="auto">Previously, <code>straight.el</code> used a different syntax for its
<code>use-package</code> integration. For backwards compatibility, you can use
this syntax instead by customizing <code>straight-use-package-version</code>.</p>
<p dir="auto">You can disable <code>use-package</code> integration entirely by customizing
<code>straight-enable-use-package-integration</code>.</p>
<h4 dir="auto"><a id="user-content-integration-with-packageel" aria-hidden="true" href="#integration-with-packageel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&#34;Integration&#34; with <code>package.el</code></h4>
<p dir="auto">By default, <code>package.el</code> will automatically insert a call to
<code>package-initialize</code> into your init-file as soon as Emacs starts,
which is ridiculous. It will also do this when you perform any package
management operation. A separate system inserts some <code>custom</code> forms
into your init-file when you install a package. <code>straight.el</code> disables
all of these &#34;features&#34; by setting <code>package-enable-at-startup</code> to nil
and enabling some advices. You can override this behavior by
customizing <code>straight-enable-package-integration</code>, however.</p>
<p dir="auto">To help avoid you shooting yourself in the foot by using both
<code>:ensure</code> and <code>:straight</code> at the same time in a <code>use-package</code> form
(which would cause the same package to be installed twice using two
different package managers), <code>straight.el</code> will helpfully disable
<code>:ensure</code> whenever you include <code>:straight</code> in a <code>use-package</code> form.
See <a href="https://github.com/raxod502/straight.el/issues/425" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/425/hovercard">#425</a>.</p>
<h4 dir="auto"><a id="user-content-integration-with-flycheck" aria-hidden="true" href="#integration-with-flycheck"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with Flycheck</h4>
<p dir="auto"><a href="https://www.flycheck.org/en/latest/" rel="nofollow">Flycheck</a> sometimes creates temporary files in order to perform
syntax checking. This is a problem for <code>straight.el</code> because creation
of temporary files will cause <code>straight.el</code> to think that you have
modified a package when you actually have not. (You might ask why
<code>straight.el</code> cannot recognize temporary files and ignore them. The
answer is that for eager modification checking, all we see is that the
directory mtime for the repository has been updated, and there&#39;s no
way to disambiguate between temporary file shenanigans versus if you,
say, deleted a file.)</p>
<p dir="auto">To work around the problem, a user option <code>straight-fix-flycheck</code> is
provided, disabled by default (for now). You can enable it <em>before</em>
loading <code>straight.el</code>, and it will work around the Flycheck problem in
the following way. When you first visit a buffer, any Flycheck checker
that involves creation of temporary files will be inhibited
automatically, although other checkers will still run. (In practice
this means no byte-compilation errors for Emacs Lisp, but you still
get Checkdoc errors.) However, after you make a change to the buffer
(by typing, etc.) then all checkers will be re-enabled. This means
that <code>straight.el</code> won&#39;t think the package was modified unless you
actually modify the buffer of a file inside it, which I think is a
reasonable compromise.</p>
<p dir="auto">See <a href="https://github.com/raxod502/straight.el/issues/508" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/508/hovercard">#508</a> for discussion.</p>
<h4 dir="auto"><a id="user-content-integration-with-hydra" aria-hidden="true" href="#integration-with-hydra"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Integration with Hydra</h4>
<p dir="auto">See <a href="https://github.com/abo-abo/hydra/wiki/straight.el">the Hydra wiki</a>.</p>
<h3 dir="auto"><a id="user-content-miscellaneous" aria-hidden="true" href="#miscellaneous"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Miscellaneous</h3>
<ul dir="auto">
<li>By default, <code>straight.el</code> explains what it is doing in the echo
area, like this:</li>
</ul>
<div data-snippet-clipboard-copy-content="Looking for cider recipe → Cloning melpa..."><pre><code>Looking for cider recipe → Cloning melpa...
</code></pre></div>
<p dir="auto">If your terminal does not support Unicode characters nicely, you can
customize <code>straight-arrow</code> to display something else for the arrow.</p>
<ul dir="auto">
<li>
<p dir="auto">By default, <code>straight.el</code> reports process output the
<code>*straight-process*</code> buffer. You can customize the name of this
buffer via the <code>straight-process-buffer</code> user option. If you want to
hide this buffer by default, consider adding a leading space to the
name.</p>
</li>
<li>
<p dir="auto">You can prevent <code>straight.el</code> from making any modifications to the
filesystem (though it may still read) by customizing the user option
<code>straight-safe-mode</code> to non-nil. This may be useful for running
tasks automatically in batch mode, to avoid multiple concurrent
Emacs processes all making changes to the filesystem. For an example
of how this feature may be used to safely implement asynchronous
byte-compilation of the init-file on successful startup, see
<a href="https://github.com/raxod502/radian">Radian</a>.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-developer-manual" aria-hidden="true" href="#developer-manual"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Developer manual</h2>
<p dir="auto">This section tells you about all the interesting implementation
details and design decisions that power <code>straight.el</code> behind the
scenes. It assumes you have already read the <a href="#user-manual">user manual</a> and
the <a href="#conceptual-overview">conceptual overview</a>.</p>
<p dir="auto">More to be written here in future. See <a href="https://github.com/raxod502/straight.el/issues/51" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/51/hovercard">#51</a>.</p>
<h3 dir="auto"><a id="user-content-low-level-functions" aria-hidden="true" href="#low-level-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Low-level functions</h3>
<ul dir="auto">
<li>The function <code>straight-chase-emulated-symlink</code> is provided in order
for external packages to correctly handle the emulated symlinks
created by <code>straight.el</code> when <code>straight-use-symlinks</code> is nil. See,
for example, <a href="https://github.com/raxod502/straight.el/issues/520" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/520/hovercard">#520</a>.</li>
</ul>
<h2 dir="auto"><a id="user-content-trivia" aria-hidden="true" href="#trivia"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Trivia</h2>
<p dir="auto">This section has random, (possibly) interesting tidbits about
<code>straight.el</code> that don&#39;t fit in the other sections.</p>
<h3 dir="auto"><a id="user-content-comments-and-docstrings" aria-hidden="true" href="#comments-and-docstrings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Comments and docstrings</h3>
<p dir="auto">How did I get that statistic about the percentage of <code>straight.el</code>
that is comments and docstrings? Simple: by abusing the syntax
highlighting.</p>
<div data-snippet-clipboard-copy-content="(let ((lines (make-hash-table :test #&#39;equal)))
  (goto-char (point-min))
  (while (&lt; (point) (point-max))
    (when (memq (face-at-point)
                &#39;(font-lock-comment-face
                  font-lock-doc-face))
      (puthash (line-number-at-pos) t lines))
    (forward-char))
  (* (/ (float (length (hash-table-keys lines)))
        (line-number-at-pos))
     100))"><pre>(<span>let</span> ((lines (<span>make-hash-table</span> <span>:test</span> <span>#<span>&#39;equal</span></span>)))
  (<span>goto-char</span> (<span>point-min</span>))
  (<span>while</span> (<span>&lt;</span> (<span>point</span>) (<span>point-max</span>))
    (<span>when</span> (<span>memq</span> (<span>face-at-point</span>)
                &#39;(<span>font-lock-comment-face</span>
                  <span>font-lock-doc-face</span>))
      (<span>puthash</span> (<span>line-number-at-pos</span>) <span>t</span> lines))
    (<span>forward-char</span>))
  (<span>*</span> (<span>/</span> (<span>float</span> (<span>length</span> (<span>hash-table-keys</span> lines)))
        (<span>line-number-at-pos</span>))
     <span>100</span>))</pre></div>
<p dir="auto">Note that you will have to scroll through the entire buffer first,
since <code>font-lock-mode</code> computes syntax highlighting lazily.</p>
<h2 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h2>
<p dir="auto">Please do! Development takes place on the <code>develop</code> branch. You can
switch to that branch with</p>
<div data-snippet-clipboard-copy-content="(setq straight-repository-branch &#34;develop&#34;)"><pre>(<span>setq</span> straight-repository-branch <span><span>&#34;</span>develop<span>&#34;</span></span>)</pre></div>
<p dir="auto">and base your pull requests from it. If you have an outstanding pull
request whose features you would like to use in your configuration,
there is full support for defining <code>straight.el</code> as coming from any
branch in any fork:</p>
<div data-snippet-clipboard-copy-content="(setq straight-repository-user &#34;my-github-username&#34;)
(setq straight-repository-branch &#34;feat/my-cool-feature&#34;)"><pre>(<span>setq</span> straight-repository-user <span><span>&#34;</span>my-github-username<span>&#34;</span></span>)
(<span>setq</span> straight-repository-branch <span><span>&#34;</span>feat/my-cool-feature<span>&#34;</span></span>)</pre></div>
<p dir="auto">For additional information, please see <a href="https://github.com/raxod502/contributor-guide">the contributor guide for my
projects</a>. Note that
<code>straight.el</code> has not yet had an initial release, so you don&#39;t have to
worry about a changelog.</p>
<h2 dir="auto"><a id="user-content-faq" aria-hidden="true" href="#faq"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>FAQ</h2>
<h3 dir="auto"><a id="user-content-my-init-time-got-slower" aria-hidden="true" href="#my-init-time-got-slower"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>My init time got slower</h3>
<p dir="auto">Your first step should be to customize the value of
<code>straight-check-for-modifications</code>. The best setting is <code>(watch-files find-when-checking)</code>; this is not enabled by default because it is
impolite to spawn persistent background processes without asking, and
because you must install <a href="https://www.python.org/" rel="nofollow">Python 3</a> and
<a href="https://github.com/mattgreen/watchexec"><code>watchexec</code></a> for it to work. If you can&#39;t stand the extra
dependencies and background process, consider the setting
<code>(check-on-save find-when-checking)</code> instead, which is just as fast
but won&#39;t catch package modifications unless they are made within
Emacs via the <code>save-buffer</code> command.</p>
<p dir="auto">Even with lazy modification detection, as described above,
<code>straight.el</code> is not quite as fast as <code>package.el</code> (by a few
percentage points). There are some planned changes which will make
<code>straight.el</code> just as fast as <code>package.el</code>, if not faster. See <a href="https://github.com/raxod502/straight.el/issues/9" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/9/hovercard">#9</a>.</p>
<h3 dir="auto"><a id="user-content-could-not-find-package-in-recipe-repositories" aria-hidden="true" href="#could-not-find-package-in-recipe-repositories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&#34;Could not find package in recipe repositories&#34;</h3>
<p dir="auto">Assuming that the package you&#39;re trying to install actually exists,
you need to update your recipe repositories (most likely MELPA,
possibly Emacsmirror). See the next FAQ entry. This is like running
<code>package-refresh-contents</code> under <code>package.el</code>.</p>
<p dir="auto">Another possibility is that you are providing <code>straight.el</code> with a
feature name rather than a package name. Features are what you load
with <code>require</code> or <code>load</code>, or find in files. For example, <code>org-agenda</code>
and <code>org-capture</code> are features. Packages, on the other hand, can
provide one or more features. They are what are listed on MELPA et al.
or by <code>M-x straight-get-recipe</code>. For example, <code>org</code> and
<code>org-contrib</code> are packages.</p>
<p dir="auto">When you write <code>(use-package foo ...)</code>, the <code>foo</code> is a <em>feature</em>, not
a package. You can give a different package name <code>bar</code> by saying
<code>(use-package foo :straight bar)</code>. And when you write
<code>(straight-use-package &#39;bar)</code>, the <code>bar</code> is a <em>package</em>, not a
feature.</p>
<h3 dir="auto"><a id="user-content-how-do-i-update-melpa-et-al" aria-hidden="true" href="#how-do-i-update-melpa-et-al"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How do I update MELPA et al.?</h3>
<p dir="auto">Using <a href="#version-control-operations"><code>M-x straight-pull-package</code></a>, like for
any other package. <a href="#updating-recipe-repositories">Read more.</a></p>
<h3 dir="auto"><a id="user-content-my-use-package-form-isnt-working-properly" aria-hidden="true" href="#my-use-package-form-isnt-working-properly"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>My <code>use-package</code> form isn&#39;t working properly</h3>
<p dir="auto">There are a number of common problems you might be encountering. Check
out the following list to see if there is an easy fix.</p>
<ul dir="auto">
<li>Make sure you&#39;re not using <code>:ensure</code> or <code>use-package-always-ensure</code>.
Those are for <code>package.el</code> and using them with <code>straight.el</code> will
produce weird results (namely both <code>package.el</code> and <code>straight.el</code>
will be invoked for the same package).</li>
<li>Make sure you know <em>both</em> the name of the feature and the name of
the package. These are usually the same but not always (packages may
provide more than one feature, ...). You give <code>use-package</code> the name
of a <em>feature</em>, not a package (despite the name of the macro). With
<code>straight-use-package-by-default</code> or with <code>:straight t</code>, the default
is to try installing a package by the same name as the feature.
<ul dir="auto">
<li>If you don&#39;t actually need to install a package, then pass
<code>:straight nil</code> to override <code>straight-use-package-by-default</code>.</li>
<li>If the package name is different from the feature name, then
pass <code>:straight &lt;package-name&gt;</code>.</li>
</ul>
</li>
<li>If the package or your configurations aren&#39;t being loaded, you
probably have something wrong with your usage of <code>:init</code> and
<code>:config</code>. By default, the behavior of <code>use-package</code> is unusably
inconsistent. You must set either <code>use-package-always-defer</code>
(override with <code>:demand t</code>) or <code>use-package-always-demand</code> (override
with <code>:defer t</code>) to set a default for whether evaluating a
<code>use-package</code> form will load the package and your configurations.
<ul dir="auto">
<li>If you&#39;ve set a package to be deferred, you then need to make
sure there&#39;s a way for it to get loaded when needed, for example
by means of an autoload (either provided by the package, or set
up automatically by <code>use-package</code> via <code>:bind</code>, or set up
manually through <code>use-package</code> via <code>:commands</code>) or by an
explicit <code>require</code> in one of your custom commands.</li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-how-do-i-uninstall-a-package" aria-hidden="true" href="#how-do-i-uninstall-a-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How do I uninstall a package?</h3>
<p dir="auto">My first question is: do you really need to uninstall the package?
Under <code>package.el</code>, every package on disk gets loaded into Emacs,
whether you asked for it or not. However, under <code>straight.el</code>, only
the packages you explicitly mention in your init-file get loaded into
Emacs. So the <em>only</em> problem with leaving a package on disk is that it
takes up a little bit of disk space. (But the advantage is if you
decide you want to use that package again later then you won&#39;t have to
redownload it.)</p>
<p dir="auto">If you really want to uninstall a package, simply delete its local
repository from <code>~/.emacs.d/straight/repos</code> or run the
<code>straight-remove-unused-repos</code> command.</p>
<h3 dir="auto"><a id="user-content-the-wrong-version-of-my-package-was-loaded" aria-hidden="true" href="#the-wrong-version-of-my-package-was-loaded"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The wrong version of my package was loaded</h3>
<p dir="auto">To explain this problem, let us consider a concrete example. In <a href="https://github.com/raxod502/straight.el/issues/355" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/355/hovercard">this
issue</a>, a user found that the code</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;company-lsp)
(straight-use-package &#39;eglot)"><pre>(<span>straight-use-package</span> <span>&#39;company-lsp</span>)
(<span>straight-use-package</span> <span>&#39;eglot</span>)</pre></div>
<p dir="auto">sometimes resulted in runtime errors because an old version of Flymake
was being used.</p>
<p dir="auto">The root problem here is that you want the most recent version of
Flymake to be installed by <code>straight.el</code>, but Emacs also ships an
older version, and that older version is getting loaded instead.</p>
<p dir="auto">The older version will be loaded if <code>(require &#39;flymake)</code> (or similar)
is invoked before <code>straight.el</code> has made Flymake available (by means
of <code>(straight-use-package &#39;flymake)</code> or similar). But why would
<code>straight.el</code> not make Flymake available?</p>
<p dir="auto">The only way that <code>straight.el</code> knows to make Flymake available is if
either you manually invoke <code>straight-use-package</code> in your init-file,
or if one of the packages that you request in your init-file declares
Flymake as a dependency. Now, any package that uses Flymake ought to
declare it as a dependency. Thus, there should be no way for a package
to load the Emacs-provided version of Flymake. However, sometimes
package authors overlook this problem (it does not always cause an
error, and sometimes package authors do not test exhaustively enough).</p>
<p dir="auto">In this case, the problem was that <code>company-lsp</code> declared a dependency
on <code>lsp-mode</code>, and <code>lsp-mode</code> used Flymake without declaring a
dependency on <code>flymake</code>. There are two ways to work around the
problem:</p>
<ul dir="auto">
<li>(Preferable) Fix <code>lsp-mode</code> to declare a dependency on <code>flymake</code>.</li>
<li>(Workaround) Manually invoke <code>(straight-use-package &#39;flymake)</code>
before <code>(straight-use-package &#39;company-lsp)</code>.</li>
</ul>
<p dir="auto">If you test this yourself, you might find it difficult to reproduce
the problem. That is because there is only an issue when Flymake is
actually loaded, and this doesn&#39;t necessarily happen when invoking
<code>(straight-use-package &#39;company-lsp)</code> <em>unless</em> <code>straight.el</code> needs to
rebuild the relevant packages (which includes byte-compilation, which
sometimes means actually loading dependencies). Keep this in mind when
testing.</p>
<p dir="auto">This problem commonly occurs with Org, since (1) Org is popular, (2)
Emacs ships an obsolete version of Org, (3) many users want to use the
up-to-date version, and (4) Org breaks backwards compatibility
frequently. To solve it, simply make sure that you invoke
<code>(straight-use-package &#39;org)</code> before running any code that could load
Org, including installing any package that lists it as a dependency.</p>
<p dir="auto">See <a href="https://github.com/raxod502/straight.el/issues/236" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/236/hovercard">this issue</a> for discussion about ways of mitigating the bad
UX of this situation.</p>
<h3 dir="auto"><a id="user-content-i-get-could-not-read-usernamepassword-errors" aria-hidden="true" href="#i-get-could-not-read-usernamepassword-errors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>I get &#34;could not read username/password&#34; errors</h3>
<p dir="auto">This is because <code>straight.el</code> is not currently able to detect when SSH
or Git asks for your username and/or password/passphrase and then pipe
that prompt through to the minibuffer (<a href="https://github.com/raxod502/straight.el/issues/334" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/334/hovercard">#334</a>).</p>
<p dir="auto">To work around the problem, set up <a href="https://git-scm.com/docs/git-credential-cache" rel="nofollow">git-credential-cache</a> if you use
HTTPS, and <a href="https://www.ssh.com/ssh/agent" rel="nofollow">ssh-agent</a> if you use SSH. That way, you won&#39;t be prompted
for your username/password. When setting up ssh-agent, be careful to
make sure that the relevant environment variables get set in Emacs.
This might be tricky since starting Emacs from the desktop (rather
than from the command line) sometimes results in it not inheriting any
environment variables from your shell.</p>
<h3 dir="auto"><a id="user-content-how-do-i-pin-package-versions-or-use-only-tagged-releases" aria-hidden="true" href="#how-do-i-pin-package-versions-or-use-only-tagged-releases"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How do I pin package versions or use only tagged releases?</h3>
<p dir="auto">This is a planned feature. In the meantime, contributors have proposed
various workarounds. See <a href="https://github.com/raxod502/straight.el/issues/246" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/246/hovercard">#246</a> and <a href="https://github.com/raxod502/straight.el/issues/31" data-hovercard-type="issue" data-hovercard-url="/radian-software/straight.el/issues/31/hovercard">#31</a>.</p>
<p dir="auto"><code>straight-x.el</code> now contains an experimental solution. In order to use
it you will need to add similar snippets to your Emacs configuration.</p>
<p dir="auto">First you need to add a new profile to <code>straight-profiles</code> which also
needs to be the last profile in the list. This should be done before
you bootstrap <code>straight.el</code>.</p>
<div data-snippet-clipboard-copy-content=";; Tell straight.el about the profiles we are going to be using.
(setq straight-profiles
      &#39;((nil . &#34;default.el&#34;)
        ;; Packages which are pinned to a specific commit.
        (pinned . &#34;pinned.el&#34;)))"><pre><span><span>;</span>; Tell straight.el about the profiles we are going to be using.</span>
(<span>setq</span> straight-profiles
      &#39;((<span>nil</span> <span>.</span> <span><span>&#34;</span>default.el<span>&#34;</span></span>)
        <span><span>;</span>; Packages which are pinned to a specific commit.</span>
        (pinned <span>.</span> <span><span>&#34;</span>pinned.el<span>&#34;</span></span>)))</pre></div>
<p dir="auto">After straight&#39;s install procedure you will need to add
<code>straight-x.el</code> and load the required commands.</p>
<div data-snippet-clipboard-copy-content="(autoload #&#39;straight-x-pull-all &#34;straight-x&#34;)
(autoload #&#39;straight-x-freeze-versions &#34;straight-x&#34;)"><pre>(<span>autoload</span> <span>#<span>&#39;straight-x-pull-all</span></span> <span><span>&#34;</span>straight-x<span>&#34;</span></span>)
(<span>autoload</span> <span>#<span>&#39;straight-x-freeze-versions</span></span> <span><span>&#34;</span>straight-x<span>&#34;</span></span>)</pre></div>
<p dir="auto">A variable called <code>straight-x-pinned-packages</code> has been defined in
<code>straight-x.el</code> and will contain your list of pinned packages.</p>
<p dir="auto">From now on, you can pin a package to a specific commit like in the
following example which will pin <code>org-mode</code> to the 9.2.3 release
version:</p>
<div data-snippet-clipboard-copy-content="(let ((straight-current-profile &#39;pinned))
  (straight-use-package &#39;org)
  (straight-use-package &#39;org-contrib)
  ;; Pin org-mode version.
  (add-to-list &#39;straight-x-pinned-packages
               &#39;(&#34;org&#34; . &#34;924308a150ab82014b69c46c04d1ab71e874a2e6&#34;)))"><pre>(<span>let</span> ((straight-current-profile <span>&#39;pinned</span>))
  (<span>straight-use-package</span> <span>&#39;org</span>)
  (<span>straight-use-package</span> <span>&#39;org-contrib</span>)
  <span><span>;</span>; Pin org-mode version.</span>
  (<span>add-to-list</span> <span>&#39;straight-x-pinned-packages</span>
               &#39;(<span><span>&#34;</span>org<span>&#34;</span></span> <span>.</span> <span><span>&#34;</span>924308a150ab82014b69c46c04d1ab71e874a2e6<span>&#34;</span></span>)))</pre></div>
<p dir="auto">If you invoke <code>straight-x-freeze-versions</code> it will first write the
default lockfile and then pinned lockfile which takes precedence over
the default one if packages are thawed. <code>straight-x-pull-all</code> will
first invoke <code>straight-pull-all</code> and then restore all pinned packages.</p>
<p dir="auto">You might want to assign the following aliases for more convenience:</p>
<div data-snippet-clipboard-copy-content="(defalias &#39;straight-pull-all #&#39;straight-x-pull-all)
(defalias &#39;straight-freeze-versions #&#39;straight-x-freeze-versions)"><pre>(<span>defalias</span> <span>&#39;straight-pull-all</span> <span>#<span>&#39;straight-x-pull-all</span></span>)
(<span>defalias</span> <span>&#39;straight-freeze-versions</span> <span>#<span>&#39;straight-x-freeze-versions</span></span>)</pre></div>
<p dir="auto">Please keep in mind that this is only a temporary solution and
experimental!</p>
<h3 dir="auto"><a id="user-content-how-can-i-use-the-built-in-version-of-a-package" aria-hidden="true" href="#how-can-i-use-the-built-in-version-of-a-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How can I use the built-in version of a package?</h3>
<p dir="auto">To tell <code>straight.el</code> that you want to use the version of Org shipped
with Emacs, rather than cloning the upstream repository:</p>
<div data-snippet-clipboard-copy-content="(straight-use-package &#39;(org :type built-in))"><pre>(<span>straight-use-package</span> &#39;(<span>org</span> <span>:type</span> built-in))</pre></div>
<p dir="auto">Note that <code>:type</code> is a keyword for <code>straight.el</code>, not for
<code>use-package</code>. If you are using <code>use-package</code>, then use:</p>
<div data-snippet-clipboard-copy-content="(use-package org :straight (:type built-in))"><pre>(<span>use-package</span> <span>org</span> <span>:straight</span> (<span>:type</span> built-in))</pre></div>
<p dir="auto"><a href="#the-recipe-format">Read more.</a></p>
<h2 dir="auto"><a id="user-content-news" aria-hidden="true" href="#news"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>News</h2>
<h3 dir="auto"><a id="user-content-jan-1-2021" aria-hidden="true" href="#jan-1-2021"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Jan 1, 2021</h3>
<p dir="auto">Breaking change: The previous behavior of the <code>:build</code> keyword is now
associated with the <code>:pre-build</code> keyword. <code>:build</code> is now used to
specify build steps (generating autoloads and texinfo, byte/native
compilation, etc). For more information on both of these keywords see
<a href="#the-recipe-format">the recipe format</a>.</p>
<p dir="auto">The following customization variable names have changed:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>straight-disable-byte-compilation</code> is now
<code>straight-disable-compile</code></p>
</li>
<li>
<p dir="auto"><code>straight-disable-native-compilation</code> is now
<code>straight-disable-native-compile</code></p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-april-19-2020" aria-hidden="true" href="#april-19-2020"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>April 19, 2020</h3>
<p dir="auto">Shallow clones are now compatible with lockfiles, so you can safely
set <code>straight-vc-git-default-clone-depth</code> to <code>1</code> and get massive
savings on network bandwidth and disk space.</p>
</article>
          </div></div>
  </body>
</html>
