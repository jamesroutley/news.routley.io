<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/programming/OnHTMLViaStringTemplates">Original</a>
    <h1>That people produce HTML with string templates is telling us something</h1>
    
    <div id="readability-page-1" class="page"><div><h2>That people produce HTML with string templates is telling us something</h2>

	<p><small>May 25, 2023</small></p>
</div><div><p>A while back I had <a href="https://mastodon.social/@cks/109700745014482141">a hot take on the Fediverse</a>:</p>

<blockquote><p>Another day, another &#39;producing HTML with string
templates/interpolation is wrong&#39; article. People have been writing
these articles for a decade or more and people doing web development
have kept voting with their feet, which is why we have string
templates everywhere. At this point, maybe people should consider
writing about why things have worked out this way.</p>

<p>(I don&#39;t think it&#39;s going to change, either. No one has structured
HTML creation that&#39;s as easy as string templates.)</p>
</blockquote>

<p>One of my fundamental rules of system design is <a href="https://utcc.utoronto.ca/~cks/space/blog/tech/UsersAreRight">when people keep
doing it wrong, the people are right and your system or idea is
wrong</a>. A corollary to this is that when you
notice this happening, a productive reaction is to start asking
questions about why people do it the &#39;wrong&#39; way. Despite what you
might expect from its title, Hugo Landau&#39;s <a href="https://www.devever.net/~hl/stringtemplates">[[Producing HTML using
string templates has always been the wrong solution</a> (<a href="https://lobste.rs/s/j4ajfo/producing_html_using_string_templates">via</a>)
actually has some ideas and pointers to ideas, for instance this
quote from <a href="https://rawgit.com/mikesamuel/sanitized-jquery-templates/trunk/safetemplate.html">Using type inference to make web templates robust
against XSS</a>:</p>

<blockquote><p>Strict structural containment is a sound, principled approach to
building safe templates that is a great approach for anyone planning a
new template language, but it cannot be bolted onto existing languages
though because it requires that every element and attribute start and
end in the same template. This assumption is violated by several very
common idioms, such as <a href="https://rawgit.com/mikesamuel/sanitized-jquery-templates/trunk/safetemplate.html#header-footer-example">the header-footer idiom</a>
in ways that often require drastic changes to repair.</p>
</blockquote>

<p>Another thing to note here is that pretty much every programming
language has a way to format strings, and many of them have ways
to have multi-line strings. This makes producing HTML via string
formatting something that scales up (and down) very easily; you can
use the same idiom to format a small snippet as you would a large
block. Even Go&#39;s <a href="https://pkg.go.dev/html/template">html/template</a>
package doesn&#39;t scale down quite that far, although it comes close.
String templating is often very close to string formatting and so
probably fits naturally into how programmers are acclimatized to
approach things.</p>

<p>(Hugo Landau classifies Go&#39;s <a href="https://pkg.go.dev/html/template">html/template</a> as &#39;context aware
autoescaping HTML string templating&#39;, and considers it not as good
as what the quote above calls &#39;strict structural containment&#39; that
works on the full syntax tree of the HTML document.)</p>

<p>I don&#39;t have any particular answers to why string templating has
been enduringly popular so far (although I can come up with theories,
including that string templating is naturally reusable to other
contexts, such as plain text). But that it has suggests that people
see string templating as having real advantages over their alternatives
and those advantages keep being compelling, including in new languages
such as Go (where the Go authors created <a href="https://pkg.go.dev/html/template">html/template</a> instead
of trying to define a &#39;strict structural containment&#39; system). If
people want to displace string templating, figuring out what those
current advantages are and how to duplicate them in alternatives
seems likely to be important.</p>

<p>(I&#39;ll pass on the question of how important it is to replace the
most powerful context aware autoescaping HTML string templating
with something else.)</p>
</div></div>
  </body>
</html>
