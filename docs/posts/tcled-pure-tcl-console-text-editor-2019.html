<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/slebetman/tcled">Original</a>
    <h1>Tcled: Pure Tcl Console Text Editor (2019)</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Simple text editor with syntax hilighting in a single file tcl script!</p>
<p dir="auto">This software is released under a simple 2-clause BSD license.</p>
<h2 dir="auto"><a id="user-content-pure-tcl-console-text-editor" href="#pure-tcl-console-text-editor" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pure Tcl Console Text Editor</h2>
<p dir="auto">This editor is based on Steve Redler&#39;s minimal console text editor
in Tcl (<a href="http://wiki.tcl.tk/11820" rel="nofollow">http://wiki.tcl.tk/11820</a>). I took Steve&#39;s code and modified it to do
syntax hilighting. Since then it&#39;s had enough features added to it that it is
now good enough for me to use as my primary code editor.</p>
<p dir="auto">Part of the reason I wrote this is because I got tired of console text editors
behaving very differently from regular GUI text editors. As such, this has key
bindings that&#39;s as close as possible to GUI text editors: ctrl-S to save files,
F3 to search, ctrl-G to go to line etc.</p>
<p dir="auto">Another reason I wrote this was because I needed a decent editor, with syntax
hilighting, in environments that don&#39;t have compilers and where it&#39;s difficult
or impossible to install binaries correctly. Cisco routers and Tivo boxes for
example (in my case it was GreenPacket routers back when I was employed by
GreenPacket to develop software for their routers). Fortunately these routers
almost always include tcl and fortunately tcl is powerful enough that it&#39;s
possible to write a simple text editor without any additional modules.</p>
<h2 dir="auto"><a id="user-content-features" href="#features" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features:</h2>
<ul dir="auto">
<li>Basic syntax highlighting. The highlighting is line based and can easily cope
with Tcl style # comments but because it is line based it can&#39;t cope with
multiline C style /* comments */</li>
<li>&#34;Normal&#34; key bindings - emulate the behavior of GUI text editors as closely as
possible so you don&#39;t need to learn yet another way of doing things.</li>
<li>Implements a simple auto-indenting. When inserting a newline by pressing the
Enter or Return key the leading whitespace of the previous line is copied and
automatically inserted.</li>
<li>Converts spaces to tabs when pasting text.</li>
<li>Implements key rate limiting for control characters and escape sequences.
This is to improve responsiveness especially on slow machines/connections so
that you don&#39;t accidentally &#34;over-delete&#34; when you press the delete key for
too long.</li>
<li>All the usual features you&#39;d expect in a simple text editor: undo, redo, search,
goto etc.</li>
<li>Implements suspending and resuming the editing session.</li>
<li>Implements tab completion based on words already in the current document.</li>
<li>Supports CTags&#39;s tags file (if one is found) so you can look up function and
variable definitions.</li>
<li>Supports X/Gnome/Windows/Mac clipboard if available (requires Tk, no Tk
widgets will be created just using the cross-platform clipboard support)</li>
<li>Properly support mouse selection (note: This means that copy on X-selection
no longer works. Use ^c to copy instead).</li>
<li>Support mousewheel scrolling.</li>
<li>Supports executing shell commands (see documentation for F2 below). The result
of the shell command can then either be inserted directly into the document
or copied to the clipboard. With this feature Unix is your IDE (as it was
always meant to be)!</li>
<li>Supports per-project config file.</li>
</ul>
<h2 dir="auto"><a id="user-content-usage" href="#usage" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage:</h2>
<ul dir="auto">
<li><code>Arrow keys</code> : Moves the cursor around. Typing anything inserts text at the
cursor.</li>
<li><code>Backspace</code> : Deletes the character before the cursor.</li>
<li><code>Delete</code> : Deletes the character behind the cursor.</li>
<li><code>Home</code> : Moves the cursor to the first non-whitespace character on the
current line. Pressing it a second time moves the cursor to the beginning of
the line.</li>
<li><code>End</code> : Moves the cursor to the end of the line.</li>
<li><code>Page Up</code> and <code>Page Down</code> : Moves the cursor backwards and forwards one full
page at a time.</li>
<li><code>Shift + Arrow keys</code> : Select text.</li>
<li><code>Tab</code> while text is selected : Block indent.</li>
<li><code>Shift + Tab</code> while text is selected : Block de-indent.</li>
</ul>
<p dir="auto">Basically the usual navigation keys behaves as expected. In addition, you can use
the mousewheel to scroll (on xterm compatible terminals - which is most terminals).
The &#34;^&#34; character below denotes pressing the Ctrl key.</p>
<ul dir="auto">
<li><code>^a</code> : Moves the cursor to the beginning of the line.</li>
<li><code>^c</code> : Copies selected text to clipboard.</li>
<li><code>^d</code> : Deletes the current line.</li>
<li><code>^e</code> : Moves the cursor to the End of the line.</li>
<li><code>^f</code> : Find/Search. The search pattern is regexp based so characters like
&#34;.&#34;, &#34;(&#34; and &#34;[&#34; needs to be escaped.</li>
<li><code>^g</code> : Goto line number. If you type &#34;here&#34; as the line number you will goto
the current line. Since goto keeps a history of all previous gotos the &#34;here&#34;
index is useful for bookmarking the current line.</li>
<li><code>^o</code> : Page Up. Moves the cursor backwards one full page.</li>
<li><code>^p</code> : Page Down. Moves the cursor forwards one full page.</li>
<li><code>^q</code> : Quits/Exits the program. Ask to save the file if buffer is modified.</li>
<li><code>^r</code> : Reloads the file from disk.</li>
<li><code>^s</code> : Save the file.</li>
<li><code>^v</code> : Paste text from clipboard.</li>
<li><code>^w</code> : Suspend the session, optionally save the file and exit. The suspended
session is saved to a file with a .tsuspend extension. Opening this file will
resume where you left off.</li>
<li><code>^x</code> : Cut text to clipboard.</li>
<li><code>^y</code> : Redo the last undo.</li>
<li><code>^z</code> : Undo the previous edit.</li>
<li><code>^Down Arrow</code> : Go to definition of word under cursor (if found in tags file).</li>
<li><code>alt-shift-&gt;</code> : Go to definition (alternative for ^Down Arrow)</li>
<li><code>^Up Arrow</code> : Return from definition.</li>
<li><code>alt-shift-&lt;</code> : Return form definition (alternative for ^Up Arrow)</li>
<li><code>^Left Arrow</code> : Go to previous word.</li>
<li><code>^Right Arrow</code> : Go to next word.</li>
<li><code>Tab</code> : When typing autocompletes the current word.</li>
<li><code>Alt + ;</code> : Toggle tab guides.</li>
<li><code>Alg + /</code> : Comment/uncomment selection</li>
<li><code>F2</code> : Execute a shell command</li>
<li><code>F3</code> : Repeat the previous search.</li>
</ul>
<h2 dir="auto"><a id="user-content-command-line-arguments" href="#command-line-arguments" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command Line Arguments:</h2>
<ul dir="auto">
<li><code>-s filename</code> : Append the syntax rules defined in a file to the current list
of syntax rules.</li>
<li><code>-S filename</code> : Replace the current syntax rules with ones defined in the file.</li>
<li><code>-f extension</code> : Force the syntax highlighter to use the rules for the given
extension.</li>
<li><code>-G line_number</code> : Open file and go to line.</li>
<li><code>+line_number</code> : Shortcut for -G line_number.</li>
<li><code>-F regexp</code> : Open file and executes a find/search.</li>
<li><code>-define variable value</code> : Allows you to modify global variables.</li>
</ul>
<h2 dir="auto"><a id="user-content-code" href="#code" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code:</h2>
<p dir="auto">The control character and escape sequence handling have been re-written to be
more general and to report unhandled cases. This is to make it easier to add
new features to the code. For example, if you want to implement a feature and
bind it to ^k just run the editor and press <code>^k</code>. It will tell you
<code>&#34;Unhandled control character:0xb&#34;</code> so that you know you should add the code as
a <code>\u000b</code> case in handleControls. The same goes for escape sequences. For
example, pressing <code>F12</code> will generate the message <code>&#34;Unhandled sequence:[24~&#34;</code></p>
<h2 dir="auto"><a id="user-content-syntax-hilighting-rules" href="#syntax-hilighting-rules" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Syntax Hilighting Rules:</h2>
<p dir="auto">The rules for syntax hilighting are currently hardcoded in the file and
contained within the variable syntaxRules located at the top of the code. The
syntax rules is in the form:</p>
<div data-snippet-clipboard-copy-content="{filepattern} {{regexp} {formatting}..}"><pre><code>{filepattern} {{regexp} {formatting}..}
</code></pre></div>
<p dir="auto">Comments (after #) are ignored. Syntax hilighting is line based so we can&#39;t
have multi-line rules like C-style comments.
If more than one rule applies to piece of text then the most encompassing rule
wins.
For example for the text:</p>

<p dir="auto">both the script variable (due to <code>$</code>) and the string rules <code>(&#34;.*?&#34;)</code> apply.
However since the string rule encompasses the script variable rule then the
string rule wins and the text is colored according to the string rule.</p>
<p dir="auto">But within each rule the opposite is true. If the regexp matches a piece of
text multiple times then the most specific match wins. For example for the Tcl
variable regexp:</p>
<div data-snippet-clipboard-copy-content="{(?:set|append|incr) ([a-zA-Z_][a-zA-Z0-9_]*)}"><pre><code>{(?:set|append|incr) ([a-zA-Z_][a-zA-Z0-9_]*)}
</code></pre></div>
<p dir="auto">the text:</p>

<p dir="auto">matches twice. Once for <code>set x</code> and another time for <code>x</code>. Since <code>x</code> is more
specific then only it will be colored by the rule. This overcomes Tcl&#39;s lack of
look-behind in its regexp engine.</p>
<p dir="auto">Formatting is defined by ANSI escape sequence. For example bright green is
<code>{1;32}</code>. The arrays <code>fg</code>, <code>bg</code> and <code>style</code> above makes it more convenient to
define the formatting. Using the previous example bright green may be written
as <code>{$style(bright);$fg(green)}</code>.</p>
<p dir="auto">Also, due to the way the renderig engine works, the syntax hilighting rules
cannot distinguish between tabs and spaces. So for the purpose of writing the
syntax regexp <code>&#34; &#34;</code>, <code>&#34;\s&#34;</code>, <code>&#34;\t&#34;</code> and <code>&#34;[[:space:]]&#34;</code> are synonymous.</p>
<h2 dir="auto"><a id="user-content-config-files" href="#config-files" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Config Files:</h2>
<p dir="auto">If the file <code>.tcled.conf</code> exists in the current directory or in any parent
directories then it will be read as a config file. This mechanism means that
you can have different configurations for different projects.</p>
<p dir="auto">The syntax of the config file is simply a list of <code>setting</code> and <code>value</code> on
each line. Everything after a <code>#</code> symbol to the end of each line are considered
comments and will be ignored. Empty lines are ignored.</p>
<p dir="auto">The following settings are available:</p>
<ul dir="auto">
<li><code>execShell</code> - Shell to use to execute shell commands (F2). Defaults to <code>/bin/bash</code>.</li>
<li><code>tabstop</code> - Number of spaces per tab. Default is <code>4</code>.</li>
<li><code>usetabs</code> - Use tabs or spaces. Default is <code>true</code> which means use tabs instead of spaces.</li>
<li><code>searchcase</code> - Is search case sensitive? Defaults to <code>false</code>.</li>
<li><code>tabGuide</code> - Turn on tab guide on or off. Defaults to <code>false</code> which turns it off.</li>
<li><code>filealias</code> - Maps a file extension to another for the purposes of syntax highlighting. This setting takes two arguments instead of one. You can specify multiple <code>filealias</code> in a config file.</li>
</ul>
<p dir="auto">Example config file:</p>
<div data-snippet-clipboard-copy-content="# Management mandates 8 spaces:
usetabs false
tabstop 8

filealias ts js # use js syntax for typescript"><pre><code># Management mandates 8 spaces:
usetabs false
tabstop 8

filealias ts js # use js syntax for typescript
</code></pre></div>
</article>
          </div></div>
  </body>
</html>
