<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eugeneyan.com/writing/writing-docs-why-what-how/">Original</a>
    <h1>Writing better by answering why, what, how</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Here‚Äôs a story from the early days of Amazon Web Services: Before writing any code, <a href="https://review.firstround.com/how-to-build-an-invention-machine-6-lessons-that-powered-amazons-success#lesson-1-slow-down-to-innovate" target="_blank">engineers spent 18 months</a> contemplating and writing documents on how best to serve the customer. Amazon believes this <em>is</em> the fastest way to work‚Äîthinking deeply about what the customer needs before executing on that rigorously refined vision.</p>
<p>Similarly, as a data scientist, though I solve problems via code, a lot of the work happens <em>before</em> writing any code. Such work takes the form of thinking and/via writing documents. This is especially so in Amazon, which is famous for its writing culture.</p>
<p>This post (and the <a href="https://eugeneyan.com/writing/ml-design-docs/" target="_blank">next</a>) answers the most voted-for question on the <a href="https://www.dory.app/c/d5ae91d7/8898aab9_what-should-eugene-write-about-past-writing-https-eugeneyan.com-writing-/questions" target="_blank">topic poll</a>:</p>
<blockquote>
<p>How to write design documents for data science/machine learning projects?</p>
</blockquote>
<p>I‚Äôll start by sharing three documents I‚Äôve written: one-pagers, design documents, and after action reviews. Then, I‚Äôll reveal the framework I use to structure most of my writing, including this post. In the next post, we‚Äôll discuss design docs.</p>

<p>I usually write three types of documents when building/operating a system. The first two help to get alignment and feedback; the last is used to reflect‚Äîall three assist with thinking deeply and improving outcomes.</p>
<p><img src="https://eugeneyan.com/assets/work-docs.jpg" loading="lazy" title="The three types of documents written during a project" alt="The three types of documents written during a project"/></p>
<p>The three types of documents written during a project</p>
<p><strong>One-pagers:</strong> I use these to achieve alignment with business/product stakeholders. Also used as background memos for quarterly/yearly prioritization. In a single page, they should allow readers to quickly understand the problem, expected outcomes, proposed solution, and high-level approach. Extremely useful to reference when you‚Äôre deep in the weeds of a project, or encounter scope creep.</p>
<p><strong>Design docs:</strong> I use these to get feedback from fellow scientists and engineers. They help identify design issues early in the process. Furthermore, you can iterate on design docs more rapidly than on systems, especially if said systems are already in production. It usually covers methodology and system design, and includes experiment results and technical benchmarks (if available).</p>
<p>Design docs are more commonly seen in engineering projects; not so much for data science/machine learning. Nonetheless, I‚Äôve found it invaluable for building better ML systems and products.</p>
<p><strong>After-action reviews:</strong> I use these to reflect after shipping a project, or after a major error. If it‚Äôs a project review, we cover what went well (and not so well), follow-up actions, and how to do better next time. It‚Äôs like a <a href="https://eugeneyan.com/writing/what-i-love-about-scrum-for-data-science/#retrospectives-feedback-loop-for-improvement" target="_blank">scrum retrospective</a>, except with more time to think and written as a document. The knowledge can then be shared with other teams.</p>
<p>If it‚Äôs an error review (e.g., the system goes down), we diagnose the root cause and identify follow-up actions to prevent reoccurrence. Nowhere do we blame individuals. The intent is to discuss what we can do better and share the (sometimes painful) lessons with the greater organization. Amazon calls these <a href="https://wa.aws.amazon.com/wat.concept.coe.en.html" target="_blank">Correction of Errors</a>; here‚Äôs how it <a href="https://github.com/JDHarris007/coe/blob/master/CoE.md" target="_blank">looks like</a>.</p>
<h2 id="writing-framework-why-what-how-who">Writing framework: Why, What, How, (Who)</h2>
<p>The Why-What-How framework is so simple that it sounds like a reading/writing lesson for first graders. Nonetheless, it guides most, if not all, of my work documents. My writing on this site also follows it (the other format being lists like <a href="https://eugeneyan.com/writing/practical-guide-to-maintaining-machine-learning/" target="_blank">this</a> and <a href="https://eugeneyan.com/writing/data-science-teams/" target="_blank">this</a>).</p>
<p><strong>Why:</strong> Start by explaining <em>Why</em> the document is important. This is often framed around the problem or opportunity we want to address, and the expected benefits. We might also answer the question of <em>Why now?</em></p>
<p>Think of this as the hook for your document. After reading the <em>Why</em>, readers should feel compelled to blaze through the rest of your doc (and hopefully commit to your proposal). In resource-strapped environments (e.g., start-ups), this section convinces decision-makers to invest resources into your idea.</p>
<p>Thus, it‚Äôs critical that‚Äîafter reading this section‚Äîyour audience understands the problem and context. Describe it simply in their terms: customer benefits, business gains, productivity improvements. Contrast the two <em>Whys</em> below; which is better suited for a business audience?</p>
<blockquote>
<p>‚ÄúWe need to procure GPU clusters for distributed training of SOTA deep learning models that will improve <a href="https://eugeneyan.com/cdn-cgi/l/email-protection" data-cfemail="b1dff5f2f6f18081">[email¬†protected]</a> by 20%.‚Äù</p>
<p>‚ÄúWe need to invest in infrastructure to improve customer recommendations, with an expected conversion and revenue uplift of 5%.‚Äù</p>
</blockquote>
<p>The first one might be a tad exaggerated, but I‚Äôve seen <em>Whys</em> that start like that. ü§¶‚Äç‚ôÇÔ∏è It‚Äôs a great way to lose the audience from the get-go.</p>
<p><strong>What:</strong> After the audience is convinced we should solve the problem, share what a good solution looks like. What are the expected outcomes and ways to measure them?</p>
<p>One way to frame <em>What</em> is via measures of success and constraints. Measures of success define what a good (or bad) solution looks like; constraints define what solutions can (and cannot) do. Together, they enable readers to evaluate and decide on proposals, make trade-offs, and provide feedback.</p>
<p>Another way of framing <em>What</em> is via requirements. Business requirements specify the expected customer experience, uplift to business metrics (success measures), and budget (constraints). They might also be framed as product or functional requirements. Technical requirements specify throughput, latency, security, privacy, etc., usually as constraints.</p>
<p><strong>How:</strong> Finally, explain <em>How</em> you‚Äôll achieve the <em>Why</em> and <em>What</em>. This includes methodology, high-level design, tech decisions, etc. It‚Äôs also useful to add how you‚Äôre <em>not</em> implementing it (i.e., out of scope).</p>
<p>The depth of this section depends on the document. For one-pagers, it could be a paragraph or two on deliverables, with details in the appendix. For design docs, you may want to include a <a href="https://en.wikipedia.org/wiki/System_context_diagram" target="_blank">system context diagram</a>, tech decisions (e.g., centralized vs. distributed, EC2 vs. EMR vs. SageMaker), offline experiment results (e.g., hit rate, nDCG), and benchmarks (e.g., throughput, latency, instance count).</p>
<p>Having a solid <em>Why</em> and <em>What</em> provides context and makes this section easier to write. It also makes it easier for readers to evaluate and give feedback on your idea. Conversely, poorly articulated intent and requirements make it difficult to spot a good solution even when it‚Äôs in front of us.</p>
<p><strong>(Who):</strong> While writing docs, we should keep our audience in mind. Although <em>Who</em> may not show up as a section in the doc, it‚Äôll influence how it turns out (topics, depth, language).</p>
<p>A document for business leaders will (and should!) look very different from a document for engineers. Difference audiences will focus on different aspects: customer pain points, business outcomes, ROI vs. technical requirements, design choices, API specifications.</p>
<p>Writing with your <em>Who</em> in mind makes for more productive discussions and feedback. We don‚Äôt ask business leaders for feedback on infra choices, and we don‚Äôt ask devops engineers for guidance on business strategy.</p>
<h2 id="how-to-use-the-framework-to-structure-your-docs">How to use the framework to structure your docs</h2>
<p>Here are some examples of using Why-What-How to structure a one-pager, design doc, after-action review, and my writing on this site.</p>
<table>
<thead>
<tr>
<th>¬†</th>
<th>Why?</th>
<th>What?</th>
<th>How?</th>
</tr>
</thead>
<tbody>
<tr>
<td>One-Pager</td>
<td>‚Ä¢ Problem or opportunity </td>
<td>‚Ä¢ Success metrics </td>
<td>‚Ä¢ Deliverables </td>
</tr>
<tr>
<td>Design Doc</td>
<td>‚Ä¢ Why the problem is important </td>
<td>‚Ä¢ Business / product requirements </td>
<td>‚Ä¢ Methodology &amp; system design </td>
</tr>
<tr>
<td>After-action Review</td>
<td>‚Ä¢ Context of incident </td>
<td>‚Ä¢ Tangible &amp; intangible impact </td>
<td>‚Ä¢ Follow-up actions &amp; owners</td>
</tr>
<tr>
<td>Writing on this site</td>
<td>‚Ä¢ Why reading the post is important (e.g., anecdotes) </td>
<td>‚Ä¢ The topic being discussed (e.g., documents we write at work)</td>
<td>‚Ä¢ The insight being shared (e.g., Why-What-How, examples)</td>
</tr>
</tbody>
</table>

<p><strong>Why:</strong> Our data science team (in an e-commerce company) is challenged to help customers discover products easier. Senior leaders hypothesize that better product discovery will improve customer engagement and business outcomes.</p>
<p><strong>What:</strong> First-order metrics are engagement (e.g., CTR) and revenue (e.g., conversion, revenue per session). Second-order metrics include app usage (e.g., daily active users) and retention (e.g., monthly active users). Constraints are set via a budget and timeline.</p>
<p><strong>How:</strong> The team considered several online (e.g., search, recommendations) and offline (e.g., targeted emails, push notifications) approaches. Their analysis showed the majority of customer activity occurs on product pages. Thus, an <a href="https://eugeneyan.com/writing/real-time-recommendations/#primer-i" target="_blank">item-to-item</a> (i2i) recommender‚Äîon product pages‚Äîis hypothesized to yield the greatest ROI.</p>
<p><strong>Appendix:</strong> Breakdown of inbound channels and site activity, overview of the various approaches, detailed explanation on recommendation systems.</p>
<hr/>
<h3 id="design-document-example">Design document example</h3>
<p><strong>Why:</strong> Currently, our product pages lack a way for users to discover similar products. To address this, we are building an i2i recommender to improve product discoverability and customer engagement.</p>
<p><strong>What:</strong> Business requirements are similar to those specified in the one-pager, albeit with greater detail. We collaborated with the web and mobile app teams to define technical requirements such as throughput (&gt; 1,000 requests per second), latency (&lt;150ms at p99), and availability (99% uptime). Our constraints include cost (&lt;10% of revenue generated, with an absolute threshold) and integration points.</p>
<p><strong>How:</strong> This will be the meatiest section of the design doc. We‚Äôll share the <a href="https://eugeneyan.com/writing/real-time-recommendations/#how-to-design-and-implement-an-mvp" target="_blank">methodology and high-level design</a>, including system-context-diagrams, tech choices, initial offline evaluation metrics (for ML), and address aspects of throughput, latency, cost, security, data privacy, integration, etc.</p>
<p><strong>Appendix:</strong> Trade-offs, what was considered but excluded, API specs, UI, etc.</p>
<hr/>
<h3 id="after-action-review-example">After-action review example</h3>
<p><strong>Context:</strong> During a peak sales day (<a href="https://en.wikipedia.org/wiki/Singles%27_Day" target="_blank">11/11</a>), the i2i recommender was not visible on product pages for a period of time. This was discovered by category managers inspecting their products‚Äô discounts.</p>
<p><strong>Why (<a href="https://en.wikipedia.org/wiki/Five_whys" target="_blank">5 Whys</a>):</strong> The spike in traffic led to increased latency (&gt;150ms) when serving recommendations. The increased latency led to the recommender widget timing out‚Äîand not being shown‚Äîon product pages. While autoscaling was enabled, it hit the <a href="https://aws.amazon.com/premiumsupport/knowledge-center/ec2-InstanceLimitExceeded-error/" target="_blank">instance quotas</a> and could not scale beyond that. Though we conducted load tests at 3x normal traffic, these were insufficient as peak traffic was 30x normal traffic. In addition, it was not discovered earlier because our alarms didn‚Äôt account for results not being displayed.</p>
<p><strong>What:</strong> Customer experience was unaffected as product pages continued to load within expected latency. Nonetheless, not serving recommendations led to loss of expected revenue. Based on revenue attributed to the recommender during the rest of the day, the estimated loss is $x.</p>
<p><strong>How:</strong> We will take these follow-up actions to prevent a repeated incident and detect similar issues earlier. These are their respective owners.</p>
<p><strong>Appendix:</strong> Timeline of incident, overall learnings and recommendations.</p>
<hr/>
<h3 id="personal-writing-example">Personal writing example</h3>
<p><strong>Why</strong>: Why is writing documents important? Share anecdote. Mention it‚Äôs highly voted-for.</p>
<p><strong>What</strong>: What documents do I write? Share some examples.</p>
<p><strong>How</strong>: Explain the Why-What-How approach and share examples of how I use it.</p>
<hr/>
<h2 id="writing-docs-is-expensive-but-cheap">Writing docs is expensive, but cheap</h2>
<p>Writing documents cost money. They take time to write, review, and iterate on‚Äîthis is time that could have been spent on implementation.</p>
<p>Nonetheless, writing is a cheap way to ensure we <strong>solve the right problems in the right way</strong>. They save money by helping teams avoid rabbit holes or building systems that aren‚Äôt used. They also help align stakeholders, improve initial ideas, and scale knowledge.</p>
<p>If the problem is ambiguous, the proposed solution contentious, the effort required high (&gt; 3-6 months), and/or consensus is required across multiple teams, starting with a document will save effort in the medium to long term.</p>
<p>So before you start your next project, write a document using Why-What-How. Here‚Äôs more detail about <a href="https://eugeneyan.com/writing/what-i-do-before-a-data-science-project-to-ensure-success/#first-draw-the-map-to-the-destination-one-pager" target="_blank">one-pagers</a> (and other things I do before starting a project).</p>
<div>
<blockquote><p lang="en" dir="ltr">While starting AWS, before writing any code, engineers spent 18 months writing documents on how best to serve customers.</p>‚Äî Eugene Yan (@eugeneyan) <a href="https://twitter.com/eugeneyan/status/1366573472533667840?ref_src=twsrc%5Etfw">March 2, 2021</a></blockquote> 
</div>

<p><strong>Thanks</strong> to Yang Xinyi for reading drafts of this.</p>


</div></div>
  </body>
</html>
