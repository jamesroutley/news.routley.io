<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bbc.co.uk/blogs/radiolabs/2007/11/perl_on_rails.shtml">Original</a>
    <h1>Perl on Rails (2007)</h1>
    
    <div id="readability-page-1" class="page"><div id="entry-20719">
	
	

	<div>
		
			<p>Like most organisations the BBC has its own technical ecosystem; the BBC&#39;s is pretty much restricted to Perl and static files. This means that the vast majority of the BBC&#39;s website is statically published - in other words HTML is created internally and FTP&#39;ed to the web servers. There are then a range of Perl scripts that are used to provide additional functionality and interactivity.</p>

<p>While there are some advantages to this ecosystem there are also some obvious disadvantages. And a couple of implication, including an effective hard limit on the number of files you can save in a single directory (many older, but still commonly used, filesystems just scan through every file in a directory to find a particular filename so performance rapidly degrades with thousands, or tens of thousands, of files in one directory), the inherent complexity of keeping the links between pages up to date and valid and, the sheer number of static files that would need to be generate to deliver the sort of aggregation pages we wanted to create when we <a href="https://derivadow.com/2007/10/18/programme-support/">launched /programmes</a>; let alone our plans for /music and personalisation.</p>

<p>What we wanted was a dynamic publishing solution - in other words the ability to render webpages on the fly, when a user requests them. Now obviously there are already a number of existing frameworks out there that provide the sort of functionality that we needed, however none that provided the functionality and that could be run on the BBC servers. So we (the Audio and Music bit of Future Media and Technology - but more specifically Paul, <a href="https://whomwah.com/">Duncan</a>, Michael and Jamie) embarked on building a <a href="https://en.wikipedia.org/wiki/Model-view-controller">Model-view-controller</a> (MVC) framework in Perl.</p>

<p>For applications that run internally we use <a href="https://www.rubyonrails.org/">Ruby on Rail</a>. Because we enjoy using it, its fast to develop with, straight forward to use and because we use it (i.e. to reduce knowledge transfer and training requirements) we decided to follow the same design patterns and coding conventions used in Rails when we built our MVC framework. Yes that&#39;s right we&#39;ve built Perl on Rails.</p>
		

		
		<div id="more">
			<p>This isn&#39;t quite as insane as it might appear. Remember that we have some rather specific non-functional requirements. We need to use Perl, there are restrictions on which libraries can and can&#39;t be installed on the live environment and we needed a framework that could handle significant load. What we&#39;ve built ticks all those boxes. Our benchmarking figures point to significantly better performance than Ruby on Rails (at least for the applications we are building), it can live in the BBC technical ecosystem and it provides a familiar API to our web development and software engineering teams with a nice clean separation of duties with rendering completely separated from models and controllers.</p>

<p>Using this framework we have launched <a href="https://www.bbc.co.uk/blogs/bbcinternet/2007/11/a_page_for_every_programme_1.html">/programmes</a>. And because the pages are generated dynamically we can aggregate and slice and dice the content in <a href="https://www.bbc.co.uk/blogs/radiolabs/2007/11/urls.shtml">interesting ways</a>. And nor do we have to sub divide our pages into arbitrary directories on the web server - the BBC broadcasts about 1,400 programmes a day which means if we created a single static file for each episode we would start to run into performance problems within a couple of weeks.</p>

<p>Now since we&#39;ve gone to the effort of building this framework and because it can be used to deliver great, modern web products we want to use it elsewhere. As I&#39;ve written about <a href="https://derivadow.com/2007/06/21/bbc-music-brainz/">elsewhere</a> we are working on building an enhanced <a href="https://www.bbc.co.uk/music/">music site</a> built around a <a href="https://musicbrainz.org/"> MusicBrainz</a> spine. But that&#39;s just my department - what about the rest of the BBC?</p>

<p>In general the BBC&#39;s Software Engineering community is pretty good at sharing code. If one team has something that might be useful elsewhere then there&#39;s no problem in installing it and using it elsewhere. What we&#39;re not so good at is coordinating our effort so that we can all contribute to the same code base - in short we don&#39;t really have an open source mentality between teams - we&#39;re more <a href="https://www.catb.org/%7Eesr/writings/cathedral-bazaar/">cathedral and less bazaar</a> even if we freely let each other into our cathedrals.</p>

<p>With the Perl on Rails framework I was keen to adopted a much more open source model - and actively encouraged other teams around the BBC to contribute code - and that&#39;s pretty much what we&#39;ve done. In the few weeks since the <a href="https://www.bbc.co.uk/programmes/">programmes</a> beta launch <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> and <a href="https://en.wikipedia.org/wiki/YAML">YAML</a> views have been written - due to go live next month. Integration with the BBC&#39;s centrally managed controlled vocabulary - to provide accurate term extraction and therefore programme aggregation by subject, person or place - is well underway and should be with us in the new year. And finally the <a href="https://www.bbc.co.uk/iplayer/">iPlayer</a> team are building the next generation iPlayer browse using the framework. All this activity is great news. With multiple teams contributing code (rather than forking it) everyone benefits from faster development cycles, less bureaucracy and enhanced functionality.</p>
		</div>
		

		
		
		
			
		 
		
	</div>


	

							
	 						
		
	
	





	<!--No uid list supplied to dna.-->


	

	

	

	
	

	
		
		
		
		
			
		

	
	
	
	
	
	

	
	
	  
		
		




	 	
</div></div>
  </body>
</html>
