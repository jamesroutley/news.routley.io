<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.troyhunt.com/building-password-purgatory-with-cloudflare-pages-and-workers/">Original</a>
    <h1>Building Password Purgatory with Cloudflare Pages and Workers</h1>
    
    <div id="readability-page-1" class="page"><section>
<p>I have lots of little ideas for various pet projects, most of which go nowhere (<a href="https://haveibeenpwned.com/">Have I Been Pwned</a> being the exception), so I&#39;m always looking for the fastest, cheapest way to get up and running. Last month as part of my blog post on <a href="https://www.troyhunt.com/how-everything-were-told-about-website-identity-assurance-is-wrong/">How Everything We&#39;re Told About Website Identity Assurance is Wrong</a>, I spun up a <a href="https://developers.cloudflare.com/pages/">Cloudflare Pages</a> website for the first time and hosted <a href="https://digicert-secured.com/">digicert-secured.com</a> there (the page has a seal on it so you know you can trust it). Instantly, I fell in love with this method of building websites so when I came up with an idea just yesterday, I knew exactly how I wanted to build it.</p><p>Here&#39;s the idea: I&#39;ve been pondering for some time how to deal with spam like this:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-39.png" alt="" loading="lazy" width="532" height="367"/></figure><p>Somehow, this made it all the way through the Microsoft 365 spam filters, landed in my inbox and consumed some of my precious, limited, highly-valued time. I, in turn, have been considering how to not only consume the time of these spammers, but make it entertaining for all. Which led me to a moment of clarity just yesterday as I was pondering revenge tactics and, in a flash of inspiration, came up with the idea of Password Purgatory:</p><blockquote>purgatory: a place or state of temporary suffering or misery</blockquote><p>You know how we all <em>hate </em>password complexity criteria? The kind that asks for uppercase characters, numbers, but only limited special characters and so on and so forth? That&#39;s what I&#39;m now referring to as Password Purgatory - that temporary state of misery - and that&#39;s what we&#39;re going to do to the spammers 🙂</p><p>The end product will be a page on troyhunt.com where the Michelles of the world will be directed to pitch their content. All they have to do first is create a password... The idea of the Password Purgatory service is that it&#39;s an API designed to take a password, find something wrong with it and send that back in the response. It&#39;ll start out gentle (for example, minimum length) and get increasingly bizarre. A separate service will log each attempt the spammer makes to satisfy the inane criteria and once they&#39;ve finally given up in agony (fingers crossed), I&#39;ll share the results publicly. Naturally I&#39;ll ensure there&#39;s no PII involved and given folks like Michelle write about cybersecurity, it won&#39;t be a password they&#39;ve reused anywhere else, so no problems there (🙄). </p><p>To really get into the community spirit (let&#39;s face it, we all bond together when screwing with spammers), I wanted to make it all open source, take PRs and make the API accessible to anyone from anywhere. My hope is that we build something awesome together and collectively make the lives of spammers just that little bit more miserable.</p><p>So, here&#39;s the whole thing, end to end and step by step.</p><h3 id="creating-a-github-repo-for-pages">Creating a GitHub Repo for Pages</h3><p>Everything is going to deploy out of GitHub so I&#39;ve spun up <a href="https://github.com/troyhunt/password-purgatory">a public repo called &#34;password-purgatory&#34; under my personal account</a>:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-1.png" alt="" loading="lazy" width="915" height="506" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-1.png 600w, https://www.troyhunt.com/content/images/2022/03/image-1.png 915w" sizes="(min-width: 720px) 720px"/></figure><p>Clone it locally, drop in an index.html file with a logo and push it back up. This is now effectively a working website (ok, a <em>really </em>basic one) sitting in source control. This will be a standalone website for people that just want to play with the API I build later on (this isn&#39;t where I&#39;ll be sending Michelle). I&#39;ll also add API documentation there in due course.</p><p>Let&#39;s get it deployed!</p><h3 id="setting-up-cloudflare-pages">Setting up Cloudflare Pages</h3><p>Super easy stuff here, just hit the &#34;Pages&#34; link then &#34;Create a project&#34;:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-5.png" alt="" loading="lazy" width="1184" height="540" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-5.png 600w, https://www.troyhunt.com/content/images/size/w1000/2022/03/image-5.png 1000w, https://www.troyhunt.com/content/images/2022/03/image-5.png 1184w" sizes="(min-width: 720px) 720px"/></figure><p>The first time I used Cloudflare Pages, I had to authorise it to access the GitHub repository by virtue of the Cloudflare App. Jumping back in there now, that authorisation is still in place but it&#39;s the only repo I can see:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-6.png" alt="" loading="lazy" width="744" height="709" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-6.png 600w, https://www.troyhunt.com/content/images/2022/03/image-6.png 744w" sizes="(min-width: 720px) 720px"/></figure><p>No problem, back over to the Cloudflare Pages app on GitHub and add access to the new repo:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-3.png" alt="" loading="lazy" width="797" height="805" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-3.png 600w, https://www.troyhunt.com/content/images/2022/03/image-3.png 797w" sizes="(min-width: 720px) 720px"/></figure><p>I <em>could</em> just give it access to &#34;All repositories&#34;, but I like the idea of <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege">the principle of least privilege</a> in terms of reducing risk so I&#39;m sticking with &#34;Only select repositories&#34;. Back to creating the new Cloudflare Pages site and the repo is now visible:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-7.png" alt="" loading="lazy" width="721" height="413" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-7.png 600w, https://www.troyhunt.com/content/images/2022/03/image-7.png 721w" sizes="(min-width: 720px) 720px"/></figure><p>Time to set up builds and deployments and I&#39;m just going to stick with all the defaults:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-9.png" alt="" loading="lazy" width="726" height="1138" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-9.png 600w, https://www.troyhunt.com/content/images/2022/03/image-9.png 726w" sizes="(min-width: 720px) 720px"/></figure><p>Maybe you don&#39;t want to deploy from main, maybe you want to choose a framework and customise the build command, whatever. For now, I just want to push a single page website so it&#39;s straight to &#34;Save and Deploy&#34;. Thinking, thinking, 4 seconds later... done!</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-10.png" alt="" loading="lazy" width="734" height="730" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-10.png 600w, https://www.troyhunt.com/content/images/2022/03/image-10.png 734w" sizes="(min-width: 720px) 720px"/></figure><p>The live site is now addressable at <a href="https://password-purgatory.pages.dev/">password-purgatory.pages.dev</a>:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-19.png" alt="" loading="lazy" width="1393" height="715" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-19.png 600w, https://www.troyhunt.com/content/images/size/w1000/2022/03/image-19.png 1000w, https://www.troyhunt.com/content/images/2022/03/image-19.png 1393w"/></figure><h3 id="binding-the-domain">Binding the Domain</h3><p>The dev URL would normally be fine for dev purposes, but <a href="https://twitter.com/troyhunt/status/1501699537580163075">I&#39;m live-tweeting this as I go</a> and I want the whole thing up and working on the official domain. After the initial build above, I&#39;m over on the project page and now into &#34;Custom domains&#34;:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-11.png" alt="" loading="lazy" width="1053" height="513" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-11.png 600w, https://www.troyhunt.com/content/images/size/w1000/2022/03/image-11.png 1000w, https://www.troyhunt.com/content/images/2022/03/image-11.png 1053w" sizes="(min-width: 720px) 720px"/></figure><p>I&#39;d already registered <a href="https://passwordpurgatory.com/">passwordpurgatory.com</a> with DNSimple so the domain exists already, let&#39;s drop it in:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-12.png" alt="" loading="lazy" width="915" height="361" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-12.png 600w, https://www.troyhunt.com/content/images/2022/03/image-12.png 915w" sizes="(min-width: 720px) 720px"/></figure><p>Finding the domain already registered, Cloudflare now needs me to update DNS to point over to their nameservers:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-15.png" alt="" loading="lazy" width="917" height="460" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-15.png 600w, https://www.troyhunt.com/content/images/2022/03/image-15.png 917w" sizes="(min-width: 720px) 720px"/></figure><p>This is the one part of the process that feels a bit rough TBH; the &#34;Add Site&#34; page pops in a new tab and we&#39;re now embarking on the &#34;classic&#34; path to add a site to Cloudflare:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-14.png" alt="" loading="lazy" width="718" height="205" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-14.png 600w, https://www.troyhunt.com/content/images/2022/03/image-14.png 718w"/></figure><p>Free is good 😎</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-16.png" alt="" loading="lazy" width="890" height="896" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-16.png 600w, https://www.troyhunt.com/content/images/2022/03/image-16.png 890w" sizes="(min-width: 720px) 720px"/></figure><p>Often when you&#39;re moving a domain over to Cloudflare there&#39;ll be existing DNS records. When that&#39;s the case, they&#39;re listed in the screen below but as this is a brand new domain that&#39;s presently doing absolutely nothing, we&#39;ll ignore that and just continue (we&#39;ll add DNS records later when the domain is bound to the Cloudflare Pages resource):</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-17.png" alt="" loading="lazy" width="878" height="537" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-17.png 600w, https://www.troyhunt.com/content/images/2022/03/image-17.png 878w" sizes="(min-width: 720px) 720px"/></figure><p>Nameserver time! Cloudflare has identified the existing 4 nameservers at DNSimple and given me 2 of their own to replace these with:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-18.png" alt="" loading="lazy" width="897" height="1044" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-18.png 600w, https://www.troyhunt.com/content/images/2022/03/image-18.png 897w" sizes="(min-width: 720px) 720px"/></figure><p>How you update nameservers will depend on who your domain registrar is, but it&#39;s all pretty much the same process and it looks like this on DNSimple:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-40.png" alt="" loading="lazy" width="705" height="991" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-40.png 600w, https://www.troyhunt.com/content/images/2022/03/image-40.png 705w"/></figure><p>And that&#39;s it. Well, other than waiting for DNS magic to do its thing and propagate, let&#39;s head back to Cloudflare and hit that &#34;Done, check nameservers&#34; button. (Whilst writing that sentence, email confirmation comes through that the domain is now active.) I won&#39;t screen cap everything here, the tl;dr is that I turned on all the security things, all the auto minification things, completed the wizard then repeated the &#34;Add a custom domain&#34; process from earlier on. With the domain now added to Cloudflare, they&#39;re able to add the appropriate CNAME and activate it against the Pages resource:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-21.png" alt="" loading="lazy" width="867" height="327" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-21.png 600w, https://www.troyhunt.com/content/images/2022/03/image-21.png 867w" sizes="(min-width: 720px) 720px"/></figure><p>Just pausing here for a moment, one of the really cool things about Cloudflare pages compared to more traditional hosting models is that <em>I have no idea where it&#39;s hosted!</em> Well, kinda - it&#39;s hosted on the hundreds of Cloudflare&#39;s edge nodes spread around the world, the point is it&#39;s not deployed to, say, the West US data centre like HIBP is. You can see this illustrated via the cf-ray response header which indicates the edge node the request was served from:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-22.png" alt="" loading="lazy" width="546" height="379"/></figure><p>Brisbane is just up the road from me so my connection has gone a <em>very </em>short distance to a local instance of the site. Fire up NordVPN, connect to a Norway exit node and suddenly we&#39;re getting content from Copenhagen:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-23.png" alt="" loading="lazy" width="551" height="382"/></figure><p>What did I have to do to get a massively geographically distributed website up and running? Nothing more than spend about 15 mins and $0 😎</p><h3 id="creating-a-cloudflare-worker-with-wrangler">Creating a Cloudflare Worker with Wrangler</h3><p>Just before we jump into this, a quick note: As I completed the entire code, deployment and blog post and prepared for a celebratory beer, I learned that <a href="https://developers.cloudflare.com/pages/platform/functions/">there&#39;s a beta of Functions within Cloudflare Pages</a> that would simplify my implementation. Do check that out if you&#39;re going to follow in my footsteps.</p><p>This is going to be the heart of Password Purgatory, the API that receives a password and puts people through hell by demanding increasingly bizarre and infeasible criteria in order for it to be accepted. It never will be accepted - there has to be <em>no </em>acceptable password - hence being in purgatory 🙂</p><p>Before we go further, the pre-req is Cloudflare&#39;s Workers CLI known as &#34;Wrangler&#34;. Installation with Node is easy and is documented on <a href="https://developers.cloudflare.com/workers/get-started/guide/">the getting started guide for workers</a>. Get it, install it then continue. Make sure you allow Wrangler to manage the Workers in your Cloudflare account:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-24.png" alt="" loading="lazy" width="600" height="366" srcset="https://www.troyhunt.com/content/images/2022/03/image-24.png 600w"/></figure><p>From the CLI on my local machine, I can now create a brand new project:</p>
<pre><code>wrangler generate password-purgatory-api</code></pre><p>This generates all the content required not just to build your own local worker, but inits a new Git repository as well:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-25.png" alt="" loading="lazy" width="628" height="395" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-25.png 600w, https://www.troyhunt.com/content/images/2022/03/image-25.png 628w"/></figure><p>The index.js file contains the Worker code and will look familiar if you&#39;ve previously just created Workers in the browser (check out <a href="https://www.troyhunt.com/serverless-to-the-max-doing-big-things-for-small-dollars-with-cloudflare-workers-and-azure-functions/">Serverless to the Max: Doing Big Things for Small Dollars with Cloudflare Workers and Azure Functions</a> and <a href="https://www.troyhunt.com/creating-a-lametric-app-with-cloudflare-workers-and-kv/">Creating a LaMetric App with Cloudflare Workers and KV</a> for previous examples of Workers).</p><p>Let&#39;s get to the really cool bit:</p><pre><code>wrangler dev</code></pre><p>This command fires up the local dev environment which by default, listens on port 8787:</p><pre><code>Listening on http://127.0.0.1:8787</code></pre><p>Which now means we can do this:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-26.png" alt="" loading="lazy" width="303" height="152"/></figure><p>And there we have it - a working worker! That request is then tracked in the CLI:</p><pre><code>[2022-03-10 11:38:24] GET password-purgatory-api.troyhunt.workers.dev/ HTTP/1.1 200 OK</code></pre><p>Once up and running, you can jump into the Worker code and make edits:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-27.png" alt="" loading="lazy" width="502" height="268"/></figure><p>Which the running dev environment immediately picks up on:</p><pre><code> Detected changes...
Script modified; context reset.</code></pre><p>And then reflects upon next request:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-28.png" alt="" loading="lazy" width="292" height="132"/></figure><p>As this is going to be an API returning JSON, let&#39;s tweak it a little to return the right content type in the right format:</p><pre><code>addEventListener(&#39;fetch&#39;, event =&gt; {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  const data = {
    message: &#39;Hello worker!&#39;,
  };

  const json = JSON.stringify(data, null, 2);

  return new Response(json, {
    headers: { &#39;content-type&#39;: &#39;application/json;charset=UTF-8&#39; },
  })
}</code></pre><p>Lastly, I&#39;m going to push this up to GitHub into a brand new repo located at <a href="https://github.com/troyhunt/password-purgatory-api">https://github.com/troyhunt/password-purgatory-api</a></p><p>Which now means we can do the next really cool bit:</p><h3 id="deploying-the-cloudflare-worker-from-github">Deploying the Cloudflare Worker from GitHub</h3><p>Over in the GitHub marketplace, there&#39;s an action called <a href="https://github.com/marketplace/actions/deploy-to-cloudflare-workers-with-wrangler">Deploy to Cloudflare Workers with Wrangler</a> which does, well, it&#39;s kinda self-explanatory. What we&#39;re going to do now is configure GitHub to watch for changes and then publish those over to the live running Worker on Cloudflare. As with the Cloudflare Pages example before, I&#39;m going to configure the simplest possible implementation which will mean deploying from &#34;master&#34; (Wrangler&#39;s default branch name as opposed to &#34;main&#34; seen earlier when creating the repository directly in GitHub).</p><p>Before doing that, we need to give GitHub the secret Cloudflare uses to orchestrate deployments. <a href="https://dash.cloudflare.com/profile/api-tokens">Cloudflare&#39;s API tokens page</a> allows you to create secrets based on templates and there&#39;s a handy one ready to go for Workers:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-29.png" alt="" loading="lazy" width="693" height="579" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-29.png 600w, https://www.troyhunt.com/content/images/2022/03/image-29.png 693w"/></figure><p>In configuring this, I&#39;ve named the token &#34;GitHub deployment of Password Purgatory API&#34;, selected my Cloudflare account and for the zone, the passwordpurgatory.com account I created earlier on. Once the token is created it&#39;s back to GitHub and I&#39;ve created a secret called &#34;CF_API_TOKEN&#34; with the appropriate value:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-30.png" alt="" loading="lazy" width="541" height="266"/></figure><p>That now sits in the public repository out of sight from anyone else, but accessible via the deployment script we&#39;re about to create:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-31.png" alt="" loading="lazy" width="780" height="129" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-31.png 600w, https://www.troyhunt.com/content/images/2022/03/image-31.png 780w" sizes="(min-width: 720px) 720px"/></figure><p>Now for the GitHub action itself and again, all this is going to be the bare basics, simple easy go-fast version:</p><pre><code>name: Deploy

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest
    name: Deploy
    steps:
      - uses: actions/checkout@v2
      - name: Publish
        uses: cloudflare/wrangler-action@1.3.0
        with:
          apiToken: ${{ secrets.CF_API_TOKEN }}</code></pre><p>Note the reference on the last line to the secret I created in the previous step. Save this into the &#34;.github\workflows\main.yml&#34;, commit, push and then over in the &#34;Actions&#34; section of the GitHub repo where the magic has already happened:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-32.png" alt="" loading="lazy" width="956" height="257" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-32.png 600w, https://www.troyhunt.com/content/images/2022/03/image-32.png 956w" sizes="(min-width: 720px) 720px"/></figure><p>Let&#39;s check it actually exists in Cloudflare by jumping over to the dashboard and drilling down into workers:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-33.png" alt="" loading="lazy" width="825" height="443" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-33.png 600w, https://www.troyhunt.com/content/images/2022/03/image-33.png 825w" sizes="(min-width: 720px) 720px"/></figure><p>Success! But does it actually work? Let&#39;s drill down into it further:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-34.png" alt="" loading="lazy" width="657" height="191" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-34.png 600w, https://www.troyhunt.com/content/images/2022/03/image-34.png 657w"/></figure><p>The route of <a href="https://password-purgatory-api.troyhunt.workers.dev/">password-purgatory-api.troyhunt.workers.dev</a> is generated by Cloudflare and a quick check shows exactly what we&#39;d expect to see:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-35.png" alt="" loading="lazy" width="440" height="153"/></figure><p>There&#39;s just one more step - defining a custom route. What I really want to do is access this API via api.passwordpurgatory.com and the first thing I&#39;m going to need to do that is a CNAME DNS entry to create the subdomain. Over to Cloudflare&#39;s DNS settings and add a new record:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-36.png" alt="" loading="lazy" width="1007" height="193" srcset="https://www.troyhunt.com/content/images/size/w600/2022/03/image-36.png 600w, https://www.troyhunt.com/content/images/size/w1000/2022/03/image-36.png 1000w, https://www.troyhunt.com/content/images/2022/03/image-36.png 1007w" sizes="(min-width: 720px) 720px"/></figure><p>It doesn&#39;t matter that the CNAME target is the Cloudflare Pages resource, so long as it&#39;s routed to Cloudflare we&#39;re going to catch requests to the API in the next step. What we need is a route for the Worker so let&#39;s jump down to the &#34;Workers&#34; section of the site we&#39;re now on and create the following:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-37.png" alt="" loading="lazy" width="443" height="309"/></figure><p>Why that route? Because I want to hit the API <a href="https://api.passwordpurgatory.com/make-hell?password=hunter2">like this</a>:</p><pre><code>https://api.passwordpurgatory.com/make-hell?password=hunter2</code></pre><p>Which works just beautifully:</p><figure><img src="https://www.troyhunt.com/content/images/2022/03/image-38.png" alt="" loading="lazy" width="523" height="154"/></figure><p>Finally, just to test this end to end:</p><ol><li>Added a bunch of code locally to the worker</li><li>Tested via the Wrangler CLI</li><li>Pushed to GitHub</li><li>Watched action run and successfully deploy</li><li>Checked production Worker in the Cloudflare dashboard by going to &#34;Quick edit&#34; and saw the changes in place</li><li>Tested the API in the browser</li></ol><p>As with Pages, the Worker is also running &#34;on the edge&#34; and for just the same reason as with pages, that&#39;s super cool 😎</p><h3 id="summary">Summary</h3><p>I&#39;ve had a bunch of PRs between live-tweeting earlier today and pushing this blog post just now. Thank you! I&#39;d really like to get this more intelligent; maybe there should be different &#34;paths&#34; for password criteria to mix it up a bit? Maybe it should differ based on the day or time? Maybe based on the requestor&#39;s country (<a href="https://developers.cloudflare.com/workers/examples/country-code-redirect/">which you can easily access via the inbound request</a>)? The optimal approach should be one that keeps the victim trying to get the password right for as long as possible whilst simultaneously infuriating them and burning their time. Either submit your own PRs or leave comments below, I&#39;d love to hear your ideas.</p><p>As for Michelle, let&#39;s get this code finished up over the coming days and hopefully next week, I&#39;ll start sharing spammers&#39; painful attempts to create an acceptable password 🍿</p>
<section>
<a href="https://www.troyhunt.com/tag/cloudflare/">Cloudflare</a>
<a href="https://www.troyhunt.com/tag/passwords/">Passwords</a>
</section>
</section></div>
  </body>
</html>
