<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zck.org/emacs-repeat-mode-emacs-repeat-mode">Original</a>
    <h1>Easily repeat Emacs functions: a repeat post</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p>Enable it with <code>(repeat-mode 1)</code>. This will enable repeat mode on all functions with a repeat map.</p>

        <p>Now, every time a command is called, Emacs will look at the <code>&#39;repeat-map</code> property on that specific command. If it finds a keymap there, Emacs will bind it as a transient map after running the command.</p>

        <p>To use it, add a keymap to the function with <code>(put #&#39;original-function-name &#39;repeat-map &#39;keymap-for-the-function)</code></p>

        <p>If you look carefully, you&#39;ll notice that I lied before.</p>

        <p>There isn&#39;t a <em>keymap</em> as the property; there&#39;s a <em>symbol</em>. That is, the keymap name is quoted. It can&#39;t directly be a function, like a <code>make-keymap</code> call. Instead, make a variable and set its value to the desired keymap, like <code>(defvar my-example-repeat-map (define-keymap &#34;h&#34; #&#39;function-to-repeat))</code>.</p>

        <p>Once we do all that, after calling <code>#&#39;original-function-name</code>, the user can call <code>#&#39;function-to-repeat</code> by pressing <code>h</code>.</p>

        <p>I suspect repeat mode doesn&#39;t look directly for a keymap to encourage variable use. That way, users can add and remove bindings from the keymap after it&#39;s added to the function. But that&#39;s just a guess.</p>
    </div></div>
  </body>
</html>
