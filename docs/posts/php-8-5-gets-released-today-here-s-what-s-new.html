<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://stitcher.io/blog/new-in-php-85">Original</a>
    <h1>PHP 8.5 gets released today, here&#39;s what&#39;s new</h1>
    
    <div id="readability-page-1" class="page"><article><p>PHP 8.5 was released on <a href="https://wiki.php.net/todo/php85">November 20, 2025</a>. It includes the pipe operator, clone with, a new URI parser, and more.</p>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/pipe-operator-v3">The pipe operator</a></h2>
<p>PHP 8.5 introduces the new pipe operator that makes chaining output from one function to another a lot easier. Instead of deeply nested function calls like this:</p>
<pre><span>$input</span> = <span>&#39; Some kind of string. &#39;</span>;

<span>$output</span> = <span>strtolower</span>(
    <span>str_replace</span>([<span>&#39;.&#39;</span>, <span>&#39;/&#39;</span>, <span>&#39;…&#39;</span>], <span>&#39;&#39;</span>,
        <span>str_replace</span>(<span>&#39; &#39;</span>, <span>&#39;-&#39;</span>,
            <span>trim</span>(<span>$input</span>)
        )
    )
);
</pre>
<p>You can now write this:</p>
<pre><span>$output</span> = <span>$input</span>
    |&gt; <span>trim</span>(...)
    |&gt; (<span>fn</span> (<span><span>string</span> $string</span>) =&gt; <span>str_replace</span>(<span>&#39; &#39;</span>, <span>&#39;-&#39;</span>, <span>$string</span>))
    |&gt; (<span>fn</span> (<span><span>string</span> $string</span>) =&gt; <span>str_replace</span>([<span>&#39;.&#39;</span>, <span>&#39;/&#39;</span>, <span>&#39;…&#39;</span>], <span>&#39;&#39;</span>, <span>$string</span>))
    |&gt; <span>strtolower</span>(...);
</pre>
<p>I&#39;ve done a deep-dive into this new operator, and you can <a href="https://stitcher.io/blog/pipe-operator-in-php-85">read about it here</a>.</p>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/clone_with_v2">Clone with</a></h2>
<p>There&#39;s now a way to assign new values to cloned objects <em>while</em> cloning them:</p>
<pre><span>final</span> <span>class</span> <span>Book</span>
{
    <span>public</span> <span>function</span> <span>__construct</span>(<span>
        <span>public</span> <span>string</span> <span>$title</span>,
        <span>public</span> <span>string</span> <span>$description</span>,
    </span>) {}

    <span>public</span> <span>function</span> <span>withTitle</span>(<span><span>string</span> $title</span>): <span>self</span>
    {
        <span>return</span> <span>clone</span>(<span>$this</span>, [
            <span>&#39;title&#39;</span> =&gt; <span>$title</span>,
        ]);
    }
}
</pre>
<p>I think this is a great feature. The only thing I find unfortunate is that it doesn&#39;t work when cloning readonly properties from the outside (which I think is a common use case). To do so, you have to specifically reset the propery&#39;s write access to <code><span>public</span>(<span>set</span>)</code>. <a href="https://www.youtube.com/watch?v=hkuy11kLlmM">I explained the problem here</a>.</p>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/marking_return_value_as_important"><code>(void)</code> cast and <code>#[NoDiscard]</code></a></h2>
<p>You can now mark a function with the <code><span>#[<span>NoDiscard</span>]</span></code> attribute, indicating that its return value must be used. If nothing happens with that return value, a warning will be triggered.</p>
<pre><span><span>#[<span>NoDiscard</span>(<span>&#34;you must use this return value, it&#39;s very important.&#34;</span>)]</span></span>
<span>function</span> <span>foo</span>(): <span>string</span> {
    <span>return</span> <span>&#39;hi&#39;</span>;
}




<span>foo</span>();


<span>$string</span> = <span>foo</span>();
</pre>
<p>The warning can still be surpressed by using the new <code>(<span>void</span>)</code> cast:</p>
<pre>(<span><span>void</span></span>) <span>foo</span>();
</pre>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/closures_in_const_expr">Closure improvements</a></h2>
<p>Closures and first-class callables can now be used in constant expressions. In practice this means you&#39;ll be able to define closures in attributes, which is an incredible new feature:</p>
<pre><span><span>#[<span>SkipDiscovery</span>(<span>static</span> <span>function</span> (</span><span><span>Container</span> <span>$container</span></span><span>): <span>bool</span> {
    <span>return</span> ! <span>$container</span>-&gt;<span>get</span>(<span>Application</span>::<span>class</span>) <span>instanceof</span> <span>ConsoleApplication</span>;
})]</span></span>
<span>final</span> <span>class</span> <span>BlogPostEventHandlers</span>
{  }
</pre>
<p>Note that these kinds of closures must always be explicitly marked as <code><span>static</span></code>, since they aren&#39;t attached to a <code><span>$this</span></code> scope. They also cannot access variables from the outside scope with <code><span>use</span></code>.</p>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/error_backtraces_v2">Backtraces for fatal errors</a></h2>
<p>A small but awesome change: fatal errors will now include backtraces.</p>
<pre>Fatal error: Maximum execution time of 1 second exceeded in example.php on line 6
Stack trace:
#0 example.php(6): usleep(100000)
#1 example.php(7): recurse()
#2 example.php(7): recurse()
#3 example.php(7): recurse()
#4 example.php(7): recurse()
#5 example.php(7): recurse()
#6 example.php(7): recurse()
#7 example.php(7): recurse()
#8 example.php(7): recurse()
#9 example.php(7): recurse()
#10 example.php(10): recurse()
#11 {main}
</pre>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/array_first_last">Added array_first() and array_last()</a></h2>
<p>Perhaps a bit overdue (<code><span>array_key_first</span>()</code> and <code><span>array_key_last</span>()</code> were added in PHP 7.3), but we finally get built-in functions to get the first and last elements from arrays! So instead of writing this:</p>
<pre><span>$first</span> = <span>$array</span>[<span>array_key_first</span>(<span>$array</span>)] ?? <span>null</span>;
</pre>
<p>You can now write this:</p>
<pre><span>$first</span> = <span>array_first</span>(<span>$array</span>);
</pre>
<hr/>
<h2><a href="https://wiki.php.net/rfc/url_parsing_api">URI parsing</a></h2>
<p>There&#39;s a brand new URI implemention that makes working with URIs a lot easier:</p>
<pre><span>use</span> <span>Uri\Rfc3986\Uri</span>;

<span>$uri</span> = <span>new</span> <span>Uri</span>(<span>&#39;https://tempestphp.com/2.x/getting-started/introduction&#39;</span>);

<span>$uri</span>-&gt;<span>getHost</span>();
<span>$uri</span>-&gt;<span>getScheme</span>();
<span>$uri</span>-&gt;<span>getPort</span>();


</pre>
<hr/>
<h2><a target="_blank" href="https://wiki.php.net/rfc/delayedtargetvalidation_attribute">The <code>#[DelayedTargetValidation]</code> attribute</a></h2>
<p>Some built-in attributes (like <code><span>#[<span>Override</span>]</span></code>) are validated at compile-time rather than at runtime when being called via reflection. The <code><span>#[<span>DelayedTargetValidation</span>]</span></code> allows you to postpone that validation to a runtime:</p>
<pre><span>class</span> <span>Child</span> <span>extends</span> <span>Base</span>
{
	<span>#[<span>DelayedTargetValidation</span>]</span>
	<span>#[<span>Override</span>]</span>
	<span>public</span> <span>const</span> <span>NAME</span> = <span>&#39;Child&#39;</span>;

	
}
</pre>
<p>This attribute is added to manage backwards compatibility issues. You can <a href="https://wiki.php.net/rfc/delayedtargetvalidation_attribute#example">read a concrete example here</a>.</p>
<hr/>
<h2>Smaller changes</h2>
<ul>
<li><a target="_blank" href="https://wiki.php.net/rfc/static-aviz">Asymmetric visibility support for static properties</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/attributes-on-constants">Added support for attributes on compile-time non-class constants</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/final_promotion">Constructor property promotion can now be used for final properties</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/override_properties"><code>#[\Override]</code> can now be applied to properties</a></li>
<li>Added Dom\Element::$outerHTML</li>
<li>The Exif extension now supports HEIF and HEIC images</li>
<li><a href="https://wiki.php.net/rfc/filter_throw_on_failure">There&#39;s a new <code>FILTER_THROW_ON_FAILURE</code> flag when calling <code><span>filter_var</span>()</code></a></li>
</ul>
<hr/>
<h2>Deprecations and breaking changes</h2>
<ul>
<li><a target="_blank" href="https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_non-standard_cast_names">Non-standard cast names like <code>(<span>boolean</span>)</code> and <code>(<span>integer</span>)</code> are deprecated</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_backticks_as_an_alias_for_shell_exec">Backticks as an alias for <code><span>shell_exec</span>()</code> are deprecated</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_constant_redeclaration">Constant redeclaration has been deprecated</a></li>
<li><a target="_blank" href="https://wiki.php.net/rfc/deprecations_php_8_5#remove_disable_classes_ini_setting">The <code>disabled_classes</code> ini setting has been removed</a></li>
<li><a target="_blank" href="https://github.com/php/php-src/blob/PHP-8.5/UPGRADING#L19">You can find all breaking changes and deprecations here</a></li>
</ul>
<hr/>
<p>Those are the features and changes that stand out for PHP 8.5; you can find the whole list of everything that&#39;s changed <a target="_blank" href="https://github.com/php/php-src/blob/PHP-8.5/UPGRADING">over here</a>.</p>
<p>What are your thoughts about PHP 8.5? You can leave them in the comments below!</p>
</article></div>
  </body>
</html>
