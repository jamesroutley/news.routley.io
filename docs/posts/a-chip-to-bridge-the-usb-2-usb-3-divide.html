<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hackaday.com/2022/03/07/a-chip-to-address-the-fundamental-usb-3-0-deficiency/">Original</a>
    <h1>A Chip to Bridge the USB 2 – USB 3 Divide</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
        <p>On Twitter, [whitequark] has  found and highlighted an intriguing design – <a href="https://twitter.com/whitequark/status/1410207408371245062" target="_blank">a breakout board for the VL670</a>, accompanied by an extensive yet <a href="https://notabug.org/niconiconi/vl670" target="_blank">very easy to digest write-up</a> about its usefulness and inner workings. The VL670 is a chip that addresses a surprising problem – converting USB 2.0 signals into USB 3.0.</p>
<p>If you have a USB 2.0 device and a host with <em>only USB 3.0 signals available</em>, this chip is for you. It might be puzzling – why is this even needed? It’s about the little-known dark secret of USB3, that anyone can deduce if they ever have to deal with a 9-pin USB 3.0 connector where one of the three differential pairs doesn’t quite make contact.</p>
<p>When you see a blue “3.0” port, it’s actually USB 2 <em>and</em> USB 3 — two separate interfaces joined into a single connector. USB 3 uses two single-directional differential pairs, akin to PCI-E, whereas USB 2 uses a single bidirectional one, and the two interfaces on a blue connector operate basically independently of each other. There’s many implications to this that are counterintuitive if you simply take “USB 3.0” for “faster backwards-compatible USB”, and they have <a href="https://www.reddit.com/r/AskElectronics/comments/7meqrg/weird_usb_31_problem_looking_for_existing_device/" target="_blank">painful consequences</a>.</p>
<p>For instance, USB 3 hub ICs have two separate hub entities inside – one for USB 3 and one for USB 2. Even if you have a USB 3 hub plugged into a USB 3 port, multiple USB 2 devices plugged into it still cannot break through the USB 2 uplink limit of 480 MBps. If you ever thought that a faster hub with a faster uplink would fix your USB 2 device speed problems – <a href="https://twitter.com/marcan42/status/1416241929319186437" target="_blank">USB-IF engineers, apparently, thought differently</a>; and you might have to find a workaround for your “many cheap SDRs and Pi 4 in a box” setup.<span id="more-524917"></span></p>
<p>As a fun party trick, since <a href="https://electronics.stackexchange.com/questions/297031/usb-3-x-ss-enumeration/297373#297373" target="_blank">USB 3 device enumeration only uses USB 2 as fallback</a>, you can, in theory, connect eight devices to a four-port USB 3 hub – four USB 2 devices and four USB 3 devices. In fact, <a href="https://twitter.com/WifiCable_/status/1497934328868884492" target="_blank">some USB devices use USB 3 lanes exclusively</a> and don’t even connect to USB 2 lanes. Yes, this also implies that you might be able to connect six USB devices to a Raspberry Pi 4, and even seven if you switch the OTG port into a host mode.</p>
<p>So if you find yourself stuck between USB 2 and USB 3, the <a href="https://twitter.com/whitequark/status/1415999233136680960" target="_blank">VL670 is a functional solution</a>. But because it’s addressing a deficiency in the standard, it’s not quite compliant itself. (Not that USB standard non-compliance ever stopped anyone.)</p>
<p>There’s an open-source devboard that you can order parts for and build, with VL670 chips seemingly available on TaoBao. What was this chip originally intended for? Apparently, VirtualLink, a standard that quite a few people <a href="https://twitter.com/noazark/status/1416076534964756483" target="_blank">feel glad to see dead</a>. The aforementioned extensive write-up <a href="https://notabug.org/niconiconi/vl670/src/usb-b/README.md" target="_blank">does talk about more relatable use cases</a>, however – for instance, it turns out that USB 3 signals are easier to galvanically isolate!</p>
<p>We’ve <a href="https://hackaday.com/2021/08/17/why-buy-a-new-scope-when-you-can-just-build-one/">discussed the USB 3 vs USB 2 peculiarity</a> in passing, but it bears establishing its implications more clearly. If you ever wondered about other shady parts of USB, you’ll want to check out the <a href="https://hackaday.com/2020/02/24/hacking-usb-hack-chat/">Hacking USB Hack Chat</a> we had with [Kate Temkin]!</p>
	            </div></div>
  </body>
</html>
