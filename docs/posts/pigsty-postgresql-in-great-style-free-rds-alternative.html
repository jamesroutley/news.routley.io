<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Vonng/pigsty">Original</a>
    <h1>Show HN: Pigsty – PostgreSQL in Great STYle, Free RDS Alternative</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<blockquote>
<p dir="auto">&#34;<strong>P</strong>ostgreSQL <strong>I</strong>n <strong>G</strong>reat <strong>STY</strong>le.&#34;</p>
<p dir="auto">—— <strong>A battery-included, local-first, open-source RDS PG alternative.</strong></p>
<p dir="auto"><a href="https://www.postgresql.org/" rel="nofollow">PostgreSQL</a> + <a href="https://postgis.net/" rel="nofollow">PostGIS</a> + <a href="https://www.timescale.com/" rel="nofollow">TimescaleDB</a> + <a href="https://www.citusdata.com/" rel="nofollow">Citus</a> + <a href="https://github.com/pgvector/pgvector">PGVector</a> + <a href="https://age.apache.org/" rel="nofollow">Age</a> + <a href="https://github.com/Vonng/pigsty/tree/master/app/supabase">Supabase</a> + <a href="https://github.com/Vonng/pigsty/tree/master/app/pgml">PostgresML</a> + <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/PGSQL-EXTENSION.md">...</a></p>
<p dir="auto"><a href="https://github.com/Vonng/pigsty/releases/tag/v2.4.1">Release v2.4.1</a> | <a href="https://github.com/Vonng/pigsty">Repo</a> | <a href="https://demo.pigsty.cc" rel="nofollow">Demo</a> | <a href="https://doc.pigsty.cc/" rel="nofollow">Docs</a> | <a href="https://pigsty.cc/en/" rel="nofollow">Blog</a> | <a href="https://github.com/users/Vonng/projects/2/views/3">Roadmap</a> | <a href="https://t.me/joinchat/gV9zfZraNPM3YjFh" rel="nofollow">Telegram</a> | <a href="https://discord.gg/xm6hR4P4" rel="nofollow">Discord</a></p>
<p dir="auto"><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/INSTALL.md">Get Started</a> with <code>curl -fsSL https://get.pigsty.cc/latest | bash</code></p>
</blockquote>
<hr/>
<h2 tabindex="-1" id="user-content-features" dir="auto"><a href="#features">Features<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Free RDS for PostgreSQL! Check <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md"><strong>Feature</strong></a> | <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/zh/FEATURE.md"><strong>亮点特性</strong></a> for details.</p>
<ul dir="auto">
<li>Battery-Included <a href="https://www.postgresql.org/" rel="nofollow">PostgreSQL</a> Distribution, with <strong>150+</strong> powerful <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/PGSQL-EXTENSION.md">extensions</a>!</li>
<li>Incredible observability powered by <a href="https://prometheus.io/" rel="nofollow">Prometheus</a> &amp; <a href="https://grafana.com/" rel="nofollow">Grafana</a> stack.</li>
<li>Self-healing HA PGSQL cluster, powered by <a href="https://patroni.readthedocs.io/en/latest/" rel="nofollow">patroni</a>, <a href="http://www.haproxy.org/" rel="nofollow">haproxy</a>, <a href="https://etcd.io/" rel="nofollow">etcd</a>.</li>
<li>Auto-Configured PITR, powered by <a href="https://pgbackrest.org/" rel="nofollow">pgBackRest</a> and optional <a href="https://min.io/" rel="nofollow">MinIO</a> repo.</li>
<li>Declarative API, Database-as-Code implemented with <a href="https://www.ansible.com/" rel="nofollow">Ansible</a> playbooks.</li>
<li>Versatile Use-cases, Run <a href="https://www.docker.com/" rel="nofollow">Docker</a> Apps, Run demos, Visualize data with <a href="https://echarts.apache.org/" rel="nofollow">ECharts</a>.</li>
<li>Handy Tools, provision IaaS with <a href="https://www.terraform.io/" rel="nofollow">Terraform</a>, and try with local <a href="https://www.vagrantup.com/" rel="nofollow">Vagrant</a> sandbox.</li>
<li>Run <a href="https://redis.io/" rel="nofollow">Redis</a> (standalone, sentinel, cluster), MinIO, Etcd, Haproxy, MongoDB(<a href="https://www.ferretdb.io/" rel="nofollow">FerretDB</a>) clusters</li>
</ul>
<p dir="auto"><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md"><gh:secured-asset-reference resource_type="UserAsset" resource_id="268277441"></gh:secured-asset-reference></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/Vonng/pigsty/assets/8587410/b30939f3-7819-4046-8cbd-d9cf02d6fb5d"><img src="https://github.com/Vonng/pigsty/assets/8587410/b30939f3-7819-4046-8cbd-d9cf02d6fb5d" alt="pigsty-distro"/></a></p>
<ul dir="auto">
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#battery-included-rds">Battery-Included RDS</a>: Delivers PostgreSQL 12-16 services on EL7-9, spanning kernel to RDS distribution.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#plentiful-extensions">Plentiful Extensions</a>: Bundled with 150+ extensions, time-series, geospatial, full-text-search, vector and more!</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#flexible-architecture">Flexible Architecture</a>: Compose Redis/Etcd/MinIO/Mongo modules, monitoring existing cluster and RDS.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#stunning-observability">Stunning Observability</a>: Leveraging the Prometheus/Grafana stack and provides unmatched insights.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#proven-reliability">Proven Reliability</a>: Self-healing HA, Automatic Failover, Uninterrupted access, Auto-configured PITR.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#great-maintainability">Great Maintainability</a>: Declarative API, GitOps ready, Database/Infra-as-Code and Admin SOP</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#sound-security">Sound Security</a>: Database is safe as long as your hardware &amp; credentials are safe.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#versatile-application">Versatile Application</a>: Docker compose application that using PostgreSQL in one command.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/FEATURE.md#open-source-amp-free">Open Source &amp; Free</a>: Free &amp; open source under AGPLv3. Built for PostgreSQL with love.</li>
</ul>
<p dir="auto"><a href="https://demo.pigsty.cc" rel="nofollow"><gh:secured-asset-reference resource_type="UserAsset" resource_id="268277439"></gh:secured-asset-reference></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/Vonng/pigsty/assets/8587410/cd4e6620-bc36-44dc-946b-b9ae56f93c90"><img src="https://github.com/Vonng/pigsty/assets/8587410/cd4e6620-bc36-44dc-946b-b9ae56f93c90" alt="pigsty-dashboard"/></a></p>
<p dir="auto">Pigsty has over <strong>150+</strong> <strong>OPTIONAL</strong> <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/PGSQL-EXTENSION.md">extensions</a> pre-compiled and packaged, including some not included in the official PGDG repo. Some of the most potent extensions are:</p>
<ul dir="auto">
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/supabase">Supabase</a>: Open-Source Firebase alternative based on PostgreSQL</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/ferretdb">FerretDB</a>: Open-Source MongoDB alternative based on PostgreSQL</li>
<li><a href="https://github.com/Vonng/pigsty/tree/master/app/pgml">PostgresML</a>: Use machine learning algorithms and pretrained models with SQL</li>
<li>PostGIS: Add geospatial data support to PostgreSQL</li>
<li>TimescaleDB: Add time-series/continuous-aggregation support to PostgreSQL</li>
<li>PGVector / PG Embedding: AI vector/embedding data type support, and ivfflat / hnsw index access method</li>
<li>Citus: Turn a standalone primary-replica postgres cluster into a horizontally scalable distributed cluster</li>
<li>Apache AGE: Add OpenCypher graph query language support to PostgreSQL, works like Neo4J</li>
<li>PG GraphQL: Add GraphQL language support to PostgreSQL</li>
<li>zhparser : Add Chinese word segmentation support to PostgreSQL, works like ElasticSearch</li>
</ul>
<details><summary>All Available Extensions</summary>
<p dir="auto"><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/PGSQL-EXTENSION.md"><gh:secured-asset-reference resource_type="UserAsset" resource_id="268277446"></gh:secured-asset-reference></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/Vonng/pigsty/assets/8587410/91dfee81-3193-4505-b33f-0c5949dabf02"><img src="https://github.com/Vonng/pigsty/assets/8587410/91dfee81-3193-4505-b33f-0c5949dabf02" alt="pigsty-extension"/></a></p>
<table>
<thead>
<tr>
<th>name</th>
<th>version</th>
<th>source</th>
<th>type</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>age</strong></td>
<td>1.4.0</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Apache AGE graph database extension</td>
</tr>
<tr>
<td><strong>embedding</strong></td>
<td>0.3.6</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Vector similarity search with the HNSW algorithm</td>
</tr>
<tr>
<td><strong>http</strong></td>
<td>1.6</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>HTTP client for PostgreSQL, allows web page retrieval inside the database.</td>
</tr>
<tr>
<td>pg_tle</td>
<td>1.2.0</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Trusted Language Extensions for PostgreSQL</td>
</tr>
<tr>
<td>roaringbitmap</td>
<td>0.5</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Support for Roaring Bitmaps</td>
</tr>
<tr>
<td><strong>zhparser</strong></td>
<td>2.2</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Parser for full-text search of Chinese</td>
</tr>
<tr>
<td><strong>pgml</strong></td>
<td>2.7.9</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>PostgresML: Use the expressive power of SQL along with the most advanced machine learning algorithms and pretrained models in a high performance database.</td>
</tr>
<tr>
<td>pg_net</td>
<td>0.7.2</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>A PostgreSQL extension that enables asynchronous (non-blocking) HTTP/HTTPS requests with SQL</td>
</tr>
<tr>
<td>vault</td>
<td>0.2.9</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Extension for storing encrypted secrets in the Vault</td>
</tr>
<tr>
<td><strong>pg_graphql</strong></td>
<td>1.3.0</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>GraphQL support for PostgreSQL</td>
</tr>
<tr>
<td><strong>hydra</strong></td>
<td>1.0.0</td>
<td><strong>PIGSTY</strong></td>
<td>FEAT</td>
<td>Hydra is open source, column-oriented Postgres extension</td>
</tr>
<tr>
<td>credcheck</td>
<td>2.1.0</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>credcheck - postgresql plain text credential checker</td>
</tr>
<tr>
<td><strong>pg_cron</strong></td>
<td>1.5</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>Job scheduler for PostgreSQL</td>
</tr>
<tr>
<td>pg_background</td>
<td>1.0</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>Run SQL queries in the background</td>
</tr>
<tr>
<td>pg_jobmon</td>
<td>1.4.1</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>Extension for logging and monitoring functions in PostgreSQL</td>
</tr>
<tr>
<td>pg_readonly</td>
<td>1.0.0</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>cluster database read only</td>
</tr>
<tr>
<td><strong>pg_repack</strong></td>
<td>1.4.8</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>Reorganize tables in PostgreSQL databases with minimal locks</td>
</tr>
<tr>
<td>pg_squeeze</td>
<td>1.5</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>A tool to remove unused space from a relation.</td>
</tr>
<tr>
<td>pgfincore</td>
<td>1.2</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>examine and manage the os buffer cache</td>
</tr>
<tr>
<td><strong>pglogical</strong></td>
<td>2.4.3</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>PostgreSQL Logical Replication</td>
</tr>
<tr>
<td>pglogical_origin</td>
<td>1.0.0</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>Dummy extension for compatibility when upgrading from Postgres 9.4</td>
</tr>
<tr>
<td>prioritize</td>
<td>1.0</td>
<td>PGDG</td>
<td>ADMIN</td>
<td>get and set the priority of PostgreSQL backends</td>
</tr>
<tr>
<td>set_user</td>
<td>4.0.1</td>
<td>PGDG</td>
<td>AUDIT</td>
<td>similar to SET ROLE but with added logging</td>
</tr>
<tr>
<td><strong>passwordcracklib</strong></td>
<td>3.0.0</td>
<td>PGDG</td>
<td>AUDIT</td>
<td>Enforce password policy</td>
</tr>
<tr>
<td>pgaudit</td>
<td>1.7</td>
<td>PGDG</td>
<td>AUDIT</td>
<td>provides auditing functionality</td>
</tr>
<tr>
<td>pgcryptokey</td>
<td>1.0</td>
<td>PGDG</td>
<td>AUDIT</td>
<td>cryptographic key management</td>
</tr>
<tr>
<td>hdfs_fdw</td>
<td>2.0.5</td>
<td>PGDG</td>
<td>FDW</td>
<td>foreign-data wrapper for remote hdfs servers</td>
</tr>
<tr>
<td>mongo_fdw</td>
<td>1.1</td>
<td>PGDG</td>
<td>FDW</td>
<td>foreign data wrapper for MongoDB access</td>
</tr>
<tr>
<td>multicorn</td>
<td>2.4</td>
<td>PGDG</td>
<td>FDW</td>
<td>Multicorn2 Python3.6+ bindings for Postgres 11++ Foreign Data Wrapper</td>
</tr>
<tr>
<td>mysql_fdw</td>
<td>1.2</td>
<td>PGDG</td>
<td>FDW</td>
<td>Foreign data wrapper for querying a MySQL server</td>
</tr>
<tr>
<td>pgbouncer_fdw</td>
<td>0.4</td>
<td>PGDG</td>
<td>FDW</td>
<td>Extension for querying pgbouncer stats from normal SQL views &amp; running pgbouncer commands from normal SQL functions</td>
</tr>
<tr>
<td>sqlite_fdw</td>
<td>1.1</td>
<td>PGDG</td>
<td>FDW</td>
<td>SQLite Foreign Data Wrapper</td>
</tr>
<tr>
<td>tds_fdw</td>
<td>2.0.3</td>
<td>PGDG</td>
<td>FDW</td>
<td>Foreign data wrapper for querying a TDS database (Sybase or Microsoft SQL Server)</td>
</tr>
<tr>
<td>emaj</td>
<td>4.2.0</td>
<td>PGDG</td>
<td>FEAT</td>
<td>E-Maj extension enables fine-grained write logging and time travel on subsets of the database.</td>
</tr>
<tr>
<td>periods</td>
<td>1.2</td>
<td>PGDG</td>
<td>FEAT</td>
<td>Provide Standard SQL functionality for PERIODs and SYSTEM VERSIONING</td>
</tr>
<tr>
<td>pg_ivm</td>
<td>1.5</td>
<td>PGDG</td>
<td>FEAT</td>
<td>incremental view maintenance on PostgreSQL</td>
</tr>
<tr>
<td>pgq</td>
<td>3.5</td>
<td>PGDG</td>
<td>FEAT</td>
<td>Generic queue for PostgreSQL</td>
</tr>
<tr>
<td>pgsodium</td>
<td>3.1.8</td>
<td>PGDG</td>
<td>FEAT</td>
<td>Postgres extension for libsodium functions</td>
</tr>
<tr>
<td><strong>timescaledb</strong></td>
<td>2.11.2</td>
<td>PGDG</td>
<td>FEAT</td>
<td>Enables scalable inserts and complex queries for time-series data (Apache 2 Edition)</td>
</tr>
<tr>
<td><strong>wal2json</strong></td>
<td>2.5.1</td>
<td>PGDG</td>
<td>FEAT</td>
<td>Capture JSON format CDC change via logical decoding</td>
</tr>
<tr>
<td><strong>vector</strong></td>
<td>0.5.0</td>
<td>PGDG</td>
<td>FEAT</td>
<td>vector data type and ivfflat / hnsw access method</td>
</tr>
<tr>
<td>count_distinct</td>
<td>3.0.1</td>
<td>PGDG</td>
<td>FUNC</td>
<td>An alternative to COUNT(DISTINCT ...) aggregate, usable with HashAggregate</td>
</tr>
<tr>
<td>ddlx</td>
<td>0.23</td>
<td>PGDG</td>
<td>FUNC</td>
<td>DDL eXtractor functions</td>
</tr>
<tr>
<td>extra_window_functions</td>
<td>1.0</td>
<td>PGDG</td>
<td>FUNC</td>
<td>Additional window functions to PostgreSQL</td>
</tr>
<tr>
<td>mysqlcompat</td>
<td>0.0.7</td>
<td>PGDG</td>
<td>FUNC</td>
<td>MySQL compatibility functions</td>
</tr>
<tr>
<td>orafce</td>
<td>4.5</td>
<td>PGDG</td>
<td>FUNC</td>
<td>Functions and operators that emulate a subset of functions and packages from the Oracle RDBMS</td>
</tr>
<tr>
<td>pgsql_tweaks</td>
<td>0.10.0</td>
<td>PGDG</td>
<td>FUNC</td>
<td>Some functions and views for daily usage</td>
</tr>
<tr>
<td>tdigest</td>
<td>1.4.0</td>
<td>PGDG</td>
<td>FUNC</td>
<td>Provides tdigest aggregate function.</td>
</tr>
<tr>
<td>topn</td>
<td>2.4.0</td>
<td>PGDG</td>
<td>FUNC</td>
<td>type for top-n JSONB</td>
</tr>
<tr>
<td>unaccent</td>
<td>1.1</td>
<td>PGDG</td>
<td>FUNC</td>
<td>text search dictionary that removes accents</td>
</tr>
<tr>
<td>address_standardizer</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>Used to parse an address into constituent elements. Generally used to support geocoding address normalization step.</td>
</tr>
<tr>
<td>address_standardizer_data_us</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>Address Standardizer US dataset example</td>
</tr>
<tr>
<td><strong>postgis</strong></td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>PostGIS geometry and geography spatial types and functions</td>
</tr>
<tr>
<td>postgis_raster</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>PostGIS raster types and functions</td>
</tr>
<tr>
<td>postgis_sfcgal</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>PostGIS SFCGAL functions</td>
</tr>
<tr>
<td>postgis_tiger_geocoder</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>PostGIS tiger geocoder and reverse geocoder</td>
</tr>
<tr>
<td>postgis_topology</td>
<td>3.3.3</td>
<td>PGDG</td>
<td>GIS</td>
<td>PostGIS topology spatial types and functions</td>
</tr>
<tr>
<td>amcheck</td>
<td>1.3</td>
<td>PGDG</td>
<td>INDEX</td>
<td>functions for verifying relation integrity</td>
</tr>
<tr>
<td>bloom</td>
<td>1.0</td>
<td>PGDG</td>
<td>INDEX</td>
<td>bloom access method - signature file based index</td>
</tr>
<tr>
<td>hll</td>
<td>2.16</td>
<td>PGDG</td>
<td>INDEX</td>
<td>type for storing hyperloglog data</td>
</tr>
<tr>
<td>pgtt</td>
<td>2.10.0</td>
<td>PGDG</td>
<td>INDEX</td>
<td>Extension to add Global Temporary Tables feature to PostgreSQL</td>
</tr>
<tr>
<td>rum</td>
<td>1.3</td>
<td>PGDG</td>
<td>INDEX</td>
<td>RUM index access method</td>
</tr>
<tr>
<td>hstore_plperl</td>
<td>1.0</td>
<td>PGDG</td>
<td>LANG</td>
<td>transform between hstore and plperl</td>
</tr>
<tr>
<td>hstore_plperlu</td>
<td>1.0</td>
<td>PGDG</td>
<td>LANG</td>
<td>transform between hstore and plperlu</td>
</tr>
<tr>
<td>plpgsql_check</td>
<td>2.3</td>
<td>PGDG</td>
<td>LANG</td>
<td>extended check for plpgsql functions</td>
</tr>
<tr>
<td>plsh</td>
<td>2</td>
<td>PGDG</td>
<td>LANG</td>
<td>PL/sh procedural language</td>
</tr>
<tr>
<td><strong>citus</strong></td>
<td>12.0-1</td>
<td>PGDG</td>
<td>SHARD</td>
<td>Citus distributed database</td>
</tr>
<tr>
<td>citus_columnar</td>
<td>11.3-1</td>
<td>PGDG</td>
<td>SHARD</td>
<td>Citus Columnar extension</td>
</tr>
<tr>
<td>pg_fkpart</td>
<td>1.7</td>
<td>PGDG</td>
<td>SHARD</td>
<td>Table partitioning by foreign key utility</td>
</tr>
<tr>
<td>pg_partman</td>
<td>4.7.3</td>
<td>PGDG</td>
<td>SHARD</td>
<td>Extension to manage partitioned tables by time or ID</td>
</tr>
<tr>
<td>plproxy</td>
<td>2.10.0</td>
<td>PGDG</td>
<td>SHARD</td>
<td>Database partitioning implemented as procedural language</td>
</tr>
<tr>
<td>hypopg</td>
<td>1.4.0</td>
<td>PGDG</td>
<td>STAT</td>
<td>Hypothetical indexes for PostgreSQL</td>
</tr>
<tr>
<td>logerrors</td>
<td>2.1</td>
<td>PGDG</td>
<td>STAT</td>
<td>Function for collecting statistics about messages in logfile</td>
</tr>
<tr>
<td>pg_auth_mon</td>
<td>1.1</td>
<td>PGDG</td>
<td>STAT</td>
<td>monitor connection attempts per user</td>
</tr>
<tr>
<td>pg_permissions</td>
<td>1.1</td>
<td>PGDG</td>
<td>STAT</td>
<td>view object permissions and compare them with the desired state</td>
</tr>
<tr>
<td>pg_qualstats</td>
<td>2.0.4</td>
<td>PGDG</td>
<td>STAT</td>
<td>An extension collecting statistics about quals</td>
</tr>
<tr>
<td>pg_stat_kcache</td>
<td>2.2.2</td>
<td>PGDG</td>
<td>STAT</td>
<td>Kernel statistics gathering</td>
</tr>
<tr>
<td>pg_stat_monitor</td>
<td>2.0</td>
<td>PGDG</td>
<td>STAT</td>
<td>The pg_stat_monitor is a PostgreSQL Query Performance Monitoring tool, based on PostgreSQL contrib module pg_stat_statements. pg_stat_monitor provides aggregated statistics, client information, plan details including plan, and histogram information.</td>
</tr>
<tr>
<td>pg_store_plans</td>
<td>1.7</td>
<td>PGDG</td>
<td>STAT</td>
<td>track plan statistics of all SQL statements executed</td>
</tr>
<tr>
<td>pg_track_settings</td>
<td>2.1.2</td>
<td>PGDG</td>
<td>STAT</td>
<td>Track settings changes</td>
</tr>
<tr>
<td>pg_wait_sampling</td>
<td>1.1</td>
<td>PGDG</td>
<td>STAT</td>
<td>sampling based statistics of wait events</td>
</tr>
<tr>
<td>pldbgapi</td>
<td>1.1</td>
<td>PGDG</td>
<td>STAT</td>
<td>server-side support for debugging PL/pgSQL functions</td>
</tr>
<tr>
<td>plprofiler</td>
<td>4.2</td>
<td>PGDG</td>
<td>STAT</td>
<td>server-side support for profiling PL/pgSQL functions</td>
</tr>
<tr>
<td>powa</td>
<td>4.1.4</td>
<td>PGDG</td>
<td>STAT</td>
<td>PostgreSQL Workload Analyser-core</td>
</tr>
<tr>
<td>system_stats</td>
<td>1.0</td>
<td>PGDG</td>
<td>STAT</td>
<td>System statistic functions for PostgreSQL</td>
</tr>
<tr>
<td>citext</td>
<td>1.6</td>
<td>PGDG</td>
<td>TYPE</td>
<td>data type for case-insensitive character strings</td>
</tr>
<tr>
<td>geoip</td>
<td>0.2.4</td>
<td>PGDG</td>
<td>TYPE</td>
<td>An IP geolocation extension (a wrapper around the MaxMind GeoLite dataset)</td>
</tr>
<tr>
<td>ip4r</td>
<td>2.4</td>
<td>PGDG</td>
<td>TYPE</td>
<td>IPv4/v6 and IPv4/v6 range index type for PostgreSQL</td>
</tr>
<tr>
<td>pg_uuidv7</td>
<td>1.1</td>
<td>PGDG</td>
<td>TYPE</td>
<td>pg_uuidv7: create UUIDv7 values in postgres</td>
</tr>
<tr>
<td>pgmp</td>
<td>1.1</td>
<td>PGDG</td>
<td>TYPE</td>
<td>Multiple Precision Arithmetic extension</td>
</tr>
<tr>
<td>semver</td>
<td>0.32.1</td>
<td>PGDG</td>
<td>TYPE</td>
<td>Semantic version data type</td>
</tr>
<tr>
<td>timestamp9</td>
<td>1.3.0</td>
<td>PGDG</td>
<td>TYPE</td>
<td>timestamp nanosecond resolution</td>
</tr>
<tr>
<td>unit</td>
<td>7</td>
<td>PGDG</td>
<td>TYPE</td>
<td>SI units extension</td>
</tr>
<tr>
<td>lo</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>ADMIN</td>
<td>Large Object maintenance</td>
</tr>
<tr>
<td>old_snapshot</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>ADMIN</td>
<td>utilities in support of old_snapshot_threshold</td>
</tr>
<tr>
<td>pg_prewarm</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>ADMIN</td>
<td>prewarm relation data</td>
</tr>
<tr>
<td>pg_surgery</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>ADMIN</td>
<td>extension to perform surgery on a damaged relation</td>
</tr>
<tr>
<td>dblink</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>FDW</td>
<td>connect to other PostgreSQL databases from within a database</td>
</tr>
<tr>
<td>file_fdw</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FDW</td>
<td>foreign-data wrapper for flat file access</td>
</tr>
<tr>
<td>postgres_fdw</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>FDW</td>
<td>foreign-data wrapper for remote PostgreSQL servers</td>
</tr>
<tr>
<td>autoinc</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions for autoincrementing fields</td>
</tr>
<tr>
<td>dict_int</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>text search dictionary template for integers</td>
</tr>
<tr>
<td>dict_xsyn</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>text search dictionary template for extended synonym processing</td>
</tr>
<tr>
<td>earthdistance</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>calculate great-circle distances on the surface of the Earth</td>
</tr>
<tr>
<td>fuzzystrmatch</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>determine similarities and distance between strings</td>
</tr>
<tr>
<td>insert_username</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions for tracking who changed a table</td>
</tr>
<tr>
<td>intagg</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>integer aggregator and enumerator (obsolete)</td>
</tr>
<tr>
<td>intarray</td>
<td>1.5</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions, operators, and index support for 1-D arrays of integers</td>
</tr>
<tr>
<td>moddatetime</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions for tracking last modification time</td>
</tr>
<tr>
<td>pg_trgm</td>
<td>1.6</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>text similarity measurement and index searching based on trigrams</td>
</tr>
<tr>
<td>pgcrypto</td>
<td>1.3</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>cryptographic functions</td>
</tr>
<tr>
<td>refint</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions for implementing referential integrity (obsolete)</td>
</tr>
<tr>
<td>tablefunc</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>functions that manipulate whole tables, including crosstab</td>
</tr>
<tr>
<td>tcn</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>Triggered change notifications</td>
</tr>
<tr>
<td>tsm_system_rows</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>TABLESAMPLE method which accepts number of rows as a limit</td>
</tr>
<tr>
<td>tsm_system_time</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>TABLESAMPLE method which accepts time in milliseconds as a limit</td>
</tr>
<tr>
<td>uuid-ossp</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>FUNC</td>
<td>generate universally unique identifiers (UUIDs)</td>
</tr>
<tr>
<td>btree_gin</td>
<td>1.3</td>
<td>CONTRIB</td>
<td>INDEX</td>
<td>support for indexing common datatypes in GIN</td>
</tr>
<tr>
<td>btree_gist</td>
<td>1.7</td>
<td>CONTRIB</td>
<td>INDEX</td>
<td>support for indexing common datatypes in GiST</td>
</tr>
<tr>
<td>bool_plperl</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between bool and plperl</td>
</tr>
<tr>
<td>bool_plperlu</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between bool and plperlu</td>
</tr>
<tr>
<td>hstore_plpython3u</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between hstore and plpython3u</td>
</tr>
<tr>
<td>jsonb_plperl</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between jsonb and plperl</td>
</tr>
<tr>
<td>jsonb_plperlu</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between jsonb and plperlu</td>
</tr>
<tr>
<td>jsonb_plpython3u</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between jsonb and plpython3u</td>
</tr>
<tr>
<td>ltree_plpython3u</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>transform between ltree and plpython3u</td>
</tr>
<tr>
<td>plperl</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/Perl procedural language</td>
</tr>
<tr>
<td>plperlu</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/PerlU untrusted procedural language</td>
</tr>
<tr>
<td>plpgsql</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/pgSQL procedural language</td>
</tr>
<tr>
<td>plpython3u</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/Python3U untrusted procedural language</td>
</tr>
<tr>
<td>pltcl</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/TCL procedural language</td>
</tr>
<tr>
<td>pltclu</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>LANG</td>
<td>PL/TCLU untrusted procedural language</td>
</tr>
<tr>
<td>pageinspect</td>
<td>1.11</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>inspect the contents of database pages at a low level</td>
</tr>
<tr>
<td>pg_buffercache</td>
<td>1.3</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>examine the shared buffer cache</td>
</tr>
<tr>
<td>pg_freespacemap</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>examine the free space map (FSM)</td>
</tr>
<tr>
<td><strong>pg_stat_statements</strong></td>
<td>1.10</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>track planning and execution statistics of all SQL statements executed</td>
</tr>
<tr>
<td>pg_visibility</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>examine the visibility map (VM) and page-level visibility info</td>
</tr>
<tr>
<td>pg_walinspect</td>
<td>1.0</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>functions to inspect contents of PostgreSQL Write-Ahead Log</td>
</tr>
<tr>
<td>pgrowlocks</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>show row-level locking information</td>
</tr>
<tr>
<td>pgstattuple</td>
<td>1.5</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>show tuple-level statistics</td>
</tr>
<tr>
<td>sslinfo</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>STAT</td>
<td>information about SSL certificates</td>
</tr>
<tr>
<td>cube</td>
<td>1.5</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>data type for multidimensional cubes</td>
</tr>
<tr>
<td>hstore</td>
<td>1.8</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>data type for storing sets of (key, value) pairs</td>
</tr>
<tr>
<td>isn</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>data types for international product numbering standards</td>
</tr>
<tr>
<td>ltree</td>
<td>1.2</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>data type for hierarchical tree-like structures</td>
</tr>
<tr>
<td>prefix</td>
<td>1.2.0</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>Prefix Range module for PostgreSQL</td>
</tr>
<tr>
<td>seg</td>
<td>1.4</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>data type for representing line segments or floating-point intervals</td>
</tr>
<tr>
<td>xml2</td>
<td>1.1</td>
<td>CONTRIB</td>
<td>TYPE</td>
<td>XPath querying and XSLT</td>
</tr>
</tbody>
</table>
</details>
<hr/>
<h2 tabindex="-1" id="user-content-get-started" dir="auto"><a href="#get-started">Get Started<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Bootstrap with one command! Check <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/INSTALL.md"><strong>Get Started</strong></a> | <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/zh/INSTALL.md"><strong>快速上手</strong></a> for details.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Linux x86_64 EL 7/8/9 compatible, with nopass sudo/ssh
bash -c &#34;$(curl -fsSL https://get.pigsty.cc/latest)&#34;;
cd ~/pigsty; ./bootstrap; ./configure; ./install.yml;"><pre><span><span>#</span> Linux x86_64 EL 7/8/9 compatible, with nopass sudo/ssh</span>
bash -c <span><span>&#34;</span><span><span>$(</span>curl -fsSL https://get.pigsty.cc/latest<span>)</span></span><span>&#34;</span></span><span>;</span>
<span>cd</span> <span>~</span>/pigsty<span>;</span> ./bootstrap<span>;</span> ./configure<span>;</span> ./install.yml<span>;</span></pre></div>
<p dir="auto">Then you will have a pigsty singleton node ready, with Web Services on port <code>80</code> and Postgres on port <code>5432</code>.</p>
<details><summary>Download with Get</summary>
<div dir="auto" data-snippet-clipboard-copy-content="$ curl https://get.pigsty.cc/latest | bash
...
[Checking] ===========================================
[ OK ] SOURCE from CDN due to GFW
FROM CDN    : bash -c &#34;$(curl -fsSL https://get.pigsty.cc/latest)&#34;
FROM GITHUB : bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Vonng/pigsty/master/bin/latest)&#34;
[Downloading] ===========================================
[ OK ] download pigsty source code from CDN
[ OK ] $ curl -SL https://get.pigsty.cc/v2.4.1/pigsty-v2.4.1.tgz
...
MD5: d5dc4a51efc81932a03d7c010d0d5d64  /tmp/pigsty-v2.4.1.tgz
[Extracting] ===========================================
[ OK ] extract &#39;/tmp/pigsty-v2.4.1.tgz&#39; to &#39;/home/vagrant/pigsty&#39;
[ OK ] $ tar -xf /tmp/pigsty-v2.4.1.tgz -C ~;
[Reference] ===========================================
Official Site:   https://pigsty.cc
Get Started:     https://doc.pigsty.cc/#/INSTALL
Documentation:   https://doc.pigsty.cc
Github Repo:     https://github.com/Vonng/pigsty
Public Demo:     https://demo.pigsty.cc
[Proceeding] ===========================================
cd ~/pigsty      # entering pigsty home directory before proceeding
./bootstrap      # install ansible &amp; download the optional offline packages
./configure      # preflight-check and generate config according to your env
./install.yml    # install pigsty on this node and init it as the admin node
[ OK ] ~/pigsty is ready to go now!"><pre>$ curl https://get.pigsty.cc/latest <span>|</span> bash
...
[Checking] ===========================================
[ OK ] SOURCE from CDN due to GFW
FROM CDN    <span>:</span> bash -c <span><span>&#34;</span><span><span>$(</span>curl -fsSL https://get.pigsty.cc/latest<span>)</span></span><span>&#34;</span></span>
FROM GITHUB <span>:</span> bash -c <span><span>&#34;</span><span><span>$(</span>curl -fsSL https://raw.githubusercontent.com/Vonng/pigsty/master/bin/latest<span>)</span></span><span>&#34;</span></span>
[Downloading] ===========================================
[ OK ] download pigsty <span>source</span> code from CDN
[ OK ] $ curl -SL https://get.pigsty.cc/v2.4.1/pigsty-v2.4.1.tgz
...
MD5: d5dc4a51efc81932a03d7c010d0d5d64  /tmp/pigsty-v2.4.1.tgz
[Extracting] ===========================================
[ OK ] extract <span><span>&#39;</span>/tmp/pigsty-v2.4.1.tgz<span>&#39;</span></span> to <span><span>&#39;</span>/home/vagrant/pigsty<span>&#39;</span></span>
[ OK ] $ tar -xf /tmp/pigsty-v2.4.1.tgz -C <span>~</span><span>;</span>
[Reference] ===========================================
Official Site:   https://pigsty.cc
Get Started:     https://doc.pigsty.cc/<span><span>#</span>/INSTALL</span>
Documentation:   https://doc.pigsty.cc
Github Repo:     https://github.com/Vonng/pigsty
Public Demo:     https://demo.pigsty.cc
[Proceeding] ===========================================
<span>cd</span> <span>~</span>/pigsty      <span><span>#</span> entering pigsty home directory before proceeding</span>
./bootstrap      <span><span>#</span> install ansible &amp; download the optional offline packages</span>
./configure      <span><span>#</span> preflight-check and generate config according to your env</span>
./install.yml    <span><span>#</span> install pigsty on this node and init it as the admin node</span>
[ OK ] <span>~</span>/pigsty is ready to go now<span>!</span></pre></div>
</details>
<details><summary>Download with Git</summary>
<p dir="auto">You can also download pigsty source with <code>git</code>, don&#39;t forget to checkout a specific version.</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/Vonng/pigsty;
cd pigsty; git checkout v2.4.1"><pre>git clone https://github.com/Vonng/pigsty<span>;</span>
<span>cd</span> pigsty<span>;</span> git checkout v2.4.1</pre></div>
</details>
<details><summary>Download Directly</summary>
<p dir="auto">You can also download pigsty source &amp; offline pkgs directly from GitHub release page.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# get from GitHub
bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Vonng/pigsty/master/bin/latest)&#34;

# or download tarball directly with curl
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-v2.4.1.tgz -o ~/pigsty.tgz                 # SRC
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el9.x86_64.tgz -o /tmp/pkg.tgz  # EL9
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el8.x86_64.tgz -o /tmp/pkg.tgz  # EL8
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el7.x86_64.tgz -o /tmp/pkg.tgz  # EL7"><pre><span><span>#</span> get from GitHub</span>
bash -c <span><span>&#34;</span><span><span>$(</span>curl -fsSL https://raw.githubusercontent.com/Vonng/pigsty/master/bin/latest<span>)</span></span><span>&#34;</span></span>

<span><span>#</span> or download tarball directly with curl</span>
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-v2.4.1.tgz -o <span>~</span>/pigsty.tgz                 <span><span>#</span> SRC</span>
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el9.x86_64.tgz -o /tmp/pkg.tgz  <span><span>#</span> EL9</span>
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el8.x86_64.tgz -o /tmp/pkg.tgz  <span><span>#</span> EL8</span>
curl -L https://github.com/Vonng/pigsty/releases/download/v2.4.1/pigsty-pkg-v2.4.1.el7.x86_64.tgz -o /tmp/pkg.tgz  <span><span>#</span> EL7</span></pre></div>
</details>
<p dir="auto"><a href="https://asciinema.org/a/603609" rel="nofollow"><img src="https://camo.githubusercontent.com/b16ba5c0c3f4a7aa56f5b621588712702b7d5cb567793cb8c3af9c8d7c031a02/68747470733a2f2f61736369696e656d612e6f72672f612f3630333630392e737667" alt="asciicast" data-canonical-src="https://asciinema.org/a/603609.svg"/></a></p>
<hr/>
<h2 tabindex="-1" id="user-content-architecture" dir="auto"><a href="#architecture">Architecture<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Pigsty uses a <strong>modular</strong> design. There are six default modules available:</p>
<ul dir="auto">
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/INFRA.md"><code>INFRA</code></a>: Local yum repo, Nginx, DNS, and entire Prometheus &amp; Grafana observability stack.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/NODE.md"><code>NODE</code></a>:   Init node name, repo, pkg, NTP, ssh, admin, tune, expose services, collect logs &amp; metrics.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/ETCD.md"><code>ETCD</code></a>:   Init etcd cluster for HA Postgres DCS or Kubernetes, used as distributed config store.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/PGSQL.md"><code>PGSQL</code></a>: Autonomous self-healing PostgreSQL cluster powered by Patroni, Pgbouncer, PgBackrest &amp; HAProxy</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/REDIS.md"><code>REDIS</code></a>: Deploy Redis servers in standalone master-replica, sentinel, and native cluster mode, optional.</li>
<li><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/MINIO.md"><code>MINIO</code></a>: S3-compatible object storage service used as an optional central backup server for <code>PGSQL</code>.</li>
</ul>
<p dir="auto">You can compose them freely in a declarative manner. If you want host monitoring, <code>INFRA</code> &amp; <code>NODE</code> will suffice.
<code>ETCD</code> and <code>PGSQL</code> are used for HA PG clusters, install them on multiple nodes will automatically form a HA cluster.
You can also reuse pigsty infra and develop your own modules, <code>KAFKA</code>, <code>MYSQL</code>, <code>GPSQL</code>, and more will come.</p>
<p dir="auto">The default <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/install.yml"><code>install.yml</code></a> playbook in <a href="#get-started">Get Started</a> will install <code>INFRA</code>, <code>NODE</code>, <code>ETCD</code> &amp; <code>PGSQL</code> on the current node.
which gives you a battery-included PostgreSQL singleton instance (<code>admin_ip:5432</code>) with everything ready.
This node can be used as an admin center &amp; infra provider to manage, deploy &amp; monitor more nodes &amp; clusters.</p>
<p dir="auto"><a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/ARCH.md"><gh:secured-asset-reference resource_type="UserAsset" resource_id="268277436"></gh:secured-asset-reference></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/Vonng/pigsty/assets/8587410/7b226641-e61b-4e79-bc31-759204778bd5"><img src="https://github.com/Vonng/pigsty/assets/8587410/7b226641-e61b-4e79-bc31-759204778bd5" alt="pigsty-arch"/></a></p>
<hr/>
<h2 tabindex="-1" id="user-content-more-clusters" dir="auto"><a href="#more-clusters">More Clusters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">To deploy a 3-node HA Postgres Cluster with streaming replication, <a href="https://github.com/Vonng/pigsty/blob/master/pigsty.yml#L54">define</a> a new cluster on <code>all.children.pg-test</code> of <a href="https://github.com/Vonng/pigsty/blob/master/pigsty.yml"><code>pigsty.yml</code></a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pg-test:
  hosts:
    10.10.10.11: { pg_seq: 1, pg_role: primary }
    10.10.10.12: { pg_seq: 2, pg_role: replica }
    10.10.10.13: { pg_seq: 3, pg_role: offline }
  vars:  { pg_cluster: pg-test }"><pre><span>pg-test</span>:
  <span>hosts</span>:
    <span>10.10.10.11</span>: <span>{ pg_seq: 1, pg_role: primary }</span>
    <span>10.10.10.12</span>: <span>{ pg_seq: 2, pg_role: replica }</span>
    <span>10.10.10.13</span>: <span>{ pg_seq: 3, pg_role: offline }</span>
  <span>vars</span>:  <span>{ pg_cluster: pg-test }</span></pre></div>
<p dir="auto">Then create it with built-in playbooks:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bin/pgsql-add pg-test   # init pg-test cluster "><pre>bin/pgsql-add pg-test   <span><span>#</span> init pg-test cluster </span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/8587410/268277417-645501d1-384e-4009-b41b-8488654f17d3.jpg"><img src="https://user-images.githubusercontent.com/8587410/268277417-645501d1-384e-4009-b41b-8488654f17d3.jpg" alt="pgsql-ha"/></a></p>
<p dir="auto">You can deploy different kinds of instance roles such as primary, replica, offline, delayed, sync standby, and different kinds of clusters, such as standby clusters, Citus clusters, and even Redis/MinIO/Etcd clusters.</p>
<details><summary>Example: Complex Postgres Customize</summary>
<div dir="auto" data-snippet-clipboard-copy-content="pg-meta:
  hosts: { 10.10.10.10: { pg_seq: 1, pg_role: primary , pg_offline_query: true } }
  vars:
    pg_cluster: pg-meta
    pg_databases:                       # define business databases on this cluster, array of database definition
      - name: meta                      # REQUIRED, `name` is the only mandatory field of a database definition
        baseline: cmdb.sql              # optional, database sql baseline path, (relative path among ansible search path, e.g files/)
        pgbouncer: true                 # optional, add this database to pgbouncer database list? true by default
        schemas: [pigsty]               # optional, additional schemas to be created, array of schema names
        extensions:                     # optional, additional extensions to be installed: array of `{name[,schema]}`
          - { name: postgis , schema: public }
          - { name: timescaledb }
        comment: pigsty meta database   # optional, comment string for this database
        owner: postgres                # optional, database owner, postgres by default
        template: template1            # optional, which template to use, template1 by default
        encoding: UTF8                 # optional, database encoding, UTF8 by default. (MUST same as template database)
        locale: C                      # optional, database locale, C by default.  (MUST same as template database)
        lc_collate: C                  # optional, database collate, C by default. (MUST same as template database)
        lc_ctype: C                    # optional, database ctype, C by default.   (MUST same as template database)
        tablespace: pg_default         # optional, default tablespace, &#39;pg_default&#39; by default.
        allowconn: true                # optional, allow connection, true by default. false will disable connect at all
        revokeconn: false              # optional, revoke public connection privilege. false by default. (leave connect with grant option to owner)
        register_datasource: true      # optional, register this database to grafana datasources? true by default
        connlimit: -1                  # optional, database connection limit, default -1 disable limit
        pool_auth_user: dbuser_meta    # optional, all connection to this pgbouncer database will be authenticated by this user
        pool_mode: transaction         # optional, pgbouncer pool mode at database level, default transaction
        pool_size: 64                  # optional, pgbouncer pool size at database level, default 64
        pool_size_reserve: 32          # optional, pgbouncer pool size reserve at database level, default 32
        pool_size_min: 0               # optional, pgbouncer pool size min at database level, default 0
        pool_max_db_conn: 100          # optional, max database connections at database level, default 100
      - { name: grafana  ,owner: dbuser_grafana  ,revokeconn: true ,comment: grafana primary database }
      - { name: bytebase ,owner: dbuser_bytebase ,revokeconn: true ,comment: bytebase primary database }
      - { name: kong     ,owner: dbuser_kong     ,revokeconn: true ,comment: kong the api gateway database }
      - { name: gitea    ,owner: dbuser_gitea    ,revokeconn: true ,comment: gitea meta database }
      - { name: wiki     ,owner: dbuser_wiki     ,revokeconn: true ,comment: wiki meta database }
    pg_users:                           # define business users/roles on this cluster, array of user definition
      - name: dbuser_meta               # REQUIRED, `name` is the only mandatory field of a user definition
        password: DBUser.Meta           # optional, password, can be a scram-sha-256 hash string or plain text
        login: true                     # optional, can log in, true by default  (new biz ROLE should be false)
        superuser: false                # optional, is superuser? false by default
        createdb: false                 # optional, can create database? false by default
        createrole: false               # optional, can create role? false by default
        inherit: true                   # optional, can this role use inherited privileges? true by default
        replication: false              # optional, can this role do replication? false by default
        bypassrls: false                # optional, can this role bypass row level security? false by default
        pgbouncer: true                 # optional, add this user to pgbouncer user-list? false by default (production user should be true explicitly)
        connlimit: -1                   # optional, user connection limit, default -1 disable limit
        expire_in: 3650                 # optional, now + n days when this role is expired (OVERWRITE expire_at)
        expire_at: &#39;2030-12-31&#39;         # optional, YYYY-MM-DD &#39;timestamp&#39; when this role is expired  (OVERWRITTEN by expire_in)
        comment: pigsty admin user      # optional, comment string for this user/role
        roles: [dbrole_admin]           # optional, belonged roles. default roles are: dbrole_{admin,readonly,readwrite,offline}
        parameters: {}                  # optional, role level parameters with `ALTER ROLE SET`
        pool_mode: transaction          # optional, pgbouncer pool mode at user level, transaction by default
        pool_connlimit: -1              # optional, max database connections at user level, default -1 disable limit
      - {name: dbuser_view     ,password: DBUser.Viewer   ,pgbouncer: true ,roles: [dbrole_readonly], comment: read-only viewer for meta database}
      - {name: dbuser_grafana  ,password: DBUser.Grafana  ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for grafana database   }
      - {name: dbuser_bytebase ,password: DBUser.Bytebase ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for bytebase database  }
      - {name: dbuser_kong     ,password: DBUser.Kong     ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for kong api gateway   }
      - {name: dbuser_gitea    ,password: DBUser.Gitea    ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for gitea service      }
      - {name: dbuser_wiki     ,password: DBUser.Wiki     ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for wiki.js service    }
    pg_services:                        # extra services in addition to pg_default_services, array of service definition
      # standby service will route {ip|name}:5435 to sync replica&#39;s pgbouncer (5435-&gt;6432 standby)
      - name: standby                   # required, service name, the actual svc name will be prefixed with `pg_cluster`, e.g: pg-meta-standby
        port: 5435                      # required, service exposed port (work as kubernetes service node port mode)
        ip: &#34;*&#34;                         # optional, service bind ip address, `*` for all ip by default
        selector: &#34;[]&#34;                  # required, service member selector, use JMESPath to filter inventory
        dest: default                   # optional, destination port, default|postgres|pgbouncer|&lt;port_number&gt;, &#39;default&#39; by default
        check: /sync                    # optional, health check url path, / by default
        backup: &#34;[? pg_role == `primary`]&#34;  # backup server selector
        maxconn: 3000                   # optional, max allowed front-end connection
        balance: roundrobin             # optional, haproxy load balance algorithm (roundrobin by default, other: leastconn)
        options: &#39;inter 3s fastinter 1s downinter 5s rise 3 fall 3 on-marked-down shutdown-sessions slowstart 30s maxconn 3000 maxqueue 128 weight 100&#39;
    pg_hba_rules:
      - {user: dbuser_view , db: all ,addr: infra ,auth: pwd ,title: &#39;allow grafana dashboard access cmdb from infra nodes&#39;}
    pg_vip_enabled: true
    pg_vip_address: 10.10.10.2/24
    pg_vip_interface: eth1
    node_crontab:  # make a full backup 1 am everyday
      - &#39;00 01 * * * postgres /pg/bin/pg-backup full&#39;
"><pre><span>pg-meta</span>:
  <span>hosts</span>: <span>{ 10.10.10.10: { pg_seq: 1, pg_role: primary , pg_offline_query: true } }</span>
  <span>vars</span>:
    <span>pg_cluster</span>: <span>pg-meta</span>
    <span>pg_databases</span>:                       <span><span>#</span> define business databases on this cluster, array of database definition</span>
      - <span>name</span>: <span>meta                      </span><span><span>#</span> REQUIRED, `name` is the only mandatory field of a database definition</span>
        <span>baseline</span>: <span>cmdb.sql              </span><span><span>#</span> optional, database sql baseline path, (relative path among ansible search path, e.g files/)</span>
        <span>pgbouncer</span>: <span>true                 </span><span><span>#</span> optional, add this database to pgbouncer database list? true by default</span>
        <span>schemas</span>: <span>[pigsty]               </span><span><span>#</span> optional, additional schemas to be created, array of schema names</span>
        <span>extensions</span>:                     <span><span>#</span> optional, additional extensions to be installed: array of `{name[,schema]}`</span>
          - <span>{ name: postgis , schema: public }</span>
          - <span>{ name: timescaledb }</span>
        <span>comment</span>: <span>pigsty meta database   </span><span><span>#</span> optional, comment string for this database</span>
        <span>owner</span>: <span>postgres                </span><span><span>#</span> optional, database owner, postgres by default</span>
        <span>template</span>: <span>template1            </span><span><span>#</span> optional, which template to use, template1 by default</span>
        <span>encoding</span>: <span>UTF8                 </span><span><span>#</span> optional, database encoding, UTF8 by default. (MUST same as template database)</span>
        <span>locale</span>: C                      <span><span>#</span> optional, database locale, C by default.  (MUST same as template database)</span>
        <span>lc_collate</span>: C                  <span><span>#</span> optional, database collate, C by default. (MUST same as template database)</span>
        <span>lc_ctype</span>: C                    <span><span>#</span> optional, database ctype, C by default.   (MUST same as template database)</span>
        <span>tablespace</span>: <span>pg_default         </span><span><span>#</span> optional, default tablespace, &#39;pg_default&#39; by default.</span>
        <span>allowconn</span>: <span>true                </span><span><span>#</span> optional, allow connection, true by default. false will disable connect at all</span>
        <span>revokeconn</span>: <span>false              </span><span><span>#</span> optional, revoke public connection privilege. false by default. (leave connect with grant option to owner)</span>
        <span>register_datasource</span>: <span>true      </span><span><span>#</span> optional, register this database to grafana datasources? true by default</span>
        <span>connlimit</span>: <span>-1</span>                  <span><span>#</span> optional, database connection limit, default -1 disable limit</span>
        <span>pool_auth_user</span>: <span>dbuser_meta    </span><span><span>#</span> optional, all connection to this pgbouncer database will be authenticated by this user</span>
        <span>pool_mode</span>: <span>transaction         </span><span><span>#</span> optional, pgbouncer pool mode at database level, default transaction</span>
        <span>pool_size</span>: <span>64</span>                  <span><span>#</span> optional, pgbouncer pool size at database level, default 64</span>
        <span>pool_size_reserve</span>: <span>32</span>          <span><span>#</span> optional, pgbouncer pool size reserve at database level, default 32</span>
        <span>pool_size_min</span>: <span>0</span>               <span><span>#</span> optional, pgbouncer pool size min at database level, default 0</span>
        <span>pool_max_db_conn</span>: <span>100</span>          <span><span>#</span> optional, max database connections at database level, default 100</span>
      - <span>{ name: grafana  ,owner: dbuser_grafana  ,revokeconn: true ,comment: grafana primary database }</span>
      - <span>{ name: bytebase ,owner: dbuser_bytebase ,revokeconn: true ,comment: bytebase primary database }</span>
      - <span>{ name: kong     ,owner: dbuser_kong     ,revokeconn: true ,comment: kong the api gateway database }</span>
      - <span>{ name: gitea    ,owner: dbuser_gitea    ,revokeconn: true ,comment: gitea meta database }</span>
      - <span>{ name: wiki     ,owner: dbuser_wiki     ,revokeconn: true ,comment: wiki meta database }</span>
    <span>pg_users</span>:                           <span><span>#</span> define business users/roles on this cluster, array of user definition</span>
      - <span>name</span>: <span>dbuser_meta               </span><span><span>#</span> REQUIRED, `name` is the only mandatory field of a user definition</span>
        <span>password</span>: <span>DBUser.Meta           </span><span><span>#</span> optional, password, can be a scram-sha-256 hash string or plain text</span>
        <span>login</span>: <span>true                     </span><span><span>#</span> optional, can log in, true by default  (new biz ROLE should be false)</span>
        <span>superuser</span>: <span>false                </span><span><span>#</span> optional, is superuser? false by default</span>
        <span>createdb</span>: <span>false                 </span><span><span>#</span> optional, can create database? false by default</span>
        <span>createrole</span>: <span>false               </span><span><span>#</span> optional, can create role? false by default</span>
        <span>inherit</span>: <span>true                   </span><span><span>#</span> optional, can this role use inherited privileges? true by default</span>
        <span>replication</span>: <span>false              </span><span><span>#</span> optional, can this role do replication? false by default</span>
        <span>bypassrls</span>: <span>false                </span><span><span>#</span> optional, can this role bypass row level security? false by default</span>
        <span>pgbouncer</span>: <span>true                 </span><span><span>#</span> optional, add this user to pgbouncer user-list? false by default (production user should be true explicitly)</span>
        <span>connlimit</span>: <span>-1</span>                   <span><span>#</span> optional, user connection limit, default -1 disable limit</span>
        <span>expire_in</span>: <span>3650</span>                 <span><span>#</span> optional, now + n days when this role is expired (OVERWRITE expire_at)</span>
        <span>expire_at</span>: <span><span>&#39;</span>2030-12-31<span>&#39;</span></span>         <span><span>#</span> optional, YYYY-MM-DD &#39;timestamp&#39; when this role is expired  (OVERWRITTEN by expire_in)</span>
        <span>comment</span>: <span>pigsty admin user      </span><span><span>#</span> optional, comment string for this user/role</span>
        <span>roles</span>: <span>[dbrole_admin]           </span><span><span>#</span> optional, belonged roles. default roles are: dbrole_{admin,readonly,readwrite,offline}</span>
        <span>parameters</span>: <span>{}                  </span><span><span>#</span> optional, role level parameters with `ALTER ROLE SET`</span>
        <span>pool_mode</span>: <span>transaction          </span><span><span>#</span> optional, pgbouncer pool mode at user level, transaction by default</span>
        <span>pool_connlimit</span>: <span>-1</span>              <span><span>#</span> optional, max database connections at user level, default -1 disable limit</span>
      - <span>{name: dbuser_view     ,password: DBUser.Viewer   ,pgbouncer: true ,roles: [dbrole_readonly], comment: read-only viewer for meta database}</span>
      - <span>{name: dbuser_grafana  ,password: DBUser.Grafana  ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for grafana database   }</span>
      - <span>{name: dbuser_bytebase ,password: DBUser.Bytebase ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for bytebase database  }</span>
      - <span>{name: dbuser_kong     ,password: DBUser.Kong     ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for kong api gateway   }</span>
      - <span>{name: dbuser_gitea    ,password: DBUser.Gitea    ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for gitea service      }</span>
      - <span>{name: dbuser_wiki     ,password: DBUser.Wiki     ,pgbouncer: true ,roles: [dbrole_admin]    ,comment: admin user for wiki.js service    }</span>
    <span>pg_services</span>:                        <span><span>#</span> extra services in addition to pg_default_services, array of service definition</span>
      <span><span>#</span> standby service will route {ip|name}:5435 to sync replica&#39;s pgbouncer (5435-&gt;6432 standby)</span>
      - <span>name</span>: <span>standby                   </span><span><span>#</span> required, service name, the actual svc name will be prefixed with `pg_cluster`, e.g: pg-meta-standby</span>
        <span>port</span>: <span>5435</span>                      <span><span>#</span> required, service exposed port (work as kubernetes service node port mode)</span>
        <span>ip</span>: <span><span>&#34;</span>*<span>&#34;</span></span>                         <span><span>#</span> optional, service bind ip address, `*` for all ip by default</span>
        <span>selector</span>: <span><span>&#34;</span>[]<span>&#34;</span></span>                  <span><span>#</span> required, service member selector, use JMESPath to filter inventory</span>
        <span>dest</span>: <span>default                   </span><span><span>#</span> optional, destination port, default|postgres|pgbouncer|&lt;port_number&gt;, &#39;default&#39; by default</span>
        <span>check</span>: <span>/sync                    </span><span><span>#</span> optional, health check url path, / by default</span>
        <span>backup</span>: <span><span>&#34;</span>[? pg_role == `primary`]<span>&#34;</span></span>  <span><span>#</span> backup server selector</span>
        <span>maxconn</span>: <span>3000</span>                   <span><span>#</span> optional, max allowed front-end connection</span>
        <span>balance</span>: <span>roundrobin             </span><span><span>#</span> optional, haproxy load balance algorithm (roundrobin by default, other: leastconn)</span>
        <span>options</span>: <span><span>&#39;</span>inter 3s fastinter 1s downinter 5s rise 3 fall 3 on-marked-down shutdown-sessions slowstart 30s maxconn 3000 maxqueue 128 weight 100<span>&#39;</span></span>
    <span>pg_hba_rules</span>:
      - <span>{user: dbuser_view , db: all ,addr: infra ,auth: pwd ,title: &#39;allow grafana dashboard access cmdb from infra nodes&#39;}</span>
    <span>pg_vip_enabled</span>: <span>true</span>
    <span>pg_vip_address</span>: <span>10.10.10.2/24</span>
    <span>pg_vip_interface</span>: <span>eth1</span>
    <span>node_crontab</span>:  <span><span>#</span> make a full backup 1 am everyday</span>
      - <span><span>&#39;</span>00 01 * * * postgres /pg/bin/pg-backup full<span>&#39;</span></span>
</pre></div>
</details>
<details><summary>Example: Security Enhanced PG Cluster with Delayed Replica</summary>
<div dir="auto" data-snippet-clipboard-copy-content="pg-meta:      # 3 instance postgres cluster `pg-meta`
  hosts:
    10.10.10.10: { pg_seq: 1, pg_role: primary }
    10.10.10.11: { pg_seq: 2, pg_role: replica }
    10.10.10.12: { pg_seq: 3, pg_role: replica , pg_offline_query: true }
  vars:
    pg_cluster: pg-meta
    pg_conf: crit.yml
    pg_users:
      - { name: dbuser_meta , password: DBUser.Meta   , pgbouncer: true , roles: [ dbrole_admin ] , comment: pigsty admin user }
      - { name: dbuser_view , password: DBUser.Viewer , pgbouncer: true , roles: [ dbrole_readonly ] , comment: read-only viewer for meta database }
    pg_databases:
      - {name: meta ,baseline: cmdb.sql ,comment: pigsty meta database ,schemas: [pigsty] ,extensions: [{name: postgis, schema: public}, {name: timescaledb}]}
    pg_default_service_dest: postgres
    pg_services:
      - { name: standby ,src_ip: &#34;*&#34; ,port: 5435 , dest: default ,selector: &#34;[]&#34; , backup: &#34;[? pg_role == `primary`]&#34; }
    pg_vip_enabled: true
    pg_vip_address: 10.10.10.2/24
    pg_vip_interface: eth1
    pg_listen: &#39;${ip},${vip},${lo}&#39;
    patroni_ssl_enabled: true
    pgbouncer_sslmode: require
    pgbackrest_method: minio
    pg_libs: &#39;timescaledb, $libdir/passwordcheck, pg_stat_statements, auto_explain&#39; # add passwordcheck extension to enforce strong password
    pg_default_roles:                 # default roles and users in postgres cluster
      - { name: dbrole_readonly  ,login: false ,comment: role for global read-only access     }
      - { name: dbrole_offline   ,login: false ,comment: role for restricted read-only access }
      - { name: dbrole_readwrite ,login: false ,roles: [dbrole_readonly]               ,comment: role for global read-write access }
      - { name: dbrole_admin     ,login: false ,roles: [pg_monitor, dbrole_readwrite]  ,comment: role for object creation }
      - { name: postgres     ,superuser: true  ,expire_in: 7300                        ,comment: system superuser }
      - { name: replicator ,replication: true  ,expire_in: 7300 ,roles: [pg_monitor, dbrole_readonly]   ,comment: system replicator }
      - { name: dbuser_dba   ,superuser: true  ,expire_in: 7300 ,roles: [dbrole_admin]  ,pgbouncer: true ,pool_mode: session, pool_connlimit: 16 , comment: pgsql admin user }
      - { name: dbuser_monitor ,roles: [pg_monitor] ,expire_in: 7300 ,pgbouncer: true ,parameters: {log_min_duration_statement: 1000 } ,pool_mode: session ,pool_connlimit: 8 ,comment: pgsql monitor user }
    pg_default_hba_rules:             # postgres host-based auth rules by default
      - {user: &#39;${dbsu}&#39;    ,db: all         ,addr: local     ,auth: ident ,title: &#39;dbsu access via local os user ident&#39;  }
      - {user: &#39;${dbsu}&#39;    ,db: replication ,addr: local     ,auth: ident ,title: &#39;dbsu replication from local os ident&#39; }
      - {user: &#39;${repl}&#39;    ,db: replication ,addr: localhost ,auth: ssl   ,title: &#39;replicator replication from localhost&#39;}
      - {user: &#39;${repl}&#39;    ,db: replication ,addr: intra     ,auth: ssl   ,title: &#39;replicator replication from intranet&#39; }
      - {user: &#39;${repl}&#39;    ,db: postgres    ,addr: intra     ,auth: ssl   ,title: &#39;replicator postgres db from intranet&#39; }
      - {user: &#39;${monitor}&#39; ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;monitor from localhost with password&#39; }
      - {user: &#39;${monitor}&#39; ,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;monitor from infra host with password&#39;}
      - {user: &#39;${admin}&#39;   ,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;admin @ infra nodes with pwd &amp; ssl&#39;   }
      - {user: &#39;${admin}&#39;   ,db: all         ,addr: world     ,auth: cert  ,title: &#39;admin @ everywhere with ssl &amp; cert&#39;   }
      - {user: &#39;+dbrole_readonly&#39;,db: all    ,addr: localhost ,auth: ssl   ,title: &#39;pgbouncer read/write via local socket&#39;}
      - {user: &#39;+dbrole_readonly&#39;,db: all    ,addr: intra     ,auth: ssl   ,title: &#39;read/write biz user via password&#39;     }
      - {user: &#39;+dbrole_offline&#39; ,db: all    ,addr: intra     ,auth: ssl   ,title: &#39;allow etl offline tasks from intranet&#39;}
    pgb_default_hba_rules:            # pgbouncer host-based authentication rules
      - {user: &#39;${dbsu}&#39;    ,db: pgbouncer   ,addr: local     ,auth: peer  ,title: &#39;dbsu local admin access with os ident&#39;}
      - {user: &#39;all&#39;        ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;allow all user local access with pwd&#39; }
      - {user: &#39;${monitor}&#39; ,db: pgbouncer   ,addr: intra     ,auth: ssl   ,title: &#39;monitor access via intranet with pwd&#39; }
      - {user: &#39;${monitor}&#39; ,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other monitor access addr&#39; }
      - {user: &#39;${admin}&#39;   ,db: all         ,addr: intra     ,auth: ssl   ,title: &#39;admin access via intranet with pwd&#39;   }
      - {user: &#39;${admin}&#39;   ,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other admin access addr&#39;   }
      - {user: &#39;all&#39;        ,db: all         ,addr: intra     ,auth: ssl   ,title: &#39;allow all user intra access with pwd&#39; }

# OPTIONAL delayed cluster for pg-meta
pg-meta-delay:                    # delayed instance for pg-meta (1 hour ago)
  hosts: { 10.10.10.13: { pg_seq: 1, pg_role: primary, pg_upstream: 10.10.10.10, pg_delay: 1h } }
  vars: { pg_cluster: pg-meta-delay }"><pre><span>pg-meta</span>:      <span><span>#</span> 3 instance postgres cluster `pg-meta`</span>
  <span>hosts</span>:
    <span>10.10.10.10</span>: <span>{ pg_seq: 1, pg_role: primary }</span>
    <span>10.10.10.11</span>: <span>{ pg_seq: 2, pg_role: replica }</span>
    <span>10.10.10.12</span>: <span>{ pg_seq: 3, pg_role: replica , pg_offline_query: true }</span>
  <span>vars</span>:
    <span>pg_cluster</span>: <span>pg-meta</span>
    <span>pg_conf</span>: <span>crit.yml</span>
    <span>pg_users</span>:
      - <span>{ name: dbuser_meta , password: DBUser.Meta   , pgbouncer: true , roles: [ dbrole_admin ] , comment: pigsty admin user }</span>
      - <span>{ name: dbuser_view , password: DBUser.Viewer , pgbouncer: true , roles: [ dbrole_readonly ] , comment: read-only viewer for meta database }</span>
    <span>pg_databases</span>:
      - <span>{name: meta ,baseline: cmdb.sql ,comment: pigsty meta database ,schemas: [pigsty] ,extensions: [{name: postgis, schema: public}, {name: timescaledb}]}</span>
    <span>pg_default_service_dest</span>: <span>postgres</span>
    <span>pg_services</span>:
      - <span>{ name: standby ,src_ip: &#34;*&#34; ,port: 5435 , dest: default ,selector: &#34;[]&#34; , backup: &#34;[? pg_role == `primary`]&#34; }</span>
    <span>pg_vip_enabled</span>: <span>true</span>
    <span>pg_vip_address</span>: <span>10.10.10.2/24</span>
    <span>pg_vip_interface</span>: <span>eth1</span>
    <span>pg_listen</span>: <span><span>&#39;</span>${ip},${vip},${lo}<span>&#39;</span></span>
    <span>patroni_ssl_enabled</span>: <span>true</span>
    <span>pgbouncer_sslmode</span>: <span>require</span>
    <span>pgbackrest_method</span>: <span>minio</span>
    <span>pg_libs</span>: <span><span>&#39;</span>timescaledb, $libdir/passwordcheck, pg_stat_statements, auto_explain<span>&#39;</span></span> <span><span>#</span> add passwordcheck extension to enforce strong password</span>
    <span>pg_default_roles</span>:                 <span><span>#</span> default roles and users in postgres cluster</span>
      - <span>{ name: dbrole_readonly  ,login: false ,comment: role for global read-only access     }</span>
      - <span>{ name: dbrole_offline   ,login: false ,comment: role for restricted read-only access }</span>
      - <span>{ name: dbrole_readwrite ,login: false ,roles: [dbrole_readonly]               ,comment: role for global read-write access }</span>
      - <span>{ name: dbrole_admin     ,login: false ,roles: [pg_monitor, dbrole_readwrite]  ,comment: role for object creation }</span>
      - <span>{ name: postgres     ,superuser: true  ,expire_in: 7300                        ,comment: system superuser }</span>
      - <span>{ name: replicator ,replication: true  ,expire_in: 7300 ,roles: [pg_monitor, dbrole_readonly]   ,comment: system replicator }</span>
      - <span>{ name: dbuser_dba   ,superuser: true  ,expire_in: 7300 ,roles: [dbrole_admin]  ,pgbouncer: true ,pool_mode: session, pool_connlimit: 16 , comment: pgsql admin user }</span>
      - <span>{ name: dbuser_monitor ,roles: [pg_monitor] ,expire_in: 7300 ,pgbouncer: true ,parameters: {log_min_duration_statement: 1000 } ,pool_mode: session ,pool_connlimit: 8 ,comment: pgsql monitor user }</span>
    <span>pg_default_hba_rules</span>:             <span><span>#</span> postgres host-based auth rules by default</span>
      - <span>{user: &#39;${dbsu}&#39;    ,db: all         ,addr: local     ,auth: ident ,title: &#39;dbsu access via local os user ident&#39;  }</span>
      - <span>{user: &#39;${dbsu}&#39;    ,db: replication ,addr: local     ,auth: ident ,title: &#39;dbsu replication from local os ident&#39; }</span>
      - <span>{user: &#39;${repl}&#39;    ,db: replication ,addr: localhost ,auth: ssl   ,title: &#39;replicator replication from localhost&#39;}</span>
      - <span>{user: &#39;${repl}&#39;    ,db: replication ,addr: intra     ,auth: ssl   ,title: &#39;replicator replication from intranet&#39; }</span>
      - <span>{user: &#39;${repl}&#39;    ,db: postgres    ,addr: intra     ,auth: ssl   ,title: &#39;replicator postgres db from intranet&#39; }</span>
      - <span>{user: &#39;${monitor}&#39; ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;monitor from localhost with password&#39; }</span>
      - <span>{user: &#39;${monitor}&#39; ,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;monitor from infra host with password&#39;}</span>
      - <span>{user: &#39;${admin}&#39;   ,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;admin @ infra nodes with pwd &amp; ssl&#39;   }</span>
      - <span>{user: &#39;${admin}&#39;   ,db: all         ,addr: world     ,auth: cert  ,title: &#39;admin @ everywhere with ssl &amp; cert&#39;   }</span>
      - <span>{user: &#39;+dbrole_readonly&#39;,db: all    ,addr: localhost ,auth: ssl   ,title: &#39;pgbouncer read/write via local socket&#39;}</span>
      - <span>{user: &#39;+dbrole_readonly&#39;,db: all    ,addr: intra     ,auth: ssl   ,title: &#39;read/write biz user via password&#39;     }</span>
      - <span>{user: &#39;+dbrole_offline&#39; ,db: all    ,addr: intra     ,auth: ssl   ,title: &#39;allow etl offline tasks from intranet&#39;}</span>
    <span>pgb_default_hba_rules</span>:            <span><span>#</span> pgbouncer host-based authentication rules</span>
      - <span>{user: &#39;${dbsu}&#39;    ,db: pgbouncer   ,addr: local     ,auth: peer  ,title: &#39;dbsu local admin access with os ident&#39;}</span>
      - <span>{user: &#39;all&#39;        ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;allow all user local access with pwd&#39; }</span>
      - <span>{user: &#39;${monitor}&#39; ,db: pgbouncer   ,addr: intra     ,auth: ssl   ,title: &#39;monitor access via intranet with pwd&#39; }</span>
      - <span>{user: &#39;${monitor}&#39; ,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other monitor access addr&#39; }</span>
      - <span>{user: &#39;${admin}&#39;   ,db: all         ,addr: intra     ,auth: ssl   ,title: &#39;admin access via intranet with pwd&#39;   }</span>
      - <span>{user: &#39;${admin}&#39;   ,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other admin access addr&#39;   }</span>
      - <span>{user: &#39;all&#39;        ,db: all         ,addr: intra     ,auth: ssl   ,title: &#39;allow all user intra access with pwd&#39; }</span>

<span><span>#</span> OPTIONAL delayed cluster for pg-meta</span>
<span>pg-meta-delay</span>:                    <span><span>#</span> delayed instance for pg-meta (1 hour ago)</span>
  <span>hosts</span>: <span>{ 10.10.10.13: { pg_seq: 1, pg_role: primary, pg_upstream: 10.10.10.10, pg_delay: 1h } }</span>
  <span>vars</span>: <span>{ pg_cluster: pg-meta-delay }</span></pre></div>
</details>
<details><summary>Example: Citus Distributed Cluster: 5 Nodes</summary>
<div dir="auto" data-snippet-clipboard-copy-content="all:
  children:
    pg-citus0: # citus coordinator, pg_group = 0
      hosts: { 10.10.10.10: { pg_seq: 1, pg_role: primary } }
      vars: { pg_cluster: pg-citus0 , pg_group: 0 }
    pg-citus1: # citus data node 1
      hosts: { 10.10.10.11: { pg_seq: 1, pg_role: primary } }
      vars: { pg_cluster: pg-citus1 , pg_group: 1 }
    pg-citus2: # citus data node 2
      hosts: { 10.10.10.12: { pg_seq: 1, pg_role: primary } }
      vars: { pg_cluster: pg-citus2 , pg_group: 2 }
    pg-citus3: # citus data node 3, with an extra replica
      hosts:
        10.10.10.13: { pg_seq: 1, pg_role: primary }
        10.10.10.14: { pg_seq: 2, pg_role: replica }
      vars: { pg_cluster: pg-citus3 , pg_group: 3 }
  vars:                               # global parameters for all citus clusters
    pg_mode: citus                    # pgsql cluster mode: citus
    pg_shard: pg-citus                # citus shard name: pg-citus
    patroni_citus_db: meta            # citus distributed database name
    pg_dbsu_password: DBUser.Postgres # all dbsu password access for citus cluster
    pg_users: [ { name: dbuser_meta ,password: DBUser.Meta ,pgbouncer: true ,roles: [ dbrole_admin ] } ]
    pg_databases: [ { name: meta ,extensions: [ { name: citus }, { name: postgis }, { name: timescaledb } ] } ]
    pg_hba_rules:
      - { user: &#39;all&#39; ,db: all  ,addr: 127.0.0.1/32 ,auth: ssl ,title: &#39;all user ssl access from localhost&#39; }
      - { user: &#39;all&#39; ,db: all  ,addr: intra        ,auth: ssl ,title: &#39;all user ssl access from intranet&#39;  }"><pre><span>all</span>:
  <span>children</span>:
    <span>pg-citus0</span>: <span><span>#</span> citus coordinator, pg_group = 0</span>
      <span>hosts</span>: <span>{ 10.10.10.10: { pg_seq: 1, pg_role: primary } }</span>
      <span>vars</span>: <span>{ pg_cluster: pg-citus0 , pg_group: 0 }</span>
    <span>pg-citus1</span>: <span><span>#</span> citus data node 1</span>
      <span>hosts</span>: <span>{ 10.10.10.11: { pg_seq: 1, pg_role: primary } }</span>
      <span>vars</span>: <span>{ pg_cluster: pg-citus1 , pg_group: 1 }</span>
    <span>pg-citus2</span>: <span><span>#</span> citus data node 2</span>
      <span>hosts</span>: <span>{ 10.10.10.12: { pg_seq: 1, pg_role: primary } }</span>
      <span>vars</span>: <span>{ pg_cluster: pg-citus2 , pg_group: 2 }</span>
    <span>pg-citus3</span>: <span><span>#</span> citus data node 3, with an extra replica</span>
      <span>hosts</span>:
        <span>10.10.10.13</span>: <span>{ pg_seq: 1, pg_role: primary }</span>
        <span>10.10.10.14</span>: <span>{ pg_seq: 2, pg_role: replica }</span>
      <span>vars</span>: <span>{ pg_cluster: pg-citus3 , pg_group: 3 }</span>
  <span>vars</span>:                               <span><span>#</span> global parameters for all citus clusters</span>
    <span>pg_mode</span>: <span>citus                    </span><span><span>#</span> pgsql cluster mode: citus</span>
    <span>pg_shard</span>: <span>pg-citus                </span><span><span>#</span> citus shard name: pg-citus</span>
    <span>patroni_citus_db</span>: <span>meta            </span><span><span>#</span> citus distributed database name</span>
    <span>pg_dbsu_password</span>: <span>DBUser.Postgres </span><span><span>#</span> all dbsu password access for citus cluster</span>
    <span>pg_users</span>: <span>[ { name: dbuser_meta ,password: DBUser.Meta ,pgbouncer: true ,roles: [ dbrole_admin ] } ]</span>
    <span>pg_databases</span>: <span>[ { name: meta ,extensions: [ { name: citus }, { name: postgis }, { name: timescaledb } ] } ]</span>
    <span>pg_hba_rules</span>:
      - <span>{ user: &#39;all&#39; ,db: all  ,addr: 127.0.0.1/32 ,auth: ssl ,title: &#39;all user ssl access from localhost&#39; }</span>
      - <span>{ user: &#39;all&#39; ,db: all  ,addr: intra        ,auth: ssl ,title: &#39;all user ssl access from intranet&#39;  }</span></pre></div>
</details>
<details><summary>Example: Redis Cluster/Sentinel/Standalone</summary>
<div dir="auto" data-snippet-clipboard-copy-content="redis-ms: # redis classic primary &amp; replica
  hosts: { 10.10.10.10: { redis_node: 1 , redis_instances: { 6379: { }, 6380: { replica_of: &#39;10.10.10.10 6379&#39; } } } }
  vars: { redis_cluster: redis-ms ,redis_password: &#39;redis.ms&#39; ,redis_max_memory: 64MB }

redis-meta: # redis sentinel x 3
  hosts: { 10.10.10.11: { redis_node: 1 , redis_instances: { 26379: { } ,26380: { } ,26381: { } } } }
  vars:
    redis_cluster: redis-meta
    redis_password: &#39;redis.meta&#39;
    redis_mode: sentinel
    redis_max_memory: 16MB
    redis_sentinel_monitor: # primary list for redis sentinel, use cls as name, primary ip:port
      - { name: redis-ms, host: 10.10.10.10, port: 6379 ,password: redis.ms, quorum: 2 }

redis-test: # redis native cluster: 3m x 3s
  hosts:
    10.10.10.12: { redis_node: 1 ,redis_instances: { 6379: { } ,6380: { } ,6381: { } } }
    10.10.10.13: { redis_node: 2 ,redis_instances: { 6379: { } ,6380: { } ,6381: { } } }
  vars: { redis_cluster: redis-test ,redis_password: &#39;redis.test&#39; ,redis_mode: cluster, redis_max_memory: 32MB }"><pre><span>redis-ms</span>: <span><span>#</span> redis classic primary &amp; replica</span>
  <span>hosts</span>: <span>{ 10.10.10.10: { redis_node: 1 , redis_instances: { 6379: { }, 6380: { replica_of: &#39;10.10.10.10 6379&#39; } } } }</span>
  <span>vars</span>: <span>{ redis_cluster: redis-ms ,redis_password: &#39;redis.ms&#39; ,redis_max_memory: 64MB }</span>

<span>redis-meta</span>: <span><span>#</span> redis sentinel x 3</span>
  <span>hosts</span>: <span>{ 10.10.10.11: { redis_node: 1 , redis_instances: { 26379: { } ,26380: { } ,26381: { } } } }</span>
  <span>vars</span>:
    <span>redis_cluster</span>: <span>redis-meta</span>
    <span>redis_password</span>: <span><span>&#39;</span>redis.meta<span>&#39;</span></span>
    <span>redis_mode</span>: <span>sentinel</span>
    <span>redis_max_memory</span>: <span>16MB</span>
    <span>redis_sentinel_monitor</span>: <span><span>#</span> primary list for redis sentinel, use cls as name, primary ip:port</span>
      - <span>{ name: redis-ms, host: 10.10.10.10, port: 6379 ,password: redis.ms, quorum: 2 }</span>

<span>redis-test</span>: <span><span>#</span> redis native cluster: 3m x 3s</span>
  <span>hosts</span>:
    <span>10.10.10.12</span>: <span>{ redis_node: 1 ,redis_instances: { 6379: { } ,6380: { } ,6381: { } } }</span>
    <span>10.10.10.13</span>: <span>{ redis_node: 2 ,redis_instances: { 6379: { } ,6380: { } ,6381: { } } }</span>
  <span>vars</span>: <span>{ redis_cluster: redis-test ,redis_password: &#39;redis.test&#39; ,redis_mode: cluster, redis_max_memory: 32MB }</span></pre></div>
</details>
<details><summary>Example: ETCD 3 Node Cluster</summary>
<div dir="auto" data-snippet-clipboard-copy-content="etcd: # dcs service for postgres/patroni ha consensus
  hosts:  # 1 node for testing, 3 or 5 for production
    10.10.10.10: { etcd_seq: 1 }  # etcd_seq required
    10.10.10.11: { etcd_seq: 2 }  # assign from 1 ~ n
    10.10.10.12: { etcd_seq: 3 }  # odd number please
  vars: # cluster level parameter override roles/etcd
    etcd_cluster: etcd  # mark etcd cluster name etcd
    etcd_safeguard: false # safeguard against purging
    etcd_clean: true # purge etcd during init process"><pre><span>etcd</span>: <span><span>#</span> dcs service for postgres/patroni ha consensus</span>
  <span>hosts</span>:  <span><span>#</span> 1 node for testing, 3 or 5 for production</span>
    <span>10.10.10.10</span>: <span>{ etcd_seq: 1 }  </span><span><span>#</span> etcd_seq required</span>
    <span>10.10.10.11</span>: <span>{ etcd_seq: 2 }  </span><span><span>#</span> assign from 1 ~ n</span>
    <span>10.10.10.12</span>: <span>{ etcd_seq: 3 }  </span><span><span>#</span> odd number please</span>
  <span>vars</span>: <span><span>#</span> cluster level parameter override roles/etcd</span>
    <span>etcd_cluster</span>: <span>etcd  </span><span><span>#</span> mark etcd cluster name etcd</span>
    <span>etcd_safeguard</span>: <span>false </span><span><span>#</span> safeguard against purging</span>
    <span>etcd_clean</span>: <span>true </span><span><span>#</span> purge etcd during init process</span></pre></div>
</details>
<details><summary>Example: Minio 3 Node Deployment</summary>
<div dir="auto" data-snippet-clipboard-copy-content="minio:
  hosts:
    10.10.10.10: { minio_seq: 1 }
    10.10.10.11: { minio_seq: 2 }
    10.10.10.12: { minio_seq: 3 }
  vars:
    minio_cluster: minio
    minio_data: &#39;/data{1...2}&#39;        # use two disk per node
    minio_node: &#39;${minio_cluster}-${minio_seq}.pigsty&#39; # minio node name pattern
    haproxy_services:
      - name: minio                     # [REQUIRED] service name, unique
        port: 9002                      # [REQUIRED] service port, unique
        options:
          - option httpchk
          - option http-keep-alive
          - http-check send meth OPTIONS uri /minio/health/live
          - http-check expect status 200
        servers:
          - { name: minio-1 ,ip: 10.10.10.10 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }
          - { name: minio-2 ,ip: 10.10.10.11 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }
          - { name: minio-3 ,ip: 10.10.10.12 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }"><pre><span>minio</span>:
  <span>hosts</span>:
    <span>10.10.10.10</span>: <span>{ minio_seq: 1 }</span>
    <span>10.10.10.11</span>: <span>{ minio_seq: 2 }</span>
    <span>10.10.10.12</span>: <span>{ minio_seq: 3 }</span>
  <span>vars</span>:
    <span>minio_cluster</span>: <span>minio</span>
    <span>minio_data</span>: <span><span>&#39;</span>/data{1...2}<span>&#39;</span></span>        <span><span>#</span> use two disk per node</span>
    <span>minio_node</span>: <span><span>&#39;</span>${minio_cluster}-${minio_seq}.pigsty<span>&#39;</span></span> <span><span>#</span> minio node name pattern</span>
    <span>haproxy_services</span>:
      - <span>name</span>: <span>minio                     </span><span><span>#</span> [REQUIRED] service name, unique</span>
        <span>port</span>: <span>9002</span>                      <span><span>#</span> [REQUIRED] service port, unique</span>
        <span>options</span>:
          - <span>option httpchk</span>
          - <span>option http-keep-alive</span>
          - <span>http-check send meth OPTIONS uri /minio/health/live</span>
          - <span>http-check expect status 200</span>
        <span>servers</span>:
          - <span>{ name: minio-1 ,ip: 10.10.10.10 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }</span>
          - <span>{ name: minio-2 ,ip: 10.10.10.11 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }</span>
          - <span>{ name: minio-3 ,ip: 10.10.10.12 , port: 9000 , options: &#39;check-ssl ca-file /etc/pki/ca.crt check port 9000&#39; }</span></pre></div>
</details>
<p dir="auto">Check <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/docs/CONFIG.md"><strong>Configuration</strong></a> for details.</p>
<hr/>
<h2 tabindex="-1" id="user-content-about" dir="auto"><a href="#about">About<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<blockquote>
<p dir="auto">Pigsty (/ˈpɪɡˌstaɪ/) is the abbreviation of &#34;<strong>P</strong>ostgreSQL <strong>I</strong>n <strong>G</strong>reat <strong>STY</strong>le.&#34;</p>
</blockquote>
<p dir="auto">Docs: <a href="https://doc.pigsty.cc/" rel="nofollow">https://doc.pigsty.cc/</a></p>
<p dir="auto">Website: <a href="https://pigsty.cc/en/" rel="nofollow">https://pigsty.cc/en/</a> | <a href="https://pigsty.cc/zh/" rel="nofollow">https://pigsty.cc/zh/</a></p>
<p dir="auto">WeChat: Search <code>pigsty-cc</code> to join the WeChat group.</p>
<p dir="auto">Telegram: <a href="https://t.me/joinchat/gV9zfZraNPM3YjFh" rel="nofollow">https://t.me/joinchat/gV9zfZraNPM3YjFh</a></p>
<p dir="auto">Discord: <a href="https://discord.gg/xm6hR4P4" rel="nofollow">https://discord.gg/xm6hR4P4</a></p>
<p dir="auto">Author: <a href="https://vonng.com/en" rel="nofollow">Vonng</a> (<a href="mailto:rh@vonng.com">rh@vonng.com</a>)</p>
<p dir="auto">License: <a href="https://thewitchofendor.com/Vonng/pigsty/blob/master/LICENSE">AGPL-3.0</a></p>
<p dir="auto">Copyright: 2018-2023 <a href="mailto:rh@vonng.com">rh@vonng.com</a></p>
</article>
          </div></div>
  </body>
</html>
