<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buf.build/blog/connect-a-better-grpc">Original</a>
    <h1>Connect: A Better gRPC</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><div><div><p>Today we&#39;re releasing Connect, a slim framework for building browser and
gRPC-compatible HTTP APIs. Connect is production-ready <!-- -->—<!-- --> focused, simple,
and debuggable <!-- -->—<!-- --> and it&#39;s fully compatible with gRPC clients and servers.
If you&#39;re frustrated by the complexity and instability of today&#39;s gRPC
libraries, we think you&#39;ll find Connect a breath of fresh air. <strong><a href="https://github.com/bufbuild/connect-go">connect-go</a> is
available now under an Apache 2 open source license, and documentation is
available on <a href="https://connect.build">connect.build</a>.</strong> We&#39;ll release Connect for TypeScript
soon, with more languages to follow.</p><h2 id="another-rpc-framework">Another RPC framework?<a href="#another-rpc-framework" aria-label="another rpc framework permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>In the seven years since its announcement, gRPC has brought much-needed
consensus to Protobuf RPC. Starting from a soup of competing, mutually
incompatible hobby projects, the gRPC team has rallied the community around a
common protocol, introduced many developers to RPC-style APIs, and driven the
popularity of Protobuf outside Google. Thanks to their tireless efforts, we can
specify our APIs with Protobuf, implement them with gRPC, and be confident that
most languages will have a compatible client library.</p><p>Conceptually, the <a href="https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md">gRPC protocol is HTTP</a> with Protobuf-encoded
bodies and a sprinkling of metadata. Despite that straightforward premise, the
protocol and today&#39;s gRPC libraries share a maximalist design ethos that has
led to extraordinary complexity. Rather than making production systems simple
and stable, gRPC over-complicates development, deployment, debugging, and
maintenance.</p><p>As an example, consider Google&#39;s gRPC implementation in Go:</p><ul><li>Excluding comments, <code>grpc-go</code> is 130 thousand lines of hand-written code. It
has dozens of subpackages, nearly a hundred configuration options, and
bespoke name resolution and load balancing mechanisms. Just sifting through
the kitchen sink of features takes hours, and the sheer quantity of code
makes <a href="https://github.com/grpc/grpc-go/issues/632">subtle bugs</a> and <a href="https://github.com/grpc/grpc-go/pull/5339">resource leaks</a> inevitable.</li><li>Rather than using the Go standard library&#39;s <code>net/http</code>, <code>grpc-go</code> uses its
own implementation of HTTP/2. It&#39;s incompatible with the rest of Go&#39;s HTTP
ecosystem, so you can&#39;t cleanly serve gRPC requests alongside other HTTP
traffic and can&#39;t use most third-party packages.</li><li>The gRPC protocol requires end-to-end support for HTTP/2 and trailers.
Supporting common HTTP clients <!-- -->—<!-- --> like web browsers <!-- -->—<!-- --> requires
elaborate translating proxies.</li><li>In addition to using obscure HTTP features, the gRPC protocol is difficult to
debug. Even with <a href="https://grpc.io/blog/grpc-with-json/">JSON support enabled</a>, simple request-response
RPCs mix the JSON you care about with binary framing data. Forget <code>curl | jq</code>
or the Chrome network inspector <!-- -->—<!-- --> the available tools are all immature
and gRPC-specific.</li><li>As a policy, <code>grpc-go</code> <a href="https://github.com/grpc/grpc-go/blob/master/Documentation/versioning.md">doesn&#39;t follow</a> semantic versioning;
the release notes even include a special section for &#34;Behavior Changes.&#34; At
least four releases in the past year have broken backward compatibility, and
prominent gRPC users (including <a href="https://etcd.io/">etcd</a>) are often unable to update for months
at a time.</li></ul><p>Balancing the needs of <code>grpc-go</code>&#39;s open source community and Google&#39;s internal
users is a difficult and thankless task. And perhaps its breadth of features and
options are required for adoption within Google. For the rest of us, the
complexity and instability of <code>grpc-go</code> represents an unpleasant distraction
from our core business.</p><h2 id="production-grade-simplicity">Production-grade simplicity<a href="#production-grade-simplicity" aria-label="production grade simplicity permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>Connect brings simplicity back to Protobuf-powered APIs. Each Connect
implementation is <em>focused</em>: just the essential features, built on top of
time-tested HTTP libraries and designed to get out of your way.</p><ul><li>In Go, Connect is just one package, with a few thousand lines of code and a
handful of commonly-used options. Even <a href="https://github.com/bufbuild/connect-demo/blob/main/internal/gen/buf/connect/demo/eliza/v1/elizav1connect/eliza.connect.go">the generated code</a> is
meant to be read.</li><li>It&#39;s built on <code>net/http</code>. Connect handlers implement <code>http.Handler</code>, and Connect
clients wrap <code>http.Client</code>. They work with any third-party router,
middleware, or server.</li><li>On top of <code>net/http</code>&#39;s foundation, <code>connect-go</code> supports three RPC protocols:
gRPC, gRPC-Web, and Connect&#39;s own protocol. Handlers support all three
protocols by default, and clients can switch protocols with <a href="https://pkg.go.dev/github.com/bufbuild/connect-go#WithGRPC">one config
option</a> <!-- -->—<!-- --> no other code changes necessary.</li><li>The <a href="https://connect.build/docs/protocol">Connect protocol</a> is a simple, POST-only protocol that
works over HTTP/1.1 or HTTP/2. It takes the best portions of gRPC and gRPC-Web,
including streaming, and packages them into a protocol that works
equally well in browsers, monoliths, and microservices. The Connect protocol
is what we think the gRPC Protocol should be. By default, JSON- and
binary-encoded Protobuf is supported. Calling a Connect API is as
easy as using <code>curl</code>:<pre><code># Try it out! This is a live demo!
curl \
    --header &#34;Content-Type: application/json&#34; \
    --data &#39;{&#34;sentence&#34;: &#34;I feel happy.&#34;}&#39; \
    https://demo.connect.build/buf.connect.demo.eliza.v1.ElizaService/Say
</code></pre></li><li><code>connect-go</code> also supports the full gRPC protocol, including streaming,
headers, trailers, and error details. gRPC-compatible <a href="https://github.com/bufbuild/connect-grpcreflect-go">server
reflection</a> and <a href="https://github.com/bufbuild/connect-grpchealth-go">health checks</a> are
available as standalone packages. Instead of cURL, we could call our
Connect API with <code><a href="https://github.com/fullstorydev/grpcurl">grpcurl</a></code>:<pre><code># This is also a live demo!
go install github.com/fullstorydev/grpcurl/cmd/grpcurl@latest
grpcurl \
    -d &#39;{&#34;sentence&#34;: &#34;I feel happy.&#34;}&#39; \
    demo.connect.build:443 \
    buf.connect.demo.eliza.v1.ElizaService/Say
</code></pre></li><li>Handlers and clients also support the gRPC-Web protocol, so browsers can
connect directly to your server. We validate our gRPC and gRPC-Web
implementations using an <a href="https://github.com/bufbuild/connect-crosstest">extended version</a> of Google&#39;s
own interoperability tests.</li><li>Headers, trailers, and other metadata are passed explicitly, without
attaching anything to Go contexts. With generics, the resulting code is
ergonomic, type-safe, and easy to reason about.</li></ul><p>If you&#39;ve used the <a href="https://buf.build">Buf CLI or Schema Registry</a>, you&#39;ve used Connect
<!-- -->—<!-- --> internally, we&#39;ve completely replaced <code>grpc-go</code> with <code>connect-go</code>.
We&#39;ve found Connect a joy in production: it&#39;s small, simple, and debuggable.</p><p>In Go, Connect is currently in beta: we rely on it in production, but we may
make a few changes as we gather feedback from early adopters. We&#39;re planning to
tag a stable <code>v1.0</code> in October, soon after the Go 1.19 release. We take semantic
versioning <em>very</em> seriously: once we release <code>v1.0</code>, we&#39;ll never break your
builds.</p><h2 id="coming-soon">Coming soon<a href="#coming-soon" aria-label="coming soon permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>We&#39;ve got big plans for the Connect ecosystem! Along with Connect in Go, we&#39;ve
been working on a TypeScript implementation for browsers. It shares the same
design priorities: it&#39;s idiomatic TypeScript all the way down, stays close to
the browser&#39;s fetch API, fits neatly into React hooks, and supports both
gRPC-Web and Connect&#39;s own protocol. It also produces <em>tiny</em> bundles. We&#39;ve
already replaced <code>grpc-web</code> in the Buf Schema Registry frontend, and we&#39;re
planning to release <code>connect-web</code> soon <!-- -->—<!-- --> stay tuned.</p><p>Eventually, we&#39;d like to release Connect implementations for Express, Rails,
Django, Laravel, and similar frameworks. You shouldn&#39;t have to choose between
these productive toolkits and Protocol Buffers <!-- -->—<!-- --> they should work
seamlessly together.</p><h2 id="get-involved">Get involved!<a href="#get-involved" aria-label="get involved permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a></h2><p>We&#39;d love to hear what you think of Connect: check out the <a href="https://connect.build/docs/go/getting-started">Getting Started
guide</a>, try Connect in your next Go project, poke through the <a href="https://github.com/bufbuild/connect-demo">demonstration
project</a>, and please <a href="https://github.com/bufbuild/connect-go/issues">file issues</a> if something doesn&#39;t work as
you expect. We&#39;re always available in the <a href="https://join.slack.com/t/bufbuild/shared_invite/zt-f5k547ki-VDs_iC4TblNCu7ubhRD17w">Buf Slack</a>, and we&#39;re
usually in the #grpc and #connect channels in the <a href="https://invite.slack.golangbridge.org/">Gophers
Slack</a> too.</p></div></div></div></div></div></div>
  </body>
</html>
