<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal">Original</a>
    <h1>WebAuthN and Fido for Linux</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/66a7cc9fb77eb37920b2035cd3ca1028f914fbfa8d43c92668c6663cd36fe70c/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f4a6f367965384e765946325a324f646235622f67697068792e676966"><img src="https://camo.githubusercontent.com/66a7cc9fb77eb37920b2035cd3ca1028f914fbfa8d43c92668c6663cd36fe70c/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f4a6f367965384e765946325a324f646235622f67697068792e676966" alt="" data-animated-image="" data-canonical-src="https://media.giphy.com/media/Jo6ye8NvYF2Z2Odb5b/giphy.gif"/></a></p>
<p dir="auto">This is a standalone service which aims to offer FIDO2 platform functionality (FIDO U2F, and WebAuthn) on Linux, over a <a href="https://flatpak.github.io/xdg-desktop-portal/portal-docs.html" rel="nofollow">D-Bus Portal interface</a>.</p>
<p dir="auto">The project is composed of multiple crates:</p>
<ul dir="auto">
<li><strong>libwebauthn</strong>: Linux native implementation of FIDO2 and FIDO U2F Platform APIs.
<ul dir="auto">
<li>Fully written in Rust.</li>
<li>No longer relies on Mozilla&#39;s <a href="https://github.com/mozilla/authenticator-rs">authenticator-rs</a>.</li>
<li>Supporting multiple transports (currently USB HID and BLE). The library is designed to have pluggable transport implementations, making it easy to add transport backends (planned: NFC, caBLEv2).</li>
</ul>
</li>
<li><strong>xdg-credentials-portal</strong>: API proposal and reference implementation for a service which will expose FIDO2 and FIDO U2F Platform APIs via a D-Bus interface, for desktop applications to use - including conteinerized apps such as Flatpaks.
<ul dir="auto">
<li>Similarly to <a href="https://github.com/flatpak/xdg-desktop-portal">xdg-desktop-portal</a> and <a href="https://github.com/flatpak/xdg-desktop-portal/tree/master/document-portal">xdg-documents-portal</a>, the service is intended to be accessed over a proposed D-Bus <em>portal</em>: <a href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/blob/master/data/org.freedesktop.portal.FIDO2.xml">org.freedesktop.portal.Credentials</a>.</li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-libwebauthn" aria-hidden="true" href="#libwebauthn"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>libwebauthn</h2>
<h3 dir="auto"><a id="user-content-platform-functionality" aria-hidden="true" href="#platform-functionality"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Platform functionality</h3>
<ul dir="auto">
<li>FIDO U2F
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Registration (U2F_REGISTER)</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Authentication (U2F_AUTHENTICATE)</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Version (U2F_VERSION)</li>
</ul>
</li>
<li>FIDO2
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Create credential</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Verify assertion</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Biometric user verification</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Discoverable credentials (resident keys)</li>
</ul>
</li>
<li>FIDO2 to FIDO U2F downgrade
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Basic functionality</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Support for excludeList and pre-flight requests</li>
</ul>
</li>
<li>PIN/UV Protocols
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> PIN/UV Auth Protocol One</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> PIN/UV Auth Protocol Two</li>
</ul>
</li>
<li>PIN/UV Operations
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> GetPinToken</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> GetPinUvAuthTokenUsingPinWithPermissions</li>
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> GetPinUvAuthTokenUsingUvWithPermissions</li>
</ul>
</li>
<li><a href="https://fidoalliance.org/passkeys/" rel="nofollow">Passkey Authentication</a>
<ul dir="auto">
<li><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Discoverable credentials (resident keys)</li>
<li><g-emoji alias="red_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f534.png">🔴</g-emoji> Cloud-Assisted BLE (caBLE) transport (<a href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/issues/31" data-hovercard-type="issue" data-hovercard-url="/AlfioEmanueleFresta/xdg-credentials-portal/issues/31/hovercard">#31</a> blocked: spec not yet published)</li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-transports" aria-hidden="true" href="#transports"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Transports</h3>
<table>
<thead>
<tr>
<th></th>
<th>USB (HID)</th>
<th>Bluetooth Low Energy (BLE)</th>
<th>NFC</th>
<th>TPM 2.0 (Platform)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FIDO U2F</strong></td>
<td><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Supported (via hidapi)</td>
<td><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Supported (via bluez)</td>
<td><g-emoji alias="orange_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e0.png">🟠</g-emoji> Planned (<a href="#5">#5</a>)</td>
<td><g-emoji alias="orange_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e0.png">🟠</g-emoji> Planned (<a href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/issues/4" data-hovercard-type="issue" data-hovercard-url="/AlfioEmanueleFresta/xdg-credentials-portal/issues/4/hovercard">#4</a>)</td>
</tr>
<tr>
<td><strong>WebAuthn (FIDO2)</strong></td>
<td><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Supported (via hidapi)</td>
<td><g-emoji alias="green_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e2.png">🟢</g-emoji> Supported (via bluez)</td>
<td><g-emoji alias="orange_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e0.png">🟠</g-emoji> Planned (<a href="#5">#5</a>)</td>
<td><g-emoji alias="orange_circle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f7e0.png">🟠</g-emoji> Planned (<a href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/issues/4" data-hovercard-type="issue" data-hovercard-url="/AlfioEmanueleFresta/xdg-credentials-portal/issues/4/hovercard">#4</a>)</td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-xdg-credential-platform" aria-hidden="true" href="#xdg-credential-platform"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>xdg-credential-platform</h2>
<p dir="auto">This is a very early stage idea, no proposed spec exists yet.</p>
<p dir="auto">Here is an high-level architecture diagram of the proposed service and how it will interact with its clients:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/blob/master/images/diagram-1.png"><img src="https://github.com/AlfioEmanueleFresta/xdg-credentials-portal/raw/master/images/diagram-1.png" alt="High-Level Architecture"/></a></p>
<p dir="auto">Footnotes:</p>
<ul dir="auto">
<li><strong>*</strong>: Better alternatives for UI should be considered, e.g. native UI implementations via xdg-credentials-portal-{gnome, kde}.</li>
<li><strong>Δ</strong>: See Roadmap section below</li>
</ul>
<h3 dir="auto"><a id="user-content-motivation" aria-hidden="true" href="#motivation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Motivation</h3>
<ul dir="auto">
<li>
<p dir="auto"><strong>Sandboxed Browsers</strong>. A modern solutions is required to allow sandboxed applications (Flatpaks, Snaps) to access U2F and FIDO2 devices, without granting blanket access to all devices.</p>
<ul dir="auto">
<li>Firefox has now officially been <a href="https://flathub.org/apps/details/org.mozilla.firefox" rel="nofollow">released on Flathub</a>, but is unable to access U2F devices. See <a href="https://github.com/flatpak/flatpak/issues/2764" data-hovercard-type="issue" data-hovercard-url="/flatpak/flatpak/issues/2764/hovercard">flatpak issue #2764</a></li>
</ul>
</li>
<li>
<p dir="auto"><strong>Passwordless Authentication</strong>. FIDO2/WebAuthn brings the promise of a world without passwords, and related security incidents, which is worth pursuing. A platform API would make it easier for applications to support stronger authentication.</p>
</li>
<li>
<p dir="auto"><strong>Platform Authenticators</strong> are an important part of the FIDO2 specification, and fundamental for widespread adoption of passwordless authentication. Windows Hello, <a href="https://fidoalliance.org/news-your-google-android-7-phone-is-now-a-fido2-security-key/" rel="nofollow">Android&#39;s FIDO2 support</a>, Apple&#39;s TouchID and FaceID, are all examples of platform authenticators. There is no reason why the Linux desktop community could not enjoy similar benefits</p>
<ul dir="auto">
<li><a href="https://blog.mozilla.org/security/2019/03/19/passwordless-web-authentication-support-via-windows-hello/" rel="nofollow">Passwordless Web Authentication Support via Windows Hello - Mozilla Security Blog</a></li>
<li><a href="https://fidoalliance.org/news-your-google-android-7-phone-is-now-a-fido2-security-key/" rel="nofollow">Your Google Android 7+ Phone Is Now a FIDO2 Security Key - Fido Alliance</a></li>
</ul>
</li>
<li>
<p dir="auto"><strong>Native Apps FIDO2 Support</strong>. FIDO2 should not be segregated to web applications.</p>
<ul dir="auto">
<li><a href="https://developers.google.com/identity/fido/android/native-apps" rel="nofollow">FIDO2 API for Android</a> (native apps)</li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-other-platforms" aria-hidden="true" href="#other-platforms"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Other platforms</h3>
<p dir="auto">Here is a list of related APIs available on other platforms, which offer similar functionality:</p>
<ul dir="auto">
<li><strong>Android SDK</strong>: <a href="https://developers.google.com/android/reference/com/google/android/gms/fido/fido2/Fido2ApiClient" rel="nofollow">Fido2ApiClient</a></li>
<li><strong>Windows Hello</strong>: <a href="https://github.com/Microsoft/webauthn">FIDO2 Win32 APIs</a></li>
<li><strong>macOS, iOS</strong>: WebAuthn via <a href="https://developer.apple.com/documentation/authenticationservices/aswebauthenticationsession" rel="nofollow">ASWebAuthenticationSession</a></li>
</ul>
<p dir="auto">Further references:</p>
<ul dir="auto">
<li><a href="https://dbus.freedesktop.org/doc/dbus-api-design.html" rel="nofollow">D-Bus API Design Guidelines</a></li>
<li>Relevant FIDO2 specifications:
<ul dir="auto">
<li><strong><a href="https://fidoalliance.org/specs/fido-v2.0-ps-20190130/fido-client-to-authenticator-protocol-v2.0-ps-20190130.html" rel="nofollow">CTAP 2.0 Proposed Standard</a></strong>
<ul dir="auto">
<li><a href="https://fidoalliance.org/specs/fido-v2.0-ps-20190130/fido-client-to-authenticator-protocol-v2.0-ps-20190130.html#u2f-interoperability" rel="nofollow">Section 7: Interoperating with CTAP1/U2F authenticators</a></li>
<li><a href="https://fidoalliance.org/specs/fido2/fido-client-to-authenticator-protocol-v2.1-rd-20191217.html" rel="nofollow">CTAP 2.1 Review Draft</a></li>
</ul>
</li>
<li><a href="https://www.w3.org/TR/webauthn/" rel="nofollow">W3C - Web Authentication API</a></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h2>
<p dir="auto">If you&#39;d like to contribute but you don&#39;t know where to start, take a look at available tasks in the <em>Issues</em> tab.</p>
<p dir="auto">Alternatively, any investigation or expertise on the following would be very helpful. Please reach out!</p>
<ul dir="auto">
<li>
<p dir="auto"><strong>Platform Authenticator support</strong>. Similarly to Android devices, and Windows Hello. In order to implement this (and request FIDO2 certification), support for the following is needed:</p>
<ul dir="auto">
<li>Trusted Platform Modules (TPMs)</li>
<li>User-verification devices (e.g. fingerprint readers)</li>
</ul>
</li>
<li>
<p dir="auto"><strong>Unprivileged access</strong>. FIDO2 credentials are scoped to an <em>origin</em> (e.g. <code>https://example.org</code>). The proposed API allows applications to specify any origin (as needed by browsers). Hence, it requires an additional user confirmation step for security purposes. This extra step may not be needed if the request sender could be verified, as the legitimate <em>owner</em> of the specified origin.</p>
<ul dir="auto">
<li>As an example, Android has implemented two APIs: <a href="https://developers.google.com/android/reference/com/google/android/gms/fido/fido2/Fido2ApiClient" rel="nofollow">Fido2ApiClient</a> (unprivileged), and <a href="https://developers.google.com/android/reference/com/google/android/gms/fido/fido2/Fido2PrivilegedApiClient" rel="nofollow">Fido2PrivilegedApiClient</a> (privileged) for use by web browsers. The main difference between the two is that the privileged API allows specifying an arbitrary <em>origin</em>, whilst the unprivileged API requires <a href="https://developers.google.com/identity/fido/android/native-apps#interoperability_with_your_website" rel="nofollow">linking your app to your origin</a>.</li>
</ul>
</li>
<li>
<p dir="auto"><strong>PAM, and passwordless login</strong> (long-term goal). A PAM module would allow using FIDO2 for user login purposes, e.g. using the platform authenticator (similar to Windows Hello).</p>
</li>
<li>
<p dir="auto"><strong>D-Bus Portal API design</strong></p>
</li>
<li>
<p dir="auto"><strong>Proposal and contribution processes (Flatpak, GNOME, etc.)</strong></p>
</li>
<li>
<p dir="auto"><strong>UI/UX</strong></p>
</li>
</ul>
</article>
          </div></div>
  </body>
</html>
