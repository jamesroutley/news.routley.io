<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://stkbailey.substack.com/p/airflows-problem">Original</a>
    <h1>Airflow&#39;s Problem</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p><span>I wrote an entire blog post trying to pin down </span><em>why</em><span> I dislike Airflow. But despite my rationalizations, it came out like a break-up letter — just way too personal:</span></p><blockquote><p><em>Dear Airflow,</em></p><p><em>I tried to make it work, I really did. But you are too old, your abstractions are clunky, and I think you’re ugly. It’s over between us.</em></p><p><em>Sincerely,</em></p><p><em>Stephen</em></p></blockquote><p>Which would have been fine, except I knew exactly how Airflow would respond:</p><blockquote><p><em>Steve — Sorry for taking so long to get back to you, been getting installed like 10,000 times a day. No problem re: feelings, LMK if you change your mind. -A</em></p></blockquote><p><span>The reality is, Airflow is an achievement: an open source project that has penetrated the data psyche to an unsettling degree. It does what it says it does, which is more than most tools can claim. Teams use it at scale</span><a id="footnote-anchor-1" href="#footnote-1" rel="">1</a><span> and in 2022</span><a id="footnote-anchor-2" href="#footnote-2" rel="">2</a><span>. I mean, there is </span><code>this &gt;&gt; [offensive, obscene] &gt;&gt; python &gt;&gt; syntax</code><span> … but any project should be lucky to be so disliked, so boring, so inevitable.</span></p><p><span>So </span><em>why</em><span> can’t I stomach it?</span></p><p>Then I realized: My problem is not with Airflow. It’s with Airflow’s problem.</p><p><span>Here is one of the first sentences in Airflow’s README file</span><a id="footnote-anchor-3" href="#footnote-3" rel="">3</a><span>:</span></p><blockquote><p>Airflow works best with workflows that are mostly static and slowly changing.</p></blockquote><p><span>This was a great design in 2015 when Airflow was open-sourced. It’s </span><em>still</em><span> good enough for most teams in 2022 — slow, chunky, and centralized DAGs express most existing data value, even if they are unbundled into other SaaS tools.</span><a id="footnote-anchor-4" href="#footnote-4" rel="">4</a></p><p><span>My perspective, though, is that most </span><em>future</em><span> value will arise out of enabling teams to build data workflows that are faster, simpler, and more decentralized.</span></p><p><span>In fact, in the year after Airflow was open sourced, Jeff Magnusson of StitchFix wrote “Data Engineers shouldn’t write ETL”</span><a id="footnote-anchor-5" href="#footnote-5" rel="">5</a><span> and called for a radical departure from centralized ownership of data pipelines: “[Our engineers] are not optimizing the organization for efficiency, we are optimizing for autonomy.”</span></p><p>Now, leftward pressure is everywhere: business users must learn analysis, analysts must practice engineering, and engineers must architect platforms.</p><p><span>Yet Airflow was never intended to be a heterogeneous platform intended for decentralized DAGs. It is a job scheduling and processing engine: take a single team’s workload and orchestrates it on a schedule, akin to a subway system.</span><a id="footnote-anchor-6" href="#footnote-6" rel="">6</a></p><p><span>The job of today’s data engineers is more akin to managing the entire transportation network — subways, sure, but also streets, buses, bike lanes. When the growth team drops 1000 scooters on the streets overnight, data engineers have to ensure they don’t cause accidents or get people killed. </span><em>That </em><span>is the new job.</span></p><div><figure><a target="_blank" rel="nofollow" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png"><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://bucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com/public/images/4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png&#34;,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:801394,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fbucketeer-e05bbc84-baa3-437e-9518-adb32be77984.s3.amazonaws.com%2Fpublic%2Fimages%2F4ed1e783-a7bc-49dc-be2c-19455d537b3c_2208x1242.png 1456w" sizes="100vw" loading="lazy"/></picture></a><figcaption>Not pictured: IAM policies</figcaption></figure></div><p><span>What’s confusing is that the shift has been subtle and inconsistent across companies. Responsibilities </span><em>resemble</em><span> those of the old world, while requiring radically different mindsets. Below are three prominent examples of the shift.</span></p><p><strong>Shift 1: “We know the lineage” to “We know what in god’s name is happening”</strong></p><p>In the old world, if you understood data ancestry, you had a pretty good grasp of your data platform. Showing that “Business Action A comes from Dashboard B comes from View C comes from Table D comes from CRM API E” was no easy task, but it allowed you to identify broken points in the graph and address them before the next run of the daily batch job.</p><p><span>Nowadays, the platform teams face </span><em>correlational</em><span> problems as well:</span></p><blockquote><p>From 10:00am to 10:30am, AWS us-east-1 had an outage. Snowflake was inaccessible during this time, affecting your data replication, observability, transformation, reverse ETL, and dashboard tooling. How do you identify and restart the necessary processes?</p></blockquote><p>Understanding the impact of new data assets, of bad data assets, of system outages across a sprawling set of processes is hard, and resembles the work of site reliability engineers. And the pain gets more acute as you add more users, tools, and use cases to the platform — in other words, it scales with value.</p><p><strong>Shift 2: “We unblock analysts” to “We enable everyone”</strong></p><p><em><a href="https://youtu.be/oijEsqT2QKQ?t=22" rel="">Data finds a way</a></em><a href="https://youtu.be/oijEsqT2QKQ?t=22" rel="">,</a><span> regardless of our best intentions. Data tucked neatly into Snowflake </span><em>will</em><span> show up in BI tools, of course — but also emails, Slack, CRMs, Retool apps, ML models, customer-facing products, product analytics tools, and whatever the hell “native data apps” turn out to be.</span></p><p><span>That’s a feature, not a bug, of data. And it’s the job of data engineers to make the sustainable way of using data and the easiest way of using data one and the same. That’s what </span><em>dbt</em><span> has done with “creating tables” and look at its effect: dbt projects become semantic gravity wells, agglomerating new tables for all sorts of use cases. It becomes barely-contained chaos where neophytes and elites brush shoulders — not unlike some of the world’s great cities.</span></p><p><strong>Shift 3: “We debug our DAGs” to “We debug our data”</strong></p><p>In Flint, Michigan, functional water pipes corroded and started leaching lead into the water, causing irreparable harm to children and irreversible damage to trust in the local government. In data, the stakes are nowhere near as high, but a poisoned watering hole causes similarly widespread damage to reputation and coordination.</p><p>All of which means, as the flow of data becomes a table stakes commodity to all sorts of operational processes, data engineers can’t sit back and just watch it flow. We need new frameworks, protocols, and processes to ensure that the data is consumable: that personal data is treated appropriately, that toxins from upstream aren’t leaching into the metrics, that subtle drifts in balance won’t ruin the machine learning models. A platform team may not be on the hook for solving each of these problems, but they certainly provide leadership, frameworks, and tools for diagnosing them early.</p><p><span>So what is my problem with Airflow? My problem is that Airflow was not designed to address these problems — it lacks the ambition we need, even while occupying the critical pedestal as the foundational execution engine.</span><a id="footnote-anchor-7" href="#footnote-7" rel="">7</a><span> We don’t need a better Airflow, but we need a higher-level one: a system that enables data platform teams to </span><em>think</em><span> at a platform level.</span></p><p>In fact, Airflow is already displaced. Airflow qua Airflow is already obsolete, and it happened right within the Airflow ecosystem. It’s called Astronomer.</p><p>Astronomer bills itself as the “Fully Managed Apache Airflow Service”. But it’s not. Astronomer is to Airflow as Snowflake is to the database. It’s a management system, and it shows us what the future of data engineering really looks like:</p><ul><li><p>A top-level “control plane” that allows you to spin up an Airflow deployment in its own Kubernetes environment</p></li><li><p>Each Airflow deployment has health metrics visible through Grafana and Prometheus dashboards</p></li><li><p>Astronomer integrates at the organization level with identity management systems</p></li><li><p><span>The control plane can ingest metadata from across workspaces via a </span><a href="https://www.astronomer.io/blog/astronomer-acquires-datakin-the-data-lineage-tool/" rel="">separate service</a></p></li><li><p>Developer efficiency tools, like integrated Github actions, secrets management, and simple dev/stage/prod promotion workflows</p></li></ul><p><span>If it sounds like you could simply replace Airflow with basically any other job execution engine, that’s because you could. Astronomer’s value proposition lies not in the individual deployments, but in the control plane, and in (eventually) all of that beautiful metadata each of those engines will emit. In the Astronomer paradigm, Airflow’s greatest value is as a marketing tool.</span><a id="footnote-anchor-8" href="#footnote-8" rel="">8</a></p><p>dbt has proven the value of having a semantic abstraction layer on top of modern data platforms. But it’s not enough. There’s an area of the stack yet to be addressed — one which requires knowledge of Terraform, AWS, Kubernetes, CI/CD, networking, and security principles — that also needs to be simplified and adapted to the needs of data teams. The tool data engineers need to be effective in this new world does not run scripts, it organizes systems.</p><p>So Airflow… it’s not going to work out between us. But I realize now that it’s not you, it’s me. You were built for a world I’m not interested in living in, and I think we should go ahead and move in our separate directions. - Sincerely, Stephen</p></div></div></div></article></div></div></div>
  </body>
</html>
