<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://oldblog.antirez.com/page/picol.html">Original</a>
    <h1>Picol, a Tcl interpreter in 550 lines of C code</h1>
    
    <div id="readability-page-1" class="page"><div><p>After I found <a href="http://lambda-the-ultimate.org/node/2124">this story</a> on <a href="http://programming.reddit.com">programming.reddit.com</a> I was too tempted to write a 500 lines of C code Tcl interpreter for fun, as <a href="http://programming.reddit.com/info/1a1zh/comments">commented here</a>. It took three hours of work, <b>556</b> lines of C code, and was pretty interesting to do. The following is a description of the experiment.
</p><h3>Rules</h3><p>
I had some rule in mind:
</p><ul><li>Unlike the <a href="http://www.modeemi.fi/~chery/lisp500/">lisp500</a> interpreter I wanted to use more or less my normal C style. Lisp500 isn&#39;t actually 500 lines of code, but 500 lines of human gzipped code ;). In Picol you&#39;ll find normal C spacing and even comments.</li>

<li>I wanted to write an interpreter with a design similar to a real one. One of the few useful things you can do with picol is to learn how to write a Tcl interpreter if you are a newbie programmer I guess, so the point was to write a simple to understand program.</li>

<li>The resulting interpreter should be able to run some kind of non trivial program, to set few vars and print hello world was not an option.</li>

</ul>
<h3>The resulting interpreter: Picol</h3>
<p><a href="http://antirez.com/picol/picol.c.txt">This is the picol source code</a>, that tells very little without to know the supported features. The parser is very similar to the Tcl one, Picol supports interpolation as well, for example you can write:
</p><pre>set a &#34;pu&#34;
set b {ts}
$a$b &#34;Hello World!&#34;
</pre>
<p><b>Note that Picol has an interactive shell!</b> so just launch it without arguments to start to play (to compile just write <i>gcc -O2 -Wall -o picol picol.c</i>).
</p></div></div>
  </body>
</html>
