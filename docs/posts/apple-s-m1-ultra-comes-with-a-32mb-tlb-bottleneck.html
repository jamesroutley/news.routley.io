<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-42411" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="38" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__kfwutj8xttk id__qd3xtn595x id__9s9plyjzmks id__xg2vgt2whd id__gz9aq6f6dq id__ubgsza1poj id__b8p5fzo1rs id__s5clj33r078 id__8z7wdw1ucm id__ybgb9ql2vh id__c1ijs9xt12 id__8iby9j4kk7a id__93ad00211w id__3zam1iq1l6g id__zoetb9cyfa id__eq8rpnwe68d" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ubgsza1poj"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__c1ijs9xt12"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__fbcsp6zp8u id__b99z5nlc1gs id__9mrig9rcqld id__8tjffkfjnc9 id__na8nd6lc1zb id__dgpsw7mes2t id__yrlizb10jzk id__qsehmkysjsh id__nj8uxu146l id__s3hxxk35gno id__dt45b5p82lv id__llsmc3tt7ph id__zs6k0wm36i id__8hzrb3hvu6 id__z3n1i4i4gg id__mkan5xtipqp" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__dgpsw7mes2t"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__gtpv96y2ita id__ose9p1w3quc id__qnq2nhmawr8 id__xyigcezn6de id__1w887der33 id__57ts4qwf28v id__nv7noeskskc id__c74xpi6wnar id__wf2ectun1a id__0m48old8sceq id__o7gtxyu2eak id__54f5aaivkfd id__i8wrwdrtn1p id__z2neibesixh id__e0oee59g2pb id__71coz2fpm0b" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__57ts4qwf28v"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__j4ngc3tccxg id__mdr7s1cjobs id__w5f1coolv8l id__cmghqhtehs id__wf9rg6sli id__kn8r3oqhyg id__x7vlzk9j46 id__5ubq4kzqj7p id__9hzd62oz6 id__6adtyimfrl id__03quw8kdzztm id__912k5m7n6oj id__zroh0xxh5ah id__49uzldc2g16 id__wy1zwnvs3u9 id__f8zt7m4038v" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__kn8r3oqhyg"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__mu9fws6r5oc id__wwirweci44n id__9yg69ys8lh id__nd2lvz26jwi id__zu4abt5i6ck id__ojvahqlc9m id__hrh3tw6grcc id__ykgfrlziolj id__2yj7z0zrrz7 id__dasn32ulzri id__vhw1086o1rm id__onrp3h72aos id__1f7aw790jwyh id__4gbn5cx4fn3 id__g6n3xny93o8 id__j0qdfv7dci" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ojvahqlc9m"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__1v6rnqdfblv id__gvwfl85yq54 id__9dp4ivby8e id__f8r92ccne88 id__zpx47zm19q id__e41myxkuac9 id__ou0i34byob id__umnbrkca8er id__bi68d2dewrg id__ggtryaejap5 id__awjz4dlnnol id__oxlj6wjdn98 id__g022r7i6r3n id__ixgfprpr0fg id__ni1dnk9isg id__4wt89d10k9d" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__e41myxkuac9"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__buvmz2698ah id__i6mdk9bj5l id__433vvfiqlgq id__qyn8laqbov8 id__88mshiklum id__rnju17qttbg id__1rei7i25y57 id__zqu6vy857kg id__xm8sw2do68 id__p4ftq50hxr id__550qideqny8 id__u6dxs5s1bms id__qrr509p95tb id__9mttmw6bff6 id__xdtrglf3afh id__qiusueb9lm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__rnju17qttbg"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__cp6yypsehus id__4c1jnf42t4n id__k89l8rz87rq id__1aojgfy47xg id__l4kuoshrba id__ofa9uc3dy4i id__tg2i324sgd id__4rdzt8882cm id__ya5ubg6amf id__izarjs48ke id__cec066mx3z id__l0asijrweg id__k3nwxzxk7o id__vxhtorpcp id__ppso4x6w79j id__9u3ebdcdy3" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ofa9uc3dy4i"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__f0k6ynp8sin id__imq0mmpvzfi id__a22vfulkaut id__9jqb10nejf id__kze2zyg1ry id__63xhhtmwv7v id__7cumau60x6j id__pcjlrdalj2o id__a2zo23unjx id__1b1ucv1cyku id__moxke0nyogr id__n9iwv6hw4m id__gk0jykkv8yc id__qmhlif96t6d id__k4z527bkit id__2poecrxrrzk" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__63xhhtmwv7v"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__wpv7xi5hzs9 id__795vje1o7is id__sbxy6uopi3 id__3wqg3z44z6y id__33q791yqllk id__i6o0oe6p2j id__v4bh7gpujra id__lbk44wd2xg id__qjq4pfhbecg id__ikewppq2ik id__bjn16t8onhh id__egmxskl9roo id__61fvvbf5wux id__ef60qq1jtyk id__rsub1g5112 id__6beyjq3n8i5" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__i6o0oe6p2j"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__b874b4naac id__zbh695ilyos id__2ruhs51s5uk id__lad5odv3ed id__gwn22ahewu id__fr5ff59zhnl id__1au6fjurf4h id__vpjn0mk4onf id__c4w0g9pfqr9 id__vq251phrqyh id__iwabmna048f id__8mbg8cnmy38 id__7f2oocffa32 id__jj5j2fzgvx id__aijmxyr0mpk id__5zunpillkzb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__fr5ff59zhnl"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__eral19etgg7 id__ow3skbpud4 id__2aedihk4ytt id__ytw3r3aek2f id__5dpgiplq3ju id__yymmxtb4tk id__mz4dm5eagke id__eelri01fxpw id__1foa7ofk3tg id__j0ss2bxp1h id__n93vr5apu0j id__yfi4ki2xwir id__cvcywbb0gdp id__clpksec1fn8 id__qzm8dbbkgnt id__w0am7efew8" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__yymmxtb4tk"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__a1shh659em6 id__2jpdnc67c81 id__8gnjdh7txh8 id__ty1csp1f7v id__lowmcxngzb id__296te0iut4v id__9vnonri37mq id__vefv1gf0xj id__3dov2pgs695 id__a89rjagcgws id__8jytvfvq0s5 id__dw5344s17y id__c25x8ctlre id__p5jgcge0gap id__emmkl9qj1uk id__ht57ecw3a2v" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__296te0iut4v"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__o0wwartm2vp id__l2ghgr54ng id__pfloirve4p id__u47no5lqo3q id__paztqtel5d id__w2oquzlix2 id__be7lj4ki8wb id__3icdl2o1siu id__pttjiy931x9 id__xjkfp6ptyv id__a7tyldta94l id__0fvopfsdyizs id__7yixu46a358 id__gerhwoutbhp id__m0yhk6htjj id__51mjy7emryx" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__w2oquzlix2"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__tsx617t723i id__ppm5l915t6 id__tfyh7xap9s id__95hqrlxyh5a id__9he1bet2vn4 id__knj3uqj6qd id__6os0saacooq id__ni6zhu0jsl id__2tj1qllnq26 id__6exsmjxsghx id__2wh4f7a1ywu id__v29t9lqzvka id__kbqknf3mk4 id__2ijlofjbv4y id__hh3tsahuz4 id__wzx6hu7xs3" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__knj3uqj6qd"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__d4ons2cw70u id__6qq7mtvxocj id__70iihy1a3vb id__et5qyhfar9 id__eq6yxukt0xg id__a71yg7beua5 id__earc6mlxdvj id__c0dnn2wemep id__eet9kxd8ha id__0hkodlqblbph id__5atjdgyrk1 id__gtdqrwa6hjh id__crzxrtphlr id__q3rz0973ois id__jy6f7cxme8 id__ufdgto9lv6c" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__a71yg7beua5"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__1fi0bbarpki id__qtkk9lt4bo id__rk7zjondep id__c7tprjeek9k id__g9mi2ur9n3l id__zpxj76hek0d id__t2olzay5t7 id__gh5z5n4p63a id__5ib9h3t3s5g id__g3gqrxnp2ug id__noi4n9c32jh id__eqaxoryqboi id__w9rzl5c8n7g id__yyusu6fqp9p id__sw8laqkqfe id__xwimxkf6mp" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__zpxj76hek0d"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__noi4n9c32jh"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__vjb3sevx8bk id__n9mgnqlm58 id__miplf7slfpn id__p1h6q2c4jx9 id__zugm8yqt3vl id__j6z8h65xljj id__o7z7p772iz id__4eebziqjgdu id__r9b0ubbmnc id__nr5ezenhpe id__xnfwgii7lw id__2h3ugzkzlln id__4udvcri0qxj id__x6q47erwu6 id__rd2befz97cp id__t4ec6rcnvfr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__j6z8h65xljj"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__top3ypvep3 id__qhobeyt2ami id__nb9p6ajb7oi id__4z62qdigcnk id__8i33dz4v0w7 id__9lf7pv2zgjg id__s6fik9igwxf id__inulvzut3f id__bhqgu0c1jfa id__d1v9cxy2rx id__ivni244etd id__bgg6aq1x789 id__flhsxcn7qko id__5xxfpdzj048 id__320y7j49gls id__po14jmkr3b" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__9lf7pv2zgjg"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__d06ucbux4tt id__p1z1l65z9qi id__xosh78u6u9 id__n7aqejmblf id__vf03e9sojqo id__dcb7ah13f25 id__h52njyoeg id__maqe6jl33y id__xzwu38c8hp id__rvog4ya9usm id__8x2xwjhsed id__9dw1593rsq9 id__borqaadpdnp id__9ptxlar8pr4 id__ld0gbtkgwy id__zlx8l56ivjp" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__dcb7ah13f25"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__8iyasj5tjlc id__cjng2lnvmxh id__ot1jzopsuh id__7lbeodw1qk9 id__2h0paqokkbx id__wrwelaesj3 id__9p4pqh214wh id__gyec94uu2eh id__xrvsnj45kv id__o2ymmh90pt7 id__cgjspdss5x7 id__bgegcguibj6 id__0e511ykpff3g id__pc34o58a59a id__d0gvoctuvr9 id__7ssnhaqtnqw" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__wrwelaesj3"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__jjr04wwk1ee id__mn3bmkd2a5b id__g18iaj4muqm id__e86mjas2ltg id__5ejf2ujtf2i id__x4palkl74m id__911gtprbelc id__0de54eawrq1q id__outk2m4t9tk id__l51m6rqy2p id__v620ce924 id__qkpi5niz8ls id__r2wp5t7tnhl id__0lhvyqqkrir id__8yprn9snopl id__agnwex7oxf" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__x4palkl74m"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="4" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__qy0x6gygqx id__qtrtrk0xuy id__qhe94dy8wc id__nx0hjnvxko id__qcrtakc9jj id__ywfa807daq id__v5food0is5i id__jliuhktw5k id__prddzh06o7 id__e4r3qjvru2r id__54wceej0q42 id__5xy1bgo1v3t id__cdeii6k1m9m id__d0h4253nvxs id__t9ac3kcw6mp id__axdwrzh144v" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ywfa807daq"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__3xa2bqw4j2u id__wjguw1ljte id__fbtliy1lhke id__sihu492led id__1317lauc5dk id__vq7ojjcpt id__2b4mrye3k7 id__66qomqffk08 id__yxk2ey6xnc id__pna7g4z79 id__ul3rjjbzocr id__6wrbw5xjpn id__eiel7ze5amg id__qbh98m5474m id__0fls4xqlleel id__94bhdozgsi" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vq7ojjcpt"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
