<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-23134" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="24" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__vp9d1evuaq id__ic0f5tzdbxo id__na7k7tmf20p id__fgtxvlbu5lq id__i733ybzboo id__q0w29p3nrv id__iafq0b0n1o id__k5o6emv6i7 id__v6yog9fvcli id__8fs6blg4tvc id__q2xqb4teia8 id__wav2ntuscea id__eeh7imrooi id__gd5902062ps id__ycr9opqb3h id__5jdvteid7uo" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__q0w29p3nrv"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__q2xqb4teia8"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__ai7pg3lwb0l id__sfp4ldd70ot id__x2zd94rzgl9 id__e6xptks6q3a id__gbyvtx0123d id__blfafv8zl6h id__gvsyjpmtw19 id__8x3ayyqrbk id__2ecfan568y4 id__1eqgo37a0li id__a4f0sp0uteh id__pbuy6juzwe id__mlzjoeqmus id__wxzgxwcded id__gfzc6w217ps id__9xc2kujls1c" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__blfafv8zl6h"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__nbazb03d1pc id__4tes0sp0pmn id__sq49rsoyidl id__sro24ylm9e id__p0gyvc78l9h id__ggdsnfsztmk id__18rvcjcmxjgh id__2qjuv9s559v id__29q9tqs1zpk id__m45ue6o9w7 id__t5b3tce4lad id__1ydptfqvlmk id__6udnv36dnhi id__leuvpeud93h id__dwcuh5f4yup id__e2xnr7xa8tm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ggdsnfsztmk"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__0k6dois26ksh id__dczvl04s80v id__tp703n7zhw id__16rbhpgbxc9 id__uvvdzivlg6p id__2djzzzt3t6o id__00bdqktu0z0ql id__sr49711hrn id__2sk4btivoaf id__clxyqv4awji id__flvfgj4ch4 id__mwv294wznr id__4lur1tf0swp id__g4gxtprxcu5 id__wfp2s03121 id__ezzb7edgkmm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__2djzzzt3t6o"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__7oubf5sn759 id__vg37ij55fqd id__l4tlu5g7rt id__15k5wrvnobx id__vf01pk51b9 id__q6vbq8dlck id__g2qlfzs52q id__1b1h7rq7pm2 id__rrrihnp5h4q id__ny1obwhwt9k id__9nfvahx1x3n id__fp40uzch3f5 id__dxpbmxkxnco id__upjbeti2p8c id__mebguh7yneh id__gt1zcv7s5a6" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__q6vbq8dlck"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__8rzfd9jbnar id__851267s8d18 id__dy2nc8na1un id__910lke95j5 id__djwsiphf8f id__n5e8esc84si id__4vmx8g9vr8s id__ddexnmqn66h id__91ekt93lb7m id__15d2o9f5xx5 id__tu9b7xt6swl id__6mavcuhjtb5 id__6ut83unxb7n id__vxgjztuzvcc id__zuko7eotfd id__yi8olnqghir" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__n5e8esc84si"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__5tp5u2vjy66 id__18w6lg8lxyg id__9rf9rpxlge id__u00vwtf4jki id__tzcbhxp3u2r id__vegkbpzd5vk id__m0uk4ak4c1b id__xi4slsm5x7 id__tche96gv0g9 id__qwybo5fzadg id__xphdnjekj1d id__dowr2g9keuu id__zgu1ud0ao8o id__qsmbwv4ghim id__xuhb2ucacxa id__uv7p1ijwpl" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vegkbpzd5vk"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__sdhb2ai6fsd id__q2chpga3noc id__es4wz4batqt id__twfuot158vd id__equ98azkkxj id__d4hd6m8onue id__4w17481ad2r id__nhaio6wefm id__0fz0hsefh44o id__q0he1gets1 id__49h9izuzimc id__z2okw66d5sm id__22knsywfwbn id__544mnapv3d6 id__lsb9p4ieq5q id__zrf7ufzh5pb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__d4hd6m8onue"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__rt1rfgndtm id__d5rjxu94j2r id__kywsyusm5n id__5479cp16twv id__bw4ao7j9fe7 id__xfbi7smqcph id__70o3tbo89cp id__n0e7lsw9tod id__c3nuec1z96c id__f5f7g6um4bw id__2haw52aemwr id__6rcbpe2qps5 id__iwslrbyoaok id__06hv34rtsub2 id__2756ccck7u1 id__nbdi02fg8qr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__xfbi7smqcph"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__il6nl90oye id__swp47frrws id__4qvij15cos3 id__e8akl2qltt id__92w9sf0q085 id__ui8horxwq2 id__1t35fkju62g id__jbm6rjbkpbn id__xz7hg9ax6e id__c1afknw8l2f id__8fs0rti3008 id__xx9bfigf468 id__qdaeqdao53 id__jldf1xm9kui id__8y2xyuejr7q id__8idf4h3uir5" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ui8horxwq2"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__nsm5xu6xbdd id__f1ijwufwbb id__qd9zzslko8p id__mp8nn93hpsf id__knmbdx8af1p id__yjm2mhj475 id__6h8j65x0pjh id__eg97q8zjogp id__p2bi0fptg1a id__3emim7moosa id__i1q1hjxd2fk id__yobazzbz5rn id__2jz5two4nce id__nwi7q1uxh4o id__9m9c2u82vle id__0nzgwgccnba" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__yjm2mhj475"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__afhhm9mc3u id__gxoxusozqrg id__ygjigbsedna id__0b460aw60v8j id__tbpo8dtsee id__78z9o55wo2w id__2heo3c074d9 id__fk29hhser5l id__i6hwto8rov id__v1st3uad6ar id__aydmcgg7f5k id__2syubwpjtsr id__g14qz7746um id__kxtns5ehixn id__bh5c4r99lbb id__h49wkksgyxv" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__78z9o55wo2w"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__v85rclujr9a id__o6nkb7iy7im id__99jl087fz4w id__mhnj9zzhew id__a9zv3ozjgti id__sdtxrezprys id__889iykmfjg9 id__bps9c8hv4tn id__m1czokdtc3a id__bincbxnrdnm id__shp8l0ut25d id__58yh6gdaado id__7fvcas1rw8f id__53pdplfgkp8 id__t41dj9t3pd id__yluxh6n7as" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__sdtxrezprys"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__new18ugy9fc id__tw9qaxde6ep id__hgebk7rubmn id__myhlar4qove id__h03qxlnvr4l id__d2gvdwioqcv id__f7pqflzf2w6 id__cktn0swofi id__dp3b8dkjz9h id__s0cmodh281 id__fabhvonin9g id__mgfim6bhy9 id__0h80u2rcdy2o id__2bob54ay91q id__73f5ljeyzl9 id__cgliipt2hht" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__d2gvdwioqcv"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__6p5t82bzr0x id__jsqt7pq1hf8 id__5194gnsrve3 id__x3txe9j8gj id__8a2waxsldt3 id__f9cxoso2z2h id__lorz7e0bh5 id__ubjtcticjcp id__bzvw8ta7v5g id__iseojz91cmn id__8dfm0033h07 id__8ucis4x7bvl id__9h5o2ictri9 id__bvm10q3zsre id__uc34gik61gf id__540muo694us" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__f9cxoso2z2h"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__zkqyst729o id__5bc8ni2odoc id__iysvzfgu9hp id__3at07lcmnri id__ipgjdwulwfl id__g8w411sq0so id__hgzjg78zsw id__y9eowt1ar1q id__f683iy8uql id__zwz208b5hq id__vk9f1425tt id__c8tta55wy2m id__1up22vnyzo4 id__4x0c32ovp4r id__h95c0zpfy8f id__eymxeyk881c" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__g8w411sq0so"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__83usjbfjkuu id__8pzg3dgbkaf id__1ami34mcbsp id__9mnzsj6aewn id__e26g6b7t215 id__lznq27ed8ja id__tr1dqky7amr id__f10vbw2vxow id__uybrf9ch22 id__bivf3jy8yeo id__bfgo3vruz2k id__cgsw2jidril id__oe3jgmg1lp id__tw8485497ek id__8s4psy1wxan id__5xp0v4xeqzx" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__lznq27ed8ja"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__bfgo3vruz2k"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__ucdpavdh1dr id__1btpcsxjhnd id__ilocvpy05wg id__sbnhn5eclce id__tizzquczwo id__hllc9gss1w id__azy40sjstrk id__h8ue59ow2tt id__6rrzdibk4t5 id__5u0sdzkvevt id__pis8p4zmb1 id__2c9rf3r9p1c id__vzc70ubo8m id__8cn95gm2pyl id__0j631ilclj98 id__dv6xyt6cg7n" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__hllc9gss1w"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__do5x5pd86m id__f9iwjhvhneq id__qn6vwcnyjfm id__nytdoa2b4d id__grs77dnr56 id__8cvsz38wdi2 id__h2vq7oqaev id__v6q6ww68lb id__cm4k7rughnt id__70n2xu4gist id__ij2anch8fj id__r0r9mojoa4g id__doirs7wamwg id__8sbxqi4xjjs id__m5trgi4nptc id__wbzxwnyyrde" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__8cvsz38wdi2"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__1qfz02z7yfd id__pwe0wrf3z3l id__34xeybsor8t id__35nh9r31nva id__g8vtu5deb4b id__m8me6ii176p id__t5b0v92co9 id__78oy13pcky7 id__decq6z9yuqv id__xdbbny7k65k id__y3rme7tjy3 id__auvmz73q78r id__pvx5vid290e id__rvqjxaq4rx id__vshclr5iry id__31a44sf17bj" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__m8me6ii176p"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__qhjc3tcn8y id__v8eb4s0n7se id__fz91u4zkq1 id__wv69ibrmppp id__x40jy2z6jaq id__bqs4fgu5xcg id__qogv6cxauv id__ufqrxzkb9f9 id__h8coc5asq8l id__n2xg5befdno id__dzvl3wfof2e id__f64qwrw72x9 id__q60ysl2lzpo id__xjyvky9nhs id__rg8frq1dhbs id__mtotvbfn6mr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__bqs4fgu5xcg"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__zbo0o0uyem id__de8t0kzhl0w id__yio6bldhym id__j0sy8zdhaoj id__o3g8l2tynj id__1yxq8y3bo5z id__880kidky34n id__zeeyvjwpup id__powpdp1acsp id__kerwheahmx id__dbusj1fcmmu id__btyir8rueuc id__4z9iix4goaq id__li6b78nwzw id__n7xsbg0tow id__nq6m6ezdyeq" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__1yxq8y3bo5z"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__xfrqk50eijo id__wg2kgpbg5cc id__gkp8v8jnguu id__rckqkyyyf28 id__wa4c0bszskg id__hny94sqyk3 id__xbp6h1fcn5a id__ojggb4pxff id__bo6gfnznnwe id__6p7q0ohnjip id__r15pi7zyk3m id__2le8hnakwex id__9x79mj95wch id__k5v8b76t74s id__alyymmgp965 id__9qr5fyehqmj" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__hny94sqyk3"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="13" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__btb6cjsa1yl id__yai4lb8tugj id__twj266tpeqb id__09mzljinb62 id__d8efhxotxwk id__t7bz7iw9zu id__1ycit8gqv83 id__4ogaavahbx8 id__2j7ll0hw8vz id__09vvzaa33xp id__h277duvg0qe id__jpdomb2bwj id__sxkm9y3s96 id__ym4rnt6j5a id__zvmzufse8x id__5zwdobp8x7q" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__t7bz7iw9zu"><div><div><div><div><a href="https://web.archive.org/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
