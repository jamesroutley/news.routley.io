<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-33658" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="29" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__hnw3rpbmzji id__ey958hh3jbq id__gxuphwkxipg id__mi4x99dmetq id__snn5nlksuu id__codkp9ipzmu id__k6lnpjksyla id__rcj2d9cx71o id__iruldvha3o id__rpbxzqr4ao id__5crzx6ipm8x id__68jcbc3f8xm id__blgnvadnysb id__3lo8f57r8q3 id__eo24ccxq4ie id__dmdnij6gkbt" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__codkp9ipzmu"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__5crzx6ipm8x"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__32jb8krebue id__a9d6qv52pvd id__77wa44095b3 id__ycikqngvp3g id__vj4tfyqhzoe id__e5fq8wscqli id__tsh5cmveiz id__6pjk81c1acn id__eg73g819j7j id__57x0s07nhvw id__3i50n5ra3qa id__n0rfdw88ys9 id__gscgsnmjdlg id__v74uu1ap25c id__9irxpj469m9 id__18orperqnwch" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__e5fq8wscqli"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__t3w4u264tli id__b2ewlfvq72l id__tms8ldeonn id__uq5yrjieoaq id__4kdwr9x65px id__5ijqni2zl2u id__8e9lqeg9d2 id__2ib6n46bxao id__z2tib2l112o id__v1sidp5qgib id__vwd1hren57n id__a3sg4npdynw id__m0j4d83jpx id__9fprpfjluhb id__srv1f4b3f7n id__ox74ma7im6" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5ijqni2zl2u"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__i4a2pq5jt3m id__7aw7l7i3ibp id__y1z62ayl3th id__5dzrfjcca7s id__4irrakalet id__3ozf2oan4ao id__7omyrntzznv id__nebj53ofxre id__1fyf7jqt9gc id__m0nqafdoi5 id__znx2kydpnx id__xk9l0ayv748 id__85f5qy6xhl8 id__rcak97id8ff id__xt48tzncm5 id__9s0glnhlmps" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__3ozf2oan4ao"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__bwtu69s24y6 id__63g2vc7ckjx id__vzhkftrs8u id__rgzptbq3ktl id__brcyoqmt0k4 id__rj4i17ei66g id__cr7xbdaly1l id__hae6rb2tmo id__4q9gos21zpj id__g3yvd7rhs8h id__c4tvvjvjiwq id__5xj1lw6ezbf id__061pkcjfmamq id__7p5tf5fd3t id__9e83bq6c4yg id__62wnreo2bvc" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__rj4i17ei66g"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__5h801cgfqjp id__1rgnc0jxzd1 id__34akggqblwi id__8pg82ec0bpd id__zjvkehi1o2i id__zlk7vfs29re id__3j63xmgh4ub id__8bvxxxnesf2 id__48b0zt7bwvg id__d00j03b54b9 id__ysncsa1alx id__228plfhmhp6 id__y2mvj4825bb id__8hr2jnqhry2 id__h4nflqetf3d id__nktlz176lth" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__zlk7vfs29re"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__hvg8pny8hzs id__cdz58r14rkq id__63oyht1fv4p id__4dly4ew00jp id__o52ozbyn11 id__9e8oavb01qa id__81dt090m0n8 id__pk5j6bke3p9 id__iud3ngqd5yr id__nhpoi47xizn id__eiktyhybzjp id__1lmemakghqx id__lswzqpuoucq id__pbefiuvw4le id__q5kj3s132y id__3bkgryhb2vr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__9e8oavb01qa"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__90poszg2n49 id__7ctr021jgay id__j2v1lt3o1u id__g0ungay7da id__kbcdpkcwnhb id__z5ywtt9y4p8 id__go4q93xgj5v id__pv2rg6a12va id__j4i554o5x4h id__8xkfwjru2hn id__kemztsiebe id__1yqxmaspof7 id__19fymww8p7x id__viqvnzh1crp id__ie0fv7j1ls8 id__kujxfpn6az" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__z5ywtt9y4p8"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__xk1arcxmb0i id__5y7xj60yb9b id__lgz96d125e id__zenc0cclqi id__50lx87kxlkl id__ppbtkgpawie id__hiy53wyhqx id__zoljmeg2yu id__61qoeit270k id__dnlei9dpppn id__gobyj7srp78 id__ifjjvjqks id__rmcx35xdpfe id__hmn309jcx4 id__cntw882x3p5 id__a8wbo7v9dei" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ppbtkgpawie"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__7btx6cn7ztu id__pduf76w8cll id__4bfss33vmx7 id__pzo90nau87 id__6rd6e5yq8r6 id__a1psy0ie3s id__vmhxq4dpg8g id__x540wcne3t9 id__q8xcx19ipg id__47k1uw695l9 id__52z1e7gdf8c id__76u8h2hbdnx id__j8mhugfjxei id__los0n7aqg8 id__igvvc56p0a id__ifm7lmpub5j" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__a1psy0ie3s"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__ccfmhwsoab id__g8w6xwngj2n id__unjd04aom7i id__ol6oi476vpb id__9pact6zd754 id__5w6ce3bjvqd id__lusu22pgwb id__ld32b23k1tc id__oqoy2avj31j id__l0tx0prldoj id__nnuct8ez1jd id__7yqs45kydpl id__sbyby92i08g id__w1wcghmnj8g id__capjo59fqbk id__r90dbnqggd" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5w6ce3bjvqd"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__jowtibgm9x id__viopkidv2s id__ewildpxvwr7 id__v7fk5m1cc59 id__163libnohw4 id__b13iz5m17fg id__4xme62w7x9l id__2cmjuiscid id__h2t4awkj24k id__evd9612wkon id__fyj4fh3c1iq id__pumxdxhekne id__q1e1qtp9s4d id__xxema6wr9gr id__1lggjyh0ylv id__kpy7u0gbzoj" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__b13iz5m17fg"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__etgtzdag9q id__hbq2gnpeyym id__89tp9xfhqey id__c9b7y9miwb id__syempz4kk5g id__3xendssr0kd id__6fy2u0yyn7x id__62kib5lo3q9 id__6x745mealz id__haqok6qep0b id__ecqaz0wjgok id__g5s3p0q3rgh id__ojqf00osrx id__wotnziigedb id__k6u2kdb90rf id__71kih3ux85f" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__3xendssr0kd"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__v5vh5qz6yjj id__y62lfiexxxj id__ed108xigm1o id__6ikyofv7aga id__2q065c001q8 id__vbeq50vsc2 id__7xvechbnp1k id__7cqtarz05lk id__0irtsgun8kvd id__5yklg79rrtc id__j603nixtsz id__xkanucrctm id__t9duuvdbh2o id__db6g415hojj id__t5cgea96nvk id__mp570lqxmz" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vbeq50vsc2"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__mn2pgc433tb id__khz8uok8d9 id__4hcdt57wng3 id__qkpvvnu8qq id__7ahrzkmx37 id__uj1x6rwxpl id__ag63mgjrva id__ohdnm7semt id__kc9fx2cnx4 id__xnobwypo8ai id__i6xyq4ftvz id__9zoj79c3zqv id__ks4rhm3bwdj id__1zueusqinmu id__2g8c6fdtz1y id__rc1r40wctv" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__uj1x6rwxpl"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__k61nk2f8p0p id__g745gobey1l id__lu9mxzwee2 id__6ldcs5zqpnn id__3j8o1ny8zok id__vlr3lncbs0d id__fj9vq90ylap id__e9vs06vux2r id__9opkzllxi3m id__sactsvipfib id__gnwx1ux14hr id__x0a47giwpkl id__gem7nyj4mm id__6ykn2zb0e7f id__ccdga2lrmlc id__38bylscl6x4" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vlr3lncbs0d"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__37wiolkptl7 id__5bvvh6mzpxv id__i40nd6pa2ck id__a8p5ekx80g id__2ako5zyhyxp id__p4vpv6q6agk id__coxc03x5qz9 id__d1dqlnihuc7 id__rcbb74wgx8 id__rnesm3n3jc8 id__dzdhdvc8ice id__uq88upulhf id__rkjvucxiwvr id__3nlr9wzakz9 id__9rpw5y663gi id__sna8ujumrp" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__p4vpv6q6agk"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__dzdhdvc8ice"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__l2q71lwa0v id__a5g3hy2olwg id__6eijoa7ssq4 id__p559ss1m78 id__ngszezrmzzi id__mb6zuodi8lc id__460z0vgttza id__8x0hvrlzwab id__p1od9528zs id__qa72yo9ojo id__owht57v9if id__kpez9t22jp id__aoy9cqze2g id__249ue58u3tg id__6eewekgt54l id__p0lkgwk7gsp" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__mb6zuodi8lc"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__099su63srvh3 id__qu9njkwf28 id__b0z9upernb id__jvvbxdku16h id__w9mshw3x2ce id__0ciatien6tm id__f56hm1xp5q id__3cfe1kl6r9k id__wx3y6vy9h4l id__1xrjptuxm22 id__ku35fb70x3 id__3e7crh6futq id__4zzl8t8x9eu id__17a5npbqgxz id__oemr9z37h2 id__erhlgq3jlxb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__0ciatien6tm"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__u6unqrw8298 id__pxjlzuwvcsi id__zsefduq1n2l id__mtonnbakt38 id__xbdgzxomaal id__mdho35d7d7k id__rt05hyejwec id__bfforwrwik id__da5iypd88g id__hpnvazjwl3f id__5ca86f4kw1x id__1e7ncubruj id__em7xavg6628 id__3i3xk0oqwo id__3byx07w88xs id__qqxdym15pgc" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__mdho35d7d7k"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__vteaoepoxq id__ga95i3jgyyv id__olm2ufg2g2 id__pa3m5b9yc2r id__uarq8x2zdlr id__okfvzcxiogb id__umc1u28k2ek id__8c1nkzk32go id__hkwdkdtidzu id__3w0dyrhklos id__gb9nhi2ct2d id__jmxtqc73vl id__ct9gxdk1oxh id__8rbleq2sj6b id__le8x4di3xi id__2no032uy2eh" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__okfvzcxiogb"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__cz3rsq247r id__ksrdvdflqi id__5vq34znr1cg id__g40z72kmlmh id__tacj7i2149 id__eykrm5sxs88 id__3bcm0493o62 id__ykmwougc2b id__cox6omyydj7 id__xhny6j0dyzm id__d93ooouc8vp id__cmd7sf4mok id__a9rkrynr5j id__ythapsyapra id__0svij1niqz5 id__yh3gm1c9lm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__eykrm5sxs88"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__2y9xsp9ngi6 id__6yc9zou88kv id__8g303pjbtch id__xzx1t6i1kj id__mrjifehn7s id__140odurl9x4p id__0ycr7teoxgn8 id__e80mxvtx9yb id__s00peb0h8en id__nz8x58nikk id__3m5hbyc36kq id__ipb3f1nrj9a id__enw8jb84dho id__r6teubkxkr id__6qi6soymbdx id__p0m0z3rbwkd" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__140odurl9x4p"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__ef2xj7zr3f id__o2y2s12rm3 id__ywym0j2dqti id__takxgo3jggg id__g96pav4sb0f id__qa2ensijmg id__j6ffxm3ygue id__so6d8iix7s id__gm0t533cedc id__rekai04j3eq id__9nh0kecwa26 id__tpjwxwwu6z id__hmzn3zz2s65 id__f8as88ghn3s id__5gi00i16red id__gv4lcoftwls" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__qa2ensijmg"><div><div><div><div><a href="https://www.youtube.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
