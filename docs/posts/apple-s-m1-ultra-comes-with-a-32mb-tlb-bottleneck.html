<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-39166" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="34" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__g3mh79ndg3v id__2md3ymfz6fq id__jzjgbh22pra id__d0m65724bm id__2pd339mvljd id__uwzqc118y5s id__ipx5ei53r8 id__w9u6lblrdo id__clt7upyrg7i id__wsqpmqv8gho id__85fz5hve1l5 id__g6t50kethr id__9btp40wt5gg id__axp5vao5c6c id__xlon1eb5fjc id__8py9r2sbibc" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__uwzqc118y5s"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__85fz5hve1l5"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__cnwznm9u3tr id__6bpa649ddhy id__ofu6sx1baqm id__1zr8akp8rul id__c93la0a8204 id__z7gmpsh5cw id__n20pbjxcke id__9tda2swvjj id__kjp62df7t8 id__6ijtinwjvss id__ylapnqzvj2k id__5fgwjuzk11d id__tfjc3oxfmdt id__gvwbpvszp0d id__r3u4o2q1o7q id__gt9lex7rmdr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__z7gmpsh5cw"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__w9w4msz4j2c id__1ertqzyqyjn id__xjuuyvrpv1 id__o70o9hr1us id__mbufqkeuetg id__vlcyd1jnyx id__vv7s1etrvvm id__lm74tbe9u78 id__opsz5m9ltah id__1npk238f6exh id__pk05kpav0o id__zkxwzj3otkp id__9njt5lszna id__ublgld9mpxe id__0bibmiglyk7g id__vrq4tq6w9d" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vlcyd1jnyx"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__eoxbsurevtw id__vooy7a4p3xo id__qpxf7jxlcw8 id__bczd1xiyq7 id__fcypov3ao6i id__uzjiex2k88p id__zwf5npu8rdb id__bme551cr6di id__3c62z0smaw3 id__nbyjfe2ljw id__tlsrs6uazyb id__v0ujg4c45z id__kf1e084p1kb id__lulqz45h3p id__sjdrvujlalm id__ot049natrnc" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__uzjiex2k88p"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__a734ouxcw55 id__1nqlqly5yqr id__l2p9lemenl id__qn09wap8nmf id__d98m3oo88tl id__dxyypl4axr id__gd22q4iwhwg id__2pkhck6468t id__quoryrk8rqs id__kolqyzg9ui7 id__1ns35y29rq7 id__de92vliczvw id__c89gphwqm8p id__mk47az7g0xi id__2lc4t3dra13 id__olsq5g5lhpa" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__dxyypl4axr"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__mhzu5mei7uk id__yxn3cy6y3y id__1wi67vw00pt id__s05elkzwdas id__3uckw9m7u0u id__2xoosdsjbx3 id__z0sntgjlix7 id__g8hnh3xkba5 id__6a305bix26p id__im8lvvs7nje id__8zedlzix8xu id__jaxulsu6sja id__9arz798mpao id__puy469ky0x id__g35zncdtdit id__7bju6f7r73v" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__2xoosdsjbx3"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__j3eki3txb8 id__rg4f7n9ulw id__hzklk9e2a9 id__ep8zns30qz5 id__wru6bqxk9o id__txnrmzx95l id__vkgj0yx3z0b id__ft5oxegj90e id__d6ibs9hfdck id__965wws8byyg id__rr4bdoka5js id__42w4v2ijoiv id__hluylmsczrm id__kwlw1xbxfhc id__cx779qlwwa id__t94zz63qo7f" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__txnrmzx95l"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__6owpxugi94 id__2xwy3dhyls3 id__ospcbpawbbt id__6k07v5zvuzj id__qtyo90noh1n id__ul4v4epxtuj id__u894zuxwsjp id__n2ibqhr164b id__pb74sfr3e7p id__3anthh7r9wh id__9je7s1tdf7m id__a4s3o3bc5p9 id__e2wyafuyh7b id__7taut81jm2b id__9b23is74baa id__bj65unhmlse" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ul4v4epxtuj"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__fpxhe2u40o id__4jtw5h6asqn id__ikwpzpn5d1 id__js5l2lnhmdn id__l8rtl5syv4 id__om14v07c7ns id__r5sm1l6d3xs id__aopmogp4h9r id__7jw31oqmvp6 id__3tr989l53ju id__eybah338y8 id__xlnk5ig1mb id__6emdu40ctiy id__60niyd6gfdb id__27ubeurokm1 id__5dsurkzcefe" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__om14v07c7ns"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__61kb1s5z4um id__a0yrknb5ayk id__tsgcko56fm8 id__din19ljfjlk id__9zdrk0ijnir id__26dcktbz2tli id__qzerqrpjpz id__w3doauexomn id__l8v26f9h1vb id__wzwe3bnypsc id__qda0dqatf0a id__4v3duo7b4ql id__vexedu2s2x id__l1jkpbj241 id__fa7iy3ynv3p id__38oiz90ogqm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__26dcktbz2tli"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__iejk6457n6 id__h9hi2z4xyyk id__rtxch1ufbad id__a6dg0l1wd id__95jae2t6eh9 id__9dd6lm7xd1q id__cq9ijjxj1xc id__jpx6k7pw3 id__boa5kf7nih8 id__r23bpajd27 id__z5xp4hvfygd id__x59uaz8gceb id__scovlya0d5c id__e54lr4babu8 id__4ur60moq9z7 id__qrxwsrv3tnk" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__9dd6lm7xd1q"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__1s7td9smx3eh id__7fo4ps056cq id__y1rm5v3qcn id__t1gvjr50qul id__3ztw6oe4vjk id__e6uchintvp4 id__hd5e3wd0znv id__hllg933tybc id__6n3q6pjom6a id__fgenkzg5yqj id__8ak3j92mr88 id__exmhp8tls08 id__hrycfymy89m id__vhje1b9w79b id__jdsnv5leba id__k5ezrzhk2pe" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__e6uchintvp4"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__etsdqtr9ab id__91mcnw19jqt id__axpy7t29hme id__qzz45zs4us id__lc77pxu7q7s id__jegl2kttg8e id__9gsvsjzb4us id__krqo2ihxb5h id__nkftolawrq id__od907dkggzj id__avfyczu4euh id__2hbskiwexjw id__bh2va759ny id__suroe4naweg id__9643y55o0p7 id__rxaqhmui73" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__jegl2kttg8e"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__lorl95588e id__5v4n0j425sv id__ruq8cdqv3fm id__mb868ibinr id__ulduehkxi2 id__wh58ve1gi87 id__wu5q8i1ywuf id__jdp5azaoqi id__jc17a7mtigg id__ey7kvyodagw id__d177rg5xclu id__cojmrk0i467 id__ozfeh8dpm6k id__bogzvqaeynf id__qdqjihlfpys id__5m7ban8aasb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__wh58ve1gi87"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__xv07fj06xs id__kyxzjgos1io id__dsqktjwt5nb id__7dxeevxmh4c id__h8c1nd1td5b id__gv0cx8opgr id__y4hnmz5v6gp id__vnar1m4p92 id__kkznp2u1zz9 id__wm1mmxkp1c id__nx3lc0is66 id__o888c2oi3we id__g8u5smnxo4 id__yzprvdjj9j id__ji8fi8hrrmm id__us1xose7qo" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__gv0cx8opgr"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__nq2zzm25g2s id__bn6yw4dvlgu id__60e6g033nzm id__9x72rm8nhu9 id__m33th5p9w3 id__o6okhqg726s id__b7pzbzxz82a id__9bz0wdi56od id__mzvy5yyycng id__b71yaq4jpmj id__z2xf5p9frc id__8z3j3wql7n9 id__9j1eomptv5 id__xj93ornyec id__67eu56o4qe id__efp3bfnfqqb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__o6okhqg726s"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__s0endustbbb id__q1gmvmx7q4 id__qrcyz9hjfz id__g7pbl1rmb0q id__dell8d6z9od id__njjoarf83pr id__22ctgiinqks id__jl7n207jswd id__ivg6c7irv0d id__fmg2r9mehaf id__uq8w5c1n8d id__ucsdk76e4q id__op9jv69zryg id__bm3ots32zlh id__2smlqliu7xh id__jab7mtc1zws" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__njjoarf83pr"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__uq8w5c1n8d"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__q6zodvbwwnf id__hg3p7ft7nda id__z1ej17mnt4 id__oo2qze1uold id__khp2mte21l id__50a8qvtt4jh id__mg7fqxwik59 id__wtja23key3f id__txhipz4crp id__yy5p4unrdae id__lilsamhuryh id__4g3fjby4ngc id__p1v4spsgzrp id__kjn8hxeyawg id__vha9kl271um id__wsbmhff9cak" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__50a8qvtt4jh"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__evyijezqdjw id__pqk8pnnwh97 id__i5uiq943i0a id__6mojs4wtltv id__m7bmvsffb1 id__2s0j95ble4j id__5onbo2hszv id__321t2s9d24r id__ag1o631j08c id__gze60rat1d9 id__62lmyp66ohv id__4k8d1t5923a id__gvwmp3jby6i id__s0m0u36ctwm id__h9oer6tsprv id__b0uhyfre8j5" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__2s0j95ble4j"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__8o8e51n5q1k id__end791mi44 id__6tswko6twsm id__6n7c9mb6jo id__dcz4ax451ql id__ig4offubfop id__n0nqwkqzod8 id__hw8xohbpw4t id__a3a1k70p6bj id__kzely5hossd id__iajleyveq6g id__olfgq17gecj id__qsblnh7rpw id__r8rfeh9csgm id__tekwozpq0g id__zjw40gu7mal" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ig4offubfop"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__o160dwzcb id__gbiel8u1f8 id__rawd9cikfor id__epggu6o5gp8 id__fa2r6bcofpb id__q2jxwd9l96k id__63027gctg0w id__xnh5knn6ha id__kjouayhnnnq id__k1xmxnicj4b id__3jndzqhf5a6 id__gkjh3c98dob id__tvp7qrk6w4 id__uauk22o5gs id__uh6wxrvldjb id__tzal0vb6t7" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__q2jxwd9l96k"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__ikp2d91tbu id__nvy25jkaxk id__ixl5d0nxzwb id__8459ln4471e id__e0yunkxgo3j id__jxblq2lcnen id__7xilo2oeblq id__z6mb9vmfv69 id__d7mxjt5qm2b id__oyslijvn86 id__uppcsas4x4c id__cdxkhd4vjcj id__l6fmj7gkda id__zw5uuz48q7 id__desjbues87 id__ror147kfv9" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__jxblq2lcnen"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="4" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__f6567gmipwr id__ibhe7i2tej id__wotnmo6fymb id__77cj9i8p1jb id__71ff5zz5m43 id__jpkslzoh41 id__hr33ylkxe9w id__w6rkymjtg9g id__cy3881lpt3 id__4b54ywgr65d id__3qc4j0slax3 id__zeoe42epr id__yc34hjqfyu id__tgmhmlfh7s id__azcpg9tcicg id__0wtmesmg4dl" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__jpkslzoh41"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__ciwxyfkh5n7 id__nlvlflymner id__866hu8qk2vx id__8o9b77g1ndy id__cdq2g16ot2 id__k67ye3orrkc id__me29giwg8g8 id__jmy1hk58s0b id__v1cgi9v259 id__vq1ldsh61js id__35cdpipkz03 id__1qbby121lu4 id__ac55e1oak46 id__bgtz95vg299 id__kgilqsr7s id__u7jrfhwd6t" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__k67ye3orrkc"><div><div><div><div><a href="https://www.finartcialist.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
