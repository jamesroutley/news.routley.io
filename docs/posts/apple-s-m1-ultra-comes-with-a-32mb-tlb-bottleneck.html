<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-39021" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="28" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__ju8idlk18jr id__i2t6secsggd id__68i8qpvdznu id__xjfzyy9qarm id__hjxd2uxb22b id__rnflaho7ef id__w7qjenwhjjd id__t3f0ktuotq id__atlzx22cyx id__j5auh4jjvf id__kkx2888oqc id__gl93bhe37b9 id__f2maulxskqa id__a069fhznkmu id__7ux9ltgngsk id__sz70tsmxt8f" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__rnflaho7ef"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__kkx2888oqc"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__2t1kv6jc6h1 id__g3acz6qwqk id__osennin901 id__cxcbupl5nv6 id__td6ttkpy93 id__806gx6aidr id__auetiq9o965 id__gyksnwd113 id__kw7i59r2088 id__orejcqrptu id__xrc26sa1p8 id__u19ciyj6m9 id__gkvsf8p19mh id__vp937m8nm9 id__ga0gmtngcc id__hn0rfgphps6" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__806gx6aidr"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__scu5g2ppizq id__1pebhyrbp12 id__ipd9kx0sfz id__5ocftuniq6h id__0jynhqy7riau id__nqyyvaxakx id__9ge7p8mawy6 id__xvjz6igvlva id__3pf4ym1v34y id__rci7338wcs id__9u9qhfyqpv id__9clqqe1ib7e id__10vl9nybokq id__e1kgplkhne9 id__bojckjyoytc id__pvc3bbic7t" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__nqyyvaxakx"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__s8vbn7er8e id__4xyslas43h id__5ovokw6a3ay id__npffeec1zx id__ra1oae3a6x id__qqfafcha8yc id__j2dupqo7ez id__7c5x5t6oami id__sw4pvuqfnsd id__rq9e81059l id__ifuabv5mj7 id__yh8ereqsw2 id__nnihst36yr id__9aw0v3t4uhq id__3cpmzbzkvwu id__0hyhf2vrgckb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__qqfafcha8yc"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__s3q67ssl93 id__4oy3h6fnm4l id__0wgx4jrryvvk id__zet0lho7as id__hrq8dsmw11n id__b1dedyels36 id__xtk1oz3g0n id__3x93htph8eq id__woux25zirwk id__qd5h9xx5wtq id__zfx1kogbnvj id__mx6g15je608 id__h6chxnsf3n id__tdj28y7it4e id__3nav14jiqux id__tqk4lymsta" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__b1dedyels36"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__sltosrsj098 id__pnqrw0u8mhs id__ye7mfdxzgxj id__8e9tn7jlapk id__2w0p3co0kbr id__wkmuai5q27 id__br9xk0tf30c id__sgirhyd2vw id__3f9e2p6oye8 id__xbuc5n52l8 id__bq5pmko5lhg id__tkjpsbmgqlm id__dgh4bqo0qtw id__htkb4l7brs8 id__fjusg6tvzom id__zre9awfema" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__wkmuai5q27"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__mzuflnr4r7l id__92dx25rhfcb id__1znpls3n181 id__qwgslveg02g id__km5tkbtjo9 id__gfu5xutdjfl id__we7dc7r1gdg id__g68kurcbzg9 id__dookm1hohuf id__74niiqwe26c id__60vdym3257w id__bepxe0qcbt4 id__7yhb0c0nm6 id__u2gj7tnfe59 id__gczyqoy7imn id__epj6resu6kb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__gfu5xutdjfl"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__0nj9xc985zgp id__c8xad9ob3qg id__i58jitc90q id__rvdm7pxabbm id__yo18xlwnw0i id__2j4n3e2yfht id__nkxq73hyt2 id__7pozh3pghew id__n63sdcxd1l id__wyg87pdep2p id__8yx9pjdjmug id__kea9ykuiu1 id__3xkfszx2bb8 id__f4d8wvgkf4 id__rzc7a3c7mb8 id__snlsqqx6knb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__2j4n3e2yfht"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__tqwwho89cj9 id__63o9oslxqo5 id__93yol4kfx0b id__u84hkjrzddm id__15drhlielec id__gsail74gro id__qe76hfxwnq id__9cmxvggg3kq id__7u6n1yrhmrw id__az4ux81yk8o id__l62hj8nv2td id__qavunu2d1te id__2v7ns9nbiat id__av7ea3934lj id__r01f6wnbux id__42i5yb92ar2" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__gsail74gro"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__ogmufobzi9 id__iv7srsmt7uo id__v0jf0vh6hi id__w1glo8js9c id__bwnj7mhelh8 id__5pq8plf64va id__oymf8a4dx1p id__9ylyfm71bpe id__32qs1140b3b id__8mf2kcp4gkr id__kmv4rymobde id__t9ee9ny3z2 id__m9jn90rnba id__smq45r93fd id__a4p9urlu78g id__o37jjem7an" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5pq8plf64va"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__d1qlkgddx3o id__363ggzhjzx id__v9eqk7rxmp8 id__47fh13fx6zm id__sup5hifbos id__kueve6imhsn id__5t8wossiin7 id__sjrptw73tbe id__3ga1kifkos7 id__ckrimt283e id__coyw1kfear6 id__4zc2tooyc5t id__742t5l1tbtn id__2dpl8l8twvt id__v5i1cuoh5qd id__f23mmv56ww7" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__kueve6imhsn"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__u5bn502pb88 id__uim1zg2namr id__51glvig83gw id__q6uh3la8naj id__p77s0pwy9ie id__dgxww34y3i5 id__isz9br09uxl id__zxk55rb944i id__y613cpst5t id__3c3qs1db8v2 id__wj8di1kgyrg id__8yitmndpi2n id__i9i93bg84uo id__n0mrkleeg6 id__cdk7lez0d5h id__i6dod4op5ti" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__dgxww34y3i5"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__gprc28bzjy id__uf54ofs5pc id__zy6n9vscnuh id__c0y7x5bo91 id__7mudhde2ml9 id__4zcr0z25n2 id__okff7xqpam id__xc29mhrgd1 id__q78xp93eq1 id__ipq08e9ljvh id__y95fk5re7ms id__ibpnhtdp97 id__sv79ahiv5f id__7i5ergq3yce id__hvxhj3g3qno id__84e8x04ynwd" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__4zcr0z25n2"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__9owzqndthy9 id__0w1ssjv7tuhf id__5m677ncc0rp id__os5x3hdqhtk id__jdayba91j9k id__9mezawi99fb id__7gaezac5zm5 id__dlvn7axdeag id__mikpsb3turn id__ak502fe60zo id__h0ldek10x4o id__0a5iwizv3bvk id__zd9zcdv0sig id__ipweb9vh8g id__36vqdk9g52i id__2pkhxqzz4un" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__9mezawi99fb"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__27b6z4kj5nk id__4yxx6xy53a7 id__84japdi1ij7 id__6wbu4sdmlgc id__2wmj1mh4sik id__41uw87ozs7f id__x56o8imjcd id__pirvzsyqv9a id__11symatnf21 id__lan9rwyl7 id__hqxces3tt8w id__2h713wwovf4 id__25m1buqm3jz id__g3xlge0thd4 id__db76sunpwfv id__yrb9h8kpzfe" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__41uw87ozs7f"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__yf5psn1rlrq id__lggsdw2gzma id__t7egfygic9q id__xciy1wbnz4 id__q1l2iixwyrm id__0f9javbvmcw id__930y2sdbkyr id__lhcspf0fkx id__w62189lzf8r id__4hi0ykyiufp id__6qk3efpdlar id__z1rs9l76zs id__bqqta3szguj id__vlqi6m9dldh id__5zwbyp8bofj id__sqqmc3799" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__0f9javbvmcw"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__wx7b0sx93j id__rlva1tn2qt id__znuwdzscbj9 id__pg59kcvrvw id__auf4q3o885c id__f9znpjzrsyq id__jxaag9nmiz id__w8r7nczukmq id__qftwgn9ibfq id__dmga63oldgs id__vjbju78wkpg id__vbx0syizsjo id__9sl92a0x7hp id__xiyssthkje8 id__8zqwudnumat id__9fzodq1oa8w" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__f9znpjzrsyq"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__vjbju78wkpg"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__x5oyu3zqa8 id__iwnbt1cp24i id__1jcdiai42uz id__t9plcejyyl8 id__rd4m8lzqydg id__qa1f6mbyvop id__nqfg4fsp09 id__jqktvhsjofs id__3xqrjq8xs9 id__6zzv809mxfg id__d84xd4wmu1s id__ehoq4l97icn id__0uwwq5mbxbb id__bzyjrd0lurb id__qodgcrkrgse id__q3v9ndycweb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__qa1f6mbyvop"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__9a3n41kvy2u id__z1dsem9gv6 id__aytg3cb0mv9 id__rgp51yyhew id__d8hff2gllf id__n7sfnnpci2f id__i0z1jck6kps id__o4njixm5t7 id__eq2zpgfiua8 id__p4zz9rjeh1c id__lopy7tiebx id__aimen6mvzv id__ostq25jsk9 id__h6q3yay8r9m id__1bhoimb42zd id__tj48rw9r2x" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__n7sfnnpci2f"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__w3e77pvx4id id__ka6f3jeeo0i id__rli5r3mib4r id__6grgeyaefb7 id__qiv7okulcxr id__bqwak3gykdj id__okhliq510hb id__f1jjwr4rokw id__6cxnregeah id__qx5p06g8co id__nn8b22p5olf id__gs6k7w2f3bv id__kz74d8gw53r id__pa1ntwx3v2k id__24zbk6mv9hr id__fsbixx3lyur" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__bqwak3gykdj"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__e346i4ae5vj id__ozhmu9ygur8 id__q5j8h98pme9 id__peoj0pj6v9 id__01tjvjak15c9 id__ntxqvjrc7sd id__z4hth27bbht id__grrdzp9xeqj id__p5v8e7io0tb id__38wmu5hquf3 id__jgt13viyvra id__nfdszx0g4h id__y32bi0utgqr id__x5mpstli6y id__4gpvc3qd4am id__ql8rbg1eld" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ntxqvjrc7sd"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__9i33uurarlw id__za452sw7iae id__fwa0vgadzqk id__k90lw8sw97 id__a4c45csrclf id__jqd4j9p2ev id__lzdad2p4nj id__x1v4wonoyyf id__appb63xqkuj id__dnfy4ib1ds9 id__9qkqqv9jjmj id__o5s47yudiki id__65rgfxo6g2 id__6685jm3v49p id__7qy379b5bs id__y9y1caiwm4p" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__jqd4j9p2ev"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__svr6w18x78 id__r4y1okfabu id__qkm2g2o251 id__7bl8rd9umlh id__lmamu628w8i id__n0wx59tz4mq id__mp5wedfkcxp id__0l1jhrbs1eb id__tmp12rxi06f id__j1tas5m6fed id__lytj0ubbbyk id__w0f7gg0kdu8 id__b11l8rjjq3u id__tbsbh7je6no id__ooinurolnsq id__e834reudf9" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__n0wx59tz4mq"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__pimh4zhc7ok id__6h3nwzw3ruh id__1acbzt7am2r id__mn7pm5ncfy id__u5wbbnwwvaj id__86yseakiwl5 id__dc84otazd9c id__wxtw46xatjm id__d4zotvp9kbw id__yyimosptgza id__k3gjehhdv6b id__oj0ptvgvdi id__gtgctdyyec id__nevp2q4omf id__gpsr94rjn0i id__my0f06zntlb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__86yseakiwl5"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
