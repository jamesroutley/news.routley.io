<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-50272" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="41" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__vtyq72f4xcl id__rhqck71y7ln id__hyhnr10vcvo id__kxo357zs63 id__gblschozpbd id__2zbucbwh1fq id__c7gr4mg21mo id__l86ri3lupi id__wpq7yagetrf id__0wmcba98b60l id__bwxt8q6nm35 id__zz1x9farj2 id__2wps81l3y6j id__06pi3s7xfpm2 id__n0skt0yqslq id__3o3ccxc5q0q" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__2zbucbwh1fq"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__bwxt8q6nm35"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__iwcnhjhls9b id__443xm8ro5pl id__hhposjj6ch4 id__hcvzdzzvhlb id__hyz2xseq2dq id__ewdgu31adm id__rkoh3h3pr4m id__svi7nx1jqc id__3n64ujjrk7x id__2luow78wpaz id__9ldsrm3i86m id__p24cejddq6h id__13354hhlyhu id__joo37yypcp id__jbn1tnjx5us id__20h1c16dtpo" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ewdgu31adm"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__vnnyxk230co id__o0irjualxis id__oc0ig32d6p id__ngl5rhhk9bf id__juxj4oif2z id__liyo8rqxqk id__jrlrenz4i5 id__8f0yc5ozlz id__ukrzcblakf id__9tjosti2zb9 id__e72saaw7xzr id__w2qqbtuhk89 id__1ql2cmdt752i id__h251febu54q id__ynea6dd86ik id__gejxs8pdn0e" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__liyo8rqxqk"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__r463rnckhw id__5mo71x67j8 id__gvcin69l5bk id__s8ctiw7ghm id__z21gxmd1s1o id__4e5gcckskgi id__jubrg4cvber id__5heg8utboj id__ddtcgr53odo id__91m3hnucjot id__katxlpc26f id__yxmntpprj6 id__wzlr2wr3k49 id__nsqpabv58vg id__8gjc109l3wc id__90ogul5d8me" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__4e5gcckskgi"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__xqzmdi66g0r id__8pu5gfgtocc id__90gsaco7d45 id__hafa1g8ao5 id__b3qbfm69het id__dvknef8jj6i id__wxnpntmjom id__x43ljtw9p5 id__4zvs70cprd7 id__h4n03cej7h id__k38vz06euc id__42gicocxte id__cyz5fqvksut id__1avb28drd0i id__57qr6ax4c57 id__zpl8k9i2zxb" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__dvknef8jj6i"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__2uizswt954f id__kutcihcssqn id__3k6m23n5dqs id__bjxothcon25 id__wvufcu6othk id__hv4bcyj06xp id__rijlrsdvb8r id__0ordfa7bh2jb id__r3nwaurupwk id__dofxzrxfw2a id__htfy21c324s id__3fe2y6x7car id__mkwwe95rfyi id__bixjmudeyeb id__399synabfvp id__fm2xcxw5tow" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__hv4bcyj06xp"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__t592ukmr4gm id__6kykqj44b9f id__dasciehvyq id__9u9o5byfbgj id__l8fog3wdahs id__lys2iuj54nd id__a7a0tthvkla id__l2lxnk3sdd id__0gyhb22gk6mw id__udkkjrykaam id__20xcnvve62t id__3kh2zct8c5e id__75rvzb1lano id__m8hq3xh25n id__j32x0ke4k2f id__ep1rvgqq4rs" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__lys2iuj54nd"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__w409viq7l4 id__roankycwefp id__3nqwdl2njpr id__n5e0i9kmp5e id__1vrig0dbpuf id__xk8qsqwb8h id__ip62f7vpd1 id__snastv569 id__tlzujwwvv7s id__pmk1g0q5esl id__tik95yhgatn id__ironnswyper id__gnjzv86txzb id__hg2njvr67ml id__1iq9hvrik7e id__letkfzcmrdd" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__xk8qsqwb8h"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__lofh5tkj1 id__4rqaiz486mj id__a4nl5vrce59 id__napb80d2ko id__iw4my7ax34 id__vawrtmam27 id__jjbt5jji23p id__d6jkbhrlpia id__1vxq3ngx3lb id__3gtgz8aj02k id__o6b1ddlq7k id__3aymhiej27r id__8u1bceqj0v8 id__vsnawihiade id__7w7yywz0fcx id__ggufeo0346" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__vawrtmam27"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__1upkwwih3cy id__m1fsn7k3urm id__vb7vme6f78 id__1887v0nnqe1 id__gnfpdnsuhrb id__j7znjnhb2u id__i4e645paz4e id__y9kysjueczh id__tu6rkfszd2 id__55ywktt8ex3 id__uzh0pmkensf id__4y6hrt9bnfw id__tjjmehvvvy id__50m8f0luwn id__zooluof04d8 id__jw7kjqr8km" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__j7znjnhb2u"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__zz18umbns1p id__y2ocd5po29d id__r69wbvji5u id__gvsv4116rw id__97dyqqkc4h8 id__mzbn44uts7s id__6rajl1o4xcc id__nwg2f7zp02h id__8um6kd9yt8 id__1v5iyl722p4 id__q7xt6282v09 id__6q5nqbnnenh id__fr5q1wz9qdh id__rxv3kadn858 id__o4kz8see6l9 id__12a4ytyxg2ba" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__mzbn44uts7s"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__gmx2f74xjpo id__kg5ceaxlgc9 id__yz7pi8n8bt id__t18k74xcpmg id__71um6agzbbu id__h3pwe56r5e9 id__v6oim5327l id__zkkeywjhep id__rsrckqx99b id__1k2d4y04v9w id__l6sp8c436cl id__hnma303fq35 id__cqqz7tmrsg8 id__tzl68yv80q id__vuipn0o6qqb id__5xbg150hkv8" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__h3pwe56r5e9"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__kpk2334ozhc id__466wa3fsayp id__rangya8s1jp id__wwzkyatpbz id__e22r24u26j6 id__p9e8qd7c04 id__rygmcg1cy2k id__xglbg9ucng id__6md656k3t84 id__zg7grav0h9 id__bu2jxulvdx5 id__1x61ae8vxr1 id__870t49i8xwf id__7jc5m5gda7x id__lh1816c68n id__ht3lhs0vyxq" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__p9e8qd7c04"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__bow5p7sj80s id__0g8z7s61d5lu id__1ixupax6w9f id__4ckyzfvcf1v id__ffjol5hau6d id__oyjuwiqo5go id__03iyoj1j1ugf id__7bfxlexxb8u id__etzy52oefgn id__nzd8szi581 id__qfgkw61kd7e id__6sr5vuty5cv id__09xakblxbrya id__s61vl2oztnl id__9b3q7krauyl id__2zbwxblsglc" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__oyjuwiqo5go"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__8z7ssyi1mgb id__qpt79or3weo id__svov2mmyu0j id__ttt4oz8nwtk id__gmcy6lhoqge id__5ic0cpn9kea id__gcgerr6bw2r id__ohay8hl1m0n id__rni1kmo4dym id__hy3c7km9qnj id__futh9o6qvjv id__sgqjozi5zv id__axqvb2v8cgu id__q6guzuh6d2e id__a9mnxsbj2yc id__d7c5dhk5fgf" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5ic0cpn9kea"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__uqeotioo2uc id__2wmymgg05f6 id__ju5xrqso8r8 id__x5zratt3tcn id__apym8th2lh id__1jj9xlrb62k id__zy1von5ziq id__dw8mcgzxgp6 id__q6dp3jueuno id__l7nnbtpwrsr id__4j1927a5cq id__gkg7fwd3vos id__l2z92ohf9pj id__xd1nn81eshg id__wd4bqc590ve id__us6lwtu9ry" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__1jj9xlrb62k"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__071urkbsx44r id__5ddwdjvbn5r id__2mvaeoqfzrx id__osh4nthoka id__whyjfedfql9 id__0m9g7xve3lth id__d0xipeityxf id__y2hiwhyj1tr id__y4u56qbc14s id__jjg2dsg9ft9 id__swchgfuce9g id__qvf5isp7cyo id__cjwncr1omrq id__wsuyh8xm1i id__q5s1yp25km id__21uo71c8ont" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__0m9g7xve3lth"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__swchgfuce9g"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__wxv9ox94u8a id__ir6wtowps4o id__q16cn6aunh id__adxjk9ip6y id__3s3araymihs id__h1pqo95kty id__o79ep0mx7ec id__8a4ye1qm9aa id__ii7eg847zu id__3zftcxp08sp id__jm7is0t6sb id__pbsv8pisq5e id__1q4ysfns2it id__kpnxlbr4v9 id__hd62p0lll44 id__bzu7e7dcggs" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__h1pqo95kty"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__v7stmou5k8r id__4y8cbr88p2k id__knux8sfbhj id__t8sew50rocq id__aqk4afzu1yu id__sj7watw4sqq id__tfzn5o5w608 id__8ucr3w3txme id__rsum3wy89yc id__mpis9pfazf id__bw7e6vnlii id__foq5nussvu id__zuntqb4foi9 id__nlghjrrsmse id__s0b0jsjvd3 id__f21wddzvvxd" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__sj7watw4sqq"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__uf3t0sfw03q id__ewdpfy4t1e id__7mmg8gzygxm id__p4vvk3c8b id__ikhk5nfwdq id__u9e4fvr5h4m id__bprhsjp58d9 id__3pgf99r2w3l id__z4xn4i3wmje id__vivdc5d1dx8 id__b6jrzrvzhak id__3y8e81f4u22 id__ozj0clai8k id__uu9ajg4glv id__x6zxn9bdz7l id__bhaivpx1hci" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__u9e4fvr5h4m"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__z36j3ceor2 id__kv7322s522 id__sdqcdy71j id__1yhat2vcfkn id__65tqduyji32 id__pm88ydla4wc id__pvvuqvz5r8i id__sm54ccudmlb id__fgfqafk9td id__nubdz8k6czs id__00bsqba7rt6c8 id__b6vyegous09 id__dvtmxm2jq6a id__8pycu2e5kv id__18bzoxlu44q id__spm8unh5y8" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__pm88ydla4wc"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__q87yyqh599 id__8wzeg2g492g id__mnaks9e6rv id__qvgaot5klah id__keuq7nih33 id__ih6nc40pwkp id__tbewckybf9 id__5x65rk5ag98 id__razel6tgjml id__lxrafjv2vw id__9fs0r2q1u1k id__julslfcqk2b id__rd09wu26olm id__1b99uqm6z8z id__49vg78avvre id__yytz1nvm68r" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ih6nc40pwkp"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="5" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__lzjq3wcnbt id__c5c3ci1a809 id__ca79rz67ouq id__165li8yx4te id__e1u1431lr8i id__g8jedk9tl4e id__6kljpyhe4e9 id__68wpq60sedm id__m2qhy860sg id__yz85vxjc9u id__zwvkx0obe2 id__mfifsvh9hk id__of8ettspwo9 id__u5bzcbje1lo id__ukv0nm1rw6 id__tsnqvkwtvz" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__g8jedk9tl4e"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__gdz2msspd2r id__ilboxj1k2z9 id__179bgiz5n3e id__mwa9nxr033 id__x47jx2cnar id__3kwa4ycrn8a id__bybtrwwvwv id__vwsbln8ye5 id__085crqy663gp id__t5y2dwhtlc9 id__on7id7jszp id__iz8cnrpd09j id__8nnajped512 id__l3zldzx3oi id__6rye86i1lwo id__1yymbm3qlg1" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__3kwa4ycrn8a"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
