<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/VadimYuryev/status/1514295682777059329">Original</a>
    <h1>Apple&#39;s M1 Ultra comes with a 32MB TLB bottleneck</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-69588" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295682777059329" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="38" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:19.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:19.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="mainEntityOfPage"/><div><article aria-labelledby="id__r18m22yamiq id__0n62ot93hiwh id__4w3p0v9j1z3 id__6tvevw3whhr id__axbjbdrmgma id__3v36y0qktrl id__9kswsm4g0ht id__rw4g9piemh id__bl1066qdnyr id__ieli6x8xom id__ekpdvtznat8 id__v3wxa5rxxm id__ulhpfy7o1x id__z08g07dj5c id__7gt3w9gk1n6 id__yebtcma18aq" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__3v36y0qktrl"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__ekpdvtznat8"><p><span>Exclusive: Apple&#39;s M1 family of chips comes with a design limitation that was overlooked by Apple engineers when they started working on the chips 5-7 years ago. 

The bottleneck is the 32MB TLB. Thank you to </span></p><p><span> for the help in explaining how it works.

Let me explain.. </span><span>ðŸ§µ</span></p></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295684844830724" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295682777059329" itemprop="isPartOf"/><div><article aria-labelledby="id__q0azz6g7pve id__987pciu1rs9 id__7p8suyzoq8e id__c2spu6ick5m id__iovpqdsjb9h id__k6xav1gioag id__my39gqkncqs id__xozr0czmxa id__xapmehw100f id__6xico6rp76n id__1x8noeh3tvx id__1wz1innfa7z id__ax5d16fyilc id__yp5kptlirxh id__qfxcgq6autq id__8d191e1rsg5" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__k6xav1gioag"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Problem: Apple shows that the M1 Ultra GPU can use up to 105W of power. However, the highest we could ever get it to reach was around 86W.

No, the Mac Studio cooling wasn&#39;t a problem because the GPU stayed cool, around 55-58Â°C compared to in the past when Apple allowed 100Â°C.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295686589677569" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:20.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:20.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295684844830724" itemprop="isPartOf"/><div><article aria-labelledby="id__rx0mtk6icuh id__gmx7mv5vqv8 id__sljw1bq3v4 id__w4qv3ljy6np id__wuzxc11pimi id__kjye5ad5ddk id__fu0zt7w2fuu id__fpryk7tk3 id__j6uesjh0clq id__imbf9gulxs id__7bfd8w16b5n id__4p5fm8ov5kv id__pl2lhnlrbu id__37a2p2mj85c id__tx4qot1b1q id__c1lu5521dn7" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__kjye5ad5ddk"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This makes it pretty clear that the Mac Studio cooling system is OVERKILL in most apps, which means that there was a disconnect between Apple&#39;s Mac Studio cooling system engineers and the M1 Ultra chip designers/engineers. Something has gone terribly wrong in terms of chip perf.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295688326103040" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295686589677569" itemprop="isPartOf"/><div><article aria-labelledby="id__kbb2c7dj9j id__miw2t0vfwzc id__xs6krn839fj id__s35kjn5xsg id__d9dgiwy3c3p id__q0gecmz294h id__jfiwo83p60h id__gk0dvpa3vqj id__8csw0okfiby id__o8ki6je685s id__xfub92a0lgi id__w4zbdgp2ny id__pe7ayqtgpye id__gws343mgrkj id__h9y4weyyeyq id__5brj8nbf2pr" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__q0gecmz294h"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Culprit: Each cluster of GPU cores within an M1/M1 Pro/M1 Max/M1 Ultra chip comes with a 32MB TLB or Transaction Lookaside Buffer, which is a memory cache that stores the recent translations of virtual memory to physical memory, used to reduce user memory location access time.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295690037383169" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295688326103040" itemprop="isPartOf"/><div><article aria-labelledby="id__4nskaejqs6x id__6iflpmy0sbf id__4g65jndcfzh id__3bd5dmwd2rd id__ipue6eede2 id__66e2gykkdt id__4sdg0vbyqc id__9selj23ml5g id__smdpwkryjin id__8hr360bt0ln id__cgmj6tpzomu id__byehscduvbo id__56ddudcyqhl id__nka7lc907la id__69u8qm9h5cx id__3w4lv2ol0le" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__66e2gykkdt"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;If an application has not been optimized for the M1 GPU architecture&#39;s tile memory, (not just Metal optimized) then every read/write needs to go all the way out to system memory. If the GPU compute task is issuing MANY little reads, then this will saturate the TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295691874484227" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:21.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:21.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295690037383169" itemprop="isPartOf"/><div><article aria-labelledby="id__xcijoly2r8p id__e8wq5n4jipd id__6tgjzyh8fhm id__rd4c52t0mjk id__cn8w2anxu06 id__0w7kw332wgsk id__xvp53gi0ljq id__gh16nowp8je id__esblu4kkeg id__3lqh5gw9me3 id__p025bnhpym id__2xcovm6lbcz id__kyud3e71gdl id__qpo6ovvczeq id__71yu82ccz4q id__r836du6ilgo" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__0w7kw332wgsk"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The issue is if GPU data hits the TLB and the page table being read/written to is not loaded, then that entire thread group on the GPU needs to pause while the page table is loaded into the TLB. If your application is using MANY reads/writes per second, this results in...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295693581586434" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295691874484227" itemprop="isPartOf"/><div><article aria-labelledby="id__bgtr2mnlwb id__sry3yqlcbv id__kjxjtgkugbf id__pk6sa6aec7 id__yuf78s3zbd id__g67n4zdtf9t id__ut9e1bnlyv id__1jkrpel5x5q id__2f94j3om56v id__90xcbr4st2 id__wrzeyo4nib id__vjo64m3ybba id__wvcqvj6u3qn id__7domlfhwzr5 id__tbt869rww8s id__y3jeb3kbcvm" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__g67n4zdtf9t"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...a lot of STALLED GPU thread groups. Unlike a CPU, when a GPU is waiting for data, it can&#39;t just switch to work on something else. So the GPU sits there and waits for the TLB buffer to clear in order to get more work to process.&#34; This is why we only saw 86W peak GPU usage...</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295695297064962" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:22.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:22.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295693581586434" itemprop="isPartOf"/><div><article aria-labelledby="id__5xb3z2crkfv id__doc8d4enw6 id__rb6rcmipdfo id__u0y524z4qo id__edbkgxn8b2m id__5ui4mxxdjg8 id__1oxgbctfi27 id__fe0r1l64azk id__autcz4i1c16 id__4knzkxyqp7f id__o98v5hn0q5n id__zmfi41yiwjg id__7tnwajer3g id__0r4124qbo63 id__3clnup7kj3x id__wz51siacep" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5ui4mxxdjg8"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>..in an app that was considered to be decently optimized. However, for apps that CLAIM to support Apple Silicon support but have NOT been rewritten to take advantage of Apple&#39;s TBDR tile memory system, they will be severely limited by the 32MB TLB if there are many reads/writes.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295697020887044" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295695297064962" itemprop="isPartOf"/><div><article aria-labelledby="id__ot8zw6dl8ek id__kgihi5puk1d id__1sk4rwa50ni id__x38lgpkc08 id__hfswk4sit4w id__e0t0tandjp6 id__htiagzppird id__v4ugup3loyq id__uowqqud4c7 id__0wctq61iq0hc id__ba3l55py81g id__35x7mi4dz7q id__q9gzl4sj2jd id__eyp5psziriw id__elffk27ab75 id__lmc52e290mj" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__e0t0tandjp6"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The problem is that ALMOST ALL apps out there haven&#39;t been optimized for Apple&#39;s TBDR tile memory system. Many software developers simply get it to work using the traditional TBIR model and call it good to go, being unaware of the 32MB TLB limitation that bottlenecks performance.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295698736377858" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295697020887044" itemprop="isPartOf"/><div><article aria-labelledby="id__psbk507dmh8 id__35kd43m99c7 id__gemp27z1v9f id__9eyao82el6a id__8711m0md8xq id__xt930d4b5re id__2lribkv6le id__m3t3nkaqhq id__mkil3ln5hk id__4d4tu3hylxt id__4od6xtpa71 id__abd1hbahzwk id__6hxtt5bhaad id__vxyii1edkdi id__4brfq8gb2pv id__u05bxl144ne" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__xt930d4b5re"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;What apps should be doing is loading as much data as possible into the tile mem and flushing it out in large chunks when needed. I bet a lot of the writes (over 95%) are for temporary values that could&#39;ve been stored in tile mem and never needed to be written at all.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295700456042507" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:23.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295698736377858" itemprop="isPartOf"/><div><article aria-labelledby="id__z5bjdsi2keq id__wf7j0296q1s id__j9r8o90u6ci id__ux8jo1rhzz id__dq8332r7xqw id__ofd8u7va0b id__81m04dqpb6 id__axe9bcdvfvk id__r65ea7u6css id__08eqpsl4j259 id__ychn6v2jtmc id__sqsxmvzhxjo id__bxwumhb7u8 id__1ctmo4eeuxa id__u50cihscuyk id__w774pqz5qx" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ofd8u7va0b"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;I expect that the people building the M1 family of chips didn&#39;t expect applications to be running on it that are not TBDR optimized. So they thought 32MB would be enough.&#34;
WRONG. Most apps aren&#39;t optimized for Tile-mem, even if they claim it supports Apple Silicon.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295702259585027" itemprop="identifier"/><meta content="12" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295700456042507" itemprop="isPartOf"/><div><article aria-labelledby="id__n16yi9rpesg id__s71te63cm4 id__ullh89l6en id__up17lmy6x8 id__jy1jr3gwl3 id__5mg0gs16j2s id__91frntow7im id__rncxufqu3fs id__lk9qul5p0n id__oxy2xa8lnts id__mbluz51ftxf id__vb6cyg8o38 id__7ydgs4b98u5 id__315km00ea1h id__11ds240vl8gm id__7apxa970bxk" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__5mg0gs16j2s"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Keep in mind that between the time when Apple started engineering the M1 family 5-7 years ago, reliance on GPU performance has skyrocketed, so the chip designers probably didn&#39;t think there would be so many reads/writes to the 32MB TLB.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295704016941056" itemprop="identifier"/><meta content="13" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:24.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:24.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295702259585027" itemprop="isPartOf"/><div><article aria-labelledby="id__x8sxyri3n6p id__52x7vwur5ev id__gpmq2ve8x4 id__vqc7h98rbi id__0qewdcgpbcrg id__qyukfmsm9jf id__r58css7ez8 id__edyer5bio1 id__1jmd2q09v97 id__948yw4hrn4i id__ot4genurofc id__tle6jktdm5o id__an8yjz43vhm id__1e27uswqwaw id__iiqz4y1kk1 id__lxe0x2m315" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__qyukfmsm9jf"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>What does this mean? The M1 family of chips, including the M1 Ultra, has a major limitation that can&#39;t be fixed unless apps are properly optimized. Here&#39;s the problem.
Hishnash: &#34;The effort needed to optimize for tile memory is MASSIVE. It requires going all the way back to the..</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295705761767431" itemprop="identifier"/><meta content="14" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295704016941056" itemprop="isPartOf"/><div><article aria-labelledby="id__9uq45b15its id__e62ma9h3y3m id__7jzm5hrngnb id__1jxv7208dfp id__j8r3o4tiiy id__nud1fo5fimc id__spyic4zfeae id__e1sc4guvn8h id__35buvoaacxp id__53ur5ejh6yk id__emjsyihcrf5 id__20idnhaveuc id__dbc4h5ifgcu id__00el310n89g0e id__hyrlu5opoku id__wbarzjnic6k" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__nud1fo5fimc"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>...drawing board, re-considering everything, like the concept that there is a local on-die memory pool you can read/write from with very very low perf impact is unthinkable in the current desktop GPU space. Itâ€™s a matter of a complete rewrite at a concept/algorithmic level.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295707481501700" itemprop="identifier"/><meta content="15" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295705761767431" itemprop="isPartOf"/><div><article aria-labelledby="id__guvwkn90fpe id__zoesc1xvcom id__s42x4wprbmd id__d43n0eh92gf id__a8cg8kavlfn id__hevi8lvckhh id__8hr9hzjyxsm id__bb9n45lgdqn id__k7vcba166rb id__lc1xibv6lw id__1x6fd4ztcy4 id__eurr3c2ros5 id__wyjg1bt8if id__dk8jtjbeegn id__0ciasuvy70s8 id__xodh39rbzwk" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__hevi8lvckhh"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Why is this such a big problem for M1 Ultra?
With the M1 and M1 Pro chips, there wasn&#39;t enough GPU performance to hit that 32MB TLB limit. However, the M1 Max is where you see GPU scaling fall off a cliff due to the TLB, especially the 32-core GPU model.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295709201166340" itemprop="identifier"/><meta content="16" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:25.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:25.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295707481501700" itemprop="isPartOf"/><div><article aria-labelledby="id__7ysbyncasxh id__n062znadmmp id__9hbn48iqr4n id__qn2361nv0at id__sviq1b4u8x id__ojugut1ulnb id__4o44ngzm2v4 id__90o05w3qzzk id__cirlpr6sxbv id__zyqz913ti2 id__1sdzuckirxe id__6mvcursn31m id__p1t6s6ks7r id__pb3pio4nqh id__3bmcvtsfvn9 id__m8er77swp3" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__ojugut1ulnb"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This problem scales linearly, so if, for example, 26 cores is the sweet spot for the M1 Max, with the rest of the 6 cores being bottlenecked by the TLB, the M1 Ultra will be bottlenecked by 12 GPU cores because it features two 32-core M1 Max dies. No wonder it scales poorly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295710962778113" itemprop="identifier"/><meta content="17" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295709201166340" itemprop="isPartOf"/><div><article aria-labelledby="id__4c5s4han4iw id__9v6x0jmc2qo id__2csjyttqbvp id__usy8xprpc2h id__3nrv30l3h8w id__l9yq4fowjeq id__r3m0t3t7gr id__p4l2i2qlvg id__x2y28vn0md id__0n7o7bohtf9p id__beqd3fd9i84 id__4bl2ameee7p id__9cy834sqc9c id__k2z5d2vkqqp id__lr5p6xhd61i id__6je8mrkvj5s" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__l9yq4fowjeq"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><div lang="en" dir="auto" id="id__beqd3fd9i84"><p><span>The solution from </span></p><p><span>: &#34;Increasing the TLB will help a lot for applications that are not optimized. This is important because many apps will NEVER be optimized, and even fewer games.&#34; This is why gaming performance is so poor on M1 Ultra, apart from the Rosetta bottleneck.</span></p></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295712711806976" itemprop="identifier"/><meta content="18" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:26.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295710962778113" itemprop="isPartOf"/><div><article aria-labelledby="id__r6rf30r2mir id__15revgc6euh id__6j1oe0hc70u id__1pkokhv6oae id__eht331d6mcg id__v2cdnve69up id__16gbdfnltlfh id__eaq74v8dr8 id__9yhqf0mf45b id__mguadgsqwhq id__vb6vynriz9 id__9a00s9u3twu id__xo8ysyktiem id__ulo5jfg5g id__vqiqfekd76m id__vljsbzp210s" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__v2cdnve69up"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>Hishnash: &#34;For game engines that are not TBDR aware/optimized, they might be currently bottlenecked on reads.. and depending on the post-processing effects, might have some large bottlenecks on writes if they&#39;re not using tile memory and tile compute shaders where possible.&#34;</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295714469228553" itemprop="identifier"/><meta content="19" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295712711806976" itemprop="isPartOf"/><div><article aria-labelledby="id__xy1e4toxup id__3sunfmajza id__um73ha2i3yd id__6r1097ssnie id__oeotkh2xo5 id__44pdijkcuzm id__fdr3l103csn id__u8jjoktpzd id__r9nvlb1e1w id__vmxw14ggwyl id__9i6gplrc5f id__rifl6rqs12 id__2myidh68ss8 id__2iswxnuzlif id__2elvvs5wl8f id__dqwhmssuua" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__44pdijkcuzm"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The reason World of Warcraft runs so well and compares well to the RTX 3080/3090 is because APPLE helped them optimize the game PROPERLY to take advantage of the new TBDR tile-based architecture. (WoW Metal Update Released one week after M1 event proves they got help from Apple.)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295716205670401" itemprop="identifier"/><meta content="20" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:27.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:27.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295714469228553" itemprop="isPartOf"/><div><article aria-labelledby="id__fo4d7h2n9rr id__p1vzu5yvk6 id__884qpkc97vj id__gc2y7q0re5r id__lrxufa4xu6 id__osbybij49y9 id__2b7kj1xr2ki id__vqjpvm6smjn id__g3wlum078ce id__1rpihlgu771 id__ht7y7b3sihv id__iqmlywwacri id__9y97b6szejc id__4diaxzh33s6 id__awz8jmgzlfh id__lgh8d15l88b" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__osbybij49y9"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The solution from our source: Future M-chip families (Hopefully and probably M2) will see a big increase in the TLB to solve this problem since developers are likely to be slow in optimizing apps. Apple will likely release white papers at WWDC on how to optimize apps properly.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295717958852608" itemprop="identifier"/><meta content="21" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295716205670401" itemprop="isPartOf"/><div><article aria-labelledby="id__6yzioy2e08r id__i4ufu0culfo id__cce00808ptv id__dz4siod4s4w id__b4a71vmd05 id__45n7v20854b id__ysmn0k59hdi id__a1eazuc9udt id__zbne97voebc id__k8a1lf9ye7k id__ihk0xe8rgdl id__p8gth9d89yl id__fyse8rknuyj id__0i0o369r9yan id__f9eb4g10nov id__7j876c1dik6" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__45n7v20854b"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>This means that the M2 Ultra will see a HUGE boost in GPU performance over the M1 Ultra if the 32TLB bottleneck is removed. And that performance boost will be on top of higher clock speeds and potentially higher GPU core counts.</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295719716294657" itemprop="identifier"/><meta content="22" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295717958852608" itemprop="isPartOf"/><div><article aria-labelledby="id__nzfjbmzf6ws id__p8rdz2tkugp id__q4cqc3wxr5p id__4u6904fanjc id__f09gb8249j6 id__yo0my5wuf1 id__ntjh2m3wu1 id__x6yfzmnh4k8 id__ge3lers6a69 id__lq6uga8wlc id__mpmdktqd8k id__p8tmkmp4uti id__1clv97csxdki id__89m45ox7s1t id__plhzqk095r id__ivgtym9ulip" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__yo0my5wuf1"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div><div><div><div><div itemprop="articleBody"><div><p><span>The only hope for the M1 Ultra is that developers finally decide to completely rethink and rewrite their apps to support the TBDR tile-based memory architecture. (Good luck)
Oh, and by the way, expect hardware ray-tracing support on future M-chip families. (Hopefully M2 Pro+)</span></p></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295721431773184" itemprop="identifier"/><meta content="23" itemprop="position"/><meta content="5" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:28.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:28.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295719716294657" itemprop="isPartOf"/><div><article aria-labelledby="id__451htewuyl2 id__9c59n9l8dz id__zhsq9qv1y id__ovikaxy9d0j id__6meri0qlkbl id__syco6ba3oii id__ejz5su3atk id__55p5jtfuoy6 id__be8vcrov4aa id__xmeofamahs id__3f29afdhf7q id__dgsgf6czna id__5ye7agl4em4 id__9oyw4x8gbme id__booq3yla0rj id__gxje2ehl5c8" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__syco6ba3oii"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1514295723277266946" itemprop="identifier"/><meta content="24" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2022-04-13T17:33:29.000Z" itemprop="dateCreated"/><meta content="2022-04-13T17:33:29.000Z" itemprop="datePublished"/><meta content="https://twitter.com/VadimYuryev/status/1514295723277266946" itemprop="url"/><meta content="https://twitter.com/VadimYuryev/status/1514295721431773184" itemprop="isPartOf"/><div><article aria-labelledby="id__vlh0d1lkcuf id__shl0ww503zd id__bzkjxp076w id__jk3cxvh17o id__d40toczfq87 id__8wpwj99y8u7 id__ukh83vuuasg id__8q31xb87ytx id__d33i61erc1i id__scni3f98ysd id__mw2gj4yzl7 id__zy9qgw2uo2 id__utfb0383j3d id__1ugvn8jd2gf id__2eorkj7i25m id__euubgiqvdrj" role="article" data-testid="tweet"><div><div><div><div><div><div><div><div id="id__8wpwj99y8u7"><div><div><div><div><a href="https://twitter.com/VadimYuryev" role="link"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1383152788071272448/UewIy3Oc_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
