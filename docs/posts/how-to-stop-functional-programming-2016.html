<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://brianmckenna.org/blog/howtostopfp">Original</a>
    <h1>How to stop functional programming (2016)</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>The following has never happened to me but I often hear stories.</p>
<p>You go into work and discover that a coworker isn&#39;t happy with some
code you wrote because they don&#39;t understand it. They go to your
manager and tell them that you&#39;re being a problem by writing code they
don&#39;t understand. Your manager, being very skilled in conflict
resolution, makes a technical decision to avoid whatever tool you used
which caused the problem. In your case it was functional programming.</p>
<p>That&#39;s it. You&#39;ve been told. No more functional programming.</p>
<p>The manager has figured out what&#39;s good for the business and you figure
that listening is what&#39;s good for your job.</p>
<p>You get back to your desk and take a ticket from JIRA. You&#39;ve got to
add a page listing a person&#39;s coworkers to your internal employee
directory. First you write a function you need.</p>
<pre><code>def userCoworkers(u: User): List[Employee] =
  u.departments.flatMap(_.employees)</code></pre>
<p>But it&#39;s pure. You&#39;re doing functional programming! Stop</p>
<pre><code>def userCoworkers(u: User): List[Employee] = {
  val coworkers = ListBuffer[Employee]()
  for { d &lt;- departments }
    coworkers ++ d.employees
  coworkers.toList
}</code></pre>
<p>Well, there&#39;s a side-effect involved, but the whole method is pure.
You&#39;re still doing functional programming!</p>
<pre><code>def userCoworkers(u: User): List[Employee] = {
  logger.info(&#34;Collecting coworkers&#34;)
  val coworkers = ListBuffer[Employee]()
  for { d &lt;- departments }
    coworkers ++ d.employees
  coworkers.toList
}</code></pre>
<p>Now the method has 1 external side-effect. Is that enough? With &#34;no
functional programming&#34; you&#39;ve been given a lower-bound of 1
side-effect per method but we don&#39;t really know what the ideal number
is. Hopefully you can slip it through code review.</p>
<p>After this exercise you&#39;ve learned how easy it is to not do functional
programming.</p>
<p>You show it to your product manager. They didn&#39;t realise how many
coworkers the average person had. The page is huge. They ask you to just
change it to a number.</p>
<p>You&#39;re going to have to add numbers together. Without being pure.
You&#39;re going to have to think about this one.</p>
<p>Maybe you should ask your manager how to do it. Good luck.</p>
  </div></div>
  </body>
</html>
