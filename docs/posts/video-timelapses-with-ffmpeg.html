<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hannahilea.com/blog/video-timelapses-with-ffmpeg">Original</a>
    <h1>Video timelapses with FFmpeg</h1>
    
    <div id="readability-page-1" class="page"><div>
      <nav role="navigation">
        @hannahilea:
        <a href="https://hannahilea.com/">home</a> | <a href="https://hannahilea.com/projects">projects</a> |
        <a href="https://hannahilea.com/">blog</a>
      </nav>

      
      <p>21 Jan 2025</p>
      <p>An artist friend took videos of her art creation process and asked for assistance converting them into per-artwork timelapse recordings. Let’s document the steps for my future self!</p>
      <h4 id="task">Task</h4>
      <ul>
        <li>Trim videos to region(s) with activity—one timelapse per resultant artwork</li>
        <li>Speed up 4x</li>
        <li>Remove audio</li>
        <li>Within a single recording, remove subsection(s) with no activity</li>
      </ul>
      <p>
        For the given recordings, finding the cut points for the first and last steps could easily be done manually.<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a>
      </p>
      <h4 id="prerequisite">Prerequisite</h4>
      <p>Install commandline video editing tool <a target="_blank" rel="noreferrer noopener" href="https://www.ffmpeg.org/">FFmpeg</a>.</p>
      <h4 id="steps">Steps</h4>
      <p>After viewing a recording and making note of the timestamps around a specific artwork’s creation (in this example, 00:25:16 to 00:42:34):</p>
      <pre><code># Trim into new file, remove audio
ffmpeg -i INPUT.mp4 -ss 00:25:16 -to 00:42:34 -c:v copy -c:a copy -an ARTWORK_A.mp4

# Speed it up into a 4x timelapse, update framerate=60fps, rotate 90 degrees
ffmpeg -i ARTWORK_A.mp4 -vf &#34;setpts=PTS/4,fps=60,transpose=2&#34; ARTWORK_A_4x.mp4

# Trim out region with inactivity (00:03:39 to 00:04:17)
ffmpeg -i ARTWORK_A_4x.mp4 -vf  &#34;select=&#39;not(between(t,219,257))&#39;,setpts=N/FRAME_RATE/TB&#34; ARTWORK_A_4x_trimmed.mp4</code></pre>
      <ul>
        <li>
          <p>
            This recording happened to be filmed vertically but needed to be flipped to horizontal; if that flip isn’t necessary, exclude the <code>transpose=2</code> argument from the second processing step. (For whatever reason, doing
            this transpose is realllllly slow. Wasn’t worth investigating here, but be warned.)
          </p>
        </li>
        <li><p>The region with inactivity was found manually (within ARTWORK_A_4x.mp4), and then converted into seconds. It could alternatively be found and excluded as part of the first step.</p></li>
        <li>
          <p>
            Note that these steps generate intermediate videos <code>ARTWORK_A.mp4</code> and <code>ARTWORK_A_4x.mp4</code> as well as output video <code>ARTWORK_A_4x_trimmed.mp4</code>. That was intentional, to give the friend the
            different types of output for other use-cases. If those intermediate videos aren’t desired, the various steps can be combined.
          </p>
        </li>
      </ul>
      
      <hr/>
      <ul>
        <li>Created: 2025-01-21</li>
        <li>Last updated: 2025-01-21</li>
        <li>Type: Task documentation</li>
        <li>Tags: ffmpeg, instructions, editing, task</li>
      </ul>
    </div></div>
  </body>
</html>
