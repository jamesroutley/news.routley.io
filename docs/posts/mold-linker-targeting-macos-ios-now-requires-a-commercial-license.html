<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rui314/mold/releases/tag/v1.8.0">Original</a>
    <h1>Mold linker: targeting macOS/iOS now requires a commercial license</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>mold 1.8.0 is a new release of the high-speed linker.</p>

<ul>
<li>The <code>--relocatable</code> (or <code>-r</code>) option has been reimplemented to improve its performance and compatibility with the GNU linkers. That option tells the linker to combine input object files into another object file instead of into an executable or a shared library file. mold has been supporting the feature since version 0.9, but until now the output file created with <code>-r</code> looked fairly different from what GNU linkers would produce. GHC (Glasgow Haskell Compiler) in particular uses re-linkable object files as dynamic libraries instead of real <code>.so</code> files, and it didn&#39;t work with mold. Now, mold can produce object files that GHC can load. Note that this work was funded by <a href="https://mercury.com" rel="nofollow">Mercury</a>, so thanks to the company to help us improve the product. (Yes, you can ask us to prioritize your feature request by funding the project.) (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/c9a7ae733c265e8e876ec6d5654399b3d9db726e/hovercard" href="https://github.com/rui314/mold/commit/c9a7ae733c265e8e876ec6d5654399b3d9db726e"><tt>c9a7ae7</tt></a>)</li>
<li><code>--relocatable-merge-sections</code> option has been added. By default, mold keeps original input section names for the <code>--relocatable</code> output and therefore does not merge input sections into a single output sections unless they are of the same name. If <code>--relocatable-merge-sections</code> is given, mold merges input by the usual default merging rule. For example, <code>.text.foo</code> and <code>.text.bar</code> are merged to <code>.text</code> if and only if <code>--relocatable-merge-sections</code> is given for the <code>--relocatable</code> output. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/c2a0ae1c9692d0bbac8d6a6f4fb61bedaa19fa44/hovercard" href="https://github.com/rui314/mold/commit/c2a0ae1c9692d0bbac8d6a6f4fb61bedaa19fa44"><tt>c2a0ae1</tt></a>)</li>
<li><code>-z [no]dynamic-undefined-weak</code> options have been added. This option controls whether an undefined weak symbol is promoted to a dynamic symbol or not. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/ed235f3db64b1bf20add3713a1d63a0ad09d5de6/hovercard" href="https://github.com/rui314/mold/commit/ed235f3db64b1bf20add3713a1d63a0ad09d5de6"><tt>ed235f3</tt></a>)</li>
<li><code>--[no-]undefined-version</code> options have been supported. Now, mold warns on a symbol name in a version script if it does not match with any defined symbol. This change was made so that it is easy to find a typo in a version script. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/e2d7353213004f5eac0eeda372dac7cbbdb1cb28/hovercard" href="https://github.com/rui314/mold/commit/e2d7353213004f5eac0eeda372dac7cbbdb1cb28"><tt>e2d7353</tt></a>)</li>
<li>mold now warns on symbol type mismatch. If two object files have the same symbol with different symbol types, it usually means your program has a bug. Chances are, you are using the same identifier as a function name in one translation unit and as a global variable name in another. So it makes sense to warn on the mismatch. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/b70211ec08353b4a823be0fb99857dfc29750751/hovercard" href="https://github.com/rui314/mold/commit/b70211ec08353b4a823be0fb99857dfc29750751"><tt>b70211e</tt></a>)</li>
<li>mold now merges <code>.gnu.note.property</code> sections for various x86 properties. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/d30d743cb0c5c6b4c5e21c9bd57dab72b0527c0b/hovercard" href="https://github.com/rui314/mold/commit/d30d743cb0c5c6b4c5e21c9bd57dab72b0527c0b"><tt>d30d743</tt></a>)</li>
</ul>

<ul>
<li>The experimental macOS/iOS support has been removed from mold. If you want to use it, please use our <a href="https://github.com/bluewhalesystems/sold">sold</a> linker instead.</li>
</ul>

<ul>
<li><code>--wrap</code> now works with LTO. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/07d89116a8fd4766645cf3581ac755b56b0c2bc4/hovercard" href="https://github.com/rui314/mold/commit/07d89116a8fd4766645cf3581ac755b56b0c2bc4"><tt>07d8911</tt></a>)</li>
<li>A global variable initialized with an IFUNC function pointer is now initialized correctly with the function&#39;s address. Previously, it was mistakenly initialized to the function resolver&#39;s address. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/b2858d268086b8ff384586b117d38d771e1c48a7/hovercard" href="https://github.com/rui314/mold/commit/b2858d268086b8ff384586b117d38d771e1c48a7"><tt>b2858d2</tt></a>)</li>
<li>The filename specified by <code>--version-script</code> or <code>--dynamic-list</code> is now searched from library search paths if it does not exist in the current working directory. This behavior is compatible with GNU linkers. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/3c1a0550da7a65e24f9f4872a2ebc637e3b0a1e5/hovercard" href="https://github.com/rui314/mold/commit/3c1a0550da7a65e24f9f4872a2ebc637e3b0a1e5"><tt>3c1a055</tt></a>, <a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/8c87f1659292feab06e0b7688d2a48f334418b7a/hovercard" href="https://github.com/rui314/mold/commit/8c87f1659292feab06e0b7688d2a48f334418b7a"><tt>8c87f16</tt></a>)</li>
<li>mold now tries to avoid creating copy relocations as much as possible. This change fixed a compatibility issue with GHC. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/5866c9e95abb7d5a387d82e80b7c14ad8ab475ba/hovercard" href="https://github.com/rui314/mold/commit/5866c9e95abb7d5a387d82e80b7c14ad8ab475ba"><tt>5866c9e</tt></a>)</li>
<li>Thread-local variables are now correctly aligned even if there&#39;s a TLV with a large alignment. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/bd46edf3f0fe9e1a787ea453c4657d535622e61f/hovercard" href="https://github.com/rui314/mold/commit/bd46edf3f0fe9e1a787ea453c4657d535622e61f"><tt>bd46edf</tt></a>)</li>
<li>mold can now handle GCC LTO files created with <code>-ffat-lto-objects</code>. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/804b8439833604981a55d56346e5d1a86e43823c/hovercard" href="https://github.com/rui314/mold/commit/804b8439833604981a55d56346e5d1a86e43823c"><tt>804b843</tt></a>)</li>
<li>mold now accepts <code>-z nopack-relative-relocs</code> as an alias for <code>--pack-dyn-relocs=none</code> for the sake of compatibility with GNU linkers. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/b51058867776a6192abc2c9d864886a9252ab631/hovercard" href="https://github.com/rui314/mold/commit/b51058867776a6192abc2c9d864886a9252ab631"><tt>b510588</tt></a>)</li>
<li>mold now recognizes <code>-z start-stop-visibility=hidden</code> but ignores it because it&#39;s the default for mold. GNU linkers support this option to control the visibility of linker-synthesized <code>__start_&lt;sectname&gt;</code> and <code>__stop_&lt;sectname&gt;</code> symbols, with <em>global</em> as the default visibility. mold creates these symbols with the <em>hidden</em> visibility by default, which is desirable for almost all cases. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/22c9ec8cb6bf32ff67da5b68c3c9cc23cc76ec63/hovercard" href="https://github.com/rui314/mold/commit/22c9ec8cb6bf32ff67da5b68c3c9cc23cc76ec63"><tt>22c9ec8</tt></a>)</li>
<li>[ARM32, i386] mold now emits REL-type relocations instead of RELA-type for the <code>--relocatable</code> output file. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/rui314/mold/commit/8b373d38ce3baa6f99fcd8d3cc087069cbc452ea/hovercard" href="https://github.com/rui314/mold/commit/8b373d38ce3baa6f99fcd8d3cc087069cbc452ea"><tt>8b373d3</tt></a>)</li>
</ul>

<p>mold is an open-source project, and we accept donations via <a href="https://github.com/sponsors/rui314">GitHub Sponsors</a> and <a href="https://opencollective.com/mold-linker" rel="nofollow">OpenCollective</a>. We thank you to everybody who sponsors our project. In particular, we&#39;d like to acknowledge the following organizations and people who have sponsored $32/mo or more during this release cycle:</p>
<ul>
<li><a href="https://github.com/G-Research-OSS">G-Research-OSS</a></li>
<li><a href="https://github.com/uber">Uber Open Source</a></li>
<li><a href="https://github.com/Confiared">Confiared S.R.L.</a></li>
<li><a href="https://github.com/jserv">Jim Huang</a></li>
<li><a href="https://github.com/300baud">300baud</a></li>
<li><a href="https://github.com/repi">Johan Andersson</a></li>
<li><a href="https://github.com/signal-slot">Signal Slot Inc.</a></li>
<li><a href="https://github.com/wasmerio">Wasmer</a></li>
<li><a href="https://github.com/MercuryTechnologiesSponsorships">Mercury</a></li>
<li><a href="https://github.com/kyle-elliott">kyle-elliott</a></li>
<li><a href="https://github.com/repi">Johan Andersson</a></li>
<li><a href="https://github.com/signal-slot">Signal Slot Inc.</a></li>
<li><a href="https://github.com/MercuryTechnologiesSponsorships">Mercury</a></li>
<li><a href="https://github.com/kyle-elliott">kyle-elliott</a></li>
<li><a href="https://github.com/repi">Johan Andersson</a></li>
<li><a href="https://github.com/windenntw">windenntw</a></li>
<li><a href="https://github.com/disktnk">disktnk</a></li>
<li><a href="https://github.com/lukekasz">Luke Kasz</a></li>
<li><a href="https://github.com/dougallj">Dougall Johnson</a></li>
<li><a href="https://github.com/k-nasa">nasa</a></li>
<li><a href="https://github.com/sina-ht">H.T</a></li>
<li><a href="https://github.com/bslatkin">Brett Slatkin</a></li>
<li><a href="https://github.com/bryal">JoJo</a></li>
<li><a href="https://github.com/jblazquez">Javier Blazquez</a></li>
<li><a href="https://github.com/daquexian">daquexian</a></li>
<li><a href="https://github.com/goodmanjonathan">Jonathan Goodman</a></li>
<li><a href="https://github.com/mbj">Markus Schirp</a></li>
<li><a href="https://github.com/lukekasz">Luke Kasz</a></li>
<li><a href="https://github.com/spastorino">Santiago Pastorino</a></li>
<li><a href="https://github.com/k-nasa">nasa</a></li>
<li><a href="https://github.com/dougallj">Dougall Johnson</a></li>
<li><a href="https://github.com/bslatkin">Brett Slatkin</a></li>
<li><a href="https://github.com/bryal">JoJo</a></li>
<li><a href="https://github.com/jblazquez">Javier Blazquez</a></li>
<li><a href="https://github.com/daquexian">daquexian</a></li>
<li><a href="https://github.com/goodmanjonathan">Jonathan Goodman</a></li>
</ul></div></div>
  </body>
</html>
