<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://discourse.nixos.org/t/brew-nix-a-flake-automatically-packaging-all-homebrew-casks/44880">Original</a>
    <h1>Brew-Nix: a flake automatically packaging all homebrew casks</h1>
    
    <div id="readability-page-1" class="page"><div id="main-outlet" role="main">
        

  

    <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="Brew-nix: a flake automatically packaging all homebrew casks"/>
        <meta itemprop="articleSection" content="Announcements"/>
      <meta itemprop="keywords" content=""/>
      

          <div id="post_1">
            
            <div itemprop="articleBody">
              <p>Hi everyone, i made an experimental nix flake to automatically package all brew casks for nix. It probably won’t work with all casks but it has the benefit of being a fully nix expression compared to nix-darwin’s homebrew module where you just specify the name (and it uses homebrew to install it), feel free to try it out <img src="https://discourse.nixos.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" alt=":slight_smile:" loading="lazy" width="20" height="20"/></p>


            </div>

            

            

          </div>
          <div id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <div>
              <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://discourse.nixos.org/u/luxus"><span itemprop="name">luxus</span></a>
                
              </span></p>


              <p><span>
                  <time itemprop="datePublished" datetime="2024-05-05T08:29:02Z">
                    May 5, 2024,  8:29am
                  </time>
                  <meta itemprop="dateModified" content="2024-05-05T08:29:02Z"/>
              <span itemprop="position">2</span>
              </span>
            </p></div>
            <p>but it still needs brew?</p>

            

            

          </div>
          
          <div id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <p>It is a “brew parser”, then?</p>

            

            

          </div>
          <div id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>You could call it that I guess</p>
            </div>

            

            

          </div>
          <div id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <div>
              <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://discourse.nixos.org/u/pxc"><span itemprop="name">pxc</span></a>
                
              </span></p>


              <p><span>
                  <time itemprop="datePublished" datetime="2024-05-05T22:41:37Z">
                    May 5, 2024, 10:41pm
                  </time>
                  <meta itemprop="dateModified" content="2024-05-05T22:41:37Z"/>
              <span itemprop="position">6</span>
              </span>
            </p></div>
            <p>This is great! I use Homebrew exclusively on macOS and nearly exclusively for ‘casks’. And I’ve been experiencing quite some pain lately with it. :-\</p>

            

            

          </div>
          <div id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <p>Awesome idea! Thanks for making this!</p>

            

            

          </div>
          <div id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <p>Is nix still symlinking apps to ~/Applications? It’s the one reason I’m still using homebrew, because symlinking seems to not work with spotlight</p>

            

            

          </div>
          <div id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <p>Fuck yes. I’m so stoked for this.</p>

            

            

          </div>
          <div id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>On my system with home-manager it seems to get linked to <code>~Applications/Home Manager Apps/</code></p>
            </div>

            

            

          </div>
          <div id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <p>There’s been no resolution to the symlinking issue. I use a script that copies the apps into place. Others are creating aliases, stub apps, or using some other approach. They all have trade-offs, so no particular one is an ideal solution.</p>

            

            

          </div>
          <div id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>Thx for this project, it’s really helpful for me.</p>
<p>I was wondering if you have a strategy to “fix” the broken package.</p>
<p>For the path problem, I still have to understand why it doesn’t work and if we can do something to allow fixing of this ( and same question, do you want to maintain something to propose complete package or do you want to just add a simple way to override the problems )</p>
<p>If I can help, don’t hesitate to reach out.</p>
            </div>

            

            

          </div>
          <div id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>Pretty sure just overriding the package and providing the hash yourself is the best since these hashes will constantly update with each update. Not sure how doing this automatically would work as well, seems rather costly as somebody would have to download all the files with no hashes.</p>

<p>As i understand this is more to do with nix (and nix-darwin?) rather than brew-nix, so this could presumably be made less buggy with nix darwin team’s help. I don’t know this in depth enough to know what the actual problem is.</p>
            </div>

            

            

          </div>
          <div id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              <p>It looks my <a href="https://github.com/jacekszymanski/nixcasks">nixcasks</a> project was “ahead of its time” <img src="https://discourse.nixos.org/images/emoji/twitter/rofl.png?v=12" title=":rofl:" alt=":rofl:" loading="lazy" width="20" height="20"/></p>
<p>As there are obviously more users here, I’d like - if you’re interested - to contribute several features I have already implemented to your project and deprecate the mine. No need to duplicate efforts, and you seem to have more energy to maintain the project anyway <img src="https://discourse.nixos.org/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" alt=":slight_smile:" loading="lazy" width="20" height="20"/></p>
            </div>

            

            

          </div>
    </div>






    </div></div>
  </body>
</html>
