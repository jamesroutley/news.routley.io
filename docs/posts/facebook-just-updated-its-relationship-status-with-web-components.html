<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.mux.com/blog/facebook-just-updated-it-s-relationship-status-with-web-components">Original</a>
    <h1>Facebook just updated its relationship status with Web Components</h1>
    
    <div id="readability-page-1" class="page"><div><p>As our friend of the blog, Wes Bos, pointed out the other day, React 19 (beta) added, all the way at the bottom of the announcement, much-awaited <a href="https://react.dev/blog/2024/04/25/react-19#support-for-custom-elements">support for web components</a>.</p><div data-theme="light"><!--$--><div><article><p><span>Tucked all the way at the bottom on the React 19 release notes is full support for web components!  ü•≥ </span></p></article></div><!--/$--></div><p>I say ‚Äúmuch-awaited‚Äù, but the truth is a lot of people are not going to care at all about that. There are some, though, like us who really care and have been paying close attention.</p><p>At Mux we have not been shy about our fondness for web components over the last few years. It started with building Mux Player on our <a href="https://www.mux.com/blog/media-chrome-turns-1-0">web components-based player framework Media Chrome</a> (thanks for the <a href="https://twitter.com/jhooks/status/1785410152025543065">kind words about Media Chrome</a>, Joel).</p><p>But I want to drive home one point about our fondness for web components. It‚Äôs not about some righteous party line, which so many front-end tooling debates devolve into. If you came to this post for some juicy nerd drama, turn around because that‚Äôs not what we‚Äôre here for. <a href="https://www.mux.com/blog/slow-is-stable-stable-is-fast-building-mux-player-on-the-slow-platform-of-web-components">Our adoption of web components is purely based on practicality</a>. Nothing more, and nothing less. Is it the best tool for every job? Obviously not. But we believe it is the best tool for the job of building a framework-agnostic video player SDK. We still use React heavily. In fact, we were early adopters of <a href="https://www.mux.com/blog/what-are-react-server-components">React Server Components and wrote about it</a> in Darius‚Äôs widely circulated post.</p><h2 id="so-what-does-this-mean-for-react-actually"><a href="#so-what-does-this-mean-for-react-actually"><span><span><svg role="img" xmlns="http://www.w3.org/2000/svg" width="42" height="42" fill="none" viewBox="0 0 42 42"><title>Link</title><path d="m18.172 15.343 3.535-3.535a5 5 0 0 1 7.071 0l1.414 1.414a5 5 0 0 1 0 7.07l-3.535 3.536M23.828 26.657l-3.535 3.535a5 5 0 0 1-7.071 0l-1.414-1.414a5 5 0 0 1 0-7.07l3.535-3.536" vector-effect="non-scaling-stroke"></path><path stroke-linecap="round" d="m25.243 16.757-8.486 8.486" vector-effect="non-scaling-stroke"></path></svg></span></span>So what does this mean for React, actually?</a></h2><p>To contrast all the positives about building SDKs on web components, React support has been by far the biggest hurdle to clear for web components projects. Raw web components have always <strong>worked</strong> in React (it‚Äôs just HTML, after all), but the challenge was more about the ergonomics of using web components in a React world.</p><p>For example, React developers don&#39;t interact directly with HTML elements to do things like add event listeners and call functions. It sort of goes against the declarative nature of React itself.</p><p>So although setting up an event listener was possible, like this, it feels very un-React-y:</p><div><figure><figcaption><p>jsx</p></figcaption><pre><code><span></span><span>function</span> <span>MyComponent</span> <span>(</span><span>)</span> <span>{</span>
<span></span>  <span>const</span> ref <span>=</span> <span>useRef</span><span>(</span><span>null</span><span>)</span><span>;</span>
<span></span>  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span></span>
<span></span>  <span>useEffect</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
<span></span>    <span>function</span> <span>handleClick</span> <span>(</span><span>)</span> <span>{</span>
<span></span>      <span>setCount</span><span>(</span>count <span>+</span> <span>1</span><span>)</span>
<span></span>    <span>}</span>
<span></span>    <span>if</span> <span>(</span>ref<span>)</span> <span>{</span>
<span></span>       ref<span>.</span><span>addEventListener</span><span>(</span><span>&#39;click&#39;</span><span>,</span> handleClick<span>)</span><span>;</span>
<span></span>    <span>}</span>
<span></span>    <span>return</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
<span></span>      ref<span>.</span><span>removeEventListener</span><span>(</span><span>&#39;click&#39;</span><span>,</span> handleClick<span>)</span><span>;</span>
<span></span>    <span>}</span>
<span></span>  <span>}</span><span>,</span> <span>[</span>ref<span>]</span><span>)</span><span>;</span>
<span></span>
<span></span>  <span>return</span> <span><span><span>&lt;</span>my-button</span> <span>ref</span><span><span>=</span><span>{</span>ref<span>}</span></span><span>&gt;</span></span><span>Hello! </span><span>{</span>count<span>}</span><span><span><span>&lt;/</span>my-button</span><span>&gt;</span></span>
<span></span><span>}</span></code></pre></figure></div><p>Because of this, most maintainers (us included), have chosen to create React-specific wrappers. That works well, but it always felt like a stop-gap. Now that React 19 supports web components directly, you can do things like pass event listeners as React props and React props passed to the element get automatically set as properties on the element. There‚Äôs some extra complexity here for web component authors to handle attributes vs. properties. Not all web components will play nice with React from day 1, but at least we have a path forward.</p><p>See here, this feels much more React-y:</p><div><figure><figcaption><p>jsx</p></figcaption><pre><code><span></span><span>function</span> <span>MyComponent</span> <span>(</span><span>)</span> <span>{</span>
<span></span>  <span>const</span> <span>[</span>count<span>,</span> setCount<span>]</span> <span>=</span> <span>useState</span><span>(</span><span>0</span><span>)</span><span>;</span>
<span></span>
<span></span>  <span>return</span> <span>(</span>
<span></span>    <span>&lt;</span>my<span>-</span>button
<span></span>      ref<span>=</span><span>{</span>ref<span>}</span>
<span></span>      onClick<span>{</span><span>(</span><span>)</span> <span>=&gt;</span> <span>setCount</span><span>(</span>count <span>+</span> <span>1</span><span>)</span><span>}</span>
<span></span>     <span>&gt;</span>
<span></span>       Hello<span>!</span> <span>{</span>count<span>}</span>
<span></span>     <span><span><span>&lt;/</span>my-button</span><span>&gt;</span></span>
<span></span>  <span>)</span>
<span></span><span>}</span></code></pre></figure></div><p>Internally, all React is doing here is taking the onClick prop and setting up/tearing down the click handler under the hood. Which is basically what React wrappers were doing anyway.</p><p>I‚Äôm hoping that in 1 or 2 short years from now your average React developer will not be weirded out or averse to using a web component in their React application. And once that feels normal perhaps we can thank those old React wrappers for bringing us joy and then do away with them.</p><h2 id="it-still-might-be-a-little-weird"><a href="#it-still-might-be-a-little-weird"><span><span><svg role="img" xmlns="http://www.w3.org/2000/svg" width="42" height="42" fill="none" viewBox="0 0 42 42"><title>Link</title><path d="m18.172 15.343 3.535-3.535a5 5 0 0 1 7.071 0l1.414 1.414a5 5 0 0 1 0 7.07l-3.535 3.536M23.828 26.657l-3.535 3.535a5 5 0 0 1-7.071 0l-1.414-1.414a5 5 0 0 1 0-7.07l3.535-3.536" vector-effect="non-scaling-stroke"></path><path stroke-linecap="round" d="m25.243 16.757-8.486 8.486" vector-effect="non-scaling-stroke"></path></svg></span></span>It still might be a little weird</a></h2><p>Event handlers and passing React props into web components is a nice improvement, but I think there‚Äôs still one weird thing about web components that doesn‚Äôt quite jive with the React way of doing things, and that‚Äôs the globally scoped element register.</p><p>In any React app, when you use a component, you have to import that component:</p><div><figure><figcaption><p>jsx</p></figcaption><pre><code><span></span>
<span></span><span>import</span> MyThing <span>from</span> <span>&#39;./components/my-thing&#39;</span></code></pre></figure></div><p>But that doesn‚Äôt exist in the web components world (at least not yet). When you use &lt;my-button&gt; in a React component, you don‚Äôt have to explicitly import my-button from anywhere inside that file.</p><div><figure><figcaption><p>jsx</p></figcaption><pre><code><span></span>
<span></span><span>import</span> <span>&#39;./components/my-thing&#39;</span></code></pre></figure></div><p>Web components get imported and registered at the global level. This also means if two different libraries have a component called my-button, you can‚Äôt use both of them. This will certainly be a little weird for React developers to get used to. It also might change with <a href="https://github.com/WICG/webcomponents/blob/gh-pages/proposals/Scoped-Custom-Element-Registries.md">Scope Custom Element Registries in the future</a>.</p><h2 id="dont-sleep-on-web-awesome-either"><a href="#dont-sleep-on-web-awesome-either"><span><span><svg role="img" xmlns="http://www.w3.org/2000/svg" width="42" height="42" fill="none" viewBox="0 0 42 42"><title>Link</title><path d="m18.172 15.343 3.535-3.535a5 5 0 0 1 7.071 0l1.414 1.414a5 5 0 0 1 0 7.07l-3.535 3.536M23.828 26.657l-3.535 3.535a5 5 0 0 1-7.071 0l-1.414-1.414a5 5 0 0 1 0-7.07l3.535-3.536" vector-effect="non-scaling-stroke"></path><path stroke-linecap="round" d="m25.243 16.757-8.486 8.486" vector-effect="non-scaling-stroke"></path></svg></span></span>Don‚Äôt sleep on Web Awesome, either</a></h2><p>One other web components topic caught my eye last week. <a href="https://shoelace.style/">Shoelace</a>, one of the premier web components projects, launched a Kickstarter project for <a href="https://www.kickstarter.com/projects/fontawesome/web-awesome">Web Awesome</a> after being acquired by Font Awesome. With a modest goal of $30,000, the campaign gained the pledges of <a href="https://www.kickstarter.com/projects/fontawesome/web-awesome">6,725 backers for a total of $723,004</a>, nearly 25x the original goal. And I don‚Äôt think that‚Äôs all hype ‚Äì I think there‚Äôs a reliable signal here that developers want a stable set of tools, built on browser standards.</p><h2 id="lets-see-how-things-pan-out"><a href="#lets-see-how-things-pan-out"><span><span><svg role="img" xmlns="http://www.w3.org/2000/svg" width="42" height="42" fill="none" viewBox="0 0 42 42"><title>Link</title><path d="m18.172 15.343 3.535-3.535a5 5 0 0 1 7.071 0l1.414 1.414a5 5 0 0 1 0 7.07l-3.535 3.536M23.828 26.657l-3.535 3.535a5 5 0 0 1-7.071 0l-1.414-1.414a5 5 0 0 1 0-7.07l3.535-3.536" vector-effect="non-scaling-stroke"></path><path stroke-linecap="round" d="m25.243 16.757-8.486 8.486" vector-effect="non-scaling-stroke"></path></svg></span></span>Let‚Äôs see how things pan out</a></h2><p>That‚Äôs all for now, we‚Äôll see how things pan out. I, for one, am happy to see the React ecosystem moving in this direction. And I believe the general frontend ecosystem is criminally under-indexed on web components. All web application developers can benefit by moving parts of their applications away from framework-specific patterns and more towards browser-level standards. Frameworks will come and go, so as developers and maintainers we build against them at our own risk. Browser standards tend to come, albeit slowly, and then rarely disappear after that.</p><p>Right now the plan is to wait and see. In the short term, we‚Äôll keep maintaining our React wrappers. It‚Äôs all going to depend on if React developers, as a general population, start embracing web components and start feeling comfortable using them in their applications. We want our component libraries to feel great and idiomatic wherever they‚Äôre used‚Ä¶and we hope one day soon that could just mean web components.</p></div><div><div><h2>Leave your wallet </h2><p>No credit card required to get started.</p></div></div></div>
  </body>
</html>
