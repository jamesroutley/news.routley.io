<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://opensource.googleblog.com/2025/08/whats-new-in-iceberg-v3.html">Original</a>
    <h1>Apache Iceberg V3 Spec new features for more efficient and flexible data lakes</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-3075570279188441503" itemprop="articleBody">


<meta content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiml6TP89bNBB9mAn22px3iLc27aYThK64m6qK2poSNsmoxypfnE9ssmtCuwbkKtkIfQpfZpwk6ch4Aq_uQ42perTElfCfRbCF8au4mXOGw9wX_UO4yYZOyhWv6ItdPMOCQySDNYoTp-pWi1lY0o_5SWhW1RyaxmgDnpSN9lZIX2alXx7OoQiz_XiSNPIE/s1600/blog_header.png" name="twitter:image"/>

<p>The Next Chapter for Apache Iceberg: Welcoming the Iceberg V3 Spec</p>


<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiml6TP89bNBB9mAn22px3iLc27aYThK64m6qK2poSNsmoxypfnE9ssmtCuwbkKtkIfQpfZpwk6ch4Aq_uQ42perTElfCfRbCF8au4mXOGw9wX_UO4yYZOyhWv6ItdPMOCQySDNYoTp-pWi1lY0o_5SWhW1RyaxmgDnpSN9lZIX2alXx7OoQiz_XiSNPIE/s1600/blog_header.png" target="_blank"><img alt="An infographic illustrating the new features in Apache Iceberg V3. In the center is a logo of an iceberg with V3 written on it. Arrows point from the central logo to four surrounding illustrations, each representing a new feature: Top left: Deletion Vectors, depicted as a tall stack of data blocks. Top right: Variant Data Type, shown as a collection of colorful circles and cubes. Bottom right: Geospatial Data Types, illustrated by a folded world map with location pins. Bottom left: Row Lineage, represented by a grid of various colorful icons." data-original-height="800" data-original-width="100%" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiml6TP89bNBB9mAn22px3iLc27aYThK64m6qK2poSNsmoxypfnE9ssmtCuwbkKtkIfQpfZpwk6ch4Aq_uQ42perTElfCfRbCF8au4mXOGw9wX_UO4yYZOyhWv6ItdPMOCQySDNYoTp-pWi1lY0o_5SWhW1RyaxmgDnpSN9lZIX2alXx7OoQiz_XiSNPIE/s1600/blog_header.png"/></a></p><p>The data community has long grappled with the challenge of how to bring database-like agility to petabyte-scale datasets stored in open cloud storage. The trade-off has often been between the scalability of data lakes and the performance and ease-of-use of traditional data warehouses. Executing fine-grained updates or evolving table schemas on massive tables often required slow, expensive, and disruptive operations.</p>

<h3>More Efficient Row-Level Transactions with Deletion Vectors</h3>
<p>A primary challenge for data lakes has been handling row-level deletes efficiently. Previous approaches, like positional delete files, were a clever solution but could lead to performance degradation at query time when a reader had to reconcile many small delete files against large data files.</p>
<ul>
<li><strong>Previous Model (Positional Deletes):</strong> A query might involve reading a central log of deletes, like <code>deletes.avro</code>, containing tuples of <code>(file_path, row_position)</code>.</li>
<li><strong>V3 Model (Deletion Vectors):</strong> Each data file (e.g., <code>file_A.parquet</code>) is paired with a small, efficient sidecar file (e.g., <code>file_A.puffin</code>) containing a Roaring bitmap of its deleted rows.</li>
</ul>
<p>This change localizes delete information, streamlines the read path, and dramatically improves the performance of workloads that rely on frequent Change Data Capture (CDC) or row-level updates.</p>

<h3>Simplified Schema Evolution with Default Column Values</h3>
<p>Another common operational hurdle in managing large tables has been schema evolution. Adding a column to a table with billions of rows traditionally required a &#34;backfill&#34;—a costly and time-consuming job to rewrite all existing data files to add the new column.</p>

<p><code><span>ALTER TABLE</span> events <span>ADD COLUMN</span> version <span>INT DEFAULT</span> <span>1</span>;</code></p><p>This operation is instantaneous because it only modifies metadata. No data files are touched. When a query engine encounters an older data file without the <code>version</code> column, it consults the table schema, finds the default value, and seamlessly populates it in the query results on the fly. This simple but powerful mechanism makes schema evolution a fast, non-disruptive operation, allowing data models to evolve quickly.</p>

<h3>Improved Query Engine Compatibility with Enhanced Data Types and Lineage</h3>
<p>Beyond these headline features, V3 broadens the capabilities of Iceberg to support more advanced use cases:</p>
<ul>
<li><strong>Row-Level Lineage:</strong> For robust auditing and reliable CDC pipelines, V3 formalizes the tracking of row history. By embedding metadata about when a row was added or last modified, Iceberg tables can now provide a clear lineage, simplifying data governance and enabling more efficient downstream data replication.</li>
<li><strong>Rich Data Types:</strong> V3 closes the gap with traditional databases by introducing a more expressive type system. This includes a <code>VARIANT</code> type for handling semi-structured data like JSON, native <code>GEOMETRY</code> and <code>GEOGRAPHY</code> types for advanced geospatial analysis, support for nanosecond-precision timestamps with the new <code>timestamp_ns</code> and <code>timestamptz_ns</code> data types, a significant increase from the previous microsecond limit.</li>
</ul>

<h3>Building the Future of the Open Data Lakehouse</h3>
<p>These V3 features—deletion vectors, default values, row lineage, and richer types—are more than just individual improvements. Together, they represent a cohesive step toward a new paradigm where the lines between the data lake and the data warehouse are erased. They enable faster, more efficient, and more flexible data operations than previously thought possible.</p>
<hr/>

</div></div>
  </body>
</html>
