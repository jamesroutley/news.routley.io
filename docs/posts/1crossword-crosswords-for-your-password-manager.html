<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eieio.games/blog/1Crossword">Original</a>
    <h1>1Crossword: crosswords for your password manager</h1>
    
    <div id="readability-page-1" class="page"><article>
<p>I made a game. It’s called 1Crossword. It generates crosswords using the passwords in your 1Password vault. The crosswords are fun, simple, and perfect for sharing on social media once you complete them.</p>
<div><video controls="" playsinline="" poster="/images/1Crossword/title-image.jpg" width="1152" height="720" preload="metadata" alt="A terminal. The user runs the command 1crossword and is prompted to give the program access to their 1password vault. The program then generates a crossword that is displayed on the screen. The user fills in the password &#39;hunter2&#39; for one of the answers."><p>Loading...</p></video><p>some of my favorite passwords are in this one</p></div>
<p>I made 1Crossword because the password manager games space has stagnated. There’s <a href="https://neal.fun/password-game/">The Password Game</a> - which I use to generate all my passwords - but nothing that lets me play with the passwords that I already have.</p>
<p>You can check out the code <a href="https://github.com/nolenroyalty/1Crossword">over here</a>.</p>
<!-- -->
<h2 id="toc:how-does-this-work">How does this work</h2>
<p>1Crossword is really simple. It’s a single ~650 line Python script with no (python) dependencies - although it does need the <a href="https://developer.1password.com/docs/cli/">1Password CLI</a> installed to get all your passwords.</p>
<p>Having no dependencies was important to me - some people seem to jealously guard their passwords (?) and I thought they’d feel more comfortable playing this game if they could easily read all of the code.</p>
<p>You can break the code into 3 components:</p>
<ul>
<li>Fetching passwords from 1Password</li>
<li>Generating a crossword from passwords</li>
<li>A UI for solving the crossword</li>
</ul>
<p>I’ll quickly go over how each works.</p>
<h2 id="toc:fetching-passwords-from-1password">Fetching passwords from 1Password</h2>
<p>Turns out this is pretty easy!</p>
<p>The 1Password CLI has support for listing logins (<code>op item list</code>) and for fetching a username and password for that login (<code>op item get --reveal</code>).</p>
<p>The hardest parts here are:</p>
<ol>
<li>Users have to tell 1Password “yes, it’s ok to give this program my passwords”</li>
<li>You have to fetch passwords one at a time</li>
</ol>
<p>I <em>think</em> I handle (1) fine - my code works on my macbook but I haven’t tested on all platforms.</p>
<p>(2) just means that my code is a little slow. I could have parallelized the fetching, but that’s annoying to do and since the password manager games space is weirdly uncompetitive I figured I’d just get this out the door instead.</p>
<h2 id="toc:generating-a-crossword-from-passwords">Generating a crossword from passwords</h2>
<p>This part was pretty fun and kinda tricky - I needed to write code that, given a list of words, generates a crossword for that set of words.</p>
<p>Some research showed me that:</p>
<ul>
<li>Generating a “dense” crossword from a word list was Hard</li>
<li>Generating a “sparse” crossword from a word list was Not That Hard</li>
<li>Reading code that constructs crosswords was Very Very Hard</li>
</ul>
<p>Since I was committed to writing all the code for 1Crossword myself I couldn’t just pull in existing crossword-construction software. After a couple of false starts I set out to write my own naive approach:</p>
<ul>
<li>Pick a random starting word</li>
<li>Find all the words that you can “hang off” of that word (e.g. you can hang “OUT” off of one of the O’s in “FOO”)</li>
<li>Try placing that word somewhere, respecting the rules of crosswords</li>
<li>Repeat until you can’t place any more words</li>
</ul>
<p>Now, this doesn’t generate a very good crossword! But it’s pretty fast and pretty easy. And with the introduction of a few more steps you start to get somewhere:</p>
<ul>
<li>Run the above steps to generate <em>many</em> crosswords</li>
<li>Score the crosswords based on density, words placed, and squareness</li>
<li>Pick the best one</li>
</ul>
<p>The big simplification my code makes is that it <em>never</em> allows the crossword to enter an invalid state. I’ll explain what I mean using part of the grid from today’s New York Times mini crossword:</p>
<pre><code><span>B A G E L
</span><span>A
</span><span>L
</span><span>E
</span></code></pre>
<p><em>grid by Christina Iverson, edited by Sam Ezersky</em></p>
<p>If my software was trying to create a “dense” crossword, it might place “AROSE” below BAGEL, understanding that “AR” is not a word - but that it could likely be turned into a word later. This process of slowly building up a crossword, tracking which invalid words are the hardest to complete, is the crux of generating dense crosswords.</p>
<p>But I just skipped that! My software will only place words such that any ancillary words generated are already valid. This prevents the need for backtracking and instead lets us get away with generating a lot of crosswords and picking the good ones.</p>
<p>So what was hard here? Well, crosswords have a whole lot of rules, and it can be finicky to keep track of them. My favorite edge case by far was that sometimes I would go to place a word, and in placing that word accidentally form it <em>again</em> somewhere else in the grid! This was very confusing until I figured out what was happening (<a href="https://github.com/nolenroyalty/1Crossword/blob/e6137f08e8ddf89c0ce7d803ca6ca52257cc2d6e/1crossword.py#L156">here’s the code</a>).</p>
<p>Anyway. <a href="https://github.com/nolenroyalty/1Crossword/blob/e6137f08e8ddf89c0ce7d803ca6ca52257cc2d6e/1crossword.py#L16">All my crossword constructing logic is ~250 lines</a> and I found it to be a pretty satisfying problem.</p>
<h2 id="toc:a-ui-for-solving-crosswords">A UI for solving crosswords</h2>
<p>This bit came together pretty quickly as well. I haven’t built a text-based interface in a few years and it was pretty satisfying! The basic logic is:</p>
<ul>
<li>Take in the finished grid, along with a list of “hints” for each answer (in this case, I thought website/username worked well)</li>
<li>Every turn, print out the grid in a nice format and prompt the user for a clue to fill in</li>
<li>Update the grid. When it’s fully filled in, tell the user whether they’re correct or not</li>
</ul>
<p>There are a few touches that make it a little nicer, like:</p>
<ul>
<li>A big ascii art banner along the top</li>
<li>Centering the text within the terminal (by comparing the terminal width to the length of the strings that we’re printing out)</li>
<li>Clearing the terminal on each action so that most of the UI doesn’t move</li>
</ul>
<h2 id="toc:wrapping-up">Wrapping up</h2>
<p>This all came together super quickly and to be honest it was all pretty straightforward. I wish I had some better technical stories for you, but I guess the bar for password-manager based games is just low enough that I didn’t need to solve anything particularly tricky.</p>
<p>I hope you enjoy 1Crossword! Please send your best passwords my way.</p></article></div>
  </body>
</html>
