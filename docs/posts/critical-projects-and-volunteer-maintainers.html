<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/900953/44823d451920e233/">Original</a>
    <h1>“Critical” projects and volunteer maintainers</h1>
    
    <div id="readability-page-1" class="page"><div>
<!-- $Id: slink-trial,v 1.1 2005-11-04 21:27:01 corbet Exp $ -->
<center>
<table>
<tbody><tr><td>
<h3>Welcome to LWN.net</h3>
<p>
The following subscription-only content has been made available to you 
by an LWN subscriber.  Thousands of subscribers depend on LWN for the 
best news from the Linux and free software communities.  If you enjoy this 
article, please consider accepting the trial offer on the right.  Thank you
for visiting LWN.net!
</p></td><td>
<div>
<h3>Free trial subscription</h3>
           <p>
           Try LWN for free for 1 month: no payment
           or credit card required.  <a href="https://lwn.net/Promo/slink-trial2-3/claim">Activate
           your trial subscription now</a> and see why thousands of
           readers subscribe to LWN.net.
           
</p></div>
</td>
</tr>

</tbody></table>
</center>

<p>
Over the last five decades or so, free and open-source software (FOSS) has
gone from an almost unknown 
quantity available to only the most technically savvy to underpinning much
of the infrastructure we rely on today.  Much like software itself, FOSS is
&#34;eating the world&#34;.  But that has changed—is changing—the role of the
maintainers of all of that code; when &#34;critical&#34; infrastructure uses code
from a FOSS project, suddenly, and perhaps without warning, that code
itself becomes critical.  But many maintainers of that software are
volunteers who did not set out to become beholden to the needs of large
companies and organizations when they released their code, they were just
scratching their itch—now lots of others are clamoring for theirs to be
scratched as well.  
</p>

<p>
The supply-chain security problem is clearly a serious one that needs
to be addressed.  The <a href="https://blog.jfo.click/Articles/878570/">Log4j incident</a>
provides a recent example of how a security vulnerability in a fairly small
component can ripple out across the internet by way of dependency chains.
Some projects depended directly on Log4j, but many others became
vulnerable because they were using some <i>other</i> library or package
that depended on Log4j—directly or indirectly.
</p>

<p>
Some of the places where dependency chains are often lengthy, and thus more
vulnerable to the intentional injection of malware, are various
language-specific repositories of packages.  Sites like the <a href="https://pypi.org/">Python Package Index</a> (PyPI) provide a huge
palette of components that can be used by applications or other libraries.
The <tt>pip</tt> tool that comes with Python will happily install PyPI
packages along with all of their dependencies, recursively.  Many other
languages have similar repositories and tooling.
</p>

<h4>Critical components</h4>

<p>
There are multiple efforts these days to identify the most critical
dependencies and to provide assistance to those projects so that they do
not end up in the <a href="https://blog.jfo.click/Articles/702751/">position of a pre-Heartbleed
OpenSSL</a>—or represent that one project in the <a href="https://xkcd.com/2347/">classic xkcd</a>. For example, the <a href="https://openssf.org/">Open 
Source Security Foundation</a> (OpenSSF) has its <a href="https://openssf.org/community/alpha-omega/">Alpha-Omega project</a>
that is identifying projects needing assistance with their security.
PyPI has also been identifying its packages that have been downloaded the
most over the last six months based on its <a href="https://warehouse.pypa.io/api-reference/bigquery-datasets.html">public
data sets</a>; those that are in the top 1% are deemed &#34;critical&#34;.  Roughly
3500 projects have been identified in this manner and the maintainers of those projects
are being <a href="https://pypi.org/security-key-giveaway/">offered a free
security key</a> to help them set up <a href="https://en.wikipedia.org/wiki/Multi-factor_authentication">two-factor
authentication</a> (2FA) for their PyPI accounts.
</p>

<p>
Authentication using 2FA is not currently required for any packages, but
PyPI plans to require it for maintainers of critical projects &#34;<q>in the
coming months</q>&#34;.  Once that goes into effect, maintainers who have not
enabled 2FA (using a security key or <a href="https://en.wikipedia.org/wiki/Time-based_one-time_password">time-based
one-time password</a> (TOTP) application) will presumably not be able to
make changes, such as updating the package.  That, of course, has its own
risk, in that a critical package may not be able to get the update it needs
for some serious vulnerability because its maintainers failed to sign up
for 2FA.
</p>

<p>
On July 8, Skip Montanaro <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219">posted</a>
a message to the Python discussion forum noting that a defunct project of
his, <a href="https://pypi.org/project/lockfile/">lockfile</a>, had been
identified as critical.  The project had been marked as deprecated at the
top of its <tt>README</tt> (with alternatives listed) and has
not seen any releases since 2015.  He wondered why it was considered
critical and asked: &#34;<q>What should I do to get rid of this designation?</q>&#34;
</p>

<p>
Donald Stufft <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219/2">said</a>
that the package is being downloaded roughly 10-million times per month.
Dustin Ingram pointed to the FAQ in the security-key giveaway announcement
that says &#34;<q>once the project has been designated as critical it retains
that designation indefinitely</q>&#34;, so lockfile will be considered critical
henceforth. The lockfile module is part of the <a href="https://www.openstack.org/">OpenStack project</a>; the
<tt>README</tt> file for lockfile suggests contacting the openstack-dev
mailing list for assistance in moving away from it.
</p>

<p>
It turns out that &#34;<q>no OpenStack projects declare direct dependencies on lockfile since
May 2015</q>&#34;, <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219/6">according
to &#34;fungi&#34;</a>, who is a system administrator for OpenStack.   But
 lockfile is still used by parts of the OpenStack project.
In a perfect demonstration of the insidious nature of dependency chains,
fungi <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219/11">tracked down its use</a> by the project:
</p><blockquote>
I&#39;ve found that some OpenStack projects depend on ansible-runner,
which in turn depends on python-daemon, which itself declares a
dependency on lockfile. I&#39;ll need to confer with other contributors
on a way forward, but probably it&#39;s to either help python-daemon
maintainers replace their use of lockfile, or help ansible-runner
maintainers replace their use of python-daemon.
</blockquote>


<p>
So most or all of the downloads of this &#34;critical&#34; PyPI project are
probably for continuous-integration testing of OpenStack  and the
components that use lockfile should likely have replaced it with something
else nearly eight years ago.  Hugo van Kemenade <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219/12">suggested</a>
encouraging people to stop using it; &#34;<q>if you&#39;re still in a position to
release, emit a DeprecationWarning on import suggesting the
replacements. Or something noisier like a UserWarning.</q>&#34; Paul Moore <a href="https://discuss.python.org/t/a-defunct-project-of-mine-has-been-categorized-as-critical/17219/13">noted</a>
that marking it as deprecated did not work, nor did ceasing releases
in 2015; &#34;<q>I&#39;m not at all sure &#39;tell people not to use it&#39; is a
viable strategy for getting marked as &#39;not critical&#39;.</q>&#34; 
</p>

<h4>Opinions</h4>

<p>
On July 9, Armin Ronacher <a href="https://lucumr.pocoo.org/2022/7/9/congratulations/">posted</a> his
thoughts about PyPI&#39;s 2FA requirement; that post was extensively discussed
<a href="https://blog.jfo.click/Articles/900671/">here at LWN</a>, <a href="https://news.ycombinator.com/item?id=32037562">at Hacker News</a>,
and elsewhere.  Ronacher makes it clear that he does not see 2FA as an
unreasonable burden for maintainers of PyPI projects, but he does wonder
where it all leads.  For one thing, it is, apparently, only critical
packages at PyPI that will be required to have 2FA set up, so &#34;<q>clearly
the index [PyPI] considers it burdensome enough to not enforce it for everybody</q>&#34;.
</p>

<p>
That creates something of a double standard.  As Ronacher put it, he did
not set out to  create a critical package, that was something that happened
organically.  But the kinds of problems that can be prevented through 2FA,
such as a malicious actor logging into PyPI with stolen credentials, can
happen with any package, not just popular ones. &#34;<q>In theory that type of
protection really should apply to every package.</q>&#34; 
</p>

<p>
But there is also a question of what <i>else</i> might be required down the
road.  When the projects at PyPI today were created, there was no mention
of 2FA, so other things may be added down the road as well.  
</p><blockquote>
There is a hypothetical future where the rules tighten. One could imagine
that an index would like to enforce cryptographic signing of newly released
packages. Or the index wants to enable reclaiming of critical packages if
the author does not respond or do bad things with the package. For instance
a critical package being unpublished is a problem for the ecosystem. One
could imagine a situation where in that case the Index maintainers take
over the record of that package on the index to undo the damage. Likewise
it&#39;s more than imaginable that an index of the future will require packages
to enforce a minimum standard for critical packages such as a certain SLO
[service level objective] for responding to critical incoming requests (security, trademark laws etc.).
</blockquote>


<p>
Some of those
requirements make perfect sense from a security standpoint; in fact, some should
perhaps be in place already.  But there is now an ongoing <a href="https://discuss.python.org/t/stop-allowing-deleting-things-from-pypi/17227">discussion</a>
about disallowing projects from being deleted from PyPI.  Obviously
deleting a project that other projects rely on is kind of an antisocial
act, but it does seem like something the author (and probably copyright
holder) should be allowed to do.  It can lead to chaos like the <a href="https://blog.jfo.click/Articles/681410/">famous left-pad fiasco</a>, however.  
</p>

<p>
The
recent 2FA push from PyPI led a maintainer to <a href="https://github.com/untitaker/python-atomicwrites/issues/61">accidentally
remove all of the old releases</a> of the <a href="https://pypi.org/project/atomicwrites/">atomicwrites</a> package.  As
noted by Stufft in the PyPI deletion discussion linked above, he restored
the atomicwrites releases at the request of the maintainer, but &#34;<q>it took
about an hour to restore 35 files</q>&#34;.   Finding a way to head off those
kinds of mistakes would be useful in addition to preventing downstream
chaos when a maintainer deletes their project.
</p><p>

As Ronacher noted, he is using the resources of PyPI for the distribution
of his projects, so he is willing to follow its rules, which are aimed at
protecting the users of the index.  But PyPI (and other similar
repositories for other languages) have something close to a monopoly over
project distribution, since </p><tt>pip</tt><p> is tied to it.  He wondered if a
solution along the lines of the </p><a href="https://blog.jfo.click/Articles/897435/"><tt>cargo vet</tt> tool</a><p> for Rust might
mean that package indexes can get out of the job of enforcing security
policies and to leave it to others to do so:
</p><blockquote>
What I like about the <tt>cargo-vet</tt> approach is that it separates the
concerns of running an index from vetting. It also means that in theory
that multiple competing indexes could be provided and vetting can still be
done. Most importantly it puts the friction of the vetting to the community
that most cares about this: commercial users. Instead of Open Source
maintainers having to jump through more hoops, the vetting can be
outsourced to others. Trusted &#34;Notaries&#34; could appear that provide vetting
for the most common library versions and won&#39;t approve of a new release
until it undergoes some vetting. 
</blockquote>

<h4>Reaction</h4>

<p>
Django developer James Bennett had a <a href="https://www.b-list.org/weblog/2022/jul/11/pypi/">sharply worded
reply</a> to Ronacher on July 11 (which was also <a href="https://news.ycombinator.com/item?id=32061428">discussed at Hacker
News</a> and no doubt elsewhere).  In much of it, Bennett seems to
be reacting to the arguments that others are making, rather than those that
Ronacher made.  But Bennett&#39;s main complaint with Ronacher is that he thinks
the <tt>cargo vet</tt> approach is flawed and that those who release
FOSS have a responsibility to users in an &#34;<q>ethical and social sense</q>&#34;, even
though any legal responsibility has been disclaimed in the
license. &#34;<q>Yeah, if you publish open-source code you do have some
responsibilities, whether you want them or not.</q>&#34; 
</p>

<p>
Bennett&#39;s list of responsibilities for a FOSS maintainer seem generally
reasonable, &#34;<q>because what they really boil down to is the basic societal
expectation of &#39;don&#39;t be an asshole&#39;</q>&#34;.  But he is raising a strawman
here, since Ronacher never argued that maintainers should be 
(allowed to be)
assholes.  Ronacher simply wondered what other requirements might be
imposed on maintainers over time, some of those that he mentioned
(e.g. a service level objective) would be quite
onerous for a volunteer maintainer. 
</p>

<p>
Bennett&#39;s weakest argument seems to be that Ronacher owes more to his users
than he might voluntarily choose to give because his work on FOSS has
opened various doors for him.  It is a fairly strange argument, in truth.
Overall, Bennett seems to be addressing lots of things that Ronacher did
not say, or even imply.  The heart of what Ronacher was trying to do was to
try to figure out where the boundaries are, not to claim they had already
been crossed.
</p>

<p>
It seems vanishingly unlikely that PyPI will be establishing two-day
security-fix timelines, for example, on its critical projects, but there
are surely lots of companies and other organizations out there that wish it
would. There is a general tendency for all humans (and their constructs
like companies) to shirk responsibilities if they can find another to pin
them on.  Companies and organizations that are shipping software that is dependent on the
FOSS supply chain need to be deeply involved in ensuring that the code is secure.
</p>

<p>
Doing that work will cost a lot of money and take a lot of time.  We are
seeing efforts to do that work, and the PyPI 2FA requirement is one of
those pieces.  It is hardly a panacea, but it is a useful step.  
</p>

<p>
As Luis Villa <a href="https://opensource.com/article/21/8/open-source-maintainers">noted</a>
last year, FOSS maintainers are being asked to do more and more things;
often they are being asked to do so without any compensation, though
perhaps &#34;doors opening&#34; counts to a limited extent.   As more critical
projects are identified, it is likely we will see more conflicts of this
nature.  What happens when a maintainer does not want to follow the
recommendations of OpenSSF (or some other similar effort) on changes?
Forks are generally seen as a hostile move, but one suspects that may
ultimately happen for projects that find themselves at odds with sponsoring
organizations.  That is a rather different world than the one FOSS grew up in.
</p></div></div>
  </body>
</html>
