<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/TenYearsNotLongEnough">Original</a>
    <h1>Ten years isn&#39;t long enough for maximum age settings</h1>
    
    <div id="readability-page-1" class="page"><div><h2>Ten years isn&#39;t long enough for maximum age settings</h2>

	<p><small>January  3, 2024</small></p>
</div><div><p>The recent news of the time interval is that <a href="https://mstdn.social/@jschauma/111688103150154714">a ten year certificate
built into every Keybase client expired at the end of 2023</a>. I had <a href="https://mastodon.social/@cks/111689032364322410">a little
reaction to this</a>:</p>

<blockquote><p>So much quiet damage has been done to so many people&#39;s pinned cert or
private CA deployments by ten-year defaults. So much.</p>

<p>(It happened to us so now our private OpenVPN CA root is much, much
longer.)</p>
</blockquote>

<p>If you&#39;re making an internal thing good for ten years, don&#39;t (whether
it is a TLS certificate or, for example, setting a retention duration
for some database). Ten years is either not long enough or too long.
If you&#39;re writing an example and use a ten year validity period,
please don&#39;t (people are sure to copy it). Ten years can sound like
an implausibly long time when you&#39;re setting something up, but as
we all know there&#39;s nothing quite as permanent as a quick hack and
there you are ten years later with some problems. <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/FailingAtTLSRootRollover">This happened
to us with OpenVPN</a> and <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/OpenVPNTLSRootExpirySolution">we failed to
find a solution</a>, to our pain.</p>

<p>If you don&#39;t have a plan to either roll over and renew whatever it
is or definitely take it out of service, ten years is far too short.
If you want to keep something active until you change your mind,
set your not-after date, retention duration, or whatever to as high
as you can. Ten years is a terrible value for this; it looks and
feels long enough but it isn&#39;t anywhere near sufficient.</p>

<p>(In some cases it may be a little bit of a problem that we&#39;re now
only fourteen years away from <a href="https://en.wikipedia.org/wiki/Year_2038_problem">the year 2038 issue</a>. But if you have
a problem there, it&#39;s better to find out about it early.)</p>

<p>If you want to definitely take your thing out of service after a
certain period of time, ten years is far too long. If your thing
is still in use as ten years approaches, it&#39;s almost guaranteed to
have wormed its way into all sorts of places, so that taking it out
of service will cause explosions and the possibility of this will
get people to show up demanding that its lifetime be extended
(assuming that people even remember where it&#39;s used and what depends
on it).</p>

<p>If you have a plan to roll over, extend, or renew the duration, ten
years is also far too long. As everyone has found out through painful
experience with TLS certificates, doing something only once every
few years is a recipe for problems (and for forgetting that it needs
to be done at all). To make sure you keep in practice and the process
still works, you need to do this much more frequently than once
every ten years. At this point I&#39;d probably try to do it twice a
year.</p>

<p>As it happens I&#39;m not without sin, because the retention time for
<a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/PrometheusGrafanaSetup-2019">our Prometheus database</a> is currently
&#39;3650 days&#39; from late November 2018. We may well run out of disk
space before then and when we get there we may decide we don&#39;t need
ten years (or more than ten years) after all, but I should probably
bump that up anyway since our intention is &#39;keep as much as we have
disk space for and maybe get more disk space if we&#39;re running short&#39;.
I should definitely have some sort of calendar entry for it, as a
reminder just in case.</p>

<p>(We do now check all of our long-lived internal TLS certificates
and alert if their expiry time is getting close. It&#39;s probably
overkill but it doesn&#39;t hurt. And some of them are less than a
decade away at this point.)</p>

<p>(This is related to <a href="https://utcc.utoronto.ca/~cks/space/blog/web/NotForever">a much older discovery that &#39;999 days&#39; is not
forever</a>, and for that matter neither is 9999
days, although that&#39;s 27 years and change so it&#39;s closer. 99999
days is long enough for almost everyone to not worry about it,
though.)</p>
</div></div>
  </body>
</html>
