<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buttondown.email/hillelwayne/archive/software-mise-en-place/">Original</a>
    <h1>Software Mise En Place</h1>
    
    <div id="readability-page-1" class="page"><div>
                
                    
                        <p>I am really, really into cooking. In the heady days of 2016 I regularly threw dinner parties for 30+ people. These days I don’t hate myself <em>that</em> much, but it’s still a big part of my life. I know more about my city’s best grocery stores than its best restaurants and regularly bring homemade candy to conferences. I really like cooking. </p>
<p>In order to cook well, you need to practice <em>mise en place</em>: prepping all your ingredients before you start cooking. If you have to chop and sear three types of vegetables, first you get them all out and washed, then you chop them all, then you sear them. You don’t start prepping one vegetable while another is already cooking.</p>
<p>You can think of it as organizing your cooking workflow so that tasks are separated into “low-intensity” preparation and “high-intensity” work, where you’re bound by focus and tight timing. Without <em>mise en place</em> you’re doing the easy prep at the same time as the hard work, which makes everything more stressful and mistakes more likely.</p>
<p>How can we apply <em>mise en place</em> to programming? The most straightforward translation is doing all the project infra work before writing the code, but I don’t think that’s always appropriate. Software is different from cooking; the task is unbound and your requirements change. It doesn’t make sense to do a lot of prep that may be unnecessary.</p>
<p>Instead I want to apply the <em>spirit</em> of <em>mise en place</em>: getting the easy parts of tasks done at a different time from the hard parts. I got a chance to explore that last week in my work on learntla, and it went really well! Here’s what it looked like:</p>
<h3>Mise en replasitories</h3>
<p>As longtime subscribers know, I’m updating <a href="https://learntla.com/introduction/" target="_blank">learntla</a>. In addition to a <a href="https://github.com/hwayne/learntla-v2" target="_blank">complete content rewrite</a>, I’m using better technology to build and maintain it. As part of that work, I wanted to make the site autodeploy. Every time I push to master, it should trigger a GitHub Action to build the docs and push the build to an S3 bucket.</p>
<p>Just one problem with this: I’ve never used GitHub actions before. So I had to figure that out, along with setting up proper S3 credentials and getting my site to build. If I tried to learn all that with my current version of the docs I’d go crazy. I use a <em>lot</em> of advanced features of sphinx that could get in the way of the actions. I’d be debugging <em>at least</em> four different sources of pipeline failures:</p>
<ol>
<li>Bugs from my ignorance of GitHub actions</li>
<li>Bugs from S3 APIs and credential issues</li>
<li>Bugs from all my weird sphinx configs and python requirements</li>
<li>Bugs from the documentation itself</li>
</ol>
<p>What does <em>mise in place</em> tell me? Separate the tasks. Find a way to prep just the action file, then just the credentials, then the idiosyncrasies of my projects. After that I can integrate the pipeline with the documentation proper.<sup id="fnref:walking-skeleton"><a href="#fn:walking-skeleton">1</a></sup> </p>
<p>I created a <a href="https://github.com/hwayne/sphinx-github-action-test" target="_blank">separate repository</a> with a minimal sphinx project. Once I got that building on every push, I added a step to push to an S3 bucket. I used a <a href="http://whoisgood.dog/sphinx-test/" target="_blank">separate test website</a> to avoid disrupting anything on the current infra. That helped me work out the credential setup.</p>
<p>After that, I adjusted the test project to match the specifics of my project more: docs in a subfolder, a custom theme, and python dependencies. This exposed a whole bunch of new issues I wasn’t expecting. But I could knock down each one individually, as opposed to facing them all at once.</p>
<p>I now have the complete pipeline. I won’t be porting it over to learntla until June or so, but when that time comes I’ll seriously benefit from having it all worked out ahead of time. I expect there will still be issues, but a lot fewer than if I started from scratch.</p>
<p>And just like cooking <em>mise en place</em>, this actually saves time, too! It took me an hour to do all the prep work and I’m estimating it’ll take another hour to integrate it. If I tried doing everything in June it’d probably take me 4-5 hours. I’m just not as productive when I’m stressed out.</p>
<p>Overall, I’d call this experiment in <em>mise en place</em> a huge success. I’ve started using it in other places, too. I’m writing a lot of <a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html#rst-directives" target="_blank">custom directives</a> for learntla. Turns out I can write them a lot faster in an empty sphinx project! </p>
<p>I’m thinking this could even be useful for integrating new software dependencies. If a dependency is sufficiently complex, it could be a lot easier to first port a snippet of project code over to a new repo, figure out how to integrate the dependency, and then backport it into the existing project.</p>
<div>
<hr/>
<ol>
<li id="fn:walking-skeleton">
<p>I’ve since heard this technique referred to as a <a href="https://twitter.com/JYCabello/status/1514691857158225925" target="_blank">walking skeleton</a>. Personally <em>mise en place</em> feels more “right” to me, but I would think that as a cook. <a href="#fnref:walking-skeleton" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
                    
                
            </div><p>
                    
                        You just read issue #177 of
                        Computer Things.
                    

                    
                        You can also browse the <a href="https://buttondown.email/hillelwayne/archive/">full archives</a>
                        of this newsletter.
                    
                </p></div>
  </body>
</html>
