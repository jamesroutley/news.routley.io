<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lists.debian.org/debian-devel/2023/10/msg00083.html">Original</a>
    <h1>Hyphens in man pages</h1>
    
    <div id="readability-page-1" class="page">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr/>



<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->

<hr/>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: debian-devel &lt;<a href="mailto:debian-devel%40lists.debian.org">debian-devel@lists.debian.org</a>&gt;</li>
<li><em>Subject</em>: Hyphens in man pages</li>
<li><em>From</em>: Antonio Russo &lt;<a href="mailto:aerusso%40aerusso.net">aerusso@aerusso.net</a>&gt;</li>
<li><em>Date</em>: Sat, 14 Oct 2023 20:51:27 -0600</li>
<li><em>Message-id</em>: &lt;<a href="https://lists.debian.org/msgid-search/e21c0729-0789-4079-b9a2-b9a4b1843e05@aerusso.net">[üîé]</a>¬†<a href="https://lists.debian.org/debian-devel/2023/10/msg00083.html">e21c0729-0789-4079-b9a2-b9a4b1843e05@aerusso.net</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr/>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hello,

I discovered a new pet peeve today: if you search for a command in a manual page,
say -e in man 1 zgrep, it&#39;s a crapshot whether just searching for &#39;-e&#39; will find
the command or not.  The reason is that &#34;-&#34; may been accidentally encoded as ‚Äê
instead of -.

Now, depending on your email client and settings, the above will appear to be the
ravings of an unhinged lunatic who wrote the same thing twice, or an unhinged
lunatic who slammed their fists onto the keyboard.

The reason is that man(1) convert bare dashes (0x2D) to hyphens (U+2010).  These
are not the same symbol: searching for one does not find the other without some
kind of normalization, pasting commands with one vs. the other does different
things.  New users who do not understand this will be discouraged trying to read
manual pages.  Chances are, they will fill forums with mundane questions that
could and should have been addressed by a simple search of a manual page.

I recently fixed a ton of these in another upstream package with this vim &#34;one-liner&#34;:

:%s/--\([a-z]\+\)\(-[a-z]\+\)*/\=substitute(submatch(0), &#39;-&#39;, &#39;\\-&#39;, &#39;g&#39;)/g

However, this requires manual review and does not fix the &#39;-e&#39; example from zgrep.
There are also a whole host of this kind of problem, e.g., dashes in URLs that get
naievely pasted into man pages (another live example I just addressed).

I come here with several questions:

 - Am I off-base thinking this is a problem?
 - Should we really be using troff to typeset anything in this year 2023?
   (In particular, if we can make the source text more human-readable, we might
   be able to leverage LLMs on this wealth of information in the future and automate
   support.  Are LLMs &#34;fluent&#34; in troff? I have not investigated at all.)
 - Are there any alternatives that actually produce nice looking man pages?
   (My experience with pandoc is that the source is still awkward, I literally
   just found another example of this bug in my own man page, and it looks pretty
   ugly in man. But maybe I just didn&#39;t find good examples/documentation.)
 - Should we try to come up with some lintian rules to flag this behavior?
   (This one: /--\([a-z]\+\)\(-[a-z]\+\)*/ finds long GNU-style commands, I&#39;d
   have to think for at least a little bit about finding short ones.  This would
   ultimately be fragile. For example, the above doesn&#39;t find partially broken
   tokens; i.e., only one unescaped dash.)
&lt;li&gt; Automated tooling around this, more generally, seems fragile.  HTML might have
   been a nice compromise, but writing that appears to be out of vogue these days,
   &lt;sarcasm intensity=&#34;medium&#34;&gt;despite being a pretty OK thing to read and write
   by hand&lt;/sarcasm&gt;.&lt;/li&gt; But seriously, I would love to be writing HTML instead
   of troff for manual pages.

Antonio</pre><p><strong>Attachment:
<a href="https://lists.debian.org/debian-devel/2023/10/bin8AN4dT_ZPQ.bin"><tt>OpenPGP_0xB01C53D5DED4A4EE.asc</tt></a></strong></p>
<p><strong>Attachment:
<a href="https://lists.debian.org/debian-devel/2023/10/pgpSD95L7uMcj.pgp"><tt>OpenPGP_signature.asc</tt></a></strong></p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr/>
<strong>Reply to:</strong>
<ul>
  <li><a href="mailto:debian-devel@lists.debian.org?in-reply-to=&lt;e21c0729-0789-4079-b9a2-b9a4b1843e05@aerusso.net&gt;&amp;subject=Re:%20Hyphens in man pages">debian-devel@lists.debian.org</a></li>
  <li><a href="mailto:aerusso@aerusso.net?in-reply-to=&lt;e21c0729-0789-4079-b9a2-b9a4b1843e05@aerusso.net&gt;&amp;subject=Re:%20Hyphens in man pages&amp;cc=debian-devel@lists.debian.org">Antonio Russo (on-list)</a></li>
  <li><a href="mailto:aerusso@aerusso.net?in-reply-to=&lt;e21c0729-0789-4079-b9a2-b9a4b1843e05@aerusso.net&gt;&amp;subject=Re:%20Hyphens in man pages">Antonio Russo (off-list)</a></li>
</ul>
<hr/>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00084" href="https://lists.debian.org/debian-devel/2023/10/msg00084.html">Re: Hyphens in man pages</a></strong>
<ul><li><em>From:</em> Jochen Sprickerhof &lt;jspricke@debian.org&gt;</li></ul></li>
<li><strong><a name="00085" href="https://lists.debian.org/debian-devel/2023/10/msg00085.html">Re: Hyphens in man pages</a></strong>
<ul><li><em>From:</em> &#34;G. Branden Robinson&#34; &lt;g.branden.robinson@gmail.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="https://lists.debian.org/debian-devel/2023/10/msg00082.html">Re: The Technical Committee needs you!</a></strong>
</li>
<li>Next by Date:
<strong><a href="https://lists.debian.org/debian-devel/2023/10/msg00084.html">Re: Hyphens in man pages</a></strong>
</li>
<li>Previous by thread:
<strong><a href="https://lists.debian.org/debian-devel/2023/10/msg00082.html">Re: The Technical Committee needs you!</a></strong>
</li>
<li>Next by thread:
<strong><a href="https://lists.debian.org/debian-devel/2023/10/msg00084.html">Re: Hyphens in man pages</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="https://lists.debian.org/debian-devel/2023/10/maillist.html#00083"><strong>Date</strong></a></li>
<li><a href="https://lists.debian.org/debian-devel/2023/10/threads.html#00083"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->


</div>
  </body>
</html>
