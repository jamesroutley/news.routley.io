<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://rachelbythebay.com/w/2021/11/07/select/">Original</a>
    <h1>But wait, there&#39;s more</h1>
    
    
<p>
There&#39;s something to be said for writing a 
<a href="https://rachelbythebay.com/w/2021/11/06/sql/">post</a>
late on a Saturday night.  For some reason, it tends to bring out 
<a href="https://rachelbythebay.com/w/2018/04/28/meta/">THE ONE</a>
more than any other time of the week.  I wonder why that is.
</p>
<p>
For those of you with better self-control than me who can manage to not 
look, there&#39;s a raging comment section on HN going on about yesterday&#39;s 
post, and most of it is about terrible SQL practices.  Basically, not 
only was I clueless 20 years ago, I definitely still am now.
</p>
<p>
I mean, you&#39;re not wrong... but how&#39;s the rest of that quote go?
</p>
<p>
Anyway, I figure the best thing for a raging trash fire is more fuel, 
and it turns out I left something out of yesterday&#39;s story!  After it 
went online, I was reading it out loud to someone in my life, and that&#39;s 
when it hit me: I forgot all about the shit show that was how I SELECTed 
data back out of the database.
</p>
<p>
Recall that it turned into a situation where the individual components 
of the query (ip, helo, from, to) were now in their own tables, so they 
all had a number now - the &#34;id&#34; column.  I figured, okay, I need to 
obtain those little suckers before I can build a query with them, so 
let&#39;s query!
</p>
<pre class="terminal">SELECT id FROM m_ips WHERE m_ip = &#39;...&#39;
 
SELECT id FROM m_helos WHERE m_helo = &#39;...&#39;
 
SELECT id FROM m_froms WHERE m_from = &#39;...&#39;
 
SELECT id FROM m_tos WHERE m_to = &#39;...&#39;
</pre>
<p>
So, yep, I fired off four queries to get four numbers, then built up a 
query, then fired 
<em>that</em>
off as a fifth to get my results.
</p>
<p>
Five round-trips to the database when one would have done.
</p>
<p>
Did I mention that I obviously didn&#39;t know the first thing about JOIN 
back then?  It took several more years for that to happen organically.
</p>
<p>
Go on, bag on me for being ignorant.  I know what that really means.
</p>

  </body>
</html>
