<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/buzz-language/buzz">Original</a>
    <h1>Show HN: Buzz, strongly typed scripting language written in Zig</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
    <a target="_blank" rel="noopener noreferrer" href="https://github.com/buzz-language/buzz/raw/main/logo.png"><img src="https://github.com/buzz-language/buzz/raw/main/logo.png" alt="buzz" width="204" height="204"/></a>
</p>

<p dir="auto">A small/lightweight typed scripting language written in Zig</p>
<p dir="auto">
    <a target="_blank" rel="noopener noreferrer" href="https://github.com/buzz-language/buzz/raw/main/example.png"><img src="https://github.com/buzz-language/buzz/raw/main/example.png" alt="buzz code example"/></a>
</p>
<h2 dir="auto"><a id="user-content-goals" aria-hidden="true" href="#goals"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Goals</h2>
<ul dir="auto">
<li>Small in size and complexity (just a bit more than Lua though)</li>
<li>Strict typing</li>
<li>Unambiguous</li>
<li>No nonsense coercion</li>
<li><a href="#fibers">Fibers</a></li>
<li>Tooling
<ul dir="auto">
<li><a href="https://github.com/buzz-language/buzz/blob/main/doc/index.md">Generate doc from docblocks (in progress)</a></li>
<li>LSP (in progress)</li>
<li>Debugger and DAP</li>
<li><a href="https://github.com/buzz-language/code">TextMate syntax</a></li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-progress" aria-hidden="true" href="#progress"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Progress</h2>
<p dir="auto">We&#39;re not far from completing <a href="https://github.com/buzz-language/buzz/milestone/1">miletone 0.1.0</a>. As writing buzz code is the best way of finding bugs, we implement a lot of features of the <a href="https://github.com/buzz-language/buzz/milestone/2">next</a> <a href="https://github.com/buzz-language/buzz/milestone/3">milestones</a> too.</p>
<h2 dir="auto"><a id="user-content-how-to-build" aria-hidden="true" href="#how-to-build"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build</h2>
<h3 dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h3>
<ul dir="auto">
<li>Since this is built with Zig, you should be able to build buzz on a wide variety of architectures even though this has only be tested on x86.</li>
<li>Linux or macOS (not much work is needed to make it work on <a href="https://github.com/buzz-language/buzz/issues/74" data-hovercard-type="issue" data-hovercard-url="/buzz-language/buzz/issues/74/hovercard">Windows</a>)</li>
<li>libpcre (not libpcre2)</li>
<li>libc on Linux</li>
<li>zig master</li>
</ul>
<h3 dir="auto"><a id="user-content-steps" aria-hidden="true" href="#steps"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Steps</h3>
<ol dir="auto">
<li>Clone project: <code>git clone https://github.com/buzz-language/buzz &lt;buzz_dir&gt;</code></li>
<li>Checkout submodules: <code>git submodule update --init</code></li>
<li>Build it: <code>zig build -Drelease-safe</code></li>
<li>Add to your shell rc:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="export BUZZ_PATH=&#34;/path/to/buzz/dist&#34;
export PATH=&#34;$BUZZ_PATH:$PATH&#34;"><pre><span>export</span> BUZZ_PATH=<span><span>&#34;</span>/path/to/buzz/dist<span>&#34;</span></span>
<span>export</span> PATH=<span><span>&#34;</span><span>$BUZZ_PATH</span>:<span>$PATH</span><span>&#34;</span></span></pre></div>
<ol start="5" dir="auto">
<li>Have fun: <code>buzz &lt;myscript.buzz&gt;</code></li>
</ol>
<p dir="auto">Additionnally, install the <a href="https://github.com/buzz-language/code">VS Code extension</a> to get syntax highlighting. If you don&#39;t use VS Code but your editor supports <a href="https://github.com/buzz-language/code/blob/main/syntaxes/buzz.tmLanguage.json">TextMate grammar files</a>, you can use that.</p>
<h2 dir="auto"><a id="user-content-quick-tour" aria-hidden="true" href="#quick-tour"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick tour</h2>
<p dir="auto"><strong>Note:</strong> You can also take a look at <code>tests/</code> for more examples.</p>
<ul dir="auto">
<li><a href="#types-and-variables">Types and variables</a></li>
<li><a href="#operators">Operators</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#enums">Enums</a></li>
<li><a href="#control-flow">Control flow</a></li>
<li><a href="#objects">Objects</a></li>
<li><a href="#protocols">Protocols</a></li>
<li><a href="#errors">Errors</a></li>
<li><a href="#import/export">Import/Export</a></li>
<li><a href="#fibers">Fibers</a></li>
<li><a href="#call-c/zig-code">Call C/Zig code</a></li>
</ul>
<h3 dir="auto"><a id="user-content-types-and-variables" aria-hidden="true" href="#types-and-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Types and variables</h3>
<div data-snippet-clipboard-copy-content="| Basic types
bool aBoolean = true;
| Immutable sequence of bytes
str aString = &#34;hello world&#34;;
str multiline = `
    i&#39;m on several
    lines
    yes
`;
| Numbers are either internally i64 or f64 and are coerced from one to the other as needed
num aNumber = 23;
aNumber = 0b110;
aNumber = 0xA12F;
| A PCRE regex
pat aPattern = _hello [a-z]+_;
| Userdata are pointers to foreign data wrapped inside a buzz obj
ud userdata = GetSomeForeignData();

| A constant
const num pi = 3.14;

| Data structures
[num] aListOfNumbers = [1, 2, 3];
| Keys and values can be of any type
{str, num} aMap = {
    &#34;one&#34;: 1,
    &#34;two&#34;: 2,
    &#34;three&#34;: 3,
};"><pre lang="buzz"><code>| Basic types
bool aBoolean = true;
| Immutable sequence of bytes
str aString = &#34;hello world&#34;;
str multiline = `
    i&#39;m on several
    lines
    yes
`;
| Numbers are either internally i64 or f64 and are coerced from one to the other as needed
num aNumber = 23;
aNumber = 0b110;
aNumber = 0xA12F;
| A PCRE regex
pat aPattern = _hello [a-z]+_;
| Userdata are pointers to foreign data wrapped inside a buzz obj
ud userdata = GetSomeForeignData();

| A constant
const num pi = 3.14;

| Data structures
[num] aListOfNumbers = [1, 2, 3];
| Keys and values can be of any type
{str, num} aMap = {
    &#34;one&#34;: 1,
    &#34;two&#34;: 2,
    &#34;three&#34;: 3,
};
</code></pre></div>
<h3 dir="auto"><a id="user-content-operators" aria-hidden="true" href="#operators"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Operators</h3>
<div data-snippet-clipboard-copy-content="| Comparison
12 == 12;
12 != 13;
12 &gt;= 12;
12 &lt;= 12;
12 &gt; 11;
12 &lt; 13;

| Arithmetic
12 + 12 == 24;
12 - 12 == 0;
12 * 12 == 144;
12 / 12 == 1;
12 % 12 == 0;

| Logical
12 &gt; 3 and 5 &lt; 12;
12 &gt; 3 or 12 &lt; 5;

| String
&#34;hello &#34; + &#34;world&#34; == &#34;hello world&#34;;
&#34;hello&#34; == &#34;hello&#34;;

| Bitwise
15 &lt;&lt; 3 == 120; | shift left
15 &gt;&gt; 3 == 1;   | shift right
12 &amp; 23 == 4    | and
15 ^ 3 == 12;   | xor
15 \ 3 == 15;   | or
~15 == -16;     | not"><pre lang="buzz"><code>| Comparison
12 == 12;
12 != 13;
12 &gt;= 12;
12 &lt;= 12;
12 &gt; 11;
12 &lt; 13;

| Arithmetic
12 + 12 == 24;
12 - 12 == 0;
12 * 12 == 144;
12 / 12 == 1;
12 % 12 == 0;

| Logical
12 &gt; 3 and 5 &lt; 12;
12 &gt; 3 or 12 &lt; 5;

| String
&#34;hello &#34; + &#34;world&#34; == &#34;hello world&#34;;
&#34;hello&#34; == &#34;hello&#34;;

| Bitwise
15 &lt;&lt; 3 == 120; | shift left
15 &gt;&gt; 3 == 1;   | shift right
12 &amp; 23 == 4    | and
15 ^ 3 == 12;   | xor
15 \ 3 == 15;   | or
~15 == -16;     | not
</code></pre></div>
<h4 dir="auto"><a id="user-content-optionals" aria-hidden="true" href="#optionals"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Optionals</h4>
<div data-snippet-clipboard-copy-content="str? aStringOrNull = &#34;hello&#34;;

| Null coalescing operator is `??`
str unwrapped = aStringOrNull ?? &#34;default value&#34;

| Force unwrapping with `!`
str unwrapped = aStringOrNull!;

| Graceful unwrapping
[num]? optList = null;

print(optList?.len()); | -&gt; null

| If unwrap
if (aStringOrNull -&gt; aString) {
    print(&#34;{aString} is not null&#34;);
} else {
    print(&#34;aString was null&#34;);
}"><pre lang="buzz"><code>str? aStringOrNull = &#34;hello&#34;;

| Null coalescing operator is `??`
str unwrapped = aStringOrNull ?? &#34;default value&#34;

| Force unwrapping with `!`
str unwrapped = aStringOrNull!;

| Graceful unwrapping
[num]? optList = null;

print(optList?.len()); | -&gt; null

| If unwrap
if (aStringOrNull -&gt; aString) {
    print(&#34;{aString} is not null&#34;);
} else {
    print(&#34;aString was null&#34;);
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-functions" aria-hidden="true" href="#functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Functions</h3>
<div data-snippet-clipboard-copy-content="fun sayHiTo(str name, str? lastName, num age) &gt; str {
    | Interpolation with `{}`
    return &#34;Hi {name} {lastName ?? &#34;&#34;}!&#34;
}

| Same could be an arrow function
fun sayHiTo(str name, str? lastName, num age) &gt; str -&gt; &#34;Hi {name} {lastName ?? &#34;&#34;}!&#34;"><pre lang="buzz"><code>fun sayHiTo(str name, str? lastName, num age) &gt; str {
    | Interpolation with `{}`
    return &#34;Hi {name} {lastName ?? &#34;&#34;}!&#34;
}

| Same could be an arrow function
fun sayHiTo(str name, str? lastName, num age) &gt; str -&gt; &#34;Hi {name} {lastName ?? &#34;&#34;}!&#34;
</code></pre></div>
<p dir="auto">When called, only the first argument name of a function can be omitted, order is not required:</p>
<div data-snippet-clipboard-copy-content="sayHiTo(&#34;Joe&#34;, age: 35, lastName: &#34;Doe&#34;); | -&gt; &#34;Hi Joe Doe!&#34;"><pre lang="buzz"><code>sayHiTo(&#34;Joe&#34;, age: 35, lastName: &#34;Doe&#34;); | -&gt; &#34;Hi Joe Doe!&#34;
</code></pre></div>
<p dir="auto">Functions are first-class citizens:</p>
<div data-snippet-clipboard-copy-content="Function() fn = fun () &gt; void -&gt; print(&#34;hello world&#34;); | Arrow function

fn(); | -&gt; &#34;hello world&#34;"><pre lang="buzz"><code>Function() fn = fun () &gt; void -&gt; print(&#34;hello world&#34;); | Arrow function

fn(); | -&gt; &#34;hello world&#34;
</code></pre></div>
<h4 dir="auto"><a id="user-content-generics" aria-hidden="true" href="#generics"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Generics</h4>
<div data-snippet-clipboard-copy-content="fun countMap(&lt;K, V&gt;, {K, V} map) &gt; num {
    return map.size();
}

{str, num} map = {
    &#34;one&#34;: 1,
    &#34;two&#34;: 2,
    &#34;three&#34;: 3,
};

countMap(&lt;str, num&gt;, map) == 3;"><pre lang="buzz"><code>fun countMap(&lt;K, V&gt;, {K, V} map) &gt; num {
    return map.size();
}

{str, num} map = {
    &#34;one&#34;: 1,
    &#34;two&#34;: 2,
    &#34;three&#34;: 3,
};

countMap(&lt;str, num&gt;, map) == 3;
</code></pre></div>
<h3 dir="auto"><a id="user-content-enums" aria-hidden="true" href="#enums"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enums</h3>
<div data-snippet-clipboard-copy-content="| Enums can have number or string values
enum Natural {
    zero,
    one,
    two,
}

Natural.zero.value == 0;

| Values must either be implicit or be all defined
enum(num) NumEnum {
    three = 3,
    four = 4,
    five = 5,
}

enum(str) Country {
    usa = &#34;United States of America&#34;,
    uk = &#34;United Kingdoms&#34;,
    fr = &#34;France&#34;,
}

| To get the value associated with a enum case
print(Country.usa.value); | -&gt; &#34;United States of America&#34;

enum(str) Locale {
    fr,
    en,
    it,
}

Locale.fr.value == &#34;fr&#34;;

| Create enum instance from its value
Locale? locale = Locale(&#34;fr&#34;);
locale == Locale.fr"><pre lang="buzz"><code>| Enums can have number or string values
enum Natural {
    zero,
    one,
    two,
}

Natural.zero.value == 0;

| Values must either be implicit or be all defined
enum(num) NumEnum {
    three = 3,
    four = 4,
    five = 5,
}

enum(str) Country {
    usa = &#34;United States of America&#34;,
    uk = &#34;United Kingdoms&#34;,
    fr = &#34;France&#34;,
}

| To get the value associated with a enum case
print(Country.usa.value); | -&gt; &#34;United States of America&#34;

enum(str) Locale {
    fr,
    en,
    it,
}

Locale.fr.value == &#34;fr&#34;;

| Create enum instance from its value
Locale? locale = Locale(&#34;fr&#34;);
locale == Locale.fr
</code></pre></div>
<h3 dir="auto"><a id="user-content-control-flow" aria-hidden="true" href="#control-flow"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Control flow</h3>
<div data-snippet-clipboard-copy-content="| The usual
if (someCondition) {
    | ...
} else if (anotherCondition) {
    | ...
} else {
    | ...
}

num i = 0;
while (i &lt; 10) {
    i = i + 1;
}

num j = 10;
do {
    j = j - 1;
} until (j == 0)

for (num i = 0; i &lt; 10; i = i + 1) {
    | ...
    break;
}"><pre lang="buzz"><code>| The usual
if (someCondition) {
    | ...
} else if (anotherCondition) {
    | ...
} else {
    | ...
}

num i = 0;
while (i &lt; 10) {
    i = i + 1;
}

num j = 10;
do {
    j = j - 1;
} until (j == 0)

for (num i = 0; i &lt; 10; i = i + 1) {
    | ...
    break;
}
</code></pre></div>
<h4 dir="auto"><a id="user-content-foreach" aria-hidden="true" href="#foreach"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>foreach</code></h4>
<p dir="auto"><code>foreach</code> can iterate over most data structures:</p>
<div data-snippet-clipboard-copy-content="foreach (SomeEnum case in SomeEnum) {
    | ...
}

foreach (num i, str value in listOfStrings) {
    | ...
}

foreach (str key, num value in aMap) {
    | ...
}

foreach (num i, str char in aString) {
    | ...
}

fib&lt;void, num?&gt; fibonnaciFib = &amp;fibonnaci(10);
foreach (num value in fibonnaciFib) {
    | ...
}"><pre lang="buzz"><code>foreach (SomeEnum case in SomeEnum) {
    | ...
}

foreach (num i, str value in listOfStrings) {
    | ...
}

foreach (str key, num value in aMap) {
    | ...
}

foreach (num i, str char in aString) {
    | ...
}

fib&lt;void, num?&gt; fibonnaciFib = &amp;fibonnaci(10);
foreach (num value in fibonnaciFib) {
    | ...
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-objects" aria-hidden="true" href="#objects"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Objects</h3>
<p dir="auto">An <code>object</code> is like a class except it can&#39;t be inherited from and can&#39;t inherit from anything:</p>
<div data-snippet-clipboard-copy-content="object Person {
    static population = 0;

    str name = &#34;Joe&#34;, | Fields can have default values
    num age = 35,

    | Method
    fun sayHello() &gt; void {
        print(&#34;Hello {this.name}&#34;);
    }

    | Object don&#39;t have constructor but you can implement one with a static method
    static init(str name, num age) &gt; Person {
        Person.population = Person.population + 1;

        return Person {
            name = name,
            age = age,
        };
    }
}"><pre lang="buzz"><code>object Person {
    static population = 0;

    str name = &#34;Joe&#34;, | Fields can have default values
    num age = 35,

    | Method
    fun sayHello() &gt; void {
        print(&#34;Hello {this.name}&#34;);
    }

    | Object don&#39;t have constructor but you can implement one with a static method
    static init(str name, num age) &gt; Person {
        Person.population = Person.population + 1;

        return Person {
            name = name,
            age = age,
        };
    }
}
</code></pre></div>
<h4 dir="auto"><a id="user-content-anonymous-objects" aria-hidden="true" href="#anonymous-objects"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Anonymous objects</h4>
<div data-snippet-clipboard-copy-content="| Anonymous objects don&#39;t have methods, static fields or default values
fun getInfo() &gt; obj{ str name, num age } {
    return .{
        name = &#34;Joe&#34;,
        age = 36,
    };
}

| ...

obj{ str name, num age } info = getInfo();"><pre lang="buzz"><code>| Anonymous objects don&#39;t have methods, static fields or default values
fun getInfo() &gt; obj{ str name, num age } {
    return .{
        name = &#34;Joe&#34;,
        age = 36,
    };
}

| ...

obj{ str name, num age } info = getInfo();
</code></pre></div>
<h3 dir="auto"><a id="user-content-protocols" aria-hidden="true" href="#protocols"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Protocols</h3>
<p dir="auto">A <code>protocol</code> defines a set of methods. Objects can conform to any number of them:</p>
<div data-snippet-clipboard-copy-content="protocol Translatable {
    fun translate(dx: num, dy: num) &gt; void;
}

protocol Printable {
    fun print() &gt; void;
}

object(Translatable, Printable) Point {
    num x,
    num y,

    fun translate(dx: num, dy: num) &gt; void {
        this.x = this.x + dx;
        this.y = this.y + dy;
    }

    fun print() &gt; void {
        print(&#34;Point ({this.x}, {this.y})&#34;);
    }
}

object(Printable) Line {
    Point start,
    Point end,

    fun print() &gt; void {
        print(&#34;Line ({this.start.x}, {this.start.y}) ({this.end.x}, {this.end.y})&#34;);
    }
}

| ...

[Printable] elements = [
    Point{ x = 0, y = 0 },
    Line{
        start = Point{ x = 10, y = 10 },
        end = Point{ x = 15, y = 12 },
    },
];

foreach (num i, Printable element in elements) {
    element.print();
}"><pre lang="buzz"><code>protocol Translatable {
    fun translate(dx: num, dy: num) &gt; void;
}

protocol Printable {
    fun print() &gt; void;
}

object(Translatable, Printable) Point {
    num x,
    num y,

    fun translate(dx: num, dy: num) &gt; void {
        this.x = this.x + dx;
        this.y = this.y + dy;
    }

    fun print() &gt; void {
        print(&#34;Point ({this.x}, {this.y})&#34;);
    }
}

object(Printable) Line {
    Point start,
    Point end,

    fun print() &gt; void {
        print(&#34;Line ({this.start.x}, {this.start.y}) ({this.end.x}, {this.end.y})&#34;);
    }
}

| ...

[Printable] elements = [
    Point{ x = 0, y = 0 },
    Line{
        start = Point{ x = 10, y = 10 },
        end = Point{ x = 15, y = 12 },
    },
];

foreach (num i, Printable element in elements) {
    element.print();
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-errors" aria-hidden="true" href="#errors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Errors</h3>
<p dir="auto">Functions must specify which error they can raise with <code>!&gt; type1, type2, ...</code>. Error can&#39;t be raised in the global scope. <code>test</code> functions ignore errors.</p>
<div data-snippet-clipboard-copy-content="enum(str) MyErrors {
    failed = &#34;Something failed&#34;,
    bad = &#34;Something bad&#34;,
    ohno = &#34;Oh no!&#34;,
}

enum(str) OtherErrors {
    failed = &#34;Something failed&#34;,
    bad = &#34;Something bad&#34;,
    ohno = &#34;Oh no!&#34;,
}

fun willFail() &gt; num !&gt; MyErrors, OtherErrors, str {
    num random = rand();
    if (random == 1) {
        throw MyErrors.failed;
    } else if (random == 0) {
        throw OtherErrors.failed;
    }

    throw &#34;something else&#34;;

    return 0;
}

| Use default value in case of any error
num result = willFail() catch 0;

| Try catch works as you would expect
try {
    willFail();
} catch (str error) {
    print(&#34;Caught error {error}&#34;);
} catch {
    print(&#34;Catches everything&#34;);
}

| Throwing an object instance with a `message` field will print the message
throw .{ message = &#34;Something&#39;s wrong&#34; } | -&gt; Error: Something&#39;s wrong
throw SomeObject{ number = 12 }          | -&gt; Error: object instance 0x1feb12 `SomeObject`"><pre lang="buzz"><code>enum(str) MyErrors {
    failed = &#34;Something failed&#34;,
    bad = &#34;Something bad&#34;,
    ohno = &#34;Oh no!&#34;,
}

enum(str) OtherErrors {
    failed = &#34;Something failed&#34;,
    bad = &#34;Something bad&#34;,
    ohno = &#34;Oh no!&#34;,
}

fun willFail() &gt; num !&gt; MyErrors, OtherErrors, str {
    num random = rand();
    if (random == 1) {
        throw MyErrors.failed;
    } else if (random == 0) {
        throw OtherErrors.failed;
    }

    throw &#34;something else&#34;;

    return 0;
}

| Use default value in case of any error
num result = willFail() catch 0;

| Try catch works as you would expect
try {
    willFail();
} catch (str error) {
    print(&#34;Caught error {error}&#34;);
} catch {
    print(&#34;Catches everything&#34;);
}

| Throwing an object instance with a `message` field will print the message
throw .{ message = &#34;Something&#39;s wrong&#34; } | -&gt; Error: Something&#39;s wrong
throw SomeObject{ number = 12 }          | -&gt; Error: object instance 0x1feb12 `SomeObject`
</code></pre></div>
<h3 dir="auto"><a id="user-content-importexport" aria-hidden="true" href="#importexport"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Import/Export</h3>
<div data-snippet-clipboard-copy-content="| hello.buzz

| Import std lib
import &#34;lib/std&#34;;

fun sayHello() &gt; void {
    print(&#34;Hello world!&#34;);
}

| Make it visible when imported
export sayHello;"><pre lang="buzz"><code>| hello.buzz

| Import std lib
import &#34;lib/std&#34;;

fun sayHello() &gt; void {
    print(&#34;Hello world!&#34;);
}

| Make it visible when imported
export sayHello;
</code></pre></div>
<div data-snippet-clipboard-copy-content="| main.buzz
import &#34;hello&#34;;

fun main([str] args) &gt; void {
    sayHello();
}"><pre lang="buzz"><code>| main.buzz
import &#34;hello&#34;;

fun main([str] args) &gt; void {
    sayHello();
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-fibers" aria-hidden="true" href="#fibers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fibers</h3>
<p dir="auto">Similar to Lua&#39;s coroutines. Buzz&#39;s fibers have their own state and stack and can be switched in and out from.
Fibers can yield from within any call depth. Any function can be wrapped in a fiber. Unlike Lua, <code>yield</code> are evaluated and dismissed
if a function is not called within a fiber and do not raise an error.
<code>resolve</code> allows to run a fiber until completion without stopping for any <code>yield</code>. It can be called after the fiber is over in order to
get the wrapped function return value.</p>
<div data-snippet-clipboard-copy-content="| Returns a string, yields numbers
| Always yields an optional type because null is returned if you resume a terminated fiber
fun count(num n) &gt; str &gt; num? {
    for (num i = 0; i &lt; n; i = i + 1) {
        | If the function is not called in a fiber, yields are evaluated and dismissed
        | Otherwise the value is returned as `resume` result
        yield i;
    }

    return &#34;Counting is done!&#34;;
}

fun main([str] args) &gt; void {
    | Wraps the call to `count` in a fiber, however the fiber is not started until a `resolve` or `resume` instruction
    fib&lt;str, num?&gt; counter = &amp;count(10);

    num sum = 0;
    while (!counter.over()) {
        | resume returns null if nothing was yielded and/or fiber is over
        sum = sum + resume counter ?? 0;
    }

    assert(resolve counter == &#34;Counting is done!&#34;, message: &#34;resolve returns fiber return value&#34;);
}"><pre lang="buzz"><code>| Returns a string, yields numbers
| Always yields an optional type because null is returned if you resume a terminated fiber
fun count(num n) &gt; str &gt; num? {
    for (num i = 0; i &lt; n; i = i + 1) {
        | If the function is not called in a fiber, yields are evaluated and dismissed
        | Otherwise the value is returned as `resume` result
        yield i;
    }

    return &#34;Counting is done!&#34;;
}

fun main([str] args) &gt; void {
    | Wraps the call to `count` in a fiber, however the fiber is not started until a `resolve` or `resume` instruction
    fib&lt;str, num?&gt; counter = &amp;count(10);

    num sum = 0;
    while (!counter.over()) {
        | resume returns null if nothing was yielded and/or fiber is over
        sum = sum + resume counter ?? 0;
    }

    assert(resolve counter == &#34;Counting is done!&#34;, message: &#34;resolve returns fiber return value&#34;);
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-call-czig-code" aria-hidden="true" href="#call-czig-code"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Call C/Zig code</h3>
<p dir="auto">First define the buzz interface. The <code>extern</code> keyword means that buzz we&#39;ll look for a dynamic library named <code>libmylib.dylib</code> (only dylib right now):</p>
<div data-snippet-clipboard-copy-content="| mylib.buzz
extern fun assert(bool condition, str message) &gt; void"><pre lang="buzz"><code>| mylib.buzz
extern fun assert(bool condition, str message) &gt; void
</code></pre></div>
<p dir="auto">Then implement it in Zig or C using the <a href="https://github.com/buzz-language/buzz/blob/main/lib/buzz_api.zig">buzz_api</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="// buzz_mylib.zig
const std = @import(&#34;std&#34;);
const api = @import(&#34;buzz_api.zig&#34;);

// We have to respect C ABI
export fn assert(vm: *api.VM) c_int {
    var condition: bool = vm.bz_peek(1).bz_valueToBool();

    if (!condition) {
        vm.bz_throw(vm.bz_peek(0));
    }

    return 0;
}"><pre><span>// buzz_mylib.zig</span>
<span>const</span> <span>std</span> <span>=</span> <span>@import</span>(<span>&#34;std&#34;</span>);
<span>const</span> <span>api</span> <span>=</span> <span>@import</span>(<span>&#34;buzz_api.zig&#34;</span>);

<span>// We have to respect C ABI</span>
<span>export</span> <span>fn</span> <span>assert</span>(<span>vm</span>: <span>*</span><span>api.VM</span>) <span>c_int</span> {
    <span>var</span> <span>condition</span>: <span>bool</span> <span>=</span> <span>vm</span>.<span>bz_peek</span>(<span>1</span>).<span>bz_valueToBool</span>();

    <span>if</span> (<span>!</span><span>condition</span>) {
        <span>vm</span>.<span>bz_throw</span>(<span>vm</span>.<span>bz_peek</span>(<span>0</span>));
    }

    <span>return</span> <span>0</span>;
}</pre></div>
<p dir="auto">Build a dynamic library for it (TODO: instructions for this) and you can use it in your buzz code:</p>
<div data-snippet-clipboard-copy-content="| main.buzz
import &#34;mylib&#34;

fun main([str] args) &gt; void {
    assert(1 + 1 == 2, message: &#34;Congrats on doing math!&#34;);
}"><pre lang="buzz"><code>| main.buzz
import &#34;mylib&#34;

fun main([str] args) &gt; void {
    assert(1 + 1 == 2, message: &#34;Congrats on doing math!&#34;);
}
</code></pre></div>
<p dir="auto"><em>Native</em> functions have all the same signature <code>fn myfunction(vm: *VM) bool</code>. If values must be returned, push them on the stack and return <code>true</code>.</p>
<p dir="auto">
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/ziglang/logo/master/zig-logo-dark.svg"><img src="https://raw.githubusercontent.com/ziglang/logo/master/zig-logo-dark.svg" alt="zig" height="100"/></a>
</p>
</article>
          </div></div>
  </body>
</html>
