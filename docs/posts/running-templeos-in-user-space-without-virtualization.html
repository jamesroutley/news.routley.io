<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/1fishe2fishe/EXODUS">Original</a>
    <h1>Show HN: Running TempleOS in user space without virtualization</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto"><a id="user-content-exodus-executable-divine-operating-system-in-userspace" aria-label="Permalink: EXODUS: Executable Divine Operating System in Userspace" href="#exodus-executable-divine-operating-system-in-userspace"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="http://tinylogger.com/1fishe2fishe/EXODUS/blob/master/img/Exodus.png"><img src="http://tinylogger.com/1fishe2fishe/EXODUS/raw/master/img/Exodus.png" alt="EXODUS"/></a></p>
<p dir="auto">EXODUS is a port of the TempleOS kernel to user space for Linux, Windows and FreeBSD.
EXODUS makes HolyC a user-space general programming language that
isn&#39;t just an exclusivity of virtual machines. It contains a mostly
full-featured GUI from stock TempleOS, and a CLI mode which has found
uses for running the networked servers automatically and building
EXODUS&#39; kernel itself.</p>
<div dir="auto"><a id="user-content-building-exodus" aria-label="Permalink: Building EXODUS" href="#building-exodus"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Linux/FreeBSD</h2><a id="user-content-linuxfreebsd" aria-label="Permalink: Linux/FreeBSD" href="#linuxfreebsd"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Install the packages for CMake and the development headers for SDL2.
Navigate to the directory and run these commands:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mkdir build
cd build
cmake ..
make -j$(nproc);
cd .."><pre>mkdir build
<span>cd</span> build
cmake ..
make -j<span><span>$(</span>nproc<span>)</span></span><span>;</span>
<span>cd</span> ..</pre></div>
<p dir="auto">You&#39;ll see the <code>exodus</code> binary. NOTE: <code>WARN</code>s during the build process aren&#39;t
a sign of failure.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Windows</h2><a id="user-content-windows" aria-label="Permalink: Windows" href="#windows"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Windows users tend to be less technically sophisticated,
so here is a more detailed instruction:</p>
<ol dir="auto">
<li>Install <a href="https://msys2.org" rel="nofollow">msys2</a></li>
<li>Run &#34;MSYS2 MINGW64&#34; (NOTE: <em><strong>MUST</strong></em> BE MINGW64, NO SUPPORT FOR OTHER ENVIRONMENTS)</li>
<li>Run <code>pacman -Sy mingw-w64-x86_64-{gcc,SDL2,cmake}</code></li>
<li>Run the following after navigating to the directory(Ignore any <code>WARN</code>s):</li>
</ol>
<div data-snippet-clipboard-copy-content="mkdir build
cd build
cmake ..
ninja
cd .."><pre><code>mkdir build
cd build
cmake ..
ninja
cd ..
</code></pre></div>
<ol start="5" dir="auto">
<li>You will see the <code>exodus</code> binary in the directory</li>
</ol>
<div dir="auto"><a id="user-content-running-exodus" aria-label="Permalink: Running EXODUS" href="#running-exodus"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Run EXODUS with <code>./exodus</code>.</p>
<p dir="auto">Consult <code>./exodus -h</code> for more command-line options such as CLI mode.</p>
<div dir="auto"><a id="user-content-features" aria-label="Permalink: Features" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Host filesystem integration (T:/ is the root drive, and Z:/ is where EXODUS was launched)</li>
<li>Documentation in T:/Server (run <code>#include &#34;run&#34;;</code> after <code>Cd(&#34;Server&#34;);</code>, on localhost:8080)</li>
<li>Mostly orthodox TempleOS GUI</li>
<li>CLI mode</li>
<li>Community software in T:/Community, such as Satania-buddy and games like BlazeItFgt2</li>
<li>Networking (Take a look at T:/Community/{gihon,HolyIRC} and T:/Server&#39;s code)</li>
</ul>
<p dir="auto">There have been some disputes on whether TempleOS can have networking or not.
To borrow the man&#39;s words, God did not ban networking.
Terry didn&#39;t implement networking in stock TempleOS because of
the line number restriction.</p>
<p dir="auto"><a href="https://old.reddit.com/r/TempleOS_Official/comments/2pzdy6/can_there_be_networking/cn1kshe/" rel="nofollow">&#34;God did not ban networking&#34;</a> <a href="https://archive.is/0epu3" rel="nofollow">(archived)</a></p>
<p dir="auto">Terry has also documented that the ideal TempleOS PC needs networking through a simple
serial interface.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="http://tinylogger.com/1fishe2fishe/EXODUS/blob/master/img/serialnetworking.png"><img src="http://tinylogger.com/1fishe2fishe/EXODUS/raw/master/img/serialnetworking.png" alt="Networking with serial"/></a></p>
<div dir="auto"><a id="user-content-changes-from-stock-templeos" aria-label="Permalink: Changes from stock TempleOS" href="#changes-from-stock-templeos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>The Windows key functionality has been replaced with the Alt key</li>
<li>Context switching is slower than a VM or native hardware because it runs in Ring 3, but it does not degrade general performance</li>
<li>Ring-0 opcodes (HLT, etc) and routines (InU8, etc) are not available (you can assemble the opcodes but they&#39;ll raise a fault)</li>
<li>Fs and Gs are pointers to CTask/CCPU instead of the whole structures at gs:0x28 and gs:0x50 respectively <a href="https://en.wikipedia.org/wiki/Win32_Thread_Information_Block#Contents_of_the_TIB_on_Windows" rel="nofollow">(blame microsoft)</a></li>
</ul>
<p dir="auto">A bit of trivia on Fs and Gs, gs:0 is not touched by 64 bit Windows but it&#39;s written to (not sure about read) on Wine, which doesn&#39;t guarantee consistency of gs:0. TEBs are allocated 0x2000 apart and sizeof(TEB) is 0x1838 so I could probably use 0x1900 or something but that seemed too hacky. Eventually I had to resort storing Fs at gs:0x28 and Gs at gs:0x50 (NtCurrentTeb()-&gt;ActiveRpcHandle (it isn&#39;t used anywhere)).</p>
<div dir="auto"><a id="user-content-contributing" aria-label="Permalink: Contributing" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="http://tinylogger.com/1fishe2fishe/EXODUS/blob/master/CONTRIBUTING.md">Refer to this document.</a></p>
<div dir="auto"><a id="user-content-very-quick-holyc-reference" aria-label="Permalink: Very quick HolyC reference" href="#very-quick-holyc-reference"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="/* CTRL+SHIFT+F&lt;num shown in autocomplete window&gt;
 * after typing in a function name will show its src */
DirMk(&#34;folder&#34;);
Dir;
Dir(&#34;fold*&#34;);//supports wildcards
Cd(&#34;folder&#34;);
Man(&#34;Ed&#34;);
Ed(&#34;file.HC.Z&#34;);
Unzip(&#34;file.HC.Z&#34;);
Zip(&#34;file.HC&#34;);
Find(&#34;str&#34;,,&#34;-i&#34;);//&#34;-i&#34; is for case-sensitivity (grep -rn . -e str)
FF(&#34;file.*&#34;);//find .|grep file
RedSeaISO(&#34;Something.ISO.C&#34;,&#34;Community&#34;);//archive folder into an ISO
MountFile(&#34;Something.ISO.C&#34;);//defaults to M
Cd(&#34;M:/&#34;);
*0=0;//Raise the debugger
DbgHelp;//help on how to debug
Shutdown;"><pre><span>/* CTRL+SHIFT+F&lt;num shown in autocomplete window&gt;</span>
<span> * after typing in a function name will show its src */</span>
<span>DirMk</span>(<span>&#34;folder&#34;</span>);
<span>Dir</span>;
<span>Dir</span>(<span>&#34;fold*&#34;</span>);<span>//supports wildcards</span>
<span>Cd</span>(<span>&#34;folder&#34;</span>);
<span>Man</span>(<span>&#34;Ed&#34;</span>);
<span>Ed</span>(<span>&#34;file.HC.Z&#34;</span>);
<span>Unzip</span>(<span>&#34;file.HC.Z&#34;</span>);
<span>Zip</span>(<span>&#34;file.HC&#34;</span>);
<span>Find</span>(<span>&#34;str&#34;</span>,,<span>&#34;-i&#34;</span>);<span>//&#34;-i&#34; is for case-sensitivity (grep -rn . -e str)</span>
<span>FF</span>(<span>&#34;file.*&#34;</span>);<span>//find .|grep file</span>
<span>RedSeaISO</span>(<span>&#34;Something.ISO.C&#34;</span>,<span>&#34;Community&#34;</span>);<span>//archive folder into an ISO</span>
<span>MountFile</span>(<span>&#34;Something.ISO.C&#34;</span>);<span>//defaults to M</span>
<span>Cd</span>(<span>&#34;M:/&#34;</span>);
<span>*</span><span>0</span><span>=</span><span>0</span>;<span>//Raise the debugger</span>
<span>DbgHelp</span>;<span>//help on how to debug</span>
<span>Shutdown</span>;</pre></div>
<div dir="auto"><a id="user-content-credits" aria-label="Permalink: Credits" href="#credits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/argtable/argtable3">argtable3</a></li>
<li><a href="https://qt.gitorious.org/qt/qtbase/blobs/master/src/corelib/global/qprocessordetection.h" rel="nofollow">qprocessordetection.h</a></li>
<li><a href="https://github.com/rxi/dyad">dyad</a></li>
<li><a href="https://github.com/rxi/map">map</a></li>
<li><a href="https://github.com/rxi/vec">vec</a></li>
<li><a href="https://github.com/daanx/isocline">isocline</a></li>
<li><a href="https://github.com/minexew/templeos-loader">templeos-loader</a></li>
</ul>
<p dir="auto">People:</p>
<ul dir="auto">
<li><a href="https://github.com/nrootconauto">nrootconauto</a> for working on the Wiki</li>
</ul>
</article></div></div>
  </body>
</html>
