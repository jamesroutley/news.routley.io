<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ktema.org/articles/the-overengineered-resume/">Original</a>
    <h1>The Overengineered Resume with Zola, JSON Resume, Weasyprint, and Nix</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>










<p>Maintaining a resume is not the most interesting use of time. Naturally, when I needed to bring my own up to date, I decided to spend a great deal more time on it and overengineer the process.</p>
<p>I wanted a bunch of things that didn&#39;t necessarily fit together that well:</p>
<ul>
<li>A split between content and presentation, so that I could maintain my resume data separately from how it&#39;s rendered and swap out different rendered formats.</li>
<li>Version control. I wanted everything in Git, in text-based formats that I can diff or process with scripts.</li>
<li>Multiple output formats, at least in theory.
<ul>
<li>PDF rendering, since most career sites accept PDF uploads.</li>
<li>The option to publish my resume as a web page in the future.</li>
</ul>
</li>
<li>More visual flair and typesetting control than basic Google Docs-style resume templates. (I know applicant-tracking systems don&#39;t see visual flair, but it makes me happy).</li>
<li>Straightforward text embedding in PDFs to ensure those ATSs <em>do</em> see what they need.</li>
<li>Not to use LaTeX. It&#39;s been years since I used LaTeX in anger, and I&#39;d prefer to stick with web technologies I know well.</li>
</ul>
<p>Here&#39;s where I ended up. (And <a href="https://ktema.org/Resume-David-Reed.pdf">here&#39;s</a> the actual output).</p>
<h2 id="building-a-data-driven-resume">Building a Data-Driven Resume</h2>
<p>I&#39;m only aware of one standard for representing resume data: <a href="https://jsonresume.org/schema/">JSON Resume</a>. I always prefer to use standards where I can, although I&#39;m disappointed there isn&#39;t a stronger ecosystem around this one. (And all the more that the major HR applications don&#39;t ingest it).</p>
<p>Because I wanted to avoid LaTeX, I decided to try templating my resume data into either Markdown or HTML and CSS and then rendering that content as a PDF. That also gave me the optionality I was looking for on output formats; if I wanted a resume web page, I could just publish the HTML with a different stylesheet.</p>
<p>I already use the static site generator <a href="https://www.getzola.org/">Zola</a> to build this website. Zola&#39;s Tera template engine is very similar to Jinja2, making it comfortable for me, and it&#39;s very fast.</p>
<p>The HTML-to-PDF tool space doesn&#39;t have a huge number of players in it and most of the players seem to be eccentric in some respect. I&#39;ve played with this kind of rendering in the past and had some success with <a href="https://weasyprint.org/">Weasyprint</a>, so I brought it back for this effort.</p>
<p>Here&#39;s how these components come together into a data-to-PDF pipeline:</p>

<p><svg id="mermaid-svg" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 634.609375px;" viewBox="-8 -8 634.609375 176" role="graphics-document document" aria-roledescription="flowchart-v2" xmlns:xlink="http://www.w3.org/1999/xlink"><g><marker id="flowchart-pointEnd" viewBox="0 0 10 10" refX="10" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-pointStart" viewBox="0 0 10 10" refX="0" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-circleEnd" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-circleStart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" style="stroke-width: 1; stroke-dasharray: 1, 0;"></circle></marker><marker id="flowchart-crossEnd" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><marker id="flowchart-crossStart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" style="stroke-width: 2; stroke-dasharray: 1, 0;"></path></marker><g><g></g><g><path d="M148.546875,59L152.71354166666666,59C156.88020833333334,59,165.21354166666666,59,175.0462766921158,63.25119661576836C184.87901171756496,67.50239323153671,196.21114843512996,76.00478646307344,201.87721679391242,80.25598307884181L207.54328515269492,84.50717969461017" id="L-json_resume-zola-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M132.5703125,143L139.39973958333334,143C146.22916666666666,143,159.88802083333334,143,172.38351627544913,138.9154700508983C184.87901171756496,134.8309401017966,196.21114843512996,126.66188020359323,201.87721679391242,122.57735025449153L207.54328515269492,118.49282030538983" id="L-zola_template-zola-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M261.5625,101.5L265.6458333333333,101.41666666666667C269.7291666666667,101.33333333333333,277.8958333333333,101.16666666666667,286.1458333333333,101.08333333333333C294.3958333333333,101,302.7291666666667,101,306.8958333333333,101L311.0625,101" id="L-zola-html-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M358.15625,17L363.5104166666667,17C368.8645833333333,17,379.5729166666667,17,393.0058283730159,21.25C406.43874007936506,25.5,422.5962301587301,34,430.6749751984127,38.25L438.75372023809524,42.5" id="L-css-weasyprint-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M365.28125,101L369.4479166666667,101C373.6145833333333,101,381.9479166666667,101,394.1933283730159,96.91666666666667C406.43874007936506,92.83333333333333,422.5962301587301,84.66666666666667,430.6749751984127,80.58333333333333L438.75372023809524,76.5" id="L-html-weasyprint-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path><path d="M526.96875,59.5L531.0520833333334,59.416666666666664C535.1354166666666,59.333333333333336,543.3020833333334,59.166666666666664,551.5520833333334,59.083333333333336C559.8020833333334,59,568.1354166666666,59,572.3020833333334,59L576.46875,59" id="L-weasyprint-pdf-0" style="fill:none;" marker-end="url(#flowchart-pointEnd)"></path></g><g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g><g><g transform="translate(0, 0)"><foreignObject width="0" height="0"></foreignObject></g></g></g><g><g id="flowchart-zola-0" transform="translate(229.8046875, 101)"><polygon points="8.5,0 54.015625,0 62.515625,-17 54.015625,-34 8.5,-34 0,-17" transform="translate(-31.2578125,17)" style=""></polygon><g style="" transform="translate(-15.2578125, -9.5)"><rect></rect><foreignObject width="30.515625" height="19"><p><span>Zola</span></p></foreignObject></g></g><g id="flowchart-json_resume-1" transform="translate(74.2734375, 59)"><rect style="" rx="5" ry="5" x="-74.2734375" y="-17" width="148.546875" height="34"></rect><g style="" transform="translate(-66.7734375, -9.5)"><rect></rect><foreignObject width="133.546875" height="19"><p><span>JSON Resume Data</span></p></foreignObject></g></g><g id="flowchart-zola_template-3" transform="translate(74.2734375, 143)"><rect style="" rx="5" ry="5" x="-58.296875" y="-17" width="116.59375" height="34"></rect><g style="" transform="translate(-50.796875, -9.5)"><rect></rect><foreignObject width="101.59375" height="19"><p><span>Tera Template</span></p></foreignObject></g></g><g id="flowchart-css-5" transform="translate(338.171875, 17)"><rect style="" rx="5" ry="5" x="-19.984375" y="-17" width="39.96875" height="34"></rect><g style="" transform="translate(-12.484375, -9.5)"><rect></rect><foreignObject width="24.96875" height="19"><p><span>CSS</span></p></foreignObject></g></g><g id="flowchart-html-7" transform="translate(338.171875, 101)"><rect style="" rx="5" ry="5" x="-27.109375" y="-17" width="54.21875" height="34"></rect><g style="" transform="translate(-19.609375, -9.5)"><rect></rect><foreignObject width="39.21875" height="19"><p><span>HTML</span></p></foreignObject></g></g><g id="flowchart-pdf-8" transform="translate(597.5390625, 59)"><rect style="" rx="5" ry="5" x="-21.0703125" y="-17" width="42.140625" height="34"></rect><g style="" transform="translate(-13.5703125, -9.5)"><rect></rect><foreignObject width="27.140625" height="19"><p><span>PDF</span></p></foreignObject></g></g><g id="flowchart-weasyprint-9" transform="translate(470.875, 59)"><polygon points="8.5,0 102.6875,0 111.1875,-17 102.6875,-34 8.5,-34 0,-17" transform="translate(-55.59375,17)" style=""></polygon><g style="" transform="translate(-39.59375, -9.5)"><rect></rect><foreignObject width="79.1875" height="19"><p><span>Weasyprint</span></p></foreignObject></g></g></g></g></g></svg></p>
<p>Resume data is defined in a <code>resume.yaml</code> file, using the JSON Resume schema. I find it much more pleasant to author YAML than JSON, and Zola supports both formats just fine. Here&#39;s the opening of my resume in YAML:</p>
<pre data-lang="yaml"><code data-lang="yaml"><span></span><span><span><span>basics</span></span><span>:</span>
</span><span>  <span><span>name</span></span><span>:</span> <span>David Reed</span>
</span><span>  <span><span>label</span></span><span>:</span> <span>Technical architect, engineer, communicator</span>
</span><span>  <span><span>email</span></span><span>:</span> <span>david@ktema.org</span>
</span><span>  <span><span>url</span></span><span>:</span> <span>https://ktema.org</span>
</span><span>  <span><span>summary</span></span><span>:</span> <span>|</span>
</span><span><span>    I am a product-minded full-stack engineer and technical architect. I lead exceptional teams in building and scaling SaaS applications that shorten time-to-value for customers and maximize productivity for internal stakeholders. I&#39;ve designed, shipped, and stewarded platforms that span CLI to cloud.
</span></span><span><span>
</span></span><span><span>    I&#39;m passionate about delivering products that empower every role to do their most impactful work, from engineers to business users. I believe in async, distributed work and thrive in cross-functional teams. I strive to center compassion in everything I build.
</span></span></code></pre>
<p>The comment at the top instructs the YAML language server to use the JSON Resume schema to validate the data, which means I get hints in my editor where I&#39;ve specified something invalid.</p>
<p>On the Zola side, I need a template. The template defines the structure of my resume - how the data is converted into a readable, formatted, attractive presentation. Here&#39;s the opening of the template I developed (note that it uses the Jinja2-like Tera template language):</p>
<pre data-lang="html"><code data-lang="html"><span>{% set resume = load_data(path=&#34;content/resume.yaml&#34;) %}
</span><span>
</span><span><span><span>&lt;!</span><span>DOCTYPE</span> <span>html</span><span>&gt;</span></span>
</span><span><span><span>&lt;</span><span>html</span> <span><span>lang</span><span>=</span><span><span>&#34;</span>en<span>&#34;</span></span></span><span>&gt;</span></span>
</span><span><span><span>&lt;</span><span>head</span><span>&gt;</span></span>
</span><span>    <span><span>&lt;</span><span>meta</span> <span><span>charset</span><span>=</span><span><span>&#34;</span>utf-8<span>&#34;</span></span></span> <span>/&gt;</span></span>
</span><span>    <span><span>&lt;</span><span>meta</span> <span><span>name</span><span>=</span><span><span>&#34;</span>viewport<span>&#34;</span></span></span> <span><span>content</span><span>=</span><span><span>&#34;</span>width=device-width, initial-scale=1<span>&#34;</span></span></span> <span>/&gt;</span></span>
</span><span>    <span><span>&lt;</span><span>title</span><span>&gt;</span></span>{{ resume.basics.name }}<span><span>&lt;/</span><span>title</span><span>&gt;</span></span>
</span><span><span><span>&lt;/</span><span>head</span><span>&gt;</span></span>
</span><span><span><span>&lt;</span><span>body</span><span>&gt;</span></span>
</span><span>    <span><span>&lt;</span></span><span><span>main</span><span>&gt;</span></span>
</span><span>        <span><span>&lt;</span><span>h1</span><span>&gt;</span></span>
</span><span>            {{ resume.basics.name }} <span><span>&lt;</span><span>span</span><span>&gt;</span></span>∙<span><span>&lt;/</span><span>span</span><span>&gt;</span></span> <span><span>&lt;</span><span>span</span><span>&gt;</span></span>{{ resume.basics.label }}<span><span>&lt;/</span><span>span</span><span>&gt;</span></span>
</span><span>        <span><span>&lt;/</span><span>h1</span><span>&gt;</span></span>
</span><span>        <span><span>&lt;</span><span>dl</span><span>&gt;</span></span>
</span><span>            {% if resume.basics.email %}
</span><span>            <span><span>&lt;</span><span>dt</span><span>&gt;</span></span>email<span><span>&lt;/</span><span>dt</span><span>&gt;</span></span>
</span><span>            <span><span>&lt;</span><span>dd</span><span>&gt;</span></span>
</span><span>                <span><span>&lt;</span><span>code</span><span>&gt;</span></span>{{ resume.basics.email }}<span><span>&lt;/</span><span>code</span><span>&gt;</span></span>
</span><span>            <span><span>&lt;/</span><span>dd</span><span>&gt;</span></span>
</span><span>            {% endif %}
</span><span>            {% if resume.basics.url %}
</span><span>            <span><span>&lt;</span><span>dt</span><span>&gt;</span></span>web<span><span>&lt;/</span><span>dt</span><span>&gt;</span></span>
</span><span>            <span><span>&lt;</span><span>dd</span><span>&gt;</span></span><span><span>&lt;</span><span>code</span><span>&gt;</span></span>{{ resume.basics.url }}<span><span>&lt;/</span><span>code</span><span>&gt;</span></span><span><span>&lt;/</span><span>dd</span><span>&gt;</span></span>
</span><span>            {% endif %}
</span><span>            {% if resume.basics.profiles %}
</span><span>            {% for network in resume.basics.profiles %}
</span><span>            <span><span>&lt;</span><span>dt</span><span>&gt;</span></span>{{ network.network | lower }}<span><span>&lt;/</span><span>dt</span><span>&gt;</span></span>
</span><span>            <span><span>&lt;</span><span>dd</span><span>&gt;</span></span><span><span>&lt;</span><span>code</span><span>&gt;</span></span>{{ network.username }}<span><span>&lt;/</span><span>code</span><span>&gt;</span></span><span><span>&lt;/</span><span>dd</span><span>&gt;</span></span>
</span><span>            {% endfor %}
</span><span>            {% endif %}
</span><span>        <span><span>&lt;/</span><span>dl</span><span>&gt;</span></span>
</span><span>
</span><span>        {{ resume.basics.summary | markdown | safe }}
</span><span>        
</span></code></pre>
<p>See the full template on <a href="https://github.com/davidmreed/resume-template/blob/main/templates/resume.html">GitHub</a>.</p>
<p>Taking my cues from <a href="https://simplecss.org/">Simple.css</a>, which I use for this site, I&#39;ve prioritized using standard semantic HTML tags and using <a href="https://github.com/davidmreed/resume-template/blob/main/static/resume.css">CSS</a> to style them. </p>
<p>Note the critical Tera template tag at the head of the template:</p>
<pre data-lang="jinja2"><code data-lang="jinja2"><span><span><span>{%</span> <span>set</span> <span>resume</span> <span>=</span> <span>load_data</span><span>(</span><span>path</span><span>=</span><span>page</span><span>.</span><span>extra</span><span>.</span><span>resume_data</span><span>)</span> <span>%}</span></span>
</span></code></pre>
<p>This loads my resume data from <code>resume.yaml</code> into the variable <code>resume</code>, which the rest of my template then consumes to dynamically render my resume into HTML.</p>
<p>I&#39;ve also decided to treat most of the resume content, as specified in YAML, as Markdown (<code>| markdown | safe</code>, in Tera). That means I can style my highlights for each position, which I apply to call out metrics and achievements in color.</p>
<p>I use only portions of the JSON Resume schema, and a couple of them I use in a way that&#39;s a bit questionable. (The story of standardized schemas, isn&#39;t it!) I&#39;ve used the <code>awards</code> key in a fairly loose, unstructured way. I&#39;ve also misused the <code>skill.keywords</code> key: when the word <code>&#34;break&#34;</code> is present as a keyword, the template starts a new sub-list of skills. (It doesn&#39;t otherwise use keywords for anything).</p>
<p>The last element stitching all of this together is a Markdown content file. Zola needs a content file in order to render the template into a page. In <a href="https://github.com/davidmreed/resume-template/blob/main/content/resume.md">this case</a>, the content file&#39;s empty save for metadata in its front matter, which defines the mapping between the data file and the template.</p>
<pre data-lang="toml"><code data-lang="toml"><span><span><span>title</span></span><span>=</span><span><span>&#34;</span>Resume<span>&#34;</span></span>
</span><span><span><span>template</span></span><span>=</span><span><span>&#34;</span>resume.html<span>&#34;</span></span>
</span><span><span>[</span><span><span>extra</span></span><span>]</span>
</span><span><span><span>resume_data</span></span><span>=</span><span><span>&#34;</span>resume.yaml<span>&#34;</span></span>
</span></code></pre>
<p>Because the template accepts the <code>resume_data</code> path as a parameter, I could in fact render multiple resumes by creating multiple <code>.md</code> files with different front matter.</p>
<p>At this point, I can render my resume. Once I have <code>zola</code> and <code>weasyprint</code> installed via my package manager of choice (for more on which see below), I do</p>
<pre data-lang="bash"><code data-lang="bash"><span><span><span>$</span></span><span> zola build</span>
</span><span><span><span>$</span></span><span> weasyprint public/resume/index.html Resume-David-Reed.pdf</span>
</span></code></pre>
<p>Voila - a PDF resume, beautifully rendered and ready for upload into an applicant-tracking system that could not care less about how snazzy it is.</p>
<p>That&#39;s nowhere near enough overengineering. Let&#39;s automate the whole shebang. (Although you can stop here and still have a nice data-driven resume, if automation is not your cup of tea).</p>
<h2 id="local-developer-experience">Local Developer Experience</h2>
<p>I already alluded to tooling setup, which is one of the key aspects of the developer experience I want. I don&#39;t want to worry about tools, activating virtual environments, launching a container, or any other fiddling.</p>
<p>I also don&#39;t ever want to run commands manually to synchronize some artifact A (here, a PDF) with some other artifact B (here, my data file and template). It should be magical. Magic is what software engineering is all about! Plus, a live preview function make the authoring experience so much better.</p>
<p>I&#39;ve been exploring NixOS lately, so rather than building a <code>Dockerfile</code>, I set up my local environment using <code>nix-shell</code> and <code>direnv</code> following <a href="https://nixos.wiki/wiki/Development_environment_with_nix-shell">these instructions</a>. I created a <a href="https://github.com/davidmreed/resume-template/blob/main/shell.nix"><code>shell.nix</code></a> specifying my dependencies:</p>
<pre data-lang="nix"><code data-lang="nix"><span><span>{</span> <span>pkgs</span> <span>?</span> <span>import</span> <span>&lt;nixpkgs&gt;</span> <span>{</span><span>}</span> <span>}</span><span>:</span>
</span><span>  <span>pkgs</span><span>.</span><span>mkShell</span> <span>{</span>
</span><span>    <span>nativeBuildInputs</span> <span>=</span> <span>with</span> <span>pkgs</span><span>.</span><span>buildPackages</span>; <span>[</span> 
</span><span>      <span>zola</span> <span>just</span> <span>python311Packages</span><span>.</span><span>weasyprint</span> <span>inotify-tools</span> <span>yq</span>
</span><span>    <span>]</span><span>;</span>
</span><span><span>}</span>
</span></code></pre>
<p>and a <code>.envrc</code> containing</p>
<pre><code><span>use_nix
</span></code></pre>
<p>Then, after I <code>direnv allow</code>, every time I <code>cd</code> into my <code>resume</code> project, <code>weasyprint</code> and <code>zola</code> are magically available for me to use. (See the link above for full setup details).</p>
<p>I don&#39;t like memorizing commands, either, so I threw in a <a href="https://github.com/casey/just"><code>justfile</code></a> with some useful abstractions:</p>
<pre data-lang="make"><code data-lang="make"><span><span>filename</span> <span>:=</span></span> <span><span><span>&#34;resume.yaml&#34;</span></span>
</span><span>
</span><span><span><span>build</span></span><span>:</span>
<span></span><span></span></span><span><span></span><span>  <span><span><span>zola</span></span><span> build</span></span>
</span></span><span><span>
</span></span><span><span></span><span><span>pdf</span></span><span>:</span> <span><span>build</span></span><span>
</span></span><span><span></span><span>  <span><span><span>weasyprint</span></span><span> public/resume/index.html <span>\
</span></span></span></span></span><span><span><span><span>    Resume-<span><span>$(</span>cat resume.yaml | yq -r &#39;.basics.name | split(&#34; &#34;<span>)</span></span></span> <span>|</span> <span><span>join</span></span><span>(<span><span>&#34;</span>-<span>&#34;</span></span></span><span></span>)<span><span><span><span>&#39;</span>).pdf</span></span></span></span>
</span></span><span><span>
</span></span><span><span></span><span><span>render</span></span><span>:</span> <span><span>build pdf</span></span><span>
</span></span><span><span></span><span>  <span><span><span>xdg-open</span></span><span> Resume-<span><span>$(</span>cat resume.yaml | yq -r &#39;.basics.name | split(&#34; &#34;<span>)</span></span></span> <span>|</span> <span><span>join</span></span><span>(<span><span>&#34;</span>-<span>&#34;</span></span></span><span></span>)<span><span><span><span>&#39;</span>).pdf &amp;disown</span></span></span></span>
</span></span></code></pre>
<p>Here I use <code>yq</code> to dynamically generate the filename of my output PDF from the resume data, which mostly just means I don&#39;t hard-code my own name.</p>
<p>Now a <code>just pdf</code> creates my resume PDF, and a <code>just render</code> builds and opens the PDF in my preferred viewer. With a little more shell magic, I can add live previews:</p>
<pre data-lang="make"><code data-lang="make"><span><span><span>watch</span></span><span>:</span>
<span></span><span></span></span><span><span>  </span></span><span><span></span><span>  <span><span><span>inotifywait</span></span><span><span><span> -</span>m</span><span><span> -</span>r</span> . <span>\
</span></span></span></span></span><span><span><span><span><span><span>    --</span>exclude</span> <span><span>&#34;</span>(.*<span>\\</span>.pdf$)|public|justfile|<span>\\</span>.git<span>&#34;</span></span> <span>\
</span></span></span></span></span><span><span><span><span><span><span>    -</span>e</span> close_write,move,create,delete <span>\
</span></span></span></span></span><span><span><span><span></span>    <span>|</span> <span>while</span> <span><span>read</span></span><span> <span><span>-</span>r</span> directory events filename</span><span>;</span> <span>do</span></span>
</span></span><span><span>      <span><span><span>just</span></span><span> render</span></span>
</span></span><span><span>    <span><span>done</span></span>
</span></span></code></pre>
<p>I derived most of this from a great <a href="https://superuser.com/a/181543">Stack Exchange answer</a>. </p>
<p>Now my workflow goes like this:</p>
<ul>
<li>I run <code>just watch</code>. The script watches the local directory for changes.</li>
<li>I edit my resume data.</li>
<li><code>inotifywait</code> catches the event and runs <code>just render</code>.</li>
<li>Zola and Weasyprint run a rebuild of my resume PDF.</li>
<li>My PDF viewer refreshes with the new content.</li>
<li>When I&#39;m done, I hit <code>Ctrl-C</code> or kill my terminal.</li>
</ul>
<p>A full rebuild takes about a second on my machine, roughly nine tenths of which is PDF rendering time. I&#39;d love that to be faster (the Zola HTML generation takes milliseconds!) but it works for now.</p>
<p>So that&#39;s my local development story more or less sorted out. I&#39;m relying on my editor&#39;s support for the YAML Language Server (available in Visual Studio Code and in Vim/Neovim) to provide validation and formatting of my YAML. I haven&#39;t configured precommit checks of my YAML as I don&#39;t know of an appropriate tool that uses the same YAML library as the language server.</p>
<h2 id="continuous-integration">Continuous Integration</h2>
<p>Because my PDF is fundamentally a build product, I don&#39;t want to commit it to source control. I also don&#39;t want to be responsible for ensuring that a stored copy is up-to-date with my latest commit. Enter GitHub Actions.</p>
<p>I added <a href="https://github.com/davidmreed/resume-template/blob/main/.github/workflows/render.yaml">this workflow</a> to my repo:</p>
<pre data-lang="yaml"><code data-lang="yaml"><span><span><span>name</span></span><span>:</span> <span><span>&#34;</span>Render Resume<span>&#34;</span></span>
</span><span><span>on</span><span>:</span>
</span><span>  <span><span>push</span></span><span>:</span>
</span><span>    <span><span>branches</span></span><span>:</span>
</span><span>        <span>-</span> <span>main</span>
</span><span><span><span>jobs</span></span><span>:</span>
</span><span>  <span><span>render</span></span><span>:</span>
</span><span>    <span><span>runs-on</span></span><span>:</span> <span>ubuntu-latest</span>
</span><span>    <span><span>steps</span></span><span>:</span>
</span><span>    <span>-</span> <span><span>uses</span></span><span>:</span> <span>actions/checkout@v3</span>
</span><span>    <span>-</span> <span><span>uses</span></span><span>:</span> <span>cachix/install-nix-action@v23</span>
</span><span>      <span><span>with</span></span><span>:</span>
</span><span>        <span><span>nix_path</span></span><span>:</span> <span>nixpkgs=channel:nixos-unstable</span>
</span><span>    <span>-</span> <span><span>uses</span></span><span>:</span> <span>DeterminateSystems/magic-nix-cache-action@v2</span>
</span><span>    <span>-</span> <span><span>run</span></span><span>:</span> <span>nix-shell --run &#34;just pdf&#34;</span>
</span><span>    <span>-</span> <span><span>uses</span></span><span>:</span> <span>actions/upload-artifact@v3</span>
</span><span>      <span><span>with</span></span><span>:</span>
</span><span>        <span><span>path</span></span><span>:</span> <span><span>&#34;</span>*.pdf<span>&#34;</span></span>
</span></code></pre>
<p>Because <code>nix-shell</code> grabs my <code>shell.nix</code> by default, I get the same packages installed in CI that I use for local development. I could go further and pin a specific set of package versions to guarantee reproducibility. I&#39;ve chosen not to do any pinning yet while I keep rolling out uses for Nix on my local machines.</p>
<p>Once the PDF is rendered, I upload it as an artifact on this commit, so that it&#39;s associated with all of its sources. I can grab the PDF from my latest commit and upload it any time I submit a job application.</p>
<p>If I wanted to use another distribution strategy, like including this PDF as an asset in my website, I could build further automation around that use case. That might be programmatically making a commit to a different repo, using my resume repo as a submodule, or something else entirely.</p>
<p>I could go further still and add rendering on branches, too. I might let a branch represent a sector to which I want to apply, like <code>nonprofit</code>. Then I can segregate tailorings of my resume for specific job roles, and merge down global changes from <code>main</code> to keep everything in sync.</p>
<h2 id="the-result">The Result</h2>
<p>It&#39;s still just a resume, but it makes my engineer brain happy.</p>
<p>If you&#39;d like to indulge similar neuroses, you can clone a <a href="https://github.com/davidmreed/resume-template">template repository</a> and start from there.</p>
<p>Have fun!</p>


</div>
    </div></div>
  </body>
</html>
