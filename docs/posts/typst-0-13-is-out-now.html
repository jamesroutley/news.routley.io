<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://typst.app/blog/2025/typst-0.13/">Original</a>
    <h1>Typst 0.13 is out now</h1>
    
    <div id="readability-page-1" class="page"><div><div><p><strong><p>With Typst 0.13, we wanted to improve the day-to-day experience of using Typst. We fixed some of the most long-standing bugs and made Typst even more flexible to use. And on top, we&#39;re shipping a first, experimental version of HTML export. </p></strong></p></div><p>It&#39;s been almost two years since Typst&#39;s open-source launch and the project has matured quite a bit since then. Typst 0.12&#39;s development cycle saw many large-scale changes to Typst&#39;s foundations. With Typst 0.13, we moved the focus to the day-to-day experience of using Typst. We made quality-of-life improvements all across and fixed some of the biggest paper cuts. But, of course, we also shipped some exciting new features!</p> <h2 id="contents">Contents</h2> <p>In this blog post, I&#39;ll walk you through the highlights of the release. If you prefer a more visual take on the topic, also check out the <a href="https://youtu.be/3OrrMzOCXfY">release video</a>.</p> <ul> <li><a href="#paragraphs-and-first-line-indent">Paragraphs and first line indent</a></li> <li><a href="#better-looking-outlines">Better-looking outlines</a></li> <li><a href="#new-curves">New curves</a></li> <li><a href="#files-and-bytes">Files and bytes</a></li> <li><a href="#generating-images">Generating images</a></li> <li><a href="#faster-plugins">Faster plugins</a></li> <li><a href="#single-letter-strings-in-math">Single-letter strings in math</a></li> <li><a href="#font-coverage-control">Font coverage control</a></li> <li><a href="#pdf-file-embedding">PDF file embedding</a></li> <li><a href="#a-first-look-at-html-export">A first look at HTML export</a></li> <li><a href="#migrating">Migrating to Typst 0.13</a></li> <li><a href="#community-call">Community Call</a></li> </ul> <p>For a comprehensive overview of all changes in the release, visit the <a href="https://typst.app/docs/changelog/0.13.0/">changelog</a>. If you&#39;re looking to upgrade your document to Typst 0.13, you can also skip ahead to the <a href="#migrating">Migration section</a>.</p> <h2 id="paragraphs-and-first-line-indent">Paragraphs and first-line indent</h2> <p>The work on <em>semantic paragraphs</em> is what I&#39;m most proud of in this release, but at the same time it&#39;s among the things that are least visible for users. What do I even mean with &#34;semantic paragraphs?&#34;</p> <p>Let me explain. Up until now, Typst considered <em>every</em> piece of text you wrote as a paragraph — be it a single word in a page header, a figure caption, or a page number. Just like paragraphs, these things can have spacing, break across lines, etc. Layout-wise they are not all that different from paragraphs.</p> <p>However, there <em>are</em> semantical differences. Only proper paragraphs should be counted when paragraphs are numbered (such as in legal texts). Only proper paragraphs should be announced by a screen reader as such. And even layout-wise there are differences; for instance, that only proper paragraphs should have first-line indent. While the layout routines for &#34;just text&#34; and a paragraph may be very similar, the second order effects of something being a proper paragraph are far-reaching.</p> <p>In version 0.13, Typst finally gains a better understanding of this distinction. Whether something is a paragraph or just text is decided based on a few simple rules about which you can read in the <a href="https://typst.app/docs/reference/model/par/#what-becomes-a-paragraph">updated paragraph documentation</a>.</p> <p>The most visible immediate effect of this work is that <a href="https://typst.app/docs/reference/model/par/#parameters-first-line-indent"><code>first-line-indent</code></a> can now be applied to all paragraphs instead of just consecutive ones, closing the most upvoted Typst bug. Semantic paragraphs are also crucial for the in-development HTML export and for planned future work on PDF accessibility.</p> <div><pre><code><span>#</span><span>set</span> <span>block</span><span>(</span>spacing<span>:</span> <span>1.2em</span><span>)</span>
<span>#</span><span>set</span> <span>par</span><span>(</span>
  spacing<span>:</span> <span>0.65em</span><span>,</span>
  first-line-indent<span>:</span> <span>(</span>
    amount<span>:</span> <span>1em</span><span>,</span>
    all<span>:</span> <span>true</span><span>,</span>
  <span>)</span><span>,</span>
<span>)</span>

<span>= Chapter 1</span>
In this text, the paragraphs are
all indented, without exception.

With <span>`all: true`</span>, the first
paragraph is affected as well.
</code></pre><p><img src="https://typst.app/assets/docs/Ito7W1rtJK8ycLVOaR8N9AAAAAAAAAAA.png" alt="Preview" width="480" height="197"/></p></div> <h2 id="better-looking-outlines">Better-looking outlines</h2> <p>If you&#39;ve created a table of contents with Typst&#39;s <a href="https://typst.app/docs/reference/model/outline/" title="outline">outline</a> functionality before, you might remember that it always looked a bit bland. The default style had no indentation and rather tightly dotted leaders (leaders are the filler dots between a title and its page number).</p> <p>In Typst 0.13, the outline gets a full facelift while also becoming easier to customize. The new automatic indentation nicely aligns all titles and numberings across the whole outline, long titles have better-looking wrapping behavior, and we fixed a number of bugs.</p> <p>If you have a customized outline, check out the <a href="#outline-migration">migration section for the outline</a> to learn how to adapt your customization.</p> <div><pre><code><span>#</span><span>set</span> <span>heading</span><span>(</span>numbering<span>:</span> <span>&#34;1.i.&#34;</span><span>)</span>

<span>#</span><span>outline</span><span>(</span><span>)</span>

<span>= Introduction</span>
<span>= Methods</span>
<span>== Experiments</span>
<span>== Statistics</span>
<span>= Results</span>
<span>== T Experiment</span>
<span>== K Experiment</span>
<span>== V Experiment</span>
<span>== Additional experiments with extra length</span>
<span>= Discussion</span>
<span>= Conclusion</span>
</code></pre><p><img src="https://typst.app/assets/docs/1QgzdxrGkmOdZlAJlXu4HwAAAAAAAAAA.png" alt="Preview" width="480" height="427"/></p></div> <h2 id="new-curves">New Curves</h2> <p>Since Typst 0.2, you could draw <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Bézier paths</a> with the <code>path</code> function. However, the input format of this function was rather arcane. Rather than specifying pen movements as in an SVG, you had to specify directly points with their two control points. Moreover, the path function had a fatal flaw: You could not close a path and then keep on drawing. This is necessary to draw a shape with cutouts, as depicated below.</p> <p>The new <a href="https://typst.app/docs/reference/visualize/curve/" title="`curve`"><code>curve</code></a> function fixes these flaws. It provides an easier-to-understand and more expressive interface. We also used this opportunity to change the name from <code>path</code> to <code>curve</code> as we plan to repurpose the name <code>path</code> for a file path type in an upcoming release.</p> <div><pre><code><span>#</span><span>curve</span><span>(</span>
  fill<span>:</span> blue<span>.</span><span>lighten</span><span>(</span><span>80%</span><span>)</span><span>,</span>
  fill-rule<span>:</span> <span>&#34;even-odd&#34;</span><span>,</span>
  stroke<span>:</span> blue<span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>50pt</span><span>,</span> <span>0pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>50pt</span><span>,</span> <span>50pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>0pt</span><span>,</span> <span>50pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>close</span><span>(</span><span>)</span><span>,</span>
  curve<span>.</span><span>move</span><span>(</span><span>(</span><span>10pt</span><span>,</span> <span>10pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>40pt</span><span>,</span> <span>10pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>40pt</span><span>,</span> <span>40pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>10pt</span><span>,</span> <span>40pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>close</span><span>(</span><span>)</span><span>,</span>
<span>)</span>
</code></pre><p><img src="https://typst.app/assets/docs/GVXUaPSBZ9aLOPaKKVQbFgAAAAAAAAAA.png" alt="Preview" width="480" height="160"/></p></div> <p>Thanks to <a href="https://github.com/Emm54321">@Emm54321</a> for working on this!</p> <h2 id="files-and-bytes">Files and bytes</h2> <p>Various functions in Typst load files, be it <a href="https://typst.app/docs/reference/visualize/image/">images</a>, <a href="https://typst.app/docs/reference/data-loading/">data loading functions</a>, or <a href="https://typst.app/docs/reference/foundations/plugin/">plugins</a>. Sometimes though, a little extra flexibility is needed, for example, to preprocess, generate, or inline data into a Typst document.</p> <p>For this reason, there are also <code>.decode</code> variants on various of the functions, e.g. <code>image.decode</code> or <code>json.decode</code>. However, that approach didn&#39;t work so well when a path is expected in a set rule, as in <code><span>set</span> <span>raw</span><span>(</span>theme<span>:</span> <span>&#34;light.tmTheme&#34;</span><span>)</span></code>. It also introduced duplication: All the properties of an image are also spelled out again in <code>image.decode</code>.</p> <p>Typst 0.13 revamps file handling to improve this unsatisfactory situation. All places where a path is expected now also support raw <a href="https://typst.app/docs/reference/foundations/bytes/" title="bytes">bytes</a> instead. Typst will always interpret a string as a path and raw bytes as data. When trying to decode an image from a string, thus make sure to first convert it to bytes. Converting to bytes is cheap as Typst will internally reuse the memory from the string. It will even remember that the bytes came from a string to make conversions back to a string cheap as well!</p> <p>The existing <code>.decode</code> functions are now deprecated as they are not needed anymore. The <code>.encode</code> variants of data loading functions remain unchanged.</p> <div><pre><code>See <span>@netwok</span> for details.

<span>#</span><span>bibliography</span><span>(</span><span>bytes</span><span>(</span>
  <span>```bib
  @article{netwok,
    title={At-scale impact of the {Net Wok}},
    author={Astley, Rick and Morris, Linda},
    journal={Armenian Journal of Proceedings},
    volume={61},
    pages={192--219},
    year={2020},
    publisher={Automattic Inc.}
  }
  ```</span><span>.</span>text
<span>)</span><span>)</span>
</code></pre><p><img src="https://typst.app/assets/docs/cxF_vKeQ4I6gnlWEz2KkSgAAAAAAAAAA.png" alt="Preview" width="480" height="222"/></p></div> <h2 id="generating-images">Generating images</h2> <p>With the new byte-taking <code>image</code> function (and previously <code>image.decode</code>), you can generate images at runtime. However, the image function expects images in an encoded image exchange format like PNG or JPEG. Producing valid bytes for such a format in pure Typst code is prohibitively complicated. Meanwhile, plugins are unnecessarily bloated and slowed down if they have to include an image encoder.</p> <p>To streamline image generation workflows, Typst 0.13 thus brings support for loading images from uncompressed raw pixel data. To that end, the <a href="https://typst.app/docs/reference/visualize/image/#parameters-format"><code>format</code></a> parameter of the image function supports a new form, where the channel encoding and pixel width/height of the image can be specified. This feature is crucial for better scientific visualizations — think things like heatmaps.</p> <div><pre><code><span>#</span><span>image</span><span>(</span>
  <span>bytes</span><span>(</span><span>range</span><span>(</span><span>64</span><span>)</span><span>.</span><span>map</span><span>(</span>x <span>=&gt;</span> x <span>*</span> <span>4</span><span>)</span><span>)</span><span>,</span>
  format<span>:</span> <span>(</span>
    encoding<span>:</span> <span>&#34;luma8&#34;</span><span>,</span>
    width<span>:</span> <span>8</span><span>,</span>
    height<span>:</span> <span>8</span><span>,</span>
  <span>)</span><span>,</span>
  width<span>:</span> <span>4cm</span><span>,</span>
  scaling<span>:</span> <span>&#34;pixelated&#34;</span><span>,</span>
<span>)</span>
</code></pre><p><img src="https://typst.app/assets/docs/QY0gst4GDNzXJlUt9cfh1gAAAAAAAAAA.png" alt="Preview" width="480" height="287"/></p></div> <p>Thanks to <a href="https://github.com/frozolotl">@frozolotl</a> for working on this!</p> <h2 id="faster-plugins">Faster plugins</h2> <p>In version 0.8, Typst gained support for WebAssembly plugins — one of the features that would very likely still be a little blue &#34;feature request&#34; label if not for our fabulous open source community. Since then, plugins have become the backbone of various community packages. They&#39;re great because they bring the power and package ecosystem of all the languages that compile to WebAssembly right into Typst.</p> <p>They are also faster to execute than Typst code. Still, with heavy usage the time spent executing plugin code can make up a significant chunk of compile time. A simple way to improve this would&#39;ve been to switch to a faster WebAssembly runtime (specifically, from <code>wasmi</code> to <code>wasmtime</code>). However, taking on a dependency on a WebAssembly runtime with just-in-time compilation wasn&#39;t a spot we wanted to put Typst into. It would have reduced portability and security and increased the amount of third-party code Typst depends on by a lot.</p> <p>There was another way to speed up plugins: Since 0.12, Typst&#39;s layout engine is multi-threaded. Plugins didn&#39;t profit from this though as they couldn&#39;t be easily replicated across threads. This is a limitation we&#39;re lifting with 0.13. Typst will now automatically run plugins in multiple threads without any changes from plugin authors. This is possible because we require (and also already required in the past) plugin functions to be <em>pure.</em> This means that we can execute plugin functions out of order without a visible effect. For cases where purity is too limiting, Typst 0.13 introduces the new <a href="https://typst.app/docs/reference/foundations/plugin/#definitions-transition"><code>plugin.transition</code> API</a>, which lets plugin authors deal with stateful operations in a sound way.</p> <p>The work on speeding up plugins was prioritized through a Typst open-source support contract. If you&#39;re using Typst in production at your company and are hitting any road blocks, <a href="https://typst.app/pricing/?oss-support#oss">please reach out to us!</a></p> <h2 id="single-letter-strings-in-math">Single-letter strings in math</h2> <p>Since Typst&#39;s initial release, <code><span>$</span> <span>&#34;hi&#34;</span> <span>$</span></code> would generate the letters &#34;h&#34; and &#34;i&#34; in upright style while <code><span>$</span> <span>&#34;h&#34;</span> <span>$</span></code> would result in an italic &#34;h&#34;. It&#39;s one of the <a href="https://github.com/typst/typst/issues/274">longest-standing bugs</a>, which is curious because it <em>seems</em> so easy to fix. Unfortunately, it was not. To see why, we need to take a look behind the scenes and understand how Typst views your equations.</p> <p>In Typst 0.12 and lower, the <code>x</code> in <code><span>$</span> x <span>$</span></code> is a <a href="https://typst.app/docs/reference/text/text/" title="text">text</a> element like any other text in your document. A string like <code><span>&#34;hi&#34;</span></code> is converted to content by becoming such a text element, too. While different syntactically, <code><span>$</span> x <span>$</span></code> and <code><span>$</span> <span>&#34;x&#34;</span> <span>$</span></code> thus used to yield identical content. Since <code>x</code> becomes italic by default, <code><span>&#34;x&#34;</span></code> did, too.</p> <p>Changing that by itself wouldn&#39;t have been too hard, but there is a third guest to the party: Symbols. The <code>pi</code> in <code><span>$</span> <span>pi</span> <span>$</span></code> is a <a href="https://typst.app/docs/reference/foundations/symbol/">symbol value</a>. Like strings, symbols were up until now converted to content by becoming text elements. This means they work both in math and normal text (as <code><span>#</span><span>sym</span><span>.</span><span>pi</span></code>).</p> <p>For a long time, the issue was thus blocked on finding a general solution to the text element ambiguity — <a href="https://github.com/typst/typst/issues/1125">perhaps introducing a new <code>var</code> element for math-y text</a>. That story isn&#39;t fully written yet, but for 0.13 we really wanted to fix the issue at hand. For this reason, we attempted to find a minimal solution that fixes the issue while leaving our options for further improvements open.</p> <p>The solution we came up with: Bare letters and symbols are now converted into an internal <em>symbol element,</em> which has auto-italics in math, but is transparently converted to normal text outside of math. Meanwhile, strings still generate text elements. With the <a href="https://laurmaedje.github.io/posts/types-and-context/">planned unification of types and elements</a>, this symbol element and the existing symbol type will naturally merge into one.</p> <div><pre><code><span>$</span> a <span>!=</span> <span>&#34;a&#34;</span> <span>$</span>
</code></pre><p><img src="https://typst.app/assets/docs/f1OPgpaBY91FNLguvrxWTgAAAAAAAAAA.png" alt="Preview" width="480" height="81"/></p></div> <p>Thanks to <a href="https://github.com/wrzian">@wrzian</a> for working on this!</p> <h2 id="font-coverage-control">Font coverage control</h2> <p>When text in different writing scripts is mixed, it&#39;s often important to have precise control over which text is typeset with which font. For example, Latin and Chinese text are almost always typeset with different fonts.</p> <p>This is quite problematic for CJK (Chinese, Japanese, Korean) Typst users which often have text that mix their native language and English. Typst 0.13 takes a first step to improve this situation. With the new <a href="https://typst.app/docs/reference/text/text/#parameters-font"><code>covers</code></a> functionality, users can specify precisely for which character ranges a font should be used. This can, for example, be used to define in which font punctuation (which is present in both Latin and CJK fonts) is rendered.</p> <p>The <code>covers</code> feature supports specifying a character set, either as a <a href="https://typst.app/docs/reference/foundations/regex/">regular expression</a> or one of the built-in ones. Currently, the only built-in set is <code><span>&#34;latin-in-cjk&#34;</span></code>, which should be specified for a Latin font that is <em>before</em> a CJK font in the fallback list. In the example below, we can put <em>Inria Serif</em> first in the fallback chain while still having quotes render with <em>Noto Serif CJK SC.</em></p> <div><pre><code>
<span>#</span><span>set</span> <span>text</span><span>(</span>font<span>:</span> <span>(</span>
  <span>(</span>
    name<span>:</span> <span>&#34;Inria Serif&#34;</span><span>,</span>
    covers<span>:</span> <span>&#34;latin-in-cjk&#34;</span><span>,</span>
  <span>)</span><span>,</span>
  <span>&#34;Noto Serif CJK SC&#34;</span>
<span>)</span><span>)</span>

分别设置“中文”和English字体
</code></pre><p><img src="https://typst.app/assets/docs/n0XdjS0M45oQzm2rUHUxxwAAAAAAAAAA.png" alt="Preview" width="480" height="76"/></p></div> <p>Thanks to <a href="https://github.com/peng1999">@peng1999</a> for working on this!</p> <h2 id="pdf-file-embedding">PDF file embedding</h2> <p>With Typst 0.13&#39;s new <code>pdf.embed</code> function, you can attach arbitrary text or binary files to your PDF. These embedded files can then be browsed in PDF viewers or extracted programmatically by third-party tools.</p> <p>When is this useful? One example, electronic invoicing, is ever more important as new EU legislation just came into force. While electronic invoices are typically in XML-based formats, it&#39;s often useful to still have a human-readable and printable invoice.</p> <p>With PDF file embedding, the XML invoice data can be inserted into the PDF itself, forming a hybrid invoice. Currently, there is still one missing piece in Typst&#39;s support for this: The PDF metadata must identify the document as an E-Invoice to other applications. We plan to add support for embedding arbitrary metadata like this in a future Typst release.</p> <p>Thanks to <a href="https://github.com/NiklasEi">@NiklasEi</a> for working on this!</p> <h2 id="a-first-look-at-html-export">A first look at HTML export</h2> <p>Saved for last is a particularly exciting topic: We&#39;ve been starting work on <a href="https://typst.app/docs/reference/html/">HTML export</a>! The feature is still very incomplete and only available for experimentation behind a feature flag, but there&#39;s already some stuff to see.</p> <h3 id="what-works">What works</h3> <p>Most of the markup and some of the other built-in functions like <code>figure</code> and <code>table</code> already produce the appropriate HTML. Our focus is on producing semantically rich HTML that retains the structure of the input document. The HTML output should be accessible, human-readable, and editable by hand.</p> <p>The Typst document below</p> <pre><code><span>= Introduction</span>
A <span>*document*</span> with some <span>_markup._</span>

<span>-</span> A list
<span>-</span> with elements

<span>#</span><span>figure</span><span>(</span>
  <span>[</span>A bit of text<span>]</span><span>,</span>
  caption<span>:</span> <span>[</span>My caption<span>]</span><span>,</span>
<span>)</span>
</code></pre> <p>will produce the following HTML output:</p> <pre><span>&lt;!-- html, head, and body omitted for brevity --&gt;
</span><span>&lt;</span><span>h2</span><span>&gt;Introduction&lt;/</span><span>h2</span><span>&gt;
</span><span>&lt;</span><span>p</span><span>&gt;A &lt;</span><span>strong</span><span>&gt;document&lt;/</span><span>strong</span><span>&gt; with some &lt;</span><span>em</span><span>&gt;markup.&lt;/</span><span>em</span><span>&gt;&lt;/</span><span>p</span><span>&gt;
</span><span>&lt;</span><span>ul</span><span>&gt;
</span><span>  &lt;</span><span>li</span><span>&gt;A list&lt;/</span><span>li</span><span>&gt;
</span><span>  &lt;</span><span>li</span><span>&gt;with elements&lt;/</span><span>li</span><span>&gt;
</span><span>&lt;/</span><span>ul</span><span>&gt;
</span><span>&lt;</span><span>figure</span><span>&gt;
</span><span>  &lt;</span><span>p</span><span>&gt;A bit of text&lt;/</span><span>p</span><span>&gt;
</span><span>  &lt;</span><span>figcaption</span><span>&gt;Figure 1: My caption&lt;/</span><span>figcaption</span><span>&gt;
</span><span>&lt;/</span><span>figure</span><span>&gt;
</span></pre> <p>Typst cannot always produce the perfect HTML automatically. Instead, it gives you full control by letting you generate raw HTML elements:</p> <pre><code><span>#</span><span>html</span><span>.</span><span>elem</span><span>(</span>
  <span>&#34;div&#34;</span><span>,</span>
  attrs<span>:</span> <span>(</span>style<span>:</span> <span>&#34;background: aqua&#34;</span><span>)</span>
<span>)</span><span>[</span>
  A div with <span>_Typst content_</span> inside!
<span>]</span>
</code></pre><pre><span>&lt;</span><span>div </span><span>style</span><span>=</span><span>&#34;</span><span>background</span><span>: </span><span>aqua</span><span>&#34;</span><span>&gt;
</span><span>  A div with &lt;</span><span>em</span><span>&gt;Typst content&lt;/</span><span>em</span><span>&gt; inside!
</span><span>&lt;/</span><span>div</span><span>&gt;
</span></pre> <p>To make your document portable across PDF and HTML, we&#39;re also introducing a <a href="https://typst.app/docs/reference/foundations/target/" title="`target`"><code>target</code></a> function that returns the current export format (either <code><span>&#34;paged&#34;</span></code> or <code><span>&#34;html&#34;</span></code>). It is mainly intended for use in show rules, like below:</p> <div><pre><code><span>#</span><span>let</span> <span>kbd</span><span>(</span>it<span>)</span> <span>=</span> <span>context</span> <span>{</span>
  <span>if</span> <span>target</span><span>(</span><span>)</span> <span>==</span> <span>&#34;html&#34;</span> <span>{</span>
    html<span>.</span><span>elem</span><span>(</span><span>&#34;kbd&#34;</span><span>,</span> it<span>)</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>set</span> <span>text</span><span>(</span>fill<span>:</span> <span>rgb</span><span>(</span><span>&#34;#1f2328&#34;</span><span>)</span><span>)</span>
    <span>let</span> r <span>=</span> <span>3pt</span>
    <span>box</span><span>(</span>
      fill<span>:</span> <span>rgb</span><span>(</span><span>&#34;#f6f8fa&#34;</span><span>)</span><span>,</span>
      stroke<span>:</span> <span>rgb</span><span>(</span><span>&#34;#d1d9e0b3&#34;</span><span>)</span><span>,</span>
      outset<span>:</span> <span>(</span>y<span>:</span> r<span>)</span><span>,</span>
      inset<span>:</span> <span>(</span>x<span>:</span> r<span>)</span><span>,</span>
      radius<span>:</span> r<span>,</span>
      <span>raw</span><span>(</span>it<span>)</span>
    <span>)</span>
  <span>}</span>
<span>}</span>

Press <span>#</span><span>kbd</span><span>(</span><span>&#34;F1&#34;</span><span>)</span> for help.
</code></pre><p><img src="https://typst.app/assets/docs/2e4T4KROGY3szMbBvSacdgAAAAAAAAAA.png" alt="Preview" width="480" height="74"/></p></div><pre><span>&lt;</span><span>p</span><span>&gt;Press &lt;</span><span>kbd</span><span>&gt;F1&lt;/</span><span>kbd</span><span>&gt; for help.&lt;/</span><span>p</span><span>&gt;
</span></pre> <p>The <code>target</code> function is contextual because the export target can vary within one compilation. How? With the <a href="https://typst.app/docs/reference/html/frame/" title="`html.frame`"><code>html.frame</code></a> function, you can lay out part of your HTML document as an inline SVG, using Typst&#39;s normal layout engine. Within such a frame, the compilation target is <code><span>&#34;paged&#34;</span></code> again, so that show rules produce the appropriate layout elements instead of HTML elements.</p> <h3 id="what-s-missing">What&#39;s missing</h3> <p>A lot! For instance, currently, Typst will always output a single HTML file. Support for outputting directories with multiple HTML documents and assets, as well as support for outputting fragments that can be integrated into other HTML documents is planned.</p> <p>Typst currently also doesn&#39;t output any CSS, instead focusing fully on emitting semantic markup. You can of course write your own CSS styles and still benefit from sharing your content between PDF and HTML.</p> <p>In the future, we plan to give you the option of automatically emitting CSS, taking more of your existing set rules into account. More generally, we have a lot of plans for HTML export! Visit the <a href="https://github.com/typst/typst/issues/5512">tracking issue</a> to learn more about them.</p> <h3 id="try-it">Try it!</h3> <p>In the CLI, you can experiment with HTML export by passing <code>--features html</code> or setting the <code>TYPST_FEATURES</code> environment variable to <code>html</code>. In the web app, HTML export is not yet available. It will become available once we think it&#39;s ready for general use.</p> <p>You can also use HTML export with <code>typst watch</code>. Typst will then automatically spin up a live-reloading HTTP server that serves your document.</p> <pre><span>$</span><span> typst watch hi.typ --features html --format html --open
</span><span>
</span><span>watching</span><span> hi.typ
</span><span>writing</span><span> to hi.html
</span><span>serving</span><span> at http://127.0.0.1:3001
</span><span>
</span><span>[20:31:09]</span><span> compiled with warnings in 1.52 ms
</span></pre>  <p>Work on Typst&#39;s HTML export is sponsored by <a href="https://nlnet.nl/project/Typst-HTML/">NLNet</a>. We are very grateful for their support! We also want to thank external contributor <a href="https://github.com/01mf02">@01mf02</a> with whom we&#39;ve thus far collaborated on HTML export through the NLNet grant. Unfortunately, we and him have since parted ways over technical differences. Nonetheless, we plan to increase the time and resources we put into HTML export, and we are very happy to have NLNet&#39;s continued support in this endeavor.</p> <h2 id="migrating">Migrating to Typst 0.13</h2> <p>Typst 0.13 ships with a number of deprecations and breaking changes. The <a href="https://typst.app/docs/changelog/0.13.0/">changelog</a> has a full account of all changes, but in this section you&#39;ll learn how to deal with the most common kinds of breakage.</p> <h3 id="type-string-compatibility">Type/string compatibility</h3> <p>In Typst 0.8, <a href="https://typst.app/docs/reference/foundations/type/">types</a> were promoted to proper values. As a result, <code><span>type</span><span>(</span><span>10</span><span>)</span></code> directly returns a type instead of a string since then. To make this change less disruptive, we also introduced a temporary compatibility behavior where types could be used like strings in some contexts (e.g., <code>int <span>==</span> <span>&#34;integer&#34;</span></code> would be true). For implementation reasons, we did not add a warning for this at the time. We&#39;re rectifying this now and adding a warning to shake out remaining reliance on this behavior. With Typst 0.14, the compatibility behavior will be fully removed.</p> <pre><code>
<span>#</span><span>{</span> <span>type</span><span>(</span><span>10</span><span>)</span> <span>==</span> int <span>}</span>


<span>#</span><span>{</span> <span>type</span><span>(</span><span>10</span><span>)</span> <span>==</span> <span>&#34;integer&#34;</span> <span>}</span>
</code></pre> <h3 id="decode-migration">Decode functions</h3> <p>The <code>image.decode</code> function and the <code>.decode</code> variants of data loading functions are now deprecated. You can instead directly pass bytes to the respective top-level functions instead. Read the <a href="#files-and-bytes">section on files and bytes</a> to learn more.</p> <pre><code>
<span>#</span><span>image</span><span>(</span><span>bytes</span><span>(</span><span>&#34;&lt;svg&gt;..&lt;/svg&gt;&#34;</span><span>)</span><span>)</span>


<span>#</span><span>image</span><span>.</span><span>decode</span><span>(</span><span>&#34;&lt;svg&gt;..&lt;/svg&gt;&#34;</span><span>)</span>
</code></pre> <h3 id="outline-migration">Outline</h3> <p>The changes to the built-in <a href="https://typst.app/docs/reference/model/outline/" title="outline">outline</a> (table of contents) improve the out-of-the-box style and customizability. Unfortunately, they also break some existing outline customizations.</p> <p>First of all, the <code>fill</code> argument moved from <code>outline</code> to <a href="https://typst.app/docs/reference/model/outline/#definitions-entry" title="`outline.entry`"><code>outline.entry</code></a>. If you get the error &#34;unexpected argument: fill&#34;, adjust your code as shown below:</p> <pre><code>
<span>#</span><span>set</span> outline<span>.</span><span>entry</span><span>(</span>fill<span>:</span> <span>none</span><span>)</span>


<span>#</span><span>set</span> <span>outline</span><span>(</span>fill<span>:</span> <span>none</span><span>)</span>
</code></pre> <p>Because the <code>fill</code> property is now on the entry, it can also be configured for individual outline levels, like this:</p> <pre><code><span>#</span><span>show</span> outline<span>.</span>entry<span>.</span><span>where</span><span>(</span>level<span>:</span> <span>1</span><span>)</span><span>:</span> <span>set</span> outline<span>.</span><span>entry</span><span>(</span>fill<span>:</span> <span>none</span><span>)</span>
</code></pre> <p>In light of the changes to paragraphs, outline entries now show themselves as <a href="https://typst.app/docs/reference/layout/block/">blocks</a> instead of lines of text. This means spacing is now configured via normal show-set rules for <a href="https://typst.app/docs/reference/layout/block/#parameters-spacing" title="`block.spacing`"><code>block.spacing</code></a>.</p> <pre><code>
<span>#</span><span>show</span> outline<span>.</span>entry<span>.</span><span>where</span><span>(</span>level<span>:</span> <span>1</span><span>)</span><span>:</span> <span>set</span> <span>block</span><span>(</span>below<span>:</span> <span>1em</span><span>)</span>


<span>#</span><span>show</span> outline<span>.</span><span>entry</span><span>:</span> it <span>=&gt;</span> <span>{</span>
  it
  <span>v</span><span>(</span><span>1em</span><span>,</span> weak<span>:</span> <span>true</span><span>)</span>
<span>}</span>
</code></pre> <p>In Typst 0.12 and below, outline entries expose a few fields like <code>.body</code> and <code>.page</code> that are useful for writing an outline entry show rule. These fields were derived from other fields for your convenience. Typst 0.13 makes this more explicit and idiomatic by turning them into methods. Read the <a href="https://typst.app/docs/reference/model/outline/#building-an-entry">documentation on outline customization</a> for more details on how to use these methods.</p> <pre><code>
<span>#</span><span>show</span> outline<span>.</span><span>entry</span><span>:</span> it <span>=&gt;</span> <span>{</span>
  ...
  it<span>.</span><span>page</span><span>(</span><span>)</span>
<span>}</span>


<span>#</span><span>show</span> outline<span>.</span><span>entry</span><span>:</span> it <span>=&gt;</span> <span>{</span>
  ...
  it<span>.</span>page
<span>}</span>
</code></pre> <h3 id="path-migration">Paths</h3> <p>The <code>path</code> function is superseded by the new <code>curve</code> function. The <code>curve</code> function has an easier-to-understand interface that&#39;s closer to how SVG and the HTML canvas work. Read the <a href="https://typst.app/docs/reference/visualize/curve/"><code>curve</code> function&#39;s documentation</a> to learn how to express existing paths with the new function.</p> <div><pre><code>
<span>#</span><span>curve</span><span>(</span>
  fill<span>:</span> blue<span>.</span><span>lighten</span><span>(</span><span>80%</span><span>)</span><span>,</span>
  stroke<span>:</span> blue<span>,</span>
  curve<span>.</span><span>move</span><span>(</span><span>(</span><span>0pt</span><span>,</span> <span>50pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>line</span><span>(</span><span>(</span><span>100pt</span><span>,</span> <span>50pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>cubic</span><span>(</span><span>none</span><span>,</span> <span>(</span><span>90pt</span><span>,</span> <span>0pt</span><span>)</span><span>,</span> <span>(</span><span>50pt</span><span>,</span> <span>0pt</span><span>)</span><span>)</span><span>,</span>
  curve<span>.</span><span>close</span><span>(</span><span>)</span><span>,</span>
<span>)</span>


<span>#</span><span>path</span><span>(</span>
  fill<span>:</span> blue<span>.</span><span>lighten</span><span>(</span><span>80%</span><span>)</span><span>,</span>
  stroke<span>:</span> blue<span>,</span>
  closed<span>:</span> <span>true</span><span>,</span>
  <span>(</span><span>0pt</span><span>,</span> <span>50pt</span><span>)</span><span>,</span>
  <span>(</span><span>100pt</span><span>,</span> <span>50pt</span><span>)</span><span>,</span>
  <span>(</span><span>(</span><span>50pt</span><span>,</span> <span>0pt</span><span>)</span><span>,</span> <span>(</span><span>40pt</span><span>,</span> <span>0pt</span><span>)</span><span>)</span><span>,</span>
<span>)</span>
</code></pre><p><img src="https://typst.app/assets/docs/yyBp4WXUJsfs9M85K5v8WgAAAAAAAAAA.png" alt="Preview" width="480" height="160"/></p></div> <h3 id="pattern-migration">Patterns</h3> <p>The <code>pattern</code> type was renamed to <a href="https://typst.app/docs/reference/visualize/tiling/" title="`tiling`"><code>tiling</code></a>. To migrate, simply replace <code>pattern</code> with <code>tiling</code>. No further changes are necessary. The name <code>pattern</code> remains as a deprecated alias in Typst 0.13, but will be removed in an upcoming release.</p> <p>Why the rename? For once, the name <code>pattern</code> was very generic. The name <code>tiling</code> is more closely associated with what it expresses. Secondly, we&#39;re considering to repurpose the name <code>pattern</code> for what today are <a href="https://typst.app/docs/reference/foundations/selector/">selectors</a> once elements and types are unified.</p> <pre><code>
<span>#</span><span>rect</span><span>(</span>fill<span>:</span> <span>tiling</span><span>(</span><span>..</span><span>)</span><span>)</span>


<span>#</span><span>rect</span><span>(</span>fill<span>:</span> <span>pattern</span><span>(</span><span>..</span><span>)</span><span>)</span>
</code></pre> <h3 id="removals">Removals</h3> <p>We also removed a number of things that were already deprecated and warned for in Typst 0.12. This includes the</p> <ul> <li><code>style</code> function and <code>styles</code> argument of <a href="https://typst.app/docs/reference/layout/measure/" title="`measure`"><code>measure</code></a>; use a <a href="https://typst.app/docs/reference/context/" title="context">context</a> expression instead</li> <li><code>state.display</code> function; use <a href="https://typst.app/docs/reference/introspection/state/#definitions-get" title="`state.get`"><code>state.get</code></a> instead</li> <li><code>location</code> argument of <a href="https://typst.app/docs/reference/introspection/state/#definitions-at" title="`state.at`"><code>state.at</code></a>, <a href="https://typst.app/docs/reference/introspection/counter/#definitions-at" title="`counter.at`"><code>counter.at</code></a>, and <a href="https://typst.app/docs/reference/introspection/query/" title="`query`"><code>query</code></a></li> <li>compatibility behavior where <a href="https://typst.app/docs/reference/introspection/counter/#definitions-display" title="`counter.display`"><code>counter.display</code></a> worked without <a href="https://typst.app/docs/reference/context/" title="context">context</a></li> <li>compatibility behavior of <a href="https://typst.app/docs/reference/introspection/locate/" title="`locate`"><code>locate</code></a></li> </ul> <p>Refer to the <a href="https://typst.app/blog/2024/typst-0.12/#migrating-your-documents">Migration section of the Typst 0.12 announcement post</a> to learn more about how to migrate away from these functions.</p>  <p>That&#39;s it for Typst 0.13. We hope you&#39;re just as excited about the release as we are!</p> <p>We&#39;re hosting a <a href="https://discord.gg/UE5U86pePm?event=1341075095837348003">community call on Discord on Friday, March 7th</a>. Join us to share your experiences with the new version and to chat with the community!</p> </div></div>
  </body>
</html>
