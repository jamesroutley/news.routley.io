<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.akatz.org/fixing-macos-zsh-terminal-history-settings/">Original</a>
    <h1>Fixing macOS Zsh Terminal History Settings</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<p>macOS ships with Z shell settings that do not find commands far back enough using the <code>history</code> command to be useful.</p>
<p>If you have a shell open and <code>echo &#34;test&#34;</code>, then <code>history | grep echo</code>, it will return something like: <code>891 echo &#34;test&#34;</code>.</p>
<p>However, if you issue 16 more unique commands, <code>history | grep echo</code> will no longer be able to find your <code>891 echo &#34;test&#34;</code> entry.</p>
<p>This is because running the history command only lists the 16 last unique commands. These relatively recent history entries don&#39;t reflect a real world use case of the <code>history</code> command where you want to remember a complex command you used a week or a month ago.</p>
<p>macOS stores the main configuration file in <code>/etc/zshrc</code>.</p>
<p>You should <strong>not</strong> edit the one in <code>/etc</code>.</p>
<p>To change your <code>zsh</code> settings, you need to make one in your home directory instead.</p>
<p>This is because the one in <code>/etc</code> usually gets blown away during updates and if you mess up configuration settings in this file, it can be difficult to fix.</p>

<p>To make your own <code>.zshrc</code> file that will persist through updates and search through your entire <code>history</code> file:</p>
<ol>
<li><code>touch ~/.zshrc</code></li>
<li><code>nano ~/.zshrc</code></li>
<li>Add the following lines to your new <code>.zshrc</code> file:</li>
</ol>
<div><pre><span></span>alias history=&#34;history 1&#34;
HISTSIZE=99999  
HISTFILESIZE=99999 
SAVEHIST=$HISTSIZE
</pre></div>

<ol start="4">
<li>Save</li>
</ol>
<p>This ensures that history command can display commands back to the beginning of your <code>history</code> file, rather than the last 16 commands.</p>
</div>
</div></div>
  </body>
</html>
