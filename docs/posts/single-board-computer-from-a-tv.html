<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/index.md">Original</a>
    <h1>Single-Board Computer from a TV</h1>
    
    <div id="readability-page-1" class="page"><div>

    <div data-target="readme-toc.content">
      
  


        <div id="readme">
    <article itemprop="text">
<p dir="auto">One day I&#39;ve had a walk and noticed that someone fly-tipped a TV not so far away from my place. The screen was smashed to pieces, the cables were cut or torn, but the TV had one USB and one PCMCIA port, so it must have some sort of a computer inside.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/01_tv.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/01_tv.jpg" alt="()"/></a></p>
<p dir="auto">The TV was a no-name, but it was based on a VESTEL 17MB211 motherboard, which is described pretty well online. The power source generates 12V and 24V, the main board has, presumably, dual-core ARM with dual-core Mali GPU, plus 512 MiB or RAM and 512 MiB of flash. Plus two HMDI-ins, SCART/VGA, RF tuner, four USB ports, 10/100 MBit LAN...
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/02_board.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/02_board.jpg" alt="()"/></a></p>
<p dir="auto">The main board was connected to a wireless board. BCM chip is WiFi+Bluetooth, and my guess was that it&#39;s either SDIO or non-standard USB connector. The wireless chip itself runs on ARM, by the way.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/03_wifi.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/03_wifi.jpg" alt="()"/></a></p>
<p dir="auto">Turns out, the wireless board is <em>two</em> USB ports on a single connector.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/04_port.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/04_port.jpg" alt="()"/></a></p>
<p dir="auto">The mainboard can be booted with 12V supply, and there&#39;s an UART mapped to SCART connector. The LAN port seemed to be broken and needs re-soldering.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/05_boot.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/05_boot.jpg" alt="()"/></a></p>
<p dir="auto">Regular UART allows to send some commands to the mainboard, but to get the full control over the board we need to get to the U-boot menu. The manual explains that it can be done by sending &#34;OK&#34; repeatedly to the IrDA port. &#34;OK&#34; in RC5 is 0x35, and I conveniently have a Palm computer that can send any HEX code over IrDA.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/06_irda.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/06_irda.jpg" alt="()"/></a></p>
<p dir="auto">Turns out, my application for IrDA didn&#39;t send &#34;OK&#34; repeatedly when I was holding down the button, so I had to tap-tap-tap it. After that, U-boot triggered the update procedure and checked the connected USB stick for a U-boot script.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/07_uboot.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/07_uboot.jpg" alt="()"/></a></p>
<p dir="auto">With the script in place, I dumped the contents of the flash (except for the OTP area for secure boot key), and was really surprised to see that device tree files were not protected by secure boot in the firmware. All it took to get the root was to edit the Linux commandline in the device tree file, and flash it back.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/08_cpu.png"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/08_cpu.png" alt="()"/></a>
Look at this CPU!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ninakali/chip_scavenger/blob/main/src/scavenge/008_tv/09_top.jpg"><img src="https://github.com/ninakali/chip_scavenger/raw/main/src/scavenge/008_tv/09_top.jpg" alt="()"/></a>
One of the cores is busy with TV-related tasks, but killing the thread activates the Watchdog and reboots the device. Even without it, this is a nice Linux ARM box.</p>
<h3 dir="auto"><a id="user-content-extra-notes" aria-hidden="true" href="#extra-notes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extra notes</h3>
<p dir="auto">Stand-by chip inside the SoC is a clone of 8051. At least a part of firmware for it is in a 2MiB SPI, but seems that some part of the 8051 firmware is inside the SoC itself. This flash also stores data for Ethernet and DRM.</p>
<p dir="auto">Addresses of firmware areas were all wrong in online scripts. For my model, it was:</p>
<div data-snippet-clipboard-copy-content="768k(xboot),
768k(ddrcfg),
768k(ddrbud),
768k(xbootdat),
768k(misc),
2M(secos),
1280k(uboot),
768k(fdt0),
768k(fdt1),
7M(ker0),
17M(ker1),
20M(fs0),
200M(ap0),
40M(apdat0),
213M(buffer),
4M(logo)"><pre><code>768k(xboot),
768k(ddrcfg),
768k(ddrbud),
768k(xbootdat),
768k(misc),
2M(secos),
1280k(uboot),
768k(fdt0),
768k(fdt1),
7M(ker0),
17M(ker1),
20M(fs0),
200M(ap0),
40M(apdat0),
213M(buffer),
4M(logo)
</code></pre></div>
<p dir="auto">The map of the flash is stored in the cmdline.</p>
<p dir="auto">Some of these boards run Android, but this one runs a custom &#34;NG Smart&#34; OS, which is Linux + Opera-over-DirectFB.</p>
<p dir="auto">There are hardware HDMI, SCART and RF ins. Plus LAN. Plus USB. So, it can be turned into a very nice device to capture HDMI/TV/VHS. It also has a 10W amplifier and LVDS, but I doubt it would be easy to connect it to a random screen.</p>
</article>
  </div>

    </div>

  </div></div>
  </body>
</html>
