<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.hillelwayne.com/post/learntla/">Original</a>
    <h1>Learn TLA&#43;</h1>
    
    <div id="readability-page-1" class="page"><article lang="en">
    

    
    

    <div>
  

<p><em>tl;dr: online TLA+ manual/advanced techniques/examples <a href="https://www.learntla.com">here</a>.</em></p>

<p>TLA+ is a tool for testing abstract software designs. I first stumbled on it in 2016 and found it so useful I wrote <a href="https://old.learntla.com">a free online guide</a> to help others learn it. Then I decided the guide wasn’t good enough and wrote <a href="https://www.amazon.com/Practical-TLA-Planning-Driven-Development/dp/1484238281">Practical TLA+</a> in 2018. Then I decided the book wasn’t good enough and needed a second edition.</p>

<p>Just kidding! Book’s never getting a second edition, because it costs $26 and no matter how good I make it, it’s never going to have the reach of a free resource. So instead I took all the teaching lessons I learned over the past four years and turned them on rewriting the online guide from scratch.</p>

<p>Six months and 40,000 words later, <a href="https://www.learntla.com">the <em>Learn TLA+</em> rewrite is now online</a>! While I’m nowhere near done writing, the guide’s now complete enough to be a useful TLA+ resource, for beginners and experts alike.</p>

<h3 id="what-s-different">What’s Different?</h3>

<p>The old verison of learntla was about getting people up and running as fast as possible. The new version does that too, but as only one part of the full site. Even so, the core’s now heavily expanded:</p>

<ul>
<li>I reorganized the teaching order to introduce more “programming-like” concepts earlier.</li>
<li>It now covers writing temporal properties, action properties, pure TLA+ specs, and modules.</li>
<li>Specs are now shown iteratively, as a progressive series of changes from a base spec. Each spec also comes with a state space “fingerprint” you can use to keep in sync with the guide.</li>
<li>There’s now lots of internal references, a <a href="https://www.learntla.com/search.html">search page</a>, and a <a href="https://www.learntla.com/genindex.html">proper index</a>.</li>
</ul>

<p>The new version is also meant to be a resource for experienced practitioners, too. So there’s now a special topics section, with articles on</p>

<ul>
<li>General tips</li>
<li>Using TLA+ from the CLI</li>
<li>Auxiliary variables</li>
<li>State machine patterns</li>
</ul>

<p>I have more topics planned, that’s just what I got done by the end of June. Finally, I’m writing a bunch of examples that cover various specification domains, how to get around problems, operator design, etc.</p>

<p>(There’s also a lot of backend changes I made to maintain the site better. This shouldn’t affect your reading experience, but it makes it easier for me to add and maintain content. I put the details in an Appendix if you’re interested in reading it.)</p>

<h3 id="the-work-to-be-done">The Work to be Done</h3>

<p>I’ll say upfront that <em>Learn TLA+</em> isn’t anywhere near complete. First of all, this is the first time other people are seeing the new content. In writing you have to constantly revise what you do. I expect there will be significant changes as people start reading it and providing feedback. If you have any comments or critiques, please share them all at the <a href="https://github.com/hwayne/learntla-v2/issues">Github repo</a>!</p>

<p>Second, I scoped the initial release to six months and had to cut a lot of planned content. There aren’t any exercises, and I still need to write many of the topics and examples.</p>

<p>Finally, as mentioned, this is dynamic. I’ll be making lots of improvements over time. You can read what I plan to do over at the <a href="https://www.learntla.com/whatsnew.html#roadmap">roadmap</a>.</p>

<p>I hope you enjoy!</p>

<hr/>

<h3 id="appendix-a-what-about-practical-tla">Appendix A: What about <em>Practical TLA+</em>?</h3>

<p>Don’t bother. There’s some specifications in the book that won’t be put in <em>Learn TLA+</em> for legal reasons, but otherwise I’m aiming to make learntla a strictly-better resource. It already covers a host of things not in PT, like action properties, strong fairness, and advanced operators. Plus, learntla is free!</p>

<h3 id="appendix-b-backend-changes">Appendix B: Backend Changes</h3>

<p>These are changes users aren’t likely to see but help me maintain the site better. I’m including them in case people are interested (or want to repeat them). All of the code is <a href="https://github.com/hwayne/learntla-v2">here</a>.</p>

<h4 id="autobuild">Autobuild</h4>

<p>I deployed the old version of learntla with a custom script that I never remembered to run. The new version uses a <a href="https://github.com/hwayne/learntla-v2/blob/master/.github/workflows/build.yml">GitHub action</a> to build on every push to master.</p>

<h4 id="sphinx">Sphinx</h4>

<p>In the past five years I’ve developed fairly strong opinions on <a href="https://buttondown.email/hillelwayne/archive/please-dont-write-your-documentation-in-markdown/">how to document well</a>, especially on the importance of <em>extensibility</em>. <a href="https://gohugo.io/">Hugo</a>, which powered the old version of learntla, is poorly-suited to serious documentation projects. I migrated the site to <a href="https://www.sphinx-doc.org/en/master/">Sphinx</a>. Sphinx has a steeper learning curve, but is a much better choice for documentation overall. Here’s just three reasons why:</p>

<ol>
<li><p>Internal referencing. Sphinx has a native tag for path-independent internal references. This meant I could move content around without having to rewrite any of the referencing hyperlinks. Hugo has a similar <code>ref</code> shortcode but it’s far too limited to be useful.</p></li>

<li><p>Programmability. Sphinx creates an intermediate doctree representation you can transform before it renders out into html. The format isn’t well documented but with some experimentation I was able to make a lot of useful customizations.</p></li>

<li><p>Extensibility. Sphinx lets you create custom text elements that’s treated as first-class markup syntax, as opposed to as a preprocessor for a markdown doc. Sphinx uses this to add a bunch of useful features, such as <a href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#index-generating-markup">automatic indexes</a> and <a href="https://www.sphinx-doc.org/en/master/usage/extensions/todo.html">toggleable TODO blocks</a>. But I also added a few of my own, like <a href="https://github.com/hwayne/learntla-v2/blob/master/docs/_extensions/specification.py"><code>spec</code></a>. That’s what powers the user-facing autodiffs.</p></li>
</ol>

<h4 id="more-tooling">More tooling</h4>

<p>One lesson I’ve learned the hard way is that keeping lots of assets in sync is an absolute nightmare. So this version has a lot more software managing that for me. In particular, I built a pipeline for handling spec assets. I have several <a href="https://github.com/hwayne/learntla-v2/blob/master/raw-specs/threads.xml">XML spec templates</a> that represent “sequences of iterations” on a spec. A <a href="https://github.com/hwayne/learntla-v2/blob/master/raw-specs/expand_template.py">python script</a> unpacks the template into a set of .tla files. After I put in appropriate metadata, a second script cleans up each spec into a “presentable” form, loads the metadata into the appropriate files, and places the asset in the appropriate path. Then I can just write</p>
<div><pre><code data-lang="rst"><span></span><span>..</span> <span>spec</span><span>::</span> spec/version/4
  <span>:diff:</span> spec/version/3
</code></pre></div>

<p>And that automatically renders the diff between the two specs in the guide.</p>

<p>Because all of the specs are reproducibly built from a template, I can modify version 1 of the spec and automatically propagate the changes to versions 2-4. The benefits of this approach were enormous and now I can’t imagine working without it. Plus, I can finally say I <a href="https://buttondown.email/hillelwayne/archive/i-finally-found-a-use-for-xml/">found a good use for XML</a>.</p>

</div>

    



  </article></div>
  </body>
</html>
