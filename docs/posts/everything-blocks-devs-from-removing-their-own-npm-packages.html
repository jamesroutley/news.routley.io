<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bleepingcomputer.com/news/security/everything-blocks-devs-from-removing-their-own-npm-packages/">Original</a>
    <h1>&#39;everything&#39; blocks devs from removing their own NPM packages</h1>
    
    <div id="readability-page-1" class="page"><div>
<p><img alt="npm" height="900" src="https://www.bleepstatic.com/content/hl-images/2022/07/05/NPM_logo_headpic.jpg" width="1600"/></p>
<p>Over the holidays, the npm package registry was flooded with more than 3,000 packages, including one called &#34;everything,&#34; and others named a variation of the word.</p>
<p>The package is quite aptly named as downloading &#34;everything&#34; will gradually pull in <em>every single npm package</em> that&#39;s ever been published to the npmjs.com registry onto your computer, potentially making it run out of storage. But, that&#39;s just the tip of the iceberg.</p>
<p>If you&#39;re asking, &#34;But who would install &#39;everything&#39;?&#34;—that ignores a bigger side-effect of the package.</p>
<p>Since these 3,000+ packages manage to <em>include</em> every single npm package on the npmjs.com registry as their dependency, npm package authors who have ever published to the npm registry would now be unable to remove their packages at will, because of npm&#39;s policy.</p>
<h2><em>everything</em> prevents you from unpublishing your packages</h2>
<p>What may have started as a simple prank, ended up having bigger repercussions for all authors across the npm ecosystem.</p>
<p>Installing <em>everything </em>could have just caused your computer to potentially fall short of storage space and slow down, but the package&#39;s mere existence on npmjs.com prevents authors—unrelated to this package whatsoever, from unpublishing their packages from the world&#39;s largest JavaScript software registry.</p>
<p>The &#34;everything&#34; package has just 5 sub-packages, published under the &#34;@everything-registry&#34; scope, listed as its dependencies, BleepingComputer has observed.</p>
<div>
<figure><img alt="npm package called &#34;everything&#34; attempts to install every package on the npm registry" height="352" src="https://www.bleepstatic.com/images/news/u/1164866/2024/Jan/npm-everything-incident/everything-package.jpg" width="600"/><figcaption><strong>&#34;everything&#34; and its many dependencies fetch every single npm package from the registry</strong></figcaption></figure></div>
<p>These 5 packages, however, gradually manage to pull in every single package present on the entire registry as a dependency. For example, &#34;everything&#34; pulls in &#34;@everything-registry/chunk-2,&#34; which may further attempt to pull in several other packages by the same author, such as &#34;@everything-registry/sub-chunk-1623.&#34;</p>
<p>Each of these sub-packages (or &#34;chunks&#34; as the author calls them), ultimately includes about 800 npm projects as their dependency.</p>
<div>
<figure><img alt="3000+ packages that pull in everything from the npmjs.com registry" height="553" src="https://www.bleepstatic.com/images/news/u/1164866/2024/Jan/npm-everything-incident/everything-dependencies.jpg" width="600"/><figcaption><strong>3000+ packages that pull in everything from the npmjs.com registry</strong></figcaption></figure></div>
<p>Considering the author of &#34;everything&#34; has published 3,000 plus such packages (chunks), each with hundreds of dependencies, a single<span> `npm install everything`</span> command will start resolving, what&#39;s referred to as transitive dependencies, and end up downloading millions of packages.</p>
<p><em><a href="https://www.npmjs.com/~gdi2290" target="_blank" rel="nofollow noopener">gdi2290</a> </em>aka <a href="https://twitter.com/PatrickJS__" target="_blank" rel="nofollow noopener">PatrickJS</a> who is behind this prank <a href="https://github.com/everything-registry/everything/issues/17" target="_blank" rel="nofollow noopener">apologized</a> for &#34;any difficulties this package has caused,&#34; and contacted npm admins to remedy the issue.</p>
<p>A preserved snapshot of the now-removed GitHub discussion is provided below:</p>

<p>&#34;Imagine you did an experiment, published a package to NPM and now you want to remove your NPM package. You can&#39;t do it if other packages are using it,&#34; <a href="https://checkmarx.com/blog/when-everything-goes-wrong-npm-dependency-hell-campaign-2024-edition/" target="_blank" rel="nofollow noopener">writes</a> Jossef Harush, Head of Software Supply Chain Security at Checkmarx on the company&#39;s blog.</p>
<p>Harush, who labeled this campaign, &#34;dependency hell,&#34; further states, &#34;The problem is, since &#39;everything&#39; relies on every package (including yours), your package gets stuck, and there&#39;s some unknown package preventing you from removing it.&#34;</p>
<p>The researcher drew comparisons between &#34;everything&#34; and the &#34;no-one-left-behind&#34; package <a href="https://www.npmjs.com/package/no-one-left-behind" target="_blank" rel="nofollow noopener">published in January 2023</a> that attempted to pull off much the same stunt.</p>
<h2>npm policy shift follows <em>left-pad</em> incident</h2>
<p>Unlike some open-source software registries like Maven Central, which are <a href="https://central.sonatype.org/faq/can-i-change-a-component/" target="_blank" rel="nofollow noopener">immutable</a> and generally prevent authors from removing their published components, npm and PyPI have traditionally allowed developers to delete, or &#34;yank&#34; their releases at will.</p>
<p>Following a 2016 incident though, that entailed <a href="http://qz.com/646467/how-one-programmer-broke-the-internet-by-deleting-a-tiny-piece-of-code/" target="_blank" rel="nofollow noopener">left-pad&#39;s author removing his npm package</a> in protest, and breaking a large part of the internet, npm made it <a href="https://stackoverflow.com/a/69420293" target="_blank" rel="nofollow noopener">more difficult</a> for authors to unpublish packages.</p>
<p>One such policy change involved <a href="https://docs.npmjs.com/unpublishing-packages-from-the-registry" target="_blank" rel="nofollow noopener">allowing authors to unpublish</a> packages only if no other package on the npm registry is dependent on it.</p>
<p>Ironically, this policy has also left PatrickJS, the author of &#34;everything,&#34; unable to easily remove his prank packages, given the extensively long dependency chain he has setup.</p>
<p>BleepingComputer observed, as of this morning, while &#34;everything&#34; continues to live on the registry, the thousands of &#34;@everything-registry&#34; scoped packages used by it have now been made private, potentially resolving the issue.</p>

</div></div>
  </body>
</html>
