<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://planetscale.com/blog/announcing-planetscale-vectors-public-beta">Original</a>
    <h1>The PlanetScale vectors public beta</h1>
    
    <div id="readability-page-1" class="page"><article><header><p>You can now use the vector data type for vector search and storage in your PlanetScale MySQL database.</p></header><section><div><div><p><img alt="Announcing the PlanetScale vectors public beta" fetchpriority="high" width="1280" height="720" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=640&amp;q=90 640w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=750&amp;q=90 750w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=828&amp;q=90 828w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=1080&amp;q=90 1080w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=1200&amp;q=90 1200w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=1920&amp;q=90 1920w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=2048&amp;q=90 2048w, /_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=3840&amp;q=90 3840w" src="https://planetscale.com/_next/image?url=%2Fassets%2Fblog%2Fcontent%2Fannouncing-planetscale-vectors-public-beta%2Fvectors-blog.png&amp;w=3840&amp;q=90"/></p></div></div></section><p><label for="toc">Table of contents</label></p><section><p>We&#39;re excited to announce that PlanetScale vector search and storage is now available in open beta! With PlanetScale vector support, you can store your vector data alongside your application&#39;s relational MySQL data — eliminating the need for a separate specialized vector database.</p><h2 id="what-sets-planetscale-vector-search-and-storage-apart-"><a href="#what-sets-planetscale-vector-search-and-storage-apart-">What sets PlanetScale vector search and storage apart?</a></h2><p>When we decided to add vector support to PlanetScale&#39;s MySQL fork, we knew it would be a long journey to ensure the solution meets our high standards for performance and scalability.</p><p>A crucial piece of this was architecting a search algorithm that allows for both fast performance and large scale. PlanetScale&#39;s vector search is based on two innovative research papers from Microsoft Research: SPANN (Space-Partitioned Approximate Nearest Neighbors) and SPFresh. We did additional work to fully integrate our solution with InnoDB and Vitess, which allows us to support transactional operations, ensure data consistency, and efficiently manage vector indexes at terabyte-scale. This makes our vector search solution ideal for large-scale databases.</p><p>On top of that, we wanted to make sure our implementation supports the following:</p><ul><li>Pre-filtering and post-filtering</li><li>Full SQL syntax — including <code>JOIN</code>, <code>WHERE</code>, and subqueries</li><li>ACID compliance</li></ul><p>Our base implementation checks all of these boxes, and we will continue to improve performance leading up to GA.</p><h3 id="choosing-a-vector-search-algorithm"><a href="#choosing-a-vector-search-algorithm">Choosing a vector search algorithm</a></h3><p>There are a few different algorithms commonly used to implement vector search: <a href="https://planetscale.com/docs/vectors/terminology-and-concepts#hierarchical-navigable-small-world-hnsw-">Hierarchical Navigable Small Worlds (HNSW)</a> and <a href="https://planetscale.com/docs/vectors/terminology-and-concepts#diskann">DiskANN</a> being two of the most popular. These algorithms, however, make technical trade-offs that we deemed inadequate for our implementation.</p><p>HNSW has very good query performance, but struggles to scale because it needs to fit its whole dataset in RAM. Most importantly, HNSW indexes cannot be updated incrementally, so they require periodically re-building the index with the underlying vector data. This is just not a good fit for a relational database. DiskANN scales well, but suffers from worse query performance, and while it can be modified to allow incremental updates, these are not particularly efficient and are hard to map to transactional SQL semantics.</p><p>Because PlanetScale is designed to support incredible performance for databases at massive scale, we knew these implementations wouldn&#39;t work for us. So we set out to find a better solution.</p><p>PlanetScale vector search is based on a novel implementation of two state-of-the art papers from Microsoft Research: <a href="https://arxiv.org/abs/2111.08566">SPANN</a> (Space-Partitioned Approximate Nearest Neighbors) and <a href="https://dl.acm.org/doi/10.1145/3600006.3613166">SPFresh</a>. <a href="https://planetscale.com/docs/vectors/terminology-and-concepts#space-partitioned-approximate-nearest-neighbors-spann-">SPANN is a hybrid vector indexing and search algorithm</a> that uses both graph and tree structures, and was specifically designed to work well for larger-than-RAM indexes that require SSD usage. SPFresh extends the design of SPANN with a set of concurrent background maintenance operations that allow the index to be continuously updated without losing recall or query performance.</p><p>For our implementation, we have extended SPFresh by adding transactional support to all its operations and fully integrating it inside InnoDB, MySQL&#39;s default storage engine. This means that inserts, updates, and deletes of vector data are immediately reflected on the vector index as part of committing your SQL transaction, and follow the same transactional semantics, including support for batch commits and rollbacks.</p><p>Since the indexes are fully managed and stored on-disk by InnoDB, they are always in-sync with the vector data in your tables, they survive process crashes with strong consistency guarantees, they do <em>not</em> need to be periodically rebuilt, and they scale all the way into terabytes, just like any other MySQL table. Together with Vitess, PlanetScale&#39;s sharding layer, this allows the construction and efficient querying of huge vector indexes that are fully integrated with all the relational data in your database and can be used with <code>JOIN</code>s and <code>WHERE</code> clauses while the underlying vector data is continuously updated.</p><h2 id="how-to-enable-vector-support"><a href="#how-to-enable-vector-support">How to enable vector support</a></h2><p>To get started, go to your database settings page, click &#34;Beta features&#34;, find Vectors and click &#34;Enroll&#34;. Vector support is enabled at the branch level, so choose the branch you wish to enroll into the vectors beta. Click the gear icon on the branches page, and click the toggle next to &#34;Enable vectors&#34;.</p><h2 id="more-resources"><a href="#more-resources">More resources</a></h2><p>To learn more about vectors embeddings, checkout our YouTube video:</p><p>You can check out the following documentation:</p><ul><li><a href="https://planetscale.com/docs/vectors/overview">PlanetScale vectors overview</a></li><li><a href="https://planetscale.com/docs/vectors/terminology-and-concepts#space-partitioned-approximate-nearest-neighbors-spann-">Vector database terminology and concepts</a></li><li><a href="https://planetscale.com/docs/vectors/use-cases">Common use cases for vector search</a></li><li><a href="https://planetscale.com/docs/vectors/using-with-an-orm">PlanetScale vector usage with ORMs</a></li><li><a href="https://planetscale.com/docs/vectors/reference">Vector type and index reference</a></li></ul><p>Your feedback is extremely valuable during this beta period, so don’t hesitate to reach out. You can <a href="https://planetscale.com/contact">submit a support ticket</a> to relay any feedback or issues. We also have a vectors channel in <a href="https://discord.gg/pDUGAAFEJx">our Discord</a> where you can ask questions, share feedback, or chat about use cases.</p></section></article></div>
  </body>
</html>
