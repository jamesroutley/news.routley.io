<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.linaro.org/blog/upstream-linux-support-now-available-for-the-the-qualcomm-snapdragon-8-gen-3-mobile-platform/">Original</a>
    <h1>Upstream Linux support available for Qualcomm Snapdragon 8 Gen 3 Mobile Platform</h1>
    
    <div id="readability-page-1" class="page"><div> <div> <div> <div> <div> <article> <p>At Linaro, we’re thrilled to share the latest development in our ongoing collaboration with Qualcomm. Linaro Engineer Neil Armstrong has successfully enabled upstream Linux support for the <a href="https://www.qualcomm.com/products/mobile/snapdragon/smartphones/snapdragon-8-series-mobile-platforms/snapdragon-8-gen-3-mobile-platform">Qualcomm Snapdragon 8 Gen 3 Mobile Platform</a>, the latest addition to the Snapdragon processor family.</p> <p>This achievement signifies a significant milestone in the realm of Linux support, as it demonstrates our commitment to providing cutting-edge solutions to our partners. Here an inside look at this groundbreaking development, showcasing the unparalleled collaboration between Qualcomm and Linaro, impacting positively on:</p> <ul> <li>Effortless upstream Linux integration</li> <li>Powerful performance optimization</li> <li>Running AOSP with Mainline</li> <li>Continued collaboration </li> </ul>  <p>The initial support was posted on October 25th 2023 on the Linux kernel mailing lists for review by the Linux developers community. With the set of patches released by Linaro engineers, it is also possible to boot an AOSP image with Graphics Software Rendering using Google’s SwiftShader.</p> <p>Since 2014, Linaro Engineers have been working closely with Qualcomm Engineers to enable Snapdragon platforms to work with Mainline Linux.</p> <p>Running a recent upstream Linux kernel immediately after the announcement of a new SoC is a significant achievement, and is a testimony to the close working partnership between Qualcomm and Linaro.</p>  <p>With the recent series of patches released by Linaro, the following features are enabled for the Snapdragon 8 Gen 3 Mobile Platform:</p> <ul> <li>Qualcomm® Kryo™ CPUs, including DVFS (Dynamic voltage and frequency scaling) and Power Management</li> <li>System foundation: Clocks, Power controllers, PMICs</li> <li>Low-Speed I/O: I2C, SPI, RTC, Buttons, LEDs</li> <li>High-Density Storage: UFS 4.0, SDXC</li> <li>High-Speed Peripherals: PCIe Gen3 and Gen4, USB Version 3.1 Gen 2, USB-C PD</li> <li>Qualcomm® Hexagon™ Processor SubSystems: Audio, Sensors, Compute and Modem</li> <li>Mobile Display Subsystem + DSI Engine, Touch Controller</li> <li>Communication: WCN7850 Bluetooth</li> </ul> <p>All patches sent for review are also integrated and available in the following development <a href="https://git.codelinaro.org/linaro/qcomlt/demos/linux/-/tree/topic/sm8650/demo/aosp-next-20231016">branch</a> on CodeLinaro.org.</p> <picture> <source data-srcset="/../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-400-6722fe.webp 400w, /../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-800-6722fe.webp 800w, /../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-1200-6722fe.webp 1200w" type="image/webp"/> <source data-srcset="/../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-400-6722fe.png 400w, /../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-800-6722fe.png 800w, /../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-1200-6722fe.png 1200w" type="image/png"/> <img data-src="/../generated/assets/images/content/snapdragon-8-gen-3-mobile-platform-800-6722fe.png" alt="On the left Screenshot of CPU Info (open-source) App showing information on the running system. On the right: FishTank WebGL sample running in Firefox for Android"/> </picture> <picture> <source data-srcset="/../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--400-9c1bee.webp 400w, /../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--800-9c1bee.webp 800w, /../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--1200-9c1bee.webp 1200w" type="image/webp"/> <source data-srcset="/../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--400-9c1bee.png 400w, /../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--800-9c1bee.png 800w, /../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--1200-9c1bee.png 1200w" type="image/png"/> <img data-src="/../generated/assets/images/content/development-kit-and-screenshot-of-the-android-version-menu--800-9c1bee.png" alt="On the left: Picture of a Qualcomm Development Kit with the attached debug board. On the right: Screenshot of the Android Version menu showing the device running Android 14 and running the v6.6-rc6 based Linux tree"/> </picture> <p><strong>Qualcomm Snapdragon 8 Gen 3 Running Android 14</strong></p>  <p>One might think it is quite hard to run AOSP with mainline on such a new platform, but in reality, not at all! Thanks to the long term effort of Linaro and Google engineers making it possible to run AOSP with vanilla Linux releases. Thanks to Amit Pundir for providing a helping hand to get AOSP on this platform.</p> <p>To generate an AOSP image for the Snapdragon 8 Gen 3 Qualcomm Reference Device using the current set of patches available on the mailing list, use the following instructions, which  are derived from here <a href="https://source.android.com/docs/setup/build/devices">https://source.android.com/docs/setup/build/devices</a> with some small changes.</p> <p>Download the Android source tree:</p> <div><div><pre><code>$ mkdir AOSP
$ cd AOSP
$ AOSP=$PWD
$ repo init -u https://android.googlesource.com/platform/manifest -b master
$ repo sync -j`nproc`
</code></pre></div></div> <p>Prepare SM8650 device config by pulling this pathset:</p> <div><div><pre><code>$ cd device/linaro/dragonboard
$ git fetch https://git.codelinaro.org/linaro/qcomlt/demos/device_linaro_dragonboard.git \
	topic/sm8650/demo/android-14-20231016 &amp;&amp; git checkout FETCH_HEAD
</code></pre></div></div> <p>Build the Linaro SM8550 tree containing the patches sent for review:</p> <div><div><pre><code>$ cd $AOSP
$ git clone https://git.codelinaro.org/linaro/qcomlt/demos/linux.git \
	 -b topic/sm8650/demo/aosp-next-20231016 sm8650-kernel
$ cd sm8650-kernel
$ make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- \
       rbX_aosp_defconfig
$ make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- -j`nproc`
$ mkdir $AOSP/device/linaro/dragonboard-kernel/android-6.6/
$ cp arch/arm64/boot/Image.gz arch/arm64/boot/dts/qcom/sm8650-qrd.dtb \
	 $AOSP/device/linaro/dragonboard-kernel/android-6.6/
$ find ./ -name &#34;*.ko&#34; -exec cp {} $AOSP/device/linaro/dragonboard-kernel/android-6.6/ \;
</code></pre></div></div> <p>Build AOSP</p> <div><div><pre><code>$ cd $AOSP
$ . build/envsetup.sh
$ lunch qrd8650-userdebug
$ make -j`nproc`
</code></pre></div></div> <p>Flash AOSP Images</p> <div><div><pre><code>$ cd out/target/product/qrd8650/
$ fastboot erase super erase boot erase vendor_boot \
           erase userdata erase metadata erase dtbo erase recovery
$ fastboot flash -S 256M super ./super.img flash boot ./boot.img \ 
           flash vendor_boot ./vendor_boot.img format:ext4 metadata \
           flash userdata ./userdata.img reboot
</code></pre></div></div>  <p>In the coming weeks, Linaro engineers will continue to work with the Linux kernel community to ensure all the patch series are merged in a timely manner. Additional patches are expected soon to enable display, audio and modem use cases.</p>  <p>To find out more information on the ongoing work, check  <a href="https://lore.kernel.org/all/?q=SM8650">https://lore.kernel.org/all/?q=SM8650</a> or contact us.</p> <p>The Snapdragon 8 Gen 3 Specification &amp; features can be found <a href="https://www.qualcomm.com/content/dam/qcomm-martech/dm-assets/images/company/news-media/media-center/press-kits/snapdragon-summit-2023/documents/Snapdragon8Gen3_%20ProductBrief.pdf">Here</a> </p> <p>For more information about what Qualcomm platform services Linaro offers and how we can help develop, maintain and optimize products using Qualcomm technologies, go to <a href="https://www.linaro.org/services/qualcomm-platforms-services/">https://www.linaro.org/services/qualcomm-platforms-services/</a>.</p> </article> </div>  </div> </div> </div> </div></div>
  </body>
</html>
