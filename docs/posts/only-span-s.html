<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://onlyspans.net/">Original</a>
    <h1>Only &lt;SPAN&gt;s</h1>
    
    <div id="readability-page-1" class="page"><span>
<span contenteditable="" autofocus="" onfocus="(function(){
  document.title = &#39;OnlySpans.net&#39;;
  [...document.getElementsByTagName(&#39;SPAN&#39;)].forEach(function(n) {
    /* send a synthetic &#39;dblclick&#39; event to each span */
    var evt = document.createEvent(&#39;MouseEvents&#39;);
    evt.initEvent(&#39;dblclick&#39;, true, true);
    n.dispatchEvent(evt);

    /* NOTE: styles and event handler can be added inline. These are added in
       an event handler to demonstrate how to emulate CSS classes */

    var S = n.style;

    /* configure &#39;details&#39; spans */
    if(n.classList.contains(&#39;details&#39;)) {
      /* styling */
      S[&#39;font-weight&#39;] = 700;
      S[&#39;background-color&#39;] = &#39;#54c7ec26&#39;;
      S[&#39;border-radius&#39;] = &#39;5px&#39;;
      S[&#39;padding&#39;] = &#39;5px&#39;;
      S[&#39;border&#39;] = &#39;1px solid #4cb3d4&#39;;
      S[&#39;display&#39;] = &#39;inline-block&#39;;
      n.innerHTML = &#39;▶ Code (click to show)&#39;;
      /* click handler */
      n.addEventListener(&#39;click&#39;, function(){
        if(/click to hide/.test(n.innerText)) {
          n.nextElementSibling.style.display = &#39;none&#39;;
          n.innerHTML = &#39;▶ Code (click to show)&#39;;
        } else {
          n.nextElementSibling.style.display = &#39;inline-block&#39;;
          n.innerHTML = &#39;▼ Code (click to hide)&#39;;
        }
      });
    }

    /* configure &#39;codeblock&#39; spans */
    if(n.classList.contains(&#39;codeblock&#39;)) {
      S[&#39;padding&#39;] = &#39;5px&#39;;
      S[&#39;font-family&#39;] = &#39;monospace&#39;;
      S[&#39;display&#39;] = &#39;none&#39;;
      S[&#39;background-color&#39;] = &#39;#efefef&#39;;
      S[&#39;border-radius&#39;] = &#39;5px&#39;;
      S[&#39;border&#39;] = &#39;1px solid #d4d5d8&#39;;
    }

    /* configure spans with &#39;href&#39; attribute */
    if(n.hasAttribute(&#39;href&#39;)) {
      S[&#39;white-space&#39;] = &#39;pre-wrap&#39;;
      S[&#39;cursor&#39;] = &#39;pointer&#39;;
      S[&#39;color&#39;] = &#39;blue&#39;;
      n.addEventListener(&#39;click&#39;, function() {
        window.location.href = n.getAttribute(&#39;href&#39;);
      });
    }

    /* configure spans with &#39;heading&#39; role */
    if(n.hasAttribute(&#39;role&#39;)) {
      switch(n.getAttribute(&#39;role&#39;)) {
        case &#39;heading&#39;: switch(n.getAttribute(&#39;aria-level&#39;)) {
          case &#39;2&#39;: {
            S[&#39;font-weight&#39;] = &#39;700&#39;;
            S[&#39;font-size&#39;] = &#39;1.5rem&#39;;
          } break;
          case &#39;3&#39;: {
            S[&#39;font-weight&#39;] = &#39;700&#39;;
            S[&#39;font-size&#39;] = &#39;1.25rem&#39;;
            S[&#39;white-space&#39;] = &#39;pre-wrap&#39;;
          } break;
        } break;
      }
    }
  });
  /* hide element (this probably should be removed) */
  event.target.style.display = &#39;none&#39;;
})()"></span>

<span role="heading" aria-level="1">Only &lt;SPAN&gt;s</span>

<span>
Each element on this page is a SPAN element. No elements are dynamically added to the page.
</span>

<span>
<span><span role="heading" aria-level="2">Styles
</span>
<span>Each SPAN specifies styling properties through the `style` attribute.</span>

<span>This is <span>bold</span>
This is <span>italicized</span>
<span>These effects are impossible</span>

<span><span>Show Code</span>
<span>```html
This is &lt;span style=&#34;font-weight: 700&#34;&gt;bold&lt;/span&gt;
This is &lt;span style=&#34;font-style: italic&#34;&gt;italicized&lt;/span&gt;
&lt;span style=&#34;text-decoration: line-through&#34;&gt;These effects are impossible&lt;/span&gt;
```</span></span></span>
<span><span role="heading" aria-level="3">Line Breaks</span></span>

Newline characters are normally treated like spaces. They do not force a line break. `BR` elements force line breaks.

<span><span>Normally, newline characters
do not actually break lines. They
are treated like space characters.</span>

<span><span>Show Code</span>
<span>```html
&lt;span style=&#34;white-space: normal;&#34;&gt;Normally, newline characters
do not actually break lines. They
are treated like space characters.&lt;/span&gt;
```</span></span></span>
<span>When SPAN elements have the styling property <span>white-space: pre-wrap</span>, newline characters in the HTML code are treated as line breaks.</span>

<span><span>With pre-wrap, newline characters
actually break lines and
are not treated like space characters</span>

<span><span>Show Code</span>
<span>```html
&lt;span style=&#34;white-space: pre-wrap;&#34;&gt;With pre-wrap, newline characters
actually break lines and
are not treated like space characters&lt;/span&gt;
```</span></span></span></span>
<span><span role="heading" aria-level="3">CSS Tables</span>

<span>CSS Level 3 supports special values for the `display` styling property:</span>

<span><span>
  <span>
    <span><span>Value</span></span>
    <span><span>Behavior</span></span>
  </span>
  <span>
    <span><span>table</span></span>
    <span><span>Acts like <span>TABLE</span></span></span>
  </span>
  <span>
    <span><span>table-row</span></span>
    <span><span>Acts like <span>TR</span></span></span>
  </span>
  <span>
    <span><span>table-cell</span></span>
    <span><span>Acts like <span>TD</span></span></span>
  </span>
</span>
<span><span>Show Code</span>
<span>```html
&lt;span style=&#34;display: table&#34;&gt;
  &lt;span style=&#34;display: table-row&#34;&gt;
    &lt;span style=&#34;display: table-cell&#34;&gt;Value&lt;/span&gt;
    &lt;span style=&#34;display: table-cell&#34;&gt;Behavior&lt;/span&gt;
  &lt;/span&gt;
  &lt;span style=&#34;display: table-row&#34;&gt;
    &lt;span style=&#34;display: table-cell&#34;&gt;table&lt;/span&gt;
    &lt;span style=&#34;display: table-cell&#34;&gt;Acts like TABLE&lt;/span&gt;
  &lt;/span&gt;
&lt;/span&gt;
```</span></span></span>
<span>Using these special style properties, SPAN elements can create simple table layouts. Unfortunately there is no equivalent of `colspan` and `rowspan` (&#34;merge cells&#34; in Excel parlance)
</span></span>
<span><span role="heading" aria-level="3">Images</span>

<span>Images can be added to pages using the `background-image` inline style. To ensure spans are displayed, the `width`, `height` and `display` attributes are set:
</span>
<span><span></span>

<span><span>Show Code</span>
<span>```html
&lt;span style=&#34;
  width: 128px;
  height: 128px;
  background-image: url(&#39;https://sheetjs.com/sketch128.png&#39;);
  display: inline-block;
&#34;&gt;&lt;/span&gt;
```</span></span></span>
</span></span>

<span>
<span><span role="heading" aria-level="2">Dynamic Elements</span>

<span>Inline event handlers allow for some scripting without introducing explicit SCRIPT tags.</span>

<span>The following example uses the `onclick` inline event handler to increment a counter:</span>

<span>The blue span has been clicked <span onclick="(function() {
  event.target.innerText = (+event.target.innerText) + 1;
})()">0</span> times

<span><span>Show Code</span>
<span>```html
  &lt;span onclick=&#34;(function() {
    event.target.innerText = (+event.target.innerText) + 1;
  })()&#34;&gt;0&lt;/span&gt;
```</span></span></span>
<span><span role="heading" aria-level="3">Effectuating `onload`</span></span>

<span>SPAN elements do not receive a `load` event. Instead, this page uses a `contenteditable` SPAN with an `autofocus` attribute. This ensures the `onfocus` inline handler is called.</span>

<span>If multiple elements have the `autofocus` attribute, only the first element will receive focus.</span>

<span>To simplify the page, the `contenteditable autofocus` SPAN will send a synthetic double click (`dblclick`) event to each SPAN element on the page before hiding itself:</span>

<span>The relevant SPAN is at the top of the page (line 6 in the source). If it were placed here, the browser would scroll to this SPAN.

<span><span>Show Code</span>
<span>```html
&lt;span contenteditable autofocus onfocus=&#34;(function(){
  [...document.getElementsByTagName(&#39;SPAN&#39;)].forEach(function(n) {
    var evt = document.createEvent(&#39;MouseEvents&#39;);
    evt.initEvent(&#39;dblclick&#39;, true, true);
    n.dispatchEvent(evt);
  });
  event.target.style.visibility = &#39;hidden&#39;;
})()&#34;&gt;&lt;/span&gt;
```</span></span></span>
<span>Within the `ondblclick` inline handler, the SPAN DOM element can be referenced with the `<span>target</span>` property of the `<span>event</span>` global.</span>

<span>The following example shows the current time. The `ondblclick` event handler uses `setInterval` to set up a loop that updates the time. Clearing the `ondblclick` property ensures that a real double click will not invoke the original handler.</span>

<span>The time is now <span ondblclick="(function() {
  var last = new Date().toString(), tgt = event.target;
  tgt.innerText = last;
  setInterval(function() {
    var cur = new Date().toString();
    if(last != cur) tgt.innerText = last = cur;
  }, 100);
  tgt.ondblclick = null;
})()"></span>

<span><span>Show Code</span>
<span>```html
  &lt;span style=&#34;font-family: monospace&#34; ondblclick=&#34;(function() {
    var last = new Date().toString(), tgt = event.target;
    tgt.innerText = last;
    setInterval(function() {
      var cur = new Date().toString();
      if(last != cur) tgt.innerText = last = cur;
    }, 100);
    tgt.ondblclick = null;
  })()&#34;&gt;&lt;/span&gt;
```</span></span></span></span>
<span><span role="heading" aria-level="3">Emulating CSS Classes</span>

<span>Within the `onfocus` handler of the `autofocus` SPAN, every SPAN element on the page is visited. The `classList` property is a list of class names. Code can manually apply styling properties.</span>

<span>The code blocks that are displayed with the &#34;Show Code&#34; buttons use the `codeblock` class.

<span><span>Show Code</span>
<span>```html
&lt;span contenteditable autofocus onfocus=&#34;(function(){
  [...document.getElementsByTagName(&#39;SPAN&#39;)].forEach(function(n) {
    /* configure &#39;codeblock&#39; spans */
    if(n.classList.contains(&#39;codeblock&#39;)) {
      var S = n.style;
      S[&#39;font-family&#39;] = &#39;monospace&#39;;
      S[&#39;display&#39;] = &#39;none&#39;;
    }
  })()&#34;&gt;&lt;/span&gt;
```</span></span></span></span>
<span><span role="heading" aria-level="3">Fetching Data</span>

<span>The `ondblclick` handler can fetch data. The following example fetches a text file:</span>

<span>The current version of <span href="https://sheetjs.com" role="link">SheetJS Community Edition</span> is <span ondblclick="(async function() {
  const versions = await (await fetch(&#39;https://cdn.sheetjs.com/xlsx.lst&#39;)).text();
  event.target.innerText = versions.trim().split(&#39;\n&#39;).reverse()[0];
})()"></span>

<span><span>Show Code</span>
<span>```html
  &lt;span ondblclick=&#34;(async function() {
    const versions = await (await fetch(&#39;https://cdn.sheetjs.com/xlsx.lst&#39;)).text();
    event.target.innerText = versions.trim().split(&#39;\n&#39;).reverse()[0];
  })()&#34;&gt;&lt;/span&gt;
```</span></span></span></span>
<span><span role="heading" aria-level="3">Editable Elements</span>

<span>The `contenteditable` attribute allows users to edit the content of SPAN elements. An `input` event is dispatched when the content has changed.</span>

<span>The following example includes one `contenteditable` SPAN and one non-editable SPAN. The `oninput` event handler of the first SPAN changes the `innerText` property of the second SPAN.
</span>
<span>Click the text span below and start typing:

<span contenteditable="" oninput="(function() {
  /* output is the ID of the span that will be changed */
  output.innerText = event.target.innerText||&#39; &#39;;
})()">Click here and start typing!</span>

The following span will update when the previous span is edited:

<span><span id="output">Edit the previous span</span></span></span></span>
<span><span role="heading" aria-level="3">External Scripts</span>

<span>External scripts can be fetched and evaluated using `eval`.</span>

<span>The following example fetches the <span href="https://docs.sheetjs.com/docs/constellation/ssf" role="link">SheetJS SSF Library</span> and displays the version number.
</span>
<span>The current version of the SheetJS SSF number formatting library is <span ondblclick="(async function() {
  const url = &#39;https://cdn.sheetjs.com/ssf-0.11.3/ssf.js&#39;;
  const code = await (await fetch(url)).text();
  eval(code);
  window.SSF = SSF;
  event.target.innerText = SSF.version;
})()"></span>

<span><span>Show Code</span>
<span>```html
  &lt;span ondblclick=&#34;(async function() {
    const url = &#39;https://cdn.sheetjs.com/ssf-0.11.3/ssf.js&#39;;
    const code = await (await fetch(url)).text();
    eval(ssf_text);
    event.target.innerText = SSF.version;
  })()&#34;&gt;&lt;/span&gt;
```</span></span></span>
<span>This example uses the <span href="https://docs.sheetjs.com/docs/constellation/ssf" role="link">SheetJS SSF Library</span> to format values. The SPAN elements with green borders are editable. When either SPAN is changed, the &#34;Number Value&#34; SPAN content is interpreted as a JS `Number` and formatted using the Format Code.</span>

<span>The &#34;Formatted Text&#34; is automatically calculated from the &#34;Format Code&#34; and &#34;Number Value&#34;. Try setting the &#34;Format Code&#34; to <span>#,##0.00</span> and the value to <span>314159.265</span>

<span>
  <span>
    <span><span>Format Code</span></span>
    <span><span id="fmt" contenteditable="" oninput="(function() {
  var evt = document.createEvent(&#39;MouseEvents&#39;);
  evt.initEvent(&#39;dblclick&#39;, true, true);
  outssf.dispatchEvent(evt);
})()">$0.00</span></span>
  </span>
  <span>
    <span><span>Number Value</span></span>
    <span><span id="val" contenteditable="" oninput="(function() {
  var evt = document.createEvent(&#39;MouseEvents&#39;);
  evt.initEvent(&#39;dblclick&#39;, true, true);
  outssf.dispatchEvent(evt);
})()">3.5</span></span>
  </span>
  <span><span> </span></span>
  <span>
    <span><span>Formatted Text</span></span>
    <span><span id="outssf" ondblclick="(function() {
      if(typeof SSF == &#39;undefined&#39;) return;
      /* simple debounce wrapper */
      function debounce(f) {
        let id;
        return function() {
          if(id) window.cancelAnimationFrame(id);
          id = window.requestAnimationFrame(() =&gt; f.call(this, ...arguments));
        }
      }
      debounce(() =&gt; {
        const v = Number(val.innerText), S = outssf.style;
        try {
          if(!isFinite(v)) throw &#39;Could not parse &#39; + val.innerText + &#39; as a finite number!&#39;;
          outssf.innerText = SSF.format(fmt.innerText, Number(val.innerText));
          S[&#39;background-color&#39;] = &#39;#54c7ec26&#39;;
          S[&#39;border-color&#39;] = &#39;#4cb3d4&#39;;
        } catch(e) {
          outssf.innerText = &#39;ERROR: &#39; + (e &amp;&amp; e.message || e);
          S[&#39;background-color&#39;] = &#39;#fa383e26&#39;;
          S[&#39;border-color&#39;] = &#39;#e13238&#39;;
        }
      })();
    })()">$3.50</span></span>
  </span>
</span></span></span>
</span>

<span>
<span><span href="https://sheetjs.com" role="link">SheetJS LLC</span> has been &#34;making sheet happen&#34; with creative use of HTML, CSS and JS since 2012. If pushing the limits of the web tickles your fancy, <span href="https://sheetjs.com/careers" role="link">consider joining us!</span></span>

</span>
</span>
</div>
  </body>
</html>
