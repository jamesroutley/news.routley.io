<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.instructables.com/An-Easy-to-Build-Real-Homemade-Computer-Z80-MBC2/">Original</a>
    <h1>An Easy to Build Real Homemade Computer: Z80-MBC2</h1>
    
    <div id="readability-page-1" class="page"><div><section id="intro" data-stepid="SMCF6V8JN4VDUFH"><h2>Introduction: An Easy to Build Real Homemade Computer: Z80-MBC2!</h2><div><p>If you are curious about how a computer works and interacts with &#34;external things&#34;, nowadays there are a lot of  boards ready to play like Arduino or Raspberry and many others. But this boards have all the same &#34;limit&#34;... they hide the inner part because they use a MCU (Micro Controller Unit) or a SOC (System On Chip) so you can&#39;t touch the CPU, I/O, the internal bus and all these stuff that are what makes a computer work.</p><p>There is an other option using some older part as 8bit CPUs (the so called &#34;retrocomputing&#34;). They are simple to understand and you can find a lot of documentation and books for free, and allow to build real computers with all the needed function blocks (CPU, I/O, RAM, ROM/EPROM, etc...).</p><p>But generally they use hard to find parts, and require outdated instruments like an EPROM programmer and eraser or a GAL programmer, and simpler ones have very limited features.</p><p>So I&#39;ve mixed old and &#34;new&#34; parts to make an unique design that doesn&#39;t need any legacy EPROM programmer or fancy ICs, using easy to find components. The Atmega32A MCU acts as an I/O subsystem, &#34;emulating&#34; the EPROM and all the I/O components. More, using an Arduino bootloader, It can be easily programmed with the well known Arduino IDE.</p><p>The needed ICs are:</p><ul><li>Z80 CPU CMOS (Z84C00) 8Mhz or greater</li><li>Atmega32A</li><li>TC551001-70 (128KB RAM)</li><li>74HC00</li></ul><p>If you want the 16x GPIO expansion (GPE option) add a MCP23017 too.</p><p>The Z80-MBC2 has a multi-boot capability and can run CP/M 2.2, QP/M 2.71 and CP/M 3 (128KB banked memory supported), so you can use a very large amount of SW with it (e.g. you can easily find Basic, C, Assembler, Pascal, Fortran, Cobol compilers, and some of these are already provided in the virtual disks on the SD).</p><p>Hard Disks are emulated using a microSD FAT16 or FAT32 formatted (a 1GB microSD is enough), so it is easy exchange the files with your PC (16 HDs for every OS are supported) using <strong><a href="http://star.gmobb.jp/koji/cgi/wiki.cgi?action=ATTACH&amp;page=CpmtoolsGUI&amp;file=CPMTG%5FENG%5F20180903%2Ezip" rel="nofollow">cpmtoolsGUI</a></strong> .</p><p>Of course you need a terminal to interact with the Z80-MBC2, and a common USB-serial adapter together with a terminal emulation SW will be a cheap and simple choice.</p></div></section><section id="step1" data-stepid="SZJPAGFJNEVGET2"><h2>Step 1: Components and PCB</h2><div><p>First thing is find all the components to build the board. I&#39;ve prepared a file (A040618 BOM v2.ods) with all the needed components that you can easily find. Of course a basic skill is required, and it is supposed that you are able to find components &#34;around&#34;...</p><p>About the PCB I&#39;ve prepared an &#34;easy link&#34; to order a small batch (5 pcs. min.) of PCB <strong><a href="https://www.pcbway.com/project/shareproject/Z80_MBC2__4ICs_homemade_Z80_computer.html" rel="nofollow">here</a>.<br/></strong></p></div></section><section id="step2" data-stepid="SSE42ODJNEVGF7O"><h2>Step 2: Modules You Need Too...</h2><div><p>You need also to buy (if you haven&#39;t) some common cheap modules (see photos):</p><ul><li>An USB-Serial adapter;            </li><li>A microSD module;            </li><li>A DS3231 RTC module (optional);            </li><li>An USBasp programmer (to flash the Arduino bootloader into the Atmega32a);            </li><li>An AVR 10pin to 6pin adapter (optional).</li></ul></div></section><section id="step3" data-stepid="SYGWVJ6JNEVGFHX"><h2>Step 3: Build the Board</h2><div><p>To build the board follow the Assembly Guide (A040618 PCB Layout Guide.zip) with the position of the components on the PCB (with both the parts references and the values). Also the Schematic (A040618 - SCH.pdf) will be handy.</p><p>Start to solder the thinnest components like resistors and diodes, then the ceramic capacitors and so on. The connectors and the electrolytic capacitors will be the last ones.</p></div></section><section id="step4" data-stepid="SPPIS3IJNEVGFRP"><h2>Step 4: Install the Arduino IDE and &#34;MightyCore&#34;</h2><div><p>To load the Arduino &#34;sketch&#34; into the Atmega32a, you need to install the Arduino IDE and the &#34;MightyCore&#34; from <strong><a href="https://github.com/MCUdude/MightyCore#how-to-install" rel="nofollow">here</a></strong> using the Arduino IDE &#34;Board Manager&#34;.</p><p>In this way the support for the Atmega32a will be added to the Arduino IDE, and you will be able to select the Atmega32a as target device (see photo).</p><p>Remember to select the other options as in the photo.</p></div></section><section id="step5" data-stepid="SCREG9QJNEVGG86"><h2>Step 5: Flash the Bootloader</h2><div><p>To make the Z80-MBC2 operative you need to flash the Arduino bootloader into the Atmega32a.</p><p>This will enable you to compile and load the Sketch into the Atmega32a using the Arduino IDE.</p><p>There are many ways to flash the bootloader. The way I suggest is to use a cheap USBasp programmer and burn the bootloader using Arduino IDE.</p><p>To connect the USBasp to the ICSP connector of the Z80-MBC2 you can use a common 10pin-6pin adapter (see the photo).</p><p><strong>Remember to disconnect any other connector</strong> when using the ICSP. Also <strong>both SD and RTC modules</strong> (if present) <strong>must be removed</strong> from the board when the ICSP port is in use.</p><p>More info on this step can be found <strong><a href="https://hackaday.io/project/159973-z80-mbc2-4ics-homemade-z80-computer/log/150087-how-use-the-icsp-port-with-the-usbasp-programmer-under-linux-to-burn-the-bootloader" rel="nofollow">here</a></strong>.</p></div></section><section id="step6" data-stepid="S18K7EPJNEVGH2C"><h2>Step 6: Load the &#34;sketch&#34;</h2><div><p>Now is time to load the sketch into the Atmega32a using the Arduino IDE. For that you need to connect the USB-serial adapter (see photo) to the  SERIAL port (J2) of the Z80-MBC2.</p><p>You must connect the GND, +5V/VCC, DTR, TXD, RXD pins of the USB-serial adapter and the SERIAL port of the Z80-MBC2.</p><p>Now unzip the sketch zip file &#34;S220718-R190918_IOS-Z80-MBC2.zip&#34; into a folder, compile it and load it with the Arduino IDE..</p></div></section><section id="step7" data-stepid="S3L1BCKJNEVGHMU"><h2>Step 7: Add the SD and the RTC</h2><div><p>Now unzip the SD zip file &#34;SD-S220718-R191018-v1.zip&#34; into a FAT16 or FAT32 formatted microSD (a 1GB microSD is more than enough).</p><p>Disconnect the USB-serial adpter from the PC, and add to the Z80-MBC2 the SD module (with the microSD inside) and the RTC module (if you have it).</p><p>Pay attention to install the modules exactly as shown in the photo, because they aren&#39;t &#34;swappable&#34; in their positions, and permanent damages may occur if you exchange them!</p><p>Now you are ready to run the Z80-MBC2 using the USB-serial adapter and a terminal emulator!</p></div></section><section id="step8" data-stepid="S7AG7VIJNEVGI65"><h2>Step 8: How Enter in the &#34;Select Boot...&#34; Menu</h2><div><p>To enter in the &#34;Select boot mode or system parameters&#34; you must press the RESET key (SW2), release it and press immediately the USER key (SW1) and keep it pressed until the IOS led starts to blink.</p><p>An other way is to press both keys, release the RESET key holding the USER key down until the IOS led starts to blink, or you see the menu on the screen.</p></div></section><section id="step9" data-stepid="SN56NPSJNEVGIHW"><h2>Step 9: More Info...</h2><p>You may find more info and technical details about the Z80-MBC2 <strong><a href="https://hackaday.io/project/159973-z80-mbc2-4ics-homemade-z80-computer" rel="nofollow">here</a></strong>.</p></section><div><div><p><img data-src="https://content.instructables.com/FQ5/NYKH/JMKV6C8W/FQ5NYKHJMKV6C8W.jpg?auto=webp&amp;frame=1&amp;width=320" src="https://www.instructables.com/assets/img/pixel.png" alt="Electronics Tips &amp; Tricks Challenge"/></p><p>Participated in the </p></div></div></div></div>
  </body>
</html>
