<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.ryanprior.com/posts/put-your-runbook-in-your-readme/">Original</a>
    <h1>Put Your Runbook in Your README</h1>
    
    <div id="readability-page-1" class="page"><div>
                
<p>
During software development and maintenance we use an array of commands to build, test, deploy and release our software. When nobody writes these commands down, they&#39;re <em>tacit knowledge:</em> the floor-level of computing know-how that&#39;s necessary to contribute to the project. This is widely acknowledged as a barrier to entry and an accessibility pain point for Free software.</p>
<p>
Tacit knowledge of development workflows can also lead to confusion and unnecessary friction between maintainers of a multi-user repository who develop slightly different versions. This is a key aspect of the famous <a href="https://web.archive.org/web/20070319181802/http://jcooney.net/archive/2007/02/01/42999.aspx">&#34;It Works On My Machine&#34;</a> development methodology.</p>
<p>
When we write down our workflows, this constitutes <strong>a runbook</strong>.</p>
<div id="outline-container-headline-1">
<h3 id="headline-1">
What I want out of a runbook
</h3>
<div id="outline-text-headline-1">
<p>
Writing a runbook takes time. It&#39;s rare to write anything down for a script I intend to run one time and discard. In order to get value out of my runbook, I want other people to find it, including my future self. Therefore one of the universal goals of every runbook is <em>discoverability</em>.</p>
<p>
Just writing anything down at all can be handy, but I can further increase the value by adding <em>specificity</em>. Exact command invocations, dependency versions, preparatory &amp; cleanup steps, dependencies, and environment setups increase the likelihood that I can reproduce my workflows in the future, or enable another person to succeed in doing so.</p>
<p>
Software practices tend to drift over time, as requirements change and trends shift. If practice changes but the runbook doesn&#39;t, it becomes a form of tech debt, misleading contributors who aren&#39;t aware of the shift and newcomers. My ideal runbook would always be <em>current</em> and reflective of the practice actually used to produce the most recent builds &amp; test results.</p>
</div>
</div>
<div id="outline-container-headline-2">
<h3 id="headline-2">
How we maintain runbooks now
</h3>
<div id="outline-text-headline-2">
<p>
The usual practice is to scatter pieces of the runbook in files throughout the software repository, such as:</p>
<ul>
<li>targets in a Makefile (or Rakefile, Justfile &amp;c)</li>
<li>tasks in a language-specific config file like <code>package.json</code> or <code>pyproject.toml</code></li>
<li>workflows in a config directory for some CI provider, like <code>.github/workflows</code>, <code>Jenkinsfile</code>, <code>.travis.yml</code>, or many others</li>
<li>shell scripts<sup><a id="footnote-reference-1" href="#footnote-1">1</a></sup></li>
<li>READMEs, HOWTOs, blog posts, and web documentation</li>
</ul>
<p>Let&#39;s analyze these in quadrants:</p>
<div id="outline-container-headline-3">
<h4 id="headline-3">
Low discoverability, likely to get outdated
</h4>
<div id="outline-text-headline-3">
<ul>
<li>shell scripts</li>
<li>targets in Makefile or similar</li>
<li>language-specific tasks in config files</li>
</ul>
<p>These tend to bitrot quick if they aren&#39;t used in CI. Those instances which are on the CI &#34;hot path&#34; get moved into the next category.</p>
<p>
Old blog posts also tend to drop in discoverability while simultaneously bitrotting.</p>
</div>
</div>
<div id="outline-container-headline-4">
<h4 id="headline-4">
Low discoverability, current
</h4>
<div id="outline-text-headline-4">
<ul>
<li>workflows in CI config</li>
<li>those scripts, tasks and Makefile targets which are exercised in CI</li>
</ul>
</div>
</div>
<div id="outline-container-headline-5">
<h4 id="headline-5">
High discoverability, likely to get outdated
</h4>
<div id="outline-text-headline-5">
<ul>
<li>READMEs &amp; HOWTOs</li>
<li>recent blog posts</li>
<li>web documentation</li>
</ul>
<p>These are easy for folks to find and are often the first on-ramp for new users and contributors, but they also tend to bitrot fast since they&#39;re not on the &#34;hot path&#34; and software projects typically go through many update/extend/refactor cycles for each documentation refresh/blogging cycle.</p>
</div>
</div>
<div id="outline-container-headline-6">
<h4 id="headline-6">
High discoverability, current
</h4>
<p>Here we expect to find our most exceptional option, but instead it&#39;s crickets. In practice, projects do not maintain current runbooks in a place that&#39;s optimized for discovery and accessibility, and that&#39;s a shame.</p>
</div>
</div>
</div>
<div id="outline-container-headline-7">
<h3 id="headline-7">
Put your runbook in your README
</h3>
<div id="outline-text-headline-7">
<p>
If the README is among the highest-impact, most discoverable places to document workflows, why don&#39;t we put our scripts there? The typical marquee reason is that READMEs are non-executable: they&#39;re prose, not code. This makes them suffer in the critical &#34;specificity&#34; criterion for runbook technology. Enter <code>xc</code>, the task runner for your README that works seamlessly with your CI, shell, and editor.</p>
<blockquote>
<p><code>xc</code><sup><a id="footnote-reference-2" href="#footnote-2">2</a></sup> is a task runner similar to Make or npm run, that aims to be more discoverable and approachable</p>
</blockquote>
<p>
To use it, take all the commands you run to build, debug, test &amp; deploy and document them in your README as code blocks, each under a descriptive header, like &#34;Build&#34;. Then run <code>xc build</code> and it&#39;ll find that header in your docs and run the code block there.</p>
<p>
Crucially, put your CI steps in your README and run them on each merge or release. Quality of life here is good: it supports dependencies between blocks, script arguments and plenty more.</p>
<p>
You can also include usage instructions, caveats, deprecation notices, links, and other context right there next to the task&#39;s script. And it&#39;ll actually look nice, since you have all the info presentation tools normally available in READMEs at your disposal, instead of just spartan code comments.</p>
<div id="outline-container-headline-8">
<h4 id="headline-8">
Is it any good?
</h4>
<div id="outline-text-headline-8">
<p>
Yes! I&#39;ve found <code>xc</code> especially nice to use:</p>
<ol>
<li>It&#39;s a single small binary that adds practically zero runtime overhead.</li>
<li>It supports both Markdown and org-mode READMEs.</li>
<li>I don&#39;t have to export tasks into local scripts and then run them. There&#39;s just one step: execute.</li>
<li>The niceties you&#39;d expect are all there: shell completion, CI and IDE integration, and an interactive TUI mode.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-9">
<h3 id="headline-9">
Discoverable, executable runbooks that stay current
</h3>
<p>
<code>xc</code> solves a need in the current dev tool space by putting workflows in the most prominent location and keeping them on the &#34;hot path&#34; so that they don&#39;t get out of date. It&#39;s <a href="https://github.com/joerdav/xc">Free software</a> (MIT license) and migrating has been straightforward. This is a tool I&#39;m glad to have in my working set.</p>
</div>
<div>
<hr/>
<div>
<div>
<p><sup id="footnote-1"><a href="#footnote-reference-1">1</a></sup></p><div>
<p>Project scripts have their own whole D&amp;D alignment chart.</p>
<p>
Scripts go in:</p>
<table>
<thead>
<tr>
<th></th>
<th>Lawful</th>
<th>Neutral</th>
<th>Chaotic</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Good</strong></td>
<td><code>bin/</code></td>
<td><code>scripts/</code> or similar</td>
<td>project root</td>
</tr>
<tr>
<td><strong>Neutral</strong></td>
<td>another repo</td>
<td>the mailing list</td>
<td>source files that double as scripts</td>
</tr>
<tr>
<td><strong>Evil</strong></td>
<td>the wiki</td>
<td>a private elite repo (hi SQLite!)</td>
<td>Discord</td>
</tr>
</tbody>
</table>
</div>
</div>
<div>
<p><sup id="footnote-2"><a href="#footnote-reference-2">2</a></sup></p><div>
<p> Find <code>xc</code> at <a href="https://xcfile.dev">https://xcfile.dev</a></p>
</div>
</div>
</div>
</div>

            </div></div>
  </body>
</html>
