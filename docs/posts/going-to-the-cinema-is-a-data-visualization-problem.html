<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tonsky.me/blog/allekinos/">Original</a>
    <h1>Going to the cinema is a data visualization problem</h1>
    
    
<p>Do you like going to the cinema? I do. But I also like to know where I am going and which movie I am going to see. But how do you choose?</p>
<p>You can’t go to the cinema’s website. There are just too many. Of course, you might have a favorite one and always go to it, but you won’t know what you are missing out.</p>
<p>Then, there are aggregators. The idea is good: gather everything that’s playing in cinemas right now in one place. Flight aggregators, but for movies.</p>
<p>Implementation, unfortunately, is not that good. As with any other website, the aggregator’s goal is to make you go through as many web pages as possible, do as many clicks as possible, and show you as many ads as possible.</p>
<figure>
  <video autoplay="" muted="" loop="" preload="auto" playsinline="" controls="">
    <source src="https://tonsky.me/blog/allekinos/kinode.mp4" type="video/mp4">
  </video>
<figcaption>Please use an ad blocker, this is unbearable</figcaption></figure>
<p>They even play a freaking TV ad in place of a movie trailer!</p>
<p>Information architecture can be weird too:</p>
<figure>
<img src="https://tonsky.me/blog/allekinos/kinode_menu.png"><figcaption><a href="https://kino.de/">kino.de</a>, auto-translated from German</figcaption></figure>
<p>Should I go to “Movies” or “Cinema Programme”? Should I select “Currently in Cinema” or “New in Cinema”?</p>
<p>So I decided to take matters into my own hands and build a cinema selection website I always dreamed of.</p>
<p>Meet <a href="https://allekinos.de/">allekinos.de</a>:</p>
<figure>
<img src="https://tonsky.me/blog/allekinos/allekinos@2x.webp"></figure>
<h1 id="so-what-is-it">So what is it?</h1>
<p>It’s a website that shows every movie screening in every cinema across the entire Germany.</p>
<p>And when I say EVERY screening, I mean it:</p>
<figure>
  <video autoplay="" muted="" loop="" preload="auto" playsinline="" controls="">
    <source src="https://tonsky.me/blog/allekinos/everything.mp4" type="video/mp4">
  </video>
</figure>
<p>Every screening, every cinema, every movie. All in one long HTML table.</p>
<h1 id="what-else-can-it-do">What else can it do?</h1>
<p>Just filter. You can filter:</p>
<ul>
  <li>by city,</li>
  <li>by city district (don’t want to travel too far),</li>
  <li>by a particular cinema (maybe you have a favorite one),</li>
  <li>by genre (want to see something with your kid but don’t know what),</li>
  <li>or by movie (which cities does it still play?).</li>
</ul>
<p>That’s it. That’s the site.</p>
<p>Oh, we also have a list of premieres so you would know what’s coming. But that’s it.</p>
<h1 id="what-about-the-interface">What about the interface?</h1>
<p>There isn’t one. I mean, there is, of course, but I tried to make it as invisible as possible. There’s no logo. No menu. No footer. No pagination. No “See more”. No cookie banners (because no cookies). No ChatGPT/SEO generated bullshit. No ads, of course.</p>
<p>Why? Because people don’t care about that stuff. They care about function. And our UI is a pure function.</p>
<h1 id="but-how-do-i-search">But how do I search?</h1>
<p>Well, Ctrl+F, of course. We are too humble, too lazy, and too smart to try to compete with in-browser implementation.</p>
<h1 id="wait-what-about-page-size">Wait, what about page size?</h1>
<p>It’s totally fine. I mean, for Berlin, for example, we serve 1.4 MB of HTML. 3 MB with posters. It’s fine. </p>
<p>Slack loads 50 MB (yes, MEGA bytes) to show you a list of 10 chats. AirBnB loads 15 MB, including 500 KB HTML, just to show 20 images. LinkedIn loads 1.5 MB of just HTML (37 MB total) for a fraction of the data we’re showing. So we are fine.</p>
<p>It’s kind of refreshing, actually. What kind of speed do you get from a table with a thousand rows. Feels like a lot, but still feels faster than anything on the modern web.</p>
<h1 id="what-about-mobile">What about mobile?</h1>
<p>That is a good question. I am still thinking about it.</p>
<p>The table trick won’t work on mobile. So layout needs to be different, but I also want it to have the same information density as the desktop, which is tricky.</p>
<p>If you just make the table vertical, it’ll be too much to scroll even for people with the strongest fingers. Maybe I’ll figure something out one day.</p>
<h1 id="whats-under-the-hood">What’s under the hood?</h1>
<p><a href="https://github.com/tonsky/datascript">DataScript</a>.</p>
<p>When I looked at the data, I realized it’s multidimensional: there are movies, they have genres, years, countries, languages, there are cinemas, which are located in districts, which are located in cities, then there are showings, which have day and time, and very possibly something else will come up later, too.</p>
<p>Now, I had no idea how that data would be accessed. Is the cinema part of the movie or is the movie part of the cinema? So I decided to make it all flat and put it into the database.</p>
<p>And it worked! It worked remarkably well. Now I can utilize DataScript queries being data to build them on the fly:</p>
<pre><code>(defn search [{:keys [city cinema district movie genre]}]
  (let [inputs   
        (cond-&gt; [[&#x27;$ db]]
          city     (conj [&#x27;?city     city])
          cinema   (conj [&#x27;?cinema   cinema])
          district (conj [&#x27;?district district])
          movie    (conj [&#x27;?movie    movie])
          genre    (conj [&#x27;?genre    genre]))
      
        where
        (cond-&gt; [:where]
          city     (conj &#x27;(or
                            [?cinema :cinema/city ?city]
                            [?cinema :cinema/area ?city]))
          cinema   (conj &#x27;[?cinema :cinema/title ?cinema-title])
          district (conj &#x27;[?cinema :cinema/district ?district])
          movie    (conj &#x27;[?movie :movie/title ?movie-title])
          genre    (conj &#x27;[?movie :movie/genre ?genre]))]

    (apply ds/q
      (concat
        &#x27;[:find ?show ?date ?time ?url ?cinema ?version ?movie
          :keys  id    date  time  url  cinema  version  movie
          :in]
        (map first inputs)
        where 
        &#x27;[[?show    :show/cinema         ?cinema]
          [?show    :show/date           ?date]
          [?show    :show/time           ?time]
          [?show    :show/url            ?url]
          [?show    :show/movie-version  ?version]
          [?version :movie-version/movie ?movie]])
      (map second inputs))))</code></pre>
<p>The whole database is around 11 MB, basically nothing. I don’t even bother with proper storage, I just serialize the whole thing to a single JSON file every time it updates.</p>
<h1 id="the-hosting">The hosting</h1>
<p>I have been building websites for a while. I have two (<a href="https://grumpy.website">Grumpy</a> and this blog) running right now on my own server. I already spent my time, I have figured this all out. I have all the templates at my fingertips.</p>
<p>But for <a href="https://allekinos.de/">allekinos.de</a> I decided to try something different: <a href="https://application.garden/">application.garden</a>.</p>
<p>It’s a hosting for small Clojure web apps (still in private beta) that’s supposed to take care of insignificant details for you and let you focus on your app first and foremost.</p>
<p>And it works! It’s refreshingly simple: you download a single binary that operates as a command-line tool, create <code>garden.edn</code> file with your project’s name, and call <code>garden deploy</code>. That’s it! Your app is live!</p>
<p>No, seriously. You tend to forget how many annoying small details there are before other people can use your app. But when something like Garden takes them away, you remember and get blown away again! If that’s what Heroku used to feel like back in the day, I’m all in for it.</p>
<p>The beauty Garden is that it helps you start fast, but it’s not a toy. It easily scales all the way up to production. Custom domain, HTTPS, auth, cron, logs, persistent storage: they take care of all of this for you.</p>
<p>And a cherry on top: they even provide nREPL to production! Again, no setup, just <code>garden repl</code> and you are in! Perfect for debugging weird performance issues or running one-off jobs.</p>
<p>An example: when I implemented premieres and committed the code, I still needed to run it for the first time. Instead of making a special flag or endpoint or adding and then immediately removing the startup code, I just connected to remote nREPL and invoked the function in the code. It doesn’t get easier than that!</p>
<p>Uncharacteristic of me, but I kind of enjoy building web apps again, when it’s that simple. Might build more in the future.</p>
<h1 id="conclusion">Conclusion</h1>
<p>In the beginning, I wanted a simple website that solved my problem. I wanted a website that I’d enjoy using.</p>
<p>But I don’t want to make <em>a product</em> out of it. We have enough products already. It’s time someone took a user’s side. And I am one of the users.</p>
<p>Magic things happen when you trust your users and just show them everything you’ve got. </p>
<p>For example, I found some rare films playing that I had no idea about. Matrix in German (!), but once a week and only in one cinema. Or Mars Express, they play it in three cities only, excluding mine. How do you find out about stuff like this?</p>
<p>Here, I <em>discovered</em> it. I looked at the data and you started seeing stuff that otherwise is completely invisible.</p>
<p>Anyway, enjoy. If this becomes a trend, I’m all in for it. Wouldn’t mind seeing more sites like this in the future.</p>


  </body>
</html>
