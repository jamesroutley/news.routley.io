<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/LadybirdBrowser/ladybird/issues/933">Original</a>
    <h1>Closing this as we are no longer pursuing Swift adoption</h1>
    
    <div id="readability-page-1" class="page"><div><div><div id="issue-body-viewer" data-testid="issue-body-viewer"><div data-testid="markdown-body" data-team-hovercards-enabled="true" data-turbolinks="false"><div><p dir="auto">List of issues preventing moving forward on moving Swift 6.0 support out of an experimental state:</p>
<p dir="auto">Swift issues:</p>
<ul>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2423820399" data-permission-text="Title is private" data-url="https://github.com/swiftlang/llvm-project/issues/8998" data-hovercard-type="issue" data-hovercard-url="/swiftlang/llvm-project/issues/8998/hovercard" href="https://github.com/swiftlang/llvm-project/issues/8998">Please backport d8352e93c1c8042d9166eab3d76d6c07ef585b6d<span>¬†swiftlang/llvm-project#8998</span></a></span></p>
<p dir="auto">Details: Swift&#39;s version of LLVM is missing the fix for <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="1137046914" data-permission-text="Title is private" data-url="https://github.com/llvm/llvm-project/issues/53815" data-hovercard-type="issue" data-hovercard-url="/llvm/llvm-project/issues/53815/hovercard" href="https://github.com/llvm/llvm-project/issues/53815">[Clang] ICE in CheckPointerToMemberOperands passing decltype of lambda<span>¬†llvm/llvm-project#53815</span></a></span>. This means that any assertions build of llvm from the swift open source project cannot build our code. Snapshot builds are released with assertions on.</p>
<p dir="auto">Workaround: Build swift from source on Linux without llvm assertions, or use macOS.</p>
<p dir="auto">PR: <span><svg title="Merged" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z"></path></svg><a data-error-text="Failed to load title" data-id="2445185064" data-permission-text="Title is private" data-url="https://github.com/swiftlang/llvm-project/issues/9038" data-hovercard-type="pull_request" data-hovercard-url="/swiftlang/llvm-project/pull/9038/hovercard" href="https://github.com/swiftlang/llvm-project/pull/9038">üçí [Clang] [Sema] Handle placeholders in &#39;.*&#39; expressions (#83103)<span>¬†swiftlang/llvm-project#9038</span></a></span></p>
<p dir="auto">Fixed in Swift 6.0.0 release</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2440588492" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/75593" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/75593/hovercard" href="https://github.com/swiftlang/swift/issues/75593">Interop: Compiler and C++ Bridging header disagree on ABI of <code>Optional&lt;CxxValueType&gt;</code><span>¬†swiftlang/swift#75593</span></a></span></p>
<p dir="auto">Details: It is not currently possible to return a swift optional of a small C++ type back to C++. The compiler and the generated bridging header disagree on how that is supposed to be done.</p>
<p dir="auto">Workaround: Don&#39;t use Optional, use a return type that forces the C++ type to be heap allocated. Array is one alternative.</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2445844445" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/75661" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/75661/hovercard" href="https://github.com/swiftlang/swift/issues/75661">Interop: Compiling with C++17 or higher on Ubuntu 22.04 fails with cyclic header dependencies in libstdc++<span>¬†swiftlang/swift#75661</span></a></span></p>
<p dir="auto">Details: Swift&#39;s clang module map for libstdc++ contains cycles when <code>&lt;execution&gt;</code> is included. See <a href="https://forums.swift.org/t/swift-5-9-release-on-ubuntu-22-04-fails-to-build-std-module/67659" rel="nofollow">https://forums.swift.org/t/swift-5-9-release-on-ubuntu-22-04-fails-to-build-std-module/67659</a></p>
<p dir="auto">Workaround: Edit <code>&lt;prefix&gt;/lib/swift/linux/libstdcxx.h</code> to comment out the <code>#include &lt;execution&gt;</code> line.</p>
<p dir="auto">PR: <span><svg title="Merged" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z"></path></svg><a data-error-text="Failed to load title" data-id="2445867195" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/75662" data-hovercard-type="pull_request" data-hovercard-url="/swiftlang/swift/pull/75662/hovercard" href="https://github.com/swiftlang/swift/pull/75662">[cxx-interop] Disable c++ execution header with libstdcxx versions &gt;= 11<span>¬†swiftlang/swift#75662</span></a></span> (Just a workaround, not a fix)</p>
</li>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2478862199" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/76024" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/76024/hovercard" href="https://github.com/swiftlang/swift/issues/76024">Interop: Cannot return <code>swift::Optional&lt;swift::String&gt;</code> from C++ function<span>¬†swiftlang/swift#76024</span></a></span></p>
<p dir="auto">Details: Returning binding types <code>swift::Optional&lt;T&gt;</code> or <code>swift::String</code> from a C++ function is not supported</p>
<p dir="auto">Workaround: Return std:: types?</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2560313000" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/76809" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/76809/hovercard" href="https://github.com/swiftlang/swift/issues/76809">Swift cannot import libstdc++-13 chrono header in C++23 mode<span>¬†swiftlang/swift#76809</span></a></span></p>
<p dir="auto">Details: Swift 6.0 cannot import libstdc++-13 or higher <code>&lt;chrono&gt;</code> header.</p>
<p dir="auto">Workaround: Use libc++ or a lower libstdc++ version. libstdc++-13 is default on Ubuntu 24.04 LTS.</p>
<p dir="auto">Fixed in swiftlang/swift:main as of Oct 18, 2024</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2926260250" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/80065" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/80065/hovercard" href="https://github.com/swiftlang/swift/issues/80065">[cxx-interop] SIL verifier crash in Unmanaged.passUnretained() on SWIFT_UNSAFE_REFERENCE type<span>¬†swiftlang/swift#80065</span></a></span></p>
<p dir="auto">Details: SIL verifier crash when trying to compare unsafe reference types by pointer</p>
<p dir="auto">Workaround: Disable SIL verification (!! yikes)</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2936808960" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/80182" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/80182/hovercard" href="https://github.com/swiftlang/swift/issues/80182">[cxx-interop] Bitfield setter/getter for SWIFT_UNSAFE_REFERENCE crashes frontend<span>¬†swiftlang/swift#80182</span></a></span></p>
<p dir="auto">Details: SWIFT_UNSAFE_REFERENCE types with getters/setters for bitfields crash the frontend</p>
<p dir="auto">Workaround: ... don&#39;t use SWIFT_UNSAFE_REFERENCE? unsure. Need guidance</p>
</li>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2657430890" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/77607" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/77607/hovercard" href="https://github.com/swiftlang/swift/issues/77607">CxxInterop: Swift does not synthesize CxxConvertibleToContainer iterator operator== in some cases<span>¬†swiftlang/swift#77607</span></a></span></p>
<p dir="auto">Details: <code>Vector&lt;u32, 2&gt;</code> is not recognized as <code>CxxConvertibleToContainer</code></p>
</li>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="3090514071" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/81774" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/81774/hovercard" href="https://github.com/swiftlang/swift/issues/81774">Enabling cxx interop on Arch with GCC 15 causes lots of errors<span>¬†swiftlang/swift#81774</span></a></span></p>
<p dir="auto">Details: Swift fails to import clang modules with <code>#include &lt;math.h&gt;</code> with libstdc++-15 installed.</p>
<p dir="auto">Workaround: None (!!)</p>
</li>
</ul>
<p dir="auto">CMake issues:</p>
<ul>
<li>
<p dir="auto"> <a href="https://gitlab.kitware.com/cmake/cmake/-/issues/26174" rel="nofollow">https://gitlab.kitware.com/cmake/cmake/-/issues/26174</a></p>
<p dir="auto">Details: Swift + Ninja doesn&#39;t respect CMAKE_OSX_DEPLOYMENT_TARGET. This results in a mismatched LC_BUILD_VERSION on swift and c++ object files, spamming the console with warnings.</p>
<p dir="auto">Workaround: </p><div>
  
  <div itemprop="text">
    <table data-tab-size="8" data-paste-markdown-skip="">

        <tbody><tr>
          <td id="L21" data-line-number="21"></td>
          <td id="LC21"> <span># FIXME: https://gitlab.kitware.com/cmake/cmake/-/issues/26174</span> </td>
        </tr>

        <tr>
          <td id="L22" data-line-number="22"></td>
          <td id="LC22"> <span>if</span> (<span>APPLE</span>) </td>
        </tr>

        <tr>
          <td id="L23" data-line-number="23"></td>
          <td id="LC23"> <span>    set</span>(CMAKE_Swift_COMPILER_TARGET <span>&#34;<span>${CMAKE_SYSTEM_PROCESSOR}</span>-apple-macosx<span>${CMAKE_OSX_DEPLOYMENT_TARGET}</span>&#34;</span>) </td>
        </tr>

        <tr>
          <td id="L24" data-line-number="24"></td>
          <td id="LC24"> <span>endif</span>() </td>
        </tr>
    </tbody></table>
  </div>
</div>

</li>
<li>
<p dir="auto"> <a href="https://gitlab.kitware.com/cmake/cmake/-/issues/26175" rel="nofollow">https://gitlab.kitware.com/cmake/cmake/-/issues/26175</a></p>
<p dir="auto">Details: With CMP0157 enabled, swiftc does not set install_name directory to &#34;<a data-hovercard-type="user" data-hovercard-url="/users/rpath/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rpath">@rpath</a>&#34; per CMAKE_INSTALL_NAME_DIR</p>
<p dir="auto">Workaround: </p><div>
  
  <div itemprop="text">
    <table data-tab-size="8" data-paste-markdown-skip="">

        <tbody><tr>
          <td id="L123" data-line-number="123"></td>
          <td id="LC123">     <span># FIXME: https://gitlab.kitware.com/cmake/cmake/-/issues/26175</span> </td>
        </tr>

        <tr>
          <td id="L124" data-line-number="124"></td>
          <td id="LC124"> <span>    if</span> (<span>APPLE</span>) </td>
        </tr>

        <tr>
          <td id="L125" data-line-number="125"></td>
          <td id="LC125"> <span>        add_custom_command</span>(<span>TARGET</span> LibGfx POST_BUILD </td>
        </tr>

        <tr>
          <td id="L126" data-line-number="126"></td>
          <td id="LC126">             <span>COMMAND</span> install_name_tool -id @rpath/liblagom-gfx.0.dylib <span>&#34;$&lt;TARGET_FILE:LibGfx&gt;&#34;</span> </td>
        </tr>

        <tr>
          <td id="L127" data-line-number="127"></td>
          <td id="LC127">         ) </td>
        </tr>

        <tr>
          <td id="L128" data-line-number="128"></td>
          <td id="LC128"> <span>    endif</span>() </td>
        </tr>
    </tbody></table>
  </div>
</div>

<p dir="auto">PR: <a href="https://gitlab.kitware.com/cmake/cmake/-/merge_requests/9692" rel="nofollow">https://gitlab.kitware.com/cmake/cmake/-/merge_requests/9692</a>. Merged Aug 2, 2024 to be backported to CMake 3.29, 3.30.</p>
</li>
<li>
<p dir="auto"> <a href="https://gitlab.kitware.com/cmake/cmake/-/issues/26195" rel="nofollow">https://gitlab.kitware.com/cmake/cmake/-/issues/26195</a></p>
<p dir="auto">Details: Imported targets from dependencies can have INTERFACE_COMPILE_OPTIONS or INTERFACE_LINK_OPTIONS that swiftc doesn&#39;t understand.</p>
<p dir="auto">Workaround: Swizzle the flags just after import, for every single imported library.</p>
</li>
</ul>
<p dir="auto">Ladybird issues:</p>
<ul>
<li>
<p dir="auto"> <span><svg title="Merged" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M5.45 5.154A4.25 4.25 0 0 0 9.25 7.5h1.378a2.251 2.251 0 1 1 0 1.5H9.25A5.734 5.734 0 0 1 5 7.123v3.505a2.25 2.25 0 1 1-1.5 0V5.372a2.25 2.25 0 1 1 1.95-.218ZM4.25 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm8.5-4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM5 3.25a.75.75 0 1 0 0 .005V3.25Z"></path></svg><a data-error-text="Failed to load title" data-id="2447337585" data-permission-text="Title is private" data-url="https://github.com/LadybirdBrowser/ladybird/issues/965" data-hovercard-type="pull_request" data-hovercard-url="/LadybirdBrowser/ladybird/pull/965/hovercard" href="https://github.com/LadybirdBrowser/ladybird/pull/965">AK+LibGfx: Explicitly spell out headers in the clang module map<span>¬†#965</span></a></span></p>
<p dir="auto">Details: Creating a modulemap for larger libraries can cause issues with libc headers. For example, creating an umbrella directory entry for LibGfx causes issues with <code>&lt;math.h&gt;</code>, which is clearly included in every file that is complaining about it. Needs more module.modulemap massaging to get the clang frontend/swiftc to properly associate system headers with system modules and not our own modules</p>
<p dir="auto">Workaround: ¬Ø\_(„ÉÑ)_/¬Ø</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2471629808" data-permission-text="Title is private" data-url="https://github.com/LadybirdBrowser/ladybird/issues/1101" data-hovercard-type="issue" data-hovercard-url="/LadybirdBrowser/ladybird/issues/1101/hovercard" href="https://github.com/LadybirdBrowser/ladybird/issues/1101">Swift: Importing AK and querying type properties crashes swift-frontend in Debug build<span>¬†#1101</span></a></span></p>
<p dir="auto">Details: Building the CxxSequence protocol conformance test for AK containers crashes the swift frontend process in debug mode</p>
<p dir="auto">Workaround: Build in release mode lmao</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2471684633" data-permission-text="Title is private" data-url="https://github.com/LadybirdBrowser/ladybird/issues/1102" data-hovercard-type="issue" data-hovercard-url="/LadybirdBrowser/ladybird/issues/1102/hovercard" href="https://github.com/LadybirdBrowser/ladybird/issues/1102">Swift: Using un-namespaced &#39;String&#39; type after importing AK crashes swift frontend<span>¬†#1102</span></a></span></p>
<p dir="auto">Details: A function that takes an unnamespaced <code>String</code> argument will crash the swift frontend if <code>AK</code> is imported</p>
<p dir="auto">Workaround: Qualify all references to String as AK.String or Swift.String</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2488554441" data-permission-text="Title is private" data-url="https://github.com/LadybirdBrowser/ladybird/issues/1201" data-hovercard-type="issue" data-hovercard-url="/LadybirdBrowser/ladybird/issues/1201/hovercard" href="https://github.com/LadybirdBrowser/ladybird/issues/1201">Swift: Building AK swift test with Testing module crashes compiler frontend<span>¬†#1201</span></a></span></p>
<p dir="auto">Details: Using swift-testing to test AK container conformance to swift interop protocols crashes the frontend</p>
<p dir="auto">Workaround: Keep custom test runner code</p>
</li>
<li>
<p dir="auto"> <span><svg title="Closed" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"></path><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2633898310" data-permission-text="Title is private" data-url="https://github.com/LadybirdBrowser/ladybird/issues/2168" data-hovercard-type="issue" data-hovercard-url="/LadybirdBrowser/ladybird/issues/2168/hovercard" href="https://github.com/LadybirdBrowser/ladybird/issues/2168">Swift: AK::StringView is no longer a CxxSequenceType on swift/main<span>¬†#2168</span></a></span></p>
<p dir="auto">Details: AK::StringView fails to conform to CxxSequenceType on swift/main</p>
<p dir="auto">Workaround: Reach into the bytesUnsafe() in order to iterate over the bytes of the view as a sequence</p>
</li>
</ul>
<p dir="auto">Nice-to-have:</p>
<ul>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2895111217" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/79767" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/79767/hovercard" href="https://github.com/swiftlang/swift/issues/79767">Interop: Application crash when returning <code>Optional&lt;CxxType&gt;</code><span>¬†swiftlang/swift#79767</span></a></span></p>
<p dir="auto">Details: Returning MyCxx.CxxType? from a swift function that is called from C++ crashes on call.</p>
<p dir="auto">Workaround: Return as [MyCxx.CxxType] instead, with a 0 or 1-sized array</p>
</li>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2933646074" data-permission-text="Title is private" data-url="https://github.com/swiftlang/vscode-swift/issues/1449" data-hovercard-type="issue" data-hovercard-url="/swiftlang/vscode-swift/issues/1449/hovercard" href="https://github.com/swiftlang/vscode-swift/issues/1449">Root-level compile_commands.json required for simple CMake projects<span>¬†swiftlang/vscode-swift#1449</span></a></span></p>
<p dir="auto">Details: Top-level compile_commands.json is required for SourceKit-LSP and vscode-swift to grok the project</p>
<p dir="auto">Workaround: Create a symlink <code>ln -s Build/release/compile_commands.json compile_commands.json</code></p>
</li>
<li>
<p dir="auto"> <span><svg title="Open" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path></svg><a data-error-text="Failed to load title" data-id="2933293904" data-permission-text="Title is private" data-url="https://github.com/swiftlang/swift/issues/80142" data-hovercard-type="issue" data-hovercard-url="/swiftlang/swift/issues/80142/hovercard" href="https://github.com/swiftlang/swift/issues/80142">Automatically include path to <code>&lt;swift/bridging&gt;</code> in SDK installs<span>¬†swiftlang/swift#80142</span></a></span></p>
<p dir="auto">Details: An extra include path is required to include <code>&lt;swift/bridging&gt;</code> on Linux</p>
<p dir="auto">Workaround: Grab the path from <code>swiftc -print-target-info</code></p>
</li>
</ul>
<p dir="auto">Open questions:</p>
<ul>
<li>
<p dir="auto">Unclear how to pass view types or byte slices to swift without creating a copy.</p>
<ul dir="auto">
<li>We will want to be passing untrusted Strings, or c++-owned Spans of bytes to swift for it to crunch on and return some structured data. It&#39;s not clear how to inform swift about this without copying the data (at least) once.</li>
<li><del>I was not able to massage swift into interpreting our String and StringView types as &#39;CxxConvertibleToContainer&#39; or &#39;CxxRandomAccessContainer&#39; types. Likely because they are actually immutable?</del></li>
</ul>
</li>
<li>
<p dir="auto">Unclear how to convince Swift that our types are just as good as std:: ones.</p>
<ul dir="auto">
<li>AK::Optional</li>
<li>AK::HashTable/HashMap</li>
<li>AK::Time</li>
<li>more?</li>
</ul>
</li>
<li>
<p dir="auto"> How to integrate with our garbage collector? <a href="https://forums.swift.org/t/ladybird-browser-and-swift-garbage-collection/76084" rel="nofollow">https://forums.swift.org/t/ladybird-browser-and-swift-garbage-collection/76084</a></p>
</li>
</ul></div></div><div><!--$!--><template></template><p><span data-direction="s" aria-hidden="true" id="_R_1aklnb_">Reactions are currently unavailable</span></p><!--/$--></div></div></div></div></div>
  </body>
</html>
