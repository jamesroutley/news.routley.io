<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/eschluntz/compress">Original</a>
    <h1>Show HN: I automated half of my typing</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a href="https://codecov.io/gh/eschluntz/compress" rel="nofollow"><img src="https://camo.githubusercontent.com/07b06fdd538d34c3437675bcbb7d94e331202216ffde7fecbdda68a3fb74cc11/68747470733a2f2f636f6465636f762e696f2f67682f657363686c756e747a2f636f6d70726573732f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d434d4c35503238454c4c" alt="codecov" data-canonical-src="https://codecov.io/gh/eschluntz/compress/branch/master/graph/badge.svg?token=CML5P28ELL"/></a></p>
<p dir="auto"><a href="https://github.com/eschluntz/compress/actions"><img src="https://github.com/eschluntz/compress/actions/workflows/run_tests.yml/badge.svg" alt="Build Status"/></a></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eschluntz/compress/blob/master/img/expand-demo.gif"><img src="https://github.com/eschluntz/compress/raw/master/img/expand-demo.gif" alt="demo" data-animated-image=""/></a></p>
<p dir="auto">This is a tool for automatically creating typing shortcuts from a corpus of your own writing! I use these shortcuts mainly for email and slack:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eschluntz/compress/blob/master/img/email-expand.gif"><img src="https://github.com/eschluntz/compress/raw/master/img/email-expand.gif" alt="email" data-animated-image=""/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eschluntz/compress/blob/master/img/slack-expand.gif"><img src="https://github.com/eschluntz/compress/raw/master/img/slack-expand.gif" alt="slack" data-animated-image=""/></a></p>
<p dir="auto">This repo parses a corpus of text and suggest what shortcuts you should use to save the most letters while typing. It then generates config files for <a href="https://github.com/autokey/autokey">Autokey</a>, a linux program that implements keyboard shortcuts!</p>
<p dir="auto">It also contains a tool for optionally parsing a Slack Data Export of your messages to create a corpus.</p>

<p dir="auto">The code looks through the corpus to find common n-grams that can be replaced with much shorter phrases. The suggestions are ranked by <code>[characters saved] * [frequency of phrase]</code>.</p>
<p dir="auto">I was surprised that very short and frequent words topped this list, such as <code>the -&gt; t</code>, instead of longer phrases that I use a lot, such as <code>what do you think -&gt; wdytk</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eschluntz/compress/blob/master/img/chars-saved.png"><img src="https://github.com/eschluntz/compress/raw/master/img/chars-saved.png" alt="results"/></a></p>
<p dir="auto">Just reading through the results was amusing to see how repetitive some of my writing is :)</p>

<p dir="auto">This is largely preferences and heuristics to try to generate memorable abbreviations for different phrases. Some of my design philosphies were:</p>
<ol dir="auto">
<li>The abbrev cannot be a word that I want to type. Right now this is done with a blacklist, but I should change it to use my actual corpus.</li>
<li>The goal is being memorable. 1st letter is top choice, and 1st letter + last letter is next choice.</li>
<li>More common phrases get priority for more memorable abbrevs.</li>
</ol>
<p dir="auto">This is currently done as a manual post-process step, but I like to make &#34;families&#34;
of abbrevs to make them more memorable. Some example heuristics for this are:</p>
<ol dir="auto">
<li>Plurals should have the same abbrev as the singular, but with an &#34;s&#34;. For example <code>robot -&gt; r</code> and <code>robots -&gt; rs</code>.</li>
<li>If a word has an abbrev, a phrase that contains that word should contain the abbrev. For example:</li>
</ol>
<div data-snippet-clipboard-copy-content="the       -&gt; t
robot     -&gt; r
the robot -&gt; tr"><pre><code>the       -&gt; t
robot     -&gt; r
the robot -&gt; tr
</code></pre></div>
<ol start="3" dir="auto">
<li>Think about how similar words&#39; abbrevs can be similar as well. i.e.</li>
</ol>
<div data-snippet-clipboard-copy-content="some      -&gt; s
someone   -&gt; sn
something -&gt; st
sometime  -&gt; sti"><pre><code>some      -&gt; s
someone   -&gt; sn
something -&gt; st
sometime  -&gt; sti
</code></pre></div>

<ol dir="auto">
<li>run <code>install.sh</code> to install dependencies. Currently tested on python 3.10.12</li>
<li>Put any corpus of your text that you want to compress in <code>data/corpus/*.txt</code></li>
<li>If you want to use your slack history as a corpus:
<ol dir="auto">
<li>export it to a folder called <code>data/slack_export</code>. Only slack workspace admins can do this (and it only exports public channels).</li>
<li>Change <code>USERNAME_TO_EXPORT</code> at the top of the file to your slack username.</li>
<li>Run <code>parse_slack.py</code>. This will generate a new corpus document in <code>data/corpus/</code></li>
<li>DELETE YOUR SLACK EXPORT WITH <code>srm</code></li>
</ol>
</li>
<li>Run <code>find_suggested_phrases.py</code>. This will generate a list of the top 200 suggested shortcuts to <code>output/suggested_shortcuts.yaml</code></li>
<li>Edit or add any shortcuts that you want, then copy the file to <code>shortcuts.yaml</code>.
<ul dir="auto">
<li>This is a manual step so you can customize it without it being blown out every time you run the script again.</li>
<li>It&#39;s also saved in git even though it&#39;s an output so that I can keep it in sync across multiple of my computers :)</li>
<li>If you&#39;re starting out, I suggest just going with 10-20 shortcuts to make it easier to remember them</li>
</ul>
</li>
<li>Run <code>generate_autokeys.py</code> to convert <code>shortcuts.yaml</code> into actual config files for <code>autokey</code>.</li>
<li>Install <a href="https://github.com/autokey/autokey">Autokey</a>
<ul dir="auto">
<li>Right now, Autokey is only supported on linux with X11, not Wayland</li>
</ul>
</li>
<li>Symlink the output into autokey&#39;s config: <code>ln -s output/autokey_phrases ~/.config/autokey/data/My Phrases/</code></li>
<li>From now on when you edit <code>shortcuts.yaml</code> you can re-generate and reload autokey with <code>reload.sh</code></li>
</ol>

<p dir="auto"><a href="https://github.com/autokey/autokey">Autokey</a> Uses simulated keyboard input to replace phrases with your abbreviations. I tried several chrome extensions but this worked much more reliably without conflicting with sites&#39; own javascript.</p>
<p dir="auto">The config files I generate are set to only apply when Chrome is in focus because that&#39;s where I do most of my english typing. I found that keeping this active in terminal and vscode caused way more problems than it was solved because my abbreviations overlapped with common short linux commands and variable names i.e. <code>t</code>.</p>
</article>
          </div></div>
  </body>
</html>
