<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.ratatui-ruby.dev/">Original</a>
    <h1>Show HN: RatatuiRuby wraps Rust Ratatui as a RubyGem – TUIs with the joy of Ruby</h1>
    
    <div id="readability-page-1" class="page"><div>
    <!-- Hero -->
    <section id="hero">
      <div>
        <div>
          
          <p><a href="https://rubygems.org/gems/ratatui_ruby">RatatuiRuby</a> is a RubyGem built
            on <a href="https://ratatui.rs">Ratatui</a>, a leading
            <abbr title="Terminal User Interface">TUI</abbr> library written in <a href="https://rust-lang.org">Rust</a>. You get native performance with the joy of Ruby.
          </p>

          <div>
            <p><code><span>$ </span>gem install ratatui_ruby --pre</code></p><p><span>SemVer Tag: v1.0.0-beta.2</span> <span>RubyGems.org: 1.0.0.pre.beta.2</span></p>
          </div>
        </div>
        
      </div>
    </section>

    <!-- Rich Moments -->
    <section id="rich-moments">
      <div>
        

        <div>
          <div>
            <h3>Inline Viewports</h3>
            <p>Standard TUIs erase themselves on exit. Your carefully formatted CLI output disappears. Users lose their
              scrollback.</p>
            <p><strong>Inline viewports</strong> solve this. They occupy a fixed number of lines, render rich UI, then
              leave the output in place when done.</p>
            <p>Perfect for spinners, menus, progress indicators—any brief moment of richness.</p>
          </div>
          <div>
          <pre><code><span>class</span> <span>Spinner</span>
  <span>def</span> <span>main</span>
    <span>RatatuiRuby</span><span>.</span><span>run</span><span>(</span><span>viewport</span><span>:</span> <span>:</span><span>inline</span><span>,</span> <span>height</span><span>:</span> <span>1</span><span>)</span> <span>do</span> <span>|</span><span>tui</span><span>|</span>
      <span>until</span> <span>connected?</span>
        <span>status</span> <span>=</span> <span>tui</span><span>.</span><span>paragraph</span><span>(</span><span>text</span><span>:</span> <span>&#34;</span><span>#{</span><span>spin</span><span>}</span><span> Connecting...</span><span>&#34;</span><span>)</span>
        <span>tui</span><span>.</span><span>draw</span> <span>{</span> <span>|</span><span>frame</span><span>|</span> <span>frame</span><span>.</span><span>render_widget</span><span>(</span><span>status</span><span>,</span> <span>frame</span><span>.</span><span>area</span><span>)</span> <span>}</span>
        <span>return</span> <span>ending</span><span>(</span><span>tui</span><span>,</span> <span>&#34;</span><span>Canceled!</span><span>&#34;</span><span>,</span> <span>:</span><span>red</span><span>)</span> <span>if</span> <span>tui</span><span>.</span><span>poll_event</span><span>.</span><span>ctrl_c?</span>
      <span>end</span>
      <span>ending</span><span>(</span><span>tui</span><span>,</span> <span>&#34;</span><span>Connected!</span><span>&#34;</span><span>,</span> <span>:</span><span>green</span><span>)</span>
    <span>end</span>
  <span>end</span>

  <span>def</span> <span>ending</span><span>(</span><span>tui</span><span>,</span> <span>message</span><span>,</span> <span>color</span><span>)</span> <span>=</span> <span>tui</span><span>.</span><span>draw</span> <span>do</span> <span>|</span><span>frame</span><span>|</span>
    <span>frame</span><span>.</span><span>render_widget</span><span>(</span><span>tui</span><span>.</span><span>paragraph</span><span>(</span><span>text</span><span>:</span> <span>message</span><span>,</span> <span>fg</span><span>:</span> <span>color</span><span>)</span><span>,</span> <span>frame</span><span>.</span><span>area</span><span>)</span>
  <span>end</span>

  <span>def</span> <span>initialize</span> <span>=</span> <span>(</span><span>@frame</span><span>,</span> <span>@finish</span> <span>=</span> <span>0</span><span>,</span> <span>Time</span><span>.</span><span>now</span> <span>+</span> <span>2</span><span>)</span>
  <span>def</span> <span>connected?</span> <span>=</span> <span>Time</span><span>.</span><span>now</span> <span>&gt;=</span> <span>@finish</span> 
  <span>def</span> <span>spin</span> <span>=</span> <span>SPINNER</span><span>[</span><span>(</span><span>@frame</span> <span>+=</span> <span>1</span><span>)</span> <span>%</span> <span>SPINNER</span><span>.</span><span>length</span><span>]</span>
  <span>SPINNER</span> <span>=</span> <span>%w</span><span>[</span><span>⠋ ⠙ ⠹ ⠸ ⠼ ⠴ ⠦ ⠧ ⠇ ⠏</span><span>]</span>
<span>end</span>
<span>Spinner</span><span>.</span><span>new</span><span>.</span><span>main</span><span>;</span> <span>puts</span></code></pre>
          </div>
        </div>

        <details>
          <summary>See more: Inline menu example</summary>
          <div>
            <pre><code><span>require</span> <span>&#34;</span><span>ratatui_ruby</span><span>&#34;</span>


<span>class</span> <span>RadioMenu</span>
  <span>CHOICES</span> <span>=</span> <span>[</span><span>&#34;</span><span>Production</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>Staging</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>Development</span><span>&#34;</span><span>]</span>         
  <span>PREFIXES</span> <span>=</span> <span>{</span> <span>active</span><span>:</span> <span>&#34;</span><span>●</span><span>&#34;</span><span>,</span> <span>inactive</span><span>:</span> <span>&#34;</span><span>○</span><span>&#34;</span> <span>}</span>                
  <span>CONTROLS</span> <span>=</span> <span>&#34;</span><span>↑/↓: Select | Enter: Choose | Ctrl+C: Cancel</span><span>&#34;</span>
  <span>TITLES</span> <span>=</span> <span>[</span><span>&#34;</span><span>Select Environment</span><span>&#34;</span><span>,</span>                            
            <span>{</span> <span>content</span><span>:</span> <span>CONTROLS</span><span>,</span>                             
              <span>position</span><span>:</span> <span>:</span><span>bottom</span><span>,</span>                             
              <span>alignment</span><span>:</span> <span>:</span><span>right</span> <span>}</span><span>]</span>                           

  <span>def</span> <span>call</span>                                                   
    <span>RatatuiRuby</span><span>.</span><span>run</span><span>(</span><span>viewport</span><span>:</span> <span>:</span><span>inline</span><span>,</span> <span>height</span><span>:</span> <span>5</span><span>)</span> <span>do</span> <span>|</span><span>tui</span><span>|</span>   
      <span>@tui</span> <span>=</span> <span>tui</span>                                             
      <span>show_menu</span> <span>until</span> <span>chosen?</span>                                
    <span>end</span>                                                      
    <span>RadioMenu</span><span>::</span><span>CHOICES</span><span>[</span><span>@choice</span><span>]</span>                              
  <span>end</span>
                                                             
  <span>private</span>                                                    

  <span>def</span> <span>show_menu</span> <span>=</span> <span>@tui</span><span>.</span><span>draw</span> <span>do</span> <span>|</span><span>frame</span><span>|</span>                       
    <span>widget</span> <span>=</span> <span>@tui</span><span>.</span><span>paragraph</span><span>(</span>                                 
      <span>text</span><span>:</span> <span>menu_items</span><span>,</span>                                      
      <span>block</span><span>:</span> <span>@tui</span><span>.</span><span>block</span><span>(</span><span>borders</span><span>:</span> <span>:</span><span>all</span><span>,</span> <span>titles</span><span>:</span> <span>TITLES</span><span>)</span>       
    <span>)</span>                                                        
    <span>frame</span><span>.</span><span>render_widget</span><span>(</span><span>widget</span><span>,</span> <span>frame</span><span>.</span><span>area</span><span>)</span>                  
  <span>end</span>

  <span>def</span> <span>chosen?</span>                                                
    <span>interaction</span> <span>=</span> <span>@tui</span><span>.</span><span>poll_event</span>                            
    <span>return</span> <span>choose</span> <span>if</span> <span>interaction</span><span>.</span><span>enter?</span>                      
                                                             
    <span>move_by</span><span>(</span><span>-1</span><span>)</span> <span>if</span> <span>interaction</span><span>.</span><span>up?</span>                           
    <span>move_by</span><span>(</span><span>1</span><span>)</span> <span>if</span> <span>interaction</span><span>.</span><span>down?</span>                          
    <span>quit!</span> <span>if</span> <span>interaction</span><span>.</span><span>ctrl_c?</span>                             
    <span>false</span>                                                    
  <span>end</span>

  <span>def</span> <span>choose</span>                                                 
    <span>prepare_next_line</span>                                        
    <span>@choice</span>                                                  
  <span>end</span>                                                        
                                                             
  <span>def</span> <span>prepare_next_line</span>                                      
    <span>area</span> <span>=</span> <span>@tui</span><span>.</span><span>viewport_area</span>                                
    <span>RatatuiRuby</span><span>.</span><span>cursor_position</span> <span>=</span> <span>[</span><span>0</span><span>,</span> <span>area</span><span>.</span><span>y</span> <span>+</span> <span>area</span><span>.</span><span>height</span><span>]</span>  
    <span>puts</span>                                                     
  <span>end</span>

  <span>def</span> <span>quit!</span>                                                  
    <span>prepare_next_line</span>                                        
    <span>exit</span> <span>0</span>                                                   
  <span>end</span>

  <span>def</span> <span>move_by</span><span>(</span><span>line_count</span><span>)</span>                                    
    <span>@choice</span> <span>=</span> <span>(</span><span>@choice</span> <span>+</span> <span>line_count</span><span>)</span> <span>%</span> <span>CHOICES</span><span>.</span><span>size</span>          
  <span>end</span>                                                        
                                                             
  <span>def</span> <span>menu_items</span> <span>=</span> <span>CHOICES</span><span>.</span><span>map</span><span>.</span><span>with_index</span> <span>do</span> <span>|</span><span>choice</span><span>,</span> <span>i</span><span>|</span>     
    <span>&#34;</span><span>#{</span><span>prefix_for</span><span>(</span><span>i</span><span>)</span><span>}</span><span> </span><span>#{</span><span>choice</span><span>}</span><span>&#34;</span>                             
  <span>end</span>                                                        
  <span>def</span> <span>prefix_for</span><span>(</span><span>choice_index</span><span>)</span>                               
    <span>return</span> <span>PREFIXES</span><span>[</span><span>:</span><span>active</span><span>]</span> <span>if</span> <span>choice_index</span> <span>==</span> <span>@choice</span>      
    <span>PREFIXES</span><span>[</span><span>:</span><span>inactive</span><span>]</span>                                      
  <span>end</span>                                                        
                                                             
  <span>def</span> <span>initialize</span> <span>=</span> <span>@choice</span> <span>=</span> <span>0</span>                               
<span>end</span>                                                          
                                                             
<span>choice</span> <span>=</span> <span>RadioMenu</span><span>.</span><span>new</span><span>.</span><span>call</span>                                  
<span>puts</span> <span>&#34;</span><span>You chose </span><span>#{</span><span>choice</span><span>}</span><span>!</span><span>&#34;</span>                                  </code></pre>
          </div>
        </details>
      </div>
    </section>

    <!-- Build Something Real -->
    <section id="build">
      <div>
        

        <div>
          <div>
            <pre><code><span>RatatuiRuby</span><span>.</span><span>run</span> <span>do</span> <span>|</span><span>tui</span><span>|</span>
  <span>loop</span> <span>do</span>
    <span>tui</span><span>.</span><span>draw</span> <span>do</span> <span>|</span><span>frame</span><span>|</span>
      <span>frame</span><span>.</span><span>render_widget</span><span>(</span>
        <span>tui</span><span>.</span><span>paragraph</span><span>(</span>
          <span>text</span><span>:</span> <span>&#34;</span><span>Hello, RatatuiRuby!</span><span>&#34;</span><span>,</span>
          <span>alignment</span><span>:</span> <span>:</span><span>center</span><span>,</span>
          <span>block</span><span>:</span> <span>tui</span><span>.</span><span>block</span><span>(</span>
            <span>title</span><span>:</span> <span>&#34;</span><span>My App</span><span>&#34;</span><span>,</span>
            <span>titles</span><span>:</span> <span>[{</span> <span>content</span><span>:</span> <span>&#34;</span><span>q: Quit</span><span>&#34;</span><span>,</span> <span>position</span><span>:</span> <span>:</span><span>bottom</span><span>,</span> <span>alignment</span><span>:</span> <span>:</span><span>right</span> <span>}],</span>
            <span>borders</span><span>:</span> <span>[</span><span>:</span><span>all</span><span>],</span>
            <span>border_style</span><span>:</span> <span>{</span> <span>fg</span><span>:</span> <span>&#34;</span><span>cyan</span><span>&#34;</span> <span>}</span>
          <span>)</span>
        <span>)</span><span>,</span>
        <span>frame</span><span>.</span><span>area</span>
      <span>)</span>
    <span>end</span>

    <span>case</span> <span>tui</span><span>.</span><span>poll_event</span>
    <span>in</span> <span>{</span> <span>type</span><span>:</span> <span>:</span><span>key</span><span>,</span> <span>code</span><span>:</span> <span>&#34;</span><span>q</span><span>&#34;</span> <span>}</span> <span>|</span> <span>{</span> <span>type</span><span>:</span> <span>:</span><span>key</span><span>,</span> <span>code</span><span>:</span> <span>&#34;</span><span>c</span><span>&#34;</span><span>,</span> <span>modifiers</span><span>:</span> <span>[</span><span>&#34;</span><span>ctrl</span><span>&#34;</span><span>]</span> <span>}</span>
      <span>break</span>
    <span>else</span>
      <span>nil</span>
    <span>end</span>
  <span>end</span>
<span>end</span></code></pre>
          </div>
          <div>
            <h3>The Managed Loop</h3>
            <p><code>RatatuiRuby.run</code> enters raw mode, switches to the alternate screen, and restores the terminal
              on exit.</p>
            <p>Inside the block: call <code>draw</code> to render, and <code>poll_event</code> to read input.</p>

            <h4>Widgets included:</h4>
            
            <p>Need something else? <a href="https://git.sr.ht/~kerrick/ratatui_ruby/tree/stable/item/doc/concepts/custom_widgets.md">Build
                custom widgets</a> in Ruby!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testing Built In -->
    <section id="testing">
      <div>
        

        <div>
          <div>
            <pre><code><span>require</span> <span>&#34;</span><span>ratatui_ruby/test_helper</span><span>&#34;</span>

<span>class</span> <span>TestColorPicker</span> <span>&lt;</span> <span>Minitest</span><span>::</span><span>Test</span>
  <span>include</span> <span>RatatuiRuby</span><span>::</span><span>TestHelper</span> 

  <span>def</span> <span>test_swatch_widget</span> 
    <span>with_test_terminal</span><span>(</span><span>10</span><span>,</span> <span>3</span><span>)</span> <span>do</span>
      <span>RatatuiRuby</span><span>.</span><span>draw</span> <span>do</span> <span>|</span><span>frame</span><span>|</span>
        <span>frame</span><span>.</span><span>render_widget</span><span>(</span><span>Swatch</span><span>.</span><span>new</span><span>(</span><span>:</span><span>red</span><span>),</span> <span>frame</span><span>.</span><span>area</span><span>)</span>
      <span>end</span>
      <span>assert_cell_style</span> <span>2</span><span>,</span> <span>1</span><span>,</span> <span>char</span><span>:</span> <span>&#34;</span><span>█</span><span>&#34;</span><span>,</span> <span>bg</span><span>:</span> <span>:</span><span>red</span>
    <span>end</span>
  <span>end</span>

  <span>def</span> <span>test_input_hex</span> 
    <span>with_test_terminal</span> <span>do</span>
      <span>inject_keys</span> <span>&#34;</span><span>#</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>f</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>f</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>0</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>0</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>0</span><span>&#34;</span><span>,</span> <span>&#34;</span><span>0</span><span>&#34;</span>
      <span>inject_keys</span> <span>:</span><span>enter</span><span>,</span> <span>:</span><span>q</span>
      <span>ColorPicker</span><span>.</span><span>new</span><span>.</span><span>run</span>
      <span>assert_snapshots</span> <span>&#34;</span><span>after_hex_entry</span><span>&#34;</span>
    <span>end</span>
  <span>end</span>
<span>end</span></code></pre>
          </div>
          <div>
            <h3>One Include, Everything Works</h3>
            <p>The module sets up a headless terminal, injects events, and asserts on rendered output. Everything
              runs in-process with no external dependencies.</p>

            <h4>What&#39;s inside:</h4>
            <ul>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/Terminal.html">Headless
                    terminal</a></strong> No real <abbr title="TeleTYpewriter">TTY</abbr> needed</li>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/Snapshot.html">Snapshots</a></strong>
                Plain text and rich (<abbr title="American National Standards Institute">ANSI</abbr> colors)</li>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/EventInjection.html">Event injection</a></strong> Keys, mouse, paste, resize</li>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/StyleAssertions.html">Style assertions</a></strong> Color, bold, underline at any cell</li>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/TestDoubles.html">Test doubles</a></strong> Mock frames and stub rects</li>
              <li><strong><a href="https://palomakop.tv/docs/v1.0/RatatuiRuby/TestHelper/Snapshot.html#module-RatatuiRuby::TestHelper::Snapshot-label-Creating+and+Updating+Snapshots">UPDATE_SNAPSHOTS=1</a></strong> Regenerate baselines in one command</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Scale Up: Rooibos &amp; Kit -->
    <section id="frameworks">
      
    </section>

    <!-- Why RatatuiRuby -->
    <section id="why">
      <div>
        

        <div>
          <div>
            <p>Ruby deserves world-class terminal user interfaces. <abbr title="Terminal User Interface">TUI</abbr>
              developers deserve a world-class language.</p>
            <p>RatatuiRuby wraps Rust&#39;s <a href="https://ratatui.rs">Ratatui</a> via native extension.
              The Rust library handles rendering. Your Ruby code handles design.
            </p>

            <blockquote>
              <p>Text UIs are seeing a renaissance with many new TUI libraries popping up. The Ratatui bindings have
                proven to be
                full featured and stable.</p>
              <cite>
                <strong><a href="https://www.mikeperham.com/">Mike Perham</a></strong>, creator of <a href="https://sidekiq.org/">Sidekiq</a> and <a href="https://contribsys.com/faktory/">Faktory</a>
              </cite>
            </blockquote>

            <p><a href="https://sr.ht/~kerrick/ratatui_ruby">Explore the RatatuiRuby
                ecosystem →</a></p>
          </div>
          <div>
            <h3>Why Rust? Why Ruby?</h3>
            <p>Rust excels at low-level rendering. Ruby excels at expressing domain logic and <abbr title="User Interface">UI</abbr>.
              RatatuiRuby puts each language where it performs best.
            </p>

            <h3>Versus CharmRuby</h3>
            <p><a href="https://charm-ruby.dev/">CharmRuby</a> wraps <a href="https://charm.land/libs/">Charm&#39;s Go
                libraries</a>.
              Both projects give Ruby developers <abbr title="Terminal User Interface">TUI</abbr> options.</p>
            <table>
              <thead>
                <tr>
                  <th></th>
                  <th>CharmRuby</th>
                  <th>RatatuiRuby</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Integration</th>
                  <td>Two runtimes, one process</td>
                  <td>Native extension in Rust</td>
                </tr>
                <tr>
                  <th>Runtime</th>
                  <td>Go + Ruby (competing)</td>
                  <td>Ruby (Rust has no runtime)</td>
                </tr>
                <tr>
                  <th>Memory</th>
                  <td>Two uncoordinated <abbr title="Garbage Collector">GC</abbr>s</td>
                  <td>One Garbage Collector</td>
                </tr>
                <tr>
                  <th>Style</th>
                  <td>The Elm Architecture (TEA)</td>
                  <td><abbr title="The Elm Architecture">TEA</abbr>, <abbr title="Object-Oriented Programming">OOP</abbr>, or Imperative</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </div></div>
  </body>
</html>
