<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://11011110.github.io/blog/2022/06/04/maybe-powers-pi.html">Original</a>
    <h1>Maybe powers of π don&#39;t have unexpectedly good approximations?</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p>After <a href="https://11011110.github.io/blog/2022/05/31/linkage.html">I wrote recently</a> about Ramanujan’s approximation \(\pi^4\approx 2143/22\), writing “why do powers of \(\pi\) seem to have unusually good rational approximations?”, 
Timothy Chow emailed to challenge my assumption, asking what evidence I had that their approximations were unusually good. So that led me to do a little statistical experiment to test that hypothesis, and the experiment showed…that the approximations seem to be about as good as we would expect, no more, no less. Not unusually good. Chow was correct, and my earlier statement was overstated. So if Ramanujan’s approximation is not just random fluctuation (which for all I know it could be), it at least does not seem to be part of a pattern of many good rational approximations for small powers of \(\pi\). Below are some details of how I came to this conclusion.</p>

<p>First off, one gets good rational approximations by truncating the <a href="https://en.wikipedia.org/wiki/Continued_fraction">continued fraction representation</a> of a number. for instance, Ramanujan’s approximation can be obtained from the continued fraction</p><p>

\[\pi^4=97 + \cfrac{1}{2 + \cfrac{1}{2 + \cfrac{1}{3 + \cfrac{1}{1+\cfrac{1}{16539+\cdots}}}}}\]

</p><p>by stopping just before the big number \(16539\). You want to stop at those points, roughly speaking, because the accuracy of your approximation (as measured for instance by how many decimal digits you get correct) comes from combining all of the terms up to and including the big one you stopped before, but the complexity of your approximation (how many digits it takes to write it down) comes from only the terms before you stopped. When you stop just before a big term, you get a lot of accuracy for free. And so the question I was really asking was “why do the powers of \(\pi\) have unusually big terms in their continued fractions?” But the question I should have asked first was “do the powers of \(\pi\) have unusually big terms in their continued fractions?”</p>

<p>For a random number, the terms of the continued fraction will be distributed according to the <a href="https://en.wikipedia.org/wiki/Gauss%E2%80%93Kuzmin_distribution">Gauss–Kuzmin distribution</a>, according to which the probability of seeing a term with value exactly \(k\) is</p><p>

\[- \log_2 \left( 1 - \frac{1}{(1+k)^2}\right).\]

</p><p>This is a <a href="https://en.wikipedia.org/wiki/Heavy-tailed_distribution">heavy-tailed distribution</a>, so one should expect to see some large numbers from time to time. What I wanted to test was a <a href="https://en.wikipedia.org/wiki/Null_hypothesis">null hypothesis</a> that the continued fraction for powers of \(\pi\) are distributed in this way. If the tests revealed a low likelihood of this being true, it would suggest that they have some other distribution, confirming what I wrote in my earlier post. If they didn’t, it still might mean that there was something unusual about those terms, but it would have to be more subtle, subtle enough to be undetected by the statistical tests I used.</p>

<p>This is exactly the sort of thing <a href="https://en.wikipedia.org/wiki/Pearson%27s_chi-squared_test">Pearson’s \(\chi^2\) test</a> is good for. So I set up a \(\chi^2\) test in R comparing the observed data (the frequencies of each value in the continued fraction terms for \(\pi\), \(\pi^2\), \(\pi^3\), and \(\pi^4\), as taken from OEIS) with the Gauss–Kuzmin distribution. I omitted the initial term from each continued fraction, because those are the integer parts of the powers of \(\pi\), which are both nonrandom and uninteresting for approximation purposes. I also grouped the terms of the continued fractions into six exponentially-growing buckets, by mapping each term \(t_i\) to \(\min\bigl(5,\lfloor\log_2 t_i\rfloor\bigr)\), because the \(\chi^2\) test works better when it has only a small number of well-populated frequency counts to compare, rather than \(16539\) of them, many empty or with only one representative. This meant also computing the Gauss–Kuzmin probabilities for the same buckets. These buckets still don’t have uniform probabilities but I thought it better to stick to my first choice of bucketing rather than to repeatedly adjust the parameters of the test. Even with this bucketing the \(\chi^2\) test still wasn’t strong enough to work well on the OEIS data taken separately for each individual power of \(\pi\). Instead I had to concatenate the data for the four powers I had chosen into a single test to get it to work without R complaining.</p>

<p>Because I am more fluent in Python than R, I did this as <a href="https://11011110.github.io/blog/assets/2022/pipower.py">a Python script</a> to generate a very short R script, but it would have been as easy to do the whole thing directly in R. The results: a <a href="https://en.wikipedia.org/wiki/P-value">\(p\)-value</a> somewhat greater than \(\tfrac12\) (not small). So the null hypothesis was <em>not</em> rejected and I do not have evidence that the powers of \(\pi\) have unusually big terms in their continued fractions.</p>

<p>(<a href="https://mathstodon.xyz/@11011110/108423157545534693">Discuss on Mastodon</a>)</p>

  </div></div>
  </body>
</html>
