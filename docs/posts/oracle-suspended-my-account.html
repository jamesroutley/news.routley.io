<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://batin.sh/blog/oracle-suspended-my-account/">Original</a>
    <h1>Oracle Suspended My Account</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><div><p>Written by <a href="https://miccah.io/about">Batın Evirgen</a> on <!-- -->August 02, 2022</p><div data-gatsby-image-wrapper=""><p><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#39;1193&#39; width=&#39;2048&#39; xmlns=&#39;http://www.w3.org/2000/svg&#39; version=&#39;1.1&#39;%3E%3C/svg%3E"/></p><picture><source type="image/webp" data-srcset="/static/292c81c7a93738736f1007d8df40584b/b11a9/cover.webp 512w,/static/292c81c7a93738736f1007d8df40584b/c0b85/cover.webp 1024w,/static/292c81c7a93738736f1007d8df40584b/5a553/cover.webp 2048w" sizes="(min-width: 2048px) 2048px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" sizes="(min-width: 2048px) 2048px, 100vw" decoding="async" loading="lazy" data-src="/static/292c81c7a93738736f1007d8df40584b/504b0/cover.png" data-srcset="/static/292c81c7a93738736f1007d8df40584b/475d4/cover.png 512w,/static/292c81c7a93738736f1007d8df40584b/1972f/cover.png 1024w,/static/292c81c7a93738736f1007d8df40584b/504b0/cover.png 2048w" alt="Cover image"/></picture></div></div><p>In Aug 1, 2022 9:38:10 PM UTC, I got multiple emails from Sentry. Turns out there was a problem about connecting to the database.</p><p><span>
<a href="https://miccah.io/static/51810a1c57452225cd542bf142d3d36b/ce6cc/sentry-logs.png" target="_blank" rel="noopener">
<span></span>
<img alt="Sentry logs" title="Sentry logs" src="https://miccah.io/static/51810a1c57452225cd542bf142d3d36b/1d69c/sentry-logs.png" srcset="/static/51810a1c57452225cd542bf142d3d36b/4dcb9/sentry-logs.png 188w,/static/51810a1c57452225cd542bf142d3d36b/5ff7e/sentry-logs.png 375w,/static/51810a1c57452225cd542bf142d3d36b/1d69c/sentry-logs.png 750w,/static/51810a1c57452225cd542bf142d3d36b/78797/sentry-logs.png 1125w,/static/51810a1c57452225cd542bf142d3d36b/aa440/sentry-logs.png 1500w,/static/51810a1c57452225cd542bf142d3d36b/ce6cc/sentry-logs.png 1551w" sizes="(max-width: 750px) 100vw, 750px" loading="lazy" decoding="async"/>
</a>
</span></p><p>I immediately tried to connect my database using <code>mongosh</code></p><div data-language="bash"><pre><code>$ mongosh <span>&#34;mongodb://&lt;ip:port&gt;&#34;</span>
Current Mongosh Log ID: 62e912234d9a6e5a02a45867
Connecting to:          mongodb://<span>&lt;</span>credentials<span>&gt;</span>@<span>&lt;</span>ip:port<span>&gt;</span>/<span>&lt;</span>db<span>&gt;</span>?directConnection<span>=</span>true<span>&amp;</span><span>appName</span><span>=</span>mongosh+1.5.0
MongoServerSelectionError: connect ETIMEDOUT <span>&lt;</span>ip:port<span>&gt;</span></code></pre></div><p>Well, something was wrong.</p><p>I was using Oracle Cloud Infrastructure (OCI) for this project. It was great, it has generous always free resources and UI is so great for me (basic).</p><p>I thought that I knew what the problem is because 5 hours ago, I migrated database from Oracle Autonomous Database for Mongo API (OAD) to self hosted Mongo database.</p><hr/><h2 id="migration">Migration</h2><p>The reason for switch is OAD uses SQL behind and session limit is too low (I guess it&#39;s 20 session per 1 OCPU) and I was getting errors while using OAD about session limit
being reached.</p><p>In OCI, I wasn&#39;t used most of my always free resources for Compute instances. So I created the most powerful always free resource Ampere A1 instance with 24GBs of RAM and 4 OCPU.</p><p>I installed Docker in it and created a <code>mongo</code> container. I created admin user, set up ports and add ingress rule in VCN and it worked. I was able to connect to database
from <code>mongosh</code>.</p><p>For migration I used <code>mongodump</code> and <code>mongorestore</code>. It was approximately 25 min. process (database was huge <code>mongodump</code> archive was 1GB).</p><div data-language="bash"><pre><code>$ <span>ls</span> -l
-rwxrwx--- <span>1</span> batin batin 1G Aug  <span>1</span> 04:13 mongo_export.archive</code></pre></div><p>And it worked... For 5 hours.</p><p>After dumping and restoring the database I changed some of database code and re-built the application. It was working, even faster. I committed changes and merged changes
to <code>main</code> branch.</p><p>I used the web app like 2-3 hours and go back to sleep (in Turkey, time was ~23:00).</p><hr/><h2 id="inside-oci">Inside OCI</h2><p>Two hours later my phone rang... An email, from Sentry.</p><p>I get up, checked logs, tried to log in to database. After that, I logged in to OCI. Tried to check instance but an error popped up.</p><p><span>
<a href="https://miccah.io/static/7abd7ece8df981ef3c4808fe2fcdeb11/52c43/oci-error.png" target="_blank" rel="noopener">
<span></span>
<img alt="OCI error" title="OCI error" src="https://miccah.io/static/7abd7ece8df981ef3c4808fe2fcdeb11/1d69c/oci-error.png" srcset="/static/7abd7ece8df981ef3c4808fe2fcdeb11/4dcb9/oci-error.png 188w,/static/7abd7ece8df981ef3c4808fe2fcdeb11/5ff7e/oci-error.png 375w,/static/7abd7ece8df981ef3c4808fe2fcdeb11/1d69c/oci-error.png 750w,/static/7abd7ece8df981ef3c4808fe2fcdeb11/78797/oci-error.png 1125w,/static/7abd7ece8df981ef3c4808fe2fcdeb11/52c43/oci-error.png 1499w" sizes="(max-width: 750px) 100vw, 750px" loading="lazy" decoding="async"/>
</a>
</span></p><p>Looks like I didn&#39;t have permission to view a resource I created 5 hours ago. That&#39;s great. Since I am the administrator, I should contact myself for help, right?</p><p>I check the requests that OCI Client makes to server and saw that I get 404 error with this response.</p><div data-language="json"><pre><code><span>{</span>
  <span>&#34;code&#34;</span><span>:</span> <span>&#34;NotAuthorizedOrNotFound&#34;</span><span>,</span>
  <span>&#34;message&#34;</span><span>:</span> <span>&#34;Authorization failed or requested resource not found.&#34;</span>
<span>}</span></code></pre></div><p>I searched this error in search engine and saw that dozens of people also experienced this error. I logged in to Oracle Community (basically a support forum) and most of
the threads left unanswered.</p><p>Answered ones are basically something like this:</p><blockquote><p>Hello,</p><p>Greetings of the day! Thank you for reaching out on Forum.</p><p>We would like to check further with more details, hence I we have dropped you a private message, kindly respond over it.</p><p>Thanks &amp; regards!</p><p>[Name of support]</p></blockquote><p>So I didn&#39;t get any useful information there.</p><p>Even one member has shared it&#39;s customer support (which is not available for Always Free users).</p><p><span>
<a href="https://miccah.io/static/4daa9b71046fde3a451452532efbda26/d9199/customer-support.png" target="_blank" rel="noopener">
<span></span>
<img alt="Customer support message" title="Customer support message" src="https://miccah.io/static/4daa9b71046fde3a451452532efbda26/1d69c/customer-support.png" srcset="/static/4daa9b71046fde3a451452532efbda26/4dcb9/customer-support.png 188w,/static/4daa9b71046fde3a451452532efbda26/5ff7e/customer-support.png 375w,/static/4daa9b71046fde3a451452532efbda26/1d69c/customer-support.png 750w,/static/4daa9b71046fde3a451452532efbda26/d9199/customer-support.png 960w" sizes="(max-width: 750px) 100vw, 750px" loading="lazy" decoding="async"/>
</a>
</span></p><p>After viewing some of threads, I checked my tenancy settings and saw that my tenancy became inactive.</p><p><span>
<a href="https://miccah.io/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/29114/inactive-tenancy.png" target="_blank" rel="noopener">
<span></span>
<img alt="Inactive tenancy" title="Inactive tenancy" src="https://miccah.io/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/1d69c/inactive-tenancy.png" srcset="/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/4dcb9/inactive-tenancy.png 188w,/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/5ff7e/inactive-tenancy.png 375w,/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/1d69c/inactive-tenancy.png 750w,/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/78797/inactive-tenancy.png 1125w,/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/aa440/inactive-tenancy.png 1500w,/static/d0534cb99c3e0ed926d0fa6d9d4f46b2/29114/inactive-tenancy.png 1920w" sizes="(max-width: 750px) 100vw, 750px" loading="lazy" decoding="async"/>
</a>
</span></p><hr/><h2 id="terms-of-service">Terms of Service</h2><p>After viewing more threads, I came across an answer says that &#39;You probably violated Terms of Service.&#39;. That&#39;s weird. I didn&#39;t violate TOS.</p><p>I read <a href="https://www.oracle.com/assets/cloud-csa-v012418-sg-eng-4419911.pdf">Terms of Service of OCI</a> and in 9.3 they are clearly state that
&#39;we will provide you with advance notice of any such suspension.&#39;. I didn&#39;t get a warning, none of us get a warning. It&#39;s just shut down.</p><p>I also thought about maybe it&#39;s forbidden to deploy Mongo inside a Compute instance.</p><p>Nope, Oracle has <a href="https://docs.oracle.com/en/solutions/deploy-mongodb/index.html">multiple</a> <a href="https://developer.oracle.com/tutorials/deploy-mongodb-oci-linux-vm/">tutorials</a>
about deploying Mongo inside a Compute instance.</p><p>I am sure I didn&#39;t violate Terms of Service.</p><hr/><p>Now, my application doesn&#39;t work and I get lot&#39;s of emails from different services such as GitHub Actions, Sentry and more... Also I am looking for
another cloud provider to host my database.</p><p>I actually liked OCI because it was easy and understandable. They had already covered everyting in their documentations and they were really helpful.</p><p>Well. I guess that&#39;s how Oracle works. After trial period ends they shut down random accounts that are using their &#39;<strong>Always Free (not for long)</strong>&#39; services.</p><hr/><h2 id="qa">Q&amp;A</h2><p>Here are some questions I want to clarify:</p><hr/><p><strong>Q</strong>: Why are you using free resources in production?</p><p><strong>A</strong>: I am student, in Turkey. I know that my database costs ~10$ on MongoDB Atlas or other providers but ~10$/month is too much for me (TRY/USD = 0.056).</p><hr/><p><strong>Q</strong>: Does your database contains illegal stuff?</p><p><strong>A</strong>: Nope.</p><hr/><p><strong>Q</strong>: Did you create a thread in Oracle Community forum?</p><p><strong>A</strong>: Yes, no answers.</p><hr/></div></div></div><div><div><p>Made with ❤️ and ☕.</p></div></div></div>
  </body>
</html>
