<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://developer.redis.com/howtos/hackernews/">Original</a>
    <h1>How to build a HackerNews Clone using Redis</h1>
    
    <div id="readability-page-1" class="page"><div><p>Hacker News (sometimes abbreviated as HN) is a social news website focusing on computer science and entrepreneurship.
This is a HackerNews clone built upon React, NextJS as a frontend and NodeJS, ExpressJS &amp; Redis as a backend.
This application uses RedisJSON module for storing the data and RediSearch module for searching.</p><p><img alt="hackernews" src="https://developer.redis.com/assets/images/hackernews-974e3026a35651a1790714fa7f947184.png"/></p><h3><a aria-hidden="true" tabindex="-1" id="step-1-install-the-prerequisites"></a>Step 1. Install the prerequisites<a href="#step-1-install-the-prerequisites" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" id="install-the-below-packages"></a>Install the below packages<a href="#install-the-below-packages" title="Direct link to heading">#</a></h4><ul><li>NPM v7.8.0</li><li>NODE v15.10.0</li></ul><h3><a aria-hidden="true" tabindex="-1" id="step-2-create-redis-enterprise-cloud-database"></a>Step 2. Create Redis Enterprise Cloud database<a href="#step-2-create-redis-enterprise-cloud-database" title="Direct link to heading">#</a></h3><p><a href="https://developer.redis.com/create/rediscloud">Follow this link</a> to create Redis Enterprise Cloud account with 2 databases - one with RedisJSON module and other with RediSearch module enabled. Please note that under Free subscription, only one module can be enabled. If you want to create 2 databases, then you might need to create 2 different subscriptions.</p><p>Save the database endpoint URL and password for our future reference</p><h3><a aria-hidden="true" tabindex="-1" id="step-3-clone-the-repository"></a>Step 3. Clone the repository<a href="#step-3-clone-the-repository" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" id="step-4-setting-up-environmental-variable"></a>Step 4. Setting up environmental variable<a href="#step-4-setting-up-environmental-variable" title="Direct link to heading">#</a></h3><p>Copy .env.sample to .env and provide the values as shown below:</p><h3><a aria-hidden="true" tabindex="-1" id="step-5-run-the-developer-environment"></a>Step 5. Run the developer environment<a href="#step-5-run-the-developer-environment" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" id="step-6--pull-hacker-news-api-to-seed-database"></a>Step 6.  Pull Hacker News API to seed database<a href="#step-6--pull-hacker-news-api-to-seed-database" title="Direct link to heading">#</a></h3><p>Using <a href="https://github.com/HackerNews/API" target="_blank" rel="noopener noreferrer">API</a>, it pulls the latest hackernews data.
Next, you need to seed top stories from hacker news. First create a moderator with moderator:password123</p><h3><a aria-hidden="true" tabindex="-1" id="step-7-access-the-hackernews-url"></a>Step 7. Access the HackerNews URL<a href="#step-7-access-the-hackernews-url" title="Direct link to heading">#</a></h3><p>Open https://localhost:3001 and you should be able to access the HackerNews login screen as shown below:</p><p><img alt="hackernews" src="https://developer.redis.com/assets/images/screenshot-signup-8caa71d43eb218ac98130e6e5114b1bd.png"/></p><h3><a aria-hidden="true" tabindex="-1" id="how-it-works"></a>How it works<a href="#how-it-works" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" id="by-screens"></a>By Screens<a href="#by-screens" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" id="signup"></a>Signup<a href="#signup" title="Direct link to heading">#</a></h4><p><img alt="Signup Screen" src="https://developer.redis.com/assets/images/screenshot-signup-8caa71d43eb218ac98130e6e5114b1bd.png"/></p><ul><li><p>Make sure user(where username is andy1) does not exist.</p></li><li><p>Get and increase the next id in users collection.</p></li><li><p>Create user:63 hash and json.(json also collects authToken and password hash etc)</p></li></ul><h4><a aria-hidden="true" tabindex="-1" id="login"></a>Login<a href="#login" title="Direct link to heading">#</a></h4><p><img alt="Login Screen" src="https://developer.redis.com/assets/images/screenshot-login-2b5a07f61355ab0dfc9a8d3f1dcec528.png"/></p><ul><li><p>Find user</p></li><li><p>Make sure password is correct</p></li><li><p>Compare password and new password hash and create cookie if it&#39;s successful</p></li></ul><h4><a aria-hidden="true" tabindex="-1" id="item-list-page"></a>Item list page<a href="#item-list-page" title="Direct link to heading">#</a></h4><p><img alt="Newest Screen" src="https://developer.redis.com/assets/images/screenshot-newest-776786b42d1ae7703a3fde07205bb331.png"/></p><ul><li><p>Check if user has toggled hidden attribute on a specific item.</p></li><li><p>If that is not null</p></li><li><p>If it&#39;s empty array</p></li><li><p>Get all items from RedisJSON</p></li><li><p>Get items posted within last 1 week</p></li></ul><p>Note that 1615652598 is timestamp of 1 week ealier than current timestamp</p><h4><a aria-hidden="true" tabindex="-1" id="item-detail"></a>Item Detail<a href="#item-detail" title="Direct link to heading">#</a></h4><p><img alt="Item Detail Screen" src="https://developer.redis.com/assets/images/screenshot-item-detail-a9ebbf8ae72d8af6b48c45163f524ce8.png"/></p><ul><li><p>Get the item object first</p></li><li><p>Find item:1 &#39;s root comments</p></li><li><p>Get those comments</p></li><li><p>Using children of each comment, fetch children comments</p></li><li><p>Iterate this over until all comments are resolved</p></li></ul><h4><a aria-hidden="true" tabindex="-1" id="submit"></a>Submit<a href="#submit" title="Direct link to heading">#</a></h4><p><img alt="Submit Screen" src="https://developer.redis.com/assets/images/screenshot-submit-12e6b9a754af39610ac2d543d20eb095.png"/></p><ul><li><p>Get next item&#39;s id and increase it</p></li><li><p>Create hash and RedisJSON index</p></li></ul><h4><a aria-hidden="true" tabindex="-1" id="update-profile"></a>Update Profile<a href="#update-profile" title="Direct link to heading">#</a></h4><p><img alt="Update Profile Screen" src="https://developer.redis.com/assets/images/screenshot-update-profile-1e16d2b9d87668fac47f2bf8f621fba0.png"/></p><ul><li>Get the user</li></ul><ul><li>Update new user</li></ul><h4><a aria-hidden="true" tabindex="-1" id="moderation-logs-screen"></a>Moderation Logs screen<a href="#moderation-logs-screen" title="Direct link to heading">#</a></h4><p><img alt="Moderation Logs" src="https://developer.redis.com/assets/images/moderation-logs-0c7f3ba0bdde08ee517b934ba044a8d9.png"/></p><ul><li>Find all moderation logs</li></ul><ul><li>Get that moderation logs</li></ul><h4><a aria-hidden="true" tabindex="-1" id="search"></a>Search<a href="#search" title="Direct link to heading">#</a></h4><p><img alt="Search Screen" src="https://developer.redis.com/assets/images/screenshot-search-e782083909b3aa74751ef1e8976e20ce.png"/></p><ul><li>Get items that contains &#34;fa&#34;</li></ul><ul><li>Get those items via json</li></ul><h2><a aria-hidden="true" tabindex="-1" id="example-commands"></a>Example commands<a href="#example-commands" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" id="there-are-2-type-of-fields-indexed-and-non-indexed"></a>There are 2 type of fields, indexed and non-indexed.<a href="#there-are-2-type-of-fields-indexed-and-non-indexed" title="Direct link to heading">#</a></h4><ol><li>Indexed fields will be stored in hash using HSET/HGET.</li><li>Non-indexed fields will be stored in RedisJSON.</li></ol><ul><li>Create RediSearch Index</li></ul><p>When schema is created, it should created index.</p><ul><li>Drop RediSearch Index</li></ul><p>Should drop/update index if the schema has changed</p><ul><li>Get RediSearch Info</li></ul><p>Validate if the fields are indexed properly. If not, it will update the index fields or drop/recreate.</p><ul><li>Create a new user</li></ul><p>It will require new hash and new JSON record</p><ul><li><p>Update a user</p></li><li><p>Find user with username &#39;andy&#39;</p></li></ul><ol><li><p>Find  the user&#39;s hash first</p></li><li><p>Fetch the JSON object to get the related JSON object</p></li></ol><ul><li><p>Find user whose id is andy1 or andy2</p></li><li><p>Find user whose id is not andy1 or andy2</p></li><li><p>Find user whose id is andy1 or username is andy</p></li><li><p>Find user whose id is andy1 and username is andy</p></li><li><p>Find first 10 users order by username</p></li><li><p>Find next 10 users</p></li><li><p>Get from RedisJson from multiple keys</p></li></ul><h3><a aria-hidden="true" tabindex="-1" id="references"></a>References<a href="#references" title="Direct link to heading">#</a></h3><ul><li><a href="https://developer.redis.com/howtos/redisjson/using-python">RedisJSON and Python</a></li><li><a href="https://developer.redis.com/howtos/redisjson/storing-complex-json-document">How to store and retrieve nested JSON document</a></li><li><a href="https://developer.redis.com/howtos/redisjson/using-nodejs">Importing JSON data into Redis using NodeJS</a> </li><li>Learn more about <a href="https://oss.redis.com/redisjson/" target="_blank" rel="noopener noreferrer">RedisJSON</a> in the Quickstart tutorial.</li><li><a href="https://developer.redis.com/howtos/shoppingcart">How to build shopping cart app using NodeJS and RedisJSON</a></li><li><a href="https://redis.com/blog/index-and-query-json-docs-with-redis/" target="_blank" rel="noopener noreferrer">Indexing, Querying, and Full-Text Search of JSON Documents with Redis</a> </li></ul></div></div>
  </body>
</html>
