<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/pynecone-io/pynecone">Original</a>
    <h1>Show HN: Pynecone – Web Apps in Pure Python</h1>
    
    <div id="readability-page-1" class="page"><div dir="auto">
<p dir="auto">Here is the complete code to create this. This is all done in one Python file!</p>
<div dir="auto" data-snippet-clipboard-copy-content="import pynecone as pc
import openai

openai.api_key = &#34;YOUR_API_KEY&#34;

class State(pc.State):
    &#34;&#34;&#34;The app state.&#34;&#34;&#34;
    prompt = &#34;&#34;
    image_url = &#34;&#34;
    image_processing = False
    image_made = False

    def process_image(self):
        &#34;&#34;&#34;Set the image processing flag to true and indicate image is not made yet.&#34;&#34;&#34;
        self.image_processing = True
        self.image_made = False        

    def get_image(self):
        &#34;&#34;&#34;Get the image from the prompt.&#34;&#34;&#34;
        response = openai.Image.create(prompt=self.prompt, n=1, size=&#34;1024x1024&#34;)
        self.image_url = response[&#34;data&#34;][0][&#34;url&#34;]
        self.image_processing = False
        self.image_made = True

def index():
    return pc.center(
        pc.vstack(
            pc.heading(&#34;DALL-E&#34;, font_size=&#34;1.5em&#34;),
            pc.input(placeholder=&#34;Enter a prompt..&#34;, on_blur=State.set_prompt),
            pc.button(
                &#34;Generate Image&#34;,
                on_click=[State.process_image, State.get_image],
                width=&#34;100%&#34;,
            ),
            pc.divider(),
            pc.cond(
                State.image_processing,
                pc.circular_progress(is_indeterminate=True),
                pc.cond(
                     State.image_made,
                     pc.image(
                         src=State.image_url,
                         height=&#34;25em&#34;,
                         width=&#34;25em&#34;,
                    )
                )
            ),
            bg=&#34;white&#34;,
            padding=&#34;2em&#34;,
            shadow=&#34;lg&#34;,
            border_radius=&#34;lg&#34;,
        ),
        width=&#34;100%&#34;,
        height=&#34;100vh&#34;,
        bg=&#34;radial-gradient(circle at 22% 11%,rgba(62, 180, 137,.20),hsla(0,0%,100%,0) 19%)&#34;,
    )

# Add state and page to the app.
app = pc.App(state=State)
app.add_page(index, title=&#34;Pynecone:DALL-E&#34;)
app.compile()"><pre><span>import</span> <span>pynecone</span> <span>as</span> <span>pc</span>
<span>import</span> <span>openai</span>

<span>openai</span>.<span>api_key</span> <span>=</span> <span>&#34;YOUR_API_KEY&#34;</span>

<span>class</span> <span>State</span>(<span>pc</span>.<span>State</span>):
    <span>&#34;&#34;&#34;The app state.&#34;&#34;&#34;</span>
    <span>prompt</span> <span>=</span> <span>&#34;&#34;</span>
    <span>image_url</span> <span>=</span> <span>&#34;&#34;</span>
    <span>image_processing</span> <span>=</span> <span>False</span>
    <span>image_made</span> <span>=</span> <span>False</span>

    <span>def</span> <span>process_image</span>(<span>self</span>):
        <span>&#34;&#34;&#34;Set the image processing flag to true and indicate image is not made yet.&#34;&#34;&#34;</span>
        <span>self</span>.<span>image_processing</span> <span>=</span> <span>True</span>
        <span>self</span>.<span>image_made</span> <span>=</span> <span>False</span>        

    <span>def</span> <span>get_image</span>(<span>self</span>):
        <span>&#34;&#34;&#34;Get the image from the prompt.&#34;&#34;&#34;</span>
        <span>response</span> <span>=</span> <span>openai</span>.<span>Image</span>.<span>create</span>(<span>prompt</span><span>=</span><span>self</span>.<span>prompt</span>, <span>n</span><span>=</span><span>1</span>, <span>size</span><span>=</span><span>&#34;1024x1024&#34;</span>)
        <span>self</span>.<span>image_url</span> <span>=</span> <span>response</span>[<span>&#34;data&#34;</span>][<span>0</span>][<span>&#34;url&#34;</span>]
        <span>self</span>.<span>image_processing</span> <span>=</span> <span>False</span>
        <span>self</span>.<span>image_made</span> <span>=</span> <span>True</span>

<span>def</span> <span>index</span>():
    <span>return</span> <span>pc</span>.<span>center</span>(
        <span>pc</span>.<span>vstack</span>(
            <span>pc</span>.<span>heading</span>(<span>&#34;DALL-E&#34;</span>, <span>font_size</span><span>=</span><span>&#34;1.5em&#34;</span>),
            <span>pc</span>.<span>input</span>(<span>placeholder</span><span>=</span><span>&#34;Enter a prompt..&#34;</span>, <span>on_blur</span><span>=</span><span>State</span>.<span>set_prompt</span>),
            <span>pc</span>.<span>button</span>(
                <span>&#34;Generate Image&#34;</span>,
                <span>on_click</span><span>=</span>[<span>State</span>.<span>process_image</span>, <span>State</span>.<span>get_image</span>],
                <span>width</span><span>=</span><span>&#34;100%&#34;</span>,
            ),
            <span>pc</span>.<span>divider</span>(),
            <span>pc</span>.<span>cond</span>(
                <span>State</span>.<span>image_processing</span>,
                <span>pc</span>.<span>circular_progress</span>(<span>is_indeterminate</span><span>=</span><span>True</span>),
                <span>pc</span>.<span>cond</span>(
                     <span>State</span>.<span>image_made</span>,
                     <span>pc</span>.<span>image</span>(
                         <span>src</span><span>=</span><span>State</span>.<span>image_url</span>,
                         <span>height</span><span>=</span><span>&#34;25em&#34;</span>,
                         <span>width</span><span>=</span><span>&#34;25em&#34;</span>,
                    )
                )
            ),
            <span>bg</span><span>=</span><span>&#34;white&#34;</span>,
            <span>padding</span><span>=</span><span>&#34;2em&#34;</span>,
            <span>shadow</span><span>=</span><span>&#34;lg&#34;</span>,
            <span>border_radius</span><span>=</span><span>&#34;lg&#34;</span>,
        ),
        <span>width</span><span>=</span><span>&#34;100%&#34;</span>,
        <span>height</span><span>=</span><span>&#34;100vh&#34;</span>,
        <span>bg</span><span>=</span><span>&#34;radial-gradient(circle at 22% 11%,rgba(62, 180, 137,.20),hsla(0,0%,100%,0) 19%)&#34;</span>,
    )

<span># Add state and page to the app.</span>
<span>app</span> <span>=</span> <span>pc</span>.<span>App</span>(<span>state</span><span>=</span><span>State</span>)
<span>app</span>.<span>add_page</span>(<span>index</span>, <span>title</span><span>=</span><span>&#34;Pynecone:DALL-E&#34;</span>)
<span>app</span>.<span>compile</span>()</pre></div>
<p dir="auto">Let&#39;s break this down.</p>
<h3 dir="auto"><a id="user-content-ui-in-pynecone" aria-hidden="true" href="#ui-in-pynecone"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>UI In Pynecone</strong></h3>
<p dir="auto">Lets start by talking about the UI this Pynecone App.</p>
<div dir="auto" data-snippet-clipboard-copy-content="def index():
    return pc.center(
        ...
    )"><pre><span>def</span> <span>index</span>():
    <span>return</span> <span>pc</span>.<span>center</span>(
        ...
    )</pre></div>
<p dir="auto">This index function defines the frontend of the app. We use different components such as <code>center</code>, <code>vstack</code>, <code>input</code>, and <code>button</code> to build the front end. Components can be nested to create complex layouts and styled using CSS&#39;s full power. Just pass them in as keyword args.</p>
<p dir="auto">Pynecone comes with <a href="https://pynecone.io/docs/library" rel="nofollow">50+ built-in components</a> to help you get started. We are actively adding more components, plus it&#39;s easy to create your own components.</p>
<h3 dir="auto"><a id="user-content-state" aria-hidden="true" href="#state"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>State</strong></h3>
<div dir="auto" data-snippet-clipboard-copy-content="class State(pc.State):
    &#34;&#34;&#34;The app state.&#34;&#34;&#34;
    prompt = &#34;&#34;
    image_url = &#34;&#34;
    image_processing = False
    image_made = False"><pre><span>class</span> <span>State</span>(<span>pc</span>.<span>State</span>):
    <span>&#34;&#34;&#34;The app state.&#34;&#34;&#34;</span>
    <span>prompt</span> <span>=</span> <span>&#34;&#34;</span>
    <span>image_url</span> <span>=</span> <span>&#34;&#34;</span>
    <span>image_processing</span> <span>=</span> <span>False</span>
    <span>image_made</span> <span>=</span> <span>False</span></pre></div>
<p dir="auto">The state defines all the variables (called vars) in an app that can change and the functions that change them.
Here the state is comprised of a <code>prompt</code> and <code>image_url</code>. There are also the booleans <code>image_processing</code> and <code>image_made</code> to indicate when to show the circular progress and image.</p>
<h3 dir="auto"><a id="user-content-event-handlers" aria-hidden="true" href="#event-handlers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>Event Handlers</strong></h3>
<div dir="auto" data-snippet-clipboard-copy-content="    def process_image(self):
        &#34;&#34;&#34;Set the image processing flag to true and indicate image is not made yet.&#34;&#34;&#34;
        self.image_processing = True
        self.image_made = False        

    def get_image(self):
        &#34;&#34;&#34;Get the image from the prompt.&#34;&#34;&#34;
        response = openai.Image.create(prompt=self.prompt, n=1, size=&#34;1024x1024&#34;)
        self.image_url = response[&#34;data&#34;][0][&#34;url&#34;]
        self.image_processing = False
        self.image_made = True"><pre>    <span>def</span> <span>process_image</span>(<span>self</span>):
        <span>&#34;&#34;&#34;Set the image processing flag to true and indicate image is not made yet.&#34;&#34;&#34;</span>
        <span>self</span>.<span>image_processing</span> <span>=</span> <span>True</span>
        <span>self</span>.<span>image_made</span> <span>=</span> <span>False</span>        

    <span>def</span> <span>get_image</span>(<span>self</span>):
        <span>&#34;&#34;&#34;Get the image from the prompt.&#34;&#34;&#34;</span>
        <span>response</span> <span>=</span> <span>openai</span>.<span>Image</span>.<span>create</span>(<span>prompt</span><span>=</span><span>self</span>.<span>prompt</span>, <span>n</span><span>=</span><span>1</span>, <span>size</span><span>=</span><span>&#34;1024x1024&#34;</span>)
        <span>self</span>.<span>image_url</span> <span>=</span> <span>response</span>[<span>&#34;data&#34;</span>][<span>0</span>][<span>&#34;url&#34;</span>]
        <span>self</span>.<span>image_processing</span> <span>=</span> <span>False</span>
        <span>self</span>.<span>image_made</span> <span>=</span> <span>True</span></pre></div>
<p dir="auto">Within the state, we define functions called event handlers that change the state vars. Event handlers are the way that we can modify the state in Pynecone. They can be called in response to user actions, such as clicking a button or typing in a text box. These actions are called events.</p>
<p dir="auto">Our dalle app has two event handlers, <code>process_image</code> to indicate that the image is being generated and <code>get_image</code>, which calls the OpenAI API.</p>
<h3 dir="auto"><a id="user-content-routing" aria-hidden="true" href="#routing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>Routing</strong></h3>
<p dir="auto">Finally we define our app and tell it what state to use.</p>
<div dir="auto" data-snippet-clipboard-copy-content="app = pc.App(state=State)"><pre><span>app</span> <span>=</span> <span>pc</span>.<span>App</span>(<span>state</span><span>=</span><span>State</span>)</pre></div>
<p dir="auto">We add a route from the root of the app to the index component. We also add a title that will show up in the page preview/ browser tab.</p>
<div dir="auto" data-snippet-clipboard-copy-content="app.add_page(index, title=&#34;Pynecone:DALL-E&#34;)
app.compile()"><pre><span>app</span>.<span>add_page</span>(<span>index</span>, <span>title</span><span>=</span><span>&#34;Pynecone:DALL-E&#34;</span>)
<span>app</span>.<span>compile</span>()</pre></div>
<p dir="auto">You can create a multi-page app by adding more routes.</p>
<h2 dir="auto"><a id="user-content-status" aria-hidden="true" href="#status"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Status</h2>
<p dir="auto">As of December 2022, Pynecone has just been released publicly and is in the <strong>Alpha Stage</strong>.</p>
<ul dir="auto">
<li><g-emoji alias="large_orange_diamond" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f536.png">🔶</g-emoji> <strong>Public Alpha</strong>: Anyone can install and use Pynecone. There may be issues, but we are working to resolve them activly.</li>
<li><strong>Public Beta</strong>: Stable enough for non-enterprise use-cases.</li>
<li><strong>Public Hosting Beta</strong>: <strong>Optionally</strong> Deploy and Host your own apps on Pynecone!</li>
<li><strong>Public</strong>: Pynecone is production ready.</li>
</ul>
<p dir="auto">Pynecone has new releases and features coming every week! Make sure to: <g-emoji alias="star" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png">⭐</g-emoji> star and <g-emoji alias="eyes" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png">👀</g-emoji> watch this repository to stay up to date.</p>
<h2 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h2>
<p dir="auto">We welcome contributions of any size! Below are some good ways to get started in the Pynecone community.</p>
<ul dir="auto">
<li><strong>GitHub Discussions</strong>: A great way to talk about features you want added or things that are confusing/need clarification.</li>
<li><strong>GitHub Issues</strong>: These are an excellent way to report bugs. Additionally, you can try and solve an existing issue and submit a PR.</li>
</ul>
<p dir="auto">Want to our Pynecone team or learn more about our framework? Send us an email <a href="mailto:founders@pynecone.io">here</a>, and we can schedule a call to discuss Pynecone and how you can start contributing.</p>
<p dir="auto">We are actively looking for contributors, no matter your skill level or experience.</p>
<h2 dir="auto"><a id="user-content-more-information" aria-hidden="true" href="#more-information"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More Information</h2>
<p dir="auto">More information about Pynecone can be found on our website:</p>
<ul dir="auto">
<li><a href="https://pynecone.io" rel="nofollow">Pynecone.io</a></li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Pynecone is open-source and licensed under the <a href="https://github.com/pynecone-io/pynecone/blob/main/LICENSE">Apache License 2.0</a>.</p>
<h2 dir="auto"><a id="user-content-contributors" aria-hidden="true" href="#contributors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributors</h2>
<p dir="auto"><a href="https://github.com/picklelo"><img src="https://avatars.githubusercontent.com/u/6270214?v=4" width="50" height="50" alt=""/></a>
<a href="https://github.com/Alek99"><img src="https://avatars.githubusercontent.com/u/38776361?s=400&amp;u=bd6c163fe787c2de1a26c881598e54b67e2482dd&amp;v=4" width="50" height="50" alt=""/></a>
<a href="https://github.com/kbrgl"><img src="https://avatars.githubusercontent.com/u/13417496?v=4" width="50" height="50" alt=""/></a></p>
</div></div>
  </body>
</html>
