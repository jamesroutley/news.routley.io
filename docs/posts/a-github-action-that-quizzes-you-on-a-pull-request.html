<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dkamm/pr-quiz">Original</a>
    <h1>Show HN: A GitHub Action that quizzes you on a pull request</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/super-linter/super-linter"><img src="https://github.com/dkamm/pr-quiz/actions/workflows/linter.yml/badge.svg" alt="GitHub Super-Linter"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dkamm/pr-quiz/actions/workflows/ci.yml/badge.svg"><img src="https://github.com/dkamm/pr-quiz/actions/workflows/ci.yml/badge.svg" alt="CI"/></a>
<a href="https://github.com/dkamm/pr-quiz/actions/workflows/check-dist.yml"><img src="https://github.com/dkamm/pr-quiz/actions/workflows/check-dist.yml/badge.svg" alt="Check dist/"/></a>
<a href="https://github.com/dkamm/pr-quiz/actions/workflows/codeql-analysis.yml"><img src="https://github.com/dkamm/pr-quiz/actions/workflows/codeql-analysis.yml/badge.svg" alt="CodeQL"/></a></p>

<p dir="auto">AI Agents are starting to write more code. How do we make sure we understand
what they&#39;re writing?</p>
<p dir="auto">PR Quiz is a GitHub Action that uses AI to generate a quiz based on a pull
request. It can help you, the human reviewer, test your understanding of your AI
Agent&#39;s code. (And block you from deploying code you don&#39;t understand!)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dkamm/pr-quiz/blob/main/assets/demo.gif"><img src="https://github.com/dkamm/pr-quiz/raw/main/assets/demo.gif" alt="Demo" width="100%" data-animated-image=""/></a></p>

<ol dir="auto">
<li>Make sure you have an OpenAI API Key and an ngrok auth token (free tier
works).*</li>
<li>Add the OpenAI API Key and ngrok auth token as action secrets to your
repository (<code>settings -&gt; secrets -&gt; actions</code> in the UI)</li>
<li>Add the following <code>quiz.yml</code> to your <code>.github/workflows</code> directory</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="# quiz.yml

name: PR Quiz

on:
  pull_request_review:
    types: [submitted]

permissions:
  contents: read
  pull-requests: read

jobs:
  quiz:
    name: PR Quiz
    runs-on: ubuntu-latest
    environment: your-environment # TODO: change this to your actual environment
    # Only trigger on approvals to save tokens
    if: github.event.review.state == &#39;approved&#39;

    steps:
      - name: Checkout
        id: checkout
        uses: actions/checkout@v4

      - name: Serve Quiz
        id: serve-quiz
        uses: dkamm/pr-quiz@v0.1.0
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          openai-api-key: ${{ secrets.OPENAI_API_KEY }}
          ngrok-authtoken: ${{ secrets.NGROK_AUTHTOKEN }}"><pre><span><span>#</span> quiz.yml</span>

<span>name</span>: <span>PR Quiz</span>

<span>on</span>:
  <span>pull_request_review</span>:
    <span>types</span>: <span>[submitted]</span>

<span>permissions</span>:
  <span>contents</span>: <span>read</span>
  <span>pull-requests</span>: <span>read</span>

<span>jobs</span>:
  <span>quiz</span>:
    <span>name</span>: <span>PR Quiz</span>
    <span>runs-on</span>: <span>ubuntu-latest</span>
    <span>environment</span>: <span>your-environment </span><span><span>#</span> TODO: change this to your actual environment</span>
    <span><span>#</span> Only trigger on approvals to save tokens</span>
    <span>if</span>: <span>github.event.review.state == &#39;approved&#39;</span>

    <span>steps</span>:
      - <span>name</span>: <span>Checkout</span>
        <span>id</span>: <span>checkout</span>
        <span>uses</span>: <span>actions/checkout@v4</span>

      - <span>name</span>: <span>Serve Quiz</span>
        <span>id</span>: <span>serve-quiz</span>
        <span>uses</span>: <span>dkamm/pr-quiz@v0.1.0</span>
        <span>with</span>:
          <span>github-token</span>: <span>${{ secrets.GITHUB_TOKEN }}</span>
          <span>openai-api-key</span>: <span>${{ secrets.OPENAI_API_KEY }}</span>
          <span>ngrok-authtoken</span>: <span>${{ secrets.NGROK_AUTHTOKEN }}</span></pre></div>
<p dir="auto">*The PR Quiz action creates a temporary webserver inside the GitHub Actions
runner and uses ngrok to create a public tunnel to it</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default Value</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td>github-token</td>
<td>GitHub token for API access</td>
<td>-</td>
<td>Yes</td>
</tr>
<tr>
<td>ngrok-authtoken</td>
<td>The ngrok authtoken to use for the server hosting the quiz.</td>
<td>-</td>
<td>Yes</td>
</tr>
<tr>
<td>openai-api-key</td>
<td>OpenAI API key for API access</td>
<td>-</td>
<td>Yes</td>
</tr>
<tr>
<td>model</td>
<td>The model to use for generating the quiz. It must be a model that supports structured outputs.</td>
<td><code>o4-mini</code></td>
<td>No</td>
</tr>
<tr>
<td>lines-changed-threshold</td>
<td>The minimum number of lines changed required to create a quiz. This is to prevent quizzes from being created for small pull requests.</td>
<td><code>100</code></td>
<td>No</td>
</tr>
<tr>
<td>time-limit-minutes</td>
<td>The time limit to complete the quiz in minutes. This prevents the action from running indefinitely.</td>
<td><code>10</code></td>
<td>No</td>
</tr>
<tr>
<td>max-attempts</td>
<td>The maximum number of attempts to pass the quiz. A value of 0 means unlimited attempts.</td>
<td><code>3</code></td>
<td>No</td>
</tr>
<tr>
<td>exclude-file-patterns</td>
<td>A list of file patterns to exclude from the quiz as a JSON-ified string.</td>
<td><code>&#39;[&#34;**/*-lock.json&#34;, &#34;**/*-lock.yaml&#34;, &#34;**/*.lock&#34;, &#34;**/*.map&#34;, &#34;**/*.pb.*&#34;, &#34;**/*_pb2.py&#34;, &#34;**/*.generated.*&#34;, &#34;**/*.auto.*&#34;]&#39;</code></td>
<td>No</td>
</tr>
<tr>
<td>system-prompt</td>
<td>Optional override for the system prompt. Be sure the specify that multiple choice questions must be returned.</td>
<td>See <a href="https://github.com/dkamm/pr-quiz/blob/main/src/quiz/DefaultSystemPrompt.js">here</a> for the default system prompt</td>
<td>No</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Because this action runs a temporary webserver inside the GitHub Actions runner,
your code isn&#39;t sent to any third party other than the model provider (OpenAI).
This action can be easily modified to work with self-hosted models as well.</p>
</article></div></div>
  </body>
</html>
