<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.scattered-thoughts.net/writing/the-program-is-the-database-is-the-interface/">Original</a>
    <h1>The program is the database is the interface</h1>
    
    <div id="readability-page-1" class="page"><article>
  
<p>I do my accounts each year with a simple script. Something like this:</p>
<pre data-lang="clj"><code data-lang="clj"><span>(ns </span><span>accounts
</span><span>  (</span><span>:require 
</span><span>    [clojure.string </span><span>:as </span><span>str]
</span><span>    [clojure.pprint </span><span>:as </span><span>pp]))
</span><span>
</span><span>;; converted from statement.csv
</span><span>(def </span><span>txs
</span><span>  [{</span><span>:date #inst &#34;2022-05-13T11:01:56.532-00:00&#34;
</span><span>    </span><span>:amount -3.30
</span><span>    </span><span>:text </span><span>&#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;</span><span>}
</span><span>   {</span><span>:date #inst &#34;2022-05-12T10:41:56.843-00:00&#34;
</span><span>    </span><span>:amount -3.30
</span><span>    </span><span>:text </span><span>&#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;</span><span>}
</span><span>   {</span><span>:date #inst &#34;2022-05-12T00:01:03.264-00:00&#34;
</span><span>    </span><span>:amount -72.79
</span><span>    </span><span>:text </span><span>&#34;Card transaction of 72.79 CAD issued by Amazon.ca AMAZON.CA&#34;</span><span>}
</span><span>   {</span><span>:date #inst &#34;2022-05-10T10:33:04.011-00:00&#34;
</span><span>    </span><span>:amount -20.00
</span><span>    </span><span>:text </span><span>&#34;e-Transfer to: John Smith&#34;</span><span>}
</span><span>   {</span><span>:date #inst &#34;2022-05-11T17:12:43.098-00:00&#34;
</span><span>    </span><span>:amount -90.00
</span><span>    </span><span>:text </span><span>&#34;Card transaction of 90.00 CAD issued by Range Physiotherapy VANCOUVER&#34;</span><span>}])
</span><span>
</span><span>(def </span><span>date-&gt;tag
</span><span>  {</span><span>#inst &#34;2022-05-12T00:01:03.264-00:00&#34; :things</span><span>})
</span><span>
</span><span>(def </span><span>text-&gt;tag 
</span><span>  {</span><span>&#34;Coffee&#34; </span><span>:eating-out
</span><span>   </span><span>&#34;Range Physio&#34; </span><span>:medical</span><span>})
</span><span>
</span><span>(defn </span><span>tx-&gt;tag </span><span>[tx]
</span><span>  (or
</span><span>    (date-&gt;tag (</span><span>:date </span><span>tx))
</span><span>    (first 
</span><span>      (for [[text tag] text-&gt;tag
</span><span>            </span><span>:when </span><span>(str/includes? (</span><span>:text </span><span>tx) text)]
</span><span>        tag))))
</span><span>
</span><span>(def </span><span>txs-with-tags
</span><span>  (vec 
</span><span>    (for [tx txs]
</span><span>      (assoc tx </span><span>:tag </span><span>(tx-&gt;tag tx)))))
</span><span>
</span><span>(def </span><span>total-per-tag
</span><span>  (reduce 
</span><span>    (fn [totals tx]
</span><span>      (update-in totals [(</span><span>:tag </span><span>tx)] #(+ (</span><span>:amount </span><span>tx) (or % </span><span>0</span><span>))))
</span><span>    {}
</span><span>    txs-with-tags))
</span><span>
</span><span>(def </span><span>untagged 
</span><span>  (vec
</span><span>    (for [tx txs-with-tags
</span><span>         </span><span>:when </span><span>(nil? (</span><span>:tag </span><span>tx))]
</span><span>      tx)))
</span><span>
</span><span>(pp/pprint 
</span><span>  [[</span><span>:untagged </span><span>untagged]
</span><span>   [</span><span>:total-per-tag </span><span>total-per-tag]])
</span></code></pre>
<p>There are many things about this which are nice. </p>
<ul>
<li>It&#39;s just a single file - easy to backup and version control. </li>
<li>It&#39;s composable - I can easily write code to answer unexpected questions (eg how much did I spend on currency conversions this year) or use the computed data in other calculations (eg runway projections). </li>
<li>It&#39;s easy - I just pretty-printed the data-structures I was already using instead of having to build a UI.</li>
</ul>
<p>But the workflow isn&#39;t always great. When I run the code above, I see:</p>
<pre data-lang="clj"><code data-lang="clj"><span>&gt; clj accounts.clj
</span><span>[[</span><span>:untagged
</span><span>  [{</span><span>:date #inst &#34;2022-05-10T10:33:04.011-00:00&#34;</span><span>,
</span><span>    </span><span>:amount -20.0</span><span>,
</span><span>    </span><span>:text </span><span>&#34;e-Transfer to: John Smith&#34;</span><span>,
</span><span>    </span><span>:tag nil</span><span>}]]
</span><span> [</span><span>:total-per-tag
</span><span>  {</span><span>:eating-out -3.3</span><span>, </span><span>:things -72.79</span><span>, </span><span>:medical -90.0</span><span>, </span><span>nil -20.0</span><span>}]]
</span></code></pre>
<p>That transfer to John Smith isn&#39;t covered by any of the tagging rules. So I select the date, switch to the editor window and paste the date into the date-&gt;tag definition:</p>
<pre data-lang="clj"><code data-lang="clj"><span>(def </span><span>date-&gt;tag
</span><span>  {</span><span>#inst &#34;2022-05-12T00:01:03.264-00:00&#34; :things
</span><span>   </span><span>#inst &#34;2022-05-10T10:33:04.011-00:00&#34; :eating-out</span><span>})
</span></code></pre>
<p>Now I see: </p>
<pre data-lang="clj"><code data-lang="clj"><span>&gt; clj accounts.clj
</span><span>[[</span><span>:untagged </span><span>[]]
</span><span> [</span><span>:total-per-tag
</span><span>  {</span><span>:eating-out -23.3</span><span>, </span><span>:things -72.79</span><span>, </span><span>:medical -90.0</span><span>}]]
</span></code></pre>
<p>Multiply this by a thousand transactions and it becomes tedious. </p>
<p>Pretty-printing also makes it difficult to decide the amount of detail I should print. Sometimes I want to see which transactions contribute to each tag total. But if I always print them all then it&#39;s hard to see the totals themselves without a lot of scrolling.</p>
<p>It&#39;s also hard to share this workflow with someone non-technical. I have to setup and maintain the correct environment on their machine, teach them how to use a text editor to change the tagging rules, how to interpret syntax errors, how to use git to share changes etc.</p>
<hr/>
<p>I could solve these kinds of problems by writing a web app and storing <code>txs</code>, <code>date-&gt;tag</code> and <code>text-&gt;tag</code> in a database. </p>
<p>Then I could put controls on the transaction itself that allow changing the tag in place. And I could add an expandable section next to each total, so that it&#39;s easy to see the transactions for that tag when I want to but they don&#39;t take up space by default.</p>
<p>Plus sharing becomes trivial - everyone has a web browser.</p>
<p>But this is a big leap in effort:</p>
<ul>
<li>A database introduces a different data model - I have to translate between database data-types and my programming languages native data-types.</li>
<li>A database introduces a different language, or at least a new api that differs from the way I access native data-structures.</li>
<li>Rather than using a familiar text editor to read and change data, I can only access it via some query language or api.</li>
<li>I have to shuffle data back and forth between database and program at the correct times.</li>
<li>It isn&#39;t easy to version control the contents of the database.</li>
<li>Before I can add interactive elements, I have to map my existing data-structures to gui elements (eg to html and css) instead of just printing them.</li>
<li>I have to add an extra layer of state management to manage the state of the gui itself.</li>
<li>All of this work has to be repeated whenever I have a new question I want to answer.</li>
</ul>
<p>None of this is insurmountable, but it&#39;s definitely much more work than the original script.</p>
<p>So a simple script is low-effort but produces a low-quality experience. And a custom app can produce a high-quality experience but is high-effort.</p>
<hr/>
<p>So I made a thing.</p>
<p>It is very hacky and easy to break. But it will hang together just long enough to convey the idea.</p>
<p>It&#39;s kind of like a notebook. There are cells where you can write code and the resulting values will be nicely rendered:</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>;; converted from statement.csv
</span><span>(def txs
</span><span>  [{:date #inst &#34;2022-05-13T11:01:56.532-00:00&#34;
</span><span>    :amount -3.30
</span><span>    :text &#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;}
</span><span>   {:date #inst &#34;2022-05-12T10:41:56.843-00:00&#34;
</span><span>    :amount -3.30
</span><span>    :text &#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;}
</span><span>   {:date #inst &#34;2022-05-12T00:01:03.264-00:00&#34;
</span><span>    :amount -72.79
</span><span>    :text &#34;Card transaction of 72.79 CAD issued by Amazon.ca AMAZON.CA&#34;}
</span><span>   {:date #inst &#34;2022-05-10T10:33:04.011-00:00&#34;
</span><span>    :amount -20.00
</span><span>    :text &#34;e-Transfer to: John Smith&#34;}
</span><span>   {:date #inst &#34;2022-05-11T17:12:43.098-00:00&#34;
</span><span>    :amount -90.00
</span><span>    :text &#34;Card transaction of 90.00 CAD issued by Range Physiotherapy VANCOUVER&#34;}])
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defs date-&gt;tag
</span><span>  {#inst &#34;2022-05-12T00:01:03.264-00:00&#34; :things})
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defs keyword-&gt;tag
</span><span>  {&#34;Coffee&#34; :eating-out
</span><span>   &#34;Range Physio&#34; :medical})
</span></code></pre>
<p>Funtions render a little differently. </p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defn text-&gt;tag [text]
</span><span>  (first
</span><span>    (for [[keyword tag] keyword-&gt;tag
</span><span>          :when (clojure.string/includes? text keyword)]
</span><span>      tag)))
</span></code></pre>
<p>If you type <code>&#34;Joe&#39;s Coffee Hut&#34;</code> (including the <code>&#34;</code>!) into the textbox above and hit the <code>text-&gt;tag</code> button, you&#39;ll see the result of running the <code>text-&gt;tag</code> function on that input.</p>
<p>Functions aren&#39;t limited to just returning values though. They can modify the values stored in other cells:</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def txs-with-tags
</span><span>  (vec 
</span><span>    (for [tx txs]
</span><span>      (assoc tx 
</span><span>        :tag (or
</span><span>               (date-&gt;tag (:date tx))
</span><span>               (text-&gt;tag (:text tx)))
</span><span>        :actions [(fn ignore []
</span><span>                    (edit! &#39;date-&gt;tag assoc (:date tx) :ignore))
</span><span>                  (fn tag [tag] 
</span><span>                    (edit! &#39;date-&gt;tag assoc (:date tx) tag))]))))
</span></code></pre>
<p>If you type <code>:eating-out</code> into the one of the textboxes above and then hit the <code>tag</code> button, it will change the <code>date-&gt;tag</code> cell to contain an entry for the date of that transaction with the tag <code>:eating-out</code>. </p>
<p>And then any downstream cells will update, so you&#39;ll see the tag for that transaction change to <code>:eating-out</code>.</p>
<p>These actions are just values so they can be passed around like any other value. For example, if I make a list of untagged transactions then I&#39;ll still have access to the same actions:</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def untagged
</span><span>  (vec
</span><span>    (for [tx txs-with-tags
</span><span>         :when (nil? (:tag tx))]
</span><span>      tx)))
</span></code></pre>
<p>We can also attach metadata to values to control how they render:</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def hidden-vec
</span><span>  (with-meta
</span><span>    [1 2 3]
</span><span>    {:preimp/hidden true}))
</span></code></pre>
<p>If you click on the <code>+</code> above it will reveal the contents of the vec. This is useful for controlling the default level of detail.</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defn hidden [v]
</span><span>  (with-meta v {:preimp/hidden true}))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def total-per-tag
</span><span>  (reduce 
</span><span>    (fn [totals tx]
</span><span>      (if (= :ignore (:tag tx))
</span><span>        totals
</span><span>        (update-in totals [(:tag tx)] 
</span><span>          (fn [total+txs]
</span><span>            (let [[total txs] (or total+txs [0 (hidden [])])]
</span><span>              [(+ total (:amount tx))
</span><span>               (conj txs (update-in tx [:actions] hidden))])))))
</span><span>    {}
</span><span>    txs-with-tags))
</span></code></pre>
<p>You can click on a <code>+</code> above to reveal the transactions for that tag.</p>
<hr/>
<p>The demo on this page is ephemeral - you could do something similar in many notebook environments using mutable data-structures.</p>
<p>But the <a href="https://github.com/jamii/preimp">preimp repo</a> contains a server which persists the entire history of the notebook to disk, and also syncs changes between different clients to allow (coarse-grained) collaborative editing.</p>
<video controls="">
  <source src="/writing/the-program-is-the-database-is-the-interface/demo.mp4" type="video/mp4"/>
</video>
<p>The server also allows reading and writing cell values over http. Here&#39;s the script that I use to upload my bank statements:</p>
<pre data-lang="clj"><code data-lang="clj"><span>(ns </span><span>wise
</span><span>  (</span><span>:require </span><span>[clj-http.client </span><span>:as </span><span>client]
</span><span>            [clojure.data.json </span><span>:as </span><span>json]))
</span><span>
</span><span>(def </span><span>endpoints </span><span>{
</span><span>  </span><span>;; FILL ME IN
</span><span>})
</span><span>
</span><span>(defn </span><span>api-get </span><span>[user path]
</span><span>  (let [domain (get-in endpoints [user </span><span>:wise-domain</span><span>])
</span><span>        url (str domain </span><span>&#34;/&#34; </span><span>path)
</span><span>        response (client/get url {</span><span>:headers </span><span>{</span><span>&#34;Authorization&#34; </span><span>(str </span><span>&#34;Bearer &#34; </span><span>(get-in endpoints [user </span><span>:wise-token</span><span>]))}})]
</span><span>    (assert (= </span><span>200 </span><span>(</span><span>:status </span><span>response)))
</span><span>    (json/read-str (</span><span>:body </span><span>response))))
</span><span>
</span><span>(def </span><span>now </span><span>(java.time.Instant/now))
</span><span>
</span><span>(defn </span><span>get-transactions </span><span>[user]
</span><span>  (into []
</span><span>        (for [profile (api-get user </span><span>&#34;v2/profiles&#34;</span><span>)
</span><span>              </span><span>:let </span><span>[profile-id (get profile </span><span>&#34;id&#34;</span><span>)]
</span><span>              balance (api-get user (str </span><span>&#34;v4/profiles/&#34; </span><span>profile-id </span><span>&#34;/balances?types=STANDARD&#34;</span><span>))
</span><span>              </span><span>:let </span><span>[balance-id (get balance </span><span>&#34;id&#34;</span><span>)
</span><span>                    statement (api-get user (str </span><span>&#34;/v1/profiles/&#34; </span><span>profile-id </span><span>&#34;/balance-statements/&#34; </span><span>balance-id </span><span>&#34;/statement.json?intervalStart=2022-01-01T00:00:00.000Z&amp;intervalEnd=&#34; </span><span>now </span><span>&#34;&amp;type=COMPACT&#34;</span><span>))]
</span><span>              transaction (get statement </span><span>&#34;transactions&#34;</span><span>)]
</span><span>          transaction)))
</span><span>          
</span><span>(defn </span><span>update-preimp </span><span>[user]
</span><span>  (let [transactions (get-transactions user)
</span><span>        cell-name (symbol (str (name user) </span><span>&#34;-wise-transactions&#34;</span><span>))
</span><span>        cell-value (pr-str </span><span>`</span><span>(</span><span>~&#39;</span><span>defs </span><span>~</span><span>cell-name </span><span>~</span><span>transactions))
</span><span>        body (json/write-str
</span><span>              {</span><span>:cell-id </span><span>(get-in endpoints [user </span><span>:cell-id</span><span>])
</span><span>               </span><span>:value </span><span>cell-value})]
</span><span>    (client/put
</span><span>     (get-in endpoints [user </span><span>:preimp-domain</span><span>])
</span><span>     (merge (get-in endpoints [user </span><span>:preimp-headers</span><span>]) {</span><span>:body </span><span>body}))))
</span><span>
</span><span>(defn </span><span>update-preimp-dev </span><span>[_]
</span><span>  (update-preimp </span><span>:sandbox</span><span>))
</span><span>
</span><span>(defn </span><span>update-preimp-prod </span><span>[_]
</span><span>  (update-preimp </span><span>:jamie</span><span>)
</span><span>  (update-preimp </span><span>:cynthia</span><span>))
</span></code></pre>
<p>Finally, you can export a preimp notebook to produce a perfectly valid clojurescript program.</p>

<p>You can run this program in the repl:</p>
<pre data-lang="clj"><code data-lang="clj"><span>&gt; clj -M -m cljs.main -i ./exported.cljs --repl --repl-env node 
</span><span>
</span><span>preimp.exported=&gt; (require </span><span>&#39;</span><span>clojure.pprint)
</span><span>nil
</span><span>
</span><span>preimp.exported=&gt; (clojure.pprint/pprint txs-with-tags)
</span><span>[{</span><span>:date #inst &#34;2022-05-13T11:01:56.532-00:00&#34;</span><span>,
</span><span>  </span><span>:amount -3.3</span><span>,
</span><span>  </span><span>:text
</span><span>  </span><span>&#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;</span><span>,
</span><span>  </span><span>:tag :coffee</span><span>,
</span><span>  </span><span>:actions
</span><span>  [</span><span>#object</span><span>[preimp$exported$iter__897_$_ignore]
</span><span>   </span><span>#object</span><span>[preimp$exported$iter__897_$_tag]]}
</span><span> {</span><span>:date #inst &#34;2022-05-12T10:41:56.843-00:00&#34;</span><span>,
</span><span>  </span><span>:amount -3.3</span><span>,
</span><span>  </span><span>:text
</span><span>  </span><span>&#34;Card transaction of 3.30 CAD issued by Milano Coffee Roasters VANCOUVER&#34;</span><span>,
</span><span>  </span><span>:tag :coffee</span><span>,
</span><span>  </span><span>:actions
</span><span>  [</span><span>#object</span><span>[preimp$exported$iter__897_$_ignore]
</span><span>   </span><span>#object</span><span>[preimp$exported$iter__897_$_tag]]}
</span><span> {</span><span>:date #inst &#34;2022-05-12T00:01:03.264-00:00&#34;</span><span>,
</span><span>  </span><span>:amount -72.79</span><span>,
</span><span>  </span><span>:text </span><span>&#34;Card transaction of 72.79 CAD issued by Amazon.ca AMAZON.CA&#34;</span><span>,
</span><span>  </span><span>:tag :things</span><span>,
</span><span>  </span><span>:actions
</span><span>  [</span><span>#object</span><span>[preimp$exported$iter__897_$_ignore]
</span><span>   </span><span>#object</span><span>[preimp$exported$iter__897_$_tag]]}
</span><span> {</span><span>:date #inst &#34;2022-05-10T10:33:04.011-00:00&#34;</span><span>,
</span><span>  </span><span>:amount -20</span><span>,
</span><span>  </span><span>:text </span><span>&#34;e-Transfer to: John Smith&#34;</span><span>,
</span><span>  </span><span>:tag :eating-out</span><span>,
</span><span>  </span><span>:actions
</span><span>  [</span><span>#object</span><span>[preimp$exported$iter__897_$_ignore]
</span><span>   </span><span>#object</span><span>[preimp$exported$iter__897_$_tag]]}
</span><span> {</span><span>:date #inst &#34;2022-05-11T17:12:43.098-00:00&#34;</span><span>,
</span><span>  </span><span>:amount -90</span><span>,
</span><span>  </span><span>:text
</span><span>  </span><span>&#34;Card transaction of 90.00 CAD issued by Range Physiotherapy VANCOUVER&#34;</span><span>,
</span><span>  </span><span>:tag :medical</span><span>,
</span><span>  </span><span>:actions
</span><span>  [</span><span>#object</span><span>[preimp$exported$iter__897_$_ignore]
</span><span>   </span><span>#object</span><span>[preimp$exported$iter__897_$_tag]]}]
</span><span>
</span><span>nil
</span></code></pre>
<hr/>
<p>This tiny extension to the notebook model allows writing simple ugly crud apps with very little effort. You simply provide the logic and preimp gives you storage, sharing and UI for free. But the result is not an opaque image, nor is it tied to the preimp environment - you can export everything into a regular script and run it in the repl.</p>
<p>TODO rest of this section</p>
<p>required:
rich data model, which can be roundtripped through text
some way of attaching metadata to values, to control their rendering without interfering with execution in the repl</p>
<p>needed:
no declaration order
no mutable environment
no side-effects (other than edit!)
integrity constraints
perf (compiler latency) (thoughput only needs to be better than spreadsheet)</p>
<p>extensions:
much more ui options
selection (+ actions on the side)
dropdowns
understand types / destructuring
render values as copyable text (cf ?)
undo/vc (have whole history in db)
live repl, sandboxing
distribution - single binary, single-file db, optional server (like fossil)</p>
<p>research:
finer-grained collaboration (what data model?)
bidirectional editing / provenance</p>
<hr/>
<p>We have to do the other demo too. You know the one.</p>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defs next-id 2)
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defs todos 
</span><span>  {0 {:text &#34;make a cool demo&#34; :status :done}
</span><span>   1 {:text &#34;step 2: ???&#34; :status :todo}})
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defn new-todo [text] 
</span><span>  (edit! &#39;todos assoc next-id {:text text :status :todo})
</span><span>  (edit! &#39;next-id inc))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defn named [name fn]
</span><span>  (with-meta fn {:preimp/named name}))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defn status-toggle [id]
</span><span>  (let [status (get-in todos [id :status])
</span><span>        other-status (case status
</span><span>                       :done :todo
</span><span>                       :todo :done)]
</span><span>    (named (name status)
</span><span>      (fn [] (edit! &#39;todos assoc-in [id :status] other-status)))))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(defs filter :all)
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def toggle-filter
</span><span>  (named (str &#34;viewing &#34; (name filter))
</span><span>    (fn [] (edit! &#39;filter #(case filter 
</span><span>                             :all :todo
</span><span>                             :todo :done
</span><span>                             :done :all)))))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def filtered-todos
</span><span>  (vec
</span><span>    (for [[id todo] todos
</span><span>          :when (#{:all (:status todo)} filter)]
</span><span>      [(:text todo)
</span><span>       (hidden [(fn set-text [text]
</span><span>                  (edit! &#39;todos assoc-in [:id :text] text))
</span><span>                (status-toggle id)
</span><span>                (fn delete []
</span><span>                  (edit! &#39;todos dissoc id))])])))
</span></code></pre>
<pre data-lang="preimp"><code data-lang="preimp"><span>(def app
</span><span>  (vec
</span><span>    (apply list
</span><span>      new-todo
</span><span>      toggle-filter
</span><span>      filtered-todos)))
</span></code></pre>



<hr/>
<p>TODO
spreadsheets don&#39;t have state problem, but not interactive (at least in same way)</p>

</article></div>
  </body>
</html>
