<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.jonlu.ca/posts/us-east-1-latency">Original</a>
    <h1>Noticing when an app is only hosted in us-east-1</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Every time I leave New York and land back in Europe or in Asia, I can immediately tell which apps have a global presence and which apps only deploy to a single US region. Everything just immediately feels a little slower. The pull to refresh feels a bit sluggish, the preview images take a little longer to load, and even native apps just feel less responsive.</p>
<h2 id="floored-latency">Floored Latency</h2>
<p>The speed of the experience you can offer your users is floored by a few variables, most notably the physical distance from the origin server to where the user is actually sitting.</p>
<p>Us-east-1 (appropriately located right by “Centreville, Virginia”) is one of the main data centers run by AWS. If you’re a startup (or even quite a few mature companies), you are likely to deploy your application here. If you manage a stateful service, or your architecture doesn’t support distributed compute, you are likely to <em>only</em> deploy here. If you have users in Sydney, Australia, any network request you make will need to travel 15,677km to make it there, as the crow flies.</p>
<picture data-downloadable="true"><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/va-aus-50-ee0203d54.webp 50w, https://blog.jonlu.ca/images/generated/va-aus-100-ee0203d54.webp 100w, https://blog.jonlu.ca/images/generated/va-aus-200-ee0203d54.webp 200w, https://blog.jonlu.ca/images/generated/va-aus-400-ee0203d54.webp 400w, https://blog.jonlu.ca/images/generated/va-aus-800-ee0203d54.webp 800w, https://blog.jonlu.ca/images/generated/va-aus-1200-ee0203d54.webp 1200w, https://blog.jonlu.ca/images/generated/va-aus-1600-ee0203d54.webp 1600w, https://blog.jonlu.ca/images/generated/va-aus-2140-ee0203d54.webp 2140w" type="image/webp"/><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/va-aus-50-fb2b83925.png 50w, https://blog.jonlu.ca/images/generated/va-aus-100-fb2b83925.png 100w, https://blog.jonlu.ca/images/generated/va-aus-200-fb2b83925.png 200w, https://blog.jonlu.ca/images/generated/va-aus-400-fb2b83925.png 400w, https://blog.jonlu.ca/images/generated/va-aus-800-fb2b83925.png 800w, https://blog.jonlu.ca/images/generated/va-aus-1200-fb2b83925.png 1200w, https://blog.jonlu.ca/images/generated/va-aus-1600-fb2b83925.png 1600w, https://blog.jonlu.ca/images/generated/va-aus-2140-fb2b83925.png 2140w" type="image/png"/><img src="https://blog.jonlu.ca/images/generated/va-aus-800-fb2b83925.png" alt="Distance from Centreville, Virginia to Sydney, Australia" width="2140" height="1438"/></picture>

<p>If you’re traveling at:</p>
<p>1) The speed of light</p>
<p>2) as the crow flies</p>
<p>3) with no overhead</p>
<p>then that means that you are <em>floored</em> at 104ms of latency for your request.</p>
<picture data-downloadable="true"><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/va-aus-light-50-327f9e3dd.webp 50w, https://blog.jonlu.ca/images/generated/va-aus-light-100-327f9e3dd.webp 100w, https://blog.jonlu.ca/images/generated/va-aus-light-200-327f9e3dd.webp 200w, https://blog.jonlu.ca/images/generated/va-aus-light-400-327f9e3dd.webp 400w, https://blog.jonlu.ca/images/generated/va-aus-light-800-327f9e3dd.webp 800w, https://blog.jonlu.ca/images/generated/va-aus-light-1200-327f9e3dd.webp 1200w, https://blog.jonlu.ca/images/generated/va-aus-light-1600-327f9e3dd.webp 1600w, https://blog.jonlu.ca/images/generated/va-aus-light-1630-327f9e3dd.webp 1630w" type="image/webp"/><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/va-aus-light-50-18302074d.png 50w, https://blog.jonlu.ca/images/generated/va-aus-light-100-18302074d.png 100w, https://blog.jonlu.ca/images/generated/va-aus-light-200-18302074d.png 200w, https://blog.jonlu.ca/images/generated/va-aus-light-400-18302074d.png 400w, https://blog.jonlu.ca/images/generated/va-aus-light-800-18302074d.png 800w, https://blog.jonlu.ca/images/generated/va-aus-light-1200-18302074d.png 1200w, https://blog.jonlu.ca/images/generated/va-aus-light-1600-18302074d.png 1600w, https://blog.jonlu.ca/images/generated/va-aus-light-1630-18302074d.png 1630w" type="image/png"/><img src="https://blog.jonlu.ca/images/generated/va-aus-light-800-18302074d.png" alt="Time in takes for the speed of light to travel from us-east-1 to Sydney" width="1630" height="1532"/></picture>

<p>And this is assuming no interference, other traffic, or time spent handling the request.</p>
<p>In reality, the ping you’ll experience will be worse, at around 215ms (which is a pretty amazing feat in and of itself - all those factors above only double the time it takes to get from Sydney to the eastern US).</p>
<picture data-downloadable="true"><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/ping-50-ad518ec71.webp 50w, https://blog.jonlu.ca/images/generated/ping-100-ad518ec71.webp 100w, https://blog.jonlu.ca/images/generated/ping-200-ad518ec71.webp 200w, https://blog.jonlu.ca/images/generated/ping-400-ad518ec71.webp 400w, https://blog.jonlu.ca/images/generated/ping-800-ad518ec71.webp 800w, https://blog.jonlu.ca/images/generated/ping-1200-ad518ec71.webp 1200w, https://blog.jonlu.ca/images/generated/ping-1600-ad518ec71.webp 1600w, https://blog.jonlu.ca/images/generated/ping-2000-ad518ec71.webp 2000w" type="image/webp"/><source sizes="(max-width: 480px) calc(100vw - 16px), (max-width: 768) 80vw, 800px" srcset="https://blog.jonlu.ca/images/generated/ping-50-1b0d14f93.png 50w, https://blog.jonlu.ca/images/generated/ping-100-1b0d14f93.png 100w, https://blog.jonlu.ca/images/generated/ping-200-1b0d14f93.png 200w, https://blog.jonlu.ca/images/generated/ping-400-1b0d14f93.png 400w, https://blog.jonlu.ca/images/generated/ping-800-1b0d14f93.png 800w, https://blog.jonlu.ca/images/generated/ping-1200-1b0d14f93.png 1200w, https://blog.jonlu.ca/images/generated/ping-1600-1b0d14f93.png 1600w, https://blog.jonlu.ca/images/generated/ping-2000-1b0d14f93.png 2000w" type="image/png"/><img src="https://blog.jonlu.ca/images/generated/ping-800-1b0d14f93.png" alt="screenshot shwing ping to various cities around the globe" width="2000" height="1064"/></picture>

<h2 id="realized-latency">Realized latency</h2>
<p>Having spent so much time trying to optimize web pages and API responses for performance, I’ve gotten a pretty good internal model for latency. I can’t quite tell the difference between a us-east-1 server when I’m in New York versus San Francisco, but I can definitely tell if you’ve got an instance deployed in <code>eu-central-1</code> or not when I’m in Italy, or <code>ap-east-1</code> when I’m in Sydney.</p>
<p>Using a global CDN can help get your assets to your users quicker, and most companies by this point are using something like Cloudflare or Vercel, but many still only serve static or cached content this way. Very frequently the origin server will still be a centralized monolith deployed in only one location, or there will only be a single database cluster.</p>
<p>As soon as you land back in the United States and turn of Airplane mode on your phone everything just starts feeling… snappier? A little more fluid? As much as T-Mobile and Verizon would like to take credit for that I don’t think theres much more to it than the physical location of the servers and where you are at that moment.</p>
</div></div>
  </body>
</html>
