<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://supernotes.app/blog/posts/notes-end-to-end-encryption/">Original</a>
    <h1>Should Your Notes Be End-to-End Encrypted?</h1>
    
    <div id="readability-page-1" class="page"><div><div><p>If you use a messaging app like Whatsapp, Signal, or Telegram, you&#39;ve probably heard the term “end-to-end encryption” or E2EE for short. But what does that <em>actually</em> mean? What does that actually do? Do you need it? Is it important to have in something like a note-taking app? This post is a basic overview of the most commonly used types of encryption and why encrypting as much as possible is almost always A Good Thing™ – but not <em>quite</em> always. Even if you&#39;re pretty confident you understand E2EE, ask yourself the following questions:</p>
<blockquote>
  <ol>
    <p>Pop quiz</p>
    <li>
      Can you clearly explain the difference between Encryption at Rest, Encryption in Transit, and End-to-End Encryption?
    </li>
    <li>
      Did you know there are different ways to implement E2EE, and that one of the most widely used is the Double Ratchet Algorithm?
    </li>
    <li>
      Are you aware that it is very difficult for you (the end user) to know if an E2EE service hasn&#39;t added any backdoors which render the encryption useless?
    </li>
    <small>We highly recommend reading on if you can&#39;t answer these confidently...</small>
  </ol>
</blockquote>
<p>Said simply, the great thing using message apps with strong end-to-end encryption is that it ensures messages sent to your loved one, friend, or co-worker are for your eyes only. Nobody else can see the contents of the message. The people sharing the same wifi network at Starbucks can&#39;t see the message. Your Internet Service Provider (ISP) can&#39;t see the message. The US Government cannot see the message. Even the operators of the messaging service themselves can&#39;t see the message. Only the two of you can see the message.</p>
<p>In the note-taking space, E2EE has been gaining traction because it allows you to behave as if your notes were only ever stored on your own computer, while having the benefit of allowing a third-party service to backup / sync your notes for you.</p>
<p>That sounds fantastic in theory – who wouldn’t you want that security and peace of mind? However in practice there are some fundamental requirements of E2EE that make it not quite the obvious win it seems on the surface. We’ll get into that in a bit, but first let’s talk about other types of encryption that build towards the holy grail of encrypting stuff “end-to-end”.</p>
<h2>Different types of encryption</h2>
<p>We&#39;ll assume that if you&#39;re reading this article, you know what encryption on the whole is, but we also think it&#39;s worthwhile to run through a few specific types of encryption to give a bit more perspective on the security benefits in various scenarios.</p>
<div><p><span>
      <span></span>
  <picture>
        <source srcset="/static/7296b6e1e874bcfec327bd8a59d185fa/adf5f/rest.webp 350w, /static/7296b6e1e874bcfec327bd8a59d185fa/f8b1b/rest.webp 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"/>
        <source srcset="/static/7296b6e1e874bcfec327bd8a59d185fa/1e9fe/rest.jpg 350w, /static/7296b6e1e874bcfec327bd8a59d185fa/2a8be/rest.jpg 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/jpeg"/>
        <img src="https://d33wubrfki0l68.cloudfront.net/f5ec3f44abf024f82863e969fd87e27c3ca68d8b/87a05/static/7296b6e1e874bcfec327bd8a59d185fa/2a8be/rest.jpg" alt="Encryption at Rest – storing data" title="Encryption at Rest – storing data" loading="lazy"/>
      </picture>
    </span>
</p></div>
<h3>1. Encryption at Rest – storing data</h3>
<p>Encryption at Rest means that when data is not being actively utilized, it is encrypted. The two major examples of this would be <a href="#EB">encrypted backups</a> and <a href="#FDE">full-disk encryption</a>.</p>
<h4 id="EB">1A. Encrypted backups</h4>
<p>In the context of a web platform, encrypted backups are straightforward and usually apply to <em>databases</em>. Web platforms are built on top of databases, which should be periodically backed up offsite,  to ensure that if anything ever happens to the database (like hardware crashes, accidental deletion, etc.), there’s a backup somewhere you can restore, so that all the relevant information is not lost. It’s a best practice to encrypt these backups, so that if anyone (say an attacker) ever gets access to said backups (but not the live database), they won’t be able to read the contents within — and user information isn’t compromised.</p>
<h4 id="FDE">1B. Full-Disk (or Drive) Encryption (FDE)</h4>
<p>Encrypting an entire disk also does what it says on the tin, with one slight caveat. Many modern operating systems allow you to encrypt your entire hard disk — whether it&#39;s an old school spinning disk drive or an SSD. Then, when your computer is powered off or locked, all that information is encrypted. So, if a thief steals your laptop from your car, you&#39;ll be out a laptop, but at least they won&#39;t be able to access any of your sensitive information.</p>
<p>However (and here&#39;s the caveat), when the computer is powered ON <em>and</em> unlocked, the information on your drive is not encrypted. It needs to be decrypted (and stay that way while using the system) in order for you to actually use the data. So, if you have FDE turned on but someone steals your laptop <em>while</em> you&#39;re using it — for example it gets swiped off of your table at a coffee shop – then the thief will be able to access that data.</p>
<div><p><span>
      <span></span>
  <picture>
        <source srcset="/static/ab2a11cdd5739f43b2ab6395d31975c8/adf5f/transit.webp 350w, /static/ab2a11cdd5739f43b2ab6395d31975c8/f8b1b/transit.webp 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"/>
        <source srcset="/static/ab2a11cdd5739f43b2ab6395d31975c8/1e9fe/transit.jpg 350w, /static/ab2a11cdd5739f43b2ab6395d31975c8/2a8be/transit.jpg 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/jpeg"/>
        <img src="https://d33wubrfki0l68.cloudfront.net/5b4be4084479c77cc4e853cf8f87ee5b494aa34d/454bf/static/ab2a11cdd5739f43b2ab6395d31975c8/2a8be/transit.jpg" alt="Encryption in Transit – moving data" title="Encryption in Transit – moving data" loading="lazy"/>
      </picture>
    </span>
</p></div>
<h3>2. Encryption in Transit – moving data</h3>
<p>Let&#39;s go back to online services for a second: 99% of the time when you send data over the web, you&#39;re interacting with a website and using HTTP (an unencrypted protocol) to do it. &#34;Encryption in transit&#34; means that when such data is sent &#34;over the wire&#34;, the information is encrypted between the two parties (i.e. between the user and the service they are interacting with).</p>
<p>This is usually indicated by appending an &#34;S&#34; to the various protocols used on the web — HTTP included. Which is how you get &#34;HTTPS&#34;, which stands for &#34;<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol <strong>Secure</strong>&#34;. Instead of doing the normal (unencrypted) HTTP stuff, you do HTTP stuff <em>on top of</em> an encryption layer. Historically this layer was called Secure Sockets Layer (SSL), but these days SSL is being replaced by Transport Layer Security (TLS).</p>
<p>In practice, this means that although people can still intercept traffic (people such as your ISP or other users of a public WiFi network), it will just look like random gibberish to them. However, once the intended recipient receives it, it will be decrypted again until it is sent somewhere else via HTTPS (or another protocol).
Luckily, most internet services these days force the use of HTTPS, so that’s one less thing for you to worry about.</p>
<h4>Interlude: What we do at Supernotes</h4>
<p>At Supernotes, we&#39;ve spent a lot of time ensuring that both Encryption at Rest and Encryption in Transit are applied wherever we can. Our database backups are encrypted, the machines our databases run on have full-disk encryption, and any data you ever send to Supernotes is encrypted in transit using HTTPS (or other encrypted protocols). In fact, this is one reason we decided to go with a .app domain name <code>https://supernotes.app</code> when starting out, because .app domains are actually <strong>required</strong> to always use HTTPS. If you ever try to access a .app website with regular old unencrypted HTTP, it just <em>won&#39;t let you</em>.
Add all these together and you <em>almost</em> have E2EE. But not quite.</p>
<div><p><span>
      <span></span>
  <picture>
        <source srcset="/static/4c2e176740f213c7f675eacc50b9a3a8/adf5f/fingerprint.webp 350w, /static/4c2e176740f213c7f675eacc50b9a3a8/f8b1b/fingerprint.webp 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"/>
        <source srcset="/static/4c2e176740f213c7f675eacc50b9a3a8/1e9fe/fingerprint.jpg 350w, /static/4c2e176740f213c7f675eacc50b9a3a8/2a8be/fingerprint.jpg 600w" sizes="(max-width: 600px) 100vw, 600px" type="image/jpeg"/>
        <img src="https://d33wubrfki0l68.cloudfront.net/959b8fa6778d494e3ed6840238d0943e3cd2c116/3e1ba/static/4c2e176740f213c7f675eacc50b9a3a8/2a8be/fingerprint.jpg" alt="End-to-End Encryption (E2EE) – the secret handshake" title="End-to-End Encryption (E2EE) – the secret handshake" loading="lazy"/>
      </picture>
    </span>
</p></div>
<h3>3. End-to-End Encryption (E2EE) – secret handshakes</h3>
<p>But what about when you want absolutely maximum security? You never want <strong>anyone</strong> to be able to see some content — like passwords — except for you. But you still want another service like <a href="https://1password.com/" target="_blank" rel="nofollow noopener noreferrer">1Password</a> to be able to sync and store those passwords for you.</p>
<p>That&#39;s where E2EE comes in.</p>
<p>Instead of relying on encrypting things at rest or encrypting things in transit, E2EE means that data is only ever encrypted / decrypted on <em>your own devices</em> (or devices of people you want to share information with). In practice, this means that the encryption keys which are used for this can never leave those devices <em>except</em> when you want to add a new device to this ring, at which point the keys need to be shared <em>secretly</em>.</p>
<p>So if you are sending a message to your friend via a service that is encrypted end-to-end (like WhatsApp or Signal), the message is encrypted on your computer / phone / device, sent over the wire via the 3rd party&#39;s servers (which don&#39;t have access to the encryption key) and onwards to your friends device. The message is only <em>decrypted</em> on your friend&#39;s device once it has reached them. In principle, this means that absolutely nobody else besides you and your friend can see what the message contained.</p>
<p>If you’re an astute reader, you might realize that this has actually been possible for a long time just by sharing such a secret key phrase (read: password) with someone directly. Let’s say you and your friend share the password “SuperNova11” with each other <em>offline</em>, while having lunch at a cafe. Later, you use that agreed-upon password to encrypt the note you want to send. Then, when your friend wants to read the note, she can type in that same password on the other end and read it.</p>
<p>Only people with the password “SuperNova11” can read the message, and since you haven&#39;t given it to anyone else — that means just the two of you. E2EE achieved!</p>
<p>Hmmm, not so fast. After a moment of reflection, you realize that sharing passwords in person has some obvious drawbacks: firstly, it means you need to already have a secure way to communicate, whether that&#39;s talking in person without being eavesdropped or communicating over some other system which you know is secure. Because of that, it makes it <em>much harder</em> to interact with strangers you&#39;re not already in close communication with.
E2EE schemes address this by using sophisticated methods of exchanging secret keys so that you (the end user) do not have to think about any of that, while still guaranteeing the highest levels of security. </p>
<p>The most widely applied algorithm for this is probably the <a href="https://en.wikipedia.org/wiki/Double_Ratchet_Algorithm" target="_blank" rel="nofollow noopener noreferrer">Double Ratchet Algorithm</a> (developed in 2013), which not only provides end-to-end encryption but also &#34;perfect forward secrecy&#34;. Forward secrecy isn’t a necessary property of E2EE, it’s a bonus feature so that <em>even if</em> an attacker somehow gets their hands on one of the encryption keys used for the current message, they will not be able to decrypt <strong>past</strong> or <strong>future</strong> messages with that key (as the Double Ratchet Algorithm creates a new session for <em>every</em> message).</p>
<p>The Double Ratchet Algorithm can be found in many applications these days, but most notably it&#39;s used in both WhatsApp and Signal for their E2EE.
And that&#39;s the idea behind modern end-to-end encryption: give users the benefit of <em>fully</em> encrypted data that even the operator of the service can&#39;t expose — while still being able to move that data around <em>without</em> the usability burden of whispering passwords to each other.</p>
<h2>Note-taking and the downsides of E2EE</h2>
<p>Since a lot of our thinking around this topic relates to note-taking and knowledge management (rather than messaging), now is a good time to talk a bit about how how E2EE can specifically apply to this area. </p>
<p>For the most part, all the same ideas apply. You have some content — notes —  that you want to ensure nobody can read but you (and people you trust). Again, the simplest way to do this is with a password, with which you encrypt the notes on your computer, and any time you want to access them you decrypt them with the same password. </p>
<p>This can be an effective strategy, but as mentioned before, using passwords like this will make it much harder to share information with people or devices that are not already part of a secure communication channel and places the burden of remembering all these passwords on the user. A better strategy is for the software that you are using to write the notes to automatically create passwords (called “keys” in this context) for your notes.</p>
<p>Either way, your notes are now end-to-end encrypted, which brings us to the sad part of this story: the downsides of E2EE.</p>
<h3>Loss of data</h3>
<p>The first downside is somewhat obvious — if something happens and you lose access to the encryption key(s) used to encrypt your notes, you&#39;re outta luck. That’s why when you start using an E2EE service, they always tell you to copy down one or more recovery keys into a very safe place (which if you&#39;ve used any cryptocurrencies in the last few years should be a familiar process).
If you <strong>don&#39;t</strong> backup that key properly and, say, your computer dies — your notes will be gone forever. Nobody will be able to help you get them back (by design).</p>
<h3>Ease of Access</h3>
<p>An important part of having notes (especially compared to messages) is being able to access them whenever you want and to add to your collection wherever you are.
At the most basic level, this means accessing them on all of your own devices. But sometimes it means accessing them on devices that aren’t yours, such as a work or school computer or a friend&#39;s phone. With E2EE, this becomes more difficult, because you need to have some way to get the encryption keys from your existing devices onto this entirely new one. That&#39;s why, if you&#39;ve ever used the Signal app, you may&#39;ve been frustrated when you signed in on a new device and can&#39;t access previous message history. That forward secrecy property we mentioned earlier can be a bit annoying if it’s you that wants to access old data.</p>
<h3>Collaborating with Others (and 3rd-party integrations)</h3>
<p>When it comes to collaboration in 2022, obviously &#34;share a password with each other&#34; isn&#39;t a great solution. So, any E2EE apps you use should be managing keys for you – synchronizing them between devices in the background. </p>
<p>However, this becomes a serious stumbling block if you ever want to allow a 3rd party access to your content. For example, let&#39;s say you want a new note to be created/updated in your collection every time you bookmark a tweet. In order to update that note you would need to disable E2EE (at least for that specific note), otherwise changes could not be made. Now you have some notes on your system that are encrypted and some that are not, and the developers of such a system would need to ensure the two things are delineated clearly, otherwise you end up accidentally exposing sensitive content that you thought was secure. Add bi-directionality to your integrations and this becomes even more of a mess.</p>
<h3>Safety (Fighting Abuse / Spam / Phishing)</h3>
<p>Taking the concept of publishing your notes one step further, another issue that needs to be considered is what you do if the notes being published are actively harmful. Any platform which allows publishing has to contend with the possibility that a malicious actor will use the platform to attempt to publish harmful content, whether for the purposes of abuse, spam, or phishing. As an example of this, a few months ago at Supernotes we had to deal with a malicious user that was trying to use Supernotes to trick people into handing over their Microsoft account passwords. Luckily we were able to detect this activity before anyone was duped, but if we had been enforcing a strong E2EE policy we would’ve had no way of knowing this was happening until an affected person let us know.</p>
<h3>In the end, trust is <u>Still Required</u></h3>
<p>The final (and probably most important) thing to note about E2EE is that <strong>it&#39;s really hard to do correctly</strong>. Like really, really hard. Even when it is being implemented by people who can 100% do it correctly (of which there are not many, by the way), it is <em>nearly impossible</em> for you (as the end user) to know if that service hasn&#39;t placed any backdoors in the code which render the encryption useless.</p>
<p>The app that you&#39;re using isn’t <em>supposed</em> to send your secret keys anywhere except to your other devices (again, that&#39;s effectively the central tenet of E2EE). But in reality, there are a dozen ways this could change that at any moment  — and usually it would be very hard for you to detect such a change. Of course the creators of an app could add a backdoor, but also there could be a vulnerability introduced into a dependency used by the app that compromises your keys. Unless the app is open source <em>and</em> you are checking every dependency the software uses <em>and</em> you are either personally building the app from the source code <em>or</em> the app uses <a href="https://en.wikipedia.org/wiki/Reproducible_builds" target="_blank" rel="nofollow noopener noreferrer">reproducible builds</a> (and you’re verifying the hash every time there is an update), <strong>you just won&#39;t know</strong>.</p>
<h2>Our app, Supernotes, is not E2EE</h2>
<p>These reasons are why Supernotes cards are not end-to-end encrypted. Although the privacy benefits can definitely be worth it, the associated difficulty both from a development perspective and from a user convenience perspective are too great given our current set of priorities. </p>
<p>We want to give our users peace of mind that their notecards will always be accessible, without placing the onus on them to maintain recovery keys <strong>or else</strong>. We also want users to be able to seamlessly collaborate with <em>anyone</em> (or 3rd-party platforms like our recently announced <a href="https://supernotes.app/integrations/" target="_blank" rel="nofollow noopener noreferrer">Raycast extension</a>) without fragile key exchange systems that can break in so many ways.</p>
<p>That&#39;s why, if you have truly sensitive information that absolutely should never be seen by anyone else (like  passwords), we highly recommend storing it somewhere that is purpose-built for that use case (and preferably audited to prove security) like a password manager, which is designed to make the necessary tradeoffs to ensure security.</p>
<h3>In fact, most content apps you use are not E2EE</h3>
<p>Until the Signal protocol was developed and integrated into the Signal and WhatsApp messaging apps, very few consumer-facing apps used E2EE. Even now, it is mostly the purview of messaging apps. Content-based apps like Google Docs or Notion are not E2EE and probably never will be. Neither are any of your Slack messages. Your emails most likely aren’t encrypted, though a few providers (like ProtonMail) are doing their best to get E2EE working alongside the existing email protocols, with some large caveats (e.g. with ProtonMail you cannot use your own favorite email client and need to use theirs).</p>
<p>This is not to say that just because these services are not E2EE that nothing needs to be. The point is merely that <em>most</em> content benefits more from accessibility and usability than from the very high levels of privacy provided by E2EE. <em>Most</em> content you create every day is not passwords, trade secrets, or your deepest darkest desires.</p>
<h3>Never Say Never</h3>
<p>Having said all that, we at Supernotes can definitely understand how managing <strong>all</strong> your content — both secure and non-sensitive — under one roof can be a very useful property. So we aren’t against the idea of having E2EE enabled on specific Supernotes cards in the future. If that happens, it is <em>very</em> important to us that such a feature is developed very deliberately and thoroughly to ensure none of the above issues arise, which as mentioned would be a highly involved process. Our preference for the interim would be to integrate with other services where this <em>is</em> the top priority and therefore are that much more likely to do it right. But for the moment our small team (still only 2 people!) wants to focus on making the user experience as solid as possible, so that our users can just get on with taking notes.</p>
<blockquote>
<p>We hope this article helps you form a better understanding of E2EE. If you&#39;d like to learn more about encryption we recommend reading <a href="https://www.manning.com/books/real-world-cryptography" target="_blank" rel="nofollow noopener noreferrer">Real-World Cryptography</a>. And if you haven&#39;t tried Supernotes before, please <a href="https://supernotes.app/signup" target="_blank" rel="nofollow noopener noreferrer">give it a go</a> and let us know what you think! Have any further thoughts? Get in touch with us over on Twitter, <a href="https://twitter.com/supernotesapp" target="_blank" rel="nofollow noopener noreferrer">@supernotesapp</a> or send us an email, <a href="mailto:info@supernotes.app" target="_blank" rel="nofollow noopener noreferrer">info@supernotes.app</a></p>
</blockquote></div></div></div>
  </body>
</html>
