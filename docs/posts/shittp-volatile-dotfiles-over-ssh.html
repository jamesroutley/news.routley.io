<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/FOBshippingpoint/shittp">Original</a>
    <h1>Show HN: Shittp â€“ Volatile Dotfiles over SSH</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/FOBshippingpoint/shittp/refs/heads/main/web/public/logo.svg"><img alt="shittp logo" src="https://raw.githubusercontent.com/FOBshippingpoint/shittp/refs/heads/main/web/public/logo.svg"/></a>
</p>

<blockquote>
<p dir="auto">Bring your dotfiles to a remote machine via SSH without mess.</p>
</blockquote>
<p dir="auto"><a href="https://asciinema.org/a/Pt8MvdHHmvzQPpitz8xWEA0jg" rel="nofollow"><img src="https://camo.githubusercontent.com/3a220f65815ab118486fe63db49eddc0ef67bf62c8da2879eb03e1dab8248196/68747470733a2f2f61736369696e656d612e6f72672f612f5074384d766448486d767a51507069747a3878574541306a672e737667" alt="asciicast" data-canonical-src="https://asciinema.org/a/Pt8MvdHHmvzQPpitz8xWEA0jg.svg"/></a></p>

<p dir="auto">Required dependencies: <strong>POSIX shell</strong>, <strong>ssh</strong>, <strong>tar</strong>, <strong>base64</strong>, <strong>mktemp</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="curl -fsSL https://raw.githubusercontent.com/FOBshippingpoint/shittp/refs/heads/main/install.sh --output install.sh
chmod +x install.sh
./install.sh"><pre>curl -fsSL https://raw.githubusercontent.com/FOBshippingpoint/shittp/refs/heads/main/install.sh --output install.sh
chmod +x install.sh
./install.sh</pre></div>

<ol dir="auto">
<li>
<p dir="auto">Edit your dotfiles in <code>~/.config/shittp</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="cd ~/.config/shittp 
echo &#39;aloha() { echo hello; }&#39; &gt;&gt; .profile
$EDITOR .vimrc
$EDITOR .tmux.conf"><pre><span>cd</span> <span>~</span>/.config/shittp 
<span>echo</span> <span><span>&#39;</span>aloha() { echo hello; }<span>&#39;</span></span> <span>&gt;&gt;</span> .profile
<span>$EDITOR</span> .vimrc
<span>$EDITOR</span> .tmux.conf</pre></div>
</li>
<li>
<p dir="auto">Login to remote host with SSH:</p>
<div dir="auto" data-snippet-clipboard-copy-content="shittp john@other.machine
john$ aloha  # output: hello
john$ vim    # alias equal to &#34;vim -u $SHITTP_HOME/.vimrc&#34;
john$ tmux   # alias equal to &#34;tmux -L shittp -f $SHITTP_HOME/.tmux.conf&#34;"><pre>shittp john@other.machine
john$ aloha  <span><span>#</span> output: hello</span>
john$ vim    <span><span>#</span> alias equal to &#34;vim -u $SHITTP_HOME/.vimrc&#34;</span>
john$ tmux   <span><span>#</span> alias equal to &#34;tmux -L shittp -f $SHITTP_HOME/.tmux.conf&#34;</span></pre></div>
<p dir="auto">Or Docker container:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it alpine /bin/sh -c &#34;$(shittp print)&#34;
$ aloha    # output: hello"><pre>docker run -it alpine /bin/sh -c <span><span>&#34;</span><span><span>$(</span>shittp print<span>)</span></span><span>&#34;</span></span>
$ aloha    <span><span>#</span> output: hello</span></pre></div>
</li>
</ol>

<ol dir="auto">
<li><strong>Pack:</strong> create a tarball of your dotfiles and pipes to base64 string.</li>
<li><strong>Transport:</strong> passing the base64 string and setup script as a SSH remote command.</li>
<li><strong>Unpack:</strong> on the remote, decodes base64 string and extracts to temp directory.</li>
<li><strong>Init:</strong> sources setup script and start an interactive shell.</li>
<li><strong>Cleanup:</strong> remove temp directory once disconnect.</li>
</ol>
<p dir="auto">The original idea comes from <a href="https://github.com/fsquillace/kyrat">kyrat</a>, which uses <code>gzip</code>/<code>gunzip</code> and <code>bash</code>. shittp uses tar and POSIX shell.</p>

<div dir="auto" data-snippet-clipboard-copy-content="shittp [options]... [command] [ssh_options]... destination [-- ssh_command]"><pre>shittp [options]... [command] [ssh_options]... destination [-- ssh_command]</pre></div>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-h</code>, <code>--help</code></td>
<td>Show help message.</td>
<td></td>
</tr>
<tr>
<td><code>--config-dir DIR</code></td>
<td>Specify config directory.</td>
<td><code>~/.config/shittp</code></td>
</tr>
<tr>
<td><code>--client CLIENT</code></td>
<td>Specify SSH client command (e.g., <code>dbclient</code>).</td>
<td><code>ssh</code></td>
</tr>
<tr>
<td><code>-v</code>, <code>--version</code></td>
<td>Print shittp version.</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>where</code></td>
<td>Show the default config directory path.</td>
</tr>
<tr>
<td><code>print</code></td>
<td>Output the command string instead of running SSH. Useful for loading dotfiles in environments like Docker.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Basic SSH Login</p>

<p dir="auto">Pass SSH options as is</p>
<div dir="auto" data-snippet-clipboard-copy-content="shittp -oStrictHostKeyChecking=no john@example.com"><pre>shittp -oStrictHostKeyChecking=no john@example.com</pre></div>
<p dir="auto">Execute Remote Function</p>
<div dir="auto" data-snippet-clipboard-copy-content="shittp john@example.com -- foo bar
shittp -oRemoteCommand=&#39;foo bar&#39; john@example.com"><pre>shittp john@example.com -- foo bar
shittp -oRemoteCommand=<span><span>&#39;</span>foo bar<span>&#39;</span></span> john@example.com</pre></div>
<p dir="auto">Docker Integration</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it alpine /bin/sh -c &#34;$(shittp print)&#34;"><pre>docker run -it alpine /bin/sh -c <span><span>&#34;</span><span><span>$(</span>shittp print<span>)</span></span><span>&#34;</span></span></pre></div>
<p dir="auto">Dropbear Client</p>
<div dir="auto" data-snippet-clipboard-copy-content="shittp --client dbclient john@example.com"><pre>shittp --client dbclient john@example.com</pre></div>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Variable</th>
<th>Scope</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SHITTP_CONFIG_DIR</code></td>
<td>Local</td>
<td>Directory where your dotfiles live.</td>
<td><code>~/.config/shittp</code></td>
</tr>
<tr>
<td><code>SHITTP_SSH_CLIENT</code></td>
<td>Local</td>
<td>SSH client path (overridden by <code>--client</code>).</td>
<td><code>ssh</code></td>
</tr>
<tr>
<td><code>SHITTP_SHELL</code></td>
<td>Local/Remote</td>
<td>Shell path to use on the remote.</td>
<td>Remote login shell</td>
</tr>
<tr>
<td><code>SHITTP_HOME</code></td>
<td>Local/Remote</td>
<td>Directory to extract dotfiles tarball into.</td>
<td>Created temp directory</td>
</tr>
<tr>
<td><code>SHITTP</code></td>
<td>Remote</td>
<td>Path to <code>shittp_init.sh</code>. Source this if <code>[shittp] Inited</code> does not appear.</td>
<td></td>
</tr>
<tr>
<td><code>SHITTP_INITED</code></td>
<td>Remote</td>
<td>Set to <code>1</code> if shittp initialized successfully.</td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Large cofig may fail to load due to the OS maximum argument length constraint (<code>ARG_MAX</code>). It is known that 100K file will trigger the error on Alpine Linux.</p>
<p dir="auto">Command like <code>tar czf - | ssh host tar xzf -</code> should work, however this requires 2-stage SSH connection which means user need to type passphrase twice.</p>

<p dir="auto">Required dependencies: shellcheck, shellspec, docker</p>

<div data-snippet-clipboard-copy-content="Specify a command. The choices are:

  help                 Show this help
  lint                 Run shellcheck
  unit                 Run unit test with shellspec
  integration          Run integration test script
  webdev               Start web server for home page
  build                Run all check (lint, unit, integration) and build tarball
  clean                Remove shittp tarball from the build step
"><pre lang="text"><code>Specify a command. The choices are:

  help                 Show this help
  lint                 Run shellcheck
  unit                 Run unit test with shellspec
  integration          Run integration test script
  webdev               Start web server for home page
  build                Run all check (lint, unit, integration) and build tarball
  clean                Remove shittp tarball from the build step

</code></pre></div>
</article></div></div>
  </body>
</html>
