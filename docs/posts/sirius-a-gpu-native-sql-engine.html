<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/sirius-db/sirius">Original</a>
    <h1>Sirius: A GPU-native SQL engine</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/sirius-db/sirius/blob/main/docs/sirius-full.png"><img src="https://github.com/sirius-db/sirius/raw/main/docs/sirius-full.png" alt="Diagram" width="500"/></a>
</p>
<p dir="auto">Sirius is a GPU-native SQL engine. It plugs into existing databases such as DuckDB via the standard Substrait query format, requiring no query rewrites or major system changes. Sirius currently supports DuckDB and Doris (coming soon), other systems marked with * are on our roadmap.</p>

<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/sirius-db/sirius/blob/main/docs/sirius-architecture.png"><img src="https://github.com/sirius-db/sirius/raw/main/docs/sirius-architecture.png" alt="Diagram" width="900"/></a>
</p>

<p dir="auto">Running TPC-H on SF=100, Sirius achieves ~10x speedup over existing CPU query engines at the same hardware rental cost, making it well-suited for interactive analytics, financial workloads, and ETL jobs.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/sirius-db/sirius/blob/main/docs/sirius-performance.png"><img src="https://github.com/sirius-db/sirius/raw/main/docs/sirius-performance.png" alt="Performance"/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Supported OS/GPU/CUDA/CMake</h2><a id="user-content-supported-osgpucudacmake" aria-label="Permalink: Supported OS/GPU/CUDA/CMake" href="#supported-osgpucudacmake"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Ubuntu &gt;= 20.04</li>
<li>NVIDIA Volta™ or higher with compute capability 7.0+</li>
<li>CUDA &gt;= 11.2</li>
<li>CMake &gt;= 3.30.4 (follow this <a href="https://medium.com/@yulin_li/how-to-update-cmake-on-ubuntu-9602521deecb" rel="nofollow">instruction</a> to upgrade CMake)</li>
<li>We recommend building Sirius with at least <strong>16 vCPUs</strong> to ensure faster compilation.</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Dependencies (Option 1): Use AWS Image</h2><a id="user-content-dependencies-option-1-use-aws-image" aria-label="Permalink: Dependencies (Option 1): Use AWS Image" href="#dependencies-option-1-use-aws-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For users who have access to AWS and want to launch AWS EC2 instances to run Sirius, the following images are prepared with dependencies fully installed.</p>
<markdown-accessiblity-table><table>
  <tbody><tr>
    <td><b>AMI Name</b></td>
    <td><b>AWS Region</b></td>
    <td><b>AMI ID</b></td>
  </tr>
  <tr>
    <td rowspan="3">Sirius Dependencies AMI (Ubuntu 24.04) 20250611</td>
    <td>us-east-1</td>
    <td>ami-06020f2b2161f5d62</td>
  </tr>
  <tr>
    <td>us-east-2</td>
    <td>ami-016b589f441fecc5d</td>
  </tr>
  <tr>
    <td>us-west-2</td>
    <td>ami-060043bae3f9b5eb4</td>
  </tr>
</tbody></table></markdown-accessiblity-table>
<p dir="auto">Supported EC2 instances: G4dn, G5, G6, Gr6, G6e, P4, P5, P6.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Dependencies (Option 2): Use Docker Image</h2><a id="user-content-dependencies-option-2-use-docker-image" aria-label="Permalink: Dependencies (Option 2): Use Docker Image" href="#dependencies-option-2-use-docker-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use the docker image with dependencies fully installed:</p>
<div data-snippet-clipboard-copy-content="sudo docker run --gpus all -it yifeiyang7/sirius_dependencies:latest bash"><pre><code>sudo docker run --gpus all -it yifeiyang7/sirius_dependencies:latest bash
</code></pre></div>
<p dir="auto">If encounting errors like the following when running the docker image as above:</p>
<div data-snippet-clipboard-copy-content="docker: Error response from daemon: could not select device driver “” with capabilities: [[gpu]]."><pre><code>docker: Error response from daemon: could not select device driver “” with capabilities: [[gpu]].
</code></pre></div>
<p dir="auto">This means <code>nvidia-driver</code> or <code>nvidia-container-toolkit</code> is not installed.</p>
<p dir="auto">To install <code>nvidia-driver</code>:</p>
<div data-snippet-clipboard-copy-content="sudo apt install nvidia-driver-535"><pre><code>sudo apt install nvidia-driver-535
</code></pre></div>
<p dir="auto">To install <code>nvidia-container-toolkit</code>, please follow the <a href="https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html" rel="nofollow">instructions</a>.</p>
<p dir="auto">Finally restart docker by</p>
<div data-snippet-clipboard-copy-content="sudo systemctl restart docker"><pre><code>sudo systemctl restart docker
</code></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Dependencies (Option 3): Install Manually</h2><a id="user-content-dependencies-option-3-install-manually" aria-label="Permalink: Dependencies (Option 3): Install Manually" href="#dependencies-option-3-install-manually"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Install duckdb dependencies</h3><a id="user-content-install-duckdb-dependencies" aria-label="Permalink: Install duckdb dependencies" href="#install-duckdb-dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div data-snippet-clipboard-copy-content="sudo apt-get update &amp;&amp; sudo apt-get install -y git g++ cmake ninja-build libssl-dev"><pre><code>sudo apt-get update &amp;&amp; sudo apt-get install -y git g++ cmake ninja-build libssl-dev
</code></pre></div>

<p dir="auto">If CUDA is not installed, download <a href="https://developer.nvidia.com/cuda-downloads" rel="nofollow">here</a>. Follow the instructions for the deb(local) installer and complete the <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/#mandatory-actions" rel="nofollow">post-installation steps</a>.</p>
<p dir="auto">Verify installation:</p>
<div data-snippet-clipboard-copy-content="nvcc --version
nvidia-smi"><pre><code>nvcc --version
nvidia-smi
</code></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Install libcudf dependencies</h3><a id="user-content-install-libcudf-dependencies" aria-label="Permalink: Install libcudf dependencies" href="#install-libcudf-dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">libcudf will be installed via conda/miniconda. Miniconda can be downloaded <a href="https://www.anaconda.com/docs/getting-started/miniconda/install" rel="nofollow">here</a>. After downloading miniconda, install libcudf by running these commands:</p>
<div data-snippet-clipboard-copy-content="conda create --name libcudf-env
conda activate libcudf-env
conda install -c rapidsai -c conda-forge -c nvidia rapidsai::libcudf"><pre><code>conda create --name libcudf-env
conda activate libcudf-env
conda install -c rapidsai -c conda-forge -c nvidia rapidsai::libcudf
</code></pre></div>
<p dir="auto">Set the environment variables <code>LIBCUDF_ENV_PREFIX</code> to the conda environment&#39;s path. For example, if we installed miniconda in <code>~/miniconda3</code> and installed libcudf in the conda environment <code>libcudf-env</code>, then we would set the <code>LIBCUDF_ENV_PREFIX</code> to <code>~/miniconda3/envs/libcudf-env</code>.</p>
<div data-snippet-clipboard-copy-content="export LIBCUDF_ENV_PREFIX={PATH to libcudf-env}"><pre><code>export LIBCUDF_ENV_PREFIX={PATH to libcudf-env}
</code></pre></div>
<p dir="auto">It is recommended to add the environment variables to your <code>bashrc</code> to avoid repetition.</p>

<p dir="auto">To clone the Sirius repository:</p>
<div data-snippet-clipboard-copy-content="git clone --recurse-submodules https://github.com/sirius-db/sirius.git
cd sirius
export SIRIUS_HOME_PATH=`pwd`
cd duckdb
mkdir -p extension_external &amp;&amp; cd extension_external
git clone https://github.com/duckdb/substrait.git
cd substrait
git reset --hard ec9f8725df7aa22bae7217ece2f221ac37563da4 #go to the right commit hash for duckdb substrait extension
cd $SIRIUS_HOME_PATH"><pre><code>git clone --recurse-submodules https://github.com/sirius-db/sirius.git
cd sirius
export SIRIUS_HOME_PATH=`pwd`
cd duckdb
mkdir -p extension_external &amp;&amp; cd extension_external
git clone https://github.com/duckdb/substrait.git
cd substrait
git reset --hard ec9f8725df7aa22bae7217ece2f221ac37563da4 #go to the right commit hash for duckdb substrait extension
cd $SIRIUS_HOME_PATH
</code></pre></div>
<p dir="auto">The <code>--recurse-submodules</code> will ensure DuckDB is pulled which is required to build the extension.</p>
<p dir="auto">To build Sirius:</p>

<p dir="auto">Optionally, to use the Python API in Sirius, we also need to build the duckdb-python package with the following commands:</p>
<div data-snippet-clipboard-copy-content="cd duckdb/tools/pythonpkg/
pip install .
cd $SIRIUS_HOME_PATH"><pre><code>cd duckdb/tools/pythonpkg/
pip install .
cd $SIRIUS_HOME_PATH
</code></pre></div>
<p dir="auto">Common issues: If <code>pip install .</code> only works inside an environment, then do the following from the Sirius home directory before the installation:</p>
<div data-snippet-clipboard-copy-content="python3 -m venv --prompt duckdb .venv
source .venv/bin/activate"><pre><code>python3 -m venv --prompt duckdb .venv
source .venv/bin/activate
</code></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Generating and Loading TPC-H dataset</h2><a id="user-content-generating-and-loading-tpc-h-dataset" aria-label="Permalink: Generating and Loading TPC-H dataset" href="#generating-and-loading-tpc-h-dataset"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To generate the TPC-H dataset</p>
<div data-snippet-clipboard-copy-content="unzip dbgen.zip
cd dbgen
./dbgen -s 1 &amp;&amp; mkdir s1 &amp;&amp; mv *.tbl s1  # this generates dataset of SF1
cd .."><pre><code>unzip dbgen.zip
cd dbgen
./dbgen -s 1 &amp;&amp; mkdir s1 &amp;&amp; mv *.tbl s1  # this generates dataset of SF1
cd ..
</code></pre></div>
<p dir="auto">To load the TPC-H dataset to duckdb:</p>
<div data-snippet-clipboard-copy-content="./build/release/duckdb {DATABASE_NAME}.duckdb
.read tpch_load_duckdb.sql"><pre><code>./build/release/duckdb {DATABASE_NAME}.duckdb
.read tpch_load_duckdb.sql
</code></pre></div>

<p dir="auto">To run Sirius CLI, simply start the shell with <code>./build/release/duckdb {DATABASE_NAME}.duckdb</code>.
From the duckdb shell, initialize the Sirius buffer manager with <code>call gpu_buffer_init</code>. This API accepts 2 parameters, the GPU caching region size and the GPU processing region size. The GPU caching region is a memory region where the raw data is stored in GPUs, whereas the GPU processing region is where intermediate results are stored in GPUs (hash tables, join results .etc).
For example, to set the caching region as 1 GB and the processing region as 2 GB, we can run the following command:</p>
<div data-snippet-clipboard-copy-content="call gpu_buffer_init(&#34;1 GB&#34;, &#34;2 GB&#34;);"><pre><code>call gpu_buffer_init(&#34;1 GB&#34;, &#34;2 GB&#34;);
</code></pre></div>
<p dir="auto">After setting up Sirius, we can execute SQL queries using the <code>call gpu_processing</code>:</p>
<div data-snippet-clipboard-copy-content="call gpu_processing(&#34;select
  l_orderkey,
  sum(l_extendedprice * (1 - l_discount)) as revenue,
  o_orderdate,
  o_shippriority
from
  customer,
  orders,
  lineitem
where
  c_mktsegment = 1
  and c_custkey = o_custkey
  and l_orderkey = o_orderkey
  and o_orderdate &lt; 19950315
  and l_shipdate &gt; 19950315
group by
  l_orderkey,
  o_orderdate,
  o_shippriority
order by
  revenue desc,
  o_orderdate&#34;);"><pre><code>call gpu_processing(&#34;select
  l_orderkey,
  sum(l_extendedprice * (1 - l_discount)) as revenue,
  o_orderdate,
  o_shippriority
from
  customer,
  orders,
  lineitem
where
  c_mktsegment = 1
  and c_custkey = o_custkey
  and l_orderkey = o_orderkey
  and o_orderdate &lt; 19950315
  and l_shipdate &gt; 19950315
group by
  l_orderkey,
  o_orderdate,
  o_shippriority
order by
  revenue desc,
  o_orderdate&#34;);
</code></pre></div>
<p dir="auto"><strong>The cold run in Sirius would be significantly slower due to data loading from storage and conversion from DuckDB format to Sirius native format. Subsequent runs would be faster since it benefits from caching on GPU memory.</strong></p>
<p dir="auto">All 22 TPC-H queries are saved in tpch-queries.sql. To run all queries:</p>

<div dir="auto"><h2 tabindex="-1" dir="auto">Running Sirius: Python API</h2><a id="user-content-running-sirius-python-api" aria-label="Permalink: Running Sirius: Python API" href="#running-sirius-python-api"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Make sure to build the duckdb-python package before using the Python API with the method described <a href="https://github.com/sirius-db/sirius?tab=readme-ov-file#building-sirius">here</a>. To use the Sirius Python API, add the following code to the beginning of your Python program:</p>
<div data-snippet-clipboard-copy-content="import duckdb
con = duckdb.connect(&#39;{DATABASE_NAME}.duckdb&#39;, config={&#34;allow_unsigned_extensions&#34;: &#34;true&#34;})
con.execute(&#34;load &#39;{SIRIUS_HOME_PATH}/build/release/extension/sirius/sirius.duckdb_extension&#39;&#34;)
con.execute(&#34;call gpu_buffer_init(&#39;{GPU_CACHE_SIZE}&#39;, &#39;{GPU_PROCESSING_SIZE}&#39;)&#34;)"><pre><code>import duckdb
con = duckdb.connect(&#39;{DATABASE_NAME}.duckdb&#39;, config={&#34;allow_unsigned_extensions&#34;: &#34;true&#34;})
con.execute(&#34;load &#39;{SIRIUS_HOME_PATH}/build/release/extension/sirius/sirius.duckdb_extension&#39;&#34;)
con.execute(&#34;call gpu_buffer_init(&#39;{GPU_CACHE_SIZE}&#39;, &#39;{GPU_PROCESSING_SIZE}&#39;)&#34;)
</code></pre></div>
<p dir="auto">To execute query in Python:</p>
<div data-snippet-clipboard-copy-content="con.execute(&#39;&#39;&#39;
    call gpu_processing(&#34;select
      l_orderkey,
      sum(l_extendedprice * (1 - l_discount)) as revenue,
      o_orderdate,
      o_shippriority
    from
      customer,
      orders,
      lineitem
    where
      c_mktsegment = 1
      and c_custkey = o_custkey
      and l_orderkey = o_orderkey
      and o_orderdate &lt; 19950315
      and l_shipdate &gt; 19950315
    group by
      l_orderkey,
      o_orderdate,
      o_shippriority
    order by
      revenue desc,
      o_orderdate&#34;)
            &#39;&#39;&#39;).fetchall()"><pre><code>con.execute(&#39;&#39;&#39;
    call gpu_processing(&#34;select
      l_orderkey,
      sum(l_extendedprice * (1 - l_discount)) as revenue,
      o_orderdate,
      o_shippriority
    from
      customer,
      orders,
      lineitem
    where
      c_mktsegment = 1
      and c_custkey = o_custkey
      and l_orderkey = o_orderkey
      and o_orderdate &lt; 19950315
      and l_shipdate &gt; 19950315
    group by
      l_orderkey,
      o_orderdate,
      o_shippriority
    order by
      revenue desc,
      o_orderdate&#34;)
            &#39;&#39;&#39;).fetchall()
</code></pre></div>

<p dir="auto">Sirius provides a unit test that compares Sirius against DuckDB for correctness across all 22 TPC-H queries. To run the unittest, generate SF=1 TPC-H dataset using the method described <a href="https://github.com/sirius-db/sirius?tab=readme-ov-file#generating-tpc-h-dataset">here</a> and run the unittest using the following command:</p>


<p dir="auto">Make sure to build the duckdb-python package before running this test using the method described <a href="https://github.com/sirius-db/sirius?tab=readme-ov-file#building-sirius">here</a>. To test Sirius performance against DuckDB across all 22 TPC-H queries, run the following command (replace {SF} with the desired scale factor):</p>
<div data-snippet-clipboard-copy-content="python3 test/generate_test_data.py {SF}
python3 test/performance_test.py {SF}"><pre><code>python3 test/generate_test_data.py {SF}
python3 test/performance_test.py {SF}
</code></pre></div>

<p dir="auto">Sirius uses <a href="https://github.com/gabime/spdlog">spdlog</a> for logging messages during query execution. Default log directory is <code>${CMAKE_BINARY_DIR}/log</code> and default log level is <code>info</code>, which can be configured by environment variables <code>SIRIUS_LOG_DIR</code> and <code>SIRIUS_LOG_LEVEL</code>. For example:</p>
<div data-snippet-clipboard-copy-content="export SIRIUS_LOG_DIR={PATH for logging}
export SIRIUS_LOG_LEVEL=debug"><pre><code>export SIRIUS_LOG_DIR={PATH for logging}
export SIRIUS_LOG_LEVEL=debug
</code></pre></div>

<p dir="auto">Sirius is under active development, and several features are still in progress. Notable current limitations include:</p>
<ul dir="auto">
<li><strong>Data Size Limitations:</strong> Sirius currently only works when the dataset fits in the GPU memory capacity. To be more specific, it would return an error if the input data size is larger than the GPU caching region or if the intermediate results is larger than the GPU processing region. We are actively addressing this issue by adding support for partitioning and batch execution (issues <a href="https://github.com/sirius-db/sirius/issues/12" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/12/hovercard">#12</a> and <a href="https://github.com/sirius-db/sirius/issues/19" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/19/hovercard">#19</a>), multi-GPUs execution (issue <a href="https://github.com/sirius-db/sirius/issues/18" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/18/hovercard">#18</a>), spilling to disk/host memory (issue <a href="https://github.com/sirius-db/sirius/issues/19" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/19/hovercard">#19</a>), and distributed query execution (issue <a href="https://github.com/sirius-db/sirius/issues/18" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/18/hovercard">#18</a>).</li>
<li><strong>Row Count Limitations:</strong> Sirius uses libcudf to implement <code>FILTER</code>, <code>PROJECTION</code>, <code>JOIN</code>, <code>GROUP-BY</code>, <code>ORDER-BY</code>, <code>AGGREGATION</code>. However, since libcudf uses <code>int32_t</code> for row IDs, this imposes limits on the maximum row count that Sirius can currently handle (~2B rows). See libcudf issue <a href="https://github.com/rapidsai/cudf/issues/13159" data-hovercard-type="issue" data-hovercard-url="/rapidsai/cudf/issues/13159/hovercard">#13159</a> for more details. We are actively addressing this by adding support for partitioning and batch execution. See Sirius issue <a href="https://github.com/sirius-db/sirius/issues/12" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/12/hovercard">#12</a> for more details.</li>
<li><strong>Data Type Coverage:</strong> Sirius currently supports data types including <code>INTEGER</code>, <code>BIGINT</code>, <code>FLOAT</code>, <code>DOUBLE</code>, <code>VARCHAR</code>, <code>DATE</code>, and <code>DECIMAL</code>. We are actively working on supporting additional data types—such as <code>TIME</code> and nested types. See issue <a href="https://github.com/sirius-db/sirius/issues/20" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/20/hovercard">#20</a> for more details.</li>
<li><strong>Operator Coverage:</strong> At present, Sirius only supports a range of operators including <code>FILTER</code>, <code>PROJECTION</code>, <code>JOIN</code>, <code>GROUP-BY</code>, <code>ORDER-BY</code>, <code>AGGREGATION</code>, <code>TOP-N</code>, <code>LIMIT</code>, and <code>CTE</code>. We are working on adding more advanced operators such as <code>WINDOW</code> functions and <code>ASOF JOIN</code>, etc. See issue <a href="https://github.com/sirius-db/sirius/issues/21" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/21/hovercard">#21</a> for more details.</li>
<li><strong>No Support for Partially NULL Columns:</strong> Sirius currently does not support columns where only some values are <code>NULL</code>. This limitation is being tracked and will be addressed in a future update. See issue <a href="https://github.com/sirius-db/sirius/issues/27" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/27/hovercard">#27</a> for more details.</li>
</ul>
<p dir="auto">For a full list of current limitations and ongoing work, please refer to our <a href="https://github.com/sirius-db/sirius/issues">GitHub issues page</a>. <strong>If these issues are encountered when running Sirius, Sirius will gracefully fallback to DuckDB query execution on CPUs.</strong></p>

<p dir="auto">Sirius is still under major development and we are working on adding more features to Sirius, such as <a href="https://github.com/sirius-db/sirius/issues/19" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/19/hovercard">storage/disk support</a>, <a href="https://github.com/sirius-db/sirius/issues/18" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/18/hovercard">multi-GPUs</a>, <a href="https://github.com/sirius-db/sirius/issues/18" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/18/hovercard">multi-node</a>, more <a href="https://github.com/sirius-db/sirius/issues/21" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/21/hovercard">operators</a>, <a href="https://github.com/sirius-db/sirius/issues/20" data-hovercard-type="issue" data-hovercard-url="/sirius-db/sirius/issues/20/hovercard">data types</a>, accelerating more engines, and many more.</p>
<p dir="auto">Sirius always welcomes new contributors! If you are interested, check our <a href="https://www.sirius-db.com/" rel="nofollow">website</a>, reach out to our <a href="https://github.com/sirius-db/sirius/blob/main/docs/siriusdb@cs.wisc.edu">email</a>, or join our <a href="https://join.slack.com/t/sirius-db/shared_invite/zt-33tuwt1sk-aa2dk0EU_dNjklSjIGW3vg" rel="nofollow">slack channel</a>.</p>
<p dir="auto"><strong>Let&#39;s kickstart the GPU eras for Data Analytics!</strong></p>
</article></div></div>
  </body>
</html>
