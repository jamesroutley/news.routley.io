<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/windmill-labs/windmill">Original</a>
    <h1>Windmill: Open-source developer platform to turn scripts into workflows and UIs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
  <a href="https://app.windmill.dev" rel="nofollow"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-banner.png" alt="windmill.dev"/></a>
</p>
<p dir="auto">
    <em>.</em>
</p>
<p dir="auto">
Open-source developer infrastructure for internal tools. Self-hostable alternative to Airplane, Pipedream, Superblocks and a simplified Temporal with autogenerated UIsm and custom UIs to trigger workflows and scripts as internal apps. Scripts are turned into UIs and no-code modules, no-code modules can be composed into very rich flows, and script and flows can be triggered from internal UIs made with a low-code builder. The script languages supported are: Python, Typescript, Go, Bash, SQL.
</p>
<p dir="auto">
<a href="https://github.com/windmill-labs/windmill/actions/workflows/docker-image.yml">
    <img src="https://github.com/windmill-labs/windmill/actions/workflows/docker-image.yml/badge.svg" alt="Docker Image CI"/>
</a>
<a href="https://pypi.org/project/wmill" rel="nofollow">
    <img src="https://camo.githubusercontent.com/54262a2202e059390c05a8697760cf02fa0fac44cf969e8a90ca110458a73529/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f776d696c6c3f636f6c6f723d253233333444303538266c6162656c3d707970692532307061636b616765" alt="Package version" data-canonical-src="https://img.shields.io/pypi/v/wmill?color=%2334D058&amp;label=pypi%20package"/>
</a>
<a href="https://discord.gg/V7PM2YHsPB" rel="nofollow">
  <img src="https://camo.githubusercontent.com/3fffc2d39407d4db6a09aa59c9f3393ec83126c0ccbf7d9ea77205386a8cc317/68747470733a2f2f646973636f72646170702e636f6d2f6170692f6775696c64732f3933303035313535363034333237363333382f7769646765742e706e67" alt="Discord Shield" data-canonical-src="https://discordapp.com/api/guilds/930051556043276338/widget.png"/>
</a>
</p>
<p dir="auto">
  <a href="https://app.windmill.dev" rel="nofollow">Try it</a> - <a href="https://docs.windmill.dev/docs/intro/" rel="nofollow">Docs</a> - <a href="https://discord.gg/V7PM2YHsPB" rel="nofollow">Discord</a> - <a href="https://hub.windmill.dev" rel="nofollow">Hub</a> - <a href="https://docs.windmill.dev/docs/misc/contributing" rel="nofollow">Contributor&#39;s guide</a>
</p>

<p dir="auto">Windmill is <b>fully open-sourced (AGPLv3)</b> and Windmill Labs offers
dedicated instance and commercial support and licenses.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/stacks.svg"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/stacks.svg" alt="Windmill Diagram"/></a></p>
<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span aria-label="Video description main.mp4">main.mp4</span>
    <span></span>
  </summary>

  <video src="https://user-images.githubusercontent.com/275584/218350457-bc2fdc3b-e667-4da5-a2bd-3bacc1f0ec79.mp4" data-canonical-src="https://user-images.githubusercontent.com/275584/218350457-bc2fdc3b-e667-4da5-a2bd-3bacc1f0ec79.mp4" controls="controls" muted="muted">

  </video>
</details>

<ul dir="auto">
<li><a href="#windmill---turn-scripts-into-workflows-and-uis-that-you-can-share-and-run-at-scale">Windmill - Turn scripts into workflows and UIs that you can share and run at scale</a>
<ul dir="auto">
<li><a href="#main-concepts">Main Concepts</a></li>
<li><a href="#show-me-some-actual-script-code">Show me some actual script code</a></li>
<li><a href="#cli">CLI</a>
<ul dir="auto">
<li><a href="#running-scripts-locally">Running scripts locally</a></li>
</ul>
</li>
<li><a href="#stack">Stack</a></li>
<li><a href="#security">Security</a>
<ul dir="auto">
<li><a href="#sandboxing">Sandboxing</a></li>
<li><a href="#secrets-credentials-and-sensitive-values">Secrets, credentials and sensitive values</a></li>
</ul>
</li>
<li><a href="#performance">Performance</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#how-to-self-host">How to self-host</a>
<ul dir="auto">
<li><a href="#docker-compose">Docker compose</a></li>
<li><a href="#kubernetes-k8s-and-helm-charts">Kubernetes (k8s) and Helm charts</a></li>
<li><a href="#postgres-without-superuser">Postgres without superuser</a></li>
<li><a href="#commercial-license">Commercial license</a></li>
<li><a href="#oauth-for-self-hosting">OAuth for self-hosting</a></li>
<li><a href="#resource-types">Resource types</a></li>
</ul>
</li>
<li><a href="#environment-variables">Environment Variables</a></li>
<li><a href="#run-a-local-dev-setup">Run a local dev setup</a>
<ul dir="auto">
<li><a href="#only-frontend">only Frontend</a></li>
<li><a href="#backend--frontend">Backend + Frontend</a></li>
</ul>
</li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#copyright">Copyright</a></li>
</ul>
</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-main-concepts" aria-hidden="true" href="#main-concepts"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Main Concepts</h2>
<ol dir="auto">
<li>
<p dir="auto">Define a minimal and generic script in Python, Typescript, Go or Bash that
solves a specific task. Here sending an email with SMTP. The code can be
defined in the provided Web IDE or synchronized with your own github repo:
<a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/windmill-editor.png"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-editor.png" alt="Step 1"/></a></p>
</li>
<li>
<p dir="auto">Your scripts parameters are automatically parsed and generate a frontend.
<a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/windmill-run.png"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-run.png" alt="Step 2"/></a> <a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/windmill-result.png"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-result.png" alt="Step 3"/></a></p>
</li>
<li>
<p dir="auto">Make it flow! You can chain your scripts or scripts made by the community
shared on <a href="https://hub.windmill.dev" rel="nofollow">WindmillHub</a>.
<a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/windmill-flow.png"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-flow.png" alt="Step 3"/></a></p>
</li>
<li>
<p dir="auto">Build complex UI on top of your scripts and flows.
<a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/windmill-builder.png"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/windmill-builder.png" alt="Step 4"/></a></p>
</li>
</ol>
<p dir="auto">Scripts and flows can also be triggered by a cron schedule &#39;_/5 _ * * *&#39; or
through webhooks.</p>
<p dir="auto">You can build your entire infra on top of Windmill!</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-show-me-some-actual-script-code" aria-hidden="true" href="#show-me-some-actual-script-code"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Show me some actual script code</h2>
<div dir="auto" data-snippet-clipboard-copy-content="import * as wmill from &#34;https://deno.land/x/windmill@v1.62.0/mod.ts&#34;;
//import any dependency  from npm

import cowsay from &#34;npm:cowsay@1.5.0&#34;;

export async function main(
  a: number,
  // unions generate enums
  b: &#34;my&#34; | &#34;enum&#34;,
  // default parameters prefill the field
  d = &#34;default arg&#34;,
  // nested objects work c = { nested: &#34;object&#34; },
  // permissioned and typed json
  db: wmill.Resource&lt;&#34;postgresql&#34;&gt;
) {
  const email = Deno.env.get(&#34;WM_EMAIL&#34;);
  // variables are permissioned and by path
  let variable = await wmill.getVariable(&#34;f/company-folder/my_secret&#34;);
  const lastTimeRun = await wmill.getState();
  // logs are printed and always inspectable
  console.log(cowsay.say({ text: &#34;hello &#34; + email + &#34; &#34; + lastTimeRun }));
  await wmill.setState(Date.now());

  // return is serialized as JSON
  return { foo: d, variable };
}"><pre><span>import</span> <span>*</span> <span>as</span> <span>wmill</span> <span>from</span> <span>&#34;https://deno.land/x/windmill@v1.62.0/mod.ts&#34;</span><span>;</span>
<span>//import any dependency  from npm</span>

<span>import</span> <span>cowsay</span> <span>from</span> <span>&#34;npm:cowsay@1.5.0&#34;</span><span>;</span>

<span>export</span> <span>async</span> <span>function</span> <span>main</span><span>(</span>
  <span>a</span>: <span>number</span><span>,</span>
  <span>// unions generate enums</span>
  <span>b</span>: <span>&#34;my&#34;</span> <span>|</span> <span>&#34;enum&#34;</span><span>,</span>
  <span>// default parameters prefill the field</span>
  <span>d</span> <span>=</span> <span>&#34;default arg&#34;</span><span>,</span>
  <span>// nested objects work c = { nested: &#34;object&#34; },</span>
  <span>// permissioned and typed json</span>
  <span>db</span>: <span>wmill</span><span>.</span><span>Resource</span><span>&lt;</span><span>&#34;postgresql&#34;</span><span>&gt;</span>
<span>)</span> <span>{</span>
  <span>const</span> <span>email</span> <span>=</span> <span>Deno</span><span>.</span><span>env</span><span>.</span><span>get</span><span>(</span><span>&#34;WM_EMAIL&#34;</span><span>)</span><span>;</span>
  <span>// variables are permissioned and by path</span>
  <span>let</span> <span>variable</span> <span>=</span> <span>await</span> <span>wmill</span><span>.</span><span>getVariable</span><span>(</span><span>&#34;f/company-folder/my_secret&#34;</span><span>)</span><span>;</span>
  <span>const</span> <span>lastTimeRun</span> <span>=</span> <span>await</span> <span>wmill</span><span>.</span><span>getState</span><span>(</span><span>)</span><span>;</span>
  <span>// logs are printed and always inspectable</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span>cowsay</span><span>.</span><span>say</span><span>(</span><span>{</span> <span>text</span>: <span>&#34;hello &#34;</span> <span>+</span> <span>email</span> <span>+</span> <span>&#34; &#34;</span> <span>+</span> <span>lastTimeRun</span> <span>}</span><span>)</span><span>)</span><span>;</span>
  <span>await</span> <span>wmill</span><span>.</span><span>setState</span><span>(</span><span>Date</span><span>.</span><span>now</span><span>(</span><span>)</span><span>)</span><span>;</span>

  <span>// return is serialized as JSON</span>
  <span>return</span> <span>{</span> <span>foo</span>: <span>d</span><span>,</span> variable <span>}</span><span>;</span>
<span>}</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-cli" aria-hidden="true" href="#cli"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>CLI</h2>
<p dir="auto">We have a powerful CLI to interact with the windmill platform and sync your
scripts from local files, github repos and to run scripts and flows on the
instance from local commands. See
<a href="https://github.com/windmill-labs/windmill/tree/main/cli">more details</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/cli/vhs/output/setup.gif"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/cli/vhs/output/setup.gif" alt="CLI Screencast" data-animated-image=""/></a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-running-scripts-locally" aria-hidden="true" href="#running-scripts-locally"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running scripts locally</h3>
<p dir="auto">You can run your script locally easily, you simply need to pass the right
environment variables for the <code>wmill</code> client library to fetch resources and
variables from your instance if necessary. See more:
<a href="https://docs.windmill.dev/docs/advanced/local_development/" rel="nofollow">https://docs.windmill.dev/docs/advanced/local_development/</a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-stack" aria-hidden="true" href="#stack"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Stack</h2>
<ul dir="auto">
<li>Postgres as the database</li>
<li>backend in Rust with the following highly-available and horizontally scalable
architecture:
<ul dir="auto">
<li>stateless API backend</li>
<li>workers that pull jobs from a queue in Postgres (and later, Kafka or Redis.
Upvote #173 if
interested )</li>
</ul>
</li>
<li>frontend in Svelte</li>
<li>scripts executions are sandboxed using google&#39;s
<a href="https://github.com/google/nsjail">nsjail</a></li>
<li>javascript runtime is the
<a href="https://denolib.gitbook.io/guide/" rel="nofollow">deno_core rust library</a> (which itself uses
the <a href="https://github.com/denoland/rusty_v8">rusty_v8</a> and hence V8 underneath)</li>
<li>typescript runtime is deno</li>
<li>python runtime is python3</li>
<li>golang runtime is 1.19.1</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-security" aria-hidden="true" href="#security"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Security</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-sandboxing" aria-hidden="true" href="#sandboxing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Sandboxing</h3>
<p dir="auto">Windmill uses <a href="https://github.com/google/nsjail">nsjail</a> on top of the deno
sandboxing. It is production multi-tenant grade secure. Do not take our word for
it, take <a href="https://fly.io/blog/sandboxing-and-workload-isolation/" rel="nofollow">fly.io&#39;s one</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-secrets-credentials-and-sensitive-values" aria-hidden="true" href="#secrets-credentials-and-sensitive-values"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Secrets, credentials and sensitive values</h3>
<p dir="auto">There is one encryption key per workspace to encrypt the credentials and secrets
stored in Windmill&#39;s K/V store.</p>
<p dir="auto">In addition, we strongly recommend that you encrypt the whole Postgres database.
That is what we do at <a href="https://app.windmill.dev" rel="nofollow">https://app.windmill.dev</a>.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-performance" aria-hidden="true" href="#performance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Performance</h2>
<p dir="auto">Once a job started, there is no overhead compared to running the same script on
the node with its corresponding runner (Deno/Go/Python/Bash). The added latency
from a job being pulled from the queue, started, and then having its result sent
back to the database is ~50ms. A typical lightweight deno job will take around
100ms total.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-architecture" aria-hidden="true" href="#architecture"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Architecture</h2>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://ntietz.com/windmill-labs/windmill/blob/main/imgs/diagram.svg"><img src="https://ntietz.com/windmill-labs/windmill/raw/main/imgs/diagram.svg"/></a>
</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-how-to-self-host" aria-hidden="true" href="#how-to-self-host"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to self-host</h2>
<p dir="auto">We only provide docker-compose setup here. For more advanced setups, like
compiling from source or using without a postgres super user, see
<a href="https://docs.windmill.dev/docs/advanced/self_host" rel="nofollow">documentation</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-docker-compose" aria-hidden="true" href="#docker-compose"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Docker compose</h3>
<div data-snippet-clipboard-copy-content="curl https://raw.githubusercontent.com/windmill-labs/windmill/main/docker-compose.yml -o docker-compose.yml
curl https://raw.githubusercontent.com/windmill-labs/windmill/main/Caddyfile -o Caddyfile
curl https://raw.githubusercontent.com/windmill-labs/windmill/main/.env -o .env

docker compose up -d --pull always"><pre><code>curl https://raw.githubusercontent.com/windmill-labs/windmill/main/docker-compose.yml -o docker-compose.yml
curl https://raw.githubusercontent.com/windmill-labs/windmill/main/Caddyfile -o Caddyfile
curl https://raw.githubusercontent.com/windmill-labs/windmill/main/.env -o .env

docker compose up -d --pull always
</code></pre></div>
<p dir="auto">Go to <a href="http://localhost" rel="nofollow">http://localhost</a> et voilà :)</p>
<p dir="auto">The default super-admin user is: <a href="mailto:admin@windmill.dev">admin@windmill.dev</a> / changeme</p>
<p dir="auto">From there, you can follow the setup app and creat other users.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-kubernetes-k8s-and-helm-charts" aria-hidden="true" href="#kubernetes-k8s-and-helm-charts"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Kubernetes (k8s) and Helm charts</h3>
<p dir="auto">We publish helm charts at:
<a href="https://github.com/windmill-labs/windmill-helm-charts">https://github.com/windmill-labs/windmill-helm-charts</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-postgres-without-superuser" aria-hidden="true" href="#postgres-without-superuser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Postgres without superuser</h3>
<p dir="auto">If you do not want, or cannot (for instance, in AWS Aurora or Cloud sql) use a
postgres superuser, you can run <code>./init-db-as-superuser.sql</code> to init the
required users for windmill.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-commercial-license" aria-hidden="true" href="#commercial-license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Commercial license</h3>
<p dir="auto">To self-host Windmill, you must respect the terms of the AGPLv3 license which
you do not need to worry about for personal uses. For business uses, you should
be fine if you do not re-expose it in any way Windmill to your users and are
comfortable with AGPLv3.</p>
<p dir="auto">To re-expose any Windmill parts to your users as a feature of your product, or
to build a feature on top of Windmill, to comply with AGPLv3 your product must
be AGPLv3 or you must get a commercial license. Contact us at
<a href="mailto:ruben@windmill.dev">ruben@windmill.dev</a> if you have any doubts.</p>
<p dir="auto">In addition, a commercial license grants you a dedicated engineer to transition
your current infrastructure to Windmill, support with tight SLA, audit logs
export features, SSO, unlimited users creation, advanced permission managing
features such as groups and the ability to create more than one workspace.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-oauth-for-self-hosting" aria-hidden="true" href="#oauth-for-self-hosting"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>OAuth for self-hosting</h3>
<p dir="auto">To get the same oauth integrations as Windmill Cloud, mount <code>oauth.json</code> with
the following format:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;&lt;client&gt;&#34;: {
    &#34;id&#34;: &#34;&lt;CLIENT_ID&gt;&#34;,
    &#34;secret&#34;: &#34;&lt;CLIENT_SECRET&gt;&#34;,
    &#34;allowed_domains&#34;: [&#34;windmill.dev&#34;] //restrict a client OAuth login to some domains
  }
}"><pre>{
  <span>&#34;&lt;client&gt;&#34;</span>: {
    <span>&#34;id&#34;</span>: <span><span>&#34;</span>&lt;CLIENT_ID&gt;<span>&#34;</span></span>,
    <span>&#34;secret&#34;</span>: <span><span>&#34;</span>&lt;CLIENT_SECRET&gt;<span>&#34;</span></span>,
    <span>&#34;allowed_domains&#34;</span>: [<span><span>&#34;</span>windmill.dev<span>&#34;</span></span>] <span>//restrict a client OAuth login to some domains</span>
  }
}</pre></div>
<p dir="auto">and mount it at <code>/usr/src/app/oauth.json</code>.</p>
<p dir="auto">The redirect url for the oauth clients is:
<code>&lt;instance_url&gt;/user/login_callback/&lt;client&gt;</code></p>
<p dir="auto"><a href="https://github.com/windmill-labs/windmill/blob/main/backend/oauth_connect.json">The list of all possible &#34;connect an app&#34; oauth clients</a></p>
<p dir="auto">To add more &#34;connect an app&#34; OAuth clients to the Windmill project, read the
<a href="https://docs.windmill.dev/docs/misc/contributing" rel="nofollow">Contributor&#39;s guide</a>. We
welcome contributions!</p>
<p dir="auto">You may also add your own custom OAuth2 IdP and OAuth2 Resource provider:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;&lt;client&gt;&#34;: {
    &#34;id&#34;: &#34;&lt;CLIENT_ID&gt;&#34;,
    &#34;secret&#34;: &#34;&lt;CLIENT_SECRET&gt;&#34;,
    // To add a new OAuth2 IdP
    &#34;login_config&#34;: {
      &#34;auth_url&#34;: &#34;&lt;auth_endpoint&gt;&#34;,
      &#34;token_url&#34;: &#34;&lt;token_endpoint&gt;&#34;,
      &#34;userinfo_url&#34;: &#34;&lt;userinfo endpoint&gt;&#34;,
      &#34;scopes&#34;: [&#34;scope1&#34;, &#34;scope2&#34;],
      &#34;extra_params&#34;: &#34;&lt;if_needed&gt;&#34;
    },
    // To add a new OAuth2 Resource
    &#34;connect_config&#34;: {
      &#34;auth_url&#34;: &#34;&lt;auth_endpoint&gt;&#34;,
      &#34;token_url&#34;: &#34;&lt;token_endpoint&gt;&#34;,
      &#34;scopes&#34;: [&#34;scope1&#34;, &#34;scope2&#34;],
      &#34;extra_params&#34;: &#34;&lt;if_needed&gt;&#34;
    }
  }
}"><pre>{
  <span>&#34;&lt;client&gt;&#34;</span>: {
    <span>&#34;id&#34;</span>: <span><span>&#34;</span>&lt;CLIENT_ID&gt;<span>&#34;</span></span>,
    <span>&#34;secret&#34;</span>: <span><span>&#34;</span>&lt;CLIENT_SECRET&gt;<span>&#34;</span></span>,
    <span>// To add a new OAuth2 IdP</span>
    <span>&#34;login_config&#34;</span>: {
      <span>&#34;auth_url&#34;</span>: <span><span>&#34;</span>&lt;auth_endpoint&gt;<span>&#34;</span></span>,
      <span>&#34;token_url&#34;</span>: <span><span>&#34;</span>&lt;token_endpoint&gt;<span>&#34;</span></span>,
      <span>&#34;userinfo_url&#34;</span>: <span><span>&#34;</span>&lt;userinfo endpoint&gt;<span>&#34;</span></span>,
      <span>&#34;scopes&#34;</span>: [<span><span>&#34;</span>scope1<span>&#34;</span></span>, <span><span>&#34;</span>scope2<span>&#34;</span></span>],
      <span>&#34;extra_params&#34;</span>: <span><span>&#34;</span>&lt;if_needed&gt;<span>&#34;</span></span>
    },
    <span>// To add a new OAuth2 Resource</span>
    <span>&#34;connect_config&#34;</span>: {
      <span>&#34;auth_url&#34;</span>: <span><span>&#34;</span>&lt;auth_endpoint&gt;<span>&#34;</span></span>,
      <span>&#34;token_url&#34;</span>: <span><span>&#34;</span>&lt;token_endpoint&gt;<span>&#34;</span></span>,
      <span>&#34;scopes&#34;</span>: [<span><span>&#34;</span>scope1<span>&#34;</span></span>, <span><span>&#34;</span>scope2<span>&#34;</span></span>],
      <span>&#34;extra_params&#34;</span>: <span><span>&#34;</span>&lt;if_needed&gt;<span>&#34;</span></span>
    }
  }
}</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-resource-types" aria-hidden="true" href="#resource-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Resource types</h3>
<p dir="auto">You will also want to import all the approved resource types from
<a href="https://hub.windmill.dev" rel="nofollow">WindmillHub</a>. A setup script will prompt you to have
it being synced automatically everyday.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-environment-variables" aria-hidden="true" href="#environment-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Environment Variables</h2>
<table>
<thead>
<tr>
<th>Environment Variable name</th>
<th>Default</th>
<th>Description</th>
<th>Api Server/Worker/All</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATABASE_URL</td>
<td></td>
<td>The Postgres database url.</td>
<td>All</td>
</tr>
<tr>
<td>DISABLE_NSJAIL</td>
<td>true</td>
<td>Disable Nsjail Sandboxing</td>
<td>Worker</td>
</tr>
<tr>
<td>SERVER_BIND_ADDR</td>
<td>0.0.0.0</td>
<td>IP Address on which to bind listening socket</td>
<td>Server</td>
</tr>
<tr>
<td>PORT</td>
<td>8000</td>
<td>Exposed port</td>
<td>Server</td>
</tr>
<tr>
<td>NUM_WORKERS</td>
<td>3</td>
<td>The number of worker per Worker instance (set to 1 on Eks to have 1 pod = 1 worker, set to 0 for an API only instance)</td>
<td>Worker</td>
</tr>
<tr>
<td>DISABLE_SERVER</td>
<td>false</td>
<td>Binary would operate as a worker only instance</td>
<td>Worker</td>
</tr>
<tr>
<td>METRICS_ADDR</td>
<td>None</td>
<td>The socket addr at which to expose Prometheus metrics at the /metrics path. Set to &#34;true&#34; to expose it on port 8001</td>
<td>All</td>
</tr>
<tr>
<td>JSON_FMT</td>
<td>false</td>
<td>Output the logs in json format instead of logfmt</td>
<td>All</td>
</tr>
<tr>
<td>BASE_URL</td>
<td><a href="http://localhost:8000" rel="nofollow">http://localhost:8000</a></td>
<td>The base url that is exposed publicly to access your instance</td>
<td>Server</td>
</tr>
<tr>
<td>BASE_INTERNAL_URL</td>
<td><a href="http://localhost:8000" rel="nofollow">http://localhost:8000</a></td>
<td>The base url that is reachable by your workers to talk to the Servers. This help avoiding going through the external load balancer for VPC-internal requests.</td>
<td>Worker</td>
</tr>
<tr>
<td>TIMEOUT</td>
<td>300</td>
<td>The maximum time of execution of a script. When reached, the job is failed as having timedout.</td>
<td>Worker</td>
</tr>
<tr>
<td>ZOMBIE_JOB_TIMEOUT</td>
<td>30</td>
<td>The timeout after which a job is considered to be zombie if the worker did not send pings about processing the job (every server check for zombie jobs every 30s)</td>
<td>Server</td>
</tr>
<tr>
<td>RESTART_ZOMBIE_JOBS</td>
<td>true</td>
<td>If true then a zombie job is restarted (in-place with the same uuid and some logs), if false the zombie job is failed</td>
<td>Server</td>
</tr>
<tr>
<td>SLEEP_QUEUE</td>
<td>50</td>
<td>The number of ms to sleep in between the last check for new jobs in the DB. It is multiplied by NUM_WORKERS such that in average, for one worker instance, there is one pull every SLEEP_QUEUE ms.</td>
<td>Worker</td>
</tr>
<tr>
<td>MAX_LOG_SIZE</td>
<td>500000</td>
<td>The maximum number of characters a job can emit (log + result)</td>
<td>Worker</td>
</tr>
<tr>
<td>DISABLE_NUSER</td>
<td>false</td>
<td>If Nsjail is enabled, disable the nsjail&#39;s <code>clone_newuser</code> setting</td>
<td>Worker</td>
</tr>
<tr>
<td>KEEP_JOB_DIR</td>
<td>false</td>
<td>Keep the job directory after the job is done. Useful for debugging.</td>
<td>Worker</td>
</tr>
<tr>
<td>LICENSE_KEY (EE only)</td>
<td>None</td>
<td>License key checked at startup for the Enterprise Edition of Windmill</td>
<td>Worker</td>
</tr>
<tr>
<td>S3_CACHE_BUCKET (EE only)</td>
<td>None</td>
<td>The S3 bucket to sync the cache of the workers to</td>
<td>Worker</td>
</tr>
<tr>
<td>TAR_CACHE_RATE (EE only)</td>
<td>100</td>
<td>The rate at which to tar the cache of the workers. 100 means every 100th job in average (uniformly randomly distributed).</td>
<td>Worker</td>
</tr>
<tr>
<td>SLACK_SIGNING_SECRET</td>
<td>None</td>
<td>The signing secret of your Slack app. See <a href="https://api.slack.com/authentication/verifying-requests-from-slack" rel="nofollow">Slack documentation</a></td>
<td>Server</td>
</tr>
<tr>
<td>COOKIE_DOMAIN</td>
<td>None</td>
<td>The domain of the cookie. If not set, the cookie will be set by the browser based on the full origin</td>
<td>Server</td>
</tr>
<tr>
<td>DENO_PATH</td>
<td>/usr/bin/deno</td>
<td>The path to the deno binary.</td>
<td>Worker</td>
</tr>
<tr>
<td>PYTHON_PATH</td>
<td>/usr/local/bin/python3</td>
<td>The path to the python binary.</td>
<td>Worker</td>
</tr>
<tr>
<td>GO_PATH</td>
<td>/usr/bin/go</td>
<td>The path to the go binary.</td>
<td>Worker</td>
</tr>
<tr>
<td>GOPRIVATE</td>
<td></td>
<td>The GOPRIVATE env variable to use private go modules</td>
<td>Worker</td>
</tr>
<tr>
<td>NETRC</td>
<td></td>
<td>The netrc content to use a private go registry</td>
<td>Worker</td>
</tr>
<tr>
<td>PIP_INDEX_URL</td>
<td>None</td>
<td>The index url to pass for pip.</td>
<td>Worker</td>
</tr>
<tr>
<td>PIP_EXTRA_INDEX_URL</td>
<td>None</td>
<td>The extra index url to pass to pip.</td>
<td>Worker</td>
</tr>
<tr>
<td>PIP_TRUSTED_HOST</td>
<td>None</td>
<td>The trusted host to pass to pip.</td>
<td>Worker</td>
</tr>
<tr>
<td>PATH</td>
<td>None</td>
<td>The path environment variable, usually inherited</td>
<td>Worker</td>
</tr>
<tr>
<td>HOME</td>
<td>None</td>
<td>The home directory to use for Go and Bash , usually inherited</td>
<td>Worker</td>
</tr>
<tr>
<td>DATABASE_CONNECTIONS</td>
<td>50 (Server)/3 (Worker)</td>
<td>The max number of connections in the database connection pool</td>
<td>All</td>
</tr>
<tr>
<td>SUPERADMIN_SECRET</td>
<td>None</td>
<td>A token that would let the caller act as a virtual superadmin <a href="mailto:superadmin@windmill.dev">superadmin@windmill.dev</a></td>
<td>Server</td>
</tr>
<tr>
<td>TIMEOUT_WAIT_RESULT</td>
<td>20</td>
<td>The number of seconds to wait before timeout on the &#39;run_wait_result&#39; endpoint</td>
<td>Worker</td>
</tr>
<tr>
<td>QUEUE_LIMIT_WAIT_RESULT</td>
<td>None</td>
<td>The number of max jobs in the queue before rejecting immediately the request in &#39;run_wait_result&#39; endpoint. Takes precedence on the query arg. If none is specified, there are no limit.</td>
<td>Worker</td>
</tr>
<tr>
<td>DENO_AUTH_TOKENS</td>
<td>None</td>
<td>Custom DENO_AUTH_TOKENS to pass to worker to allow the use of private modules</td>
<td>Worker</td>
</tr>
<tr>
<td>DENO_FLAGS</td>
<td>None</td>
<td>Override the flags passed to deno (default --allow-all) to tighten permissions. Minimum permissions needed are &#34;--allow-read=args.json --allow-write=result.json&#34;</td>
<td>Worker</td>
</tr>
<tr>
<td>NPM_CONFIG_REGISTRY</td>
<td>None</td>
<td>Registry to use for NPM dependencies, set if you have a private repository you need to use instead of the default public NPM registry</td>
<td>Worker</td>
</tr>
<tr>
<td>PIP_LOCAL_DEPENDENCIES</td>
<td>None</td>
<td>Specify dependencies that are installed locally and do not need to be solved nor installed again</td>
<td></td>
</tr>
<tr>
<td>ADDITIONAL_PYTHON_PATHS</td>
<td>None</td>
<td>Specify python paths (separated by a :) to be appended to the PYTHONPATH of the python jobs. To be used with PIP_LOCAL_DEPENDENCIES to use python codebases within Windmill</td>
<td>Worker</td>
</tr>
<tr>
<td>INCLUDE_HEADERS</td>
<td>None</td>
<td>Whitelist of headers that are passed to jobs as args (separated by a comma)</td>
<td>Server</td>
</tr>
<tr>
<td>WHITELIST_WORKSPACES</td>
<td>None</td>
<td>Whitelist of workspaces this worker takes job from</td>
<td>Worker</td>
</tr>
<tr>
<td>BLACKLIST_WORKSPACES</td>
<td>None</td>
<td>Blacklist of workspaces this worker takes job from</td>
<td>Worker</td>
</tr>
<tr>
<td>INSTANCE_EVENTS_WEBHOOK</td>
<td>None</td>
<td>Webhook to notify of events such as new user added, signup/invite. Can hook back to windmill to send emails</td>
<td></td>
</tr>
<tr>
<td>GLOBAL_CACHE_INTERVAL</td>
<td>10*60</td>
<td>(Enterprise Edition only) Interval in seconds in between bucket sync of the cache. This interval * 2 is the time at which you&#39;re guaranteed all the worker&#39;s caches are synced together.</td>
<td>Worker</td>
</tr>
<tr>
<td>WORKER_TAGS</td>
<td>&#39;deno,go,python3,bash,flow,hub,dependency&#39;</td>
<td>The worker groups assigned to that workers</td>
<td>Worker</td>
</tr>
<tr>
<td>CUSTOM_TAGS</td>
<td>None</td>
<td>The custom tags assignable to scripts.</td>
<td>Server</td>
</tr>
<tr>
<td>JOB_RETENTION_SECS</td>
<td>60<em>60</em>24*60 //60 days</td>
<td>The time in seconds after which jobs get deleted. Set to 0 or -1 to never delete</td>
<td></td>
</tr>
<tr>
<td>WAIT_RESULT_FAST_POLL_INTERVAL_MS</td>
<td>50</td>
<td>The time in between polling for the run_wait_result endpoints in fast poll mode</td>
<td>Server</td>
</tr>
<tr>
<td>WAIT_RESULT_SLOW_POLL_INTERVAL_MS</td>
<td>200</td>
<td>The time in between polling for the run_wait_result endpoints in fast poll mode</td>
<td>Server</td>
</tr>
<tr>
<td>WAIT_RESULT_FAST_POLL_DURATION_SECS</td>
<td>2</td>
<td>The duration of fast poll mode before switching to slow poll</td>
<td>Server</td>
</tr>
<tr>
<td>EXIT_AFTER_NO_JOB_FOR_SECS</td>
<td>None</td>
<td>Exit worker if no job is received after duration in secs if defined</td>
<td>Worker</td>
</tr>
<tr>
<td>OAUTH_JSON_AS_BASE64</td>
<td>None</td>
<td>Base64 encoded JSON of the OAuth configuration. e.g <code>OAUTH_JSON_AS_BASE64=$(base64 oauth.json | tr -d &#39;\n&#39;)</code> to encode it</td>
<td>Server</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto"><a id="user-content-run-a-local-dev-setup" aria-hidden="true" href="#run-a-local-dev-setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Run a local dev setup</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-only-frontend" aria-hidden="true" href="#only-frontend"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>only Frontend</h3>
<p dir="auto">This will use the backend of <a href="https://app.windmill.dev" rel="nofollow">https://app.windmill.dev</a> but your own frontend
with hot-code reloading.</p>
<ol dir="auto">
<li>Install <a href="https://caddyserver.com" rel="nofollow">caddy</a></li>
<li>Go to <code>frontend/</code>:
<ol dir="auto">
<li><code>npm install</code>, <code>npm run generate-backend-client</code> then <code>npm run dev</code></li>
<li>In another shell <code>sudo caddy run --config CaddyfileRemote</code></li>
</ol>
</li>
<li>Et voilà, windmill should be available at <code>http://localhost/</code></li>
</ol>
<h3 tabindex="-1" dir="auto"><a id="user-content-backend--frontend" aria-hidden="true" href="#backend--frontend"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Backend + Frontend</h3>
<p dir="auto">See the <a href="https://ntietz.com/windmill-labs/windmill/blob/main/frontend/README_DEV.md">./frontend/README_DEV.md</a> file for all
running options.</p>
<ol dir="auto">
<li>Create a Postgres Database for Windmill and create an admin role inside your
Postgres setup. The easiest way to get a working postgres is running
<code>cargo install sqlx-cli &amp;&amp; sqlx migrate run</code>. This will also avoid compile
time issue with sqlx&#39;s <code>query!</code> macro</li>
<li>Install <a href="https://github.com/google/nsjail">nsjail</a> and have it accessible in
your PATH</li>
<li>Install deno and python3, have the bins at <code>/usr/bin/deno</code> and
<code>/usr/local/bin/python3</code></li>
<li>Install <a href="https://caddyserver.com" rel="nofollow">caddy</a></li>
<li>Install the <a href="https://lld.llvm.org/" rel="nofollow">lld linker</a></li>
<li>Go to <code>frontend/</code>:
<ol dir="auto">
<li><code>npm install</code>, <code>npm run generate-backend-client</code> then <code>npm run dev</code></li>
<li>In another shell <code>npm run build</code> otherwise the backend will not find the
<code>frontend/build</code> folder and will crash</li>
<li>In another shell <code>sudo caddy run --config Caddyfile</code></li>
</ol>
</li>
<li>Go to <code>backend/</code>:
<code>DATABASE_URL=&lt;DATABASE_URL_TO_YOUR_WINDMILL_DB&gt; RUST_LOG=info cargo run</code></li>
<li>Et voilà, windmill should be available at <code>http://localhost/</code></li>
</ol>
<h2 tabindex="-1" dir="auto"><a id="user-content-contributors" aria-hidden="true" href="#contributors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributors</h2>
<a href="https://github.com/windmill-labs/windmill/graphs/contributors">
  <img src="https://camo.githubusercontent.com/06538aae8b071f9f3178dd4553a64ab17a0b1c5bbe23f5b6da01255c2eee0df0/68747470733a2f2f636f6e747269622e726f636b732f696d6167653f7265706f3d77696e646d696c6c2d6c6162732f77696e646d696c6c" data-canonical-src="https://contrib.rocks/image?repo=windmill-labs/windmill"/>
</a>
<h2 tabindex="-1" dir="auto"><a id="user-content-copyright" aria-hidden="true" href="#copyright"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Copyright</h2>
<p dir="auto">Windmill Labs, Inc 2023</p>
</article>
          </div></div>
  </body>
</html>
