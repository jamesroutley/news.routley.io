<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://openinverter.org/wiki/ZombieVerter_VCU">Original</a>
    <h1>Zombieverter: Open source VCU for reusing salvage EV components</h1>
    
    <div id="readability-page-1" class="page"><div id="mw-content-text" lang="en" dir="ltr"><div><div><div><p><a href="https://openinverter.org/wiki/File:Zombie_model.png"><img alt="" src="https://openinverter.org/wiki/images/thumb/4/4d/Zombie_model.png/589px-Zombie_model.png" decoding="async" width="589" height="614" srcset="/wiki/images/4/4d/Zombie_model.png 1.5x"/></a></p></div></div>


<h4><span id="An_open-source_EV_conversion_VCU_.28vehicle_control_unit.29_for_controlling_salvaged_EV_components.21"></span><span id="An_open-source_EV_conversion_VCU_(vehicle_control_unit)_for_controlling_salvaged_EV_components!">An open-source EV conversion VCU (vehicle control unit) for controlling salvaged EV components!</span></h4>
<ul><li><b><a rel="nofollow" href="https://openinverter.org/forum/viewtopic.php?f=3&amp;t=1277">Development thread</a></b></li>
<li><a rel="nofollow" href="https://github.com/damienmaguire/Stm32-vcu/releases"><b>latest stable software release</b></a></li>
<li><b><a rel="nofollow" href="https://github.com/damienmaguire/Stm32-vcu">GitHub repo</a></b></li>
<li><b><a rel="nofollow" href="https://www.evbmw.com/index.php/evbmw-webshop/vcu-boards/zombieverter-vcu-built">fully built VCU boards</a></b></li>
<li><b><a rel="nofollow" href="https://www.evbmw.com/index.php/evbmw-webshop/vcu-boards/zombie-vcu">partially-built VCU boards</a></b></li></ul>
<h2><span id="Introduction">Introduction</span></h2>
<p>Modern EV conversion projects often look to reuse salvaged parts from wrecked vehicles, such as the motors, batteries and chargers. 
</p><p>The issue is that each of these components and manufacturers, use different methods of control and communication.  
</p><p>Developing controllers for these devices is complex, and time consuming and often require very dedicated communication protocols. Instead of making custom boards for every part that&#39;s been decoded, why not just make a general purpose VCU (vehicle control unit) with a verity of different types of inputs and outputs? 
</p>
<h4><span id="Introducing:_the_.22ZombieVerter.22_VCU_-_a_general_purpose_EV_conversion_VCU."></span><span id="Introducing:_the_&#34;ZombieVerter&#34;_VCU_-_a_general_purpose_EV_conversion_VCU."><b>Introducing: the &#34;ZombieVerter&#34; VCU <i>- a general purpose EV conversion VCU.</i></b></span></h4>
<p>With a large array of inputs/outputs, control logic, and a web interface for configuration and data logging. The ZombieVerter is a powerful, flexible and customizable VCU well suited for EV conversions.    
</p><p>It&#39;s also an open source project!    
</p>
<h4><span id="The_ZombieVerter_supports_popular_salvaged_EV_parts_such_as:">The ZombieVerter supports popular salvaged EV parts such as:</span></h4>
<ul><li>Nissan Leaf components</li>
<li>Mitsubishi Outlander hybrid components</li>
<li>Toyota and Lexus hybrid components</li>
<li>CHAdeMO and CCS DC fast charging</li>
<li>and more!</li></ul>
<h4><span id="The_ZombieVerter_features_the_following:">The ZombieVerter features the following:</span></h4>
<h4><span id="Hardware:">Hardware:</span></h4>
<ul><li>On-board WiFi</li>
<li>3x high side PWM drivers</li>
<li>5x low side outputs</li>
<li>3x input pins (pull to ground only)</li>
<li>3x CANbus interfaces</li>
<li>LIN bus</li>
<li>sync serial interface</li>
<li>OBD-II interface</li>
<li>etc.</li></ul>
<h4><span id="Software:">Software:</span></h4>
<ul><li>Web based user interface</li>
<li>Contactor control</li>
<li>Charger control</li>
<li>Charge timer</li>
<li>Motor (inverter) control</li>
<li>Heater control</li>
<li>Water pump control</li>
<li>Coolant fan control</li>
<li>Throttle mapping</li>
<li>Motor regen</li>
<li>Cruise control (?)</li>
<li>BMS limits</li>
<li>IVT shunt initialization</li>
<li>Data logging and graphing</li>
<li>etc.</li></ul>
<h3><span id="Currently_supported_OEM_hardware:">Currently supported OEM hardware:</span></h3>
<p>*This list is always growing and changing, and not everything is verified working 
</p>
<h4><span id="Motors.2FDrive_units:"></span><span id="Motors/Drive_units:">Motors/Drive units:</span></h4>
<ul><li><a href="https://openinverter.org/wiki/Nissan_leaf_motors" title="Nissan leaf motors">Nissan Leaf Gen1/2/3 inverter/motor via CAN</a></li>
<li><a href="https://openinverter.org/wiki/Lexus_GS450h_Drivetrain" title="Lexus GS450h Drivetrain">Lexus GS450h inverter / L110 gearbox via sync serial</a></li>
<li>Lexus GS300h inverter / L210 gearbox via sync serial</li>
<li>Toyota Prius/Yaris/Auris Gen 3 inverters via sync serial</li></ul>
<ul><li><a href="https://openinverter.org/wiki/Category:Mitsubishi" title="Category:Mitsubishi">Mitsubishi Outlander motors/inverter</a></li>
<li>openinverter controler</li></ul>
<h5><span id="Chargers.2FDCDCs:"></span><span id="Chargers/DCDCs:">Chargers/DCDCs:</span></h5>
<ul><li><a href="https://openinverter.org/wiki/Nissan_leaf_pdm" title="Nissan leaf pdm">Nissan Leaf PDM (Charger and DCDC)</a> Gen1,2 &amp; 3</li>
<li><a href="https://openinverter.org/wiki/Mitsubishi_Outlander_DCDC_OBC" title="Mitsubishi Outlander DCDC OBC">Mitsubishi Outlander OBC (charger/DCDC)</a></li>
<li><a href="https://openinverter.org/wiki/Tesla_Model_S/X_DC/DC_Converter" title="Tesla Model S/X DC/DC Converter">tesla model S dcdc</a></li>
<li><a href="https://openinverter.org/wiki/BMW_I3_Fast_Charging_LIM_Module" title="BMW I3 Fast Charging LIM Module">CCS DC fast charge via BMW i3 LIM</a> - type 2 + type 1</li>
<li><a href="https://openinverter.org/wiki/Chademo_with_Zombieverter" title="Chademo with Zombieverter">Chademo DC fast charging</a></li>
<li><a href="https://openinverter.org/wiki/Foccci" title="Foccci">Foccci CCS faster charger controller</a></li>
<li><a rel="nofollow" href="https://citini.com/product/evs-charge-port-controller/">EVS-Charge Port Controller</a></li>
<li>Elcon charger</li></ul>
<h5><span id="Heaters:">Heaters:</span></h5>
<ul><li><a href="https://openinverter.org/wiki/Volkswagen_Heater" title="Volkswagen Heater">VAG/VW PTC water heater via LIN bus</a></li>
<li><a href="https://openinverter.org/wiki/VAG_PTC_Air_Heater" title="VAG PTC Air Heater">VAG/VW cabin heater via LIN bus</a></li></ul>
<ul><li><a href="https://openinverter.org/wiki/Chevrolet_Volt_Water_Heater" title="Chevrolet Volt Water Heater">Opel Ampera / Chevy Volt 6.5kW cabin heater</a></li>
<li><a href="https://openinverter.org/wiki/Mitsubishi_Outlander_Water_Heater" title="Mitsubishi Outlander Water Heater">Mitsubishi outlander hybrid water heater</a></li></ul>
<h5><span id="BMS:">BMS:</span></h5>
<ul><li><a href="https://openinverter.org/wiki/Nissan_Leaf_BMS" title="Nissan Leaf BMS">Nissan leaf BMS</a>/battery pack</li>
<li><a href="https://openinverter.org/wiki/Renault_Kangoo_36" title="Renault Kangoo 36">kangoo bms</a></li>
<li>orion bms</li>
<li>simp bms</li>
<li><a href="https://openinverter.org/wiki/Isabellenh%C3%BCtte_Heusler" title="Isabellenhütte Heusler">ISA shunt</a></li>
<li><a href="https://openinverter.org/wiki/BMW_Hybrid_Battery_Pack#S-Box" title="BMW Hybrid Battery Pack">BMW SBOX</a></li>
<li>VW EBOX</li></ul>
<h5><span id="Cars.28for_canbus_control_over_dash.2C_etc.29:"></span><span id="Cars(for_canbus_control_over_dash,_etc):">Cars(for canbus control over dash, etc):</span></h5>
<ul><li>1998-2005 BMW 3-series (E46) CAN support</li>
<li>1996-2003 BMW 5-series (E39) CAN support</li>
<li>2001-2008 BMW 7-series (E65) CAN Support</li>
<li>BMW E9x CAN support</li>
<li>Mid-2000s VAG CAN support</li>
<li>Subaru CAN support</li></ul>
<h2><span id="Assembling_the_VCU">Assembling the VCU</span></h2>
<p>Looking to build a ZombieVerter VCU yourself or the kit is missing hardware? 
</p>
<ul><li><a href="https://openinverter.org/wiki/Zombiverter_hardware" title="Zombiverter hardware">Zombiverter hardware</a> page for additional build instructions</li></ul>
<ul><li><a rel="nofollow" href="https://github.com/damienmaguire/Stm32-vcu">Github with PCB, schematic, pin-outs, etc</a></li></ul>
<p><i>The enclosure and header are required if you did not order a <a rel="nofollow" href="https://www.evbmw.com/index.php/evbmw-webshop/vcu-boards/zombieverter-vcu-built"><b>fully built board</b></a></i>
</p><p>VCU boards from the webshop, <i><b>come pre-programmed</b></i> and <b>do not require any additional steps taken to work</b>.
</p><p>For programming a blank board see: <a href="https://openinverter.org/wiki/Zombieverter_programing" title="Zombieverter programing">ZombieVerter programming</a>
</p>
<h3><span id="The_enclosure_kit_options:">The enclosure kit options:</span></h3>
<ol><li><a rel="nofollow" href="https://www.aliexpress.com/item/32857771975.html?spm=a2g0s.9042311.0.0.39f24c4dWOmGPE">Enclosure Kit with Header, connector and pins</a><sup id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup></li>
<li><a rel="nofollow" href="https://www.aliexpress.com/item/32822692950.html">Connector and pins</a><sup id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup></li>
<li><a rel="nofollow" href="https://www.aliexpress.com/item/1005003512474442.html">Pre-wired connector</a>  <sup id="cite_ref-3"><a href="#cite_note-3">[3]</a></sup></li></ol>
<p>The original connectors are from Aptiv (Delphi):
</p>
<ul><li><a rel="nofollow" href="https://www.aptiv.com/en/solutions/connection-systems/catalog/item?id=13669859_en">Aptiv 56-pin connector</a></li>
<li><a rel="nofollow" href="https://www.aptiv.com/en/solutions/connection-systems/catalog/item?id=33511394_en">Aptiv 56-pin header</a></li>
<li><a rel="nofollow" href="https://www.tti.com/content/ttiinc/en/apps/part-detail.html?partsNumber=210S048&amp;mfgShortname=FCA&amp;productId=161404611">Removal tool for connector terminals: Manufacturer: Aptiv (formerly Delphi)</a>  Part Number: 210S048</li></ul>
<h3><span id="Videos_on_assembly.2C_powering_up.2C_updating.2C_etc:"></span><span id="Videos_on_assembly,_powering_up,_updating,_etc:">Videos on assembly, powering up, updating, etc:</span></h3>
<p><a rel="nofollow" href="https://www.youtube.com/watch?v=geZuIbGHh30&amp;list=PLh-aHjjWGgLVCsAqaCL6_jmn_QqhVlRiG">https://www.youtube.com/watch?v=geZuIbGHh30&amp;list=PLh-aHjjWGgLVCsAqaCL6_jmn_QqhVlRiG</a>
</p><p><a rel="nofollow" href="https://www.youtube.com/watch?v=_JRa_uFyVkY&amp;list=PLh-aHjjWGgLUWaetAmShkv6gmvk7vLaHd">https://www.youtube.com/watch?v=_JRa_uFyVkY&amp;list=PLh-aHjjWGgLUWaetAmShkv6gmvk7vLaHd</a>
</p>
<h2><span id="Wiring">Wiring</span></h2>
<div><div><p><a href="https://openinverter.org/wiki/File:ZombieVerter_VCU_V1_cable_side_pinout2.jpg"><img alt="" src="https://openinverter.org/wiki/images/thumb/7/75/ZombieVerter_VCU_V1_cable_side_pinout2.jpg/513px-ZombieVerter_VCU_V1_cable_side_pinout2.jpg" decoding="async" width="513" height="363" srcset="/wiki/images/thumb/7/75/ZombieVerter_VCU_V1_cable_side_pinout2.jpg/770px-ZombieVerter_VCU_V1_cable_side_pinout2.jpg 1.5x, /wiki/images/thumb/7/75/ZombieVerter_VCU_V1_cable_side_pinout2.jpg/1026px-ZombieVerter_VCU_V1_cable_side_pinout2.jpg 2x"/></a></p></div></div><p>Each device requires different wiring setups, settings and power requirements. 
</p><p>*cross referencing OEM wiring diagrams is highly recommended 
</p><p><b>Wiring the ZombieVerter with:</b> 
</p>
<ul><li><a href="https://openinverter.org/wiki/GS450H_with_zombieverter" title="GS450H with zombieverter">GS450H with ZombieVerter</a></li>
<li><a href="https://openinverter.org/wiki/Leaf_stack_with_zombiverter" title="Leaf stack with zombiverter">Leaf stack with ZombiVerter</a></li>
<li><a href="https://openinverter.org/wiki/Tesla_SDU_with_Zombieverter" title="Tesla SDU with Zombieverter">Tesla SDU with ZombieVerter</a></li>
<li><a href="https://openinverter.org/wiki/Chademo_with_Zombieverter" title="Chademo with Zombieverter">Chademo with Zombieverter</a></li></ul>
<h3><span id="Power_wiring">Power wiring</span></h3>
<p>The ZombieVerter requires a permanent 12V supply. This is so it can manage charging, timers, and monitor systems when the car is at rest.  
</p><p>The average power draw, at idle, is 150 mA. 
</p>
<ul><li>Pin 55 to 12V- ground</li>
<li>Pin 56 to 12V+ positive</li></ul>
<p>The ZombieVerter controls power/&#34;ignition&#34; signals to other devices (inverters, chargers, and DCDC converters), powering those devices when required. This is done by triggering an external 12V relay. <b><i>ZombieVerter controls the external relay using low-side switching</i>, meaning that it pulls the ground pin of the relay to ground.</b>
</p>
<ul><li><div><div><p><a href="https://openinverter.org/wiki/File:Gernice-zombie.png"><img alt="" src="https://openinverter.org/wiki/images/thumb/8/81/Gernice-zombie.png/446px-Gernice-zombie.png" decoding="async" width="446" height="583" srcset="/wiki/images/thumb/8/81/Gernice-zombie.png/670px-Gernice-zombie.png 1.5x, /wiki/images/thumb/8/81/Gernice-zombie.png/893px-Gernice-zombie.png 2x"/></a></p><div><p>general zombie and battery box wiring</p></div></div></div>Pin 32 to ground pin on a 12V relay</li>
<li>Relay positive pin to 12V+</li>
<li>One of the relays switch pin to 12V+</li></ul>
<p>This effectively provides a switched 12V supply, controlled by the ZombieVerter.  
</p><p>Used to switch &#34;enable&#34; mode to devices via: 
</p>
<ul><li>Leaf inverter enable pin</li>
<li>Leaf PDM enable pin</li>
<li>Mitsubisihi OBC enable pin</li></ul>
<h3><span id="Contactor_wiring">Contactor wiring</span></h3>
<p>The Zombieveter manages the Negative, Positive and PreCharge contactors in an EV conversion.
</p><p>This is done based off a series of voltage measurements (UDC), this voltage value (UDC) can be supplied from a variety of sources:
</p>
<ul><li>ISA IVT shunt</li>
<li>Nissan leaf inverter</li>
<li>BMW S-BOX</li>
<li>etc.</li></ul>
<p><i>Without a proper UDC measurement, the ZombieVerter <b>will fail precharge and never go into run mode.</b></i>
</p><p>The positive leads from the contactors need to be connected to 12V+ and the ground leads to:
</p>
<ul><li>Pin 31 for the negative contactor</li>
<li>Pin 33 for the positive contactor</li>
<li>Pin 34 for the pre-charge contactor</li></ul>
<h3><span id="Throttle_pedal_wiring">Throttle pedal wiring</span></h3>
<p>The ZombieVerter supports dual-channel throttle. This redundancy is for safety in case one channel fails or drops out. It&#39;s highly recommended to use dual-channel throttle. Single-channel is an option.
</p><p>Connect the following to the ZombieVerter pins:
</p>
<ul><li>Pin 45 to throttle grounds</li>
<li>Pin 46 to throttle channel 2</li>
<li>Pin 47 to throttle channel 1</li>
<li>Pin 48 to throttle positives</li></ul>
<h3><span id="Start.2C_Run.2C_and_Direction_wiring"></span><span id="Start,_Run,_and_Direction_wiring">Start, Run, and Direction wiring</span></h3>
<p>The ZombieVerter requires 2 inputs to get into &#34;drive&#34; mode. <b>These pins need to be <i>pulled high</i> (connected to 12V +)</b> 
</p>
<ul><li>Pin 15 to &#34;on&#34; switched input (key switched to &#34;on&#34;)</li>
<li>Pin 52 to &#34;start&#34; momentary input  (momentary key switched &#34;ignition&#34;)</li></ul>
<h4><span id="Forward_and_Reverse">Forward and Reverse</span></h4>
<p>These pins need to be <i>pulled high</i> (connected to 12V +) 
</p>
<ul><li>Pin 53 reverse</li>
<li>Pin 54 forward</li></ul>
<h3><span id="Input.2Foutput_pins"></span><span id="Input/output_pins">Input/output pins</span></h3>
<p>The ZombieVerter has a number of selectable input/output pins that can be used for a number of functions. These pins are:
</p><p><u>Low side Outputs.</u>
</p>
<ul><li>GP Out 3</li>
<li>GP Out 2</li>
<li>Neg Contactor switch/GP Out 1</li>
<li>Trans SL1- (If not using the GS450H)</li>
<li>Trans SL2- (If not using the GS450H)</li></ul>
<p><b>*Low side output connect to ground when activated.</b> 
</p><p>The low side outputs in Zombie are ideal for switching relays, such as for coolant pumps.
</p><p><u>High side PWM.</u>
</p>
<ul><li>PWM 3</li>
<li>PWM 2</li>
<li>PWM 1</li>
<li>Pump PWM - Limited to GS450 Oil pump pwm or tacho pwm output</li></ul>
<p>These are high side 12V outputs, usually for controlling gauges or auxiliary items than need a pwm signals. 
</p><p><b>*not suitable for controlling relays.</b>
</p><p><u>Ground Input pins</u>
</p><p>These pins pull down to ground only. <b>Do not connect any voltage to these pins.</b>
</p><p>PB1
</p><p>PB2
</p><p>PB3
</p>
<h3><span id="Pin_functions:">Pin functions:</span></h3>
<p><i>Note: While the web interface will allow you to select input pins or output pins, some will not actually work.</i> 
</p><p><i>example: a input switch wired but set to negContactor</i>
</p>
<table>
<caption>
</caption>
<tbody><tr>
<th>Pin
</th>
<th>IN/OUT/PWM
</th>
<th>Function
</th></tr>
<tr>
<td>ChaDemoAIw
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when Chademo charger handshake initiates
</td></tr>
<tr>
<td>OBCEnable
</td>
<td><b>OUTPUT</b>
</td>
<td>activates as part of the ExtCharger module
</td></tr>
<tr>
<td>HeaterEnable
</td>
<td><b>OUTPUT</b>
</td>
<td>activates only in run mode and when coolant pump is on*
</td></tr>
<tr>
<td>RunIndication
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when zombie is in run mode
</td></tr>
<tr>
<td>WarnIndication
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when a error occurs with the ZombieVerter
</td></tr>
<tr>
<td>CoolantPump
</td>
<td><b>OUTPUT</b>
</td>
<td>activates during precharge, usually used for coolant pumps
</td></tr>
<tr>
<td>NegContactor
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when the negative contactor needs to be closed. ie precharge, run, charge mode, etc
</td></tr>
<tr>
<td>BrakeLight
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when a set brake light on threshold value is met
</td></tr>
<tr>
<td>ReverseLight
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when reverse direction is selected
</td></tr>
<tr>
<td>CoolingFan
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when FanTemp setpoint is reached
</td></tr>
<tr>
<td>HVActive
</td>
<td><b>OUTPUT</b>
</td>
<td>activates when contactors are closed and VCU is in run or charge mode
</td></tr>
<tr>
<td>BrakeVacPump
</td>
<td><b>DIGITAL OUTPUT</b>
</td>
<td>activates when BrakeVacSensor threshold value is met
</td></tr>
<tr>
<td>CpSpoof
</td>
<td><b>PWM OUTPUT</b>
</td>
<td>used to spoof CP signal to OBC when using a charging interface such as FOCCCI or I3LIM
</td></tr>
<tr>
<td>GS450Hpump
</td>
<td><b>PWM OUTPUT</b>
</td>
<td>used to run GS450H oil pump
</td></tr>
<tr>
<td>HeatReq
</td>
<td><b>DIGITAL INPUT</b>
</td>
<td>
</td></tr>
<tr>
<td>HVRequest
</td>
<td><b>DIGITAL INPUT</b>
</td>
<td>NOT FUNCTIONING
</td></tr>
<tr>
<td>DCFCRequest
</td>
<td><b>DIGITAL INPUT</b>
</td>
<td>Chademo Charge Interface enable contactors to charge
</td></tr>
<tr>
<td>ProxPilot
</td>
<td><b>ANALOGUE INPUT</b>
</td>
<td>detects when charge cable is plugged in
</td></tr>
<tr>
<td>BrakeVacSensor
</td>
<td><b>ANALOGUE INPUT</b>
</td>
<td>vacuum sensor input, use for triggering BrakeVacPump <b>DIGITAL OUTPUT</b>
</td></tr>
<tr>
<td>PWMTim3
</td>
<td>
</td>
<td>
</td></tr></tbody></table>
<h4><span id="Proximity_Pilot">Proximity Pilot</span></h4>
<p>This analogue input used to detect a charging cable is plugged in.
</p>
<div><div><p><a href="https://openinverter.org/wiki/File:ZombiePP.png"><img alt="ZombiePP.png" src="https://openinverter.org/wiki/images/thumb/f/ff/ZombiePP.png/300px-ZombiePP.png" decoding="async" width="300" height="153" srcset="/wiki/images/thumb/f/ff/ZombiePP.png/450px-ZombiePP.png 1.5x, /wiki/images/thumb/f/ff/ZombiePP.png/600px-ZombiePP.png 2x"/></a></p></div></div>
<p>A resistor to the 5v needs to be connected to the analogue in pin, 330 ohms in the spec, and R5 needs to be another resistor between analogue in pin and ground. Type 1 connectors should be a 2.7k ohm resistor and type 2 should be 4.7k ohm. Note the charging port may already have this resistor installed.
</p><p>Open up the Zombie UI and choose ProxPilot for the function of the analogue in pin. Then start plotting PPVal and then plug in, you can then use this to select your PPThreshold. Bare in mind the resistance will vary on the cable plugged in depending on the Amps it can supply.
</p>
<h2><span id="Initial_start-up_and_testing">Initial start-up and testing</span></h2>
<h3><span id="Powering_up_and_connecting_to_the_web_interface">Powering up and connecting to the web interface</span></h3>
<h4><span id="The_following_is_required"><b>The following is required</b></span></h4>
<ol><li>A fully built ZombieVerter VCU</li>
<li>Two wires for power</li>
<li>12V power supply</li>
<li>Computer/tablet for accessing the web interface</li></ol>
<p><b>How to access the web interface</b>
</p>
<ol><li>Provide stable 12V power to pins 55, 56 on the ZombieVerter</li>
<li>The on-board LED light &#34;acty&#34; should be now flashing</li>
<li>Using your computer, connect to the ZombieVerters WIFI access point.  <b>SSID: &#34;inverter&#34; or &#34;zom_vcu&#34;</b></li>
<li><b>Password is: inverter123</b></li>
<li>In a web browser navigate to: <b>192.168.4.1</b></li>
<li>The openinverter web interface should now load!</li></ol>
<p><b>NOTE:</b> Recent units have a new WiFi module that isn&#39;t automatically assigning an IP via DHCP. See <a rel="nofollow" href="https://openinverter.org/forum/viewtopic.php?f=5&amp;t=2001">this thread</a> for details, and if you can help resolve the issue. Until then, you need to manually assign an IP of 192.168.4.2 (anything other than 192.168.4.1 on the 192.168.4.0/24 subnet) to your device.
</p>
<h3><span id="Configuration">Configuration</span></h3>
<p>*work in progress*
</p><p><a href="https://openinverter.org/wiki/Zombieverter_Parameters_and_Spot_Values" title="Zombieverter Parameters and Spot Values">full list and overview of ZombieVerter Parameters and Spot Values</a>
</p>
<h4><span id="Basic_parameters_and_spot_values">Basic parameters and spot values</span></h4>
<h4><span id="Throttle">Throttle</span></h4>
<p>You should see values <b>pot</b> change as the pedal is pressed.  
</p>
<ul><li><b>potmin</b> should be set just above where your off-throttle position is</li>
<li><b>potmax</b> just below the value seen at maximum travel</li>
<li>Same for <b>pot2min</b> and <b>pot2max</b></li></ul>
<p>The resulting in a  0-100 <b>potnom</b> value.
</p>
<ul><li><b>throtmin</b> is the minimum (most negative) allowed <i><b>potnom</b></i> at all times</li>
<li><b>throtmax</b> is the maximum (most positive) allowed <i><b>potnom</b></i> request in forward</li>
<li><b>throtramp</b> is how much <b>potnom</b> ramps up with the pedal pushed (<b>potnom</b> change per %/10ms)</li>
<li><b>throtramprpm</b> stops applying <b>throtramp</b> above a set motor rpm</li>
<li><b>revlim</b> is a rev limiter</li></ul>
<h4><span id="Contactors">Contactors</span></h4>
<p>A set HV battery voltage value is required to run the precharge and main contactors. 
</p><p>The voltage is measured using the UDC value. which is supplied from the <b>shuntType:</b>
</p>
<ul><li><b>ISA</b></li>
<li><b>SBOX</b></li>
<li><b>VAG</b></li>
<li><b>LEAF</b></li></ul>
<p>these voltage(UDC) levels are set with the following parameters:
</p>
<ul><li><b>udcmin</b> is the minimum battery voltage derate</li>
<li><b>udclim</b> is maximum battery voltage derate</li>
<li><b>udcsw</b> is Voltage point at which precharge is considered finished, and the main contactor will close.</li></ul>
<p><b>Forward/Reverse</b>
</p><p>input options:
</p>
<ul><li><b>switch</b></li>
<li><b>button</b></li>
<li><b>switchReversed</b></li>
<li><b>buttomReversed</b></li></ul>
<h4><span id="Inverter">Inverter</span></h4>
<p><i>work in progress</i>
</p>
<h4><span id="Charger">Charger</span></h4>
<p><i>work in progress</i>
</p>
<h4><span id="Input_Values">Input Values</span></h4>
<p>Check that din_break does not show &#34;on&#34;, it must be off to allow potnom to be shown.
</p>
<hr/>
<ul><li>Apply the <b>Start</b> 12V signal for a short time.  The pre-charge relay should turn on, and the voltage available at the inverter and the U1 input of the ISA shunt should quickly rise. If the <b>udc</b> reading goes above <b>udcsw</b> within 5 seconds then the main contactor(s) should close. If all is well, <b>invstat</b> should now be &#34;on&#34;, <b>opmode</b> should be &#34;run&#34;.</li></ul>
<p><i>If you do not see a good value at udc, it may be that your external shunt is not connected properly or is not initialised.</i>
</p><p><i>If you do not see a good value at Invudc, it may be that the inverter is not powered, or the communication signals are not correctly wired.</i>
</p><p><i>if the status stays at &#34;PRECHARGE&#34; then you possibly didn&#39;t hold the start signal on for long enough!</i>
</p>
<h2><span id="Software">Software</span></h2>
<p>VCU boards from the webshop, <i><b>come pre-programed</b></i> and <b>do not require any additional septs taken to work</b>.
</p><p>For programming a blank board see: <a href="https://openinverter.org/wiki/Zombiverter_programing" title="Zombiverter programing">ZombiVerter programing</a>
</p><p>For re-flashing a bricked board refer to the Troubleshooting section below.
</p>
<h4><span id="Initializing_an_ISA_Shunt:">Initializing an ISA Shunt:</span></h4>
<ol><li>Wire the ISA shunt to 12V+ and canbus input.</li>
<li>Under shunt can in the web interface, select the canbus the shunt is connected to</li>
<li>Hit save parameters to flash.</li>
<li>Under Comms in the web interface, select ISAMode option. By default its set to &#34;Normal&#34; (Off)</li>
<li>Select &#34;Init&#34;</li>
<li>Hit save parameters to flash</li>
<li>Power cycle the vcu and shunt at same time (they should be on same 12V feed anyway).</li>
<li>The shunt will initialize.</li>
<li>Select ISAMode &#34;normal&#34;</li>
<li>Save to flash again</li>
<li>Reboot the VCU</li></ol>
<p>The shunt should now be up and running.
</p><p>If the shunt doesn&#39;t initialize correctly, separate the shunt and VCU power supply, and power cycle the VCU two or three seconds after the shunt power is cycled. This has fixed an initialize issue for a number of ISA shunts.
</p>
<h2><span id="Parameters">Parameters</span></h2>
<p><a href="https://openinverter.org/wiki/Zombieverter_Parameters_and_Spot_Values" title="Zombieverter Parameters and Spot Values">page with ZombieVerter parameters and their value ranges, ZV pinmap etc.</a>
</p><p>Source: <a rel="nofollow" href="https://www.youtube.com/watch?v=wjlucUWX_lc">https://www.youtube.com/watch?v=wjlucUWX_lc</a>
</p>
<h2><span id="Troubleshooting">Troubleshooting</span></h2>
<h3><span id="Serial_Connection">Serial Connection</span></h3>
<p>If you&#39;re having trouble connecting using the serial interface, note that the parameters are 115200 8-N-2, which is different from the conventional 115200 8-N-1.
</p>
<h3><span id="Recovering_the_ZombieVerter_from_a_failed_update">Recovering the ZombieVerter from a failed update</span></h3>
<p>If the ZombieVerter fails in the middle of a software update and the Web User Interface is reporting &#34;firmware: null&#34; it&#39;s possible you&#39;ll need to re-flash the firmware, and bootloader via an STLink.
</p><p>I used a cheap STLink v2 clone without issue but it seems there is a mix of experiences with them.
</p>
<ol><li>Firstly, download the bootloader from <a rel="nofollow" href="https://github.com/jsphuebner/tumanako-inverter-fw-bootloader/releases">here</a> and latest ZombieVerter firmware from <a rel="nofollow" href="https://github.com/damienmaguire/Stm32-vcu/releases/">here</a> as .hex files. This ensures you don&#39;t need to know the address of the file and avoids user error when flashing via STLink</li>
<li>Download STMCubeProgrammer from <a rel="nofollow" href="https://www.st.com/en/development-tools/stm32cubeprog.html#get-software">here</a> (other STM flashing softwares are available but the following instructions are based on what has worked for me).</li>
<li>Upgrade the firmware on your STLink dongle using STMCubeProgrammer. I&#39;m not sure if this is 100% necessary but seems prudent.</li>
<li>Connect the Clock (SWclk), Gnd and Data (SWDio) of your STLink to the ZombieVerter test points. On the ZombieVerter Board, they are labelled C, G, D.</li>
<li>Connect 12V and Gnd to the ZombieVerter main power pins and ensure your STMCubeprogrammer is able to connect to it. I also disconnected the wifi board just incase.</li>
<li>Perform a &#34;full chip erase&#34;, then reflash the latest bootloader and firmware hex files.</li>
<li>Remove your STLink from the ZombieVerter, connect the wifi board and check connectivity.</li>
<li>Begin ZombieVerter-ing.</li></ol>
<h3><span id="ESP32_CanBus_Web_Interface">ESP32 CanBus Web Interface</span></h3>
<p>If the CanBus Web Interface is used it must be noted that the Node ID is hard coded to 3 (note Foccci default is 22)
</p>
<h2><span id="References">References</span></h2>

<!-- 
NewPP limit report
Cached time: 20250509131820
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
[SMW] In‐text annotation parser time: 0 seconds
CPU time usage: 0.112 seconds
Real time usage: 0.140 seconds
Preprocessor visited node count: 208/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1847/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wiki2-oo:pcache:idhash:397-0!canonical and timestamp 20250509131820 and revision id 5716.
 -->
</div>
</div></div>
  </body>
</html>
