<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.johndcook.com/blog/2025/11/29/zkp-composite/">Original</a>
    <h1>Zero knowlege proof of compositeness</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p>A zero knowledge proof (ZKP) answers a question without revealing anything more than answer. For example, a digital signature proves your possession of a private key without revealing that key.</p>
<p>Here’s another example, one that’s more concrete than a digital signature. Suppose you have a deck of 52 cards, 13 of each of spades, hearts, diamonds, and clubs. If I draw a spade from the deck, I can prove that I drew a spade without showing which card I drew. If I show you that all the hearts, diamonds, and clubs are still in the deck, then you know that the missing card must be a spade.</p>
<h2>Composite numbers</h2>
<p>You can think of Fermat’s primality test as a zero knowledge proof. For example, I can convince you that the following number is composite without telling you what its factors are.</p>
<p><em>n</em> = 244948974278317817239218684105179099697841253232749877148554952030873515325678914498692765804485233435199358326742674280590888061039570247306980857239550402418179621896817000856571932268313970451989041</p>
<p>Fermat’s little theorem says that if <em>n</em> is a prime and <em>b</em> is not a multiple of <em>n</em>, then</p>
<p><em>b</em><sup><em>n</em>−1</sup> = 1 (mod <em>n</em>).</p>
<p>A number <em>b</em> such that <em>b</em><sup><em>n</em>−1</sup> ≠ 1 (mod <em>n</em>) is a proof that <em>n</em> is not prime, i.e. <em>n</em> is composite. So, for example, <em>b</em> = 2 is a proof that <em>n</em> above is composite. This can be verified very quickly using Python:</p>
<pre>    &gt;&gt;&gt; pow(2, n-1, n)
    10282 ... 4299
</pre>
<p>I tried the smallest possible base [1] and it worked. In general you may have to try a few bases. And for a few rare numbers (Carmichael numbers) you won’t be able to find a base. But if you do find a base <em>b</em> such that <em>b</em><sup><em>n</em>−1</sup> is not congruent to 1 mod <em>n</em>, you know with <strong>certainty</strong> that <em>b</em> is composite.</p>
<h2>Prime numbers</h2>
<p>The converse of Fermat’s little theorem is false. It can be used to prove a number is <em>not</em> prime, but it cannot prove that a number <em>is</em> prime. But it can be used to show that a number is <strong>probably</strong> prime. (There’s some subtlety as to what it means for a number to probably be prime. See <a href="https://www.johndcook.com/blog/2010/10/06/probability-a-number-is-prime/">here</a>.)</p>
<p>Fermat’s little theorem can give you a zero knowledge proof that a number is composite. Can it give you a zero knowledge proof that a number is prime? There are a couple oddities in this question.</p>
<p>First, what would it mean to have a zero knowledge proof that a number is prime? What knowledge are you keeping secret? When you prove that a number is composite, the prime factors are secret (or even unknown), but what’s the secret when you say a number is prime? Strictly speaking a ZKP doesn’t have to keep anything secret, but in practice it always does.</p>
<p>Second, what about the probability of error? Zero knowledge proofs do not have to be infallible. A ZKP can have some negligible probability of error, and usually do.</p>
<p>It’s not part of the definition, but n practice ZKPs are supposed to be easier to verify than the direct approach to what they prove. So you could have something like a <a href="https://www.johndcook.com/blog/2023/01/03/pratt-certificate/">primality certificate</a> that takes far less computation to verify than the computation needed to determine from scratch that a number is prime.</p>
<h2>Proving other things</h2>
<p>You could think of non-constructive proofs as ZKPs. For example, you could think of the intermediate value theorem as a ZKP: it proves that a function has a zero in an interval without giving you any information about where that zero may be located.</p>
<p>What makes ZKPs interesting in application is that they can prove things of more general interest than mathematical statements [2]. For example, cryptocurrencies can provide ZKPs that accounting constraints hold without revealing the inputs or outputs of the transaction. You could prove that nobody tried to spend a negative amount and that the sum of the inputs equals the sum of the outputs.</p>
<h2>Related posts</h2>
<ul>
<li><a href="https://www.johndcook.com/blog/2025/08/01/jubjub/">Lewis Carroll and ZKP</a></li>
<li><a href="https://www.johndcook.com/blog/2023/01/03/pratt-certificate/">Primality certificates</a></li>
<li><a href="https://www.johndcook.com/blog/2023/01/13/proof-of-optimization/">Proof of optimization</a></li>
</ul>
<p>[1] You could try <em>b</em> = 1, but then <em>b</em><sup><em>n</em>−1</sup> is always 1. This example shows that the existence of a base for which <em>b</em><sup><em>n</em>−1</sup> = 1 (mod <em>n</em>) doesn’t prove anything.</p>
<p>[2] You might object that accounting rules are mathematical statements, and of course they are. But they’re of little interest to mathematicians and of great interest to the parties in a transaction.</p>
			</div></div>
  </body>
</html>
