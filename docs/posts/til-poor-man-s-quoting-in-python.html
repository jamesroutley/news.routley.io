<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://interjectedfuture.com/til-poor-mans-quoting/">Original</a>
    <h1>TIL Poor man&#39;s quoting in Python</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
<article>

    <header>

        

        


        

            <figure>
                <img srcset="/content/images/size/w300/2024/11/DALL-E-2024-11-10-22.44.43---An-illustrative-blog-post-header-for-a-theme-related-to--Today-I-learned-poor-man-s-Lisp-quoting-in-Python---in-a-bright-pastel--flat-style.-Depict-a-.jpeg 300w,
                            /content/images/size/w600/2024/11/DALL-E-2024-11-10-22.44.43---An-illustrative-blog-post-header-for-a-theme-related-to--Today-I-learned-poor-man-s-Lisp-quoting-in-Python---in-a-bright-pastel--flat-style.-Depict-a-.jpeg 600w,
                            /content/images/size/w1000/2024/11/DALL-E-2024-11-10-22.44.43---An-illustrative-blog-post-header-for-a-theme-related-to--Today-I-learned-poor-man-s-Lisp-quoting-in-Python---in-a-bright-pastel--flat-style.-Depict-a-.jpeg 1000w,
                            /content/images/size/w2000/2024/11/DALL-E-2024-11-10-22.44.43---An-illustrative-blog-post-header-for-a-theme-related-to--Today-I-learned-poor-man-s-Lisp-quoting-in-Python---in-a-bright-pastel--flat-style.-Depict-a-.jpeg 2000w" sizes="(min-width: 1400px) 1400px, 92vw" src="https://interjectedfuture.com/content/images/size/w2000/2024/11/DALL-E-2024-11-10-22.44.43---An-illustrative-blog-post-header-for-a-theme-related-to--Today-I-learned-poor-man-s-Lisp-quoting-in-Python---in-a-bright-pastel--flat-style.-Depict-a-.jpeg" alt="TIL Poor man&#39;s quoting in Python"/>
            </figure>

    </header>

    <section>
        <p>In Lisp, you can quote an expression to delay its evaluation while passing it around as a value. In Python, this means in practice, I want a function that looks like it&#39;s executing, but reality, I&#39;m delaying its actual execution. </p><p>I can use decorators to achieve this.</p><pre><code># A thunk-based Efx decorator
def Efx(func):
    @wraps(func)
    def thunk(*children, **args):
        args[&#39;children&#39;] = children
        return lambda: func(*children, **args)
    return thunk</code></pre><p>And then I can use it like so:</p><pre><code>@Efx
def SomeComponent(*children, **args):
    return ComponentA(
    	ComponentB(propA = args.propA)
    )
    
thunk = SomeComponent(propA = &#34;hello&#34;)

# The component doesn&#39;t get executed until we call the thunk.
thunk() = # some dict representation of components</code></pre><p>The <code>@wraps</code> decorator transfers the metadata of the function, so that we can query <code>SomeComponent()</code>&#39;s metadata, even though it&#39;s wrapped in a decorator.</p>
    </section>


</article>
</div></div>
  </body>
</html>
