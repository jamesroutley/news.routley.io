<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/illarion/lockenv">Original</a>
    <h1>Show HN: Lockenv â€“ Simple encrypted secrets storage for Git</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Simple, CLI-friendly secret storage that lets you safely commit encrypted secrets to version control.</p>
<blockquote>
<p dir="auto">For small teams who want something simpler than sops/git-crypt for .env and infra secrets.</p>
</blockquote>

<p dir="auto">lockenv provides a secure way to store sensitive files (like <code>.env</code> files, configuration files, certificates) in an encrypted <code>.lockenv</code> file that can be safely committed to your repository. Files are encrypted using a password-derived key and can be easily extracted when needed.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Feature</th>
<th>lockenv</th>
<th>git-crypt</th>
<th>sops</th>
</tr>
</thead>
<tbody>
<tr>
<td>Format</td>
<td>Single vault file</td>
<td>Transparent per-file</td>
<td>YAML/JSON native</td>
</tr>
<tr>
<td>Auth</td>
<td>Password + Keyring</td>
<td>GPG keys</td>
<td>KMS/PGP</td>
</tr>
<tr>
<td>Git integration</td>
<td>Manual (lock/unlock)</td>
<td>Transparent (git filter)</td>
<td>Manual</td>
</tr>
<tr>
<td>Setup</td>
<td><code>lockenv init</code></td>
<td>GPG key exchange</td>
<td>KMS/key config</td>
</tr>
<tr>
<td>Best for</td>
<td>Simple .env/config</td>
<td>Large teams, many devs</td>
<td>Cloud infra, key rotation</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>


<div dir="auto" data-snippet-clipboard-copy-content="brew tap illarion/tap
brew install lockenv"><pre>brew tap illarion/tap
brew install lockenv</pre></div>

<p dir="auto">Download the <code>.deb</code> file from the <a href="https://github.com/illarion/lockenv/releases/latest">latest release</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo dpkg -i lockenv_*_linux_amd64.deb"><pre>sudo dpkg -i lockenv_<span>*</span>_linux_amd64.deb</pre></div>

<p dir="auto">Download the <code>.rpm</code> file from the <a href="https://github.com/illarion/lockenv/releases/latest">latest release</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo rpm -i lockenv_*_linux_amd64.rpm"><pre>sudo rpm -i lockenv_<span>*</span>_linux_amd64.rpm</pre></div>

<p dir="auto">Download pre-built binaries from <a href="https://github.com/illarion/lockenv/releases/latest">GitHub Releases</a>.</p>
<p dir="auto">Available for:</p>
<ul dir="auto">
<li>Linux (amd64, arm64)</li>
<li>macOS (amd64, arm64)</li>
<li>Windows (amd64, arm64)</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/illarion/lockenv@latest"><pre>go install github.com/illarion/lockenv@latest</pre></div>

<p dir="auto">Shell completions are <strong>automatically installed</strong> when using Homebrew, deb, or rpm packages.</p>
<p dir="auto">For manual installation (binary download or <code>go install</code>):</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Bash - add to ~/.bashrc
eval &#34;$(lockenv completion bash)&#34;

# Zsh - add to ~/.zshrc
eval &#34;$(lockenv completion zsh)&#34;

# Fish - add to ~/.config/fish/config.fish
lockenv completion fish | source

# PowerShell - add to $PROFILE
lockenv completion powershell | Out-String | Invoke-Expression"><pre><span><span>#</span> Bash - add to ~/.bashrc</span>
<span>eval</span> <span><span>&#34;</span><span><span>$(</span>lockenv completion bash<span>)</span></span><span>&#34;</span></span>

<span><span>#</span> Zsh - add to ~/.zshrc</span>
<span>eval</span> <span><span>&#34;</span><span><span>$(</span>lockenv completion zsh<span>)</span></span><span>&#34;</span></span>

<span><span>#</span> Fish - add to ~/.config/fish/config.fish</span>
lockenv completion fish <span>|</span> <span>source</span>

<span><span>#</span> PowerShell - add to $PROFILE</span>
lockenv completion powershell <span>|</span> Out-String <span>|</span> Invoke-Expression</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Initialize lockenv in your project
lockenv init

# Lock (encrypt and store) sensitive files
lockenv lock .env config/secrets.json

# Later, unlock (decrypt and restore) files with your password
lockenv unlock"><pre><span><span>#</span> Initialize lockenv in your project</span>
lockenv init

<span><span>#</span> Lock (encrypt and store) sensitive files</span>
lockenv lock .env config/secrets.json

<span><span>#</span> Later, unlock (decrypt and restore) files with your password</span>
lockenv unlock</pre></div>

<p dir="auto">lockenv is designed for version control: ignore your sensitive files, commit only the encrypted <code>.lockenv</code> vault.</p>

<p dir="auto">Add to your <code>.gitignore</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Sensitive files - these are stored encrypted in .lockenv
.env
.env.*
*.key
*.pem
secrets/

# Keep the encrypted vault (negation pattern)
!.lockenv"><pre><span><span>#</span> Sensitive files - these are stored encrypted in .lockenv</span>
<span>.env</span>
<span>.env.</span><span>*</span>
<span>*</span><span>.key</span>
<span>*</span><span>.pem</span>
<span>secrets</span>/

<span><span>#</span> Keep the encrypted vault (negation pattern)</span>
<span>!</span><span>.lockenv</span></pre></div>
<p dir="auto">The <code>!.lockenv</code> negation ensures the vault is tracked even if broader patterns (like <code>.*</code>) would exclude it.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Project-Specific Examples</h3><a id="user-content-project-specific-examples" aria-label="Permalink: Project-Specific Examples" href="#project-specific-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Some software project:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content=".env
.env.local
.env.production
config/secrets.json
!.lockenv"><pre><span>.env</span>
<span>.env.local</span>
<span>.env.production</span>
<span>config</span>/<span>secrets.json</span>
<span>!</span><span>.lockenv</span></pre></div>
<p dir="auto"><strong>Terraform project:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="*.tfvars
terraform.tfstate
terraform.tfstate.backup
.terraform/
!.lockenv"><pre><span>*</span><span>.tfvars</span>
<span>terraform.tfstate</span>
<span>terraform.tfstate.backup</span>
<span>.terraform</span>/
<span>!</span><span>.lockenv</span></pre></div>


<p dir="auto">Creates a <code>.lockenv</code> vault file in the current directory. Prompts for a password that will be used for encryption. The password is not stored anywhere - you must remember it.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv init
Enter password:
Confirm password:
initialized: .lockenv"><pre>$ lockenv init
Enter password:
Confirm password:
initialized: .lockenv</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto"><code>lockenv lock &lt;file&gt; [file...]</code></h3><a id="user-content-lockenv-lock-file-file" aria-label="Permalink: lockenv lock &lt;file&gt; [file...]" href="#lockenv-lock-file-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Encrypts and stores files in the vault. Supports glob patterns for multiple files.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Lock a single file
$ lockenv lock .env
Enter password:
locking: .env
encrypted: .env
locked: 1 files into .lockenv

# Lock multiple files with glob pattern
$ lockenv lock &#34;config/*.env&#34;
Enter password:
locking: config/dev.env
locking: config/prod.env
encrypted: config/dev.env
encrypted: config/prod.env
locked: 2 files into .lockenv"><pre><span><span>#</span> Lock a single file</span>
$ lockenv lock .env
Enter password:
locking: .env
encrypted: .env
locked: 1 files into .lockenv

<span><span>#</span> Lock multiple files with glob pattern</span>
$ lockenv lock <span><span>&#34;</span>config/*.env<span>&#34;</span></span>
Enter password:
locking: config/dev.env
locking: config/prod.env
encrypted: config/dev.env
encrypted: config/prod.env
locked: 2 files into .lockenv</pre></div>
<p dir="auto"><strong>Options:</strong></p>
<ul dir="auto">
<li><code>-r, --remove</code> - Remove original files after locking</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv lock .env --remove
Enter password:
locking: .env
encrypted: .env
removed: .env
locked: 1 files into .lockenv"><pre>$ lockenv lock .env --remove
Enter password:
locking: .env
encrypted: .env
removed: .env
locked: 1 files into .lockenv</pre></div>

<p dir="auto">Decrypts and restores files from the vault with smart conflict resolution.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Unlock all files
$ lockenv unlock
Enter password:
unlocked: .env
unlocked: config/database.yml

unlocked: 2 files

# Unlock specific file
$ lockenv unlock .env
Enter password:
unlocked: .env

unlocked: 1 files

# Unlock files matching pattern
$ lockenv unlock &#34;config/*.env&#34;
Enter password:
unlocked: config/dev.env
unlocked: config/prod.env

unlocked: 2 files"><pre><span><span>#</span> Unlock all files</span>
$ lockenv unlock
Enter password:
unlocked: .env
unlocked: config/database.yml

unlocked: 2 files

<span><span>#</span> Unlock specific file</span>
$ lockenv unlock .env
Enter password:
unlocked: .env

unlocked: 1 files

<span><span>#</span> Unlock files matching pattern</span>
$ lockenv unlock <span><span>&#34;</span>config/*.env<span>&#34;</span></span>
Enter password:
unlocked: config/dev.env
unlocked: config/prod.env

unlocked: 2 files</pre></div>
<p dir="auto"><strong>Smart Conflict Resolution:</strong>
When a file exists locally and differs from the vault version, you have multiple options:</p>
<p dir="auto"><strong>Interactive Mode (default):</strong></p>
<ul dir="auto">
<li><code>[l]</code> Keep local version</li>
<li><code>[v]</code> Use vault version (overwrite local)</li>
<li><code>[e]</code> Edit merged (opens in $EDITOR with git-style conflict markers, text files only)</li>
<li><code>[b]</code> Keep both (saves vault version as <code>.from-vault</code>)</li>
<li><code>[x]</code> Skip this file</li>
</ul>
<p dir="auto"><strong>Non-Interactive Flags:</strong></p>
<ul dir="auto">
<li><code>--force</code> - Overwrite all local files with vault version</li>
<li><code>--keep-local</code> - Keep all local versions, skip conflicts</li>
<li><code>--keep-both</code> - Keep both versions for all conflicts (vault saved as <code>.from-vault</code>)</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="# Interactive mode example
$ lockenv unlock

warning: conflict detected: .env
   Local file exists and differs from vault version
   File type: text

Options:
  [l] Keep local version
  [v] Use vault version (overwrite local)
  [e] Edit merged (opens in $EDITOR)
  [b] Keep both (save vault as .from-vault)
  [x] Skip this file

Your choice: e

opening editor for merge...
# Editor opens with:
# &lt;&lt;&lt;&lt;&lt;&lt;&lt; local
# API_KEY=old_value
# =======
# API_KEY=new_value
# DEBUG=true
# &gt;&gt;&gt;&gt;&gt;&gt;&gt; vault

unlocked: .env

# Keep both versions example
$ lockenv unlock --keep-both
Enter password:
saved: .env.from-vault (vault version)
skipped: .env (kept local version)
saved: config/secrets.json.from-vault (vault version)
skipped: config/secrets.json (kept local version)"><pre><span><span>#</span> Interactive mode example</span>
$ lockenv unlock

warning: conflict detected: .env
   Local file exists and differs from vault version
   File type: text

Options:
  [l] Keep <span>local</span> version
  [v] Use vault version (overwrite local)
  [e] Edit merged (opens <span>in</span> <span>$EDITOR</span>)
  [b] Keep both (save vault as .from-vault)
  [x] Skip this file

Your choice: e

opening editor <span>for</span> merge...
<span><span>#</span> Editor opens with:</span>
<span><span>#</span> &lt;&lt;&lt;&lt;&lt;&lt;&lt; local</span>
<span><span>#</span> API_KEY=old_value</span>
<span><span>#</span> =======</span>
<span><span>#</span> API_KEY=new_value</span>
<span><span>#</span> DEBUG=true</span>
<span><span>#</span> &gt;&gt;&gt;&gt;&gt;&gt;&gt; vault</span>

unlocked: .env

<span><span>#</span> Keep both versions example</span>
$ lockenv unlock --keep-both
Enter password:
saved: .env.from-vault (vault version)
skipped: .env (kept <span>local</span> version)
saved: config/secrets.json.from-vault (vault version)
skipped: config/secrets.json (kept <span>local</span> version)</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto"><code>lockenv rm &lt;file&gt; [file...]</code></h3><a id="user-content-lockenv-rm-file-file" aria-label="Permalink: lockenv rm &lt;file&gt; [file...]" href="#lockenv-rm-file-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Removes files from the vault. Supports glob patterns.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv rm config/dev.env
Enter password:
removed: config/dev.env from vault"><pre>$ lockenv rm config/dev.env
Enter password:
removed: config/dev.env from vault</pre></div>

<p dir="auto">Alias for <code>lockenv status</code>. Shows comprehensive vault status.</p>

<p dir="auto">Shows comprehensive vault status including statistics, file states, and detailed information. Does not require a password.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv status

Vault Status
===========================================

Statistics:
   Files in vault: 3
   Total size:     2.17 KB
   Last locked:    2025-01-15 10:30:45
   Encryption:     AES-256-GCM (PBKDF2 iterations: 210000)
   Version:        1

Summary:
   .  2 unchanged
   *  1 modified

Files:
   * .env (modified)
   . config/dev.env (unchanged)
   * config/prod.env (vault only)

==========================================="><pre>$ lockenv status

Vault Status
===========================================

Statistics:
   Files <span>in</span> vault: 3
   Total size:     2.17 KB
   Last locked:    2025-01-15 10:30:45
   Encryption:     AES-256-GCM (PBKDF2 iterations: 210000)
   Version:        1

Summary:
   <span>.</span>  2 unchanged
   <span>*</span>  1 modified

Files:
   <span>*</span> .env (modified)
   <span>.</span> config/dev.env (unchanged)
   <span>*</span> config/prod.env (vault only)

===========================================</pre></div>

<p dir="auto">Changes the vault password. Requires both the current and new passwords. Re-encrypts all files with the new password.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv passwd
Enter current password:
Enter new password:
Confirm new password:
password changed successfully"><pre>$ lockenv passwd
Enter current password:
Enter new password:
Confirm new password:
password changed successfully</pre></div>

<p dir="auto">Shows actual content differences between vault and local files (like <code>git diff</code>).</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv diff
Enter password:
--- a/.env
+++ b/.env
@@ -1,3 +1,4 @@
 API_KEY=secret123
-DATABASE_URL=localhost:5432
+DATABASE_URL=production:5432
+DEBUG=false
 PORT=3000

Binary file config/logo.png has changed

File not in working directory: config/prod.env"><pre>$ lockenv diff
Enter password:
--- a/.env
+++ b/.env
@@ -1,3 +1,4 @@
 API_KEY=secret123
-DATABASE_URL=localhost:5432
+DATABASE_URL=production:5432
+DEBUG=false
 PORT=3000

Binary file config/logo.png has changed

File not <span>in</span> working directory: config/prod.env</pre></div>
<p dir="auto"><strong>Note:</strong> <code>lockenv status</code> shows which files changed, <code>lockenv diff</code> shows what changed.</p>

<p dir="auto">Compacts the vault database to reclaim unused disk space. Runs automatically after <code>rm</code> and <code>passwd</code>, but can be run manually.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv compact
Compacted: 45.2 KB -&gt; 12.1 KB"><pre>$ lockenv compact
Compacted: 45.2 KB -<span>&gt;</span> 12.1 KB</pre></div>

<p dir="auto">Manages password storage in the OS keyring.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Save password to keyring
$ lockenv keyring save
Enter password:
Password saved to keyring

# Check if password is stored
$ lockenv keyring status
Password: stored in keyring

# Remove password from keyring
$ lockenv keyring delete
Password removed from keyring"><pre><span><span>#</span> Save password to keyring</span>
$ lockenv keyring save
Enter password:
Password saved to keyring

<span><span>#</span> Check if password is stored</span>
$ lockenv keyring status
Password: stored <span>in</span> keyring

<span><span>#</span> Remove password from keyring</span>
$ lockenv keyring delete
Password removed from keyring</pre></div>

<ol dir="auto">
<li>
<p dir="auto"><strong>Initial setup</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Initialize vault
lockenv init

# Lock your sensitive files (encrypt and store)
lockenv lock .env config/database.yml certs/server.key --remove

# Commit the encrypted vault
git add .lockenv
git commit -m &#34;Add encrypted secrets&#34;
git push"><pre><span><span>#</span> Initialize vault</span>
lockenv init

<span><span>#</span> Lock your sensitive files (encrypt and store)</span>
lockenv lock .env config/database.yml certs/server.key --remove

<span><span>#</span> Commit the encrypted vault</span>
git add .lockenv
git commit -m <span><span>&#34;</span>Add encrypted secrets<span>&#34;</span></span>
git push</pre></div>
</li>
<li>
<p dir="auto"><strong>After cloning repository (new team member)</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone &lt;repo&gt;
cd &lt;repo&gt;

# Unlock files to restore them
lockenv unlock"><pre>git clone <span>&lt;</span>repo<span>&gt;</span>
<span>cd</span> <span>&lt;</span>repo<span>&gt;</span>

<span><span>#</span> Unlock files to restore them</span>
lockenv unlock</pre></div>
</li>
<li>
<p dir="auto"><strong>Updating secrets</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Make changes to your .env file
echo &#34;NEW_SECRET=value&#34; &gt;&gt; .env

# Check what changed
lockenv status    # See file is modified
lockenv diff      # See detailed changes

# Lock the updated files
lockenv lock .env

# Commit the changes
git add .lockenv
git commit -m &#34;Update secrets&#34;
git push"><pre><span><span>#</span> Make changes to your .env file</span>
<span>echo</span> <span><span>&#34;</span>NEW_SECRET=value<span>&#34;</span></span> <span>&gt;&gt;</span> .env

<span><span>#</span> Check what changed</span>
lockenv status    <span><span>#</span> See file is modified</span>
lockenv diff      <span><span>#</span> See detailed changes</span>

<span><span>#</span> Lock the updated files</span>
lockenv lock .env

<span><span>#</span> Commit the changes</span>
git add .lockenv
git commit -m <span><span>&#34;</span>Update secrets<span>&#34;</span></span>
git push</pre></div>
</li>
<li>
<p dir="auto"><strong>Managing files</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Add new secret file
lockenv lock new-secrets.json

# Remove file from vault
lockenv rm old-config.yml

# Check vault status
lockenv status"><pre><span><span>#</span> Add new secret file</span>
lockenv lock new-secrets.json

<span><span>#</span> Remove file from vault</span>
lockenv rm old-config.yml

<span><span>#</span> Check vault status</span>
lockenv status</pre></div>
</li>
</ol>

<ul dir="auto">
<li><strong>Password Management</strong>: lockenv does not store your password. If you lose it, you cannot decrypt your files.</li>
<li><strong>Encryption</strong>: Uses industry-standard encryption (AES-256-GCM) with PBKDF2 key derivation for all file contents.</li>
<li><strong>Metadata Visibility</strong>: File paths, sizes, and modification times are visible without authentication via <code>lockenv status</code>. If file paths themselves are sensitive, use generic names like <code>config1.enc</code>.</li>
<li><strong>Memory Safety</strong>: Sensitive data is cleared from memory after use.</li>
<li><strong>Version Control</strong>: Only commit the <code>.lockenv</code> file, never commit unencrypted sensitive files.</li>
</ul>

<p dir="auto"><strong>lockenv protects against:</strong></p>
<ul dir="auto">
<li>Secrets exposed in git history or repository leaks</li>
<li>Unauthorized repository access without the password</li>
<li>Dev laptops without the password</li>
</ul>
<p dir="auto"><strong>lockenv does NOT protect against:</strong></p>
<ul dir="auto">
<li>Compromised CI runner (sees plaintext after unlock)</li>
<li>Attacker who has the password</li>
</ul>


<p dir="auto">For CI/CD environments, you can provide the password via environment variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export LOCKENV_PASSWORD=&#34;your-password&#34;
lockenv unlock"><pre><span>export</span> LOCKENV_PASSWORD=<span><span>&#34;</span>your-password<span>&#34;</span></span>
lockenv unlock</pre></div>
<p dir="auto"><strong>Security warning:</strong> Environment variables may be visible to other processes on the system (via <code>/proc/&lt;pid&gt;/environ</code> on Linux or process inspection tools). Use this feature only in isolated CI/CD environments where process inspection by other users is not a concern. For interactive use, prefer the terminal prompt or OS keyring.</p>

<p dir="auto">lockenv can store your password in the operating system&#39;s secure keyring, eliminating password prompts for daily use.</p>
<p dir="auto"><strong>Supported backends:</strong></p>
<ul dir="auto">
<li>macOS: Keychain</li>
<li>Linux: GNOME Keyring, KDE Wallet, or any Secret Service implementation</li>
<li>Windows: Windows Credential Manager</li>
</ul>

<p dir="auto">After <code>init</code> or <code>unlock</code>, lockenv offers to save your password:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv unlock
Enter password:
unlocked: .env

Save password to keyring? [y/N]: y
Password saved to keyring"><pre>$ lockenv unlock
Enter password:
unlocked: .env

Save password to keyring<span>?</span> [y/N]: y
Password saved to keyring</pre></div>
<p dir="auto">Once saved, subsequent commands use the keyring automatically:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv unlock
unlocked: .env  # No password prompt!"><pre>$ lockenv unlock
unlocked: .env  <span><span>#</span> No password prompt!</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Save password to keyring (verifies password first)
$ lockenv keyring save
Enter password:
Password saved to keyring

# Check keyring status
$ lockenv keyring status
Password: stored in keyring

# Remove from keyring
$ lockenv keyring delete
Password removed from keyring"><pre><span><span>#</span> Save password to keyring (verifies password first)</span>
$ lockenv keyring save
Enter password:
Password saved to keyring

<span><span>#</span> Check keyring status</span>
$ lockenv keyring status
Password: stored <span>in</span> keyring

<span><span>#</span> Remove from keyring</span>
$ lockenv keyring delete
Password removed from keyring</pre></div>

<p dir="auto">If the vault password changes but the keyring has the old password, lockenv automatically detects this and prompts for the correct password:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ lockenv unlock
Warning: keyring password is incorrect, removing stale entry
Enter password:
unlocked: .env"><pre>$ lockenv unlock
Warning: keyring password is incorrect, removing stale entry
Enter password:
unlocked: .env</pre></div>

<ul dir="auto">
<li>Passwords are stored using your OS&#39;s native secure storage</li>
<li>Each vault has a unique ID - moving <code>.lockenv</code> files preserves keyring association</li>
<li>The keyring is optional - lockenv works without it</li>
</ul>


<div dir="auto" data-snippet-clipboard-copy-content="jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install lockenv
        run: |
          curl -sL https://github.com/illarion/lockenv/releases/latest/download/lockenv_linux_amd64.tar.gz | tar xz
          sudo mv lockenv /usr/local/bin/
      - name: Unlock secrets
        env:
          LOCKENV_PASSWORD: ${{ secrets.LOCKENV_PASSWORD }}
        run: lockenv unlock"><pre><span>jobs</span>:
  <span>deploy</span>:
    <span>runs-on</span>: <span>ubuntu-latest</span>
    <span>steps</span>:
      - <span>uses</span>: <span>actions/checkout@v4</span>
      - <span>name</span>: <span>Install lockenv</span>
        <span>run</span>: <span>|</span>
<span>          curl -sL https://github.com/illarion/lockenv/releases/latest/download/lockenv_linux_amd64.tar.gz | tar xz</span>
<span>          sudo mv lockenv /usr/local/bin/</span>
<span></span>      - <span>name</span>: <span>Unlock secrets</span>
        <span>env</span>:
          <span>LOCKENV_PASSWORD</span>: <span>${{ secrets.LOCKENV_PASSWORD }}</span>
        <span>run</span>: <span>lockenv unlock</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="deploy:
  before_script:
    - curl -sL https://github.com/illarion/lockenv/releases/latest/download/lockenv_linux_amd64.tar.gz | tar xz
    - mv lockenv /usr/local/bin/
    - lockenv unlock
  variables:
    LOCKENV_PASSWORD: $LOCKENV_PASSWORD"><pre><span>deploy</span>:
  <span>before_script</span>:
    - <span>curl -sL https://github.com/illarion/lockenv/releases/latest/download/lockenv_linux_amd64.tar.gz | tar xz</span>
    - <span>mv lockenv /usr/local/bin/</span>
    - <span>lockenv unlock</span>
  <span>variables</span>:
    <span>LOCKENV_PASSWORD</span>: <span>$LOCKENV_PASSWORD</span></pre></div>

<ul dir="auto">
<li><strong>File size</strong>: Files are loaded entirely into memory for encryption. Not recommended for large binary files (&gt;100MB).</li>
<li><strong>Single password</strong>: One password for the entire vault. No per-user or per-file access control.</li>
</ul>
<p dir="auto">For feature requests or issues, see <a href="https://github.com/illarion/lockenv/issues">GitHub Issues</a>.</p>
</article></div></div>
  </body>
</html>
