<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://olivia.website/posts/2024-12-27-indoor-co2/">Original</a>
    <h1>Indoor CO2 model</h1>
    
    <div id="readability-page-1" class="page"><article data-astro-cid-5grsw2hi=""><span data-astro-cid-5grsw2hi="">Dec 27, 2024</span><p><em>Editor’s note: I wrote this in January 2024, and completely forgot about it. Like genuinely, it was fun to reread.
I’ve decided to chop off the end, and publish this now, and maybe I’ll write the ending to it later. We’ll see…</em></p>
<p>I’ve recently been looking at indoor CO2 level’s at Recurse Center’s
physical space. There are lots of reasons to do so: airborne disease
prevention, trying to limit CO2-linked cognitive decline, but also, and
most importantly: curiosity.</p>
<p>This is what the dataset looks like as a whole:</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    # filter(date(time) == &#34;2024-01-17&#34;) %&gt;% </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1500</span><span>, </span><span>color</span><span> =</span><span> &#34;red&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_area</span><span>(</span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%b-%d&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 day&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;Typical daily CO2 levels at Recurse Center&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/full-dataset-1.png" alt=""/></p>
<p>A few interesting things to note immediately:</p>
<ul>
<li>there’s a strong daily cycle,</li>
<li>the days kinda look different from each other,</li>
<li>the weekends
have lower peaks,</li>
<li>what’s going on on the 20th?</li>
</ul>
<h2 id="on-the-20th-i-happened">On the 20th, I happened</h2>
<p>Right, so on the 20th, I was trying to keep us under 1,000ppm of CO2 in
the space, so I kept opening the window.</p>
<p>This was in part because of a successful experiment done a long long
time ago, in a land far far away… Half a day before, in the same space,
I noticed the CO2 levels were high after “presentations”: a moment where
everyone in the current batch gathers together to watch each other
present. It’s really wholesome actually, they’re a highlight of every
week.</p>
<p>As you might imagine, the CO2 levels were pretty high.</p>
<p>Can you figure out when presentations are from this graph?</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(</span><span>date</span><span>(time) </span><span>==</span><span> &#34;2024-01-18&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&lt;=</span><span> &#34;2024-01-18 14:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(time </span><span>&gt;=</span><span> &#34;2024-01-18 2:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    # geom_hline(yintercept = 1500, color = &#34;red&#34;) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 16:00&#34;)) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 17:00&#34;)) +</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_ribbon</span><span>(</span><span>aes</span><span>(</span><span>ymin</span><span> =</span><span> 420</span><span>, </span><span>ymax</span><span> =</span><span> co2), </span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    # geom_area(alpha = 0.2) +</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%l:00&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>, </span><span>date_minor_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;Presentations day&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/presentations-1.png" alt=""/></p>
<p>And like, I don’t know about you, but I would’ve looked at the peak, and
said “5-6pm”. Which like, totally fair, the thing is, they happen
<em>before</em> the peak.</p>
<p>It’s not like people stuck around or more people showed up after. (I
mean, some did, but there were definitely the most people <em>during</em>
presentations)</p>
<p>At some point, around 8pm, there were very few of us in the space, and I
decided to setup a cross-breeze.</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(</span><span>date</span><span>(time) </span><span>==</span><span> &#34;2024-01-18&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&lt;=</span><span> &#34;2024-01-18 17:00&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&gt;=</span><span> &#34;2024-01-18 10:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    # geom_hline(yintercept = 1500, color = &#34;red&#34;) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 16:00&#34;)) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 17:00&#34;)) +</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_ribbon</span><span>(</span><span>aes</span><span>(</span><span>ymin</span><span> =</span><span> 420</span><span>, </span><span>ymax</span><span> =</span><span> co2), </span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%l:00&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>, </span><span>date_minor_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;Presentations day&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/presentations-window-1.png" alt=""/></p>
<p>Boom!</p>
<p>In a few minutes, CO2 levels dropped by nearly 50%! (Outdoor levels are
420ppm, so going from 1,100 to 750 is 50% of the “added CO2”.)</p>
<p>And like, clearly, we just needed to flush the accumulated CO2 and we’re
back to normal. This was incredibly validating: CO2 levels accumulate
slowly over a day, occasionally just opening the windows will make
things better. Right?</p>
<h2 id="the-next-day">The next day</h2>
<p>So fresh out of this really successful experiment, the next day, I open
the windows the moment we get to 1,000ppm, knowing that we’ll stay down
below “bad” levels of CO2.</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(</span><span>date</span><span>(time) </span><span>==</span><span> &#34;2024-01-19&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&lt;=</span><span> &#34;2024-01-19 10:30&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&gt;=</span><span> &#34;2024-01-19 4:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    # geom_hline(yintercept = 1500, color = &#34;red&#34;) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 16:00&#34;)) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 17:00&#34;)) +</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_ribbon</span><span>(</span><span>aes</span><span>(</span><span>ymin</span><span> =</span><span> 420</span><span>, </span><span>ymax</span><span> =</span><span> co2), </span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%l:00&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>, </span><span>date_minor_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;The next day&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/the-next-day-1.png" alt=""/></p>
<p>Nice!</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(</span><span>date</span><span>(time) </span><span>==</span><span> &#34;2024-01-19&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&lt;=</span><span> &#34;2024-01-19 11:30&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&gt;=</span><span> &#34;2024-01-19 4:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    # geom_hline(yintercept = 1500, color = &#34;red&#34;) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 16:00&#34;)) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 17:00&#34;)) +</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_ribbon</span><span>(</span><span>aes</span><span>(</span><span>ymin</span><span> =</span><span> 420</span><span>, </span><span>ymax</span><span> =</span><span> co2), </span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%l:00&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>, </span><span>date_minor_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;The next day... uh oh&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/the-next-day-uh-oh-1.png" alt=""/></p>
<p>Huh, I expected that to stay down.</p>
<p>And you can see how the rest of the day went</p>
<pre tabindex="0" lang="r"><code><span><span>co2_levels </span><span>%&gt;%</span><span> </span></span>
<span><span>    filter</span><span>(</span><span>date</span><span>(time) </span><span>==</span><span> &#34;2024-01-19&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&lt;=</span><span> &#34;2024-01-19 17:30&#34;</span><span>) </span><span>%&gt;%</span></span>
<span><span>    filter</span><span>(time </span><span>&gt;=</span><span> &#34;2024-01-19 4:00&#34;</span><span>) </span><span>%&gt;%</span><span> </span></span>
<span><span>    ggplot</span><span>(</span><span>aes</span><span>(</span><span>x</span><span> =</span><span> time,</span></span>
<span><span>                y</span><span> =</span><span> co2)) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 420</span><span>, </span><span>color</span><span> =</span><span> &#34;darkgreen&#34;</span><span>) </span><span>+</span></span>
<span><span>    geom_hline</span><span>(</span><span>yintercept</span><span> =</span><span> 1000</span><span>, </span><span>color</span><span> =</span><span> &#34;orange&#34;</span><span>) </span><span>+</span></span>
<span><span>    # geom_hline(yintercept = 1500, color = &#34;red&#34;) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 16:00&#34;)) +</span></span>
<span><span>    # geom_vline(xintercept = ymd_hm(&#34;2024-01-18 17:00&#34;)) +</span></span>
<span><span>    geom_line</span><span>() </span><span>+</span></span>
<span><span>    geom_ribbon</span><span>(</span><span>aes</span><span>(</span><span>ymin</span><span> =</span><span> 420</span><span>, </span><span>ymax</span><span> =</span><span> co2), </span><span>alpha</span><span> =</span><span> 0.2</span><span>) </span><span>+</span></span>
<span><span>    theme_ipsum_rc</span><span>() </span><span>+</span></span>
<span><span>    scale_y_comma</span><span>() </span><span>+</span></span>
<span><span>    scale_x_datetime</span><span>(</span><span>date_labels</span><span> =</span><span> &#34;%l:00&#34;</span><span>, </span><span>date_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>, </span><span>date_minor_breaks</span><span> =</span><span> &#34;1 hour&#34;</span><span>) </span><span>+</span></span>
<span><span>    labs</span><span>(</span><span>x</span><span> =</span><span> NULL</span><span>, </span><span>y</span><span> =</span><span> &#34;CO2 levels (ppm)&#34;</span><span>, </span><span>caption</span><span> =</span><span> &#34;nibrivia.com&#34;</span><span>,</span></span>
<span><span>            title</span><span> =</span><span> &#34;The next day... the full story&#34;</span><span>)</span></span></code></pre>
<p><img src="https://olivia.website/co2-levels_files/figure-markdown_strict/the-next-day-all-of-it-1.png" alt=""/>
The second time, I left the window open for longer, which really brought
the CO2 levels back down quite far… just for them to <em>bounce</em> the moment
the windows were closed.</p>
<p>I didn’t try much for the rest of the day, until later that night, when
opening the window <em>did</em> drop the levels.</p>
<h2 id="at-rc-the-clue-is-in-the-name">At RC, the clue is in the name</h2>
<p>So after this experience, I started saying “the number of people in the
space controls the <em>derivative</em> of the CO2 levels”. And you can see why
I thought that: multiple times, I opened the window, only for it to
bounce right back up.</p>
<p>In general, it seems like opening the window during the day just serves
to delay a, rather rapid, CO2 increase. In the evening, it accelerates
an otherwise slow decrease.</p>
<p>I wanted to understand this better, so I decided to make a simple model
of this.</p>
<p><em>Editor’s note: And this is where we’ll end things for now. Write to me if you can figure out what you think this model ended up being!</em></p>
<!-- Here’s what I know: - Outdoor air is has 420ppm of CO2 - We pull in
outdoor air through ventilation/leakage/open windows - Humans emit CO2,
apparently around 0.5-1kg/day, which works out to around 1 mole/hour -
The indoor space we’re in is well-mixed (the fans are always running) --></article></div>
  </body>
</html>
