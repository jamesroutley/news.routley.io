<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mentat-collective/emmy">Original</a>
    <h1>The Emmy Computer Algebra System</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/mentat-collective/emmy/actions?query=workflow%3A%22Clojure+CI%22"><img src="https://github.com/mentat-collective/emmy/workflows/Clojure%20CI/badge.svg?branch=main" alt="Build Status"/></a>
<a href="https://github.com/mentat-collective/emmy/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/7f4c7e0bf7682dc121b7992978fa296e24674666a20a899b28481d53e5d221af/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d47504c76332d627269676874677265656e2e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-GPLv3-brightgreen.svg"/></a>
<a href="https://codecov.io/github/mentat-collective/emmy" rel="nofollow"><img src="https://camo.githubusercontent.com/994ebbf5c107335063d7a89d94a55b8d14d4d4b5b36147b31ccb7052926bb136/68747470733a2f2f696d672e736869656c64732e696f2f636f6465636f762f632f6769746875622f6d656e7461742d636f6c6c6563746976652f656d6d792f6d61696e2e7376673f6d61784167653d33363030" alt="Codecov branch" data-canonical-src="https://img.shields.io/codecov/c/github/mentat-collective/emmy/main.svg?maxAge=3600"/></a>
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT" rel="nofollow"><img src="https://camo.githubusercontent.com/1750c771d0fba34100a0e17f7a46d877349d376e59a75b3d2b15ffc2a6c6183f/68747470733a2f2f636c6a646f632e6f72672f62616467652f6f72672e6d656e7461742f656d6d79" alt="cljdoc badge" data-canonical-src="https://cljdoc.org/badge/org.mentat/emmy"/></a>
<a href="https://clojars.org/org.mentat/emmy" rel="nofollow"><img src="https://camo.githubusercontent.com/fcdc9e50c54afd84d37400469f52dc1be9c73d423a27c0939aad7bde2aa2721d/68747470733a2f2f696d672e736869656c64732e696f2f636c6f6a6172732f762f6f72672e6d656e7461742f656d6d792e737667" alt="Clojars Project" data-canonical-src="https://img.shields.io/clojars/v/org.mentat/emmy.svg"/></a>
<a href="https://discord.gg/hsRBqGEeQ4" rel="nofollow"><img src="https://camo.githubusercontent.com/f8cbee6923bdd7bcad1528d69d4125730cd22fa503ad989b3aaa296ba007c2c1/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f3733313133313536323030323734333333363f7374796c653d666c617426636f6c6f72413d30303030303026636f6c6f72423d303030303030266c6162656c3d266c6f676f3d646973636f7264" alt="Discord Shield" data-canonical-src="https://img.shields.io/discord/731131562002743336?style=flat&amp;colorA=000000&amp;colorB=000000&amp;label=&amp;logo=discord"/></a></p>
<p dir="auto">Emmy is a Clojure(Script) implementation of the <a href="https://groups.csail.mit.edu/mac/users/gjs/6946/refman.txt" rel="nofollow">scmutils</a>
system for math and physics investigations in the Clojure and ClojureScript
languages. Emmy provides facilities for</p>
<ul dir="auto">
<li><a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/data-types/symbolic-expressions" rel="nofollow">symbolic
computation</a>,
including state of the art TeX rendering and <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/simplification" rel="nofollow">expression
simplification</a></li>
<li><a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/calculus/automatic-differentiation" rel="nofollow">automatic</a>,
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/numerical-methods/numerical-derivative" rel="nofollow">numerical</a>
and
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/calculus/automatic-differentiation" rel="nofollow">symbolic</a>
differentiation</li>
<li><a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/numerical-methods" rel="nofollow">numerical integration and
optimization</a></li>
<li>investigations in <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/textbooks/functional-differential-geometry" rel="nofollow">differential
geometry</a>
and <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/textbooks/structure-and-interpretation-of-classical-mechanics" rel="nofollow">Lagrangian and Hamiltonian
mechanics</a></li>
</ul>
<p dir="auto">And implementations of many different <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/data-types" rel="nofollow">mathematical
objects</a>, all built
on a tower of <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/basics/generics" rel="nofollow">generic, extensible mathematical
operations</a>.</p>
<p dir="auto">Scmutils is extensively used in the textbooks <a href="https://mitpress.mit.edu/9780262028967/structure-and-interpretation-of-classical-mechanics/" rel="nofollow">The Structure and Interpretation
of Classical Mechanics</a> and <a href="https://mitpress.mit.edu/9780262019347/functional-differential-geometry/" rel="nofollow">Functional Differential
Geometry</a> by G.J. Sussman and J. Wisdom.</p>
<blockquote>
<p dir="auto">ðŸ‘‹ Need help getting started? Say hi on <a href="http://clojurians.net/" rel="nofollow">Clojurians
Slack</a> in <a href="https://clojurians.slack.com/archives/C01ECA9AA74" rel="nofollow">#emmy</a>.</p>
</blockquote>

<blockquote>
<p dir="auto"><strong>Note</strong>
Emmy is best experienced in an interactive environment like the
<a href="https://clojure.org/guides/repl/introduction" rel="nofollow">REPL</a>. We <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/basics/how-to-use-emmy" rel="nofollow">support many
environments</a>
with rich support for <a href="https://en.wikipedia.org/wiki/TeX" rel="nofollow">TeX</a> rendering and
plotting.</p>
</blockquote>
<p dir="auto">Install <code>Emmy</code> into your Clojure(Script) project using the instructions at its
Clojars page:</p>
<p dir="auto"><a href="https://clojars.org/org.mentat/emmy" rel="nofollow"><img src="https://camo.githubusercontent.com/fcdc9e50c54afd84d37400469f52dc1be9c73d423a27c0939aad7bde2aa2721d/68747470733a2f2f696d672e736869656c64732e696f2f636c6f6a6172732f762f6f72672e6d656e7461742f656d6d792e737667" alt="Clojars Project" data-canonical-src="https://img.shields.io/clojars/v/org.mentat/emmy.svg"/></a></p>
<p dir="auto">Or grab the most recent code using a Git dependency:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; Replace $GIT_SHA with the most recent commit:
{io.github.mentat-collective/emmy
  {:git/sha &#34;$GIT_SHA&#34;}}"><pre><span><span>;</span>; Replace $GIT_SHA with the most recent commit:</span>
{io.github.mentat-collective/emmy
  {<span>:git/sha</span> <span><span>&#34;</span>$GIT_SHA<span>&#34;</span></span>}}</pre></div>
<p dir="auto">Require <code>emmy.env</code> in your Clojure(Script) namespace:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(ns my-app
  (:require [emmy.env :as e :refer :all]))"><pre>(<span>ns</span> <span>my-app</span>
  (<span>:require</span> [emmy.env <span>:as</span> e <span>:refer</span> <span>:all</span>]))</pre></div>
<p dir="auto">Or clone this repository:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone git@github.com:mentat-collective/emmy.git
cd emmy"><pre>git clone git@github.com:mentat-collective/emmy.git
<span>cd</span> emmy</pre></div>
<p dir="auto">then install <a href="https://clojure.org/guides/install_clojure" rel="nofollow">the Clojure command line
tool</a> and run the following command
to launch a REPL with <code>emmy.env</code> already loaded:</p>

<p dir="auto">Math works as expected (see
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/basics/generics" rel="nofollow">Generics</a> for
the full menu of operations), but notice that the numeric tower includes
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/data-types/complex" rel="nofollow">complex
numbers</a>,
and proper ratios in ClojureScript:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(- (* 7 (/ 1 2)) 2)
;;=&gt; 3/2

(asin -10)
;;=&gt; #emmy/complex [-1.5707963267948966 2.9932228461263786]"><pre>(<span>-</span> (<span>*</span> <span>7</span> (<span>/</span> <span>1</span> <span>2</span>)) <span>2</span>)
<span><span>;</span>;=&gt; 3/2</span>

(<span>asin</span> <span>-10</span>)
<span><span>;</span>;=&gt; #emmy/complex [-1.5707963267948966 2.9932228461263786]</span></pre></div>
<p dir="auto">Symbols are interpreted as abstract complex numbers, and arithmetic on them
generates symbolic expressions. You can render these with
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/api/emmy.expression.render#-%3ETeX" rel="nofollow"><code>-&gt;TeX</code></a>
and
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/api/emmy.expression.render#-%3Einfix" rel="nofollow"><code>-&gt;infix</code></a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(def render (comp -&gt;infix simplify))

(square (sin (+ &#39;a 3)))
;;=&gt; (expt (sin (+ a 3)) 2)

(render (square (sin (+ &#39;a 3))))
;;=&gt; &#34;sinÂ²(a + 3)&#34;"><pre>(<span>def</span> <span>render</span> (<span>comp</span> -&gt;infix simplify))

(<span>square</span> (<span>sin</span> (<span>+</span> &#39;a <span>3</span>)))
<span><span>;</span>;=&gt; (expt (sin (+ a 3)) 2)</span>

(<span>render</span> (<span>square</span> (<span>sin</span> (<span>+</span> &#39;a <span>3</span>))))
<span><span>;</span>;=&gt; &#34;sinÂ²(a + 3)&#34;</span></pre></div>
<p dir="auto">Use the
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/api/emmy.calculus.derivative#D" rel="nofollow"><code>D</code></a>
operator to perform <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/calculus/automatic-differentiation" rel="nofollow">forward-mode automatic
differentiation</a>
and
<a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/simplification" rel="nofollow"><code>simplify</code></a> to
collapse symbolic expressions into tidy form:</p>
<div dir="auto" data-snippet-clipboard-copy-content="((D cube) &#39;x)
;;=&gt;  (+ (* x (+ x x)) (* x x))

(simplify ((D cube) &#39;x))
;;=&gt; (* 3 (expt x 2))

(-&gt;infix
 (simplify ((D cube) &#39;x)))
;;-&gt; &#34;3 xÂ²&#34;"><pre>((<span>D</span> cube) &#39;x)
<span><span>;</span>;=&gt;  (+ (* x (+ x x)) (* x x))</span>

(<span>simplify</span> ((<span>D</span> cube) &#39;x))
<span><span>;</span>;=&gt; (* 3 (expt x 2))</span>

(<span>-&gt;infix</span>
 (<span>simplify</span> ((<span>D</span> cube) &#39;x)))
<span><span>;</span>;-&gt; &#34;3 xÂ²&#34;</span></pre></div>
<p dir="auto">Emmy is based on the engine behind <a href="https://mitpress.mit.edu/9780262028967/structure-and-interpretation-of-classical-mechanics/" rel="nofollow">The Structure and Interpretation of
Classical Mechanics</a>, and has a built-in API for exploring
Lagrangian and Hamiltonian mechanics.</p>
<p dir="auto">Define a <a href="https://en.wikipedia.org/wiki/Lagrangian_mechanics" rel="nofollow">Lagrangian</a> for a
central potential <code>U</code> acting on a particle with mass <code>m</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(defn L-central-polar [m U]
  (fn [[_ [r] [rdot thetadot]]]
    (- (* 1/2 m
          (+ (square rdot)
             (square (* r thetadot))))
       (U r))))"><pre>(<span>defn</span> <span>L-central-polar</span> [m U]
  (<span>fn</span> [[_ [r] [rdot thetadot]]]
    (<span>-</span> (<span>*</span> <span>1/2</span> m
          (<span>+</span> (<span>square</span> rdot)
             (<span>square</span> (<span>*</span> r thetadot))))
       (<span>U</span> r))))</pre></div>
<p dir="auto">and generate the two <a href="https://en.wikipedia.org/wiki/Lagrangian_mechanics#Euler%E2%80%93Lagrange_equations_and_Hamilton&#39;s_principle" rel="nofollow">Euler-Lagrange equations of
motion</a>
for the <code>r</code> and <code>theta</code> coordinates:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(let [potential-fn (literal-function &#39;U)
      L     (L-central-polar &#39;m potential-fn)
      state (up (literal-function &#39;r)
                (literal-function &#39;theta))]
  (render
   (((Lagrange-equations L) state) &#39;t)))
;;=&gt; &#34;down(- m r(t) (DÎ¸(t))Â² + m DÂ²r(t) + DU(r(t)), m (r(t))Â² DÂ²Î¸(t) + 2 m r(t) Dr(t) DÎ¸(t))&#34;"><pre>(<span>let</span> [potential-fn (<span>literal-function</span> &#39;U)
      L     (<span>L-central-polar</span> &#39;m potential-fn)
      state (<span>up</span> (<span>literal-function</span> &#39;r)
                (<span>literal-function</span> &#39;theta))]
  (<span>render</span>
   (((<span>Lagrange-equations</span> L) state) &#39;t)))
<span><span>;</span>;=&gt; &#34;down(- m r(t) (DÎ¸(t))Â² + m DÂ²r(t) + DU(r(t)), m (r(t))Â² DÂ²Î¸(t) + 2 m r(t) Dr(t) DÎ¸(t))&#34;</span></pre></div>
<p dir="auto">There is so much more! This is a dense library, and lots of documentation
remains to be written. Some suggested next steps, for now:</p>
<ul dir="auto">
<li>Open up the live, interactive <a href="https://nextjournal.com/try/samritchie/sicmutils" rel="nofollow">Emmy tutorial on
Nextjournal</a>, play with the
examples above and start to explore on your own.</li>
<li>Read the <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT/doc/reference-manual" rel="nofollow">Emmy Reference Manual</a> (&#34;refman&#34;) for inspiration. All
of the code snippets in the refman will work in the <a href="https://nextjournal.com/try/samritchie/sicmutils" rel="nofollow">Nextjournal
environment</a>. Use the two
together.</li>
<li>Visit our <a href="https://cljdoc.org/d/org.mentat/emmy/CURRENT" rel="nofollow">CLJDocs</a> page for an introduction and detailed
documentation</li>
<li>Watch Colin&#39;s <a href="https://www.youtube.com/watch?v=7PoajCqNKpg" rel="nofollow">&#34;Physics in Clojure&#34;</a> talk for an overview
of Emmy and its implementation</li>
<li>Watch Sam&#39;s <a href="https://www.youtube.com/watch?v=B9kqD8vBuwU" rel="nofollow">&#34;Emmy: Moldable Physics and Lispy Microworlds&#34;</a>
talk for the motivation behind the visual extensions to Emmy</li>
<li>Visit the HTML version of <a href="https://tgvaughan.github.io/sicm/" rel="nofollow">Structure and Interpretation of Classical
Mechanics</a>. Many of the SICM exercises have
been worked using Emmy; they live at <a href="https://nextjournal.com/sicm" rel="nofollow">this Nextjournal
page</a>.</li>
</ul>

<p dir="auto">If you want to use <code>Emmy</code> with <a href="https://clerk.vision" rel="nofollow">Clerk</a>, check out the <a href="https://github.com/mentat-collective/emmy/tree/main/resources/emmy/clerk"><code>emmy/clerk</code>
template</a>. This <a href="https://github.com/seancorfield/deps-new"><code>deps-new</code></a> template
will generate a Clerk project for you, fully configured to use <code>Emmy</code> in your
Clerk notebooks.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Interactive Documentation via Clerk</h2><a id="user-content-interactive-documentation-via-clerk" aria-label="Permalink: Interactive Documentation via Clerk" href="#interactive-documentation-via-clerk"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The project&#39;s <a href="https://emmy.mentat.org" rel="nofollow">interactive documentation</a> was generated
using Nextjournal&#39;s <a href="https://clerk.vision" rel="nofollow">Clerk</a>. If you&#39;d like to edit or play with the
documentation, you&#39;ll need to install</p>
<ul dir="auto">
<li><a href="https://nodejs.org/en/" rel="nofollow">node.js</a></li>
<li>The <a href="https://clojure.org/guides/install_clojure" rel="nofollow">Clojure command line tool</a></li>
<li><a href="https://github.com/babashka/babashka#installation">Babashka</a></li>
</ul>
<p dir="auto">Next, clone the repository:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone git@github.com:mentat-collective/emmy.git
cd emmy"><pre>git clone git@github.com:mentat-collective/emmy.git
<span>cd</span> emmy</pre></div>
<p dir="auto">Run this command in the cloned repository:</p>

<p dir="auto">This will open a browser window to <code>http://localhost:7777</code> with the contents of
the documentation notebook. Any edits you make to <code>dev/emmy/notebook.clj</code>
will be picked up and displayed in the browser on save.</p>

<p dir="auto"><a href="https://mitpress.mit.edu/9780262028967/structure-and-interpretation-of-classical-mechanics/" rel="nofollow">SICM</a> and <a href="https://mitpress.mit.edu/9780262019347/functional-differential-geometry/" rel="nofollow">FDG</a> can be thought of as spiritual
successors to <a href="https://mitpress.mit.edu/9780262510875/structure-and-interpretation-of-computer-programs/" rel="nofollow">The Structure and Interpretation of Computer
Programs</a>, a very influential textâ€”as I can attest, since
carefully reading this book in my 30s changed my life as a programmer. To see
the same techniques applied to differential geometry and physics is an
irresistible lure.</p>
<p dir="auto">Scmutils is an excellent system, but it is written in an older variant of LISP
(Scheme) and is tied to a particular implementation of Schemeâ€”MIT/GNU Scheme.
(There is a <a href="http://www.cs.rochester.edu/~gildea/guile-scmutils/" rel="nofollow">port to Guile</a>, but due to the fact that Guile does not
support MIT Scheme&#39;s <a href="https://www.gnu.org/software/mit-scheme/documentation/stable/mit-scheme-ref/Application-Hooks.html" rel="nofollow">apply
hooks</a>
some glue code is required to run examples from the book in that environment.)</p>
<p dir="auto">Having the system in Clojure offers a number of advantages. It is not necessary
to obtain or prepare a MIT/GNU Scheme executable to execute: only a Java runtime
is required. It does not require the X Window System for graphics, as MIT Scheme
does. All of the standard tooling for Java and Clojure become available, and
this is a lot compared to what we get with MIT/GNU scheme. Clojure support is
now extensive in any number of editors and IDEs. Even better, you can interact
with the system in the context of a <a href="https://github.com/mentat-collective/emmy/blob/main/jupyter">Jupyter notebook</a>.</p>
<p dir="auto">You can invoke the system from within Java or JavaScript code or use any Java or
JS packages you like together with the mathematics system. It&#39;s my hope that
continuing this project will extend the reach of SICM and FDG by allowing
experimentation and collaboration with them in modern environments.</p>

<p dir="auto">To cite this repository, see the &#34;Cite this Repository&#34; link on the top right of
the Github page. Citation information is generated from
<a href="https://github.com/mentat-collective/emmy/blob/main/CITATION.cff"><code>CITATION.cff</code></a>.</p>
<p dir="auto">Here is the generated BibTeX entry:</p>
<div data-snippet-clipboard-copy-content="@software{Ritchie_Emmy_Functional_Computer_2016},
author = {Ritchie, Sam and Smith, Colin},
license = {GPL-3.0},
month = {4},
title = {{Emmy: Functional Computer Algebra in Clojure}},
url = {https://github.com/mentat-collective/emmy},
version = {0.31.0},
year = {2016}"><pre><code>@software{Ritchie_Emmy_Functional_Computer_2016},
author = {Ritchie, Sam and Smith, Colin},
license = {GPL-3.0},
month = {4},
title = {{Emmy: Functional Computer Algebra in Clojure}},
url = {https://github.com/mentat-collective/emmy},
version = {0.31.0},
year = {2016}
</code></pre></div>
<p dir="auto">In the above BibTeX entry, the version number is intended to be that from
<a href="https://github.com/mentat-collective/emmy/blob/main/resources/EMMY_VERSION">resources/EMMY_VERSION</a>, and the year corresponds to
the project&#39;s open-source release.</p>

<p dir="auto">Copyright Â© 2016-2023 Colin Smith, Sam Ritchie.</p>
<p dir="auto">Distributed under the <a href="https://github.com/mentat-collective/emmy/blob/main/LICENSE">GPL v3</a> license. See <a href="https://github.com/mentat-collective/emmy/blob/main/LICENSE">LICENSE</a>.</p>
</article></div></div>
  </body>
</html>
