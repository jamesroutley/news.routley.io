<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://m4xshen.dev/posts/vim-command-workflow/">Original</a>
    <h1>Practical Vim Command Workflow</h1>
    
    <div id="readability-page-1" class="page"><div>  <article> <div>  <p><time datetime="2023-01-26T00:00:00.000Z" data-astro-transition-scope="astro-ugd3l5cb-2"> Jan 26, 2023 </time> </p> <hr/>  <p>There are many commands in Vim, which means that you can achieve a same goal with many approaches. Therefore it is difficult for beginner to learn how to accomplish an editing task with less keystrokes. In this tutorial, I’ll share my Vim command workflow and give you some guidelines about how to move/edit text in Vim efficiently.</p>
<h2 id="guidelines">Guidelines</h2>
<p>Here are some general rules of my workflow.</p>
<ol>
<li>Don’t use arrow keys and mouse.</li>
<li>Use relative jump (eg: <code>5k 12j</code>) for vertical movement inside screen.</li>
<li>Use <code>CTRL-U CTRL-D CTRL-B CTRL-F gg G</code> for vertical movement outside screen.</li>
<li>Use word-motion (<code>w W b B e E ge gE</code>) for short distance horizontal movement.</li>
<li>Use <code>f F t T 0 ^ $ , ;</code> for mid long distance horizontal movement.</li>
<li>Use <code>operator + motion/text-object</code> (eg: <code>ci{ d5j</code>) whenever possible.</li>
</ol>
<p>If you are not familiar with some of these concepts, please learn about the <a href="https://m4xshen.dev/posts/vim-basic-commands">Essential Vim commands for efficient text editing</a> first.</p>
<h2 id="examples">Examples</h2>
<p>Here are 4 real situations I faced when creating a todo list website with javascript. You can think about how you will achieve the editing goal first and then see my approach.</p>
<p>Notes:</p>
<ul>
<li><code>^</code> or <code>v</code> points to the position of the cursor.</li>
<li>There are line number and relative line number on the left.</li>
</ul>
<h3 id="situation-1">Situation 1</h3>
<p>Goal: Change <code>activeList</code> to <code>this</code> and add a <code>;</code> at the end of the line.</p>
<pre tabindex="0"><code><span><span>// current mode: Normal</span></span>
<span><span>  2</span><span> if</span><span>(</span><span>this</span><span>.sortMethod </span><span>==</span><span> &#39;Name&#39;</span><span>) {</span></span>
<span><span>  1</span><span>   activeList.uncheckedTodo.</span><span>sort</span><span>(sortWithName)</span></span>
<span><span>189</span><span> }</span></span>
<span><span>    ^</span></span></code></pre>
<p>My approach is <code>-cwthis&lt;ESC&gt;A;&lt;ESC&gt;</code>.</p>
<ul>
<li><code>-</code>: Go 1 line upward, on the first non-blank character</li>
<li><code>cwthis</code>: Change the word and type <code>this</code>.</li>
<li><code>&lt;ESC&gt;</code>: Leave insert mode.</li>
<li><code>A;&lt;ESC&gt;</code>: Jump to the end of the line, type <code>;</code> and leave Insert mode.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/74842863/215338597-2ec8d0f1-dfc3-47ef-9cfd-f646fb4f1a57.gif" alt="situation 1"/></p>
<h3 id="situation-2">Situation 2</h3>
<p>Goal: Change <code>i-s+1</code> to <code>d</code> and add <code>new </code> before <code>Date(y, m, d)</code>.</p>
<pre tabindex="0"><code><span><span>// current mode: Normal</span></span>
<span><span>454</span><span> console.</span><span>log</span><span>(</span><span>Date</span><span>(y, m, i</span><span>-</span><span>s</span><span>+</span><span>1</span><span>));</span></span>
<span><span>                        ^</span></span></code></pre>
<p>My approach is <code>Wct)d&lt;C-o&gt;FDnew &lt;ESC&gt;</code>. (<code>&lt;C-o&gt;</code> means <code>CTRL-O</code>)</p>
<ul>
<li><code>W</code>: Go one word forward, ignore symbol.</li>
<li><code>ct)d</code>: Change till before the occurrence of <code>)</code> to the right and type <code>d</code>.</li>
<li><code>&lt;C-o&gt;</code>: Execute one command in Normal mode and then return to Insert mode.</li>
<li><code>FD</code>: Go to the occurrence of <code>D</code> to the left.</li>
<li><code>new &lt;ESC&gt;</code>: Type <code>new </code> and leave Insert mode.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/74842863/215338599-406d97d0-18a1-49f3-a7c7-817887b60724.gif" alt="situation 2"/></p>
<h3 id="situation-3">Situation 3</h3>
<p>Goal: Add a line <code>activeList.sortMethod = &#39;Date&#39;;</code> below <code>document.querySelector(&#39;.sort-date&#39;)...</code>.</p>
<pre tabindex="0"><code><span><span>// current mode: Insert</span></span>
<span><span>  1</span><span> document.</span><span>querySelector</span><span>(</span><span>&#39;.sort-name&#39;</span><span>).</span><span>addEventListener</span><span>(</span><span>&#39;click&#39;</span><span>, () </span><span>=&gt;</span><span> {</span></span>
<span><span>343</span><span>   activeList.sortMethod </span><span>=</span><span> &#39;Name&#39;</span><span>; </span></span>
<span><span>  1</span><span>   activeList.</span><span>update</span><span>();           </span><span>^</span></span>
<span><span>  2</span><span> })</span></span>
<span><span>  3</span><span> </span></span>
<span><span>  4</span><span> document.</span><span>querySelector</span><span>(</span><span>&#39;.sort-date&#39;</span><span>).</span><span>addEventListener</span><span>(</span><span>&#39;click&#39;</span><span>, () </span><span>=&gt;</span><span> {</span></span>
<span><span>  5</span><span>   activeList.</span><span>update</span><span>();</span></span>
<span><span>  6</span><span> })</span></span></code></pre>
<p>My approach is <code>&lt;ESC&gt;yy4jpci&#39;Date&lt;ESC&gt;</code>.</p>
<ul>
<li><code>&lt;ESC&gt;</code>: Leave insert mode.</li>
<li><code>yy</code>: Yank current line.</li>
<li><code>4j</code>: Go down 4 line.</li>
<li><code>p</code>: Paste the line we just yanked.</li>
<li><code>ci&#39;Date&lt;ESC&gt;</code>: Change the content inside single quote, type <code>Date</code> and leave Insert mode.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/74842863/215339692-810b79ea-fe3d-41f9-b3d0-dcff3cb11810.gif" alt="situation 3"/></p>
<h3 id="situation-4">Situation 4</h3>
<p>Goal: Move the whole block of <code>//sort</code> (line 200 ~ 207) to the beginning of <code>update()</code> function.</p>
<pre tabindex="0"><code><span><span>// current mode: Normal</span></span>
<span><span>  8</span><span> update</span><span>() {</span></span>
<span><span>  7</span><span>   this</span><span>.checkedTodo.</span><span>forEach</span><span>((</span><span>todo</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>  6</span><span>     this</span><span>.element.</span><span>insertBefore</span><span>(todo.element, todoCreator.nextSibling);</span></span>
<span><span>  5</span><span>   });</span></span>
<span><span>  4</span><span>   this</span><span>.uncheckedTodo.</span><span>forEach</span><span>((</span><span>todo</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span><span>  3</span><span>     this</span><span>.element.</span><span>insertBefore</span><span>(todo.element, todoCreator.nextSibling);</span></span>
<span><span>  2</span><span>   });</span></span>
<span><span>  1</span><span>         v</span></span>
<span><span>200</span><span>   // sort</span></span>
<span><span>  1</span><span>   if</span><span>(</span><span>this</span><span>.sortMethod </span><span>==</span><span> &#39;Name&#39;</span><span>) {</span></span>
<span><span>  2</span><span>     this</span><span>.uncheckedTodo.</span><span>sort</span><span>(sortWithName);</span></span>
<span><span>  3</span><span>   }</span></span>
<span><span>  4</span><span>   else</span><span> if</span><span>(</span><span>this</span><span>.sortMethod </span><span>==</span><span> &#39;Date&#39;</span><span>) {</span></span>
<span><span>  5</span><span>     this</span><span>.uncheckedTodo.</span><span>sort</span><span>(sortWithDate);</span></span>
<span><span>  6</span><span>   }</span></span>
<span><span>  7</span></span>
<span><span>  8</span><span>   createCalendar</span><span>(currentYear, currentMonth, </span><span>this</span><span>);</span></span>
<span><span>  9</span><span> }</span></span></code></pre>
<p>My approach is <code>dap8kp</code>.</p>
<ul>
<li><code>dap</code>: Delete around the paragraph.</li>
<li><code>8k</code>: Go up 8 lines.</li>
<li><code>p</code>: Paste the paragraph we just deleted.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/74842863/215338606-c2e3fe70-7221-4fdd-88e5-655fe24eca49.gif" alt="situation 4"/></p>
<h2 id="final-words">Final Words</h2>
<p>If you are using Neovim, I recommend you to try out a plugin <a href="https://github.com/m4xshen/hardtime.nvim">hardtime.nvim</a>, which can help you establish good command workflow and display hints for better commands.</p>
<p>If you just start learning Vim operators, motions, it may take some times to think of what commands to use for each situation. However, If you keep practicing and using them, you’ll become faster and faster. After a while, you’ll develop muscle memory for using these commands.</p>  </div> </article>   </div><div> <div><p>
© 2024 Max Shen. All rights reserved.
</p> </div> </div></div>
  </body>
</html>
