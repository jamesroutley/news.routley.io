<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shkspr.mobi/blog/2024/01/compressing-text-into-images/">Original</a>
    <h1>Compressing Text into Images</h1>
    
    <div id="readability-page-1" class="page"><article><a href="https://shkspr.mobi/blog/wp-content/uploads/2024/01/ascii_grey.png" itemprop="https://schema.org/image"></a><div itemprop="https://schema.org/articleBody"><p>(This is, I think, a silly idea. But sometimes the silliest things lead to unexpected results.)</p><p>The text of Shakespeare&#39;s Romeo and Juliet is about 146,000 characters long. Thanks to the English language, each character can be represented by a single byte.  So a plain Unicode text file of the play is about 142KB.</p><p>In <a href="https://jamesg.blog/2023/12/29/compression-adventures/">Adventures With Compression</a>, JamesG discusses a competition to compress text and poses an interesting thought:</p><blockquote><p>
Encoding the text as an image and compressing the image. I would need to use a lossless image compressor, and using RGB would increase the number of values associated with each word. Perhaps if I changed the image to greyscale? Or perhaps that is not worth exploring.</p></blockquote><p>Image compression algorithms are, generally, pretty good at finding patterns in images and squashing them down. So if we convert text to an image, will image compression help?</p><p>The English language and its punctuation are not very complicated, so the play only contains 77 unique symbols. The ASCII value of each character spans from 0 - 127. So let&#39;s create a greyscale image which each pixel has the same greyness as the ASCII value of the character.</p><p>Here&#39;s what it looks like when losslessly compressed to a PNG:</p><p><img fetchpriority="high" decoding="async" src="https://shkspr.mobi/blog/wp-content/uploads/2024/01/ascii_grey.png" alt="Random grey noise." width="512" height="277"/></p><p>That&#39;s down to 55KB! About 40% of the size of the original file. It is slightly <em>smaller</em> than ZIP, and about 9 bytes larger than Brotli compression.</p><p>The file can be read with the following Python:</p><pre><code>from PIL import Image
image  = Image.open(&#34;ascii_grey.png&#34;)
pixels = list(image.getdata())
ascii  = &#34;&#34;.join([chr(pixel) for pixel in pixels])
with open(&#34;rj.txt&#34;, &#34;w&#34;) as file:
    file.write(ascii)
</code></pre><p>But, even with the latest image compression algorithms, it is unlikely to compress much further; the image looks like random noise.  Yes, you and I know there is data in there. And a statistician looking for entropy would probably determine that the file contains readable data. But image compressors work in a different realm. They look for solid blocks, or predictable gradients, or other statistical features.</p><p>But there you go! A lossless image is a pretty efficient way to compress ASCII text.</p></div></article></div>
  </body>
</html>
