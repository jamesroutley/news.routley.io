<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://elijer.github.io/garden/Dev-Notes/LeetCode-Journal/Stock-Profits">Original</a>
    <h1>Stock Profits</h1>
    
    <div id="readability-page-1" class="page"><div id="quartz-body"><div><article><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/">Stock profits on leet code<svg viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>This one didn’t go very well. This was my solution:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="github-light github-dark"><code data-language="javascript" data-theme="github-light github-dark"><span data-line=""><span>/**</span></span>
<span data-line=""><span> * </span><span>@param</span><span> {number[]}</span><span> prices</span></span>
<span data-line=""><span> * </span><span>@return</span><span> {number}</span></span>
<span data-line=""><span> */</span></span>
<span data-line=""><span>var</span><span> maxProfit</span><span> =</span><span> function</span><span>(</span><span>prices</span><span>) {</span></span>
<span data-line=""><span>    profit </span><span>=</span><span> 0</span></span>
<span data-line=""><span>    let</span><span> reductionArray </span><span>=</span><span> [</span><span>...</span><span>prices]</span></span>
<span data-line=""> </span>
<span data-line=""><span>    for</span><span> (</span><span>let</span><span> i </span><span>=</span><span> 0</span><span>; i </span><span>&lt;</span><span> prices.</span><span>length</span><span> -</span><span> 1</span><span>; i</span><span>++</span><span>){</span></span>
<span data-line=""><span>      let</span><span> currentVal </span><span>=</span><span> prices[i]</span></span>
<span data-line=""><span>      reductionArray.</span><span>shift</span><span>()</span></span>
<span data-line=""><span>      let</span><span> highVal </span><span>=</span><span> Math.</span><span>max</span><span>(</span><span>...</span><span>reductionArray)</span></span>
<span data-line=""><span>      let</span><span> difference </span><span>=</span><span> highVal </span><span>-</span><span> currentVal</span></span>
<span data-line=""><span>      if</span><span> (difference </span><span>&gt;</span><span> profit){</span></span>
<span data-line=""><span>        profit </span><span>=</span><span> highVal </span><span>-</span><span> currentVal</span></span>
<span data-line=""><span>      } </span><span>else</span><span> {</span></span>
<span data-line=""><span>      }</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>    return</span><span> profit</span></span>
<span data-line=""><span>};</span></span>
<span data-line=""> </span>
<span data-line=""><span>console.</span><span>log</span><span>(</span><span>maxProfit</span><span>([</span><span>7</span><span>,</span><span>1</span><span>,</span><span>5</span><span>,</span><span>3</span><span>,</span><span>6</span><span>,</span><span>4</span><span>]))</span></span></code></pre></figure>
<p>This is like, at least a 50 minute solution. I DID get a working solution after 30 minutes, but it timed out. I thought I could weasel my way out of O(n^2) complexity with Math.max, but that’s obviously still a for loop. That was sort of wishful thinking.</p>
<p>So my second implementation didn’t fix much.</p>
<p>Claude gave me this incredibly simple solution:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="github-light github-dark"><code data-language="javascript" data-theme="github-light github-dark"><span data-line=""><span>var</span><span> maxProfit</span><span> =</span><span> function</span><span>(</span><span>prices</span><span>) {</span></span>
<span data-line=""><span>    let</span><span> minPrice </span><span>=</span><span> Infinity</span><span>;</span></span>
<span data-line=""><span>    let</span><span> maxProfit </span><span>=</span><span> 0</span><span>;</span></span>
<span data-line=""><span>    </span></span>
<span data-line=""><span>    for</span><span> (</span><span>let</span><span> price </span><span>of</span><span> prices) {</span></span>
<span data-line=""><span>        if</span><span> (price </span><span>&lt;</span><span> minPrice) {</span></span>
<span data-line=""><span>            minPrice </span><span>=</span><span> price;</span></span>
<span data-line=""><span>        } </span><span>else</span><span> if</span><span> (price </span><span>-</span><span> minPrice </span><span>&gt;</span><span> maxProfit) {</span></span>
<span data-line=""><span>            maxProfit </span><span>=</span><span> price </span><span>-</span><span> minPrice;</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>    </span></span>
<span data-line=""><span>    return</span><span> maxProfit;</span></span>
<span data-line=""><span>};</span></span></code></pre></figure>
<p>Let me walk through it with comments:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="github-light github-dark"><code data-language="javascript" data-theme="github-light github-dark"><span data-line=""><span>var</span><span> maxProfit</span><span> =</span><span> function</span><span>(</span><span>prices</span><span>) {</span></span>
<span data-line=""><span>    let</span><span> minPrice </span><span>=</span><span> Infinity</span><span>; </span><span>// oh wow didn&#39;t know that existed</span></span>
<span data-line=""><span>    let</span><span> maxProfit </span><span>=</span><span> 0</span><span>; </span><span>// familiar</span></span>
<span data-line=""><span>    </span></span>
<span data-line=""><span>    for</span><span> (</span><span>let</span><span> price </span><span>of</span><span> prices) { </span><span>// nice, just a for of, in order</span></span>
<span data-line=""><span>        if</span><span> (price </span><span>&lt;</span><span> minPrice) { </span><span>// get the lowest price so far</span></span>
<span data-line=""><span>            minPrice </span><span>=</span><span> price; </span><span>// save it</span></span>
<span data-line=""><span>        } </span><span>else</span><span> if</span><span> (price </span><span>-</span><span> minPrice </span><span>&gt;</span><span> maxProfit) {</span></span>
<span data-line=""><span>        // BUT IF NOT THE LOWEST PRICE, check and see if minPrice</span></span>
<span data-line=""><span>        // i.e. LOOKING BACKWARDS at the most attractive starting point</span></span>
<span data-line=""><span>        // yields best profit</span></span>
<span data-line=""><span>        // The else if here is a really extra but nice optimization</span></span>
<span data-line=""><span>        // This could just be two separate conditionals</span></span>
<span data-line=""><span>        // But it&#39;s true that they are mutually exclusive</span></span>
<span data-line=""><span>            maxProfit </span><span>=</span><span> price </span><span>-</span><span> minPrice;</span></span>
<span data-line=""><span>        // And damn. That&#39;s it.</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>    </span></span>
<span data-line=""><span>    return</span><span> maxProfit;</span></span>
<span data-line=""><span>};</span></span></code></pre></figure>
<p>So looking at Claude’s answer, it’s like I was stuck in this “looking forwards” paradigm. But there was this looking backwards option the whole time and I was too stuck in my O(n2) bullshit to realize it.</p>
<p>The difference has TWO sides - it requires  a high number farther up, and a lower number farther down. We’re looking, fundamentally, for the largest range, as long as that range goes low high in the same direction as the array progresses.</p></article><hr/></div></div></div>
  </body>
</html>
