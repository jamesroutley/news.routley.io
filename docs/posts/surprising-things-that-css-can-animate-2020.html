<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://codersblock.com/blog/the-surprising-things-that-css-can-animate/">Original</a>
    <h1>Surprising things that CSS can animate (2020)</h1>
    
    <div id="readability-page-1" class="page"><div><div><p>When you think of animating CSS properties, which ones come to mind? I recently started wondering about the ones that don’t come to mind — properties that aren’t typically associated with animation, but turn out to be animatable.</p><p>This articles explores some of the unexpected things that CSS can animate and some nifty things you can do by animating them.</p><h2 id="understanding-interpolation"><a href="#understanding-interpolation"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Understanding Interpolation</span></a></h2><p>When your browser animates a CSS property, it creates a sequence of intermediate values over the course of the animation. This is referred to as <strong>interpolation</strong>.</p><p>Here’s a widget that will animate <code>height</code> on a <code>&lt;div&gt;</code> and show the interpolated values during the animation. Give it a try.</p><p data-height="400" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="xxZwpMy" data-pen-title="Interpolation Widget (height)"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/xxZwpMy">Interpolation Widget (height)</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>The results are pretty much what you’d expect. Interpolating <code>height</code> values from <code>80px</code> to <code>160px</code> is straightfoward: it’s a series of incremented values.</p><p>Now let’s do <code>z-index</code>.</p><p data-height="500" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="oNbjpmV" data-pen-title="Interpolation Widget (z-index)"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/oNbjpmV">Interpolation Widget (z-index)</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>Yes, you can animate <code>z-index</code>! It’s not visually apparent in this demo, but seeing the interpolated values go from <code>1</code> to <code>5</code> confirms it. What’s interesting is that we don’t see any decimal points like we did for <code>height</code>. We only get integers, which makes sense for <code>z-index</code>.</p><p>Alright, <strong>let’s do something wacky</strong>. What happens if we try to animate <code>text-transform</code> from <code>lowercase</code> to <code>uppercase</code>?</p><p data-height="400" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="wvMKpOW" data-pen-title="Interpolation Widget (text-transform)"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/wvMKpOW">Interpolation Widget (text-transform)</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>Something happened! Unless you’re using Safari (sorry). But for everyone else, you can see the text flip from “div” to “DIV”. This is known as a <strong>discrete animation</strong> and the <a href="https://www.w3.org/TR/web-animations-1/#animating-properties">W3C Web Animations working draft</a> describes the behavior as follows:</p><blockquote><p>The property’s values cannot be meaningfully combined, thus it is not additive and interpolation swaps from V<sub>a</sub> to V<sub>b</sub> at 50% (p=0.5)…</p></blockquote><p>In other words, if there’s not a sensible way to gradually interpolate from the start value to the end value, then <strong>just switch between them halfway through</strong>.</p><p>And there’s our spark. If we look beyond properties with obvious gradual visual transitions, we’ll find that <strong>a lot of unexpected properties can be animated</strong>, either discretely or with unique interpolations.</p><h2 id="layered-animations"><a href="#layered-animations"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Layered Animations</span></a></h2><p>Let’s go back to <code>z-index</code>. You can animate <code>z-index</code> to achieve layered animations. Here’s an example with Big Boo floating through walls.</p><p data-height="520" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="vYLNpoY" data-pen-title="Spooky Boo!"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/vYLNpoY">Spooky Boo!</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>There are 5 walls, each with a <code>z-index</code> of <code>1</code> through <code>5</code>. The Big Boo has its <code>z-index</code> animated from <code>1</code> to <code>6</code>, moving it in front of each wall, before alternating back to move behind each wall.</p><pre><code><span>.boo-move</span> <span>{</span></code></pre><p>There are additional <code>transform</code> declarations and a separate <code>bob</code> animation to complete the effect of the Big Boo floating hauntingly towards us as it goes through walls. Check the CSS in the demo if you’re interested.</p><p>Here’s another demo that plays with <code>z-index</code>, this time to animate overlapping cards.</p><p data-height="460" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="QWyjaeg" data-pen-title="Overlapping Sushi Cards"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/QWyjaeg">Overlapping Sushi Cards</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>To swing a card forwards, we apply this animation.</p><pre><code><span><span>@keyframes</span> swing-forwards</span> <span>{</span></code></pre><p>The <code>z-index</code> starts at <code>1</code> (behind) and ends at <code>2</code> (in front).</p><p>At the same time, the other card swings backwards with this animation. It’s essentially the same, but reversed.</p><pre><code><span><span>@keyframes</span> swing-backwards</span> <span>{</span></code></pre><p>In both cases, the <code>z-index</code> value flips right in the middle, at <code>50%</code>. This is the moment when the cards are not overlapping, so changing the <code>z-index</code> won’t cause a card to clip through the other.</p><h2 id="animating-css-generated-content"><a href="#animating-css-generated-content"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Animating CSS Generated Content</span></a></h2><p>Here’s a fun one. This demo is an auto-incrementing binary counter with decimal output using <strong>no JavaScript</strong>. Works everywhere but Safari. And no, I’m not cheesing that decimal output by hardcoding <code>0</code> through <code>15</code> somewhere.</p><p data-height="340" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="qBbOpev" data-pen-title="CSS Binary Counter"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/qBbOpev">CSS Binary Counter</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>The demo works by (discretely) animating 2 properties: <code>content</code> and <code>counter-increment</code>. Here’s the relevant CSS.</p><pre><code><span>.widget-wrapper</span> <span>{</span></code></pre><p>Each digit has <code>--increment</code> set with its value in decimal. Conveniently, this value is also used to calculate the digit’s <code>animation-duration</code>. For example, <code>.digit-4</code> has an <code>--increment</code> value of <code>8</code> so its <code>animation-duration</code> works out to <code>16s</code>. Its <code>content</code> property is animated to be <code>&#39;0&#39;</code> for half that time, then flip to <code>&#39;1&#39;</code> for the other half, repeating infinitely.</p><p>The decimal output uses a <a href="https://codersblock.com/blog/fun-times-with-css-counters/">CSS counter</a>, a neat feature of CSS that lets you keep a running tally. A <code>sum</code> counter is started on <code>.widget-wrapper</code>, then whenever a digit’s <code>content</code> is animated to <code>&#39;1&#39;</code>, we also animate <code>counter-increment</code> to add its <code>--increment</code> value to <code>sum</code>. The resulting total of <code>sum</code> is displayed in <code>.decimal-output</code>.</p><p>What’s neat is that <code>.decimal-output</code> <strong>isn’t actually animated</strong>. It’s simply reflecting the result, in real-time, of various <code>counter-increment</code> properties being animated.</p><h2 id="fade-and-go-away"><a href="#fade-and-go-away"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Fade and Go Away</span></a></h2><p>Consider a modal that you want to fade out when dismissed. Animating <code>opacity</code> takes care of that. But even when an element reaches <code>opacity: 0</code> it’s still there, invisibly covering page content and blocking clicks.</p><p>You could use a bit of JavaScript with <code>setTimeout</code> to get rid of the modal at the right time. Another option is to (discretely) animate <code>visibility</code>.</p><pre><code><span>.modal</span> <span>{</span></code></pre><p>And here it is in action.</p><p data-height="410" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="vYLNdBY" data-pen-title="Fading Modal"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/vYLNdBY">Fading Modal</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>But wait a second… if <code>visibility</code> is animated discretely, shouldn’t it flip to <code>hidden</code> halfway through the animation, before the fade has finished? Normally yes, but <code>visibility</code> has <a href="https://www.w3.org/TR/web-animations-1/#animating-visibility">special interpolation rules</a>!</p><blockquote><p>For the visibility property, visible is interpolated as a discrete step where values of p between 0 and 1 map to visible and other values of p map to the closer endpoint…</p></blockquote><p>In other words, <code>visibility</code> won’t flip to <code>hidden</code> until the very last moment. Here’s that interpolation widget again so you can see for yourself.</p><p data-height="400" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="rNxOpRv" data-pen-title="Interpolation Widget (visibility)"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/rNxOpRv">Interpolation Widget (visibility)</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><h2 id="text-selection-trick"><a href="#text-selection-trick"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Text Selection Trick</span></a></h2><p>Here’s a widget that lets users click once to select all text, then click again to select some of the text. This is something I wrote about in my <a href="https://codersblock.com/blog/using-css-to-control-text-selection/">previous article</a>, so check there if you want more context. Doesn’t work in Safari, but degrades reasonably well.</p><p data-height="480" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="wvKdjyZ" data-pen-title="Select All... Then Select Some"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/wvKdjyZ">Select All... Then Select Some</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>The key piece is a discrete animation that changes <code>user-select</code> from <code>all</code> to <code>text</code> after the element containing the text is focused.</p><pre><code><span>code</span> <span>{</span></code></pre><p>Note that the <code>&lt;code&gt;</code> element needs to be made focusable with <code>tabindex</code> for this to work.</p><pre><code><span><span><span>&lt;</span>code</span> <span>tabindex</span><span><span>=</span><span>&#34;</span>0<span>&#34;</span></span><span>&gt;</span></span>code snippet goes here<span><span><span>&lt;/</span>code</span><span>&gt;</span></span></code></pre><h2 id="animating-shadows"><a href="#animating-shadows"><svg aria-hidden="true"><use xlink:href="#link"></use></svg><span>Animating Shadows</span></a></h2><p>The <code>box-shadow</code> property can take multiple sets of values, as a comma-separated list, to create multiple shadows. Here’s some CSS we’ll be using soon.</p><pre><code><span>div</span> <span>{</span></code></pre><p>By animating <code>box-shadow</code>, you animate a list of shadows into another list of shadows. Each shadow in the starting list is interpolated to the corresponding shadow in the ending list. Each interpolation is smooth, unless one has <code>inset</code> and the other doesn’t, in which case the entire animation falls back to being discrete.</p><p>Let’s add the following CSS to animate the <code>box-shadow</code> from earlier. This will animate the <code>offset-x</code> values of some of the shadows.</p><pre><code><span>div</span> <span>{</span></code></pre><p>The result is a soft pulsating effect, with colored shadows shifting side to side.</p><p data-height="440" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="KKVdQPX" data-pen-title="Pulsating Marble"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/KKVdQPX">Pulsating Marble</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>The same concept applies to <code>text-shadow</code>. Hover/tap that chicken nugget to see another animation using multiple shadows.</p><p data-height="530" data-theme-id="35302" data-default-tab="result" data-user="lonekorean" data-slug-hash="JjGYpPx" data-pen-title="That Chicken Nugget"><span>See the Pen <a href="https://codepen.io/lonekorean/pen/JjGYpPx">That Chicken Nugget</a> by Will Boyd (<a href="https://codepen.io/lonekorean">@lonekorean</a>) on <a href="https://codepen.io">CodePen</a>.</span></p><p>The HTML wraps each word in its own <code>&lt;span&gt;</code>.</p><pre><code><span><span><span>&lt;</span>div</span> <span>class</span><span><span>=</span><span>&#34;</span>words<span>&#34;</span></span><span>&gt;</span></span></code></pre><p>And here’s the relevant CSS.</p><pre><code><span>.words span</span> <span>{</span></code></pre><p>Notice how it animates a single gray shadow to multiple colored shadows. In these cases where the starting and ending lists aren’t the same length, the shorter list is padded with “null” shadows (transparent and lengthless) so the lists match up nicely for interpolation.</p><p>Hopefully I’ve shown you some interesting things that can be achieved by animating CSS properties not often considered for animation. There are many more properties to play with that this article didn’t get to, so keep exploring!</p><p>My intention was to show what’s possible, but as always, please use your own judgement before applying any techniques. Not everything needs to be animated and sometimes JavaScript is the right answer.</p></div></div></div>
  </body>
</html>
