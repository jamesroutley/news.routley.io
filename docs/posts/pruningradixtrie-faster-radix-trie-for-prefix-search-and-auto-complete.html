<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/wolfgarbe/PruningRadixTrie">Original</a>
    <h1>PruningRadixTrie – Faster Radix trie for prefix search and auto-complete</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><strong>PruningRadixTrie - 1000x faster Radix trie</strong> for prefix search &amp; auto-complete</p>
<p dir="auto">The PruningRadixTrie is a novel data structure, derived from a radix trie - but 3 orders of magnitude faster.</p>
<p dir="auto">A <a href="https://en.wikipedia.org/wiki/Radix_tree" rel="nofollow">Radix Trie</a> or Patricia Trie is a space-optimized trie (prefix tree).</p>
<p dir="auto">In many cases, we are not interested in a complete set of all children for a given prefix, but only in the top-k most relevant terms.
Especially for short prefixes, this results in a <strong>massive reduction of lookup time</strong> for the top-10 results.
On the other hand, a complete result set of millions of suggestions wouldn&#39;t be helpful at all for autocompletion.</p>
<hr/>
<h3 tabindex="-1" id="user-content-performance" dir="auto"><a href="#performance">Performance<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/bbf9fcb7acab4c6564370f08336c5c706b26b98822cfb32611f2393c74d03ff5/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a4861754250454452697779514a37374f754a4f6a33672e706e67"><img src="https://camo.githubusercontent.com/bbf9fcb7acab4c6564370f08336c5c706b26b98822cfb32611f2393c74d03ff5/68747470733a2f2f6d69726f2e6d656469756d2e636f6d2f6d61782f313430302f312a4861754250454452697779514a37374f754a4f6a33672e706e67" alt="Benchmark" title="Benchmark" data-canonical-src="https://miro.medium.com/max/1400/1*HauBPEDRiwyQJ77OuJOj3g.png"/></a>
</p>
<p dir="auto">While 36 ms for an autocomplete might seem fast enough for a single user, it becomes insufficient when we have to serve thousands of users in parallel. Then autocomplete lookups in large dictionaries are only feasible when powered by something much faster than an ordinary radix trie.</p>
<p dir="auto">While a prefix of length=1 is not very useful for the Latin alphabet, it does make sense for CJK languages. Also, there are many more application fields for a fast prefix search algorithm beyond character-wise word completion: Instead of characters, the prefix can be composed of arbitrary items, e.g.
whole words in a query completion, or towns in a long routing sequence.</p>
<h3 tabindex="-1" id="user-content-dictionary" dir="auto"><a href="#dictionary">Dictionary<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><a href="https://github.com/wolfgarbe/PruningRadixTrie/blob/master/PruningRadixTrie.Benchmark/terms.zip">Terms.txt</a> contains 6 million unigrams and bigrams derived from English Wikipedia, with term frequency counts used for ranking. But you can use any frequency dictionary for any language and domain of your choice.</p>
<h3 tabindex="-1" id="user-content-blog-posts" dir="auto"><a href="#blog-posts">Blog Posts<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><a href="https://seekstorm.com/blog/pruning-radix-trie/" rel="nofollow">The Pruning Radix Trie — a Radix trie on steroids</a></p>
<h3 tabindex="-1" id="user-content-application" dir="auto"><a href="#application">Application:<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">The PruningRadixTrie is perfect for auto-completion, query completion or any other prefix search in large dictionaries.
While 37 ms for an auto-complete might seem fast enough for a <strong>single user</strong>, it becomes a completely different story if we have to serve <strong>thousands of users in parallel</strong>. Then autocomplete lookups in large dictionaries become only feasible when powered by something much faster than an ordinary radix trie.</p>
<h3 tabindex="-1" id="user-content-usage" dir="auto"><a href="#usage">Usage:<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><strong>Create Object</strong></p>
<div data-snippet-clipboard-copy-content="PruningRadixtrie pruningRadixTrie = new PruningRadixtrie();"><pre><code>PruningRadixtrie pruningRadixTrie = new PruningRadixtrie();
</code></pre></div>
<p dir="auto"><strong>AddTerm:</strong> insert term and term frequency count into Pruning Radix Trie. Frequency counts for same term are summed up.</p>
<div data-snippet-clipboard-copy-content="pruningRadixTrie.AddTerm(&#34;microsoft&#34;, 1000);"><pre><code>pruningRadixTrie.AddTerm(&#34;microsoft&#34;, 1000);
</code></pre></div>
<p dir="auto"><strong>GetTopkTermsForPrefix:</strong> retrieve the top-k most relevant terms for a given prefix from the Pruning Radix Trie.</p>
<div data-snippet-clipboard-copy-content="string prefix=&#34;micro&#34;;
int topK=10;
var results = pruningRadixTrie.GetTopkTermsForPrefix(prefix, topK, out long termFrequencyCountPrefix);
foreach ((string term,long termFrequencyCount) in results) Console.WriteLine(term+&#34; &#34;+termFrequencyCount);"><pre><code>string prefix=&#34;micro&#34;;
int topK=10;
var results = pruningRadixTrie.GetTopkTermsForPrefix(prefix, topK, out long termFrequencyCountPrefix);
foreach ((string term,long termFrequencyCount) in results) Console.WriteLine(term+&#34; &#34;+termFrequencyCount);
</code></pre></div>
<p dir="auto"><strong>ReadTermsFromFile:</strong> Deserialise the Pruning Radix Trie from disk for persistence.</p>
<div data-snippet-clipboard-copy-content="pruningRadixTrie.ReadTermsFromFile(&#34;terms.txt&#34;);"><pre><code>pruningRadixTrie.ReadTermsFromFile(&#34;terms.txt&#34;);
</code></pre></div>
<p dir="auto"><strong>WriteTermsToFile:</strong> Serialise the Pruning Radix Trie to disk for persistence.</p>
<div data-snippet-clipboard-copy-content="pruningRadixTrie.WriteTermsToFile(&#34;terms.txt&#34;);"><pre><code>pruningRadixTrie.WriteTermsToFile(&#34;terms.txt&#34;);
</code></pre></div>
<h3 tabindex="-1" id="user-content-ports" dir="auto"><a href="#ports">Ports<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">The following third party ports or reimplementations to other programming languages have not been tested by myself whether they are an exact port, error free, provide identical results or are as fast as the original algorithm.</p>
<p dir="auto"><strong>Java</strong></p>
<p dir="auto"><strong>Python</strong></p>
<p dir="auto"><strong>Rust</strong></p>
<hr/>
<p dir="auto"><strong>PruningRadixTrie</strong> is contributed by <a href="https://seekstorm.com" rel="nofollow"><strong>SeekStorm</strong> - the high performance Search as a Service &amp; search API</a></p>
</article>
          </div></div>
  </body>
</html>
