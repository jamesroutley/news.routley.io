<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/bjesus/teatime">Original</a>
    <h1>Show HN: TeaTime â€“ distributed book library powered by SQLite, IPFS and GitHub</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">
TeaTime is a fully static distributed library system powered by IPFS, SQLite, and GitHub
</p>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/55081/382481806-caacdcde-8ad9-49af-915f-c93a52c7bf11.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI4MTg1MzIsIm5iZiI6MTczMjgxODIzMiwicGF0aCI6Ii81NTA4MS8zODI0ODE4MDYtY2FhY2RjZGUtOGFkOS00OWFmLTkxNWYtYzkzYTUyYzdiZjExLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDE4MjM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTY4NjVmYTI0MTA1NGFlZTJmMDRiOTVhN2YyNGU1OWFlMmVlNmJiMzIxOWVhNGViMzQyNDk2NmIxM2U3YmU2NDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.nWttK3WOszwixHJKSV1SqcY5DJq_c2_kmreh7Nt9554"><img src="https://private-user-images.githubusercontent.com/55081/382481806-caacdcde-8ad9-49af-915f-c93a52c7bf11.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI4MTg1MzIsIm5iZiI6MTczMjgxODIzMiwicGF0aCI6Ii81NTA4MS8zODI0ODE4MDYtY2FhY2RjZGUtOGFkOS00OWFmLTkxNWYtYzkzYTUyYzdiZjExLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDE4MjM1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTY4NjVmYTI0MTA1NGFlZTJmMDRiOTVhN2YyNGU1OWFlMmVlNmJiMzIxOWVhNGViMzQyNDk2NmIxM2U3YmU2NDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.nWttK3WOszwixHJKSV1SqcY5DJq_c2_kmreh7Nt9554" height="300"/></a> </p>

<p dir="auto">The TeaTime web application is completely decoupled from its databases and the files it fetches. The databases used in TeaTime are <a href="https://github.com/search?q=topic%3Ateatime-database&amp;type=repositories">GitHub repositories tagged with the teatime-database topic</a>, which are published on GitHub Pages. Each repository contains a <a href="https://github.com/bjesus/teatime-database/blob/main/config.json">config.json</a> file that points to an SQLite database. Before a user performs a search in TeaTime, they choose which database to use and then TeaTime queries the SQLite database using <a href="https://github.com/phiresky/sql.js-httpvfs">sql.js-httpvfs</a>. Each row in the SQLite database is an item in the library, and a file hash column is used for getting the item from IPFS.</p>
<p dir="auto">Since the web application is a static site, and the databases are comprised of static files, both can be easily forked, replicated, and deployed. Frontend instances are <a href="https://github.com/search?q=topic%3Ateatime-instance&amp;type=repositories">GitHub repositories tagged with the teatime-instance topic</a>. With the files being served off IPFS, this distributed architecture contributes to TeaTime&#39;s resilience.</p>

<ul dir="auto">
<li>Search by title, author, year or format</li>
<li>Maintain reading history, and return to page when re-opening file</li>
<li>Download files locally</li>
<li>Cache files in IndexedDB for fast loading</li>
<li>Drop files on TeaTime to render them</li>
<li>Dark mode and full screen mode</li>
<li>No cookies, no login</li>
<li><strong>...Completely distributed</strong></li>
</ul>

<p dir="auto">TeaTime is Nuxt.js application. You can easily run it locally by cloning the repository and following these steps:</p>
<ol dir="auto">
<li>Install the dependencies: <code>npm install</code></li>
<li>Run the server: <code>npm run dev</code></li>
<li>Navigate to <code>http://localhost:3000</code></li>
</ol>
<p dir="auto">Check out the <a href="https://nuxt.com/docs/getting-started" rel="nofollow">Nuxt documentation</a> for more information.</p>

<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">The easiest way to create your own database is by forking the <a href="https://github.com/bjesus/teatime-json-database/">JSON-based database repository</a> and adjusting the JSON files according to your needs. GitHub Actions will then generate an SQLite file and upload it to GitHub Pages.</p>
</div>
<p dir="auto">To manually generate an SQLite database that TeaTime can work with, follow the example on <a href="https://github.com/bjesus/teatime-database/">the database repository</a>.</p>
<p dir="auto">Each SQLite database contains a table with the below schema. Note that column names can be adjusted in the <code>config.json</code> file.</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE TABLE &#34;books&#34; (
 &#34;id&#34; INTEGER,
 &#34;title&#34; TEXT,
 &#34;author&#34; TEXT,
 &#34;year&#34; INTEGER,
 &#34;lang&#34; TEXT,
 &#34;size&#34; INTEGER,
 &#34;ext&#34; TEXT,
 &#34;ipfs_cid&#34; TEXT,
 PRIMARY KEY(&#34;id&#34; AUTOINCREMENT)
);"><pre><span>CREATE</span> <span>TABLE</span> &#34;<span>books</span>&#34; (
 <span><span>&#34;</span>id<span>&#34;</span></span> <span>INTEGER</span>,
 <span><span>&#34;</span>title<span>&#34;</span></span> <span>TEXT</span>,
 <span><span>&#34;</span>author<span>&#34;</span></span> <span>TEXT</span>,
 <span><span>&#34;</span>year<span>&#34;</span></span> <span>INTEGER</span>,
 <span><span>&#34;</span>lang<span>&#34;</span></span> <span>TEXT</span>,
 <span><span>&#34;</span>size<span>&#34;</span></span> <span>INTEGER</span>,
 <span><span>&#34;</span>ext<span>&#34;</span></span> <span>TEXT</span>,
 <span><span>&#34;</span>ipfs_cid<span>&#34;</span></span> <span>TEXT</span>,
 <span>PRIMARY KEY</span>(<span><span>&#34;</span>id<span>&#34;</span></span> AUTOINCREMENT)
);</pre></div>
<p dir="auto">The <code>dbConfig</code> section of <code>config.json</code> is identical to the output of the <a href="https://github.com/phiresky/sql.js-httpvfs/blob/master/create_db.sh">sql.js-httpvfs create_db.sh</a> script.</p>
<p dir="auto">If the SQLite file is too big, you can <a href="https://github.com/phiresky/sql.js-httpvfs?tab=readme-ov-file#usage">split it</a>. Note the information about optimizing your database. You will also want to <a href="https://github.com/bjesus/teatime-database/blob/main/create_indexes.sql">use FTS</a>. Then, publish your repository to GitHub Pages and assign the <code>teatime-database</code> topic to your repository.</p>

<p dir="auto">Even if you cannot code, a great way to contribute is to simply fork this repository, as well as your favorite database repositories. If you fork the repository, it could be better to do it manually (<code>git clone</code> &amp;&amp; <code>git remote add your-origin ...</code> &amp;&amp; <code>git push your-origin main</code>) so that the repositories won&#39;t be directly linked.</p>
<p dir="auto">It&#39;s also a good practice to star the database repositories you find useful, as this determines their order in the TeaTime user interface, making it easier for other users to find the best databases.</p>
</article></div></div>
  </body>
</html>
