<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/djanderson/aho">Original</a>
    <h1>Aho – a Git implementation in Awk</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A Git implementation in AWK.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/djanderson/aho/blob/main/aho.gif"><img src="https://github.com/djanderson/aho/raw/main/aho.gif" alt="Terminal session showing aho" data-animated-image=""/></a></p>

<p dir="auto">Modern AWK is capable of a lot more than one-liners. This is a toy project to
explore some of the internals of Git and newer features of GNU AWK.</p>
<p dir="auto">It&#39;s not intended to be useful for anything other than entertainment and
education.</p>

<p dir="auto">You&#39;ll need <code>gawk</code> &gt;= 5.0, and I currently use <code>pigz</code> for zlib compression.
Everything else should be provided by GNU coreutils. In other words, this
should run on most linuxes, not so much on BSDs/Mac.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ source ./modpath
$ aho init
Initialized empty Git repository in .aho
$ aho add -v .
add &#39;.gitignore&#39;
add &#39;LICENSE&#39;
add &#39;README.md&#39;
add &#39;aho&#39;
add &#39;aho.awk&#39;
add &#39;include/add.awk&#39;
add &#39;include/branches.awk&#39;
add &#39;include/config.awk&#39;
[...]
$ echo &#34;neat&#34; &gt; testfile
$ aho add -v .
add &#39;testfile&#39;
$ tree .aho/
.aho/
├── branches
├── config
├── description
├── HEAD
├── index
├── objects
│   ├── 16
│   │   └── dfbb852d5efb5e1a75ad336c8f62ebb94a82f0
│   ├── 42
│   │   └── 2c6135819b57720ace71e3c6c97eb072b5b430
│   ├── 51
│   │   └── 2807153b4d4abffab8490ce97e5a164fe7de1f
│   ├── 62
│   │   └── 9effea54a58d8734f57d9412a5964f69578477
│   ├── 64
│   │   └── c66bb623af4a10aa3bca2da143c75ab4e2186f
[...]
└── refs
    ├── heads
    └── tags

29 directories, 29 files
$ GIT_DIR=.aho git ls-files --stage
100664 d88545d4bb077b2e3fcefbddcf5bae071b426e9f 0	.gitignore
100664 a6ccf43e60c7876e67e3358952c0bf60a2882eef 0	LICENSE
100664 f88631a9692c0b9f9bc2f484c6fc68587bb90770 0	README.md
100775 8657d76021987bc2cd3c2d4c5958fdab053c6326 0	aho
100664 f2aeb629f8513094675557138b3f83dbfa5a4895 0	aho.awk
100664 b1c9cc72d22414a18635d33656dbc216ff774e57 0	include/add.awk
100664 512807153b4d4abffab8490ce97e5a164fe7de1f 0	include/branches.awk
100664 16dfbb852d5efb5e1a75ad336c8f62ebb94a82f0 0	include/config.awk
[...]"><pre>$ <span>source</span> ./modpath
$ aho init
Initialized empty Git repository <span>in</span> .aho
$ aho add -v <span>.</span>
add <span><span>&#39;</span>.gitignore<span>&#39;</span></span>
add <span><span>&#39;</span>LICENSE<span>&#39;</span></span>
add <span><span>&#39;</span>README.md<span>&#39;</span></span>
add <span><span>&#39;</span>aho<span>&#39;</span></span>
add <span><span>&#39;</span>aho.awk<span>&#39;</span></span>
add <span><span>&#39;</span>include/add.awk<span>&#39;</span></span>
add <span><span>&#39;</span>include/branches.awk<span>&#39;</span></span>
add <span><span>&#39;</span>include/config.awk<span>&#39;</span></span>
[...]
$ <span>echo</span> <span><span>&#34;</span>neat<span>&#34;</span></span> <span>&gt;</span> testfile
$ aho add -v <span>.</span>
add <span><span>&#39;</span>testfile<span>&#39;</span></span>
$ tree .aho/
.aho/
├── branches
├── config
├── description
├── HEAD
├── index
├── objects
│   ├── 16
│   │   └── dfbb852d5efb5e1a75ad336c8f62ebb94a82f0
│   ├── 42
│   │   └── 2c6135819b57720ace71e3c6c97eb072b5b430
│   ├── 51
│   │   └── 2807153b4d4abffab8490ce97e5a164fe7de1f
│   ├── 62
│   │   └── 9effea54a58d8734f57d9412a5964f69578477
│   ├── 64
│   │   └── c66bb623af4a10aa3bca2da143c75ab4e2186f
[...]
└── refs
    ├── heads
    └── tags

29 directories, 29 files
$ GIT_DIR=.aho git ls-files --stage
100664 d88545d4bb077b2e3fcefbddcf5bae071b426e9f 0	.gitignore
100664 a6ccf43e60c7876e67e3358952c0bf60a2882eef 0	LICENSE
100664 f88631a9692c0b9f9bc2f484c6fc68587bb90770 0	README.md
100775 8657d76021987bc2cd3c2d4c5958fdab053c6326 0	aho
100664 f2aeb629f8513094675557138b3f83dbfa5a4895 0	aho.awk
100664 b1c9cc72d22414a18635d33656dbc216ff774e57 0	include/add.awk
100664 512807153b4d4abffab8490ce97e5a164fe7de1f 0	include/branches.awk
100664 16dfbb852d5efb5e1a75ad336c8f62ebb94a82f0 0	include/config.awk
[...]</pre></div>

<p dir="auto">I welcome any input that helps improve my knowledge of AWK or Git!</p>

<ul>
<li> init</li>
<li> add/rm</li>
<li> status</li>
<li> commit</li>
<li> reset</li>
<li> branch</li>
<li> switch</li>
<li> config (read-only)</li>
<li> ls-files</li>
<li> cat-file</li>
</ul>
<p dir="auto">I don&#39;t plan to add network functionality to this (even though you totally
<a href="https://www.gnu.org/software/gawk/manual/gawkinet/gawkinet.html" rel="nofollow">can</a>), so no
<em>clone</em> or <em>push</em>.</p>
</article></div></div>
  </body>
</html>
