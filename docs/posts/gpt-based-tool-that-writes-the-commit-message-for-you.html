<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/KanHarI/gpt-commit-summarizer">Original</a>
    <h1>GPT based tool that writes the commit message for you</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">See <a href="https://medium.com/@knaan.harpaz/leverage-openais-language-model-for-automated-commit-summaries-8181cef30375?source=friends_link&amp;sk=b71a6799548f52274d2d0888e9bfd97e" rel="nofollow">announcement blogpost</a>.</p>
<p dir="auto">The <code>gpt-commit-summarizer</code> GitHub Action is a powerful tool that harnesses the capabilities of OpenAI&#39;s state-of-the-art text-davinci-003 large language model to provide summaries of the changes introduced by a pull request in a repository. By generating the git diff for each commit and for each modified file and sending it to the OpenAI API with a carefully crafted prompt, the action is able to produce concise and informative summaries that can greatly enhance collaboration and understanding in large codebases.</p>
<p dir="auto">The action then performs a higher level call to the OpenAI API to generate a summary of the entire pull request, from the summaries of individual commits and file differences. This summary is then posted as a comment on the pull request.</p>
<h2 dir="auto"><a id="user-content-setting-up" aria-hidden="true" href="#setting-up"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Setting up</h2>
<p dir="auto">To use this action, you will need to have an OpenAI API key. If you don&#39;t already have one, you can sign up for an OpenAI API key <a href="https://beta.openai.com/docs/quickstart" rel="nofollow">here</a>.</p>
<p dir="auto">Once you have your API key, you will need to add it to your GitHub repository as a secret. To do this, go to your repository&#39;s settings and navigate to the &#34;Secrets&#34; section. Click on &#34;Add a new secret&#34; and enter the secret name OPENAI_API_KEY and the value of your API key.</p>
<p dir="auto">Next, you will need to add the workflow file to your repository. Create a file named <code>.github/workflows/gpt-commit-summarizer.yml</code> (relative to the git root folder) and copy the following code into it (JS users - there in <a href="https://github.com/soof-golan/add-gpt-summarizer">an alternative</a>):</p>
<div dir="auto" data-snippet-clipboard-copy-content="name: GPT Commits summarizer
# Summary: This action will write a comment about every commit in a pull request, as well as generate a summary for every file that was modified and add it to the review page, compile a PR summary from all commit summaries and file diff summaries, and delete outdated code review comments

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  summarize:
    runs-on: ubuntu-latest
    permissions: write-all  # Some repositories need this line

    steps:
      - uses: KanHarI/gpt-commit-summarizer@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}"><pre><span>name</span>: <span>GPT Commits summarizer</span>
<span><span>#</span> Summary: This action will write a comment about every commit in a pull request, as well as generate a summary for every file that was modified and add it to the review page, compile a PR summary from all commit summaries and file diff summaries, and delete outdated code review comments</span>

<span>on</span>:
  <span>pull_request</span>:
    <span>types</span>: <span>[opened, synchronize]</span>

<span>jobs</span>:
  <span>summarize</span>:
    <span>runs-on</span>: <span>ubuntu-latest</span>
    <span>permissions</span>: <span>write-all  </span><span><span>#</span> Some repositories need this line</span>

    <span>steps</span>:
      - <span>uses</span>: <span>KanHarI/gpt-commit-summarizer@master</span>
        <span>env</span>:
          <span>GITHUB_TOKEN</span>: <span>${{ secrets.GITHUB_TOKEN }}</span>
          <span>OPENAI_API_KEY</span>: <span>${{ secrets.OPENAI_API_KEY }}</span></pre></div>
<p dir="auto">This workflow file tells GitHub to run the action whenever a new pull request is opened or updated.</p>
<p dir="auto">That&#39;s it! You&#39;re now ready to use the gpt-commit-summarizer action in your repository. Each time a pull request is opened or updated, the action will automatically generate a summary of the changes made in each commit, add a summary for every file that was modified to the review page, compile a PR summary from all commit summaries and file diff summaries, and delete outdated code review comments.</p>
<h2 dir="auto"><a id="user-content-troubleshooting" aria-hidden="true" href="#troubleshooting"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Troubleshooting</h2>
<p dir="auto">I have heard some unverified reports that the OpenAI API may block requests from the IP addresses of some runners. If you encounter this issue, you can try using a self-hosted runner to run the gpt-commit-summarizer action. This can be done by setting up a runner on a server that you control, and then adding the runner to your repository.</p>
<p dir="auto">To set up a self-hosted runner, you will need to follow these steps:</p>
<ul dir="auto">
<li>
<p dir="auto">Install the GitHub Actions Runner on your server. Follow the instructions in the <a href="https://docs.github.com/en/actions/hosting-your-own-runners/adding-self-hosted-runners">documentation</a> to do this.</p>
</li>
<li>
<p dir="auto">Add the self-hosted runner to your repository. Follow the instructions in the documentation to do this.</p>
</li>
<li>
<p dir="auto">Modify the workflow file to use the self-hosted runner. Open the .github/workflows/gpt-commit-summarizer.yml file and add the <code>runs-on</code> field to specify the self-hosted runner that you want to use. For example:</p>
</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="name: GPT Commits summarizer
# Summary: This action will write a comment about every commit in a pull request, as well as generate a summary for every file that was modified and add it to the review page, compile a PR summary from all commit summaries and file diff summaries, and delete outdated code review comments

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  summarize:
    runs-on: self-hosted
    permissions: write-all  # Some repositories need this line

    steps:
      - uses: KanHarI/gpt-commit-summarizer@master
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}"><pre><span>name</span>: <span>GPT Commits summarizer</span>
<span><span>#</span> Summary: This action will write a comment about every commit in a pull request, as well as generate a summary for every file that was modified and add it to the review page, compile a PR summary from all commit summaries and file diff summaries, and delete outdated code review comments</span>

<span>on</span>:
  <span>pull_request</span>:
    <span>types</span>: <span>[opened, synchronize]</span>

<span>jobs</span>:
  <span>summarize</span>:
    <span>runs-on</span>: <span>self-hosted</span>
    <span>permissions</span>: <span>write-all  </span><span><span>#</span> Some repositories need this line</span>

    <span>steps</span>:
      - <span>uses</span>: <span>KanHarI/gpt-commit-summarizer@master</span>
        <span>env</span>:
          <span>GITHUB_TOKEN</span>: <span>${{ secrets.GITHUB_TOKEN }}</span>
          <span>OPENAI_API_KEY</span>: <span>${{ secrets.OPENAI_API_KEY }}</span></pre></div>
<h2 dir="auto"><a id="user-content-encountered-any-bugs" aria-hidden="true" href="#encountered-any-bugs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encountered any bugs?</h2>
<p dir="auto">If you encounter any bugs or have any suggestions for improvements, please open an issue on the repository. Alternatively, you can contact me at my <a href="mailto:knaan.harpaz@gmail.com">email</a>.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">This project is licensed under the <a href="https://www.wildlondon.org.uk/KanHarI/gpt-commit-summarizer/blob/master/LICENSE">MIT License</a>.</p>
</article>
          </div></div>
  </body>
</html>
