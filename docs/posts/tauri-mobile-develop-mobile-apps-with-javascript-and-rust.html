<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://studioterabyte.nl/en/blog/tauri-mobile-app-development">Original</a>
    <h1>Tauri Mobile â€“ Develop Mobile Apps with JavaScript and Rust</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><p><!--[--><strong><!--[-->Studio Terabyte is a fullstack web development studio who finds and builds solutions that fit your project<!--]--></strong><!--]--></p><h2 id="what-is-tauri"><a href="#what-is-tauri"><!--[-->What is Tauri<!--]--></a></h2><p><!--[-->Tauri describes itself as a framework for building tiny, blazingly fast binaries for all major desktop platforms. Developers can integrate any front-end framework that compiles to HTML, JS and CSS for building their user interface. The backend of the application is a rust-sourced binary with an API that the front-end can interact with.<!--]--></p><p><!--[-->So, Tauri is a framework which allows you to build cross-platform apps using technologies you are already familiar with. And now it also supports mobile apps. Sounds great, doesn&#39;t it<!--]--></p><h2 id="why-use-tauri"><a href="#why-use-tauri"><!--[-->Why use Tauri?<!--]--></a></h2><p><!--[-->Now, why would you use something like Tauri instead of <code><!--[-->Kotlin<!--]--></code> for Android apps and <code><!--[-->Swift<!--]--></code> for iOS apps? First and foremost it allows you to work with technologies you are already familiar with. Not being forced to learn a whole new programming language, not to mention the entire toolchain the language requires, is an enourmouse time safer. It also makes it easy to expand your current web app into the mobile app space without having to hire dedicated engineers.<!--]--></p><p><!--[-->Besides those reason, others to consider are:<!--]--></p><ul><!--[--><li><!--[-->Security<!--]--></li><li><!--[-->FLOSS<!--]--></li><li><!--[-->Bundle Size<!--]--></li><li><!--[-->Performance<!--]--></li><li><!--[-->Plugin System<!--]--></li><li><!--[-->Self Updater<!--]--></li><!--]--></ul><h2 id="minimal-tauri-mobile-app"><a href="#minimal-tauri-mobile-app"><!--[-->Minimal Tauri mobile app<!--]--></a></h2><p><!--[-->*Note: This is based on the 2.0 Alpha version and the early version of the documentation. An update version of the <code><!--[-->create-tauri-app<!--]--></code> utility is in development to make a number of the following steps easier. That being said, understanding the basics is always helpfull!<!--]--></p><h3 id="the-basics"><a href="#the-basics"><!--[-->The basics<!--]--></a></h3><p><!--[-->First, ensure that you have all the prerequists installed needed for the mobile app development. I&#39;m working on a mac and building and iOS app, so I&#39;m following the instructions <a href="https://next--tauri.netlify.app/next/guides/getting-started/prerequisites/macos" rel="nofollow"><!--[-->here<!--]--></a>. If you use a different OS or want to target Android, you can start <a href="https://next--tauri.netlify.app/next/guides/getting-started/prerequisites/" rel="nofollow"><!--[-->here<!--]--></a> instead.<!--]--></p><p><!--[-->Now that we have the basics ready, let&#39;s start by installing the Tauri <code><!--[-->create-tauri-app<!--]--></code> Rust utility. This will allow us to easily initialize a new Tauri project. I am going for a <code><!--[-->Vue<!--]--></code> and <code><!--[-->TypeScript<!--]--></code> project.<!--]--></p><!--[--><pre><code><span><span>cargo </span><span>install</span><span> </span><span>create-tauri-app</span></span><span></span><span><span>cargo </span><span>create-tauri-app</span></span></code></pre><!--]--><p><!--[-->Now <code><!--[-->cd<!--]--></code> into the new folder that was created and make sure that we are on the newest version. First, run the following command<!--]--></p><!--[--><pre><code><span><span>npm </span><span>install</span><span> </span><span>@tauri-apps/cli@next</span><span> </span><span>@tauri-apps/api@next</span></span></code></pre><!--]--><p><!--[-->Great, that was the Node part! Now <code><!--[-->cd<!--]--></code> into the <code><!--[-->src-tauri<!--]--></code> folder and run the following commands to update the Rust part:<!--]--></p><!--[--><pre><code><span><span>cargo </span><span>add</span><span> </span><span>tauri@2.0.0-alpha.</span><span>0</span></span><span></span><span><span>cargo </span><span>add</span><span> </span><span>tauri-build@2.0.0-alpha.</span><span>0</span><span> </span><span>--build</span></span><span></span><span><span>cargo </span><span>install</span><span> </span><span>tauri-cli</span><span> </span><span>--version</span><span> </span><span>&#34;^2.0.0-alpha&#34;</span></span></code></pre><!--]--><p><!--[-->We are getting ready to develop our mobile app! To develop mobile Tauri applications, the frontend must serve the assets listening on your public network address. The network address can be found using the internal-ip NPM package. You can install it with the following command:<!--]--></p><!--[--><pre><code><span><span>npm install --save-dev internal-ip</span></span></code></pre><!--]--><h3 id="configuration-updates"><a href="#configuration-updates"><!--[-->Configuration updates<!--]--></a></h3><p><!--[-->Next, we need to update the <code><!--[-->vite.config.ts<!--]--></code> file. I&#39;m using Vue so mine looks like this:<!--]--></p><!--[--><pre><code><span><span>import</span><span> { </span><span>defineConfig</span><span> } </span><span>from</span><span> </span><span>&#39;vite&#39;</span></span><span><span>import</span><span> { </span><span>internalIpV4</span><span> } </span><span>from</span><span> </span><span>&#39;internal-ip&#39;</span></span><span><span>import</span><span> </span><span>vue</span><span> </span><span>from</span><span> </span><span>&#34;@vitejs/plugin-vue&#34;</span><span>;</span></span><span></span><span><span>export</span><span> </span><span>default</span><span> </span><span>defineConfig</span><span>(</span><span>async</span><span> () </span><span>=&gt;</span><span> {</span></span><span><span>  </span><span>const</span><span> </span><span>host</span><span> = </span><span>await</span><span> </span><span>internalIpV4</span><span>()</span></span><span></span><span><span>  </span><span>/** </span><span>@type</span><span> </span><span>{import(&#39;vite&#39;).UserConfig}</span><span> */</span></span><span><span>  </span><span>const</span><span> </span><span>config</span><span> = {</span></span><span><span>    </span><span>plugins:</span><span> [</span><span>vue</span><span>()],</span></span><span><span>  </span><span>// Vite options tailored for Tauri development and only applied in `tauri dev` or `tauri build`</span></span><span><span>  </span><span>// prevent vite from obscuring rust errors</span></span><span><span>  </span><span>clearScreen:</span><span> </span><span>false</span><span>,</span></span><span><span>    </span><span>server:</span><span> {</span></span><span><span>      </span><span>host:</span><span> </span><span>&#39;0.0.0.0&#39;</span><span>, </span><span>// listen on all addresses</span></span><span><span>      </span><span>port:</span><span> </span><span>5173</span><span>,</span></span><span><span>      </span><span>strictPort:</span><span> </span><span>true</span><span>,</span></span><span><span>      </span><span>hmr:</span><span> {</span></span><span><span>        </span><span>protocol:</span><span> </span><span>&#39;ws&#39;</span><span>,</span></span><span><span>        </span><span>host</span><span>,</span></span><span><span>        </span><span>port:</span><span> </span><span>5183</span><span>,</span></span><span><span>      },</span></span><span><span>    },</span></span><span><span>  </span><span>// to make use of `TAURI_DEBUG` and other env variables</span></span><span><span>  </span><span>// https://tauri.studio/v1/api/config#buildconfig.beforedevcommand</span></span><span><span>  </span><span>envPrefix:</span><span> [</span><span>&#34;VITE_&#34;</span><span>, </span><span>&#34;TAURI_&#34;</span><span>],</span></span><span><span>  </span><span>build:</span><span> {</span></span><span><span>    </span><span>// Tauri supports es2021</span></span><span><span>    </span><span>target:</span><span> </span><span>process</span><span>.</span><span>env</span><span>.</span><span>TAURI_PLATFORM</span><span> == </span><span>&#34;windows&#34;</span><span> ? </span><span>&#34;chrome105&#34;</span><span> : </span><span>&#34;safari13&#34;</span><span>,</span></span><span><span>    </span><span>// don&#39;t minify for debug builds</span></span><span><span>    </span><span>minify:</span><span> !</span><span>process</span><span>.</span><span>env</span><span>.</span><span>TAURI_DEBUG</span><span> ? </span><span>&#34;esbuild&#34;</span><span> : </span><span>false</span><span>,</span></span><span><span>    </span><span>// produce sourcemaps for debug builds</span></span><span><span>    </span><span>sourcemap:</span><span> !!</span><span>process</span><span>.</span><span>env</span><span>.</span><span>TAURI_DEBUG</span><span>,</span></span><span><span>  },</span></span><span><span>  }</span></span><span></span><span><span>  </span><span>return</span><span> </span><span>config</span></span><span><span>})</span></span></code></pre><!--]--><p><!--[-->If you use a different framework, make sure to keep the framework-specific plugins that were already in this file.<!--]--></p><p><!--[-->One more configuration update. <strong><!--[-->This is an important one!<!--]--></strong><!--]--></p><p><!--[-->Update <code><!--[-->tauri.conf.json<!--]--></code>:<!--]--></p><p><!--[-->There are two things that we need to change here. First, add the following object within the <code><!--[-->bundle<!--]--></code> object like so:<!--]--></p><!--[--><pre><code><span><span>    &#34;bundle&#34;: {
      &#34;active&#34;: true,
      &#34;category&#34;: &#34;DeveloperTool&#34;,
      &#34;copyright&#34;: &#34;&#34;,
      &#34;deb&#34;: {
        &#34;depends&#34;: []
      },
      &#34;externalBin&#34;: [],
      &#34;iOS&#34;: {
        &#34;developmentTeam&#34;: &#34;demo&#34;
      },
      &#34;icon&#34;: [</span></span></code></pre><!--]--><p><!--[-->Also change the port that Tauri is listening to so that it matches the one your JS framework will be running. In my case it&#39;s <code><!--[-->5173<!--]--></code>. So like this:<!--]--></p><!--[--><pre><code><span><span>  &#34;build&#34;: {
    &#34;beforeDevCommand&#34;: &#34;npm run dev&#34;,
    &#34;beforeBuildCommand&#34;: &#34;npm run build&#34;,
    &#34;devPath&#34;: &#34;http://localhost:5173&#34;, &lt;- Here
    &#34;distDir&#34;: &#34;../dist&#34;,
    &#34;withGlobalTauri&#34;: false
  },</span></span></code></pre><!--]--><h3 id="rust-changes"><a href="#rust-changes"><!--[-->Rust changes<!--]--></a></h3><p><!--[-->Now that the config files are ready, let&#39;s make some changes to our Rust files.<!--]--></p><ol><!--[--><li><!--[-->Update your <code><!--[-->src-tauri/Cargo.toml<!--]--></code> file with the following line:<!--]--></li><!--]--></ol><!--[--><pre><code><span><span>[lib]</span></span><span><span>crate-type</span><span> = [</span><span>&#34;staticlib&#34;</span><span>, </span><span>&#34;cdylib&#34;</span><span>, </span><span>&#34;rlib&#34;</span><span>]</span></span></code></pre><!--]--><ol start="2"><!--[--><li><!--[-->Create a new <code><!--[-->src-tauri/src/lib.rs<!--]--></code> file and add the following content:<!--]--></li><!--]--></ol><!--[--><pre><code><span><span>use</span><span> </span><span>tauri</span><span>::</span><span>App</span><span>;</span></span><span></span><span><span>#[cfg(mobile)]</span></span><span><span>mod</span><span> mobile;</span></span><span><span>#[cfg(mobile)]</span></span><span><span>pub</span><span> </span><span>use</span><span> </span><span>mobile</span><span>::*;</span></span><span></span><span><span>pub</span><span> </span><span>type</span><span> </span><span>SetupHook</span><span> = </span><span>Box</span><span>&lt;</span><span>dyn</span><span> </span><span>FnOnce</span><span>(&amp;</span><span>mut</span><span> </span><span>App</span><span>) -&gt; </span><span>Result</span><span>&lt;(), </span><span>Box</span><span>&lt;</span><span>dyn</span><span> </span><span>std</span><span>::</span><span>error</span><span>::</span><span>Error</span><span>&gt;&gt; + </span><span>Send</span><span>&gt;;</span></span><span></span><span><span>#[tauri::command]</span></span><span><span>fn</span><span> </span><span>greet</span><span>(</span><span>name</span><span>: &amp;</span><span>str</span><span>) -&gt; </span><span>String</span><span> {</span></span><span><span>    </span><span>format!</span><span>(</span><span>&#34;Hello, {}!&#34;</span><span>, </span><span>name</span><span>)</span></span><span><span>}</span></span><span></span><span><span>#[derive(</span><span>Default</span><span>)]</span></span><span><span>pub</span><span> </span><span>struct</span><span> </span><span>AppBuilder</span><span> {</span></span><span><span>    </span><span>setup</span><span>: </span><span>Option</span><span>&lt;</span><span>SetupHook</span><span>&gt;,</span></span><span><span>}</span></span><span></span><span><span>impl</span><span> </span><span>AppBuilder</span><span> {</span></span><span><span>    </span><span>pub</span><span> </span><span>fn</span><span> </span><span>new</span><span>() -&gt; </span><span>Self</span><span> {</span></span><span><span>        </span><span>Self</span><span>::</span><span>default</span><span>()</span></span><span><span>    }</span></span><span></span><span><span>    #[must_use]</span></span><span><span>    </span><span>pub</span><span> </span><span>fn</span><span> </span><span>setup</span><span>&lt;</span><span>F</span><span>&gt;(</span><span>mut</span><span> </span><span>self</span><span>, </span><span>setup</span><span>: </span><span>F</span><span>) -&gt; </span><span>Self</span></span><span><span>    </span><span>where</span></span><span><span>        </span><span>F</span><span>: </span><span>FnOnce</span><span>(&amp;</span><span>mut</span><span> </span><span>App</span><span>) -&gt; </span><span>Result</span><span>&lt;(), </span><span>Box</span><span>&lt;</span><span>dyn</span><span> </span><span>std</span><span>::</span><span>error</span><span>::</span><span>Error</span><span>&gt;&gt; + </span><span>Send</span><span> + &#39;</span><span>static</span><span>,</span></span><span><span>    {</span></span><span><span>        </span><span>self</span><span>.setup.</span><span>replace</span><span>(</span><span>Box</span><span>::</span><span>new</span><span>(</span><span>setup</span><span>));</span></span><span><span>        </span><span>self</span></span><span><span>    }</span></span><span></span><span><span>    </span><span>pub</span><span> </span><span>fn</span><span> </span><span>run</span><span>(</span><span>self</span><span>) {</span></span><span><span>        </span><span>let</span><span> </span><span>setup</span><span> = </span><span>self</span><span>.setup;</span></span><span><span>        </span><span>tauri</span><span>::</span><span>Builder</span><span>::</span><span>default</span><span>()</span></span><span><span>            .</span><span>setup</span><span>(</span><span>move</span><span> |</span><span>app</span><span>| {</span></span><span><span>                </span><span>if</span><span> </span><span>let</span><span> </span><span>Some</span><span>(</span><span>setup</span><span>) = </span><span>setup</span><span> {</span></span><span><span>                    (</span><span>setup</span><span>)(</span><span>app</span><span>)?;</span></span><span><span>                }</span></span><span><span>                </span><span>Ok</span><span>(())</span></span><span><span>            })</span></span><span><span>            .</span><span>invoke_handler</span><span>(</span><span>tauri</span><span>::</span><span>generate_handler!</span><span>[</span><span>greet</span><span>])</span></span><span><span>            .</span><span>run</span><span>(</span><span>tauri</span><span>::</span><span>generate_context!</span><span>())</span></span><span><span>            .</span><span>expect</span><span>(</span><span>&#34;error while running tauri application&#34;</span><span>);</span></span><span><span>    }</span></span><span><span>}</span></span><span></span><span><span>#[cfg(mobile)]</span></span><span><span>fn</span><span> </span><span>do_something</span><span>() {</span></span><span><span>    </span><span>println!</span><span>(</span><span>&#34;Hello from Mobile!&#34;</span><span>);</span></span><span><span>}</span></span><span></span><span><span>#[cfg(desktop)]</span></span><span><span>fn</span><span> </span><span>do_something</span><span>() {</span></span><span><span>    </span><span>println!</span><span>(</span><span>&#34;Hello from Desktop!&#34;</span><span>);</span></span><span><span>}</span></span><span></span><span><span>fn</span><span> </span><span>run</span><span>() {</span></span><span><span>    </span><span>if</span><span> </span><span>cfg!</span><span>(</span><span>mobile</span><span>) {</span></span><span><span>        </span><span>println!</span><span>(</span><span>&#34;Hello from Mobile!&#34;</span><span>);</span></span><span><span>    } </span><span>else</span><span> {</span></span><span><span>        </span><span>println!</span><span>(</span><span>&#34;Hello from Desktop!&#34;</span><span>);</span></span><span><span>    }</span></span><span><span>}</span></span></code></pre><!--]--><ol start="3"><!--[--><li><!--[-->Create a new <code><!--[-->src-tauri/src/mobile.rs<!--]--></code> file and add the following content:<!--]--></li><!--]--></ol><!--[--><pre><code><span><span>#[tauri::mobile_entry_point]</span></span><span><span>fn</span><span> </span><span>main</span><span>() {</span></span><span><span>  </span><span>super</span><span>::</span><span>AppBuilder</span><span>::</span><span>new</span><span>().</span><span>run</span><span>();</span></span><span><span>}</span></span></code></pre><!--]--><p><!--[--><strong><!--[-->This is an important step<!--]--></strong><!--]--></p><ol start="4"><!--[--><li><!--[-->Update the content of <code><!--[-->src-tauri/src/main.rs<!--]--></code> to:<!--]--></li><!--]--></ol><!--[--><pre><code><span><span>#![cfg_attr(
  all(not(debug_assertions), target_os = &#34;windows&#34;),
  windows_subsystem = &#34;windows&#34;
)]

pub fn main() {
  // Change demo_mobile_app to the name of your app! 
  demo_mobile_app::AppBuilder::new().run();
}</span></span></code></pre><!--]--><p><!--[-->Now that this has been taken care off, finish off with the following steps:<!--]--></p><ul><!--[--><li><!--[-->run <code><!--[-->cargo tauri ios init<!--]--></code> in the main folder.<ul><!--[--><li><!--[-->if you get an error regarding cocaopods, run: <code><!--[-->brew install cocoapods<!--]--></code> and try again<!--]--></li><!--]--></ul><!--]--></li><li><!--[-->run <code><!--[-->cargo tauri ios dev<!--]--></code> to start the server<!--]--></li><!--]--></ul><h3 id="result"><a href="#result"><!--[-->Result<!--]--></a></h3><p><!--[-->Congrats! You should now be asked in which emulator you want your app to run and see something like this:<!--]--></p><p><!--[--><img src="https://thevaluable.dev/images/blog/tauri-mobile-app-development/Simulator-Screen_Shot-iPhone_14.png" alt="Iphone 14 Simulator Vite"/><!--]--></p><h2 id="conclusion"><a href="#conclusion"><!--[-->Conclusion<!--]--></a></h2><p><!--[-->In this blog post we&#39;ve setup a minimal Tauri app which allows us to build native iOS app using JS, Vue in our case, and Rust!<!--]--></p><p><!--[-->From here you should have a solid base to build out your own ideas and launch the amazing app you&#39;ve always wanted to build!<!--]--></p><p><!--[-->You can find the code for this article here: <a href="https://github.com/StefanVDWeide/demo-mobile-app" rel="nofollow"><!--[-->GitHub<!--]--></a><!--]--></p></div></div></div></div>
  </body>
</html>
