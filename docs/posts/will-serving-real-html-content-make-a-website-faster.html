<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.webpagetest.org/posts/will-html-content-make-site-faster/">Original</a>
    <h1>Will serving real HTML content make a website faster?</h1>
    
    <div id="readability-page-1" class="page"><div data-post-layout=""><div><p><em><strong>TLDR:</strong> if your site is Twitter, AirBnB, Apple, Reddit, CNN, FedEx, or so many others then probably yes!</em></p><p>Many of the most common performance problems in websites and applications today are caused by how they load and rely upon JavaScript, and the difficulty involved in solving those problems often depends on the degree of that reliance. When JS reliance is minimal, fixing poor delivery performance can be as simple as instructing the browser to load certain scripts at a lower priority and allow HTML content to render sooner. But when a site is dependent on JavaScript for generating its HTML content in the first place, those sorts of optimizations can’t help, and in those cases fixing the problem may require deep and time-consuming architectural changes.</p><p>While it has been around longer, the pattern of using JavaScript to generate a page&#39;s content after delivery became particularly popular within the last 5-10 years. The approach was initially intended for web applications that have highly dynamic, personalized, real-time content, but nowadays frameworks such as React have made these practices commonplace among sites that don’t share those specialized qualities as well.</p><p>Appropriateness aside, sites built this way can suffer longer initial loading times due to the stepped nature of their content delivery, delayed requests for images and videos, and the time it takes an average device to process code after it&#39;s delivered.</p><h2 id="signs-of-dependence"><a href="#signs-of-dependence" aria-describedby="signs-of-dependence"><span aria-hidden="true">#</span><span>anchor</span></a>Signs of Dependence</h2><p>Sites that suffer delivery performance issues due to JavaScript over-dependence can be relatively easy to spot. Often these sites will visibly render their content in noticeable steps, first showing either a blank or “skeleton” layout without content, and sometime after that–whenever the JavaScript finishes fetching and generating the HTML–a fully populated page. The initial page layout steps are intended to give users the perception that the page responded quickly, allowing for long loading times to seem more tolerable than they otherwise would.</p><p>Let&#39;s look at some examples.</p><p>This <a href="https://www.webpagetest.org/video/compare.php?tests=220919_AiDcKA_E68-r%3A2-c%3A0&amp;thumbSize=100&amp;ival=1000&amp;end=visual">WebPageTest filmstrip shows Twitter’s Explore page</a> loading on a 4G connection on a mobile device in Chrome, at 1-second intervals.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture1_qivmb5.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture1_qivmb5.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture1_qivmb5.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture1_qivmb5.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture1_qivmb5.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture1_qivmb5.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture1_qivmb5.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture1_qivmb5.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture1_qivmb5.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture1_qivmb5.png 1800w" alt="a webpagetest film strip showing a 14 second delay before page content becomes available. early frames are blank or loading images." loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Notice how the initial filmstrip keyframes display a loading image (the blue bird in this case), then an unpopulated placeholder page layout, and ultimately the real content. Ironically, that bird will register as the site&#39;s First Contentful Paint metric, but the actual page content will replace it much later. <em>Apparently, humans aren&#39;t the only audience for visual loading tricks!</em></p><p>Here’s another example. <a href="https://www.webpagetest.org/video/compare.php?tests=220916_BiDcCW_B3R-r%3A1-c%3A0&amp;thumbSize=150&amp;ival=1000&amp;end=visual">This is AirBnB’s homepage loaded on a cable connection in Chrome on a desktop computer</a>.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture2_grpu2r.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture2_grpu2r.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture2_grpu2r.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture2_grpu2r.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture2_grpu2r.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture2_grpu2r.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture2_grpu2r.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture2_grpu2r.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture2_grpu2r.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture2_grpu2r.png 1800w" alt="another filmstrip. this time the frames show a gray boxes skeleton grid before content arrives" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Here, the telltale “skeleton” loading screen is visible for about 5 seconds, and only after that page’s HTML is generated can the browser begin to discover and subsequently fetch the images that it will eventually populate the grid. Those grid images register as the site&#39;s Largest Contentful Paint (LCP) metric, one of Google&#39;s “Core Web Vitals”:</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture3_g0lhuy.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture3_g0lhuy.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture3_g0lhuy.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture3_g0lhuy.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture3_g0lhuy.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture3_g0lhuy.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture3_g0lhuy.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture3_g0lhuy.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture3_g0lhuy.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture3_g0lhuy.png 1800w" alt="screenshot of webpagetest&#39;s core web vitals page highlighting the images that contribute to LCP in yellow over the page layout" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><h3>Tradeoffs and How to Know When to Make a Change</h3><p>Now, it’s very important to note that while the examples in this post helpfully display this pattern, the architectural decisions of these sites are made thoughtfully by highly-skilled teams. Web development involves tradeoffs, and in some cases a team may deem the initial performance impact of JS-dependence a worthy compromise for benefits they get in other areas, such as personalized content, server costs and simplicity, and even performance in long-lived sessions. But tradeoffs aside, it’s reasonable to suspect that if these sites were able to deliver meaningful HTML up-front, a browser would be able render initial content sooner and their users would see improvements as a result.</p><p>And that situation tends to put us in a bind: it&#39;s one thing to suspect that a change will improve performance, and another thing to be able to see the impact for yourself. For many sites, the changes involved in generating HTML on the server instead of the client can be quite complicated, making them difficult to prototype, let alone change in production.</p><p>It&#39;s hard to commit to big, time-consuming changes when you don&#39;t know whether they will help...</p><h2 id="enter-webpagetest-opportunities-and-experiments"><a href="#enter-webpagetest-opportunities-and-experiments" aria-describedby="enter-webpagetest-opportunities-and-experiments"><span aria-hidden="true">#</span><span>anchor</span></a>Enter, WebPageTest Opportunities &amp; Experiments</h2><p>One of my favorite parts of WebPageTest&#39;s new <a href="https://blog.webpagetest.org/posts/introducing-opportunities-and-experiments/">Opportunities &amp; Experiments feature</a> is that it can diagnose this exact problem and reliably predict just how much a fix would potentially improve performance.</p><p>After running either of these sites through WebPageTest and visiting their opportunities section, you&#39;ll find an observation that a large amount of HTML was generated after delivery by JavaScript and may be worth your attention:</p><p>Here it is on <a href="https://www.webpagetest.org/result/220916_BiDcPM_EDK/3/experiments/">Twitter’s result</a>:</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture4_llt50m.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture4_llt50m.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture4_llt50m.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture4_llt50m.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture4_llt50m.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture4_llt50m.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture4_llt50m.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture4_llt50m.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture4_llt50m.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture4_llt50m.png 1800w" alt="screenshot of text: A significant portion of HTML content (132.09kb, 52.11% of total HTML) was generated by JavaScript after delivery." loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>…and on <a href="https://www.webpagetest.org/experiments.php?test=220919_BiDc4Y_AE6&amp;run=1&amp;end=visual">AirBnB’s respectively</a>:</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture5_cnjab3.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture5_cnjab3.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture5_cnjab3.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture5_cnjab3.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture5_cnjab3.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture5_cnjab3.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture5_cnjab3.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture5_cnjab3.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture5_cnjab3.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture5_cnjab3.png 1800w" alt="another screenshot of similar text to prior image" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Those observations come free to any WebPageTest user as part of any test run, and we&#39;re constantly refining and adding more diagnostics to that page. In addition, a particularly novel companion to those observations will be offered to users with access to <a href="https://product.webpagetest.org/experiments">WebPageTest Experiments</a>, which are part of the <a href="https://www.webpagetest.org/signup">WebPageTest Pro plan</a>.</p><p>Pro users who click that obvservation to expand it will be presented with the following experiment:</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_640/mimic-post/Picture6_ioqxmt.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_160/mimic-post/Picture6_ioqxmt.png 160w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_320/mimic-post/Picture6_ioqxmt.png 320w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_480/mimic-post/Picture6_ioqxmt.png 480w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_640/mimic-post/Picture6_ioqxmt.png 640w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_704/mimic-post/Picture6_ioqxmt.png 704w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_800/mimic-post/Picture6_ioqxmt.png 800w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_960/mimic-post/Picture6_ioqxmt.png 960w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1120/mimic-post/Picture6_ioqxmt.png 1120w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1280/mimic-post/Picture6_ioqxmt.png 1280w" alt="screenshot of text: Mimic Pre-rendered HTML: This experiment mimics server-generated HTML by swapping the initial HTML with the fully rendered HTML from this test run. Note: this will very likely break site behavior, but is potentially useful for comparing early metrics and assessing whether moving logic to the server is worth the effort." loading="lazy" sizes="(min-width: 44em) 40rem, 90vw"/></p><p>Once applied, that experiment will test the impact of delivering that site’s final HTML directly from the server at the start, allowing developers to understand the potential impact of making that change before doing any of the work!</p><h2 id="the-mimic-pre-rendered-html-experiment"><a href="#the-mimic-pre-rendered-html-experiment" aria-describedby="the-mimic-pre-rendered-html-experiment"><span aria-hidden="true">#</span><span>anchor</span></a>The Mimic Pre-Rendered HTML Experiment</h2><p>Like all WebPageTest experiments, this experiment works by testing the performance of making one (or many) changes to a live site mid-request using a special proxy server and comparing the performance of that test to an identical test that does not modify the site at all. These two groups of test runs are called the Experiment and the Control of a WebPageTest experiment, and we typically encourage users to run at least 3 of each to get a good median run. To make the comparison as fair as possible, WebPageTest runs <em>both</em> the experiment and the control through its experiments proxy server, either making changes on the fly or simply passing requests directly through, respectively. That last part is important because simply proxying a site can impact its performance at least in subtle ways, so it&#39;s best not to compare a proxied test to an original unproxied test. With Experiments, our aim is to ensure that the only difference we’re measuring between the experiment and the control is the optimization itself.</p><p>The changes that the <em>Mimic Pre-Rendered HTML</em> experiment makes occur in one interesting swap, using some special information collected in the original test. As of this summer, every test run on WebPageTest captures the final state of a page’s HTML (or, technically its DOM), and stores it as part of a test&#39;s data. When the initial page is requested during the pre-render experiment, the proxy fetches that page’s stored final HTML and replaces the site&#39;s initial HTML response body with that final HTML text as it passes it along to the browser. While not always perfect, for many sites this experiment should reveal the potential performance benefits of an actual implementation in just one click.</p><p><em>As an added tip, I like to combine this experiment with a “disable scripts” experiment as well because it can help prevent JavaScript-rendered sites like these from unnecessarily re-rendering after delivery. As such, I’ve added that experiment in the following runs.</em></p><h2 id="predicting-the-benefits-of-serving-useful-html"><a href="#predicting-the-benefits-of-serving-useful-html" aria-describedby="predicting-the-benefits-of-serving-useful-html"><span aria-hidden="true">#</span><span>anchor</span></a>Predicting the Benefits of Serving Useful HTML</h2><p>Let’s look at Twitter first. Running the Mimic Pre-Rendered HTML experiment on Twitter’s Explore page gives us the following initial results.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture7_yyyvip.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture7_yyyvip.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture7_yyyvip.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture7_yyyvip.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture7_yyyvip.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture7_yyyvip.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture7_yyyvip.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture7_yyyvip.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture7_yyyvip.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture7_yyyvip.png 1800w" alt="screenshot of a webpagetest experiment result with many metrics showing faster numbers for the experiment over the control" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p><a href="https://www.webpagetest.org/video/compare.php?tests=220919_AiDcND_E6T,220919_AiDcM2_E6S">Link to this result</a></p><p>At initial glance, we can see the huge, expected impact of meaningful HTML in the comparison video on the top right, where the page is fully populated with content at 3.4 seconds, down from the original time of 12 seconds.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture8_mb1utc.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture8_mb1utc.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture8_mb1utc.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture8_mb1utc.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture8_mb1utc.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture8_mb1utc.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture8_mb1utc.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture8_mb1utc.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture8_mb1utc.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture8_mb1utc.png 1800w" alt="filmstrip keyframes comparing experiment to control. control shows an early paint sooner, but the experiment finishes long before the control, in a few seconds total" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p><em>Notably, a couple of metrics are slower in the experiment run: start render and first contentful paint. But that&#39;s only because the control site happens to render its bird image very early, and the experiment doesn&#39;t quite render its real content quite as soon as that bird.</em></p><h2 id="a-huge-improvement!-but-it&#39;s-actually-even-huge...r"><a href="#a-huge-improvement!-but-it&#39;s-actually-even-huge...r" aria-describedby="a-huge-improvement!-but-it&#39;s-actually-even-huge...r"><span aria-hidden="true">#</span><span>anchor</span></a>A huge improvement! But it’s actually even huge...r</h2><p>More good news! Just beneath the experiment results, WebPageTest added a note telling us that there were notable initial response time differences between the experiment and the control run. Specifically, the experiment took a little longer to arrive at Time To First Byte. This can happen with any experiment due to common network variance or inconsistent server response times, and sometimes it can highlight server issues worth looking into.</p><p>But with the pre-render HTML experiment, the variance is expected because the proxy task itself takes a little time to apply mid-flight, given that it requires making a request for that final HTML.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture9_rvhbqj.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture9_rvhbqj.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture9_rvhbqj.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture9_rvhbqj.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture9_rvhbqj.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture9_rvhbqj.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture9_rvhbqj.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture9_rvhbqj.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture9_rvhbqj.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture9_rvhbqj.png 1800w" alt="a screenshot of the following message: Note: This experiment had a 0.95s difference in response time between the median experiment and control runs, which can make other metric changes seem more significant than they really are. To examine the variability of response times in all test runs, you can plot full results. Or, you can view this comparison with TTFB removed from relevant metric comparisons." loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Delays like this that occur as a result of our proxy tasks are not useful in a comparison and they wouldn&#39;t likely exist in a real implementation of the technique on a live site. For that reason, whenever server timing varies by more than 100ms WebPageTest offers a link to view the experiment results with each run&#39;s first byte times ignored. With that link, we can see the metric differences more fairly, as if the experiment and control had delivered their initial HTML at the same moment.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture10_htvqmi.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture10_htvqmi.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture10_htvqmi.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture10_htvqmi.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture10_htvqmi.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture10_htvqmi.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture10_htvqmi.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture10_htvqmi.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture10_htvqmi.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture10_htvqmi.png 1800w" alt="screenshot of the experiment results at the link below" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p><a href="https://www.webpagetest.org/video/compare.php?tests=220919_AiDcND_E6T,220919_AiDcM2_E6S&amp;ignoreTTFB">Link to this result</a></p><p><strong>Wow!</strong> Now that we&#39;ve normalized the experiment&#39;s response time, we’re looking at a 9.32 second improvement in Largest Contentful Paint for new visits to that page on Chrome/mobile with a 4G connection speed.</p><p>Just for fun, here’s that experiment shown head-to-head in a real-time video (<em>Note: this comparison video does not include the TTFB normalization above, so render times appear a little later than they would ideally be</em>).</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_640/mimic-post/Picture11_zwwghz.gif" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_320/mimic-post/Picture11_zwwghz.gif 320w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_380/mimic-post/Picture11_zwwghz.gif 380w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_480/mimic-post/Picture11_zwwghz.gif 480w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_640/mimic-post/Picture11_zwwghz.gif 640w" alt="video gif of experiment and control running next to one another. the experiment shows a finished layout very quickly and the other does not." loading="lazy" sizes="(min-width: 44em) 40rem, 90vw"/></p><p>Here’s <a href="https://www.webpagetest.org/video/compare.php?tests=220919_BiDcPT_FQG,220919_BiDc75_FQF&amp;ignoreTTFB">the same experiment on desktop/Chrome as well</a>, which is also dramatic, with over 6 seconds earlier LCP.</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture12_omnqlr.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture12_omnqlr.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture12_omnqlr.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture12_omnqlr.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture12_omnqlr.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture12_omnqlr.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture12_omnqlr.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture12_omnqlr.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture12_omnqlr.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture12_omnqlr.png 1800w" alt="screenshot of the above link" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>By now, we’ve probably done enough to be able to understand the impact of this optimization, but it would be possible to refine the experiment further to eliminate some unhelpful noise. For example, an artifact in this experiment’s results comparison shows that the experiment had 1 additional render-blocking request that was not present in the control. This is peculiar and likely the result of the final HTML snapshot containing link or script elements that were originally added dynamically (<em>and thus non-blocking</em>), yet appear to be render-blocking when viewed as static output. A quick glance at the experiment&#39;s request waterfall confirms that a google account stylesheet is to blame, shown with a render blocking indicator on row 2:</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture14_ygtthz.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture14_ygtthz.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture14_ygtthz.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture14_ygtthz.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture14_ygtthz.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture14_ygtthz.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture14_ygtthz.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture14_ygtthz.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture14_ygtthz.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture14_ygtthz.png 1800w" alt="screenshot of a waterfall in webpagetest with row 2 showing a blocking css request" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>In a real implementation, that blocking request would not exist in the HTML at load time, so you may choose to refine the experiment further by removing it from the source. For now though, our result is so dramatic that we don&#39;t need to further reduce noise to make the experiment run even faster. Regardless, this situation is a helpful reminder to take these comparisons with a grain of salt. They are a good prediction for how an optimization would apply, but keep any eye out for artifacts that can sometimes skew the results.</p><p>Let&#39;s move on!</p><h2 id="experimenting-on-airbnb"><a href="#experimenting-on-airbnb" aria-describedby="experimenting-on-airbnb"><span aria-hidden="true">#</span><span>anchor</span></a>Experimenting on AirBnB</h2><p>Running the Mimic Pre-Rendered HTML experiment on AirBnB’s homepage gives us the following results (adjusted for differences in proxy timing, once again).</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture16_bn3mee.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture16_bn3mee.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture16_bn3mee.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture16_bn3mee.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture16_bn3mee.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture16_bn3mee.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture16_bn3mee.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture16_bn3mee.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture16_bn3mee.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture16_bn3mee.png 1800w" alt="screenshot of the following page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p><a href="https://www.webpagetest.org/video/compare.php?tests=220916_BiDcN0_B3S,220916_BiDcCW_B3R&amp;ignoreTTFB">Link to this result</a></p><p>Another huge improvement, especially since this test was run on Desktop with a fast cable connection! <strong>By serving useful HTML up-front, we get a nearly 5 second improvement on LCP</strong>. Also, it’s interesting to note just how early the images begin to load in this case due to their presence in the initial HTML. Browsers are designed to scan HTML very early after delivery and fetch resources–images, videos, other assets– that will be necessary for the initial layout. Having those images in the HTML allows the browser to discover them immediately, rather than much later as shown in the control site, after JavaScript generates the HTML that contains the image references.</p><h2 id="how-about-a-few-more-sites"><a href="#how-about-a-few-more-sites" aria-describedby="how-about-a-few-more-sites"><span aria-hidden="true">#</span><span>anchor</span></a>How About a Few More Sites?</h2><p>To spread the love, let’s see the impact of this experiment on a few more JavaScript-reliant sites, shall we?</p><p>Here’s CNN.com (<a href="https://www.webpagetest.org/video/compare.php?tests=220920_BiDcSF_CMX,220920_BiDc1W_CMV&amp;ignoreTTFB">with an over 8-second improvement in start render and 13-second faster LCP on 4G Chrome mobile</a>):</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture18_dnnfc1.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture18_dnnfc1.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture18_dnnfc1.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture18_dnnfc1.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture18_dnnfc1.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture18_dnnfc1.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture18_dnnfc1.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture18_dnnfc1.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture18_dnnfc1.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture18_dnnfc1.png 1800w" alt="screenshot of the prior linked page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Here’s Reddit (<a href="https://www.webpagetest.org/video/compare.php?tests=220920_BiDcHG_BGC,220920_BiDc1S_BG9&amp;ignoreTTFB">5.38s LCP improvement on 4G Mobile Chrome</a>):</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture19_nmtpho.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture19_nmtpho.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture19_nmtpho.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture19_nmtpho.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture19_nmtpho.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture19_nmtpho.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture19_nmtpho.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture19_nmtpho.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture19_nmtpho.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture19_nmtpho.png 1800w" alt="screenshot of the prior linked page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Here’s Apple.com (<a href="https://www.webpagetest.org/video/compare.php?tests=220920_BiDcZD_BNT,220920_BiDcJX_BNR&amp;ignoreTTFB">4.0s improvement in start render LCP on 4G Chrome mobile</a>):</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture20_qcsnuq.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture20_qcsnuq.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture20_qcsnuq.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture20_qcsnuq.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture20_qcsnuq.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture20_qcsnuq.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture20_qcsnuq.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture20_qcsnuq.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture20_qcsnuq.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture20_qcsnuq.png 1800w" alt="screenshot of the prior linked page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Here’s FedEx.com (<a href="https://www.webpagetest.org/video/compare.php?tests=220920_AiDcZB_C7H,220920_AiDcFD_C7G&amp;ignoreTTFB">4 second faster start render on 4G Chrome mobile</a>):</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture21_xkbnyv.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture21_xkbnyv.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture21_xkbnyv.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture21_xkbnyv.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture21_xkbnyv.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture21_xkbnyv.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture21_xkbnyv.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture21_xkbnyv.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture21_xkbnyv.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture21_xkbnyv.png 1800w" alt="screenshot of the prior linked page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p>Here’s one from my favorite local ice cream shop (<a href="https://www.webpagetest.org/video/compare.php?tests=220622_BiDc57_BMR,220622_BiDc4Y_BMP&amp;ignoreTTFB">8.47s faster LCP on 4G Chrome mobile</a>):</p><p><img src="https://blog.webpagetest.org/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture22_noceng.png" srcset="/cloudinary/webpagetest/image/upload/f_auto,q_auto,w_225/mimic-post/Picture22_noceng.png 225w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_450/mimic-post/Picture22_noceng.png 450w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_675/mimic-post/Picture22_noceng.png 675w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_900/mimic-post/Picture22_noceng.png 900w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_990/mimic-post/Picture22_noceng.png 990w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1125/mimic-post/Picture22_noceng.png 1125w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1350/mimic-post/Picture22_noceng.png 1350w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1575/mimic-post/Picture22_noceng.png 1575w, /cloudinary/webpagetest/image/upload/f_auto,q_auto,w_1800/mimic-post/Picture22_noceng.png 1800w" alt="screenshot of the prior linked page" loading="lazy" sizes="(min-width: 60em) 56.25rem, (min-width: 40em) 95vw, 90vw"/></p><p><strong>So many wins!</strong> As this post demonstrates, serving useful HTML up-front faster than client-side generated HTML–often by a lot. And there are many other reasons useful HTML is better too! Accessibility is a big one. The moment a site becomes interactive–that is, when a page not only <em>looks</em> usable but actually is usable from a user input perspective–is often the moment that a site becomes accessible to assistive technology like screen readers.</p><h2 id="okay...-i&#39;m-convinced.-how-do-i-do-it"><a href="#okay...-i&#39;m-convinced.-how-do-i-do-it" aria-describedby="okay...-i&#39;m-convinced.-how-do-i-do-it"><span aria-hidden="true">#</span><span>anchor</span></a>Okay... I&#39;m convinced. How do I do it?</h2><p>Unfortunately, that part&#39;s beyond the scope of this post, but there are many great articles out there addressing this question head-on. The work involved in rendering JavaScript content on the server instead of the browser can often be complex and techniques will vary depending on your site&#39;s architecture.</p><p>Fortunately, more and more JavaScript frameworks are offering solutions for server rendering and some even offer it as a default. Given that this problem is so widespread and frequently discussed, you may just find that others have already solved the problem for your technology stack of choice. So go check the documentation, do some googling for terms like &#34;SSR&#34; and &#34;server rendering&#34;, and hopefully you&#39;ll be well on your way to improvements.</p><h2 id="thanks-for-reading!"><a href="#thanks-for-reading!" aria-describedby="thanks-for-reading!"><span aria-hidden="true">#</span><span>anchor</span></a>Thanks for reading!</h2><p>I hope this post makes it clear that serving meaningful HTML can be one of the absolute best things you can do for a site&#39;s performance. WebPageTest Experiments are designed to help us understand which changes are worth our effort before we do any of the work, and the “Mimic Pre-Rendered HTML” experiment is a particularly great example of that value.</p><p>The more information we have, the more informed decisions we can make!</p><p>Thanks for reading!</p></div></div><div><p>Scott Jehl is a Senior Experience Engineer at Catchpoint who cares about creating fast, compelling digital experiences that can be delivered to the broadest possible audience. He is the creator of the Lightning-Fast Web Performance Course, author of Responsible Responsive Design (A Book Apart, 2014), and co-author of Designing with Progressive Enhancement (New Riders, 2010). He is also a frequent speaker at web conferences around the world. More at <a href="https://scottjehl.com">scottjehl.com</a></p><p><a href="https://twitter.com/scottjehl">@scottjehl</a></p></div></div>
  </body>
</html>
