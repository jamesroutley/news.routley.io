<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://notes.atomutek.org/gamebooks-and-graph-theory.html">Original</a>
    <h1>Gamebooks and graph theory (2019)</h1>
    
    <div id="readability-page-1" class="page"><div>
    <!-- summary: Gamebooks could be represented as graphs. I was wondering what I could understand by applying graph theory to gamebooks. -->

<p>A game book is, contrary to the usual books, a book you don&#39;t read pages sequentially. These books are read interactively. You are offered a choice after a paragraph: go to the right turn to section 7, go to the left turn to 138. That&#39;s it. Depending on the series, you might have additional rules: fight, magic, psi power, etc.</p>
<p><a href="https://notes.atomutek.org/img/dawn-of-the-darklords_graph.png"><img alt="Dawn of the darklords graph" src="https://notes.atomutek.org/img/dawn-of-the-darklords_graph.png"/></a>
<em></em></p><p><em>An example of a graph</em></p>
<p>During the winter holidays, I thought a bit more about these books. They could be encoded as <a href="https://en.wikipedia.org/wiki/Directed_graph">directed graph networks</a>. Therefore I could probably apply a bunch of network algorithms to them to extract interesting information such as:</p>
<ul>
<li>the shortest path to an instant death,</li>
<li>the path with the most fights,</li>
<li>etc.</li>
</ul>
<p>I chose for my analysis the <a href="https://en.wikipedia.org/wiki/Lone_Wolf_(gamebooks)">Lone Wolf series</a> because, luckily for me, some people have put all the books in <a href="https://www.projectaon.org/">an electronic format and it&#39;s legal</a>. It&#39;s a story about Lone Wolf (unexpected I know) the last of his kind, a caste of warrior monks.</p>
<p>NB: <em>The Dawn of the Darklords</em> was excluded from the analysis as it was not officially released as a gamebook. It was included in the Magnamund companion.</p>
<h2>TL;DR</h2>
<ul>
<li>The <em>Masters of Darkness</em> has the most action packed with a possible solution path including <strong>65</strong> fights;</li>
<li>The shortest path to death is <em>The Kingdoms of Terror</em> with only a <strong>5</strong> section path;</li>
<li>The <em>Caverns of Kalte</em> is the most deadly adventure with <strong>19</strong> instant death sections;</li>
<li>The shortest adventure is <em>Flight from the Dark</em> with a solution path only <strong>27</strong> sections long;</li>
<li>The longest adventure which can be done is <em>The Shadow on the Sand</em> with a touristic path of <strong>224</strong> sections, more than half of the sections (400).</li>
</ul>
<h2>Summary</h2>
<p>Here is a summary for the 28 books I&#39;ve analyzed. For now Lonewolf comprises 4 series:</p>
<ul>
<li>Kai series: 1 to 5</li>
<li>Magnakai series: 6 to 12</li>
<li>Grand Master series: 13 to 20</li>
<li>New Order series: 21 to 32 (but now only 28 in project aon)</li>
</ul>
<p>The values reported below are the average value for each category. Something interesting we can see if that from the 3rd series, there are no more cycles and the shortest path has increased on average 50% compared to the 1st and 2nd series. Also, the shortest path to death has tripled and the number of insta-death was halved.</p>
<p>Over time, the books might have become more focused on adventure and story but also less punishing. Having only read the first couple of books, I can&#39;t comment on this but if somebody has an opinion on this, I would be happy to hear about it and maybe update the post with your comments.</p>
<table>
<thead>
<tr>
<th>series</th>
<th>shortest path</th>
<th>shortest path to death</th>
<th>path with the most fights</th>
<th># of fight</th>
<th># of luck</th>
<th># of death</th>
<th># of cycles</th>
<th>longest path</th>
</tr>
</thead>
<tbody>
<tr>
<td>1-kai</td>
<td>51</td>
<td>12</td>
<td>20</td>
<td>43</td>
<td>25</td>
<td>11</td>
<td>11</td>
<td>153</td>
</tr>
<tr>
<td>2-magnakai</td>
<td>66</td>
<td>10</td>
<td>21</td>
<td>42</td>
<td>23</td>
<td>15</td>
<td>5</td>
<td>171</td>
</tr>
<tr>
<td>3-grand-master</td>
<td>95</td>
<td>37</td>
<td>18</td>
<td>40</td>
<td>37</td>
<td>7</td>
<td>0</td>
<td>163</td>
</tr>
<tr>
<td>4-new-order</td>
<td>97</td>
<td>30</td>
<td>12</td>
<td>27</td>
<td>43</td>
<td>6</td>
<td>0</td>
<td>156</td>
</tr>
</tbody>
</table>

<h2>The preparation: Turn to 1</h2>
<p>&#34;Turn to&#34; are the mythic words in these game books. It&#39;s also how we will divide the different sections of text, by using regexp.
There are 5 types of section and their assigned color:</p>
<ul>
<li><strong>normal</strong>: you can move forward to another section (white),</li>
<li><strong>luck</strong>: you are asked to test your luck and you can move forward to another section (green),</li>
<li><strong>fight</strong>: you are asked to fight some monster(s) and you can move forward to another section (yellow),</li>
<li><strong>death</strong>: you chose badly and you got yourself killed, you have to restart from the section 1 (red),</li>
<li><strong>start/end</strong>: first section and last section (blue).</li>
</ul>
<p><a href="https://notes.atomutek.org/img/dawn-of-the-darklords_graph.png"><img alt="Dawn of the darklords graph" src="https://notes.atomutek.org/img/dawn-of-the-darklords_graph.png"/></a>
<em></em></p><p><em>Dawn of the darklords graph</em></p>
<p>Once the sections are defined, we have to create the directed graph. To do so, I used two python libraries:</p>
<ul>
<li><a href="https://www.graphviz.org/">graphviz</a>, for the visualization,</li>
<li><a href="https://networkx.github.io/">networkx</a>, for processing the paths.</li>
</ul>
<h2>Extracting the interesting information: Test your Luck</h2>
<p>I mainly used <code>networkx</code> for the graph network analysis. It&#39;s a straightforward library and the documentation is good.</p>
<h3>Do you need a DAGger?</h3>
<p>Typically a Lonewolf adventure is the equivalent of a Directed (A)Cyclic Graph:</p>
<ul>
<li><strong>Directed</strong>: Lonewolf, your character, goes from the section 1 to hopefully the latest section which is depending on the book the section 300, 350 or 400, without the possibility to come back to the previous section;</li>
<li><strong>Acyclic</strong>: This is not totally true for the Lonewolf series as 7 books contain cycles, a &#34;circular&#34; path between two nodes which a node is repeated twice. Some algorithms like the shortest path or longest path require a DAG and we need to remove the cycles before running them.</li>
<li><strong>Graph</strong>: The sections are the nodes of the graph and the vertices the choices for each section.</li>
</ul>
<h3>Disconnected graphs</h3>
<p>In several books, graphs are disconnected. It means you can&#39;t go from the section 1 to the end section (300 or 350). This indicates usually that there is an enigma or puzzle asking to add numbers discovered along the adventure and reach the section given by the number.
The only way to process these graphs is to check the text notes and add the missing edges manually.</p>
<h3>Cycle removal</h3>
<p>The cycle removal is an interesting problem as it is one of the first problem to have been shown as NP-complete (NP stands for Non deterministic Polynomial time). This means that there is no known way to find a solution to solve that problem quickly and the time to find a solution grows as the size of the input grows. Nonetheless we are lucky because the data from a gamebook is usually quite small (300 to 400 nodes and 400 to 600 edges)!</p>
<p>The idea behind the cycle removal is simple:</p>
<ul>
<li>do a DFS search,</li>
<li>look at the nodes and their children,</li>
<li>if one or more children have been already visited, remove that edge.</li>
</ul>

<p>I was curious about what could be done with a graph analysis of such textual / interactive games.
Besides applying basic algorithms to test if the gamebook is playable, I didn&#39;t find much insights from it.
I would like to see if there are any correlations between the features I chose and the popularity of the gamebooks.
That being said, it was a cool project to do. I brushed up on the graph theory which I never really used outside of university.</p>
<h2>Future works</h2>
<ul>
<li>Apply the same methodology to Figthing Fantasy gamebooks</li>
</ul>

<ul>
<li><a href="https://www.projectaon.org/">https://www.projectaon.org/</a></li>
</ul>

<ul>
<li><a href="https://gamebooks.org">https://gamebooks.org</a></li>
<li><a href="https://jeremydouglass.github.io/transverse-gallery">https://jeremydouglass.github.io/transverse-gallery</a></li>
<li><a href="https://maetl.net/notes/storyboard/narrative-graph-models">https://maetl.net/notes/storyboard/narrative-graph-models</a></li>
</ul>
  </div></div>
  </body>
</html>
