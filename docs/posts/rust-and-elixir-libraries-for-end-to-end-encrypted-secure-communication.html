<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/build-trust/ockam">Original</a>
    <h1>Rust and Elixir libraries for end-to-end encrypted secure communication</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<hr/>
<p dir="auto">
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/implementations#readme">
<img alt="Ockam" src="https://notebook.wesleyac.com/build-trust/ockam/raw/develop/documentation/concepts/assets/banner.png" width="900"/>
</a>
</p>
<p dir="auto">Rust and Elixir libraries for end-to-end encrypted, mutually authenticated, secure communication.</p>
<p dir="auto">Data, within modern distributed applications, are rarely exchanged over a single point-to-point
transport connection. Application messages routinely flow over complex, multi-hop, multi-protocol
routes — <em>across data centers, through queues and caches, via gateways and brokers</em> — before reaching
their end destination.</p>
<p dir="auto">Transport layer security protocols are unable to protect application messages because their protection
is constrained by the length and duration of the underlying transport connection.</p>
<p dir="auto">Ockam is a suite of programming libraries and infrastructure that makes it simple for our applications
to guarantee end-to-end integrity, authenticity, and confidentiality of data.</p>
<p dir="auto">We no longer have to implicitly depend on the defenses of every machine or application within the same,
usually porous, network boundary. Our application&#39;s messages don&#39;t have to be vulnerable at every point,
along their journey, where a transport connection terminates.</p>
<p dir="auto">Instead, our application can have a strikingly smaller vulnerability surface and easily make
<em>granular authorization decisions about all incoming information and commands.</em></p>
<hr/>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<ul dir="auto">
<li>End-to-end encrypted, mutually authenticated <em>secure channels</em>.</li>
<li>Key establishment, rotation, and revocation - <em>for fleets, at scale</em>.</li>
<li>Attribute-based Access Control - credentials with <em>selective disclosure</em>.</li>
<li>Add-ons for a variety of operating environments, transport protocols, and <em>cryptographic hardware</em>.</li>
<li>Libraries for multiple languages - <em>Rust, Elixir</em> (more on the roadmap).</li>
</ul>
<hr/>
<h2 dir="auto"><a id="user-content-hello-ockam" aria-hidden="true" href="#hello-ockam"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hello Ockam</h2>
<p dir="auto">Let&#39;s write a simple example to create an encrypted secure channel between Alice and Bob. When a
message is sent through this channel it will be encrypted when it enters the channel and decrypted
just before it exits the channel.</p>
<p dir="auto">For the purpose of our first example, we&#39;ll create a local channel within one program. In
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme">later examples</a>, you&#39;ll see that it&#39;s just as easy to create
end-to-end protected channels over multi-hop, multi-protocol transport routes:</p>
<ol dir="auto">
<li>
<p dir="auto">Install Rust</p>
<div data-snippet-clipboard-copy-content="curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh"><pre><code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre></div>
</li>
<li>
<p dir="auto">Setup a new cargo project to get started.</p>
<div data-snippet-clipboard-copy-content="cargo new --lib hello_ockam &amp;&amp; cd hello_ockam &amp;&amp; mkdir examples &amp;&amp;
  echo &#39;ockam = &#34;*&#34;&#39; &gt;&gt; Cargo.toml &amp;&amp; cargo build"><pre><code>cargo new --lib hello_ockam &amp;&amp; cd hello_ockam &amp;&amp; mkdir examples &amp;&amp;
  echo &#39;ockam = &#34;*&#34;&#39; &gt;&gt; Cargo.toml &amp;&amp; cargo build
</code></pre></div>
<p dir="auto">If the above instructions don&#39;t work on your machine, please
<a href="https://github.com/build-trust/ockam/discussions/1642" data-hovercard-type="discussion" data-hovercard-url="/build-trust/ockam/discussions/1642/hovercard">post a question</a>,
we would love to help.</p>
</li>
<li>
<p dir="auto">Create a file at <code>examples/hello.rs</code> and copy the below code snippet to it.</p>
</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="// examples/hello.rs
use ockam::{
    authenticated_storage::InMemoryStorage,
    identity::{Identity, TrustEveryonePolicy},
    route,
    vault::Vault,
    Context, Result,
};

#[ockam::node]
async fn main(mut ctx: Context) -&gt; Result&lt;()&gt; {
    // Create a Vault to safely store secret keys for Alice and Bob.
    let vault = Vault::create();

    // Create an Identity to represent Bob.
    let bob = Identity::create(&amp;ctx, &amp;vault).await?;

    // Create an AuthenticatedStorage to store info about Bob&#39;s known Identities.
    let bob_storage = InMemoryStorage::new();

    // Create a secure channel listener for Bob that will wait for requests to
    // initiate an Authenticated Key Exchange.
    bob.create_secure_channel_listener(&#34;bob&#34;, TrustEveryonePolicy, &amp;bob_storage)
        .await?;

    // Create an entity to represent Alice.
    let alice = Identity::create(&amp;ctx, &amp;vault).await?;

    // Create an AuthenticatedStorage to store info about Alice&#39;s known Identities.
    let alice_storage = InMemoryStorage::new();

    // As Alice, connect to Bob&#39;s secure channel listener and perform an
    // Authenticated Key Exchange to establish an encrypted secure channel with Bob.
    let channel = alice
        .create_secure_channel(&#34;bob&#34;, TrustEveryonePolicy, &amp;alice_storage)
        .await?;

    // Send a message, ** THROUGH ** the secure channel,
    // to the &#34;app&#34; worker on the other side.
    //
    // This message will automatically get encrypted when it enters the channel
    // and decrypted just before it exits the channel.
    ctx.send(route![channel, &#34;app&#34;], &#34;Hello Ockam!&#34;.to_string()).await?;

    // Wait to receive a message for the &#34;app&#34; worker and print it.
    let message = ctx.receive::&lt;String&gt;().await?;
    println!(&#34;App Received: {}&#34;, message); // should print &#34;Hello Ockam!&#34;

    // Stop all workers, stop the node, cleanup and return.
    ctx.stop().await
}
"><pre><span>// examples/hello.rs</span>
<span>use</span> ockam<span>::</span><span>{</span>
    authenticated_storage<span>::</span><span>InMemoryStorage</span><span>,</span>
    identity<span>::</span><span>{</span><span>Identity</span><span>,</span> <span>TrustEveryonePolicy</span><span>}</span><span>,</span>
    route<span>,</span>
    vault<span>::</span><span>Vault</span><span>,</span>
    <span>Context</span><span>,</span> <span>Result</span><span>,</span>
<span>}</span><span>;</span>

<span>#<span>[</span>ockam<span>::</span>node<span>]</span></span>
<span>async</span> <span>fn</span> <span>main</span><span>(</span><span>mut</span> <span>ctx</span><span>:</span> <span>Context</span><span>)</span> -&gt; <span>Result</span><span>&lt;</span><span>(</span><span>)</span><span>&gt;</span> <span>{</span>
    <span>// Create a Vault to safely store secret keys for Alice and Bob.</span>
    <span>let</span> vault = <span>Vault</span><span>::</span><span>create</span><span>(</span><span>)</span><span>;</span>

    <span>// Create an Identity to represent Bob.</span>
    <span>let</span> bob = <span>Identity</span><span>::</span><span>create</span><span>(</span><span>&amp;</span>ctx<span>,</span> <span>&amp;</span>vault<span>)</span><span>.</span><span>await</span>?<span>;</span>

    <span>// Create an AuthenticatedStorage to store info about Bob&#39;s known Identities.</span>
    <span>let</span> bob_storage = <span>InMemoryStorage</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>

    <span>// Create a secure channel listener for Bob that will wait for requests to</span>
    <span>// initiate an Authenticated Key Exchange.</span>
    bob<span>.</span><span>create_secure_channel_listener</span><span>(</span><span>&#34;bob&#34;</span><span>,</span> <span>TrustEveryonePolicy</span><span>,</span> <span>&amp;</span>bob_storage<span>)</span>
        <span>.</span><span>await</span>?<span>;</span>

    <span>// Create an entity to represent Alice.</span>
    <span>let</span> alice = <span>Identity</span><span>::</span><span>create</span><span>(</span><span>&amp;</span>ctx<span>,</span> <span>&amp;</span>vault<span>)</span><span>.</span><span>await</span>?<span>;</span>

    <span>// Create an AuthenticatedStorage to store info about Alice&#39;s known Identities.</span>
    <span>let</span> alice_storage = <span>InMemoryStorage</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>

    <span>// As Alice, connect to Bob&#39;s secure channel listener and perform an</span>
    <span>// Authenticated Key Exchange to establish an encrypted secure channel with Bob.</span>
    <span>let</span> channel = alice
        <span>.</span><span>create_secure_channel</span><span>(</span><span>&#34;bob&#34;</span><span>,</span> <span>TrustEveryonePolicy</span><span>,</span> <span>&amp;</span>alice_storage<span>)</span>
        <span>.</span><span>await</span>?<span>;</span>

    <span>// Send a message, ** THROUGH ** the secure channel,</span>
    <span>// to the &#34;app&#34; worker on the other side.</span>
    <span>//</span>
    <span>// This message will automatically get encrypted when it enters the channel</span>
    <span>// and decrypted just before it exits the channel.</span>
    ctx<span>.</span><span>send</span><span>(</span><span>route</span><span>!</span><span>[</span>channel, <span>&#34;app&#34;</span><span>]</span><span>,</span> <span>&#34;Hello Ockam!&#34;</span><span>.</span><span>to_string</span><span>(</span><span>)</span><span>)</span><span>.</span><span>await</span>?<span>;</span>

    <span>// Wait to receive a message for the &#34;app&#34; worker and print it.</span>
    <span>let</span> message = ctx<span>.</span><span>receive</span><span>::</span><span>&lt;</span><span>String</span><span>&gt;</span><span>(</span><span>)</span><span>.</span><span>await</span>?<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;App Received: {}&#34;</span>, message<span>)</span><span>;</span> <span>// should print &#34;Hello Ockam!&#34;</span>

    <span>// Stop all workers, stop the node, cleanup and return.</span>
    ctx<span>.</span><span>stop</span><span>(</span><span>)</span><span>.</span><span>await</span>
<span>}</span></pre></div>
<ol start="4" dir="auto">
<li>
<p dir="auto">Run the example</p>
<div data-snippet-clipboard-copy-content="cargo run --example hello"><pre><code>cargo run --example hello
</code></pre></div>
</li>
</ol>
<p dir="auto">Congratulations on running your first Ockam program <g-emoji alias="partying_face" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f973.png">🥳</g-emoji>.</p>
<p dir="auto">A lot happened when you ran this small example. It created a secure vault, spawned workers to represent
entities, established a mutually authenticated channel and then routed a message through that channel.
This involved running cryptographic protocols for generating keys, authenticating as an entity, performing
an authenticated key exchange and exchanging messages with authenticated encryption.</p>
<p dir="auto">To learn more about how we make these powerful cryptographic protocols simple to use, please have a look
at our <a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme">step-by-step guide</a> where we introduce the building blocks in Ockam.</p>
<hr/>
<h2 dir="auto"><a id="user-content-concepts" aria-hidden="true" href="#concepts"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Concepts</h2>
<p dir="auto">Here&#39;s a high-level view of the core ideas in Ockam.</p>
<p dir="auto">
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme">
<img alt="Ockam" src="https://notebook.wesleyac.com/build-trust/ockam/raw/develop/documentation/concepts/assets/ockam-features.png" width="900"/>
</a>
</p>
<p dir="auto">To learn more please see our <a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme">step-by-step guide</a>.</p>
<h2 dir="auto"><a id="user-content-next-steps" aria-hidden="true" href="#next-steps"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Next Steps</h2>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encryption-with-rust#readme"><strong>Build End-to-End Encryption with Rust</strong></a>:
In this hands-on guide, we create two small Rust programs called Alice and Bob. Alice and Bob send each other
messages, over the network, via a cloud service. They mutually authenticate each other and have a cryptographic
guarantee that the integrity, authenticity, and confidentiality of their messages is protected end-to-end.
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encryption-with-rust#readme"><g-emoji alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">👉</g-emoji></a></p>
</li>
<li>
<p dir="auto"><a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encryption-through-kafka#readme"><strong>Build End-to-End Encryption through Kafka</strong></a>:
In this guide, we show two programs called Alice and Bob. Alice and Bob send each other messages, over
the network, via a cloud service, <em>through Kafka</em>. They mutually authenticate each other and have a
cryptographic guarantee that the integrity, authenticity, and confidentiality of their messages is protected
end-to-end. The Kafka instance, the intermediary cloud service and attackers on the network are not be able
to see or change the contents of en-route messages. The application data in Kafka is encrypted.
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encryption-through-kafka#readme"><g-emoji alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">👉</g-emoji></a></p>
</li>
<li>
<p dir="auto"><a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encrypt-all-application-layer-communication#readme"><strong>How to end-to-end encrypt all application layer communication</strong></a>:
In this hands-on guide, we&#39;ll create two simple Rust programs to <strong>transparently tunnel</strong> arbitrary
application layer communication through Ockam&#39;s end-to-end encrypted, mutually authenticated secure channels.
These example programs are also available in a docker image so you can try them without setting up a rust
toolchain.
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/end-to-end-encrypt-all-application-layer-communication#readme"><g-emoji alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">👉</g-emoji></a></p>
</li>
<li>
<p dir="auto"><a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/secure-remote-access-tunnels#readme"><strong>Build a secure access tunnel to a service in a remote private network</strong></a>:
In this guide, we&#39;ll write a few simple Rust programs to programmatically create secure access tunnels to remote
services and devices that are running in a private network, behind a NAT. We&#39;ll then tunnel arbitrary communication
protocols through these secure tunnels.
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/use-cases/secure-remote-access-tunnels#readme"><g-emoji alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">👉</g-emoji></a></p>
</li>
<li>
<p dir="auto"><a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme"><strong>Step-by-Step Deep Dive</strong></a>:
In this step-by-step guide we write many small rust programs to understand the various building blocks
that make up Ockam. We dive into Node, Workers, Routing, Transport, Secure Channels and more.
<a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/documentation/guides/rust#readme"><g-emoji alias="point_right" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f449.png">👉</g-emoji></a></p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">The code in this repository is licensed under the terms of the <a href="https://notebook.wesleyac.com/build-trust/ockam/blob/develop/LICENSE">Apache License 2.0</a>.</p>
</article>
          </div></div>
  </body>
</html>
