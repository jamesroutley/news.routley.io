<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://words.filippo.io/go-source/">Original</a>
    <h1>Inspecting the Source of Go Modules</h1>
    
    <div id="readability-page-1" class="page"><article>
        <time datetime="2026-02-12">
            12 Feb 2026</time>
        
        <section>
            <!-- buttondown-editor-mode: plaintext -->
<p>Go has indisputably the best package integrity story of any programming language ecosystem. The <a href="https://golang.org/design/25530-sumdb">Go Checksum Database</a> guarantees that every Go client in the world is using the same source for a given Go module and version, forever.</p>
<p>It works despite the decentralized nature of Go modules, which can be fetched directly from their origin based on the import path. (For example, you can fetch v1.2.3 of <code>github.com/example/mod</code> by cloning the git repository and exporting the v1.2.3 tag. <code>GOPROXY=direct</code> forces this.<sup id="fnref:direct"><a href="#fn:direct">1</a></sup>)</p>
<p>The Checksum Database stores the cryptographic hash of a module version the first time it is used across the ecosystem, and then provides that same checksum to every Go client going forward. If e.g. a git tag were force-pushed or a code host were to try to serve targeted versions to some clients, the <code>go</code> tool would notice the mismatch and fail the fetch.</p>
<p>This is vastly more practical than requiring module authors to manage keys, but provides comparable security, because the author themselves can verify the checksum in the Checksum Database matches the one they developed. Moreover, the Checksum Database is a <a href="https://research.swtch.com/tlog">transparency log</a>, which prevents even the database operator (i.e. Google) from falsifying or hiding entries.</p>
<p>However, any time we <strong>read code directly from the code host</strong> we introduce a weak link in this chain. For example, there is no guarantee that the code displayed at <code>https://github.com/example/mod/blob/v1.2.3/exp.go</code> is the actual contents of <code>exp.go</code> from v1.2.3 of module <code>github.com/example/mod</code>: GitHub allows force-pushing git tags and even built its recommended GitHub Actions workflows on top of mutable tags.</p>
<p>Last year this was taken advantage of to make a classic <a href="https://en.wikipedia.org/wiki/Typosquatting">typosquatting</a> attack harder to identify. <a href="https://www.heise.de/en/news/Typosquatting-in-the-Go-ecosystem-Fake-BoltDB-package-discovered-10270367.html">A fake BoltDB module was published with malicious code</a>, and then innocent code was force-pushed to GitHub. Some commenters described this as exploiting the Go Modules Mirror’s cache, but it is better understood as exploiting the natural lack of verification in the GitHub web interface, which doesn’t show the authentic (and in this case malicious) source of a module version, as used by actual Go tooling.<sup id="fnref:github"><a href="#fn:github">2</a></sup> This is similar to how sometimes malicious packages are published to npm and then linked to GitHub repositories with innocent code.</p>
<p>The solution when reviewing modules locally is to use a command like</p>
<pre><code>cd $(go mod download -json filippo.io/age@v1.3.1 | jq -r .Dir)
</code></pre>
<p>to fetch the correct source.<sup id="fnref:agent"><a href="#fn:agent">3</a></sup> We are also <a href="https://github.com/golang/go/issues/68669#issuecomment-2755906892">working on a <code>go mod verify -tag</code> command</a> to verify the contents of a local git repository against the Go Checksum Database, which can also be used by module authors to check that the contents of the Checksum Database are correct.</p>
<p>However, pkg.go.dev still links to unverified code hosts, and clicking on pkg.go.dev source links is very convenient.</p>
<p>Russ Cox made a simple service to view the source of a Go module at <a href="https://go-mod-viewer.appspot.com/">go-mod-viewer.appspot.com</a>.</p>
<p><a href="https://pkg.geomys.dev">pkg.geomys.dev</a> is a new similar service with optional syntax highlighting, line and <a href="https://pkg.geomys.dev/filippo.io/age@v1.3.1/tag/tag.go#L105-L109">line range linking</a>, multiple fonts, automatic dark mode, and a <a href="https://pkg.geomys.dev/filippo.io/age@v1.3.1">file tree</a> and <a href="https://pkg.geomys.dev/filippo.io/age">module versions</a> browser.</p>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/VYWLGzbZKSE?si=PjOXiLEzx-umyogs&amp;controls=0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>

<p>You can use it manually by replacing <code>go.dev</code> with <code>geomys.dev</code> in any pkg.go.dev URL, or you can install the companion browser extension for Chrome and Firefox, which replaces links to code hosts in pkg.go.dev pages with links to pkg.geomys.dev.</p>

<div>
    <a href="https://chromewebstore.google.com/detail/pkggeomysdev-source-links/kehcbeihpiighnghampfaiapahlbjlgl"><picture>
        <source srcset="https://pkg.geomys.dev/assets/chrome-web-store-badge-border.png" media="(prefers-color-scheme: dark)"/>
        <img src="https://pkg.geomys.dev/assets/chrome-web-store-badge.png" alt="Available in the Chrome Web Store"/>
    </picture></a>
    <p><a href="https://addons.mozilla.org/en-US/firefox/addon/geomys-source-links/"><img src="https://pkg.geomys.dev/assets/firefox-addon-badge.svg" alt="Get the Add-on for Firefox"/></a>
</p></div>

<p>The service works by making <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Range_requests">HTTP Range requests</a> directly to the module version’s zip file, and decompressing the file in the browser, without having to fetch the whole archive. Once <a href="https://github.com/golang/go/issues/77496">proxy.golang.org fixes their CORS configuration</a> it will work without any Geomys backend.</p>
<p>Currently, it trusts the Google Modules Proxy to serve the correct zip files, without checking the transparency log proof. I plan to implement optional proof checking once proxy.golang.org CORS is fixed, including <a href="https://sourcespotter.com/sumdb/">third-party gossip</a>. Unfortunately, checking the proof does require fetching the whole module version’s zip archive to compute the dirhash, which is included in the Checksum Database (and in go.sum).</p>
<p>For updates, follow me on Bluesky at <a href="https://bsky.app/profile/filippo.abyssdomain.expert">@filippo.abyssdomain.expert</a> or on Mastodon at <a href="https://abyssdomain.expert/@filippo">@filippo@abyssdomain.expert</a>.</p>
<h2 id="the-picture">The picture</h2>
<p>I recently went to Paris and found the Tour Eiffel elevator to be more fascinating than the tower itself. Whatever that says about me.</p>
<p><img alt="A shot of the Tour Eiffel from the inside, looking up. A web of metal with the yellow elevator and its rails in the middle." src="https://assets.buttondown.email/images/0c2a763b-ba3a-4d2c-8ecf-263871d7b4b6.jpeg?w=960&amp;fit=max"/></p>
<p>My work is made possible by <a href="https://geomys.org">Geomys</a>, an organization of professional Go maintainers, which is funded by <a href="https://www.avalabs.org/">Ava Labs</a>, <a href="https://goteleport.com/">Teleport</a>, <a href="https://tailscale.com/">Tailscale</a>, and <a href="https://sentry.io/">Sentry</a>. Through our retainer contracts they ensure the sustainability and reliability of our open source maintenance work and get a direct line to my expertise and that of the other Geomys maintainers. (Learn more in the <a href="https://words.filippo.io/geomys">Geomys announcement</a>.)
Here are a few words from some of them!</p>
<p>Teleport — For the past five years, attacks and compromises have been shifting from traditional malware and security breaches to identifying and compromising valid user accounts and credentials with social engineering, credential theft, or phishing. <a href="https://goteleport.com/platform/identity/?utm=filippo">Teleport Identity</a> is designed to eliminate weak access patterns through access monitoring, minimize attack surface with access requests, and purge unused permissions via mandatory access reviews.</p>
<p>Ava Labs — We at <a href="https://www.avalabs.org">Ava Labs</a>, maintainer of <a href="https://github.com/ava-labs/avalanchego">AvalancheGo</a> (the most widely used client for interacting with the <a href="https://www.avax.network">Avalanche Network</a>), believe the sustainable maintenance and development of open source cryptographic protocols is critical to the broad adoption of blockchain technology. We are proud to support this necessary and impactful work through our ongoing sponsorship of Filippo and his team.</p>
<div>
<hr/>
<ol>
<li id="fn:direct">
<p>I generally recommend against <code>GOPROXY=direct</code> and actually configure <code>GOPROXY=proxy.golang.org</code> to remove the direct fallback and reduce the attack surface of running git clone on potentially adversarial repositories. That’s besides the point of this article, though: whether you fetch direct or through a proxy, you will still always get the same contents authenticated by the sumdb (or an error). <a href="#fnref:direct" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:github">
<p>Since this is getting misinterpreted, the solution is not for GitHub to implement ecosystem-specific validation (although immutable git tags would be nice to have for various reasons). Go supports many code hosts, including other VCS and even straight zip files. The solution is to use ecosystem-aware tooling to inspect source code, as detailed in the rest of the post. This applies to other ecosystems, as well: npmjs.com has na experimental code browser for packages. <a href="#fnref:github" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:agent">
<p>If you use a code agent, you can add the following line to your AGENTS.md or CLAUDE.md: 
  <code>To see source files from a dependency, or to answer questions about a dependency, run `go mod download -json MODULE` and use the returned `Dir` path to read the files.</code> <a href="#fnref:agent" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
</ol>
</div>
        </section>
    </article></div>
  </body>
</html>
