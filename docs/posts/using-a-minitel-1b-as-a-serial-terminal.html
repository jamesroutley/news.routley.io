<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.jgc.org/2022/03/using-minitel-1b-as-serial-terminal.html">Original</a>
    <h1>Using a Minitel 1B as a serial terminal</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-8654195135580418151" itemprop="description articleBody">
<p>So you&#39;ve got your hands on a late 1980s Minitel 1B (or something slightly later) and then you realize that the <a href="https://www.bbc.com/news/magazine-18610692">entire Minitel network shut down in 2012</a>. What do you do? Well, obviously, you recall that the Minitel 1B (and other later models) have two modes of operation: using the modem to connect to the Minitel service or as a serial terminal via the &#34;peri-informatique&#34; port. With the latter you can use the entire thing as a serial terminal and connect it to something (such as a Raspberry Pi) and browse the web.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgUs0VJvEZiw2hQWUoW3VhzECASHVdSPHVc-oWE7nBi-iCqNt3brUSBraa6XzgXkg6zRalLdw6O9Zdw0SEMzrsLUkXzPZv9MhsyyUvOqDo4VEEanBplCNFZc8X_oYSNOhJrES5U0S0J11r6LfmodDUkmfRbvaHNQ8nzzt13RmAvv57VUv8zBss=s3902"><img data-original-height="3902" data-original-width="2783" height="400" src="https://blogger.googleusercontent.com/img/a/AVvXsEgUs0VJvEZiw2hQWUoW3VhzECASHVdSPHVc-oWE7nBi-iCqNt3brUSBraa6XzgXkg6zRalLdw6O9Zdw0SEMzrsLUkXzPZv9MhsyyUvOqDo4VEEanBplCNFZc8X_oYSNOhJrES5U0S0J11r6LfmodDUkmfRbvaHNQ8nzzt13RmAvv57VUv8zBss=w285-h400" width="285"/></a></p><p>Note: there are other interesting modes (such as peer-to-peer Minitels) but I won&#39;t go into that here.</p><p>The peri-informatique port on the back of the Minitel is a five pin DIN socket which supports open collector TTL logic levels with up to 4,800 baud serial (later models supported faster transmission).</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEhrkL14guwBgCx2XRnZi34kmc0sF1yqsPLBPeSOhAUjWAlqu63__GWK65mTFgPIk3CiAHWvZlGWuiFLSXOtpc6DQPWFMeJ7ZJDzkK_m5JDazQM40A_WDK6BDT-kyGj90RFyCThpiBOudofYAUPF6SmNvFQzxJLqg7RxraMkKlyBGcc8dZD6DTE=s1512"><img data-original-height="1512" data-original-width="924" height="400" src="https://blogger.googleusercontent.com/img/a/AVvXsEhrkL14guwBgCx2XRnZi34kmc0sF1yqsPLBPeSOhAUjWAlqu63__GWK65mTFgPIk3CiAHWvZlGWuiFLSXOtpc6DQPWFMeJ7ZJDzkK_m5JDazQM40A_WDK6BDT-kyGj90RFyCThpiBOudofYAUPF6SmNvFQzxJLqg7RxraMkKlyBGcc8dZD6DTE=w245-h400" width="245"/></a></p><p>The pinout (note the ordering!) is pin 1 (RX), pin 2 (0V reference), pin 3 (TX), pin 4 (ready) and pin 5 (8.5V at 1A). With just three pins (1, 2, 4) it&#39;s pretty easy to put together a cable that turns the Minitel into a serial terminal.</p><p>And since the Minitel has an ASCII mode it&#39;ll work pretty well outside of its original Videotex format with the right combination of keys. It&#39;s important to have a Minitel with the FNCT key because it controls a lot of settings.</p><h3>A simple test</h3><p>A quick way to test that your Minitel is happy being in peri-informatique mode is to connect TX to RX in the DIN socket and see if characters get echoed to the screen. I did this with a small piece of paper clip connecting pin 1 (RX) to pin 3 (TX).</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEhQNLwaYjRF8l6Z_yU2RaVZrF3_Epl7vyZPjMmrPunpUYTVdCgeJo6JiD1FWLkdweLxHfkzdQUGNCZW5Zt07Cx_TDNI66oyyMDKftrGlGUNBI_TkBCZlxoIQ1owwikGqd5xXO9yqM3oQkM0A_YjSuVn3VjkNlV05k26bM5VPgQigl9Q5Hn0MKc=s2864"><img data-original-height="2649" data-original-width="2864" height="296" src="https://blogger.googleusercontent.com/img/a/AVvXsEhQNLwaYjRF8l6Z_yU2RaVZrF3_Epl7vyZPjMmrPunpUYTVdCgeJo6JiD1FWLkdweLxHfkzdQUGNCZW5Zt07Cx_TDNI66oyyMDKftrGlGUNBI_TkBCZlxoIQ1owwikGqd5xXO9yqM3oQkM0A_YjSuVn3VjkNlV05k26bM5VPgQigl9Q5Hn0MKc=s320" width="320"/></a></p><p>By default the peri-informatique port is active and so anything typed is sent out of it, and anything received is displayed. I like to set the display mode to US ASCII with <span>FNCT+T</span> followed by <span>A</span> (if you want a French version of ASCII use <span>FNCT+T</span> followed by <span>F</span>).</p><p>If you start typing you should see everything you type twice: once because you typed it and the Minitel echoed it and once because it got sent and receive through the piece of paperclip. To turn off local echo and just see what went from TX to RX, it&#39;s <span>FNCT+T</span> then <span>E</span>.</p><p>Assuming that worked then you&#39;re in good shape to turn this simple serial port into something that can be plugged into USB. For that you&#39;ll need a USB-to-serial adapter, three resistors, one transistor and a plug for the DIN socket.</p><h3>USB-to-Minitel Cable</h3><p>Before getting to the USB part of the connection it&#39;s worth taking an excursion through the details of the Minitel&#39;s serial port. The official documentation describes it as &#34;compatible with TTL open collector&#34; logic and gives the following constraints:</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgTKfhwZPYeR3TF4_qEGkys85sWJhJxtMj5Is8pACQF8YsaL1YiRJjNjJK2kkBsA6lv3xxS5t4axhKqAe2BlG9ELI6M-qOVmg_utdepAiv4KhDIi_5hWYMWQkbMltVnRbN59BgYp_qBV40c1exrR2oXd4dPcr8TBXW7-SagV2uHIrIlQddf1to=s1022"><img data-original-height="707" data-original-width="1022" height="276" src="https://blogger.googleusercontent.com/img/a/AVvXsEgTKfhwZPYeR3TF4_qEGkys85sWJhJxtMj5Is8pACQF8YsaL1YiRJjNjJK2kkBsA6lv3xxS5t4axhKqAe2BlG9ELI6M-qOVmg_utdepAiv4KhDIi_5hWYMWQkbMltVnRbN59BgYp_qBV40c1exrR2oXd4dPcr8TBXW7-SagV2uHIrIlQddf1to=w400-h276" width="400"/></a></p><p>Firstly, we learn that logic level 0 is below 0.4V and logic level 1 is above 2.5V (and below 15V). If you look at the RX diagram on the top left you can see that when receiving a logic 1 (voltage greater than 2.5V) current may flow <i>from</i> the Minitel and should be below 150uA. You might be asking yourself why the receive signal would be a current source. That&#39;s standard TTL logic style.</p><p>In TTL logic inputs are typically the emitter of a transistor. Here&#39;s a <a href="https://en.wikipedia.org/wiki/Transistor%E2%80%93transistor_logic#Fundamental_TTL_gate">simplified TTL NAND</a> gate. Notice how the inputs are emitters in a special double-emitter transistor.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgvfxit179qofOONP9XZk-123pyGURRZh7nue7fMxRYRzPPVIsyRd3sBgkaJiEzUUdl7WLqmsGfZT7XBk4aDHdxUa67w0TGwvaz7b_ii8s4CpPtyssYgZgYwWdjwwmLGolH74KxY5sK48gAmbaxul0N0AUqj0VTmrAxesE8QTuEfpI_UGT90Ik=s434"><img data-original-height="362" data-original-width="434" height="267" src="https://blogger.googleusercontent.com/img/a/AVvXsEgvfxit179qofOONP9XZk-123pyGURRZh7nue7fMxRYRzPPVIsyRd3sBgkaJiEzUUdl7WLqmsGfZT7XBk4aDHdxUa67w0TGwvaz7b_ii8s4CpPtyssYgZgYwWdjwwmLGolH74KxY5sK48gAmbaxul0N0AUqj0VTmrAxesE8QTuEfpI_UGT90Ik=s320" width="320"/></a></p><p>Imagine the case where A and B are tied to ground (logic 0): current will flow through VT1 across the base-emitter junction and therefore out A and B. So, an input is a current source when driven low.</p><p>OK, great, but what does the Minitel actually implement since there are no TTL logic gates on the PCB anywhere near the serial port. I ran across a Minitel <a href="http://matthieu.benoit.free.fr/minitel/sch_minitel.pdf">schematic</a> on line that has the serial port circruit. Here&#39;s just the RX and TX part.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEjkteKFx7Y5zF6Qh15SHA_VUEH0Lq2W907Egu1Utlcnyn99Kg6MJh0cEa2c1OWWF5Dtqu4AEAzk7Ag86jaaS6J0m-rkbsoFRhLhHtLTq_lBAp11q0v_JtBEOhzY_s_v3qn1_8QOj4cZ6K3iuLuJUUtmwuDVKRsW0s8Gki5q1Hd8axD3W7s72W4=s3172"><img data-original-height="1409" data-original-width="3172" height="285" src="https://blogger.googleusercontent.com/img/a/AVvXsEjkteKFx7Y5zF6Qh15SHA_VUEH0Lq2W907Egu1Utlcnyn99Kg6MJh0cEa2c1OWWF5Dtqu4AEAzk7Ag86jaaS6J0m-rkbsoFRhLhHtLTq_lBAp11q0v_JtBEOhzY_s_v3qn1_8QOj4cZ6K3iuLuJUUtmwuDVKRsW0s8Gki5q1Hd8axD3W7s72W4=w640-h285" width="640"/></a></p><p>The TX part is the simplest. If the processor is transmitting a 1 then the 4069 hex inverter drives the base of the transistor low which means the transistor is off and the TX port floats. This is why in Pila&#39;s <a href="https://pila.fr/wordpress/?p=361">USB-to-Minitel connector</a> they pull the TX line to 5V using a resistor:</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEghPxd4NgLd74UJheLz9ZqvXDrNKmhxc8f5qTPeuCU3ELPPJkTklIeWJBhmyJKzYfvIFgSYmUvD693k0Fh-6_o41VqRSf8C9kAjk75QeYO3-2HYrm7oVi__DdL2oCDKY359RQdRkX8564qPKEdq9Lc_AbT1mR5-iA2pnwFLUmylWYbSUFXc2X4=s572"><img data-original-height="244" data-original-width="572" height="171" src="https://blogger.googleusercontent.com/img/a/AVvXsEghPxd4NgLd74UJheLz9ZqvXDrNKmhxc8f5qTPeuCU3ELPPJkTklIeWJBhmyJKzYfvIFgSYmUvD693k0Fh-6_o41VqRSf8C9kAjk75QeYO3-2HYrm7oVi__DdL2oCDKY359RQdRkX8564qPKEdq9Lc_AbT1mR5-iA2pnwFLUmylWYbSUFXc2X4=w400-h171" width="400"/></a></p><p>If the processor wants to send a 0 then the base of the transistor T03 is pulled to 5V and so the transistor conducts (as the base-emitter of the NPN transistor is forward biased). This means the TX line is pulled low (via the transistor) and current flows into the Minitel. Nothing special there.</p><p>RX is a whole other kettle of fish. Not a transistor in sight but three resistors and two diodes. The two hex inverters serve to make sure that whatever signal they are presented with they bring it back to clear logic levels. We&#39;ll ignore them.</p><div><p>I am using <a href="https://easyeda.com/">EasyEDA</a> to diagram and simulate.</p><p><b>Receiving 0</b></p></div><p>Let&#39;s first imagine the scenario where we are transmitting a 0 into the Minitel and pull the RX line low. This looks like:</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEhyjg1wZkG96fZAMdwkl37di007LbcHLwPImW5q4klm1qb4R66Z86qj9I0RzJ0l_8z0LI4rPNbEXjdo3K3bP8gu_p1UfLlWL9R7C34psk5jHAkd-CyCTKO36rcjF4Yvkh4VkVtCmwHbE0l7dR6QMAz1h3GQTDY2kecy6UFdbEt_-r0nopbFdkI=s1334"><img data-original-height="692" data-original-width="1334" height="332" src="https://blogger.googleusercontent.com/img/a/AVvXsEhyjg1wZkG96fZAMdwkl37di007LbcHLwPImW5q4klm1qb4R66Z86qj9I0RzJ0l_8z0LI4rPNbEXjdo3K3bP8gu_p1UfLlWL9R7C34psk5jHAkd-CyCTKO36rcjF4Yvkh4VkVtCmwHbE0l7dR6QMAz1h3GQTDY2kecy6UFdbEt_-r0nopbFdkI=w640-h332" width="640"/></a></p><p>V1 is the system power (5V), V2 is the voltage source for whatever is connected to the Minitel&#39;s serial port. XMM4 measures the voltage presented to the two inverters.</p><p>So, with S1 set to pull the RX input to ground the inverters get 1.165V which they will interpret is low. Great. But why 1.165V?</p><p>Let&#39;s go component by component. D4 is reverse biased and therefore doesn&#39;t conduct and does nothing. D3 is forward biased and so current flows through D3/R3 to the RX pin. So, when the Minitel receives data it may source current.</p><p>R1 and R2 form a <a href="https://en.wikipedia.org/wiki/Voltage_divider">voltage divider</a> which creates precisely 1.165V and also current can flow through them too.</p><p><b>Receiving 1</b></p><p>When receiving a 1 the RX line needs to be set between 2.5V and 15V according to the documentation. Let&#39;s analyze some different voltages presented on RX. </p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEhwD3j1SZ5r6CyuVVK4ekuslsLcu2nV-nQpEgFoI-5swxVCrJBqom49ih515jdjd5f1OvXvYdQzucaL9FICmG-fuEfr1CMESlqYo3Cjxw_3G02MdEENuLYCKqU9QhkH1SohxuwbPCqPMlNK9SNvpq0lNtDXW8_aURjxAOUoE6ih4yaU6s203FA=s1334" imageanchor="1"><img data-original-height="692" data-original-width="1334" height="332" src="https://blogger.googleusercontent.com/img/a/AVvXsEhwD3j1SZ5r6CyuVVK4ekuslsLcu2nV-nQpEgFoI-5swxVCrJBqom49ih515jdjd5f1OvXvYdQzucaL9FICmG-fuEfr1CMESlqYo3Cjxw_3G02MdEENuLYCKqU9QhkH1SohxuwbPCqPMlNK9SNvpq0lNtDXW8_aURjxAOUoE6ih4yaU6s203FA=w640-h332" width="640"/></a></p><p>We&#39;ll start with 2.5V. This is very similar to the 0 case above. D4 does nothing, current flows through D3/R3 out the RX pin and R1/R2 form a voltage divider this time giving a voltage of 3.082V. The inverters see that as high and all is well.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgAlcC6BHwTFJ3e-IltkICgAQrlYJ1JS58VEk1X8eRzeWR0SSeg-um6T2LFJVVPAG3Vb6Ry0JfFLBQdY2DP94u4LWstZz1ANM54GibqPwZxzuJ3x2iGbYgmdNjvfYX5NalcRNYxB1tHOxs5-nrCwjHFkWq9k8iT8n9QwDArrNOrFAewHXPMQTE=s1334" imageanchor="1"><img data-original-height="692" data-original-width="1334" height="332" src="https://blogger.googleusercontent.com/img/a/AVvXsEgAlcC6BHwTFJ3e-IltkICgAQrlYJ1JS58VEk1X8eRzeWR0SSeg-um6T2LFJVVPAG3Vb6Ry0JfFLBQdY2DP94u4LWstZz1ANM54GibqPwZxzuJ3x2iGbYgmdNjvfYX5NalcRNYxB1tHOxs5-nrCwjHFkWq9k8iT8n9QwDArrNOrFAewHXPMQTE=w640-h332" width="640"/></a></p><p>How about 15V? Things are slightly different. D3/R3 does nothing as the diode is reverse biased. D4 is now forward biased and conducts, clamping the voltage presented to 5V + the diode forward voltage (which is about 0.5V). If you check the datasheet of the 4069 inverter it says that its input voltage can be Vdd + 0.5V so that diode keeps voltages in range.</p><p>There&#39;s no equivalent diode clamping negative voltages, which is a little odd as the 4069 will only accept down to -0.5V. Perhaps it&#39;s unnecessary because negative voltages are illegal in France or something.</p><p>Finally, what happens if you just let the RX input float and don&#39;t connect it at all? This is important for Pila&#39;s design. It works fine because R4 pulls up the output to 5V.</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEisBVvw8KbB-ZnB3YbI3HBXqocEaiMiWmYACvzb0CQl9VhOPHpHF36uDXJb2WtP0u57Bu2HpcWoZ7forvMeEbqjppSAvmae8NvO5MoZJi5RuEk5wnufnALhWzVGSjKuC6-mGvFPEgNwk7iGvDSVMhcOrVjFWpL1ztRP-lhN6_w0WrBu4NykpRE=s1334" imageanchor="1"><img data-original-height="692" data-original-width="1334" height="333" src="https://blogger.googleusercontent.com/img/a/AVvXsEisBVvw8KbB-ZnB3YbI3HBXqocEaiMiWmYACvzb0CQl9VhOPHpHF36uDXJb2WtP0u57Bu2HpcWoZ7forvMeEbqjppSAvmae8NvO5MoZJi5RuEk5wnufnALhWzVGSjKuC6-mGvFPEgNwk7iGvDSVMhcOrVjFWpL1ztRP-lhN6_w0WrBu4NykpRE=w640-h333" width="640"/></a></p></div></div>
  </body>
</html>
