<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ipapi.is/geolocation.html">Original</a>
    <h1>How to build a IP geolocation database from scratch?</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
          

          <div>
            <p><i></i>
              <span>Published on <strong>July 01, 2023</strong></span>
            </p>

            <p><i></i>
              <span>Modified on <strong>September 09, 2023</strong></span>
            </p>

            

            
          </div>

          <h2 id="geolocation-download">Download Geolocation Database</h2>

          <div>
            <table>
              <thead>
                <tr>
                  <th><abbr title="File Name">Name</abbr></th>
                  <th><abbr title="Size in MB">Size in MB</abbr></th>
                  <th><abbr title="Number of Networks">Num Networks</abbr></th>
                  <th><abbr title="Last Updated">Last Updated</abbr></th>
                  <th><abbr title="Database Description">Description</abbr></th>
                  <th><abbr title="Download CSV Database">Download</abbr></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    IPv4 Geolocation Database
                  </td>
                  <td>
                    262M

                  </td>
                  <td>
                    2,599,907
                  </td>
                  <td>
                    September 14, 2023
                  </td>
                  <td>
                    <p>
                      The full geolocation database for all IPv4 addresses as CSV (<a href="http://ablwr.github.io/developers.html#geolocation-database">Documentation</a>)
                    </p>
                  </td>
                  <td>
                    <a href="http://ablwr.github.io/data/geolocationDatabaseIPv4.csv.zip">
                      <span>
                        <i></i>
                      </span>
                      <span>Download</span>
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    IPv6 Geolocation Database
                  </td>
                  <td>
                     50M

                  </td>
                  <td>
                    486,938
                  </td>
                  <td>
                    September 14, 2023
                  </td>
                  <td>
                    The full geolocation database for all IPv6 addresses as CSV (<a href="http://ablwr.github.io/developers.html#geolocation-database">Documentation</a>)
                  </td>
                  <td>
                    <a href="http://ablwr.github.io/data/geolocationDatabaseIPv6.csv.zip">
                      <span>
                        <i></i>
                      </span>
                      <span>Download</span>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <h2 id="geolocation-introduction">Introduction</h2>

          <p>
            Geolocation is the process of mapping IP addresses to a geographical location defined by latitude and
            longitude. There are many use-cases for geolocation intelligence that are demanded by online businesses and
            service
            providers:
          </p>

          <ul>
            <li><strong>Targeted Advertising</strong> - Allows advertisers to serve ads that are geographically relevant
              to users. By knowing the approximate location of an IP address, advertisers can deliver targeted
              advertisements based on the user&#39;s location, such as promoting local events, services, or products.</li>
            <li><strong>Fraud Detection and Prevention</strong> - By knowing the geolocation of an IP address, unusual
              login attempts or unusual financial transactions can be detected and blocked. For example, if a banking
              account is normally used by a IP address from country A and there is suddenly a login attempt from country
              B, the login attempt can be denied or the user can be asked for additional verification.</li>
            <li><strong>Content Localization</strong> - Websites and apps often want to deliver localized content to
              users. Based on the user&#39;s location, websites can provide region-specific information, language
              preferences, or display prices in the local currency.</li>
            <li><strong>Digital Rights Management and Compliance</strong> - Content providers use IP geolocation
              intelligence to
              enforce digital
              rights management (DRM) policies and regulations or restrictions. Those providers may restrict access to
              content based on the user&#39;s
              geographic
              location, ensuring compliance with licensing agreements and copyright restrictions.</li>
            <li><strong>Network Security</strong> - IP geolocation plays a role in network security by providing
              insights into the origin of potential threats. Security systems can use IP geolocation data to identify
              and block suspicious IP addresses or implement access controls based on geographic regions.</li>
            <li><strong>Analytics and Insights</strong> - IP geolocation data can be valuable
              for analyzing user
              behavior and trends. Businesses can gain insights into where their customers are located, which can inform
              marketing strategies, expansion plans, and product development.</li>
          </ul>

          <h3 id="geolocation-not-fully-accurate">IP Geolocation Accuracy</h3>

          <p><em>Why is IP geolocation sometimes not accurate in general?</em></p>

          <p> In some cases, allocated IPv4 and
            IPv6 networks are distributed geographically and thus one network can have multiple geographical
            locations. Furthermore, many networks are distributed geographically by design. Examples of such
            geographically disparate networks are mobile networks or
            satellite networks.</p>
          <p>For example, how exactly would you geolocate the IP ranges belonging to the satellite Internet from
            <a href="https://www.starlink.com/">Starklink from SpaceX</a>? Find out by yourself by inspecting
            Starlink&#39;s <a href="https://api.ipapi.is?q=AS14593">AS14593</a>.
          </p>

          <p>In other cases, IP networks are reassigned or reallocated by Regional Internet Registries or IP leasing
            companies
            (such as <a href="https://www.ipxo.com/lease-ips/">IPXO</a> or <a href="https://ipbroker.com/en/services/ip-leasing/">ipbroker.com</a>) and the
            geolocation
            completely
            changes as soon as a IP address is assigned a new owner.</p>

          <p>It turns out that the process of geolocating IP addresses is a complicated endeavour. However, the accuracy
            that
            can be obtained is too good to
            be ignored in any IP address API.</p>

          <h2 id="how-to-build-a-geolocation-database">How to build a IP Geolocation Database from
            Scratch?</h2>

          <p><span>
              <i></i>
            </span>
            The reminder of this page makes a deep dive into the technicalities of creating a geolocation database from
            scratch. If
            you are only
            interested in downloading the geolocation database, you can do so <a href="http://ablwr.github.io/geolocation.html">here</a>.
          </p>

          <p>
            Each IP address in the Internet is owned or administered by an organization. Regional Internet Registries
            (RIR&#39;s) such as <a href="https://www.arin.net/">ARIN</a> or <a href="https://www.apnic.net/">APNIC</a> store
            ownership information in their WHOIS databases.
          </p>

          <p>
            However, WHOIS records don&#39;t
            necessarily include geolocation information for allocated networks. Furthermore, organizations that
            own networks can use those networks in any geographical location they end up choosing. Even worse, those
            organizations can assign networks to any third-party organization or lease IP blocks to other
            entities. Therefore, it is inherently tricky to geolocate IP addresses and thus geolocation is often not
            accurate.
          </p>

          <p>Having said that, the task to find and collect geolocation information can be divided into three
            different
            sub-tasks:</p>

          <ol>
            <li><strong>Extract Geolocation Data from WHOIS Records Directly</strong> - WHOIS records often include
              direct
              geolocation information about IP addresses. WHOIS attributes such as <code>geoloc</code> and
              <code>geofeed</code> can be used to derive self-published geolocation knowledge about IP addresses.
            </li>
            <li><strong>Interpolate Geolocation Knowledge from WHOIS Records</strong> - Often it is
              possible to derive and interpolate geolocation information from WHOIS attributes indirectly. For example,
              organizations
              that are administratively responsible for a network have to provide their postal address in
              WHOIS
              records.
              Sometimes, this postal address is also the geographical location of the organization&#39;s networks.</li>
            <li><strong>Consider Open Source Geolocation Projects</strong> - Many entities invested considerable
              resources into the geolocation problem and they provide their geolocation information for free. <a href="https://ipmap.ripe.net/">RIPE IPmap</a>, <a href="https://github.com/massimocandela/geofeed-finder">geofeed-finder</a> and <a href="https://opengeofeed.org/">OpenGeoFeed</a> are good examples of such valuable
              open source projects.</li>
          </ol>

          <p>
            After compiling a raw geolocation database from the above sources, it may have incomplete or inconsistent
            records.
          </p>
          <p>
            The collected geolocation data may be incomplete since records with country and city information don&#39;t
            always
            include coordinates. Vice versa, sometimes raw records with coordinates don&#39;t have country and city
            information.
            If raw
            records only contain a
            country,
            the
            accuracy cannot be higher than on country level.
          </p>

          <p>
            Therefore, geolocation
            data needs to be enriched and transformed into a
            common format. This process is extremely important and is achieved by using open source geographical
            databases
            such as the ones from <a href="https://www.geonames.org/">geonames.org</a> or <a href="https://www.openstreetmap.org/">openstreetmap.org</a>.
          </p>

          <p>Put differently, the data enrichment task is to either:</p>

          <ol>
            <li>Find the latitude and longitude from a given city and country pair. Example: What are the
              coordinates for <code>US, San Francisco</code>?
            </li>
            <li>And on the other hand, if only the latitude and longitude is given, the task is to obtain the closest
              city for those coordinates. Example: What is the city and country
              for the coordinates <code>52.524526 13.410037</code>?</li>
          </ol>

          <p>The next sections describe all the major steps that need to be followed in order to build a geolocation
            database
            from scratch.</p>

          <h2 id="geolocation-data-from-whois">Extract Geolocation Data from WHOIS Records
            Directly</h2>

          <p><span>
              <i></i>
            </span>
            This section describes how the different WHOIS databases from the five major Regional Internet
            Registries
            (RIR&#39;s)
            provide direct geolocation support for IP networks in their WHOIS records.
          </p>

          <p>By analyzing and parsing WHOIS data from all five Regional Internet Registries, many IP
            addresses can be mapped to a geographical location. Since each RIR has their own WHOIS database format,
            each RIR
            needs to be treated distinctively. In the next sections, it will be discussed how geolocation
            information is provided in each of the five different WHOIS databases.</p>

          <figure>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/95/Regional_Internet_Registries_world_map.svg/2880px-Regional_Internet_Registries_world_map.svg.png" width="800px"/>
            <figcaption>
              Figure 1: The five different Regional Internet Registries (<a href="https://commons.wikimedia.org/wiki/File:Regional_Internet_Registries_world_map.svg">Source</a>)
            </figcaption>
          </figure>

          <h3 id="geolocation-ripe-ncc">Geolocation in RIPE NCC</h3>

          <p>The RIPE NCC database has two different attributes that provide geolocation information for
            <code>inetnum</code> and <code>inet6num</code> objects. The <code>inetnum</code> and <code>inet6num</code>
            objects assign an IP network to an organization. It is suggested to read the RIPE
            documentation about <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inet6num-object"><strong>inetnum
                and inet6num
                objects</strong></a>.
          </p>

          <p>
            As mentioned, there are two different attributes in <code>inetnum</code> and <code>inet6num</code>
            objects that allow to provide geolocation information to IP networks:
          </p>

          <ol>
            <li>The <code>geoloc</code> attribute</li>
            <li>The <code>geofeed</code> attribute</li>
          </ol>

          <h4>The <code>geoloc</code> attribute</h4>

          <p>The first attribute is the <a href="https://www.ripe.net/manage-ips-and-asns/db/tools/geolocation-in-the-ripe-database"><strong>geoloc
                attribute</strong></a>. The <code>geoloc</code> attribute simply contains latitude and longitude
            coordinates
            in string format (Example: <code>&#34;47.855374 12.132041&#34;</code>).
          </p>

          <p>
            The <code>geoloc</code> attribute is defined in the <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">RIPE
              Database
              Docs</a> as follows:
          </p>

          <blockquote>
            <strong>“geoloc:”</strong> - The geolocation coordinates for the resource in decimal degrees notation.
            Format is latitude
            followed by longitude, separated by a space. Latitude ranges from [-90,+90] and longitude from [-180,+180].
            All more specific objects to the inetnum object containing this attribute inherit this data.
          </blockquote>

          <p>
            For example, the <code>inetnum</code> object for the IP address <code>217.72.221.0</code> includes the
            <code>geoloc</code> attribute. The WHOIS
            record below can be obtained via any <code>whois</code> client with the terminal command
            <code>whois 217.72.221.0</code>:
          </p>

          <pre><code>inetnum:        217.72.221.0 - 217.72.221.255
netname:        KOMRO
descr:          komro GmbH
country:        DE
admin-c:        KIN65-RIPE
tech-c:         KIN65-RIPE
status:         ASSIGNED PA
mnt-by:         KOMRO-MNT
mnt-lower:      KOMRO-MNT
mnt-routes:     KOMRO-MNT
created:        2003-08-29T12:22:59Z
last-modified:  2017-07-31T05:45:34Z
source:         RIPE # Filtered
geoloc:         47.855374 12.132041
language:       DE</code></pre>

          <p>
            So what does the above WHOIS record reveal? The responsible organization of the network
            <code>217.72.221.0 - 217.72.221.255</code> is komro GmbH and the <code>geoloc</code> attribute claims that
            the network
            is located at the
            coordinates
            <code>47.855374 12.132041</code>. Those coordinates point to <a href="https://www.google.com/maps/place/47%C2%B051&#39;19.4%22N+12%C2%B007&#39;55.4%22E/@47.8835257,11.9134016,10.69z/data=!4m4!3m3!8m2!3d47.855374!4d12.132041?entry=ttu">Rosenheim,
              a city close to Munich in Germany</a>.
          </p>

          <p>
            What is the total coverage of the <code>geoloc</code> attribute for all <code>inetnum</code> and
            <code>inet6num</code> objects in the RIPE NCC database?
          </p>

          <p>
            At the time of writing in July 2023, there were 4,190,644
            <code>inetnum</code> and 819,381 <code>inet6num</code> objects in the RIPE NCC database. But only 114,389
            <code>inetnum</code> or <code>inet6num</code> objects contained the <code>geoloc</code> attribute.
          </p>

          <p>
            Therefore, the
            overall coverage of the <code>geoloc</code> attribute is <strong>only 2.3%</strong>.
            However, more and more organizations start using the <code>geoloc</code> attribute, therefore it is useful
            to start collecting it.
          </p>

          <h4>The <code>geofeed</code> attribute</h4>

          <p>
            Another method to provide geolocation information in the RIPE NCC database is the <a href="https://ripe82.ripe.net/presentations/84-RIPE82_geofeed.pdf"><strong>geofeed attribute</strong></a>.
          </p>

          <p>
            The <code>geofeed</code> attribute is defined in the <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">RIPE
              Database
              Docs</a> as follows:
          </p>

          <blockquote>
            <strong>&#34;geofeed:&#34;</strong> - Contains a URL referencing a CSV file containing geolocation data for the
            resource. The geofeed
            format is defined in <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC
              8805</a>.
          </blockquote>

          <p>
            The value of the geofeed attribute is a HTTPS url that points to a file that contains
            geolocation
            information. The format of such geofeed files is specified in <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC
              8805</a>. Currently, there are two different ways to provide such a geofeed url in WHOIS records:
          </p>

          <ul>
            <li>One way is to use a
              dedicated attribute <code>geofeed</code> with the geofeed url as value</li>
            <li>The other method is to use the <code>remarks</code> attribute to
              specify the geofeed property.</li>
          </ul>

          <p>
            An example of using the <code>remarks</code> attribute to specify a geofeed url
            would be:
          </p>

          <pre><code>inetnum:        178.237.189.0 - 178.237.191.255
netname:        OOOSET-NET
descr:          OOO SET
remarks:        INFRA-AW
remarks:        Geofeed https://github.com/is1581/geofeedset/blob/main/ip4set.csv
country:        RU</code></pre>

          <p>
            Using the <code>remarks</code> attribute requires to specify the geofeed url in the format
            <code>Geofeed {URL}</code> in order to indicate that the url points to a <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC
              8805</a> geofeed file.
          </p>

          <p>
            The next example illustrates how the <code>geofeed</code> attribute is used in the RIPE NCC database.
            The terminal command
            <code>whois 193.56.36.0</code> returns a WHOIS record that follows the <code>geofeed:</code> attribute
            format:
          </p>

          <pre><code>inetnum:        193.56.36.0 - 193.56.36.255
country:        FR
netname:        FR-AERO-ME
geofeed:        https://ip-gfd.airbus.com/geofeed.csv
descr:          Airbus SAS
descr:          110Bis Av. du G?n?ral Leclerc, 93500 Pantin, France
descr:          FR AI ICC as ISP
geoloc:         48.902741962025644 2.422918799104585
language:       FR
org:            ORG-EDG4-RIPE
country:        FR
mnt-domains:    EADS-MNT
admin-c:        CI1306-RIPE
tech-c:         LR1133-RIPE
status:         ASSIGNED PI
mnt-by:         RIPE-NCC-END-MNT
mnt-by:         EADS-MNT
created:        2002-04-12T15:19:59Z
last-modified:  2023-06-06T12:37:59Z
source:         RIPE</code></pre>

          <p>
            As the WHOIS record above reveals, the geofeed url for the network <code>193.56.36.0 - 193.56.36.255</code>
            is <a href="https://ip-gfd.airbus.com/geofeed.csv">https://ip-gfd.airbus.com/geofeed.csv</a>.
            How does such a <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC
              8805</a> geofeed CSV file look like?
          </p>

          <ul>
            <li>The first column is the IP Prefix. Often, Classless Inter-Domain Routing (CIDR) notation is used for the
              IP Prefix column, but it is not necessarily a requirement. Example:
              <code>Singapore</code>
            </li>
            <li>The second column is the country as Alpha2code. Example:
              <code>SG</code>
            </li>
            <li>The third column is the ISO region code
              conforming to ISO 3166-2. Example:
              <code>SG-01</code>
            </li>
            <li>The fourth column is a city in free format. Example:
              <code>Singapore</code>
            </li>
            <li>The fifth column is a postal code in free format (deprecated). Example:
              <code>139964</code>
            </li>
          </ul>

          <pre><code>185.187.244.0/24,FR,FR-IDF,Pantin,93500
185.187.245.0/24,DE,DE-HE,Frankfurt,65933
185.187.246.0/24,SG,SG-01,Singapore,139964
185.187.247.0/24,US,US-WV,Ashburn,20147
193.56.32.0/24,FR,FR-OCC,Toulouse,31400
193.56.33.0/24,FR,FR-IDF,Le Plessis-Robinson,92350
193.56.35.0/24,IN,IN-KA,Bengaluru,560001
193.56.36.0/24,FR,FR-IDF,Pantin,93500
193.56.37.0/24,FR,FR-IDF,Les Mureaux,78440
193.56.38.0/24,FR,FR-OCC,Toulouse,31060
193.56.39.0/24,FR,FR-IDF,Pantin,93500
193.56.40.0/24,AU,AU-NSW,Sydney,2000
193.56.43.0/24,FR,FR-PAC,Marignane,13700
193.56.45.0/24,DE,DE-HE,Frankfurt,65933</code></pre>

          <p>
            What is the total coverage of the <code>geofeed</code> attribute for all <code>inetnum</code> and
            <code>inet6num</code> objects in the RIPE NCC database?
          </p>

          <p>
            At the time of writing in July 2023, there were 6643 occurrences of geofeed urls in <code>remarks</code>
            attributes and 2035 WHOIS records
            had the
            <code>geofeed</code> attribute.
            Therefore, the
            overall coverage of geofeed urls is <strong>only 0.17%</strong>. However, geofeed files usually include more
            than one network, therefore, there are more networks with geolocation information than there are geofeed
            urls. Hence, the coverage number of <strong>0.17%</strong> is misleading here.
          </p>

          <h3 id="geolocation-arin">Geolocation in ARIN</h3>

          <p>
            A not so recent article from 2018 discusses <a href="https://www.arin.net/blog/2018/06/11/ip-geolocation-the-good-the-bad-the-frustrating/">Geolocation
              in ARIN</a>. The conclusion of this article is that geolocation is inherently difficult. It seems that
            ARIN does not provide much assistance to external entities that are looking to geolocate IP addresses.
          </p>

          <p>
            Geolocation in the ARIN database for <code>NetRange</code> objects is provided via geofeed urls in
            <code>Comment</code> attributes. There <a href="https://www.arin.net/participate/community/acsp/suggestions/2022/2022-15/">was a request</a> to add
            a dedicated geofeed property, but it was denied
            since adding geofeeds over <code>Comment</code> or <code>Remark</code> attributes is
            deemed sufficient.
            For example, when looking up the IP address
            <code>whois 96.43.200.0</code>, the following WHOIS record is obtained from ARIN:
          </p>

          <pre><code>NetRange:       96.43.192.0 - 96.43.223.255
CIDR:           96.43.192.0/19
NetName:        OFL-62
NetHandle:      NET-96-43-192-0-1
Parent:         NET96 (NET-96-0-0-0-0)
NetType:        Direct Allocation
OriginAS:       
Organization:   Omni Fiber (OFL-62)
RegDate:        2022-03-30
Updated:        2022-12-07
Comment:        Geofeed https://omnifiber.com/geofeed.csv
Ref:            https://rdap.arin.net/registry/ip/96.43.192.0</code></pre>

          <p>
            Geofeed urls follow <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC 8805</a> and the format of those
            <a href="https://datatracker.ietf.org/doc/rfc8805/">RFC 8805</a> files was already discussed in the section
            about RIPE NCC.
          </p>

          <p>
            The ARIN database currently doesn&#39;t make use of the <code>geoloc</code> attribute as it is the case in the
            RIPE NCC database.
          </p>

          <h3 id="geolocation-lacnic">Geolocation in LACNIC</h3>

          <p>
            LACNIC is much more supportive when it comes to geolocation compared to ARIN. LACNIC hosts a
            <a href="https://datatracker.ietf.org/doc/rfc8805/">Geofeed Service</a> that provides members the
            possibility to provide geolocation information for IP addresses they own. A good part of LACNIC members
            provided geolocation information which is publicly available at <a href="https://milacnic.lacnic.net/lacnic/geofeeds">milacnic.lacnic.net/lacnic/geofeeds</a>.
          </p>

          <p>
            Furthermore, the LACNIC WHOIS database already provides geolocation information (accurate to city level) by
            default. The LACNIC database can be downloaded from their FTP server: <a href="https://ftp.lacnic.net/lacnic/dbase/">ftp.lacnic.net/lacnic/dbase/</a>
          </p>

          <p>
            As can be seen in the LACNIC database excerpt below, LANIC provides city and country information for all
            <code>inetnum</code> and <code>inet6num</code> objects:
          </p>

          <pre><code>inetnum: 190.5.128/19
status: allocated
city: Antiguo Cuscatlan
country: SV
created: 2006-06-16
changed: 2020-08-31
source: LACNIC

inetnum: 190.5.160/19
status: allocated
city: Buenos Aires
country: AR
created: 2014-05-22
changed: 2014-05-22
source: LACNIC

inetnum: 190.5.192/20
status: allocated
city: POPAYAN
country: CO
created: 2006-11-30
changed: 2006-11-30
source: LACNIC</code></pre>


          <h3 id="geolocation-afrinic">Geolocation in AFRINIC</h3>

          <p>
            According to the <a href="https://afrinic.net/support/whois">AFRINIC support page</a>, AFRNIC does not
            provide geolocation services and
            does not have any formal or
            operational relationship with any geolocation provider.
          </p>

          <p>Nevertheless, AFRINIC also supports the usage of geofeed urls in
            <code>remarks</code> attributes similar as in the RIPE NCC database.
            For example, when looking up the IP address with the command
            <code>whois 102.222.84.0</code>, the following WHOIS record is obtained:
          </p>

          <pre><code>inetnum:        102.222.84.0 - 102.222.84.255
netname:        TZ-DAR-CABLE
descr:          Wananchi Cable Tanzania
country:        TZ
admin-c:        WL8-AFRINIC
tech-c:         WL8-AFRINIC
status:         ASSIGNED PA
remarks:        Geofeed https://geofeed.zuku.co.tz/geofeed.txt
mnt-by:         WCL4-MNT
source:         AFRINIC # Filtered
parent:         102.222.84.0 - 102.222.87.255</code></pre>


          <p>
            In conclusion, AFRINIC provides geolocation information with the same attributes as with RIPE.
          </p>

          <h3 id="geolocation-apnic">Geolocation in APNIC</h3>

          <p>
            APNIC provides roughly the same support for geolocation as RIPE NCC. According to a <a href="https://afrinic.net/support/whois">APNIC article about geolocation</a>, they support the
            <code>geoloc</code> attribute and the geofeed urls via the <code>remarks</code> attribute.
          </p>

          <p>
            Furthermore, APNIC seems to be quite open to improve the geolocation support as one of their publications
            suggests: <a href="https://meetings.apnic.net/30/pdf/Lepinski-APNIC-30-Geolocation-Registry.pdf">&#34;Do we
              need a registry for IP
              geolocation information?&#34;</a>.
          </p>

          <p>For example, when looking up the IP address with the command
            <code>whois 203.152.49.0</code>, the following WHOIS record is obtained from APNIC:
          </p>

          <pre><code>inetnum:        203.152.49.0 - 203.152.49.255
netname:        PACIFICINTERNT-TH
descr:          Pacific Internet (Thailand) Ltd.
country:        TH
admin-c:        AP3-AP
tech-c:         NPT3-AP
abuse-c:        AP993-AP
status:         ALLOCATED NON-PORTABLE
remarks:        Geofeed https://intra.pacific.net.th/geofeed.csv
mnt-by:         MAINT-TH-PITH
mnt-irt:        IRT-PI-TH
last-modified:  2021-01-19T07:37:32Z
source:         APNIC</code></pre>


          <p>
            In conclusion, APNIC provides geolocation information with the same attributes as with RIPE.
          </p>

          <h2 id="interpolating-geolocation-data-from-whois">Interpolate Geolocation Knowledge from
            WHOIS Records
          </h2>

          <p><span>
              <i></i>
            </span>
            This section describes how WHOIS attributes that were never directly intended for geolocation purposes can
            be
            used to derive geolocation intelligence. This process is inherently error prone, but the obtained results
            are too accurate to be ignored.
          </p>

          <p>
            WHOIS data from the five Regional Internet Registries is the most accurate data source for IP addresses. The
            main purpose of WHOIS is to provide registrant information for organizations that own Internet
            numbers such as IP addresses or AS numbers. As such, WHOIS databases also often include the postal
            addresses
            and
            countries of the organization&#39;s headquarter or administrative location.
          </p>

          <p>
            Often, the postal address of an organization is also the geographical location where their IP addresses are
            used. This is of course not always the case. The administrative postal address of large
            organizations often doesn&#39;t correspond with the location of all the organization&#39;s IP addresses.
          </p>

          <p>
            In the next sections, for each of the five RIR&#39;s, an IP address example where the WHOIS data can be used
            to derive
            geolocation information will be discussed (positive example).
          </p>

          <p>
            Additionally, a counterexample where WHOIS
            meta data is
            misleading
            will be provided (negative example). If applicable, a conclusion will be drawn from the examples.
          </p>

          <h3 id="derive-geolocation-ripe-ncc">Geolocation Interpolation in RIPE NCC</h3>

          <p>
            <strong>Positive Example - <code>185.212.53.138</code></strong>
          </p>

          <p>
            When looking up the IP address <code>185.212.53.138</code> with a WHOIS client, the following
            WHOIS record is obtained:
          </p>

          <pre><code>inetnum:        185.212.53.136 - 185.212.53.143
netname:        PUMPENTECHNIK-ERKRATH-NET
descr:          Pumpentechnik Erkrath GmbH + Co. KG
country:        DE
admin-c:        CK5074-RIPE
tech-c:         CK5074-RIPE
status:         ASSIGNED PA
mnt-by:         KOMMITT-MNT
created:        2018-09-25T12:33:17Z
last-modified:  2018-09-25T12:33:17Z
source:         RIPE

person:         Christine Kessel
address:        Max-Planck-Str. 28
address:        40699 Erkrath
phone:          +49 211 925480
nic-hdl:        CK5074-RIPE
mnt-by:         KOMMITT-MNT
created:        2018-09-25T12:32:01Z
last-modified:  2018-09-25T12:32:01Z
source:         RIPE # Filtered</code></pre>


          <p>According to many different IP geolocation services, the IP address <code>185.212.53.138</code> is located
            in the city of Erkrath in Germany with coordinates <code>51.22235, 6.9083</code>.</p>

          <p>
            When looking at the above WHOIS record, it becomes clear that there are many different attributes that could
            be used to extract the city name &#34;Erkrath&#34; or the country &#34;Germany&#34;:
          </p>

          <ul>
            <li>The country can be extracted from the <code>country</code> attribute: <code>DE</code></li>
            <li>The city can be extracted from the <code>netname</code> attribute:
              <code>PUMPENTECHNIK-ERKRATH-NET</code>
            </li>
            <li>The city can also be extracted from the <code>descr</code> attribute:
              <code>Pumpentechnik Erkrath GmbH + Co. KG</code>
            </li>
            <li>And the <code>address</code> attribute also reveals the city name:
              <code>Max-Planck-Str. 28, 40699 Erkrath</code>
            </li>
          </ul>

          <p>
            Certainly, it is very hard to extract the city name from the <code>netname</code> and <code>descr</code>
            attributes, since those names have a free format. However, the <code>address</code> attribute can be easily
            used to parse out the location, since postal adresses have a much stricter format.
          </p>


          <p>
            <strong>Positive Example - <code>139.98.0.0</code></strong>
          </p>

          <p>
            Another positive example is provided to illustrate that the <code>descr</code> attribute can often be used
            for geolocation purposes.
            When looking up the IP address <code>139.98.0.0</code> with <code>whois</code>, the following
            WHOIS record is obtained:
          </p>

          <pre><code>inetnum:        139.98.0.0 - 139.98.255.255
netname:        FYLKOMOEST
descr:          Oestfold Fylkeskommunes Sentraladministrasjon
descr:          Bos 220, N-1701
descr:          Sarpsborg
country:        NO
admin-c:        JT1367-RIPE
tech-c:         JT1367-RIPE
status:         LEGACY
mnt-by:         AS41572-MNT
mnt-by:         AS2116-MNT
created:        2004-02-02T16:19:07Z
last-modified:  2022-09-12T12:32:28Z
source:         RIPE</code></pre>

          <p>According to most geolocation services, the IP address <code>139.98.0.0</code> is located in the city of
            Sarpsborg in Norway. This corresponds with what the <code>descr</code> attribute of the above WHOIS record
            states. Even better, the WHOIS record above provides a full address which allows for very accurate
            geolocation.
            This is an example that underlines the usablilty of the <code>descr</code> attribute for accurate
            geolocation.
          </p>

          <p>
            <strong>Negative Example - <code>109.134.237.140</code></strong>
          </p>

          <p>
            When looking up the IP address <code>109.134.237.140</code> with a WHOIS client, the following
            WHOIS record is obtained:
          </p>

          <pre><code>inetnum:        109.134.0.0 - 109.134.255.255
netname:        BE-BELGACOM-ADSL1
descr:          ADSL-GO-PLUS
descr:          Belgacom ISP SA/NV
country:        BE
admin-c:        SN2068-RIPE
tech-c:         SN2068-RIPE
status:         ASSIGNED PA
mnt-by:         SKYNETBE-MNT
mnt-by:         SKYNETBE-ROBOT-MNT
created:        2011-11-25T10:16:24Z
last-modified:  2011-11-25T10:29:00Z
source:         RIPE

role:           Proximus NOC administrators
address:        Proximus SA de droit public
address:        TEC/NEO/IPR/TDN/DTO/DSL Internet Networks
address:        Boulevard du Roi Albert II, 27
address:        B-1030 Bruxelles
address:        Belgium
phone:          +32 2 202-4111
fax-no:         +32 2 203-6593
abuse-mailbox:  abuse@proximus.com
admin-c:        BIEC1-RIPE
tech-c:         BIEC1-RIPE
nic-hdl:        SN2068-RIPE
mnt-by:         SKYNETBE-MNT
created:        1970-01-01T00:00:00Z
last-modified:  2020-03-04T06:19:15Z
source:         RIPE # Filtered</code></pre>

          <p>
            The <code>address</code> attribute from above shows that the administrative location of the organization
            &#34;Proximus&#34; is located at <code>Boulevard du Roi Albert II, 27, B-1030 Bruxelles, Belgium</code>.
          </p>

          <p>
            However, most geolocation providers place the IP address <code>109.134.237.140</code> in other Belgian
            cities such as Hasselt, Grimbergen or Wuustwezel. Therefore, if we would use the <code>address</code>
            attribute from this WHOIS record, we would obtain a sligthly wrong geolocation. However, using Bruxelles as
            geolocation is still better than picking the wrong country or even a wrong continent. This example shows why
            geolocation providers often have
            approximative accuracy.
          </p>

          <p>
            <strong>Conclusion</strong>
          </p>

          <p>
            Having seen the three examples from above, what attributes can be used from the RIPE NCC database to
            interpolate geolocation information from <code>inetnum</code> and <code>inet6num</code> objects?
          </p>

          <p>
            The <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">inetnum</a>
            and <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inet6num-object">inet6num</a>
            have at least three attributes that can potentially be used to derive geolocation information:
          </p>

          <ol>
            <li>The <code>country</code> attribute (Only yields country level accuracy)</li>
            <li>The <code>descr</code> attribute</li>
            <li>The <code>netname</code> attribute (Unreliable and hard to parse)</li>
            <li>The <code>address</code> attribute (Strictly speaking an attribute of the role object and not
              <code>inetnum</code> and <code>inet6num</code>)
            </li>
          </ol>

          <p>
            The <code>country</code> attribute is defined in the <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">RIPE
              Database
              Docs</a> as follows:
          </p>

          <blockquote>
            <strong>“country:”</strong> - This identifies a country using the ISO 3166-2 letter country codes. It has
            never been specified what this country represents. It could be the location of the head office of a
            multi-national company or where the server centre is based or the home of the End User. Therefore, it cannot
            be used in any reliable way to map IP addresses to countries.
          </blockquote>

          <p>
            The explanation above speaks for itself. It is somewhat safe to use the <code>country</code>
            attribute for geolocation, since the accuracy of country level information is rather coarse and thus the
            room of mistakes is reduced. Put differently: Since most multinational organizations have at least one
            postal address for each country, those organizations often use the postal address of the same country where
            the IP networks are actually used.
          </p>

          <p>
            The <code>descr</code> attribute is defined in the <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">RIPE
              Database
              Docs</a> as follows:
          </p>

          <blockquote>
            <strong>“descr:”</strong> - A short description related to the object.
          </blockquote>

          <p>
            Therefore the contents of the <code>descr</code> attribute could be anything, since RIPE NCC does not
            strictly define what this value represents. It turns out that the <code>descr</code> attribute is often used
            by organizations to provide location and address information for the network. In conclusion, the
            <code>descr</code> attribute is very useful in order to derive geolocation information from it.
          </p>

          <p>
            Additional information can be provided for <code>inetnum</code> and <code>inet6num</code> objects
            with the <code>role</code> object. Therefore, it is also interesting to discuss the role object.
          </p>

          <p>
            The <code>address</code> attribute of role objects is defined in the <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/03-Descriptions-of-Secondary-Objects.html#description-of-the-role-object">RIPE
              Database
              Docs</a> as follows:
          </p>

          <blockquote>
            <strong>“address:”</strong> - This is a full postal address for the role represented by this object.
          </blockquote>

          <p>
            Even though <code>address</code> attributes can have high geolocation accuracy, the <code>address</code>
            attribute specifies the postal address of a role object. The <code>inetnum</code> and <code>inet6num</code>
            objects can have an address assigned via a role object, since the postal address of a company is not
            necessarily the location where the IP addresses are used.
          </p>

          <p>
            However, as the
            negative example from above proofs, it is a mistake to assume that IP addresses have the same geolocation as
            the
            postal address of a <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/03-Descriptions-of-Secondary-Objects.html#description-of-the-role-object">role
              object</a>.
          </p>

          <h3 id="derive-geolocation-arin">Geolocation Interpolation in ARIN</h3>

          <p>
            <strong>Positive Example - <code>192.42.152.0</code></strong>
          </p>

          <p>
            When looking up the IP address <code>192.42.152.0</code> with a WHOIS client, the following
            WHOIS record is obtained:
          </p>

          <pre><code>NetRange:       192.42.152.0 - 192.42.152.255
CIDR:           192.42.152.0/24
NetName:        UMN-CC-NET
NetHandle:      NET-192-42-152-0-1
Parent:         NET192 (NET-192-0-0-0-0)
NetType:        Direct Allocation
OriginAS:       AS57, AS217
Organization:   University of Minnesota (UNIVER-233-Z)
RegDate:        1988-10-12
Updated:        2021-12-14
Ref:            https://rdap.arin.net/registry/ip/192.42.152.0

OrgName:        University of Minnesota
OrgId:          UNIVER-233-Z
Address:        Office of Information Technology
Address:        2218 Univ Ave SE
City:           Minneapolis
StateProv:      MN
PostalCode:     55414
Country:        US
RegDate:        2009-10-13
Updated:        2019-09-30
Comment:        http://www.umn.edu/
Ref:            https://rdap.arin.net/registry/entity/UNIVER-233-Z</code></pre>

          <p>
            Most IP geolocation providers locate the IP address <code>192.42.152.0</code> in the city of Minneapolis in
            the US. This corresponds with the <code>City</code>, <code>StateProv</code>, <code>PostalCode</code> and
            <code>Country</code>
            attributes of the above WHOIS
            record.
            Thus, the above example shows that those attributes can be used to geolocate the network
            <code>192.42.152.0 - 192.42.152.255</code>.
          </p>

          <p>
            <strong>Negative Example - <code>136.50.220.162</code></strong>
          </p>

          <p>
            When looking up the IP address <code>136.50.220.162</code> with a WHOIS client, the following
            WHOIS record is obtained:
          </p>

          <pre><code>NetRange:       136.32.0.0 - 136.63.255.255
CIDR:           136.32.0.0/11
NetName:        GOOGLE-FIBER
NetHandle:      NET-136-32-0-0-1
Parent:         NET136 (NET-136-0-0-0-0)
NetType:        Direct Allocation
OriginAS:       
Organization:   Google Fiber Inc. (GF)
RegDate:        2015-10-06
Updated:        2015-10-06
Ref:            https://rdap.arin.net/registry/ip/136.32.0.0

OrgName:        Google Fiber Inc.
OrgId:          GF
Address:        1600 Amphitheatre Parkway
City:           Mountain View
StateProv:      CA
PostalCode:     94043
Country:        US
RegDate:        2010-10-08
Updated:        2019-11-01
Ref:            https://rdap.arin.net/registry/entity/GF</code></pre>


          <p>
            Most IP geolocation providers locate the IP address <code>136.32.0.0</code> in San Antonio in Texas.
            However, if we would have used the above WHOIS record for geolocation, we would have taken the head office
            from Google in Mountain View, California for geolocation. This would obviously have been a mistake.
          </p>

          <p>
            <strong>Conclusion</strong>
          </p>

          <p>
            It seems that using the following ARIN WHOIS attributes is somewhat reliable if the organization is
            small or centered in only one location:
          </p>

          <ol>
            <li><code>Address</code> attribute</li>
            <li><code>City</code> attribute</li>
            <li><code>StateProv</code> attribute</li>
            <li><code>PostalCode</code> attribute</li>
            <li><code>Country</code> attribute</li>
          </ol>

          <p>
            Examples for small organizations are universities, hospitals and governmental ministries. Those
            organizations
            use the IP
            addresses of <code>NetRange</code> objects the at the same
            location as their administrative postal address. This is not the case with larger businesses or nation wide
            organizations that own many <code>NetRange</code> objects.
          </p>

          <h3 id="derive-geolocation-lacnic">Geolocation Interpolation in LACNIC</h3>

          <p>
            It is not necessary to derive geolocation information from LACNIC WHOIS records, since LACNIC provides full
            geolocation support in their WHOIS database as <a href="#geolocation-lacnic">discussed
              earlier on this page</a>.
          </p>

          <h3 id="derive-geolocation-afrinic">Geolocation Interpolation in AFRINIC</h3>

          <p>
            AFRINIC has the same WHOIS database format as RIPE NCC, so the same principles apply as for <a href="#derive-geolocation-ripe-ncc">RIPE NCC</a>.
          </p>

          <p>In short, it is possible to use the <code>country</code> or <code>descr</code> attribute from <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inetnum-object">inetnum</a>
            or <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/02-Descriptions-of-Primary-Objects.html#description-of-the-inet6num-object">inet6num</a>
            objects from the AFRINIC database to interpolate geolocation information.
          </p>

          <p>
            Furthermore, the <code>address</code> attribute from <a href="https://apps.db.ripe.net/docs/04.RPSL-Object-Types/03-Descriptions-of-Secondary-Objects.html#description-of-the-role-object">role
              objects</a> can also be used to derive geolocation
            information. The <code>address</code> attribute specifies the postal address of a role, which is often used
            to specify ownership of a network.
          </p>

          <h3 id="derive-geolocation-apnic">Geolocation Interpolation in APNIC</h3>

          <p>
            APNIC uses the same WHOIS database format as RIPE NCC, so the same principles apply as for <a href="#derive-geolocation-ripe-ncc">RIPE NCC</a>.
          </p>

          <h2 id="open-source-geolocation-projects">Open Source Geolocation Projects</h2>

          <p><span>
              <i></i>
            </span>
            Several open source geolocation projects are explored in this section. Open source projects are often the
            basis for many commercial geolocation projects. Especially the contributions from RIPE NCC, APNIC and ARIN
            are reviewed,
            since those Regional Internet Registries provide the best support for geolocation.
          </p>

          <h3 id="ripe-ip-map">RIPE IPmap</h3>
          <p>
            <a href="https://ipmap.ripe.net/">RIPE IPmap</a> is (<em>was</em> - it seems that the it is not longer
            maintained) an API that provides
            geolocation data for core Internet
            infrastructure. RIPE IPmap uses several different engines to infer geolocation for IP addresses. RIPE IPmap
            is a system for active (live) IP geolocation, which means that each IP has to be geolocated actively, which
            can be a time consuming process.
          </p>

          <p>
            The most interesting engine from RIPE IPmap is called <code>latency</code> and <code>single-radius</code>
            engine. The <code>latency</code> engine uses measurements from <a href="https://atlas.ripe.net/">RIPE
              Atlas</a> to provide a latency radius for the geolocation of an IP address. Put differently, by using
            hundreds of geographically distributed latency measurement servers from <a href="https://atlas.ripe.net/">RIPE
              Atlas</a>, it is possible to estimate the location of an IP address by triangulating with minimum
            RTT
            measurements. The <a href="https://ipmap.ripe.net/docs/01.manual/#latency-and-single-radius">RIPE IPmap
              documentation</a>
            provides a full description for the latency engine.
          </p>

          <p>It is quite straightforward to understand how the <code>latency</code> engine works in practice. If a
            certain IP address needs to be geolocated, latency measurements can be either obtained by actively pinging
            the IP address or by recording the RTT of incoming connections (passive). The minimum latency sets an upper
            threshold for the maximal
            possible distance due to the definition of the speed of light in fiber optic medium.
          </p>

          <p>
            <code>reverse-dns</code> is another RIPE IPmap engine that uses the hostnames from PTR records in order to
            geolocate IP
            addresses. The <a href="https://ipmap.ripe.net/docs/01.manual/#reverse-dns">RIPE IPmap
              documentation</a> explains how the <code>reverse-dns</code> engine works. Essentially, the idea is
            to extract city level geolocation from PTR records of hostnames. For example, the following traceroute
            output reveals
            how hostnames from routers indicate their geogrpahical location:
          </p>

          <pre><code>ae59-300.edge9.frankfurt1.level3.net (62.67.4.229)  31.713 ms  29.638 ms
9  ae59-300.edge9.frankfurt1.level3.net (62.67.4.229)  31.189 ms * *
10  * att-level3-washington12.level3.net (4.68.62.30)  124.232 ms  120.208 ms
11  att-level3-washington12.level3.net (4.68.62.30)  119.936 ms  122.603 ms *</code></pre>

          <p>In the traceroute dump from above, it can be seen how the IP <a href="https://api.ipapi.is/?q=62.67.4.229">62.67.4.229</a> is located in
            Frankfurt (Germany) and the IP <a href="https://api.ipapi.is/?q=4.68.62.30">4.68.62.30</a> in Washington
            (USA) according to their respective
            hostnames.</p>

          <p>
            The RIPE IPmap database can be downloaded from here: <a href="https://ftp.ripe.net/ripe/ipmap/">https://ftp.ripe.net/ripe/ipmap/</a>
          </p>

          <p>
            The database has the
            following CSV format: <em>ip, geolocation_id, city_name, state_name, country_name, country_code_alpha2,
              country_code_alpha3, latitude, longitude, score</em>
          </p>

          <p>
            Unfortunately, while the ideas of RIPE IPmap are certainly still good, the project&#39;s accuracy and coverage
            degraded considerably according to the <a href="https://massimocandela.com/">former maintainers website</a>.
            It seems like there are no new contributions to RIPE IPmap since 2019.
          </p>

          <h3 id="ripe-ip-map">geofeed-finder</h3>
          <p>
            <a href="https://github.com/massimocandela/geofeed-finder">geofeed-finder</a> is a open source project by
            Massimo Candela who was formerly employed by RIPE NCC. The purpose of the project is as follows:
          </p>

          <blockquote>
            This utility discovers and retrieves geofeed files from whois data. Additionally, it validates the ownership
            of the prefixes, manages the cache, and validates the ISO codes. See RFC9092.
          </blockquote>

          <p>
            This tool can be used to extract geofeeds from WHOIS data according to <a href="https://datatracker.ietf.org/doc/html/rfc9092">RFC 9092</a>. As discussed on this page, the coverage
            of geofeed information in all networks is very low, therefore this tool has limited real life usablilty, but
            it is promising since geofeed coverage will likely increase in the coming years.
          </p>

          <h3 id="ripe-ip-map">LACNIC Geofeeds Service</h3>
          <p>
            The <a href="https://www.lacnic.net/4874/2/lacnic/lacnic-geofeeds-service">LACNIC Geofeeds Service</a>
            provides geolocation information for a good part of LACNIC&#39;s members. The data is publicly available for
            download at <a href="https://milacnic.lacnic.net/lacnic/geofeeds">milacnic.lacnic.net/lacnic/geofeeds</a>.
            This
            is a very important project, since it allows to access geolocation information where it should be collected:
            At the RIR level.
          </p>

          <h3 id="open-geofeed">OpenGeoFeed</h3>
          <p>
            <a href="https://opengeofeed.org/">OpenGeoFeed</a> is a open source project that compiles self-published
            geofeeds according to <a href="https://datatracker.ietf.org/doc/html/rfc9092">RFC 9092</a>. <a href="https://opengeofeed.org/">OpenGeoFeed</a> provides
            a single geofeed file that contains all known public geofeed files
            here: <a href="https://opengeofeed.org/feed/public.csv">opengeofeed.org/feed/public.csv</a>
          </p>

          <p>
            While <a href="https://opengeofeed.org/">OpenGeoFeed</a> is a promising project, it seems that the geofeed
            coverage is not up to date and it is unlikely that the data sources are frequently updated.
          </p>

          <h2 id="geolocation-data-enrichment">Geolocation Data Enrichment</h2>
          <p><span>
              <i></i>
            </span>
            Often the raw geolocation information obtained from WHOIS data or geofeeds don&#39;t include all the meta
            data
            necessary to populate all geolocation fields that the database provides. In this section, it is
            explaind how raw
            geolocation data is enriched by considering third party sources.
          </p>
          <p>
            This data enrichment process is
            achieved by using open source geographical databases such as:
          </p>

          <ul>
            <li><a href="https://www.geonames.org/">geonames.org</a></li>
            <li><a href="https://www.openstreetmap.org/">openstreetmap.org</a></li>
            <li><a href="https://www.naturalearthdata.com/">naturalearthdata.com</a></li>
          </ul>

          <p>
            The data enrichment process can be divided into two cases:
          </p>

          <ol>
            <li>For those raw records where only city and country geolocation information is given, there is a need to
              find the latitude and
              longitude (coordinates) from a given city and country. <strong>Example:</strong> What are the geographical
              coordinates for <code>US, San Francisco</code>?</li>
            <li>On the other side, if only the latitude and longitude is available in the raw data, the goal is to
              obtain the closest city
              and country
              for those coordinates. <strong>Example:</strong> What is the closest city and country
              for the coordinates <code>52.524526 13.410037</code> (if there is a city at all close to those
              coordinates) ?</li>
          </ol>

          <p>
            For example, <a href="https://ipapi.is/">ipapi.is</a> uses the following databases to enrich geolocation
            information:
          </p>

          <ol>
            <li><a href="https://download.geonames.org/export/zip/">GeoNames Postal Code
                Files</a> - All known postal codes of all countries of the world (excluding some countries for legal
              reasons)</li>
            <li><a href="https://download.geonames.org/export/dump/">cities500.zip</a> - all cities with a population &gt;
              500</li>
            <li><a href="https://download.geonames.org/export/dump/countryInfo.txt">countryInfo.txt</a> - country
              information such as <em>Country Capital</em>, <em>Population</em>, <em>Continent</em> and other country
              meta data</li>
          </ol>
        </div>
      </div></div>
  </body>
</html>
