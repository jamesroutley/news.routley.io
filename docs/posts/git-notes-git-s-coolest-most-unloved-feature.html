<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tylercipriani.com/blog/2022/11/19/git-notes-gits-coolest-most-unloved-feature/">Original</a>
    <h1>Git Notes: Git&#39;s Coolest, Most Unloved¬≠ Feature</h1>
    
    <div id="readability-page-1" class="page"><article class="page">







<div id="pagebody">

<section id="content" role="main">
<blockquote>
<p>the short of it is: they‚Äôre cool for appending notes from automated
systems (like ticket or build systems) but not really for having
interactive conversations with other developers (at least not yet)</p>
<p>‚Äì Scott Chacon, <a href="https://github.blog/2010-08-25-git-notes-display/">GitHub.blog</a>,
Aug.¬†2010</p>
</blockquote>
<p>Git notes are almost a secret.</p>
<p>They‚Äôre buried by their own distressing usability.</p>
<p>But git notes are continually rediscovered by engineers trying to
stash metadata inside git.</p>
<figure>
<img src="https://photos.tylercipriani.com/2022-10-30_simonw-git-notes.png" alt="Sun, 30 Oct 2022 11:05 @simonw"/>
<figcaption aria-hidden="true">Sun, 30 Oct 2022 11:05 <a href="https://twitter.com/simonw/status/1586766260842266625"><span data-cites="simonw">@simonw</span></a></figcaption>
</figure>
<p><strong>Git notes are powerful tools.</strong> And they could solve
so many problems‚Äîif only they were better known and easier to use.</p>
<section id="what-are-git-notes">
<h2><span>üßê</span> What are git notes?</h2>
<p>A common use of git notes is tacking metadata onto commits.</p>
<p>Once a commit cements itself in git‚Äôs history‚Äîthat‚Äôs it. It‚Äôs
impossible to amend a commit message buried deep in a repo‚Äôs log<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>But git notes enable you to amend new information about old commits
in a special namespace. And they‚Äôre capable of so much more.</p>
<p><strong>Notes stow metadata about anything tracked by
git</strong>‚Äîany object: commits, blobs, and trees. All without futzing
with the object itself.</p>
<p>You add notes to the latest commit in a repo like this:</p>
<pre><code>git notes add -m &#39;Acked-by: &lt;tyler@tylercipriani.com&gt;&#39;</code></pre>
<p>And then it shows up in <code>git log</code>:</p>
<pre><code>commit 1ef8b30ab7fc218ccc85c9a6411b1d2dd2925a16
Author: Tyler Cipriani &lt;thcipriani@gmail.com&gt;
Date:   Thu Nov 17 16:51:43 2022 -0700

    Initial commit

    Notes:
        Acked-by: &lt;tyler@tylercipriani.com&gt;</code></pre>
</section>
<section id="git-notes-in-the-wild">
<h2><span>ü•æ</span> Git notes in the wild</h2>
<p>The git project itself offers an example of git notes in the wild.
They link each commit to its discussion on their mailing list.</p>
<p>For example:</p>
<pre><code>commit 00f09d0e4b1826ee0519ea64e919515032966450
Author: &lt;redacted&gt;
Date:   Thu Jan 28 02:05:55 2010 +0100

    bash: support &#39;git notes&#39; and its subcommands
    ...

Notes (amlog):
    Message-Id: &lt;1264640755-22447-1-git-send-email-szeder@ira.uka.de&gt;</code></pre>
<p>This commit‚Äôs notes point intrepid users to the <a href="https://lore.kernel.org/git/1264640755-22447-1-git-send-email-szeder@ira.uka.de/">thread
where this patch was discussed</a>.</p>
<p>Other folks are using notes for things like:</p>
<ul>
<li>Tracking time spent per commit or branch</li>
<li>Adding review and testing information to git log</li>
<li>And even fully distributed code review</li>
</ul>
</section>
<section id="storing-code-reviews-and-test-results-in-git-notes">
<h2><span>üì¶</span> Storing code reviews and test results in git
notes</h2>
<p>Here is a plea for all forges: make code review metadata available
offline, inside git.</p>
<p>The <a href="https://gerrit.googlesource.com/plugins/reviewnotes/+/refs/heads/master/src/main/resources/Documentation/refs-notes-review.md">reviewnotes</a>
plugin for Gerrit<a href="#fn2" id="fnref2" role="doc-noteref"><sup>2</sup></a> is an example of how to do this
well. It makes it easy to see who reviewed code in git log:</p>
<pre><code>git fetch origin refs/notes/review:refs/notes/review
git log --show-notes=review</code></pre>
<p>The command above shows me all the standard git log info alongside
information about what tests ran and who reviewed the code. All without
forcing me into my browser.</p>
<pre><code>commit d1d17908d2a97f057887a4afbd99f6c40be56849
Author: User &lt;user@example.com&gt;
Date:   Sun Mar 27 18:10:51 2022 +0200

    Change the thing

Notes (review):
    Verified+1: SonarQube Bot
    Verified+2: jenkins-bot
    Code-Review+2: Reviewer Human &lt;reviewerhuman@wikimedia.org&gt;
    Submitted-by: jenkins-bot
    Submitted-at: Tue, 14 Jun 2022 21:59:58 +0000
    Reviewed-on: https://gerrit.wikimedia.org/r/c/mediawiki/core/+/774005
    Project: mediawiki/core
    Branch: refs/heads/master</code></pre>
</section>
<section id="distributed-code-review-inside-git-notes">
<h2><span>üí†</span> Distributed code review <u>inside</u> git notes</h2>
<p>Motivated hackers can knead and extend git notes. Using them as
distributed storage for any madcap idea.</p>
<p>Someone at Google cobbled together a full-on code review system
teetering atop git notes called <a href="https://github.com/google/git-appraise">git-appraise</a>.</p>
<p>Its authors have declared it a ‚Äúfully distributed code
review‚Äù‚Äîindependent of GitHub, GitLab, or any other code forge.</p>
<p>This system lets you:</p>
<ul>
<li>Request review of a change</li>
<li>Comment on a change</li>
<li>Review and merge a change</li>
</ul>
<p>And you can do all this from your local computer, even if GitHub is
down.</p>
<p>Plus, it‚Äôs equipped with an affectedly unaesthetic web interface, if
that‚Äôs your thing.</p>
<figure>
<img src="https://photos.tylercipriani.com/2022-11-27_git-appraise-web.png" alt="The git-appraise web interface, in all its NaN-line-numbering glory."/>
<figcaption aria-hidden="true">The git-appraise web interface, in all
its NaN-line-numbering glory.</figcaption>
</figure>
</section>
<section id="no-one-uses-git-notes">
<h2><span>üò≠</span> No one uses git notes</h2>
<p>Git notes are a pain to use.</p>
<p>And GitHub <a href="https://github.blog/2010-08-25-git-notes-display/">opted to stop
displaying commit notes in 2014</a> without much explanation.</p>
<p>For commits, you can make viewing and adding notes easier using fancy
options in your gitconfig<a href="#fn3" id="fnref3" role="doc-noteref"><sup>3</sup></a>. But for storing notes about blobs
or trees? Forget it. You‚Äôd need to be comfortable rooting around in
git‚Äôs <a href="https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain">plumbing</a>
first.</p>
<p>So, for now: <strong>git notes are relegated to obscurity</strong>.
Forever hamstrung by an obscure and clunky interface and limited
adoption‚ÄîI often forget they‚Äôre there.</p>
</section>
<section id="forge-independence">
<h2><span>üóΩ</span> Forge independence</h2>
<p>Git is a distributed code review system. But much of the value of git
repos ends up locked into forges, like GitHub.</p>
<p>Git notes are a path toward an alternative.</p>
<p>Git distributes the history of a piece of code. <strong>Git notes
could make it possible to distribute the history of an entire
project.</strong></p>
</section>


</section>









</div>



</article></div>
  </body>
</html>
