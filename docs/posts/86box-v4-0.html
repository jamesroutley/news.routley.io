<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://86box.net/2023/08/26/86box-v4-0.html">Original</a>
    <h1>86Box v4.0</h1>
    
    <div id="readability-page-1" class="page"><div>
			<span>
August 26, 2023
- written by <a href="https://github.com/richardg867">richardg867</a>
</span>

			
			
<figure>
  <img src="https://86box.net/assets/images/v4.0/hero.png"/>
</figure>

<p>This is the August 2023 update to 86Box, bringing many improvements, bugfixes (especially for non-Windows users) and some new hardware.</p>

<p>Itâ€™s certainly been a while since <a href="https://86box.net/2022/11/26/86box-v3-11.html">our last update</a>. Needless to say, despite the bumpy ride to this release, <strong>weâ€™re still alive</strong> and working on making 86Box great. We have some <strong>exciting new features</strong> currently being worked on for future updates, and from now on, weâ€™ll be sharing work-in-progress builds of new features with our <a href="https://www.patreon.com/86box"><strong>Patreon supporters</strong></a>, with no impact to our regular release schedule; the first WIP build is already available to supporters, so go check it out.</p>

<hr/>

<h2 id="main-features">Main features</h2>

<h3 id="input">Input</h3>

<p>There have been many fixes to <strong>keyboard and mouse input</strong>. Mouse emulation was overhauled to <strong>massively improve responsiveness</strong>. The AT and PS/2 keyboard controller emulation was also reworked to hopefully eliminate the longstanding issue of keyboard and mouse <strong>input suddenly stopping</strong>, as well as other issues with PS/2 keyboards and mice on some machines.</p>

<p>Keyboard input on Linux and macOS hosts is now significantly improved, fixing issues with missing or mismatched keys particularly on <strong>international keyboards</strong>, as well as key holding. Absolute mouse input on X11 Linux hosts, which is used when running 86Box through a <strong>virtual machine or VNC</strong>, was also fixed.</p>

<h3 id="ati-mach832">ATI Mach8/32</h3>

<p>The <a href="https://en.wikipedia.org/wiki/ATI_Mach_series"><strong>Mach8 and Mach32</strong></a> were clones of the <strong>IBM 8514/A</strong> video accelerator which helped ATI gain market momentum in the early 1990s. 86Box now provides the first ever <strong>functional emulation</strong> of these cards. The Mach32 in particular was a popular card, available in <a href="https://www.os2museum.com/wp/children-of-the-bus-wars/" title="OS/2 Museum: Children of the Bus Wars">five different bus variants</a> (of which we currently emulate ISA, MCA, VLB and PCI) as well as integrated to many motherboards, and had wide operating system support.</p>

<h3 id="network">Network</h3>

<p><a href="https://github.com/virtualsquare/vde-2"><strong>VDE</strong></a> virtual networking is now supported for connecting 86Box machines and even other emulators to each other on Linux and macOS hosts. While Windows is notably not supported by VDE, weâ€™re working on a solution, so stay tuned. The <a href="https://86box.readthedocs.io/en/v4.0/hardware/network.html#vde">86Box documentation</a> has a full setup guide for creating a VDE network.</p>

<p>A nasty emulator crash when <strong>PCap</strong> fails to initialize was fixed, and the <strong>SLiRP</strong> library was updated to its full version on Windows and macOS hosts for potential performance improvements.</p>

<hr/>

<h2 id="changelog">Changelog</h2>

<h3 id="emulator">Emulator</h3>

<ul>
  <li>Added <strong>PipeWire support</strong> for audio on Linux hosts</li>
  <li>Added <strong>pure Wayland support</strong> for Linux hosts</li>
  <li>Fixed <strong>broken Linux AppImages</strong> for x86 32-bit, ARM32 and ARM64 architectures</li>
  <li>Fixed <strong>sound output issues</strong> on some Linux hosts due to mismatching audio libraries</li>
  <li>Fixed incorrect <strong>key holding behavior</strong> on Linux and macOS hosts</li>
  <li>Fixed key mapping on Linux and macOS hosts with <strong>international keyboards</strong></li>
  <li>Fixed <strong>Keyboard requires capture</strong> option not allowing keyboard capture if no mouse is enabled</li>
  <li>Fixed <strong>Shift+F10</strong> temporarily blocking keyboard input</li>
  <li>Fixed <strong>absolute mouse input</strong> on X11 Linux hosts</li>
  <li>Fixed <strong>4th and 5th mouse buttons</strong> on Windows hosts</li>
  <li>Fixed inconsistent <strong>mouse sensitivity</strong> with a scaled window or full screen mode</li>
  <li>Fixed Direct3D 9 renderer scaling on <strong>HiDPI monitors</strong></li>
  <li>Fixed <strong>Vulkan support</strong> on Linux hosts</li>
  <li>Fixed keyboard input through the <strong>secondary monitor window</strong> on Windows hosts</li>
  <li>Fixed crash when exiting with a <strong>secondary monitor window</strong> open</li>
  <li>Fixed <strong>secondary monitor</strong> freezing after changing renderers</li>
</ul>

<h3 id="user-interface">User interface</h3>

<ul>
  <li>Added <strong>soft power button</strong> for ACPI-capable machines</li>
  <li>Added host architecture and dynamic recompiler information to the <strong>About window</strong></li>
  <li>Added translation: <strong>Catalan</strong> by <a href="https://github.com/OBattler">OBattler</a>, <span>ðŸ‡¸ðŸ‡°</span> <strong>Slovak</strong> by <a href="https://github.com/OBattler">OBattler</a> and <a href="https://github.com/daviunic"><strong>daviunic</strong></a></li>
  <li>Fixed default file extension for new <strong>floppy, MO and ZIP images</strong> on macOS hosts</li>
  <li>Fixed <strong>full screen keyboard shortcuts</strong> leading to stuck keys or not working at all</li>
  <li>Fixed changes to <strong>video card settings</strong> being discarded after changing machines</li>
  <li>Fixed new <strong>raw disk images</strong> not using the exact specified CHS geometry</li>
  <li>Fixed text editing incorrectly enabled on <strong>hard disk and removable drive tables</strong> (not that it did anything)</li>
  <li>Fixed <strong>CD-ROM mute</strong> option not showing its current state</li>
  <li>Fixed status bar icons still showing activity with <strong>Update status bar icons</strong> turned off</li>
  <li>Fixed <strong>MCA device list</strong> missing leading zeros on device IDs</li>
  <li>Fixed missing <strong>AppImage icon</strong> on more Linux desktop environments</li>
  <li>Changed default hard disk image type to <strong>dynamic VHD</strong></li>
  <li>Changed <strong>macOS app icon</strong> to conform to Apple standards</li>
  <li>Updated translations: <strong>Chinese (Taiwan)</strong>, <strong>Ukrainian</strong></li>
</ul>

<h3 id="machines">Machines</h3>

<ul>
  <li>Re-added <strong>Compaq Deskpro 386</strong> with proper chipset emulation</li>
  <li>Added <strong>IBM PS/2 Model 70 Type 4</strong> 486 machine (with forced Softfloat FPU due to strict BIOS tests)</li>
  <li>Added <strong>Gemlight GMB-P54SPS</strong> Socket 5 motherboard</li>
  <li>Added <strong>Packard Bell PB810</strong> Socket 7 motherboard</li>
  <li>Added <strong>Toshiba Infinia 7200</strong> Socket 7 motherboard</li>
  <li>Added <strong>ECS P6BAT-A+</strong> Slot 1 and Socket 370 motherboard</li>
  <li>Added real time clock to the <strong>Vendex HeadStart Turbo 888-XT</strong></li>
  <li>Added AGP support to the <strong>QDI EXCELLENT II</strong></li>
  <li>Added PS/2 mouse support to the <strong>Epson Action PC 2600</strong> and <strong>TriGem 486G</strong></li>
  <li>Added on-board S3 ViRGE/DX video to the <strong>Intel TC430HX</strong></li>
  <li>Added on-board ATI Mach32 video to the <strong>IBM PS/ValuePoint P60</strong></li>
  <li>Fixed <strong>Acer A1G</strong> crashing the emulator on 64-bit builds</li>
  <li>Fixed <strong>Acer V35N</strong> hanging during POST</li>
  <li>Fixed <strong>PC Chips M729</strong> BIOS misbehaving and not retaining CMOS settings</li>
  <li>Fixed <strong>ASUS P5A</strong> instability in DOS</li>
  <li>Fixed <strong>IBM PC 330 (type 6573)</strong> BIOS misbehavior and missing on-board devices</li>
  <li>Fixed keyboard layout issues on the <strong>ECS Elite UM8810PAIO</strong> and <strong>Samsung SPC7700P-LW</strong></li>
  <li>Fixed incorrect memory detection on the <strong>Phoenix XT clone</strong> and <strong>Tandy 1000</strong> machines</li>
  <li>Fixed OS/2 crashing the emulator on the <strong>IBM PS/2 Model 80</strong></li>
  <li>Fixed PS/2 mouse not being detected on the <strong>Samsung SPC-4216P</strong></li>
  <li>Fixed game port joysticks on the <strong>IBM PCjr</strong></li>
  <li>Fixed PCI device IRQs on <strong>ALi M1489</strong> machines and the <strong>ECS P6BAP</strong></li>
  <li>Fixed CD-ROM boot on the <strong>AMI Apollo</strong></li>
  <li>Fixed discrete video card support on the <strong>TriGem 486G</strong></li>
  <li>Fixed <strong>Olivetti M19</strong> font corruption</li>
  <li>Fixed <strong>Amstrad PC20(0)</strong> font corruption in MDA mode</li>
  <li>Fixed incorrect keyboard layout on <strong>Amstrad</strong> machines</li>
  <li>Fixed incorrect on-board devices on the <strong>ASUS PCI/I-486SP3</strong></li>
  <li>Fixed incorrect PCI slot layout on the <strong>ASUS P2B-LS</strong></li>
  <li>Fixed <strong>ASUS P5A</strong> and <strong>Gigabyte GA-5AX</strong> hanging or rebooting on ACPI shutdown</li>
  <li>Fixed <strong>DataExpert EXP8551</strong> and <strong>PC Partner MB500N</strong> filed on the wrong category (now Socket 7 Single Voltage)</li>
  <li>Fixed incorrect Planar IDs on the <strong>IBM PS/2 Model 55SX</strong> and <strong>60</strong></li>
  <li>Changed <strong>IBM PCjr</strong> memory size selection to a minimum of 64 KB with 64 KB increments</li>
  <li>Increased maximum RAM on the <strong>Gigabyte GA-586IP</strong> to 256 MB</li>
</ul>

<h3 id="hardware">Hardware</h3>

<ul>
  <li><strong>Core</strong>
    <ul>
      <li>Added <strong>Softfloat FPU</strong> option for higher floating point accuracy at the cost of performance</li>
      <li>Added <strong>PIT mode</strong> option for higher Programmable Interval Timer accuracy at the cost of performance</li>
      <li>Added <strong>Celeron Covington</strong> CPU for when you feel like having no L2 cache</li>
      <li>Added <strong>Page Global Enable</strong> CPU feature to the Pentium II and its derivatives</li>
      <li>Improved performance of some <strong>MMX workloads</strong> on x86 hosts</li>
      <li>Reworked <strong>PCI slot assignment</strong> system - Windows may redetect installed cards!</li>
      <li>Fixed PCI functionality on Windows 95 with the <strong>430NX</strong> and other early PCI chipsets</li>
      <li>Fixed certain machines crashing the emulator when set to <strong>16 MB RAM</strong> or higher</li>
      <li>Fixed <strong>OpenStep</strong> text corruption and font sizing issues due to missing <strong>FXTRACT</strong> FPU instruction</li>
      <li>Fixed graphical glitching on 3D games with the <strong>Pentium II Deschutes</strong> and <strong>Celeron Mendocino</strong> due to broken <strong>FXSAVE and FXRSTOR</strong> FPU instructions</li>
      <li>Fixed <strong>NetWare 6</strong> failing to boot on the Pentium II and its derivatives</li>
      <li>Fixed interrupt controller emulation inaccuracies mostly affecting MCA <strong>IBM PS/2</strong> machines</li>
      <li>Fixed a small MMU mapping inaccuracy on <strong>32-bit ALU instructions</strong></li>
      <li>Fixed undocumented 8088 and PIT quirks abused by the <strong>Area 5150</strong> demo (weâ€™re working on making it work!)</li>
    </ul>
  </li>
  <li><strong>Display</strong>
    <ul>
      <li>Added <strong>ATI Mach8</strong> ISA and <strong>Mach32</strong> ISA/MCA/VLB/PCI video cards</li>
      <li>Added <strong>INMOS XGA</strong> ISA video card</li>
      <li>Added 8 MB video RAM option to the <strong>Number 9 9FX 771</strong> (S3 Vision968) card</li>
      <li>Fixed <strong>IBM XGA</strong> crashing the emulator if the primary video card is not VGA</li>
      <li>Fixed <strong>IBM XGA</strong> BIOS loading issues resulting in POST failures (again)</li>
      <li>Fixed QBasic hanging on exit on <strong>EGA</strong> cards</li>
      <li>Fixed text corruption with <strong>S3</strong> cards on XFree86</li>
      <li>Fixed <strong>S3 ViRGE/GX</strong> family displaying a black screen on XFree86</li>
      <li>Fixed cursor glitching with Miro and SPEA <strong>S3 Vision968</strong> cards on Windows 95</li>
      <li>Fixed cursor glitching with <strong>Tseng ET4000/W32</strong> cards on some Windows versions</li>
      <li>Fixed graphics corruption with <strong>ATI Mach64</strong> cards on some video modes and Windows versions</li>
      <li>Fixed <strong>Hercules</strong> text mode missing the rightmost column</li>
      <li>Fixed <strong>Hercules Plus</strong> graphics corruption in RAM font mode</li>
      <li>Fixed <strong>Hercules Plus</strong> and <strong>InColor</strong> screen wrapping glitch</li>
      <li>Fixed font selection and color palette on the <strong>Compaq Portable</strong> gas plasma display</li>
      <li>Fixed graphics corruption on <strong>EGA</strong> monochrome modes</li>
      <li>Fixed specific graphics corruption issues on the <strong>IBM 8514/A</strong> and <strong>XGA</strong></li>
      <li>Fixed small emulation inaccuracies on <strong>CGA</strong>, <strong>EGA</strong> and <strong>Cirrus Logic</strong> cards</li>
      <li>Fixed <strong>Voodoo Banshee/3</strong> screen wrapping glitch in 2048x1536 mode</li>
      <li>Fixed <strong>DDC monitor size</strong> data to prevent Xorg from defaulting to 2048x1536 or other high resolutions</li>
      <li>Fixed incorrect video RAM detection on <strong>S3 Vision864</strong>, <strong>Vision964</strong>, <strong>Trident TGUI9400</strong> and <strong>TGUI9440</strong> cards</li>
      <li>Fixed <strong>Reply Video Adapter</strong> (Cirrus Logic GD5426) MCA card ignoring the configured video RAM amount</li>
      <li>Fixed BIOS error on <strong>Cirrus Logic MCA</strong> cards</li>
      <li>Fixed incorrect detection of the <strong>Compaq EGA</strong></li>
      <li>Fixed <strong>IBM 8514/A</strong> and <strong>XGA</strong> incorrectly selectable alongside incompatible VGA cards</li>
      <li>Changed <strong>200-line CGA</strong> mode to no longer double to 400 lines</li>
    </ul>
  </li>
  <li><strong>Input</strong>
    <ul>
      <li>Reworked <strong>AT-PS/2 keyboard controller emulation</strong> to fix random loss of input</li>
      <li>Increased <strong>mouse polling rate</strong> to improve responsiveness</li>
      <li>Added Command + Forward Delete shortcut for the <strong>Insert key</strong> on macOS hosts</li>
      <li>Fixed <strong>serial mouse detection</strong> on some Linux distributions</li>
      <li>Fixed 3-button mode on the <strong>Logitech serial mouse</strong></li>
      <li>Fixed <strong>PS/2 mouse</strong> on SCO UNIX</li>
      <li>Fixed <strong>4-axis 4-button joystick</strong> on Windows hosts</li>
      <li>Fixed <strong>vJoy driver</strong> crashing the emulator when configured as a joystick</li>
    </ul>
  </li>
  <li><strong>Sound</strong>
    <ul>
      <li>Added support for <strong>up to 4 sound cards</strong> per machine</li>
      <li>Fixed <strong>FluidSynth</strong> not working on Linux and macOS hosts (for real this time)</li>
      <li>Fixed incorrect default settings for <strong>FluidSynth</strong></li>
      <li>Fixed <strong>AdLib Gold</strong> hanging the emulated machine</li>
      <li>Fixed <strong>Ensoniq AudioPCI</strong> audio distortion on some games</li>
      <li>Fixed <strong>MPU-401 intelligent mode</strong> freezing some games</li>
      <li>Fixed <strong>Windows Sound System</strong> crashing the emulator if OPL functionality is disabled</li>
      <li>Fixed VIAFMTSR software OPL3 emulation on <strong>VIA on-board sound</strong></li>
      <li>Fixed <strong>AcerMagic S20</strong> and <strong>miroSOUND PCM10</strong> sound cards not being detected by some tools</li>
      <li>Fixed incorrect default IRQ (now 5) on the <strong>AcerMagic S20</strong> and <strong>miroSOUND PCM10</strong></li>
      <li>Fixed MIDI input corrupting large SysEx messages on the <strong>MPU-401</strong> and compatible sound cards</li>
      <li>Fixed <strong>Ensoniq AudioPCI</strong> incorrectly identifying as ES1373 instead of ES1371</li>
      <li>Fixed <strong>VIA on-board sound</strong> impacting emulation performance when supported by the machineâ€™s chipset but not used</li>
      <li>Moved <strong>Innovation SSI-2001</strong>, <strong>CMS / Game Blaster</strong> and <strong>Gravis Ultrasound</strong> to the new multiple sound card selector</li>
      <li>Changed <strong>Ensoniq AudioPCI</strong> codec selection to reflect actual ES1371 cards</li>
      <li>Updated <strong>FluidSynth</strong> library on Windows hosts to no longer require an external DLL</li>
      <li>Updated ymfm library to fix a small <strong>OPL4</strong> inaccuracy</li>
    </ul>
  </li>
  <li><strong>Network</strong>
    <ul>
      <li>Added <a href="https://github.com/virtualsquare/vde-2"><strong>VDE</strong></a> virtual networking support for Linux and macOS hosts</li>
      <li>Added <strong>Null Driver</strong> option to connect the network card to an empty network, replacing the <strong>None</strong> option</li>
      <li>Fixed <strong>PCap</strong> crashing the emulator upon failing to initialize</li>
      <li>Fixed NetWare packet corruption on <strong>NE2000 cards</strong></li>
      <li>Fixed <strong>Western Digital WD8003E/A</strong> MCA cards not working when configured for IRQ 4 or 15</li>
      <li>Updated <strong>SLiRP</strong> library on Windows and macOS hosts</li>
    </ul>
  </li>
  <li><strong>Ports</strong>
    <ul>
      <li>Added <strong>serial port passthrough</strong> to real ports and named pipes</li>
      <li>Fixed <strong>PostScript printer</strong> not working on macOS hosts (for real this time)</li>
      <li>Fixed serial ports not working on later <strong>ALi chipsets</strong></li>
      <li>Updated the ESC/P printerâ€™s <strong>FreeType</strong> library on Windows hosts to no longer require an external DLL</li>
    </ul>
  </li>
  <li><strong>Storage</strong>
    <ul>
      <li>Added ATAPI and SCSI <strong>CD-ROM drive model selection</strong> with more options</li>
      <li>Added <strong>Monster FDC</strong> floppy drive controller card</li>
      <li>Added generic <strong>tertiary and quaternary</strong> floppy drive controller cards</li>
      <li>Added <strong>Western Digital WDXT-GEN</strong> ISA MFM controller card</li>
      <li>Added <strong>XTIDE BIOS variant</strong> specifically for NEC V20/V30 CPUs</li>
      <li>Fixed <strong>Adaptec AHA-154x</strong> and <strong>BusLogic</strong> SCSI controllers crashing the emulator on FreeBSD</li>
      <li>Fixed slow detection of <strong>empty IDE channels</strong> on Linux</li>
      <li>Fixed <strong>XTA</strong> controllers not working properly</li>
      <li>Fixed <strong>XTIDE BIOS</strong> error on NEC V20/V30 CPUs</li>
      <li>Fixed <strong>mounted folders</strong> discarding invalid characters used by some DOS application CDs</li>
      <li>Fixed <strong>ATAPI CD-ROM</strong> not working on Solaris 2</li>
      <li>Fixed <strong>BusLogic</strong> and <strong>Rancho RT1000B</strong> SCSI controllers not working with specific versions of their DOS drivers</li>
      <li>Fixed <strong>Tekram DC-390</strong> SCSI controller not resetting devices attached to it</li>
      <li>Fixed <strong>SCSI CD audio</strong> issues on OS/2 and on NCR ISA SCSI controllers</li>
      <li>Fixed SCSI ID assignment on the <strong>IBM PS/2 SCSI Adapter</strong></li>
      <li>Fixed dynamic and differential <strong>VHD images</strong> re-creating as fixed images if deleted</li>
      <li>Fixed <strong>VHD images</strong> with more than 63 (IDE) or 99 (SCSI) sectors per track not being loaded correctly</li>
      <li>Fixed emulator crash with <code>hdd_image_load()</code> message when loading <strong>differential VHD images</strong> made on different timezones</li>
      <li>Fixed <strong>mounted folders</strong> remaining locked on macOS hosts after the CD-ROM is ejected</li>
      <li>Fixed <strong>cassette</strong> incorrectly available on machines without cassette support</li>
    </ul>
  </li>
  <li><strong>Other</strong>
    <ul>
      <li>Fixed <strong>ISA RTC cards</strong> not being detected by some software</li>
      <li>Fixed <strong>ISA RTC cards</strong> reporting an incorrect year in some cases</li>
      <li>Fixed <strong>ISABugger</strong> incorrectly available on machines without ISA</li>
    </ul>
  </li>
</ul>

<h3 id="known-issues">Known issues</h3>

<ul>
  <li>Some applications which heavily depend on specific <strong>8088 CPU behavior</strong> may not work properly</li>
  <li>The <strong>Ensoniq AudioPCI</strong> no longer works with the 2001 Creative WDM driver (<code>SBPCI_WebDrvsV5_12_01.exe</code>); this driver is designed for ES1373/CT5880 cards only, has identical BSOD issues on a real ES1371, and only works in VMware and previous versions of 86Box due to emulation inaccuracies</li>
  <li><strong>Serial port passthrough</strong> is not complete and may require reconfiguration in a future version</li>
  <li><strong>Serial port passthrough</strong> may randomly stall the emulated machine if the other end is not connected</li>
  <li>The <strong>ATI Mach8</strong> and <strong>Mach32</strong> may not render some very specific video modes correctly</li>
</ul>

		</div></div>
  </body>
</html>
