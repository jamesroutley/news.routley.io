<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/sickcodes/Docker-OSX">Original</a>
    <h1>Docker-OSX: Run macOS VM in a Docker</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://conner.bond/sickcodes/Docker-OSX/blob/master/running-mac-inside-docker-qemu.png?raw=true"><img src="https://conner.bond/sickcodes/Docker-OSX/raw/master/running-mac-inside-docker-qemu.png?raw=true" alt="Running Mac OS X in a Docker container" title="OSX KVM DOCKER"/></a></p>
<p dir="auto">Run Mac OS X in Docker with near-native performance! X11 Forwarding! iMessage security research! iPhone USB working! macOS in a Docker container!</p>
<p dir="auto">Conduct Security Research on macOS using both Linux &amp; Windows!</p>

<p dir="auto">The Discord is active on #docker-osx and anyone is welcome to come and ask questions, ideas, etc.</p>
<p dir="auto">
    <a href="https://hub.docker.com/r/sickcodes/docker-osx" rel="nofollow"><img src="https://camo.githubusercontent.com/002a00a011ab2ec7018375ddd3df309dd6b8113ec2ef15c311ed59e595134686/68747470733a2f2f646f636b6572692e636f2f696d6167652f7369636b636f6465732f646f636b65722d6f7378" data-canonical-src="https://dockeri.co/image/sickcodes/docker-osx"/></a><a href="https://discord.gg/sickchat" rel="nofollow"></a><a href="https://discord.gg/sickchat" rel="nofollow"><img src="https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/discord-logo.svg"/></a>
</p>
<h3 dir="auto"><a id="user-content-click-to-join-the-discord-server-httpsdiscordggsickchat" aria-hidden="true" href="#click-to-join-the-discord-server-httpsdiscordggsickchat"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Click to join the Discord server <a href="https://discord.gg/sickchat" rel="nofollow">https://discord.gg/sickchat</a></h3>
<h3 dir="auto"><a id="user-content-click-to-join-the-telegram-server-httpstmesickcodeschat" aria-hidden="true" href="#click-to-join-the-telegram-server-httpstmesickcodeschat"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Click to join the Telegram server <a href="https://t.me/sickcodeschat" rel="nofollow">https://t.me/sickcodeschat</a></h3>
<p dir="auto">Or reach out via Linkedin if it&#39;s private: <a href="https://www.linkedin.com/in/sickcodes" rel="nofollow">https://www.linkedin.com/in/sickcodes</a></p>
<p dir="auto">Or via <a href="https://sick.codes/contact/" rel="nofollow">https://sick.codes/contact/</a></p>
<h2 dir="auto"><a id="user-content-author" aria-hidden="true" href="#author"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h2>
<p dir="auto">This project is maintained by <a href="https://sick.codes/" rel="nofollow">Sick.Codes</a>. <a href="https://twitter.com/sickcodes" rel="nofollow">(Twitter)</a></p>
<p dir="auto">Additional credits can be found here: <a href="https://github.com/sickcodes/Docker-OSX/blob/master/CREDITS.md">https://github.com/sickcodes/Docker-OSX/blob/master/CREDITS.md</a></p>
<p dir="auto">Additionally, comprehensive list of all contributors can be found here: <a href="https://github.com/sickcodes/Docker-OSX/graphs/contributors">https://github.com/sickcodes/Docker-OSX/graphs/contributors</a></p>
<p dir="auto">Big thanks to <a href="https://twitter.com/kholia" rel="nofollow">@kholia</a> for maintaining the upstream project, which Docker-OSX is built on top of: <a href="https://github.com/kholia/OSX-KVM">OSX-KVM</a>.</p>
<p dir="auto">Also special thanks to <a href="https://github.com/thenickdude">@thenickdude</a> who maintains the valuable fork <a href="https://github.com/thenickdude/KVM-Opencore">KVM-OpenCore</a>, which was started by <a href="https://github.com/Leoyzen/">@Leoyzen</a>!</p>
<p dir="auto">Extra special thanks to the OpenCore team over at: <a href="https://github.com/acidanthera/OpenCorePkg">https://github.com/acidanthera/OpenCorePkg</a>. Their well-maintained bootloader provides much of the great functionality that Docker-OSX users enjoy :)</p>
<p dir="auto">If you like this project, consider contributing here or upstream!</p>
<h2 dir="auto"><a id="user-content-quick-start-docker-osx" aria-hidden="true" href="#quick-start-docker-osx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start Docker-OSX</h2>
<p dir="auto">Video setup tutorial is also available here: <a href="https://www.youtube.com/watch?v=wLezYl77Ll8" rel="nofollow">https://www.youtube.com/watch?v=wLezYl77Ll8</a></p>
<p dir="auto"><strong>Windows users:</strong> <a href="#id-like-to-run-docker-osx-on-windows">click here to see the notes below</a>!</p>
<p dir="auto">
  <a href="https://www.youtube.com/watch?v=wLezYl77Ll8" rel="nofollow"><img src="https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/Youtube-Screenshot-Docker-OSX-Setup.png"/></a>
</p>
<p dir="auto">First time here? try <a href="#initial-setup">initial setup</a>, otherwise try the instructions below to use either Catalina or Big Sur.</p>
<h2 dir="auto"><a id="user-content-any-questions-ideas-or-just-want-to-hang-out" aria-hidden="true" href="#any-questions-ideas-or-just-want-to-hang-out"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Any questions, ideas, or just want to hang out?</h2>

<h3 dir="auto"><a id="user-content-catalina-" aria-hidden="true" href="#catalina-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Catalina <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/45cf38e46d8969e9adfa8fca9a924a1efa97912b6178681621fa9cb12b9a6df8/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6c61746573743f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416c6174657374" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/latest?label=sickcodes%2Fdocker-osx%3Alatest" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/latest?label=sickcodes%2Fdocker-osx%3Alatest"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:latest

# docker build -t docker-osx ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:latest

<span><span>#</span> docker build -t docker-osx .</span></pre></div>
<h3 dir="auto"><a id="user-content-big-sur-" aria-hidden="true" href="#big-sur-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Big Sur <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/a7e71af15deabe981d6d56a259042b2efac450a8c6cafcc78f71fb5dcd3b758e/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6269672d7375723f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416269672d737572" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/big-sur?label=sickcodes%2Fdocker-osx%3Abig-sur" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/big-sur?label=sickcodes%2Fdocker-osx%3Abig-sur"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:big-sur

# docker build -t docker-osx --build-arg SHORTNAME=big-sur ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:big-sur

<span><span>#</span> docker build -t docker-osx --build-arg SHORTNAME=big-sur .</span></pre></div>
<h3 dir="auto"><a id="user-content-monterey-" aria-hidden="true" href="#monterey-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Monterey <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/da3d62a6df5629e884da0f20d2918b94d67b904fc16db97dcabc0df28ea1690a/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6d6f6e74657265793f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416d6f6e7465726579" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/monterey?label=sickcodes%2Fdocker-osx%3Amonterey" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/monterey?label=sickcodes%2Fdocker-osx%3Amonterey"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=&#39;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#39; \
    sickcodes/docker-osx:monterey

# docker build -t docker-osx --build-arg SHORTNAME=monterey ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=<span><span>&#39;</span>https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist<span>&#39;</span></span> \
    sickcodes/docker-osx:monterey

<span><span>#</span> docker build -t docker-osx --build-arg SHORTNAME=monterey .</span></pre></div>
<h3 dir="auto"><a id="user-content-ventura-" aria-hidden="true" href="#ventura-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ventura <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/e6f3136ca0975d3933e587565c2020050142101f8473b0fb2bcc6ae30a54481f/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f76656e747572613f6c6162656c3d7369636b636f646573253246646f636b65722d6f737825334176656e74757261" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/ventura?label=sickcodes%2Fdocker-osx%3Aventura" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/ventura?label=sickcodes%2Fdocker-osx%3Aventura"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=&#39;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#39; \
    sickcodes/docker-osx:ventura

# docker build -t docker-osx --build-arg SHORTNAME=ventura ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=<span><span>&#39;</span>https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist<span>&#39;</span></span> \
    sickcodes/docker-osx:ventura

<span><span>#</span> docker build -t docker-osx --build-arg SHORTNAME=ventura .</span></pre></div>
<h4 dir="auto"><a id="user-content-run-catalina-pre-installed-" aria-hidden="true" href="#run-catalina-pre-installed-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run Catalina Pre-Installed <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/da0a2f6c68e4be492138d5ad1750953746011a4fd6e83d7ececf9d03a5658c32/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6175746f3f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416175746f" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto"/></a></h4>
<div dir="auto" data-snippet-clipboard-copy-content="# 40GB disk space required: 20GB original image 20GB your container.
docker pull sickcodes/docker-osx:auto

# boot directly into a real OS X shell with a visual display [NOT HEADLESS]
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_UNIQUE=true \
    sickcodes/docker-osx:auto

# username is user
# passsword is alpine"><pre><span><span>#</span> 40GB disk space required: 20GB original image 20GB your container.</span>
docker pull sickcodes/docker-osx:auto

<span><span>#</span> boot directly into a real OS X shell with a visual display [NOT HEADLESS]</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    sickcodes/docker-osx:auto

<span><span>#</span> username is user</span>
<span><span>#</span> passsword is alpine</span></pre></div>
<h3 dir="auto"><a id="user-content-older-systems" aria-hidden="true" href="#older-systems"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Older Systems</h3>
<h3 dir="auto"><a id="user-content-high-sierra-" aria-hidden="true" href="#high-sierra-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>High Sierra <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/8b74c92f6ced7fd043b07bcec84647475281b28bf10f36aad46f01b6379b6d57/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f686967682d7369657272613f6c6162656c3d7369636b636f646573253246646f636b65722d6f7378253341686967682d736965727261" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/high-sierra?label=sickcodes%2Fdocker-osx%3Ahigh-sierra" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/high-sierra?label=sickcodes%2Fdocker-osx%3Ahigh-sierra"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:high-sierra

# docker build -t docker-osx --build-arg SHORTNAME=high-sierra ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:high-sierra

<span><span>#</span> docker build -t docker-osx --build-arg SHORTNAME=high-sierra .</span></pre></div>
<h3 dir="auto"><a id="user-content-mojave-" aria-hidden="true" href="#mojave-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mojave <a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/5a9a1f074084da6aa43213c32ef288e69f97c0c2900103dc42122f8052876e8d/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6d6f6a6176653f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416d6f6a617665" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/mojave?label=sickcodes%2Fdocker-osx%3Amojave" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/mojave?label=sickcodes%2Fdocker-osx%3Amojave"/></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:mojave

# docker build -t docker-osx --build-arg SHORTNAME=mojave ."><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:mojave

<span><span>#</span> docker build -t docker-osx --build-arg SHORTNAME=mojave .</span></pre></div>
<h4 dir="auto"><a id="user-content-download-the-image-manually-and-use-it-in-docker" aria-hidden="true" href="#download-the-image-manually-and-use-it-in-docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Download the image manually and use it in Docker</h4>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/3e6e91ded4720cafd6cdb1742afc615ee234f27bff1fd304ee7dff52284582ea/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6e616b65643f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416e616b6564" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked"/></a></p>
<p dir="auto">This is a particularly good way for downloading the container, in case Docker&#39;s CDN (or your connection) happens to be slow.</p>
<div dir="auto" data-snippet-clipboard-copy-content="wget https://images2.sick.codes/mac_hdd_ng_auto.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng_auto.img:/image&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    sickcodes/docker-osx:naked"><pre>wget https://images2.sick.codes/mac_hdd_ng_auto.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng_auto.img:/image<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    sickcodes/docker-osx:naked</pre></div>
<h4 dir="auto"><a id="user-content-use-your-own-image-and-manually-and-automatically-log-into-a-shell" aria-hidden="true" href="#use-your-own-image-and-manually-and-automatically-log-into-a-shell"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use your own image and manually and automatically log into a shell</h4>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/1f37a262ef41a73657da85173084906b3c1f192af2d519c9dceb9968e340f21c/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6e616b65642d6175746f3f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416e616b65642d6175746f" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked-auto?label=sickcodes%2Fdocker-osx%3Anaked-auto" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked-auto?label=sickcodes%2Fdocker-osx%3Anaked-auto"/></a></p>
<p dir="auto">Enable SSH in network sharing inside the guest first. Change <code>-e &#34;USERNAME=user&#34;</code> and <code>-e &#34;PASSWORD=password&#34;</code> to your credentials. The container will add itself to <code>~/.ssh/authorized_keys</code></p>
<p dir="auto">Since you can&#39;t see the screen, use the PLIST with nopicker, for example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Catalina
# wget https://images2.sick.codes/mac_hdd_ng_auto.img
# Monterey
wget https://images.sick.codes/mac_hdd_ng_auto_monterey.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng_auto_monterey.img:/image&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e &#34;USERNAME=user&#34; \
    -e &#34;PASSWORD=alpine&#34; \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    sickcodes/docker-osx:naked-auto"><pre><span><span>#</span> Catalina</span>
<span><span>#</span> wget https://images2.sick.codes/mac_hdd_ng_auto.img</span>
<span><span>#</span> Monterey</span>
wget https://images.sick.codes/mac_hdd_ng_auto_monterey.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng_auto_monterey.img:/image<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e <span><span>&#34;</span>USERNAME=user<span>&#34;</span></span> \
    -e <span><span>&#34;</span>PASSWORD=alpine<span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    sickcodes/docker-osx:naked-auto</pre></div>

<p dir="auto">The easiest and most secure way is <code>sshfs</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="# on Linux/Windows
mkdir ~/mnt/osx
sshfs user@localhost:/ -p 50922 ~/mnt/osx
# wait a few seconds, and ~/mnt/osx will have full rootfs mounted over ssh, and in userspace
# automated: sshpass -p &lt;password&gt; sshfs user@localhost:/ -p 50922 ~/mnt/osx"><pre><span><span>#</span> on Linux/Windows</span>
mkdir <span>~</span>/mnt/osx
sshfs user@localhost:/ -p 50922 <span>~</span>/mnt/osx
<span><span>#</span> wait a few seconds, and ~/mnt/osx will have full rootfs mounted over ssh, and in userspace</span>
<span><span>#</span> automated: sshpass -p &lt;password&gt; sshfs user@localhost:/ -p 50922 ~/mnt/osx</span></pre></div>

<p dir="auto">If you have a laptop see the next usbfluxd section.</p>
<p dir="auto">If you have a desktop PC, you can use <a href="https://github.com/Silfalion">@Silfalion</a>&#39;s instructions : <a href="https://github.com/Silfalion/Iphone_docker_osx_passthrough">https://github.com/Silfalion/Iphone_docker_osx_passthrough</a></p>

<p dir="auto">Video setup tutorial for usbfluxd is also available here: <a href="https://www.youtube.com/watch?v=kTk5fGjK_PM" rel="nofollow">https://www.youtube.com/watch?v=kTk5fGjK_PM</a></p>
<p dir="auto">
  <a href="https://www.youtube.com/watch?v=kTk5fGjK_PM" rel="nofollow"><img alt="iPhone USB passthrough on macOS virtual machine Linux &amp; Windows" src="https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/Youtube-USBFLUXD-Screenshot-Docker-OSX.png"/></a>
</p>
<p dir="auto">This method WORKS on laptop, PC, anything!</p>
<p dir="auto">Thank you <a href="https://github.com/nikias">@nikias</a> for <a href="https://github.com/corellium/usbfluxd">usbfluxd</a> via <a href="https://github.com/corellium">https://github.com/corellium</a>!</p>
<p dir="auto"><strong>This is done inside Linux.</strong></p>
<p dir="auto">Open 3 terminals on Linux</p>
<p dir="auto">Connecting your device over USB on Linux allows you to expose <code>usbmuxd</code> on port <code>5000</code> using <a href="https://github.com/corellium/usbfluxd">https://github.com/corellium/usbfluxd</a> to another system on the same network.</p>
<p dir="auto">Ensure <code>usbmuxd</code>, <code>socat</code> and <code>usbfluxd</code> are installed.</p>
<p dir="auto"><code>sudo pacman -S libusbmuxd usbmuxd avahi socat</code></p>
<p dir="auto">Available on the AUR: <a href="https://aur.archlinux.org/packages/usbfluxd/" rel="nofollow">https://aur.archlinux.org/packages/usbfluxd/</a></p>
<p dir="auto"><code>yay usbfluxd</code></p>
<p dir="auto">Plug in your iPhone or iPad.</p>
<p dir="auto">Terminal 1</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo systemctl start usbmuxd
sudo avahi-daemon"><pre>sudo systemctl start usbmuxd
sudo avahi-daemon</pre></div>
<p dir="auto">Terminal 2:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# on host
sudo systemctl restart usbmuxd
sudo socat tcp-listen:5000,fork unix-connect:/var/run/usbmuxd"><pre><span><span>#</span> on host</span>
sudo systemctl restart usbmuxd
sudo socat tcp-listen:5000,fork unix-connect:/var/run/usbmuxd</pre></div>
<p dir="auto">Terminal 3:</p>

<h3 dir="auto"><a id="user-content-connect-to-a-host-running-usbfluxd" aria-hidden="true" href="#connect-to-a-host-running-usbfluxd"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Connect to a host running usbfluxd</h3>
<p dir="auto"><strong>This is done inside macOS.</strong></p>
<p dir="auto">Install homebrew.</p>
<p dir="auto"><code>172.17.0.1</code> is usually the Docker bridge IP, which is your PC, but you can use any IP from <code>ip addr</code>...</p>
<p dir="auto">macOS Terminal:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# on the guest
brew install make automake autoconf libtool pkg-config gcc libimobiledevice usbmuxd

git clone https://github.com/corellium/usbfluxd.git
cd usbfluxd

./autogen.sh
make
sudo make install"><pre><span><span>#</span> on the guest</span>
brew install make automake autoconf libtool pkg-config gcc libimobiledevice usbmuxd

git clone https://github.com/corellium/usbfluxd.git
<span>cd</span> usbfluxd

./autogen.sh
make
sudo make install</pre></div>
<p dir="auto">Accept the USB over TCP connection, and appear as local:</p>
<p dir="auto">(you may need to change <code>172.17.0.1</code> to the IP address of the host. e.g. check <code>ip addr</code>)</p>
<div dir="auto" data-snippet-clipboard-copy-content="# on the guest
sudo launchctl start usbmuxd
export PATH=/usr/local/sbin:${PATH}
sudo usbfluxd -f -r 172.17.0.1:5000"><pre><span><span>#</span> on the guest</span>
sudo launchctl start usbmuxd
<span>export</span> PATH=/usr/local/sbin:<span>${PATH}</span>
sudo usbfluxd -f -r 172.17.0.1:5000</pre></div>
<p dir="auto">Close apps such as Xcode and reopen them and your device should appear!</p>
<p dir="auto"><em>If you need to start again on Linux, wipe the current usbfluxd, usbmuxd, and socat:</em></p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo killall usbfluxd
sudo systemctl restart usbmuxd
sudo killall socat"><pre>sudo killall usbfluxd
sudo systemctl restart usbmuxd
sudo killall socat</pre></div>
<h2 dir="auto"><a id="user-content-make-container-faster-using-httpsgithubcomsickcodesosx-optimizer" aria-hidden="true" href="#make-container-faster-using-httpsgithubcomsickcodesosx-optimizer"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Make container FASTER using <a href="https://github.com/sickcodes/osx-optimizer">https://github.com/sickcodes/osx-optimizer</a></h2>
<p dir="auto">SEE commands in <a href="https://github.com/sickcodes/osx-optimizer">https://github.com/sickcodes/osx-optimizer</a>!</p>
<ul dir="auto">
<li>Skip the GUI login screen (at your own risk!)</li>
<li>Disable spotlight indexing on macOS to heavily speed up Virtual Instances.</li>
<li>Disable heavy login screen wallpaper</li>
<li>Disable updates (at your own risk!)</li>
</ul>
<h2 dir="auto"><a id="user-content-increase-disk-space-by-moving-varlibdocker-to-external-drive-block-storage-nfs-or-any-other-location-conceivable" aria-hidden="true" href="#increase-disk-space-by-moving-varlibdocker-to-external-drive-block-storage-nfs-or-any-other-location-conceivable"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Increase disk space by moving /var/lib/docker to external drive, block storage, NFS, or any other location conceivable.</h2>
<p dir="auto">Move /var/lib/docker, following the tutorial below</p>
<ul dir="auto">
<li>Cheap large physical disk storage instead using your server&#39;s disk, or SSD.</li>
<li>Block Storage, NFS, etc.</li>
</ul>
<p dir="auto">Tutorial here: <a href="https://sick.codes/how-to-run-docker-from-block-storage/" rel="nofollow">https://sick.codes/how-to-run-docker-from-block-storage/</a></p>
<p dir="auto">Only follow the above tutorial if you are happy with wiping all your current Docker images/layers.</p>
<p dir="auto">Safe mode: Disable docker temporarily so you can move the Docker folder temporarily.</p>
<ul dir="auto">
<li>Do NOT do this until you have moved your image out already <a href="https://github.com/dulatello08/Docker-OSX/#quick-start-your-own-image-naked-container-image">https://github.com/dulatello08/Docker-OSX/#quick-start-your-own-image-naked-container-image</a></li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="killall dockerd
systemctl disable --now docker
systemctl disable --now docker.socket
systemctl stop docker
systemctl stop docker.socket"><pre>killall dockerd
systemctl disable --now docker
systemctl disable --now docker.socket
systemctl stop docker
systemctl stop docker.socket</pre></div>
<p dir="auto">Now, that Docker daemon is off, move /var/lib/docker somewhere</p>
<p dir="auto">Then, symbolicly link /var/lib/docker somewhere:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mv /var/lib/docker /run/media/user/some_drive/docker
ln -s /run/media/user/some_drive/docker /var/lib/docker

# now check if /var/lib/docker is working still
ls /var/lib/docker"><pre>mv /var/lib/docker /run/media/user/some_drive/docker
ln -s /run/media/user/some_drive/docker /var/lib/docker

<span><span>#</span> now check if /var/lib/docker is working still</span>
ls /var/lib/docker</pre></div>
<p dir="auto">If you see folders, then it worked. You can restart Docker, or just reboot if you want to be sure.</p>
<h2 dir="auto"><a id="user-content-important-notices" aria-hidden="true" href="#important-notices"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Important notices:</h2>
<p dir="auto"><strong>2021-11-14</strong> - Added High Sierra, Mojave</p>
<p dir="auto">Pick one of these while <strong>building</strong>, irrelevant when using docker pull:</p>
<div data-snippet-clipboard-copy-content="--build-arg SHORTNAME=high-sierra 
--build-arg SHORTNAME=mojave
--build-arg SHORTNAME=catalina
--build-arg SHORTNAME=big-sur
--build-arg SHORTNAME=monterey
--build-arg SHORTNAME=ventura"><pre><code>--build-arg SHORTNAME=high-sierra 
--build-arg SHORTNAME=mojave
--build-arg SHORTNAME=catalina
--build-arg SHORTNAME=big-sur
--build-arg SHORTNAME=monterey
--build-arg SHORTNAME=ventura
</code></pre></div>
<h2 dir="auto"><a id="user-content-technical-details" aria-hidden="true" href="#technical-details"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Technical details</h2>
<p dir="auto">There currently multiple images, each with different use cases (explained <a href="#container-images">below</a>):</p>
<ul dir="auto">
<li>High Sierra</li>
<li>Mojave</li>
<li>Catalina</li>
<li>Big Sur</li>
<li>Monterey</li>
<li>Ventura</li>
<li>Auto (pre-made Catalina)</li>
<li>Naked (use your own .img)</li>
<li>Naked-Auto (user your own .img and SSH in)</li>
</ul>
<p dir="auto">High Sierra:</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/8b74c92f6ced7fd043b07bcec84647475281b28bf10f36aad46f01b6379b6d57/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f686967682d7369657272613f6c6162656c3d7369636b636f646573253246646f636b65722d6f7378253341686967682d736965727261" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/high-sierra?label=sickcodes%2Fdocker-osx%3Ahigh-sierra" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/high-sierra?label=sickcodes%2Fdocker-osx%3Ahigh-sierra"/></a></p>
<p dir="auto">Mojave:</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/5a9a1f074084da6aa43213c32ef288e69f97c0c2900103dc42122f8052876e8d/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6d6f6a6176653f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416d6f6a617665" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/mojave?label=sickcodes%2Fdocker-osx%3Amojave" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/mojave?label=sickcodes%2Fdocker-osx%3Amojave"/></a></p>
<p dir="auto">Catalina:</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/45cf38e46d8969e9adfa8fca9a924a1efa97912b6178681621fa9cb12b9a6df8/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6c61746573743f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416c6174657374" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/latest?label=sickcodes%2Fdocker-osx%3Alatest" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/latest?label=sickcodes%2Fdocker-osx%3Alatest"/></a></p>
<p dir="auto">Big-Sur:</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/a7e71af15deabe981d6d56a259042b2efac450a8c6cafcc78f71fb5dcd3b758e/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6269672d7375723f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416269672d737572" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/big-sur?label=sickcodes%2Fdocker-osx%3Abig-sur" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/big-sur?label=sickcodes%2Fdocker-osx%3Abig-sur"/></a></p>
<p dir="auto">Monterey make your own image:</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/da3d62a6df5629e884da0f20d2918b94d67b904fc16db97dcabc0df28ea1690a/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6d6f6e74657265793f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416d6f6e7465726579" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/monterey?label=sickcodes%2Fdocker-osx%3Amonterey" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/monterey?label=sickcodes%2Fdocker-osx%3Amonterey"/></a></p>
<p dir="auto">Pre-made <strong>Catalina</strong> system by <a href="https://sick.codes" rel="nofollow">Sick.Codes</a>: username: <code>user</code>, password: <code>alpine</code></p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/da0a2f6c68e4be492138d5ad1750953746011a4fd6e83d7ececf9d03a5658c32/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6175746f3f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416175746f" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto"/></a></p>
<p dir="auto">Naked: Bring-your-own-image setup (use any of the above first):</p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/3e6e91ded4720cafd6cdb1742afc615ee234f27bff1fd304ee7dff52284582ea/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6e616b65643f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416e616b6564" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked"/></a></p>
<p dir="auto">Naked Auto: same as above but with <code>-e USERNAME</code> &amp; <code>-e PASSWORD</code> and <code>-e OSX_COMMANDS=&#34;put your commands here&#34;</code></p>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/1f37a262ef41a73657da85173084906b3c1f192af2d519c9dceb9968e340f21c/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6e616b65642d6175746f3f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416e616b65642d6175746f" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked-auto?label=sickcodes%2Fdocker-osx%3Anaked-auto" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked-auto?label=sickcodes%2Fdocker-osx%3Anaked-auto"/></a></p>
<h2 dir="auto"><a id="user-content-capabilities" aria-hidden="true" href="#capabilities"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Capabilities</h2>
<ul dir="auto">
<li>use iPhone OSX KVM on Linux using <a href="https://github.com/corellium/usbfluxd">usbfluxd</a>!</li>
<li>macOS Monterey VM on Linux!</li>
<li>Folder sharing-</li>
<li>USB passthrough (hotplug too)</li>
<li>SSH enabled (<code>localhost:50922</code>)</li>
<li>VNC enabled (<code>localhost:8888</code>) if using ./vnc version</li>
<li>iMessage security research via <a href="https://github.com/sickcodes/osx-serial-generator">serial number generator!</a></li>
<li>X11 forwarding is enabled</li>
<li>runs on top of QEMU + KVM</li>
<li>supports Big Sur, custom images, Xvfb headless mode</li>
<li>you can clone your container with <code>docker commit</code></li>
</ul>
<h3 dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h3>
<ul dir="auto">
<li>20GB+++ disk space for bare minimum installation (50GB if using Xcode)</li>
<li>virtualization should be enabled in your BIOS settings</li>
<li>a x86_64 kvm-capable host</li>
<li>at least 50 GBs for <code>:auto</code> (half for the base image, half for your runtime image</li>
</ul>
<h3 dir="auto"><a id="user-content-todo" aria-hidden="true" href="#todo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TODO</h3>
<ul dir="auto">
<li>documentation for security researchers</li>
<li>gpu acceleration</li>
<li>support for virt-manager</li>
</ul>
<h2 dir="auto"><a id="user-content-docker" aria-hidden="true" href="#docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Docker</h2>
<p dir="auto">Images built on top of the contents of this repository are also available on <strong>Docker Hub</strong> for convenience: <a href="https://hub.docker.com/r/sickcodes/docker-osx" rel="nofollow">https://hub.docker.com/r/sickcodes/docker-osx</a></p>
<p dir="auto">A comprehensive list of the available Docker images and their intended purpose can be found in the <a href="#instructions">Instructions</a>.</p>
<h2 dir="auto"><a id="user-content-kubernetes" aria-hidden="true" href="#kubernetes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Kubernetes</h2>
<p dir="auto">Docker-OSX supports Kubernetes.</p>
<p dir="auto">Kubernetes Helm Chart &amp; Documentation can be found under the <a href="https://conner.bond/sickcodes/Docker-OSX/blob/master/helm/README.md">helm directory</a>.</p>
<p dir="auto">Thanks <a href="https://github.com/cephasara">cephasara</a> for contributing this major contribution.</p>
<p dir="auto"><a href="https://artifacthub.io/packages/search?repo=docker-osx" rel="nofollow"><img src="https://camo.githubusercontent.com/d58a97e29bfa41dcca2f4da596e8cfee3cb78dbfde355637fdcd02914ea7dc51/68747470733a2f2f696d672e736869656c64732e696f2f656e64706f696e743f75726c3d68747470733a2f2f61727469666163746875622e696f2f62616467652f7265706f7369746f72792f646f636b65722d6f7378" alt="Artifact HUB" data-canonical-src="https://img.shields.io/endpoint?url=https://artifacthub.io/badge/repository/docker-osx"/></a></p>
<h2 dir="auto"><a id="user-content-support" aria-hidden="true" href="#support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Support</h2>
<h3 dir="auto"><a id="user-content-small-questions--issues" aria-hidden="true" href="#small-questions--issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Small questions &amp; issues</h3>
<p dir="auto">Feel free to open an <a href="https://github.com/sickcodes/Docker-OSX/issues/new/choose">issue</a>, should you come across minor issues with running Docker-OSX or have any questions.</p>
<h4 dir="auto"><a id="user-content-resolved-issues" aria-hidden="true" href="#resolved-issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Resolved issues</h4>
<p dir="auto">Before you open an issue, however, please check the <a href="https://github.com/sickcodes/Docker-OSX/issues?q=is%3Aissue+is%3Aclosed">closed issues</a> and confirm that you&#39;re using the latest version of this repository — your issues may have already been resolved! You might also see your answer in our questions and answers section <a href="#more-questions-and-answers">below</a>.</p>
<h3 dir="auto"><a id="user-content-feature-requests-and-updates" aria-hidden="true" href="#feature-requests-and-updates"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Feature requests and updates</h3>
<p dir="auto">Follow <a href="https://twitter.com/sickcodes" rel="nofollow">@sickcodes</a>!</p>
<h3 dir="auto"><a id="user-content-professional-support" aria-hidden="true" href="#professional-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Professional support</h3>
<p dir="auto">For more sophisticated endeavours, we offer the following support services:</p>
<ul dir="auto">
<li>Enterprise support, business support, or casual support.</li>
<li>Custom images, custom scripts, consulting (per hour available!)</li>
<li>One-on-one conversations with you or your development team.</li>
</ul>
<p dir="auto">In case you&#39;re interested, contact <a href="https://twitter.com/sickcodes" rel="nofollow">@sickcodes on Twitter</a> or click <a href="https://sick.codes/contact" rel="nofollow">here</a>.</p>
<h2 dir="auto"><a id="user-content-licensecontributing" aria-hidden="true" href="#licensecontributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License/Contributing</h2>
<p dir="auto">Docker-OSX is licensed under the <a href="https://conner.bond/sickcodes/Docker-OSX/blob/master/LICENSE">GPL v3+</a>. Contributions are welcomed and immensely appreciated. You are in-fact permitted to use Docker-OSX as a tool to create proprietary software.</p>
<h3 dir="auto"><a id="user-content-other-cool-dockerqemu-based-projects" aria-hidden="true" href="#other-cool-dockerqemu-based-projects"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Other cool Docker/QEMU based projects</h3>
<ul dir="auto">
<li><a href="https://github.com/sickcodes/dock-droid">Run Android in a Docker Container with Dock Droid</a></li>
<li><a href="https://github.com/sickcodes/droid-native">Run Android fully native on the host!</a></li>
<li><a href="https://github.com/sickcodes/Docker-eyeOS">Run iOS 12 in a Docker container with Docker-eyeOS</a> - <a href="https://github.com/sickcodes/Docker-eyeOS">https://github.com/sickcodes/Docker-eyeOS</a></li>
<li><a href="https://bluebubbles.app/" rel="nofollow">Run iMessage relayer in Docker with Bluebubbles.app</a> - <a href="https://github.com/BlueBubblesApp/BlueBubbles-Server/wiki/Running-via-Docker">Getting started wiki</a></li>
</ul>
<h2 dir="auto"><a id="user-content-disclaimer" aria-hidden="true" href="#disclaimer"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Disclaimer</h2>
<p dir="auto">If you are serious about Apple Security, and possibly finding 6-figure bug bounties within the Apple Bug Bounty Program, then you&#39;re in the right place! Further notes: <a href="https://sick.codes/is-hackintosh-osx-kvm-or-docker-osx-legal/" rel="nofollow">Is Hackintosh, OSX-KVM, or Docker-OSX legal?</a></p>
<p dir="auto">Product names, logos, brands and other trademarks referred to within this project are the property of their respective trademark holders. These trademark holders are not affiliated with our repository in any capacity. They do not sponsor or endorse this project in any way.</p>

<h2 dir="auto"><a id="user-content-container-images" aria-hidden="true" href="#container-images"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Container images</h2>
<h3 dir="auto"><a id="user-content-already-set-up-or-just-looking-to-make-a-container-quickly-check-out-our-quick-start-or-see-a-bunch-more-use-cases-under-our-container-creation-examples-section" aria-hidden="true" href="#already-set-up-or-just-looking-to-make-a-container-quickly-check-out-our-quick-start-or-see-a-bunch-more-use-cases-under-our-container-creation-examples-section"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Already set up or just looking to make a container quickly? Check out our <a href="#quick-start-docker-osx">quick start</a> or see a bunch more use cases under our <a href="#container-creation-examples">container creation examples</a> section.</h3>
<p dir="auto">There are several different Docker-OSX images available which are suitable for different purposes.</p>
<ul dir="auto">
<li><code>sickcodes/docker-osx:latest</code> - <a href="#quick-start-docker-osx">I just want to try it out.</a></li>
<li><code>sickcodes/docker-osx:latest</code> - <a href="#quick-start-your-own-image-naked-container-image">I want to use Docker-OSX to develop/secure apps in Xcode (sign into Xcode, Transporter)</a></li>
<li><code>sickcodes/docker-osx:naked</code> - <a href="#building-a-headless-container-from-a-custom-image">I want to use Docker-OSX for CI/CD-related purposes (sign into Xcode, Transporter)</a></li>
</ul>
<p dir="auto">Create your personal image using <code>:latest</code> or <code>big-sur</code>. Then, pull the image out the image. Afterwards, you will be able to duplicate that image and import it to the <code>:naked</code> container, in order to revert the container to a previous state repeatedly.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>sickcodes/docker-osx:auto</code> - <a href="#prebuilt-image-with-arbitrary-command-line-arguments">I&#39;m only interested in using the command line (useful for compiling software or using Homebrew headlessly).</a></p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:naked</code> - <a href="#generating-serial-numbers">I need iMessage/iCloud for security research.</a></p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:big-sur</code> - <a href="#quick-start-docker-osx">I want to run Big Sur.</a></p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:monterey</code> - <a href="#quick-start-docker-osx">I want to run Monterey.</a></p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:ventura</code> - <a href="#quick-start-docker-osx">I want to run Ventura.</a></p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:high-sierra</code> - I want to run High Sierra.</p>
</li>
<li>
<p dir="auto"><code>sickcodes/docker-osx:mojave</code> - I want to run Mojave.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-initial-setup" aria-hidden="true" href="#initial-setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Initial setup</h2>
<p dir="auto">Before you do anything else, you will need to turn on hardware virtualization in your BIOS. Precisely how will depend on your particular machine (and BIOS), but it should be straightforward.</p>
<p dir="auto">Then, you&#39;ll need QEMU and some other dependencies on your host:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# ARCH
sudo pacman -S qemu libvirt dnsmasq virt-manager bridge-utils flex bison iptables-nft edk2-ovmf

# UBUNTU DEBIAN
sudo apt install qemu qemu-kvm libvirt-clients libvirt-daemon-system bridge-utils virt-manager libguestfs-tools

# CENTOS RHEL FEDORA
sudo yum install libvirt qemu-kvm"><pre><span><span>#</span> ARCH</span>
sudo pacman -S qemu libvirt dnsmasq virt-manager bridge-utils flex bison iptables-nft edk2-ovmf

<span><span>#</span> UBUNTU DEBIAN</span>
sudo apt install qemu qemu-kvm libvirt-clients libvirt-daemon-system bridge-utils virt-manager libguestfs-tools

<span><span>#</span> CENTOS RHEL FEDORA</span>
sudo yum install libvirt qemu-kvm</pre></div>
<p dir="auto">Then, enable libvirt and load the KVM kernel module:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo systemctl enable --now libvirtd
sudo systemctl enable --now virtlogd

echo 1 | sudo tee /sys/module/kvm/parameters/ignore_msrs

sudo modprobe kvm"><pre>sudo systemctl <span>enable</span> --now libvirtd
sudo systemctl <span>enable</span> --now virtlogd

<span>echo</span> 1 <span>|</span> sudo tee /sys/module/kvm/parameters/ignore_msrs

sudo modprobe kvm</pre></div>
<h3 dir="auto"><a id="user-content-id-like-to-run-docker-osx-on-windows" aria-hidden="true" href="#id-like-to-run-docker-osx-on-windows"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>I&#39;d like to run Docker-OSX on Windows</h3>
<p dir="auto">Running Docker-OSX on Windows is possible using WSL2 (Windows 11 + Windows Subsystem for Linux).</p>
<p dir="auto">You must have Windows 11 installed with build 22000+ (21H2 or higher).</p>
<p dir="auto">First, install WSL on your computer by running this command in an administrator powershell. For more info, look <a href="https://docs.microsoft.com/en-us/windows/wsl/install" rel="nofollow">here</a>.</p>
<p dir="auto">This will install Ubuntu by default.</p>

<p dir="auto">You can confirm WSL2 is enabled using <code>wsl -l -v</code> in PowerShell. To see other distributions that are available, use <code>wsl -l -o</code>.</p>
<p dir="auto">If you have previously installed WSL1, upgrade to WSL 2. Check <a href="https://docs.microsoft.com/en-us/windows/wsl/install#upgrade-version-from-wsl-1-to-wsl-2" rel="nofollow">this link to upgrade from WSL1 to WSL2</a>.</p>
<p dir="auto">After WSL installation, go to <code>C:/Users/&lt;Your_Name&gt;/.wslconfig</code> and add <code>nestedVirtualization=true</code> to the end of the file (If the file doesn&#39;t exist, create it). For more information about the <code>.wslconfig</code> file check <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config#wslconfig" rel="nofollow">this link</a>. Verify that you have selected &#34;Show Hidden Files&#34; and &#34;Show File Extensions&#34; in File Explorer options.
The result should be like this:</p>
<div data-snippet-clipboard-copy-content="[wsl2]
nestedVirtualization=true"><pre><code>[wsl2]
nestedVirtualization=true
</code></pre></div>
<p dir="auto">Go into your WSL distro (Run <code>wsl</code> in powershell) and check if KVM is enabled by using the <code>kvm-ok</code> command. The output should look like this:</p>
<div data-snippet-clipboard-copy-content="INFO: /dev/kvm exists
KVM acceleration can be used"><pre><code>INFO: /dev/kvm exists
KVM acceleration can be used
</code></pre></div>
<p dir="auto">Now download and install <a href="https://docs.docker.com/desktop/windows/install/" rel="nofollow">Docker for Windows</a> if it is not already installed.</p>
<p dir="auto">After installation, go into Settings and check these 2 boxes:</p>
<div data-snippet-clipboard-copy-content="General -&gt; &#34;Use the WSL2 based engine&#34;;
Resources -&gt; WSL Integration -&gt; &#34;Enable integration with my default WSL distro&#34;, "><pre><code>General -&gt; &#34;Use the WSL2 based engine&#34;;
Resources -&gt; WSL Integration -&gt; &#34;Enable integration with my default WSL distro&#34;, 
</code></pre></div>
<p dir="auto">Ensure <code>x11-apps</code> is installed. Use the command <code>sudo apt install x11-apps -y</code> to install it if it isn&#39;t.</p>
<p dir="auto">Finally, there are 3 ways to get video output:</p>
<ul dir="auto">
<li>WSLg: This is the simplest and easiest option to use. There may be some issues such as the keyboard not being fully passed through or seeing a second mouse on the desktop - <a href="https://github.com/microsoft/wslg/issues/376" data-hovercard-type="issue" data-hovercard-url="/microsoft/wslg/issues/376/hovercard">Issue on WSLg</a> - but this option is recommended.</li>
</ul>
<p dir="auto">To use WSLg&#39;s built-in X-11 server, change these two lines in the docker run command to point Docker-OSX to WSLg.</p>
<div data-snippet-clipboard-copy-content="-e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
-v /mnt/wslg/.X11-unix:/tmp/.X11-unix \"><pre><code>-e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
-v /mnt/wslg/.X11-unix:/tmp/.X11-unix \
</code></pre></div>
<p dir="auto">Or try:</p>
<div data-snippet-clipboard-copy-content="-e &#34;DISPLAY=${DISPLAY:-:0}&#34; \
-v /mnt/wslg/.X11-unix:/tmp/.X11-unix \"><pre><code>-e &#34;DISPLAY=${DISPLAY:-:0}&#34; \
-v /mnt/wslg/.X11-unix:/tmp/.X11-unix \
</code></pre></div>
<p dir="auto">For Ubuntu 20.x on Windows, see <a data-error-text="Failed to load title" data-id="3908501" data-permission-text="Title is private" data-url="https://github.com/sickcodes/Docker-OSX/discussions/458" data-hovercard-type="discussion" data-hovercard-url="/sickcodes/Docker-OSX/discussions/458/hovercard" href="https://github.com/sickcodes/Docker-OSX/discussions/458">#458</a></p>
<ul dir="auto">
<li>VNC: See the <a href="#building-a-headless-container-which-allows-insecure-vnc-on-localhost-for-local-use-only">VNC section</a> for more information. You could also add -vnc argument to qemu. Connect to your mac VM via a VNC Client. <a href="https://wiki.archlinux.org/title/QEMU#VNC" rel="nofollow">Here is a how to</a></li>
<li>Desktop Environment: This will give you a full desktop linux experience but it will use a bit more of the computer&#39;s resources. Here is an example guide, but there are other guides that help set up a desktop environment. <a href="https://www.makeuseof.com/tag/linux-desktop-windows-subsystem/" rel="nofollow">DE Example</a></li>
</ul>
<h2 dir="auto"><a id="user-content-additional-boot-instructions-for-when-you-are-creating-your-container" aria-hidden="true" href="#additional-boot-instructions-for-when-you-are-creating-your-container"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Additional boot instructions for when you are <a href="#container-creation-examples">creating your container</a></h2>
<ul dir="auto">
<li>
<p dir="auto">Boot the macOS Base System (Press Enter)</p>
</li>
<li>
<p dir="auto">Click <code>Disk Utility</code></p>
</li>
<li>
<p dir="auto">Erase the BIGGEST disk (around 200gb default), DO NOT MODIFY THE SMALLER DISKS.
-- if you can&#39;t click <code>erase</code>, you may need to reduce the disk size by 1kb</p>
</li>
<li>
<p dir="auto">(optional) Create a partition using the unused space to house the OS and your files if you want to limit the capacity. (For Xcode 12 partition at least 60gb.)</p>
</li>
<li>
<p dir="auto">Click <code>Reinstall macOS</code></p>
</li>
<li>
<p dir="auto">The system may require multiple reboots during installation</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-troubleshooting" aria-hidden="true" href="#troubleshooting"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Troubleshooting</h2>
<h3 dir="auto"><a id="user-content-routine-checks" aria-hidden="true" href="#routine-checks"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Routine checks</h3>
<p dir="auto">This is a great place to start if you are having trouble getting going, especially if you&#39;re not that familiar with Docker just yet.</p>
<p dir="auto">Just looking to make a container quickly? Check out our <a href="#container-creation-examples">container creation examples</a> section.</p>
<p dir="auto">More specific/advanced troubleshooting questions and answers may be found in <a href="#more-questions-and-answers">More Questions and Answers</a>. You should also check out the <a href="https://github.com/sickcodes/Docker-OSX/issues?q=is%3Aissue+is%3Aclosed">closed issues</a>. Someone else might have gotten a question like yours answered already even if you can&#39;t find it in this document!</p>
<h4 dir="auto"><a id="user-content-confirm-that-your-cpu-supports-virtualization" aria-hidden="true" href="#confirm-that-your-cpu-supports-virtualization"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Confirm that your CPU supports virtualization</h4>
<p dir="auto">See <a href="#initial-setup">initial setup</a>.</p>
<h4 dir="auto"><a id="user-content-docker-unknown-server-os-error" aria-hidden="true" href="#docker-unknown-server-os-error"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Docker Unknown Server OS error</h4>
<div dir="auto" data-snippet-clipboard-copy-content="docker: unknown server OS: .
See &#39;docker run --help&#39;."><pre><span>docker: unknown server OS: .</span>
<span>See &#39;docker run --help&#39;.</span></pre></div>
<p dir="auto">This means your docker daemon is not running.</p>
<p dir="auto"><code>pgrep dockerd</code> should return nothing</p>
<p dir="auto">Therefore, you have a few choices.</p>
<p dir="auto"><code>sudo dockerd</code> for foreground Docker usage. I use this.</p>
<p dir="auto">Or</p>
<p dir="auto"><code>sudo systemctl --start dockerd</code> to start dockerd this now.</p>
<p dir="auto">Or</p>
<p dir="auto"><code>sudo systemctl --enable --now dockerd</code> for start dockerd on every reboot, and now.</p>
<h4 dir="auto"><a id="user-content-use-more-cpu-coressmp" aria-hidden="true" href="#use-more-cpu-coressmp"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use more CPU Cores/SMP</h4>
<p dir="auto">Examples:</p>
<p dir="auto"><code>-e EXTRA=&#39;-smp 6,sockets=3,cores=2&#39;</code></p>
<p dir="auto"><code>-e EXTRA=&#39;-smp 8,sockets=4,cores=2&#39;</code></p>
<p dir="auto"><code>-e EXTRA=&#39;-smp 16,sockets=8,cores=2&#39;</code></p>
<p dir="auto">Note, unlike memory, CPU usage is shared. so you can allocate all of your CPU&#39;s to the container.</p>
<h3 dir="auto"><a id="user-content-confirm-your-user-is-part-of-the-the-docker-group-kvm-group-libvirt-group" aria-hidden="true" href="#confirm-your-user-is-part-of-the-the-docker-group-kvm-group-libvirt-group"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Confirm your user is part of the the Docker group, KVM group, libvirt group</h3>
<h4 dir="auto"><a id="user-content-add-yourself-to-the-docker-group" aria-hidden="true" href="#add-yourself-to-the-docker-group"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Add yourself to the Docker group</h4>
<p dir="auto">If you use <code>sudo dockerd</code> or dockerd is controlled by systemd/systemctl, then you must be in the Docker group.
If you are not in the Docker group:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo usermod -aG docker &#34;${USER}&#34;"><pre>sudo usermod -aG docker <span><span>&#34;</span><span>${USER}</span><span>&#34;</span></span></pre></div>
<p dir="auto">and also add yourself to the kvm and libvirt groups if needed:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo usermod -aG libvirt &#34;${USER}&#34;
sudo usermod -aG kvm &#34;${USER}&#34;"><pre>sudo usermod -aG libvirt <span><span>&#34;</span><span>${USER}</span><span>&#34;</span></span>
sudo usermod -aG kvm <span><span>&#34;</span><span>${USER}</span><span>&#34;</span></span></pre></div>
<p dir="auto">See also: <a href="#initial-setup">initial setup</a>.</p>
<h4 dir="auto"><a id="user-content-is-the-docker-daemon-enabled" aria-hidden="true" href="#is-the-docker-daemon-enabled"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Is the docker daemon enabled?</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# run ad hoc
sudo dockerd

# or daemonize it
sudo nohup dockerd &amp;

# enable it in systemd (it will persist across reboots this way)
sudo systemctl enable --now docker

# or just start it as your user with systemd instead of enabling it
systemctl start docker"><pre><span><span>#</span> run ad hoc</span>
sudo dockerd

<span><span>#</span> or daemonize it</span>
sudo nohup dockerd <span>&amp;</span>

<span><span>#</span> enable it in systemd (it will persist across reboots this way)</span>
sudo systemctl <span>enable</span> --now docker

<span><span>#</span> or just start it as your user with systemd instead of enabling it</span>
systemctl start docker</pre></div>
<h2 dir="auto"><a id="user-content-more-questions-and-answers" aria-hidden="true" href="#more-questions-and-answers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More Questions and Answers</h2>
<p dir="auto">Big thank you to our contributors who have worked out almost every conceivable issue so far!</p>
<p dir="auto"><a href="https://github.com/sickcodes/Docker-OSX/blob/master/CREDITS.md">https://github.com/sickcodes/Docker-OSX/blob/master/CREDITS.md</a></p>
<h3 dir="auto"><a id="user-content-start-the-same-container-later-persistent-disk" aria-hidden="true" href="#start-the-same-container-later-persistent-disk"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Start the same container later (persistent disk)</h3>
<p dir="auto">Created a container with <code>docker run</code> and want to reuse the underlying image again later?</p>
<p dir="auto">NB: see <a href="#container-creation-examples">container creation examples</a> first for how to get to the point where this is applicable.</p>
<p dir="auto">This is for when you want to run the SAME container again later. You may need to use <code>docker commit</code> to save your container before you can reuse it. Check if your container is persisted with <code>docker ps --all</code>.</p>
<p dir="auto">If you don&#39;t run this you will have a new image every time.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# look at your recent containers and copy the CONTAINER ID
docker ps --all

# docker start the container ID
docker start -ai abc123xyz567

# if you have many containers, you can try automate it with filters like this
# docker ps --all --filter &#34;ancestor=sickcodes/docker-osx&#34;
# for locally tagged/built containers
# docker ps --all --filter &#34;ancestor=docker-osx&#34;
"><pre><span><span>#</span> look at your recent containers and copy the CONTAINER ID</span>
docker ps --all

<span><span>#</span> docker start the container ID</span>
docker start -ai abc123xyz567

<span><span>#</span> if you have many containers, you can try automate it with filters like this</span>
<span><span>#</span> docker ps --all --filter &#34;ancestor=sickcodes/docker-osx&#34;</span>
<span><span>#</span> for locally tagged/built containers</span>
<span><span>#</span> docker ps --all --filter &#34;ancestor=docker-osx&#34;</span>
</pre></div>
<p dir="auto">You can also pull the <code>.img</code> file out of the container, which is stored in <code>/var/lib/docker</code>, and supply it as a runtime argument to the <code>:naked</code> Docker image.</p>
<p dir="auto">See also: <a href="https://github.com/sickcodes/Docker-OSX/issues/197" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/197/hovercard">here</a>.</p>
<h3 dir="auto"><a id="user-content-i-have-used-docker-osx-before-and-want-to-restart-a-container-that-starts-automatically" aria-hidden="true" href="#i-have-used-docker-osx-before-and-want-to-restart-a-container-that-starts-automatically"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>I have used Docker-OSX before and want to restart a container that starts automatically</h3>
<p dir="auto">Containers that use <code>sickcodes/docker-osx:auto</code> can be stopped while being started.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# find last container
docker ps -a

# docker start old container with -i for interactive, -a for attach STDIN/STDOUT
docker start -ai -i &lt;Replace this with your ID&gt;"><pre><span><span>#</span> find last container</span>
docker ps -a

<span><span>#</span> docker start old container with -i for interactive, -a for attach STDIN/STDOUT</span>
docker start -ai -i <span>&lt;</span>Replace this with your ID<span>&gt;</span></pre></div>
<h3 dir="auto"><a id="user-content-libgtk-errors-connection-refused" aria-hidden="true" href="#libgtk-errors-connection-refused"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>LibGTK errors &#34;connection refused&#34;</h3>
<p dir="auto">You may see one or more libgtk-related errors if you do not have everything set up for hardware virtualisation yet. If you have not yet done so, check out the <a href="#initial-setup">initial setup</a> section and the <a href="#routine-checks">routine checks</a> section as you may have missed a setup step or may not have all the needed Docker dependencies ready to go.</p>
<p dir="auto">See also: <a href="https://github.com/sickcodes/Docker-OSX/issues/174" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/174/hovercard">here</a>.</p>
<h4 dir="auto"><a id="user-content-permissions-denied-error" aria-hidden="true" href="#permissions-denied-error"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Permissions denied error</h4>
<p dir="auto">If you have not yet set up xhost, try the following:</p>
<div dir="auto" data-snippet-clipboard-copy-content="echo $DISPLAY

# ARCH
sudo pacman -S xorg-xhost

# UBUNTU DEBIAN
sudo apt install x11-xserver-utils

# CENTOS RHEL FEDORA
sudo yum install xorg-x11-server-utils

# then run
xhost +
"><pre><span>echo</span> <span>$DISPLAY</span>

<span><span>#</span> ARCH</span>
sudo pacman -S xorg-xhost

<span><span>#</span> UBUNTU DEBIAN</span>
sudo apt install x11-xserver-utils

<span><span>#</span> CENTOS RHEL FEDORA</span>
sudo yum install xorg-x11-server-utils

<span><span>#</span> then run</span>
xhost +
</pre></div>
<h3 dir="auto"><a id="user-content-ram-over-allocation" aria-hidden="true" href="#ram-over-allocation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>RAM over-allocation</h3>
<p dir="auto">You cannot allocate more RAM than your machine has. The default is 3 Gigabytes: <code>-e RAM=3</code>.</p>
<p dir="auto">If you are trying to allocate more RAM to the container than you currently have available, you may see an error like the following: <code>cannot set up guest memory &#39;pc.ram&#39;: Cannot allocate memory</code>. See also: <a href="https://github.com/sickcodes/Docker-OSX/issues/188" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/188/hovercard">here</a>, <a href="https://github.com/sickcodes/Docker-OSX/pull/189" data-hovercard-type="pull_request" data-hovercard-url="/sickcodes/Docker-OSX/pull/189/hovercard">here</a>.</p>
<p dir="auto">For example (below) the <code>buff/cache</code> already contains 20 Gigabytes of allocated RAM:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[user@hostname ~]$ free -mh
               total        used        free      shared  buff/cache   available
Mem:            30Gi       3.5Gi       7.0Gi       728Mi        20Gi        26Gi
Swap:           11Gi          0B        11Gi"><pre><span>[user@hostname ~]</span>$ <span>free -mh</span>
<span>               total        used        free      shared  buff/cache   available</span>
<span>Mem:            30Gi       3.5Gi       7.0Gi       728Mi        20Gi        26Gi</span>
<span>Swap:           11Gi          0B        11Gi</span></pre></div>
<p dir="auto">Clear the buffer and the cache:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo tee /proc/sys/vm/drop_caches &lt;&lt;&lt; 3"><pre>sudo tee /proc/sys/vm/drop_caches <span>&lt;&lt;&lt;</span> <span>3</span></pre></div>
<p dir="auto">Now check the RAM again:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[user@hostname ~]$ free -mh
               total        used        free      shared  buff/cache   available
Mem:            30Gi       3.3Gi        26Gi       697Mi       1.5Gi        26Gi
Swap:           11Gi          0B        11Gi"><pre><span>[user@hostname ~]</span>$ <span>free -mh</span>
<span>               total        used        free      shared  buff/cache   available</span>
<span>Mem:            30Gi       3.3Gi        26Gi       697Mi       1.5Gi        26Gi</span>
<span>Swap:           11Gi          0B        11Gi</span></pre></div>
<h3 dir="auto"><a id="user-content-pulseaudio" aria-hidden="true" href="#pulseaudio"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>PulseAudio</h3>
<h4 dir="auto"><a id="user-content-use-pulseaudio-for-sound" aria-hidden="true" href="#use-pulseaudio-for-sound"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use PulseAudio for sound</h4>
<p dir="auto">Note: <a href="https://github.com/acidanthera/AppleALC">AppleALC</a>, <a href="https://dortania.github.io/OpenCore-Post-Install/universal/audio.html" rel="nofollow"><code>alcid</code></a> and <a href="https://github.com/chris1111/VoodooHDA-OC">VoodooHDA-OC</a> do not have <a href="https://osy.gitbook.io/hac-mini-guide/details/hda-fix#hda-codec" rel="nofollow">codec support</a>. However, <a href="https://github.com/vulgo/IORegistryExplorer">IORegistryExplorer</a> does show the controller component working.</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v &#34;/run/user/$(id -u)/pulse/native:/tmp/pulseaudio.socket&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    sickcodes/docker-osx"><pre>docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v <span><span>&#34;</span>/run/user/<span><span>$(</span>id -u<span>)</span></span>/pulse/native:/tmp/pulseaudio.socket<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    sickcodes/docker-osx</pre></div>
<h4 dir="auto"><a id="user-content-pulseaudio-debugging" aria-hidden="true" href="#pulseaudio-debugging"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>PulseAudio debugging</h4>
<div dir="auto" data-snippet-clipboard-copy-content="docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v &#34;/run/user/$(id -u)/pulse/native:/tmp/pulseaudio.socket&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e PULSE_SERVER=unix:/tmp/pulseaudio.socket \
    sickcodes/docker-osx pactl list"><pre>docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v <span><span>&#34;</span>/run/user/<span><span>$(</span>id -u<span>)</span></span>/pulse/native:/tmp/pulseaudio.socket<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e PULSE_SERVER=unix:/tmp/pulseaudio.socket \
    sickcodes/docker-osx pactl list</pre></div>
<h4 dir="auto"><a id="user-content-pulseaudio-with-wslg" aria-hidden="true" href="#pulseaudio-with-wslg"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>PulseAudio with WSLg</h4>
<div dir="auto" data-snippet-clipboard-copy-content="docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v /mnt/wslg/runtime-dir/pulse/native:/tmp/pulseaudio.socket \
    -v /mnt/wslg/.X11-unix:/tmp/.X11-unix \
    sickcodes/docker-osx"><pre>docker run \
    --device /dev/kvm \
    -e AUDIO_DRIVER=pa,server=unix:/tmp/pulseaudio.socket \
    -v /mnt/wslg/runtime-dir/pulse/native:/tmp/pulseaudio.socket \
    -v /mnt/wslg/.X11-unix:/tmp/.X11-unix \
    sickcodes/docker-osx</pre></div>
<h3 dir="auto"><a id="user-content-forward-additional-ports-nginx-hosting-example" aria-hidden="true" href="#forward-additional-ports-nginx-hosting-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Forward additional ports (nginx hosting example)</h3>
<p dir="auto">It&#39;s possible to forward additional ports depending on your needs. In this example, we&#39;ll use Mac OSX to host nginx:</p>
<div data-snippet-clipboard-copy-content="host:10023 &lt;-&gt; 10023:container:10023 &lt;-&gt; 80:guest"><pre><code>host:10023 &lt;-&gt; 10023:container:10023 &lt;-&gt; 80:guest
</code></pre></div>
<p dir="auto">On the host machine, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e ADDITIONAL_PORTS=&#39;hostfwd=tcp::10023-:80,&#39; \
    -p 10023:10023 \
    sickcodes/docker-osx:auto"><pre>docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e ADDITIONAL_PORTS=<span><span>&#39;</span>hostfwd=tcp::10023-:80,<span>&#39;</span></span> \
    -p 10023:10023 \
    sickcodes/docker-osx:auto</pre></div>
<p dir="auto">In a Terminal session running the container, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="/bin/bash -c &#34;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&#34;

brew install nginx
sudo sed -i -e &#39;s/8080/80/&#39; /usr/local/etc/nginx/nginx.confcd
# sudo nginx -s stop
sudo nginx"><pre>/bin/bash -c <span><span>&#34;</span><span><span>$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span>)</span></span><span>&#34;</span></span>

brew install nginx
sudo sed -i -e <span><span>&#39;</span>s/8080/80/<span>&#39;</span></span> /usr/local/etc/nginx/nginx.confcd
<span><span>#</span> sudo nginx -s stop</span>
sudo nginx</pre></div>
<p dir="auto"><strong>nginx should now be reachable on port 10023.</strong></p>
<p dir="auto">Additionally, you can string multiple statements together, for example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="    -e ADDITIONAL_PORTS=&#39;hostfwd=tcp::10023-:80,hostfwd=tcp::10043-:443,&#39;
    -p 10023:10023 \
    -p 10043:10043 \"><pre>    -e ADDITIONAL_PORTS=<span><span>&#39;</span>hostfwd=tcp::10023-:80,hostfwd=tcp::10043-:443,<span>&#39;</span></span>
    -p 10023:10023 \
    -p 10043:10043 \</pre></div>
<h3 dir="auto"><a id="user-content-bridged-networking" aria-hidden="true" href="#bridged-networking"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Bridged networking</h3>
<p dir="auto">You might not need to do anything with the default setup to enable internet connectivity from inside the container. Additionally, <code>curl</code> may work even if <code>ping</code> doesn&#39;t.</p>
<p dir="auto">See discussion <a href="https://github.com/sickcodes/Docker-OSX/issues/177" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/177/hovercard">here</a> and <a href="https://github.com/sickcodes/Docker-OSX/issues/72" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/72/hovercard">here</a> and <a href="https://github.com/sickcodes/Docker-OSX/issues/88" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/88/hovercard">here</a>.</p>
<h3 dir="auto"><a id="user-content-enable-ipv4-forwarding-for-bridged-network-connections-for-remote-installations" aria-hidden="true" href="#enable-ipv4-forwarding-for-bridged-network-connections-for-remote-installations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enable IPv4 forwarding for bridged network connections for remote installations</h3>
<p dir="auto">This is not required for LOCAL installations.</p>
<p dir="auto">Additionally note it may <a href="https://sick.codes/cve-2020-15590/" rel="nofollow">cause the host to leak your IP, even if you&#39;re using a VPN in the container</a>.</p>
<p dir="auto">However, if you&#39;re trying to connect to an instance of Docker-OSX remotely (e.g. an instance of Docker-OSX hosted in a datacenter), this may improve your performance:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# enable for current session
sudo sysctl -w net.ipv4.ip_forward=1

# OR
# sudo tee /proc/sys/net/ipv4/ip_forward &lt;&lt;&lt; 1

# enable permanently
sudo touch /etc/sysctl.conf
sudo tee -a /etc/sysctl.conf &lt;&lt;EOF
net.ipv4.ip_forward = 1
EOF

# or edit manually with the editor of your choice
nano /etc/sysctl.conf || vi /etc/sysctl.conf || vim /etc/sysctl.conf

# now reboot"><pre><span><span>#</span> enable for current session</span>
sudo sysctl -w net.ipv4.ip_forward=1

<span><span>#</span> OR</span>
<span><span>#</span> sudo tee /proc/sys/net/ipv4/ip_forward &lt;&lt;&lt; 1</span>

<span><span>#</span> enable permanently</span>
sudo touch /etc/sysctl.conf
sudo tee -a /etc/sysctl.conf <span><span>&lt;&lt;</span><span>EOF</span></span>
<span>net.ipv4.ip_forward = 1</span>
<span><span>EOF</span></span>

<span><span>#</span> or edit manually with the editor of your choice</span>
nano /etc/sysctl.conf <span>||</span> vi /etc/sysctl.conf <span>||</span> vim /etc/sysctl.conf

<span><span>#</span> now reboot</span></pre></div>
<h2 dir="auto">Share folder with Docker-OSX QEMU macOS</h2>
<p dir="auto">Sharing a folder with guest is quite simple.</p>
<p dir="auto">Your folder, will go to /mnt/hostshare inside the Arch container which is then passed over QEMU.</p>
<p dir="auto">Then mount using <code>sudo -S mount_9p hostshare</code> from inside the mac.</p>
<p dir="auto">For example,</p>

<div dir="auto" data-snippet-clipboard-copy-content="    -v &#34;${FOLDER}:/mnt/hostshare&#34; \
    -e EXTRA=&#34;-virtfs local,path=/mnt/hostshare,mount_tag=hostshare,security_model=passthrough,id=hostshare&#34; \"><pre>    -v <span><span>&#34;</span><span>${FOLDER}</span>:/mnt/hostshare<span>&#34;</span></span> \
    -e EXTRA=<span><span>&#34;</span>-virtfs local,path=/mnt/hostshare,mount_tag=hostshare,security_model=passthrough,id=hostshare<span>&#34;</span></span> \</pre></div>
<p dir="auto">Full example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# stat mac_hdd_ng.img
SHARE=~/somefolder

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -v &#34;${PWD}/mac_hdd_ng.img:/home/arch/OSX-KVM/mac_hdd_ng.img&#34; \
    -v &#34;${SHARE}:/mnt/hostshare&#34; \
    -e EXTRA=&#34;-virtfs local,path=/mnt/hostshare,mount_tag=hostshare,security_model=passthrough,id=hostshare&#34; \
    sickcodes/docker-osx:latest

# !!! Open Terminal inside macOS and run the following command to mount the virtual file system
# sudo -S mount_9p hostshare
"><pre><span><span>#</span> stat mac_hdd_ng.img</span>
SHARE=<span>~</span>/somefolder

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng.img:/home/arch/OSX-KVM/mac_hdd_ng.img<span>&#34;</span></span> \
    -v <span><span>&#34;</span><span>${SHARE}</span>:/mnt/hostshare<span>&#34;</span></span> \
    -e EXTRA=<span><span>&#34;</span>-virtfs local,path=/mnt/hostshare,mount_tag=hostshare,security_model=passthrough,id=hostshare<span>&#34;</span></span> \
    sickcodes/docker-osx:latest

<span><span>#</span> !!! Open Terminal inside macOS and run the following command to mount the virtual file system</span>
<span><span>#</span> sudo -S mount_9p hostshare</span>
</pre></div>
<h3 dir="auto">Share Linux NFS Drive into macOS</h3>
<p dir="auto">To share a folder using NFS, setup a folder for on the host machine, for example, <code>/srv/nfs/share</code> and then append to <code>/etc/exports</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="/srv/nfs/share      127.0.0.1/0(insecure,rw,all_squash,anonuid=1000,anongid=985,no_subtree_check)"><pre>/srv/nfs/share      127.0.0.1/0(insecure,rw,all_squash,anonuid=1000,anongid=985,no_subtree_check)</pre></div>
<p dir="auto">You may need to reload exports now, which will begin sharing that directory.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# reload shared folders
sudo exportfs -arv"><pre><span><span>#</span> reload shared folders</span>
sudo exportfs -arv</pre></div>
<p dir="auto"><a href="https://serverfault.com/questions/716350/mount-nfs-volume-on-ubuntu-linux-server-from-macos-client" rel="nofollow">Source &amp; Explanation</a></p>
<p dir="auto">Give permissions on the shared folder for the <code>anonuid</code> and <code>anongid</code>, where <code>anonuid</code> and <code>anongid</code> matches that of your linux user; <code>id -u</code></p>
<p dir="auto"><code>id -u ; id -g</code> will print <code>userid:groupid</code></p>
<div data-snippet-clipboard-copy-content="chown 1000:985 /srv/nfs/share
chmod u+rwx /srv/nfs/share"><pre><code>chown 1000:985 /srv/nfs/share
chmod u+rwx /srv/nfs/share
</code></pre></div>
<p dir="auto">Start the Docker-OSX container with the additional flag <code>--network host</code></p>
<p dir="auto">Create and mount the nfs folder from the mac terminal:</p>
<div data-snippet-clipboard-copy-content="mkdir -p ~/mnt
sudo mount_nfs -o locallocks 10.0.2.2:/srv/nfs/share ~/mnt"><pre><code>mkdir -p ~/mnt
sudo mount_nfs -o locallocks 10.0.2.2:/srv/nfs/share ~/mnt
</code></pre></div>
<h3 dir="auto">Share USB Drive into macOS over QEMU</h3>
<h2 dir="auto"><a id="user-content-mount-usb-drive-hotplughot-plug-usb" aria-hidden="true" href="#mount-usb-drive-hotplughot-plug-usb"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mount USB Drive (Hotplug/Hot Plug USB)</h2>
<p dir="auto">Start your container.</p>
<p dir="auto">Pick a port, for example, <code>7700</code>.</p>
<p dir="auto"><code>lsusb</code> to get <code>vid:pid</code></p>
<p dir="auto">On Linux:
<code>sudo usbredirserver -p 7700 1e3d:2096</code></p>
<p dir="auto">Now, in the Docker window hit Enter to see the <code>(qemu)</code> console.</p>
<p dir="auto">You can add/remove the disk using commands like this, even once the machine is started:</p>
<p dir="auto"><code>chardev-add socket,id=usbredirchardev1,port=7700,host=172.17.0.1</code></p>
<p dir="auto"><code>device_add usb-redir,chardev=usbredirchardev1,id=usbredirdev1,debug=4</code></p>
<h2 dir="auto"><a id="user-content-mount-usb-drive-inside-macos-at-boot-docker-osx" aria-hidden="true" href="#mount-usb-drive-inside-macos-at-boot-docker-osx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mount USB Drive inside macOS at boot Docker OSX</h2>
<div dir="auto" data-snippet-clipboard-copy-content="PORT=7700
IP_ADDRESS=172.17.0.1

-e EXTRA=&#34;-chardev socket,id=usbredirchardev1,port=${PORT},host=${IP_ADDRESS} -device usb-redir,chardev=usbredirchardev1,id=usbredirdev1,debug=4&#34; \`"><pre>PORT=7700
IP_ADDRESS=172.17.0.1

-e EXTRA=<span><span>&#34;</span>-chardev socket,id=usbredirchardev1,port=<span>${PORT}</span>,host=<span>${IP_ADDRESS}</span> -device usb-redir,chardev=usbredirchardev1,id=usbredirdev1,debug=4<span>&#34;</span></span> <span>\`</span></pre></div>
<h3 dir="auto"><a id="user-content-fedora-enable-internet-connectivity-with-a-bridged-network" aria-hidden="true" href="#fedora-enable-internet-connectivity-with-a-bridged-network"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fedora: enable internet connectivity with a bridged network</h3>
<p dir="auto">Fedora&#39;s default firewall settings may prevent Docker&#39;s network interface from reaching the internet. In order to reoslve this, you will need to whitelist the interface in your firewall:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Set the docker0 bridge to the trusted zone
sudo firewall-cmd --permanent --zone=trusted --add-interface=docker0
sudo firewall-cmd --reload"><pre><span><span>#</span> Set the docker0 bridge to the trusted zone</span>
sudo firewall-cmd --permanent --zone=trusted --add-interface=docker0
sudo firewall-cmd --reload</pre></div>
<h3 dir="auto"><a id="user-content-nested-hardware-virtualization" aria-hidden="true" href="#nested-hardware-virtualization"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Nested Hardware Virtualization</h3>
<p dir="auto">Check if your machine has hardware virtualization enabled:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo tee /sys/module/kvm/parameters/ignore_msrs &lt;&lt;&lt; 1

egrep -c &#39;(svm|vmx)&#39; /proc/cpuinfo"><pre>sudo tee /sys/module/kvm/parameters/ignore_msrs <span>&lt;&lt;&lt;</span> <span>1</span>

egrep -c <span><span>&#39;</span>(svm|vmx)<span>&#39;</span></span> /proc/cpuinfo</pre></div>
<h3 dir="auto"><a id="user-content-virtual-network-adapters" aria-hidden="true" href="#virtual-network-adapters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Virtual network adapters</h3>
<h4 dir="auto"><a id="user-content-fast-internet-connectivity" aria-hidden="true" href="#fast-internet-connectivity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Fast internet connectivity</h4>
<p dir="auto"><code>-e NETWORKING=vmxnet3</code></p>
<h4 dir="auto"><a id="user-content-slow-internet-connectivity" aria-hidden="true" href="#slow-internet-connectivity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Slow internet connectivity</h4>
<p dir="auto"><code>-e NETWORKING=e1000-82545em</code></p>
<h3 dir="auto"><a id="user-content-cicd-related-improvements" aria-hidden="true" href="#cicd-related-improvements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CI/CD Related Improvements</h3>
<h4 dir="auto"><a id="user-content-tips-for-reducing-the-size-of-the-image" aria-hidden="true" href="#tips-for-reducing-the-size-of-the-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tips for reducing the size of the image</h4>
<ul dir="auto">
<li>Start the container as usual, and remove unnecessary files. A useful way
to do this is to use <code>du -sh *</code> starting from the <code>/</code> directory, and find
large directories where files can be removed. E.g. unnecessary cached files,
Xcode platforms, etc.</li>
<li>Once you are satisfied with the amount of free space, enable trim with <code>sudo trimforce enable</code>, and reboot.</li>
<li>Zero out the empty space on the disk with <code>dd if=/dev/zero of=./empty &amp;&amp; rm -f empty</code></li>
<li>Shut down the VM and copy out the qcow image with <code>docker cp stoppedcontainer:/home/arch/OSX-KVM/mac_hdd_ng.img .</code></li>
<li>Run <code>qemu-img check -r all mac_hdd_ng.img</code> to fix any errors.</li>
<li>Run <code>qemu-img convert -O qcow2 mac_hdd_ng.img deduped.img</code> and check for errors again</li>
<li><strong>OPTIONAL:</strong> Run <code>qemu-img convert -c -O qcow2 deduped.img compressed.img</code> to further compress the image. This may reduce the runtime speed though, but it should reduce the size by roughly 25%.</li>
<li>Check for errors again, and build a fresh docker image. E.g. with this Dockerfile</li>
</ul>
<div data-snippet-clipboard-copy-content="FROM sickcodes/docker-osx
USER arch
COPY --chown=arch ./deduped.img /home/arch/OSX-KVM/mac_hdd_ng.img"><pre><code>FROM sickcodes/docker-osx
USER arch
COPY --chown=arch ./deduped.img /home/arch/OSX-KVM/mac_hdd_ng.img
</code></pre></div>
<h3 dir="auto"><a id="user-content-run-docker-osx-headlessly-with-telnet" aria-hidden="true" href="#run-docker-osx-headlessly-with-telnet"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run Docker-OSX headlessly with Telnet</h3>
<p dir="auto">First make sure <a href="#autoboot-into-osx-after-youve-installed-everything">autoboot is enabled</a></p>
<p dir="auto">Next, you will want to set up SSH to be automatically started.</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo systemsetup -setremotelogin on"><pre>sudo systemsetup -setremotelogin on</pre></div>
<p dir="auto">Make sure to commit the new docker image and save it, or rebuild as described in the <a href="#how-to-reduce-the-size-of-the-image">section on reducing disk space</a>.</p>
<p dir="auto">Then run it with these arguments.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run with the -nographic flag, and enable a telnet interface
  docker run \
    --device /dev/kvm \
    -p 50922:10022 \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e EXTRA=&#34;-monitor telnet::45454,server,nowait -nographic -serial null&#34; \
    mycustomimage"><pre><span><span>#</span> Run with the -nographic flag, and enable a telnet interface</span>
  docker run \
    --device /dev/kvm \
    -p 50922:10022 \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e EXTRA=<span><span>&#34;</span>-monitor telnet::45454,server,nowait -nographic -serial null<span>&#34;</span></span> \
    mycustomimage</pre></div>
<h3 dir="auto"><a id="user-content-what-mirrors-are-appropriate-to-use-to-build-docker-osx-locally" aria-hidden="true" href="#what-mirrors-are-appropriate-to-use-to-build-docker-osx-locally"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What mirrors are appropriate to use to build Docker-OSX locally?</h3>
<p dir="auto">If you are building Docker-OSX locally, you&#39;ll probably want to use Arch Linux&#39;s mirrors.</p>
<p dir="auto">Mirror locations can be found here (uses two-letter country codes): <a href="https://archlinux.org/mirrorlist/all/" rel="nofollow">https://archlinux.org/mirrorlist/all/</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="docker build -t docker-osx:latest \
    --build-arg RANKMIRRORS=true \
    --build-arg MIRROR_COUNTRY=US \
    --build-arg MIRROR_COUNT=10 \
    --build-arg SHORTNAME=catalina \
    --build-arg SIZE=200G ."><pre>docker build -t docker-osx:latest \
    --build-arg RANKMIRRORS=true \
    --build-arg MIRROR_COUNTRY=US \
    --build-arg MIRROR_COUNT=10 \
    --build-arg SHORTNAME=catalina \
    --build-arg SIZE=200G <span>.</span></pre></div>
<h3 dir="auto"><a id="user-content-custom-qemu-arguments-passthrough-devices" aria-hidden="true" href="#custom-qemu-arguments-passthrough-devices"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom QEMU Arguments (passthrough devices)</h3>
<p dir="auto">Pass any devices/directories to the Docker container &amp; the QEMU arguments using the handy runtime argument provider option <code>-e EXTRA=</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# example customizations
docker run \
    -e RAM=4 \
    -e SMP=4 \
    -e CORES=4 \
    -e EXTRA=&#39;-usb -device usb-host,hostbus=1,hostaddr=8&#39; \
    -e INTERNAL_SSH_PORT=23 \
    -e MAC_ADDRESS=&#34;$(xxd -c1 -p -l 6 /dev/urandom | tr &#39;\n&#39; &#39;:&#39; | cut -c1-17)&#34; \
    -e AUDIO_DRIVER=alsa \
    -e IMAGE_PATH=/image \
    -e SCREEN_SHARE_PORT=5900 \
    -e DISPLAY=:0 \
    -e NETWORKING=vmxnet3 \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    docker-osx:latest"><pre><span><span>#</span> example customizations</span>
docker run \
    -e RAM=4 \
    -e SMP=4 \
    -e CORES=4 \
    -e EXTRA=<span><span>&#39;</span>-usb -device usb-host,hostbus=1,hostaddr=8<span>&#39;</span></span> \
    -e INTERNAL_SSH_PORT=23 \
    -e MAC_ADDRESS=<span><span>&#34;</span><span><span>$(</span>xxd -c1 -p -l 6 /dev/urandom <span>|</span> tr <span><span>&#39;</span>\n<span>&#39;</span></span> <span><span>&#39;</span>:<span>&#39;</span></span> <span>|</span> cut -c1-17<span>)</span></span><span>&#34;</span></span> \
    -e AUDIO_DRIVER=alsa \
    -e IMAGE_PATH=/image \
    -e SCREEN_SHARE_PORT=5900 \
    -e DISPLAY=:0 \
    -e NETWORKING=vmxnet3 \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    docker-osx:latest</pre></div>
<h3 dir="auto"><a id="user-content-generating-serial-numbers" aria-hidden="true" href="#generating-serial-numbers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Generating serial numbers</h3>
<p dir="auto">Generate serial numbers in <code>./custom</code> OR make docker generate them at runtime (see below).</p>
<p dir="auto">At any time, verify your serial number before logging into iCloud, etc.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# this is a quick way to check your serial number via cli inside OSX
ioreg -l | grep IOPlatformSerialNumber

# test some commands
sshpass -p &#39;alpine&#39; ssh user@localhost -p 50922 &#39;ping google.com&#39;

# check your serial number
sshpass -p &#39;alpine&#39; ssh user@localhost -p 50922 &#39;ioreg -l | grep IOPlatformSerialNumber&#39;"><pre><span><span>#</span> this is a quick way to check your serial number via cli inside OSX</span>
ioreg -l <span>|</span> grep IOPlatformSerialNumber

<span><span>#</span> test some commands</span>
sshpass -p <span><span>&#39;</span>alpine<span>&#39;</span></span> ssh user@localhost -p 50922 <span><span>&#39;</span>ping google.com<span>&#39;</span></span>

<span><span>#</span> check your serial number</span>
sshpass -p <span><span>&#39;</span>alpine<span>&#39;</span></span> ssh user@localhost -p 50922 <span><span>&#39;</span>ioreg -l | grep IOPlatformSerialNumber<span>&#39;</span></span></pre></div>
<h4 dir="auto"><a id="user-content-getting-started-with-serial-numbers" aria-hidden="true" href="#getting-started-with-serial-numbers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting started with serial numbers</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# ARCH
pacman -S libguestfs

# UBUNTU DEBIAN
apt install libguestfs -y

# RHEL FEDORA CENTOS
yum install libguestfs -y"><pre><span><span>#</span> ARCH</span>
pacman -S libguestfs

<span><span>#</span> UBUNTU DEBIAN</span>
apt install libguestfs -y

<span><span>#</span> RHEL FEDORA CENTOS</span>
yum install libguestfs -y</pre></div>
<p dir="auto">Inside the <code>./custom</code> folder you will find <code>4</code> scripts.</p>
<ul dir="auto">
<li><code>config-nopicker-custom.plist</code></li>
<li><code>opencore-image-ng.sh</code></li>
</ul>
<p dir="auto">These two files are from OSX-KVM.</p>
<p dir="auto">You don&#39;t need to touch these two files.</p>
<p dir="auto">The config.plist has 5 values replaced with placeholders. <a href="https://github.com/sickcodes/Docker-OSX/blob/master/custom/config-nopicker-custom.plist#L705">Click here to see those values for no reason.</a></p>
<ul dir="auto">
<li><code>generate-unique-machine-values.sh</code>
This script will generate serial numbers, with Mac Addresses, plus output to CSV/TSV, plus make a <code>bootdisk image</code>.</li>
</ul>
<p dir="auto">You can create hundreds, <code>./custom/generate-unique-machine-values.sh --help</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="./custom/generate-unique-machine-values.sh \
    --count 1 \
    --tsv ./serial.tsv \
    --bootdisks \
    --output-bootdisk OpenCore.qcow2 \
    --output-env source.env.sh"><pre>./custom/generate-unique-machine-values.sh \
    --count 1 \
    --tsv ./serial.tsv \
    --bootdisks \
    --output-bootdisk OpenCore.qcow2 \
    --output-env source.env.sh</pre></div>
<p dir="auto">Or if you have some specific serial numbers...</p>
<ul dir="auto">
<li><code>generate-specific-bootdisk.sh</code></li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="generate-specific-bootdisk.sh \
    --model &#34;${DEVICE_MODEL}&#34; \
    --serial &#34;${SERIAL}&#34; \
    --board-serial &#34;${BOARD_SERIAL}&#34; \
    --uuid &#34;${UUID}&#34; \
    --mac-address &#34;${MAC_ADDRESS}&#34; \
    --output-bootdisk OpenCore-nopicker.qcow2"><pre>generate-specific-bootdisk.sh \
    --model <span><span>&#34;</span><span>${DEVICE_MODEL}</span><span>&#34;</span></span> \
    --serial <span><span>&#34;</span><span>${SERIAL}</span><span>&#34;</span></span> \
    --board-serial <span><span>&#34;</span><span>${BOARD_SERIAL}</span><span>&#34;</span></span> \
    --uuid <span><span>&#34;</span><span>${UUID}</span><span>&#34;</span></span> \
    --mac-address <span><span>&#34;</span><span>${MAC_ADDRESS}</span><span>&#34;</span></span> \
    --output-bootdisk OpenCore-nopicker.qcow2</pre></div>
<h4 dir="auto"><a id="user-content-this-example-generates-a-random-set-of-serial-numbers-at-runtime-headlessly" aria-hidden="true" href="#this-example-generates-a-random-set-of-serial-numbers-at-runtime-headlessly"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>This example generates a random set of serial numbers at runtime, headlessly</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# proof of concept only, generates random serial numbers, headlessly, and quits right after.
docker run --rm -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_UNIQUE=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    sickcodes/docker-osx:auto

# -e OSX_COMMANDS=&#39;ioreg -l | grep IOPlatformSerialNumber&#39; \"><pre><span><span>#</span> proof of concept only, generates random serial numbers, headlessly, and quits right after.</span>
docker run --rm -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_UNIQUE=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    sickcodes/docker-osx:auto

<span><span>#</span> -e OSX_COMMANDS=&#39;ioreg -l | grep IOPlatformSerialNumber&#39; \</span></pre></div>
<h4 dir="auto"><a id="user-content-this-example-generates-a-specific-set-of-serial-numbers-at-runtime" aria-hidden="true" href="#this-example-generates-a-specific-set-of-serial-numbers-at-runtime"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>This example generates a specific set of serial numbers at runtime</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# run the same as above 17gb auto image, with SSH, with nopicker, and save the bootdisk for later.
# you don&#39;t need to save the bootdisk IF you supply specific serial numbers!

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    -e SERIAL=&#34;C02TW0WAHX87&#34; \
    -e BOARD_SERIAL=&#34;C027251024NJG36UE&#34; \
    -e UUID=&#34;5CCB366D-9118-4C61-A00A-E5BAF3BED451&#34; \
    -e MAC_ADDRESS=&#34;A8:5C:2C:9A:46:2F&#34; \
    -e OSX_COMMANDS=&#39;ioreg -l | grep IOPlatformSerialNumber&#39; \
    sickcodes/docker-osx:auto"><pre><span><span>#</span> run the same as above 17gb auto image, with SSH, with nopicker, and save the bootdisk for later.</span>
<span><span>#</span> you don&#39;t need to save the bootdisk IF you supply specific serial numbers!</span>

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    -e SERIAL=<span><span>&#34;</span>C02TW0WAHX87<span>&#34;</span></span> \
    -e BOARD_SERIAL=<span><span>&#34;</span>C027251024NJG36UE<span>&#34;</span></span> \
    -e UUID=<span><span>&#34;</span>5CCB366D-9118-4C61-A00A-E5BAF3BED451<span>&#34;</span></span> \
    -e MAC_ADDRESS=<span><span>&#34;</span>A8:5C:2C:9A:46:2F<span>&#34;</span></span> \
    -e OSX_COMMANDS=<span><span>&#39;</span>ioreg -l | grep IOPlatformSerialNumber<span>&#39;</span></span> \
    sickcodes/docker-osx:auto</pre></div>
<h4 dir="auto"><a id="user-content-this-example-generates-a-specific-set-of-serial-numbers-at-runtime-with-your-existing-image-at-1000x1000-display-resolution" aria-hidden="true" href="#this-example-generates-a-specific-set-of-serial-numbers-at-runtime-with-your-existing-image-at-1000x1000-display-resolution"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>This example generates a specific set of serial numbers at runtime, with your existing image, at 1000x1000 display resolution</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# run an existing image in current directory, with a screen, with SSH, with nopicker.

stat mac_hdd_ng.img # make sure you have an image if you&#39;re using :naked

docker run -it \
    -v &#34;${PWD}/mac_hdd_ng.img:/image&#34; \
    --device /dev/kvm \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    -e SERIAL=&#34;C02TW0WAHX87&#34; \
    -e BOARD_SERIAL=&#34;C027251024NJG36UE&#34; \
    -e UUID=&#34;5CCB366D-9118-4C61-A00A-E5BAF3BED451&#34; \
    -e MAC_ADDRESS=&#34;A8:5C:2C:9A:46:2F&#34; \
    -e WIDTH=1000 \
    -e HEIGHT=1000 \
    sickcodes/docker-osx:naked"><pre><span><span>#</span> run an existing image in current directory, with a screen, with SSH, with nopicker.</span>

stat mac_hdd_ng.img <span><span>#</span> make sure you have an image if you&#39;re using :naked</span>

docker run -it \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng.img:/image<span>&#34;</span></span> \
    --device /dev/kvm \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    -e SERIAL=<span><span>&#34;</span>C02TW0WAHX87<span>&#34;</span></span> \
    -e BOARD_SERIAL=<span><span>&#34;</span>C027251024NJG36UE<span>&#34;</span></span> \
    -e UUID=<span><span>&#34;</span>5CCB366D-9118-4C61-A00A-E5BAF3BED451<span>&#34;</span></span> \
    -e MAC_ADDRESS=<span><span>&#34;</span>A8:5C:2C:9A:46:2F<span>&#34;</span></span> \
    -e WIDTH=1000 \
    -e HEIGHT=1000 \
    sickcodes/docker-osx:naked</pre></div>
<p dir="auto">If you want to generate serial numbers, either make them at runtime using
<code>    -e GENERATE_UNIQUE=true \</code></p>
<p dir="auto">Or you can generate them inside the <code>./custom</code> folder. And then use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="    -e GENERATE_SPECIFIC=true \
    -e SERIAL=&#34;&#34; \
    -e BOARD_SERIAL=&#34;&#34; \
    -e UUID=&#34;&#34; \
    -e MAC_ADDRESS=&#34;&#34; \"><pre>    -e GENERATE_SPECIFIC=true \
    -e SERIAL=<span><span>&#34;</span><span>&#34;</span></span> \
    -e BOARD_SERIAL=<span><span>&#34;</span><span>&#34;</span></span> \
    -e UUID=<span><span>&#34;</span><span>&#34;</span></span> \
    -e MAC_ADDRESS=<span><span>&#34;</span><span>&#34;</span></span> \</pre></div>
<h4 dir="auto"><a id="user-content-making-serial-numbers-persist-across-reboots" aria-hidden="true" href="#making-serial-numbers-persist-across-reboots"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Making serial numbers persist across reboots</h4>
<div dir="auto" data-snippet-clipboard-copy-content="
stat mac_hdd_ng_testing.img
touch ./output.env

# generate fresh random serial numbers, with a screen, using your own image, and save env file with your new serial numbers for later.

docker run -it \
    --device /dev/kvm \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_UNIQUE=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    -v &#34;${PWD}/output.env:/env&#34; \
    -v &#34;${PWD}/mac_hdd_ng_testing.img:/image&#34; \
    sickcodes/docker-osx:naked"><pre>stat mac_hdd_ng_testing.img
touch ./output.env

<span><span>#</span> generate fresh random serial numbers, with a screen, using your own image, and save env file with your new serial numbers for later.</span>

docker run -it \
    --device /dev/kvm \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -p 50922:10022 \
    -e NOPICKER=true \
    -e GENERATE_UNIQUE=true \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    -v <span><span>&#34;</span><span>${PWD}</span>/output.env:/env<span>&#34;</span></span> \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng_testing.img:/image<span>&#34;</span></span> \
    sickcodes/docker-osx:naked</pre></div>
<p dir="auto">To use iMessage or iCloud you need to change <code>5</code> values.</p>
<ul dir="auto">
<li><code>SERIAL</code></li>
<li><code>BOARD_SERIAL</code></li>
<li><code>UUID</code></li>
<li><code>MAC_ADDRESS</code></li>
</ul>
<p dir="auto"><em><code>ROM</code> is just the lowercased mac address, without <code>:</code> between each word.</em></p>
<p dir="auto">You can tell the container to generate them for you using <code>-e GENERATE_UNIQUE=true</code></p>
<p dir="auto">Or tell the container to use specific ones using <code>-e GENERATE_SPECIFIC=true</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    -e SERIAL=&#34;C02TW0WAHX87&#34; \
    -e BOARD_SERIAL=&#34;C027251024NJG36UE&#34; \
    -e UUID=&#34;5CCB366D-9118-4C61-A00A-E5BAF3BED451&#34; \
    -e MAC_ADDRESS=&#34;A8:5C:2C:9A:46:2F&#34; \"><pre>    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    -e SERIAL=<span><span>&#34;</span>C02TW0WAHX87<span>&#34;</span></span> \
    -e BOARD_SERIAL=<span><span>&#34;</span>C027251024NJG36UE<span>&#34;</span></span> \
    -e UUID=<span><span>&#34;</span>5CCB366D-9118-4C61-A00A-E5BAF3BED451<span>&#34;</span></span> \
    -e MAC_ADDRESS=<span><span>&#34;</span>A8:5C:2C:9A:46:2F<span>&#34;</span></span> \</pre></div>
<h3 dir="auto"><a id="user-content-changing-display-resolution" aria-hidden="true" href="#changing-display-resolution"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Changing display resolution</h3>
<p dir="auto">The display resolution is controlled by this line:</p>
<p dir="auto"><a href="https://github.com/sickcodes/Docker-OSX/blob/master/custom/config-nopicker-custom.plist#L819">https://github.com/sickcodes/Docker-OSX/blob/master/custom/config-nopicker-custom.plist#L819</a></p>
<p dir="auto">Instead of mounting that disk, Docker-OSX will generate a new <code>OpenCore.qcow2</code> by using this one cool trick:</p>
<div dir="auto" data-snippet-clipboard-copy-content="-e GENERATE_UNIQUE=true \
-e WIDTH=800 \
-e HEIGHT=600 \"><pre>-e GENERATE_UNIQUE=true \
-e WIDTH=800 \
-e HEIGHT=600 \</pre></div>
<p dir="auto">To use <code>WIDTH</code>/<code>HEIGHT</code>, you must use with either <code>-e GENERATE_UNIQUE=true</code> or <code>-e GENERATE_SPECIFIC=true</code>.</p>
<p dir="auto">It will take around 30 seconds longer to boot because it needs to make a new boot partition using <code>libguestfs</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="-e GENERATE_SPECIFIC=true \
-e WIDTH=1920 \
-e HEIGHT=1080 \
-e SERIAL=&#34;&#34; \
-e BOARD_SERIAL=&#34;&#34; \
-e UUID=&#34;&#34; \
-e MAC_ADDRESS=&#34;&#34; \"><pre>-e GENERATE_SPECIFIC=true \
-e WIDTH=1920 \
-e HEIGHT=1080 \
-e SERIAL=<span><span>&#34;</span><span>&#34;</span></span> \
-e BOARD_SERIAL=<span><span>&#34;</span><span>&#34;</span></span> \
-e UUID=<span><span>&#34;</span><span>&#34;</span></span> \
-e MAC_ADDRESS=<span><span>&#34;</span><span>&#34;</span></span> \</pre></div>
<h4 dir="auto"><a id="user-content-change-docker-osx-resolution-examples" aria-hidden="true" href="#change-docker-osx-resolution-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Change Docker-OSX Resolution Examples</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# using an image in your current directory
stat mac_hdd_ng.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng.img:/image&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=&#34;iMacPro1,1&#34; \
    -e SERIAL=&#34;C02TW0WAHX87&#34; \
    -e BOARD_SERIAL=&#34;C027251024NJG36UE&#34; \
    -e UUID=&#34;5CCB366D-9118-4C61-A00A-E5BAF3BED451&#34; \
    -e MAC_ADDRESS=&#34;A8:5C:2C:9A:46:2F&#34; \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    -e WIDTH=1600 \
    -e HEIGHT=900 \
    sickcodes/docker-osx:naked"><pre><span><span>#</span> using an image in your current directory</span>
stat mac_hdd_ng.img

docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng.img:/image<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_SPECIFIC=true \
    -e DEVICE_MODEL=<span><span>&#34;</span>iMacPro1,1<span>&#34;</span></span> \
    -e SERIAL=<span><span>&#34;</span>C02TW0WAHX87<span>&#34;</span></span> \
    -e BOARD_SERIAL=<span><span>&#34;</span>C027251024NJG36UE<span>&#34;</span></span> \
    -e UUID=<span><span>&#34;</span>5CCB366D-9118-4C61-A00A-E5BAF3BED451<span>&#34;</span></span> \
    -e MAC_ADDRESS=<span><span>&#34;</span>A8:5C:2C:9A:46:2F<span>&#34;</span></span> \
    -e MASTER_PLIST_URL=https://raw.githubusercontent.com/sickcodes/Docker-OSX/master/custom/config-nopicker-custom.plist \
    -e WIDTH=1600 \
    -e HEIGHT=900 \
    sickcodes/docker-osx:naked</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="# generating random serial numbers, using the DIY installer, along with the screen resolution changes.
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e GENERATE_UNIQUE=true \
    -e WIDTH=800 \
    -e HEIGHT=600 \
    sickcodes/docker-osx:latest"><pre><span><span>#</span> generating random serial numbers, using the DIY installer, along with the screen resolution changes.</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e GENERATE_UNIQUE=true \
    -e WIDTH=800 \
    -e HEIGHT=600 \
    sickcodes/docker-osx:latest</pre></div>
<p dir="auto">Here&#39;s a few other resolutions! If you resolution is invalid, it will default to 800x600.</p>
<div data-snippet-clipboard-copy-content="    -e WIDTH=800 \
    -e HEIGHT=600 \"><pre><code>    -e WIDTH=800 \
    -e HEIGHT=600 \
</code></pre></div>
<div data-snippet-clipboard-copy-content="    -e WIDTH=1280 \
    -e HEIGHT=768 \"><pre><code>    -e WIDTH=1280 \
    -e HEIGHT=768 \
</code></pre></div>
<div data-snippet-clipboard-copy-content="    -e WIDTH=1600 \
    -e HEIGHT=900 \"><pre><code>    -e WIDTH=1600 \
    -e HEIGHT=900 \
</code></pre></div>
<div data-snippet-clipboard-copy-content="    -e WIDTH=1920 \
    -e HEIGHT=1080 \"><pre><code>    -e WIDTH=1920 \
    -e HEIGHT=1080 \
</code></pre></div>
<div data-snippet-clipboard-copy-content="    -e WIDTH=2560 \
    -e HEIGHT=1600 \"><pre><code>    -e WIDTH=2560 \
    -e HEIGHT=1600 \
</code></pre></div>
<h4 dir="auto"><a id="user-content-this-example-shows-how-to-change-resolution-after-the-container-is-created" aria-hidden="true" href="#this-example-shows-how-to-change-resolution-after-the-container-is-created"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>This example shows how to change resolution after the container is created.</h4>
<p dir="auto">First step is to stop the docker daemon</p>
<div data-snippet-clipboard-copy-content="sudo systemctl stop docker"><pre><code>sudo systemctl stop docker
</code></pre></div>
<p dir="auto">The second step is to change container config in</p>
<div data-snippet-clipboard-copy-content="/var/lib/docker/containers/[container-id]/config.v2.json"><pre><code>/var/lib/docker/containers/[container-id]/config.v2.json
</code></pre></div>
<p dir="auto">(Suppose your original WIDTH is 1024 and HEIGHT is 768, you can search 1024 and replace it with the new value. Same for 768.)</p>
<p dir="auto">The last step is to restart the docker daemon</p>
<div data-snippet-clipboard-copy-content="sudo systemctl restart docker"><pre><code>sudo systemctl restart docker
</code></pre></div>
<h3 dir="auto"><a id="user-content-mounting-physical-disks-in-mac-osx" aria-hidden="true" href="#mounting-physical-disks-in-mac-osx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Mounting physical disks in Mac OSX</h3>
<p dir="auto">Pass the disk into the container as a volume and then pass the disk again into QEMU command line extras with.</p>
<p dir="auto">Use the <code>config-custom.plist</code> because you probably want to see the boot menu, otherwise omit the first line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="DISK_TWO=&#34;${PWD}/mount_me.img&#34;"><pre>DISK_TWO=<span><span>&#34;</span><span>${PWD}</span>/mount_me.img<span>&#34;</span></span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="-e MASTER_PLIST_URL=&#39;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#39; \
-v &#34;${DISK_TWO}:/disktwo&#34; \
-e EXTRA=&#39;-device ide-hd,bus=sata.5,drive=DISK-TWO -drive id=DISK-TWO,if=none,file=/disktwo,format=qcow2&#39; \"><pre>-e MASTER_PLIST_URL=<span>&#39;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#39;</span> \
-v <span>&#34;${DISK_TWO}:/disktwo&#34;</span> \
-e EXTRA=<span>&#39;-device ide-hd,bus=sata.5,drive=DISK-TWO -drive id=DISK-TWO,if=none,file=/disktwo,format=qcow2&#39;</span> \</pre></div>
<h4 dir="auto"><a id="user-content-physical-disk-mounting-example" aria-hidden="true" href="#physical-disk-mounting-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Physical disk mounting example</h4>
<div dir="auto" data-snippet-clipboard-copy-content="OSX_IMAGE=&#34;${PWD}/mac_hdd_ng_xcode_bigsur.img&#34;
DISK_TWO=&#34;${PWD}/mount_me.img&#34;

docker run -it \
    --device /dev/kvm \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e MASTER_PLIST_URL=&#39;https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist&#39; \
    -v &#34;${OSX_IMAGE}&#34;:/image \
    -v &#34;${DISK_TWO}&#34;:/disktwo \
    -e EXTRA=&#39;-device ide-hd,bus=sata.5,drive=DISK-TWO -drive id=DISK-TWO,if=none,file=/disktwo,format=qcow2&#39; \
    sickcodes/docker-osx:naked"><pre>OSX_IMAGE=<span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng_xcode_bigsur.img<span>&#34;</span></span>
DISK_TWO=<span><span>&#34;</span><span>${PWD}</span>/mount_me.img<span>&#34;</span></span>

docker run -it \
    --device /dev/kvm \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e MASTER_PLIST_URL=<span><span>&#39;</span>https://raw.githubusercontent.com/sickcodes/osx-serial-generator/master/config-custom.plist<span>&#39;</span></span> \
    -v <span><span>&#34;</span><span>${OSX_IMAGE}</span><span>&#34;</span></span>:/image \
    -v <span><span>&#34;</span><span>${DISK_TWO}</span><span>&#34;</span></span>:/disktwo \
    -e EXTRA=<span><span>&#39;</span>-device ide-hd,bus=sata.5,drive=DISK-TWO -drive id=DISK-TWO,if=none,file=/disktwo,format=qcow2<span>&#39;</span></span> \
    sickcodes/docker-osx:naked</pre></div>
<p dir="auto">See also: <a href="https://github.com/sickcodes/Docker-OSX/issues/222" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/222/hovercard">here</a>.</p>
<h4 dir="auto"><a id="user-content-extracting-the-apfs-disk-on-linux" aria-hidden="true" href="#extracting-the-apfs-disk-on-linux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extracting the APFS disk on Linux</h4>
<p dir="auto">In Docker-OSX, we are using <code>qcow2</code> images.</p>
<p dir="auto">This means the image grows as you use it, but the guest OS thinks you have 200GB available.</p>
<p dir="auto"><strong>READ ONLY</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# mount the qemu image like a real disk
sudo modprobe nbd max_part=8
sudo qemu-nbd --connect=/dev/nbd0 ./image.img
sudo fdisk /dev/nbd0 -l

mkdir -p ./mnt
sudo mount /dev/nbd0p1 ./mnt

# inspect partitions (2 partitions)
sudo fdisk /dev/nbd0 -l

# mount using apfs-linux-rw OR apfs-fuse
mkdir -p ./part

sudo mount /dev/nbd0p2 ./part
sudo apfs-fuse -o allow_other /dev/nbd0p2 ./part
"><pre><span><span>#</span> mount the qemu image like a real disk</span>
sudo modprobe nbd max_part=8
sudo qemu-nbd --connect=/dev/nbd0 ./image.img
sudo fdisk /dev/nbd0 -l

mkdir -p ./mnt
sudo mount /dev/nbd0p1 ./mnt

<span><span>#</span> inspect partitions (2 partitions)</span>
sudo fdisk /dev/nbd0 -l

<span><span>#</span> mount using apfs-linux-rw OR apfs-fuse</span>
mkdir -p ./part

sudo mount /dev/nbd0p2 ./part
sudo apfs-fuse -o allow_other /dev/nbd0p2 ./part
</pre></div>
<p dir="auto">When you are finishing looking at your disk, you can unmount the partition, the disk, and remove the loopback device:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo umount ./part
sudo umount ./mnt
sudo qemu-nbd --disconnect /dev/nbd0
sudo rmmod nbd"><pre>sudo umount ./part
sudo umount ./mnt
sudo qemu-nbd --disconnect /dev/nbd0
sudo rmmod nbd</pre></div>
<h3 dir="auto"><a id="user-content-usb-passthrough" aria-hidden="true" href="#usb-passthrough"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>USB Passthrough</h3>
<p dir="auto">Firstly, QEMU must be started as root.</p>
<p dir="auto">It is also potentially possible to accomplish USB passthrough by changing the permissions of the device in the container.
See <a href="https://www.linuxquestions.org/questions/slackware-14/qemu-usb-permissions-744557/#post3628691" rel="nofollow">here</a>.</p>
<p dir="auto">For example, create a new Dockerfile with the following</p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM sickcodes/docker-osx
USER arch
RUN sed -i -e s/exec\ qemu/exec\ sudo\ qemu/ ./Launch.sh
COPY --chown=arch ./new_image.img /home/arch/OSX-KVM/mac_hdd_ng.img"><pre>FROM sickcodes/docker-osx
USER arch
RUN sed -i -e s/exec<span>\ </span>qemu/exec<span>\ </span>sudo<span>\ </span>qemu/ ./Launch.sh
COPY --chown=arch ./new_image.img /home/arch/OSX-KVM/mac_hdd_ng.img</pre></div>
<p dir="auto">Where <code>new_image.img</code> is the qcow2 image you extracted. Then rebuild with <code>docker build .</code></p>
<p dir="auto">Next we need to find out the bus and port numbers of the USB device we want to pass through to the VM:</p>
<div dir="auto" data-snippet-clipboard-copy-content="lsusb -t
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/6p, 5000M
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    |__ Port 2: Dev 5, If 0, Class=Human Interface Device, Driver=usbhid, 12M
    |__ Port 2: Dev 5, If 1, Class=Chip/SmartCard, Driver=, 12M
    |__ Port 3: Dev 2, If 0, Class=Wireless, Driver=, 12M
    |__ Port 3: Dev 2, If 1, Class=Wireless, Driver=, 12M
    |__ Port 5: Dev 3, If 0, Class=Video, Driver=uvcvideo, 480M
    |__ Port 5: Dev 3, If 1, Class=Video, Driver=uvcvideo, 480M"><pre>lsusb -t
/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/6p, 5000M
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/12p, 480M
    <span>|</span>__ Port 2: Dev 5, If 0, Class=Human Interface Device, Driver=usbhid, 12M
    <span>|</span>__ Port 2: Dev 5, If 1, Class=Chip/SmartCard, Driver=, 12M
    <span>|</span>__ Port 3: Dev 2, If 0, Class=Wireless, Driver=, 12M
    <span>|</span>__ Port 3: Dev 2, If 1, Class=Wireless, Driver=, 12M
    <span>|</span>__ Port 5: Dev 3, If 0, Class=Video, Driver=uvcvideo, 480M
    <span>|</span>__ Port 5: Dev 3, If 1, Class=Video, Driver=uvcvideo, 480M</pre></div>
<p dir="auto">In this example, we want to pass through a smartcard device. The device we want is on bus 1 and port 2.</p>
<p dir="auto">There may also be differences if your device is usb 2.0 (ehci) vs usb 3.0 (xhci).
See <a href="https://unix.stackexchange.com/a/452946/101044" rel="nofollow">here</a> for more details.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# hostbus and hostport correspond to the numbers from lsusb
# runs in privileged mode to enable access to the usb devices.
docker run \
  --privileged \
  --device /dev/kvm \
  -e RAM=4 \
  -p 50922:10022 \
  -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
  -e EXTRA=&#34;-device virtio-serial-pci -device usb-host,hostbus=1,hostport=2&#34; \
  mycustomimage"><pre><span><span>#</span> hostbus and hostport correspond to the numbers from lsusb</span>
<span><span>#</span> runs in privileged mode to enable access to the usb devices.</span>
docker run \
  --privileged \
  --device /dev/kvm \
  -e RAM=4 \
  -p 50922:10022 \
  -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
  -e EXTRA=<span><span>&#34;</span>-device virtio-serial-pci -device usb-host,hostbus=1,hostport=2<span>&#34;</span></span> \
  mycustomimage</pre></div>
<p dir="auto">You should see the device show up when you do <code>system_profiler SPUSBDataType</code> in the MacOS shell.</p>
<p dir="auto">Important Note: this will cause the host system to lose access to the USB device while the VM is running!</p>
<h2 dir="auto"><a id="user-content-container-creation-examples" aria-hidden="true" href="#container-creation-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Container creation examples</h2>
<h4 dir="auto"><a id="user-content-quick-start-your-own-image-naked-container-image" aria-hidden="true" href="#quick-start-your-own-image-naked-container-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start your own image (naked container image)</h4>
<p dir="auto">This is my favourite container. You can supply an existing disk image as a Docker command line argument.</p>
<ul dir="auto">
<li>
<p dir="auto">Pull images out using <code>sudo find /var/lib/docker -size +10G | grep mac_hdd_ng.img</code></p>
</li>
<li>
<p dir="auto">Supply your own local image with the command argument <code>-v &#34;${PWD}/mac_hdd_ng.img:/image&#34;</code> and use <code>sickcodes/docker-osx:naked</code> when instructing Docker to create your container.</p>
<ul dir="auto">
<li>
<p dir="auto">Naked image is for booting any existing .img file, e.g in the current working directory (<code>$PWD</code>)</p>
</li>
<li>
<p dir="auto">By default, this image has a variable called <code>NOPICKER</code> which is <code>&#34;true&#34;</code>. This skips the disk selection menu. Use <code>-e NOPICKER=false</code> or any other string than the word <code>true</code> to enter the boot menu.</p>
<p dir="auto">This lets you use other disks instead of skipping the boot menu, e.g. recovery disk or disk utility.</p>
</li>
</ul>
</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="docker pull sickcodes/docker-osx:naked

# run your own image + SSH
# change mac_hdd_ng.img
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng.img:/image&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:naked

# run local copy of the auto image + SSH + Boot menu
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng_auto.img:/image&#34; \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e &#34;NOPICKER=false&#34; \
    sickcodes/docker-osx:naked"><pre>docker pull sickcodes/docker-osx:naked

<span><span>#</span> run your own image + SSH</span>
<span><span>#</span> change mac_hdd_ng.img</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng.img:/image<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:naked

<span><span>#</span> run local copy of the auto image + SSH + Boot menu</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng_auto.img:/image<span>&#34;</span></span> \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e <span><span>&#34;</span>NOPICKER=false<span>&#34;</span></span> \
    sickcodes/docker-osx:naked</pre></div>
<h3 dir="auto"><a id="user-content-building-an-osx-container-with-video-output" aria-hidden="true" href="#building-an-osx-container-with-video-output"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building an OSX container with video output</h3>
<p dir="auto">The Quick Start command should work out of the box, provided that you keep the following lines. Works in <code>auto</code> &amp; <code>naked</code> machines:</p>
<div data-snippet-clipboard-copy-content="    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \"><pre><code>    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
</code></pre></div>
<h4 dir="auto"><a id="user-content-prebuilt-image-with-arbitrary-command-line-arguments" aria-hidden="true" href="#prebuilt-image-with-arbitrary-command-line-arguments"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prebuilt image with arbitrary command line arguments</h4>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/da0a2f6c68e4be492138d5ad1750953746011a4fd6e83d7ececf9d03a5658c32/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6175746f3f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416175746f" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/auto?label=sickcodes%2Fdocker-osx%3Aauto"/></a></p>
<p dir="auto"><code>-e OSX_COMMANDS</code> lets you run any commands inside the container</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker pull sickcodes/docker-osx:auto

# boot to OS X shell + display + specify commands to run inside OS X!
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e &#34;OSX_COMMANDS=/bin/bash -c \&#34;put your commands here\&#34;&#34; \
    sickcodes/docker-osx:auto

# Boots in a minute or two!"><pre>docker pull sickcodes/docker-osx:auto

<span><span>#</span> boot to OS X shell + display + specify commands to run inside OS X!</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e <span><span>&#34;</span>OSX_COMMANDS=/bin/bash -c <span>\&#34;</span>put your commands here<span>\&#34;</span><span>&#34;</span></span> \
    sickcodes/docker-osx:auto

<span><span>#</span> Boots in a minute or two!</span></pre></div>
<p dir="auto">OR if you have an image already and just want to log in and execute arbitrary commands:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker pull sickcodes/docker-osx:naked-auto

# boot to OS X shell + display + specify commands to run inside OS X!
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e USERNAME=yourusername \
    -e PASSWORD=yourpassword \
    -e &#34;OSX_COMMANDS=/bin/bash -c \&#34;put your commands here\&#34;&#34; \
    sickcodes/docker-osx:naked-auto

# Boots in a minute or two!
"><pre>docker pull sickcodes/docker-osx:naked-auto

<span><span>#</span> boot to OS X shell + display + specify commands to run inside OS X!</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e USERNAME=yourusername \
    -e PASSWORD=yourpassword \
    -e <span><span>&#34;</span>OSX_COMMANDS=/bin/bash -c <span>\&#34;</span>put your commands here<span>\&#34;</span><span>&#34;</span></span> \
    sickcodes/docker-osx:naked-auto

<span><span>#</span> Boots in a minute or two!</span>
</pre></div>
<h3 dir="auto"><a id="user-content-further-examples" aria-hidden="true" href="#further-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Further examples</h3>
<p dir="auto">There&#39;s a myriad of other potential use cases that can work perfectly with Docker-OSX, some of which you&#39;ll see below!</p>
<h3 dir="auto"><a id="user-content-building-a-headless-osx-container" aria-hidden="true" href="#building-a-headless-osx-container"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building a headless OSX container</h3>
<p dir="auto">For a headless container, <strong>remove</strong> the following two lines from your <code>docker run</code> command:</p>
<div data-snippet-clipboard-copy-content="    # -v /tmp/.X11-unix:/tmp/.X11-unix \
    # -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \"><pre><code>    # -v /tmp/.X11-unix:/tmp/.X11-unix \
    # -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
</code></pre></div>
<h4 dir="auto"><a id="user-content-building-a-headless-container-from-a-custom-image" aria-hidden="true" href="#building-a-headless-container-from-a-custom-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building a headless container from a custom image</h4>
<p dir="auto"><a href="https://hub.docker.com/r/sickcodes/docker-osx/tags?page=1&amp;ordering=last_updated" rel="nofollow"><img src="https://camo.githubusercontent.com/3e6e91ded4720cafd6cdb1742afc615ee234f27bff1fd304ee7dff52284582ea/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f696d6167652d73697a652f7369636b636f6465732f646f636b65722d6f73782f6e616b65643f6c6162656c3d7369636b636f646573253246646f636b65722d6f73782533416e616b6564" alt="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked" data-canonical-src="https://img.shields.io/docker/image-size/sickcodes/docker-osx/naked?label=sickcodes%2Fdocker-osx%3Anaked"/></a></p>
<p dir="auto">This is particularly helpful for CI/CD pipelines.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# run your own image headless + SSH
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v &#34;${PWD}/mac_hdd_ng.img:/image&#34; \
    sickcodes/docker-osx:naked"><pre><span><span>#</span> run your own image headless + SSH</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    -v <span><span>&#34;</span><span>${PWD}</span>/mac_hdd_ng.img:/image<span>&#34;</span></span> \
    sickcodes/docker-osx:naked</pre></div>
<h3 dir="auto"><a id="user-content-building-a-headless-container-which-allows-insecure-vnc-on-localhost-for-local-use-only" aria-hidden="true" href="#building-a-headless-container-which-allows-insecure-vnc-on-localhost-for-local-use-only"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building a headless container which allows insecure VNC on localhost (!for local use only!)</h3>
<p dir="auto"><strong>Must change -it to -i to be able to interact with the QEMU console</strong></p>
<p dir="auto"><strong>To exit a container using -i you must <code>docker kill &lt;containerid&gt;</code>. For example, to kill everything, <code>docker ps | xargs docker kill</code>.</strong></p>
<p dir="auto">Native QEMU VNC example</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -i \
    --device /dev/kvm \
    -p 50922:10022 \
    -p 5999:5999 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e EXTRA=&#34;-display none -vnc 0.0.0.0:99,password=on&#34; \
    sickcodes/docker-osx:big-sur

# type `change vnc password myvncusername` into the docker terminal and set a password
# connect to localhost:5999 using VNC
# qemu 6 seems to require a username for vnc now"><pre>docker run -i \
    --device /dev/kvm \
    -p 50922:10022 \
    -p 5999:5999 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e EXTRA=<span><span>&#34;</span>-display none -vnc 0.0.0.0:99,password=on<span>&#34;</span></span> \
    sickcodes/docker-osx:big-sur

<span><span>#</span> type `change vnc password myvncusername` into the docker terminal and set a password</span>
<span><span>#</span> connect to localhost:5999 using VNC</span>
<span><span>#</span> qemu 6 seems to require a username for vnc now</span></pre></div>
<p dir="auto"><strong>NOT TLS/HTTPS Encrypted at all!</strong></p>
<p dir="auto">Or <code>ssh -N root@1.1.1.1 -L  5999:127.0.0.1:5999</code>, where <code>1.1.1.1</code> is your remote server IP.</p>
<p dir="auto">(Note: if you close port 5999 and use the SSH tunnel, this becomes secure.)</p>
<h3 dir="auto"><a id="user-content-building-a-headless-container-to-run-remotely-with-secure-vnc" aria-hidden="true" href="#building-a-headless-container-to-run-remotely-with-secure-vnc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building a headless container to run remotely with secure VNC</h3>
<p dir="auto">Add the following line:</p>
<p dir="auto"><code>-e EXTRA=&#34;-display none -vnc 0.0.0.0:99,password=on&#34;</code></p>
<p dir="auto">In the Docker terminal, press <code>enter</code> until you see <code>(qemu)</code>.</p>
<p dir="auto">Type <code>change vnc password someusername</code></p>
<p dir="auto">Enter a password for your new vnc username^.</p>
<p dir="auto">You also need the container IP: <code>docker inspect &lt;containerid&gt; | jq -r &#39;.[0].NetworkSettings.IPAddress&#39;</code></p>
<p dir="auto">Or <code>ip n</code> will usually show the container IP first.</p>
<p dir="auto">Now VNC connect using the Docker container IP, for example <code>172.17.0.2:5999</code></p>
<p dir="auto">Remote VNC over SSH: <code>ssh -N root@1.1.1.1 -L  5999:172.17.0.2:5999</code>, where <code>1.1.1.1</code> is your remote server IP and <code>172.17.0.2</code> is your LAN container IP.</p>
<p dir="auto">Now you can direct connect VNC to any container built with this command!</p>
<h3 dir="auto"><a id="user-content-id-like-to-use-spice-instead-of-vnc" aria-hidden="true" href="#id-like-to-use-spice-instead-of-vnc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>I&#39;d like to use SPICE instead of VNC</h3>
<p dir="auto">Optionally, you can enable the SPICE protocol, which allows use of <code>remote-viewer</code> to access your OSX container rather than VNC.</p>
<p dir="auto">Note: <code>-disable-ticketing</code> will allow unauthenticated access to the VM. See the <a href="https://www.spice-space.org/spice-user-manual.html" rel="nofollow">spice manual</a> for help setting up authenticated access (&#34;Ticketing&#34;).</p>
<div dir="auto" data-snippet-clipboard-copy-content="  docker run \
    --device /dev/kvm \
    -p 3001:3001 \
    -p 50922:10022 \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    -e EXTRA=&#34;-monitor telnet::45454,server,nowait -nographic -serial null -spice disable-ticketing,port=3001&#34; \
    mycustomimage"><pre>  docker run \
    --device /dev/kvm \
    -p 3001:3001 \
    -p 50922:10022 \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    -e EXTRA=<span><span>&#34;</span>-monitor telnet::45454,server,nowait -nographic -serial null -spice disable-ticketing,port=3001<span>&#34;</span></span> \
    mycustomimage</pre></div>
<p dir="auto">Then simply do <code>remote-viewer spice://localhost:3001</code> and add <code>--spice-debug</code> for debugging.</p>
<h4 dir="auto"><a id="user-content-creating-images-based-on-an-already-configured-and-set-up-container" aria-hidden="true" href="#creating-images-based-on-an-already-configured-and-set-up-container"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Creating images based on an already configured and set up container</h4>
<div dir="auto" data-snippet-clipboard-copy-content="# You can create an image of an already configured and setup container.
# This allows you to effectively duplicate a system.
# To do this, run the following commands

# make note of your container id
docker ps --all
docker commit containerid newImageName

# To run this image do the following
docker run \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    newImageName"><pre><span><span>#</span> You can create an image of an already configured and setup container.</span>
<span><span>#</span> This allows you to effectively duplicate a system.</span>
<span><span>#</span> To do this, run the following commands</span>

<span><span>#</span> make note of your container id</span>
docker ps --all
docker commit containerid newImageName

<span><span>#</span> To run this image do the following</span>
docker run \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    newImageName</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="docker pull sickcodes/docker-osx:auto

# boot directly into a real OS X shell with no display (Xvfb) [HEADLESS]
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    sickcodes/docker-osx:auto

# username is user
# passsword is alpine
# Wait 2-3 minutes until you drop into the shell."><pre>docker pull sickcodes/docker-osx:auto

<span><span>#</span> boot directly into a real OS X shell with no display (Xvfb) [HEADLESS]</span>
docker run -it \
    --device /dev/kvm \
    -p 50922:10022 \
    sickcodes/docker-osx:auto

<span><span>#</span> username is user</span>
<span><span>#</span> passsword is alpine</span>
<span><span>#</span> Wait 2-3 minutes until you drop into the shell.</span></pre></div>
<h4 dir="auto"><a id="user-content-run-the-original-version-of-docker-osx" aria-hidden="true" href="#run-the-original-version-of-docker-osx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run the original version of Docker-OSX</h4>
<div dir="auto" data-snippet-clipboard-copy-content="
docker pull sickcodes/docker-osx:latest

docker run -it \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:latest

# press CTRL + G if your mouse gets stuck
# scroll down to troubleshooting if you have problems
# need more RAM and SSH on localhost -p 50922?"><pre>docker pull sickcodes/docker-osx:latest

docker run -it \
    --device /dev/kvm \
    --device /dev/snd \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:latest

<span><span>#</span> press CTRL + G if your mouse gets stuck</span>
<span><span>#</span> scroll down to troubleshooting if you have problems</span>
<span><span>#</span> need more RAM and SSH on localhost -p 50922?</span></pre></div>
<h4 dir="auto"><a id="user-content-run-but-enable-ssh-in-os-x-original-version" aria-hidden="true" href="#run-but-enable-ssh-in-os-x-original-version"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run but enable SSH in OS X (Original Version)!</h4>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it \
    --device /dev/kvm \
    --device /dev/snd \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e &#34;DISPLAY=${DISPLAY:-:0.0}&#34; \
    sickcodes/docker-osx:latest

# turn on SSH after you&#39;ve installed OS X in the &#34;Sharing&#34; settings.
ssh user@localhost -p 50922"><pre>docker run -it \
    --device /dev/kvm \
    --device /dev/snd \
    -p 50922:10022 \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    -e <span><span>&#34;</span>DISPLAY=<span>${DISPLAY<span>:-:</span>0.0}</span><span>&#34;</span></span> \
    sickcodes/docker-osx:latest

<span><span>#</span> turn on SSH after you&#39;ve installed OS X in the &#34;Sharing&#34; settings.</span>
ssh user@localhost -p 50922</pre></div>
<h4 dir="auto"><a id="user-content-autoboot-into-os-x-after-youve-installed-everything" aria-hidden="true" href="#autoboot-into-os-x-after-youve-installed-everything"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Autoboot into OS X after you&#39;ve installed everything</h4>
<p dir="auto">Add the extra option <code>-e NOPICKER=true</code>.</p>
<p dir="auto">Old machines:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# find your containerID
docker ps

# move the no picker script on top of the Launch script
# NEW CONTAINERS
docker exec containerID mv ./Launch-nopicker.sh ./Launch.sh

# VNC-VERSION-CONTAINER
docker exec containerID mv ./Launch-nopicker.sh ./Launch_custom.sh

# LEGACY CONTAINERS
docker exec containerID bash -c &#34;grep -v InstallMedia ./Launch.sh &gt; ./Launch-nopicker.sh
chmod +x ./Launch-nopicker.sh
sed -i -e s/OpenCore\.qcow2/OpenCore\-nopicker\.qcow2/ ./Launch-nopicker.sh
&#34;"><pre><span><span>#</span> find your containerID</span>
docker ps

<span><span>#</span> move the no picker script on top of the Launch script</span>
<span><span>#</span> NEW CONTAINERS</span>
docker <span>exec</span> containerID mv ./Launch-nopicker.sh ./Launch.sh

<span><span>#</span> VNC-VERSION-CONTAINER</span>
docker <span>exec</span> containerID mv ./Launch-nopicker.sh ./Launch_custom.sh

<span><span>#</span> LEGACY CONTAINERS</span>
docker <span>exec</span> containerID bash -c <span><span>&#34;</span>grep -v InstallMedia ./Launch.sh &gt; ./Launch-nopicker.sh</span>
<span>chmod +x ./Launch-nopicker.sh</span>
<span>sed -i -e s/OpenCore\.qcow2/OpenCore\-nopicker\.qcow2/ ./Launch-nopicker.sh</span>
<span><span>&#34;</span></span></pre></div>
<h3 dir="auto"><a id="user-content-the-big-sur-image-starts-slowly-after-installation-is-this-expected" aria-hidden="true" href="#the-big-sur-image-starts-slowly-after-installation-is-this-expected"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The big-sur image starts slowly after installation. Is this expected?</h3>
<p dir="auto">Automatic updates are still on in the container&#39;s settings. You may wish to turn them off. <a href="https://github.com/sickcodes/Docker-OSX/issues/227" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/227/hovercard">We have future plans for development around this.</a></p>
<h3 dir="auto"><a id="user-content-what-is-display-00" aria-hidden="true" href="#what-is-display-00"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is <code>${DISPLAY:-:0.0}</code>?</h3>
<p dir="auto"><code>$DISPLAY</code> is the shell variable that refers to your X11 display server.</p>
<p dir="auto"><code>${DISPLAY}</code> is the same, but allows you to join variables like this:</p>
<ul dir="auto">
<li>e.g. <code>${DISPLAY}_${DISPLAY}</code> would print <code>:0.0_:0.0</code></li>
<li>e.g. <code>$DISPLAY_$DISPLAY</code>     would print <code>:0.0</code></li>
</ul>
<p dir="auto">...because <code>$DISPLAY_</code> is not <code>$DISPLAY</code></p>
<p dir="auto"><code>${variable:-fallback}</code> allows you to set a &#34;fallback&#34; variable to be substituted if <code>$variable</code> is not set.</p>
<p dir="auto">You can also use <code>${variable:=fallback}</code> to set that variable (in your current terminal).</p>
<p dir="auto">In Docker-OSX, we assume, <code>:0.0</code> is your default <code>$DISPLAY</code> variable.</p>
<p dir="auto">You can see what yours is</p>

<p dir="auto">That way, <code>${DISPLAY:-:0.0}</code> will use whatever variable your X11 server has set for you, else <code>:0.0</code></p>
<h3 dir="auto"><a id="user-content-what-is--v-tmpx11-unixtmpx11-unix" aria-hidden="true" href="#what-is--v-tmpx11-unixtmpx11-unix"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is <code>-v /tmp/.X11-unix:/tmp/.X11-unix</code>?</h3>
<p dir="auto"><code>-v</code> is a Docker command-line option that lets you pass a volume to the container.</p>
<p dir="auto">The directory that we are letting the Docker container use is a X server display socket.</p>
<p dir="auto"><code>/tmp/.X11-unix</code></p>
<p dir="auto">If we let the Docker container use the same display socket as our own environment, then any applications you run inside the Docker container will show up on your screen too! <a href="https://www.x.org/archive/X11R6.8.0/doc/RELNOTES5.html" rel="nofollow">https://www.x.org/archive/X11R6.8.0/doc/RELNOTES5.html</a></p>
<h3 dir="auto"><a id="user-content-alsa-errors-on-startup-or-container-creation" aria-hidden="true" href="#alsa-errors-on-startup-or-container-creation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>ALSA errors on startup or container creation</h3>
<p dir="auto">You may when initialising or booting into a container see errors from the <code>(qemu)</code> console of the following form:
<code>ALSA lib blahblahblah: (function name) returned error: no such file or directory</code>. These are more or less expected. As long as you are able to boot into the container and everything is working, no reason to worry about these.</p>
<p dir="auto">See also: <a href="https://github.com/sickcodes/Docker-OSX/issues/174" data-hovercard-type="issue" data-hovercard-url="/sickcodes/Docker-OSX/issues/174/hovercard">here</a>.</p>
</article>
          </div></div>
  </body>
</html>
