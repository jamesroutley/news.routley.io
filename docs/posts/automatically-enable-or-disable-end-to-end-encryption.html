<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636">Original</a>
    <h1>Automatically enable or disable end-to-end encryption</h1>
    
    <div id="readability-page-1" class="page"><div id="main-inner">










<section>
  <div>
  <div id="summary-container">
    <div id="field-status_summary">


  
    <p><span id="field-value-status_summary">
      <span data-status="closed">Closed</span>
      <span id="field-value-bug_id">
        <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636">Bug 135636</a>
      </span>
      <span>
        <span>Opened <span title="2002-04-05 02:06 PST" data-time="1018001219">21 years ago</span></span>
          <span>Closed <span title="2023-03-30 09:50 PDT" data-time="1680195057">18 hours ago</span></span>
      </span>
        </span>
    </p>

  
</div>


    
  </div>
  </div>
</section>


<section id="module-categories">
    
  
</section>


<section id="module-tracking">
    
  
</section>



<section id="module-people">
    
  
</section>


<section id="module-references">
    
  
</section>


<section id="module-details">
    
  
</section>
















<section id="module-attachments">
    
  
</section>







<meta name="firefox-versions" content="{&#34;FIREFOX_AURORA&#34;:&#34;&#34;,&#34;FIREFOX_DEVEDITION&#34;:&#34;112.0b8&#34;,&#34;FIREFOX_ESR&#34;:&#34;102.9.0esr&#34;,&#34;FIREFOX_ESR_NEXT&#34;:&#34;&#34;,&#34;FIREFOX_NIGHTLY&#34;:&#34;113.0a1&#34;,&#34;FIREFOX_PINEBUILD&#34;:&#34;&#34;,&#34;LAST_MERGE_DATE&#34;:&#34;2023-03-13&#34;,&#34;LAST_RELEASE_DATE&#34;:&#34;2023-03-14&#34;,&#34;LAST_SOFTFREEZE_DATE&#34;:&#34;2023-03-09&#34;,&#34;LAST_STRINGFREEZE_DATE&#34;:&#34;2023-03-10&#34;,&#34;LATEST_FIREFOX_DEVEL_VERSION&#34;:&#34;112.0b8&#34;,&#34;LATEST_FIREFOX_OLDER_VERSION&#34;:&#34;3.6.28&#34;,&#34;LATEST_FIREFOX_RELEASED_DEVEL_VERSION&#34;:&#34;112.0b8&#34;,&#34;LATEST_FIREFOX_VERSION&#34;:&#34;111.0.1&#34;,&#34;NEXT_MERGE_DATE&#34;:&#34;2023-04-10&#34;,&#34;NEXT_RELEASE_DATE&#34;:&#34;2023-04-11&#34;,&#34;NEXT_SOFTFREEZE_DATE&#34;:&#34;2023-04-06&#34;,&#34;NEXT_STRINGFREEZE_DATE&#34;:&#34;2023-04-07&#34;}"/>



<div id="a42731_4111"><div><p>QA Contact: nbaca ‚Üí junruh</p></div></div><div id="c2"><div><p>Status: NEW ‚Üí RESOLVED</p><p>Closed: <span title="2002-04-20 15:53 PDT" data-time="1019343203">21 years ago</span></p><p>Resolution: --- ‚Üí DUPLICATE</p></div></div><div id="c3"><div><p>Status: RESOLVED ‚Üí VERIFIED</p></div></div><div id="c4"><div><p>Severity: normal ‚Üí enhancement</p><p>Status: VERIFIED ‚Üí REOPENED</p><p>Component: Account Manager ‚Üí S/MIME</p><p>Product: MailNews ‚Üí PSM</p><p>Hardware: PC ‚Üí All</p><p>Resolution: DUPLICATE ‚Üí ---</p><p>Summary: Need &#34;Encryption when possible&#34; option ‚Üí Implement &#34;Encryption when possible&#34; option</p><p>Version: other ‚Üí unspecified</p></div></div><div id="c5"><div><p>Assignee: racham ‚Üí ssaux</p><p>Status: REOPENED ‚Üí NEW</p><p>QA Contact: junruh ‚Üí carosendahl</p></div></div><div id="a2385425_48213"><div><p>Summary: Implement &#34;Encryption when possible&#34; option ‚Üí [UE] Implement &#34;Encryption when possible&#34; option</p></div></div><div id="c7"><div><p>Severity: enhancement ‚Üí normal</p><p>Priority: -- ‚Üí P3</p><p>Version: unspecified ‚Üí 2.3</p></div></div><div id="a7557186_21768"><div><p>Target Milestone: --- ‚Üí Future</p></div></div><div id="a8928966_36541"><div><p>Severity: normal ‚Üí enhancement</p></div></div><div id="c22"><div><p>Assignee: ssaux ‚Üí nobody</p></div></div><div id="c29"><div><p>Target Milestone: Future ‚Üí ---</p></div></div><div id="c38"><div><p>Target Milestone: --- ‚Üí Future</p></div></div><div id="a158317525_135518"><div><p>QA Contact: carosendahl ‚Üí s.mime</p></div></div><div id="a197680354_15223"><div><p>Version: psm2.3 ‚Üí 1.0 Branch</p></div></div><div id="a223500453_15223"><div><p>Product: Core ‚Üí MailNews Core</p></div></div><div id="a226566664_101158"><div><p>Priority: P3 ‚Üí --</p><p>Target Milestone: Future ‚Üí ---</p><p>Version: 1.0 Branch ‚Üí Trunk</p></div></div><div id="a312155439_352993"><div><p>Whiteboard: [kerh-eha] ‚Üí [kerh-eha] [GS]</p></div></div><div id="a582083902_101158"><div><p>Summary: [UE] Implement &#34;Encryption when possible&#34; option ‚Üí Implement &#34;Encryption when possible&#34; option</p></div></div><div id="a582083928_101158"><div><p>Summary: Implement &#34;Encryption when possible&#34; option ‚Üí Implement &#34;Encryption when possible&#34; option for OpenPGP abd S/MIME</p></div></div><div id="a582102807_36541"><div><p>Summary: Implement &#34;Encryption when possible&#34; option for OpenPGP abd S/MIME ‚Üí Implement &#34;Encryption when possible&#34; option for OpenPGP and S/MIME</p></div></div><div id="c91"><p>The &#34;Encrypt if possible&#34; and also the Enigmail-Autocrypt feature aren&#39;t working anymore in Thundebird-78.4.</p></div><div id="c92"><div id="ct-92" data-comment-id="15119648" data-ismarkdown="true"><p>Adding the phrase &#34;opportunistic encryption&#34; since it took me a long time to find this issue after my search for opportunistic returned no results.</p>
<p>As <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c86" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">Comment 86</a> noted, for wider adoption of encryption, it&#39;s critical that its usage not interrupt workflow too much. I set up multiple friends and colleagues with Enigmail, and opportunistic encryption made privacy transparently easy, aside from occasional refreshing or new importation of keys. The new integration into Thunderbird is a huge step backwards, and makes PGP nearly unusable for most users. (Either they set to always encrypt, then have their workflow interrupted whenever they send to someone without a key; or they set to never encrypt, and inevitably forget to manually set encryption on every single email for which they do have recipient key(s).)</p>
</div></div><div id="c93"><div id="ct-93" data-comment-id="15126263" data-ismarkdown="true"><p>(In reply to norristh from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c92" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #92</a>)</p>
<blockquote>
<p>Adding the phrase &#34;opportunistic encryption&#34; since it took me a long time to find this issue after my search for opportunistic returned no results.</p>
<p>As <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c86" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">Comment 86</a> noted, for wider adoption of encryption, it&#39;s critical that its usage not interrupt workflow too much. I set up multiple friends and colleagues with Enigmail, and opportunistic encryption made privacy transparently easy, aside from occasional refreshing or new importation of keys. The new integration into Thunderbird is a huge step backwards, and makes PGP nearly unusable for most users. (Either they set to always encrypt, then have their workflow interrupted whenever they send to someone without a key; or they set to never encrypt, and inevitably forget to manually set encryption on every single email for which they do have recipient key(s).)</p>
</blockquote>
<p>In general, I&#39;d say the PGP integration is a step forward,  but the design decision that encryption can only be globally enabled or disabled seems, with all due respect, brain dead. For 20 years, I had a very hard time getting non tech savvy users to adopt PGP, and thus when TB announced their built-in support, I was received.  But this is a real bummer, because I know that most users I am interacting with will not think of having to enable encryption for the current message.</p>
<p>One compromise would be that TB, whenever it finds a matching key, it should, prior to sending the message, ask the user whether or not encryption should be enabled.</p>
</div></div><div id="c94"><p>We&#39;re planning to support this, just didn&#39;t have time to finish it for 78.</p></div><div id="c95"><div id="ct-95" data-comment-id="15126340" data-ismarkdown="true"><p>(In reply to Magnus Melin [:mkmelin] from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c94" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #94</a>)</p>
<blockquote>
<p>We&#39;re planning to support this, just didn&#39;t have time to finish it for 78.</p>
</blockquote>
<p>Sorry for bothering, and I know the old rule of &#34;it&#39;s ready when it&#39;s ready&#34;, but is the current plan to have it ready for one of the next point releases? I&#39;d love to know in order to understand what to tell my users.</p>
</div></div><div id="c96"><p>No this needs a lot of new UI, so won&#39;t be available until the next major release mid 2021 (well, in betas some time prior to that yes).</p></div><div id="c97"><p>Although <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1654950" title="RESOLVED FIXED - OpenPGP - Offer a configuration to not automatically attach the public key when signing">Bug #1654950</a> was fixed without any UI for now - just with a hidden config option. I guess that would suffice for a lot of people. And, actually, the UI could be just a checkbox:</p></div><div id="c98"><div id="ct-98" data-comment-id="15126363" data-ismarkdown="true"><p>(In reply to r from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c97" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #97</a>)</p>
<blockquote>
<p>Although <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1654950" title="RESOLVED FIXED - OpenPGP - Offer a configuration to not automatically attach the public key when signing">Bug #1654950</a> was fixed without any UI for now - just with a hidden config option. I guess that would suffice for a lot of people. And, actually, the UI could be just a checkbox:</p>
</blockquote>
<p>This is just about attaching the pubkey, not about automatically encrypting when a pubkey for the recipient is available, right?</p>
</div></div><div id="c99"><p>Yes, it&#39;s a totally different issue. I used it as an example to show that there are different/easier options than implementing a full-fledge UI to realize what probably most of those following this issue are looking for: Basically a simple option, to turn on encryption automatically only when there are public keys available for all recipients. Currently there is only on and off. What we need is a third option: &#34;On if there is a known public key for all recipients - otherwise off&#34;. That would solve perhaps not all situations, but would massively alleviate the current problems and disappointment many have after upgrading from the old Thunderbird with Enigmail.</p></div><div id="c100"><div id="ct-100" data-comment-id="15143121" data-ismarkdown="true"><p>(In reply to Magnus Melin [:mkmelin] from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c96" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #96</a>)</p>
<blockquote>
<p>No this needs a lot of new UI, so won&#39;t be available until the next major release mid 2021 (well, in betas some time prior to that yes).</p>
</blockquote>
<p>This is deplorable, because, even though TB 78 provides the technical underpinnings for making end-to-end encryption easier, this limitation, according to the feedback I get, make it very unlikely for anyone to effectively start using PGP if they haven&#39;t, because they will always just forget to check the box, and for anyone who has been using enigmail in the past, this is a major nuisance. As much as I appreciate that TB is committed to making PGP use more common, I have again downgraded to 68 because of this.</p>
<p>So, this should really get priorised, I feel. Again, I really value the efforts you are making here. I just feel that abolishing Enigmail at this stage was premature.</p>
</div></div><div id="c101"><div id="ct-101" data-comment-id="15181123" data-ismarkdown="true"><p>Wow, this bug is 19 years old! I was about to report exactly the same issue.</p>
<p>What happens with &#34;Require encryption by default&#34;:</p>
<ul>
<li>every message that I send to people who do not use OpenPGP (and I do not have their key) needs to be manually unticked so that Thunderbird does not try to encrypt them.</li>
</ul>
<p>What happens with &#34;Do not enable encryption by default&#34;:</p>
<ul>
<li>every message that I send to people who use OpenPGP (and I do have imported their key into TB) needs to be manually ticked so that Thunderbird does encrypt them. Unless I reply to a message that was encrypted.</li>
</ul>
<p>The option &#34;Require encryption when possible&#34; would mitigate both unusable cases described above.</p>
</div></div><div id="c104"><p>I agree, Enigmail was better with that regards.</p></div><div id="c106"><p><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1684783" title="RESOLVED DUPLICATE - Compose ignores &#34;Do not require encryption by default&#34; account setting and demands PGP key.">Bug 1684783</a> is not a duplicate of this bug.  This bug is a feature request and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1684783" title="RESOLVED DUPLICATE - Compose ignores &#34;Do not require encryption by default&#34; account setting and demands PGP key.">Bug 1684783</a> is a serious defect that prevents mail from being sent if it was PGP encrypted.</p></div><div id="c108"><p>Can you explain why the defect of having TB set to &#34;Do not enable encryption by default&#34; but it refuses to send mail because a public key is missing is related to this feature request to prefer encryption?</p></div><div id="c109"><p>Currently we support &#34;require encryption&#34; or unencrypted. For encrypted mails we will try to reply encrypted (totally per design).</p></div><div id="c111"><div id="ct-111" data-comment-id="15233056" data-ismarkdown="true"><p>I was about to request this feature, and I found out that request is open for almost two decades... LOL</p>
<p>Third option for encryption would be nice:</p>
<ul>
<li>Use encryption if possible (if key is available)</li>
</ul>
<p>Possibly another configuration option for multiple recipients:</p>
<ol>
<li>abort if not all keys available</li>
<li>send encrypted to recipients with keys and send unencrypted to recipients without keys (and display warning?)</li>
<li>Ask</li>
</ol>
</div></div><div id="c112"><div id="ct-112" data-comment-id="15262768" data-ismarkdown="true"><p>i&#39;d like to see(In reply to darthbolek4 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c111" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #111</a>)</p>
<blockquote>
<p>I was about to request this feature, and I found out that request is open for almost two decades... LOL</p>
<p>Third option for encryption would be nice:</p>
<ul>
<li>Use encryption if possible (if key is available)</li>
</ul>
<p>Possibly another configuration option for multiple recipients:</p>
<ol>
<li>abort if not all keys available</li>
<li>send encrypted to recipients with keys and send unencrypted to recipients without keys (and display warning?)</li>
<li>Ask</li>
</ol>
</blockquote>
<p>To have some popup coming up for asking for confirmation if the message could not get encrypted is exactly what i&#39;d like to see!</p>
</div></div><div id="c113"><p>The basic solution is checking if a key exists and flipping the preexisting encryption option, which should take 5 minutes to code.  I can&#39;t think of any reasonable explanation of why something so simple and that only benefits illegal mass surveillance has been open for 19 years except due to an NSA influence operation.</p></div><div id="c114"><p>I&#39;d also like a function like the outdated &#34;Encrypt if possible&#34;. üëç</p></div><div id="c115"><div id="ct-115" data-comment-id="15337820" data-ismarkdown="true"><p>Fully agree with schaum.</p>
<p>For mails with multiple recipients:</p>
<ul>
<li>send encrypted to recipients with keys and send unencrypted to recipients without keys (which should also be the case when &#34;Use encryption if possible&#34; is set</li>
<li>do not encrypt mail</li>
<li>abort (in order let user get recipients key)</li>
</ul>
</div></div><div id="c116"><div id="ct-116" data-comment-id="15398484" data-ismarkdown="true"><p>We recently switched to TB78 and not having a simple way to disable encryption is really confusing to our users. With enigmail/TB68 we have configured encrypt+sign by default. Whenever there was a public key missing, users could simply uncheck encryption, and could send the email (one additional click)</p>
<p>Now this option is hidden behind security and is much less intuitive, and takes 2 clicks, and also disables signing (which might not be what we want, because maybe the recipient has my public key and would like to verify my signature). Maybe not the right bug here, but as a first step, to have 2 buttons in the composer window to toggle encryption, and signing, that would improve workflow tremendously.</p>
</div></div><div id="c117"><div id="ct-117" data-comment-id="15413045" data-ismarkdown="true"><p>If users have one account, on which they communicate with some people with PGP and with some people unencrypted, they now have a bad expirience.</p>
<p>Either we can disable automatic encryption, and need to remember each time to enable it for the conversations that use it, or have it on, but get a annoying window everytime we communicate with people that don&#39;t have a key.</p>
<p>This all leads to frequent problems, and can lead users to accidentally send information that should be encrypted in plain text.</p>
</div></div><div id="c118"><p>Having no option to use encryption if possible (if key is available) makes PGP nearly unusable for many of our users. Either they choose &#34;always encrypt&#34;, then have their workflow interrupted whenever they send to someone without a key; or they choose &#34;never encrypt&#34;, and inevitably forget to manually set encryption on every single email for which they do have recipient keys. This leads users to accidentally send information that should be encrypted in plain text.</p></div><div id="c119"><div id="ct-119" data-comment-id="15463327" data-ismarkdown="true"><p>To our descendants: please time travel back to 2002-04-05 to convince the community to give birth to a child with the name #135636.</p>
<p>To our contemporaries: It should be fixed now by any minute.</p>
<p>Since this ticket was created I have taught quite many people how to encrypt their email communication using Thunderbird and Enigmail. After Enigmail was dropped, this issue kind of ruins this effort, because it just won&#39;t work like this and those with good will but without dedication are repelled. It does real damage to the goal of promoting e2e encryption for email - please consider raising the severity of the issue.</p>
<p>Anyway, it was an honor to be part of this historic ticket.</p>
</div></div><div id="c120"><p>I can only agree. The current situation is repelling users - even me - to used e2e encryption with Thunderbird.</p></div><div id="c122"><p>How difficult can it be to develop an add-on that will fix the issue?</p></div><div id="c123"><div id="ct-123" data-comment-id="15508682" data-ismarkdown="true"><p>Is it not possible to just let enigmail extension works again ?</p>
<p>I understand it is quite frustrating for Thunderbird developer and you may have other priorities than security and user privacy</p>
<p>If development has to be halted it may be a good compromise to just let the old extension provides what users need.</p>
</div></div><div id="c125"><div id="ct-125" data-comment-id="15533090" data-ismarkdown="true"><p>(In reply to Matt from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c124" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #124</a>)</p>
<blockquote>
<p>If you wish to fix the bug,  please do it.  But this evangelising has to stop.</p>
<p>I strongly encourage you to read the guidelines <a href="https://bugzilla.mozilla.org/page.cgi?id=etiquette.html">https://bugzilla.mozilla.org/page.cgi?id=etiquette.html</a> before you post in this or any bug.</p>
</blockquote>
<p>Hi,</p>
<p>I would like to work on this bug.</p>
<p>If yes, could you give me some pointers where to implement this?</p>
</div><div><p>Flags: needinfo?(unicorn.consulting)</p></div></div><div id="c126"><p>Thanks for offering to help. This bug is unlikely to be a good candidate to work on for a first patch though.</p><div><p>Flags: <span>needinfo?(unicorn.consulting)</span></p></div></div><div id="c127"><div id="ct-127" data-comment-id="15533223" data-ismarkdown="true"><p>Hi Kiebitz,</p>
<p>thanks for your offer to help. I&#39;m not a developer myself, but I&#39;m managing Thunderbird within my organization (80+ staff), advocate for it for 10+ years, and an author of a small TB addon.</p>
<p>I think what gave this bug renewed attention is not only the fact that it is 20 years old, but also the fact that sending unencrypted emails with encryption enabled in TB78+ (still the case in TB91) is more complex than with TB68 and enigmail.</p>
<p>There is are quite some discussions, bugs about this e.g.:</p>
<p>I&#39;m just a person trying to keep my colleagues motivated to continue using encryption, and Thunderbird. The introduction of TB78 severely complicates sending unencrypted emails (which is the majority) while having encryption enabled (some emails per day to certain people, and those emails must be encrypted, so no way to make it optional, as my colleagues will simply forget to check the (hidden) checkbox).</p>
<p>So if you have time, and motivation to help improving the workflow of sending (un)encrypted emails, and it doesn&#39;t have to be this bug, I think there are many other possibilities.</p>
<p>As TB91 is out since a couple of days and it retained the complex workflow of TB78, I fear that any improvement could only come with TB2022 (in one year?).</p>
<p>Some practical examples to improve the workflow in the meantime:</p>
<ol>
<li>an addon/setting which simplifies user-interaction to disable/enable encryption in the composer (right now, the &#34;do not encrypt&#34; button is hidden behind a small arrow - this is already a big obstacle for the majority of users).</li>
<li>an addon/setting which improves the error messages when you miss public keys of recipients (right now, there are 2 popups, and no way to simply click &#34;send unencrypted&#34;)</li>
</ol>
<p>I&#39;m sure there is more, these are just my ideas.</p>
<p>thanks,</p>
</div></div><div id="c129"><div id="ct-129" data-comment-id="15580994" data-ismarkdown="true"><p>(In reply to Magnus Melin [:mkmelin] from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c126" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #126</a>)</p>
<blockquote>
<p>Thanks for offering to help. This bug is unlikely to be a good candidate to work on for a first patch though.</p>
</blockquote>
<p>I do wonder why this has been released in the first place. Enigmail has served us really well for many years, it did everything we needed.</p>
<p>For me, convincing any of my peers to use PGP has become not only not easier but more difficult, and the absence of an &#34;encrypt whenever possible&#34; switch is a big part of the problem. Another is that  Thunderbird hasn&#39;t made it easier to exchange keys. This is the greatest showstopper. In any other trusted channels, key exchange happens without user interference in the background. With email this isn&#39;t possible because encryption is tagged on, rather than built in. But Thunderbird could at least work to make it as seamless as possible. But ok, this is for another bug report. Anyway, I hope we don&#39;t have to wait another full year for a fix.</p>
</div></div><div id="c130"><div id="ct-130" data-comment-id="15581153" data-ismarkdown="true"><p>As someone who has been educating individuals on security practices for over a decade and a half, and whose feedback has been integrated in various tools, including Enigmail, I have to say that I agree with those who see the lack of this functionality as a hindrance to the adoption of using PGP by users.</p>
<p>Related to the regression usability issues, I also submitted this <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1732074">suggestion</a> today. Comments and critique are encouraged.</p>
</div></div><div id="c131"><p>Nobody has mentioned that TB has created a separate keyring, which is as backwards as FF trying to replace the system DNS resolver.  The separate keyring functionality needs removed and it should use the system keyring.  It&#39;s not noise Matt and this ticket is old enough to have protests in the street.  Less than 5 lines of code would resolve most of the problem, this ticket isn&#39;t complicated, it&#39;s political.  The EFF should get involved.</p></div><div id="c132"><div id="ct-132" data-comment-id="15581472" data-ismarkdown="true"><p>&#34;Implement encrypt when possible&#34; is easy to implement.</p>
<p>The funktion encrypt all email already checks if there is a pgp key for encryption. If there is no key, it shows an error message. Instead of the error message just send the email unenrypted and rename the funktion encrypt all in auto encrypt.</p>
</div></div><div id="c133"><p>As long as it&#39;s all or nothing, and it should warn.  You don&#39;t want to be sending the same message both encrypted and unencrypted.  Even so, it still seems like a simple fix and it&#39;s astonishing that it&#39;s been decades now...</p></div><div id="c134"><p>If I may add my 2ct here: There should be (at least) two modes here: Opportunistic and strict. Where opportunistic encrypts mail, if possible. Strict does not send out any thing unencrypted.</p></div><div id="c136"><div id="ct-136" data-comment-id="15623164" data-ismarkdown="true"><p>(In reply to Bob Nelson from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c131" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #131</a>)</p>
<blockquote>
<p>Nobody has mentioned that TB has created a separate keyring, which is as backwards as FF trying to replace the system DNS resolver.  The separate keyring functionality needs removed and it should use the system keyring.  It&#39;s not noise Matt and this ticket is old enough to have protests in the street.  Less than 5 lines of code would resolve most of the problem, this ticket isn&#39;t complicated, it&#39;s political.  The EFF should get involved.</p>
</blockquote>
<p>Please contribute to the discussion in that ticket. The current owner of the issue thinks it should not be fixed for reasons that have not been totally explained, and which I do not find reasonable.</p>
</div></div><div id="c137"><div id="ct-137" data-comment-id="15623898" data-ismarkdown="true"><p>(In reply to Ahmad Gharbeia from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c136" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #136</a>)</p>
<blockquote>
<p>(In reply to Bob Nelson from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c131" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #131</a>)</p>
<blockquote>
<p>Nobody has mentioned that TB has created a separate keyring, which is as backwards as FF trying to replace the system DNS resolver.  The separate keyring functionality needs removed and it should use the system keyring.  It&#39;s not noise Matt and this ticket is old enough to have protests in the street.  Less than 5 lines of code would resolve most of the problem, this ticket isn&#39;t complicated, it&#39;s political.  The EFF should get involved.</p>
</blockquote>
<p>Please contribute to the discussion in that ticket. The current owner of the issue thinks it should not be fixed for reasons that have not been totally explained, and which I do not find reasonable.</p>
</blockquote>
<p>The NSA spends millions of dollars per year specifically to corrupt &#34;security by default&#34; and their biggest enemy is PGP because it uses secure and quantum resistant RSA, so it&#39;s no coincidence that this ticket exists for a &#34;security by default&#34; problem in the most used PGP email implementation.</p>
<p>A similar &#34;security by default&#34; corruption was the multi-million dollar PR campaign to remove DHE from browsers because services started using custom generated parameters, which was replaced by ECC with unexplained fixed parameters and DUAL-EC-DRBG which has been confirmed to have an NSA backdoor.  The internet is littered with government paid articles claiming ECC is more secure when all of the evidence says RSA/DHE is more secure and mathematically 521-bit ECC will be broken by quantum computers years before RSA-2048.</p>
<p>The explanation is an organized infiltration of OSS communities to weaken security standards.</p>
</div></div><div id="c138"><p>sorry (digital security has a problem fine): But please use other plattforms to discuss that not a bug ticket. thanks. Otherwise nobody will implement that feature.</p></div><div id="c139"><div id="ct-139" data-comment-id="15624416" data-ismarkdown="true"><p>(In reply to berggeist01 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c138" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #138</a>)</p>
<blockquote>
<p>sorry (digital security has a problem fine): But please use other plattforms to discuss that not a bug ticket. thanks. Otherwise nobody will implement that feature.</p>
</blockquote>
<p>I&#39;m not discussing implementing a feature, my ticket was for an introduced security vulnerability related to an already existing feature which has been merged into this 19 year old &#34;dump ticket&#34; as a duplicate.</p>
<p>I add information related to other intentionally introduced security vulnerabilities because it links them together for future investigations, especially when a big company gets behind the accusation of NIST curves being backdoored, like when Microsoft got behind the accusation of DUAL EC DRBG being backdoored after 7 years of people drawing attention to it just like this.</p>
<p>If this isn&#39;t the correct ticket for this discussion then my merged defect ticket isn&#39;t a duplicate and needs reopened.</p>
</div></div><div id="c141"><div id="ct-141" data-comment-id="15667053" data-ismarkdown="true"><p>I think klaus.r (in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c132">comment #132</a> ) is right.</p>
<ul>
<li>If the setting for an account is set to &#34;do not activate encryption by default&#34;, and a pgp key exists for the recipient, the Email will be encrypted.</li>
<li>If the setting for an account is set to &#34;require encryption by default&#34;, and no pgp key exists for the recipient, the behaviour is as before: a warnig message will be displayed.</li>
</ul>
</div></div><div id="c142"><p>I need that feature for my &#34;family&#34;. Default -&gt; no encryption otherwise to many errors and handling problems. If encryption is possible ask user to encrypt this message or do it by default. Keep in mind it must work for sMime too (I use that for the family) family == no technical user. With the addOn encryption if possible it works perfect.</p></div><div id="c143"><div id="ct-143" data-comment-id="15667084" data-ismarkdown="true"><p>What do you mean with</p>
<blockquote>
<p>the addOn encryption if possible</p>
</blockquote>
<p>Is there an addOn, that already does that?</p>
</div></div><div id="c145"><div id="ct-145" data-comment-id="15690631" data-ismarkdown="true"><p>During the past months, a group of Thunderbird developers and UI designers has spent a significant amount of time to discuss and plan improvements around the Thunderbird composer UI and its encryption settings. I want to inform you about a decision that is related to the enhancement request discussed in this bugzilla ticket.</p>
<p>We have come to the conclusion that we want the user to be in control, but that we want to make it as easy as possible for the user to control the encryption settings for an email.</p>
<p>Enabling or disabling encryption for an email should be a single click.</p>
<p>If encryption is currently disabled for an individual message, Thunderbird should automatically check whether using encryption for the current message is possible (without further user action). The check should be automatically repeated on every change to the recipient list. If the check discovers that encryption is possible, because we have valid and accepted keys for every entry in the recipient list, then Thunderbird will show a clear notification, reminding the user about the possibility to enable encryption. If the user wants to use encryption, the user can click the control to enable encryption.</p>
<p>If encryption is turned on in the composer window for an individual message (either because you have enabled encryption for new messages by default, or you are replying to a message that was encrypted, or because the user has manually turned on encryption for the individual message), but it is impossible to encrypt, because for at least one recipient we don&#39;t have a valid and accepted key available, then Thunderbird will show a clear notification about this fact, and the notification will offer the user a path to discover how to resolve the problem.</p>
<p>In other words, the configuration options will remain limited to &#34;encryption on&#34; or &#34;encryption off&#34;.</p>
<p>We do NOT want to implement a third option &#34;automatically encrypt if possible&#34;.  There have been suggestions to automatically enable encryption whenever it is possible, and automatically disable encryption as soon as encryption isn&#39;t possible. We have discussed this, but we consider it a risk.</p>
<p>We want to put the user in control, allow the user to control easily, and avoid surprising the user with unexpected behavior.</p>
</div></div><div id="c146"><div id="ct-146" data-comment-id="15690641" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #145</a>)</p>
<blockquote>
<p>We do NOT want to implement a third option &#34;automatically encrypt if possible&#34;.</p>
</blockquote>
<p>... at least not at this time or in the immediate future.</p>
</div></div><div id="c147"><p>Thank you for the detailed plan. Finally we can know what we can and can not expect from Thunderbird going forward. For me, this is a dealbreaker, unfortunately. This is just too complicated for me to constantly switch encryption on and off - even if it&#39;s just a single click. These clicks add up for every single mail when instead computers should be there to save us from useless repetitive work. Nevertheless I won&#39;t look back in anger. Thank you for a great piece of software which I happily used for over a decade. Time for something new, now. Bye.</p></div><div id="c148"><div id="ct-148" data-comment-id="15690658" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #145</a>)</p>
<blockquote>
<p>During the past months, a group of Thunderbird developers and UI designers has spent a significant amount of time to discuss and plan improvements around the Thunderbird composer UI and its encryption settings. I want to inform you about a decision that is related to the enhancement request discussed in this bugzilla ticket.</p>
<p>We have come to the conclusion that we want the user to be in control, but that we want to make it as easy as possible for the user to control the encryption settings for an email.</p>
<p>Enabling or disabling encryption for an email should be a single click.</p>
<p>If encryption is currently disabled for an individual message, Thunderbird should automatically check whether using encryption for the current message is possible (without further user action). The check should be automatically repeated on every change to the recipient list. If the check discovers that encryption is possible, because we have valid and accepted keys for every entry in the recipient list, then Thunderbird will show a clear notification, reminding the user about the possibility to enable encryption. If the user wants to use encryption, the user can click the control to enable encryption.</p>
<p>If encryption is turned on in the composer window for an individual message (either because you have enabled encryption for new messages by default, or you are replying to a message that was encrypted, or because the user has manually turned on encryption for the individual message), but it is impossible to encrypt, because for at least one recipient we don&#39;t have a valid and accepted key available, then Thunderbird will show a clear notification about this fact, and the notification will offer the user a path to discover how to resolve the problem.</p>
<p>In other words, the configuration options will remain limited to &#34;encryption on&#34; or &#34;encryption off&#34;.</p>
<p>We do NOT want to implement a third option &#34;automatically encrypt if possible&#34;.  There have been suggestions to automatically enable encryption whenever it is possible, and automatically disable encryption as soon as encryption isn&#39;t possible. We have discussed this, but we consider it a risk.</p>
<p>We want to put the user in control, allow the user to control easily, and avoid surprising the user with unexpected behavior.</p>
</blockquote>
<p>@Kai thank you for the feedback, the complete explanation and for all the people effort to design a good solution !</p>
<p>As for me and my teams, privacy coming first, it marks the end of Thunderbird as email client for us.</p>
</div></div><div id="c149"><div id="ct-149" data-comment-id="15690696" data-ismarkdown="true"><p>Thanks Kai for letting us know.</p>
<p>Explained like this, it seems quite straightforward, but could you at least post a few screen shots with the new desing during the change, so that there is feedback from this community of passionate people before it‚Äôs too late again.</p>
<p>You mentioned encryption, but cryptographic signing should be managed the same way.‚ÄÉHowever, encryption without signing shouldn‚Äôt be allowed, like other software already do (the reasons are explained here <a href="https://k9mail.app/2017/01/30/OpenPGP-Considerations-Part-II.html" rel="nofollow">https://k9mail.app/2017/01/30/OpenPGP-Considerations-Part-II.html</a>)</p>
<p>I agree that encryption (or even signing) shouldn‚Äôt be disabled automatically without the user being able to make a decision. That is a risk indeed.</p>
<p>What will happen with the surrogate openpgp-alias-rules.json as described in bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1644085">https://bugzilla.mozilla.org/show_bug.cgi?id=1644085</a> ?</p>
<p>May I let you know that there are instances when the encryption or signing appear or disappear randomly, which should be mended as well: see bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1744835">https://bugzilla.mozilla.org/show_bug.cgi?id=1744835</a></p>
<p>This would also help make the one click interaction design simpler: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1744757">https://bugzilla.mozilla.org/show_bug.cgi?id=1744757</a></p>
<p>And other annoying PGP bugs</p>
</div></div><div id="c151"><div id="ct-151" data-comment-id="15690736" data-ismarkdown="true"><p>That is the reason, why I must find a better solution for my whole family. bye bye thunderbird. I never understand, why it is not possible to implement a self configurable option. I work in the IT security more than 25 years. that behavior is the reason, why email encrypt is not mainstream. I believe what is better for people, close AddOn options with a new API and at the end after 20 years software is less helpful than before, unbelievable.</p>
<p>What is so difficult about an option &#34;Would you like to be informed when you can send an encrypted e-mail? Yes / no / automatically&#34;</p>
<p>But unfortunately that is normal, I see this behavior all day and then the companies wonder why more and more their software .... find it and it doesn&#39;t work.</p>
</div></div><div id="c152"><div id="ct-152" data-comment-id="15690778" data-ismarkdown="true"><p>It‚Äôs time to start contacting organizations who fund Mozilla and demand that they cut funding until Mozilla purges the NSA linked bad actors.</p>
<p>This isn‚Äôt the only ticket where they‚Äôve intentionally removed preexisting security features, claimed it‚Äôs a ‚Äúfeature‚Äù to re-add the removed features, and let the ticket sit for years (some 19 years) but never do anything with it.</p>
<p>I won‚Äôt trust Mozilla again until they re-add DHE, HPKP, TLS Session Binding, and this ticket.</p>
</div></div><div id="c153"><div id="ct-153" data-comment-id="15690840" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #145</a>)</p>
<blockquote>
<p>If encryption is turned on in the composer window for an individual message (either because you have enabled encryption for new messages by default, or you are replying to a message that was encrypted, or because the user has manually turned on encryption for the individual message), but it is impossible to encrypt, because for at least one recipient we don&#39;t have a valid and accepted key available, then Thunderbird will show a clear notification about this fact, and the notification will offer the user a path to discover how to resolve the problem.</p>
</blockquote>
<p>Can you give a bit more detail about the &#34;clear notification&#34; when encryption is enabled (by default) but impossible? - I hope there is no messing around with disabling the send-Button. That would be cumbersome.</p>
<blockquote>
<p>In other words, the configuration options will remain limited to &#34;encryption on&#34; or &#34;encryption off&#34;.</p>
<p>We do NOT want to implement a third option &#34;automatically encrypt if possible&#34;.  There have been suggestions to automatically enable encryption whenever it is possible, and automatically disable encryption as soon as encryption isn&#39;t possible. We have discussed this, but we consider it a risk.</p>
<p>We want to put the user in control, allow the user to control easily, and avoid surprising the user with unexpected behavior.</p>
</blockquote>
<p>About &#34;user in control&#34;: At least a part of the users (already the 81 here - CC-Size of this Bug), want control in that way, that they can say Thunderbird: &#34;Whenever I have the needed Keys, encrypt my messages.&#34; - In their situation, that&#39;s exactly the expected behavior.</p>
<p>I agree to the Risk of accidentally send sensitive information unencrypted. But in my opinion this consideration (vs. the risk of sending everything unencrypted - including possible sensitive information, because of &#34;encryption is too cumbersome&#34;) can&#39;t be solved globally. The option &#34;send encrypted if possible&#34; is requested and imho it should be made available, at least to users that are able to use about:config.</p>
</div></div><div id="c155"><div id="ct-155" data-comment-id="15690935" data-ismarkdown="true"><p>(In reply to deep_blue_ from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c148" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #148</a>)</p>
<blockquote>
<p>As for me and my teams, privacy coming first,</p>
</blockquote>
<p>If you argue about privacy, you should be worried about losing your</p>
</div></div><div id="c156"><div id="ct-156" data-comment-id="15690939" data-ismarkdown="true"><p>I would like to share arguments to support the plan from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment 145</a>.</p>
<p>I think it is very important that the user knows what will happen on send,</p>
<p>With old Enigmail I remember that I saw the following behavior:</p>
<ul>
<li>I started to compose an email, and typed the first recipient.</li>
<li>I saw that the user interface showed the icon for &#34;encryption on&#34;,</li>
<li>I typed the email</li>
<li>I added another recipient</li>
<li>I didn&#39;t look at the message status agin, I was convinced that encryption</li>
<li>However, I didn&#39;t have a key for the other recipient</li>
<li>When I hit send, the message was sent without encryption,</li>
</ul>
<p>I later tried to reproduce the scenario. At the time that</p>
<p>The problem with that UI was, shared controls were used for</p>
<p>In my opinion, to avoid the confusion that I ran into, an implementation would</p>
<p>With an UI like that, at the time I checked the message settings, I would have</p>
<p>Because I really wanted that email to be encrypted, I could have changed to</p>
<p>I think the above would require us to reserve a lot of space for these</p>
<p>(Remember, we need to implement a UI that works for users who don&#39;t</p>
<p>If there was agreement to use a sufficient amount of space for the UI</p>
<p>Let&#39;s look at another example.</p>
<p>Alice and Bob have exchanged keys once. Alice once configured the setting</p>
<p>I think this is a good argument for not simply making automatic decisions in the</p>
<p>You could argue that Alice might not care, because she has once enabled &#34;encrypt</p>
<p>A user interface like the one I described above (separate &#34;want&#34; and &#34;can&#34;)</p>
<p>Requiring the user to manually switch between encryption and encryption off</p>
<p>There has also been the suggestion to use a prompt at send time, that tells</p>
<p>My point is, an encryption of &#34;implement if possible&#34; has risks, and it would</p>
<p>It seems like a helpful improvement to start by giving good feedback to the</p>
<p>We&#39;re currently hoping that the intended implementation will be sufficiently</p>
<p>Once we have reached that milestone, if there&#39;s still a desire for an</p>
</div></div><div id="c157"><div id="ct-157" data-comment-id="15690940" data-ismarkdown="true"><p>If you want to make sure encryption is in place, you need a flag in your address book that says &#34;this recipient should always be encrypted&#34; so it can pop up a warning if the key is missing or expired.</p>
<p>You never want to send the same message both encrypted and unencrypted - it needs to be all or nothing.</p>
</div></div><div id="c158"><div id="ct-158" data-comment-id="15691180" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c156" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #156</a>)</p>
<blockquote>
<p>I would like to share arguments to support the plan from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment 145</a>.</p>
</blockquote>
<p>Thanks a lot for all the effort spent in the discussions and explaining this in detail!</p>
<p>(In reply to tkitt from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c153" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #153</a>)</p>
<blockquote>
<p>About &#34;user in control&#34;: At least a part of the users (already the 81 here - CC-Size of this Bug), want control in that way, that they can say Thunderbird: &#34;Whenever I have the needed Keys, encrypt my messages.&#34; - In their situation, that&#39;s exactly the expected behavior.</p>
<p>I agree to the Risk of accidentally send sensitive information unencrypted. But in my opinion this consideration (vs. the risk of sending everything unencrypted - including possible sensitive information, because of &#34;encryption is too cumbersome&#34;) can&#39;t be solved globally. The option &#34;send encrypted if possible&#34; is requested and imho it should be made available, at least to users that are able to use about:config.</p>
</blockquote>
<p>I completely agree with this.</p>
<p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c156" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #156</a>)</p>
<blockquote>
<p>In my opinion, to avoid the confusion that I ran into, an implementation would</p>
</blockquote>
<p>If you think adding an &#34;Encryption if possible&#34; option would require that, I&#39;d much prefer those extra UI elements to not having an &#34;Encryption if possible&#34; option at all. I personally don&#39;t see this as absolutely necessary, since users who select that &#34;Encryption if possible&#34; option have to do so explicitly, and maybe another option would be to show a huge warning sign in the options when doing so, explaining why this is &#34;dangerous&#34;?</p>
<blockquote>
<p>We&#39;re currently hoping that the intended implementation will be sufficiently</p>
<p>Once we have reached that milestone, if there&#39;s still a desire for an</p>
</blockquote>
<p>I&#39;m happy to try this out once it&#39;s there, but I&#39;m sceptical. So far, the missing &#34;Encryption if possible&#34; option has been what has bothered me most since the Thunderbird 78 upgrade that made Enigmail non-working. For me a &#34;It may come back, we just didn&#39;t have the time to implement it yet&#34; perspective was more motivating to wait than &#34;We don&#39;t want to have it back&#34;. So personally, I&#39;m at least considering to try out alternative email clients (like KMail, which has a &#34;Encrypt whenever encryption is possible&#34;) in the meantime as well.</p>
</div></div><div id="c159"><div id="ct-159" data-comment-id="15691181" data-ismarkdown="true"><p>The whole point is paternalism.</p>
<p>They say what is good for us users and what we don&#39;t want you to allow stupid users to do.</p>
<p>Your arguments (on safety) and ours (on usage) are both correct.</p>
<p>The point is that everyone has to decide for themselves. It&#39;s like a corona vaccination. Everyone can decide for themselves. But for that there has to be an option.</p>
<p>Conclusion: Install the option and, if in doubt, knowingly activate it via about: Config and everyone would be very happy. Bissel maybe even build in more configuration options -&gt; everyone can do it as they want. If you hack the Thunderbird settings, you will be able to read the email even after it is decrypted. Why do we talk here as long as politicians? Let&#39;s just implement it and the citizen decides for himself which option he wants to use. DEFAULT-off</p>
<p>E.g. I do not need an automatic I need a semi-automatic with a note when sending an email: You can send encrypted, if you want yes / no.</p>
</div></div><div id="c160"><div id="ct-160" data-comment-id="15691182" data-ismarkdown="true"><p>(In reply to berggeist01 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c159" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #159</a>)</p>
<blockquote>
<p>The whole point is paternalism.</p>
<p>They say what is good for us users and what we don&#39;t want you to allow stupid users to do.</p>
<p>Your arguments (on safety) and ours (on usage) are both correct.</p>
<p>The point is that everyone has to decide for themselves. It&#39;s like a corona vaccination. Everyone can decide for themselves. But for that there has to be an option.</p>
<p>Conclusion: Install the option and, if in doubt, knowingly activate it via about: Config and everyone would be very happy. Bissel maybe even build in more configuration options -&gt; everyone can do it as they want. If you hack the Thunderbird settings, you will be able to read the email even after it is decrypted. Why do we talk here as long as politicians? Let&#39;s just implement it and the citizen decides for himself which option he wants to use. DEFAULT-off</p>
<p>E.g. I do not need an automatic I need a semi-automatic with a note when sending an email: You can send encrypted, if you want yes / no.</p>
</blockquote>
<p>why is that way not possible?</p>
</div></div><div id="c161"><div id="ct-161" data-comment-id="15691185" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c156" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #156</a>)</p>
<blockquote>
<p>I would like to share arguments to support the plan from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment 145</a>.</p>
<p>I think it is very important that the user knows what will happen on send,</p>
<p>With old Enigmail I remember that I saw the following behavior:</p>
<ul>
<li>I started to compose an email, and typed the first recipient.</li>
<li>I saw that the user interface showed the icon for &#34;encryption on&#34;,</li>
<li>I typed the email</li>
<li>I added another recipient</li>
<li>I didn&#39;t look at the message status agin, I was convinced that encryption</li>
<li>However, I didn&#39;t have a key for the other recipient</li>
<li>When I hit send, the message was sent without encryption,</li>
</ul>
</blockquote>
<p>The old Enigmail, has an option, to show confirmation dialoge windows with info: send OpenPGP/S-MIME + signed/not signed + encrypted/unencrypted - Do you want to send ?</p>
<p>look at this screen of enigmail setting: <a href="https://www.enigmail.net/documentation/5-02-1.9.png" rel="nofollow">https://www.enigmail.net/documentation/5-02-1.9.png</a></p>
</div></div><div id="c162"><div id="ct-162" data-comment-id="15691199" data-ismarkdown="true"><p>(In reply to berggeist01 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c159" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #159</a>)</p>
<blockquote>
<p>E.g. I do not need an automatic I need a semi-automatic with a note when sending an email: You can send encrypted, if you want yes / no.</p>
</blockquote>
<p>This is basically the plan for how it will work yes (with a notification bar, not confirm dialog). Like Kai wrote, we hope that the implementation will be easy/clear enough that there is no need for automatics. Yes, it will be one click more for some situations. I think that is a reasonable weigh-off though.</p>
</div></div><div id="c163"><div id="ct-163" data-comment-id="15691207" data-ismarkdown="true"><p>(In reply to berggeist01 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c151" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #151</a>)</p>
<blockquote>
<p>As an option - standard off. But you change the API and say, &#34;Please explain to an 80 year old woman you have to select encryption before emailing me&#34;</p>
</blockquote>
<p>With what we plan you would not have to do that. If you want her to use encryption, you set up to use encryption. She would have to click a button in a notification if she wishes to NOT use encryption for that email.</p>
</div></div><div id="c164"><div id="ct-164" data-comment-id="15691231" data-ismarkdown="true"><p>I am excited.</p>
<p>Sorry, then my misunderstanding is due to my poor English.</p>
<p>My family members (the normal user) just need to see it and be asked to take action.</p>
<p>I still think that if you want it automatically, you should get it. I think in the end you could even make 2 e-mails out of it, if the e-mail cannot be encrypted because of a recipient (incl. Warning &amp; option :))</p>
</div></div><div id="c165"><div id="ct-165" data-comment-id="15691247" data-ismarkdown="true"><p>(In reply to Magnus Melin [:mkmelin] from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c163" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #163</a>)</p>
<blockquote>
<p>(In reply to berggeist01 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c151" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #151</a>)</p>
<blockquote>
<p>As an option - standard off. But you change the API and say, &#34;Please explain to an 80 year old woman you have to select encryption before emailing me&#34;</p>
</blockquote>
<p>With what we plan you would not have to do that. If you want her to use encryption, you set up to use encryption. She would have to click a button in a notification if she wishes to NOT use encryption for that email.</p>
</blockquote>
<p>Most people don&#39;t have encryption. My mom would get a &#34;Cannot send error message&#34; if the encryption is standard. She never understood that. She never finds a deactivation, and she thinks she can&#39;t send emails. And I have the next service call :)</p>
</div></div><div id="c166"><p>We&#39;ll add a key assistant to guide the user through sending if there is trouble.</p></div><div id="c167"><div id="ct-167" data-comment-id="15691287" data-ismarkdown="true"><p>Dear Kai,</p>
<p>Can it be assured that the openpgp-alias functionality will stay: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1644085">https://bugzilla.mozilla.org/show_bug.cgi?id=1644085</a> (?)</p>
<p>It would be great if encryption settings during composing would be available via an API, so a &#34;encrypt if possible&#34; would be an option after all via an addon. BTW: protonmail silently sends encrypted/unencrypted messages with one click of the send-button, with not even a warning. I&#39;m not agreeing with this behaviour myself, but it may give an indication how much one of the more secure email providers (I would say) compromises security in favor of workflow/usability.</p>
</div></div><div id="c168"><div id="ct-168" data-comment-id="15691303" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c155" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #155</a>)</p>
<blockquote>
<p>(In reply to deep_blue_ from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c148" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #148</a>)</p>
<blockquote>
<p>As for me and my teams, privacy coming first,</p>
</blockquote>
<p>If you argue about privacy, you should be worried about losing your</p>
</blockquote>
<p>Not only my privacy. Privacy of my teams.</p>
<p>Most of our external contact do not use pgp. My Teamates are awesome but most of them won&#39;t accept or bother to click on 80 percent of their mail to acknowledge that it won&#39;t be encrypted.</p>
<p>In UX point of view the implementation you want to set up add a quasi systematic click. Which add a huge usage cost on one of the primary feature of a mail client, in fact it double it as we pass from a simple click to 2 in most cases. I&#39;m pretty sure it won&#39;t help to democratize pgp feature.</p>
<p>In my case I send around fifty mail a day. around 30 can&#39;t be ciphered. With your implementation it means it add 30 popup and 30 click to do what I want. If you look at KMAIL it propose different behavior from automatic to ask anytime, letsencrypt extension let you do the same.</p>
<p>Just to be clear, I&#39;m nobody to say that you should implement it this way or another. I&#39;m just saying for my philosophy and usage the orientation of Thunderbird is not the good one for my personal use. I&#39;m pretty sure that not even 1% of the user use pgp en half of them don&#39;t bother to understand how it to work and pick up a random mail provider such as protonMail.</p>
<p>Beside the usage cost. I think Mail client nowadays should focus on democratizing privacy technology. Democratization come with easiness not difficulties. Ones again it&#39;s just a personal opinion from a simple user..</p>
</div></div><div id="c170"><div id="ct-170" data-comment-id="15691395" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #145</a>)</p>
<p>Thanks, for the explanation, and for everyone&#39;s effort to discuss it and their attempt at improvement.</p>
<p>I find the solution you propose acceptable.</p>
<p>Silently encrypting only to a subset of recipients but not others is not a sound practice, leading to a false sense of security, because the same message which is believed to warrant encryption will still be sent on the wire unencrypted, thus defying the aim of encryption. The message is -- generally -- the determinant here, not the recipient.</p>
<p>It could be argued that each recipient&#39;s threat analysis could dictate different choices in regard to encryption, even when the message is the same, for example when one recipient is in political/legal environment where certain communications could criminalise them but not the sender or other recipients. However, approaching the complexity of cases such as these can be left to supplementary implementations, i.e. extensions, the likes of which did exist for previous versions of Thunderbird/Enigmail. So the proper thing to ask for here is a good API that would allow others to build such more complex and customisable functionality on top of this most likely use-case.</p>
</div></div><div id="c171"><div id="ct-171" data-comment-id="15691440" data-ismarkdown="true"><p>(In reply to maison from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c169" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #169</a>)</p>
<blockquote>
<p>How to present it is a different debate which can be done on another thread.</p>
</blockquote>
<p>You are right, sorry for my little rant. It was just the most obvious point in the linked article and the one that raged me a bit.</p>
<blockquote>
<p>[...] there is absolutely no logical or cryptological reason to send encrypted email without signing.</p>
</blockquote>
<p>As stated above, I disagree. - Signing and encryption are measures to reach different security goals.</p>
<p>The primary security property reached by encryption is confidentiality. The primary security property reached with asymetric signatures is non-repudiation.</p>
<p>In the article they neglect the possibility of plausible deniability by making assumptions about the environment. While these assumptions are an option to decide which default settings to choose, this is imho no valid option when deciding which things to allow at all, because they are what they are - assumptions. And assumptions could, but don&#39;t have to be true - especially not always.</p>
<p>(Sorry for the a bit poor language quality. While writing I got some ideas regarding actual limits of my English language skills... I hope it&#39;s comprehensible.)</p>
</div></div><div id="c172"><div id="ct-172" data-comment-id="15691455" data-ismarkdown="true"><p>Regarding the discussion to encrypt without signing.</p>
<p>We don&#39;t need to discuss this in this ticket. We already support it, and currently we don&#39;t intend to remove this functionality. Each of signing and encryption can be separately used, or both, or none.</p>
<p>We think that there is value in enabling signing whenever you encrypt, that&#39;s why we automatically enable it for an individual message, if you enable encryption. However, we don&#39;t enforce it, and you can always manually disable signing.</p>
</div></div><div id="c173"><div id="ct-173" data-comment-id="15691486" data-ismarkdown="true"><p>I&#39;m very disappointed by this decision and as it looks like a lot of people are too. Why can&#39;t the developers acknowledge that there are use cases where &#34;encrypt if possible&#34; is the desired and needed option. Instead they&#39;re constructing cases where the user makes an error and then decide that nobody should have this option because of that. If you want to avoid user errors, have a clear indicator next to the &#34;To&#34; field with the status of the email encryption with green and red colours. At the moment it&#39;s &#34;hidden away&#34; grey on grey in the far right corner of the status bar.</p>
<p>Other email clients/plugins like K-9 Mail, PGP4Win (GPGOL) and Thunderbird &lt;78 have the option to auto encrypt. Have a read how K-9 handles it.</p>
<p><a href="https://k9mail.app/2018/02/26/OpenPGP-Considerations-Part-III-Autocrypt.html" rel="nofollow">https://k9mail.app/2018/02/26/OpenPGP-Considerations-Part-III-Autocrypt.html</a></p>
<p>If you think &#34;encrypt if possible&#34; is unsafe, just don&#39;t use that option for yourself. But don&#39;t make this decision for other users. If you wish, hide that option from the average user or have a big warning sign next to it.</p>
<p>If you stand by your decision, most users who use TB with encryption will have only 2 options, either stay with TB 68 or use another email client.</p>
<p>Let me know write about my use case which worked for many years until you broke it in two ways. I administer an office with about 20 users. All emails between these users should be encrypted. External emails are usually not encrypted, apart from emails to the accountant. I, as admin, set up all keys for the users and store all public keys in a read-only share. When the user logs in, all public keys get imported into the user&#39;s key ring. This way new keys will get populated automatically without user intervention.  Now you broke this workflow too by using your own key store without providing tools to automatically import new public keys. All users know that all internal email is encrypted by default. Now I can&#39;t use this option anymore without requiring a degree in computer science from my users.</p>
</div></div><div id="c174"><div id="ct-174" data-comment-id="15691518" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c172" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #172</a>)</p>
<blockquote>
<p>Regarding the discussion to encrypt without signing.</p>
<p>We don&#39;t need to discuss this in this ticket. We already support it, and currently we don&#39;t intend to remove this functionality. Each of signing and encryption can be separately used, or both, or none.</p>
<p>We think that there is value in enabling signing whenever you encrypt, that&#39;s why we automatically enable it for an individual message, if you enable encryption. However, we don&#39;t enforce it, and you can always manually disable signing.</p>
</blockquote>
<p>Well, only in theory.‚ÄÉCurrently TB forgets the sign settings and it can send email the wrong way without user notice: see the case study in bug <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1744835%E2%80%83It">https://bugzilla.mozilla.org/show_bug.cgi?id=1744835‚ÄÉIt</a> happened to me that unsigned email was sent several times in spite of the identity requiring it.‚ÄÉIn this regard the automatic signature joins the current debate: if your settings require a signature, but it can‚Äôt be provided, then the user should be warned as well and offered to remedy it.</p>
</div></div><div id="c175"><div id="ct-175" data-comment-id="15691546" data-ismarkdown="true"><p>(In reply to mozilla.org from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c173" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #173</a>)</p>
<blockquote>
<p>I administer an office with about 20 users. All emails between these users should be encrypted. External emails are usually not encrypted, apart from emails to the accountant.</p>
</blockquote>
<p>Alice and Bob work at your company. Charlies is not a member of your group.</p>
<p>Alice sends an email to Bob. In your setup, the email is encrypted. Bob reads the email. Bob clicks reply, which will quote the original email. Bob decides to CC Charlie, because he thinks the information may be useful to him.</p>
<p>In your setup, the encryption for the message is automatically and silently disabled, because there is no public key for Charlie. The previously exchanged message is now sent in plain text, including Bob&#39;s reply.</p>
<p>It sounds very risky to me to break the assumption that internal email is encrypted, simply by adding another recipient.</p>
<p>With the UI we&#39;re suggesting to implement, we&#39;d show a warning that encryption isn&#39;t possible. It would require Bob to think about the contents of the email, and whether it really should be sent to Charlie without encryption.</p>
</div></div><div id="c176"><div id="ct-176" data-comment-id="15691582" data-ismarkdown="true"><p>TL;DR: Please spare me any extra click for encryption.</p>
<p>I can understand the developers latest decision from a fundamentalist point of view. However, on the long term, it won&#39;t benefit proliferation of e2e encryption in emails -- and thus I can understand why some think this is intentional, given the hassles of operating encryption in TB in recent versions. (I still find myself checking in the options menu and do up to four clicks to select the correct encryption setting... I know there are two rather unimposing icons in the status bar but never got used to look there first as this would be an additional step. It really would help me if the send button had a green padlock or certificate icon.)</p>
<p>I&#39;m extremely unhappy with the situation a.t.m. and I&#39;m curious about the planned GUI and how it will work out for me.</p>
<p>If this is really about space, remove the security button and move it left next to the send button, naming it &#39;send encrypted&#39; (maybe with a drop-down &#39;send encrypted and unsigned&#39; + &#39;unencrypted but signed&#39;) and show it only if encryption is possible. If the accounts default is &#39;encrypt&#39;, change the send button to &#39;send unencrypted&#39; to make it clear.</p>
</div></div><div id="c177"><div id="ct-177" data-comment-id="15691638" data-ismarkdown="true"><pre><code>Alice sends an email to Bob. In your setup, the email is encrypted. Bob reads the email. Bob clicks reply, which will quote the original email. Bob decides to CC Charlie, because he thinks the information may be useful to him.

In your setup, the encryption for the message is automatically and silently disabled, because there is no public key for Charlie. The previously exchanged message is now sent in plain text, including Bob&#39;s reply.
</code></pre>
<p>&#34;Unencrypted quote-reply to encrypted message&#34; is a separate issue. Replies to encrypted messages MUST be encrypted by default regardless of whether a global &#34;encrypt where possible&#34; feature is implemented.</p>
<p>I propose a compromise: that the encrypted/unencrypted state change should be asymmetric. If an MUA decides that encryption is possible, it MAY enable encryption without prompting the user, so long as it indicates this state change clearly in the UI. If the MUA later decides (e.g. if another recipient has been added) that encryption will no longer be possible, it MUST prompt the user to choose a resolution. This way, upgrades are smooth and downgrades are noisy.</p>
</div></div><div id="c178"><div id="ct-178" data-comment-id="15691654" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c175" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #175</a>)</p>
<blockquote>
<p>Alice and Bob work at your company. Charlies is not a member of your group.</p>
<p>Alice sends an email to Bob. In your setup, the email is encrypted. Bob reads the email. Bob clicks reply, which will quote the original email. Bob decides to CC Charlie, because he thinks the information may be useful to him.</p>
<p>In your setup, the encryption for the message is automatically and silently disabled, because there is no public key for Charlie. The previously exchanged message is now sent in plain text, including Bob&#39;s reply.</p>
</blockquote>
<p>In our setup Charlie will be also one of the 20 internal users. We don&#39;t CC external parties. When we email external parties, then these emails contain only this one address in the To header.</p>
<blockquote>
<p>It sounds very risky to me to break the assumption that internal email is encrypted, simply by adding another recipient.</p>
</blockquote>
<p>See above and that&#39;s why there should be a visible (red) indicator, if the encryption status changes to unencrypted for any reason.</p>
<blockquote>
<p>With the UI we&#39;re suggesting to implement, we&#39;d show a warning that encryption isn&#39;t possible. It would require Bob to think about the contents of the email, and whether it really should be sent to Charlie without encryption.</p>
</blockquote>
<p>I guess we need to see what you mean by a &#34;notification will offer the user a path to discover how to resolve the problem&#34;. If it&#39;s a red indicator near the send button or the To field, that would be fine. If it&#39;s a popup &#34;Do you want to send this email without encryption&#34; with a OK button, then it might be ok. Anything more than this with several clicks and changing some settings which the average user won&#39;t understand is not ok.</p>
</div></div><div id="c179"><div id="ct-179" data-comment-id="15691724" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c175" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #175</a>)</p>
<blockquote>
<p>Alice sends an email to Bob. In your setup, the email is encrypted. Bob reads the email. Bob clicks reply, which will quote the original email. Bob decides to CC Charlie, because he thinks the information may be useful to him.</p>
<p>In your setup, the encryption for the message is automatically and silently disabled, because there is no public key for Charlie. The previously exchanged message is now sent in plain text, including Bob&#39;s reply.</p>
</blockquote>
<p>You can&#39;t control what a recipient does with a message - Bob could just as easily have forwarded it to Charlie.  You are inherently trusting the recipient when you send them a message.</p>
</div></div><div id="c180"><p>The solution proposed in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145">https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c145</a> would already be a huge improvement, so thanks for giving it some thought! What would be more useful than a bunch of people figuring out the supposedly best solution based on their old habits would be to actually implement a prototype, do some user testing with that, and then improve things incrementally based on the observations of that user testing. Having actual people test prototypes is the only thing that will help developers understand how users interact with a graphical interface, which is often quite different from how they imagined it would be used. Thanks for your work!</p></div><div id="c181"><div id="ct-181" data-comment-id="15691775" data-ismarkdown="true"><p>Which problem are we trying to solve</p>
<ol>
<li>Make it easy for the 1% of power users to use encryption safely in Thunderbird?</li>
<li>Get the 99% of users who do not use encryption to start using encryption?</li>
</ol>
<p>I want to solve question #2. For these users, convenience always wins over privacy/security. We should compare no encryption, which is what they use today, with automatically encrypt when possible.  For these users, nothing is less safe/private than what they do today.</p>
<p>I and all the users in this thread can do encryption with or without Thunderbird but are we designing for the existing users of encryption (us) or the untaped 99% of the market?</p>
<p>Regards, Hagar</p>
</div></div><div id="c182"><div id="ct-182" data-comment-id="15692244" data-ismarkdown="true"><p>Thanks so much @hagar and @kai for the hard work and for providing us an update.</p>
<p>My use case, which I believe is at the core of this ticket: I frequently email family and non-family.</p>
<ol>
<li>
<p>When family emails each other, we want encryption to be automatic and impossible to get wrong. No dialog boxes, no checking of indicators, no having to remember to click on something. Anything but this risks sending an unencrypted email.</p>
</li>
<li>
<p>If I cc other people, I need a warning.</p>
</li>
<li>
<p>If I mail non-family, no encryption. No dialog box, no clicking anything.</p>
</li>
</ol>
<p>This way I can send emails all day, every day, and not have to think or perform extra steps. And I can&#39;t make a mistake.</p>
<p>Can you confirm this behavior will be possible with your changes or that a plugin will be able to implement it?</p>
<p>(Other readers: What client have you switched to that allows this?)</p>
</div></div><div id="c183"><div id="ct-183" data-comment-id="15692353" data-ismarkdown="true"><p>Thanks for the update, Kai.</p>
<p>I&#39;d be happy if the proposed solution would suffice, but I&#39;m convinced, that the psychic effort of a click each mail is the actual problem here. Imagine, one day your favorite e2e encrypted chat messenger starts to expect you to activate encryption for each message. This is, what Thunderbird feels like since the upgrade and this won&#39;t change, until it works without that click.</p>
<p>It worked perfectly fine with enigmail for years. Neither I nor the people I taught mail encryption had any serious problems. I can&#39;t remember to send or receive any accidentally unencrypted mail ever. If you had higher security requirements, it was easily possible to choose the &#34;always encrypt&#34; option, so you could be really sure that no information is leaked. This could still be the default setting to reach your goal of security by default, even if &#34;encrypt if possible&#34; is offered as another choice. With regards to that I don&#39;t get the &#34;we want the user to be in control&#34; part to be honest. I think, there&#39;s a reasonably save way to implement &#34;encrypt if possible&#34;, which does neither violate the user expectations nor put them at risk. At the risk of repeating, what others brought up so far and essentially describing, how enigmail worked - with some tweaks - I want to address your concerns on the basis of the former working solution.</p>
<p>With respect to the distinction of the indicators for &#34;want/can encrypt&#34; i differentiate between &#34;want encrypt&#34; and &#34;will encrypt&#34;:</p>
<ul>
<li>The &#34;<strong>want</strong>&#34; state could be determined once in the settings as default (maybe offered as wizard on first keypair generation and maybe additionally overwritable per mail in the current dropdown), which frames the user expectation with the choices
<ul>
<li>No encryption</li>
<li>Encrypt if possible</li>
<li>Force encryption</li>
</ul>
</li>
<li>The &#34;<strong>will</strong>&#34; state - indicating if it will be effectively encrypted (<em>on</em>) or not (<em>off</em>) - should be placed as prominent indicator icon with intuitive feedback (like green/red). It should be possible to check the state with one glance before sending and to be sure, that the indicated action will be performed. Clicking on this indicator will switch between forced encrypted (<em>on</em> state) or forced unencrypted (<em>off</em> state) sending (so there is no way back to <em>encrypt if possible</em>, which is ok, as user interaction means, that some behavior should be enforced). Maybe some additional Icon hint could be added to see, if the choice is made automatically, which would vanish on the first manual interaction (like a star in the corner or a border color). On mouseover, additional information could be provided, why some state was chosen (&#34;manually switched on/off&#34;, &#34;key for X missing/expired/revoked&#34;). To address your concerns about missing the state change, when the recipient list is changed, an Icon/Color/Bordercolor could be added to the recipient itself. Another way to mitigate this would be an optional additional dialog to confirm the state, as enigmail offered it with a checkbox in the settings to activate the confirmation. In my experience the dialog is not needed, if the indicator is good enough.</li>
</ul>
<p>There would be no need to place another <em>want</em> indicator on a prominent place, as</p>
<ul>
<li>users with <em>No encryption</em> setting don&#39;t expect mails to be encrypted, but could turn it on for each mail via the <em>will</em> indicator</li>
<li>users with <em>Encrypt if possible</em> setting expect it to work out of the box, can check the effective state with a glance, and can enforce encryption on demand with one click  (this would be the same user effort and outcome as in your current plans) or deactivate encryption with two clicks on the <em>will</em> indicator</li>
<li>users with <em>Force encryption</em> setting expect all mails to be encrypted, but could turn it off for each mail via the <em>will</em> indicator</li>
</ul>
<p>Addressing your further remarks about breaking the user expectation, there are two cases which should be handled differently:</p>
<ul>
<li><strong>New mail</strong> / <strong>Reply to unencrypted mail</strong> (upgrading to encryption should never hurt)
<ul>
<li>No encryption: Nothing to do</li>
<li>Encrypt if possible
<ul>
<li><em>On recipient change</em>: Update <em>will</em> indicator (maybe recipient indicator), <em>on</em> if keys exist for all recipient emails, <em>off</em> otherwise</li>
<li><em>On send</em>: Provide resolution path if some key is expired/revoked, send encrypted mail otherwise</li>
</ul>
</li>
<li>Force encryption:
<ul>
<li><em>On send</em>: Provide resolution path if some key is missing/expired/revoked, send encrypted mail otherwise</li>
</ul>
</li>
</ul>
</li>
<li><strong>Reply to encrypted mail</strong>: Never downgrade to unencrypted. Provide resolution path, if some key is missing/expired/revoked, send encrypted mail otherwise</li>
</ul>
<p>The <strong>resolution path</strong> could include the options:</p>
<ul>
<li>try an update of the key via WKD / PKI</li>
<li>choose a key manually for each missing/expired/revoked key (a big enhancement here would be instructions, what to to - in my experience key expiration is the most confusing part for non-technical users some years after the workshop)</li>
<li>send unencrypted</li>
</ul>
<p>As far as i can tell, all of your concerns should be addressed with this approach. People with higher security standards could keep the default <em>force encryption</em> setting. The user expectations for the <em>encrypt if possible</em> are met in a save way, as replies to encrypted mails and all mails to recipients with expired/revoked keys never downgrade silently but lead to one general resolution dialog instead (where it could be sent unencrypted with one click). It would work perfectly well with your current plans of one prominent indicator and resolution path without additional UI changes. Am I missing something?</p>
<p>I also want to emphasize, that simplicity is the key to scale mail e2e encryption beyond the group of technical experienced people and firmly believe, that the option <em>encrypt if possible</em> will do way more good than harm. Please reconsider your decision and enable the user to choose a mostly frictionless encryption mode, which already has proven to work for years.</p>
</div></div><div id="c184"><div id="ct-184" data-comment-id="15697836" data-ismarkdown="true"><p>IMHO your <strong>threat models</strong> are wrong.</p>
<p>Doing proper security is first having a proper threat model (= what are the most likely attackers and flaws). A good part of this issue at stake seems to revolve around the fact that threat models appear to be wrong.</p>
<p>1/ The idea of never sending both encrypted and unencrypted relies on the hypothesis of an omniscient attacker, like a powerful state spying on people. It&#39;s a common scenario, but far from the only one. Your company, tech-savvy revengeful roommate, local restaurant with poor Wifi+poor server TLS... there are many credible scenarios without an omniscient attacker. If your recipient with encryption is the only possible victim amongst other recipients, it makes sense to still send it (now it gets trickier in multi-party discussions, but for a one-time send esp. Bcc the point is obvious) . In fact, <em>even if you don&#39;t know who are the most likely victims</em>, it still makes more sense to encrypt some than to encrypt none, statistically. Not to mention, of course, getting e2ee to the general public.</p>
<p>2/ The idea of never sending unsigned encrypted messages is a good one in theory, but relies on the hypothesis of an active attacker (= that can modify content). Same as previous point : it&#39;s common, but far from the only one. There are many (more) passive attacks, and if you consider the ergonomy problems we&#39;re having regarding encryption, you know you WILL find yourself in situations where you NEED to send an email immediately, but have no private key on the current computer for some reason. Better to send it encrypted than not encrypted at all : for all you know, the attacker may not be more than passive, and you can still confirm with your recipient via other channel that it&#39;s unsigned. STILL better than unencrypted.</p>
<p>There definitely IS value in not having all settings at mandatory maximum security all the time. All I&#39;m saying is &#34;false sense of security&#34; can&#39;t be an excuse for everything. <strong>Case in point</strong> : it has lead to less security.</p>
<p><strong>As for the GUI</strong> : it seems to me the encryption state (encrypted, signed, both or none) in the context of encrypt-if-possible CAN be displayed per recipient easily, in the autocomplete field. Look at how Vuetify does it : <a href="https://vuetifyjs.com/en/components/autocompletes/#item-and-selection" rel="nofollow">https://vuetifyjs.com/en/components/autocompletes/#item-and-selection</a></p>
<p>You shouldn&#39;t shy away from using colors, icons, and maybe tooltip for a full user help.</p>
<p>(Sorry I didn&#39;t mean to teach you security, more like get the point across for all participants)</p>
</div></div><div id="c185"><p>If I may reformulate : you need a better UI to dissipate the false sense of security &amp; clarify the situtation before sending, not block the feature (nor hide it behind dialogs). Thank you.</p></div><div id="c186"><div id="ct-186" data-comment-id="15697841" data-ismarkdown="true"><p>(In reply to damien.d from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c184" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #184</a>)</p>
<blockquote>
<p>IMHO your <strong>threat models</strong> are wrong...</p>
</blockquote>
<ul>
<li>1</li>
</ul>
</div></div><div id="c187"><p>Not sure why my plus 1 did not show properly +1</p></div><div id="c188"><p>Now, the current mode is still relevant for a minority of people who really <em>can&#39;t afford</em> a mistake (but this means they can afford to read the guide and take proper precautions). Maybe that can be present but disabled by default ? Thanks again.</p></div><div id="c190"><div id="ct-190" data-comment-id="15729547" data-ismarkdown="true"><p>Email use on Thunderbird, I&#39;m sure, will be <em>on average</em> less secure because of this regression: now you have to choose between &#34;all encrypted&#34; and &#34;never encrypted&#34;, and if you choose &#34;all encrypted&#34;, then you have to lose three seconds per email sent on average, because most sent email is unencrypted. So anyone <em>will</em> end up going &#34;never encrypted&#34; and then forget to encrypt.</p>
<p>Thus it is a regression from the former behaviour of Thunderbird (with Enigmail), even though I acknowledge the fact the latter was not perfect, however it worked better <em>on average</em>. To want a UI experience 100% perfect, you need to overhaul everything, I understand, but meanwhile you&#39;ll have thousands of people <em>deactivating</em> encryption because it is too much a hassle.</p>
<p>This regression is equivalent to put up a new notification after an upgrade that reads ‚Äúnow encryption is very difficult to use, would you like us to deactivate it for you?‚Äù</p>
</div></div><div id="c192"><div id="ct-192" data-comment-id="15797357" data-ismarkdown="true"><p>(In reply to nucleos from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c190" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #190</a>)</p>
<blockquote>
<p>... but meanwhile you&#39;ll have thousands of people <em>deactivating</em> encryption because it is too much a hassle.</p>
</blockquote>
<p>... or not updating and staying with 68.x where everything works as it should.</p>
</div></div><div id="c193"><p>How can this be a problem 20 years later??? wtf</p></div><div id="c195"><div id="ct-195" data-comment-id="15914125" data-ismarkdown="true"><p>I just sent an email and forgot to encrypt it, found my way here trying to find out why a email cannot automatically select encrypted where a key exists for the destination address, or a flag in the address book to always encrypt for this address.</p>
<p>How on earth does this problem exist so long, I&#39;m shocked at the 20 year age of this bug.</p>
<p>You guys have a fantastic product, and a tremendous thank you is in order, but please at the very least put a check box in the address book for always encrypt this address.</p>
<p>I&#39;d say it&#39;s time to wrap this one up, please give it consideration.</p>
<p>Bless you all and Thank you;</p>
</div></div><div id="c196"><div id="ct-196" data-comment-id="15914613" data-ismarkdown="true"><p>(In reply to George from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c195" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #195</a>)</p>
<blockquote>
<p>I just sent an email and forgot to encrypt it,</p>
</blockquote>
<p>While we&#39;re not yet ready to provide automatic encryption, we&#39;ll try to add a reminder, shown in that situation, in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1771122" title="VERIFIED FIXED - Remind user if encryption is possible but not enabled">bug 1771122</a>.</p>
<p>I&#39;ll also land a few strings here, that we could potentially need later.</p>
</div></div><div id="a635480172_600971"><div><p>Assignee: nobody ‚Üí kaie</p><p>Status: NEW ‚Üí ASSIGNED</p></div></div><div id="c198"><div id="ct-198" data-comment-id="15918379" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c196" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #196</a>)</p>
<blockquote>
<p>(In reply to George from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c195" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #195</a>)</p>
<blockquote>
<p>I just sent an email and forgot to encrypt it,</p>
</blockquote>
<p>While we&#39;re not yet ready to provide automatic encryption, we&#39;ll try to add a reminder, shown in that situation, in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1771122" title="VERIFIED FIXED - Remind user if encryption is possible but not enabled">bug 1771122</a>.</p>
<p>I&#39;ll also land a few strings here, that we could potentially need later.</p>
</blockquote>
<p>Bless you, that would be fantastic.</p>
<p>Thank you.</p>
</div></div><div id="c199"><div id="ct-199" data-comment-id="15986201" data-ismarkdown="true"><p>In the meantime we have released Thunderbird 102, which has the improvements that were previously announced.</p>
<p>Despite that, I understand that this doesn&#39;t yet address the request of this bug, which asks for fullly automated enabling or disabling of encryption.</p>
<p>I would like to make an attempt to offer this functionality, I have an experimental patch that I would like to offer for testing, and I&#39;m interested in feedback.</p>
<p>To enable the functionality, in account settings, besides the choices to enable or disable encryption for new message, the experimental patch adds a new third choice, which offers to automatically enable or disable encryption.</p>
<p>The thoughts behind the experimental implementation are:</p>
<ul>
<li>the user must be able to see on screen what will happen at the time the message will sent (prior to clicking the &#34;send&#34; button)</li>
<li>no prompts (the user shouldn&#39;t be required to perform any choice)</li>
<li>ensure the user can notice if encryption is automatically disabled</li>
</ul>
<p>The last point is my primary concern of any solution that we consider.</p>
<ul>
<li>The user composes an email, and enters one initial email address.</li>
<li>We can encrypt, we automatically enable encryption. We show status in the UI that encryption is enabled.</li>
<li>The user notices that encryption is enabled, makes a mental note that it is enabled, and feels safe about typing sensitive information.</li>
<li>The user prepares the email, writes all the text, and the user is almost ready to send it.</li>
<li>In the last minute, the user decides to add another recipient. But we cannot encrypt to that recipient.</li>
<li>Because the user is in automatic mode, we automatically disable encryption.</li>
<li>However, the user might not notice that we automatically disabled encryption</li>
</ul>
<p>It is very important to me that we&#39;d use an implementation that strongly makes the user aware, whenever encryption was previously enabled, but Thunderbird decides to automatically disable encryption (because it isn&#39;t possible, and because of the configured mode to automatically decide).</p>
<p>WIth the experimental patch that I&#39;m providing, a warning notification will be shown on screen, in bright yellow, which says &#34;End to end encryption was automatically disabled, because you cannot encrypt to at least one recipient.&#34;</p>
<p>My questions are:</p>
<ul>
<li>is this warning sufficient to address my concern? For users who had previously noticed that encryption was automatically turned on (visualized by the changing state of the encryption toolbar button), can we assume that this notification is sufficient for those users to realize that encryption turned off again?</li>
<li>can everyone asking for the full automatic behavior tolerate this notification?</li>
</ul>
</div></div><div id="c200"><p>(If you were reading this from the email notification, please read the updated comment in bugzilla, I&#39;ve fixed a few typos/mistakes.)</p></div><div id="c202"><div id="ct-202" data-comment-id="15986218" data-ismarkdown="true"><p>I like your approach in principle. I would just add that if a warning message is displayed, it should always be as specific as possible. ‚ÄúYou cannot encrypt to at least one recipient‚Äù is good, but vague. ‚ÄúYou cannot encrypt to the following recipients: &lt;foo&gt; &lt;bar&gt;‚Äù is much better. Warning messages that could have supplied more information but didn&#39;t are one of my pet hates. ;-) If there is too much detail to display at once, hide it under a dropdown or a link, but still make it available for those who really want it.</p>
<p>As a further enhancement, you could have hot buttons for remediation actions, e.g. &#34;remove these recipients&#34; or &#34;send without encryption&#34;, and refuse to send until the user explicitly picks one. This might be too intrusive for most though, so should probably be opt-in (and doesn&#39;t have to be addressed right away).</p>
</div></div><div id="c203"><div id="ct-203" data-comment-id="15986320" data-ismarkdown="true"><p>Andrew, thanks for your feedback. Did you already try the Thunderbird 102 release, and have you already experienced the improvements we made to encryption settings in the composer window?</p>
<p>(In reply to andrewg from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c202" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #202</a>)</p>
<blockquote>
<p>‚ÄúYou cannot encrypt to at least one recipient‚Äù is good, but vague. ‚ÄúYou cannot encrypt to the following recipients: &lt;foo&gt; &lt;bar&gt;‚Äù is much better.</p>
</blockquote>
<p>If there are many, the list can get long. We already have a way to communicate problematic recipients.</p>
<p>If the user explicitly enables encryption (either because that&#39;s the default setting for new messages, or because the user has explicitly clicked the &#34;encrypt&#34; toolbar button in an individal message), then we already give visual feedback about the encryption-incompatible recipients: We show the problematic email addresses with highlighting color.</p>
<p>But we do so, because in &#34;requested encryption&#34; mode, those really are causing a problem - cannot send encrypted.</p>
<p>Please remember that we&#39;re talking about this new mode, when the user has explicitly stated they simply want it to be handled automatically. If the user has said they want it to be automatically decided, then why should we highlight what the problematic recipients are? They are no problematic recipients in automatic mode, because we can send without encryption.</p>
<p>My impression is, the request for an automatic mode is &#34;don&#39;t bother me if encryption isn&#39;t possible&#34;. And highlighting problematic recipients, whether it&#39;s with a color, or listing them in a text message, could be considered as too much bothering. The user might still get the impression that something is wrong and must be fixed. But in automatic mode, there is no need to fix anything.</p>
<p>I see three scenarios:</p>
<ul>
<li>the user really doesn&#39;t care, then the user will be ok with not encrypting, and doesn&#39;t need the information what&#39;s causing the non-encryption</li>
<li>the user really wants to encrypt. In that case, the user should override the automatic decision and click the encryption button to require it. And that, already today in the production 102 version, will give the user the feedback you&#39;re asking for. Thunderbird will highlight all recipients that are problematic, will display a summary, and will offer to open a key assistant, which will show in detail which users are problematic, and will even attempt to assist the user to resolve this situation</li>
<li>the user doesn&#39;t think encryption is necessary, but the user is simply curious to learn what&#39;s causing the problem. In this scenario, I&#39;d prefer to avoid that we have to introduce an additional mechanism to give this feedback to the user, I&#39;d prefer to reuse the feedback described above. If the user is curious, they can enable encryption, look at the state, and if they decide they don&#39;t want to encrypt, they can manually turn it off again.</li>
</ul>
<p>So in order to fulfil your request, we&#39;d have to make the user aware of the above approach that can be used to see the list of problematic users.</p>
<p>Maybe this could be achieved by using a different notification message, like:</p>
</div></div><div id="c204"><div id="ct-204" data-comment-id="15986325" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c199" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #199</a>)</p>
<blockquote>
<p>My questions are:</p>
<ul>
<li>is this warning sufficient to address my concern?</li>
</ul>
</blockquote>
<p>Yes</p>
<blockquote>
<ul>
<li>can everyone asking for the full automatic behavior tolerate this notification?</li>
</ul>
</blockquote>
<p>I worry that noob users are confused about it and any user gets annoyed about it if they often write to several people in one email and at least to one of the recepients can not be encrypted. I worry that users say &#34;this encryption thing is just complicated annoying, I just disable it to get rid of this warning every time, so all just works fine again like in the good old time.&#34;</p>
<p>I would prefer not to have any whistles and bells in automatic mode.</p>
<blockquote>
<p>Thunderbird decides to automatically disable encryption (because it isn&#39;t possible, and because of the configured mode to automatically decide).</p>
</blockquote>
<p>If sending to two recepients, and to one can be encrypted and to the other not, will in automatic mode the mail to the encrypt-possible recipient be encrypted but to the other recipient sent in plain text, or will be sent to both in plain text? The latter case I think would not be &#34;Encryption when possible&#34; that is the title of this bug? Maybe there should be a visual toggle for every recipient that shows if for that recipient encryption is enabled or not, and it should be encrypted for all recipients where possible?</p>
</div></div><div id="c205"><div id="ct-205" data-comment-id="15986372" data-ismarkdown="true"><blockquote>
<p>Andrew, thanks for your feedback. Did you already try the Thunderbird 102 release, and have you already experienced the improvements we made to encryption settings in the composer window?</p>
</blockquote>
<p>Yes, I did! The changes do look good, they&#39;re a great improvement so far.</p>
<blockquote>
<p>If there are many, the list can get long. We already have a way to communicate problematic recipients.</p>
</blockquote>
<p>Yes, and these are great for must-encrypt mode, as they clearly indicate problems that must be addressed. But do you intend that these will also be used in opportunistic-encryption mode? If so, they seem visually too strong for what we&#39;re talking about here, as they imply an error rather than a warning. Or do you mean a similar kind of notification with different (less urgent) styling?</p>
<p>If we want to remain consistent with the To: field notifications, maybe a better idea would be to highlight (subtly) which recipients <em>can</em> be encrypted to, rather than those which can&#39;t. This way, the user would still get visual feedback but in a much less intrusive manner. These could even be displayed regardless of the opportunistic-encryption setting (a gentle reminder of what is possible, rather than what is impossible).</p>
</div></div><div id="c206"><div id="ct-206" data-comment-id="15986442" data-ismarkdown="true"><p>After thinking about it a bit more, there are four classes of recipient in a 2x2 matrix of &#34;encryption possible&#34; (i.e. valid key available) vs &#34;encryption required&#34;. It is no longer possible to set &#34;encryption required&#34; per recipient, but the concept is still useful when thinking about visual cues in the (must|may|don&#39;t) encrypt operation modes.</p>
<p>If encryption is impossible but required, then the current yellow warnings are perfect. If encryption is impossible but not required, then the default styling is appropriate. Considering the other two possibilities:</p>
<ul>
<li>If encryption is possible but not required, then perhaps a subtle decoration (e.g. a lock badge) could be added to the name, similar to the address-book dot (and with a similar tooltip explanation).</li>
<li>If encryption is possible and required, then should the default styling be used (since no action need be taken), or something distinct (as a visual confirmation)?</li>
</ul>
<p>One big caveat is that putting a lock symbol of any kind in the To: field has a variety of possible (mis)interpretations. But relying solely on colours raises accessibility concerns.</p>
</div></div><div id="c207"><p>Also re styling, is it intentional that the &#34;Encrypt&#34; button in the compose window doesn&#39;t darken when selected, even though similar buttons elsewhere in the UI (e.g. &#34;Quick Filter&#34;) do? I think if the &#34;Encrypt&#34; button darkened on selection then encryption mode changes would be much less likely to get overlooked.</p></div><div id="c208"><div id="ct-208" data-comment-id="15986556" data-ismarkdown="true"><p>Regarding visualization: I agree with andrewg, that an information about the recipients without key would be good.</p>
<p>If you disagree with showing them entirely, at least the (text) hint how to get them visible would be good.</p>
<p>I haven&#39;t tested 102 or the patch so far, but both sounds like good improvements.</p>
</div></div><div id="c209"><p>Perhaps the simplest UX change would be to alter the address-book dot from a two-state to a three-state field: &#34;not in address book&#34;, &#34;in address book&#34;, &#34;in address book and has an encryption key&#34;. The third state could be denoted by a rosette.</p></div><div id="c210"><div id="ct-210" data-comment-id="16017896" data-ismarkdown="true"><p>(In reply to Arvidt from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c204" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #204</a>)</p>
<blockquote>
<p>Alternative without &#34;Warning&#34;: If encryption is not possible for all recipients, after clicking on send button open a rather neutral popup saying &#34;Send mail unencrypted. &lt;OK&gt; / &lt;Cancel&gt;&#34;</p>
</blockquote>
<p>My understanding of advice from UI designers is, such prompts really need to be avoided, this idea is also an important part of our recent rework of the user interface.</p>
<p>Prompts in the middle are surprising, and it&#39;s far too easy to click the wrong button (muscle memory).</p>
<blockquote>
<p>If sending to two recepients, and to one can be encrypted and to the other not, will in automatic mode the mail to the encrypt-possible recipient be encrypted but to the other recipient sent in plain text, or will be sent to both in plain text?</p>
</blockquote>
<p>No, I&#39;m convinced that a message must be sent consistently. Either encrypt to everyone, or not encrypt to anyone.</p>
<p>If a recipient receives an encrypted message, and the client shows that the message is encrypted, the recipient should be safely able to conclude that the message content traveled with encryption to everyone.</p>
</div></div><div id="c211"><div id="ct-211" data-comment-id="16017903" data-ismarkdown="true"><p>(In reply to andrewg from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c205" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #205</a>)</p>
<blockquote>
<blockquote>
<p>If there are many, the list can get long. We already have a way to communicate problematic recipients.</p>
</blockquote>
<p>Yes, and these are great for must-encrypt mode, as they clearly indicate problems that must be addressed. But do you intend that these will also be used in opportunistic-encryption mode? If so, they seem visually too strong for what we&#39;re talking about here, as they imply an error rather than a warning. Or do you mean a similar kind of notification with different (less urgent) styling?</p>
</blockquote>
<p>No. If encryption is optional, I do NOT want highlighting of missing-key-recipients, to avoid that the user perceives them as problematic/blocking. (They aren&#39;t in optional/automatic mode.)</p>
<blockquote>
<p>If we want to remain consistent with the To: field notifications, maybe a better idea would be to highlight (subtly) which recipients <em>can</em> be encrypted to, rather than those which can&#39;t. This way, the user would still get visual feedback but in a much less intrusive manner. These could even be displayed regardless of the opportunistic-encryption setting (a gentle reminder of what is possible, rather than what is impossible).</p>
</blockquote>
<p>(In reply to andrewg from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c206" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #206</a>)</p>
<blockquote>
<ul>
<li>If encryption is possible but not required, then perhaps a subtle decoration (e.g. a lock badge) could be added to the name, similar to the address-book dot (and with a similar tooltip explanation).</li>
</ul>
</blockquote>
<p>As you say, there&#39;s the risk of misinterpretation. The user could falsely conclude that recipient-shown-with-lock means that the message WILL be encrypted to that recipient.</p>
<p>I think we shouldn&#39;t overload the UI. If the user wants that information, they can get it. FYI, I didn&#39;t mention this yet, but another way to get this information is by opening the &#34;Key Assistant&#34; from the OpenPGP/SMIME toolbar button, it will explain exactly what you have and what is missing.</p>
<blockquote>
<ul>
<li>If encryption is possible and required, then should the default styling be used (since no action need be taken), or something distinct (as a visual confirmation)?</li>
</ul>
</blockquote>
<p>If all is good, the enabled encryption button seems sufficient feedback, there&#39;s no need to stress the user&#39;s attention further.</p>
<p>(In reply to andrewg from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c207" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #207</a>)</p>
<blockquote>
<p>Also re styling, is it intentional that the &#34;Encrypt&#34; button in the compose window doesn&#39;t darken when selected, even though similar buttons elsewhere in the UI (e.g. &#34;Quick Filter&#34;) do? I think if the &#34;Encrypt&#34; button darkened on selection then encryption mode changes would be much less likely to get overlooked.</p>
</blockquote>
<p>For me, both buttons already darken in the same way when clicked/selected. If they aren&#39;t for you, please file a separate bug. (Let&#39;s try to keep this long bug focussed.)</p>
<p>(In reply to andrewg from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c209" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #209</a>)</p>
<blockquote>
<p>Perhaps the simplest UX change would be to alter the address-book dot from a two-state to a three-state field: &#34;not in address book&#34;, &#34;in address book&#34;, &#34;in address book and has an encryption key&#34;. The third state could be denoted by a rosette.</p>
</blockquote>
<p>I&#39;ve never noticed such a &#34;dot&#34; and cannot even find it now. I think such subtle notifications cannot be understood (or even noticed) without a clear explanation.</p>
<p>However, what I&#39;m learning from your feedback, you really want some kind of feedback, that immediately answers the question &#34;WHO are the recipients that caused automatic encryption to get disabled?&#34;.</p>
<p>The solution that would require the least amount of new work, and reuse as much of what we already have, would be like this:</p>
<p>&#34;Automatic End-to-end encryption was disabled, because you cannot encrypt to at least one recipient. [Learn More...]&#34;</p>
<p>If the user clicks the &#34;Learn More&#34; button, we bring up the &#34;Key Assistant&#34; popup (the same one that you can access at any time from the toolbar button). That dialog already explains it in detail, and provides assistance, if desired.</p>
</div></div><div id="c212"><div id="ct-212" data-comment-id="16017935" data-ismarkdown="true"><blockquote>
<p>I&#39;ve never noticed such a &#34;dot&#34; and cannot even find it now. I think such subtle notifications cannot be understood (or even noticed) without a clear explanation.</p>
</blockquote>
<p>There is a tooltip that appears on mouse hover, but I agree this may not be sufficiently intuitive.</p>
<blockquote>
<p>The solution that would require the least amount of new work, and reuse as much of what we already have, would be like this:</p>
</blockquote>
<p>This sounds perfect. As you say, it would be wise to keep the UX changes to a minimum; there is nothing fundamentally wrong with what is there now.</p>
<p>Thanks, and sorry for the flood of half-baked ideas... ;-)</p>
</div></div><div id="c213"><div id="ct-213" data-comment-id="16026648" data-ismarkdown="true"><p>We must make a decision for the following scenario.</p>
<p>Today, with manual encryption control, when replying to an encrypted message, we automatically enable encryption for the reply. (The idea is, because we&#39;re quoting the original message by default, sending a reply unencrypted would leak the original message.)</p>
<p>Today, if the reply cannot be sent encrypted, the user is forced to manually and deliberately disable encryption.</p>
<p>What should happen in automatic mode?</p>
<p>To find a decision, we should ask, what&#39;s the purpose of this automatic encryption mode?</p>
<p>In my opinion, the intention is to have an automatic upgrade to more security, if easily possible. But the mode shouldn&#39;t result in a downgrade of security for existing conversations.</p>
<p>In my opinion, even in automatic mode, we should require the user to manually disable encryption, when replying to an encrypted message.</p>
</div></div><div id="c214"><div id="ct-214" data-comment-id="16027068" data-ismarkdown="true"><p>My view is that the old behavior was for the knowledgeable people who really cared about encryption, who were willing to use Thunderbird for encrypted messages (manual mode)</p>
<p>The new automatic mode is for everyone else who did not use encryption because it was too much trouble.</p>
<p>The question we should ask ourselves is, does this automatic mode make emails more secure in total, for all Thunderbird users? Improving the experience for the tiny tiny group of people who used manual mode, is the thinking that made this bug be ignored for 20+ years.</p>
</div></div><div id="c215"><div id="ct-215" data-comment-id="16027072" data-ismarkdown="true"><p>(In reply to hagar2272 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c214" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #214</a>)</p>
<blockquote>
<p>The question we should ask ourselves is, does this automatic mode make emails more secure in total, for all Thunderbird users? Improving the experience for the tiny tiny group of people who used manual mode, is the thinking that made this bug be ignored for 20+ years.</p>
</blockquote>
<p>No. Automatically disabling encryption without the user‚Äôs agreement is a bad idea, especially if you received the message encrypted. You take the responsibility of divulging it in spite of the sender putting trust in you. It can‚Äôt be the developer‚Äôs ‚Äúfault‚Äù.</p>
<p>I totally agree with Kai‚Äôs experienced point of view: in case of an impossible automatic decision, the user should be the decision maker. Since the automatic mode is enabled, it‚Äôs not preposterous that the user knows encryption is still working and they can do something about improving the situation (like deciding to not send, but find the PGP key before another action or whatever they decide).</p>
<p>As with your home, no matter what kind of doors and keys you have, you still see your doors and windows; and sometimes there is something that makes that they don‚Äôt work properly.</p>
</div></div><div id="c216"><p>I agree with maison completely - it&#39;s never right to auto disable encryption when it&#39;s expected.  The user can easily disable it if need be...</p></div><div id="c217"><div id="ct-217" data-comment-id="16027180" data-ismarkdown="true"><p>(In reply to maison from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c215" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #215</a>)</p>
<p>It depends on what goals and assumptions you are making.</p>
<p>You are trying to avoid harm, minimizing unencrypted messages sent that were meant to be sent encrypted or not at all.</p>
<p>The majority of Thunderbird&#39;s encryption thinking is following the minimizing harm strategy.</p>
<p>You need to balance both strategies. This bug has been open for 20 years because not enough people were using encryption for it to be a priority. Is that not a bigger problem than a few emails sent unencrypted by mistake?</p>
</div></div><div id="c218"><div id="ct-218" data-comment-id="16027225" data-ismarkdown="true"><p>(In reply to hagar2272 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c214" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #214</a>)</p>
<p>Completely agree. This is a <a href="https://www.rfc-editor.org/rfc/rfc7435.html#section-1.2" rel="nofollow">new perspective stated in RFC7435 (‚ÄúOpportunistic Security: Some Protection Most of the Time‚Äù)</a> (implemented e.g. by <a href="https://autocrypt.org/" rel="nofollow">Autocrypt</a>). Search also for &#34;opportunistic&#34; in this thread.</p>
<p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c213" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #213</a>)</p>
<blockquote>
<p>have an automatic upgrade to more security, if easily possible. But the mode shouldn&#39;t result in a downgrade of security</p>
</blockquote>
<p>Well, could be that the sender encrypted automatically without the sender knowing anything about encryption (and therefore not as maison wrote, have &#34;putting trust&#34; in the receiver), which would be perfect automatic &#34;encrypt when possible&#34; security upgrade. When the receiver then cannot reply encrypted, than it&#39;s just back to the baseline (unencrypted) that would have been also when the automatic &#34;upgrade&#34; would not have taken place in the first step.</p>
</div></div><div id="c219"><p>We should look at the whole conversation (message thread) as one. If the conversation is encrypted I think it&#39;s totally fine to require action to break out of that mode.</p></div><div id="c220"><div id="ct-220" data-comment-id="16027255" data-ismarkdown="true"><p>(In reply to hagar2272 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c217" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #217</a>)</p>
<blockquote>
<p>You are trying to avoid harm, minimizing unencrypted messages sent that were meant to be sent encrypted or not at all.</p>
<p>You need to balance both strategies. This bug has been open for 20 years because not enough people were using encryption for it to be a priority. Is that not a bigger problem than a few emails sent unencrypted by mistake?</p>
</blockquote>
<p>It might not be a problem in some cases, but in some cases it might be, you can only speculate. Downgrading security is not maximizing the benefits; say it to activists, journalists, doctors, people living in dictatorship.</p>
<p>(In reply to Arvidt from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c218" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #218</a>)</p>
<blockquote>
<p>Well, could be that the sender encrypted automatically without the sender knowing anything about encryption (and therefore not as maison wrote, have &#34;putting trust&#34; in the receiver), which would be perfect automatic &#34;encrypt when possible&#34; security upgrade. When the receiver then cannot reply encrypted, than it&#39;s just back to the baseline (unencrypted) that would have been also when the automatic &#34;upgrade&#34; would not have taken place in the first step.</p>
</blockquote>
<p>This is pure speculation. You can‚Äôt assume that someone didn‚Äôt know what they were doing, unless you have proof to that and even that is a case by case. When you don‚Äôt know, you have to take the conservative hypothesis.</p>
</div></div><div id="c221"><div id="ct-221" data-comment-id="16027273" data-ismarkdown="true"><p>I would like to clarify the scope of this bug. It is NOT about opportunistic encryption. The bug here is not about automatically trusting keys.</p>
<p>The enhancement proposed here still requires that the user has marked OpenPGP public keys as accepted. For OpenPGP, I define the feature request &#34;encrypt when possible&#34; as &#34;it is already possible, because the user has already configured a recipient&#39;s public key: obtained and accepted&#34;.</p>
<p>This enhancement is strictly limited to automatically enabling or disabling the encryption flag for individual messages, depending on what&#39;s already possible based on existing configuration.</p>
</div></div><div id="c222"><div id="ct-222" data-comment-id="16027275" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c221" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #221</a>)</p>
<blockquote>
<p>I would like to clarify the scope of this bug. It is NOT about opportunistic encryption. The bug here is not about automatically trusting keys.</p>
</blockquote>
<p>Thank you for clarifying but I am still confused.</p>
</div></div><div id="c223"><div id="ct-223" data-comment-id="16027344" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c221" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #221</a>)</p>
<blockquote>
<p>I would like to clarify the scope of this bug. It is NOT about opportunistic encryption.</p>
</blockquote>
<p>Sure, not as a whole, the scope of this bug touches only a small part of the concept of opportunistic security.</p>
<p>BTW I recommend to read Kai&#39;s very fine <a href="https://thunderbird.topicbox.com/groups/e2ee/Tcb4b3decdb7e66ce-M5ab8e40dd0176ddc43518f37/require-encryption-vs-optional-encryption" rel="nofollow">TB user group analysis</a> on the mailing list where this bug was referred to as the implementation of a &#34;relaxed mode&#34;.</p>
</div></div><div id="c224"><div id="ct-224" data-comment-id="16027765" data-ismarkdown="true"><p>(In reply to hagar2272 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c222" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #222</a>)</p>
<blockquote>
<p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c221" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #221</a>)</p>
<blockquote>
<p>I would like to clarify the scope of this bug. It is NOT about opportunistic encryption. The bug here is not about automatically trusting keys.</p>
</blockquote>
<p>Thank you for clarifying but I am still confused.</p>
</blockquote>
<p>I see the answer to your question is in the comment of Kai you partly cited: Automatic accepting keys is just not in scope. The problem of getting the needed keys (and accept them) is not addressed in this bug.</p>
<blockquote>
<p>Why are you assuming that the user wants to encrypt if they did not mark accept the keys as accepted?</p>
</blockquote>
<p>Kai wrote the opposite of your presumption:</p>
<blockquote>
<p>[...] The enhancement proposed here still requires that the user has marked OpenPGP public keys as accepted. [...]</p>
</blockquote>
<p>Imho your questions are just not relevant in context of this bug. And solving this bug will not address them. The first one might be a topic for another bug. (if not already existing)</p>
</div></div><div id="c225"><div id="ct-225" data-comment-id="16027772" data-ismarkdown="true"><p>I would advocate for enabled encryption and ask if it is not possible, if the user replies to an encrypted message.</p>
<p>In my opinion it is a narrow case. So the number of mails where the user has to take manual action is quite limited.</p>
<p>If encryption get&#39;s disabled I see the already stated problem: The content of the encrypted message is leaked and I think it&#39;s a good idea to avoid this. - This sounds like a downgrade for me, too.</p>
<p>To keep encryption enabled also ensures consistent behavior: In manual mode encryption would be active (btw: automatic!).</p>
<p>(In reply to Arvidt from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c218" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #218</a>)</p>
<blockquote>
<p>[...] Well, could be that the sender encrypted automatically without the sender knowing anything about encryption [...]</p>
</blockquote>
<p>I see absolutely no evidence to assume, that the sender doesn&#39;t know anything about encryption.</p>
</div></div><div id="c226"><div id="ct-226" data-comment-id="16027778" data-ismarkdown="true"><p>(In reply to hagar2272 from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c222" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #222</a>)</p>
<blockquote>
<p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c221" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #221</a>)</p>
<blockquote>
<p>I would like to clarify the scope of this bug. It is NOT about opportunistic encryption. The bug here is not about automatically trusting keys.</p>
</blockquote>
</blockquote>
<p>Ignore my message 222, I missread KaiE 221, sorry for any confusion it causes.</p>
<p>My goal is not to design this small automatic vs manual action, but to change the mindset of how Thunderbird think about encryption and security.</p>
</div></div><div id="c227"><div id="ct-227" data-comment-id="16027779" data-ismarkdown="true"><blockquote>
<p>In my opinion, even in automatic mode, we should require the user to manually disable encryption, when replying to an encrypted message.</p>
</blockquote>
<p>This is the only correct approach. Consider the following scenario:</p>
<p>Alice sends an encrypted message to Bob. Mallory cannot read or modify the encrypted message body in transit, but may be able to modify the headers. If Mallory were to (say) add a Reply-to: header so that replies were directed to an address visually similar to Alice‚Äôs, Bob may inadvertently reply to that address instead, and is likely to quote-include Alice‚Äôs original plaintext. Silently disabling encryption for yhe reply enables a downgrade attack on Alice‚Äôs original message, regardless of Alice‚Äôs encryption preferences.</p>
<p>There are ways to mitigate this attack (signed headers etc) but there are no circumstances in which silent downgrades in the middle of conversation threads are desitable, so they should be made impossible in principle.</p>
<p>The same considerations also apply to forwarded messages, so the same downgrade protections should be enforced there also.</p>
</div></div><div id="c228"><div id="ct-228" data-comment-id="16027781" data-ismarkdown="true"><p>Off-topic but an honest question to all in this thread, trying to understand where people are coming from.</p>
<p>How many of you regularly send or receive encrypted emails in Thunderbird? If so how are you handling reading the email on your phone?</p>
<p>I know there are secure email phone apps but I am too lazy to set up and maintain all of that, since I basically get zero encrypted emails.</p>
</div></div><div id="c229"><div id="ct-229" data-comment-id="16027783" data-ismarkdown="true"><p>hagar2272, this bug is already very long and complicated to follow, and for anyone who wants to join the discussion, it&#39;s already hard to jump in. Please move side questions to the e2e mailing list:</p>
<p>The discussion in this bug should focus on the described enhancement, on the decisions we need to make, and the directly related arguments.</p>
</div></div><div id="c230"><p>Sadly, this issue is blocking me from implementing encryption in our company for internal mails. Either our employees have to explicitly enable encryption for all internal mails or they have to explicitly disable encryption for all external mails. This is neither accepted nor practical.</p></div><div id="c231"><div id="ct-231" data-comment-id="16120003" data-ismarkdown="true"><p>If you are interested to test an experimental implementation and give feedback, please see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1795981" title="NEW - Collect feedback on an experimental implementation for encrypt-if-possible (bug 135636)">bug 1795981</a>.</p>
<p>Once the experiment is completed, I will provide a summary of the results here.</p>
<p>I&#39;m doing this separation to keep this long ticket here as short as possible.</p>
</div></div><div id="c232"><div id="ct-232" data-comment-id="16123123" data-ismarkdown="true"><p>I&#39;m surprised nobody has yet given feedback for the experimental implementation in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1795981" title="NEW - Collect feedback on an experimental implementation for encrypt-if-possible (bug 135636)">bug 1795981</a>.</p>
<p>While we&#39;re waiting for test feedback, let me continue here with more general comments.</p>
<p>I would like to update the bug subject to make it more obvious that this ticket is NOT about opportunistic encryption.</p>
<p>Once we have that &#34;automation&#34; ability, we need to offer the ability to the user.</p>
<p>Currently, the initial experimental implementation in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1795981" title="NEW - Collect feedback on an experimental implementation for encrypt-if-possible (bug 135636)">bug 1795981</a> offers that through hidden preferences, only.</p>
<p>One option is to start with this limitation. Only offer it through hidden prefs, and allow interested parties (like you) to start experimenting with it, and identify bugs.</p>
<p>In a second step, we could eventually offer discoverable preferences in the standard Thunderbird settings.</p>
<p>An important question for that is:</p>
<p>In other words - do you think users might want this automation for their first email account, but not for their second email account?</p>
<p>(And we&#39;d need to make a decision. If we think that some users need different configuration per account, and we want to offer that flexibility, then it would be a per-account configuration for everyone.)</p>
<p>In a third step, we could consider to advertise this &#34;automation&#34; ability to the user, and make it easy to enable it.</p>
<p>For example, we have recently introduced reminder notifications, that can remind the user that encryption is possible.</p>
<p>Likewise, currently we have a notification if encryption is already enabled, but NOT possible. (This currently offers the choices &#34;disable encryption&#34; and &#34;resolve&#34; for OpenPGP, only.)</p>
<p>As explained further above, the current suggestion is, whenever we automatically disable encryption (after it was already enabled), we inform the user - in the initial experiment implemented using a prompt. This prompt could offer a checkbox for the third pref &#34;never notify me when encryption is automatically disabled&#34;.</p>
<p>If we decided to have those interactive ways to enable the prefs, here&#39;s a worry: If we make those prefs per-account, then users might be confused why in emails for another account those actions are not happening automatically.</p>
<p>To avoid this potential confusion we could make the prefs global (same automation configuration for all email accounts).</p>
<p>I would like to limit this bug to the &#34;first step&#34; that I described above, and start with hidden prefs for the initial implementation.</p>
<p>I would like to file follow-up bugs for step 2 (user visible configuration) and step 3 (interactively assist the user to enable encryption automation).</p>
<p>After, or in parallel to steps 2 and 3, we could also discuss if it makes sense to change the defaults (e.g. use the automation to enable encryption by default).</p>
<p>I&#39;ll file yet another bug to track the default decision.</p>
<p>So, we&#39;re still at step 1. Please comment in this bug if you have general comments on step 1 - or - comment in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1795981" title="NEW - Collect feedback on an experimental implementation for encrypt-if-possible (bug 135636)">bug 1795981</a> if you&#39;re willing to participate in testing the initial implementation attempt for step 1.</p>
<p>I&#39;ll shortly file the other bugs. If you have comments on step 2, step 3 or the default, please make them in the new bugs that I&#39;ll announce in the next comment.</p>
</div><div><p>Summary: Implement &#34;Encryption when possible&#34; option for OpenPGP and S/MIME ‚Üí Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.</p></div></div><div id="c236"><p>After just 21 years, it seems like something is finally changing!</p></div><div id="c237"><div id="ct-237" data-comment-id="16188401" data-ismarkdown="true"><p>No information text nor a button when using S/MIME yet.</p>
<p>Anyway. An informative text and a button to toggle a default decision might be a nice add-on for the compose windows, but we all want an automatic system. TB knows all valid S/MIME certs I ever received and can enable or disable encryption itself.</p>
</div></div><div id="c238"><p>To get the S/MIME notification you need to set pref mail.smime.remind_encryption_possible to true. This was initially already true but was switched to false due to performance problems. These problems should now be solved, see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1791130" title="RESOLVED FIXED - Fix underlying issue for S/MIME function being very slow (usually can&#39;t use them for suggesting encryption since that makes Thunderbird very slow)">bug 1791130</a>, TB 102 test version available in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1791130#c9" title="RESOLVED FIXED - Fix underlying issue for S/MIME function being very slow (usually can&#39;t use them for suggesting encryption since that makes Thunderbird very slow)">bug 1791130 comment #9</a>.</p></div><div id="a660886753_600971"><div><p><a href="https://bugzilla.mozilla.org/attachment.cgi?id=9285614&amp;action=edit" title="Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin">Attachment #9285614</a> -
        Attachment description: WIP: Bug 135636 - Implement automatic enabling and disabling of encryption (still experimental). ‚Üí Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin</p></div></div><div id="c239"><div id="ct-239" data-comment-id="16329032" data-ismarkdown="true"><p>I&#39;ve marked the attached patch for review, I think it&#39;s ready for landing it (pending code review).</p>
<p>I suggest to initially keep the functionality disabled by default, and require the user to explicitly turn it on.</p>
<p>Following is a description of the current behavior.</p>
<pre><code>If the new feature is enabled,
  (global pref: mail.e2ee.auto_enable)
AND
the user has configured end-to-end encryption for themselves,
AND
  the user has already received/obtained valid S/MIME certificates
  for ALL recipients of an email the user is composing,
  OR
  the user already has obtained valid OpenPGP public keys
  for ALL recipients of an email the user is composing,
  and the user has already marked all required public keys
  as accepted,
only then:
  The mail composer UI will automatically turn on
  end-to-end encryption for this message,
  and automatically select the technology that is usable,
  OpenPGP or S/MIME.
</code></pre>
<p>This should make it clear that this is NOT &#34;opportunistic encryption&#34;.</p>
<p>For other users, who do NOT have the new pref enabled,</p>
<p>If the user then makes further modifications to the list of email</p>
<p>There&#39;s an additional new pref to influence that scenario:</p>
<p>If the user has both auto_enable and auto_disable set to true,</p>
<p>(The pref mail.e2ee.auto_disable has no effect if the user has manually turned</p>
<p>Automatically disabling has the following risk:</p>
<p>The user might have started composing the email,</p>
<p>To prevent this fatal mistake, based on not having paid</p>
<p>A third pref mail.e2ee.notify_on_auto_disable can be used to disable this notification.</p>
<p>As a reminder of existing behavior: We already enable encryption automatically,</p>
<p>Besides changing the list of recipients, there&#39;s another action that could</p>
<p>Depending on the configuration state of the identities (e2ee is activated in account settings, or isn&#39;t),</p>
<p>Here is one related change, which ALL e2ee users will get, even if the new</p>
<p>If the user has manually enabled encryption for the message, or we&#39;re replying</p>
<p>When saving a draft, we&#39;ll remember whether the user has manually enabled</p>
<p>If encryption was explicitly enabled by the user (or automatically enabled because</p>
<p>Here is a visible change that users will get who have the new auto_enable pref turned on:</p>
<p>Today, in e2ee account settings, we have the following old pref:</p>
<p>&#34;Default settings for sending messages&#34; with choices &#34;disable&#34; or &#34;enable encryption for new messages&#34;.</p>
<p>This pref makes no sense when turning on the global new pref &#34;mail.e2ee.auto_enable&#34;.</p>
<p>With the new code, if auto_enable is turned on, that pref will be hidden from the UI.</p>
<p>Instead, at the same position in the pref UI, the following explanation text will be shown:</p>
<p>&#34;Encryption will be automatically enabled, based on available recipient keys or certificates. You may override the automatic decision.&#34;</p>
<p>If, in addition, the pref auto_disable is turned on, too, then the following, slightly different text will be shown:</p>
<p>&#34;Encryption will be automatically enabled or disabled, based on available recipient keys or certificates. You may override the automatic decision.&#34;</p>
<p>If you wish to try the current state of this work yourself, there are test builds here:</p>
</div></div><div id="c240"><div id="ct-240" data-comment-id="16329072" data-ismarkdown="true"><blockquote>
<p>and automatically select the technology that is usable</p>
</blockquote>
<p>How does this relate to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1806328" title="RESOLVED DUPLICATE - Switching encryption technology should change when switching sender identity based on its preference">bug 1806328</a> where sometimes the wrong technology is chosen? The bug is still present in 102, I didn&#39;t try beta.</p>
</div></div><div id="c241"><div id="ct-241" data-comment-id="16329504" data-ismarkdown="true"><p>(In reply to PS from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c240" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #240</a>)</p>
<blockquote>
<p>How does this relate to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1806328" title="RESOLVED DUPLICATE - Switching encryption technology should change when switching sender identity based on its preference">bug 1806328</a> where sometimes the wrong technology is chosen? The bug is still present in 102, I didn&#39;t try beta.</p>
</blockquote>
<p>I&#39;ve commented in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1675737" title="NEW - OpenPGP and S/MIME: Preferred encryption technology, automatic selection is not yet implemented">bug 1675737</a>, which is a duplicate of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1806328" title="RESOLVED DUPLICATE - Switching encryption technology should change when switching sender identity based on its preference">bug 1806328</a>.</p>
<p>The current patch of this <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">bug 135636</a> uses the technology preference configuration to automatically switch to the configured preferred technology, if encryption is possible with two technologies, and a preferred technology is configured.</p>
<p>However, the current patch will switch technology if only one technology can be used with encryption. Maybe that&#39;s wrong. Maybe we should never automatically switch to the non-preferred technology.</p>
<p>We can handle that in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1675737" title="NEW - OpenPGP and S/MIME: Preferred encryption technology, automatic selection is not yet implemented">bug 1675737</a>, but preferably after the work here has completed, because of likely code overlap. (The fix will also have to handle the scenario, where the new auto_enable pref is set to false.)</p>
</div></div><div id="c242"><div id="ct-242" data-comment-id="16329637" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c239" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #239</a>)</p>
<p>Great work, I like the concept and the preferences etc. very much!  Thank You!</p>
</div></div><div id="c243"><div id="ct-243" data-comment-id="16330189" data-ismarkdown="true"><p>(In reply to Kai Engert (:KaiE:) from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c239" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment #239</a>)</p>
<blockquote>
<p>I&#39;ve marked the attached patch for review, I think it&#39;s ready for landing it (pending code review).</p>
<p>[...]</p>
<p>Following is a description of the current behavior.</p>
</blockquote>
<p>That sounds great, thank you so much!</p>
</div></div><div id="c244"><div id="ct-244" data-comment-id="16331115" data-ismarkdown="true"><p>Does this solve the behaviour of always defaulting to OpenPGP on initial compose window opening with S/MIME-only accounts when other identities are configured for OpenPGP? There seems to be some change in the relevant parts of MsgComposeCommands.js, but I&#39;m not able to check this out myself.</p>
<p>Relevant: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1793278" title="RESOLVED FIXED - E2EE does not select S/MIME even if OpenPGP is not selected">Bug 1793278</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1793431" title="RESOLVED DUPLICATE - new message/reply to message: Thunderbird selects &#34;OpenPGP&#34; instead of &#34;S/MIME&#34;">Bug 1793431</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1796781" title="RESOLVED DUPLICATE - thunderbird tries to use OpenPGP for signing non-encrypted messages when only S/MIME is configured">Bug 1796781</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1800427" title="RESOLVED DUPLICATE - When writing a new email, Thunderbird chooses the wrong encryption method by default (OpenPGP, when only S/MIME is configured for the account)">Bug 1800427</a></p>
</div></div><div id="c245"><p>Primarily, the patch in this bug focuses on fixing this bug.</p></div><div id="c246"><p>I have a fix for the issue from <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=135636#c244" title="RESOLVED FIXED - Automatically enable or disable end-to-end encryption (OpenPGP or S/MIME) if it&#39;s possible based on existing user and recipient configuration.">comment 244</a> (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1793278" title="RESOLVED FIXED - E2EE does not select S/MIME even if OpenPGP is not selected">bug 1793278</a>), and I have merged the patch here to be on top of that fix.</p></div><div id="a661679111_600971"><div><p><a href="https://bugzilla.mozilla.org/attachment.cgi?id=9285614&amp;action=edit" title="Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin">Attachment #9285614</a> -
        Attachment description: Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin ‚Üí WIP: Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin</p></div></div><div id="a661683075_600971"><div><p><a href="https://bugzilla.mozilla.org/attachment.cgi?id=9285614&amp;action=edit" title="Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin">Attachment #9285614</a> -
        Attachment description: WIP: Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin ‚Üí Bug 135636 - Implement automatic enabling and disabling of encryption (turned off by default). r=mkmelin</p></div></div><div id="c248"><div><p>Status: ASSIGNED ‚Üí RESOLVED</p><p>Closed: <span title="2002-04-20 15:53 PDT" data-time="1019343203">21 years ago</span> ‚Üí <span title="2023-03-30 09:50 PDT" data-time="1680195057">18 hours ago</span></p><p>Resolution: --- ‚Üí FIXED</p></div></div><div id="c249"><div id="ct-249" data-comment-id="16350835" data-ismarkdown="true"><p>The patch has landed. It&#39;s mostly as described in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=239" title="VERIFIED INVALID - Must click twice in Unix Aurora">bug 239</a>.</p>
<p>One difference: The preference mail.e2ee.notify_on_auto_disable currently has no effect, even if set to true.</p>
<p>We need to reach agreement on how to exactly this notification will be shown to the user.</p>
</div></div><div id="a662194586_36541"><div><p>Target Milestone: --- ‚Üí 113 Branch</p></div></div>



</div></div>
  </body>
</html>
