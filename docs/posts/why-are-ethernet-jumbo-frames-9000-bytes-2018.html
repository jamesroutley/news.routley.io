<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.dave.tf/post/jumbo-frames/">Original</a>
    <h1>Why are ethernet jumbo frames 9000 bytes? (2018)</h1>
    
    <div id="readability-page-1" class="page"><div>
	<div>
		<div>
    <p><span>Written by</span>
        David Anderson
        </p></div>
		


		

		<p>In a marathon of <a href="https://www.youtube.com/watch?v=wTVfAMRj-7E">Bryan Cantrill interviews</a>, Bryan
wondered out loud why “jumbo” ethernet frames are 9000 bytes. These
days, that’s not a particularly jumbo number, and it’s also a bizarre
number. Why not a power of two, or at least a nice round 10000?</p>

<p>Thankfully, Wikipedia has a link to source material. It was a
<a href="https://noc.net.internet2.edu/i2network/jumbo-frames/rrsum-almes-mtu.html">discussion between Internet2 and the US federal government</a>,
and they settled on 9k for 4-ish reasons.</p>

<p>First, they wanted to send 8192 byte TCP frames, so “something a bit
larger than 8k” was desirable, to account for the various protocol
headers. The memo doesn’t specify specifically why they wanted 8k
payloads, but one possible reason is that the default NFSv2 packet
size is 8192 bytes. There’s certainly a performance incentive to not
fragment NFS traffic.</p>

<p>Second, at the time of this discussion, it turns out most routers
could handle 9k ethernet frames. However, above that number the
universe of working vendors started to drop off, so 9k was a sensible
upper bound for rapid adoption.</p>

<p>Third, it was thought that <a href="https://en.wikipedia.org/wiki/Path_MTU_Discovery">PMTU discovery</a> would work better
if everyone agreed on common MTU values, so there was a desire to
standardize on <em>something</em>, rather than just encourage people to max
out the MTU capabilities of their current hardware. In hindsight, it’s
not clear to me that standardizing MTU sizes did help PMTU discovery
(i.e. it’s still broken for most people with a <a href="https://en.wikipedia.org/wiki/Point-to-Point_Protocol_over_Ethernet">PPPoE</a> hop in
their network path), but I don’t have more context on the thought
process there.</p>

<p>And finally: “9000 is an easy number to remember.” Presumably 10000
would have been even easier, but that ran afoul of the previous point
about what existing network hardware supported.</p>

<p>And so, Internet2 and the US government agreed on a 9k MTU, and it
became a mandatory requirement for equipment sold to the
government. So, all vendors made sure they could do 9k jumbo frames to
be able to get the juicy contracts.</p>

<p>Since then, it seems that nobody’s seriously pushed for a standardized
increase. Perhaps understandable given how hilariously little adoption
there’s been of jumbo frames on the wider internet. We’re still
sending mostly 1500 bytes, and that seems to be going mostly fine, so
why bother?</p>

<p>Still, it’s an interesting detour into a niche part of our industry’s
history. Turns out the answer to “why 9000” is a bunch of random
situational factors, and “9000 sounds nice.” It’s the kind of random
“eh, that’s probably fine” decision that turns seamlessly into the
unchanging bedrock of computing. Just like how <code>/usr</code> only exists
because early Unix couldn’t fit on a single hard drive, so a second
one got mounted at <code>/usr</code>.</p>

<p>And of course, IPv6 supports 65k packets out of the box, and already
has an extension in case you want to send more than 65k per
packet. Meanwhile, the internet will be over here, still sending 1500
bytes at a time.</p>

		
	</div>

	
</div></div>
  </body>
</html>
