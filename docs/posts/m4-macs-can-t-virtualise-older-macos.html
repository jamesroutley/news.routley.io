<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2024/11/14/m4-macs-cant-virtualise-older-macos/">Original</a>
    <h1>M4 Macs can&#39;t virtualise older macOS</h1>
    
    <div id="readability-page-1" class="page"><div data-first_letter="I">
		<p>If you’ve already got a new M4 Mac and tried to run a macOS virtual machine on it, then you might have been disappointed. It seems that M4 chips can’t virtualise any version of macOS before 13.4 Ventura. So before you trade in or pass on your M1, M2 or M3 Mac, if you need access to older VMs, you might like to check whether this affects you.</p>
<p>I’m indebted to Csaba Fitzl for drawing my attention to this problem, and for reporting it to Apple in Feedback FB15774587. It has also been reported as <a href="https://github.com/utmapp/UTM/issues/6794" target="_blank" rel="noopener">affecting UTM</a>, and I believe affects all other macOS virtualisation software for Apple silicon.</p>
<h4>The bug</h4>
<p>Running a macOS VM for any version before 13.4 Ventura on an M4 Mac results in a black screen, and the VM fails to boot. This is true whatever settings are used in the virtualiser, even if it’s set to boot the VM in Recovery mode. It’s also true when that VM has been built on that Mac: although that appears to complete successfully, when first run that VM opens as a black screen and never proceeds with personalisation and setup.</p>
<p>Currently the only way to run a VM with macOS prior to 13.4 Ventura is to do so on a host with an M1, M2 or M3 chip.</p>
<h4>Can this be fixed?</h4>
<p>Unfortunately, as this bug prevents the VM from booting, there’s no reliable way to access its log to discover what’s going wrong there. There’s no sign of the failure in the host’s log either: the host appears to initialise its Virtio and other support normally, without errors or faults. After those, virtualisation processes on the host fall silent as they wait for the VM to start, which never happens.</p>
<p>There is a useful clue in Activity Monitor, though: in its CPU pane, despite being allocated multiple virtual cores, only one is seen to be active on the host. That implies the failure is occurring before the VM kernel boots the other cores, an event that occurs early during the kernel boot phase. Until that point, pre-boot phases and the kernel run on just a single CPU core.</p>
<p>macOS 13.4 updated iBoot to version 8422.121.1, so at first sight the VM could be failing when running older firmware. That doesn’t appear likely, as version 8422.121.1 was also installed in the 12.6.6 security update, so 12.7.x shouldn’t suffer this problem, but it does.</p>
<p>It thus appears most likely that this bug strikes in the early part of kernel boot, in which case the most feasible solution would be to fix the bug in macOS kernels prior to 13.4, and promulgate new IPSW image files for those. I suspect that’s very unlikely to happen, and as far as I’m aware it would be the first time that Apple has issued revised IPSWs.</p>
<h4>Which macOS can you virtualise?</h4>
<p>Support for lightweight virtualisation of macOS on Apple silicon Macs was still in progress in the first version of macOS to run on M1 chips, Big Sur. You therefore cannot create or run Big Sur VMs.</p>
<p><span><img data-attachment-id="83601" data-permalink="https://eclecticlight.co/macos12/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg" data-orig-size="1555,972" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="macos12" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=940" src="https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg" alt="macos12" width="1555" height="972" srcset="https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg 1555w, https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=150&amp;h=94 150w, https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=300&amp;h=188 300w, https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=768&amp;h=480 768w, https://eclecticlight.co/wp-content/uploads/2024/11/macos12.jpg?w=1024&amp;h=640 1024w" sizes="(max-width: 1555px) 100vw, 1555px"/></span></p>
<p>The first versions that can run in VMs are macOS 12 Monterey, although prior to 12.4 they can sometimes be a bit fractious. They also have major limitations, such as not supporting shared folders with the host.</p>
<p><span><img data-attachment-id="83605" data-permalink="https://eclecticlight.co/macos121/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg" data-orig-size="2080,1302" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="macos121" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=940" src="https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg" alt="macos121" width="2080" height="1302" srcset="https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg 2080w, https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=150&amp;h=94 150w, https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=300&amp;h=188 300w, https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=768&amp;h=481 768w, https://eclecticlight.co/wp-content/uploads/2024/11/macos121.jpg?w=1024&amp;h=641 1024w" sizes="(max-width: 2080px) 100vw, 2080px"/></span></p>
<p>This is 12.1 with its old System Preferences, running happily on an M3 Pro.</p>
<p><span><img data-attachment-id="83602" data-permalink="https://eclecticlight.co/macos13/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg" data-orig-size="1557,971" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="macos13" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=940" loading="lazy" src="https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg" alt="macos13" width="1557" height="971" srcset="https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg 1557w, https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=150&amp;h=94 150w, https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=300&amp;h=187 300w, https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=768&amp;h=479 768w, https://eclecticlight.co/wp-content/uploads/2024/11/macos13.jpg?w=1024&amp;h=639 1024w" sizes="(max-width: 1557px) 100vw, 1557px"/></span></p>
<p>macOS Ventura should run well on M1, M2 and M3 hosts, and 13.4 and later on M4 hosts too.</p>
<p><span><img data-attachment-id="83603" data-permalink="https://eclecticlight.co/macos14/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg" data-orig-size="1600,971" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="macos14" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=940" loading="lazy" src="https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg" alt="macos14" width="1600" height="971" srcset="https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg 1600w, https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=150&amp;h=91 150w, https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=300&amp;h=182 300w, https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=768&amp;h=466 768w, https://eclecticlight.co/wp-content/uploads/2024/11/macos14.jpg?w=1024&amp;h=621 1024w" sizes="(max-width: 1600px) 100vw, 1600px"/></span></p>
<p>macOS Sonoma should run even better on all current Apple silicon Macs, and delivers a much improved display with autoscaling. However, 14.2 and 14.2.1 don’t automatically support shared folders because of a bug that was fixed in 14.3.</p>
<p><span><img data-attachment-id="83604" data-permalink="https://eclecticlight.co/macos15/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg" data-orig-size="1600,972" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="macos15" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=940" loading="lazy" src="https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg" alt="macos15" width="1600" height="972" srcset="https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg 1600w, https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=150&amp;h=91 150w, https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=300&amp;h=182 300w, https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=768&amp;h=467 768w, https://eclecticlight.co/wp-content/uploads/2024/11/macos15.jpg?w=1024&amp;h=622 1024w" sizes="(max-width: 1600px) 100vw, 1600px"/></span></p>
<p>macOS Sequoia is fully compatible, and adds support for iCloud Drive and some other Apple Account features, although still won’t run App Store apps. It may also fail to install the required extras to support Apple Intelligence.</p>
<h4>Summary</h4>
<ul>
<li>Currently, M4 Macs can only run VMs of macOS Ventura 13.4 and later, 14 Sonoma, and 15 Sequoia.</li>
<li>M1, M2 and M3 Macs can run VMs of macOS Monterey 12.0.1 and later.</li>
<li>macOS Big Sur 11 can’t be virtualised on Apple silicon.</li>
</ul>
<h4>Further information</h4>
<p><a href="https://eclecticlight.co/virtualisation-on-apple-silicon/">Viable and virtualisation</a></p>
<h4>Postscript</h4>
<p>I’m grateful for the suggestion that it might be possible to work around this problem by running the older VM on a single core. Although I did manage to do that on an M3 (the first time I have seen recent macOS running on just <em>one</em> core!), that fails just the same on an M4, I’m afraid.</p>



	</div></div>
  </body>
</html>
