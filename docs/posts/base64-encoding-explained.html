<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.akshaykhot.com/base64-encoding-explained/">Original</a>
    <h1>Base64 Encoding, Explained</h1>
    
    <div id="readability-page-1" class="page"><div data-canvas-grid="content" data-canvas-grid-self="full">
            <p>When you&#39;re programming, it&#39;s easy to get by with a superficial understanding of many things. You can easily fool yourself by thinking that you are programming when you are blindly copy + pasting code from Stack Overflow or some random article you stumbled upon.</p><p>Base64 encoding was one of these topics that was bugging me for a while. I often came across Base64 encoded images or URLs, and had no idea whatsoever it meant or why it was even used. Finally, I decided to do some research to fill that knowledge gap, and spent the Sunday reading <a href="https://datatracker.ietf.org/doc/html/rfc4648?ref=akshaykhot.com" rel="noreferrer">RFC 4648</a> (my idea of a fun weekend). </p><p>What follows is everything I learned about Base64 encoding.</p><h2 id="what-is-base64-encoding">What is Base64 Encoding?</h2><p>Base64 encoding takes binary data and converts it into text, specifically ASCII text. The resulting text contains only letters from <code>A-Z</code>, <code>a-z</code>, numbers from <code>0-9</code>, and the symbols <code>+</code> and <code>/</code>. </p><p>As there are 26 letters in the alphabet, we have <code>26 + 26 + 10 + 2</code> characters. Hence this encoding is named <strong><code>Base64</code></strong>. These 64 characters are considered &#34;safe&#34;, that is, they cannot be misinterpreted by legacy computers and programs unlike characters such as <code>&lt;</code>, <code>&gt;</code>, <code>\n</code> and many others.</p><div><p>ðŸ’¡</p><p>Here&#39;s what the text &#34;Ruby on Rails&#34; looks like when Base64 encoded: <b><strong>UnVieSBvbiBSYWlscw==</strong></b>.</p></div><p> <strong>It&#39;s important to remember that we are not encrypting the text here.</strong> Given Base64 encoded data, it&#39;s very easy to convert it back (decode) to the original text. We are only changing the representation of the data, i.e. encoding.</p><p>In its essence, Base64 encoding uses a specific, reduced set of characters to encode binary data, to prevent against data corruption. </p><figure><img src="https://www.akshaykhot.com/content/images/2023/10/base64_encoding.png" alt="The Base64 Alphabet" loading="lazy" width="474" height="309"/><figcaption><span>The Base64 Alphabet</span></figcaption></figure><p>As there are only 64 characters available to encode into, we can represent them using only 6 bits, because <code>2^6 = 64</code>. Every Base64 digit represents 6 bits of data. There are 8 bits in a byte, and the closest common multiple of 8 and 6 is 24. So 24 bits, or 3 bytes, can be represented using four 6-bit Base64 digits. </p><p><em>(If that last paragraph totally went over your head, <strong>don&#39;t worry</strong>. Hopefully it should be clear by the end of this post.)</em></p><h2 id="why-base64">Why Base64?</h2><p>You must have included an image in your HTML document using the <code>&lt;img src=&#34;nature.jpeg&#34;&gt;</code> tag. <strong>Did you know you can embed the image data directly into the HTML without linking to the external image file?</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs?ref=akshaykhot.com" rel="noreferrer">Data URLs</a> let you do this, and they use Base64 encoded text to embed files inline.</p><pre><code>&lt;img src=&#34;dataimage/gif;base64,xxxxbase64encodedtextxxxx&#34;&gt;

data:[&lt;mime type&gt;][;charset=&lt;charset&gt;][;base64],&lt;encoded data&gt;</code></pre><div><div><p>Historically it has been used to encode binary data in email messages where the email server might modify line-endings. A more modern example is the use of Base64 encoding toÂ <a href="http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html?ref=akshaykhot.com" rel="noreferrer">embed image data directly in HTML source code</a>. Here it is necessary to encode the data to avoid characters like &#39;&lt;&#39; and &#39;&gt;&#39; being interpreted as tags.</p></div></div><p>Another common use case is when we have to store or transmit some binary data over the network that&#39;s supposed to handle text, or US-ASCII data. This ensures data remains unchanged during transport. Base64 can also be used for passing data in URLs when that data includes non-URL friendly characters.</p><p>Base encoding is also used in many applications simply because it makes it possible to manipulate objects with text editors.</p><p>You can also transfer files as text, using Base64 encoding. First, get the file&#39;s bytes and encode them as Base64. Then transfer the Base64 encoded string, and then decode it back to the original file content on the receiving side. </p><p>Let&#39;s take a deeper look into this algorithm in the next section.</p><h2 id="base64-encoding-algorithm">Base64 Encoding Algorithm</h2><p>Here&#39;s the simple algorithm that converts some text into Base64. </p><ol><li>Convert the text to its binary representation.</li><li>Divide the bits into groups of 6 bits each.</li><li>Convert each group to a decimal number from 0-63. It cannot be greater than 64 as there are only 6 bits in each group.</li><li>Convert this decimal number to the equivalent Base64 character using the Base64 alphabet.</li></ol><p>That&#39;s it. You have a Base64 encoded string. If there&#39;re insufficient bits in the final group, you can use <code>=</code> or <code>==</code> as padding.</p><p>Sounds confusing? Don&#39;t worry, the following example should make it pretty clear. Let&#39;s convert my name &#34;Akshay&#34; to its Base64 equivalent string.</p><ul><li>Convert the text &#34;Akshay&#34; to binary by first converting each character to its corresponding <a href="https://www.ascii-code.com/?ref=akshaykhot.com" rel="noreferrer">ASCII number</a> and then converting that decimal number to binary (or just use <a href="https://www.rapidtables.com/convert/number/ascii-to-binary.html?ref=akshaykhot.com" rel="noreferrer">this tool</a>):</li></ul><pre><code>01000001 01101011 01110011 01101000 01100001 01111001

   A        k        s        h        a        y</code></pre><ul><li>Divide the bits into groups of 6 bits:</li></ul><pre><code>010000 010110 101101 110011 011010 000110 000101 111001</code></pre><ul><li>Convert each group to a decimal number between 0 to 63:</li></ul><pre><code>010000 010110 101101 110011 011010 000110 000101 111001
  
  16     22     45     51     26     6      5      57</code></pre><ul><li>Now use the Base64 alphabet (see above image) to convert each decimal number to its Base64 representation:</li></ul><pre><code>16  22  45  51  26  6  5  57

Q   W   t   z   a   G  F  5</code></pre><p>And we&#39;re done. The name &#34;Akshay&#34; is represented in Base64 as <code>QWtzaGF5</code>. </p><p>At first glance, the benefit of Base64 encoding is not quite obvious. <strong>What exactly did we achieve by converting &#34;Akshay&#34; to &#34;QWtzaGF5&#34;?</strong> </p><p>Imagine, instead of my name, you had an image or a sensitive file (PDF, text, video, anything, really), and you wanted to store it as text. You could first convert it to binary, and then Base64 encode it to get corresponding ASCII text. </p><p>Now you could send or store that text anywhere and anyhow you like, without worrying whether some legacy device, protocol or software won&#39;t misinterpret the raw binary data to corrupt your file. Makes sense? </p><h2 id="how-to-encode-and-decode-base64">How to Encode and Decode Base64</h2><p>All programming languages have support for encoding and decoding data to and from the Base64 format. </p><p>Here is the Ruby code that takes some text as input and converts it into Base-64 encoded string.</p><pre><code>require &#34;base64&#34;

encoded = Base64.encode64(&#34;Ruby on Rails&#34;)  # &#34;UnVieSBvbiBSYWlscw==\n&#34;

decoded = Base64.decode64(encoded)  # &#34;Ruby on Rails&#34;</code></pre><p>Here&#39;s the equivalent program in C#, my second-most favorite language:</p><pre><code>public static string ToBase64(string value)
{
    byte[] bytes = System.Text.Encoding.ASCII.GetBytes(value);

    string base64 = Convert.ToBase64String(bytes);

    return base64;
}

public static string FromBase64(string encoded)
{
    byte[] data = System.Convert.FromBase64String(encodedString);
    
    string decodedString = System.Text.Encoding.UTF8.GetString(data);
}</code></pre><p>PHP makes it very simple with its <code>base64_encode</code> and <code>base64_decode</code> top-level functions.</p><pre><code>&lt;?php
$str = &#34;Ruby on Rails&#34;;
echo base64_encode($str);

$str = &#34;UnVieSBvbiBSYWlscw==\n&#34;;
echo base64_decode($str);
?&gt;</code></pre><p>Similarly, in JavaScript, use the <code>btoa()</code> to encode and <code>atob()</code> functions to encode and decode the text.</p><pre><code>const text = &#34;Ruby on Rails&#34;
btoa(text) // &#34;UnVieSBvbiBSYWlscw==\n&#34;

const encoded_text = &#34;UnVieSBvbiBSYWlscw==\n&#34;
atob(encoded_text)  // Ruby on Rails</code></pre><p>What&#39;s more, your terminal has built-in support for Base64 encoding. Try this in terminal:</p><pre><code>$ echo &#34;akshay&#34; | base64
YWtzaGF5Cg==

$ echo &#34;YWtzaGF5Cg==&#34; | base64 -d
akshay</code></pre><hr/><p>That&#39;s a wrap. I hope you found this article helpful and you learned something new. If you are interested in learning more, I highly recommend you read <a href="https://datatracker.ietf.org/doc/html/rfc4648?ref=akshaykhot.com" rel="noreferrer">RFC 4648</a>, which describes the Base64 encoding in detail.</p>
        </div><div data-theme="highlight">
            <h3>Join our newsletter</h3>
            <p>Subscribe to get the new posts via email. Your email address is never sold or shared.</p>
            <form data-members-form="signup" data-theme="reset">
                <p><label for="newsletter-box-email-input">Enter your email</label>
                    
                    
                </p>
                <p data-message="loading">Processing your application...</p>
                <p data-message="success">Success! Please check your inbox and click the link to confirm your subscription.</p>
                <p data-message="error">Sorry, something went wrong. Please try again.</p>
            </form>
        </div></div>
  </body>
</html>
