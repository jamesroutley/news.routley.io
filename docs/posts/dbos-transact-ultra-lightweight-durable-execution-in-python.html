<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dbos-inc/dbos-transact-py">Original</a>
    <h1>Show HN: DBOS transact – Ultra-lightweight durable execution in Python</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<hr/>
<p dir="auto">DBOS Transact is a Python library providing <strong>ultra-lightweight durable execution</strong>.
For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="@DBOS.step()
def step_one():
    ...

@DBOS.step()
def step_two():
    ...

@DBOS.workflow()
def workflow()
    step_one()
    step_two()"><pre><span>@<span>DBOS</span>.<span>step</span>()</span>
<span>def</span> <span>step_one</span>():
    ...

<span>@<span>DBOS</span>.<span>step</span>()</span>
<span>def</span> <span>step_two</span>():
    ...

<span>@<span>DBOS</span>.<span>workflow</span>()</span>
<span>def</span> <span>workflow</span>()
    <span>step_one</span>()
    <span>step_two</span>()</pre></div>
<p dir="auto">Durable execution means your program is <strong>resilient to any failure</strong>.
If it is ever interrupted or crashes, all your workflows will automatically resume from the last completed step.
If you want to see durable execution in action, check out <a href="https://demo-widget-store.cloud.dbos.dev/" rel="nofollow">this demo app</a> (source code <a href="https://github.com/dbos-inc/dbos-demo-apps/tree/main/python/widget-store">here</a>).
No matter how many times you try to crash it, it always resumes from exactly where it left off!</p>
<p dir="auto">Under the hood, DBOS Transact works by storing your program&#39;s execution state (which workflows are currently executing and which steps they&#39;ve completed) in a Postgres database.
So all you need to use it is a Postgres database to connect to—there&#39;s no need for a &#34;workflow server.&#34;
This approach is also incredibly fast, for example <a href="https://www.dbos.dev/blog/dbos-vs-aws-step-functions-benchmark" rel="nofollow">25x faster than AWS Step Functions</a>.</p>
<p dir="auto">Some more cool features include:</p>
<ul dir="auto">
<li>Scheduled jobs—run your workflows exactly-once per time interval.</li>
<li>Exactly-once event processing—use workflows to process incoming events (for example, from a Kafka topic) exactly-once.</li>
<li>Observability—all workflows automatically emit <a href="https://opentelemetry.io/" rel="nofollow">OpenTelemetry</a> traces.</li>
</ul>

<p dir="auto">Install and configure with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install dbos
dbos init --config"><pre>pip install dbos
dbos init --config</pre></div>
<p dir="auto">Then, try it out with this simple program (requires Postgres):</p>
<div dir="auto" data-snippet-clipboard-copy-content="from fastapi import FastAPI
from dbos import DBOS

app = FastAPI()
DBOS(fastapi=app)

@DBOS.step()
def step_one():
    print(&#34;Step one completed!&#34;)

@DBOS.step()
def step_two():
    print(&#34;Step two completed!&#34;)

@DBOS.workflow()
def dbos_workflow():
    step_one()
    for _ in range(5):
        print(&#34;Press Control + \ to stop the app...&#34;)
        DBOS.sleep(1)
    step_two()

@app.get(&#34;/&#34;)
def fastapi_endpoint():
    dbos_workflow()"><pre><span>from</span> <span>fastapi</span> <span>import</span> <span>FastAPI</span>
<span>from</span> <span>dbos</span> <span>import</span> <span>DBOS</span>

<span>app</span> <span>=</span> <span>FastAPI</span>()
<span>DBOS</span>(<span>fastapi</span><span>=</span><span>app</span>)

<span>@<span>DBOS</span>.<span>step</span>()</span>
<span>def</span> <span>step_one</span>():
    <span>print</span>(<span>&#34;Step one completed!&#34;</span>)

<span>@<span>DBOS</span>.<span>step</span>()</span>
<span>def</span> <span>step_two</span>():
    <span>print</span>(<span>&#34;Step two completed!&#34;</span>)

<span>@<span>DBOS</span>.<span>workflow</span>()</span>
<span>def</span> <span>dbos_workflow</span>():
    <span>step_one</span>()
    <span>for</span> <span>_</span> <span>in</span> <span>range</span>(<span>5</span>):
        <span>print</span>(<span>&#34;Press Control + \ to stop the app...&#34;</span>)
        <span>DBOS</span>.<span>sleep</span>(<span>1</span>)
    <span>step_two</span>()

<span>@<span>app</span>.<span>get</span>(<span>&#34;/&#34;</span>)</span>
<span>def</span> <span>fastapi_endpoint</span>():
    <span>dbos_workflow</span>()</pre></div>
<p dir="auto">Save the program into <code>main.py</code>, edit <code>dbos-config.yaml</code> to configure your Postgres connection settings, and start it with <code>fastapi run</code>.
Visit <code>localhost:8000</code> in your browser to start the workflow.
When prompted, press <code>Control + \</code> to force quit your application.
It should crash midway through the workflow, having completed step one but not step two.
Then, restart your app with <code>fastapi run</code>.
It should resume the workflow from where it left off, completing step two without re-executing step one.</p>
<p dir="auto">To learn how to build more complex workflows, see our <a href="https://docs.dbos.dev/python/programming-guide" rel="nofollow">programming guide</a> or <a href="https://docs.dbos.dev/examples" rel="nofollow">examples</a>.</p>

<p dir="auto"><a href="https://docs.dbos.dev" rel="nofollow">https://docs.dbos.dev</a></p>

<ul dir="auto">
<li><a href="https://docs.dbos.dev/python/examples/rag-slackbot" rel="nofollow"><strong>AI-Powered Slackbot</strong></a> — A Slackbot that answers questions about previous Slack conversations, using DBOS to durably orchestrate its RAG pipeline.</li>
<li><a href="https://docs.dbos.dev/python/examples/widget-store" rel="nofollow"><strong>Widget Store</strong></a> — An online storefront that uses DBOS durable workflows to be resilient to any failure.</li>
<li><a href="https://docs.dbos.dev/python/examples/earthquake-tracker" rel="nofollow"><strong>Earthquake Tracker</strong></a> — A real-time earthquake dashboard that uses DBOS to stream data from the USGS into Postgres, then visualizes it with Streamlit.</li>
</ul>
<p dir="auto">More examples <a href="https://docs.dbos.dev/examples" rel="nofollow">here</a>!</p>

<p dir="auto">If you&#39;re interested in building with us, please star our repository and join our community on <a href="https://discord.gg/fMwQjeW5zg" rel="nofollow">Discord</a>!
If you see a bug or have a feature request, don&#39;t hesitate to open an issue here on GitHub.
If you&#39;re interested in contributing, check out our <a href="https://bernsteinbear.com/dbos-inc/dbos-transact-py/blob/main/CONTRIBUTING.md">contributions guide</a>.</p>
</article></div></div>
  </body>
</html>
