<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dino-lang/dino">Original</a>
    <h1>Programming language Dino and its implementation</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto"><h3 tabindex="-1" dir="auto">Develepment version of future release 0.98</h3><a id="user-content-develepment-version-of-future-release-098" aria-label="Permalink: Develepment version of future release 0.98" href="#develepment-version-of-future-release-098"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>



<ul dir="auto">
<li>Introduction to Dino
<ul dir="auto">
<li>History</li>
<li>Dino as a high-level scripting language</li>
<li>Dino as a functional language</li>
<li>Dino as an object-oriented language</li>
</ul>
</li>
<li>Dino Implementation
<ul dir="auto">
<li>Overall Structure
<ul dir="auto">
<li>Used implementation tools</li>
<li>Byte code compiler (optimizations)</li>
<li>Byte code Interpreter (GC, Concurrency, REPL)</li>
<li>JIT, Type inference</li>
</ul>
</li>
<li>Performance comparison with Python, PyPy, Ruby, JS, Scala, OCAML
on x86-64, AARH64, ARM, PPC64.</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>1993: Original language design and implementation <a target="_blank" rel="noopener noreferrer" href="https://github.com/dino-lang/dino/blob/master/Dino.jpg"><img src="https://github.com/dino-lang/dino/raw/master/Dino.jpg" alt="Dino logo" title="Dino logo"/></a>
<ul dir="auto">
<li>Was used in russian computer game company ANIMATEK as a simple
scripting language for describing dinosaurus movements</li>
</ul>
</li>
<li>1998, 2002, 2007, 2016 : Major language and implementation revisions</li>
<li>This document describes the current state of Dino language and
its implementation.</li>
</ul>

<ul dir="auto">
<li>Eratosthenes sieve:</li>
</ul>
<div data-snippet-clipboard-copy-content="      var i, prime, k, count = 0, SieveSize = 8191, flags = [SieveSize : 1];
      for (i = 0; i &lt; SieveSize; i++)
        if (flags[i]) {
          prime = i + i + 3;
          k = i + prime;
          for (;;) {
            if (k &gt;= SieveSize)
              break;
            flags[k] = 0;
            k += prime;
          }
          count++;
        }
      putln (count);"><pre><code>      var i, prime, k, count = 0, SieveSize = 8191, flags = [SieveSize : 1];
      for (i = 0; i &lt; SieveSize; i++)
        if (flags[i]) {
          prime = i + i + 3;
          k = i + prime;
          for (;;) {
            if (k &gt;= SieveSize)
              break;
            flags[k] = 0;
            k += prime;
          }
          count++;
        }
      putln (count);
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Dino aims to look like C language</li>
<li>High-Level scripting object-oriented language:
<ul dir="auto">
<li>Multi-precision integers</li>
<li>Heterogeneous extensible arrays, array slices</li>
<li>Associative tables with possibility to delete elements</li>
<li>Powerful and safe class composition operation for (multiple)
inheritance and traits description</li>
<li>First class functions, classes, and fibers with closures,
anonymous functions, classes, fibers</li>
<li>Exception handling</li>
<li>Concurrency</li>
<li>Pattern matching</li>
<li>Unicode 8 support</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Associative tables
<ul dir="auto">
<li>elements can be added and deleted</li>
<li>elements can be any values, e.g. other tables</li>
<li>Implemented as hash tables without buckets for compactness
and data locality
<ul dir="auto">
<li>Secondary hash for conflict resolutions</li>
<li>Murmur hash function for most values</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Eratosthenes sieve with slices:</li>
</ul>
<div data-snippet-clipboard-copy-content="      var i, prime, count = 0, SieveSize = 8191, flags = [SieveSize : 1];
      for (i = 0; i &lt; SieveSize; i++)
        if (flags[i]) {
          prime = i + i + 3;
          flags[i + prime:SieveSize:prime] = 0;
          count++;
        }
      putln (count);"><pre><code>      var i, prime, count = 0, SieveSize = 8191, flags = [SieveSize : 1];
      for (i = 0; i &lt; SieveSize; i++)
        if (flags[i]) {
          prime = i + i + 3;
          flags[i + prime:SieveSize:prime] = 0;
          count++;
        }
      putln (count);
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Example:</li>
</ul>
<div data-snippet-clipboard-copy-content="      fun even;
      fun odd  (i) {i == 0 ? 0 : even (i - 1);}
      fun even (i) {i == 0 ? 1 : odd (i - 1);}
      putln (odd (1_000_000));"><pre><code>      fun even;
      fun odd  (i) {i == 0 ? 0 : even (i - 1);}
      fun even (i) {i == 0 ? 1 : odd (i - 1);}
      putln (odd (1_000_000));
</code></pre></div>
<ul dir="auto">
<li>Anonymous functions:</li>
</ul>
<div data-snippet-clipboard-copy-content="      filter (fun (a) {a &gt; 0;}, v);
      fold (fun (a, b) {a * b;}, v, 1);"><pre><code>      filter (fun (a) {a &gt; 0;}, v);
      fold (fun (a, b) {a * b;}, v, 1);
</code></pre></div>
<ul dir="auto">
<li>Function closures:</li>
</ul>
<div data-snippet-clipboard-copy-content="      fun incr (base) {fun (incr) {base + incr;}}"><pre><code>      fun incr (base) {fun (incr) {base + incr;}}
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Fiber: a function with concurrent execution</li>
</ul>
<div data-snippet-clipboard-copy-content="      fiber t (n) {for (var i = 0; i &lt; n; i++) putln (i);}
      t(100); // the following code don&#39;t wait for t finish
      for (var i = 0; i &lt; 1000; i++) putln (“main”, i);"><pre><code>      fiber t (n) {for (var i = 0; i &lt; n; i++) putln (i);}
      t(100); // the following code don&#39;t wait for t finish
      for (var i = 0; i &lt; 1000; i++) putln (“main”, i);
</code></pre></div>
<ul dir="auto">
<li>Implemented as green threads:
<ul dir="auto">
<li>Much faster than OS threads with Global Interpreter Lock (Python/Ruby)</li>
<li>Deterministic behaviour and automatic deadlock recognition</li>
<li>Plans to implement through OS threads without GIL for parallelism</li>
</ul>
</li>
<li>There is a low level sync-statement wait</li>
</ul>

<ul dir="auto">
<li>Simple statements are atomic</li>
</ul>
<hr/>

<ul dir="auto">
<li>Class is just a special type of function:
<ul dir="auto">
<li>Returns closure, public visibility by default</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="          class num (i) {fun print {put (i);}}
          class binop (l, r) { fun print_op;
            fun print {l.print(); print_op (); r.print ();}
          }"><pre><code>          class num (i) {fun print {put (i);}}
          class binop (l, r) { fun print_op;
            fun print {l.print(); print_op (); r.print ();}
          }
</code></pre></div>
<ul dir="auto">
<li>Special class/function composition:
<ul dir="auto">
<li>emulates (multiple) inheritance, traits, and dynamic dispatching</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="          class add (l, r) {
            use binop former l, r later print_op;
            fun print_op {put (“ + “);}
          }"><pre><code>          class add (l, r) {
            use binop former l, r later print_op;
            fun print_op {put (“ + “);}
          }
</code></pre></div>
<hr/>

<ul dir="auto">
<li>A safe and powerful way to support object orientation
<ul dir="auto">
<li>Declarations of class mentioned in <strong>use</strong> are inlayed</li>
<li>Declarations before the use rewrite corresponding inlayed
declarations mentioned in <strong>former</strong>-clause</li>
<li>Declarations after the use rewrite corresponding inserted
declarations mentioned in <strong>later</strong>-clause</li>
<li>The declarations should be <strong>matched</strong></li>
<li>The original and new declarations should be <strong>present</strong>
if they are in former- or later-clause</li>
<li>The original declaration can be <strong>renamed</strong> and still used
instead of just rewriting if necessary</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Special function <strong>isa</strong> to check subtyping of class or object:</li>
</ul>
<div data-snippet-clipboard-copy-content="      isa (add, binop);
      isa (add (num (1), num (2)), binop);"><pre><code>      isa (add, binop);
      isa (add (num (1), num (2)), binop);
</code></pre></div>
<ul dir="auto">
<li>Optimization for removing code duplication</li>
<li>Syntactic sugar for a singleton object (it is implemented as
anonymous class and corresponding object creation)</li>
</ul>
<div data-snippet-clipboard-copy-content="      obj int_pair {
        val min = 0, max = 10;
      }"><pre><code>      obj int_pair {
        val min = 0, max = 10;
      }
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Optimizations for access to object members permit to use
objects as <strong>name spaces</strong></li>
</ul>
<div data-snippet-clipboard-copy-content="      obj sorts {
        var compare_fun;
        fun quick_sort (...) {...}
        fun heap_sort (...) {...}
      }
      ...
      sorts.fft (...);"><pre><code>      obj sorts {
        var compare_fun;
        fun quick_sort (...) {...}
        fun heap_sort (...) {...}
      }
      ...
      sorts.fft (...);
</code></pre></div>
<ul dir="auto">
<li>To make access to object more brief an <strong>expose</strong>-clause exists</li>
<li>Exposing an object member</li>
</ul>
<div data-snippet-clipboard-copy-content="      expose sorts.quick_sort;
      quick_sort (...);"><pre><code>      expose sorts.quick_sort;
      quick_sort (...);
</code></pre></div>
<ul dir="auto">
<li>You can have a member access with a different name</li>
</ul>
<div data-snippet-clipboard-copy-content="      expose sorts.quick_sort (asort);
      asort (...);"><pre><code>      expose sorts.quick_sort (asort);
      asort (...);
</code></pre></div>
<ul dir="auto">
<li>You can expose all public declarations of an object</li>
</ul>
<div data-snippet-clipboard-copy-content="      expose sorts.*;
      compare_fun = ...; quick_sort (...); heap_sort (...);"><pre><code>      expose sorts.*;
      compare_fun = ...; quick_sort (...); heap_sort (...);
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Dino has 5 standard spaces (singleton objects) avalaible by default
to any Dino program
<ul dir="auto">
<li><code>lang</code> -- provides interface to fundamental Dino features</li>
<li><code>io</code> -- provides interface for input/output and to work with file system</li>
<li><code>sys</code> -- provides interace to some features of underlying OS</li>
<li><code>math</code> -- mostly provides some mathematical functions</li>
<li><code>re</code> -- provides regular expression matching functions</li>
<li><code>yaep</code> -- provides interface to Yet Another Earley Parser</li>
</ul>
</li>
<li>All items in spaces <code>lang</code> and <code>io</code> are always exposed</li>
<li>If you redefine some exposed item, you still can have access to it
as a member of the space.</li>
</ul>
<hr/>

<ul dir="auto">
<li>Pattern can be
<ul dir="auto">
<li>pattern matching anything <code>_</code></li>
<li>pattern variable matching any value, e.g. <code>a</code>
<ul dir="auto">
<li>the value is assigned to the variable</li>
</ul>
</li>
<li><strong>vector pattern</strong> matching vectors, e.g. <code>[v, _, 5, ...]</code></li>
<li><strong>table pattern</strong> matching tables, e.g. <code>tab [&#34;a&#34;: v, ...]</code></li>
<li><strong>object pattern</strong> matching objects of given class or
its derived class, e.g. <code>node (a, 10)</code></li>
<li><code>...</code> in a pattern list matching zero or more values</li>
<li>expression which looks different from the above and matches the equal value</li>
<li>pattern can be nested, e.g. <code>node ([v, ...], 10)</code></li>
</ul>
</li>
<li>Pattern matching in variable declaration, e.g. <code>var [a, b, ...] = v;</code>
<ul dir="auto">
<li><code>v</code> should be a vector with at least 2 elements, new declared variables
<code>a</code> and <code>b</code> will hold values of the two first elements</li>
</ul>
</li>
</ul>
<hr/>

<div data-snippet-clipboard-copy-content="    pmatch (v) {
      case [...]: putln (&#34;array&#34;); continue;
      case [a, ...]: if (a == 0) break; putln (&#34;array with non-zero 1st element&#34;);
      case node (v) if v != 0: putln (&#34;object of class node with nozero parameter&#34;);
      case _: putln (&#34;any but array&#34;);
    }"><pre><code>    pmatch (v) {
      case [...]: putln (&#34;array&#34;); continue;
      case [a, ...]: if (a == 0) break; putln (&#34;array with non-zero 1st element&#34;);
      case node (v) if v != 0: putln (&#34;object of class node with nozero parameter&#34;);
      case _: putln (&#34;any but array&#34;);
    }
</code></pre></div>
<ul dir="auto">
<li>Try to match value with case patterns in a particular order,
execute the corresponding code for the first matched pattern</li>
<li>Scope of pattern variables is the corresponding case</li>
<li>Continue means continue to try subsequent patterns</li>
<li>Break means finish the match statement execution
<ul dir="auto">
<li>There is an implicit break at the end of each case</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Simple binary tree and its check:</li>
</ul>
<div data-snippet-clipboard-copy-content="      class tree {}
      class leaf (i) {use tree;}
      class node (l, r) {use tree;}"><pre><code>      class tree {}
      class leaf (i) {use tree;}
      class node (l, r) {use tree;}
</code></pre></div>
<div data-snippet-clipboard-copy-content="      fun exists_leaf (test, t) {
        pmatch (t) {
          case leaf (v): return test (v);
          case node (l, r):
            return exists_leaf (test, l) || exists_leaf (test, r);
        }
      }"><pre><code>      fun exists_leaf (test, t) {
        pmatch (t) {
          case leaf (v): return test (v);
          case node (l, r):
            return exists_leaf (test, l) || exists_leaf (test, r);
        }
      }
</code></pre></div>
<div data-snippet-clipboard-copy-content="      fun has_odd_leaf (t) {
        exists_leaf (fun (n) {type (n) == int &amp;&amp; n % 2 == 1;}, t);
      }"><pre><code>      fun has_odd_leaf (t) {
        exists_leaf (fun (n) {type (n) == int &amp;&amp; n % 2 == 1;}, t);
      }
</code></pre></div>

<div data-snippet-clipboard-copy-content="    rmatch (str) {
      case &#34;[a-zA-Z]+&#34;: putln (&#34;word starting at &#34;, m[0]);
      case &#34;[0-9]+&#34;: putln (&#34;number starting at &#34;, m[0]);
      case _: putln (&#34;anything else, m is undefined&#34;);
    }"><pre><code>    rmatch (str) {
      case &#34;[a-zA-Z]+&#34;: putln (&#34;word starting at &#34;, m[0]);
      case &#34;[0-9]+&#34;: putln (&#34;number starting at &#34;, m[0]);
      case _: putln (&#34;anything else, m is undefined&#34;);
    }
</code></pre></div>
<ul dir="auto">
<li>Try to match string with case regular expressions in a particular order,
execute the corresponding code for the first matched regular expression</li>
<li>Implicitly declared variable <code>m</code> contains integer vector
describing successfully matched sub-string</li>
<li>Scope of variable <code>m</code> is the corresponding case</li>
<li>Continue and break statements behave the same way as
in pattern match statement</li>
</ul>
<hr/>

<ul dir="auto">
<li>Exceptions are objects of sub-classes of class <strong>except</strong>
<ul dir="auto">
<li>Exceptions can be generated by Dino interpreter, e.g. floating point exception</li>
<li>or by <em>throw</em>-statement:</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="            class my_except (msg) {use except;}
            throw my_except (&#34;my special exceptions&#34;);"><pre><code>            class my_except (msg) {use except;}
            throw my_except (&#34;my special exceptions&#34;);
</code></pre></div>
<ul dir="auto">
<li>Exceptions can be processed by <em>try</em>-block or <em>try</em>-operator
<ul dir="auto">
<li>Exceptions are propagated to previous blocks on the block stack until they are processed</li>
<li>Unprocessed exceptions finish the program execution</li>
</ul>
</li>
</ul>

<ul dir="auto">
<li><em>Try-block</em>
<ul dir="auto">
<li>Exception occurring inside the block is processed in the first catch-block
whose class mentioned in the catch clauses is a super-class of the processed exception class</li>
<li>The processed exception is in variable <em>e</em> implicitly defined in
the corresponding catch-block</li>
<li>If there is no matched catch-block, the exception is propagated further</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="            try {
              var ln;
              for (;;) {
                var ln = getln (); putln (ln);
              }
            } catch (eof) { putln (&#34;end of file&#34;); }"><pre><code>            try {
              var ln;
              for (;;) {
                var ln = getln (); putln (ln);
              }
            } catch (eof) { putln (&#34;end of file&#34;); }
</code></pre></div>
<ul dir="auto">
<li><em>Try-operator</em>
<ul dir="auto">
<li>The operator returns non-zero if no exceptions occurs in the statement given as the first argument</li>
<li>The operator returns zero if an exception occurs and its class is a sub-class (see <em>isa</em>)
of one exception class given by the subsequent arguments</li>
<li>If there is no matched argument class, the exception is propagated further</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="            var ln;
            for (; try (ln = getln (), eof);) putln (ln);"><pre><code>            var ln;
            for (; try (ln = getln (), eof);) putln (ln);
</code></pre></div>
<ul dir="auto">
<li>In the previous example, <code>try (ln = getln (), eof)</code> can be considered as
abbreviation of anonymous function call:</li>
</ul>
<div data-snippet-clipboard-copy-content="            fun {try {ln = getln (); return 1;} catch (eof) {return 0;} ()"><pre><code>            fun {try {ln = getln (); return 1;} catch (eof) {return 0;} ()
</code></pre></div>

<ul dir="auto">
<li>Predefined class for language prototyping:
<ul dir="auto">
<li>Fast.  Processing ~400K lines/sec of 67K lines of C program
using 26MB memory on modern CPUs</li>
<li>Simple syntax directed translation</li>
<li>Parsing input can be described by ambiguous grammar:
<ul dir="auto">
<li>Can produce compact representation of all possible parse trees</li>
<li>Can produce minimal cost parsing tree</li>
</ul>
</li>
<li>Syntax recovery with minimal number of ignored tokens
still producing a correct AST</li>
</ul>
</li>
</ul>
<hr/>

<div data-snippet-clipboard-copy-content="expose yaep.*;
val grammar =
 &#34;TERM ident=301, num=302, if=303, then=304, for=305, do=307, var=308;
  program = program stmt                     # list (0 1)
  stmt = ident &#39;=&#39; expr &#39;;&#39;                  # asgn (0 2)
       | if expr then stmt else stmt         # if (1 3 5)
       | for ident &#39;=&#39; expr expr do stmt     # for (1 3 4 6)
       | &#39;{&#39; program &#39;}&#39;                     # block (1)
       | var ident &#39;;&#39;                       # var (1)
       | error
  expr = expr &#39;+&#39; factor                     # plus (0 2)
  factor = factor &#39;*&#39; term                   # mult (0 2)
  term = ident                               # 0
       | &#39;(&#39; expr &#39;)&#39;                        # 1&#34;;
val p = parser ();       // create an Earley parser
p.set_grammar (grammar); // set grammar
fun syntax_error;        // forward decl of syntax error reporting func
val asbtract_tree = p.parse (token_vector, syntax_error);"><pre><code>expose yaep.*;
val grammar =
 &#34;TERM ident=301, num=302, if=303, then=304, for=305, do=307, var=308;
  program = program stmt                     # list (0 1)
  stmt = ident &#39;=&#39; expr &#39;;&#39;                  # asgn (0 2)
       | if expr then stmt else stmt         # if (1 3 5)
       | for ident &#39;=&#39; expr expr do stmt     # for (1 3 4 6)
       | &#39;{&#39; program &#39;}&#39;                     # block (1)
       | var ident &#39;;&#39;                       # var (1)
       | error
  expr = expr &#39;+&#39; factor                     # plus (0 2)
  factor = factor &#39;*&#39; term                   # mult (0 2)
  term = ident                               # 0
       | &#39;(&#39; expr &#39;)&#39;                        # 1&#34;;
val p = parser ();       // create an Earley parser
p.set_grammar (grammar); // set grammar
fun syntax_error;        // forward decl of syntax error reporting func
val asbtract_tree = p.parse (token_vector, syntax_error);
</code></pre></div>
<hr/>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dino-lang/dino/blob/master/Dino_Flow.png"><img src="https://github.com/dino-lang/dino/raw/master/Dino_Flow.png" alt="Dino Flow" title="Dino Flow"/></a></p>
<ul dir="auto">
<li>In usual mode, all program files are processed.</li>
<li>In REPL mode, a statement goes all processing.</li>
<li>All program Byte Code (Bcode) can be saved in a readable form,
modified, and read for execution.</li>
<li>Function level JIT is implemented with the aid of C compiler.</li>
<li>The program can use object files created from a C code
(through Foreign Function Interface).</li>
</ul>
<hr/>

<ul dir="auto">
<li>Byte Code (Bcode) consists of
<ul dir="auto">
<li>Declarations
<ul dir="auto">
<li>vdecl (variable)</li>
<li>fdecl (functions, classes, fibers)</li>
</ul>
</li>
<li>Multi-operand instructions
<ul dir="auto">
<li>Operations (1-5 ops, usually 3-ops)</li>
<li>Control flow insns (blocks, branches, calls etc)</li>
</ul>
</li>
</ul>
</li>
<li>2 Bcode representations:
<ul dir="auto">
<li>one in memory (for execution)</li>
<li>readable representation (can be modified manually)</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Dino code</li>
</ul>
<div data-snippet-clipboard-copy-content="      var i, n = 1000;
      for (i = 0; i &lt; n; i++);"><pre><code>      var i, n = 1000;
      for (i = 0; i &lt; n; i++);
</code></pre></div>
<ul dir="auto">
<li>Readable BCode representation:</li>
</ul>
<div data-snippet-clipboard-copy-content="      0 block fn=&#34;ex.d&#34; ln=1 pos=1 next=730 vars_num=29 tvars_num=3 // ident=
      ...
      372 vdecl fn=&#34;ex.d&#34; ln=1 pos=5 ident=i ident_num=268 decl_scope=0 var_num=27
      373 vdecl pos=8 ident=n ident_num=269 decl_scope=0 var_num=28
      ...
      788 ldi fn=&#34;ex.d&#34; ln=1 pos=12 op1=28 op2=1000 // 28 &lt;- i1000
      789 ldi ln=2 pos=10 next=791 op1=27 op2=0 // 27 &lt;- i0
      790 btltinc pos=15 next=792 op1=27 binc_inc=1 bcmp_op2=28 bcmp_res=29 pc=790
                                          // goto 790 if 29 &lt;- (27 += i1) cmp 28
      791 btlt pos=15 op1=27 bcmp_op2=28 bcmp_res=29 pc=790 // goto 790 if 29 &lt;- 27 cmp 28
      792 bend pos=17 block=0"><pre><code>      0 block fn=&#34;ex.d&#34; ln=1 pos=1 next=730 vars_num=29 tvars_num=3 // ident=
      ...
      372 vdecl fn=&#34;ex.d&#34; ln=1 pos=5 ident=i ident_num=268 decl_scope=0 var_num=27
      373 vdecl pos=8 ident=n ident_num=269 decl_scope=0 var_num=28
      ...
      788 ldi fn=&#34;ex.d&#34; ln=1 pos=12 op1=28 op2=1000 // 28 &lt;- i1000
      789 ldi ln=2 pos=10 next=791 op1=27 op2=0 // 27 &lt;- i0
      790 btltinc pos=15 next=792 op1=27 binc_inc=1 bcmp_op2=28 bcmp_res=29 pc=790
                                          // goto 790 if 29 &lt;- (27 += i1) cmp 28
      791 btlt pos=15 op1=27 bcmp_op2=28 bcmp_res=29 pc=790 // goto 790 if 29 &lt;- 27 cmp 28
      792 bend pos=17 block=0
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Optimizations
<ul dir="auto">
<li>High-level dead code elimination</li>
<li>Jump optimization</li>
<li>Call tail optimization</li>
<li>Inlining</li>
<li>Pure function optimization</li>
<li>Byte code combining (this is just an illustration, the readable
BCode representation has a bit different format -- see the previous slide)</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="            label: addi op1, op1, i1; lt res, op1, op2; bt res, label =&gt;
            label: addi op1, op1, i1; blt res, op1, op2, label =&gt;
            label: btltinc op1, op2, i2, res, label"><pre><code>            label: addi op1, op1, i1; lt res, op1, op2; bt res, label =&gt;
            label: addi op1, op1, i1; blt res, op1, op2, label =&gt;
            label: btltinc op1, op2, i2, res, label
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Fast optimizing interpreter</li>
<li>Memory Handling and Garbage Collection:
<ul dir="auto">
<li>Automatically extended heap</li>
<li>Simple escape analysis to transform heap allocations into stack ones</li>
<li>Combination of Mark and Sweep and fast Mark and Copy algorithm
permitting to decrease program memory requirement</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>JIT
<ul dir="auto">
<li>Function Level for functions marked by hint (! jit)</li>
</ul>
</li>
</ul>
<div data-snippet-clipboard-copy-content="            fun fact (n) !jit {n &lt;=1 ? 1 : n * fact (n - 1);}"><pre><code>            fun fact (n) !jit {n &lt;=1 ? 1 : n * fact (n - 1);}
</code></pre></div>
<ul dir="auto">
<li>JIT details:
<ul dir="auto">
<li>Triggered by the first call</li>
<li>Portable implementation through C code generation
<ul dir="auto">
<li>memory file system is used (can be persistent memory in future)</li>
<li>option --save-temps can be used for the C code inspecting</li>
</ul>
</li>
<li>Usage of the same code as interpreter to simplify implementation
<ul dir="auto">
<li>C code generator is less 100 lines on C</li>
<li>a script used to minimize the code (about 1/10 of C code
interpreter definitions are used for generated code.)</li>
</ul>
</li>
<li>Small function code generation takes about 50-70ms
using GCC on modern Intel CPUs</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Dino is dynamic type programming language</li>
<li>Still many types of operations can be recognized during compilation time:
<ul dir="auto">
<li>E.g. general Bcode <strong>add</strong> can be changed by <strong>iadd</strong> (integer variant)
or <strong>fadd</strong> (floating point variant) which are executed
without operand type checking</li>
</ul>
</li>
<li>Type recognition (inference) is very important for better
object code generation, <strong>especially for JIT</strong>
<ul dir="auto">
<li>It can speed up code in many times</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Major steps:
<ol dir="auto">
<li>Building <strong>CFG</strong> (control flow graph) of <strong>all program</strong>:
basic blocks and CFG edges connecting them</li>
<li>Calculating <strong>available</strong> results of Bcode insns -- a forward
data-flow problem on CFG</li>
<li>Using the availability, building <strong>def-use chains</strong> connecting
operands and results of Bcode insns and variables</li>
<li>Calculating types of Bcode insn operands and results -- another
forward data flow problem on the built def-use graph</li>
<li>Changing Bcode insns on specialized ones, e.g. <strong>add</strong> on <strong>iadd</strong></li>
</ol>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Major complications:
<ul dir="auto">
<li>Higher order functions</li>
<li>Closures</li>
<li>Threads</li>
<li>Possible use of variable (undefined) value before assigning a value to it</li>
</ul>
</li>
<li>Therefore we don&#39;t recognize all types theoretically possible to recognize</li>
<li>Recognizing types of variable values even if the variable changes
its type -- difference to type inference in static type languages</li>
</ul>
<hr/>

<ul dir="auto">
<li>Dino is implemented with COCOM tools
<ul dir="auto">
<li>SPRUT - compiler of IR object oriented description.  Used for
implementation of semantic IR, Bcode and run-time data.
In debugging mode, it permits to check all described constraints and relations</li>
<li>MSTA - faster superset of YACC with better error recovery</li>
<li>SHILKA - fast keyword recognizer generator</li>
<li>AMMUNITION - different packages (source position handling, error reporting,
Earley parser etc)</li>
</ul>
</li>
<li>GMP - multi-precision integer library</li>
<li>Oniguruma regexp library (version 6.0.0)</li>
</ul>
<hr/>

<ul dir="auto">
<li>Typical performance tuning: Profiling: dino -p meteor.d</li>
</ul>
<div data-snippet-clipboard-copy-content="      ** Calls *** Time **** Name **************************************
        761087     0.43  --  search1: &#34;meteor.d&#34;: 229
        561264     0.07  --  ctz: &#34;meteor.d&#34;: 28
          1260     0.01  --  GoodPiece: &#34;meteor.d&#34;: 37
           ...
                   0.51  --  All Program"><pre><code>      ** Calls *** Time **** Name **************************************
        761087     0.43  --  search1: &#34;meteor.d&#34;: 229
        561264     0.07  --  ctz: &#34;meteor.d&#34;: 28
          1260     0.01  --  GoodPiece: &#34;meteor.d&#34;: 37
           ...
                   0.51  --  All Program
</code></pre></div>
<ul dir="auto">
<li>Adding hints: !inline for ctz and !jit for search1</li>
</ul>
<div data-snippet-clipboard-copy-content="      ** Calls *** Time **** Name **************************************
        761087     0.15  --  search1: &#34;meteor.d&#34;: 229
           ...
             0     0.00  --  ctz: &#34;meteor.d&#34;: 28
           ...
                   0.17  --  All Program"><pre><code>      ** Calls *** Time **** Name **************************************
        761087     0.15  --  search1: &#34;meteor.d&#34;: 229
           ...
             0     0.00  --  ctz: &#34;meteor.d&#34;: 28
           ...
                   0.17  --  All Program
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Dino has declarations to describe C functions and variables external
to Dino programs. For example, the following describes external
variable <code>v</code> and function <code>f</code></li>
</ul>

<ul dir="auto">
<li>The variable <code>v</code> in C code will be of type <code>val_t</code>.  The function
<code>f</code> in C code will have teh following prototype</li>
</ul>
<div data-snippet-clipboard-copy-content="      val_t f (int npars, val_t *args);"><pre><code>      val_t f (int npars, val_t *args);
</code></pre></div>
<ul dir="auto">
<li>The file <code>d_api.h</code> provides C descriptions of Dino internals (the
type <code>val_t</code>, functions to create vectors, tables etc).  The file is
generated from SPRUT description <code>d_extern.d</code></li>
<li>The external C code is responsible for providing correct Dino
values</li>
<li>There are two ways to use C code: <em>pre-compiled</em> and <em>compiled on the
fly</em></li>
</ul>
<hr/>

<ul dir="auto">
<li>C code for <em>pre-compiled</em> way should look like</li>
</ul>
<div data-snippet-clipboard-copy-content="      #include d_api.h
      ...
      val_t v;
      ...
      val_t f (int n_pars, val_t *args) {
        ER_node_t first_arg = (ER_node_t) &amp;args[0];
        if (npars == 1 &amp;&amp; ER_NODE_MODE (first_arg) == ER_NM_int)
	  &lt;do something with integer value&gt; ER_i (first_arg);
	...
      }"><pre><code>      #include d_api.h
      ...
      val_t v;
      ...
      val_t f (int n_pars, val_t *args) {
        ER_node_t first_arg = (ER_node_t) &amp;args[0];
        if (npars == 1 &amp;&amp; ER_NODE_MODE (first_arg) == ER_NM_int)
	  &lt;do something with integer value&gt; ER_i (first_arg);
	...
      }
</code></pre></div>
<ul dir="auto">
<li>External variables and functions in C code preliminary compiled
as <em>shared objects</em> can be used if Dino knows where the objects are located
<ul dir="auto">
<li>The option <code>-L</code> provides such knowledge.  For example, options
<code>-L/home/dino/obj1.so -L../obj2.so</code> says Dino to load the shared
objects</li>
<li>Externals will be searched in some standard objects first, then in
objects provided by options <code>-L</code> in the same order as they stay on
the command line</li>
</ul>
</li>
<li>A standard Dino external C code in file <code>d_socket.c</code> from Dino
sources can be used as an example of pre-compiled C code</li>
</ul>
<hr/>

<ul dir="auto">
<li>C code <em>compiled on the fly</em> looks in Dino code like</li>
</ul>
<div data-snippet-clipboard-copy-content="      %{
        ...
        val_t f (int n_pars, val_t *args) {
          ...
        }
      %}
      extern f ();
      val r = f(10);"><pre><code>      %{
        ...
        val_t f (int n_pars, val_t *args) {
          ...
        }
      %}
      extern f ();
      val r = f(10);
</code></pre></div>
<ul dir="auto">
<li>All C code between pairs of brackets <code>%{</code> and <code>%}</code> in one Dino file
is <em>concatenated</em></li>
<li>The result code with pre-appended code from <code>d_api.h</code> is compiled
when the execution the first time achieves the location of the first
<code>%{</code></li>
<li>The result shared object is loaded and external variables and
functions are searched lately also in this object as it was
described in pre-compiled C code</li>
<li>To check all C code before execution you can use option <code>--check</code></li>
</ul>
<hr/>

<ul dir="auto">
<li><code>sloccount</code> output as of 2/18/2016 for Dino + tools:</li>
</ul>
<div data-snippet-clipboard-copy-content="	Totals grouped by language (dominant language first):
	sh:          265452 (54.10%)
	ansic:       194472 (39.64%)
	yacc:         23297 (4.75%)
	cpp:           7403 (1.51%)"><pre><code>	Totals grouped by language (dominant language first):
	sh:          265452 (54.10%)
	ansic:       194472 (39.64%)
	yacc:         23297 (4.75%)
	cpp:           7403 (1.51%)
</code></pre></div>
<ul dir="auto">
<li>Dino directory only:</li>
</ul>
<div data-snippet-clipboard-copy-content="	Totals grouped by language (dominant language first):
	sh:          161561 (62.13%)
	ansic:        95124 (36.58%)
	yacc:          3365 (1.29%)"><pre><code>	Totals grouped by language (dominant language first):
	sh:          161561 (62.13%)
	ansic:        95124 (36.58%)
	yacc:          3365 (1.29%)
</code></pre></div>
<hr/>

<ul dir="auto">
<li>Some old computer language shootout benchmarks:
<ul dir="auto">
<li>loop - empty loop body</li>
<li>hash - associative tables</li>
<li>fact, fib - factorial and fibonacci (recursive functions with and
without tail recursion)</li>
<li>exceptions, methods, objects - exception processing, object method calls,
and object instantiations</li>
<li>sieve, sort - Eratosthenes sieve and heapsort (array benchmarking)</li>
<li>statistics, random - statistical moments and random number generator
(general arithmetic)</li>
<li>threads (producer-consumer threads)</li>
<li>startup - compilation and execution of empty program</li>
<li>compile - very long code of assignments</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Benchmarking on x86-64 (i5-4670 - 3.4GHz Haswell), AARCH64 (X-gene),
ARM (Exynos 5410 - 1.6GHz Cortex-A15), PPC64 (3.5GHz power7) and comparison with:
<ul dir="auto">
<li>Other interpreters (Python-3.4.x, Ruby-2.1.x)</li>
<li>Different JITs (PyPy-2.2.x - trace JIT for Python, JavaScript-1.8.x
<ul dir="auto">
<li>SpiderMonkey/TraceMonkey, Scala-2.10.x - JVM)</li>
</ul>
</li>
<li>Byte code compiler and interpreter (OCAML-4.0.x)</li>
</ul>
</li>
<li>Dino compilation and execution time is a <strong>base</strong> in the comparison</li>
</ul>
<hr/>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Loop</th>
<th>Hash</th>
<th>Fact</th>
<th>Fib</th>
<th>Except</th>
<th>Method</th>
<th>Object</th>
<th>Sieve</th>
<th>Sort</th>
<th>Stat.</th>
<th>Random</th>
<th>Thread</th>
<th>Start</th>
<th>Compile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dino<sup><a href="#user-content-fn-1-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-1-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-4-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Dino</td>
<td>19</td>
<td>1.0</td>
<td>13.2</td>
<td>112</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.4</td>
<td>1.0</td>
<td>3.1</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Python</td>
<td>257</td>
<td>2.4</td>
<td>90.4</td>
<td>492</td>
<td>9.7</td>
<td>5.8</td>
<td>4.4</td>
<td>37.9</td>
<td>13.3</td>
<td>2.6</td>
<td>26.9</td>
<td>125</td>
<td>10.9</td>
<td>3.3</td>
</tr>
<tr>
<td>Ruby</td>
<td>157</td>
<td>2.2</td>
<td>25.2</td>
<td>142</td>
<td>5.5</td>
<td>1.5</td>
<td>1.4</td>
<td>4.5</td>
<td>4.5</td>
<td>3.5</td>
<td>12.4</td>
<td>43.6</td>
<td>29.4</td>
<td>1.8</td>
</tr>
<tr>
<td>PyPy</td>
<td>8.1</td>
<td>0.4</td>
<td>0.4</td>
<td>59</td>
<td>0.4</td>
<td>0.2</td>
<td>0.1</td>
<td>4.5</td>
<td>1.4</td>
<td>1.3</td>
<td>0.9</td>
<td>47.0</td>
<td>22.1</td>
<td>17.8</td>
</tr>
<tr>
<td>JS</td>
<td>151</td>
<td>1.4</td>
<td>33.3</td>
<td>211</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>5.5</td>
<td>0.6</td>
<td>-</td>
<td>0.5</td>
<td>-</td>
<td>1.1</td>
<td>0.8</td>
</tr>
<tr>
<td>Scala</td>
<td>9.6</td>
<td>1.6</td>
<td>2.8</td>
<td>147</td>
<td>60.3</td>
<td>1.2</td>
<td>0.7</td>
<td>2.4</td>
<td>0.7</td>
<td>9.4</td>
<td>1.2</td>
<td>-</td>
<td>352</td>
<td>-<sup><a href="#user-content-fn-5-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">5</a></sup></td>
</tr>
<tr>
<td>Ocaml</td>
<td>34.4</td>
<td>1.0</td>
<td>5.2</td>
<td>69</td>
<td>0.3</td>
<td>0.5</td>
<td>0.8</td>
<td>1.8</td>
<td>1.8</td>
<td>3.2</td>
<td>2.2</td>
<td>-</td>
<td>5,3</td>
<td>283</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr/>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Loop</th>
<th>Hash</th>
<th>Fact</th>
<th>Fib</th>
<th>Except</th>
<th>Method</th>
<th>Object</th>
<th>Sieve</th>
<th>Sort</th>
<th>Stat.</th>
<th>Random</th>
<th>Thread</th>
<th>Start</th>
<th>Compile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dino<sup><a href="#user-content-fn-1-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-1-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-4-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-4-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Dino</td>
<td>17.5</td>
<td>1.7</td>
<td>13.1</td>
<td>265</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.4</td>
<td>1.0</td>
<td>2.2</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Python</td>
<td>222</td>
<td>0.5</td>
<td>68.8</td>
<td>1116</td>
<td>12.4</td>
<td>4.7</td>
<td>2.8</td>
<td>40.3</td>
<td>5.3</td>
<td>2.5</td>
<td>15.5</td>
<td>149</td>
<td>246</td>
<td>2.6</td>
</tr>
<tr>
<td>Ruby</td>
<td>170</td>
<td>2.8</td>
<td>32.3</td>
<td>542</td>
<td>6.0</td>
<td>1.7</td>
<td>1.4</td>
<td>8.5</td>
<td>3.7</td>
<td>3.8</td>
<td>13.1</td>
<td>118</td>
<td>655</td>
<td>1.6</td>
</tr>
<tr>
<td>JS</td>
<td>282</td>
<td>1.4<sup><a href="#user-content-fn-6-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">6</a></sup></td>
<td>31.6</td>
<td>471</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>16.2</td>
<td>2.5</td>
<td>-</td>
<td>6.5</td>
<td>-</td>
<td>1.0</td>
<td>0.5</td>
</tr>
<tr>
<td>Ocaml</td>
<td>44.7</td>
<td>1.2</td>
<td>5.0</td>
<td>166</td>
<td>0.3</td>
<td>0.5</td>
<td>0.9</td>
<td>2.6</td>
<td>2.1</td>
<td>4.0</td>
<td>3.5</td>
<td>-</td>
<td>82.7</td>
<td>232</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<ul dir="auto">
<li>Python v2.7.5 was used as Python3 is absent.</li>
<li>PyPy and Scala are not implemented yet.</li>
</ul>
<hr/>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Loop</th>
<th>Hash</th>
<th>Fact</th>
<th>Fib</th>
<th>Except</th>
<th>Method</th>
<th>Object</th>
<th>Sieve</th>
<th>Sort</th>
<th>Stat.</th>
<th>Random</th>
<th>Thread</th>
<th>Start</th>
<th>Compile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dino<sup><a href="#user-content-fn-1-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-1-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-4-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-4-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Dino</td>
<td>4.2</td>
<td>1.0</td>
<td>18.1</td>
<td>490</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.8</td>
<td>1.0</td>
<td>2.5</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Python</td>
<td>28.2</td>
<td>0.6</td>
<td>4.4</td>
<td>1600</td>
<td>11.7</td>
<td>3.4</td>
<td>5.1</td>
<td>19.3</td>
<td>6.7</td>
<td>2.2</td>
<td>17.5</td>
<td>157</td>
<td>10.9</td>
<td>2.7</td>
</tr>
<tr>
<td>Ruby</td>
<td>31.5</td>
<td>2.6</td>
<td>71.2</td>
<td>651</td>
<td>6.3</td>
<td>1.3</td>
<td>1.7</td>
<td>4.8</td>
<td>4.0</td>
<td>3.3</td>
<td>11.3</td>
<td>174</td>
<td>12.7</td>
<td>1.7</td>
</tr>
<tr>
<td>PyPy</td>
<td>103</td>
<td>1.4</td>
<td>151</td>
<td>4158</td>
<td>9.9</td>
<td>12.1</td>
<td>7.9</td>
<td>42.1</td>
<td>11.7</td>
<td>5.5</td>
<td>30.4</td>
<td>485</td>
<td>7.2</td>
<td><sup><a href="#user-content-fn-7-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">7</a></sup></td>
</tr>
<tr>
<td>JS</td>
<td>29.8</td>
<td>1.4<sup><a href="#user-content-fn-6-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-6-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">6</a></sup></td>
<td>32.2</td>
<td>634</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>4.1</td>
<td>0.4</td>
<td>-</td>
<td>0.4</td>
<td>-</td>
<td>1.1</td>
<td>0.7</td>
</tr>
<tr>
<td>Scala</td>
<td>7.4</td>
<td>8.2</td>
<td>6.4</td>
<td>2396</td>
<td>6.9</td>
<td>1.2</td>
<td>1.0</td>
<td>5.8</td>
<td>0.7</td>
<td>19</td>
<td>1.2</td>
<td>-</td>
<td>109</td>
<td><sup><a href="#user-content-fn-7-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-7-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">7</a></sup></td>
</tr>
<tr>
<td>Ocaml</td>
<td>13.8</td>
<td>1.0</td>
<td>8.8</td>
<td>327</td>
<td>0.4</td>
<td>0.6</td>
<td>1.0</td>
<td>2.5</td>
<td>2.2</td>
<td>3.3</td>
<td>1.7</td>
<td>-</td>
<td>3.0</td>
<td><sup><a href="#user-content-fn-7-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-7-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">7</a></sup></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr/>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Loop</th>
<th>Hash</th>
<th>Fact</th>
<th>Fib</th>
<th>Except</th>
<th>Method</th>
<th>Object</th>
<th>Sieve</th>
<th>Sort</th>
<th>Stat.</th>
<th>Random</th>
<th>Thread</th>
<th>Start</th>
<th>Compile</th>
</tr>
</thead>
<tbody>
<tr>
<td>Dino<sup><a href="#user-content-fn-1-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-1-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0<sup><a href="#user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-3-8-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-2-8-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></td>
<td>1.0</td>
<td>1.0<sup><a href="#user-content-fn-4-935bbcef0e2dbb80db8f193a843ba517" id="user-content-fnref-4-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup></td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Dino</td>
<td>23.2</td>
<td>1.0</td>
<td>16.2</td>
<td>222</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
<td>4.3</td>
<td>1.0</td>
<td>4.4</td>
<td>1.0</td>
<td>1.0</td>
<td>1.0</td>
</tr>
<tr>
<td>Python</td>
<td>182</td>
<td>1.5</td>
<td>51.0</td>
<td>965</td>
<td>15.1</td>
<td>3.6</td>
<td>4.1</td>
<td>29.8</td>
<td>7.5</td>
<td>2.0</td>
<td>15.7</td>
<td>160</td>
<td>5.1</td>
<td>5.0</td>
</tr>
<tr>
<td>Ruby</td>
<td>17.6</td>
<td>1.7</td>
<td>43.0</td>
<td>390</td>
<td>20.0</td>
<td>1.6</td>
<td>3.1</td>
<td>7.6</td>
<td>4.2</td>
<td>5.2</td>
<td>11.4</td>
<td>62.8</td>
<td>46.1</td>
<td>1.5</td>
</tr>
<tr>
<td>JS</td>
<td>27.0</td>
<td>3.0</td>
<td>53.8</td>
<td>453</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>14.2</td>
<td>2.8</td>
<td>-</td>
<td>4.6</td>
<td>-</td>
<td>2.7</td>
<td>0.7</td>
</tr>
<tr>
<td>Ocaml</td>
<td>33.2</td>
<td>1.8</td>
<td>5.4</td>
<td>133</td>
<td>0.3</td>
<td>0.4</td>
<td>1.5</td>
<td>3.7</td>
<td>2.6</td>
<td>4.8</td>
<td>3.9</td>
<td>-</td>
<td>4.4</td>
<td>360</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<ul dir="auto">
<li>PyPy is not implemented for PPC64.</li>
<li>Scala was not available.</li>
</ul>
<hr/>

<ul dir="auto">
<li>A lot of research was done on Dino implementation
(see <a href="https://github.com/dino-lang/implemenation-article">article about this</a>)</li>
<li>It can be used to improve performance of popular dynamic language implementations:
<ul dir="auto">
<li>to make them faster</li>
<li>to make them more portable</li>
<li>to require less resources (compilation time and memory)</li>
<li>to have very quick start up and big compiler speed</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Type annotation.  Two goals:
<ul dir="auto">
<li>More cases for compile type checking which is in a direction of
Dino language development (introduction of early undefined value
recognition, the same number of actual and formal parameter
numbers etc.)</li>
<li>Faster code generated by JIT</li>
</ul>
</li>
<li>Light-weight direct JIT
<ul dir="auto">
<li>Using GCC for JIT is portable but too heavy for some system as CYGWIN</li>
<li>Direct JIT from bytecode to machine instructions is necessary
<ul dir="auto">
<li>Goal is very fast code generation and simple fast optimizations
to decrease memory traffic</li>
<li>With type inference and type annotation the direct JIT can
achives 1/2-1/3 of speed optimized C code for majority of programs</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>Dino has been implemented for
<ul dir="auto">
<li>Linux</li>
<li>Windows through CYGWIN</li>
<li>MacOSX
<ul dir="auto">
<li>X code and GMP package is necessary to build Dino</li>
</ul>
</li>
</ul>
</li>
<li>Dino site:
<a href="http://dino-lang.github.io" rel="nofollow">http://dino-lang.github.io</a></li>
<li>DINO and COCOM repository:
<a href="https://github.com/dino-lang/dino.git">https://github.com/dino-lang/dino.git</a></li>
<li>License -- GPL 2 and LGPL 2:
<ul dir="auto">
<li>See files COPYING and COPYING.LIB</li>
</ul>
</li>
</ul>
<hr/>

<ul dir="auto">
<li>See file INSTALL for details</li>
<li>Configure in a build directory:</li>
</ul>
<div data-snippet-clipboard-copy-content="      &lt;dino-path&gt;/configure --srcidir=&lt;dino-path&gt; --prefix=&lt;install-path&gt;"><pre><code>      &lt;dino-path&gt;/configure --srcidir=&lt;dino-path&gt; --prefix=&lt;install-path&gt;
</code></pre></div>
<ul dir="auto">
<li>Configure in a debug mode: -O0 and full IR checking (it makes
DINO several times slower):</li>
</ul>
<div data-snippet-clipboard-copy-content="      &lt;dino-path&gt;/configure --srcidir=&lt;dino-path&gt; --prefix=&lt;install-path&gt; --enable-debug"><pre><code>      &lt;dino-path&gt;/configure --srcidir=&lt;dino-path&gt; --prefix=&lt;install-path&gt; --enable-debug
</code></pre></div>
<ul dir="auto">
<li>Make:</li>
</ul>

<ul dir="auto">
<li>Testing all COCOM and DINO:</li>
</ul>

<ul dir="auto">
<li>Testing only DINO (about 900 tests and benchmarking comparison with available implementations of other languages which can take a lot of time):</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">Testig Dino is to run two shell scripts:</p>
<ul dir="auto">
<li>Tests are in file /DINO/dino.tst generated from DINO/dino.tst.in</li>
<li>Benchmarks are in file DINO/compare.tst</li>
</ul>
</li>
<li>
<p dir="auto">Installing COCOM and DINO:</p>
</li>
</ul>

<hr/>
<section data-footnotes="">
<ol dir="auto">
<li id="user-content-fn-1-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Dino best result. <a href="#user-content-fnref-1-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 1">↩</a> <a href="#user-content-fnref-1-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 1-2">↩<sup>2</sup></a> <a href="#user-content-fnref-1-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 1-3">↩<sup>3</sup></a> <a href="#user-content-fnref-1-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 1-4">↩<sup>4</sup></a></p>
</li>
<li id="user-content-fn-2-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Dino JIT hint was used. <a href="#user-content-fnref-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2">↩</a> <a href="#user-content-fnref-2-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-2">↩<sup>2</sup></a> <a href="#user-content-fnref-2-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-3">↩<sup>3</sup></a> <a href="#user-content-fnref-2-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-4">↩<sup>4</sup></a> <a href="#user-content-fnref-2-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-5">↩<sup>5</sup></a> <a href="#user-content-fnref-2-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-6">↩<sup>6</sup></a> <a href="#user-content-fnref-2-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-7">↩<sup>7</sup></a> <a href="#user-content-fnref-2-8-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 2-8">↩<sup>8</sup></a></p>
</li>
<li id="user-content-fn-3-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Dino pure func hint was used. <a href="#user-content-fnref-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3">↩</a> <a href="#user-content-fnref-3-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-2">↩<sup>2</sup></a> <a href="#user-content-fnref-3-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-3">↩<sup>3</sup></a> <a href="#user-content-fnref-3-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-4">↩<sup>4</sup></a> <a href="#user-content-fnref-3-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-5">↩<sup>5</sup></a> <a href="#user-content-fnref-3-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-6">↩<sup>6</sup></a> <a href="#user-content-fnref-3-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-7">↩<sup>7</sup></a> <a href="#user-content-fnref-3-8-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 3-8">↩<sup>8</sup></a></p>
</li>
<li id="user-content-fn-4-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Dino inline hint was used. <a href="#user-content-fnref-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 4">↩</a> <a href="#user-content-fnref-4-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 4-2">↩<sup>2</sup></a> <a href="#user-content-fnref-4-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 4-3">↩<sup>3</sup></a> <a href="#user-content-fnref-4-4-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 4-4">↩<sup>4</sup></a></p>
</li>
<li id="user-content-fn-5-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Scala can not even handle 10 times smaller code. <a href="#user-content-fnref-5-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 5">↩</a></p>
</li>
<li id="user-content-fn-6-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">Non-JIT JS was used as JIT failed. <a href="#user-content-fnref-6-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 6">↩</a> <a href="#user-content-fnref-6-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 6-2">↩<sup>2</sup></a></p>
</li>
<li id="user-content-fn-7-935bbcef0e2dbb80db8f193a843ba517">
<p dir="auto">PyPy, Scala, and Ocaml failed to compile long code. <a href="#user-content-fnref-7-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 7">↩</a> <a href="#user-content-fnref-7-2-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 7-2">↩<sup>2</sup></a> <a href="#user-content-fnref-7-3-935bbcef0e2dbb80db8f193a843ba517" data-footnote-backref="" aria-label="Back to reference 7-3">↩<sup>3</sup></a></p>
</li>
</ol>
</section>
</article></div></div>
  </body>
</html>
