<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://vinayak.io/2025/01/02/ipychat/">Original</a>
    <h1>IPychat — An AI extension for IPython</h1>
    
    <div id="readability-page-1" class="page"><div><div>
  
  <!-- TODO: fix the if -->
  <p><span>02 January 2025 · python
    · llm</span></p><!-- https://help.twitter.com/en/using-twitter/add-twitter-share-button -->
  <div>
    <figure>
        <img src="https://vinayak.io/files/meta-images/ipychat.png"/>
    </figure>
</div>

<p>Recently, I&#39;ve been exploring geospatial data about Paris. Although I&#39;ve seen others work with this type of data and know basic terms like shapefiles and polygons, this is my first time working with it myself. I&#39;ve been looking up terms and going through docs to learn how various geospatial data libraries work.</p>
<p>IPython and Jupyter were my tools of choice here—they&#39;re pleasant to work with, and built exactly for this type of data exploration. However, after using <a href="https://www.cursor.com">Cursor</a> at work to ask LLMs questions about libraries, generate boilerplate functions, or brainstorm ideas, I really wanted to have the same experience within IPython to avoid context switching between my terminal and browser.</p>
<p>So, I spent last weekend building an extension that lets me use IPython like Cursor! Here&#39;s a quick demo where I load the <a href="https://github.com/mwaskom/seaborn-data/blob/master/titanic.csv">Titanic dataset</a> into a dataframe and ask a LLM, &#34;what insights can I draw from this df&#34;.</p>
<p>
  <img src="https://raw.githubusercontent.com/vinayak-mehta/ipychat/refs/heads/main/demo.gif"/>
</p>

<p>Referencing variables by name works here because the extension finds the relevant context—in this case, the column names, shape, first five rows of this dataframe—and sends it to the selected LLM along with the IPython history. This ensures the LLM&#39;s response is relevant to the question, exactly like Cursor.</p>
<p>Since all major LLMs can return markdown, I used <a href="https://github.com/Textualize/rich">rich</a> to render the response nicely in the terminal. ✨</p>
<p>The extension lets you prompt GPT-4o, Claude 3.5 Sonnet, and Gemini. I&#39;m also planning to add support for local models to compare their responses with Claude 3.5 Sonnet, which, in my experience, generates the best responses for coding questions.</p>
<p>You can find the <a href="https://github.com/vinayak-mehta/ipychat">code on GitHub</a>.</p>
<h2>Installation</h2>
<p>You can install <code>ipychat</code> using pip:</p>
<pre><code>
  $ pip install ipychat

</code></pre>

<h2>Configuration</h2>
<p>Based on the model you want to use, either set <code>OPENAI_API_KEY</code>, or <code>ANTHROPIC_API_KEY</code>, or both environment variables. You can also run the <code>ipychat config</code> command to configure <code>ipychat</code> interactively.</p>
<h2>Usage</h2>
<p>You can start IPython with the extension already loaded by simply running the <code>ipychat</code> command:</p>
<pre><code>
  $ ipychat
  Welcome to ipychat! Use %ask to chat with gpt-4o.
  You can change models using %models.

  In [1]:

</code></pre>

<p>Alternatively, you can load the extension in a IPython session:</p>
<pre><code>
  In [1]: %load_ext ipychat

</code></pre>

<p>You can then start asking the model any question using the <code>%ask</code> magic.</p>
<pre><code>
  In [1]: %ask how can i download the titanic dataset using seaborn

</code></pre>

<p>If you want, you can change the current model using the <code>%models</code> magic.</p>
<p>Note: Placing question marks directly after a word doesn&#39;t work right now because it&#39;s a default IPython feature used to display an object&#39;s docs, and I didn&#39;t want to override it.</p>
<hr/>
<p>That&#39;s it! Let me know if you find <code>ipychat</code> useful or have any suggestions.</p>
</div>

 
 </div></div>
  </body>
</html>
