<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.joshwcomeau.com/css/backdrop-filter/">Original</a>
    <h1>Next-level frosted glass with backdrop-filter</h1>
    
    <div id="readability-page-1" class="page"><div><main><article><div><nav><h2>Table of Contents</h2><a href="#introduction">Introduction</a><a href="#css-filters-1">CSS filters</a><a href="#the-issue-2">The Issue</a><a href="#pointer-events-3">Pointer events</a><a href="#flickering-top-4">Flickering top</a><a href="#thicker-glass-5">Thicker glass</a><a href="#browser-support-6">Browser support</a><a href="#glassy-edge-7">Glassy edge</a><a href="#the-final-code-8">The final code</a><a href="#continue-learning-9">Continue learning</a></nav></div><a id="introduction"><span>Introduction</span></a><p>One of my all-time favourite CSS tricks is using <code>backdrop-filter: blur()</code> to create a frosted glass effect. I use it in just about every project I work on, including this blog!</p>
<p>Here’s a quick demo, to show what I’m talking about:</p>
<!--$--><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div><p>Some Website</p></div><div><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/cupcake.png"/></p><p>This is an example website showing how I typically use<!-- --> <code>backdrop-filter</code> to create glassy headers.</p><p>Notice that as the cupcake moves behind the header, it appears blurry, as it would if it was passing behind frosted glass.</p></div></div></div></div><!--/$-->
<p>This effect helps us add depth and realism to our projects. It’s lovely.</p>
<p><strong>But when I see this effect in the wild, it’s almost always missing some crucial optimizations.</strong> A couple of small changes can make our frosted glass <em>so</em> much more lush and realistic!</p>
<p>In this post, you’ll learn how to make the slickest frosted glass ever ✨. We’ll also learn quite a bit about CSS filters along the way!</p>

<h2 id="css-filters" data-element-type="ContentHeading"><a id="css-filters-1" href="#css-filters-1"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>CSS filters</h2>
<p>To briefly explain the underlying concept: CSS gives us quick and easy access to SVG filters via the <code>filter</code> property.</p>
<p>For example, we can give elements a Gaussian blur with <code>filter: blur()</code>:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="bottom"><div><div><p><img alt="My 3D mascot smiling with his tongue out. It’s very blurry, but dragging the slider makes it clearer" src="https://thelabyrinth.substack.com/images/josh-originals/josh-tongue-dark.png" loading="lazy"/></p></div><div><div><p><label for=":R11at4mfnnija:_radius">Blur radius<!-- -->:</label><span>16px</span></p></div></div></div></div><!--/$-->
<p>There are lots of fun filter options, the sorts of things you’d find in image-editing software. Like, rotating the hue of all the colors:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="bottom"><div><div><p><img alt="My 3D mascot making a puzzled face. Dragging the slider causes him to become unnatural shades of green and pink." src="https://thelabyrinth.substack.com/images/newsletter/joy-of-react-mascot.png" loading="lazy"/></p></div><div><div><p><label for=":R11it4mfnnija:_rotation">Hue rotation<!-- -->:</label><span>0deg</span></p></div></div></div></div><!--/$-->
<p>In these examples, I’m applying the filters to an <code>&lt;img&gt;</code> tag, but we can apply them to standard DOM nodes as well:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="bottom"><div><div><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p></div><div><div><p><label for=":R11qt4mfnnija:_radius">Blur radius<!-- -->:</label><span>0px</span></p></div><div><p><label for=":R11qt4mfnnija:_sepia">Sepia percentage<!-- -->:</label><span>0%</span></p></div></div></div></div><!--/$-->
<p>Pretty neat, right?</p>
<p>Things get even cooler with <code>backdrop-filter</code>. This property lets us apply these same filters to the stuff <em>behind</em> a given element.</p>
<p>For example:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="bottom"><div><div><div><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/tokyo.jpg" loading="lazy"/></p></div></div><div><div><p><label for=":R12at4mfnnija:_sepia">Sepia<!-- -->:</label><span>50%</span></p></div><div><p><label for=":R12at4mfnnija:_brightness">Brightness<!-- -->:</label><span>130%</span></p></div></div></div></div><!--/$-->
<p>In this demo, the <code>.magic-ring</code> element sits in front of a photo (<a rel="noopener noreferrer" target="_blank" href="https://unsplash.com/photos/assorted-signages-on-buildings-nTBW1cOY1qI"> <span>source<svg viewBox="0 0 24 24" fill="none" style="width:0.7em;height:0.7em;opacity:1"><mask id="external-icon-mask-:R1e2et4mfnnija:"><rect x="0" y="0" width="24" height="24" fill="white"></rect><rect x="10" y="0" width="16" height="14" fill="black"></rect></mask><rect x="3" y="6" width="15" height="15" rx="2" mask="url(#external-icon-mask-:R1e2et4mfnnija:)"></rect><path d="M 10 14 L 20 4 h -6 h 6 v 6" stroke="currentColor"></path></svg><span>(opens in new tab)</span></span></a>). It uses the <code>backdrop-filter</code> property to apply some filtering to everything behind it, which can be used for some pretty artistic effects.</p>
<p>In practice, I pretty much only use <code>backdrop-filter</code> for one use case: blurring everything behind an element, usually a header, to create the “frosted glass” effect I mentioned earlier:</p>
<!--$--><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div><p>Some Website</p></div><div><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/cupcake.png"/></p><p>This is an example website showing how I typically use<!-- --> <code>backdrop-filter</code> to create glassy headers.</p><p>Notice that as the cupcake moves behind the header, it appears blurry, as it would if it was passing behind frosted glass.</p></div></div></div></div><!--/$-->
<p>Alright. Let’s talk about the thing most developers miss.</p>
<h2 id="the-issue" data-element-type="ContentHeading"><a id="the-issue-2" href="#the-issue-2"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>The Issue</h2>
<p><strong>Here’s the problem:</strong> The <code>backdrop-filter</code> algorithm only considers the pixels that are <i>directly behind</i> the element.</p>
<p>For filters like <code>brightness</code> or <code>hue-rotate</code>, that makes perfect sense. With blur, though, we actually want to consider pixels that are <em>near</em> the element too.</p>
<p>This is one of those things where a demo is worth a thousand words. Check out the difference:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="top"><div><div><div><div id=":R13et4mfnnija:_mode"></div></div></div><div><div></div></div></div></div><!--/$-->
<p>By default, the gaussian blur algorithm is applied to all of the pixels behind the element. This means that if a big colorful element is <em>near</em> the element, it won’t have any effect.</p>
<p>That’s not really how frosted glass works in real life though. Light bounces off of objects and then goes through the glass. It looks <em>so much better</em> when the blurring algorithm includes nearby content.</p>
<p>Unfortunately, this isn’t something we can configure directly. Instead, we need to be a bit crafty.</p>
<p>Here’s the code:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> relative</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>    </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>      to bottom</span><span>,</span><span></span></p><p><span>      </span><span>black</span><span> </span><span>0</span><span>%</span><span> </span><span>50</span><span>%</span><span>,</span><span></span></p><p><span>      </span><span>transparent</span><span> </span><span>50</span><span>%</span><span> </span><span>100</span><span>%</span><span></span></p><p><span>    </span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>It looks complicated, but the principle isn’t too scary.</p>
<p>If we want the blur to consider elements nearby, we need to <em>extend</em> that element so that it covers those elements. Then, using a mask, we trim the excess away, so that it’s visually the same size as we originally intended.</p>

<p><strong>Let’s walk through it step by step.</strong> First, we have a header with a backdrop blur:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>Because the red ball isn’t behind the header at all, it isn’t being considered by the blurring algorithm, and so we don’t get that soft red glow. We need to <em>extend</em> the header so that it covers at least some of the ball.</p>
<p>Rather than give the <code>&lt;header&gt;</code> an explicit height (which would lock us into a specific size, rather than a dynamically-calculated one), let’s move the <code>backdrop-filter</code> to a child element, and set that child element to be twice as large as its parent:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> relative</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>    </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>Alright, now we’re getting somewhere! The <code>.backdrop</code> child grows to cover most of the red ball, blurring it correctly.</p>
<p>Now, we don’t actually want to <em>see</em> all of this excess backdrop. We need to trim it back to the size of the <code>&lt;header&gt;</code> parent element.</p>
<p>Maybe we can solve this with <code>overflow: hidden</code>?</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> relative</span><span>;</span><span></span></p><p><span>    </span><span>overflow</span><span>:</span><span> hidden</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>    </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>What you see here depends on your browser. On Firefox and Safari, this works great! But sadly, it doesn’t work on Chrome. There’s no soft red glow.</p>
<p>I think it’s an order-of-operations issue. In Chrome, the overflow trimming occurs <em>before</em> the filters are applied, so when the blurring algorithm is executed, the content has already been hidden.</p>
<p>For the same reasons, we can’t use <code>overflow: clip</code> or <code>clip-path</code>, but fortunately, we <i>can</i> use <code>mask-image</code>. The masking algorithm happens <em>after</em> the filters, in all browsers. ✨</p>
<p>Masking is a huge topic which is well beyond the scope of this tutorial, but the basic idea is that we can specify how transparent parts of an element should be. For example, if our mask is an opaque circle in a transparent box, that opaque shape can be applied to any other element:</p>
<!--$--><div><div><p>Element</p><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/tokyo.jpg"/></p></div><p>+</p><div><p>Mask</p><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/tokyo-mask.png"/></p></div><p>=</p><div><p>Result</p><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/tokyo-masked.png"/></p></div></div><!--/$-->
<p>Most commonly, masks are images in a format that supports transparency (like <code>.png</code> or <code>.gif</code>), but we can also use <em>gradients</em> as masks. For example, we can fade an image from opaque to transparent:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>.fade-img</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>      to right</span><span>,</span><span></span></p><p><span>      </span><span>white</span><span> </span><span>30</span><span>%</span><span>,</span><span></span></p><p><span>      </span><span>transparent</span><span></span></p><p><span>    </span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>img</span><span></span></p><p><span>  </span><span>class</span><span>=</span><span>&#34;</span><span>fade-img</span><span>&#34;</span><span></span></p><p><span>  </span><span>src</span><span>=</span><span>&#34;</span><span>/images/backdrop-filter/tokyo.jpg</span><span>&#34;</span><span></span></p><p><span></span><span>/&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>For our glassy header optimization, we’re using <code>mask-image</code> to make the <em>original</em> header size fully opaque, and everything past that point fully transparent. Essentially our mask looks like this:</p>
<!--$--><div><div><p>Element</p><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/mask-before.png"/></p></div><p>+</p><div><p>Mask</p><div></div></div><p>=</p><div><p>Result</p><p><img src="https://thelabyrinth.substack.com/images/backdrop-filter/mask-after.png"/></p></div></div><!--/$-->
<p>The relevant code looks like this:</p>
<div translate="no" data-less-bottom-margin="false"><div><pre><code><span><span>.</span><span>backdrop</span><span> {</span></span>
<span><span>  height</span><span>:</span><span> 200</span><span>%</span><span>;</span></span>
<span><span>  mask-image</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>    to</span><span> bottom</span><span>,</span></span>
<span><span>    black</span><span> 0</span><span>%</span><span> 50</span><span>%</span><span>,</span></span>
<span><span>    transparent</span><span> 50</span><span>%</span><span> 100</span><span>%</span></span>
<span><span>  );</span></span>
<span><span>}</span></span></code></pre></div></div>
<p>Our mask doesn’t <em>look</em> like a gradient, does it? I typically picture gradients fading smoothly from one color to the next.</p>
<p>It might feel like an <span data-use-adaptive-colors="true" id=":R176t4mfnnija:" data-direction="n" role="tooltip"><span><span><span>Term from the LEGO world, referring to assembling LEGO bricks in a way that the manufacturer did not intend.</span></span></span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="6" fill="none" viewBox="0 0 24 6" style="--origin-y:0%"><path d="
        M 0 0
        C 6 0
          7.199999999999999 6
          12 6
        C 16.8 6
          18 0
          24 0
        Z
      "></path></svg></span>, but this is what we need in this case. Our gradient is solid black from 0% to 50%, then it instantly becomes transparent for the final 50%.</p>
<p><strong>Why 50%?</strong> We set <code>height</code> to 200%, so that <code>.backdrop</code> will always be twice as tall as its container. The percentages inside <code>mask-image</code>’s gradient are relative to the <i>current element’s size</i>.</p>
<p>For example, if our <code>&lt;header&gt;</code> is 200px tall, our <code>.backdrop</code> will grow to 400px (200% of its parent). Then, our mask will show the first 50% of this element (0px to 200px), and hide the rest (200px to 400px).</p>
<p>Here’s the code again. Feel free to experiment with it, to develop your intuition for what’s happening:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> relative</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>    </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>      to bottom</span><span>,</span><span></span></p><p><span>      </span><span>black</span><span> </span><span>0</span><span>%</span><span> </span><span>50</span><span>%</span><span>,</span><span></span></p><p><span>      </span><span>transparent</span><span> </span><span>50</span><span>%</span><span> </span><span>100</span><span>%</span><span></span></p><p><span>    </span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>This is the basic idea behind this solution, but there’s a bug we need to fix, and a couple more optimizations we can consider.</p>
<h3 id="pointer-events" data-element-type="ContentHeading"><a id="pointer-events-3" href="#pointer-events-3"><svg viewBox="0 0 24 24" fill="none" style="width:18px;height:18px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Pointer events</h3>
<p>Our current implementation has a pretty big issue: nearby elements become unclickable and unselectable.</p>
<p>Try to select the text just below the header:</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> relative</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>    </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>    </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>      to bottom</span><span>,</span><span></span></p><p><span>      </span><span>black</span><span> </span><span>0</span><span>%</span><span> </span><span>50</span><span>%</span><span>,</span><span></span></p><p><span>      </span><span>transparent</span><span> </span><span>50</span><span>%</span><span> </span><span>100</span><span>%</span><span></span></p><p><span>    </span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>p</span><span>&gt;</span><span>Try to select this text</span><span>&lt;/</span><span>p</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<p>Here’s what happens when I try on desktop:</p>

<p><strong>Here’s the problem:</strong> the <code>mask-image</code> property will <i>visually</i> hide parts of an element, but the element is still there. We’re not able to click on the text because that <code>.backdrop</code> is extending out and covering it!</p>
<p>Fortunately, it’s an easy fix:</p>
<div translate="no" data-less-bottom-margin="false"><div><pre><code><span><span>.</span><span>backdrop</span><span> {</span></span>
<span><span>  position</span><span>:</span><span> absolute</span><span>;</span></span>
<span><span>  inset</span><span>:</span><span> 0</span><span>;</span></span>
<span><span>  height</span><span>:</span><span> 200</span><span>%</span><span>;</span></span>
<span><span>  backdrop-filter</span><span>:</span><span> blur</span><span>(</span><span>16</span><span>px</span><span>);</span></span>
<span><span>  mask-image</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>    to</span><span> bottom</span><span>,</span></span>
<span><span>    black</span><span> 0</span><span>%</span><span> 50</span><span>%</span><span>,</span></span>
<span><span>    transparent</span><span> 50</span><span>%</span><span> 100</span><span>%</span></span>
<span><span>  );</span></span>
<span><span>  pointer-events</span><span>:</span><span> none</span><span>;</span></span>
<span><span>}</span></span></code></pre></div></div>
<p>The <code>pointer-events</code> property allows us to specify that an element should be ignored when resolving click/touch events. <code>mask-image</code> makes the backdrop invisible, and <code>pointer-events: none</code> makes the backdrop <span data-use-adaptive-colors="true" id=":R492t4mfnnija:" data-direction="n" role="tooltip"><span><span><span>Something that can be seen but not felt, like a mirage or a ghost</span></span></span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="6" fill="none" viewBox="0 0 24 6" style="--origin-y:0%"><path d="
        M 0 0
        C 6 0
          7.199999999999999 6
          12 6
        C 16.8 6
          18 0
          24 0
        Z
      "></path></svg></span>.</p>
<p>This is another reason why <code>.backdrop</code> needs to be a <i>child</i> element. We don’t want the <code>&lt;header&gt;</code> itself to ignore clicks, since it typically has navigation links. We want to target the frosted glass element specifically.</p>
<h3 id="flickering-top" data-element-type="ContentHeading"><a id="flickering-top-4" href="#flickering-top-4"><svg viewBox="0 0 24 24" fill="none" style="width:18px;height:18px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Flickering top</h3>
<p>By extending the glassy backdrop <i>below</i> the header, we can ensure that the blurring algorithm takes it into consideration even before that element reaches the header.</p>
<p>But what about when things leave the top of the viewport?</p>
<p>Things aren’t quite so nice. <strong>Scroll down slowly in this demo:</strong></p>
<!--$--><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div></div><p><img loading="lazy" src="https://thelabyrinth.substack.com/images/backdrop-filter/boats.jpg"/></p></div></div></div><!--/$-->
<p>Notice that weird goopy flickering, at the very top of the viewport?</p>
<div data-include-caption="false" data-alignment="center"><video autoplay="" loop="" muted="" playsinline="" src="/images/backdrop-filter/flickering-top-ff.mp4" aria-label="Close-up of the above demo, showing the issue at the top"></video></div>
<p>It’s the same issue as before. The gaussian blur algorithm is only considering the pixels directly underneath it. When a yellow longboard is scrolled out of view, for example, that data is no longer factoring into the blur algorithm, causing those unnatural color flickers.</p>
<p><strong>Unfortunately, we can’t re-use our solution here.</strong> As far as I can tell, elements outside the viewport are <i>never</i> considered by <code>backdrop-filter()</code>, even if the elements are layered correctly.</p>
<p>The best solution I’ve found for this solution is to add a gradient that covers the flickering:</p>
<!--$--><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div></div><p><img loading="lazy" src="https://thelabyrinth.substack.com/images/backdrop-filter/boats.jpg"/></p></div></div></div><!--/$-->
<p>Here’s the code:</p>
<div translate="no" data-less-bottom-margin="false"><div><pre><code><span><span>.</span><span>backdrop</span><span> {</span></span>
<span><span>  position</span><span>:</span><span> absolute</span><span>;</span></span>
<span><span>  inset</span><span>:</span><span> 0</span><span>;</span></span>
<span><span>  height</span><span>:</span><span> 200</span><span>%</span><span>;</span></span>
<span><span>  background</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>    to</span><span> bottom</span><span>,</span></span>
<span><span>    /*</span></span>
<span><span>      Replace this with your site’s</span></span>
<span><span>      actual background color:</span></span>
<span><span>    */</span></span>
<span><span>    hsl</span><span>(</span><span>0</span><span>deg</span><span> 0</span><span>%</span><span> 0</span><span>%</span><span>)</span><span> 0</span><span>%</span><span>,</span></span>
<span><span>    transparent</span><span> 50</span><span>%</span></span>
<span><span>  );</span></span>
<span><span>  backdrop-filter</span><span>:</span><span> blur</span><span>(</span><span>16</span><span>px</span><span>);</span></span>
<span><span>  mask-image</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>    to</span><span> bottom</span><span>,</span></span>
<span><span>    black</span><span> 0</span><span>%</span><span> 50</span><span>%</span><span>,</span></span>
<span><span>    transparent</span><span> 50</span><span>%</span><span> 100</span><span>%</span></span>
<span><span>  );</span></span>
<span><span>  pointer-events</span><span>:</span><span> none</span><span>;</span></span>
<span><span>}</span></span></code></pre></div></div>
<p>Until now, the <code>.backdrop</code> element has been fully transparent; we haven’t applied a <code>background</code> at all. This gradient makes it opaque at the very top, blocking the flickering colors from view, but fading to transparent, to show the frosted glass effect.</p>
<h3 id="thicker-glass" data-element-type="ContentHeading"><a id="thicker-glass-5" href="#thicker-glass-5"><svg viewBox="0 0 24 24" fill="none" style="width:18px;height:18px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Thicker glass</h3>
<p>In some circumstances, the frosted glass effect can be a bit distracting:</p>
<!--$--><div><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div><div><p>Some Website</p><nav><ul><li>Home</li><li>Shop</li><li>Contact</li></ul></nav></div></div><div aria-hidden="true"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p><p>It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of &#34;de Finibus Bonorum et Malorum&#34; (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, &#34;Lorem ipsum dolor sit amet..&#34;, comes from a line in section 1.10.32.</p></div></div></div></div></div><!--/$-->
<p>This feels too “busy” to me; the blurry text sitting behind the header makes the site name and navigation too hard to read. It all feels a bit messy, and not as subtle as I want.</p>
<p>There are two main ways to fix this. We could increase the blur radius:</p>
<!--$--><div><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div><div><p>Some Website</p><nav><ul><li>Home</li><li>Shop</li><li>Contact</li></ul></nav></div></div><div aria-hidden="true"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p><p>It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of &#34;de Finibus Bonorum et Malorum&#34; (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, &#34;Lorem ipsum dolor sit amet..&#34;, comes from a line in section 1.10.32.</p></div></div></div></div><div><div><p><label for="radius">Blur radius<!-- -->:</label><span>12px</span></p></div></div></div><!--/$-->
<p>Or, we could add a <code>background-color</code> to the parent <code>&lt;header&gt;</code>, making it semi-opaque:</p>
<!--$--><div><div><div><div><div></div><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(0deg);transform-origin:center center"></path></svg><p><span>Some Example Website</span></p><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" preserveAspectRatio="none"><path fill="currentColor" d="M0 16c8.837 0 16-7.163 16-16v16z" style="transform:rotate(90deg);transform-origin:center center"></path></svg></div></div><div><p><span>https://www.joshwcomeau.com/example-website</span></p></div></div><div><div><div><div><p>Some Website</p><nav><ul><li>Home</li><li>Shop</li><li>Contact</li></ul></nav></div></div><div aria-hidden="true"><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p><p>It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of &#34;de Finibus Bonorum et Malorum&#34; (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, &#34;Lorem ipsum dolor sit amet..&#34;, comes from a line in section 1.10.32.</p></div></div></div></div><div><div><p><label for="opacity">Background Opacity<!-- -->:</label><span>0.6</span></p></div></div></div><!--/$-->
<p>(We could also tweak the gradient we added in the previous section, making it fade from fully-opaque to semi-opaque, but I prefer to keep the two things separate, so that I can tweak them independently.)</p>
<h2 id="browser-support" data-element-type="ContentHeading"><a id="browser-support-6" href="#browser-support-6"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Browser support</h2>
<p><code>backdrop-filter</code> has been around in all major browsers for a number of years now; <a rel="noopener noreferrer" target="_blank" href="https://caniuse.com/css-backdrop-filter">according to<!-- --> <span>caniuse<svg viewBox="0 0 24 24" fill="none" style="width:0.7em;height:0.7em;opacity:1"><mask id="external-icon-mask-:R2psat4mfnnija:"><rect x="0" y="0" width="24" height="24" fill="white"></rect><rect x="10" y="0" width="16" height="14" fill="black"></rect></mask><rect x="3" y="6" width="15" height="15" rx="2" mask="url(#external-icon-mask-:R2psat4mfnnija:)"></rect><path d="M 10 14 L 20 4 h -6 h 6 v 6" stroke="currentColor"></path></svg><span>(opens in new tab)</span></span></a>, it’s above 97% support as I write this in December 2024. For our main optimization, we also need <code>mask-image</code>, which is <a rel="noopener noreferrer" target="_blank" href="https://caniuse.com/mdn-css_properties_mask-image">almost as well<!-- --> <span>supported<svg viewBox="0 0 24 24" fill="none" style="width:0.7em;height:0.7em;opacity:1"><mask id="external-icon-mask-:R2rsat4mfnnija:"><rect x="0" y="0" width="24" height="24" fill="white"></rect><rect x="10" y="0" width="16" height="14" fill="black"></rect></mask><rect x="3" y="6" width="15" height="15" rx="2" mask="url(#external-icon-mask-:R2rsat4mfnnija:)"></rect><path d="M 10 14 L 20 4 h -6 h 6 v 6" stroke="currentColor"></path></svg><span>(opens in new tab)</span></span></a>, sitting at 96.3%.</p>
<p>Both properties require a <code>-webkit</code> prefix for some browsers, but most CSS tooling will add this for you automatically.</p>
<p>At the bottom of this blog post, I’ll include the full copy-ready code, which uses feature queries to make sure that older browsers still have a usable experience. They won’t get the frosted glass effect, but everything will still be readable and usable.</p>

<h2 id="glassy-edge" data-element-type="ContentHeading"><a id="glassy-edge-7" href="#glassy-edge-7"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Glassy edge</h2>
<p>As if this stuff wasn’t complicated enough already, Artur Bien came up with an extra twist; we can create the illusion of a 3D piece of glass by adding a <em>second</em> blurred element with different filter settings:</p>
<!--$--><div data-use-adaptive-colors="true" data-demo-unit="true" data-control-position="top"><div><div><div><p><label for=":R1d2t4mfnnija:_thickness">Glass thickness<!-- -->:</label><span>3px</span></p></div><div><p><label for=":R1d2t4mfnnija:_radius">Edge blur radius<!-- -->:</label><span>8px</span></p></div></div><div><div></div></div></div></div><!--/$-->
<p>Isn’t that lovely?!</p>
<p>Here’s how this works: The bottom edge is a separate DOM node with <em>its own</em> <code>backdrop-filter</code>. I find it looks better with a smaller blur radius (eg. 8px in the bottom edge, 16px in the main backdrop), and with an extra <code>brightness</code> filter to really make it pop. ✨</p>
<p>The code for this is a bit gnarly 😅. I’ve done my best to explain it in the comments below:</p>
<div translate="no" data-less-bottom-margin="true"><div><pre><code><span><span>&lt;</span><span>style</span><span>&gt;</span></span>
<span><span>  .</span><span>backdrop</span><span> {</span></span>
<span><span>    position</span><span>:</span><span> absolute</span><span>;</span></span>
<span><span>    inset</span><span>:</span><span> 0</span><span>;</span></span>
<span><span>    height</span><span>:</span><span> 200</span><span>%</span><span>;</span></span>
<span><span>    border-radius</span><span>:</span><span> 4</span><span>px</span><span>;</span></span>
<span><span>    background</span><span>:</span><span> hsl</span><span>(</span><span>0</span><span>deg</span><span> 0</span><span>%</span><span> 100</span><span>%</span><span> / </span><span>0.1</span><span>);</span></span>
<span><span>    pointer-events</span><span>:</span><span> none</span><span>;</span></span>
<span><span>    backdrop-filter</span><span>:</span><span> blur</span><span>(</span><span>16</span><span>px</span><span>);</span></span>
<span><span>    mask-image</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>      to</span><span> bottom</span><span>,</span></span>
<span><span>      black</span><span> 0</span><span>,</span></span>
<span><span>      black</span><span> 50</span><span>%</span><span>,</span></span>
<span><span>      transparent</span><span> 50</span><span>%</span></span>
<span><span>    );</span></span>
<span><span>  }</span></span>
<span></span>
<span><span>  .</span><span>backdrop-edge</span><span> {</span></span>
<span><span>    /* Set this to whatever you want for the edge thickness: */</span></span>
<span><span>    --thickness</span><span>:</span><span> 6</span><span>px</span><span>;</span></span>
<span></span>
<span><span>    position</span><span>:</span><span> absolute</span><span>;</span></span>
<span><span>    inset</span><span>:</span><span> 0</span><span>;</span></span>
<span><span>    /*</span></span>
<span><span>      Only a few pixels will be visible, but we’ll</span></span>
<span><span>      set the height by 100% to include nearby elements.</span></span>
<span><span>    */</span></span>
<span><span>    height</span><span>:</span><span> 100</span><span>%</span><span>;</span></span>
<span><span>    /*</span></span>
<span><span>      Shift down by 100% of its own height, so that the</span></span>
<span><span>      edge stacks underneath the main &lt;header&gt;:</span></span>
<span><span>    */</span></span>
<span><span>    transform</span><span>:</span><span> translateY</span><span>(</span><span>100</span><span>%</span><span>);</span></span>
<span><span>    background</span><span>:</span><span> hsl</span><span>(</span><span>0</span><span>deg</span><span> 0</span><span>%</span><span> 100</span><span>%</span><span> / </span><span>0.1</span><span>);</span></span>
<span><span>    backdrop-filter</span><span>:</span><span> blur</span><span>(</span><span>8</span><span>px</span><span>)</span><span> brightness</span><span>(</span><span>120</span><span>%</span><span>);</span></span>
<span><span>    pointer-events</span><span>:</span><span> none</span><span>;</span></span>
<span><span>    /*</span></span>
<span><span>      We mask out everything aside from the first few</span></span>
<span><span>      pixels, specified by the --thickness variable:</span></span>
<span><span>    */</span></span>
<span><span>    mask-image</span><span>:</span><span> linear-gradient</span><span>(</span></span>
<span><span>      to</span><span> bottom</span><span>,</span></span>
<span><span>      black</span><span> 0</span><span>,</span></span>
<span><span>      black</span><span> var</span><span>(</span><span>--thickness</span><span>),</span></span>
<span><span>      transparent</span><span> var</span><span>(</span><span>--thickness</span><span>)</span></span>
<span><span>    );</span></span>
<span><span>  }</span></span>
<span><span>&lt;/</span><span>style</span><span>&gt;</span></span>
<span></span>
<span><span>&lt;</span><span>header</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>div</span><span> class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;&lt;/</span><span>div</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>div</span><span> class</span><span>=</span><span>&#34;</span><span>backdrop-edge</span><span>&#34;</span><span>&gt;&lt;/</span><span>div</span><span>&gt;</span></span>
<span><span>&lt;/</span><span>header</span><span>&gt;</span></span></code></pre></div></div>

<h2 id="the-final-code" data-element-type="ContentHeading"><a id="the-final-code-8" href="#the-final-code-8"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>The final code</h2>
<p>Phew! We covered a lot of ground in this one.</p>
<p>Here’s the final code, with all of the optimizations we’ve discussed. I’ve also included feature queries, to make sure that our website remains legible on older, unsupported browsers.</p>
<p>Feel free to copy this code, and use it however you’d like!</p>
<!--$--><div data-stacked="false"><div><header><p>Code Playground</p></header><div><div><div><div><p><label><span>Code editor:</span><div translate="no"><pre aria-hidden="true"><p><span>&lt;</span><span>style</span><span>&gt;</span><span></span></p><p><span>  </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>    </span><span>--thickness</span><span>:</span><span> </span><span>4</span><span>px</span><span>;</span><span></span></p><p><span>    </span><span>position</span><span>:</span><span> sticky</span><span>;</span><span></span></p><p><span>    </span><span>top</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>    </span><span>background</span><span>:</span><span> </span><span>hsl</span><span>(</span><span>0</span><span>deg</span><span> </span><span>0</span><span>%</span><span> </span><span>100</span><span>%</span><span> </span><span>/</span><span> </span><span>0.95</span><span>)</span><span>;</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>@supports</span><span></span></p><p><span>    </span><span>(</span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>)</span><span> </span><span>or</span><span></span></p><p><span>    </span><span>(</span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>)</span><span></span></p><p><span>  </span><span>{</span><span></span></p><p><span>    </span><span>header</span><span> </span><span>{</span><span></span></p><p><span>      </span><span>background</span><span>:</span><span> </span><span>hsl</span><span>(</span><span>0</span><span>deg</span><span> </span><span>0</span><span>%</span><span> </span><span>100</span><span>%</span><span> </span><span>/</span><span> </span><span>0.5</span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>    </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>      </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>      </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>      </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>16</span><span>px</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>background</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>        to bottom</span><span>,</span><span></span></p><p><span>        </span><span>hsl</span><span>(</span><span>0</span><span>deg</span><span> </span><span>0</span><span>%</span><span> </span><span>95</span><span>%</span><span>)</span><span>,</span><span></span></p><p><span>        </span><span>transparent</span><span> </span><span>50</span><span>%</span><span></span></p><p><span>      </span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>pointer-events</span><span>:</span><span> none</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>    </span><span>.backdrop-edge</span><span> </span><span>{</span><span></span></p><p><span>      </span><span>position</span><span>:</span><span> absolute</span><span>;</span><span></span></p><p><span>      </span><span>left</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>      </span><span>right</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>      </span><span>bottom</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>      </span><span>height</span><span>:</span><span> </span><span>var</span><span>(</span><span>--thickness</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>background</span><span>:</span><span> </span><span>hsl</span><span>(</span><span>0</span><span>deg</span><span> </span><span>0</span><span>%</span><span> </span><span>100</span><span>%</span><span> </span><span>/</span><span> </span><span>0.1</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>-webkit-backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>12</span><span>px</span><span>)</span><span> </span><span>brightness</span><span>(</span><span>0.96</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>backdrop-filter</span><span>:</span><span> </span><span>blur</span><span>(</span><span>12</span><span>px</span><span>)</span><span> </span><span>brightness</span><span>(</span><span>0.96</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>transform</span><span>:</span><span> </span><span>translateY</span><span>(</span><span>100</span><span>%</span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>pointer-events</span><span>:</span><span> none</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span>  </span><span>@supports</span><span></span></p><p><span>    </span><span>(</span><span>mask-image</span><span>:</span><span> none</span><span>)</span><span> </span><span>or</span><span></span></p><p><span>    </span><span>(</span><span>-webkit-mask-image</span><span>:</span><span> none</span><span>)</span><span></span></p><p><span>  </span><span>{</span><span></span></p><p><span>    </span><span>.backdrop</span><span> </span><span>{</span><span></span></p><p><span>      </span><span>height</span><span>:</span><span> </span><span>200</span><span>%</span><span>;</span><span></span></p><p><span>      </span><span>-webkit-mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>        to bottom</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>0</span><span>%</span><span> </span><span>50</span><span>%</span><span>,</span><span></span></p><p><span>        </span><span>transparent</span><span> </span><span>50</span><span>%</span><span> </span><span>100</span><span>%</span><span></span></p><p><span>      </span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>        to bottom</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>0</span><span>%</span><span> </span><span>50</span><span>%</span><span>,</span><span></span></p><p><span>        </span><span>transparent</span><span> </span><span>50</span><span>%</span><span> </span><span>100</span><span>%</span><span></span></p><p><span>      </span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>    </span><span>.backdrop-edge</span><span> </span><span>{</span><span></span></p><p><span>      </span><span>height</span><span>:</span><span> </span><span>100</span><span>%</span><span>;</span><span></span></p><p><span>      </span><span>inset</span><span>:</span><span> </span><span>0</span><span>;</span><span></span></p><p><span>      </span><span>-webkit-mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>        to bottom</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>0</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>var</span><span>(</span><span>--thickness</span><span>)</span><span>,</span><span></span></p><p><span>        </span><span>transparent</span><span> </span><span>var</span><span>(</span><span>--thickness</span><span>)</span><span></span></p><p><span>      </span><span>)</span><span>;</span><span></span></p><p><span>      </span><span>mask-image</span><span>:</span><span> </span><span>linear-gradient</span><span>(</span><span></span></p><p><span>        to bottom</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>0</span><span>,</span><span></span></p><p><span>        </span><span>black</span><span> </span><span>var</span><span>(</span><span>--thickness</span><span>)</span><span>,</span><span></span></p><p><span>        </span><span>transparent</span><span> </span><span>var</span><span>(</span><span>--thickness</span><span>)</span><span></span></p><p><span>      </span><span>)</span><span>;</span><span></span></p><p><span>    </span><span>}</span><span></span></p><p><span>  </span><span>}</span><span></span></p><p><span></span><span>&lt;/</span><span>style</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>header</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>backdrop-edge</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p><p><span></span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>ball</span><span>&#34;</span><span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></p></pre></div></label></p></div></div><div><div><div><p>Result</p></div></div></div></div></div></div></div><!--/$-->
<h2 id="continue-learning" data-element-type="ContentHeading"><a id="continue-learning-9" href="#continue-learning-9"><svg viewBox="0 0 24 24" fill="none" style="width:21px;height:21px;opacity:1"><line x1="2" y1="8" x2="22" y2="8" stroke="currentColor"></line><line x1="2" y1="16" x2="22" y2="16" stroke="currentColor"></line><line x1="10" y1="2" x2="6" y2="22" stroke="currentColor"></line><line x1="18" y1="2" x2="14" y2="22" stroke="currentColor"></line></svg><span>Link to this heading</span></a>Continue learning</h2>
<p>If you’ve enjoyed this blog post, you might like to know that I have an entire course about CSS!</p>
<p>It’s called <a rel="noopener noreferrer" target="_blank" href="https://css-for-js.dev">CSS for JavaScript<!-- --> <span>Developers<svg viewBox="0 0 24 24" fill="none" style="width:0.7em;height:0.7em;opacity:1"><mask id="external-icon-mask-:Rnemt4mfnnija:"><rect x="0" y="0" width="24" height="24" fill="white"></rect><rect x="10" y="0" width="16" height="14" fill="black"></rect></mask><rect x="3" y="6" width="15" height="15" rx="2" mask="url(#external-icon-mask-:Rnemt4mfnnija:)"></rect><path d="M 10 14 L 20 4 h -6 h 6 v 6" stroke="currentColor"></path></svg><span>(opens in new tab)</span></span></a>, and it’s built using the same tech stack as this blog: it’s chock full of interactive articles, demos, and opportunities to experiment. There are also bite-sized videos, exercises, workshops, and even a few mini-games!</p>
<p>You can learn all about my course here:</p>
<ul>
<li><span><svg xmlns="http://www.w3.org/2000/svg" width="1.25rem" height="1.25rem" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></span><div><a rel="noopener noreferrer" target="_blank" href="https://css-for-js.dev">CSS for JavaScript<!-- --> <span>Developers<svg viewBox="0 0 24 24" fill="none" style="width:0.7em;height:0.7em;opacity:1"><mask id="external-icon-mask-:Rbleut4mfnnija:"><rect x="0" y="0" width="24" height="24" fill="white"></rect><rect x="10" y="0" width="16" height="14" fill="black"></rect></mask><rect x="3" y="6" width="15" height="15" rx="2" mask="url(#external-icon-mask-:Rbleut4mfnnija:)"></rect><path d="M 10 14 L 20 4 h -6 h 6 v 6" stroke="currentColor"></path></svg><span>(opens in new tab)</span></span></a></div></li>
</ul>
<div data-content-type="blog-post"><div><h3>Last updated on</h3><p>December 5th, 2024</p></div><div><h3># of hits</h3></div></div></article></main></div></div>
  </body>
</html>
