<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://peterlyons.com/problog/2024/08/dev-logs-without-the-noise/">Original</a>
    <h1>Dev Logs Without the Noise</h1>
    
    <div id="readability-page-1" class="page"><div>
    <header>
      
    </header>
    
<article>
  
  <p>August 24, 2024</p>
  <p>For local development, json logs often have a bunch of fields you might want for production observability, but almost never care about for local development. The script below is a template you can use to filter out fields you know are noise while allowing all other fields to come through unchanged. It&#39;ll also pretty-print for easier reading. The basic approach is using <code>jq</code> to delete noise fields with some looseness encoded to handle unexpected schema.</p>
<p>The exact filters and selects will need to be tailored for you specific logs, but a project I recently worked on had things roughly as below that were usually noise I wanted to hide.</p>
<pre data-lang="bash"><code data-lang="bash"># Delete the noisy fields we usually don&#39;t care about
# in dev and let jq pretty print and colorize
jq &#39;. |
    del(.request.ip?) |
    del(.duration?) |
    del(.time?) |
    del(.env?) |
    del(.user_id?) |
    del(.msg? | select(. == &#34;request served&#34;)) |
    del(.level? | select(. == &#34;INFO&#34;)) |
    if .msg? | contains(&#34;[core]&#34;) then empty else . end |
    del(.revision?)&#39;
</code></pre>
<p>To use this, pipe you server&#39;s json log output to this script. You can throw <code>tee</code> in the pipeline too if you want the full unfiltered log to disk, but the pretty version in your terminal.</p>

</article>
<nav>
  <a href="https://peterlyons.com/problog/"> back to blog index</a>
  <ul>
    
    
  </ul>
</nav>


    
    
  </div></div>
  </body>
</html>
