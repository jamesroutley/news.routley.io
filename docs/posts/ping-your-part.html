<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jae.fi/blog/2023/02/05/ping-your-part!/">Original</a>
    <h1>Ping Your Part</h1>
    
    <div id="readability-page-1" class="page"><div>
                

                
                <p>- Published on 9th February, 2023 -</p>

                

                <p>

                

                

                Tags: <a href="https://jae.fi/blog/tag/tech/">tech</a>,<a href="https://jae.fi/blog/tag/fun/">fun</a></p><p>On February 6th 2023, Cameron Steel introduced the world to the IPv6 Canvas via <a href="https://blog.tugzrida.xyz/2023/02/06/introducing-the-ipv6-canvas/">a blog post of his</a>.</p>
<p>Early in the launch, there was already this little guy:</p>
<p><img src="https://bm.777.tf/web/blog/canvas/amogus.gif" alt="Dancing among us character doing the distraction dance."/></p>
<p>I originally discovered the project in the morning of February 7th, via the Ungleich IPv6 Matrix room.</p>
<p>At first, I started generating the addresses.</p>
<pre><code>base_address = &#34;2400:8902:e001:233&#34;
pixels = []

def make_image_and_start(ox, oy, image_path, to_file=False, filename=&#34;image.txt&#34;):
    image = Image.open(image_path).convert(&#34;RGBA&#34;)
    max_w, max_h = image.size

    curr_w, curr_h = 0, 0

    start_w = int(ox)
    start_h = int(oy)

    max_w -= 1
    max_h -= 1

    # Now, let&#39;s convert the image
    while True:
        coordinates = x, y = curr_w, curr_h
        r, g, b, a = image.getpixel(coordinates)

        print(f&#34;Converting: {x},{y} -&gt; {r}:{g}:{b}/{a}&#34;, end=&#34;\r&#34;)

        # Check for alpha (transparency support)
        if a &gt; 0:
            pixels.append(make_address(curr_w + start_w, curr_h + start_h, r, g, b))

        # Basic printer that goes left-&gt; right and starts again
        if curr_h == max_h:
            curr_h = 0
            curr_w += 1
        else:
            curr_h += 1

        if curr_w == max_w and curr_h == max_h:
            curr_h = start_h
            curr_w = start_w
            break
</code></pre>
<p>Then, my original thought was to start using the <code>ping</code> command but it ended up being slow, taking half an hour to draw even half of the original image.</p>
<p>Still, there was lots of room for improvement and it showed when the whole canvas was replaced with a moving rickroll (nicely done btw).</p>
<pre><code>sock = socket(socket.AF_INET6, socket.SOCK_RAW, socket.IPPROTO_ICMPV6)

def do_ping(dest_addr, timeout=1):
    print(f&#34;Rendering current: {dest_addr}&#34;, end=&#34;\r&#34;)

    try:
        # Raw sockets, who cares, it&#39;s fast
        sock.sendto(b&#34;\x80\0\0\0\0\0\0\0&#34;, (dest_addr, 0))
    except:
        # We don&#39;t care about failing
        # The pixel is usually re-written in next pass
        pass
</code></pre>
<p>At first, the program would crash, citing a buffer space error.</p>
<p>Victory, I could now draw images super fast which protected my artwork from attacks after.</p>
<p><img src="https://bm.777.tf/web/blog/canvas/canvas.png" alt="Pixelated canvas with: a Super Mario 64 logo, a big trans flag with Jae the Synth, an image of a husky in a LGBT hoodie and various texts and smaller images around."/></p>
<p>All in all, this was a great experiment and I want to thank Cameron for creating it in the first place.</p>
<p>Also, thanks to everybody that participated in good faith, was lots of fun!</p>
<p>That&#39;s it for this post and I&#39;ll see you in the next one!</p>
<hr/>
<p>If you liked this post, consider adding it to your <a href="https://jae.fi/blog/index.xml">RSS</a> or <a href="https://jae.fi/blog/index.json">JSON</a> feed reader :)</p>

            </div></div>
  </body>
</html>
