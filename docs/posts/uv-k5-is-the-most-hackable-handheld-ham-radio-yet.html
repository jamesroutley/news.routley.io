<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://spectrum.ieee.org/quansheng-uv-k5-hacking">Original</a>
    <h1>UV-K5 Is the Most Hackable Handheld Ham Radio Yet</h1>
    
    <div id="readability-page-1" class="page"><div data-headline="The Most Hackable Handheld Ham Radio Yet" data-elid="2667595555" data-post-url="https://spectrum.ieee.org/quansheng-uv-k5-hacking" data-authors="Stephen Cass" data-page-title="The Most Hackable Handheld Ham Radio Yet - IEEE Spectrum"><div><p>All right, confession time. I don’t use my handheld <a href="https://spectrum.ieee.org/ham-radio">ham radio</a> for much more than eavesdropping on the subway dispatcher when my train rumbles to a mysterious halt in a dark tunnel. But even I couldn’t help but hear the buzz surrounding a new handheld,<a href="http://en.qsfj.com/products/3002" rel="noopener noreferrer" target="_blank"> Quansheng’s UV-K5.</a></p><p>It caught my attention in part because for over a decade, <a href="https://www.baofengradio.com/" rel="noopener noreferrer" target="_blank">Baofeng</a> has been <em>the</em> name in Chinese handhelds. In 2012 Baofeng made waves with its <a href="https://en.wikipedia.org/wiki/Baofeng_UV-5R" rel="noopener noreferrer" target="_blank">UV-5R radio</a>, upending the sleepy handheld-transceiver market. Prior to the 5R, the price tag of the cheapest VHF/UHF handheld was a little north of US $100. The 5R sold for a quarter to a third of that. Hams groused about the 5R’s so-so technical performance—and then bought a couple anyway, so they’d always have a radio in their car or workplace. </p><p>Now it’s Quansheng that’s making a splash. The UV-K5, released last year, might be the most hackable handheld ever, with <a href="https://github.com/ludwich66/Quansheng_UV-K5_Wiki/wiki" rel="noopener noreferrer" target="_blank">a small army of dedicated hams</a> adding a raft of software-based improvements and new features. I had to have one, and $30 later, I did.</p><p>Like Baofeng’s 5R, Quansheng’s K5 as a radio transceiver is <em>fine</em>. (I’m using K5 here to refer to both the original K5 and the new<a href="http://en.qsfj.com/products/3268" rel="noopener noreferrer" target="_blank"> K5(8)</a> model.) The key technical distinction between the 5R and K5 is a seemingly minor design choice. With Baofeng’s 5R, the<a href="https://forums.radioreference.com/threads/can-uv5r-firmware-be-flashed.352644/" rel="noopener noreferrer" target="_blank"> firmware resides in read-only memory</a>. But Quansheng stores the K5’s firmware in flash memory and made it possible to rewrite that memory with the same USB programming cable used to assign frequencies to preset channels.</p><p>This feature has opened the door for improvements to the K5 that are well beyond what Quansheng offers out of the box. Hopefully, this design will inspire other radio makers to offer more support for modders, in turn bringing more innovation to the VHF and UHF radio bands.</p><p>Quansheng probably thought of its design purely in terms of fixing software bugs or adjusting for regulatory changes—it offers a free install tool for uploading official firmware releases to the radio. But the prospect of an updatable radio dangled an irresistible temptation for folks to start reverse engineering the firmware and hardware so they could try writing their own code. Modifications to date have generally taken the form of patches to the official firmware, rather than wholesale rewrites. With the official firmware taking up most of the radio’s 64 kilobytes of flash memory, such mods have to fit into less than 3 KB. And the CPU is not brimming with compute power—it’s a 48-megahertz, 32-bit <a href="https://www.st.com/resource/en/datasheet/stm32g030c6.pdf" rel="noopener noreferrer" target="_blank">ARM-based processor</a> with 8 KB of RAM. Nonetheless, I found the results impressive.</p><p>For example, one mod installs a fairly sophisticated graphical spectrum analyzer: You can adjust the bandwidth, set a threshold for tuning into detected peaks automatically, and specify frequencies to ignore, among other things. Another mod allows you to exchange text messages between K5s. Other mods improve the K5’s ability to receive AM signals, meaning you can, say, listen in on aviation bands more clearly. And there are plenty of fun little mods that do things like change up the system fonts or replace the start-up message with a line-art image of your choice.</p><p>Updatable firmware dangled an irresistible temptation for folks to start reverse engineering…</p><p>Installing many of these mods is ridiculously easy. Normally at this point in a Hands On article that involves hacking some <a href="https://spectrum.ieee.org/topic/consumer-electronics/">consumer electronics</a>, things get pretty heroic as I <a href="https://spectrum.ieee.org/how-to-bend-a-vintage-casio-keyboard" target="_self">futz with the hardware</a> or unravel a <a href="https://spectrum.ieee.org/watchy-the-hackable-50-smartwatch" target="_self">software-installation enigma</a>. But not this time.</p><p>A modder known as whosmatt has created <a href="https://whosmatt.github.io/uvmod/" rel="noopener noreferrer" target="_blank">a Web-based patcher/flasher for the K5</a> that lets you pick a selection of mods from a menu. It then combines them with the official firmware to create a custom image for uploading (as long as you don’t exceed the total amount of memory).</p><p>In fact, if you’re using Chrome, Edge, or Opera, you don’t even need to use Quansheng’s installer to upload the firmware: You can update the radio’s flash memory directly from the browser via the built-in <a href="https://developer.chrome.com/docs/capabilities/serial" rel="noopener noreferrer" target="_blank">Web Serial API</a> and the USB programming cable. (The instructions say this will work only on Linux and Windows, but I was able to do it using a Mac as well.) Web Serial could do with some improved error handling, though. The first USB programming cable I used was a bit flaky, but where Quansheng’s installer would halt and flag a communications error with a failed upload, Web Serial would silently crash and take the whole Windows operating system with it. </p><p>There are even more K5 mods available than are in whosmatt’s online patcher. If you want to play with those or start writing your own mods, Python-based toolchains exist to assist you.</p><p><img alt="An illustration showing the arrangement of major subsystems in the UV-K5. A CPU is connected to an EEPROM, a keypad, a display screen, a 68- to 108-MHz FM receiver, and an RF transceiver integrated circuit. The RF IC is connected to the speaker, a microphone, and the amplification and filter circuits needed for transmission and reception, which are in turn connected to an antenna." data-rm-shortcode-id="1eccc89c096a55ae1201ab1f82564e6d" data-rm-shortcode-name="rebelmouse-image" data-runner-src="https://spectrum.ieee.org/media-library/an-illustration-showing-the-arrangement-of-major-subsystems-in-the-uv-k5-a-cpu-is-connected-to-an-eeprom-a-keypad-a-display-s.png?id=51828839&amp;width=980" height="948" id="814b4" lazy-loadable="true" src="data:image/svg+xml,%3Csvg%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%20viewBox=&#39;0%200%201500%20948&#39;%3E%3C/svg%3E" width="1500"/><small placeholder="Add Photo Caption...">This block diagram of the UV-K5 is based on the work of Phil McAllen. Hams have reverse engineered many details of the radio’s hardware and software.</small><small placeholder="Add Photo Credit...">James Provost</small></p><p>Of course, allowing unfettered modding of the K5’s transceiver does raise the possibility of abuse. For example, the Quansheng firmware blocks transmitting on the aviation band, to prevent illegal and hazardous interference. But this block can be removed by a patch (although to be a significant threat, you’d likely need an amplifier to boost the K5’s 5-watt signal).</p><p>However, hams have always had the ability to behave badly, with or without firmware blocks. Such blocks are convenient for guarding against accidental abuse, but the truth is that unless problematic signals are persistent enough to allow a <a href="https://www.fcc.gov/enforcement/areas/interference-resolution" rel="noopener noreferrer" target="_blank">transmitter’s location to be triangulated</a>, amateur radio must continue to rely on an honor system, whether that means not <a href="https://www.arrl.org/files/file/Technology/Neighbor_Info/Neighbor_Info.pdf" rel="noopener noreferrer" target="_blank">jamming a neighbor’s TV</a> or transmitting on forbidden frequencies.</p><p>Many of the most <a href="https://spectrum.ieee.org/build-a-longdistance-data-network-using-ham-radio" target="_self">exciting uses of ham radio today</a> involve digital processing, and that processing is normally done using a computer connected to a transceiver. With embedded controllers becoming ever more powerful, the K5 modding scene points toward a future where more processing happens in-radio and where you can add new functions the way apps are added to smartphones. Here’s hoping manufacturers embrace that future!</p></div></div></div>
  </body>
</html>
