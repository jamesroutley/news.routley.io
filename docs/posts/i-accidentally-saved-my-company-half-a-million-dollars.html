<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ludic.mataroa.blog/blog/i-accidentally-saved-half-a-million-dollars/">Original</a>
    <h1>I accidentally saved my company half a million dollars</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
            <p>I saved my company half a million dollars in about five minutes. This is more money than I&#39;ve made for my employers over the course of my entire career because this industry is a sham. I clicked about five buttons.</p>
<p>Let&#39;s talk about why happened and why it&#39;s a disgrace that it was even possible.</p>

<p>Let&#39;s start with some background, because it is fucking <em>wild</em> that an inefficiency that took me five minutes to solve in a GUI configuration panel was allowed to persist. We <em>cancelled someone&#39;s contract</em> the week before I did this. <em>Someone lost their job</em> because no one could get their act together long enough to click the button I told them to click.</p>
<p>A few years ago, this company decided that it wanted to create an analytics platform, following the decision to become more &#34;data driven&#34;. They hired some incredibly talented people to make this happen, and then like five times as many idiots.</p>
<p>At the time this was happening, I had just graduated and joined the organization as a data scientist. We, of course, did not do any data science, because the organization did not require any data science to be done - what they actually needed to do was fire most of the staff in every team, leaving behind the two people who actually had good domain knowledge, then allow them to collaborate with good engineering teams to build sensible processes and systems. Instead, they hired a bunch of Big Firm Consultants. You can see where this is going already.</p>
<p>Nonetheless, at the time I was young and took the organization at its word. Executives would tell us constantly how excited they were for us to roll out new A.I initiatives (then tell us there was no time, so could we please get that report to them in a spreadsheet), and I&#39;d ask for some sort of compute to <em>perform</em> some machine learning, or even set up data pipelines.</p>
<p>It never worked. Instead, we were told that we just had to wait for the Advanced Analytics Platform (AAP) to be deployed. You see, it&#39;s December, and it&#39;s launching in January.</p>
<p>Then in January I was told to be patient, it was coming in March.</p>
<p>In June, I was told it had been put on hold due to Covid - this was a very convenient excuse because they had absolutely fucked the whole project up already, but it bought some valuable time. By the next December, I had left the organization and the AAP was still nowhere to be seen.</p>
<p>We skip ahead three years. The AAP is finally ready to launch. It turns out none of the features I needed were ever planned, so I guess they were just lying to me before I left.</p>
<p>Four engineers leave the company in the same week, and I speak with the directors because I know they need a <em>real</em> engineer in and they can&#39;t find them. I&#39;m a substantially less experienced engineer than many of the readers here, but suffice it to say that I can read documentation without panicking, which is considered S-tier in this country. My conditions - a big pile of money and they had to put me on the AAP team because they&#39;re the only team that gets actual toys to play with.</p>

<p>It&#39;s an insane dumpster fire spiderweb of technical debt and it&#39;s only like one week old. Here are some fun details.</p>
<p>I get a friend of mine hired (big fan of nepotism), and he finds, <em>on day one</em>, a file in the project&#39;s repository that deletes prod using our CI/CD pipelines if it is ever moved into the wrong folder. It comes complete with the key and password required for an admin account. It was produced by the former lead engineer, who has moved on to a new role before his sins catch up with him.</p>
<p>The entire thing is stitched together by spreadsheets that are parsed by Python, dropped into S3, parsed by Lambdas into more S3, the S3 files are picked up by MongoDB, then MongoDB records are passed by another Lambda into S3, the S3 files are pulled into Snowflake via Snowpipe, the new Snowflake data is pivoted by a Javascript stored procedure into a relational format... and that&#39;s how you edit someone&#39;s database access. That whole process is to upload like a 2KB CSV to a database that has people&#39;s database roles in it.</p>
<p>This is considered <em>more auditable</em>.</p>
<p>Everything is transformed into a CSV because the security team demanded something that could undergo easy scanning for malicious content, then they never deployed the scanning tool, so we have all the downsides of the CSVs and none of the upsides.</p>
<p>Every Lambda function, the backbone of all the ETL pipelines, starts with <code>counter = 1</code> because one of the early iterations <em>used to use a counter</em> and people have just been copying that line over and over. <em>Senior data engineers</em> have been copying that line over and over.</p>
<p>The test suites in the CI/CD pipelines have been failing for months, because someone during debugging chose to use the Linux <code>tee</code> command to log any errors to both <code>stdout</code> and a file at the same time, but <code>tee</code> successfully executing was overwriting the error code from the failing tests.</p>
<p>To get access to the password for any API we need to hit, you search for something like <code>service-password</code> in an AWS service, which returns the value... <code>service-password</code> (as in, literally all the values are the same as the keys), then you use <em>that</em> to look up the actual password in a completely different service. No one knows why we do this.</p>
<p>The script that generates configuration files for our pipelines starts with 600 lines of comments, because senior engineers have been commenting the lines out in case they&#39;re needed later. The lines are just setting the same variables to different values, and they&#39;re all on GitHub anyway.</p>
<p>This is at an organization that some percentage of readers will recognize on sheer brand strength if they&#39;re in my country.</p>
<p>I&#39;m not even getting started, but we have to stop for now because I am going to catch fire. These details are important because now you understand the kind of operational incompetence that allows you to waste so much money on processing &lt;1TB of data per day that it dwarfs your team&#39;s salary.</p>

<p>The next thing to realize is that this platform never really had a chance of making any money for the organization. They do a little accounting trick (read: lying) which I&#39;ll talk about in another post that makes it seem like they&#39;ve had huge wins, but really this is just many times more expensive than our previous operational model.</p>
<p>The deal is that we pretend the whole team is doing something or other, and we stay within budget because the organization can&#39;t afford to spend infinite money on this social fiction. However, the budget for our database costs was being drastically overrun. I&#39;m not sure what the original estimate was, but I think it was intended to cost something like 200K for a year of operations, but we were now close to a million dollars.</p>
<p>Some quick facts:</p>
<ol>
<li>We use Snowflake as our database, which charges you based on the size of the computer you use to run your queries.</li>
<li>You only pay for computers while they&#39;re on.</li>
<li>We probably run a few thousand queries per week, mostly developers experimenting with little tweaks for PowerBI reports that no one reads, and on average they take about 2 seconds to run.</li>
<li><strong>The computers are set to idle for 10 minutes after every query</strong>.</li>
</ol>
<p>I noticed this about a month into joining the team, and suggested we uh... don&#39;t have the computers run for like two orders of magnitude longer than they need to for every query. I literally can&#39;t remember what was said, there was some Agile bullshit about doing a discovery piece, then it just never happened.</p>

<p>Anyway, <em>months</em> later, they finally give me a card that says &#34;Discovery: Optimise Costs&#34;. Now I <em>have</em> to optimize costs so that I have something to say at the next standup, and fortunately I know just the thing! I&#39;ll test my hypothesis that this is all a sick joke, and I&#39;m going to push the button that I secretly think should obviously have been pushed.</p>
<p>We&#39;ve got a new guy on another team who seems excellent, so I ask management if I can give him admin credentials since we need competent people. They say no. I flick him some lower-level database credentials that I <em>technically</em> wasn&#39;t told not to do since they aren&#39;t admin credentials, and he sanity-checks that it would save money. At 4PM on the last day of the week, I ping a chat full of good engineers and no managers to make sure I&#39;m not about to nuke everything, then just do it.</p>

<p>I return to work the following Monday. I <em>suspected</em> that this would save a bunch of money, and guess what, our projected bill dropped from a million to half a million dollars, and everyone is losing their fucking minds.</p>
<p>My team has spun this as a huge cost saving, when <em>really</em> we just applied a fire extinguisher to the pile of money that we had set alight.</p>
<p>Other teams are attacking my team, insisting that it can&#39;t be a coincidence that the one new guy joined exactly as we did this, and how was it possible we didn&#39;t know how to generate that kind of saving without his help? They are saying this because it makes them seem higher status and their teams only produce money in the land where you lie all day, but it <em>is</em> a fair question.</p>
<p>While my managers are very happy, they quietly suggest it may be unwise to roll out the changes to all the computers (I only did a few to be safe) because it would oversaturate the department to hear about us all day. And invite unwelcome questions. The subtext is that if we do this all slowly enough, it might seem like it took a lot of effort instead of just clicking buttons that I said had to be clicked almost a year ago.</p>
<p>I am asked to write some PowerPoints, which include phrases like &#34;a careful statistical analysis of user usage patterns indicated an opportunity to more effectively allocate resources&#34;, implying that nothing was <em>wrong</em>, we just needed to collect more data before deciding not to let the expensive machines idle all day.</p>
<p>Every day, I dread someone asking me to explain what the change was, because I will have to fucking <em>yeet</em> some managers I like under a bus, but they can&#39;t resist talking about the change non-stop because it is the closest some of them will ever get to impacting the bottom line. And <em>many of them are actually decent managers</em>, it&#39;s just that this whole department, like many departments, is some sort of weird political PsyOp to get executives promoted. It&#39;s <em>cosplaying as a real business</em> and the board thinks the costume is convincing. </p>

<p>By identifying a handful of good engineers and going totally rogue, we outperformed the entire department pretty effortlessly. The competent people are there, just made totally impotent by the organization, and I&#39;m still convinced that this place is probably better than the median organization.</p>
<p>I ask management for a 30K raise after saving 500K and my message is still unread. I suspect I will eventually receive either nothing or 5K.</p>
<p>I have even more meetings now because everyone wants to talk about how we saved the money. I had to make a PowerPoint. Kill me.</p>
<p>I would have been better off <em>not doing anything</em>. Let that be a lesson to you. Do you hear me? I applied myself for <em>five minutes</em> against my own better judgement, had the greatest success of my career, and have immediately been punished for it. <em>Learn from my mistakes, I beg of you.</em></p>
<p>PS: While this is doing immense traffic, any similar stories being sent to ludicity.hackernews@gmail.com would be greatly appreciated so that I feel less alone in this madhouse.</p>
        </div></div>
  </body>
</html>
