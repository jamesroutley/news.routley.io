<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dnlytras.com/blog/modern-php/">Original</a>
    <h1>Modern PHP</h1>
    
    <div id="readability-page-1" class="page"><div><article><p>The last time I&#39;ve used PHP was probably around 2017, although it was just in the context of supporting some WordPress sites. By that time 7.2 had already been released, but I had no idea. I wanted to avoid working with PHP at all costs.</p>
<p>This month I took some time to check what good things have been added to the language that I was unaware of. To be honest, things are looking great.</p>
<p>The list below is not exhaustive, I only reference what I&#39;ll be using, or find notable.</p>
<small>
 <ul>
 <li>
 <a href="#Array-destructuring">Array destructuring</a> <b>(v7.1)</b>
 </li>
 <li>
 <a href="#Spread-operator-within-arrays">Spread operator within arrays</a> <b>(v7.4)</b> &amp; <b>(v8.1)</b></li>
 <li>
 <a href="#Match-expressions">Match expressions</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Enumerations-enums">Enumerations (enums)</a> <b>(v8.1)</b></li>
 <li>
 <a href="#Arrow-functions">Arrow functions</a> <b>(v7.4)</b></li>
 <li>
 <a href="#Named-parameters">Named parameters</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Null-coalescing-operator">Null coalescing operator</a> <b>(v7.0)</b></li>
 <li>
 <a href="#Null-coalescing-assignment-operator">Null coalescing assignment operator</a> <b>(v7.4)</b></li>
 <li>
 <a href="#Null-safe-operator">Null-safe operator</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Spaceship-operator">Spaceship operator</a> <b>(v7.0)</b></li>
 <li>
 <a href="#Multi-catch-exception-handling">Multi catch exception handling</a> <b>(v7.1)</b></li>
 <li>
 <a href="#New-string-utils">`str_starts_with`, `str_ends_with`, `str_contains`</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Return-types">Return Types</a> <b>(v7.0)</b></li>
 <li>
 <a href="#Union-types">Union types</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Null-and-Void-return-types">Null and Void return types</a> <b>(v7.1)</b></li>
 <li>
 <a href="#Never-return-type">Never return type</a> <b>(v8.1)</b></li>
 <li>
 <a href="#Import-grouping">Grouped imports</a> <b>(v7.0)</b></li>
 <li>
 <a href="#Constructor-property-promotion">Constructor property promotion</a> <b>(v8.0)</b></li>
 <li>
 <a href="#Weakmaps">WeakMaps</a> <b>(v8.0)</b></li>
 </ul>
</small>
<h3 id="Array-destructuring"><a href="#Array-destructuring" aria-label="Array destructuring permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Array destructuring</h3>
<p>Added in v7.1</p>
<pre data-language="php" data-index="0"><code><span><span><span>// arrays</span></span></span>
<span><span><span>$posts</span><span> </span><span>=</span><span> [[</span><span>1</span><span>, </span><span>2</span><span>, </span><span>3</span><span>, </span><span>4</span><span>], [</span><span>5</span><span>, </span><span>6</span><span>, </span><span>7</span><span>]];</span></span></span>
<span><span><span>[</span><span>$publishedPosts</span><span>, </span><span>$draftPosts</span><span>] </span><span>=</span><span> </span><span>$posts</span><span>;</span></span></span>
<span><span><span>// or skip</span></span></span>
<span><span><span>[, </span><span>$draftPosts</span><span>] </span><span>=</span><span> </span><span>$posts</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>// associative arrays</span></span></span>
<span><span><span>$post</span><span> </span><span>=</span><span> [</span></span></span>
<span><span><span>  </span><span>&#39;title&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;Modern Php&#39;</span><span>,</span></span></span>
<span><span><span>  </span><span>&#39;description&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;...&#39;</span><span>,</span></span></span>
<span><span><span>  </span><span>&#39;status&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;Published&#39;</span></span></span>
<span><span><span>];</span></span></span>
<span><span></span></span>
<span><span><span>[</span><span>&#39;title&#39;</span><span> </span><span>=&gt;</span><span> </span><span>$title</span><span>, </span><span>&#39;description&#39;</span><span> </span><span>=&gt;</span><span> </span><span>$description</span><span>] </span><span>=</span><span> </span><span>$post</span><span>;</span></span></span></code></pre>
<h3 id="Spread-operator-within-arrays"><a href="#Spread-operator-within-arrays" aria-label="Spread operator within arrays permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spread operator within arrays</h3>
<ul>
<li>Initial support for arrays in v7.4</li>
<li>Support for string-keyed (associative) arrays in v8.1</li>
</ul>
<pre data-language="php" data-index="1"><code><span><span><span>// arrays</span></span></span>
<span><span><span>$userPosts</span><span> </span><span>=</span><span> [</span><span>1</span><span>, </span><span>2</span><span>, </span><span>3</span><span>, </span><span>4</span><span>, </span><span>5</span><span>];</span></span></span>
<span><span><span>$userPosts</span><span> </span><span>=</span><span> [</span><span>...</span><span>$userPosts</span><span>, </span><span>6</span><span>];</span></span></span>
<span><span></span></span>
<span><span><span>// associative arrays</span></span></span>
<span><span><span>$userPosts</span><span> </span><span>=</span><span> [</span></span></span>
<span><span><span>  </span><span>&#39;id-a&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;Published&#39;</span><span>,</span></span></span>
<span><span><span>  </span><span>&#39;id-b&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;Draft&#39;</span><span>,</span></span></span>
<span><span><span>];</span></span></span>
<span><span><span>$userPosts</span><span> </span><span>=</span><span> [</span><span>...</span><span>$userPosts</span><span>, </span><span>&#39;id-c&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;Draft&#39;</span><span>];</span></span></span></code></pre>
<h3 id="Match-expressions"><a href="#Match-expressions" aria-label="Match expressions permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Match expressions</h3>
<p>Added in v8.1</p>
<p>The one thing I&#39;m most jealous it&#39;s missing in Javascript</p>
<pre data-language="php" data-index="2"><code><span><span><span>// using a switch statement</span></span></span>
<span><span><span>switch</span><span> (</span><span>$status</span><span>) {</span></span></span>
<span><span><span> </span><span>case</span><span> </span><span>&#39;Published&#39;</span><span>:</span></span></span>
<span><span><span>  </span><span>$message</span><span> </span><span>=</span><span> </span><span>&#39;The post has been published&#39;</span><span>;</span></span></span>
<span><span><span>  </span><span>break</span><span>;</span></span></span>
<span><span><span> </span><span>case</span><span> </span><span>&#39;Draft&#39;</span><span>:</span></span></span>
<span><span><span>  </span><span>$message</span><span> </span><span>=</span><span> </span><span>&#39;The post is in draft state&#39;</span><span>;</span></span></span>
<span><span><span>  </span><span>break</span><span>;</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>// as a match expression</span></span></span>
<span><span><span>$message</span><span> </span><span>=</span><span> </span><span>match</span><span>(</span><span>$status</span><span>) {</span></span></span>
<span><span><span>  </span><span>&#39;Published&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;The post has been published&#39;</span><span>,</span></span></span>
<span><span><span>  </span><span>&#39;Draft&#39;</span><span> </span><span>=&gt;</span><span> </span><span>&#39;The post is in draft state&#39;</span><span>,</span></span></span>
<span><span><span>};</span></span></span></code></pre>
<h3 id="Enumerations-enums"><a href="#Enumerations-enums" aria-label="Enumerations enums permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enumerations (enums)</h3>
<p>Added in v8.1</p>
<pre data-language="php" data-index="3"><code><span><span><span>// previously using a class</span></span></span>
<span><span><span>class</span><span> </span><span>Status</span><span> {</span></span></span>
<span><span><span>  </span><span>const</span><span> </span><span>DRAFT</span><span> </span><span>=</span><span> </span><span>&#39;Draft&#39;</span><span>;</span></span></span>
<span><span><span>  </span><span>const</span><span> </span><span>PUBLISHED</span><span> </span><span>=</span><span> </span><span>&#39;Published&#39;</span><span>;</span></span></span>
<span><span><span>  </span><span>const</span><span> </span><span>ARCHIVED</span><span> </span><span>=</span><span> </span><span>&#39;Archived&#39;</span><span>;</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>// using an enum</span></span></span>
<span><span><span>enum</span><span> </span><span>PostStatus</span><span> {</span></span></span>
<span><span><span>  </span><span>case</span><span> </span><span>Draft</span><span>;</span></span></span>
<span><span><span>  </span><span>case</span><span> </span><span>Published</span><span>;</span></span></span>
<span><span><span>  </span><span>case</span><span> </span><span>Archived</span><span>;</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>$status</span><span> </span><span>=</span><span> </span><span>PostStatus</span><span>::</span><span>Draft</span><span>;</span></span></span></code></pre>
<h3 id="Arrow-functions"><a href="#Arrow-functions" aria-label="Arrow functions permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Arrow functions</h3>
<p>Added in v7.4</p>
<p><code>fn (args) =&gt; expression</code></p>
<p>(!) Arrow functions can&#39;t be multi-line</p>
<pre data-language="php" data-index="4"><code><span><span><span>$publishedPosts</span><span> </span><span>=</span><span> </span><span>array_filter</span><span>(</span><span>$posts</span><span>,</span></span></span>
<span><span><span>  </span><span>fn</span><span>(</span><span>$post</span><span>) </span><span>=&gt;</span><span> </span><span>$post</span><span>-&gt;</span><span>status</span><span> </span><span>===</span><span> </span><span>&#39;Published&#39;</span></span></span>
<span><span><span>)</span></span></span></code></pre>
<h3 id="Named-parameters"><a href="#Named-parameters" aria-label="Named parameters permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Named parameters</h3>
<p>Added in v8.0</p>
<pre data-language="php" data-index="5"><code><span><span><span>function</span><span> </span><span>enableThisConfig</span><span>(</span><span>$optionA</span><span>,</span><span> $optionB</span><span>,</span><span> $somethingElse</span><span>,</span><span> $anotherOne</span><span>)</span><span> {</span></span></span>
<span><span><span> </span><span>//</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>// 6 months later reading this.. ??</span></span></span>
<span><span><span>enableThisConfig</span><span>(</span><span>true</span><span>, </span><span>true</span><span>, </span><span>false</span><span>, </span><span>&#39;DEV&#39;</span><span>);</span></span></span>
<span><span></span></span>
<span><span><span>// using named params</span></span></span>
<span><span><span>enableThisConfig</span><span>(</span></span></span>
<span><span><span>  </span><span>optionA</span><span>: </span><span>true</span><span>,</span></span></span>
<span><span><span>  </span><span>optionB</span><span>: </span><span>true</span><span>,</span></span></span>
<span><span><span>  </span><span>somethingElse</span><span>: </span><span>false</span><span>,</span></span></span>
<span><span><span>  </span><span>anotherOne</span><span>: </span><span>&#39;DEV&#39;</span><span>,</span></span></span>
<span><span><span>);</span></span></span></code></pre>
<h3 id="Null-coalescing-operator"><a href="#Null-coalescing-operator" aria-label="Null coalescing operator permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Null coalescing operator</h3>
<p>Added in v7.0</p>
<pre data-language="php" data-index="6"><code><span><span><span>// this annoying thing</span></span></span>
<span><span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>=</span><span> </span><span>isset</span><span>(</span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>]) </span><span>?</span><span> </span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>:</span><span> </span><span>&#39;Guest&#39;</span><span>;</span></span></span>
<span><span><span>// to</span></span></span>
<span><span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>=</span><span> </span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>??</span><span> </span><span>&#39;Guest&#39;</span><span>;</span></span></span></code></pre>
<h3 id="Null-coalescing-assignment-operator"><a href="#Null-coalescing-assignment-operator" aria-label="Null coalescing assignment operator permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Null coalescing assignment operator</h3>
<p>Added in v7.4</p>
<pre data-language="php" data-index="7"><code><span><span><span>// our previous example</span></span></span>
<span><span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>=</span><span> </span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>??</span><span> </span><span>&#39;Guest&#39;</span><span>;</span></span></span>
<span><span><span>// to</span></span></span>
<span><span><span>$data</span><span>[</span><span>&#39;name&#39;</span><span>] </span><span>??=</span><span> </span><span>&#39;Guest&#39;</span><span>;</span></span></span></code></pre>
<h3 id="Null-safe-operator"><a href="#Null-safe-operator" aria-label="Null safe operator permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Null-safe operator</h3>
<p>Added in v8.0</p>
<pre data-language="php" data-index="8"><code><span><span><span>class</span><span> </span><span>User</span><span> {</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>function</span><span> </span><span>getPreferences</span><span>()</span><span> {}</span></span></span>
<span><span><span>}</span></span></span>
<span><span><span>class</span><span> </span><span>Preferences</span><span> {</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>function</span><span> </span><span>getColorScheme</span><span>()</span><span> {}</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>$user</span><span> </span><span>=</span><span> </span><span>new</span><span> </span><span>User</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>// ❌ preferences could be null</span></span></span>
<span><span><span>$colorScheme</span><span> </span><span>=</span><span> </span><span>$user</span><span>-&gt;</span><span>getPreferences</span><span>()</span><span>-&gt;</span><span>getColorScheme</span><span>();</span></span></span>
<span><span></span></span>
<span><span><span>// alternative</span></span></span>
<span><span><span>$preferences</span><span> </span><span>=</span><span> </span><span>$user</span><span>-&gt;</span><span>getPreferences</span><span>();</span></span></span>
<span><span><span>$colorScheme</span><span> </span><span>=</span><span> </span><span>$preferences</span><span> </span><span>?</span><span> </span><span>$preferences</span><span>-&gt;</span><span>getColorScheme</span><span>() </span><span>:</span><span> </span><span>null</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>// using null-safe operator</span></span></span>
<span><span><span>$colorScheme</span><span> </span><span>=</span><span> </span><span>$user</span><span>-&gt;</span><span>getPreferences</span><span>()</span><span>?-&gt;</span><span>getColorScheme</span><span>();</span></span></span>
<span><span></span></span></code></pre>
<h3 id="Spaceship-operator"><a href="#Spaceship-operator" aria-label="Spaceship operator permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spaceship operator</h3>
<p>Added in v7.0</p>
<pre data-language="php" data-index="9"><code><span><span><span>$result</span><span> </span><span>=</span><span> </span><span>1</span><span> </span><span>&lt;=&gt;</span><span> </span><span>1</span><span> </span><span>// 0</span></span></span>
<span><span><span>$result</span><span> </span><span>=</span><span> </span><span>1</span><span> </span><span>&lt;=&gt;</span><span> </span><span>2</span><span> </span><span>// -1</span></span></span>
<span><span><span>$result</span><span> </span><span>=</span><span> </span><span>2</span><span> </span><span>&lt;=&gt;</span><span> </span><span>1</span><span> </span><span>// 1</span></span></span>
<span><span></span></span>
<span><span><span>$array</span><span> </span><span>=</span><span> [</span><span>1</span><span>, </span><span>4</span><span>, </span><span>5</span><span>, </span><span>6</span><span>, </span><span>7</span><span>, </span><span>8</span><span> ,</span><span>9</span><span> ,</span><span>2</span><span>];</span></span></span>
<span><span><span>usort</span><span>(</span><span>$array</span><span>, </span><span>fn</span><span>(</span><span>$a</span><span>, </span><span>$b</span><span>) </span><span>=&gt;</span><span> </span><span>$a</span><span> </span><span>&lt;=&gt;</span><span> </span><span>$b</span><span>);</span></span></span></code></pre>
<h3 id="Multi-catch-exception-handling"><a href="#Multi-catch-exception-handling" aria-label="Multi catch exception handling permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multi-catch exception handling</h3>
<p>Added in v7.1</p>
<pre data-language="php" data-index="10"><code><span><span><span>try</span><span> {</span></span></span>
<span><span><span> </span><span>// ...</span></span></span>
<span><span><span>} </span><span>catch</span><span>(</span><span>ErrorA</span><span> | </span><span>ErrorB</span><span> </span><span>$e</span><span>)</span><span> {</span></span></span>
<span><span><span> </span><span>//</span></span></span>
<span><span><span>} </span><span>catch</span><span>(</span><span>Exception</span><span> </span><span>$e</span><span>)</span><span> {</span></span></span>
<span><span><span> </span><span>// general case</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="New-string-utils"><a href="#New-string-utils" aria-label="New string utils permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New string utils</h3>
<p>Added in v8.0</p>
<p>Previously we would use <code>strpos</code> or some other creative solution.</p>
<pre data-language="php" data-index="11"><code><span><span><span>$string</span><span> </span><span>=</span><span> </span><span>&#39;Modern PHP&#39;</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>if</span><span> (</span><span>str_starts_with</span><span>(</span><span>$string</span><span>, </span><span>&#39;Modern&#39;</span><span>)) {}</span></span></span>
<span><span><span>if</span><span> (</span><span>str_ends_with</span><span>(</span><span>$string</span><span>, </span><span>&#39;PHP&#39;</span><span>)) {}</span></span></span>
<span><span><span>if</span><span> (</span><span>str_contains</span><span>(</span><span>$string</span><span>, </span><span>&#39;Modern&#39;</span><span>)) {}</span></span></span></code></pre>
<h3 id="Return-types"><a href="#Return-types" aria-label="Return types permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Return types</h3>
<p>Added in v7.0</p>
<pre data-language="php" data-index="12"><code><span><span><span>function</span><span> </span><span>getPost</span><span>(</span><span>int</span><span> </span><span>$postId</span><span>)</span><span>:</span><span> </span><span>Post</span><span> {</span></span></span>
<span><span><span> </span><span>//</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="Union-types"><a href="#Union-types" aria-label="Union types permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Union types</h3>
<p>Added in v8.0</p>
<pre data-language="php" data-index="13"><code><span><span><span>function</span><span> </span><span>updateTotal</span><span>(</span><span>int|</span><span>float</span><span> </span><span>$cost</span><span>)</span><span> {</span></span></span>
<span><span><span> </span><span>//</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="Null-and-Void-return-types"><a href="#Null-and-Void-return-types" aria-label="Null and Void return types permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Null and Void return types</h3>
<p>Added in v7.1</p>
<pre data-language="php" data-index="14"><code><span><span><span>// Notice the `?` before the type</span></span></span>
<span><span><span>function</span><span> </span><span>getPost</span><span>(</span><span>int</span><span> </span><span>$postId</span><span>)</span><span>:</span><span> </span><span>?</span><span>Post</span><span> {</span></span></span>
<span><span><span> </span><span>// can return null</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>function</span><span> </span><span>setPostTitle</span><span>(</span><span>int</span><span> </span><span>$postId</span><span>, </span><span>string</span><span> </span><span>$title</span><span>)</span><span>:</span><span> </span><span>void</span><span> {</span></span></span>
<span><span><span>  </span><span>persistInDB</span><span>(</span><span>$postId</span><span>, </span><span>$postTitle</span><span>);</span></span></span>
<span><span><span> </span><span>// won&#39;t return anything, or optionally can do:</span></span></span>
<span><span><span> </span><span>// `return;`</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="Never-return-type"><a href="#Never-return-type" aria-label="Never return type permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Never return type</h3>
<p>Added in v8.1</p>
<pre data-language="php" data-index="15"><code><span><span><span>function</span><span> </span><span>notImplemented</span><span>()</span><span>:</span><span> </span><span>never</span><span> {</span></span></span>
<span><span><span>  </span><span>throw</span><span> </span><span>new</span><span> </span><span>Exception</span><span>(</span><span>&#39;Not implemented&#39;</span><span>);</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="Import-grouping"><a href="#Import-grouping" aria-label="Import grouping permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Import grouping</h3>
<p>Added in v7.0</p>
<p>A small but welcome addition</p>
<pre data-language="php" data-index="16"><code><span><span><span>// all in separate lines</span></span></span>
<span><span><span>use</span><span> App</span><span>\</span><span>Entity</span><span>\</span><span>Task</span><span>;</span></span></span>
<span><span><span>use</span><span> App</span><span>\</span><span>Entity</span><span>\</span><span>Reminder</span><span>;</span></span></span>
<span><span><span>use</span><span> App</span><span>\</span><span>Entity</span><span>\</span><span>Todo</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>// now</span></span></span>
<span><span><span>use</span><span> App</span><span>\</span><span>Entity</span><span>\{</span><span>Task</span><span>,</span><span> </span><span>Reminder</span><span>,</span><span> </span><span>Todo</span><span>};</span></span></span></code></pre>
<h3 id="Constructor-property-promotion"><a href="#Constructor-property-promotion" aria-label="Constructor property promotion permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constructor property promotion</h3>
<p>Added in v8.0</p>
<pre data-language="php" data-index="17"><code><span><span><span>// from this</span></span></span>
<span><span><span>class</span><span> </span><span>User</span><span> {</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>string</span><span> </span><span>$name</span><span>;</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>Address</span><span> </span><span>$address</span><span>;</span></span></span>
<span><span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>function</span><span> </span><span>__construct(</span><span>string</span><span> </span><span>$name</span><span>, </span><span>Address</span><span> </span><span>$address</span><span>)</span><span> {</span></span></span>
<span><span><span>    </span><span>$</span><span>this</span><span>-&gt;</span><span>name</span><span> </span><span>=</span><span> </span><span>$name</span><span>;</span></span></span>
<span><span><span>    </span><span>$</span><span>this</span><span>-&gt;</span><span>address</span><span> </span><span>=</span><span> </span><span>$address</span><span>;</span></span></span>
<span><span><span> }</span></span></span>
<span><span><span>}</span></span></span>
<span><span></span></span>
<span><span><span>// to this</span></span></span>
<span><span><span>class</span><span> </span><span>User</span><span> {</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>function</span><span> </span><span>__construct(</span><span>protected </span><span>string</span><span> </span><span>$name</span><span>, protected </span><span>Address</span><span> </span><span>$address</span><span>)</span><span> {</span></span></span>
<span><span><span>  </span><span>// nothing else needed</span></span></span>
<span><span><span>  }</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<h3 id="Weakmaps"><a href="#Weakmaps" aria-label="Weakmaps permalink"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill="#2A506F" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Weakmaps</h3>
<p>Not really using Weakmaps, not even in Javascript, but I find it a great addition</p>
<pre data-language="php" data-index="18"><code><span><span><span>// code taken from https://php.watch/versions/8.0/weakmap</span></span></span>
<span><span><span>class</span><span> </span><span>CommentRepository</span><span> {</span></span></span>
<span><span><span>  </span><span>private</span><span> </span><span>WeakMap</span><span> </span><span>$comments_cache</span><span>;</span></span></span>
<span><span><span>  </span><span>public</span><span> </span><span>function</span><span> </span><span>getCommentsByPost</span><span>(</span><span>Post</span><span> </span><span>$post</span><span>)</span><span>:</span><span> </span><span>?</span><span>array</span><span> {</span></span></span>
<span><span><span>    </span><span>if</span><span> (</span><span>!</span><span>isset</span><span>(</span><span>$</span><span>this</span><span>-&gt;</span><span>comments_cache</span><span>[</span><span>$post</span><span>])) {</span></span></span>
<span><span><span>      </span><span>$</span><span>this</span><span>-&gt;</span><span>comments_cache</span><span>[</span><span>$post</span><span>] </span><span>=</span><span> </span><span>$</span><span>this</span><span>-&gt;</span><span>loadComments</span><span>(</span><span>$post</span><span>);</span></span></span>
<span><span><span>    }</span></span></span>
<span><span></span></span>
<span><span><span>    </span><span>return</span><span> </span><span>$</span><span>this</span><span>-&gt;</span><span>comments_cache</span><span>[</span><span>$post</span><span>]</span></span></span>
<span><span><span>  }</span></span></span>
<span><span><span>}</span></span></span></code></pre>
<hr/>
<p>I have to say I&#39;m very happy to see these features, and I look forward to the next PHP releases with great excitement. Although I&#39;ll be mostly working with Laravel and its extensive library (<a href="https://laravel.com/docs/9.x/collections" target="_blank" rel="nofollow noopener noreferrer">collections</a> &amp; <a href="https://laravel.com/docs/9.x/helpers" target="_blank" rel="nofollow noopener noreferrer">helpers</a>) watching the language grow is lovely.</p>
<p>🐘</p>
</article></div></div>
  </body>
</html>
