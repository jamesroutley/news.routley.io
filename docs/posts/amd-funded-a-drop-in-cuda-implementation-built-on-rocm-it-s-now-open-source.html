<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.phoronix.com/review/radeon-cuda-zluda">Original</a>
    <h1>AMD funded a drop-in CUDA implementation built on ROCm: It&#39;s now open-source</h1>
    
    <div id="readability-page-1" class="page"><div>

<p>While there have been efforts by AMD over the years to make it easier to port codebases targeting NVIDIA&#39;s CUDA API to run atop HIP/ROCm, it still requires work on the part of developers. The tooling has improved such as with HIPIFY to help in auto-generating but it isn&#39;t any simple, instant, and guaranteed solution -- especially if striving for optimal performance. Over the past two years AMD has quietly been funding an effort though to bring binary compatibility so that many NVIDIA CUDA applications could run atop the AMD ROCm stack at the library level -- a drop-in replacement without the need to adapt source code. In practice for many real-world workloads, it&#39;s a solution for end-users to run CUDA-enabled software without any developer intervention. Here is more information on this &#34;skunkworks&#34; project that is now available as open-source along with some of my own testing and performance benchmarks of this CUDA implementation built for Radeon GPUs.</p>
<p><a href="https://www.phoronix.com/image-viewer.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_1_lrg" target="_blank"><img src="https://www.phoronix.net/image.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_1_med" alt="Radeon GPU running CUDA Blender"/></a></p>
<p>From several years ago you may recall <a href="https://www.phoronix.com/search/ZLUDA">ZLUDA</a> that was for <a href="https://www.phoronix.com/news/Intel-ZLUDA-CUDA-For-GPUs">enabling CUDA support on Intel graphics</a>. That open-source project aimed to provide <a href="https://www.phoronix.com/news/ZLUDA-v2-Released">a drop-in CUDA implementation on Intel graphics</a> built atop Intel oneAPI Level Zero. ZLUDA was discontinued due to private reasons but it turns out that the developer behind that (and who was also employed by Intel at the time), Andrzej Janik, was contracted by AMD in 2022 to effectively adapt ZLUDA for use on AMD GPUs with HIP/ROCm. Prior to being contracted by AMD, Intel was considering ZLUDA development. However, they ultimately turned down the idea and did not provide funding for the project.</p>
<p><a href="https://www.phoronix.com/image-viewer.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_2_lrg" target="_blank"><img src="https://www.phoronix.net/image.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_2_med" alt="Radeon GPU with CUDA-Z on Linux"/></a></p>
<p>Andrzej Janik spent the past two years bringing ZLUDA to Radeon GPUs and it works: many CUDA software can run on HIP/ROCm without any modifications -- or other processes... Just run the binaries as you normally would while ensuring that the ZLUDA library replacements to CUDA are loaded. For reasons unknown to me, AMD decided this year to discontinue funding the effort and not release it as any software product. But the good news was that there was a clause in case of this eventuality: Janik could open-source the work if/when the contract ended.</p>
<p><img src="https://www.phoronix.net/image.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_8" alt="Radeon ZLUDA Git commit"/></p>
<p>Andrzej Janik reached out and provided access to the new ZLUDA implementation for AMD ROCm to allow me to test it out and benchmark it in advance of today&#39;s planned public announcement. I&#39;ve been testing it out for a few days and it&#39;s been a positive experience: CUDA-enabled software indeed running atop ROCm and without any changes. Even proprietary renderers and the like working with this &#34;CUDA on Radeon&#34; implementation.</p>
<p>The ZLUDA implementation though isn&#39;t 100% fail-safe as NVIDIA OptiX support not being fully supported and some features such as software not using PTX assembly code isn&#39;t currently handled. But for the most part this implementation is surprisingly capable for being a single developer effort.</p>
<p><a href="https://www.phoronix.com/image-viewer.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_5_lrg" target="_blank"><img src="https://www.phoronix.net/image.php?id=radeon-cuda-zluda&amp;image=radeon_cuda_5_med" alt="Radeon ZLUDA libraries"/></a></p>
<p>For those wondering about the open-source code, it&#39;s dual-licensed under either Apache 2.0 or MIT. Rust fans will be excited to know the Rust programming language is leveraged for this Radeon implementation.</p>
<p>NOTE: In my screenshots and for the past two years of development the exposed device name for Radeon GPUs via CUDA has just been &#34;Graphics Device&#34; rather than the actual AMD Radeon graphics adapter with ROCm. The reason for this has been due to CUDA benchmarks auto-reporting results and other software that may have automated telemetry, to avoid leaking the fact of Radeon GPU use under CUDA, it&#39;s been set to the generic &#34;Graphics Device&#34; string. I&#39;m told as part of today&#39;s open-sourcing of this ZLUDA on Radeon code that the change will be in place to expose the actual Radeon graphics card string rather than the generic &#34;Graphics Device&#34; concealer.</p>
</div></div>
  </body>
</html>
