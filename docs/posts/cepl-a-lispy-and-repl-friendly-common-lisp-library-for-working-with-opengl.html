<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cbaggers/cepl">Original</a>
    <h1>CEPL: A lispy and REPL-friendly Common Lisp library for working with OpenGL</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text"><h2 dir="auto"><a id="user-content-cepl-code-evaluate-play-loop---beta" aria-hidden="true" href="#cepl-code-evaluate-play-loop---beta"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CEPL (Code Evaluate Play Loop) - [Beta]</h2>
<p dir="auto">CEPL is a lispy and REPL-friendly Common Lisp library for working with OpenGL.</p>
<p dir="auto">Its definition of success is making the user feel that GPU programming has always been part of the languages standard.</p>
<p dir="auto">The usual approach to using CEPL is to start it at the beginning of your Lisp session and leave it open for the duration of your work. You can then treat the window it creates as just another output for your graphics, analogous to how <code>*standard-output*</code> is treated for text.</p>
<p dir="auto">CEPL is in beta. The API is close to what it needs to be but there are still many bugs to fix, features to add, and experiences to smooth out.</p>
<p dir="auto">See the <a href="https://github.com/cbaggers/cepl.examples">cepl.examples repository</a> for some examples of how CEPL can be used</p>
<p dir="auto">Videos: <a href="http://www.youtube.com/playlist?list=PL2VAYZE_4wRKKr5pJzfYD1w4tKCXARs5y" rel="nofollow">http://www.youtube.com/playlist?list=PL2VAYZE_4wRKKr5pJzfYD1w4tKCXARs5y</a></p>
<h3 dir="auto"><a id="user-content-installing" aria-hidden="true" href="#installing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing</h3>
<p dir="auto">Run <code>(ql:quickload :cepl)</code> at your REPL.</p>
<h3 dir="auto"><a id="user-content-cloning" aria-hidden="true" href="#cloning"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cloning</h3>
<p dir="auto">Whilst it is recommended to get CEPL from quicklisp, if you clone please note that <code>master</code> is not the stable branch. Please use <code>release-quicklisp</code> for the stable code that will be in the next CEPL release.</p>
<h3 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h3>
<p dir="auto">Currently we have full documentation of every exported symbol in the CEPL package. You can find this <a href="http://techsnuffle.com/cepl/api.html" rel="nofollow">here: CEPL API Docs</a></p>
<p dir="auto">Guides will be provided in future, however these take much longer to write.</p>
<p dir="auto">I can also be reached by my email (techsnuffle [at] gmail Â· com) and sometimes on #lispgames IRC. Come to #lispgames anyway though, there are some lovely folks, all lispy dialects welcome!</p>
<h3 dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h3>
<p dir="auto">All of the following will be downloaded automatically by quicklisp</p>
<ul dir="auto">
<li>cffi</li>
<li>cl-opengl</li>
<li>cl-plus-c</li>
<li>cl-ppcre</li>
<li>documentation-utils</li>
<li>ieee-floats</li>
<li>float-features</li>
<li>named-readtables</li>
<li>varjo</li>
<li>bordeaux-threads</li>
</ul>
<h4 dir="auto"><a id="user-content-c-library-dependency" aria-hidden="true" href="#c-library-dependency"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C Library dependency</h4>
<p dir="auto">CEPL uses OpenGL ( version &gt;= 3.1 ) so you need to make sure it is available on your machine. Installing your GPU drivers will usually handle this.</p>
<h4 dir="auto"><a id="user-content-cepls-host" aria-hidden="true" href="#cepls-host"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CEPL&#39;s Host</h4>
<p dir="auto">CEPL abstracts working with OpenGL but is not responsible for creating a window or GL context; this is handled by a <code>Host</code>. Right now the only supported host is <code>SDL2</code>; the system to load is called <code>cepl.sdl2</code>, you can find it here: <a href="https://github.com/cbaggers/cepl.sdl2">cepl.sdl2</a></p>
<h3 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h3>
<p dir="auto"><em>Note:</em> On <code>macOS</code>, <code>slime</code> users will need to read <code>docs/single-thread-swank.md</code> to deal with a complication specific to projects interacting with the window manager. You can then follow the rest of this guide as usual.</p>
<p dir="auto">To load CEPL and the default host (<code>sdl2</code>) do the following:</p>
<ul dir="auto">
<li><code>(ql:quickload :cepl.sdl2)</code></li>
<li><code>(cepl:repl)</code></li>
</ul>
<p dir="auto">You should see an empty window appear, OpenGL is now initialized, and you can use CEPL as you like.</p>
<h3 dir="auto"><a id="user-content-making-a-cepl-project" aria-hidden="true" href="#making-a-cepl-project"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Making a CEPL Project</h3>
<p dir="auto">The best way to get started is to make a new project that uses CEPL. Do the following in your REPL to get set up:</p>
<ul dir="auto">
<li>First, run <code>(ql:quickload :cepl)</code></li>
<li>Then run <code>(ql:quickload :quickproject)</code>. CEPL uses this to create a lisp project using its own templates</li>
<li>Then run <code>(cepl:make-project &#34;my-proj&#34;)</code>. This will use quickproject to make a new project with all the correct dependencies. Remember that cepl does not handle window managers or input so by default your new project will use the following</li>
<li>cepl for the graphics</li>
<li><a href="https://github.com/cbaggers/cepl.sdl2">cepl.sdl2</a> for the host</li>
<li><a href="https://github.com/cbaggers/skitter">skitter</a> for handling input and events</li>
<li><a href="https://github.com/cbaggers/dirt">dirt</a> for loading images
There are many good event systems &amp; image loaders out there so browse around. But here are two :)</li>
</ul>
<p dir="auto">You are now ready to get started. Simply run:</p>
<ul dir="auto">
<li><code>(ql:quickload &#34;my-proj&#34;)</code></li>
<li><code>(in-package :my-proj)</code></li>
<li>and finally (if you havent already) <code>(cepl:repl)</code></li>
</ul>
<h4 dir="auto"><a id="user-content-windows-c-library-hack" aria-hidden="true" href="#windows-c-library-hack"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows C Library Hack</h4>
<p dir="auto">If you are having issues getting the C libraries to load and just need to rule out whether Lisp can find them, try putting them in the same folder as the lisp exe. For example <code>C:\Program Files\sbcl\</code>.</p>
<h2 dir="auto"><a id="user-content-changelog" aria-hidden="true" href="#changelog"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CHANGELOG</h2>
<p dir="auto">This mainly covers features &amp; news rather than individual bugfixes. When we are out of beta these will be covered more often</p>
<h3 dir="auto"><a id="user-content-2019-05-05" aria-hidden="true" href="#2019-05-05"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2019-05-05</h3>
<ul dir="auto">
<li>Added <code>#&#39;clear-attachments</code></li>
<li><code>clear-fbo</code> now let&#39;s you specify attachments to clear</li>
<li>Added <code>with-outputs-to-attachments</code> which lets you rebind which outputs from your pipelines map to which of the currently bound fbo attachments</li>
<li>Deprecated <code>attachment-pattern</code> in favor of <code>color-attachments</code></li>
<li>Can now specify a discarded attachment in <code>color-attachments</code> with <code>+discard-attachment+</code></li>
</ul>
<h3 dir="auto"><a id="user-content-2019-04-xx" aria-hidden="true" href="#2019-04-xx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2019-04-XX</h3>
<ul dir="auto">
<li>stability work on <code>with-context-state-restored</code>. More coming to this soon.</li>
</ul>
<h3 dir="auto"><a id="user-content-2019-02-xx" aria-hidden="true" href="#2019-02-xx"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2019-02-XX</h3>
<ul dir="auto">
<li>Add #&#39;default-fbo accessor</li>
</ul>
<h3 dir="auto"><a id="user-content-2019-01-20" aria-hidden="true" href="#2019-01-20"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2019-01-20</h3>
<ul dir="auto">
<li>Return from work crunch to add anisotropy support to samplers :)</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-09-29" aria-hidden="true" href="#2018-09-29"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-09-29</h3>
<ul dir="auto">
<li>Added support for MultiDrawIndirect using <code>multi-draw-g</code></li>
<li>Added support for base-vertex in buffer-streams</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-08-10" aria-hidden="true" href="#2018-08-10"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-08-10</h3>
<ul dir="auto">
<li><code>wait-on-gpu-fence</code> now expects an <code>(unsigned-byte 64)</code> or <code>nil</code>. <code>nil</code> is used to indicate no timeout and anything else is the timeout in nanoseconds</li>
<li>added <code>copy-g</code> as an more general alternative to <code>push-g</code> &amp; <code>pull-g</code> for moving data.</li>
<li>exported the many typed functions <code>copy-g</code>, <code>push-g</code> &amp; <code>pull-g</code> use behind the scenes for transfers</li>
<li>fixed serious bug in clear which, when passed no fbo, would try to clear both the read &amp; draw fbo attachments. Now only clears draw as per the gl spec.</li>
<li><code>make-texture</code> can now take <code>gpu-array</code>s as the &#39;initial-contents&#39; argument.</li>
<li>transfers between buffer &amp; texture backed gpu arrays now work</li>
<li>c-arrays &amp; gpu-arrays now accept a row-alignment value on creation. This defaults to 1 but can be 1, 2, 4 or 8</li>
<li>texture uploads/downloads now correctly take row alignment into account.</li>
<li>Fixes to ensure mutable textures are &#39;complete&#39; on creation</li>
<li>fix issues when creating c-arrays from lisp arrays that stemed from specification of dimensions being (x-size y-size) in CEPL/GL and (column-size row-size) in lisp.</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-07-15" aria-hidden="true" href="#2018-07-15"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-07-15</h3>
<ul dir="auto">
<li>added <code>make-gpu-arrays-from-buffer-id</code> which lets you speicify a gl buffer-id and layouts of the data and get a CEPL gpu-buffer in return</li>
<li>added <code>make-gpu-array-from-buffer-id</code> which in shorthand for the above when you only need one gpu-array.</li>
<li>added option to <code>make-gpu-buffer-from-id</code> so you can pass layouts instead of initial-contents. This is handy when you allocate and layout out the buffer storage without providing new data.</li>
<li>add a <code>keep-data</code> argument, to a bunch of buffer related functions which take layouts. This lets you create the buffer object, specifying the content layout without replacing the data.</li>
<li>added <code>make-buffer-stream-from-id-and-layouts</code>. Makes it possible to make streams out of vaos without having gpu-arrays.</li>
<li>print-object for <code>gpu-buffers</code></li>
<li>misc bug fixes</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-04-02" aria-hidden="true" href="#2018-04-02"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-04-02</h3>
<p dir="auto">Headlines:</p>
<p dir="auto">The most important change this release is that lambda pipelines now recompile when the functions they use as stages are recompiled. This change comes with a performance cost of course so if you wish to opt out of this (recommended for when you ship your project) then pass <code>:static</code> in the context argument to <code>pipeline-g</code></p>
<p dir="auto">Also if you are using GL&gt;=4.3 you can now create empty fbos, which are handy if you want to use the fragment stage without writing data to bound textures (compute-type fun to be had here)</p>
<p dir="auto">Other important changes:</p>
<ul dir="auto">
<li><code>viewport-resolution-x</code> &amp; <code>viewport-resolution-y</code> had been documented as returning <code>single-float</code>s but were returning unsigned ints, this now fixed.</li>
<li>I&#39;m an idiot that didn&#39;t know about <code>~/.swank.lisp</code>, please see the new &#39;single-thread-swank&#39; advice above if running on macOS.</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-02-17" aria-hidden="true" href="#2018-02-17"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-02-17</h3>
<p dir="auto"><strong>BREAKING CHANGES</strong></p>
<p dir="auto">Due to the changes listed below you will now want to change your current asd&#39;s to require :rtg-math.vari and to change your packages to :use :rtg-math.</p>
<p dir="auto">Some folks were asking for the ability to use their own math libraries rather than rtg-math which CEPL has depended on up until now. I have made this change but this means that this is something users will have to add themselves from now on.</p>
<p dir="auto">For those picking a library cepl expects vectors &amp; matrices to be sized simple-arrays of single-floats e.g. <code>(make-array 3 :element-type &#39;single-float)</code> for 3 component vectors.</p>
<p dir="auto">We have also removed the dependency on fn &amp; cl-fad.</p>
<p dir="auto">Other Changes:</p>
<ul dir="auto">
<li>added the remove-surface function</li>
<li>closing primary window no longer quits cepl</li>
<li>removed interactive from lifecycle events (will add surface lifecycle events in future release)</li>
</ul>
<h3 dir="auto"><a id="user-content-2018-01-11" aria-hidden="true" href="#2018-01-11"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2018-01-11</h3>
<p dir="auto">*I am terrible at changelogs. I am retroactively making the updates for everything between june 2017 and jan 2018</p>
<ul dir="auto">
<li>Added support for using gpu-lambdas inline in <code>defpipeline-g</code> forms</li>
<li>Lots of work on the <code>cepl.tests</code> project resulting in fixes for:</li>
<li>gpu-lambdas</li>
<li>lambda-pipelines</li>
<li>struct uniforms</li>
<li>uniform baking</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-12-" aria-hidden="true" href="#2017-12-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-12-??</h3>
<ul dir="auto">
<li>Add render-buffer support</li>
<li>Fix struct layout bugs. SSBOS work correctly now</li>
<li>Add funcall-g (limited support for calling gpu-functions from cpu directly)</li>
<li>Remove the deprecated <code>g-&gt;</code>, <code>def-g-&gt;</code> &amp; <code>glambda</code> macros</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-11-" aria-hidden="true" href="#2017-11-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-11-??</h3>
<ul dir="auto">
<li>Add compute support</li>
<li>Add SSBO support (though currently hobbled by struct layout bug)</li>
<li>Add single stage pipeline support</li>
<li>Add transform feedback support</li>
<li>Add shared context support</li>
<li>Add gpu-fence support</li>
<li>Add gl query support</li>
<li>Complete rewrite of pipeline state cache (now faster and safer)</li>
<li>Avoid recompilation of pipelines where dependencies have not changed</li>
<li>Rewrite struct code to get away from some dependencies</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-10-" aria-hidden="true" href="#2017-10-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-10-??</h3>
<ul dir="auto">
<li>Multiple (non-shared) context support</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-09-" aria-hidden="true" href="#2017-09-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-09-??</h3>
<ul dir="auto">
<li>Add border-color support</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-08-" aria-hidden="true" href="#2017-08-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-08-??</h3>
<ul dir="auto">
<li>Mostly bugfixes</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-07-" aria-hidden="true" href="#2017-07-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-07-??</h3>
<ul dir="auto">
<li>Add instance array support (per instance data in pipelines)</li>
<li>Add stencil support</li>
<li>Add scissor support</li>
<li>Add color-mask support</li>
<li>Add multisample support</li>
<li>renaming macros with confusing/inconsistent naming</li>
<li>blending param caching on context (not optimized yet)</li>
<li>Make #&#39;free work with pipelines</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-06-" aria-hidden="true" href="#2017-06-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-06-??</h3>
<ul dir="auto">
<li>
<p dir="auto">You can now modify a buffer-stream&#39;s primitive type after creation</p>
</li>
<li>
<p dir="auto">experimental profiler</p>
</li>
<li>
<p dir="auto">Huge improvements to per-frame performance through:</p>
</li>
<li>
<p dir="auto">typing of functions &amp; inlining where it made sense</p>
</li>
<li>
<p dir="auto">fixing bug where uniforms ids queried too often</p>
</li>
<li>
<p dir="auto">macros to reduce frequency of fetching the context object</p>
</li>
<li>
<p dir="auto">much better state caching in context object</p>
</li>
<li>
<p dir="auto">avoiding cffi enum conversion when lookup functions are faster</p>
</li>
<li>
<p dir="auto">precompute &amp; cache more size info in wrapper types</p>
</li>
<li>
<p dir="auto">attachments have their own viewports, no more computing of viewport during draw</p>
</li>
<li>
<p dir="auto">dont set viewport on every map-g (this was unnecessary)</p>
</li>
<li>
<p dir="auto">remove some of the &#39;with-*&#39; macros whos contract forced us to do more state changes/caching that we would otherwise like.</p>
</li>
<li>
<p dir="auto">pipelines can be declared static. This tells cepl to type the generated functions.</p>
</li>
<li>
<p dir="auto">a huge pile of other small changes</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-06-04" aria-hidden="true" href="#2017-06-04"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-06-04</h3>
<ul dir="auto">
<li>
<p dir="auto">pipelines can take <code>:dynamic</code> as their draw mode. This means they will take the draw-mode from the <code>buffer-stream</code> they are mapped over. This only works for pipelines with <code>vertex</code> &amp; <code>fragment</code> stages.</p>
</li>
<li>
<p dir="auto"><code>buffer-stream</code>s now hold the primitive type of their data. Defaults to <code>:triangles</code></p>
</li>
<li>
<p dir="auto">Fix bug that was stopping g-structs contain matrices</p>
</li>
<li>
<p dir="auto">Cache more values in <code>buffer-stream</code> to save time during rendering</p>
</li>
<li>
<p dir="auto">Add <code>surface-dimensions</code>, <code>surface-resolution</code>, <code>surface-title</code> &amp; <code>surface-fullscreen-p</code></p>
</li>
<li>
<p dir="auto">add <code>adjust-gpu-array</code> (pretty basic right now)</p>
</li>
<li>
<p dir="auto">Remove <code>cepl.spaces</code>, It is now a seperate project (and will be in quicklisp in the next cycle)</p>
</li>
<li>
<p dir="auto">Remove <code>cepl.misc</code>. If you were using the <code>draw-texture</code> function then please consider <code>Nineveh</code> (which will be in quicklisp in the next cycle)</p>
</li>
<li>
<p dir="auto"><code>make-project</code> now uses <code>dirt</code> instead of <code>devil</code>. <code>dirt</code> uses <code>cl-soil</code> which ships with binaries for multiple paltforms so has a better &#39;out of the box&#39; experience (plus also supports more formats)</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-05-16" aria-hidden="true" href="#2017-05-16"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-05-16</h3>
<p dir="auto"><em>I missed some logs here so this is a recap of everything since 2017-02-19</em></p>
<ul dir="auto">
<li>
<p dir="auto">Geometry &amp; Tessellation fully supported (including for inline glsl stages)</p>
</li>
<li>
<p dir="auto">Draw mode can now be specified for pipelines</p>
</li>
<li>
<p dir="auto">fixes for pull-g with gpu-functions &amp; pipelines</p>
</li>
<li>
<p dir="auto">add <code>with-gpu-array-range-as-pointer</code> &amp; <code>with-gpu-array-range-as-c-array</code>. These still feel experimental to me.</p>
</li>
<li>
<p dir="auto">add <code>reallocate-gpu-array</code> &amp; <code>reallocate-buffer</code></p>
</li>
<li>
<p dir="auto">buffer-streams always hold on to their gpu-arrays by default</p>
</li>
<li>
<p dir="auto">Refactoring based on changes in Varjo</p>
</li>
<li>
<p dir="auto">Added bordeux-threads as a dependency. Will be needed for some context related things</p>
</li>
<li>
<p dir="auto">Very basic support for multiple surfaces (windows)</p>
</li>
<li>
<p dir="auto">New &#39;host&#39; api. Is versioned so old hosts are still supported</p>
</li>
<li>
<p dir="auto">remove <code>run-session</code>. All of these attempts at thread hackery felt bad. I&#39;m sticking with <code>slime-style</code> until we have a better fix</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-2017-02-19" aria-hidden="true" href="#2017-02-19"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2017-02-19</h3>
<ul dir="auto">
<li>Removed the <code>continuable</code> macro. The macro can be found in the <code>livesupport</code> project. Simply <code>(ql:quickload :livesupport)</code></li>
</ul>
</article>
        </div></div>
  </body>
</html>
