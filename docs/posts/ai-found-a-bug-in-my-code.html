<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://joel.tools/codegen/">Original</a>
    <h1>AI found a bug in my code</h1>
    
    <div id="readability-page-1" class="page">



<p>
I was playing around with the <a href="https://github.com/salesforce/CodeGen">SalesForce CodeGen</a> language model.
It is set up to generate new code from a prompt. But I wanted to see
how it would analyze existing code.

</p><p>
I had the model look at some existing code and rank the probability of each token
appearing given the previous tokens. I also had it suggest its own token
and compared the probability of my token to the probability of the model&#39;s token.

</p><p>I found the smallest file in my codebase and fed it in. Brightness represents
unlikelihood of each token. How red it is is how much more likely the model&#39;s
token would be. Hover over the tokens to see what the model would have suggested.



</p><ul>
<li><span>Green</span> — The AI is confused but doesn&#39;t have a good alternative suggestion.
</li><li><span>Red</span> — The AI has a suggestion that it likes better.
</li><li><span>Gray</span> — No notes. The AI could have written this itself.
</li></ul>

<p>I tried to make the code more readable for the AI by adding some comments.


</p><p>While the comments themselves are a surprise for the AI, the redness around them as diminished. Except for the <code>return</code> statement which gets brighter red.

</p><p>I did not plan this, but it turns out there is a bug in my code. When an
event listener is removed during dispatch, I return from the function.
Hovering over the suspicious code, the model correctly suggests <code>continue</code>.

</p><p>I am going to use this for code review from now on.

<a href="https://twitter.com/joeleinbinder" title="Joel Einbinder Twitter">
  <svg width="32" height="32" xmlns="http://www.w3.org/2000/svg" style="display:block; margin: 3ch auto;" xml:space="preserve" viewBox="0 0 248 204">
    <path fill="#1d9bf0" d="M221.95 51.29c.15 2.17.15 4.34.15 6.53 0 66.73-50.8 143.69-143.69 143.69v-.04c-27.44.04-54.31-7.82-77.41-22.64 3.99.48 8 .72 12.02.73 22.74.02 44.83-7.61 62.72-21.66-21.61-.41-40.56-14.5-47.18-35.07 7.57 1.46 15.37 1.16 22.8-.87-23.56-4.76-40.51-25.46-40.51-49.5v-.64c7.02 3.91 14.88 6.08 22.92 6.32C11.58 63.31 4.74 33.79 18.14 10.71c25.64 31.55 63.47 50.73 104.08 52.76-4.07-17.54 1.49-35.92 14.61-48.25 20.34-19.12 52.33-18.14 71.45 2.19 11.31-2.23 22.15-6.38 32.07-12.26-3.77 11.69-11.66 21.62-22.2 27.93 10.01-1.18 19.79-3.86 29-7.95-6.78 10.16-15.32 19.01-25.2 26.16z"></path>
  </svg>
</a>



</p></div>
  </body>
</html>
