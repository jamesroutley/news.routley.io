<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://docs.rs/crate/rustler/latest">Original</a>
    <h1>Write Elixir NIFs in Rust</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
            

            <div id="main">
                
<p><a href="https://docs.rs/rustler/latest/rustler">Documentation</a> | <a href="https://github.com/rusterlium/rustler/blob/master/README.md#getting-started">Getting Started</a> | <a href="https://github.com/rusterlium/NifIo">Example</a></p>
<p><a href="https://github.com/rusterlium/rustler/actions/workflows/main.yml"><img src="https://github.com/rusterlium/rustler/workflows/CI/badge.svg?branch=master" alt="Build Status"/></a>
<a href="https://hex.pm/packages/rustler"><img src="https://img.shields.io/hexpm/v/rustler.svg" alt="Hex.pm package version"/></a>
<a href="https://crates.io/crates/rustler"><img src="https://img.shields.io/crates/v/rustler.svg" alt="Crates.io package version"/></a>
<a href="https://github.com/rusterlium/rustler/commits/master"><img src="https://img.shields.io/github/last-commit/rusterlium/rustler.svg" alt="Last Updated"/></a></p>
<p>Rustler is a library for writing Erlang NIFs in safe Rust code. That means
there should be no ways to crash the BEAM (Erlang VM). The library provides
facilities for generating the boilerplate for interacting with the BEAM,
handles encoding and decoding of Erlang terms, and catches rust panics before
they unwind into C.</p>
<p>The library provides functionality for both Erlang and Elixir, however Elixir
is favored as of now.</p>
<h4>Features:</h4>
<ul>
<li>Safety - The code you write in a Rust NIF should never be able to crash the BEAM.</li>
<li>Interop - Decoding and encoding rust values into Erlang terms is as easy as a function call.</li>
<li>Type composition - Making a Rust struct encodable and decodable to Erlang or Elixir can be done with a single attribute.</li>
<li>Resource objects - Enables you to safely pass a reference to a Rust struct into Erlang code. The struct will be automatically dropped when it&#39;s no longer referenced.</li>
</ul>
<h4>Getting started</h4>
<p>The easiest way of getting started is the <a href="https://hex.pm/packages/rustler">rustler elixir library</a>.</p>
<ul>
<li>Add the <a href="https://hex.pm/packages/rustler">rustler elixir library</a> as a dependency of your project.</li>
<li>Run <code>mix rustler.new</code> to generate a new NIF in your project. Follow the instructions.</li>
<li>If you&#39;re already using <a href="https://serde.rs"><code>serde</code></a>, consider using <a href="https://github.com/sunny-g/serde_rustler/tree/master/serde_rustler"><code>serde_rustler</code></a> to easily encode and decode your data types into and from Elixir terms.</li>
</ul>
<p>NOTE: If you have previously used Rustler, you need to run <code>mix archive.uninstall rustler_installer.ez</code> to remove it before generating the NIF.</p>
<h4>What it looks like</h4>
<p>This is the code for a minimal NIF that adds two numbers and returns the result.</p>
<pre><code><span><span><span>#</span><span>[</span><span>rustler</span>::<span>nif</span><span>]</span></span>
<span><span><span>fn</span> </span><span>add</span></span><span><span><span>(</span><span>a</span><span>:</span> <span>i64</span>, <span>b</span><span>:</span> <span>i64</span></span><span><span><span>)</span></span></span></span><span> <span><span>-&gt;</span> <span>i64</span></span> </span><span><span><span>{</span>
    a <span>+</span> b
</span><span><span>}</span></span></span>

<span>rustler<span>::</span></span>init<span>!</span><span><span>(</span><span><span>&#34;</span>Elixir.Math<span>&#34;</span></span><span>,</span> <span><span>[</span>add<span>]</span></span></span><span><span>)</span></span><span>;</span>
</span></code></pre>
<h4>Minimal Supported Rust Version (MSRV)</h4>
<p>Rustler currently has a minimal supported Rust version (MSRV) of 1.56.1. This
is the configured version in <code>.clippy.toml</code>.</p>
<h4>Supported OTP and Elixir Versions</h4>
<p>Rustler aims to support the newest three major OTP versions as well as newest three minor Elixir versions.</p>
<h4>Supported NIF version</h4>
<p>The minimal supported NIF version for a library should be defined via Cargo
features. The default is currently <code>2.14</code> (Erlang/OTP 21). To use features from
NIF version <code>2.16</code> (Erlang/OTP 24), the respective feature flag has to be
enabled on the dependency:</p>
<pre><code><span><span>[</span><span><span>dependencies</span></span><span>]</span>
<span><span>rustler</span></span> <span>=</span> <span>{</span> <span><span>version</span></span> <span>=</span> <span><span>&#34;</span>...<span>&#34;</span></span><span>,</span> <span><span>features</span></span> <span>=</span> <span>[</span><span><span>&#34;</span>nif_version_2_16<span>&#34;</span></span><span>]</span> <span>}</span>
</span></code></pre>
<p>For compatibility reasons, this can be defined (and overridden) by setting the
<code>RUSTLER_NIF_VERSION</code> environment variable during build.</p>
<h4>Community</h4>
<p>You can find us in the <code>#rustler:matrix.org</code> channel on <a href="https://matrix.to/#/#rustler:matrix.org">Matrix</a>
or in the <code>#rustler</code> channel in <a href="https://elixir-slackin.herokuapp.com/">the Elixir lang Slack</a>.</p>
<h4>License</h4>
<p>Licensed under either of</p>
<ul>
<li>Apache License, Version 2.0, (<a href="https://docs.rs/crate/rustler/LICENSE-APACHE">LICENSE-APACHE</a> or <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>)</li>
<li>MIT license (<a href="https://docs.rs/crate/rustler/LICENSE-MIT">LICENSE-MIT</a> or <a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a>)</li>
</ul>
<p>at your option.</p>
<h5>Contribution</h5>
<p>Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in the work by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any
additional terms or conditions.</p>


                </div>
        </div>
    </div></div>
  </body>
</html>
