<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://daniel.do/article/making-noisy-svgs/">Original</a>
    <h1>Making noisy SVGs</h1>
    
    <div id="readability-page-1" class="page"><article itemscope="" itemtype="http://schema.org/Article"><header><p><time datetime="2023-11-30">November 30, 2023</time><span>7<!-- --> minute read</span></p><h2 itemprop="headline">Making noisy SVGs</h2><p>Adding noise texture with only code</p></header><p><a href="#addendum-dec-7-2023">Addendum Dec 7, 2023</a></p>
<p>One of my ongoing fixations with the web is how improvements in technology inform web design. In an earlier post this year I <a href="https://daniel.do/article/its-the-future-stop-using-jpegs/#some-background">wrote about my theory</a> that the increasing pixel density of displays galvanized the shift from photography to vector illustrations in the early to mid 2010s.</p>
<p>In recent years there has been a design trend that runs counter to this. Illustrations still rule in web design, but instead of clean, flat shapes there has been an emergence of texture, usually as part of a design’s lighting or shading and <em>usually</em> a “noisy” or grainy texture.</p>
<a href="https://dribbble.com/shots/23092827-Cyber-Security-Portal" target="_blank">
  <img src="http://www.nbertagnolli.com/49c6373f104c02a9f4962e8d68afe8f0/cyber-security-portal-illustration.webp" alt=""/>
  <cite>Studio Vellekoop &amp; León</cite>
</a>
<p>I’m not hip enough to know if this style has been assigned a pithy label, but I do enjoy it. At the same time, I find it frustrating — because as far as I can tell (the lack of examples I have seen in the wild supports this theory) there isn’t an easy way to replicate these illustrations with SVGs. They can probably be exported as such from illustration programs but it’s likely these applied textures are raster or if they are vector, quite large in size.</p>
<p>SVGs are an interesting subject to me, because the specification for them is dense and there are usually multiple ways to accomplish an effect. Most SVGs are simply exported directly from a graphics program and have a lot of inefficiencies etc… which has led to the emergence of tools like <a href="https://github.com/svg/svgo">SVGO</a>.</p>
<p>I’m not an expert on the subject (I feel like the older I get, the less I feel like I can claim that about anything) but in recent years have taken to hand tuning and occasionally writing my own SVGs from scratch so I am not a complete novice either.</p>
<p>I decided to give creating an SVG using this illustration style a shot. My goal was to use the regular SVG specification to write a simple illustration that had this noisy, textured shadow effect. An additional goal was for this illustration to be moderately flexible, something that could easily be turned into a component in Svelte or React and changed for different shapes and colors. For more direct inspiration, I looked to the designer Josh Warren who has experimented a lot with using this style and simple geometry to nice effect:</p>
<a href="https://dribbble.com/shots/21207219-Interplay" target="_blank">
  <img src="http://www.nbertagnolli.com/1370f375ef9670faf2d9c104b3edc4c0/interplay-illustration.webp" alt=""/>
  <cite>Josh Warren</cite>
</a>
<hr/>
<h2 id="basic-shape-and-gradient"><a href="#basic-shape-and-gradient" aria-label="basic shape and gradient permalink"><svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic shape and gradient</h2>
<p>Drawing a circle or square in an SVG is really easy. There are primitives for them.</p>
<div>
<div data-language="html"><pre><code><span><span><span>&lt;</span>svg</span> <span>viewbox</span><span><span>=</span><span>&#34;</span>0 0 100 100<span>&#34;</span></span><span>&gt;</span></span>
	<span><span><span>&lt;</span>circle</span> <span>cx</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>cy</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>r</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>/&gt;</span></span>
<span><span><span>&lt;/</span>svg</span><span>&gt;</span></span></code></pre></div>
<svg viewBox="0 0 100 100">
	<circle cx="50" cy="50" r="50"></circle>
</svg>
</div>
<p>The tricky part is everything else. If you want to apply a gradient, you can specify that as the <code>fill</code> - but what if you want a gradient that changes with the base color you specify? So you don’t have to define a custom gradient with specific colors if you want to reuse the component. Then you’ve entered <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/mask">mask</a> territory. The way masks work in SVGs is that you use the “colors” black and white to how you want a mask to work. It’s a little confusing, but I’ve tried to keep the code example simple.</p>
<p>(As an aside, I have to give huge kudos to MDN’s excellent documentation, this project could not have been done without it!)</p>
<p>This can actually be optimized a little more. We know we’re going to use the same circle shape multiple times, so we can define it once in <code>&lt;defs&gt;</code>, assign it an id and simply reference it with the <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use"><code>use</code></a> element. This makes the code a little more DRY:</p>
<div>
<div data-language="html"><pre><code><span><span><span>&lt;</span>svg</span> <span>viewbox</span><span><span>=</span><span>&#34;</span>0 0 100 100<span>&#34;</span></span><span>&gt;</span></span>
   <span><span><span>&lt;</span>defs</span><span>&gt;</span></span>
 	<span><span><span>&lt;</span>circle</span> <span>id</span><span><span>=</span><span>&#34;</span>shape<span>&#34;</span></span> <span>cx</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>cy</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>r</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>/&gt;</span></span>
   	<span><span><span>&lt;</span>mask</span> <span>id</span><span><span>=</span><span>&#34;</span>gradient<span>&#34;</span></span><span>&gt;</span></span>
   		<span><span><span>&lt;</span>linearGradient</span> <span>id</span><span><span>=</span><span>&#34;</span>fade<span>&#34;</span></span><span>&gt;</span></span>
   			<span><span><span>&lt;</span>stop</span> <span>offset</span><span><span>=</span><span>&#34;</span>0%<span>&#34;</span></span> <span>stop-color</span><span><span>=</span><span>&#34;</span>black<span>&#34;</span></span> <span>stop-opacity</span><span><span>=</span><span>&#34;</span>0.5<span>&#34;</span></span> <span>/&gt;</span></span>
   			<span><span><span>&lt;</span>stop</span> <span>offset</span><span><span>=</span><span>&#34;</span>75%<span>&#34;</span></span> <span>stop-color</span><span><span>=</span><span>&#34;</span>white<span>&#34;</span></span> <span>stop-opacity</span><span><span>=</span><span>&#34;</span>1<span>&#34;</span></span> <span>/&gt;</span></span>
   		<span><span><span>&lt;/</span>linearGradient</span><span>&gt;</span></span>
   		<span><span><span>&lt;</span>use</span> <span>href</span><span><span>=</span><span>&#34;</span>#shape<span>&#34;</span></span> <span>fill</span><span><span>=</span><span>&#34;</span>url(&#39;#fade&#39;)<span>&#34;</span></span> <span>/&gt;</span></span>
   	<span><span><span>&lt;/</span>mask</span><span>&gt;</span></span>
   <span><span><span>&lt;/</span>defs</span><span>&gt;</span></span>
 <span><span><span>&lt;</span>use</span> <span>href</span><span><span>=</span><span>&#34;</span>#shape<span>&#34;</span></span> <span>mask</span><span><span>=</span><span>&#34;</span>url(#gradient)<span>&#34;</span></span> <span>/&gt;</span></span>
<span><span><span>&lt;/</span>svg</span><span>&gt;</span></span></code></pre></div>
  <svg viewBox="0 0 100 100">
    <defs>
      <circle id="shape" cx="50" cy="50" r="50"></circle>
      <mask id="gradient">
        <linearGradient id="fade">
          <stop offset="0%" stop-color="black" stop-opacity="0.5"></stop>
          <stop offset="75%" stop-color="white" stop-opacity="1"></stop>
        </linearGradient>
        <use href="#shape" fill="url(&#39;#fade&#39;)"></use>
      </mask>
    </defs>
    <use href="#shape" mask="url(#gradient)"></use>
  </svg>
</div>
<p>So we’ve got the shape and a gradient going, but how do we add a texture to that gradient? The answer is with a filter. <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Filter_effects">MDN’s documentation on SVG Filters</a> goes into better detail on the nuts and bolts of how filters work. I also found this <a href="https://tympanus.net/codrops/2019/02/19/svg-filter-effects-creating-texture-with-feturbulence/">excellent article</a> that goes into great detail about creating textures for SVGs.</p>
<p>To create noise, I used the <code>&lt;feTurbulence&gt;</code> filter which is explicitly for generating artificial textures but required quite a bit of fiddling to get to my liking. Then, I had to use other filter effects to eliminate color variance and blend naturally with the fill color selected, and finally apply the filter to the circle.</p>
<h2 id="result"><a href="#result" aria-label="result permalink"><svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Result</h2>
<div>
<div data-language="html"><pre><code><span><span><span>&lt;</span>svg</span> <span>viewbox</span><span><span>=</span><span>&#34;</span>0 0 100 100<span>&#34;</span></span><span>&gt;</span></span>
	<span><span><span>&lt;</span>defs</span><span>&gt;</span></span>
		<span><span><span>&lt;</span>circle</span> <span>id</span><span><span>=</span><span>&#34;</span>shape<span>&#34;</span></span> <span>cx</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>cy</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>r</span><span><span>=</span><span>&#34;</span>50<span>&#34;</span></span> <span>/&gt;</span></span>
		<span><span><span>&lt;</span>filter</span> <span>id</span><span><span>=</span><span>&#34;</span>noise<span>&#34;</span></span><span>&gt;</span></span>
			<span><span><span>&lt;</span>feTurbulence</span>
				<span>type</span><span><span>=</span><span>&#34;</span>fractalNoise<span>&#34;</span></span>
				<span>baseFrequency</span><span><span>=</span><span>&#34;</span>19.5<span>&#34;</span></span>
				<span>numOctaves</span><span><span>=</span><span>&#34;</span>10<span>&#34;</span></span>
				<span>result</span><span><span>=</span><span>&#34;</span>turbulence<span>&#34;</span></span>
			<span>/&gt;</span></span>
			<span><span><span>&lt;</span>feComposite</span> <span>operator</span><span><span>=</span><span>&#34;</span>in<span>&#34;</span></span> <span>in</span><span><span>=</span><span>&#34;</span>turbulence<span>&#34;</span></span> <span>in2</span><span><span>=</span><span>&#34;</span>SourceAlpha<span>&#34;</span></span> <span>result</span><span><span>=</span><span>&#34;</span>composite<span>&#34;</span></span><span>/&gt;</span></span>
			<span><span><span>&lt;</span>feColorMatrix</span> <span>in</span><span><span>=</span><span>&#34;</span>composite<span>&#34;</span></span> <span>type</span><span><span>=</span><span>&#34;</span>luminanceToAlpha<span>&#34;</span></span> <span>/&gt;</span></span>
			<span><span><span>&lt;</span>feBlend</span> <span>in</span><span><span>=</span><span>&#34;</span>SourceGraphic<span>&#34;</span></span> <span>in2</span><span><span>=</span><span>&#34;</span>composite<span>&#34;</span></span> <span>mode</span><span><span>=</span><span>&#34;</span>color-burn<span>&#34;</span></span> <span>/&gt;</span></span>
		<span><span><span>&lt;/</span>filter</span><span>&gt;</span></span>
		<span><span><span>&lt;</span>mask</span> <span>id</span><span><span>=</span><span>&#34;</span>gradient<span>&#34;</span></span><span>&gt;</span></span>
			<span><span><span>&lt;</span>linearGradient</span> <span>id</span><span><span>=</span><span>&#34;</span>fade<span>&#34;</span></span><span>&gt;</span></span>
				<span><span><span>&lt;</span>stop</span> <span>offset</span><span><span>=</span><span>&#34;</span>0%<span>&#34;</span></span> <span>stop-color</span><span><span>=</span><span>&#34;</span>black<span>&#34;</span></span> <span>stop-opacity</span><span><span>=</span><span>&#34;</span>0.6<span>&#34;</span></span> <span>/&gt;</span></span>
				<span><span><span>&lt;</span>stop</span> <span>offset</span><span><span>=</span><span>&#34;</span>65%<span>&#34;</span></span> <span>stop-color</span><span><span>=</span><span>&#34;</span>white<span>&#34;</span></span> <span>stop-opacity</span><span><span>=</span><span>&#34;</span>0.9<span>&#34;</span></span> <span>/&gt;</span></span>
				<span><span><span>&lt;</span>stop</span> <span>offset</span><span><span>=</span><span>&#34;</span>75%<span>&#34;</span></span> <span>stop-color</span><span><span>=</span><span>&#34;</span>white<span>&#34;</span></span> <span>stop-opacity</span><span><span>=</span><span>&#34;</span>1<span>&#34;</span></span> <span>/&gt;</span></span>
			<span><span><span>&lt;/</span>linearGradient</span><span>&gt;</span></span>
			<span><span><span>&lt;</span>use</span> <span>href</span><span><span>=</span><span>&#34;</span>#shape<span>&#34;</span></span> <span>fill</span><span><span>=</span><span>&#34;</span>url(&#39;#fade&#39;)<span>&#34;</span></span> <span>/&gt;</span></span>
		<span><span><span>&lt;/</span>mask</span><span>&gt;</span></span>
	<span><span><span>&lt;/</span>defs</span><span>&gt;</span></span>
	<span><span><span>&lt;</span>use</span> <span>href</span><span><span>=</span><span>&#34;</span>#shape<span>&#34;</span></span> <span>fill</span><span><span>=</span><span>&#34;</span>hsl(337, 92%, 69%)<span>&#34;</span></span> <span>mask</span><span><span>=</span><span>&#34;</span>url(#gradient)<span>&#34;</span></span> <span>filter</span><span><span>=</span><span>&#34;</span>url(&#39;#noise&#39;)<span>&#34;</span></span> <span>/&gt;</span></span>
<span><span><span>&lt;/</span>svg</span><span>&gt;</span></span></code></pre></div>
<svg viewBox="0 0 100 100">
	<defs>
		<circle id="shape" cx="50" cy="50" r="50"></circle>
	  <filter id="noise">
	    <feTurbulence type="fractalNoise" baseFrequency="19.5" numOctaves="10" result="turbulence"></feTurbulence>
			<feComposite operator="in" in="turbulence" in2="SourceAlpha" result="composite"></feComposite>
			<feColorMatrix in="composite" type="luminanceToAlpha"></feColorMatrix>
			<feBlend in="SourceGraphic" in2="composite" mode="color-burn"></feBlend>
	  </filter>
		<mask id="gradient">
			<linearGradient id="fade">
        <stop offset="0%" stop-color="black" stop-opacity="0.6"></stop>
        <stop offset="65%" stop-color="white" stop-opacity="0.9"></stop>
        <stop offset="75%" stop-color="white" stop-opacity="1"></stop>
			</linearGradient>
			<use href="#shape" fill="url(&#39;#fade&#39;)"></use>
		</mask>
	</defs>
  <use href="#shape" fill="hsl(337, 92%, 69%)" mask="url(#gradient)" filter="url(&#39;#noise&#39;)"></use>
</svg>
</div>
<p><a href="https://danielimmke.github.io/noisy-shapes"><strong>Full Demo Link</strong></a></p>
<p>Adding a nice fill color and making the gradient a little more subtle and there we go!</p>
<p>With some additional playing around I was able to create <a href="https://danielimmke.github.io/noisy-shapes">an illustration</a> I was quite happy with. It’s not perfect, and notably renders differently in Safari than other browsers but it achieves what I set out to accomplish.</p>
<p>You can also check out the code in the <a href="https://github.com/danielimmke/noisy-shapes">repository</a>.</p>
<p>This method could certainly be improved with additional experimenting. It’s still a far cry from the complexity of some of the illustrations I linked, but I think it could potentially be refined to be usable in more situations.</p>
<h3 id="addendum-dec-7-2023"><a href="#addendum-dec-7-2023" aria-label="addendum dec 7 2023 permalink"><svg aria-hidden="true" focusable="false" width="18" height="18" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Addendum <em>Dec 7, 2023</em></h3>
<p>I submitted this post to Hacker News where it received some reception, and was pointed out that <a href="https://css-tricks.com/grainy-gradients/">CSS Tricks posted a great article</a> written by Jimmy Chion about this subject in 2021. It’s a great article, and the techniques we arrive at are similar.</p>
<p>I was not aware of this post at the time of this writing but am now linking to it here for supplementary reading.</p></article></div>
  </body>
</html>
