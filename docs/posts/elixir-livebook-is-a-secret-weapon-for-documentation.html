<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://fly.io/blog/livebook-for-app-documentation/">Original</a>
    <h1>Elixir Livebook is a secret weapon for documentation</h1>
    
    <div id="readability-page-1" class="page"><article>
         <dl>
             <dt>Author</dt>
             <dd>
                 <img alt="Mark Ericksen" src="https://fly.io/static/images/mark.webp"/>
               <dl>
                 <dt>Name</dt>
                 <dd>
                   Mark Ericksen
                 </dd>
                   <dt>Twitter</dt>
                   <dd>
                     <a href="https://twitter.com/brainlid" target="_blank">
                       @brainlid
                     </a>
                   </dd>
               </dl>
             </dd>
         </dl>

         <section>
           
<p>Every application has that core, most important thing that it does. It is the reason the application exists. It’s that central idea that everything else is there to support.</p>

<p>A major hurdle for new developers joining a project can be understanding and becoming comfortable with the code that implements that central idea. So you document the code and may even have 100% code coverage for it.</p>

<p>Code documentation and tests are valuable here. Now with Livebook, there may be a <strong>new</strong> way to provide documentation, interactive exploration, and expose the app logic in a way we couldn’t before.</p>
<h2 id="livebook-for-app-logic"><a href="#livebook-for-app-logic" aria-label="Anchor"></a>Livebook for App Logic?</h2>
<p>What is Livebook?</p>

<p><a href="https://github.com/elixir-nx/livebook">Livebook</a> is Elixir’s answer to something like <a href="https://jupyter.org/">Jupyter notebooks</a>. It’s an exciting project created to help use <a href="https://github.com/elixir-nx/nx">Nx</a>, <a href="https://github.com/elixir-nx/axon">Axon</a> and machine learning with <a href="https://elixir-lang.org/">Elixir</a>. Livebook is still early days, but it’s rapidly progressing, it’s already solid, and has some awesome features.</p>

<p>While it was created for the machine learning space, it isn’t limited to it. Livebook is actually really powerful even when used on a regular Phoenix web project.</p>

<p>Before I go any further, let me show you what I mean. Previously, I created the game <a href="https://github.com/fly-apps/tictac">TicTac</a> that let’s you play distributed Tic-Tac-Toe with a friend from across the world on <a href="https://fly.io/docs/">Fly.io</a>.</p>

<p>Using Livebook, I documented the central piece that is the GameState. It is a module and struct used to model a game’s state. This is a glimpse of what it looks like.</p>

<p><img alt="Livebook showing game state" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-gamestate.webp"/></p>

<p>Livebook accesses the project’s code and let’s me simultaneously document it and execute the code showing the results!</p>
<h2 id="why-livebook"><a href="#why-livebook" aria-label="Anchor"></a>Why Livebook?</h2>
<p>The important features are:</p>

<ul>
<li>Loads an existing Elixir project
</li><li>Code completion
</li><li>Elixir code execution
</li><li>Markdown text for explanations
</li><li>Keyboard shortcuts for easier navigation and editing
</li><li>Notebook files are stored as plain Markdown files
</li></ul>

<p>This means we can do the following:</p>

<ol>
<li>take an existing Elixir application
</li><li>start a notebook for the project
</li><li>access the project’s code and document critical areas
</li></ol>

<p>Livebook makes it easy to experiment with our code, execute it, and demonstrate the point we’re making.</p>

<p>This lets developers new to a project experiment and <strong>learn</strong> that central idea. It also works for experimenting and <strong>exploring changes</strong>.</p>

<p>Because the notebook files are simple markdown files, they are easily added to source control and become part of the project if desired. They diff and merge well too.</p>
<blockquote>Livebook is actually really powerful even when used on a regular Phoenix web project.</blockquote>


<p>Let’s get started!</p>
<h2 id="livebook-setup"><a href="#livebook-setup" aria-label="Anchor"></a>Livebook Setup</h2>
<p>When Elixir 1.12 was released, Livebook was updated to require that version. It simplified things for the project and let them safely make certain assumptions. This means you need to have <a href="https://elixir-lang.org/install.html">Elixir 1.12 installed</a>.</p>

<p>Once installed, installing Livebook is this easy.</p>
<div>
  <pre><code>mix escript.install hex livebook
</code></pre>
</div>

<p>Starting Livebook is</p>

<div>
  <pre><code>...
[Livebook] Application running at http://localhost:8080/?token=iphm6yeqczkyce4hzkc5ylzged6dj7kb
</code></pre>
</div>

<p>It gives us a URL with a randomly generated token we use to connect to our local instance. Go ahead and open it up.</p>

<p>Yay! We’re connected to our Livebook running locally.</p>
<h2 id="starting-tip"><a href="#starting-tip" aria-label="Anchor"></a>Starting Tip</h2>
<p>Since we are playing with Livebook on an existing Elixir project, start Livebook from the directory of your project. It works fine without that, starting here just makes it easier for navigating and starting the runtime. More on that later.</p>

<p>You’ll want your project to be using Elixir 1.12 as well.</p>
<h2 id="start-a-project-notebook"><a href="#start-a-project-notebook" aria-label="Anchor"></a>Start a Project Notebook</h2>
<p>Start a new notebook and name it for your project or some significant part of your project. Don’t worry though, it’s just a Markdown file and you can rename it later if you want.</p>

<p>Save it. When you save, select to save it to a file. Navigate to your project directory. I suggest adding a <code>notebook</code> directory to the name before adding your filename.</p>

<p>It may look something like this:</p>
<div>
  <pre><code>/home/youruser/my_app/notebook/overview
</code></pre>
</div>

<p>In this example, <code>overview</code> would end up named as <code>overview.livemd</code>.</p>

<p><img alt="Save Notebook modal" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-save-notebook.webp"/></p>

<p>The “notebook” directory just gives the project a home where multiple notebook files can be stored.</p>
<h2 id="connect-to-your-project"><a href="#connect-to-your-project" aria-label="Anchor"></a>Connect to your Project</h2>
<p>To connect Livebook to your project, use the “Runtime” menu item.</p>

<p><img alt="Livebook runtime menu item" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-runtime-menu.webp"/></p>

<p>Using the “Runtime Settings”, select “Mix standalone”. Navigate to your Elixir project and “Connect”.</p>

<p><img alt="Livebook connect to mix project" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-mix-connect.webp"/></p>

<p>It compiles your project and starts it.</p>

<p><img alt="Livebook mix connected" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-mix-disconnect.webp"/></p>

<p>If everything goes smoothly, when you return to your notebook you can add an Elixir card and as you type, you should have code completion available using <kbd>CTRL</kbd>+<kbd>Space</kbd> or <kbd>Cmd</kbd>+<kbd>Space</kbd>.</p>

<p>With your code loaded, you have complete access to your application running in Livebook! In fact, you can execute Ecto queries, call contexts, start GenServers, anything!</p>
<h2 id="document-important-app-logic"><a href="#document-important-app-logic" aria-label="Anchor"></a>Document Important App Logic</h2>
<p>Now that you have Livebook setup with a new notebook and it’s connected to your your project source code, you are ready to start documenting app logic and showing what’s important!</p>

<p>This is what I showed earlier with the documentation and execution of the <code>GameState</code> module. I loved using the code completion to explore it as I documented it! It was a lot of fun writing documentation that can be interactively executed and still have all the benefits of using markdown too!</p>
<h2 id="run-and-interact-with-genservers"><a href="#run-and-interact-with-genservers" aria-label="Anchor"></a>Run and Interact with GenServers</h2>
<p>Livebook also lets you run GenServers and interact with them too!</p>

<p>The other main part of the TicTac application is how a GenServer runs the GameState. The running server is managed by Horde and I was able to both <strong>describe</strong> that and <strong>show</strong> it!</p>

<p><img alt="Livebook showing running process" src="https://fly.io/blog/livebook-for-app-documentation/assets/livebook-genserver.webp"/></p>

<p><strong>Livebook Tip:</strong> When working with a Livebook notebook, the keyboard shortcut you want to know is <code>ea</code> to “Evaluate All”. After opening a notebook, type <code>ea</code> and everything executes so you can see the commands and the results.</p>
<h2 id="the-case-for-livebook-with-your-project"><a href="#the-case-for-livebook-with-your-project" aria-label="Anchor"></a>The Case for Livebook with your Project</h2>
<p>Livebook is exciting because of what it does for Elixir in the Machine Learning space. However, Livebook can <strong>also</strong> help your regular-old Phoenix applications!</p>

<p>I hope you can see how Livebook can be used to document central pieces of your application in ways we never could before. Whether you’re documenting commission calculations, game logic, credit scoring, mortgage payments, or whatever. Livebook can help you do it in a new and awesome way.</p>

<p>Potential benefits:</p>

<ul>
<li>Document how critical pieces work in an interactive way
</li><li>Give new team members a better on-ramp to your project
</li><li>A place to explore changes to your central code
</li><li>Livebook is collaborative
</li><li>Connects to your project code
</li><li>Notebooks are plain markdown files and can be checked-in with the project
</li></ul>

<p>Give Livebook a try on your project and see how it helps your team!</p>
<figure>
  <figcaption>
    
    <p>Livebook supports collaborative editing. When you host your own instance you can invite people to join you!</p>
    <a href="https://fly.io/docs/speedrun/">
      Boot up a Livebook!  <span>→</span>
    </a>
  </figcaption>
  <p><img src="https://fly.io/static/images/cta-cat.webp" srcset="/static/images/cta-cat@2x.webp 2x" alt=""/>
  </p>
</figure>


           
         </section>
         <dl>
             <dt>
               Next post  ↑
             </dt>
             <dd>
               <a href="https://fly.io/blog/observing-elixir-in-production/">
                 Observing Elixir in Production
               </a>
             </dd>
             <dt>
               Previous post  ↓
             </dt>
             <dd>
               <a href="https://fly.io/blog/hooking-up-fly-metrics/">
                 Hooking Up Fly Metrics
               </a>
             </dd>
         </dl>
       </article></div>
  </body>
</html>
