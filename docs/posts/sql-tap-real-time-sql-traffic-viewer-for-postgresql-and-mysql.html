<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mickamy/sql-tap">Original</a>
    <h1>Show HN: SQL-tap – Real-time SQL traffic viewer for PostgreSQL and MySQL</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Real-time SQL traffic viewer — proxy daemon + TUI client.</p>
<p dir="auto">sql-tap sits between your application and your database (PostgreSQL or MySQL), capturing every query and displaying it
in an interactive terminal UI. Inspect queries, view transactions, and run EXPLAIN — all without changing your
application code.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/mickamy/sql-tap/blob/main/docs/demo.gif"><img src="https://github.com/mickamy/sql-tap/raw/main/docs/demo.gif" alt="demo" data-animated-image=""/></a></p>


<div dir="auto" data-snippet-clipboard-copy-content="brew install --cask mickamy/tap/sql-tap"><pre>brew install --cask mickamy/tap/sql-tap</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/mickamy/sql-tap@latest
go install github.com/mickamy/sql-tap/cmd/sql-tapd@latest"><pre>go install github.com/mickamy/sql-tap@latest
go install github.com/mickamy/sql-tap/cmd/sql-tapd@latest</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/mickamy/sql-tap.git
cd sql-tap
make install"><pre>git clone https://github.com/mickamy/sql-tap.git
<span>cd</span> sql-tap
make install</pre></div>

<p dir="auto"><strong>PostgreSQL</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM postgres:18-alpine
ARG SQL_TAP_VERSION=0.0.1
ARG TARGETARCH
ADD https://github.com/mickamy/sql-tap/releases/download/v${SQL_TAP_VERSION}/sql-tap_${SQL_TAP_VERSION}_linux_${TARGETARCH}.tar.gz /tmp/sql-tap.tar.gz
RUN tar -xzf /tmp/sql-tap.tar.gz -C /usr/local/bin sql-tapd &amp;&amp; rm /tmp/sql-tap.tar.gz
ENTRYPOINT [&#34;sql-tapd&#34;, &#34;--driver=postgres&#34;, &#34;--listen=:5433&#34;, &#34;--upstream=localhost:5432&#34;, &#34;--grpc=:9091&#34;]"><pre><span>FROM</span> postgres:18-alpine
<span>ARG</span> SQL_TAP_VERSION=0.0.1
<span>ARG</span> TARGETARCH
<span>ADD</span> https://github.com/mickamy/sql-tap/releases/download/v${SQL_TAP_VERSION}/sql-tap_${SQL_TAP_VERSION}_linux_${TARGETARCH}.tar.gz /tmp/sql-tap.tar.gz
<span>RUN</span> tar -xzf /tmp/sql-tap.tar.gz -C /usr/local/bin sql-tapd &amp;&amp; rm /tmp/sql-tap.tar.gz
<span>ENTRYPOINT</span> [<span>&#34;sql-tapd&#34;</span>, <span>&#34;--driver=postgres&#34;</span>, <span>&#34;--listen=:5433&#34;</span>, <span>&#34;--upstream=localhost:5432&#34;</span>, <span>&#34;--grpc=:9091&#34;</span>]</pre></div>
<p dir="auto"><strong>MySQL</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM mysql:8
ARG SQL_TAP_VERSION=0.0.1
ARG TARGETARCH
ADD https://github.com/mickamy/sql-tap/releases/download/v${SQL_TAP_VERSION}/sql-tap_${SQL_TAP_VERSION}_linux_${TARGETARCH}.tar.gz /tmp/sql-tap.tar.gz
RUN tar -xzf /tmp/sql-tap.tar.gz -C /usr/local/bin sql-tapd &amp;&amp; rm /tmp/sql-tap.tar.gz
ENTRYPOINT [&#34;sql-tapd&#34;, &#34;--driver=mysql&#34;, &#34;--listen=:3307&#34;, &#34;--upstream=localhost:3306&#34;, &#34;--grpc=:9091&#34;]"><pre><span>FROM</span> mysql:8
<span>ARG</span> SQL_TAP_VERSION=0.0.1
<span>ARG</span> TARGETARCH
<span>ADD</span> https://github.com/mickamy/sql-tap/releases/download/v${SQL_TAP_VERSION}/sql-tap_${SQL_TAP_VERSION}_linux_${TARGETARCH}.tar.gz /tmp/sql-tap.tar.gz
<span>RUN</span> tar -xzf /tmp/sql-tap.tar.gz -C /usr/local/bin sql-tapd &amp;&amp; rm /tmp/sql-tap.tar.gz
<span>ENTRYPOINT</span> [<span>&#34;sql-tapd&#34;</span>, <span>&#34;--driver=mysql&#34;</span>, <span>&#34;--listen=:3307&#34;</span>, <span>&#34;--upstream=localhost:3306&#34;</span>, <span>&#34;--grpc=:9091&#34;</span>]</pre></div>

<p dir="auto"><strong>1. Start the proxy daemon</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# PostgreSQL: proxy listens on :5433, forwards to PostgreSQL on :5432
DATABASE_URL=&#34;postgres://user:pass@localhost:5432/db?sslmode=disable&#34; \
  sql-tapd --driver=postgres --listen=:5433 --upstream=localhost:5432

# MySQL: proxy listens on :3307, forwards to MySQL on :3306
DATABASE_URL=&#34;user:pass@tcp(localhost:3306)/db&#34; \
  sql-tapd --driver=mysql --listen=:3307 --upstream=localhost:3306"><pre><span><span>#</span> PostgreSQL: proxy listens on :5433, forwards to PostgreSQL on :5432</span>
DATABASE_URL=<span><span>&#34;</span>postgres://user:pass@localhost:5432/db?sslmode=disable<span>&#34;</span></span> \
  sql-tapd --driver=postgres --listen=:5433 --upstream=localhost:5432

<span><span>#</span> MySQL: proxy listens on :3307, forwards to MySQL on :3306</span>
DATABASE_URL=<span><span>&#34;</span>user:pass@tcp(localhost:3306)/db<span>&#34;</span></span> \
  sql-tapd --driver=mysql --listen=:3307 --upstream=localhost:3306</pre></div>
<p dir="auto"><strong>2. Point your application at the proxy</strong></p>
<p dir="auto">Connect your app to the proxy port instead of the database port. No code changes needed — sql-tapd speaks the native
wire protocol.</p>
<p dir="auto"><strong>3. Launch the TUI</strong></p>

<p dir="auto">All queries flowing through the proxy appear in real-time.</p>


<div data-snippet-clipboard-copy-content="sql-tapd — SQL proxy daemon for sql-tap

Usage:
  sql-tapd [flags]

Flags:
  -driver    database driver: postgres, mysql (required)
  -listen    client listen address (required)
  -upstream  upstream database address (required)
  -grpc      gRPC server address for TUI (default: &#34;:9091&#34;)
  -dsn-env   env var holding DSN for EXPLAIN (default: &#34;DATABASE_URL&#34;)
  -version   show version and exit"><pre><code>sql-tapd — SQL proxy daemon for sql-tap

Usage:
  sql-tapd [flags]

Flags:
  -driver    database driver: postgres, mysql (required)
  -listen    client listen address (required)
  -upstream  upstream database address (required)
  -grpc      gRPC server address for TUI (default: &#34;:9091&#34;)
  -dsn-env   env var holding DSN for EXPLAIN (default: &#34;DATABASE_URL&#34;)
  -version   show version and exit
</code></pre></div>
<p dir="auto">Set <code>DATABASE_URL</code> (or the env var specified by <code>-dsn-env</code>) to enable EXPLAIN support. Without it, the proxy still
captures queries but EXPLAIN is disabled.</p>

<div data-snippet-clipboard-copy-content="sql-tap — Watch SQL traffic in real-time

Usage:
  sql-tap [flags] &lt;addr&gt;

Flags:
  -version  Show version and exit"><pre><code>sql-tap — Watch SQL traffic in real-time

Usage:
  sql-tap [flags] &lt;addr&gt;

Flags:
  -version  Show version and exit
</code></pre></div>
<p dir="auto"><code>&lt;addr&gt;</code> is the gRPC address of sql-tapd (e.g. <code>localhost:9091</code>).</p>


<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Key</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>j</code> / <code>↓</code></td>
<td>Move down</td>
</tr>
<tr>
<td><code>k</code> / <code>↑</code></td>
<td>Move up</td>
</tr>
<tr>
<td><code>/</code></td>
<td>Incremental search</td>
</tr>
<tr>
<td><code>Enter</code></td>
<td>Inspect query / transaction</td>
</tr>
<tr>
<td><code>Space</code></td>
<td>Toggle transaction expand / collapse</td>
</tr>
<tr>
<td><code>Esc</code></td>
<td>Clear search filter</td>
</tr>
<tr>
<td><code>x</code></td>
<td>EXPLAIN</td>
</tr>
<tr>
<td><code>X</code></td>
<td>EXPLAIN ANALYZE</td>
</tr>
<tr>
<td><code>e</code></td>
<td>Edit query, then EXPLAIN</td>
</tr>
<tr>
<td><code>E</code></td>
<td>Edit query, then EXPLAIN ANALYZE</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Copy query</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Copy query with bound args</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Quit</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Key</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>j</code> / <code>↓</code></td>
<td>Scroll down</td>
</tr>
<tr>
<td><code>k</code> / <code>↑</code></td>
<td>Scroll up</td>
</tr>
<tr>
<td><code>x</code></td>
<td>EXPLAIN</td>
</tr>
<tr>
<td><code>X</code></td>
<td>EXPLAIN ANALYZE</td>
</tr>
<tr>
<td><code>e</code> / <code>E</code></td>
<td>Edit and EXPLAIN / ANALYZE</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Copy query</td>
</tr>
<tr>
<td><code>C</code></td>
<td>Copy query with bound args</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Back to list</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Key</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>j</code> / <code>↓</code></td>
<td>Scroll down</td>
</tr>
<tr>
<td><code>k</code> / <code>↑</code></td>
<td>Scroll up</td>
</tr>
<tr>
<td><code>h</code> / <code>←</code></td>
<td>Scroll left</td>
</tr>
<tr>
<td><code>l</code> / <code>→</code></td>
<td>Scroll right</td>
</tr>
<tr>
<td><code>c</code></td>
<td>Copy explain plan</td>
</tr>
<tr>
<td><code>e</code> / <code>E</code></td>
<td>Edit and re-explain / re-analyze</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Back to list</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<div data-snippet-clipboard-copy-content="┌─────────────┐      ┌───────────────────────┐      ┌────────────────────┐
│ Application │─────▶│  sql-tapd (proxy)     │─────▶│ PostgreSQL / MySQL │
└─────────────┘      │                       │      └────────────────────┘
                     │  captures queries     │
                     │  via wire protocol    │
                     └───────────┬───────────┘
                                 │ gRPC stream
                     ┌───────────▼───────────┐
                     │  sql-tap (TUI)        │
                     └───────────────────────┘"><pre><code>┌─────────────┐      ┌───────────────────────┐      ┌────────────────────┐
│ Application │─────▶│  sql-tapd (proxy)     │─────▶│ PostgreSQL / MySQL │
└─────────────┘      │                       │      └────────────────────┘
                     │  captures queries     │
                     │  via wire protocol    │
                     └───────────┬───────────┘
                                 │ gRPC stream
                     ┌───────────▼───────────┐
                     │  sql-tap (TUI)        │
                     └───────────────────────┘
</code></pre></div>
<p dir="auto">sql-tapd parses the database wire protocol (PostgreSQL or MySQL) to intercept queries transparently. It tracks prepared
statements, parameter bindings, transactions, execution time, rows affected, and errors. Events are streamed to
connected TUI clients via gRPC.</p>

<p dir="auto"><a href="https://github.com/mickamy/sql-tap/blob/main/LICENSE">MIT</a></p>
</article></div></div>
  </body>
</html>
