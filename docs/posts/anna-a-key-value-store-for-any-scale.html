<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://muratbuffalo.blogspot.com/2022/04/anna-key-value-store-for-any-scale.html">Original</a>
    <h1>Anna: A key-value store for any scale</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-618397900644261687">
<p><a href=" http://db.cs.berkeley.edu/jmh/papers/anna_ieee18.pdf">This paper (ICDE&#39;18) introduces Anna,</a> a <a href="https://muratbuffalo.blogspot.com/2011/04/consistency-analysis-in-bloom-calm-and.html">CALM</a>/<a href="https://muratbuffalo.blogspot.com/2013/04/conflict-free-replicated-data-types.html">CRDT</a> implementation of a distributed key-value system both at the data structure level as well as system architecture and transaction protocol levels. Anna is a partitioned, multi-mastered key-value system that achieves high performance and elasticity via wait-free execution and coordination-free consistency. Anna employs coordination-free actors that perform state update via merge of lattice-based composite data structures. </p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEgJAP34N-KhzUICKVTkx2LLmkvr-fmRbHf0VESi-vwFPo5XKGYnQ75rF0X7UNS0qiAAV3VhtLwq4zDG5C0GpsnRFGxMcTAE645RIF7o-vxzLsuICgwhnBAMnDCJ538avGxdQD289SI4vHVL-kYjapDom1U79eBCxJmAGwtbygSdwlgXLzPhNCGdDCQ-"><img alt="" data-original-height="1588" data-original-width="3204" src="https://blogger.googleusercontent.com/img/a/AVvXsEgJAP34N-KhzUICKVTkx2LLmkvr-fmRbHf0VESi-vwFPo5XKGYnQ75rF0X7UNS0qiAAV3VhtLwq4zDG5C0GpsnRFGxMcTAE645RIF7o-vxzLsuICgwhnBAMnDCJ538avGxdQD289SI4vHVL-kYjapDom1U79eBCxJmAGwtbygSdwlgXLzPhNCGdDCQ-=s16000"/></a></p><h2>Architecture</h2><p>The high-level goal for Anna is to provide excellent performance on a single multi-core machine, while also being able to scale up elastically to geo-distributed cloud deployment. In order to achieve these goals, they take the following as design requirements.<br/></p><ul><li>To ensure data scaling, partition (shard) the key space, not only across nodes at cloud scale but also across cores for high performance. </li><li>To enable workload scaling, employ multi-master replication to concurrently serve puts and gets against a single key from multiple threads.</li><li>To achieve maximum hardware utilization and performance within a multi-core machine, guarantee wait-free execution, i.e., coordination techniques such as locking, consensus protocols or even &#34;lock-free&#34; retries should be avoided.<br/></li></ul><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEihlkIm4KweyZpvF8pQXr--1oc4ofQ1QxS-2c1UZeCuH60Yf94FtMXm-2-NP-dW-wtnOWwuFfG65cZv3u_TVninpxh1dcYdInWebFNGQmCm6UMy2yxOn577AxhGpyiDCSOU_7f-RSOZEUh7f_-yJnoOU8RdlTd32bK-yEa-27F71jBBx1Zy82J0TNpe"><img alt="" data-original-height="1374" data-original-width="1574" height="349" src="https://blogger.googleusercontent.com/img/a/AVvXsEihlkIm4KweyZpvF8pQXr--1oc4ofQ1QxS-2c1UZeCuH60Yf94FtMXm-2-NP-dW-wtnOWwuFfG65cZv3u_TVninpxh1dcYdInWebFNGQmCm6UMy2yxOn577AxhGpyiDCSOU_7f-RSOZEUh7f_-yJnoOU8RdlTd32bK-yEa-27F71jBBx1Zy82J0TNpe=w400-h349" width="400"/></a></p><p>The architecture of Anna is based on a simple design pattern of coordination-free actors, each having private memory and a thread of execution mapped/pinned to a single core (i.e., the number of threads never exceeds the number of available CPU cores). Anna&#39;s actors share no key-value state; they employ consistent hashing to partition the key-space, and multi-master replication with a tunable replication factor to replicate data partitions across actors. Actors communicate explicitly via messaging, be it across nodes (via a network) or within a multi-core machine (via message queues). To ensure wait-free execution, Anna actors never coordinate; they only communicate with each other to lazily exchange updates, or repartition state.Â  The actors engage in epoch-based key exchange to propagate key updates at a given actor to other masters in the key&#39;s replication group. </p></div></div>
  </body>
</html>
