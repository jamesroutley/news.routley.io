<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://concurrencycorner.blogspot.com/2025/02/htap-databases-lets-get-distributed.html">Original</a>
    <h1>HTAP databases - lets get distributed - Part 2 of 4</h1>
    
    <div id="readability-page-1" class="page"><div>

<main id="main" role="main" tabindex="-1">
<div id="page_body" name="Page Body">
<div data-version="2" id="Blog1">
<div>
<article>
<div>
<div>

<h3>
HTAP databases - lets get distributed - Part 2 of 4
</h3>




</div>
</div>


</article>
</div>
</div><div data-version="2" id="PopularPosts1">
<h3>
Popular posts from this blog
</h3>
<div>
<div role="feed">
<article role="article">
<h3><a href="https://concurrencycorner.blogspot.com/2025/02/htap-databases-and-workers-that-keep.html">HTAP Databases and the processes that keep them going - Part 1 of 4</a></h3>

<div>
<p><a href="https://concurrencycorner.blogspot.com/2025/02/htap-databases-and-workers-that-keep.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXxwU29uKXhx4sPbpFReL_LhSL2FiCoeGttKTo9F9QR-QBTfF9-GxrLfvTVIGEXZMZrEZZwlsir-ehj-_-OWRb9NoGnbK0oOkAUtzX-KZf_Jg24tnEQRtEDFzSANX-wgWFoE9EQYvXWFBC-GcSmuPcP3_njs2_pZO_mrE6brdB-YiZFTgfrL9sc0fVWA/s400/Screenshot%202025-02-02%20at%2023.54.10.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXxwU29uKXhx4sPbpFReL_LhSL2FiCoeGttKTo9F9QR-QBTfF9-GxrLfvTVIGEXZMZrEZZwlsir-ehj-_-OWRb9NoGnbK0oOkAUtzX-KZf_Jg24tnEQRtEDFzSANX-wgWFoE9EQYvXWFBC-GcSmuPcP3_njs2_pZO_mrE6brdB-YiZFTgfrL9sc0fVWA/w72-h72-p-k-no-nu/Screenshot%202025-02-02%20at%2023.54.10.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgXxwU29uKXhx4sPbpFReL_LhSL2FiCoeGttKTo9F9QR-QBTfF9-GxrLfvTVIGEXZMZrEZZwlsir-ehj-_-OWRb9NoGnbK0oOkAUtzX-KZf_Jg24tnEQRtEDFzSANX-wgWFoE9EQYvXWFBC-GcSmuPcP3_njs2_pZO_mrE6brdB-YiZFTgfrL9sc0fVWA/w144-h144-p-k-no-nu/Screenshot%202025-02-02%20at%2023.54.10.png 144w"/>
</a>
</p>
<div>
<p>
Introduction    This is the first in a 4-part series on HTAP (Hybrid Transaction and Analytical Processing) databases. By now you know I am nuts about concurrency and its use in OSs, DBs, calculations and everything in between. I will cover a few weaknesses and strengths in these DB systems, some notable implemementations in production systems and then write some fake version of Pluscal to describe what I think it should look like in an abstract code implementation. Note I use math as its the most powerful language I know and pluscal as its the best tool for describing these types of systems where concurrency is everywhere. So lets begin with a drawing of the Primary-row store with an in-memory column store .            Please note this diagram is adapted from the paper &#34;HTAP databases: A Survey&#34;, by Zhang et al. 2024. The contents of this blog are inspired by insights from this brilliant paper as well. However I will not go into the depth that the paper provides. The reader ...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="https://concurrencycorner.blogspot.com/2025/01/cache-and-buffer-pool-manager.html">Cache and Buffer Pool Manager</a></h3>

<div>
<p><a href="https://concurrencycorner.blogspot.com/2025/01/cache-and-buffer-pool-manager.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjasONuSxRO1Zy0bc-4lfuQRRGZblhiJZ5-sNyKU_tGZWb_3XnDcpCkJT23rnyYc2KtfbkheKd-ygUAI1tbeDXCmEiancsH6aAG2jTfz2lgH0KEtodn__f1t-uJpLe5VyEA6YsDQ6riF0wLd76XKCk-qmwZVm7AYa7Suofj44xplCf4outszPv14h7YVA/s320/Screenshot%202025-01-12%20at%2022.56.41.png" srcset="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjasONuSxRO1Zy0bc-4lfuQRRGZblhiJZ5-sNyKU_tGZWb_3XnDcpCkJT23rnyYc2KtfbkheKd-ygUAI1tbeDXCmEiancsH6aAG2jTfz2lgH0KEtodn__f1t-uJpLe5VyEA6YsDQ6riF0wLd76XKCk-qmwZVm7AYa7Suofj44xplCf4outszPv14h7YVA/w72-h72-p-k-no-nu/Screenshot%202025-01-12%20at%2022.56.41.png 72w, https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjasONuSxRO1Zy0bc-4lfuQRRGZblhiJZ5-sNyKU_tGZWb_3XnDcpCkJT23rnyYc2KtfbkheKd-ygUAI1tbeDXCmEiancsH6aAG2jTfz2lgH0KEtodn__f1t-uJpLe5VyEA6YsDQ6riF0wLd76XKCk-qmwZVm7AYa7Suofj44xplCf4outszPv14h7YVA/w144-h144-p-k-no-nu/Screenshot%202025-01-12%20at%2022.56.41.png 144w"/>
</a>
</p>
<div>
<p>
 The present post is about Caches and the Buffer Pool Manager for a database named SparrowDB  that I am building. The programming language is Rust. The DB is a SQL relational database I wish to take from scratch to distributed. If you wish to come along for the ride, I will post weekly on my thoughts, struggles and completed work. Disclaimer: A lot of what I know and some parts of this blog comes from lessons by Andy Pavlo from CMU who made a youtube course, and I highly recommend you learn from him if you desire to work with database internals.    Cache Policies :       There are several types of caches we could consider eg. course-grained and fine-grained, but we will only consider the former category. Furthermore we will only use LRU-K in this project, but I wish to give an honourable mention to frequency based cache policies such as Q2 and LFU. The LRU-K is an improvement on the LRU policy as it avoids thrashing in the database cache where we evict a page only to read it again in t...
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="https://concurrencycorner.blogspot.com/2024/11/workers-what-can-they-do-and-what-do.html">Workers - what can they do and what do they look like? Lets make a model in Go. </a></h3>

<div>
<p><a href="https://concurrencycorner.blogspot.com/2024/11/workers-what-can-they-do-and-what-do.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/a/AVvXsEjRikp1SZpgTWoJ5sGHARGG_QeiAJq8c1arY0RqN_rDFcJ7dZeJ-nmo1DOPh9d15hj1UTS9SnjyHBb5_57QSwsMD6NuNXNT8dWIUMz5Y0QDCWlOHDFItx5BtrISa8Rjv5S4qaeP47U4CBffPgbDl8uObjocjbdCE7jafqm8ShtzFYLKyBwRsOuAuksHfQ=w261-h275" srcset="https://blogger.googleusercontent.com/img/a/AVvXsEjRikp1SZpgTWoJ5sGHARGG_QeiAJq8c1arY0RqN_rDFcJ7dZeJ-nmo1DOPh9d15hj1UTS9SnjyHBb5_57QSwsMD6NuNXNT8dWIUMz5Y0QDCWlOHDFItx5BtrISa8Rjv5S4qaeP47U4CBffPgbDl8uObjocjbdCE7jafqm8ShtzFYLKyBwRsOuAuksHfQ=w72-h72-p-k-no-nu 72w, https://blogger.googleusercontent.com/img/a/AVvXsEjRikp1SZpgTWoJ5sGHARGG_QeiAJq8c1arY0RqN_rDFcJ7dZeJ-nmo1DOPh9d15hj1UTS9SnjyHBb5_57QSwsMD6NuNXNT8dWIUMz5Y0QDCWlOHDFItx5BtrISa8Rjv5S4qaeP47U4CBffPgbDl8uObjocjbdCE7jafqm8ShtzFYLKyBwRsOuAuksHfQ=w144-h144-p-k-no-nu 144w"/>
</a>
</p>
<div>
<p>
Today I want to talk about work in software. So naturally/unnaturally I gravitate towards ... orchestrators, for reasons that will become clear shortly. Borg and K8&#39;s come to mind. What do these have in common and what do they contain that makes them indispensable to modern computing. I think its the ability to make distributed systems so easy to deploy (K8s). Perhaps also that it hides much of the complexity of failures, and writing software to handle these cases. In my opinion what I love about them is the concept of work. It&#39;s the same reason I like the MapReduce system, and the concept of doing work as a whole resonates with me. No this isn&#39;t an AI assistant writing for me, I use the word resonate because I like that word. So in this post I will model a Worker, and what does that actually mean for the system, ie. What do Workers do?  Manager (M) , Workers (W) and KVstores (KV) are the system we will think about today. Lets start with the following:  Worker comes to work...
</p>
</div>

</div>
</article>
</div>
</div>
</div></div>
</main>
</div></div>
  </body>
</html>
