<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gtk-rs.org/gtk4-rs/stable/latest/book/hello_world.html">Original</a>
    <h1>GUI development with Rust and GTK 4</h1>
    
    <div id="readability-page-1" class="page">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        

        <!-- Set the theme before any content is loaded, prevents flash -->
        

        <!-- Hide / unhide sidebar before it is displayed -->
        

        <nav id="sidebar" aria-label="Table of contents">
            
            
        </nav>

        <div id="page-wrapper">

            <div class="page">
                                
                

                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                

                <div id="content">
                    <main>
                        
<p>Now that we&#39;ve got a working installation, let&#39;s get right into it!</p>
<p>At the very least, we need to create a <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gtk4/struct.Application.html"><code>gtk::Application</code></a> instance with an <a href="https://developer.gnome.org/documentation/tutorials/application-id.html">application id</a>.
For that we use the <a href="https://rust-unofficial.github.io/patterns/patterns/creational/builder.html">builder pattern</a> which many <code>gtk-rs</code> objects support.
Note that we also import the prelude to bring the necessary traits into scope.</p>
<p>Filename: <a href="https://github.com/gtk-rs/gtk4-rs/blob/master/book/listings/hello_world/1/main.rs">listings/hello_world/1/main.rs</a></p>
<pre><code>use gtk::prelude::*;
use gtk::{glib, Application};

const APP_ID: &amp;str = &#34;org.gtk_rs.HelloWorld1&#34;;

fn main() -&gt; glib::ExitCode {
    // Create a new application
    let app = Application::builder().application_id(APP_ID).build();

    // Run the application
    app.run()
}</code></pre>
<p>It builds fine, but nothing but a warning in our terminal appears.</p>
<pre><code>GLib-GIO-WARNING: Your application does not implement g_application_activate()
and has no handlers connected to the &#39;activate&#39; signal. It should do one of these.
</code></pre>
<p>GTK tells us that something should be called in its <code>activate</code> step.
So let&#39;s create a <a href="https://gtk-rs.org/gtk4-rs/stable/latest/docs/gtk4/struct.ApplicationWindow.html"><code>gtk::ApplicationWindow</code></a> there.</p>
<p>Filename: <a href="https://github.com/gtk-rs/gtk4-rs/blob/master/book/listings/hello_world/2/main.rs">listings/hello_world/2/main.rs</a></p>
<pre><code>use gtk::prelude::*;
use gtk::{glib, Application, ApplicationWindow};

const APP_ID: &amp;str = &#34;org.gtk_rs.HelloWorld2&#34;;

fn main() -&gt; glib::ExitCode {
    // Create a new application
    let app = Application::builder().application_id(APP_ID).build();

    // Connect to &#34;activate&#34; signal of `app`
    app.connect_activate(build_ui);

    // Run the application
    app.run()
}

fn build_ui(app: &amp;Application) {
    // Create a window and set the title
    let window = ApplicationWindow::builder()
        .application(app)
        .title(&#34;My GTK App&#34;)
        .build();

    // Present window
    window.present();
}</code></pre>
<p>That is better!</p>
<div><img src="https://gtk-rs.org/gtk4-rs/stable/latest/book/img/hello_world_empty.png" alt="An empty window with a header bar with label &#39;My GTK App&#39;"/></div>
<p>Normally we expect to be able to interact with the user interface.
Also, the name of the chapter suggests that the phrase &#34;Hello World!&#34; will be involved.</p>
<p>Filename: <a href="https://github.com/gtk-rs/gtk4-rs/blob/master/book/listings/hello_world/3/main.rs">listings/hello_world/3/main.rs</a></p>
<pre><code><span>use gtk::prelude::*;
</span><span>use gtk::{glib, Application, ApplicationWindow, Button};
</span><span>const APP_ID: &amp;str = &#34;org.gtk_rs.HelloWorld3&#34;;
</span><span>
</span><span>fn main() -&gt; glib::ExitCode {
</span><span>    // Create a new application
</span><span>    let app = Application::builder().application_id(APP_ID).build();
</span><span>
</span><span>    // Connect to &#34;activate&#34; signal of `app`
</span><span>    app.connect_activate(build_ui);
</span><span>
</span><span>    // Run the application
</span><span>    app.run()
</span><span>}
</span><span>
</span>fn build_ui(app: &amp;Application) {
    // Create a button with label and margins
    let button = Button::builder()
        .label(&#34;Press me!&#34;)
        .margin_top(12)
        .margin_bottom(12)
        .margin_start(12)
        .margin_end(12)
        .build();

    // Connect to &#34;clicked&#34; signal of `button`
    button.connect_clicked(|button| {
        // Set the label to &#34;Hello World!&#34; after the button has been clicked on
        button.set_label(&#34;Hello World!&#34;);
    });

    // Create a window
    let window = ApplicationWindow::builder()
        .application(app)
        .title(&#34;My GTK App&#34;)
        .child(&amp;button)
        .build();

    // Present window
    window.present();
}</code></pre>
<blockquote>
<p>If you look closely at the code snippet you will notice that it has a small eye symbol on its top right.
After you press on it you can see the full code of the listing.
We will use this throughout the book to hide details which are not important to bring the message across.
Pay attention to this if you want to write apps by following the book step-by-step.
Here, we&#39;ve hidden that we brought <code>gtk::Button</code> into scope.</p>
</blockquote>
<p>There is now a button and if we click on it, its label becomes &#34;Hello World!&#34;.</p>
<div>
 <video autoplay="" muted="" loop="">
  <source src="vid/hello_world_button.webm" type="video/webm"/>
  <p>A video which shows that pressing on the button changes it&#39;s label</p>
 </video>
</div>
<p>Wasn&#39;t that hard to create our first <code>gtk-rs</code> app, right?
Let&#39;s now get a better understanding of what we did here.</p>

                    </main>

                    <nav aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="https://gtk-rs.org/gtk4-rs/stable/latest/book/project_setup.html" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i></i>
                            </a>

                            <a rel="next" href="https://gtk-rs.org/gtk4-rs/stable/latest/book/widgets.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i></i>
                            </a>

                        
                    </nav>
                </div>
            </div>

            <nav aria-label="Page navigation">
                    <a rel="prev" href="https://gtk-rs.org/gtk4-rs/stable/latest/book/project_setup.html" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i></i>
                    </a>

                    <a rel="next" href="https://gtk-rs.org/gtk4-rs/stable/latest/book/widgets.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i></i>
                    </a>
            </nav>

        </div>




        


        
        
        

        
        
        

        <!-- Custom JS scripts -->


    </div>
    

</div>
  </body>
</html>
