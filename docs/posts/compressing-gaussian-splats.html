<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.playcanvas.com//compressing-gaussian-splats/">Original</a>
    <h1>Compressing Gaussian Splats</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
    <h3 id="introduction">Introduction</h3>

<p><a href="https://repo-sam.inria.fr/fungraph/3d-gaussian-splatting/"><strong>3D Gaussian Splatting</strong></a> is a new method for digitizing and rendering real world objects. With gaussian splatting, you can digitize a scene from a few photos using services like <a href="https://lumalabs.ai/">Luma Labs</a> or <a href="https://poly.cam/">Polycam</a>. These services take the set of photos and generate a 3d Gaussian Splat scene in <a href="https://en.wikipedia.org/wiki/PLY_(file_format)">PLY format</a>.</p>

<p>For example, this is a Gaussian Splat scene rendered in PlayCanvas.</p>



<h3 id="what-is-a-splat">What is a Splat?</h3>

<p>Gaussian Splat Scenes are not made up of polygons and textures. Instead, they are made up of many (up to millions) of individual, unconnected blobs called <em>splats</em>. A splat is just a particle in space with size, orientation, color and opacity.</p>

<p>Below you can see a single brown splat selected. The splat bounding box shows its orientation and size:</p>

<p><img src="https://blog.playcanvas.com/assets/media/splat-example.gif" alt="Splat Example"/></p>

<p>The gaussian part of the name comes from the shape of splat itself: the splat opacity has a gaussian falloff from its center to its edge.</p>

<h3 id="engine-support">Engine Support</h3>

<p>The PlayCanvas team has been adding support to the engine for loading and rendering Gaussian Splat PLY files:</p>

<p><a href="https://playcanvas.github.io/#/loaders/splat-many"><img src="https://blog.playcanvas.com/assets/media/gaussian-splat-example.gif" alt="Engine Example"/></a></p>

<p>Since the resulting files are often messy and require cleaning, we released <a href="https://playcanvas.com/super-splat">SuperSplat</a>, a tool for cleaning and processing gaussian splat PLY files:</p>

<p><a href="https://playcanvas.com/super-splat?load=https://code.playcanvas.com/viewer/guitar-cleaned.ply"><img src="https://blog.playcanvas.com/assets/media/super-splat-example.gif" alt="SuperSplat Example"/></a></p>

<h3 id="ply-format">PLY Format</h3>

<p>However, the default gaussian splat PLY format as exported by training tools is large.</p>

<p>This is because the uncompressed format stores a large amount of data <em>per splat</em>:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Data Format</th>
      <th>Bytes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Position</td>
      <td>3 x float</td>
      <td>12</td>
    </tr>
    <tr>
      <td>Orientation</td>
      <td>4 x float</td>
      <td>16</td>
    </tr>
    <tr>
      <td>Scale</td>
      <td>3 x float</td>
      <td>12</td>
    </tr>
    <tr>
      <td>Spherical harmonics / color</td>
      <td>48 x float</td>
      <td>192</td>
    </tr>
    <tr>
      <td>Total</td>
      <td> </td>
      <td>232</td>
    </tr>
  </tbody>
</table>

<p>For example, the original <code>guitar.ply</code> scene file takes <strong>132.8 MB</strong> (<strong>32 MB</strong> excluding spherical harmonic data).</p>

<h3 id="compressed-ply-format">Compressed PLY Format</h3>

<p>So we introduced a <em>compressed PLY</em> format for use in runtime applications. The compressed PLY file format ignores the unused spherical harmonic data and stores the rest of the elements in quantized integers.</p>

<p>The format can be summarized as follows:</p>
<ul>
  <li>Split the scene into chunks of 256 splats</li>
  <li>For each chunk, store the min and max (x, y, z) for position and scale in floating point</li>
  <li>For each splat in the chunk, store a normalized and quantized value for position and scale (relative to chunk extents) and orientation and color</li>
</ul>

<p>This data layout results in the following data <em>per chunk</em>:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Data Format</th>
      <th>Bytes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Position bound</td>
      <td>6 x float</td>
      <td>24</td>
    </tr>
    <tr>
      <td>Scale bound</td>
      <td>6 x float</td>
      <td>24</td>
    </tr>
    <tr>
      <td>Total</td>
      <td> </td>
      <td>48</td>
    </tr>
  </tbody>
</table>

<p>And the following data <em>per splat</em>:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Data Format</th>
      <th>Bytes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Position</td>
      <td>uint32 (11, 10, 11)</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Orientation</td>
      <td>uint32 (2, 10, 10, 10)</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Scale</td>
      <td>uint32 (11, 10, 11)</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Color</td>
      <td>uint32 (8, 8, 8, 8)</td>
      <td>4</td>
    </tr>
    <tr>
      <td>Total</td>
      <td> </td>
      <td>16</td>
    </tr>
  </tbody>
</table>

<p>As a result, the compressed version of <code>guitar.ply</code> takes only <strong>8.7 MB</strong>.</p>

<h3 id="do-it-yourself">Do It Yourself</h3>

<p>The easiest way to generate a compressed PLY file yourself is using the <a href="https://playcanvas.com/super-splat">SuperSplat tool</a>. Load the PLY file into SuperSplat and export it again using the ‘Compressed Ply File’ option:</p>

<p><a href="https://playcanvas.com/super-splat"><img src="https://blog.playcanvas.com/assets/media/super-splat-export.png" alt="SuperSplat Export"/></a></p>

<p>If you are interested in the file format specifics, see <a href="https://github.com/playcanvas/engine/blob/a86bd8be0cfd4e39e9ba5e5466acb6875ab9906e/extras/splat/splat-data.js#L257">this code</a> which demonstrates how to decompress the file data.</p>

<p>See <a href="https://playcanvas.com/project/1165904/overview/gaussiansplatdemo">this editor project</a> for an example of loading and rendering a compressed gaussian splat PLY file. Or you can <a href="https://playcanv.as/p/69cnpevQ/">run it here</a>.</p>

<h3 id="summary-and-future">Summary and Future</h3>

<p>We have introduced a new compressed PLY format for gaussian splatting which is roughly 4x smaller than uncompressed data and can be used in realtime applications.</p>

<p>In future we hope to:</p>

<ul>
  <li>store splats hierarchically for optimized rendering and culling</li>
  <li>implement realtime splat LOD</li>
  <li>test skinning and animation of gaussian splats</li>
  <li>further compress gaussian splat data</li>
  <li>optimize WebGPU rendering</li>
</ul>

<h3 id="references">References</h3>

<p>The compressed format is largely based on the fine work of Aras Pranckevičius and his <a href="https://aras-p.info/">blog posts</a>.</p>

  </div></div>
  </body>
</html>
