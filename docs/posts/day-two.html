<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://elijer.github.io/garden/devnotes/Advent-Journal/Day-Two">Original</a>
    <h1>Day Two</h1>
    
    <div id="readability-page-1" class="page"><div id="quartz-body"><div><article><p><a href="https://adventofcode.com/2023/day/2">Advent of Code Day Two<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>
Paired with: Ngina
Code we ended up with after 50 minutes
Experience: Reminded that my string manipulation abilities in TS have room for improvement. Regex could have been helpful.</p>
<p>Typescript surprised us with something, which is that the return type of a function wasn’t enforced, which is <em>exactly</em> what I thought it should do.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="github-light github-dark"><code data-language="ts" data-theme="github-light github-dark"><span data-line=""><span>import</span><span> fs </span><span>from</span><span> &#39;fs&#39;</span></span>
<span data-line=""> </span>
<span data-line=""><span>// Input is a list of game IDs with a list of the cubes that are available</span></span>
<span data-line=""><span>// a list of game ids with draws of tiles, that may or may not be possible</span></span>
<span data-line=""><span>// What is the sum of the IDs of the the possible games</span></span>
<span data-line=""> </span>
<span data-line=""><span>// interface with each color</span></span>
<span data-line=""><span>// iterate through each of the games, and see if there are enough tiles in our bag, and if there are after this loop, then add</span></span>
<span data-line=""><span>// The game ID to some single integer</span></span>
<span data-line=""> </span>
<span data-line=""><span>interface</span><span> CubeSet</span><span> {</span></span>
<span data-line=""><span>  red</span><span>:</span><span> number</span><span>,</span></span>
<span data-line=""><span>  blue</span><span>:</span><span> number</span><span>,</span></span>
<span data-line=""><span>  green</span><span>:</span><span> number</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>interface</span><span> Game</span><span> {</span></span>
<span data-line=""><span>  id</span><span>:</span><span> number</span><span>,</span></span>
<span data-line=""><span>  cubeSet</span><span>:</span><span> CubeSet</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span>fs.</span><span>readFile</span><span>(</span><span>&#39;input_1.txt&#39;</span><span>, </span><span>&#34;utf-8&#34;</span><span>, ((</span><span>err</span><span>, </span><span>data</span><span>) </span><span>=&gt;</span><span> {</span></span>
<span data-line=""> </span>
<span data-line=""><span>  let</span><span> gameSum</span><span>:</span><span> number</span><span> =</span><span> 0</span></span>
<span data-line=""> </span>
<span data-line=""><span>  const</span><span> gameStrings</span><span> =</span><span> data.</span><span>split</span><span>(</span><span>&#34;</span><span>\n</span><span>&#34;</span><span>)</span></span>
<span data-line=""><span>  const</span><span> games</span><span>:</span><span> Game</span><span>[] </span><span>=</span><span> []</span></span>
<span data-line=""><span>  for</span><span> (</span><span>const</span><span> gameIndex</span><span> in</span><span> gameStrings){</span></span>
<span data-line=""> </span>
<span data-line=""><span>    const</span><span> game</span><span> =</span><span> gameStrings[gameIndex]</span></span>
<span data-line=""><span>    const</span><span> beforeColon</span><span> =</span><span> game.</span><span>split</span><span>(</span><span>&#34;:&#34;</span><span>)[</span><span>0</span><span>]</span></span>
<span data-line=""><span>    const</span><span> gameId</span><span> =</span><span> beforeColon.</span><span>split</span><span>(</span><span>&#34;Game &#34;</span><span>)[</span><span>1</span><span>]</span></span>
<span data-line=""> </span>
<span data-line=""><span>    const</span><span> cubeSet</span><span>:</span><span> CubeSet</span><span> =</span><span> {red: </span><span>0</span><span>, green: </span><span>0</span><span>, blue: </span><span>0</span><span>}</span></span>
<span data-line=""><span>    games.</span><span>push</span><span>({id: gameId, cubeSet: cubeSet})</span></span>
<span data-line=""> </span>
<span data-line=""><span>    const</span><span> tileReadings</span><span> =</span><span> game.</span><span>split</span><span>(</span><span>&#39;:&#39;</span><span>)[</span><span>1</span><span>]</span></span>
<span data-line=""><span>    const</span><span> colorsAndTiles</span><span> =</span><span> tileReadings.</span><span>split</span><span>(</span><span>&#39;;&#39;</span><span>)</span></span>
<span data-line=""><span>    for</span><span> (</span><span>const</span><span> draw</span><span> of</span><span> colorsAndTiles){</span></span>
<span data-line=""><span>      const</span><span> tiles</span><span> =</span><span> draw.</span><span>split</span><span>(</span><span>&#39;,&#39;</span><span>)</span></span>
<span data-line=""><span>      for</span><span> (</span><span>const</span><span> tile</span><span> of</span><span> tiles){</span></span>
<span data-line=""><span>        const</span><span> trimmedTile</span><span> =</span><span>tile.</span><span>trim</span><span>()</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;blue&#39;</span><span>)){</span></span>
<span data-line=""><span>          cubeSet.blue </span><span>+=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;red&#39;</span><span>)){</span></span>
<span data-line=""><span>          cubeSet.red </span><span>+=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;green&#39;</span><span>)){</span></span>
<span data-line=""><span>          cubeSet.green </span><span>+=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>      }</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span>  const</span><span> availableCubes</span><span>:</span><span> CubeSet</span><span> =</span><span> {</span></span>
<span data-line=""><span>    red: </span><span>12</span><span>,</span></span>
<span data-line=""><span>    green: </span><span>13</span><span>,</span></span>
<span data-line=""><span>    blue: </span><span>14</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  // parse a game string into a cubeset</span></span>
<span data-line=""><span>  // function that has access to available cubes, takes a cubeset, checks each</span></span>
<span data-line=""><span>  const</span><span> checkIfGameIsPossible</span><span> =</span><span> (</span><span>game</span><span>:</span><span> Game</span><span>)</span><span>:</span><span> number</span><span> =&gt;</span><span> {</span></span>
<span data-line=""><span>    for</span><span> (</span><span>const</span><span> [</span><span>key</span><span>, </span><span>value</span><span>] </span><span>of</span><span> Object.</span><span>entries</span><span>(availableCubes)){</span></span>
<span data-line=""><span>      if</span><span> (game.cubeSet[key] </span><span>&gt;</span><span> value){</span></span>
<span data-line=""><span>        return</span><span> 0</span></span>
<span data-line=""><span>      }</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>    return</span><span> Number</span><span>(game.id)</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  for</span><span> (</span><span>const</span><span> game</span><span> of</span><span> games){</span></span>
<span data-line=""><span>    gameSum </span><span>+=</span><span> checkIfGameIsPossible</span><span>(game)</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  console.</span><span>log</span><span>(gameSum)</span></span>
<span data-line=""><span>}))</span></span></code></pre></figure>
<p>Turns out I had an initial logic issue, was that for each game, I incremented the number of cubes of that color I drew as I went. But of course, there could be three total blue squares and I could draw 3 squares each time—that doesn’t meant there are 9 blue tiles total! So I changed this to only update the max draw to be the largest number drawn like this:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="github-light github-dark"><code data-language="ts" data-theme="github-light github-dark"><span data-line=""><span>      for</span><span> (</span><span>const</span><span> tile</span><span> of</span><span> tiles){</span></span>
<span data-line=""><span>        const</span><span> trimmedTile</span><span> =</span><span>tile.</span><span>trim</span><span>()</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;blue&#39;</span><span>)){</span></span>
<span data-line=""><span>          let</span><span> newBlue </span><span>=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>          if</span><span> (newBlue </span><span>&gt;</span><span> cubeSet.blue) cubeSet.blue </span><span>=</span><span> newBlue</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;red&#39;</span><span>)){</span></span>
<span data-line=""><span>          let</span><span> newRed </span><span>=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>          if</span><span> (newRed </span><span>&gt;</span><span> cubeSet.red) cubeSet.red </span><span>=</span><span> newRed</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>        if</span><span> (trimmedTile.</span><span>includes</span><span>(</span><span>&#39;green&#39;</span><span>)){</span></span>
<span data-line=""><span>          let</span><span> newGreen </span><span>=</span><span> parseInt</span><span>(trimmedTile.</span><span>split</span><span>(</span><span>&#34; &#34;</span><span>)[</span><span>0</span><span>])</span></span>
<span data-line=""><span>          if</span><span> (newGreen </span><span>&gt;</span><span> cubeSet.green) cubeSet.green </span><span>=</span><span> newGreen</span></span>
<span data-line=""><span>        }</span></span>
<span data-line=""><span>      }</span></span></code></pre></figure>
<p>Not DRY at all, but it worked!</p>
<p>My answer of 149 increased to 2278, which ended up being the correct one for me.</p>
<p>I asked perplexity to refactor my code for me and got this:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="github-light github-dark"><code data-language="ts" data-theme="github-light github-dark"><span data-line=""><span>import</span><span> fs </span><span>from</span><span> &#39;fs/promises&#39;</span><span>;</span></span>
<span data-line=""> </span>
<span data-line=""><span>interface</span><span> CubeSet</span><span> {</span></span>
<span data-line=""><span>  red</span><span>:</span><span> number</span><span>;</span></span>
<span data-line=""><span>  blue</span><span>:</span><span> number</span><span>;</span></span>
<span data-line=""><span>  green</span><span>:</span><span> number</span><span>;</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>interface</span><span> Game</span><span> {</span></span>
<span data-line=""><span>  id</span><span>:</span><span> number</span><span>;</span></span>
<span data-line=""><span>  cubeSet</span><span>:</span><span> CubeSet</span><span>;</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>const</span><span> AVAILABLE_CUBES</span><span>:</span><span> CubeSet</span><span> =</span><span> {</span></span>
<span data-line=""><span>  red: </span><span>12</span><span>,</span></span>
<span data-line=""><span>  green: </span><span>13</span><span>,</span></span>
<span data-line=""><span>  blue: </span><span>14</span></span>
<span data-line=""><span>};</span></span>
<span data-line=""> </span>
<span data-line=""><span>async</span><span> function</span><span> main</span><span>() {</span></span>
<span data-line=""><span>  try</span><span> {</span></span>
<span data-line=""><span>    const</span><span> data</span><span> =</span><span> await</span><span> fs.</span><span>readFile</span><span>(</span><span>&#39;input_2.txt&#39;</span><span>, </span><span>&#39;utf-8&#39;</span><span>);</span></span>
<span data-line=""><span>    const</span><span> games</span><span> =</span><span> parseGames</span><span>(data);</span></span>
<span data-line=""><span>    const</span><span> possibleGamesSum</span><span> =</span><span> calculatePossibleGamesSum</span><span>(games);</span></span>
<span data-line=""><span>    console.</span><span>log</span><span>(possibleGamesSum);</span></span>
<span data-line=""><span>  } </span><span>catch</span><span> (err) {</span></span>
<span data-line=""><span>    console.</span><span>error</span><span>(</span><span>&#39;Error:&#39;</span><span>, err);</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>function</span><span> parseGames</span><span>(</span><span>data</span><span>:</span><span> string</span><span>)</span><span>:</span><span> Game</span><span>[] {</span></span>
<span data-line=""><span>  return</span><span> data.</span><span>split</span><span>(</span><span>&#39;</span><span>\n</span><span>&#39;</span><span>).</span><span>map</span><span>(parseGame);</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>function</span><span> parseGame</span><span>(</span><span>gameString</span><span>:</span><span> string</span><span>)</span><span>:</span><span> Game</span><span> {</span></span>
<span data-line=""><span>  const</span><span> [</span><span>idPart</span><span>, </span><span>drawsPart</span><span>] </span><span>=</span><span> gameString.</span><span>split</span><span>(</span><span>&#39;:&#39;</span><span>);</span></span>
<span data-line=""><span>  const</span><span> id</span><span> =</span><span> parseInt</span><span>(idPart.</span><span>split</span><span>(</span><span>&#39; &#39;</span><span>)[</span><span>1</span><span>]);</span></span>
<span data-line=""><span>  const</span><span> cubeSet</span><span> =</span><span> parseDraws</span><span>(drawsPart);</span></span>
<span data-line=""><span>  return</span><span> { id, cubeSet };</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>function</span><span> parseDraws</span><span>(</span><span>drawsString</span><span>:</span><span> string</span><span>)</span><span>:</span><span> CubeSet</span><span> {</span></span>
<span data-line=""><span>  const</span><span> cubeSet</span><span>:</span><span> CubeSet</span><span> =</span><span> { red: </span><span>0</span><span>, green: </span><span>0</span><span>, blue: </span><span>0</span><span> };</span></span>
<span data-line=""><span>  const</span><span> draws</span><span> =</span><span> drawsString.</span><span>split</span><span>(</span><span>&#39;;&#39;</span><span>);</span></span>
<span data-line=""> </span>
<span data-line=""><span>  for</span><span> (</span><span>const</span><span> draw</span><span> of</span><span> draws) {</span></span>
<span data-line=""><span>    const</span><span> tiles</span><span> =</span><span> draw.</span><span>trim</span><span>().</span><span>split</span><span>(</span><span>&#39;, &#39;</span><span>);</span></span>
<span data-line=""><span>    for</span><span> (</span><span>const</span><span> tile</span><span> of</span><span> tiles) {</span></span>
<span data-line=""><span>      const</span><span> [</span><span>count</span><span>, </span><span>color</span><span>] </span><span>=</span><span> tile.</span><span>split</span><span>(</span><span>&#39; &#39;</span><span>);</span></span>
<span data-line=""><span>      cubeSet[color] </span><span>=</span><span> Math.</span><span>max</span><span>(cubeSet[color], </span><span>parseInt</span><span>(count));</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  return</span><span> cubeSet;</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>function</span><span> calculatePossibleGamesSum</span><span>(</span><span>games</span><span>:</span><span> Game</span><span>[])</span><span>:</span><span> number</span><span> {</span></span>
<span data-line=""><span>  return</span><span> games.</span><span>reduce</span><span>((</span><span>sum</span><span>, </span><span>game</span><span>) </span><span>=&gt;</span><span> sum </span><span>+</span><span> (</span><span>isGamePossible</span><span>(game) </span><span>?</span><span> game.id </span><span>:</span><span> 0</span><span>), </span><span>0</span><span>);</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>function</span><span> isGamePossible</span><span>(</span><span>game</span><span>:</span><span> Game</span><span>)</span><span>:</span><span> boolean</span><span> {</span></span>
<span data-line=""><span>  return</span><span> Object.</span><span>entries</span><span>(</span><span>AVAILABLE_CUBES</span><span>).</span><span>every</span><span>(([</span><span>color</span><span>, </span><span>count</span><span>]) </span><span>=&gt;</span><span> game.cubeSet[color] </span><span>&lt;=</span><span> count);</span></span>
<span data-line=""><span>}</span></span>
<span data-line=""> </span>
<span data-line=""><span>main</span><span>();</span></span></code></pre></figure>
<p>‘Plex broke things down into a bunch of smaller, functional pieces. I particularly like this:</p>
<pre><code>function parseGames(data: string): Game[] {
  return data.split(&#39;\n&#39;).map(parseGame);
}
</code></pre>
<p>Using map, we have a function that returns a list of lines of games right off of the <code>data.split</code> function, and then uses parseGame to process each of those lines. Very fancy, but nice.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="github-light github-dark"><code data-language="ts" data-theme="github-light github-dark"><span data-line=""><span>function</span><span> parseGame</span><span>(</span><span>gameString</span><span>:</span><span> string</span><span>)</span><span>:</span><span> Game</span><span> {</span></span>
<span data-line=""><span>  const</span><span> [</span><span>idPart</span><span>, </span><span>drawsPart</span><span>] </span><span>=</span><span> gameString.</span><span>split</span><span>(</span><span>&#39;:&#39;</span><span>);</span></span>
<span data-line=""><span>  const</span><span> id</span><span> =</span><span> parseInt</span><span>(idPart.</span><span>split</span><span>(</span><span>&#39; &#39;</span><span>)[</span><span>1</span><span>]);</span></span>
<span data-line=""><span>  const</span><span> cubeSet</span><span> =</span><span> parseDraws</span><span>(drawsPart);</span></span>
<span data-line=""><span>  return</span><span> { id, cubeSet };</span></span>
<span data-line=""><span>}</span></span></code></pre></figure>
<p><code>parseGame</code> looks like it splits each game into a first and second half. I like saving this value, and the way it is de-structured. It’s just very clear to see okay, we’re not done cleaning the data, but at least we have these two sections. Good clear string manipulation.</p>
<p>I think at around line 3 though, things are getting a bit complicated to have these successively nested functions. I think I would maybe skip this.</p>
<p>My takeaway from this exercise it’s nice to have less nesting, and to be saving values at each step of the string manipulation in an increasingly better form until everything is structured exactly how you’d want it.</p>
<p>Okay with those takeaways, let’s move on to part II.</p></article><hr/></div></div></div>
  </body>
</html>
