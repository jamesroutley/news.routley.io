<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/42futures/firm">Original</a>
    <h1>Show HN: Firm, a text-based work management system</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A text-based work management system for technologists.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/42futures/firm/blob/main/media/demo.gif"><img src="https://github.com/42futures/firm/raw/main/media/demo.gif" alt="Firm CLI demo" data-animated-image=""/></a></p>

<p dir="auto">Modern businesses are natively digital, but lack a unified view. Your data is scattered across SaaS tools you don&#39;t control, so you piece together answers by jumping between platforms.</p>
<p dir="auto">Your business is a graph: customers link to projects, projects link to tasks, people link to organizations. Firm lets you define these relationships in plain text files (you own!).</p>
<p dir="auto">Version controlled, locally stored and structured as code with the Firm DSL. This structured representation of your work, <em>business-as-code</em>, makes your business readable to yourself and to the robots that help you run it.</p>

<ul dir="auto">
<li><strong>Everything in one place:</strong> Organizations, contacts, projects, and how they relate.</li>
<li><strong>Own your data:</strong> Plain text files and tooling that runs on your machine.</li>
<li><strong>Open data model:</strong> Tailor to your business with custom schemas.</li>
<li><strong>Automate anything:</strong> Search, report, integrate, whatever. It&#39;s just code.</li>
<li><strong>AI-ready:</strong> LLMs can read, write, and query your business structure.</li>
</ul>

<p dir="auto">The Firm CLI is available to download via Github Releases. Install scripts are provided for desktop platforms to make that process easy.</p>

<div dir="auto" data-snippet-clipboard-copy-content="curl -fsSL https://raw.githubusercontent.com/42futures/firm/main/install.sh | sudo bash"><pre>curl -fsSL https://raw.githubusercontent.com/42futures/firm/main/install.sh <span>|</span> sudo bash</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="irm https://raw.githubusercontent.com/42futures/firm/main/install.ps1 | iex"><pre>irm https://raw.githubusercontent.com/42futures/firm/main/install.ps1 <span>|</span> iex</pre></div>

<p dir="auto">Firm operates on a &#34;workspace&#34;: a directory containing all your <code>.firm</code> DSL files. The Firm CLI processes every file in this workspace to build a unified, queryable graph of your business.</p>
<p dir="auto">The first step is to add an entity to your workspace. You can do this either by using the CLI or by writing the DSL yourself.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Add entities with the CLI</h3><a id="user-content-add-entities-with-the-cli" aria-label="Permalink: Add entities with the CLI" href="#add-entities-with-the-cli"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Use <code>firm add</code> to interactively generate new entities. Out of the box, Firm supports a set of pre-built entity schemas for org mapping, customer relations and work management. The CLI will prompt you for the necessary info and generate corresponding DSL.</p>

<div data-snippet-clipboard-copy-content="Adding new entity

&gt; Type: organization
&gt; ID: megacorp
&gt; Name: Megacorp Ltd.
&gt; Email: mega@corp.com
&gt; Urls: [&#34;corp.com&#34;]

Writing generated DSL to file my_workspace/generated/organization.firm"><pre><code>Adding new entity

&gt; Type: organization
&gt; ID: megacorp
&gt; Name: Megacorp Ltd.
&gt; Email: mega@corp.com
&gt; Urls: [&#34;corp.com&#34;]

Writing generated DSL to file my_workspace/generated/organization.firm
</code></pre></div>

<p dir="auto">Alternatively, you can create a <code>.firm</code> file and write the DSL yourself.</p>
<div data-snippet-clipboard-copy-content="organization megacorp {
  name = &#34;Megacorp Ltd.&#34;
  email = &#34;mega@corp.com&#34;
  urls = [&#34;corp.com&#34;]
}"><pre lang="firm"><code>organization megacorp {
  name = &#34;Megacorp Ltd.&#34;
  email = &#34;mega@corp.com&#34;
  urls = [&#34;corp.com&#34;]
}
</code></pre></div>
<p dir="auto">Both of these methods achieve the same result: a new entity defined in your Firm workspace.</p>

<p dir="auto">Once you have entities in your workspace, you can query them using the CLI.</p>

<p dir="auto">Use <code>firm list</code> to see all entities of a specific type.</p>

<div data-snippet-clipboard-copy-content="Found 7 entities with type &#39;task&#39;

ID: task.design_homepage
Name: Design new homepage
Is completed: false
Assignee ref: person.jane_doe

..."><pre><code>Found 7 entities with type &#39;task&#39;

ID: task.design_homepage
Name: Design new homepage
Is completed: false
Assignee ref: person.jane_doe

...
</code></pre></div>

<p dir="auto">To view the full details of a single entity, use <code>firm get</code> followed by the entity&#39;s type and ID.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ firm get person john_doe"><pre>$ firm get person john_doe</pre></div>
<div data-snippet-clipboard-copy-content="Found &#39;person&#39; entity with ID &#39;john_doe&#39;

ID: person.john_doe
Name: John Doe
Email: john@doe.com"><pre><code>Found &#39;person&#39; entity with ID &#39;john_doe&#39;

ID: person.john_doe
Name: John Doe
Email: john@doe.com
</code></pre></div>

<p dir="auto">The power of Firm lies in its ability to travel a graph of your business. Use <code>firm related</code> to explore connections to/from any entity.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ firm related contact john_doe"><pre>$ firm related contact john_doe</pre></div>
<div data-snippet-clipboard-copy-content="Found 1 relationships for &#39;contact&#39; entity with ID &#39;john_doe&#39;

ID: interaction.megacorp_intro
Type: Call
Subject: Initial discussion about Project X
Interaction date: 2025-09-30 09:45:00 +02:00
Initiator ref: person.jane_smith
Primary contact ref: contact.john_doe"><pre><code>Found 1 relationships for &#39;contact&#39; entity with ID &#39;john_doe&#39;

ID: interaction.megacorp_intro
Type: Call
Subject: Initial discussion about Project X
Interaction date: 2025-09-30 09:45:00 +02:00
Initiator ref: person.jane_smith
Primary contact ref: contact.john_doe
</code></pre></div>

<p dir="auto">You&#39;ve seen the basic commands for interacting with a Firm workspace. The project is a work-in-progress, and you can expect to see more sophisticated features added over time, including a more powerful query engine and tools for running business workflows directly from the CLI.</p>

<p dir="auto">Beyond the CLI, you can integrate Firm&#39;s core logic directly into your own software using the <code>firm_core</code> and <code>firm_lang</code> Rust packages. This allows you to build more powerful automations and integrations on top of Firm.</p>
<p dir="auto">First, add the Firm crates to your <code>Cargo.toml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[dependencies]
firm_core = { git = &#34;https://github.com/42futures/firm.git&#34; }
firm_lang = { git = &#34;https://github.com/42futures/firm.git&#34; }"><pre>[<span>dependencies</span>]
<span>firm_core</span> = { <span>git</span> = <span><span>&#34;</span>https://github.com/42futures/firm.git<span>&#34;</span></span> }
<span>firm_lang</span> = { <span>git</span> = <span><span>&#34;</span>https://github.com/42futures/firm.git<span>&#34;</span></span> }</pre></div>
<p dir="auto">You can then load a workspace, build the entity graph, and query it programmatically:</p>
<div dir="auto" data-snippet-clipboard-copy-content="use firm_lang::workspace::Workspace;
use firm_core::EntityGraph;

// Load workspace from a directory
let mut workspace = Workspace::new();
workspace.load_directory(&#34;./my_workspace&#34;)?;
let build = workspace.build()?;

// Build the graph from the workspace entities
let mut graph = EntityGraph::new();
graph.add_entities(build.entities)?;
graph.build();

// Query the graph for a specific entity
let lead = graph.get_entity(&amp;EntityId::new(&#34;lead.ai_validation_project&#34;))?;

// Traverse a relationship to another entity
let contact_ref = lead.get_field(FieldId::new(&#34;contact_ref&#34;))?;
let contact = contact_ref.resolve_entity_reference(&amp;graph)?;"><pre><span>use</span> firm_lang<span>::</span>workspace<span>::</span><span>Workspace</span><span>;</span>
<span>use</span> firm_core<span>::</span><span>EntityGraph</span><span>;</span>

<span>// Load workspace from a directory</span>
<span>let</span> <span>mut</span> workspace = <span>Workspace</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>
workspace<span>.</span><span>load_directory</span><span>(</span><span>&#34;./my_workspace&#34;</span><span>)</span>?<span>;</span>
<span>let</span> build = workspace<span>.</span><span>build</span><span>(</span><span>)</span>?<span>;</span>

<span>// Build the graph from the workspace entities</span>
<span>let</span> <span>mut</span> graph = <span>EntityGraph</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>
graph<span>.</span><span>add_entities</span><span>(</span>build<span>.</span><span>entities</span><span>)</span>?<span>;</span>
graph<span>.</span><span>build</span><span>(</span><span>)</span><span>;</span>

<span>// Query the graph for a specific entity</span>
<span>let</span> lead = graph<span>.</span><span>get_entity</span><span>(</span><span>&amp;</span><span>EntityId</span><span>::</span><span>new</span><span>(</span><span>&#34;lead.ai_validation_project&#34;</span><span>)</span><span>)</span>?<span>;</span>

<span>// Traverse a relationship to another entity</span>
<span>let</span> contact_ref = lead<span>.</span><span>get_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;contact_ref&#34;</span><span>)</span><span>)</span>?<span>;</span>
<span>let</span> contact = contact_ref<span>.</span><span>resolve_entity_reference</span><span>(</span><span>&amp;</span>graph<span>)</span>?<span>;</span></pre></div>
<p dir="auto">This gives you full access to the underlying data structures, providing a foundation for building custom business automations.</p>

<p dir="auto">Firm is organized as a Rust workspace with three crates:</p>

<p dir="auto">Core data structures and graph operations.</p>
<ul dir="auto">
<li>Entity data model</li>
<li>Typed fields with references</li>
<li>Relationship graph with query capabilities</li>
<li>Entity schemas and validation</li>
</ul>

<p dir="auto">DSL parsing and generation.</p>
<ul dir="auto">
<li>Tree-sitter-based parser for <code>.firm</code> files</li>
<li>Conversion between DSL and entities</li>
<li>Workspace support for multi-file projects</li>
<li>DSL generation from entities</li>
</ul>
<p dir="auto">Grammar is defined in <a href="https://github.com/42futures/tree-sitter-firm">tree-sitter-firm</a>.</p>

<p dir="auto">Command-line interface, making the Firm workspace interactive.</p>

<p dir="auto">Firm&#39;s data model is built on a few key concepts. Each concept is accessible declaratively through the <code>.firm</code> DSL for human-readable definitions, and programmatically through the Rust packages for building your own automations.</p>

<p dir="auto">Entities are the fundamental business objects in your workspace, like people, organizations, or projects. Each entity has a unique ID, a type, and a collection of fields.</p>
<p dir="auto"><strong>In the DSL</strong>, you define an entity with its type and ID, followed by its fields in a block:</p>
<div data-snippet-clipboard-copy-content="person john_doe {
    name = &#34;John Doe&#34;
    email = &#34;john@doe.com&#34;
}"><pre lang="firm"><code>person john_doe {
    name = &#34;John Doe&#34;
    email = &#34;john@doe.com&#34;
}
</code></pre></div>
<p dir="auto"><strong>In Rust</strong>, this corresponds to an <code>Entity</code> struct:</p>
<div dir="auto" data-snippet-clipboard-copy-content="let person = Entity::new(EntityId::new(&#34;john_doe&#34;), EntityType::new(&#34;person&#34;))
    .with_field(FieldId::new(&#34;name&#34;), &#34;John Doe&#34;)
    .with_field(FieldId::new(&#34;email&#34;), &#34;john@doe.com&#34;);"><pre><span>let</span> person = <span>Entity</span><span>::</span><span>new</span><span>(</span><span>EntityId</span><span>::</span><span>new</span><span>(</span><span>&#34;john_doe&#34;</span><span>)</span><span>,</span> <span>EntityType</span><span>::</span><span>new</span><span>(</span><span>&#34;person&#34;</span><span>)</span><span>)</span>
    <span>.</span><span>with_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;name&#34;</span><span>)</span><span>,</span> <span>&#34;John Doe&#34;</span><span>)</span>
    <span>.</span><span>with_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;email&#34;</span><span>)</span><span>,</span> <span>&#34;john@doe.com&#34;</span><span>)</span><span>;</span></pre></div>

<p dir="auto">Fields are typed key-value pairs attached to an entity. Firm supports a rich set of types:</p>
<ul dir="auto">
<li><code>String</code></li>
<li><code>Integer</code></li>
<li><code>Float</code></li>
<li><code>Boolean</code></li>
<li><code>Currency</code></li>
<li><code>DateTime</code></li>
<li><code>List</code> of other values</li>
<li><code>Reference</code> to other fields or entities</li>
<li><code>Path</code> to a local file</li>
</ul>
<p dir="auto"><strong>In the DSL</strong>, the syntax maps directly to these types:</p>
<div data-snippet-clipboard-copy-content="my_task design_homepage {
    title = &#34;Design new homepage&#34;        // String
    priority = 1                         // Integer
    completed = false                    // Boolean
    budget = 5000.00 USD                 // Currency
    due_date = 2024-12-01 at 17:00 UTC   // DateTime
    tags = [&#34;ui&#34;, &#34;ux&#34;]                  // List
    assignee = person.jane_doe           // Reference
    deliverable = path&#34;./homepage.zip&#34;   // Path
}"><pre lang="firm"><code>my_task design_homepage {
    title = &#34;Design new homepage&#34;        // String
    priority = 1                         // Integer
    completed = false                    // Boolean
    budget = 5000.00 USD                 // Currency
    due_date = 2024-12-01 at 17:00 UTC   // DateTime
    tags = [&#34;ui&#34;, &#34;ux&#34;]                  // List
    assignee = person.jane_doe           // Reference
    deliverable = path&#34;./homepage.zip&#34;   // Path
}
</code></pre></div>
<p dir="auto"><strong>In Rust</strong>, these are represented by the <code>FieldValue</code> enum:</p>
<div dir="auto" data-snippet-clipboard-copy-content="let value = FieldValue::Integer(42);"><pre><span>let</span> value = <span>FieldValue</span><span>::</span><span>Integer</span><span>(</span><span>42</span><span>)</span><span>;</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Relationships and the entity graph</h3><a id="user-content-relationships-and-the-entity-graph" aria-label="Permalink: Relationships and the entity graph" href="#relationships-and-the-entity-graph"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The power of Firm comes from connecting entities. You create relationships using <code>Reference</code> fields.</p>
<p dir="auto">When Firm processes your workspace, it builds the <em>entity graph</em> representing of all your entities (as nodes) and their relationships (as directed edges). This graph is what allows for traversal and querying.</p>
<p dir="auto"><strong>In the DSL</strong>, creating a relationship is as simple as referencing another entity&#39;s ID.</p>
<div data-snippet-clipboard-copy-content="contact john_at_acme {
    person_ref = person.john_doe
    organization_ref = organization.acme_corp
}"><pre lang="firm"><code>contact john_at_acme {
    person_ref = person.john_doe
    organization_ref = organization.acme_corp
}
</code></pre></div>
<p dir="auto"><strong>In Rust</strong>, you build the graph by loading entities and calling the <code>.build()</code> method, which resolves all references into queryable links.</p>
<div dir="auto" data-snippet-clipboard-copy-content="let mut graph = EntityGraph::new();
graph.add_entities(workspace.build()?.entities)?;
graph.build(); // Builds relationships from references

// Now you can traverse the graph
let contact = graph.get_entity(&amp;EntityId::new(&#34;contact.john_at_acme&#34;))?;
let person_ref = contact.get_field(FieldId::new(&#34;person_ref&#34;))?;
let person = person_ref.resolve_entity_reference(&amp;graph)?;"><pre><span>let</span> <span>mut</span> graph = <span>EntityGraph</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>
graph<span>.</span><span>add_entities</span><span>(</span>workspace<span>.</span><span>build</span><span>(</span><span>)</span>?<span>.</span><span>entities</span><span>)</span>?<span>;</span>
graph<span>.</span><span>build</span><span>(</span><span>)</span><span>;</span> <span>// Builds relationships from references</span>

<span>// Now you can traverse the graph</span>
<span>let</span> contact = graph<span>.</span><span>get_entity</span><span>(</span><span>&amp;</span><span>EntityId</span><span>::</span><span>new</span><span>(</span><span>&#34;contact.john_at_acme&#34;</span><span>)</span><span>)</span>?<span>;</span>
<span>let</span> person_ref = contact<span>.</span><span>get_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;person_ref&#34;</span><span>)</span><span>)</span>?<span>;</span>
<span>let</span> person = person_ref<span>.</span><span>resolve_entity_reference</span><span>(</span><span>&amp;</span>graph<span>)</span>?<span>;</span></pre></div>

<p dir="auto">Schemas allow you to define and enforce a structure for your entities, ensuring data consistency. You can specify which fields are required or optional and what their types should be.</p>
<p dir="auto"><strong>In the DSL</strong>, you can define a schema that other entities can adhere to:</p>
<div data-snippet-clipboard-copy-content="schema custom_project {
    field {
        name = &#34;title&#34;
        type = &#34;string&#34;
        required = true
    }
    field {
        name = &#34;budget&#34;
        type = &#34;currency&#34;
        required = false
    }
}

custom_project my_project {
    title  = &#34;My custom project&#34;
    budget = 42000 EUR
}"><pre lang="firm"><code>schema custom_project {
    field {
        name = &#34;title&#34;
        type = &#34;string&#34;
        required = true
    }
    field {
        name = &#34;budget&#34;
        type = &#34;currency&#34;
        required = false
    }
}

custom_project my_project {
    title  = &#34;My custom project&#34;
    budget = 42000 EUR
}
</code></pre></div>
<p dir="auto"><strong>In Rust</strong>, you can define schemas programmatically to validate entities.</p>
<div dir="auto" data-snippet-clipboard-copy-content="let schema = EntitySchema::new(EntityType::new(&#34;project&#34;))
    .with_required_field(FieldId::new(&#34;title&#34;), FieldType::String)
    .with_optional_field(FieldId::new(&#34;budget&#34;), FieldType::Currency);

schema.validate(&amp;some_project_entity)?;"><pre><span>let</span> schema = <span>EntitySchema</span><span>::</span><span>new</span><span>(</span><span>EntityType</span><span>::</span><span>new</span><span>(</span><span>&#34;project&#34;</span><span>)</span><span>)</span>
    <span>.</span><span>with_required_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;title&#34;</span><span>)</span><span>,</span> <span>FieldType</span><span>::</span><span>String</span><span>)</span>
    <span>.</span><span>with_optional_field</span><span>(</span><span>FieldId</span><span>::</span><span>new</span><span>(</span><span>&#34;budget&#34;</span><span>)</span><span>,</span> <span>FieldType</span><span>::</span><span>Currency</span><span>)</span><span>;</span>

schema<span>.</span><span>validate</span><span>(</span><span>&amp;</span>some_project_entity<span>)</span>?<span>;</span></pre></div>

<p dir="auto">Firm includes schemas for a range of built-in entities like Person, Organization, and Industry.</p>
<p dir="auto">Firm&#39;s entity taxonomy is built on the <a href="https://en.wikipedia.org/wiki/Resources,_Events,_Agents" rel="nofollow">REA model (Resources, Events, Agents)</a> with inspiration from <a href="https://schema.org/Person" rel="nofollow">Schema.org</a>, designed for flexible composition and efficient queries.</p>
<p dir="auto">Every entity maps to a Resource (thing with value), an Event (thing that happens), or an Agent (thing that acts).</p>
<p dir="auto">We separate objective reality from business relationships:</p>
<ul dir="auto">
<li><strong>Fundamental entities</strong> represent things that exist independently (<code>Person</code>, <code>Organization</code>, <code>Document</code>)</li>
<li><strong>Contextual entities</strong> represent your business relationships and processes (<code>Contact</code>, <code>Lead</code>, <code>Project</code>)</li>
</ul>
<p dir="auto">Entities reference each other rather than extending. One <code>Person</code> can be referenced by multiple <code>Contact</code>, <code>Employee</code>, and <code>Partner</code> entities simultaneously.</p>
<p dir="auto">When the entity graph is built, all <code>Reference</code> values automatically create directed edges between entities. This enables traversal queries like &#34;find all Tasks for Opportunities whose Contacts work at Organization X&#34; without complex joins.</p>
</article></div></div>
  </body>
</html>
