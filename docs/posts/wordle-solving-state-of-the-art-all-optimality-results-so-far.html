<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.poirrier.ca/notes/wordle-optimal/">Original</a>
    <h1>Wordle-solving state of the art: all optimality results so far</h1>
    
    <div id="readability-page-1" class="page"><div>

<p>2022-01-26</p>
<p>Most mathematical questions one could have about <a href="https://www.powerlanguage.co.uk/wordle/">Wordle</a> are <strong>settled</strong> by now, and a few remain open. I summarize here what is known, as far as I can tell.</p>
<h2 id="tldr">tl;dr</h2>
<ul>
<li>If we exploit the 2315-words solution list, everything is known:
<ul>
<li>Wordle <a href="https://freshman.dev/wordle/#/leaderboard">can be solved in 3.4212 guesses on average, with 5 guesses at worst</a> (i.e., 100% of the time comfortably within the allowed 6 guesses).</li>
<li>The corresponding decision tree is <em>optimal</em> both in terms of average, and in the worst case: It <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle">was proven rigorously</a> that it is not possible to get an average lower than 3.4212, nor is it possible to have a worst case of 4 guesses, even independently.</li>
<li>In hard mode, Wordle <a href="https://freshman.dev/wordle/#/leaderboard">can be solved in 3.5085 guesses on average</a>, (with 6 guesses at worst, i.e.¬†100% of the time). Or, with a <em>different</em> decision tree, it can be solved with a slightly worse average, but <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle">always within 5 guesses</a>. Again, both trees are <em>optimal</em> for their respective objective functions.</li>
</ul></li>
<li>For the full 12972-words dictionary, the worst case is known:
<ul>
<li>Wordle <a href="https://www.poirrier.ca/notes/wordle/">can be solved in 6 guesses at worst</a> (i.e.¬†100% of the time just within the allowed 6 guesses).</li>
<li>The above result is <em>optimal</em>: It <a href="https://alexpeattie.com/blog/establishing-minimum-guesses-wordle/">was proven rigorously</a> that it is not possible to find a decision tree whose worst case is 5 guesses or less.</li>
<li>In hard mode, Wordle can be solved in 14 guesses, but there is <em>no optimality</em> result here.</li>
<li>So it is unknown whether hard mode Wordle can be solved 100% of the time within 6 guesses.</li>
<li>Not much is known yet about the average, as far as I can tell.</li>
</ul></li>
</ul>
<!--
## Updates
- xxxx-xx-xx new result
-->
<h2 id="game-setup">Game setup</h2>
<p>First, let‚Äôs clarify a few things about the game:</p>
<ul>
<li><p>Wordle comes with a dictionary of 12972 words that the player is allowed to use as guesses. They are essentially all 5-letter combinations one could reasonably argue are English words. The ‚Äúsecret‚Äù word that the player has to discover is also always in that dictionary.</p>
<p>It is so trivially easy to cheat at Wordle that there is no point to it: The list of secret words is right there in the code of the game. The daily secret words are picked sequentially from that list, so they are all known since 2021-06-19 (‚Äúcigar‚Äù) and until 2027-10-20 (not going to spoil it for you), for a total of 2315 scheduled secret words.</p>
<p>One could always look up that list for the current date and solve the game immediately at the first guess. However, this is not much fun (mathematically), so we need to define the game somehow. There are two obvious options:</p>
<ul>
<li><p><strong>‚ÄúFull dictionary‚Äù</strong>: we consider that the secret word could be any word from the full 12972-word list.</p></li>
<li><p><strong>‚ÄúSolution list‚Äù</strong>: we know that not every word can be a secret word, and take advantage of the knowledge of the list of 2315 scheduled secret word (but we ignore its order, which would trivially allow us to win every game in one guess).</p></li>
</ul></li>
<li><p>While many focused on finding the best ‚Äúfirst word‚Äù to play as a guess, the first guess is just a tiny part of what we really want: A <strong>decision tree</strong>. A decision tree not only tells you which guess to play first, but <a href="https://www.poirrier.ca/notes/wordle/#decision-trees">accompanies you as you play</a>, telling you which guesses to play subsequently <em>in function of</em> the information given you by the game as you play (i.e.¬†all the letter colors üü©üü®‚¨ú so far). I only cover here fixed/deterministic decision trees, which will always reach a given secret word in the same way, because it is straightforward to give formal evaluations of how good they are.</p></li>
<li><p>The word <strong>optimal</strong> has taken quite a mauling lately in Wordle-related writings. Just to be to be absolutely clear, a solution is optimal only if no better solution can possibly exist. In particular, there is no such thing as a ‚Äúmore optimal‚Äù solution.</p></li>
<li><p>Now, regarding what we optimize, there are two natural choices:</p>
<ul>
<li><p>The <strong>worst-case</strong> number of guesses. That is, given a decision tree, what is the maximum number of guesses necessary to correctly guess any secret word? In other words, after how many guesses does the decision tree guarantee that we win the game?</p></li>
<li><p>The <strong>average</strong> number of guesses. What is the average, over all possible secret words, of the number of guesses a decision tree will take to get a win?</p></li>
</ul>
<p>As we will see, those are competing objectives, sometimes irreconcilably, sometimes not so.</p></li>
<li><p>Buried in the options, Wordle features a <strong>hard mode</strong>. The game is different in hard mode, in that only words that satisfy the hints given earlier are allowed as player guesses. (For example, if a letter is colored green üü© after one guess, that letter must be present in the same position in all subsequent guesses.)</p>
<p>There are subtleties about the rules regarding words with repeated letters, and this particularly affects hard mode. However, it seems that by now everyone agrees <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle#Assumptions_about_the_rules_of_Wordle">what the rules are</a>.</p></li>
</ul>
<h2 id="solution-list-2315-possible-secret-words">Solution list: 2315 possible secret words</h2>
<p>In this section, we assume that we know the list of 2315 scheduled secret words, but we ignore the list‚Äôs order (it would be trivially easy otherwise).</p>
<p>For this case, <a href="https://freshman.dev/">Cyrus Freshman</a> set up a nice automated <a href="https://freshman.dev/wordle/#/leaderboard">leader board</a> with a <a href="https://old.reddit.com/r/wordle/comments/s88iq4/a_wordle_bot_leaderboard/">standardized input format</a>. There we can directly find that five distinct people have found decision trees that solve Wordle in 3.4212 average guesses and (simultaneously) 5 worst-case guesses: <a href="https://jonathanolson.net/experiments/optimal-wordle-solutions">Jonathan Olson</a> <a href="https://github.com/petertseng/wordle-rs/">Peter Tseng</a>, <code>CHIsomorphism</code>, <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle">Alex Selby</a>, as well as <code>rahsosprout</code>.</p>
<p>While I suspect all employed similar general approaches (recursive enumeration / backtracking with tree pruning and some form of caching), I will now mainly defer to <a href="http://sonorouschocolate.com/notes/index.php?title=Main_Page">Alex Selby</a>‚Äôs <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle">nice writeup</a>, because it is the most thorough and because the corresponding code can answer more of our questions. Alex and Peter both implemented their algorithms in such a way that not only they get good decision trees, but they can also subsequently perform an accelerated <em>complete</em> enumeration and prove optimality. Alex indicates that the latter is by far the most difficult part computationally: finding good trees (that happen to be optimal) is quick, proving that they are indeed optimal is much more expensive.</p>
<p>The best known decision tree for this version of Wordle leads to a win in 3.4212 guesses on average. In the worst case, this same tree wins the game in 5 guesses (i.e., 100% of the time, never even using the 6th guess). Alex reports on the result of the complete enumeration, formally proving that <a href="http://sonorouschocolate.com/notes/index.php?title=The_best_strategies_for_Wordle">this is optimal</a>, both in average (no tree has an average of less than 3.4212) and in the worst case (no tree wins all games in 4 guesses at most).</p>
<p>For hard mode, both Alex and Peter found a decision tree with in 3.5085 guesses on average and 6 guesses at worst (i.e., 100% wins in 6 guesses). Hard mode is interesting in that, if we are willing to sacrifice a bit on the average, we can improve the worst case: Alex found a different decision tree with 3.5448 guesses on average, but a worst case of 5 guesses! Again, Alex reports optimality on both fronts.</p>
<p>In terms of worst case, I could confirm the optimality results both for <a href="https://www.poirrier.ca/notes/wordle/#variant-cheat-mode">standard Wordle</a> and <a href="https://www.poirrier.ca/notes/wordle/#variant-cheathard-mode">hard mode</a>.</p>
<h2 id="full-dictionary-12972-possible-secret-words">Full dictionary: 12972 possible secret words</h2>
<p>In this section, we assume that the game can pick secret words from its whole 12972-word dictionary. The number of potential secret words is now about 5.6x as large as in the previous case, dramatically increasing the size of an already large enumeration space.</p>
<p>Still, the same type of emumeration / backtracking tricks work even in this case, and with a careful implementation I found <a href="https://www.poirrier.ca/notes/wordle/">a decision tree with 6 guesses in the worst case</a>. Even with the full dictionary of 12972 possible secret words, it is thus still possible to win every Wordle game within the 6 allowed guesses! I did not try to optimize for the average number of guesses, but it can still be measured: 4.2308 guesses on average over the 12972 words. I was not able to perform complete enumeration for 5 guesses, so there was no optimality guarantee. However, complete enumeration did rule out the existence of trees with 4 guesses in the worst case, leaving a frustrating gap between 4 and 6.</p>
<p>The frustration was short-lived, fortunately, as <a href="https://alexpeattie.com/blog/establishing-minimum-guesses-wordle/">Alex Peattie</a> proved that it is impossible to build a decision tree with 5 guesses in the worst case, making the result sharp. The <a href="https://alexpeattie.com/blog/establishing-minimum-guesses-wordle/#can-we-guarantee-a-win-in-ill-wordle-in-5-moves">proof</a> is much more interesting than complete enumeration: it relies on cleverly finding provably-difficult-to-disambiguate word subsets and it can be checked directly by inspection without any computational tools (although Alex did double-check it with <a href="https://developers.google.com/optimization">OR-Tools</a>‚Äô constraint programming solver).</p>
<p>Thanks of Alex‚Äôs proof, we now have an optimality guarantee in terms of the worst case at 6 guesses. It is still an open question whether we can find a decision tree that is optimal in terms of its <em>average</em> number of guesses.</p>
<p>Hard mode is <a href="https://www.poirrier.ca/notes/wordle/#variant-hard-mode">deceptively hard</a> to enumerate over when using the full dictionary, at least with my naive approach. I suspect that the additional structure could enable more pruning. Still, at this stage I could only find a tree with 14 guesses (!) in the worst case (4.6168 on average), and no optimality guarantee.</p>
<p>It thus is still an open question, with the full dictionary, whether hard mode can be always solved within the 6 allowed guesses. And the best possible average number of guesses is unknown as well in hard mode, obviously.</p>
</div></div>
  </body>
</html>
