<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://forum.level1techs.com/t/bizarre-pcie-trouble-with-4tb-crucial-t500-nvme-ssd/222915">Original</a>
    <h1>PCIe trouble with 4TB Crucial T500 NVMe SSD for &gt;1 power cycle on MSI PRO X670-P</h1>
    
    <div id="readability-page-1" class="page"><div id="main-outlet" role="main">
        

  

    <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="Bizarre PCIe trouble with 4TB Crucial T500 NVMe SSD"/>
      
      <meta itemprop="datePublished" content="2024-12-27T06:53:23Z"/>
        <meta itemprop="articleSection" content="Storage"/>
      <meta itemprop="keywords" content=""/>
      


          <div id="post_1">
            <div>
              


              <p><span>
                  <time datetime="2024-12-27T06:53:23Z">
                    December 27, 2024,  6:53am
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T11:15:21Z"/>
              <span itemprop="position">1</span>
              </span>
            </p></div>
            <div itemprop="text">
              <p>So I just got this drive, and it has worked flawlessly in every other system I’ve tried it in, including my ancient Skylake testbench board.</p>
<p>I have an MSI PRO X670-P WIFI, which while otherwise working fine, including with other NVMe drives, is displaying a truly bizarre behavior with this particular drive.</p>
<p>And yes, I’ve just swapped out the CPU with a brand new one and the behavior is unchanged, so this isn’t some CPU PCIe circuitry degradation or something.</p>
<p>When I install this drive, in <em>any</em> M.2 slot on the board, it will work <em>flawlessly</em> for exactly <em>one</em> power cycle. I can reboot, I can hit the reset switch, the drive works just fine.</p>
<p>Until I turn off the machine. After that has been done, the drive will never ever detect ever again. Until I physically remove and reinstall the drive, then it works completely perfectly for exactly one power cycle.</p>
<p>What the eff? This screams BIOS issue to me, though MSI just blames the SSD.</p>
<p>I have a working Linux/SystemRescueCD environment on the machine, so if any PCIe geniuses here have any ideas, I’m all ears.</p>
<p>I’ve compared lspci outputs in three states - ‘not installed’, ‘installed and working’, and ‘installed and not working’. The ‘installed and not working’ outputs are absolutely identical to the ‘not installed’ outputs. The relevant host bridge registers are exactly the same between ‘installed and working’ and ‘installed and not working’.</p>
            </div>

            

            

          </div>
          <div id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://forum.level1techs.com/u/skyhawk"><span itemprop="name">skyhawk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2024-12-27T06:54:41Z">
                    December 27, 2024,  6:54am
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T06:56:27Z"/>
              <span itemprop="position">2</span>
              </span>
            </p>
            <div itemprop="text">
              <p>lspci tree outputs</p>
<p>lspci -vvv outputs</p>
            </div>

            

            

          </div>
          <div id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            
            <div itemprop="text">
              
<p>Does it reset to working again if, rather than removing the drive, you switch the PSU off/pull the plug for a while? I.e. is it the complete loss of power that makes it work again?</p>
<p>Or do you have to boot the computer without the drive installed once before it starts working again after reinstall?</p>
<p>If the latter it clearly points to an UEFI bug IMO. Otherwise, it’s perhaps more difficult to say where the problem is? Either way, bizzare, as you say!</p>
            </div>

            

            

          </div>
          <div id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://forum.level1techs.com/u/skyhawk"><span itemprop="name">skyhawk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2024-12-27T10:04:41Z">
                    December 27, 2024, 10:04am
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T10:04:41Z"/>
              <span itemprop="position">4</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>Nope. From a not-working state, just turning the machine off, pulling the drive and plugging it back in is all that’s needed to return to working order. For one power cycle.</p>
            </div>

            

            

          </div>
          <div id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://forum.level1techs.com/u/skyhawk"><span itemprop="name">skyhawk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2024-12-27T10:08:01Z">
                    December 27, 2024, 10:08am
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T11:08:54Z"/>
              <span itemprop="position">5</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>I started following this line of thought by pulling the BIOS button cell and disconnecting the ATX power supply, but this board seems to have some quite considerable capacitance somewhere. I was quite surprised to measure 1.9V across some of the pins on the ATX plug in this state.</p>
<p>I think my KVM switch was supplying some kind of voltage to the board via the HDMI and USB plugs. Once I disconnected those these phantom voltages went away, and the board was completely inert. I then reconnected the PSU and KVM, and the SSD works. (For one power cycle)</p>
<p>Is this some kind of phantom voltage keeping the SSD with just enough voltage to crash the controller, but not low enough to trigger a reset signal of some kind?</p>
<p>I think this line of inquiry is going somewhere. After shutting down the computer, ensuring the coin cell is not present, and disconnecting the 24pin ATX and 8-pin ATX12V for the CPU, there’s 1.9V consistently present on the 3.3V pins on the 24-pin ATX socket (Ergo all the 3.3v logic and devices on the board are getting 1.9V, unless my understanding is off) until I disconnect the HDMI cable from my KVM, at which point it almost instantly goes to zero.</p>
<p>Plugging the HDMI cable back in does not restore the 1.9V - The 3.3v line remains at zero… Is disconnecting the HDMI cable between power cycles all that’s needed here?</p>
<p>Yes. Yes it is. And the fault isn’t limited to my KVM. I took the KVM out of the picture and just connected my HP ZR24w monitor (via DVI-&gt;HDMI adapter) directly to the HDMI socket on the motherboard, and the issue persists. The issue does <em>not</em> occur when the monitor is connected via DisplayPort.</p>
<p>I’d be really curious to know if my board is somehow defective, or if MSI made an oopsie on this design? Hilariously, if I <em>wasn’t</em> simplifying for troubleshooting by relying on the integrated graphics instead of an add-on board, this problem would not have occurred.</p>
            </div>

            

            

          </div>
          <div id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://forum.level1techs.com/u/fDrot"><span itemprop="name">fDrot</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2024-12-27T13:20:32Z">
                    December 27, 2024,  1:20pm
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T13:20:32Z"/>
              <span itemprop="position">6</span>
              </span>
            </p>
            <p>I suspect a problem with BIOS. Might sound stupid, but do you have the latest BIOS version?</p>

            

            

          </div>
          <div id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://forum.level1techs.com/u/skyhawk"><span itemprop="name">skyhawk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2024-12-27T19:42:01Z">
                    December 27, 2024,  7:42pm
                  </time>
                  <meta itemprop="dateModified" content="2024-12-27T19:42:01Z"/>
              <span itemprop="position">7</span>
              </span>
            </p>
            <p>I’ve tried several recent BIOSes, none of them have made any difference. This seems like an electrical design fault on the board, they’ve got some transistor that NPNs when it should have PNPd when the board is turned off, or something.</p>

            

            

          </div>
    </div>


    




    </div></div>
  </body>
</html>
