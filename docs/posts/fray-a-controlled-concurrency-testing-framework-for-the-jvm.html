<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cmu-pasta/fray">Original</a>
    <h1>Fray: A Controlled Concurrency Testing Framework for the JVM</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/cmu-pasta/fray/actions/workflows/main.yml"><img src="https://github.com/cmu-pasta/fray/actions/workflows/main.yml/badge.svg" alt="Build"/></a>
<a href="https://plugins.gradle.org/plugin/org.pastalab.fray.gradle" rel="nofollow"><img src="https://camo.githubusercontent.com/d01a7830ea4e6e1ef0ff99c7b2aa4e2a506d6a73ec233a53e7c95416601f2eec/68747470733a2f2f696d672e736869656c64732e696f2f677261646c652d706c7567696e2d706f7274616c2f762f6f72672e70617374616c61622e667261792e677261646c65" alt="Gradle" data-canonical-src="https://img.shields.io/gradle-plugin-portal/v/org.pastalab.fray.gradle"/></a>
<a href="https://central.sonatype.com/artifact/org.pastalab.fray.maven/fray-plugins-maven" rel="nofollow"><img src="https://camo.githubusercontent.com/879b91efcbf3610679ec19c060e82e92057119c53bcec76e0152d63d0dc9c995/68747470733a2f2f696d672e736869656c64732e696f2f6d6176656e2d63656e7472616c2f762f6f72672e70617374616c61622e667261792e6d6176656e2f667261792d706c7567696e732d6d6176656e" alt="Maven" data-canonical-src="https://img.shields.io/maven-central/v/org.pastalab.fray.maven/fray-plugins-maven"/></a>
<a href="https://plugins.jetbrains.com/plugin/26623-fray-debugger" rel="nofollow"><img src="https://camo.githubusercontent.com/144cc0a4de49a01529628e1ce13a06c3f1a87cf7f27b77032aef53832a500be0/68747470733a2f2f696d672e736869656c64732e696f2f6a6574627261696e732f706c7567696e2f762f32363632332d667261792d6465627567676572" alt="JetBrain Plugin" data-canonical-src="https://img.shields.io/jetbrains/plugin/v/26623-fray-debugger"/></a>
<a href="https://discord.gg/2VkNRuHUCX" rel="nofollow"><img src="https://camo.githubusercontent.com/a05cccebe0bd4903f95978ef0849182b7d09c54c05e36579ccb149054e9aca29/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f31333435343934373039383037373433303537" alt="Discord" data-canonical-src="https://img.shields.io/discord/1345494709807743057"/></a></p>
<a href="https://github.com/cmu-pasta/fray">
  <img src="https://crawshaw.io/cmu-pasta/fray/raw/main/assets/logo-cropped.png" width="256" alt="logo"/>
</a>
<p dir="auto">Fray is a concurrency testing tool for Java that can help you <strong>find and debug tricky race conditions that manifest as assertion violations, run-time exceptions, or deadlocks</strong>.
It performs controlled concurrency testing using state-of-the-art techniques such as <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/asplos277-pct.pdf" rel="nofollow">probabilistic concurrency testing</a>
or <a href="https://www.cs.columbia.edu/~junfeng/papers/pos-cav18.pdf" rel="nofollow">partial order sampling</a>. Fray also provides deterministic replay capabilities for debugging specific thread interleavings. Fray is designed
to be easy to use and can be integrated into existing testing frameworks.</p>


<p dir="auto">If you are using JUnit 5, you can use the <code>@ConcurrencyTest</code> annotation to mark a test as a concurrency test. You
also need to add the <code>@ExtendWith(FrayTestExtension.class)</code> annotation to the test class.</p>
<div dir="auto" data-snippet-clipboard-copy-content="import org.pastalab.fray.junit.junit5.FrayTestExtension;
import org.pastalab.fray.junit.junit5.annotations.ConcurrencyTest;

@ExtendWith(FrayTestExtension.class)
public class SimpleTest {
    @ConcurrencyTest
    public void concurrencyTest() {
        ... // some multithreaded code
        assert(...);
    }
}
"><pre><span>import</span> <span>org</span>.<span>pastalab</span>.<span>fray</span>.<span>junit</span>.<span>junit5</span>.<span>FrayTestExtension</span>;
<span>import</span> <span>org</span>.<span>pastalab</span>.<span>fray</span>.<span>junit</span>.<span>junit5</span>.<span>annotations</span>.<span>ConcurrencyTest</span>;

<span>@</span><span>ExtendWith</span>(<span>FrayTestExtension</span>.<span>class</span>)
<span>public</span> <span>class</span> <span>SimpleTest</span> {
    <span>@</span><span>ConcurrencyTest</span>
    <span>public</span> <span>void</span> <span>concurrencyTest</span>() {
        ... <span>// some multithreaded code</span>
        <span>assert</span>(<span></span>...);
    }
}</pre></div>

<p dir="auto">Fray can be used with other testing frameworks as well. You may use the <code>FrayInTestLauncher</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="import org.pastalab.fray.junit.plain.FrayInTestLauncher;

public void test() {
    FrayInTestLauncher.INSTANCE.launchFrayTest(() -&gt; {
        ... // some multithreaded code
        assert(...);
    });
}"><pre><span>import</span> <span>org</span>.<span>pastalab</span>.<span>fray</span>.<span>junit</span>.<span>plain</span>.<span>FrayInTestLauncher</span>;

<span>public</span> <span>void</span> <span>test</span>() {
    <span>FrayInTestLauncher</span>.<span>INSTANCE</span>.<span>launchFrayTest</span>(() -&gt; {
        ... <span>// some multithreaded code</span>
        <span>assert</span>(<span></span>...);
    });
}</pre></div>

<p dir="auto">To use Fray with Gradle, add the following plugin to your <code>build.gradle</code> file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="plugins {
    id(&#34;org.pastalab.fray.gradle&#34;) version &#34;0.5.1&#34;
}"><pre>plugins {
    id(<span><span>&#34;</span>org.pastalab.fray.gradle<span>&#34;</span></span>) version <span><span>&#34;</span>0.5.1<span>&#34;</span></span>
}</pre></div>

<ul dir="auto">
<li>First please add Fray plugin to your project</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;plugin&gt;
    &lt;groupId&gt;org.pastalab.fray.maven&lt;/groupId&gt;
    &lt;artifactId&gt;fray-plugins-maven&lt;/artifactId&gt;
    &lt;version&gt;0.5.1&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;prepare-fray&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;prepare-fray&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;"><pre>&lt;<span>plugin</span>&gt;
    &lt;<span>groupId</span>&gt;org.pastalab.fray.maven&lt;/<span>groupId</span>&gt;
    &lt;<span>artifactId</span>&gt;fray-plugins-maven&lt;/<span>artifactId</span>&gt;
    &lt;<span>version</span>&gt;0.5.1&lt;/<span>version</span>&gt;
    &lt;<span>executions</span>&gt;
        &lt;<span>execution</span>&gt;
            &lt;<span>id</span>&gt;prepare-fray&lt;/<span>id</span>&gt;
            &lt;<span>goals</span>&gt;
                &lt;<span>goal</span>&gt;prepare-fray&lt;/<span>goal</span>&gt;
            &lt;/<span>goals</span>&gt;
        &lt;/<span>execution</span>&gt;
    &lt;/<span>executions</span>&gt;
&lt;/<span>plugin</span>&gt;</pre></div>
<ul dir="auto">
<li>Next, please add the <code>fray-junit</code> dependency</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;dependency&gt;
    &lt;groupId&gt;org.pastalab.fray&lt;/groupId&gt;
    &lt;artifactId&gt;fray-junit&lt;/artifactId&gt;
    &lt;version&gt;0.5.1&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;"><pre>&lt;<span>dependency</span>&gt;
    &lt;<span>groupId</span>&gt;org.pastalab.fray&lt;/<span>groupId</span>&gt;
    &lt;<span>artifactId</span>&gt;fray-junit&lt;/<span>artifactId</span>&gt;
    &lt;<span>version</span>&gt;0.5.1&lt;/<span>version</span>&gt;
    &lt;<span>scope</span>&gt;test&lt;/<span>scope</span>&gt;
&lt;/<span>dependency</span>&gt;</pre></div>

<ul dir="auto">
<li><a href="https://arxiv.org/abs/2501.12618" rel="nofollow">Technical Report</a></li>
<li><a href="https://crawshaw.io/cmu-pasta/fray/blob/main/docs/usage.md">Usage Guide</a></li>
<li><a href="https://crawshaw.io/cmu-pasta/fray/blob/main/docs/IDE.md">IDE Settings</a></li>
<li><a href="https://crawshaw.io/cmu-pasta/fray/blob/main/docs/bugs.md">Bugs Found by Fray and Testimonies</a></li>
</ul>

<p dir="auto">Contributions to Fray are both welcomed and appreciated! Please see our <a href="https://crawshaw.io/cmu-pasta/fray/blob/main/docs/contributing.md">contributing guide</a> for more information on how to contribute to Fray.</p>

<p dir="auto">This material is based upon work supported by the National Science Foundation under Grant No. 2120955.
Any opinions, findings, and conclusions or recommendations expressed in this material are those of the author(s)
and do not necessarily reflect the views of the National Science Foundation.</p>
<p dir="auto">The Fray project was also supported by an Amazon Research Award.</p>
</article></div></div>
  </body>
</html>
