<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buttondown.email/anmonteiro/archive/melange-hits-v10/">Original</a>
    <h1>Melange 1.0: Compile OCaml / ReasonML to JavaScript</h1>
    
    <div id="readability-page-1" class="page"><div>

                

                
                    
                        <p>Hey folks, this is a special one.</p>

<p>The Melange team and I are thrilled to announce the release of Melange 1.0 today, marking a major milestone in the life of the project. This release represents the culmination of many months of hard work and incredible collaboration.</p>
<p>Melange, which <a href="https://anmonteiro.com/2021/03/on-ocaml-and-the-js-platform/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">started as a fork of BuckleScript</a>, was created with the vision of maintaining compatibility with OCaml and providing the best OCaml experience within the modern JavaScript ecosystem. Today, we are proud to present Melange 1.0, a mature and reliable tool for compiling OCaml to efficient and readable JavaScript that teams rely on <a href="https://tech.ahrefs.com/ahrefs-is-now-built-with-melange-b14f5ec56df4?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">to deliver complex OCaml / ReasonML applications</a>.</p>
<p><a href="https://ocaml.org/p/melange/1.0.0?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Get it now</a>:</p>
<div><pre><span></span><code>$ opam install melange.1.0.0
</code></pre></div>

<h2>Highlights</h2>
<p>Melange 1.0 radically improves user experience. This release focuses on robustness, OCaml compatibility and developer experience: Melange is fully embracing the <a href="https://ocaml.org/docs/platform?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">OCaml Platform</a> to make it easy and reliable for OCaml users to target JavaScript.</p>
<h3>Dune Integration</h3>
<p>Integrating with Dune was our biggest priority. <a href="https://discuss.ocaml.org/t/ann-dune-3-8-0/12291?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Dune 3.8</a>, released very recently, adds Melange support by understanding the following types of stanzas:</p>
<div><pre><span></span><code><span>(library</span>
  <span>(modes</span> <span>melange)</span> <span>;; &lt;- new Melange mode</span>
<span>)</span>

<span>;; emit JS to `js-output` folder in this </span>
<span>;; directory</span>
<span>(melange.emit</span>
 <span>(target</span> <span>js-output))</span>
</code></pre></div>

<p>In Melange 1.0, the Dune integration is the officially supported workflow to build Melange projects. It provides robust rule generation, static assets support (your HTML / CSS / SVG / images), seamless editor integration (e.g. with OCaml LSP or Merlin).</p>
<h3>Documentation</h3>
<p>With Melange 1.0, we’re also launching a new documentation effort, <a href="https://melange.re?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">melange.re</a>. This website should currently be considered a work in progress, and we’re looking for feedback on how to best explain the Melange workflow and its available features. Feel free to get in touch in the <a href="https://github.com/melange-re/melange-re.github.io?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">OSS repository</a>.</p>
<p>Additionally, the Dune documentation includes <a href="https://dune.readthedocs.io/en/latest/melange.html?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">reference materials</a> specific to using Melange with Dune.</p>
<h3>Everything else</h3>
<h4>Wider OCaml version support</h4>
<p>Melange was previously only available on OCaml 4.14. In this release, we’ve widened that range to versions of OCaml starting from version 4.13. This includes the OCaml 5 release line and allows Melange projects to share the same OCaml compiler switch as e.g. server-side projects.</p>
<p>Editor integration is the only caveat: it only works on OCaml 4.14, since Melange emits <a href="https://ocaml.org/p/ocaml-base-compiler/4.14.1/doc/Cmt_format/index.html?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank"><code>.cmt</code> artifacts</a> (used by e.g. LSP) targeting the OCaml 4.14 binary format.</p>
<h4>Multiple syntaxes</h4>
<p>Dune supports <a href="https://reasonml.github.io/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">ReasonML</a> out of the box via <a href="https://dune.readthedocs.io/en/stable/overview.html?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10#term-dialect" target="_blank">dialects</a>, keeping ReasonML support in Melange unchanged from a user perspective. Internally, however, Melange 1.0 has dropped any knowledge of ReasonML, relying on the existing, battle-tested Dune support for dialects instead.</p>
<p>A <a href="https://ocaml.org/p/rescript-syntax/1.0.0?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank"><code>rescript-syntax</code></a> package is part of the Melange release too. It enables support for ReScript syntax in Melange, which Dune also supports. Keep in mind, however, that newer ReScript features are unlikely to be supported by this best-effort compatibility package.</p>
<h4>Separate PPX</h4>
<p>A big benefit of deep integration with the OCaml platform is having the freedom to assume that a native toolchain is present. That made it possible to unbundle the Melange distribution into a few separate components.</p>
<p>Melange now ships with a <code>melange.ppx</code> preprocessor based on <a href="https://ocaml-ppx.github.io/ppxlib?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Ppxlib</a> that can be added to <code>(preprocess (pps melange.ppx))</code>, as per <a href="https://dune.readthedocs.io/en/stable/reference/preprocessing-spec.html?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Dune’s preprocessing specification</a>.</p>
<p>The React JS PPX (for Reason + JSX) has also been extracted and is now distributed separately as <a href="https://ocaml.org/p/reactjs-jsx-ppx/1.0.0?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank"><code>reactjs-jsx-ppx</code></a>.</p>
<h4>Enabling modern JS workflows</h4>
<p>The Melange design in Dune was designed from day one with the goal of  embracing the JavaScript platform:</p>
<ul>
<li>The Dune integration generates JavaScript files in a predictable way<ul>
<li>The resulting layout works well with the Node.js <a href="https://nodejs.org/api/modules.html?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10#all-together" target="_blank">module resolution algorithm</a>, which most bundlers understand.</li>
<li>The JS output layout is <a href="https://melange.re/v1.0.0/build-system/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10#javascript-artifacts-layout" target="_blank">documented here</a>.</li>
</ul>
</li>
<li>To exercise modern workflows, Melange has been tested in a <a href="https://nextjs.org/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Next.js</a> application using <a href="https://react.dev/blog/2020/12/21/data-fetching-with-react-server-components?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">React Server Components</a>, and the available constructs were deemed sufficient to enable similar use cases.</li>
</ul>
<h4>Full list of changes:</h4>
<p>The full list of changes can be consulted <a href="https://github.com/melange-re/melange/blob/main/Changes.md?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">here</a>.</p>
<h2>Support &amp; Sponsorship</h2>
<p>The effort that went into this release would not have been possible without the support of many.</p>
<p>We’d like to thank everyone who made it possible:</p>
<ul>
<li><a href="https://ahrefs.com/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Ahrefs</a> has shown interest in Melange <a href="https://tech.ahrefs.com/building-ahrefs-codebase-with-melange-9f881f6d022b?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">since its first announcement</a>. Since October 2022, Ahrefs’s crucial sponsorship has made it possible to <a href="https://tech.ahrefs.com/ahrefs-is-now-built-with-melange-b14f5ec56df4?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">build its codebase with Melange</a> and work on this release.</li>
<li><a href="https://www.qwick.com/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Qwick</a>, who has been running Melange since November 2022, providing invaluable feedback, financial backing and an open-minded team willing to try new directions.</li>
<li>
<p>The <a href="https://ocaml-sf.org/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">OCaml Software Foundation</a> previously <a href="https://twitter.com/_anmonteiro/status/1589044352479035393?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">committed funding</a> for the Melange project in October 2022, and has recently approved a new round of OSS sponsorship.</p>
</li>
<li>
<p><a href="https://github.com/sponsors/anmonteiro/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">My (Antonio) sponsors</a> on GitHub, both past and present</p>
</li>
</ul>
<p>We’d also like to thank the following notable contributors to this release:</p>
<ul>
<li><a href="https://github.com/rgrinberg?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Rudi Grinberg</a>, for his indispensable guidance and direction on the design and implementation of the Dune integration.</li>
<li><a href="https://github.com/jchavarri?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Javier Chávarri</a>, for migrating a huge production codebase at Ahrefs to Melange, working on the Dune integration, the Melange documentation effort and providing vital feedback to the project.</li>
<li><a href="https://github.com/davesnx?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">David Sancho</a>, for trying out our most bleeding edge ideas and providing early feedback on how to move forward with ways that encompass the whole ecosystem.</li>
</ul>
<h2>Looking Forward</h2>
<p>We are enthusiastic about the progress we have made and the positive feedback we have received from the community. We remain committed to continuously improving Melange, ensuring it remains a robust and efficient tool for OCaml developers targeting the JavaScript platform.</p>
<p>Our <a href="https://docs.google.com/document/d/1279euT9LeJIkwAUYqazqeh2lc8c7TLQap2_2vBNcK4w/?utm_source=anmonteiro&amp;utm_medium=email&amp;utm_campaign=melange-hits-v10" target="_blank">Q2 2023 roadmap</a> includes most of the goals that we set out to achieve over the past few months, and some of what we’re thinking about working in the months ahead. Melange 1.0 only marks the beginning of our journey towards the best OCaml experience on the JS platform.</p>
<p>Finally, we would like to extend our deepest thanks to everyone who has supported the project, whether through code contributions, testing, or providing feedback. This is your achievement as much as it is ours, and we look forward to continuing this journey together.</p>
<p>Thank you,</p>
<p>Antonio &amp; The Melange Team</p>
<p>P.S.: If you are interested in trying out Melange, feel free to reply to this email. I’d love to hear from you!</p>
                    
                

                
            </div></div>
  </body>
</html>
