<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/hughperkins/VeriGPU">Original</a>
    <h1>VeriGPU: GPU in Verilog loosely based on RISC-V ISA</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p data-sourcepos="3:1-3:224" dir="auto">Build an opensource GPU, targeting ASIC tape-out, for <a href="https://en.wikipedia.org/wiki/Machine_learning" rel="nofollow">machine learning</a>  (&#34;ML&#34;). Hopefully, can get it to work with the <a href="https://pytorch.org" rel="nofollow">PyTorch</a> deep learning framework.</p>

<p data-sourcepos="7:1-7:46" dir="auto">Create an opensource GPU for machine learning.</p>
<p data-sourcepos="9:1-9:142" dir="auto">I don&#39;t actually intend to tape this out myself, but I intend to do what I can to verify somehow that tape-out would work ok, timings ok, etc.</p>
<p data-sourcepos="11:1-11:305" dir="auto">Intend to implement a <a href="https://github.com/ROCm-Developer-Tools/HIP">HIP</a> API, that is compatible with <a href="https://pytorch.org" rel="nofollow">pytorch</a> machine learning framework. Open to provision of other APIs, such as <a href="https://www.khronos.org/sycl/" rel="nofollow">SYCL</a> or <a href="https://developer.nvidia.com/cuda-toolkit" rel="nofollow">NVIDIA® CUDA™</a>.</p>
<p data-sourcepos="13:1-13:182" dir="auto">Internal GPU Core ISA loosely compliant with <a href="https://riscv.org/technical/specifications/" rel="nofollow">RISC-V</a> ISA. Where RISC-V conflicts with designing for a GPU setting, we break with RISC-V.</p>
<p data-sourcepos="15:1-15:341" dir="auto">Intend to keep the cores very focused on ML. For example, <a href="https://en.wikipedia.org/wiki/Bfloat16_floating-point_format" rel="nofollow">brain floating point</a> (&#34;BF16&#34;) throughout, to keep core die area low. This should keep the per-core cost low. Similarly, Intend to implement only few float operations critical to ML, such as <code>exp</code>, <code>log</code>, <code>tanh</code>, <code>sqrt</code>.</p>

<p data-sourcepos="19:1-19:12" dir="auto">Big Picture:</p>
<p data-sourcepos="21:1-21:36" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/overall.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/overall.png" alt="Big Picture"/></a></p>
<p data-sourcepos="23:1-23:21" dir="auto">GPU Die Architecture:</p>
<p data-sourcepos="25:1-25:46" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/gpu_die.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/gpu_die.png" alt="GPU Die Architecture"/></a></p>
<p data-sourcepos="27:1-27:12" dir="auto">Single Core:</p>
<p data-sourcepos="29:1-29:34" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/core.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/core.png" alt="Single Core"/></a></p>
<p data-sourcepos="31:1-31:37" dir="auto">Single-source compilation and runtime</p>
<p data-sourcepos="33:1-33:50" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/endtoend.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/endtoend.png" alt="End-to-end Architecture"/></a></p>



<h2 data-sourcepos="41:1-41:20" dir="auto"><a id="user-content-single-source-c" aria-hidden="true" href="#single-source-c"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Single-source C++</h2>
<p data-sourcepos="43:1-43:18" dir="auto">Single-source C++:</p>
<ul data-sourcepos="45:1-46:0" dir="auto">
<li data-sourcepos="45:1-46:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/examples/cpp_single_source/sum_ints.cpp">examples/cpp_single_source/sum_ints.cpp</a></li>
</ul>
<p data-sourcepos="47:1-47:54" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/single_source_code.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/single_source_code.png" alt="Single-source C++"/></a></p>
<p data-sourcepos="49:1-49:28" dir="auto">Compile the GPU and runtime:</p>
<ul data-sourcepos="51:1-55:0" dir="auto">
<li data-sourcepos="51:1-51:83">CMakeLists.txt: <a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/src/gpu_runtime/CMakeLists.txt">src/gpu_runtime/CMakeLists.txt</a></li>
<li data-sourcepos="52:1-52:82">GPU runtime: <a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/src/gpu_runtime/gpu_runtime.cpp">src/gpu_runtime/gpu_runtime.cpp</a></li>
<li data-sourcepos="53:1-53:65">GPU controller: <a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/src/gpu_controller.sv">src/gpu_controller.sv</a></li>
<li data-sourcepos="54:1-55:0">Single GPU RISC-V core: <a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/src/core.sv">src/core.sv</a></li>
</ul>
<p data-sourcepos="56:1-56:65" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/compile_gpu_and_runtime.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/compile_gpu_and_runtime.png" alt="Compile GPU and runtime"/></a></p>
<p data-sourcepos="58:1-58:39" dir="auto">Compile the single-source C++, and run:</p>
<ul data-sourcepos="60:1-61:0" dir="auto">
<li data-sourcepos="60:1-61:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/examples/cpp_single_source/run.sh">examples/cpp_single_source/run.sh sum_ints</a></li>
</ul>
<p data-sourcepos="62:1-62:61" dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/img/single_source_run.png"><img src="https://thewitchofendor.com/hughperkins/VeriGPU/raw/main/docs/img/single_source_run.png" alt="Run single-source example"/></a></p>

<p data-sourcepos="66:1-66:68" dir="auto">What direction are we thinking of going in? What works already? See:</p>
<ul data-sourcepos="68:1-69:0" dir="auto">
<li data-sourcepos="68:1-69:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/planning.md">docs/planning.md</a></li>
</ul>

<p data-sourcepos="72:1-72:99" dir="auto">Our assembly language implementation and progress. Design of GPU memory, registers, and so on. See:</p>
<ul data-sourcepos="74:1-75:0" dir="auto">
<li data-sourcepos="74:1-75:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/tech_details.md">docs/tech_details.md</a></li>
</ul>

<p data-sourcepos="78:1-78:65" dir="auto">If we want to tape-out, we need solid verification. Read more at:</p>
<ul data-sourcepos="80:1-81:0" dir="auto">
<li data-sourcepos="80:1-81:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/verification.md">docs/verification.md</a></li>
</ul>

<p data-sourcepos="84:1-84:101" dir="auto">we want the GPU to run quickly, and to use minimal die area. Read how we measure timings and area at:</p>
<ul data-sourcepos="86:1-87:0" dir="auto">
<li data-sourcepos="86:1-87:0"><a href="https://thewitchofendor.com/hughperkins/VeriGPU/blob/main/docs/metrics.md">docs/metrics.md</a></li>
</ul>



</article>
          </div></div>
  </body>
</html>
