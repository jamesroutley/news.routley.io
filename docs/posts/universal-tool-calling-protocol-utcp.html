<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/universal-tool-calling-protocol/python-utcp">Original</a>
    <h1>Universal Tool Calling Protocol (UTCP)</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/universal-tool-calling-protocol"><img src="https://camo.githubusercontent.com/76debb4991ca7d7b53b3c5ac23d04de2e2e26234287779502e4c039af986de21/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f666f6c6c6f776572732f756e6976657273616c2d746f6f6c2d63616c6c696e672d70726f746f636f6c3f6c6162656c3d466f6c6c6f772532304f7267266c6f676f3d676974687562" alt="Follow Org" data-canonical-src="https://img.shields.io/github/followers/universal-tool-calling-protocol?label=Follow%20Org&amp;logo=github"/></a>
<a href="https://pepy.tech/projects/utcp" rel="nofollow"><img src="https://camo.githubusercontent.com/d0e1f6d56b2f6788d2b90ee35d9830e8700833d5dd30709f93a4e8ca538ed290/68747470733a2f2f7374617469632e706570792e746563682f62616467652f75746370" alt="PyPI Downloads" data-canonical-src="https://static.pepy.tech/badge/utcp"/></a>
<a href="https://github.com/universal-tool-calling-protocol/python-utcp/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/522f2e2474366d0a017b8bcbbfd1546e9037565a1d8983d5794c55344328fb81/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f756e6976657273616c2d746f6f6c2d63616c6c696e672d70726f746f636f6c2f707974686f6e2d75746370" alt="License" data-canonical-src="https://img.shields.io/github/license/universal-tool-calling-protocol/python-utcp"/></a>
<a href="https://cdtm.com/" rel="nofollow"><img src="https://camo.githubusercontent.com/1174d25d83235b82bf662e374fe0874f2c67edb581d742ac94a1ff43fdc32235/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4344544d2d5332332d306238346633" alt="CDTM S23" data-canonical-src="https://img.shields.io/badge/CDTM-S23-0b84f3"/></a></p>

<p dir="auto">The Universal Tool Calling Protocol (UTCP) is a modern, flexible, and scalable standard for defining and interacting with tools across a wide variety of communication protocols. UTCP 1.0.0 introduces a modular core with a plugin-based architecture, making it more extensible, testable, and easier to package.</p>
<p dir="auto">In contrast to other protocols, UTCP places a strong emphasis on:</p>
<ul dir="auto">
<li><strong>Scalability</strong>: UTCP is designed to handle a large number of tools and providers without compromising performance.</li>
<li><strong>Extensibility</strong>: A pluggable architecture allows developers to easily add new communication protocols, tool storage mechanisms, and search strategies without modifying the core library.</li>
<li><strong>Interoperability</strong>: With a growing ecosystem of protocol plugins (including HTTP, SSE, CLI, and more), UTCP can integrate with almost any existing service or infrastructure.</li>
<li><strong>Ease of Use</strong>: The protocol is built on simple, well-defined Pydantic models, making it easy for developers to implement and use.</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/69489757/468638952-3cadfc19-8eea-4467-b606-66e580b89444.gif?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTU3ODYyODIsIm5iZiI6MTc1NTc4NTk4MiwicGF0aCI6Ii82OTQ4OTc1Ny80Njg2Mzg5NTItM2NhZGZjMTktOGVlYS00NDY3LWI2MDYtNjZlNTgwYjg5NDQ0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA4MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwODIxVDE0MTk0MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNiZGY1ZjgyMDdkYzczNzg2NTM1NTc3ZjMwNjdjNmNjN2M2OGE4ZmM2YzIyNWQ4NjY5OWMxMzczODczZmY3MjgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.-5l_WUyRvzKecggWnO25zv_LerBjwVn3RKSo_uCtR_E"><img src="https://private-user-images.githubusercontent.com/69489757/468638952-3cadfc19-8eea-4467-b606-66e580b89444.gif?jwt=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NTU3ODYyODIsIm5iZiI6MTc1NTc4NTk4MiwicGF0aCI6Ii82OTQ4OTc1Ny80Njg2Mzg5NTItM2NhZGZjMTktOGVlYS00NDY3LWI2MDYtNjZlNTgwYjg5NDQ0LmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA4MjElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwODIxVDE0MTk0MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWNiZGY1ZjgyMDdkYzczNzg2NTM1NTc3ZjMwNjdjNmNjN2M2OGE4ZmM2YzIyNWQ4NjY5OWMxMzczODczZmY3MjgmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.-5l_WUyRvzKecggWnO25zv_LerBjwVn3RKSo_uCtR_E" alt="MCP vs. UTCP" data-animated-image=""/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">New Architecture in 1.0.0</h2><a id="user-content-new-architecture-in-100" aria-label="Permalink: New Architecture in 1.0.0" href="#new-architecture-in-100"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">UTCP has been refactored into a core library and a set of optional plugins.</p>

<p dir="auto">The <code>utcp</code> package provides the central components and interfaces:</p>
<ul dir="auto">
<li><strong>Data Models</strong>: Pydantic models for <code>Tool</code>, <code>CallTemplate</code>, <code>UtcpManual</code>, and <code>Auth</code>.</li>
<li><strong>Pluggable Interfaces</strong>:
<ul dir="auto">
<li><code>CommunicationProtocol</code>: Defines the contract for protocol-specific communication (e.g., HTTP, CLI).</li>
<li><code>ConcurrentToolRepository</code>: An interface for storing and retrieving tools with thread-safe access.</li>
<li><code>ToolSearchStrategy</code>: An interface for implementing tool search algorithms.</li>
<li><code>VariableSubstitutor</code>: Handles variable substitution in configurations.</li>
<li><code>ToolPostProcessor</code>: Allows for modifying tool results before they are returned.</li>
</ul>
</li>
<li><strong>Default Implementations</strong>:
<ul dir="auto">
<li><code>UtcpClient</code>: The main client for interacting with the UTCP ecosystem.</li>
<li><code>InMemToolRepository</code>: An in-memory tool repository with asynchronous read-write locks.</li>
<li><code>TagAndDescriptionWordMatchStrategy</code>: An improved search strategy that matches on tags and description keywords.</li>
</ul>
</li>
</ul>

<p dir="auto">Communication protocols are now separate, installable packages. This keeps the core lean and allows users to install only the protocols they need.</p>
<ul dir="auto">
<li><code>utcp-http</code>: Supports HTTP, SSE, and streamable HTTP, plus an OpenAPI converter.</li>
<li><code>utcp-cli</code>: For wrapping local command-line tools.</li>
<li><code>utcp-mcp</code>: For interoperability with the Model Context Protocol (MCP).</li>
<li><code>utcp-text</code>: For reading text files.</li>
<li><code>utcp-socket</code>: Scaffolding for TCP and UDP protocols. (Work in progress, requires update)</li>
<li><code>utcp-gql</code>: Scaffolding for GraphQL. (Work in progress, requires update)</li>
</ul>

<p dir="auto">Install the core library and any required protocol plugins.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Install the core client and the HTTP plugin
pip install utcp utcp-http

# Install the CLI plugin as well
pip install utcp-cli"><pre><span><span>#</span> Install the core client and the HTTP plugin</span>
pip install utcp utcp-http

<span><span>#</span> Install the CLI plugin as well</span>
pip install utcp-cli</pre></div>
<p dir="auto">For development, you can install the packages in editable mode from the cloned repository:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Clone the repository
git clone https://github.com/universal-tool-calling-protocol/python-utcp.git
cd python-utcp

# Install the core package in editable mode with dev dependencies
pip install -e core[dev]

# Install a specific protocol plugin in editable mode
pip install -e plugins/communication_protocols/http"><pre><span><span>#</span> Clone the repository</span>
git clone https://github.com/universal-tool-calling-protocol/python-utcp.git
<span>cd</span> python-utcp

<span><span>#</span> Install the core package in editable mode with dev dependencies</span>
pip install -e core[dev]

<span><span>#</span> Install a specific protocol plugin in editable mode</span>
pip install -e plugins/communication_protocols/http</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Migration Guide from 0.x to 1.0.0</h2><a id="user-content-migration-guide-from-0x-to-100" aria-label="Permalink: Migration Guide from 0.x to 1.0.0" href="#migration-guide-from-0x-to-100"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Version 1.0.0 introduces several breaking changes. Follow these steps to migrate your project.</p>
<ol dir="auto">
<li><strong>Update Dependencies</strong>: Install the new <code>utcp</code> core package and the specific protocol plugins you use (e.g., <code>utcp-http</code>, <code>utcp-cli</code>).</li>
<li><strong>Configuration</strong>:
<ul dir="auto">
<li><strong>Configuration Object</strong>: <code>UtcpClient</code> is initialized with a <code>UtcpClientConfig</code> object, dict or a path to a JSON file containing the configuration.</li>
<li><strong>Manual Call Templates</strong>: The <code>providers_file_path</code> option is removed. Instead of a file path, you now provide a list of <code>manual_call_templates</code> directly within the <code>UtcpClientConfig</code>.</li>
<li><strong>Terminology</strong>: The term <code>provider</code> has been replaced with <code>call_template</code>, and <code>provider_type</code> is now <code>call_template_type</code>.</li>
<li><strong>Streamable HTTP</strong>: The <code>call_template_type</code> <code>http_stream</code> has been renamed to <code>streamable_http</code>.</li>
</ul>
</li>
<li><strong>Update Imports</strong>: Change your imports to reflect the new modular structure. For example, <code>from utcp.client.transport_interfaces.http_transport import HttpProvider</code> becomes <code>from utcp_http.http_call_template import HttpCallTemplate</code>.</li>
<li><strong>Tool Search</strong>: If you were using the default search, the new strategy is <code>TagAndDescriptionWordMatchStrategy</code>. This is the new default and requires no changes unless you were implementing a custom strategy.</li>
<li><strong>Tool Naming</strong>: Tool names are now namespaced as <code>manual_name.tool_name</code>. The client handles this automatically.
6   <strong>Variable Substitution Namespacing</strong>: Variables that are subsituted in different <code>call_templates</code>, are first namespaced with the name of the manual with the <code>_</code> duplicated. So a key in a tool call template called <code>API_KEY</code> from the manual <code>manual_1</code> would be converted to <code>manual__1_API_KEY</code>.</li>
</ol>


<p dir="auto"><strong><code>config.json</code></strong> (Optional)</p>
<p dir="auto">You can define a comprehensive client configuration in a JSON file. All of these fields are optional.</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;variables&#34;: {
    &#34;openlibrary_URL&#34;: &#34;https://openlibrary.org/static/openapi.json&#34;
  },
  &#34;load_variables_from&#34;: [
    {
      &#34;variable_loader_type&#34;: &#34;dotenv&#34;,
      &#34;env_file_path&#34;: &#34;.env&#34;
    }
  ],
  &#34;tool_repository&#34;: {
    &#34;tool_repository_type&#34;: &#34;in_memory&#34;
  },
  &#34;tool_search_strategy&#34;: {
    &#34;tool_search_strategy_type&#34;: &#34;tag_and_description_word_match&#34;
  },
  &#34;manual_call_templates&#34;: [
    {
        &#34;name&#34;: &#34;openlibrary&#34;,
        &#34;call_template_type&#34;: &#34;http&#34;,
        &#34;http_method&#34;: &#34;GET&#34;,
        &#34;url&#34;: &#34;${URL}&#34;,
        &#34;content_type&#34;: &#34;application/json&#34;
    },
  ],
  &#34;post_processing&#34;: [
    {
        &#34;tool_post_processor_type&#34;: &#34;filter_dict&#34;,
        &#34;only_include_keys&#34;: [&#34;name&#34;, &#34;key&#34;],
        &#34;only_include_tools&#34;: [&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;]
    }
  ]
}"><pre>{
  <span>&#34;variables&#34;</span>: {
    <span>&#34;openlibrary_URL&#34;</span>: <span><span>&#34;</span>https://openlibrary.org/static/openapi.json<span>&#34;</span></span>
  },
  <span>&#34;load_variables_from&#34;</span>: [
    {
      <span>&#34;variable_loader_type&#34;</span>: <span><span>&#34;</span>dotenv<span>&#34;</span></span>,
      <span>&#34;env_file_path&#34;</span>: <span><span>&#34;</span>.env<span>&#34;</span></span>
    }
  ],
  <span>&#34;tool_repository&#34;</span>: {
    <span>&#34;tool_repository_type&#34;</span>: <span><span>&#34;</span>in_memory<span>&#34;</span></span>
  },
  <span>&#34;tool_search_strategy&#34;</span>: {
    <span>&#34;tool_search_strategy_type&#34;</span>: <span><span>&#34;</span>tag_and_description_word_match<span>&#34;</span></span>
  },
  <span>&#34;manual_call_templates&#34;</span>: [
    {
        <span>&#34;name&#34;</span>: <span><span>&#34;</span>openlibrary<span>&#34;</span></span>,
        <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>http<span>&#34;</span></span>,
        <span>&#34;http_method&#34;</span>: <span><span>&#34;</span>GET<span>&#34;</span></span>,
        <span>&#34;url&#34;</span>: <span><span>&#34;</span>${URL}<span>&#34;</span></span>,
        <span>&#34;content_type&#34;</span>: <span><span>&#34;</span>application/json<span>&#34;</span></span>
    },
  ],
  <span>&#34;post_processing&#34;</span>: [
    {
        <span>&#34;tool_post_processor_type&#34;</span>: <span><span>&#34;</span>filter_dict<span>&#34;</span></span>,
        <span>&#34;only_include_keys&#34;</span>: [<span><span>&#34;</span>name<span>&#34;</span></span>, <span><span>&#34;</span>key<span>&#34;</span></span>],
        <span>&#34;only_include_tools&#34;</span>: [<span><span>&#34;</span>openlibrary.read_search_authors_json_search_authors_json_get<span>&#34;</span></span>]
    }
  ]
}</pre></div>
<p dir="auto"><strong><code>client.py</code></strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="import asyncio
from utcp.utcp_client import UtcpClient
from utcp.data.utcp_client_config import UtcpClientConfig

async def main():
    # The UtcpClient can be created with a config file path, a dict, or a UtcpClientConfig object.

    # Option 1: Initialize from a config file path
    # client_from_file = await UtcpClient.create(config=&#34;./config.json&#34;)

    # Option 2: Initialize from a dictionary
    client_from_dict = await UtcpClient.create(config={
        &#34;variables&#34;: {
            &#34;openlibrary_URL&#34;: &#34;https://openlibrary.org/static/openapi.json&#34;
        },
        &#34;load_variables_from&#34;: [
            {
                &#34;variable_loader_type&#34;: &#34;dotenv&#34;,
                &#34;env_file_path&#34;: &#34;.env&#34;
            }
        ],
        &#34;tool_repository&#34;: {
            &#34;tool_repository_type&#34;: &#34;in_memory&#34;
        },
        &#34;tool_search_strategy&#34;: {
            &#34;tool_search_strategy_type&#34;: &#34;tag_and_description_word_match&#34;
        },
        &#34;manual_call_templates&#34;: [
            {
                &#34;name&#34;: &#34;openlibrary&#34;,
                &#34;call_template_type&#34;: &#34;http&#34;,
                &#34;http_method&#34;: &#34;GET&#34;,
                &#34;url&#34;: &#34;${URL}&#34;,
                &#34;content_type&#34;: &#34;application/json&#34;
            }
        ],
        &#34;post_processing&#34;: [
            {
                &#34;tool_post_processor_type&#34;: &#34;filter_dict&#34;,
                &#34;only_include_keys&#34;: [&#34;name&#34;, &#34;key&#34;],
                &#34;only_include_tools&#34;: [&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;]
            }
        ]
    })

    # Option 3: Initialize with a full-featured UtcpClientConfig object
    from utcp_http.http_call_template import HttpCallTemplate
    from utcp.data.variable_loader import VariableLoaderSerializer
    from utcp.interfaces.tool_post_processor import ToolPostProcessorConfigSerializer

    config_obj = UtcpClientConfig(
        variables={&#34;openlibrary_URL&#34;: &#34;https://openlibrary.org/static/openapi.json&#34;},
        load_variables_from=[
            VariableLoaderSerializer().validate_dict({
                &#34;variable_loader_type&#34;: &#34;dotenv&#34;, &#34;env_file_path&#34;: &#34;.env&#34;
            })
        ],
        manual_call_templates=[
            HttpCallTemplate(
                name=&#34;openlibrary&#34;,
                call_template_type=&#34;http&#34;,
                http_method=&#34;GET&#34;,
                url=&#34;${URL}&#34;,
                content_type=&#34;application/json&#34;
            )
        ],
        post_processing=[
            ToolPostProcessorConfigSerializer().validate_dict({
                &#34;tool_post_processor_type&#34;: &#34;filter_dict&#34;,
                &#34;only_include_keys&#34;: [&#34;name&#34;, &#34;key&#34;],
                &#34;only_include_tools&#34;: [&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;]
            })
        ]
    )
    client = await UtcpClient.create(config=config_obj)

    # Call a tool. The name is namespaced: `manual_name.tool_name`
    result = await client.call_tool(
        tool_name=&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;,
        tool_args={&#34;q&#34;: &#34;J. K. Rowling&#34;}
    )

    print(result)

if __name__ == &#34;__main__&#34;:
    asyncio.run(main())"><pre><span>import</span> <span>asyncio</span>
<span>from</span> <span>utcp</span>.<span>utcp_client</span> <span>import</span> <span>UtcpClient</span>
<span>from</span> <span>utcp</span>.<span>data</span>.<span>utcp_client_config</span> <span>import</span> <span>UtcpClientConfig</span>

<span>async</span> <span>def</span> <span>main</span>():
    <span># The UtcpClient can be created with a config file path, a dict, or a UtcpClientConfig object.</span>

    <span># Option 1: Initialize from a config file path</span>
    <span># client_from_file = await UtcpClient.create(config=&#34;./config.json&#34;)</span>

    <span># Option 2: Initialize from a dictionary</span>
    <span>client_from_dict</span> <span>=</span> <span>await</span> <span>UtcpClient</span>.<span>create</span>(<span>config</span><span>=</span>{
        <span>&#34;variables&#34;</span>: {
            <span>&#34;openlibrary_URL&#34;</span>: <span>&#34;https://openlibrary.org/static/openapi.json&#34;</span>
        },
        <span>&#34;load_variables_from&#34;</span>: [
            {
                <span>&#34;variable_loader_type&#34;</span>: <span>&#34;dotenv&#34;</span>,
                <span>&#34;env_file_path&#34;</span>: <span>&#34;.env&#34;</span>
            }
        ],
        <span>&#34;tool_repository&#34;</span>: {
            <span>&#34;tool_repository_type&#34;</span>: <span>&#34;in_memory&#34;</span>
        },
        <span>&#34;tool_search_strategy&#34;</span>: {
            <span>&#34;tool_search_strategy_type&#34;</span>: <span>&#34;tag_and_description_word_match&#34;</span>
        },
        <span>&#34;manual_call_templates&#34;</span>: [
            {
                <span>&#34;name&#34;</span>: <span>&#34;openlibrary&#34;</span>,
                <span>&#34;call_template_type&#34;</span>: <span>&#34;http&#34;</span>,
                <span>&#34;http_method&#34;</span>: <span>&#34;GET&#34;</span>,
                <span>&#34;url&#34;</span>: <span>&#34;${URL}&#34;</span>,
                <span>&#34;content_type&#34;</span>: <span>&#34;application/json&#34;</span>
            }
        ],
        <span>&#34;post_processing&#34;</span>: [
            {
                <span>&#34;tool_post_processor_type&#34;</span>: <span>&#34;filter_dict&#34;</span>,
                <span>&#34;only_include_keys&#34;</span>: [<span>&#34;name&#34;</span>, <span>&#34;key&#34;</span>],
                <span>&#34;only_include_tools&#34;</span>: [<span>&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;</span>]
            }
        ]
    })

    <span># Option 3: Initialize with a full-featured UtcpClientConfig object</span>
    <span>from</span> <span>utcp_http</span>.<span>http_call_template</span> <span>import</span> <span>HttpCallTemplate</span>
    <span>from</span> <span>utcp</span>.<span>data</span>.<span>variable_loader</span> <span>import</span> <span>VariableLoaderSerializer</span>
    <span>from</span> <span>utcp</span>.<span>interfaces</span>.<span>tool_post_processor</span> <span>import</span> <span>ToolPostProcessorConfigSerializer</span>

    <span>config_obj</span> <span>=</span> <span>UtcpClientConfig</span>(
        <span>variables</span><span>=</span>{<span>&#34;openlibrary_URL&#34;</span>: <span>&#34;https://openlibrary.org/static/openapi.json&#34;</span>},
        <span>load_variables_from</span><span>=</span>[
            <span>VariableLoaderSerializer</span>().<span>validate_dict</span>({
                <span>&#34;variable_loader_type&#34;</span>: <span>&#34;dotenv&#34;</span>, <span>&#34;env_file_path&#34;</span>: <span>&#34;.env&#34;</span>
            })
        ],
        <span>manual_call_templates</span><span>=</span>[
            <span>HttpCallTemplate</span>(
                <span>name</span><span>=</span><span>&#34;openlibrary&#34;</span>,
                <span>call_template_type</span><span>=</span><span>&#34;http&#34;</span>,
                <span>http_method</span><span>=</span><span>&#34;GET&#34;</span>,
                <span>url</span><span>=</span><span>&#34;${URL}&#34;</span>,
                <span>content_type</span><span>=</span><span>&#34;application/json&#34;</span>
            )
        ],
        <span>post_processing</span><span>=</span>[
            <span>ToolPostProcessorConfigSerializer</span>().<span>validate_dict</span>({
                <span>&#34;tool_post_processor_type&#34;</span>: <span>&#34;filter_dict&#34;</span>,
                <span>&#34;only_include_keys&#34;</span>: [<span>&#34;name&#34;</span>, <span>&#34;key&#34;</span>],
                <span>&#34;only_include_tools&#34;</span>: [<span>&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;</span>]
            })
        ]
    )
    <span>client</span> <span>=</span> <span>await</span> <span>UtcpClient</span>.<span>create</span>(<span>config</span><span>=</span><span>config_obj</span>)

    <span># Call a tool. The name is namespaced: `manual_name.tool_name`</span>
    <span>result</span> <span>=</span> <span>await</span> <span>client</span>.<span>call_tool</span>(
        <span>tool_name</span><span>=</span><span>&#34;openlibrary.read_search_authors_json_search_authors_json_get&#34;</span>,
        <span>tool_args</span><span>=</span>{<span>&#34;q&#34;</span>: <span>&#34;J. K. Rowling&#34;</span>}
    )

    <span>print</span>(<span>result</span>)

<span>if</span> <span>__name__</span> <span>==</span> <span>&#34;__main__&#34;</span>:
    <span>asyncio</span>.<span>run</span>(<span>main</span>())</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">2. Providing a UTCP Manual</h3><a id="user-content-2-providing-a-utcp-manual" aria-label="Permalink: 2. Providing a UTCP Manual" href="#2-providing-a-utcp-manual"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A <code>UTCPManual</code> describes the tools you offer. The key change is replacing <code>tool_provider</code> with <code>call_template</code>.</p>
<p dir="auto"><strong><code>server.py</code></strong></p>
<p dir="auto">UTCP decorator version:</p>
<div dir="auto" data-snippet-clipboard-copy-content="from fastapi import FastAPI
from utcp_http.http_call_template import HttpCallTemplate
from utcp.data.utcp_manual import UtcpManual
from utcp.python_specific_tooling.tool_decorator import utcp_tool

app = FastAPI()

# The discovery endpoint returns the tool manual
@app.get(&#34;/utcp&#34;)
def utcp_discovery():
    return UtcpManual.create_from_decorators(manual_version=&#34;1.0.0&#34;)

# The actual tool endpoint
@utcp_tool(tool_call_template=HttpCallTemplate(
    name=&#34;get_weather&#34;,
    url=f&#34;https://example.com/api/weather&#34;,
    http_method=&#34;GET&#34;
), tags=[&#34;weather&#34;])
@app.get(&#34;/api/weather&#34;)
def get_weather(location: str):
    return {&#34;temperature&#34;: 22.5, &#34;conditions&#34;: &#34;Sunny&#34;}"><pre><span>from</span> <span>fastapi</span> <span>import</span> <span>FastAPI</span>
<span>from</span> <span>utcp_http</span>.<span>http_call_template</span> <span>import</span> <span>HttpCallTemplate</span>
<span>from</span> <span>utcp</span>.<span>data</span>.<span>utcp_manual</span> <span>import</span> <span>UtcpManual</span>
<span>from</span> <span>utcp</span>.<span>python_specific_tooling</span>.<span>tool_decorator</span> <span>import</span> <span>utcp_tool</span>

<span>app</span> <span>=</span> <span>FastAPI</span>()

<span># The discovery endpoint returns the tool manual</span>
<span>@<span>app</span>.<span>get</span>(<span>&#34;/utcp&#34;</span>)</span>
<span>def</span> <span>utcp_discovery</span>():
    <span>return</span> <span>UtcpManual</span>.<span>create_from_decorators</span>(<span>manual_version</span><span>=</span><span>&#34;1.0.0&#34;</span>)

<span># The actual tool endpoint</span>
<span>@<span>utcp_tool</span>(<span>tool_call_template</span><span>=</span><span>HttpCallTemplate</span>(</span>
<span>    <span>name</span><span>=</span><span>&#34;get_weather&#34;</span>,</span>
<span>    <span>url</span><span>=</span><span>f&#34;https://example.com/api/weather&#34;</span>,</span>
<span>    <span>http_method</span><span>=</span><span>&#34;GET&#34;</span></span>
<span>), <span>tags</span><span>=</span>[<span>&#34;weather&#34;</span>])</span>
<span>@<span>app</span>.<span>get</span>(<span>&#34;/api/weather&#34;</span>)</span>
<span>def</span> <span>get_weather</span>(<span>location</span>: <span>str</span>):
    <span>return</span> {<span>&#34;temperature&#34;</span>: <span>22.5</span>, <span>&#34;conditions&#34;</span>: <span>&#34;Sunny&#34;</span>}</pre></div>
<p dir="auto">No UTCP dependencies server version:</p>
<div dir="auto" data-snippet-clipboard-copy-content="from fastapi import FastAPI

app = FastAPI()

# The discovery endpoint returns the tool manual
@app.get(&#34;/utcp&#34;)
def utcp_discovery():
    return {
        &#34;manual_version&#34;: &#34;1.0.0&#34;,
        &#34;utcp_version&#34;: &#34;1.0.1&#34;,
        &#34;tools&#34;: [
            {
                &#34;name&#34;: &#34;get_weather&#34;,
                &#34;description&#34;: &#34;Get current weather for a location&#34;,
                &#34;tags&#34;: [&#34;weather&#34;],
                &#34;inputs&#34;: {
                    &#34;type&#34;: &#34;object&#34;,
                    &#34;properties&#34;: {
                        &#34;location&#34;: {&#34;type&#34;: &#34;string&#34;}
                    }
                },
                &#34;outputs&#34;: {
                    &#34;type&#34;: &#34;object&#34;,
                    &#34;properties&#34;: {
                        &#34;temperature&#34;: {&#34;type&#34;: &#34;number&#34;},
                        &#34;conditions&#34;: {&#34;type&#34;: &#34;string&#34;}
                    }
                },
                &#34;call_template&#34;: {
                    &#34;call_template_type&#34;: &#34;http&#34;,
                    &#34;url&#34;: &#34;https://example.com/api/weather&#34;,
                    &#34;http_method&#34;: &#34;GET&#34;
                }
            }
        ]
    }

# The actual tool endpoint
@app.get(&#34;/api/weather&#34;)
def get_weather(location: str):
    return {&#34;temperature&#34;: 22.5, &#34;conditions&#34;: &#34;Sunny&#34;}"><pre><span>from</span> <span>fastapi</span> <span>import</span> <span>FastAPI</span>

<span>app</span> <span>=</span> <span>FastAPI</span>()

<span># The discovery endpoint returns the tool manual</span>
<span>@<span>app</span>.<span>get</span>(<span>&#34;/utcp&#34;</span>)</span>
<span>def</span> <span>utcp_discovery</span>():
    <span>return</span> {
        <span>&#34;manual_version&#34;</span>: <span>&#34;1.0.0&#34;</span>,
        <span>&#34;utcp_version&#34;</span>: <span>&#34;1.0.1&#34;</span>,
        <span>&#34;tools&#34;</span>: [
            {
                <span>&#34;name&#34;</span>: <span>&#34;get_weather&#34;</span>,
                <span>&#34;description&#34;</span>: <span>&#34;Get current weather for a location&#34;</span>,
                <span>&#34;tags&#34;</span>: [<span>&#34;weather&#34;</span>],
                <span>&#34;inputs&#34;</span>: {
                    <span>&#34;type&#34;</span>: <span>&#34;object&#34;</span>,
                    <span>&#34;properties&#34;</span>: {
                        <span>&#34;location&#34;</span>: {<span>&#34;type&#34;</span>: <span>&#34;string&#34;</span>}
                    }
                },
                <span>&#34;outputs&#34;</span>: {
                    <span>&#34;type&#34;</span>: <span>&#34;object&#34;</span>,
                    <span>&#34;properties&#34;</span>: {
                        <span>&#34;temperature&#34;</span>: {<span>&#34;type&#34;</span>: <span>&#34;number&#34;</span>},
                        <span>&#34;conditions&#34;</span>: {<span>&#34;type&#34;</span>: <span>&#34;string&#34;</span>}
                    }
                },
                <span>&#34;call_template&#34;</span>: {
                    <span>&#34;call_template_type&#34;</span>: <span>&#34;http&#34;</span>,
                    <span>&#34;url&#34;</span>: <span>&#34;https://example.com/api/weather&#34;</span>,
                    <span>&#34;http_method&#34;</span>: <span>&#34;GET&#34;</span>
                }
            }
        ]
    }

<span># The actual tool endpoint</span>
<span>@<span>app</span>.<span>get</span>(<span>&#34;/api/weather&#34;</span>)</span>
<span>def</span> <span>get_weather</span>(<span>location</span>: <span>str</span>):
    <span>return</span> {<span>&#34;temperature&#34;</span>: <span>22.5</span>, <span>&#34;conditions&#34;</span>: <span>&#34;Sunny&#34;</span>}</pre></div>

<p dir="auto">You can find full examples in the <a href="https://github.com/universal-tool-calling-protocol/utcp-examples">examples repository</a>.</p>

<div dir="auto"><h3 tabindex="-1" dir="auto"><code>UtcpManual</code> and <code>Tool</code> Models</h3><a id="user-content-utcpmanual-and-tool-models" aria-label="Permalink: UtcpManual and Tool Models" href="#utcpmanual-and-tool-models"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>tool_provider</code> object inside a <code>Tool</code> has been replaced by <code>call_template</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;manual_version&#34;: &#34;string&#34;,
  &#34;utcp_version&#34;: &#34;string&#34;,
  &#34;tools&#34;: [
    {
      &#34;name&#34;: &#34;string&#34;,
      &#34;description&#34;: &#34;string&#34;,
      &#34;inputs&#34;: { ... },
      &#34;outputs&#34;: { ... },
      &#34;tags&#34;: [&#34;string&#34;],
      &#34;call_template&#34;: {
        &#34;call_template_type&#34;: &#34;http&#34;,
        &#34;url&#34;: &#34;https://...&#34;,
        &#34;http_method&#34;: &#34;GET&#34;
      }
    }
  ]
}"><pre>{
  <span>&#34;manual_version&#34;</span>: <span><span>&#34;</span>string<span>&#34;</span></span>,
  <span>&#34;utcp_version&#34;</span>: <span><span>&#34;</span>string<span>&#34;</span></span>,
  <span>&#34;tools&#34;</span>: [
    {
      <span>&#34;name&#34;</span>: <span><span>&#34;</span>string<span>&#34;</span></span>,
      <span>&#34;description&#34;</span>: <span><span>&#34;</span>string<span>&#34;</span></span>,
      <span>&#34;inputs&#34;</span>: { <span>... </span>},
      <span>&#34;outputs&#34;</span>: { <span>... </span>},
      <span>&#34;tags&#34;</span>: [<span><span>&#34;</span>string<span>&#34;</span></span>],
      <span>&#34;call_template&#34;</span>: {
        <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>http<span>&#34;</span></span>,
        <span>&#34;url&#34;</span>: <span><span>&#34;</span>https://...<span>&#34;</span></span>,
        <span>&#34;http_method&#34;</span>: <span><span>&#34;</span>GET<span>&#34;</span></span>
      }
    }
  ]
}</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Call Template Configuration Examples</h2><a id="user-content-call-template-configuration-examples" aria-label="Permalink: Call Template Configuration Examples" href="#call-template-configuration-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Configuration examples for each protocol. Remember to replace <code>provider_type</code> with <code>call_template_type</code>.</p>

<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;my_rest_api&#34;,
  &#34;call_template_type&#34;: &#34;http&#34;, // Required
  &#34;url&#34;: &#34;https://api.example.com/users/{user_id}&#34;, // Required
  &#34;http_method&#34;: &#34;POST&#34;, // Required, default: &#34;GET&#34;
  &#34;content_type&#34;: &#34;application/json&#34;, // Optional, default: &#34;application/json&#34;
  &#34;auth&#34;: { // Optional, example using ApiKeyAuth for a Bearer token. The client must prepend &#34;Bearer &#34; to the token.
    &#34;auth_type&#34;: &#34;api_key&#34;,
    &#34;api_key&#34;: &#34;Bearer $API_KEY&#34;, // Required
    &#34;var_name&#34;: &#34;Authorization&#34;, // Optional, default: &#34;X-Api-Key&#34;
    &#34;location&#34;: &#34;header&#34; // Optional, default: &#34;header&#34;
  },
  &#34;headers&#34;: { // Optional
    &#34;X-Custom-Header&#34;: &#34;value&#34;
  },
  &#34;body_field&#34;: &#34;body&#34;, // Optional, default: &#34;body&#34;
  &#34;header_fields&#34;: [&#34;user_id&#34;] // Optional
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>my_rest_api<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>http<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;url&#34;</span>: <span><span>&#34;</span>https://api.example.com/users/{user_id}<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;http_method&#34;</span>: <span><span>&#34;</span>POST<span>&#34;</span></span>, <span>// Required, default: &#34;GET&#34;</span>
  <span>&#34;content_type&#34;</span>: <span><span>&#34;</span>application/json<span>&#34;</span></span>, <span>// Optional, default: &#34;application/json&#34;</span>
  <span>&#34;auth&#34;</span>: { <span>// Optional, example using ApiKeyAuth for a Bearer token. The client must prepend &#34;Bearer &#34; to the token.</span>
    <span>&#34;auth_type&#34;</span>: <span><span>&#34;</span>api_key<span>&#34;</span></span>,
    <span>&#34;api_key&#34;</span>: <span><span>&#34;</span>Bearer $API_KEY<span>&#34;</span></span>, <span>// Required</span>
    <span>&#34;var_name&#34;</span>: <span><span>&#34;</span>Authorization<span>&#34;</span></span>, <span>// Optional, default: &#34;X-Api-Key&#34;</span>
    <span>&#34;location&#34;</span>: <span><span>&#34;</span>header<span>&#34;</span></span> <span>// Optional, default: &#34;header&#34;</span>
  },
  <span>&#34;headers&#34;</span>: { <span>// Optional</span>
    <span>&#34;X-Custom-Header&#34;</span>: <span><span>&#34;</span>value<span>&#34;</span></span>
  },
  <span>&#34;body_field&#34;</span>: <span><span>&#34;</span>body<span>&#34;</span></span>, <span>// Optional, default: &#34;body&#34;</span>
  <span>&#34;header_fields&#34;</span>: [<span><span>&#34;</span>user_id<span>&#34;</span></span>] <span>// Optional</span>
}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">SSE (Server-Sent Events) Call Template</h3><a id="user-content-sse-server-sent-events-call-template" aria-label="Permalink: SSE (Server-Sent Events) Call Template" href="#sse-server-sent-events-call-template"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;my_sse_stream&#34;,
  &#34;call_template_type&#34;: &#34;sse&#34;, // Required
  &#34;url&#34;: &#34;https://api.example.com/events&#34;, // Required
  &#34;event_type&#34;: &#34;message&#34;, // Optional
  &#34;reconnect&#34;: true, // Optional, default: true
  &#34;retry_timeout&#34;: 30000, // Optional, default: 30000 (ms)
  &#34;auth&#34;: { // Optional, example using BasicAuth
    &#34;auth_type&#34;: &#34;basic&#34;,
    &#34;username&#34;: &#34;${USERNAME}&#34;, // Required
    &#34;password&#34;: &#34;${PASSWORD}&#34; // Required
  },
  &#34;headers&#34;: { // Optional
    &#34;X-Client-ID&#34;: &#34;12345&#34;
  },
  &#34;body_field&#34;: null, // Optional
  &#34;header_fields&#34;: [] // Optional
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>my_sse_stream<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>sse<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;url&#34;</span>: <span><span>&#34;</span>https://api.example.com/events<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;event_type&#34;</span>: <span><span>&#34;</span>message<span>&#34;</span></span>, <span>// Optional</span>
  <span>&#34;reconnect&#34;</span>: <span>true</span>, <span>// Optional, default: true</span>
  <span>&#34;retry_timeout&#34;</span>: <span>30000</span>, <span>// Optional, default: 30000 (ms)</span>
  <span>&#34;auth&#34;</span>: { <span>// Optional, example using BasicAuth</span>
    <span>&#34;auth_type&#34;</span>: <span><span>&#34;</span>basic<span>&#34;</span></span>,
    <span>&#34;username&#34;</span>: <span><span>&#34;</span>${USERNAME}<span>&#34;</span></span>, <span>// Required</span>
    <span>&#34;password&#34;</span>: <span><span>&#34;</span>${PASSWORD}<span>&#34;</span></span> <span>// Required</span>
  },
  <span>&#34;headers&#34;</span>: { <span>// Optional</span>
    <span>&#34;X-Client-ID&#34;</span>: <span><span>&#34;</span>12345<span>&#34;</span></span>
  },
  <span>&#34;body_field&#34;</span>: <span>null</span>, <span>// Optional</span>
  <span>&#34;header_fields&#34;</span>: [] <span>// Optional</span>
}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Streamable HTTP Call Template</h3><a id="user-content-streamable-http-call-template" aria-label="Permalink: Streamable HTTP Call Template" href="#streamable-http-call-template"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Note the name change from <code>http_stream</code> to <code>streamable_http</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;streaming_data_source&#34;,
  &#34;call_template_type&#34;: &#34;streamable_http&#34;, // Required
  &#34;url&#34;: &#34;https://api.example.com/stream&#34;, // Required
  &#34;http_method&#34;: &#34;POST&#34;, // Optional, default: &#34;GET&#34;
  &#34;content_type&#34;: &#34;application/octet-stream&#34;, // Optional, default: &#34;application/octet-stream&#34;
  &#34;chunk_size&#34;: 4096, // Optional, default: 4096
  &#34;timeout&#34;: 60000, // Optional, default: 60000 (ms)
  &#34;auth&#34;: null, // Optional
  &#34;headers&#34;: {}, // Optional
  &#34;body_field&#34;: &#34;data&#34;, // Optional
  &#34;header_fields&#34;: [] // Optional
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>streaming_data_source<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>streamable_http<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;url&#34;</span>: <span><span>&#34;</span>https://api.example.com/stream<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;http_method&#34;</span>: <span><span>&#34;</span>POST<span>&#34;</span></span>, <span>// Optional, default: &#34;GET&#34;</span>
  <span>&#34;content_type&#34;</span>: <span><span>&#34;</span>application/octet-stream<span>&#34;</span></span>, <span>// Optional, default: &#34;application/octet-stream&#34;</span>
  <span>&#34;chunk_size&#34;</span>: <span>4096</span>, <span>// Optional, default: 4096</span>
  <span>&#34;timeout&#34;</span>: <span>60000</span>, <span>// Optional, default: 60000 (ms)</span>
  <span>&#34;auth&#34;</span>: <span>null</span>, <span>// Optional</span>
  <span>&#34;headers&#34;</span>: {}, <span>// Optional</span>
  <span>&#34;body_field&#34;</span>: <span><span>&#34;</span>data<span>&#34;</span></span>, <span>// Optional</span>
  <span>&#34;header_fields&#34;</span>: [] <span>// Optional</span>
}</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;my_cli_tool&#34;,
  &#34;call_template_type&#34;: &#34;cli&#34;, // Required
  &#34;command_name&#34;: &#34;my-command --utcp&#34;, // Required
  &#34;env_vars&#34;: { // Optional
    &#34;MY_VAR&#34;: &#34;my_value&#34;
  },
  &#34;working_dir&#34;: &#34;/path/to/working/directory&#34;, // Optional
  &#34;auth&#34;: null // Optional (always null for CLI)
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>my_cli_tool<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>cli<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;command_name&#34;</span>: <span><span>&#34;</span>my-command --utcp<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;env_vars&#34;</span>: { <span>// Optional</span>
    <span>&#34;MY_VAR&#34;</span>: <span><span>&#34;</span>my_value<span>&#34;</span></span>
  },
  <span>&#34;working_dir&#34;</span>: <span><span>&#34;</span>/path/to/working/directory<span>&#34;</span></span>, <span>// Optional</span>
  <span>&#34;auth&#34;</span>: <span>null</span> <span>// Optional (always null for CLI)</span>
}</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;my_text_manual&#34;,
  &#34;call_template_type&#34;: &#34;text&#34;, // Required
  &#34;file_path&#34;: &#34;./manuals/my_manual.json&#34;, // Required
  &#34;auth&#34;: null // Optional (always null for Text)
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>my_text_manual<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>text<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;file_path&#34;</span>: <span><span>&#34;</span>./manuals/my_manual.json<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;auth&#34;</span>: <span>null</span> <span>// Optional (always null for Text)</span>
}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">MCP (Model Context Protocol) Call Template</h3><a id="user-content-mcp-model-context-protocol-call-template" aria-label="Permalink: MCP (Model Context Protocol) Call Template" href="#mcp-model-context-protocol-call-template"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;name&#34;: &#34;my_mcp_server&#34;,
  &#34;call_template_type&#34;: &#34;mcp&#34;, // Required
  &#34;config&#34;: { // Required
    &#34;mcpServers&#34;: {
      &#34;server_name&#34;: {
        &#34;transport&#34;: &#34;stdio&#34;,
        &#34;command&#34;: [&#34;python&#34;, &#34;-m&#34;, &#34;my_mcp_server&#34;]
      }
    }
  },
  &#34;auth&#34;: { // Optional, example using OAuth2
    &#34;auth_type&#34;: &#34;oauth2&#34;,
    &#34;token_url&#34;: &#34;https://auth.example.com/token&#34;, // Required
    &#34;client_id&#34;: &#34;${CLIENT_ID}&#34;, // Required
    &#34;client_secret&#34;: &#34;${CLIENT_SECRET}&#34;, // Required
    &#34;scope&#34;: &#34;read:tools&#34; // Optional
  }
}"><pre>{
  <span>&#34;name&#34;</span>: <span><span>&#34;</span>my_mcp_server<span>&#34;</span></span>,
  <span>&#34;call_template_type&#34;</span>: <span><span>&#34;</span>mcp<span>&#34;</span></span>, <span>// Required</span>
  <span>&#34;config&#34;</span>: { <span>// Required</span>
    <span>&#34;mcpServers&#34;</span>: {
      <span>&#34;server_name&#34;</span>: {
        <span>&#34;transport&#34;</span>: <span><span>&#34;</span>stdio<span>&#34;</span></span>,
        <span>&#34;command&#34;</span>: [<span><span>&#34;</span>python<span>&#34;</span></span>, <span><span>&#34;</span>-m<span>&#34;</span></span>, <span><span>&#34;</span>my_mcp_server<span>&#34;</span></span>]
      }
    }
  },
  <span>&#34;auth&#34;</span>: { <span>// Optional, example using OAuth2</span>
    <span>&#34;auth_type&#34;</span>: <span><span>&#34;</span>oauth2<span>&#34;</span></span>,
    <span>&#34;token_url&#34;</span>: <span><span>&#34;</span>https://auth.example.com/token<span>&#34;</span></span>, <span>// Required</span>
    <span>&#34;client_id&#34;</span>: <span><span>&#34;</span>${CLIENT_ID}<span>&#34;</span></span>, <span>// Required</span>
    <span>&#34;client_secret&#34;</span>: <span><span>&#34;</span>${CLIENT_SECRET}<span>&#34;</span></span>, <span>// Required</span>
    <span>&#34;scope&#34;</span>: <span><span>&#34;</span>read:tools<span>&#34;</span></span> <span>// Optional</span>
  }
}</pre></div>

<p dir="auto">The testing structure has been updated to reflect the new core/plugin split.</p>

<p dir="auto">To run all tests for the core library and all plugins:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Ensure you have installed all dev dependencies
python -m pytest"><pre><span><span>#</span> Ensure you have installed all dev dependencies</span>
python -m pytest</pre></div>
<p dir="auto">To run tests for a specific package (e.g., the core library):</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m pytest core/tests/"><pre>python -m pytest core/tests/</pre></div>
<p dir="auto">To run tests for a specific plugin (e.g., HTTP):</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m pytest plugins/communication_protocols/http/tests/ -v"><pre>python -m pytest plugins/communication_protocols/http/tests/ -v</pre></div>
<p dir="auto">To run tests with coverage:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python -m pytest --cov=utcp --cov-report=xml"><pre>python -m pytest --cov=utcp --cov-report=xml</pre></div>

<p dir="auto">The build process now involves building each package (<code>core</code> and <code>plugins</code>) separately if needed, though they are published to PyPI independently.</p>
<ol dir="auto">
<li>Create and activate a virtual environment.</li>
<li>Install build dependencies: <code>pip install build</code>.</li>
<li>Navigate to the package directory (e.g., <code>cd core</code>).</li>
<li>Run the build: <code>python -m build</code>.</li>
<li>The distributable files (<code>.whl</code> and <code>.tar.gz</code>) will be in the <code>dist/</code> directory.</li>
</ol>

</article></div></div>
  </body>
</html>
