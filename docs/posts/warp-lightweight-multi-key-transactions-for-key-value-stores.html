<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://muratbuffalo.blogspot.com/2022/05/warp-lightweight-multi-key-transactions.html">Original</a>
    <h1>Warp: Lightweight Multi-Key Transactions for Key-Value Stores</h1>
    
    <div id="readability-page-1" class="page"><div>

<main id="main" role="main" tabindex="-1">
<div id="page_body" name="Page Body">
<div data-version="2" id="Blog1">
<div>
<article>
<div>
<div>

<h3>
Warp: Lightweight Multi-Key Transactions for Key-Value Stores
</h3>


<div id="post-body-6395083276936148393">
<p><a href="https://arxiv.org/abs/1509.07815">This paper</a> introduces a simple yet powerful idea to provide efficient multi-key transactions with ACID semantics on top of a sharded NoSQL data store. The Warp protocol prevents serializability cycles forming between concurrent transactions by forcing them to serialize via a chain communication pattern rather than using a parallel 2PC fan-out/fan-in communication. This avoids hotspots associated with fan-out/fan-in communication and prevents wasted parallel work from contacting multiple other servers when traversing them in serial would surface an invalidation/abortion early on in the serialization. I love the elegance of this idea. </p><h2>Design of the acyclic commit protocol</h2><p>The acyclic transactions commit protocol processes clients&#39; transactions, and ensures that they either commit in an atomic, serializable fashion, or abort with no effect.<br/></p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEjFAbCYdUi-THqc2dkePkBIQ1Y9KSHAdRI75dFmvtIT2XFg5Ms8TrCLDBWJjnMkmUsqm3NqwzHjO66MQl66lY1cLUEGM3HuSb-BjW0BtGVuqKT75qy7HEkpWyn7ewGk7USYRQ1tGuwQbtNEZJH-j3LgbpeX2Tb06tKKmX4JK1Y54eqBZBkBDh4PBDyP"><img alt="" data-original-height="1700" data-original-width="1340" height="400" src="https://blogger.googleusercontent.com/img/a/AVvXsEjFAbCYdUi-THqc2dkePkBIQ1Y9KSHAdRI75dFmvtIT2XFg5Ms8TrCLDBWJjnMkmUsqm3NqwzHjO66MQl66lY1cLUEGM3HuSb-BjW0BtGVuqKT75qy7HEkpWyn7ewGk7USYRQ1tGuwQbtNEZJH-j3LgbpeX2Tb06tKKmX4JK1Y54eqBZBkBDh4PBDyP=w315-h400" width="315"/></a></p><p>The key insight of the acyclic transactions protocol is to arrange the servers for a transaction into a chain which processes it serially in contrast to parallel processing done by traditional commit protocols using fan-out/fan-in communication patterns. This ensures that there is at most one server actively processing each transaction at any one time. By limiting the parallelism present in a single transaction, acyclic transactions enable each server to locally make a binding decision about the fate of the transaction they are processing, and propagate that decision to the next server in the chain. Globally, though, this enables multiple transactions which modify the same data (whose execution other techniques would serialize) to execute in parallel because each pair of concurrent transactions is ordered by exactly one server that can decide their order without communicating with other servers. Any decision made by a server will be carried to, and enforced by, the remaining servers in the chain.</p></div>

</div>
</div>

</article>
</div>
</div><div data-version="2" id="PopularPosts1">
<h3>
Popular posts from this blog
</h3>
<div>
<div role="feed">
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/12/graviton2-and-graviton3.html"> Graviton2 and Graviton3</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2021/12/graviton2-and-graviton3.html">
<img alt="Image" sizes="72px" src="https://lh3.googleusercontent.com/-QrlvEyX-ruE/YavgkvAMPaI/AAAAAAAAJ7c/mz2N-gGkaPsNHz4lWHlpLeXuNmqSGrWNACNcBGAsYHQ/s16000/Screen%2BShot%2B2021-12-04%2Bat%2B4.11.27%2BPM.png" srcset="https://lh3.googleusercontent.com/-QrlvEyX-ruE/YavgkvAMPaI/AAAAAAAAJ7c/mz2N-gGkaPsNHz4lWHlpLeXuNmqSGrWNACNcBGAsYHQ/w72-h72-p-k-no-nu/Screen%2BShot%2B2021-12-04%2Bat%2B4.11.27%2BPM.png 72w, https://lh3.googleusercontent.com/-QrlvEyX-ruE/YavgkvAMPaI/AAAAAAAAJ7c/mz2N-gGkaPsNHz4lWHlpLeXuNmqSGrWNACNcBGAsYHQ/w144-h144-p-k-no-nu/Screen%2BShot%2B2021-12-04%2Bat%2B4.11.27%2BPM.png 144w"/>
</a>
</p>
<div>
<p>
What do modern cloud workloads look like? And what does that have to do with new chip designs? I found these gems in Peter DeSantis&#39;s ReInvent20 and ReInvent21 talks. These talks are very informative and educational. Me likey! The speakers at ReInvent are not just introducing new products/services, but they are also explaining the thought processes behind them. To come up with this summary, I edited the YouTube video transcripts slightly (mostly shortening it). The presentation narratives have been really well planned, so this makes a good read I think. Graviton2 This part is from the ReInvent2020 talk from Peter DeSantis.   Graviton2 is the best performing general purpose processor in our cloud by a wide margin. It also offers significantly lower cost. And it&#39;s also the most power efficient processor we&#39;ve ever deployed. Our plan was to build a processor that was optimized for AWS and modern cloud workloads. But, what do modern cloud workloads look like? Let&#39;s start by
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/02/foundational-distributed-systems-papers.html"> Foundational distributed systems papers</a></h3>

<div>
<div>
<p>
I talked about the importance of reading foundational papers  last week. To followup, here is my compilation of foundational papers in the distributed systems area. (I focused on the core distributed systems area, and did not cover networking, security, distributed ledgers, verification work etc. I even left out distributed transactions, I hope to cover them at a later date.)  I classified the papers by subject, and listed them in chronological order. I also listed expository papers and blog posts at the end of each section. Time and State in Distributed Systems Time, Clocks, and the Ordering of Events in a Distributed System.  Leslie Lamport, Commn. of the ACM,  1978. Distributed Snapshots: Determining Global States of a Distributed System.  K. Mani Chandy Leslie Lamport, ACM Transactions on Computer Systems, 1985. Virtual Time and Global States of Distributed Systems.  Mattern, F. 1988. Expository papers and blog posts There is No Now . Justin Sheehy, ACM Queue 2015 Why Logical Clock
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2022/03/foundationdb-distributed-unbundled.html">FoundationDB: A Distributed Unbundled Transactional Key Value Store (Sigmod 2021)</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2022/03/foundationdb-distributed-unbundled.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/a/AVvXsEgkLBLilc4igR38QOl1SKdOIqAXpaY_25i8RPVeiQaCMYuG-Dno4WhMpqelWWZN9Esz5fODNcqSnQ6uSQHR5JmYmvdYaEHDQ-7ep2jY9qitdI9hpcxbWDvzYEBbKaY9aQOgxtIQ0IaqvHcCUvnPtSljTFl6ohsozXzOe1GqXJC1h5HA1u0m-ejAliem=w370-h400" srcset="https://blogger.googleusercontent.com/img/a/AVvXsEgkLBLilc4igR38QOl1SKdOIqAXpaY_25i8RPVeiQaCMYuG-Dno4WhMpqelWWZN9Esz5fODNcqSnQ6uSQHR5JmYmvdYaEHDQ-7ep2jY9qitdI9hpcxbWDvzYEBbKaY9aQOgxtIQ0IaqvHcCUvnPtSljTFl6ohsozXzOe1GqXJC1h5HA1u0m-ejAliem=w72-h72-p-k-no-nu 72w, https://blogger.googleusercontent.com/img/a/AVvXsEgkLBLilc4igR38QOl1SKdOIqAXpaY_25i8RPVeiQaCMYuG-Dno4WhMpqelWWZN9Esz5fODNcqSnQ6uSQHR5JmYmvdYaEHDQ-7ep2jY9qitdI9hpcxbWDvzYEBbKaY9aQOgxtIQ0IaqvHcCUvnPtSljTFl6ohsozXzOe1GqXJC1h5HA1u0m-ejAliem=w144-h144-p-k-no-nu 144w"/>
</a>
</p>
<div>
<p>
This paper  from Sigmod 2021  presents FoundationDB, a transactional key-value store that supports multi-key strictly serializable transactions across its entire key-space. FoundationDB (FDB, for short) is opensource.  The paper says that: &#34; FDB is the underpinning of cloud infrastructure at Apple, Snowflake and other companies, due to its consistency, robustness and availability for storing user data, system metadata and configuration, and other critical information. &#34; The main idea in FDB is to decouple transaction processing from logging and storage. Such an unbundled architecture enables the separation and horizontal scaling of both read and write handling. The transaction system combines optimistic concurrency control (OCC) and multi-version concurrency control (MVCC) and achieves strict serializability or snapshot isolation if desired. The decoupling of logging and the determinism in transaction orders greatly simplify recovery by removing redo and undo log processing f
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2022/04/anna-key-value-store-for-any-scale.html">Anna: A Key-Value Store For Any Scale</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2022/04/anna-key-value-store-for-any-scale.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/a/AVvXsEgJAP34N-KhzUICKVTkx2LLmkvr-fmRbHf0VESi-vwFPo5XKGYnQ75rF0X7UNS0qiAAV3VhtLwq4zDG5C0GpsnRFGxMcTAE645RIF7o-vxzLsuICgwhnBAMnDCJ538avGxdQD289SI4vHVL-kYjapDom1U79eBCxJmAGwtbygSdwlgXLzPhNCGdDCQ-=s16000" srcset="https://blogger.googleusercontent.com/img/a/AVvXsEgJAP34N-KhzUICKVTkx2LLmkvr-fmRbHf0VESi-vwFPo5XKGYnQ75rF0X7UNS0qiAAV3VhtLwq4zDG5C0GpsnRFGxMcTAE645RIF7o-vxzLsuICgwhnBAMnDCJ538avGxdQD289SI4vHVL-kYjapDom1U79eBCxJmAGwtbygSdwlgXLzPhNCGdDCQ-=w72-h72-p-k-no-nu 72w, https://blogger.googleusercontent.com/img/a/AVvXsEgJAP34N-KhzUICKVTkx2LLmkvr-fmRbHf0VESi-vwFPo5XKGYnQ75rF0X7UNS0qiAAV3VhtLwq4zDG5C0GpsnRFGxMcTAE645RIF7o-vxzLsuICgwhnBAMnDCJ538avGxdQD289SI4vHVL-kYjapDom1U79eBCxJmAGwtbygSdwlgXLzPhNCGdDCQ-=w144-h144-p-k-no-nu 144w"/>
</a>
</p>
<div>
<p>
This paper (ICDE&#39;18) introduces Anna,  a CALM / CRDT  implementation of a distributed key-value system both at the data structure level as well as system architecture and transaction protocol levels. Anna is a partitioned, multi-mastered key-value system that achieves high performance and elasticity via wait-free execution and coordination-free consistency. Anna employs coordination-free actors that perform state update via merge of lattice-based composite data structures. I love the strongly opinionated introduction of this paper. This is what papers should be about: opinionated, challenging conventions, making bets, and doing hypothesis testing in the small. Conventional wisdom says that  software designed for one scale point needs to be rewritten when scaling up by 10x. Anna  sets out to disprove this by showing how a key-value storage (KVS) system can be architected to scale across many orders of magnitude. (Spoiler Anna can give you only upto causal consistency, but cannot pro
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/03/your-attitude-determines-your-success.html">Your attitude determines your success </a></h3>

<div>
<div>
<p>
This may sound like a cliche your dad used to tell, but after many years of going through new areas, ventures, and careers, I find this to be the most underrated career advice. This is the number one advice I would like my kids to internalize as they grow up. This is the most important idea I would like every one undertaking a new venture to know.  If you think you are not good enough, it becomes a self-fulfilling prophecy. If you think you are not enjoying something, you start to hate it.  I gave examples of this several times before. Let&#39;s suffice with this one : In graduate school, I had read &#34;Hackers: Heroes of the Computer Revolution&#34; from Steven Levy and enjoyed it a lot. (I still keep the dog eared paper copy with affection.) So, I should have read Steven Levy&#39;s Crypto book a long time ago. But for some reason, I didn&#39;t...even though I was aware of the book. I guess that was due to a stupid quirk of mine; I had some aversion to the security/cryptography res
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/12/learning-technical-subject.html">Learning a technical subject</a></h3>

<div>
<div>
<p>
I love learning.  I wanted to write about how I learn, so I can analyze if there is a method to this madness. I will first talk about what my learning process looks like in abstract terms, and then I&#39;ll give an analogy to make things more concrete and visual.   Learning is a messy process for me I know some very clear thinkers. They are very organized and methodical. I am not like that. These tidy thinkers seem to learn a new subject quickly (and effortlessly) by studying the rules of the subject and then deriving everything about that subject from that set of rules. They speak in precise statements and have clear and hard-set opinions about the subject. They seem to thrive most in theoretical subjects. In my observation those tidy learners are in the minority. Maybe the tidy thinkers are able to pull this feat off because they come from a neighboring domain/subject and map the context there to this subject quickly. But, again from my experience, it doesn&#39;t feel like that. It s
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/08/progress-beats-perfect.html">Progress beats perfect</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2021/08/progress-beats-perfect.html">
<img alt="Image" sizes="72px" src="https://lh3.googleusercontent.com/--05YdBT8K8E/YQ30CG_MrBI/AAAAAAAAJzY/y5QAUdGtegE97sxsw8UN6cduYadXN41mACLcBGAsYHQ/w640-h640/0800.png" srcset="https://lh3.googleusercontent.com/--05YdBT8K8E/YQ30CG_MrBI/AAAAAAAAJzY/y5QAUdGtegE97sxsw8UN6cduYadXN41mACLcBGAsYHQ/w72-h72-p-k-no-nu/0800.png 72w, https://lh3.googleusercontent.com/--05YdBT8K8E/YQ30CG_MrBI/AAAAAAAAJzY/y5QAUdGtegE97sxsw8UN6cduYadXN41mACLcBGAsYHQ/w144-h144-p-k-no-nu/0800.png 144w"/>
</a>
</p>
<div>
<p>
This is a favorite saying of mine. I use it to motivate myself when I feel disheartened about how much I have to learn and improve. If I do a little every day or every week, I will get there. If I get one percent better each day for one year, I&#39;ll end up thirty-seven times better by the end of the year.   $1.01^{365}=37.78$ Years ago I had read this idea in one of John Ousterhouts life lessons, and it stuck with me.  &#34;A little bit of slope makes up for a lot of y-intercept&#34; Recently I noticed another advantage of progress over perfect. The emotional  advantage. Progress is better because it makes you feel better as you see improvement. You are getting there, you are making ... progress. Progress is growth mindset . You have an opportunity ahead of you. Perfect feels bad.. It puts you on defense. You have to defend the perfect, you have to keep the appearances. You can only go downwards from perfect, or maintain status quo. Progress gives you momentum. As long as you manag
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2020/06/learning-about-distributed-systems.html"> Learning about distributed systems: where to start?</a></h3>

<div>
<div>
<p>
This is definitely not a &#34;learn distributed systems in 21 days&#34; post. I recommend a principled, from the foundations-up, studying of distributed systems, which will take a good three months in the first pass, and many more months to build competence after that.   If you are practical and coding oriented you may not like my advice much. You may object saying, &#34;Shouldn&#39;t I learn distributed systems with coding and hands on? Why can I not get started by deploying a Hadoop cluster, or studying the Raft code.&#34; I think that is the wrong way to go about learning distributed systems, because seeing similar code and programming language constructs will make you think this is familiar territory, and will give you a false sense of security. But, nothing can be further from the truth.   Distributed systems need radically different software than centralized systems do.    --A. Tannenbaum  This quotation is literally the first sentence in my distributed systems syllabus. Inst
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2021/06/cores-that-dont-count.html"> Cores that don&#39;t count</a></h3>

<div>
<div>
<p>
This paper is from Google and appeared at HotOS 2021 . There is also a very nice 10 minute video presentation for it. So Google found fail-silent Corruption Execution Errors (CEEs) at CPU/cores. This is interesting because we thought tested CPUs do not have logic errors, and if they had an error it would be a fail-stop or at least fail-noisy hardware errors triggering machine checks. Previously we had known about fail-silent storage and network errors due to bit flips, but the CEEs are new because they are computation errors. While it is easy to detect data corruption due to bit flips, it is hard to detect CEEs because they are rare and require expensive methods to detect/correct in real-time.  What are the causes of CEEs? This is mostly due to ever-smaller feature sizes that push closer to the limits of CMOS scaling, coupled with ever-increasing complexity in architectural design. Together, these create new challenges for the verification methods that chip makers use to detect diverse
</p>
</div>

</div>
</article>
<article role="article">
<h3><a href="http://muratbuffalo.blogspot.com/2022/03/amazon-aurora-design-considerations-and.html">Amazon Aurora: Design Considerations + On Avoiding Distributed Consensus for I/Os, Commits, and Membership Changes</a></h3>

<div>
<p><a href="http://muratbuffalo.blogspot.com/2022/03/amazon-aurora-design-considerations-and.html">
<img alt="Image" sizes="72px" src="https://blogger.googleusercontent.com/img/a/AVvXsEgI54uHOcq3J-jWzODaNj344vGfbLaKv9duh3wvYpJ3TCD8GRYa7DjZ8wIkuFnJtZeTEEOnWArweSeA7VD4gGeaqUzunaQr2cvbvnQ9hg8kkWETn4mP7KarlhuspN2BfK2bSrPOupEWpzhygRIowrHSfL7Rp4WWdkYq7MKc6YdXcvr054DWoiI77IJj=w400-h312" srcset="https://blogger.googleusercontent.com/img/a/AVvXsEgI54uHOcq3J-jWzODaNj344vGfbLaKv9duh3wvYpJ3TCD8GRYa7DjZ8wIkuFnJtZeTEEOnWArweSeA7VD4gGeaqUzunaQr2cvbvnQ9hg8kkWETn4mP7KarlhuspN2BfK2bSrPOupEWpzhygRIowrHSfL7Rp4WWdkYq7MKc6YdXcvr054DWoiI77IJj=w72-h72-p-k-no-nu 72w, https://blogger.googleusercontent.com/img/a/AVvXsEgI54uHOcq3J-jWzODaNj344vGfbLaKv9duh3wvYpJ3TCD8GRYa7DjZ8wIkuFnJtZeTEEOnWArweSeA7VD4gGeaqUzunaQr2cvbvnQ9hg8kkWETn4mP7KarlhuspN2BfK2bSrPOupEWpzhygRIowrHSfL7Rp4WWdkYq7MKc6YdXcvr054DWoiI77IJj=w144-h144-p-k-no-nu 144w"/>
</a>
</p>
<div>
<p>
Amazon Aurora is a high-throughput cloud-native relational database. I will summarize its design as covered by the Sigmod 17  and Sigmod 18  papers from the Aurora team. Aurora uses MySQL or PostgreSQL for the database instance at top, and decouples the storage to a multi-tenant scale-out storage service.  In this decoupled architecture, each database instance acts as a SQL endpoint and supports query processing, access methods, transactions, locking, buffer caching, and undo management. Some database functions, including redo logging, materialization of data blocks, garbage collection, and backup/restore, are offloaded to the storage nodes. A big innovation in Aurora is to do the replication among the storage  nodes by pushing the redo log; this reduces networking traffic and  enables fault-tolerant storage that heals without database involvement. In contrast to CockroachDB  and FoundationDB , Aurora manages not to use consensus at all. It uses a primary secondary failover at the comp
</p>
</div>

</div>
</article>
</div>
</div>
</div></div>
</main>
</div></div>
  </body>
</html>
