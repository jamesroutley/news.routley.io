<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.pgflo.io/">Original</a>
    <h1>pg_flo ‚Äì Stream, transform, and re-route PostgreSQL data in real-time</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p><span>
            <span>üëÄ Learn more about a cloud offering</span>
            <a target="_blank" href="https://g5st0ubu2s9.typeform.com/to/zsfdzAaT">
              Signup
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
              </svg>
            </a>
          </span>
        </p>
        
        <div>
          <p>
              The easiest way to move and transform data between PostgreSQL
              databases
              <span>
                <i></i>
                <span>
                  The project is in active development. Follow the GitHub repo
                  for more details üòä
                </span>
              </span>
            </p>
          <p><a href="#quick-start">
            Get Started
          </a>
        </p></div>
      </div><div>
        <div>
          <section>
            <ul>
              <li>
                <i></i>
                <div>
                  <h3>
                    Real-time Streaming
                  </h3>
                  <p>
                    Stream data changes in near real-time using PostgreSQL
                    Logical Replication.
                  </p>
                </div>
              </li>
              <li>
                <i></i>
                <div>
                  <h3>Bulk Copy</h3>
                  <p>
                    Parallelizable bulk copy for fast initial data
                    synchronization.
                  </p>
                </div>
              </li>
              <li>
                <i></i>
                <div>
                  <h3>
                    Powerful Transformations
                  </h3>
                  <p>
                    Apply regex-based transformations, mask sensitive data, and
                    filter based on column values before the changes reach the
                    destination.
                  </p>
                </div>
              </li>
              <li>
                <i></i>
                <div>
                  <h3>Flexible Routing</h3>
                  <p>
                    Route data seamlessly between tables - whether to
                    differently named tables or the same table with custom
                    column mappings.
                  </p>
                </div>
              </li>
            </ul>
          </section>

          <section id="quick-start">
            <div>
              <pre><code>
# Install using Docker
docker pull shayonj/pg_flo:latest

# Start NATS server
docker run -d --name pg_flo_nats \
  --network host \
  nats:latest

# Start replicator
docker run -d --name pg_flo_replicator \
  --network host \
  shayonj/pg_flo:latest \
  replicator

# Start worker with PostgreSQL sink
docker run -d --name pg_flo_worker \
  --network host \
  shayonj/pg_flo:latest \
  worker postgres</code></pre>
            </div>
            
          </section>
        </div>

        <section>
          <h2>Transformation Rules</h2>
          <div>
            <div>
              <h3>
                Mask Email Addresses
                <span>
                  <i></i>
                  <span>Replaces email characters with asterisks, preserving the
                    domain</span>
                </span>
              </h3>
              <pre><code>
- type: transform
  column: email
  parameters:
    type: mask
    mask_char: &#34;*&#34;
  operations: [INSERT, UPDATE]
              </code></pre>
            </div>
            <div>
              <h3>
                Format Phone Numbers
                <span>
                  <i></i>
                  <span>Formats 10-digit phone numbers to (XXX) XXX-XXXX
                    format</span>
                </span>
              </h3>
              <pre><code>
- type: transform
  column: phone
  parameters:
    type: regex
    pattern: &#34;^(\\d{3})(\\d{3})(\\d{4})$&#34;
    replace: &#34;($1) $2-$3&#34;
  operations: [INSERT, UPDATE]
              </code></pre>
            </div>
          </div>
        </section>

        <section>
          <h2>
            Table Routing &amp; Column Mapping
          </h2>
          <div>
            <div>
              <h3>
                Flexible Table Routing
                <span>
                  <i></i>
                  <span>Route data between differently named tables and
                    columns</span>
                </span>
              </h3>
              <pre><code>
users:
  source_table: users
  destination_table: customers
  column_mappings:
    - source: id
      destination: customer_id
    - source: username
      destination: customer_name
  operations: [INSERT, UPDATE]</code></pre>
            </div>
            <div>
              <h3>
                Multi-Table Routing
                <span>
                  <i></i>
                  <span>Route multiple tables with different mappings
                    simultaneously</span>
                </span>
              </h3>
              <pre><code>
orders:
  source_table: orders
  destination_table: transactions
  column_mappings:
    - source: id
      destination: transaction_id
    - source: total_amount
      destination: amount
  operations: [INSERT, UPDATE, DELETE]</code></pre>
            </div>
          </div>
        </section>

        <section>
          <h2>Use Cases</h2>
          <div>
            <div>
              <h3>
                Secure Production &lt;&gt; Staging Sync
              </h3>
              <p>
                Continuously sync production data to staging, leveraging
                powerful transformation rules to maintain data privacy and
                security practices.
              </p>
            </div>
            <div>
              <h3>
                Data Archiving and Analytics
              </h3>
              <p>
                Sync and transform data to separate databases for archiving,
                auditing and analytics purposes.
              </p>
            </div>
          </div>
        </section>

        <section>
          <h2>How It Works</h2>
          <div>
            <div>
              <p>
                  pg_flo leverages PostgreSQL&#39;s logical replication system to
                  capture and stream data changes. It uses NATS as a message
                  broker to decouple reading from the WAL through the replicator
                  and worker processes, providing flexibility and scalability.
                  Transformations and filtrations are applied before the data
                  reaches the destination.
                </p>
              
            </div>
          </div>
        </section>
      </div><div>
        <p>¬© 2024 pg_flo. All rights reserved.</p>
        <p>
          Made with ‚ù§Ô∏è and üç™ by
          <a href="https://shayon.dev" target="_blank" rel="noopener noreferrer">shayon.dev</a>
        </p>
      </div></div>
  </body>
</html>
