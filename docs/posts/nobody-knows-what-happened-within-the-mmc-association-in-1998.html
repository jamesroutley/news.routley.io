<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/">Original</a>
    <h1>Nobody knows what happened within the MMC Association in 1998</h1>
    
    <div id="readability-page-1" class="page"><div><h3>Nobody knows what happened within the MMC Association in 1998.</h3>
<p>In 1999, some members from the MMC Association decided to split and create SD Association.</p>

<p><img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/cover.jpg"/></p><p>MMC&#39;s origins are non-trivial to source. At the time of writing, the Wikipedia article on the <a href="https://en.wikipedia.org/wiki/MultiMediaCard">MultiMediaCard</a> cites a Tom&#39;s Hardware blogpost, which briefly mentions that MMC was &#34;codeveloped by SanDisk and Infineon Technologies AG (formerly Siemens AG) in November 1997&#34;. Other citations in said article are equally as poor: the sources also include a makeuseof article, and the citation is about... low-level hardware quirks. Hence, I&#39;m not taking anything written there at face value.</p>

<p>Digging for actual sources lead me to the <a href="https://web.archive.org/web/19981207072336/http://www.mmca.org/news.htm">MMC Association&#39;s news page</a> (archived, 1998), which itself linked to a <a href="https://web.archive.org/web/19980129060027/http://www.sandisk.com/pr/971105.htm">press release by SanDisk</a>. The interesting parts are:</p>



<p><span> Ericsson, Motorola, Nokia, QUALCOMM and Siemens Private Communication Systems Announce Support For MMC

</span>

<span> PALO ALTO, CA, Nov. 5, 1997 -- SanDisk Corporation (NASDAQ:SNDK) and Siemens AG today introduced the MultiMediaCard (MMC), the world&#39;s smallest solid state storage device.

</span></p><p>The exact course of events during development is likely lost to time, but we can at least be sure that Siemens started it, while SanDisk and the rest joined later. This release also documents some interesting historical oddities:</p>

<p><span> Originally conceived by Siemens, the MultiMediaCard has been jointly developed and will be produced by SanDisk and Siemens in both flash and ROM versions. <b>SanDisk</b>, (...) <b>will manufacture the flash MMC</b> while <b>Siemens</b>, (...) <b>will produce the ROM-based MMC</b>.
</span>

<small>(emphasis mine)</small></p><p>Even after extensive research, I still failed to find more than <b>two</b> products where ROM-based MMC were used:</p>
<ul>
	<li>Some PalmOS devices used ROM MMCs <a href="https://archive.org/details/MultiMediaCard-Translator">for software distribution</a></li>
	<li><a href="https://en.wikipedia.org/wiki/N-Gage_(device)">Nokia N-Gage</a> (which is notable for being a huge commercial failure) likely used them for retail games.</li>
</ul>
<p>Siemens themselves have noped out of being a ROM-only vendor somewhen between <a href="https://web.archive.org/web/19990424093526/http://www.mmca.org:80/product.htm">April 24th, 1999</a> and <a href="https://web.archive.org/web/19991022021833/http://www.mmca.org:80/product.htm">October 22nd, 1999</a>. At first glance it might look like they ragequit MMCA altogether, but that&#39;s not the case - a chunk of the company got spun off into Infineon Technologies AG, which went to vendor both flash and ROM cards, as well as host controllers; By 1999, it must have been obvious that Flash is where the money is at.</p>

<p>Interestingly, Siemens was briefly absent from the vendor list after the split, returning <a href="https://web.archive.org/web/20000417080711/http://www.mmca.org/product.htm">somewhen around April 2000</a> as a manufacturer of cell phones, quickly following <a href="https://web.archive.org/web/20000506012809/http://www.mmca.org:80/product.htm">in May</a> with PDAs. It might have been an oversight on the webmaster&#39;s part, but otherwise it shows lack of diversification. Leading a standard without proper <a href="https://en.wikipedia.org/wiki/Dogfooding">dogfooding</a> is often a recipe for disaster.</p>

<p>Having read (and implemented) the standard beforehand, reading the press release is somewhat of a rollercoaster. It feels like every involved party had a different idea of what a MultiMediaCard should do, beyond storing data:</p>



<p><span> Nelson Chan, SanDisk vice president of marketing, explained, &#34;One of the major benefits of the MMC is having a DOS/Windows file structure which makes it very user-friendly for desktop connectivity. The MMC will be a highly-supported product, and a number of customer development tools will be provided for the card. These tools will facilitate an easy design-in of MMC and will support downloading of new applications from third party software developers.&#34;

</span></p><p>Half of those are buzzwords, the other.. well, <b>thankfully</b>, &#34;downloading of new applications&#34; never came into fruition (or at least I didn&#39;t find any later mentions). From other things that are absolutely bonkers: MMCA&#39;s main page used to proudly proclaim:</p>



<p><span> (...) up to 30 cards can be connected to a single bus.

</span></p><p>Horrifying thought, right? Worse, this is entirely real (and it even got carried onto SD cards). I haven&#39;t heard of host devices that <b>for certain</b> use more than one card per bus, but in the handshake, the MMC standard goes out of its way to support it, so they probably exist.</p>

<h3>SD comes onto the scene</h3>

<p>SD started development in 1999, with the initial version coming out in early 2000. Comparing <a href="http://web.archive.org/web/20000819111746/http://www.sdcard.org/member.htm">SDA&#39;s member page</a> (August 2000) to <a href="https://web.archive.org/web/19991103013414/http://www.mmca.org/memcompanies.htm">MMCA&#39;s member page</a> (November 1999), there are many more common members than you&#39;d expect, suggesting that some jumped the bandwagon early. The SDA list notably includes SanDisk, but is missing Siemens and Infineon.</p>

<p>SD&#39;s roots are apparent to anyone who tried implementing, or at least glanced over both standards. Unfortunately, while simplified SD docs are available on their page for free, the full MMC spec never was public. Initially they only distributed it to MMCA members, but <a href="https://web.archive.org/web/20050326174126/http://www.mmca.org/compliance/buy_spec/">starting 2005</a>, anyone willing to pay a hefty sum could get it. Either way, I can&#39;t really link it here.</p>

<p>The abridged version is as such:</p>

<ul>
	<li>Most of the protocol is common, down to the exact same command IDs.</li>
	<li>Slight differences in how extended card metadata is presented: MMC has EXT_CSD (Extended Device-Specific Data), SD has SCR (SD Configuration register)</li>
	<li>SD Association changed the response to a few commands needed to enumerate a card (just to make everyone mad)</li>
	<li>... but not in a way that can&#39;t be worked around</li>
	<li>Later on, the standards diverged with extra functionality, but the base protocol stayed backwards-compatible.</li>
</ul>
<p>It&#39;s annoying how they copied the vast majority, and changed just enough to break interoperability. But, surprisingly, SDA has also brought some nice things to the table, and for both parties.</p>

<p>Part A2 of the SD spec defines a generic SD Host Controller (SDHCI). While both MMC and SD supported an SPI mode, for faster applications a purpose-built interface, a Host Controller, was a must.</p>

<p>Of course, there were host controllers before SDHCI - <a href="https://web.archive.org/web/20000613194453/http://www.mmca.org/product.htm">MMCA&#39;s product page</a> even lists a bunch of vendors that could sell you one; But as far as I could find, they never had one, coherent standard. My suspicion is reassured by a cursory glance over <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/mmc/host">linux&#39;s <span>drivers/mmc/host</span> directory</a>. Most drivers in there are variations on SDHCI or extensions thereof; The remaining few are custom, and don&#39;t seem to have much in common (besides the purpose, anyways).</p>

<p>Finding <b>any</b> coherent info on prehistoric host controllers is almost impossible today. At some point <span>MMC Host Controller</span> became an alias for <span>SD/MMC Host Controller</span>, which is just a quirky way of spelling <span>SDHCI</span>. Browsing historical Linux sources doesn&#39;t help either, because <b>Linux didn&#39;t have MMC drivers way until SDHCI was commonplace</b>. The only relevant documents I found about this dealt with the SPI mode - which isn&#39;t to say that the dedicated access mode wasn&#39;t used before SDHCI, it just shows how closed and member-only the standard really was at that point.</p>

<h3>The security extensions</h3>

<p>SD&#39;s introduction is essentially remembered as &#34;MMC, but with DRM&#34;. But, what if I told you that not only did MMC have DRM, it did <b>before</b> SD cards even managed to catch on?</p>

<h4>Keitaide Music: the first DRM on flash cards</h4>

<p><img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/1.png"/>
<small>Picture 1 - of course it had a kawaii mascot</small></p><p>First SD-capable devices <a href="http://web.archive.org/web/20000915182131/http://www.sdcard.org/news-3.htm">were introduced in March 2000</a>; By that time, MMCA Technical Committee was already hard at work with Fujitsu, Hitachi and Sanyo to define the <a href="https://dn790008.ca.archive.org/0/items/MultiMediaCardProductManualRevision3/Keitaide-Music%20Technical%20Specification%200.90.pdf">Keitaide Music DRM standard</a> (jp. &#34;Music on Your Mobile&#34;). The final version was released in June of the same year. Subsequently, Japanese carrier DDI <a href="https://ascii.jp/elem/000/000/317/317321/">deployed it in November</a>, with a service called &#34;Sound Market&#34;, available on select cellphones:</p>



<p><span> &#34;Sound Market&#34; is a service that allows users to download compressed audio data of music, entertainment, education, and other audio information. The downloaded content is stored on a memory card and can be played back on a player. The data consists of encrypted content and a license key for decryption. The content will include music, entertainment, education, culture, language, and nature. A 45-second sample of the content is available for listening. (...) Content fees have not yet been determined. The content fee will be charged together with the communication fee for downloading (13 yen per minute).</span>


<small>from <a href="https://ascii.jp/elem/000/000/317/317321/">ascii.jp</a></small></p><p>The whole standard is formed as an extension on top of MMC 2.11. It introduces a new Extended CSD register (which would later get absorbed into the main standard - and in an incompatible way!), based on which the host detects if a card contains additional security features.</p>

<p><img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/2.png"/>
<small>Picture 2 - diagram of an extended card</small></p><p>Supporting cards were expected to have a TRM (&#34;Tamper-Resistant Module&#34;) for storing key material. Inside, an MPU (... media processing unit? nobody knows. probably an 8051) would deal with license management, as well as encryption/decryption of data.</p>

<p><img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/dl_1.png"/><img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/dl_2.png"/>
<small>Pictures 3,4 - a horrible flow graph, showing a &#34;secure&#34; write procedure</small></p><p>According to published example flow diagrams (seen above), the encryption was supposed to happen <b>on the card itself</b>, not over the air. This already throws the standard into the Security-by-Obscurity territory. As effective as it might have been in practice, in principle the encryption (3DES, btw) was next to useless - If one could just ask the card to decrypt the data and send it out with no auth whatsoever, &#34;licenses&#34; and &#34;play counters&#34; that auto-decrement don&#39;t matter.</p>

<p>It&#39;s unclear how much success Keitaide Music ever saw. The media coverage was quite poor, but from what I could gather, the consortium renamed itself to <a href="http://web.archive.org/web/20090105163646/http://www.udac-consortium.org/index_e.html">UDAC</a>. As per UDAC&#39;s new website, the rename was to expand the technology beyond the use in mobile phones. UDAC went silent mid-2004, with their site finally going offline five years later.</p>

<h4>SecureMMC, and other oddities</h4>

<p>The only reliable information I found about SecureMMC comes from various press releases; The <a href="https://web.archive.org/web/20030629111600/http://mmca.org/press/press010627a.pdf">initial one</a> announced the new standard in late June 2001. It gives some horrifying insight into what they came up with:</p>



<p><span> (...) The SecureMMC is similar to a Smart Card implementation, on which it is based. (...)

</span></p><p>No. This can&#39;t be right. No no no no, no way. They didn&#39;t...</p>

<p>So.. I dug deeper. And... I found a patent. <a href="http://web.archive.org/web/20240925021123im_/https://patentimages.storage.googleapis.com/bc/b2/df/19920c949e71db/US8539183.pdf">US8539183</a>, first filed in 2003. And sure enough, they made a SIM card kiss with an MMC card, sloppy style.</p>



<p><span> A memory card of one published standard, such as the Multi Media Card (MMC) or Secure Digital Card (SD), is modified to include the function of a Subscriber Identity Module (SIM) according to another published standard. The controller of the memory card communicates between electrical contacts on the outside of the card and both the memory and the SIM.

</span>


<img src="https://sdomi.pl/weblog/21-nobody-knows-what-happened-at-mmca/img/4.png"/>
<small>Picture 5 - horrors beyond my comprehension, src: patent US8539183</small></p><p>Initially, the patent being filed <i>after</i> the approval seemed odd. But then I found <a href="https://web.archive.org/web/20050305161658/http://www.mmca.org/press/SecurityFinal.pdf">another press release</a> from 2004, where MMCA finalizes the second version of the spec - maybe that&#39;s related?</p>

<p>Curiously, SecureMMC v2.0 was still <a href="https://web.archive.org/web/20080304210252/http://www.mmca.org/technology/about/">&#34;coming soon&#34;</a> 3 years later, when MMCA dissolved into <a href="https://en.wikipedia.org/wiki/JEDEC">JEDEC</a>, the independent standardization body. Hence, it isn&#39;t fully clear whether this patent <i>is SecureMMC</i> or if I found another cursed, very similar thing.</p>

<p>Unfortunately, it&#39;s unclear whether anything actually used SecureMMC. Beyond press releases and mentions on a few web pages, it&#39;s almost impossible to find info about it, let alone devices designed with the secure part in mind.</p>

<h4>e-MMC Security Extension</h4>

<p>In 2007, MMC Association dissolved, and the standards were inherited by JEDEC. Just before that happened, they went to formalize their last standard extension - the e-MMC, also known as the only MMC implementation that actually stayed relevant. e-MMC was by definition a single-chip solution (not counting the controller, often already integrated with the SoC); This allowed it to fill and dominate a niche within cheap devices that otherwise needed multiple flash chips alongside a separate controller. It&#39;s still used to this day, mostly in phones and cheaper laptops.</p>

<p>Years later, JEDEC defined JESD227: throwing away all the cursed SmartCard shenanigans, it&#39;s a scheme implementing host authentication alongside standard AES-CBC/AES-XTS encryption in hardware. Boring as hell, but also the first time MMC got any actual &#34;security&#34; features that might realistically get some use.</p>

<hr/>



<p>It&#39;s not hard to notice that MMCA was.. DESPERATELY trying to hold onto whatever they could to keep their technology even slightly relevant - and <span id="n1">I haven&#39;t even mentioned miCARD (what if a card had MMC <i>and</i> USB at the same time?), ATA on MMC (??? WHY), and marketing stunts like MMCplus (AFAIK literally the same tech as MMC, just increased clock speed)<sup><a href="#note1">1</a></sup></span>.

<span>
	<span>#1</span></span>

</p>

<p>Those are all signs of a problem - and I suspect that it went on behind closed doors for close to a decade.</p>

<h3>SD was destined to win</h3>

<p>Despite what many think, SD didn&#39;t really have a competetive edge with DRM. And even if it did, it&#39;s not like it mattered in the grand scheme of things - the userbase of the &#34;secure&#34; features was miniscule. What SD Association had was a solid vision to focus on being a <b>storage standard</b> first and foremost, and everything else (SDIO) second. Introducing SDHCI also removed a barrier of entry that MMCA seemed not to care about.</p>

<h3>Nobody knows what happened behind closed doors. But one can speculate.</h3>

<p>MMC is, and always was, a standard defined by a committee. Every standard designed as such ends up being somewhat detached from reality, but I think that MMC Association also managed to detach itself from some of its core members.</p>

<p>Considering how long it took Infineon to join SDA (they only joined in <a href="http://web.archive.org/web/20021209093618/http://www.sdcard.org:80/member.htm">November 2002</a>, with even core Siemens becoming a member sooner), it reeks of inability to find common ground on issues that actually mattered.</p>

<p>All in all, MMC is an awfully interesting piece of tech history to look at, and I&#39;m glad I could show you a part of this rabbithole.</p>

<hr/>

<h3>Notes:</h3>

<ol>
	<li id="note1"><a href="#n1">MiCard, ATA on MMC, MMCplus</a> - For some of these, the only source is a random presentation from 2007&#39;s Flash Memory summit, linked in the sources. Others are documented more widely. Also, i&#39;m still not sure whether MiCard ever got released, it feels like vaporware.</li>
</ol>

<h3>Sources:</h3><p>

... every link sprinkled throughout the article, but especially:
</p><ul>
	<li><a href="https://files.futurememorystorage.com/proceedings/2007/20070808_WA2_Tsai.pdf">2007 Flash Memory Summit presentation</a></li>
	<li>that <a href="https://patentimages.storage.googleapis.com/bc/b2/df/19920c949e71db/US8539183.pdf">hilarious patent</a></li>
	<li>Press releases mentioning SecureMMC: <a href="https://web.archive.org/web/20040405232152/http://mmca.org/press/press010627b.pdf">1</a>, <a href="https://web.archive.org/web/20030629111600/http://mmca.org/press/press010627a.pdf">2</a>, <a href="https://web.archive.org/web/20050305161658/http://www.mmca.org/press/SecurityFinal.pdf">3</a></li>
	<li><a href="https://web.archive.org/web/20060821103417/http://www.mmca.org/technology/SmallFormFactorMemoryCardFeatures.pdf">SD slander</a></li>
	<li><a href="https://www.fujitsu.com/downloads/JP/archive/imgjp/jmag/vol52-5/paper16.pdf">Keitaide Music whitepaper</a></li>
	<li><a href="https://dn790008.ca.archive.org/0/items/MultiMediaCardProductManualRevision3/Keitaide-Music%20Technical%20Specification%200.90.pdf">Keitaide Music Technical Spec 0.90</a></li>
</ul>
<p>(if you see any obvious inacurracies, please contact me with a correction. finding <b>good</b> info on this topic is one hell of a ride.)</p>

<p>
	big thanks to <a href="https://compilercrim.es">mei</a>,
	<a href="https://aprilthe.pink">April</a>,
	<a href="https://queer.party/@yavien">yavien</a>,
	<a href="https://lili.lgbt">Lili</a>,
	<a href="https://linus.dev">Linus</a>, and
	<a href="https://filmroellchen.eu">kleines Filmröllchen</a>
	for proofreading this post!
</p>

<hr/><p><a href="https://ko-fi.com/sdomi/"><img alt="Support me on ko-fi!" src="https://sdomi.pl/img/ko-fi.png"/></a></p><hr/><h3>Comments:</h3></div><p>&gt; It feels like every involved party had a different idea of what a MultiMediaCard should do, beyond storing data

    this needs an alignment chart</p><p>Great article.  A few weeks ago I got curious if modern SD cards still have DRM features, and can I, with an Arduino, see or use them, or in fact if *anyone* ever used them, and it was hard to find much info.  I got as far as &#34;you can pay thousands of dollars to get the spec&#34; and then gave up, because I was merely curious.

One thing that I did learn, which I found amusing, but you probably already know, was that the origin of the SD card logo was Toshiba had it sitting around from a failed Super Density disk project (a DVD war combatant), and let SD use it, which is why the D looks like an optical disc despite SD being very definitively solid state.</p></div>
  </body>
</html>
