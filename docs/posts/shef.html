<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/eduardoagarcia/shef">Original</a>
    <h1>Shef</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Shef, a wordplay on <em>&#34;shell&#34;</em> and <em>&#34;chef&#34;</em>, is a powerful CLI tool for cooking up advanced shell recipes.</p>
<p dir="auto">Inspired by <a href="https://gchq.github.io/CyberChef" rel="nofollow">CyberChef</a>, Shef allows you to pipe commands together, add interactive
user prompts, loop using complex control structures, and build reusable workflows with advanced conditional logic.</p>

<p dir="auto">The following example showcases a simple Shef recipe, giving you a quick glance at the syntax and functionality.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/eduardoagarcia/shef/blob/main/images/conditional.gif"><img src="https://github.com/eduardoagarcia/shef/raw/main/images/conditional.gif" alt="Quick Start Conditional Example" data-animated-image=""/></a></p>
<div dir="auto" data-snippet-clipboard-copy-content="recipes:
  - name: &#34;conditional&#34;
    description: &#34;A simple demo of conditional operations using direct prompt values&#34;
    category: &#34;demo&#34;
    operations:
      - name: &#34;Choose Fruit&#34;
        id: &#34;choose&#34;
        command: &#39;echo &#34;You selected: {{ .fruit }}&#34;&#39;
        prompts:
          - name: &#34;fruit&#34;
            type: &#34;select&#34;
            message: &#34;Choose a fruit:&#34;
            options:
              - &#34;Apples&#34;
              - &#34;Oranges&#34;

      - name: &#34;Apple Operation&#34;
        id: &#34;apple&#34;
        command: echo {{ style &#34;bold&#34; (color &#34;red&#34; &#34;This is the apple operation!&#34;) }}
        condition: &#34;.fruit == &#39;Apples&#39;&#34;

      - name: &#34;Orange Operation&#34;
        id: &#34;orange&#34;
        command: echo {{ style &#34;bold&#34; (color &#34;yellow&#34; &#34;This is the orange operation!&#34;) }}
        condition: &#34;.fruit == &#39;Oranges&#39;&#34;"><pre><span>recipes</span>:
  - <span>name</span>: <span><span>&#34;</span>conditional<span>&#34;</span></span>
    <span>description</span>: <span><span>&#34;</span>A simple demo of conditional operations using direct prompt values<span>&#34;</span></span>
    <span>category</span>: <span><span>&#34;</span>demo<span>&#34;</span></span>
    <span>operations</span>:
      - <span>name</span>: <span><span>&#34;</span>Choose Fruit<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>choose<span>&#34;</span></span>
        <span>command</span>: <span><span>&#39;</span>echo &#34;You selected: {{ .fruit }}&#34;<span>&#39;</span></span>
        <span>prompts</span>:
          - <span>name</span>: <span><span>&#34;</span>fruit<span>&#34;</span></span>
            <span>type</span>: <span><span>&#34;</span>select<span>&#34;</span></span>
            <span>message</span>: <span><span>&#34;</span>Choose a fruit:<span>&#34;</span></span>
            <span>options</span>:
              - <span><span>&#34;</span>Apples<span>&#34;</span></span>
              - <span><span>&#34;</span>Oranges<span>&#34;</span></span>

      - <span>name</span>: <span><span>&#34;</span>Apple Operation<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>apple<span>&#34;</span></span>
        <span>command</span>: <span>echo {{ style &#34;bold&#34; (color &#34;red&#34; &#34;This is the apple operation!&#34;) }}</span>
        <span>condition</span>: <span><span>&#34;</span>.fruit == &#39;Apples&#39;<span>&#34;</span></span>

      - <span>name</span>: <span><span>&#34;</span>Orange Operation<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>orange<span>&#34;</span></span>
        <span>command</span>: <span>echo {{ style &#34;bold&#34; (color &#34;yellow&#34; &#34;This is the orange operation!&#34;) }}</span>
        <span>condition</span>: <span><span>&#34;</span>.fruit == &#39;Oranges&#39;<span>&#34;</span></span></pre></div>
<p dir="auto">Now that you&#39;ve gotten acquainted with the basics, let&#39;s explore Shef&#39;s capabilities in depth!</p>

<ul dir="auto">
<li><a href="#shef-features">Shef Features</a></li>
<li><a href="#bash-scripts-and-shef-complementary-tools">Bash Scripts and Shef: Complementary Tools</a></li>
<li><a href="#ugh-yaml-really">Ugh. YAML? Really?</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#shef-command-reference">Shef Command Reference</a></li>
<li><a href="#recipe-sources">Recipe Sources</a></li>
<li><a href="#recipe-structure">Recipe Structure</a></li>
<li><a href="#interactive-user-prompts">Interactive Prompts</a></li>
<li><a href="#transformations">Transformations</a></li>
<li><a href="#conditional-execution">Conditional Execution</a></li>
<li><a href="#branching-workflows">Branching Workflows</a></li>
<li><a href="#data-flow-between-operations">Data Flow Between Operations</a></li>
<li><a href="#control-flow-structures">Control Flow Structures</a></li>
<li><a href="#example-recipes">Example Recipes</a></li>
<li><a href="#creating-recipes">Creating Recipes</a></li>
<li><a href="#ai-assisted-recipe-creation">AI-Assisted Recipe Creation</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#contributing-to-shef">Contributing to Shef</a></li>
</ul>

<ul dir="auto">
<li><strong>Command Piping</strong>: Chain multiple commands together, passing output from one command to the next</li>
<li><strong>Transformations</strong>: Transform command output with powerful templating</li>
<li><strong>Interactive Prompts</strong>: Add user input, selections, confirmations, and more</li>
<li><strong>Conditional Logic</strong>: Use if/else branching based on command results</li>
<li><strong>Control Flow</strong>: Create dynamic workflows with loops and control structures</li>
<li><strong>Multiple Sources</strong>: Use local, user, or public recipes</li>
<li><strong>Organized Recipes</strong>: Categorize and share your recipes with others</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Bash Scripts and Shef: Complementary Tools</h2><a id="user-content-bash-scripts-and-shef-complementary-tools" aria-label="Permalink: Bash Scripts and Shef: Complementary Tools" href="#bash-scripts-and-shef-complementary-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Bash scripting is a powerful and valid approach for shell automation. Shef isn&#39;t designed to replace bash scripts, but
rather provides a toolkit that compliments bash when you need specific features.</p>
<p dir="auto">Shef implements some common tooling like built-in support for interactive prompts, conditional logic, and command
piping. This structured approach can simplify certain tasks that might require more verbose code in bash.</p>
<p dir="auto">Consider Shef as another tool in your automation toolkit. Absolutely use bash scripts when they&#39;re the right fit, and
reach for Shef when its features align with your specific needs.</p>

<p dir="auto">Sigh. Yep. Another config format. I considered several options, and YAML emerged as the most practical choice for
this particular use case. JSON lacks comments and multiline string support, which are essential when defining shell
commands and documenting workflows. XML would have been unnecessarily verbose. TOML, while nice, doesn&#39;t handle nested
structures as elegantly for complex workflows.</p>

<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">In the future, I would like to support these installation methods:</p>
<ul dir="auto">
<li>Brew install</li>
<li>APT install</li>
<li>YUM/DNF install</li>
<li>Arch User Repository (AUR)</li>
<li>Standalone binary downloads</li>
<li>Windows package managers (Chocolatey/Scoop)</li>
</ul>
</div>

<p dir="auto">Before installing Shef, ensure you have Go installed and configured on your system:</p>
<ol dir="auto">
<li>
<p dir="auto"><strong>Install Go</strong>: If you don&#39;t have Go installed, download and install it from <a href="https://golang.org/dl/" rel="nofollow">golang.org</a> or
use your system&#39;s package manager:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# macOS (using Homebrew)
brew install go

# Ubuntu/Debian
sudo apt update
sudo apt install golang-go

# Fedora
sudo dnf install golang"><pre><span><span>#</span> macOS (using Homebrew)</span>
brew install go

<span><span>#</span> Ubuntu/Debian</span>
sudo apt update
sudo apt install golang-go

<span><span>#</span> Fedora</span>
sudo dnf install golang</pre></div>
</li>
<li>
<p dir="auto"><strong>Configure Go Environment</strong>: Ensure your Go environment is properly set up:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Add these to your shell configuration (.bashrc, .zshrc, etc.)
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin"><pre><span><span>#</span> Add these to your shell configuration (.bashrc, .zshrc, etc.)</span>
<span>export</span> GOPATH=<span>$HOME</span>/go
<span>export</span> PATH=<span>$PATH</span>:<span>$GOPATH</span>/bin</pre></div>
</li>
<li>
<p dir="auto"><strong>Verify Installation</strong>: Confirm Go is correctly installed:</p>

</li>
</ol>

<p dir="auto">The simplest way to install Shef is with Make:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Clone the repository
git clone git@github.com:eduardoagarcia/shef.git
cd shef

# Install (requires sudo for system-wide installation)
make install

# Or install to your home directory (no sudo required)
make install-local"><pre><span><span>#</span> Clone the repository</span>
git clone git@github.com:eduardoagarcia/shef.git
<span>cd</span> shef

<span><span>#</span> Install (requires sudo for system-wide installation)</span>
make install

<span><span>#</span> Or install to your home directory (no sudo required)</span>
make install-local</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Manual Installation Options</h3><a id="user-content-manual-installation-options" aria-label="Permalink: Manual Installation Options" href="#manual-installation-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<p dir="auto">Once you have Go installed, you can install Shef directly:</p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/eduardoagarcia/shef@latest"><pre>go install github.com/eduardoagarcia/shef@latest</pre></div>
<p dir="auto">This will install the <code>shef</code> binary to your <code>$GOPATH/bin</code> directory.</p>

<div dir="auto" data-snippet-clipboard-copy-content="# Clone the repository
git clone git@github.com:eduardoagarcia/shef.git

# Build the application
cd shef
go build -o shef

# Move to a directory in your PATH
sudo mv shef /usr/local/bin/"><pre><span><span>#</span> Clone the repository</span>
git clone git@github.com:eduardoagarcia/shef.git

<span><span>#</span> Build the application</span>
<span>cd</span> shef
go build -o shef

<span><span>#</span> Move to a directory in your PATH</span>
sudo mv shef /usr/local/bin/</pre></div>

<p dir="auto">If the installation directory is not in your PATH, you&#39;ll need to add it:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Add this to your .bashrc, .bash_profile, or .zshrc
export PATH=&#34;$PATH:$GOPATH/bin&#34;  # For go install
# OR
export PATH=&#34;$PATH:$HOME/bin&#34;    # For make install-local"><pre><span><span>#</span> Add this to your .bashrc, .bash_profile, or .zshrc</span>
<span>export</span> PATH=<span><span>&#34;</span><span>$PATH</span>:<span>$GOPATH</span>/bin<span>&#34;</span></span>  <span><span>#</span> For go install</span>
<span><span>#</span> OR</span>
<span>export</span> PATH=<span><span>&#34;</span><span>$PATH</span>:<span>$HOME</span>/bin<span>&#34;</span></span>    <span><span>#</span> For make install-local</span></pre></div>
<p dir="auto">Then reload your shell configuration: <code>source ~/.bashrc</code> (or <code>~/.zshrc</code>, <code>~/.bash_profile</code> depending on your shell)</p>

<p dir="auto">To update Shef to the latest version:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Navigate to your local repository
cd shef

# Pull the latest changes
git pull

# Update system-wide installation (requires sudo)
make update

# Or update local installation (no sudo required)
make update-local"><pre><span><span>#</span> Navigate to your local repository</span>
<span>cd</span> shef

<span><span>#</span> Pull the latest changes</span>
git pull

<span><span>#</span> Update system-wide installation (requires sudo)</span>
make update

<span><span>#</span> Or update local installation (no sudo required)</span>
make update-local</pre></div>

<p dir="auto">Once Shef is installed, you are ready to begin using it.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Sync all public recipes locally
shef sync

# Run the Hello World recipe
shef demo hello-world

# List available recipes
shef ls

# List all recipes within a category
shef ls demo"><pre><span><span>#</span> Sync all public recipes locally</span>
shef sync

<span><span>#</span> Run the Hello World recipe</span>
shef demo hello-world

<span><span>#</span> List available recipes</span>
shef ls

<span><span>#</span> List all recipes within a category</span>
shef ls demo</pre></div>

<div dir="auto"><h3 tabindex="-1" dir="auto">Basic Shef Command Structure</h3><a id="user-content-basic-shef-command-structure" aria-label="Permalink: Basic Shef Command Structure" href="#basic-shef-command-structure"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div data-snippet-clipboard-copy-content="shef [category] [recipe-name]"><pre><code>shef [category] [recipe-name]
</code></pre></div>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-h, --help</code></td>
<td>Show help information</td>
</tr>
<tr>
<td><code>-v, --version</code></td>
<td>Show version information</td>
</tr>
<tr>
<td><code>-d, --debug</code></td>
<td>Enable debug output</td>
</tr>
<tr>
<td><code>-c, --category</code></td>
<td>Specify a category</td>
</tr>
<tr>
<td><code>-L, --local</code></td>
<td>Force local recipes first</td>
</tr>
<tr>
<td><code>-U, --user</code></td>
<td>Force user recipes first</td>
</tr>
<tr>
<td><code>-P, --public</code></td>
<td>Force public recipes first</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sync</code></td>
<td>Sync public recipes locally</td>
</tr>
<tr>
<td><code>list</code> <code>ls</code> <code>l</code></td>
<td>List available recipes</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p dir="auto">Make sure your Shef git repo is up to date before running <code>shef sync</code></p>
</div>

<p dir="auto">Shef looks for recipes in multiple locations:</p>
<ol dir="auto">
<li><strong>Local Recipes</strong>: <code>./.shef/*.yaml</code> in the current directory</li>
<li><strong>User Recipes</strong>: <code>~/.shef/user/*.yaml</code> in your home directory</li>
<li><strong>Public Recipes</strong>: <code>~/.shef/public/*.yaml</code> in your home directory</li>
</ol>
<p dir="auto">If you have recipes with the same name and category in different locations, you can prioritize a specific source:</p>
<div dir="auto" data-snippet-clipboard-copy-content="shef -L git version  # Prioritize local recipes
shef -U git version  # Prioritize user recipes
shef -P git version  # Prioritize public recipes"><pre>shef -L git version  <span><span>#</span> Prioritize local recipes</span>
shef -U git version  <span><span>#</span> Prioritize user recipes</span>
shef -P git version  <span><span>#</span> Prioritize public recipes</span></pre></div>

<p dir="auto">Recipes are defined in YAML files:</p>
<div dir="auto" data-snippet-clipboard-copy-content="recipes:
  - name: &#34;example&#34;
    description: &#34;An example recipe&#34;
    category: &#34;demo&#34;
    operations:
      - name: &#34;First Operation&#34;
        id: &#34;first_op&#34;
        command: &#34;echo &#39;Hello, World!&#39;&#34;

      - name: &#34;Second Operation&#34;
        command: &#34;cat&#34;
        transform: &#34;{{ filter .input &#39;Hello&#39; }}&#34;"><pre><span>recipes</span>:
  - <span>name</span>: <span><span>&#34;</span>example<span>&#34;</span></span>
    <span>description</span>: <span><span>&#34;</span>An example recipe<span>&#34;</span></span>
    <span>category</span>: <span><span>&#34;</span>demo<span>&#34;</span></span>
    <span>operations</span>:
      - <span>name</span>: <span><span>&#34;</span>First Operation<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>first_op<span>&#34;</span></span>
        <span>command</span>: <span><span>&#34;</span>echo &#39;Hello, World!&#39;<span>&#34;</span></span>

      - <span>name</span>: <span><span>&#34;</span>Second Operation<span>&#34;</span></span>
        <span>command</span>: <span><span>&#34;</span>cat<span>&#34;</span></span>
        <span>transform</span>: <span><span>&#34;</span>{{ filter .input &#39;Hello&#39; }}<span>&#34;</span></span></pre></div>

<ul dir="auto">
<li><strong>name</strong>: Unique identifier for the recipe</li>
<li><strong>description</strong>: Human-readable description</li>
<li><strong>category</strong>: Used for organization and filtering</li>
<li><strong>author</strong>: Optional author attribution</li>
<li><strong>operations</strong>: List of operations to execute in sequence</li>
</ul>

<p dir="auto">Operations are the building blocks of recipes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Operation Name&#34;            # Operation name
  id: &#34;unique_id&#34;                   # Identifier for referencing output
  command: &#34;echo &#39;Hello&#39;&#34;           # Shell command to execute
  execution_mode: &#34;standard&#34;        # [Optional] How the command runs (standard, interactive, or stream)
  silent: false                     # [Optional] Whether to suppress output to stdout
  condition: &#34;var == true&#34;          # [Optional] Condition for execution
  on_success: &#34;success_op&#34;          # [Optional] Operation to run on success
  on_failure: &#34;failure_op&#34;          # [Optional] Operation to run on failure
  transform: &#34;{{ .output | trim }}&#34; # [Optional] Transform output
  prompts:                          # [Optional] Interactive prompts
     - name: &#34;var_name&#34;
       type: &#34;input&#34;
       message: &#34;Enter value:&#34;
  control_flow:                     # [Optional] Control flow structure (one of the below types)
    type: &#34;foreach&#34;                 # Type of control flow (foreach, for, while)
  operations:                       # [Optional] Sub-operations for when control flow structures are used
    - name: &#34;Sub Operation&#34;
      command: &#34;echo &#39;Processing {{ .item }}&#39;&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Operation Name<span>&#34;</span></span>            <span><span>#</span> Operation name</span>
  <span>id</span>: <span><span>&#34;</span>unique_id<span>&#34;</span></span>                   <span><span>#</span> Identifier for referencing output</span>
  <span>command</span>: <span><span>&#34;</span>echo &#39;Hello&#39;<span>&#34;</span></span>           <span><span>#</span> Shell command to execute</span>
  <span>execution_mode</span>: <span><span>&#34;</span>standard<span>&#34;</span></span>        <span><span>#</span> [Optional] How the command runs (standard, interactive, or stream)</span>
  <span>silent</span>: <span>false                     </span><span><span>#</span> [Optional] Whether to suppress output to stdout</span>
  <span>condition</span>: <span><span>&#34;</span>var == true<span>&#34;</span></span>          <span><span>#</span> [Optional] Condition for execution</span>
  <span>on_success</span>: <span><span>&#34;</span>success_op<span>&#34;</span></span>          <span><span>#</span> [Optional] Operation to run on success</span>
  <span>on_failure</span>: <span><span>&#34;</span>failure_op<span>&#34;</span></span>          <span><span>#</span> [Optional] Operation to run on failure</span>
  <span>transform</span>: <span><span>&#34;</span>{{ .output | trim }}<span>&#34;</span></span> <span><span>#</span> [Optional] Transform output</span>
  <span>prompts</span>:                          <span><span>#</span> [Optional] Interactive prompts</span>
     - <span>name</span>: <span><span>&#34;</span>var_name<span>&#34;</span></span>
       <span>type</span>: <span><span>&#34;</span>input<span>&#34;</span></span>
       <span>message</span>: <span><span>&#34;</span>Enter value:<span>&#34;</span></span>
  <span>control_flow</span>:                     <span><span>#</span> [Optional] Control flow structure (one of the below types)</span>
    <span>type</span>: <span><span>&#34;</span>foreach<span>&#34;</span></span>                 <span><span>#</span> Type of control flow (foreach, for, while)</span>
  <span>operations</span>:                       <span><span>#</span> [Optional] Sub-operations for when control flow structures are used</span>
    - <span>name</span>: <span><span>&#34;</span>Sub Operation<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>echo &#39;Processing {{ .item }}&#39;<span>&#34;</span></span></pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Control Flow Configuration</h4><a id="user-content-control-flow-configuration" aria-label="Permalink: Control Flow Configuration" href="#control-flow-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Control flow structures are configured as follows:</p>

<div dir="auto" data-snippet-clipboard-copy-content="control_flow:
  type: &#34;foreach&#34;               # Iterate over a collection
  collection: &#34;Item 1\nItem 2&#34;  # Collection of items (newline separated)
  as: &#34;item&#34;                    # Variable name for current item"><pre><span>control_flow</span>:
  <span>type</span>: <span><span>&#34;</span>foreach<span>&#34;</span></span>               <span><span>#</span> Iterate over a collection</span>
  <span>collection</span>: <span><span>&#34;</span>Item 1<span>\n</span>Item 2<span>&#34;</span></span>  <span><span>#</span> Collection of items (newline separated)</span>
  <span>as</span>: <span><span>&#34;</span>item<span>&#34;</span></span>                    <span><span>#</span> Variable name for current item</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="control_flow:
  type: &#34;for&#34;    # Execute a fixed number of times
  count: 5       # Number of iterations
  variable: &#34;i&#34;  # Variable name for iteration index (optional)"><pre><span>control_flow</span>:
  <span>type</span>: <span><span>&#34;</span>for<span>&#34;</span></span>    <span><span>#</span> Execute a fixed number of times</span>
  <span>count</span>: <span>5</span>       <span><span>#</span> Number of iterations</span>
  <span>variable</span>: <span><span>&#34;</span>i<span>&#34;</span></span>  <span><span>#</span> Variable name for iteration index (optional)</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="control_flow:
  type: &#34;while&#34;                          # Execute while condition is true
  condition: &#34;{{ ne .status `ready` }}&#34;  # Condition to evaluate each iteration"><pre><span>control_flow</span>:
  <span>type</span>: <span><span>&#34;</span>while<span>&#34;</span></span>                          <span><span>#</span> Execute while condition is true</span>
  <span>condition</span>: <span><span>&#34;</span>{{ ne .status `ready` }}<span>&#34;</span></span>  <span><span>#</span> Condition to evaluate each iteration</span></pre></div>

<ul dir="auto">
<li><strong>standard</strong>: Default mode (used when no execution_mode is specified). Output is captured and can be used by
subsequent operations.</li>
<li><strong>interactive</strong>: The command has direct access to the terminal&#39;s stdin, stdout, and stderr. Useful for commands that
require direct terminal interaction, but output cannot be captured for use in subsequent operations.</li>
<li><strong>stream</strong>: Similar to interactive mode but optimized for long-running processes that produce continuous output. The
command&#39;s output streams to the terminal in real-time, but output cannot be captured for use in subsequent operations.</li>
</ul>

<p dir="auto">Shef supports the following types of user prompts:</p>

<div dir="auto" data-snippet-clipboard-copy-content="# Text Input
- name: &#34;username&#34;
  type: &#34;input&#34;
  message: &#34;Enter your username:&#34;
  default: &#34;admin&#34;
  help_text: &#34;This will be used for authentication&#34;

# Selection
- name: &#34;environment&#34;
  type: &#34;select&#34;
  message: &#34;Select environment:&#34;
  options:
    - &#34;dev&#34;
    - &#34;staging&#34;
    - &#34;production&#34;
  default: &#34;dev&#34;
  help_text: &#34;Choose the deployment environment&#34;

# Confirmation (yes/no)
- name: &#34;confirm_deploy&#34;
  type: &#34;confirm&#34;
  message: &#34;Deploy to production?&#34;
  default: &#34;false&#34;
  help_text: &#34;This will start the deployment process&#34;

# Password (input is masked)
- name: &#34;password&#34;
  type: &#34;password&#34;
  message: &#34;Enter your password:&#34;
  help_text: &#34;Your input will be hidden&#34;"><pre><span><span>#</span> Text Input</span>
- <span>name</span>: <span><span>&#34;</span>username<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>input<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Enter your username:<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>admin<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>This will be used for authentication<span>&#34;</span></span>

<span><span>#</span> Selection</span>
- <span>name</span>: <span><span>&#34;</span>environment<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>select<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Select environment:<span>&#34;</span></span>
  <span>options</span>:
    - <span><span>&#34;</span>dev<span>&#34;</span></span>
    - <span><span>&#34;</span>staging<span>&#34;</span></span>
    - <span><span>&#34;</span>production<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>dev<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>Choose the deployment environment<span>&#34;</span></span>

<span><span>#</span> Confirmation (yes/no)</span>
- <span>name</span>: <span><span>&#34;</span>confirm_deploy<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>confirm<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Deploy to production?<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>false<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>This will start the deployment process<span>&#34;</span></span>

<span><span>#</span> Password (input is masked)</span>
- <span>name</span>: <span><span>&#34;</span>password<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>password<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Enter your password:<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>Your input will be hidden<span>&#34;</span></span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Multi-select
- name: &#34;features&#34;
  type: &#34;multiselect&#34;
  message: &#34;Select features to enable:&#34;
  options:
    - &#34;logging&#34;
    - &#34;metrics&#34;
    - &#34;debugging&#34;
  default: &#34;logging,metrics&#34;
  help_text: &#34;Use space to toggle, enter to confirm&#34;

# Numeric Input
- name: &#34;count&#34;
  type: &#34;number&#34;
  message: &#34;Enter number of instances:&#34;
  default: &#34;3&#34;
  min_value: 1
  max_value: 10
  help_text: &#34;Value must be between 1 and 10&#34;

# File Path Input
- name: &#34;config_file&#34;
  type: &#34;path&#34;
  message: &#34;Select configuration file:&#34;
  default: &#34;./config.json&#34;
  file_extensions:
    - &#34;json&#34;
    - &#34;yaml&#34;
    - &#34;yml&#34;
  required: true
  help_text: &#34;File must exist and have the right extension&#34;

# Text Editor
- name: &#34;description&#34;
  type: &#34;editor&#34;
  message: &#34;Enter a detailed description:&#34;
  default: &#34;# Project Description\n\nEnter details here...&#34;
  editor_cmd: &#34;vim&#34;  # Uses $EDITOR env var if not specified
  help_text: &#34;This will open your text editor&#34;

# Autocomplete Selection
- name: &#34;service&#34;
  type: &#34;autocomplete&#34;
  message: &#34;Select a service:&#34;
  options:
    - &#34;authentication&#34;
    - &#34;database&#34;
    - &#34;storage&#34;
    - &#34;analytics&#34;
  help_text: &#34;Type to filter options&#34;"><pre><span><span>#</span> Multi-select</span>
- <span>name</span>: <span><span>&#34;</span>features<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>multiselect<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Select features to enable:<span>&#34;</span></span>
  <span>options</span>:
    - <span><span>&#34;</span>logging<span>&#34;</span></span>
    - <span><span>&#34;</span>metrics<span>&#34;</span></span>
    - <span><span>&#34;</span>debugging<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>logging,metrics<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>Use space to toggle, enter to confirm<span>&#34;</span></span>

<span><span>#</span> Numeric Input</span>
- <span>name</span>: <span><span>&#34;</span>count<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>number<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Enter number of instances:<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>3<span>&#34;</span></span>
  <span>min_value</span>: <span>1</span>
  <span>max_value</span>: <span>10</span>
  <span>help_text</span>: <span><span>&#34;</span>Value must be between 1 and 10<span>&#34;</span></span>

<span><span>#</span> File Path Input</span>
- <span>name</span>: <span><span>&#34;</span>config_file<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>path<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Select configuration file:<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span>./config.json<span>&#34;</span></span>
  <span>file_extensions</span>:
    - <span><span>&#34;</span>json<span>&#34;</span></span>
    - <span><span>&#34;</span>yaml<span>&#34;</span></span>
    - <span><span>&#34;</span>yml<span>&#34;</span></span>
  <span>required</span>: <span>true</span>
  <span>help_text</span>: <span><span>&#34;</span>File must exist and have the right extension<span>&#34;</span></span>

<span><span>#</span> Text Editor</span>
- <span>name</span>: <span><span>&#34;</span>description<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>editor<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Enter a detailed description:<span>&#34;</span></span>
  <span>default</span>: <span><span>&#34;</span># Project Description<span>\n\n</span>Enter details here...<span>&#34;</span></span>
  <span>editor_cmd</span>: <span><span>&#34;</span>vim<span>&#34;</span></span>  <span><span>#</span> Uses $EDITOR env var if not specified</span>
  <span>help_text</span>: <span><span>&#34;</span>This will open your text editor<span>&#34;</span></span>

<span><span>#</span> Autocomplete Selection</span>
- <span>name</span>: <span><span>&#34;</span>service<span>&#34;</span></span>
  <span>type</span>: <span><span>&#34;</span>autocomplete<span>&#34;</span></span>
  <span>message</span>: <span><span>&#34;</span>Select a service:<span>&#34;</span></span>
  <span>options</span>:
    - <span><span>&#34;</span>authentication<span>&#34;</span></span>
    - <span><span>&#34;</span>database<span>&#34;</span></span>
    - <span><span>&#34;</span>storage<span>&#34;</span></span>
    - <span><span>&#34;</span>analytics<span>&#34;</span></span>
  <span>help_text</span>: <span><span>&#34;</span>Type to filter options<span>&#34;</span></span></pre></div>

<p dir="auto">You can generate selection options from a previous operation&#39;s output:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;List Files&#34;
  id: &#34;files_list&#34;
  command: &#34;find . -name &#39;*.go&#39;&#34;

- name: &#34;Select File&#34;
  command: &#34;cat {{ .file }}&#34;
  prompts:
    - name: &#34;file&#34;
      type: &#34;select&#34;
      message: &#34;Select a file:&#34;
      source_operation: &#34;files_list&#34;
      source_transform: &#34;{{ .input | trim }}&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>List Files<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>files_list<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>find . -name &#39;*.go&#39;<span>&#34;</span></span>

- <span>name</span>: <span><span>&#34;</span>Select File<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>cat {{ .file }}<span>&#34;</span></span>
  <span>prompts</span>:
    - <span>name</span>: <span><span>&#34;</span>file<span>&#34;</span></span>
      <span>type</span>: <span><span>&#34;</span>select<span>&#34;</span></span>
      <span>message</span>: <span><span>&#34;</span>Select a file:<span>&#34;</span></span>
      <span>source_operation</span>: <span><span>&#34;</span>files_list<span>&#34;</span></span>
      <span>source_transform</span>: <span><span>&#34;</span>{{ .input | trim }}<span>&#34;</span></span></pre></div>

<p dir="auto">Transformations let you modify a command&#39;s output before it&#39;s passed to the next operation or used in prompts.</p>

<div dir="auto" data-snippet-clipboard-copy-content="transform: &#34;{{ .output | function1 | function2 }}&#34;"><pre><span>transform</span>: <span><span>&#34;</span>{{ .output | function1 | function2 }}<span>&#34;</span></span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Available Transformation Functions</h3><a id="user-content-available-transformation-functions" aria-label="Permalink: Available Transformation Functions" href="#available-transformation-functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trim</code></td>
<td>Remove whitespace</td>
<td><code>{{ .output | trim }}</code></td>
</tr>
<tr>
<td><code>split</code></td>
<td>Split string by delimiter</td>
<td><code>{{ .output | split &#34;,&#34; }}</code></td>
</tr>
<tr>
<td><code>join</code></td>
<td>Join array with delimiter</td>
<td><code>{{ .output | join &#34;\n&#34; }}</code></td>
</tr>
<tr>
<td><code>joinArray</code></td>
<td>Join any array type with delimiter</td>
<td><code>{{ .output | joinArray &#34;,&#34; }}</code></td>
</tr>
<tr>
<td><code>filter</code></td>
<td>Keep lines containing a pattern</td>
<td><code>{{ .output | filter &#34;pattern&#34; }}</code></td>
</tr>
<tr>
<td><code>grep</code></td>
<td>Alias for filter</td>
<td><code>{{ .output | grep &#34;pattern&#34; }}</code></td>
</tr>
<tr>
<td><code>cut</code></td>
<td>Extract field from each line</td>
<td><code>{{ .output | cut &#34;:&#34; 1 }}</code></td>
</tr>
<tr>
<td><code>trimPrefix</code></td>
<td>Remove prefix</td>
<td><code>{{ .output | trimPrefix &#34;foo&#34; }}</code></td>
</tr>
<tr>
<td><code>trimSuffix</code></td>
<td>Remove suffix</td>
<td><code>{{ .output | trimSuffix &#34;bar&#34; }}</code></td>
</tr>
<tr>
<td><code>contains</code></td>
<td>Check if string contains pattern</td>
<td><code>{{ if contains .output &#34;pattern&#34; }}yes{{ end }}</code></td>
</tr>
<tr>
<td><code>replace</code></td>
<td>Replace text</td>
<td><code>{{ .output | replace &#34;old&#34; &#34;new&#34; }}</code></td>
</tr>
<tr>
<td><code>atoi</code></td>
<td>Convert string to int</td>
<td><code>{{ .output | atoi }}</code></td>
</tr>
<tr>
<td><code>add</code></td>
<td>Add numbers</td>
<td><code>{{ .output | atoi | add 5 }}</code></td>
</tr>
<tr>
<td><code>sub</code></td>
<td>Subtract numbers</td>
<td><code>{{ .output | atoi | sub 3 }}</code></td>
</tr>
<tr>
<td><code>div</code></td>
<td>Divide numbers</td>
<td><code>{{ .output | atoi | div 2 }}</code></td>
</tr>
<tr>
<td><code>mul</code></td>
<td>Multiply numbers</td>
<td><code>{{ .output | atoi | mul 4 }}</code></td>
</tr>
<tr>
<td><code>exec</code></td>
<td>Execute command</td>
<td><code>{{ exec &#34;date&#34; }}</code></td>
</tr>
<tr>
<td><code>color</code></td>
<td>Add color to text</td>
<td><code>{{ color &#34;green&#34; &#34;Success!&#34; }}</code></td>
</tr>
<tr>
<td><code>style</code></td>
<td>Add styling to text</td>
<td><code>{{ style &#34;bold&#34; &#34;Important!&#34; }}</code></td>
</tr>
<tr>
<td><code>resetFormat</code></td>
<td>Reset all colors and styles</td>
<td><code>{{ resetFormat }}</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div dir="auto"><h3 tabindex="-1" dir="auto">Terminal Colors and Styles</h3><a id="user-content-terminal-colors-and-styles" aria-label="Permalink: Terminal Colors and Styles" href="#terminal-colors-and-styles"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can make your recipe outputs more readable by adding colors and styles. These are automatically disabled when using
the <code>NO_COLOR</code> environment variable.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Color Type</th>
<th>Available Colors</th>
</tr>
</thead>
<tbody>
<tr>
<td>Text Colors</td>
<td><code>black</code>, <code>red</code>, <code>green</code>, <code>yellow</code>, <code>blue</code>, <code>magenta</code>, <code>cyan</code>, <code>white</code></td>
</tr>
<tr>
<td>Background Colors</td>
<td><code>bg-black</code>, <code>bg-red</code>, <code>bg-green</code>, <code>bg-yellow</code>, <code>bg-blue</code>, <code>bg-magenta</code>, <code>bg-cyan</code>, <code>bg-white</code></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Style</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bold</code></td>
<td>Bold text</td>
</tr>
<tr>
<td><code>dim</code></td>
<td>Dimmed text</td>
</tr>
<tr>
<td><code>italic</code></td>
<td>Italic text</td>
</tr>
<tr>
<td><code>underline</code></td>
<td>Underlined text</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Colors and styles can be used in commands, transformations, and anywhere templates are rendered:</p>

<div dir="auto" data-snippet-clipboard-copy-content="command: echo &#34;{{ color &#34;green&#34; &#34;Success!&#34; }}&#34;"><pre><span>command</span>: <span>echo &#34;{{ color &#34;green&#34; &#34;Success!&#34; }}&#34;</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="command: echo &#34;{{ style &#34;bold&#34; &#34;Important!&#34; }}&#34;"><pre><span>command</span>: <span>echo &#34;{{ style &#34;bold&#34; &#34;Important!&#34; }}&#34;</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="command: echo &#34;{{ style &#34;bold&#34; (color &#34;red&#34; &#34;Error!&#34;) }}&#34;"><pre><span>command</span>: <span>echo &#34;{{ style &#34;bold&#34; (color &#34;red&#34; &#34;Error!&#34;) }}&#34;</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="transform: |
  {{ if contains .output &#34;error&#34; }}
  {{ color &#34;red&#34; (style &#34;bold&#34; &#34;✗ Operation failed&#34;) }}
  {{ else }}
  {{ color &#34;green&#34; (style &#34;bold&#34; &#34;✓ Operation succeeded&#34;) }}
  {{ end }}"><pre><span>transform</span>: <span>|</span>
<span>  {{ if contains .output &#34;error&#34; }}</span>
<span>  {{ color &#34;red&#34; (style &#34;bold&#34; &#34;✗ Operation failed&#34;) }}</span>
<span>  {{ else }}</span>
<span>  {{ color &#34;green&#34; (style &#34;bold&#34; &#34;✓ Operation succeeded&#34;) }}</span>
<span>  {{ end }}</span></pre></div>

<p dir="auto">You can access all context variables in transformations:</p>
<div dir="auto" data-snippet-clipboard-copy-content="transform: &#34;{{ if eq .format `json` }}{{ .output }}{{ else }}{{ .output | cut ` ` 0 }}{{ end }}&#34;"><pre><span>transform</span>: <span><span>&#34;</span>{{ if eq .format `json` }}{{ .output }}{{ else }}{{ .output | cut ` ` 0 }}{{ end }}<span>&#34;</span></span></pre></div>
<p dir="auto">Variables available in templates:</p>
<ul dir="auto">
<li><code>.output</code>: The output to the current transformation (output from the command)</li>
<li><code>.input</code>: The input to the current command (input from previous operation)</li>
<li><code>.{prompt_name}</code>: Any variable from defined prompts</li>
<li><code>.{operation_id}</code>: The output of a specific operation by ID</li>
<li><code>.operationOutputs</code>: Map of all operation outputs by ID</li>
<li><code>.operationResults</code>: Map of operation success/failure results by ID</li>
</ul>

<p dir="auto">Operations can be conditionally executed:</p>

<div dir="auto" data-snippet-clipboard-copy-content="condition: .confirm == &#34;true&#34;  # Run only if confirm prompt is true"><pre><span>condition</span>: <span>.confirm == &#34;true&#34;  </span><span><span>#</span> Run only if confirm prompt is true</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Operation Result Conditions</h3><a id="user-content-operation-result-conditions" aria-label="Permalink: Operation Result Conditions" href="#operation-result-conditions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="condition: build_op.success  # Run if build_op succeeded
condition: test_op.failure   # Run if test_op failed"><pre><span>condition</span>: <span>build_op.success  </span><span><span>#</span> Run if build_op succeeded</span>
<span>condition</span>: <span>test_op.failure   </span><span><span>#</span> Run if test_op failed</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="condition: .environment == &#34;production&#34;  # Equality check
condition: .count != 0                   # Inequality check"><pre><span>condition</span>: <span>.environment == &#34;production&#34;  </span><span><span>#</span> Equality check</span>
<span>condition</span>: <span>.count != 0                   </span><span><span>#</span> Inequality check</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="condition: .count &gt; 5
condition: .memory &lt;= 512
condition: .errors &gt;= 10
condition: .progress &lt; 100"><pre><span>condition</span>: <span>.count &gt; 5</span>
<span>condition</span>: <span>.memory &lt;= 512</span>
<span>condition</span>: <span>.errors &gt;= 10</span>
<span>condition</span>: <span>.progress &lt; 100</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="condition: build_op.success &amp;&amp; .confirm_deploy == &#34;true&#34;
condition: test_op.failure || lint_op.failure
condition: !.skip_validation"><pre><span>condition</span>: <span>build_op.success &amp;&amp; .confirm_deploy == &#34;true&#34;</span>
<span>condition</span>: <span>test_op.failure || lint_op.failure</span>
<span>condition</span>: <span>!.skip_validation</span></pre></div>

<p dir="auto">You can create branching workflows based on success or failure:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Build App&#34;
  id: &#34;build_op&#34;
  command: &#34;make build&#34;
  on_success: &#34;deploy_op&#34;  # Go to deploy_op on success
  on_failure: &#34;fix_op&#34;     # Go to fix_op on failure

- name: &#34;Deploy&#34;
  id: &#34;deploy_op&#34;
  command: &#34;make deploy&#34;
  
- name: &#34;Fix Issues&#34;
  id: &#34;fix_op&#34;
  command: &#34;make lint&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Build App<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>build_op<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>make build<span>&#34;</span></span>
  <span>on_success</span>: <span><span>&#34;</span>deploy_op<span>&#34;</span></span>  <span><span>#</span> Go to deploy_op on success</span>
  <span>on_failure</span>: <span><span>&#34;</span>fix_op<span>&#34;</span></span>     <span><span>#</span> Go to fix_op on failure</span>

- <span>name</span>: <span><span>&#34;</span>Deploy<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>deploy_op<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>make deploy<span>&#34;</span></span>
  
- <span>name</span>: <span><span>&#34;</span>Fix Issues<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>fix_op<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>make lint<span>&#34;</span></span></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Data Flow Between Operations</h2><a id="user-content-data-flow-between-operations" aria-label="Permalink: Data Flow Between Operations" href="#data-flow-between-operations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Each operation&#39;s output is automatically piped to the next operation&#39;s input. You can also access any operation&#39;s output
by its ID:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Get Hostname&#34;
  id: &#34;hostname_op&#34;
  command: &#34;hostname&#34;

- name: &#34;Show Info&#34;
  command: &#34;echo &#39;Running on {{ .hostname_op }}&#39;&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Get Hostname<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>hostname_op<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>hostname<span>&#34;</span></span>

- <span>name</span>: <span><span>&#34;</span>Show Info<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>echo &#39;Running on {{ .hostname_op }}&#39;<span>&#34;</span></span></pre></div>

<p dir="auto">Shef supports advanced control flow structures that let you create dynamic, iterative workflows.</p>

<p dir="auto">You can iterate over a collection of items and perform a flow of operations on each item.</p>

<ul dir="auto">
<li><strong>control_flow</strong>
<ul dir="auto">
<li><strong>type</strong>: foreach</li>
<li><strong>collection</strong>: The list of items to iterate over (string with items separated by newlines)</li>
<li><strong>as</strong>: The variable name to use for the current item in each iteration</li>
</ul>
</li>
<li><strong>operations</strong>: The sub-operations to perform for each item (all sub-operations have access to the <code>as</code> loop variable)</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Mechanics of the Foreach Loop</h4><a id="user-content-mechanics-of-the-foreach-loop" aria-label="Permalink: Mechanics of the Foreach Loop" href="#mechanics-of-the-foreach-loop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Parse the collection into separate items (splitting by newlines)</li>
<li>For each item, set the variable specified in &#34;as&#34;</li>
<li>Execute all operations in the foreach block for each item</li>
<li>Clean up the loop variable when done</li>
</ol>

<ul dir="auto">
<li>Processing multiple files</li>
<li>Handling lists of servers, containers, or resources</li>
<li>Applying the same transformation to multiple inputs</li>
<li>Building dynamic workflows based on discovered items</li>
</ul>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">Within a foreach loop, you can use conditional operations, transformations, and all other Shef features.</p>
</div>

<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Process Each Item&#34;
  control_flow:
     type: &#34;foreach&#34;
     collection: &#34;🍎 Apples\n🍌 Bananas\n🍒 Cherries\n🍊 Oranges&#34;
     as: &#34;fruit&#34;  # Each item will be available as .fruit
  operations:
     - name: &#34;Process Fruit&#34;
       command: &#34;echo &#39;Processing {{ .fruit }}&#39;&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Process Each Item<span>&#34;</span></span>
  <span>control_flow</span>:
     <span>type</span>: <span><span>&#34;</span>foreach<span>&#34;</span></span>
     <span>collection</span>: <span><span>&#34;</span>🍎 Apples<span>\n</span>🍌 Bananas<span>\n</span>🍒 Cherries<span>\n</span>🍊 Oranges<span>&#34;</span></span>
     <span>as</span>: <span><span>&#34;</span>fruit<span>&#34;</span></span>  <span><span>#</span> Each item will be available as .fruit</span>
  <span>operations</span>:
     - <span>name</span>: <span><span>&#34;</span>Process Fruit<span>&#34;</span></span>
       <span>command</span>: <span><span>&#34;</span>echo &#39;Processing {{ .fruit }}&#39;<span>&#34;</span></span></pre></div>
<p dir="auto">You can also generate the collection dynamically:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;List Files&#34;
  id: &#34;files&#34;
  command: &#34;find . -type f -name &#39;*.txt&#39;&#34;

- name: &#34;Process Each File&#34;
  control_flow:
    type: &#34;foreach&#34;
    collection: &#34;{{ .files }}&#34;  # Using output from previous operation
    as: &#34;file&#34;                  # Each item will be available as .file
  operations:
    - name: &#34;Process File&#34;
      command: &#34;cat {{ .file }} | wc -l&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>List Files<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>files<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>find . -type f -name &#39;*.txt&#39;<span>&#34;</span></span>

- <span>name</span>: <span><span>&#34;</span>Process Each File<span>&#34;</span></span>
  <span>control_flow</span>:
    <span>type</span>: <span><span>&#34;</span>foreach<span>&#34;</span></span>
    <span>collection</span>: <span><span>&#34;</span>{{ .files }}<span>&#34;</span></span>  <span><span>#</span> Using output from previous operation</span>
    <span>as</span>: <span><span>&#34;</span>file<span>&#34;</span></span>                  <span><span>#</span> Each item will be available as .file</span>
  <span>operations</span>:
    - <span>name</span>: <span><span>&#34;</span>Process File<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>cat {{ .file }} | wc -l<span>&#34;</span></span></pre></div>

<p dir="auto">You can execute a set of operations a fixed number of times.</p>

<ul dir="auto">
<li><strong>control_flow</strong>
<ul dir="auto">
<li><strong>type</strong>: for</li>
<li><strong>count</strong>: The number of iterations to execute</li>
<li><strong>variable</strong>: (Optional) The variable name to use for the current iteration index (defaults to &#34;i&#34;)</li>
</ul>
</li>
<li><strong>operations</strong>: The sub-operations to perform for each iteration</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Mechanics of the For Loop</h4><a id="user-content-mechanics-of-the-for-loop" aria-label="Permalink: Mechanics of the For Loop" href="#mechanics-of-the-for-loop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Parse and evaluate the count value to determine the number of iterations</li>
<li>For each iteration, set the loop variable to the current index (starting from 0)</li>
<li>Also set the <code>.iteration</code> variable to the 1-based iteration number</li>
<li>Execute all operations in the operations block for each iteration</li>
<li>Clean up the loop variables when done</li>
</ol>

<ul dir="auto">
<li>Repeating an operation a fixed number of times</li>
<li>Creating numbered resources or items</li>
<li>Running tests multiple times</li>
<li>Implementing retry logic with a maximum attempt limit</li>
</ul>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">Within a for loop, both the specified variable (zero-based index) and <code>.iteration</code> (one-based counter) are available.</p>
</div>

<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Run a For Loop&#34;
  control_flow:
    type: &#34;for&#34;
    count: 5
    variable: &#34;i&#34;
  operations:
    - name: &#34;Print Iteration&#34;
      command: &#34;echo &#39;Running iteration {{ .iteration }} (zero-based index: {{ .i }})&#39;&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Run a For Loop<span>&#34;</span></span>
  <span>control_flow</span>:
    <span>type</span>: <span><span>&#34;</span>for<span>&#34;</span></span>
    <span>count</span>: <span>5</span>
    <span>variable</span>: <span><span>&#34;</span>i<span>&#34;</span></span>
  <span>operations</span>:
    - <span>name</span>: <span><span>&#34;</span>Print Iteration<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>echo &#39;Running iteration {{ .iteration }} (zero-based index: {{ .i }})&#39;<span>&#34;</span></span></pre></div>
<p dir="auto">You can also use a dynamic count:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Get Count&#34;
  id: &#34;count&#34;
  command: &#34;echo &#39;3&#39;&#34;
  transform: &#34;{{ trim .input }}&#34;

- name: &#34;Dynamic For Loop&#34;
  control_flow:
    type: &#34;for&#34;
    count: &#34;{{ .count }}&#34;
    variable: &#34;step&#34;
  operations:
    - name: &#34;Execute Step&#34;
      command: &#34;echo &#39;Executing step {{ .step }} of {{ .count }}&#39;&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Get Count<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>count<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>echo &#39;3&#39;<span>&#34;</span></span>
  <span>transform</span>: <span><span>&#34;</span>{{ trim .input }}<span>&#34;</span></span>

- <span>name</span>: <span><span>&#34;</span>Dynamic For Loop<span>&#34;</span></span>
  <span>control_flow</span>:
    <span>type</span>: <span><span>&#34;</span>for<span>&#34;</span></span>
    <span>count</span>: <span><span>&#34;</span>{{ .count }}<span>&#34;</span></span>
    <span>variable</span>: <span><span>&#34;</span>step<span>&#34;</span></span>
  <span>operations</span>:
    - <span>name</span>: <span><span>&#34;</span>Execute Step<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>echo &#39;Executing step {{ .step }} of {{ .count }}&#39;<span>&#34;</span></span></pre></div>

<p dir="auto">You can repeatedly execute operations as long as a condition remains true.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Key While Loop Components</h4><a id="user-content-key-while-loop-components" aria-label="Permalink: Key While Loop Components" href="#key-while-loop-components"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong>control_flow</strong>
<ul dir="auto">
<li><strong>type</strong>: while</li>
<li><strong>condition</strong>: The condition to evaluate before each iteration</li>
</ul>
</li>
<li><strong>operations</strong>: The sub-operations to perform for each iteration</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Mechanics of the While Loop</h4><a id="user-content-mechanics-of-the-while-loop" aria-label="Permalink: Mechanics of the While Loop" href="#mechanics-of-the-while-loop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Evaluate the condition before each iteration</li>
<li>If the condition is true, execute the operations and repeat</li>
<li>If the condition is false, exit the loop</li>
<li>An <code>.iteration</code> variable is automatically set to track the current iteration (starting from 1)</li>
<li>A safety limit prevents infinite loops (maximum 1000 iterations)</li>
</ol>

<ul dir="auto">
<li>Polling for a condition (e.g., waiting for a service to be ready)</li>
<li>Processing data until a certain state is reached</li>
<li>Implementing retry logic with conditional termination</li>
<li>Continuously monitoring resources until a specific event occurs</li>
</ul>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>Tip</p><p dir="auto">Within a while loop, the <code>.iteration</code> variable lets you track how many iterations have occurred.</p>
</div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Example While Loop Recipes</h4><a id="user-content-example-while-loop-recipes" aria-label="Permalink: Example While Loop Recipes" href="#example-while-loop-recipes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Initialize Status&#34;
  id: &#34;status&#34;
  command: &#34;echo &#39;running&#39;&#34;
  transform: &#34;{{ trim .input }}&#34;
  silent: true

- name: &#34;Wait For Completion&#34;
  control_flow:
    type: &#34;while&#34;
    condition: &#34;{{ contains .status `running` }}&#34;
  operations:
    - name: &#34;Check Status&#34;
      command: &#34;echo &#39;Checking status (iteration {{ .iteration }})...&#39;&#34;
      id: &#34;status&#34;
      transform: &#34;{{ if eq .iteration 5 }}completed{{ else }}running{{ end }}&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Initialize Status<span>&#34;</span></span>
  <span>id</span>: <span><span>&#34;</span>status<span>&#34;</span></span>
  <span>command</span>: <span><span>&#34;</span>echo &#39;running&#39;<span>&#34;</span></span>
  <span>transform</span>: <span><span>&#34;</span>{{ trim .input }}<span>&#34;</span></span>
  <span>silent</span>: <span>true</span>

- <span>name</span>: <span><span>&#34;</span>Wait For Completion<span>&#34;</span></span>
  <span>control_flow</span>:
    <span>type</span>: <span><span>&#34;</span>while<span>&#34;</span></span>
    <span>condition</span>: <span><span>&#34;</span>{{ contains .status `running` }}<span>&#34;</span></span>
  <span>operations</span>:
    - <span>name</span>: <span><span>&#34;</span>Check Status<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>echo &#39;Checking status (iteration {{ .iteration }})...&#39;<span>&#34;</span></span>
      <span>id</span>: <span><span>&#34;</span>status<span>&#34;</span></span>
      <span>transform</span>: <span><span>&#34;</span>{{ if eq .iteration 5 }}completed{{ else }}running{{ end }}<span>&#34;</span></span></pre></div>
<p dir="auto">Real-world polling example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="- name: &#34;Poll Service Until Ready&#34;
  control_flow:
    type: &#34;while&#34;
    condition: &#34;{{ ne .status `ready` }}&#34;
  operations:
    - name: &#34;Check Service Status&#34;
      command: &#34;curl -s http://service/status&#34;
      id: &#34;status&#34;
      transform: &#34;{{ trim .input }}&#34;"><pre>- <span>name</span>: <span><span>&#34;</span>Poll Service Until Ready<span>&#34;</span></span>
  <span>control_flow</span>:
    <span>type</span>: <span><span>&#34;</span>while<span>&#34;</span></span>
    <span>condition</span>: <span><span>&#34;</span>{{ ne .status `ready` }}<span>&#34;</span></span>
  <span>operations</span>:
    - <span>name</span>: <span><span>&#34;</span>Check Service Status<span>&#34;</span></span>
      <span>command</span>: <span><span>&#34;</span>curl -s http://service/status<span>&#34;</span></span>
      <span>id</span>: <span><span>&#34;</span>status<span>&#34;</span></span>
      <span>transform</span>: <span><span>&#34;</span>{{ trim .input }}<span>&#34;</span></span></pre></div>


<div dir="auto" data-snippet-clipboard-copy-content="recipes:
  - name: &#34;hello-world&#34;
    description: &#34;A simple hello world recipe&#34;
    category: &#34;demo&#34;
    operations:
      - name: &#34;Greet User&#34;
        command: |
          echo &#34;Hello, {{ .name }}!&#34;
          echo &#34;Current time: $(date)&#34;
          echo &#34;Welcome to Shef, the shell recipe tool.&#34;
        prompts:
          - name: &#34;name&#34;
            type: &#34;input&#34;
            message: &#34;What is your name?&#34;
            default: &#34;World&#34;"><pre><span>recipes</span>:
  - <span>name</span>: <span><span>&#34;</span>hello-world<span>&#34;</span></span>
    <span>description</span>: <span><span>&#34;</span>A simple hello world recipe<span>&#34;</span></span>
    <span>category</span>: <span><span>&#34;</span>demo<span>&#34;</span></span>
    <span>operations</span>:
      - <span>name</span>: <span><span>&#34;</span>Greet User<span>&#34;</span></span>
        <span>command</span>: <span>|</span>
<span>          echo &#34;Hello, {{ .name }}!&#34;</span>
<span>          echo &#34;Current time: $(date)&#34;</span>
<span>          echo &#34;Welcome to Shef, the shell recipe tool.&#34;</span>
<span></span>        <span>prompts</span>:
          - <span>name</span>: <span><span>&#34;</span>name<span>&#34;</span></span>
            <span>type</span>: <span><span>&#34;</span>input<span>&#34;</span></span>
            <span>message</span>: <span><span>&#34;</span>What is your name?<span>&#34;</span></span>
            <span>default</span>: <span><span>&#34;</span>World<span>&#34;</span></span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="recipes:
  - name: &#34;conditional&#34;
    description: &#34;A simple demo of conditional operations using direct prompt values&#34;
    category: &#34;demo&#34;
    operations:
      - name: &#34;Choose Fruit&#34;
        id: &#34;choose&#34;
        command: &#39;echo &#34;You selected: {{ .fruit }}&#34;&#39;
        prompts:
          - name: &#34;fruit&#34;
            type: &#34;select&#34;
            message: &#34;Choose a fruit:&#34;
            options:
              - &#34;Apples&#34;
              - &#34;Oranges&#34;

      - name: &#34;Apple Operation&#34;
        id: &#34;apple&#34;
        command: echo &#34;This is the apple operation! 🍎&#34;
        condition: &#34;.fruit == &#39;Apples&#39;&#34;

      - name: &#34;Orange Operation&#34;
        id: &#34;orange&#34;
        command: echo &#34;This is the orange operation! 🍊&#34;
        condition: &#34;.fruit == &#39;Oranges&#39;&#34;"><pre><span>recipes</span>:
  - <span>name</span>: <span><span>&#34;</span>conditional<span>&#34;</span></span>
    <span>description</span>: <span><span>&#34;</span>A simple demo of conditional operations using direct prompt values<span>&#34;</span></span>
    <span>category</span>: <span><span>&#34;</span>demo<span>&#34;</span></span>
    <span>operations</span>:
      - <span>name</span>: <span><span>&#34;</span>Choose Fruit<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>choose<span>&#34;</span></span>
        <span>command</span>: <span><span>&#39;</span>echo &#34;You selected: {{ .fruit }}&#34;<span>&#39;</span></span>
        <span>prompts</span>:
          - <span>name</span>: <span><span>&#34;</span>fruit<span>&#34;</span></span>
            <span>type</span>: <span><span>&#34;</span>select<span>&#34;</span></span>
            <span>message</span>: <span><span>&#34;</span>Choose a fruit:<span>&#34;</span></span>
            <span>options</span>:
              - <span><span>&#34;</span>Apples<span>&#34;</span></span>
              - <span><span>&#34;</span>Oranges<span>&#34;</span></span>

      - <span>name</span>: <span><span>&#34;</span>Apple Operation<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>apple<span>&#34;</span></span>
        <span>command</span>: <span>echo &#34;This is the apple operation! 🍎&#34;</span>
        <span>condition</span>: <span><span>&#34;</span>.fruit == &#39;Apples&#39;<span>&#34;</span></span>

      - <span>name</span>: <span><span>&#34;</span>Orange Operation<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>orange<span>&#34;</span></span>
        <span>command</span>: <span>echo &#34;This is the orange operation! 🍊&#34;</span>
        <span>condition</span>: <span><span>&#34;</span>.fruit == &#39;Oranges&#39;<span>&#34;</span></span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="recipes:
  - name: &#34;transform&#34;
    description: &#34;A simple demo of data transformation and pipeline flow&#34;
    category: &#34;demo&#34;
    operations:
      - name: &#34;Generate a Simple List&#34;
        id: &#34;generate&#34;
        command: |
          echo &#34;apple
          banana
          cherry
          dragonfruit
          eggplant&#34;

      - name: &#34;Filter Items&#34;
        id: &#34;filter&#34;
        command: &#34;cat&#34;
        transform: &#34;{{ filter .input `a` }}&#34;
        silent: true

      - name: &#34;Display Results&#34;
        id: &#34;display&#34;
        command: &#34;echo &#39;Items containing `a`:\n{{ .filter }}&#39;&#34;"><pre><span>recipes</span>:
  - <span>name</span>: <span><span>&#34;</span>transform<span>&#34;</span></span>
    <span>description</span>: <span><span>&#34;</span>A simple demo of data transformation and pipeline flow<span>&#34;</span></span>
    <span>category</span>: <span><span>&#34;</span>demo<span>&#34;</span></span>
    <span>operations</span>:
      - <span>name</span>: <span><span>&#34;</span>Generate a Simple List<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>generate<span>&#34;</span></span>
        <span>command</span>: <span>|</span>
<span>          echo &#34;apple</span>
<span>          banana</span>
<span>          cherry</span>
<span>          dragonfruit</span>
<span>          eggplant&#34;</span>
<span></span>
<span></span>      - <span>name</span>: <span><span>&#34;</span>Filter Items<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>filter<span>&#34;</span></span>
        <span>command</span>: <span><span>&#34;</span>cat<span>&#34;</span></span>
        <span>transform</span>: <span><span>&#34;</span>{{ filter .input `a` }}<span>&#34;</span></span>
        <span>silent</span>: <span>true</span>

      - <span>name</span>: <span><span>&#34;</span>Display Results<span>&#34;</span></span>
        <span>id</span>: <span><span>&#34;</span>display<span>&#34;</span></span>
        <span>command</span>: <span><span>&#34;</span>echo &#39;Items containing `a`:<span>\n</span>{{ .filter }}&#39;<span>&#34;</span></span></pre></div>

<p dir="auto">To create your own recipes:</p>
<ol dir="auto">
<li>Create your user directory: <code>mkdir -p ~/.shef/user</code> (if it does not already exist)</li>
<li>Create a new YAML file: <code>touch ~/.shef/user/my-recipes.yaml</code></li>
<li>Build and develop your recipes following the instructions above</li>
<li>Run <code>shef ls</code> to see your new recipes</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">AI-Assisted Recipe Creation</h2><a id="user-content-ai-assisted-recipe-creation" aria-label="Permalink: AI-Assisted Recipe Creation" href="#ai-assisted-recipe-creation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can generate powerful Shef recipes quickly using AI tools like ChatGPT, Claude, or other large language models.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Using AI to Create Recipes</h3><a id="user-content-using-ai-to-create-recipes" aria-label="Permalink: Using AI to Create Recipes" href="#using-ai-to-create-recipes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Copy the prompt below</li>
<li>Paste it into your AI assistant of choice</li>
<li>Replace <code>[DESCRIBE YOUR WORKFLOW IN DETAIL]</code> with a detailed description of your recipe&#39;s workflow</li>
<li>The AI will generate a complete Shef recipe based on your description</li>
<li>Test and iterate until the recipe works as expected</li>
</ol>

<p dir="auto">Here&#39;s an example of how to fill in your workflow description:</p>
<div data-snippet-clipboard-copy-content="I need a Docker management workflow that helps me clean up unused containers and images to free up disk space.

The workflow should:
1. Show the current Docker disk usage
2. List all stopped containers and allow me to select which ones to remove
3. Confirm before removing the selected containers
4. List dangling images (unused) and allow me to select which ones to remove
5. Offer an option to perform a more aggressive cleanup (removing all unused images)
6. Show before/after disk usage comparison
7. Include error handling in case any operation fails

The recipe should be interactive and safe, requiring confirmation before any destructive operations."><pre><code>I need a Docker management workflow that helps me clean up unused containers and images to free up disk space.

The workflow should:
1. Show the current Docker disk usage
2. List all stopped containers and allow me to select which ones to remove
3. Confirm before removing the selected containers
4. List dangling images (unused) and allow me to select which ones to remove
5. Offer an option to perform a more aggressive cleanup (removing all unused images)
6. Show before/after disk usage comparison
7. Include error handling in case any operation fails

The recipe should be interactive and safe, requiring confirmation before any destructive operations.
</code></pre></div>

<ul dir="auto">
<li>Use the latest AI models with advanced reasoning capabilities</li>
<li>Be specific about what commands should be executed at each step</li>
<li>Mention if you need interactive prompts, conditions, or transformations</li>
<li>For complex workflows, break down your requirements into clear, logical steps</li>
<li>Include any specific error handling or conditional branches you need</li>
<li>Request comments in the generated recipe to explain complex sections</li>
<li>Ask the AI to analyze and iterate on its recipe solution, considering edge cases and improvements</li>
<li>If the first recipe doesn&#39;t fully meet your needs, refine your requirements and ask for adjustments</li>
</ul>
<p dir="auto">Remember, the AI-generated recipes can provide an excellent starting point that you can further customize to fit your
exact needs.</p>

<div data-snippet-clipboard-copy-content="I need help creating a Shef recipe. Shef is a CLI tool that combines shell commands into reusable recipes defined in YAML.

[DESCRIBE YOUR WORKFLOW IN DETAIL]

A Shef recipe is defined in YAML with this structure:

recipes:
  - name: &#34;short-name&#34;
    description: &#34;Human-readable description&#34;
    category: &#34;category&#34;
    author: &#34;optional author&#34;
    operations:
      - name: &#34;Operation Name&#34;
        id: &#34;unique_id&#34;
        command: &#34;shell command&#34;
        execution_mode: &#34;standard|interactive|stream&#34;  # How the command runs
        silent: true|false  # Whether to suppress the command&#39;s output
        condition: &#34;optional condition&#34;
        on_success: &#34;next_op_id&#34;
        on_failure: &#34;fallback_op_id&#34;
        transform: &#34;{{ .input | transformation }}&#34;
        prompts:
          - name: &#34;variable_name&#34;
            type: &#34;input|select|confirm|password|multiselect|number|editor|path|autocomplete&#34;
            message: &#34;Prompt message&#34;
            default: &#34;Default value&#34;
            help_text: &#34;Additional help information&#34;
            required: true|false  # Whether input is required
            options: [&#34;option1&#34;, &#34;option2&#34;]  # For select/multiselect/autocomplete types
            source_operation: &#34;operation_id&#34;  # For dynamic options
            source_transform: &#34;{{ .input | transform }}&#34;  # For processing source options
            min_value: 0  # For number type
            max_value: 100  # For number type
            file_extensions: [&#34;txt&#34;, &#34;json&#34;]  # For path type
            multiple_limit: 3  # For multiselect type
            editor_cmd: &#34;vim&#34;  # For editor type
        control_flow:
          type: &#34;foreach|for|while&#34;  # Type of control flow
          collection: &#34;Item 1\nItem 2\nItem 3&#34;  # Items to iterate over (foreach loops)
          as: &#34;item&#34;  # Variable name for current item (foreach loops)
          count: 5  # Number of iterations (for loops)
          variable: &#34;i&#34;  # Variable name for iteration index (for loops)
          condition: &#34;{{ lt .counter 5 }}&#34;  # Condition to check (while loops)
        operations:  # Operations to perform for each iteration
          - name: &#34;Sub Operation&#34;
            # command: &#34;echo &#39;Processing {{ .item }}&#39;&#34; # foreach loop
            # command: &#34;echo &#39;Iteration {{ .i }} of 5&#39;&#34; # for loop
            # command: &#34;echo &#39;While iteration {{ .iteration }}&#39;&#34; # while loop

RECIPE MECHANICS:
1. Operations execute in sequence unless redirected by on_success/on_failure
2. Each operation&#39;s output becomes input to the next operation
3. Variables from prompts are accessible as {{ .variable_name }}
4. Operation outputs are accessible as {{ .operation_id }}
5. You can combine variables and operation outputs in command templates
6. Control flow structures like foreach allow iterating over collections

CONTROL FLOW STRUCTURES:
- foreach: Iterate over a collection of items
  - collection: Newline-separated list of items (can be fixed or from operation output)
  - as: Variable name to assign each item during iteration
  - operations: Operations to execute for each item (with access to the iteration variable)
- for: Execute operations a fixed number of times
  - count: Number of iterations to perform (can be fixed or from operation output)
  - variable: Variable name for the current zero-based index (optional, defaults to &#34;i&#34;)
  - operations: Operations to execute for each iteration (with access to the index variable and .iteration)
- while: Execute operations as long as a condition is true
  - condition: Expression to evaluate before each iteration
  - operations: Operations to execute while the condition is true (with access to .iteration)

INTERACTIVE PROMPTS:
- input: Free text input (default: string)
- select: Choose from options (static or dynamic from previous operation)
- confirm: Yes/no boolean question
- password: Masked text input
- multiselect: Choose multiple options
- number: Numeric input with range validation
- editor: Multi-line text input in an editor
- path: File path with validation
- autocomplete: Selection with filtering

TRANSFORMATION EXAMPLES:
- Trim whitespace: {{ .input | trim }}
- Split by delimiter: {{ .input | split &#34;,&#34; }}
- Join array: {{ .input | join &#34;\n&#34; }}
- Filter lines: {{ .input | filter &#34;pattern&#34; }} or {{ .input | grep &#34;pattern&#34; }}
- Extract field: {{ .input | cut &#34;:&#34; 1 }}
- Remove prefix/suffix: {{ .input | trimPrefix &#34;foo&#34; }} {{ .input | trimSuffix &#34;bar&#34; }}
- Check content: {{ if contains .input &#34;pattern&#34; }}yes{{ end }}
- Replace text: {{ .input | replace &#34;old&#34; &#34;new&#34; }}
- Math operations: {{ .input | atoi | add 5 | mul 2 | div 3 | sub 1 }}
- Execute command: {{ exec &#34;date&#34; }}

CONDITIONAL LOGIC:
- Variable equality: variable == &#34;value&#34; or variable != &#34;value&#34;
- Operation success/failure: operation_id.success or operation_id.failure
- Boolean operators: condition1 &amp;&amp; condition2, condition1 || condition2, !condition
- Numeric comparison: value &gt; 5, count &lt;= 10
- Complex example: (check_files.success &amp;&amp; has_tests == true) || skip_tests == true

ADVANCED FEATURES:
- Dynamic selection options from previous commands
- Conditional branching based on operation results
- Multi-step workflows with error handling
- Custom error messages and recovery steps
- Transforming outputs between operations
- Execution modes (standard or interactive)
- Silent operations that suppress output

EXAMPLE RECIPE PATTERNS:
1. Get input → Process → Show result
2. List options → Select one → Take action
3. Check condition → Branch based on result → Handle each case
4. Execute command → Transform output → Use in next command
5. Try operation → Handle success/failure differently

Please create a complete Shef recipe that accomplishes my goal, with proper indentation and comments explaining complex parts."><pre lang="text"><code>I need help creating a Shef recipe. Shef is a CLI tool that combines shell commands into reusable recipes defined in YAML.

[DESCRIBE YOUR WORKFLOW IN DETAIL]

A Shef recipe is defined in YAML with this structure:

recipes:
  - name: &#34;short-name&#34;
    description: &#34;Human-readable description&#34;
    category: &#34;category&#34;
    author: &#34;optional author&#34;
    operations:
      - name: &#34;Operation Name&#34;
        id: &#34;unique_id&#34;
        command: &#34;shell command&#34;
        execution_mode: &#34;standard|interactive|stream&#34;  # How the command runs
        silent: true|false  # Whether to suppress the command&#39;s output
        condition: &#34;optional condition&#34;
        on_success: &#34;next_op_id&#34;
        on_failure: &#34;fallback_op_id&#34;
        transform: &#34;{{ .input | transformation }}&#34;
        prompts:
          - name: &#34;variable_name&#34;
            type: &#34;input|select|confirm|password|multiselect|number|editor|path|autocomplete&#34;
            message: &#34;Prompt message&#34;
            default: &#34;Default value&#34;
            help_text: &#34;Additional help information&#34;
            required: true|false  # Whether input is required
            options: [&#34;option1&#34;, &#34;option2&#34;]  # For select/multiselect/autocomplete types
            source_operation: &#34;operation_id&#34;  # For dynamic options
            source_transform: &#34;{{ .input | transform }}&#34;  # For processing source options
            min_value: 0  # For number type
            max_value: 100  # For number type
            file_extensions: [&#34;txt&#34;, &#34;json&#34;]  # For path type
            multiple_limit: 3  # For multiselect type
            editor_cmd: &#34;vim&#34;  # For editor type
        control_flow:
          type: &#34;foreach|for|while&#34;  # Type of control flow
          collection: &#34;Item 1\nItem 2\nItem 3&#34;  # Items to iterate over (foreach loops)
          as: &#34;item&#34;  # Variable name for current item (foreach loops)
          count: 5  # Number of iterations (for loops)
          variable: &#34;i&#34;  # Variable name for iteration index (for loops)
          condition: &#34;{{ lt .counter 5 }}&#34;  # Condition to check (while loops)
        operations:  # Operations to perform for each iteration
          - name: &#34;Sub Operation&#34;
            # command: &#34;echo &#39;Processing {{ .item }}&#39;&#34; # foreach loop
            # command: &#34;echo &#39;Iteration {{ .i }} of 5&#39;&#34; # for loop
            # command: &#34;echo &#39;While iteration {{ .iteration }}&#39;&#34; # while loop

RECIPE MECHANICS:
1. Operations execute in sequence unless redirected by on_success/on_failure
2. Each operation&#39;s output becomes input to the next operation
3. Variables from prompts are accessible as {{ .variable_name }}
4. Operation outputs are accessible as {{ .operation_id }}
5. You can combine variables and operation outputs in command templates
6. Control flow structures like foreach allow iterating over collections

CONTROL FLOW STRUCTURES:
- foreach: Iterate over a collection of items
  - collection: Newline-separated list of items (can be fixed or from operation output)
  - as: Variable name to assign each item during iteration
  - operations: Operations to execute for each item (with access to the iteration variable)
- for: Execute operations a fixed number of times
  - count: Number of iterations to perform (can be fixed or from operation output)
  - variable: Variable name for the current zero-based index (optional, defaults to &#34;i&#34;)
  - operations: Operations to execute for each iteration (with access to the index variable and .iteration)
- while: Execute operations as long as a condition is true
  - condition: Expression to evaluate before each iteration
  - operations: Operations to execute while the condition is true (with access to .iteration)

INTERACTIVE PROMPTS:
- input: Free text input (default: string)
- select: Choose from options (static or dynamic from previous operation)
- confirm: Yes/no boolean question
- password: Masked text input
- multiselect: Choose multiple options
- number: Numeric input with range validation
- editor: Multi-line text input in an editor
- path: File path with validation
- autocomplete: Selection with filtering

TRANSFORMATION EXAMPLES:
- Trim whitespace: {{ .input | trim }}
- Split by delimiter: {{ .input | split &#34;,&#34; }}
- Join array: {{ .input | join &#34;\n&#34; }}
- Filter lines: {{ .input | filter &#34;pattern&#34; }} or {{ .input | grep &#34;pattern&#34; }}
- Extract field: {{ .input | cut &#34;:&#34; 1 }}
- Remove prefix/suffix: {{ .input | trimPrefix &#34;foo&#34; }} {{ .input | trimSuffix &#34;bar&#34; }}
- Check content: {{ if contains .input &#34;pattern&#34; }}yes{{ end }}
- Replace text: {{ .input | replace &#34;old&#34; &#34;new&#34; }}
- Math operations: {{ .input | atoi | add 5 | mul 2 | div 3 | sub 1 }}
- Execute command: {{ exec &#34;date&#34; }}

CONDITIONAL LOGIC:
- Variable equality: variable == &#34;value&#34; or variable != &#34;value&#34;
- Operation success/failure: operation_id.success or operation_id.failure
- Boolean operators: condition1 &amp;&amp; condition2, condition1 || condition2, !condition
- Numeric comparison: value &gt; 5, count &lt;= 10
- Complex example: (check_files.success &amp;&amp; has_tests == true) || skip_tests == true

ADVANCED FEATURES:
- Dynamic selection options from previous commands
- Conditional branching based on operation results
- Multi-step workflows with error handling
- Custom error messages and recovery steps
- Transforming outputs between operations
- Execution modes (standard or interactive)
- Silent operations that suppress output

EXAMPLE RECIPE PATTERNS:
1. Get input → Process → Show result
2. List options → Select one → Take action
3. Check condition → Branch based on result → Handle each case
4. Execute command → Transform output → Use in next command
5. Try operation → Handle success/failure differently

Please create a complete Shef recipe that accomplishes my goal, with proper indentation and comments explaining complex parts.
</code></pre></div>


<p dir="auto"><strong>Recipe not found</strong></p>
<ul dir="auto">
<li>Check if you&#39;re using the correct name and category</li>
<li>Use <code>shef ls</code> to see available recipes</li>
<li>Check your recipe file syntax</li>
</ul>
<p dir="auto"><strong>Command fails with unexpected output</strong></p>
<ul dir="auto">
<li>Remember all commands run through a shell, so shell syntax applies</li>
<li>Escape special characters in command strings</li>
<li>Use the <code>transform</code> field to format output</li>
</ul>
<p dir="auto"><strong>Prompt validation errors</strong></p>
<ul dir="auto">
<li>Ensure minimum/maximum values are within range</li>
<li>Check that file paths exist and have correct extensions</li>
<li>Verify select options contain the default value</li>
</ul>

<p dir="auto">Thank you for taking an interest in contributing to Shef!</p>


<ol dir="auto">
<li>
<p dir="auto"><strong>Fork the Repository</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Fork via GitHub UI, then clone your fork
git clone git@github.com:yourusername/shef.git
cd shef"><pre><span><span>#</span> Fork via GitHub UI, then clone your fork</span>
git clone git@github.com:yourusername/shef.git
<span>cd</span> shef</pre></div>
</li>
<li>
<p dir="auto"><strong>Set Up Development Environment</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Install development dependencies
go mod download

# Build the development version
go build -o shef"><pre><span><span>#</span> Install development dependencies</span>
go mod download

<span><span>#</span> Build the development version</span>
go build -o shef</pre></div>
</li>
<li>
<p dir="auto"><strong>Create a New Branch</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="git checkout -b my-awesome-feature"><pre>git checkout -b my-awesome-feature</pre></div>
</li>
</ol>

<ul dir="auto">
<li><strong>Code Style</strong>: Follow standard Go conventions and the existing style in the codebase</li>
<li><strong>Documentation</strong>: Update documentation for any new features or changes</li>
<li><strong>Commit Messages</strong>: Write clear, descriptive commit messages explaining your changes</li>
<li><strong>Tests</strong>: Update tests accordingly</li>
</ul>

<ol dir="auto">
<li>
<p dir="auto"><strong>Push to Your Fork</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="git push origin my-awesome-feature"><pre>git push origin my-awesome-feature</pre></div>
</li>
<li>
<p dir="auto"><strong>Create a Pull Request</strong>: Visit your fork on GitHub and create a pull request against the main repository</p>
</li>
<li>
<p dir="auto"><strong>PR Description</strong>: Include a clear description of what your changes do and why they should be included</p>
</li>
<li>
<p dir="auto"><strong>Code Review</strong>: Respond to any feedback during the review process</p>
</li>
</ol>

<p dir="auto">Sharing your recipes helps grow the Shef ecosystem and benefits the entire community.</p>

<ol dir="auto">
<li>
<p dir="auto"><strong>Develop and Test Your Recipe Locally</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create your recipe in the user directory first
mkdir -p ~/.shef/user
vim ~/.shef/user/my-recipe.yaml

# Test thoroughly
shef -U my-category my-recipe-name"><pre><span><span>#</span> Create your recipe in the user directory first</span>
mkdir -p <span>~</span>/.shef/user
vim <span>~</span>/.shef/user/my-recipe.yaml

<span><span>#</span> Test thoroughly</span>
shef -U my-category my-recipe-name</pre></div>
</li>
<li>
<p dir="auto"><strong>Recipe Quality Guidelines</strong></p>
<ul dir="auto">
<li>Include clear descriptions for the recipe and each operation</li>
<li>Add helpful prompts with descriptive messages and defaults</li>
<li>Handle errors gracefully</li>
<li>Follow YAML best practices</li>
<li>Comment complex transformations or conditionals</li>
</ul>
</li>
<li>
<p dir="auto"><strong>Submitting Your Recipe</strong></p>
<p dir="auto"><strong>Option 1: Via Pull Request</strong></p>
<ul dir="auto">
<li>Fork the Shef repository</li>
<li>Add your recipe to the <code>recipes/public/</code> directory</li>
<li>Create a pull request with your recipe</li>
</ul>
<p dir="auto"><strong>Option 2: Via Issue</strong></p>
<ul dir="auto">
<li>Create a new issue on the Shef repository</li>
<li>Attach your recipe file or paste its contents</li>
<li>Describe what your recipe does and why it&#39;s useful</li>
</ul>
</li>
</ol>

<p dir="auto">When submitting a recipe, include a section in your PR or issue that explains:</p>
<ol dir="auto">
<li><strong>Purpose</strong>: What problem does your recipe solve?</li>
<li><strong>Usage</strong>: How to use the recipe, including example commands</li>
<li><strong>Requirements</strong>: Any special requirements or dependencies</li>
<li><strong>Examples</strong>: Sample outputs or use cases</li>
</ol>

<ul dir="auto">
<li>Be respectful of others&#39; contributions</li>
<li>Help review pull requests and test others&#39; recipes</li>
<li>Report bugs and suggest improvements</li>
<li>Share your Shef success stories and use cases</li>
</ul>

<p dir="auto">If you need help with your contribution, you can:</p>
<ul dir="auto">
<li>Open an issue on GitHub</li>
<li>Ask questions in the discussions section</li>
<li>Contact us directly</li>
</ul>
</article></div></div>
  </body>
</html>
