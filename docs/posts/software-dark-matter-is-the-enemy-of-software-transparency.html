<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.chainguard.dev/unchained/software-dark-matter-is-the-enemy-of-software-transparency">Original</a>
    <h1>Software dark matter is the enemy of software transparency</h1>
    
    <div id="readability-page-1" class="page"><div><p>The universe and software might be more similar than you imagine. The universe is 27 percent <a href="https://science.nasa.gov/astrophysics/focus-areas/what-is-dark-energy">dark matter</a>, invisible matter that we can’t detect with telescopes and radios. Much like regular dark matter, software dark matter comprises packages that exist but which are effectively unseen, software that is untracked by typical tools like a package manager or a software bill of materials (SBOM). According to our own estimates examining several hundred popular open source software containers, software dark matter constitutes 32 percent of analyzed containers.</p><p>And just like cosmological dark matter poses problems for understanding the universe, software dark matter complicates the job of anyone seeking software transparency—that elusive goal currently associated with <a href="https://www.ntia.gov/SBOM">SBOM enthusiasts</a> who seek a world in which complete and accurate knowledge about software is normal. Unfortunately, software dark matter has more tangible effects on software users than the physical equivalent: the more software dark matter present in a container, for instance, the more challenging it is for software analysis tools to find and correctly identify that software. And when software analysis tools can’t correctly identify software, there’s a greater chance that scanning tools will fail to find software vulnerabilities that are present, undermining one of the central goals of software transparency.</p><h3><strong>TL;DR</strong></h3><p>We performed an analysis to quantify the percentage of files within 350 popular open source software containers that are software dark matter. The analysis used a tool that we wrote and open-sourced, <a href="https://github.com/chainguard-dev/darkfiles">darkfiles</a>, for measuring software dark matter. The findings include:</p><div><ul><li>Popular open source containers are, on average, composed of 32 percent software dark matter. Using an average weighted by the number of files in a container, the estimate rises to 63 percent. These percentages suggest that software dark matter is a pervasive phenomenon and that software developers will need to find methods of either avoiding or coping with software dark matter.</li><li>Approximately 30 percent of the analyzed containers included less than one percent of software dark matter. The data and analysis suggests that building and using containers without blind spots is possible but not uniformly practiced.</li></ul></div><p>After further defining software dark matter and presenting and analyzing a software dark matter dataset, this piece calls for reducing software dark matter to enable software transparency.</p><h3>‍<strong>What Is Software Dark Matter?</strong></h3><p>Software dark matter refers to files that are not tracked by operating system (OS) package managers (like `apt` or `apk`), which renders these files and the packages they represent invisible—or at least complicated to find—to software composition analysis and security scanning tools. Tools like <a href="https://github.com/chainguard-dev/darkfiles">darkfiles</a> can therefore be used to perform a straightforward calculation: what percentage of files are tracked by the underlying OS package manager.</p><h3><strong>Why Does Software Dark Matter Matter?</strong></h3><p>Software dark matter makes the job of software analysis tools harder, both conceptually and technically. This matters because when software analysis tools fail to find and correctly identify software components, then, most importantly, it becomes more likely that security scanning tools fail to flag known software security vulnerabilities. In addition, when software analysis tools fail in their function, it also enables attackers to slip in malicious, unwanted software.</p><p>It’s like finding and identifying goods shipped on a container ship but not placed in a shipping manifest: these goods are likely to be overlooked and treated as second-class cargo likely to be forgotten. Of course, there are <a href="https://kccncna2022.sched.com/event/182GT/sbom-x-ray-superpowers-making-better-sboms-using-sboms-brandon-lum-google-chris-phillips-anchore?iframe=no&amp;w=100%&amp;sidebar=yes&amp;bg=no">technical tricks</a> that scanners and other tools can use to find this dark matter, but it’s a complicated endeavor in comparison to checking a package manifest list. The implication is that SBOMs and other means of representing dependency information will likely be incomplete and wrong in a world of pervasive software dark matter, which raises the question…</p><h3>‍<strong>How Much Software Dark Matter Is in Popular Open Source Containers?</strong></h3><p>Before advocates of software transparency declare war on software dark matter, it’s worth understanding how common software dark matter is. A reasonable starting point, though not the final word, is an assessment of the most popular open source containers on Docker Hub. This set of software artifacts represents containers that are commonly used and very likely underpin a wide set of important software applications. This analysis therefore selected 350 containers from among the 1000 most popular container images (<a href="https://gist.github.com/jspeed-meyers/e9b5df9d03dbecd40b73f3240cbb737a">script</a> for collecting popular images). These 350 images had either an Alpine-based or Debian-based operating system, a requirement imposed by the current implementation of the darkfiles tool (<a href="https://gist.github.com/jspeed-meyers/866dfe358f55216ede7bb2b373da7aed">script</a> for identifying OS for containers). All images were then analyzed with darkfiles.</p><p>Figure 1 represents the percentage of software dark matter (along the horizontal axis) in this sample of popular container images. The vertical axis represents the percent of this sample that has a particular amount of software dark matter.</p><figure class="w-richtext-align-center w-richtext-figure-type-image"><p><img src="https://assets.website-files.com/6228fdbc6c971401d02a9c42/636bed03604395e40f5e0af8_cmpfb_PvQe6GCXbthwG0cA9pc_2tYRI9yNLJIEOifaqpAl2N4QL94ogJvTs5Hc1lzp-gkDABpmNDwCZqbcM1MZQE9rAuZPeN0zaO17pRUdONWuLJcSvq2L6nOeF9r1cfjzetRYjwA-d70JDIvaKIR26WCEpfbw0CyPq7WTx1kXRX_qVpnRSA-qzV8xsX-g.png" alt=""/></p><figcaption><strong>Figure 1. Software Dark Matter in Popular Docker Hub Images (n=350)</strong></figcaption></figure><p>The software dark matter graph reveals that approximately thirty percent of the images in this popular Dockerhub image sample have less than one percent software dark matter. Some containers are therefore already building images with little to no software dark matter, although the practice appears to be far from widespread.</p><p>While there is a concentration of containers with high (90 percent or more) software dark matter, the distribution is relatively even, with a wide range of software dark matter percentages. Treating each contained equally, the mean software dark matter percentage is 32 percent and the median is 10 percent. If, however, containers are weighted by the number of files in the container, the mean software dark matter percentage is 63 percent.</p><p>It bears mentioning that many aspects of software dark matter are still unexplored, including what explains the prevalence of this phenomenon and whether these findings are similar across programming language and package manager ecosystems. On a more technical note, our analysis didn’t consider non-system package managers like pip: we don’t know what fraction of this dark matter these tools detect.</p><h3>‍<strong>Less Software Dark Matter → More Software Transparency</strong></h3><p>Software transparency is rightly <em>en vogue</em>. Companies and individuals alike have experienced the downsides of depending on inscrutable software and want reliable means to detect known vulnerable software components and avoid tampering. SBOM <a href="https://federalnewsnetwork.com/commentary/2022/10/when-will-sboms-finally-benefit-the-federal-governments-software-supply-chain/">advocacy</a> epitomizes this demand for software transparency. And while advocates of software transparency acknowledge a wide range of challenges, less appreciated is that software dark matter, whether in containers or elsewhere, will pose a challenge for software transparency.</p><p>Fortunately, software dark matter need not be a permanent obstacle, though we’ll leave approaches to reducing or coping with software dark matter to another day. In short, SBOM advocates, and anyone else committed to software transparency, already have a lot on their plate, but unfortunately it’s time to add yet another challenge: software dark matter.</p><p>‍</p></div></div>
  </body>
</html>
