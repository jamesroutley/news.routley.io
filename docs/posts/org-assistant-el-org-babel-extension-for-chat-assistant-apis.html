<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tyler-dodge/org-assistant">Original</a>
    <h1>Org-assistant.el – Org Babel extension for Chat Assistant APIs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h3 tabindex="-1" dir="auto"><a id="user-content-org-babel-extension-for-chat-assistant-apis" aria-label="Heading link" href="#org-babel-extension-for-chat-assistant-apis"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Org babel extension for Chat Assistant APIs</h3>
<hr/>
<p dir="auto">org-assistant provides support for accessing chat APIs such as
ChatGPT in the context of an org notebook.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tyler-dodge/org-assistant/blob/main/screenshots/example.gif"><img src="https://github.com/tyler-dodge/org-assistant/raw/main/screenshots/example.gif" alt="example" width="400" data-animated-image=""/></a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-installation" aria-label="Heading link" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<p dir="auto">Org-assistant is available on <a href="http://stable.melpa.org/#/org-assistant" rel="nofollow">MELPA</a></p>
<p dir="auto"><kbd>M-x</kbd> <code>package-install</code> <kbd>[RET]</kbd> <code>org-assistant</code> <kbd>[RET]</kbd></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-usage" aria-label="Heading link" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<p dir="auto">It provides a function named org-assistant that serves as
entrypoint for displaying an org assistant buffer.  Also, it can be
used in any org file by using a src block like #+BEGIN_SRC
assistant or #+BEGIN_SRC ?.</p>
<p dir="auto">The API Key is looked up via org-assistant-auth-function, which has
meen tested using the MacOS Keychain.  Alternatively,
org-assistant-auth-function can be a string and directly set to
your API key.</p>
<div data-snippet-clipboard-copy-content="(setq org-assistant-auth-function &#34;&lt;YOUR_API_KEY&gt;&#34;)"><pre><code>(setq org-assistant-auth-function &#34;&lt;YOUR_API_KEY&gt;&#34;)
</code></pre></div>
<p dir="auto">Calling <code>org-assistant</code> interactively will generate an org-assistant buffer for you.
It can be set to a keybinding for quick use like below:</p>
<div data-snippet-clipboard-copy-content="(global-set-key (kbd &#34;C-x C-o&#34;) #&#39;org-assistant)"><pre><code>(global-set-key (kbd &#34;C-x C-o&#34;) #&#39;org-assistant)
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-conversation-evaluation-rules" aria-label="Heading link" href="#conversation-evaluation-rules"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Conversation Evaluation Rules</h3>
<ul dir="auto">
<li>The org tree is traversed up in order to generate the message
list when sending information to the chat endpoint.</li>
<li>It will only use messages from the branch of the tree that the block that
initiated the request is in.</li>
<li>It does not include example blocks or source blocks that appear later in
the org buffer than the initiating block.</li>
<li>noweb support is enabled for all blocks in the conversation based on the
initiating block having the :noweb flag set.</li>
<li>Example blocks are treated as being responses from the assistant by default
if they occur after user messages.</li>
<li>If the example block is before any user source block, they are
treated as system messages to the assistant instead.</li>
</ul>
<p dir="auto">See <a href="https://github.com/tyler-dodge/org-assistant#org-babel-executeassistant">org-babel-execute:assistant</a>
for more details.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-example" aria-label="Heading link" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Example</h3>
<div data-snippet-clipboard-copy-content="* Chat User Question
#+BEGIN_SRC ?
Hi
#+END_SRC

AI Response
#+BEGIN_EXAMPLE
Hello! How can I assist you today?
#+END_EXAMPLE"><pre><code>* Chat User Question
#+BEGIN_SRC ?
Hi
#+END_SRC

AI Response
#+BEGIN_EXAMPLE
Hello! How can I assist you today?
#+END_EXAMPLE
</code></pre></div>
<p dir="auto">When the output is set to png file, the image generation APIs are
called instead.</p>
<div data-snippet-clipboard-copy-content="* Image Generation User Question
#+BEGIN_SRC ? :file sphere.png
Generate a sphere
#+END_SRC

AI Response
#+RESULTS:
file:sphere.png"><pre><code>* Image Generation User Question
#+BEGIN_SRC ? :file sphere.png
Generate a sphere
#+END_SRC

AI Response
#+RESULTS:
file:sphere.png
</code></pre></div>
<p dir="auto">You can introspect the sent conversation using the :echo flag.</p>
<div data-snippet-clipboard-copy-content="* Branching Echo
#+BEGIN_SRC ?
This is the user. Repeat verbatim only: &#34;This is the system&#34;
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
&#34;This is the system&#34;
#+END_EXAMPLE

** Branch A
#+BEGIN_SRC ? :echo
Response A
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
(user . &#34;This is the user. Repeat verbatim only: \&#34;This is the system\&#34;&#34;)
(assistant . &#34;\&#34;This is the system\&#34;&#34;)
(user . &#34;Response A&#34;)
#+END_EXAMPLE

** Branch B
#+BEGIN_SRC ? :echo
Response B
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
(user . &#34;This is the user. Repeat verbatim only: \&#34;This is the system\&#34;&#34;)
(assistant . &#34;\&#34;This is the system\&#34;&#34;)
(user . &#34;Response B&#34;)
#+END_EXAMPLE"><pre><code>* Branching Echo
#+BEGIN_SRC ?
This is the user. Repeat verbatim only: &#34;This is the system&#34;
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
&#34;This is the system&#34;
#+END_EXAMPLE

** Branch A
#+BEGIN_SRC ? :echo
Response A
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
(user . &#34;This is the user. Repeat verbatim only: \&#34;This is the system\&#34;&#34;)
(assistant . &#34;\&#34;This is the system\&#34;&#34;)
(user . &#34;Response A&#34;)
#+END_EXAMPLE

** Branch B
#+BEGIN_SRC ? :echo
Response B
#+END_SRC

#+RESULTS:
#+BEGIN_EXAMPLE
(user . &#34;This is the user. Repeat verbatim only: \&#34;This is the system\&#34;&#34;)
(assistant . &#34;\&#34;This is the system\&#34;&#34;)
(user . &#34;Response B&#34;)
#+END_EXAMPLE
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-comparison-with-other-ai-packages" aria-label="Heading link" href="#comparison-with-other-ai-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Comparison With Other AI Packages</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-org-assistantel-and-org-aiel" aria-label="Heading link" href="#org-assistantel-and-org-aiel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> and <a href="https://github.com/rksm/org-ai">org-ai.el</a></h3>
<ul dir="auto">
<li><a href="https://github.com/rksm/org-ai">org-ai.el</a> is focused more on runtime interaction with AI</li>
<li><a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> is focused more on reproducible sessions
via org babel</li>
<li><a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> supports branching conversations</li>
<li><a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> is not meant to be used downstream
as a library for AI endpoint interactions.</li>
<li>In <a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a>, all interaction is async using org-babel, which allows
for notebook style prompt development</li>
<li>In <a href="https://github.com/rksm/org-ai">org-ai.el</a>, interaction is synchronous and inline,
which is better for in-editor use cases</li>
<li><a href="https://github.com/rksm/org-ai">org-ai.el</a> supports a lot of other AI use cases like text to speech</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-org-assistantel-and-gptel" aria-label="Heading link" href="#org-assistantel-and-gptel"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> and <a href="https://github.com/karthink/gptel">gptel</a></h3>
<ul dir="auto">
<li>Most of the same differences and similarities apply from
<a href="https://github.com/tyler-dodge/org-assistant">org-assistant.el</a> and <a href="https://github.com/rksm/org-ai">org-ai.el</a></li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-feel-free-to-add-a-pull-request-detailing-the-differences-if-there-is-a-package-i-missed" aria-label="Heading link" href="#feel-free-to-add-a-pull-request-detailing-the-differences-if-there-is-a-package-i-missed"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Feel free to add a pull request detailing the differences if there is a package I missed</h3>

<h2 tabindex="-1" dir="auto"><a id="user-content-org-assistant" aria-label="Heading link" href="#org-assistant"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>org-assistant</h2>
<p dir="auto">Prompt the user for an initial prompt for the assistant.</p>
<p dir="auto">Then display a window with the buffer containing the response.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-org-babel-executeassistant" aria-label="Heading link" href="#org-babel-executeassistant"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>org-babel-execute:assistant</h2>
<p dir="auto">Execute an ‘org-assistant’ in an org-babel context.</p>
<p dir="auto">PARAMS is used to enable noweb mode.
If :echo is set, return the conversation that would be sent to the endpoint
instead of evaluating.</p>
<p dir="auto">If :list-models is set, the ‘org-assistant-models-endpoint’
will be called instead.</p>
<p dir="auto">TEXT must be empty if :list-models is set.</p>
<p dir="auto">This is intended to be called via org babel in a src block with Ctrl-C
Ctrl-C like:</p>
<div data-snippet-clipboard-copy-content="#+BEGIN_SRC assistant
Hi
#+END_SRC"><pre><code>#+BEGIN_SRC assistant
Hi
#+END_SRC
</code></pre></div>
<p dir="auto">The response from the assistant will be in the example block
following:</p>
<div data-snippet-clipboard-copy-content="#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE"><pre><code>#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE
</code></pre></div>
<p dir="auto">All of the messages that are in the same branch of the org tree are
included in the request to the assistant.</p>
<div data-snippet-clipboard-copy-content="* Question
#+BEGIN_SRC assistant
Hi
#+END_SRC

#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE

#+BEGIN_SRC assistant
What’s up?
#+END_SRC"><pre><code>* Question
#+BEGIN_SRC assistant
Hi
#+END_SRC

#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE

#+BEGIN_SRC assistant
What’s up?
#+END_SRC
</code></pre></div>
<p dir="auto">Running babel on the second assistant block will send the
conversation:</p>
<div data-snippet-clipboard-copy-content="User: Hi
Assistant: Response
User: What’s up?"><pre><code>User: Hi
Assistant: Response
User: What’s up?
</code></pre></div>
<p dir="auto">Running babel on the first assistant block will only include the
messages before it:</p>

<p dir="auto">Only messages in the same branch will be included:</p>
<div data-snippet-clipboard-copy-content="* Question
#+BEGIN_SRC assistant
Hi
#+END_SRC

#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE
** Branch A
#+BEGIN_SRC assistant
Branch A
#+END_SRC

#+BEGIN_EXAMPLE
Branch A Response
#+END_EXAMPLE

** Branch B
#+BEGIN_SRC assistant
Branch B
#+END_SRC

#+BEGIN_EXAMPLE
Branch B Response
#+END_EXAMPLE"><pre><code>* Question
#+BEGIN_SRC assistant
Hi
#+END_SRC

#+BEGIN_EXAMPLE
Response
#+END_EXAMPLE
** Branch A
#+BEGIN_SRC assistant
Branch A
#+END_SRC

#+BEGIN_EXAMPLE
Branch A Response
#+END_EXAMPLE

** Branch B
#+BEGIN_SRC assistant
Branch B
#+END_SRC

#+BEGIN_EXAMPLE
Branch B Response
#+END_EXAMPLE
</code></pre></div>
<p dir="auto">If you ran Ctrl-C Ctrl-C on Branch B’s src block the conversation sent
to the endpoint would be:</p>
<div data-snippet-clipboard-copy-content="User: Hi
Assistant: Response
User: Branch B
Assistant: Branch B Response"><pre><code>User: Hi
Assistant: Response
User: Branch B
Assistant: Branch B Response
</code></pre></div>
<p dir="auto">‘org-assistant’ also supports image generation.
If the :file attribute is set, the image API will be used.</p>
<p dir="auto">The following is an example of using the image endpoint:</p>
<div data-snippet-clipboard-copy-content="#+BEGIN_SRC assistant :file output.png
An image of the GNU mascot
#+END_SRC"><pre><code>#+BEGIN_SRC assistant :file output.png
An image of the GNU mascot
#+END_SRC
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-org-babel-execute" aria-label="Heading link" href="#org-babel-execute"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>org-babel-execute:?</h2>
<p dir="auto">See ‘org-babel-execute:assistant’.</p>
<p dir="auto">ARGS is routed as is.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-org-assistant-explain-function" aria-label="Heading link" href="#org-assistant-explain-function"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>org-assistant-explain-function</h2>
<p dir="auto">Ask the assistant to explain the function at point.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-org-assistant-write-docstring" aria-label="Heading link" href="#org-assistant-write-docstring"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>org-assistant-write-docstring</h2>
<p dir="auto">Ask the assistant to generate a docstring for the function at point.</p>

<ul dir="auto">
<li>
<p dir="auto"><a href="#org-assistant-auth-function">org-assistant-auth-function</a><a name="user-content-org-assistant-auth-function"></a>:
Function used to get the secret key.
Optionally can be set directly to a string, in which case it will be
used as the OpenAI key.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-mode-visual-line-enabled">org-assistant-mode-visual-line-enabled</a><a name="user-content-org-assistant-mode-visual-line-enabled"></a>:
When non-nil, <code>visual-line-mode</code> is enabled with <code>org-assistant-mode</code>.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-buffer-name">org-assistant-buffer-name</a><a name="user-content-org-assistant-buffer-name"></a>:
The buffer name used for the <code>org-assistant</code> buffer.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-mode-line-format">org-assistant-mode-line-format</a><a name="user-content-org-assistant-mode-line-format"></a>:
The <code>mode-line-format</code> used by the <code>org-assistant</code> buffer.
Set to nil to use <code>mode-line-format</code> instead.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-model">org-assistant-model</a><a name="user-content-org-assistant-model"></a>:
The model used for the assistant.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-curl-command">org-assistant-curl-command</a><a name="user-content-org-assistant-curl-command"></a>:
The path to the curl command used to run requests.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-endpoint">org-assistant-endpoint</a><a name="user-content-org-assistant-endpoint"></a>:
The endpoint used for the assistant.
<code>org-assistant-endpoint-path-chat</code> and <code>org-assistant-endpoint-path-image</code>
contain the paths for the respective APIs.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-endpoint-path-chat">org-assistant-endpoint-path-chat</a><a name="user-content-org-assistant-endpoint-path-chat"></a>:
The path used for the chat API.
See <code>org-assistant-endpoint</code> for the domain.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-endpoint-path-models">org-assistant-endpoint-path-models</a><a name="user-content-org-assistant-endpoint-path-models"></a>:
The path used for the list models API.
See <code>org-assistant-endpoint</code> for the domain.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-endpoint-path-image">org-assistant-endpoint-path-image</a><a name="user-content-org-assistant-endpoint-path-image"></a>:
The endpoint used for the assistant.</p>
</li>
<li>
<p dir="auto"><a href="#org-assistant-parallelism">org-assistant-parallelism</a><a name="user-content-org-assistant-parallelism"></a>:
The max inflight requests to send with <code>org-assistant</code> at once.</p>
</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-contributing" aria-label="Heading link" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributing</h2>
<p dir="auto">Contributions welcome, but forking preferred.
I plan to actively maintain this, but I will be prioritizing features that impact me first.</p>
<p dir="auto">I&#39;ll look at most pull requests eventually, but there is no SLA on those being accepted.</p>
<p dir="auto">Also, I will only respond to pull requests on a case by case basis.
I have no obligation to comment on, justify not accepting, or accept any given pull request.
Feel free to start a fork that has more support in that area.</p>
<p dir="auto">If there&#39;s a great pull request that I&#39;m slow on accepting, feel free to fork and rename the project.</p>
</article>
          </div></div>
  </body>
</html>
