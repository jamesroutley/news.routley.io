<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.rustnote.com/blog/format_strings.html">Original</a>
    <h1>Show HN: My first blog post on Rust 1.58.0 format strings</h1>
    
    <div id="readability-page-1" class="page">
        <!-- Provide site root to javascript -->
        

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        

        <!-- Set the theme before any content is loaded, prevents flash -->
        

        <!-- Hide / unhide sidebar before it is displayed -->
        

        <nav id="sidebar" aria-label="Table of contents">
            
            
        </nav>

        <div id="page-wrapper">

            <div class="page">
                
                
                

                                
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                

                <div id="content">
                    <main>
                        
<h3 id="14th-jan-2022"><a href="#14th-jan-2022">14th Jan 2022</a></h3>
<p><a href="https://blog.rust-lang.org/2022/01/13/Rust-1.58.0.html#captured-identifiers-in-format-strings">Rust 1.58.0 Release Notes</a></p>
<p><a href="https://doc.rust-lang.org/std/fmt/">std::fmt Documentation</a></p>
<p>The <code>Rust 1.58.0</code> update today bought a very nice addition, this is a feature that&#39;s often missed by the growing number of dynamic language users that are giving Rust a try, and it&#39;s now available in stable!</p>
<p>It allows you to put variables from the outside scope directly into format string curly braces:</p>
<pre><code>// In all examples below x = &#34;world&#34;
let x = &#34;world&#34;;
println!(&#34;Hello {x}!&#34;);
</code></pre>
<pre><code>Hello world!
</code></pre>
<p>You can also use format specifiers within the curly braces.</p>
<p>For example with debug output:</p>
<pre><code>let items = vec![10, 20, 30];
println!(&#34;{items:?}&#34;)
</code></pre>
<pre><code>[10, 20, 30]
</code></pre>
<p>Or pretty print the output:</p>
<pre><code>println!(&#34;{items:#?}&#34;)
</code></pre>
<pre><code>[
    10,
    20,
    30,
]
</code></pre>
<p>If you haven&#39;t seen it before, you can set the minimum width of how items are printed to give uniform spacing with <code>:[width]</code>. Example to print a table with even spacing: </p>
<pre><code>let items = [&#34;these&#34;, &#34;words&#34;, &#34;are&#34;, &#34;different&#34;, &#34;sizes&#34;];
let column1 = &#34;item&#34;;
let column2 = &#34;iter&#34;;
println!(&#34;{column1:10}| {column2}&#34;);
println!(&#34;----------------&#34;);
for (i, item) in items.iter().enumerate() {
	println!(&#34;{item:10}: {i}&#34;);
}
</code></pre>
<pre><code>item      | iter
----------------
these     : 0
words     : 1
are       : 2
different : 3
sizes     : 4
</code></pre>
<p>Align items to the centre:</p>
<pre><code>println!(&#34;----------------&#34;);
for (i, item) in items.iter().enumerate() {
	println!(&#34;{item:^10}: {i}&#34;);
}
</code></pre>
<pre><code>----------------
  these   : 0
  words   : 1
   are    : 2
different : 3
  sizes   : 4
</code></pre>
<p>Align items to right</p>
<pre><code>println!(&#34;----------------&#34;);
for (i, item) in items.iter().enumerate() {
	println!(&#34;{item:&gt;10}: {i}&#34;);
}
</code></pre>
<pre><code>----------------
     these: 0
     words: 1
       are: 2
 different: 3
     sizes: 4
</code></pre>
<p>Set width 7 characters wide leaving 2 spaces after <code>world</code>:</p>
<pre><code>println!(&#34;hello {x:7}!&#34;);
</code></pre>
<pre><code>hello world  !
</code></pre>
<p>Use an existing i32 variable to do the same thing, just put a <code>$</code> after the variable name</p>
<pre><code>let spaces = 7;
println!(&#34;hello {x:spaces$}!&#34;);
</code></pre>
<pre><code>hello world  !
</code></pre>
<p>Fill in gaps with any character:</p>
<pre><code>println!(&#34;right aligned: hello{x:-&gt;7}!&#34;);
println!(&#34;left aligned: hello{x:-&lt;7}!&#34;);
println!(&#34;center aligned: hello{x:-^7}!&#34;);
</code></pre>
<pre><code>right aligned: hello--world!
left aligned: helloworld--!
center aligned: hello-world-!
</code></pre>
<p>Always print the sign of a numeric type even if positive:</p>
<pre><code>let y = 10;
println!(&#34;{y:+}&#34;);
</code></pre>
<pre><code>+10
</code></pre>
<p>Print to hex, binary or octal:</p>
<pre><code>println!(&#34;hex: {y:#x}&#34;);
println!(&#34;binary: {y:#b}&#34;);
println!(&#34;octal {y:#o}&#34;);
</code></pre>
<pre><code>hex: 0xa
binary: 0b1010
octal: 0o12
</code></pre>
<p>Set float precision (it rounds to the set precision)</p>
<pre><code>let z = 5.123456;
println!(&#34;3 precision: {z:.3}&#34;);
println!(&#34;5 precision: {z:.5}&#34;);
</code></pre>
<pre><code>3 precision: 5.123
5 precision: 5.12346
</code></pre>
<p>You can use an existing variable to set the precision:</p>
<pre><code>let precision = 3;
println!(&#34;3 precision: {z:.precision$}&#34;);
</code></pre>
<pre><code>3 precision: 5.123
</code></pre>
<p>Chain different format specifiers together</p>
<p>(you can edit this cell and run it to experiment)</p>
<pre><pre><code>fn main() {
  let f = 255.555555;
  let dec = 2;
  let width = 10;
  println!(&#34;{f} to {dec} decimal places is {f:-^width$.dec$} very cool!&#34;);
}
</code></pre></pre>
<p>Remember that Rust doesn&#39;t use any localization, so these outputs will always look the same.</p>
<p>Also to escape these curly braces, just put two of them in front of eachother</p>
<pre><code>println!(&#34;Sometimes I need to print {{ or }} too!&#34;)
</code></pre>
<pre><code>Sometimes I need to print { or } too!
</code></pre>
<p>This quality of life improvement is significant, the first thing a programmer does when learning a new language is print output, this brings Rust on par with the most ergonomic of dynamic languages. Compiled languages can have nice things too!</p>
<p>Thanks for reading, if you have suggestions for things to add you can make pull requests on this file: </p>
<p><a href="https://github.com/jackos/rustnote-site/blob/master/src/blog/format_strings.md">Github link</a></p>

                    </main>

                    <nav aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="https://www.rustnote.com/rustnote.html" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i></i>
                            </a>
                        
                                                    <a rel="next" href="https://www.rustnote.com/basics/variables.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i></i>
                            </a>
                        
                        
                    </nav>
                </div>
            </div>

            <nav aria-label="Page navigation">
                                    <a rel="prev" href="https://www.rustnote.com/rustnote.html" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i></i>
                    </a>
                
                                    <a rel="next" href="https://www.rustnote.com/basics/variables.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i></i>
                    </a>
                            </nav>

        </div>

        
        
                
        
                
        
                
        
        
        
        
        
                
        
        
        
        
        
        

        <!-- Custom JS scripts -->
                
        
        
    

</div>
  </body>
</html>
