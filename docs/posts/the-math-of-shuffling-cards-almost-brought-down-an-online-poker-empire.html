<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.scientificamerican.com/article/how-the-math-of-shuffling-cards-almost-brought-down-an-online-poker-empire/">Original</a>
    <h1>The math of shuffling cards almost brought down an online poker empire</h1>
    
    <div id="readability-page-1" class="page"><div><p data-block="sciam/paragraph">If you’ve ever shuffled a deck of playing cards, you’ve most likely created a unique deck. That is, you’re probably the only person who has ever arranged the cards in precisely that order. Although this claim sounds incredible, it’s a great illustration of how quickly large numbers can creep into everyday situations—with occasionally challenging consequences, as the developers of an online poker game painfully discovered in the late 1990s.</p><p data-block="sciam/paragraph">The mathematics of card shuffling is quite easy to explain. To calculate how many arrangements 52 playing cards can have, you must go through all the possible shuffles. So logically, one of the 52 cards is placed on top, and once that’s determined, there are only 51 possibilities for the card below it. The next card has only 50 possible options, and so on. A 52-card deck can therefore be arranged in 52 × 51 × 50 × ... × 2 × 1 = 52! different ways.</p><p data-block="sciam/paragraph">If you do the multiplication and round the answer, you will get a number with 67 zeros. That’s more than a quadrillion times as many ways to arrange these cards as there are atoms on Earth.</p><hr/><h2>On supporting science journalism</h2><p>If you&#39;re enjoying this article, consider supporting our award-winning journalism by<!-- --> <a href="https://www.scientificamerican.com/getsciam/">subscribing</a>. By purchasing a subscription you are helping to ensure the future of impactful stories about the discoveries and ideas shaping our world today.</p><hr/><p data-block="sciam/paragraph">So clearly there are many, many different ways to arrange 52 playing cards. And yet to find out how likely it is that another person in the world will randomly create the same sequence of cards by shuffling, it’s not enough to simply calculate 1 / 52! That number simply indicates how likely it is to get one very specific shuffle of cards.</p><p data-block="sciam/paragraph">There’s a more subtle question to consider: How likely would it be for any two or more people in the world to randomly shuffle a deck of cards in the same way?</p><h2 id="the-extraordinary-rarity-of-each-and-every-shuffle" data-block="sciam/heading"><b>The Extraordinary Rarity of Each and Every Shuffle</b></h2><p data-block="sciam/paragraph">This question is reminiscent of the <a href="https://www.scientificamerican.com/article/bring-science-home-probability-birthday-paradox/">birthday paradox</a>. It works according to the same principle: It is rather unlikely that a student in a class has a birthday on a given date—in a group of 30 people, the probability of this is 1 − (364 / 365)<sup>30</sup>≈ 7.9 percent. The probability that two students are born on the same day is more than 70 percent, however. The reason for this apparent discrepancy is that people usually underestimate how many possible pairs of students there are. From 30 students, 435 pairs can be formed. The probability that each pair of students was born on a different day then doesn’t seem so high.</p><p data-block="sciam/paragraph">If you want to find out how likely it is to randomly shuffle a deck of cards in the same way as any other person in the world, there are several ways to do it. One is to first calculate the probability of the opposite event and then subtract this result from 1. This means that you first examine how likely it is that all people in the world create a completely new arrangement when mixing: the first person has a probability of 1, the second a probability of (52! – 1) / 52!, the third of (52! – 2) / 52!, and so on. Then subtract this result from 1.</p><p data-block="sciam/paragraph">If there are eight billion people in the world, the probability that several people create the same shuffle of cards can be calculated as follows:</p><figure data-block="contentful/image"><picture><source media="(min-width: 750px)" srcset="https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=1350 1350w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=2000 2000w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=900 900w" sizes="(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/><source media="(min-width: 0px)" srcset="https://static.scientificamerican.com/dam/m/62a25710f97bc8dc/original/online-poker_equations_graphic_m1.png?m=1757079092.041&amp;w=1000 1000w, https://static.scientificamerican.com/dam/m/62a25710f97bc8dc/original/online-poker_equations_graphic_m1.png?m=1757079092.041&amp;w=1200 1200w, https://static.scientificamerican.com/dam/m/62a25710f97bc8dc/original/online-poker_equations_graphic_m1.png?m=1757079092.041&amp;w=600 600w, https://static.scientificamerican.com/dam/m/62a25710f97bc8dc/original/online-poker_equations_graphic_m1.png?m=1757079092.041&amp;w=750 750w" sizes="(min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/><img alt="Equation spells out how to calculate the probability that more than one person (in a pool of eight billion) will deal a deck of 52 cards in the same way" decoding="async" loading="lazy" src="https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=900" width="2917" height="234" srcset="https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=1000 1000w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=1200 1200w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=1350 1350w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=2000 2000w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=600 600w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=750 750w, https://static.scientificamerican.com/dam/m/39198686a2dc56df/original/online-poker_equations_graphic_d1.png?m=1757079092.041&amp;w=900 900w" sizes="(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/></picture></figure><p data-block="sciam/paragraph">The trouble is that my calculator (or rather, the online program Wolfram|Alpha) fails when I try to evaluate this formula. Therefore, I have to rely on a very rough estimate of this probability:</p><figure data-block="contentful/image"><picture><source media="(min-width: 750px)" srcset="https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=1350 1350w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=2000 2000w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=900 900w" sizes="(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/><source media="(min-width: 0px)" srcset="https://static.scientificamerican.com/dam/m/3e6a9e3d7e8a3d45/original/online-poker_equations_graphic_m2.png?m=1757079129.679&amp;w=1000 1000w, https://static.scientificamerican.com/dam/m/3e6a9e3d7e8a3d45/original/online-poker_equations_graphic_m2.png?m=1757079129.679&amp;w=1200 1200w, https://static.scientificamerican.com/dam/m/3e6a9e3d7e8a3d45/original/online-poker_equations_graphic_m2.png?m=1757079129.679&amp;w=600 600w, https://static.scientificamerican.com/dam/m/3e6a9e3d7e8a3d45/original/online-poker_equations_graphic_m2.png?m=1757079129.679&amp;w=750 750w" sizes="(min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/><img alt="Equation offers an approximation for calculating the probability that more than one person (in a pool of eight billion) will deal a deck of 52 cards in the same way" decoding="async" loading="lazy" src="https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=900" width="2917" height="234" srcset="https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=1000 1000w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=1200 1200w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=1350 1350w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=2000 2000w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=600 600w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=750 750w, https://static.scientificamerican.com/dam/m/14b3f2e83c78636b/original/online-poker_equations_graphic_d2.png?m=1757079129.679&amp;w=900 900w" sizes="(min-width: 2000px) 2000px, (min-resolution: 3dppx) 50vw, (min-resolution: 2dppx) 75vw, 100vw"/></picture></figure><p data-block="sciam/paragraph">This means that the probability that two or more people in the world will create the same deck of cards is less than 0.0000...08 percent—a number that only deviates from 0 in the 47th decimal place.</p><p data-block="sciam/paragraph">With that illustration, I hope I have convinced everyone that it is extremely unlikely that several people in the world would randomly create the same deck of cards by shuffling. But you have probably shuffled cards many times in your life, not just once. So how does the result change if we assume that each person shuffles approximately 100 decks of cards in their lifetime? By replacing the eight billion in the previous estimate with 800 billion, we find that the probability in this case is less than 8 × 10<sup>−43</sup> percent.</p><p data-block="sciam/paragraph">In other words, the odds don’t change by much. Even if each person in the world shuffles a deck of cards 100 times, it is very unlikely that the same deck will appear twice.</p><p data-block="sciam/paragraph">For that matter, if we consider every person who lives or has ever lived on earth—by some estimates, about <a href="https://www.prb.org/articles/how-many-people-have-ever-lived-on-earth/">117 billion</a> people—each of whom has shuffled a deck of cards about 100 times (which is unlikely, given that our species has not had playing cards for very long), then the probability that the same arrangement was created multiple times is less than 1.7 × 10<sup>−40</sup> percent.</p><p data-block="sciam/paragraph">This makes it clear: it is truly extremely unlikely that two people in the entire history of humanity have ever shuffled a deck of cards the same way—at least assuming they shuffled the cards with great care. This illustrates how big 52! is and how enormously many possibilities there are for arranging 52 cards.</p><h2 id="read-em-and-weep" data-block="sciam/heading"><b>Read ’Em and Weep</b></h2><p data-block="sciam/paragraph">The vastness of 52! is not only inspiring to contemplate—it has also posed some significant practical problems for online game developers. Online poker can involve large sums of money, so it’s critical that these games are as secure and fair as possible. Any flaws or loopholes could be exploited by cheaters or used by the house against players.</p><p data-block="sciam/paragraph">Digital cards should be well shuffled and dealt randomly, just like real ones. In an ideal world, an algorithm would randomly select an arrangement from the 52! possible decks. But no computer has enough memory to evaluate all of these possibilities, and a perfect random number generator doesn’t yet exist. Therefore, developers generally rely on algorithms that simulate card shuffling.</p><p data-block="sciam/paragraph">In the late 1990s the development platform ASF Software supplied several online poker providers, such as Planet Poker, with card-shuffling algorithms. The platform even posted the algorithm on its website as proof that the game was reliably programmed. And this post caught the attention of some employees at Reliable Software Technologies, an IT company. “As soon as we saw the shuffling algorithm, we began to suspect there might be a problem. A little investigation proved that this intuition was correct,” a few employees <a href="https://web.archive.org/web/20140104095330/http:/www.cigital.com/papers/download/developer_gambling.php">wrote in a post</a>on a software development website.</p><p data-block="sciam/paragraph">The algorithm started with an ordered deck of cards and then swapped two cards at a time in several steps. To do this, the program used a random number generator linked to the computer’s system time. But there are several constraints on this method. For one, the swapping mechanism was implemented such that certain card arrangements were favored and more likely to appear than others. For another, the system ties its number generation to the number of seconds that have passed since midnight, resetting once each day, which further limits the possible random values. Only about 86 million arrangements could be generated this way, the Reliable Software Technologies team discovered.</p><p data-block="sciam/paragraph">The programmers then realized that because the system is tied to a clock to randomize its shuffles, the arrangement of cards could be further constrained by taking that timekeeper into account. Simply syncing up their own program to the system clock reduced the possibilities to a mere 200,000 potential decks that the algorithm could generate. “After that move, the system is ours, since searching through this tiny set of shuffles is trivial and can be done on a PC in real time,” they wrote. Recall that this was back in the 1990s, when computers were significantly less powerful than they are today.</p><p data-block="sciam/paragraph">The employees of Reliable Software Technologies reported these weaknesses to the algorithm’s developers, who immediately revised it. Today many online poker sites use the Fisher–Yates algorithm, also called the Knuth shuffle (which sounds delightfully like a dance). It’s easy to implement and delivers satisfactory results.</p><p data-block="sciam/paragraph">Of course, these algorithms are constrained in other ways—random generators simply aren’t good enough to do what people can do with an actual deck. But even the most skillful human dealer cannot provide a perfect hand every time.</p><p data-block="sciam/paragraph"><i>Thanks to the German language podcast </i><a href="https://open.spotify.com/episode/56REzzVfh97CXHamGfqcg3?si=ESYH-1YMRaWM1dnlMq_vLA"><i>Nerds at Work</i></a><i> podcast for inspiring me to write about this 1990s poker algorithm.</i></p><p data-block="sciam/paragraph"><i>This article originally appeared in </i>Spektrum der Wissenschaft<i> and was reproduced with permission.</i></p></div></div>
  </body>
</html>
