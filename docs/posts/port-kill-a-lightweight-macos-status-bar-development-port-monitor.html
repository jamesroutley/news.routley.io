<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/kagehq/port-kill">Original</a>
    <h1>Show HN: Port Kill – A lightweight macOS status bar development port monitor</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A lightweight macOS status bar app that monitors and manages development processes running on ports 2000-6000. The app provides real-time process detection and allows you to kill individual processes or all processes at once.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/kagehq/port-kill/blob/main/image-short.png"><img src="https://github.com/kagehq/port-kill/raw/main/image-short.png" alt="Port Kill Status Bar Icon"/></a></p>

<ul dir="auto">
<li><strong>Real-time Monitoring</strong>: Scans ports 2000-6000 every 5 seconds using <code>lsof</code> commands</li>
<li><strong>Visual Status Bar Icon</strong>: Shows process count with color-coded center (green=0, red=1-9, orange=10+)</li>
<li><strong>Dynamic Context Menu</strong>: Updates every 3 seconds with current processes and kill options</li>
<li><strong>One-Click Process Killing</strong>: Click any menu item to kill all detected processes</li>
<li><strong>Safe Process Termination</strong>: Uses SIGTERM → SIGKILL termination strategy</li>
<li><strong>Stable Architecture</strong>: Built with winit event loop for macOS compatibility</li>
<li><strong>Graceful Error Handling</strong>: Handles permission errors and process failures</li>
<li><strong>No Windows</strong>: Pure status bar application with no main window</li>
</ul>

<p dir="auto">The status bar icon provides instant visual feedback:</p>
<ul dir="auto">
<li><strong>Green</strong>: 0 processes (safe, no development servers)</li>
<li><strong>Red</strong>: 1-9 processes (some development servers)</li>
<li><strong>Orange</strong>: 10+ processes (many development servers)</li>
</ul>
<p dir="auto">Hover over the icon to see the exact process count in the tooltip.</p>

<ul dir="auto">
<li><strong>Kill All Processes</strong>: Terminates all detected development processes</li>
<li><strong>Individual Process Entries</strong>: Format: &#34;Kill: Port 3001: node (PID 1234)&#34;</li>
<li><strong>Quit</strong>: Exits the application</li>
</ul>
<p dir="auto"><strong>Note</strong>: Currently, clicking any menu item will kill all processes (for testing purposes).</p>

<ul dir="auto">
<li>macOS 10.15 or later</li>
<li>Rust 1.70 or later</li>
<li><code>lsof</code> command (included with macOS)</li>
</ul>

<ol dir="auto">
<li>Clone the repository:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="git clone &lt;repository-url&gt;
cd port-kill"><pre>git clone <span>&lt;</span>repository-url<span>&gt;</span>
<span>cd</span> port-kill</pre></div>
<ol start="2" dir="auto">
<li>Build the application:</li>
</ol>

<ol start="3" dir="auto">
<li>Run the application (easy way):</li>
</ol>

<ol start="4" dir="auto">
<li>Run manually (alternative):</li>
</ol>


<ol dir="auto">
<li><strong>Start the Application</strong>: Run <code>./run.sh</code> to start the application</li>
<li><strong>Monitor Status</strong>: Check the status bar for the process count indicator</li>
<li><strong>Access Menu</strong>: Click on the status bar icon to open the context menu</li>
<li><strong>Kill Processes</strong>:
<ul dir="auto">
<li>Click &#34;Kill All Processes&#34; to terminate all development processes</li>
<li>Click individual process entries to kill specific processes</li>
</ul>
</li>
<li><strong>Quit</strong>: Click &#34;Quit&#34; to exit the application</li>
</ol>


<ul dir="auto">
<li><strong>Main Thread</strong>: Handles UI events and menu interactions with winit event loop</li>
<li><strong>Process Monitor</strong>: Scans for processes every 5 seconds using <code>lsof</code></li>
<li><strong>Menu Updates</strong>: Updates context menu every 3 seconds when processes change</li>
<li><strong>Process Killing</strong>: Runs in background threads to maintain UI responsiveness</li>
</ul>

<p dir="auto">The application uses the following command to detect processes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="lsof -ti :PORT -sTCP:LISTEN"><pre>lsof -ti :PORT -sTCP:LISTEN</pre></div>

<ol dir="auto">
<li><strong>SIGTERM</strong>: First attempts graceful termination</li>
<li><strong>SIGKILL</strong>: If process doesn&#39;t terminate within 500ms, forces termination</li>
</ol>

<p dir="auto">Monitors ports 2000-6000 (broad range covering common development server ports)</p>

<ul dir="auto">
<li><code>tray-icon</code>: macOS status bar integration</li>
<li><code>winit</code>: Event loop management</li>
<li><code>nix</code>: Signal handling for process termination</li>
<li><code>crossbeam-channel</code>: Thread communication</li>
<li><code>tokio</code>: Async runtime</li>
<li><code>anyhow</code>: Error handling</li>
<li><code>serde</code>: Data serialization</li>
</ul>







<p dir="auto">If you encounter permission errors when trying to kill processes:</p>
<ol dir="auto">
<li>Ensure the application has the necessary permissions</li>
<li>Some system processes may be protected</li>
<li>Check if the process is owned by another user</li>
</ol>

<p dir="auto">If a process is not being detected:</p>
<ol dir="auto">
<li>Verify the process is listening on a port in the 2000-6000 range</li>
<li>Check if the process is using TCP (not UDP)</li>
<li>Ensure the process is in LISTEN state</li>
</ol>

<p dir="auto">If the application fails to start:</p>
<ol dir="auto">
<li>Check if another instance is already running</li>
<li>Verify all dependencies are installed</li>
<li>Check system logs for error messages</li>
</ol>

<p dir="auto">This project is licensed under the FSL-1.1-MIT License. See the LICENSE file for details.</p>

<ol dir="auto">
<li>Fork the repository</li>
<li>Create a feature branch</li>
<li>Make your changes</li>
<li>Add tests if applicable</li>
<li>Submit a pull request</li>
</ol>
</article></div></div>
  </body>
</html>
