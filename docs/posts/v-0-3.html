<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/vlang/v/discussions/14895">Original</a>
    <h1>V 0.3</h1>
    
    <div id="readability-page-1" class="page"><div data-paste-markdown-skip="">
    <tbody>
        <tr>
          <td>
              <p dir="auto"><strong>V 0.3 is out!</strong></p>
<p dir="auto">5769 commits pushed to master, <a href="https://github.com/vlang/v/issues?q=is%3Aissue+is%3Aclosed+label%3Abug+closed%3A%3E%3D2020-12-22+">1697 bugs closed</a> since V 0.2.</p>
<p dir="auto">It&#39;s been a while since the last major release, from now on we&#39;ll do major releases every â‰ˆ4 months.</p>
<ul dir="auto">
<li>C to V translation via C2V: <code>v translate file.c</code>. (Demo video: <a href="https://www.youtube.com/watch?v=6oXrz3oRoEg" rel="nofollow">Translating DOOM from C to V, building it in under a second and running it!</a>)</li>
<li>Lots of bug fixes in V, cgen, and C interop to allow running translated DOOM.v.</li>
<li>Programs built with the V compiler no longer leak memory by default.</li>
<li>Closures. All operating systems are supported. (<a href="https://twitter.com/v_language/status/1528710491882852352" rel="nofollow">Demo</a>)</li>
<li><code>Option</code> and <code>Result</code> are now separate types: <code>?Foo</code> and <code>!Foo</code> respectively. Old code will continue working for 1 year and will result in a warning/hint.</li>
<li>Hundreds of new checks in the type checker.</li>
<li>All V&#39;s backends have been split up into separate processes.  As the result, building V got 26% faster.</li>
<li>Maps and arrays can now return optionals: <code>m[bad_key] or { ... }</code>, <code>if x := arr[key] { ... }</code>.</li>
<li><code>ustring</code> has been replaced with <code>[]rune</code> (works just like in Go).</li>
<li>Maps can now have non-string keys.</li>
<li>A new compiler pass for transforming the AST (doesn&#39;t slow the compiler too much, adds about 25ms to <code>v self</code>). It eliminates unreachable branches and performs other simple optimizations and transformations.</li>
<li>C backend is now parallel (just the cgen part for now).</li>
<li>Lots of compiler source code clean up and minor optimizations. The compiler got ~30% faster according to fast.vlang.io.</li>
<li>Better compiler source code organization (absolutely necessary as it&#39;s surpassed 100k loc).</li>
<li>The naming of V&#39;s integer types is now more consistent: <code>byte</code> has been renamed to <code>u8</code>.  Old code will continue working for 1 year and will result in a warning/hint.</li>
<li>The typo detector now highlights the suggested name so that it&#39;s more visible.</li>
<li><code>datatypes</code> module now has <code>Heap, Queue, Stack, BSTree, LinkedList</code>.</li>
<li>Interfaces can now be embedded (like structs).</li>
<li>vlib now has a TOML parser, fully compatible with TOML 1.0.</li>
<li>Lots of work done on the V.js backend, including the graphics library, which has been ported to V.js.</li>
<li>JS promises, await (V.js).</li>
<li>It&#39;s now possible to do more complex array initialization by using each individual element of the array (<code>[]int{init: it}</code>).</li>
<li>Unsigned right shift operators <code>&gt;&gt;&gt;</code> and <code>&gt;&gt;&gt;=</code> have been added to V. (They work exactly like in Java.)</li>
<li><code>-nofloat</code> option, which is useful for writing kernels and for embedded systems without an FPU (used in Vinix).</li>
<li>Generic interfaces.</li>
<li>TCC is now bundled with the language, this allows building V programs without an external C compiler dependency.</li>
<li>Null can be used in <code>unsafe</code> only (for example, for C interop).</li>
<li>Pointer arithmetics and comparing pointers to numbers is now also only allowed in <code>unsafe</code>.</li>
<li>Inline sumtypes.</li>
<li>New module <code>compress.gzip</code>.</li>
<li>Lots of <code>net</code>/<code>net.http</code>/<code>vweb</code> fixes (also used for the upcoming Gitly launch).</li>
<li>IPv6 support.</li>
<li><code>net.http</code> headers are now enum fields instead of strings. This allows to avoid typos and offers autocomplete.</li>
<li>Struct field deprecation.</li>
<li>Static GC (no longer a dynamic lib dependency).</li>
<li>New various algorithms for random number generation: MT19937RNG, etc  (module <code>rand</code>).</li>
<li>Fix immutability bugs that allowed to bypass compiler immutability checks and modify const/immutable values.</li>
<li>Lots of fixes in the JSON serializer.</li>
<li>Heap allocated only structs marked with <code>[heap]</code>.</li>
<li>Significantly improve lots of error messages, make them more clear, suggest hints.</li>
<li>Bug fixes and new features in the pure V <code>regex</code> module.</li>
<li>Lots of new drawing functions in the graphics module (like <code>gg.draw_polygon_filled(), gg.draw_arc_empty()</code> etc)</li>
<li>Builtin FPS display in <code>gg</code>.</li>
<li>Latest Sokol backend in <code>gg</code>.</li>
<li>Advanced CI tests for the graphics module. Graphical apps are run on GitHub Actions instances, their output is saved to an image, uploaded, and compared to the expected result.</li>
<li>More bug fixes in generics.</li>
<li>Bug fixes in aliases. They can now fully replace the types they alias.</li>
<li>`[minify] struct attribute for struct minification.</li>
<li><code>for in</code> now works with fixed arrays.</li>
<li>The parser was made a bit faster by skipping <code>vfmt</code> code when not in <code>vfmt</code> mode (by using <code>-d vfmt</code>).</li>
<li>Lots of vfmt improvements, especially with comments.</li>
<li>Experimental <code>#[index]</code> syntax for negative indexing (like in Python, but needs special syntax instead of being used by default).</li>
<li>Visibility bug fixes in modules (<code>pub</code>).</li>
<li>Error propagation in complex expressions (e.g. <code>foo(bar()?)</code>).</li>
<li>Optionals can now by used in consts (<code>const x := opt() or {}</code>).</li>
<li>Lots of new documentation, including vlib modules documentation and the official V Documentation.</li>
<li>vpm improvements (including a new vpm mirror).</li>
<li><code>sync</code> improvements including <code>sync.thread_id()</code>, <code>sync.Once</code>..</li>
<li>V can now be used to generate object files (<code>foo.o</code>) that can be used in existing C projects.</li>
<li><code>-usecache</code> and <code>-skip-unused</code> fixes, they are close to being on by default.</li>
<li>Lots of Windows issues fixed.</li>
<li>Amazon Linux support.</li>
<li>Fixes in shared maps and arrays.</li>
<li><code>term.ui</code> improvements, including multi byte/UTF-8 events.</li>
<li>New <code>crypto</code> modules, including <code>crypto.des, crypto.cipher, crypto.blowfish</code>.</li>
<li>Comptime fixes.</li>
<li>4 byte bool option (<code>-d 4bytebool</code>) for compatibility with some C software.</li>
<li><code>strconv</code> (pure V formatting module used in string interpolation) fixes and performance improvements.</li>
<li>ORM fixes (pg, mysql, sqlite). Tables are now created automatically based on the V structs, no more need in sql files to create tables for apps.</li>
<li><code>volatile</code> keyword.</li>
<li><code>&#34;stringliteral&#34;.len</code> optimization (replaced by the actual number by the new <code>transform</code> pass).</li>
<li>Lots of inline assembler improvements (it&#39;s used a lot in Vinix).</li>
<li>Many new functions in the <code>math</code> module.</li>
<li>Separators in number literals: <code>1_000_000</code>.</li>
<li><code>strings.Builder</code> optimizations and new methods.</li>
<li>Autofree fixes (still not production ready, hidden behind the <code>-autofree</code> flag).</li>
<li>Lots of Android fixes in V and in vab.</li>
<li>Lots of commits to the native backend (amd64/arm64).</li>
<li>V interpreter fixes. (Still at an early stage.)</li>
<li>Go2V translator has been started by the community, and can already translate simple programs.</li>
<li>An early version of the Go backend (<code>v -b go -o file.go file.v</code>).</li>
<li>Introduce <code>isize</code> and <code>usize</code> types, deprecate <code>size_t</code> in favor of <code>usize</code>.</li>
<li>Add <code>datatypes</code> and <code>datatypes.fsm</code> modules.</li>
<li>Add <code>compile_error</code> and <code>compile_warn</code> comptime functions.</li>
<li>Bare metal support. Vinix OS kernel is now being developed in V.</li>
<li>Builtin web framework vweb is now multithreaded, all CPU cores are used.</li>
<li>String interpolation and struct stringers are now implemented in pure V</li>
<li>Improved <code>unused variable</code> warning. Assigning to a variable no longer marks it as used.</li>
<li>Allow interfaces to define fields, not just methods.</li>
<li><code>vweb</code> now uses struct embedding: <code>app.vweb.text(&#39;hello&#39;) =&gt; app.text(&#39;hello&#39;)</code>.</li>
<li>Consts can now be declared outside of <code>const()</code> blocks: <code>const x = 0</code>.</li>
<li>Overloading of  <code>&gt;</code>, <code>&lt;</code>, <code>!=</code>, <code>==</code>, <code>&lt;=</code> and <code>&gt;=</code> operators.</li>
<li>New struct updating syntax: <code>User{ ...u, name: &#39;new&#39; }</code> to replace <code>{ u | name: &#39;new&#39; }</code>.</li>
<li><code>byte.str()</code> has been fixed and works like all other numbers. <code>byte.ascii_str()</code> has been added.</li>
<li>Smart cast in for loops: <code>for mut x is string {}</code>.</li>
<li><code>[noinit]</code> struct attribute to disallow direct struct initialization with <code>Foo{}</code>.</li>
<li>Array decompose: <code>[1, 2, 3]...</code> is now <code>...[1, 2, 3]</code></li>
<li>Treating <code>enum</code> as <code>int</code> and operations on <code>enum</code> except <code>==</code> and <code>!=</code> are removed for strict type checking.</li>
<li>Support <code>[manualfree] fn f1(){}</code> and <code>[manualfree] module m1</code>, for functions doing their own memory management.</li>
<li>Allow usage of <code>&lt;</code> and <code>&gt;</code> operators for struct in <code>.sort</code> method for arrays, i.e. <code>arr.sort(a &lt; b)</code>.</li>
<li>Auto generate assignment operators like <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code> and <code>%=</code> if the operators are defined.</li>
<li>Colorize and improve failing tests output.</li>
<li>Fix <code>go</code> with a generic function: <code>go test&lt;string&gt;(c, &#39;abcd&#39;)</code>.</li>
<li>Add comptime <code>x := $embed_file(&#39;v.png&#39;) println(x.len) println(ptr_str(x.data()))</code>, for embedding files into binaries.</li>
<li>Advanced vdoc search on mobile layout.</li>
<li>string&#39;s <code>left()</code>/<code>right</code> were removed in favor of slicing syntax: <code>str[..pos]</code>.</li>
<li>gg: native graphics mode on macOS/iOS (using Cocoa Drawing API).</li>
<li>Full path to consts must be specified everywhere. This makes it easy to distinguish them</li>
<li><code>__offsetof</code> for low level needs (works like <code>offsetof</code> in C).</li>
<li>vfmt now preserves empty lines, like gofmt.</li>
<li>Support for compile time environment variables via <code>$env(&#39;ENV_VAR&#39;)</code>.</li>
<li>Allow method declaration of <code>==</code> and <code>&lt;</code> operators and auto generate <code>!=</code>, <code>&gt;</code>, <code>&lt;=</code> and <code>&gt;=</code>.</li>
<li>support <code>dump(expr)</code>, i.e. tracing of both the location, name and value of an expression</li>
<li>deprecate os.exec in favour of os.executable() which does <em>NOT</em> return an option, when the command was not found</li>
<li>Hashmap bootstrapping fixes.</li>
<li>Array decomposition to varargs: <code>fn sum(i ...int) int</code> =&gt; <code>a := [2,3,4] println(sum(a...))</code></li>
<li>HTML module docs generated by vdoc now have global search.</li>
</ul>
          </td>
        </tr>
    </tbody>
  </div></div>
  </body>
</html>
