<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ankane/blazer">Original</a>
    <h1>Blazer: Business Intelligence Made Simple</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Explore your data with SQL. Easily create charts and dashboards, and share them with your team.</p>
<p dir="auto"><a href="https://blazer.dokkuapp.com" rel="nofollow">Try it out</a></p>
<p dir="auto"><a href="https://blazer.dokkuapp.com" rel="nofollow"><img src="https://camo.githubusercontent.com/783368f9610fcf4b8727603a35c7bbf4ddf9d24ca0deda713fe46eacee8858f4/68747470733a2f2f626c617a65722e646f6b6b756170702e636f6d2f6173736574732f626c617a65722d613130626161343066656631636132663562623235666339376263663236316136613534313932666231616430663839336330663536326238633763343639372e706e67" alt="Screenshot" data-canonical-src="https://blazer.dokkuapp.com/assets/blazer-a10baa40fef1ca2f5bb25fc97bcf261a6a54192fb1ad0f893c0f562b8c7c4697.png"/></a></p>
<p dir="auto">Blazer is also available as a <a href="https://github.com/ankane/blazer-docker">Docker image</a>.</p>
<p dir="auto">üçä Battle-tested at <a href="https://www.instacart.com/opensource" rel="nofollow">Instacart</a></p>
<p dir="auto"><a href="https://github.com/ankane/blazer/actions"><img src="https://github.com/ankane/blazer/actions/workflows/build.yml/badge.svg" alt="Build Status"/></a></p>

<ul dir="auto">
<li><strong>Multiple data sources</strong> - PostgreSQL, MySQL, Redshift, and <a href="#full-list">many more</a></li>
<li><strong>Variables</strong> - run the same queries with different values</li>
<li><strong>Checks &amp; alerts</strong> - get emailed when bad data appears</li>
<li><strong>Audits</strong> - all queries are tracked</li>
<li><strong>Security</strong> - works with your authentication system</li>
</ul>

<ul dir="auto">
<li><a href="#installation">Installation</a></li>
<li><a href="#queries">Queries</a></li>
<li><a href="#charts">Charts</a></li>
<li><a href="#dashboards">Dashboards</a></li>
<li><a href="#checks">Checks</a></li>
<li><a href="#cohorts">Cohorts</a></li>
<li><a href="#anomaly-detection">Anomaly Detection</a></li>
<li><a href="#forecasting">Forecasting</a></li>
<li><a href="#uploads">Uploads</a></li>
<li><a href="#data-sources">Data Sources</a></li>
<li><a href="#query-permissions">Query Permissions</a></li>
</ul>

<p dir="auto">Add this line to your application‚Äôs Gemfile:</p>

<p dir="auto">Run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rails generate blazer:install
rails db:migrate"><pre>rails generate blazer:install
rails db:migrate</pre></div>
<p dir="auto">And mount the dashboard in your <code>config/routes.rb</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mount Blazer::Engine, at: &#34;blazer&#34;"><pre><span>mount</span> <span>Blazer</span>::<span>Engine</span><span>,</span> <span>at</span>: <span>&#34;blazer&#34;</span></pre></div>
<p dir="auto">For production, specify your database:</p>
<div dir="auto" data-snippet-clipboard-copy-content="ENV[&#34;BLAZER_DATABASE_URL&#34;] = &#34;postgres://user:password@hostname:5432/database&#34;"><pre><span>ENV</span><span>[</span><span>&#34;BLAZER_DATABASE_URL&#34;</span><span>]</span> <span>=</span> <span>&#34;postgres://user:password@hostname:5432/database&#34;</span></pre></div>
<p dir="auto">When possible, Blazer tries to protect against queries which modify data by running each query in a transaction and rolling it back, but a safer approach is to use a read-only user. <a href="#permissions">See how to create one</a>.</p>

<p dir="auto">Be sure to set a host in <code>config/environments/production.rb</code> for emails to work.</p>
<div dir="auto" data-snippet-clipboard-copy-content="config.action_mailer.default_url_options = {host: &#34;blazer.dokkuapp.com&#34;}"><pre><span>config</span><span>.</span><span>action_mailer</span><span>.</span><span>default_url_options</span> <span>=</span> <span>{</span><span>host</span>: <span>&#34;blazer.dokkuapp.com&#34;</span><span>}</span></pre></div>
<p dir="auto">Schedule checks to run (with cron, <a href="https://elements.heroku.com/addons/scheduler" rel="nofollow">Heroku Scheduler</a>, etc). The default options are every 5 minutes, 1 hour, or 1 day, which you can customize. For each of these options, set up a task to run.</p>
<div dir="auto" data-snippet-clipboard-copy-content="rake blazer:run_checks SCHEDULE=&#34;5 minutes&#34;
rake blazer:run_checks SCHEDULE=&#34;1 hour&#34;
rake blazer:run_checks SCHEDULE=&#34;1 day&#34;"><pre>rake blazer:run_checks SCHEDULE=<span><span>&#34;</span>5 minutes<span>&#34;</span></span>
rake blazer:run_checks SCHEDULE=<span><span>&#34;</span>1 hour<span>&#34;</span></span>
rake blazer:run_checks SCHEDULE=<span><span>&#34;</span>1 day<span>&#34;</span></span></pre></div>
<p dir="auto">You can also set up failing checks to be sent once a day (or whatever you prefer).</p>
<div dir="auto" data-snippet-clipboard-copy-content="rake blazer:send_failing_checks"><pre>rake blazer:send_failing_checks</pre></div>
<p dir="auto">Here‚Äôs what it looks like with cron.</p>
<div data-snippet-clipboard-copy-content="*/5 * * * * rake blazer:run_checks SCHEDULE=&#34;5 minutes&#34;
0   * * * * rake blazer:run_checks SCHEDULE=&#34;1 hour&#34;
30  7 * * * rake blazer:run_checks SCHEDULE=&#34;1 day&#34;
0   8 * * * rake blazer:send_failing_checks"><pre><code>*/5 * * * * rake blazer:run_checks SCHEDULE=&#34;5 minutes&#34;
0   * * * * rake blazer:run_checks SCHEDULE=&#34;1 hour&#34;
30  7 * * * rake blazer:run_checks SCHEDULE=&#34;1 day&#34;
0   8 * * * rake blazer:send_failing_checks
</code></pre></div>
<p dir="auto">For Slack notifications, create an <a href="https://slack.com/apps/A0F7XDUAZ-incoming-webhooks" rel="nofollow">incoming webhook</a> and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="BLAZER_SLACK_WEBHOOK_URL=https://hooks.slack.com/..."><pre>BLAZER_SLACK_WEBHOOK_URL=https://hooks.slack.com/...</pre></div>
<p dir="auto">Name the webhook ‚ÄúBlazer‚Äù and add a cool icon.</p>

<p dir="auto">Don‚Äôt forget to protect the dashboard in production.</p>

<p dir="auto">Set the following variables in your environment or an initializer.</p>
<div dir="auto" data-snippet-clipboard-copy-content="ENV[&#34;BLAZER_USERNAME&#34;] = &#34;andrew&#34;
ENV[&#34;BLAZER_PASSWORD&#34;] = &#34;secret&#34;"><pre><span>ENV</span><span>[</span><span>&#34;BLAZER_USERNAME&#34;</span><span>]</span> <span>=</span> <span>&#34;andrew&#34;</span>
<span>ENV</span><span>[</span><span>&#34;BLAZER_PASSWORD&#34;</span><span>]</span> <span>=</span> <span>&#34;secret&#34;</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="authenticate :user, -&gt;(user) { user.admin? } do
  mount Blazer::Engine, at: &#34;blazer&#34;
end"><pre><span>authenticate</span> <span>:user</span><span>,</span> <span>-&gt;</span><span>(</span><span>user</span><span>)</span> <span>{</span> <span>user</span><span>.</span><span>admin?</span> <span>}</span> <span>do</span>
  <span>mount</span> <span>Blazer</span>::<span>Engine</span><span>,</span> <span>at</span>: <span>&#34;blazer&#34;</span>
<span>end</span></pre></div>

<p dir="auto">Specify a <code>before_action</code> method to run in <code>blazer.yml</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="before_action_method: require_admin"><pre><span>before_action_method</span>: <span>require_admin</span></pre></div>
<p dir="auto">You can define this method in your <code>ApplicationController</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="def require_admin
  # depending on your auth, something like...
  redirect_to root_path unless current_user &amp;&amp; current_user.admin?
end"><pre><span>def</span> <span>require_admin</span>
  <span># depending on your auth, something like...</span>
  <span>redirect_to</span> <span>root_path</span> <span>unless</span> <span>current_user</span> &amp;&amp; <span>current_user</span><span>.</span><span>admin?</span>
<span>end</span></pre></div>
<p dir="auto">Be sure to render or redirect for unauthorized users.</p>


<p dir="auto">Create a user with read-only permissions:</p>
<div dir="auto" data-snippet-clipboard-copy-content="BEGIN;
CREATE ROLE blazer LOGIN PASSWORD &#39;secret&#39;;
GRANT CONNECT ON DATABASE dbname TO blazer;
GRANT USAGE ON SCHEMA public TO blazer;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO blazer;
ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT SELECT ON TABLES TO blazer;
COMMIT;"><pre><span>BEGIN</span>;
CREATE ROLE blazer LOGIN PASSWORD <span><span>&#39;</span>secret<span>&#39;</span></span>;
<span>GRANT</span> CONNECT <span>ON</span> DATABASE dbname TO blazer;
<span>GRANT</span> USAGE <span>ON</span> SCHEMA public TO blazer;
<span>GRANT</span> <span>SELECT</span> <span>ON</span> ALL TABLES <span>IN</span> SCHEMA public TO blazer;
ALTER DEFAULT PRIVILEGES <span>IN</span> SCHEMA public <span>GRANT</span> <span>SELECT</span> <span>ON</span> TABLES TO blazer;
<span>COMMIT</span>;</pre></div>

<p dir="auto">Create a user with read-only permissions:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE USER &#39;blazer&#39;@&#39;127.0.0.1&#39; IDENTIFIED BY &#39;secret&#39;;
GRANT SELECT, SHOW VIEW ON dbname.* TO &#39;blazer&#39;@&#39;127.0.0.1&#39;;
FLUSH PRIVILEGES;"><pre><span>CREATE</span> <span>USER</span> &#39;<span>blazer</span>&#39;@<span><span>&#39;</span>127.0.0.1<span>&#39;</span></span> IDENTIFIED BY <span><span>&#39;</span>secret<span>&#39;</span></span>;
<span>GRANT</span> <span>SELECT</span>, SHOW VIEW <span>ON</span> dbname.<span>*</span> TO <span><span>&#39;</span>blazer<span>&#39;</span></span>@<span><span>&#39;</span>127.0.0.1<span>&#39;</span></span>;
FLUSH PRIVILEGES;</pre></div>

<p dir="auto">If your database contains sensitive or personal data, check out <a href="https://github.com/ankane/hypershield">Hypershield</a> to shield it.</p>

<p dir="auto">If you need to search encrypted data, use <a href="https://github.com/ankane/blind_index">blind indexing</a>.</p>
<p dir="auto">You can have Blazer transform specific variables with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Blazer.transform_variable = lambda do |name, value|
  value = User.generate_email_bidx(value) if name == &#34;email_bidx&#34;
  value
end"><pre><span>Blazer</span><span>.</span><span>transform_variable</span> <span>=</span> <span>lambda</span> <span>do</span> |<span>name</span><span>,</span> <span>value</span>|
  <span>value</span> <span>=</span> <span>User</span><span>.</span><span>generate_email_bidx</span><span>(</span><span>value</span><span>)</span> <span>if</span> <span>name</span> == <span>&#34;email_bidx&#34;</span>
  <span>value</span>
<span>end</span></pre></div>


<p dir="auto">Create queries with variables.</p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT * FROM users WHERE gender = {gender}"><pre><span>SELECT</span> <span>*</span> <span>FROM</span> users <span>WHERE</span> gender <span>=</span> {gender}</pre></div>
<p dir="auto">Use <code>{start_time}</code> and <code>{end_time}</code> for time ranges. <a href="https://blazer.dokkuapp.com/queries/9-time-range-selector?start_time=1997-10-03T05%3A00%3A00%2B00%3A00&amp;end_time=1997-10-04T04%3A59%3A59%2B00%3A00" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT * FROM ratings WHERE rated_at &gt;= {start_time} AND rated_at &lt;= {end_time}"><pre><span>SELECT</span> <span>*</span> <span>FROM</span> ratings <span>WHERE</span> rated_at <span>&gt;=</span> {start_time} <span>AND</span> rated_at <span>&lt;=</span> {end_time}</pre></div>

<p dir="auto"><a href="https://blazer.dokkuapp.com/queries/1-smart-variable" rel="nofollow">Example</a></p>
<p dir="auto">Suppose you have the query:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT * FROM users WHERE occupation_id = {occupation_id}"><pre><span>SELECT</span> <span>*</span> <span>FROM</span> users <span>WHERE</span> occupation_id <span>=</span> {occupation_id}</pre></div>
<p dir="auto">Instead of remembering each occupation‚Äôs id, users can select occupations by name.</p>
<p dir="auto">Add a smart variable with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="smart_variables:
  occupation_id: &#34;SELECT id, name FROM occupations ORDER BY name ASC&#34;"><pre><span>smart_variables</span>:
  <span>occupation_id</span>: <span><span>&#34;</span>SELECT id, name FROM occupations ORDER BY name ASC<span>&#34;</span></span></pre></div>
<p dir="auto">The first column is the value of the variable, and the second column is the label.</p>
<p dir="auto">You can also use an array or hash for static data and enums.</p>
<div dir="auto" data-snippet-clipboard-copy-content="smart_variables:
  period: [&#34;day&#34;, &#34;week&#34;, &#34;month&#34;]
  status: {0: &#34;Active&#34;, 1: &#34;Archived&#34;}"><pre><span>smart_variables</span>:
  <span>period</span>: <span>[&#34;day&#34;, &#34;week&#34;, &#34;month&#34;]</span>
  <span>status</span>: <span>{0: &#34;Active&#34;, 1: &#34;Archived&#34;}</span></pre></div>

<p dir="auto"><a href="https://blazer.dokkuapp.com/queries/3-linked-column" rel="nofollow">Example</a> - title column</p>
<p dir="auto">Link results to other pages in your apps or around the web. Specify a column name and where it should link to. You can use the value of the result with <code>{value}</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="linked_columns:
  user_id: &#34;/admin/users/{value}&#34;
  ip_address: &#34;https://www.infosniper.net/index.php?ip_address={value}&#34;"><pre><span>linked_columns</span>:
  <span>user_id</span>: <span><span>&#34;</span>/admin/users/{value}<span>&#34;</span></span>
  <span>ip_address</span>: <span><span>&#34;</span>https://www.infosniper.net/index.php?ip_address={value}<span>&#34;</span></span></pre></div>

<p dir="auto"><a href="https://blazer.dokkuapp.com/queries/2-smart-column" rel="nofollow">Example</a> - occupation_id column</p>
<p dir="auto">Suppose you have the query:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT name, city_id FROM users"><pre><span>SELECT</span> name, city_id <span>FROM</span> users</pre></div>
<p dir="auto">See which city the user belongs to without a join.</p>
<div dir="auto" data-snippet-clipboard-copy-content="smart_columns:
  city_id: &#34;SELECT id, name FROM cities WHERE id IN {value}&#34;"><pre><span>smart_columns</span>:
  <span>city_id</span>: <span><span>&#34;</span>SELECT id, name FROM cities WHERE id IN {value}<span>&#34;</span></span></pre></div>
<p dir="auto">You can also use a hash for static data and enums.</p>
<div dir="auto" data-snippet-clipboard-copy-content="smart_columns:
  status: {0: &#34;Active&#34;, 1: &#34;Archived&#34;}"><pre><span>smart_columns</span>:
  <span>status</span>: <span>{0: &#34;Active&#34;, 1: &#34;Archived&#34;}</span></pre></div>

<p dir="auto">Blazer can automatically cache results to improve speed. It can cache slow queries:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cache:
  mode: slow
  expires_in: 60 # min
  slow_threshold: 15 # sec"><pre><span>cache</span>:
  <span>mode</span>: <span>slow</span>
  <span>expires_in</span>: <span>60</span> <span><span>#</span> min</span>
  <span>slow_threshold</span>: <span>15</span> <span><span>#</span> sec</span></pre></div>
<p dir="auto">Or it can cache all queries:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cache:
  mode: all
  expires_in: 60 # min"><pre><span>cache</span>:
  <span>mode</span>: <span>all</span>
  <span>expires_in</span>: <span>60</span> <span><span>#</span> min</span></pre></div>
<p dir="auto">Of course, you can force a refresh at any time.</p>

<p dir="auto">Blazer will automatically generate charts based on the types of the columns returned in your query.</p>
<p dir="auto"><strong>Note:</strong> The order of columns matters.</p>

<p dir="auto">There are two ways to generate line charts.</p>
<p dir="auto">2+ columns - timestamp, numeric(s) - <a href="https://blazer.dokkuapp.com/queries/4-line-chart-format-1" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT date_trunc(&#39;week&#39;, created_at), COUNT(*) FROM users GROUP BY 1"><pre><span>SELECT</span> date_trunc(<span><span>&#39;</span>week<span>&#39;</span></span>, created_at), <span>COUNT</span>(<span>*</span>) <span>FROM</span> users <span>GROUP BY</span> <span>1</span></pre></div>
<p dir="auto">3 columns - timestamp, string, numeric - <a href="https://blazer.dokkuapp.com/queries/5-line-chart-format-2" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT date_trunc(&#39;week&#39;, created_at), gender, COUNT(*) FROM users GROUP BY 1, 2"><pre><span>SELECT</span> date_trunc(<span><span>&#39;</span>week<span>&#39;</span></span>, created_at), gender, <span>COUNT</span>(<span>*</span>) <span>FROM</span> users <span>GROUP BY</span> <span>1</span>, <span>2</span></pre></div>

<p dir="auto">There are also two ways to generate column charts.</p>
<p dir="auto">2+ columns - string, numeric(s) - <a href="https://blazer.dokkuapp.com/queries/6-column-chart-format-1" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT gender, COUNT(*) FROM users GROUP BY 1"><pre><span>SELECT</span> gender, <span>COUNT</span>(<span>*</span>) <span>FROM</span> users <span>GROUP BY</span> <span>1</span></pre></div>
<p dir="auto">3 columns - string, string, numeric - <a href="https://blazer.dokkuapp.com/queries/7-column-chart-format-2" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT gender, zip_code, COUNT(*) FROM users GROUP BY 1, 2"><pre><span>SELECT</span> gender, zip_code, <span>COUNT</span>(<span>*</span>) <span>FROM</span> users <span>GROUP BY</span> <span>1</span>, <span>2</span></pre></div>

<p dir="auto">2 columns - both numeric - <a href="https://blazer.dokkuapp.com/queries/16-scatter-chart" rel="nofollow">Example</a></p>


<p dir="auto">2 columns - string, numeric - and last column named <code>pie</code> - <a href="https://blazer.dokkuapp.com/queries/17-pie-chart" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT gender, COUNT(*) AS pie FROM users GROUP BY 1"><pre><span>SELECT</span> gender, <span>COUNT</span>(<span>*</span>) <span>AS</span> pie <span>FROM</span> users <span>GROUP BY</span> <span>1</span></pre></div>

<p dir="auto">Columns named <code>latitude</code> and <code>longitude</code> or <code>lat</code> and <code>lon</code> or <code>lat</code> and <code>lng</code> - <a href="https://blazer.dokkuapp.com/queries/15-map" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT name, latitude, longitude FROM cities"><pre><span>SELECT</span> name, latitude, longitude <span>FROM</span> cities</pre></div>
<p dir="auto">or a column named <code>geojson</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT name, geojson FROM counties"><pre><span>SELECT</span> name, geojson <span>FROM</span> counties</pre></div>
<p dir="auto">To enable, get an access token from <a href="https://www.mapbox.com/" rel="nofollow">Mapbox</a> and set <code>ENV[&#34;MAPBOX_ACCESS_TOKEN&#34;]</code>.</p>

<p dir="auto">Use the column name <code>target</code> to draw a line for goals. <a href="https://blazer.dokkuapp.com/queries/8-target-line" rel="nofollow">Example</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT date_trunc(&#39;week&#39;, created_at), COUNT(*) AS new_users, 100000 AS target FROM users GROUP BY 1"><pre><span>SELECT</span> date_trunc(<span><span>&#39;</span>week<span>&#39;</span></span>, created_at), <span>COUNT</span>(<span>*</span>) <span>AS</span> new_users, <span>100000</span> <span>AS</span> target <span>FROM</span> users <span>GROUP BY</span> <span>1</span></pre></div>

<p dir="auto">Create a dashboard with multiple queries. <a href="https://blazer.dokkuapp.com/dashboards/1-dashboard-demo" rel="nofollow">Example</a></p>
<p dir="auto">If the query has a chart, the chart is shown. Otherwise, you‚Äôll see a table.</p>
<p dir="auto">If any queries have variables, they will show up on the dashboard.</p>

<p dir="auto">Checks give you a centralized place to see the health of your data. <a href="https://blazer.dokkuapp.com/checks" rel="nofollow">Example</a></p>
<p dir="auto">Create a query to identify bad rows.</p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT * FROM ratings WHERE user_id IS NULL /* all ratings should have a user */"><pre><span>SELECT</span> <span>*</span> <span>FROM</span> ratings <span>WHERE</span> user_id IS <span>NULL</span> <span><span>/*</span> all ratings should have a user <span>*/</span></span></pre></div>
<p dir="auto">Then create check with optional emails if you want to be notified. Emails are sent when a check starts failing, and when it starts passing again.</p>

<p dir="auto">Create a cohort analysis from a simple SQL query. <a href="https://blazer.dokkuapp.com/queries/19-cohort-analysis-from-first-order" rel="nofollow">Example</a></p>
<p dir="auto">Create a query with the comment <code>/* cohort analysis */</code>. The result should have columns named <code>user_id</code> and <code>conversion_time</code> and optionally <code>cohort_time</code>.</p>
<p dir="auto">You can generate cohorts from the first conversion time:</p>
<div dir="auto" data-snippet-clipboard-copy-content="/* cohort analysis */
SELECT user_id, created_at AS conversion_time FROM orders"><pre><span><span>/*</span> cohort analysis <span>*/</span></span>
<span>SELECT</span> user_id, created_at <span>AS</span> conversion_time <span>FROM</span> orders</pre></div>
<p dir="auto">(the first conversion isn‚Äôt counted in the first time period with this format)</p>
<p dir="auto">Or from another time, like sign up:</p>
<div dir="auto" data-snippet-clipboard-copy-content="/* cohort analysis */
SELECT users.id AS user_id, orders.created_at AS conversion_time, users.created_at AS cohort_time
FROM users LEFT JOIN orders ON orders.user_id = users.id"><pre><span><span>/*</span> cohort analysis <span>*/</span></span>
<span>SELECT</span> <span>users</span>.<span>id</span> <span>AS</span> user_id, <span>orders</span>.<span>created_at</span> <span>AS</span> conversion_time, <span>users</span>.<span>created_at</span> <span>AS</span> cohort_time
<span>FROM</span> users <span>LEFT JOIN</span> orders <span>ON</span> <span>orders</span>.<span>user_id</span> <span>=</span> <span>users</span>.<span>id</span></pre></div>
<p dir="auto">This feature requires PostgreSQL or MySQL 8.</p>

<p dir="auto">Blazer supports three different approaches to anomaly detection.</p>

<p dir="auto">Add <a href="https://github.com/ankane/prophet">prophet-rb</a> to your Gemfile:</p>

<p dir="auto">And add to <code>config/blazer.yml</code>:</p>


<p dir="auto"><a href="https://trendapi.org/" rel="nofollow">Trend</a> uses an external service by default, but you can run it on your own infrastructure as well.</p>
<p dir="auto">Add <a href="https://github.com/ankane/trend">trend</a> to your Gemfile:</p>

<p dir="auto">And add to <code>config/blazer.yml</code>:</p>

<p dir="auto">For the <a href="https://github.com/ankane/trend-api">self-hosted API</a>, create an initializer with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Trend.url = &#34;http://localhost:8000&#34;"><pre><span>Trend</span><span>.</span><span>url</span> <span>=</span> <span>&#34;http://localhost:8000&#34;</span></pre></div>

<p dir="auto">Add <a href="https://github.com/ankane/AnomalyDetection.rb">anomaly_detection</a> to your Gemfile:</p>

<p dir="auto">And add to <code>config/blazer.yml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="anomaly_checks: anomaly_detection"><pre><span>anomaly_checks</span>: <span>anomaly_detection</span></pre></div>

<p dir="auto">Blazer supports for two different forecasting methods. <a href="https://blazer.dokkuapp.com/queries/18-forecast?forecast=t" rel="nofollow">Example</a></p>
<p dir="auto">A forecast link will appear for queries that return 2 columns with types timestamp and numeric.</p>

<p dir="auto">Add <a href="https://github.com/ankane/prophet">prophet-rb</a> to your Gemfile:</p>
<div dir="auto" data-snippet-clipboard-copy-content="gem &#34;prophet-rb&#34;, &#34;&gt;= 0.2.1&#34;"><pre><span>gem</span> <span>&#34;prophet-rb&#34;</span><span>,</span> <span>&#34;&gt;= 0.2.1&#34;</span></pre></div>
<p dir="auto">And add to <code>config/blazer.yml</code>:</p>


<p dir="auto"><a href="https://trendapi.org/" rel="nofollow">Trend</a> uses an external service by default, but you can run it on your own infrastructure as well.</p>
<p dir="auto">Add <a href="https://github.com/ankane/trend">trend</a> to your Gemfile:</p>

<p dir="auto">And add to <code>config/blazer.yml</code>:</p>

<p dir="auto">For the <a href="https://github.com/ankane/trend-api">self-hosted API</a>, create an initializer with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Trend.url = &#34;http://localhost:8000&#34;"><pre><span>Trend</span><span>.</span><span>url</span> <span>=</span> <span>&#34;http://localhost:8000&#34;</span></pre></div>

<p dir="auto">Create database tables from CSV files. <a href="https://blazer.dokkuapp.com/uploads" rel="nofollow">Example</a></p>
<p dir="auto">Run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="rails generate blazer:uploads
rails db:migrate"><pre>rails generate blazer:uploads
rails db:migrate</pre></div>
<p dir="auto">And add to <code>config/blazer.yml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="uploads:
  url: postgres://...
  schema: uploads
  data_source: main"><pre><span>uploads</span>:
  <span>url</span>: <span>postgres://...</span>
  <span>schema</span>: <span>uploads</span>
  <span>data_source</span>: <span>main</span></pre></div>
<p dir="auto">This feature requires PostgreSQL. Create a new schema just for uploads.</p>


<p dir="auto">Blazer supports multiple data sources üéâ</p>
<p dir="auto">Add additional data sources in <code>config/blazer.yml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  main:
    url: &lt;%= ENV[&#34;BLAZER_DATABASE_URL&#34;] %&gt;
    # timeout, smart_variables, linked_columns, smart_columns
  catalog:
    url: &lt;%= ENV[&#34;CATALOG_DATABASE_URL&#34;] %&gt;
    # ...
  redshift:
    url: &lt;%= ENV[&#34;REDSHIFT_DATABASE_URL&#34;] %&gt;
    # ..."><pre><span>data_sources</span>:
  <span>main</span>:
    <span>url</span>: <span>&lt;%= ENV[&#34;BLAZER_DATABASE_URL&#34;] %&gt;</span>
    <span><span>#</span> timeout, smart_variables, linked_columns, smart_columns</span>
  <span>catalog</span>:
    <span>url</span>: <span>&lt;%= ENV[&#34;CATALOG_DATABASE_URL&#34;] %&gt;</span>
    <span><span>#</span> ...</span>
  <span>redshift</span>:
    <span>url</span>: <span>&lt;%= ENV[&#34;REDSHIFT_DATABASE_URL&#34;] %&gt;</span>
    <span><span>#</span> ...</span></pre></div>

<ul dir="auto">
<li><a href="#amazon-athena">Amazon Athena</a></li>
<li><a href="#amazon-redshift">Amazon Redshift</a></li>
<li><a href="#apache-drill">Apache Drill</a></li>
<li><a href="#apache-hive">Apache Hive</a></li>
<li><a href="#apache-ignite">Apache Ignite</a></li>
<li><a href="#apache-spark">Apache Spark</a></li>
<li><a href="#cassandra">Cassandra</a></li>
<li><a href="#druid">Druid</a></li>
<li><a href="#elasticsearch">Elasticsearch</a></li>
<li><a href="#google-bigquery">Google BigQuery</a></li>
<li><a href="#ibm-db2-and-informix">IBM DB2 and Informix</a></li>
<li><a href="#influxdb">InfluxDB</a></li>
<li><a href="#mysql-1">MySQL</a></li>
<li><a href="#neo4j">Neo4j</a></li>
<li><a href="#opensearch">OpenSearch</a></li>
<li><a href="#oracle">Oracle</a></li>
<li><a href="#postgresql-1">PostgreSQL</a></li>
<li><a href="#presto">Presto</a></li>
<li><a href="#salesforce">Salesforce</a></li>
<li><a href="#socrata-open-data-api-soda">Socrata Open Data API (SODA)</a></li>
<li><a href="#snowflake">Snowflake</a></li>
<li><a href="#sqlite">SQLite</a></li>
<li><a href="#sql-server">SQL Server</a></li>
</ul>
<p dir="auto">You can also <a href="#creating-an-adapter">create an adapter</a> for any other data store.</p>
<p dir="auto"><strong>Note:</strong> In the examples below, we recommend using environment variables for urls.</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: &lt;%= ENV[&#34;BLAZER_MY_SOURCE_URL&#34;] %&gt;"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>&lt;%= ENV[&#34;BLAZER_MY_SOURCE_URL&#34;] %&gt;</span></pre></div>

<p dir="auto">Add <a href="https://github.com/aws/aws-sdk-ruby">aws-sdk-athena</a> and <a href="https://github.com/aws/aws-sdk-ruby">aws-sdk-glue</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: athena
    database: database

    # optional settings
    output_location: s3://some-bucket/
    workgroup: primary
    access_key_id: ...
    secret_access_key: ...
    region: ..."><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>athena</span>
    <span>database</span>: <span>database</span>

    <span><span>#</span> optional settings</span>
    <span>output_location</span>: <span>s3://some-bucket/</span>
    <span>workgroup</span>: <span>primary</span>
    <span>access_key_id</span>: <span>...</span>
    <span>secret_access_key</span>: <span>...</span>
    <span>region</span>: <span>...</span></pre></div>
<p dir="auto">Here‚Äôs an example IAM policy:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &#34;Version&#34;: &#34;2012-10-17&#34;,
    &#34;Statement&#34;: [
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: [
                &#34;athena:GetQueryExecution&#34;,
                &#34;athena:GetQueryResults&#34;,
                &#34;athena:StartQueryExecution&#34;
            ],
            &#34;Resource&#34;: [
                &#34;arn:aws:athena:region:account-id:workgroup/primary&#34;
            ]
        },
        {
            &#34;Effect&#34;: &#34;Allow&#34;,
            &#34;Action&#34;: [
                &#34;glue:GetTable&#34;,
                &#34;glue:GetTables&#34;
            ],
            &#34;Resource&#34;: [
                &#34;arn:aws:glue:region:account-id:catalog&#34;,
                &#34;arn:aws:glue:region:account-id:database/default&#34;,
                &#34;arn:aws:glue:region:account-id:table/default/*&#34;
            ]
        }
    ]
}"><pre>{
    <span>&#34;Version&#34;</span>: <span><span>&#34;</span>2012-10-17<span>&#34;</span></span>,
    <span>&#34;Statement&#34;</span>: [
        {
            <span>&#34;Effect&#34;</span>: <span><span>&#34;</span>Allow<span>&#34;</span></span>,
            <span>&#34;Action&#34;</span>: [
                <span><span>&#34;</span>athena:GetQueryExecution<span>&#34;</span></span>,
                <span><span>&#34;</span>athena:GetQueryResults<span>&#34;</span></span>,
                <span><span>&#34;</span>athena:StartQueryExecution<span>&#34;</span></span>
            ],
            <span>&#34;Resource&#34;</span>: [
                <span><span>&#34;</span>arn:aws:athena:region:account-id:workgroup/primary<span>&#34;</span></span>
            ]
        },
        {
            <span>&#34;Effect&#34;</span>: <span><span>&#34;</span>Allow<span>&#34;</span></span>,
            <span>&#34;Action&#34;</span>: [
                <span><span>&#34;</span>glue:GetTable<span>&#34;</span></span>,
                <span><span>&#34;</span>glue:GetTables<span>&#34;</span></span>
            ],
            <span>&#34;Resource&#34;</span>: [
                <span><span>&#34;</span>arn:aws:glue:region:account-id:catalog<span>&#34;</span></span>,
                <span><span>&#34;</span>arn:aws:glue:region:account-id:database/default<span>&#34;</span></span>,
                <span><span>&#34;</span>arn:aws:glue:region:account-id:table/default/*<span>&#34;</span></span>
            ]
        }
    ]
}</pre></div>
<p dir="auto">You also need to configure <a href="https://aws.amazon.com/premiumsupport/knowledge-center/access-denied-athena/" rel="nofollow">S3 permissions</a>.</p>

<p dir="auto">Add <a href="https://github.com/kwent/activerecord6-redshift-adapter">activerecord6-redshift-adapter</a> or <a href="https://github.com/ConsultingMD/activerecord5-redshift-adapter">activerecord5-redshift-adapter</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: redshift://user:password@hostname:5439/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>redshift://user:password@hostname:5439/database</span></pre></div>
<p dir="auto">Use a <a href="https://docs.aws.amazon.com/redshift/latest/dg/r_GRANT.html" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/ankane/drill-sergeant">drill-sergeant</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: drill
    url: http://hostname:8047"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>drill</span>
    <span>url</span>: <span>http://hostname:8047</span></pre></div>
<p dir="auto">Use a <a href="https://drill.apache.org/docs/roles-and-privileges/" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/ankane/hexspace">hexspace</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: hive
    url: sasl://user:password@hostname:10000/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>hive</span>
    <span>url</span>: <span>sasl://user:password@hostname:10000/database</span></pre></div>
<p dir="auto">Use a <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization" rel="nofollow">read-only user</a>. Requires <a href="https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2" rel="nofollow">HiveServer2</a>.</p>

<p dir="auto">Add <a href="https://github.com/ankane/ignite-ruby">ignite-client</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: ignite://user:password@hostname:10800"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>ignite://user:password@hostname:10800</span></pre></div>
<p dir="auto">Use a <a href="https://www.gridgain.com/docs/latest/administrators-guide/security/authorization-permissions" rel="nofollow">read-only user</a> (requires a third-party plugin).</p>

<p dir="auto">Add <a href="https://github.com/ankane/hexspace">hexspace</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: spark
    url: sasl://user:password@hostname:10000/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>spark</span>
    <span>url</span>: <span>sasl://user:password@hostname:10000/database</span></pre></div>
<p dir="auto">Use a read-only user. Requires the <a href="https://spark.apache.org/docs/latest/sql-distributed-sql-engine.html" rel="nofollow">Thrift server</a>.</p>

<p dir="auto">Add <a href="https://github.com/datastax/ruby-driver">cassandra-driver</a> (and <a href="https://github.com/knu/sorted_set">sorted_set</a> for Ruby 3+) to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: cassandra://user:password@hostname:9042/keyspace"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>cassandra://user:password@hostname:9042/keyspace</span></pre></div>
<p dir="auto">Use a <a href="https://docs.datastax.com/en/cql-oss/3.3/cql/cql_using/useSecurePermission.html" rel="nofollow">read-only role</a>.</p>

<p dir="auto">Enable <a href="http://druid.io/docs/latest/querying/sql.html#configuration" rel="nofollow">SQL support</a> on the broker and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: druid
    url: http://hostname:8082"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>druid</span>
    <span>url</span>: <span>http://hostname:8082</span></pre></div>
<p dir="auto">Use a <a href="https://druid.apache.org/docs/latest/development/extensions-core/druid-basic-security.html" rel="nofollow">read-only role</a>.</p>

<p dir="auto">Add <a href="https://github.com/elastic/elasticsearch-ruby">elasticsearch</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: elasticsearch
    url: http://user:password@hostname:9200"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>elasticsearch</span>
    <span>url</span>: <span>http://user:password@hostname:9200</span></pre></div>
<p dir="auto">Use a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/security-privileges.html" rel="nofollow">read-only role</a>.</p>

<p dir="auto">Add <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/tree/master/google-cloud-bigquery">google-cloud-bigquery</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: bigquery
    project: your-project
    keyfile: path/to/keyfile.json"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>bigquery</span>
    <span>project</span>: <span>your-project</span>
    <span>keyfile</span>: <span>path/to/keyfile.json</span></pre></div>

<p dir="auto">Add <a href="https://github.com/ibmdb/ruby-ibmdb">ibm_db</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: ibm-db://user:password@hostname:50000/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>ibm-db://user:password@hostname:50000/database</span></pre></div>
<p dir="auto">Use a <a href="https://www.ibm.com/support/pages/creating-read-only-database-permissions-user" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/influxdata/influxdb-ruby">influxdb</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: influxdb
    url: http://user:password@hostname:8086/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>influxdb</span>
    <span>url</span>: <span>http://user:password@hostname:8086/database</span></pre></div>
<p dir="auto">Use a <a href="https://docs.influxdata.com/influxdb/v1.8/administration/authentication_and_authorization/" rel="nofollow">read-only user</a>. Supports <a href="https://docs.influxdata.com/influxdb/v1.8/query_language/explore-data/" rel="nofollow">InfluxQL</a>.</p>

<p dir="auto">Add <a href="https://github.com/brianmario/mysql2">mysql2</a> to your Gemfile (if it‚Äôs not there) and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: mysql2://user:password@hostname:3306/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>mysql2://user:password@hostname:3306/database</span></pre></div>
<p dir="auto">Use a <a href="#mysql">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/neo4jrb/neo4j-core">neo4j-core</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: neo4j
    url: http://user:password@hostname:7474"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>neo4j</span>
    <span>url</span>: <span>http://user:password@hostname:7474</span></pre></div>
<p dir="auto">Use a <a href="https://neo4j.com/docs/cypher-manual/current/access-control/manage-privileges/" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/opensearch-project/opensearch-ruby">opensearch-ruby</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: opensearch
    url: http://user:password@hostname:9200"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>opensearch</span>
    <span>url</span>: <span>http://user:password@hostname:9200</span></pre></div>
<p dir="auto">Use a <a href="https://opensearch.org/docs/latest/security-plugin/access-control/permissions/" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/rsim/oracle-enhanced">activerecord-oracle_enhanced-adapter</a> and <a href="https://github.com/kubo/ruby-oci8">ruby-oci8</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: oracle-enhanced://user:password@hostname:1521/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>oracle-enhanced://user:password@hostname:1521/database</span></pre></div>
<p dir="auto">Use a <a href="https://docs.oracle.com/cd/B19306_01/network.102/b14266/authoriz.htm" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/ged/ruby-pg">pg</a> to your Gemfile (if it‚Äôs not there) and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: postgres://user:password@hostname:5432/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>postgres://user:password@hostname:5432/database</span></pre></div>
<p dir="auto">Use a <a href="#postgresql">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/treasure-data/presto-client-ruby">presto-client</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: presto://user@hostname:8080/catalog"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>presto://user@hostname:8080/catalog</span></pre></div>
<p dir="auto">Use a <a href="https://prestodb.io/docs/current/security/built-in-system-access-control.html" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Add <a href="https://github.com/restforce/restforce">restforce</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: salesforce"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>salesforce</span></pre></div>
<p dir="auto">And set the appropriate environment variables:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SALESFORCE_USERNAME=&#34;username&#34;
SALESFORCE_PASSWORD=&#34;password&#34;
SALESFORCE_SECURITY_TOKEN=&#34;security token&#34;
SALESFORCE_CLIENT_ID=&#34;client id&#34;
SALESFORCE_CLIENT_SECRET=&#34;client secret&#34;
SALESFORCE_API_VERSION=&#34;41.0&#34;"><pre>SALESFORCE_USERNAME=<span><span>&#34;</span>username<span>&#34;</span></span>
SALESFORCE_PASSWORD=<span><span>&#34;</span>password<span>&#34;</span></span>
SALESFORCE_SECURITY_TOKEN=<span><span>&#34;</span>security token<span>&#34;</span></span>
SALESFORCE_CLIENT_ID=<span><span>&#34;</span>client id<span>&#34;</span></span>
SALESFORCE_CLIENT_SECRET=<span><span>&#34;</span>client secret<span>&#34;</span></span>
SALESFORCE_API_VERSION=<span><span>&#34;</span>41.0<span>&#34;</span></span></pre></div>
<p dir="auto">Use a read-only user. Supports <a href="https://developer.salesforce.com/docs/atlas.en-us.soql_sosl.meta/soql_sosl/sforce_api_calls_soql.htm" rel="nofollow">SOQL</a>.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Socrata Open Data API (SODA)</h3><a id="user-content-socrata-open-data-api-soda" aria-label="Permalink: Socrata Open Data API (SODA)" href="#socrata-open-data-api-soda"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: soda
    url: https://soda.demo.socrata.com/resource/4tka-6guv.json
    app_token: ..."><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>soda</span>
    <span>url</span>: <span>https://soda.demo.socrata.com/resource/4tka-6guv.json</span>
    <span>app_token</span>: <span>...</span></pre></div>
<p dir="auto">Supports <a href="https://dev.socrata.com/docs/functions/" rel="nofollow">SoQL</a>.</p>

<p dir="auto">First, install ODBC. For Homebrew, use:</p>

<p dir="auto">For Ubuntu, use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo apt-get install unixodbc-dev"><pre>sudo apt-get install unixodbc-dev</pre></div>
<p dir="auto">For Heroku, use the <a href="https://github.com/heroku/heroku-buildpack-apt">Apt buildpack</a> and create an <code>Aptfile</code> with:</p>
<div data-snippet-clipboard-copy-content="unixodbc-dev
https://sfc-repo.snowflakecomputing.com/odbc/linux/2.21.5/snowflake-odbc-2.21.5.x86_64.deb"><pre lang="text"><code>unixodbc-dev
https://sfc-repo.snowflakecomputing.com/odbc/linux/2.21.5/snowflake-odbc-2.21.5.x86_64.deb
</code></pre></div>
<blockquote>
<p dir="auto">This installs the driver at <code>/app/.apt/usr/lib/snowflake/odbc/lib/libSnowflake.so</code></p>
</blockquote>
<p dir="auto">Then, download the <a href="https://docs.snowflake.net/manuals/user-guide/odbc-download.html" rel="nofollow">Snowflake ODBC driver</a>. Add <a href="https://github.com/localytics/odbc_adapter">odbc_adapter</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: snowflake
    conn_str: Driver=/path/to/libSnowflake.so;uid=user;pwd=password;server=host.snowflakecomputing.com"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>snowflake</span>
    <span>conn_str</span>: <span>Driver=/path/to/libSnowflake.so;uid=user;pwd=password;server=host.snowflakecomputing.com</span></pre></div>
<p dir="auto">Use a <a href="https://docs.snowflake.com/en/user-guide/security-access-control-configure.html" rel="nofollow">read-only role</a>.</p>

<p dir="auto">Add <a href="https://github.com/sparklemotion/sqlite3-ruby">sqlite3</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: sqlite3:path/to/database.sqlite3"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>sqlite3:path/to/database.sqlite3</span></pre></div>

<p dir="auto">Add <a href="https://github.com/rails-sqlserver/tiny_tds">tiny_tds</a> and <a href="https://github.com/rails-sqlserver/activerecord-sqlserver-adapter">activerecord-sqlserver-adapter</a> to your Gemfile and set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    url: sqlserver://user:password@hostname:1433/database"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>url</span>: <span>sqlserver://user:password@hostname:1433/database</span></pre></div>
<p dir="auto">Use a <a href="https://docs.microsoft.com/en-us/sql/relational-databases/security/authentication-access/getting-started-with-database-engine-permissions?view=sql-server-ver15" rel="nofollow">read-only user</a>.</p>

<p dir="auto">Create an adapter for any data store with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="class FooAdapter &lt; Blazer::Adapters::BaseAdapter
  # code goes here
end

Blazer.register_adapter &#34;foo&#34;, FooAdapter"><pre><span>class</span> <span>FooAdapter</span> &lt; <span>Blazer</span>::<span>Adapters</span>::<span>BaseAdapter</span>
  <span># code goes here</span>
<span>end</span>

<span>Blazer</span><span>.</span><span>register_adapter</span> <span>&#34;foo&#34;</span><span>,</span> <span>FooAdapter</span></pre></div>
<p dir="auto">See the <a href="https://github.com/ankane/blazer/blob/master/lib/blazer/adapters/presto_adapter.rb">Presto adapter</a> for a good example. Then use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="data_sources:
  my_source:
    adapter: foo
    url: http://user:password@hostname:9200/"><pre><span>data_sources</span>:
  <span>my_source</span>:
    <span>adapter</span>: <span>foo</span>
    <span>url</span>: <span>http://user:password@hostname:9200/</span></pre></div>

<p dir="auto">Blazer supports a basic permissions model.</p>
<ol dir="auto">
<li>Queries without a name are unlisted</li>
<li>Queries whose name starts with <code>#</code> are only listed to the creator</li>
<li>Queries whose name starts with <code>*</code> can only be edited by the creator</li>
</ol>

<p dir="auto">Have team members who want to learn SQL? Here are a few great, free resources.</p>
<ul dir="auto">
<li><a href="https://dataschool.com/learn-sql/" rel="nofollow">The Data School</a></li>
<li><a href="https://sqlbolt.com/" rel="nofollow">SQLBolt</a></li>
</ul>

<p dir="auto">For an easy way to group by day, week, month, and more with correct time zones, check out <a href="https://github.com/ankane/groupdate.sql">Groupdate.sql</a>.</p>

<p dir="auto">Looking for a standalone version? Check out <a href="https://github.com/buren/ghost_blazer">Ghost Blazer</a>.</p>

<p dir="auto">By default, queries take up a request while they are running. To run queries asynchronously, add to your config:</p>

<p dir="auto"><strong>Note:</strong> Requires caching to be enabled. If you have multiple web processes, your app must use a centralized cache store like Memcached or Redis.</p>
<div dir="auto" data-snippet-clipboard-copy-content="config.cache_store = :mem_cache_store"><pre><span>config</span><span>.</span><span>cache_store</span> <span>=</span> <span>:mem_cache_store</span></pre></div>

<p dir="auto">Archive queries that haven‚Äôt been viewed in over 90 days.</p>
<div dir="auto" data-snippet-clipboard-copy-content="rake blazer:archive_queries"><pre>rake blazer:archive_queries</pre></div>

<p dir="auto">If views are stuck with a <code>Loading...</code> message, there might be a problem with strict CSP settings in your app. This can be checked with Firefox or Chrome dev tools. You can allow Blazer to override these settings for its controllers with:</p>



<p dir="auto">Maps now use Mapbox GL JS v1 instead of Mapbox.js, which affects Mapbox billing.</p>

<p dir="auto">Custom adapters now need to specify how to quote variables in queries (there is no longer a default)</p>
<div dir="auto" data-snippet-clipboard-copy-content="class FooAdapter &lt; Blazer::Adapters::BaseAdapter
  def quoting
    :backslash_escape # single quote strings and convert &#39; to \&#39; and \ to \\
    # or
    :single_quote_escape # single quote strings and convert &#39; to &#39;&#39;
    # or
    -&gt;(value) { ... } # custom method
  end
end"><pre><span>class</span> <span>FooAdapter</span> &lt; <span>Blazer</span>::<span>Adapters</span>::<span>BaseAdapter</span>
  <span>def</span> <span>quoting</span>
    <span>:backslash_escape</span> <span># single quote strings and convert &#39; to \&#39; and \ to \\</span>
    <span># or</span>
    <span>:single_quote_escape</span> <span># single quote strings and convert &#39; to &#39;&#39;</span>
    <span># or</span>
    <span>-&gt;</span><span>(</span><span>value</span><span>)</span> <span>{</span> ... <span>}</span> <span># custom method</span>
  <span>end</span>
<span>end</span></pre></div>

<p dir="auto">To archive queries, create a migration</p>
<div dir="auto" data-snippet-clipboard-copy-content="rails g migration add_status_to_blazer_queries"><pre>rails g migration add_status_to_blazer_queries</pre></div>
<p dir="auto">with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="add_column :blazer_queries, :status, :string
Blazer::Query.update_all(status: &#34;active&#34;)"><pre><span>add_column</span> <span>:blazer_queries</span><span>,</span> <span>:status</span><span>,</span> <span>:string</span>
<span>Blazer</span>::<span>Query</span><span>.</span><span>update_all</span><span>(</span><span>status</span>: <span>&#34;active&#34;</span><span>)</span></pre></div>

<p dir="auto">To use Slack notifications, create a migration</p>
<div dir="auto" data-snippet-clipboard-copy-content="rails g migration add_slack_channels_to_blazer_checks"><pre>rails g migration add_slack_channels_to_blazer_checks</pre></div>
<p dir="auto">with:</p>
<div dir="auto" data-snippet-clipboard-copy-content="add_column :blazer_checks, :slack_channels, :text"><pre><span>add_column</span> <span>:blazer_checks</span><span>,</span> <span>:slack_channels</span><span>,</span> <span>:text</span></pre></div>

<p dir="auto">View the <a href="https://github.com/ankane/blazer/blob/master/CHANGELOG.md">changelog</a></p>

<p dir="auto">Blazer uses a number of awesome open source projects, including <a href="https://github.com/rails/rails/">Rails</a>, <a href="https://github.com/vuejs/vue">Vue.js</a>, <a href="https://github.com/jquery/jquery">jQuery</a>, <a href="https://github.com/twbs/bootstrap">Bootstrap</a>, <a href="https://github.com/brianreavis/selectize.js">Selectize</a>, <a href="https://github.com/jmosbech/StickyTableHeaders">StickyTableHeaders</a>, <a href="https://github.com/joequery/Stupid-Table-Plugin">Stupid jQuery Table Sort</a>, and <a href="https://github.com/dangrossman/bootstrap-daterangepicker">Date Range Picker</a>.</p>
<p dir="auto">Demo data from <a href="https://grouplens.org/datasets/movielens/" rel="nofollow">MovieLens</a>.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Want to Make Blazer Better?</h2><a id="user-content-want-to-make-blazer-better" aria-label="Permalink: Want to Make Blazer Better?" href="#want-to-make-blazer-better"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">That‚Äôs awesome! Here are a few ways you can help:</p>
<ul dir="auto">
<li><a href="https://github.com/ankane/blazer/issues">Report bugs</a></li>
<li>Fix bugs and <a href="https://github.com/ankane/blazer/pulls">submit pull requests</a></li>
<li>Write, clarify, or fix documentation</li>
<li>Suggest or add new features</li>
</ul>
<p dir="auto">Check out the <a href="https://github.com/ankane/blazer-dev">dev app</a> to get started.</p>
</article></div></div>
  </body>
</html>
