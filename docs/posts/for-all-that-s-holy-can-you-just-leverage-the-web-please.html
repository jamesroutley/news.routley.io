<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.tomayac.com/2025/09/03/for-all-thats-holy-can-you-just-leverage-the-web-please/">Original</a>
    <h1>For all that&#39;s holy, can you just leverage the Web, please?</h1>
    
    <div id="readability-page-1" class="page"><div><article lang="en"><header><a href="https://blog.tomayac.com/2025/09/03/for-all-thats-holy-can-you-just-leverage-the-web-please/"></a></header><section><p>When I moved in with my wife Laura in 2005, we lived in a shared apartment in Barcelona that had an ancient washing machine that was just there already, no idea who initially bought it. I managed to break the washing machine door&#39;s closing mechanism some time in 2006, so for a few weeks, whenever we did the washing, we had to lean a chair against the door so it wouldn&#39;t open. At the time, we were both students and living on a small budget.</p><p>Eventually, later in the same year, we bought an Electrolux machine that has accompanied us ever since. First on our move to Hamburg, then there through three apartments, and finally back to Spain, where we live now in the Catalonian countryside. Anyway, the washing machine had a motor damage last week, so after almost 20 years, it was time for a new one. I ordered it online (another Electrolux, <em>without</em> Internet nor WiFi), it was delivered swiftly, and I installed it hopefully correctly.</p><p><picture><source type="image/avif" srcset="/images/EbIHWbW6Cy-368.avif 368w, /images/EbIHWbW6Cy-700.avif 700w" sizes="auto"/><source type="image/webp" srcset="/images/EbIHWbW6Cy-368.webp 368w, /images/EbIHWbW6Cy-700.webp 700w" sizes="auto"/><img loading="lazy" decoding="async" src="https://blog.tomayac.com/images/EbIHWbW6Cy-368.png" alt="Our new Electrolux washing machine." width="700" height="700" srcset="/images/EbIHWbW6Cy-368.png 368w, /images/EbIHWbW6Cy-700.png 700w" sizes="auto"/></picture></p><p>The washing machine came with a voluntary 10 year warranty if you registered it. The brochure where this offer was announced featured a free telephone number and a QR code that pointed at the number (in plain text, not making use of the <code>tel:</code> protocol). I called the number, and to my <em>absolute surprise</em> there were currently more callers than usual. After about 20 minutes, I had an agent on the phone, but after saying what I wanted, they just hung up on me (or the connection cut, whatever). Fine, I called again, but now, the call center was over capacity and they didn&#39;t even let me enter in the wait loop.</p><p>They did offer to send me a link to a chat service on their website via SMS, though, so I went for that option. The SMS literally pointed me at something like <code>https://www.</code> broken up by a space and then <code>example.com/gc/</code>. When I clicked the linkified <code>example.com/gc/</code>, I ended up on a broken site whose certificate wasn&#39;t trusted. After fixing the link manually and prepending the <code>https://www.</code> part, the page didn&#39;t load.</p><p>At this point I was close to giving up, but I had one last card that I wanted to play: I searched Google for &#34;electrolux warranty register&#34;, and it pointed me at a site <code>https://www.example.com/mypages/register-a-product/</code> as the first result. This looked promising. The <code>mypages</code> already suggested that this was gated behind a login, so I created an account, which was painless. (Turns out, after having an account and being logged in, the chat URL also workedâ€”what an oversight on their part.) On the page, they had a field where you could enter the washing machine&#39;s product number from the identification plate on the door of the washing machine, together with helpful information where to find the data.</p><p><picture><source type="image/avif" srcset="/images/Wzdh1DWJWS-368.avif 368w, /images/Wzdh1DWJWS-736.avif 736w, /images/Wzdh1DWJWS-1459.avif 1459w" sizes="auto"/><img loading="lazy" decoding="async" src="https://blog.tomayac.com/images/Wzdh1DWJWS-368.webp" alt="Annotated Electrolux identification plate." width="1459" height="468" srcset="/images/Wzdh1DWJWS-368.webp 368w, /images/Wzdh1DWJWS-736.webp 736w, /images/Wzdh1DWJWS-1459.webp 1459w" sizes="auto"/></picture></p><p>But even better, they offered a service where you could just upload a picture of the identification plate, and some AI on their server then extracted the product number and let you register the product with two clicks. What a fantastic experience compared to the crappy (and likely for the operator way more expensive) call center experience.</p><p><picture><source type="image/avif" srcset="/images/VBXS4UENEL-368.avif 368w, /images/VBXS4UENEL-736.avif 736w, /images/VBXS4UENEL-4080.avif 4080w" sizes="auto"/><source type="image/webp" srcset="/images/VBXS4UENEL-368.webp 368w, /images/VBXS4UENEL-736.webp 736w, /images/VBXS4UENEL-4080.webp 4080w" sizes="auto"/><img loading="lazy" decoding="async" src="https://blog.tomayac.com/images/VBXS4UENEL-368.jpeg" alt="Electrolux identification plate cell phone photo." width="4080" height="3072" srcset="/images/VBXS4UENEL-368.jpeg 368w, /images/VBXS4UENEL-736.jpeg 736w, /images/VBXS4UENEL-4080.jpeg 4080w" sizes="auto"/></picture></p><p>Why they didn&#39;t just put this URL on the brochure and the QR code is beyond me. As the title suggests: <strong>For all that&#39;s holy, can you just leverage the Web, please?</strong> Don&#39;t make me talk to people! They could still offer to register the machine by telephone as an alternative, but in 2025, the default for such things should just be the Web.</p><h2 id="bonus" tabindex="-1">Bonus <a href="#bonus" aria-hidden="true">ðŸ”—</a></h2><p>Since I work on <a href="https://developer.chrome.com/docs/ai/built-in">built-in AI</a> as my day job in the Chrome team at Google, I could not <em>not</em> notice this <em>&#34;extract the product number from this identification plate&#34;</em> use case for client-side AI. I coded up a quick <a href="https://tomayac.github.io/blogccasion-demos/built-in-ai-product-number-ocr/">demo</a> using the <a href="https://developer.chrome.com/docs/ai/prompt-api">Prompt API</a> embedded below that shows this in action. Here&#39;s a quick walkthrough of the code:</p><ol><li>Create a session with the <code>LanguageModel</code>, informing the user of download progress if the model needs to be downloaded, and telling the model about the to-be-expected inputs (English texts and images) and outputs (English texts). In the system prompt, I tell the model what its overall task is (identify product numbers from photos of identification plates).</li><li>Prompt the model using the <code>promptStreaming()</code> method with a multimodal prompt, one textual and one image. The Prompt API supports <a href="https://developer.chrome.com/docs/ai/structured-output-for-prompt-api?hl=en">structured output</a> in the form of a JSON Schema or regular expression. Product numbers have nine digits, so I pass the regular expression <code>/\d{9}/</code> as the <code>responseConstraint</code> option.</li><li>Iterate over the chunks of the response. Since I&#39;m just expecting nine digits, this is probably a bit overkill, but, heyâ€¦</li><li>(Not shown) On the server, verify that the recognized product number actually exist. Companies typically have some sort of verification rules like checksums, or washing machine product numbers always start with <code>91</code> or something. If you know those rules, you can of course make them part of the <code>responseConstraint</code>, but you always need to verify untrusted user input (which the output of an LLM counts as) on the server.</li></ol><pre><code><span>const</span> session <span>=</span> <span>await</span> LanguageModel<span>.</span><span>create</span><span>(</span><span>{</span>
  <span>monitor</span><span>(</span><span>m</span><span>)</span> <span>{</span>
    m<span>.</span><span>addEventListener</span><span>(</span><span>&#39;downloadprogress&#39;</span><span>,</span> <span>(</span><span>e</span><span>)</span> <span>=&gt;</span> <span>{</span>
      console<span>.</span><span>log</span><span>(</span><span><span>`</span><span>Downloaded </span><span><span>${</span>e<span>.</span>loaded <span>*</span> <span>100</span><span>}</span></span><span>%.</span><span>`</span></span><span>)</span><span>;</span>
    <span>}</span><span>)</span><span>;</span>
  <span>}</span><span>,</span>
  <span>expectedInputs</span><span>:</span> <span>[</span><span>{</span> <span>type</span><span>:</span> <span>&#39;text&#39;</span><span>,</span> <span>languages</span><span>:</span> <span>[</span><span>&#39;en&#39;</span><span>]</span> <span>}</span><span>,</span> <span>{</span> <span>type</span><span>:</span> <span>&#39;image&#39;</span> <span>}</span><span>]</span><span>,</span>
  <span>expectedOutputs</span><span>:</span> <span>[</span><span>{</span> <span>type</span><span>:</span> <span>&#39;text&#39;</span><span>,</span> <span>languages</span><span>:</span> <span>[</span><span>&#39;en&#39;</span><span>]</span> <span>}</span><span>]</span><span>,</span>
  <span>initialPrompts</span><span>:</span> <span>[</span>
    <span>{</span>
      <span>role</span><span>:</span> <span>&#39;system&#39;</span><span>,</span>
      <span>content</span><span>:</span>
        <span>&#39;Your task is to identify product numbers from photos of identification plates.&#39;</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>,</span>
<span>}</span><span>)</span><span>;</span>

<span>const</span> stream <span>=</span> session<span>.</span><span>promptStreaming</span><span>(</span>
  <span>[</span>
    <span>{</span>
      <span>role</span><span>:</span> <span>&#39;user&#39;</span><span>,</span>
      <span>content</span><span>:</span> <span>[</span>
        <span>{</span>
          <span>type</span><span>:</span> <span>&#39;text&#39;</span><span>,</span>
          <span>value</span><span>:</span>
            <span>&#39;Extract the product number from this identification plate. It has nine digits and appears after the text &#34;Prod.No.&#34;.&#39;</span><span>,</span>
        <span>}</span><span>,</span>
        <span>{</span> <span>type</span><span>:</span> <span>&#39;image&#39;</span><span>,</span> <span>value</span><span>:</span> image <span>}</span><span>,</span>
      <span>]</span><span>,</span>
    <span>}</span><span>,</span>
  <span>]</span><span>,</span>
  <span>{</span>
    <span>responseConstraint</span><span>:</span> <span><span>/</span><span>\d{9}</span><span>/</span></span><span>,</span>
  <span>}</span>
<span>)</span><span>;</span>

<span>for</span> <span>await</span> <span>(</span><span>const</span> chunk <span>of</span> stream<span>)</span> <span>{</span>
  console<span>.</span><span>log</span><span>(</span>chunk<span>)</span><span>;</span>
<span>}</span></code></pre></section></article></div></div>
  </body>
</html>
