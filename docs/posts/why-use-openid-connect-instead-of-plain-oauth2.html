<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://security.stackexchange.com/questions/37818/why-use-openid-connect-instead-of-plain-oauth2/260519#260519">Original</a>
    <h1>Why use OpenID Connect instead of plain OAuth2?</h1>
    
    <div id="readability-page-1" class="page"><div id="mainbar" role="main" aria-label="question and answers">

                
<div data-questionid="37818" data-position-on-page="0" data-score="143" id="question">
    


    <div>
        

        

<div>
    
    <div itemprop="text">
                
<p>I just started to use <a href="https://en.wikipedia.org/wiki/OAuth" rel="noreferrer">OAuth 2.0</a> as a way to authenticate my users. It works great - I just use the identity/profile API of each provider to get a validated email address of the user.</p>

<p>Now I read about <a href="https://openid.net/connect/" rel="noreferrer">OpenID Connect</a> and am a little bit confused. </p>

<p>What is the difference between OpenID Connect and using the identity API over OAuth2? Is it just that I have a standard profile API, so that I don&#39;t have to worry whether I get an <code>&#34;email&#34;</code> or an <code>&#34;emails&#34;</code> JSON back? </p>

<p>Or is there more to it, which makes the OpenID Connect approach more secure than my first approach?</p>
    </div>

        

    <div>
        <div>
            

                <div>
<div>
    
    <div>
        <a href="https://security.stackexchange.com/users/118367/elie-saad"><p><img src="https://i.stack.imgur.com/wAI7I.png?s=64&amp;g=1" alt="Elie Saad&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div>
        <p><a href="https://security.stackexchange.com/users/118367/elie-saad">Elie Saad</a></p><p><span title="reputation score " dir="ltr">387</span><span title="2 gold badges" aria-hidden="true"><span></span><span>2</span></span><span>2 gold badges</span><span title="3 silver badges" aria-hidden="true"><span></span><span>3</span></span><span>3 silver badges</span><span title="14 bronze badges" aria-hidden="true"><span></span><span>14</span></span><span>14 bronze badges</span>
        </p>
    </div>
</div>
                </div>
            <div>
                <div>
    <p>
        asked <span title="2013-06-21 06:18:15Z">Jun 21, 2013 at 6:18</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/5203/rdmueller"><p><img src="https://www.gravatar.com/avatar/cc5f3bf8b3cb91c985ed4fd046aa451d?s=64&amp;d=identicon&amp;r=PG" alt="rdmueller&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    
</div>


            </div>
        </div>
    </div>
    
</div>




            <p><span itemprop="commentCount">6</span></p>
    </div>

</div>



                
                
                <div id="answers">
                    


                                        
<div id="answer-260519" data-answerid="260519" data-parentid="37818" data-score="21" data-position-on-page="1" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="acceptedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p><a href="http://www.thread-safe.com/2012/01/problem-with-oauth-for-authentication.html" rel="noreferrer">This article</a> is the best explanation I&#39;ve found after a LOT of searching (h/t to @rickchristie for linking to it in a comment to another answer).</p>
<h3>Summary</h3>
<p>Relying on plain OAuth 2.0 for authentication is dangerous if you (the client) are just trusting ANY valid access token you receive that&#39;s associated with that user as a reliable indicator that you&#39;re receiving the request from the actual user, without knowing whether that access token was generated by the user trying to log into your site or if it was generated by the user logging into some other (malicious) website/app.</p>
<p>With OpenID Connect, you can just look inside the JWT ID token provided by incoming requests and see if that token was generated by the user logging into your app or if they were logging into some other web app.</p>
<p>But if you&#39;re using the &#34;authorization code flow&#34;, i.e. the user is being directed to send your back-end the authorization code and your back-end is trading that for the access token, and then your back-end is saving a record of those access tokens, or if you are issuing the user a signed JWT that contains the access token you generated on their behalf, then you can just check any incoming request to see if the provided access token is one that you have generated, thereby preventing malicious apps from impersonating your user with an access token that was created when the user logged into the malicious app.</p>
<p>If you do that check, you don&#39;t need to use OpenID Connect to avoid that kind of attack.  But it seems that for some use-cases (e.g. pure-frontend auth libraries) this method of saving and checking access tokens is either not possible or not convenient, and it&#39;s for those use-cases that OpenID Connect is necessary.</p>
<h3>Key quotes from the article</h3>
<ul>
<li>&#34;So [when using only OAuth 2.0] we wind up in the situation where any site the user logs into with their Facebook account can impersonate that user at any other site that accepts Facebook logins through the client-side flow (the default for Facebook).  The less common server-side flow is more secure, but more complicated.&#34;</li>
<li>&#34;The client has no way to tell who the authorization server thought it was issuing that access token to.&#34;</li>
</ul>
    </div>
    <div>
        <div>
            
            


            <div>
                <div>
    <p>
        answered <span title="2022-03-20 16:41:39Z">Mar 20, 2022 at 16:41</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/161317/nathan-wailes"><p><img src="https://i.stack.imgur.com/gNMJB.jpg?s=64&amp;g=1" alt="Nathan Wailes&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">3</span></p>
    </div>
</div>


                                        
<div id="answer-47136" data-answerid="47136" data-parentid="37818" data-score="85" data-position-on-page="2" data-highest-scored="1" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p>OpenID connect will give you an access token plus an <a href="http://openid.net/specs/openid-connect-core-1_0.html#IDToken">id token</a>. 
The id token is a <a href="http://jwt.io/">JWT</a> and contains information about the authenticated user. It is signed by the identity provider and can be read and verified without accessing the identity provider. </p>

<p>In addition, OpenID connect standardizes quite a couple things that oauth2 leaves up to choice. for instance scopes, endpoint discovery, and dynamic registration of clients. </p>

<p>This makes it easier to write code that lets the user choose between multiple identity providers. </p>
    </div>
    <div>
        <div>
            
            <div>
<div>
    
    <div>
        <a href="https://security.stackexchange.com/users/15048/ionu%c8%9b-g-stan"><p><img src="https://www.gravatar.com/avatar/7cefc64f7b1b53513625bf3487ecd16d?s=64&amp;d=identicon&amp;r=PG" alt="Ionuț G. Stan&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    
</div>
            </div>


            <div>
                <div>
    <p>
        answered <span title="2013-12-17 03:33:57Z">Dec 17, 2013 at 3:33</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/26007/flup"><p><img src="https://www.gravatar.com/avatar/ef8a47614e304d850123f76deaab2a62?s=64&amp;d=identicon&amp;r=PG" alt="flup&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <p><a href="https://security.stackexchange.com/users/26007/flup">flup</a><span itemprop="name">flup</span></p><p><span title="reputation score " dir="ltr">951</span><span title="1 gold badge" aria-hidden="true"><span></span><span>1</span></span><span>1 gold badge</span><span title="7 silver badges" aria-hidden="true"><span></span><span>7</span></span><span>7 silver badges</span><span title="7 bronze badges" aria-hidden="true"><span></span><span>7</span></span><span>7 bronze badges</span>
        </p>
    </div>
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">3</span></p>
    </div>
</div>

                                        
<div id="answer-49110" data-answerid="49110" data-parentid="37818" data-score="31" data-position-on-page="3" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p>OAuth provides only and should only provides authorization using an access token. OpenID connect is built on OAuth 2 in order to provide user authentication information. However, it will not provide you a more robust implementation than OAuth (since it uses OAuth and add some extra interactions with a OpenID provider).</p>

<blockquote>
  <p>OpenID Connect 1.0 is a simple identity layer on top of the OAuth 2.0 [RFC6749] protocol. It enables Clients to verify the identity of the End-User based on the authentication performed by an Authorization Server, as well as to obtain basic profile information about the End-User in an interoperable and REST-like manner.
   <a href="http://openid.net/specs/openid-connect-core-1_0.html#Introduction" rel="noreferrer">OpenID Connect Core 1.0 - draft 17</a></p>
</blockquote>

<p>OpenID connect provides you a &#34;standard&#34; way to obtain user identity. If you use OAuth and the API, you should adapt your request for each resource, which may not always provide the same information or may change over the time. And conceptually, you use OAuth to be allowed to use an API, not to authenticate an user.</p>

<blockquote>
  <p>As background, the OAuth 2.0 Authorization Framework [RFC6749] and OAuth 2.0 Bearer Token Usage [RFC6750] specifications provide a general framework for third-party applications to obtain and use limited access to HTTP resources. They define mechanisms to obtain and use Access Tokens to access resources but do not define standard methods to provide identity information. Notably, without profiling OAuth 2.0, it is incapable of providing information about the authentication of an End-User. <a href="http://openid.net/specs/openid-connect-core-1_0.html#Introduction" rel="noreferrer">OpenID Connect Core 1.0 - draft 17</a></p>
</blockquote>

<p>Note that OpenID connect provides an <code>id_token</code> with some information about the user. However, if you want the whole set of information, you still need the <code>access_token</code> to request the OpenID provider to get the userinfo (which confused me the first time I saw it). That shows that requesting user information from an API or from the OpenID provider use almost the same method. See <code>5.3.1. userinfo request</code> in the draft.</p>
    </div>
    <div>
        <div>
            
            <div>
<div>
    
    <div>
        <a href="https://security.stackexchange.com/users/20722/slolife"><p><img src="https://www.gravatar.com/avatar/d639e25e8e77551988a45859b61656af?s=64&amp;d=identicon&amp;r=PG" alt="slolife&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    
</div>
            </div>


            <div>
                <div>
    <p>
        answered <span title="2014-01-21 14:07:21Z">Jan 21, 2014 at 14:07</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/37657/nereis"><p><img src="https://www.gravatar.com/avatar/252554180ff42ab5171e3c37aad48f7a?s=64&amp;d=identicon&amp;r=PG" alt="Nereis&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <p><a href="https://security.stackexchange.com/users/37657/nereis">Nereis</a><span itemprop="name">Nereis</span></p><p><span title="reputation score " dir="ltr">491</span><span title="5 silver badges" aria-hidden="true"><span></span><span>5</span></span><span>5 silver badges</span><span title="7 bronze badges" aria-hidden="true"><span></span><span>7</span></span><span>7 bronze badges</span>
        </p>
    </div>
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">1</span></p>
    </div>
</div>


                                        
<div id="answer-82550" data-answerid="82550" data-parentid="37818" data-score="18" data-position-on-page="4" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p>OAuth is an authorisation protocol, providing a way to give authorisation to access a protected resource. A by-product of the authorisation process is that the user is authenticated.</p>

<p>Technically, OAuth does not have to give you any information about the user. What it provides is a validation that the user has given authority to the application to access some data. This is governed by the scope of the authorisation grant.</p>

<p>OpenID Connect provides a way for the application to retrieve information about the authenticated user. Most importantly it provides a level of assurance that the information is valid (as far as the authorisation server is concerned anyway). This can then be used to facilitate identity federation.</p>

<p>In the past, federation was achieved with OAuth by granting a scope that allowed access to the user&#39;s identity information. OpenID Connect standardises that scope.</p>
    </div>
    <div>
        <div>
            


            <div>
                <div>
    <p>
        answered <span title="2015-02-26 04:12:29Z">Feb 26, 2015 at 4:12</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/68887/tim"><p><img src="https://www.gravatar.com/avatar/96aa807d3f3a83022afc9cf5be8152ac?s=64&amp;d=identicon&amp;r=PG" alt="Tim&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <p><a href="https://security.stackexchange.com/users/68887/tim">Tim</a><span itemprop="name">Tim</span></p><p><span title="reputation score " dir="ltr">236</span><span title="2 silver badges" aria-hidden="true"><span></span><span>2</span></span><span>2 silver badges</span><span title="3 bronze badges" aria-hidden="true"><span></span><span>3</span></span><span>3 bronze badges</span>
        </p>
    </div>
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">1</span></p>
    </div>
</div>

                                        
<div id="answer-127994" data-answerid="127994" data-parentid="37818" data-score="8" data-position-on-page="5" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p>OpenID Connect is a profile of OAuth2... defining an architecture that enables a person to authorize an identity provider to release certain user claims to a client (website / mobile application).</p>

<p>OAuth2 offers the Resource Owner Password Credential Grant, which is rightly maligned by IAM experts as &#34;The Devil&#34;.</p>

<p>A common pattern for OpenID Connect API is three steps:</p>

<p>Another reason to use OpenID Connect is that there is a secure solution for centralized authentication for mobile software (at least IOS and Android). The current best practice defined by Google is to use new security features that block a mobile application from seeing cookies or credentials in a web view. Google published the AppAuth IOS and Android libraries because they really don&#39;t want you to leak Google credentials! As of the time of this writing, there are several OpenID Providers (aka IDP&#39;s...) that support the Google OpenID Connect AppAuth software, including: Google, OKTA, Ping, and my product Gluu.</p>

<p>See Also: </p>

<ul>
<li>OAuth 2.0 for Native Apps draft-wdenniss-oauth-native-apps-02 </li>
<li>AppAuth for IOS </li>
<li>AppAuth for Android </li>
</ul>
    </div>
    <div>
        <div>
            
            <div>
<div>
    
    <div>
        <a href="https://security.stackexchange.com/users/6253/schroeder"><p><img src="https://i.stack.imgur.com/CFCzq.jpg?s=64&amp;g=1" alt="schroeder&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div>
        <p><a href="https://security.stackexchange.com/users/6253/schroeder">schroeder</a><span title="Moderator">♦</span></p><p><span title="reputation score 126,608" dir="ltr">127k</span><span title="55 gold badges" aria-hidden="true"><span></span><span>55</span></span><span>55 gold badges</span><span title="293 silver badges" aria-hidden="true"><span></span><span>293</span></span><span>293 silver badges</span><span title="330 bronze badges" aria-hidden="true"><span></span><span>330</span></span><span>330 bronze badges</span>
        </p>
    </div>
</div>
            </div>


            <div>
                <div>
    <p>
        answered <span title="2016-06-23 19:02:41Z">Jun 23, 2016 at 19:02</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/115407/mike-schwartz"><p><img src="https://i.stack.imgur.com/J8kmV.png?s=64&amp;g=1" alt="Mike Schwartz&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            
    </div>
</div>

                                        
<div id="answer-108903" data-answerid="108903" data-parentid="37818" data-score="5" data-position-on-page="6" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <div itemprop="text">
<p>Using OAuth as an authentication method is not recommended, it is explicitly designed as a delegated authorisation method.</p>

<p>Facebook was using OAuth as an authentication method, but an enterprising person discovered how to steal the <code>access_token</code> from Facebook - <a href="http://www.nirgoldshlager.com/2013/02/how-i-hacked-facebook-oauth-to-get-full.html" rel="noreferrer">full blog entry</a></p>

<p>OpenID Connect makes it much more difficult to steal access tokens through such a mechanism.</p>
    </div>
    <div>
        <div>
            
            <div>
<div>
    
    <div>
        <a href="https://security.stackexchange.com/users/78998/vilican"><p><img src="https://i.stack.imgur.com/c0hE1.png?s=64&amp;g=1" alt="Vilican&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div>
        <p><a href="https://security.stackexchange.com/users/78998/vilican">Vilican</a></p><p><span title="reputation score " dir="ltr">2,743</span><span title="8 gold badges" aria-hidden="true"><span></span><span>8</span></span><span>8 gold badges</span><span title="23 silver badges" aria-hidden="true"><span></span><span>23</span></span><span>23 silver badges</span><span title="35 bronze badges" aria-hidden="true"><span></span><span>35</span></span><span>35 bronze badges</span>
        </p>
    </div>
</div>
            </div>


            <div>
                <div>
    <p>
        answered <span title="2015-12-24 11:32:39Z">Dec 24, 2015 at 11:32</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/80046/alex-white"><p><img src="https://i.stack.imgur.com/0EFdr.jpg?s=64&amp;g=1" alt="Alex White&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <p><a href="https://security.stackexchange.com/users/80046/alex-white">Alex White</a><span itemprop="name">Alex White</span></p><p><span title="reputation score " dir="ltr">211</span><span title="3 silver badges" aria-hidden="true"><span></span><span>3</span></span><span>3 silver badges</span><span title="4 bronze badges" aria-hidden="true"><span></span><span>4</span></span><span>4 bronze badges</span>
        </p>
    </div>
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">3</span></p>
    </div>
</div>

                                        
<div id="answer-43687" data-answerid="43687" data-parentid="37818" data-score="1" data-position-on-page="7" data-highest-scored="0" data-question-has-accepted-highest-score="0" itemprop="suggestedAnswer" itemscope="" itemtype="https://schema.org/Answer">
    <div>
        

        

<div>
    
    <p>Open id connect is build on the top of OAuth and hence it&#39;s more robust. OAuth is the protocol which is used only for the authorization and open id connect is very similar to OAuth but it combines the feature of OAuth also. You can start communication between your RP&#39;s and IP&#39;s using this protocol and their are various loop holes in OAuth protocol that&#39;s why better to use Open Id Connect.</p>
    <div>
        <div>
            


            <div>
                <div>
    <p>
        answered <span title="2013-10-11 13:52:07Z">Oct 11, 2013 at 13:52</span>
    </p>
    <div>
        <a href="https://security.stackexchange.com/users/31860/utsav"><p><img src="https://i.stack.imgur.com/iN4u2.jpg?s=64&amp;g=1" alt="Utsav&#39;s user avatar" width="32" height="32"/></p></a>
    </div>
    <div itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <p><a href="https://security.stackexchange.com/users/31860/utsav">Utsav</a><span itemprop="name">Utsav</span></p><p><span title="reputation score " dir="ltr">149</span><span title="2 silver badges" aria-hidden="true"><span></span><span>2</span></span><span>2 silver badges</span><span title="7 bronze badges" aria-hidden="true"><span></span><span>7</span></span><span>7 bronze badges</span>
        </p>
    </div>
</div>


            </div>
        </div>
        
    
    </div>
    
</div>




            <p><span itemprop="commentCount">4</span></p>
    </div>
</div>

                                <h2>
                                    You must <a href="https://security.stackexchange.com/users/login?ssrc=question_page&amp;returnurl=https%3a%2f%2fsecurity.stackexchange.com%2fquestions%2f37818">log in</a> to answer this question.
                                </h2>



                            <h2 data-loc="1">
                                <div><p>
Not the answer you&#39;re looking for? Browse other questions tagged </p><p>.                                </p></div>
                            </h2>
                </div>
            </div></div>
  </body>
</html>
