<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.appsignal.com/2024/10/07/whats-new-in-ruby-on-rails-8.html">Original</a>
    <h1>What&#39;s New in Ruby on Rails 8</h1>
    
    <div id="readability-page-1" class="page"><div><div><p>The first <a href="https://rubyonrails.org/2024/9/27/rails-8-beta1-no-paas-required">Rails 8 beta</a> has officially been released, bringing an exciting set
of features, bug fixes, and improvements. This version builds on the foundation
of
Rails 7.2,
while introducing new features and optimizations to make Rails development even
more productive and enjoyable.</p>
<p>Key highlights include an integration with Kamal 2 for hassle-free deployments, the
introduction of Propshaft as the new default asset pipeline, and extensive
ActiveRecord enhancements. Rails 8 also brings several SQLite integration upgrades
that make it a viable option for production use.</p>
<p>Let&#39;s dive in and explore everything that Rails 8 has to offer!</p>
<h2 id="effortless-deployments-with-kamal-2-and-thruster">Effortless Deployments with Kamal 2 and Thruster</h2>
<p>Rails 8 makes deploying your applications simple with
Kamal 2 and Thruster.</p>
<p><a href="https://kamal-deploy.org/">Kamal 2</a> reduces the need for reliance on managed cloud services and Platform as a Service (PaaS) platforms by
enabling quick and easy deployment to cloud VMs, bare metal servers, or VPS
environments in just minutes.</p>
<p>With a single command (<code>kamal setup</code>), you can set up a production-ready Rails
environment on a standard Linux box, making deployment both easy and
cost-effective.</p>
<p>Kamal 2 also integrates with <a href="https://github.com/basecamp/thruster">Thruster</a>, a custom proxy built specifically for
Rails that enables zero-downtime deployments, HTTP/2 support, automated SSL with
Let&#39;s Encrypt, Gzip compression, and easy hosting of multiple apps on a single
server — all without complex setup.</p>
<p>With Kamal 2 and Thruster, Rails 8 makes deploying apps easier than ever. And if
you prefer a different deployment setup, you can opt out using the
<code>--skip-kamal</code> flag to maintain your existing workflows.</p>
<h2 id="leaner-rails-deployments-with-solid-adapters">Leaner Rails Deployments with Solid Adapters</h2>
<p>One of the big improvements in Rails 8 is simpler deployments by reducing
the number of additional services needed to implement common web application
requirements.</p>
<p>Traditionally, if you required features like job queues, caching, and pub/sub
messaging, you&#39;d use a combination of a database like PostgreSQL with Redis for
auxiliary functions.</p>
<p>With Rails 8, you can handle all these with just SQLite, thanks to three new
database-backed adapters: <a href="https://github.com/rails/solid_cable">Solid Cable</a>,
<a href="https://github.com/rails/solid_cache">Solid Cache</a>, and
<a href="https://github.com/rails/solid_queue">Solid Queue</a>.</p>
<ol>
<li>
<p><strong>Solid Cable</strong> is Rails&#39; new default Action Cable adapter in production and
means you can drop the common dependency on Redis. It acts as the
pub/sub server, relaying messages between the app and connected clients using
fast polling through SQLite. Despite polling, Solid Cable&#39;s performance
is comparable to Redis in most situations.</p>
</li>
<li>
<p><strong>Solid Cache</strong> replaces the need for Redis by using disk storage instead of
RAM for caching. This approach allows for much larger, more cost-effective
caches that persist longer and handle more requests without sacrificing
performance. It also supports encrypted storage and retention policies to
meet privacy requirements.</p>
</li>
<li>
<p><strong>Solid Queue</strong> replaces Redis for
<a href="https://edgeguides.rubyonrails.org/active_job_basics.html">Active Job</a>
background processing, using the <code>FOR UPDATE SKIP LOCKED</code> mechanism for
efficient job handling (compatible with PostgreSQL, MySQL, or SQLite). It
includes essential features like concurrency control, retries, and recurring
jobs, and has proven itself at <a href="https://www.hey.com/">HEY</a>, where it now
manages 20 million jobs per day.</p>
</li>
</ol>
<p>These three adapters are designed around a simple idea: modern SSDs and NVMe
drives are fast enough to handle many tasks that previously required in-memory
solutions. By tapping into these speedy drives, Rails cuts out the need for
separate RAM-based tools like Redis.</p>

<h2 id="sqlite-is-ready-for-production">SQLite is Ready for Production</h2>
<p>Rails 8 takes SQLite from a lightweight development tool to a reliable choice
for production use, thanks to extensive work on the SQLite adapter and Ruby
driver.</p>
<p>With the introduction of the solid adapters discussed above, SQLite now has the
capability to power Action Cable, Rails.cache, and Active Job effectively,
expanding its role beyond just prototyping or testing environments.</p>
<p>Here are some key improvements to the SQLite integration in Rails 8:</p>
<ul>
<li>Full-text search and virtual tables are now supported using
<code>create_virtual_table</code>.</li>
<li>The adapter now allows bulk insert fixtures for enhanced data seeding
performance.</li>
<li>Transactions default to <code>IMMEDIATE</code> mode to improve concurrency.</li>
<li>Enhanced error handling by translating <code>SQLite3::BusyException</code> into
<code>ActiveRecord::StatementTimeout</code>.</li>
</ul>
<h2 id="a-new-era-for-the-asset-pipeline-with-propshaft">A New Era for the Asset Pipeline with Propshaft</h2>
<p>Rails 8 also introduces <a href="https://github.com/rails/propshaft">Propshaft</a> as the
new asset pipeline default, replacing the long-standing
<a href="https://github.com/rails/sprockets">Sprockets</a> system. Sprockets served Rails
developers well for over a decade, but it was designed in a different era — before
the explosion of JavaScript build tools and modern browser improvements.</p>
<p>Propshaft reflects a simpler, modern approach to managing assets, built around
the core needs of today&#39;s developers. Its purpose is straightforward: to provide a
clear path for assets and apply digest stamps for caching.</p>
<p>Unlike Sprockets, which took on numerous additional tasks, Propshaft focuses
only on what&#39;s essential, fitting naturally with the new Rails philosophy of
keeping asset pipelines lean (while complex JavaScript handling is left to
specialized tools like Esbuild or Vite).</p>
<h2 id="built-in-authentication-made-simple">Built-In Authentication Made Simple</h2>
<p>Rails has been building the key components of authentication over the years,
from <code>has_secure_password</code> in Rails 5 to <code>normalizes</code>, <code>generates_token_for</code> and
<code>authenticate_by</code> in
<a href="https://blog.appsignal.com/2023/02/15/whats-new-in-rails-7-1.html">Rails 7.1</a>.</p>
<p>With Rails 8, all these components come together to give you a straightforward
starting point for building a secure, session-based authentication system.</p>
<p>By running a single command, you can set up all the essentials for an
authentication system with database-backed sessions and password reset
functionality:</p>

<p>This command generates key files, including models, controllers, mailers, and
views:</p>

<p>This effectively puts you on the fast track to secure, production-ready
authentication. All that&#39;s left is to integrate a user sign-up flow
customized to your application&#39;s needs.</p>
<h2 id="new-script-folder-and-generator">New Script Folder and Generator</h2>
<p>Rails 8 introduces a new <code>script</code> folder dedicated to holding one-off or
general-purpose scripts, such as data migrations, cleanup tasks, or other
utility operations. This addition helps organize these scripts neatly, keeping
them separate from your main application logic.</p>
<p>To make script creation easier, a new script generator is available. You can
generate scripts with a simple command:</p>

<p>These commands create the corresponding script files, which you can then execute
with:</p>

<p>This streamlined approach keeps your application organized and makes handling
custom scripts more convenient and maintainable.</p>
<h2 id="a-slew-of-active-record-improvements">A Slew of Active Record Improvements</h2>
<p>Active Record has also seen major enhancements in Rails 8 to improve
performance, simplify migrations, improve troubleshooting, and provide better
support for complex database use cases.</p>
<p>Below are some of the key changes introduced in this latest version:</p>
<ul>
<li>Rails 8 now distinguishes between <code>float4</code> and <code>float8</code> in PostgreSQL.</li>
<li><code>drop_table</code> now supports dropping multiple tables at once.</li>
<li>Support for PostgreSQL table inheritance and native partitioning has been
added.</li>
<li>Bulk inserts of fixtures are now supported to improve data seeding performance.</li>
<li>Migrating a fresh database now starts by loading the database schema before
running the migrations.</li>
<li><code>create_schema</code> and <code>drop_schema</code> operations are now reversible.</li>
<li>Rails 8 now requires MySQL 5.6.4 or later due to advancements like datetime
with precision.</li>
<li>Query log tags are enabled by default in development environments to trace SQL
statements back to the application code and identify which database is in use.</li>
</ul>
<h2 id="wrapping-up">Wrapping Up</h2>
<p>Rails 8 introduces a range of impactful updates, from easier deployments with
Kamal and a modern asset pipeline to significant ActiveRecord enhancements and
improved production capabilities for SQLite.</p>
<p>These advancements not only boost developer productivity but also align with
modern best practices, allowing you to focus on building your application
instead of dealing with infrastructure complexities.</p>
<p>For a detailed list of all the new features, optimizations, and changes, check
out the
<a href="https://edgeguides.rubyonrails.org/8_0_release_notes.html">official Rails 8 release notes</a>.</p>
<p>If you want to get involved with contributing to Rails, visit the
<a href="https://github.com/rails/rails/">Rails GitHub repository</a> to explore open
issues and review the contribution guidelines.</p>
<p>Thanks for reading!</p>
<p><strong>P.S. If you&#39;d like to read Ruby Magic posts as soon as they get off the press, <a href="https://blog.appsignal.com/ruby-magic">subscribe to our Ruby Magic newsletter and never miss a single post</a>!</strong></p></div></div></div>
  </body>
</html>
