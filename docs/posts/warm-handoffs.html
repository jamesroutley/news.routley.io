<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://luckymike.dev/posts/warm-handoffs/">Original</a>
    <h1>Warm Handoffs</h1>
    
    <div id="readability-page-1" class="page"><div><div>
        <p>Warm Handoffs are a procedure I’ve implemented with several teams and organizations to improve communication and collaboration in Slack. As organizations grow and ownership shifts and splits as teams are formed and re-formed, Slack channels proliferate, and it gets harder for folks across an org to know the right channel to get help for a particular problem. This often leads to someone asking a question of the team they think is right then being redirected to another team and channel (sometimes more than once). Whether redirects are driven by a desire to get someone to the right place or a “not my job” mentality, they subtely contribute to a siloed “us vs. them” culture, and over time reduce collaboration and cohesiveness between teams.</p>
<p>Sometimes, to avoid redirects, if the wrong team is asked about something, they will tag members of the right team in their channel. While pulling in the right folks is an improvement over a redirect, it reinforces asking for help in the wrong channel, and mean that other members of the owning team don’t see the questions or issues their users have.</p>
<p>Warm Handoffs address both of these issues by moving questions to the right team and channel while supporting the requester throughout the process. The basic rule is: <strong>“If someone asks you a question you can’t answer, take them to someone who can answer it. If you don’t know who that is, help find someone who can.”</strong></p>
<p>The exact guidance will vary based on how your organization implements support channels in Slack, but generally the guidelines are:</p>
<ul>
<li>
<p>If someone asks a question in the wrong channel, and you know the right channel, link their question in the right channel, tagging them, and explain why you’re making the handoff, along with any additional context you have.</p>
</li>
<li>
<p>If someone asks a question in the wrong channel, and you’re not sure where it should go, link their question in a shared channel asking who can help, along with any additional context you have.</p>
</li>
</ul>
<p>That’s it!</p>
<h2 id="implementing-warm-handoffs">Implementing Warm Handoffs<a href="#implementing-warm-handoffs" arialabel="Anchor">⌗</a> </h2>
<p>Warm Handoffs need to be a policy. You can’t just <em>recommend</em> them, you have to <em>enforce</em> them. They are premised on two values: 1) most people want to help their peers and 2) most people want to get their own work done. When inter-team support requests create a conflict between these two values, folks tend to resort to the quickest solution that meets both needs, the Cold Redirect. To break this tendency, you need to establish that a Warm Handoff is expected in lieu of a Cold Redirect, not just preferred.</p>
<p>Your first step should be to write up the procedure with whatever organization-specific guidelines are necessary, and get buy-in from other leaders. Then you should share it at whichever level you’re implementing it as a policy (I usually start with my manager’s entire reporting line, then work outward to the full engineering org). This policy should be pretty short and easy to grok. Take the summary and bullet points above and add some org-specific examples, then share it around. If questions come up, provide more context to address them.</p>
<h3 id="making-it-stick">Making it Stick<a href="#making-it-stick" arialabel="Anchor">⌗</a> </h3>
<p>Warm Handoffs are more work than Cold Redirects, so you’ll likely have to overcome individual inertia to make them an organizational habit. After you’ve established the policy, you’ll need to reinforce it. I find the best time to remind folks is when they forget to do a Warm Handoff, and instead do a Cold Redirect. To make this easy, I create a Slack workflow that will DM someone a reminder with a link to the doc based on an emoji response to their message. This makes the reminder really quick, and provides consistent, non-confrontational language. e.g.:</p>
<p><em>Reminder to perform a <a href="#">Warm Handoff</a>. Thank you!</em></p>
<p>Keep this reminder short and to the point. You’ve already established the policy, and most folks will recognize the benefits. You don’t need to re-convince them, you just need to remind them.</p>
<hr/>
<h2 id="still-not-convinced">Still Not Convinced?<a href="#still-not-convinced" arialabel="Anchor">⌗</a> </h2>
<p>Hopefully the benefits of Warm Handoffs are evident. If not, here’s an example that hopefully makes the value clearer.</p>
<h3 id="the-scenario">The Scenario<a href="#the-scenario" arialabel="Anchor">⌗</a> </h3>
<p>Imagine this scenario. Andre has a question about an API rate limit, he asks the API Gateway team for help in their team Slack channel:</p>
<blockquote>
<p>Andre: Hey folks! I’m working with a new-to-me endpoint (<code>/v2/bulk-update</code>), and I keep getting 429s. I’m not generating many requests (a few per minute while testing locally), so I’m worried that something is either misconfigured, or I’m making a mistake. Can you help?</p>
</blockquote>
<h4 id="a-cold-redirect">A Cold Redirect<a href="#a-cold-redirect" arialabel="Anchor">⌗</a> </h4>
<p>The API Gateway team provides a platform that is configured by each service owner, so they’re not responsible for rate limit configurations. Miles responds accordingly:</p>
<blockquote>
<p>Miles: Hey @Andre. Rate limits are set by service owners. You might try #team-accounts, I think they own that endpoint. Cheers!</p>
<p>Andre: Okay, thanks.</p>
</blockquote>
<p>Now Andre takes his question to the Account team, and gets an answer:</p>
<blockquote>
<p>Andre: Hey folks! I’m working with a new-to-me endpoint (<code>/v2/bulk-update</code>), and I keep getting 429s. I’m not generating many requests (a few per minute while testing locally), so I’m worried that something is either misconfigured, or I’m making a mistake. The API Gateway team said you’ve configured a rate limit that is causing a problem. Can you help?</p>
<p>Gina: Hey, @Andre! Our rate limit is 100 requests/minute. Are you setting a <code>client_id</code>? We’ve seen this before a few times, and it seems that setting the <code>client_id</code> fixes it. The API itself doesn’t need one, but we’ve seen it help in the past.</p>
<p>Andre: Thanks, @Gina. I’m not setting a <code>client_id</code>, but I’ll give that a shot!</p>
<p>Gina: np, let me know if you’re still having problems, and we can see if there is anything in the logs.</p>
<p>Andre: Just wanted to confirm, setting the <code>client_id</code> seems to have solved my issues. I sent a bunch of requests just now, and no 429s. Thanks again!</p>
<p>Gina: \o/</p>
</blockquote>
<p>You probably don’t need to imagine this. Just search your company Slack for “try asking,” “that’s owned by,” or “you should actually ask.” You might also say, “What’s the problem? Miles responded, Andre asked the Accounts team, and Gina was able to help.” It’s true, this interaction isn’t dreadful. Andre got a quick, friendly response and Gina unblocked him, no relationships are going to be broken over this. But consider some other possibilities when Andre takes his question to the Accounts team:</p>
<h3 id="potential-problems">Potential Problems<a href="#potential-problems" arialabel="Anchor">⌗</a> </h3>
<h4 id="a-lack-of-context">A Lack of Context<a href="#a-lack-of-context" arialabel="Anchor">⌗</a> </h4>
<p>Gina might not guess that a missing <code>client_id</code> is the issue:</p>
<blockquote>
<p>Andre: Hey folks! I’m working with a new-to-me endpoint (<code>/v2/bulk-update</code>), and I keep getting 429s. I’m not generating many requests (a few per minute while testing locally), so I’m worried that something is either misconfigured, or I’m making a mistake. The API Gateway team said you’ve configured a rate limit that is causing a problem. Can you help?</p>
<p>Gina: Hey, @Andre! Our rate limit is 100 requests/minute. It sounds like you’re under that. Did the API Gateway team give you any more information? Why do they think it’s a service configuration issue?</p>
<p>Andre: No, they just said “Rate limits are set by service owners. You might try #team-accounts, I think they own that endpoint.”</p>
<p>Gina: Yeah, we do own the endpoint. I double checked the configuration, and we’re set to 100 requests/minute. I’m also a bit confused, because my understanding is that we report a <code>client_rate_limited</code> metric, and I don’t see any instances of rate limiting for this endpoint in the last week. Can you check with #team-api-gateway again. I’m really sorry.</p>
</blockquote>
<p>Andre has now been redirected twice, and each time it’s up to him to carry context over to the new thread:</p>
<blockquote>
<p>Andre: Hey, @Miles, me again! I chatted with @Gina, and she confirmed that their rate limit is set to 100 requests/second. She also said that they don’t see any rate limiting happening for that endpoint. Is it possible that there’s a broader API Gateway issue?</p>
<p>Miles: I doubt it. I think we’d have a lot of customer issues if that were the case, and we haven’t heard any other complaints.</p>
<p>Miles: I’ll do some quick checking though.</p>
<p>Miles: @Gina, what makes you say there is no rate limiting happening? I see it happening pretty consistently for your endpoint over the last week.</p>
<p>Gina: Where do you see that?</p>
<p>Miles: The <code>ip_rate_limited</code> metric. @Andre, does <a href="">this</a> roughly align with the 429s you’ve seen?</p>
<p>Andre: Yeah, I think it does.</p>
<p>Gina: Hmm, our dashboard only has the <code>client_rate_limited</code> metric, do we need both?</p>
<p>Miles: Yeah, you probably want to track both, just in case. Our new convention is that every client needs to send a <code>client_id</code>, and all our new clients do this across the board. We still have some customers using older clients that don’t send <code>client_id</code>, so we still allow requests without it. The default behavior for the API Gateway is to only set the rate limit by client, but you can optionally set an <code>ip_rate_limit</code>, if you need one. Otherwise it defaults to a very low default value of 5 requests per minute.</p>
<p>How new is this endpoint? Is there any chance that older clients are using it?</p>
<p>Gina: We deployed it early this year, so none of the older clients know about it.</p>
<p>Miles: In that case, @Andre, you probably just need to set <code>client_id</code>, and you’ll be fine.</p>
<p>Andre: Okay, I’ll do that. I didn’t realize that was required. Thanks both of you.</p>
</blockquote>
<p>Phew, that took half the day, and I even ommitted the worst case where Miles tells Andre there <em>is</em> rate limiting, and sends him back to Gina.</p>
<h4 id="unclear-expectations">Unclear Expectations<a href="#unclear-expectations" arialabel="Anchor">⌗</a> </h4>
<p>Without context from Miles, Gina may not understand why her team is being asked, and could push back:</p>
<blockquote>
<p>Andre: Hey folks! I’m working with a new-to-me endpoint (<code>/v2/bulk-update</code>), and I keep getting 429s. I’m not generating many requests (a few per minute while testing locally), so I’m worried that something is either misconfigured, or I’m making a mistake. The API Gateway team said you’ve configured a rate limit that is causing a problem. Can you help?</p>
<p>Gina: Hey, @Andre. We’re just users of the API Gateway. We don’t know how to troubleshoot issues with it. Can you please take this back to #team-api-gateway?</p>
<p>Andre (in #team-api-gateway): @Miles, I asked in #team-accounts, but they don’t know how to troubleshoot the API Gateway.</p>
<p>Miles (in #team-accounts): @Gina, the API Gateway is provided as a platform to service teams, but it’s up to your team to configure it as necessary. <a href="">Here’s</a> the configuration that you set for your endpoint. I can’t determine if this is configuration is what’s expected. That’s something <em>you</em> need to decide, and then assist Andre accordingly.</p>
<p>Gina: @Miles, I’ve never worked with this config before. @Tom (OOO til 11/28) set this up with help from your team. I assume it’s working correctly, since it’s been in place for a few months. If Andre is having issues, that seems like it’s probably an API Gateway issue.</p>
<p>Grace: @Miles @Gina, let’s hop on a call to discuss this and figure out how to help Andre. Are you both free at 2pm?</p>
<p>Miles: Sure.</p>
<p>Gina: Yes.</p>
<p>Grace: Thanks. @Andre, sorry to keep you waiting, we’ll have a plan by 2:30.</p>
<p>Andre: Okay, @Grace, thank you, I can work on something else in the meantime.</p>
<p>Gina: @Andre, we looked at what’s happening on the call, and @Miles pointed out that your requests are missing <code>client_id</code>, so they’re hitting a per-IP rate limit. Can you please include <code>client_id</code>? That should solve it.</p>
<p>Andre: Sure, I didn’t realize it was something so simple. I’m really sorry for the trouble.</p>
</blockquote>
<p>Because Gina didn’t have any context about the redirect, she sent it back to Miles, who was frustrated. Rather than providing useful context, Miles defended the redirect. Andre’s simple and urgent request turned into a debate about cross-team responsibility. Gina’s manager, Grace, had to step in to address the conflict and get both engineers focused on helping Andre, rather than debating ownership responsibilities. This delayed getting Andre a solution by hours, and made him feel guilty for asking in the first place. Miles and Gina’s relationship also suffered due to an entirely avoidable conflict. Due to the emotionally exhausting experience, all the valuable information about how the rate limiting worked was lost, as Gina provided the most succinct solution, and Miles left the conversation entirely.</p>
<h4 id="with-a-warm-handoff">With a Warm Handoff<a href="#with-a-warm-handoff" arialabel="Anchor">⌗</a> </h4>
<p>Now we’ll look at the same situation, but Miles will use a Warm Handoff to redirect Andre. With a Warm Handoff, when Miles realizes that Andre needs to be redirected to another team, Miles will take the conversation there himself, and provide additional context on why he’s making the handoff:</p>
<blockquote>
<p>Andre: Hey folks! I’m working with a new-to-me endpoint (<code>/v2/bulk-update</code>), and I keep getting 429s. I’m not generating many requests (a few per minute while testing locally), so I’m worried that something is either misconfigured, or I’m making a mistake. Can you help?</p>
<p>Miles (in #team-accounts): Hey folks! @Andre came to us because he’s getting 429s against the <code>/v2/bulk-update</code> endpoint, which I believe your team owns. We don’t see any issues with the API Gateway, can you help him determine if there’s an issue with the way he’s using this endpoint?</p>
<p>Gina: Thanks, @Miles. @Andre Our rate limit is 100 requests/minute. Can you confirm you’re under that?</p>
<p>Andre: @Gina, yeah, I’m just doing some local testing, so it’s less than 10 a minute.</p>
<p>Gina: Hmmm, okay. Let me check our dashboard.</p>
<p>Gina: I don’t see any instances of rate limiting in the last week. You’re 100% sure it’s the <code>/v2/bulk-update</code> endpoint? cc/ @Miles.</p>
<p>Andre: Yeah, definitely that endpoint.</p>
<p>Miles: Oh, @Gina, are you tracking both <code>client_rate_limited</code> and <code>ip_rate_limited</code> for your endpoints?</p>
<p>Gina: Looks like only <code>client_rate_limited</code>. I didn’t even know about <code>ip_rate_limited</code>. What’s the difference?</p>
<p>Miles: All our new clients should provide <code>client_id</code>, but some older clients that only work with a subset of older endpoints don’t send that, so we also have rate limiting by IP as a fallback. The default configuration behavior for the API Gateway is to only configure the client rate limit, but you can explicitly set an IP rate limit as well, if you expect older clients to use the endpoint via the <code>ip_rate_limit</code> key. @Andre, guessing you aren’t sending <code>client_id</code> in your testing?</p>
<p>Gina: TIL!</p>
<p>Andre: Ah, yeah, I didn’t realize I needed that. I’ll add it, and then I should be good?</p>
<p>Gina: Sounds like it.</p>
<p>Miles: Yeah.</p>
<p>Andre: Thanks, both!</p>
</blockquote>
<p>This exchange was much quicker, and Andre didn’t have to relay any information back and forth between teams. Because Miles was engaged in the handoff, he was able to recognize where there might be a gap in understanding, and he helped Gina and Andre understand what was happening.</p>
<h4 id="a-warm-handoff-with-context">A Warm Handoff With Context<a href="#a-warm-handoff-with-context" arialabel="Anchor">⌗</a> </h4>
<p>We can also imagine ways it could be even more streamlined. Miles could have checked the metrics ahead of time, and deduced that it was likely the IP rate limit kicking in:</p>
<blockquote>
<p>Miles (in #team-accounts): Hey folks! @Andre came to us because he’s getting 429s against the <code>/v2/bulk-update</code> endpoint, which I believe your team owns. I checked the metrics for that endpoint, and I don’t see any client rate limiting, but I do see IP rate limiting. Do you intend for older clients without <code>client_id</code> to hit this endpoint? If so, you probably want to explicitly set <code>ip_rate_limit</code> in your API Gateway config. If not, then it’s probably as simple as adding <code>client_id</code> to your requests, Andre.</p>
<p>Gina: This endpoint is quite new, so we don’t expect requests without <code>client_id</code>. Thanks for catching this and letting us know, @Miles!</p>
<p>Andre: Ah, TIL! I’ll set <code>client_id</code> going forward. Thanks!</p>
</blockquote>
<p>So much better. There’s almost no back and forth, and both Miles and Gina are able to contribute the knowledge that is specific to their team to bring clarity to the problem quickly.</p>

      </div></div></div>
  </body>
</html>
