<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sschueller.github.io/posts/ci-cd-with-kicad-and-gitlab/">Original</a>
    <h1>CI/CD with KiCad and Gitlab</h1>
    
    <div id="readability-page-1" class="page"><div id="content"><p>(Blender Render of KiCad Exported PCB)</p><h2 id="introduction">Introduction</h2><p>I make many small projects and usually order PCBs at some place. Generating Gerber files and checking everything is in order before ordering can be tedious. Additionally the more complex the board the more parts I need and most likely I will also need a reference in order to place the parts.</p><p>So I decided to setup a gitlab pipeline to automate the whole process.</p><p>After I commit into the master the gitlab pipeline will run tests on the schematic and on the PCB. If those pass it will generate the Gerbers I need for the specific fab I use (JLCPCB in this case) and also generate a BOM which I can use to order parts at LCSC. Additionally it will generate a fancy <a href="https://openscopeproject.org/InteractiveHtmlBomDemo/" target="_blank" rel="noopener noreffer">KiCad Interactive HTML BOM</a>, position file for JLCPCB (if you want them to do assembly) and a <a href="https://github.com/sschueller/sschueller.github.io/raw/master/content/posts/ci-cd-with-kicad-and-gitlab/shades-schematic-1.pdf" target="_blank" rel="noopener noreffer">PDF of the schematic</a>
. All these artifacts are commited back into the master and a version is applied. I also have a CHANGELOG.md which is automatically filled from commit messages (I used conventional commits to format my commit messages)</p><h2 id="git">Git</h2><p>In order for this to work you need to keep your KiCad project in a git repository. To do this I use the following <code>.gitignore</code> (KiCad makes tons of files but you don’t need to commit all of them) and file structure.</p><p><strong>Folder Structure</strong></p><div><pre tabindex="0"><code data-lang="bash"><span><span>├── ci/               <span># Files specific to CI (colors for PDF etc.)</span>
</span></span><span><span>├── datasheets/       <span># Data sheets of items I used in this project</span>
</span></span><span><span>├── Fabrication/      <span># Fabrication output</span>
</span></span><span><span>├── footprints/       <span># KiCad footprints (only for this project)</span>
</span></span><span><span>├── library/          <span># KiCad libraries (only for this project)</span>
</span></span><span><span>├── packages3d/       <span># KiCad 3d packages (only for this project)</span>
</span></span><span><span>├── VERSION.txt       <span># version (Auto updated)</span>
</span></span><span><span>├── CHANGELOG.md      <span># changelog (Auto generated)</span>
</span></span><span><span>├── README.md         
</span></span><span><span>├── output.kibot.yaml <span># KiBot output configuration, gerbers, BOM etc. </span>
</span></span><span><span>├── test.kibot.yaml   <span># KiBot Tests</span>
</span></span><span><span>├── .gitignore
</span></span><span><span>└── .gitlab-ci.yml    <span># Gitlab CI file</span>
</span></span></code></pre></div><p><strong>.gitignore</strong></p><div><pre tabindex="0"><code data-lang="bash"><span><span><span># For PCBs designed using KiCad: http://www.kicad-pcb.org/</span>
</span></span><span><span><span># Format documentation: http://kicad-pcb.org/help/file-formats/</span>
</span></span><span><span>
</span></span><span><span><span># Temporary files</span>
</span></span><span><span>*.000
</span></span><span><span>*.bak
</span></span><span><span>*.bck
</span></span><span><span>*.kicad_pcb-bak
</span></span><span><span>*.kicad_sch-bak
</span></span><span><span>*.kicad_prl
</span></span><span><span>*.sch-bak
</span></span><span><span>*~
</span></span><span><span>_autosave-*
</span></span><span><span>*.tmp
</span></span><span><span>*-save.pro
</span></span><span><span>*-save.kicad_pcb
</span></span><span><span>fp-info-cache
</span></span><span><span>*-backups/
</span></span><span><span>
</span></span><span><span><span># Netlist files (exported from Eeschema)</span>
</span></span><span><span>*.net
</span></span><span><span>
</span></span><span><span><span># Autorouter files (exported from Pcbnew)</span>
</span></span><span><span>*.dsn
</span></span><span><span>*.ses
</span></span><span><span>*.rules
</span></span><span><span>
</span></span><span><span><span># Exported BOM files</span>
</span></span><span><span>*.xml
</span></span><span><span>*.csv
</span></span><span><span>export-*
</span></span><span><span>
</span></span><span><span><span># Rendered output</span>
</span></span><span><span>3d/Render/*
</span></span></code></pre></div><h2 id="kicad-setup">KiCad Setup</h2><p>When adding components, add “LCSC” to overall schematic (BOM export will fail if added to each part separately (join issue)) and the part number in each part to the part in order to use the JLCPCB assembly service. Only parts with LCSC column are exported in the JLCPCB BOMs.</p><p><img src="https://sschueller.github.io/svg/loading.min.svg" data-src="/posts/ci-cd-with-kicad-and-gitlab/kicad-pref.png" data-srcset="/posts/ci-cd-with-kicad-and-gitlab/kicad-pref.png, /posts/ci-cd-with-kicad-and-gitlab/kicad-pref.png 1.5x, /posts/ci-cd-with-kicad-and-gitlab/kicad-pref.png 2x" data-sizes="auto" alt="/posts/ci-cd-with-kicad-and-gitlab/kicad-pref.png" title="KiCad Schematic Preferences" width="604" height="424"/></p><p>Now when adding parts fill in the LCSC field.</p><p><img src="https://sschueller.github.io/svg/loading.min.svg" data-src="/posts/ci-cd-with-kicad-and-gitlab/kicad-part.png" data-srcset="/posts/ci-cd-with-kicad-and-gitlab/kicad-part.png, /posts/ci-cd-with-kicad-and-gitlab/kicad-part.png 1.5x, /posts/ci-cd-with-kicad-and-gitlab/kicad-part.png 2x" data-sizes="auto" alt="/posts/ci-cd-with-kicad-and-gitlab/kicad-part.png" title="KiCad Part Edit" width="753" height="294"/></p><h2 id="gitlab-setup">GitLab Setup</h2><p><img src="https://sschueller.github.io/svg/loading.min.svg" data-src="/posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png" data-srcset="/posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png, /posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png 1.5x, /posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png 2x" data-sizes="auto" alt="/posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png" title="/posts/ci-cd-with-kicad-and-gitlab/gitlab-pipeline.png" width="830" height="280"/></p><p>I use a general gitlab setup with docker runners and <a href="https://levelup.gitconnected.com/semantic-versioning-and-release-automation-on-gitlab-9ba16af0c21" target="_blank" rel="noopener noreffer">semantic releases</a></p><h3 id="gitlab-ci">Gitlab CI</h3><p>.gitlab-ci.yml</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span>stages</span>:
</span></span><span><span>  - <span>fetch-version</span>
</span></span><span><span>  - <span>testing</span>
</span></span><span><span>  - <span>gen_fab</span>
</span></span><span><span>  - <span>publish</span>
</span></span><span><span>
</span></span><span><span><span>#https://levelup.gitconnected.com/semantic-versioning-and-release-automation-on-gitlab-9ba16af0c21</span>
</span></span><span><span><span>fetch-semantic-version</span>:
</span></span><span><span>  <span>image</span>: <span>node:18</span>
</span></span><span><span>  <span>stage</span>: <span>fetch-version</span>
</span></span><span><span>  <span>only</span>:
</span></span><span><span>    <span>refs</span>:
</span></span><span><span>    - <span>master</span>
</span></span><span><span>    - <span>alpha</span>
</span></span><span><span>    - <span>/^(([0-9]+)\.)?([0-9]+)\.x/</span> <span># This matches maintenance branches</span>
</span></span><span><span>    - <span>/^([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?$/</span> <span># This matches pre-releases</span>
</span></span><span><span>  <span>script</span>:
</span></span><span><span>    - <span>npm install @semantic-release/gitlab @semantic-release/exec @semantic-release/changelog @semantic-release/git -D</span>
</span></span><span><span>    - <span>npx semantic-release --generate-notes false --dry-run</span>
</span></span><span><span>  <span>artifacts</span>:
</span></span><span><span>    <span>paths</span>:
</span></span><span><span>    - <span>VERSION.txt</span>
</span></span><span><span>  <span>tags</span>:
</span></span><span><span>    - <span>docker</span>
</span></span><span><span>
</span></span><span><span><span>generate-non-semantic-version</span>:
</span></span><span><span>  <span>stage</span>: <span>fetch-version</span>
</span></span><span><span>  <span>except</span>:
</span></span><span><span>    <span>refs</span>:
</span></span><span><span>    - <span>master</span>
</span></span><span><span>    - <span>alpha</span>
</span></span><span><span>    - <span>/^(([0-9]+)\.)?([0-9]+)\.x/</span> <span># This matches maintenance branches</span>
</span></span><span><span>    - <span>/^([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?$/</span> <span># This matches pre-releases</span>
</span></span><span><span>  <span>script</span>:
</span></span><span><span>    - <span>echo build-$CI_PIPELINE_ID &gt; VERSION.txt</span>
</span></span><span><span>  <span>artifacts</span>:
</span></span><span><span>    <span>paths</span>:
</span></span><span><span>    - <span>VERSION.txt</span>
</span></span><span><span>  <span>tags</span>:
</span></span><span><span>    - <span>docker</span>
</span></span><span><span>
</span></span><span><span><span>tests</span>:
</span></span><span><span>  <span>image</span>: <span>ghcr.io/inti-cmnb/kicad7_auto:1.6.2</span>
</span></span><span><span>  <span>stage</span>: <span>testing</span>
</span></span><span><span>  <span>script</span>:
</span></span><span><span>    - <span>&#34;[ -f *.kicad_pcb ] &amp;&amp; kibot -c test.kibot.yaml&#34;</span>
</span></span><span><span>  <span>tags</span>:
</span></span><span><span>    - <span>docker</span>
</span></span><span><span>
</span></span><span><span><span>pcb_outputs</span>:
</span></span><span><span>  <span>image</span>: <span>ghcr.io/inti-cmnb/kicad7_auto:1.6.2</span>
</span></span><span><span>  <span>stage</span>: <span>gen_fab</span>
</span></span><span><span>  <span>script</span>:
</span></span><span><span>    - <span>&#34;[ -f *.kicad_pcb ] &amp;&amp; kibot -c output.kibot.yaml&#34;</span>
</span></span><span><span>  <span>only</span>:
</span></span><span><span>    <span>refs</span>:
</span></span><span><span>    - <span>master</span>
</span></span><span><span>    - <span>alpha</span>
</span></span><span><span>    <span># This matches maintenance branches</span>
</span></span><span><span>    - <span>/^(([0-9]+)\.)?([0-9]+)\.x/</span>
</span></span><span><span>    <span># This matches pre-releases</span>
</span></span><span><span>    - <span>/^([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?$/ </span>
</span></span><span><span>  <span>artifacts</span>:
</span></span><span><span>    <span>when</span>: <span>always</span>
</span></span><span><span>    <span>paths</span>:
</span></span><span><span>      - <span>Fabrication/</span>
</span></span><span><span>  <span>tags</span>:
</span></span><span><span>    - <span>docker</span>
</span></span><span><span>
</span></span><span><span><span>release</span>:
</span></span><span><span>  <span>stage</span>: <span>publish</span>
</span></span><span><span>  <span>image</span>: <span>node:18</span>
</span></span><span><span>  <span>only</span>:
</span></span><span><span>    <span>refs</span>:
</span></span><span><span>    - <span>master</span>
</span></span><span><span>    - <span>alpha</span>
</span></span><span><span>    <span># This matches maintenance branches</span>
</span></span><span><span>    - <span>/^(([0-9]+)\.)?([0-9]+)\.x/</span>
</span></span><span><span>    <span># This matches pre-releases</span>
</span></span><span><span>    - <span>/^([0-9]+)\.([0-9]+)\.([0-9]+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?(?:\+[0-9A-Za-z-]+)?$/ </span>
</span></span><span><span>  <span>script</span>:
</span></span><span><span>    - <span>npm install @semantic-release/gitlab @semantic-release/exec @semantic-release/changelog @semantic-release/git -D</span>
</span></span><span><span>    - <span>npx semantic-release</span>
</span></span><span><span>  <span>tags</span>:
</span></span><span><span>    - <span>docker</span>
</span></span></code></pre></div><h3 id="kibot">KiBot</h3><p><a href="https://github.com/INTI-CMNB/KiBot" target="_blank" rel="noopener noreffer">KiBot</a> lets you automate almost anything that KiCad can do. I use it with docker to be able to run it in gitlab.</p><p>Here is the test and output configrations I use which are specific for JLCPCB but can be adjusted to almost any fab. There are also many <a href="https://github.com/INTI-CMNB/KiBot/tree/master/docs/samples" target="_blank" rel="noopener noreffer">examples</a> on the KiBot github for other fabs.</p><p>test.kibot.yaml</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span>kibot</span>:
</span></span><span><span>  <span>version</span>: <span>1</span>
</span></span><span><span>
</span></span><span><span><span>preflight</span>:
</span></span><span><span>  <span>run_erc</span>: <span>true</span>
</span></span><span><span>  <span>update_xml</span>: <span>false</span>
</span></span><span><span>  <span>run_drc</span>: <span>true</span>
</span></span><span><span>  <span>check_zone_fills</span>: <span>true</span>
</span></span><span><span>  <span>ignore_unconnected</span>: <span>false</span>
</span></span></code></pre></div><p>output.kibot.yaml</p><div><pre tabindex="0"><code data-lang="yaml"><span><span><span># Gerber and drill files for JLCPCB, without stencil</span>
</span></span><span><span><span># URL: https://jlcpcb.com/</span>
</span></span><span><span><span>kibot</span>:
</span></span><span><span>  <span>version</span>: <span>1</span>
</span></span><span><span>
</span></span><span><span><span>globals</span>:
</span></span><span><span>  <span>resources_dir</span>: <span>ci</span>
</span></span><span><span>
</span></span><span><span><span>filters</span>:
</span></span><span><span>  - <span>name</span>: <span>only_jlc_parts</span>
</span></span><span><span>    <span>comment</span>: <span>&#39;Only parts with JLC (LCSC) code&#39;</span>
</span></span><span><span>    <span>type</span>: <span>generic</span>
</span></span><span><span>    <span>include_only</span>:
</span></span><span><span>      - <span>column</span>: <span>&#39;LCSC&#39;</span>
</span></span><span><span>        <span>regex</span>: <span>&#39;^C\d+&#39;</span>
</span></span><span><span>
</span></span><span><span><span>variants</span>:
</span></span><span><span>  - <span>name</span>: <span>rotated</span>
</span></span><span><span>    <span>comment</span>: <span>&#39;Just a place holder for the rotation filter&#39;</span>
</span></span><span><span>    <span>type</span>: <span>kibom</span>
</span></span><span><span>    <span>variant</span>: <span>rotated</span>
</span></span><span><span>    <span>pre_transform</span>: <span>_rot_footprint</span>
</span></span><span><span>
</span></span><span><span><span># JLCPCB Gerber Output</span>
</span></span><span><span><span>outputs</span>:
</span></span><span><span>  - <span>name</span>: <span>JLCPCB_gerbers</span>
</span></span><span><span>    <span>comment</span>: <span>Gerbers compatible with JLCPCB</span>
</span></span><span><span>    <span>type</span>: <span>gerber</span>
</span></span><span><span>    <span>dir</span>: <span>JLCPCB</span>
</span></span><span><span>    <span>options</span>: <span>&amp;gerber_options</span>
</span></span><span><span>      <span>exclude_edge_layer</span>: <span>true</span>
</span></span><span><span>      <span>exclude_pads_from_silkscreen</span>: <span>true</span>
</span></span><span><span>      <span>plot_sheet_reference</span>: <span>false</span>
</span></span><span><span>      <span>plot_footprint_refs</span>: <span>true</span>
</span></span><span><span>      <span>plot_footprint_values</span>: <span>false</span>
</span></span><span><span>      <span>force_plot_invisible_refs_vals</span>: <span>false</span>
</span></span><span><span>      <span>tent_vias</span>: <span>true</span>
</span></span><span><span>      <span>use_protel_extensions</span>: <span>true</span>
</span></span><span><span>      <span>create_gerber_job_file</span>: <span>false</span>
</span></span><span><span>      <span>disable_aperture_macros</span>: <span>true</span>
</span></span><span><span>      <span>gerber_precision</span>: <span>4.6</span>
</span></span><span><span>      <span>use_gerber_x2_attributes</span>: <span>false</span>
</span></span><span><span>      <span>use_gerber_net_attributes</span>: <span>false</span>
</span></span><span><span>      <span>line_width</span>: <span>0.1</span>
</span></span><span><span>      <span>subtract_mask_from_silk</span>: <span>true</span>
</span></span><span><span>    <span>layers</span>:
</span></span><span><span>      <span># Note: a more generic approach is to use &#39;copper&#39; but then the filenames</span>
</span></span><span><span>      <span># are slightly different.</span>
</span></span><span><span>      - <span>F.Cu</span>
</span></span><span><span>      - <span>B.Cu</span>
</span></span><span><span>      - <span>F.Paste</span>
</span></span><span><span>      - <span>B.Paste</span>
</span></span><span><span>      - <span>F.SilkS</span>
</span></span><span><span>      - <span>B.SilkS</span>
</span></span><span><span>      - <span>F.Mask</span>
</span></span><span><span>      - <span>B.Mask</span>
</span></span><span><span>      - <span>Edge.Cuts</span>
</span></span><span><span>
</span></span><span><span><span># JLCPCB drill files</span>
</span></span><span><span>  - <span>name</span>: <span>JLCPCB_drill</span>
</span></span><span><span>    <span>comment</span>: <span>Drill files compatible with JLCPCB</span>
</span></span><span><span>    <span>type</span>: <span>excellon</span>
</span></span><span><span>    <span>dir</span>: <span>JLCPCB</span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>pth_and_npth_single_file</span>: <span>false</span>
</span></span><span><span>      <span>pth_id</span>: <span>&#39;-PTH&#39;</span>
</span></span><span><span>      <span>npth_id</span>: <span>&#39;-NPTH&#39;</span>
</span></span><span><span>      <span>metric_units</span>: <span>false</span>
</span></span><span><span>      <span>output</span>: <span>&#34;%f%i.%x&#34;</span>
</span></span><span><span>
</span></span><span><span><span># zip all JLCPCB gerber and drill files together</span>
</span></span><span><span>  - <span>name</span>: <span>JLCPCB</span>
</span></span><span><span>    <span>comment</span>: <span>ZIP file for JLCPCB</span>
</span></span><span><span>    <span>type</span>: <span>compress</span>
</span></span><span><span>    <span>dir</span>: <span>Fabrication/JLCPCB</span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>files</span>:
</span></span><span><span>        - <span>from_output</span>: <span>JLCPCB_gerbers</span>
</span></span><span><span>          <span>dest</span>: <span>/</span>
</span></span><span><span>        - <span>from_output</span>: <span>JLCPCB_drill</span>
</span></span><span><span>          <span>dest</span>: <span>/</span>
</span></span><span><span>
</span></span><span><span><span># html ibom</span>
</span></span><span><span>  - <span>name</span>: <span>ibom</span>
</span></span><span><span>    <span>comment</span>: <span>Interactive BOM</span>
</span></span><span><span>    <span>type</span>: <span>ibom </span>
</span></span><span><span>    <span>dir</span>: <span>Fabrication/ibom</span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>dark_mode</span>: <span>true</span>
</span></span><span><span>      <span>name_format</span>: <span>&#39;index&#39;</span>
</span></span><span><span>
</span></span><span><span><span># JLCPCB assembly positions of components</span>
</span></span><span><span>  - <span>name</span>: <span>&#39;JLCPCB_position&#39;</span>
</span></span><span><span>    <span>comment</span>: <span>&#34;Pick and place file, JLCPCB style&#34;</span>
</span></span><span><span>    <span>type</span>: <span>position</span>
</span></span><span><span>    <span>dir</span>: <span>Fabrication/JLCPCB-BOM</span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>variant</span>: <span>rotated</span>
</span></span><span><span>      <span>output</span>: <span>&#39;%f_cpl_jlc.%x&#39;</span>
</span></span><span><span>      <span>format</span>: <span>CSV</span>
</span></span><span><span>      <span>units</span>: <span>millimeters</span>
</span></span><span><span>      <span>separate_files_for_front_and_back</span>: <span>false</span>
</span></span><span><span>      <span>only_smd</span>: <span>true</span>
</span></span><span><span>      <span>columns</span>:
</span></span><span><span>        - <span>id</span>: <span>Ref</span>
</span></span><span><span>          <span>name</span>: <span>Designator</span>
</span></span><span><span>        - <span>Val</span>
</span></span><span><span>        - <span>Package</span>
</span></span><span><span>        - <span>id</span>: <span>PosX</span>
</span></span><span><span>          <span>name</span>: <span>&#34;Mid X&#34;</span>
</span></span><span><span>        - <span>id</span>: <span>PosY</span>
</span></span><span><span>          <span>name</span>: <span>&#34;Mid Y&#34;</span>
</span></span><span><span>        - <span>id</span>: <span>Rot</span>
</span></span><span><span>          <span>name</span>: <span>Rotation</span>
</span></span><span><span>        - <span>id</span>: <span>Side</span>
</span></span><span><span>          <span>name</span>: <span>Layer</span>
</span></span><span><span>
</span></span><span><span><span># JLCPCB Bom for assembly or for LCSC order</span>
</span></span><span><span>  - <span>name</span>: <span>&#39;JLCPCB_bom&#39;</span>
</span></span><span><span>    <span>comment</span>: <span>&#34;BoM for JLCPCB&#34;</span>
</span></span><span><span>    <span>type</span>: <span>bom</span>
</span></span><span><span>    <span>dir</span>: <span>Fabrication/JLCPCB-BOM    </span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>output</span>: <span>&#39;%f_%i_jlc.%x&#39;</span>
</span></span><span><span>      <span>exclude_filter</span>: <span>&#39;only_jlc_parts&#39;</span>
</span></span><span><span>      <span>ref_separator</span>: <span>&#39;,&#39;</span>
</span></span><span><span>      <span>columns</span>:
</span></span><span><span>        - <span>field</span>: <span>Value</span>
</span></span><span><span>          <span>name</span>: <span>Comment</span>
</span></span><span><span>        - <span>field</span>: <span>References</span>
</span></span><span><span>          <span>name</span>: <span>Designator</span>
</span></span><span><span>        - <span>Footprint</span>
</span></span><span><span>        - <span>field</span>: <span>&#39;LCSC&#39;</span>
</span></span><span><span>          <span>name</span>: <span>&#39;LCSC part number&#39;</span>
</span></span><span><span>        - <span>field</span>: <span>&#39;Quantity Per PCB&#39;</span>
</span></span><span><span>          <span>name</span>: <span>&#39;QTY&#39;</span>
</span></span><span><span>      <span>csv</span>:
</span></span><span><span>        <span>hide_pcb_info</span>: <span>true</span>
</span></span><span><span>        <span>hide_stats_info</span>: <span>true</span>
</span></span><span><span>        <span>quote_all</span>: <span>true</span>
</span></span><span><span>
</span></span><span><span><span># PDF of Schematic with dracula theme</span>
</span></span><span><span>  - <span>name</span>: <span>&#39;SchPrint&#39;</span>
</span></span><span><span>    <span>comment</span>: <span>&#34;Print schematic PDF&#34;</span>
</span></span><span><span>    <span>type</span>: <span>pdf_sch_print</span>
</span></span><span><span>    <span>dir</span>: <span>Fabrication/PDFs</span>
</span></span><span><span>    <span>options</span>:
</span></span><span><span>      <span>color_theme</span>: <span>dracula</span>
</span></span><span><span>      <span>background_color</span>: <span>true</span>
</span></span></code></pre></div><h2 id="fabrication">Fabrication</h2><p>After the pipeline runs successfully I have the following files in my repositories Fabrication folder:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>├── ibom
</span></span><span><span>│   └── myproject-ibom.html      <span># interactive BOM</span>
</span></span><span><span>├── JLCPCB
</span></span><span><span>│   └── myproject-JLCPCB.zip     <span># gerbers for PCB order</span>
</span></span><span><span>├── JLCPCB-BOM
</span></span><span><span>│   ├── myproject_bom_jlc.csv    <span># BOM for assembly or LCDC order</span>
</span></span><span><span>│   └── myproject_cpl_jlc.csv    <span># Assembly position file</span>
</span></span><span><span>└── PDFs
</span></span><span><span>    └── myproject-schematic.pdf  <span># PDF of schematic</span>
</span></span></code></pre></div><h2 id="todo">TODO</h2><ul><li>I have not used JLCPCB’s assembly service with this export so it may not be correct</li><li>The DRC appears to be using the KiCad defaults and not the options I set in KiCad, I may need to pass the designs rules to KiBot somehow.</li><li>A PDF of the PCB would also be useful but requires defining which layers etc. in the config above.</li><li>I would like the interactive BOM be upload to a gitlab page</li><li>3d export?</li></ul><h2 id="eye-candy">Eye-Candy</h2><p>This is an export from KiCad into Blender which textures applied as well as animated.</p><p><iframe src="https://www.youtube.com/embed/svU7NyfJJKY" allowfullscreen="" title="YouTube Video"></iframe></p></div></div>
  </body>
</html>
