<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ezrizhu.com/blog/tmux-visual-bell">Original</a>
    <h1>Custom tmux visual bell</h1>
    
    <div id="readability-page-1" class="page"><div><article><div><p><a href="https://en.wikipedia.org/wiki/Bell_character" target="_blank">Terminal bells</a> are a neat way
for command-line applications to ping the user about something. Itâ€™s the â€˜dingâ€™
that you hear on your terminal sometimes when youâ€™re tabbing around or when you
run this.</p>
<pre><code>printf &#39;\a&#39;
</code></pre>
<p>In tmux, you can enable visual bell via the <code>bell-action</code> and the <code>visual-bell</code>
option, but it is not super pretty, we can do better than that.</p>
<p><img alt="screenshot of a tmux bar with the text Bell in current window" src="https://ezrizhu.com/assets/img/blog/20250608-tmux_visual_bell_bad.png"/></p>
<p>So I wrote this script that has tmux bark at you whenever any window under any
session gets a bell, using tmuxâ€™s <code>display-popup</code>, it also shows you the tmux
session and window that sent the bell.</p>
<p>To use it, you can just save this script somewhere, I use home-managerâ€™s
home.file to write it for me. I used the path <code>~/.config/tmux/bell.sh</code></p>
<pre><code>#!/bin/sh
SESSION=&#34;$1&#34;
WINDOW=&#34;$2&#34;
tmux display-popup -x P -y P -w 40 -h 3 -t . \
    &#34;echo -n &#39;ðŸ¦´ awrf~ awrf~ $SESSION:$WINDOW ðŸ¦´&#39;&#34; &amp;
(sleep 1 &amp;&amp; tmux display-popup -C) &amp;
</code></pre>
<p>then in your tmuxâ€™s config file,</p>
<pre><code>set-option -g bell-action any
set-option -g visual-bell off
set-hook -g alert-bell &#34;run-shell &#39;~/.config/tmux/bell.sh \&#34;#S\&#34; \&#34;#W\&#34;&#39;&#34;
</code></pre>
<p><img alt="screenshot of a terminal and a popup with the bell message at the bottom left" src="https://ezrizhu.com/assets/img/blog/20250608-tmux_visual_bell.png"/></p>
<p>This is a pretty short blog, but I think itâ€™s pretty neat and I hope you enjoyed
it. At first I thought to make a tmux plugin but this also works.</p></div></article><hr/><p>If you have any questions, want to change my mind, or literally anything else, please <a href="mailto:me@ezrizhu.com">reach out</a>!</p></div></div>
  </body>
</html>
