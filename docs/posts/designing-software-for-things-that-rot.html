<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://drobinin.com/posts/designing-software-for-things-that-rot/">Original</a>
    <h1>Designing software for things that rot</h1>
    
    <div id="readability-page-1" class="page"><div>
                    <p>The white mold was good. The green-grey mold was probably fine. The fuzzy black spot was... well, that&#39;s when I ended up in a midnight rabbit hole of forum posts debating whether <em>that particular shade</em> of black meant penicillium or something that would send me to hospital. I had photos, I had descriptions, I had twelve different opinions from twelve different strangers on the internet.</p>
<p>What I didn&#39;t have, was the confidence. &#34;Is that safe to eat?&#34; my neighbour asked, eyeing the salami hanging in my garage. Fair question: it&#39;s raw meat that&#39;s been sitting at room temperature for six weeks.</p>
<p>That&#39;s when it clicked: I&#39;d been treating fermentation like cooking when I should have been treating it like infrastructure. But how did I end up here in the first place?</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-garage-1.jpg" width="200" alt="First batch of venison salami hanging in the garage."/>
    <img src="https://drobinin.com/assets/rot-garage-2.jpg" width="200" alt="Sliced venison salami on the cutting board."/>
    <img src="https://drobinin.com/assets/rot-setup.jpg" width="200" alt="DIY fermentation chamber with controllers taped to a fridge door."/>
  </p>
  <figcaption>Half of the first batch hanged Italian-style on the ceiling didn&#39;t survive Scottish humidity and got a few spots looking too similar to zygomycetes fungi, at which point I got too scared and built a proper chamber.</figcaption>
</figure>
<hr/>
<h2 id="first%2C-there-was-hardware">First, there was hardware <a href="#first%2C-there-was-hardware">¶</a></h2>
<p>I started fermenting almost a decade ago, before sourdough starters became everyone&#39;s pandemic tamagotchi. You know the drill: shy attempts at sauerkraut, then mozzarella, then progressively weirder things and Sandor Katz books on the shelves. Tracking went from paper scraps to text files to an Obsidian vault. None of it helped because the problem wasn&#39;t tracking, it was knowing <em>what</em> to track and <em>when</em> it mattered.</p>
<p>Things escalated when I moved into a detached house–the kind where neighbors won&#39;t hear you checking on your sausage at 2 AM (which, reading that back, sounds worse than it is).</p>
<p>I bought a £150 larder fridge on eBay, added two Inkbird controllers, a reptile mat left after koji experiments, and went on a quest for a dehumidifier that resumes automatically. Most need a button press, which is useless for automation, and for some reason sellers never mention it in descriptions; cue exciting returns and very odd Amazon ads I keep getting three years later.</p>
<figure>
  <img src="https://drobinin.com/assets/rot-setup-diagram.png" alt="Diagram of the fermentation chamber wiring with fridge, humidifier, dehumidifier, and Inkbird controllers."/>
</figure>
<p>Temperature was easy. Humidity, not so much. Without a humidifier, the dehumidifier would overshoot and stall around ~75% RH, the case-hardening sweet spot where you build a meat Matryoshka you can&#39;t trust. The fix was bidirectional control: add moisture gently below target, remove gently above. Haven&#39;t had a case-hardening scare since.</p>
<hr/>
<h2 id="then%2C-came-the-dashboard">Then, came the dashboard <a href="#then%2C-came-the-dashboard">¶</a></h2>
<p>I already had Home Assistant running, so getting temperature and humidity from the chamber into a snippet took an evening. But I didn&#39;t have a way to know if what I was seeing was actually a problem.</p>
<figure>
  <img src="https://drobinin.com/assets/rot-reducing-humidity.png" alt="Home Assistant graph showing chamber humidity stepping down over time."/>
  <figcaption>DevOps for guanciale.</figcaption>
</figure>
<p>Let&#39;s say, you&#39;re curing coppa and on day 12 humidity drops to 68% for six hours because you forgot to refill the reservoir. Is that fine? A disaster? The answer depends on cure phase, temperature, weight loss, and a dozen other variables. It&#39;s context, not a threshold.</p>
<p>Most of my &#34;monitoring&#34; was staring at graphs and trying to remember forum posts from three years ago. I had observability but no intelligence.</p>
<p>I read once: if you can measure it, you can manage it. But often <em>a measurement without context is just noise</em>.</p>
<hr/>
<h2 id="what-could-go-wrong%3F">What could go wrong? <a href="#what-could-go-wrong%3F">¶</a></h2>
<p>The wake-up call came with &#39;nduja–spreadable salami, heavy on fat and chillies, delicious, and risky because of moisture content and long fermentation. Reading through the process I found someone mentioning HACCP plans: Hazard Analysis and Critical Control Points, the food industry framework for identifying what can go wrong and how to monitor it.</p>
<p>I&#39;d assumed it was bureacracy paperwork. Turns out it&#39;s an elegant decision tree. Enumerate every hazard, figure out which you can control, define critical limits, document monitoring.</p>
<p>For &#39;nduja: biological hazard is Salmonella, Listeria, Clostridium. Control point is pH drop. Critical limit is pH 5.3 within 48 hours. Monitor at 24h and 48h. Corrective action: if pH &gt; 5.3 at 48h, discard.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-ph.jpg" width="250" alt="pH meter calibration setup."/>
    <img src="https://drobinin.com/assets/rot-nduja.jpg" width="250" alt="Harvested &#39;nduja and salami."/>
  </p>
</figure>
<p>Obviously kraut, kimchi, quick pickles are forgiving: they&#39;ll look and smell wrong if they fail. Things change with low-acid, low-oxygen, long cures of meat and things like garlic-in-oil, where something poisonous won&#39;t have off-smells or flavours. HACCP isn&#39;t paperwork; it&#39;s how you don&#39;t roll dice you can&#39;t see.</p>
<hr/>
<h3 id="building-the-decision-tree">Building the decision tree <a href="#building-the-decision-tree">¶</a></h3>
<p>Naturally, as an iOS developer I built a tracker. I started with projects and logs, then added &#34;fermentation profiles&#34; with hazards, limits, and check schedules.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-fermento-2.png" width="180" alt="Fermento projects overview screen."/>
    <img src="https://drobinin.com/assets/rot-fermento-timeline.png" width="180" alt="Fermento timeline view showing fermentation phases and checks."/>
    <img src="https://drobinin.com/assets/rot-fermento-3.png" width="180" alt="Fermento HACCP screen listing hazards and actions."/>
  </p>
</figure>
<p>The interesting bit was context: 65% humidity might be fine on day 30 but a problem on day 5, so the app has to know where you are in the process. Each fermentation profile is basically a small state machine where phases progress in order (ferment → dry → age), and each phase carries its own set of constraints that matter during that window.</p>
<pre><code><span><span>struct</span> <span>Constraint</span> <span>{</span></span></code></pre>
<p>The first version checked every constraint on every measurement, which was fine for a dozen control points but felt wasteful. The fix was simple: when a batch enters a new phase, grab just the constraints relevant to that phase and cache them. Most phases only care about three to five things–during fermentation you&#39;re watching pH and temperature, during drying it&#39;s relative humidity and weight loss, during aging it&#39;s mostly &#34;is anything growing that shouldn&#39;t be&#34;. So when a new measurement arrives you only validate against the cached constraints for the current phase.</p>
<p>Some checks are time-bound (&#34;verify pH by 48 hours&#34; for &#39;nduja), so I keep those in a sorted list of due tasks. Nothing fancy, just enough to know what needs checking next without scanning everything.</p>
<p>LeetCode youth finally paid off: turns out all those &#34;rebalance a binary search tree&#34; problems were preparing me for salami, not FAANG interviews.</p>
<hr/>
<h3 id="automating-compliance">Automating compliance <a href="#automating-compliance">¶</a></h3>
<p>Once checks worked, I figured I might as well generate the actual HACCP document, so the next time a neighbour suspeciously eyes me up and asks if the homemade Roquefort is safe to eat, I can pull up a binder that wouldn&#39;t look out of place in a Michelin kitchen.</p>
<p>Take the profile, enumerate hazards, build the control table, export as PDF. The useful bit was making it bidirectional–if you&#39;re logging anyway, the document fills itself. pH 5.2 at 48 hours? CCP-1 verified. Temperature excursion? Flagged with corrective note.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-ccp-0.png" width="200" alt="Generated HACCP cover page listing hazards and control points."/>
    <img src="https://drobinin.com/assets/rot-ccp-1.png" width="200" alt="Table of critical control points with limits and corrective actions."/>
    <img src="https://drobinin.com/assets/rot-ccp-2.png" width="200" alt="HACCP verification checklist ready for sign-off."/>
  </p>
</figure>
<p>Could I have added blockchain for tamper-proofing? Sure. Am I going to give people that idea? Absolutely not.</p>
<p>A lot of tools in this space are beautifully precise and wonderfully narrow–great if you only brew beer, or only bake bread. I don&#39;t. I swing from grashopper garum to deer prosciutto to cedar mugolio, because you live only once and also have you ever tried to find a grasshopper garum in a corner shop? What I needed wasn&#39;t a tighter ruler; it was a truer diary.</p>
<hr/>
<h3 id="traceability-over-precision">Traceability over precision <a href="#traceability-over-precision">¶</a></h3>
<p>In the world where most apps chase precision, I only wanted traceability: a record of what really happened, not what <em>should</em> have.</p>
<p>HACCP matters for edge cases: long windows, low-acid environments, meat–anywhere botulism is theoretically on the table. Not everything I ferment needs this rigour. For the rest, just keep an honest log: what did I do, what did I measure, what did I observe.</p>
<p>I&#39;ve got batches where the note says &#34;forgot to log pH, but it smelled right.&#34; That&#39;s data. Photos often help more than numbers. &#34;Slightly more sour than batch #3&#34; beats pH to three decimals.</p>
<figure>
  <img src="https://drobinin.com/assets/rot-cheese.png" width="250" alt="Fermento detail preview with cheese tasting notes"/>
</figure>
<hr/>
<h3 id="the-manual-reality">The manual reality <a href="#the-manual-reality">¶</a></h3>
<p>Chamber monitoring runs in Home Assistant automatically. But the tracker doesn&#39;t talk to Home Assistant (yet?), so when I weigh a salami or measure pH I&#39;m typing it in.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-scale.jpg" width="250" alt="Digital scale on a counter with a salami being weighed."/>
    <img src="https://drobinin.com/assets/rot-ph-meter.jpg" width="250" alt="Hand holding a pH meter with a sample of sausage meat."/>
  </p>
</figure>
<p>Dream setup: weigh the piece, measurement auto-logs, gets checked, flags me if the curve is wrong. But I don&#39;t have smart scales that talk to my phone, and even if I did I&#39;d need to solve &#34;which piece is on the scale&#34;. Barcode tags? RFID? A Vapor server with Apple&#39;s new Foundation models and VisionKit to run real-time OCR?</p>
<p>It might sound odd from someone who <a href="https://drobinin.com/posts/how-i-accidentally-became-puregyms-unofficial-apple-wallet-developer/">just spent a weekend reverse-engineering PureGym&#39;s API</a> because I couldn&#39;t be bothered to remember an 8-digit PIN. But typing six numbers once a week? That&#39;s fine. Apparently my threshold is somewhere between &#34;weekly number entry&#34; and &#34;daily PIN recall&#34;.</p>
<hr/>
<h2 id="designing-for-things-that-rot">Designing for things that rot <a href="#designing-for-things-that-rot">¶</a></h2>
<p>Web services are designed around uptime and consistency, i.e deterministic behaviour, same in test as production. Fermentation is the opposite: controlled drift where things change slowly within acceptable boundaries. Your job isn&#39;t to prevent change, it&#39;s to make sure it happens in the right direction at roughly the right speed.</p>
<p>It&#39;s all about watching trends, not absolute values. A 2°C spike for ten minutes is irrelevant, but a 0.5°C drift over a week matters. And you can&#39;t rollback. Once you&#39;ve over-salted or let it dry too fast, that&#39;s it.</p>
<figure>
  <img src="https://drobinin.com/assets/rot-gradual.jpg" alt="Humidity graph showing a slow three-day descent after loading a fresh batch into the chamber."/>
  <figcaption>Humidity spikes when a new batch goes into the chamber, and bringing it back takes time.</figcaption>
</figure>
<p>Every batch teaches you something, every deviation is data. I&#39;ve got batches going back years: elderflower capers at ~7% brine (lower went mushy), ättika penny buns where blanch-then-brine kept their snap, dried barley koji where airflow beat temperature, duck prosciutto I ignored for ten days that still behaved, and the blue that didn&#39;t–because I didn&#39;t sanitise the box. All logged, all useful.</p>
<p>Designing software for things that rot means optimising for variance, memory, and timing–not perfection. It turns out the hardest part of software isn&#39;t keeping things alive. It&#39;s knowing when to let them age.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-final-2.jpg" width="200" alt="Genoa salami sliced in half."/>
    <img src="https://drobinin.com/assets/rot-miso.jpg" width="200" alt="Tubs of homemade miso."/>
    <img src="https://drobinin.com/assets/rot-final-3.jpg" width="200" alt="Charcuterie board with homemade charcuterie."/>
  </p>
</figure>
<hr/>
<h2 id="smaller-scale%2C-same-habits">Smaller scale, same habits <a href="#smaller-scale%2C-same-habits">¶</a></h2>
<p>These days I&#39;m settling in Canada with most of the gear in storage across the pond. No chamber, no controllers, no midnight humidity checks–just a jar of pinecones buried in sugar slowly turning into mugolio, some freshly picked BC chanterelles in a quick brine, my wife&#39;s sourdough starter living on the counter and getting fed when she remembers. The app reminds her; she ignores the app; the starter survives anyway because sourdough is <em>remarkably</em> forgiving.</p>
<figure>
  <p><img src="https://drobinin.com/assets/rot-sourdough.jpg" width="250" alt="Jar of bubbly sourdough starter."/>
    <img src="https://drobinin.com/assets/rot-cones.jpg" width="250" alt="Mugolio preparation: fresh cones and sugar"/>
  </p>
</figure>
<p>Different scale, same principles: note what you did, watch what changes, let time do its thing. Turns out you don&#39;t need the chamber to benefit from the habits.</p>
<p>I ended up calling the tracker <strong>Fermento</strong>. It keeps track of salt percentages, culture lineages, HACCP plans. Mostly it just tries not to get in your way.</p>
<p>Most of what people ferment at home doesn&#39;t need HACCP plans–kombucha and pickles will tell you loudly if they&#39;ve gone wrong. For those, Fermento is just a diary with reminders. But when you&#39;re doing long cures or low-acid environments where bad outcomes are silent, having the decision tree makes the difference. The app scales to what you&#39;re making.</p>
<p>If you&#39;ve read this far, you&#39;re probably my kind of person. The app is <a href="https://apps.apple.com/us/app/fermento-fermentation-tracker/id6470132496">here</a>. It&#39;s free for basic tracking and HACCP generation is in the commercial tier .</p>
<p>The best incident reports end with dinner. May yours end with something cured, crunchy, or quietly fizzing.</p>
<hr/>
<p><em>Got weird hardware and weirder requirements? I make unreasonable things work on iOS. <a href="mailto:work@drobinin.com">work@drobinin.com</a></em></p>



                </div></div>
  </body>
</html>
