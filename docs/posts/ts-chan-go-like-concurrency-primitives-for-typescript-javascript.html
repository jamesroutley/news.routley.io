<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/joeycumines/ts-chan">Original</a>
    <h1>Show HN: Ts-Chan â€“ Go-Like Concurrency Primitives for TypeScript/JavaScript</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://www.npmjs.com/package/ts-chan" rel="nofollow"><img src="https://camo.githubusercontent.com/b893183d21355050afc8d7f6921e6b020d3ea7090683eb3999a2105f84cd8273/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4e504d2d74732d2d6368616e2d627269676874677265656e" alt="NPM Package" data-canonical-src="https://img.shields.io/badge/NPM-ts--chan-brightgreen"/></a>
<a href="https://github.com/joeycumines/ts-chan"><img src="https://camo.githubusercontent.com/f39353a3ae581007ac07a13e2c4c7d6ad115c170afc7581f458ce0c29741d206/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4769744875622d74732d2d6368616e2d626c7565" alt="GitHub Repo" data-canonical-src="https://img.shields.io/badge/GitHub-ts--chan-blue"/></a>
<a href="https://github.com/google/gts"><img src="https://camo.githubusercontent.com/b2a371e8d9ddc86da86c4a585129b5f70adad0539fb8cc59f4e033c4112ca8a7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d676f6f676c652d626c756576696f6c65742e737667" alt="Code Style: Google" data-canonical-src="https://img.shields.io/badge/code%20style-google-blueviolet.svg"/></a></p>
<p dir="auto">Concurrency primitives for TypeScript and JavaScript.</p>
<h2 tabindex="-1" id="user-content-introduction" dir="auto"><a href="#introduction">Introduction<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Concurrency in JavaScript, frankly, sucks.</p>
<p dir="auto">This module is an effort to provide concurrency primitives for
TypeScript/JavaScript that capture as much of the semantics of Go&#39;s channels as
possible, while remaining idiomatic to the language.</p>
<p dir="auto">I&#39;ll be iterating on this for a few weeks, in my spare time, with the goal of
a production-ready module, which can be used any JS environment, including
browsers.</p>
<h2 tabindex="-1" id="user-content-usage" dir="auto"><a href="#usage">Usage<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<h3 tabindex="-1" id="user-content-installation" dir="auto"><a href="#installation">Installation<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Install or import the NPM package <code>ts-chan</code>.
Supported platforms include Node.js, Deno, and browsers.</p>
<h3 tabindex="-1" id="user-content-the-microtask-queue-a-footgun" dir="auto"><a href="#the-microtask-queue-a-footgun">The microtask queue: a footgun<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">This module takes steps to mitigate the risk of microtask cycles. They remain,
however, a real concern for any JavaScript program, that involves communication
between concurrent operations. Somewhat more insidious than plain call cycles,
as they are not visible in the call stack, it&#39;s important to know that promises
and async/await operate on the microtask queue, unless they wait on something
that operates on the macrotask queue (e.g. i.o., timers).</p>
<p dir="auto">While <code>queueMicrotask</code> is not used by this module, MDN&#39;s
<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide" rel="nofollow">Using microtasks in JavaScript with queueMicrotask()</a>
guide is both informative and relevant.</p>
<p dir="auto">The mitigation strategy used by this module is for high-level async methods
(including <a href="#send">Chan.send</a>, <a href="#recv">Chan.recv</a>, and <a href="#wait">Select.wait</a>)
to use <a href="#getyieldgeneration">getYieldGeneration</a> and
<a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue</a> like:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const exampleHighLevelAsyncMethod = async () =&gt; {
  // ...
  const yieldGeneration = getYieldGeneration();
  const yieldPromise = yieldToMacrotaskQueue();
  try {
    // ...
    return await result;
  } finally {
    if (getYieldGeneration() === yieldGeneration) {
      await yieldPromise;
    }
  }
};"><pre><span>const</span> <span>exampleHighLevelAsyncMethod</span> <span>=</span> <span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>// ...</span>
  <span>const</span> <span>yieldGeneration</span> <span>=</span> <span>getYieldGeneration</span><span>(</span><span>)</span><span>;</span>
  <span>const</span> <span>yieldPromise</span> <span>=</span> <span>yieldToMacrotaskQueue</span><span>(</span><span>)</span><span>;</span>
  <span>try</span> <span>{</span>
    <span>// ...</span>
    <span>return</span> <span>await</span> <span>result</span><span>;</span>
  <span>}</span> <span>finally</span> <span>{</span>
    <span>if</span> <span>(</span><span>getYieldGeneration</span><span>(</span><span>)</span> <span>===</span> <span>yieldGeneration</span><span>)</span> <span>{</span>
      <span>await</span> <span>yieldPromise</span><span>;</span>
    <span>}</span>
  <span>}</span>
<span>}</span><span>;</span></pre></div>
<p dir="auto">The above is a simple (albeit unoptimised) pattern which ensures that, so long
as one side calls one of these methods, the event loop will not block.
This solution does have
<a href="https://github.com/joeycumines/ts-chan/compare/66f30b78445636770d494629dbfb7c7a54132599...b03ab84947900f2b1a66f7802ec2ac56e26e1145">some performance impact</a>,
and does not completely mitigate the risk, but seems a reasonable compromise.</p>
<h2 tabindex="-1" id="user-content-architecture" dir="auto"><a href="#architecture">Architecture<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<h3 tabindex="-1" id="user-content-protocol" dir="auto"><a href="#protocol">Protocol<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">To facilitate arbitrary implementations, this module defines a protocol for
implementation of channels, modelled as <a href="#sender">Sender</a> and
<a href="#receiver">Receiver</a>. This protocol is styled after JavaScript&#39;s
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols" rel="nofollow">iteration protocols</a>,
though it differs in that the outer types, <a href="#sendable">Sendable</a> and
<a href="#receivable">Receivable</a> (analogues to <code>Iterable</code>), are not intended to
support statefulness independently of the channel (no <code>return</code> analogue).</p>
<p dir="auto">This documentation is a work in progress, so, for now, it may be easiest to
peruse <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/src/protocol.ts">src/protocol.ts</a>.</p>
<h3 tabindex="-1" id="user-content-chan-class" dir="auto"><a href="#chan-class">Chan class<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">The <a href="#chan">Chan</a> class is a reference implementation of the channel protocol.
It has full support for the protocol, Go-like channel close semantics, and
supports buffered channel semantics.</p>
<p dir="auto">Unlike Go&#39;s channel, all sends and receives are processed in FIFO order,
allowing it to function as a queue, if desired.
Also provided are a number of convenience methods and properties, that are not
part of the core protocol, but are useful for common use cases.</p>
<p dir="auto">See the <a href="#api">API documentation</a> for more details.</p>
<h3 tabindex="-1" id="user-content-select-class" dir="auto"><a href="#select-class">Select class<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">The absence of an analogue to Go&#39;s
<a href="https://go.dev/ref/spec#Select_statements" rel="nofollow">select statement</a>
would limit the usefulness of channels, as the select statement is Go&#39;s key to
implementing &#34;reactive&#34; software.
The <a href="#select">Select</a> class provided by this module is intended to fill that
gap, and is modelled after Go&#39;s <code>select</code> statement, particularly regarding the
semantics of receiving and sending. This class utilizes the &#34;channel protocol&#34;
(as defined by this module). <code>AbortSignal</code> is fully supported, and (can)
function equivalently to including a <code>case &lt;-ctx.Done():</code>, in Go. Promises are
also supported, though they have no analogue, in Go.</p>
<h4 tabindex="-1" id="user-content-comparison-to-gos-select-statement" dir="auto"><a href="#comparison-to-gos-select-statement">Comparison to Go&#39;s select statement<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<h5 tabindex="-1" id="user-content-similarities" dir="auto"><a href="#similarities">Similarities<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ol dir="auto">
<li><strong>Random Selection</strong>: Just as Go&#39;s <code>select</code> statement picks one
communicative operation using a uniform pseudo-random selection (if more
than one is immediately available), the <code>Select</code> class does so too.</li>
<li><strong>Blocking Behavior</strong>: In Go, if no communication can proceed and there&#39;s
no default case, the <code>select</code> statement blocks. Similarly, the <code>Select</code>
class&#39;s <code>wait</code> method will also block until a case is ready.</li>
<li><strong>Default Case Equivalence</strong>: The <code>poll</code> method in the <code>Select</code> class
serves a similar purpose as the <code>default</code> case in Go&#39;s <code>select</code> statement.
If no case is ready, <code>poll</code> will return <code>undefined</code>, offering a
non-blocking alternative.</li>
<li><strong>Case Evaluation Order</strong>: (Optional, see below) The
<a href="#selectfactory">SelectFactory</a> class may be used to evaluate senders,
receivers, and values (to send), in source order, and is intended to be
used within loops and similar. Use of this class may avoid unnecessary
recreation of select cases, on each iteration, with the caveat that it
does not (currently) support promises.</li>
</ol>
<h5 tabindex="-1" id="user-content-differences" dir="auto"><a href="#differences">Differences<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ol dir="auto">
<li><strong>Return Value from <code>wait</code> and <code>poll</code></strong>: The <code>Select</code> class&#39;s <code>wait</code> method
returns a promise that resolves with the index of the next ready case.
The <code>poll</code> method, on the other hand, returns the index directly or
<code>undefined</code>. In contrast, Go&#39;s <code>select</code> statement does not return values in
this manner. This is a mechanism used to provide type support.</li>
<li><strong>Operation to &#34;receive&#34; value</strong>: Once a receive case is ready, in
the <code>Select</code> class, the result must be explicitly retrieved using the <code>recv</code>
method, which must be provided with the case which is ready. This contrasts
with Go, where the received value is directly assigned in the case clause.
Again, this is a part of the mechanism used to provide type support.</li>
<li><strong>Limited default value support</strong>: Nil channels have not analogue in TS/JS.
Additionally, while receiving a &#34;default value&#34; (on receive from a closed
channel) <em>is</em> a supported part of the channel protocol, it&#39;s not required,
and has no (type-based) mechanism to describe whether the channel supports
it, or not.</li>
<li><strong>Case Evaluation Order</strong>: This is an interesting topic, and I found that
Go&#39;s behavior was not exactly what I expected. For simplicity, this
functionality was omitted from <code>Select</code>, and is provided by
<code>SelectFactory</code>, instead. For reference, from
the <a href="https://go.dev/ref/spec#Select_statements" rel="nofollow">Go spec</a>:
<blockquote>
<p dir="auto">For all the cases in the statement, the channel operands of receive
operations and the channel and right-hand-side expressions of send
statements are evaluated exactly once, in source order, upon entering the
&#34;select&#34; statement. The result is a set of channels to receive from or
send to, and the corresponding values to send. Any side effects in that
evaluation will occur irrespective of which (if any) communication
operation is selected to proceed. Expressions on the left-hand side of a
RecvStmt with a short variable declaration or assignment are not yet
evaluated.</p>
</blockquote>
</li>
</ol>
<h2 tabindex="-1" id="user-content-api" dir="auto"><a href="#api">API<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>

<h4 tabindex="-1" id="user-content-table-of-contents" dir="auto"><a href="#table-of-contents">Table of Contents<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><a href="#chan">Chan</a>
<ul dir="auto">
<li><a href="#parameters">Parameters</a></li>
<li><a href="#capacity">capacity</a></li>
<li><a href="#length">length</a></li>
<li><a href="#concurrency">concurrency</a></li>
<li><a href="#trysend">trySend</a>
<ul dir="auto">
<li><a href="#parameters-1">Parameters</a></li>
</ul>
</li>
<li><a href="#send">send</a>
<ul dir="auto">
<li><a href="#parameters-2">Parameters</a></li>
</ul>
</li>
<li><a href="#tryrecv">tryRecv</a></li>
<li><a href="#recv">recv</a>
<ul dir="auto">
<li><a href="#parameters-3">Parameters</a></li>
</ul>
</li>
<li><a href="#close">close</a></li>
</ul>
</li>
<li><a href="#chaniterator">ChanIterator</a>
<ul dir="auto">
<li><a href="#parameters-4">Parameters</a></li>
<li><a href="#iterator">iterator</a></li>
<li><a href="#next">next</a></li>
<li><a href="#return">return</a></li>
<li><a href="#throw">throw</a>
<ul dir="auto">
<li><a href="#parameters-5">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#chanasynciterator">ChanAsyncIterator</a>
<ul dir="auto">
<li><a href="#parameters-6">Parameters</a></li>
<li><a href="#asynciterator">asyncIterator</a></li>
<li><a href="#next-1">next</a></li>
<li><a href="#return-1">return</a></li>
<li><a href="#throw-1">throw</a>
<ul dir="auto">
<li><a href="#parameters-7">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#receiver">Receiver</a>
<ul dir="auto">
<li><a href="#properties">Properties</a></li>
<li><a href="#addreceiver">addReceiver</a></li>
<li><a href="#removereceiver">removeReceiver</a></li>
</ul>
</li>
<li><a href="#receivercallback">ReceiverCallback</a></li>
<li><a href="#receivable">Receivable</a>
<ul dir="auto">
<li><a href="#properties-1">Properties</a></li>
</ul>
</li>
<li><a href="#getreceiver">getReceiver</a></li>
<li><a href="#sender">Sender</a>
<ul dir="auto">
<li><a href="#properties-2">Properties</a></li>
<li><a href="#addsender">addSender</a></li>
<li><a href="#removesender">removeSender</a></li>
<li><a href="#close-1">close</a></li>
</ul>
</li>
<li><a href="#sendercallback">SenderCallback</a></li>
<li><a href="#sendable">Sendable</a>
<ul dir="auto">
<li><a href="#properties-3">Properties</a></li>
</ul>
</li>
<li><a href="#getsender">getSender</a></li>
<li><a href="#sendonclosedchannelerror">SendOnClosedChannelError</a>
<ul dir="auto">
<li><a href="#parameters-8">Parameters</a></li>
</ul>
</li>
<li><a href="#closeofclosedchannelerror">CloseOfClosedChannelError</a>
<ul dir="auto">
<li><a href="#parameters-9">Parameters</a></li>
</ul>
</li>
<li><a href="#selectcase">SelectCase</a></li>
<li><a href="#selectcasesender">SelectCaseSender</a>
<ul dir="auto">
<li><a href="#properties-4">Properties</a></li>
<li><a href="#type">type</a></li>
</ul>
</li>
<li><a href="#selectcasereceiver">SelectCaseReceiver</a>
<ul dir="auto">
<li><a href="#properties-5">Properties</a></li>
<li><a href="#type-1">type</a></li>
</ul>
</li>
<li><a href="#selectcasepromise">SelectCasePromise</a>
<ul dir="auto">
<li><a href="#properties-6">Properties</a></li>
<li><a href="#type-2">type</a></li>
</ul>
</li>
<li><a href="#recv-1">recv</a>
<ul dir="auto">
<li><a href="#parameters-10">Parameters</a></li>
</ul>
</li>
<li><a href="#send-1">send</a>
<ul dir="auto">
<li><a href="#parameters-11">Parameters</a></li>
</ul>
</li>
<li><a href="#wait">wait</a>
<ul dir="auto">
<li><a href="#parameters-12">Parameters</a></li>
</ul>
</li>
<li><a href="#select">Select</a>
<ul dir="auto">
<li><a href="#parameters-13">Parameters</a></li>
<li><a href="#cases">cases</a>
<ul dir="auto">
<li><a href="#examples">Examples</a></li>
</ul>
</li>
<li><a href="#poll">poll</a></li>
<li><a href="#wait-1">wait</a>
<ul dir="auto">
<li><a href="#parameters-14">Parameters</a></li>
</ul>
</li>
<li><a href="#recv-2">recv</a>
<ul dir="auto">
<li><a href="#parameters-15">Parameters</a></li>
</ul>
</li>
<li><a href="#promises">promises</a>
<ul dir="auto">
<li><a href="#parameters-16">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#selectfactory">SelectFactory</a>
<ul dir="auto">
<li><a href="#clear">clear</a></li>
<li><a href="#with">with</a>
<ul dir="auto">
<li><a href="#parameters-17">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#getyieldgeneration">getYieldGeneration</a></li>
<li><a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue</a></li>
</ul>
<h3 tabindex="-1" id="user-content-chan" dir="auto"><a href="#chan">Chan<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Provides a communication mechanism between two or more concurrent
operations.</p>
<p dir="auto">In addition to various utility methods, it implements:</p>
<ul dir="auto">
<li><a href="#sendable">Sendable</a> and <a href="#sender">Sender</a> (including <a href="#senderclose">Sender.close</a>).</li>
<li><a href="#receivable">Receivable</a> and <a href="#receiver">Receiver</a></li>
<li><a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Iterable">Iterable</a> (see also <a href="#chaniterator">ChanIterator</a>)</li>
<li><a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/AsyncIterable">AsyncIterable</a> (see also <a href="#chanasynciterator">ChanAsyncIterator</a>)</li>
</ul>
<h4 tabindex="-1" id="user-content-parameters" dir="auto"><a href="#parameters">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>capacity</code>   (optional, default <code>0</code>)</li>
<li><code>newDefaultValue</code> <strong>function (): T?</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-capacity" dir="auto"><a href="#capacity">capacity<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Returns the maximum number of items the channel can buffer.</p>
<p dir="auto">Type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></strong> </p>
<h4 tabindex="-1" id="user-content-length" dir="auto"><a href="#length">length<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Returns the number of items in the channel buffer.</p>
<p dir="auto">Type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></strong> </p>
<h4 tabindex="-1" id="user-content-concurrency" dir="auto"><a href="#concurrency">concurrency<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Returns an integer representing the number of blocking operations.
Positive values indicate senders, while negative values indicate
receivers.</p>
<p dir="auto">Type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></strong> </p>
<h4 tabindex="-1" id="user-content-trysend" dir="auto"><a href="#trysend">trySend<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Performs a synchronous send operation on the channel, returning true if
it succeeds, or false if there are no waiting receivers, and the channel
is full.</p>
<p dir="auto">Will throw <a href="#sendonclosedchannelerror">SendOnClosedChannelError</a> if the channel is closed.</p>
<h5 tabindex="-1" id="user-content-parameters-1" dir="auto"><a href="#parameters-1">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>value</code> <strong>T</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a></strong> </p>
<h4 tabindex="-1" id="user-content-send" dir="auto"><a href="#send">send<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Sends a value to the channel, returning a promise that resolves when it
has been received, and rejects on error, or on abort signal.</p>
<h5 tabindex="-1" id="user-content-parameters-2" dir="auto"><a href="#parameters-2">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>value</code> <strong>T</strong> </li>
<li><code>abort</code> <strong>AbortSignal?</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;void&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-tryrecv" dir="auto"><a href="#tryrecv">tryRecv<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Like <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/trySend">trySend</a>, this performs a synchronous recv operation on the
channel, returning undefined if no value is available, or an iterator
result, which models the received value, and whether the channel is open.</p>
<p dir="auto">Returns <strong>(IteratorResult&lt;T, (T | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>)&gt; | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>)</strong> </p>
<h4 tabindex="-1" id="user-content-recv" dir="auto"><a href="#recv">recv<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Receives a value from the channel, returning a promise that resolves with
an iterator (the value OR indicator that the channel is closed, possibly
with a default value), or rejects on error, or on abort signal.</p>
<h5 tabindex="-1" id="user-content-parameters-3" dir="auto"><a href="#parameters-3">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>abort</code> <strong>AbortSignal?</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;IteratorResult&lt;T, (T | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>)&gt;&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-close" dir="auto"><a href="#close">close<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Closes the channel, preventing further sending of values.</p>
<p dir="auto">See also <a href="#sender">Sender</a> and <a href="#senderclose">Sender.close</a>, which this implements.</p>
<ul dir="auto">
<li>Once a channel is closed, no more values can be sent to it.</li>
<li>If the channel is buffered and there are still values in the buffer when
the channel is closed, receivers will continue to receive those values
until the buffer is empty.</li>
<li>Attempting to send to a closed channel will result in an error and
unblock any senders.</li>
<li>If the channel is already closed, calling <code>close</code> again will throw a
<a href="#closeofclosedchannelerror">CloseOfClosedChannelError</a>.</li>
<li>This method should be used to signal the end of data transmission or
prevent potential deadlocks.</li>
</ul>

<ul dir="auto">
<li>Throws <strong><a href="#closeofclosedchannelerror">CloseOfClosedChannelError</a></strong> When attempting to close a channel
that is already closed.</li>
<li>Throws <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error" rel="nofollow">Error</a></strong> When an error occurs while closing the channel, and no
other specific error is thrown.</li>
</ul>
<p dir="auto">Returns <strong>void</strong> </p>
<h3 tabindex="-1" id="user-content-chaniterator" dir="auto"><a href="#chaniterator">ChanIterator<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Iterates on all available values. May alternate between returning done and
not done, unless <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/ChanIterator.return">ChanIterator.return</a> or <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/ChanIterator.throw">ChanIterator.throw</a>
are called.</p>
<p dir="auto">Only the type is exported - may be initialized only performing an
iteration on a <a href="#chan">Chan</a> instance, or by calling
<code>chan[Symbol.iterator]()</code>.</p>
<h4 tabindex="-1" id="user-content-parameters-4" dir="auto"><a href="#parameters-4">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>chan</code> <strong><a href="#chan">Chan</a>&lt;T&gt;</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-iterator" dir="auto"><a href="#iterator">iterator<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Returns this.</p>
<p dir="auto">Returns <strong>Iterator&lt;T&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-next" dir="auto"><a href="#next">next<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Next iteration.</p>
<p dir="auto">Returns <strong>IteratorResult&lt;T&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-return" dir="auto"><a href="#return">return<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Ends the iterator, which is an idempotent operation.</p>
<p dir="auto">Returns <strong>IteratorResult&lt;T&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-throw" dir="auto"><a href="#throw">throw<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Ends the iterator with an error, which is an idempotent operation.</p>
<h5 tabindex="-1" id="user-content-parameters-5" dir="auto"><a href="#parameters-5">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>e</code> <strong>any?</strong> </li>
</ul>
<p dir="auto">Returns <strong>IteratorResult&lt;T&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-chanasynciterator" dir="auto"><a href="#chanasynciterator">ChanAsyncIterator<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Iterates by receiving values from the channel, until it is closed, or the
<a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/ChanAsyncIterator.return">ChanAsyncIterator.return</a> or <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/ChanAsyncIterator.throw">ChanAsyncIterator.throw</a> methods
are called.</p>
<p dir="auto">Only the type is exported - may be initialized only performing an async
iteration on a <a href="#chan">Chan</a> instance, or by calling
<code>chan[Symbol.asyncIterator]()</code>.</p>
<h4 tabindex="-1" id="user-content-parameters-6" dir="auto"><a href="#parameters-6">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>chan</code> <strong><a href="#chan">Chan</a>&lt;T&gt;</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-asynciterator" dir="auto"><a href="#asynciterator">asyncIterator<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Returns this.</p>
<p dir="auto">Returns <strong>AsyncIterator&lt;T&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-next-1" dir="auto"><a href="#next-1">next<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Next iteration.</p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;IteratorResult&lt;T&gt;&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-return-1" dir="auto"><a href="#return-1">return<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Ends the iterator, which is an idempotent operation.</p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;IteratorResult&lt;T&gt;&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-throw-1" dir="auto"><a href="#throw-1">throw<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Ends the iterator with an error, which is an idempotent operation.</p>
<h5 tabindex="-1" id="user-content-parameters-7" dir="auto"><a href="#parameters-7">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>e</code> <strong>any?</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;IteratorResult&lt;T&gt;&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-receiver" dir="auto"><a href="#receiver">Receiver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Receiver allows callers to receive values.
It uses a one-off callback that models what is going to receive the value.</p>
<p dir="auto">Unlike <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Iterator">Iterator</a>, it is not intended to support statefulness - a
<a href="#receivable">Receivable</a> should return equivalent (but not necessarily identical)
<a href="#receiver">Receiver</a> instances on each call to <a href="#getreceiver">getReceiver</a>.</p>
<p dir="auto">The <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/addReceiver">addReceiver</a> and <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/removeReceiver">removeReceiver</a> methods are low-level
constructs, and, in most scenarios, should not be called directly.
When using these methods, consider the impact of cycles, particularly
microtask cycles, and ways to mitigate them. See also
<a href="#getyieldgeneration">getYieldGeneration</a> and <a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue</a>.</p>
<p dir="auto">Type: {addReceiver: function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a>, removeReceiver: function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): void}</p>
<h4 tabindex="-1" id="user-content-properties" dir="auto"><a href="#properties">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>addReceiver</code> <strong>function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a></strong> </li>
<li><code>removeReceiver</code> <strong>function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): void</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-addreceiver" dir="auto"><a href="#addreceiver">addReceiver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Add a receiver callback to a list of receivers, or call it immediately if
there is an available sender.
Returns true if the receiver was called added to the receiver list.
Returns false if the receiver was called immediately.</p>
<p dir="auto">Type: function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a></p>
<h4 tabindex="-1" id="user-content-removereceiver" dir="auto"><a href="#removereceiver">removeReceiver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Immediately removes the receiver from the receiver list, if it is there.</p>
<p dir="auto">To facilitate &#34;attempting synchronous receive&#34;, this method MUST only
remove the <em>last</em> matching occurrence of the callback, if it exists.</p>
<p dir="auto">Type: function (callback: <a href="#receivercallback">ReceiverCallback</a>&lt;T&gt;): void</p>
<h3 tabindex="-1" id="user-content-receivercallback" dir="auto"><a href="#receivercallback">ReceiverCallback<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">ReceiverCallback is a callback that receives a value from a sender and true,
or a default value (or undefined if unsupported), and false, if the channel
is closed.</p>
<p dir="auto">Type: function (...([T, <code>true</code>] | [(T | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>), <code>false</code>])): void</p>
<h3 tabindex="-1" id="user-content-receivable" dir="auto"><a href="#receivable">Receivable<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Receivable is a value that can be converted to a <a href="#receiver">Receiver</a>.</p>
<p dir="auto">Type: {getReceiver: function (): <a href="#receiver">Receiver</a>&lt;T&gt;}</p>
<h4 tabindex="-1" id="user-content-properties-1" dir="auto"><a href="#properties-1">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>getReceiver</code> <strong>function (): <a href="#receiver">Receiver</a>&lt;T&gt;</strong> </li>
</ul>
<h3 tabindex="-1" id="user-content-getreceiver" dir="auto"><a href="#getreceiver">getReceiver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">See <a href="#receivable">Receivable</a>.</p>
<h3 tabindex="-1" id="user-content-sender" dir="auto"><a href="#sender">Sender<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Sender allows callers to send values.
It uses a one-off callback that models what is going to send the value.</p>
<p dir="auto">Unlike <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Iterator">Iterator</a>, it is not intended to support statefulness - a
<a href="#sendable">Sendable</a> should return equivalent (but not necessarily identical)
<a href="#sender">Sender</a> instances on each call to <a href="#getsender">getSender</a>.</p>
<p dir="auto">See also <a href="#sendonclosedchannelerror">SendOnClosedChannelError</a>, which SHOULD be raised on
<a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/addSender">addSender</a> (if closed on add) or passed into send callbacks
(otherwise), when attempting to send on a closed channel.</p>
<p dir="auto">The <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/addSender">addSender</a> and <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/removeSender">removeSender</a> methods are low-level
constructs, and, in most scenarios, should not be called directly.
When using these methods, consider the impact of cycles, particularly
microtask cycles, and ways to mitigate them. See also
<a href="#getyieldgeneration">getYieldGeneration</a> and <a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue</a>.</p>
<p dir="auto">Type: {addSender: function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a>, removeSender: function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): void, close: function (): void?}</p>
<h4 tabindex="-1" id="user-content-properties-2" dir="auto"><a href="#properties-2">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>addSender</code> <strong>function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a></strong> </li>
<li><code>removeSender</code> <strong>function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): void</strong> </li>
<li><code>close</code> <strong>function (): void?</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-addsender" dir="auto"><a href="#addsender">addSender<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Add a sender callback to a list of senders, or call it immediately if
there is an available receiver.
Returns true if the sender was added to the sender list.
Returns false if the sender was called immediately.
If the channel is closed, SHOULD throw <a href="#sendonclosedchannelerror">SendOnClosedChannelError</a>.
If the channel is closed while the sender is waiting to be called, the
sender SHOULD be called with <a href="#sendonclosedchannelerror">SendOnClosedChannelError</a>.</p>
<p dir="auto">Type: function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean" rel="nofollow">boolean</a></p>
<h4 tabindex="-1" id="user-content-removesender" dir="auto"><a href="#removesender">removeSender<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Immediately removes the sender from the sender list, if it is there.</p>
<p dir="auto">To facilitate &#34;attempting synchronous send&#34;, this method MUST only
remove the <em>last</em> matching occurrence of the callback, if it exists.</p>
<p dir="auto">Type: function (callback: <a href="#sendercallback">SenderCallback</a>&lt;T&gt;): void</p>
<h4 tabindex="-1" id="user-content-close-1" dir="auto"><a href="#close-1">close<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Closes the channel, adhering to the following semantics similar to Go&#39;s
channels:</p>
<ul dir="auto">
<li>Once a channel is closed, no more values can be sent to it.</li>
<li>If a channel is buffered, and there are still values in the buffer when
the channel is closed, the receivers will continue to receive those
values until the buffer is empty.</li>
<li>It&#39;s the responsibility of the sender to close the channel, signaling to
the receiver that no more data will be sent.</li>
<li>Attempting to send to a closed channel MUST result in an error, and
MUST un-block any such senders as part of said close.</li>
<li>The error thrown when attempting to send on a closed channel SHOULD be
<a href="#sendonclosedchannelerror">SendOnClosedChannelError</a>, but MAY be another error.</li>
<li>Unless explicitly documented as idempotent, <code>close</code> SHOULD throw
<a href="#closeofclosedchannelerror">CloseOfClosedChannelError</a> on subsequent calls, but MAY throw
other errors.</li>
<li>Channels should be closed to prevent potential deadlocks or to signal
the end of data transmission. This ensures that receivers waiting on the
channel don&#39;t do so indefinitely.</li>
</ul>
<p dir="auto">Note: This method is optional. Some <a href="#sendable">Sendable</a> implementations may
specify their own rules and semantics for closing channels. Always refer
to the specific implementation&#39;s documentation to ensure correct usage and
to prevent potential memory leaks or unexpected behaviors.</p>
<p dir="auto">See also <a href="#sendonclosedchannelerror">SendOnClosedChannelError</a> and
<a href="#closeofclosedchannelerror">CloseOfClosedChannelError</a>.</p>
<p dir="auto">Type: function (): void</p>
<h3 tabindex="-1" id="user-content-sendercallback" dir="auto"><a href="#sendercallback">SenderCallback<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">SenderCallback is called as a value is received, or when an error or some
other event occurs, which prevents the value from being received.
It accepts two parameters, an error (if any), and the boolean <code>ok</code>,
indicating if the value has been (will be, after return) received.
It MUST return the value (or throw) if <code>ok</code> is true, and SHOULD throw
<code>err</code> if <code>ok</code> is false.</p>
<p dir="auto">The <code>ok</code> parameter being true guarantees that a value (once returned) has
been received, though does not guarantee that anything will be done with it.</p>
<p dir="auto">If the <code>ok</code> parameter is false, the first parameter will contain any error,
and no value (regardless of what is returned) will be received.</p>
<p dir="auto">Note: The sender callback is <em>not</em> called on <code>removeSender</code>.</p>
<p dir="auto">WARNING: If the same value (===) as err (when ok is false) is thrown, that
thrown error will not be bubbled - a mechanism used to avoid breaking the
typing of the return value.</p>
<p dir="auto">Type: function (...([<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>, <code>true</code>] | [any, <code>false</code>])): T</p>
<h3 tabindex="-1" id="user-content-sendable" dir="auto"><a href="#sendable">Sendable<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Sendable is a value that can be converted to a <a href="#sender">Sender</a>.</p>
<p dir="auto">Type: {getSender: function (): <a href="#sender">Sender</a>&lt;T&gt;}</p>
<h4 tabindex="-1" id="user-content-properties-3" dir="auto"><a href="#properties-3">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>getSender</code> <strong>function (): <a href="#sender">Sender</a>&lt;T&gt;</strong> </li>
</ul>
<h3 tabindex="-1" id="user-content-getsender" dir="auto"><a href="#getsender">getSender<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">See <a href="#sendable">Sendable</a>.</p>
<h3 tabindex="-1" id="user-content-sendonclosedchannelerror" dir="auto"><a href="#sendonclosedchannelerror">SendOnClosedChannelError<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><strong>Extends Error</strong></p>
<p dir="auto">Provided as a convenience, that SHOULD be used by <a href="#sender">Sender</a>
implementations, to indicate that a channel is closed.
Should be raised as a result of send attempts on a closed channel, where
the send operation is not allowed to proceed.</p>
<h4 tabindex="-1" id="user-content-parameters-8" dir="auto"><a href="#parameters-8">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>args</code> <strong>...ConstructorParameters&lt;any&gt;</strong> </li>
</ul>
<h3 tabindex="-1" id="user-content-closeofclosedchannelerror" dir="auto"><a href="#closeofclosedchannelerror">CloseOfClosedChannelError<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto"><strong>Extends Error</strong></p>
<p dir="auto">Provided as a convenience, that SHOULD be used by <a href="#sender">Sender</a>
implementations, in the event that a channel close is attempted more than
once.</p>
<h4 tabindex="-1" id="user-content-parameters-9" dir="auto"><a href="#parameters-9">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>args</code> <strong>...ConstructorParameters&lt;any&gt;</strong> </li>
</ul>
<h3 tabindex="-1" id="user-content-selectcase" dir="auto"><a href="#selectcase">SelectCase<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">SelectCase models the state of a single case in a <a href="#select">Select</a>.</p>
<p dir="auto">WARNING: The selectState symbol is deliberately not exported, as the
value of <code>SelectCase[selectState]</code> is not part of the API contract, and
is simply a mechanism to support typing.</p>
<p dir="auto">Type: (<a href="#selectcasesender">SelectCaseSender</a>&lt;T&gt; | <a href="#selectcasereceiver">SelectCaseReceiver</a>&lt;T&gt; | <a href="#selectcasepromise">SelectCasePromise</a>&lt;T&gt;)</p>
<h3 tabindex="-1" id="user-content-selectcasesender" dir="auto"><a href="#selectcasesender">SelectCaseSender<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Sender select case.
See also <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/.send">.send</a>.</p>
<p dir="auto">Type: {type: <code>&#34;Sender&#34;</code>, selectState: CaseStateSender&lt;T&gt;}</p>
<h4 tabindex="-1" id="user-content-properties-4" dir="auto"><a href="#properties-4">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>type</code> <strong><code>&#34;Sender&#34;</code></strong> </li>
<li><code>selectState</code> <strong>CaseStateSender&lt;T&gt;</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-type" dir="auto"><a href="#type">type<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Type is provided to support type guards, and reflection-style logic.</p>
<p dir="auto">Type: <code>&#34;Sender&#34;</code></p>
<h3 tabindex="-1" id="user-content-selectcasereceiver" dir="auto"><a href="#selectcasereceiver">SelectCaseReceiver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Receiver select case.
See also <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/.recv">.recv</a>.</p>
<p dir="auto">Type: {type: <code>&#34;Receiver&#34;</code>, selectState: CaseStateReceiver&lt;T&gt;}</p>
<h4 tabindex="-1" id="user-content-properties-5" dir="auto"><a href="#properties-5">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>type</code> <strong><code>&#34;Receiver&#34;</code></strong> </li>
<li><code>selectState</code> <strong>CaseStateReceiver&lt;T&gt;</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-type-1" dir="auto"><a href="#type-1">type<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Type is provided to support type guards, and reflection-style logic.</p>
<p dir="auto">Type: <code>&#34;Receiver&#34;</code></p>
<h3 tabindex="-1" id="user-content-selectcasepromise" dir="auto"><a href="#selectcasepromise">SelectCasePromise<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Promise (or PromiseLike) select case.</p>
<p dir="auto">Type: {type: <code>&#34;Promise&#34;</code>, selectState: CaseStatePromise&lt;T&gt;}</p>
<h4 tabindex="-1" id="user-content-properties-6" dir="auto"><a href="#properties-6">Properties<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>type</code> <strong><code>&#34;Promise&#34;</code></strong> </li>
<li><code>selectState</code> <strong>CaseStatePromise&lt;T&gt;</strong> </li>
</ul>
<h4 tabindex="-1" id="user-content-type-2" dir="auto"><a href="#type-2">type<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Type is provided to support type guards, and reflection-style logic.</p>
<p dir="auto">Type: <code>&#34;Promise&#34;</code></p>
<h3 tabindex="-1" id="user-content-recv-1" dir="auto"><a href="#recv-1">recv<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Prepares a <a href="#selectcasereceiver">SelectCaseReceiver</a> case, to be used in a <a href="#select">Select</a>.</p>
<p dir="auto">WARNING: Cases may only be used in a single select instance, though select
instances are intended to be reused, e.g. when implementing control loops.</p>
<h4 tabindex="-1" id="user-content-parameters-10" dir="auto"><a href="#parameters-10">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>from</code> <strong>(<a href="#receivable">Receivable</a>&lt;T&gt; | <a href="#receiver">Receiver</a>&lt;T&gt;)</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="#selectcasereceiver">SelectCaseReceiver</a>&lt;T&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-send-1" dir="auto"><a href="#send-1">send<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Prepares a <a href="#selectcasesender">SelectCaseSender</a> case, to be used in a <a href="#select">Select</a>.</p>
<p dir="auto">WARNING: Cases may only be used in a single select instance, though select
instances are intended to be reused, e.g. when implementing control loops.</p>
<h4 tabindex="-1" id="user-content-parameters-11" dir="auto"><a href="#parameters-11">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>to</code> <strong>(<a href="#sendable">Sendable</a>&lt;T&gt; | <a href="#sender">Sender</a>&lt;T&gt;)</strong> Target Sendable or Sender.</li>
<li><code>expr</code> <strong>function (): T</strong> Expression to evaluate when sending. WARNING: Unlike Go, this
is only evaluated when the case is selected, and only for the selected
case. See the project README for more details.</li>
</ul>
<p dir="auto">Returns <strong><a href="#selectcasesender">SelectCaseSender</a>&lt;T&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-wait" dir="auto"><a href="#wait">wait<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Prepares a <a href="#selectcasepromise">SelectCasePromise</a> case, to be used in a <a href="#select">Select</a>.</p>
<p dir="auto">WARNING: Cases may only be used in a single select instance, though select
instances are intended to be reused, e.g. when implementing control loops.</p>
<h4 tabindex="-1" id="user-content-parameters-12" dir="auto"><a href="#parameters-12">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>value</code> <strong>PromiseLike&lt;T&gt;</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="#selectcasepromise">SelectCasePromise</a>&lt;Awaited&lt;T&gt;&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-select" dir="auto"><a href="#select">Select<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Select implements the functionality of Go&#39;s select statement, with support
for support cases comprised of <a href="#sender">Sender</a>, <a href="#receiver">Receiver</a>, or
<a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/PromiseLike">PromiseLike</a>, which are treated as a single-value never-closed
channel.</p>
<p dir="auto">See also <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/promises">promises</a>, which is a convenience method for creating a
select instance with promise cases, or a mix of both promises and other
cases.</p>
<h4 tabindex="-1" id="user-content-parameters-13" dir="auto"><a href="#parameters-13">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li><code>cases</code> <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array" rel="nofollow">Array</a>&lt;(<a href="#selectcase">SelectCase</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a> | any)&gt;</strong> The cases to select from, which
must be initialized using <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/.send">.send</a>, <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/.recv">.recv</a>, unless they are
to be treated as a promise.</li>
</ul>
<h4 tabindex="-1" id="user-content-cases" dir="auto"><a href="#cases">cases<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Retrieves the cases associated with this select instance.</p>
<p dir="auto">Each case corresponds to an input case (including order).
After selecting a case, via <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.poll">Select.poll</a> or <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.wait">Select.wait</a>,
received values may be retrieved by calling <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.recv">Select.recv</a> with the
corresponding case.</p>
<p dir="auto">Type: any</p>
<h5 tabindex="-1" id="user-content-examples" dir="auto"><a href="#examples">Examples<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<p dir="auto">Accessing a (typed) received value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import {recv, Chan, Select} from &#39;ts-chan&#39;;

const ch1 = new Chan&lt;number&gt;();
const ch2 = new Chan&lt;string&gt;();

void sendsToCh1ThenEventuallyClosesIt();
void sendsToCh2();

const select = new Select([recv(ch1), recv(ch2)]);
for (let running = true; running;) {
  const i = await select.wait();
  switch (i) {
  case 0: {
    const v = select.recv(select.cases[i]);
    if (v.done) {
      running = false;
      break;
    }
    console.log(`rounded value: ${Math.round(v.value)}`);
    break;
  }
  case 1: {
    const v = select.recv(select.cases[i]);
    if (v.done) {
      throw new Error(&#39;ch2 unexpectedly closed&#39;);
    }
    console.log(`uppercase string value: ${v.value.toUpperCase()}`);
    break;
  }
  default:
    throw new Error(&#39;unreachable&#39;);
  }
}"><pre><span>import</span> <span>{</span><span>recv</span><span>,</span> <span>Chan</span><span>,</span> <span>Select</span><span>}</span> <span>from</span> <span>&#39;ts-chan&#39;</span><span>;</span>

<span>const</span> <span>ch1</span> <span>=</span> <span>new</span> <span>Chan</span><span>&lt;</span><span>number</span><span>&gt;</span><span>(</span><span>)</span><span>;</span>
<span>const</span> <span>ch2</span> <span>=</span> <span>new</span> <span>Chan</span><span>&lt;</span><span>string</span><span>&gt;</span><span>(</span><span>)</span><span>;</span>

<span>void</span> <span>sendsToCh1ThenEventuallyClosesIt</span><span>(</span><span>)</span><span>;</span>
<span>void</span> <span>sendsToCh2</span><span>(</span><span>)</span><span>;</span>

<span>const</span> <span>select</span> <span>=</span> <span>new</span> <span>Select</span><span>(</span><span>[</span><span>recv</span><span>(</span><span>ch1</span><span>)</span><span>,</span> <span>recv</span><span>(</span><span>ch2</span><span>)</span><span>]</span><span>)</span><span>;</span>
<span>for</span> <span>(</span><span>let</span> <span>running</span> <span>=</span> <span>true</span><span>;</span> <span>running</span><span>;</span><span>)</span> <span>{</span>
  <span>const</span> <span>i</span> <span>=</span> <span>await</span> <span>select</span><span>.</span><span>wait</span><span>(</span><span>)</span><span>;</span>
  <span>switch</span> <span>(</span><span>i</span><span>)</span> <span>{</span>
  <span>case</span> <span>0</span>: <span>{</span>
    <span>const</span> <span>v</span> <span>=</span> <span>select</span><span>.</span><span>recv</span><span>(</span><span>select</span><span>.</span><span>cases</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span>
    <span>if</span> <span>(</span><span>v</span><span>.</span><span>done</span><span>)</span> <span>{</span>
      <span>running</span> <span>=</span> <span>false</span><span>;</span>
      <span>break</span><span>;</span>
    <span>}</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>`rounded value: <span><span>${</span><span>Math</span><span>.</span><span>round</span><span>(</span><span>v</span><span>.</span><span>value</span><span>)</span><span>}</span></span>`</span><span>)</span><span>;</span>
    <span>break</span><span>;</span>
  <span>}</span>
  <span>case</span> <span>1</span>: <span>{</span>
    <span>const</span> <span>v</span> <span>=</span> <span>select</span><span>.</span><span>recv</span><span>(</span><span>select</span><span>.</span><span>cases</span><span>[</span><span>i</span><span>]</span><span>)</span><span>;</span>
    <span>if</span> <span>(</span><span>v</span><span>.</span><span>done</span><span>)</span> <span>{</span>
      <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>&#39;ch2 unexpectedly closed&#39;</span><span>)</span><span>;</span>
    <span>}</span>
    <span>console</span><span>.</span><span>log</span><span>(</span><span>`uppercase string value: <span><span>${</span><span>v</span><span>.</span><span>value</span><span>.</span><span>toUpperCase</span><span>(</span><span>)</span><span>}</span></span>`</span><span>)</span><span>;</span>
    <span>break</span><span>;</span>
  <span>}</span>
  <span>default</span>:
    <span>throw</span> <span>new</span> <span>Error</span><span>(</span><span>&#39;unreachable&#39;</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span></pre></div>
<p dir="auto">Returns <strong>any</strong> T</p>
<h4 tabindex="-1" id="user-content-poll" dir="auto"><a href="#poll">poll<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Poll returns the next case that is ready, or undefined if none are
ready. It must not be called concurrently with <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.wait">Select.wait</a> or
<a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.recv">Select.recv</a>.</p>
<p dir="auto">This is effectively a non-blocking version of <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.wait">Select.wait</a>, and
fills the same role as the <code>default</code> select case, in Go&#39;s select
statement.</p>
<p dir="auto">Returns <strong>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>)</strong> </p>
<h4 tabindex="-1" id="user-content-wait-1" dir="auto"><a href="#wait-1">wait<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Wait returns a promise that will resolve with the index of the next case
that is ready, or reject with the first error.</p>
<h5 tabindex="-1" id="user-content-parameters-14" dir="auto"><a href="#parameters-14">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>abort</code> <strong>AbortSignal?</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a>&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-recv-2" dir="auto"><a href="#recv-2">recv<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Consume the result of a ready case.</p>
<h5 tabindex="-1" id="user-content-parameters-15" dir="auto"><a href="#parameters-15">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>v</code> <strong><a href="#selectcase">SelectCase</a>&lt;T&gt;</strong> </li>
</ul>
<p dir="auto">Returns <strong>IteratorResult&lt;T, (T | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined" rel="nofollow">undefined</a>)&gt;</strong> </p>
<h4 tabindex="-1" id="user-content-promises" dir="auto"><a href="#promises">promises<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Promises is a convenience method for creating a select instance with
promise cases, or a mix of both promises and other cases.</p>
<p dir="auto">Note that the behavior is identical to passing the same array to the
constructor. The constructor&#39;s typing is more strict, to simplify
implementations which encapsulate or construct select instances.</p>
<h5 tabindex="-1" id="user-content-parameters-16" dir="auto"><a href="#parameters-16">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>cases</code> <strong>T</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="#select">Select</a>&lt;any&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-selectfactory" dir="auto"><a href="#selectfactory">SelectFactory<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">A wrapper of <a href="#select">Select</a> that&#39;s intended for use within loops, that
allows the contents of select cases (but not the structure, namely the
direction/type of communication) to be updated, and evaluated as
expressions, in code order.</p>
<p dir="auto">With the caveat that it does not support promises, this is the closest
analogue to Go&#39;s select statement, provided by this module.</p>
<h4 tabindex="-1" id="user-content-clear" dir="auto"><a href="#clear">clear<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">Clears references to values to send, receives and senders, but not the
select cases themselves. Use cases include avoiding retaining references
between iterations of a loop, if such references are not needed, or may
be problematic.</p>
<p dir="auto">WARNING: Must not be called concurrently with <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.wait">Select.wait</a> (on the
underlying instance for this factory). Calling this method then calling
either <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.wait">Select.wait</a> or <a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/Select.poll">Select.poll</a> (prior to another
<a href="http://tinylogger.com/joeycumines/ts-chan/blob/main/with">with</a>) may result in an error.</p>
<h4 tabindex="-1" id="user-content-with" dir="auto"><a href="#with">with<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<p dir="auto">With should be to configure and retrieve (or initialize) the underlying
<a href="#select">Select</a> instance.</p>
<p dir="auto">Must be called with the same number of cases each time, with each case
having the same direction.</p>
<h5 tabindex="-1" id="user-content-parameters-17" dir="auto"><a href="#parameters-17">Parameters<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h5>
<ul dir="auto">
<li><code>cases</code> <strong>T</strong> </li>
</ul>
<p dir="auto">Returns <strong><a href="#select">Select</a>&lt;any&gt;</strong> </p>
<h3 tabindex="-1" id="user-content-getyieldgeneration" dir="auto"><a href="#getyieldgeneration">getYieldGeneration<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Returns the current yield generation. This value is incremented on each
<a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue</a>, which is a self-conflating operation.</p>
<p dir="auto">See <a href="#the-microtask-queue-a-footgun">The microtask queue: a footgun</a>, in the
project README, for details on the purpose of this mechanism.</p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a></strong> </p>
<h3 tabindex="-1" id="user-content-yieldtomacrotaskqueue" dir="auto"><a href="#yieldtomacrotaskqueue">yieldToMacrotaskQueue<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Returns a promise which will resolve on the next iteration of the event
loop. Intended to be used in concert with <a href="#getyieldgeneration">getYieldGeneration</a>, this
mechanism allows implementers to reduce the risk of the &#34;footgun&#34; that the
microtask queue represents.</p>
<p dir="auto">Calls to this function are self-conflating, meaning that if this function is
called multiple times before the next iteration of the event loop, the same
promise will be returned.</p>
<p dir="auto">See <a href="#the-microtask-queue-a-footgun">The microtask queue: a footgun</a>, in the
project README, for details on the purpose of this mechanism.</p>
<p dir="auto">Returns <strong><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="nofollow">Promise</a>&lt;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number" rel="nofollow">number</a>&gt;</strong> </p>
</article>
          </div></div>
  </body>
</html>
