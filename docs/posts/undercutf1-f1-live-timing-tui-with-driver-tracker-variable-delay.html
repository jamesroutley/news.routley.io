<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/JustAman62/undercut-f1">Original</a>
    <h1>Show HN: Undercutf1 – F1 Live Timing TUI with Driver Tracker, Variable Delay</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">

<p dir="auto">undercut-f1 is an open source F1 Live Timing client.</p>
<p dir="auto"><code>undercutf1</code> is a TUI application which uses <code>UndercutF1.Data</code> to show a Live Timing screen during sessions, and records the data for future session replays.
F1 live broadcasts are usually delayed by some undeterminable amount (usually 30-60 seconds), so the TUI allows you to delay the data being displayed so that you can match up what you see on your screen to what you see on your TV.</p>
<p dir="auto">The <code>UndercutF1.Data</code> library is provided to facilitate connectivity with the F1 Live Timing data stream, and handle all the processing of the incoming data. It also allows for &#34;simulated&#34; streams, where previously recorded data streams can be played back to allow for easy development/testing.</p>
<p dir="auto">Feature Highlights:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/race-timing-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/race-timing-screen.png" alt="Timing Tower during a Race"/></a></p>
<ul dir="auto">
<li><a href="#timing-tower-during-a-race">Timing Tower</a> showing for each driver:
<ul dir="auto">
<li>Live sector times, with colouring for personal/overall fastest</li>
<li>Last &amp; Best Lap</li>
<li>Current tyre</li>
<li>Age of current tyre</li>
<li>Interval to driver in front</li>
<li>Gap to leader</li>
<li>Gap <a href="#using-a-cursor-to-display-relative-gap-for-a-specific-driver">between a selected driver</a> and all other drivers (useful for monitoring pit windows)</li>
</ul>
</li>
<li><a href="#tyre-stint--strategy">Pit Stop Strategy</a> gives you at-a-glance information about all the drivers strategies</li>
<li><a href="#race-control-page">Race Control</a> messages including investigations, penalties, lap deletions, and weather</li>
<li><a href="#driver-tracker">Driver Tracker</a> shows the position of selected drivers on a live track map</li>
<li>Lap-by-lap <a href="#using-a-cursor-to-view-timing-history-by-lap">Timing History</a> to observe gaps over time</li>
</ul>


<ul dir="auto">
<li><a href="#inspiration">Inspiration</a></li>
<li><a href="#undercutf1-in-action">UndercutF1 in Action</a>
<ul dir="auto">
<li><a href="#timing-tower-during-a-race">Timing Tower during a Race</a></li>
<li><a href="#using-a-cursor-to-display-relative-gap-for-a-specific-driver">Using a Cursor to Display Relative Gap for a Specific Driver</a></li>
<li><a href="#timing-tower-during-practicequalifying">Timing Tower during Practice/Qualifying</a></li>
<li><a href="#race-control-page">Race Control Page</a></li>
<li><a href="#driver-tracker">Driver Tracker</a></li>
<li><a href="#tyre-stint--strategy">Tyre Stint / Strategy</a></li>
<li><a href="#using-a-cursor-to-view-timing-history-by-lap">Using a Cursor to View Timing History by Lap</a></li>
<li><a href="#listen-to-and-transcribe-team-radio">Listen to and Transcribe Team Radio</a></li>
</ul>
</li>
<li><a href="#getting-started-with-undercutf1">Getting Started with <code>undercutf1</code></a>
<ul dir="auto">
<li><a href="#installation">Installation</a>
<ul dir="auto">
<li><a href="#install-and-run-as-a-dotnet-tool">Install and run as a dotnet tool</a></li>
<li><a href="#install-and-run-the-standalone-executable">Install and run the standalone executable</a></li>
<li><a href="#run-directly-from-source">Run directly from Source</a></li>
</ul>
</li>
<li><a href="#start-timing-for-a-live-session">Start Timing for a Live Session</a></li>
<li><a href="#start-timing-for-a-pre-recorded-session">Start Timing for a Pre-recorded Session</a></li>
<li><a href="#download-a-previous-session-data-for-replay">Download a previous session data for replay</a></li>
<li><a href="#during-the-session">During the Session</a>
<ul dir="auto">
<li><a href="#managing-delay">Managing Delay</a></li>
<li><a href="#using-the-cursor">Using the Cursor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#live-timing-data-source">Live Timing Data Source</a></li>
<li><a href="#data-recording-and-replay">Data Recording and Replay</a></li>
<li><a href="#notice">Notice</a></li>
</ul>

<p dir="auto">This project is heavily inspired by the <a href="https://github.com/theOehrly/Fast-F1">FastF1 project by theOehrly</a>. They did a lot of the work understanding the SignalR stream coming from the F1 Live Timing service. Visit their project if you&#39;d like to do any sort of data analysis on past F1 events, or gather live timing data using their module.</p>

<div dir="auto"><h3 tabindex="-1" dir="auto">Timing Tower during a Race</h3><a id="user-content-timing-tower-during-a-race" aria-label="Permalink: Timing Tower during a Race" href="#timing-tower-during-a-race"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Monitor sector times and gaps, see recent race control messages, capture position changes, observe pit strategies, and more with the standard Timing Tower view.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/race-timing-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/race-timing-screen.png" alt="Timing Tower during a Race"/></a></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Using a Cursor to Display Relative Gap for a Specific Driver</h3><a id="user-content-using-a-cursor-to-display-relative-gap-for-a-specific-driver" aria-label="Permalink: Using a Cursor to Display Relative Gap for a Specific Driver" href="#using-a-cursor-to-display-relative-gap-for-a-specific-driver"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Use the cursor controlled by the <kbd>▼</kbd>/<kbd>▲</kbd> <code>Cursor</code> actions in the <kbd>O</kbd> <code>Timing Tower</code> screen to select a specific driver (in this case Norris) to see the relative interval between that driver and all other. This is useful for determining where a driver will fall to after a pit stop, or looking at pit windows during under cuts.</p>
<p dir="auto">Additionally, the gap between the selected drivers and those around them over the last four laps will be displayed at the bottom of the screen. This allows you to easily see evolving gaps over time and evaluate how soon a driver may catch up or pull away.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/relative-gap-race.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/relative-gap-race.png" alt="Relative gaps for a specific driver"/></a></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Timing Tower during Practice/Qualifying</h3><a id="user-content-timing-tower-during-practicequalifying" aria-label="Permalink: Timing Tower during Practice/Qualifying" href="#timing-tower-during-practicequalifying"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Monitor live/best sector times, gaps, tyres, and lap deletions easily with the specialized timing tower for non-race sessions.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/quali-timing-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/quali-timing-screen.png" alt="Timing Tower during Practice/Qualifying"/></a></p>

<p dir="auto">The <code>Race Control</code> page shows all Race Control Messages for the session, along with other session data such as the Weather.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/race-control-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/race-control-screen.png" alt="Race Control Page"/></a></p>

<p dir="auto">The <code>Driver Tracker</code> page shows a track map overlayed with selected drivers. Use the <kbd>▼</kbd>/<kbd>▲</kbd> <code>Cursor</code> actions to choose drivers, then use the <kbd>⏎</kbd> <code>Toggle Select</code> action to toggle the inclusion of the driver on the track map. The driver under the current cursor position will also be highlighted on the map, and timing gaps will switch to interval between that driver and all other drivers.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/driver-tracker.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/driver-tracker.png" alt="Driver Tracker Page"/></a></p>
<p dir="auto">NOTE: Currently the track map is only supported in the iTerm2 terminal (by implementing the <a href="https://iterm2.com/documentation-images.html" rel="nofollow">iTerm2&#39;s Inline Image Protocol</a>), and terminals which implement the <a href="https://sw.kovidgoyal.net/kitty/graphics-protocol/" rel="nofollow">Kitty Graphics Protocol</a>. Other protocols (such as Sixel) may be supported in the future. If the track map doesn&#39;t work in your terminal, please raise an issue and I will try and fix/implement support.</p>

<p dir="auto">The <code>Tyre Stint</code> page shows the tyre strategy for all the drivers. At a glance, see what tyres the drivers have used, how old they are, and if they are on an offset strategy to any other drivers.</p>
<p dir="auto">Use the <kbd>▼</kbd>/<kbd>▲</kbd> <code>Cursor</code> actions to view more information for a particular drivers strategy.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/tyre-stint-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/tyre-stint-screen.png" alt="Tyre Stint"/></a></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Using a Cursor to View Timing History by Lap</h3><a id="user-content-using-a-cursor-to-view-timing-history-by-lap" aria-label="Permalink: Using a Cursor to View Timing History by Lap" href="#using-a-cursor-to-view-timing-history-by-lap"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In the <code>Timing by Lap</code> page, you can use the cursor controlled by the <kbd>▼</kbd>/<kbd>▲</kbd> <code>Cursor</code> actions to view historical snapshots of the timing tower at the end of every lap. This view will show position changes during that lap, and relative changes in Gap and Interval. Scrolling through laps allows you to build a picture of how the race is unfolding.</p>
<p dir="auto">Charts on the right display how Gap to Leader and Lap Time for all selected drivers over the last 15 laps, letting you see trends and catch strategies unfolding.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/timing-history-screen.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/timing-history-screen.png" alt="Using a Cursor to View Timing History by Lap"/></a></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Listen to and Transcribe Team Radio</h3><a id="user-content-listen-to-and-transcribe-team-radio" aria-label="Permalink: Listen to and Transcribe Team Radio" href="#listen-to-and-transcribe-team-radio"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Listen to team radio clips from anytime in the session, and use a local ML model (Whisper) to transcribe the audio on demand. Transcription accuracy is fairly low, depending on the that days audio quality and driver. Suggestions welcome for improving this!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/JustAman62/undercut-f1/blob/master/docs/screenshots/team-radio.png"><img src="https://github.com/JustAman62/undercut-f1/raw/master/docs/screenshots/team-radio.png" alt="Listen to and Transcribe Team Radio"/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Getting Started with <code>undercutf1</code></h2><a id="user-content-getting-started-with-undercutf1" aria-label="Permalink: Getting Started with undercutf1" href="#getting-started-with-undercutf1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<div dir="auto"><h4 tabindex="-1" dir="auto">Install and run as a dotnet tool</h4><a id="user-content-install-and-run-as-a-dotnet-tool" aria-label="Permalink: Install and run as a dotnet tool" href="#install-and-run-as-a-dotnet-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>undercutf1</code> is available as a <code>dotnet</code> tool from NuGet, which means it can be installed system-wide simply by running:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Install globally using the -g flag
dotnet tool install -g undercutf1

# Assuming the dotnet tools directory is on your path, simply execute undercutf1
undercutf1"><pre><span><span>#</span> Install globally using the -g flag</span>
dotnet tool install -g undercutf1

<span><span>#</span> Assuming the dotnet tools directory is on your path, simply execute undercutf1</span>
undercutf1</pre></div>
<p dir="auto">This method is recommended as it is easy to keep the app updated using <code>dotnet tool update -g undercutf1</code>. You&#39;ll need the .NET 9 SDK installed to use this installation method. If you&#39;d rather not install the SDK, try the <a href="#install-and-run-the-standalone-executable">standalone installation option below</a>.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Install and run the standalone executable</h4><a id="user-content-install-and-run-the-standalone-executable" aria-label="Permalink: Install and run the standalone executable" href="#install-and-run-the-standalone-executable"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Standalone executables are attached to each GitHub release. Download the executable for your system OS/architecture and simply run it directly. The list of artifacts are available on the <a href="https://github.com/JustAman62/undercut-f1/releases/latest">release page for the latest release</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download the latest executable (in this case for osx-arm64)
curl https://github.com/JustAman62/undercut-f1/releases/latest/download/undercutf1-osx-arm64 -o ./undercutf1 -L

# Execute undercutf1 to start the TUI
./undercutf1"><pre><span><span>#</span> Download the latest executable (in this case for osx-arm64)</span>
curl https://github.com/JustAman62/undercut-f1/releases/latest/download/undercutf1-osx-arm64 -o ./undercutf1 -L

<span><span>#</span> Execute undercutf1 to start the TUI</span>
./undercutf1</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Checkout the git repository
git clone git@github.com:JustAman62/undercut-f1.git
cd undercut-f1

# Run the console project with `dotnet run`
dotnet run --project UndercutF1.Console/UndercutF1.Console.csproj"><pre><span><span>#</span> Checkout the git repository</span>
git clone git@github.com:JustAman62/undercut-f1.git
<span>cd</span> undercut-f1

<span><span>#</span> Run the console project with `dotnet run`</span>
dotnet run --project UndercutF1.Console/UndercutF1.Console.csproj</pre></div>
<p dir="auto">By default, data will be saved and read from the <code>~/undercut-f1</code> directory. See <a href="#configuration">Configuration</a> for information on how to configure this.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Start Timing for a Live Session</h3><a id="user-content-start-timing-for-a-live-session" aria-label="Permalink: Start Timing for a Live Session" href="#start-timing-for-a-live-session"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Start <code>undercutf1</code> as described above</li>
<li>Navigate to the <kbd>S</kbd> <code>Session</code> Screen</li>
<li>Start a Live Session with the <kbd>L</kbd> <code>Start Live Session</code> action.</li>
<li>Switch to the Timing Tower screen with the <kbd>T</kbd> <code>Timing Tower</code> action</li>
</ol>
<p dir="auto">During the session, streamed timing data will be written to <code>~/undercut-f1/data/&lt;session-name&gt;</code>. This will allow for <a href="#start-timing-for-a-pre-recorded-session">future replays</a> of this recorded data.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Start Timing for a Pre-recorded Session</h3><a id="user-content-start-timing-for-a-pre-recorded-session" aria-label="Permalink: Start Timing for a Pre-recorded Session" href="#start-timing-for-a-pre-recorded-session"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Data for pre-recorded sessions should be stored in the <code>~/undercut-f1/data/&lt;session-name&gt;</code> directory. Sample data can be found in this repos <a href="https://github.com/JustAman62/undercut-f1/blob/master/Sample%20Data">Sample Data</a> folder. To use this sample data, copy one of the folders to <code>~/undercut-f1/data</code> and then it will be visible in step 4 below.</p>
<ol dir="auto">
<li>
<p dir="auto">OPTIONAL: Download sample data to ~/undercut-f1/data. If you already have data, or have checked out the repository, skip to the next step.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create the directory for the data if it doesn&#39;t exist
mkdir -p ~/undercut-f1/2024_Silverstone_Race

# Download the live and subscribe data files
curl https://raw.githubusercontent.com/JustAman62/undercut-f1/refs/heads/master/Sample%20Data/2024_Silverstone_Race/live.txt -o ~/undercut-f1/2024_Silverstone_Race/live.txt

curl https://raw.githubusercontent.com/JustAman62/undercut-f1/refs/heads/master/Sample%20Data/2024_Silverstone_Race/subscribe.txt -o ~/undercut-f1/2024_Silverstone_Race/subscribe.txt"><pre><span><span>#</span> Create the directory for the data if it doesn&#39;t exist</span>
mkdir -p <span>~</span>/undercut-f1/2024_Silverstone_Race

<span><span>#</span> Download the live and subscribe data files</span>
curl https://raw.githubusercontent.com/JustAman62/undercut-f1/refs/heads/master/Sample%20Data/2024_Silverstone_Race/live.txt -o <span>~</span>/undercut-f1/2024_Silverstone_Race/live.txt

curl https://raw.githubusercontent.com/JustAman62/undercut-f1/refs/heads/master/Sample%20Data/2024_Silverstone_Race/subscribe.txt -o <span>~</span>/undercut-f1/2024_Silverstone_Race/subscribe.txt</pre></div>
</li>
<li>
<p dir="auto">Start <code>undercutf1</code> as described <a href="#installation">above</a></p>
</li>
<li>
<p dir="auto">Navigate to the <kbd>S</kbd> <code>Session</code> Screen</p>
</li>
<li>
<p dir="auto">Start a Simulated Session with the <kbd>F</kbd> <code>Start Simulation</code> action.</p>
</li>
<li>
<p dir="auto">Select the session to start using the Up/Down arrows, then pressing <kbd>Enter</kbd></p>
</li>
<li>
<p dir="auto">Switch to the Timing Tower screen with the <kbd>T</kbd> <code>Timing Tower</code> action</p>
</li>
<li>
<p dir="auto">Optionally skip forward in time a bit by decreasing the delay with <kbd>N</kbd> (or <kbd>⇧ Shift</kbd> + <kbd>N</kbd> to decrease by 30 seconds).</p>
</li>
</ol>
<div dir="auto"><h3 tabindex="-1" dir="auto">Download a previous session data for replay</h3><a id="user-content-download-a-previous-session-data-for-replay" aria-label="Permalink: Download a previous session data for replay" href="#download-a-previous-session-data-for-replay"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">F1 provides static timing data files for already completed sessions. This data can be downloaded and converted into the same format <code>undercutf1</code> uses to save live recorded data. You can then replay the old session using the steps above.</p>
<ol dir="auto">
<li>List the meetings that have data available to import with <code>undercutf1 import &lt;year&gt;</code></li>
<li>Review the list of meetings returned from the command, and list the available sessions inside the chosen meeting with <code>undercutf1 import &lt;year&gt; --meeting-key &lt;meeting-key&gt;</code></li>
<li>Review the list of sessions, and select one to import: <code>undercutf1 import &lt;year&gt; --meeting-key &lt;meeting-key&gt; --session-key &lt;session-key&gt;</code></li>
<li>Data that is imported will be saved to the configured <code>DATA_DIRECTORY</code>. See <a href="#configuration">Configuration</a> for information on how to change this.</li>
</ol>


<p dir="auto">All session data, whether live or pre-recorded, is sent to a <code>Channel</code> that acts as a delayed-queue. After a short delay, data points are pulled from the queue and processed, leading to updates on the timing screens. The amount of this delay can be changed with the <kbd>M</kbd>/<kbd>N</kbd> <code>Delay</code> actions whilst on the timing screens. Hold <kbd>⇧ Shift</kbd> to change the delay by 30 seconds instead of 5. When using <code>undercutf1</code> during a live session, you may wish to increase this delay to around ~50 seconds (actual number may vary) to match with the broadcast delay and avoid being spoiled about upcoming action.</p>
<p dir="auto">Simulated sessions start with a calculated delay equal to the amount of time between the start of the actual session and now. This means you can decrease the delay with the <kbd>N</kbd> <code>Delay</code> action to fast-forward through the session.</p>

<p dir="auto">There is a global cursor that is controlled with the <kbd>▼</kbd>/<kbd>▲</kbd> <code>Cursor</code> actions. What this cursor does depends on the screen, for example is can be used in the Timing Tower screen to scroll through Race Control Messages, or to select a driver on the Tower to see comparative intervals.</p>

<p dir="auto">UndercutF1 can be configured using either a simple <code>config.json</code> file, through the command line at startup, or using environment variables. JSON configuration will be loaded from <code>~/undercut-f1/config.json</code>, if it exists.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>JSON Path</th>
<th>Command Line</th>
<th>Environment Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dataDirectory</code></td>
<td><code>--data-directory</code></td>
<td><code>UNDERCUTF1_DATADIRECTORY</code></td>
<td>The directory in which JSON timing data is read or written from.</td>
</tr>
<tr>
<td><code>verbose</code></td>
<td><code>-v|--verbose</code></td>
<td><code>UNDERCUTF1_VERBOSE</code></td>
<td>Whether verbose logging should be enabled. Default: <code>false</code>. Values: <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><code>apiEnabled</code></td>
<td><code>--with-api</code></td>
<td><code>UNDERCUTF1_APIENABLED</code></td>
<td>Whether the app should expose an API at <a href="http://localhost:61937" rel="nofollow">http://localhost:61937</a>. Default: <code>false</code>. Values: <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><code>notify</code></td>
<td><code>--notify</code></td>
<td><code>UNDERCUTF1_NOTIFY</code></td>
<td>Whether the app should sent audible BELs to your terminal when new race control messages are received. Default: <code>true</code>. Values: <code>true</code> or <code>false</code>.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto"><code>UndercutF1.Data</code> writes logs using the standard <code>ILogger</code> implementation. SignalR client logs are also passed to the standard <code>ILoggerProvider</code>.</p>
<p dir="auto">When running <code>undercutf1</code> logs are available in two places:</p>
<ul dir="auto">
<li>Logs are stored in memory and viewable the <kbd>L</kbd> <code>Logs</code> screen. Logs can be scrolled on this screen, and the minimum level of logs shown can be changed with the <kbd>M</kbd> <code>Minimum Log Level</code> action.</li>
<li>Log files are written to <code>~/undercut-f1/logs</code>.</li>
</ul>
<p dir="auto">Default log level is set to <code>Information</code>. More verbose logging can be enabled with the <a href="#configuration"><code>verbose</code> config option</a>.</p>

<p dir="auto">F1 live timing is streamed using <code>SignalR</code>. The <code>UndercutF1.Data</code> simply connects to this endpoint, subscribes to the data feed, and listens for messages. It subscribes to the following &#34;topics&#34;:</p>
<ul dir="auto">
<li><code>Heartbeat</code></li>
<li><code>ExtrapolatedClock</code></li>
<li><code>TopThree</code></li>
<li><code>TimingStats</code></li>
<li><code>TimingAppData</code></li>
<li><code>WeatherData</code></li>
<li><code>TrackStatus</code></li>
<li><code>DriverList</code></li>
<li><code>RaceControlMessages</code></li>
<li><code>SessionInfo</code></li>
<li><code>SessionData</code></li>
<li><code>LapCount</code></li>
<li><code>TimingData</code></li>
<li><code>CarData.z</code></li>
<li><code>Position.z</code></li>
<li><code>ChampionshipPrediction</code></li>
<li><code>TeamRadio</code></li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Data Recording and Replay</h2><a id="user-content-data-recording-and-replay" aria-label="Permalink: Data Recording and Replay" href="#data-recording-and-replay"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">All events received by the live timing client will be written to the configured <code>Data Directory</code>, see <a href="#configuration">see Configuration for details</a>. Files will be written to a subdirectory named using the current sessions name, e.g. <code>~/undercut-f1/data/Jeddah_Race/</code>. In this directory, two files will be written:</p>
<ul dir="auto">
<li><code>subscribe.txt</code> contains the data received at subscription time (i.e. when the live timing client connected to the stream)</li>
<li><code>live.txt</code> contains an append-log of every message received in the stream</li>
</ul>
<p dir="auto">Both of these files are required for future simulations/replays. The <code>IJsonTimingClient</code> supports loading these files and processing them in the same way live data would be. Data points will be replayed in real time, using an adjustable delay.</p>

<p dir="auto">undercut-f1 is unofficial and are not associated in any way with the Formula 1 companies. F1, FORMULA ONE, FORMULA 1, FIA FORMULA ONE WORLD CHAMPIONSHIP, GRAND PRIX and related marks are trade marks of Formula One Licensing B.V.</p>
</article></div></div>
  </body>
</html>
