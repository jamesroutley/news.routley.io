<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Yifan-Song793/RestGPT">Original</a>
    <h1>RestGPT</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">This is the code for the paper <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">RestGPT: Connecting Large Language Models with Real-World RESTful APIs</a>.</p>
<p dir="auto">This work aims to construct a <strong>large language model based autonomous agent, RestGPT, to control real-world applications</strong>, such as movie database and music player. To achieve this, we connect LLMs with <strong>RESTful APIs</strong> and tackle the practical challenges of planning, API calling, and response parsing. To fully evaluate the performance of RestGPT, we propose <strong>RestBench</strong>, a high-quality test set which consists of two real-world scenarios and human-annotated instructions with gold solution paths.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.veitheller.de/Yifan-Song793/RestGPT/blob/main/imgs/intro.png"><img src="https://blog.veitheller.de/Yifan-Song793/RestGPT/raw/main/imgs/intro.png" alt="intro"/></a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-whats-new" aria-hidden="true" tabindex="-1" href="#whats-new"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What&#39;s New</h2>
<ul dir="auto">
<li><strong>[Next]</strong> The demo is under-construction.</li>
<li><strong>[2023/8/29]</strong> Code for RestGPT is released.</li>
<li><strong>[2023/8/28]</strong> The second version of our <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">paper</a> is released.</li>
<li><strong>[2023/6/13]</strong> Our <a href="https://arxiv.org/abs/2306.06624" rel="nofollow">paper</a> is released.</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-restgpt-1" aria-hidden="true" tabindex="-1" href="#restgpt-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>RestGPT</h2>
<p dir="auto">RestGPT adopts an iterative coarse-to-fine online planning framework and uses an executor to call RESTful APIs. Here is an overview of RestGPT.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.veitheller.de/Yifan-Song793/RestGPT/blob/main/imgs/model.png"><img src="https://blog.veitheller.de/Yifan-Song793/RestGPT/raw/main/imgs/model.png" alt="model"/></a></p>
<p dir="auto">Modules:</p>
<ul dir="auto">
<li>Planner: generating natural language sub-task for current step.</li>
<li>API selector: mapping the coarse high-level sub-task to finer API calling plan.</li>
<li>Executor: executing the API calling plan.
<ul dir="auto">
<li>Caller: organizing API parameters based on the API plan and API documentation.</li>
<li>Parser: generating Python code to parse the API response based on the response schema.</li>
</ul>
</li>
</ul>
<p dir="auto">Here is an example of using TMDB movie database to search for the number of movies directed by Sofia Coppola.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Yifan-Song793/RestGPT/blob/main/imgs/example.gif"><img src="https://github.com/Yifan-Song793/RestGPT/raw/main/imgs/example.gif" alt="example" data-animated-image=""/></a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-data" aria-hidden="true" tabindex="-1" href="#data"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Data</h2>
<p dir="auto">We also introduce RestBench to evaluate the performance of RestGPT. RestBench is a high-quality test set consisting of TMDB movie database and Spotify music player scenarios. We collect realistic user instructions with human-annotated gold solution paths. Here are examples of RestBench:</p>
<p dir="auto">TMDB example:</p>
<ul dir="auto">
<li>Instruction: Who is the director of today&#39;s most trending movie?</li>
<li>Gold solution path
<ul dir="auto">
<li>GET /trending/{media_type}/{time_window}</li>
<li>GET /movie/{movie_id}/credits</li>
</ul>
</li>
</ul>
<p dir="auto">Spotify example:</p>
<ul dir="auto">
<li>Instruction: Make me a playlist containing three songs of Mariah Carey and name it &#39;Love Mariah&#39;.</li>
<li>Gold solution path
<ul dir="auto">
<li>GET /search</li>
<li>GET /me</li>
<li>POST /usres/{user_id}/playlists</li>
<li>POST /playlists/{playlist_id}/tracks</li>
</ul>
</li>
</ul>
<p dir="auto">Below is the statistics of the data. We report the number of instructions with different lengths of solution path:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>#APIs</th>
<th>Len-1</th>
<th>Len-2</th>
<th>Len-3</th>
<th>Len-4</th>
<th>Avg. Len.</th>
<th>Total</th>
</tr>
</thead>
<tbody>
<tr>
<td>TMDB</td>
<td>54</td>
<td>5</td>
<td>66</td>
<td>27</td>
<td>2</td>
<td>2.3</td>
<td>100</td>
</tr>
<tr>
<td>Spotify</td>
<td>40</td>
<td>8</td>
<td>18</td>
<td>22</td>
<td>9</td>
<td>2.6</td>
<td>57</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto"><a id="user-content-setup" aria-hidden="true" tabindex="-1" href="#setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Setup</h2>
<div dir="auto" data-snippet-clipboard-copy-content="pip install langchain colorama tiktoken spotipy openai"><pre>pip install langchain colorama tiktoken spotipy openai</pre></div>
<p dir="auto">create <code>logs</code> folder</p>
<p dir="auto">Get OpenAI key from OpenAI, TMDB key from <a href="https://developer.themoviedb.org/docs/getting-started" rel="nofollow">https://developer.themoviedb.org/docs/getting-started</a>, and Spotify key from <a href="https://developer.spotify.com/documentation/web-api" rel="nofollow">https://developer.spotify.com/documentation/web-api</a></p>
<p dir="auto">Fill in your own key in <code>config.yaml</code></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-optional-initialize-the-spotify-environment" aria-hidden="true" tabindex="-1" href="#optional-initialize-the-spotify-environment"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>(Optional) Initialize the Spotify Environment</h2>
<p dir="auto"><strong>WARNING: this will remove all your data from spotify!</strong></p>

<h2 tabindex="-1" dir="auto"><a id="user-content-run" aria-hidden="true" tabindex="-1" href="#run"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Run</h2>
<p dir="auto">The code can be run using the following command:</p>

<p dir="auto">Then Input the scenario (TMDB/Spotify) and instruction.</p>
<p dir="auto">We also provide two scripts to run RestGPT on RestBench:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# TMDB
python run_tmdb.py

# Spotify, please open Spotify on your device
python run_spotify.py"><pre><span><span>#</span> TMDB</span>
python run_tmdb.py

<span><span>#</span> Spotify, please open Spotify on your device</span>
python run_spotify.py</pre></div>
<p dir="auto"><code>run_tmdb.py</code> will sequentially execute all instructions of RestBench-TMDB. Regarding RestBench-Spotify, you should manually modify the <code>query_idx</code> before executing the instructions.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-citation" aria-hidden="true" tabindex="-1" href="#citation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Citation</h2>
<p dir="auto">If you find this repo useful, please cite us.</p>
<div dir="auto" data-snippet-clipboard-copy-content="@misc{song2023restgpt,
      title={RestGPT: Connecting Large Language Models with Real-World RESTful APIs}, 
      author={Yifan Song and Weimin Xiong and Dawei Zhu and Wenhao Wu and Han Qian and Mingbo Song and Hailiang Huang and Cheng Li and Ke Wang and Rong Yao and Ye Tian and Sujian Li},
      year={2023},
      eprint={2306.06624},
      archivePrefix={arXiv},
      primaryClass={cs.CL}
}"><pre><span>@misc</span>{<span>song2023restgpt</span>,
      <span>title</span>=<span><span>{</span>RestGPT: Connecting Large Language Models with Real-World RESTful APIs<span>}</span></span>, 
      <span>author</span>=<span><span>{</span>Yifan Song and Weimin Xiong and Dawei Zhu and Wenhao Wu and Han Qian and Mingbo Song and Hailiang Huang and Cheng Li and Ke Wang and Rong Yao and Ye Tian and Sujian Li<span>}</span></span>,
      <span>year</span>=<span><span>{</span>2023<span>}</span></span>,
      <span>eprint</span>=<span><span>{</span>2306.06624<span>}</span></span>,
      <span>archivePrefix</span>=<span><span>{</span>arXiv<span>}</span></span>,
      <span>primaryClass</span>=<span><span>{</span>cs.CL<span>}</span></span>
}</pre></div>
</article>
          </div></div>
  </body>
</html>
