<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://retrogamecoders.com/c64-visual-studio-code/">Original</a>
    <h1>Programming the C64 with Visual Studio Code</h1>
    
    <div id="readability-page-1" class="page"><p>Program the Commodore 64 in BASIC, Assembly or C using Microsoft Visual Studio Code on Mac, Windows and Linux!</p><div><p>C64 programmers usually turn to CBM PRG Studio, and I even suggest it as a go-to (heh) in my <a href="https://retrogamecoders.com/commodore64-basic-programming/">C64 BASIC Programming course series</a>, but it is only natively compiled for Windows.</p><p>You can, with some effort, get <a href="https://retrogamecoders.com/cbm-prg-studio-mac-linux-with-wine/">CBM PRG Studio for Mac and Linux using Wine</a>, but that is a lot of time and disk space to expend to get an IDE for a vintage computer working.</p><p>Ideally we would be able to use a familiar, modern, cross-platform IDE.</p><p>Surprise! You can code for the C64, for free, using Microsoft Visual Studio Code!</p><h2 id="h-the-commodore-64-programming-extension-vs64">The Commodore 64 Programming Extension – VS64</h2><p>VS64 is a Visual Studio Code extension for C64 programmers by <a href="https://github.com/rolandshacks">Rolandshacks</a> on Github. It has syntax highlighting, tools and integrations for BASIC, Assembly and C programming.</p><p>At the time of writing it is on <a href="https://github.com/rolandshacks/vs64/releases">version 2.5.3</a> but the best way to install it is through Visual Studio Code itself.</p><p>Simply open VS Code and open the Extensions Marketplace to search for “vs64” and you should fine it right away.</p><div><figure><img decoding="async" width="531" height="333" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-1.png" alt="vs64 extension in visual studio code extensions marketplace" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-1-300x188.png 300w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-1.png 531w" sizes="(max-width: 531px) 100vw, 531px"/><figcaption>vs64 extension in visual studio code extensions marketplace</figcaption></figure></div><p> Once you have found the extension you just need to click the blue <em>Install</em> button.</p><div><figure><img decoding="async" width="457" height="97" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-2.png" alt="Click the blue install button" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-2-300x64.png 300w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-2.png 457w" sizes="(max-width: 457px) 100vw, 457px"/><figcaption>Click the blue install button</figcaption></figure></div><p>If you want to know more about the extension you can browse the page that is available on clicking the extension card. This is all the same information available on the Github page linked earlier.</p><figure><img decoding="async" width="988" height="806" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-3.png" alt="vs64 extension welcome page in visual studio code " data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-3-300x245.png 300w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-3-768x627.png 768w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-3.png 988w" sizes="(max-width: 988px) 100vw, 988px"/><figcaption>vs64 extension welcome page in visual studio code</figcaption></figure><h2 id="h-setting-up-vs64">Setting up VS64</h2><div><figure><img decoding="async" width="188" height="300" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-4-188x300.png" alt="The vs64 setup wizard" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-4-188x300.png 188w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-4.png 478w" sizes="(max-width: 188px) 100vw, 188px"/><figcaption>The vs64 setup wizard</figcaption></figure></div><p>There are three parts to using VS64:</p><ol><li>Installing the required tools (if you are going to be compiling and debugging).</li><li>Configuring the settings to point to your compilers and assemblers.</li><li>Project settings, to tell VSCode how to understand your new project.</li></ol><p>After installing the extension you have an opportunity to go through a setup wizard, but you can always change your settings using the little cog icon on the extensions page within Visual Studio.</p><p>Once the wizard is done you can create a project, and later</p><div><figure><img decoding="async" width="336" height="295" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-5.png" alt="vs64 extension project creation options" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-5-300x263.png 300w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-5.png 336w" sizes="(max-width: 336px) 100vw, 336px"/><figcaption>vs64 extension project creation options</figcaption></figure></div><h3 id="setup">6502 Assembler</h3><p>VS64 supports both <a href="https://sourceforge.net/projects/acme-crossass">ACME</a> and <a href="http://theweb.dk/KickAssembler">Kick</a> assemblers.</p><ul><li>ACME can be installed on Linux using <code>sudo apt install acme</code> and <a href="https://sourceforge.net/projects/acme-crossass">binaries are available on Sourceforge</a>.</li><li>Download KickAssembler from <a href="http://theweb.dk/KickAssembler">theweb.dk/KickAssembler</a>. KickAssembler requires <a href="https://openjdk.org">Java</a>.</li><li>The recommended file extension is <code>.asm</code></li></ul><h3 id="h-c-c-compilers-for-the-c64">C/C++ Compilers for the C64</h3><p>VS64 supports both the CC65 6502 C Compiler and LLVM-MOS C/C++ Compiler</p><ul><li>Download CC65 from <a href="https://cc65.github.io/">cc65.github.io</a></li><li>Install CC65 on Ubuntu/Debian/RaspberryPi with <code>sudo apt install cc65</code></li><li>Download and install LLVM from <a href="https://github.com/llvm-mos/llvm-mos-sdk">github.com/llvm-mos/llvm-mos-sdk</a></li></ul><h2 id="h-vice-c64-emulator-and-6502-debugger">VICE C64 Emulator and 6502 Debugger</h2><p>VS64 supports debugging using the VICE Commodore 64 emulator.</p><ul><li>Install from <a href="https://vice-emu.sourceforge.io">Sourceforge</a>.</li><li>or on Ubuntu/Debian/Raspberry Pi: <code>sudo apt install vice</code></li></ul><h2 id="basic-compiler">Commodore BASIC Integration</h2><p>VS64 supports BASIC natively without anything required to be installed but it has some extra tricks and tools that make the experience better than coding on the C64 itself, outside of the obvious benefit of 80+ column text and syntax highlighting!</p><ul><li>Supports Commodore BASIC V2 <em>and</em> Simon’s BASIC (TSBneo)</li><li>Upper/Lower Case Character Sets</li><li>Auto-Numbering</li><li>Code crunching<ul><li>Removal of spaces</li><li>Line number re-ordering</li><li>Removal of REM statements</li></ul></li></ul><p>My favourite feature, however is being able to use <strong><em>labels</em></strong> instead of line numbers. For example:</p><div><pre title="">label1:    
    A$=&#34;HELLO&#34;    
    PRINT A$    
    GOTO label1
</pre></div><p>Will be converted on the Commodore 64 to:</p><div><pre title="">1 A$=&#34;HELLO&#34;
2 PRINT A$
3 GOTO 1
</pre></div><p>VS64 can bundle binary resources to be referenced by your code (requires Python 3):</p><ul><li>SpritePadPro and SpritePad 1.8.1 file format (.spd)</li><li>CharPad64Pro file format (.ctm)</li><li>SpriteMate file format (.spm)</li><li>SID file format (.sid)</li><li>Raw binary data (.raw)</li></ul><h3 id="petscii-control-characters">PETSCII Control Characters</h3><p>Like in CBM PRG Studio, PETSCII control characters are supported in BASIC via special strings:</p><div><pre title="">PRINT &#34;{clr}HELLO, {green}WORLD{$21}{lightblue}&#34;
</pre></div><p>The following mnemonics are available:</p><p><code>{space}, {return}, {shift-return}, {clr}, {clear}, {home}, {del}, {inst}, {run/stop}, {cursor right}, {crsr right}, {cursor left}, {crsr left}, {cursor down}, {crsr down}, {cursor up}, {crsr dup}, {uppercase}, {upper}, {cset1}, {lowercase}, {lower}, {cset0}, {black}, {blk}, {white}, {wht}, {red}, {cyan}, {cyn}, {purple}, {pur}, {green}, {grn}, {blue}, {blu}, {yellow}, {yel}, {orange}, {brown}, {pink}, {light-red}, {gray1}, {darkgrey}, {grey}, {lightgreen}, {lightblue}, {grey3}, {lightgrey}, {rvs on}, {rvs off}, {f1}, {f3}, {f5}, {f7}, {f2}, {f4}, {f6}, {f8}, {ctrl-c}, {ctrl-e}, {ctrl-h}, {ctrl-i}, {ctrl-m}, {ctrl-n}, {ctrl-r}, {ctrl-s}, {ctrl-t}, {ctrl-q}, {ctrl-1}, {ctrl-2}, {ctrl-3}, {ctrl-4}, {ctrl-5}, {ctrl-6}, {ctrl-7}, {ctrl-8}, {ctrl-9}, {ctrl-0}, {ctrl-/}, {c=1}, {c=2}, {c=3}, {c=4}, {c=5}, {c=6}, {c=7}, {c=8}</code></p><h2 id="h-c64-assembly-example-with-kickassembler">C64 Assembly Example with KickAssembler</h2><p>In a new VSCode window, open your folder where the project will live then select <em>Show All Commands</em> (Shift-CMD/Ctrl-P) and type <code>vs64</code>.</p><p>A list of vs64 options will appear like so:</p><div><figure><img decoding="async" width="329" height="351" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-7.png" alt="vs64 extension project creation options from the search bar" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-7-281x300.png 281w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-7.png 329w" sizes="(max-width: 329px) 100vw, 329px"/></figure></div><p>Now select your chosen project. I will create a KickAssembler project.</p><p>In the <em>Src</em> folder you will find an example main.asm which you can use or clear to start afresh. I will add the code found below …</p><div><pre title="">//
// Hellorld
//
*=$0801
.byte $0c,$08,$b5,$07,$9e,$20,$32,$30,$36,$32,$00,$00,$00
jmp main
hellotext:
    .text &#34;hello, commodore 64!!&#34;
    .byte $0
    .const ofs = 10
main:
    ldy #0
    lda #$00
    sta $d020
    sta $d021
    tax
    lda #$20
loop:   
    sta $0400,x
    sta $0500,x
    sta $0600,x
    sta $0700,x
    dex
    bne loop
hello:
    lda hellotext,y
    beq !loop+
    sta $400+ofs,y
    lda #1
    sta $d800+ofs,y
    iny
    jmp hello
!loop:
    rts
</pre></div><p>Saving the file will automatically run KickAssembler, you simply need to select <em>Run </em>followed by<em> Run and Debug</em>, or click the debug button in the left toolbar, then click the green arrow at the top, to run your new program in Vice!</p><figure><img decoding="async" width="1024" height="633" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-6-1024x633.png" alt="Running a 6502 assembly project in vs64 and vice" data-srcset="https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-6-300x185.png 300w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-6-768x475.png 768w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-6-1024x633.png 1024w, https://retrogamecoders.com/wp-content/uploads/2024/03/Screenshot-by-Dropbox-Capture-6.png 1458w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>Running a 6502 assembly project in vs64 and vice</figcaption></figure> </div></div>
  </body>
</html>
