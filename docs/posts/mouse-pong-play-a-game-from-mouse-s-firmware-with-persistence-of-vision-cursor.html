<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dupontgu/pov_pong_mouse">Original</a>
    <h1>Mouse Pong: play a game from mouse&#39;s firmware with persistence of vision cursor</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A mouse with a game of Pong running inside it&#39;s firmware, rendered on screen by moving the cursor really fast!</p>

<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span aria-label="Video description mouse_pong_720.mov">mouse_pong_720.mov</span>
    <span></span>
  </summary>

  <video src="https://private-user-images.githubusercontent.com/2752047/355965723-f5d2ad66-0942-43ed-bbec-080b894ee467.mov?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjMxNzEyNjIsIm5iZiI6MTcyMzE3MDk2MiwicGF0aCI6Ii8yNzUyMDQ3LzM1NTk2NTcyMy1mNWQyYWQ2Ni0wOTQyLTQzZWQtYmJlYy0wODBiODk0ZWU0NjcubW92P1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MDlUMDIzNjAyWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Njc4NWZkZmJiNWE3NGJhOTczYTUwMDg4MGQzMDBhMWE0MDI3MmM4MTNlNzA5YjAyMzBmMjQ0MjhhZDFhNzRlZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.97aJXKaxcYSY-mEUe_gpZWnSo_7iR5Bv7CM0z0Qkwtc" data-canonical-src="https://private-user-images.githubusercontent.com/2752047/355965723-f5d2ad66-0942-43ed-bbec-080b894ee467.mov?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjMxNzEyNjIsIm5iZiI6MTcyMzE3MDk2MiwicGF0aCI6Ii8yNzUyMDQ3LzM1NTk2NTcyMy1mNWQyYWQ2Ni0wOTQyLTQzZWQtYmJlYy0wODBiODk0ZWU0NjcubW92P1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgwOSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MDlUMDIzNjAyWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Njc4NWZkZmJiNWE3NGJhOTczYTUwMDg4MGQzMDBhMWE0MDI3MmM4MTNlNzA5YjAyMzBmMjQ0MjhhZDFhNzRlZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.97aJXKaxcYSY-mEUe_gpZWnSo_7iR5Bv7CM0z0Qkwtc" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto">Notes:</p>
<ul dir="auto">
<li>The game stops/starts when I <em>click</em> the scroll wheel. Otherwise the mouse acts normally.</li>
<li>The score is rendered after a point is scored by showing the cursor somewhere between the left and right &#34;paddles&#34;. The closer to a given paddle, the more that player is winning by (it&#39;s a ratio). If the cursor is in the middle, the score is tied.</li>
</ul>

<p dir="auto">My code runs on an <a href="https://wiki.seeedstudio.com/XIAO-RP2040/" rel="nofollow">Seeed Studio XIAO RP2040</a> dev board, which - using the magic of <a href="https://docs.tinyusb.org/en/latest/" rel="nofollow">TinyUSB</a> - can act as both a custom USB device <em>and</em> host.  I detached the USB connection from the inside of a cheap HP mouse and fed it into the XIAO&#39;s USB port (this goes to the computer). I then wire up the aux USB connection using the XIAO&#39;s power/GPIO pins, which goes back to the original mouse&#39;s PCB. This creates a USB interceptor that can be programmed to do whatever! Also see my <a href="https://github.com/dupontgu/hidden_agenda_pedal">Mouse/Keyboard effects pedal</a> :P.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dupontgu/pov_pong_mouse/blob/main/.docs/mouse_apart.jpg"><img src="https://github.com/dupontgu/pov_pong_mouse/raw/main/.docs/mouse_apart.jpg"/></a></p>

<p dir="auto">Most modern computer mice using relative positioning - they report <em>changes</em> in their movement. If you move the mouse slowly to the left, it might spit out a bunch of packets where the x component is just -1 (meaning the mouse moved 1 &#34;pixel&#34; to the left). However! It is possible to implement a USB mouse that uses <em>absolute</em> positioning. It can send an exact position on your monitor (percentage X, percentage Y) that the cursor should move to instantly. This is commonly used for touchscreen drivers - you want the cursor to appear where the finger touches the screen.  This firmware emulates an absolute positioning mouse and quickly moves the mouse cursor between points of interest. It moves fast enough that the cursor (kinda) appears in all positions at once and gives the impression that it is in multiple places at once. I have implemented a simple game of Pong to run in the firmware, and set the cursor&#39;s points of interest to be the 2 paddles and the ball while the game is active. So the game runs completely inside the mouse!</p>

<ol dir="auto">
<li>You&#39;ll need hardware! Any RP2040 based board wired up with a second USB port will do, but I recommend Adafruit&#39;s <a href="https://www.adafruit.com/product/5723" rel="nofollow">Feather RP2040 with USB Host</a>.</li>
<li>Follow <a href="https://learn.adafruit.com/adafruit-feather-rp2040-with-usb-type-a-host/arduino-ide-setup" rel="nofollow">Adafruit&#39;s guide</a> for getting set up with the Arduino IDE.</li>
<li>Install the Adafruit TinyUSB Library and the Pico PIO USB Library (again, <a href="https://learn.adafruit.com/adafruit-feather-rp2040-with-usb-type-a-host/usb-host-device-info" rel="nofollow">guide</a>).</li>
<li>Ensure that your USB D+/D- pins are <a href="https://github.com/dupontgu/pov_pong_mouse/blob/main/usbh_helper.h">set correctly</a>.</li>
<li>Build and run!</li>
</ol>
</article></div></div>
  </body>
</html>
