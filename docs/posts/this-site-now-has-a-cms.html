<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://brian.abelson.live/log/2023/11/26/this-site-now-has-a-cms.html">Original</a>
    <h1>This site now has a CMS</h1>
    
    <div id="readability-page-1" class="page"><div>
                            <p>I’ve been trying to use social media less and this site more. The hope is to keep a more thorough, short-form log of stuff I’ve read, watched, made, eaten, thought about, etc. However, since the site is a <a href="https://jekyllrb.com/">Jeykll</a>-backed static site, I previously had to be at my laptop to post a new entry.</p>

<p>While there are more <a href="https://www.siteleaf.com/">sophisticated options</a> for managing Jekyll sites, I really just wanted to simple webform to post a new entry which I could access from my phone.</p>

<p>After a few hours of hacking, I put together a simple <a href="https://fastapi.tiangolo.com/">FastAPI</a> endpoint which performs the following operations:</p>

<ul>
  <li>Accepts a title, list of categories, post body, an image or video, and an API key for security.</li>
  <li>Pulls the latest version of <a href="https://gitlab.com/abelsonlive/brian.abelson.live">this site’s repo</a> from GitLab.</li>
  <li>Resizes the image and/or video using <strong>ffmpeg</strong></li>
  <li>Generates a jekyll-formatted markdown file and writes it to the appropriate directory.</li>
  <li>Commits the changes and pushes them back to GitLab.</li>
</ul>

<p>Since this site uses <a href="https://docs.gitlab.com/ee/ci/">GitLab CI</a> to publish new changes, the new post shows up in 1-2 minutes.</p>

<p>Some things I’d like to add in the future:</p>

<ul>
  <li>Auto-dithering of images to reduce page size like <a href="https://solar.lowtechmagazine.com/2023/06/rebuilding-a-solar-powered-website/">lowtech magazine</a>. (On the note of reducing page size, there’s some pretty minimal Javascript running that uses JQuery which I could probably scrap).</li>
  <li>Add an “edit” button to each log entry so I can fix typos, or even have log entries that grow over time.</li>
  <li>Some sort of comment-via-email functionality? (this is half-baked).</li>
</ul>

<p>You can check out the form <a href="https://brian.abelson.live/cms/">here</a> and the source code <a href="https://gitlab.com/abelsonlive/brian.abelson.live/-/tree/main/cms">here</a>.</p>

                        </div></div>
  </body>
</html>
