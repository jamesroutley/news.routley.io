<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://discourse.haskell.org/t/ghc-9-4-1-is-now-available/4901">Original</a>
    <h1>GHC 9.4.1 is now available</h1>
    
    <div id="readability-page-1" class="page"><div id="main-outlet">
        

  


      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          


          <p><span>
              <time itemprop="datePublished" datetime="2022-08-07T21:28:29Z">
                August 7, 2022,  9:28pm
              </time>
              <meta itemprop="dateModified" content="2022-08-07T21:28:29Z"/>
          <span itemprop="position">#1</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>The GHC developers are very pleased to announce the availability of GHC</p>
<p>This release includes:</p>
<ul>
<li>
<p>A new profiling mode, <code>-fprof-late</code>, which adds automatic cost-center</p>
</li>
<li>
<p>A variety of plugin improvements including the introduction of a new</p>
</li>
<li>
<p>An improved constructed product result analysis, allowing unboxing of</p>
</li>
<li>
<p>Introduction of a tag-check elision optimisation, bringing</p>
</li>
<li>
<p>Generalisation of a variety of primitive types to be levity</p>
</li>
<li>
<p>Introduction of the <code>\cases</code> syntax from <a href="https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0302-cases.rst">GHC proposal 0302</a>.</p>
</li>
<li>
<p>A complete overhaul of GHC’s Windows support. This includes a</p>
</li>
<li>
<p>Support for multiple home packages, significantly improving support</p>
</li>
<li>
<p>A refactoring of GHC’s error message infrastructure, allowing GHC to</p>
</li>
<li>
<p>Significant compile-time improvements to runtime and memory consumption.</p>
</li>
<li>
<p>On overhaul of our packaging infrastructure, allowing full</p>
</li>
<li>
<p>Reintroduction of deep subsumption (which was previously dropped with the</p>
</li>
<li>
<p>… and much more. See the <a href="https://downloads.haskell.org/~ghc/9.4.1/docs/users_guide/9.4.1-notes.html">release notes</a> for a full accounting.</p>
</li>
</ul>
<p>Note that, as 9.4.1 is the first release for which the released artifacts will</p>
<p>We would like to thank Microsoft Azure, GitHub, IOG, the Zw3rk stake pool,</p>
<p>As always, do give this release a try and open a <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/new">ticket</a> if you see</p>
<p>Happy testing,</p>
<ul>
<li>Ben</li>
</ul>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>
          <meta itemprop="keywords" content=""/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discourse.haskell.org/u/jaror"><span itemprop="name">jaror</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2022-08-07T21:39:33Z">
                August 7, 2022,  9:39pm
              </time>
              <meta itemprop="dateModified" content="2022-08-07T21:39:33Z"/>
          <span itemprop="position">#2</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>Might this release be related to this issue I just reported?</p>


        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>The aarch64-darwin seems to install some of the symlinks a bit wrong (I don’t think this is just ghcup!):</p>
<pre><code>vanessa@Vanessas-Air bin % ./ghc-9.4.1
zsh: permission denied: ./ghc-9.4.1

vanessa@Vanessas-Air bin % file ghc-9.4.1
ghc-9.4.1: ASCII text
</code></pre>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <blockquote>
<p>The aarch64-darwin seems to install some of the symlinks a bit wrong (I don’t think this is just ghcup!):</p>
</blockquote>
<p>Sigh, indeed, I can reproduce this and it does look wrong. It appears that Darwin’s <code>cp -P</code> behaves differently from the same from <code>coreutils</code>. Bizarrely, it appears that one must pass <code>cp -RP</code> to reproduce the standard semantics.</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Yes, it appears that BSD and <code>coreutils</code> differ in their behavior here; clearly we need to improve our testing coverage of the wrapper scripts.</p>
<p>I have fixed this issue in <a href="https://gitlab.haskell.org/ghc/ghc/-/merge_requests/8789">!8789</a>. Needless to say, we will need to put out a 9.4.2 quite soon. In the meantime, BSD users can patch the binary distribution with,</p>
<pre><code>--- Makefile.old        2022-08-07 18:26:32.288968006 -0400
+++ Makefile    2022-08-07 18:26:44.505988585 -0400
@@ -40,7 +40,7 @@
 define installscript
        echo &#34;installscript $1 -&gt; $2&#34;
        @if [ -L &#39;wrappers/$1&#39; ]; then                \
-               $(CP) -P &#39;wrappers/$1&#39; &#39;$2&#39; ;             \
+               $(CP) -RP &#39;wrappers/$1&#39; &#39;$2&#39; ;            \
        else                                                                      \
                rm -f &#39;$2&#39; &amp;&amp;                                 \
                $(CREATE_SCRIPT) &#39;$2&#39; &amp;&amp;                  \

</code></pre>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Hi, couple of small things I note:</p>
<ol>
<li>Previous releases contained a directory <code>ghc-9.2.4</code> in the archive. 9.4.1 instead has something like <code>ghc-9.4.1-x86_64-unknown-linux</code> for <code>ghc-9.4.1-x86_64-deb10-linux.tar.xz</code>. Unsure if this is a deliberate change.</li>
<li>It seems that deb11 is supported for <code>x86_64</code> but there is no <code>aarch64</code> release. Can we expect <code>aarch64</code> deb11 support to appear at some point?</li>
</ol>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>So there’s no automatic testing of bindists?</p>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          
<p>This is a result of the switch to Hadrian.</p>

<p>Sure, I can add this configuration.</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          
<p>There is indeed automatic testing of bindists in every CI job. However, this particular issue was not caught because we used <code>coreutils</code>  in our Darwin testing environment rather than Darwin’s native BSD tools. This is being fixed.</p>
<p>For the record, this issue is being tracked as <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/21974">GHC #21974</a>.</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>This sounds like only a limited number of people are affected (those that haven’t installed coreutils via brew)?</p>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>Hackage documentation index for <a href="https://hackage.haskell.org/package/base-4.17.0.0">base-4.17.0.0</a> seems broken. Pressing <kbd>s</kbd> doesn’t open the quick-jump search box. Though, it works with <a href="https://hackage.haskell.org/package/base-4.16.3.0">base-4.16.3.0</a>.</p>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          
<p>Hmm, that is indeed mysterious. Can you open a ticket?</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>That is to some extent true; I’d imagine there are quite a few Darwin users who are using <code>coreutils</code>, although we certainly can’t depend upon this fact.</p>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Congrats on the release!</p>
<p>Can I help/pester <code>ghcup install ghc 9.4.1</code> to happen? Is ghcup maintained by the GHC team?</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <p>It’s maintained by <a href="https://discourse.haskell.org/u/hasufell">@hasufell</a> although we do try to work with him to ensure it’s well-supported. Unfortunately, the Darwin bindist issue mentioned above complicates matters.</p>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        <div>
          
          <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            <a itemprop="url" href="https://discourse.haskell.org/u/jaror"><span itemprop="name">jaror</span></a>
            
          </span></p>


          <p><span>
              <time itemprop="datePublished" datetime="2022-08-08T19:15:56Z">
                August 8, 2022,  7:15pm
              </time>
              <meta itemprop="dateModified" content="2022-08-08T19:15:56Z"/>
          <span itemprop="position">#18</span>
          </span>
        </p></div>
        <div itemprop="articleBody">
          <p>You can install 9.4.1 already as a custom bindist, see  <a href="https://www.haskell.org/ghcup/guide/#installing-custom-bindists">the GHCup user guide page on installing custom bindists</a> and <a href="https://www.haskell.org/ghc/download_ghc_9_4_1.html#binaries">the list of GHC binaries</a>, e.g.:</p>
<pre><code>ghcup install ghc -u &#39;https://downloads.haskell.org/~ghc/9.4.1/ghc-9.4.1-x86_64-deb11-linux.tar.xz&#39; 9.4.1
</code></pre>
<p>That is for the Debian 11 bindist, but should also work on some other Linux distributions.</p>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>
      
      <div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
        
        <div itemprop="articleBody">
          <p>Why does: “ghcup install ghc”</p>
<h2>
<a name="also-i-did-a-ghcup-install-ghc-941-and-it-seemed-to-do-it-but-then-running-ghc-version-still-gives-8102-it-seems-i-must-manually-edit-the-path-in-the-environment-1" href="#also-i-did-a-ghcup-install-ghc-941-and-it-seemed-to-do-it-but-then-running-ghc-version-still-gives-8102-it-seems-i-must-manually-edit-the-path-in-the-environment-1"></a>Also; I did a “ghcup install ghc 9.4.1” and it seemed to do it, but then running “ghc --version” still gives 8.10.2 , it seems I must manually edit the $PATH in the environment?</h2>
        </div>

        <meta itemprop="headline" content="GHC 9.4.1 is now available!"/>

        

         

      </div>

    





    </div></div>
  </body>
</html>
