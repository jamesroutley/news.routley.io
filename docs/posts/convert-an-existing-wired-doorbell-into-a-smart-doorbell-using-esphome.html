<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://frenck.dev/diy-smart-doorbell-for-just-2-dollar/">Original</a>
    <h1>Convert an existing wired doorbell into a smart doorbell using ESPHome</h1>
    
    <div id="readability-page-1" class="page"><div><article id="post-364"><div><p>This article is going to show you how to convert your (existing) wired doorbell (also works for battery-powered chimes) into a smart, WiFi-enabled, doorbell. The essential components needed sets you back about <strong>$2</strong>, yes, that is correct, just two bucks. <strong>No soldering is required</strong> and you don’t have to be an electronics expert.</p><figure><img fetchpriority="high" decoding="async" width="1024" height="512" src="https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-1024x512.png" alt="Photo of the resulting DIY Smart Doorbell on my test bench" srcset="https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench.png 1024w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-300x150.png 300w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-768x384.png 768w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-720x360.png 720w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-580x290.png 580w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-320x160.png 320w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-800x400.png 800w, https://frenck.dev/wp-content/uploads/2019/08/diy-smart-doorbell-test-bench-600x300.png 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption><em>The result of this DIY Smart Doorbell project on my test bench, ready to be installed</em></figcaption></figure><p>Integrating your doorbell into your smart home is a very logical step to take. Making your doorbell smart, allows you to do cool things with it, for example:</p><ul><li>Turn the chime/bell off after a specific time, when the kids or you went to bed. Also, turn it on again in the morning.</li><li>Send out push notifications to your phone/tv/watch/smart speaker, on the doorbell button push.</li><li>Take a snapshot from a front door camera, on the doorbell button push.</li><li>Stream your front door camera to your TV, on the doorbell button push.</li><li>Ring the doorbell continuously in case of an emergency (e.g., smoke detectors triggered).</li></ul><p>I have provided some of these automations for Home Assistant, as an example, at the end of this article.</p><p>The method I provide is, of course, not the only solution. However, I guarantee it is the cheapest out there and a great way to get into DIY. The feeling of having it made yourself is satisfactory beyond any other solution.</p><p>Are you curious yet?</p><h2 id="0-how-does-a-doorbell-work-before-and-after">How does a doorbell work; Before and after.</h2><p>Before we start doing anything, let’s take a quick look at how a wired doorbell works. For this article, I am going to assume a wired and AC powered doorbell. However, battery-powered chimes are not that different, and I’ll provide instructions for that as well.</p><figure><img decoding="async" width="1024" height="512" src="https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-1024x512.png" alt="Shows a regular doorbell circuit/wiring schema" srcset="https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema.png 1024w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-300x150.png 300w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-768x384.png 768w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-720x360.png 720w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-580x290.png 580w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-320x160.png 320w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-800x400.png 800w, https://frenck.dev/wp-content/uploads/2019/08/regular-doorbell-wiring-schema-600x300.png 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>Regular doorbell circuit schema</figcaption></figure><p>A pretty standard doorbell set up has a power supply, hooked up directly to the chime. Prevent the doorbell chime going continuously, the circuit is interrupted by the doorbell button, which acts as a switch. The circuit is only active/complete when the doorbell button is pushed. Hence, your chime turns on when someone pushes the doorbell button.</p><figure><img decoding="async" width="1024" height="512" src="https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-1024x512.png" alt="Shows an circuit/wiring schema for the DIY Smart doorbell" srcset="https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema.png 1024w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-300x150.png 300w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-768x384.png 768w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-720x360.png 720w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-580x290.png 580w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-320x160.png 320w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-800x400.png 800w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-600x300.png 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>DIY Smart doorbell circuit schema</figcaption></figure><p>The image above should give you an idea of the result of this article. Basically, you are going to split your doorbell circuit into two separate circuits. One circuit detects the doorbell button push; the other circuit controls the chime. This split allows for controlling those separately, e.g., detecting a doorbell push from Home Assistant, without activating the chime.</p><p>The device we are using is going to act as a sensor for the doorbell button push, and acts as a switch for the chime. Effectively, we are moving the activation of the chime from the doorbell button, to the new device. Our new device needs power, and since the one used consumes 5 volts. Any old USB phone charger you have, does the job just fine.</p><h2 id="1-smart-doorbell-stuff-youll-need">Smart doorbell stuff you’ll need</h2><p>To achieve this, you need some “stuff”. The $2 price tag is based on the actual device we are going to create, however, if you don’t have some of the needed tools, that would raise the total price. Nevertheless, the additional stuff is really cheap and are things that, in my humble opinion, every DIY home automator should have in their toolbox (for future projects).</p><p>Based on the country you are in, additional shipping costs may apply. I live in the Netherlands, and I’ve paid 1,80EUR in total, including shipping. Checking out the different sites for the right price helps. I’ve noticed the prices for these little boards vary, but getting it for around $2 is doable.</p><h3 id="2-the-main-components">The main components</h3><p>This project consists of just 2 parts. An ESP8266-based chip called the ESP-01S and a small board with a relay on it.</p><div id="ub_feature_box_0c870d0b-ced3-49fc-bf45-3ca5c48b54a4"><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/esp-01s.png" alt="Product image of the ESP-01S chip"/></p><p><a href="https://frenck.link/esp-01s-relay" target="_blank" rel="noreferrer noopener" aria-label="ESP-01S (opens in a new tab)">ESP-01S</a></p><p><em>The ESP-01S is one of the smallest WiFi boards available, that works ESPHome and Home Assistant.</em><br/></p></div><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/esp-01s-relay-module.png" alt="Product image of the ESP-01(s) relay module board"/></p><p><a href="https://frenck.link/esp-01s-relay" target="_blank" rel="noreferrer noopener" aria-label="Relay module (opens in a new tab)">Relay module</a></p><p><em>This relay module board for the ESP-01(S), It comes pre-soldered, and the ESP will just slide on top of it.</em></p></div></div><p>The nice thing about these two is that they fit together, are pre-soldered and often sold together. There is also another version of the ESP chip, without the <strong>S</strong>, the ESP-01. That chip is viable for use as well, however, the ESP-01S is an improved version and has double the amount of memory. Since the price difference is just a couple of cents, I would highly recommend getting the <strong>S</strong> version.</p><p>The board needs to be powered and requires 5 Volts. Lucky, most phone chargers provide those and I’m sure most of you have an old one around you could use.</p><p>That brings me to the shopping list of the main components needed:</p><ul><li><a href="https://frenck.link/esp-01s-relay" target="_blank" rel="noreferrer noopener" aria-label="An ESP-01S (opens in a new tab)">An ESP-01S</a></li><li><a href="https://frenck.link/esp-01s-relay" target="_blank" rel="noreferrer noopener" aria-label="The relay module board for the ESP-01(S) (opens in a new tab)">The relay module board for the ESP-01(S)</a></li><li>An old phone charger, delivering 5 Volts</li></ul><h3 id="3-other-tools-and-hardware">Other tools and hardware</h3><p>Besides the main components, you’ll need some other things for building it as well. Without a doubt, you need some screwdrivers and a wire stripper. A pair of tweezers can also help put wires to place, and for modifying to the board later on.</p><p>The ESP01-S chip needs to be programmed. To do that, you’ll need an FTDI adapter. If you have ever flashed ESP chips before (e.g., SonOff switches), you probably already have one. If not, you should get one! It is an essential tool to have when you are into home automation.</p><div id="ub_feature_box_f29635ce-6792-4a29-8b0b-bbf5cbd7ff56"><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/ftdi.png" alt="Product image of an FTDI adapter"/></p><p><a href="https://frenck.link/ftdi" target="_blank" rel="noreferrer noopener" aria-label="FTDI Adapter (opens in a new tab)">FTDI Adapter</a></p><p><em>An FT232RL FTDI USB To serial converter adapter is a must a have</em></p></div></div><p>Additionally, some wire is needed. I always have a bunch of Dupont cables in stock. They are really helpful in many many projects I’ve done. It allows you to wire up prototypes really quickly as well.</p><div id="ub_feature_box_81af68ae-6eb7-4909-952a-e05f03dc75f8"><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/dupont.png" alt="Product image showing a bunch of Dupont wires"/></p><p><a href="https://frenck.link/dupont" target="_blank" rel="noreferrer noopener" aria-label="Dupont wires (opens in a new tab)">Dupont wires</a></p><p><em>Having a collection of Dupont wires with different male/female connector combinations, is useful to have around. It allows for quick DIY prototypes, but useful in final projects as well.</em></p></div><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/dupont-crimper.png" alt="Product image of a Dupont crimper set"/></p><p><a href="https://frenck.link/dupont-crimper" target="_blank" rel="noreferrer noopener" aria-label="Dupont crimper (opens in a new tab)">Dupont crimper</a></p><p><em>Alternatively, create your own Dupont wires using a wire crimper. It is way more flexible compared to pre-made wires.</em></p></div></div><p>Depending on where you are going to place the smart doorbell, you might be need a case as well. The resulting board is pretty small. Maybe it can already fit one of your electrical boxes. Another option is getting a small project box online, like this one:</p><div id="ub_feature_box_45fcedc7-f988-4090-b23c-581dc1fa06b7"><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/doorbell-project-box.png" alt="Product image showing a small project box"/></p><p><a href="https://frenck.link/projectbox-small" target="_blank" rel="noreferrer noopener" aria-label=" (opens in a new tab)">Small project box</a></p><p><em>Small project boxes really finish a DIY project and make them look slick while protecting the electronics as well. For this project, a small box like this does the trick.</em></p></div></div><h3 id="4-needed-software">Needed software</h3><p>Obviously, you need some software to pull this off. All software used is open source and free for you to use.</p><ul><li><a href="https://frenck.link/homeassistant" target="_blank" rel="noreferrer noopener" aria-label="Home Assistant (opens in a new tab)">Home Assistant</a></li><li><a href="https://frenck.link/esphome" target="_blank" rel="noreferrer noopener" aria-label="ESPHome (opens in a new tab)">ESPHome</a></li><li><a href="https://frenck.link/esphomeflasher" target="_blank" rel="noreferrer noopener" aria-label="ESPHome Flasher (opens in a new tab)">ESPHome Flasher</a></li></ul><p>Home Assistant is my home automation hub of choice, and for this guide, I assume you are using it as well. However, this project can be used on other hubs as well (like Domoticz or OpenHAB). I’ve added a section at the end of the article for more information about this.</p><h2 id="5-modifying-to-the-esp-01s-chip">Modifying to the ESP-01S chip</h2><p>To make this setup work, you would have to make a small modification to the ESP-01S chip. Reason for this modification is that you have to free up an additional pin for connecting your doorbell button. These input/output pins, are called GPIO pins.</p><p>The ESP-01S has two GPIO pins available. Using the relay board, one of the GPIO pins is wired to the relay, the other is wired to a reset mechanism. Without this modification, a doorbell button push would result in a reset/restart of the chip, which of course, isn’t what we want.</p><p>Don’t worry, this modification is easy. We need to bend the GPIO2 pin from the ESP-01S. This allows you to access the pin for connecting the doorbell button, while disconnecting it from the relay board.</p><figure><p> <iframe data-placeholder-image="https://frenck.dev/wp-content/uploads/complianz/placeholders/youtubemS42qXhejKs-maxresdefault.webp" data-category="marketing" data-service="youtube" data-cmplz-target="src" data-src-cmplz="https://www.youtube.com/embed/mS42qXhejKs?feature=oembed" data-deferlazy="1" title="Freeing up GPIO-2 on a ESP-01S by bending the pin" width="720" height="405" src="about:blank" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></p></figure><p>The lost reset functionality is later be restored via a software switch in ESPHome. Furthermore, the reset button on the side of the relay board isn’t affected by this and keeps working as a reset button as well.</p><h2 id="6-flashing-the-firmware-on-the-chip">Flashing the firmware on the chip</h2><p>This project uses ESPHome to create firmware for the ESP-01S chip. I’m not going to make a full tutorial on how to set up ESPHome since that is really well covered on their website. So, before continuing, make sure you’ve set up ESPHome.</p><ul><li><a href="https://esphome.io/guides/getting_started_hassio.html" target="_blank" rel="noreferrer noopener" aria-label="Getting Started with ESPHome (opens in a new tab)">Getting Started with ESPHome</a> (for Hass.io users)</li><li><a href="https://esphome.io/guides/getting_started_command_line.html" target="_blank" rel="noreferrer noopener" aria-label="Getting Started with ESPHome (opens in a new tab)">Getting Started with ESPHome</a> (when not on Hass.io)</li></ul><div id="ub-notification-box-block-b6b0f61f-1527-4b6c-b444-a1daec8f4796"><p>For the rest of this guide, I’m going to assume you are running Hass.io. However, the ESPHome getting started guide for non-Hass.io users is extremely detailed, and you should be able to adapt easily.</p></div><h3 id="7-creating-building-and-downloading-the-firmware">Creating, building and downloading the firmware</h3><p>Create a file called <code>doorbell.yaml</code>; for Hass.io users, create the file in the <code>/config/esphome</code> folder, so you end up with the file: <code>/config/esphome/doorbell.yaml</code>.</p><p>Next, add the following contents to the file:</p><p>The above file shows a ESPHome project definition; the ESPHome project code, or also referred to as ESPHome YAML. The code describes the firmware allowing ESPHome to generate it. I’ve have tried to add as much additional text as possible to the above, to help you understand how it works.</p><p>On line 9 &amp; 10, make sure to set your WiFi details or else you might end up with failures. Save the file and open up the ESPHome web interface; The doorbell project should appear!</p><p>Now, you should be able to validate, build and download the firmware from ESPHome. Let me show you a screen recording on how that works:</p><figure><img loading="lazy" decoding="async" width="967" height="513" src="https://frenck.dev/wp-content/uploads/2019/08/ephome-doorbell-validate-compile-download.gif" alt="Animation on how to validate, compile and download ESPHome firmware"/><figcaption>Doorbell ESPHome: Validate, compile and download</figcaption></figure><h3 id="8-uploading-the-firmware-to-the-esp-01s-chip">Uploading the firmware to the ESP-01S chip</h3><div><figure><img loading="lazy" decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/flashing-esp-01s-1024x512.png" alt="Image shows my ESP-01S being flashes for the smart doorbell" width="334" height="169"/><figcaption>Flashing my ESP-01S for the smart doorbell</figcaption></figure></div><p>Now you have the firmware (the downloaded <code>doorbell.bin</code>), you can start putting it onto the ESP-01S chip for use. This flashing procedure is the hardest part, and if you are new to this, please have some patience, it might need a couple of tries for you get it right.</p><p>Start with wiring up the ESP-01S chip to the FTDI adapter, using some Dupont wires. Don’t freak out now, we only need to do this once. Once you’ve flashed the chip, future flashing/upgrades can be done Over-the-Air (OTA) via WiFi. Wire the FTDI &amp; ESP-01S according to the following wire schematic:</p><figure><img loading="lazy" decoding="async" width="1024" height="512" src="https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-1024x512.png" alt="Illustrates how to wire an FTDI adapter to an ESP-01S chip." srcset="https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema.png 1024w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-300x150.png 300w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-768x384.png 768w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-720x360.png 720w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-580x290.png 580w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-320x160.png 320w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-800x400.png 800w, https://frenck.dev/wp-content/uploads/2019/08/FTDI-ESP-01S-wiring-schema-600x300.png 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>FTDI to ESP-01S Wiring Schema</figcaption></figure><div id="ub-notification-box-block-589d6e90-355d-4fc4-840a-a09bdfb31475"><p>Make sure to double-check the wiring and set the FTDI to 3.3V. Even if you are an experienced flasher of ESP chips, please note, the VCC/3.3V and ground wires being double wired! Although, I’ve used a very common FTDI board in this schema, your FTDI might look different, ensure you wiring up correctly by verifying the names on your board.</p></div><p>Ready to flash? Good!</p><p>Plugin the FTDI adapter to your PC, and start-up the ESPHome Flasher tool. Yes, I know, it is possible to flash directly from ESPHome itself, however, if you are like me: I don’t have the machine running Home Assistant near my desk. Furthermore, it can be quite a challenge for people running Hass.io on a virtual machine. The ESPHome Flasher is easy to use and just works from your desktop.</p><p>Select the available serial port, and load the downloaded <code>doorbell.bin</code> file, by clicking the “Browse” button. Start the flash procedure by clicking the “Flash ESP” button. The console shows you the progress and tells you when it finishes.</p><div><figure><img loading="lazy" decoding="async" width="620" height="577" src="https://frenck.dev/wp-content/uploads/2019/08/esphome-flasher.gif" alt="Animation on how to flash firmware using the ESPHome Flasher"/><figcaption>Flashing firmware using the ESPHome Flasher</figcaption></figure></div><p>If this process fails, please make sure to check your wiring. A common mistake is mixing up the TX/RX wires between the FTDI &amp; the ESP-01S. They should be cross-connected (TX -&gt; RX, RX -&gt; TX).</p><h2 id="9-installing-and-wiring-your-smart-doorbell">Installing and wiring your smart doorbell</h2><p>Time to install your newly created smart doorbell. The following schema helps you to connect the wires correctly.</p><figure><img loading="lazy" decoding="async" width="1024" height="512" src="https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-1024x512.png" alt="This image shows how to wire up your smart DIY doorbell." srcset="https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer.png 1024w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-300x150.png 300w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-768x384.png 768w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-720x360.png 720w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-580x290.png 580w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-320x160.png 320w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-800x400.png 800w, https://frenck.dev/wp-content/uploads/2019/08/diy-doorbell-wiring-schema-transformer-600x300.png 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>DIY Doorbell Wiring Guide</figcaption></figure><p>Please note, how the ground wire from the phone charger is shared with the push button. To hook up the push button to the bent GPIO-2 pin, I recommend using a Dupont wire, since you can slide it right onto the pin in that pretty tight space.</p><div><figure><img loading="lazy" decoding="async" width="1024" height="668" src="https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-1024x668.jpg" alt="Photo of GPIO-2 wired with a Dupont wire" srcset="https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-1024x668.jpg 1024w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-300x196.jpg 300w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-768x501.jpg 768w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire.jpg 1920w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-720x470.jpg 720w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-580x378.jpg 580w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-320x209.jpg 320w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-800x522.jpg 800w, https://frenck.dev/wp-content/uploads/2019/08/gpio2-dupont-wire-600x391.jpg 600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption><em>Wiring the GPIO-2 pin with a Dupont wire</em></figcaption></figure></div><p>If your chime is a battery-powered one, the schema does not differ that much. Just act like the transformer is not in the above image. The two connections from the battery-powered chime, connect directly connect to the board (to the <code>COM</code> and <code>NO</code> labeled ports).</p><p>Done? Awesome! Pushing the doorbell button should now ring the chime already! So basically, you’ve now ended up with what you had already…</p><p>Now you can continue to configure your smart doorbell in Home Assistant, let the fun begin!</p><h2 id="10-integrating-with-home-assistant">Integrating with Home Assistant</h2><p>Welcome to the easier part of this guide. Integrating your new, self-created, smart doorbell with Home Assistant. Home Assistant will discovery it automatically. The only thing you need to do is to activate it and unlock a bunch of new entities for you to play with.</p><p>This screen recording shows how that works:</p><figure><img loading="lazy" decoding="async" width="935" height="537" src="https://frenck.dev/wp-content/uploads/2019/08/2019-08-03-15.42.55.gif" alt="Animation on how to integrate the DIY smart doorbell with Home Assistant"/><figcaption>Integrating the ESPHome DIY smart doorbell with Home Assistant</figcaption></figure><h2 id="11-home-assistant-smart-doorbell-automations">Home Assistant smart doorbell automations</h2><p>At this point, you have a WiFi-enabled doorbell. Is it smart already? Not really…</p><p>Adding some automations to Home Assistant would make it really smart! There are many automations one could create with this. However, let me give you a couple of basic and useful examples.</p><h3 id="12-sending-notifications-to-your-phone">Sending notifications to your phone</h3><p>This little automation sends a notification to our phone when someone is at the door. We have Apple iPhones and watches, so those notifications would end up on our wrist as well, even if the chime is disabled!</p><h3 id="13-disable-the-chime-during-the-late-hours">Disable the chime during the late hours</h3><p>I have two kids. Nothing is more annoying than the sound of the doorbell chime about 15 minutes after you’ve put them into bed 😞. This little automation will disable the chime during the late hours and enable it again in the morning.</p><h3 id="14-streaming-the-front-door-camera-when-someone-is-at-the-door">Streaming the front door camera when someone is at the door</h3><p>This little automation is useful if you have a camera pointing at your front door. If you push the doorbell button, it will send out the camera stream of your front door camera to your living room TV 📺.</p><h3 id="15-more-smart-doorbell-automation-ideas">More smart doorbell automation ideas</h3><ul><li>Disable the chime when you arm the alarm when home, indicating you went to bed.</li><li>Use pressure sensors in your bed to turn off the chime when sleeping.</li><li>Create a camera snapshot when someone is at the door, and send it out to your phone.</li><li>Use the chime as an alarm bell as well, e.g., in case smoke or water leak is detected.</li><li>Use facial recognition on your front door camera, to disable the doorbell for the ones you don’t want to open the door for. E.g., an unknown person or your mother in law 😈</li><li>Prevent over abuse of doorbell pushes, by disabling it for a couple of minutes after it was pushed.</li><li>Hook the doorbell chime active switch into your voice assistant, allowing you to say “Hey Google, turn off the doorbell”</li></ul><h2 id="16-optional-changes-and-modifications">Optional changes and modifications</h2><p>There are probably a hundred variations on this approach I took, but that was not the point of this guide. However, some are worth mentioning.</p><h3 id="17-using-the-chimes-power-supply-using-a-step-down">Using the chimes’ power supply using a step-down</h3><p>In my case, my doorbell chime is powered by 8 Volts (DC) from the transformer. While to voltage is too high for the board, I could have used a little regulator to “step-down” from the 8 Volts to the 5 Volts required by the board.</p><p>These “step-down” are available for around a dollar on AliExpress. However, since I have enough older chargers I could use, and do have a power outlet available in my utility closet (where the doorbell wires are at); I saved myself the extra buck 😉.</p><h3 id="18-using-multiple-doorbell-buttons-eg-front--amp-backdoor">Using multiple doorbell buttons (e.g., front- &amp; backdoor)</h3><p>In some homes, there are multiple doorbells. E.g., one for the front door, the other for the back door. Mostly they are connected to the same chime. There are three ways to use this guide in those cases:</p><ol><li>Connect the doorbell push buttons in parallel to a single chip. This is fast and cheap, however, you cannot distinguish which button was pushed.</li><li>Connect two of those boards in parallel to the chime. You would need two boards and one chime, however, you can still distinguish the doorbell pushed.</li><li>Replace the ESP-01S and relay board with one of the bigger brothers. Those provide more GPIO pins. However, it would be more expensive compared to using just two of this project.</li></ol><h3 id="19-using-mqtt-eg-for-use-with-openhab">Using MQTT (e.g., for use with OpenHAB)</h3><p>Are you not using Home Assistant? Really? Or maybe you prefer to use MQTT with OpenHAB, Node-RED or Domoticz. Well, you can use this project as well! ESPHome provides an MQTT interface.</p><p>For more information about using MQTT with ESPHome, refer to the <a rel="noreferrer noopener" aria-label="ESPHome MQTT Client Component documentation. (opens in a new tab)" href="https://esphome.io/components/mqtt.html" target="_blank">ESPHome MQTT Client Component documentation.</a></p><h2 id="20-this-article-is-not-about-a-smart-doorbell">This article is not about a smart doorbell…</h2><p>I hope you enjoy your DIY smart doorbell! However, now the time has come for me to come clean. <strong>This article was never about the doorbell! </strong>This article is about showing you how easy, fun, and cheap DIY smart home solutions are. ESPHome &amp; Home Assistant are just amazing tools to allow everyone to jump in and create amazing things.</p><p>The ESP-01S is an amazingly cheap and tiny ESP8266-based board, that is rarely considered or discussed nowadays. Mostly you’ll find articles and references to her big brothers; the ESP8266 and ESP32. However, if you need just one or two GPIO pins, it is a viable option.</p><p>Consider this: Replace “doorbell” with “bedside LED light” in this article… 🤯. Anything with a switch and/or button can be replaced by this board (stay within the power limits of course).</p><p>But did you know, you can buy other module boards for the ESP-01S as well?</p><div id="ub_feature_box_39075fa0-cabb-463e-91b4-adccd5ba30c5"><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/esp01-rgb-led-module.png" alt="Product image of a RGB Led module for ESP-01(s) chips"/></p><p><a rel="noreferrer noopener" aria-label="RGB LED module (opens in a new tab)" href="https://frenck.link/esp01-led-module" target="_blank">RGB LED</a></p><p><em>This RGB led module goes for about a dollar and can control addressable LED strips like the WS2813.</em></p></div><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/esp01-breakout-module.png" alt="Product image of a ESP-01(S) breakout board."/></p><p><a href="https://frenck.link/esp01-breakout" target="_blank" rel="noreferrer noopener" aria-label="Breakout module (opens in a new tab)">Breakout</a></p><p><em>This little board breaks out the pins from the ESP. Helpful if you want to be able to remove the ESP from your project.</em></p></div><div> <p><img decoding="async" src="https://frenck.dev/wp-content/uploads/2019/08/esp01-dht11-module-1.png" alt="Product image of a DHT11 module board"/></p><p><a href="https://frenck.link/esp01-dht11-module" target="_blank" rel="noreferrer noopener" aria-label="DHT11 Module (opens in a new tab)">DHT11</a></p><p><em>The DHT11 module allows you to build a simple temperature and humidity sensor.</em></p></div></div><p>Did you build the doorbell? Nice! I love to see how you did!</p><p>../Frenck</p></div></article></div><div><div><p><img alt="" src="https://secure.gravatar.com/avatar/9e1e3dfde23abaea571d72332a8c37aa?s=100&amp;r=g" srcset="https://secure.gravatar.com/avatar/9e1e3dfde23abaea571d72332a8c37aa?s=200&amp;r=g 2x" height="100" width="100" loading="lazy" decoding="async" data-pin-nopin="nopin"/></p><div><p>A Human. Being. Him/He. Dad. Open Sourcerer. Home Assistant developer. Passionate. Dedicated. Life motto: Make a positive difference every single day❤️ Be the change.</p></div></div></div></div>
  </body>
</html>
