<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/binpash/try">Original</a>
    <h1>Do, or do not. There is no try</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/binpash/try/blob/main/docs/try_logo.png"><img src="https://github.com/binpash/try/raw/main/docs/try_logo.png" alt="try logo" width="100" height="130"/></a></p>
<p dir="auto">&#34;Do, or do not. There is no try.&#34;</p>
<p dir="auto">We&#39;re setting out to change that.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-description" aria-hidden="true" href="#description"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Description</h2>
<p dir="auto"><a href="https://github.com/binpash/try/actions/workflows/test.yaml"><img src="https://github.com/binpash/try/actions/workflows/test.yaml/badge.svg" alt="LocalTests"/></a></p>
<p dir="auto"><code>try</code> lets you run a command and inspect its effects before changing your live system. <code>try</code> uses Linux&#39;s <a href="https://docs.kernel.org/userspace-api/unshare.html" rel="nofollow">namespaces (via <code>unshare</code>)</a> and the <a href="https://docs.kernel.org/filesystems/overlayfs.html" rel="nofollow">overlayfs</a> union filesystem.</p>
<p dir="auto">Please note that <code>try</code> is a prototype and not a full sandbox, and should not be used to execute
commands that you don&#39;t already trust on your system, (i.e. devices in <code>/dev</code> are
mounted in the sandbox, and network calls are all allowed.) Please do not
attempt any commands that will remove everything in /dev or write zeros to your
disks.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/binpash/try/blob/main/docs/try_pip_install_example.gif"><img src="https://github.com/binpash/try/raw/main/docs/try_pip_install_example.gif" alt="try gif" data-animated-image=""/></a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting Started</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-dependencies" aria-hidden="true" href="#dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Dependencies</h3>
<p dir="auto">Has been tested on the following distributions:</p>
<ul dir="auto">
<li><code>Ubuntu 20.04 LTS</code> or later</li>
<li><code>Debian 12</code></li>
<li><code>Centos 9 Stream 5.14.0-325.el9</code></li>
<li><code>Arch 6.1.33-1-lts</code></li>
<li><code>Alpine 6.1.34-1-lts</code></li>
<li><code>Rocky 9 5.14.0-284.11.1.el9_2</code></li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-installing" aria-hidden="true" href="#installing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installing</h3>
<p dir="auto">You only need the <a href="https://raw.githubusercontent.com/binpash/try/main/try" rel="nofollow"><code>try</code> script</a>, which you can download by cloning this repository:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ git clone https://github.com/binpash/try.git"><pre>$ <span>git clone https://github.com/binpash/try.git</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-example-usage" aria-hidden="true" href="#example-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Example Usage</h2>
<p dir="auto"><code>try</code> is a higher-order command, like <code>xargs</code>, <code>exec</code>, <code>nohup</code>, or <code>find</code>. For example, to install a package via <code>pip3</code>, you can invoke <code>try</code> as follows:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ try pip3 install libdash
... # output continued below"><pre>$ <span>try pip3 install libdash</span>
<span>... # output continued below</span></pre></div>
<p dir="auto">By default, <em>try</em> will ask you to commit the changes made at the end of its execution.</p>
<div dir="auto" data-snippet-clipboard-copy-content="...
Defaulting to user installation because normal site-packages is not writeable
Collecting libdash
  Downloading libdash-0.3.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (254 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 254.6/254.6 KB 2.1 MB/s eta 0:00:00
Installing collected packages: libdash
Successfully installed libdash-0.3.1
WARNING: Running pip as the &#39;root&#39; user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv

Changes detected in the following files:

/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/ast.py (modified/added)
/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/_dash.py (modified/added)
/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__init__.py (modified/added)
/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__pycache__/printer.cpython-310.pyc (modified/added)
/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__pycache__/ast.cpython-310.pyc (modified/added)
&lt;snip&gt;

Commit these changes? [y/N] y"><pre><span>...</span>
<span>Defaulting to user installation because normal site-packages is not writeable</span>
<span>Collecting libdash</span>
<span>  Downloading libdash-0.3.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (254 kB)</span>
<span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 254.6/254.6 KB 2.1 MB/s eta 0:00:00</span>
<span>Installing collected packages: libdash</span>
<span>Successfully installed libdash-0.3.1</span>
<span>WARNING: Running pip as the &#39;root&#39; user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv</span>

<span>Changes detected in the following files:</span>

<span>/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/ast.py (modified/added)</span>
<span>/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/_dash.py (modified/added)</span>
<span>/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__init__.py (modified/added)</span>
<span>/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__pycache__/printer.cpython-310.pyc (modified/added)</span>
<span>/tmp/tmp.zHCkY9jtIT/upperdir/home/gliargovas/.local/lib/python3.10/site-packages/libdash/__pycache__/ast.cpython-310.pyc (modified/added)</span>
<span>&lt;snip&gt;</span>

<span>Commit these changes? [y/N] y</span></pre></div>
<p dir="auto">Sometimes, you might want to pre-execute a command and commit its result at a later time. Invoking <em>try</em> with the -n flag will return the overlay directory, without committing the result.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ try -n &#34;curl https://sh.rustup.rs | sh&#34;
/tmp/tmp.uCThKq7LBK"><pre>$ <span>try -n <span><span>&#34;</span>curl https://sh.rustup.rs | sh<span>&#34;</span></span></span>
<span>/tmp/tmp.uCThKq7LBK</span></pre></div>
<p dir="auto">Alternatively, you can specify your own overlay directory as follows (note that you&#39;ll have to create the sandbox directory first)</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ try -D rustup-sandbox &#34;curl https://sh.rustup.rs | sh&#34;
$ ls rustup-sandbox
temproot  upperdir  workdir"><pre>$ <span>try -D rustup-sandbox <span><span>&#34;</span>curl https://sh.rustup.rs | sh<span>&#34;</span></span></span>
$ <span>ls rustup-sandbox</span>
<span>temproot  upperdir  workdir</span></pre></div>
<p dir="auto">As you can see from the output above, <em>try</em> has created an overlay environment in the <em>rustup-sandbox</em> directory.</p>
<p dir="auto">Manually inspecting upperdir reveals the changes to the files made inside the overlay during the execution of the previous command with <em>try</em>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="~/try/rustup-sandbox/upperdir$ du -hs .
1.2G    ."><pre><span>~/try/rustup-sandbox/upperdir$ du -hs .</span>
<span>1.2G    .</span></pre></div>
<p dir="auto">You can inspect the changes made inside a given overlay directory using <em>try</em>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ try summary rustup-sandbox/ | head

Changes detected in the following files:

rustup-sandbox//upperdir/home/ubuntu/.profile (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.bashrc (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.rustup/update-hashes/stable-x86_64-unknown-linux-gnu (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.rustup/settings.toml (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/libstd-8389830094602f5a.so (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/lldb_commands (modified/added)
rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/gdb_lookup.py (modified/added)"><pre>$ <span>try summary rustup-sandbox/ <span>|</span> head</span>

<span>Changes detected in the following files:</span>

<span>rustup-sandbox//upperdir/home/ubuntu/.profile (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.bashrc (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.rustup/update-hashes/stable-x86_64-unknown-linux-gnu (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.rustup/settings.toml (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/libstd-8389830094602f5a.so (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/lldb_commands (modified/added)</span>
<span>rustup-sandbox//upperdir/home/ubuntu/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/etc/gdb_lookup.py (modified/added)</span></pre></div>
<p dir="auto">You can also choose to commit the overlay directory contents:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ try commit rustup-sandbox"><pre>$ <span>try commit rustup-sandbox</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-known-issues" aria-hidden="true" href="#known-issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Known Issues</h2>
<p dir="auto">Any command that interacts with other users/groups will fail since only the
current user&#39;s UID/GID are mapped. However, the <a href="https://github.com/binpash/try/tree/future">future
branch</a> has support for uid/mapping,
please refer to the that branch&#39;s readme for installation instructions for the
uid/gidmapper.</p>
<p dir="auto">Please also report any issue you run into while using the future branch!</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-version-history" aria-hidden="true" href="#version-history"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Version History</h2>
<ul dir="auto">
<li>0.1.0
<ul dir="auto">
<li>Initial Release</li>
</ul>
</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">This project is licensed under the MIT License - see LICENSE for details.</p>
<p dir="auto">Copyright (c) 2023 The PaSh Authors.</p>
</article>
          </div></div>
  </body>
</html>
