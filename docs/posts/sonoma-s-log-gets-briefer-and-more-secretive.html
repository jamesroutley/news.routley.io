<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2023/10/07/sonomas-log-gets-briefer-and-more-secretive/">Original</a>
    <h1>Sonoma&#39;s log gets briefer and more secretive</h1>
    
    <div id="readability-page-1" class="page"><article id="post-75209">
	
	<!-- .entry-header -->

	
		<div data-first_letter="I">
		<p>If you used Macs before Sierra, chances are that you were happy to browse their logs when necessary, for example to check whether your Time Machine backups were working correctly, or quietly throwing errors. At that time, the logs were traditional text-based records like those in other variants of Unix, and browsed using the Console app in /Applications/Utilities.</p>
<figure data-shortcode="caption" id="attachment_270" aria-describedby="caption-attachment-270"><a href="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png"><img data-attachment-id="270" data-permalink="https://eclecticlight.co/2015/02/10/my-mac-dont-work-troubleshooting-tools-and-techniques/consoleg/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png" data-orig-size="1270,642" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="consoleg" data-image-description="" data-image-caption="&lt;p&gt;Browsing your logs using Console is a vital part of diagnosing many problems.&lt;/p&gt;
" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=940" alt="Browsing your logs using Console is a vital part of diagnosing many problems." srcset="https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=660&amp;h=334 660w, https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=150&amp;h=76 150w, https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=300&amp;h=152 300w, https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=768&amp;h=388 768w, https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png?w=1024&amp;h=518 1024w, https://eclecticlightdotcom.files.wordpress.com/2015/02/consoleg.png 1270w" sizes="(max-width: 660px) 100vw, 660px"/></a><figcaption id="caption-attachment-270">Traditional text logs in OS X 10.10 Yosemite before they changed in Sierra.</figcaption></figure>
<p>I started to become irritated by them as long ago as El Capitan, writing:</p>
<p>Little did we realise then that Sierra was going to change all that, and by Mojave we’d be enduring 4,000 and more log entries in a second, when our Macs were feeling loquacious. That was because Apple introduced the Unified log, with its entries written not in plain text but compressed binary format. This was the death-blow for the casual reader of logs: for a start, the replacement Console app was unable to access any log entries made in the past, and its tools were, and remain, woefully inadequate for tackling the increasing torrent of log entries.</p>
<p>Despite its many great strengths, the Unified log has suffered two problems that are limiting its usefulness in Sonoma: its diminishing period of coverage, and censorship.</p>
<h4>Period of coverage</h4>
<p>Rather than rolling its log files by their age, and keeping the last five days of logs, macOS maintains them by size. Like its predecessors, that means <code>logd</code>, its maintainer, only keeps the last 520 MB or so of regular <em>Persist</em> log entries collected at any time, and purges older entries. Some older log entries are retained, but it’s pot luck as to whether those you’re interested in are among them, and even if they are, other related entries may have been removed already. If you’re interested to see how this works, <code>logd</code> keeps records in the logdata.statistics.[n].txt files in /var/db/diagnostics, but those too are purged so you can only look back a few days.</p>
<p>In the early days of the Unified log, I was amazed to discover that it kept log records for as long as 20 days or more. In Sonoma, my main working Mac is struggling to keep them for as long as 24 hours. There’s no way for the user to increase that period to compensate for the increased rate of writing log entries by macOS. If I don’t catch an event well within 24 hours of it happening, chances are that its log entries will already have been purged when I go to look for them.</p>
<h4>Privacy</h4>
<p>Censorship to maintain privacy is an important feature in the Unified log, and is responsible for so many of its entries being peppered with <code>&lt;private&gt;</code> instead of revealing potentially sensitive data. The mechanism for this is robust: when collecting entries for the log, sensitive content is excluded, then displayed with that marker. As that sensitive content isn’t stored in the first place, there’s no way to unmask that content once it has been collected and written to the log.</p>
<p>Currently, the only way to see unmasked log entries is through a <a href="https://eclecticlight.co/2023/03/08/removing-privacy-censorship-from-the-log/">special profile</a>. Once that has been enabled, and until it’s disabled again, all privacy should be removed from the log, and those <code>&lt;private&gt;</code> markers replaced with real data.</p>
<p>Only Apple has now decided that some log content is too private to reveal even when privacy has been removed. I came across this recently, in multiple log entries, when researching Web Apps, in entries like</p>
<p>Of course, it may be possible to turn this additional privacy off, but the documentation leads us once again to a guessing game. Apple documents the <em>Enable-Private-Data</em> profile key <a href="https://developer.apple.com/documentation/devicemanagement/systemlogging" target="_blank" rel="noopener">here</a>, where it refers to it controlling “private data logging”. But in its account on <a href="https://developer.apple.com/documentation/os/oslogprivacy" target="_blank" rel="noopener">log privacy settings</a>, Apple refers to two distinct privacy settings that can be applied to the content of log entries: the “standard option” <em>‘private’,</em> and <em>sensitive,</em> described as “the option to always redact interpolated values that contain sensitive information.” Does this mean that setting <em>Enable-Private-Data</em> to <strong>false</strong> doesn’t unmask content designated <em>sensitive,</em> only that set as <em>‘private’?</em></p>
<p>Like so many great ideas, the Unified log is suffering from profligate overuse. Who really needs to see full dictionary dumps from RunningBoard? Is there no better way to record that information than in the log?</p>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>
  </body>
</html>
