<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://kathack.com/">Original</a>
    <h1>Katamari Hack (2011)</h1>
    
    <div id="readability-page-1" class="page">
	    
		<p>Drag this link to your bookmarks bar: 
		   Katamari!
		</p>
        <p>Or copy and paste this url into the location bar on any site:</p>
        
        <p>(works best in chrome or firefox 4)</p>
		<h2>What is this?</h2>
		<p>This is a &#34;bookmarklet&#34; that turns any page into
		    <a href="http://en.wikipedia.org/wiki/Katamari_Damacy" target="_blank">Katamari Damacy</a>.
            Try clicking the Katamari! link above.
	    </p>
        <p>This was the winner of the 2011 Yahoo HackU contest at
            University of Washington.</p>
        <h2>How does it work?</h2>
        <p>Short version: css transforms (for things stuck to the katamari),
            canvas (drawing the katamari), and z-index (illusion of depth).</p>
        <p>Long version: The bookmarklet loads jQuery and <a href="http://kathack.com/js/kh.js">kh.js</a> into
            the current page. jQuery is used mostly for <code>.offset()</code> and <code>.css()</code>.
            Â kh.js is where all the action happens:
            </p><ul>
                <li>Splits all the text on the page into words/spans.
                (<code>StickyNodes::addWords</code>)</li>
                <li>Builds a grid data structure so that intersections with
                    elements can be found quickly (<code>StickyNodes::finalize</code>).
                    Essentially <code>grid[floor(x / 100)][floor(y / 100)]</code>
                    is a list of elements in a 100x100 pixel block.
                    This should probably be an <a href="http://en.wikipedia.org/wiki/R-tree">R-tree</a>,
                    but the hot-spot in this program is definitely in the rendering.</li>
                <li>The ball and stripes are drawn in a canvas that gets moved
                    around the page (i.e. <code>position: absolute; left: x; top: y;</code>).
                    See <code>PlayerBall::drawBall</code>.</li>
                <li>When an element is attached to the katamari, a clone is made.
                    The original element is hidden.  The new element is moved
                    around by setting <code>-webkit-transform</code>.
                    The transform rotates the element about the rolling axis
                    of the katamari and scales the element to make it look like
                    it&#39;s coming out of the page.
                    See <code>PlayerBall::drawAttached</code>,
                    <a href="http://kathack.com/transform_test.html">transform_test.html</a>, and
                    <a href="http://kathack.com/transform_test2.html">transform_test2.html</a>.</li>
            </ul>
        
		
	

</div>
  </body>
</html>
