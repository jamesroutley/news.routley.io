<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://stpihkal.docs.buttplug.io/protocols/tcode.html">Original</a>
    <h1>T-code – A protocol for implementing UART serial communications to an adult toy</h1>
    
    <div id="readability-page-1" class="page"><div> <p>Version 0.3, as of 10th May 2021</p> <p>Created by <a href="https://patreon.com/tempestvr" target="_blank" rel="noopener noreferrer">Tempest For the OSR-2, SR-6, and other DIY toys<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span>(opens new window)</span></span></a></p> <h2 id="introduction"><a href="#introduction">#</a> Introduction</h2> <p>T-code is a protocol for implementing UART serial communications to an adult toy. It is partly influenced by G-code, which is an alphanumeric format used to drive CNC machines, including 3D-printers.</p> <p>The toy or “device” will be capable of one or more functions, which are described as Linear motion, Vibration or Rotation “channels”, which can be addressed independently.</p> <p>Commands are send to the device in the form of alphanumeric ASCII phrases, which are interpreted by the device, stored in a buffer and executed on the receipt of new line or ‘/n’ character.</p> <h2 id="live-control"><a href="#live-control">#</a> Live control</h2> <p>To be able to keep up with a live feed the commands will need to have a short, quick fire format, for an instant response.</p> <p>Commands for Linear move, Rotate, Vibrate, and Auxilliary take the form of a letter (“L”, “R”, “V”, or &#34;A&#34;) followed by a set of digits. Lower case letters (“l”, “r”, “v”) are also valid.</p> <p><code>L&amp;$$</code></p> <p>The first digit “&amp;” is the channel ID (0-9) and any subsequent digits, two in this case “$$”, are the magnitude. The magnitude for any channel is always a number between 0 and 1. The magnitude digits are therefore effectively the digits following a “0.”</p> <p>The magnitude corresponds to a linear position/speed, rotation position/speed, or vibration level. In situations where position or speed is possible in a forward or reverse direction 0.5 is assumed to be central or at rest.</p> <ul><li><code>L277</code> = Linear, channel ID 2, magnitude 0.77.</li> <li><code>R09</code> = Rotate, channel ID 0, magnitude 0.9</li> <li><code>V317439</code> = Vibrate, channel ID 3, magnitude 0.17439.</li></ul> <p>For the fastest response possible during live control each of these commands should be followed immediately by a <code>\n</code></p> <h2 id="magnitude-time-interval"><a href="#magnitude-time-interval">#</a> Magnitude + Time Interval</h2> <p>Magnitude commands can be augmented with a speed term. This commands the toy to ramp to the specified magnitude over an interval of time, given in milliseconds.</p> <p>eg:
<code>L&amp;$$I£££</code></p> <p>Where “I” (or “i”) allows the effect to be ramped in over an interval of “£££” milliseconds, starring from the current value.</p> <ul><li><code>V199I2000</code> = Vibration, channel ID 1, ramp to 0.99 over 2 seconds.</li></ul> <p>With this command the channel ramps to the specified level and continues at that level until given further instructions.</p> <h2 id="magnitude-speed"><a href="#magnitude-speed">#</a> Magnitude + Speed</h2> <p>As an alternative, the rate at which the effect is ramped in can be specified.</p> <p><code>R&amp;$$S£££</code></p> <p>Using “S” (or “s”) allows the effect to be ramped at a speed of “£££” per hundred milliseconds.</p> <p><code>L020S10</code> = Linear move, channel ID 0, ramp to 0.2 at a rate of 0.1/sec</p> <p>As with time interval, the channel ramps to the specified level and continues at that level until given further instructions.</p> <h2 id="multiple-channels"><a href="#multiple-channels">#</a> Multiple Channels</h2> <p>Multiple channels can be operated in parallel, and will do so independently of each other.</p> <p>Multiple commands can be sent at the same time, separated by a space character ‘ ‘, allowing instructions to be readied for multiple L, R, V &amp; A channels before all are executed by the receipt of a <code>\n</code> character. Lag in scripted control can be minimised by sending the next instructions in advance, sending the new line to execute at the desired moment.</p> <p>Commands addressed to the same channel before a new line character is sent will overwrite previous buffered commands to that channel.</p> <h2 id="multi-axis-devices"><a href="#multi-axis-devices">#</a> Multi-Axis Devices</h2> <p>The default configuration for a Multi Axis Stroker Robot (or &#34;MAxSR&#34;) is as follows:</p> <p>Linear motions in three axes:</p> <ul><li>L0 is positive up relative to the user</li> <li>L1 is positive moving away from the user</li> <li>L2 is positive moving to the user&#39;s left</li></ul> <p>Rotations in three axes:</p> <ul><li>R0, R1, R2 are positive according to the right hand rule around L0, L1, L2 respectively.</li></ul> <p>The minimum position for each axis is 0, the maximum position is 0.9999 (etc). The middle, or neutral, position is 0.5.</p> <p><img src="https://stpihkal.docs.buttplug.io/assets/img/tcode-axes.11dd337e.png" alt="TCode Axes Diagram"/></p> <p>Extra functions on the OSR2/SR6:</p> <ul><li>V0, V1, are vibration motor control channels</li> <li>A0 is direct control of the valve position
<ul><li>The most recent command determines current control method, 0 = open, 9999 = closed</li></ul></li> <li>A1 is suck algorithm control of the valve
<ul><li>The most recent command determines current control method, 0 = open, 9999 = closed</li></ul></li> <li>A2 is lube motor speed (0-9999, 0-100%)</li></ul> <h2 id="device-commands"><a href="#device-commands">#</a> Device commands</h2> <p>Additional instructions to and from the device can be controlled through a predetermined list of commands prefixed with the letter <code>D</code> or <code>d</code>.</p> <p>The current list of commands is as follows:</p> <ul><li><code>D0</code> - Identify device &amp; firmware version</li> <li><code>D1</code> - Identify TCode version</li> <li><code>D2</code> - List available axes and associated user range preferences</li> <li><code>DSTOP</code> - Stop device</li></ul> <h2 id="save-commands"><a href="#save-commands">#</a> Save commands</h2> <p>To save a user&#39;s preferences to the EEPROM on the OSR2/SR6 on an axis-by-axis basis a save command
can be used. These commands are prefixed by the symbol <code>$</code>.</p> <p>These take the form <code>$TX-YYYY-ZZZZ</code></p> <p>Where:</p> <ul><li>T is the axis type (L, R, V, A)</li> <li>X is the axis number (0-9)</li> <li>YYYY is the preferred minimum (0000-9999)</li> <li>ZZZZ is the preferred maximum (0000-9999)</li></ul> <p>Note that saved preferences do not change the behaviour of the device itself. They exist as a reference for the driving app or plugin, accessed via the <code>D2</code> command.</p></div></div>
  </body>
</html>
