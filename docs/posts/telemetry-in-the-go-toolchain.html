<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/golang/go/discussions/58409">Original</a>
    <h1>Telemetry in the Go Toolchain</h1>
    
    <div id="readability-page-1" class="page"><div role="presentation" data-paste-markdown-skip="">
    <tbody data-target-translation-id="4835204" data-target-translation-type="discussion">
        <tr>
    <td>
        <p dir="auto">How do software developers understand which parts of their software are being used and whether they are performing as expected? The modern answer is <em>telemetry</em>, which means software sending data to answer those questions back to a collection server.</p>
<p dir="auto">I believe that open-source software projects need to explore new telemetry designs that help developers get the information they need to work efficiently and effectively, without collecting invasive traces of detailed user activity.</p>
<p dir="auto">I have written a short series of blog posts about one such design, which I call <em>transparent telemetry</em>, because it collects as little as possible (kilobytes per year from each installation) and then publishes every bit that it collects, for public inspection and analysis.</p>
<p dir="auto">I’d like to explore using transparent telemetry, or a system like it, in the Go toolchain, which I hope will help Go project developers and users alike. To be clear, I am only suggesting that the instrumentation be added to the Go command-line tools written and distributed by the Go team, such as the <code>go</code> command, the Go compiler, <code>gopls</code>, and <code>govulncheck</code>. I am <em>not</em> suggesting that instrumentation be added by the Go compiler to all Go programs in the world: that’s clearly inappropriate.</p>
<p dir="auto">Transparent telemetry has the following key properties:</p>
<ul dir="auto">
<li>
<p dir="auto">The decisions about what metrics to collect are made in an open, public process.</p>
</li>
<li>
<p dir="auto">The collection configuration is automatically generated from the actively tracked metrics: no data is collected that isn’t needed for the metrics.</p>
</li>
<li>
<p dir="auto">The collection configuration is served using a tamper-evident transparent log, making it very difficult to serve different collection configurations to different systems.</p>
</li>
<li>
<p dir="auto">The collection configuration is a cacheable, proxied Go module, so any privacy-enhancing local Go proxy already in use for ordinary modules will automatically be used for collection configuration. To further ameliorate concerns about tracking systems by the downloading of the collection configuration, each installation only bothers downloading the configuration each week with probability 10%, so that each installation only asks for the configuration about five times per year.</p>
</li>
<li>
<p dir="auto">Uploaded reports only include total event counts over a full week, not any kind of time-ordered event trace.</p>
</li>
<li>
<p dir="auto">Uploaded reports do not include user IDs, machine IDs, or any other kind of ID.</p>
</li>
<li>
<p dir="auto">Uploaded reports only contain strings that are already known to the collection server: counter names, program names, and version strings repeated from the collection configuration, along with the names of functions in specific, unmodified Go toolchain programs for stack traces. The only types of non-string data in the reports are event counts, dates, and line numbers.</p>
</li>
<li>
<p dir="auto">IP addresses exposed by the HTTP session that uploads the report are not recorded with the reports.</p>
</li>
<li>
<p dir="auto">Thanks to <a href="https://research.swtch.com/sample" rel="nofollow">sampling</a>, only a constant number of uploaded reports are needed to achieve a specific accuracy target, no matter how many installations exist. Specifically, only about 16,000 reports are needed for 1% accuracy at a 99% confidence level. This means that <em>as new systems are added to the system, each system reports less often</em>. With a conservative estimate of two million Go installations, about 16,000 reporting each week corresponds to an overall reporting rate of well under 2% per week, meaning each installation would upload a report on average less than once per year.</p>
</li>
<li>
<p dir="auto">The aggregate computed metrics are made public in graphical and tabular form.</p>
</li>
<li>
<p dir="auto">The full raw data as collected is made public, so that project maintainers have no proprietary advantage or insights in their role as the direct data collector.</p>
</li>
<li>
<p dir="auto">The system is on by default, but opting out is easy, effective, and persistent.</p>
</li>
</ul>
<p dir="auto"><strong>Please read the <a href="https://research.swtch.com/telemetry-intro" rel="nofollow">introductory blog post</a> for more background before commenting here.</strong> You may also want to check out the <a href="https://research.swtch.com/telemetry-design" rel="nofollow">detailed design</a> and <a href="https://research.swtch.com/telemetry-uses" rel="nofollow">list of use cases</a>.</p>
    </td>
  </tr>

    </tbody>
  </div></div>
  </body>
</html>
