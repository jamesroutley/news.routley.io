<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://community.aws/content/2oEqDGCIsQwoPrL3wjoSReyHnan/back-to-the-future-writing-6502-assembler-with-amazon-q-developer">Original</a>
    <h1>Back to the future: Writing 6502 assembler with Amazon Q Developer</h1>
    
    <div id="readability-page-1" class="page"><div><h2>In this short post I have some fun with Amazon Q Developer and get it to write code that runs on my virtual Commodore 64</h2></div><div><div><blockquote><p><i>Have you heard about the</i> <a href="https://awsdevchallenge.devpost.com/" rel="nofollow noreferrer noopener" target="_blank"><i>AWS Game Builder Challenge</i></a><i>? This is a great competition where you need to create a game with AWS services of your choosing: all skill levels welcome!</i></p></blockquote><p>In a <a href="https://community.aws/content/2oAoQyCZWhRMpHWecW6dGykzP0T/how-i-built-an-arcade-scrolling-game-in-one-day" rel="nofollow noreferrer noopener">recent post</a> I talked about how I was able to quickly create a sideways scrolling arcade game with the help of Amazon Q Developer. I was talking to a few folk online who had got in touch to know more, and the subject turned to whether Amazon Q Developer could write a different kind of game, one that would run on the first computer I ever owned, the Commodore 64.  Well there was only one way to find out, so I spent around an hour experimenting and this post is what I learned. Buckle up for some retro computing fun!</p><h3><div><p><a id="writing-my-first-c64-basic-program"></a>Writing my first C64 Basic program</p></div></h3><p>After creating a new project workspace and starting VSCode, I ask Amazon Q Developer in the chat interface the following prompt:</p><blockquote><p>Amazon Q Chat &gt; Write a simple programming in Commodore 64 basic that displays a sprite moving across the screen smoothly. Make sure the screen is reset first and set to a random colour</p></blockquote><figure><div><p><img alt="Initial prompt in Amazon Q chat interface" title="" loading="lazy" decoding="async" data-nimg="fill" sizes="25vw" srcset="/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=256&amp;q=75 256w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=384&amp;q=75 384w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=640&amp;q=75 640w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=750&amp;q=75 750w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=828&amp;q=75 828w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=1080&amp;q=75 1080w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=1200&amp;q=75 1200w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=1920&amp;q=75 1920w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=2048&amp;q=75 2048w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=3840&amp;q=75 3840w" src="https://community.aws/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhGPrvL5AmM5PlxMAPF0FQVt1%2FScre.webp%3FimgSize%3D2344x1834&amp;w=3840&amp;q=75"/></p></div></figure><p>I grab the code and start VICE, which is my preferred C64 emulator. I select the standard C64 from the available emulated machines, and then paste the code in. Oh dear, this does not look good.</p><figure><div><p><img alt="entering upper case code" title="" loading="lazy" decoding="async" data-nimg="fill" sizes="25vw" srcset="/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=256&amp;q=75 256w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=384&amp;q=75 384w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=640&amp;q=75 640w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=750&amp;q=75 750w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=828&amp;q=75 828w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=1080&amp;q=75 1080w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=1200&amp;q=75 1200w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=1920&amp;q=75 1920w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=2048&amp;q=75 2048w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=3840&amp;q=75 3840w" src="https://community.aws/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNhUuqHns55BvO7FSRJJMgi169%2FScre.webp%3FimgSize%3D1438x1094&amp;w=3840&amp;q=75"/></p></div></figure><p>I ask Amazon Q to suggest a fix, and it provides a bunch of ideas, but the one that immediately seems to make sense to me is this line:</p><blockquote><p>Replace uppercase letters with lowercase (the C64 automatically capitalizes)</p></blockquote><p>I ask Amazon Q to change the code to lowercase, and try again. Success this time, and now I have the code that Amazon Q generated in my virtual C64. Here is the code it produced.</p><p>It runs.....well almost. I see a square sprite move smoothly across the screen and when it gets to the end it crashes with the following error:</p><blockquote><p>Illegal quantity error in 200</p></blockquote><p>I turn to Amazon Q to help me fix this issue, asking it to resolve this error. It quickly provides me with updated code and an explanation of why I got the error.</p><blockquote><p>Here&#39;s what this does: (x&gt;255) is a boolean expression that evaluates to -1 when true and 0 when false in Commodore 64 BASIC. The minus sign (-) in front of (x&gt;255) negates this, giving us 1 when x &gt; 255 and 0 when x &lt;= 255. This result (either 0 or 1) is then used as the value for the POKE statement. This correction ensures that the high bit of the sprite&#39;s X coordinate is set correctly when the sprite moves beyond the 255th pixel, allowing it to move across the entire width of the screen.</p></blockquote><p>I run it again and success. </p><h3><div><p><a id="making-it-more-interesting"></a>Making it more interesting</p></div></h3><p>I want to make this a little more interesting so I ask Amazon Q to change the code:</p><blockquote><p>Amazon Q Chat &gt; can you update the code so that there are four sprites in different colours this time. can you make it so that they bounce around the screen</p></blockquote><p>It provides me some updated code</p><p>Which runs first time. I know have four sprites bouncing around the screen.</p><h3></h3><p>The next step</p><blockquote><p>Amazon Q Chat &gt; can you tell me about any online C64 sprite editing tools that I can use to help me create my own sprites?</p></blockquote><p>It provides some great resources, including a website called <a href="https://www.spritemate.com/" rel="nofollow noreferrer noopener" target="_blank">spritemate</a>, which I head over to and quickly put together a more interesting looking sprite.</p><figure><div><p><img alt="using spritemate to create sprites" title="" loading="lazy" decoding="async" data-nimg="fill" sizes="25vw" srcset="/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=256&amp;q=75 256w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=384&amp;q=75 384w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=640&amp;q=75 640w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=750&amp;q=75 750w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=828&amp;q=75 828w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=1080&amp;q=75 1080w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=1200&amp;q=75 1200w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=1920&amp;q=75 1920w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=2048&amp;q=75 2048w, /_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=3840&amp;q=75 3840w" src="https://community.aws/_next/image?url=https%3A%2F%2Fassets.community.aws%2Fa%2F2oNjZbgrqhklzapyLUtEBHzM6Bv%2FScre.webp%3FimgSize%3D1988x1314&amp;w=3840&amp;q=75"/></p></div></figure><p>I can grab the data directly from the tool, and then update my code.</p><p>One of the neat features of these emulated computers is the ability to change the CPU speed. The above videos are all running at 800% of the native C64 6502 speed. When running at baseline, the sprites move much more slowly. This is to be expected - back in the day, you used Basic for simple programs where performance was not necessarily critical. If you needed that, you had to learn assembler.</p><h3></h3><p> I have no clue about how to approach this in VSCode on my Mac. After looking at some Redit groups, it is clear that the way forward is to use the <a href="https://theweb.dk/KickAssembler/Main.html#frontpage" rel="nofollow noreferrer noopener" target="_blank">Kick Assembler tool </a>together with a <a href="https://marketplace.visualstudio.com/items?itemName=paulhocker.kick-assembler-vscode-ext" rel="nofollow noreferrer noopener" target="_blank">VSCode plugin</a>. Once I have those installed and configured I am ready.</p><p>I select all the code and Send to Prompt, then ask Amazon Q:</p><blockquote><p>Amazon Q Chat &gt; convert this commodore basic program to run 6502 assembler that will run on the Vice c64 emulator. I want to use the Kick Assembler tool.</p></blockquote><p>I am super impressed that it quickly provides something I remember from my teenage years</p><p>I compile the code and then automatically run it via the VSCode plugin integration, and success, we have our sprite bouncing across the screen.</p><p>It is not perfect, as the updated code has lost a few things: the background colour and three sprites! However, this is now running at 100% speed, so you can see how dramatically better the performance is.</p><p>I ask Amazon Q to update the assembler to add additional sprites.</p><blockquote><p>Amazon Q, Send to Prompt &gt; Update the C64 assembler so that there are three sprites rather than one.</p></blockquote><p>I have to have some back and forth, as Amazon Q gives me just snippets of the updated code. I follow up with the prompt:</p><blockquote><p>Amazon Q Chat interface &gt; provide complete code update</p></blockquote><p>Which provides me with the updated code, which compiles and runs.</p><p>As you cn see, running in assembler is much faster than when running this code in Commodore basic.</p><h3><div><p><a id="wrapping-up-and-next-steps"></a>Wrapping up and next Steps</p></div></h3><p>In this post I showed you how you can use Amazon Q Developer to help you write code, even if that code runs on a machine that is over 40 years old. Amazon Q Developer is simple an awesome companion that I am finding is able to help me across any task I throw at it - including creating Commodore 64 basic and assembler applications.</p><p>You might have some legacy code, perhaps some assembler or old code that you have been looking to modernise, update, or even figure out how to refactor. I hope this post will give you with ideas of the potential that tools like Amazon Q Developer provide.</p><p>You can try Amazon Q Developer for free today, by <a href="https://community.aws/builderid?trk=34e0ecce-8101-42c4-840a-fe6170420294&amp;sc_channel=el" rel="nofollow noreferrer noopener">signing up for a Builder ID</a>, and then using that to login in after installing the plugin in VSCode or Intelij. </p><p>Check out <a href="https://community.aws/@ricsueaws" rel="nofollow noreferrer noopener">my other posts</a> on community.aws, as I have been sharing a lot of tips and use cases of how I am using Amazon Q Developer. You can also keep up to date with all the new features and improvements of Amazon Q Developer by checking out the <a href="https://aws-oss.beachgeek.co.uk/40i" rel="nofollow noreferrer noopener" target="_blank">changelog</a>.</p><h3></h3><div><p>If you&#39;re ready to build your own game, AWS is running a hackathon through the month of November. From a simple tic tac toe game built with HTML/CSS/JS to a complex Unity game -- all skill levels and tech stacks are welcome. Join now on DevPost: <a href="https://awsdevchallenge.devpost.com/" rel="nofollow noreferrer noopener" target="_blank">https://awsdevchallenge.devpost.com</a>! and I hope this post will inspire some of you to join too and maybe submit some retro games!</p></div></div></div><p>Any opinions in this post are those of the individual author and may not reflect the opinions of AWS.</p></div>
  </body>
</html>
