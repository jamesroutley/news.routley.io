<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/andsens/docopt.sh">Original</a>
    <h1>Docopt.sh – Command-Line Argument Parser for Bash 3.2, 4, and 5</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><div dir="auto">
<h2 id="user-content-docopt-sh" tabindex="-1" dir="auto"><a id="user-content-docoptsh" aria-hidden="true" href="#docoptsh"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>docopt.sh</h2>
<div dir="auto">
<p dir="auto"><a href="https://github.com/andsens/docopt.sh/actions?query=workflow%3A%22Lint+%26+test%22"><span><img src="https://github.com/andsens/docopt.sh/workflows/Lint%20&amp;%20test/badge.svg" alt="image"/></span></a></p>
<p dir="auto">A <a href="http://docopt.org/" rel="nofollow">docopt</a> argument parser for bash 3.2, 4+, and 5+ with no
external dependencies.</p>
<div dir="auto">
<h3 id="user-content-quick-start" tabindex="-1" dir="auto"><a id="user-content-quick-start" aria-hidden="true" href="#quick-start"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick start</h3>

<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="#!/usr/bin/env bash

DOC=&#34;Naval Fate.
Usage:
  naval_fate.sh &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;]
  naval_fate.sh shoot &lt;x&gt; &lt;y&gt;

Options:
  --speed=&lt;kn&gt;  Speed in knots [default: 10].&#34;

naval_fate() {
  eval &#34;$(docopt &#34;$@&#34;)&#34;
  if $move; then
    printf &#34;The %s is now moving to %d,%d at %d knots.\n&#34; &#34;$_name_&#34; &#34;$_x_&#34; &#34;$_y_&#34; &#34;$__speed&#34;
  fi
  if $shoot; then
    printf &#34;You shoot at %d,%d. It&#39;s a hit!\n&#34; &#34;$_x_&#34; &#34;$_y_&#34;
  fi
  return 0
}
naval_fate &#34;$@&#34;"><pre><span><span>#!</span>/usr/bin/env bash</span>

DOC=<span><span>&#34;</span>Naval Fate.</span>
<span>Usage:</span>
<span>  naval_fate.sh &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;]</span>
<span>  naval_fate.sh shoot &lt;x&gt; &lt;y&gt;</span>
<span></span>
<span>Options:</span>
<span>  --speed=&lt;kn&gt;  Speed in knots [default: 10].<span>&#34;</span></span>

<span>naval_fate</span>() {
  <span>eval</span> <span><span>&#34;</span><span><span>$(</span>docopt <span><span>&#34;</span><span>$@</span><span>&#34;</span></span><span>)</span></span><span>&#34;</span></span>
  <span>if</span> <span>$move</span><span>;</span> <span>then</span>
    <span>printf</span> <span><span>&#34;</span>The %s is now moving to %d,%d at %d knots.\n<span>&#34;</span></span> <span><span>&#34;</span><span>$_name_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_x_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_y_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$__speed</span><span>&#34;</span></span>
  <span>fi</span>
  <span>if</span> <span>$shoot</span><span>;</span> <span>then</span>
    <span>printf</span> <span><span>&#34;</span>You shoot at %d,%d. It&#39;s a hit!\n<span>&#34;</span></span> <span><span>&#34;</span><span>$_x_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_y_</span><span>&#34;</span></span>
  <span>fi</span>
  <span>return</span> 0
}
naval_fate <span><span>&#34;</span><span>$@</span><span>&#34;</span></span></pre></div>
</div>
</div>
<p dir="auto">Run <code>docopt.sh</code> to insert a parser that matches the helptext into the script:</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="$ sudo pip3 install docopt-sh
$ docopt.sh naval_fate.sh
naval_fate.sh has been updated
$ ./naval_fate.sh Olympia move 1 5 --speed 8
The Olympia is now moving to 1,5 at 8 knots."><pre>$ sudo pip3 install docopt-sh
$ docopt.sh naval_fate.sh
naval_fate.sh has been updated
$ ./naval_fate.sh Olympia move 1 5 --speed 8
The Olympia is now moving to 1,5 at 8 knots.</pre></div>
</div>
</div>

<p dir="auto"><strong>Note that the script is completely independent from the python package.</strong></p>
</div>
<div dir="auto">
<h3 id="user-content-table-of-contents" tabindex="-1" dir="auto"><a id="user-content-table-of-contents" aria-hidden="true" href="#table-of-contents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of contents</h3>
<div dir="auto">
<dl>
<dt>Introduction</dt>
<dd>

</dd>
<dt>Advanced usage</dt>
<dd>

</dd>
<dt>Developers</dt>
<dd>

</dd>
</dl>
</div>
</div>
<div dir="auto">
<h3 id="user-content-installation" tabindex="-1" dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h3>
<p dir="auto">Install <code>docopt.sh</code> using pip:</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="sudo pip3 install docopt-sh"><pre>sudo pip3 install docopt-sh</pre></div>
</div>
</div>
</div>
<div dir="auto">
<h3 id="user-content-how-it-works" tabindex="-1" dir="auto"><a id="user-content-how-it-works" aria-hidden="true" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How it works</h3>
<p dir="auto">Given a script <code>docopt.sh</code> finds the <code>docopt</code> (<code>DOC=&#34;…​&#34;</code>) help text,
parses it, generates a matching parser in bash, and then inserts it back into
the original script. The patched script will have no dependencies and can be
shipped as a single file.</p>
<p dir="auto">To reduce the amount of code added to the it, the script will only contain a
parser made for that specific help text. For that reason there is no need for
the generator itself to be written in bash, instead that part is written in
Python 3. Though, this also means that you have to regenerate your parser every
time you change the help text (see <a href="#on-the-fly-parser-generation">On-the-fly
parser generation</a> for automating that part while developing).</p>
<div dir="auto">
<h4 id="user-content-local-vs-global-variables" tabindex="-1" dir="auto"><a id="user-content-local-vs-global-variables" aria-hidden="true" href="#local-vs-global-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Local vs. global variables</h4>
<p dir="auto">Running <code>docopt &#34;$@&#34;</code> outputs multiple variable declarations (and a
<a href="#exiting-with-a-usage-message">function</a>) whose values match the
command-line arguments that were used.</p>
<p dir="auto">As an example, invoking <code>naval_fate.sh</code> from the
<a href="#quick-start">quick start section</a> with <code>./naval_fate.sh shoot 1 5</code> outputs
the following.</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="docopt_exit() { [[ -n $1 ]] &amp;&amp; printf &#34;%s\n&#34; &#34;$1&#34; &gt;&amp;2
printf &#34;%s\n&#34; &#34;${DOC:12:87}&#34; &gt;&amp;2; exit 1; }
declare -- __speed=&#34;10&#34;
declare -- _name_=&#34;&#34;
declare -- _x_=&#34;1&#34;
declare -- _y_=&#34;5&#34;
declare -- move=&#34;false&#34;
declare -- shoot=&#34;true&#34;"><pre><span>docopt_exit</span>() { [[ <span>-n</span> <span>$1</span> ]] <span>&amp;&amp;</span> <span>printf</span> <span><span>&#34;</span>%s\n<span>&#34;</span></span> <span><span>&#34;</span><span>$1</span><span>&#34;</span></span> <span>&gt;&amp;2</span>
<span>printf</span> <span><span>&#34;</span>%s\n<span>&#34;</span></span> <span><span>&#34;</span><span>${DOC<span>:</span>12<span>:</span>87}</span><span>&#34;</span></span> <span>&gt;&amp;2</span><span>;</span> <span>exit</span> 1<span>;</span> }
<span>declare</span> -- __speed=<span><span>&#34;</span>10<span>&#34;</span></span>
<span>declare</span> -- _name_=<span><span>&#34;</span><span>&#34;</span></span>
<span>declare</span> -- _x_=<span><span>&#34;</span>1<span>&#34;</span></span>
<span>declare</span> -- _y_=<span><span>&#34;</span>5<span>&#34;</span></span>
<span>declare</span> -- move=<span><span>&#34;</span>false<span>&#34;</span></span>
<span>declare</span> -- shoot=<span><span>&#34;</span>true<span>&#34;</span></span></pre></div>
</div>
</div>
<p dir="auto">Evaluating (<code>eval</code>) this in bash will set those variables. If done in a function
the variables will be local and only available inside that function
(like in <code>naval_fate.sh</code>), otherwise they will be available globally.</p>
</div>
</div>
<div dir="auto">
<h3 id="user-content-refreshing-the-parser" tabindex="-1" dir="auto"><a id="user-content-refreshing-the-parser" aria-hidden="true" href="#refreshing-the-parser"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Refreshing the parser</h3>
<p dir="auto"><code>docopt.sh</code> embeds a shasum of the help text into the parser to ensure that the
two always match. In order to update the parser, simply run <code>docopt.sh</code> again.
The existing parser will be replaced with a new one. If the parser was generated
with any particular options, these options will be re-applied unless instructed
otherwise with <code>--no-auto-params</code>.</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="$ docopt.sh --line-length 120 naval_fate.sh
naval_fate.sh has been updated.
$ docopt.sh naval_fate.sh
Adding `--line-length=120` from parser generation parameters that were detected
in the script. Use --no-auto-params to disable this behavior.
The parser in naval_fate.sh is already up-to-date."><pre>$ docopt.sh --line-length 120 naval_fate.sh
naval_fate.sh has been updated.
$ docopt.sh naval_fate.sh
Adding <span><span>`</span>--line-length=120<span>`</span></span> from parser generation parameters that were detected
<span>in</span> the script. Use --no-auto-params to disable this behavior.
The parser <span>in</span> naval_fate.sh is already up-to-date.</pre></div>
</div>
</div>
<p dir="auto">Once you have generated the parser, you can move the codeblock to any other
place in your script. The script patcher will automatically find the codeblock
and replace it with an updated version.</p>
<p dir="auto">In order to avoid &#34;works on my machine&#34; issues, the parser automatically skips
the help text check on machines without <code>shasum</code> or <code>sha256sum</code> (a &#34;command
not found&#34; error will still be printed though). The check can also manually be
disabled with <code>$DOCOPT_DOC_CHECK</code> (see <a href="#parser-options">parser options</a>
for more on that).</p>
</div>
<div dir="auto">
<h3 id="user-content-parser-output" tabindex="-1" dir="auto"><a id="user-content-parser-output" aria-hidden="true" href="#parser-output"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parser output</h3>
<p dir="auto">Names of arguments, commands, and options are mapped by replacing everything
that is not an alphanumeric character with an underscore. This means <code>--speed</code>
becomes <code>$<em>_speed</em></code><em>, <code>-f</code> becomes <code>$_f</code>, and <code>&lt;name&gt;</code> becomes <code>_name</code></em>, while
<code>NAME</code> stays as <code>$NAME</code> and <code>set</code> stays as <code>$set</code>.</p>
<p dir="auto">Switches (options without arguments) and commands become <code>true</code> or <code>false</code>.
If a switch or command can be specified more than once, the resulting variable
value will be an integer that has been incremented the number of times the
parameter was specified.</p>
<p dir="auto">Options with values and regular arguments become strings. If an option with a
value or an argument can be specified more than once, the value will be an array
of strings.</p>
<p dir="auto">To clarify, given this (somewhat complex, but concise) doc and invocation:</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="Usage:
  program -v... -s --val=VAL multicmd... command ARG ARGS...

$ program -vvv -s --val XY multicmd multicmd command A 1 2 3"><pre>Usage:
  program -v... -s --val=VAL multicmd... <span>command</span> ARG ARGS...

$ program -vvv -s --val XY multicmd multicmd <span>command</span> A 1 2 3</pre></div>
</div>
</div>
<p dir="auto">The variables and their values will be:</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="_v=3 # -vvv
_s=true # -s
__val=XY # --val XY
multicmd=2 # multicmd multicmd
command=true # command
ARG=A # A
ARGS=(1 2 3) # 1 2 3"><pre>_v=3 <span><span>#</span> -vvv</span>
_s=true <span><span>#</span> -s</span>
__val=XY <span><span>#</span> --val XY</span>
multicmd=2 <span><span>#</span> multicmd multicmd</span>
command=true <span><span>#</span> command</span>
ARG=A <span><span>#</span> A</span>
ARGS=(1 2 3) <span><span>#</span> 1 2 3</span></pre></div>
</div>
</div>
<p dir="auto">You can use <code>$DOCOPT_PREFIX</code> to prefix the above variable names with a custom
string (e.g. specifying <code>DOCOPT_PREFIX=prog</code> would change <code>ARG</code> to
<code>progARG</code>). See <a href="#parser-options">parser options</a> for additional parser
options.</p>
</div>
<div dir="auto">
<h3 id="user-content-commandline-options" tabindex="-1" dir="auto"><a id="user-content-commandline-options" aria-hidden="true" href="#commandline-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Commandline options</h3>
<p dir="auto">The commandline options of <code>docopt.sh</code> only change <em>how</em> the parser is
generated, while global variables specified before <code>eval &#34;$(docopt &#34;$@&#34;)&#34;</code>
itself change the behavior of the parser.</p>
<p dir="auto">The commandline options are:</p>
<table>




<tbody>
<tr>
<td><p dir="auto">Option</p></td>
<td><p dir="auto">Description</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--line-length -n N</code></p></td>
<td><p dir="auto">Max line length when minifying. Disable with <code>0</code> (default: 80)</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--library -l SRC</code></p></td>
<td><p dir="auto"><a href="#library-mode">Generates the dynamic part of the parser</a> and includes the static parts with <code>source SRC</code>.</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--no-auto-params -P</code></p></td>
<td><p dir="auto">Disable auto-detection of parser generation parameters.</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--parser -p</code></p></td>
<td><p dir="auto"><a href="#on-the-fly-parser-generation">Output the parser</a> instead of inserting it in the script.</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--help -h</code></p></td>
<td><p dir="auto">Show the help screen.</p></td>
</tr>
<tr>
<td><p dir="auto"><code>--version</code></p></td>
<td><p dir="auto">Show docopt.sh version.</p></td>
</tr>
</tbody>
</table>
</div>
<div dir="auto">
<h3 id="user-content-parser-options" tabindex="-1" dir="auto"><a id="user-content-parser-options" aria-hidden="true" href="#parser-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parser options</h3>
<p dir="auto">Parser options change the behavior of the parser in various ways. These options
are specified as global variables and must be specified <em>before</em> invoking
<code>eval &#34;$(docopt &#34;$@&#34;)&#34;</code>. You do not need to regenerate the parse when changing
any of these options.</p>
<table>





<tbody>
<tr>
<td><p dir="auto">Option</p></td>
<td><p dir="auto">Default</p></td>
<td><p dir="auto">Description</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_PROGRAM_VERSION</code></p></td>
<td><p dir="auto"><code>false</code></p></td>
<td><p dir="auto">The string to print when <code>--version</code> is specified (<code>false</code> disables the option)</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_ADD_HELP</code></p></td>
<td><p dir="auto"><code>true</code></p></td>
<td><p dir="auto">Set to <code>false</code> to disable the <code>--help</code> option</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_OPTIONS_FIRST</code></p></td>
<td><p dir="auto"><code>false</code></p></td>
<td><p dir="auto">Set to <code>true</code> to treat everything after the first non-option as commands/arguments</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_PREFIX</code></p></td>
<td><p dir="auto"><code>&#34;&#34;</code></p></td>
<td><p dir="auto">Prefixes all variable names with the specified value</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_DOC_CHECK</code></p></td>
<td><p dir="auto"><code>true</code></p></td>
<td><p dir="auto">Set to <code>false</code> to disable checking whether the parser matches the doc</p></td>
</tr>
<tr>
<td><p dir="auto"><code>$DOCOPT_LIB_CHECK</code></p></td>
<td><p dir="auto"><code>true</code></p></td>
<td><p dir="auto">Set to <code>false</code> to disable checking whether the library version and the docopt parser version match</p></td>
</tr>
</tbody>
</table>
</div>
<div dir="auto">
<h3 id="user-content-exiting-with-a-usage-message" tabindex="-1" dir="auto"><a id="user-content-exiting-with-a-usage-message" aria-hidden="true" href="#exiting-with-a-usage-message"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Exiting with a usage message</h3>
<p dir="auto">Oftentimes additional verification of parameters is necessary (e.g. when an
option value is an enum). In those cases you can use <code>docopt_exit &#34;message&#34;</code>
in order to output a message for the user, the function automatically appends a
short usage message (i.e. the <code>Usage:</code> part of the doc) and then exits with
code <code>1</code>.</p>
<p dir="auto">Note that this function is only defined <em>after</em> you have run
<code>eval &#34;$(docopt &#34;$@&#34;)&#34;</code>, it is part of the docopt output.</p>
</div>
<div dir="auto">
<h3 id="user-content-library-mode" tabindex="-1" dir="auto"><a id="user-content-library-mode" aria-hidden="true" href="#library-mode"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Library mode</h3>
<p dir="auto">Instead of inlining the entirety of the parser in your script, you can move the
static parts to an external file and only insert the dynamic part into your
script. This is particularly useful when you have multiple bash scripts in the
same project that use <code>docopt.sh</code>. To generate the library run
<code>docopt.sh generate-library &gt; DEST</code>. The output is written to <code>stdout</code>, so
make sure to add that redirect.</p>
<p dir="auto">Once a library has been generated you can insert the dynamic part of your parser
into your script with <code>docopt.sh --library DEST SCRIPT</code>. The generator will
then automatically add a <code>source DEST</code> to the parser. Make sure to quote your
library path if it contains spaces like so
<code>docopt.sh --library &#39;&#34;/path with spaces/docopt-lib.sh&#34;&#39;</code>. You do not need to
specify <code>--library</code> on subsequent refreshes of the parser, <code>docopt.sh</code> will
automatically glean the previously used parameters from your script and re-apply
them.</p>
<p dir="auto"><code>--library</code> can be any valid bash expression, meaning you can use things like
<code>&#34;$(dirname &#34;$0&#34;)&#34;</code>.</p>
<p dir="auto">On every invocation docopt checks that the library version and the version of
the dynamic part in the script match. The parser exits with an error if that is
not the case.</p>
</div>
<div dir="auto">
<h3 id="user-content-on-the-fly-parser-generation" tabindex="-1" dir="auto"><a id="user-content-on-the-fly-parser-generation" aria-hidden="true" href="#on-the-fly-parser-generation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>On-the-fly parser generation</h3>
<p dir="auto"><strong>ATTENTION</strong>: The method outlined below relies on <code>docopt.sh</code> being installed
and is only intended for development use, do not release any scripts that use
this method.</p>
<p dir="auto">When developing a new script you might add, modify, and remove parameters quite
often. Having to refresh the parser with every change can quickly become
cumbersome and interrupt your workflow. To avoid this you can use the
<code>--parser</code> flag to generate and then immediately <code>eval</code> the output in your
script before invoking <code>eval &#34;$(docopt &#34;$@&#34;)&#34;</code>.</p>
<p dir="auto">The script from the introduction would look like this (only
<code>eval &#34;$(docopt.sh --parser &#34;$0&#34;)&#34;</code> has been added):</p>
<div dir="auto">
<div dir="auto">
<div dir="auto" data-snippet-clipboard-copy-content="#!/usr/bin/env bash

DOC=&#34;Naval Fate.
Usage:
  naval_fate.sh &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;]
  naval_fate.sh shoot &lt;x&gt; &lt;y&gt;

Options:
  --speed=&lt;kn&gt;  Speed in knots [default: 10].&#34;

naval_fate() {
  eval &#34;$(docopt.sh --parser &#34;$0&#34;)&#34;
  eval &#34;$(docopt &#34;$@&#34;)&#34;
  if $move; then
    printf &#34;The %s is now moving to %d,%d at %d knots.\n&#34; &#34;$_name_&#34; &#34;$_x_&#34; &#34;$_y_&#34; &#34;$__speed&#34;
  fi
  if $shoot; then
    printf &#34;You shoot at %d,%d. It&#39;s a hit!\n&#34; &#34;$_x_&#34; &#34;$_y_&#34;
  fi
  return 0
}
naval_fate &#34;$@&#34;"><pre><span><span>#!</span>/usr/bin/env bash</span>

DOC=<span><span>&#34;</span>Naval Fate.</span>
<span>Usage:</span>
<span>  naval_fate.sh &lt;name&gt; move &lt;x&gt; &lt;y&gt; [--speed=&lt;kn&gt;]</span>
<span>  naval_fate.sh shoot &lt;x&gt; &lt;y&gt;</span>
<span></span>
<span>Options:</span>
<span>  --speed=&lt;kn&gt;  Speed in knots [default: 10].<span>&#34;</span></span>

<span>naval_fate</span>() {
  <span>eval</span> <span><span>&#34;</span><span><span>$(</span>docopt.sh --parser <span><span>&#34;</span><span>$0</span><span>&#34;</span></span><span>)</span></span><span>&#34;</span></span>
  <span>eval</span> <span><span>&#34;</span><span><span>$(</span>docopt <span><span>&#34;</span><span>$@</span><span>&#34;</span></span><span>)</span></span><span>&#34;</span></span>
  <span>if</span> <span>$move</span><span>;</span> <span>then</span>
    <span>printf</span> <span><span>&#34;</span>The %s is now moving to %d,%d at %d knots.\n<span>&#34;</span></span> <span><span>&#34;</span><span>$_name_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_x_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_y_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$__speed</span><span>&#34;</span></span>
  <span>fi</span>
  <span>if</span> <span>$shoot</span><span>;</span> <span>then</span>
    <span>printf</span> <span><span>&#34;</span>You shoot at %d,%d. It&#39;s a hit!\n<span>&#34;</span></span> <span><span>&#34;</span><span>$_x_</span><span>&#34;</span></span> <span><span>&#34;</span><span>$_y_</span><span>&#34;</span></span>
  <span>fi</span>
  <span>return</span> 0
}
naval_fate <span><span>&#34;</span><span>$@</span><span>&#34;</span></span></pre></div>
</div>
</div>
<p dir="auto">Since <code>docopt.sh</code> is not patching the script, you also avoid any line number
jumps in your IDE. However, remember to replace this with the proper parser
before you ship the script.</p>
</div>
<div dir="auto">
<h3 id="user-content-developers" tabindex="-1" dir="auto"><a id="user-content-developers" aria-hidden="true" href="#developers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Developers</h3>
<div dir="auto">
<h4 id="user-content-testing" tabindex="-1" dir="auto"><a id="user-content-testing" aria-hidden="true" href="#testing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing</h4>
<p dir="auto"><code>docopt.sh</code> uses <a href="https://pytest.org/" rel="nofollow">pytest</a> for testing. You can run the
testsuite by executing <code>pytest</code> in the root of the project.</p>
<p dir="auto">All
<a href="https://github.com/andsens/docopt.sh/blob/e2cba6d9dc10a1d3366d01976767ae933b90f5bd/tests/docopt-py-usecases.txt">use
cases</a> from the original docopt are used to validate correctness. Per default
pytest uses the bash version that is installed on the system to run the tests.
However, you can specify multiple alternate versions using
<code>--bash-version &lt;versions&gt;</code>, where <code>&lt;versions&gt;</code> is a comma-separated list of
bash versions (e.g. <code>3.2,4.0,4.1</code>). These versions need to be downloaded and
compiled first, which you can do with <code>get_bash.py</code>. The script downloads,
extracts, configures, and compiles the specified bash versions in the
<code>tests/bash-versions</code> folder. Use <code>--bash-version all</code> to test with all the
bash versions that are installed.</p>
</div>
</div>
</div>
</div></article>
          </div></div>
  </body>
</html>
