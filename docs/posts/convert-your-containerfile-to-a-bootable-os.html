<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/containers/podman-desktop-extension-bootc">Original</a>
    <h1>Show HN: Convert your Containerfile to a bootable OS</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/logo.png"><img src="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/logo.png" alt=""/></a></p>
<p dir="auto">Want to create a bootable operating system from a Containerfile? Download this extension!</p>
<p dir="auto">Easily go from container to VM / ISO-on-a-USB / RAW image!</p>

<ul dir="auto">
<li><a href="#technology">Technology</a></li>
<li><a href="#bootable-container-images">Bootable Container Images</a></li>
<li><a href="#read-before-using">Read Before Using</a></li>
<li><a href="#example-images">Example Images</a></li>
<li><a href="#use-case">Use Case</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#contributing">Contributing</a></li>
</ul>

<p dir="auto">The <strong>Bootable Container (bootc)</strong> extension uses <a href="https://github.com/osbuild/bootc-image-builder">bootc-image-builder</a> in order to build bootable <em>container</em> disk images.</p>
<p dir="auto">Once a machine is created from the disk image, it can apply transactional updates &#34;in place&#34; from newly pushed container images (without creating a new disk image). For more information, see <a href="https://containers.github.io/bootc/" rel="nofollow">bootc</a>.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Bootable Container Images</h2><a id="user-content-bootable-container-images" aria-label="Permalink: Bootable Container Images" href="#bootable-container-images"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are many projects at work at creating &#34;bootc&#34; images. Below is a non-exhaustive list of compatible images which are known to work with <a href="https://github.com/osbuild/bootc-image-builder"><code>bootc-image-builder</code></a>.</p>
<p dir="auto"><strong>CentOS:</strong></p>
<ul dir="auto">
<li>Containerfile: <code>FROM quay.io/centos-bootc/centos-bootc:stream9</code></li>
<li>Repo: <a href="https://quay.io/centos-bootc/centos-bootc" rel="nofollow"><code>quay.io/centos-bootc/centos-bootc:stream9</code></a></li>
<li>Example Images: <a href="https://gitlab.com/fedora/bootc/examples" rel="nofollow">gitlab.com/fedora/bootc/examples</a></li>
<li>Documentation: <a href="https://docs.fedoraproject.org/en-US/bootc/" rel="nofollow">fedoraproject.org</a></li>
<li>Source: <a href="https://github.com/centos/centos-bootc">github.com/centos/centos-bootc</a></li>
<li>Notes: N/A</li>
</ul>
<p dir="auto"><strong>Fedora:</strong></p>
<ul dir="auto">
<li>Containerfile: <code>FROM quay.io/fedora/fedora-bootc:40</code></li>
<li>Repo: <a href="https://quay.io/fedora/fedora-bootc" rel="nofollow"><code>quay.io/fedora/fedora-bootc:40</code></a></li>
<li>Example Images: <a href="https://gitlab.com/fedora/bootc/examples" rel="nofollow">gitlab.com/fedora/bootc/examples</a></li>
<li>Documentation: <a href="https://docs.fedoraproject.org/en-US/bootc/" rel="nofollow">fedoraproject.org</a></li>
<li>Source: <a href="https://gitlab.com/fedora/bootc/base-images" rel="nofollow">gitlab.com/fedora/bootc/base-images</a></li>
<li>Notes: Must select &#34;XFS&#34; or &#34;EXT4&#34; for the root filesystem when building in the GUI. <a href="https://docs.fedoraproject.org/en-US/bootc/default-rootfs-type/" rel="nofollow">Read more here.</a></li>
</ul>
<p dir="auto"><strong>RHEL:</strong></p>
<ul dir="auto">
<li>Containerfile: <code>FROM registry.redhat.io/rhel9/rhel-bootc:9.4</code></li>
<li>Repo: <a href="https://catalog.redhat.com/search?gs&amp;q=bootc" rel="nofollow"><code>registry.redhat.io/rhel9/rhel-bootc:9.4</code></a></li>
<li>Documentation: <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_image_mode_for_rhel_to_build_deploy_and_manage_operating_systems/index#doc-wrapper" rel="nofollow">Red Hat Customer Portal</a></li>
</ul>
<p dir="auto">The images can then be added to your Containerfile:</p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM quay.io/centos-bootc/centos-bootc:stream9"><pre><span>FROM</span> quay.io/centos-bootc/centos-bootc:stream9</pre></div>

<ul dir="auto">
<li><a href="https://docs.fedoraproject.org/en-US/bootc/building-containers/" rel="nofollow">Fedora Building Containers Guide</a>: provides an overview on how to create Fedora/CentOS-derived bootc images.</li>
<li><a href="https://containers.github.io/bootc/building/guidance.html" rel="nofollow">Bootc General Guidance</a>: provides a general configuration overview for bootc images.</li>
</ul>

<p dir="auto">Some concepts to grasp before using.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto"><strong>Think of it as an OS provisioning tool!</strong></h3><a id="user-content-think-of-it-as-an-os-provisioning-tool" aria-label="Permalink: Think of it as an OS provisioning tool!" href="#think-of-it-as-an-os-provisioning-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You are &#34;creating&#34; an OS straight from a Containerfile, isn&#39;t that awesome?</p>
<p dir="auto"><strong>FIRST</strong> realize that you are creating an OS with all your applications, developer tools, even games that you want.</p>
<p dir="auto"><strong>SECONDLY</strong> ask yourself what applications you want to have running (perhaps on boot too!).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Creating your first bootable OS Containerfile</h3><a id="user-content-creating-your-first-bootable-os-containerfile" aria-label="Permalink: Creating your first bootable OS Containerfile" href="#creating-your-first-bootable-os-containerfile"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Want a quick straight-to-the-point Hello World Containerfile?</p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM quay.io/centos-bootc/centos-bootc:stream9
# Change your root password for a &#34;test login&#34; that
# allows to log in on a virtual/physical console
# NOTE: While some base images may set `PermitRootLogin prohibit-password`
# for OpenSSH, not all will.
# This is VERY dangerous and only meant for Hello World purposes.
RUN echo &#34;root:root&#34; | chpasswd"><pre><span>FROM</span> quay.io/centos-bootc/centos-bootc:stream9
<span><span>#</span> Change your root password for a &#34;test login&#34; that</span>
<span><span>#</span> allows to log in on a virtual/physical console</span>
<span><span>#</span> NOTE: While some base images may set `PermitRootLogin prohibit-password`</span>
<span><span>#</span> for OpenSSH, not all will.</span>
<span><span>#</span> This is VERY dangerous and only meant for Hello World purposes.</span>
<span>RUN</span> echo <span>&#34;root:root&#34;</span> | chpasswd</pre></div>
<p dir="auto">After creating your image you can now login and explore your bootable OS.</p>

<p dir="auto">Want to view more example images Such as <a href="https://gitlab.com/bootc-org/examples/-/tree/main/httpd" rel="nofollow"><code>httpd</code></a> and <a href="https://gitlab.com/bootc-org/examples/-/tree/main/nvidia" rel="nofollow"><code>nvidia</code></a>?</p>
<p dir="auto">All of our maintained example images are on the <a href="https://gitlab.com/fedora/bootc/examples" rel="nofollow">gitlab.com/fedora/bootc/examples</a> repo.</p>
<p dir="auto">You can also pull our example image based on the <a href="https://gitlab.com/bootc-org/examples/-/tree/main/httpd" rel="nofollow"><code>httpd</code></a> example:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/clicking_pull.gif"><img src="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/clicking_pull.gif" alt="" data-animated-image=""/></a></p>
<p dir="auto">After building, read our <a href="https://github.com/containers/podman-desktop-extension-bootc/blob/main/docs/vm_guide.md">Virtual Machine Guide</a> on how to launch your image and access your HTTP server.</p>

<p dir="auto">Go from a <a href="https://containers.github.io/bootc/" rel="nofollow">bootc</a> compatible derived container build to a disk image format:</p>
<ul dir="auto">
<li><code>qcow2</code>: QEMU Disk Images</li>
<li><code>ami</code>: Amazon Machine Images</li>
<li><code>raw</code>: RAW disk image an MBR or GPT partition table</li>
<li><code>iso</code>: Unattended installation method (USB sticks / install-on-boot)</li>
<li><code>vmdk</code>: Usable in vSphere</li>
</ul>
<p dir="auto">The list above is what is supported by the underlying <code>bootc-image-builder</code> technology. The list can <a href="https://github.com/osbuild/bootc-image-builder?tab=readme-ov-file#-image-types">be found here</a>.</p>

<div dir="auto"><h3 tabindex="-1" dir="auto">Requirement 1. Software and hardware requirements</h3><a id="user-content-requirement-1-software-and-hardware-requirements" aria-label="Permalink: Requirement 1. Software and hardware requirements" href="#requirement-1-software-and-hardware-requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>OS:</strong></p>
<p dir="auto">Compatible on Windows, macOS &amp; Linux</p>
<p dir="auto"><strong>Software:</strong></p>
<ul dir="auto">
<li><a href="https://github.com/containers/podman-desktop">Podman Desktop 1.10.0+</a></li>
<li><a href="https://github.com/containers/podman">Podman 5.0.1+</a></li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Requirement 2. Rootful mode on Podman Machine</h3><a id="user-content-requirement-2-rootful-mode-on-podman-machine" aria-label="Permalink: Requirement 2. Rootful mode on Podman Machine" href="#requirement-2-rootful-mode-on-podman-machine"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Podman Machine requirements:</p>
<ul dir="auto">
<li><strong>Rootful mode enabled</strong></li>
<li><em>At least</em> 6GB of RAM allocated in order to build the disk image</li>
</ul>
<p dir="auto">Rootful mode can be enabled through the CLI to an already deployed VM:</p>
<div dir="auto" data-snippet-clipboard-copy-content="podman machine stop
podman machine set --rootful
podman machine start"><pre>podman machine stop
podman machine <span>set</span> --rootful
podman machine start</pre></div>
<p dir="auto">Or set when initially creating a Podman Machine via Podman Desktop:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/rootful_setup.png"><img src="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/rootful_setup.png" alt="rootful setup"/></a></p>
<p dir="auto"><strong>Linux users:</strong></p>
<p dir="auto">On Linux, you are unable to create a Podman Machine through the GUI of Podman Desktop, to create a rootful Podman Machine you can run the following commands:</p>
<div dir="auto" data-snippet-clipboard-copy-content="podman machine init --rootful
podman machine start"><pre>podman machine init --rootful
podman machine start</pre></div>

<p dir="auto">This extension can be installed through the <strong>Extensions</strong> section of Podman Desktop within the <strong>Catalog</strong> tab:</p>
<ol dir="auto">
<li>Go to <strong>Extensions</strong> in the navbar.</li>
<li>Click on the <strong>Catalog</strong> tab.</li>
<li>Install the extension.</li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/catalog_install.gif"><img src="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/catalog_install.gif" alt="" data-animated-image=""/></a></p>

<p dir="auto">A version of the extension using the latest commit changes can be installed via the <strong>Install custom...</strong> button with the following link:</p>
<div data-snippet-clipboard-copy-content="ghcr.io/containers/podman-desktop-extension-bootc:nightly"><pre><code>ghcr.io/containers/podman-desktop-extension-bootc:nightly
</code></pre></div>

<ol dir="auto">
<li><strong>Build your bootc-enabled Containerfile:</strong></li>
</ol>
<blockquote>
<p dir="auto">In the example below, we are going to change the root password for testing purposes when accessing the OS.</p>
</blockquote>
<div dir="auto" data-snippet-clipboard-copy-content="FROM quay.io/centos-bootc/centos-bootc:stream9

# Change the root password
# CAUTION: This is NOT recommended and is used only for testing / hello world purposes
RUN echo &#34;root:root&#34; | chpasswd"><pre><span>FROM</span> quay.io/centos-bootc/centos-bootc:stream9

<span><span>#</span> Change the root password</span>
<span><span>#</span> CAUTION: This is NOT recommended and is used only for testing / hello world purposes</span>
<span>RUN</span> echo <span>&#34;root:root&#34;</span> | chpasswd</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/build_image.gif"><img src="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/build_image.gif" alt="" data-animated-image=""/></a></p>
<ol start="2" dir="auto">
<li><strong>Build the disk image:</strong></li>
</ol>
<blockquote>
<p dir="auto">Build the disk image, this takes approximatley 2-5 minutes depending on the performance of your machine.</p>
</blockquote>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/bootc_building.gif"><img src="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/bootc_building.gif" alt="" data-animated-image=""/></a></p>
<ol start="3" dir="auto">
<li><strong>Launching the VM:</strong></li>
</ol>
<blockquote>
<p dir="auto">See our <a href="https://github.com/containers/podman-desktop-extension-bootc/blob/main/docs/vm_guide.md">Virtual Machine Guide</a> on how to launch the image!</p>
</blockquote>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/os_booting.gif"><img src="https://raw.githubusercontent.com/containers/podman-desktop-media/bootc-extension/gifs/os_booting.gif" alt="" data-animated-image=""/></a></p>

<p dir="auto">Preferences such as the default <code>bootc-builder-image</code> as well as timeouts can be adjusted within the <strong>Preferences</strong> section of Podman Desktop.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/preferences.png"><img src="https://raw.githubusercontent.com/containers/podman-desktop-extension-bootc/main/docs/img/preferences.png" alt=""/></a></p>

<p dir="auto">Want to help develop and contribute to the bootc extension? View our <a href="https://github.com/containers/podman-desktop-extension-bootc/blob/main/CONTRIBUTING.md">CONTRIBUTING</a> document.</p>
</article></div></div>
  </body>
</html>
