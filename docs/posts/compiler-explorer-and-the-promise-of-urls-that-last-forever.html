<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://xania.org/202505/compiler-explorer-urls-forever">Original</a>
    <h1>Compiler Explorer and the promise of URLs that last forever</h1>
    
    <div id="readability-page-1" class="page"><div>
    <div>
        <h2>Compiler Explorer and the Promise of URLs That Last Forever</h2>

        <p>The history is this: back in the old days (2012), we used to store the entire <a href="https://godbolt.org">Compiler Explorer</a> state in the URL. That got unwieldy (who would have thought encoding an entire compiler state in a URL might get a bit long?), so we added support for Google’s link shortener <a href="https://goo.gl">goo.gl</a> in March 2014. That meant short links were of the form <code>goo.gl/abc123</code>. Clicking a goo.gl link would eventually redirect you to the full URL link on our site, and we’d decode the state from the URL.</p>
<p>In 2016, <a href="https://stackoverflow.com">Stack Overflow</a> banned link shorteners because of how they cloak the actual destination of links. Abusers could post innocent goo.gl links that directed folks unwittingly to bad content. However, that meant our Compiler Explorer links were also affected. At the time, we had no intention of storing any user data, so we came up with a hack: we still used goo.gl, but we then rewrote the link we handed out to be <code>godbolt.org/g/abc123</code> (where the abc123 is the goo.gl unique ID). We then redirected any hits to <code>/g/abc123</code> to <code>goo.gl/abc123</code>, which then (finally) redirected back to godbolt.org with the appropriate state in the URL. If you’re keeping track, that’s three redirects to show you some assembly code. We were really committed to making things complicated. Later, we used Google’s API to avoid the redirection dance.</p>
<p>By 2018, the limitations of storing state in the URL started to bite. There’s a limit to how long a URL can be (and we’d already started compressing the data in the URL), so we needed a better solution. We finally implemented our own storage solution: we hash the input, save the state as a JSON document on <a href="https://aws.amazon.com/s3/">S3</a> under the hash, and then give out a shortened form of the hash as a <code>godbolt.org/z/hashbit</code> URL. We use <a href="https://aws.amazon.com/dynamodb/">DynamoDB</a> to store the mapping of shortened hashes to the full paths (accounting for partial collisions, etc.). And, amusingly, we check the short link’s hash for rude words and add deliberate extra information into the document until we no longer get a rude word. Yes, we literally check if your shortened URL contains profanity. Because apparently even random hashes can’t be trusted to keep it clean. This led to <a href="https://github.com/compiler-explorer/compiler-explorer/issues/1297">bug #1297</a>, which remains one of my favourite issues we’ve ever had to fix.</p>
<p>We still support the <code>godbolt.org/g/abc123</code> links, but… despite Google <a href="https://developers.googleblog.com/en/transitioning-google-url-shortener-to-firebase-dynamic-links/">solemnly promising</a> that “all existing links will continue to redirect to the intended destination,” it went read-only a few years back, and now they’re <a href="https://developers.googleblog.com/en/google-url-shortener-links-will-no-longer-be-available/">finally sunsetting it</a> in August 2025. Here I was in 2014, thinking I was so clever using Google’s shortener. “It’ll be around forever!” I said. “Google never discontinues products!” I said. Er…</p>
<p>That means we’ll no longer be able to resolve goo.gl-based links! Which is, to use technical terminology, a bit pants. One of my founding principles is that Compiler Explorer links should last forever. I can’t do anything about the <em>really</em> legacy actual <code>goo.gl</code> links, but I can do something about the <code>godbolt.org/g/abc123</code> links!</p>
<p>Over the last few days, I’ve been scraping everywhere I can think of, collating the links I can find out in the wild, and compiling my own database of links<sup id="fnref:2"><a href="#fn:2">1</a></sup> – and importantly, the URLs they redirect to. So far, I’ve found 12,000 links from scraping:</p>
<ul>
<li><a href="https://developers.google.com/custom-search">Google</a> (using their web search API)</li>
<li><a href="https://docs.github.com/en/rest">GitHub</a> (using their API)</li>
<li>Our own (somewhat limited) web logs</li>
<li>The <a href="https://archive.org">archive.org</a> Stack Overflow data dumps</li>
<li>Archive.org’s own list of archived webpages</li>
</ul>
<p>
<img src="https://xania.org/202505/sqlite.png" width="600" height="128" alt="SQLite terminal showing query result: SELECT COUNT(*) from google_links; returning 12298 rescued links"/>
</p>

<p>We’re now <a href="https://github.com/compiler-explorer/compiler-explorer/pull/7724">using the database in preference</a> to <code>goo.gl</code> internally, so I’m also keeping an eye on new “g” links that we don’t yet have.</p>
<p>Thanks to <a href="https://stackoverflow.com/users/224132/peter-cordes">Peter Cordes</a> for reminding us about this issue and <a href="https://github.com/compiler-explorer/compiler-explorer/discussions/7719">bringing it to our attention</a><sup id="fnref:1"><a href="#fn:1">2</a></sup>.</p>
<p>If you have a secret cache of godbolt.org/g/abc123 links you have lying around, now’s the time to visit each of them! That will ensure they’re in my web logs and I’ll add them to the database. Otherwise, sadly, in August 2025 those links will stop working, joining the great digital graveyard alongside Flash games and GeoCities pages.</p>
<h2>The Bigger Picture</h2>
<p>This whole saga reinforces why I’m skeptical of relying on third-party services for critical infrastructure. Google’s URL shortener was supposed to be permanent. The redirect chains we built were clever workarounds that bought us time, but ultimately, the only way to truly keep a promise of “URLs that last forever” is to own the entire stack.</p>
<p>It’s been a fascinating archaeological dig through the internet, hunting down these legacy links like some sort of digital Indiana Jones, except instead of ancient artifacts I’m rescuing compiler flags and optimization examples. Each one represents someone’s attempt to share knowledge, ask a question, or demonstrate a concept. Preserving them feels like preserving a small piece of programming history.</p>
<p>So if you’ve got old Compiler Explorer links bookmarked somewhere, dust them off and give them a click. You’ll be helping preserve a little corner of the internet’s shared knowledge – and keeping a promise I made back in 2012. And hey, at least this time I’m in control of the infrastructure. What could possibly go wrong?</p>
<hr/>
<h3>Disclaimer</h3>
<p>This article was written by a human, but links were suggested by and grammar checked by an LLM.</p>

    </div>
</div></div>
  </body>
</html>
