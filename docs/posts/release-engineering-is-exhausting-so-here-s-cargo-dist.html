<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.axo.dev/2023/02/cargo-dist">Original</a>
    <h1>Release engineering is exhausting so here&#39;s cargo-dist</h1>
    
    <div id="readability-page-1" class="page"><div><p><!--[-->You have a cool idea for a Rust application, quickly hack up a Cargo project for it, and hey, it works! You pull out that old laptop from university -- the one that barely works because you convinced it to dual boot some version of Gentoo and Windows 7 -- and hey, it works on there too! Dang, isn&#39;t it nice for Rust projects to be so reliably portable between systems?<!--]--></p><p><!--[-->Happily convinced of your coding prowess, you mash <code><!--[-->cargo publish<!--]--></code> into your terminal and tell your friends to <code><!--[-->cargo install axolotlsay<!--]--></code>. It&#39;s glorious:<!--]--></p><div><!--[--><pre><code><span><span>axolotlsay </span><span>&#34;</span><span>blub blub blub</span><span>&#34;</span></span><span></span><span><span>         +----------------+</span></span><span><span>         </span><span>|</span><span> blub blub blub </span><span>|</span></span><span><span>         +----------------+</span></span><span><span>        /</span></span><span><span>‚âΩ(‚óï ·¥ó ‚óï)‚âº</span></span></code></pre><!--]--></div><p><!--[-->Then your friend who uses Ubuntu says<!--]--></p><blockquote><!--[--><p><!--[-->@tux4life: <code><!--[-->cargo install<!--]--></code> fails because you&#39;re using unstable features?<!--]--></p><!--]--></blockquote><p><!--[-->Huh??? You definitely aren&#39;t using unstable features!<!--]--></p><p><!--[-->Oh. Oh no. They did <code><!--[-->apt install rustc<!--]--></code>. Their compiler is SO OLD and you just HAD to use new features from the latest release! Clippy complained that you weren&#39;t!!<!--]--></p><p><!--[-->Then your other friend who uses Windows chimes in<!--]--></p><blockquote><!--[--><p><!--[-->@dosboxer: what&#39;s cargo?<!--]--></p><!--]--></blockquote><p><!--[-->Oh right, you haven&#39;t infected them with your obsession with Rust yet.<!--]--></p><p><!--[-->Maybe <code><!--[-->cargo install<!--]--></code> isn&#39;t that great? Maybe you should make prebuilt binaries! Yeah! You&#39;ve definitely seen some of the bigger Rust projects do that. Like uh, ripgrep! They&#39;ve <a href="https://github.com/BurntSushi/ripgrep/releases/tag/13.0.0" rel="nofollow"><!--[-->got Github Releases<!--]--></a> with prebuilt binaries! Looks like they have some <a href="https://github.com/BurntSushi/ripgrep/blob/fe97c0a152cabc1bc07ec36b4b1e27cd230c3014/.github/workflows/release.yml" rel="nofollow"><!--[-->Github CI that generates it<!--]--></a>!<!--]--></p><p><!--[-->Hmm, that looks kinda reasonable, although they do a bunch of stuff that doesn&#39;t make sense for your project, so I guess you&#39;ve gotta comment out a bunch of these shell scripts and, oh damn you made a typo and the CI job failed 20 minutes in. And again. And again...<!--]--></p><p><!--[-->Congrats kid you&#39;re A Release Engineer now and your life is hell. Enjoy debugging basic typos on a remote machine with 20 minute latency because you sure can&#39;t run those Github CI bash-scripts-in-yaml files locally! Couldn&#39;t be me! I definitely don&#39;t have several repos with dozens of prerelease git tags from me trying to debug the dang release process!<!--]--></p><p><!--[-->But anyway you get it working and link your friends the Github Release and then they just come back with<!--]--></p><blockquote><!--[--><p><!--[-->@tux4life: i&#39;m getting weird glibc errors when I try to run it...<!--]--></p><p><!--[-->@dosboxer: windows just &#34;protected my PC&#34; and prevented it from running...<!--]--></p><p><!--[-->@bigmacfan: how do I get this on my PATH?<!--]--></p><p><!--[-->@nixuserdottxt: it just says &#34;file not found&#34;???<!--]--></p><!--]--></blockquote><p><!--[-->There&#39;s Gotta Be A Better Way!‚Ñ¢Ô∏è<!--]--></p><p><!--[-->As you can see, you&#39;re going to run into annoying end-user issues regardless of how you choose to publish a Rust application.<!--]--></p><blockquote><!--[--><p><!--[-->This section is <em><!--[-->maybe<!--]--></em> just an excuse for me to rant about all these random problems with Release Engineering... you can skip to the next section if you just want to learn more about cargo-dist, I GUESS.<!--]--></p><!--]--></blockquote><p><!--[-->If you&#39;re going to put no effort into it, <code><!--[-->cargo publish<!--]--></code> and <code><!--[-->cargo install<!--]--></code> are... surprisingly effective! Say what you will about Cargo, but it&#39;s really dang reliable when it comes to building a random project on crates.io on a random machine! This makes it a pretty solid option for tools-for-other-rust-developers. Just a few keystrokes and a few minutes of waiting and I&#39;ve reliably got a development machine setup with cargo-release, cargo-binstall, cargo-fuzz, cargo-insta, and so on! Heck it will probably even work on systems the application was never tested on, because Rust builds tend to Just Work.<!--]--></p><p><!--[-->But there&#39;s definitely some tradeoffs:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->You need to have a compatible version of Rust<!--]--></strong>: You need to hold back on using The Absolute Latest Rust Features if you want to support people with older Rust toolchains (something that&#39;s more reasonable for libraries, but needlessly restrictive for applications). Also on rare occasion a newer compiler <em><!--[-->could<!--]--></em> lose the ability to compile the program, but that&#39;s not a huge concern with Rust (Rust devs try hard to avoid this, but nothing&#39;s perfect).<!--]--></li><li><!--[--><strong><!--[-->Not everyone has a Rust toolchain<!--]--></strong>: whether you&#39;re making a CLI devtool or The Next Big Videogame, you&#39;re making an application for someone who probably doesn&#39;t care about the language it&#39;s written in and just wants to download and run it! Won&#39;t anyone think of the Gamers!?<!--]--></li><li><!--[--><strong><!--[-->Some things can&#39;t be published to crates.io<!--]--></strong>: Most obviously you might have proprietary source code or secrets-that-are-needed-at-build-time that can&#39;t be published. But even if you don&#39;t care about that you might just run into size limits on crates.io if your application has <a href="https://github.com/servo/servo/issues/12695" rel="nofollow"><!--[-->too many static assets<!--]--></a> like images.<!--]--></li><li><!--[--><strong><!--[-->Building rust packages takes a lot of time and resources<!--]--></strong>: Look we&#39;re not talking Chromium build times, but if you have a task that takes 5 minutes and 4 of those are building the Rust application that does the work... that adds up. Heck, if the target hardware is too weak or <a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html" rel="nofollow"><!--[-->obscure<!--]--></a> it might be literally impossible to run rustc on it!<!--]--></li><!--]--></ul><p><!--[-->If any of those are too big of a problem for you, then you probably want to build official binaries/installers for your applications and have users download and run them directly. Unfortunately, when you try to do this you quickly learn that <code><!--[-->cargo install<!--]--></code> was solving a lot of annoying problems for you:<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->System Dependencies<!--]--></strong>: Rust applications don&#39;t have many system requirements (equivalent to C), but they&#39;re unavoidable. Any time your application needs a system API you&#39;re saying &#34;I won&#39;t run on machines that don&#39;t have this API&#34;. When you build your Rust applications, do you take the time to say what Linux glibc versions you support? What macOS SDKs you support? If not, the compiler has no idea what to choose other than &#34;whatever&#39;s supported by the current machine&#34;. That can very easily result in a binary which runs great on the machine it was built on but can&#39;t run at all on other systems. This is one of many reasons folks justifiably love <a href="https://musl.libc.org/" rel="nofollow"><!--[-->musl<!--]--></a> for prebuilt Linux binaries, but now you need to get musl-tools and learn about cross-compiling and... üò≠<!--]--></li><li><!--[--><strong><!--[-->Building For Everything<!--]--></strong>: Speaking of cross-compilation... how many computers do you have? Windows? macOS? Linux? Oh great there&#39;s ARM64 macbooks now? Oh no they&#39;ve got Linux running on those too now..? Wait, what&#39;s RISC-V? Tools like <a href="https://github.com/cross-rs/cross" rel="nofollow"><!--[-->cargo-cross<!--]--></a> definitely <em><!--[-->help<!--]--></em> with reducing the number of machines you need, but also most Rust devs I know run away screaming as soon as you say &#34;Docker&#34;, to say nothing of the fact that Apple... Really Does Not Want You Doing That (and weirdly NixOS? (unless you&#39;re making a <a href="https://flatpak.org/" rel="nofollow"><!--[-->Flatpak<!--]--></a>?? (but those don&#39;t work for CLIs??? (aAaAAAaaAAAA????))))<!--]--></li><li><!--[--><strong><!--[-->Building Locally<!--]--></strong>: Of course the Easy Solution for most of your cross-compilation woes is that you use something like Github CI to spin up a bunch of native machines for the targets you care about (and for the platforms you do need to cross-compile for you&#39;re hopefully doing a smaller leap, like x64 macOS -&gt; ARM64 macOS). <a href="https://github.com/taiki-e/create-gh-release-action" rel="nofollow"><!--[-->taiki-e/crate-gh-release-action<!--]--></a> is absolutely <em><!--[-->wonderful<!--]--></em> for streamlining a lot of this! But now your build system is... <em><!--[-->checks notes<!--]--></em>... shell scripts embedded in an executable yaml file that has its execution distributed across 7 different machines over the network? I really hope you don&#39;t need to debug that locally (<em><!--[-->sobs in Windows user<!--]--></em>).<!--]--></li><li><!--[--><strong><!--[-->Hosting The Artifacts<!--]--></strong>: Nice binaries you&#39;ve got there, where are you putting them? How are people going to find them? How are they going to know which one to use? Ah just uploaded some <code><!--[-->.tar.gz<!--]--></code> bundles to a Github Release your users need to find? And they need to know they want <code><!--[-->aarch64-unknown-linux-macos.tar.gz<!--]--></code> for an arm macbook?<!--]--></li><li><!--[--><strong><!--[-->Downloading, Installing, Updating<!--]--></strong>: It sure was handy that <code><!--[-->cargo install<!--]--></code> handled fetching over the network and unpacking the contents of the package! And that it put it on your PATH! And registered the application such that <code><!--[-->cargo uninstall<!--]--></code> and updates work! Now your users need to fumble around with unpacking it manually, find the actual application, and put it in a custom <code><!--[-->bin<!--]--></code> directory they&#39;ve added to their PATH!<!--]--></li><li><!--[--><strong><!--[-->Scary Warnings<!--]--></strong>: Another thing <code><!--[-->cargo install<!--]--></code> was doing for you was making the binary implicitly trusted by the system. With prebuilt binaries on macOS and Windows, your user is probably going to get some scary warnings about untrusted applications they need to bypass with a secret handshake! Fun! (Did you know the warning you get on Windows isn&#39;t about code signing, but is actually just a special flag Windows&#39; builtin unzipping tool sets on all executables it extracts?)<!--]--></li><!--]--></ul><p><!--[-->And regardless of which approach you&#39;re opting for, you&#39;re probably dropping a lot of useful and important things on the ground!<!--]--></p><ul><!--[--><li><!--[--><strong><!--[-->Debuginfo<!--]--></strong>: By default <code><!--[-->cargo install<!--]--></code> and <code><!--[-->cargo build --release<!--]--></code> disable most debuginfo, which makes sense, debuginfo is Very Big... but this is a false dichotomy! This is why we have <a href="https://doc.rust-lang.org/cargo/reference/profiles.html#split-debuginfo" rel="nofollow"><!--[-->split-debuginfo<!--]--></a> which lets us have a nice and small optimized binary with the big debuginfo on a symbol server somewhere for when a debugger or crashreporter needs it! Even if you don&#39;t have a use for them today, once you&#39;ve thrown out the build directory those things are gone forever! Are you archiving pdbs, dSYMs, and dwps for all your executables? Why not!?<!--]--></li><li><!--[--><strong><!--[-->Frame Pointers<!--]--></strong>: <a href="https://hacks.mozilla.org/2022/06/everything-is-broken-shipping-rust-minidump-at-mozilla/" rel="nofollow"><!--[-->I AM ASKING YOU AGAIN TO ENABLE FRAME POINTERS IN YOUR BUILDS, YOUR LOCAL PERFORMANCE ENGINEER WILL THANK YOU FOR THE GIFT.<!--]--></a><!--]--></li><li><!--[--><strong><!--[-->Link-Time Optimization<!--]--></strong>: Did you know that <code><!--[-->install<!--]--></code> and <code><!--[-->cargo build --release<!--]--></code> actually leave some performance on the table? For the sake of compile times (and resource usage), they don&#39;t use the heaviest form of <a href="https://doc.rust-lang.org/cargo/reference/profiles.html#lto" rel="nofollow"><!--[-->LTO<!--]--></a>. This is honestly probably the right call for the way most people use those commands, but if you&#39;re building A Published Release there&#39;s a decent argument to crank the knob back towards &#34;hellish build times&#34; for those last few percent!<!--]--></li><!--]--></ul><p><!--[-->There&#39;s so many things to care about!!!<!--]--></p><p><!--[-->Alright so here&#39;s my pitch on how to deal with those problems: <a href="https://github.com/axodotdev/cargo-dist/" rel="nofollow"><!--[-->cargo-dist<!--]--></a>, <code><!--[-->cargo build<!--]--></code> but For Building Final Distributable Artifacts! No more copying around hard-to-run shell scripts, just run <code><!--[-->cargo dist<!--]--></code> and it will handle everything for you -- on any machine!<!--]--></p><p><!--[-->This includes (to various levels of &#34;implemented&#34;):<!--]--></p><ul><!--[--><li><!--[-->Building all your binaries with Production Flags<!--]--></li><li><!--[-->Copying the binaries and static assets into zips/tars (or more!)<!--]--></li><li><!--[-->Gathering split-debuginfo files for all the binaries<!--]--></li><li><!--[-->Generating installers (scope TBD, but at least curl-sh scripts)<!--]--></li><!--]--></ul><p><!--[-->But of course that doesn&#39;t <em><!--[-->really<!--]--></em> solve all of those problems. I haven&#39;t solved the treachery of CI scripting -- OH BUT WAIT I HAVE. Because cargo-dist fundamentally understands what it&#39;s supposed to do for any given platform/target, we can have my favourite command: <code><!--[-->cargo dist generate-ci<!--]--></code>! This command <em><!--[-->generates the ci scripts to invoke itself<!--]--></em>!<!--]--></p><p><!--[-->For Github this means it will:<!--]--></p><ul><!--[--><li><!--[-->Wait for a git tag to be pushed that looks like a version<!--]--></li><li><!--[-->Create a draft Github Release‚Ñ¢Ô∏è for that version<!--]--></li><li><!--[-->Spin up machines to build all the targets<!--]--></li><li><!--[-->Download a prebuilt version of cargo-dist<!--]--></li><li><!--[-->Invoke cargo-dist as needed<!--]--></li><li><!--[-->Upload the resulting artifacts to the Github Release‚Ñ¢Ô∏è<!--]--></li><li><!--[-->Upload a machine-readable manifest describing all the artifacts<!--]--></li><li><!--[-->On success of all tasks, mark the Github Release‚Ñ¢Ô∏è as a non-draft<!--]--></li><!--]--></ul><p><!--[-->The easiest way to get that started is with another great command that already exists, <a href="https://github.com/crate-ci/cargo-release" rel="nofollow"><!--[-->cargo-release<!--]--></a>. So a way-too-quick start for this is just:<!--]--></p><div><!--[--><pre><code><span><span># install tools</span></span><span><span>cargo install cargo-dist</span></span><span><span>cargo install cargo-release</span></span><span></span><span><span># one-time setup of ci scripts and build flags</span></span><span><span>cargo dist init --ci=github</span></span><span><span>git add .</span></span><span><span>git commit -am </span><span>&#34;</span><span>wow shiny new cargo-dist CI!</span><span>&#34;</span></span><span></span><span><span># cut a release</span></span><span><span>cargo release 0.1.0</span></span></code></pre><!--]--></div><p><!--[-->After that you can just kick back and relax, because in a few minutes and you&#39;ll have a Github Release with everything built and uploaded!<!--]--></p><p><!--[-->At this point it&#39;s worth noting that <strong><!--[-->you&#39;re not locked into Github&#39;s ecosystem, because you haven&#39;t invested a drop of effort into it<!--]--></strong>. All you did was tell cargo-dist &#34;hey I&#39;m using github&#34; and it took the wheel. In principle (once implemented), switching to Gitlab or whatever else should be as easy as <code><!--[-->cargo dist generate-ci gitlab<!--]--></code>. Or if you&#39;ve got something more bespoke that we don&#39;t support, well, the <code><!--[-->cargo dist<!--]--></code> command was already doing most of the heavy lifting, so hand-writing CI orchestration for it should hopefully be a lot easier!<!--]--></p><p><!--[-->Or heck, go really bespoke and run <code><!--[-->cargo dist<!--]--></code> locally, because again, you can! Really savor the experience of artisanally uploading the artifacts to your favourite FTP server.<!--]--></p><p><!--[-->Oh, and did I mention that this all happens to work well with another community tool, <a href="https://github.com/cargo-bins/cargo-binstall" rel="nofollow"><!--[-->cargo-binstall<!--]--></a>? It tries to fetch prebuilt binaries for projects published on crates.io, and as it turns out if you make sure your <code><!--[-->Cargo.toml<!--]--></code> has the <code><!--[-->repository<!--]--></code> field properly set to point at your Github repo then binstall will perfectly understand the Github Releases‚Ñ¢Ô∏è cargo-dist creates, so it can fetch and install those binaries automagically!<!--]--></p><p><!--[-->Alright so I&#39;ve given you The Pitch of how this should work, but how does it actually work <em><!--[-->today<!--]--></em>? Well, yes, I wouldn&#39;t announce this if not -- but there&#39;s a lot of future work to do! Actually no I take that back, it&#39;s definitely perfect. Those familiar with <a href="https://rust-unofficial.github.io/too-many-lists/" rel="nofollow"><!--[-->my broader oeuvre<!--]--></a> know this will absolutely be a perfectly crafted demo that avoids all the sharp corners of cargo-dist!<!--]--></p><p><!--[-->Let&#39;s do some trivial updates to one of my personal projects, <a href="https://github.com/rust-minidump/minidump-debugger" rel="nofollow"><!--[-->minidump-debugger<!--]--></a>, and try to publish a new version with cargo-dist!<!--]--></p><p><!--[-->I had already put in some work to setup release CI and it&#39;s... yep, <a href="https://github.com/rust-minidump/minidump-debugger/blob/9bdd0242ecd1be9847f8703fed3b685525f0ee4b/.github/workflows/release.yml" rel="nofollow"><!--[-->some scripts I copied from ripgrep and edited to work for my project<!--]--></a>!<!--]--></p><p><!--[-->The commit history for the file is uh, about what you&#39;d expect:<!--]--></p><p><!--[--><img src="https://vaibhavsagar.com/images/blog/2023/02/cargo-dist/old-commits.png" alt="A bunch of frustrated commits as I try to edit the CI in prod"/><!--]--></p><p><!--[-->But I&#39;m pretty sure it works? At very least it to produced the <a href="https://github.com/rust-minidump/minidump-debugger/releases/tag/v0.3.1" rel="nofollow"><!--[-->v0.3.1 Github Release<!--]--></a> with prebuilt zips for the 3 major x64 platforms. Anyway time to burn that all to the ground and replace it with cargo-dist!<!--]--></p><p><!--[-->First let&#39;s install cargo-dist&#39;s <em><!--[-->own<!--]--></em> prebuilt binaries with <a href="https://github.com/cargo-bins/cargo-binstall" rel="nofollow"><!--[-->cargo-binstall<!--]--></a>. This should:<!--]--></p><ul><!--[--><li><!--[-->look for cargo-dist on crates.io<!--]--></li><li><!--[-->see 0.0.2 is the latest release<!--]--></li><li><!--[-->set that 0.0.2 specifies <code><!--[-->repository=&#34;https://github.com/axodotdev/cargo-dist/&#34;<!--]--></code> in its Cargo.toml<!--]--></li><li><!--[-->look for a github release for that version<!--]--></li><li><!--[-->find the right zip for my current platform<!--]--></li><li><!--[-->download it, unpack it, and copy it to my <code><!--[-->~/.cargo/bin<!--]--></code> dir just like <code><!--[-->cargo install<!--]--></code> would<!--]--></li><!--]--></ul><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo binstall cargo</span><span>-</span><span>dist </span><span>--</span><span>no</span><span>-</span><span>symlinks</span></span><span><span> INFO resolve: Resolving package: </span><span>&#39;</span><span>cargo-dist</span><span>&#39;</span></span><span><span> WARN The package cargo</span><span>-</span><span>dist v0.</span><span>0.2</span><span> will be downloaded from github.com</span></span><span><span> INFO This will install the following binaries:</span></span><span><span> INFO   </span><span>-</span><span> cargo</span><span>-</span><span>dist (cargo-dist.exe </span><span>-&gt;</span><span> C:\Users\gankra\.cargo\bin\cargo-dist.exe)</span></span><span><span>Do you wish to continue? yes</span><span>/</span><span>[</span><span>no</span><span>]</span></span><span><span>? yes</span></span><span><span> INFO Installing binaries...</span></span><span><span> INFO Done in </span><span>17.</span><span>9008318s</span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo dist </span><span>-</span><span>V</span></span><span><span>cargo</span><span>-</span><span>dist </span><span>0.0</span><span>.</span><span>2</span></span></code></pre><!--]--></div><p><!--[-->Hooray! At least cargo-dist seems to be packaging <em><!--[-->itself<!--]--></em> up properly!<!--]--></p><p><!--[-->Now lets try it out:<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo dist</span></span><span><span>bundling minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.0</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.pdb</span></span><span><span>bundling minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.0</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.zip</span></span><span><span>building cargo target (x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc</span><span>/</span><span>dist)</span></span><span><span>error: profile </span><span>`</span><span>dist</span><span>`</span><span> is not defined</span></span><span><span>ERROR</span></span><span><span>  √ó failed to find bin minidump</span><span>-</span><span>debugger for minidump</span><span>-</span><span>debugger </span><span>0.3</span><span>.</span><span>0</span><span> (path</span><span>+</span><span>file:</span><span>///</span><span>C:</span><span>/</span><span>Users</span><span>/</span><span>gankra</span><span>/</span><span>dev</span><span>/</span><span>minidump</span><span>-</span><span>debugger)</span></span></code></pre><!--]--></div><p><!--[-->...Oops! I really need to <a href="https://github.com/axodotdev/cargo-dist/issues/63" rel="nofollow"><!--[-->produce a better diagnostic when you forget to run <code><!--[-->cargo dist init<!--]--></code><!--]--></a>.<!--]--></p><p><!--[-->Let&#39;s <em><!--[-->properly<!--]--></em> setup cargo dist first (with Github CI enabled):<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo dist init </span><span>--</span><span>ci</span><span>=</span><span>github</span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git status</span></span><span><span>On branch main</span></span><span><span>Your branch is ahead of </span><span>&#39;</span><span>origin/main</span><span>&#39;</span><span> by </span><span>1</span><span> commit.</span></span><span><span>  (use </span><span>&#34;</span><span>git push</span><span>&#34;</span><span> to publish your local commits)</span></span><span></span><span><span>Changes not staged for commit:</span></span><span><span>  (use </span><span>&#34;</span><span>git add &lt;file&gt;...</span><span>&#34;</span><span> to update what will be committed)</span></span><span><span>  (use </span><span>&#34;</span><span>git restore &lt;file&gt;...</span><span>&#34;</span><span> to discard changes in working directory)</span></span><span><span>        modified:   .github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml</span></span><span><span>        modified:   Cargo.toml</span></span></code></pre><!--]--></div><p><!--[-->Cool, it did <em><!--[-->something<!--]--></em>! Let&#39;s see what it did to my Cargo.toml:<!--]--></p><div><!--[--><pre><code><span><span>diff --git a/Cargo.toml b/Cargo.toml</span></span><span><span>index aa8a491..53c2797 100644</span></span><span><span>--- a/Cargo.toml</span></span><span><span>+++ b/Cargo.toml</span></span><span><span>@@ -32,3 +32,10 @@ tracing = { version = &#34;0.1.34&#34;, features = [&#34;log&#34;] }</span></span><span><span> tracing-subscriber = &#34;0.3.14&#34;</span></span><span><span> linked-hash-map = &#34;0.5.6&#34;</span></span><span><span> clap = { version = &#34;3.2.15&#34;, features = [&#34;derive&#34;] }</span></span><span><span>+</span></span><span><span>+</span><span># generated by &#39;cargo dist init&#39;</span></span><span><span>+</span><span>[profile.dist]</span></span><span><span>+</span><span>inherits = &#34;release&#34;</span></span><span><span>+</span><span>debug = true</span></span><span><span>+</span><span>split-debuginfo = &#34;packed&#34;</span></span><span><span>+</span></span></code></pre><!--]--></div><p><!--[-->Ok so now my project has a custom &#34;dist&#34; profile that&#39;s tuned to produce split debuginfo files like pdbs (in the future this will also probably turn on things like full LTO).<!--]--></p><p><!--[-->The CI changes are... a lot bigger, so I&#39;m just going to <a href="https://github.com/rust-minidump/minidump-debugger/blob/743cd5e8b4cb9fabb09f53e9e38273cafa7a9ebc/.github/workflows/release.yml" rel="nofollow"><!--[-->link them here<!--]--></a>. Because I gave cargo-dist the same naming convention for Github CI files that I normally use, it straight-up blindly overwrote my old release.yml file. This is super convenient for me in this precise moment, but in the future I should <em><!--[-->probably<!--]--></em> ask permission before doing that (although you can just not commit the changes if you don&#39;t like them).<!--]--></p><p><!--[-->Anyway the CI scripts are... a bit messy. Although I actually generate comments describing how it works, so you get gems like this:<!--]--></p><div><!--[--><pre><code><span><span>- </span><span>name</span><span>: </span><span>Run cargo-dist</span></span><span><span>  </span><span># This logic is a bit janky because it&#39;s trying to be a polyglot between</span></span><span><span>  </span><span># powershell and bash since this will run on windows, macos, and linux!</span></span><span><span>  </span><span># The two platforms don&#39;t agree on how to talk about env vars but they</span></span><span><span>  </span><span># do agree on &#39;cat&#39; and &#39;$()&#39; so we use that to marshal values between commmands.</span></span><span><span>  </span><span>run</span><span>: </span><span>|</span></span><span><span>    cargo dist --target=${{ matrix.target }} --output-format=json &gt; dist-manifest.json</span></span></code></pre><!--]--></div><p><!--[-->Is good or bad design? All I know for sure is that&#39;s Very Funny and I can fix it in one place for all my future projects (by improving cargo-dist&#39;s CI generation).<!--]--></p><p><!--[-->The crux of the scripts is just &#34;run <code><!--[-->cargo dist<!--]--></code>, parse the json output, and upload the results to github&#34;. That means I <em><!--[-->should<!--]--></em> just be able to run cargo-dist locally to see what it produces on windows:<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo dist</span></span><span><span>bundling minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.1</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.pdb</span></span><span><span>bundling minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.1</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.zip</span></span><span><span>building cargo target (x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc</span><span>/</span><span>dist)</span></span><span><span>   Compiling autocfg v1.</span><span>1.0</span></span><span><span>   ...</span></span><span><span>   Compiling minidump</span><span>-</span><span>debugger v0.</span><span>3.1</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger)</span></span><span><span>    Finished dist [</span><span>optimized</span><span> </span><span>+</span><span> </span><span>debuginfo</span><span>] target(s) in </span><span>1m</span><span> 04s</span></span><span><span>bundled C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger\target\distrib\minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.1</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.pdb</span></span><span><span>bundled C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger\target\distrib\minidump</span><span>-</span><span>debugger</span><span>-</span><span>v0.</span><span>3.1</span><span>-</span><span>x86_64</span><span>-</span><span>pc</span><span>-</span><span>windows</span><span>-</span><span>msvc.zip</span></span></code></pre><!--]--></div><p><!--[-->Hey, that worked! It found my project, built it with the <code><!--[-->dist<!--]--></code> profile, collected up a zip and pdb (Microsoft&#39;s debuginfo format), and told me where to find them! No more debugging the build in CI for me!<!--]--></p><p><!--[-->Alright, I&#39;m happy with this, time to commit it and publish 0.3.2 (using <a href="https://github.com/crate-ci/cargo-release" rel="nofollow"><!--[-->cargo-release<!--]--></a> of course):<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git commit </span><span>-</span><span>am </span><span>&#34;</span><span>replace release ci with cargo-dist</span><span>&#34;</span></span><span><span>[</span><span>main</span><span> 3</span><span>ad6beb</span><span>] replace release ci with cargo</span><span>-</span><span>dist</span></span><span><span> </span><span>2</span><span> files changed</span><span>,</span><span> </span><span>131</span><span> insertions(</span><span>+</span><span>)</span><span>,</span><span> </span><span>161</span><span> deletions(</span><span>-</span><span>)</span></span><span><span> rewrite .github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml (</span><span>95</span><span>%</span><span>)</span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo release </span><span>0.3</span><span>.</span><span>2</span></span><span><span>   Upgrading minidump</span><span>-</span><span>debugger from </span><span>0.3</span><span>.</span><span>1</span><span> to </span><span>0.3</span><span>.</span><span>2</span></span><span><span>  Publishing minidump</span><span>-</span><span>debugger</span></span><span><span>    Updating crates.io index</span></span><span><span>   Packaging minidump</span><span>-</span><span>debugger v0.</span><span>3.1</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger)</span></span><span><span>   Verifying minidump</span><span>-</span><span>debugger v0.</span><span>3.1</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger)</span></span><span><span>   Compiling cfg</span><span>-</span><span>if v1.</span><span>0.0</span></span><span><span>   ...</span></span><span><span>   Compiling minidump</span><span>-</span><span>debugger v0.</span><span>3.1</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger\target\package\minidump</span><span>-</span><span>debugger</span><span>-</span><span>0.3</span><span>.</span><span>1</span><span>)</span></span><span><span>    Finished dev [</span><span>unoptimized</span><span> </span><span>+</span><span> </span><span>debuginfo</span><span>] target(s) in </span><span>37.</span><span>50s</span></span><span><span>    Packaged </span><span>14</span><span> files</span><span>,</span><span> </span><span>189.</span><span>7KiB (</span><span>43.</span><span>0KiB compressed)</span></span><span><span>   Uploading minidump</span><span>-</span><span>debugger v0.</span><span>3.1</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger)</span></span><span><span>warning: aborting upload due to dry run</span></span><span><span>     Pushing Pushing main</span><span>,</span><span> v0.</span><span>3.2</span><span> to origin</span></span><span><span>warning: aborting release due to dry run; re</span><span>-</span><span>run with </span><span>`--</span><span>execute</span><span>`</span></span></code></pre><!--]--></div><p><!--[-->Oh right, cargo-release rules and requires me to add <code><!--[-->--execute<!--]--></code> to do it For Real:<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo release </span><span>0.3</span><span>.</span><span>2</span><span> </span><span>--</span><span>execute</span></span><span><span>Release minidump</span><span>-</span><span>debugger </span><span>0.3</span><span>.</span><span>2</span><span>? [</span><span>y/N</span><span>]</span></span><span><span>y</span></span><span><span>   Upgrading minidump</span><span>-</span><span>debugger from </span><span>0.3</span><span>.</span><span>1</span><span> to </span><span>0.3</span><span>.</span><span>2</span></span><span><span>[</span><span>main</span><span> 5</span><span>a471ae</span><span>] chore: Release minidump</span><span>-</span><span>debugger version </span><span>0.3</span><span>.</span><span>2</span></span><span><span> </span><span>2</span><span> files changed</span><span>,</span><span> </span><span>2</span><span> insertions(</span><span>+</span><span>)</span><span>,</span><span> </span><span>2</span><span> deletions(</span><span>-</span><span>)</span></span><span><span>  Publishing minidump</span><span>-</span><span>debugger</span></span><span><span>  ...</span></span><span><span>  Compiling minidump</span><span>-</span><span>debugger v0.</span><span>3.2</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger\target\package\minidump</span><span>-</span><span>debugger</span><span>-</span><span>0.3</span><span>.</span><span>2</span><span>)</span></span><span><span>    Finished dev [</span><span>unoptimized</span><span> </span><span>+</span><span> </span><span>debuginfo</span><span>] target(s) in </span><span>37.</span><span>07s</span></span><span><span>    Packaged </span><span>15</span><span> files</span><span>,</span><span> </span><span>189.</span><span>8KiB (</span><span>43.</span><span>1KiB compressed)</span></span><span><span>   Uploading minidump</span><span>-</span><span>debugger v0.</span><span>3.2</span><span> (C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger)</span></span><span><span>    Updating crates.io index</span></span><span><span>     Waiting on </span><span>`</span><span>minidump</span><span>-</span><span>debugger</span><span>`</span><span> to propagate to crates.io index (ctrl</span><span>-</span><span>c to wait asynchronously)</span></span><span><span>    Updating crates.io index</span></span><span><span>     Pushing Pushing main</span><span>,</span><span> v0.</span><span>3.2</span><span> to origin</span></span><span><span>Enumerating objects: </span><span>30</span><span>,</span><span> done.</span></span><span><span>Counting objects: </span><span>100</span><span>%</span><span> (</span><span>30</span><span>/</span><span>30</span><span>)</span><span>,</span><span> done.</span></span><span><span>Delta compression using up to </span><span>32</span><span> threads</span></span><span><span>Compressing objects: </span><span>100</span><span>%</span><span> (</span><span>18</span><span>/</span><span>18</span><span>)</span><span>,</span><span> done.</span></span><span><span>Writing objects: </span><span>100</span><span>%</span><span> (</span><span>19</span><span>/</span><span>19</span><span>)</span><span>,</span><span> </span><span>10.47</span><span> KiB </span><span>|</span><span> </span><span>714.00</span><span> KiB</span><span>/</span><span>s</span><span>,</span><span> done.</span></span><span><span>Total </span><span>19</span><span> (delta </span><span>9</span><span>)</span><span>,</span><span> reused </span><span>0</span><span> (delta </span><span>0</span><span>)</span><span>,</span><span> pack</span><span>-</span><span>reused </span><span>0</span></span><span><span>remote: Resolving deltas: </span><span>100</span><span>%</span><span> (</span><span>9</span><span>/</span><span>9</span><span>)</span><span>,</span><span> completed with </span><span>7</span><span> local objects.</span></span><span><span>remote: This repository moved. Please use the new location:</span></span><span><span>remote:   git@</span><span>github.com</span><span>:rust</span><span>-</span><span>minidump</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>To github.com:Gankra</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>   02cf5ca</span><span>..</span><span>5a471ae  main </span><span>-&gt;</span><span> main</span></span><span><span> </span><span>*</span><span> [</span><span>new</span><span> </span><span>tag</span><span>]         v0.</span><span>3.2</span><span> </span><span>-&gt;</span><span> v0.</span><span>3.2</span></span></code></pre><!--]--></div><p><!--[-->Ok published to crates.io and pushed to Github, let&#39;s see if the CI is working..!<!--]--></p><p><!--[--><img src="https://vaibhavsagar.com/images/blog/2023/02/cargo-dist/failed-ci.png" alt="Failed CI on the cargo-dist step"/><!--]--></p><p><!--[-->...FUCK! What the hell broke?<!--]--></p><div><!--[--><pre><code><span><span>  </span><span>`&#34;</span><span>pkg-config</span><span>&#34;</span><span> </span><span>&#34;</span><span>--libs</span><span>&#34;</span><span> </span><span>&#34;</span><span>--cflags</span><span>&#34;</span><span> </span><span>&#34;</span><span>gdk-3.0</span><span>&#34;</span><span> </span><span>&#34;</span><span>gdk-3.0 &gt;= 3.18</span><span>&#34;`</span><span> did not exit successfully: exit status: 1</span></span><span><span>  error: could not find system library </span><span>&#39;</span><span>gdk-3.0</span><span>&#39;</span><span> required by the </span><span>&#39;</span><span>gdk-sys</span><span>&#39;</span><span> crate</span></span></code></pre><!--]--></div><p><!--[-->Ohhhhh riiiight...<!--]--></p><p><!--[-->So minidump-debugger is based on <a href="https://github.com/emilk/egui" rel="nofollow"><!--[-->egui<!--]--></a>, and for whatever reason egui builds on linux <a href="https://github.com/emilk/egui#demo" rel="nofollow"><!--[-->require you to install a ton of dev packages<!--]--></a> (on Windows and macOS it Just Works so I always forget this). This is why the old release CI I blindly blew away had this part:<!--]--></p><div><!--[--><pre><code><span><span>- </span><span>name</span><span>: </span><span>Install packages (Linux)</span></span><span><span>  </span><span>if</span><span>: </span><span>runner.os == &#39;Linux&#39;</span></span><span><span>  </span><span>run</span><span>: </span><span>sudo apt-get update &amp;&amp; sudo apt-get install libxcb-render0-dev libxcb-shape0-dev libxcb-xfixes0-dev libspeechd-dev libxkbcommon-dev libssl-dev libgtk-3-dev</span></span></code></pre><!--]--></div><p><!--[-->Welp, automating and understanding those kinds of build deps are another feature for me to add to cargo-dist one day, but for now I&#39;ll rely on the fact that the scripts <em><!--[-->are<!--]--></em> checked in so <a href="https://github.com/rust-minidump/minidump-debugger/commit/24208a6c4c0965b7d77134dc58ddd6bb0283bb58" rel="nofollow"><!--[-->I can make bespoke hand-edits to the scripts<!--]--></a> if need be (being able to do this is an intentional feature, although obviously suboptimal because now we&#39;re getting back some dependency on the CI&#39;s precise behaviour).<!--]--></p><p><!--[-->Time to enter Release Engineer Mode and start doing panicked edits to CI and the Git history. If I wasn&#39;t made of hubris I <em><!--[-->might<!--]--></em> have run <code><!--[-->cargo release<!--]--></code> with <code><!--[-->--no-publish<!--]--></code> to save the publish to crates.io until everything else succeeds (release transactionality across multiple disjoint platforms is Hard to say the least. More things for me to work on.).<!--]--></p><p><!--[-->I&#39;ll settle for deleting the tag and the github release and pushing a fresh one manually, because cargo-release is just a convenience, and the only thing that triggers the CI is a git tag (and the commit it points to) being pushed up.<!--]--></p><p><!--[-->Bask in the wonders of me unfucking my git repo (not pictured: me deleting the Draft Github Release in Github&#39;s web UI, so hooray for the Draft machinery working, at least!):<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git tag </span><span>-</span><span>d v0.</span><span>3.2</span></span><span><span>Deleted tag </span><span>&#39;</span><span>v0.3.2</span><span>&#39;</span><span> (was f5e27a7)</span></span><span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git push </span><span>--</span><span>delete origin v0.</span><span>3.2</span></span><span><span>remote: This repository moved. Please use the new location:</span></span><span><span>remote:   git@</span><span>github.com</span><span>:rust</span><span>-</span><span>minidump</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>To github.com:Gankra</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span> </span><span>-</span><span> [</span><span>deleted</span><span>]         v0.</span><span>3.2</span></span><span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git diff</span></span><span><span>diff </span><span>--</span><span>git a</span><span>/</span><span>.github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml b</span><span>/</span><span>.github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml</span></span><span><span>index 04cd439..e41251a </span><span>100644</span></span><span><span>---</span><span> a</span><span>/</span><span>.github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml</span></span><span><span>+++</span><span> b</span><span>/</span><span>.github</span><span>/</span><span>workflows</span><span>/</span><span>release.yml</span></span><span><span>@@ </span><span>-75</span><span>,</span><span>6</span><span> </span><span>+75</span><span>,</span><span>9</span><span> @@ jobs:</span></span><span><span>         run: rustup update stable &amp;&amp; rustup default stable</span></span><span><span>       </span><span>-</span><span> name: Install cargo</span><span>-</span><span>dist</span></span><span><span>         run: ${</span><span>{ matrix.install-dist </span><span>}}</span></span><span><span>+</span><span>      </span><span>-</span><span> name: Install packages (Linux)</span></span><span><span>+</span><span>        if: runner.os </span><span>==</span><span> </span><span>&#39;</span><span>Linux</span><span>&#39;</span></span><span><span>+</span><span>        run: sudo apt</span><span>-</span><span>get update &amp;&amp; sudo apt</span><span>-</span><span>get install libxcb</span><span>-</span><span>render0</span><span>-</span><span>dev libxcb</span><span>-</span><span>shape0</span><span>-</span><span>dev libxcb</span><span>-</span><span>xfixes0</span><span>-</span><span>dev libspeechd</span><span>-</span><span>dev libxkbcommon</span><span>-</span><span>dev libssl</span><span>-</span><span>dev libgtk</span><span>-</span><span>3</span><span>-</span><span>dev</span></span><span><span>       </span><span>-</span><span> name: Run cargo</span><span>-</span><span>dist</span></span><span><span>         </span><span># This logic is a bit janky because it&#39;s trying to be a polyglot between</span></span><span><span>         </span><span># powershell and bash since this will run on windows, macos, and linux!</span></span><span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git commit </span><span>-</span><span>am </span><span>&#34;</span><span>Add back linux install stuff</span><span>&#34;</span></span><span><span>[</span><span>main</span><span> 24208</span><span>a6</span><span>] Add back linux install stuff</span></span><span><span> </span><span>1</span><span> file changed</span><span>,</span><span> </span><span>3</span><span> insertions(</span><span>+</span><span>)</span></span><span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git tag v0.</span><span>3.2</span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git push origin </span><span>--</span><span>tag</span></span><span><span>Enumerating objects: </span><span>9</span><span>,</span><span> done.</span></span><span><span>Counting objects: </span><span>100</span><span>%</span><span> (</span><span>9</span><span>/</span><span>9</span><span>)</span><span>,</span><span> done.</span></span><span><span>Delta compression using up to </span><span>32</span><span> threads</span></span><span><span>Compressing objects: </span><span>100</span><span>%</span><span> (</span><span>4</span><span>/</span><span>4</span><span>)</span><span>,</span><span> done.</span></span><span><span>Writing objects: </span><span>100</span><span>%</span><span> (</span><span>5</span><span>/</span><span>5</span><span>)</span><span>,</span><span> </span><span>588</span><span> bytes </span><span>|</span><span> </span><span>294.00</span><span> KiB</span><span>/</span><span>s</span><span>,</span><span> done.</span></span><span><span>Total </span><span>5</span><span> (delta </span><span>2</span><span>)</span><span>,</span><span> reused </span><span>0</span><span> (delta </span><span>0</span><span>)</span><span>,</span><span> pack</span><span>-</span><span>reused </span><span>0</span></span><span><span>remote: Resolving deltas: </span><span>100</span><span>%</span><span> (</span><span>2</span><span>/</span><span>2</span><span>)</span><span>,</span><span> completed with </span><span>2</span><span> local objects.</span></span><span><span>remote: This repository moved. Please use the new location:</span></span><span><span>remote:   git@</span><span>github.com</span><span>:rust</span><span>-</span><span>minidump</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>To github.com:Gankra</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span> </span><span>*</span><span> [</span><span>new</span><span> </span><span>tag</span><span>]         v0.</span><span>2.1</span><span> </span><span>-&gt;</span><span> v0.</span><span>2.1</span></span><span><span> </span><span>*</span><span> [</span><span>new</span><span> </span><span>tag</span><span>]         v0.</span><span>3.2</span><span> </span><span>-&gt;</span><span> v0.</span><span>3.2</span></span><span></span><span></span><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> git push origin</span></span><span><span>Total </span><span>0</span><span> (delta </span><span>0</span><span>)</span><span>,</span><span> reused </span><span>0</span><span> (delta </span><span>0</span><span>)</span><span>,</span><span> pack</span><span>-</span><span>reused </span><span>0</span></span><span><span>remote: This repository moved. Please use the new location:</span></span><span><span>remote:   git@</span><span>github.com</span><span>:rust</span><span>-</span><span>minidump</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>To github.com:Gankra</span><span>/</span><span>minidump</span><span>-</span><span>debugger.git</span></span><span><span>   5a471ae</span><span>..</span><span>24208a6  main </span><span>-&gt;</span><span> main</span></span></code></pre><!--]--></div><p><!--[-->please work please work please work please work<!--]--></p><p><!--[--><img src="https://vaibhavsagar.com/images/blog/2023/02/cargo-dist/success-ci.png" alt="CI Passing!"/><!--]--></p><p><!--[-->Yeah!<!--]--></p><p><!--[--><img src="https://vaibhavsagar.com/images/blog/2023/02/cargo-dist/success-release.png" alt="A Github Release with various artifacts uploaded"/><!--]--></p><p><!--[--><a href="https://github.com/rust-minidump/minidump-debugger/releases/tag/v0.3.2" rel="nofollow"><!--[-->YEAAAH!!!!!<!--]--></a><!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> cargo binstall minidump</span><span>-</span><span>debugger </span><span>--</span><span>no</span><span>-</span><span>symlinks</span></span><span><span> INFO resolve: Resolving package: </span><span>&#39;</span><span>minidump-debugger</span><span>&#39;</span></span><span><span> WARN The package minidump</span><span>-</span><span>debugger v0.</span><span>3.2</span><span> will be downloaded from github.com</span></span><span><span> INFO This will install the following binaries:</span></span><span><span> INFO   </span><span>-</span><span> minidump</span><span>-</span><span>debugger (minidump-debugger.exe </span><span>-&gt;</span><span> C:\Users\gankra\.cargo\bin\minidump-debugger.exe)</span></span><span><span>Do you wish to continue? yes</span><span>/</span><span>[</span><span>no</span><span>]</span></span><span><span>? yes</span></span><span><span> INFO Installing binaries...</span></span><span><span> INFO Done in </span><span>38.</span><span>2950944s</span></span></code></pre><!--]--></div><p><!--[-->YEEAAAHHHH!!!!!!!!!!!<!--]--></p><div><!--[--><pre><code><span><span>PS C:\Users\gankra\dev\minidump</span><span>-</span><span>debugger</span><span>&gt;</span><span> minidump</span><span>-</span><span>debugger</span></span></code></pre><!--]--></div><p><!--[--><img src="https://vaibhavsagar.com/images/blog/2023/02/cargo-dist/minidump-debugger.png" alt="A screenshot of minidump-debugger&#39;s GUI running on my machine"/><!--]--></p><p><!--[-->YEEEAAAHHHHHHH!!!!!!!!!!!<!--]--></p><p><!--[-->Oh how sweet it is for the things you make to Work. Is it perfect? Not in the slightest! But it&#39;s a start, a step in the right direction, and it&#39;s my dang job to keep on taking those steps until cargo-dist is the slam dunk obvious choice for packaging up your Rust projects!<!--]--></p><p><!--[-->All of that sounds pretty nice, but why stop there? After all, our Github Release‚Ñ¢Ô∏è has that nice machine-readable manifest, so maybe some other tools can take this even further! Hmm, that sure sounds convenient, I wonder if anyone is working on that kind of thing...<!--]--></p></div></div>
  </body>
</html>
