<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://charlieharrington.com/surfing-the-gopherspace/">Original</a>
    <h1>Surfing the Gopherspace</h1>
    
    <div id="readability-page-1" class="page"><div id="contents">
      
        
        <h3>2022-05-10</h3>
        
      
      
      <p>A <a href="https://daringfireball.net/linked/2022/05/06/stevenf-gopher-playdate">recent Daring Fireball post</a> about the (super cool) <a href="https://play.date">Playdate</a> handheld gaming system mentioned Gopher, which I&#39;d never heard of before! Here&#39;s the referenced tweet:</p>
<blockquote><p lang="en" dir="ltr">When Playdate shipped, Panic co-founder Steven wrote a little about what it meant to him. And in the spirit of doing things differently, posted it to a Gopher (!) site.</p>â€” Playdate (@playdate) <a href="https://twitter.com/playdate/status/1520144706511904768?ref_src=twsrc%5Etfw">April 29, 2022</a></blockquote> 

<p>Gruber mentions he used <code>curl</code> to read the Gopher site, which you can try yourself:</p>
<pre><code>curl gopher://stevenf.com:70/0/journal/2022/04/18/first-playdates-shipping.txt
</code></pre>
<p>You should see the full text of the Playdate post as a response. Intriguing, right? Where&#39;s the <code>https://</code> part of the url? What&#39;s this gopher thing all about?</p>
<p><img src="https://charlieharrington.com/img/gopher/caddyshack.jpg" alt="Caddyshack"/></p>
<p>It&#39;s time to learn something weird about the Internet again.</p>
<h2 id="protocols">Protocols</h2>
<p>You&#39;ve probably heard of protocols before. Maybe you&#39;re even an expert in human-cyborg relations. Hopefully, this explainer sits well with all parties:</p>
<blockquote>
<p>Protocols are a formalized series of interactions to transmit information between two or more parties.</p>
</blockquote>
<p>That&#39;s my own homespun definition - so I&#39;ll happily accept edits or suggestions (an RFC, if you will). A potentially helpful analogy for protocols that I&#39;ve seen is a <a href="https://en.wikipedia.org/wiki/Japanese_tea_ceremony">Japanese tea ceremony</a> - a bunch of formal procedures to govern a specific shared experience.</p>
<p>Your favorite network - the Internet - has its own set of protocols that orchestrate its communication, with foundational ones like TCP/IP, as well as ones for things like email, file sharing, and hypertext - aka HTTP - aka the World Wide Web, the protocol that pretty much powers all your apps and sites and whatnots that you like so much.</p>
<p>But the Web -- and its Hypertext Transfer Protocol -- wasn&#39;t always top dog for sharing text on the Internet. There were rivals. Competitors. <em>Gophers.</em></p>
<p>I&#39;m no historian (despite being a history major -- how exactly does that work, anyway?), my folk-understanding-slash-Wikipedia-reading tells me this: while Tim Berners-Lee was inventing HTTP and the Web on a NeXT cube inside of a particle accelerator, a bunch of University of Minnesota (go Golden Gophers!) students and their professor were working on something they, of course, called the Gopher protocol.</p>
<p>Their RFC (<a href="https://datatracker.ietf.org/doc/html/rfc1436">RFC 1436</a>) is worth a skim. Gopher is a plaintext protocol well-suited for sharing text documents in a file system-like hierarchy - a <code>distributed document delivery system</code>, in their own words. </p>
<p>When you interact with a Gopher server, you&#39;ll typically first receive an odd-looking &#34;ls&#34;-style directory listing of contents, where the first character of each line tells you what type of item it is (e.g. <code>0</code> means file, <code>1</code> directory, <code>9</code> binary file, <code>8</code> is a telnet session, <code>g</code> is a gif image, and so on - <a href="https://datatracker.ietf.org/doc/html/rfc1436#section-3.8">read them all here</a>).</p>
<p>Here&#39;s the example from their RFC:</p>
<pre><code> 0About internet GopherFStuff:About usFrawBits.micro.umn.eduF70
 1Around University of MinnesotaFZ,5692,AUMFunderdog.micro.umn.eduF70
 1Microcomputer News &amp; PricesFPrices/Fpserver.bookstore.umn.eduF70
 1Courses, Schedules, CalendarsFFevents.ais.umn.eduF9120
 1Student-Staff DirectoriesFFuinfo.ais.umn.eduF70
 1Departmental PublicationsFStuff:DP:FrawBits.micro.umn.eduF70
</code></pre>
<p>Looks like something out of <em>War Games</em>, which makes me like this protocol very much, Dr. Falken. How about a nice game of chess?</p>
<p>As you may have guessed, Gopher did not win the war with HTTP. Wikipedia gives us a few supporting statements for this conclusion that I&#39;d like to jam into my 5 paragraph essay.</p>
<ol>
<li>U of Minn tried to charge for their Gopher server implementation for a while, before finally open sourcing it (1993 until 2000)</li>
<li>The <a href="https://en.wikipedia.org/wiki/Mosaic_(web_browser)">Mosaic web browser</a> could act as a Gopher client -- in addition to its main purpose of being a web browser</li>
<li>Gopher is just more rigid than freewheelin&#39; HTML</li>
</ol>
<p>Also, there&#39;s probably more reasons, including that it&#39;s not supes secure, being a plaintext protocol and all.</p>
<p>So, yeah, we&#39;re not surfing Gopherspace right now. But we can be! There are still devotees to Gopherdom, maintaining <a href="https://en.wikipedia.org/wiki/Phlog">phlogs</a> (which is a blog aka weblog, but taking the ph from &#34;gopher&#34; instead of the &#34;bl&#34; from &#34;webblog&#34;, ugh, enough).</p>
<p>Anyway... let&#39;s set up a Gopherhole!</p>
<h2 id="running-a-gopherhole-on-replit">Running a gopherhole on Replit</h2>
<p>I&#39;ll assume you&#39;re familar with <a href="https://replit.com">Replit</a> (I&#39;ve written about <a href="https://charlieharrington.com/computers-by-the-decade">my affinity for Replit before</a>) - but, if you&#39;re not, it&#39;s a service that lets you easily spin up little environments for running code, servers, etc. I run my <a href="https://charlieharrington.com/sql-powered-reading-list">ROAPI Google Sheet to SQL book library</a> on a Replit repl, for example. More importantly, Replit seems to be an increasingly great place for folks learning how to code and sharing tutorials, so I&#39;m always keen to use it and contribute to the &#34;learning to code&#34; community.</p>
<p>Back to business. Some Googling reveals that the <a href="https://github.com/jgoerzen/pygopherd">pygopherd</a> project seems like a nice, credible, easy way to get a Gopher server up and running. But spelunking the Github issues tells us that this project is another victim of the Python2/3 migration. Luckily, there&#39;s a relatively recent <a href="https://github.com/michael-lazar/pygopherd">Python3 fork</a> we can try!</p>
<p>So, create a new Python repl and <code>pip install pygopherd</code>. Because we&#39;re using Replit and not our own fully controlled machine, we&#39;re going to have to do some fiddly stuff with the library&#39;s config to get this working. I copy/pasted the pygopherd&#39;s config file and mime.types file from the repo into my repl&#39;s root directory. I did have to comment out a bunch of the default config settings - it&#39;s probably easier for you to just fork my repl, rather than go through everything here. Click &#34;Show files&#34; and view the &#34;config.conf&#34; file.</p>


<p>The actual interesting bit worth chatting about is the &#34;gopher&#34; folder. You can call this folder anything you want (just adjust that line in the config file), but this is where your phlog or gopherhole lives! Every folder will need a &#34;gophermap&#34; plaintext file to share its contents. Here&#39;s my directory structure:</p>
<pre><code>gopher/
   gophermap
   stories/
       christmas-at-grants-tomb.txt
       plastic-man-on-the-moon.txt
       gophermap
</code></pre>
<p>And here&#39;s my top-level gophermap:</p>
<pre><code>Welcome to my gopherhole - this is weird, right?!

nav:
1Fahrenheit52    ./stories
</code></pre>
<p>My gopherhole lets you click into a &#34;stories&#34; folder and then click into two of my short stories from my <a href="https://f52.charlieharrington.com">Fahrenheit 52 weekly writing project</a>.</p>
<p>Here&#39;s the gophermap for the <code>stories</code> folder:</p>
<pre><code>0Plastic Man on the Moon    ./plastic-man-on-the-moon.txt
0Christmastime at Grant&#39;s Tomb    ./christmastime-at-grants-tomb.txt
</code></pre>
<p>Note the <code>0</code> as the first character on the lines for text files and the <code>1</code> for the directories, as specified by the RFC. Double note - you literally a literal &#34;tab&#34; character between the file name and its location. I had to open up TextEdit, hit tab, and then copy/paste it into Replit to make this work.</p>
<p>Now, with your files in place, and your config adjusted (like I said, just use mine), you can start your Gopher server:</p>
<pre><code>pygopherd /home/runner/{YOUR_REPL_NAME_HERE}/config.conf
</code></pre>
<p>You should see this Gopherspace pop up in the Replit browser window! Here&#39;s mine, in our third iframe of the blog post thus far:</p>



<p>Very cool! Go ahead, click stuff. You can navigate to and read <a href="https://f52.charlieharrington.com/stories/plastic-man-on-the-moon/">my story about an action figure on the Moon</a>.</p>
<p>However, it looks like we&#39;re just interacting with a Web interface rather than accessing my gopherspace via the actual gopher protocol. That&#39;s no good. It does give a link to &#34;view with gopher&#34;, but this doesn&#39;t work, even when you try it with curl. I suspect there&#39;s something blocking this on the Replit side - I&#39;ve tried adjusting the ports many times, but haven&#39;t been able to figure this out. Any Replit folks out there who might have an idea, let me know.</p>
<p>Still, this is decent progress. Words of affirmation. But I really do want to view my stuff through Gopher itself. Let&#39;s try it out on our own home server.</p>
<h2 id="running-a-gopherhole-on-a-raspberry-pi-on-your-tailscale-network">Running a Gopherhole on a Raspberry Pi on your Tailscale network</h2>
<p>I&#39;ve got one of those cute Raspberry Pi keyboard computers at home, because its the perfect machine, connected via <a href="https://tailscale.com">Tailscale</a> (another one of my favorite services/companies/tools in the world).</p>
<p>We can do a fairly identical setup to Replit to get this working. Create a new project folder on your Raspberry Pi, spin up a virtualenv, pip install the <code>pygopherd</code> package, add the same files from the Repl and you&#39;re basically done! There&#39;s a few slight changes to the config file (again, these changes are mainly just commenting out a few lines and adjusting the filesystem location of a few files, like the config). I posted my <a href="https://github.com/whatrocks/gopherhole">setup to Github</a> if you want to follow along on your own machine. </p>
<p>After we start up pygopherd again (same command as before, with Replit - just provide the location of your config file), we can try curling our gopherspace:</p>
<pre><code>curl gopher://charliesraspberrypi:4444/1/

iWelcome to my gopherhole - this is weird, right?!    fake    (NULL)    0
i    fake    (NULL)    0
inav:    fake    (NULL)    0
1Fahrenheit52    /./stories    pit    4444    +
</code></pre>
<p>Woot! We&#39;re finally gophering over here. I&#39;m not sure what these &#34;fake&#34; and &#34;NULL&#34;s are all about. Something for later. You may also note that the port is <code>4444</code> which I arbitrarily picked (this is another thing you&#39;ll want to adjust in your config file), and the host name will be the IP of your Raspberry Pi.</p>
<p>Let&#39;s try to fetch one of our stories next.</p>
<pre><code>curl gopher://charliesraspberrypi:4444/1/stories/plastic-man-on-the-moon.txt
</code></pre>
<p>It works again! Now, we&#39;re not exposing our Tailnet to the Internet, so this will only work when I&#39;m on the VPN, but hey -- I&#39;ve got a gopherspace now, and you can, too.</p>
<h2 id="the-future-of-gopher">The future of gopher</h2>
<p>I wouldn&#39;t go betting the family farm on this protocol, but if you&#39;re into computer history like me, this can be a fun thing to poke around with. There are others like us out there. Actually, I learned that, for a while, you could <a href="http://antirez.com/news/127">run a Gopherhole directly in Redis</a>! </p>
<p>As for me and my gopher future, I&#39;d like to keep dabbling. Maybe write my own terminal client? Maybe set up an actual gopher server on a cloud provider to mirror my blog?</p>
<p>The possibilities here are... limited.</p>

    </div></div>
  </body>
</html>
