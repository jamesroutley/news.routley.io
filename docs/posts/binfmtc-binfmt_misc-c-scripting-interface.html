<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.netfort.gr.jp/~dancer/software/binfmtc.html.en">Original</a>
    <h1>Binfmtc â€“ binfmt_misc C scripting interface</h1>
    
    <div id="readability-page-1" class="page">
    
    
    <h2>Introducing the binfmt_misc C scripting interface</h2>
    <p>
      &#34;I love C&#34;. 
      &#34;I enjoy writing in C&#34;.
      &#34;I don&#39;t feel well when I have passed a day without coding a line of C&#34;. 
      &#34;My conversation with my wife simply doesn&#39;t flow without the C language&#34;. 
      &#34;I want to write everything in C, even the everyday scripting, 
      but due to the steps required for writing make files and other things,
      I tend to choose interpreted languages&#34;.
      A good news for the C programmers suffering from these symptoms.
      binfmtc is a hack to allow you to use the C language for cases where 
      script languages such as perl and shell were the languages of choice.
    </p>
    <p>
      Also included is a &#34;real csh&#34; as an example, allowing you to use the 
      C language style for executing everyday sysadmin work.
      Please experience the real C shell, which has a slightly different 
      tint to the original C shell we&#39;ve been used to for more than 10 years.
    </p>
    <h2>Screenshots</h2>
    <p>
      <img src="https://www.netfort.gr.jp/~dancer/software/img/20050506-binfmtc1.png" alt="C"/>
      <img src="https://www.netfort.gr.jp/~dancer/software/img/20050506-binfmtc2.png" alt="assembly"/>
      <img src="https://www.netfort.gr.jp/~dancer/software/img/20050506-binfmtc3.png" alt="C++"/>
      <img src="https://www.netfort.gr.jp/~dancer/software/img/20050506-binfmtc4.png" alt="real csh"/>
    </p>
    <p>
      Examples of execution in C, assembly, and C++.
      The last entry is the one for real csh.
    </p>
    <h2>Usage</h2>
    <p>
      Simply add a magic keyword <tt>/*BINFMTC: <i>compile-time options</i></tt>
      and add execution permission to the C-script.
      Every time you invoke the script, the compiler will compile and 
      execute the program for you.
    </p>
    <h2>How to install</h2>
    <p>
      For sid add the following line to /etc/apt/sources.list
      and do <tt>apt-get update; apt-get install binfmtc</tt>.
    </p>
    <pre>deb http://www.netfort.gr.jp/~dancer/tmp/20050523 ./
    </pre>
    <h2>Mechanics behind it</h2>
    <p>
      By registering magic through Linux binfmt_misc, 
      binfmtc-interpreter will be invoked every time a C script is invoked.
      binfmtc-interpreter will parse the specified script file, 
      and will invoke gcc with the required options, and compile 
      to a temporary binary,
      and invoke the binary.
    </p>
    <h2>Future plans</h2>
    <p>
      Do you actually find it, ... useful?
    </p>
    <ul>
      <li><del>gcj support</del> 0.3 done</li>
      <li><del>g77 support</del> 0.5 done</li>
      <li><del>gpc support</del> 0.5 done</li>
      <li>gnat support</li>
      <li>gobjc support</li>
      <li>chill support</li>
      <li>mono/pnet c# support</li>
      <li><del>use binfmt-support</del> done</li>
    </ul>
    <h2>References</h2>
    <ul>
      <li><a href="https://www.netfort.gr.jp/~dancer/software/downloads/">Downloads</a></li>
      <li><a href="http://fabrice.bellard.free.fr/tcc/">tcc -run</a> does a similar thing to binfmtc for C.</li>
      <li><a href="http://neugierig.org/software/c-repl/">c repl</a> implements a better c shell than realcsh.</li>
    </ul>

    <hr/>
    <address><a href="mailto:dancer@netfort.gr.jp">Junichi Uekawa</a></address>
<!-- Created: Sat May  7 06:10:26 2005 -->
    <p>$Id: binfmtc.html.en,v 1.11 2006/04/16 03:03:16 dancer Exp $</p>
  

</div>
  </body>
</html>
