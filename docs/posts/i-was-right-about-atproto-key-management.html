<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://notes.nora.codes/atproto-again/">Original</a>
    <h1>I was right about ATProto key management</h1>
    
    <div id="readability-page-1" class="page">
    <header>
      <span>I Was Right About ATProto Key Management</span>
      <nav>
        <a href="https://notes.nora.codes/">home</a> |
        <a href="https://nora.codes">main website</a>
      </nav>
      <hr/>
    </header>
    
      <p>Note: this post has been revised to be split into two sections: a description of what happened, and my analysis. I hope to make it clear that, while I do not like ATProto in general, I am trying to make good-faith critcisms of specific design decisions and outcomes, and in fact, this post getting updoots on HackerNews appears to have gotten the attention of the team, so, mission accomplished. <a href="https://news.ycombinator.com/item?id=46760548">ref</a>, <a href="https://github.com/bluesky-social/atproto/issues/3455#issuecomment-3797567431">ref</a> My account has since been manually reinstated; this has not happened for any of the other users that have had this issue, as far as I know.</p>
<hr/>
<section id="What-Happened">

<p>Today, I tried setting up an ATProto account for use with Bluesky, with did:web instead of did:plc. Let’s walk through the process:</p>
<ol>
<li>
<p>Set up the PDS software on a server I control. Because I use NixOS, this was very easy.</p>
</li>
<li>
<p>Create a did:web. This means creating a public-private keypair; I initially tried following <a href="https://blog.lapyst.dev/posts/14-how-to-create-a-completely-independent-bluesky-atproto-account">this tutorial</a> from Mai Lapyst, but it’s very out of date, and doesn’t include a critical step.</p>
</li>
<li>
<p>With that did:web, upload the <code>did.json</code> document to my webserver and set the appropriate DNS entries. Easy enough, except that I also had to set the CORS header for the <code>did.json</code>.</p>
</li>
<li>
<p>Create an account on my new PDS. I was able to get an invite and create an account, but it was in the “deactivated” status, and I couldn’t activate it. This had to be done by making requests manually with <code>curl</code>, reading the error outcomes in the PDS’s logs on my server.</p>
</li>
<li>
<p>Seek help in the ATProto Touchers Discord server, and at their advice delete the account.</p>
</li>
<li>
<p>Start over and re-create everything from scratch, correctly replacing the public key in my DID with the public key from <code>getRecommendedDidCredentials</code>.</p>
</li>
<li>
<p>Log into Bluesky (bsky.app) and get a “Profile does not exist error.”</p>
</li>
</ol>
<p>It was at this point that I found <a href="https://github.com/bluesky-social/atproto/issues/3455">this GitHub issue</a>, which seems to imply that, since I deleted my (completely empty and unused) account, my did:web is blacklisted from the remaining mostly-centralized bit of the system, the AppView. The term for this is being “burned”, and it was later confirmed by some more experienced users that this is a known but undocumented behavior of the Bluesky AppView.</p>
<p>I had one of my friends who uses Bluesky take a look, and the failure mode is interesting. On Bluesky, I didn’t exist at all. (She could not see my likes, or my follow of her.) On Blacksky production, my display name and bio were visible, but not my posts. On Blacksky’s own AppView, it’s the opposite; my posts appeared under an “invalid” profile. I have been un-“burned” by a manual process, but not because of my support request; this post made it to the front page of Hacker News, and Bryan Newbold saw it there.</p>
<p>This is bad.</p>
<hr/>
</section>
<section id="The-Opinion-Zone">

<p>So, a while ago, I wrote a post called <a href="https://notes.nora.codes/atproto">“Key Management, ATProto, and Decentralization”</a> in which I complained about ATProto’s approach to decentralization. Since then, Blacksky has spun up an AppView, which makes it theoretically possible to have an actually decentralized experience on Bluesky. This was my line in the sand, stated many times; I would make an account when and only when it was possible to do so without using anything running on Bluesky-the-company’s hardware. That’s now, so I figured I’d try it.</p>
<p>I use lots of systems I don’t love, like Signal, Matrix, and Mastodon. I use them because they give me access to social interaction with people I care about. ATProto, and specifically Bluesky, is the same; I have friends who don’t post anywhere else. Today, I follow them by RSS, but can’t interact with their posts. That’s where my motivation to use the network comes from, along with understanding how, and how well, the newly decentralized AppView layer works.</p>
<p>Very little of this process is documented. Sure, the individual endpoints are - kind of - but the only place the whole process is collected in one place is in the comments to <a href="https://github.com/bluesky-social/atproto/issues/3143">this GitHub issue</a>… which is closed as WONTFIX. The documentation for that <code>getRecommendedDidCredentials</code> endpoint that I missed reads in full:</p>
<blockquote>
<p>Describe the credentials that should be included in the DID doc of an account that is migrating to this service.</p>
</blockquote>
<p>Note that I am <strong>not</strong> “migrating”; this account is new. Plus, the JSON keys it returns are almost, but not quite, the same as those in a DID document, and the key it returns actually has to be edited by hand in order to be usable.</p>
<p>This is not good! <code>did:web</code> has been held up as the “less centralized” or “bring your own trust” option, as opposed to <code>did:plc</code>, and it seems like there has been very little effort to make it usable, certainly not for “normal” users.</p>
<p>But there’s another issue, a bigger issue. Why is a centralized “burn” able to completely prevent me from interacting with people using Bluesky?</p>
<p>You may be aware that Mastodon has a similar system. If you set up a Mastodon server and then delete the database, anyone you’ve already federated with won’t federate with you again, because you can’t prove you’re the same instance. It’s a genuine issue - but it wouldn’t have resulted in this, because I hadn’t even made a post on my now-burned did:web identity, nor followed anyone.</p>
<p>Even if I had, though, that would have burned <strong>a</strong> connection, not <strong>all</strong> connections. 
My experience would be degraded, but not ruined, and I could work with the admins of the affected servers to remediate it.
You could say the same here, of course; I had to get my account back by Bryan Newbold happening to see this post on Hacker News. There is only, really, one connection that matters; maybe two, if you count Blacksky, but their AppView is not generally available yet. That’s centralization. I don’t understand how you could call it anything else.</p>
<p>I don’t like Bluesky, or ATProto; I wish we lived in a world were community-driven projects got megabucks and we were all self-hosting little social media servers for our communities. We don’t live in that world, so we have to interoperate with VC-backed, corporate social media. When those platforms call themselves “decentralized”, I think they should deliver.</p>
</section>

    
    
  

</div>
  </body>
</html>
