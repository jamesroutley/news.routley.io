<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mvdan/gofumpt">Original</a>
    <h1>Gofumpt: A stricter gofmt</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://pkg.go.dev/mvdan.cc/gofumpt/format" rel="nofollow"><img src="https://camo.githubusercontent.com/b5535a7eab5be48837ae11a7dcb09e5a66ec6a1e1281767e132e109322ed24d5/68747470733a2f2f706b672e676f2e6465762f62616467652f6d7664616e2e63632f676f66756d70742f666f726d61742e737667" alt="Go Reference" data-canonical-src="https://pkg.go.dev/badge/mvdan.cc/gofumpt/format.svg"/></a></p>
<div data-snippet-clipboard-copy-content="go install mvdan.cc/gofumpt@latest"><pre><code>go install mvdan.cc/gofumpt@latest
</code></pre></div>
<p dir="auto">Enforce a stricter format than <code>gofmt</code>, while being backwards compatible.
That is, <code>gofumpt</code> is happy with a subset of the formats that <code>gofmt</code> is happy with.</p>
<p dir="auto">The tool is a fork of <code>gofmt</code> as of Go 1.19, and requires Go 1.18 or later.
It can be used as a drop-in replacement to format your Go code,
and running <code>gofmt</code> after <code>gofumpt</code> should produce no changes.
For example:</p>

<p dir="auto">Some of the Go source files in this repository belong to the Go project.
The project includes copies of <code>go/printer</code> and <code>go/doc/comment</code> as of Go 1.19
to ensure consistent formatting independent of what Go version is being used.
The <a href="#Added-rules">added formatting rules</a> are implemented in the <code>format</code> package.</p>
<p dir="auto">Note that vendor directories are skipped unless given as explicit arguments.
Similarly, the added rules do not apply to generated Go files unless they are
given as explicit arguments.</p>
<p dir="auto">Finally, note that the <code>-r</code> rewrite flag is removed in favor of <code>gofmt -r</code>,
and the <code>-s</code> flag is hidden as it is always enabled.</p>
<h3 dir="auto"><a id="user-content-added-rules" aria-hidden="true" href="#added-rules"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Added rules</h3>
<p dir="auto"><strong>No empty lines following an assignment operator</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {
    foo :=
        &#34;bar&#34;
}"><pre><span>func</span> <span>foo</span>() {
    <span>foo</span> <span>:=</span>
        <span>&#34;bar&#34;</span>
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {
	foo := &#34;bar&#34;
}"><pre><span>func</span> <span>foo</span>() {
	<span>foo</span> <span>:=</span> <span>&#34;bar&#34;</span>
}</pre></div>
</details>
<p dir="auto"><strong>No empty lines around function bodies</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {

	println(&#34;bar&#34;)

}"><pre><span>func</span> <span>foo</span>() {

	<span>println</span>(<span>&#34;bar&#34;</span>)

}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {
	println(&#34;bar&#34;)
}"><pre><span>func</span> <span>foo</span>() {
	<span>println</span>(<span>&#34;bar&#34;</span>)
}</pre></div>
</details>
<p dir="auto"><strong>Functions should separate <code>) {</code> where the indentation helps readability</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="func foo(s string,
	i int) {
	println(&#34;bar&#34;)
}

// With an empty line it&#39;s slightly better, but still not great.
func bar(s string,
	i int) {

	println(&#34;bar&#34;)
}"><pre><span>func</span> <span>foo</span>(<span>s</span> <span>string</span>,
	<span>i</span> <span>int</span>) {
	<span>println</span>(<span>&#34;bar&#34;</span>)
}

<span>// With an empty line it&#39;s slightly better, but still not great.</span>
<span>func</span> <span>bar</span>(<span>s</span> <span>string</span>,
	<span>i</span> <span>int</span>) {

	<span>println</span>(<span>&#34;bar&#34;</span>)
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="func foo(s string,
	i int,
) {
	println(&#34;bar&#34;)
}

// With an empty line it&#39;s slightly better, but still not great.
func bar(s string,
	i int,
) {
	println(&#34;bar&#34;)
}"><pre><span>func</span> <span>foo</span>(<span>s</span> <span>string</span>,
	<span>i</span> <span>int</span>,
) {
	<span>println</span>(<span>&#34;bar&#34;</span>)
}

<span>// With an empty line it&#39;s slightly better, but still not great.</span>
<span>func</span> <span>bar</span>(<span>s</span> <span>string</span>,
	<span>i</span> <span>int</span>,
) {
	<span>println</span>(<span>&#34;bar&#34;</span>)
}</pre></div>
</details>
<p dir="auto"><strong>No empty lines around a lone statement (or comment) in a block</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="if err != nil {

	return err
}"><pre><span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {

	<span>return</span> <span>err</span>
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="if err != nil {
	return err
}"><pre><span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
	<span>return</span> <span>err</span>
}</pre></div>
</details>
<p dir="auto"><strong>No empty lines before a simple error check</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="foo, err := processFoo()

if err != nil {
	return err
}"><pre><span>foo</span>, <span>err</span> <span>:=</span> <span>processFoo</span>()

<span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
	<span>return</span> <span>err</span>
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="foo, err := processFoo()
if err != nil {
	return err
}"><pre><span>foo</span>, <span>err</span> <span>:=</span> <span>processFoo</span>()
<span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
	<span>return</span> <span>err</span>
}</pre></div>
</details>
<p dir="auto"><strong>Composite literals should use newlines consistently</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="// A newline before or after an element requires newlines for the opening and
// closing braces.
var ints = []int{1, 2,
	3, 4}

// A newline between consecutive elements requires a newline between all
// elements.
var matrix = [][]int{
	{1},
	{2}, {
		3,
	},
}"><pre><span>// A newline before or after an element requires newlines for the opening and</span>
<span>// closing braces.</span>
<span>var</span> <span>ints</span> <span>=</span> []<span>int</span>{<span>1</span>, <span>2</span>,
	<span>3</span>, <span>4</span>}

<span>// A newline between consecutive elements requires a newline between all</span>
<span>// elements.</span>
<span>var</span> <span>matrix</span> <span>=</span> [][]<span>int</span>{
	{<span>1</span>},
	{<span>2</span>}, {
		<span>3</span>,
	},
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="var ints = []int{
	1, 2,
	3, 4,
}

var matrix = [][]int{
	{1},
	{2},
	{
		3,
	},
}"><pre><span>var</span> <span>ints</span> <span>=</span> []<span>int</span>{
	<span>1</span>, <span>2</span>,
	<span>3</span>, <span>4</span>,
}

<span>var</span> <span>matrix</span> <span>=</span> [][]<span>int</span>{
	{<span>1</span>},
	{<span>2</span>},
	{
		<span>3</span>,
	},
}</pre></div>
</details>
<p dir="auto"><strong>Empty field lists should use a single line</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="var V interface {
} = 3

type T struct {
}

func F(
)"><pre><span>var</span> <span>V</span> <span>interface</span> {
} <span>=</span> <span>3</span>

<span>type</span> <span>T</span> <span>struct</span> {
}

<span>func</span> <span>F</span>(
)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="var V interface{} = 3

type T struct{}

func F()"><pre><span>var</span> <span>V</span> <span>interface</span>{} <span>=</span> <span>3</span>

<span>type</span> <span>T</span> <span>struct</span>{}

<span>func</span> <span>F</span>()</pre></div>
</details>
<p dir="auto"><strong><code>std</code> imports must be in a separate group at the top</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="import (
	&#34;foo.com/bar&#34;

	&#34;io&#34;

	&#34;io/ioutil&#34;
)"><pre><span>import</span> (
	<span>&#34;foo.com/bar&#34;</span>

	<span>&#34;io&#34;</span>

	<span>&#34;io/ioutil&#34;</span>
)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="import (
	&#34;io&#34;
	&#34;io/ioutil&#34;

	&#34;foo.com/bar&#34;
)"><pre><span>import</span> (
	<span>&#34;io&#34;</span>
	<span>&#34;io/ioutil&#34;</span>

	<span>&#34;foo.com/bar&#34;</span>
)</pre></div>
</details>
<p dir="auto"><strong>Short case clauses should take a single line</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="switch c {
case &#39;a&#39;, &#39;b&#39;,
	&#39;c&#39;, &#39;d&#39;:
}"><pre><span>switch</span> <span>c</span> {
<span>case</span> <span>&#39;a&#39;</span>, <span>&#39;b&#39;</span>,
	<span>&#39;c&#39;</span>, <span>&#39;d&#39;</span>:
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="switch c {
case &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;:
}"><pre><span>switch</span> <span>c</span> {
<span>case</span> <span>&#39;a&#39;</span>, <span>&#39;b&#39;</span>, <span>&#39;c&#39;</span>, <span>&#39;d&#39;</span>:
}</pre></div>
</details>
<p dir="auto"><strong>Multiline top-level declarations must be separated by empty lines</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {
	println(&#34;multiline foo&#34;)
}
func bar() {
	println(&#34;multiline bar&#34;)
}"><pre><span>func</span> <span>foo</span>() {
	<span>println</span>(<span>&#34;multiline foo&#34;</span>)
}
<span>func</span> <span>bar</span>() {
	<span>println</span>(<span>&#34;multiline bar&#34;</span>)
}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="func foo() {
	println(&#34;multiline foo&#34;)
}

func bar() {
	println(&#34;multiline bar&#34;)
}"><pre><span>func</span> <span>foo</span>() {
	<span>println</span>(<span>&#34;multiline foo&#34;</span>)
}

<span>func</span> <span>bar</span>() {
	<span>println</span>(<span>&#34;multiline bar&#34;</span>)
}</pre></div>
</details>
<p dir="auto"><strong>Single var declarations should not be grouped with parentheses</strong></p>
<details><summary><i>Example</i></summary>


</details>
<p dir="auto"><strong>Contiguous top-level declarations should be grouped together</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="var nicer = &#34;x&#34;
var with = &#34;y&#34;
var alignment = &#34;z&#34;"><pre><span>var</span> <span>nicer</span> <span>=</span> <span>&#34;x&#34;</span>
<span>var</span> <span>with</span> <span>=</span> <span>&#34;y&#34;</span>
<span>var</span> <span>alignment</span> <span>=</span> <span>&#34;z&#34;</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="var (
	nicer     = &#34;x&#34;
	with      = &#34;y&#34;
	alignment = &#34;z&#34;
)"><pre><span>var</span> (
	<span>nicer</span>     <span>=</span> <span>&#34;x&#34;</span>
	<span>with</span>      <span>=</span> <span>&#34;y&#34;</span>
	<span>alignment</span> <span>=</span> <span>&#34;z&#34;</span>
)</pre></div>
</details>
<p dir="auto"><strong>Simple var-declaration statements should use short assignments</strong></p>
<details><summary><i>Example</i></summary>


</details>
<p dir="auto"><strong>The <code>-s</code> code simplification flag is enabled by default</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="var _ = [][]int{[]int{1}}"><pre><span>var</span> <span>_</span> <span>=</span> [][]<span>int</span>{[]<span>int</span>{<span>1</span>}}</pre></div>

</details>
<p dir="auto"><strong>Octal integer literals should use the <code>0o</code> prefix on modules using Go 1.13 and later</strong></p>
<details><summary><i>Example</i></summary>


</details>
<p dir="auto"><strong>Comments which aren&#39;t Go directives should start with a whitespace</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="//go:noinline

//Foo is awesome.
func Foo() {}"><pre><span>//go:noinline</span>

<span>//Foo is awesome.</span>
<span>func</span> <span>Foo</span>() {}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="//go:noinline

// Foo is awesome.
func Foo() {}"><pre><span>//go:noinline</span>

<span>// Foo is awesome.</span>
<span>func</span> <span>Foo</span>() {}</pre></div>
</details>
<p dir="auto"><strong>Composite literals should not have leading or trailing empty lines</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="var _ = []string{

	&#34;foo&#34;,

}

var _ = map[string]string{

	&#34;foo&#34;: &#34;bar&#34;,

}"><pre><span>var</span> <span>_</span> <span>=</span> []<span>string</span>{

	<span>&#34;foo&#34;</span>,

}

<span>var</span> <span>_</span> <span>=</span> <span>map</span>[<span>string</span>]<span>string</span>{

	<span>&#34;foo&#34;</span>: <span>&#34;bar&#34;</span>,

}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="var _ = []string{
	&#34;foo&#34;,
}

var _ = map[string]string{
	&#34;foo&#34;: &#34;bar&#34;,
}"><pre><span>var</span> <span>_</span> <span>=</span> []<span>string</span>{
	<span>&#34;foo&#34;</span>,
}

<span>var</span> <span>_</span> <span>=</span> <span>map</span>[<span>string</span>]<span>string</span>{
	<span>&#34;foo&#34;</span>: <span>&#34;bar&#34;</span>,
}</pre></div>
</details>
<p dir="auto"><strong>Field lists should not have leading or trailing empty lines</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="type Person interface {

	Name() string

	Age() int

}

type ZeroFields struct {

	// No fields are needed here.

}"><pre><span>type</span> <span>Person</span> <span>interface</span> {

	<span>Name</span>() <span>string</span>

	<span>Age</span>() <span>int</span>

}

<span>type</span> <span>ZeroFields</span> <span>struct</span> {

	<span>// No fields are needed here.</span>

}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="type Person interface {
	Name() string

	Age() int
}

type ZeroFields struct {
	// No fields are needed here.
}"><pre><span>type</span> <span>Person</span> <span>interface</span> {
	<span>Name</span>() <span>string</span>

	<span>Age</span>() <span>int</span>
}

<span>type</span> <span>ZeroFields</span> <span>struct</span> {
	<span>// No fields are needed here.</span>
}</pre></div>
</details>
<h4 dir="auto"><a id="user-content-extra-rules-behind--extra" aria-hidden="true" href="#extra-rules-behind--extra"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Extra rules behind <code>-extra</code></h4>
<p dir="auto"><strong>Adjacent parameters with the same type should be grouped together</strong></p>
<details><summary><i>Example</i></summary>
<div dir="auto" data-snippet-clipboard-copy-content="func Foo(bar string, baz string) {}"><pre><span>func</span> <span>Foo</span>(<span>bar</span> <span>string</span>, <span>baz</span> <span>string</span>) {}</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="func Foo(bar, baz string) {}"><pre><span>func</span> <span>Foo</span>(<span>bar</span>, <span>baz</span> <span>string</span>) {}</pre></div>
</details>
<h3 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h3>
<p dir="auto"><code>gofumpt</code> is a replacement for <code>gofmt</code>, so you can simply <code>go install</code> it as
described at the top of this README and use it.</p>
<p dir="auto">When using an IDE or editor with Go integration based on <code>gopls</code>,
it&#39;s best to configure the editor to use the <code>gofumpt</code> support built into <code>gopls</code>.</p>
<p dir="auto">The instructions below show how to set up <code>gofumpt</code> for some of the
major editors out there.</p>
<h4 dir="auto"><a id="user-content-visual-studio-code" aria-hidden="true" href="#visual-studio-code"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Visual Studio Code</h4>
<p dir="auto">Enable the language server following <a href="https://github.com/golang/vscode-go#readme">the official docs</a>,
and then enable gopls&#39;s <code>gofumpt</code> option. Note that VS Code will complain about
the <code>gopls</code> settings, but they will still work.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#34;go.useLanguageServer&#34;: true,
&#34;gopls&#34;: {
	&#34;formatting.gofumpt&#34;: true,
},"><pre><span>&#34;go.useLanguageServer&#34;</span>: <span>true</span>,
<span>&#34;gopls&#34;</span>: {
	<span>&#34;formatting.gofumpt&#34;</span>: <span>true</span>,
},</pre></div>
<h4 dir="auto"><a id="user-content-goland" aria-hidden="true" href="#goland"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>GoLand</h4>
<p dir="auto">GoLand doesn&#39;t use <code>gopls</code> so it should be configured to use <code>gofumpt</code> directly.
Once <code>gofumpt</code> is installed, follow the steps below:</p>
<ul dir="auto">
<li>Open <strong>Settings</strong> (File &gt; Settings)</li>
<li>Open the <strong>Tools</strong> section</li>
<li>Find the <em>File Watchers</em> sub-section</li>
<li>Click on the <code>+</code> on the right side to add a new file watcher</li>
<li>Choose <em>Custom Template</em></li>
</ul>
<p dir="auto">When a window asks for settings, you can enter the following:</p>
<ul dir="auto">
<li>File Types: Select all .go files</li>
<li>Scope: Project Files</li>
<li>Program: Select your <code>gofumpt</code> executable</li>
<li>Arguments: <code>-w $FilePath$</code></li>
<li>Output path to refresh: <code>$FilePath$</code></li>
<li>Working directory: <code>$ProjectFileDir$</code></li>
<li>Environment variables: <code>GOROOT=$GOROOT$;GOPATH=$GOPATH$;PATH=$GoBinDirs$</code></li>
</ul>
<p dir="auto">To avoid unnecessary runs, you should disable all checkboxes in the <em>Advanced</em> section.</p>
<h4 dir="auto"><a id="user-content-vim" aria-hidden="true" href="#vim"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Vim</h4>
<p dir="auto">The configuration depends on the plugin you are using: <a href="https://github.com/fatih/vim-go">vim-go</a>
or <a href="https://github.com/govim/govim">govim</a>.</p>
<h5 dir="auto"><a id="user-content-vim-go" aria-hidden="true" href="#vim-go"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>vim-go</h5>
<p dir="auto">To configure <code>gopls</code> to use <code>gofumpt</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="let g:go_fmt_command=&#34;gopls&#34;
let g:go_gopls_gofumpt=1"><pre><span>let</span> <span><span>g:</span>go_fmt_command</span><span>=</span><span><span>&#34;</span>gopls<span>&#34;</span></span>
<span>let</span> <span><span>g:</span>go_gopls_gofumpt</span><span>=</span><span>1</span></pre></div>
<h5 dir="auto"><a id="user-content-govim" aria-hidden="true" href="#govim"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>govim</h5>
<p dir="auto">To configure <code>gopls</code> to use <code>gofumpt</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="call govim#config#Set(&#34;Gofumpt&#34;, 1)"><pre><span>call</span> <span>govim#config#Set</span>(<span><span>&#34;</span>Gofumpt<span>&#34;</span></span>, <span>1</span>)</pre></div>
<h4 dir="auto"><a id="user-content-neovim" aria-hidden="true" href="#neovim"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Neovim</h4>
<p dir="auto">When using <a href="https://github.com/neovim/nvim-lspconfig"><code>lspconfig</code></a>, pass the <code>gofumpt</code> setting to <code>gopls</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="require(&#39;lspconfig&#39;).gopls.setup({
    settings = {
        gopls = {
            gofumpt = true
        }
    }
})"><pre><span>require</span>(<span><span>&#39;</span>lspconfig<span>&#39;</span></span>).<span>gopls</span>.<span>setup</span>({
    settings <span>=</span> {
        gopls <span>=</span> {
            gofumpt <span>=</span> <span>true</span>
        }
    }
})</pre></div>
<h4 dir="auto"><a id="user-content-emacs" aria-hidden="true" href="#emacs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Emacs</h4>
<p dir="auto">For <a href="https://emacs-lsp.github.io/lsp-mode/" rel="nofollow">lsp-mode</a> users on version 8.0.0 or higher:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(setq lsp-go-use-gofumpt t)"><pre>(<span>setq</span> lsp-go-use-gofumpt <span>t</span>)</pre></div>
<p dir="auto">For users of <code>lsp-mode</code> before <code>8.0.0</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(lsp-register-custom-settings
 &#39;((&#34;gopls.gofumpt&#34; t)))"><pre>(lsp-register-custom-settings
 &#39;((<span><span>&#34;</span>gopls.gofumpt<span>&#34;</span></span> <span>t</span>)))</pre></div>
<p dir="auto">For <a href="https://github.com/joaotavora/eglot">eglot</a> users:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(setq-default eglot-workspace-configuration
 &#39;((:gopls . ((gofumpt . t)))))"><pre>(<span>setq-default</span> eglot-workspace-configuration
 &#39;((<span>:gopls</span> <span>.</span> ((gofumpt <span>.</span> <span>t</span>)))))</pre></div>
<h4 dir="auto"><a id="user-content-helix" aria-hidden="true" href="#helix"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Helix</h4>
<p dir="auto">When using the <code>gopls</code> language server, modify the Go settings in <code>~/.config/helix/languages.toml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[[language]]
name = &#34;go&#34;
config = { &#34;formatting.gofumpt&#34; = true }"><pre>[[<span>language</span>]]
<span>name</span> = <span><span>&#34;</span>go<span>&#34;</span></span>
<span>config</span> = { <span>&#34;formatting.gofumpt&#34;</span> = <span>true</span> }</pre></div>
<h4 dir="auto"><a id="user-content-sublime-text" aria-hidden="true" href="#sublime-text"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sublime Text</h4>
<p dir="auto">With ST4, install the Sublime Text LSP extension according to <a href="https://github.com/sublimelsp/LSP">the documentation</a>,
and enable <code>gopls</code>&#39;s <code>gofumpt</code> option in the LSP package settings,
including setting <code>lsp_format_on_save</code> to <code>true</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#34;lsp_format_on_save&#34;: true,
&#34;clients&#34;:
{
	&#34;gopls&#34;:
	{
		&#34;enabled&#34;: true,
		&#34;initializationOptions&#34;: {
			&#34;gofumpt&#34;: true,
		}
	}
}"><pre><span>&#34;lsp_format_on_save&#34;</span>: <span>true</span>,
<span>&#34;clients&#34;</span>:
{
	<span>&#34;gopls&#34;</span>:
	{
		<span>&#34;enabled&#34;</span>: <span>true</span>,
		<span>&#34;initializationOptions&#34;</span>: {
			<span>&#34;gofumpt&#34;</span>: <span>true</span>,
		}
	}
}</pre></div>
<h3 dir="auto"><a id="user-content-roadmap" aria-hidden="true" href="#roadmap"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Roadmap</h3>
<p dir="auto">This tool is a place to experiment. In the long term, the features that work
well might be proposed for <code>gofmt</code> itself.</p>
<p dir="auto">The tool is also compatible with <code>gofmt</code> and is aimed to be stable, so you can
rely on it for your code as long as you pin a version of it.</p>
<h3 dir="auto"><a id="user-content-frequently-asked-questions" aria-hidden="true" href="#frequently-asked-questions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Frequently Asked Questions</h3>
<blockquote>
<p dir="auto">Why attempt to replace <code>gofmt</code> instead of building on top of it?</p>
</blockquote>
<p dir="auto">Our design is to build on top of <code>gofmt</code>, and we&#39;ll never add rules which
disagree with its formatting. So we extend <code>gofmt</code> rather than compete with it.</p>
<p dir="auto">The tool is a modified copy of <code>gofmt</code>, for the purpose of allowing its use as a
drop-in replacement in editors and scripts.</p>
<blockquote>
<p dir="auto">Why are my module imports being grouped with standard library imports?</p>
</blockquote>
<p dir="auto">Any import paths that don&#39;t start with a domain name like <code>foo.com</code> are
effectively <a href="https://github.com/golang/go/issues/32819" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/32819/hovercard">reserved by the Go toolchain</a>.
Third party modules should either start with a domain name,
even a local one like <code>foo.local</code>, or use <a href="https://github.com/golang/go/issues/37641" data-hovercard-type="issue" data-hovercard-url="/golang/go/issues/37641/hovercard">a reserved path prefix</a>.</p>
<p dir="auto">For backwards compatibility with modules set up before these rules were clear,
<code>gofumpt</code> will treat any import path sharing a prefix with the current module
path as third party. For example, if the current module is <code>mycorp/mod1</code>, then
all import paths in <code>mycorp/...</code> will be considered third party.</p>
<blockquote>
<p dir="auto">How can I use <code>gofumpt</code> if I already use <code>goimports</code> to replace <code>gofmt</code>?</p>
</blockquote>
<p dir="auto">Most editors have replaced the <code>goimports</code> program with the same functionality
provided by a language server like <code>gopls</code>. This mechanism is significantly
faster and more powerful, since the language server has more information that is
kept up to date, necessary to add missing imports.</p>
<p dir="auto">As such, the general recommendation is to let your editor fix your imports -
either via <code>gopls</code>, such as VSCode or vim-go, or via their own custom
implementation, such as GoLand. Then follow the install instructions above to
enable the use of <code>gofumpt</code> instead of <code>gofmt</code>.</p>
<p dir="auto">If you want to avoid integrating with <code>gopls</code>, and are OK with the overhead of
calling <code>goimports</code> from scratch on each save, you should be able to call both
tools; for example, <code>goimports file.go &amp;&amp; gofumpt file.go</code>.</p>
<h3 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h3>
<p dir="auto">Issues and pull requests are welcome! Please open an issue to discuss a feature
before sending a pull request.</p>
<p dir="auto">We also use the <code>#gofumpt</code> channel over at the
<a href="https://invite.slack.golangbridge.org/" rel="nofollow">Gophers Slack</a> to chat.</p>
<p dir="auto">When reporting a formatting bug, insert a <code>//gofumpt:diagnose</code> comment.
The comment will be rewritten to include useful debugging information.
For instance:</p>
<div data-snippet-clipboard-copy-content="$ cat f.go
package p

//gofumpt:diagnose
$ gofumpt f.go
package p

//gofumpt:diagnose v0.1.1-0.20211103104632-bdfa3b02e50a -lang=v1.16"><pre><code>$ cat f.go
package p

//gofumpt:diagnose
$ gofumpt f.go
package p

//gofumpt:diagnose v0.1.1-0.20211103104632-bdfa3b02e50a -lang=v1.16
</code></pre></div>
<h3 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h3>
<p dir="auto">Note that much of the code is copied from Go&#39;s <code>gofmt</code> command. You can tell
which files originate from the Go repository from their copyright headers. Their
license file is <code>LICENSE.google</code>.</p>
<p dir="auto"><code>gofumpt</code>&#39;s original source files are also under the 3-clause BSD license, with
the separate file <code>LICENSE</code>.</p>
</article>
          </div></div>
  </body>
</html>
