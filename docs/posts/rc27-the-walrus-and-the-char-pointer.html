<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.datadoodad.com/recurse%20center/RC27/">Original</a>
    <h1>RC27. The Walrus and the Char Pointer</h1>
    
    <div id="readability-page-1" class="page"><div>
      
        <header>
          
          

  <p>
    
      
      <span>
        <i aria-hidden="true"></i>
        
        <time datetime="2023-06-21T00:00:00-07:00">June 21, 2023</time>
      </span>
    

    <span></span>

    
      
      

      <span>
        <i aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


        </header>
      

      <section itemprop="text">
        

        
        <p><i>Daily dispatches from my 12 weeks at the Recurse Center in Summer 2023
</i></p>
        
        <p>This short post has nothing to do with <code>char</code>s or pointers (I couldn’t resist). It does, however, have to do with walruses – walrus operators, to be exact.</p>

<figure>
<img src="https://www.datadoodad.com/assets/images/RC27_walrusoperator.png" alt="A walrus operator?"/>
<figcaption>THE WALRUS OPERATOR (?)</figcaption>
</figure>

<p>Like the Dall-e hallucination above, the walrus operator (<code>:=</code>) looks … sort of walrus-y. It’s a thing I’ve known exists and have probably looked up and then forgotten about a dozen times. Yesterday it came up again while working on <a href="https://implement-dns.wizardzines.com/">Implement DNS in a Weekend</a>. Now I’m going to write about it, and by virtue of doing so I will never have to look the walrus operator up again.</p>



<p>Normally, you might assign a variable in Python like so:</p>



<p>and then evaluate it in a REPL like so:</p>





<p>Or perhaps you prefer to assign and then print using the <code>print()</code> function:</p>

<div><div><pre><code><span>x</span> <span>=</span> <span>15</span>      <span># Step 1: Assign
</span><span>print</span><span>(</span><span>x</span><span>)</span>    <span># Step 2: Evaluate
</span></code></pre></div></div>



<p>The walrus operator allows you to assign and evaluate in a single step. That’s it.</p>

<div><div><pre><code><span>(</span><span>y</span> <span>:</span><span>=</span> <span>100</span><span>)</span>  <span># Steps 1 and 2: Assign and evaluate!
</span></code></pre></div></div>



<p>Or:</p>

<div><div><pre><code><span>print</span><span>(</span><span>z</span> <span>:</span><span>=</span> <span>&#34;O Oysters, come and walk with us!&#34;</span><span>)</span> <span># Assign and evaluate!
</span><span>print</span><span>(</span><span>z</span><span>)</span>
</code></pre></div></div>

<div><div><pre><code>O Oysters, come and walk with us!
O Oysters, come and walk with us!
</code></pre></div></div>



<p>I guess the reference to <code>char</code>s and pointers is not wholy irreievalt, since the walrus operator turns out to enable very C-like syntax. In C, for instance, it is very natural to do something like this:</p>

<div><div><pre><code><span>while</span> <span>((</span><span>c</span> <span>=</span> <span>getchar</span><span>())</span> <span>!=</span> <span>EOF</span><span>)</span> <span>{</span>
    <span>// do stuff with `c`</span>
<span>}</span>
</code></pre></div></div>

<p>In this case we’re assignining <code>c</code> and evaluating the assignment expression in one go, so that <code>c</code> can be be used as a component of the predicate <code>c != EOF</code>.</p>

<p>While you would probably never read a file like this in Python, you could approximate this C-style syntax using the walrus:</p>

<div><div><pre><code><span>while</span> <span>((</span><span>line</span> <span>:</span><span>=</span> <span>f</span><span>.</span><span>readline</span><span>())</span> <span>!=</span> <span>&#39;</span><span>\n</span><span>&#39;</span><span>):</span>
    <span>print</span><span>(</span><span>line</span><span>)</span>
</code></pre></div></div>

<div><div><pre><code>The sun was shining on the sea,

    Shining with all his might:

He did his very best to make

    The billows smooth and bright—

And this was odd, because it was

    The middle of the night.
</code></pre></div></div>

<p>As another example, in C you could do things like this:</p>

<div><div><pre><code>    <span>int</span> <span>i</span> <span>=</span> <span>0</span><span>;</span>
    <span>char</span> <span>s</span><span>[]</span> <span>=</span> <span>&#34;The time has come&#34;</span><span>;</span>

    <span>printf</span><span>(</span><span>&#34;%c</span><span>\n</span><span>&#34;</span><span>,</span> <span>s</span><span>[</span><span>i</span><span>]);</span>           <span>#</span> <span>s</span><span>[</span><span>0</span><span>]</span> <span>=&gt;</span> <span>T</span>
    <span>printf</span><span>(</span><span>&#34;%c</span><span>\n</span><span>&#34;</span><span>,</span> <span>s</span><span>[</span><span>++</span><span>i</span><span>]);</span>         <span>#</span> <span>s</span><span>[</span><span>1</span><span>]</span> <span>=&gt;</span> <span>h</span>
    <span>printf</span><span>(</span><span>&#34;%c</span><span>\n</span><span>&#34;</span><span>,</span> <span>s</span><span>[(</span><span>i</span> <span>+=</span> <span>1</span><span>)]);</span>    <span>#</span> <span>s</span><span>[</span><span>2</span><span>]</span> <span>=&gt;</span> <span>e</span>
</code></pre></div></div>



<p><code>++i</code> and <code>(i += 1)</code> both increment <code>i</code> and evaluate to new <code>i</code> in one go. You could walrus it up to accomplish a similar feat in Python:</p>

<div><div><pre><code><span>s</span> <span>=</span> <span>&#34;Of shoes and ships and sealing wax&#34;</span>
<span>i</span> <span>=</span> <span>0</span>

<span>print</span><span>(</span><span>s</span><span>[</span><span>i</span><span>])</span>
<span>print</span><span>(</span><span>s</span><span>[(</span><span>i</span> <span>:</span><span>=</span> <span>i</span> <span>+</span> <span>1</span><span>)])</span>
<span>print</span><span>(</span><span>s</span><span>[(</span><span>i</span> <span>:</span><span>=</span> <span>i</span> <span>+</span> <span>1</span><span>)])</span>
<span>print</span><span>(</span><span>s</span><span>[(</span><span>i</span> <span>:</span><span>=</span> <span>i</span> <span>+</span> <span>1</span><span>)])</span>
</code></pre></div></div>





<ul>
  <li>Coffee-chat hat trick. Three damn fine coffee chats with a bunch of damn fine folks who are alums or in the last week of batch, all of whom offered some welcome perspective for someone at the halfway-point moment of reckoning. As a group the convos left me with the abiding sense that it’s okay not to build a React app or do whatever thing seems the most portfolio-ready.</li>
  <li>Continued on to Part 2 (which turned out to be Part 1 of Part 2) of the DNS project. Appreciating this introduction to all things DNS, which is piquing my curiosity about other network-y things.</li>
  <li>Spent a while redrawing <a href="https://www.datadoodad.com/recurse%20center/RC26/">CPU diagrams</a> and talked CPU implementations at weekly nand2tetris meeting</li>
</ul>


          

        

        
      </section>

      

      

      
  

    </div></div>
  </body>
</html>
