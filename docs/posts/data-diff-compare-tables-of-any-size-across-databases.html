<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://news.ycombinator.com/item?id=31837307">Original</a>
    <h1>Show HN: Data Diff – compare tables of any size across databases</h1>
    
    <div id="readability-page-1" class="page"><div>Gleb, Alex, Erez and Simon here – we are building an open-source tool for comparing data within and across databases at any scale. The repo is at <a href="https://github.com/datafold/data-diff" rel="nofollow">https://github.com/datafold/data-diff</a>, and our home page is <a href="https://datafold.com/" rel="nofollow">https://datafold.com/</a>.<p>As a company, Datafold builds tools for data engineers to automate the most tedious and error-prone tasks falling through the cracks of the modern data stack, such as data testing and lineage. We launched two years ago with a tool for regression-testing changes to ETL code <a href="https://news.ycombinator.com/item?id=24071955" rel="nofollow">https://news.ycombinator.com/item?id=24071955</a>. It compares the produced data before and after the code change and shows the impact on values, aggregate metrics, and downstream data applications.</p><p>While working with many customers on improving their data engineering experience, we kept hearing that they needed to diff their data across databases to validate data replication between systems.</p><p>There were 3 main use cases for such replication:</p><p>(1) To perform analytics on transactional data in an OLAP engine (e.g. PostgreSQL &gt; Snowflake)
(2) To migrate between transactional stores (e.g. MySQL &gt; PostgreSQL)
(3) To leverage data in a specialized engine (e.g. PostgreSQL &gt; ElasticSearch).</p><p>Despite multiple vendors (e.g., Fivetran, Stitch) and open-source products (Airbyte, Debezium) solving data replication, there was no tooling for validating the correctness of such replication. When we researched how teams were going about this, we found that most have been either:</p><p>Running manual checks: e.g., starting with COUNT(*) and then digging into the discrepancies, which often took hours to pinpoint the inconsistencies.
Using distributed MPP engines such as Spark or Trino to download the complete datasets from both databases and then comparing them in memory – an expensive process requiring complex infrastructure.</p><p>Our users wanted a tool that could:</p><p>(1) Compare datasets quickly (seconds/minutes) at a large (millions/billions of rows) scale across different databases (2) Have minimal network IO and database workload overhead. (3) Provide straightforward output: basic stats and what rows are different. (4) Be embedded into a data orchestrator such as Airflow to run right after the replication process.</p><p>So we built Data Diff as an open-source package available through pip. Data Diff can be run in a CLI or wrapped into any data orchestrator such as Airflow, Dagster, etc.</p><p>To solve for speed at scale with minimal overhead, Data Diff relies on checksumming the data in both databases and uses binary search to identify diverging records. That way, it can compare arbitrarily large datasets in logarithmic time and IO – only transferring a tiny fraction of the data over the network. For example, it can diff tables with 25M rows in ~10s and 1B+ rows in ~5m across two physically separate PostgreSQL databases while running on a typical laptop.</p><p>We&#39;ve launched this tool under the MIT license so that any developer can use it, and to encourage contributions of other database connectors. We didn&#39;t want to charge engineers for such a fundamental use case. We make money by charging a license fee for advanced solutions such as column-level data lineage, CI workflow automation, and ML-powered alerts.</p></div></div>
  </body>
</html>
