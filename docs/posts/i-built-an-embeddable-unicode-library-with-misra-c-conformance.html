<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://railgunlabs.com/unicorn/">Original</a>
    <h1>Show HN: I built an embeddable Unicode library with MISRA C conformance</h1>
    
    <div id="readability-page-1" class="page"><article>
<h2 id="fully-customizable">Essential Algorithms</h2>
<p>Unicorn implements the most essential Unicode algorithms:
</p>
<ul>
<li>Normalization (NFC, NFD)</li>
<li>Case conversion</li>
<li>Case folding</li>
<li>Collation (via the DUCET)</li>
<li>Grapheme, word, and sentence segmentation</li>
<li>BOCU-1 short string compression</li>
<li>UTF-8, 16, and 32 decoders, encoders, and validators</li>
</ul>
<h2 id="fully-customizable">Fully Customizable</h2>
<p>
Unicorn is fully customizable.
You can choose which Unicode algorithms and character properties to include.
You can even choose which Unicode character blocks to include!
</p>
<h2 id="ultra-portable">Ultra Portable</h2>
<p>
Unicorn does <b>not</b> require an FPU or 64-bit integers.
It is written in C99 and only requires a few features from libc which are listed in following table.
</p>
<table>
    <thead>
        <tr>
            <th>Header</th>
            <th>Types</th>
            <th>Macros</th>
            <th>Functions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>stdint.h</b></td>
            <td><code>int8_t</code>, <code>int16_t</code>, <code>int32_t</code></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><b>string.h</b></td>
            <td></td>
            <td></td>
            <td><code>memcpy</code>, <code>memset</code>, <code>memcmp</code></td>
        </tr>
        <tr>
            <td><b>stddef.h</b></td>
            <td><code>size_t</code></td>
            <td><code>NULL</code></td>
            <td></td>
        </tr>
        <tr>
            <td><b>stdbool.h</b></td>
            <td></td>
            <td><code>bool</code>, <code>true</code>, <code>false</code></td>
            <td></td>
        </tr>
        <tr>
            <td><b>assert.h</b></td>
            <td></td>
            <td><code>assert</code></td>
            <td></td>
        </tr>
    </tbody>
</table>
<h2 id="misra-compliance">MISRA C:2012 Compliant</h2>
<p>
Unicorn honors all Required, Mandatory, and most Advisory rules defined by MIRSA C:2012.
Deviations are <a href="https://railgunlabs.com/unicorn/manual/misra-compliance/">documented here</a>.
You are encouraged to audit Unicorn and verify its level of conformance is acceptable.
</p>
<h2 id="thread-safe">Thread Safe</h2>
<p>
Unicorn is thread-safe except for the following caveats:
</p>
<ol>
<li>Functions that allocate memory are only as thread-safe as the allocator itself.</li>
<li>The <a href="https://railgunlabs.com/unicorn/manual/api/library-configuration/">configuration API</a> is not thread-safe, however, in typical usage it’s only invoked at application startup and only if the default configuration is unsatisfactory.</li>
</ol>
<h2 id="atomic-operations">Atomic Operations</h2>
<p>
All operations in Unicorn are atomic.
That means either an operation occurs or nothing occurs at all.
This guarantees errors, such as out-of-memory errors, never corrupt internal state.
This also means if an error occurs, like an out of memory error, then you can recover (free up memory) and try the operation again.
</p>
<h2 id="extensively-tested">Extensively Tested</h2>
<ul>
<li>Official Unicode conformance tests</li>
<li>Manually written tests</li>
<li>Out-of-memory tests</li>
<li>Fuzz tests</li>
<li>Static analysis</li>
<li>Valgrind analysis</li>
<li>Code sanitizers (UBSAN, ASAN, and MSAN)</li>
<li>Extensive use of assert() and run-time checks</li>
</ul>
<h2 id="supported-encodings">Encoding Compatible</h2>
<p>
All functions that operate on text can accept UTF-8, UTF-16, UTF-32, or Unicode scalar values.
UTF-16 and UTF-32 are supported in big endian, little endian, and native byte orders.
</p>
<p>
The implementation performs runtime safety checks by default to guard against malformed or maliciously encoded text.
If you know text isn’t malformed you can optionally skip these checks to improve processing time.
</p>
        </article></div>
  </body>
</html>
