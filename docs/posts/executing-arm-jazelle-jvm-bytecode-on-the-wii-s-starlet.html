<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/thamugadi/jazelle-wii">Original</a>
    <h1>Executing ARM Jazelle (JVM Bytecode) on the Wii&#39;s Starlet</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto"><a id="user-content-jazelle-wii" aria-label="Permalink: jazelle-wii" href="#jazelle-wii"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This Wii homebrew executes ARM code on the Starlet with <a href="https://github.com/mkwcat/saoirse/blob/master/channel/Main/IOSBoot.cpp#L86">Palapeli&#39;s exploit</a>, and uses it to set the Starlet in Jazelle mode. It then jumps to the JVM bytecode specified in <a href="https://github.com/thamugadi/jazelle-wii/blob/main/bytecode/bytecode">bytecode/bytecode</a>. In the included example, it is:</p>
<div data-snippet-clipboard-copy-content="bipush 19
istore_0
iload_0
ireturn"><pre><code>bipush 19
istore_0
iload_0
ireturn
</code></pre></div>
<p dir="auto">After the execution, it prints the state of the stack, and the 8 first local variables.</p>
<p dir="auto"><strong>NOTE</strong>: A large number of instructions is not natively supported by Jazelle and must be handled by predefined ARM code. As except <code>ireturn</code> none has been implemented here, it will fail to run most programs. Placeholders for the handlers are available in <a href="https://github.com/thamugadi/jazelle-wii/blob/main/src/arm/instr_handlers.s">src/arm/instr_handlers.s</a></p>
<div dir="auto"><a id="user-content-references" aria-label="Permalink: References" href="#references"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://mariokartwii.com/showthread.php?tid=1994" rel="nofollow">https://mariokartwii.com/showthread.php?tid=1994</a></li>
<li><a href="https://hackspire.org/index.php/Jazelle" rel="nofollow">https://hackspire.org/index.php/Jazelle</a></li>
<li><a href="https://github.com/SonoSooS/libjz">https://github.com/SonoSooS/libjz</a></li>
<li><a href="https://github.com/neuschaefer/jzvm">https://github.com/neuschaefer/jzvm</a></li>
<li><a href="https://github.com/devkitPro/libogc">https://github.com/devkitPro/libogc</a></li>
</ul>
</article></div></div>
  </body>
</html>
