<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dimonomid/nerdlog">Original</a>
    <h1>Show HN: Nerdlog – Fast, multi-host TUI log viewer with timeline histogram</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Nerdlog is a fast, remote-first, multi-host TUI log viewer with timeline
histogram and no central server. Loosely inspired by Graylog/Kibana, but
without the bloat. Pretty much no setup needed, either.</p>
<p dir="auto">It&#39;s laser-focused on being efficient while querying logs from multiple remote
machines simultaneously, filtering them by time range and patterns, while also
drawing a timeline histogram for quick visual insight:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dimonomid/nerdlog/blob/master/images/nerdlog_intro.png"><img src="https://github.com/dimonomid/nerdlog/raw/master/images/nerdlog_intro.png" alt="Nerdlog"/></a></p>
<p dir="auto">Primary use case: reading system logs (<code>/var/log/messages</code> or
<code>/var/log/syslog</code>) from one or more remote hosts. Very efficient even on large log files (like 1GB or more).</p>
<p dir="auto">It does support some other log formats and can use any log files, but that was the primary use case which was driving the implementation: we were having our web service backend running as systemd services on a bunch of Linux instances, printing a lot of logs, and wanted to be able to read these logs efficiently and having the timeline histogram, much like tools like Graylog have.</p>

<ul dir="auto">
<li>No centralized server required; nerdlog establishes an ssh connection to
every node that the user wants to collect logs from, and keeps them idle in
the background (although a separate server to store the log files might still
help in some cases; see the <a href="https://dmitryfrank.com/projects/nerdlog/article#requirements" rel="nofollow">Requirements and limitations</a> sections in the article);</li>
<li>Logs are not downloaded to the local machine in full: all the log analysis
is done on the remote nodes, and on each query, only the following data is
downloaded from each node: up to 250 messages from every logstream
(configurable), and data for the timeline histogram. It&#39;s obviously possible
to paginate over the logs, to get the next bunch of messages, etc. Nerdlog
then merges the responses from all nodes together, and presents to the user
in a unified form;</li>
<li>Most of the data is gzipped in transit, thus saving the bandwidth as well.</li>
</ul>

<p dir="auto">Here’s a quick demo showing how Nerdlog works across four remote nodes:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dimonomid/nerdlog/blob/master/images/nerdlog_demo.gif"><img src="https://github.com/dimonomid/nerdlog/raw/master/images/nerdlog_demo.gif" alt="Nerdlog" data-animated-image=""/></a></p>

<p dir="auto">It might be useful to know the history to understand the project motivation and
overall direction, you can read it
<a href="https://dmitryfrank.com/projects/nerdlog/article#project_history" rel="nofollow">here in the full article</a>.</p>

<p dir="auto">Originally hacked together in 2022 to replace painfully slow Splunk setups.
Revisited in 2025 to clean it up to a certain extent, and open source it.</p>
<p dir="auto">It&#39;s still kinda in a proof-of-concept stage though. Implemented as fast as
possible, spaghetti code abounds, could be covered with more tests, a lot more
features could be implemented, etc. Was only tested for real on Linux, and with
Linux hosts to get the logs from.</p>
<p dir="auto">But it works. It&#39;s pretty usable and surprisingly fast.</p>

<p dir="auto">To build it, you need <a href="https://go.dev/" rel="nofollow">Go</a>. Having it installed:</p>
<p dir="auto">To install <code>nerdlog</code> binary to your <code>/usr/local/bin</code>:</p>

<p dir="auto">Or to build and run without installing:</p>


<p dir="auto">When you open the app (<code>nerdlog</code> binary), it&#39;ll show a query edit form with a
few fields:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dimonomid/nerdlog/blob/master/images/nerdlog_query_edit_form.png"><img src="https://github.com/dimonomid/nerdlog/raw/master/images/nerdlog_query_edit_form.png" alt="Nerdlog"/></a></p>
<p dir="auto">Time range is self-explanatory.</p>
<p dir="auto">Next one is &#34;Logstreams&#34;: shortly, a logstream means one or more <em>consecutive</em>
logfiles like <code>/var/log/syslog</code>, <code>/var/log/syslog.1</code> etc, on a particular
server accessible via ssh. If you have a server like <code>myserver.com</code> accessible
via ssh on port 22, then the logstream to read its <code>/var/log/syslog</code> (or
<code>/var/log/messages</code>) file could be:</p>

<p dir="auto">If you need a different port and/or different log files, then a more explicit
form is:</p>
<div data-snippet-clipboard-copy-content="myuser@myserver.com:1234:/some/other/logfile"><pre><code>myuser@myserver.com:1234:/some/other/logfile
</code></pre></div>
<p dir="auto">Multiple logstreams can be provided separated by commas, like this:</p>
<div data-snippet-clipboard-copy-content="myuser@myserver.com, myuser@myserver.com:1234:/some/other/logfile"><pre><code>myuser@myserver.com, myuser@myserver.com:1234:/some/other/logfile
</code></pre></div>
<p dir="auto">Nerdlog also reads ssh config (<code>~/.ssh/config</code>) and can take the port, username
and hostname from there. It supports globs too, so e.g. in your ssh config you
have two hosts like <code>myhost-01</code> and <code>myhost-02</code>, then instead of specifying
your logstreams as <code>myhost-01,myhost-02</code> it can be simply <code>myhost-*</code>.</p>
<p dir="auto">Obviously though, we can&#39;t specify the log files in the ssh config, so if you
need to configure a logstream for non-default log file on some host(s), you can
use the nerdlog&#39;s own logstreams config file <code>~/.config/nerdlog/logstreams.yaml</code>,
which can look like this:</p>
<div data-snippet-clipboard-copy-content="log_streams:
  myhost-01:
    hostname: actualhost1.com
    port: 1234
    user: myuser
    log_files:
      - /some/custom/logfile
  myhost-02:
    hostname: actualhost2.com
    port: 7890
    user: myuser
    log_files:
      - /some/custom/logfile"><pre><code>log_streams:
  myhost-01:
    hostname: actualhost1.com
    port: 1234
    user: myuser
    log_files:
      - /some/custom/logfile
  myhost-02:
    hostname: actualhost2.com
    port: 7890
    user: myuser
    log_files:
      - /some/custom/logfile
</code></pre></div>
<p dir="auto">The last thing on that query form is the &#34;Select field expression&#34;, it looks
like this:</p>
<div data-snippet-clipboard-copy-content="time STICKY, lstream, message, *"><pre><code>time STICKY, lstream, message, *
</code></pre></div>
<p dir="auto">It only affects the presentation of the logs in the UI. The syntax somewhat
resembles the SQL <code>SELECT</code> syntax, although a lot more limited.</p>
<p dir="auto">The <code>STICKY</code> here just means that when the table is scrolled to the right,
these sticky columns will remain visible at the left side.</p>
<p dir="auto">Another supported keyword here is <code>AS</code>, so e.g. <code>message AS msg</code> is a valid
syntax.</p>
<p dir="auto">For a more extensive discussion on the logstreams and other core concepts, consider
reading the <a href="https://dmitryfrank.com/projects/nerdlog/article#core_concepts" rel="nofollow">Core concepts</a>
section in the article.</p>

<ul dir="auto">
<li>SSH access to the remote hosts is required. You can read about the related limitations and possible workarounds here: <a href="https://dmitryfrank.com/projects/nerdlog/article#consequences_of_requiring_ssh_access" rel="nofollow">Consequences of requiring SSH access</a>;</li>
<li>SSH agent must be running locally;</li>
<li>Gawk (GNU awk) is a requirement on the hosts, since nerlog relies on the <code>-b</code>
option. So notably, <code>mawk</code> will not work. You need <code>gawk</code>;</li>
<li>If you&#39;re going to read system logs (those accessible via <code>journalctl</code>), make
sure that you have <code>rsyslog</code> or similar system installed; otherwise, nobody
is writing to these log files. Notably, on latest Fedora and Debian,
<code>rsyslog</code> is not installed by default.</li>
</ul>
<p dir="auto">For more extensive discussion about these requirements, the consequent limitations, and possible ways to address them, see the <a href="https://dmitryfrank.com/projects/nerdlog/article#requirements" rel="nofollow">Requirements and Limitations</a> sections in the article.</p>

<p dir="auto">UI consists of a few key elements:</p>
<ul dir="auto">
<li>
<p dir="auto">Awk pattern input: just a filter for logs. Empty filter obviously means no filter, and some examples of valid filters are:</p>
<ul dir="auto">
<li>Simple regexp: <code>/foo bar/</code></li>
<li>Regexps with complex conditions: <code>( /foo bar/ || /other stuff/ ) &amp;&amp; !/baz/</code></li>
</ul>
</li>
<li>
<p dir="auto">Edit button: opens a complete query edit form discussed above.</p>
</li>
<li>
<p dir="auto">Menu button: just opens a menu with a few extra items:</p>
<ul dir="auto">
<li>Back: Go to the previous query, just like in the browser</li>
<li>Forward: Go to the next query, just like in the browser</li>
<li>Copy query command: It&#39;s the equivalent of copying an URL in the browser, containing the link to the current logs query. See the <code>:xc[lip]</code> command below for more details on that.</li>
</ul>
</li>
<li>
<p dir="auto">Time range histogram: similarly to some web-based log viewers, like Graylog or Kibana, Nerdlog also shows a timeline histogram, so you can quickly glance at the intensiveness of the logs accordingly to the current query. It&#39;s also easy to visually select and apply timerange (using arrow / PgUp / PgDown / Home / End / Enter keys or vim-like bindings)</p>
</li>
<li>
<p dir="auto">Logs table: obviously contains the actual logs. Like in the normal, old-school logs, <strong>the latest message is on the bottom</strong>. I don&#39;t know why modern web tools do it the other way around (latest message being on the top), to me it&#39;s nonsense. But let me know if you prefer it this modern way; it shouldn&#39;t be too hard to make it configurable.</p>
<p dir="auto">Every line shows the timestamp and the message, and it can also be scrolled to the right to show the context tags parsed from a log line.</p>
</li>
<li>
<p dir="auto">Status line. On the left side, there are a few computer icons with numbers:</p>
<ul dir="auto">
<li>Green: number of lstreams which we&#39;re fully connected to and which are idle</li>
<li>Orange: number of lstreams which we&#39;re fully connected to and which are executing a query</li>
<li>Red: number of lstreams which we&#39;re trying to connect to</li>
</ul>
<p dir="auto">And on the right side, there are 3 numbers like <code>1201 / 1455 / 2948122</code>. The rightmost number (2948122) is the total number of log messages that matched the query and the timerange (and included in the timeline histogram above). The next number (1455) is the number of actual log lines currently loaded in the nerdlog app, and the leftmost (1201) is just the cursor within those available logs.</p>
</li>
<li>
<p dir="auto">Command line: Vim-like command line. Hit <code>:</code> to enter command mode.</p>
</li>
</ul>

<p dir="auto">There are multiple ways to navigate the app, and you can mix them as you wish.</p>
<p dir="auto">The most conventional one is to just use Tab and Shift+Tab to switch between widgets (logs table, query input, Edit and Menu buttons, timeline histogram), arrows and keys like Home / End / PgUp / PgDn to move around within a widget, Enter to apply things, Escape to cancel things.</p>
<p dir="auto">If you know Vim though, you&#39;ll feel right at home in nerdlog too since it supports a bunch of Vim-like keybindings:</p>
<ul dir="auto">
<li>Keys <code>h</code>, <code>j</code>, <code>k</code>, <code>l</code>, <code>g</code>, <code>G</code>, <code>Ctrl+U</code>, <code>Ctrl+D</code>, etc move cursor whenever you&#39;re not in some text-editing field, like query input or others</li>
<li>Hitting Escape eventually brings you to the &#34;Normal mode&#34;, which means that the logs table is focused (and all of those <code>h</code>, <code>j</code>, <code>k</code>, <code>l</code>, etc work there)</li>
<li><code>:</code> focuses the command line where you can input some commands (see below)</li>
<li><code>i</code> or <code>a</code> focuses the main query input field</li>
</ul>
<p dir="auto">When in an input field (command line, query input, etc), you can go through input history using <code>Up</code> / <code>Down</code> or <code>Ctrl+P</code> / <code>Ctrl+N</code>.</p>
<p dir="auto">In the query edit form (the Edit button on the UI, or the <code>:e[dit]</code> command), the <code>Ctrl+K</code> / <code>Ctrl+J</code> iterates &#34;full&#34; query history (affecting not only one field like query, but all of them: time range, logstreams filter, query).</p>

<p dir="auto">In addition to the UI which is self-discoverable, there is a vim-like command line
with a few commands supported.</p>
<p dir="auto"><code>:xc[lip]</code> Copies to clipboard a command string which would open nerdlog with
the current logstreams filter, time range and query. This can be done from the Menu too (Menu -&gt; Copy query command)</p>
<p dir="auto">This is the equivalent of URL sharing for web-based logging tools: when you&#39;d
normally copy the graylog URL and paste it in slack somewhere, with nerdlog you
can do the same by sharing this string.</p>
<p dir="auto">The string would look like this:</p>
<div data-snippet-clipboard-copy-content="nerdlog --lstreams &#39;localhost&#39; --time -3h --pattern &#39;/something/&#39;"><pre><code>nerdlog --lstreams &#39;localhost&#39; --time -3h --pattern &#39;/something/&#39;
</code></pre></div>
<p dir="auto">And it can be used in either the shell (which would open a new instance of
nerdlog), OR it can also be used in a currently running nerdlog instance: just
type <code>:</code> to go to the command mode, copypaste this command above, and nerdlog
will parse it and apply the query.</p>
<p dir="auto"><code>:back</code> or <code>:prev</code> Go to the previous query, just like in the browser. This can be done from the Menu too (Menu -&gt; Back)</p>
<p dir="auto"><code>:fwd</code> or <code>:next</code> Go to the next query, just like in the browser. This can be done from the Menu too (Menu -&gt; Forward)</p>
<p dir="auto"><code>:e[dit]</code> Open query edit form; you can do the same if you just use Tab to navigate
to the Edit button in the UI.</p>
<p dir="auto"><code>:w[rite] [filename]</code> Write all currently loaded log lines to the filename.
If filename is omitted, <code>/tmp/last_nerdlog</code> is used.</p>
<p dir="auto"><code>:reconnect</code> Reconnect to all logstreams</p>
<p dir="auto"><code>:disconnect</code> Disconnect from all logstreams</p>
<p dir="auto"><code>:set option=value</code> Set option to the new value</p>
<p dir="auto"><code>:set option?</code> Get current value of an option</p>
<p dir="auto">Currently supported options are:</p>
<ul dir="auto">
<li><code>numlines</code>: the number of log messages loaded from every logstream on every
request. Default: 250.</li>
<li><code>timezone</code>: the timezone to format the timestamps on the UI. By default,
<code>Local</code> is used, but you can specify <code>UTC</code> or <code>America/New_York</code> etc.</li>
</ul>
<p dir="auto"><code>:q[uit]</code> Quit the app.</p>

<p dir="auto"><a href="https://dmitryfrank.com/projects/nerdlog/article" rel="nofollow">Check out the Nerdlog article</a> for more in-depth look at the core concepts, limitations and workarounds, and implementation details.</p>
</article></div></div>
  </body>
</html>
