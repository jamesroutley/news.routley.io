<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bellard.org/ts_zip/">Original</a>
    <h1>Ts_zip: Text Compression Using Large Language Models</h1>
    
    <div id="readability-page-1" class="page">


The <code>ts_zip</code> utility can
compress (and hopefully decompress) text files using a Large Language
Model. The compression ratio is much higher than with other
compression tools. There are some caveats of course:
<ul>
  <li>A GPU is necessary to get a reasonable speed. 4 GB of RAM is
    required. </li>
  <li>It is slower than conventional compressors (compression and
    decompression speed: up to 1 MB/s on a RTX 4090).</li>
  <li>Only text files are supported. Binary files won&#39;t be compressed
  much. The currently used language model (RWKV 169M v4) was trained
  mostly on English texts. Other languages are supported including
  source code.</li>
  <li>It is experimental so no backward compability should be expected
    between the various versions.</li>
  <li>See also <a href="https://bellard.org/ts_sms">ts_sms</a> which is optimized for the
    compression of small messages.</li>
</ul>

<h2>Compression Ratio</h2>
<p>
The compression ratio is given in bits per byte (bpb).
</p>
<table>
  <thead>
    <tr>
      <th aria-sort="ascending">File
      </th><th>Original size</th><th colspan="2"><a href="https://en.wikipedia.org/wiki/XZ_Utils">xz</a></th><th colspan="2">ts_zip</th></tr>
  </thead>
  <tbody>
    <tr><td><a href="https://en.wikipedia.org/wiki/Canterbury_corpus">alice29.txt</a>
      </td><td>152089
      </td><td>48492
      </td><td>2.551
      </td><td>21713
      </td><td>1.142
    </td></tr>
    <tr><td><a href="https://en.wikipedia.org/wiki/Calgary_corpus">book1</a>
      </td><td>768771
      </td><td>261116
      </td><td>2.717
      </td><td>137477
      </td><td>1.431
    </td></tr>
    <tr><td><a href="http://mattmahoney.net/dc/text.html">enwik8</a>
      </td><td>100000000
      </td><td>24865244
      </td><td>1.989
      </td><td>13825741
      </td><td>1.106
    </td></tr>
    <tr><td><a href="http://mattmahoney.net/dc/text.html">enwik9</a>
      </td><td>1000000000
      </td><td>213370900
      </td><td>1.707
      </td><td>135443237
      </td><td>1.084
    </td></tr>
    <tr><td><a href="https://mirrors.edge.kernel.org/pub/linux/kernel/v1.2/linux-1.2.13.tar.xz">linux-1.2.13.tar</a>
      </td><td>9379840
      </td><td>1689468
      </td><td>1.441
      </td><td>1196859
      </td><td>1.021
    </td></tr>
  </tbody>
</table>
<p>
Results and speed for other programs on enwik8 and enwik9 are
available at the <a href="http://www.mattmahoney.net/dc/text.html">Large
Text Compression Benchmark</a>.
</p>

<h2>Download</h2>

<ul>
  <li>Linux version: <a href="https://bellard.org/ts_zip/ts_zip-2024-03-02.tar.gz">ts_zip-2024-03-02.tar.gz</a>.</li>
  <li>Windows version: <a href="https://bellard.org/ts_zip/ts_zip-2024-03-02-win64.zip">ts_zip-2024-03-02-win64.zip</a>.</li>
</ul>

<h2>Technical information</h2>
<ul>
  <li><code>ts_zip</code> uses
  the <a href="https://github.com/BlinkDL/RWKV-LM">RWKV 169M v4</a>
  language model which is a good compromise between speed and
  compression ratio. The model is quantized to 8 bits per parameter
    and evaluated using BF16 floating point numbers.</li>
  <li>The language model predicts the probabilities of the next token. An
    arithmetic coder then encodes the next token according to the
    probabilities.</li>
  <li>The model is evaluated in a deterministic and reproducible
    way. Hence the result does not depend on the exact GPU or CPU
    model nor on the number of configured threads. This key point
    ensures that a compressed file can be decompressed using a
    different hardware or software configuration.</li>
</ul>

<hr/>
Fabrice Bellard - <a href="https://bellard.org">https://bellard.org/</a>


</div>
  </body>
</html>
