<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/recode-sh/cli">Original</a>
    <h1>Show HN: Recode – Free, open-source, community-driven Codespaces alternative</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/1233275/172015327-7234ec48-fe57-4a7b-b48e-baf5e6d67aab.png"><img src="https://user-images.githubusercontent.com/1233275/172015327-7234ec48-fe57-4a7b-b48e-baf5e6d67aab.png" alt="recode" width="180" height="180"/></a>
</p>

    <p dir="auto">Remote development environments defined as code. Running in your cloud provider account.</p>

<blockquote>
  ... you can think of it as a desktop version of Gitpod / Coder / GitHub Codespaces less polished and with less features but 100% free, 100% open-source and 100% community-driven
</blockquote>
<div data-snippet-clipboard-copy-content="recode aws start recode-sh/workspace --instance-type t2.medium"><pre>recode aws start recode-sh/workspace --instance-type t2.medium</pre></div>
<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path fill-rule="evenodd" d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z"></path>
</svg>
    <span aria-label="Video description recode_intro.mp4">recode_intro.mp4</span>
    <span></span>
  </summary>

  <video src="https://user-images.githubusercontent.com/1233275/172346442-d6fef09c-2ef0-4633-8d72-e20bef8fc1a9.mp4" data-canonical-src="https://user-images.githubusercontent.com/1233275/172346442-d6fef09c-2ef0-4633-8d72-e20bef8fc1a9.mp4" controls="controls" muted="muted">

  </video>
</details>

<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/1233275/172015213-0ba516b6-fe24-4bd4-8ad4-d876c6188f3c.png"><img width="1136" alt="vscode" src="https://user-images.githubusercontent.com/1233275/172015213-0ba516b6-fe24-4bd4-8ad4-d876c6188f3c.png"/></a></p>
<blockquote>
  ... see the <a href="https://github.com/recode-sh/workspace">recode-sh/workspace</a> repository for an example of development environment configuration
</blockquote>
<h2 dir="auto"><a id="user-content-table-of-contents" href="#table-of-contents" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of contents</h2>
<ul dir="auto">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#login">Login</a></li>
<li><a href="#start">Start</a></li>
<li><a href="#stop">Stop</a></li>
<li><a href="#remove">Remove</a></li>
<li><a href="#uninstall">Uninstall</a></li>
</ul>
</li>
<li><a href="#development-environments-configuration">Development environments configuration</a>
<ul dir="auto">
<li><a href="#-tip-the---rebuild-flag">Tip: the --rebuild flag</a></li>
<li><a href="#-tip-docker--docker-compose">Tip: Docker &amp; Docker compose</a></li>
<li><a href="#user-configuration">User configuration</a></li>
<li><a href="#project-configuration">Project configuration</a>
<ul dir="auto">
<li><a href="#-what-if-i-dont-have-an-user-configuration">What if I don&#39;t have an user configuration?</a></li>
</ul>
</li>
<li><a href="#recode-configuration">Recode configuration</a>
<ul dir="auto">
<li><a href="#base-image-recode-shbase-dev-env">Base image (recode-sh/base-dev-env)</a></li>
<li><a href="#visual-studio-code-extensions">Visual Studio Code extensions</a></li>
<li><a href="#multiple-repositories">Multiple repositories</a></li>
<li><a href="#build-arguments-recode_instance_os-and-recode_instance_arch">Build arguments (RECODE_INSTANCE_OS and RECODE_INSTANCE_ARCH)</a></li>
<li><a href="#hooks">Hooks</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#frequently-asked-questions">Frequently asked questions</a>
<ul dir="auto">
<li><a href="#-how-does-it-compare-with-gitpod--coder--codespaces--x">How does it compare with GitPod / Coder / Codespaces / X?</a></li>
<li><a href="#-how-does-it-compare-with-vagrant--vscode-remote-ssh--container-extensions">How does it compare with Vagrant / VSCode remote SSH / Container extensions?</a></li>
<li><a href="#-why-using-docker-as-a-vm-and-not-something-like-nixos-for-example">Why using Docker as a VM and not something like NixOS, for example?</a></li>
<li><a href="#-given-that-my-dev-env-will-run-in-a-container-does-it-mean-that-it-will-be-limited">Given that my dev env will run in a container does it mean that it will be limited?</a></li>
</ul>
</li>
<li><a href="#the-future">The future</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 dir="auto"><a id="user-content-requirements" href="#requirements" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h2>
<p dir="auto">The Recode binary has been tested on Linux and Mac. Support for Windows is theoretical (<a href="https://github.com/recode-sh/cli/issues/4" data-hovercard-type="issue" data-hovercard-url="/recode-sh/cli/issues/4/hovercard">testers needed</a> <g-emoji alias="blue_heart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f499.png">💙</g-emoji>).</p>
<p dir="auto">Before using Recode, the following dependencies need to be installed:</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://code.visualstudio.com/" rel="nofollow">Visual Studio Code</a> (currently the sole editor supported).</p>
</li>
<li>
<p dir="auto"><a href="https://www.openssh.com/" rel="nofollow">OpenSSH Client</a> (used to access your development environments).</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-installation" href="#installation" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">The easiest way to install Recode is by running the following command in your terminal:</p>
<div data-snippet-clipboard-copy-content="curl -sf https://raw.githubusercontent.com/recode-sh/cli/main/install.sh | sh -s -- -b /usr/local/bin latest"><pre>curl -sf https://raw.githubusercontent.com/recode-sh/cli/main/install.sh <span>|</span> sh -s -- -b /usr/local/bin latest</pre></div>
<p dir="auto">This command could be run as-is or by changing:</p>
<ul dir="auto">
<li>
<p dir="auto">The installation directory by replacing <code>/usr/local/bin</code> with your <strong>preferred path</strong>.</p>
</li>
<li>
<p dir="auto">The version installed by replacing <code>latest</code> with a <strong><a href="https://github.com/recode-sh/cli/releases">specific version</a></strong>.</p>
</li>
</ul>
<p dir="auto">Once done, you could confirm that Recode is installed by running the <code>recode</code> command:</p>

<h2 dir="auto"><a id="user-content-usage" href="#usage" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<div data-snippet-clipboard-copy-content="To begin, run the command &#34;recode login&#34; to connect your GitHub account.	

From there, the most common workflow is:

  - recode &lt;cloud_provider&gt; start &lt;repository&gt;  : to start a development environment for a specific GitHub repository
  - recode &lt;cloud_provider&gt; stop &lt;repository&gt;   : to stop a development environment (without removing your data)
  - recode &lt;cloud_provider&gt; remove &lt;repository&gt; : to remove a development environment AND your data
  
&lt;repository&gt; may be relative to your personal GitHub account (eg: cli) or fully qualified (eg: my-organization/api).

Usage:
  recode [command]

Available Commands:
  aws         Use Recode on Amazon Web Services
  completion  Generate the autocompletion script for the specified shell
  help        Help about any command
  login       Connect a GitHub account to use with Recode

Flags:
  -h, --help    help for recode
  -v, --version version for recode

Use &#34;recode [command] --help&#34; for more information about a command."><pre><span>To begin, run the command &#34;recode login&#34; to connect your GitHub account.	</span>

<span>From there, the most common workflow is:</span>

<span>  - recode &lt;cloud_provider&gt; start &lt;repository&gt;  : to start a development environment for a specific GitHub repository</span>
<span>  - recode &lt;cloud_provider&gt; stop &lt;repository&gt;   : to stop a development environment (without removing your data)</span>
<span>  - recode &lt;cloud_provider&gt; remove &lt;repository&gt; : to remove a development environment AND your data</span>
<span>  </span>
<span>&lt;repository&gt; may be relative to your personal GitHub account (eg: cli) or fully qualified (eg: my-organization/api).</span>

<span>Usage:</span>
<span>  recode [command]</span>

<span>Available Commands:</span>
<span>  aws         Use Recode on Amazon Web Services</span>
<span>  completion  Generate the autocompletion script for the specified shell</span>
<span>  help        Help about any command</span>
<span>  login       Connect a GitHub account to use with Recode</span>

<span>Flags:</span>
<span>  -h, --help    help for recode</span>
<span>  -v, --version version for recode</span>

<span>Use &#34;recode [command] --help&#34; for more information about a command.</span></pre></div>
<h3 dir="auto"><a id="user-content-login" href="#login" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Login</h3>

<p dir="auto">To begin, you need to run the <code>login</code> command to connect your GitHub account.</p>
<p dir="auto">Recode requires the following permissions:</p>
<ul dir="auto">
<li>
<p dir="auto">&#34;<em>Public SSH keys</em>&#34; and &#34;<em>Repositories</em>&#34; to let you access your repositories from your development environments.</p>
</li>
<li>
<p dir="auto">&#34;<em>GPG Keys</em>&#34; and &#34;<em>Personal user data</em>&#34; to configure Git and sign your commits (verified badge).</p>
</li>
</ul>
<p dir="auto"><strong>All your data (including the OAuth access token) are only stored locally in <code>~/.config/recode/recode.yml</code> (or in <code>XDG_CONFIG_HOME</code> if set).</strong></p>
<p dir="auto">The source code that implements the GitHub OAuth flow is located in the <a href="https://github.com/recode-sh/api">recode-sh/api</a> repository.</p>
<h3 dir="auto"><a id="user-content-start" href="#start" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Start</h3>
<div data-snippet-clipboard-copy-content="recode &lt;cloud_provider&gt; start &lt;repository&gt;"><pre>recode <span>&lt;</span>cloud_provider<span>&gt;</span> start <span>&lt;</span>repository<span>&gt;</span></pre></div>
<p dir="auto">The <code>start</code> command creates and starts a development environment for a specific GitHub repository.</p>
<p dir="auto">If a development environment is stopped, it will only be started. If a development environment is already started, only your code editor will be opened.</p>
<p dir="auto">An <code>--instance-type</code> flag could be passed to specify the instance type that will power your development environment. (<em>See the corresponding cloud provider repository for default / valid values</em>).</p>
<h4 dir="auto"><a id="user-content-examples" href="#examples" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h4>
<div data-snippet-clipboard-copy-content="recode aws start recode-sh/workspace"><pre>recode aws start recode-sh/workspace</pre></div>
<div data-snippet-clipboard-copy-content="recode aws start recode-sh/workspace --instance-type t2.medium"><pre>recode aws start recode-sh/workspace --instance-type t2.medium</pre></div>
<h3 dir="auto"><a id="user-content-stop" href="#stop" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Stop</h3>
<div data-snippet-clipboard-copy-content="recode &lt;cloud_provider&gt; stop &lt;repository&gt;"><pre>recode <span>&lt;</span>cloud_provider<span>&gt;</span> stop <span>&lt;</span>repository<span>&gt;</span></pre></div>
<p dir="auto">The <code>stop</code> command stops a started development environment.</p>
<p dir="auto">Stopping means that the underlying instance will be stopped but <strong><ins>your data will be conserved</ins></strong>. You may want to use this command to save costs when the development environment is not used.</p>
<h4 dir="auto"><a id="user-content-example" href="#example" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h4>
<div data-snippet-clipboard-copy-content="recode aws stop recode-sh/workspace"><pre>recode aws stop recode-sh/workspace</pre></div>
<h3 dir="auto"><a id="user-content-remove" href="#remove" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Remove</h3>
<div data-snippet-clipboard-copy-content="recode &lt;cloud_provider&gt; remove &lt;repository&gt;"><pre>recode <span>&lt;</span>cloud_provider<span>&gt;</span> remove <span>&lt;</span>repository<span>&gt;</span></pre></div>
<p dir="auto">The <code>remove</code> command removes an existing development environment.</p>
<p dir="auto">Removing means that the underlying instance <strong><ins>and all your data</ins></strong> will be <strong><ins>permanently removed</ins></strong>.</p>
<h4 dir="auto"><a id="user-content-example-1" href="#example-1" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h4>
<div data-snippet-clipboard-copy-content="recode aws remove recode-sh/workspace"><pre>recode aws remove recode-sh/workspace</pre></div>
<h3 dir="auto"><a id="user-content-uninstall" href="#uninstall" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Uninstall</h3>
<div data-snippet-clipboard-copy-content="recode &lt;cloud_provider&gt; uninstall"><pre>recode <span>&lt;</span>cloud_provider<span>&gt;</span> uninstall</pre></div>
<p dir="auto">The <code>uninstall</code> command removes all the infrastructure components used by Recode from your cloud provider account. (<em>See the corresponding cloud provider repository for details</em>).</p>
<p dir="auto"><strong>Before running this command, all development environments need to be removed.</strong></p>
<h4 dir="auto"><a id="user-content-example-2" href="#example-2" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h4>

<h2 dir="auto"><a id="user-content-development-environments-configuration" href="#development-environments-configuration" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development environments configuration</h2>
<p dir="auto">If you think about all the projects you&#39;ve worked on, you may notice that you&#39;ve:</p>
<ul dir="auto">
<li>
<p dir="auto">a set of configuration / tools used for all your projects (eg: a preferred timezone / locale, a specific shell...);</p>
</li>
<li>
<p dir="auto">a set of configuration / tools specific for each project (eg: docker compose, go &gt;= 1.18 or node.js &gt;= 14).</p>
</li>
</ul>
<p dir="auto">This is what Recode has tried to mimic with <em>user</em> and <em>project</em> configuration.</p>
<h4 dir="auto"><a id="user-content--tip-the---rebuild-flag" href="#-tip-the---rebuild-flag" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Tip: the <code>--rebuild</code> flag</h4>
<div data-snippet-clipboard-copy-content="recode aws start recode-sh/workspace --rebuild"><pre>recode aws start recode-sh/workspace --rebuild</pre></div>
<p dir="auto">If you update the configuration of an existing development environment, you could use the <code>--rebuild</code> flag of the <code>start</code> command to rebuild it without having to delete it first.</p>
<h4 dir="auto"><a id="user-content--tip-docker--docker-compose" href="#-tip-docker--docker-compose" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Tip: Docker &amp; Docker compose</h4>
<p dir="auto">Docker and Docker compose are already preinstalled in all development environments so you don&#39;t have to install them.</p>
<h3 dir="auto"><a id="user-content-user-configuration" href="#user-configuration" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>User configuration</h3>
<p dir="auto">User configuration corresponds to the set of configuration / tools used for all your projects. To create an user configuration, all you need to do is to:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a <ins><strong>repository</strong></ins> named <code>.recode</code> in your personal GitHub account.</p>
</li>
<li>
<p dir="auto">Add a file named <code>dev_env.Dockerfile</code> in it.</p>
</li>
</ol>
<p dir="auto">The file <code>dev_env.Dockerfile</code> is a regular Dockerfile except that:</p>
<ul dir="auto">
<li>
<p dir="auto">it must derive from <code>recode-sh/base-dev-env</code> (more below);</p>
</li>
<li>
<p dir="auto">the user configuration needs to be applied to the user <code>recode</code>.</p>
</li>
</ul>
<p dir="auto">Otherwise, you are free to do what you want with this file and this repository. You could see an example with dotfiles in <a href="https://github.com/recode-sh/.recode">recode-sh/.recode</a> and use it as a GitHub repository template:</p>
<div data-snippet-clipboard-copy-content="# User&#39;s dev env image must derive from recodesh/base-dev-env.
# See https://github.com/recode-sh/base-dev-env/blob/main/Dockerfile for source.
FROM recodesh/base-dev-env:latest

# Set timezone
ENV TZ=America/Los_Angeles

# Set locale
RUN sudo locale-gen en_US.UTF-8
ENV LANG=en_US.UTF-8
ENV LANGUAGE=en_US:en 
ENV LC_ALL=en_US.UTF-8

# Install Zsh
RUN set -euo pipefail \
  &amp;&amp; sudo apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; sudo apt-get --assume-yes --quiet --quiet install zsh \
  &amp;&amp; sudo rm --recursive --force /var/lib/apt/lists/*

# Install OhMyZSH and some plugins
RUN set -euo pipefail \
  &amp;&amp; sh -c &#34;$(curl --fail --silent --show-error --location https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&#34; \
  &amp;&amp; git clone --quiet https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions \
  &amp;&amp; git clone --quiet https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting

# Change default shell for user &#34;recode&#34;
RUN set -euo pipefail \
  &amp;&amp; sudo usermod --shell $(which zsh) recode

# Add all dotfiles to home folder
COPY --chown=recode:recode ./dotfiles/.* $HOME/"><pre><span><span>#</span> User&#39;s dev env image must derive from recodesh/base-dev-env.</span>
<span><span>#</span> See https://github.com/recode-sh/base-dev-env/blob/main/Dockerfile for source.</span>
<span>FROM</span> recodesh/base-dev-env:latest

<span><span>#</span> Set timezone</span>
<span>ENV</span> TZ=America/Los_Angeles

<span><span>#</span> Set locale</span>
<span>RUN</span> sudo locale-gen en_US.UTF-8
<span>ENV</span> LANG=en_US.UTF-8
<span>ENV</span> LANGUAGE=en_US:en 
<span>ENV</span> LC_ALL=en_US.UTF-8

<span><span>#</span> Install Zsh</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; sudo apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; sudo apt-get --assume-yes --quiet --quiet install zsh \
  &amp;&amp; sudo rm --recursive --force /var/lib/apt/lists/*

<span><span>#</span> Install OhMyZSH and some plugins</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; sh -c <span>&#34;$(curl --fail --silent --show-error --location https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&#34;</span> \
  &amp;&amp; git clone --quiet https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions \
  &amp;&amp; git clone --quiet https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting

<span><span>#</span> Change default shell for user &#34;recode&#34;</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; sudo usermod --shell $(which zsh) recode

<span><span>#</span> Add all dotfiles to home folder</span>
<span>COPY</span> --chown=recode:recode ./dotfiles/.* $HOME/</pre></div>
<h3 dir="auto"><a id="user-content-project-configuration" href="#project-configuration" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Project configuration</h3>
<p dir="auto">Project configuration corresponds to the set of configuration / tools specific for each project. As you may have guessed, to create a project configuration, all you need to do is to:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a <ins><strong>directory</strong></ins> named <code>.recode</code> in your project&#39;s repository.</p>
</li>
<li>
<p dir="auto">Add a file named <code>dev_env.Dockerfile</code> in it.</p>
</li>
</ol>
<p dir="auto">The file <code>dev_env.Dockerfile</code> is a regular Dockerfile except that:</p>
<ul dir="auto">
<li>
<p dir="auto">it must derive from <code>user_dev_env</code> (your user configuration);</p>
</li>
<li>
<p dir="auto">the user configuration needs to be applied to the user <code>recode</code>.</p>
</li>
</ul>
<p dir="auto">Otherwise, you are free to do what you want with this file and this directory. You could see an example in <a href="https://github.com/recode-sh/workspace">recode-sh/workspace</a>:</p>
<div data-snippet-clipboard-copy-content="# Project&#39;s dev env image must derive from &#34;user_dev_env&#34;
# (ie: github_user_name/.recode/dev_env.Dockerfile)
FROM user_dev_env

# VSCode extensions that need to be installed (optional)
LABEL sh.recode.vscode.extensions=&#34;golang.go, zxh404.vscode-proto3, ms-azuretools.vscode-docker&#34;

# GitHub repositories that need to be cloned (optional) (default to the current one)
LABEL sh.recode.repositories=&#34;cli, agent, recode, aws-cloud-provider, base-dev-env, api, .recode, workspace&#34;

# Reserved args (RECODE_*). Provided by Recode.
# eg: linux
ARG RECODE_INSTANCE_OS
# eg: amd64 or arm64
ARG RECODE_INSTANCE_ARCH

ARG GO_VERSION=1.18.2

# Install Go and dev dependencies
RUN set -euo pipefail \
  &amp;&amp; cd /tmp \
  &amp;&amp; LATEST_GO_VERSION=$(curl --fail --silent --show-error --location &#34;https://golang.org/VERSION?m=text&#34;) \
  &amp;&amp; if [[ &#34;${GO_VERSION}&#34; = &#34;latest&#34; ]] ; then \
        GO_VERSION_TO_USE=&#34;${LATEST_GO_VERSION}&#34; ; \
     else \
        GO_VERSION_TO_USE=&#34;go${GO_VERSION}&#34; ; \
     fi \
  &amp;&amp; curl --fail --silent --show-error --location &#34;https://go.dev/dl/${GO_VERSION_TO_USE}.${RECODE_INSTANCE_OS}-${RECODE_INSTANCE_ARCH}.tar.gz&#34; --output go.tar.gz \
  &amp;&amp; sudo tar --directory /usr/local --extract --file go.tar.gz \
  &amp;&amp; rm go.tar.gz \
  &amp;&amp; /usr/local/go/bin/go install golang.org/x/tools/cmd/goimports@latest \
  &amp;&amp; /usr/local/go/bin/go install github.com/google/wire/cmd/wire@latest \
  &amp;&amp; /usr/local/go/bin/go install github.com/golang/mock/mockgen@latest

# Add Go to path
ENV PATH=$PATH:/usr/local/go/bin:$HOME/go/bin

..."><pre><span><span>#</span> Project&#39;s dev env image must derive from &#34;user_dev_env&#34;</span>
<span><span>#</span> (ie: github_user_name/.recode/dev_env.Dockerfile)</span>
<span>FROM</span> user_dev_env

<span><span>#</span> VSCode extensions that need to be installed (optional)</span>
<span>LABEL</span> sh.recode.vscode.extensions=<span>&#34;golang.go, zxh404.vscode-proto3, ms-azuretools.vscode-docker&#34;</span>

<span><span>#</span> GitHub repositories that need to be cloned (optional) (default to the current one)</span>
<span>LABEL</span> sh.recode.repositories=<span>&#34;cli, agent, recode, aws-cloud-provider, base-dev-env, api, .recode, workspace&#34;</span>

<span><span>#</span> Reserved args (RECODE_*). Provided by Recode.</span>
<span><span>#</span> eg: linux</span>
<span>ARG</span> RECODE_INSTANCE_OS
<span><span>#</span> eg: amd64 or arm64</span>
<span>ARG</span> RECODE_INSTANCE_ARCH

<span>ARG</span> GO_VERSION=1.18.2

<span><span>#</span> Install Go and dev dependencies</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; cd /tmp \
  &amp;&amp; LATEST_GO_VERSION=$(curl --fail --silent --show-error --location <span>&#34;https://golang.org/VERSION?m=text&#34;</span>) \
  &amp;&amp; if [[ <span>&#34;${GO_VERSION}&#34;</span> = <span>&#34;latest&#34;</span> ]] ; then \
        GO_VERSION_TO_USE=<span>&#34;${LATEST_GO_VERSION}&#34;</span> ; \
     else \
        GO_VERSION_TO_USE=<span>&#34;go${GO_VERSION}&#34;</span> ; \
     fi \
  &amp;&amp; curl --fail --silent --show-error --location <span>&#34;https://go.dev/dl/${GO_VERSION_TO_USE}.${RECODE_INSTANCE_OS}-${RECODE_INSTANCE_ARCH}.tar.gz&#34;</span> --output go.tar.gz \
  &amp;&amp; sudo tar --directory /usr/local --extract --file go.tar.gz \
  &amp;&amp; rm go.tar.gz \
  &amp;&amp; /usr/local/go/bin/go install golang.org/x/tools/cmd/goimports@latest \
  &amp;&amp; /usr/local/go/bin/go install github.com/google/wire/cmd/wire@latest \
  &amp;&amp; /usr/local/go/bin/go install github.com/golang/mock/mockgen@latest

<span><span>#</span> Add Go to path</span>
<span>ENV</span> PATH=$PATH:/usr/local/go/bin:$HOME/go/bin

...</pre></div>
<h4 dir="auto"><a id="user-content--what-if-i-dont-have-an-user-configuration" href="#-what-if-i-dont-have-an-user-configuration" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> What if I don&#39;t have an user configuration?</h4>
<p dir="auto">If you don&#39;t have an user configuration, <strong>the <a href="https://github.com/recode-sh/.recode">recode-sh/.recode</a> repository will be used as a default one</strong>.</p>
<p dir="auto">That&#39;s why you will have <code>zsh</code> configured as default shell in your project.</p>
<h3 dir="auto"><a id="user-content-recode-configuration" href="#recode-configuration" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Recode configuration</h3>
<p dir="auto">As you may have noticed from previous sections, some commands in the <code>dev_env.Dockerfile</code> files (like the <code>LABEL</code> ones) are specific to Recode. This section will try to explain them.</p>
<h4 dir="auto"><a id="user-content-base-image-recode-shbase-dev-env" href="#base-image-recode-shbase-dev-env" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Base image (<a href="http://github.com/recode-sh/base-dev-env">recode-sh/base-dev-env</a>)</h4>
<p dir="auto">As you may have understood, all the development environments derive directly or indirectly from <code>recode-sh/base-dev-env</code>. You could see the source of this Docker image in the <a href="https://github.com/recode-sh/base-dev-env">recode-sh/base-dev-env</a> repository:</p>
<div data-snippet-clipboard-copy-content="# All development environments will be Ubuntu-based
FROM ubuntu:22.04

ARG DEBIAN_FRONTEND=noninteractive

# RUN will use bash
SHELL [&#34;/bin/bash&#34;, &#34;-c&#34;]

# We want a &#34;standard Ubuntu&#34;
# (ie: not one that has been minimized
# by removing packages and content
# not required in a production system)
RUN yes | unminimize

# Install system dependencies
RUN set -euo pipefail \
  &amp;&amp; apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; apt-get --assume-yes --quiet --quiet install \
  apt-transport-https \
  build-essential \
  ca-certificates \
  curl \
  git \
  gnupg \
  locales \
  lsb-release \
  man-db \
  manpages-posix \
  nano \
  sudo \
  tzdata \
  unzip \
  vim \
  wget \
  &amp;&amp; rm --recursive --force /var/lib/apt/lists/*

# Install the Docker CLI. 
# The Docker daemon socket will be mounted from instance.
RUN set -euo pipefail \
  &amp;&amp; curl --fail --silent --show-error --location https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor --output /usr/share/keyrings/docker-archive-keyring.gpg \
  &amp;&amp; echo &#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release --codename --short) stable&#34; | tee /etc/apt/sources.list.d/docker.list &gt; /dev/null \
  &amp;&amp; apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; apt-get --assume-yes --quiet --quiet install docker-ce-cli \
  &amp;&amp; rm --recursive --force /var/lib/apt/lists/*

# Install Docker compose
RUN set -euo pipefail \
  &amp;&amp; LATEST_COMPOSE_VERSION=$(curl --fail --silent --show-error --location &#34;https://api.github.com/repos/docker/compose/releases/latest&#34; | grep --only-matching --perl-regexp &#39;(?&lt;=&#34;tag_name&#34;: &#34;).+(?=&#34;)&#39;) \
  &amp;&amp; curl --fail --silent --show-error --location &#34;https://github.com/docker/compose/releases/download/${LATEST_COMPOSE_VERSION}/docker-compose-$(uname --kernel-name)-$(uname --machine)&#34; --output /usr/libexec/docker/cli-plugins/docker-compose \
  &amp;&amp; chmod +x /usr/libexec/docker/cli-plugins/docker-compose

# Install entrypoint script
COPY ./recode_entrypoint.sh /
RUN chmod +x /recode_entrypoint.sh

# Configure the user &#34;recode&#34; in container.
# Triggered during build on instance.
# 
# We want the user &#34;recode&#34; inside the container to get 
# the same permissions than the user &#34;recode&#34; in the instance 
# (to access the Docker daemon, SSH keys and so on).
# 
# To do this, the two users need to share the same UID/GID.
ONBUILD ARG RECODE_USER_ID
ONBUILD ARG RECODE_USER_GROUP_ID
ONBUILD ARG RECODE_DOCKER_GROUP_ID

ONBUILD RUN set -euo pipefail \
  &amp;&amp; RECODE_USER_HOME_DIR=&#34;/home/recode&#34; \
  &amp;&amp; RECODE_USER_WORKSPACE_DIR=&#34;${RECODE_USER_HOME_DIR}/workspace&#34; \
  &amp;&amp; RECODE_USER_WORKSPACE_CONFIG_DIR=&#34;${RECODE_USER_HOME_DIR}/.workspace-config&#34; \
  &amp;&amp; groupadd --gid &#34;${RECODE_USER_GROUP_ID}&#34; --non-unique recode \
  &amp;&amp; useradd --gid &#34;${RECODE_USER_GROUP_ID}&#34; --uid &#34;${RECODE_USER_ID}&#34; --non-unique --home &#34;${RECODE_USER_HOME_DIR}&#34; --create-home --shell /bin/bash recode \
  &amp;&amp; cp /etc/sudoers /etc/sudoers.orig \
  &amp;&amp; echo &#34;recode ALL=(ALL) NOPASSWD:ALL&#34; | tee /etc/sudoers.d/recode &gt; /dev/null \
  &amp;&amp; groupadd --gid &#34;${RECODE_DOCKER_GROUP_ID}&#34; --non-unique docker \
  &amp;&amp; usermod --append --groups docker recode \
  &amp;&amp; mkdir --parents &#34;${RECODE_USER_WORKSPACE_CONFIG_DIR}&#34; \
  &amp;&amp; mkdir --parents &#34;${RECODE_USER_WORKSPACE_DIR}&#34; \
  &amp;&amp; mkdir --parents &#34;${RECODE_USER_HOME_DIR}/.ssh&#34; \
  &amp;&amp; mkdir --parents &#34;${RECODE_USER_HOME_DIR}/.gnupg&#34; \
  &amp;&amp; mkdir --parents &#34;${RECODE_USER_HOME_DIR}/.vscode-server&#34; \
  &amp;&amp; chown --recursive recode:recode &#34;${RECODE_USER_HOME_DIR}&#34; \
  &amp;&amp; chmod 700 &#34;${RECODE_USER_HOME_DIR}/.gnupg&#34;

ONBUILD WORKDIR /home/recode/workspace
ONBUILD USER recode

ONBUILD ENV USER=recode
ONBUILD ENV HOME=/home/recode
ONBUILD ENV EDITOR=/usr/bin/nano

ONBUILD ENV RECODE_WORKSPACE=/home/recode/workspace
ONBUILD ENV RECODE_WORKSPACE_CONFIG=/home/recode/.workspace-config

# Only for documentation purpose.
# Entrypoint and CMD are always set by the 
# Recode agent when running the dev env container.
ONBUILD ENTRYPOINT [&#34;/recode_entrypoint.sh&#34;]
ONBUILD CMD [&#34;sleep&#34;, &#34;infinity&#34;]

# Set default timezone
ENV TZ=America/Los_Angeles

# Set default locale
# /!\ locale-gen must be run as root
RUN locale-gen en_US.UTF-8
ENV LANG=en_US.UTF-8
ENV LANGUAGE=en_US:en
ENV LC_ALL=en_US.UTF-8"><pre><span><span>#</span> All development environments will be Ubuntu-based</span>
<span>FROM</span> ubuntu:22.04

<span>ARG</span> DEBIAN_FRONTEND=noninteractive

<span><span>#</span> RUN will use bash</span>
<span>SHELL</span> [<span>&#34;/bin/bash&#34;</span>, <span>&#34;-c&#34;</span>]

<span><span>#</span> We want a &#34;standard Ubuntu&#34;</span>
<span><span>#</span> (ie: not one that has been minimized</span>
<span><span>#</span> by removing packages and content</span>
<span><span>#</span> not required in a production system)</span>
<span>RUN</span> yes | unminimize

<span><span>#</span> Install system dependencies</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; apt-get --assume-yes --quiet --quiet install \
  apt-transport-https \
  build-essential \
  ca-certificates \
  curl \
  git \
  gnupg \
  locales \
  lsb-release \
  man-db \
  manpages-posix \
  nano \
  sudo \
  tzdata \
  unzip \
  vim \
  wget \
  &amp;&amp; rm --recursive --force /var/lib/apt/lists/*

<span><span>#</span> Install the Docker CLI. </span>
<span><span>#</span> The Docker daemon socket will be mounted from instance.</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; curl --fail --silent --show-error --location https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor --output /usr/share/keyrings/docker-archive-keyring.gpg \
  &amp;&amp; echo <span>&#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release --codename --short) stable&#34;</span> | tee /etc/apt/sources.list.d/docker.list &gt; /dev/null \
  &amp;&amp; apt-get --assume-yes --quiet --quiet update \
  &amp;&amp; apt-get --assume-yes --quiet --quiet install docker-ce-cli \
  &amp;&amp; rm --recursive --force /var/lib/apt/lists/*

<span><span>#</span> Install Docker compose</span>
<span>RUN</span> set -euo pipefail \
  &amp;&amp; LATEST_COMPOSE_VERSION=$(curl --fail --silent --show-error --location <span>&#34;https://api.github.com/repos/docker/compose/releases/latest&#34;</span> | grep --only-matching --perl-regexp <span>&#39;(?&lt;=&#34;tag_name&#34;: &#34;).+(?=&#34;)&#39;</span>) \
  &amp;&amp; curl --fail --silent --show-error --location <span>&#34;https://github.com/docker/compose/releases/download/${LATEST_COMPOSE_VERSION}/docker-compose-$(uname --kernel-name)-$(uname --machine)&#34;</span> --output /usr/libexec/docker/cli-plugins/docker-compose \
  &amp;&amp; chmod +x /usr/libexec/docker/cli-plugins/docker-compose

<span><span>#</span> Install entrypoint script</span>
<span>COPY</span> ./recode_entrypoint.sh /
<span>RUN</span> chmod +x /recode_entrypoint.sh

<span><span>#</span> Configure the user &#34;recode&#34; in container.</span>
<span><span>#</span> Triggered during build on instance.</span>
<span><span>#</span> </span>
<span><span>#</span> We want the user &#34;recode&#34; inside the container to get </span>
<span><span>#</span> the same permissions than the user &#34;recode&#34; in the instance </span>
<span><span>#</span> (to access the Docker daemon, SSH keys and so on).</span>
<span><span>#</span> </span>
<span><span>#</span> To do this, the two users need to share the same UID/GID.</span>
<span>ONBUILD</span> <span>ARG</span> RECODE_USER_ID
<span>ONBUILD</span> <span>ARG</span> RECODE_USER_GROUP_ID
<span>ONBUILD</span> <span>ARG</span> RECODE_DOCKER_GROUP_ID

<span>ONBUILD</span> <span>RUN</span> set -euo pipefail \
  &amp;&amp; RECODE_USER_HOME_DIR=<span>&#34;/home/recode&#34;</span> \
  &amp;&amp; RECODE_USER_WORKSPACE_DIR=<span>&#34;${RECODE_USER_HOME_DIR}/workspace&#34;</span> \
  &amp;&amp; RECODE_USER_WORKSPACE_CONFIG_DIR=<span>&#34;${RECODE_USER_HOME_DIR}/.workspace-config&#34;</span> \
  &amp;&amp; groupadd --gid <span>&#34;${RECODE_USER_GROUP_ID}&#34;</span> --non-unique recode \
  &amp;&amp; useradd --gid <span>&#34;${RECODE_USER_GROUP_ID}&#34;</span> --uid <span>&#34;${RECODE_USER_ID}&#34;</span> --non-unique --home <span>&#34;${RECODE_USER_HOME_DIR}&#34;</span> --create-home --shell /bin/bash recode \
  &amp;&amp; cp /etc/sudoers /etc/sudoers.orig \
  &amp;&amp; echo <span>&#34;recode ALL=(ALL) NOPASSWD:ALL&#34;</span> | tee /etc/sudoers.d/recode &gt; /dev/null \
  &amp;&amp; groupadd --gid <span>&#34;${RECODE_DOCKER_GROUP_ID}&#34;</span> --non-unique docker \
  &amp;&amp; usermod --append --groups docker recode \
  &amp;&amp; mkdir --parents <span>&#34;${RECODE_USER_WORKSPACE_CONFIG_DIR}&#34;</span> \
  &amp;&amp; mkdir --parents <span>&#34;${RECODE_USER_WORKSPACE_DIR}&#34;</span> \
  &amp;&amp; mkdir --parents <span>&#34;${RECODE_USER_HOME_DIR}/.ssh&#34;</span> \
  &amp;&amp; mkdir --parents <span>&#34;${RECODE_USER_HOME_DIR}/.gnupg&#34;</span> \
  &amp;&amp; mkdir --parents <span>&#34;${RECODE_USER_HOME_DIR}/.vscode-server&#34;</span> \
  &amp;&amp; chown --recursive recode:recode <span>&#34;${RECODE_USER_HOME_DIR}&#34;</span> \
  &amp;&amp; chmod 700 <span>&#34;${RECODE_USER_HOME_DIR}/.gnupg&#34;</span>

<span>ONBUILD</span> <span>WORKDIR</span> /home/recode/workspace
<span>ONBUILD</span> <span>USER</span> recode

<span>ONBUILD</span> <span>ENV</span> USER=recode
<span>ONBUILD</span> <span>ENV</span> HOME=/home/recode
<span>ONBUILD</span> <span>ENV</span> EDITOR=/usr/bin/nano

<span>ONBUILD</span> <span>ENV</span> RECODE_WORKSPACE=/home/recode/workspace
<span>ONBUILD</span> <span>ENV</span> RECODE_WORKSPACE_CONFIG=/home/recode/.workspace-config

<span><span>#</span> Only for documentation purpose.</span>
<span><span>#</span> Entrypoint and CMD are always set by the </span>
<span><span>#</span> Recode agent when running the dev env container.</span>
<span>ONBUILD</span> <span>ENTRYPOINT</span> [<span>&#34;/recode_entrypoint.sh&#34;</span>]
<span>ONBUILD</span> <span>CMD</span> [<span>&#34;sleep&#34;</span>, <span>&#34;infinity&#34;</span>]

<span><span>#</span> Set default timezone</span>
<span>ENV</span> TZ=America/Los_Angeles

<span><span>#</span> Set default locale</span>
<span><span>#</span> /!\ locale-gen must be run as root</span>
<span>RUN</span> locale-gen en_US.UTF-8
<span>ENV</span> LANG=en_US.UTF-8
<span>ENV</span> LANGUAGE=en_US:en
<span>ENV</span> LC_ALL=en_US.UTF-8</pre></div>
<p dir="auto">As you can see, nothing fancy here.</p>
<p dir="auto">Recode is built on <code>ubuntu</code> with <code>docker</code> and <code>docker compose</code> pre-installed. An user <code>recode</code> is created and configured to be used as the default user. Root privileges are managed via <code>sudo</code>.</p>
<p dir="auto">Your repositories will be cloned in <code>/home/recode/workspace</code>. A default timezone and locale are set.</p>
<p dir="auto"><em>(To learn more, see the <a href="https://github.com/recode-sh/base-dev-env">recode-sh/base-dev-env</a> repository)</em>.</p>
<h4 dir="auto"><a id="user-content-visual-studio-code-extensions" href="#visual-studio-code-extensions" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Visual Studio Code extensions</h4>
<p dir="auto">In order to require Visual Studio Code extensions to be installed in your development environment, you need to add a <code>LABEL</code> named <code>sh.recode.vscode.extensions</code> in your <em>user&#39;s</em> or <em>project&#39;s</em> <code>dev_env.Dockerfile</code>.</p>
<p dir="auto"><em>(As you may have guessed, if this label is added to your user configuration, all your projects will have the listed extensions installed).</em></p>
<p dir="auto">An extension is identified using its publisher name and extension identifier (<code>publisher.extension</code>). You can see the name on the extension&#39;s detail page.</p>
<h5 dir="auto"><a id="user-content-example-3" href="#example-3" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h5>
<div data-snippet-clipboard-copy-content="LABEL sh.recode.vscode.extensions=&#34;golang.go, zxh404.vscode-proto3, ms-azuretools.vscode-docker&#34;"><pre><span>LABEL</span> sh.recode.vscode.extensions=<span>&#34;golang.go, zxh404.vscode-proto3, ms-azuretools.vscode-docker&#34;</span></pre></div>
<h4 dir="auto"><a id="user-content-multiple-repositories" href="#multiple-repositories" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Multiple repositories</h4>
<p dir="auto">If you want to use multiple repositories in your development environment, you need to add a <code>LABEL</code> named <code>sh.recode.repositories</code> in your <em>project&#39;s</em> <code>dev_env.Dockerfile</code>.</p>
<p dir="auto"><strong>In this case, we recommend you to create an empty repository that will only contain the <code>.recode</code> directory (as an example, see the <a href="https://github.com/recode-sh/workspace">recode-sh/workspace</a> repository).</strong></p>
<p dir="auto"><em>(As you may have guessed, if this label is added to your user configuration it will be ignored).</em></p>
<p dir="auto">Repositories may be set as relative to the current one (eg: <code>cli</code>) or fully qualified (eg: <code>recode-sh/cli</code>).</p>
<h5 dir="auto"><a id="user-content-example-4" href="#example-4" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h5>
<div data-snippet-clipboard-copy-content="LABEL sh.recode.repositories=&#34;cli, agent, recode, aws-cloud-provider, base-dev-env, api, .recode, workspace&#34;"><pre><span>LABEL</span> sh.recode.repositories=<span>&#34;cli, agent, recode, aws-cloud-provider, base-dev-env, api, .recode, workspace&#34;</span></pre></div>
<h4 dir="auto"><a id="user-content-build-arguments-recode_instance_os-and-recode_instance_arch" href="#build-arguments-recode_instance_os-and-recode_instance_arch" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build arguments (<code>RECODE_INSTANCE_OS</code> and <code>RECODE_INSTANCE_ARCH</code>)</h4>
<p dir="auto">Given the nature of this project, you need to take into account the fact that the characteristics of the instance used to run your development environment may vary depending on the one chosen by the final user.</p>
<p dir="auto">As an example, an user may want to use an AWS graviton powered instance to run your project and, as a result, your <em>project&#39;s</em> <code>dev_env.Dockerfile</code> must be ready to be built for <code>ARM</code>.</p>
<p dir="auto">To ease this process, Recode will pass to your <code>dev_env.Dockerfile</code> files two build arguments <code>RECODE_INSTANCE_OS</code> and <code>RECODE_INSTANCE_ARCH</code> that will contain both the current operating system (<code>linux</code>) and architecture (eg: <code>amd64</code>) respectively.</p>
<h5 dir="auto"><a id="user-content-example-5" href="#example-5" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h5>
<div data-snippet-clipboard-copy-content="# Reserved args (RECODE_*). Provided by Recode.

# eg: linux
ARG RECODE_INSTANCE_OS

# eg: amd64 or arm64
ARG RECODE_INSTANCE_ARCH"><pre><span><span>#</span> Reserved args (RECODE_*). Provided by Recode.</span>

<span><span>#</span> eg: linux</span>
<span>ARG</span> RECODE_INSTANCE_OS

<span><span>#</span> eg: amd64 or arm64</span>
<span>ARG</span> RECODE_INSTANCE_ARCH</pre></div>
<h4 dir="auto"><a id="user-content-hooks" href="#hooks" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Hooks</h4>
<p dir="auto">Hooks are shell scripts that will be run during the lifetime of your development environment. To be able to add a hook in a project, all you have to do is to add a directory named <code>hooks</code> in your <code>.recode</code> <strong>directory</strong>.</p>
<h5 dir="auto"><a id="user-content-first-hook" href="#first-hook" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>First Hook</h5>
<p dir="auto">Before adding your first hook, the following things must be taken into account:</p>
<ul dir="auto">
<li>
<p dir="auto">In the case of development environments <strong>with only one repository</strong>, hooks will only be run if a <code>dev_env.Dockerfile</code> file is set.</p>
</li>
<li>
<p dir="auto">In the case of development environments <strong>with multiple repositories</strong>, all the hooks will be run, one after the other.</p>
</li>
<li>
<p dir="auto"><strong>The working directory of your scripts will be set to the root folder of their respective repository before running</strong>.</p>
</li>
</ul>
<h5 dir="auto"><a id="user-content-init" href="#init" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Init</h5>
<p dir="auto">The <code>init</code> hook is run once, <strong>during the first start of your development environment</strong>. You could use it to download your project dependencies, for example.</p>
<p dir="auto">Currently, it&#39;s the sole hook available. To activate it, you need to add an <code>init.sh</code> file in your project&#39;s <code>hooks</code> directory.</p>
<h5 dir="auto"><a id="user-content-example-taken-from-the-recode-shcli-repository" href="#example-taken-from-the-recode-shcli-repository" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example (taken from the <a href="https://github.com/recode-sh/cli/tree/main/.recode">recode-sh/cli</a> repository)</h5>
<div data-snippet-clipboard-copy-content="#!/bin/bash
set -euo pipefail

log () {
  echo -e &#34;${1}&#34; &gt;&amp;2
}

log &#34;Downloading dependencies listed in go.mod&#34;

go mod download"><pre><span><span>#!</span>/bin/bash</span>
<span>set</span> -euo pipefail

<span>log</span> () {
  <span>echo</span> -e <span><span>&#34;</span><span>${1}</span><span>&#34;</span></span> <span>&gt;&amp;2</span>
}

log <span><span>&#34;</span>Downloading dependencies listed in go.mod<span>&#34;</span></span>

go mod download</pre></div>
<h2 dir="auto"><a id="user-content-frequently-asked-questions" href="#frequently-asked-questions" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Frequently asked questions</h2>
<h4 dir="auto"><a id="user-content--how-does-it-compare-with-gitpod--coder--codespaces--x" href="#-how-does-it-compare-with-gitpod--coder--codespaces--x" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&gt; How does it compare with GitPod / Coder / Codespaces / X?</h4>
<ul dir="auto">
<li>100% Free.</li>
<li>100% Open-source.</li>
<li>100% Private (run on your own cloud provider account).</li>
<li>100% Cost-effective (run on simple VMs not on Kubernetes).</li>
<li>100% Desktop.</li>
<li>100% Multi regions.</li>
<li>100% Customizable (from VM characteristics to installed runtimes).</li>
<li>100% Community-driven (see below).</li>
</ul>
<p dir="auto">... and 0% VC-backed. 0% Locked-in. 0% Proprietary config files.</p>
<h4 dir="auto"><a id="user-content--how-does-it-compare-with-vagrant--vscode-remote-ssh--container-extensions" href="#-how-does-it-compare-with-vagrant--vscode-remote-ssh--container-extensions" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&gt; How does it compare with Vagrant / VSCode remote SSH / Container extensions?</h4>
<ul dir="auto">
<li>Remote development environments defined as code (with support for user and project configuration).</li>
<li>Automatic infrastructure / VM provisionning for multiple cloud providers.</li>
<li>Fully integrated with GitHub (private and multiple repositories, verified commits...).</li>
<li>Support the pre-installation of VSCode extensions.</li>
<li>Doesn&#39;t require a VM or Docker to be installed locally.</li>
<li>Doesn&#39;t tied to a specific code editor.</li>
</ul>
<h4 dir="auto"><a id="user-content--why-using-docker-as-a-vm-and-not-something-like-nixos-for-example" href="#-why-using-docker-as-a-vm-and-not-something-like-nixos-for-example" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&gt; Why using Docker as a VM and not something like NixOS, for example?</h4>
<p dir="auto">I&#39;m aware that containers are not meant to be used as a VM like that (forgive me for that <g-emoji alias="pray" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f64f.png">🙏</g-emoji>) but, at the time of writing, Docker is still the most widely used tool among developers to configure their environment (even if it may certainly change in the future).</p>
<h4 dir="auto"><a id="user-content--given-that-my-dev-env-will-run-in-a-container-does-it-mean-that-it-will-be-limited" href="#-given-that-my-dev-env-will-run-in-a-container-does-it-mean-that-it-will-be-limited" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>&gt; Given that my dev env will run in a container does it mean that it will be limited?</h4>
<p dir="auto">Mostly not.</p>
<p dir="auto">Given the scope of this project (a private instance running in your own cloud provider account), Docker is mostly used for configuration purpose and not to &#34;isolate&#34; the VM from your environment.</p>
<p dir="auto">As a result, your development environment container will run in <strong><a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities" rel="nofollow">privileged mode</a></strong> in the <strong><a href="https://docs.docker.com/network/host/" rel="nofollow">host network</a></strong>.</p>
<h2 dir="auto"><a id="user-content-the-future" href="#the-future" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The future</h2>
<p dir="auto">This project is <strong>100% community-driven</strong>, meaning that except for bug fixes <ins><strong>no more features will be added</strong></ins>.</p>
<p dir="auto">The only features that will be added are the ones that will be <a href="https://github.com/recode-sh/cli/issues/new">posted as an issue</a> and that will receive a significant amount of upvotes <strong>(&gt;= 10 currently)</strong>.</p>
<h2 dir="auto"><a id="user-content-license" href="#license" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Recode is available as open source under the terms of the <a href="http://opensource.org/licenses/MIT" rel="nofollow">MIT License</a>.</p>
</article>
          </div></div>
  </body>
</html>
