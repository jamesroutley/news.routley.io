<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.fidelramos.net/photography/photography-workflow">Original</a>
    <h1>My free-software photography workflow</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>In this article I present a step-by-step walkthrough of my photography workflow. I won&#39;t
go through all the details of every piece of software I mention, they have their own
manuals and documentation for that, I will highlight the operations I do.</p>
<p>My main goals are:</p>
<ol>
<li>Full ownership of all my data, no third-party services.</li>
<li>Use free-software (as in freedom, not as in free beer) exclusively.</li>
<li>Speed up common operations: download of new photos, editing, post-processing.</li>
<li>Organize collection with metadata.</li>
<li>Automated sync and backup.</li>
<li>(In the future) Transparent access and sharing of photos.</li>
</ol>

<h2 id="1-download-photos-with-digikam">1. Download photos with Digikam</h2>
<p>I use the fantastic <a href="https://www.digikam.org/">Digikam</a> software to organize my whole
photo collection (181708 photos and 3127 videos in 2198 albums as of March 2022). I use it
to download photos from my cameras because it has a useful &#34;Only new items&#34; filter, so on
connect I would only see whatever is new.</p>
<p>Most of my photos are classified in albums by date, Digikam also helps with this as I can
select all photos taken on the same date with a click on its section title, then I use
&#34;Download Selected&#34; option.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_import.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_import.jpg" title="Click to see full size"/><figcaption>Digikam import from camera</figcaption></a></figure>
<p>Digikam then asks where to download, and I can create a new album right then and there.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_import_create_new_album.png" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_import_create_new_album.png" title="Click to see full size"/><figcaption>Create new album in Digikam when importing</figcaption></a></figure>
<p>I set the album category, description and date so I don&#39;t forget later.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_new_album.png" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_new_album.png" title="Click to see full size"/><figcaption>Digikam new album window</figcaption></a></figure>
<h2 id="2-browse-with-geeqie">2. Browse with Geeqie</h2>
<p>Once all photos are downloaded I switch to <a href="https://www.geeqie.org/">Geeqie</a> to browse
through them and remove all bad ones (unfocused, blurry, under or overexposed, etc.)
I have been using it ever since it was called GqView, and by now it&#39;s mostly the force of
habit.</p>
<p>At this point I would mention that I shoot in JPEG+RAW mode in my cameras, even if I
always post-process the RAW file and delete the camera-generated JPEG. The reason is that
I like being able to zoom-in to look at the details of a photo so I can delete the bad
pictures early in the pipeline, and RAW images usually have a reduced preview size (for
example the RAW files created by my Sony A7 III have an embedded 1616x1080px preview,
which is small for a 4K display).</p>
<p>There are two features that are indispensable to me at this stage:</p>
<ol>
<li>Group files so I only see the JPEG version, while deleting all files in the group.</li>
<li>Keep zoom and view position when browsing through images.</li>
</ol>
<p>File grouping means that by default Geeqie will only show the JPEG file of each photo,
while the RAW file and potential sidecars (e.g. XMP or PP3) are hidden away, but still
only one click away. Then when a file is deleted all the files in the same group are
deleted as well. Sidecar grouping works well by default, but if necessary it can be
tweaked it in <em>Preferences</em>:</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/geeqie_sidecar_grouping.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/geeqie_sidecar_grouping.jpg" title="Click to see full size"/><figcaption>Geeqie sidecar grouping</figcaption></a></figure>
<p>The other thing I need is the ability to zoom in to 100% of a photo, then quickly move to
the next or previous photo to compare them and, most importantly, that the view stays in
the same position, i.e. that it doesn&#39;t reset to the top-left corner of the image or
something like that, like some image viewers do. Geeqie has this behavior by default, and
combined with some keyboard shortcuts (<em>Z</em> for 100% zoom, <em>X</em> for zoom-to-fit and <em>PgUp</em>
and <em>PgDn</em> keys for navigation) it does the trick for me.</p>
<p>I want to mention that I am aware that Digikam has a Lightroom feature, which can be used
to browse images by pairs: you can see an image on the left side, the next one on the
right side, and when zooming or moving either panel Digikam will keep the other in
sync. It works nicely but has a big caveat for me: when deleting a photo it won&#39;t delete
the associated RAW file, leaving it orphan. I haven&#39;t found a way of solving this, except
running a script to delete all orphan files or to shoot only RAW files (but then I would
lose on preview resolution), which is why I&#39;m sticking to Geeqie for now.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_lightroom.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_lightroom.jpg" title="Click to see full size"/><figcaption>Digikam Lightroom</figcaption></a></figure>
<h2 id="3-process-raws-with-rawtherapee">3. Process RAWs with RawTheRapee</h2>
<p>Nowadays I process most of my photos in <a href="https://rawtherapee.com/">RawTheRapee</a>, a
sensational piece of free software which is both very easy to use and produces very
high-quality pictures. In the past I have used <a href="https://www.darktable.org/">Darktable</a> and
while it&#39;s more featureful I was having a harder time getting the results I wanted
most of the time, mainly because RawTheRapee&#39;s noise reduction works better.</p>
<p>In any case, I open the album directory in RawTheRapee, apply a <a href="https://rawpedia.rawtherapee.com/Creating_processing_profiles_for_general_use">base
profile</a> to
all pictures, and then apply partial profiles to sharpen low-noise images, use a mild
noise reduction for mid-ISO images and heavy noise reduction to high-ISO ones. I use the
filter feature to select only RAW files and then subfilter by ISO range as necessary.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_filter.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_filter.jpg" title="Click to see full size"/><figcaption>RawTheRapee filter</figcaption></a></figure>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_profiles.png" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_profiles.png" title="Click to see full size"/><figcaption>RawTheRapee processing profiles</figcaption></a></figure>
<p>Then I correct all photos for lens distortion. Automatic lens recognition fails for me for
some reason, so I use Batch Edit, select all photos in the album and manually select the
camera and lens.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_batch_edit.png" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_batch_edit.png" title="Click to see full size"/><figcaption>RawTheRapee batch edit and lens correction</figcaption></a></figure>
<p>Then I go over the individual photos, making manual adjustments: exposure, white balance,
cropping, etc. This is regular RawTheRapee editing so I won&#39;t go into details at this
point. If you are interested feel free to send me a message and I would consider doing a
separate blog post about it.</p>
<p>When everything is ready I add photos to the queue and export to the same directory the
RAW files are (<code>%p1/%f</code> as <em>Output Location</em> template). When I need to further retouch
some photo (usually in GIMP) I export to TIFF as JPEG is a lossy format and would lose
more quality on any additional reencodings.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_queue.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/rawtherapee_queue.jpg" title="Click to see full size"/><figcaption>RawTheRapee queue</figcaption></a></figure>
<h2 id="4-organize-in-digikam">4. Organize in Digikam</h2>
<p>Once RawTheRapee is finished exporting I delete the camera-generated JPEGs, then go back
to Digikam and <em>Refresh</em> the album to see the new exported files.</p>
<p>Next step is to group the photos by name, so I only see the JPEGs and not the RAWs. In the
album, I <em>Select all items</em> (CTRL+A) then right click on any of them and <em>Group</em> →
<em>Group Selected by Filename</em>.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_group.jpg" title="Click to see full size"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_group.jpg" title="Click to see full size"/><figcaption>Digikam group files: before and after</figcaption></a></figure>
<p>Then I use the <a href="https://docs.kde.org/trunk5/en/digikam-doc/digikam/using-digikam.html#using-mainwindow-peopleview">face detection
feature</a>
to have Digikam recognize the faces of the people in the photos. I <em>Select All</em> (CTRL+A),
then right click and <em>Scan for Faces</em>. When the process is done I go to the <em>People</em> tab
to review the results, accept the good ones and manually correct the bad ones.</p>
<p>Next is to review captions and tags. Tag organization is something personal, but I make
use of the hierarchical structure supported by Digikam for tags, so for example I use
location tags like <code>place</code> → <code>Colombia</code> → <code>Zapatoca</code>. I also tag people in the
photos, face detection fails to find faces sometimes but I still want the ability to
filter my whole collection to find one or more people.</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_tags.png"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_tags.png"/><figcaption>Digikam tags</figcaption></a></figure>
<p>To speed up tagging the most common tags I assign shortcuts to the ones I use the
most. Just edit the properties of a tag with a right click and set the shortcut there:</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/digikam_edit_tag.png"><img src="https://blog.fidelramos.net/images/photography_workflow/digikam_edit_tag.png"/><figcaption>Digikam edit tag</figcaption></a></figure>
<p>Last step is to rank the photos using 1-5 stars, I double click on the first one then use
keyboard shortcuts to set the ranking (CTRL+1 through CTRL+5, those are the defaults) and
the arrow keys to move through them. How to use rankings is again something personal, but
this is the logic I use for my collection:</p>
<ul>
<li><em>1 star</em>: Bad quality or a dupe. Not worth seeing unless I&#39;m looking for something
  specific, i.e. if I were showing the album to somebody else I would likely filter these
  out.</li>
<li><em>2 stars</em>: This is my go-to ranking if I&#39;m in doubt. Not bad quality and has something
  going for it, but skippable if only looking for the best photos in the album.</li>
<li><em>3 stars</em>: Representative photo for the album, i.e. if I were to only show the
  3-or-more-star photos from an album the viewer would get a good feeling of it without
  having to seat through too many pictures.</li>
<li><em>4 stars</em>: Good photo: sharp, good lightning and composition. If I would search for a
  photo across the whole collection and not looking at an specific album that means it&#39;s a
  4-star.</li>
<li><em>5 stars</em>: Great photo, either technically or because it has a special meaning to me
  (outstanding photo of my daughter for example). Photos I feel proud of.</li>
</ul>
<p>This organization gives me the power to filter my connection the way I need to,
e.g. finding all pictures with all members of my family that are 4 stars or higher, and
maybe filter by a date range too.</p>
<p>Once everything is done I move the album from my <em>Pictures to sort</em> to the <em>Pictures</em>
collection with a simple drag &amp; drop. From there it will be automatically replicated to my
home server.</p>
<h2 id="5-replication-with-syncthing">5. Replication with Syncthing</h2>
<p>I use <a href="https://syncthing.net/">Syncthing</a> to replicate data between my devices (computer,
server, smartphone). It works like a charm and it&#39;s an instant recommendation from me,
hands down.</p>
<p>Specifically for the photo workflow I sync two directories between my computer and my
home server:</p>
<ul>
<li>The pictures directory where the organized photos live.</li>
<li>Digikam&#39;s data directory, which has SQLite databases. I have them separate from the
  photo collection because historically it was in a HDD while my main drive was NVMe, so
  performance was much better if the databases were in the latter.</li>
</ul>
<p>I set both directories as send-only in my computer, and read-only in the server:</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/syncthing_send_only.png"><img src="https://blog.fidelramos.net/images/photography_workflow/syncthing_send_only.png" title="Click to see full size"/><figcaption>Syncthing send-only configuration</figcaption></a></figure>
<p>I also set up version control on the server side so I have an easy recovery in case of
mistakes:</p>
<figure><a href="https://blog.fidelramos.net/images/photography_workflow/syncthing_file_versioning.png"><img src="https://blog.fidelramos.net/images/photography_workflow/syncthing_file_versioning.png" title="Click to see full size"/><figcaption>Syncthing file versioning</figcaption></a></figure>
<p>The home server has 4 HDDs, one of which is set up for parity with
<a href="https://www.snapraid.it/">SnapRAID</a> for fault tolerance. I won&#39;t get into details of my
home server setup, that would be worthy of a different blog post.</p>
<h2 id="6-backup-with-restic">6. Backup with restic</h2>
<p>My home server does a weekly incremental backup to <a href="https://wasabi.com/">Wasabi</a> using
<a href="https://restic.readthedocs.io/en/stable/">restic</a>. This includes my full photo collection
plus any other personal data that would not be recoverable in case of a catastrophe. You
 can see <a href="https://gist.github.com/haplo/db12fc973122366ab1e8cb0d17afbd0c">my restic script</a>
and tailor it to your purposes. I generate the include and exclude files with
<a href="https://www.ansible.com/">Ansible</a>. The backup script is then run by cron every week.</p>
<p>Why restic? I read good comments about it back when I implemented this scheme, that it
does things the Right Way™, and it has been working reasonably well since then. However if
I had to do it again I would look into <a href="https://www.borgbackup.org/">Borg</a> as an
alternative, but I might end up choosing restic again.</p>
<p>Why Wasabi? It has an S3-compatible API and the cheapest prices I could find, cheaper than
Backblaze, especially when considering that it has no egress fees.</p>
<p>Of course the <a href="https://restic.readthedocs.io/en/stable/070_encryption.html">backup is encrypted</a>.</p>
<h2 id="end-words">End words</h2>
<p>This workflow is the evolution of 20 years of digital photography. I hope you learned
something from it that you can apply to your own needs. I will update this blog post as I
make further tweaks to the tools I use.</p>
<p>You might be wondering about the last of my stated goals, <em>&#34;transparent access and sharing
of photos&#34;</em>. I am currently working on creating a web gallery software that will give
access to my full photography collection and allow navigating it using the Digikam
metadata. The software will run in my home server, where the photo collection is
automatically synced. This means that after I organize my photos in Digikam I will be able
to access them from any device while keeping full control over the data and without having
to upload the data anywhere else. I will release the software as open source when its
basic features are working, so stay tuned!</p>
<p>If you have any comments, suggestions or feedback I would love to hear about it; feel free
to tag me in social media or send me a direct message. Check out <a href="https://fidelramos.net/">my personal website</a> for contact information.</p>
  </div></div>
  </body>
</html>
