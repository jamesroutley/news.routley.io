<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://seniormars.com/posts/neovim-workflow/">Original</a>
    <h1>My (Neo)Vim workflow</h1>
    
    <div id="readability-page-1" class="page"><div>
    <article>
        

        

        
        
        
            
        
        

        <section>
            
<p>Ever since <a href="https://github.com/tjdevries">TJ</a> said “Personalized Development Environment,” the phrase latched onto me like a cobweb in a mineshaft. A Personalized Development Environment (PDE) describes an ideal setup that is tailored to your needs and preferences – it lies between a bare-bone text editor and a full-fledged IDE. It is a place where you can be productive, efficient, and comfortable. It is a place that suits you and only you. </p>
<p>I started using Vim in my sophomore year of high school when my computer couldn’t run Visual Studio Code and Windows simultaneously, so the terminal (and Linux) became my home. I still remember my early days as a Linux user — filled with frustration, confusion, and much googling. I remember my computer being unable to connect to my printer because Linux didn’t have a patch yet. I remember the first time my bootloader was corrupted due to a Windows update, and I was praying I could still boot into my precious setup. I remember when I decided to delete Windows for good, but I forgot that I had mounted the partition and ended up nuking my hard drive. Going down this path means headaches, but it also means growth. It means learning how to fix your own problems and learning how to be self-sufficient. </p>
<p>I cannot, in good faith, teach you how to debug every issue you will encounter (those errors will structure your ideal PDE), but I can inspire you and your setup. I am now going to be a junior in College, so I have had a few years to refine my setup, and I hope you do the same. I’ll show you the workflow that I have built over the years and how I have optimized it to be as efficient as possible. This is the way of SeniorMars; this is my way!</p>
<div>
  
    
    <p>I know people will ask, so here they are: <a href="https://github.com/SeniorMars/dotfiles">SeniorMars’ Dotfiles</a>. Moreover, I will be assuming you are using Neovim 0.10!</p>
  
</div>

<p>Although, I stated this was not for beginners, I still need to point out the fundamentals. Without these, I would not consider neovim to even approach the basics of a PDE. If you think this is too basic, then you can skip this section – I promise you will learn something.</p>
<h2 id="search-and-replace">Search and Replace</h2>
<p>Let’s first start with something simple, so you get a taste on what kind of tips I will be giving you. Let’s start with search and replace. </p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>opt</span><span>.</span><span>ignorecase </span><span>= </span><span>true </span><span>-- search case insensitive
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>smartcase </span><span>= </span><span>true </span><span>-- search matters if capital letter
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>inccommand </span><span>= </span><span>&#34;split&#34; </span><span>-- &#34;for incsearch while sub
</span></code></pre>
<p>The first two options are self-explanatory. <code>ignorecase</code> makes search case-insensitive, and <code>smartcase</code> makes search case-sensitive if you use a capital letter. The third option is where the magic happens. Ever since, I first learned of <code>incsearch</code>, I have been in love. <code>incsearch</code> highlights the search pattern as you type it, giving you a real-time preview of where your pattern matches. The magic doesn’t stop at highlighting, though; by setting <code>inccommand</code> to <code>split</code>, we have a preview of what our substitution will look like. </p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/incsearch.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>Now, let’s move on to keybindings.</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>g</span><span>.</span><span>mapleader </span><span>= </span><span>&#34;,&#34;
</span><span>local </span><span>keyset </span><span>= </span><span>vim</span><span>.</span><span>keymap</span><span>.</span><span>set
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;sr&#34;</span><span>, </span><span>&#34;:%s/&lt;&lt;C-r&gt;&lt;C-w&gt;&gt;//g&lt;Left&gt;&lt;Left&gt;&#34;</span><span>)
</span></code></pre>
<p>Moreover, when I know I want to rename a variable, I do the following:</p>
<ol>
<li>Place my cursor on the variable I would like to rename.</li>
<li>Use the keybinding <code>*</code> in normal mode to highlight all instances of the variable.</li>
<li>Do <code>cgn</code> to change the word under the cursor and move to the next instance.</li>
<li>Press <code>.</code> to repeat the change on the next instance.</li>
</ol>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/change_word.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>Now, for some plugins.</p>
<pre data-lang="lua"><code data-lang="lua"><span>-- I use lazy.nvim to load plugins 
</span><span>{</span><span>&#34;mhinz/vim-grepper&#34;</span><span>}
</span><span>
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>mapleader </span><span>= </span><span>&#34;,&#34;
</span><span>local </span><span>keyset </span><span>= </span><span>vim</span><span>.</span><span>keymap</span><span>.</span><span>set
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fs&#34;</span><span>, </span><span>&#39;:GrepperRg &#34;&#34; .&lt;Left&gt;&lt;Left&gt;&lt;Left&gt;&#39;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fS&#34;</span><span>, </span><span>&#34;:Rg&lt;space&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;*&#34;</span><span>, </span><span>&#34;:Grepper -tool rg -cword -noprompt&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;gs&#34;</span><span>, </span><span>&#34;&lt;Plug&gt;(GrepperOperator)&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;x&#34;</span><span>, </span><span>&#34;gs&#34;</span><span>, </span><span>&#34;&lt;Plug&gt;(GrepperOperator)&#34;</span><span>)
</span></code></pre>
<p>This allows me to use <code>rg</code> to search for a word under the cursor, search for a word in the current director, and search for a word in the current directory. Grepper Operator allows me to use other vim motions to select text and search for it. </p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/grepper.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>Now, to do something similar to other commands like <code>:norm</code>, I use:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{
</span><span>    </span><span>&#34;smjonas/live-command.nvim&#34;</span><span>, </span><span>-- live command
</span><span>    </span><span>config </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>require</span><span>(</span><span>&#34;live-command&#34;</span><span>)</span><span>.</span><span>setup</span><span>({</span><span>commands </span><span>= </span><span>{</span><span>Norm </span><span>= </span><span>{</span><span>cmd </span><span>= </span><span>&#34;norm&#34;</span><span>}}})
</span><span>    </span><span>end
</span><span>}
</span></code></pre>
<h2 id="ex-commands-and-g-command">Ex Commands and <code>g</code> command</h2>
<p>If you have read the vim help docs, you may know some of these, but these are the little things that make a big difference. </p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>opt</span><span>.</span><span>wildmode </span><span>= </span><span>&#34;list:longest,list:full&#34; </span><span>-- for : stuff
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>wildignore</span><span>:</span><span>append</span><span>({</span><span>&#34;.javac&#34;</span><span>, </span><span>&#34;node_modules&#34;</span><span>, </span><span>&#34;*.pyc&#34;</span><span>})
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>wildignore</span><span>:</span><span>append</span><span>({</span><span>&#34;.aux&#34;</span><span>, </span><span>&#34;.out&#34;</span><span>, </span><span>&#34;.toc&#34;</span><span>}) </span><span>-- LaTeX
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>wildignore</span><span>:</span><span>append</span><span>({
</span><span>    </span><span>&#34;.o&#34;</span><span>, </span><span>&#34;.obj&#34;</span><span>, </span><span>&#34;.dll&#34;</span><span>, </span><span>&#34;.exe&#34;</span><span>, </span><span>&#34;.so&#34;</span><span>, </span><span>&#34;.a&#34;</span><span>, </span><span>&#34;.lib&#34;</span><span>, </span><span>&#34;.pyc&#34;</span><span>, </span><span>&#34;.pyo&#34;</span><span>, </span><span>&#34;.pyd&#34;</span><span>,
</span><span>    </span><span>&#34;.swp&#34;</span><span>, </span><span>&#34;.swo&#34;</span><span>, </span><span>&#34;.class&#34;</span><span>, </span><span>&#34;.DS_Store&#34;</span><span>, </span><span>&#34;.git&#34;</span><span>, </span><span>&#34;.hg&#34;</span><span>, </span><span>&#34;.orig&#34;
</span><span>})
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>suffixesadd</span><span>:</span><span>append</span><span>({</span><span>&#34;.java&#34;</span><span>, </span><span>&#34;.rs&#34;</span><span>}) </span><span>-- search for suffexes using gf
</span></code></pre>
<p>The first option is for the <code>:</code> command. It allows you to use the tab completion to find the longest common match and then show the full list. The second option is for the <code>wildignore</code> option. It allows you to ignore certain files when using tab completion. The third option is for the <code>suffixesadd</code> option. It allows you to use <code>gf</code> to open files with the given suffixes. You can customize these to your liking, but adding this allows you to filter out the noise and focus on what you want to see.</p>
<p>Additionally, this is one of the must-have plugins:</p>
<pre data-lang="lua"><code data-lang="lua"><span>--- lazy.nvim
</span><span>{</span><span>&#34;gelguy/wilder.nvim&#34;</span><span>, </span><span>build </span><span>= </span><span>&#34;:UpdateRemotePlugins&#34;</span><span>}, </span><span>-- : autocomplete
</span><span>-- wilder
</span><span>local </span><span>wilder </span><span>= </span><span>require</span><span>(</span><span>&#34;wilder&#34;</span><span>)
</span><span>wilder</span><span>.</span><span>setup</span><span>({</span><span>modes </span><span>= </span><span>{</span><span>&#34;:&#34;</span><span>, </span><span>&#34;/&#34;</span><span>, </span><span>&#34;?&#34;</span><span>}})
</span><span>wilder</span><span>.</span><span>set_option</span><span>(</span><span>&#34;pipeline&#34;</span><span>, </span><span>{
</span><span>    wilder</span><span>.</span><span>branch</span><span>(wilder</span><span>.</span><span>python_file_finder_pipeline</span><span>({
</span><span>        </span><span>file_command </span><span>= </span><span>function</span><span>(</span><span>_</span><span>, </span><span>arg</span><span>)
</span><span>            </span><span>if </span><span>string</span><span>.</span><span>find</span><span>(arg</span><span>, </span><span>&#34;.&#34;</span><span>) </span><span>~= </span><span>nil </span><span>then
</span><span>                </span><span>return </span><span>{</span><span>&#34;fd&#34;</span><span>, </span><span>&#34;-tf&#34;</span><span>, </span><span>&#34;-H&#34;</span><span>}
</span><span>            </span><span>else
</span><span>                </span><span>return </span><span>{</span><span>&#34;fd&#34;</span><span>, </span><span>&#34;-tf&#34;</span><span>}
</span><span>            </span><span>end
</span><span>        </span><span>end</span><span>,
</span><span>        </span><span>dir_command </span><span>= </span><span>{</span><span>&#34;fd&#34;</span><span>, </span><span>&#34;-td&#34;</span><span>}</span><span>,
</span><span>        </span><span>filters </span><span>= </span><span>{</span><span>&#34;fuzzy_filter&#34;</span><span>, </span><span>&#34;difflib_sorter&#34;</span><span>}
</span><span>    })</span><span>, </span><span>wilder</span><span>.</span><span>cmdline_pipeline</span><span>()</span><span>, </span><span>wilder</span><span>.</span><span>python_search_pipeline</span><span>())
</span><span>})
</span><span>
</span><span>wilder</span><span>.</span><span>set_option</span><span>(</span><span>&#34;renderer&#34;</span><span>, </span><span>wilder</span><span>.</span><span>popupmenu_renderer</span><span>({
</span><span>    </span><span>highlighter </span><span>= </span><span>wilder</span><span>.</span><span>basic_highlighter</span><span>()</span><span>,
</span><span>    </span><span>left </span><span>= </span><span>{</span><span>&#34; &#34;</span><span>}</span><span>,
</span><span>    </span><span>right </span><span>= </span><span>{</span><span>&#34; &#34;</span><span>, </span><span>wilder</span><span>.</span><span>popupmenu_scrollbar</span><span>({</span><span>thumb_char </span><span>= </span><span>&#34; &#34;</span><span>})}</span><span>,
</span><span>    </span><span>highlights </span><span>= </span><span>{</span><span>default </span><span>= </span><span>&#34;WilderMenu&#34;</span><span>, </span><span>accent </span><span>= </span><span>&#34;WilderAccent&#34;</span><span>}
</span><span>}))
</span></code></pre>
<p>Wilder is a fuzzy finder for Ex commands, search history, and command history. It is a must-have plugin for me because it allows me to search for commands and history in a more efficient way. </p>
<p><img src="https://seniormars.com/posts/neovim-workflow/wilder.png" alt="Wilder"/></p>

<p>Undo and Redo are essential to any text editor. However, in Vim, you can make this more powerful! First,</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>opt</span><span>.</span><span>undofile </span><span>= </span><span>true </span><span>-- save undo history
</span><span>local </span><span>keyset </span><span>= </span><span>vim</span><span>.</span><span>keymap</span><span>.</span><span>set
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;,&#34;</span><span>, </span><span>&#34;,&lt;C-g&gt;U&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;.&#34;</span><span>, </span><span>&#34;.&lt;C-g&gt;U&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;!&#34;</span><span>, </span><span>&#34;!&lt;C-g&gt;U&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;?&#34;</span><span>, </span><span>&#34;?&lt;C-g&gt;U&#34;</span><span>)
</span></code></pre>
<p>The first option allows you to save your undo history. The next options add more power to undo as this updates undo when you use other vim operations. Now, we add:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;mbbill/undotree&#34;</span><span>, </span><span>lazy </span><span>= </span><span>true</span><span>, </span><span>cmd </span><span>= </span><span>&#34;UndotreeToggle&#34;</span><span>}, </span><span>-- see undo tree
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;u&#34;</span><span>, </span><span>&#34;:UndotreeToggle&lt;cr&gt;&#34;</span><span>)
</span><span>
</span></code></pre>
<p><img src="https://seniormars.com/posts/neovim-workflow/undotree.png" alt="Undo Tree"/></p>
<p>This allows you to see your undo tree and navigate it with diffs – extremely useful when you want to see what you have done and what you can undo.</p>
<p>Combine this with <code>AutoSession</code>, I can open a project and have all my windows, buffers, and undo history saved. </p>
<pre data-lang="lua"><code data-lang="lua"><span>{
</span><span>    </span><span>&#34;rmagatti/auto-session&#34;</span><span>, </span><span>-- auto save session
</span><span>    </span><span>config </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>require</span><span>(</span><span>&#34;auto-session&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>            </span><span>log_level </span><span>= </span><span>&#34;error&#34;</span><span>,
</span><span>            </span><span>auto_session_suppress_dirs </span><span>= </span><span>{
</span><span>                </span><span>&#34;~/&#34;</span><span>, </span><span>&#34;~/Downloads&#34;</span><span>, </span><span>&#34;~/Documents&#34;
</span><span>            }</span><span>,
</span><span>            </span><span>auto_session_use_git_branch </span><span>= </span><span>true</span><span>,
</span><span>            </span><span>auto_save_enabled </span><span>= </span><span>true
</span><span>        })
</span><span>    </span><span>end
</span><span>}
</span></code></pre>
<h2 id="movement">Movement</h2>
<p>Movement is essential to any text editor. However, in Vim, you can make this more powerful! First,</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>opt</span><span>.</span><span>splitbelow </span><span>= </span><span>true </span><span>-- split windows below
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>splitright </span><span>= </span><span>true </span><span>-- split windows right
</span><span>
</span><span>-- Movement
</span><span>local </span><span>keyset </span><span>= </span><span>vim</span><span>.</span><span>keymap</span><span>.</span><span>set
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;jk&#34;</span><span>, </span><span>&#34;&lt;esc&gt;&#34;</span><span>)
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;v&#34;</span><span>, </span><span>&#34;J&#34;</span><span>, </span><span>&#34;:m &#39;&gt;+1&lt;cr&gt;gv=gv&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;v&#34;</span><span>, </span><span>&#34;K&#34;</span><span>, </span><span>&#34;:m &#39;&lt;-2&lt;cr&gt;gv=gv&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;h&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;h&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;j&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;j&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;k&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;k&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;l&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;l&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;wh&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;t&lt;c-h&gt;H&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;wk&#34;</span><span>, </span><span>&#34;&lt;c-w&gt;t&lt;c-h&gt;K&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;down&gt;&#34;</span><span>, </span><span>&#34;:resize +2&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;up&gt;&#34;</span><span>, </span><span>&#34;:resize -2&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;right&gt;&#34;</span><span>, </span><span>&#34;:vertical resize +2&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;left&gt;&#34;</span><span>, </span><span>&#34;:vertical resize -2&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;j&#34;</span><span>, </span><span>&#34;(v:count ? &#39;j&#39; : &#39;gj&#39;)&#34;</span><span>, </span><span>{</span><span>expr </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;k&#34;</span><span>, </span><span>&#34;(v:count ? &#39;k&#39; : &#39;gk&#39;)&#34;</span><span>, </span><span>{</span><span>expr </span><span>= </span><span>true</span><span>})
</span></code></pre>
<p>This allows us to move line around in visual mode, move windows, and reside windows. Moreover, we can go up and down in long lines!</p>
<p>Furthermore, I have some auto commands that allow me to move between windows and resize them:</p>
<pre data-lang="lua"><code data-lang="lua"><span>local </span><span>autocmd </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_autocmd
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_augroup</span><span>(</span><span>&#34;Random&#34;</span><span>, </span><span>{</span><span>clear </span><span>= </span><span>true</span><span>})
</span><span>
</span><span>autocmd</span><span>(</span><span>&#34;VimResized&#34;</span><span>, </span><span>{
</span><span>    </span><span>group </span><span>= </span><span>&#34;Random&#34;</span><span>,
</span><span>    </span><span>desc </span><span>= </span><span>&#34;Keep windows equally resized&#34;</span><span>,
</span><span>    </span><span>command </span><span>= </span><span>&#34;tabdo wincmd =&#34;
</span><span>})
</span><span>
</span><span>autocmd</span><span>(</span><span>&#34;TermOpen&#34;</span><span>, </span><span>{
</span><span>    </span><span>group </span><span>= </span><span>&#34;Random&#34;</span><span>,
</span><span>    </span><span>command </span><span>= </span><span>&#34;setlocal nonumber norelativenumber signcolumn=no&#34;
</span><span>})
</span></code></pre>
<p>This allows me to keep my windows equally resized and to remove the number column when I open a terminal.</p>
<p>Finally, I have some plugins that help me with movement and manipulating text:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;tpope/vim-repeat&#34;</span><span>}, </span><span>-- repeat
</span><span>{
</span><span>    </span><span>&#34;kylechui/nvim-surround&#34;</span><span>, </span><span>-- surround objects
</span><span>    </span><span>config </span><span>= </span><span>function</span><span>() </span><span>require</span><span>(</span><span>&#34;nvim-surround&#34;</span><span>)</span><span>.</span><span>setup</span><span>({}) </span><span>end
</span><span>},
</span><span>{</span><span>&#34;windwp/nvim-autopairs&#34;</span><span>}, </span><span>-- autopairs 
</span><span>{
</span><span>    </span><span>&#39;andymass/vim-matchup&#39;</span><span>,
</span><span>    </span><span>config </span><span>= </span><span>function</span><span>()
</span><span>        vim</span><span>.</span><span>api</span><span>.</span><span>nvim_set_hl</span><span>(</span><span>0</span><span>, </span><span>&#34;OffScreenPopup&#34;</span><span>,
</span><span>                            {</span><span>fg </span><span>= </span><span>&#34;#fe8019&#34;</span><span>, </span><span>bg </span><span>= </span><span>&#34;#3c3836&#34;</span><span>, </span><span>italic </span><span>= </span><span>true</span><span>})
</span><span>        vim</span><span>.</span><span>g</span><span>.</span><span>matchup_matchparen_offscreen </span><span>= </span><span>{
</span><span>            </span><span>method </span><span>= </span><span>&#34;popup&#34;</span><span>,
</span><span>            </span><span>highlight </span><span>= </span><span>&#34;OffScreenPopup&#34;
</span><span>        }
</span><span>    </span><span>end
</span><span>},
</span><span>{</span><span>&#34;wellle/targets.vim&#34;</span><span>}, </span><span>-- adds more targets like [ or ,
</span><span>
</span><span>--- setup
</span><span>local </span><span>rule </span><span>= </span><span>require</span><span>(</span><span>&#34;nvim-autopairs.rule&#34;</span><span>)
</span><span>local </span><span>cond </span><span>= </span><span>require</span><span>(</span><span>&#34;nvim-autopairs.conds&#34;</span><span>)
</span><span>local </span><span>autopairs </span><span>= </span><span>require</span><span>(</span><span>&#34;nvim-autopairs&#34;</span><span>)
</span><span>
</span><span>autopairs</span><span>.</span><span>add_rules</span><span>({
</span><span>    </span><span>rule</span><span>(</span><span>&#34;$&#34;</span><span>, </span><span>&#34;$&#34;</span><span>, </span><span>{</span><span>&#34;tex&#34;</span><span>, </span><span>&#34;latex&#34;</span><span>})</span><span>:</span><span>with_cr</span><span>(cond</span><span>.</span><span>none</span><span>())
</span><span>})
</span><span>
</span><span>autopairs</span><span>.</span><span>get_rules</span><span>(</span><span>&#34;`&#34;</span><span>)[</span><span>1</span><span>]</span><span>.</span><span>not_filetypes </span><span>= </span><span>{</span><span>&#34;tex&#34;</span><span>, </span><span>&#34;latex&#34;</span><span>}
</span><span>autopairs</span><span>.</span><span>get_rules</span><span>(</span><span>&#34;&#39;&#34;</span><span>)[</span><span>1</span><span>]</span><span>.</span><span>not_filetypes </span><span>= </span><span>{</span><span>&#34;tex&#34;</span><span>, </span><span>&#34;latex&#34;</span><span>, </span><span>&#34;rust&#34;</span><span>}
</span></code></pre>
<p>This allows me to repeat commands, add more targets like <code>[]</code>, and auto complete pairs like <code>()</code>. Moreover, with nvim-surround, I can surround text objects with different characters like quotes, brackets, and braces. Finally with vim-matchup, I can see the matching pair of brackets, braces, and quotes. If the code is very long it also shows the top matching pair in a popup window.</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/matchup.png" alt="Matchup"/></p>
<h2 id="better-quickfix">Better quickfix</h2>
<p>If are not taking advantage of the quickfix list, you are missing out. The quickfix list is a powerful tool that allows you to navigate through errors, warnings, and search results – anything as long as you know how to use it. However, I like to use a plugin to make it more powerful.</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;kevinhwang91/nvim-bqf&#34;</span><span>}, </span><span>-- better quickfix
</span><span>--- later in the config
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;cn&#34;</span><span>, </span><span>&#34;:cnext&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;cp&#34;</span><span>, </span><span>&#34;:cprevious&lt;cr&gt;&#34;</span><span>)
</span></code></pre>
<p>This allows me to navigate through the quickfix list with ease. In fact, this is the setup I used to showoff grepper. </p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/grepper.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>I integrated the quickfix list with other tools I’ll get to later.</p>
<h2 id="spell-check">Spell Check</h2>
<p>Vim has a built-in spell checker, but of course, we need to make it better. </p>
<pre data-lang="lua"><code data-lang="lua"><span>function </span><span>SpellToggle</span><span>()
</span><span>    </span><span>if </span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>spell</span><span>:</span><span>get</span><span>() </span><span>then
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spell </span><span>= </span><span>false
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spelllang </span><span>= </span><span>&#34;en&#34;
</span><span>    </span><span>else
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spell </span><span>= </span><span>true
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spelllang </span><span>= </span><span>{</span><span>&#34;en_us&#34;</span><span>}
</span><span>    </span><span>end
</span><span>end
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;5&#34;</span><span>, </span><span>&#34;:lua SpellToggle()&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;z&#34;</span><span>, </span><span>&#34;[s1z=``&#34;</span><span>)
</span></code></pre>
<p>This allows me to toggle spell check and fix spelling mistakes with <code>&lt;leader&gt;z</code> while not moving my cursor! In addition to this I use a language server (LSP) to check my spelling through language tool: <a href="https://www.npmjs.com/package/coc-ltex/v/12.2.0">ltex</a>.</p>
<h2 id="status-line">Status Line</h2>
<p>At one point in your vim carer, you would have downloaded a status line plugin. After a while, though, you realize that you don’t need a status line plugin. You can make your own status line! Here is mine (with cache implmented):</p>
<pre data-lang="lua"><code data-lang="lua"><span>local </span><span>cache </span><span>= </span><span>{}
</span><span>
</span><span>local function </span><span>refresh_cache</span><span>(</span><span>key</span><span>)
</span><span>    </span><span>if </span><span>cache[key] </span><span>then </span><span>cache[key]</span><span>.</span><span>value </span><span>= </span><span>cache[key]</span><span>.</span><span>fn</span><span>() </span><span>end
</span><span>end
</span><span>
</span><span>local function </span><span>cache_get</span><span>(</span><span>key</span><span>, </span><span>compute_fn</span><span>)
</span><span>    </span><span>local </span><span>cached </span><span>= </span><span>cache[key]
</span><span>    </span><span>if </span><span>cached </span><span>then return </span><span>cached</span><span>.</span><span>value </span><span>end
</span><span>    </span><span>local </span><span>value </span><span>= </span><span>compute_fn</span><span>()
</span><span>    cache[key] </span><span>= </span><span>{</span><span>value </span><span>= </span><span>value</span><span>, </span><span>fn </span><span>= </span><span>compute_fn}
</span><span>    </span><span>return </span><span>value
</span><span>end
</span><span>
</span><span>function </span><span>SpellToggle</span><span>()
</span><span>    </span><span>if </span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>spell</span><span>:</span><span>get</span><span>() </span><span>then
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spell </span><span>= </span><span>false
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spelllang </span><span>= </span><span>&#34;en&#34;
</span><span>    </span><span>else
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spell </span><span>= </span><span>true
</span><span>        vim</span><span>.</span><span>opt_local</span><span>.</span><span>spelllang </span><span>= </span><span>{</span><span>&#34;en_us&#34;</span><span>}
</span><span>    </span><span>end
</span><span>end
</span><span>
</span><span>local function </span><span>spell_status</span><span>()
</span><span>    </span><span>local </span><span>spellLang </span><span>= </span><span>vim</span><span>.</span><span>opt_local</span><span>.</span><span>spelllang</span><span>:</span><span>get</span><span>()
</span><span>    </span><span>if </span><span>type</span><span>(spellLang) </span><span>== </span><span>&#34;table&#34; </span><span>then
</span><span>        spellLang </span><span>= </span><span>table</span><span>.</span><span>concat</span><span>(spellLang</span><span>, </span><span>&#34;, &#34;</span><span>)
</span><span>    </span><span>end
</span><span>    </span><span>return </span><span>string</span><span>.</span><span>upper</span><span>(spellLang)
</span><span>end
</span><span>
</span><span>local function </span><span>git_branch</span><span>()
</span><span>    </span><span>return </span><span>cache_get</span><span>(</span><span>&#34;git_branch&#34;</span><span>, </span><span>function</span><span>()
</span><span>        </span><span>if </span><span>vim</span><span>.</span><span>g</span><span>.</span><span>loaded_fugitive </span><span>then
</span><span>            </span><span>local </span><span>branch </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>FugitiveHead</span><span>()
</span><span>            </span><span>if </span><span>branch </span><span>~= </span><span>&#34;&#34; </span><span>then
</span><span>                </span><span>if </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_win_get_width</span><span>(</span><span>0</span><span>) </span><span>&lt;= </span><span>80 </span><span>then
</span><span>                    </span><span>return </span><span>&#34; &#34; </span><span>.. </span><span>string</span><span>.</span><span>upper</span><span>(branch</span><span>:</span><span>sub</span><span>(</span><span>1</span><span>, </span><span>2</span><span>))
</span><span>                </span><span>end
</span><span>                </span><span>return </span><span>&#34; &#34; </span><span>.. </span><span>string</span><span>.</span><span>upper</span><span>(branch)
</span><span>            </span><span>end
</span><span>        </span><span>end
</span><span>        </span><span>return </span><span>&#34;&#34;
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>update_status_for_file</span><span>(</span><span>file_path</span><span>)
</span><span>    </span><span>-- Get number of lines added and deleted using git diff --numstat
</span><span>    </span><span>local </span><span>diff_stats </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>system</span><span>(</span><span>&#34;git diff --numstat &#34; </span><span>..
</span><span>                                         vim</span><span>.</span><span>fn</span><span>.</span><span>shellescape</span><span>(file_path))
</span><span>    </span><span>if </span><span>vim</span><span>.</span><span>v</span><span>.</span><span>shell_error </span><span>~= </span><span>0 </span><span>or </span><span>diff_stats </span><span>== </span><span>&#34;&#34; </span><span>then return </span><span>&#34;&#34; </span><span>end
</span><span>
</span><span>    </span><span>local </span><span>added</span><span>, </span><span>deleted </span><span>= </span><span>diff_stats</span><span>:</span><span>match</span><span>(</span><span>&#34;(%d+)%s+(%d+)%s+%S+&#34;</span><span>)
</span><span>    added, deleted </span><span>= </span><span>tonumber</span><span>(added), </span><span>tonumber</span><span>(deleted)
</span><span>    </span><span>local </span><span>delta </span><span>= </span><span>math</span><span>.</span><span>min</span><span>(added</span><span>, </span><span>deleted)
</span><span>
</span><span>    </span><span>local </span><span>status </span><span>= </span><span>{
</span><span>        </span><span>changed </span><span>= </span><span>delta</span><span>,
</span><span>        </span><span>added </span><span>= </span><span>added </span><span>- </span><span>delta</span><span>,
</span><span>        </span><span>removed </span><span>= </span><span>deleted </span><span>- </span><span>delta
</span><span>    }
</span><span>
</span><span>    </span><span>-- Format the status for display
</span><span>    </span><span>local </span><span>status_txt </span><span>= </span><span>{}
</span><span>    </span><span>if </span><span>status</span><span>.</span><span>added </span><span>&gt; </span><span>0 </span><span>then </span><span>table</span><span>.</span><span>insert</span><span>(status_txt</span><span>, </span><span>&#34;+&#34; </span><span>.. </span><span>status</span><span>.</span><span>added) </span><span>end
</span><span>    </span><span>if </span><span>status</span><span>.</span><span>changed </span><span>&gt; </span><span>0 </span><span>then
</span><span>        </span><span>table</span><span>.</span><span>insert</span><span>(status_txt</span><span>, </span><span>&#34;~&#34; </span><span>.. </span><span>status</span><span>.</span><span>changed)
</span><span>    </span><span>end
</span><span>    </span><span>if </span><span>status</span><span>.</span><span>removed </span><span>&gt; </span><span>0 </span><span>then
</span><span>        </span><span>table</span><span>.</span><span>insert</span><span>(status_txt</span><span>, </span><span>&#34;-&#34; </span><span>.. </span><span>status</span><span>.</span><span>removed)
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>if </span><span>#</span><span>status_txt </span><span>&gt; </span><span>1 </span><span>then
</span><span>        </span><span>for </span><span>i </span><span>= </span><span>2</span><span>, </span><span>#</span><span>status_txt </span><span>do </span><span>status_txt[i] </span><span>= </span><span>&#34;,&#34; </span><span>.. </span><span>status_txt[i] </span><span>end
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>local </span><span>formatted_status </span><span>= </span><span>&#34;&#34;
</span><span>    </span><span>if </span><span>#</span><span>status_txt </span><span>&gt; </span><span>0 </span><span>then
</span><span>        formatted_status </span><span>= </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%s]&#34;</span><span>, </span><span>table</span><span>.</span><span>concat</span><span>(status_txt))
</span><span>    </span><span>else
</span><span>        formatted_status </span><span>= </span><span>&#34;&#34;
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>return </span><span>formatted_status
</span><span>end
</span><span>
</span><span>local function </span><span>status_for_file</span><span>()
</span><span>    </span><span>return </span><span>cache_get</span><span>(</span><span>&#34;file_status&#34;</span><span>, </span><span>function</span><span>()
</span><span>        </span><span>local </span><span>file_path </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_get_name</span><span>(</span><span>0</span><span>)
</span><span>
</span><span>        </span><span>if </span><span>file_path </span><span>== </span><span>&#34;&#34; </span><span>then return </span><span>&#34;&#34; </span><span>end
</span><span>        </span><span>return </span><span>update_status_for_file</span><span>(file_path)
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>human_file_size</span><span>()
</span><span>    </span><span>return </span><span>cache_get</span><span>(</span><span>&#34;file_size&#34;</span><span>, </span><span>function</span><span>()
</span><span>        </span><span>local </span><span>file </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_get_name</span><span>(</span><span>0</span><span>)
</span><span>        </span><span>if </span><span>file </span><span>== </span><span>&#34;&#34; </span><span>then return </span><span>&#34;&#34; </span><span>end
</span><span>
</span><span>        </span><span>local </span><span>size </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>getfsize</span><span>(file)
</span><span>        </span><span>local </span><span>suffixes </span><span>= </span><span>{</span><span>&#34;B&#34;</span><span>, </span><span>&#34;KB&#34;</span><span>, </span><span>&#34;MB&#34;</span><span>, </span><span>&#34;GB&#34;</span><span>}
</span><span>        </span><span>local </span><span>i </span><span>= </span><span>1
</span><span>        </span><span>while </span><span>size </span><span>&gt; </span><span>1024 </span><span>do
</span><span>            size </span><span>= </span><span>size </span><span>/ </span><span>1024
</span><span>            i </span><span>= </span><span>i </span><span>+ </span><span>1
</span><span>        </span><span>end
</span><span>
</span><span>        </span><span>return </span><span>size </span><span>&lt;= </span><span>0 </span><span>and </span><span>&#34;&#34; </span><span>or </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%.0f%s]&#34;</span><span>, </span><span>size</span><span>, </span><span>suffixes[i])
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>smart_file_path</span><span>()
</span><span>    </span><span>return </span><span>cache_get</span><span>(</span><span>&#34;file_path&#34;</span><span>, </span><span>function</span><span>()
</span><span>        </span><span>local </span><span>buf_name </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_get_name</span><span>(</span><span>0</span><span>)
</span><span>        </span><span>local </span><span>is_wide </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_win_get_width</span><span>(</span><span>0</span><span>) </span><span>&gt; </span><span>80
</span><span>        </span><span>if </span><span>buf_name </span><span>== </span><span>&#34;&#34; </span><span>then return </span><span>&#34;[No Name]&#34; </span><span>end
</span><span>
</span><span>        </span><span>local </span><span>file_dir </span><span>= </span><span>buf_name</span><span>:</span><span>sub</span><span>(</span><span>1</span><span>, </span><span>5</span><span>)</span><span>:</span><span>find</span><span>(</span><span>&#34;term&#34;</span><span>) </span><span>and </span><span>vim</span><span>.</span><span>env</span><span>.</span><span>PWD </span><span>or
</span><span>                             vim</span><span>.</span><span>fs</span><span>.</span><span>dirname</span><span>(buf_name)
</span><span>        file_dir </span><span>= </span><span>file_dir</span><span>:</span><span>gsub</span><span>(vim</span><span>.</span><span>env</span><span>.</span><span>HOME</span><span>, </span><span>&#34;~&#34;</span><span>, </span><span>1</span><span>)
</span><span>
</span><span>        </span><span>if </span><span>not </span><span>is_wide </span><span>then </span><span>file_dir </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>pathshorten</span><span>(file_dir) </span><span>end
</span><span>
</span><span>        </span><span>if </span><span>buf_name</span><span>:</span><span>sub</span><span>(</span><span>1</span><span>, </span><span>5</span><span>)</span><span>:</span><span>find</span><span>(</span><span>&#34;term&#34;</span><span>) </span><span>then
</span><span>            </span><span>return </span><span>file_dir </span><span>.. </span><span>&#34; &#34;
</span><span>        </span><span>else
</span><span>            </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;%s/%s &#34;</span><span>, </span><span>file_dir</span><span>, </span><span>vim</span><span>.</span><span>fs</span><span>.</span><span>basename</span><span>(buf_name))
</span><span>        </span><span>end
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>word_count</span><span>()
</span><span>    </span><span>local </span><span>words </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>wordcount</span><span>()
</span><span>    </span><span>if </span><span>words</span><span>.</span><span>visual_words </span><span>~= </span><span>nil </span><span>then
</span><span>        </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%s]&#34;</span><span>, </span><span>words</span><span>.</span><span>visual_words)
</span><span>    </span><span>else
</span><span>        </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%s]&#34;</span><span>, </span><span>words</span><span>.</span><span>words)
</span><span>    </span><span>end
</span><span>end
</span><span>
</span><span>local </span><span>modes </span><span>= </span><span>setmetatable</span><span>({
</span><span>    [</span><span>&#34;n&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;NORMAL&#34;</span><span>, </span><span>&#34;N&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;no&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;N·OPERATOR&#34;</span><span>, </span><span>&#34;N·P&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;v&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;VISUAL&#34;</span><span>, </span><span>&#34;V&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;V&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;V·LINE&#34;</span><span>, </span><span>&#34;V·L&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;V·BLOCK&#34;</span><span>, </span><span>&#34;V·B&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;V·BLOCK&#34;</span><span>, </span><span>&#34;V·B&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;s&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;SELECT&#34;</span><span>, </span><span>&#34;S&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;S&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;S·LINE&#34;</span><span>, </span><span>&#34;S·L&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;S·BLOCK&#34;</span><span>, </span><span>&#34;S·B&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;i&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;INSERT&#34;</span><span>, </span><span>&#34;I&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;ic&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;INSERT&#34;</span><span>, </span><span>&#34;I&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;R&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;REPLACE&#34;</span><span>, </span><span>&#34;R&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;Rv&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;V·REPLACE&#34;</span><span>, </span><span>&#34;V·R&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;c&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;COMMAND&#34;</span><span>, </span><span>&#34;C&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;cv&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;VIM·EX&#34;</span><span>, </span><span>&#34;V·E&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;ce&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;EX&#34;</span><span>, </span><span>&#34;E&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;r&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;PROMPT&#34;</span><span>, </span><span>&#34;P&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;rm&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;MORE&#34;</span><span>, </span><span>&#34;M&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;r?&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;CONFIRM&#34;</span><span>, </span><span>&#34;C&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;!&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;SHELL&#34;</span><span>, </span><span>&#34;S&#34;</span><span>}</span><span>,
</span><span>    [</span><span>&#34;t&#34;</span><span>] </span><span>= </span><span>{</span><span>&#34;TERMINAL&#34;</span><span>, </span><span>&#34;T&#34;</span><span>}
</span><span>}</span><span>, </span><span>{
</span><span>    </span><span>__index </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>return </span><span>{</span><span>&#34;UNKNOWN&#34;</span><span>, </span><span>&#34;U&#34;</span><span>} </span><span>-- handle edge cases
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>local function </span><span>get_current_mode</span><span>()
</span><span>    </span><span>local </span><span>mode </span><span>= </span><span>modes[vim</span><span>.</span><span>api</span><span>.</span><span>nvim_get_mode</span><span>()</span><span>.</span><span>mode]
</span><span>    </span><span>if </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_win_get_width</span><span>(</span><span>0</span><span>) </span><span>&lt;= </span><span>80 </span><span>then
</span><span>        </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;%s &#34;</span><span>, </span><span>mode[</span><span>2</span><span>]) </span><span>-- short name
</span><span>    </span><span>else
</span><span>        </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;%s &#34;</span><span>, </span><span>mode[</span><span>1</span><span>]) </span><span>-- long name
</span><span>    </span><span>end
</span><span>end
</span><span>
</span><span>local function </span><span>file_type</span><span>()
</span><span>    </span><span>return </span><span>cache_get</span><span>(</span><span>&#34;file_type&#34;</span><span>, </span><span>function</span><span>()
</span><span>        </span><span>local </span><span>buf_name </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_get_name</span><span>(</span><span>0</span><span>)
</span><span>        </span><span>local </span><span>width </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_win_get_width</span><span>(</span><span>0</span><span>)
</span><span>
</span><span>        </span><span>local </span><span>ft </span><span>= </span><span>vim</span><span>.</span><span>bo</span><span>.</span><span>filetype
</span><span>        </span><span>if </span><span>ft </span><span>== </span><span>&#34;&#34; </span><span>then
</span><span>            </span><span>return </span><span>&#34;[None]&#34;
</span><span>        </span><span>else
</span><span>            </span><span>if </span><span>width </span><span>&gt; </span><span>80 </span><span>then
</span><span>                </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%s]&#34;</span><span>, </span><span>ft)
</span><span>            </span><span>else
</span><span>                </span><span>local </span><span>ext </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>fnamemodify</span><span>(buf_name</span><span>, </span><span>&#34;:e&#34;</span><span>)
</span><span>                </span><span>local </span><span>shorter </span><span>= </span><span>(</span><span>string</span><span>.</span><span>len</span><span>(ft) </span><span>&lt; </span><span>string</span><span>.</span><span>len</span><span>(ext)) </span><span>and </span><span>ft </span><span>or </span><span>ext
</span><span>                </span><span>return </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;[%s]&#34;</span><span>, </span><span>shorter)
</span><span>            </span><span>end
</span><span>        </span><span>end
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>---@diagnostic disable-next-line: lowercase-global
</span><span>function </span><span>status_line</span><span>()
</span><span>    </span><span>return </span><span>table</span><span>.</span><span>concat</span><span>({
</span><span>        </span><span>get_current_mode</span><span>()</span><span>, </span><span>-- get current mode
</span><span>        </span><span>spell_status</span><span>()</span><span>, </span><span>-- display language and if spell is on
</span><span>        </span><span>git_branch</span><span>()</span><span>, </span><span>-- branch name
</span><span>        </span><span>&#34; %&lt;&#34;</span><span>, </span><span>-- spacing
</span><span>        </span><span>smart_file_path</span><span>()</span><span>, </span><span>-- smart full path filename
</span><span>        </span><span>&#34;%h%m%r%w&#34;</span><span>, </span><span>-- help flag, modified, readonly, and preview
</span><span>        </span><span>&#34;%=&#34;</span><span>, </span><span>-- right align
</span><span>        </span><span>status_for_file</span><span>()</span><span>, </span><span>-- git status for file
</span><span>        </span><span>word_count</span><span>()</span><span>, </span><span>-- word count
</span><span>        </span><span>&#34;[%-3.(%l|%c]&#34;</span><span>, </span><span>-- line number, column number
</span><span>        </span><span>human_file_size</span><span>()</span><span>, </span><span>-- file size
</span><span>        </span><span>file_type</span><span>() </span><span>-- file type
</span><span>    })
</span><span>end
</span><span>
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_augroup</span><span>(</span><span>&#34;StatusLineCache&#34;</span><span>, </span><span>{})
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_autocmd</span><span>({</span><span>&#34;BufEnter&#34;</span><span>}</span><span>, </span><span>{
</span><span>    </span><span>pattern </span><span>= </span><span>&#34;*&#34;</span><span>,
</span><span>    </span><span>group </span><span>= </span><span>&#34;StatusLineCache&#34;</span><span>,
</span><span>    </span><span>callback </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;git_branch&#34;</span><span>) </span><span>-- this should be another event
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_status&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_size&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_path&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_type&#34;</span><span>)
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_autocmd</span><span>({</span><span>&#34;BufWritePost&#34;</span><span>}</span><span>, </span><span>{
</span><span>    </span><span>pattern </span><span>= </span><span>&#34;*&#34;</span><span>,
</span><span>    </span><span>group </span><span>= </span><span>&#34;StatusLineCache&#34;</span><span>,
</span><span>    </span><span>callback </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_status&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_size&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_path&#34;</span><span>)
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_autocmd</span><span>({</span><span>&#34;WinResized&#34;</span><span>}</span><span>, </span><span>{
</span><span>    </span><span>pattern </span><span>= </span><span>&#34;*&#34;</span><span>,
</span><span>    </span><span>group </span><span>= </span><span>&#34;StatusLineCache&#34;</span><span>,
</span><span>    </span><span>callback </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;git_branch&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_path&#34;</span><span>)
</span><span>        </span><span>refresh_cache</span><span>(</span><span>&#34;file_type&#34;</span><span>)
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>statusline </span><span>= </span><span>&#34;%!luaeval(&#39;status_line()&#39;)&#34;
</span><span>
</span><span>vim</span><span>.</span><span>wo</span><span>.</span><span>fillchars </span><span>= </span><span>&#34;eob:~&#34; </span><span>-- fillchars of windows
</span><span>
</span></code></pre>
<p>This is my status line. It shows the current mode, language, branch name, file path, git status, word count, line number, column number, file size, and file type. It is a lot, but I hope my documentation helps you understand what each part does. It is extremely minimum but provides me with all the information I need depending on my current state.</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/status1.png" alt="Status Line"/></p>
<p><img src="https://seniormars.com/posts/neovim-workflow/status2.png" alt="Status Line"/></p>
<p><img src="https://seniormars.com/posts/neovim-workflow/status3.png" alt="Status Line"/></p>
<h2 id="formatting">Formatting</h2>
<p>Formatting is essential to any text editor:</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_user_command</span><span>(</span><span>&#34;FixWhitespace&#34;</span><span>, </span><span>[[%s/\s\+$//e]]</span><span>, </span><span>{})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;3&#34;</span><span>, </span><span>&#34;:retab&lt;cr&gt;:FixWhitespace&lt;cr&gt;&#34;</span><span>)
</span></code></pre>
<p>However, I use a plugin to make it more powerful:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;sbdchd/neoformat&#34;</span><span>}, </span><span>-- format
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>neoformat_try_formatprg </span><span>= </span><span>1
</span></code></pre>
<p>This allows me to format my code with <code>neoformat</code> and remove trailing whitespace with <code>FixWhitespace</code>. Moreover, I can still use the class <code>=</code> and <code>gq</code> to format my code. Very useful!</p>
<h2 id="better-netrw">Better netrw</h2>
<p>I know, I know, netrw is not the best file explorer, but I don’t use it enough to care that much. However, I do have some settings to make it more bearable:</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>g</span><span>.</span><span>netrw_banner </span><span>= </span><span>0
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>netrw_browse_split </span><span>= </span><span>4
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>netrw_liststyle </span><span>= </span><span>3
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>netrw_winsize </span><span>= -</span><span>28
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>netrw_browsex_viewer </span><span>= </span><span>&#34;open -a firefox&#34;
</span></code></pre>
<p>These settings remove the banner, open the file explorer in a vertical split, use the tree style, and set the size of the file explorer. Moreover, I can open files in the browser with <code>gx</code>.</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/tree.png" alt="Netrw"/></p>
<h2 id="git-integration">Git Integration</h2>
<p>Now, I made a video about this (<a href="https://www.youtube.com/watch?v=57x4ZzzCr2Y">here</a>), so I won’t go into too much detail. However, I will show you how I set it up:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;tpope/vim-fugitive&#34;</span><span>}, </span><span>-- Git control for vim
</span><span>
</span><span>-- fugitive
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;gg&#34;</span><span>, </span><span>&#34;:Git&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;ga&#34;</span><span>, </span><span>&#34;:Git add %:p&lt;cr&gt;&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;gd&#34;</span><span>, </span><span>&#34;:Gdiff&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;ge&#34;</span><span>, </span><span>&#34;:Gedit&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;gw&#34;</span><span>, </span><span>&#34;:Gwrite&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;gf&#34;</span><span>, </span><span>&#34;:Commits&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span></code></pre>
<p>Honestly, although this pretty simple, it is extremely powerful. I can see the git status, add files, diff files, edit files, write files, and see commits. Together with <code>gh</code> the github cli, I can do everything I need to do with git (though I do have more, which I will talk about in a later section)!</p>
<p>Finally, I set Neovim to be my merge tool and diff tool (through <code>~/gitconfig</code>):</p>
<pre><code><span>[user]
</span><span>	email = seniormars@rice.edu
</span><span>	name = SeniorMars
</span><span>	username = SeniorMars
</span><span>	signingkey = 7C668A6D13D5729989FB126B183357B41320BB2B
</span><span>[core]
</span><span>	pager = delta
</span><span>	editor = nvim
</span><span>	excludesfile = /Users/charlie/.config/git/gitignore_global
</span><span>[credential]
</span><span>	helper = cache
</span><span>[init]
</span><span>	defaultBranch = main
</span><span>[diff]
</span><span>	algorithm = patience
</span><span>	compactionHeuristic = true
</span><span>	tool = nvimdiff
</span><span>[difftool &#34;nvimdiff&#34;]
</span><span>	cmd = nvim -d \&#34;$LOCAL\&#34; \&#34;$REMOTE\&#34; -c \&#34;wincmd w\&#34; -c \&#34;wincmd L\&#34;
</span><span>[merge]
</span><span>	tool = nvimdiff4
</span><span>	prompt = false
</span><span>[mergetool &#34;nvimdiff4&#34;]
</span><span>	cmd = nvim -d $LOCAL $BASE $REMOTE $MERGED -c &#39;$wincmd w&#39; -c &#39;wincmd J&#39; -c &#39;set diffopt&amp;&#39; -c &#39;set diffopt+=algorithm:patience&#39;
</span><span>	keepBackup = false
</span></code></pre>
<p>I then use <code>diffget</code> and <code>diffput</code> to merge my files with <code>git mergetool</code></p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>opt</span><span>.</span><span>diffopt</span><span>:</span><span>append</span><span>(</span><span>&#34;linematch:50&#34;</span><span>)
</span></code></pre>
<p><img src="https://seniormars.com/posts/neovim-workflow/merge.png" alt="Fugitive"/></p>
<p>With this, we have completed all the fundamentals! </p>

<p>In the last section, I spent a lot of time buffing vim features. However, Neovim has been progressing and has added many new features that I have been taking advantage of. In this section, I will show you how I use these features to make my workflow more efficient.</p>
<h2 id="treesitter">Treesitter</h2>
<p>Treesitter is a parser library that is used in real-time editing contexts, where it aims to fill the gap to manipulate and understand your code through the Abstract syntax tree (AST). Take, for instance, syntax highlighting. Originally, syntax highlighting was achieved through regular expressions that would match the tokens of the language you used. However, for large files that was a large tax. Now imagine if instead of matching the literal text to then syntax highlight, your text editor matches the nodes in the AST (and context) to highlight your code. Because treesitter operates within context, it is much more accurate to read your code and provides “better” syntax highlighting. For instance, what is the difference between a macro and a function — should that be highlighted different to notate that it has different behavior? Treesitter says yes, and I agree.</p>
<p>However, if this were the only benefit, I would just shrug off the tool. It’s a lot of development to support a feature like this. It turns out however that treesitter updates its tree while you are typing in real time, which provides additional benefits than just more stable syntax highlighting. Yet, what catches my eyes is the extensibility of treesitter. Here we have a tool that can manipulate the AST – what can you with that? Well, you decide, but here are some of my uses: better code folding, swap function parameters, refactoring entire functions in a way a LSP can’t, and provide integration across multiple programming files.  Note the last one, which, I believe, is a feature that should impress you because if treesitter can work on a file with multiple languages, it can tell you what how comments work in that language, what indentation is ideal, what.a function block is in a language. That’s compelling, and what you can do with treesitter is up to you: you have full control of your text editor and AST.</p>
<p>Treesitter is a tool for a programmer to do more with their code editor and I believe it brings more power to editing, reviewing, and writing code. Let’s take a look at how I write these blogs; I often have Rust, Markdown, and LaTeX:</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/treesitter.png" alt="Treesitter"/></p>
<p>Notice, that treesitter can highlight the syntax of all three languages in the same file!</p>
<p>Here is how I set up treesitter:</p>
<pre data-lang="lua"><code data-lang="lua"><span>--- I use lazy.nvim to load plugins 
</span><span>{</span><span>&#34;numToStr/Comment.nvim&#34;</span><span>}, </span><span>-- comment
</span><span>{</span><span>&#34;nvim-treesitter/nvim-treesitter&#34;</span><span>, </span><span>build </span><span>= </span><span>&#34;:TSUpdate&#34;</span><span>}, </span><span>-- :TSInstallFromGrammar
</span><span>{</span><span>&#34;nvim-treesitter/nvim-treesitter-textobjects&#34;</span><span>, </span><span>event </span><span>= </span><span>&#34;InsertEnter&#34;</span><span>}, </span><span>-- TS objects
</span><span>{</span><span>&#34;JoosepAlviste/nvim-ts-context-commentstring&#34;</span><span>}, </span><span>-- use TS for comment.nvim
</span><span>{</span><span>&#34;danymat/neogen&#34;</span><span>, </span><span>config </span><span>= </span><span>function</span><span>() </span><span>require</span><span>(</span><span>&#34;neogen&#34;</span><span>)</span><span>.</span><span>setup</span><span>({}) </span><span>end</span><span>}, 
</span></code></pre>
<p>This setups treesitter, treesitter text objects, treesitter context, and treesitter commentstring. I also use neogen to generate doc comments for me. Additionally, I have the following settings:</p>
<pre data-lang="lua"><code data-lang="lua"><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;t&#34;</span><span>, </span><span>&#34;:lua require(&#39;neogen&#39;).generate()&lt;CR&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>foldmethod </span><span>= </span><span>&#34;expr&#34; </span><span>-- treesiter time
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>foldexpr </span><span>= </span><span>&#34;nvim_treesitter#foldexpr()&#34; </span><span>-- treesiter
</span><span>
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>skip_ts_context_commentstring_module </span><span>= </span><span>true
</span><span>
</span><span>require</span><span>(</span><span>&#34;Comment&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>    </span><span>pre_hook </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>return
</span><span>            </span><span>require</span><span>(</span><span>&#34;ts_context_commentstring.internal&#34;</span><span>)</span><span>.</span><span>calculate_commentstring</span><span>()
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>local </span><span>ts_repeat_move </span><span>= </span><span>require</span><span>(</span><span>&#34;nvim-treesitter.textobjects.repeatable_move&#34;</span><span>)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;;&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>repeat_last_move_next)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;,&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>repeat_last_move_previous)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;f&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>builtin_f)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;F&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>builtin_F)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;t&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>builtin_t)
</span><span>keyset</span><span>({</span><span>&#34;n&#34;</span><span>, </span><span>&#34;x&#34;</span><span>, </span><span>&#34;o&#34;</span><span>}</span><span>, </span><span>&#34;T&#34;</span><span>, </span><span>ts_repeat_move</span><span>.</span><span>builtin_T)
</span><span>
</span><span>require</span><span>(</span><span>&#34;nvim-treesitter.configs&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>    </span><span>highlight </span><span>= </span><span>{</span><span>enable </span><span>= </span><span>true</span><span>, </span><span>disable </span><span>= </span><span>{</span><span>&#34;latex&#34;</span><span>}}</span><span>,
</span><span>    </span><span>indent </span><span>= </span><span>{</span><span>enable </span><span>= </span><span>true</span><span>, </span><span>disable </span><span>= </span><span>{</span><span>&#34;python&#34;</span><span>}}</span><span>,
</span><span>    </span><span>textobjects </span><span>= </span><span>{
</span><span>        </span><span>move </span><span>= </span><span>{
</span><span>            </span><span>enable </span><span>= </span><span>true</span><span>,
</span><span>            </span><span>set_jumps </span><span>= </span><span>true</span><span>, </span><span>-- whether to set jumps in the jumplist
</span><span>            </span><span>goto_next_start </span><span>= </span><span>{
</span><span>                [</span><span>&#34;]m&#34;</span><span>] </span><span>= </span><span>&#34;@function.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;]]&#34;</span><span>] </span><span>= </span><span>{</span><span>query </span><span>= </span><span>&#34;@class.outer&#34;</span><span>, </span><span>desc </span><span>= </span><span>&#34;Next class start&#34;</span><span>}</span><span>,
</span><span>                [</span><span>&#34;]s&#34;</span><span>] </span><span>= </span><span>{
</span><span>                    </span><span>query </span><span>= </span><span>&#34;@scope&#34;</span><span>,
</span><span>                    </span><span>query_group </span><span>= </span><span>&#34;locals&#34;</span><span>,
</span><span>                    </span><span>desc </span><span>= </span><span>&#34;Next scope&#34;
</span><span>                }
</span><span>            }</span><span>,
</span><span>            </span><span>goto_previous_start </span><span>= </span><span>{
</span><span>                [</span><span>&#34;[m&#34;</span><span>] </span><span>= </span><span>&#34;@function.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;[[&#34;</span><span>] </span><span>= </span><span>&#34;@class.outer&#34;
</span><span>            }</span><span>,
</span><span>            </span><span>goto_next_end </span><span>= </span><span>{
</span><span>                [</span><span>&#34;]M&#34;</span><span>] </span><span>= </span><span>&#34;@function.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;][&#34;</span><span>] </span><span>= </span><span>&#34;@class.outer&#34;
</span><span>            }</span><span>,
</span><span>            </span><span>goto_previous_end </span><span>= </span><span>{
</span><span>                [</span><span>&#34;[M&#34;</span><span>] </span><span>= </span><span>&#34;@function.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;[]&#34;</span><span>] </span><span>= </span><span>&#34;@class.outer&#34;
</span><span>            }</span><span>,
</span><span>            </span><span>goto_next </span><span>= </span><span>{[</span><span>&#34;]d&#34;</span><span>] </span><span>= </span><span>&#34;@conditional.outer&#34;</span><span>}</span><span>,
</span><span>            </span><span>goto_previous </span><span>= </span><span>{[</span><span>&#34;[d&#34;</span><span>] </span><span>= </span><span>&#34;@conditional.outer&#34;</span><span>}
</span><span>        }</span><span>,
</span><span>        </span><span>swap </span><span>= </span><span>{
</span><span>            </span><span>enable </span><span>= </span><span>true</span><span>,
</span><span>            </span><span>swap_next </span><span>= </span><span>{[</span><span>&#34;&lt;leader&gt;a&#34;</span><span>] </span><span>= </span><span>&#34;@parameter.inner&#34;</span><span>}</span><span>,
</span><span>            </span><span>swap_previous </span><span>= </span><span>{[</span><span>&#34;&lt;leader&gt;A&#34;</span><span>] </span><span>= </span><span>&#34;@parameter.inner&#34;</span><span>}
</span><span>        }</span><span>,
</span><span>        </span><span>select </span><span>= </span><span>{
</span><span>            </span><span>enable </span><span>= </span><span>true</span><span>,
</span><span>            </span><span>lookahead </span><span>= </span><span>true</span><span>,
</span><span>            </span><span>keymaps </span><span>= </span><span>{
</span><span>                [</span><span>&#34;af&#34;</span><span>] </span><span>= </span><span>&#34;@function.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;if&#34;</span><span>] </span><span>= </span><span>&#34;@function.inner&#34;</span><span>,
</span><span>                [</span><span>&#34;ac&#34;</span><span>] </span><span>= </span><span>&#34;@class.outer&#34;</span><span>,
</span><span>                [</span><span>&#34;ic&#34;</span><span>] </span><span>= </span><span>&#34;@class.inner&#34;
</span><span>            }</span><span>,
</span><span>            </span><span>selection_modes </span><span>= </span><span>{
</span><span>                [</span><span>&#34;@parameter.outer&#34;</span><span>] </span><span>= </span><span>&#34;v&#34;</span><span>, </span><span>-- charwise
</span><span>                [</span><span>&#34;@function.outer&#34;</span><span>] </span><span>= </span><span>&#34;V&#34;</span><span>, </span><span>-- linewise
</span><span>                [</span><span>&#34;@class.outer&#34;</span><span>] </span><span>= </span><span>&#34;&lt;c-v&gt;&#34; </span><span>-- blockwise
</span><span>            }
</span><span>        }
</span><span>    }</span><span>,
</span><span>    </span><span>incremental_selection </span><span>= </span><span>{
</span><span>        </span><span>enable </span><span>= </span><span>true</span><span>,
</span><span>        </span><span>keymaps </span><span>= </span><span>{
</span><span>            </span><span>init_selection </span><span>= </span><span>&#34;&lt;space&gt;i&#34;</span><span>,
</span><span>            </span><span>scope_incremental </span><span>= </span><span>&#34;&lt;space&gt;i&#34;</span><span>,
</span><span>            </span><span>node_incremental </span><span>= </span><span>&#34;&lt;space&gt;n&#34;</span><span>,
</span><span>            </span><span>node_decremental </span><span>= </span><span>&#34;&lt;space&gt;p&#34;
</span><span>        }
</span><span>    }
</span><span>})
</span></code></pre>
<p>Together, I am able to swap function parameters, select text objects, and move between text objects. More important, I can generate doc comments and use treesitter to provide context for my code.</p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/treesitter.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<h2 id="better-terminal">Better terminal</h2>
<p>Neovim has <code>:Term</code>, but I prefer a terminal that persists, can open other TUI apps, and is customizable. </p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;akinsho/toggleterm.nvim&#34;</span><span>}, </span><span>-- for smart terminal
</span><span>
</span><span>require</span><span>(</span><span>&#34;toggleterm&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>    </span><span>shade_terminals </span><span>= </span><span>false</span><span>,
</span><span>    </span><span>highlights </span><span>= </span><span>{
</span><span>        </span><span>StatusLine </span><span>= </span><span>{</span><span>guifg </span><span>= </span><span>&#34;#ffffff&#34;</span><span>, </span><span>guibg </span><span>= </span><span>&#34;#0E1018&#34;</span><span>}</span><span>,
</span><span>        </span><span>StatusLineNC </span><span>= </span><span>{</span><span>guifg </span><span>= </span><span>&#34;#ffffff&#34;</span><span>, </span><span>guibg </span><span>= </span><span>&#34;#0E1018&#34;</span><span>}
</span><span>    }
</span><span>})
</span><span>
</span><span>vim</span><span>.</span><span>opt</span><span>.</span><span>laststatus </span><span>= </span><span>3
</span></code></pre>
<p>Combined, this allows me to focus on one window and have a terminal that is always available:</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/toggleterm.png" alt="Toggleterm"/></p>
<p>In fact, I can combine this with <a href="https://github.com/jesseduffield/lazygit">LazyGit</a> to have a terminal that can run <code>lazygit</code> and <code>nvim</code> at the same time. Let’s have a look:</p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/lazygit.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>This allows me to work with git extremely efficiently. Here is the config I use:</p>
<pre data-lang="lua"><code data-lang="lua"><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;&lt;space&gt;&#34;</span><span>, </span><span>&#34;:ToggleTerm size=15&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;space&gt;t&#34;</span><span>, </span><span>&#34;:ToggleTerm size=70 direction=vertical&lt;cr&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>
</span><span>local </span><span>Terminal </span><span>= </span><span>require</span><span>(</span><span>&#34;toggleterm.terminal&#34;</span><span>)</span><span>.</span><span>Terminal
</span><span>
</span><span>local </span><span>lg_cmd </span><span>= </span><span>&#34;lazygit -w $PWD&#34;
</span><span>if </span><span>vim</span><span>.</span><span>v</span><span>.</span><span>servername </span><span>~= </span><span>nil </span><span>then
</span><span>    lg_cmd </span><span>= </span><span>string</span><span>.</span><span>format</span><span>(
</span><span>                 </span><span>&#34;NVIM_SERVER=%s lazygit -ucf ~/.config/nvim/lazygit.toml -w $PWD&#34;</span><span>,
</span><span>                 vim</span><span>.</span><span>v</span><span>.</span><span>servername)
</span><span>end
</span><span>
</span><span>vim</span><span>.</span><span>env</span><span>.</span><span>GIT_EDITOR </span><span>= </span><span>&#34;nvr -cc split --remote-wait +&#39;set bufhidden=wipe&#39;&#34;
</span><span>
</span><span>local </span><span>lazygit </span><span>= </span><span>Terminal</span><span>:</span><span>new</span><span>({
</span><span>    </span><span>cmd </span><span>= </span><span>lg_cmd</span><span>,
</span><span>    </span><span>count </span><span>= </span><span>5</span><span>,
</span><span>    </span><span>direction </span><span>= </span><span>&#34;float&#34;</span><span>,
</span><span>    </span><span>float_opts </span><span>= </span><span>{
</span><span>        </span><span>border </span><span>= </span><span>&#34;double&#34;</span><span>,
</span><span>        </span><span>width </span><span>= </span><span>function</span><span>() </span><span>return </span><span>vim</span><span>.</span><span>o</span><span>.</span><span>columns </span><span>end</span><span>,
</span><span>        </span><span>height </span><span>= </span><span>function</span><span>() </span><span>return </span><span>vim</span><span>.</span><span>o</span><span>.</span><span>lines </span><span>end
</span><span>    }</span><span>,
</span><span>    </span><span>-- function to run on opening the terminal
</span><span>    </span><span>on_open </span><span>= </span><span>function</span><span>(</span><span>term</span><span>)
</span><span>        vim</span><span>.</span><span>cmd</span><span>(</span><span>&#34;startinsert!&#34;</span><span>)
</span><span>        vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_set_keymap</span><span>(term</span><span>.</span><span>bufnr</span><span>, </span><span>&#34;n&#34;</span><span>, </span><span>&#34;q&#34;</span><span>, </span><span>&#34;&lt;cmd&gt;close&lt;CR&gt;&#34;</span><span>,
</span><span>                                    {</span><span>noremap </span><span>= </span><span>true</span><span>, </span><span>silent </span><span>= </span><span>true</span><span>})
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>function </span><span>Edit</span><span>(</span><span>fn</span><span>, </span><span>line_number</span><span>)
</span><span>    </span><span>local </span><span>edit_cmd </span><span>= </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;:e %s&#34;</span><span>, </span><span>fn)
</span><span>    </span><span>if </span><span>line_number </span><span>~= </span><span>nil </span><span>then
</span><span>        edit_cmd </span><span>= </span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;:e +%d %s&#34;</span><span>, </span><span>line_number</span><span>, </span><span>fn)
</span><span>    </span><span>end
</span><span>    vim</span><span>.</span><span>cmd</span><span>(edit_cmd)
</span><span>end
</span><span>
</span><span>function </span><span>Lazygit_toggle</span><span>() lazygit</span><span>:</span><span>toggle</span><span>() </span><span>end
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;lg&#34;</span><span>, </span><span>&#34;&lt;cmd&gt;lua Lazygit_toggle()&lt;CR&gt;&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span></code></pre>
<p>And here is the <code>lazygit.toml</code> file I use:</p>
<pre data-lang="toml"><code data-lang="toml"><span>os</span><span>:
</span><span>  </span><span>edit</span><span>: &#39;nvim --server $NVIM_SERVER&#39;
</span><span>  </span><span>editAtLine</span><span>: &#34;{{editor}} --remote-send &#39;&lt;C-\\&gt;&lt;C-n&gt;:5ToggleTerm&lt;CR&gt;:lua Edit({{filename}}, {{line}})&lt;CR&gt;&#39;&#34;
</span><span>git</span><span>:
</span><span>  </span><span>branchLogCmd</span><span>: &#34;git log --graph --color=always --abbrev-commit --decorate --date=relative --pretty=medium --oneline {{branchName}} --&#34;
</span><span>  </span><span>commitPrefixes</span><span>:
</span><span>    </span><span>my_project</span><span>:
</span><span>      </span><span>pattern</span><span>: &#34;^\\w+\\/(\\w+-\\w+).*&#34;
</span><span>      </span><span>replace</span><span>: &#39;[$1] &#39;
</span><span>  </span><span>paging</span><span>:
</span><span>    </span><span>colorArg</span><span>: always
</span><span>    </span><span>pager</span><span>: delta --dark --paging=never
</span><span>  </span><span>commit</span><span>:
</span><span>    </span><span>signOff</span><span>: false
</span><span>  </span><span>merging</span><span>:
</span><span>    </span><span>manualCommit</span><span>: false
</span><span>    </span><span>args</span><span>: &#39;&#39;
</span><span>  </span><span>log</span><span>:
</span><span>    </span><span>order</span><span>: &#39;topo-order&#39;
</span><span>    </span><span>showGraph</span><span>: &#39;when-maximised&#39;
</span><span>    </span><span>showWholeGraph</span><span>: false
</span><span>  </span><span>skipHookPrefix</span><span>: WIP
</span><span>  </span><span>autoFetch</span><span>: true
</span><span>  </span><span>autoRefresh</span><span>: true
</span><span>  </span><span>allBranchesLogCmd</span><span>: &#39;git log --graph --all --color=always --abbrev-commit --decorate --date=relative  --pretty=medium&#39;
</span><span>  </span><span>overrideGpg</span><span>: false 
</span><span>  </span><span>disableForcePushing</span><span>: false
</span><span>  </span><span>parseEmoji</span><span>: false
</span><span>  </span><span>diffContextSize</span><span>: 3 # how many lines of context are shown around a change in diffs
</span></code></pre>
<p>This all works through <code>nvr</code>, the neovim remote plugin, so make sure you have that installed.</p>
<pre data-lang="lua"><code data-lang="lua"><span>if </span><span>not </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>executable</span><span>(</span><span>&#34;nvr&#34;</span><span>) </span><span>then
</span><span>    vim</span><span>.</span><span>api</span><span>.</span><span>nvim_command</span><span>(</span><span>&#34;!pip3 install --user neovim-remote&#34;</span><span>)
</span><span>end
</span></code></pre>
<h2 id="telescope">Telescope</h2>
<p>Telescope is one of those Neovim plugins that transform how you interact with virtually everything in your development environment—from files, code, documentation, to even running tasks and previewing media. Its extensible and customizable nature makes it a powerhouse for creating a truly personalized development environment. For instance, this is telescope in action with man pages:</p>
<p><img src="https://seniormars.com/posts/neovim-workflow/man.png" alt="Telescope"/></p>
<p>Now, let’s set up telescope:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{
</span><span>    </span><span>&#34;nvim-telescope/telescope.nvim&#34;</span><span>,
</span><span>    </span><span>dependencies </span><span>= </span><span>{</span><span>&#34;nvim-lua/plenary.nvim&#34;</span><span>, </span><span>&#34;nvim-lua/popup.nvim&#34;</span><span>}
</span><span>}, {
</span><span>    </span><span>&#34;nvim-telescope/telescope-frecency.nvim&#34;</span><span>,
</span><span>    </span><span>config </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>require</span><span>(</span><span>&#34;telescope&#34;</span><span>)</span><span>.</span><span>load_extension </span><span>&#34;frecency&#34;
</span><span>    </span><span>end
</span><span>}
</span></code></pre>
<p>This sets up telescope and telescope-frecency. Frequency is a plugin that allows you to search for files based on how frequently you use them. Here is how I map telescope:</p>
<pre data-lang="lua"><code data-lang="lua"><span>-- Telescope
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;&lt;leader&gt;f&#34;</span><span>, </span><span>&#34;:Telescope git_files&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fl&#34;</span><span>, </span><span>&#34;:Telescope live_grep&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;ff&#34;</span><span>, </span><span>&#34;:Telescope frecency workspace=CWD theme=ivy layout_config={height=0.4} path_display={&#39;shorten&#39;}&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fb&#34;</span><span>, </span><span>&#34;:Telescope buffers&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fm&#34;</span><span>, </span><span>&#34;:Telescope man_pages&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;ft&#34;</span><span>, </span><span>&#34;:Telescope treesitter&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fk&#34;</span><span>, </span><span>&#34;:Telescope keymaps&lt;cr&gt;&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;fh&#34;</span><span>, </span><span>&#34;:Telescope help_tags&lt;cr&gt;&#34;</span><span>)
</span></code></pre>
<p>Finally, let’s get to the good parts. Customizing telescope:</p>
<pre data-lang="lua"><code data-lang="lua"><span>-- https://github-wiki-see.page/m/nvim-telescope/telescope.nvim/wiki/Configuration-Recipes
</span><span>local </span><span>actions </span><span>= </span><span>require</span><span>(</span><span>&#34;telescope.actions&#34;</span><span>)
</span><span>local </span><span>previewers </span><span>= </span><span>require</span><span>(</span><span>&#34;telescope.previewers&#34;</span><span>)
</span><span>local </span><span>Job </span><span>= </span><span>require</span><span>(</span><span>&#34;plenary.job&#34;</span><span>)
</span><span>local </span><span>_bad </span><span>= </span><span>{</span><span>&#34;.*%.csv&#34;</span><span>} </span><span>-- Put all filetypes that slow you down in this array
</span><span>local </span><span>bad_files </span><span>= </span><span>function</span><span>(</span><span>filepath</span><span>)
</span><span>    </span><span>for </span><span>_</span><span>, </span><span>v </span><span>in </span><span>ipairs</span><span>(_bad) </span><span>do if </span><span>filepath</span><span>:</span><span>match</span><span>(v) </span><span>then return </span><span>false </span><span>end end
</span><span>    </span><span>return </span><span>true
</span><span>end
</span><span>
</span><span>---@diagnostic disable-next-line: redefined-local
</span><span>local </span><span>new_maker </span><span>= </span><span>function</span><span>(</span><span>filepath</span><span>, </span><span>bufnr</span><span>, </span><span>opts</span><span>)
</span><span>    opts </span><span>= </span><span>opts </span><span>or </span><span>{}
</span><span>    </span><span>if </span><span>opts</span><span>.</span><span>use_ft_detect </span><span>== </span><span>nil </span><span>then </span><span>opts</span><span>.</span><span>use_ft_detect </span><span>= </span><span>true </span><span>end
</span><span>    opts</span><span>.</span><span>use_ft_detect </span><span>= </span><span>opts</span><span>.</span><span>use_ft_detect </span><span>== </span><span>false </span><span>and </span><span>false </span><span>or
</span><span>                             </span><span>bad_files</span><span>(filepath)
</span><span>    filepath </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>expand</span><span>(filepath)
</span><span>
</span><span>    Job</span><span>:</span><span>new</span><span>({
</span><span>        </span><span>command </span><span>= </span><span>&#34;file&#34;</span><span>,
</span><span>        </span><span>args </span><span>= </span><span>{</span><span>&#34;--mime-type&#34;</span><span>, </span><span>&#34;-b&#34;</span><span>, </span><span>filepath}</span><span>,
</span><span>        </span><span>on_exit </span><span>= </span><span>function</span><span>(</span><span>j</span><span>)
</span><span>            </span><span>local </span><span>mime_type </span><span>= </span><span>vim</span><span>.</span><span>split</span><span>(j</span><span>:</span><span>result</span><span>()[</span><span>1</span><span>]</span><span>, </span><span>&#34;/&#34;</span><span>)[</span><span>1</span><span>]
</span><span>            </span><span>if </span><span>mime_type </span><span>== </span><span>&#34;text&#34; </span><span>then
</span><span>                vim</span><span>.</span><span>loop</span><span>.</span><span>fs_stat</span><span>(filepath</span><span>, </span><span>function</span><span>(</span><span>_</span><span>, </span><span>stat</span><span>)
</span><span>                    </span><span>if </span><span>not </span><span>stat </span><span>then return end
</span><span>                    </span><span>if </span><span>stat</span><span>.</span><span>size </span><span>&gt; </span><span>100000 </span><span>then
</span><span>                        vim</span><span>.</span><span>schedule</span><span>(</span><span>function</span><span>()
</span><span>                            vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_set_lines</span><span>(bufnr</span><span>, </span><span>0</span><span>, </span><span>-</span><span>1</span><span>, </span><span>false</span><span>,
</span><span>                                                       {</span><span>&#34;FILE TOO LARGE&#34;</span><span>})
</span><span>                        </span><span>end</span><span>)
</span><span>                    </span><span>else
</span><span>                        previewers</span><span>.</span><span>buffer_previewer_maker</span><span>(filepath</span><span>, </span><span>bufnr</span><span>, </span><span>opts)
</span><span>                    </span><span>end
</span><span>                </span><span>end</span><span>)
</span><span>            </span><span>else
</span><span>                </span><span>-- maybe we want to write something to the buffer here
</span><span>                vim</span><span>.</span><span>schedule</span><span>(</span><span>function</span><span>()
</span><span>                    vim</span><span>.</span><span>api</span><span>.</span><span>nvim_buf_set_lines</span><span>(bufnr</span><span>, </span><span>0</span><span>, </span><span>-</span><span>1</span><span>, </span><span>false</span><span>, </span><span>{</span><span>&#34;BINARY&#34;</span><span>})
</span><span>                </span><span>end</span><span>)
</span><span>            </span><span>end
</span><span>        </span><span>end
</span><span>    })</span><span>:</span><span>sync</span><span>()
</span><span>end
</span></code></pre>
<p>Since I have some large files, I have to check if the file is too large to preview. This is what the <code>new_maker</code> function dos and applies it to the previewer:</p>
<pre data-lang="lua"><code data-lang="lua"><span>require</span><span>(</span><span>&#34;telescope&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>    </span><span>defaults </span><span>= </span><span>{
</span><span>        </span><span>file_sorter </span><span>= </span><span>require</span><span>(</span><span>&#34;telescope.sorters&#34;</span><span>)</span><span>.</span><span>get_fzy_sorter</span><span>,
</span><span>        </span><span>buffer_previewer_maker </span><span>= </span><span>new_maker</span><span>,
</span><span>        </span><span>layout_config </span><span>= </span><span>{</span><span>prompt_position </span><span>= </span><span>&#34;bottom&#34;</span><span>}</span><span>,
</span><span>        </span><span>mappings </span><span>= </span><span>{
</span><span>            </span><span>i </span><span>= </span><span>{
</span><span>                [</span><span>&#34;&lt;Esc&gt;&#34;</span><span>] </span><span>= </span><span>actions</span><span>.</span><span>close</span><span>,
</span><span>                [</span><span>&#34;&lt;C-q&gt;&#34;</span><span>] </span><span>= </span><span>actions</span><span>.</span><span>send_to_qflist</span><span>,
</span><span>                [</span><span>&#34;&lt;C-k&gt;&#34;</span><span>] </span><span>= </span><span>actions</span><span>.</span><span>move_selection_previous</span><span>,
</span><span>                [</span><span>&#34;&lt;C-j&gt;&#34;</span><span>] </span><span>= </span><span>actions</span><span>.</span><span>move_selection_next</span><span>,
</span><span>                [</span><span>&#34;&lt;C-d&gt;&#34;</span><span>] </span><span>= </span><span>actions</span><span>.</span><span>delete_buffer </span><span>+ </span><span>actions</span><span>.</span><span>move_to_top
</span><span>            }
</span><span>        }
</span><span>    }</span><span>,
</span><span>    </span><span>pickers </span><span>= </span><span>{
</span><span>        </span><span>find_files </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>git_files </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>live_grep </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>buffers </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>keymaps </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>file_browser </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>treesitter </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}}</span><span>,
</span><span>        </span><span>help_tags </span><span>= </span><span>{</span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>, </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>5</span><span>}}</span><span>,
</span><span>        </span><span>man_pages </span><span>= </span><span>{
</span><span>            </span><span>sections </span><span>= </span><span>{</span><span>&#34;1&#34;</span><span>, </span><span>&#34;2&#34;</span><span>, </span><span>&#34;3&#34;</span><span>}</span><span>,
</span><span>            </span><span>theme </span><span>= </span><span>&#34;ivy&#34;</span><span>,
</span><span>            </span><span>layout_config </span><span>= </span><span>{</span><span>height </span><span>= </span><span>0</span><span>.</span><span>4</span><span>}
</span><span>        }
</span><span>    }</span><span>,
</span><span>    </span><span>extensions </span><span>= </span><span>{
</span><span>        </span><span>frecency </span><span>= </span><span>{
</span><span>            </span><span>auto_validate </span><span>= </span><span>false</span><span>,
</span><span>            </span><span>matcher </span><span>= </span><span>&#34;fuzzy&#34;</span><span>,
</span><span>            </span><span>path_display </span><span>= </span><span>{</span><span>&#34;shorten&#34;</span><span>}
</span><span>        }
</span><span>    }
</span><span>})
</span></code></pre>
<p>Together, I can move around my codebase with ease and preview files without slowing down my editor.</p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/tele.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>Note: I wish I could set a default theme for telescope, but I can’t. I have to set it for each picker.</p>
<h2 id="completion">Completion</h2>
<p>Just a fair warning, I still use <code>coc.nvim</code>, but it works well for me!</p>
<h3 id="copilot">Copilot</h3>
<p>First, I use copilot to complete test cases and boilercode – I don’t trust it for logic, but it has its uses. Specifically, I use the lua version as I find it more configurable:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{
</span><span>    </span><span>&#34;zbirenbaum/copilot.lua&#34;</span><span>, </span><span>-- Copilot but lua
</span><span>    </span><span>cmd </span><span>= </span><span>&#34;Copilot&#34;</span><span>,
</span><span>    </span><span>event </span><span>= </span><span>&#34;InsertEnter&#34;
</span><span>}
</span><span>
</span><span>require</span><span>(</span><span>&#34;copilot&#34;</span><span>)</span><span>.</span><span>setup</span><span>({
</span><span>    </span><span>panel </span><span>= </span><span>{
</span><span>        </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>        </span><span>auto_refresh </span><span>= </span><span>false</span><span>,
</span><span>        </span><span>keymap </span><span>= </span><span>{
</span><span>            </span><span>jump_prev </span><span>= </span><span>&#34;[[&#34;</span><span>,
</span><span>            </span><span>jump_next </span><span>= </span><span>&#34;]]&#34;</span><span>,
</span><span>            </span><span>accept </span><span>= </span><span>&#34;&lt;CR&gt;&#34;</span><span>,
</span><span>            </span><span>refresh </span><span>= </span><span>&#34;gr&#34;</span><span>,
</span><span>            </span><span>open </span><span>= </span><span>&#34;&lt;leader&gt;ck&#34;
</span><span>        }</span><span>,
</span><span>        </span><span>layout </span><span>= </span><span>{ </span><span>position </span><span>= </span><span>&#34;bottom&#34;</span><span>, </span><span>ratio </span><span>= </span><span>0</span><span>.</span><span>4 </span><span>}
</span><span>    }</span><span>,
</span><span>    </span><span>suggestion </span><span>= </span><span>{
</span><span>        </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>        </span><span>auto_trigger </span><span>= </span><span>true</span><span>,
</span><span>        </span><span>debounce </span><span>= </span><span>75</span><span>,
</span><span>        </span><span>keymap </span><span>= </span><span>{
</span><span>            </span><span>accept </span><span>= </span><span>&#34;&lt;C-v&gt;&#34;</span><span>,
</span><span>            </span><span>accept_word </span><span>= </span><span>false</span><span>,
</span><span>            </span><span>accept_line </span><span>= </span><span>&#34;&lt;C-q&gt;&#34;</span><span>,
</span><span>            </span><span>next </span><span>= </span><span>false</span><span>,
</span><span>            </span><span>prev </span><span>= </span><span>false</span><span>,
</span><span>            </span><span>dismiss </span><span>= </span><span>&#34;&lt;C-]&gt;&#34;
</span><span>        }
</span><span>    }</span><span>,
</span><span>    </span><span>copilot_node_command </span><span>= </span><span>&#34;node&#34;</span><span>,
</span><span>})
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;&lt;leader&gt;ck&#34;</span><span>, </span><span>&#39;&lt;cmd&gt;lua require(&#34;copilot.suggestion&#34;).toggle_auto_trigger()&lt;cr&gt;&#39;</span><span>)
</span></code></pre>
<p>This allows me to use copilot to generate boilerplate code and test cases. Moreover, I can toggle the auto trigger with <code>&lt;leader&gt;ck</code>. This allows me to use copilot when I need it and not when I don’t.</p>
<h3 id="coc-nvim">Coc.nvim</h3>
<p>I use coc.nvim for completion, but I have customized almost every single thing:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;neoclide/coc.nvim&#34;</span><span>, </span><span>branch </span><span>= </span><span>&#34;release&#34;</span><span>, </span><span>build </span><span>= </span><span>&#34;:CocUpdate&#34;</span><span>}, </span><span>-- auto complete
</span><span>{</span><span>&#34;honza/vim-snippets&#34;</span><span>}, </span><span>-- Snippets are separated from the engine so coc can use
</span></code></pre>
<p>This sets up coc.nvim and vim-snippets. Here is how I set up coc.nvim:</p>
<pre data-lang="lua"><code data-lang="lua"><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_user_command</span><span>(</span><span>&#34;Format&#34;</span><span>, </span><span>&#34;call CocAction(&#39;format&#39;)&#34;</span><span>, </span><span>{})
</span><span>
</span><span>function </span><span>_G</span><span>.</span><span>check_back_space</span><span>()
</span><span>    </span><span>local </span><span>col </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_win_get_cursor</span><span>(</span><span>0</span><span>)[</span><span>2</span><span>]
</span><span>    </span><span>local </span><span>has_backspace </span><span>= </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_get_current_line</span><span>()</span><span>:</span><span>sub</span><span>(col</span><span>, </span><span>col)</span><span>:</span><span>match</span><span>(
</span><span>                              </span><span>&#34;%s&#34;</span><span>) </span><span>~= </span><span>nil
</span><span>    </span><span>return </span><span>col </span><span>== </span><span>0 </span><span>or </span><span>has_backspace
</span><span>end
</span><span>
</span><span>
</span><span>local </span><span>opts </span><span>= </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>, </span><span>noremap </span><span>= </span><span>true</span><span>, </span><span>expr </span><span>= </span><span>true</span><span>}
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_set_keymap</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;&lt;TAB&gt;&#34;</span><span>,
</span><span>                        </span><span>&#39;coc#pum#visible() ? coc#pum#next(1) : v:lua.check_back_space() ? &#34;&lt;TAB&gt;&#34; : coc#refresh()&#39;</span><span>,
</span><span>                        opts)
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_set_keymap</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;&lt;S-TAB&gt;&#34;</span><span>,
</span><span>                        </span><span>[[coc#pum#visible() ? coc#pum#prev(1) : &#34;\&lt;C-h&gt;&#34;]]</span><span>, </span><span>opts)
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_set_keymap</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;&lt;cr&gt;&#34;</span><span>,
</span><span>                        </span><span>[[coc#pum#visible() ? coc#pum#confirm() : &#34;\&lt;C-g&gt;u\&lt;CR&gt;\&lt;c-r&gt;=coc#on_enter()\&lt;CR&gt;&#34;]]</span><span>,
</span><span>                        opts)
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;&lt;c-j&gt;&#34;</span><span>, </span><span>&#34;&lt;Plug&gt;(coc-snippets-expand-jump)&#34;</span><span>)
</span><span>keyset</span><span>(</span><span>&#34;i&#34;</span><span>, </span><span>&#34;&lt;c-space&gt;&#34;</span><span>, </span><span>&#34;coc#refresh()&#34;</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>, </span><span>expr </span><span>= </span><span>true</span><span>})
</span><span>
</span><span>--- more keymaps 
</span><span>
</span><span>keyset</span><span>(</span><span>&#34;n&#34;</span><span>, </span><span>&#34;K&#34;</span><span>, </span><span>function</span><span>()
</span><span>    </span><span>local </span><span>cw </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>expand</span><span>(</span><span>&#34;&lt;cword&gt;&#34;</span><span>)
</span><span>    </span><span>if </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>index</span><span>({</span><span>&#34;vim&#34;</span><span>, </span><span>&#34;help&#34;</span><span>}</span><span>, </span><span>vim</span><span>.</span><span>bo</span><span>.</span><span>filetype) </span><span>&gt;= </span><span>0 </span><span>then
</span><span>        vim</span><span>.</span><span>api</span><span>.</span><span>nvim_command</span><span>(</span><span>&#34;h &#34; </span><span>.. </span><span>cw)
</span><span>    </span><span>elseif </span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_eval</span><span>(</span><span>&#34;coc#rpc#ready()&#34;</span><span>) </span><span>then
</span><span>        vim</span><span>.</span><span>fn</span><span>.</span><span>CocActionAsync</span><span>(</span><span>&#34;doHover&#34;</span><span>)
</span><span>    </span><span>else
</span><span>        vim</span><span>.</span><span>api</span><span>.</span><span>nvim_command</span><span>(</span><span>string</span><span>.</span><span>format</span><span>(</span><span>&#34;!%s %s&#34;</span><span>, </span><span>vim</span><span>.</span><span>o</span><span>.</span><span>keywordprg</span><span>, </span><span>cw))
</span><span>    </span><span>end
</span><span>end</span><span>, </span><span>{</span><span>silent </span><span>= </span><span>true</span><span>})
</span></code></pre>
<p>I know that nvim-lsp is the new hotness, but coc.nvim just has everything I need. I can use it to format my code, check diagnostics, and use snippets. Moreover, I can use it to check the documentation of a function or keyword. I can also use it to check the definition of a function or keyword. Finally, I can use it to check the references of a function or keyword. I can do all of this with a single plugin. </p>
<p>Moreover, I am able to combine it with the quickfix list:</p>
<pre data-lang="lua"><code data-lang="lua"><span>function </span><span>_G</span><span>.</span><span>diagnostic</span><span>()
</span><span>    vim</span><span>.</span><span>fn</span><span>.</span><span>CocActionAsync</span><span>(</span><span>&#34;diagnosticList&#34;</span><span>, </span><span>&#34;&#34;</span><span>, </span><span>function</span><span>(</span><span>err</span><span>, </span><span>res</span><span>)
</span><span>        </span><span>if </span><span>err </span><span>== </span><span>vim</span><span>.</span><span>NIL </span><span>then
</span><span>            </span><span>if </span><span>vim</span><span>.</span><span>tbl_isempty</span><span>(res) </span><span>then return end
</span><span>            </span><span>local </span><span>items </span><span>= </span><span>{}
</span><span>            </span><span>for </span><span>_</span><span>, </span><span>d </span><span>in </span><span>ipairs</span><span>(res) </span><span>do
</span><span>                </span><span>local </span><span>text </span><span>= </span><span>&#34;&#34;
</span><span>                </span><span>local </span><span>type </span><span>= </span><span>d</span><span>.</span><span>severity
</span><span>                </span><span>local </span><span>msg </span><span>= </span><span>d</span><span>.</span><span>message</span><span>:</span><span>match</span><span>(</span><span>&#34;([^</span><span>\n</span><span>]+)</span><span>\n</span><span>*&#34;</span><span>)
</span><span>                </span><span>local </span><span>code </span><span>= </span><span>d</span><span>.</span><span>code
</span><span>                </span><span>if </span><span>code </span><span>== </span><span>vim</span><span>.</span><span>NIL </span><span>or </span><span>code </span><span>== </span><span>nil </span><span>or </span><span>code </span><span>== </span><span>&#34;NIL&#34; </span><span>then
</span><span>                    text </span><span>= </span><span>(</span><span>&#34;[%s] %s&#34;</span><span>)</span><span>:</span><span>format</span><span>(</span><span>type</span><span>, </span><span>msg)
</span><span>                </span><span>else
</span><span>                    text </span><span>= </span><span>(</span><span>&#34;[%s|%s] %s&#34;</span><span>)</span><span>:</span><span>format</span><span>(</span><span>type</span><span>, </span><span>code</span><span>, </span><span>msg)
</span><span>                </span><span>end
</span><span>
</span><span>                </span><span>local </span><span>item </span><span>= </span><span>{
</span><span>                    </span><span>filename </span><span>= </span><span>d</span><span>.</span><span>file</span><span>,
</span><span>                    </span><span>lnum </span><span>= </span><span>d</span><span>.</span><span>lnum</span><span>,
</span><span>                    </span><span>end_lnum </span><span>= </span><span>d</span><span>.</span><span>end_lnum</span><span>,
</span><span>                    </span><span>col </span><span>= </span><span>d</span><span>.</span><span>col</span><span>,
</span><span>                    </span><span>end_col </span><span>= </span><span>d</span><span>.</span><span>end_col</span><span>,
</span><span>                    </span><span>text </span><span>= </span><span>text
</span><span>                }
</span><span>                </span><span>table</span><span>.</span><span>insert</span><span>(items</span><span>, </span><span>item)
</span><span>            </span><span>end
</span><span>            vim</span><span>.</span><span>fn</span><span>.</span><span>setqflist</span><span>({}</span><span>, </span><span>&#34; &#34;</span><span>,
</span><span>                             {</span><span>title </span><span>= </span><span>&#34;CocDiagnosticList&#34;</span><span>, </span><span>items </span><span>= </span><span>items})
</span><span>            vim</span><span>.</span><span>cmd</span><span>(</span><span>&#34;bo cope&#34;</span><span>)
</span><span>        </span><span>end
</span><span>    </span><span>end</span><span>)
</span><span>end
</span><span>
</span><span>vim</span><span>.</span><span>api</span><span>.</span><span>nvim_create_augroup</span><span>(</span><span>&#34;CocGroup&#34;</span><span>, </span><span>{})
</span><span>
</span><span>autocmd</span><span>(</span><span>&#34;User&#34;</span><span>, </span><span>{
</span><span>    </span><span>group </span><span>= </span><span>&#34;CocGroup&#34;</span><span>,
</span><span>    </span><span>pattern </span><span>= </span><span>&#34;CocLocationsChange&#34;</span><span>,
</span><span>    </span><span>desc </span><span>= </span><span>&#34;Update location list on locations change&#34;</span><span>,
</span><span>    </span><span>callback </span><span>= </span><span>function</span><span>()
</span><span>        </span><span>local </span><span>locs </span><span>= </span><span>vim</span><span>.</span><span>g</span><span>.</span><span>coc_jump_locations
</span><span>        vim</span><span>.</span><span>fn</span><span>.</span><span>setloclist</span><span>(</span><span>0</span><span>, </span><span>{}</span><span>, </span><span>&#34; &#34;</span><span>, </span><span>{</span><span>title </span><span>= </span><span>&#34;CocLocationList&#34;</span><span>, </span><span>items </span><span>= </span><span>locs})
</span><span>        </span><span>local </span><span>winid </span><span>= </span><span>vim</span><span>.</span><span>fn</span><span>.</span><span>getloclist</span><span>(</span><span>0</span><span>, </span><span>{</span><span>winid </span><span>= </span><span>0</span><span>})</span><span>.</span><span>winid
</span><span>        </span><span>if </span><span>winid </span><span>== </span><span>0 </span><span>then
</span><span>            vim</span><span>.</span><span>cmd</span><span>(</span><span>&#34;bel lw&#34;</span><span>)
</span><span>        </span><span>else
</span><span>            vim</span><span>.</span><span>api</span><span>.</span><span>nvim_set_current_win</span><span>(winid)
</span><span>        </span><span>end
</span><span>    </span><span>end
</span><span>})
</span><span>
</span><span>autocmd</span><span>(</span><span>&#34;User&#34;</span><span>, </span><span>{
</span><span>    </span><span>group </span><span>= </span><span>&#34;CocGroup&#34;</span><span>,
</span><span>    </span><span>pattern </span><span>= </span><span>&#34;CocJumpPlaceholder&#34;</span><span>,
</span><span>    </span><span>command </span><span>= </span><span>&#34;call CocActionAsync(&#39;showSignatureHelp&#39;)&#34;</span><span>,
</span><span>    </span><span>desc </span><span>= </span><span>&#34;Update signature help on jump placeholder&#34;
</span><span>})
</span><span>
</span><span>autocmd</span><span>(</span><span>&#34;CursorHold&#34;</span><span>, </span><span>{
</span><span>    </span><span>group </span><span>= </span><span>&#34;CocGroup&#34;</span><span>,
</span><span>    </span><span>command </span><span>= </span><span>&#34;silent call CocActionAsync(&#39;highlight&#39;)&#34;</span><span>,
</span><span>    </span><span>desc </span><span>= </span><span>&#34;Highlight symbol under cursor on CursorHold&#34;
</span><span>})
</span></code></pre>
<p>For instance, Coc makes it easy to use random LSPs like ltex, which I use for grammar checking in LaTeX:</p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/coc.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>
<p>Finally, here is my config:</p>
<pre data-lang="json"><code data-lang="json"><span>{
</span><span>  </span><span>&#34;suggest.noselect&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;coc.preferences.jumpCommand&#34;</span><span>: </span><span>&#34;drop&#34;</span><span>,
</span><span>  </span><span>&#34;coc.preferences.messageLevel&#34;</span><span>: </span><span>&#34;warning&#34;</span><span>,
</span><span>  </span><span>&#34;coc.preferences.maxFileSize&#34;</span><span>: </span><span>&#34;1MB&#34;</span><span>,
</span><span>  </span><span>&#34;coc.preferences.enableMarkdown&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;ltex.language&#34;</span><span>: </span><span>&#34;en-US&#34;</span><span>,
</span><span>  </span><span>&#34;ltex.additionalRules.motherTongue&#34;</span><span>: </span><span>&#34;en-US&#34;</span><span>,
</span><span>  </span><span>&#34;ltex.completionEnabled&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;ltex.sentenceCacheSize&#34;</span><span>: </span><span>6000</span><span>,
</span><span>  </span><span>&#34;ltex.languageToolHttpServerUri&#34;</span><span>: </span><span>&#34;https://api.languagetoolplus.com&#34;</span><span>,
</span><span>  </span><span>&#34;ltex.checkFrequency&#34;</span><span>: </span><span>&#34;save&#34;</span><span>,
</span><span>  </span><span>&#34;ltex.enabled&#34;</span><span>: </span><span>[
</span><span>    </span><span>&#34;bibtex&#34;</span><span>,
</span><span>    </span><span>&#34;context&#34;</span><span>,
</span><span>    </span><span>&#34;context.tex&#34;</span><span>,
</span><span>    </span><span>&#34;html&#34;</span><span>,
</span><span>    </span><span>&#34;latex&#34;</span><span>,
</span><span>    </span><span>&#34;markdown&#34;</span><span>,
</span><span>    </span><span>&#34;org&#34;</span><span>,
</span><span>    </span><span>&#34;restructuredtext&#34;</span><span>,
</span><span>    </span><span>&#34;rsweave&#34;</span><span>,
</span><span>    </span><span>&#34;mail&#34;</span><span>,
</span><span>    </span><span>&#34;norg&#34;</span><span>,
</span><span>    </span><span>&#34;help&#34;</span><span>,
</span><span>  ]</span><span>,
</span><span>  </span><span>&#34;ltex.diagnosticSeverity&#34;</span><span>: </span><span>{
</span><span>    </span><span>&#34;CONFUSED_WORDS&#34;</span><span>: </span><span>&#34;warning&#34;</span><span>,
</span><span>    </span><span>&#34;UPPERCASE_SENTENCE_START&#34;</span><span>: </span><span>&#34;warning&#34;</span><span>,
</span><span>    </span><span>&#34;DATE_WEEKDAY&#34;</span><span>: </span><span>&#34;warning&#34;</span><span>,
</span><span>    </span><span>&#34;MORFOLOGIK_RULE_EN_US&#34;</span><span>: </span><span>&#34;error&#34;</span><span>,
</span><span>    </span><span>&#34;EN_CONTRACTION_SPELLING&#34;</span><span>: </span><span>&#34;error&#34;</span><span>,
</span><span>    </span><span>&#34;EN_A_VS_AN&#34;</span><span>: </span><span>&#34;error&#34;</span><span>,
</span><span>    </span><span>&#34;IN_A_X_MANNER&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;PASSIVE_VOICE&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;EN_SPECIFIC_CASE&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;APOS_AR&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;DOUBLE_HYPHEN&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;AI_EN_LECTOR_MISSING_PUNCTUATION_COMMA&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;SENT_START_CONJUNCTIVE_LINKING_ADVERB_COMMA&#34;</span><span>: </span><span>&#34;hint&#34;</span><span>,
</span><span>    </span><span>&#34;default&#34;</span><span>: </span><span>&#34;information&#34;
</span><span>  }</span><span>,
</span><span>  </span><span>&#34;ltex.configurationTarget&#34;</span><span>: </span><span>{
</span><span>    </span><span>&#34;dictionary&#34;</span><span>: </span><span>&#34;userExternalFile&#34;</span><span>,
</span><span>    </span><span>&#34;disabledRules&#34;</span><span>: </span><span>&#34;userExternalFile&#34;</span><span>,
</span><span>    </span><span>&#34;hiddenFalsePositives&#34;</span><span>: </span><span>&#34;userExternalFile&#34;</span><span>,
</span><span>  }</span><span>,
</span><span>  </span><span>&#34;ltex.additionalRules.enablePickyRules&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;diagnostic.hintSign&#34;</span><span>: </span><span>&#34;✹&#34;</span><span>,
</span><span>  </span><span>&#34;diagnostic.errorSign&#34;</span><span>: </span><span>&#34;✘&#34;</span><span>,
</span><span>  </span><span>&#34;diagnostic.warningSign&#34;</span><span>: </span><span>&#34;&#34;</span><span>,
</span><span>  </span><span>&#34;diagnostic.infoSign&#34;</span><span>: </span><span>&#34;&#34;</span><span>,
</span><span>  </span><span>&#34;codeLens.enable&#34;</span><span>: </span><span>false</span><span>,
</span><span>  </span><span>&#34;codeLens.separator&#34;</span><span>: </span><span>&#34; &#34;</span><span>,
</span><span>  </span><span>&#34;codeLens.subseparator&#34;</span><span>: </span><span>&#34; | &#34;</span><span>,
</span><span>  </span><span>&#34;notification.disabledProgressSources&#34;</span><span>: </span><span>[</span><span>&#34;*&#34;</span><span>]</span><span>,
</span><span>  </span><span>&#34;diagnostic.virtualText&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;diagnostic.virtualTextCurrentLineOnly&#34;</span><span>: </span><span>false</span><span>,
</span><span>  </span><span>&#34;diagnostic.virtualTextLineSeparator&#34;</span><span>: </span><span>&#34;. &#34;</span><span>,
</span><span>  </span><span>&#34;diagnostic.virtualTextPrefix&#34;</span><span>: </span><span>&#34; &#34;</span><span>,
</span><span>  </span><span>&#34;diagnostic.checkCurrentLine&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;diagnostic.messageTarget&#34;</span><span>: </span><span>&#34;float&#34;</span><span>,
</span><span>  </span><span>&#34;semanticTokens.enable&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;semanticTokens.highlightPriority&#34;</span><span>: </span><span>4096</span><span>,
</span><span>  </span><span>&#34;sumneko-lua.enableNvimLuaDev&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;Lua.semantic.enable&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;Lua.hint.enable&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;Lua.hint.arrayIndex&#34;</span><span>: </span><span>&#34;Disable&#34;</span><span>,
</span><span>  </span><span>&#34;Lua.hint.paramName&#34;</span><span>: </span><span>&#34;Literal&#34;</span><span>,
</span><span>  </span><span>&#34;Lua.hint.setType&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;coc.source.word.filetypes&#34;</span><span>: </span><span>[
</span><span>    </span><span>&#34;norg&#34;</span><span>,
</span><span>    </span><span>&#34;text&#34;</span><span>,
</span><span>    </span><span>&#34;mail&#34;
</span><span>  ]</span><span>,
</span><span>  </span><span>&#34;suggest.snippetIndicator&#34;</span><span>: </span><span>&#34; </span><span>\ue796</span><span>&#34;</span><span>,
</span><span>  </span><span>&#34;suggest.completionItemKindLabels&#34;</span><span>: </span><span>{
</span><span>    </span><span>&#34;keyword&#34;</span><span>: </span><span>&#34;</span><span>\uf1de</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;variable&#34;</span><span>: </span><span>&#34;</span><span>\ue79b</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;value&#34;</span><span>: </span><span>&#34;</span><span>\uf89f</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;operator&#34;</span><span>: </span><span>&#34;</span><span>\u03a8</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;function&#34;</span><span>: </span><span>&#34;</span><span>\u0192</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;reference&#34;</span><span>: </span><span>&#34;</span><span>\ufa46</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;constant&#34;</span><span>: </span><span>&#34;</span><span>\uf8fe</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;method&#34;</span><span>: </span><span>&#34;</span><span>\uf09a</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;struct&#34;</span><span>: </span><span>&#34;</span><span>\ufb44</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;class&#34;</span><span>: </span><span>&#34;</span><span>\uf0e8</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;interface&#34;</span><span>: </span><span>&#34;</span><span>\uf417</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;text&#34;</span><span>: </span><span>&#34;</span><span>\ue612</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;enum&#34;</span><span>: </span><span>&#34;</span><span>\uf435</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;enumMember&#34;</span><span>: </span><span>&#34;</span><span>\uf02b</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;module&#34;</span><span>: </span><span>&#34;</span><span>\uf40d</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;color&#34;</span><span>: </span><span>&#34;</span><span>\ue22b</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;property&#34;</span><span>: </span><span>&#34;</span><span>\ue624</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;field&#34;</span><span>: </span><span>&#34;</span><span>\uf9be</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;unit&#34;</span><span>: </span><span>&#34;</span><span>\uf475</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;event&#34;</span><span>: </span><span>&#34;</span><span>\ufacd</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;file&#34;</span><span>: </span><span>&#34;</span><span>\uf723</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;folder&#34;</span><span>: </span><span>&#34;</span><span>\uf114</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;snippet&#34;</span><span>: </span><span>&#34;</span><span>\ue60b</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;typeParameter&#34;</span><span>: </span><span>&#34;</span><span>\uf728</span><span>&#34;</span><span>,
</span><span>    </span><span>&#34;default&#34;</span><span>: </span><span>&#34;</span><span>\uf29c</span><span>&#34;
</span><span>  }</span><span>,
</span><span>  </span><span>&#34;snippets.ultisnips.enable&#34;</span><span>: </span><span>true</span><span>,
</span><span>  </span><span>&#34;snippets.ultisnips.pythonPrompt&#34;</span><span>: </span><span>false</span><span>,
</span><span>}
</span></code></pre>
<h2 id="latex">Latex</h2>
<p>Finally, as a Math major, I use LaTeX a lot. I use the following plugins to make my LaTeX experience better:</p>
<pre data-lang="lua"><code data-lang="lua"><span>{</span><span>&#34;lervag/vimtex&#34;</span><span>}, </span><span>-- LaTeX
</span><span>-- Vimtex config
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>vimtex_quickfix_mode </span><span>= </span><span>2
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>vimtex_compiler_latexmk_engines </span><span>= </span><span>{[</span><span>&#34;_&#34;</span><span>] </span><span>= </span><span>&#34;-lualatex -shell-escape&#34;</span><span>}
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>vimtex_indent_on_ampersands </span><span>= </span><span>0
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>vimtex_view_method </span><span>= </span><span>&#39;sioyek&#39;
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>matchup_override_vimtex </span><span>= </span><span>1
</span><span>
</span><span>-- Other settings
</span><span>vim</span><span>.</span><span>g</span><span>.</span><span>latexindent_opt </span><span>= </span><span>&#34;-m&#34; </span><span>-- for neoformat, I use latexindent
</span></code></pre>
<p>Together with <code>sioyek</code>, I can compile my LaTeX documents and view them in a pdf viewer automatically. Moreover, I can use <code>latexindent</code> to format my LaTeX documents.</p>
<video autoplay="" loop="" muted="" playsinline="">
  <source src="https://seniormars.com/posts/neovim-workflow/latex.mp4" type="video/mp4"/>
  Your browser doesn&#39;t support the video tag, which I use in place of .gifs, and/or the video formats in use here – sorry!
</video>

<p>I know that was a lot, but I hope you learned something new. I have been using Neovim for a while now, and I have to say that it has been a game changer. I have been able to customize my text editor to fit my needs and make me more productive. I hope that you can do the same.</p>
<p>Please let me know if you have any questions or comments. I would love to hear from you.</p>
<p>SeniorMars</p>

        </section>
    </article>
</div></div>
  </body>
</html>
