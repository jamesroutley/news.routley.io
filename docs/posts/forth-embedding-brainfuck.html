<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jack.leightcap.com/forth-brainfuck.html">Original</a>
    <h1>Forth Embedding Brainfuck</h1>
    
    <div id="readability-page-1" class="page"><div>

<p>It is surprising to see one programming language shaped out of another.
Languages with very direct access to syntax, like Forth, allow definition of the constructs of another <i>embedded language</i> within themselves.
Brainfuck, consisting only of single-character tokens, can be baked into Forth directly: <code>[</code>, <code>&lt;</code>, or <code>+</code> are Forth words defined like all others.
With <code>POSTPONE</code> and <code>IMMEDIATE</code> meta-programming, Brainfuck loops become Forth-native <code>WHILE...REPEAT</code> loops.
Model Brainfuck memory with a <code>TAPE</code> and <code>HEAD</code>, then writing an emulator is effectively writing one Forth word per Brainfuck token.
</p><p>The following is a complete Brainfuck emulator:
</p><div><pre><code>VARIABLE TAPE 1000 CELLS ALLOT
TAPE 1000 0 FILL

VARIABLE HEAD
TAPE HEAD !

: PEEK HEAD @ @ ;
: POKE HEAD @ ! ;

: &lt; HEAD @ 1 CELLS - HEAD ! ;
: &gt; HEAD @ 1 CELLS + HEAD ! ;
: + PEEK 1+ POKE ;
: - PEEK 1- POKE ;
: . PEEK . ;
: , KEY POKE ;
: [ POSTPONE BEGIN POSTPONE PEEK POSTPONE WHILE ; IMMEDIATE
: ] POSTPONE REPEAT ; IMMEDIATE

\ example programs:
: echo , [ . , ] ;
: add , &gt; , [ &lt; + &gt; - ]
</code></pre></div>
<center><a href="https://www.ribbonfarm.com/2024/10/10/ribbonfarm-is-retiring/forth-brainfuck.html">#</a></center>
    </div></div>
  </body>
</html>
