<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bytes.zone/micro/crdts-for-tinyping/">Original</a>
    <h1>CRDTs for tinyping</h1>
    
    <div id="readability-page-1" class="page"><article><p><em>Brian Hicks, October 7, 2024</em></p><p>When I&#39;ve been thinking about sync for tinyping, I&#39;ve been using off-the-shelf CRDTs (mostly Automerge.) But thinking about it from very simple principles, I don&#39;t need all that. Tinyping can be broken down to:</p><ol><li>A log of timestamps</li><li>Tags and other data for those timestamps</li><li>A few settings (like the lambda value for calculating the offsets.)</li></ol><p>I think we can sync that data with:</p><ol><li>A grow-only set for the timestamps (you never delete them, and they&#39;re implicitly sortable)</li><li>Last-write-wins registers for timestamps and extra data.</li><li>Last-write-wins registers for settings</li></ol><span id="continue-reading"></span><p>That depends on being able to reliably say what the &#34;last&#34; write is, of course. I think a <a href="https://jaredforsyth.com/posts/hybrid-logical-clocks/">hybrid logical clock</a> might be the right approach here.</p><p>The only thing I&#39;m not really sure about is how to do syncing. Do we keep the latest clock of each node that we&#39;ve seen on each device and then ask each other for operations newer than that? That seems like it&#39;d be pretty straightforward, but I don&#39;t know if there are things I&#39;m not considering here.</p><p>Anyway, I&#39;m going to give it a try and report back!</p></article></div>
  </body>
</html>
