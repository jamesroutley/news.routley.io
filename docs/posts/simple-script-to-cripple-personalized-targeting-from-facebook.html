<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gist.github.com/HyperCrowd/edc9b461ec23cf2454ea4d1e910fd1c6">Original</a>
    <h1>Show HN: Simple script to cripple personalized targeting from Facebook</h1>
    
    <div id="readability-page-1" class="page"><div>
  <div id="file-cutofffacebook-md">
      
      <div id="file-cutofffacebook-md-readme">
    <article itemprop="text">
<p dir="auto">Facebook works with advertisers to target you.  These instructions are one of the many ways to begin crippling that relationship.  When AI targeting is crippled, your psychosecurity improves :)</p>
<ol dir="auto">
<li>On your desktop machine, goto <a href="https://accountscenter.facebook.com/ads/audience_based_advertising" rel="nofollow">https://accountscenter.facebook.com/ads/audience_based_advertising</a></li>
<li>Maximize the browser window</li>
<li>Press F12 and click on the Console tab</li>
<li>Select the code below, copy it, paste it upon the Console line (The area next to the &gt; character in the Console window), and press enter:</li>
</ol>
<div dir="auto"><pre><span>(</span><span>async</span> <span>function</span><span>(</span><span>)</span> <span>{</span>
  <span>const</span> <span>wait</span> <span>=</span> <span>async</span> <span>(</span><span>watcher</span><span>,</span> <span>timeout</span> <span>=</span> <span>10000</span><span>,</span> <span>interval</span> <span>=</span> <span>100</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>const</span> <span>startTime</span> <span>=</span> <span>Date</span><span>.</span><span>now</span><span>(</span><span>)</span>

    <span>return</span> <span>new</span> <span>Promise</span><span>(</span><span>(</span><span>resolve</span><span>,</span> <span>reject</span><span>)</span> <span>=&gt;</span> <span>{</span>
      <span>const</span> <span>checkForElement</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
        <span>const</span> <span>elements</span> <span>=</span> <span>watcher</span><span>(</span><span>)</span>

        <span>if</span> <span>(</span><span>elements</span><span>.</span><span>length</span> <span>&gt;</span> <span>0</span><span>)</span> <span>{</span>
          <span>clearInterval</span><span>(</span><span>intervalId</span><span>)</span>
          <span>resolve</span><span>(</span><span>elements</span><span>)</span><span>;</span>
        <span>}</span> <span>else</span> <span>if</span> <span>(</span><span>Date</span><span>.</span><span>now</span><span>(</span><span>)</span> <span>-</span> <span>startTime</span> <span>&gt;</span> <span>timeout</span><span>)</span> <span>{</span>
          <span>clearInterval</span><span>(</span><span>intervalId</span><span>)</span>
          <span>reject</span><span>(</span><span>new</span> <span>Error</span><span>(</span><span>`Timeout: Elements not found`</span><span>)</span><span>)</span>
        <span>}</span>
      <span>}</span>

      <span>const</span> <span>intervalId</span> <span>=</span> <span>setInterval</span><span>(</span><span>checkForElement</span><span>,</span> <span>interval</span><span>)</span>

      <span>checkForElement</span><span>(</span><span>)</span>
    <span>}</span><span>)</span>
  <span>}</span>

  <span>const</span> <span>delay</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>new</span> <span>Promise</span><span>(</span><span>resolve</span> <span>=&gt;</span> <span>setTimeout</span><span>(</span><span>resolve</span><span>,</span> <span>3000</span><span>)</span><span>)</span>
  <span>const</span> <span>getElementsByAriaLabel</span> <span>=</span> <span>(</span><span>label</span><span>)</span> <span>=&gt;</span> <span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>`[aria-label=&#34;<span><span>${</span><span>label</span><span>}</span></span>&#34;]`</span><span>)</span>
  <span>const</span> <span>getElementsByRoleAndWidth</span> <span>=</span> <span>(</span><span>role</span><span>,</span> <span>width</span><span>)</span> <span>=&gt;</span> 
      <span>Array</span><span>.</span><span>from</span><span>(</span><span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>`[role=&#34;<span><span>${</span><span>role</span><span>}</span></span>&#34;]`</span><span>)</span><span>)</span><span>.</span><span>filter</span><span>(</span><span>el</span> <span>=&gt;</span> <span>el</span><span>.</span><span>clientWidth</span> <span>===</span> <span>width</span><span>)</span>
  <span>const</span> <span>getElementsByText</span> <span>=</span> <span>(</span><span>text</span><span>)</span> <span>=&gt;</span> <span>Array</span><span>.</span><span>from</span><span>(</span><span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>&#39;*&#39;</span><span>)</span><span>)</span><span>.</span><span>filter</span><span>(</span><span>el</span> <span>=&gt;</span> 
      <span>Array</span><span>.</span><span>from</span><span>(</span><span>el</span><span>.</span><span>childNodes</span><span>)</span><span>.</span><span>some</span><span>(</span><span>node</span> <span>=&gt;</span> <span>node</span><span>.</span><span>nodeType</span> <span>===</span> <span>Node</span><span>.</span><span>TEXT_NODE</span> <span>&amp;&amp;</span> <span>node</span><span>.</span><span>textContent</span><span>.</span><span>includes</span><span>(</span><span>text</span><span>)</span><span>)</span>
  <span>)</span>

  <span>const</span> <span>ads</span> <span>=</span> <span>getElementsByRoleAndWidth</span><span>(</span><span>&#39;listitem&#39;</span><span>,</span> <span>508</span><span>)</span>

  <span>for</span> <span>(</span><span>const</span> <span>ad</span> <span>of</span> <span>ads</span><span>)</span> <span>{</span>
      <span>console</span><span>.</span><span>log</span><span>(</span><span>ad</span><span>.</span><span>childNodes</span><span>[</span><span>0</span><span>]</span><span>.</span><span>textContent</span><span>)</span>
      <span>ad</span><span>.</span><span>childNodes</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>a</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>&#39;They uploaded or used a list to reach you.&#39;</span><span>)</span><span>)</span>
      <span>a</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>b</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>&#39;Don\&#39;t allow&#39;</span><span>)</span><span>)</span>
      <span>b</span><span>[</span><span>1</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>c</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByText</span><span>(</span><span>&#39;Don\&#39;t allow&#39;</span><span>)</span><span>)</span>
      <span>c</span><span>[</span><span>0</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>d</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByAriaLabel</span><span>(</span><span>&#39;Back&#39;</span><span>)</span><span>)</span>
      <span>d</span><span>[</span><span>2</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>

      <span>const</span> <span>e</span> <span>=</span> <span>await</span> <span>wait</span><span>(</span><span>(</span><span>)</span> <span>=&gt;</span> <span>getElementsByAriaLabel</span><span>(</span><span>&#39;Back&#39;</span><span>)</span><span>)</span>
      <span>e</span><span>[</span><span>2</span><span>]</span><span>.</span><span>click</span><span>(</span><span>)</span>
      <span>await</span> <span>delay</span><span>(</span><span>)</span>
  <span>}</span>
<span>}</span><span>)</span><span>(</span><span>)</span></pre></div>
<ol start="5" dir="auto">
<li>Watch as your slowly unsubscribe from all advertisers</li>
<li>Don&#39;t click or interact with the browser at all while this is going on.  Go do laundry or something.</li>
<li>Enjoy cutting off advertisers that hate you :)</li>
</ol>
</article>
  </div>

  </div>
</div></div>
  </body>
</html>
