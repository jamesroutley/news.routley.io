<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://chelseatroy.com/2022/03/11/why-compilers-dont-autocorrect-obvious-parse-errors/">Original</a>
    <h1>Why Compilers Don’t Autocorrect “Obvious” Parse Errors</h1>
    
    <div id="readability-page-1" class="page"><div id="page">

			<!-- #masthead -->

			<div id="content">

	<section id="primary">
		<main id="main" role="main">

		
			<article id="post-11212">
	
	
		

	<div>
		<p><span><span>Reading Time: </span> <span>7</span> <span>minutes</span></span></p><p>Last month, someone on Twitter relayed a conversation with their 8 year old daughter, who is learning Python. The kid wants to know “If the computer knows I’m missing a semicolon here, why won’t it add it itself?”*</p>



<div><figure><a href="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/confused_owl.jpg?ssl=1"><img data-attachment-id="11230" data-permalink="https://chelseatroy.com/2022/03/11/why-compilers-dont-autocorrect-obvious-parse-errors/confused_owl/" data-orig-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/confused_owl.jpg?fit=275%2C183&amp;ssl=1" data-orig-size="275,183" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="confused_owl" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/confused_owl.jpg?fit=275%2C183&amp;ssl=1" data-large-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/confused_owl.jpg?fit=275%2C183&amp;ssl=1" src="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/confused_owl.jpg?resize=514%2C342&amp;ssl=1" alt="" width="514" height="342" data-recalc-dims="1"/></a><figcaption>The face I imagine the 8 year old making at her code while asking this question.</figcaption></figure></div>



<p>*It turns out that the Twitter person meant “colon,” not semicolon, but for <em>most</em> programming languages, “semicolon” still exemplifies the point: if the compiler “knows” what the problem is, why doesn’t it just fix it?</p>



<p>I thought I’d try to answer this question in a way that an 8 year old might appreciate. It turns out a lot of people outside that age range also appreciate it, so I decided to make it better and blog about it.</p>



<figure><a href="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?ssl=1"><img data-attachment-id="11213" data-permalink="https://chelseatroy.com/2022/03/11/why-compilers-dont-autocorrect-obvious-parse-errors/screen-shot-2022-03-11-at-9-04-11-am/" data-orig-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?fit=1200%2C544&amp;ssl=1" data-orig-size="1200,544" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="Screen-Shot-2022-03-11-at-9.04.11-AM" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?fit=300%2C136&amp;ssl=1" data-large-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?fit=723%2C328&amp;ssl=1" loading="lazy" width="723" height="328" src="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?resize=723%2C328&amp;ssl=1" alt="" srcset="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?resize=1024%2C464&amp;ssl=1 1024w, https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?resize=300%2C136&amp;ssl=1 300w, https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?resize=768%2C348&amp;ssl=1 768w, https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/Screen-Shot-2022-03-11-at-9.04.11-AM.png?w=1200&amp;ssl=1 1200w" sizes="(max-width: 723px) 100vw, 723px" data-recalc-dims="1"/></a></figure>



<h3>Lemme start here: the computer runs a program to understand YOUR program. </h3>



<p>That program is called a compiler. Python also has an interpreter: a program that runs your program. But this error is a compilation error: the compiler caught it while trying to understand your program.</p>



<p>Compilers can be very, very complicated. There are lots of opinions about how to write them. You can even find different compilers for the same language! For example the compiler your computer has for Python is probably the ‘standard’ one. We call it CPython because it is written in C, another programming language.</p>



<p>There is also Jython, written in Java (another programming language), and PyPy, a Python compiler written in Python! For now, we won’t get into how Pypy works. That’s a thing an 8 year old might enjoy looking up on her own.</p>



<h3>Anyway, handling compilation errors. </h3>



<p>Have you ever heard that phrase about how “Every happy family is the same, but every unhappy family is unhappy in their own way?” What it means is that there’s a lot more ways to get something <em>wrong</em> than there are to get it <em>right</em>.</p>



<p>And the number of people who write Python, globally, is <a href="https://www.zdnet.com/article/programming-languages-python-developers-now-outnumber-java-ones/">8.2 million</a>!</p>



<p>Imagine that. Writing a compiler that has to catch the ways 8.2 million people mess up. A colon seems obvious, when it’s just you coding, and when the compiler is right about what’s wrong with your program.</p>



<p>But, imagine if it’s even 99% right when it catches a colon error (remember, it is hard to predict how things will go wrong. 99% is pretty good.)</p>



<p>Let’s pretend 8.2 million people each make one colon error a day.</p>



<p>8200000 * .01 = 82,000.</p>



<p>82,000 times the compiler is wrong, daily. </p>



<h3>How bad is that?</h3>



<p>Well, there are three ‘risk amplifiers’ to consider when you are deciding how to deal with things that could go wrong. Each one makes the risk ‘worse.’</p>



<p>1. It’s catastrophic (breaks very important things)</p>



<p>So in the case of the Python colon error, we’re talking about this number of 82,000 a day. That’s a made up number, but it illustrates the point that Python is used by enough people that even RARE compilation error mistakes happen pretty often.</p>



<p>They’re likely, in other words. Most of them are not too catastrophic, right? They’re easy to fix, most of the time, and even in the 82,000 cases where the compiler is mistaken about what, <em>exactly</em>, the programmer has done wrong, drawing attention to that area will help the programmer figure it out. </p>



<p>Now let’s talk about insidiousness. This is the most under-appreciated and, probably for that reason, often the most dangerous of the risk amplifiers. Example: NASA lost the Mars Climate Orbiter in 1999 because some of the hardware assumed English units, some of the software assumed metric units, and no one caught it until the thing was already lost.</p>



<p>Even in cases where errors are rare, we want mechanisms to catch them. <sup></sup>The compiler error being wrong about the colon sometimes, even if it’s usually right, is already likely because of the sheer number of people writing colons in Python.</p>



<p>What if the compiler adds a colon when that’s the wrong thing…in a space launch program? There are a couple of programming languages that are notorious for this kind of thing: Most famously, JavaScript, and to some extent Ruby.</p>



<p>These languages will try with all their might to divine something runnable from what you wrote. How kind of them, right? But the thing is, that can make it really, really hard to figure out why your program is not working properly, because it’s still doing <em>something</em>. Just, it’s the <em>wrong</em> thing.</p>



<p><a href="https://www.destroyallsoftware.com/talks/wat">The wat video</a> shows some funny, salient examples of this that have made it one of the most popular and long-lived “joke” conference talks I’ve ever seen.</p>



<h3>How do we manage this risk?</h3>



<p>So a common, risk-averse approach in compiler design is to surface compilation errors to the programmer, and let the programmer—you—figure out exactly what’s wrong.</p>



<p>Because, as smart as we compiler designers think we are, <em>you</em>, dear programmer, know your program better than we do. We think we know what’s wrong. We’re even pretty sure. But we don’t know, and we don’t assume.</p>



<p>We say:</p>



<p>“We think something is wrong here. We think you want a colon. But we want you to look at it, too. Because you might know something we don’t, and we don’t want to make your program wrong by accident.” </p>



<p>Here’s, an example of Python getting the colon compilation error wrong:</p>



<figure><a href="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?ssl=1"><img data-attachment-id="11219" data-permalink="https://chelseatroy.com/2022/03/11/why-compilers-dont-autocorrect-obvious-parse-errors/colon_error_wrong/" data-orig-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?fit=599%2C296&amp;ssl=1" data-orig-size="599,296" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="colon_error_wrong" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?fit=300%2C148&amp;ssl=1" data-large-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?fit=599%2C296&amp;ssl=1" loading="lazy" width="599" height="296" src="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?resize=599%2C296&amp;ssl=1" alt="" srcset="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?w=599&amp;ssl=1 599w, https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_wrong.png?resize=300%2C148&amp;ssl=1 300w" sizes="(max-width: 599px) 100vw, 599px" data-recalc-dims="1"/></a></figure>



<p>It says it wants a colon. The actual problem here is that I typo’d “and” to “nd.” But as you can see, there actually IS a colon in the right spot.</p>



<figure><a href="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?ssl=1"><img data-attachment-id="11222" data-permalink="https://chelseatroy.com/2022/03/11/why-compilers-dont-autocorrect-obvious-parse-errors/colon_error_fixed-2/" data-orig-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?fit=514%2C231&amp;ssl=1" data-orig-size="514,231" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="colon_error_fixed-2" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?fit=300%2C135&amp;ssl=1" data-large-file="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?fit=514%2C231&amp;ssl=1" loading="lazy" width="514" height="231" src="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?resize=514%2C231&amp;ssl=1" alt="" srcset="https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?w=514&amp;ssl=1 514w, https://i0.wp.com/chelseatroy.com/wp-content/uploads/2022/03/colon_error_fixed-2.png?resize=300%2C135&amp;ssl=1 300w" sizes="(max-width: 514px) 100vw, 514px" data-recalc-dims="1"/></a><figcaption>Here’s the fixed version.</figcaption></figure>



<p>This’ll happen 81,999 more times today.</p>



<p><a rel="noreferrer noopener" href="https://pbs.twimg.com/media/FLFt8BAWQAA2oBA.png" target="_blank"></a><a rel="noreferrer noopener" href="https://pbs.twimg.com/media/FLFuCPRXoAMz8qs.png" target="_blank"></a>If the compiler tried to automatically add a colon, I’d have two colons and the code is even wronger.</p>



<p>Or it might do so over and over, resulting in a never-ending string of colons and a hung compiler! (“Hung” means “never finishes running and we have to shut it down manually”). </p>



<p>The compiler avoids causing those kinds of things by leaving it up to the programmer what the problem is, and accepting the ‘cost’ that in most cases, the programmer will be like ‘Ahp, yep, missing a comma. Lemme add that.’ </p>



<h3>If you liked this piece, you might also like:</h3>



<p>This <a href="https://chelseatroy.com/2019/12/30/posd-2-what-causes-insidious-bugs/">piece I wrote on what causes insidious bugs</a></p>



<p>This <a href="https://chelseatroy.com/2021/09/02/talk-at-blue-team-con-analyzing-application-risk/">transcript of a talk I gave on analyzing application risk</a></p>



<p>This <a href="https://chelseatroy.com/tag/dabeaz-compilers/?order=asc">introductory series on compiler design</a></p>
			</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article><!-- #post-## -->

			
<!-- #comments -->

		
		</main><!-- #main -->
	</section><!-- #primary -->

	<!-- #secondary -->

	</div><!-- #content -->

	<!-- #colophon -->
</div></div>
  </body>
</html>
