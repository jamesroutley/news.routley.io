<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.glyphdrawing.club/font-with-built-in-syntax-highlighting/">Original</a>
    <h1>Font with Built-In Syntax Highlighting (2024)</h1>
    
    <div id="readability-page-1" class="page"><div>
        <h2 id="syntax-highlighting-in-hand-coded-websites">Syntax Highlighting in Hand-Coded Websites</h2>
<h3 id="the-problem">The problem</h3>
<p>I have been trying to identify practical reasons why hand-coding websites with HTML and CSS is so hard (<em>by hand-coding, I mean not relying on frameworks, generators or 3rd party scripts that modify the DOM</em>).</p>
<p>Let&#39;s say, I want to make a blog. What are the <strong>actual</strong> things that prevent me from making—and maintaining—it by hand? What would it take to clear these roadblocks?</p>
<p>There are many, of course, but for a hand-coded programming oriented blog one of these roadblocks is <strong>syntax highlighting</strong>.</p>
<p>When I display snippets of code, I want to make the code easy to read and understand by highlighting it with colors. To do that, I would normally need to use a complex syntax highlighter library, like <a href="https://prismjs.com/">Prism</a> or <a href="https://highlightjs.org/">highlight.js</a>. These scripts work by scanning and chopping up the code into small language-specific patterns, then wrapping each part in tags with special styling that creates the highlighted effect, and then injecting the resulting HTML back into the page.</p>
<p>But, I want to write code by hand. I don&#39;t want any external scripts to inject things I didn&#39;t write myself. Syntax highlighters also add to the overall complexity and bloat of each page, which I&#39;m trying to avoid. I want to keep things as simple as possible.</p>
<h3 id="leveraging-opentype-features-to-build-a-simple-syntax-highlighter-inside-the-font">Leveraging OpenType features to build a simple syntax highlighter inside the font</h3>
<p>This lead me to think: <strong>could it be possible to build syntax highlighting directly into a font</strong>, skipping JavaScript altogether? Could I somehow leverage OpenType features, by creating colored glyphs with the COLR table, and identifying and substituting code syntax with contextual alternates?</p>
<pre><code>&lt;div class=&#34;spoilers&#34;&gt;
  &lt;strong&gt;Yes, it&#39;s possible!&lt;/strong&gt;
  &lt;small&gt;...to some extent =)&lt;/small&gt;
&lt;/div&gt;
</code></pre>
<p>The colors in the HTML snippet above <strong>comes from within the font itself</strong>, the code is <strong>plain text</strong>, and requires <strong>no JavaScript</strong>.</p>
<p>To achieve that, I modified an open source font Monaspace Krypton to include colored versions of each character, and then used OpenType contextual alternates to essentially find &amp; replace specific strings of text based on HTML, CSS and JS syntax. The result is a simple syntax highlighter, <strong>built-in</strong> to the font itself.</p>
<p>If you want to try it yourself, download the font: <a href="https://figbert.com/assets/fonts/FontWithASyntaxHighlighter-Regular.woff2">FontWithASyntaxHighlighter-Regular.woff2</a></p>
<p>And include the following bits of CSS:</p>
<pre><code>@font-face {
  font-family: &#39;FontWithASyntaxHighlighter&#39;;
  src: 
    url(&#39;/FontWithASyntaxHighlighter-Regular.woff2&#39;) 
    format(&#39;woff2&#39;)
  ;
}
code {
  font-family: &#34;FontWithASyntaxHighlighter&#34;, monospace;
}
</code></pre>
<p>And that&#39;s it!</p>
<h2 id="what-are-the-pros-and-cons-of-this-method">What are the Pros and Cons of this method?</h2>
<p>This method opens up some interesting possibilities...</p>
<h3 id="pros">Pros</h3>
<ol>
<li>Install is as easy as using any custom font.</li>
<li>Works without JavaScript.</li>
<li>Works without CSS themes.</li>
<li>...but can be themed with CSS.</li>
<li>It&#39;s fast.</li>
<li>Snippets of code can be put into <code>&lt;pre&gt;</code> and <code>&lt;code&gt;</code>, with no extra classes or <code>&lt;span&gt;</code>s.</li>
<li>Clean HTML source code.</li>
<li>Works everywhere that supports OpenType features, like InDesign.</li>
<li>Doesn&#39;t require maintenance or updating.</li>
<li>Works in <code>&lt;textarea&gt;</code> and <code>&lt;input&gt;</code>! Syntax highlighting inside <code>&lt;textarea&gt;</code> has been <a href="https://css-tricks.com/creating-an-editable-textarea-that-supports-syntax-highlighted-code/">previously impossible</a>, because textareas and inputs can only contain plain text. This is where the interesting possibilities lie. As a demo, I made this tiny HTML, CSS &amp; JS sandbox, with native undo and redo, in a single, <a href="https://figbert.com/assets/webcomponents/tinybox.js">web component</a>.</li>
</ol>
<tiny-box>
  <template>
      
      <p>
          tiny HTML &amp; CSS sandbox =)
        </p>
      
  </template>
</tiny-box>
<h3 id="cons">Cons</h3>
<p>There are, of course, some limitations to this method. It is not a direct replacement to the more robust syntax highligting libraries, but works well enough for simple needs.</p>
<ol>
<li>
<p>Making modifications to the syntax highligher, like adding more language supports or changing the look of the font, requires modifying the font file. This requires some knowledge of font production, which most people don&#39;t have.</p>
</li>
<li>
<p>It only works where OpenType is supported. Fortunately, that&#39;s all major browsers and most modern programs. However, something like PowerPoint doesn&#39;t support OpenType.</p>
</li>
<li>
<p>Finding patterns in text with OpenType contextual alternates is quite basic, and is no match for scripts that use regular expressions. For example, words within <code>&lt;p&gt;</code> tags that are JS keywords will be always highlighted: <code>&lt;p&gt;if I throw this Object through the window, catch it, for else it’ll continue to Infinity &amp; break&lt;/p&gt;</code>.</p>
</li>
<li>
<p>Multiline highlighting with manual line breaks will sadly not work.</p>
<p>This is common, for example, in comment blocks and template literals:</p>
<pre><code> &lt;!-- This line gets highlighted...
 but not this, because I made a manual line break...
 --&gt;
</code></pre>
</li>
</ol>
<h2 id="how-does-it-actually-work">How does it actually work?</h2>
<p>Here&#39;s roughly how it works. There are two features in OpenType that make this possible: OpenType COLR table and contextual alternates.</p>
<h3 id="opentype-colr-table">OpenType COLR table</h3>
<p>OpenType COLR table makes multi-colored fonts possible. <a href="https://glyphsapp.com/learn/creating-a-microsoft-color-font">There is a good guide on creating a color font using Glyphs</a>.</p>
<p>I made a palette with 8 colors.</p>
<p>I duplicated letters <code>A</code> <code>–</code> <code>Z</code>, numbers <code>0</code> <code>–</code> <code>9</code> and the characters <code>.</code> <code>#</code> <code>*</code> <code>-</code> and <code>_</code> four times. Each duplicated character is then suffixed with .alt, .alt2, .alt3 or .alt4, and then assigned a color from the palette. For example, all .alt1 glyphs are <code>this</code> color.</p>
<p>I also duplicated all characters twice, and gave them suffices .alt1 and .alt5 and assigned them colors used in <code>&lt;!-- comment blocks --&gt;</code> and <code>&#34;strings within quotes&#34;</code></p>
<figure>
    <img alt="" loading="lazy" decoding="async" src="https://figbert.com/assets/kmFZTjkTcx-320.jpeg" width="1280" height="799" srcset="/assets/kmFZTjkTcx-320.jpeg 320w, /assets/kmFZTjkTcx-640.jpeg 640w, /assets/kmFZTjkTcx-1280.jpeg 1280w" sizes="(min-width: 30em) 50vw, 100vw"/>
    <figcaption>View from Glyps app. Each alternate character has a different color.</figcaption>
</figure>
<p>The two other colors I used for symbols <code>&amp; | $ + − = ~ [] () {} / ; : &#34; @ %</code> and <code>&#39;</code>, and they are always in one color. Numbers <code>0 1 2 3 4 5 6 7 8 9</code> are also always a certain color, unless overriden by other rules.</p>
<h3 id="opentype-contextual-alternates">OpenType contextual alternates</h3>
<p>The second required feature is OpenType contextual alternates. <a href="https://glyphsapp.com/learn/features-part-3-advanced-contextual-alternates">Here&#39;s a great introductory guide to advanced contextual alternates for Glyphs</a>.</p>
<p>Contextual alternates makes characters &#34;aware&#34; of their adjacent characters. An example would be fonts that emulate continuous hand writing, where <em>how</em> a letter connects depends on which letter it connects to. There is a <a href="https://ilovetypography.com/2011/04/01/engaging-contextuality/">nice article covering possible uses here</a>.</p>
<h4 id="javascript-syntax-rules">JavaScript syntax rules</h4>
<p>The core feature of contextual alternates is substituting glyphs. Here is a simplified code for finding the JavaScript keyword <code>if</code> and substituting the letters i and f with their colored variant:</p>
<pre><code>sub i&#39; f by i.alt2;
sub i.alt2 f&#39; by f.alt2;
</code></pre>
<p>In English:</p>
<ol>
<li>When i is followed by f, substitute the default i with an alternate (i.alt2).</li>
<li>When i.alt2 is followed by f, substitute the default f with an alternate (f.alt2).</li>
<li>As a result, every &#34;if&#34; in text gets substituted with <code>if</code>.</li>
</ol>
<p>OpenType doesn&#39;t support many-to-many substitutions directly, but <a href="https://typo.social/@behdad/112967180363218632">@behdad</a> on Mastodon had a great suggestion: keywords could be elegantly colored by <em>chaining</em> contextual substitutions.</p>
<p>To do this, I made a lookup which substitutes each letter with its colored variant.</p>
<pre><code>lookup ALT_SUBS {
    sub a by a.alt; 
    sub b by b.alt; 
    sub c by c.alt; 
    [etc.]
    sub Y by Y.alt;
    sub Z by Z.alt;
} ALT_SUBS;
</code></pre>
<p>I moved this lookup rule to the <a href="https://handbook.glyphsapp.com/layout/standalone-lookups/">Prefix</a> section, which just means it doesn&#39;t get applied automatically unlike the other lookups.</p>
<p>Then, I made a lookup rule for each keyword in the contextual alternates section. Here&#39;s one for <code>console</code>:</p>
<pre><code>lookup console {
    ignore sub @AllLetters c&#39; o&#39; n&#39; s&#39; o&#39; l&#39; e&#39;;
    ignore sub c&#39; o&#39; n&#39; s&#39; o&#39; l&#39; e&#39; @AllLetters;
    sub c&#39; lookup ALT_SUBS
        o&#39; lookup ALT_SUBS
        n&#39; lookup ALT_SUBS
        s&#39; lookup ALT_SUBS
        o&#39; lookup ALT_SUBS
        l&#39; lookup ALT_SUBS
        e&#39; lookup ALT_SUBS;
} console;
</code></pre>
<p>First two lines tells it to ignore strings like <code>Xconsole</code> or <code>consoles</code>, but not if there&#39;s a period like <code>console.log()</code>.</p>
<p>The third line starts by replacing the first letter &#39;c&#39; with its colored variant <code>c</code>, by using definitions from the other lookup table &#34;ALT_SUBS&#34;. This repeats until each letter is replaced by its color variant, and the result is <code>console</code>.</p>
<p>Identifying JavaScript keywords is fairly straightforward. Logic is the same for each keyword, and I used a python script to generate them.</p>
<h4 id="html-and-css-syntax-rules">HTML &amp; CSS syntax rules</h4>
<p>But for HTML and CSS... I had to get a bit more creative. There are simply too many keywords for both HTML and CSS combined. Making a separate rule for each keyword would inflate the file size.</p>
<p>Instead, I came up with this monstrosity. Here&#39;s how I find CSS value functions:</p>
<pre><code>lookup CssParamCalt useExtension {
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; @CssParam parenleft by @CssParamAlt4;
  sub @CssParam&#39; parenleft by @CssParamAlt4;
} CssParamCalt;
</code></pre>
<p>@CssParam is a custom OpenType glyph class I&#39;ve set up. It includes the characters <code>A</code> <code>–</code> <code>Z</code>, <code>a</code> <code>–</code> <code>z</code>, and <code>-</code>, which are all the possible characters used in CSS value function names. Because the longest possible CSS value function name is <code>repeating-linear-gradient()</code>, with 25 letters, the first line of the lookup starts with @CssParam repeated 25 times, followed by parenleft (<code>(</code>). This lookup will match any word up to 25 letters long, if it&#39;s immediately followed by an opening parenthesis. When a match occurs, it substitutes the matched text with its alternate color form (@CssParamAlt4).</p>
<p>This lookup works for both CSS and JavaScript. It will colorize standard CSS functions like <code>rgb()</code> as well as custom JavaScript functions like <code>myFunction()</code>. The result is a semi-flexible syntax highlighter that doesn&#39;t require complex parsing. The downside is that if you have a really long function name, it stops working midway: <code>aReallyLongFunctionNameStopsWorkingMidway()</code>. I&#39;ve repeated the same principle for finding HTML tags and attributes, and for CSS selectors and parameters.</p>
<h4 id="unknown-length-rules">Unknown length rules</h4>
<p>Comment blocks and strings between quotes also required extra care, because their length can be anything. OpenType doesn&#39;t support loops or anything resembling regular expressions. For example, I can&#39;t just tell it to simply substitute everything it finds between two quotes.</p>
<p>However, I got a great suggestion from @penteract on <a href="https://news.ycombinator.com/item?id=41259124"><em>Hacker News</em></a> to use a finite state machine for these kinds of situations. Here our aim is to colorize eveything between /* and */ gray:</p>
<pre><code>lookup CSScomment useExtension {
  // stop if we encounter a colored */
  ignore sub asterisk.alt1 slash.alt1 @All&#39;;

  // color first letter after /*
  sub slash asterisk @All&#39; by @AllAlt1;
  sub slash asterisk space @All&#39; by @AllAlt1;
  
  // color /* itself
  sub slash&#39; asterisk by slash.alt1;
  sub slash.alt1 asterisk&#39; by asterisk.alt1;
  
  // finite state machine to color rest of the characters
  // or until ignore condition is met
  sub @AllAlt1 @All&#39; by @AllAlt1;
} CSScomment;
</code></pre>
<p>The last line is the important one. The lookup will just continue replacing characters if the previous character is already colored.</p>
<h3 id="end-note">End note</h3>
<p>The full process is a little bit too convoluted to go into step-by-step, but if you&#39;re a type designer who wants to do this with their own font, don&#39;t hesitate to contact me.</p>
<p>I&#39;m also not an OpenType expert, so I&#39;m sure the substitution logics could be improved upon. If you&#39;re interested in learning more about OpenType, I recommend reading <a href="https://opentypecookbook.com/">The OpenType Cookbook</a> and the complete <a href="https://adobe-type-tools.github.io/afdko/OpenTypeFeatureFileSpecification.html">OpenType™ Feature File Specification</a>.</p>
<p>If you have any ideas, suggestions or feedback, let me know. You can reach me at <code>hlotvonen@gmail.com</code> or leave a comment on <a href="https://typo.social/@gdc/112959308500800771">Mastodon</a>.</p>
<h2 id="changing-the-color-theme">Changing the color theme</h2>
<p>You can change the color theme with CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-palette-values/override-colors"><code>override-colors</code></a>! <a href="https://caniuse.com/?search=font-palette">Browser support</a> is great at ~94%.</p>
<tiny-box>
  <template>
    
    <div>
      <!-- Edit the content! -->
      <pre><code>
        var const let for while
        function() linear-gradient()
        .myDiv{ background-color: pink; }
        console.log(&#34;hello&#34;, true)
        /* comment */
        &amp; | $ + − = ~ [] () {} / ; : &#34; @ % 
        0 1 2 3 4 5 6 7 8 9
      </code></pre>
    </div>
  </template>
</tiny-box>
<h2 id="alternative-built-in-color-themes">Alternative built-in color themes</h2>
<p>Additionally, two alternative color themes <em>Night Owl</em>, and <em>Light Owl</em> were added by <a href="https://typo.social/@niutech@fosstodon.org">niutech</a>. You can download them from the <a href="https://github.com/hlotvonen/FontWithASyntaxHighlighter">FontWithASyntaxHighlighter GitHub page</a>. <a href="https://github.com/sdras/night-owl-vscode-theme">Night Owl theme</a> is made by <a href="https://github.com/sdras">Sarah Drasner</a>.</p>
<p>In order to modify the built-in color palette, you have to edit the font source file. To do so, you can edit the color palettes values in lines 112-120 of the <a href="https://github.com/hlotvonen/FontWithASyntaxHighlighter/blob/main/FontWithASyntaxHighlighter.glyphs">FontWithASyntaxHighlighter.glyphs</a> file and then build the font with <a href="https://github.com/googlefonts/fontmake">fontmake</a>.</p>
<h2 id="projects-using-this-font">Projects using this font</h2>
<p>Here&#39;s some cool projects that are using or are inspired by this font:</p>
<ol>
<li><a href="https://www.holograph.so/">Holograph is a visual coding tool built on tldraw</a> &amp; <a href="https://github.com/dennishansen/holograph">its GitHub page</a></li>
<li><a href="https://maxbo.me/celine/">@celine/celine is library for building reactive HTML notebooks</a> &amp; <a href="https://github.com/MaxwellBo/celine">its GitHub page</a> &amp; <a href="https://maxbo.me/a-html-file-is-all-you-need.html">blogpost</a></li>
<li><a href="https://chenglou.me/pure-css-shaders-art/">Shaders art made with pure CSS</a> &amp; <a href="https://github.com/chenglou/pure-css-shaders-art">its GitHub Page</a></li>
<li><a href="https://mdit.pages.dev/">Mdit, a simple Markdown previewer</a> &amp; <a href="https://github.com/roblesdotdev/mdit">its GitHub Page</a></li>
<li><a href="https://github.com/JRJurman/textarea-code-block">Web Component for making a Textarea element into a syntax highlighted codeblock</a></li>
<li>It might also be used as an example for displaying the potential uses for color fonts in the W3C <a href="https://github.com/w3c/csswg-drafts/tree/main/css-fonts-4">CSS Fonts Module Level 4 specification</a></li>
<li><a href="https://codepen.io/daviddarnes/pen/poXpaLB?editors=1100"><code-pen> Web Component with syntax highlighting</code-pen></a></li>
<li><a href="https://tug.org/tug2025/preprints/rajeesh-colorfont-syntax.pdf">An OpenType font with built-in TEX syntax highlighting</a></li>
<li><a href="https://labelary.com/viewer.html">Labelary ZPL viewer &amp; editor</a></li>
<li><a href="https://garten.salat.dev/">garten.salat.dev blog</a></li>
<li><a href="https://www.ffoodd.fr/devfest.2024/jeu/">L’invasion du HTML mutant</a></li>
<li>(Did you make a project using this font, or know a project that uses it? Let me know please!)</li>
</ol>
<h2 id="potential-future">Potential future</h2>
<p>Many people suggested that this concept could be taken one step further with <a href="https://github.com/harfbuzz/harfbuzz-wasm-examples">harfbuzz-wasm</a>. With harfbuzz-wasm a real parser could be used instead of my crazy opentype lookup rules. Essentially, all the cons could be eliminated... Any harfbuzz-wasm experts who wants to take this on?</p>
<h2 id="licence">Licence</h2>
<p>The original font (<a href="https://monaspace.githubnext.com/">MonaSpace</a>) has <a href="https://github.com/githubnext/monaspace/blob/main/LICENSE">SIL open font license v1.1</a>, which carries over to my modified version. So, you&#39;re free to use the font in any way that the SIL v1.1 license permits.</p>
<p>As for the code examples, they are MIT licensed. The tiny sandbox web component can be found here: <a href="https://github.com/hlotvonen/tinybox">https://github.com/hlotvonen/tinybox</a></p>
<h2 id="source">Source</h2>
<p>The original source .glyphs file is <a href="https://github.com/hlotvonen/FontWithASyntaxHighlighter">hosted in this GitHub repository</a>. UFO files were kindly added by <a href="https://typo.social/@niutech@fosstodon.org">niutech</a>. Or, you can modify the font with <a href="https://forum.glyphsapp.com/t/script-outside-glyphapp/22454">some scripting</a> &amp; build with <a href="https://github.com/googlefonts/fontmake">fontmake</a>.</p>
<h2 id="more-examples">More examples</h2>
<pre><code>as, in, of, if, for, while, finally, var, new, function,
do, return, void, else, break, catch, instanceof, with,
throw, case, default, try, switch, continue, typeof, delete,
let, yield, const, class, get, set, debugger, async, await,
static, import, from, export, extends

true, false, null, undefined, NaN, Infinity

Object, Function, Boolean, Symbol, Math, Date, Number, BigInt, 
String, RegExp, Array, Float32Array, Float64Array, Int8Array, 
Uint8Array, Uint8ClampedArray, Int16Array, Int32Array, Uint16Array, 
Uint32Array, BigInt64Array, BigUint64Array, Set, Map, WeakSet,
WeakMap, ArrayBuffer, SharedArrayBuffer, Atomics, DataView, 
JSON, Promise, Generator, GeneratorFunction, AsyncFunction, 
Reflect, Proxy, Intl, WebAssembly, Error, EvalError, InternalError, 
RangeError, ReferenceError, SyntaxError, TypeError, URIError, 
setInterval, setTimeout, clearInterval, clearTimeout, require, 
exports, eval, isFinite, isNaN, parseFloat, parseInt, decodeURI, 
decodeURIComponent, encodeURI, encodeURIComponent, escape, 
unescape, arguments, this, super, console, window, document, 
localStorage, sessionStorage, module, global
</code></pre>
<hr/>
<pre><code>&lt;!-- this is a comment! --&gt;
/* and this */
// and this
&lt;!-- however...
it breaks when your code goes to a newline.
there&#39;s no way to keep context line to line...
--&gt;
</code></pre>
<hr/>
<pre><code>&lt;!-- can&#39;t disable highlighting JS keywords in between tags --&gt;
&lt;p&gt;
  give me a break...
&lt;/p&gt;
</code></pre>
<hr/>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
  &lt;meta charset=&#34;UTF-8&#34;&gt;
  &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
  &lt;title&gt;Syntax Highlighter Example&lt;/title&gt;
  &lt;style&gt;
    body {
      background-color: rgb(255, 0, 0);
      font-family: &#39;Arial Narrow&#39;, sans-serif;
      line-height: 1.44;
      color: #333;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;
    &lt;h1&gt;Welcome to the Syntax Highlighter Test&lt;/h1&gt;
  &lt;/header&gt;
  &lt;nav&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&#34;#section1&#34;&gt;Section 1&lt;/a&gt;
    &lt;/ul&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;section id=&#34;section1&#34;&gt;
      &lt;h2&gt;Section 1&lt;/h2&gt;
      &lt;p&gt;This is a &lt;span class=&#34;highlight&#34;&gt;highlighted&lt;/span&gt; paragraph.&lt;/p&gt;
      &lt;img src=&#34;/api/placeholder/300/200&#34; alt=&#34;Placeholder image&#34;&gt;
    &lt;/section&gt;
  &lt;/main&gt;
  &lt;script&gt;
    console.log(&#34;This is a JavaScript comment&#34;);
    function greet(name) {
      return `Hello, ${name}!`;
    }
    document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {
      console.log(greet(&#39;Syntax Highlighter&#39;));
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<hr/>
<pre><code>.crazyBackground {
  /* don&#39;t try this at home */
  background:
    radial-gradient(
      100% 50% at 50% 50%,
      hsl(90 90% 45%) 0% 5%,
      hsl(250 70% 40%) 50%,
      hsl(50 50% 50%)
    ),
    radial-gradient(
      100% 100% at 50% 25%,
      hsl(90 40% 85%) 30%,
      hsl(40 80% 20%) 60% 90%,
      transparent
    ),
    linear-gradient(
      90deg,
      hsl(150 90% 90%) 0 10%,
      hsl(10 10% 20%),
      hsl(150 90% 90%) 90% 100%
    )
  ;
  background-size:
    5% 10%,
    10% 200%,
    25% 100%
  ;
  background-blend-mode:
    color-dodge,
    difference,
    normal
  ;
  animation: fire2 60s linear infinite;
}

@keyframes fire2 {
  from {
    background-position: 0% 0%, 0 30%, 0 0;
  }

  to {
    background-position: 0% -100%, -100% 30%, 200% 0%;
  }
}
</code></pre>
<hr/>
<pre><code>// Variables and constants
let variable = &#39;Hello&#39;;
const CONSTANT = 42;

// Template literals
const name = &#39;World&#39;;
console.log(`${variable}, ${name}!`);

// Function declaration
function greet(name) {
  return `Hello, ${name}!`;
}

// Arrow function
const multiply = (a, b) =&gt; a * b;

// Class definition
class Person {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
  sayHello() {
    console.log(`Hello, my name is ${this.name}`);
  }
}

// Object literal
const config = {
  apiKey: &#39;abc123&#39;,
  maxRetries: 3,
  timeout: 5000
};

// Array methods
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(num =&gt; num * 2);
const sum = numbers.reduce((acc, curr) =&gt; acc + curr, 0);

// Async/await
async function fetchData(url) {
  try {
    const response = await fetch(url);
    const data = await response.json();
    return data;
  } catch (error) {
    console.error(&#39;Error fetching data:&#39;, error);
  }
}

// Destructuring
const { apiKey, maxRetries } = config;
const [first, second, ...rest] = numbers;

// Spread operator
const newArray = [...numbers, 6, 7, 8];

// Conditional (ternary) operator
const isAdult = age &gt;= 18 ? &#39;Adult&#39; : &#39;Minor&#39;;

// Switch statement
function getDayName(dayNumber) {
  switch (dayNumber) {
    case 0: return &#39;Sunday&#39;;
    case 1: return &#39;Monday&#39;;
    // ... other cases
    default: return &#39;Invalid day&#39;;
  }
}

// Regular expression
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

// Symbol
const uniqueKey = Symbol(&#39;description&#39;);

// Set and Map
const uniqueNumbers = new Set(numbers);
const userRoles = new Map([[&#39;admin&#39;, &#39;full&#39;], [&#39;user&#39;, &#39;limited&#39;]]);

// Promises
const promise = new Promise((resolve, reject) =&gt; {
  setTimeout(() =&gt; resolve(&#39;Done!&#39;), 1000);
});

// Export statement
export { greet, Person };
</code></pre>
<h2 id="discussion">Discussion</h2>
<p>I received a lot of great feedback from the discussions at <a href="https://typo.social/@gdc/112959308500800771">Mastodon</a> and <a href="https://news.ycombinator.com/item?id=41245159">Hacker News</a>.</p>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>Thanks to jfk13 on hn, and <a href="https://typo.social/@kizu@front-end.social/112960336521542558">@pixelambacht</a> on Mastodon for pointing out that &#39;calt&#39; is turned on by default, and that &#39;colr&#39; is not an opentype feature that needs to be &#34;turned on&#34;.</p>
<p>Thanks to <a href="https://news.ycombinator.com/item?id=41259124">penteract</a> on hn and <a href="https://typo.social/@behdad/112967180363218632">@behdad</a> on Mastodon for suggesting better substitution rules.</p>
<p>Thanks to <a href="https://typo.social/@kizu@front-end.social/112960336521542558">@kizu</a> and <a href="https://typo.social/@kizu@front-end.social/112960336521542558">@pixelambacht</a> on Mastodon for suggesting color theming with <code>override-colors</code> CSS rule.</p>
<p>As said earlier, if you have any ideas, suggestions or feedback, let me know. You can reach me at <code>hlotvonen@gmail.com</code> or leave a comment on <a href="https://typo.social/@gdc/112959308500800771">Mastodon</a>.</p>
<p>Thanks to all who sent emails, messages and commented!</p>

    </div></div>
  </body>
</html>
