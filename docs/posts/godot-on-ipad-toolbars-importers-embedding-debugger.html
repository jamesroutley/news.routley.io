<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.la-terminal.net/godot-on-ipad-summer-update/">Original</a>
    <h1>Godot on iPad, Toolbars, Importers, Embedding, Debugger</h1>
    
    <div id="readability-page-1" class="page"><section>
    <p>This is a long-due update on porting Godot to the iPad.  Shortly after my last blog post covering the development work on May 29th, Apple held its WWDC 2024 conference.   I went into the conference with gusto, expecting to fully embrace all the iOS 18 APIs. I already knew by then that I would not complete the port before iOS 18 became widely available.</p><p>One thing I was not counting on was Apple releasing FinalCut Pro for the iPad, a professional video editing tool. It looked nice on the videos, but I did not expect it to be such a revelation from a UX perspective. While I have been following the Apple Human Interface Guidelines guidance and trying to mimic what other iPad system applications do, FinalCut Pro is packed with small details that have informed Godot for iPad ever since.   </p><p>The app itself is glorious and a delight to use, and not being a user interface designer, I did not quite understand what made the app feel so good.   A few things were more or less obvious like the Final Cut Pro controls for selecting values:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725137064781_image.png" alt="" loading="lazy" width="640" height="334"/><figcaption><span>FinalCut Pro&#39;s numeric input.</span></figcaption></figure><p>On the surface, this property editor felt better. Most edits can be done with your finger by dragging the value, and fine editing is possible by tapping on the number, which would bring a text editor. While I already had a little popup that would come up when editing a number, my editor defaulted to having a TextField, so it would always trigger the keyboard to pop up to edit.</p><p>I had completely missed the now obvious benefit of using a custom data entry popup, which was to avoid getting a system keyboard, one that has all sorts of letters and takes a large chunk of the screen, purely to enter numbers. It is obvious in retrospect, but it was not obvious when I was coding it.</p><p>I fell in love with these slide controls. The above one can edit values on a fixed range, but some editors would scroll, and I spent a few weeks reimplementing them and getting the behavior to match it; here are a few of them:</p><figure data-kg-thumbnail="https://blog.la-terminal.net/content/media/2024/08/252bace3f38a89a2_thumb.jpg" data-kg-custom-thumbnail="">
            <div>
                <video src="https://blog.la-terminal.net/content/media/2024/08/252bace3f38a89a2.mp4" poster="https://img.spacergif.org/v1/672x900/0a/spacer.png" width="672" height="900" playsinline="" preload="metadata"></video>
                
                <div>
                    <div>
                        <p>
                        
                        <span>0:00</span></p><p>
                            /<span>0:15</span>
                        </p>
                        </div>
                </div>
            </div>
            <figcaption><p><span>My new data entry controls, attempting to follow the FinalCut Pro idioms.</span></p></figcaption>
        </figure><p>But beyond these very obvious changes, something more subtle was going on.   This is what my test code for a potpourri of properties looked like before I looked at Final Cut Pro:</p><figure><img src="https://files.mastodon.social/media_attachments/files/112/754/487/057/645/000/original/666868d31af3e7e3.png" alt="" loading="lazy" width="732" height="2112"/></figure><p>What made Final Cut Pro look so much better was a combination of things:</p><ul><li>Font sizes for sections, labels and values</li><li>Color scheme used for labels and values</li><li>Tasteful grouping and padding of elements</li><li>Removal of the “lock” icon for linked properties from this screen and moving them directly to the data input</li></ul><p>So I set out with Preview and the Digital Color meter to match the colors, font sizes and spacing of the property editors to improve this user experience, and within a few days, I had something that looked a little bit better:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725137815878_image.png" alt="" loading="lazy" width="812" height="1600"/></figure><p>And now, rather than using a popup to edit each value, I now offer an editor that can take care of all the grouped values at once - and the value linkage is now done entirely on this editor.   Additionally, a description is shown at the top, plus a “Reset” option, similar to Final Cut Pro:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725137940198_image.png" alt="" loading="lazy" width="838" height="1362"/></figure><p>Then, I noticed that FinalCut Pro did not shy away from nesting values to edit, where I would try to flatten everything out.   Here, I had to come up with my idiom, as I expect that some users would not want to dig deeper into the hierarchy to edit values, so I allow users to “pin” a subgroup (I hijack Godot’s existing system for expanding a subtree for this):</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725138413447_image.png" alt="" loading="lazy" width="742" height="368"/></figure><p>Tapping the pin button would put that subgroup in the container.</p><p>The work on the new controls and the polishing of the property editor took about a month.   I think that it was a worthwhile investment to make the user interface better suited for touch.   What surprised me was how big of an upgrade using the proper font sizes, hierarchy of colors and accents brought to the app.</p><p>Another upgrade I did to the inspector during the summer is supporting nested property editing.   Once I embraced the FinalCut Pro approach of navigation for properties, it came naturally, and now you can edit those properties by simply tapping on the object as well as rendering previews of some properties. In this case, you can see the material for the mesh:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725144211229_image.png" alt="" loading="lazy" width="1156" height="2066"/><figcaption><span>Resource Previews in the Inspector</span></figcaption></figure><p>As I have shared over the past year, Godot on iPad is made up of the Godot engine embedded inside SwiftUI, and it started looking like this:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725139189530_image.png" alt="" loading="lazy" width="2728" height="2038"/><figcaption><span>An older version of Godot on iPad, showing the underlying editor running.</span></figcaption></figure><p>An older version of Godot on iPad shows the underlying editor running.Above, you can see that Godot is still running in full screen, but with a few of the Godot pads removed on both sides. The center of the screen still contains the Godot tab-based scene selector, the toolbar, the per-view menu (itsays“Perspective”), and the bottom bar, which contains various tools.</p><p>While this works, I wanted more control over what would be displayed here, so rather than lay things on top of Godot, I wanted to extract a view and fully control it.   In my case, I wanted the editor&#39;s surface but none of the additional elements.   In other cases, I wanted to embed some property controls directly into the property editor.</p><p>The Migeran team developed a set of Godot patches that allow me to do this embedding, and I am using them to revamp the user interface.</p><p>The first use was to re-host the top editor and the bottom bar directly and then control their display as a group.   Then, I graduated to rehosting every single tap on the bottom bar so I could start incrementally rewriting each of those tabs into SwiftUI.</p><p>First, I replaced the Output Pad, which looks like this on the desktop:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725139592542_image.png" alt="" loading="lazy" width="1228" height="498"/><figcaption><span>Godot Desktop Output Pad</span></figcaption></figure><p>With this version:</p><figure><img src="https://blog.la-terminal.net/content/images/2024/08/F6iVjkNQ.jpg" alt="" loading="lazy" width="2000" height="591" srcset="https://blog.la-terminal.net/content/images/size/w600/2024/08/F6iVjkNQ.jpg 600w, https://blog.la-terminal.net/content/images/size/w1000/2024/08/F6iVjkNQ.jpg 1000w, https://blog.la-terminal.net/content/images/size/w1600/2024/08/F6iVjkNQ.jpg 1600w, https://blog.la-terminal.net/content/images/2024/08/F6iVjkNQ.jpg 2000w" sizes="(min-width: 1200px) 1200px"/><figcaption><span>Godot on iPad Output Pad</span></figcaption></figure><p>To avoid taking up a whole row for text filtering, I allow each tab to have an optional tool that can be displayed on the right side of the user interface, like in this case.</p><p>It also shows some inspiration taken from LogicPro, another one of Apple’s professional tools for the iPad.   In this case, I have replaced a difficult-to-grab “splitter” common in Godot with an explicit handle that the user can drag to grow the region, tap to expand, or dismiss with a flick.</p><p>Similarly, the native Godot debugger went on a user interface diet, as I do not have the space available:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725140554713_image.png" alt="" loading="lazy" width="1454" height="588"/></figure><p>This time, I drew inspiration from Xcode and Swift Playgrounds. In this case, I collapsed the thread selector to one Picker that allows you to jump to different threads. The entire stack frames pane is also replaced by a single picker (here,showing hello:10), and the variables are shown on the left side, similar to Xcode.   </p><p>Another Xcode-inspired idea is that the variables and the output live side by side and can be toggled on and on using the small controls at the bottom of the screen:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725140664442_image.png" alt="" loading="lazy" width="2092" height="752"/></figure><p>The next big chunk of work this summer was to provide alternatives to the toolbars and menus used in Godot 3D and 2D editors. I started with the same principle: to be in control of those user interface elements and make them suitable for use on the iPad (and soon on the VisionPro).   </p><p>Initially, I felt like I could use the embedding technology to reuse the menus as-is because they were tappable enough.   But once I looked at them, I realized they were too busy, had very long lists of data, and would work poorly on the iPad.   This shows a partial view of the various toolbar elements for the 3D editor and what they unfold to:</p><figure><img src="https://files.mastodon.social/media_attachments/files/112/883/661/063/563/770/original/24dcab2a69e9306b.png" alt="" loading="lazy" width="2004" height="2076"/><figcaption><span>The Godot Menus and Options for the 3D editor</span></figcaption></figure><p>This is what the toolbar looks like now after the iPad-ification was done:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725141991249_image.png" alt="" loading="lazy" width="1248" height="730"/></figure><p>I enjoyed turning a modal settings box for the Field of View, Near Clip Distance and Far Clip Distance into a live setting, so you can immediately see the changes happen.   This view is still using the old sliders, but will soon be replaced with the new sliders that I cooked up.</p><p>Merging the six different viewport options into a single line saved plenty of vertical space, and merging those settings into the general-purpose settings and letting the user configure them there saved two icon slots on the toolbar for Light and Environment.</p><p>Had I designed this six months ago, I would have made the configuration for Light and Environment a long-press action on the light and environment buttons. But the more I use the app and the more professional apps I use on the iPad, I realize that long-press actions are useful for power users, but they are just not discoverable. I am being more mindful and considerate about my users by moving away from this idiom.  Very demure.</p><p>And this is what I did with the per-view menus:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725142140383_image.png" alt="" loading="lazy" width="1382" height="1036"/></figure><p>I might add some icons to the labels, but these look fine to me now.</p><p>A similar exercise was necessary for the 2D surface:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725142451978_image.png" alt="" loading="lazy" width="1630" height="774"/></figure><p>It did not seem like I could re-host those user interface elements, it just did not feel right after the 3D user interface had gotten that big upgrade.</p><p>So this is what the 2D toolbar turned into:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725142787835_image.png" alt="" loading="lazy" width="1150" height="720"/></figure><p>My goal was to preserve all the features available in Godot and surface them in an iPad-friendly way without sacrificing any functionality. If I had telemetry for which features users were using, I could have left a few things out, but generally, I erred on the side of not leaving things out.   </p><p>There are two small exceptions, and I made them only after reading the commit that introduced the feature and the discussion on the GitHub issue—they looked like relatively fringe features that had little use. But hopefully, during the public TestFlight, folks will inform me if I made a mistake.</p><p>You can tell that I worked hard to preserve all the functionality but also organize the features in a way that would be simpler to find:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725142810630_image.png" alt="" loading="lazy" width="1508" height="1056"/></figure><p>You might have noticed the “Control: Anchors” toolbar there. It turns out that I got more than I bargained for. Godot has additional “toolbars” that can be loaded into the toolbar depending on the object that you are editing, so I had to support not only the basics but also other custom toolbars.   </p><p>As Godot allows scripts and extensions to add elements to the Toolbar, I am replacing the known element toolbars with my own. If I encounter one kind that I do not support, I will merely “re-host” the Godot-native control in the user interface.</p><p>That said, my goal is to cover all the popular toolbars from the start so that none of the native ones are exposed and to fall back to the embedded situation when necessary.</p><p>I feel like I can do slightly better organization of these properties for Godot on iPad because of the additional user interface elements available at my disposal, like the Picker above or the visual cues for grouping.   This is a feeling that I got repeatedly during this exercise. The spectrum of tools available in SwiftUI gave me a richer vocabulary to express the capabilities than the controls that come with Godot - I hope to publish a list of “nice to haves” so the Godot folks can bring that into mainline Godot.</p><p>Lastly, I realized that the toolbars are taking some precious space on the user interface, and they might get in the way of your work.   I remembered that Apple had a talk some years ago about “<a href="https://developer.apple.com/videos/play/wwdc2018/803/?ref=blog.la-terminal.net" rel="noreferrer nofollow noopener">Fluid</a><a href="https://developer.apple.com/videos/play/wwdc2018/803/?ref=blog.la-terminal.net" rel="noreferrer nofollow noopener"> Interfaces</a>” that covered this scenario, for what they called the “Picture in Picture View”.   The description starts after minute 41 of the talk.</p><p>So I brought that user interface idiom to the toolbars, allowing users to “flick” the toolbar to one of the four corners of the user interface to get out of the way:</p><figure data-kg-thumbnail="https://blog.la-terminal.net/content/media/2024/08/ScreenRecording_08-31-2024-18-28-08_1_thumb.jpg" data-kg-custom-thumbnail="">
            <div>
                <video src="https://blog.la-terminal.net/content/media/2024/08/ScreenRecording_08-31-2024-18-28-08_1.MP4" poster="https://img.spacergif.org/v1/1920x1342/0a/spacer.png" width="1920" height="1342" playsinline="" preload="metadata"></video>
                
                <div>
                    <div>
                        <p>
                        
                        <span>0:00</span></p><p>
                            /<span>0:13</span>
                        </p>
                        </div>
                </div>
            </div>
            <figcaption><p><span>Moving the toolbar around</span></p></figcaption>
        </figure><p>Miroslav has been an invaluable partner in this SwiftUI adventure, and while he had initially just focused on the SwiftUI components, he has recently taken over rewriting many of the full-screen importers for Godot.   We realized early on that some of the importers in Godot were great, but again, they would take up all the space and did not fit at all in the iPad, it was not even possible to reach all the elements of the UI.</p><p>He rewrote the Scene Importer and the Audio Importer, which were large projects on their own:</p><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725146091645_image.png" alt="" loading="lazy" width="2388" height="1668"/><figcaption><span>Scene Importer, the sidebar is closed.</span></figcaption></figure><figure><img src="https://paper-attachments.dropboxusercontent.com/s_BF3AD6EA8C16ADCDBFFBE2C86A5DC3002F99676ABA007444AD8B02E5E9853638_1725146031864_image.png" alt="" loading="lazy" width="2388" height="1668"/><figcaption><span>Audio Importer</span></figcaption></figure><p>One thing that has been bothering me is how to activate/deactivate panels on such a small screen, and I had my share of poor man’s hacks.   Logic Pro introduced me to an idiom (and while it is in FinalCut Pro, I was not paying enough attention to see it): small icons at the bottom of the screen.   I spent the last week redoing my bottom bar to incorporate this idiom.</p><p>I lack a “Scene Switcher” (what Godot has in tabs).  The way to switch scenes is to select the file directly, but that feels clunky, so that is next.</p><p>In addition to these two high-level topics, I have some fifty-nine other small bugs that need to be fixed before this is suitable for a TestFlight, and I hope to finalize those in September. </p><p>My hope is that while I collect feedback for this beta and fix bugs, I can look into integrating Apple Pencil support, spend some quality time on the touch interactions for it, and make sure that Godot on iPad really shines as a touch-first experience.</p>
</section></div>
  </body>
</html>
