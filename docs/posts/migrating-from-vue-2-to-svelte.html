<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://escape.tech/blog/from-vue2-to-svelte/">Original</a>
    <h1>Migrating from Vue 2 to Svelte</h1>
    
    <div id="readability-page-1" class="page"><section>
            <p><strong>After using Vue 2 as our front-end framework for almost two years, it was announced that this support would no longer be maintained, so we decided to migrate to a new framework. But which one to choose: Vue 3 or Svelte?</strong></p><p>Please note that our goals after the migration were also to improve our developer experience especially type checking, performance, and building time. We didn&#39;t consider React because it would have taken too much time to learn, and it doesn&#39;t offer an out-of-the-box solution, as opposed to Vue and Svelte. Besides, the latters share the same concepts of single file components: logic (JavaScript), structure (HTML), and style (CSS) in the same file.</p><p>So we conducted some research and finally settled with Svelte. Here&#39;s an explanation of why and how.</p><h3 id="a-svelte-versus-vue-3"> a) Svelte Versus Vue 3</h3><p><strong>Better retention ratio for Svelte. </strong>For our new front end, we had to choose from two frameworks available on the market, namely Svelte and Vue 3. Below is an illustration of the different frameworks&#39; retention ratios (<strong>would use again</strong> / (<strong>would use again</strong> + <strong>would not use again</strong>)) over the past five years. Data were collected among developers in the field for the <a href="https://2021.stateofjs.com/en-US/libraries/front-end-frameworks/#front_end_frameworks_experience_ranking">State of JS survey</a>, and we can see that Svelte came in the 2nd position while Vue 3 only made it to the 4th.</p><figure><img src="https://escape.tech/blog/content/images/2022/10/2021-stateofjs.jpg" alt="" loading="lazy" width="2000" height="643" srcset="https://escape.tech/blog/content/images/size/w600/2022/10/2021-stateofjs.jpg 600w, https://escape.tech/blog/content/images/size/w1000/2022/10/2021-stateofjs.jpg 1000w, https://escape.tech/blog/content/images/size/w1600/2022/10/2021-stateofjs.jpg 1600w, https://escape.tech/blog/content/images/size/w2400/2022/10/2021-stateofjs.jpg 2400w" sizes="(min-width: 720px) 720px"/><figcaption>In 2021 Svelte was in the 2nd position and Vue 3 in 4th position (source: State of JS)</figcaption></figure><p>This shows us that there are way more developers who used Svelte in the past that would be willing to use it again than not.</p><p><strong>Better typing for Svelte.</strong></p><!--kg-card-begin: markdown--><table>
<thead>
<tr>
<th></th>
<th>Vue2</th>
<th>Vue3</th>
<th>Svelte</th>
</tr>
</thead>
<tbody>
<tr>
<td>Component-level typing</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Cross-component typing</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Typed events</td>
<td>No</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<!--kg-card-end: markdown--><p>Svelte offers a better typing experience with easier components&#39; designing processes and built-in typed events, making it very user-friendly for us.</p><p><strong>Restricted global access. </strong>With Svelte, it is possible to import enums from other files and use them in the template, which is not the case for Vue 3.</p><figure><img src="https://escape.tech/blog/content/images/2022/11/Capture-d-e-cran-2022-11-18-a--16.28.08.png" alt="" loading="lazy" width="2000" height="562" srcset="https://escape.tech/blog/content/images/size/w600/2022/11/Capture-d-e-cran-2022-11-18-a--16.28.08.png 600w, https://escape.tech/blog/content/images/size/w1000/2022/11/Capture-d-e-cran-2022-11-18-a--16.28.08.png 1000w, https://escape.tech/blog/content/images/size/w1600/2022/11/Capture-d-e-cran-2022-11-18-a--16.28.08.png 1600w, https://escape.tech/blog/content/images/2022/11/Capture-d-e-cran-2022-11-18-a--16.28.08.png 2400w" sizes="(min-width: 720px) 720px"/><figcaption>Escape Benchmark about frontend stack</figcaption></figure><p><strong>Syntax. </strong>Personally, I find Svelte syntax more elegant and user-friendly than Vue. You can check the code blocks below and see them for yourself.</p><p>Svelte</p><pre><code>&lt;script&gt;
    let firstName = &#34;&#34;;
    let town = &#34;&#34;;
    $: fullName = &#34;Full name: &#34; + firstName + &#39; &#39; + lastName;
    const reset = () =&gt; {
        firstName = &#34;&#34;;
        lastName = &#34;&#34;;
    }
&lt;/script&gt;
&lt;main&gt;
    &lt;div&gt;
        &lt;label&gt;First name&lt;/label&gt;
        &lt;input type=&#34;text&#34; bind:value={firstName}&gt;
        &lt;label&gt;Last name&lt;/label&gt;
        &lt;input type=&#34;text&#34; bind:value={lastName}&gt;
        &lt;button on:click={reset}&gt;Reset&lt;/button&gt;
    &lt;/div&gt;
    &lt;div&gt;
        {fullName}
    &lt;/div&gt;
&lt;/main&gt;
&lt;style&gt;
  main{
    background-color: white;
  }
&lt;/style&gt;</code></pre><p>Vue</p><pre><code>&lt;template&gt;
  &lt;main&gt;
    &lt;label&gt;First name &lt;/label&gt;
    &lt;input type=&#34;text&#34; v-model=&#34;firstName&#34;/&gt;
    &lt;label&gt;Last name &lt;/label&gt;
    &lt;input type=&#34;text&#34; v-model=&#34;lastName&#34;/&gt;
    &lt;div&gt;
        Full name: {{fullName}} 
    &lt;/div&gt;
    &lt;button @click=&#34;handleReset&#34;&gt;Reset&lt;/button&gt;
  &lt;/main&gt;
&lt;/template&gt;
&lt;script setup&gt;
import { ref, computed } from &#39;vue&#39;
const firstName = ref(&#39;&#39;)
const lastName = ref(&#39;&#39;)

const fullName = computed(() =&gt; { return firstName.value + &#34; &#34; + lastName.value; })

function handleReset() {
    firstName.value = &#34;&#34;
    lastName.value = &#34;&#34;
}
&lt;/script&gt;
&lt;style scoped&gt;
main{
  background-color: white;
}
&lt;/style&gt;</code></pre><p><strong>No extra HTML div</strong> <code><strong>&lt;template&gt;</strong></code><strong>.</strong> In Svelte you can directly write your own HTML. </p><p><strong>Style is automatically scoped in Svelte</strong>, which is a good point for maintainability and helps to avoid CSS side effects. The style of each component is isolated to affect only the component, not its parents nor its children.</p><p><strong>No computed properties are required to update data.</strong> In Svelte, it feels more like coding in pure javascript. You only have to focus on writing an arrow function:</p><pre><code>const reset = () =&gt; {firstName = &#34;&#34;;lastName = &#34;&#34;;}</code></pre><p>Only single brackets are necessary in Svelte </p><pre><code>//Svelte
{fullName}

//Vue
{{fullName}}</code></pre><p>Please note that this analysis is based on the specific code templates above and does not intend to give a detailed explanation of the frameworks&#39; differences. For further information, <a href="https://svelte.dev/blog/write-less-code">feel free to look online</a>.</p><p><strong>Simpler to add pure js plugins.</strong> Below is an example of a syntax highlighting integration use case with Svelte and <a href="https://github.com/PrismJS/prism">Prism.js</a>:</p><pre><code>// Prism.svelte
&lt;script&gt;
	import Prism from &#39;prismjs&#39;;

	export let code;
	export let lang = &#39;javascript&#39;;
&lt;/script&gt;

&lt;pre&gt;&lt;code class=&#34;language-{lang}&#34;&gt;{@html
	Prism.highlight(code, Prism.languages[lang], lang)
}&lt;/code&gt;&lt;/pre&gt;</code></pre><pre><code>// App.svelte
&lt;script&gt;
	import Prism from &#39;./Prism.svelte&#39;;
	let code = &#39;export const hello =\n\t(name) =&gt; {console.log(`Hello ${name}!`)};&#39;;
&lt;/script&gt;

&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-dark.min.css&#34; integrity=&#34;sha512-Njdz7T/p6Ud1FiTMqH87bzDxaZBsVNebOWmacBjMdgWyeIhUSFU4V52oGwo3sT+ud+lyIE98sS291/zxBfozKw==&#34; crossorigin=&#34;anonymous&#34; referrerpolicy=&#34;no-referrer&#34; /&gt;

&lt;Prism {code} /&gt;</code></pre><p><a href="https://svelte.dev/repl/eadd4295c0e4472fbfe599c581646ad6?version=3.53.1">Try on the REPL</a></p><p><strong>Compiling code without virtual DOM. </strong>The main difference between Svelte and Vue is the reduction of the layers&#39; number between the browser and the app, which results in more optimized and faster task completion.</p><p><strong>Automatic updates. </strong>With the help of declared variables, Svelte can automatically update your data. That way, you don&#39;t have to wait for changes to be reflected in your virtual structure, resulting in a better user experience.</p><h3 id="b-svelte-also-has-its-cons"> b) Svelte also has its cons</h3><p>Of course, Svelte has its shortcomings such as<strong> a relatively small community</strong> since it only came out in 2019. But as more and more developers may pick up on its qualities and user-friendly contents, support as well as the community may develop and grow in the future. There are already regular and very well-explained updates that are easily accessible on<strong> </strong>Github. </p><p>Therefore, after reviewing the results of this analysis, we decided to move forward with Svelte &amp; Svelte Kit even though SvelteKit was still in active development at the time of the migration. (See below)</p><figure><img src="https://escape.tech/blog/content/images/2022/11/Capture-d-e-cran-2022-11-18-a--16.29.14.png" alt="" loading="lazy" width="2000" height="237" srcset="https://escape.tech/blog/content/images/size/w600/2022/11/Capture-d-e-cran-2022-11-18-a--16.29.14.png 600w, https://escape.tech/blog/content/images/size/w1000/2022/11/Capture-d-e-cran-2022-11-18-a--16.29.14.png 1000w, https://escape.tech/blog/content/images/size/w1600/2022/11/Capture-d-e-cran-2022-11-18-a--16.29.14.png 1600w, https://escape.tech/blog/content/images/2022/11/Capture-d-e-cran-2022-11-18-a--16.29.14.png 2398w" sizes="(min-width: 720px) 720px"/><figcaption>Escape Benchmark about frontend stack</figcaption></figure><h3 id="which-method-did-we-choose-to-process-the-migration">Which method did we choose to process the migration?</h3><p><strong>When:</strong> We chose to proceed with the migration in August when fewer people were using the app.</p><p><strong>Time length: </strong>It took us two weeks to migrate all the files from Vue to Svelte.</p><p><strong>The number of developers: </strong>Two front-end developers worked full-time for two weeks alongside another developer who worked full-time for one week, so that&#39;s three developers involved.</p><p><strong>Workflow: </strong>First, we used <a href="https://www.notion.so/">Notion</a> tool to attribute our tickets to the team’s developers. Then, we started by creating our new components in <a href="https://storybook.js.org/">Storybook</a>, and finally, each developer was given a number of pages to rewrite in Svelte.</p><p><strong>As a startup, </strong>it was simpler to migrate because we didn&#39;t have a thousand files to rewrite, so we could perform quickly. However, we took the risk to start our migration to SvelteKit when it was still in active development, and that resulted in us having to make big-breaking changes only one month after the move. But the SvelteKit professional and knowledgeable team provided us with a command (npx svelte-migrate routes) and a very well-explained <a href="https://github.com/sveltejs/kit/discussions/5774">migration guide</a> that truly helped us adapt quickly to the new update.</p><p>In addition, in September, the SvelteKit team announced that the framework had finally entered its <a href="https://dev.to/mandrasch/svelte-summit-fall-2022-sveltekit-hits-rc-phase-52p6">release candidate phase</a>, which means its stability is now guaranteed!</p><p><strong>Files &amp; components organisation:</strong></p><p>The <a href="https://kit.svelte.dev/docs/routing">&#34;folder-based routing&#34;</a> of SvelteKit brought us a lot. We can split the pages into sub-pages so standard variables&#39; names, such as &#34;loading&#34;, &#34;submit&#34;, etc... can be reused. Besides, layouts are directly integrated into the associated routes, which is simpler to access due to increased organization within the tree.</p><h3 id="so-what-did-we-gain">So what did we gain?</h3><p>In addition to the benefits mentioned above, some other additional key factors deserve to be explored:</p><p><strong>Increased and smoother performance. </strong>Once compiled, we can appreciate the application&#39;s lightweight. This increases loading speed compared to other frameworks, which embed a &#34;runtime&#34; alongside the application&#39;s logic code.</p><p><strong>Better developer experience.</strong> SvelteKit uses Vite bundler, which is a new generation of JavaScript build tool that draws upon the availability of ES Modules in the browser and compile-to-native bundler to bring the best developer experience you can have from the most recent JavaScript technologies.</p><p><strong>Faster code execution.</strong> It has no virtual DOM, and that&#39;s one layer less to execute in order to make a change on the page.</p><p><strong>Up and running Server-side Rendering (SSR). </strong>In case of end users not having a good internet connection or javascript enabled, the platform will still be running efficiently with the help of the SSR, as users will still be able to load webpages while losing interactivity.</p><p><strong>Concise and easy-to-understand code.</strong> Svelte makes it possible to use more readable and maintainable, component-oriented code by grouping together in the same file: logic (JavaScript), structure (HTML) and style (CSS). The particularity is that all these elements are compiled in a .svelte file</p><p><strong>Fixed type checking. </strong>Since we migrated to Svelte, we have managed to solve our initial issues with type checking. Indeed, we previously had to handle recurrent notifications, and it is no longer the case today. No<strong> more annoying Sentry errors are showing up.</strong> (see below)</p><figure><img src="https://escape.tech/blog/content/images/2022/11/sentry-errors-2.jpg" alt="" loading="lazy" width="2000" height="528" srcset="https://escape.tech/blog/content/images/size/w600/2022/11/sentry-errors-2.jpg 600w, https://escape.tech/blog/content/images/size/w1000/2022/11/sentry-errors-2.jpg 1000w, https://escape.tech/blog/content/images/size/w1600/2022/11/sentry-errors-2.jpg 1600w, https://escape.tech/blog/content/images/2022/11/sentry-errors-2.jpg 2231w" sizes="(min-width: 720px) 720px"/><figcaption>Example of Sentry errors bot notifications on our Discord</figcaption></figure><p>All in all, the aforementioned benefits and gains make our developer experience much more enjoyable so we can focus on releasing better and faster features on our <a href="https://app.escape.tech/login/?to=%2F">Escape platform</a>, and that&#39;s a big advantage for the end users 😊</p>
        </section></div>
  </body>
</html>
