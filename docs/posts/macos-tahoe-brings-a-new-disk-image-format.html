<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2025/06/12/macos-tahoe-brings-a-new-disk-image-format/">Original</a>
    <h1>macOS Tahoe brings a new disk image format</h1>
    
    <div id="readability-page-1" class="page"><article id="post-86856">
	
	<!-- .entry-header -->

	
		<div data-first_letter="D">
		<p>Disk images have been valuable tools marred by poor performance. In the wrong circumstances, an encrypted sparse image (UDSP) stored on the blazingly fast internal SSD of an Apple silicon Mac may write files no faster than 100 MB/s, typical for a cheap hard drive. One of the important new features introduced in macOS 26 Tahoe is a new disk image format that can achieve near-native speeds: ASIF, <a href="https://developer.apple.com/documentation/virtualization/vzdiskimagestoragedeviceattachment/" target="_blank" rel="noopener">documented here</a>.</p>
<p>This has been detailed as a major improvement in lightweight virtualisation, where it promises to overcome the most significant performance limitation of VMs running on Apple silicon Macs. However, ASIF disk images are available for general use, and even work in macOS Sequoia. This article shows what they can do.</p>
<p>Apple provides few technical details, other than stating that the intrinsic structure of ASIF disk images doesn’t depend on the host file system’s capabilities, and their size on the host depends on the size of the data stored in the disk. In other words, they’re a sparse file in APFS, and are flagged as such.</p>
<h4>Make an ASIF disk image</h4>
<p>Currently, there are only two ways to create one of these new disk images, either in Tahoe’s Disk Utility, or using its <code>diskutil</code> command tool, as in</p>
<p>These are only good for Tahoe, as there’s no support for their creation in Sequoia 15.5 or earlier. Neither is there any access documented for the <code>hdiutil</code> command tool, more normally used to work with disk images, although its general commands should work fine with ASIFs.</p>
<p>Resulting disk images have a UTI type of <code>com.apple.disk-image-sparse</code>, in contrast to RAW (UDIF read-write) images of type <code>com.apple.disk-image-udif</code>, which can be used to distinguish them.</p>
<h4>Economy</h4>
<p>When first created, a 100 GB ASIF disk image took less than 1 GB disk space, but after extensive use and adding a second volume, its size on disk when empty again ranged between 1.9-3.2 GB. No attempt was made to compact the disk image using <code>hdiutil</code>, and its man page doesn’t make clear whether that’s supported or effective with this type of disk image.</p>
<h4>Performance</h4>
<p>Read and write performance were measured using <a href="https://eclecticlight.co/dintch/">Stibium</a> over a total of more than 50 GB in 160 files ranging in size from 2 MB to 2 GB in randomised order. When performed using a 100 GB ASIF image on the 2 TB internal SSD of a MacBook Pro M3 Pro running macOS 26 beta, transfer speeds for unencrypted APFS were 5.8 and 6.6 GB/s read and write. Those fell to 4.8 and 4.6 GB/s when using an APFS encrypted volume in the disk image.</p>
<p>Although there’s currently no way to create an ASIF disk image on a Mac running Sequoia, I compressed the disk image using Apple Archive (aar) to preserve its format and copied it to a Mac mini M4 Pro running macOS 15.5, and repeated the performance tests on its 2 TB internal SSD. Unencrypted APFS there attained 5.5 and 8.3 GB/s read and write.</p>
<h4>Use</h4>
<p>Apple recommends switching from the previous RAW (UDIF read-write) disk images used for the backing store of VMs to ASIF for their greater efficiency in file transfer between hosts or disks. As the disk image in a VM is created when the VM is first made and installed, this awaits implementation in virtualisers. Because the only access provided at present is the <code>diskutil</code> command tool, apps will need to consider creating an ASIF image where that’s available, in macOS 26 Tahoe.</p>
<p>Although ASIF appears to be supported by Sequoia 15.5, the danger with a VM based on an ASIF image is that it may not be compatible with older versions of macOS. Apple hasn’t yet revealed which of those can mount and use this new format.</p>
<p><a href="https://eclecticlight.co/2024/10/16/disk-images-performance/">Previous tests</a> on different types of disk image demonstrated that, prior to ASIF, the best performance was achieved by sparse bundles. The following table compares those with ASIF.</p>
<p><span><a href="https://eclecticlight.co/wp-content/uploads/2025/06/diskimages25.png"><img data-attachment-id="86854" data-permalink="https://eclecticlight.co/2025/06/12/macos-tahoe-brings-a-new-disk-image-format/diskimages25/" data-orig-file="https://eclecticlight.co/wp-content/uploads/2025/06/diskimages25.png" data-orig-size="1558,807" data-comments-opened="0" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="diskimages25" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlight.co/wp-content/uploads/2025/06/diskimages25.png?w=300" data-large-file="https://eclecticlight.co/wp-content/uploads/2025/06/diskimages25.png?w=940" src="https://eclecticlight.co/wp-content/uploads/2025/06/diskimages25.png" alt="" width="940" height="487"/></a></span></p>
<p>Allowing for the differences in chips, ASIF is clearly faster than both UDRW read-write and UDSP sparse images, whether plain or encrypted. It’s also likely to be significantly faster than sparse bundles, and has the advantage that it uses a single file for its backing store.</p>
<h4>Conclusions</h4>
<ul>
<li>Where possible, in macOS 26 Tahoe in particular, VMs should use ASIF disk images rather than RAW/UDRW.</li>
<li>Unless a sparse bundle is required (for example when it’s hosted on a different file system such as that in a NAS), ASIF should be first choice for general purpose disk images in Tahoe.</li>
<li>It would be preferable for virtualisers to be able to call a proper API rather than a command tool.</li>
<li>Keep an eye on <a href="https://c-command.com/dropdmg/" target="_blank" rel="noopener">C-Command’s DropDMG</a>. I’m sure it will support ASIF disk images soon.</li>
</ul>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>
  </body>
</html>
