<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/luamfb/tempest-lcd">Original</a>
    <h1>Tempest LCD: Playing songs from your LCD monitor with a radio</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path fill-rule="evenodd" d="M16 3.75a.75.75 0 00-1.136-.643L11 5.425V4.75A1.75 1.75 0 009.25 3h-7.5A1.75 1.75 0 000 4.75v6.5C0 12.216.784 13 1.75 13h7.5A1.75 1.75 0 0011 11.25v-.675l3.864 2.318A.75.75 0 0016 12.25v-8.5zm-5 5.075l3.5 2.1v-5.85l-3.5 2.1v1.65zM9.5 6.75v-2a.25.25 0 00-.25-.25h-7.5a.25.25 0 00-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-4.5z"></path>
</svg>
    <span aria-label="Video description demo.mp4">demo.mp4</span>
    <span></span>
  </summary>

  <video src="https://user-images.githubusercontent.com/83558186/183791965-dbcf0ff7-1fc1-4fc6-8043-4a30dbe81e75.mp4" data-canonical-src="https://user-images.githubusercontent.com/83558186/183791965-dbcf0ff7-1fc1-4fc6-8043-4a30dbe81e75.mp4" controls="controls" muted="muted">

  </video>
</details>

<h2 dir="auto"><a id="user-content-what-is-this" aria-hidden="true" href="#what-is-this"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What is this?</h2>
<p dir="auto">Some time ago, an amazing project named <a href="http://www.erikyyy.de/tempest" rel="nofollow">Tempest for Eliza</a> was created
to show that old CRT monitors leaked electromagnetic radiation,
some of which was in the usual radio wave frequency, and that,
by displaying specific images on-screen, it&#39;s actually possible to manipulate
the electromagnetic waves&#39; shape so that, if a radio tunes to a certain
frequency, it&#39;ll play a song.</p>
<p dir="auto">Nowadays, CRT monitors are a rare sight: everyone uses LCD monitors instead.
However, as it turns out, it is also possible to do the exact same thing
with LCD monitors, albeit rendering slightly different images.
This program is essentially meant to achieve the same as Tempest for Eliza,
but for LCD monitors, hence the name <strong>Tempest LCD</strong>.</p>
<h2 dir="auto"><a id="user-content-prerequisites" aria-hidden="true" href="#prerequisites"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites</h2>
<p dir="auto">First and foremost, you&#39;ll need a radio that can also handle AM waves
(as opposed to FM only).</p>
<p dir="auto">Additionally, the key information you&#39;ll need to run this program is
your monitor&#39;s <strong>horizontal refresh rate</strong>, which is the amount of pixel rows
it is currently rendering per second.
You can obtain this value by simply multiplying the height of the
current resolution by the number of frames per second (refresh rate) currently
in use.
On Linux X11, one can obtain this information with the command <code>xrandr</code>,
which marks the current mode with a asterisk. On my computer, this gives:</p>

<p dir="auto">To the left is the resolution (<code>width x height</code>), and to the right is the
number of frames per second currently in use. Therefore,
the horizontal refresh rate of the current mode in my monitor is
<code>60.06 * 768 ~ 46126</code>.</p>
<p dir="auto"><strong>Note</strong>: monitors usually support not only several resolutions, but often
several refresh rates as well. Make sure to take the currently used ones.</p>
<h2 dir="auto"><a id="user-content-running" aria-hidden="true" href="#running"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running</h2>
<p dir="auto"><a href="https://doc.rust-lang.org/cargo/getting-started/installation.html" rel="nofollow">Make sure you have cargo installed</a>, then run</p>
<div data-snippet-clipboard-copy-content="cargo run -- HORIZONTAL_REFRESH_RATE FILENAME"><pre>cargo run -- HORIZONTAL_REFRESH_RATE FILENAME</pre></div>
<p dir="auto">Where <code>FILENAME</code> is any file under the <code>inputs/</code> folder,
and <code>HORIZONTAL_REFRESH_RATE</code> is the value explained above.</p>
<p dir="auto">On the first run, this command will download all dependencies needed to run this
program. Note, however, that you will also need <a href="https://www.libsdl.org/index.php" rel="nofollow">SDL2</a> installed.
Consult your Linux distro&#39;s documentation for how to properly install it.</p>
<p dir="auto">Then, ensure your radio is on AM mode, and slowly change the frequency it&#39;s
tuned to until you hear the sound. You might have to run the command a few times
until finding the right frequency.</p>
<p dir="auto">You may optionally pass the string <code>cosine</code> as a third command line argument
(after FILENAME), which causes the program to use sinusoidal waves instead of
square waves. <a href="https://github.com/luamfb/tempest-lcd/blob/main/how-it-works.md">See how-it-works.md</a>.</p>
<h2 dir="auto"><a id="user-content-who-on-earth-had-this-idea-or-a-brief-history-of-this-project" aria-hidden="true" href="#who-on-earth-had-this-idea-or-a-brief-history-of-this-project"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Who on Earth had this idea? (Or: a brief history of this project)</h2>
<p dir="auto">It all started with <a href="https://www.cl.cam.ac.uk/~mgk25/ih98-tempest.pdf" rel="nofollow">this paper</a>, where the authors describe a way to make
(CRT) monitors broadcast an AM signal.</p>
<p dir="auto">From it, a GPL2 project named <a href="https://github.com/priikone/tempest-AM">Tempest AM</a> was implemented, closely following
the ideas presented on the paper, and using an X11 graphics library named G2,
that I&#39;ve frankly never heard of. (Maybe it was popular back then?)</p>
<p dir="auto">Then, another developer proceeded to greatly simplify the signal drawing
function, using SDL (version 1) as the graphics library.
That project was <a href="http://www.erikyyy.de/tempest" rel="nofollow">Tempest for Eliza</a>, which was previously mentioned
as the predecessor to this project.</p>
<p dir="auto">Finally, my role on this was to change Tempest for Eliza so it could work on
LCD monitors instead of CRT ones. Meanwhile, I&#39;ve also rewritten the code from
scratch (it wasn&#39;t a large codebase, and still isn&#39;t) to use SDL2, and to have,
hopefully, a clearer input file format.</p>
<h2 dir="auto"><a id="user-content-how-does-that-even-work" aria-hidden="true" href="#how-does-that-even-work"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How does that even work??</h2>
<p dir="auto">The explanation is rather long: <a href="https://github.com/luamfb/tempest-lcd/blob/main/how-it-works.md">see how-it-works.md</a></p>
<h2 dir="auto"><a id="user-content-input-files" aria-hidden="true" href="#input-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Input files</h2>
<p dir="auto">What this program needs as input is essentially a list of notes and rests,
along with their respective durations.
Therefore, ideally, this project would be able to take Standard MIDI files
(SMF) as input, since that is probably the most widespread media format that
conveys that sort of information.
However, parsing MIDI files is by itself a fairly complex task; on top of that,
MIDI files allow any number of notes to be playing simultaneously, which is not
straightforward to implement with this setup.
Therefore, in the end, we&#39;ve had to settle for a custom text format conveying
note information, like our predecessor, Tempest for Eliza, also used.
(However, hopefully, this format is more readable than the one that project
used...)</p>
<p dir="auto">The input file format is as follows.</p>
<p dir="auto">The file must have a number in its first line, and nothing else:
that number is interpreted as the BPM (beats per minute) of the song.
Currently, there&#39;s no way to make this value change throughout the song.</p>
<p dir="auto">On the subsequent lines, there can be any number of notes, separated from
each other by at least one space, with the following case insensitive fields,
from left to right:</p>
<ul dir="auto">
<li>
<p dir="auto">Note name (mandatory): Either <code>R</code>, indicating a rest, or <code>A</code> through <code>G</code>,
according to the English note naming convention.
Non-rest notes can be followed by a <code>#</code> (sharp, i.e. raises 1 semitone).
There&#39;s no way to indicate flats, so one must use sharps instead,
e.g. A sharp instead of B flat.</p>
</li>
<li>
<p dir="auto">Octave digit (mandatory for non-rest notes):
A single digit indicating the octave number the note belongs to.
The central octave is <code>4</code>, and <a href="https://en.wikipedia.org/wiki/A440_(pitch_standard)" rel="nofollow"><code>A4</code> is assigned 440Hz frequency</a>,
with other notes&#39; frequencies being calculated with the number of semitones
from <code>A4</code>, using <a href="https://en.wikipedia.org/wiki/12_equal_temperament" rel="nofollow">twelve-tone equal temperament</a>.</p>
</li>
<li>
<p dir="auto">Note duration (optional): The duration of a note, taken as the first letter
of the American English name of the <a href="https://en.wikipedia.org/wiki/Note_value" rel="nofollow">note value</a>. If this field is omitted,
it defaults to quarter. Currently, there&#39;s no way to specify values shorter
than thirty-second.</p>
<ul dir="auto">
<li>W: whole</li>
<li>H: half</li>
<li>Q: quarter</li>
<li>E: eighth</li>
<li>S: sixteenth</li>
<li>T: thirty-second</li>
</ul>
</li>
</ul>
<p dir="auto">Therefore, <code>c3</code>, <code>a#4h</code> and <code>d5e</code> would all be valid notes under this notation.</p>
<p dir="auto">It should be noted that, if the same note is played consecutively two or more
times, it will actually sound as a single note with their added duration.
That is, <code>e3 e3</code> will not sound as two quarter notes, but as a single half one
(and therefore equivalent to <code>e3h</code>). This happens because notes never &#34;fade out&#34;
after being played. This fact can be exploited to achieve ties and dotted notes.
However, if one does want the same notes to sound as individual notes,
the only way around this is placing a small rest between the notes.</p>
</article>
          </div></div>
  </body>
</html>
