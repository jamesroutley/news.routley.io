<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Use-Tusk/fence">Original</a>
    <h1>Show HN: Fence – Sandbox CLI commands with network/filesystem restrictions</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/Use-Tusk/fence/blob/main/assets/fence-banner.png"><img src="https://github.com/Use-Tusk/fence/raw/main/assets/fence-banner.png" alt="Fence Banner"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5c04ffb64a794ff7bd7b017ac402c1770e43371462f83fd1ed8282481b202d7d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f5573652d5475736b2f66656e6365"><img src="https://camo.githubusercontent.com/5c04ffb64a794ff7bd7b017ac402c1770e43371462f83fd1ed8282481b202d7d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f5573652d5475736b2f66656e6365" alt="GitHub Release" data-canonical-src="https://img.shields.io/github/v/release/Use-Tusk/fence"/></a></p>
<p dir="auto">Fence wraps commands in a sandbox that blocks network access by default and restricts filesystem operations based on configurable rules. It&#39;s most useful for running semi-trusted code (package installs, build scripts, CI jobs, unfamiliar repos) with controlled side effects, and it can also complement AI coding agents as defense-in-depth.</p>
<p dir="auto">You can also think of Fence as a permission manager for your CLI agents.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Block all network access (default)
fence curl https://example.com  # → 403 Forbidden

# Allow specific domains
fence -t code npm install  # → uses &#39;code&#39; template with npm/pypi/etc allowed

# Block dangerous commands
fence -c &#34;rm -rf /&#34;  # → blocked by command deny rules"><pre><span><span>#</span> Block all network access (default)</span>
fence curl https://example.com  <span><span>#</span> → 403 Forbidden</span>

<span><span>#</span> Allow specific domains</span>
fence -t code npm install  <span><span>#</span> → uses &#39;code&#39; template with npm/pypi/etc allowed</span>

<span><span>#</span> Block dangerous commands</span>
fence -c <span><span>&#34;</span>rm -rf /<span>&#34;</span></span>  <span><span>#</span> → blocked by command deny rules</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="curl -fsSL https://raw.githubusercontent.com/Use-Tusk/fence/main/install.sh | sh"><pre>curl -fsSL https://raw.githubusercontent.com/Use-Tusk/fence/main/install.sh <span>|</span> sh</pre></div>
<details>
<summary>Other installation methods</summary>
<p dir="auto"><strong>Go install:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/Use-Tusk/fence/cmd/fence@latest"><pre>go install github.com/Use-Tusk/fence/cmd/fence@latest</pre></div>
<p dir="auto"><strong>Build from source:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/Use-Tusk/fence
cd fence
go build -o fence ./cmd/fence"><pre>git clone https://github.com/Use-Tusk/fence
<span>cd</span> fence
go build -o fence ./cmd/fence</pre></div>
</details>
<p dir="auto"><strong>Additional requirements for Linux:</strong></p>
<ul dir="auto">
<li><code>bubblewrap</code> (for sandboxing)</li>
<li><code>socat</code> (for network bridging)</li>
<li><code>bpftrace</code> (optional, for filesystem violation visibility when monitoring with <code>-m</code>)</li>
</ul>


<div dir="auto" data-snippet-clipboard-copy-content="# Run command with all network blocked (no domains allowed by default)
fence curl https://example.com

# Run with shell expansion
fence -c &#34;echo hello &amp;&amp; ls&#34;

# Enable debug logging
fence -d curl https://example.com

# Use a template
fence -t code -- claude  # Runs Claude Code using `code` template config

# Monitor mode (shows violations)
fence -m npm install

# Show all commands and options
fence --help"><pre><span><span>#</span> Run command with all network blocked (no domains allowed by default)</span>
fence curl https://example.com

<span><span>#</span> Run with shell expansion</span>
fence -c <span><span>&#34;</span>echo hello &amp;&amp; ls<span>&#34;</span></span>

<span><span>#</span> Enable debug logging</span>
fence -d curl https://example.com

<span><span>#</span> Use a template</span>
fence -t code -- claude  <span><span>#</span> Runs Claude Code using `code` template config</span>

<span><span>#</span> Monitor mode (shows violations)</span>
fence -m npm install

<span><span>#</span> Show all commands and options</span>
fence --help</pre></div>

<p dir="auto">Fence reads from <code>~/.fence.json</code> by default:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;extends&#34;: &#34;code&#34;,
  &#34;network&#34;: { &#34;allowedDomains&#34;: [&#34;private.company.com&#34;] },
  &#34;filesystem&#34;: { &#34;allowWrite&#34;: [&#34;.&#34;] },
  &#34;command&#34;: { &#34;deny&#34;: [&#34;git push&#34;, &#34;npm publish&#34;] }
}"><pre>{
  <span>&#34;extends&#34;</span>: <span><span>&#34;</span>code<span>&#34;</span></span>,
  <span>&#34;network&#34;</span>: { <span>&#34;allowedDomains&#34;</span>: [<span><span>&#34;</span>private.company.com<span>&#34;</span></span>] },
  <span>&#34;filesystem&#34;</span>: { <span>&#34;allowWrite&#34;</span>: [<span><span>&#34;</span>.<span>&#34;</span></span>] },
  <span>&#34;command&#34;</span>: { <span>&#34;deny&#34;</span>: [<span><span>&#34;</span>git push<span>&#34;</span></span>, <span><span>&#34;</span>npm publish<span>&#34;</span></span>] }
}</pre></div>
<p dir="auto">Use <code>fence --settings ./custom.json</code> to specify a different config.</p>

<div dir="auto" data-snippet-clipboard-copy-content="fence import --claude -o ~/.fence.json"><pre>fence import --claude -o <span>~</span>/.fence.json</pre></div>

<ul dir="auto">
<li><strong>Network isolation</strong> - All outbound blocked by default; allowlist domains via config</li>
<li><strong>Filesystem restrictions</strong> - Control read/write access paths</li>
<li><strong>Command blocking</strong> - Deny dangerous commands like <code>rm -rf /</code>, <code>git push</code></li>
<li><strong>SSH Command Filtering</strong> - Control which hosts and commands are allowed over SSH</li>
<li><strong>Built-in templates</strong> - Pre-configured rulesets for common workflows</li>
<li><strong>Violation monitoring</strong> - Real-time logging of blocked requests (<code>-m</code>)</li>
<li><strong>Cross-platform</strong> - macOS (sandbox-exec) + Linux (bubblewrap)</li>
</ul>
<p dir="auto">Fence can be used as a Go package or CLI tool.</p>

<ul dir="auto">
<li><a href="https://github.com/Use-Tusk/fence/blob/main/docs/README.md">Index</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/docs/quickstart.md">Quickstart Guide</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/docs/configuration.md">Configuration Reference</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/docs/security-model.md">Security Model</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/ARCHITECTURE.md">Architecture</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/docs/library.md">Library Usage (Go)</a></li>
<li><a href="https://github.com/Use-Tusk/fence/blob/main/examples">Examples</a></li>
</ul>

<p dir="auto">Inspired by Anthropic&#39;s <a href="https://github.com/anthropic-experimental/sandbox-runtime">sandbox-runtime</a>.</p>
</article></div></div>
  </body>
</html>
