<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mastodon/mastodon/releases/tag/v4.0.0rc1">Original</a>
    <h1>Mastodon v4.0.0 Release Candidate</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true">
<blockquote>
<p><strong>Note:</strong> This is a release candidate. It is intended to be stable, but not guaranteed.</p>
</blockquote>
<h2>Upgrade overview</h2>
<p>This release contains upgrade notes that deviate from the norm:</p>
<p><g-emoji alias="information_source" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png">ℹ️</g-emoji> Requires two-step database migration process for zero-downtime deployment</p>
<p>For more information, scroll down to the upgrade instructions section.</p>
<h2>Changelog</h2>
<p>Some of the features in this release have been funded through the <a href="https://nlnet.nl/discovery" rel="nofollow">NGI0 Discovery</a> Fund, a fund established by <a href="https://nlnet.nl/" rel="nofollow">NLnet</a> with financial support from the European Commission&#39;s <a href="https://ngi.eu/" rel="nofollow">Next Generation Internet</a> programme, under the aegis of DG Communications Networks, Content and Technology under grant agreement No 825322.</p>
<h3>Added</h3>
<ul>
<li>Add ability to filter followed accounts&#39; posts by language (<a href="https://github.com/mastodon/mastodon/pull/19095" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19095/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19268" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19268/hovercard">ClearlyClaire</a>)</li>
<li><strong>Add ability to follow hashtags</strong> (<a href="https://github.com/mastodon/mastodon/pull/18809" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18809/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18862" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18862/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19472" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19472/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18924" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18924/hovercard">noellabo</a>)</li>
<li>Add ability to filter individual posts (<a href="https://github.com/mastodon/mastodon/pull/18945" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18945/hovercard">ClearlyClaire</a>)</li>
<li><strong>Add ability to translate posts</strong> (<a href="https://github.com/mastodon/mastodon/pull/19218" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19218/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19433" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19433/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19453" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19453/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19434" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19434/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19388" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19388/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19244" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19244/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19245" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19245/hovercard">Gargron</a>)</li>
<li>Add featured tags to web UI (<a href="https://github.com/mastodon/mastodon/pull/19408" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19408/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19380" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19380/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19358" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19358/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19409" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19409/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19382" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19382/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19418" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19418/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19403" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19403/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19404" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19404/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/19398" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19398/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19712" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19712/hovercard">Gargron</a>)</li>
<li><strong>Add support for language preferences for trending statuses and links</strong> (<a href="https://github.com/mastodon/mastodon/pull/18288" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18288/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19349" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19349/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19335" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19335/hovercard">ykzts</a>)
<ul>
<li>Previously, you could only see trends in your current language</li>
<li>For less popular languages, that meant empty trends</li>
<li>Now, trends in your preferred languages&#39; are shown on top, with others beneath</li>
</ul>
</li>
<li>Add server rules to sign-up flow (<a href="https://github.com/mastodon/mastodon/pull/19296" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19296/hovercard">Gargron</a>)</li>
<li>Add privacy icons to report modal in web UI (<a href="https://github.com/mastodon/mastodon/pull/19190" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19190/hovercard">ClearlyClaire</a>)</li>
<li>Add <code>noopener</code> to links to remote profiles in web UI (<a href="https://github.com/mastodon/mastodon/pull/19014" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19014/hovercard">shleeable</a>)</li>
<li>Add warning for sensitive audio posts in web UI (<a href="https://github.com/mastodon/mastodon/pull/17885" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/17885/hovercard">rgroothuijsen</a>)</li>
<li>Add language attribute to posts in web UI (<a href="https://github.com/mastodon/mastodon/pull/18544" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18544/hovercard">tribela</a>)</li>
<li>Add support for uploading WebP files (<a href="https://github.com/mastodon/mastodon/pull/18506" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18506/hovercard">Saiv46</a>)</li>
<li>Add support for uploading <code>audio/vnd.wave</code> files (<a href="https://github.com/mastodon/mastodon/pull/18737" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18737/hovercard">tribela</a>)</li>
<li>Add support for uploading AVIF files (<a href="https://github.com/mastodon/mastodon/pull/19647" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19647/hovercard">txt-file</a>)</li>
<li>Add support for uploading HEIC files (<a href="https://github.com/mastodon/mastodon/pull/19618" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19618/hovercard">Gargron</a>)</li>
<li>Add more debug information when processing remote accounts (<a href="https://github.com/mastodon/mastodon/pull/15605" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/15605/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19209" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19209/hovercard">ClearlyClaire</a>)</li>
<li><strong>Add retention policy for cached content and media</strong> (<a href="https://github.com/mastodon/mastodon/pull/19232" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19232/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19478" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19478/hovercard">zunda</a>, <a href="https://github.com/mastodon/mastodon/pull/19458" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19458/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19248" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19248/hovercard">Gargron</a>)
<ul>
<li>Set for how long remote posts or media should be cached on your server</li>
<li>Hands-off alternative to <code>tootctl</code> commands</li>
</ul>
</li>
<li><strong>Add customizable user roles</strong> (<a href="https://github.com/mastodon/mastodon/pull/18641" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18641/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18812" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18812/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19040" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19040/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18825" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18825/hovercard">tribela</a>, <a href="https://github.com/mastodon/mastodon/pull/18826" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18826/hovercard">tribela</a>, <a href="https://github.com/mastodon/mastodon/pull/18776" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18776/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18777" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18777/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18786" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18786/hovercard">unextro</a>, <a href="https://github.com/mastodon/mastodon/pull/18824" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18824/hovercard">tribela</a>, <a href="https://github.com/mastodon/mastodon/pull/19436" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19436/hovercard">ClearlyClaire</a>)
<ul>
<li>Previously, there were 3 hard-coded roles, user, moderator, and admin</li>
<li>Create your own roles and decide which permissions they should have</li>
</ul>
</li>
<li>Add notifications for new reports (<a href="https://github.com/mastodon/mastodon/pull/18697" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18697/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19475" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19475/hovercard">Gargron</a>)</li>
<li>Add ability to select all accounts matching search for batch actions in admin UI (<a href="https://github.com/mastodon/mastodon/pull/19053" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19053/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19054" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19054/hovercard">Gargron</a>)</li>
<li>Add ability to view previous edits of a status in admin UI (<a href="https://github.com/mastodon/mastodon/pull/19462" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19462/hovercard">Gargron</a>)</li>
<li>Add ability to block sign-ups from IP (<a href="https://github.com/mastodon/mastodon/pull/19037" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19037/hovercard">Gargron</a>)</li>
<li><strong>Add webhooks to admin UI</strong> (<a href="https://github.com/mastodon/mastodon/pull/18510" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18510/hovercard">Gargron</a>)</li>
<li>Add admin API for managing domain allows (<a href="https://github.com/mastodon/mastodon/pull/18668" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18668/hovercard">ClearlyClaire</a>)</li>
<li>Add admin API for managing domain blocks (<a href="https://github.com/mastodon/mastodon/pull/18247" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18247/hovercard">ClearlyClaire</a>)</li>
<li>Add admin API for managing e-mail domain blocks (<a href="https://github.com/mastodon/mastodon/pull/19066" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19066/hovercard">Gargron</a>)</li>
<li>Add admin API for managing canonical e-mail blocks (<a href="https://github.com/mastodon/mastodon/pull/19067" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19067/hovercard">Gargron</a>)</li>
<li>Add admin API for managing IP blocks (<a href="https://github.com/mastodon/mastodon/pull/19065" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19065/hovercard">Gargron</a>)</li>
<li>Add <code>services</code> and <code>metadata</code> to the NodeInfo endpoint (<a href="https://github.com/mastodon/mastodon/pull/18563" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18563/hovercard">MFTabriz</a>)</li>
<li>Add <code>--remove-role</code> option to <code>tootctl accounts modify</code> (<a href="https://github.com/mastodon/mastodon/pull/19477" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19477/hovercard">Gargron</a>)</li>
<li>Add <code>--days</code> option to <code>tootctl media refresh</code> (<a href="https://github.com/mastodon/mastodon/pull/18425" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18425/hovercard">tribela</a>)</li>
<li>Add <code>EMAIL_DOMAIN_LISTS_APPLY_AFTER_CONFIRMATION</code> environment variable (<a href="https://github.com/mastodon/mastodon/pull/18642" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18642/hovercard">ClearlyClaire</a>)</li>
<li>Add <code>IP_RETENTION_PERIOD</code> and <code>SESSION_RETENTION_PERIOD</code> environment variables (<a href="https://github.com/mastodon/mastodon/pull/18757" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18757/hovercard">kescherCode</a>)</li>
<li>Add <code>http_hidden_proxy</code> environment variable (<a href="https://github.com/mastodon/mastodon/pull/18427" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18427/hovercard">tribela</a>)</li>
<li>Add caching for payload serialization during fan-out (<a href="https://github.com/mastodon/mastodon/pull/19637" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19637/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19642" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19642/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19746" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19746/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19747" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19747/hovercard">ClearlyClaire</a>)</li>
<li>Add assets from Twemoji 14.0 (<a href="https://github.com/mastodon/mastodon/pull/19733" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19733/hovercard">Gargron</a>)</li>
<li>Add reputation and followers score boost to SQL-only account search (<a href="https://github.com/mastodon/mastodon/pull/19251" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19251/hovercard">Gargron</a>)</li>
</ul>
<h3>Changed</h3>
<ul>
<li><strong>Change brand color and logotypes</strong> (<a href="https://github.com/mastodon/mastodon/pull/18592" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18592/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18639" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18639/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18691" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18691/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18634" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18634/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19254" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19254/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18710" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18710/hovercard">mayaeh</a>)</li>
<li><strong>Change post editing to be enabled in web UI</strong> (<a href="https://github.com/mastodon/mastodon/pull/19103" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19103/hovercard">Gargron</a>)</li>
<li><strong>Change web UI to work for logged-out users</strong> (<a href="https://github.com/mastodon/mastodon/pull/18961" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18961/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19250" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19250/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19294" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19294/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19306" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19306/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19315" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19315/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19322" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19322/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19412" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19412/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19437" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19437/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19415" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19415/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19348" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19348/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19295" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19295/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19422" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19422/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19414" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19414/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19319" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19319/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19345" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19345/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19310" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19310/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19301" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19301/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19423" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19423/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19471" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19471/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19333" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19333/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19337" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19337/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19272" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19272/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19468" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19468/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19466" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19466/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19457" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19457/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19426" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19426/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19427" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19427/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19421" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19421/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19417" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19417/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19413" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19413/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19397" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19397/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19387" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19387/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19396" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19396/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19385" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19385/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19334" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19334/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19329" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19329/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19324" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19324/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19318" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19318/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19316" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19316/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19263" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19263/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19305" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19305/hovercard">trwnh</a>, <a href="https://github.com/mastodon/mastodon/pull/19273" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19273/hovercard">ykzts</a>, <a href="https://github.com/mastodon/mastodon/pull/19801" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19801/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19790" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19790/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19773" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19773/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19798" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19798/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19724" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19724/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19709" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19709/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19514" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19514/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19562" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19562/hovercard">Gargron</a>)
<ul>
<li>The web app can now be accessed without being logged in</li>
<li>No more <code>/web</code> prefix on web app paths</li>
<li>Profiles, posts, and other public pages now use the same interface for logged in and logged out users</li>
<li>The web app displays a server information banner</li>
<li>Pop-up windows for remote interaction have been replaced with a modal window</li>
<li>No need to type in your username for remote interaction, copy-paste-to-search method explained</li>
<li>Various hints throughout the app explain what the different timelines are</li>
<li>New about page design</li>
<li>New privacy policy page design shows when the policy was last updated</li>
<li>All sections of the web app now have appropriate window titles</li>
<li>The layout of the interface has been streamlined between different screen sizes</li>
<li>Posts now use more horizontal space</li>
</ul>
</li>
<li>Change label of publish button to be &#34;Publish&#34; again in web UI (<a href="https://github.com/mastodon/mastodon/pull/18583" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18583/hovercard">Gargron</a>)</li>
<li>Change language to be carried over on reply in web UI (<a href="https://github.com/mastodon/mastodon/pull/18557" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18557/hovercard">ClearlyClaire</a>)</li>
<li>Change &#34;Unfollow&#34; to &#34;Cancel follow request&#34; when request still pending in web UI (<a href="https://github.com/mastodon/mastodon/pull/19363" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19363/hovercard">prplecake</a>)</li>
<li><strong>Change post filtering system</strong> (<a href="https://github.com/mastodon/mastodon/pull/18058" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18058/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19050" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19050/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18894" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18894/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/19051" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19051/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18923" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18923/hovercard">noellabo</a>, <a href="https://github.com/mastodon/mastodon/pull/18956" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18956/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18744" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18744/hovercard">ClearlyClaire</a>)
<ul>
<li>Filtered keywords and phrases can now be grouped into named categories</li>
<li>Filtered posts show which exact filter was hit</li>
<li>Individual posts can be added to a filter</li>
<li>You can peek inside filtered posts anyway</li>
</ul>
</li>
<li>Change path of privacy policy page from <code>/terms</code> to <code>/privacy-policy</code> (<a href="https://github.com/mastodon/mastodon/pull/19249" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19249/hovercard">Gargron</a>)</li>
<li>Change how hashtags are normalized (<a href="https://github.com/mastodon/mastodon/pull/18795" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18795/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18863" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18863/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/18854" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18854/hovercard">ClearlyClaire</a>)</li>
<li>Change public (but not hashtag) timelines to be filtered by current locale by default (<a href="https://github.com/mastodon/mastodon/pull/19291" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19291/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19563" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19563/hovercard">Gargron</a>)</li>
<li>Change settings area to be separated into categories in admin UI (<a href="https://github.com/mastodon/mastodon/pull/19407" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19407/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19533" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19533/hovercard">Gargron</a>)</li>
<li>Change &#34;No accounts selected&#34; errors to use the appropriate noun in admin UI (<a href="https://github.com/mastodon/mastodon/pull/19356" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19356/hovercard">prplecake</a>)</li>
<li>Change e-mail domain blocks to match subdomains of blocked domains (<a href="https://github.com/mastodon/mastodon/pull/18979" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18979/hovercard">Gargron</a>)</li>
<li>Change custom emoji file size limit from 50 KB to 256 KB (<a href="https://github.com/mastodon/mastodon/pull/18788" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18788/hovercard">Gargron</a>)</li>
<li>Change &#34;Allow trends without prior review&#34; setting to also work for trending posts (<a href="https://github.com/mastodon/mastodon/pull/17977" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/17977/hovercard">Gargron</a>)</li>
<li>Change admin announcements form to use single inputs for date and time in admin UI (<a href="https://github.com/mastodon/mastodon/pull/18321" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18321/hovercard">ClearlyClaire</a>)</li>
<li>Change search API to be accessible without being logged in (<a href="https://github.com/mastodon/mastodon/pull/18963" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18963/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19326" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19326/hovercard">Gargron</a>)</li>
<li>Change following and followers API to be accessible without being logged in (<a href="https://github.com/mastodon/mastodon/pull/18964" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18964/hovercard">Gargron</a>)</li>
<li>Change <code>AUTHORIZED_FETCH</code> to not block unauthenticated REST API access (<a href="https://github.com/mastodon/mastodon/pull/19803" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19803/hovercard">Gargron</a>)</li>
<li>Change Helm configuration (<a href="https://github.com/mastodon/mastodon/pull/18997" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18997/hovercard">deepy</a>, <a href="https://github.com/mastodon/mastodon/pull/18415" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18415/hovercard">jgsmith</a>, <a href="https://github.com/mastodon/mastodon/pull/18941" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18941/hovercard">deepy</a>)</li>
<li>Change mentions of blocked users to not be processed (<a href="https://github.com/mastodon/mastodon/pull/19725" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19725/hovercard">ClearlyClaire</a>)</li>
<li>Change max. thumbnail dimensions to 640x360px (360p) (<a href="https://github.com/mastodon/mastodon/pull/19619" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19619/hovercard">Gargron</a>)</li>
<li>Change post-processing to be deferred only for large media types (<a href="https://github.com/mastodon/mastodon/pull/19617" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19617/hovercard">Gargron</a>)</li>
</ul>
<h3>Removed</h3>
<ul>
<li>Remove setting that disables account deletes (<a href="https://github.com/mastodon/mastodon/pull/17683" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/17683/hovercard">Gargron</a>)</li>
<li>Remove digest e-mails (<a href="https://github.com/mastodon/mastodon/pull/17985" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/17985/hovercard">Gargron</a>)</li>
<li>Remove unnecessary sections from welcome e-mail (<a href="https://github.com/mastodon/mastodon/pull/19299" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19299/hovercard">Gargron</a>)</li>
<li>Remove item titles from RSS feeds (<a href="https://github.com/mastodon/mastodon/pull/18640" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18640/hovercard">Gargron</a>)</li>
<li>Remove volume number from hashtags in web UI (<a href="https://github.com/mastodon/mastodon/pull/19253" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19253/hovercard">Gargron</a>)</li>
<li>Remove Nanobox configuration (<a href="https://github.com/mastodon/mastodon/pull/17881" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/17881/hovercard">tonyjiang</a>)</li>
</ul>
<h3>Fixed</h3>
<ul>
<li>Fix featured tags not saving preferred casing (<a href="https://github.com/mastodon/mastodon/pull/19732" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19732/hovercard">Gargron</a>)</li>
<li>Fix language not being saved when editing status (<a href="https://github.com/mastodon/mastodon/pull/19543" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19543/hovercard">Gargron</a>)</li>
<li>Fix not being able to input featured tag with hash symbol (<a href="https://github.com/mastodon/mastodon/pull/19535" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19535/hovercard">Gargron</a>)</li>
<li>Fix user clean-up scheduler crash when an unconfirmed account has a moderation note (<a href="https://github.com/mastodon/mastodon/pull/19629" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19629/hovercard">ClearlyClaire</a>)</li>
<li>Fix being unable to withdraw follow request when confirmation modal is disabled in web UI (<a href="https://github.com/mastodon/mastodon/pull/19687" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19687/hovercard">ClearlyClaire</a>)</li>
<li>Fix inaccurate admin log entry for re-sending confirmation e-mails (<a href="https://github.com/mastodon/mastodon/pull/19674" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19674/hovercard">ClearlyClaire</a>)</li>
<li>Fix edits not being immediately reflected (<a href="https://github.com/mastodon/mastodon/pull/19673" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19673/hovercard">ClearlyClaire</a>)</li>
<li>Fix bookmark import stopping at the first failure (<a href="https://github.com/mastodon/mastodon/pull/19669" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19669/hovercard">ClearlyClaire</a>)</li>
<li>Fix account action type validation (<a href="https://github.com/mastodon/mastodon/pull/19476" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19476/hovercard">Gargron</a>)</li>
<li>Fix upload progress not communicating processing phase in web UI (<a href="https://github.com/mastodon/mastodon/pull/19530" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19530/hovercard">Gargron</a>)</li>
<li>Fix wrong host being used for custom.css when asset host configured (<a href="https://github.com/mastodon/mastodon/pull/19521" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19521/hovercard">Gargron</a>)</li>
<li>Fix account migration form ever using outdated account data (<a href="https://github.com/mastodon/mastodon/pull/18429" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18429/hovercard">Gargron</a>)</li>
<li>Fix error when uploading malformed CSV import (<a href="https://github.com/mastodon/mastodon/pull/19509" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19509/hovercard">Gargron</a>)</li>
<li>Fix avatars not using image tags in web UI (<a href="https://github.com/mastodon/mastodon/pull/19488" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19488/hovercard">Gargron</a>)</li>
<li>Fix handling of duplicate and out-of-order notifications in web UI (<a href="https://github.com/mastodon/mastodon/pull/19693" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19693/hovercard">ClearlyClaire</a>)</li>
<li>Fix reblogs being discarded after the reblogged status (<a href="https://github.com/mastodon/mastodon/pull/19731" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19731/hovercard">ClearlyClaire</a>)</li>
<li>Fix indexing scheduler trying to index when Elasticsearch is disabled (<a href="https://github.com/mastodon/mastodon/pull/19805" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19805/hovercard">Gargron</a>)</li>
<li>Fix n+1 queries when rendering initial state JSON (<a href="https://github.com/mastodon/mastodon/pull/19795" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19795/hovercard">Gargron</a>)</li>
<li>Fix n+1 query during status removal (<a href="https://github.com/mastodon/mastodon/pull/19753" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19753/hovercard">Gargron</a>)</li>
<li>Fix OCR not working due to Content Security Policy in web UI (<a href="https://github.com/mastodon/mastodon/pull/18817" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18817/hovercard">prplecake</a>)</li>
<li>Fix <code>nofollow</code> rel being removed in web UI (<a href="https://github.com/mastodon/mastodon/pull/19455" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19455/hovercard">Gargron</a>)</li>
<li>Fix language dropdown causing zoom on mobile devices in web UI (<a href="https://github.com/mastodon/mastodon/pull/19428" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19428/hovercard">Gargron</a>)</li>
<li>Fix button to dismiss suggestions not showing up in search results in web UI (<a href="https://github.com/mastodon/mastodon/pull/19325" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19325/hovercard">ClearlyClaire</a>)</li>
<li>Fix language dropdown sometimes not appearing in web UI (<a href="https://github.com/mastodon/mastodon/pull/19246" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19246/hovercard">Gargron</a>)</li>
<li>Fix quickly switching notification filters resulting in empty or incorrect list in web UI (<a href="https://github.com/mastodon/mastodon/pull/19052" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19052/hovercard">ClearlyClaire</a>, <a href="https://github.com/mastodon/mastodon/pull/18960" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18960/hovercard">ClearlyClaire</a>)</li>
<li>Fix media modal link button in web UI (<a href="https://github.com/mastodon/mastodon/pull/18877" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18877/hovercard">ClearlyClaire</a>)</li>
<li>Fix error upon successful account migration (<a href="https://github.com/mastodon/mastodon/pull/19386" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19386/hovercard">Gargron</a>)</li>
<li>Fix negatives values in search index causing queries to fail (<a href="https://github.com/mastodon/mastodon/pull/19464" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19464/hovercard">Gargron</a>, <a href="https://github.com/mastodon/mastodon/pull/19481" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19481/hovercard">Gargron</a>)</li>
<li>Fix error when searching for invalid URL (<a href="https://github.com/mastodon/mastodon/pull/18580" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18580/hovercard">ClearlyClaire</a>)</li>
<li>Fix IP blocks not having a unique index (<a href="https://github.com/mastodon/mastodon/pull/19456" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19456/hovercard">Gargron</a>)</li>
<li>Fix remote account in contact account setting not being used (<a href="https://github.com/mastodon/mastodon/pull/19351" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19351/hovercard">Gargron</a>)</li>
<li>Fix swallowing mentions of unconfirmed/unapproved users (<a href="https://github.com/mastodon/mastodon/pull/19191" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19191/hovercard">ClearlyClaire</a>)</li>
<li>Fix incorrect and slow cache invalidation when blocking domain and removing media attachments (<a href="https://github.com/mastodon/mastodon/pull/19062" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19062/hovercard">ClearlyClaire</a>)</li>
<li>Fix HTTPs redirect behaviour when running as I2P service (<a href="https://github.com/mastodon/mastodon/pull/18929" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18929/hovercard">gi-yt</a>)</li>
<li>Fix deleted pinned posts potentially counting towards the pinned posts limit (<a href="https://github.com/mastodon/mastodon/pull/19005" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19005/hovercard">ClearlyClaire</a>)</li>
<li>Fix compatibility with OpenSSL 3.0 (<a href="https://github.com/mastodon/mastodon/pull/18449" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18449/hovercard">ClearlyClaire</a>)</li>
<li>Fix error when a remote report includes a private post the server has no access to (<a href="https://github.com/mastodon/mastodon/pull/18760" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18760/hovercard">ClearlyClaire</a>)</li>
<li>Fix suspicious sign-in mails never being sent (<a href="https://github.com/mastodon/mastodon/pull/18599" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18599/hovercard">ClearlyClaire</a>)</li>
<li>Fix fallback locale when somehow user&#39;s locale is an empty string (<a href="https://github.com/mastodon/mastodon/pull/18543" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18543/hovercard">tribela</a>)</li>
<li>Fix avatar/header not being deleted locally when deleted on remote account (<a href="https://github.com/mastodon/mastodon/pull/18973" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18973/hovercard">tribela</a>)</li>
<li>Fix missing <code>,</code> in Blurhash validation (<a href="https://github.com/mastodon/mastodon/pull/18660" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18660/hovercard">noellabo</a>)</li>
<li>Fix order by most recent not working for relationships page in admin UI (<a href="https://github.com/mastodon/mastodon/pull/18996" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18996/hovercard">tribela</a>)</li>
<li>Fix uncaught error when invalid date is supplied to API (<a href="https://github.com/mastodon/mastodon/pull/19480" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19480/hovercard">Gargron</a>)</li>
<li>Fix REST API sometimes returning HTML on error (<a href="https://github.com/mastodon/mastodon/pull/19135" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19135/hovercard">ClearlyClaire</a>)</li>
<li>Fix ambiguous column names in <code>tootctl media refresh</code> (<a href="https://github.com/mastodon/mastodon/pull/19206" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/19206/hovercard">tribela</a>)</li>
<li>Fix ambiguous column names in <code>tootctl search deploy</code> (<a href="https://github.com/mastodon/mastodon/pull/18993" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18993/hovercard">mashirozx</a>)</li>
<li>Fix <code>CDN_HOST</code> not being used in some asset URLs (<a href="https://github.com/mastodon/mastodon/pull/18662" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18662/hovercard">tribela</a>)</li>
<li>Fix <code>CAS_DISPLAY_NAME</code>, <code>SAML_DISPLAY_NAME</code> and <code>OIDC_DISPLAY_NAME</code> being ignored (<a href="https://github.com/mastodon/mastodon/pull/18568" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18568/hovercard">ClearlyClaire</a>)</li>
<li>Fix various typos in comments throughout the codebase (<a href="https://github.com/mastodon/mastodon/pull/18604" data-hovercard-type="pull_request" data-hovercard-url="/mastodon/mastodon/pull/18604/hovercard">luzpaz</a>)</li>
</ul>
<h2>Upgrade notes</h2>
<p>To get the code for v4.0.0rc1, use <code>git fetch &amp;&amp; git checkout v4.0.0rc1</code>.</p>
<blockquote>
<p>As always, <strong>make sure you have backups of the database before performing any upgrades</strong>. If you are using docker-compose, this is how a backup command might look: docker exec mastodon_db_1 pg_dump -Fc -U postgres postgres &gt; name_of_the_backup.dump</p>
</blockquote>
<h3>Update steps</h3>
<p>The following instructions are for updating from 3.5.3.</p>
<p>If you are upgrading directly from an earlier release, please carefully read the upgrade notes for the skipped releases as well, as they often require extra steps such as database migrations.</p>
<p><strong>Non-Docker only:</strong></p>
<ul>
<li>The recommended Ruby version has been bumped to 3.0.4. You can upgrade, or you can continue using the old version by overwriting the ``.ruby-version file with e.g. <code>3.0.3</code> which was recommended previously</li>
<li>Install dependencies: <code>bundle install</code> and <code>yarn install</code></li>
</ul>
<p><strong>Both Docker and non-Docker:</strong></p>
<ol>
<li>Run the <em>pre-deployment</em> database migrations by specifying the <code>SKIP_POST_DEPLOYMENT_MIGRATIONS=true</code> environment variable:
<ul>
<li>Non-Docker: <code>SKIP_POST_DEPLOYMENT_MIGRATIONS=true RAILS_ENV=production bundle exec rails db:migrate</code></li>
<li>Docker: <code>docker-compose run --rm -e SKIP_POST_DEPLOYMENT_MIGRATIONS=true web rails db:migrate</code></li>
</ul>
</li>
<li>Precompile the assets:
<ul>
<li>Non-Docker: <code>RAILS_ENV=production bundle exec rails assets:precompile</code></li>
<li>Docker: The assets are already precompiled during the build step</li>
</ul>
</li>
<li>Restart all Mastodon processes</li>
<li>Now that the new code is running, we can finish the database migrations. This will run the <em>post-deployment</em> ones:
<ul>
<li>Non-Docker: <code>RAILS_ENV=production bundle exec rails db:migrate</code></li>
<li>Docker: <code>docker-compose run --rm web rails db:migrate</code></li>
</ul>
</li>
<li>Restart all Mastodon processes</li>
</ol></div></div>
  </body>
</html>
