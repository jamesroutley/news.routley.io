<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ebogdum/callfs">Original</a>
    <h1>Show HN: CallFS â€“ S3-style object store in one Go binary (MIT)</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">CallFS is an ultra-lightweight, high-performance REST API filesystem that provides precise Linux filesystem semantics over various backends, including local storage, Amazon S3, and a distributed peer-to-peer network. It is designed for speed, reliability, and horizontal scalability.</p>
<p dir="auto"><a href="https://goreportcard.com/report/github.com/ebogdum/callfs" rel="nofollow"><img src="https://camo.githubusercontent.com/0f77563817b03027df46c7b61765d107881586ff8ee4eb39c679752c64e132f7/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f65626f6764756d2f63616c6c6673" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/ebogdum/callfs"/></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/6cd0120cc4c5ac11d28b2c60f76033b52db98dac641de3b2644bb054b449d60c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg"/></a></p>

<ul dir="auto">
<li><strong>Multi-Backend Storage</strong>: Seamlessly use Local Filesystem, Amazon S3, or other S3-compatible services (like MinIO) as storage backends.</li>
<li><strong>Distributed Architecture</strong>: Scale horizontally by adding more CallFS instances. The system automatically routes operations to the correct node.</li>
<li><strong>Cross-Server Operations</strong>: Operations like move, copy, and delete work across the cluster with automatic conflict detection and resolution.</li>
<li><strong>High-Performance API</strong>: A clean REST API for all filesystem operations, built for low latency and high throughput.</li>
<li><strong>Secure, Ephemeral Links</strong>: Generate secure, time-limited, single-use download links for any file.</li>
<li><strong>Distributed Locking</strong>: A Redis-based Distributed Lock Manager ensures data consistency for concurrent operations across the cluster.</li>
<li><strong>Rich Metadata Store</strong>: PostgreSQL backend for robust, queryable, and persistent file metadata.</li>
<li><strong>Comprehensive Security</strong>: Enforces TLS, API key authentication, and a full Unix permission model for authorization.</li>
<li><strong>First-Class Observability</strong>: Structured logging (JSON/console) and extensive Prometheus metrics for deep operational insight.</li>
<li><strong>Zero-Copy I/O</strong>: Efficiently streams large files without buffering them in memory, ensuring a low memory footprint.</li>
</ul>

<p dir="auto">CallFS consists of several core components that work together to provide a unified, distributed filesystem API:</p>
<ul dir="auto">
<li><strong>API Server</strong>: The public-facing HTTP server that handles all incoming REST API requests.</li>
<li><strong>Core Engine</strong>: The central orchestrator that processes requests, manages metadata, and selects the appropriate storage backend.</li>
<li><strong>Storage Backends</strong>: Pluggable modules for different storage systems:
<ul dir="auto">
<li><strong>LocalFS</strong>: Manages files on the local disk.</li>
<li><strong>S3</strong>: Interfaces with Amazon S3 or compatible object stores.</li>
<li><strong>Internal Proxy</strong>: Routes requests to other CallFS instances in the cluster.</li>
</ul>
</li>
<li><strong>Metadata Store</strong>: A PostgreSQL database that stores all filesystem metadata, such as file names, sizes, timestamps, permissions, and backend locations.</li>
<li><strong>Distributed Lock Manager (DLM)</strong>: Uses Redis to provide cluster-wide locks, preventing race conditions during concurrent file modifications.</li>
<li><strong>Link Manager</strong>: Generates and validates secure single-use download tokens.</li>
</ul>
<p dir="auto">This modular design allows CallFS to be both powerful and flexible, suitable for a wide range of applications from simple file serving to complex, distributed storage architectures.</p>

<p dir="auto">All API endpoints are prefixed with <code>/v1</code> and require <code>Bearer &lt;api-key&gt;</code> authentication, except where noted.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">File &amp; Directory Operations</h3><a id="user-content-file--directory-operations" aria-label="Permalink: File &amp; Directory Operations" href="#file--directory-operations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><code>GET /files/{path}</code>: Downloads a file or lists a directory&#39;s contents.</li>
<li><code>HEAD /files/{path}</code>: Retrieves file metadata. This operation is &#34;enhanced&#34; and can route requests across the cluster to find the correct node.</li>
<li><code>POST /files/{path}</code>: Creates a new file or directory. It features cross-server conflict detection to prevent overwriting.</li>
<li><code>PUT /files/{path}</code>: Uploads or updates a file&#39;s content. Supports streaming data and cross-server proxying.</li>
<li><code>DELETE /files/{path}</code>: Deletes a file or directory, with cross-server routing capabilities.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Enhanced Directory Listings</h3><a id="user-content-enhanced-directory-listings" aria-label="Permalink: Enhanced Directory Listings" href="#enhanced-directory-listings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><code>GET /directories/{path}</code>: Provides a detailed JSON listing of a directory&#39;s contents.</li>
<li><code>GET /directories/{path}?recursive=true</code>: Performs a recursive listing of all subdirectories.</li>
<li><code>GET /directories/{path}?recursive=true&amp;max_depth=N</code>: Limits the depth of the recursive listing.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Single-Use Download Links</h3><a id="user-content-single-use-download-links" aria-label="Permalink: Single-Use Download Links" href="#single-use-download-links"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><code>POST /links/generate</code>: Creates a secure, single-use download link for a file. The link&#39;s expiry time is configurable.</li>
<li><code>GET /download/{token}</code>: Downloads a file using a single-use token. <strong>(No authentication required)</strong>.</li>
</ul>

<ul dir="auto">
<li><code>GET /health</code>: Returns the operational status of the server. <strong>(No authentication required)</strong>.</li>
<li><code>GET /metrics</code>: Exposes detailed performance metrics in Prometheus format. <strong>(No authentication required)</strong>.</li>
</ul>


<ul dir="auto">
<li><strong>Go</strong>: Version 1.21 or later.</li>
<li><strong>PostgreSQL</strong>: A running instance for the metadata store.</li>
<li><strong>Redis</strong>: A running instance for the distributed lock manager.</li>
<li><strong>Docker &amp; Docker Compose</strong>: Recommended for easily running PostgreSQL and Redis.</li>
<li>A valid <code>config.yaml</code> file (see <code>config.yaml.example</code>)</li>
</ul>

<ol dir="auto">
<li>
<p dir="auto"><strong>Start dependent services:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="docker-compose up -d postgres redis"><pre>docker-compose up -d postgres redis</pre></div>
</li>
<li>
<p dir="auto"><strong>Build the binary:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="go build -o callfs ./cmd/main.go"><pre>go build -o callfs ./cmd/main.go</pre></div>
</li>
<li>
<p dir="auto"><strong>Run the server:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="./callfs server --config /path/to/your/config.yaml"><pre>./callfs server --config /path/to/your/config.yaml</pre></div>
</li>
</ol>
<div dir="auto"><h3 tabindex="-1" dir="auto">Command-Line Interface (CLI)</h3><a id="user-content-command-line-interface-cli" aria-label="Permalink: Command-Line Interface (CLI)" href="#command-line-interface-cli"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">CallFS includes a simple CLI for managing the server:</p>
<ul dir="auto">
<li><strong><code>callfs server</code></strong>: Starts the main API server.
<ul dir="auto">
<li><code>--config, -c</code>: Specifies the path to the configuration file.</li>
</ul>
</li>
<li><strong><code>callfs config validate</code></strong>: Validates the configuration file and displays the loaded settings.</li>
<li><strong><code>callfs --help</code></strong>: Shows all available commands and flags.</li>
</ul>

<p dir="auto">For detailed information on configuration, API usage, security, and more, please refer to the <code>docs_markdown/</code> directory:</p>
<ul dir="auto">
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/01-installation.md">01 - Installation</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/02-configuration.md">02 - Configuration</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/03-api-reference.md">03 - API Reference</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/04-authentication-security.md">04 - Authentication &amp; Security</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/05-backend-configuration.md">05 - Backend Configuration</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/06-monitoring-metrics.md">06 - Monitoring &amp; Metrics</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/07-clustering-distribution.md">07 - Clustering &amp; Distribution</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/08-developer-guide.md">08 - Developer Guide</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/09-troubleshooting.md">09 - Troubleshooting</a></li>
<li><a href="https://github.com/ebogdum/callfs/blob/main/docs_markdown/10-enhanced-cross-server.md">10 - Enhanced Cross-Server Operations</a></li>
</ul>

<p dir="auto">Contributions are welcome! Please see <a href="https://github.com/ebogdum/callfs/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a> for guidelines on how to participate in this project.</p>

<p dir="auto">CallFS is licensed under the MIT License. See the <a href="https://github.com/ebogdum/callfs/blob/main/LICENSE">LICENSE</a> file for details.</p>
</article></div></div>
  </body>
</html>
