<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/vlopes11/rrust.nvim">Original</a>
    <h1>Rust, RR, Neovim: A perfect debug combination</h1>
    
    <div id="readability-page-1" class="page"><div data-view-component="true">        
        
        <div>
  



<div data-modal-dialog-overlay="">
  <modal-dialog role="dialog" id="warn-tag-match-create-branch-dialog" aria-modal="true" aria-labelledby="warn-tag-match-create-branch-dialog-header" data-view-component="true">
      <header>
        
      </header>
    <div>
      
          <p>      A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?
</p>

    </div>
      
</modal-dialog></div>



  

  

  <include-fragment src="/vlopes11/rrust.nvim/overview_actions/main"></include-fragment>


    <p><span>
        
<get-repo>
    
    <details data-action="
               toggle:get-repo#onDetailsToggle
               keydown:get-repo#onDetailsKeydown">
        <summary data-hydro-click="{&#34;event_type&#34;:&#34;repository.click&#34;,&#34;payload&#34;:{&#34;repository_id&#34;:601375719,&#34;target&#34;:&#34;CLONE_OR_DOWNLOAD_BUTTON&#34;,&#34;originating_url&#34;:&#34;https://github.com/vlopes11/rrust.nvim&#34;,&#34;user_id&#34;:null}}" data-hydro-click-hmac="af035d87fca05e3a38deb359f753539890c3956cb5ffb0b9ca306ea4c495fd0b" data-view-component="true">    <span>
      <span>Code</span>
    </span>
      <span>
        <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path>
</svg>
      </span>
</summary>  
      
    </details>


</get-repo>

    </span>

    <span>
        

    </span>
</p></div>




        


<div>
  <div>
    <h2>Latest commit</h2>
    <div data-issue-and-pr-hovercards-enabled="">
      
  <div>
    
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/vlopes11/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vlopes11">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/8730839?s=48&amp;v=4" width="24" height="24" alt="@vlopes11"/>
</a>  </p>
</div>

  </div>
  
  
      
    </div>
  </div>
    <h2 id="files">Files</h2>
    


    <p><a data-hotkey="y" href="https://github.com/vlopes11/rrust.nvim/tree/5071a13ebef591da11232d0cd990b7689023cda7">Permalink</a></p><div data-view-component="true">
  <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path>
</svg><p>
    Failed to load latest commit information.


  
</p></div>  <div data-hpc="">
    <div role="grid" aria-labelledby="files">
      <div role="row">
        <p>Type</p>
        <p>Name</p>
        <p>Latest commit message</p>
        <p>Commit time</p>
      </div>

        
        
        
        
    </div>
    
  </div>




</div>

  
      <readme-toc>

      <div id="readme" data-tagsearch-path="README.md" data-tagsearch-lang="Markdown">

        

          <div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">This is a helper tool to record the execution of a Rust test with <code>rr</code>, and replay it using <code>termdebug</code>. For more information, check <code>:h termdebug</code>.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Requirements</h2>
<p dir="auto">Minimum version of neovim: 0.9.0</p>
<ul dir="auto">
<li><a href="https://github.com/nvim-treesitter/nvim-treesitter">https://github.com/nvim-treesitter/nvim-treesitter</a></li>
<li><a href="https://rr-project.org/" rel="nofollow">https://rr-project.org/</a></li>
<li><a href="https://www.rust-lang.org/" rel="nofollow">https://www.rust-lang.org/</a></li>
<li><a href="https://stedolan.github.io/jq" rel="nofollow">https://stedolan.github.io/jq</a></li>
<li><a href="https://www.linux.org/" rel="nofollow">https://www.linux.org/</a> (this is not tested with Win, OSX, etc - it might work tho)</li>
</ul>

<h2 tabindex="-1" dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>
<div dir="auto" data-snippet-clipboard-copy-content="Plug &#39;vlopes11/rrust.nvim&#39;"><pre>Plug <span><span>&#39;</span>vlopes11/rrust.nvim<span>&#39;</span></span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<p dir="auto">Position your cursor on a Rust test, and run:</p>
<div dir="auto" data-snippet-clipboard-copy-content=":lua require(&#39;rrust&#39;).RustRRTestRecord()"><pre>:<span>lua</span> <span>require</span>(<span><span>&#39;</span>rrust<span>&#39;</span></span>).<span>RustRRTestRecord</span>()</pre></div>
<p dir="auto">It will call <code>rr</code> to record the execution of the test.</p>
<p dir="auto">To debug the test, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content=":lua require(&#39;rrust&#39;).RustRRTestReplay()"><pre>:<span>lua</span> <span>require</span>(<span><span>&#39;</span>rrust<span>&#39;</span></span>).<span>RustRRTestReplay</span>()</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-etc" aria-hidden="true" href="#etc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Etc</h2>
<p dir="auto">I created the following convenience bindings:</p>
<div dir="auto" data-snippet-clipboard-copy-content="function! NewRRDebug()
    lua require(&#39;rrust&#39;).RustRRTestRecord()
    lua require(&#39;rrust&#39;).RustRRTestReplay()
    wincmd L
    wincmd h
    vertical resize 73
    wincmd l
    stopinsert
endfunction

nnoremap &lt;F4&gt; :Stop&lt;cr&gt;
nnoremap &lt;F5&gt; :Continue&lt;cr&gt;
nnoremap &lt;F6&gt; :Finish&lt;cr&gt;
nnoremap &lt;F7&gt; :Step&lt;cr&gt;
nnoremap &lt;F8&gt; :Over&lt;cr&gt;
nnoremap &lt;F9&gt; :Break&lt;cr&gt;
nnoremap &lt;F10&gt; :Clear&lt;cr&gt;
nnoremap &lt;leader&gt;ed :call NewRRDebug()&lt;cr&gt;"><pre><span>function</span><span>!</span> <span>NewRRDebug</span>()
    <span>lua</span> <span>require</span>(<span><span>&#39;</span>rrust<span>&#39;</span></span>).<span>RustRRTestRecord</span>()
    <span>lua</span> <span>require</span>(<span><span>&#39;</span>rrust<span>&#39;</span></span>).<span>RustRRTestReplay</span>()
    <span>wincmd</span> L
    <span>wincmd</span> <span>h</span>
    <span>vertical</span> <span>resize</span> <span>73</span>
    <span>wincmd</span> <span>l</span>
    <span>stopinsert</span>
<span>endfunction</span>

<span>nnoremap</span> <span>&lt;F4&gt;</span> :<span>Stop</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F5&gt;</span> :<span>Continue</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F6&gt;</span> :<span>Finish</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F7&gt;</span> :<span>Step</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F8&gt;</span> :<span>Over</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F9&gt;</span> :<span>Break</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;F10&gt;</span> :<span>Clear</span><span>&lt;cr&gt;</span>
<span>nnoremap</span> <span>&lt;leader&gt;</span><span>ed</span> :<span>call</span> <span>NewRRDebug</span>()<span>&lt;cr&gt;</span></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/8730839/231178300-5d999d5f-b0cd-48ad-a218-1836f0ac4521.gif"><img src="https://user-images.githubusercontent.com/8730839/231178300-5d999d5f-b0cd-48ad-a218-1836f0ac4521.gif" alt="output" data-animated-image=""/></a></p>
</article>
          </div>
      </div>

  </readme-toc>


</div></div>
  </body>
</html>
