<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://marcospereira.me/a-simple-hash-for-perlin-noise/">Original</a>
    <h1>A Simple Hash for Perlin Noise</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>I needed a hashing algorithm that is simple to implement and quick to compute, to be used as a basis
for generating perlin noise in Unity.</p>

<p>I couldn’t rely on simple randomness since terrain generation has to be deterministic, especially for multiplayer games.</p>

<p>I ended up implementing the <a href="http://www.isthe.com/chongo/tech/comp/fnv/index.html">Fowler–Noll–Vo 1a hash</a>, which is known for trading some quality for increased performance. It was designed to be fast, not secure - which is exactly what is needed in the context of procedural generation.</p>

<p>Let me first show you what it looks like. You can use the <code>DebugTexture()</code> method to get a sample texture, which is generated by hashing the coordinates of each pixel and mapping that hash to a color between black and white:</p>

<p><img src="https://marcospereira.me/assets/2022-05-10-a-simple-hash-for-perlin-noise/hash-with-tricks.jpg" alt="Hash with tricks"/></p>

<p>I used a couple tricks to get the hash to look as close as possible to white noise when passing in sequential numbers starting from 0 or near 0.</p>

<p>The first trick is to multiply each coordinate by one of the algorithm’s parameters (the prime number), which gets the bits away from being almost all 0s when hashing low values.</p>

<p>The second trick is to hash the bytes in a random sequence. This sequence is hardcoded for simplicity.</p>

<p>Without these two tricks, the hash looks much less like pure white noise. This is the result if we hash the coordinates as floating point numbers, using no tricks:</p>

<p><img src="https://marcospereira.me/assets/2022-05-10-a-simple-hash-for-perlin-noise/hash-without-tricks.jpg" alt="Hash without tricks from floats"/></p>

<p>And this if we hash coordinates as integers, also with no tricks:</p>

<p><img src="https://marcospereira.me/assets/2022-05-10-a-simple-hash-for-perlin-noise/hash-without-tricks-int.jpg" alt="Hash without tricks from integers"/></p>

<p>The full source code is below:</p>




  </div></div>
  </body>
</html>
