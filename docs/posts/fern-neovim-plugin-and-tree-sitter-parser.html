<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bugwhisperer.dev/blog/fern-neovim-plugin-treesitter-parser/">Original</a>
    <h1>Fern: NeoVim Plugin and Tree-Sitter Parser</h1>
    
    <div id="readability-page-1" class="page"><div id="main-content"><p><span><a href="https://bugwhisperer.dev/tags/neovim">neovim</a></span> <span><a href="https://bugwhisperer.dev/tags/tree-sitter">tree-sitter</a></span> <span><a href="https://bugwhisperer.dev/tags/knowledge-management">knowledge-management</a></span></p><p>I know what you‚Äôre probably thinking, ‚ÄúAnother post on Fern?! Aish‚Ä¶clearly this blogger is just simping for internet points and milking their tool‚Äôs latest release,‚Äù. Not true! While I wouldn‚Äôt mind some internet points üò∏, this post is not really about <a href="https://github.com/bugwhisperer418/fern" rel="noopener" target="_blank">Fern</a>, the CLI tool. It‚Äôs really about NeoVim!</p><p>I enjoy using Fern daily, but there was something missing with the recent <a href="https://bugwhisperer.dev/blog/fern-cli-v1.3.0-release-notes">switch to a more structured log file</a> experience in my journalling. Where before I had a lovely markdown file, replete with highlights, folds, and more, now it was a drab log file with plain text. <insert andie="" sad=""> üò≠ </insert></p><p>‚ÄúNo worries,‚Äù I thought to myself, ‚ÄúI‚Äôm a moderately competent developer, I am sure can figure this all out and make the expereience better‚Äù. Two weeks later, with some help from another plugin called Tree-Sitter, <a href="https://github.com/bugwhisperer418/fern.nvim" rel="noopener" target="_blank">Fern.nvim</a> was born!</p> <h2 id="some-quick-tree-sitter-background">Some quick Tree-Sitter background</h2> <p><a href="https://tree-sitter.github.io/tree-sitter/" rel="noopener" target="_blank">Tree-Sitter</a>, is a separate plugin that is agnostic to any one editor and works with many editors (probably the one you use as well). It works by building trees from parsed file buffers in your editor. Tree-Sitter is very performant because it only checks and rebuilds the tree in the immediate surrounding area that is being edited, and not the whole file.</p> <p>Tree-Sitter language parsers use ‚Äúgrammar‚Äù files that define important syntax and other components of a language that a given file might be written in. With a parsed tree of components in place, we can query and annotated an open file to affect how it appears and its intractability.</p> <p>For example the following text: ‚ÄúTrans rights, are human rights!‚Äù could be defined as a set of grammar components that give rise to the following tree structure:</p> <pre><code><span>(sentence
</span><span>  (noun)
</span><span>  (punctuation
</span><span>    type: comma)
</span><span>  (verb)
</span><span>  (noun)
</span><span>  (punctuation
</span><span>    type: exclamation)
</span><span>)
</span></code></pre> <p>Using that tree, we can define things like highlights/styling and fold points (to collapse/expand sections of text). Maybe we want all nouns to have purple background. Maybe all verbs should be bold and pink text. The world is our oyster!</p> <h2 id="fern-nvim-plugin">Fern.nvim Plugin</h2> <p>Fern.nvim is a NeoVim plugin that strives to add back some of the functionality and life to Fern journal Log files lost in the switch and then go further and make using it even better. The NeoVim plugin first sets up and activates a <a href="https://github.com/bugwhisperer418/tree-sitter-fernlog" rel="noopener" target="_blank">custom Tree-Sitter parser</a>, for a language I‚Äôm calling ‚ÄúFernlog‚Äù, that defines grammar and builds trees on our Fern Log journal files.</p> <p>With this custom Tree-Sitter grammar tree accessible, we hook into some of the custom highlights that have been setup (ex. call-outs for all Entries marked with <code>!</code> and headers colored &amp; bold). This also enables text folding for headers, allowing for easier reading and working with files that are longer length. The plugin folds all headers exceeding given cutoff level in depth by default when you open a log file. This can be customised in the plugin user configs. See the Installation section of the plugin <a href="https://github.com/bugwhisperer418/fern.nvim?tab=readme-ov-file#installing-fernnvim" rel="noopener" target="_blank">README.md</a> for more details.</p> <p>We set up some custom annotations which to allow you to quickly create new entries on the fly using only a few keystrokes. This helps ensure that you don‚Äôt break your flow when rapidly writing down notes and tasks in your log during the course of the day. Annotations also help us have consistent Unicode symbols in all our log files effortlessly.</p> <p>The plugin also creates a function to allow users to switch a Task/ToDo Entry line‚Äôs status. Lastly, it adds some custom keyshortcuts to all open Fern log file buffers:</p> <ul><li><code>&lt;TAB&gt;</code> - open and close a folded Header quickly</li><li><code>&lt;leader&gt;eb</code> - calls the aforementioned custom function to toggle a Task/ToDo Entry‚Äôs status, changing the Unicode marker</li></ul> <h2 id="what-s-next">What‚Äôs Next?</h2> <p>The biggest things I will be looking to tackle next for the plugin are:</p> <ol><li>more user config customization options</li></ol> <ul><li>custom highlight colors</li><li>custom keybinding shortcuts for commands</li></ul> <ol start="2"><li>fast way to make a new Entry from Normal mode (skipping the need to enter Insert mode)</li><li>Vim commands for common actions for those who prefer them (ie. <code>:Fern&lt;Action&gt;</code> so something like <code>:FernToggle</code>)</li></ol> <p>Fern.nvim is still very new and I have lots of ideas about how to take it further. I would love to hear any feedback <strong>you</strong> have! If you use NeoVim please consider trying it out! üíñ Thank you so much for reading! :)</p>   </div></div>
  </body>
</html>
