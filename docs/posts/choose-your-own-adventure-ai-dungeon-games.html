<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.gwern.net/CYOA">Original</a>
    <h1>Choose-Your-Own-Adventure AI Dungeon Games</h1>
    
    <div id="readability-page-1" class="page"><div id="markdownBody">
<div>
<blockquote>
<p>A useful variation on <a href="https://en.wikipedia.org/wiki/AI_Dungeon">AI Dungeon</a><span>-style
(<span>AID</span>) text games would be to turn them into shared public game trees of pre-generated options which
the player selects from,</span> <a href="https://en.wikipedia.org/wiki/Choose_Your_Own_Adventure">Choose-Your-Own-Adventure</a>-<a href="https://en.wikipedia.org/wiki/Gamebook">book</a>
style.</p>
<p>This trades teraflops for kilobytes and so can dramatically reduce costs as players spend most of their time reading cached output
(rarely needing nor wanting to generate brandnew output requiring a NN run), can increase quality as players collectively uprank
actions/​​​outcomes which are highest-quality, and caters to newbies who don’t understand the power of NN-backed text games and flail
around.</p>
</blockquote>
</div>
<p>Revisiting <a href="https://play.aidungeon.io/main/home" id="walton-2019-aidungeon-2">AI
Dungeon</a> <span>(<span>AID</span>) in the light of a year of</span> <a href="https://www.gwern.net/GPT-3" id="gwern-gpt-3"><span>GPT-3</span></a>⁠, I would like to propose a radical redesign of it based on the problems it has
encountered. <span><span>AID</span> is one of the most interesting uses of the</span> <a href="https://www.gwern.net/GPT-2" id="gwern-gpt-2"><span>GPT-2</span></a> &amp; <a href="https://arxiv.org/abs/2005.14165#openai" id="brown-et-al-2020"><span>GPT-3</span></a> neural network models;
computer games, forever frustrated by their inability to offer worlds as arbitrarily complex and realistic as a human <a href="https://en.wikipedia.org/wiki/Dungeon_Master">Dungeon Master</a> running <a href="https://en.wikipedia.org/wiki/Dungeons_%26_Dragons">Dungeons &amp; Dragons</a> games (which is effectively a
collaborative fiction writing exercise), no matter how many verbs are added to the text adventure parser or how many 3D artists are hired,
finally can handle <em>anything</em> a player can type in, and improvise with it.</p>
<p>At its best, an <span>AI Dungeon</span> game like <a href="https://web.archive.org/web/20191127163535/http://www.aidungeon.io/2019/11/my-orc-band-and-our-quest-for-equal.html" id="walton-2019-music-troupe">“My Musical Troupe of Orcs Uses Music to Advance Orc Rights”</a> really feels like simulating
an entire world. <span>Of course, as current NNs have many limitations (they are far from human-level intelligence, lack any kind of memory,
are unable to plan, are not trained to create high-quality fiction, have weak common sense, etc), <span>AID</span> and
its imitators typically does not deliver such a peak experience on average.</span> <span>And in practice, even the average experience tends
to be compromised by current technical &amp; economic realities—<span>AID</span>, as run by Nick Walton’s startup Latitude
as of April–June 2021, has been experiencing problems relating to</span> <span>GPT-3</span>
cost, and its use of the <a href="https://openai.com/blog/openai-api/" id="brockman-et-al-2020"><span>Open<span>AI API</span></span></a> &amp; OA’s mandatory moderation
thereof.</p>
<section id="aid-problems">

<p><span><span>AID</span> and imitators are currently designed in the most straightforward way possible: a seed
text, often unique or customized, and then text generation step by step after waiting for player text responses.</span> This causes 3 major
problems:</p>
<ol type="1">
<li><strong>Cost</strong><span>: every turn invokes a full-cost call to a NN model. No matter what you do, this is always going to be
expensive. This has devastating consequences on what players can be allowed to do and how often, how hard they must be monetized, how one
is beholden to <span>APIs</span>, centralization requiring/​​enabling censorship, etc.</span></li>
<li><strong>Quality</strong>: models like <span>GPT-3</span> can generate stunningly good output
when cherry-picked at a level like ‘best of 20’; the other 19, however, range from ‘meh’ to ‘atrocious’. Few people have the patience, or
funds, to do 20 samples per action/​​outcome, however, because of #1. If one <em>could</em>, however, the results might be stunning.</li>
<li>
<strong>Learning Curve</strong><span>: the default experience for <span>AID</span> seems to be to open it up,
type in a few sentences like</span> “Hello, I am a human”, decide it’s boring, and to quit. It doesn’t show you what it can
<em>do</em>; one has to elicit by demanding cool stuff, of the sort most people quite understandably expect computers to be completely
incapable of. (How can a computer be a good <a href="https://en.wikipedia.org/wiki/Dungeons_%26_Dragons"><span>D&amp;D</span></a> DM when it also takes 20 seconds to load a social media
website, which then is broken?)
</li>
</ol>
<section id="stuck">
<h2><a href="#stuck" title="Link to section: § &#39;Stuck&#39;">Stuck</a></h2>
<p><span>Fixing these <span>AID</span> problems are intrinsically difficult.</span> <span>The <span>AID</span> model is inherently extremely expensive, and tweaks like</span> <a href="https://www.gwern.net/docs/ai/sparsity/index" id="gwern-docs-ai-sparsity-index">model sparsification /​ ​distillation</a> can only deliver so much in
the way of cost savings before the quality goes to hell. The cost of <span>GPT-3</span> is
already a near-fatal problem for Latitude; <a href="https://en.wikipedia.org/wiki/Experience_curve_effects">experience curves</a> in deep learning (see <a href="https://arxiv.org/abs/2005.04305#openai" id="hernandezbrown-2020-paper" title="Measuring the Algorithmic Efficiency of Neural Networks">Hernandez &amp;
Brown 2020</a>) are fast, but we still aren’t going to see <span>GPT-3</span>-<span>level
models on low-end <span>GPUs</span> for several years to come (which is a long time to wait, however amusing
problems may seem in retrospect), and whatever cost/​efficiency gains algorithms &amp; hardware give us, players may respond to by escalating
demands.</span> (It was not so long ago that people were dreaming of access to <a href="https://www.gwern.net/docs/ai/gpt/2019-radford.pdf#openai" id="gpt-2-paper"><span>GPT-2</span></a>-1.5b; running &amp; finetuning that
or models up to 9b parameters is now ordinary, but <span>GPT-3</span> has spoiled people for
them. Once <span>GPT-3</span>-level NNs become available on home computers, players will
doubtless clamor for voice-synthesis/​3D-image/​human-level interactions—much as there is <em>still</em> <span>an audience for ever more
realistic 3D <span>FPS</span> games, despite regular predictions that</span> ‘the latest PS1 [or PS2 or PS5 or
<em>Crysis</em>] game has finally exhausted the possibilities of incremental gains in fancy graphics and now developers will
<em>have</em> to focus on gameplay’.)</p>
</section>
</section>
<section id="rethinking-game-trees">

<p><span>To solve this, we need to rethink <span>AID</span> entirely; <span>AID</span> is the
first and simplest way to do a text game with NN models, but it may not be the best.</span></p>
<p>Games are often thought of in terms of ‘trees’ defined by actions and possible outcomes, like in chess or Go. All books exist in
<a href="https://en.wikipedia.org/wiki/The_Library_of_Babel">The Library of Babel</a>⁠; when we explore the tree
and select a possible text completion each time, we are search for one specific book in the Library. If we retrace our path and choose
differently, we will end in a different part of the library, with different books. Text generation is also a tree—just a <em>wide</em>
tree.</p>
<p><span>Typically, in <span>GPT</span>-related apps, this is hidden from the player: you just see the blinking
cursor, not a tree of possible text completions from there.</span> Of this tree, the player sees only one branch; he can erase outputs and
rewind to an earlier branch, but still can only see his current branch, and is blind to all the options. Anyway, it would be too difficult
and expensive to show the player all the branches, because that requires generating many more samples, only to throw them away, likely
unseen.</p>
<p><span>But what if we embraced the tree hidden behind the <span>AID</span> interface?</span> What if we
<em>didn’t</em> throw them away? What if we kept all those branches we generated at such expense, and shared them with other players? How
would we do that?</p>
</section>
<section id="choose-your-own-adventure">

<p>By playing not ‘<span>neural net <span>D&amp;D</span></span>’ but ‘neural net <em>Choose Your Own Adventure</em>’
(<a href="https://en.wikipedia.org/wiki/Gamebook"><span>CYOA</span></a>) text
games instead: a game where instead of ‘generating’ the next turn, each page instead gives you a few good options to choose.</p>
<p>In a <span>CYOA</span> <span>version of <span>AID</span>, everyone
starts with a certain scenario(s), which describes a situation and lists, say, 5 possible actions.</span> This is the root of the tree.
Each of these actions is pre-generated by a model; a player chooses one to go to the next scene/​node, and it is fetched from the database
to show the outcome; only if the outcome hasn’t been generated before &amp; is not cached, does the NN have to generate the outcome. Then
another set of 5 actions is listed (also usually pre-generated). And so on. <span>Unlike regular <span>CYOAs</span>,
the adventure is never ending—because the NN just keeps expanding out terminal nodes on demand.</span> And while it may sound complex, it
is easy to implement.<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Switching to a <span>CYOA</span> <span>model solves all 3 problems with <span>AID</span>, and is not merely a cost-saving crutch coming at the expense of game quality—a</span> <span>CYOA</span> <span>approach enables many things that are hard or impossible with the default <span>AID</span> interface.</span></p>
</section>
<section id="cyoa-advantages">

<section id="newbies">
<h2><a href="#newbies" title="Link to section: § &#39;Newbies&#39;">Newbies</a></h2>
<p>A newbie firing it up for the first time is greeted by a UI that is as simple as can be, working just like a hypertext web browser, in
a familiar format (<a href="https://www.gwern.net/docs/www/egamebook.com/d0a2cdcee51df0288f94e8125eb40b87a37fbc8e.html" id="hracek-2015-cyoa-survey" rel="archived alternate nofollow" data-url-original="https://egamebook.com/blog/data-about-gamebooks/" title="(Original URL: https://egamebook.com/blog/data-about-gamebooks/ )"><span>26% of Americans have read a <span>CYOA</span></span></a>⁠, 20% more have heard of them) and immediately sucking them in with interesting options and
outcomes on every page, more comprehensive, creative, and high quality than any normal single-authored <span>CYOA</span> could ever hope to be or compete with the hivemind of AI+human-community—the adventure
never ends, it just slows down a bit when you go out of cache. There is no ‘cold start’ <span>problem like there is with <span>AID</span>.</span> No one will ever ask “but what do I <em>do</em>” of a <span>CYOA</span>. (What do you do? You click to find out whether throwing the <a href="https://en.wikipedia.org/wiki/Anchoring">anchor</a> at the space-octopus works or if you should
instead try to mind-meld with it to negotiate a peace-treaty between the space-octopii &amp; humanity, that’s what you do. And then you
discover the <em>advanced</em> ways to use it…)</p>
</section>
<section id="amortizing-generation-cost">
<h2><a href="#amortizing-generation-cost" title="Link to section: § &#39;Amortizing Generation Cost&#39;">Amortizing Generation Cost</a></h2>
<p>As players play through the game tree, the actions/​outcomes are cached permanently, and the tree fills out. Soon, players are
spending most of their time hitting cached pages. Such interactions are ~100% free: they’re just a few kilobytes fetched from a database.
The more that players play, the cheaper each play/​player becomes. Because of this cheapness, it is easy to scale up to many players,
easy to afford high-quality rather than low-quality models, etc. (The use of a few ranked choices is critical: if regular freeform text
inputs were allowed, they would probably not be all that much more interesting than curated choices, but the ‘branching factor’ would be
like tens of thousands per node, and you can forget about caching anything.)</p>
<p><span><span>CYOA</span> vs <span>AID</span> is not a hard dichotomy, but a spectrum of
novelty vs cost.</span></p>
<p>A <span>CYOA</span> can interpolate anywhere between the 2 extremes: the <span>CYOA</span> extreme is 100% cached, pre-generated, and static; it is free to play, and you can host
hundreds of thousands of players on a single dedicated server for a few bucks a month of hosting costs. <span>The other extreme is the
default <span>AID</span> extreme: there is zero caching, everything is generated on demand by expensive NNs just
for that turn, and immediately thrown away; highly active players can easily rack up scores or hundreds of dollars in <span>OA API</span> costs a month, and startups can burn through millions in VC capital catering to relatively small player
bases, with few options for how to cut costs (OA isn’t going to cut the <span>API</span> bill, so what do you do?
Degrade the model players paid for? Between a rock &amp; a hard place there, and hell hath few furies like a gamer scorned).</span> In
between, one has a mix of a cached tree, and occasional generation events adding new nodes.</p>
<p><span><span>CYOA</span> operators can adjust their spot on the spectrum by tweaking who can generate what when
where at how much cost.</span> For example, perhaps there is a ‘free tier’ who is unable to generate at all, and can only traverse
existing nodes; or perhaps free tier players can generate at will, but only in public or even popular public sub-trees (to increase reuse
probability), or only using the cheapest (smallest lowest-quality) model.<a href="#fn2" id="fnref2" role="doc-noteref"><sup>2</sup></a> If costs are too low, generations can be upgraded, new options generated to be added to popular nodes,
players can be directed to interesting but under-explored subtrees to start fleshing them out, one’s idle <a href="https://en.wikipedia.org/wiki/Graphics_processing_unit"><span>GPU</span></a>
can go around filling out missing nodes during downtime just to be prepared for future players… ‘Whales’ <span>are critical to game
profitability, and they can be catered to in many ways, far more easily than in <span>AID</span> (which is already
maximally expensive): perhaps they get 20 options instead of 5 generated for them, or perhaps they get dedicated <span>GPUs</span> filling out nodes in advance, so they never have to waste a few seconds waiting &amp; twiddling their thumbs
(ie. if they are at node depth X, then children nodes at depth X+1 &amp; depth X+2 are generated in the background for them, rather than
waiting for them to make a choice and only then generating a node).</span></p>
<p><span>Many options and possible settings to choose the point on the spectrum that balances cost, novelty, and playability, and
avoiding the messy situations with <span>AID</span>’s costs.</span> This makes it more likely that acceptable
tradeoffs and an economically-feasible business model can be found.</p>
</section>
</section>
<section id="optimizing-trees">

<p>One can go further than simply offering up a tree with choices by optimizing the tree.</p>
<p>Choices can be ranked by popularity: bad choices, which few players care enough to choose, can automatically fall off the list and be
replaced by new choices. Choices could be explicitly voted on to filter even more heavily. Players could have the option to reroll at any
given point to stir in new options—this doesn’t undermine the cost savings because after filtering through 10 or 20 choices at a given
node, the top 5 choices will almost certainly be much better than a random new choice, and so players just won’t bother unless the choices
really are terrible. And nothing bars editing choices or writing new ones by hand to insert at a given node—the NN doesn’t care. Further, I
refer to it as a tree, but it doesn’t need to be a tree either, only a <em>graph</em> <span>(classic <span>CYOAs</span> were not trees either, and sometimes weren’t even connected graphs!); the straightforward generation approach
is relatively unlikely to loop back to existing nodes (the generated text would need to be identical, which is extremely unlikely), but
more advanced models might be able to choose to link to an existing nodes, and players may find it quite useful to edit the game-tree as a
graph to set up</span> ‘hubs’ or ‘episodes’ or ‘loops’.</p>
<p><span>The ranking mechanism, it’s worth noting as a concrete example of how it improves quality game-wide, further helps solve
<span>AID</span>’s problems with long-range coherency &amp; memory, and problems like characters changing sex mid-scene
as the NN</span> ‘forgets’—if players do not want such contradictions or forgettings, then they simply will not choose the actions or
outcomes which entail contradictions, and will tend to pick the ones which are consistent and continue the story well. The players
collectively serve as the long-term memory and make up for the NN’s failings. <span>(<span>AID</span> tries to solve
this with a limited</span> ‘notes’ function which hardwires ‘facts’ into each generation as a kind of long-term memory, but that uses up
the context window and still doesn’t work well.)</p>
<p>Because of this flexibility, you may be able to use a cheap small NN and not the big fancy ones like <span>GPT-3</span>: sure, maybe the <em>average</em> completion is not nearly as good, but the community will
just upvote the best ones, edit in new ones as necessary, and will make the quality competitive. <span>(You could start competing with
<span>AID</span> right now using <span>GPT</span>-neo on your home desktop, no need to be a
slave to the <span>OA API</span> and its many burdens!)</span> Choices can also be tagged by players: “funny”,
“dramatic”, “friendly”, “sexy” (perhaps color-coded)… NNs can <a href="https://arxiv.org/abs/2110.01691#google" id="wu-et-al-2021" title="AI Chains: Transparent and Controllable Human-AI Interaction by Chaining Large Language Model Prompts">be
chained</a>⁠, so it would be possible to generate generic actions and <a href="https://arxiv.org/abs/2109.03910#google" id="reif-et-al-2021" title="A Recipe For Arbitrary Text Style Transfer with Large Language Models">style transfer</a>
them, among other things. (“Say ‘hello’ but sexy”, “Say ‘hello’ but Scottish”, “Say ‘hello’ but surly”…)</p>
<section id="ranking-rl-finetuning">
<h2><a href="#ranking-rl-finetuning" title="Link to section: § &#39;Ranking &amp; RL Finetuning&#39;">Ranking &amp; RL Finetuning</a></h2>
<p>Given enough rankings, one can then train a ranker to predict the score of a choice. This can be used to screen new generations,
rerank existing sets of options on top of popularity/​votes, and one could even do OA-style <a href="https://arxiv.org/abs/2009.01325#openai" id="stiennon-et-al-2020">preference learning</a> to train a new better NN
which directly tries to generate good completions rather than merely statistically likely completions (which is what a default or
fiction-finetuned model is doing), enabling high quality generations without any human feedback.<a href="#fn3" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
</section>
<section id="emergent-gameplay">
<h2><a href="#emergent-gameplay" title="Link to section: § &#39;Emergent Gameplay&#39;">Emergent Gameplay</a></h2>
<p>A <span>CYOA</span> might sound stale and boring, but the curation means it’ll be quite the
opposite because of the social aspects.</p>
<p>It would be like a hybrid of <a href="https://en.wikipedia.org/wiki/HyperCard">HyperCard</a> &amp; <a href="https://en.wikipedia.org/wiki/MUD"><span>MUDs</span></a> (eg. <a href="https://en.wikipedia.org/wiki/Kingdom_of_Loathing"><em>Kingdom of Loathing</em></a>), because <span>CYOA</span> <span>paths are deep-linkable <span>URLs</span>, in a way
<span>AID</span> is not: I can easily hand you a link to an arbitrarily deep node, and you can click on it and
start playing exactly the same thing I am playing; there is nothing remotely like this for <span>AID</span>—even
if you hand me a</span> <em>scenario</em>, our games immediately diverge and there is no way for me to easily share my version with you.
But with a <span>CYOA</span> <span>tree, it’s all just <span>URLs</span>/​paths/​pointers.</span> And “the street finds its own use for things”.</p>
<p>So a player can ‘author’ an adventure by carefully curating a premise and then choosing actions and backing up and editing, creating a
full-fledged scenario in collaboration with the NN, and then announce the trail down the overall tree to the new sub-tree when the
sub-tree is satisfactory. Or players can diverge into different sub-adventures and continuums, and communities can develop elaborate
in-jokes and allusions across nodes, or influence the rankings to create ‘canonical’ stories or environments. If you’ve ever seen ‘forum
quests’ (Internet evolution of <a href="https://tvtropes.org/pmwiki/pmwiki.php/Main/PlayByPostGames"><span>play-by-post tabletop
<span>RPG</span> games</span></a>), imagine that, but with <a href="https://www.gwern.net/notes/Parasocial" id="gwern-notes-parasocial">parasocial</a> factions contending to decide which option at a key node becomes the ‘True End’ and which ones are just
‘Bad Ends’. There might be elaborate discussions as groups step through adventures, debating which choices they all will take, with
heretics reviled &amp; exiled… Streamers might let fans vote to decide what fork they go down, and their hordes of fans follow them down it,
voting with their feet for specific choices, and sculpting a particular stream.</p>
</section>
<section id="combined-the-cyoa-flywheel">
<h2><a href="#combined-the-cyoa-flywheel" title="Link to section: § &#39;Combined: The CYOA Flywheel&#39;">Combined: The <span>CYOA</span> Flywheel</a></h2>
<p>So, this creates positive feedback loops in multiple ways:</p>
<ol type="1">
<li>cheap play draws in new players, amortizing fixed costs over more players;</li>
<li>the more players you have, the more caching reduces cost per player, enabling you to offer the same level of service or cut prices
or invest in more generation;</li>
<li>the more players and nodes, the better ranked choices become, increasing player happiness while decreasing node generation (further
reducing cost);</li>
<li>and the better choices and scenarios are by default, the more players will be drawn in by the quality rather than low costs,
feeding into the previous 3 feedback loops;</li>
<li>the more players, the more likely community effects are to kick in and enable creation of brandnew ways to play, driving 1–4.</li>
</ol>
<p><span>Players of this might look down on regular <span>AID</span>-likes:</span></p>
<p>“You pay <em>how much</em>‽ Like, is that per year? And you get random illogical completions most of the time, while being unable to
share good games, and it takes several hours just to get an idea what you can do? But how do you do quests together with your clan or
<a href="https://en.wikipedia.org/wiki/Virtual_YouTuber">VTubers</a>? Wait, you don’t know what a ‘quest’ is?
smh! Well, I suppose that’s OK for fapping (you pervert), but that sounds like about it. Why don’t you try <span>CYOA</span> for a bit? I found a funny one the other day, where you turn into a goose, who is
naughty…”</p>
</section>
</section>
<section id="limitations-gaming-in-public">

<p>The main flaw with this is that people might want the contents of the tree to remain secret—that it’s not enough to merely have no names
associated with it, but the content itself must be secret. Perhaps the content has private data like names of people one knows, or is the
thought of anyone ever reading it is just sheer mortification. If people only want limited customization, like “<span>Hi, $<span>NAME</span>!</span>”<span>, then that’s easy to handle with templating/​prompts, somewhat like <span>AID</span>’s current world-variables, but that doesn’t work for f—ked-up porn.</span></p>
<p>I don’t see how <span>CYOA</span>-<span><span>AID</span> can too easily
handle such use-cases, aside from making trees per-account private, and the player having to pay full-freight for any new nodes. But this
is no worse than they currently undergo with <span>AID</span>, so that seems fine to me.</span> (People generating
f—ked-up porn are no worse off, are potentially better if they create shared porn-trees, perhaps restricted to small opt-in
communities<a href="#fn4" id="fnref4" role="doc-noteref"><sup>4</sup></a>⁠, and are much better off when they play the
regular trees.) <span>Perhaps everyone greatly overestimates the appeal of customization, because in <span>AID</span>, it costs exactly the same as non-customized; OnlyFans notwithstanding, there are millions of viewers for
regular porn stars’ videos, after all.</span> So the requirement of game trees being public may not be a big deal.</p>
</section>
<section id="see-also">

<ul>
<li>
<a href="https://www.gwern.net/TWDNE" id="gwern-twdne">This Waifu Does Not Exist</a>
</li>
</ul>
</section>
<section id="external-links">

<ul>
<li>
<a href="https://www.gwern.net/docs/www/egamebook.com/21bca4a61a1e6a797ff58c51ded03ec21ee27f83.html" id="hracek-2015" rel="archived alternate nofollow" data-url-original="https://egamebook.com/blog/complex-systems-simple-interface/" title="(Original URL: https://egamebook.com/blog/complex-systems-simple-interface/ )">“Complex game worlds, simple interfaces”</a>
</li>
<li>
<a href="https://endlessvn.io/"><em>Endless Visual Novel</em></a> (<a href="https://www.gwern.net/docs/www/old.reddit.com/744a373c253961f8938f9fb13d2c8bb756d6a969.html" rel="archived alternate nofollow" data-url-original="https://old.reddit.com/r/AIDungeon/comments/ovb4un/were_making_a_new_ai_storytelling_game_with/" title="(Original URL: https://old.reddit.com/r/AIDungeon/comments/ovb4un/were_making_a_new_ai_storytelling_game_with/ )">“We’re making a new
AI storytelling game with AI-generated graphics and music”</a>)
</li>
<li>
<a href="https://if50.substack.com/p/1999-king-of-dragon-pass">“1999: <em>King of Dragon Pass</em>”</a> (<a href="https://en.wikipedia.org/wiki/King_of_Dragon_Pass">WP</a>), <a href="https://if50.substack.com/p/2009-fallen-london">“2009: <em>Fallen London</em>”</a> (<a href="https://en.wikipedia.org/wiki/Fallen_London">WP</a>⁠; experiments in semi-synthetic text adventures with
modular narratives); <a href="https://if50.substack.com/p/2003-kingdom-of-loathing">“2003: <em>The Kingdom of Loathing</em>”</a>
(<a href="https://en.wikipedia.org/wiki/Kingdom_of_Loathing">WP</a>), <a href="https://if50.substack.com/p/1997-achaea">“1997: <em>Achaea</em>”</a> (<a href="https://en.wikipedia.org/wiki/Achaea%2C_Dreams_of_Divine_Lands">WP</a>), <a href="https://if50.substack.com/p/1990-lambdamoo">“1990: <em><span>Lambda<span>MOO</span></span></em>”</a> (<a href="https://en.wikipedia.org/wiki/LambdaMOO">WP</a>), <a href="https://www.gwern.net/docs/www/cabinetmagazine.org/1ae3602c2b07aa0ce63b515568348f8947872014.html" rel="archived alternate nofollow" data-url-original="https://cabinetmagazine.org/issues/64/lucas.php" title="A philosophy of &#39;permadeath&#39; in the multiuser dungeon (Original URL: https://cabinetmagazine.org/issues/64/lucas.php )">“Welcome to
Armageddon!”</a> (<a href="https://en.wikipedia.org/wiki/Armageddon_%28MUD%29">WP</a>), <a href="https://if50.substack.com/p/2011-nested">“2011: <em>Nested</em>”</a>⁠; <a href="https://if50.substack.com/p/2015-lifeline">“2015:
<em>Lifeline</em>”</a> (<a href="https://en.wikipedia.org/wiki/Lifeline_%282015_video_game%29">WP</a>)
</li>
<li>
<a href="https://www.gwern.net/docs/www/heterogenoustasks.wordpress.com/927e47e1d10dd1b25586b7dc48eaa3a5a4ab5cdd.html" rel="archived alternate nofollow" data-url-original="https://heterogenoustasks.wordpress.com/2015/01/26/standard-patterns-in-choice-based-games/" title="(Original URL: https://heterogenoustasks.wordpress.com/2015/01/26/standard-patterns-in-choice-based-games/ )">“Standard Patterns in
Choice-Based Games”</a>
</li>
<li>
<a href="https://www.gwern.net/docs/www/www.choiceofgames.com/5a6d41752106f5a75dcecbc02616cfe4fc4b7ea6.html" rel="archived alternate nofollow" data-url-original="https://www.choiceofgames.com/2011/07/by-the-numbers-how-to-write-a-long-interactive-novel-that-doesnt-suck/" title="(Original URL: https://www.choiceofgames.com/2011/07/by-the-numbers-how-to-write-a-long-interactive-novel-that-doesnt-suck/ )">“By the
Numbers: How to Write a Long Interactive Novel That Doesn’t Suck”</a> (hidden state to switch between choices)
</li>
</ul>
</section>
<section id="appendix">

<section id="game-tree-sizes">
<h2><a href="#game-tree-sizes" title="Link to section: § &#39;Game Tree Sizes&#39;">Game Tree Sizes</a></h2>
<p>Despite the possibility of exponential growth, game trees can be extremely large—into the billions of nodes—before storage becomes
any concern on modern storage devices, since terabytes or petabytes can be rented easily on hobbyist budgets like $100/​​month; the
main challenge is creating a game tree worth storing at all.</p>
<p>According to the <a href="https://github.com/AetherDevSecOps/aid_adventure_vulnerability_report" id="aetherdevsecops-2021">second <span>AI Dungeon</span> 2 database leak report</a><span>, <span>AID</span> had available 1 billion</span> “actions” (turns) in 50 million adventures (games). This translates to a mean
~200 turns per game, with an unknown but probably small amount of rerolling or backtracking.</p>
<p>The 184 <a href="https://en.wikipedia.org/wiki/List_of_Choose_Your_Own_Adventure_books">classic</a>
<a href="https://www.atlasobscura.com/articles/cyoa-choose-your-own-adventure-maps" id="laskow-2017"><span><span>CYOA</span> books have complicated graphs</span></a>⁠, but the books generally ranged
100–200 pages (usually closer to 100) where each page is a discrete node with typically 2 choices; the graphs tend to be ‘wide’, and a
book might have as many as 42 endings (which are terminal nodes). Apparently the single longest path in any <span>CYOA</span> book is 61 nodes (in <em>Surf Monkeys</em>, which then has few endings to make up), and
most are much less. (For comparison, the average chess game is something like 40–50 moves, and the average Go game ~200 moves.) The
‘bushiest’ <span>CYOA</span> book offers 48 non-terminal nodes or ‘decision points’ (<em>By
Balloon to the Sahara</em>), so the entire series might be somewhere on the order of 19,000 total nodes with perhaps 7,000 decision
nodes?</p>
<p>Thus, it’s possible to offer a worthwhile experience with game-trees with depths on the order of 20.</p>
<p>Now, consider a tree with 2 or 3 choices per node, and the worst-case where there are no imbalances &amp; we must store every possible
node. How does this work, storage-wise?</p>
<p>After 10 turns, you still only have 2,047 nodes (2<sup>10-1</sup> + 1, a full <a href="https://en.wikipedia.org/wiki/Binary_tree">binary tree</a>). This is a small &amp; affordable number, no matter how they are generated. And once they are
generated and cached, they are free for the rest of eternity. No matter how many millions or billions of players go through the first 10
turns, they are all 100% free once you generate those 2047 nodes.</p>
<p>Even 20 turns deep, the tree is still only ~2 million nodes. <span>(<span>AID</span> had &gt;500×, over 1
billion</span> ‘nodes’, and that was with clamping down on use due to cost.) And remember, it’s a spectrum with <span>CYOA</span> <span>turning into <span>AID</span> as the cache miss rate
increases: at worst, with 0% cache hit rate, you are merely as inefficient and expensive as <span>AID</span> (the
player somehow contrives to hit a new uncached node every single time &amp; the NN must be used), while at best, 100% cached, you are
infinitely cheaper (player hits only cached nodes which are a tiny string of text</span> <a href="https://www.gwern.net/docs/www/www.sqlite.org/ea437be2fd093a01800489ce74f0bea99b367eff.html" rel="archived alternate nofollow" data-url-original="https://www.sqlite.org/fasterthanfs.html" title="SQLite: 35% Faster Than The Filesystem [for small files] (Original URL: https://www.sqlite.org/fasterthanfs.html )">read instantly</a>
from your database served using ~unlimited bandwidth).</p>
<p>Another way to put it is to back out storage requirements: you can rent a 12tb server from Hetzner for ~$50/​month, which is easy for
anyone to pay for as a hobby or startup. After overhead, the OS, and the server software, let’s say that gives you 10tb of database. A
node requires maybe 1kb of space (&gt;512 bytes, the action texts, and a couple integer IDs) for an implementation lacking any fancy
features like tagging or annotations. We’ll ignore any compression.</p>
<p>So, you can store 10TB × 1000GB/​TB × 1000MB/​GB × 1000KB/​MB = 1<sup>10</sup> or 10 billion or 10,000,000,000 nodes in that server.
For the <a href="https://en.wikipedia.org/wiki/Binary_tree">binary tree</a>⁠, that’s storing a complete
total game-tree of <em>34</em> turns before it is even possible to go out of cache; add another server or wait a few years to double
capacity, and you go down to 35 turns, and so on. (For 3 choices, that’d be more like 21 turns, I think.) If you are willing to build
your own box stuffed with drives instead of using off-the-shelf dedicated servers, it’s entirely possible to build petabyte boxes (40
turns deep) for maybe $10,000 (since a 10tb drive costs ~$100, so 100 of those…) or bigger (accumulate 10 of those petabyte boxes, and
you’re 44 turns deep).</p>
<p><span>So, you can plausibly create trees covering a large fraction of game time, which will then save a large fraction of generation
requests, and all this well before reaching <span>AID</span> scale (which is itself surely a lower bound on how
much will be feasible in the future).</span> Nor is storage of text is a major barrier, as text is just extremely cheap and getting
cheaper. This leaves <em>generating</em> is the main cost here—terabytes of NN text doesn’t come cheap. The major challenge for a
<span>CYOA</span> game tree, economically, is the bootup period, the phase where the game tree
is small and most of it not yet generated or paid for and <a href="#combined-the-cyoa-flywheel">the flywheel</a> has not started up.</p>
</section>
</section>

</div></div>
  </body>
</html>
