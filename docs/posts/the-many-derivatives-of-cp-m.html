<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.theregister.com/2022/08/04/the_many_derivatives_of_cpm/">Original</a>
    <h1>The many derivatives of CP/M</h1>
    
    <div id="readability-page-1" class="page"><div id="body">
<p>Its new licence says that <em>&#34;CP/M and its derivatives&#34;</em> are free for anyone to modify and redistribute. But <strong>which</strong> derivatives?</p>
<p>The original Intel 8080 version of CP/M had a relatively brief reign: it appeared in 1974, just seven years before the IBM PC launched with PC DOS. The PC, and its many clones running MS-DOS, rapidly outsold and replaced CP/M.</p>
<p>But still, CP/M was, for a while, the industry-standard microcomputer OS, making Digital Research a powerful and important company. Wealthy companies that lose dominance over a market they formerly controlled don&#39;t tend to just give up. Digital Research put a substantial R&amp;D effort into expanding and enhancing CP/M, creating a large family of OSes. It had some significant wins and big sales. Some of those products are still in use. All those products are arguably &#34;CP/M derivatives&#34;, and as such, <a target="_blank" href="https://www.theregister.com/2022/07/15/cpm_open_source/">Bryan Sparks&#39; 2001 edict</a> might have just open-sourced them all.</p>
<h3>
  <span>Origin story</span>
</h3>
<p>The original CP/M was designed for the Intel 8080, although later most people ran it on Zilog&#39;s enhanced chip, the Z80. That&#39;s how come CP/M ran on the Amstrad CPC, PCW, and even the ZX Spectrum +3… and a <a href="https://konamiman.github.io/MSX2-Technical-Handbook/md/Chapter3.html" rel="nofollow">compatible</a> OS on MSX machines, mainly in Japan.</p>
<p>Later, as the OS was ported and rewritten for different architectures, that original version was retrospectively renamed CP/M-80. Despite some stories you may have read about Digital Research&#39;s dealings with IBM, the 8086 version, CP/M-86, was one of the original three OSes IBM offered for the original PC, alongside PC DOS and the UCSD p-System Pascal environment.</p>

    

<p>Microsoft cleverly retained the rights to licence the DOS it provided to IBM to other companies. That product, MS-DOS, was of course originally bought in anyway. Microsoft didn&#39;t write (or even buy, at first) MS-DOS: it licenced it from Tim Paterson of Seattle Computer Products</p>

        


        

<p>DR&#39;s CP/M-86 didn&#39;t sell well, though. This is partly because it cost $240, while PC DOS was just $40. This sent Digital Research down a long road of upgrading and enhancing its OS&#39;s functionality to make it more competitive.</p>
<h3>
  <span>The DOS extended family</span>
</h3>
<p>You might remember <a href="https://www.theregister.com/1999/11/11/opening_windows_ii_drdos/">DR&#39;s MS-DOS compatible DR-DOS</a>, and how <a href="https://www.theregister.com/1999/11/05/how_ms_played_the_incompatibility/">Microsoft was caught faking its incompatibility with Windows 3.1</a>.</p>
<p>Novell <a href="https://www.theregister.com/2004/11/12/novell_microsoft_wordperfect_antitrust/">bought Digital Research</a>, then spun it off as part of its Linux division Caldera. Caldera later <a href="https://www.theregister.com/2000/01/11/ms_pays_up_to_settle/">won a $155 million-plus settlement from Microsoft</a>, and made <a href="https://www.theregister.com/1999/04/27/gem_the_gui_that_beat/">the GEM desktop open source</a>.</p>
<p>Caldera also briefly <a href="https://web.archive.org/web/19961018220910/http://caldera.com/news/pr002.html" rel="nofollow">released</a> the kernel of DR-DOS 7.01 as open source, then changed its mind and closed it again. Work on the open version continued for a while by the <a href="https://web.archive.org/web/20160706205139/http://www.drdosprojects.de/" rel="nofollow">DR DOS Enhancement Project</a>, and it is still out there.</p>
<div><p><a href="https://regmedia.co.uk/2022/08/02/drdos-81-screenie.png" target="_blank"><img src="https://regmedia.co.uk/2022/08/02/drdos-81-screenie.png?x=442&amp;y=246&amp;infer_y=1" alt="DeviceLogics briefly sold DR-DOS 8.1, rebranded DrDOS. The classic CP/M-style separator between directory columns gives away its ancestry." title="DeviceLogics briefly sold DR-DOS 8.1, rebranded DrDOS. The classic CP/M-style separator between directory columns gives away its ancestry." height="246" width="442"/></a></p><p>DeviceLogics briefly sold DR-DOS 8.1, rebranded DrDOS. The classic CP/M-style separator between directory columns gives away its ancestry.</p>
</div>
<p>After rediscovering backups of Novell&#39;s later work, Caldera&#39;s thin-client spin-off Lineo continued to sell DR-DOS. Version 7.03 to 7.05 were licenced for use on boot disks to OEMs such as Seagate, Nero and Ontrack.</p>
<p>After gradually modernizing DR-DOS to have support for FAT32, hard disks over 8GB, the TaskMax multitasker, DPMI support and making it able to run from ROM, Lineo offered DR-DOS 8.0 and then 8.1. However, the FreeDOS Project <a href="https://web.archive.org/web/20100626202749/http://www.freedos.org/freedos/news/press/2005-drdos.txt" rel="nofollow">found</a> that DR-DOS 8.1 contained FreeDOS code, and the product was withdrawn from the market. The company then tried to <a href="https://web.archive.org/web/20180603094951/http://drdos.com/products/dr-dos/dr-dos-buy-out/" rel="nofollow">sell</a> the source code.</p>
<h3>
  <span>Marooned in Real Time</span>
</h3>
<p>DR also offered far more capable OSes than DR-DOS.</p>
<p>The most significant change originated from MP/M. Hard as it is to believe in 2022, MP/M was a <em>multiuser</em> OS for eight-bit computers with 32kB or more of RAM. DR ported MP/M 2 to the 8086, then merged it with CP/M-86 1 to create <em>Concurrent CP/M</em> 3 – a multitasking, multiuser OS. In 1980s terms, Concurrent CP/M turned a PC into a minicomputer: a &#34;host&#34; machine that shared by multiple users at the same time, using text terminals on RS-232 serial ports.</p>

        

<p>There were also 16-bit variants of CP/M for the Motorola 68000 family and Zilog&#39;s Z8000 chips. To create these, the OS was re-written from a mixture of <a href="https://www.retrotechnology.com/dri/dri_plm.html" rel="nofollow">PL/M</a> and assembly language into more modern high-level languages: initially DR&#39;s own <a href="https://cpcrulez.fr/applications_coding-pascal_mt_plus.htm" rel="nofollow">Pascal-MT+</a>, then re-implemented in C.</p>
<p>And so far in the story, the Unofficial CP/M Site has <a href="http://www.cpm.z80.de/source.html" rel="nofollow">source code</a> for most of this generation of OSes. The snag is that after this point is when the story gets really interesting.</p>
<p>While Concurrent CP/M was a very capable OS, ideal for multiuser accounts systems, it had a big limitation: it could only run CP/M-86 apps. The problem being that there weren&#39;t that many of those, while the market in MS-DOS apps was exploding. In response, DR developed <a href="https://oldcomputers.dyndns.org/public/pub/manuals/dri_micronotes_vol2_1,2,3_bw_full.pdf" rel="nofollow">&#34;PC-Mode&#34;</a> (PDF): an add-on which allowed DOS 1.x programs to run on Concurrent CP/M.</p>

        

<p>(Readers with very long memories might remember DR&#39;s <a href="https://www.seasip.info/Cpm/dosplus.html" rel="nofollow">DOS Plus</a>, which shipped on the <a href="https://chrisacorns.computinghistory.org.uk/Computers/Master512.html" rel="nofollow">BBC Master 512</a> and <a href="http://dosdays.co.uk/computers/Amstrad%20PC1000/amstrad_pc1000.php" rel="nofollow">Amstrad PC1512</a>. DOS Plus was a combination of CP/M-86 Plus with the PC Mode emulator: a single-user OS that could read MS-DOS floppies and run some DOS apps. It was what eventually evolved into DR-DOS.)</p>
<p>Thanks to this new ability, in 1984, DR renamed the OS to &#34;Concurrent DOS&#34;, or CDOS for short. CDOS 3.2 could multitask CP/M-86 1 apps, Concurrent CP/M 3 apps <em>and</em> PC/MS-DOS 2 apps, <em>all at the same time</em>. That meant a new snag: they all had to share the 8086 PC&#39;s notorious maximum of 640kB of RAM.</p>
<p>DR rose to the challenge and rebuilt the OS for what (back in 1982) was called Intel&#39;s new <a href="https://books.google.cz/books?id=ZjAEAAAAMBAJ&amp;lpg=PA4&amp;pg=PA4#v=onepage&amp;q&amp;f=false" rel="nofollow">&#34;superchip&#34;</a>: the 80286. As BYTE magazine&#39;s 1985 <a href="https://www.tech-insider.org/personal-computers/research/1985/05.html" rel="nofollow">writeup</a> said, <a href="http://bidmeadia.blogspot.com/2006/05/surviving-big-blue.html" rel="nofollow">echoed</a> by Reg contributor Chris Bidmead, Concurrent DOS-286 could use the new chip to multitask existing DOS apps.</p>
<div><p><img src="https://regmedia.co.uk/2022/07/15/rc2014pro-2.jpg?x=174&amp;amp;y=115&amp;amp;crop=1" width="174" height="115" alt="RC2014 Pro"/></p><h2 title="The venerable Z80 OS is a now hobbyist favorite">CP/M&#39;s open-source status clarified after 21 years</h2>
<p><a href="https://www.theregister.com/2022/07/15/cpm_open_source/"><span>READ MORE</span></a></p></div>
<p>This project hit a serious roadblock when Intel released a later stepping of the chip. While CDOS-286&#39;s DOS multitasking worked on the B-1 stepping of the &#39;286, Intel&#39;s subsequent C-1 stepping <a href="https://books.google.cz/books?id=2y4EAAAAMBAJ&amp;lpg=PA17&amp;pg=PA17#v=onepage&amp;q&amp;f=false" rel="nofollow">broke</a> the functionality. CDOS-286 worked on the shipping version of the chip, but it couldn&#39;t multitask DOS apps. Intel promised that the missing capability would be restored in a future E-1 stepping.</p>
<p>Faced with an OS that couldn&#39;t deliver its flaship feature on most shipping 286 kit, DR changed its marketing: CDOS-286 was renamed FlexOS-286, and sold on the strength of its real-time capabilities, as in this <a href="http://bitsavers.org/pdf/digitalResearch/flexos/brochures/FlexOS_286_Brochure.pdf" rel="nofollow">brochure</a> [PDF]. The version 1.31 <a href="https://silo.tips/download/flexos-286-version-release-note-01-may-contents" rel="nofollow">release notes</a> carefully specify that an E-2 stepping CPU is needed for DOS compatibility.</p>
<p>In this niche, FlexOS did well, and evolved into multiple products enhanced and sold by several companies, including Siemens&#39; <a href="https://cache.industry.siemens.com/dl/files/812/6580812/att_77773/v1/flexosv42_e.pdf" rel="nofollow">COROS</a> (PDF) and IBM <a href="https://www.ibm.com/common/ssi/cgi-bin/ssialias?infotype=an&amp;subtype=ca&amp;htmlfid=897/ENUS293-281&amp;language=enus" rel="nofollow">4690 OS</a> for its <a href="https://web.archive.org/web/20010703051225/http://www2.clearlake.ibm.com/store/support/photoalbum/html/sp4694-s.html" rel="nofollow">SurePOS</a> cash registers. The latter is still <a href="https://commerce.toshiba.com/wps/portal/marketing/?urile=wcm:path:/en-us/home/support/product-support/support-software/support-4690os" rel="nofollow">supported</a> by Toshiba.</p>
<h3>
  <span>Going Multiuser</span>
</h3>
<p>Although the shipping version of Intel&#39;s 80286 severely impaired CDOS-286&#39;s capabilities, in the same year that CDOS-286 was released, the 80286 was itself supplanted by the Intel 80386. Intel realized that the dominant OS for its processors was DOS, not Xenix or the long-delayed OS/2. So it gave the 386 the ability to create and multitask multiple 8086 &#34;virtual machines&#34; in hardware: not a true hypervisor, but a limited version that make it relatively easy to multitask multiple DOS apps.</p>
<p>DR adapted this to create Concurrent DOS-386, <a href="https://books.google.cz/books?id=0DAEAAAAMBAJ&amp;lpg=PA1&amp;pg=PA1#v=onepage&amp;q&amp;f=false" rel="nofollow">announced</a> in 1987: a full 32-bit OS with hardware-assisted multitasking of DOS apps. Later versions incorporated some of the technology from the still new DR-DOS, updating the emulation from MS-DOS 2.11 to MS-DOS 3.3.</p>
<p>Around 1991, DR <a href="https://books.google.cz/books?id=rlAEAAAAMBAJ&amp;lpg=PA97&amp;pg=PA97#v=onepage&amp;q&amp;f=false" rel="nofollow">renamed</a> the product Multiuser DOS… but soon afterwards, Novell <a href="https://www.tech-insider.org/personal-computers/research/1991/0717.html" rel="nofollow">acquired</a> DR, and the next year killed off the multiuser line. Three OEMs licenced the source code and continued selling their own versions.</p>
<div><p><a href="https://regmedia.co.uk/2022/08/02/ims-real32-76.png" target="_blank"><img src="https://regmedia.co.uk/2022/08/02/ims-real32-76.png?x=442&amp;y=246&amp;infer_y=1" alt="IMS Real/32 may not look like muchm but that status line at the bottom shows that this is a multitasking OS." title="IMS Real/32 may not look like muchm but that status line at the bottom shows that this is a multitasking OS." height="246" width="442"/></a></p><p>IMS Real/32 – the last offspring of Concurrent DOS</p>
</div>
<p>DataPac Australasia Pty sold Multiuser DOS 5, later renamed System Manager 7, until it was acquired by Citrix, when the product was discontinued. Concurrent Controls Inc – later Applica Inc, and later still Aplycon Technologies – sold <a href="https://books.google.cz/books?id=kDgEAAAAMBAJ&amp;lpg=PA20&amp;pg=PA20#v=onepage&amp;q&amp;f=false" rel="nofollow">CCI Multiuser DOS 7</a> until about 2005. Intelligent Micro Software sold it as IMS Multiuser DOS, later renamed <a href="https://books.google.cz/books?id=VzgEAAAAMBAJ&amp;lpg=PA28&amp;pg=PA28#v=onepage&amp;q&amp;f=false" rel="nofollow">Real/32</a>, possibly until as late as <a href="https://web.archive.org/web/20170118003730/http://www.imsltd.com/pricespecs/price_list.htm" rel="nofollow">2017</a>. Some parts of IMS still seem to exist, including <a href="https://tibusltd.co.uk/main.htm" rel="nofollow">Integrated Solutions</a>.</p>
<h3>
  <span>CP/M got to more places than you might think</span>
</h3>
<p>The offspring of CP/M evolved in multiple different directions. While DR-DOS sold strongly for a while, led to the Novell acquisition, and its competition led Microsoft itself to improve MS-DOS substantially, it was only one branch of a large family tree.</p>
<p>Although CP/M-68K was not a big hit, with an injection of DR-DOS technology, its descendant GEMDOS powered the Atari ST, loved by millions. An open-source recreation, containing some of Caldera&#39;s freed code, is called <a href="https://emutos.sourceforge.io/" rel="nofollow">EmuTOS</a>. It runs on real Atari hardware, on various emulators, and even, ironically, on the Amiga. There&#39;s also an all-FOSS multitasking OS for later STs and emulators, based on the MINT kernel and GEM, called <a href="https://aranym.github.io/afros.html" rel="nofollow">AFROS</a>.</p>
<div><p><a href="https://regmedia.co.uk/2022/08/02/freedos-opengem.png" target="_blank"><img src="https://regmedia.co.uk/2022/08/02/freedos-opengem.png?x=442&amp;y=332&amp;infer_y=1" alt="FreeDOS includes the FreeGEM desktop, which restores all the features Apple made DR remove in the 1980s – and more." title="FreeDOS includes the FreeGEM desktop, which restores all the features Apple made DR remove in the 1980s – and more." height="332" width="442"/></a></p><p>FreeGEM on FreeDOS 1.3</p>
</div>
<p>The PC version of GEM was updated by the <a href="http://www.deltasoft.com/" rel="nofollow">FreeGEM</a> community, and now forms <a href="http://wiki.freedos.org/wiki/index.php/Releases/1.3/Packages" rel="nofollow">part</a> of <a href="https://www.theregister.com/2022/02/23/freedos_13/">the FreeDOS OS</a>.</p>
<ul>

<li><a href="https://www.theregister.com/2022/07/20/yocto_project_4/">Yocto Project gets big backer and second LTS release – but what is it?</a></li>

<li><a href="https://www.theregister.com/2022/07/18/improve_linux_performance/">Improve Linux performance with this one weird trick</a></li>

<li><a href="https://www.theregister.com/2022/01/27/ibm_s360_simulation/">Hardware boffin starts work on simulation of an entire IBM S/360 Model 50 mainframe</a></li>

<li><a href="https://www.theregister.com/2019/04/22/who-me/">Take your pick: 0/1/* ... but beware – your click could tank an entire edition of a century-old newspaper</a></li>
</ul>
<p>Concurrent DOS-286 evolved into a whole family of realtime and embedded OSes, complete with their own multitasking GUI based on <a href="https://web.archive.org/web/20140811034828/https://collaboration.cmc.ec.gc.ca/science/rpn/biblio/ddj/Website/articles/DDJ/1989/8903/8903c/8903c.htm" rel="nofollow">X/GEM</a>, with apps written in Java. This ran on so many point-of-sales systems that it&#39;s very likely that, wherever you are in the world, you&#39;ve bought something and your money went into a cash register running a DR OS.</p>
<p>Meanwhile the 32-bit version, Concurrent DOS-386, evolved into Multiuser DOS and was sold around the world by multiple companies. We have tried to contact everyone we can identify who sold any of the last generation of DR products, with no success.</p>
<p>Tantalisingly, all of these products could be described as CP/M derivatives, and as such, are now covered by <a href="https://www.theregister.com/2022/07/15/cpm_open_source/">the new CP/M open licence agreement</a>. It would be terrific to see at least some of these products&#39; source code released, and to see them running again today, expanded and enhanced and updated. ®</p>                            

                </div></div>
  </body>
</html>
