<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/riscv-collab/riscv-gnu-toolchain">Original</a>
    <h1>GNU toolchain for RISC-V including GCC</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">This is the RISC-V C and C++ cross-compiler. It supports two build modes:
a generic ELF/Newlib toolchain and a more sophisticated Linux-ELF/glibc
toolchain.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-getting-the-sources" aria-hidden="true" href="#getting-the-sources"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting the sources</h3>
<p dir="auto">This repository uses submodules, but submodules will fetch automatically on demand,
so <code>--recursive</code> or <code>git submodule update --init --recursive</code> is not needed.</p>
<div data-snippet-clipboard-copy-content="$ git clone https://github.com/riscv/riscv-gnu-toolchain"><pre><code>$ git clone https://github.com/riscv/riscv-gnu-toolchain
</code></pre></div>
<p dir="auto"><strong>Warning: git clone takes around 6.65 GB of disk and download size</strong></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-prerequisites" aria-hidden="true" href="#prerequisites"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Prerequisites</h3>
<p dir="auto">Several standard packages are needed to build the toolchain.</p>
<p dir="auto">On Ubuntu, executing the following command should suffice:</p>
<div data-snippet-clipboard-copy-content="$ sudo apt-get install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev ninja-build"><pre><code>$ sudo apt-get install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev ninja-build
</code></pre></div>
<p dir="auto">On Fedora/CentOS/RHEL OS, executing the following command should suffice:</p>
<div data-snippet-clipboard-copy-content="$ sudo yum install autoconf automake python3 libmpc-devel mpfr-devel gmp-devel gawk  bison flex texinfo patchutils gcc gcc-c++ zlib-devel expat-devel"><pre><code>$ sudo yum install autoconf automake python3 libmpc-devel mpfr-devel gmp-devel gawk  bison flex texinfo patchutils gcc gcc-c++ zlib-devel expat-devel
</code></pre></div>
<p dir="auto">On Arch Linux, executing the following command should suffice:</p>
<div data-snippet-clipboard-copy-content="$ sudo pacman -Syyu autoconf automake curl python3 libmpc mpfr gmp gawk base-devel bison flex texinfo gperf libtool patchutils bc zlib expat"><pre><code>$ sudo pacman -Syyu autoconf automake curl python3 libmpc mpfr gmp gawk base-devel bison flex texinfo gperf libtool patchutils bc zlib expat
</code></pre></div>
<p dir="auto">Also available for Arch users on the AUR: <a href="https://aur.archlinux.org/packages/riscv-gnu-toolchain-bin" rel="nofollow">https://aur.archlinux.org/packages/riscv-gnu-toolchain-bin</a></p>
<p dir="auto">On OS X, you can use <a href="http://brew.sh" rel="nofollow">Homebrew</a> to install the dependencies:</p>
<div data-snippet-clipboard-copy-content="$ brew install python3 gawk gnu-sed gmp mpfr libmpc isl zlib expat texinfo flock"><pre><code>$ brew install python3 gawk gnu-sed gmp mpfr libmpc isl zlib expat texinfo flock
</code></pre></div>
<p dir="auto">To build the glibc (Linux) on OS X, you will need to build within a case-sensitive file
system.  The simplest approach is to create and mount a new disk image with
a case sensitive format.  Make sure that the mount point does not contain spaces. This is not necessary to build newlib or gcc itself on OS X.</p>
<p dir="auto">This process will start by downloading about 200 MiB of upstream sources, then
will patch, build, and install the toolchain.  If a local cache of the
upstream sources exists in $(DISTDIR), it will be used; the default location
is /var/cache/distfiles.  Your computer will need about 8 GiB of disk space to
complete the process.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-installation-newlib" aria-hidden="true" href="#installation-newlib"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation (Newlib)</h3>
<p dir="auto">To build the Newlib cross-compiler, pick an install path (that is writeable).
If you choose, say, <code>/opt/riscv</code>, then add <code>/opt/riscv/bin</code> to your <code>PATH</code>.
Then, simply run the following command:</p>
<div data-snippet-clipboard-copy-content="./configure --prefix=/opt/riscv
make"><pre><code>./configure --prefix=/opt/riscv
make
</code></pre></div>
<p dir="auto">You should now be able to use riscv64-unknown-elf-gcc and its cousins.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-installation-linux" aria-hidden="true" href="#installation-linux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation (Linux)</h3>
<p dir="auto">To build the Linux cross-compiler, pick an install path (that is writeable).
If you choose, say, <code>/opt/riscv</code>, then add <code>/opt/riscv/bin</code> to your <code>PATH</code>.
Then, simply run the following command:</p>
<div data-snippet-clipboard-copy-content="./configure --prefix=/opt/riscv
make linux"><pre><code>./configure --prefix=/opt/riscv
make linux
</code></pre></div>
<p dir="auto">The build defaults to targeting RV64GC (64-bit) with glibc, even on a 32-bit
build environment. To build the 32-bit RV32GC toolchain, use:</p>
<div data-snippet-clipboard-copy-content="./configure --prefix=/opt/riscv --with-arch=rv32gc --with-abi=ilp32d
make linux"><pre><code>./configure --prefix=/opt/riscv --with-arch=rv32gc --with-abi=ilp32d
make linux
</code></pre></div>
<p dir="auto">In case you prefer musl libc over glibc, configure just like above and opt for
<code>make musl</code> instead of <code>make linux</code>.</p>
<p dir="auto">Supported architectures are rv32i or rv64i plus standard extensions (a)tomics,
(m)ultiplication and division, (f)loat, (d)ouble, or (g)eneral for MAFD.</p>
<p dir="auto">Supported ABIs are ilp32 (32-bit soft-float), ilp32d (32-bit hard-float),
ilp32f (32-bit with single-precision in registers and double in memory, niche
use only), lp64 lp64f lp64d (same but with 64-bit long and pointers).</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-installation-newliblinux-multilib" aria-hidden="true" href="#installation-newliblinux-multilib"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation (Newlib/Linux multilib)</h3>
<p dir="auto">To build either cross-compiler with support for both 32-bit and
64-bit, run the following command:</p>
<div data-snippet-clipboard-copy-content="./configure --prefix=/opt/riscv --enable-multilib"><pre><code>./configure --prefix=/opt/riscv --enable-multilib
</code></pre></div>
<p dir="auto">And then either <code>make</code>, <code>make linux</code> or <code>make musl</code> for the Newlib, Linux
glibc-based or Linux musl libc-based cross-compiler, respectively.</p>
<p dir="auto">The multilib compiler will have the prefix riscv64-unknown-elf- or
riscv64-unknown-linux-gnu- but will be able to target both 32-bit and 64-bit
systems.
It will support the most common <code>-march</code>/<code>-mabi</code> options, which can be seen by
using the <code>--print-multi-lib</code> flag on either cross-compiler.</p>
<p dir="auto">The musl compiler (riscv64-unknown-linux-musl-) will only be able to target
64-bit systems due to limitations in the upstream musl architecture support.
The <code>--enable-multilib</code> flag therefore does not actually enable multilib support
for musl libc.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-troubleshooting-build-problems" aria-hidden="true" href="#troubleshooting-build-problems"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Troubleshooting Build Problems</h3>
<p dir="auto">Builds work best if installing into an empty directory.  If you build a
hard-float toolchain and then try to build a soft-float toolchain with
the same --prefix directory, then the build scripts may get confused
and exit with a linker error complaining that hard float code can&#39;t be
linked with soft float code.  Removing the existing toolchain first, or
using a different prefix for the second build, avoids the problem.  It
is OK to build one newlib and one linux toolchain with the same prefix.
But you should avoid building two newlib or two linux toolchains with
the same prefix.</p>
<p dir="auto">If building a linux toolchain on a MacOS system, or on a Windows system
using the Linux subsystem or cygwin, you must ensure that the filesystem
is case-sensitive.  A build on a case-insensitive filesystem will fail when
building glibc because *.os and *.oS files will clobber each other during
the build eventually resulting in confusing link errors.</p>
<p dir="auto">Centos (and RHEL) provide old GNU tools versions that may be too old to build
a RISC-V toolchain.  There is an alternate toolset provided that includes
current versions of the GNU tools.  This is the devtoolset provided as part
of the Software Collection service.  For more info, see the
<a href="https://www.softwarecollections.org/en/scls/rhscl/devtoolset-7/" rel="nofollow">devtoolset-7</a>
URL.  There are various versions of the devtoolset that are available, so you
can also try other versions of it, but we have at least one report that
devtoolset-7 works.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-advanced-options" aria-hidden="true" href="#advanced-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Advanced Options</h3>
<p dir="auto">There are a number of additional options that may be passed to
configure.  See &#39;./configure --help&#39; for more details.</p>
<p dir="auto">Also you can define extra flags to pass to specific projects: <code>BINUTILS_NATIVE_FLAGS_EXTRA, BINUTILS_TARGET_FLAGS_EXTRA, GCC_EXTRA_CONFIGURE_FLAGS, GDB_NATIVE_FLAGS_EXTRA, GDB_TARGET_FLAGS_EXTRA, GLIBC_NATIVE_FLAGS_EXTRA, GLIBC_TARGET_FLAGS_EXTRA</code>.
Example: <code>GCC_EXTRA_CONFIGURE_FLAGS=--with-gmp=/opt/gmp make linux</code></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-set-default-isa-spec-version" aria-hidden="true" href="#set-default-isa-spec-version"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Set default ISA spec version</h4>
<p dir="auto"><code>--with-isa-spec=</code> can specify the default version of the RISC-V Unprivileged
(formerly User-Level) ISA specification.</p>
<p dir="auto">Possible options are: <code>2.2</code>, <code>20190608</code> and <code>20191213</code>.</p>
<p dir="auto">The default version is <code>2.2</code>.</p>
<p dir="auto">More details about this option you can refer this post <a href="https://groups.google.com/a/groups.riscv.org/g/sw-dev/c/aE1ZeHHCYf4" rel="nofollow">RISC-V GNU toolchain bumping default ISA spec to 20191213</a>.</p>
<h4 tabindex="-1" dir="auto"><a id="user-content-build-with-customized-multi-lib-configure" aria-hidden="true" href="#build-with-customized-multi-lib-configure"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Build with customized multi-lib configure.</h4>
<p dir="auto"><code>--with-multilib-generator=</code> can specify what multilibs to build.  The argument
is a semicolon separated list of values, possibly consisting of a single value.
Currently only supported for riscv*-<em>-elf</em>.  The accepted values and meanings
are given below.</p>
<p dir="auto">Every config is constructed with four components: architecture string, ABI,
reuse rule with architecture string and reuse rule with sub-extension.</p>
<p dir="auto">Re-use part support expansion operator (*) to simplify the combination of
different sub-extensions, example 4 demonstrate how it uses and works.</p>
<p dir="auto">Example 1: Add multi-lib support for rv32i with ilp32.</p>
<div data-snippet-clipboard-copy-content="./configure --with-multilib-generator=&#34;rv32i-ilp32--&#34;"><pre><code>./configure --with-multilib-generator=&#34;rv32i-ilp32--&#34;
</code></pre></div>
<p dir="auto">Example 2: Add multi-lib support for rv32i with ilp32 and rv32imafd with ilp32.</p>
<div data-snippet-clipboard-copy-content="./configure --with-multilib-generator=&#34;rv32i-ilp32--;rv32imafd-ilp32--&#34;"><pre><code>./configure --with-multilib-generator=&#34;rv32i-ilp32--;rv32imafd-ilp32--&#34;
</code></pre></div>
<p dir="auto">Example 3: Add multi-lib support for rv32i with ilp32; rv32im with ilp32 and
rv32ic with ilp32 will reuse this multi-lib set.</p>
<div data-snippet-clipboard-copy-content="./configure --with-multilib-generator=&#34;rv32i-ilp32-rv32im-c&#34;"><pre><code>./configure --with-multilib-generator=&#34;rv32i-ilp32-rv32im-c&#34;
</code></pre></div>
<p dir="auto">Example 4: Add multi-lib support for rv64ima with lp64; rv64imaf with lp64,
rv64imac with lp64 and rv64imafc with lp64 will reuse this multi-lib set.</p>
<div data-snippet-clipboard-copy-content="./configure --with-multilib-generator=&#34;rv64ima-lp64--f*c&#34;"><pre><code>./configure --with-multilib-generator=&#34;rv64ima-lp64--f*c&#34;
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-test-suite" aria-hidden="true" href="#test-suite"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Test Suite</h3>
<p dir="auto">The Dejagnu test suite has been ported to RISC-V. This can be run with a
simulator for the elf and linux toolchains. The simulator can be selected
by the SIM variable in the Makefile, e.g. SIM=qemu, SIM=gdb, or SIM=spike
(experimental).In addition, the simulator can also be selected with the
configure time option <code>--with-sim=</code>.However, the testsuite allowlist is
only mintained for qemu.Other simulators might get extra failures.
To test GCC, run the following commands:</p>
<div data-snippet-clipboard-copy-content="./configure --prefix=$RISCV --disable-linux --with-arch=rv64ima # or --with-arch=rv32ima
make newlib
make report-newlib SIM=gdb # Run with gdb simulator

./configure --prefix=$RISCV
make linux
make report-linux SIM=qemu # Run with qemu

./configure --prefix=$RISCV --with-sim=spike
make linux
make report               # Run with spike"><pre><code>./configure --prefix=$RISCV --disable-linux --with-arch=rv64ima # or --with-arch=rv32ima
make newlib
make report-newlib SIM=gdb # Run with gdb simulator

./configure --prefix=$RISCV
make linux
make report-linux SIM=qemu # Run with qemu

./configure --prefix=$RISCV --with-sim=spike
make linux
make report               # Run with spike
</code></pre></div>
<p dir="auto">Note:</p>
<ul dir="auto">
<li>spike only support rv64* bare-metal/elf toolchain.</li>
<li>gdb simulator only support bare-metal/elf toolchain.</li>
</ul>
<h4 tabindex="-1" dir="auto"><a id="user-content-selecting-the-tests-to-run-in-gccs-regression-test-suite" aria-hidden="true" href="#selecting-the-tests-to-run-in-gccs-regression-test-suite"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Selecting the tests to run in GCC&#39;s regression test suite</h4>
<p dir="auto">By default GCC will execute all tests of its regression test suite.
While running them in parallel (e.g. <code>make -j$(nproc) report</code>) will
significanlty speed up the execution time on multi-processor systems,
the required time for executing all tests is usually too high for
typical development cycles. Therefore GCC allows to select the tests
that are being executed using the environment variable <code>RUNTESTFLAGS</code>.</p>
<p dir="auto">To restrict a test run to only RISC-V specific tests
the following command can be used:</p>
<p dir="auto">RUNTESTFLAGS=&#34;riscv.exp&#34; make report</p>
<p dir="auto">To to restrict a test run to only RISC-V specific tests with match the
pattern &#34;zb*.c&#34; and &#34;sm*.c&#34; the following command can be used:</p>
<p dir="auto">RUNTESTFLAGS=&#34;riscv.exp=zb*.c\ sm*.c&#34; make report</p>
<h4 tabindex="-1" dir="auto"><a id="user-content-testing-gcc-binutils-and-glibc-of-a-linux-toolchain" aria-hidden="true" href="#testing-gcc-binutils-and-glibc-of-a-linux-toolchain"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Testing GCC, Binutils, and glibc of a Linux toolchain</h4>
<p dir="auto">The default Makefile target to run toolchain tests is <code>report</code>.
This will run all tests of the GCC regression test suite.
Alternatively, the following command can be used to do the same:</p>

<p dir="auto">The following command can be used to run the Binutils tests:</p>

<p dir="auto">The command below can be used to run the glibc tests:</p>

<h3 tabindex="-1" dir="auto"><a id="user-content-development" aria-hidden="true" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Development</h3>
<p dir="auto">This section is only for developer or advanced user, or you want to build
toolchain with your own source tree.</p>
<h4 tabindex="-1" dir="auto"><a id="user-content-update-source-tree" aria-hidden="true" href="#update-source-tree"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Update Source Tree</h4>
<p dir="auto"><code>riscv-gnu-toolchain</code> contain stable but not latest source for each submodule,
in case you want to using latest develoment tree, you can use following command
to upgrade all submodule.</p>
<div data-snippet-clipboard-copy-content="git submodule update --remote"><pre><code>git submodule update --remote
</code></pre></div>
<p dir="auto">Or you can upgrade specific submodule only.</p>
<div data-snippet-clipboard-copy-content="git submodule update --remote &lt;component&gt;"><pre><code>git submodule update --remote &lt;component&gt;
</code></pre></div>
<p dir="auto">For example, upgrade riscv-gcc only, you can using following command:</p>
<div data-snippet-clipboard-copy-content="git submodule update --remote riscv-gcc"><pre><code>git submodule update --remote riscv-gcc
</code></pre></div>
<h4 tabindex="-1" dir="auto"><a id="user-content-how-to-check-which-branch-are-used-for-specific-submodule" aria-hidden="true" href="#how-to-check-which-branch-are-used-for-specific-submodule"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to Check Which Branch are Used for Specific submodule</h4>
<p dir="auto">The branch info has recorded in <code>.gitmodules</code> file, which can set or update via
<code>git submodule add -b</code> or <code>git submodule set-branch</code>.</p>
<p dir="auto">However the only way to check which branch are using is to check <code>.gitmodules</code>
file, here is the example for <code>riscv-gcc</code>, it using riscv-gcc-10.2.0 branch, so
it will has a section named <code>riscv-gcc</code> and has a field <code>branch</code> is
<code>riscv-gcc-10.2.0</code>.</p>
<div data-snippet-clipboard-copy-content="[submodule &#34;riscv-gcc&#34;]
        path = riscv-gcc
        url = ../riscv-gcc.git
        branch = riscv-gcc-10.2.0"><pre><code>[submodule &#34;riscv-gcc&#34;]
        path = riscv-gcc
        url = ../riscv-gcc.git
        branch = riscv-gcc-10.2.0
</code></pre></div>
<h4 tabindex="-1" dir="auto"><a id="user-content-use-source-tree-other-than-riscv-gnu-toolchain" aria-hidden="true" href="#use-source-tree-other-than-riscv-gnu-toolchain"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Use Source Tree Other Than <code>riscv-gnu-toolchain</code></h4>
<p dir="auto"><code>riscv-gnu-toolchain</code> also support using out-of-tree source to build toolchain,
there is couple configure option to specify the source tree of each
submodule/component.</p>
<p dir="auto">For example you have a gcc in <code>$HOME/gcc</code>, use <code>--with-gcc-src</code> can specify that:</p>
<div data-snippet-clipboard-copy-content="./configure --with-gcc-src=$HOME/gcc"><pre><code>./configure --with-gcc-src=$HOME/gcc
</code></pre></div>
<p dir="auto">Here is the list of configure option for specify source tree:</p>
<div data-snippet-clipboard-copy-content="--with-gcc-src
--with-binutils-src
--with-newlib-src
--with-glibc-src
--with-musl-src
--with-gdb-src
--with-linux-headers-src
--with-qemu-src
--with-spike-src
--with-pk-src"><pre><code>--with-gcc-src
--with-binutils-src
--with-newlib-src
--with-glibc-src
--with-musl-src
--with-gdb-src
--with-linux-headers-src
--with-qemu-src
--with-spike-src
--with-pk-src
</code></pre></div>
</article>
          </div></div>
  </body>
</html>
