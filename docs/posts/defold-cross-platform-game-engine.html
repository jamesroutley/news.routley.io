<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://defold.com">Original</a>
    <h1>Defold: cross-platform game engine</h1>
    
    <div id="readability-page-1" class="page"><div lang="en">
    <header>
        
        <h3>curious how far I can go, with some friendly assistance from AI</h3>
        
    </header>
    
<p>
This might not be the best reading experience and not a useful source of information as it’s a personal journal/log for hackathon-like day. But should still be okay to follow thru if you want to do something similar.</p>

<p>
This, a red ball you can move with your mouse,</p>

<p>
code is <a href="https://github.com/cyang-el/zig-raylib-wasm-attempt">here</a></p>

<p>
Today April 15th 2025 is impossible day at <a href="https://www.recurse.com/scout/click?t=20cccbfea0852a9738b0c4d200b1a091">Recurse Center</a>, a day where you tackcle things that seems pretty impossible but just could not resist the urge to try. I see it as a permission to allow myself to go completely wild to satisfy nothing else than just my curiosity and desire to build. Nothing rational or reasonable.</p>
<p>
And it’s timeboxed to one day, but realistically 4 hours because lunch, coffee, run errands, people-ing, and <a href="https://en.wikipedia.org/wiki/Q_(New_York_City_Subway_service)">commute thru half of Brooklyn</a>.</p>
<p>
The goal build a basic <a href="https://en.wikipedia.org/wiki/Rube_Goldberg_machine">Rube Goldberg machine</a>. And I want to try to code something in <a href="https://ziglang.org/">Zig</a>, despite <strong>never ever code a single line of zig before</strong>.</p>
<p>
I also want to do this as little help from AI as possible, also my apartment Wifi somehow refuse to work smoothly with my Debian laptop, and I want to do this while writing down everything I have done here.</p>
<p>
Like I said, Nothing rational or reasonable, let’s see how much I can get done, it’s 10:03 now I have until 4pm.</p>

<p>
I started by pulling the zig 0.14.0 source code and then build it, only to realize I somehow don’t have clang toolchain things installed, and using the very unreliable home wifi seems like a bad idea, fearing (without any real proof) that package manager would somehow leave my installs in a wierd state if the internet stops working in the middle of a download or something.</p>
<p>
Luckily i remembered seeing <a href="https://github.com/erikarvstedt/nix-zig-build">nix-zig-build by erikarvstedt</a>, and I am more confident using <a href="https://nix.dev/">Nix</a> I can at least have a completely fail or success install, either everything works right or everything breaks, so I followed the <code>usage.sh</code> provided nix-zig-build, built the dowloaded zig 0.14.0 after `nix develop` and added the built zig into my path.</p>
<p>
Then I pulled zig’s LSP server, <a href="https://github.com/zigtools/zls">zls</a>, and built it using the new zig and added zls bin to my path.</p>
<p>
Finally I copied <a href="https://github.com/ziglang/zig-mode">emacs zig-mode</a> into my .emacs.d, point my init.el to use it, and ensured zig-mode is with <a href="https://github.com/joaotavora/eglot">eglot</a>.</p>
<p>
I don’t know yet if everything will work together, I will just fix (or not) it on the way if I need anything.</p>

<p>
I asked AI to layout a plan for me to setup a zig repo that will target WASM build. Here’s are the steps I followed.</p>
<p>
As I need wasm build, I need <strong>emsdk</strong></p>
<div>
<div>
<pre><code><span><span>git clone https://github.com/emscripten-core/emsdk.git
</span></span><span><span><span>cd</span> emsdk
</span></span><span><span>./emsdk install latest
</span></span><span><span>./emsdk activate latest</span></span></code></pre>
</div>
</div>
<p>
and then zig init, this is pretty straightforward</p>
<div>
<div>
<pre><code><span><span>mkdir impossible-day <span>&amp;&amp;</span>
</span></span><span><span><span>cd</span> impossible-day <span>&amp;&amp;</span>
</span></span><span><span>zig init<span>`</span></span></span></code></pre>
</div>
</div>
<p>
adding <strong>raylib-zig</strong> into my project’s <a href="https://zig.news/edyu/zig-package-manager-wtf-is-zon-558e">zon file</a> by</p>
<div>
<div>
<pre><code><span><span>zig fetch --save git+https://github.com/Not-Nik/raylib-zig#devel</span></span></code></pre>
</div>
</div>
<p>
and now the <strong>build.zig</strong>, this is where I had most help from AI, [full file link here]</p>
<p>
We start with the usual build for the <strong>main</strong>,</p>
<div>
<div>
<pre><code><span><span><span>  </span><span>const</span><span> </span>std<span> </span><span>=</span><span> </span><span>@import</span><span>(</span><span>&#34;std&#34;</span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>pub</span><span> </span><span>fn</span><span> </span>build<span>(</span>b<span>:</span><span> </span><span>*</span>std<span>.</span>Build<span>)</span><span> </span><span>!</span><span>void</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>target<span> </span><span>=</span><span> </span>b<span>.</span>standardTargetOptions<span>(.{});</span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>optimize<span> </span><span>=</span><span> </span>b<span>.</span>standardOptimizeOption<span>(.{});</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>exe<span> </span><span>=</span><span> </span>b<span>.</span>addExecutable<span>(.{</span><span>
</span></span></span><span><span><span>          </span><span>.</span>name<span> </span><span>=</span><span> </span><span>&#34;impossible-day&#34;</span><span>,</span><span>
</span></span></span><span><span><span>          </span><span>.</span>root_source_file<span> </span><span>=</span><span> </span>b<span>.</span>path<span>(</span><span>&#34;src/main.zig&#34;</span><span>),</span><span>
</span></span></span><span><span><span>          </span><span>.</span>target<span> </span><span>=</span><span> </span>target<span>,</span><span>
</span></span></span><span><span><span>          </span><span>.</span>optimize<span> </span><span>=</span><span> </span>optimize<span>,</span><span>
</span></span></span><span><span><span>      </span><span>});</span><span>
</span></span></span><span><span><span>  </span><span>}</span></span></span></code></pre>
</div>
</div>
<p>
and then add building raylib-zig and linking it,</p>
<div>
<div>
<pre><code><span><span><span>  </span><span>const</span><span> </span>raylib_dep<span> </span><span>=</span><span> </span>b<span>.</span>dependency<span>(</span><span>&#34;raylib_zig&#34;</span><span>,</span><span> </span><span>.{</span><span>
</span></span></span><span><span><span>      </span><span>.</span>target<span> </span><span>=</span><span> </span>target<span>,</span><span>
</span></span></span><span><span><span>      </span><span>.</span>optimize<span> </span><span>=</span><span> </span>optimize<span>,</span><span>
</span></span></span><span><span><span>  </span><span>});</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>const</span><span> </span>raylib<span> </span><span>=</span><span> </span>raylib_dep<span>.</span>module<span>(</span><span>&#34;raylib&#34;</span><span>);</span><span>
</span></span></span><span><span><span>  </span><span>const</span><span> </span>raylib_artifact<span> </span><span>=</span><span> </span>raylib_dep<span>.</span>artifact<span>(</span><span>&#34;raylib&#34;</span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span>exe<span>.</span>linkLibrary<span>(</span>raylib_artifact<span>);</span><span>
</span></span></span><span><span><span>  </span>exe<span>.</span>root_module<span>.</span>addImport<span>(</span><span>&#34;raylib&#34;</span><span>,</span><span> </span>raylib<span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span>b<span>.</span>installArtifact<span>(</span>exe<span>);</span></span></span></code></pre>
</div>
</div>
<p>
now telling zig to run it,</p>
<div>
<div>
<pre><code><span><span><span>  </span><span>const</span><span> </span>run_cmd<span> </span><span>=</span><span> </span>b<span>.</span>addRunArtifact<span>(</span>exe<span>);</span><span>
</span></span></span><span><span><span>  </span>run_cmd<span>.</span>step<span>.</span>dependOn<span>(</span>b<span>.</span>getInstallStep<span>());</span><span>
</span></span></span><span><span><span>  </span><span>if</span><span> </span><span>(</span>b<span>.</span>args<span>)</span><span> </span><span>|</span>args<span>|</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>      </span>run_cmd<span>.</span>addArgs<span>(</span>args<span>);</span><span>
</span></span></span><span><span><span>  </span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>const</span><span> </span>run_step<span> </span><span>=</span><span> </span>b<span>.</span>step<span>(</span><span>&#34;run&#34;</span><span>,</span><span> </span><span>&#34;Run the app&#34;</span><span>);</span><span>
</span></span></span><span><span><span>  </span>run_step<span>.</span>dependOn<span>(</span><span>&amp;</span>run_cmd<span>.</span>step<span>);</span></span></span></code></pre>
</div>
</div>
<p>
Finally where AI came to help, the part build and link to be able to run in WASM, I cannot say I fully understand this part yet,</p>
<div>
<div>
<pre><code><span><span><span>  </span><span>const</span><span> </span>is_wasm<span> </span><span>=</span><span> </span>target<span>.</span>result<span>.</span>cpu<span>.</span>arch<span>.</span>isWasm<span>();</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>if</span><span> </span><span>(</span>is_wasm<span>)</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>wasm_step<span> </span><span>=</span><span> </span>b<span>.</span>step<span>(</span><span>
</span></span></span><span><span><span>          </span><span>&#34;wasm&#34;</span><span>,</span><span>
</span></span></span><span><span><span>          </span><span>&#34;Build for WebAssembly with Emscripten&#34;</span><span>,</span><span>
</span></span></span><span><span><span>      </span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>exe_lib<span> </span><span>=</span><span> </span><span>try</span><span> </span>rlz<span>.</span>emcc<span>.</span>compileForEmscripten<span>(</span><span>
</span></span></span><span><span><span>          </span>b<span>,</span><span>
</span></span></span><span><span><span>          </span><span>&#34;impossible-day&#34;</span><span>,</span><span>
</span></span></span><span><span><span>          </span><span>&#34;src/main.zig&#34;</span><span>,</span><span>
</span></span></span><span><span><span>          </span>target<span>,</span><span>
</span></span></span><span><span><span>          </span>optimize<span>,</span><span>
</span></span></span><span><span><span>      </span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span>exe_lib<span>.</span>root_module<span>.</span>addImport<span>(</span><span>&#34;raylib&#34;</span><span>,</span><span> </span>raylib<span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span>exe_lib<span>.</span>linkLibrary<span>(</span>raylib_artifact<span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>link_step<span> </span><span>=</span><span> </span><span>try</span><span> </span>rlz<span>.</span>emcc<span>.</span>linkWithEmscripten<span>(</span><span>
</span></span></span><span><span><span>          </span>b<span>,</span><span>
</span></span></span><span><span><span>          </span><span>&amp;</span><span>[</span>_<span>]</span><span>*</span>std<span>.</span>Build<span>.</span>Step<span>.</span>Compile<span>{</span><span> </span>exe_lib<span>,</span><span> </span>raylib_artifact<span> </span><span>},</span><span>
</span></span></span><span><span><span>      </span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>if</span><span> </span><span>(</span>b<span>.</span>args<span>)</span><span> </span><span>|</span>args<span>|</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>          </span><span>for</span><span> </span><span>(</span>args<span>)</span><span> </span><span>|</span>arg<span>|</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>              </span>link_step<span>.</span>addArg<span>(</span>arg<span>);</span><span>
</span></span></span><span><span><span>          </span><span>}</span><span>
</span></span></span><span><span><span>      </span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>// Add asyncify and glfw support
</span></span></span><span><span><span></span><span>      </span>link_step<span>.</span>addArg<span>(</span><span>&#34;-sASYNCIFY&#34;</span><span>);</span><span>
</span></span></span><span><span><span>      </span>link_step<span>.</span>addArg<span>(</span><span>&#34;-sUSE_GLFW=3&#34;</span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span>wasm_step<span>.</span>dependOn<span>(</span><span>&amp;</span>link_step<span>.</span>step<span>);</span><span>
</span></span></span><span><span><span>  </span><span>}</span></span></span></code></pre>
</div>
</div>
<p>
And now before we go any further, we will create a basic <strong>main.zig</strong> that’s using some raylib things to check whether everything works, we make a draggable ball,</p>
<div>
<div>
<pre><code><span><span><span>  </span><span>const</span><span> </span>std<span> </span><span>=</span><span> </span><span>@import</span><span>(</span><span>&#34;std&#34;</span><span>);</span><span>
</span></span></span><span><span><span>  </span><span>const</span><span> </span>rl<span> </span><span>=</span><span> </span><span>@import</span><span>(</span><span>&#34;raylib&#34;</span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>  </span><span>pub</span><span> </span><span>fn</span><span> </span>main<span>()</span><span> </span><span>!</span><span>void</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>screenWidth<span> </span><span>=</span><span> </span><span>800</span><span>;</span><span>
</span></span></span><span><span><span>      </span><span>const</span><span> </span>screenHeight<span> </span><span>=</span><span> </span><span>450</span><span>;</span><span>
</span></span></span><span><span><span>      </span>rl<span>.</span>initWindow<span>(</span>screenWidth<span>,</span><span> </span>screenHeight<span>,</span><span> </span><span>&#34;impossible-day&#34;</span><span>);</span><span>
</span></span></span><span><span><span>      </span><span>defer</span><span> </span>rl<span>.</span>closeWindow<span>();</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span>rl<span>.</span>setTargetFPS<span>(</span><span>60</span><span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>// A Ball
</span></span></span><span><span><span></span><span>      </span><span>var</span><span> </span>ballPosition<span> </span><span>=</span><span> </span>rl<span>.</span>Vector2<span>{</span><span>
</span></span></span><span><span><span>          </span><span>.</span>x<span> </span><span>=</span><span> </span><span>@as</span><span>(</span><span>f32</span><span>,</span><span> </span><span>@floatFromInt</span><span>(</span>screenWidth<span>))</span><span> </span><span>/</span><span> </span><span>2.0</span><span>,</span><span>
</span></span></span><span><span><span>          </span><span>.</span>y<span> </span><span>=</span><span> </span><span>@as</span><span>(</span><span>f32</span><span>,</span><span> </span><span>@floatFromInt</span><span>(</span>screenHeight<span>))</span><span> </span><span>/</span><span> </span><span>2.0</span><span>,</span><span>
</span></span></span><span><span><span>      </span><span>};</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>      </span><span>// game loop
</span></span></span><span><span><span></span><span>      </span><span>while</span><span> </span><span>(</span><span>!</span>rl<span>.</span>windowShouldClose<span>())</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>          </span><span>// Update
</span></span></span><span><span><span></span><span>          </span><span>if</span><span> </span><span>(</span>rl<span>.</span>isMouseButtonDown<span>(.</span>left<span>))</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>              </span><span>const</span><span> </span>mousePosition<span> </span><span>=</span><span> </span>rl<span>.</span>getMousePosition<span>();</span><span>
</span></span></span><span><span><span>              </span>ballPosition<span> </span><span>=</span><span> </span>mousePosition<span>;</span><span>
</span></span></span><span><span><span>          </span><span>}</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>          </span><span>// Draw
</span></span></span><span><span><span></span><span>          </span>rl<span>.</span>beginDrawing<span>();</span><span>
</span></span></span><span><span><span>          </span><span>defer</span><span> </span>rl<span>.</span>endDrawing<span>();</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>          </span>rl<span>.</span>clearBackground<span>(.</span>ray_white<span>);</span><span>
</span></span></span><span><span><span>          </span>rl<span>.</span>drawCircleV<span>(</span>ballPosition<span>,</span><span> </span><span>50</span><span>,</span><span> </span><span>.</span>maroon<span>);</span><span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>          </span><span>// Check if running in WebAssembly (using CPU architecture)
</span></span></span><span><span><span></span><span>          </span><span>if</span><span> </span><span>(</span><span>@import</span><span>(</span><span>&#34;builtin&#34;</span><span>).</span>cpu<span>.</span>arch<span>.</span>isWasm<span>())</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>              </span>rl<span>.</span>drawText<span>(</span><span>&#34;in wasm!!&#34;</span><span>,</span><span> </span><span>10</span><span>,</span><span> </span>screenHeight<span> </span><span>-</span><span> </span><span>30</span><span>,</span><span> </span><span>20</span><span>,</span><span> </span><span>.</span>green<span>);</span><span>
</span></span></span><span><span><span>          </span><span>}</span><span> </span><span>else</span><span> </span><span>{</span><span>
</span></span></span><span><span><span>              </span>rl<span>.</span>drawText<span>(</span><span>&#34;native build&#34;</span><span>,</span><span> </span><span>10</span><span>,</span><span> </span>screenHeight<span> </span><span>-</span><span> </span><span>30</span><span>,</span><span> </span><span>20</span><span>,</span><span> </span><span>.</span>blue<span>);</span><span>
</span></span></span><span><span><span>          </span><span>}</span><span>
</span></span></span><span><span><span>      </span><span>}</span><span>
</span></span></span><span><span><span>  </span><span>}</span></span></span></code></pre>
</div>
</div>
<p>
and now to build into WASM, we run,</p>
<div>
<div>
<pre><code><span><span>  zig build wasm -Dtarget<span>=</span>wasm32-emscripten --sysroot <span>&#34;</span><span>${</span><span>HOME</span><span>}</span><span>/emsdk/upstream/emscripten&#34;</span></span></span></code></pre>
</div>
</div>
<p>
Afterwards we have inside the <strong>./zig-out/htmlout/</strong> we have the build wasm binary and html needed to run the app.</p>
<p>
Run the app at port 8080,</p>
<div>
<div>
<pre><code><span><span>  ruby -run -ehttpd . -p8080</span></span></code></pre>
</div>
</div>
<p>
and go to <a href="http://localhost:8080/zig-out/htmlout/">the app</a>, We should see a red ball that we can click and drag.</p>
<p>
Now the problem is, there seems to be many things we do not intended for that was put into the html by emscripten, this is a bit annoying, I asked AI for help and struggled a bit to finally made sense of it after lots of manual tweaking. Basically we need to provide emscripten a html template that it can use during packaging.</p>
<p>
So here is the bash script to build the wasm html, notice because how org mode renders in this blog I cannot put \{\{\{SCRIPT\}\}\} into this org file, replace the entire <strong>[HERE REPLACE WITH SCRIPT]</strong> includin the square brackets with 3 nested curly braces surrounding the word <strong>SCRIPT</strong></p>
<div>
<div>
<pre><code><span><span>  cat &gt; shell.html <span>&lt;&lt; &#39;EOL&#39;
</span></span></span><span><span><span>  &lt;!DOCTYPE html&gt;
</span></span></span><span><span><span>  &lt;html&gt;
</span></span></span><span><span><span>  &lt;head&gt;
</span></span></span><span><span><span>      &lt;meta charset=&#34;utf-8&#34;&gt;
</span></span></span><span><span><span>      &lt;style&gt;
</span></span></span><span><span><span>          #app-container {
</span></span></span><span><span><span>              width: 800px;
</span></span></span><span><span><span>              height: 600px;
</span></span></span><span><span><span>              position: relative;
</span></span></span><span><span><span>              margin: 0 auto;
</span></span></span><span><span><span>              overflow: hidden;
</span></span></span><span><span><span>              background-color: black;
</span></span></span><span><span><span>          }
</span></span></span><span><span><span>          #canvas {
</span></span></span><span><span><span>              position: absolute;
</span></span></span><span><span><span>              top: 0;
</span></span></span><span><span><span>              left: 0;
</span></span></span><span><span><span>              width: 100%;
</span></span></span><span><span><span>              height: 100%;
</span></span></span><span><span><span>              image-rendering: pixelated;
</span></span></span><span><span><span>              image-rendering: crisp-edges;
</span></span></span><span><span><span>          }
</span></span></span><span><span><span>      &lt;/style&gt;
</span></span></span><span><span><span>  &lt;/head&gt;
</span></span></span><span><span><span>  &lt;body&gt;
</span></span></span><span><span><span>      &lt;div id=&#34;app-container&#34;&gt;
</span></span></span><span><span><span>          &lt;canvas id=&#34;canvas&#34; oncontextmenu=&#34;event.preventDefault()&#34;&gt;&lt;/canvas&gt;
</span></span></span><span><span><span>      &lt;/div&gt;
</span></span></span><span><span><span>      &lt;script&gt;
</span></span></span><span><span><span>          var Module = {
</span></span></span><span><span><span>              canvas: document.getElementById(&#39;canvas&#39;),
</span></span></span><span><span><span>              onRuntimeInitialized: function() {
</span></span></span><span><span><span>                  document.getElementById(&#39;canvas&#39;).focus();
</span></span></span><span><span><span>              }
</span></span></span><span><span><span>          };
</span></span></span><span><span><span>      &lt;/script&gt;
</span></span></span><span><span><span>      [HERE REPLACE WITH SCRIPT]
</span></span></span><span><span><span>  &lt;/body&gt;
</span></span></span><span><span><span>  &lt;/html&gt;
</span></span></span><span><span><span>  EOL</span>
</span></span><span><span>
</span></span><span><span>  chmod <span>644</span> shell.html
</span></span><span><span>  <span>echo</span> <span>&#34;Shell file created at: </span><span>$(</span><span>pwd</span><span>)</span><span>/shell.html&#34;</span>
</span></span><span><span>
</span></span><span><span>  <span>SHELL_PATH</span><span>=</span><span>&#34;</span><span>$(</span><span>pwd</span><span>)</span><span>/shell.html&#34;</span>
</span></span><span><span>  <span>echo</span> <span>&#34;Using shell file at: </span><span>$SHELL_PATH</span><span>&#34;</span>
</span></span><span><span>
</span></span><span><span>  zig build wasm -Dtarget<span>=</span>wasm32-emscripten --sysroot <span>&#34;</span><span>${</span><span>HOME</span><span>}</span><span>/emsdk/upstream/emscripten&#34;</span> -- <span>&#34;--shell-file=</span><span>$SHELL_PATH</span><span>&#34;</span>
</span></span><span><span>
</span></span><span><span>  <span>echo</span> <span>&#34;Build complete.&#34;</span></span></span></code></pre>
</div>
</div>
<p>
And with some additional line to the <code>build.zig</code> to tell <code>emcc</code> to use our template html,</p>
<div>
<div>
<pre><code><span><span>         link_step.addArg(&#34;-sASYNCIFY&#34;);
</span></span><span><span>         link_step.addArg(&#34;-sUSE_GLFW=3&#34;);
</span></span><span><span>         link_step.addArg(&#34;-sSINGLE_FILE=1&#34;);
</span></span><span><span>         link_step.addArg(&#34;-sINITIAL_MEMORY=67108864&#34;); // 64MB
</span></span><span><span>         link_step.addArg(&#34;-sALLOW_MEMORY_GROWTH=1&#34;);
</span></span><span><span>         link_step.addArg(&#34;-sEXPORTED_RUNTIME_METHODS=ccall,cwrap&#34;);
</span></span><span><span><span>+        link_step.addArg(&#34;-sFORCE_FILESYSTEM=1&#34;);
</span></span></span><span><span><span>+        link_step.addArg(&#34;-o&#34;); // Output file name
</span></span></span><span><span><span>+        link_step.addArg(&#34;impossible-day.html&#34;); // Set the HTML file name
</span></span></span><span><span><span>+
</span></span></span><span><span><span>+        // Make sure to use our custom shell file
</span></span></span><span><span><span>+        link_step.addArg(&#34;--shell-file=shell.html&#34;);
</span></span></span></code></pre>
</div>
</div>
<p>
looks like this,</p>

<p>
And it’s 4pm now, this is what I managed to get so far, definitely going to explore more. Zig is so powerful when it comes to incooperateing C libraries, and the whole time I find myself not having trouble understanding anything. Super cool :)</p>

</div></div>
  </body>
</html>
