<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.crunchydata.com/blog/announcing-postgres-container-apps-easy-deploy-postgres-apps">Original</a>
    <h1>Postgres Container Apps (beta)</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<div data-widget-type="blog_content" data-x="0" data-w="12">
<div>
  <div>
    
    <p><span id="hs_cos_wrapper_post_body" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><p>Today, I&#39;m excited to announce the public beta of Postgres Container Apps for your Postgres databases on Crunchy Bridge. With Postgres Container Apps you can, from directly inside Postgres with a simple function call, spin up a container that is running right alongside your Postgres database. Let&#39;s take an immediate look of how we can spin up a Postgres featureserv:</p>
<pre>CREATE EXTENSION pgpodman;</pre>
<p>It&#39;s as simple as that, and now I can connect directly to my pg_featureserv at: <a href="http://p.3fqs3ruv2vfq3malzedvtog4xq.db.postgresbridge.com:5435/" rel="noopener">http://p.3fqs3ruv2vfq3malzedvtog4xq.db.postgresbridge.com:5435/</a><a href="http://p.qmhu5tvx2bet5esq6i4cjo4kqe.db.postgresbridge.com:5433" rel="noopener"></a>. Or more interestingly with it here is all <a href="http://p.3fqs3ruv2vfq3malzedvtog4xq.db.postgresbridge.com:5435/collections/us.geonames_geo/items.html?filter=type%20IN%20(%27MT%27)%20AND%20DWITHIN(geom,Point(-122.34%2047.6),100000)&amp;limit=1000" rel="noopener">mountains within 100km of Seattle</a>. </p>
<!--more-->
<p>If you&#39;re anything like those who got early preview access you may be thinking &#34;Cool, but why?&#34;</p>
<p>There are a few great use cases we&#39;re excited for actually:</p>
<ol>
<li>Turnkey APIs that sit on top of a Postgres database (examples such as <a href="https://hasura.io/" rel="noopener">Hasura</a>, PostgREST, Postgraphile, <a href="https://github.com/CrunchyData/pg_tileserv" rel="noopener">Pg_tileserv</a>, <a href="https://github.com/CrunchyData/pg_featureserv" rel="noopener">Pg_featureserv</a>)</li>
<li>Turnkey admin/data management and reporting tools (examples such as Pgweb, PgHero, Blazer)</li>
<li>Running monitoring agents for extra visibility into your database (examples such as <a href="https://www.pganalyze.com" rel="noopener">pganalyze</a>, New Relic, Datadog)</li>
</ol>
<p>Container apps is powered by the Crunchy Data built <span>pgpodman</span> extension. With <span>pgpodman</span> you can:</p>
<ul>
<li>Start a container with <span>SELECT run_container(&#39;&lt;container command&gt;&#39;);</span></li>
<li>List all containers with <span>SELECT list_containers();</span></li>
<li>See the logs of a container <span>SELECT container_logs(&#39;&lt;container_id&gt;&#39;);</span></li>
<li>Stop a container <span>SELECT stop_container(&#39;&lt;container_id&gt;&#39;);</span></li>
</ul>
<p>If you&#39;re curious to get started, feel free to jump over to <a href="https://www.crunchybridge.com/start" rel="noopener">Crunchy Bridge</a> and give it a try or take a look at the <a href="https://docs.crunchybridge.com/container-apps/getting-started/" rel="noopener">docs</a>. Otherwise, feel free to read on to get a feel for some of the use cases that container apps is a great fit for.</p>
<p>In the early development of Postgres Container Apps we worked with a few launch partners, to ensure we&#39;ve got as smooth a developer experience as we can create. Let&#39;s drill into two great examples.</p>
<h2>Dead simple Postgres monitoring</h2>
<p>Crunchy Bridge does a lot for you in keeping your database healthy and active, but there are a lot of monitoring tools that help you go deeper. We often get requests similar to, &#34;How do I monitor my database with New Relic?&#34; One tool we love is <a href="https://pganalyze.com/" rel="noopener">pganalyze</a> as it&#39;s specialized just for Postgres. Here&#39;s what founder of pganalyze, Lukas Fittl, had to say:</p>
<p><em><span>&#34;Crunchy Bridge is what Postgres-as-a-Service is meant to be. With Postgres Container Apps, we were able to enable full pganalyze functionality including Automatic EXPLAIN and the pganalyze Index Advisor with ease, through a one-click deployment step.&#34;</span></em></p>
<p>Pganalyze updated their container to be specially designed for Postgres Container Apps to give what may be the easiest enhanced Postgres monitoring story that now exists.</p>
<p>When you setup the pganalyze container you&#39;ll immediately be getting:</p>
<ul>
<li>Drill-down into historic query performance</li>
<li>Automatic EXPLAIN plans through auto_explain</li>
<li>Missing index recommendations with Index Advisor</li>
<li>Log monitoring with predefined filters</li>
</ul>
<p>And it&#39;s literally a <a href="https://docs.crunchybridge.com/container-apps/pganalyze-quickstart/" rel="noopener">single command</a> inside your database.</p>
<h2>How about an API for your database?</h2>
<p><span>Building an app and starting with the schema first? Want to expose that to your frontend developers, enter Hasura. Hasura provides an instant GraphQL API over all your data, which makes it easy to prototype and build apps faster. When the time comes to scale your Hasura app we recommend taking a look at fully managed <a href="http://www.hasura.io" rel="noopener">Hasura</a>, but starting with Crunchy Bridge then plugging it into Hasura.io later is trivial. </span></p>
<p><span>Once we&#39;ve got an instance provisioned starting Hasura with Postgres Container Apps is as simply as:</span></p>
<pre>SELECT run_container(&#39;-dt -p 5434:8080/tcp -e HASURA_GRAPHQL_DATABASE_URL=&#34;&lt;DATABASE_URL&gt;&#34; docker.io/hasura/graphql-engine&#39;);</pre>
<p>And with that I have an up and running Hasura serving up a GraphQL on top of my database:</p>
<p><a href="http://p.v5etllz4eng6bgw4646o3yy3om.db.postgresbridge.com:5434/console" rel="noopener">http://p.v5etllz4eng6bgw4646o3yy3om.db.postgresbridge.com:5434/console</a></p>
<h2>Why not run the app on another server?</h2>
<p>First, let&#39;s get this out of the way – container apps is not a full fledged PaaS replacement. Many web apps have a need for scaling equally as much as the database, and in those cases Crunchy Bridge is a great answer for your database side while leveraging something like <a href="https://www.fly.io" rel="noopener">Fly.io</a> or <a href="https://www.heroku.com" rel="noopener">Heroku</a> for the application. But, not all &#34;apps&#34; need to handle large scale... <span>Sometimes</span> your database is the real app and is doing the heavy lifting. <span>Sometimes</span> you just need to get started quickly and you&#39;ll scale the web app later. <span>Sometimes</span> you want one less server to manage and monitor.<span> </span></p>
<h2>So, what are some great examples for container apps?</h2>
<p>In the past few years more and more tools built especially for Postgres have emerged. Many of these are APIs out of the box that let you start building against PostgreSQL almost immediately. In that category here are just a few that are our favorite to run inside container apps:</p>
<ul>
<li><a href="https://docs.crunchybridge.com/container-apps/hasura-quickstart" rel="noopener">Hasura</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/postgrest-quickstart" rel="noopener">PostgREST</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/postgraphile-quickstart/" rel="noopener">Postgraphile</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/pg_tileserv-quickstart" rel="noopener">pg_tileserv</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/pg_featureserv-quickstart" rel="noopener">pg_featureserv</a></li>
</ul>
<h2>Database Admin and Browser Apps</h2>
<p>Another category is when you want a tool to interact with your database. I&#39;m a big fan of <a href="https://www.craigkerstiens.com/2013/02/13/how-i-work-with-postgres/" rel="noopener"><span>psql</span></a> myself, but that isn&#39;t for everyone some folks want a graphical interface to browse their schemas and query data. Sometimes there is a need for defining queries and sharing with other non-technical folks. Just a few of our favorites include:</p>
<ul>
<li><a href="https://docs.crunchybridge.com/container-apps/pgweb-quickstart" rel="noopener">Pgweb</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/pghero-quickstart" rel="noopener">PgHero</a></li>
<li><a href="https://docs.crunchybridge.com/container-apps/blazer-quickstart" rel="noopener">Blazer</a></li>
</ul>
<h2><span>Database monitoring tools for Postgres</span></h2>
<p><span>Postgres is a great database that comes with a lot of built-in insights such as pg_stat_statements, pg_stat_activity, pg_proctab. But sometimes you want more, tools like pganalyze, New Relic, and Datadog are a common go to for monitoring the full performance of your database from more system level metrics like i/o and memory usage, to Postgres specific things like slow queries. With Postgres Container Apps you can easily run a sidecar agent to get the full insights you need with ease. </span></p>
<h2><span>What else?</span></h2>
<p>And finally, our favorite category of things you can run with container apps: the crazy ideas. We don&#39;t know what will actually happen in this category. The very first thing we tried was booting Redis from inside Postgres, and guess what? It worked. If you need a lightweight cache to run right along side, 1 command and you have a Redis cache, connect it with the Redis foreign data wrapper for Postgres and you&#39;re off and running. Our own <a href="https://www.twitter.com/pwramsey" rel="noopener">@pwramsey</a> once he got pg_tileserv running decided he needed a Varnish cache in front of it. All it took was:</p>
<pre>SELECT run_container(&#39;-dt -p 5435:6081/tcp -e BACKENDS=p.3bei7nueizcwbkh467ilrct3ti.postgresbridge.com:5434 -e DNS_ENABLED=false -e COOKIES=true -e PARAM_VALUE=&#34;-p default_ttl=3600&#34; docker.io/eeacms/varnish:latest&#39;);</pre>
<p>Today we&#39;re excited to make this available on <a href="https://www.crunchybridge.com/start" rel="noopener">Crunchy Bridge</a> in public beta, but we&#39;re also curious on what you think–let us know your opinion <a href="http://twitter.com/crunchydata" rel="noopener">@crunchydata</a>. </p></span>
      
    </p>
    
  </div>
</div></div>

</div><!--end row-->
</div></div>
  </body>
</html>
