<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zura.wiki/post/never-write-a-commit-message-again-with-the-help-of-gpt-3/">Original</a>
    <h1>Gptcommit: Never write a commit message again (with the help of GPT-3)</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><article><section><p>GPT-3 has proven to be a valuable tool for assisting in technical tasks such as scripting and command line operations. With gptcommit, you no longer have to spend time writing your commit messages. Install <a href="https://github.com/zurawiki/gptcommit"><code>gptcommit</code></a> and let GPT-3 do the writing for you.</p><p>Commit messages are a key channel for developers to communicate their work with others, especially in code reviews. When making complex code changes, it can be tedious to thoroughly document the contents of each change. I often felt the impulse to just title my commit “fix bug” and move on. These one-liner messages often lack the full context that a review would need to understand the change. Worse, a seemingly harmless commit description like “fix typo” might omit key changes made elsewhere in the codebase. Surfacing these changes with gptcommit helps the author and reviewer by bringing attention to these additional changes.</p><h3 id="get-setup-in-minutes">Get setup in minutes</h3><blockquote><p>Prerequisites:
To use <code>gptcommit</code>, you’ll need to have</p><ul><li><a href="https://rustup.rs/">Cargo</a>, the Rust package manager, installed</li><li>an <a href="https://beta.openai.com/account/api-keys">API key from OpenAI</a>.</li></ul></blockquote><p>1) Install the <code>gptcommit</code> binary from cargo</p><pre><code>cargo install --locked gptcommit
</code></pre><p>2) In a local git repository, run the following to set up the <code>gptcommit</code> githooks. Note that this command needs to be run for each local git checkout that you have.</p><pre><code>gptcommit install
</code></pre><p>2) In your dotfiles or you worming shell, set the <code>OPENAI_API_KEY</code> to your key.</p><pre><code>export OPENAI_API_KEY=&#34;sk-...&#34;
</code></pre><blockquote><p>Consider adding the line above to your ~/.bashrc, ~/.zshrc or equivalent dotfile.</p></blockquote><h3 id="demos-and-results-on-real-commits">Demos and Results on real commits</h3><p>See the ASCII screencasts below:</p><ul><li>Demo #1: the full installation and commit workflow, editing multiple rust files</li></ul><ul><li>Demo #2: a one-line change to a string inside a rust file.</li></ul><ul><li>Demo #3: Modifying non-code files, in this case a README.</li></ul><p>If you’ve found compelling commit summaries with <code>gptcommit</code>, I’d appreciate hearing from you.</p><h3 id="building-on-prior-work">Building on Prior Work</h3><p><code>gptcommit</code> this tool was inspired took heavy inspiration from previous commit summarizing tools including:</p><ul><li><a href="https://github.com/RomanHotsiy/commitgpt">https://github.com/RomanHotsiy/commitgpt</a></li></ul><p>This tool is currently not working, as it used an unofficial API to prompt ChatGPT. gptcommit uses the official completions API from OpenAI and requires users to bring their OpenAI API key. gptcommit integrates as a <a href="https://git-scm.com/docs/githooks">githook</a> so it can run seamlessly as part of the git workflow. Finally, gptcommit uses Rust so which allows for quicker execution times.</p><ul><li><a href="https://github.com/KanHarI/gpt-commit-summarizer">https://github.com/KanHarI/gpt-commit-summarizer</a></li></ul><p>This tool integrates via GitHub actions rather than in the git workflow Summarization occurs at the PR level rather than per commit. The action is already triggered after a pull request has already been summarized, and posted directly to the pull requests without human review. Many aspects of the prompt design were borrowed from this project. <code>gptcommit</code> focuses on the <code>git commit</code> workflow such that the commit author could approve or edit any output from GPT.</p><h3 id="behind-the-scenes">Behind the scenes</h3><p>Ingestion of a git commit occurs in two phases.</p><p>First, each file is summarized independently and in parallel to produce a list of bullet points from OpenAI’s models.</p><p>Then, the summarized file changes are summarized in two ways. First, the model is instructed to generate a short, one-line title for the commit. In addition, the model summarized higher-level bullet points to be included in the body of the commit message.</p><p>The final output provided to the commit message then consists of:</p><pre><code>[title]

- [summary point 1]
- [summary point 2...]

[/changed/file A]
- [file summary point 1]
- [file summary point 2...]
[/changed/file B...]
- [file summary point 1...]
...
</code></pre><h3 id="try-it-yourself">Try it yourself</h3><p>Run <code>cargo install --locked gptcommit</code> or check out <a href="https://github.com/zurawiki/gptcommit">the repo</a> for more details. You’ll need an OpenAI API key (the default model is GPT-3) and you’ll have to install the githook in each repo you work in.</p><p>GitHub: <a href="https://github.com/zurawiki/gptcommit">https://github.com/zurawiki/gptcommit</a></p><h3 id="next-steps">Next steps</h3><p>Some interesting follow ups I’m thinking about include:</p><ul><li><p>How can we create a smoother commit workflow that allows interactive editing with GPT-like language models?</p></li><li><p>How should we better structure the prompts to summarize bigger commits that we skip for now?</p></li><li><p>How should we collect user feedback to better train the summarizer models?</p></li></ul><p>Lastly, if you encounter any bugs or have any suggestions for improvements, please open an issue on the repository</p><hr/><p><em>Thanks to Itay Knaán-Harpaz and his work on <code>gpt-commit-summarizer</code> and his <a href="https://medium.com/better-programming/leverage-openais-language-model-for-automated-commit-summaries-8181cef30375">blog post</a> that informed my approach.</em></p><p>Hero image credit to Midjourney. Prompt: “robots happily writing code”</p></section></article></div></div>
  </body>
</html>
