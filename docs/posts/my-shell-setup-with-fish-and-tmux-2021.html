<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.milanvit.net/post/my-ultimate-shell-setup-with-fish-shell-and-tmux/">Original</a>
    <h1>My shell setup with Fish and Tmux (2021)</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
<div>
<article>

<figure>
<img srcset="https://images.unsplash.com/photo-1522799064017-3101eeb9af80?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fHNoZWxsfGVufDB8fHx8MTYyMjE2OTE3Mg&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 300w,
                            https://images.unsplash.com/photo-1522799064017-3101eeb9af80?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fHNoZWxsfGVufDB8fHx8MTYyMjE2OTE3Mg&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 600w,
                            https://images.unsplash.com/photo-1522799064017-3101eeb9af80?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fHNoZWxsfGVufDB8fHx8MTYyMjE2OTE3Mg&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 1000w,
                            https://images.unsplash.com/photo-1522799064017-3101eeb9af80?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fHNoZWxsfGVufDB8fHx8MTYyMjE2OTE3Mg&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="https://images.unsplash.com/photo-1522799064017-3101eeb9af80?crop=entropy&amp;cs=tinysrgb&amp;fit=max&amp;fm=jpg&amp;ixid=MnwxMTc3M3wwfDF8c2VhcmNofDR8fHNoZWxsfGVufDB8fHx8MTYyMjE2OTE3Mg&amp;ixlib=rb-1.2.1&amp;q=80&amp;w=2000" alt="My ultimate shell setup with Fish shell and Tmux (Part 1)"/>
</figure>
<section>
<div>
<p>I‚Äôve recently been asked to share my shell setup, which if you ask me, that‚Äôs one of the highest levels of praise you can achieve as a software developer ü§£ In this article, I‚Äôll describe the setup I‚Äôve been using for the past few years, and how to achieve similar results yourself.</p><h2 id="%F0%9F%96%BC%EF%B8%8F-the-result">üñºÔ∏è The result</h2><p>First, let‚Äôs look at what we‚Äôll try to achieve by looking at a screenshot I took last year when showing off to a senior co-worker of mine. Visually speaking, almost nothing changed since then, so let me just be lazy for a while and re-use this overly annotated screenshot.</p><figure><img src="https://www.milanvit.net/content/images/2021/05/obrazek.png" alt="" loading="lazy" width="2000" height="728" srcset="https://www.milanvit.net/content/images/size/w600/2021/05/obrazek.png 600w, https://www.milanvit.net/content/images/size/w1000/2021/05/obrazek.png 1000w, https://www.milanvit.net/content/images/size/w1600/2021/05/obrazek.png 1600w, https://www.milanvit.net/content/images/size/w2400/2021/05/obrazek.png 2400w"/></figure><p>I think some people go for very minimalist shell setups, and I suppose you could say that I prefer the exact opposite of minimalist in this regard üòÖ The screenshot above is missing two significant elements, which would be the exit code of previously executed command and presence of background processes - not to worry, these elements are not omitted, just hidden in case no interesting information is available to show (last process terminated successfully/no background processes are running respectively).</p><h2 id="%F0%9F%91%86-prerequisites">üëÜ Prerequisites</h2><p>To achieve similar results, I believe you‚Äôll need two pieces of puzzle that I‚Äôll not cover in detail in this article:</p><ul><li>Capable terminal emulator (macOS‚Äô <code>Terminal.app</code> doesn‚Äôt qualify) ‚Äì I‚Äôve been living in the <a href="https://iterm2.com/">iTerm2 land</a> since I migrated to macOS, always configured the superior <a href="https://ethanschoonover.com/solarized/">Solarized Dark</a> color theme;</li><li>Nerd-patched font for all the special glyphs that our shell will show us ‚Äì either patch a font of your liking yourself or go with one of the <a href="https://www.nerdfonts.com/font-downloads">pre-patched fonts</a>; popular choices include <em>FiraCode</em>, <em>Hack</em>, <em>Inconsolata</em>, <em>Iosevka</em> and others.</li></ul><h2 id="%F0%9F%90%9F%F0%9F%90%9A-it-all-starts-in-the-shell%E2%80%A6">üêüüêö It all starts in the shell‚Ä¶</h2><p>After using <code>bash</code> for many years and <code>zsh</code> for many more years, I switched to <code>fish</code> shell a few years ago. While <code>zsh</code> is a fine shell, I felt that <code>fish</code> can be more user-friendly and easier to customize ‚Äì but I recognize that this doesn‚Äôt come without drawbacks, namely that <code>fish</code> shell doesn‚Äôt respect the traditional POSIX syntax so you‚Äôll have to definitely alter some of your habits. Let‚Äôs first install <code>fish</code> shell and then I‚Äôll share a few tricks to get more familiar with <code>fish</code> shell.</p><pre><code>brew install fish
echo /usr/local/bin/fish | sudo tee -a /etc/shells
chsh -s /usr/local/bin/fish $(whoami)</code></pre><p>Say ‚Äúbye-bye‚Äù to <code>bash</code>/<code>zsh</code> because the next time you open a terminal, you should be welcomed by a friendly interactive shell, like so:</p><figure><img src="https://www.milanvit.net/content/images/2021/05/obrazek-1.png" alt="" loading="lazy" width="700" height="282" srcset="https://www.milanvit.net/content/images/size/w600/2021/05/obrazek-1.png 600w, https://www.milanvit.net/content/images/2021/05/obrazek-1.png 700w"/></figure><p>Next, install <a href="https://github.com/oh-my-fish/oh-my-fish">Oh My Fish</a>, which is essentially a package manager for Fish shell, along with some essential plugins and themes:</p><pre><code>curl -L https://get.oh-my.fish | fish
omf install bobthefish # Theme
omf install aws       # AWS integration &amp; command completion
omf install bass      # Allows running heavily Bash-dependant utilities, like nvm
omf install brew      # Integrate Homebrew paths
omf install colored-man-pages
omf install export    # Bring back Bash-like export command
omf install https://github.com/jhillyerd/plugin-git
omf install osx       # Finder/macOS integration and utilities
omf install wifi-password
omf install z         # Autojump implementation</code></pre><p>For more information about what these do, check the <a href="https://github.com/oh-my-fish/packages-main/tree/master/packages">package list</a> ‚Äì for example, <code>wifi-password</code> shows you the current WiFi password ‚Äì not something you need every day, but when you need it, it‚Äôs very nice to have; <code>z</code> allows you to quickly jump across often visited directories just by typing part of their names; and the <code>git</code> plugin (documentation <a href="https://github.com/jhillyerd/plugin-git">available here</a>) gives you more <code>git</code> aliases and abbreviations than you could ever remember.</p><p>You‚Äôll notice that even with the <code>bobthefish</code> theme installed and automatically activated, your shell prompt still looks way different from the first screenshot I presented ‚Äì so let‚Äôs configure the shell and prompt. Listed below is the content of the <code>~/.config/fish/config.fish</code> file I currently use, but feel free to adjust it to your heart‚Äôs content:</p><pre><code>set -gx COLORTERM truecolor
set -gx EDITOR nvim
set -gx LANG cs_CZ.UTF-8    # Adjust this to your language!
set -gx LC_ALL cs_CZ.UTF-8  # Adjust this to your locale!
set -gx VIRTUAL_ENV_DISABLE_PROMPT true
set -gx GOPATH $HOME/go
set -x PATH $GOPATH/bin $HOME/.composer/vendor/bin $HOME/Library/Python/3.7/bin $PATH
set -gx HOMEBREW_AUTO_UPDATE_SECS 86400
set -gx DOCKER_BUILDKIT 1
set -gx COMPOSE_DOCKER_CLI_BUILD 1
set -g fish_key_bindings fish_vi_key_bindings
set -g fish_bind_mode insert

# Title options
set -g theme_title_display_process yes
set -g theme_title_display_path yes
set -g theme_title_display_user yes
set -g theme_title_use_abbreviated_path yes

# Prompt options
set -g theme_display_ruby yes
set -g theme_display_virtualenv yes
set -g theme_display_vagrant no
set -g theme_display_vi yes
set -g theme_display_k8s_context no # yes
set -g theme_display_user yes
set -g theme_display_hostname yes
set -g theme_show_exit_status yes
set -g theme_git_worktree_support no
set -g theme_display_git yes
set -g theme_display_git_dirty yes
set -g theme_display_git_untracked yes
set -g theme_display_git_ahead_verbose yes
set -g theme_display_git_dirty_verbose yes
set -g theme_display_git_master_branch yes
set -g theme_display_date yes
set -g theme_display_cmd_duration yes
set -g theme_powerline_fonts yes
set -g theme_nerd_fonts yes
set -g theme_color_scheme solarized-dark

bind -M insert \cg forget

if which asdf &gt; /dev/null; status --is-interactive; and source (brew --prefix asdf)/asdf.fish; end
if which direnv &gt; /dev/null; direnv hook fish | source; end
if which goenv &gt; /dev/null; status --is-interactive; and source (goenv init -|psub); end
if which rbenv &gt; /dev/null; status --is-interactive; and source (rbenv init -|psub); end
if which swiftenv &gt; /dev/null; status --is-interactive; and source (swiftenv init -|psub); end
</code></pre><p>Line 42 binds a <code>forget</code> function to the key combination of <code>Ctrl-G</code>, so let‚Äôs create the <code>forget</code> function right now by pasting the following into <code>~/.config/fish/functions/forget.fish</code>:</p><pre><code>function forget
    set -l cmd (commandline | string collect)
    printf &#34;\nDo you want to forget &#39;%s&#39;? [Y/n]\n&#34; $cmd
    switch (read | tr A-Z a-z)
        case n no
            commandline -f repaint
            return
        case y yes &#39;&#39;
            history delete --exact --case-sensitive -- $cmd
            commandline &#34;&#34;
            commandline -f repaint
    end
end
</code></pre><p>What this does is allows you to easily remove command from shell‚Äôs history, for example if you typed sensitive information or made a typo in a command that you don‚Äôt want to get reminded of in the future. Activate it by going up the history with the up arrow key ‚¨ÜÔ∏è‚å®Ô∏è until you hit the command you wish to forget, then activate the function by pressing <code>Ctrl-G</code>. Speaking of <code>fish</code> functions, here‚Äôs one more you might find useful ‚Äì get a random Git-related tip as spoken with a random pony anytime you open a new shell! First, let‚Äôs install the dependencies:</p><pre><code>brew install ponysay
npm install -g git-tip</code></pre><p>Then put the following text into <code>~/.config/fish/functions/fish_greeting.fish</code>:</p><pre><code>function fish_greeting
  git-tip | ponysay
end</code></pre><p>If you followed the guide properly (and if I haven‚Äôt missed anything), your terminal should now look fairly similar to mine!</p><h2 id="%F0%9F%A6%BA-fish-survival-guide">ü¶∫ Fish survival guide</h2><p>As I mentioned at the beginning of the article, Fish is often different. I hope that this little table will help you overcome the most problems you could face:</p><table>
<thead>
<tr>
<th><code>bash</code> command</th>
<th><code>fish</code> equivalent</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>true &amp;&amp; true</code></td>
<td><code>true; and true</code></td>
<td></td>
</tr>
<tr>
<td><code>true || false</code></td>
<td><code>true; or false</code></td>
<td></td>
</tr>
<tr>
<td><code>echo &#34;Date: $(date)&#34;</code></td>
<td><code>echo &#34;Date: &#34;(date)</code></td>
<td></td>
</tr>
<tr>
<td><code>export A=b</code></td>
<td><code>set -gx A b</code></td>
<td>You can keep using <code>export</code> with the OMF plugin we installed</td>
</tr>
<tr>
<td><code>echo &#34;A=${A}&#34;</code></td>
<td><code>echo &#34;A=&#34;$A</code></td>
<td></td>
</tr>
<tr>
<td><code>for i in $(seq 10); echo $i; done</code></td>
<td><code>for i in (seq 10); echo $i; end</code></td>
<td></td>
</tr>
<tr>
<td><code>Ctrl-R</code> for history search</td>
<td>Type search term, then press ‚¨ÜÔ∏è key</td>
<td>Or omit search term for linear history browsing</td>
</tr>
</tbody>
</table>
<p>For more in-depth survival guide, be sure to check the <a href="https://fishshell.com/docs/current/fish_for_bash_users.html">official documentation</a>.</p><p>And since this article is getting quite long, let‚Äôs save the Tmux part for next time!</p>
</div>
</section>


</article>
</div>
</div></div>
  </body>
</html>
