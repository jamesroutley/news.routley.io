<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ariadne.space/2022/01/22/the-fsfs-relationship-with-firmware-is-harmful-to-free-software-users/">Original</a>
    <h1>The FSF’s relationship with firmware is harmful to free software users</h1>
    
    <div id="readability-page-1" class="page"><div>

		<div>

			
<p>The FSF has an unfortunate relationship with firmware, resulting in policies that made sense in the late 1980s, but actively harm users today, through recommending obsolescent equipment, requiring increased complexity in RYF-certified hardware designs and discouraging both good security practices and the creation of free replacement firmware.  As a result of these policies, deficient hardware often winds up in the hands of those who need software freedom the most, in the name of RYF-certification.</p>



<h2>the FSF and microcode</h2>



<p>The normal Linux kernel is not recommended by the FSF, because it allows for the use of proprietary firmware with devices.  Instead, they recommend Linux-libre, which disables support for proprietary firmware by ripping out code which allows for the firmware to be loaded on to devices.  Libreboot, being FSF-recommended, also has <a href="https://libreboot.org/news/policy.html#problems-with-ryf-criteria">this policy of disallowing firmware blobs in the source tree</a>, despite it being a source of nothing but problems.</p>



<p>The end result is that users who deploy the FSF-recommended firmware and kernel wind up with varying degrees of broken configurations.  Worse yet, the Linux-libre project <a href="https://lists.gnu.org/archive/html/info-gnu/2018-04/msg00002.html">removes warning messages</a> which suggest a user may want to update their processor microcode to avoid Meltdown and Spectre security vulnerabilities.</p>



<p>While it is true that processor microcode is a proprietary blob, from a security and reliability point of view, there are two types of CPU: you can have a broken CPU, or a less broken CPU, and microcode updates are intended to give you a less broken CPU.  This is particularly important because microcode updates fix real problems in the CPU, and Libreboot has patches which <a href="https://browse.libreboot.org/lbmk.git/plain/resources/coreboot/default/patches/0012-fix-speedstep-on-x200-t400-Revert-cpu-intel-model_10.patch?id=9938fa14b1bf54db37c0c18bdfec051cae41448e">hack around problems caused by deficient microcode</a> burned into the CPU at manufacturing time, since it’s not allowed to update the microcode at early boot time. </p>



<p>There is also a common misconception about the capabilities of processor microcode.  Over the years, I have talked with numerous software freedom advocates about the microcode issue, and many of them believe that microcode is capable of reprogramming the processor as if it were an FPGA or something.  In reality, the microcode is a series of hot patches to the instruction decode logic, which is largely part of a fixed function execution pipeline.  In other words, you can’t microcode update a CPU to add or substantially change capabilities.</p>



<p>By discouraging (or outright inhibiting in the case of Linux-libre) end users to exercise their freedom (a key tenet of software freedom being that the user has agency to do whatever she wants with her computer) to update their processor microcode, the FSF pursues a policy which leaves users at risk for vulnerabilities such as Meltdown and Spectre, which were <a href="https://www.intel.com/content/www/us/en/developer/topic-technology/software-security-guidance/processors-affected-consolidated-product-cpu-model.html">partially mitigated through a microcode update</a>.</p>



<h2>Purism’s <strong>Libr</strong>em 5: a case <strong>study</strong></h2>



<p>The FSF “<a href="https://ryf.fsf.org/about/criteria">Respects Your Freedom</a>” certification has a loophole so large you could drive a truck through it called the “secondary processor exception”.  This is because it knows that generally speaking, entirely libre devices do not presently exist that have the capabilities people want.  Purism used this loophole to sell a phone that had proprietary software blobs while passing it off as entirely free.  The relevant text of the exception that allowed them to do this was:</p>



<blockquote><p>However, there is one exception for secondary embedded processors. The exception applies to software delivered inside auxiliary and low-level processors and FPGAs, within which software installation is not intended after the user obtains the product. This can include, for instance, microcode inside a processor, firmware built into an I/O device, or the gate pattern of an FPGA. The software in such secondary processors does not count as product software.</p></blockquote>



<p>Purism was able to accomplish this by making the Librem 5 have not one, but <em>two</em> processors: when the phone first boots, it uses a secondary CPU as a service processor, which initializes the RAM using a proprietary blob, then loads other proprietary blobs into other devices such as the baseband before starting the main CPU and shutting itself off.  In this way, they could have all the blobs they needed to use, without having to worry about them being user visible from PureOS.  Under the policy, that left them free and clear for certification.</p>



<p>The problem of course is that by hiding these blobs in the service processor, users are largely unaware of their existence, and are unable to leverage their freedom to study, reverse engineer and replace these blobs with libre firmware, a remedy that would typically be made available to them as part of the <a href="https://www.gnu.org/philosophy/free-sw.html">four freedoms</a>.</p>



<p>This means that users of the Librem 5 phone are objectively harmed in three ways: first, they are unaware of the existence of the blobs to begin with, second they do not have the ability to study the blobs, and third, they do not have the ability to replace the blobs.  By pursing RYF certification, Purism released a device that is objectively worse for the practical freedom of their customers.</p>



<h2>The Novena laptop: a second case study</h2>



<p>In 2012, Andrew “bunnie” Huang began a project to create a laptop with the most free components he could find, called <a href="https://hackaday.com/2012/12/16/bunnie-builds-a-laptop-for-himself-hopefully-us/">the Novena open laptop</a>.  It was based on the Freescale (now NXP) i.MX 6 CPU, which has an integrated Vivante GPU and WiFi radio.  Every single component in the design had data sheets freely available, and the schematic itself was published under a free license.</p>



<p>But because the SoC used required blobs to boot the GPU and WiFi functionality, the FSF required that these components be mechanically disabled in the product in order to receive certification, despite an ongoing effort to write replacement firmware for both components.  This replacement firmware was eventually released, and people are using these chips with that free firmware today.</p>



<p>Had bunnie chosen to comply with the RYF certification requirements, customers which purchased the Novena laptop would have been unable to use the integrated GPU and WiFi functionality, as it was physically disabled on the board, despite the availability of free replacement firmware for those components.  Thankfully, bunnie chose not to move forward on RYF certification, and thus the Novena laptop can be used with GPU acceleration and WiFi.</p>



<h2>the hardware which remains</h2>



<p>In practice, it is difficult to get anything much more freedom-respecting than the Novena laptop.  From a right-to-repair perspective, the Framework laptop is very good, but it still uses proprietary firmware.  It is, however, built on a modern x86 CPU, and could be a reasonable target for corebooting, especially now that the <a href="https://github.com/FrameworkComputer/EmbeddedController">embedded controller firmware’s source code</a> has been released under a free license.</p>



<p>However, because of the Intel ME, the Framework laptop will rightly never be RYF-certified.  Instead, the FSF promotes buying old thinkpads from 2009 with Libreboot pre-installed.  This is a total disservice to users, as a computer from 2009 is totally obsolete now, and as discussed above, Intel CPUs tend to be rather broken without their microcode updates.</p>



<p>My advice is to ignore the RYF certification program, as it is actively harmful to the practical adoption of free software, and just buy whatever you can afford that will run a free OS well.  At this point, total blob-free computing is a fool’s errand, so there are a lot of AMD Ryzen-based machines that will give you decent performance and GPU acceleration without the need for proprietary drivers.  Vendors which use coreboot for their systems and open the source code for their embedded controllers should be at the front of the line.  But the FSF will never suggest this as an option, because they have chosen unattainable ideological purity over the pragmatism of recommending what the market can actually provide.</p>

<p id="jp-relatedposts">
	<h3><em>Related</em></h3>
</p>
		</div><!-- .entry-content -->

	</div></div>
  </body>
</html>
