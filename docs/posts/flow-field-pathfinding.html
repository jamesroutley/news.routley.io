<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.redblobgames.com/blog/2024-04-27-flow-field-pathfinding/">Original</a>
    <h1>Flow Field Pathfinding</h1>
    
    <div id="readability-page-1" class="page"><div><address>27 Apr 2024</address><section><p>You may know me for my <em>interactive</em> tutorials. But before that, I was writing visual but non-interactive tutorials. In particular, there wasn’t a lot of information about A* on the web, so I decided to collect <a href="http://theory.stanford.edu/~amitp/GameProgramming/">all my notes about pathfinding</a><sup>[1]</sup> together in one place in the 1990s. But then in the 2010s I started making interactive pages. The newer pages are narrower in scope; I covered a broader set of topics on the older pages. I maintain both sets now.</p><p>Over the years people have asked me about “flow field pathfinding”. I felt like the early papers about it conflated the flow fields with hierarchical pathfinding, but I wasn’t sure, and I didn’t want to write about it until I was sure.</p><figure><img src="https://www.redblobgames.com/pathfinding/tower-defense/blog/flow-field.png?2024-04-27-14-17-13" alt=""/><figcaption>Flow field</figcaption></figure><!-- more --><p>But it’s been many years now and I would like to write <em>something</em> even if it’s not complete. My understanding so far is:</p><ol><li><em>flow fields</em> are a vector field that tells agents from <em>any</em> location what direction to move to find a <em>single</em> destination</li><li>optionally, agents that are in between locations on the pathfinding graph can <em>interpolate</em> between the vectors in the flow field</li><li>optionally, a <em>hierarchy</em> of coarse and fine stepped fields can speed up pathfinding</li></ol><p>In addition, there are <em>distance fields</em> which are themselves interesting for things like “<a href="https://www.roguebasin.com/index.php/Dijkstra_Maps_Visualized">Dijsktra maps</a><sup>[2]</sup>” in roguelike games and “<a href="https://www.gamedev.net/tutorials/programming/artificial-intelligence/the-core-mechanics-of-influence-mapping-r2799/">influence maps</a><sup>[3]</sup>” in strategy games. Distance fields can also be used for <a href="https://iquilezles.org/articles/distfunctions/">3d modeling</a><sup>[4]</sup> and <a href="https://www.redblobgames.com/blog/2024-03-21-sdf-fonts/">font rendering</a>. The flow fields and distance fields are related: in vector calculus, the gradient (∇) of the distance field produces the flow field.</p><figure><img src="https://www.redblobgames.com/pathfinding/tower-defense/blog/distance-field.png?2024-04-27-14-17-09" alt=""/><figcaption>Distance field</figcaption></figure><p>The graph-based pathfinding algorithms I cover on my <a href="https://www.redblobgames.com/pathfinding/a-star/introduction.html">A* page</a><sup>[5]</sup> output <em>both</em> distance fields and flow fields, in the <code>cost_so_far</code> and <code>came_from</code> outputs. I updated my pages to mention both flow and distance fields:</p><ul><li>I added a <a href="https://theory.stanford.edu/~amitp/GameProgramming/Variations.html#flow-fields">new section to my older pathfinding notes</a><sup>[6]</sup>.</li><li>I updated <a href="https://www.redblobgames.com/pathfinding/tower-defense/">my tower defense pathfinding page</a><sup>[7]</sup>.</li></ul><p>Although I mention <a href="https://theory.stanford.edu/~amitp/GameProgramming/MapRepresentations.html#hierarchical">hierarchical pathfinding</a><sup>[8]</sup> in these notes, I don’t cover it in detail. Maybe I will do so one day, but I don’t have to wait until then before publish the pages. That’s one of the advantages of web pages over textbooks or academic papers. I can update my pages as I learn more. I still update my pathfinding pages that I started in 1997, and I still update my interactive pathfinding pages that I started in 2014.</p></section></div></div>
  </body>
</html>
