<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://arxiv.org/abs/2311.11793">Original</a>
    <h1>Universal optimality of Dijkstra via beyond-worst-case heaps</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><p text-rendering="optimizelegibility">A reference post for anyone looking to upload files to Pinata IPFS in a react native project.</p>
<p text-rendering="optimizelegibility">Looking at <a href="https://docs.pinata.cloud/quickstart-ipfs">pinata docs</a>, there aren&#39;t any examples of how to upload a file to IPFS in react native applications.</p>
<p text-rendering="optimizelegibility">If this has been helpful to you, please let me know on <a href="https://twitter.com/benschac">twitter</a> or don&#39;t feel shy about <a href="http://bensch.ac/blog/buymeacoffee.com/x1Oeu8D">buying me a coffee</a> or starring this repo on <a href="https://github.com/benschac/benschac-new">github</a></p>
<pre><p><code><span><span>const</span><span> publicIpfsUrl </span><span>=</span><span> </span><span>&#39;https://api.pinata.cloud/pinning/pinFileToIPFS&#39;</span><span>
</span></span><span><span></span><span>const</span><span> privateIpfsUrl </span><span>=</span><span> </span><span>&#39;https://uploads.pinata.cloud/v3/files&#39;</span><span>
</span></span><span><span></span><span>async</span><span> </span><span>function</span><span> </span><span>upload</span><span>(</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>  </span><span>try</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>const</span><span> fileUri </span><span>=</span><span> </span><span>`</span><span>${</span><span>FileSystem</span><span>.</span><span>documentDirectory</span><span>}</span><span>&lt;filename&gt;.txt</span><span>`</span><span>
</span></span><span><span>    </span><span>await</span><span> </span><span>FileSystem</span><span>.</span><span>writeAsStringAsync</span><span>(</span><span>fileUri</span><span>,</span><span> </span><span>&#39;Hello World a bigger test!&#39;</span><span>)</span><span>
</span></span><span><span>    </span><span>// or publicIpfsUrl</span><span>
</span></span><span><span>    </span><span>const</span><span> res </span><span>=</span><span> </span><span>await</span><span> </span><span>FileSystem</span><span>.</span><span>uploadAsync</span><span>(</span><span>privateIpfsUrl</span><span>,</span><span> fileUri</span><span>,</span><span> </span><span>{</span><span>
</span></span><span><span>      httpMethod</span><span>:</span><span> </span><span>&#39;POST&#39;</span><span>,</span><span>
</span></span><span><span>      uploadType</span><span>:</span><span> </span><span>FileSystem</span><span>.</span><span>FileSystemUploadType</span><span>.</span><span>MULTIPART</span><span>,</span><span>
</span></span><span><span>      fieldName</span><span>:</span><span> </span><span>&#39;file&#39;</span><span>,</span><span>
</span></span><span><span>      mimeType</span><span>:</span><span> </span><span>&#39;text/plain&#39;</span><span>,</span><span>
</span></span><span><span>      headers</span><span>:</span><span> </span><span>{</span><span>
</span></span><span><span>        </span><span>Authorization</span><span>:</span><span> </span><span>`</span><span>Bearer </span><span>${</span><span>EXPO_PUBLIC_PINATA_JWT</span><span>}</span><span>`</span><span>,</span><span>
</span></span><span><span>      </span><span>}</span><span>,</span><span>
</span></span><span><span>    </span><span>}</span><span>)</span><span>
</span></span><span><span>  </span><span>}</span><span> </span><span>catch</span><span> </span><span>(</span><span>error</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>    </span><span>if</span><span> </span><span>(</span><span>error </span><span>instanceof</span><span> </span><span>Error</span><span>)</span><span> </span><span>{</span><span>
</span></span><span><span>      </span><span>console</span><span>.</span><span>error</span><span>(</span><span>&#39;Upload error:&#39;</span><span>,</span><span> error</span><span>.</span><span>message</span><span>)</span><span>
</span></span><span><span>    </span><span>}</span><span>
</span></span><span><span>  </span><span>}</span><span>
</span></span><span><span></span><span>}</span></span></code></p></pre></div></div></div></div>
  </body>
</html>
