<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hakon.gylterud.net/antipattern/">Original</a>
    <h1>The Anti-Pattern Game</h1>
    
    <div id="readability-page-1" class="page">

<p>Here is a small game I though of when taking a course on <a href="https://en.wikipedia.org/wiki/Modal_logic">modal logic</a>. It is a bit too tedious to be played by humans, but I had great fun finding a winning stategy for it – and there are still simple questions about this game I cannot answer.</p>
<h2 id="the-rules">The rules</h2>
<p><em>The anti-pattern game</em> is a two-player game. It is played using black and white pebbles (like Go). These pebbles are placed in sequence on a line. On their turn the player has a simple choice: to continue the sequence with a white or a black pebble.</p>
<p>A player loses if they put down a pebble such that the sequence contains a <em>pattern</em>. A <em>pattern</em> is a sequence of pebbles repeated three times in a row.</p>
<p>A player wins if the other player loses.</p>
<h3 id="example">Example</h3>
<p>Here is a simlpe game won by player 1:</p>
<pre><code>● ● ○ ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ○ ● ● ○ ○ ● ● ○ ○ ●
1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2</code></pre>
<p>Player two lost because after their final turn, the sequence ended with the pattern: <code>● ○ ○ ●</code> repeated trice.</p>
<p>Player two could have chosen to play <code>○</code> instead on the final turn, but that would also be a loosing move since then <code>○</code> would have been repeated trice. So if player two could have won, it must have changed its course several moves ago.</p>
<h2 id="a-winning-strategy-ready-player-1">A winning strategy <code>– READY PLAYER 1</code></h2>
<p>The obvious question about any such two-player game is weather any player has a <em>winning strategy</em>. Often this can be determined by a finiteness condition, but here we could at least imagine that the game could go on to generate an infinitely long sequence.</p>
<p>To solve this question I wrote a short Haskell program which does a brute force search to find a winning strategy. Actually, the Haskell program wasn’t that short – because I wanted to apply modal logic to formulate the winning strategy condition and had to make appropriate definitions.</p>
<p><strong>As it turns out, there is a winning strategy for player 1</strong>, and they can win the game inn less than twenty-two moves. The Haskell program finds the solution represented as a finite tree, which decides the moves of player 1 given any possible move of player 2.</p>
<h2 id="generalisations">Generalisations</h2>
<p>Even though the game is solved, there are more questions we could pose if we make small adjustments to the game. Some of these questions I do not yet know the answer to.</p>
<h3 id="cooperating-players">Cooperating players</h3>
<p>This question is simple to formulate: If the palyers were cooperating, <strong>could the game go on for ever?</strong> Put more precisely:</p>
<blockquote>
<p>Is there an infinite binary sequence where no contigous subsequence is of the form <code>σσσ</code> for some sequence <code>σ</code> of non-zero length?</p>
</blockquote>
<p>First off, it is clear that this game can continue for a long time. Here is a game with a thousand played moves:</p>
<pre><code>● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ●
○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ○ ○ ● ● ○ ● ● ○
● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ●
● ○ ● ● ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○
○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ○
● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ●
○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○
● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○
● ● ○ ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ●
● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ○ ● ●
○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ●
○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○
● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○
● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ●
● ○ ● ● ○ ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ●
○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ○
● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ●
○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○
● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○
● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ●
● ○ ● ○ ● ● ○ ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○
● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ●
○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○
● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ○ ● ● ○ ● ● ○ ● ○ ●
● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ●
● ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ●
○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ○ ● ● ○
● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ●
○ ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○
● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ○ ● ● ○ ●
● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ●
○ ● ● ○ ● ● ○ ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ●
○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○
● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ●
● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ○ ● ● ○ ● ● ○
○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ●
● ○ ● ● ○ ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ●
○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○
○ ● ● ○ ● ● ○ ● ○ ● ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ●
● ○ ● ● ○ ○ ● ● ○ ● ● ○ ● ○ ● ● ○ ○ ● ● ○ ● ● ○ ●</code></pre>
<p>At first sight this might seem disorderly, but there is a lot of repetition here:</p>
<ul>
<li>The sequence of the first three pebbles <code>● ● ○</code> covers most of the game:
<ul>
<li><a href="https://hakon.gylterud.net/img/anti-pattern-1000-first-3-repetition.png">Image</a></li>
</ul></li>
<li>The entire first line (25 pebbles) occurs several times (even at the 25 character line offset):
<ul>
<li><a href="https://hakon.gylterud.net/img/anti-pattern-1000-line-repetition.png">Image</a></li>
</ul></li>
</ul>
<p>The fact that <code>● ● ○</code> is so prominent in this example, suggest a way to generate an infinite game sequence:</p>
<pre><code>data Colour = Black | White
 deriving (Eq, Ord, Show)

instance Show Colour where
  show Black = &#34;●&#34;
  show White = &#34;○&#34;

generate :: [Colour] -&gt; [Colour]
generate p = [Black,Black,White]
  ++ (case p of
       (Black : cs) -&gt; White : generate cs
       (White : cs) -&gt; [Black,White] ++ generate cs )

stream :: [Colour]
stream = generate stream</code></pre>
<p>This makes <code>stream</code> an inductively defined stream of pebbles, which makes up an <strong>infinitely long game</strong>. An interesting question is then: Can player 1 force the game to go on idefinitely (assuming player 2 will not lose if avoidable)?</p>
<p>As an aside: This stream, while devoid of direct repetition is <em>very</em> <strong>compressible</strong>. It is also an example of data which responds well to being compressed several times. Here are the <a href="https://hakon.gylterud.net/antipattern/stream.txt.gz.gz">first 1 million moves</a> of the stream compressed twice. The file is a mere 512 bytes, and unpacks to a 26kb file, which again unpacks to 3Mb. That’s a compression factor of almost 6000!<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<h3 id="more-colours">More colours</h3>
<p>What if the game had more colours? What if there were three colours of pebbles, not just two?</p>
<h3 id="more-repetition-allowed">More repetition allowed</h3>
<p>The choice that three repetitions form a pattern is arbitrary. What if we allowed three repetitions, but prohibited four? Clearly the games would be longer, but would it make an essential difference to wether a player has a winning strategy?</p>
<h3 id="more-players">More players</h3>
<p>What if there are more players? This could influence the dynamics, and I do not know of a winning strategy for the three player variant. Since the game could go on for ever, it is not obvious that there is a winning strategy for any player when he controls only a third of the moves.</p>
<p>There is also a question of who winns in a three player game. Below is a record of one, where player 1 places the loosing pebble. <strong>But did player 2 or player 3 win?</strong></p>
<pre><code>● ○ ● ○ ● ● ○ ● ○ ● ○ ○ ● ○ ● ○ ○ ● ○ ● ○ ○
1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1</code></pre>
<p>Different winning conditions would give different incentives. Here are two possible winning conditions:</p>
<ul>
<li><strong>Cooperative victory:</strong> If a player loses the other two win.</li>
<li><strong>Exclusive victory:</strong> If player <code>n</code> loses, then player <code>n + 1 (mod 3)</code> wins.</li>
</ul>
<p><em>In the cooperative variant</em> it is clear that any two players could cooperate to win – basically because they out-number the third. But in a neurtal setting, who could cooperate? Player 1’s first move has no effect, but player 2 could play the same colour as Player 1, in order to open up for a cooperation with player 1. Then player 3 has a forced move, and when Player 1 is ready to make his move again, the board looks as follows:</p>
<pre><code>● ● ○ ?
1 2 3 1</code></pre>
<p>If player 1 plays <code>●</code> now, he and player 2 can force player 3 to lose:</p>
<pre><code>● ● ○ ● ● ○ ● ● ○ 
1 2 3 1 2 3 1 2 3</code></pre>
<p>If player 1 instead plays <code>○</code> the playing field is more open, and player 3 gets to chose his move:</p>
<pre><code>● ● ○ ○ ● ?
1 2 3 1 2 3</code></pre>
<p>But even though player 2 and player 3 can cooperate to force player 1’s moves in this setup, player 3 would lose the sequence:</p>
<pre><code>● ● ○ ○ ● ● ○ ● ● ○ ● ●
1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<p>Thus, for the cooperative variant, the question is: Can either player 1 or player 2 choose to cooperate with player 3 instead? The answer remains elusive for the time being.</p>
<p><em>In the exclusive variant</em> the player 2 does not want to help player 1 win, so</p>
<pre><code>● ● ○ ● ● ○ ● ● ○ 
1 2 3 1 2 3 1 2 3</code></pre>
<p>is not acceptable to player 2. However, it now unclear if any player has a winning strategy, or if given perfect play from each player the game would go on idefinitely.</p>






</div>
  </body>
</html>
