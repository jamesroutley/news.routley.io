<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.healthchecks.io/2022/02/healthchecks-io-hosting-setup-2022-edition/">Original</a>
    <h1>What One-person SaaS Healthchecks.io uses for hosting, hardware and software</h1>
    
    <div id="readability-page-1" class="page"><article id="post-1027" itemtype="https://schema.org/CreativeWork" itemscope="itemscope">
<div>

<div itemprop="text">
<p>Here’s the summary of the hardware and the software that powers Healthchecks.io.</p>
<h3 id="hardware">Hardware</h3>
<p>Since 2017, Healthchecks.io runs on dedicated servers at <a href="https://www.hetzner.com/">Hetzner</a>. The current lineup is:</p>
<ul><li>HAProxy servers: 4x AX41-NVMe servers (Ryzen 3600, 6 cores)</li><li>Web servers: 3x AX41-NVMe servers (Ryzen 3600, 6 cores)</li><li>PostgreSQL servers: 2x AX101 servers (Ryzen 5950X, 16 cores)</li></ul>
<p>All servers are located in the Falkenstein data center park, scattered across the FSN-DCx data centers so they are not all behind the same core switch. The monthly Hetzner bill is €484.</p>
<h3 id="software">Software</h3>
<ul><li>Ubuntu 20.04 on all machines.</li><li>Systemd manages services that need to run continuously (haproxy, nginx, postgresql, etc.)</li><li>Wireguard for private networking between the servers. Tiered topology: HAProxy servers cannot talk to PostgreSQL servers.</li><li><a href="https://github.com/netdata/netdata">Netdata agent</a> for monitoring the machines and the services running on them. Connected to <a href="https://www.netdata.cloud/">Netdata Cloud</a> for easy overview of all servers.</li><li>HAProxy 2.2 for terminating TLS connections, and load balancing between app servers. Enables easy rolling updates of application servers.</li><li>PostgreSQL 13, streaming replication from primary to standby. No automatic failover: I can trigger failover with a single command, but the decision is manual.</li></ul>
<p>On app servers:</p>
<ul><li>uWSGI runs the Healthchecks Python application (web frontend, management API).</li><li>hchk, a small application written in Go, handles ping API (hc-ping.com) and inbound email.</li><li>NGINX handles rate limiting, static file serving, and reverse proxying to uWSGI and hchk.</li></ul>
<h3 id="saas-tools">SaaS Tools</h3>
<ul><li>AWS S3 for storing encrypted database backups.</li><li><a href="https://www.braintreepayments.com/">Braintree</a> for accepting payments and managing subscriptions.</li><li>Cloudflare for hosting DNS records.</li><li><a href="https://elasticemail.com/">Elastic Email</a> for sending transactional email.</li><li><a href="https://www.fastmail.com/">Fastmail</a> for sending and receiving support email.</li><li>GitHub for version control and tracking issues, and GitHub Actions for running tests on every commit.</li><li><a href="https://www.hardypress.com/">Hardypress</a> for <a href="https://blog.healthchecks.io/">blog.healthchecks.io</a> (static WordPress blog as-a-service).</li><li><a href="https://hetrixtools.com/">HetrixTools</a> for uptime monitoring.</li><li><a href="https://icomoon.io/">IcoMoon</a> for authoring icon fonts.</li><li><a href="https://pgdash.io/">pgDash</a> for monitoring PostgreSQL servers. <a href="https://blog.healthchecks.io/2021/09/monitoring-postgresql-with-pgmetrics-and-pgdash/">Here’s a blog post</a> about setting it up.</li><li><a href="https://pingpong.one/">PingPong</a> for powering <a href="https://status.healthchecks.io/en/">status.healthchecks.io</a> (service status, incidents, planned downtimes, performance metrics).</li><li><a href="https://sslmate.com/">SSLMate</a> for provisioning certificates from command-line.</li><li><a href="https://syften.com/">Syften</a> for getting notifications when Healthchecks is mentioned on HN, Twitter, Reddit and elsewhere.</li><li>Twilio for sending SMS, WhatsApp and phone call notifications.</li></ul>
<h3 id="cron-jobs">Cron Jobs</h3>
<p>Healthchecks.io, the cron job monitoring service, uses cron jobs itself for the following periodic tasks:</p>
<ul><li>Once a day, make a full database backup, encrypt it with gpg, and upload it to AWS S3.</li><li>Once a day, send “Your account is inactive and is about to be deleted” notifications to inactive users.</li><li>Once a day, send “Your subscription will renew on …” for annual subscriptions that are due in 1 month.</li></ul>
<h3 id="bonus-development-and-deployment-setup">Bonus – Development and Deployment Setup</h3>
<ul><li>My main dev machine is a desktop PC with a single 27″ 1440p display.</li><li>Ubuntu 20.04, GNOME Shell.</li><li><a href="https://www.sublimetext.com/">Sublime Text</a> for editing source code. A combination of <a href="https://meldmerge.org/">meld</a>, <a href="https://www.sublimemerge.com/">Sublime Merge</a> and command-line git for working with git.</li><li>Yubikeys for signing git commits and logging into servers.</li><li><a href="https://www.fabfile.org/">Fabric</a> scripts for deploying code and running maintenance tasks on servers.</li><li><a href="https://github.com/mozilla/sops">sops</a> for storing secrets.</li><li>A dedicated laptop inside a dedicated backpack, for dealing with emergencies while away from the main PC.</li></ul>
<p>Comments, questions, ideas? Let me know <a href="mailto:contact@healthchecks.io">via email</a> or <a href="https://twitter.com/healthchecks_io">on Twitter</a>!</p>

</div>
</div>
</article></div>
  </body>
</html>
