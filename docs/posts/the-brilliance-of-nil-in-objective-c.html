<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://collindonnell.com/2022/04/28/the-brilliance-of-nil-in-objective-c/">Original</a>
    <h1>The Brilliance of “nil” in Objective-C</h1>
    
    <div id="readability-page-1" class="page"><article id="post-30">
	<!-- .entry-header -->

	
	<div>
		<p>I don’t code much in <a href="https://en.wikipedia.org/wiki/Objective-C">Objective-C</a> these days<sup id="fnref-30-obj-c"><a href="#fn-30-obj-c" title="Read footnote.">1</a></sup> but one thing I miss about it compared to Swift is how <code>nil</code> works.</p>
<p>To be fair to Swift, the concept of “nothing” in Objective-C is kind of a mess, since there’s four different versions of it compared to two in Swift.</p>
<table>
<tbody><tr>
<td><code>nil
</code></td><td>An empty Objective-C object.</td>
</tr>
<tr>
<td><code>Nil</code></td>
<td>An empty Objective-C class.</td>
</tr>
<tr>
<td><code>NULL</code></td>
<td>Nothing in C.</td>
</tr>
<tr>
<td><code>NSNull</code></td>
<td>Mostly used to represent null in Objective-C collections.</td>
</tr>
</tbody></table>
<p>The reason <code>NSNull</code> exists is that Objective-C collections (<code>NSArray</code>, <code>NSDictionary</code>) use <code>nil</code> in other ways. <code>NSArray</code> is <code>nil</code> terminated, so if you did this:</p>
<pre><code>NSArray *array = @[@&#34;a&#34;, @&#34;b&#34;, nil, @&#34;c&#34;];
// array = [@&#34;a&#34;, @&#34;b&#34;] 
</code></pre>
<p>You&#39;d only have the first two elements available. In <code>NSDictionary</code>, setting a key to <code>nil</code> removes it from the dictionary, so <code>NSNull</code> is used to say “this exists in the dictionary, and it is nothing.”</p>
<p>The main thing to remember is that if you have a pointer assigned to <code>NSNull</code> or <code>NULL</code> and you try to do something with them, your app will crash. <code>nil</code> on the other hand is kind of magic. <code>nil</code> evaluates to <code>NO</code> (<code>false</code>), and <code>nil</code> as an object always returns <code>nil</code>. That means that because whatever you sent to <code>nil</code> will return <code>nil</code> and that will evaluate to false instead of crashing your app that this:</p>
<pre><code>if (dict != nil &amp;&amp; dict.containsObjectForKey[@&#34;a&#34;]) { ... } 
</code></pre>
<p>Can become this:</p>
<pre><code>if (dict.containsObjectForKey[@&#34;a&#34;]) { ... } 
</code></pre>
<p>This is probably the least-Swift thing ever, but, if you&#39;re used to coding in this style, it&#39;s fantastic. In a lot (most?) cases where there&#39;s a possibility that <code>dict</code> could be <code>nil</code>, the thing you want is for nothing to happen. Way back when Swift was first released, and <a href="https://inessential.com/2014/08/12/carlfish">Brent said</a> switching to Swift “feels like a Jedi who’s trying to switch from a lightsaber to a blaster,” this is what I thought of.</p>

	</div><!-- .entry-content -->

	<!-- .entry-footer -->
</article></div>
  </body>
</html>
