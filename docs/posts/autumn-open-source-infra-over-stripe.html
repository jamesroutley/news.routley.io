<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/useautumn/autumn">Original</a>
    <h1>Show HN: Autumn ‚Äì Open-source infra over Stripe</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://olu.online/useautumn/autumn/blob/staging/assets/github_hero.png"><img src="https://olu.online/useautumn/autumn/raw/staging/assets/github_hero.png" alt="Autumn"/></a></p>
<p dir="auto"><a href="https://discord.gg/53emPtY9tA" rel="nofollow"><img src="https://camo.githubusercontent.com/0cb6f1a8b4edc8608d4f4a7431b5d4a7013f1bc7b9a84ee25c005d4acddee5e1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a6f696e253230436f6d6d756e6974792d3538363546323f6c6f676f3d646973636f7264266c6f676f436f6c6f723d7768697465" alt="Discord" data-canonical-src="https://img.shields.io/badge/Join%20Community-5865F2?logo=discord&amp;logoColor=white"/></a>
<a href="https://x.com/autumnpricing" rel="nofollow"><img src="https://camo.githubusercontent.com/4034f6049ca66fb48a09796d6ce98eef32575dae4b3d8bf17770beaad69392f9/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f617574756d6e70726963696e673f7374796c653d736f6369616c" alt="Follow" data-canonical-src="https://img.shields.io/twitter/follow/autumnpricing?style=social"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/6e3c12bf4510104ee1d6d7a7de8c558c4990507cd1c2312e8cd3e909acfbecd8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f59253230436f6d62696e61746f722d4632342d6f72616e6765"><img src="https://camo.githubusercontent.com/6e3c12bf4510104ee1d6d7a7de8c558c4990507cd1c2312e8cd3e909acfbecd8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f59253230436f6d62696e61746f722d4632342d6f72616e6765" alt="Y Combinator" data-canonical-src="https://img.shields.io/badge/Y%20Combinator-F24-orange"/></a>
<a href="https://app.useautumn.com" rel="nofollow"><img src="https://camo.githubusercontent.com/da9350dbaad0c571888c174efb66b7798a6a02b219334f1ed1a4669339897ca8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436c6f75642d2545322539382538312545462542382538462d626c7565" alt="Cloud" data-canonical-src="https://img.shields.io/badge/Cloud-%E2%98%81%EF%B8%8F-blue"/></a>
<a href="https://docs.useautumn.com" rel="nofollow"><img src="https://camo.githubusercontent.com/7f6d88507e659f89eb75356e49b3e34237a3118de06ec289f5b8614eef0db6ce/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f446f63756d656e746174696f6e2d2546302539462539332539352d626c7565" alt="Documentation" data-canonical-src="https://img.shields.io/badge/Documentation-%F0%9F%93%95-blue"/></a>
<a href="https://deepwiki.com/useautumn/autumn" rel="nofollow"><img src="https://camo.githubusercontent.com/e7d4bb1a32530e373bb53fbe8eea825440ad27c7531d8f144d561acdd20c093a/68747470733a2f2f6465657077696b692e636f6d2f62616467652e737667" alt="Ask DeepWiki" data-canonical-src="https://deepwiki.com/badge.svg"/></a></p>
<p dir="auto"><a href="https://useautumn.com" rel="nofollow">Autumn</a> is an open-source layer between Stripe and your application, allowing you to create any pricing model and embed it with a couple lines of code. On Autumn you can build:</p>
<ul dir="auto">
<li>Subscriptions</li>
<li>Credit systems &amp; top ups</li>
<li>Usage-based models &amp; overages</li>
<li>Custom plans for large customers</li>
</ul>
<p dir="auto">All this without having to handle webhooks, upgrades/downgrades, cancellations or payment fails.</p>

<p dir="auto"><strong>Cloud</strong>: The quickest way to start using Autumn is through our <a href="https://app.useautumn.com" rel="nofollow">cloud service</a>.</p>
<p dir="auto"><strong>Self Hosted</strong>: If you&#39;d like to self-host Autumn:</p>
<ol dir="auto">
<li>Make sure you have <code>node.js</code> and <code>pnpm</code> installed</li>
<li>Install the project dependencies</li>
</ol>

<ol start="3" dir="auto">
<li>Run our set up script:</li>
</ol>

<ol start="4" dir="auto">
<li>Run Autumn:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="docker compose -f docker-compose.prod.yml up"><pre>docker compose -f docker-compose.prod.yml up</pre></div>
<p dir="auto">That&#39;s it! You should be able to see the Autumn dashboard on <code>http://localhost:3000</code>.</p>
<blockquote>
<p dir="auto"><g-emoji alias="warning">‚ö†Ô∏è</g-emoji> To log in, enter an email at the sign in page, and an OTP should appear in your console / terminal. Normally, we use Resend to email an OTP or Google OAuth -- these can be set up by providing your credentials in <code>server/.env</code></p>
</blockquote>
<blockquote>
<p dir="auto">‚ÑπÔ∏è Our set up script initializes the required env vars and (optionally) a Supabase instance. If you&#39;d like to use your own Postgres instance, you can do so -- just paste the connection string in the <code>DATABASE_URL</code> env variable at <code>server/.env</code></p>
</blockquote>

<p dir="auto">If you encounter a <code>SyntaxError: Unexpected end of JSON input</code> error when running <code>pnpm run setup</code> again after previously running it, you may need to clear your database tables first. This is a <a href="https://github.com/drizzle-team/drizzle-orm/issues/4529" data-hovercard-type="issue" data-hovercard-url="/drizzle-team/drizzle-orm/issues/4529/hovercard">known issue</a> that can occur when running database migrations multiple times.</p>
<p dir="auto">To resolve this:</p>
<ol dir="auto">
<li>Connect to your database</li>
<li>Drop all existing tables</li>
<li>Run the setup script again:</li>
</ol>

<p dir="auto"><strong>1Ô∏è‚É£ Billing infra gets complex fast</strong></p>
<p dir="auto">More than payments: it&#39;s building permission management, metering, usage limits with cron jobs, and connecting it to upgrade, downgrade, cancellation and failed payments states. Race conditions, edge cases, and other bugs will slow you down.</p>
<p dir="auto"><strong>2Ô∏è‚É£ Billing and app logic should be decoupled</strong></p>
<p dir="auto">Growing companies iterate on pricing often: raising prices, experimenting with credits or charging for a new feature. DB migrations, rebuilding in-app flows, internal dashboards for custom pricing and grandfathering users on old pricing is a nightmare.</p>

<p dir="auto">First, create your products and plans on the dashboard. We support <strong>any</strong> pricing model. Some popular ones we&#39;ve seen include:</p>
<ol dir="auto">
<li><strong>Usage &amp; Overage</strong> ‚ö°: set real-time usage limits and choose when they reset. Charge users if they go over.</li>
<li><strong>Credits</strong> üí∞: users can access monetary or arbitrary credits that many features can draw from</li>
<li><strong>Seat-based with per-seat limits</strong> üë•:: bill customers for their users (or other entities)</li>
<li><strong>Pay upfront</strong> üí≥: let users purchase a fixed quantity of a feature upfront, which is used over time</li>
</ol>
<p dir="auto">Next, all your billing logic can be implemented through just 3 functions:</p>
<ol dir="auto">
<li><code>/attach</code>: One function call for all purchase flows. We return a Stripe Checkout URL, or handle an upgrade/downgrade.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="const { attach } = useAutumn();
&lt;button
  onClick={async () =&gt; {
    await attach({ productId: &#34;pro&#34; });
  }}
&gt;
  Upgrade to Pro
&lt;/button&gt;"><pre><span>const</span> <span>{</span> attach <span>}</span> <span>=</span> <span>useAutumn</span><span>(</span><span>)</span><span>;</span>
<span>&lt;</span><span>button</span>
  <span>onClick</span><span>=</span><span>{</span><span>async</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
    <span>await</span> <span>attach</span><span>(</span><span>{</span> <span>productId</span>: <span>&#34;pro&#34;</span> <span>}</span><span>)</span><span>;</span>
  <span>}</span><span>}</span>
<span>&gt;</span>
  Upgrade to Pro
<span>&lt;/</span><span>button</span><span>&gt;</span></pre></div>
<ol start="2" dir="auto">
<li><code>/check</code>: Check whether a customer has access to a product, feature or remaining usage.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="const { check } = useAutumn();

const { data } = await check({ featureId: &#34;ai_tokens&#34; })

!data.allowed &amp;&amp; alert(&#34;AI limit reached&#34;)"><pre><span>const</span> <span>{</span> check <span>}</span> <span>=</span> <span>useAutumn</span><span>(</span><span>)</span><span>;</span>

<span>const</span> <span>{</span> data <span>}</span> <span>=</span> <span>await</span> <span>check</span><span>(</span><span>{</span> <span>featureId</span>: <span>&#34;ai_tokens&#34;</span> <span>}</span><span>)</span>

<span>!</span><span>data</span><span>.</span><span>allowed</span> <span>&amp;&amp;</span> <span>alert</span><span>(</span><span>&#34;AI limit reached&#34;</span><span>)</span></pre></div>
<ol start="3" dir="auto">
<li><code>/track</code>: When a customer uses a usage-based feature, record a usage event.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="const { track } = useAutumn();

await track({
  featureId: &#34;ai_tokens&#34;,
  value: 1312
})"><pre><span>const</span> <span>{</span> track <span>}</span> <span>=</span> <span>useAutumn</span><span>(</span><span>)</span><span>;</span>

<span>await</span> <span>track</span><span>(</span><span>{</span>
  <span>featureId</span>: <span>&#34;ai_tokens&#34;</span><span>,</span>
  <span>value</span>: <span>1312</span>
<span>}</span><span>)</span></pre></div>

<p dir="auto"><strong>Contributing</strong> ü§ù: If you&#39;re interested in contributing, you can check out our guide <a href="https://olu.online/useautumn/autumn/blob/staging/.github/CONTRIBUTING.md">here</a>. All types of help are appreciated :)</p>
<p dir="auto"><strong>Support</strong> üí¨: If you need any type of support, we&#39;re typically most responsive on our <a href="https://discord.gg/STqxY92zuS" rel="nofollow">Discord channel</a>, but feel free to email us <code>hey@useautumn.com</code> too!</p>


<p dir="auto">Thanks to all our contributors for helping make autumn a better product!</p>
<a href="https://github.com/useautumn/autumn/graphs/contributors">
  <img src="https://camo.githubusercontent.com/cdc2f46ceaf949314970c69a6b3bb2508fe3aca059acdaafffe101d9810e3f3e/68747470733a2f2f636f6e747269622e726f636b732f696d6167653f7265706f3d757365617574756d6e2f617574756d6e" data-canonical-src="https://contrib.rocks/image?repo=useautumn/autumn"/>
</a>
</article></div></div>
  </body>
</html>
