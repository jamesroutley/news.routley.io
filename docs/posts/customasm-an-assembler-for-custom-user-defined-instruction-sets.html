<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/hlorenzi/customasm">Original</a>
    <h1>Customasm ‚Äì An assembler for custom, user-defined instruction sets</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><code>customasm</code> is an assembler that allows you to provide your own <strong>custom
instruction sets</strong> to assemble your source files!
It can be useful, for example, if you&#39;re trying to test the bytecode of a new virtual machine,
or if you&#39;re eager to write programs for that new microprocessor architecture
you just implemented in an FPGA chip!</p>
<p dir="auto"><a href="https://crates.io/crates/customasm" rel="nofollow"><img src="https://camo.githubusercontent.com/8267efded501caea14a7a0bda00f01d645b6c2a728f995abc273d7fca35669fd/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f637573746f6d61736d" alt="crates.io" data-canonical-src="https://img.shields.io/crates/v/customasm"/></a>
<a href="https://github.com/hlorenzi/customasm/releases"><img src="https://camo.githubusercontent.com/7900de206435559a6807ab2b0fb921b21f6610c4e662d149bf338f67866147d5/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f686c6f72656e7a692f637573746f6d61736d" alt="Latest Release" data-canonical-src="https://img.shields.io/github/v/release/hlorenzi/customasm"/></a>
<a href="https://github.com/hlorenzi/customasm/releases"><img src="https://camo.githubusercontent.com/f461f78a5cb191b04be400b458bd0936fab5c95ccbedba7124ef827fca0c27b9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f646f776e6c6f6164732f686c6f72656e7a692f637573746f6d61736d2f746f74616c" alt="Releases" data-canonical-src="https://img.shields.io/github/downloads/hlorenzi/customasm/total"/></a></p>
<p dir="auto"><a href="https://discord.com/invite/pXeDXGD" rel="nofollow"><img src="https://camo.githubusercontent.com/ea73ed429103b0e837fefb2aaf993f725760f4094d3730f2621a342ad3a22b5a/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f3339343939393033353534303237353232323f6c6162656c3d4a6f696e253230746865253230446973636f726425323073657276657221266c6f676f3d646973636f7264" alt="Discord" data-canonical-src="https://img.shields.io/discord/394999035540275222?label=Join%20the%20Discord%20server!&amp;logo=discord"/></a>
<a href="https://github.com/sponsors/hlorenzi"><img src="https://camo.githubusercontent.com/531ab9e4343f1629d8b5e54ce2b3331ae3e6fec1e7b25bb23d504bb8d8cf8319/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73706f6e736f72732f686c6f72656e7a693f6c6162656c3d47697448756225323053706f6e736f7273266c6f676f3d476974487562" alt="GitHub Sponsor" data-canonical-src="https://img.shields.io/github/sponsors/hlorenzi?label=GitHub%20Sponsors&amp;logo=GitHub"/></a></p>
<p dir="auto"><a href="https://hlorenzi.github.io/customasm/web/" rel="nofollow">üñ•Ô∏è Try it right now on your web browser!</a></p>
<p dir="auto"><a href="https://github.com/hlorenzi/customasm/blob/main/examples/nes_colors.asm">üïπÔ∏è Check out an example project</a> which targets the NES!</p>
<p dir="auto"><a href="https://marketplace.visualstudio.com/items?itemName=hlorenzi.customasm-vscode" rel="nofollow">‚å®Ô∏è Install the VSCode syntax highlight extension!</a></p>
<p dir="auto"><a href="https://accounts.hlorenzi.com/supporters" rel="nofollow">‚ù§Ô∏è Support the author!</a></p>

<p dir="auto"><a href="https://github.com/hlorenzi/customasm/wiki">üìö Check out the wiki</a>
for a changelog, documentation, and a how-to-start guide!</p>
<p dir="auto"><a href="https://github.com/hlorenzi/customasm/blob/main/src/usage_help.md">üí≤ Check out the command-line help!</a> (Better formatted on the command-line itself)</p>

<p dir="auto">You can install directly from <em>crates.io</em> by running <code>cargo install customasm</code>.
Then the <code>customasm</code> application should automatically become available in your
command-line environment.</p>
<p dir="auto">You can also download pre-built executables from the
<a href="https://github.com/hlorenzi/customasm/releases">Releases section</a>.</p>
<p dir="auto">You can compile from source yourself by first cloning the repository and
then simply running <code>cargo build</code>.
There&#39;s also a battery of tests available at <code>cargo test</code>.</p>

<p dir="auto">Given the following file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="#ruledef
{
    load r1, {value: i8} =&gt; 0x11 @ value
    load r2, {value: i8} =&gt; 0x12 @ value
    load r3, {value: i8} =&gt; 0x13 @ value
    add  r1, r2          =&gt; 0x21
    sub  r3, {value: i8} =&gt; 0x33 @ value
    jnz  {address: u16}  =&gt; 0x40 @ address
    ret                  =&gt; 0x50
}

multiply3x4:
    load r1, 0
    load r2, 3
    load r3, 4
    
    .loop:
        add r1, r2
        sub r3, 1
        jnz .loop
    
    ret"><pre><span>#ruledef</span>
<span>{</span>
<span>    load r1</span><span>,</span><span> {value: i8} =&gt; </span><span>0x11</span><span> @ value</span>
<span>    load r2</span><span>,</span><span> {value: i8} =&gt; </span><span>0x12</span><span> @ value</span>
<span>    load r3</span><span>,</span><span> {value: i8} =&gt; </span><span>0x13</span><span> @ value</span>
<span>    </span><span>add</span><span>  r1</span><span>,</span><span> r2          =&gt; </span><span>0x21</span>
<span>    </span><span>sub</span><span>  r3</span><span>,</span><span> {value: i8} =&gt; </span><span>0x33</span><span> @ value</span>
<span>    </span><span>jnz</span><span>  {address: u16}  =&gt; </span><span>0x40</span><span> @ address</span>
<span>    </span><span>ret</span><span>                  =&gt; </span><span>0x50</span>
<span>}</span>

<span>multiply3x4:</span>
<span>    load r1</span><span>,</span><span> </span><span>0</span>
<span>    load r2</span><span>,</span><span> </span><span>3</span>
<span>    load r3</span><span>,</span><span> </span><span>4</span>
<span>    </span>
<span>    .</span><span>loop</span><span>:</span>
<span>        </span><span>add</span><span> r1</span><span>,</span><span> r2</span>
<span>        </span><span>sub</span><span> r3</span><span>,</span><span> </span><span>1</span>
<span>        </span><span>jnz</span><span> .</span><span>loop</span>
<span>    </span>
<span>    </span><span>ret</span></pre></div>
<p dir="auto">...the assembler will use the <code>#ruledef</code> directive to convert the
instructions into binary code:</p>
<div dir="auto" data-snippet-clipboard-copy-content=" outp | addr | data (base 16)

  0:0 |    0 |          ; multiply3x4:
  0:0 |    0 | 11 00    ; load r1, 0
  2:0 |    2 | 12 03    ; load r2, 3
  4:0 |    4 | 13 04    ; load r3, 4
  6:0 |    6 |          ; .loop:
  6:0 |    6 | 21       ; add r1, r2
  7:0 |    7 | 33 01    ; sub r3, 1
  9:0 |    9 | 40 00 06 ; jnz .loop
  c:0 |    c | 50       ; ret"><pre><span> outp | addr | data (base </span><span>16</span><span>)</span>

<span>  </span><span>0</span><span>:</span><span>0</span><span> |    </span><span>0</span><span> |</span><span>          ; multiply3x4:</span>
<span>  </span><span>0</span><span>:</span><span>0</span><span> |    </span><span>0</span><span> | </span><span>11</span><span> </span><span>00</span><span>    ; load r1, 0</span>
<span>  </span><span>2</span><span>:</span><span>0</span><span> |    </span><span>2</span><span> | </span><span>12</span><span> </span><span>03</span><span>    ; load r2, 3</span>
<span>  </span><span>4</span><span>:</span><span>0</span><span> |    </span><span>4</span><span> | </span><span>13</span><span> </span><span>04</span><span>    ; load r3, 4</span>
<span>  </span><span>6</span><span>:</span><span>0</span><span> |    </span><span>6</span><span> |</span><span>          ; .loop:</span>
<span>  </span><span>6</span><span>:</span><span>0</span><span> |    </span><span>6</span><span> | </span><span>21</span><span>       ; add r1, r2</span>
<span>  </span><span>7</span><span>:</span><span>0</span><span> |    </span><span>7</span><span> | </span><span>33</span><span> </span><span>01</span><span>    ; sub r3, 1</span>
<span>  </span><span>9</span><span>:</span><span>0</span><span> |    </span><span>9</span><span> | </span><span>40</span><span> </span><span>00</span><span> </span><span>06</span><span> ; jnz .loop</span>
<span>  c:</span><span>0</span><span> |    c | </span><span>50</span><span>       ; ret</span></pre></div>
</article></div></div>
  </body>
</html>
