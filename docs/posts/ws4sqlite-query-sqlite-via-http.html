<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/proofrock/ws4sqlite">Original</a>
    <h1>Ws4sqlite: Query SQLite via HTTP</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><strong>ws4sqlite</strong> is a server application that, applied to one or more SQLite files, allows to perform SQL queries and statements on them via REST (or better, JSON over HTTP).</p>
<p dir="auto">Possible use cases are the ones where remote access to a sqlite db is useful/needed, for example a data layer for a remote application, possibly serverless or even called from a web page (<em>after security considerations</em> of course).</p>
<p dir="auto">Client libraries are available, that will abstract the &#34;raw&#34; JSON-based communication. See
<a href="https://github.com/proofrock/ws4sqlite-client-jvm">here</a> for Java/JVM, <a href="https://github.com/proofrock/ws4sqlite-client-go">here</a> for Go(lang); others will follow.</p>
<p dir="auto">As a quick example, after launching</p>
<div data-snippet-clipboard-copy-content="ws4sqlite --db mydatabase.db"><pre>ws4sqlite --db mydatabase.db</pre></div>
<p dir="auto">It&#39;s possible to make a POST call to <code>http://localhost:12321/mydatabase</code>, e.g. with the following body:</p>
<div data-snippet-clipboard-copy-content="{
    &#34;transaction&#34;: [
        {
            &#34;statement&#34;: &#34;INSERT INTO TEST_TABLE (ID, VAL, VAL2) VALUES (:id, :val, :val2)&#34;,
            &#34;values&#34;: { &#34;id&#34;: 1, &#34;val&#34;: &#34;hello&#34;, &#34;val2&#34;: null }
        },
        {
            &#34;query&#34;: &#34;SELECT * FROM TEST_TABLE&#34;
        }
    ]
}"><pre>{
    <span>&#34;transaction&#34;</span>: [
        {
            <span>&#34;statement&#34;</span>: <span><span>&#34;</span>INSERT INTO TEST_TABLE (ID, VAL, VAL2) VALUES (:id, :val, :val2)<span>&#34;</span></span>,
            <span>&#34;values&#34;</span>: { <span>&#34;id&#34;</span>: <span>1</span>, <span>&#34;val&#34;</span>: <span><span>&#34;</span>hello<span>&#34;</span></span>, <span>&#34;val2&#34;</span>: <span>null</span> }
        },
        {
            <span>&#34;query&#34;</span>: <span><span>&#34;</span>SELECT * FROM TEST_TABLE<span>&#34;</span></span>
        }
    ]
}</pre></div>
<p dir="auto">Obtaining an answer of</p>
<div data-snippet-clipboard-copy-content="{
    &#34;results&#34;: [
        {
            &#34;success&#34;: true,
            &#34;rowsUpdated&#34;: 1
        },
        {
            &#34;success&#34;: true,
            &#34;resultSet&#34;: [
                { &#34;ID&#34;: 1, &#34;VAL&#34;: &#34;hello&#34;, &#34;VAL2&#34;: null }
            ]
        }
    ]
}"><pre>{
    <span>&#34;results&#34;</span>: [
        {
            <span>&#34;success&#34;</span>: <span>true</span>,
            <span>&#34;rowsUpdated&#34;</span>: <span>1</span>
        },
        {
            <span>&#34;success&#34;</span>: <span>true</span>,
            <span>&#34;resultSet&#34;</span>: [
                { <span>&#34;ID&#34;</span>: <span>1</span>, <span>&#34;VAL&#34;</span>: <span><span>&#34;</span>hello<span>&#34;</span></span>, <span>&#34;VAL2&#34;</span>: <span>null</span> }
            ]
        }
    ]
}</pre></div>

<p dir="auto"><a href="https://germ.gitbook.io/ws4sqlite/" rel="nofollow">Docs</a> and a <a href="https://germ.gitbook.io/ws4sqlite/tutorial" rel="nofollow">Tutorial</a>.</p>
<ul dir="auto">
<li>A <a href="https://germ.gitbook.io/ws4sqlite/documentation/installation" rel="nofollow"><strong>single executable file</strong></a> (written in Go);</li>
<li>HTTP/JSON access, with <a href="https://germ.gitbook.io/ws4sqlite/client-libraries" rel="nofollow"><strong>client libraries</strong></a> for convenience;</li>
<li>Directly call <code>ws4sqlite</code> on a database (as above), many options available using a YAML companion file;</li>
<li>[<strong>In-memory DBs</strong>] are supported (<a href="https://germ.gitbook.io/ws4sqlite/documentation/configuration-file#path" rel="nofollow">https://germ.gitbook.io/ws4sqlite/documentation/configuration-file#path</a>);</li>
<li>Serving of <a href="https://germ.gitbook.io/ws4sqlite/documentation/configuration-file" rel="nofollow"><strong>multiple databases</strong></a> in the same server instance;</li>
<li><a href="https://germ.gitbook.io/ws4sqlite/documentation/requests#batch-parameter-values-for-a-statement" rel="nofollow"><strong>Batching</strong></a> of multiple value sets for a single statement;</li>
<li>All queries of a call are executed in a <a href="https://germ.gitbook.io/ws4sqlite/documentation/requests" rel="nofollow"><strong>transaction</strong></a>;</li>
<li>For each query/statement, specify if a failure should rollback the whole transaction, or the failure is <a href="https://germ.gitbook.io/ws4sqlite/documentation/errors#managed-errors" rel="nofollow"><strong>limited</strong></a> to that query;</li>
<li>&#34;<a href="https://germ.gitbook.io/ws4sqlite/documentation/stored-statements" rel="nofollow"><strong>Stored Statements</strong></a>&#34;: define SQL in the server, and call it from the client;</li>
<li><a href="https://germ.gitbook.io/ws4sqlite/documentation/configuration-file#corsorigin" rel="nofollow"><strong>CORS</strong></a> mode, configurable per-db;</li>
<li><a href="https://germ.gitbook.io/ws4sqlite/documentation/maintenance" rel="nofollow"><strong>Maintenance</strong></a> scheduling (VACUUM and backups), also configurable per-db;</li>
<li>Builtin <a href="https://germ.gitbook.io/ws4sqlite/documentation/encryption" rel="nofollow"><strong>encryption</strong></a> of fields, given a symmetric key;</li>
<li>Provide <a href="https://germ.gitbook.io/ws4sqlite/documentation/configuration-file#initstatements" rel="nofollow"><strong>initialization statements</strong></a> to execute when a DB is created;</li>
<li><a href="https://sqlite.org/wal.html" rel="nofollow"><strong>WAL</strong></a> mode enabled by default, can be <a href="https://germ.gitbook.io/ws4sqlite/documentation/configuration-file#disablewalmode" rel="nofollow">disabled</a>;</li>
<li><a href="https://github.com/proofrock/ws4sqlite/blob/main/features/performances.md">Quite fast</a>!</li>
<li>Compact codebase (~900 lines of code);</li>
<li>Comprehensive test suite (<code>make do-test</code>);</li>
<li><a href="https://germ.gitbook.io/ws4sqlite/documentation/installation/docker" rel="nofollow"><strong>Docker images</strong></a>, both for amd64 and arm32.</li>
</ul>

<ul dir="auto">
<li><a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#authentication"><strong>Authentication</strong></a> can be configured
<ul dir="auto">
<li>on the client, either using HTTP Basic Authentication or specifying the credentials in the request;</li>
<li>on the server, either by specifying credentials (also with hashed passwords) or providing a query to look them up in the db itself;</li>
</ul>
</li>
<li>A database can be opened in <a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#read-only-databases"><strong>read-only mode</strong></a> (only queries will be allowed);</li>
<li>It&#39;s possible to enforce using <a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#stored-statements-to-prevent-sql-injection"><strong>only stored statements</strong></a>, to avoid some forms of SQL injection and receiving SQL from the client altogether;</li>
<li><a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#cors-allowed-origin"><strong>CORS Allowed Origin</strong></a> can be configured and enforced;</li>
<li>It&#39;s possible to <a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#binding-to-a-network-interface"><strong>bind</strong></a> to a network interface, to limit access.</li>
</ul>

<p dir="auto">Some design choices:</p>
<ul dir="auto">
<li>Very thin layer over SQLite. Errors and type translation, for example, are those provided by the SQLite driver;</li>
<li>Doesn&#39;t include HTTPS, as this can be done easily (and much more securely) with a <a href="https://github.com/proofrock/ws4sqlite/blob/main/documentation/security.md#use-a-reverse-proxy-if-going-on-the-internet">reverse proxy</a>;</li>
<li>Doesn&#39;t support SQLite extensions, to improve portability.</li>
</ul>

<p dir="auto">Many thanks and all the credits to these awesome projects:</p>
<ul dir="auto">
<li><a href="https://github.com/lnquy/cron">lnquy&#39;s cron</a> (MIT License);</li>
<li><a href="https://github.com/robfig/cron">robfig&#39;s cron</a> (MIT License);</li>
<li><a href="https://github.com/gofiber/fiber">gofiber&#39;s fiber</a> (MIT License);</li>
<li><a href="https://github.com/mitchellh/go-homedir">mitchellh&#39;s go-homedir</a> (MIT License);</li>
<li><a href="https://github.com/mattn/go-sqlite3">mattn&#39;s go-sqlite3</a> (MIT License);</li>
<li><a href="https://github.com/wI2L/jettison">wI2L&#39;s jettison</a> (MIT License)</li>
<li><a href="https://github.com/DataDog/zstd">DataDog&#39;s zstd</a> (Simplified BSD license);</li>
<li>and of course, <a href="https://go.dev" rel="nofollow">Google Go</a>, <a href="https://code.visualstudio.com" rel="nofollow">VS Code</a> and <a href="https://github.com/coder/code-server">CodeServer</a>!</li>
</ul>
</article>
        </div></div>
  </body>
</html>
