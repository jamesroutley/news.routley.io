<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://raphaelbastide.com/cascade/">Original</a>
    <h1>Cascade: CSS to sound live coding system</h1>
    
    <div id="readability-page-1" class="page"><div>
        
<p>Cascade is a live-coding parasite to Cascading Style Sheets  </p>
<p><a href="https://raphaelbastide.com/cascade">Website</a></p>
<h2>Requirements</h2>
<ul>
<li>A modern browser (better performances with Chromium / Chrome browsers)</li>
<li>For local use, because of tone.js, Cascade requires a webserver to run, you can use apache, node   or python: <code>$ python -m SimpleHTTPServer 8000</code>.</li>
</ul>
<h2>How to use Cascade</h2>
<p>Cascade interprets the HTML element with a <code>.cas</code> class. You can start by creating a visible div with the background color you like, more details about how to start in <a href="#getting-started">Getting Started</a>.</p>
<p>Cascade also provides useful commands to execute in the browser’s webdev console, (see <a href="#commands">Commands</a>). Any other way to modify a web page is compatible with Cascade, <a href="#cascade-pool-collab-mode">collaborative editing</a>, <a href="https://raphaelbastide.com/cascade/cember">static HTML pages</a>, live-coding performances… Be creative!</p>
<h2>Getting started</h2>
<p><a href="https://gitlab.com/raphaelbastide/cascade/-/archive/main/cascade-main.zip">Download Cascade</a> and import the following files present in the <code>/js</code> folder to your HTML page:</p>
<pre><code>&lt;script src=&#34;path-to/Tone.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;path-to/instruments.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;path-to/cascade.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;</code></pre>
<p>You will also need to link <code>cascade.css</code> to your page. You can find it in the <code>/css</code> folder:</p>
<pre><code>&lt;link rel=&#34;stylesheet&#34; href=&#34;path-to/cascade.css&#34;&gt;</code></pre>
<p>Create an HTML structure with divs and background colors, for instance:</p>
<pre><code>&lt;body style=&#34;background-color: navy; height: 100vh;&#34;&gt;
  &lt;div class=&#34;cas&#34; style=&#34;top: 2vh; left: 10vw; background-color: yellow; width:100px; height:300px;&#34;&gt;&lt;/div&gt;
  &lt;div class=&#34;cas&#34; style=&#34;top: 1vh; left: 30vw; background-color: red; width:100px; height:30px;&#34;&gt;&lt;/div&gt;
&lt;/body&gt;
</code></pre>
<p>Now you need to initialize Cascade with JavaScript, here we take <code>body</code> as the Cascade container:</p>
<pre><code>let c = new Cascade(&#34;body&#34;)</code></pre>
<p>You should now hear something. To go further, open your browser’s devtool and move the divs around by changing their positions, background colors, sizes… A couple of scripts will help you to play around, for instance, <code>js/interface.js</code> will make every element draggable, change their background color on shift + click, and remove it with a double click.</p>
<h2>Constructor</h2>
<pre><code>new Cascade(querySelector root element, {options})</code></pre>
<p>The default cascade class is <code>.cas</code>. Only elements containing that class are taken into account. To override that default:</p>
<pre><code>let c = new Cascade(&#34;body&#34;, {
  cascadeClass: &#39;.yourOwnClass&#39;,
})</code></pre>
<p>Available options are:</p>
<ul>
<li><code>cascadeClass</code>: the class that will be used to interpret the HTML elements on the page. The default value is <code>.cas</code>.</li>
<li><code>defaultStyle</code>: default style applied to a div when <code>add</code> is used without specifying style.</li>
<li><code>instruments</code>: array of objects containing Tonejs instruments. See <code>/js/instruments.js</code> for example</li>
<li><code>startButton</code>: if <code>false</code>, the start button will not be used. The default value is <code>true</code>.</li>
</ul>
<h2>Commands</h2>
<p>The following commands can be executed in your browser’s <a href="https://updraftplus.com/faqs/how-do-i-open-my-browsers-developer-tools/">devtool console</a>:</p>
<ul>
<li><code>add(style, parent, copies)</code>: adds a new <code>div</code> element to the page with an optional <code>style</code>[string] inline CSS parameter and an optional <code>parent</code>[int] id and the number of copies</li>
<li><code>clear()</code>: clears the page</li>
<li><code>clone(style, id)</code>: clones element and its style, optional <code>style</code> to add</li>
<li><code>dl(file-name)</code>: downloads the current state of the composition as an HTML page with optional <code>file-name</code>. This function requires <code>js/download.js</code></li>
<li><code>mod(style, id)</code>: adds or changes an element’s style. If <code>id</code> is an array, it will affect many elements at once</li>
<li><code>scan()</code>: reveals elements informations such as ID, ratio, instrument, and color table</li>
<li><code>ls()</code>: lists elements on page</li>
<li><code>mute()</code>: toggles mute on all instruments</li>
<li><code>start()</code>: starts cascade, with an otpional <code>delay</code> attribute in seconds</li>
<li><code>stop()</code>: stops cascade</li>
<li><code>rawStyle()</code>: injects raw CSS to the page</li>
<li><code>rm(id)</code>: removes the element <code>id</code>. If <code>id</code> is an array, it will affect many elements at once</li>
</ul>
<p>If you use the following cascade variable name:</p>
<pre><code>let c = new Cascade(&#34;body&#34;)</code></pre>
<p>…you will access to the commands this way, on your page or live, in the devtool’s console:</p>
<pre><code>c.start()
c.add(&#39;width:10vh; height:30px; background:cyan; top:80vh;&#39;)</code></pre>
<p>Alternatively, for the sake of keyboard speed, you can add the file <code>js/live-shortcut.js</code> to directly access the commands:</p>
<pre><code>add()</code></pre>
<h2>Events</h2>
<p>The following events can be listened: <code>add</code>, <code>clone</code>, <code>start</code>, <code>stop</code>, <code>rm</code>, <code>update</code>. You can use events this way:</p>
<pre><code>let c = new Cascade(&#34;body&#34;)
c.on(&#39;add&#39;, function(e) {
  console.log(`Created: ${e.detail.newNode.id}`)
})</code></pre>
<h2>Associations</h2>
<p>The following table associates graphic and sound characteristics. Some properties are vague on purpose (positions) because they can be impacted by many CSS rules: <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code>, <code>margin</code>, <code>transform</code>, <code>flex</code>…</p>
<table>
<thead>
<tr>
<th>CSS</th>
<th>Sound</th>
<th>Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td>Body background color</td>
<td>bpm</td>
<td>Only <code>body</code>’s background color luminosity will set the piece’s bpm. e.g. <code>yellow</code> = 150  bpm <code>MidnightBlue</code> = 81 bpm.</td>
</tr>
<tr>
<td>horizontal position</td>
<td>delay</td>
<td>Time delay within the beat period: if the element 10% from the left, it be delayed 10% after the time.</td>
</tr>
<tr>
<td>vertical position</td>
<td>note</td>
<td>The note pitch. Higher = louder.</td>
</tr>
<tr>
<td>width / height ratio</td>
<td>beat distribution</td>
<td>The width / height ratio sets the number of beats and the number of steps, following <a href="https://en.wikipedia.org/wiki/Euclidean_rhythm">Godfried Toussaint’s euclidean rhythm distribution</a>. E.g a ratio <code>8:13</code> will play <code>0 1 1 0 1 1 0 1</code>, <code>1:2</code> will play <code>1 0</code>. The ratio ignores the orientation, in this sense <code>4:3</code> = <code>3:4</code> ; The greatest of the two ratio numbers is always used for the number of steps, and the smallest for the number of beats.</td>
</tr>
<tr>
<td>background color</td>
<td>Instrument</td>
<td>The <code>background-color</code> of an element will define the instrument: Cascade comes by default with 10 color CSS variables you can overwrite, those variable numbers (e.g.:<code>--c3</code>) will set the third instrument. Any other color will be interpreted as the closest one defined by a variable.</td>
</tr>
<tr>
<td>Surface</td>
<td>Velocity (volume)</td>
<td>The surface of an element (with × height) will affect the volume of the associated instrument. The bigger the louder.</td>
</tr>
<tr>
<td>opacity</td>
<td>probability</td>
<td>The opacity value will affect the chance an element will have be played. E.g. <code>opacity:0.5;</code> will play the element randomly 1 over 2 times.</td>
</tr>
<tr>
<td>border radius</td>
<td>duration</td>
<td>The cumulated 4 border radius of the element will define the duration of the sound it triggers. High radius =&gt; short sound.</td>
</tr>
<tr>
<td>border top width</td>
<td>cycle shift</td>
<td>This value in px will shift the rhythmic pattern. E.g. A 1px border top will change <code>1 0 0 0</code> into <code>0 1 0 0</code>. This can be also known as “Euclidean rotation”.</td>
</tr>
<tr>
<td>border left / right width</td>
<td>pan (soon)</td>
<td>The difference between a left and right borders width will define the left / right pan. E.g. to place an instrument at the max. right, add a 10px right border or more.</td>
</tr>
<tr>
<td>More to come…</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><em><a href="https://raphaelbastide.com/cascade/website/img/poster.svg"><img src="https://raphaelbastide.com/cascade/website/img/poster.svg" alt="Cascade: Graphic / Sound associations"/>
Full-size image</a></em></p>
<h2>Why Cascade is cool?</h2>
<ul>
<li>Cascade is a live-coding environment, and live-coding is <a href="https://github.com/toplap/awesome-livecoding/">extremely cool</a></li>
<li>It is also a music notation system: what you see is what you hear</li>
<li>It uses standard awesome technologies (CSS and HTML) as the composition language</li>
<li>CSS animations are interpreted in real-time</li>
<li>Nested elements inherit from the parent’s properties</li>
<li>Nested elements are interpreted only if the parent is played</li>
<li>Cascade is lightweight and beginner-friendly: plain HTML and JavaScript, but can be extended</li>
</ul>
<h2>Note on CSS properties</h2>
<p>Only a few CSS properties are interfaced with sound, other properties are ignored. The chosen CSS properties were picked for the following reasons:</p>
<ul>
<li>they have a strong graphical impact</li>
<li>they have no or few dependencies on other properties (font-<em>, grid-</em>, flex-*)</li>
<li>they are easy to remember and to use</li>
<li>they are as consistent as possible with the impacted sound property (e.g. the CSS unit range of deg, border-with or % differs)</li>
<li>they conceptually transcribe the sound change as much as possible</li>
</ul>
<h2>Cascade Pool (collab mode)</h2>
<p>Multi-performers or broadcasted mode for Cascade.</p>
<h3>Install and run</h3>
<p>Go to <code>/pool</code>, then install npm modules with:</p>
<pre><code>$ npm install</code></pre>
<p>…and run the app with:</p>
<pre><code>$ node index.js</code></pre>
<p>Then got to either <code>localhost:8080/performer</code> for performing (read and write) or <code>localhost:8080/</code> to attend the performance (read-only).</p>
<h3>Pool: Limitations</h3>
<p>Cascade pool comes with the following limitations:</p>
<ul>
<li><code>rm()</code> triggers a non-fatal error</li>
<li>the page is reloaded when a new performer connects</li>
<li>some events are not distributed to all performers</li>
</ul>
<h2>Contribution</h2>
<p>Contributions are welcome, let’s talk about your feedback and ideas in the <a href="https://gitlab.com/raphaelbastide/cascade/-/issues">issues</a>.</p>
<p>Huge thanks to <a href="https://gitlab.com/alicericci">@alicericci</a> for her dev skills and <a href="https://gitlab.com/svilayphiou">@svilayphiou</a> and her students for the early adoption.</p>
<h2>License</h2>
<p>Cascade is released under <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU AGPL</a> © 2022 Raphaël Bastide</p>
<p>Cascade received the support of <a href="http://lastation.paris/">Station Gare des Mines</a> / <a href="http://www.mu.asso.fr/">Collectif Mu</a></p>      </div></div>
  </body>
</html>
