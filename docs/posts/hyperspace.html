<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hypercritical.co/2025/02/25/hyperspace">Original</a>
    <h1>Hyperspace</h1>
    
    <div id="readability-page-1" class="page"><div id="container">

<div id="content">



 

<hr/>



<div><p><time datetime="2025-02-25T10:00:10-05:00">February 25, 2025 at 10:00 AM</time>
</p></div>





<!--
<div class="app-icon-right" style="position:relative;z-index:3;"><a href="/hyperspace/" style="display:block;"><img src="/2025/02/25/images/hyperspace-icon-256.png" width="128" height="128" alt="Hyperspace app icon"></a></div>
-->

<p>My interest in file systems started when I discovered how <a href="https://folklore.org/The_Grand_Unified_Model_The_Finder.html">type and creator codes</a><sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> and <a href="https://folklore.org/The_Grand_Unified_Model.html?sort=date">resource forks</a> contributed to the fantastic user interface on my original Macintosh in 1984. In the late 1990s, when it <a href="https://hypercritical.co/2025/02/25/images/macworld-february-1997.jpg">looked like</a> Apple might buy <a href="https://en.wikipedia.org/wiki/Be_Inc.">Be Inc.</a> to solve its operating system problems, the <a href="https://en.wikipedia.org/wiki/Be_File_System">Be File System</a> was the part I was <a href="http://nobius.org/~dbg/practical-file-system-design.pdf">most excited</a> about. When Apple bought NeXT instead and (<a href="https://en.wikipedia.org/wiki/Rhapsody_(operating_system)">eventually</a>) created Mac OS X, I was <a href="https://hypercritical.co/fatbits/2005/11/21/whos-minding-the-store">extremely</a> <a href="https://hypercritical.co/fatbits/2005/12/09/zfs-data-integrity-explained">enthusiastic</a> about the <a href="https://www.theregister.com/2007/06/07/apple_using_zfs_in_leopard/">possibility</a> of ZFS becoming the new file system for the Mac. But that <a href="https://arstechnica.com/gadgets/2016/06/zfs-the-other-new-apple-file-system-that-almost-was-until-it-wasnt/">didn’t happen</a> either.</p>

<p>Finally, at WWDC 2017, Apple announced <a href="https://en.wikipedia.org/wiki/Apple_File_System">Apple File System</a> (APFS) for macOS (after <a href="https://www.youtube.com/watch?v=IcyaadNy9Jk&amp;t=1670s">secretly test-converting everyone’s iPhones to APFS and then reverting them back to HFS+</a> as part of an earlier iOS 10.x update in one of the most audacious technological gambits in history).</p>

<p>APFS wasn’t ZFS, but it was still a huge leap over <a href="https://en.wikipedia.org/wiki/HFS_Plus">HFS+</a>. Two of its most important features are <a href="https://en.wikipedia.org/wiki/Snapshot_(computer_storage)">point-in-time snapshots</a> and <a href="https://en.wikipedia.org/wiki/Copy-on-write#In_computer_storage">copy-on-write</a> <a href="https://en.wikipedia.org/wiki/Apple_File_System#Clones">clones</a>. Snapshots allow for more reliable and efficient <a href="https://en.wikipedia.org/wiki/Time_Machine_(macOS)">Time Machine</a> backups. Copy-on-write clones are based on the same underlying architectural features that enable snapshots: a flexible arrangement between directory entries and their corresponding file contents.</p>

<p>Today, most Mac users don’t even notice that using the “Duplicate” command in the Finder to make a copy of a file doesn’t actually copy the file’s contents. Instead, it makes a “clone” file that shares its data with the original file. That’s why duplicating a file in the Finder is nearly instant, no matter how large the file is.</p>

<p>Despite knowing about clone files since the APFS introduction nearly eight years ago, I didn’t give them much thought beyond the tiny thrill of knowing that I wasn’t eating any more disk space when I duplicated a large file in the Finder. But late last year, as my Mac’s disk slowly filled, I started to muse about how I might be able to get some disk space back.</p>

<p>If I could find files that had the same content but were <i>not</i> clones of each other, I could convert them into clones that all shared a single instance of the data on disk. I took an afternoon to whip up a Perl script (that called out to a command-line tool written in C and another written in Swift) to run against my disk to see how much space I might be able to save by doing this. It turned out to be a lot: dozens of gigabytes.</p>

<p>At this point, there was no turning back. I had to make this into an app. There are plenty of Mac apps that will save disk space by finding duplicate files and then <i>deleting</i> the duplicates. Using APFS clones, my app could reclaim disk space <i><a href="https://hypercritical.co/hyperspace/#without-removing">without removing any files</a>!</i> As a digital pack rat, this appealed to me immensely.</p>

<p>By the end of that week, I’d written a barebones Mac app to do the same thing my Perl script was doing. In the months that followed, I polished and tested the app, and christened it <a href="https://hypercritical.co/hyperspace/">Hyperspace</a>. I’m happy to announce that Hyperspace is now available in the Mac App Store.</p>

<p><a href="https://apps.apple.com/us/app/hyperspace-reclaim-disk-space/id6739505345?mt=12"><img src="https://hypercritical.co/2025/02/25/images/hyperspace-icon-1024-lossy.png" width="512" height="512" alt="The Hyperspace app icon, created by Iconfactory" title="The Hyperspace app icon, created by Iconfactory"/></a></p>

<p><a href="https://apps.apple.com/us/app/hyperspace-reclaim-disk-space/id6739505345?mt=12"><img src="https://hypercritical.co/images/download-on-mac-app-store.svg" height="40" alt="Download Hyperspace from the Mac App Store"/></a></p>

<p>Hyperspace is a free download, and it’s free to scan to see how much space you might save. To actually reclaim any of that space, you will have to <a href="https://hypercritical.co/hyperspace/#purchase">pay for the app</a>.</p>

<p>Like <a href="https://hypercritical.co/apps/">all my apps</a>, Hyperspace is a bit difficult to explain. I’ve attempted to do so, at length, in the <a href="https://hypercritical.co/hyperspace/">Hyperspace documentation</a>. I hope it makes enough sense to enough people that it will be a useful addition to the Mac ecosystem.</p>

<p>For my fellow developers who might be curious, this is my second Mac app that uses SwiftUI and my first that uses the <a href="https://developer.apple.com/documentation/swiftui/migrating-to-the-swiftui-life-cycle">SwiftUI life cycle</a>. It’s also my second app to use Swift 6 and my first to do so since very early in its development. I found it <i>much</i> easier to use Swift 6 from (nearly) the start than to convert an existing, released app to Swift 6. Even so, there are still many rough edges to Swift 6, and I look forward to things being <a href="https://github.com/swiftlang/swift-evolution/blob/main/visions/approachable-concurrency.md">smoothed</a> <a href="https://hachyderm.io/@holly/114039272702099974">out</a> a bit in the coming years.</p>

<p>In <a href="https://atp.fm/617">a recent episode of ATP</a>, I described the then-unnamed Hyperspace as “<a href="https://atp.fm/617">An Incredibly Dangerous App</a>.” Like the process of converting from HFS+ to APFS, Hyperspace modifies files that it did not create and does not own. It is, by far, the riskiest app I’ve created. (Reclaiming disk space ain’t like dusting crops…) But I also think it might be the most useful to the largest number of people. I hope you like it.</p>




<hr/>



<p>© 2010-2025 John Siracusa</p>

</div>

</div></div>
  </body>
</html>
