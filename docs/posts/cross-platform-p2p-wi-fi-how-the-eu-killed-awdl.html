<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.ditto.com/blog/cross-platform-p2p-wi-fi-how-the-eu-killed-awdl">Original</a>
    <h1>Cross-Platform P2P Wi-Fi: How the EU Killed AWDL</h1>
    
    <div id="readability-page-1" class="page"><div><div><p><strong>TL;DR:</strong> Under pressure from the EU’s Digital Markets Act (DMA), Apple is being forced to ditch its proprietary peer-to-peer Wi-Fi protocol – Apple Wireless Direct Link (AWDL) – in favor of the industry-standard Wi-Fi Aware, also known as Neighbor Awareness Networking (NAN). A quietly published EU interoperability roadmap mandates Apple support Wi-Fi Aware 4.0 in iOS 19 and v5.0,<sup>1</sup> thereafter, essentially forcing AWDL into retirement. This post investigates how we got here (from Wi-Fi Direct to AWDL to Wi-Fi Aware), what makes Wi-Fi Aware technically superior, and why this shift unlocks true cross-platform peer-to-peer connectivity for developers.</p><h2>EU Forces Apple’s Hand on Peer-to-Peer Wi-Fi</h2><p>In a little-publicized mandate, the European Commission explicitly requires Apple to implement the Wi-Fi Alliance’s Wi-Fi Aware standard as part of DMA interoperability measures. The official DMA roadmap states:</p><blockquote><em>“Apple shall implement the measures for Wi-Fi Aware 4.0 in the next major iOS release, i.e. iOS 19, at the latest, and for Wi-Fi Aware 5.0 in the next iOS release at the latest nine months following the introduction of the Wi-Fi Aware 5.0 specification”</em></blockquote><p>In plain terms, by the time iOS 19 ships, iPhones must support Wi-Fi Aware v4.0, and Apple must roll out v5.0 support soon after the Wi-Fi Alliance finalizes that spec.</p><p>Crucially, this decision was not a voluntary announcement by Apple – it was imposed by regulators. Apple has kept quiet about these changes publicly, likely because they involve opening up formerly closed-off tech. The DMA enforcement timeline was highlighted in an EU Q&amp;A site and legal annex, not an Apple press release.<sup>7</sup> The European Commission’s language makes it clear this is about enabling third-party devices and apps to use high-bandwidth peer-to-peer (P2P) Wi-Fi features equal to Apple’s own, rather than Apple benevolently adopting a new standard. In fact, the EU order compels Apple to deprecate AWD<strong>L</strong> and ensure third-party solutions using Wi-Fi Aware are just as effective as Apple’s internal protocols. In short, the EU gave Apple no choice: embrace Wi-Fi Aware or face penalties.</p><p>What does this mean? Essentially, Apple’s hidden sauce for fast device-to-device communication – AWDL – is being forced into retirement. And with that, for the first time, iPhones and Androids will speak a common language for local wireless networking. Let’s unpack how we got here, and why it’s a big deal for developers.</p><h2>From Wi-Fi Direct to AWDL to Wi-Fi Aware: A Brief History</h2><p>To understand the significance, we need a quick history of ad-hoc Wi-Fi protocols:</p><ul role="list"><li><strong>Wi-Fi Ad-hoc (IBSS mode):</strong> Early 802.11 allowed devices to connect directly in a peer-to-peer “ad-hoc” network (IBSS), but it had limitations (no always-on discovery, no power-saving coordination, weak security). It never gained widespread use.</li></ul><ul role="list"><li><strong>Wi-Fi Direct:</strong> The Wi-Fi Alliance’s first big attempt at standard P2P. Wi-Fi Direct (circa 2010) allows devices to form a direct link without an AP, designating one device as a group owner (soft AP) for security and IP allocation. It improved on ad-hoc mode (supporting WPA2, dynamic group formation), but had drawbacks – e.g. limited service discovery capabilities and difficulty staying connected to infrastructure Wi-Fi concurrently.</li></ul><ul role="list"><li><strong>Apple Wireless Direct Link (AWDL):</strong> Around 2014, Apple developed AWDL as a proprietary, high-performance P2P Wi-Fi protocol for its ecosystem. According to Apple’s patent on AWDL (US20180083858A1) and reverse-engineering by researchers, AWDL was designed to address Wi-Fi Direct’s concerns and succeeded ad-hoc IBSS mode.<sup>8</sup> Apple deployed AWDL in over a billion devices (every modern iPhone, iPad, Mac) to power AirDrop, AirPlay peer connections, GameKit, Apple Watch unlock, and more.<sup>8,9</sup> Notably, AWDL can coexist with regular Wi-Fi by rapidly hopping channels – an iPhone can be on an AP and seamlessly switch to AWDL channel windows to talk to a peer.<sup>9</sup> This gave AWDL low latency and high throughput without dropping your internet connection.</li></ul><ul role="list"><li><strong>Neighbor Awareness Networking (NAN / Wi-Fi Aware):</strong> As it turns out, Apple didn’t keep all of AWDL to itself – it contributed to the Wi-Fi Alliance, which adopted AWDL’s approach as the basis for the NAN standard (branded “Wi-Fi Aware”) around 2015.<sup>8</sup> Wi-Fi Aware is essentially the industry-standard cousin of AWDL, enabling devices to discover each other and communicate directly with Wi-Fi speeds, in a power-efficient way, regardless of vendor. Android added platform support for Wi-Fi Aware in Oreo (8.0) and later,<sup>10</sup> but Apple until now stuck with its in-house AWDL stack which can be used by developers but isn&#39;t an open standard.</li></ul><p>In summary, AWDL was Apple’s competitive edge – a proprietary P2P stack that outperformed legacy Wi-Fi Direct and only worked on Apple devices. If an app needed cross-platform local connectivity, it couldn’t use AWDL (Apple provides no raw AWDL API). Developers resorted to Wi-Fi Direct, or Wi-Fi Aware on Android vs. Apple’s AWDL on iOS, with no interoperability. This fragmentation is exactly what the EU’s DMA targeted.</p><p>The DMA order effectively forces Apple to drop AWDL and align with Wi-Fi Aware<strong>.</strong> The Commission explicitly says Apple must </p><blockquote><em>“implement Wi-Fi Aware in iOS devices in accordance with the Wi-Fi Aware specification”</em> and <em>“continue to…improve the Wi-Fi Aware standard… Apple shall not prevent AWDL from becoming part of the Wi-Fi Aware standard”</em>, </blockquote><p>even urging Apple to allocate memory for concurrent P2P on older devices in a non-discriminatory way until AWDL is fully deprecated. </p><p>The writing is on the wall: AWDL as a private protocol is done for.</p><h2>Inside AWDL: Apple’s Once-Secret Peer-to-Peer Protocol</h2><p>AWDL is worth a closer look, because it shows what Apple achieved and what will now be opened up via Wi-Fi Aware. How does AWDL work? In short, it creates a continuously syncing ad-hoc network <em>on the fly</em> among nearby Apple devices:</p><ul role="list"><li><strong>Availability Windows &amp; Channel Hopping:</strong> Each AWDL-enabled device periodically advertises Availability Windows (AWs) – tiny time slices when it’s available on a specific Wi-Fi channel for peer-to-peer communication.<sup>8</sup> An elected master node (chosen via a priority scheme) coordinates these windows across devices. Outside of these AWs, devices can rejoin normal Wi-Fi (e.g. your home router’s channel) or sleep their radio to save power.<sup>8</sup> This scheduling is what allows, let&#39;s say, your Mac to be on Wi-Fi for internet most of the time, but briefly switch to channel 6 to AirDrop a file from your iPhone, then switch back – all without manual intervention.</li></ul><ul role="list"><li><strong>Integration with BLE:</strong> AWDL doesn’t work in isolation – it integrates with Bluetooth Low Energy for discovery. For example, AirDrop uses BLE advertisements to initially discover nearby devices (showing them in the UI), then quickly forms an AWDL connection for the actual high-speed file transfer. This combo gives the best of both: BLE’s low-power device discovery and AWDL’s high-throughput data channel.<sup>11,12</sup></li></ul><ul role="list"><li><strong>Performance:</strong> AWDL leverages the full Wi-Fi PHY, so it can hit hundreds of Mbps throughput and sub-second latencies that BLE or classic Bluetooth can’t touch. It also supports robust security (authenticated pairing, encryption) as used in AirDrop/AirPlay. One clever feature: because AWDL devices coordinate their availability, one device can even sustain multiple P2P links concurrently (e.g. an iPhone streaming to a HomePod via AWDL while also AirDropping to a Mac) – something spelled out in the EU requirements.</li></ul><ul role="list"><li><strong>Closed Nature:</strong> Despite its capabilities, AWDL has been closed off to third-party developers and other OSes. Apple’s APIs like MultipeerConnectivity framework ride on AWDL under the hood for Apple-to-Apple connections, but there was no way for an Android device or a Windows laptop to speak AWDL. It was an Apple-only club. Researchers at TU Darmstadt’s Secure Mobile Networking Lab had to reverse-engineer AWDL (publishing an open Linux implementation called <strong>OWL</strong>) to document its inner workings.<sup>13</sup> They demonstrated that AWDL indeed is an IEEE 802.11-based ad-hoc protocol with Apple-specific extensions, tightly integrated with Apple’s ecosystem.<sup>14</sup> Bottom line<strong>:</strong> AWDL gave Apple a technical edge but at the cost of interoperability – a classic “walled garden” approach.</li></ul><p>It’s this walled garden that the EU is breaking down. The mandate that <em>“Apple shall make Wi-Fi Aware available to third parties”</em> means Apple must expose new iOS APIs for P2P connectivity that are standard-based. And since Android (and even some IoT devices) already support Wi-Fi Aware, we’re headed for a world where an iPhone and an Android phone can find and connect to each other directly via Wi-Fi, no access point, no cloud, no hacks – a scenario that AWDL alone never allowed.</p><h2>Wi-Fi Aware 4.0: The New Cross-Platform Standard</h2><p>So what exactly is Wi-Fi Aware (a.k.a. NAN), and why is version 4.0 a game-changer? At a high level, Wi-Fi Aware offers <em>the same kind of capabilities as AWDL</em>, but as an open standard for any vendor. It lets devices discover each other and exchange data directly via Wi-Fi, without needing a router or cell service. Think of it as Wi-Fi’s answer to Bluetooth discovery but with Wi-Fi speed and range. Some key technical features of Wi-Fi Aware (especially in the latest v4.0 spec) include:</p><ul role="list"><li><strong>Continuous, Efficient Discovery:</strong> Devices form a Wi-Fi Aware group and synchronize wake-up times to transmit Discovery Beacons. Like AWDL’s AWs, Wi-Fi Aware defines Discovery Windows where devices are active to find peers, then can sleep outside those windows to save power. This allows always-on background discovery with minimal battery impact.<sup>15 </sup>The latest spec enhances this with an “Instant Communication” mode – a device can temporarily accelerate discovery (e.g. switch to a channel and beacon rapidly) when triggered by an external event like a BLE advertisement or NFC tap, to achieve very fast discovery and connection setup.<sup>16</sup> In practice, that means an app can use BLE to wake up Wi-Fi (advertising a service via BLE then negotiating a NAN link), combining the energy efficiency of BLE with the speed of Wi-Fi – just as Apple’s AirDrop has done privately. Wi-Fi Aware v4.0 explicitly added standardized BLE co-operation: <em>“Latest enhancements to Wi-Fi Aware offer discovery by Bluetooth LE, which triggers a formal Wi-Fi Aware session by waking the Wi-Fi radio.”</em><sup>10</sup></li></ul><ul role="list"><li><strong>High Throughput Data &amp; Range:</strong> Once devices discover each other, Wi-Fi Aware supports establishing a direct Wi-Fi data path. This can be an IP connection or a native transport, and it leverages Wi-Fi’s high data rates (including Wi-Fi 5/6/6E speeds on 5 GHz or 6 GHz bands). In fact, the Wi-Fi Alliance notes that Wi-Fi Aware data connections use <em>“high performance data rates and security, leveraging cutting-edge Wi-Fi technologies, including Wi-Fi 6, Wi-Fi 6E, and WPA3.”</em> <sup>10</sup> Compared to Bluetooth or BLE, the throughput and range are vastly superior – Wi-Fi Aware can work at typical Wi-Fi ranges (tens of meters, even over 100m in open air) and deliver tens or hundreds of Mbps. By contrast, BLE might get 100+ meters but on the order of 0.1 Mbps in real-world throughput. Wi-Fi Aware will close that gap by giving cross-platform apps both long range <em>and</em> high speed.</li></ul><ul role="list"><li><strong>Lower Latency &amp; Instant Communication:</strong> Version 4.0 of the spec introduced refinements for latency-critical applications. The aforementioned Instant Communication mode lets devices expedite the discovery handshake – important for use cases like AR gaming or urgent data sync where waiting a few seconds for a discovery window might be too slow. In Instant mode, a device (say, an AR headset) triggered via BLE could immediately switch to a predetermined channel and begin a quick service discovery exchange with a peer, rather than strictly waiting on the periodic timetable.<sup>16</sup> The spec shows this can cut discovery latency dramatically (Figure 73 in the spec illustrates an accelerated discovery).<sup>16</sup> From a developer’s perspective, Wi-Fi Aware can feel nearly instantaneous in establishing a link when properly used.</li></ul><ul role="list"><li><strong>Accurate Ranging:</strong> Perhaps one of the most exciting features for version 4 and beyond is built-in distance measurement between devices. Wi-Fi Aware includes a ranging protocol (based on Fine Timing Measurement, FTM) that lets one device get the distance to another with sub-meter accuracy.<sup>15</sup> This is similar to how Apple devices can use UWB or Bluetooth RTT for ranging, but now via Wi-Fi. The devices exchange precise timing signals to calculate distance (and even do so <em>as part of discovery</em> – a NAN discovery packet can include a request to measure range). The spec’s NAN Ranging section defines how devices negotiate a ranging session and obtain a distance estimate before or during data exchange.<sup>16</sup> <em>Enhanced ranging</em> could unlock things like peer-to-peer localization (for example, an app can find not just who is nearby but also roughly how far or even what direction).</li></ul><ul role="list"><li><strong>Security and Privacy:</strong> Wi-Fi Aware has baked-in solutions for secure communication and privacy. It supports device pairing (establishing trust and keys) and encrypted data paths with mutual authentication.<sup>15</sup> It also provides privacy features like randomized identifiers that rotate, so devices aren’t broadcasting a fixed MAC or identity constantly.<sup>10</sup> This addresses the concern that always-on discovery could be used to track devices – Aware can randomize its “NAN IDs” and only reveal a stable identity when a trusted handshake occurs. The EU mandate will require Apple to expose the same security levels to third-party developers as it uses for its own devices, meaning things like AirDrop’s peer authentication should extend to third-party Aware sessions.</li></ul><p>In essence, Wi-Fi Aware 4.0 is AWDL on steroids and open to all. It took the concepts Apple pioneered (timeslot synchronization, dual Wi-Fi/BLE use, etc.) and formalized them into a cross-vendor standard, adding improvements along the way. No longer limited to Apple devices, any Wi-Fi Aware certified device can join the discovery clusters and connect. With iOS 19, an iPhone will become just another Wi-Fi Aware node – able to discover and connect to Android phones, PCs, IoT gadgets, etc., directly via Wi-Fi.</p><h2>AWDL vs. Wi-Fi Aware vs. BLE: Feature Comparison</h2><p>How does Apple’s AWDL, the upcoming Wi-Fi Aware, and good old Bluetooth Low Energy stack up? The table below summarizes the key differences and capabilities of these peer-to-peer wireless technologies:</p><div>
<div role="region" tabindex="0">
<table>
    <thead>
        <tr>
            <th>Feature</th>
            <th>Apple AWDL (Proprietary)</th>
            <th>Wi-Fi Aware 4.0 (2022 Spec)</th>
            <th>Bluetooth LE (5.x)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Standardization</b></td>
            <td>
                <p>Apple-defined (private protocol)</p>
            </td>
            <td>
                <p>Wi-Fi Alliance NAN standard</p>
            </td>
            <td>
                <p>Bluetooth SIG standard</p>
            </td>
        </tr>
        <tr>
            <td><b>Topology</b></td>
            <td>
                <p>Mesh networking. Multiple devices in a cluster. One acts as a time sync master.</p>
            </td>
            <td>
                <p>Decentralized cluster (no fixed master). Typically one-to-one data links, but multiple links supported.</p>
            </td>
            <td>
                <p>Point-to-point or star (one-to-many, each connection 1:1). No native mesh routing.</p>
            </td>
        </tr>
        <tr>
            <td>
                <p><b>Discovery Mechanism</b></p>
            </td>
            <td>
                <p>AWDL frames (Wi-Fi beacons), BLE-assisted initial discovery (e.g., AirDrop).</p>
            </td>
            <td>
                <p>Publish/Subscribe discovery with NAN frames. Supports out-of-band BLE wake-up for power saving.</p>
            </td>
            <td>BLE Advertising channels, low-power continuous advertising, and scanning.</td>
        </tr>
        <tr>
            <td>
                <p><b>Initial Connection Latency</b></p>
            </td>
            <td>
                <p>Very fast (&lt;1s) using BLE assist (AirDrop). Quick AWDL link setup.</p>
            </td>
            <td>
                <p>Fast (&lt;1s typical) discovery, tens of ms connection setup after discovery.</p>
            </td>
            <td>
                <p>Fast discovery (~0.5–1s). Connection establishment latency (50–100 ms).</p>
            </td>
        </tr>
        <tr>
            <td>
                <p><b>Data Throughput</b></p>
            </td>
            <td>
                <p>High – 160–320 Mbps real-world (AirDrop). Wi-Fi 5/6 speeds.</p>
            </td>
            <td>
                <p>High – 100+ Mbps real-world on Wi-Fi 5 hardware, 250+ Mbps possible on Wi-Fi 6.</p>
            </td>
            <td>
                <p>Low – Max ~1.36 Mbps app throughput (BLE 5), typically 0.2–0.5 MB/s.</p>
            </td>
        </tr>
        <tr>
            <td><b>Range</b></td>
            <td>
                <p>~50–100m typical Wi-Fi range. 100m+ line-of-sight.</p>
            </td>
            <td>
                <p>~50–100m typical Wi-Fi range, similar to AWDL.</p>
            </td>
            <td>
                <p>Up to 100–200m typical; max ~1km line of sight with BLE 5 long-range (coded PHY).</p>
            </td>
        </tr>
        <tr>
            <td>
                <p><b>Concurrent Internet</b></p>
            </td>
            <td>
                <p>Yes – simultaneous infrastructure Wi-Fi and P2P via channel hopping.</p>
            </td>
            <td>Yes – NAN discovery windows are scheduled around AP connectivity. Coexistence supported.</td>
            <td>
                <p>Yes – BLE separate from Wi-Fi, runs in parallel.</p>
            </td>
        </tr>
        <tr>
            <td>
                <p><b>Notable Features</b></p>
            </td>
            <td>
                <p>Proprietary; Powers AirDrop/AirPlay; Mesh with master; No direct public API (apps use Multipeer Connectivity).</p>
            </td>
            <td>
                <p>Open standard; Flexible discovery; Instant messaging; Built-in secure data path setup; Android API since 2017.</p>
            </td>
            <td>
                <p>Universally supported; Extremely energy-efficient; Background presence detection; Limited data rate. Often combined with Wi-Fi for bulk transfer.</p>
            </td>
        </tr>
    </tbody>
</table>
</div></div><p><em>(Note: Above ranges and throughput are based on Ditto’s real-world tests and specification data. Bluetooth 5&#39;s theoretical 4x range increase can reach ~400m line-of-sight, typical usable range 100–200m indoors. Wi-Fi range varies significantly with the environment.)</em></p><p>As the table shows, Wi-Fi Aware (NAN) and AWDL are closely matched in capabilities – no surprise, given their kinship. Both vastly outperform Bluetooth LE for high-bandwidth applications, though BLE remains invaluable for ultra-low-power needs and simple proximity detection. The sweet spot that AWDL and Aware occupy is: fast, local data exchange (from tens of megabits up to hundreds) over distances of a room or building floor, without requiring any network infrastructure. This is why forcing Apple to support Wi-Fi Aware is so pivotal – it means an iPhone and an Android phone sitting next to each other can finally establish a fast, direct Wi-Fi link without an access point, something that was previously impossible (because the iPhone would only speak AWDL, and the Android only Wi-Fi Aware/Wi-Fi Direct). In effect, the EU is unifying the table’s middle column (“Wi-Fi Aware”) across the industry, and pushing the proprietary AWDL column toward obsolescence.</p><h2>A Glimpse of Wi-Fi Aware 5.0 – What’s Next?</h2><p>The EU is already looking ahead to Wi-Fi Aware 5.0, mandating Apple support it when available. While v5.0 is still in the works, we can speculate based on industry trends and draft discussions:</p><ul role="list"><li><strong>Better Interoperability &amp; Backwards Compatibility:</strong> Each iteration of Aware aims to bring improvements while remaining backward compatible. v5.0 will likely fine-tune the interaction between different versions (e.g. allowing a v5 device to gracefully communicate with a v4 device at a slightly reduced feature set).</li></ul><ul role="list"><li><strong>Multi-Band and Wi-Fi 7 Enhancements:</strong> With Wi-Fi 7 (802.11be) emerging, v5.0 could incorporate support for Multi-Link Operation (MLO) – allowing Aware devices to use multiple bands or channels simultaneously for P2P, increasing reliability and throughput. It might also embrace new PHY capabilities like 320 MHz channels in 6 GHz or even integration of the 60 GHz band for <em>ultra-high throughput at short range</em>. Imagine a future Aware where two devices use 6 GHz for discovery and 60 GHz for a quick gigabit data burst.</li></ul><ul role="list"><li><strong>Improved Ranging and Location:</strong> Wi-Fi Aware might leverage Wi-Fi 7’s improved location features or even integrate with UWB. v5.0 could offer finer distance measurement or angle-of-arrival info by coordinating multiple antennas, which would interest AR/VR use cases and precise indoor positioning.</li></ul><ul role="list"><li><strong>Extended Mesh Networking:</strong> Currently, Aware focuses on finding peers and setting up links; v5.0 might add more mesh networking primitives – e.g., forwarding data through intermediate nodes or coordinating groups of devices more intelligently. This could turn clusters of phones into true mesh networks for group connectivity without infrastructure.</li></ul><ul role="list"><li><strong>Security Upgrades:</strong> Each version updates security. v5.0 will likely address any weaknesses found in v4, perhaps adding quantum-resistant encryption for pairing or tighter integration with device identity frameworks. Given Apple’s emphasis on privacy, expect them to push for features that allow secure sharing of connection metadata with third parties without exposing user data.</li></ul><p>We’ll know for sure once the Wi-Fi Alliance releases the Wi-Fi Aware 5.0 spec, but the direction is clear: faster, farther, and more seamless peer-to-peer connectivity. And importantly, Apple will be on board from day one (not years late as it was with previous standards).</p><h2>Wi-Fi Aware in Action: Android Kotlin Example</h2><p>To illustrate how developers can use Wi-Fi Aware, let’s look at a simplified real-world example on Android. Below is Kotlin code demonstrating a device publishing a service and handling a message from a subscriber. (Android’s Wi-Fi Aware API is available from API level 26; one must have location and “Nearby Wi-Fi Devices” permissions, and the device must support Aware.)</p><pre contenteditable="false"><code><span>val wifiAwareMgr = context.getSystemService(Context.WIFI_AWARE_SERVICE) </span><span>as WifiAwareManager
</span><span>
</span><span></span><span>if</span><span> </span><span>(!wifiAwareMgr.isAvailable)</span><span> </span><span>{
</span><span>    Log.e(</span><span>&#34;WiFiAwareDemo&#34;</span><span>, </span><span>&#34;Wi-Fi Aware not available on this device.&#34;</span><span>)
</span><span>    </span><span>return</span><span>
</span>}

<span></span><span>// Attach to the Wi-Fi Aware service</span><span>
</span>wifiAwareMgr.attach(object : AttachCallback() {
<span>    </span><span>override fun </span><span>onAttached</span><span>(session: WifiAwareSession)</span><span> </span><span>{
</span><span>        </span><span>// Once attached, we can publish or subscribe</span><span>
</span>        val publishConfig = PublishConfig.Builder()
<span>            .setServiceName(</span><span>&#34;com.example.p2pchat&#34;</span><span>)    </span><span>// Name of our service</span><span>
</span>            .build()

        session.publish(publishConfig, object : DiscoverySessionCallback() {
<span>            </span><span>override fun </span><span>onPublishStarted</span><span>(pubSession: PublishDiscoverySession)</span><span> </span><span>{
</span><span>                Log.i(</span><span>&#34;WiFiAwareDemo&#34;</span><span>, </span><span>&#34;Service published, ready for subscribers.&#34;</span><span>)
</span>            }

<span>            </span><span>override fun </span><span>onMessageReceived</span><span>(
</span><span>                session: DiscoverySession,
</span><span>                peerHandle: PeerHandle,
</span><span>                message: ByteArray
</span><span>            )</span><span> </span><span>{
</span>                val msgStr = String(message, Charsets.UTF_8)
<span>                Log.i(</span><span>&#34;WiFiAwareDemo&#34;</span><span>, </span><span>&#34;Received message from subscriber: $msgStr&#34;</span><span>)
</span><span>                </span><span>// Here we could respond or establish a data path if needed</span><span>
</span>            }
<span>        }, </span><span>null</span><span>)
</span>    }

<span>    </span><span>override fun </span><span>onAttachFailed</span><span>()</span><span> </span><span>{
</span><span>        Log.e(</span><span>&#34;WiFiAwareDemo&#34;</span><span>, </span><span>&#34;Failed to attach to Wi-Fi Aware session.&#34;</span><span>)
</span>    }
<span>}, </span><span>null</span><span>)
</span></code></pre><p>In this code, the app attaches to the Wi-Fi Aware service, then publishes a service named <code>&#34;com.example.p2pchat&#34;</code>. When a peer subscribes and sends us a message (for example, “Hello from subscriber”), it arrives in <code>onMessageReceived</code>. A subscriber device would perform complementary steps: calling <code>session.subscribe(...)</code> with the same service name and implementing <code>onServiceDiscovered</code> to detect the publisher, then possibly using <code>subscribeSession.sendMessage(peer, ...)</code> to send that “Hello.” At that point, either side could then use <code>WifiAwareSession.createNetworkSpecifier()</code> to set up an actual data path (network interface) for larger communication.</p><p>The key takeaway is that Wi-Fi Aware makes peer discovery and messaging a first-class citizen in the API, abstracting away the low-level Wi-Fi fiddling. The app developer just provides a service name and gets callbacks when peers appear or messages arrive.</p><p>(Note: The above is a minimal example. In a real app, you’d handle permissions, check for support via <code>PackageManager.FEATURE_WIFI_AWARE</code>, and probably use the new NEARBY_WIFI_DEVICES permission on Android 13+. Also, establishing a full data path would involve requesting a <code>Network</code> from <code>ConnectivityManager</code> with a network specifier from the Aware session.)</p><p>Immediately after Google announced Wi-Fi Aware in Android, we at Ditto realized its potential for seamless peer-to-peer sync. As shown above, you can certainly roll your own discovery and data exchange with Aware. However, not every developer will want to manage these details or deal with corner cases of connectivity. That’s why Ditto’s real-time sync SDK is integrating Wi-Fi Aware support out-of-the-box<strong>.</strong> </p><p>Our upcoming releases will automatically use Wi-Fi Aware in iOS under the hood for nearby devices, enabling peer-to-peer database synchronization and binary file sharing between iOS and Android with zero configuration. In practical terms, if you build your app with Ditto, two devices in proximity will be able to find each other and sync data directly (bypassing cloud or LAN) using the fastest available transport – now including Wi-Fi Aware alongside Bluetooth, AWDL, LAN, etc. </p><p>Cross-platform, edge-first applications (collaborative apps, offline-first data stores, local IoT networks) will significantly benefit from this, as devices will form a local mesh that syncs instantly and reliably, even if the internet is down. Ditto’s approach has always been to multiplex multiple transports (Wi-Fi infrastructure, P2P, BLE, etc.) for robustness; adding NAN support supercharges the bandwidth available for nearby sync sessions.</p><p>A concrete example: Consider an app for first responders that shares maps and live sensor data among a team in the field. With Wi-Fi Aware, an Android tablet, an iPhone, and a specialized helmet device could all auto-discover each other and form a mesh to sync mission data in real-time without any network. Previously, if the iPhone had an app using AWDL, it couldn’t directly connect to the Android tablet’s Wi-Fi Aware session – they were incompatible silos. Now, they’ll speak one language, making such scenarios truly feasible.</p><h2>Bigger Picture: The Dawn of True Cross-Platform Mesh Networking</h2><p>Apple’s reluctant adoption of Wi-Fi Aware marks a pivot point for device connectivity. For years, we’ve seen a split: Apple’s ecosystem “Just Works” within itself (thanks to AWDL, AirDrop, etc.), while other platforms muddled along with standards that never quite matched the seamlessness or performance. That left cross-platform interactions hamstrung – the experience of sharing something between an iPhone and an Android was far from instant or easy.</p><p>With iOS supporting Wi-Fi Aware, we’re essentially witnessing AWDL go open. The proprietary tech that powered some of Apple’s most magical features will now be available in an interoperable way to any developer. The implications are significant:</p><ul role="list"><li><strong>End of the Proprietary P2P Divide:</strong> No more need for parallel implementations. Developers won’t have to build one system using MultipeerConnectivity for iOS-to-iOS and another using Wi-Fi Aware or Wi-Fi Direct for Android-to-Android. They can use Wi-Fi Aware universally for nearby networking. This reduces development complexity and encourages building features that work on all devices, not just within one brand.</li></ul><ul role="list"><li><strong>Cross-Platform AirDrop and Beyond:</strong> We will likely see apps (or OS-level features) that enable AirDrop-like functionality between iOS and Android. Google’s Nearby Share and Samsung’s Quick Share could potentially become interoperable with Apple’s implementation now that the underlying protocol is shared. The user experience barrier between ecosystems could start to blur in local sharing scenarios.</li></ul><ul role="list"><li><strong>Mesh and Edge Computing Potential:</strong> If many devices can seamlessly form ad-hoc networks, this enables new paradigms in edge computing. Clusters of phones could share workload or content directly. For example, at a conference, a presenter’s laptop could broadcast slides via Wi-Fi Aware to all audience phones without internet. Or a fleet of drones could coordinate via Aware when out of range of a base station. The offline mesh becomes a first-class citizen.</li></ul><ul role="list"><li><strong>Competitive Innovation:</strong> The EU’s push here also sets a precedent – even giants like Apple must conform to interoperability on critical features. This may drive Apple (and others) to innovate <em>on top of</em> the standards rather than via proprietary lock-in. We might see Apple contribute more actively to Wi-Fi Aware’s future improvements (as required by the DMA) to ensure it meets their needs for things like AR/VR data streams. That collaboration could yield better tech for everyone, faster.</li></ul><p>One can’t ignore the <em>irony</em> that the Wi-Fi Aware standard is effectively a child of AWDL. Now the child comes back to replace its parent. From a technical perspective, this is a win for engineering elegance – it’s always cleaner to have one agreed-upon protocol rather than parallel ones. From a developer perspective, it’s a huge win for interoperability and user reach.</p><p>Apple will undoubtedly ensure that the transition doesn’t degrade the experience for Apple-to-Apple interactions; the DMA even mandates that third-party access be <em>“equally effective”</em> as Apple’s own solutions. That means as developers, we should expect the new iOS 19 Wi-Fi Aware APIs to give us essentially what AWDL gave Apple’s apps. It’s like being handed the keys to a supercar that was previously locked in Apple’s garage.</p><h2>Conclusion</h2><p>The EU’s crackdown on Apple’s closed ecosystems is catalyzing a long-awaited unification in short-range wireless technology. By compelling Apple to adopt Wi-Fi Aware, the Digital Markets Act is effectively forcing the end of AWDL as an exclusive domain. For developers and users, this is exciting news: soon your apps will be able to use high-speed peer-to-peer Wi-Fi on iPhones and have it talk to other platforms seamlessly. We’ll likely see an explosion of innovative uses for local connectivity – from truly universal AirDrop alternatives to cross-platform local multiplayer games, ad-hoc collaborative editing, IoT device commissioning, and beyond – no specialized hardware or router required.</p><p>At a technical level, AWDL will be remembered as an ahead-of-its-time solution that proved what was possible, and Wi-Fi Aware ensures those capabilities are broadly available as an industry standard. With Wi-Fi Aware 4.0 on the cusp of ubiquity (and 5.0 on the horizon), we are entering a new era of frictionless sharing and syncing among devices in physical proximity. It’s a win for interoperability and a win for innovation in peer-to-peer networking. The walls around AWDL are coming down – and the implications for edge computing and offline experiences are profound.</p><p>‍</p><p><strong>Sources:</strong> </p><p>[1] European Commission – <em>DMA Decisions on Apple Interoperability (Q&amp;A)</em> – <strong>High-bandwidth P2P Wi-Fi (Wi-Fi Aware 4.0 in iOS 19, Wi-Fi Aware 5.0 next)</strong>. (2025)  (<a href="https://digital-markets-act.ec.europa.eu/questions-and-answers/interoperability_en#:~:text=,by%20the%20end%20of%202025">Interoperability - European Commission</a>)</p><p>[2] The Apple Wiki – <em>Apple Wireless Direct Link (AWDL)</em> – <strong>Proprietary mesh protocol introduced in iOS 7 (2014) for AirDrop/Continuity.</strong>  (<a href="https://theapplewiki.com/wiki/Apple_Wireless_Direct_Link#:~:text=Apple%20Wireless%20Direct%20Link%20is,used%20for%20other%20Continuity%20features">Apple Wireless Direct Link - The Apple Wiki</a>) (<a href="https://theapplewiki.com/wiki/Apple_Wireless_Direct_Link#:~:text=AWDL%20is%20a%20mesh%20protocol%2C,all%20members%20of%20the%20network">Apple Wireless Direct Link - The Apple Wiki</a>)</p><p>[3] ZDNet – <em>Apple’s AWDL protocol plagued by flaws…</em> – <em>Research note: “NAN (Wi-Fi Aware) is a new standard supported by Android which draws on AWDL’s design.”</em> (Nov 2019)  (<a href="https://www.zdnet.com/article/apples-awdl-protocol-plagued-by-flaws-that-enable-tracking-and-mitm-attacks/#:~:text=%22NAN%2C%20commonly%20known%20as%20Wi,our%5D%20work">Apple&#39;s AWDL protocol plagued by flaws that enable tracking and MitM attacks | ZDNET</a>)</p><p>[4] Android AOSP Documentation – <em>Wi-Fi Aware feature (Neighbor Awareness Networking)</em> – <strong>Added in Android 8.0; supports discovery, connection, and ranging (added in Android 9).</strong>  (<a href="https://source.android.com/docs/core/connect/wifi-aware#:~:text=The%20Wi,network">Wi-Fi Aware  |  Android Open Source Project</a>)</p><p>[5] Nordic Semiconductor – <em>Bluetooth Range Compared</em> – <strong>Bluetooth 5 LE offers up to ~400 m range (4× vs BLE4), 2 Mbps PHY, ~1.36 Mbps application throughput.</strong>  (<a href="https://blog.nordicsemi.com/getconnected/things-you-should-know-about-bluetooth-range#:~:text=BLUETOOTH%20v2,outdoors">Things You Should Know About Bluetooth Range</a>)</p><p>[6] Computerworld – <em>Coming soon: Faster, longer-range Bluetooth 5</em> – <em>“In clear line of sight, Bluetooth 5 range could stretch to 400 meters,”</em> (2016)</p><p>[7] BGR -- <em>iOS 19 Features Coming to EU</em> -- <strong>Details new features for EU iPhones including high-bandwidth P2P Wi-Fi, sideloading, and alternative app stores</strong> (March 2025) (<a href="https://bgr.com/tech/8-exclusive-ios-19-features-coming-to-eu-iphone-users/">8 Exclusive iOS 19 Features Coming to EU iPhone Users</a>)</p><p>[8] Open Wireless Link Wiki - <em>What is Apple Wireless Direct Link (AWDL)</em> -- <strong>Apple’s patent on AWDL (US201800838) and origins as a successor to Wi-FI IBSS </strong>(<a href="https://owlink.org/wiki/#:~:text=,NAN">Wiki | Open Wireless Link</a>)</p><p>[9] CyberHoot – <em>Apple Wireless Direct Link (AWDL) – </em><strong>Apple deployed AWDL in over billion devices to power AirDrop, AirPlay peer Connections, and more</strong> (2002) (<a href="https://cyberhoot.com/cybrary/apple-wireless-direct-link-awdl/#:~:text=Apple%20Wireless%20Direct%20Link%20,a%20secondary%20display%20with%20%E2%80%98Sidecar%E2%80%98">Apple Wireless Direct Link (AWDL) - CyberHoot</a>)</p><p>[10] Wi-Fi Alliance – <em>Wifi Aware –</em><strong> Android added platform support for Wi-Fi Aware in Oreo (8.0) and later </strong>(<a href="https://www.wi-fi.org/discover-wi-fi/wi-fi-aware#:~:text=What%20operating%20systems%20support%20Wi,Aware">Wi-Fi Aware | Wi-Fi Alliance</a>)</p><p>[11] Usenix Association – <em>A billion Open Interfaces for Eve and Mallory: MitM, DoS, and Tracking ATtacks on iOS and macOS Through Apple Wireless Direct Link – </em><strong>AWDL integrates with Bluetooth Low Energy </strong>(<a href="https://www.usenix.org/conference/usenixsecurity19/presentation/stute#:~:text=USENIX%20www,services%20such%20as%20Apple%20AirDrop">A Billion Open Interfaces for Eve and Mallory: MitM, DoS ... - USENIX</a>)</p><p>[12] Octet Stream –<em> Building Cross Platform Offline - First Apps with Bluetooth Low Energy</em> - <strong>Integration with Bluetooth Low Energy </strong>(May 2024) (<a href="https://octet-stream.net/b/scb/building-cross-platform-offline-first-apps-with-ble.html#:~:text=Image">Building Cross-Platform Offline-First Apps with Bluetooth Low Energy</a>).</p><p>[13] Open Wireless Link – <em>Code</em> – <strong>Linux Implementation called OWL </strong>(<a href="https://owlink.org/code/#:~:text=OWL%20is%20a%20an%20open,monitor%20mode%20and%20frame%20injection">Code | Open Wireless Link</a>)</p><p>[14] Secure Mobile Networking Lab (SEEMOO) -- <em>Apple Wireless Direct Link (AWDL) and Secure Device Communications</em> –  <strong>AWDL is a based ad-hoc protocol with Apple-specific extensions integrated into Apple’s ecosystem</strong> (<a href="https://www.seemoo.tu-darmstadt.de/team/mhollick/#:~:text=Apple%20Wireless%20Direct%20Link%20,device%20communications">Matthias Hollick – Secure Mobile Networking Lab</a>)</p><p>[15] WiFi Alliance – <em>Wi-Fi CERTIFIED Wi-Fi Aware Technology Overview</em> – <strong>Wi-Fi Aware always-on background discovery with power efficiency </strong>(2002) (<a href="https://www.wi-fi.org/file/wi-fi-certified-wi-fi-aware-technology-overview-2022#:~:text=individual%20preferences,device%20data%20exchange">Wi-Fi CERTIFIED Wi-Fi Aware™ Technology Overview (2022) | Wi-Fi Alliance</a>)</p><p>[16] WiF Alliance – <em>Wi-Fi Aware Specification v4.0 </em>– <strong>Detailed Specification for Wi-Fi Aware technology </strong>(2022)<strong> </strong>(<a href="http://about:blank">Wi-Fi Aware Specification v4.0.pdf</a></p><p>‍</p></div></div></div>
  </body>
</html>
