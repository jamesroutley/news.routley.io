<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://basicbitch.software/posts/2022-08-24-unscientific-liquidity-guide.html">Original</a>
    <h1>niftynei&#39;s Unscientific Liquidity Sales Guide</h1>
    
    <div id="readability-page-1" class="page"><p>24 Aug 2022 <span>c.e.</span></p><div>
<p>This is a quick guide for things to consider when you&#39;re looking to sell inbound channel capacity on the Lightning Network.</p>

<h2>Skip Tor</h2>

<p>Tor is unreliable for long-running connections, like the type that lightning channels depend on. This unreliability can lead to force closes. I personally dont buy any liquidity from nodes that I can&#39;t connect to over clearnet (IPv4 or IPv6).</p>

<h2>Be Mindful of Your Closing Costs</h2>

<p>A little known fact about lightning channels is that the peer that <em>opens</em> the channel is responsible for the onchain fees for the closing transaction, no matter which party closes it.</p>

<p>This means that if you sell someone liquidity and then are the one who <em>opens</em> the channel to the buyer, you&#39;re on the hook for the cost of closing that channel. This is hard to account for ahead of time as the feerate in the future is unpredictable.</p>

<p>Anything you pay to close the channel will cut into your &#34;profit&#34; from the sale of liquidity. Magma and I believe Pool(citation needed) have the seller of the liquidity initiate the channel open; the liquidity ad protocol is the only one that I know of where the channel <em>buyer</em> initiates the open (and thus bears the channel closing costs). Might be worth keeping in mind if you&#39;re looking to profit from selling deployment of capital to the network.</p>

<h2>Routing Fees vs Liquidity Sales</h2>

<p>There&#39;s two opportunities for earning &#34;return&#34; from capital deployed to the lightning network: being paid to allocate capital to a channel and being paid to route a payment.</p>

<p>The best of both worlds would be getting paid to put money into a channel and then also collecting fees to route that capital (preferrably a few times, back and forth).</p>

<p>Some channel operators charge zero for routing but will sell you inbound liquidity. These operators are basically getting pre-paid for the routing of that money to you. This is probably a better deal than not getting paid for that capital at all. Note that this strategy means that you&#39;d probably prefer to have your capital available to be re-purchased rather than in a channel for a long duration, given that you&#39;re not going to get paid for capital in channels with &#34;expired&#34; leases. In fact, it&#39;s probably a good deal for you if you&#39;re not responsible for opening this channel, and thus don&#39;t have to pay any closing costs for it.</p>

<p>Buyer beware here, eh.</p>

<h2>On-Chain vs In-Channel Liquidity</h2>

<p>Zmn raised a point recently that when considering how to implement liquidity ads into CLBoss (Core-Lightning&#39;s auto-channel manager &#34;AI&#34; bot plugin) that there&#39;s an <em>opportunity cost</em> associated with leaving funds on-chain with the hope that someone might buy them.</p>

<p>The logic goes a little something like this: money in a channel might be routed. This will earn you routing fees.</p>

<p>Money on-chain (not in  a channel) might be purchased as in-bound for a new channel. But it can&#39;t be routed through while it&#39;s waiting to be purchased.</p>

<p>How do you balance the opportunity to sell liquidity into a channel with the opportunity to be paid to route a payment? This is a tricky question which probably is different for every node, depending on your connectivity and the routes you&#39;ve got liquidity on.</p>

<p>Note here that <a href="https://github.com/lightning/bolts/pull/863">splicing</a> should make a big difference in terms of figuring out how to balance this -- it should allow you to dynamically move capital out of a channel into a new one whenever someone asks to buy liquidity from you. Of course, the algorithm which decides which capital is worth re-deploying is still an open problem, but at least you don&#39;t have to decide how much liquidity to keep <em>out</em> of channels now, rather you just have to decide <em>which</em> channels to resize (if any).  This will hopefully be out on CLN soon, so get your best capital opportunity estimation equations ready.</p>

</div></div>
  </body>
</html>
