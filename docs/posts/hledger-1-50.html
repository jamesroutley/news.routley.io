<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/simonmichael/hledger/releases/tag/1.50">Original</a>
    <h1>Hledger 1.50</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><details>
<summary>
<h2>Release notes</h2>
</summary>
<p><strong>Better transaction balancing, include improvements, auto posting account interpolation, csv data commands, import archiving, timeclock improvements, fixes</strong></p>
<h3>hledger 1.50</h3>
<p>Breaking changes</p>
<ul>
<li>
<p>Transaction balancing is now done in a more robust way, using local precisions only (like Ledger) <a href="https://github.com/simonmichael/hledger/issues/2402" data-hovercard-type="pull_request" data-hovercard-url="/simonmichael/hledger/pull/2402/hovercard">#2402</a>.</p>
<p>Now, a transaction is required to balance using the precisions in its journal entry only.</p>
<p>In practice this requires journal entries to be more accurate, and you will probably need to fix some old entries.</p>
<ul>
<li>reduce the amounts&#39; precision (use fewer decimal digits, so a lower balancing precision is inferred)</li>
<li>make the amounts more accurate (use better decimal digits, so the amounts sum to zero more closely)</li>
<li>or (easiest) add an amountless &#34;expenses:rounding&#34; posting (this is not a cheat, it&#39;s a more accurate record of what your bank/broker is doing).</li>
</ul>
<p>You can also keep the old transaction-balancing behaviour with <code>--txn-balancing=old</code>, for now.</p>
<p>The old behaviour could allow small remainders to accumulate over time,</p>
<div data-snippet-clipboard-copy-content="hledger bal cur:\\$ -c &#39;$1.000000000000&#39; | grep -E &#39;\...0*[1-9]&#39;"><pre><code>hledger bal cur:\\$ -c &#39;$1.000000000000&#39; | grep -E &#39;\...0*[1-9]&#39;
</code></pre></div>
<p>(show $ account balances, with many decimals, which have a non-zero decimal in the 3rd place or beyond)</p>
</li>
<li>
<p>Timeclock format has had various changes:</p>
<ul>
<li>Timeclock syntax and parsing is now more robust (when not using --old-timeclock):
<ul>
<li>Semicolon always starts a comment (and timeclock account names may not include semicolons).</li>
<li>Trailing spaces are ignored.</li>
<li>Clock-ins now require an account name.</li>
<li>Clock-outs now can have a comment and tags.</li>
<li>Timeclock entries are processed in parse order.</li>
</ul>
</li>
<li>Some order-related bugs in 1.43 have been fixed.</li>
<li>Concurrent/overlapping sessions are now fully supported, even if they have the same account name.</li>
<li>The timeclock doc has been rewritten.</li>
<li>The --old-timeclock hidden flag has been renamed, documented, and now also affects included files.</li>
</ul>
</li>
<li>
<p>Some edge cases in balance report behaviour were changed for internal consistency:</p>
<ul>
<li>--declared now treats parent accounts consistently.</li>
<li>--flat --empty now ensures that implied accounts with no postings are not displayed,</li>
</ul>
</li>
<li>
<p>hledger now requires at least GHC 9.6 (and base 4.18), to ease maintenance.</p>
</li>
</ul>
<p>Fixes</p>
<ul>
<li>
<p>Paging long output no longer gives an error when <code>LESS</code> is undefined and</p>
</li>
<li>
<p>The <code>all:</code> query now requires at least one posting to match.</p>
</li>
<li>
<p>When using journal format&#39;s <code>include</code> directive, several kinds of</p>
</li>
<li>
<p>In CSV <code>if</code> rules, match group references like <code>\1</code> no longer get confused</p>
</li>
<li>
<p><code>add</code>, <code>commodities</code>, and <code>diff</code> now support the --conf and -n/--no-conf flags,</p>
</li>
<li>
<p>On Windows machines, the <code>add</code> command now properly shows green prompts instead of ANSI codes.</p>
</li>
<li>
<p>Balance reports now properly show the historical balance even when the report period is empty.</p>
</li>
<li>
<p>Balance reports&#39; csv output, and the <code>balance --budget</code> report, now respect the --summary-only flag.</p>
</li>
<li>
<p>The <code>demo</code> command no longer mentions <code>-- ASCIINEMAOPTS</code> in help (that longer works).</p>
</li>
<li>
<p><code>hledger help -m TOPIC</code> or <code>hledger help -i TOPIC</code> now show the help for TOPIC, as intended.</p>
</li>
<li>
<p>Since hledger 1.32.1, the <code>import</code> command, when importing multiple files at once,</p>
</li>
</ul>
<p>Features</p>
<ul>
<li>
<p>CSV rules files can now run a shell command to clean the data:</p>
<div data-snippet-clipboard-copy-content="# read the latest foo*.csv file, and replace &#34;USD&#34; with &#34;$&#34;
source foo*.csv | sed -e &#39;s/USD/$/g&#39;"><pre><code># read the latest foo*.csv file, and replace &#34;USD&#34; with &#34;$&#34;
source foo*.csv | sed -e &#39;s/USD/$/g&#39;
</code></pre></div>
<p>or to generate the data:</p>
<div data-snippet-clipboard-copy-content="# fetch JSON from simplefin.org, then transform it to CSV
source | simplefinjson | simplefincsv"><pre><code># fetch JSON from simplefin.org, then transform it to CSV
source | simplefinjson | simplefincsv
</code></pre></div>
<p>Whenever hledger runs one of these commands, it will echo the command on stderr.</p>
</li>
<li>
<p>The <code>import</code> command can now automatically archive imported CSV data files,</p>
<p>This and the previous feature can simplify file management and reduce the need for support scripts.</p>
</li>
</ul>
<p>Improvements</p>
<ul>
<li>
<p>In command line help, flag group headings have been simplified.</p>
</li>
<li>
<p>When given both an unknown command and an unknown flag, hledger now gives</p>
</li>
<li>
<p>A long standing awkwardness with addon commands has been solved:</p>
</li>
<li>
<p>In smart dates and period expressions, quarter syntax like <code>2025q1</code> or <code>Q2</code> is now fully supported.</p>
</li>
<li>
<p>In end-value reports where the end date is unspecified, market prices</p>
</li>
<li>
<p>A <code>tag:</code> query with the <code>accounts</code> command now only matches account tags, not posting tags.</p>
<div data-snippet-clipboard-copy-content="account a  ; t:

2025-01-01
    a          1
    b         -1  ; t:"><pre><code>account a  ; t:

2025-01-01
    a          1
    b         -1  ; t:
</code></pre></div>
</li>
<li>
<p>Journal format&#39;s <code>include</code> directive now has more robust and convenient glob patterns:</p>
<ul>
<li><code>**</code> can match both directories and filenames</li>
<li><code>**</code> now automatically ignores anything under dotted directories, like .git/, foo/.secret/, etc.</li>
<li>Glob patterns with wildcards now automatically exclude the current file.</li>
</ul>
</li>
<li>
<p><code>include</code>&#39;s error messages and debug messages have been improved.</p>
</li>
<li>
<p>Journal format&#39;s auto posting rules can now use <code>%account</code> to insert the account name</p>
</li>
<li>
<p>The <code>aregister</code> command no longer abbreviates account names</p>
</li>
<li>
<p>The <code>commodities</code>, <code>payees</code> and <code>tags</code> commands now have --used/--declared/--undeclared/--unused flags, like <code>accounts</code>.</p>
</li>
<li>
<p>The <code>import</code> command now shows info messages on stderr, not stdout.</p>
</li>
<li>
<p>The <code>setup</code> command&#39;s output has been improved.</p>
</li>
</ul>
<p>Docs</p>
<ul>
<li>add: clarify that add is for journal format only</li>
<li>addon commands: edits, drop <code>--</code> argument from all examples <a href="https://github.com/simonmichael/hledger/issues/458" data-hovercard-type="issue" data-hovercard-url="/simonmichael/hledger/issues/458/hovercard">#458</a></li>
<li>areg: clarification</li>
<li>bin: README updates</li>
<li>COMMANDS: mention general options</li>
<li>completions: README updates</li>
<li>config files: no longer experimental</li>
<li>csv: date-format: mention lack of support for local time formats <a href="https://github.com/simonmichael/hledger/issues/1874" data-hovercard-type="issue" data-hovercard-url="/simonmichael/hledger/issues/1874/hovercard">#1874</a></li>
<li>csv: source, archive: rewrite, add examples</li>
<li>Depth: fix typo</li>
<li>github release docs: simplify install commands</li>
<li>import: use windows-compatible quotes in watchexec example</li>
<li>include directive: update docs; clarify effect, glob limitations</li>
<li>note fish LEDGER_FILE setup</li>
<li>options: mention that flag+value can&#39;t combine with other flags <a href="https://github.com/simonmichael/hledger/issues/2059" data-hovercard-type="issue" data-hovercard-url="/simonmichael/hledger/issues/2059/hovercard">#2059</a></li>
<li>print: improve --location help</li>
<li>smart dates: fix typo</li>
</ul>
<p>Examples</p>
<ul>
<li>CSV rules for Eternl cryptocurrency wallet</li>
<li>VAT example</li>
</ul>
<p>Scripts/addons</p>
<ul>
<li>renamed paypaljson2csv to paypaljson</li>
<li>simplefinjson, simplefincsv: new helpers for downloading/converting data from simplefin.org bank aggregator</li>
</ul>
<h3>hledger-ui 1.50</h3>
<p>Breaking changes</p>
<ul>
<li>hledger now requires at least GHC 9.6 (and base 4.18), to ease maintenance.</li>
</ul>
<p>Improvements</p>
<ul>
<li>Use hledger 1.50</li>
</ul>
<h3>hledger-web 1.50</h3>
<p>Breaking changes</p>
<ul>
<li>hledger now requires at least GHC 9.6 (and base 4.18), to ease maintenance.</li>
</ul>
<p>Fixes</p>
<ul>
<li>
<p>The register chart is no longer hidden when the window is narrow.</p>
</li>
<li>
<p>Dragging on the register chart now selects date ranges more accurately.</p>
</li>
</ul>
<p>Improvements</p>
<ul>
<li>Use hledger 1.50</li>
</ul>
<h3>project changes 1.50</h3>
<p>Doc updates</p>
<ul>
<li>FINANCE</li>
<li>ISSUES</li>
<li>REGRESSIONS</li>
<li>RELEASING</li>
<li>SCHEDULE &amp; <code>just schedule</code> script</li>
</ul>
<p>Website</p>
<ul>
<li>fix the &#34;edit this page&#34; link</li>
<li>redirects: handle more old pages; fix some old redirects to #FMT-format; stop redirecting /timeclock, /timedot, /timedot.html</li>
<li>set up a github issue template clarifying this repo&#39;s scope</li>
<li>shortcut urls: release.hledger.org, nightly.hledger.org, regressions.hledger.org; readyprs.hledger.org excludes PRs with needs-* labels</li>
<li>sidebar: reorganise</li>
<li>sidebar: leave all links visible to avoid popping</li>
<li>sidebar: avoid duplicate links, they&#39;re no longer allowed</li>
<li>sidebar: link to the current release&#39;s manuals, not the dev version&#39;s</li>
<li>Beancount: edits, new conversion tips</li>
<li>Docs: consolidate all user docs onto a single Docs page</li>
<li>Editors: more vs code extensions, more emacs calc notes</li>
<li>Export: updates</li>
<li>FAQ: updates</li>
<li>Hledger By Example: start a new progressive &#34;book&#34;, with 18 pages</li>
<li>Tutorial: hledger basics -&gt; to Tutorial: hledger add</li>
<li>Home: new, shorter home page content</li>
<li>Home: show a quote/testimonial, updating on the hour</li>
<li>Investments: fix link (<a data-error-text="Failed to load title" data-id="3287646354" data-permission-text="Title is private" data-url="https://github.com/simonmichael/hledger/issues/2436" data-hovercard-type="issue" data-hovercard-url="/simonmichael/hledger/issues/2436/hovercard" href="https://github.com/simonmichael/hledger/issues/2436">#2436</a>)</li>
<li>Invoicing: fix kairos link</li>
<li>Ledger: edits</li>
</ul>
<p>Infrastructure/Misc</p>
<ul>
<li>hledger now requires at least GHC 9.6 (and base 4.18), to ease maintenance.</li>
<li>bump default build, tools to lts 24.8 / ghc 9.10.2</li>
<li>docker: sync Docker GHC version with Stack configuration, update dependencies, and replace deprecated Dockerfile syntax. (Lukas Fleischer)</li>
<li>github workflows improvements</li>
<li>tool updates: checkembeddedfiles, devtag, nightly-push, nightlytag, relver, test</li>
<li>update github issue templates</li>
</ul>
<h3>credits 1.50</h3>
<p>Simon Michael (<a data-hovercard-type="user" data-hovercard-url="/users/simonmichael/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/simonmichael">@simonmichael</a>),</p>
</details>
<details>
<summary>
<h2>Install</h2>
</summary>
<p>For all install options, see <a href="https://hledger.org/install" rel="nofollow">hledger.org: Install</a>.</p>
<p>Or you can install up to date binaries from this page, by following the appropriate instructions below.</p>


<summary>
<h3>All platforms</h3>
</summary>
<p>If you have <a href="https://github.com/zyedidia/eget">eget</a>, that&#39;s a convenient way to download the right binaries for your machine:</p>
<div data-snippet-clipboard-copy-content="eget simonmichael/hledger --all"><pre><code>eget simonmichael/hledger --all
</code></pre></div>
<p>Otherwise:</p>


<summary>
<h3>GNU/Linux, 64-bit Intel</h3>
</summary>
<p>At the command line:</p>
<div data-snippet-clipboard-copy-content="curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-linux-x64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50"><pre><code>curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-linux-x64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50
</code></pre></div>


<summary>
<h3>Mac, 64-bit ARM or Intel</h3>
</summary>
<p>In a terminal window (don&#39;t download the binaries with your web browser, they won&#39;t get authorised):</p>

<p>On ARM macs:</p>
<div data-snippet-clipboard-copy-content="curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-mac-arm64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50"><pre><code>curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-mac-arm64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50
</code></pre></div>
<p>On Intel macs:</p>
<div data-snippet-clipboard-copy-content="curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-mac-x64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50"><pre><code>curl -fLOC- https://github.com/simonmichael/hledger/releases/download/1.50/hledger-mac-x64.tar.gz | tar -xzv -f- -C/usr/local/bin hledger hledger-ui hledger-web
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50
</code></pre></div>


<summary>
<h3>Windows, 64-bit ARM or Intel</h3>
</summary>
<p>In a powershell window (press <code>WINDOWS-R</code>, <code>powershell</code>, <code>ENTER</code>):</p>
<div data-snippet-clipboard-copy-content="cd ~
curl https://github.com/simonmichael/hledger/releases/download/1.43.2/hledger-windows-x64.zip -OutFile hledger-windows-x64.zip
Expand-Archive hledger-windows-x64.zip -Force -DestinationPath AppData\Roaming\local\bin
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50"><pre><code>cd ~
curl https://github.com/simonmichael/hledger/releases/download/1.43.2/hledger-windows-x64.zip -OutFile hledger-windows-x64.zip
Expand-Archive hledger-windows-x64.zip -Force -DestinationPath AppData\Roaming\local\bin
hledger --version; hledger-ui --version; hledger-web --version    # should show 1.50
</code></pre></div>



<summary>
<h3>Windows 7, 64-bit Intel</h3>
</summary>
<p>These instructions have not been tested recently, please <a href="https://hledger.org/support" rel="nofollow">let us know</a> if they work for you:</p>
<ul>
<li>click hledger-windows-x64.zip below</li>
<li>choose Open with Windows Explorer, OK</li>
<li>click Extract all files</li>
<li>choose a destination folder - ideally one that appears in <code>echo %PATH%</code>, like <code>C:\Windows</code> (though that one will require administrator permission); otherwise, your home directory (<code>C:\Users\YOURNAME</code>)</li>
<li>check &#34;Show extracted files when complete&#34;</li>
<li>click Extract, wait for the destination folder to open</li>
<li>find the hledger, hledger-web icons (if you extracted to <code>\Windows</code>, you&#39;ll need to scroll down)</li>
<li>for each icon: double-click, uncheck &#34;Always ask before opening this file&#34;, click Run</li>
<li>close those Explorer windows</li>
<li>open a command window (press Windows-r, type CMD, press enter)</li>
<li><code>hledger --version; hledger-ui --version; hledger-web --version</code>    should show 1.50</li>
<li><code>echo # &gt;&gt; .hledger.journal</code> to ensure a default journal file exists. (Important: the doubled <strong>&gt;&gt;</strong> is needed to avoid overwriting existing data.)</li>
</ul>
<p>Problems:</p>
<ul>
<li>Starting hledger by double-clicking its icon won&#39;t work because it needs arguments; run it from the command window instead.</li>
<li>Starting hledger-web by double-clicking its icon may fail eg because Explorer&#39;s command window is too small;</li>
<li>hledger or hledger-web may fail to run if there is not enough memory available.</li>
</ul>

<h3>Next steps</h3>
<p>Once installed, run <code>hledger</code>, and perhaps read <a href="https://hledger.org/#quick-start" rel="nofollow">hledger.org: Quick start</a>.</p>
</details></div></div>
  </body>
</html>
