<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://peppe.rs/posts/plain_text_journaling/">Original</a>
    <h1>Plain text journaling in Vim</h1>
    
    <div id="readability-page-1" class="page"><div>
            <p>I cobbled together a journaling system with {neo,}vim, coreutils and
<a href="http://www.fresse.org/dateutils">dateutils</a>. This system is
loosely based on <a href="https://www.rydercarroll.com/">Ryder
Caroll’s</a> Bullet Journal method.</p>
<p><a href="https://u.peppe.rs/SpF.png"><img src="https://u.peppe.rs/SpF.png"/></a></p>
<h3 id="the-format">The format</h3>
<p>The journal for a given year is a directory:</p>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> ls journal/</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span>2022/</span>   2023/</span></code></pre></div>
<p>In each directory are 12 files, one for each month of the year,
numbered like so:</p>
<div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> ls journal/2023/</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span>01</span>  02  03  04  05  06  07  08  09  10  11  12</span></code></pre></div>
<p>We can now begin writing stuff down:</p>

<p>Every month must start with a calendar of course, fill that in
with:</p>
<pre><code>:read !cal -m</code></pre>
<p>Your entry for January might look like this:</p>
<div id="cb5"><pre><code><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> cat journal/2023/01</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span>January</span> 2023</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span>Mo</span> Tu We Th Fr Sa Su</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                   <span>1</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a> <span>2</span>  3  4  5  6  7  8</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a> <span>9</span> 10 11 12 13 14 15</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span>16</span> 17 18 19 20 21 22</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span>23</span> 24 25 26 27 28 29</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span>30</span> 31</span></code></pre></div>
<p>I prefer planning week by week, as opposed to creating a task-list
every day, here’s what I have for the first couple of weeks:</p>
<pre><code>    January 2023
Mo Tu We Th Fr Sa Su
                   1
 2  3  4  5  6  7  8
 9 10 11 12 13 14 15
16 17 18 19 20 21 22
23 24 25 26 27 28 29
30 31


week 1

done apply leaves
done dload boarding pass
moved reply to dan


week 2

todo reply to dan
todo pack bags
done travel insurance
todo weigh luggage</code></pre>
<p>I start the week by writing a header and each item that week is
placed on its own line. The items are prefixed with a <code>todo</code>
or a <code>done</code> signifier.</p>
<h3 id="form-over-function">Form over function</h3>
<p>Right off the bat, the signifiers look very noisy, Even more so once
we start introducing variety (I use “event”, “note” and “moved”):</p>
<pre><code>week 1

todo apply leaves
done dload boarding pass
todo reply to dan
event fr trip
note weight 68.6</code></pre>
<p>We can clean this up with “abbreviations”
(<code>:h abbreviations</code>):</p>
<pre><code>:iabbrev todo ·
:iabbrev done ×</code></pre>
<p>Now, typing this:</p>
<pre><code>todo apply leaves</code></pre>
<p>Automatically inserts:</p>
<pre><code>· apply leaves</code></pre>
<p>You can use <code>x</code> and <code>o</code> as well, but
<code>×</code> (U+00D7, MULTIPLICATION SIGN) and <code>·</code> (U+00B7,
MIDDLE DOT) are more … <em>gourmet</em>.</p>
<p>The other signifiers I use are:</p>
<ul>
<li><code>-</code> for note</li>
<li><code>o</code> for event</li>
<li><code>&gt;</code> for moved.</li>
</ul>
<p>Nit #2 is the lack of order. We can employ vim to introduce grouping
and sorting. Select the list of entries for this week:</p>
<pre><code>vip         &#34; line-wise select inner paragraph
:&#39;&lt;,&#39;&gt;sort  &#34; the markers &#39;&lt; and &#39;&gt; are automatically inserted,
            &#34; they mark the start and end of the selection</code></pre>
<p>We end up with:</p>
<pre><code>week 1

· apply leaves
· reply to dan
× dload boarding pass</code></pre>
<p>The lines are grouped by their signifiers, segregating todo items
from completed items. Luckily, MIDDLE DOT is lesser than MULTIPLICATION
SIGN, so todo items are placed at the top. The same goes for
<code>o</code> and <code>x</code> symbols, either set of signifiers will
result in the same sorting order.</p>
<p>We can shorten this select-paragraph-invoke-sort dance by setting the
<code>formatprg</code> variable:</p>
<pre><code>:set formatprg=sort\ -V</code></pre>
<p>Now, hitting <code>gqip</code> should automatically group and sort
the items for the week under the cursor, moving todo items to the top.
Finding signifier glyphs that suit your sorting preference is a fun
exercise.</p>
<h3 id="syntax-highlighting">Syntax highlighting</h3>
<p>Adding color to items introduces another layer of visual distinction.
In truth, I like to deck it out just because.</p>
<p>First, create a few syntax groups:</p>
<pre><code>:syntax match JournalAll /.*/        &#34; captures the entire buffer
:syntax match JournalDone /^×.*/     &#34; lines containing &#39;done&#39;  items: ×
:syntax match JournalTodo /^·.*/     &#34; lines containing &#39;todo&#39;  items: ·
:syntax match JournalEvent /^o.*/    &#34; lines containing &#39;event&#39; items: o
:syntax match JournalNote /^- .*/    &#34; lines containing &#39;note&#39;  items: -
:syntax match JournalMoved /^&gt;.*/    &#34; lines containing &#39;moved&#39; items: &gt;</code></pre>
<p>Add highlights to each group:</p>
<pre><code>:highlight JournalAll    ctermfg=12   &#34; bright black
:highlight JournalDone   ctermfg=12   &#34; bright black
:highlight JournalEvent  ctermfg=6    &#34; cyan
:highlight JournalMoved  ctermfg=5    &#34; magenta
:highlight JournalNote   ctermfg=3    &#34; yellow</code></pre>
<p>In my terminal, this is rendered like so:</p>
<p><a href="https://u.peppe.rs/Du6.png"><img src="https://u.peppe.rs/Du6.png"/></a></p>
<h3 id="habit-tracking">Habit tracking</h3>
<p>While this is not a part of my journaling system anymore, a few
headers and an awk script is all it takes to track habits. My weekly
entries would include a couple of habit headers like so:</p>
<pre><code>week 1 --------------

× wake up on time
× water the plants

spend 7.5 7 10
---------------------


week 2 --------------

· make the bed
· go to bed

spend 30 2.75 6
---------------------</code></pre>
<p>Here, under the <code>spend</code> header in week 1, are a list of
expenditures accumulated over the week. The monthly spend is calculated
with this awk script:</p>
<div id="cb17"><pre><code><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span>BEGIN</span> <span>{</span>spend<span>=</span><span>0</span><span>;}</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span>/</span><span>spend</span><span>/</span> <span>{</span><span>for</span><span>(</span>i<span>=</span><span>1</span><span>;</span>i<span>&lt;=</span><span>$NF</span><span>;</span>i<span>++)</span> spend<span>+=</span><span>$i</span><span>;}</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span>END</span> <span>{</span> <span>printf</span> spend <span>&#34;eur&#34;</span><span>}</span></span></code></pre></div>
<p>And invoked like so:</p>
<pre><code>λ awk -f spend.awk journal/2023/01
63.25eur</code></pre>
<h3 id="reflection">Reflection</h3>
<p>Journaling is not just about planning what is to come, but also
reflecting on what has passed. It would make sense to simultaneously
look at the past few weeks’ entries while making your current one. To
open multiple months of entries at the same time:</p>
<pre><code>λ vim -O journal/2023/0{1,2,3}</code></pre>
<p>Opens 3 months, side-by-side, in vertical splits:</p>
<pre><code>JANUARY ------------  │  FEBRUARY -----------  │  MARCH --------------
                      │                        │
Mo Tu We Th Fr Sa Su  │  Mo Tu We Th Fr Sa Su  │  Mo Tu We Th Fr Sa Su
                   1  │         1  2  3  4  5  │         1  2  3  4  5
 2  3  4  5  6  7  8  │   6  7  8  9 10 11 12  │   6  7  8  9 10 11 12
 9 10 11 12 13 14 15  │  13 14 15 16 17 18 19  │  13 14 15 16 17 18 19
16 17 18 19 20 21 22  │  20 21 22 23 24 25 26  │  20 21 22 23 24 25 26
23 24 25 26 27 28 29  │  27 28                 │  27 28 29 30 31
30 31                 │                        │
                      │                        │
                      │                        │
WEEK 1 -------------  │  WEEK 1 -------------  │  WEEK 1 -------------
                      │                        │
&gt; latex setup         │  &gt; forex               │  - weight: 64
× make the bed        │  × clean shoes         │  &gt; close sg-pr
× 03: dentist         │  × buy clothes         │  × facewash
× integrate tsg       │  × draw                │  × groceries
                      │                        │
                      │                        │
WEEK 2 -------------  │  WEEK 2 -------------  │  WEEK 2 -------------
                      │                        │
× latex setup         │  - viral fever         │  &gt; close sg-pr
× send invoice        │  × forex               │  × plan meet
× stack-graph pr      │  × activate sim        │  × sg storage
                      │  × bitlbee             │</code></pre>
<h3 id="reducing-friction">Reducing friction</h3>
<p>Journaling already requires a solid amount of discipline and
consistency. The added friction of typing
<code>vim journal/$CURRENT_YEAR/$CURRENT_MONTH</code> each time is doing
no favors.</p>
<p>To open the current month based on system time:</p>

<p>To open all the months within a 2 month window of today, is a little
trickier. The command we wish to generate is (if today is 2023/12):</p>
<div id="cb22"><pre><code><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> vim <span>-O</span> 2023/10 2023/11 2023/12 2024/01 2024/02</span></code></pre></div>
<p>And that is where <code>dateseq</code> from <a href="http://www.fresse.org/dateutils">dateutils</a> comes in handy, for
example:</p>
<div id="cb23"><pre><code><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> dateseq 2012-02-01 2012-03-01</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span>2012-02-01</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span>2012-02-02</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span>2012-02-03</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span>...</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span>2012-02-28</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span>2012-02-29</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span>2012-03-01</span></span></code></pre></div>
<p>This script opens all months within a 2 month window of today:</p>
<div id="cb24"><pre><code><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span>λ</span> vim <span>-O</span> <span>$(</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span>dateseq</span> <span>\</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>      <span>&#34;</span><span>$(</span><span>date</span> <span>--date</span> <span>&#34;2 months ago&#34;</span> +%Y/%m<span>)</span><span>&#34;</span> <span>\</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>      <span>&#34;</span><span>$(</span><span>date</span> <span>--date</span> <span>&#34;2 months&#34;</span> +%Y/%m<span>)</span><span>&#34;</span> <span>\</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      <span>-i</span> %Y/%m <span>\</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span>-f</span> %Y/%m</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span>)</span></span></code></pre></div>
<h3 id="fin">Fin</h3>
<p>You can find a sample vimrc file here: <a href="https://git.peppe.rs/cli/journal/tree">cli/journal</a>, along with
a nix flake file to kick things off.</p>
<p>Plain text journaling can be just as much fun as a pen and paper.
Throw in some ASCII art for each month, use swankier signifiers, or
louder syntax highlighting. Don’t expect forgiveness from org-mode users
though.</p>
<p><a href="https://u.peppe.rs/ZCK.png"><img src="https://u.peppe.rs/ZCK.png"/></a></p>

          </div></div>
  </body>
</html>
