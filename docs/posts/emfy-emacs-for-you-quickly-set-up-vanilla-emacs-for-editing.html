<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/susam/emfy">Original</a>
    <h1>Emfy: Emacs for You – Quickly set up vanilla Emacs for editing</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">This project provides a tiny <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> file to set up Emacs quickly.
This document provides a detailed description of how to set it up and
get started with Emacs.</p>
<p dir="auto"><a href="https://github.com/susam/emfy/blob/main/.emacs"><img src="https://camo.githubusercontent.com/f92465c2cdbd19915f8480b7f299028edad3ddd8c18d4619f374a74dfdc74b9f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f766965772d7e2532662e656d6163732d627269676874677265656e" alt="View Source" data-canonical-src="https://img.shields.io/badge/view-~%2f.emacs-brightgreen"/></a>
<a href="https://github.com/susam/emfy/blob/main/LICENSE.md"><img src="https://camo.githubusercontent.com/802b8ae2ef4d914b4aab1e82ecab8be625524dee33115ac30c1083004cef9e30/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d253233336561363339" alt="MIT License" data-canonical-src="https://img.shields.io/badge/license-MIT-%233ea639"/></a>
<a href="https://twitter.com/susam" rel="nofollow"><img src="https://camo.githubusercontent.com/a3c345f2803f61dedd466a56d34b0c069ced469fbbb410fb919e7348e31e1432/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f747769747465722d253430737573616d2d253233316461316632" alt="Twitter" data-canonical-src="https://img.shields.io/badge/twitter-%40susam-%231da1f2"/></a></p>
<p dir="auto">Further this project also provides a tiny convenience command named
<a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a> to start Emacs server and edit files using Emacs server. This
helps in using Emacs efficiently. This script and its usage is
explained in detail later in the <a href="#emacs-server">Emacs Server</a> and
<a href="#emacs-launcher">Emacs Launcher</a> sections. Here is how the Emacs
environment is going to look after setting up this project:</p>
<p dir="auto"><a href="https://i.imgur.com/Bp562nt.png" rel="nofollow"><img src="https://camo.githubusercontent.com/5d0a5f6438b0151e158e7f8d5cbc1d7ce83117f94663f42231c5df489a2dfad9/68747470733a2f2f692e696d6775722e636f6d2f42703536326e742e706e67" alt="Screenshot of Emacs" data-canonical-src="https://i.imgur.com/Bp562nt.png"/></a></p>
<p dir="auto">If you are already comfortable with Emacs and only want to understand
the content of <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> or <a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a>, you can skip ahead directly to
the <a href="#line-by-line-explanation">Line-by-Line Explanation</a> section that
describes every line of these files in detail.</p>
<h2 dir="auto"><a id="user-content-contents" aria-hidden="true" href="#contents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contents</h2>
<ul dir="auto">
<li><a href="#who-is-this-for">Who Is This For?</a></li>
<li><a href="#what-about-programming-in-cl">What About Programming in CL?</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#step-by-step-usage">Step-by-Step Usage</a>
<ul dir="auto">
<li><a href="#use-emacs">Use Emacs</a></li>
<li><a href="#use-paredit">Use Paredit</a></li>
<li><a href="#execute-emacs-lisp-code">Execute Emacs Lisp Code</a></li>
<li><a href="#use-rainbow-delimiters">Use Rainbow Delimiters</a></li>
</ul>
</li>
<li><a href="#line-by-line-explanation">Line-by-Line Explanation</a>
<ul dir="auto">
<li><a href="#tweak-ui-elements">Tweak UI Elements</a></li>
<li><a href="#customize-theme">Customize Theme</a></li>
<li><a href="#find-files-and-switch-buffers-efficiently">Find Files and Switch Buffers Efficiently</a></li>
<li><a href="#show-stray-whitespace">Show Stray Whitespace</a></li>
<li><a href="#let-single-space-after-period-end-sentence">Let Single Space After Period End Sentence</a></li>
<li><a href="#indentation">Indentation</a></li>
<li><a href="#highlight-parentheses">Highlight Parentheses</a></li>
<li><a href="#install-packages">Install Packages</a></li>
<li><a href="#add-hooks">Add Hooks</a></li>
<li><a href="#colorful-parentheses">Colorful Parentheses</a></li>
<li><a href="#custom-command-and-key-sequence">Custom Command and Key Sequence</a></li>
<li><a href="#emacs-server">Emacs Server</a></li>
<li><a href="#emacs-launcher">Emacs Launcher</a></li>
</ul>
</li>
<li><a href="#opinion-references">Opinion References</a></li>
<li><a href="#channels">Channels</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 dir="auto"><a id="user-content-who-is-this-for" aria-hidden="true" href="#who-is-this-for"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Who Is This For?</h2>
<p dir="auto">Are you an absolute beginner to Emacs? Are you so new to Emacs that
you do not even have <code>~/.emacs</code> or <code>~/.emacs.d</code> on your file system?
Have you come across recommendations to use starter kits like Doom
Emacs, Spacemacs, etc. but then you wondered if you could use vanilla
Emacs and customize it slowly to suit your needs without having to
sacrifice your productivity in the initial days of using Emacs? Do you
also want your Emacs to look sleek from day zero? If you answered
&#34;yes&#34; to most of these questions, then this project is for you.</p>
<p dir="auto">The <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> file in this project provides a quick way to get
started with setting up your Emacs environment. This document explains
how to do so in a step-by-step manner. This document also explains the
content of <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> and <a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a> in a line-by-line manner.</p>
<h2 dir="auto"><a id="user-content-what-about-programming-in-cl" aria-hidden="true" href="#what-about-programming-in-cl"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What About Programming in CL?</h2>
<p dir="auto">This section is a little note for aspiring Common Lisp (CL)
programmers. If you do not care about Common Lisp programming, ignore
this section.</p>
<p dir="auto">For those who wish to use Emacs specifically for programming in CL,
please see <a href="https://github.com/susam/emacs4cl">Emacs4CL</a>. Emacs4CL is
similar to this project, however, Emacs4CL focusses primarily on
setting up a CL development environment with Emacs, SBCL, and SLIME,
as quickly as possible. This project, on the other hand, focusses only
on setting up a general purpose editing and programming environment.</p>
<p dir="auto">Once you have set up your CL development environment using Emacs4CL,
you can then come back to this project and pick more ideas and Emacs
Lisp code to enhance your Emacs setup from being a CL development
environment to being a more general purpose editing and programming
environment.</p>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<p dir="auto">This project provides a file named <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> that offers the
following features:</p>
<ul dir="auto">
<li>Disable some UI elements to provide a clean and minimal
look-and-feel.</li>
<li>Show current column number in the mode line.</li>
<li>Load a dark color theme named Wombat.</li>
<li>Customize the color theme to accentuate the cursor, search
matches, and comments with different shades of orange.</li>
<li>Enable and configure Ido mode to find files and switch buffers
efficiently.</li>
<li>Show trailing whitespace at the end of lines clearly.</li>
<li>Show trailing newlines at the end of buffer clearly.</li>
<li>Show missing newlines at the end of buffer clearly.</li>
<li>Use single spacing convention to end sentences.</li>
<li>Use spaces, not tabs, for indentation.</li>
<li>Configure indentation settings as per popular coding conventions.</li>
<li>Highlight matching parentheses.</li>
<li>Move auto-save files and backup files to a separate directory to
keep our working directories tidy.</li>
<li>Automatically install configured packages when Emacs starts for
the first time.</li>
<li>Install Markdown mode for convenient editing of Markdown files.</li>
<li>Install and configure Paredit for editing S-expressions
efficiently.</li>
<li>Install and configure Rainbow Delimiters to color parentheses by
their nesting depth level.</li>
<li>Provide a minimal example of a user-defined custom command and a
custom key sequence.</li>
<li>Start Emacs server automatically, so that terminal users can use
Emacs client to edit files with an existing instance of Emacs.</li>
</ul>
<p dir="auto">Additionally, this project also provides a convenience command named
<a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a> that is a thin wrapper around the <code>emacs</code> and <code>emacsclient</code>
commands. It offers the following features:</p>
<ul dir="auto">
<li>Start a new instance of Emacs when requested.</li>
<li>Open files in an existing Emacs server if a server is running
already.</li>
<li>Automatically start a new Emacs server if a server is not running
already.</li>
</ul>
<p dir="auto">All of these features along with every line of code that enables these
features are explained in the sections below.</p>
<h2 dir="auto"><a id="user-content-get-started" aria-hidden="true" href="#get-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Get Started</h2>
<p dir="auto">This section helps you to set up Emfy quickly and see what the end
result looks like. Perform the following steps to get started:</p>
<ol dir="auto">
<li>
<p dir="auto">Install Emacs.</p>
<p dir="auto">On macOS, enter the following command if you have
<a href="https://brew.sh" rel="nofollow">Homebrew</a>:</p>
<div data-snippet-clipboard-copy-content="brew install --cask emacs"><pre>brew install --cask emacs</pre></div>
<p dir="auto">On Debian, Ubuntu, or another Debian-based Linux system, enter the
following command:</p>
<div data-snippet-clipboard-copy-content="sudo apt-get install emacs"><pre><code>sudo apt-get install emacs
</code></pre></div>
<p dir="auto">For other environments, visit <a href="https://www.gnu.org/software/emacs/" rel="nofollow">https://www.gnu.org/software/emacs/</a>
to see how to install Emacs.</p>
</li>
<li>
<p dir="auto">Copy the Emacs initialization file <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> provided here to your
home directory. Here is an example <code>curl</code> command to do so:</p>
<div data-snippet-clipboard-copy-content="curl -L https://github.com/susam/emfy/raw/main/.emacs &gt;&gt; ~/.emacs"><pre>curl -L https://github.com/susam/emfy/raw/main/.emacs <span>&gt;&gt;</span> <span>~</span>/.emacs</pre></div>
</li>
<li>
<p dir="auto">Copy the Emacs launcher script <a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a> provided here to some
directory that belongs to your <code>PATH</code> variable. For example, here
are a few commands that download this script and places it in
the <code>/usr/local/bin/</code> directory:</p>
<div data-snippet-clipboard-copy-content="curl -L https://github.com/susam/emfy/raw/main/em &gt;&gt; /tmp/em
sudo mv /tmp/em /usr/local/bin/em
chmod +x /usr/local/bin/em"><pre>curl -L https://github.com/susam/emfy/raw/main/em <span>&gt;&gt;</span> /tmp/em
sudo mv /tmp/em /usr/local/bin/em
chmod +x /usr/local/bin/em</pre></div>
<p dir="auto">The usefulness of this launcher script will be explained in the
section <a href="#emacs-launcher">Emacs Launcher</a> later.</p>
</li>
<li>
<p dir="auto">Start Emacs:</p>

<p dir="auto">On macOS, you may receive the following error message in a dialog
box: &#39;“Emacs.app” can’t be opened because Apple cannot check it for
malicious software.&#39; To resolve this issue, go to Apple menu &gt;
System Preferences &gt; Security &amp; Privacy &gt; General and click &#39;Open
Anyway&#39;.</p>
<p dir="auto">It may take a minute or so for Emacs to start the very first time.
When it starts the first time with the new Emacs initialization
file obtained in the previous step, it installs the packages
specified in it. This is only a one-time activity. The next time you
start Emacs, it will start instantly. We will see how <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a>
takes care of it in the line-by-line guide later.</p>
</li>
</ol>
<p dir="auto">Now that your environment is setup, read the next section to learn how
to use this environment in more detail.</p>
<h2 dir="auto"><a id="user-content-step-by-step-usage" aria-hidden="true" href="#step-by-step-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Step-by-Step Usage</h2>
<h3 dir="auto"><a id="user-content-use-emacs" aria-hidden="true" href="#use-emacs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use Emacs</h3>
<p dir="auto">Emacs is a very powerful and extensible editor. It comes with over
10,000 built-in commands. A small section like this can barely scratch
the surface of Emacs. Yet, this section makes a modest attempt at
getting you started with Emacs and then provides more resources to learn
further. Perform the following steps to get started:</p>
<ol dir="auto">
<li>
<p dir="auto">Start Emacs:</p>

</li>
<li>
<p dir="auto">Within Emacs, enter the following command to open a file, say,
<code>hello.txt</code>:</p>

<p dir="auto">A new buffer to edit <code>hello.txt</code> is created. If a file with that
name already exists on your file system, then it loads the content
of the file into the buffer.</p>
<p dir="auto">Note that in the Emacs world (and elsewhere too), the
notation <code>C-</code> denotes the <kbd>ctrl</kbd> modifier key. Thus <code>C-x</code>
denotes <kbd>ctrl</kbd> + <kbd>x</kbd>.</p>
<p dir="auto">The notation <code>RET</code> denotes the <kbd>enter</kbd> or <kbd>return</kbd>
key.</p>
<p dir="auto">Typing consecutive <code>C-</code> key sequences can be optimized by pressing
and holding down the <kbd>ctrl</kbd> key, then typing the other
keys, and then releasing the <kbd>ctrl</kbd> key. For example, to
type <code>C-x C-f</code>, first press and hold down <kbd>ctrl</kbd>, then
type <kbd>x</kbd>, then type <kbd>f</kbd>, and then release
<kbd>ctrl</kbd>. In other words, think of <code>C-x C-f</code> as <code>C-(x f)</code>.
This shortcut works for other modifier keys too.</p>
</li>
<li>
<p dir="auto">Now type some text into the buffer. Type out at least 3-4 words. We
will need it for the next two steps.</p>
</li>
<li>
<p dir="auto">Move backward by one word with the following key sequence:</p>

<p dir="auto">Remember from the previous section that <code>M-</code> denotes the meta
modifier key. The above command can be typed with
<kbd>alt</kbd> + <kbd>b</kbd> or <kbd>option</kbd> + <kbd>b</kbd> or
<kbd>esc</kbd> <kbd>b</kbd>.</p>
<p dir="auto">If you face any issue with the <kbd>alt</kbd> key or the
<kbd>option</kbd> key, read <a href="https://www.emacswiki.org/emacs/MetaKeyProblems" rel="nofollow">Emacs Wiki: Meta Key
Problems</a>.</p>
</li>
<li>
<p dir="auto">Now move forward by one word with the following key sequence:</p>

</li>
<li>
<p dir="auto">The <code>C-g</code> key sequence cancels the current command. This can be used
when you mistype a command and want to start over or if you type a
command partially, then change your mind and then you want to cancel
the partially typed command. Try out these examples:</p>


</li>
<li>
<p dir="auto">Save the buffer to a file on the file system with this command:</p>

</li>
<li>
<p dir="auto">Quit Emacs:</p>

</li>
</ol>
<p dir="auto">Now you know how to start Emacs, open a file, save it, and quit. Improve
your Emacs knowledge further by taking the Emacs tutorial that comes
along with Emacs. In Emacs, type <code>C-h t</code> to start the tutorial.</p>
<p dir="auto">The key bindings to perform various operations like creating file,
saving file, quitting the editor, etc. may look arcane at first, but
repeated usage of the key bindings develops muscle memory soon and after
having used them for a few days, one does not even have to think about
them. The fingers do what the mind wants effortlessly due to muscle
memory.</p>
<p dir="auto">While you are getting used to the Emacs key bindings, keep this <a href="https://www.gnu.org/software/emacs/refcards/pdf/refcard.pdf" rel="nofollow">GNU
Emacs Reference Card</a> handy. Also, if you are using it in GUI
mode, then the menu options can be quite helpful. The menu options
contain frequently used operations. The option for each operation also
displays the key bindings that can be used to invoke the same operation.</p>
<h3 dir="auto"><a id="user-content-use-paredit" aria-hidden="true" href="#use-paredit"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use Paredit</h3>
<p dir="auto">Paredit helps in keeping parentheses balanced and also in performing
structured editing of S-expressions in Lisp code. It provides a powerful
set of commands to manipulate S-expressions in various ways. Perform the
following steps to get started with Paredit:</p>
<ol dir="auto">
<li>
<p dir="auto">Run Emacs:</p>

</li>
<li>
<p dir="auto">Open an Elisp source file:</p>

</li>
<li>
<p dir="auto">Type the following code only:</p>

<p dir="auto">At this point, Paredit should have inserted the two closing
parentheses automatically. The code should look like this:</p>

<p dir="auto">The cursor should be situated just after the parameter <code>x</code>. The
underbar shows where the cursor should be.</p>
</li>
<li>
<p dir="auto">Type the closing parentheses now. Yes, type it even if the closing
parenthesis is already present. The cursor should now skip over the
first closing parenthesis like this:</p>

<p dir="auto">Of course, there was no need to type the closing parenthesis because
it was already present but typing it out to skip over it is more
efficient than then moving over it with movement commands. This is,
in fact, a very nifty feature of Paredit. We can enter code with the
same keystrokes as we would without Paredit.</p>
</li>
<li>
<p dir="auto">Now type <code>enter</code> to create a new line just before the
last parenthesis. A newline is inserted like this:</p>

</li>
<li>
<p dir="auto">Now type only this:</p>

<p dir="auto">Again, Paredit would have inserted the closing parenthesis
automatically. The code should look like this now:</p>
<div data-snippet-clipboard-copy-content="(defun square (x)
  (* x x))
        -"><pre>(<span>defun</span> <span>square</span> (<span>x</span>)
  (<span>*</span> x x))
        <span>-</span></pre></div>
</li>
</ol>
<p dir="auto">There is a lot more to Paredit than this. To learn more, see <a href="http://danmidwood.com/content/2014/11/21/animated-paredit.html" rel="nofollow">The
Animated Guide to Paredit</a>.</p>
<p dir="auto">Note: While many Lisp programmers find Paredit very convenient and
powerful while manipulating S-expressions in Lisp code, there are a few
people who do not like Paredit because they find the Paredit behaviour
intrusive. See the <a href="#opinion-references">Opinion References</a> section for
more discussion on this topic.</p>
<h3 dir="auto"><a id="user-content-execute-emacs-lisp-code" aria-hidden="true" href="#execute-emacs-lisp-code"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Execute Emacs Lisp Code</h3>
<p dir="auto">The previous section shows how to write some Elisp code and how
Paredit helps in keeping the parentheses balanced. In this section, we
will see how to execute some Elisp code.</p>
<ol dir="auto">
<li>
<p dir="auto">Run Emacs:</p>

</li>
<li>
<p dir="auto">Open an Elisp source file:</p>

</li>
<li>
<p dir="auto">Enter the following code:</p>
<div data-snippet-clipboard-copy-content="(defun square (x)
  (* x x))"><pre>(<span>defun</span> <span>square</span> (<span>x</span>)
  (<span>*</span> x x))</pre></div>
</li>
<li>
<p dir="auto">With the cursor placed right after the last closing parenthesis,
type <code>C-x C-e</code>. The name of the function defined should appear in
the echo area at the bottom. This confirms that the function has
been defined.</p>
</li>
<li>
<p dir="auto">Now add the following code to the Elisp source file:</p>

</li>
<li>
<p dir="auto">Once again, with the cursor placed right after the last closing
parenthesis, type <code>C-x C-e</code>. The result should appear in the echo
area at the bottom.</p>
</li>
</ol>
<h3 dir="auto"><a id="user-content-use-rainbow-delimiters" aria-hidden="true" href="#use-rainbow-delimiters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use Rainbow Delimiters</h3>
<p dir="auto">There is not much to learn about using Rainbow Delimiters. In the
previous sections, you must have seen that as you type nested
parentheses, each parenthesis is highlighted with a different color.
That is done by Rainbow Delimiters. It colors each parenthesis according
to its nesting depth level.</p>
<p dir="auto">Note: Not everyone likes Rainbow Delimiters. Some people find
parentheses in multiple colors distracting. See the <a href="#opinion-references">Opinion
References</a> section for more discussion on this
topic.</p>
<h2 dir="auto"><a id="user-content-line-by-line-explanation" aria-hidden="true" href="#line-by-line-explanation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Line-by-Line Explanation</h2>
<p dir="auto">This section explains the <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> file provided here line-by-line.</p>
<h3 dir="auto"><a id="user-content-tweak-ui-elements" aria-hidden="true" href="#tweak-ui-elements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tweak UI Elements</h3>
<p dir="auto">The first few lines in our <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a> merely tweak the Emacs user
interface. These are of course not essential for using Emacs. However,
many new Emacs users often ask how to customize the user interface to
add a good color scheme and make it look minimal, so this section
indulges a little in customizing the user interface.</p>
<p dir="auto">Here is a line-by-line explanation of the UI tweaks in <a href="https://github.com/susam/emfy/blob/main/.emacs"><code>.emacs</code></a>:</p>
<ul dir="auto">
<li>
<p dir="auto">Hide the menu bar:</p>

<p dir="auto">When Emacs runs in a GUI window, by default, it starts with a menu
bar, tool bar, and scroll bar. Experienced users use Emacs
completely through the keyboard via the various key bindings for
various operations, so many of them hide these additional bars to
make the Emacs frame look clean and minimal. Note that in Emacs,
the term <em>frame</em> refers to the GUI window or the region of the
desktop where Emacs is displayed. In Emacs, the term <em>window</em>
refers to what we usually call split panes these days.</p>
<p dir="auto">If you are a beginner to Emacs, you might find the menu bar helpful
initially, so you might not want this line in your Emacs
initialization file. In that case, remove this line or just comment
it out by inserting a semicolon (i.e., <code>;</code>) before the opening
parentheses.</p>
</li>
<li>
<p dir="auto">Hide the tool bar and scroll bar:</p>
<div data-snippet-clipboard-copy-content="(when (display-graphic-p)
  (tool-bar-mode 0)
  (scroll-bar-mode 0))"><pre>(<span>when</span> (<span>display-graphic-p</span>)
  (<span>tool-bar-mode</span> <span>0</span>)
  (<span>scroll-bar-mode</span> <span>0</span>))</pre></div>
<p dir="auto">The <code>when</code> expression checks if Emacs is running with graphic
display before disabling the tool bar and scroll bar. Without the
<code>when</code> expression, we get the following error on Emacs without
graphic display support: <code>Symbol&#39;s function definition is void: tool-bar-mode</code>. An example of Emacs without graphics support is
<code>emacs-nox</code> on Debian 10.</p>
<p dir="auto">Note that this is only an author&#39;s preference. You may comment out
one or more of these lines if you want to retain the tool bar or
scroll bar.</p>
</li>
<li>
<p dir="auto">Inhibit the startup screen with the <code>Welcome to GNU Emacs</code> message
from appearing:</p>
<div data-snippet-clipboard-copy-content="(setq inhibit-startup-screen t)"><pre>(<span>setq</span> inhibit-startup-screen <span>t</span>)</pre></div>
<p dir="auto">If you are a beginner to Emacs, you might find the startup screen
helpful. It contains links to tutorial, manuals, common tasks, etc.
If you want to retain the startup screen, comment this line out.</p>
</li>
<li>
<p dir="auto">Show column number in the mode line:</p>

<p dir="auto">By default, Emacs shows only the current line number in the mode
line. For example, by default, Emacs may display something like
<code>L4</code> in the modeline to indicate that the cursor is on the fourth
line of the buffer. The above Elisp code enables column number
display in the mode line. With column number enabled, Emacs may
display something like <code>(4,0)</code> to indicate the cursor is at the
beginning of the fourth line.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-customize-theme" aria-hidden="true" href="#customize-theme"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customize Theme</h3>
<p dir="auto">In this section, we will choose a dark theme for Emacs. If you do not
like dark themes, you might want to stick with the default theme,
choose another theme, or skip this section.</p>
<ul dir="auto">
<li>
<p dir="auto">Load a beautiful dark color theme known as <code>wombat</code>:</p>

<p dir="auto">If you want to check the other built-in themes, type <code>M-x customize-themes RET</code>. A new window with a buffer named <code>*Custom Themes*</code> appear. In this buffer, select any theme you want to
test. After you are done testing, you can close this new window
with <code>C-x 0</code>.</p>
<p dir="auto">By default the Wombat theme looks like this:</p>
<p dir="auto"><a href="https://i.imgur.com/uRBoXCl.png" rel="nofollow"><img alt="Screenshot of Wombat default theme" src="https://camo.githubusercontent.com/f78739c027ffffe2c8805dc1ed3c3a883e991b61d3de36ccf98812e03f908eeb/68747470733a2f2f692e696d6775722e636f6d2f7552426f58436c2e706e67" width="580" data-canonical-src="https://i.imgur.com/uRBoXCl.png"/></a></p>
<p dir="auto">In this theme, the cursor, search matches, and comments can often
be difficult to spot because they are all colored with different
shades of gray while the background is also gray. In the next few
points, we will customize this theme a little to make these
elements easier to spot by coloring them with different shades of
orange. In the end, our customized Wombat theme would look like
this:</p>
<p dir="auto"><a href="https://i.imgur.com/8GHqcHi.png" rel="nofollow"><img alt="Screenshot of Wombat custom theme" src="https://camo.githubusercontent.com/804f58421d330e639cc52731edd4a669423ddc0f0400615f25ad16617a58acc2/68747470733a2f2f692e696d6775722e636f6d2f384748716348692e706e67" width="580" data-canonical-src="https://i.imgur.com/8GHqcHi.png"/></a></p>
</li>
<li>
<p dir="auto">Choose a darker shade of gray for the background color to improve
the contrast of the theme:</p>
<div data-snippet-clipboard-copy-content="(set-face-background &#39;default &#34;#111&#34;)"><pre>(<span>set-face-background</span> <span>&#39;default</span> <span><span>&#34;</span>#111<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto">Choose a pale shade of orange for the cursor, so that it is easy
to spot on the dark gray background:</p>
<div data-snippet-clipboard-copy-content="(set-face-background &#39;cursor &#34;#c96&#34;)"><pre>(<span>set-face-background</span> <span>&#39;cursor</span> <span><span>&#34;</span>#c96<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto">Highlight the current search match with a certain shade of orange
as the background and a very light shade of gray as the
foreground:</p>
<div data-snippet-clipboard-copy-content="(set-face-background &#39;isearch &#34;#c60&#34;)
(set-face-foreground &#39;isearch &#34;#eee&#34;)"><pre>(<span>set-face-background</span> <span>&#39;isearch</span> <span><span>&#34;</span>#c60<span>&#34;</span></span>)
(<span>set-face-foreground</span> <span>&#39;isearch</span> <span><span>&#34;</span>#eee<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto">Highlight search matches other than the current one with a darker
shade of orange as the background and a darker shade of gray as
the foreground:</p>
<div data-snippet-clipboard-copy-content="(set-face-background &#39;lazy-highlight &#34;#960&#34;)
(set-face-foreground &#39;lazy-highlight &#34;#ccc&#34;)"><pre>(<span>set-face-background</span> <span>&#39;lazy-highlight</span> <span><span>&#34;</span>#960<span>&#34;</span></span>)
(<span>set-face-foreground</span> <span>&#39;lazy-highlight</span> <span><span>&#34;</span>#ccc<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto">Use tangerine yellow to colour the comments:</p>
<div data-snippet-clipboard-copy-content="(set-face-foreground &#39;font-lock-comment-face &#34;#fc0&#34;)"><pre>(<span>set-face-foreground</span> <span>&#39;font-lock-comment-face</span> <span><span>&#34;</span>#fc0<span>&#34;</span></span>)</pre></div>
</li>
</ul>
<p dir="auto">Personal note: I see that many recent color themes choose a dim color
for comments in code. Such color themes intend to underemphasize the
comments. I think comments play an important role in code meant to be
read by humans and should be emphasized appropriately. That&#39;s why I
have chosen tangerine yellow for comments in the last point above, so
that the comments are easily noticeable.</p>
<h3 dir="auto"><a id="user-content-find-files-and-switch-buffers-efficiently" aria-hidden="true" href="#find-files-and-switch-buffers-efficiently"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Find Files and Switch Buffers Efficiently</h3>
<p dir="auto">Emacs comes with Ido mode that can be used to open files and switch
between buffers with a minimum number of keystrokes.</p>
<ul dir="auto">
<li>
<p dir="auto">Enable Ido mode:</p>

<p dir="auto">Note that the positive argument <code>1</code> is necessary. Without it, this
function call would simply toggle Ido mode on or off everytime it
executes. Say, we reload the Emacs initialization file with <code>M-x load-file RET ~/.emacs RET</code>, without the positive argument, this
function call would end up disabling Ido mode if it was previously
enabled. The positive argument ensures that Ido mode remains
enabled even if we reload the Emacs initialization file.</p>
<p dir="auto">With Ido mode enabled, automatic completions appear while trying
to open files or switch between buffers with <code>C-x C-f</code> or <code>C-x b</code>,
respectively. For example, merely typing <code>C-x C-f /et/ost</code> may
lead to Ido mode automatically completing the path to
<code>/etc/hosts</code>, i.e., we may type partial substrings of the various
components of the path or a substring of the buffer name we want
to search and Ido mode would search the matching names and
automatically complete the minibuffer input.</p>
</li>
<li>
<p dir="auto">Enable Ido mode for all buffer/file reading:</p>

<p dir="auto">Without this function call, Ido mode works for <code>C-x C-f</code> and <code>C-x b</code> but not for other minibuffers that may involve entering file or
buffer names. For example, with this function call removed, if we
enter <code>M-x ediff-files RET</code>, Ido mode does not perform completions
in the <code>ediff-files</code> minibuffer. But with this function call
present, Ido mode performs completions in the <code>ediff-files</code>
minibuffer too.</p>
</li>
<li>
<p dir="auto">Enable flexible string matching for Ido mode:</p>
<div data-snippet-clipboard-copy-content="(setq ido-enable-flex-matching t)"><pre>(<span>setq</span> ido-enable-flex-matching <span>t</span>)</pre></div>
<p dir="auto">This variable setting allows flexible string matching while
searching files or buffers. For example, with this setting, if we
type <code>C-x C-f /ec/hst</code>, Ido mode may automatically complete the
file path to <code>/etc/hosts</code>, i.e., Ido mode would automatically
complete names even if we omit a few characters while typing out
the name. Without this variable setting, the string we type must
always be a valid substring (with no characters omitted within the
substring) of the name we want to search.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-show-stray-whitespace" aria-hidden="true" href="#show-stray-whitespace"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Show Stray Whitespace</h3>
<p dir="auto">While writing text files, it can often be useful to quickly spot any
trailing whitespace at the end of lines or unnecessary trailing new
lines at the end of the file.</p>
<ul dir="auto">
<li>
<p dir="auto">Highlight trailing whitespace at the end of lines:</p>
<div data-snippet-clipboard-copy-content="(setq-default show-trailing-whitespace t)"><pre>(<span>setq-default</span> show-trailing-whitespace <span>t</span>)</pre></div>
<p dir="auto">With this variable set, any stray trailing whitespace at the end
of lines is highlighted (usually with a red background) as shown
in the screenshot below:</p>

<p dir="auto"><a href="https://i.imgur.com/na53DuT.png" rel="nofollow"><img alt="Whitespace highlighted" src="https://camo.githubusercontent.com/b1e994d7cfa9588fc69075a6c3ffd9e3568b9e2e79500b38a9aef1bc562a0f5c/68747470733a2f2f692e696d6775722e636f6d2f6e6135334475542e706e67" width="580" data-canonical-src="https://i.imgur.com/na53DuT.png"/></a></p>
<p dir="auto">The screenshot above shows one stray trailing space in the second
line and two trailing spaces in the third line. These trailing
spaces can be removed with the key sequence <code>M-x delete-trailing-whitespace RET</code>.</p>
</li>
<li>
<p dir="auto">Show non-existent lines with a special glyph in the left fringe:</p>
<div data-snippet-clipboard-copy-content="(setq-default indicate-empty-lines t)"><pre>(<span>setq-default</span> indicate-empty-lines <span>t</span>)</pre></div>
<p dir="auto">Showing non-existent lines in a conspicuous manner like this can
be helpful to spot any unnecessary empty lines at the end of a
buffer. An empty line is one that does not contain any character
except the terminating newline itself. Here is a screenshot that
demonstrates this feature:</p>

<p dir="auto"><a href="https://i.imgur.com/WzystxA.png" rel="nofollow"><img alt="Non-existent line indicators" src="https://camo.githubusercontent.com/6d26029d59eba377a54d7ca53b03c1b66826aeda3de8195a8ba28e245c7fda03/68747470733a2f2f692e696d6775722e636f6d2f577a79737478412e706e67" width="580" data-canonical-src="https://i.imgur.com/WzystxA.png"/></a></p>
<p dir="auto">The screenshot shows that there are two empty lines at the end of
the buffer. The tiny horizontal dashes at the bottom of the left
fringe are non-existent lines. The first of these tiny dashes mark
the end of the buffer. Note: This is similar to how Vim displays
the tilde symbol (<code>~</code>) to show non-existent lines. The empty lines
at the end of a buffer can be removed with the key sequence <code>M-x delete-trailing-whitespace RET</code>.</p>
</li>
<li>
<p dir="auto">Show buffer boundaries in the left fringe:</p>
<div data-snippet-clipboard-copy-content="(setq-default indicate-buffer-boundaries &#39;left)"><pre>(<span>setq-default</span> indicate-buffer-boundaries <span>&#39;left</span>)</pre></div>
<p dir="auto">The buffer boundaries can be useful to check if the last line of
the buffer has a terminating newline or not. If the buffer does
not contain a terminating newline, then a top-right corner shape
(<code>⌝</code>) appears in the fringe. For example, see this screenshot of a
file that does not contain a terminating newline:</p>

<p dir="auto"><a href="https://i.imgur.com/M0nPPEg.png" rel="nofollow"><img alt="File without terminating newline" src="https://camo.githubusercontent.com/7cc25c065d151c39161a0ee9944214ccca29eb801ef3a6565743d9c216a46b20/68747470733a2f2f692e696d6775722e636f6d2f4d306e505045672e706e67" width="580" data-canonical-src="https://i.imgur.com/M0nPPEg.png"/></a></p>
<p dir="auto">If there is only one line in the buffer and that line is
terminated with a newline then a left-bracket (<code>[</code>) appears in the
fringe. If there are multiple lines in the buffer and the last
line is terminated with a newline then a bottom-left corner shape
(<code>⌞</code>) appears in the fringe. Here is a screenshot of a file that
contains a terminating newline:</p>

<p dir="auto"><a href="https://i.imgur.com/KUQDpaJ.png" rel="nofollow"><img alt="File with terminating newline" src="https://camo.githubusercontent.com/804396ff64962375cbd355c4dd11c375c35720ba78736c31f17fc722ad5030a5/68747470733a2f2f692e696d6775722e636f6d2f4b55514470614a2e706e67" width="580" data-canonical-src="https://i.imgur.com/KUQDpaJ.png"/></a></p>
<p dir="auto">To summarize, these shapes (<code>[</code> or <code>⌞</code>) show where the last
newline of the buffer exists. The last newline of the buffer
exists above the lower horizontal bar of these shapes. No newlines
exist below the lower horizontal bar. It is a good practice to
terminate text files with a newline. For most types of files,
Emacs inserts a terminating newline automatically when we save the
file with <code>C-x C-s</code>.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-let-single-space-after-period-end-sentence" aria-hidden="true" href="#let-single-space-after-period-end-sentence"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Let Single Space After Period End Sentence</h3>
<p dir="auto">Emacs uses the rather old-fashioned convention of treating a period
followed by double spaces as end of sentence. However, it is more
common these days to end sentences with a period followed by a single
space.</p>
<ul dir="auto">
<li>
<p dir="auto">Let a period followed by a single space be treated as end of sentence:</p>
<div data-snippet-clipboard-copy-content="(setq sentence-end-double-space nil)"><pre>(<span>setq</span> sentence-end-double-space <span>nil</span>)</pre></div>
<p dir="auto">This little setting has significant consequences while editing and
moving around text files. We will discuss two such consequences
now with two tiny experiments:</p>
<p dir="auto"><strong>Experiment A: Moving By Sentences:</strong> To check the default
behaviour, first comment out the above line of Emacs Lisp code in
the Emacs initialization file, save the file, and restart Emacs.
Now copy the following text:</p>
<div data-snippet-clipboard-copy-content="Lorem ipsum dolor sit amet, consectetur adipiscing elit donec. Porttitor id lacus non consequat."><pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit donec. Porttitor id lacus non consequat.
</code></pre></div>
<p dir="auto">Then open a new text buffer in Emacs with <code>C-x C-f foo.txt RET</code>
and paste the copied text with <code>C-y</code>. Then type <code>C-a</code> to go to the
beginning of the line. Finally, type <code>M-e</code> to move to the end of
the sentence. Without <code>sentence-end-double-space</code> set to <code>nil</code>,
typing <code>M-e</code> moves the cursor all the way to the end of the line
(i.e., after the second period). It ignores the first period as
end of sentence because this period is followed by one space
whereas Emacs expects two spaces after a period at the end of a
sentence.</p>
<p dir="auto">Now to verify that the above line of Emacs Lisp code works as
expected, uncomment it again to enable it, save the file, restart
Emacs, and then perform the above experiment again. With
<code>sentence-end-double-space</code> set to <code>nil</code>, typing <code>M-e</code> moves the
cursor moves to the end of the of first sentence (i.e., after the
first period). This is what we normally expect these days.</p>
<p dir="auto"><strong>Experiment B: Filling Paragraphs:</strong> While writing text files, it
is customary to limit the length of each line to a certain maximum
length. In Emacs, the key sequence <code>M-q</code> invokes the
<code>fill-paragraph</code> command that works on the current paragraph and
reformats it such that each line is as long as possible without
exceeding 70 characters in length.</p>
<p dir="auto">To check the default behaviour, first comment out the above line
of Emacs Lisp code in the Emacs initialization file, save the
file, and restart Emacs. Then create the same text buffer as the
one in the previous experiment. Now place the cursor anywhere on
text and type <code>M-q</code> to reformat it as a paragraph. Without
<code>sentence-end-double-space</code> set to <code>nil</code>, typing <code>M-q</code> reformats
the paragraph as follows:</p>
<div data-snippet-clipboard-copy-content="Lorem ipsum dolor sit amet, consectetur adipiscing elit
donec. Porttitor id lacus non consequat."><pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit
donec. Porttitor id lacus non consequat.
</code></pre></div>
<p dir="auto">Now to verify that the above line of Emacs Lisp code works as
expected, uncomment it again to enable it, save the file, then
restart Emacs, and then perform the above experiment again. With
<code>sentence-end-double-space</code> set to <code>nil</code>, typing <code>M-q</code> reformats
the paragrapha as follows:</p>
<div data-snippet-clipboard-copy-content="Lorem ipsum dolor sit amet, consectetur adipiscing elit donec.
Porttitor id lacus non consequat."><pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit donec.
Porttitor id lacus non consequat.
</code></pre></div>
<p dir="auto">We see that without <code>sentence-end-double-space</code> set to <code>nil</code>,
Emacs refuses to insert a hard linebreak after the string
<code>donec.</code>, so it moves the entire word to the next line. This is a
result of following the old-fashioned convention of recognizing a
period followed by double spaces as end of sentence. This
convention prevents inadvertently placing a hard linebreak within
an abbreviation. Since it is now more common to end a sentence
with a single period followed by a single space, we would like the
text above to be reformatted as shown in the last example above.
Setting <code>sentence-end-double-space</code> to <code>nil</code> achieves this.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-indentation" aria-hidden="true" href="#indentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Indentation</h3>
<p dir="auto">The following point shows how to configure Emacs to insert spaces, not
tabs, for indenting code.</p>
<ul dir="auto">
<li>
<p dir="auto">Use spaces, not tabs, for indentation:</p>
<div data-snippet-clipboard-copy-content="(setq-default indent-tabs-mode nil)"><pre>(<span>setq-default</span> indent-tabs-mode <span>nil</span>)</pre></div>
<p dir="auto">Emacs uses a mix of tabs and spaces by default for indentation and
alignment. To verify the default behaviour, first comment out the
above line of Emacs Lisp code, save it, then restart Emacs, then
open a new Emacs Lisp source file, say, <code>C-x C-f foo.el RET</code> and
type the following three lines of Emacs Lisp code:</p>
<div data-snippet-clipboard-copy-content="(defun foo ()
  (concat &#34;foo&#34;
          &#34;bar&#34;))"><pre>(<span>defun</span> <span>foo</span> ()
  (<span>concat</span> <span><span>&#34;</span>foo<span>&#34;</span></span>
          <span><span>&#34;</span>bar<span>&#34;</span></span>))</pre></div>
<p dir="auto">While typing the above code, do not type <kbd>tab</kbd> or
<kbd>space</kbd> to indent the second and third lines. When you
type <kbd>enter</kbd> at the end of each line, Emacs automatically
inserts the necessary tabs and spaces to indent the code. After
entering this code, type <code>M-x whitespace-mode RET</code> to visualize
whitespace characters. This mode displays each space with a middle
dot (<code>·</code>) and each tab with a right pointing guillemet (<code>»</code>). With
whitespace mode enabled, you should find that the second line of
code is indented with two spaces but the third line is indented
with a single tab followed by two spaces. Emacs has a <code>tab-width</code>
variable that is set to <code>8</code> by default. For every <code>tab-width</code>
columns of indentation, Emacs inserts a tab to indent the code.
The third line requires 10 leading spaces for alignment, so Emacs
inserts one tab character followed by 2 spaces to make the third
line look aligned. However, this code would look misaligned on
another editor with a different <code>tab-width</code> setting. That&#39;s why we
configure Emacs to use only spaces to indent and align code.</p>
<p dir="auto">Now uncomment the function call to set <code>indent-tabs-mode</code> to <code>nil</code>
expected, save it, then restart Emacs, and then perform the above
experiment involving the three lines of Emacs Lisp code again.
This time, you should see that no tabs are used for indentation.
Only spaces are used for indentation.</p>
<p dir="auto">In some type of files, we must use literal tabs. For example, in
<code>Makefile</code>, the syntax of target rules require that the commands
under a target are indented by a literal tab character. In such
files, Emacs is smart enough to always use literal tabs for
indentation regardless of the above variable setting.</p>
<p dir="auto">Mixing tabs and spaces for indenting source code can be
problematic, especially, when the author of code or Emacs
inadvertently uses tabs for alignment (as opposed to using tabs
for indentation only which would be fine) and another programmer
views the file with an editor with a different tab width setting.
In fact, in the experiment above, Emacs did use literal tab
characters to align code which would cause the code to look
misaligned on another editor with a different tab width setting.
See <a href="https://www.emacswiki.org/emacs/TabsAreEvil" rel="nofollow">Tabs Are Evil</a>
for more details on this topic.</p>
</li>
<li>
<p dir="auto">Display the distance between two tab stops as whitespace that is
as wide as 4 characters:</p>
<div data-snippet-clipboard-copy-content="(setq-default tab-width 4)"><pre>(<span>setq-default</span> tab-width <span>4</span>)</pre></div>
<p dir="auto">Note that this primarily affects how a literal tab character is
displayed. Further, along with the previous variable setting where
we set <code>indent-tabs-mode</code> to <code>nil</code>, in some types of files, this
variable setting decides how many spaces are inserted when we hit
the <kbd>tab</kbd> key. For example, in text buffers, on hitting
the <kbd>tab</kbd> key, as many spaces are inserted as are
necessary to move the cursor to the next tab stop where the
distance between two tab stops is assumed to be <code>tab-width</code>.</p>
<p dir="auto">In some type of files, we must use literal tabs. For example, in
<code>Makefile</code>, the syntax of target rules require that the commands
under a target are indented by a literal tab character. In such
files, Emacs displays the distance between two tab stops as
whitespace that is as wide as 8 characters by default. This
default setting is often too large for many users. They feel that
a tab width of 8 consumes too much horizontal space on the screen.
The variable setting above reduces the tab width to 4. Of course,
different users may have different preferences for the tab width.
Therefore, users are encouraged to modify this variable setting to
a value they prefer or omit the above line of Emacs Lisp code from
their Emacs initialization file to leave it to the default value
of 8.</p>
</li>
<li>
<p dir="auto">Set indentation levels according to popular coding conventions for
various languages:</p>
<div data-snippet-clipboard-copy-content="(setq c-basic-offset 4)
(setq js-indent-level 2)
(setq css-indent-offset 2)"><pre>(<span>setq</span> c-basic-offset <span>4</span>)
(<span>setq</span> js-indent-level <span>2</span>)
(<span>setq</span> css-indent-offset <span>2</span>)</pre></div>
<p dir="auto">Emacs uses 2 spaces for indentation in C by default. We change
this to 4 spaces.</p>
<p dir="auto">Emacs uses 4 spaces for indentation in JavaScript and CSS by
default. We change this to 2 spaces.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-highlight-parentheses" aria-hidden="true" href="#highlight-parentheses"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Highlight Parentheses</h3>
<p dir="auto">The following points describe how we enable highlighting of parentheses:</p>
<ul dir="auto">
<li>
<p dir="auto">The next point shows how to enable highlighting of matching pair of
parentheses. By default, there is a small delay between the movement
of a cursor and the highlighting of the matching pair of
parentheses. The following line of code gets rid of this delay:</p>
<div data-snippet-clipboard-copy-content="(setq show-paren-delay 0)"><pre>(<span>setq</span> show-paren-delay <span>0</span>)</pre></div>
<p dir="auto">This line of code must come before the one in the next point for it
to be effective.</p>
</li>
<li>
<p dir="auto">Highlight matching parentheses:</p>

<p dir="auto">A pair of parenthesis is highlighted when the cursor is on the
opening parenthesis of the pair or just after the closing
parenthesis of the pair.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-keep-working-directory-tidy" aria-hidden="true" href="#keep-working-directory-tidy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Keep Working Directory Tidy</h3>
<p dir="auto">Emacs creates a number of temporary files to ensure that we do not
inadvertently lose our work while editing files. However, these files
can clutter our working directories. This section shows some ways to
keep the current working directory tidy by asking Emacs to manage
these files at a different location.</p>
<ul dir="auto">
<li>
<p dir="auto">Create a directory to keep auto-save files:</p>
<div data-snippet-clipboard-copy-content="(make-directory &#34;~/.emacs.d/backup/&#34; t)"><pre>(<span>make-directory</span> <span><span>&#34;</span>~/.emacs.d/backup/<span>&#34;</span></span> <span>t</span>)</pre></div>
<p dir="auto">In the next point, we discuss auto-save files in detail and ask
Emacs to write auto-save files to <code>~/.emacs.d/backup/</code> instead of
writing them to our working directory. Before we do that, we need
to create the <code>~/.emacs.d/backup/</code> directory, otherwise Emacs
would fail to write the auto-save files and display the following
error: <code>Error (auto-save): Auto-saving foo.txt: Opening output file: No such file or directory, /Users/susam/.emacs.d/backup/#!tmp!foo.txt#</code>.</p>
<p dir="auto">Note that this issue occurs only for auto-save files, not for
backup files discussed in the third point of this list. If the
parent directory for backup files is missing, Emacs creates it
automatically. However, Emacs does not create the parent directory
for auto-save files automatically, so we need the above line of
Emacs Lisp code to create it ourselves.</p>
</li>
<li>
<p dir="auto">Write auto-save files to a separate directory:</p>
<div data-snippet-clipboard-copy-content="(setq auto-save-file-name-transforms &#39;((&#34;.*&#34; &#34;~/.emacs.d/backup/&#34; t)))"><pre>(<span>setq</span> auto-save-file-name-transforms &#39;((<span><span>&#34;</span>.*<span>&#34;</span></span> <span><span>&#34;</span>~/.emacs.d/backup/<span>&#34;</span></span> <span>t</span>)))</pre></div>
<p dir="auto">If we open a new file or edit an existing file, say, <code>foo.txt</code> and
make some changes that have not been saved yet, Emacs
automatically creates an auto-save file named <code>#foo.txt#</code> in the
same directory as <code>foo.txt</code> to ensure that the unsaved changes are
not lost inadvertently. For example, if the system crashes
suddenly while we are editing a file <code>foo.txt</code>, the auto-save file
would keep a copy of our unsaved worked. The next time we try to
edit <code>foo.txt</code>, Emacs would warn that auto-save data already
exists and it would then suggest us to recover the auto-save data
using <code>M-x recover-this-file RET</code>. These auto-save files are
removed automatically after we save our edits but until then they
clutter our working directories. The above line of Emacs Lisp code
ensures that all auto-save files are written to a separate
directory, thus leaving our working directories tidy.</p>
</li>
<li>
<p dir="auto">Write backup files to a separate directory:</p>
<div data-snippet-clipboard-copy-content="(setq backup-directory-alist &#39;((&#34;.&#34; . &#34;~/.emacs.d/backup/&#34;)))"><pre>(<span>setq</span> backup-directory-alist &#39;((<span><span>&#34;</span>.<span>&#34;</span></span> <span>.</span> <span><span>&#34;</span>~/.emacs.d/backup/<span>&#34;</span></span>)))</pre></div>
<p dir="auto">If we create a new file or edit an existing file, say, <code>foo.txt</code>,
then make some changes to it, and save it, the previous copy of
the file is saved as a backup file <code>foo.txt~</code>. These backup files
too clutter our working direcories. The above line of Emacs Lisp
code ensures that all backup files are written to a separate
directory, thus leaving our working directories tidy.</p>
</li>
<li>
<p dir="auto">Disable lockfiles:</p>
<div data-snippet-clipboard-copy-content="(setq create-lockfiles nil)"><pre>(<span>setq</span> create-lockfiles <span>nil</span>)</pre></div>
<p dir="auto">As soon as we make an edit to a file, say <code>foo.txt</code>, Emacs creates
a lockfile <code>.#foo.txt</code>. If we then launch another instance of
Emacs and try to edit this file, Emacs would refuse to edit the
file, then warn us that the file is locked by another Emacs
session, and provide us a few options regarding whether we want to
steal the lock, proceed with editing anyway, or quit editing it.
These lock files are removed automatically as soon as we save our
edits but until then they clutter our directories. Unlike
auto-save files and backup files, there is no way to tell Emacs to
write these files to a different directory. We can however disable
lockfile creation with the above line of Emacs Lisp code.</p>
<p dir="auto">Note that disabling lockfiles could be risky if you are in the
habit of launching multiple Emacs instances while editing files.
With such a habit, it is easy to make the mistake of opening the
same file in two different Emacs instances and inadvertently
overwrite changes made via one instance with changes made via
another instance. However, experienced Emacs users launch only a
single instance of Emacs for the entire lifetime of their desktop
session and edit all files via that single instance. The <a href="#emacs-server">Emacs
Server</a> and <a href="#emacs-launcher">Emacs Launcher</a>
sections later discuss techniques about how to make this usage
style more convenient. If you are willing to follow this style of
using Emacs, then it may be okay to disable lockfiles.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-install-packages" aria-hidden="true" href="#install-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Packages</h3>
<p dir="auto">The following points describe how we automate the installation of
Emacs packages we need:</p>
<ul dir="auto">
<li>
<p dir="auto">The following code disables TLS 1.3 to work around a known bug in
GNU Emacs versions 26.1 and 26.2:</p>
<div data-snippet-clipboard-copy-content="(when (and (version&lt; emacs-version &#34;26.3&#34;) (&gt;= libgnutls-version 30603))
  (setq gnutls-algorithm-priority &#34;NORMAL:-VERS-TLS1.3&#34;))"><pre>(<span>when</span> (<span>and</span> (<span>version&lt;</span> emacs-version <span><span>&#34;</span>26.3<span>&#34;</span></span>) (<span>&gt;=</span> libgnutls-version <span>30603</span>))
  (<span>setq</span> gnutls-algorithm-priority <span><span>&#34;</span>NORMAL:-VERS-TLS1.3<span>&#34;</span></span>))</pre></div>
<p dir="auto">See <a href="https://debbugs.gnu.org/34341" rel="nofollow">https://debbugs.gnu.org/34341</a> for more details on the bug. This
code is not required while using GNU Emacs version 26.3 or 27.1 or a
later version although leaving this code intact should do no harm
because this code checks whether the Emacs version is less than 26.3
before applying the workaround.</p>
</li>
<li>
<p dir="auto">This is necessary for defining the <code>package-archives</code> list we will
use in the next point.</p>

</li>
<li>
<p dir="auto">Add Milkypostman&#39;s Emacs Lisp Package Archive (MELPA) to the list of
archives to fetch packages from:</p>
<div data-snippet-clipboard-copy-content="(add-to-list &#39;package-archives &#39;(&#34;melpa&#34; . &#34;https://melpa.org/packages/&#34;) t)"><pre>(<span>add-to-list</span> <span>&#39;package-archives</span> &#39;(<span><span>&#34;</span>melpa<span>&#34;</span></span> <span>.</span> <span><span>&#34;</span>https://melpa.org/packages/<span>&#34;</span></span>) <span>t</span>)</pre></div>
<p dir="auto">By default only GNU Emacs Lisp Package Archive (ELPA) is in the list
of archives to fetch from. The above line adds MELPA too to the
list. If you are curious to see what the original value of
<code>package-archives</code> was and what it is now due to the above line,
type <code>C-h o package-archives RET</code>.</p>
</li>
<li>
<p dir="auto">Initialize the package system:</p>

<p dir="auto">While initializing the package system, this call also initializes
the <code>package-archive-contents</code> variable used in the next point.</p>
</li>
<li>
<p dir="auto">Download package descriptions from package archives only if they
have not been downloaded before:</p>
<div data-snippet-clipboard-copy-content="(unless package-archive-contents
  (package-refresh-contents))"><pre>(<span>unless</span> package-archive-contents
  (<span>package-refresh-contents</span>))</pre></div>
<p dir="auto">The first line checks whether package descriptions from package
archives have been fetched. See the <code>~/.emacs.d/elpa/archives</code>
directory for archive contents in case you are curious. If the
archive contents have not been fetched then the second line
fetches them. Thus the second line executes only when the Emacs
initialization is loaded for the first time. The first time Emacs
starts with the <a href="https://github.com/susam/emfy/blob/main/.emacs">.emacs</a> file of this repository, it takes
a while to fetch the package archives. However, once the package
archives have been fetched and Emacs is started again later, it
starts instantly because the code above takes care not to fetch
package archives again when it is already cached locally.</p>
</li>
<li>
<p dir="auto">When we install packages using <code>package-install</code> (coming up in the
next point), a few customizations are written automatically into
the Emacs initialization file (<code>~/.emacs</code> in our case). This has
the rather undesirable effect of our carefully handcrafted
<code>~/.emacs</code> being meddled by <code>package-install</code>. To be precise, it
is the <code>custom</code> package invoked by <code>package-install</code> that intrudes
into our Emacs initialization file. To prevent that, we ask
<code>custom</code> to write the customizations to a separate file at
<code>~/.emacs.d/custom.el</code> with the following code:</p>
<div data-snippet-clipboard-copy-content="(setq custom-file &#34;~/.emacs.d/custom.el&#34;)"><pre>(<span>setq</span> custom-file <span><span>&#34;</span>~/.emacs.d/custom.el<span>&#34;</span></span>)</pre></div>
</li>
<li>
<p dir="auto">Install some packages:</p>
<div data-snippet-clipboard-copy-content="(setq package-list &#39;(markdown-mode paredit rainbow-delimiters))
(dolist (package package-list)
  (unless (package-installed-p package)
    (package-install package)))"><pre>(<span>setq</span> package-list &#39;(<span>markdown-mode</span> paredit rainbow-delimiters))
(<span>dolist</span> (<span>package</span> package-list)
  (<span>unless</span> (<span>package-installed-p</span> <span>package</span>)
    (<span>package-install</span> <span>package</span>)))</pre></div>
<p dir="auto">This loops iterates over each package name in a list of packages.
For each package, it checks whether the package is installed with
the <code>package-installed-p</code> function. If it is not installed, then
it is installed with the <code>package-install</code> function. You can
modify the list of packages in the first line to add other
packages that you might need in future or remove packages that you
do not want. Note that the <code>package-list</code> variable defined here is
a variable we have defined ourselves to use it in the <code>dolist</code>
loop. Emacs does not care about this variable.</p>
<p dir="auto">The first time Emacs starts with this initialization file, it takes
a while to install the packages we need. However, once the packages
are installed and Emacs is started again later, it starts instantly
because the code above takes care to not attempt installing packages
that are already installed.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-add-hooks" aria-hidden="true" href="#add-hooks"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Add Hooks</h3>
<p dir="auto">This section describes how to enable Paredit and Rainbow Delimiters.
These are not absolutely essential for using Emacs. However many Emacs
Lisp programmers find them useful while some do not.</p>
<p dir="auto">In case you decide not to use either Paredit or Rainbow Delimiters,
then you may skip this section. In that case, you might also want to
remove these packages from the <code>package-list</code> variable discussed in
the previous section.</p>
<ul dir="auto">
<li>
<p dir="auto">Enable Paredit while editing Emacs Lisp code:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;emacs-lisp-mode-hook &#39;enable-paredit-mode)"><pre>(<span>add-hook</span> <span>&#39;emacs-lisp-mode-hook</span> <span>&#39;enable-paredit-mode</span>)</pre></div>
<p dir="auto">Paredit helps in keeping parentheses balanced and in performing
structured editing of S-expressions. To test that Paredit is
enabled for editing Emacs Lisp code, open a new Emacs Lisp file,
say, <code>foo.el</code>. Then type <code>(</code>. Paredit should automatically insert
the corresponding <code>)</code>.</p>
</li>
<li>
<p dir="auto">Enable Paredit in eval-expression minibuffer:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;eval-expression-minibuffer-setup-hook &#39;enable-paredit-mode)"><pre>(<span>add-hook</span> <span>&#39;eval-expression-minibuffer-setup-hook</span> <span>&#39;enable-paredit-mode</span>)</pre></div>
<p dir="auto">To test this, enter <code>M-:</code> to bring up the eval-expression minbuffer
and type <code>(</code>. Paredit should automatically insert the corresponding
<code>)</code>.</p>
</li>
<li>
<p dir="auto">Enable Paredit while interactively evaluating Emacs Lisp expressions
in inferior-emacs-lisp-mode (IELM):</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;ielm-mode-hook &#39;enable-paredit-mode)"><pre>(<span>add-hook</span> <span>&#39;ielm-mode-hook</span> <span>&#39;enable-paredit-mode</span>)</pre></div>
<p dir="auto">To test this, enter <code>M-x ielm RET</code>. When the <code>*ielm*</code> buffer
appears, type <code>(</code>. Paredit should automatically insert the
corresponding <code>)</code>.</p>
</li>
<li>
<p dir="auto">Enable Paredit in Lisp interaction mode:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;lisp-interaction-mode-hook &#39;enable-paredit-mode)"><pre>(<span>add-hook</span> <span>&#39;lisp-interaction-mode-hook</span> <span>&#39;enable-paredit-mode</span>)</pre></div>
<p dir="auto">To test this, first open a non-Lisp file, say, <code>C-x C-f foo.txt RET</code>. Now type <code>(</code>. Note that no corresponding <code>)</code> is inserted
because we are not in Lisp interaction mode yet. Delete <code>(</code>. Then
start Lisp interaction mode with the command <code>M-x lisp-interaction-mode RET</code>. Type <code>(</code> again. Paredit should now
automatically insert the corresponding <code>)</code>.</p>
</li>
<li>
<p dir="auto">Enable Paredit while editing Lisp code other than Emacs Lisp:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;lisp-mode-hook &#39;enable-paredit-mode)"><pre>(<span>add-hook</span> <span>&#39;lisp-mode-hook</span> <span>&#39;enable-paredit-mode</span>)</pre></div>
<p dir="auto">To test this, open a new Common Lisp source file, say, <code>C-x C-f foo.lisp RET</code>. Then type <code>(</code>. Paredit should automatically insert
the corresponding <code>)</code>.</p>
</li>
<li>
<p dir="auto">Enable Rainbow Delimiters while editing Emacs Lisp code:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;emacs-lisp-mode-hook &#39;rainbow-delimiters-mode)"><pre>(<span>add-hook</span> <span>&#39;emacs-lisp-mode-hook</span> <span>&#39;rainbow-delimiters-mode</span>)</pre></div>
<p dir="auto">Rainbow Delimiters color nested parentheses with different colors
according to the depth level of each parenthesis. To test this
open a new Emacs Lisp file, say, <code>foo.el</code>. Then type <code>((((</code>.
Rainbow Delimiters should color each parenthesis differently.</p>
</li>
<li>
<p dir="auto">Enable Rainbow Delimiters while interactively evaluating Emacs Lisp
expressions in inferior-emacs-lisp-mode (IELM):</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;ielm-mode-hook &#39;rainbow-delimiters-mode)"><pre>(<span>add-hook</span> <span>&#39;ielm-mode-hook</span> <span>&#39;rainbow-delimiters-mode</span>)</pre></div>
<p dir="auto">To test this, enter <code>M-x ielm RET</code>. When the <code>*ielm*</code> buffer comes
up, type <code>((((</code>. Rainbow Delimiters should color each parenthesis
differently.</p>
</li>
<li>
<p dir="auto">Enable Rainbow Delimiters in Lisp interaction mode:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;lisp-interaction-mode-hook &#39;rainbow-delimiters-mode)"><pre>(<span>add-hook</span> <span>&#39;lisp-interaction-mode-hook</span> <span>&#39;rainbow-delimiters-mode</span>)</pre></div>
<p dir="auto">To test this, first open a non-Lisp file, say, <code>foo.txt</code>. Now type
<code>((((</code>. Then start Lisp interaction mode with the command <code>M-x lisp-interaction-mode RET</code>. Rainbow Delimiters should now color each
parenthesis differently.</p>
</li>
<li>
<p dir="auto">Enable Rainbow Delimiters while editing Lisp code other than Emacs
Lisp:</p>
<div data-snippet-clipboard-copy-content="(add-hook &#39;lisp-mode-hook &#39;rainbow-delimiters-mode)"><pre>(<span>add-hook</span> <span>&#39;lisp-mode-hook</span> <span>&#39;rainbow-delimiters-mode</span>)</pre></div>
<p dir="auto">To test this, open a new Common Lisp source file, say, <code>foo.lisp</code>.
Then type <code>((((</code>. Rainbow Delimiters should color each parenthesis
differently.</p>
</li>
</ul>
<p dir="auto">You may have noticed that we did not enable Rainbow Delimiters for
eval-expression. That is because it does not work as expected as of
Dec 2021. See <a href="https://github.com/Fanael/rainbow-delimiters/issues/57">https://github.com/Fanael/rainbow-delimiters/issues/57</a> for
more details.</p>
<h3 dir="auto"><a id="user-content-colorful-parentheses" aria-hidden="true" href="#colorful-parentheses"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Colorful Parentheses</h3>
<p dir="auto">The default colors that the Rainbow Delimiters package chooses for the
nested parentheses are too subtle to easily recognize the matching
pair of parentheses. Some Lisp programmers like to customize the
colors to make the parentheses look more colorful. This section shows
one way to do this.</p>
<ul dir="auto">
<li>
<p dir="auto">This is necessary to use the various Rainbow Delimiters faces that
appear in the next point.</p>
<div data-snippet-clipboard-copy-content="(require &#39;rainbow-delimiters)"><pre>(<span>require</span> <span>&#39;rainbow-delimiters</span>)</pre></div>
</li>
<li>
<p dir="auto">Set different colors for parentheses at different nesting level.</p>
<div data-snippet-clipboard-copy-content="(set-face-foreground &#39;rainbow-delimiters-depth-1-face &#34;#c66&#34;)  ; red
(set-face-foreground &#39;rainbow-delimiters-depth-2-face &#34;#6c6&#34;)  ; green
(set-face-foreground &#39;rainbow-delimiters-depth-3-face &#34;#69f&#34;)  ; blue
(set-face-foreground &#39;rainbow-delimiters-depth-4-face &#34;#cc6&#34;)  ; yellow
(set-face-foreground &#39;rainbow-delimiters-depth-5-face &#34;#6cc&#34;)  ; cyan
(set-face-foreground &#39;rainbow-delimiters-depth-6-face &#34;#c6c&#34;)  ; magenta
(set-face-foreground &#39;rainbow-delimiters-depth-7-face &#34;#ccc&#34;)  ; light gray
(set-face-foreground &#39;rainbow-delimiters-depth-8-face &#34;#999&#34;)  ; medium gray
(set-face-foreground &#39;rainbow-delimiters-depth-9-face &#34;#666&#34;)  ; dark gray"><pre>(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-1-face</span> <span><span>&#34;</span>#c66<span>&#34;</span></span>)  <span><span>;</span> red</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-2-face</span> <span><span>&#34;</span>#6c6<span>&#34;</span></span>)  <span><span>;</span> green</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-3-face</span> <span><span>&#34;</span>#69f<span>&#34;</span></span>)  <span><span>;</span> blue</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-4-face</span> <span><span>&#34;</span>#cc6<span>&#34;</span></span>)  <span><span>;</span> yellow</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-5-face</span> <span><span>&#34;</span>#6cc<span>&#34;</span></span>)  <span><span>;</span> cyan</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-6-face</span> <span><span>&#34;</span>#c6c<span>&#34;</span></span>)  <span><span>;</span> magenta</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-7-face</span> <span><span>&#34;</span>#ccc<span>&#34;</span></span>)  <span><span>;</span> light gray</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-8-face</span> <span><span>&#34;</span>#999<span>&#34;</span></span>)  <span><span>;</span> medium gray</span>
(<span>set-face-foreground</span> <span>&#39;rainbow-delimiters-depth-9-face</span> <span><span>&#34;</span>#666<span>&#34;</span></span>)  <span><span>;</span> dark gray</span></pre></div>
</li>
</ul>
<h3 dir="auto"><a id="user-content-custom-command-and-key-sequence" aria-hidden="true" href="#custom-command-and-key-sequence"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Command and Key Sequence</h3>
<p dir="auto">In this section we will see how to make our own custom command.</p>
<ul dir="auto">
<li>
<p dir="auto">Create a very simple custom command to display the current time in
the echo area at the bottom of the Emacs frame:</p>
<div data-snippet-clipboard-copy-content="(defun show-current-time ()
  &#34;Show current time for 2 seconds.&#34;
  (interactive)
  (message (current-time-string))
  (sleep-for 2)
  (message nil))"><pre>(<span>defun</span> <span>show-current-time</span> ()
  <span><span>&#34;</span>Show current time for 2 seconds.<span>&#34;</span></span>
  (<span>interactive</span>)
  (<span>message</span> (<span>current-time-string</span>))
  (<span>sleep-for</span> <span>2</span>)
  (<span>message</span> <span>nil</span>))</pre></div>
<p dir="auto">This command can be invoked by typing <code>M-x show-current-time RET</code>.
On running this command, the current time should be displayed in
the echo area for two seconds.</p>
</li>
<li>
<p dir="auto">Create a custom key sequence to invoke the command defined in the
previous point:</p>
<div data-snippet-clipboard-copy-content="(global-set-key (kbd &#34;C-c t&#34;) &#39;show-current-time)"><pre>(<span>global-set-key</span> (<span>kbd</span> <span><span>&#34;</span>C-c t<span>&#34;</span></span>) <span>&#39;show-current-time</span>)</pre></div>
<p dir="auto">Now the same command can be invoked by typing <code>C-c t</code>.</p>
</li>
</ul>
<h3 dir="auto"><a id="user-content-emacs-server" aria-hidden="true" href="#emacs-server"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Emacs Server</h3>
<p dir="auto">Experienced Emacs users run a single instance of Emacs and do all
their editing activities via this single instance. However, this
practice may seem inconvenient to users who discover some files they
want to edit while navigating the file system via a terminal.</p>
<p dir="auto">Say, we have an instance of Emacs already running. Then we find a file
named <code>foo.txt</code> while navigating the file system via a terminal. We
now want to edit this file using Emacs. Running <code>emacs foo.txt</code> on the
terminal would launch a second instance of the Emacs, thus violating
the practice of editing all files using a single instance of Emacs.
But leaving the terminal to reach the existing Emacs frame and then
typing <code>C-x C-f</code> followed by the entire path of the file <code>foo.txt</code> may
feel inconvenient.</p>
<p dir="auto">Fortunately, there is a way to run an Emacs command on the terminal
that opens new files in an existing instance of Emacs. This section
explains how to accomplish this.</p>
<ul dir="auto">
<li>
<p dir="auto">This is necessary to use the function <code>server-running-p</code> coming up
in the next point:</p>

<p dir="auto">If we omit the above line of Emacs Lisp code, we will encounter
the following error when we try to use <code>server-running-p</code>
discussed in the next point: <code>Symbol’s function definition is void: server-running-p</code>.</p>
</li>
<li>
<p dir="auto">If there is no Emacs server running, start an Emacs server:</p>
<div data-snippet-clipboard-copy-content="(unless (server-running-p)
  (server-start))"><pre>(<span>unless</span> (<span>server-running-p</span>)
  (<span>server-start</span>))</pre></div>
<p dir="auto">The <code>unless</code> expression ensures that there is no Emacs server
running before starting a new Emacs server. If we omit the
<code>unless</code> expression, the following error would occur if an Emacs
server is already running: <code>Warning (server): Unable to start the Emacs server. There is an existing Emacs server, named &#34;server&#34;. To start the server in this Emacs process, stop the existing server or call ‘M-x server-force-delete’ to forcibly disconnect it.</code></p>
<p dir="auto">Finally, the <code>server-start</code> function call starts an Emacs server.</p>
</li>
</ul>
<p dir="auto">When Emacs starts for the first time with the above lines of Emacs
Lisp code in its initialization file, it starts an Emacs server. Now
the following commands can be used on a terminal to edit files:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>emacs</code> or <code>emacs foo.txt bar.txt</code>: Starts another instance of
Emacs. It does not start a new server due to the <code>unless</code>
expression discussed above. Typically, we will not use this
because we don&#39;t want to launch a second instance of Emacs. But it
is good to know that this command still works as expected in case
we ever need it.</p>
</li>
<li>
<p dir="auto"><code>emacsclient foo.txt bar.txt</code>: Opens files in the existing
Emacs instance via the Emacs server. The command waits for us to
finish editing all the files. It blocks the terminal until then.
When we are done editing a file, we must type <code>C-x #</code> to tell
Emacs to switch to the next file. Once we are done editing all the
files, the <code>emacsclient</code> command exits and the shell prompt
returns on the terminal.</p>
</li>
<li>
<p dir="auto"><code>emacsclient foo.txt bar.txt</code>: Opens files in the existing Emacs
instance but does not wait for us to finish editing. The command
exits immediately and the shell prompt returns immediately on the
terminal.</p>
</li>
</ul>
<p dir="auto">Note that the Emacs server quits automatically when we close the first
Emacs instance that started the Emacs server. Running the <code>emacs</code>
command or starting Emacs via another method after that would start
the Emacs server again.</p>
<p dir="auto">Further, note that there is no need to run the <code>emacs</code> or
<code>emacsclient</code> directly. This project provides an <code>em</code> command that
seamlessly chooses the right command depending on the situation. This
command is explained in the next section, so move on to the next
section and use the <code>em</code> command on the terminal to start Emacs or
edit files.</p>
<h2 dir="auto"><a id="user-content-emacs-launcher" aria-hidden="true" href="#emacs-launcher"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Emacs Launcher</h2>
<p dir="auto">In the previous section, we saw how our Emacs initialization file
ensures that an Emacs server is started when we run <code>emacs</code> for the
first time. Once Emacs server has started, we can edit new files from
the terminal using the <code>emacsclient</code> command. However, this means we
need to use two different commands depending on whether we are
starting Emacs for the first time or not. Further, <code>emacsclient</code> is
too long to type conveniently.</p>
<p dir="auto">In this section, we see how a single script named <code>em</code> automatically
decides whether to run <code>emacs</code> or <code>emacsclient</code> depending on the
situation. As a user, we only need to run the <code>em</code> command always.</p>
<p dir="auto">The <code>em</code> script should be already present on the system if the steps
in the <a href="#get-started">Get Started</a> section were followed. The third
step there installs this script to <code>/usr/local/bin/em</code>. Now we discuss
every line of this script in detail.</p>
<ul dir="auto">
<li>
<p dir="auto">We run this script with a shell that supports the <code>disown</code> command
we will use later. Since GNU Bash is one such shell and it is
available by default on a wide variety of Unix and Linux systems,
the shebang line of our <a href="https://github.com/susam/emfy/blob/main/em"><code>em</code></a> script is set to:</p>

<p dir="auto">If Bash is missing from your system, change the interpreter path
in the shebang line to <code>/bin/zsh</code> or <code>/bin/ksh</code> or the path of any
other shell that supports the <code>disown</code> command.</p>
</li>
<li>
<p dir="auto">When <code>em</code> is run without any arguments, start a new Emacs process:</p>
<div data-snippet-clipboard-copy-content="if [ &#34;$#&#34; -eq 0 ]
then
    echo &#34;Starting new Emacs process ...&#34; &gt;&amp;2
    emacs &amp; disown"><pre><span>if</span> [ <span><span>&#34;</span><span>$#</span><span>&#34;</span></span> <span>-eq</span> 0 ]
<span>then</span>
    <span>echo</span> <span><span>&#34;</span>Starting new Emacs process ...<span>&#34;</span></span> <span>&gt;&amp;2</span>
    emacs <span>&amp;</span> <span>disown</span></pre></div>
<p dir="auto">This Emacs process launches a new Emacs frame. Further, if an
Emacs server is not running, it starts a new Emacs server. The
<code>disown</code> command ensures that this Emacs process is not terminated
when we close the terminal or the shell where we ran the <code>em</code>
command.</p>
</li>
<li>
<p dir="auto">When <code>em</code> is run with one or more filenames as arguments and there
is an Emacs server already running, edit the files using the
existing Emacs server:</p>
<div data-snippet-clipboard-copy-content="elif emacsclient -n &#34;$@&#34; 2&gt; /dev/null
then
    echo &#34;Opened $@ in Emacs server&#34; &gt;&amp;2"><pre><span>elif</span> emacsclient -n <span><span>&#34;</span><span>$@</span><span>&#34;</span></span> <span>2&gt;</span> /dev/null
<span>then</span>
    <span>echo</span> <span><span>&#34;</span>Opened <span>$@</span> in Emacs server<span>&#34;</span></span> <span>&gt;&amp;2</span></pre></div>
<p dir="auto">However, if there is no Emacs server already running, the above
command in the <code>elif</code> clause fails and the execution moves to the
<code>else</code> clause explained in the next point.</p>
</li>
<li>
<p dir="auto">When <code>em</code> is run with one or more filenames as arguments and there
is no Emacs server running, start a new Emacs process to edit the
files:</p>
<div data-snippet-clipboard-copy-content="else
    echo &#34;Opening $@ in a new Emacs process ...&#34; &gt;&amp;2
    emacs &#34;$@&#34; &amp; disown
fi"><pre><span>else</span>
    <span>echo</span> <span><span>&#34;</span>Opening <span>$@</span> in a new Emacs process ...<span>&#34;</span></span> <span>&gt;&amp;2</span>
    emacs <span><span>&#34;</span><span>$@</span><span>&#34;</span></span> <span>&amp;</span> <span>disown</span>
<span>fi</span></pre></div>
<p dir="auto">The new Emacs process also starts a new Emacs server.</p>
</li>
</ul>
<p dir="auto">Now that we know what the <code>em</code> script does, let us see the various
ways of using this script as a command:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>em</code>: Start a new instance of Emacs. If there is no Emacs server
running, this ends up starting an Emacs server too. Normally, this
command should be run only once after logging into the desktop
environment.</p>
</li>
<li>
<p dir="auto"><code>em foo.txt bar.txt</code>: Edit files in an existing instance of Emacs
via Emacs server. If no Emacs server is running, this ends up
starting an Emacs server automatically. This command is meant to
be used multiple times as needed for editing files while browsing
the file system in a terminal.</p>
</li>
</ul>
<p dir="auto">That&#39;s it! Only two commands to remember. Start Emacs with <code>em</code> and
edit files with <code>em foo.txt</code>, <code>em foo.txt bar.txt</code>, etc.</p>
<h2 dir="auto"><a id="user-content-opinion-references" aria-hidden="true" href="#opinion-references"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Opinion References</h2>
<ul dir="auto">
<li><a href="https://stackoverflow.com/a/5243421/303363" rel="nofollow">Give paredit mode a chance</a></li>
<li><a href="https://lobste.rs/s/vgjknq/emacs_begin_learning_common_lisp#c_0y6zpd" rel="nofollow">Never warmed up to paredit</a></li>
<li><a href="https://lobste.rs/s/vgjknq/emacs_begin_learning_common_lisp#c_1n78vl" rel="nofollow">Coloring each paren differently only adds noise</a></li>
</ul>
<h2 dir="auto"><a id="user-content-channels" aria-hidden="true" href="#channels"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Channels</h2>
<p dir="auto">The following channels are available for asking questions, seeking
help and receiving updates regarding this project:</p>
<ul dir="auto">
<li>GitHub: <a href="http://github.com/susam/emfy/issues">emfy/issues</a></li>
<li>Twitter: <a href="https://twitter.com/susam" rel="nofollow">@susam</a></li>
<li>Matrix: <a href="https://matrix.to/#/#susam:matrix.org" rel="nofollow">#susam:matrix.org</a></li>
<li>Libera: <a href="https://web.libera.chat/#susam" rel="nofollow">#susam</a></li>
</ul>
<p dir="auto">You are welcome to follow or subscribe to one or more of these channels
to receive updates and ask questions about this project.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">This is free and open source software. You can use, copy, modify,
merge, publish, distribute, sublicense, and/or sell copies of it,
under the terms of the MIT License. See <a href="https://github.com/susam/emfy/blob/main/LICENSE.md">LICENSE.md</a> for details.</p>
<p dir="auto">This software is provided &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND,
express or implied. See <a href="https://github.com/susam/emfy/blob/main/LICENSE.md">LICENSE.md</a> for details.</p>
</article>
        </div></div>
  </body>
</html>
