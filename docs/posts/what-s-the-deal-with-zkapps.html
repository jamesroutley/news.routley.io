<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.cryptologie.net/article/575/whats-the-deal-with-zkapps/">Original</a>
    <h1>What&#39;s the Deal with Zkapps?</h1>
    
    <div id="readability-page-1" class="page"><article>

<p><a href="https://twitter.com/MinaProtocol/status/1563256952230408192">Vitalik recently mentioned zkapps at ETHMexico</a>. But what are these zkapps? By the end of this post you will know what they are, and how they are going to change the technology landscape as we know it.</p>
<p>Zkapps, or <strong>zero-knowledge applications</strong>, are the modern and secure solution we found to allow someone else to compute arbitrary programs, while allowing us to trust the result.
And all of that thanks to a recently rediscovered cryptographic construction called <strong>general-purpose zero-knowledge proofs</strong>.
With it, no need to trust the hardware to behave correctly, especially if you&#39;re not the one running it (cough cough <a href="https://www.google.com/search?q=attacks+on+intel+sgx&amp;oq=attacks+on+intel+sgx&amp;aqs=chrome..69i57j0i271l2j69i60l4j69i61.1713j0j9&amp;sourceid=chrome&amp;ie=UTF-8">intel SGX</a>).</p>
<p>Today, we&#39;re seeing zero-knowledge proofs impacting cryptocurrencies (which as a whole have been a petri dish for cryptographic innovation), but tomorrow I argue that most applications (not just cryptocurrencies) will be directly or indirectly impacted by zero-knowledge technology.</p>
<blockquote>
<p>Because I&#39;ve spent so much time with cryptocurrencies in recent years, auditing blockchains like Zcash and Ethereum at NCC Group, and working on projects like Libra/Diem at Facebook, I&#39;m mostly going to focus on what&#39;s happening in the blockchain world in this post.
If you want a bigger introduction to all of these concepts, check my book <a href="https://www.manning.com/books/real-world-cryptography?a_aid=Realworldcrypto&amp;a_bid=ad500e09">Real-World Cryptography</a>.</p>
</blockquote>
<p>The origin of the story starts with the ancient search for solutions to to the problem of <strong>verifiable computation</strong>; being able to verify that the result of a computation is correct. In other words, that whoever run the program is not lying to us about the result.</p>
<p>Most of the solutions, until today, were based on hardware. Hardware chips were first invented to be &#34;tamper resistant&#34; and &#34;hard to analyze&#34;. Chips capable of performing simple cryptographic operations like signing or encryption.
You would typically find them in sim cards, TV boxes, and in credit cards.
While all of these are being phased out, they are being replaced by equivalent chips called &#34;secure enclaves&#34; that can be found in your phone.
On the enterprise side, more recently technologies were introduced to provide programmability. Chips capable of running arbitrary programs, while providing (signed) attestation that the programs were run correctly. These chips would typically be certified by some vendor (for example, Intel SGX) with some claim that it’s hard to tamper with them.
Unfortunately for Intel and others, the security community has found a lot of interest in publishing attacks on their &#34;secure&#34; hardware, and we see new hacks coming up pretty much every year.
It&#39;s a game of cat and mouse.</p>
<p>Cryptocurrencies is just another field that&#39;s been dying to find a solution to this verifiable computation problem.
The previous hardware solutions I’ve talked about can be found in oracles like <a href="https://www.town-crier.org/">town crier</a>, in bridges like the <a href="https://medium.com/avalancheavax/new-avalanche-bridge-builds-on-intel-sgx-technology-in-breakthrough-for-cross-chain-8f854e0e72e0">Ethereum-Avalanche bridge</a>, or even at the core of cryptocurrencies like <a href="https://mobilecoin.com/">MobileCoin</a>.</p>
<p>Needless to say, I&#39;m not a fan, but I&#39;ll be the first to conceive that in some scenarios you just don&#39;t have a choice.
And being expensive enough for attackers to break is a legitimate solution.
I like to be able to pay with my smartphone.</p>
<p>But in recent years, an old cryptographic primitive that can solve our verifiable computation problem for real has made a huge comeback. Yes you know which one I&#39;m talking about: <strong>general-purpose zero-knowledge proofs (ZKPs)</strong>.</p>
<p>With it, there is no need to trust the hardware: whoever runs the program can simply create a cryptographic proof to convince you that the result is correct.</p>
<p>ZKPs have been used to solve ALL kind of problems in cryptocurrency:</p>
<ul>
<li>&#34;I wish we could process many more transactions&#34; -&gt; simply let someone else run a program that verifies all the transactions and outputs a <em>small</em> list of changes to be made to the blockchain (and a proof that the output is correct). This is what zk rollups do.</li>
<li>&#34;I wish we could mask the sender, recipient, and the amount being transacted&#34; -&gt; just encrypt your transaction! And use a zero-knowledge proof to prove that what&#39;s encrypted is correct. This is what ZCash has done (and Monero, to some extent).</li>
<li>&#34;It takes ages for me to download the whole Bitcoin ledger...&#34; -&gt; simply have someone else do it for you, and give you the resulting latest state (with a proof that it&#39;s correct). That&#39;s what Mina does.</li>
<li>&#34;Everybody using cryptocurrency is just blindly trusting some public server (e.g. Infura) instead of running their own nodes&#34; -&gt; use ZKP to make light clients verifiable! This is what Celo does with Plumo.</li>
<li>&#34;Why can&#39;t I easily transfer a token from one blockchain to another one?&#34; -&gt; use these verifiable light clients. This is what <a href="https://rdi.berkeley.edu/zkp/zkBridge/zkBridge.html">zkBridge</a> proposes.</li>
</ul>
<p>There&#39;s many more, but I want to focus on zkapps (remember?) in this post.
Zkapps are a new way to implement smart contracts. Smart contracts were first pioneered by Ethereum, to allow user programs to run on the blockchain itself.</p>
<p>To explain smart contracts, I like the analogy of a single supercomputer floating in the sky above us. We&#39;re all using the same computer, the one floating in the sky. We all can install our programs on the floating computer, and everyone can execute functions of these programs (which might mutate the state of the program).</p>
<p>The solution found by Ethereum at a time was to implement the concept naively and without using cryptography: </p>
<ul>
<li>Users can install a program by placing the program&#39;s code in a transaction.</li>
<li>Users can execute functions of a program by writing in a transaction the function they want to execute and with what arguments.</li>
<li><strong>Everyone</strong> running a node has to run the functions found in users transactions. All of them. In order to get the result (e.g. move X tokens to wallet Y, update the state of the smart contract, etc.)</li>
</ul>
<p>The last point is the biggest limitation of Ethereum.
We can&#39;t have the user provide the result of executing a function, or anyone else really, because we can&#39;t trust them.
And so, not only this means that everyone is always re executing the same stuff (which is redundant, and slows down the network), but this also means that everything in a smart contract must be public (as everyone must be able to run the function).
There can be no secrets used.
There can be no asynchronous calls or interaction outside of the network while this happens.</p>
<p>This is where zkapps enters the room. Zkapps allow users to run the programs themselves and give everyone else the result (along with a proof).</p>
<p>This not only solves the problem of having everyone re execute the same smart contract calls constantly, but it also opens up new applications as computations can be non-deterministic: they can use randomness, they can use secrets, they can use asynchronous calls, etc.</p>
<p>More than that, the state of a zkapp can now mostly live off-chain, like real applications before Ethereum used to do. Reducing the size of the entire blockchain (<a href="https://ycharts.com/indicators/ethereum_chain_full_sync_data_size">Today, Ethereum is almost 1 terabyte!</a>).
These applications are not limited by the speed of the blockchain, or by the capabilities of the language exposed by the blockchain anymore.</p>
<p>Perhaps, it would be more correct to describe them as mini-blockchains of their own, that can be run as centralized or decentralized applications, similar to L2s or Cosmos zones.</p>
<p>OK. So far so good, but do these zkapps really exist or is it just talk? Well, not yet. But a few days ago, the <a href="https://minaprotocol.com/">Mina</a> cryptocurrency released their implementations of zkapps on a testnet. And if the testnet goes well, there is no reason to believe this won&#39;t unlock a gigantic number of applications we haven&#39;t seen before on blockchains.</p>
<p>You can read the <a href="https://docs.minaprotocol.com/zkapps/tutorials/hello-world">hello world tutorial</a> and deploy your first zkapp in like 5 minutes (I kid you not).
So I highly recommend you to try it. This is the future :)</p>
</article><p>Well done! You&#39;ve reached the end of my post. Now you can <a href="">leave a comment</a> or read something else.</p></div>
  </body>
</html>
