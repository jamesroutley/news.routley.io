<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.graz.io/articles/bayleaf-wireless-keyboard">Original</a>
    <h1>Show HN: Bayleaf – Building a low-profile wireless split keyboard</h1>
    
    <div id="readability-page-1" class="page"><div><picture><source srcset="/assets/keyboard10-Bi-eC6Sk.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard10-DtxxFoCU.png" alt="Keyboard" width="1800" height="1250"/></picture>
<p><span><p>I built a keyboard</p></span></p><hr/>
<dl><p><dt>Type</dt><dd>Wireless &amp; split</dd></p><p><dt>Layout</dt><dd>60% · Ortholinear</dd></p><p><dt>Switches</dt><dd>Kailh · PG1316S</dd></p><p><dt>Keycaps</dt><dd>MFJ · custom design</dd></p><p><dt>Enclosure</dt><dd>CNC machined · aluminum</dd></p><p><dt>Dimensions</dt><dd>W139 · L93 · H5</dd></p><p><dt>Weight</dt><dd>180g</dd></p><p><dt>Firmware</dt><dd>ZMK Studio</dd></p></dl>
<hr/>
<h2>Motivation</h2>
<p>I love the rawness of custom-built ergo keyboards. But for my first serious custom build, I wanted to achieve a more commercial look and finish. Since I had no CAD experience, it was also an excellent chance to learn hardware design, electronics, and million of other skills I never thought I’d need to know.</p>
<h2>Design decisions</h2>
<ul>
<li><mark>Wireless</mark> — non-negotiable, especially with splits. I’m not dealing with any cables. Removing my right
side to make space for mouse movements while gaming still feels magical.</li>
<li><mark>Ortholinear</mark> — is what I’m used to, my two previous keyboards were ortho. And I’ve gotten pretty
proficient with them.</li>
<li><mark>Sans stagger</mark> — I’m not against stagger, I just love the neat look of a pain grid. Lack of stagger also
makes it easier to work with on a hardware level.</li>
<li><mark>Layout</mark> — a larger 60% layout was a deliberate choice to avoid context switching as I often swap between
my Macbook and desktop. I also went with a 17×17mm switch spacing.</li>
<li><mark>Ergonomics</mark> — not gonna lie this is a planned form-over-function kind of deal.</li>
<li><mark>Aluminum</mark> — for aesthetics and to get that finished commercial look. Sacrificing RF signal, potential ESD
issues I was cool with.</li>
</ul>
<hr/>
<picture><source srcset="/assets/keyboard1-bvLThTHZ.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard1-CjhYXdGE.png" alt="Keyboard desktop" width="1800" height="1039"/></picture>

<picture><source srcset="/assets/keyboard2-DlwdmXBs.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard2-NTNQnl-g.png" alt="Keyboard" width="1800" height="1012"/></picture>
<hr/>
<picture><source srcset="/assets/keyboard3-CcENQlUp.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard3-BWrvK4pE.png" alt="Keyboard" width="1800" height="1350"/></picture>

<picture><source srcset="/assets/keyboard4-CQLfbZUR.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard4-BNTiJqP2.png" alt="Keyboard" width="1800" height="1012"/></picture>
<hr/>
<picture><source srcset="/assets/keyboard5-2yd7WWNG.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard5-CB1FGZvT.png" alt="Keyboard" width="1800" height="1350"/></picture>

<picture><source srcset="/assets/keyboard6-CdhY2W95.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard6-DTKLgWp_.png" alt="Keyboard" width="1800" height="1350"/></picture>
<hr/>
<picture><source srcset="/assets/keyboard8-CPrtBN_W.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard8-CCtp_GRQ.png" alt="Keyboard" width="1800" height="1080"/></picture>

<picture><source srcset="/assets/keyboard9-DuSYV7p7.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard9-BZWjaCWj.png" alt="Keyboard" width="1800" height="1183"/></picture>
<hr/>
<p><img src="http://harihareswara.net/typing.gif" alt="Keyboard gif"/></p>
<hr/>
<h2>Build log</h2>
<p>Mikefive’s keyboard post on Reddit had me impressed. He showed the world that it’s possible to build ergo keyboards that are of commercial caliber, low-profile and accessible for hobbyist. Making my decision to invest time and resources much easier. And so, I dove in.</p>
<p>The project began with sketching. While these 2D sketches were created months earlier, I repurposed them to test how the components would fit within the enclosure, incorporating my new ideas.</p>
<hr/>
<picture><source srcset="/assets/sketch-CQTelCXv.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/sketch-Clqa5jsG.png" alt="Drawing" width="1800" height="993"/></picture>

<p>Then onto scary schematics. I didn’t get creative here and used a simple keyboard matrix for the switches. This is standard practice for MCUs of this size. Each row and column connects to its own pinout on the MCU. Using a total of 11 pins.</p>
<picture><source srcset="/assets/schematics-D_9Wgyhq.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/schematics-CzZpB6mT.png" alt="Schematics" width="1800" height="1238"/></picture>
<p>After the schematics, I admittedly had a lot of fun designing the PCB layout. I landed on separating the sides by V-cuts, which lets me snap the PCBs apart by hand. Combining the sides also kept my files tidy and a little cheaper to manufacture.</p>
<p>The actual logic was built around a nice!nano microcontroller. This controller has all the spicy stuff like power management and antennas already build in. This allowed me to keep things simple, no extra LEDs, no screens, no rotary encoders. Just the bare minimum for power and communication.</p>
<picture><source srcset="/assets/pcb-Cn4DJSrG.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/pcb-ChVdaFlR.png" alt="PCB" width="1800" height="838"/></picture>
<p>Designing the aluminum enclosure was another curveball. It was the first time I worked with a parametric design software which required some level of brain rewiring. Early on I had discarded tons of near finished files because they’d break randomly when tweaking the dimensions, simply because the order of the changes I made were incorrect.</p>
<p>I counted about 100 versions of the case before I settled for this final version. That said, it was incredibly motivating to model stuff you know will exist in the physical world soon.</p>
<picture><source srcset="/assets/case-grNAGHYs.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/case-DpNQ6sVe.png" alt="Case" width="1800" height="880"/></picture>
<p>I realized I needed optimize for CNC-machining. Which meant removing any enclosed overhangs, or features that a drill can’t reach physically. And of course removing any sharp corners that can’t be cut by a round drill bit.</p>
<picture><source srcset="/assets/drawing-CoOhb2Z_.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/drawing-Dh1UrlC9.png" alt="Drawing" width="1800" height="1270"/></picture>
<picture><source srcset="/assets/fusion-CZhqNthX.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/fusion-Cy6hjLfv.png" alt="Fusion" width="1800" height="920"/></picture>
<p>I started working on the custom keycaps pretty soon after I finished the build. The stock caps simply didn’t cut it in terms of fit tolerances and sound profile. Some research led me to MJF/SLS printing which could handle the small tolerances I needed for the PG1316 switches.</p>
<p>At the time of writing the caps are still WIP as I’m testing lots of different fits and sizes. I don’t own a 3D printer (yet) so I needed to design all variations in one go to save on manufacturing costs, yikes!</p>
<picture><source srcset="/assets/keycaps-D8ceHL-a.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keycaps-Cd6fICTn.png" alt="Keycap" width="1800" height="882"/></picture>
<h2>Assembly</h2>
<p>The kitchen became my workspace for the assembly. Production of regular carbonaras were seized. Production of keyboarnaras commenced. Now you know this wasn’t written by AI.</p>
<p>Tool shout-out</p>
<ul>
<li>Bismuth based &amp; lead-free low-temp solder paste</li>
<li>Water soluble, no-clean flux</li>
<li>Miniware 50x50mm hotplate</li>
<li>Isopropyl alcohol for cleaning</li>
<li>Standard soldering gear</li>
<li>Multimeter</li>
</ul>
<picture><source srcset="/assets/building-DjLS9PhU.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/building-MlLsYz0R.png" alt="Building" width="1800" height="1042"/></picture>
<h2>Challenges</h2>
<p>Two challenges stood out in the build process, soldering, and cleaning.</p>
<p>Hotplate soldering a 1 mm thick PCB board leads to warping. And bent surfaces are difficult to heat evenly. During each soldering attempt I had to monitor for: surface contact, reflow temperature, temperature buildup profile, not overcooking it, ensuring switch alignment, chasing solder balls with flux, all while not burning myself. My hands were full.</p>
<p>I ordered a massive SMD stencil in a frame which I didn’t end up using because the switches required some serious baby-sitting to ensure good connection. I found the best method to prevent mis-soldered connections was to manually apply about 3x more paste than a stencil would.</p>
<hr/>
<picture><source srcset="/assets/build-6B34FtXL.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/build-YRUXGFDO.png" alt="Building" width="1800" height="1279"/></picture>

<p>The second challenge was cleaning. The “no-clean” solder flux needed to be washed away to avoid it oxidizing. When the isopropyl alcohol didn’t bite, I eventually found boiling hot water to wash away the flux residue. I should really start reading the specs.</p>
<p>The moisture sensitive bismuth solder was messy to use, leading to very tiny liquid solder balls flying everywhere during soldering. Even perfect solder connections needed to be manually brushed and cleaned.
It helped to solder the switches in groups of 4, clean after each round, and move onto the next.</p>
<p>Each 5x6 grid of switches took me a full day to solder. It was likely the least efficient manufacturing shop in the EU at one point.</p>
<hr/>
<picture><source srcset="/assets/almost-BCG2OOAR.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/almost-fczcazo8.png" alt="Almost" width="1800" height="2015"/></picture>

<h2>Verdict</h2>
<p>Despite many opportunities for things to go wrong, things went smooth. Parts that needed to fit, did fit. Electrons flowed where they needed to flow. Tolerances that tolerated. No Li-Po batteries exploding spicy pillow style. Installing the firmware was a breeze thanks to ZMK.</p>
<p>Any mistakes in the build were all fixable during assembly. My first hotplate arrived DOA, but that only resulted in a minor delay. I’ll be chasing the high I felt when it registered its first keypress. Pretty ridiculous, but it was months of work manifested in the form of <code>wwwwwwwwwww</code> written in my browser tab.</p>
<p>Typing on the keyboard is very comfortable due to it’s low height. No more wrist arching. The switches have 32g of actuation force which is quite heavy for laptop-style switches, and results in a pretty clicky sound profile. But their motion feels great. The custom keycaps really helps to mellow the sound, which is promising.</p>
<p>Final verdict, planning and building was an amazing learning experience. The final product exceeded my expectations. My appetite to build is not satiated yet. I look forward to building an even better version soon, equipped with more skills to boot.</p>
<picture><source srcset="/assets/keyboard7-CJR7a8q-.avif" type="image/avif"/><img loading="lazy" src="http://harihareswara.net/assets/keyboard7-DgdA1HW4.png" alt="Keyboard" width="1800" height="1080"/></picture>
<h2>Oopsies</h2>
<p>Of course not everything was smooth sailing. Here are some mistakes I made that humbled me good.</p>
<ul>
<li>Not putting vias in the copper pads of the switches, this led to slightly colder connection between the hotplate and PCB.</li>
<li>Using white solder mask for the PCB, oxidizes into a reddish color when overheated</li>
<li>Forgetting to change the nice!nano PCB footprint to be surface mounted instead of through-hole. I had to put polyamide tape on the bottom and solder it by hand manually. This ended up being a nice fix which was suggested by Mike’s friend Coen.</li>
<li>Physical reset button still would have been nice, waking up the keyboard sometimes requires a reset. Currently the button is hidden under the enclosure making it hard to reach. This is only a problem if the battery is really low.</li>
<li>Not pre-baking the boards prior to soldering, small bumps would appear on the PCB board during soldering from the trapped moisture</li>
<li>Not putting more effort into acoustics and vibration mitigation. Small changes to the enclosure to better handle how sound travels during typing.</li>
<li>Not a real oopsie because I fixed it last minute. When ordering the case I didn’t specify to anodize the case after media blasting. It’s an important step to prevent ugly oxidation and fat finger marks.</li>
</ul>
<h2>Looking ahead</h2>
<p>Here are some ideas for the next iteration.</p>
<ul>
<li>Improved thumb cluster</li>
<li>More ergonomic design considerations</li>
<li>Rethink stagger setup</li>
<li>Physical reset button</li>
<li>More personalization on the aluminum case</li>
<li>Integrated PCB components to have more control over antenna placement</li>
<li>Longer chassis side-skirts to allow ad-hoc post production solutions like adding additional foam layers to reduce vibrations and improve sound profile</li>
<li>Enclose bottom of the chassis with material to prevent PCB from freely bending, further reducing vibration</li>
<li>Magnet snapping for traveling</li>
<li>Bigger enclosure border radii</li>
<li>LED 1x3 array indicator to show layers and other commands</li>
<li>Experiment with smaller switches like the PG1316M to find new interesting layouts</li>
<li>Pointer devices and rotary encoders</li>
</ul>
<h2>Socials</h2>
<ul>
<li><a href="https://x.com/grazsebastian" target="_blank" rel="noopener noreferrer">Twitter/X</a></li>
<li><a href="https://bsky.app/profile/graz.io" target="_blank" rel="noopener noreferrer">Bluesky</a></li>
<li>
<a href="http://harihareswara.net/">Portfolio</a>
</li>
<li>
<span><a>Email</a><span> copied</span></span>
</li>
</ul>
<h2>FAQ</h2>
<div><div><div><p>How long did it take to build?</p></div></div><div><div><p>Are you planning to sell this keyboard at scale?</p></div></div><div><div><p>Which manufacturers did you use?</p></div></div><div><div><p>Where did you source the switches?</p></div></div></div><hr/></div></div>
  </body>
</html>
