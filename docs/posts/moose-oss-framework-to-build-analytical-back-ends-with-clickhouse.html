<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://docs.fiveonefour.com/moose">Original</a>
    <h1>Show HN: Moose – OSS framework to build analytical back ends with ClickHouse</h1>
    
    <div id="readability-page-1" class="page"><article><main><h3>Moose</h3>
<div><pre tabindex="0"><code dir="ltr"><span><span>bash</span><span> -i</span><span> &lt;(</span><span>curl</span><span> -fsSL</span><span> https://fiveonefour.com/install.sh)</span><span> moose</span></span></code></pre></div>

<h3 id="what-is-moose">What is Moose?</h3>
<p>Moose lets you develop analytical backends in pure TypeScript or Python code like this:</p>
<div tabindex="-1"><div><div id="headlessui-tabs-panel-:R1k5l9d6:" role="tabpanel" tabindex="0" data-headlessui-state="selected" data-selected=""><div><pre tabindex="0"><code dir="ltr"><span><span>import</span><span> { Key, OlapTable, Stream, IngestApi, ConsumptionApi } </span><span>from</span><span> &#34;@514labs/moose-lib&#34;</span><span>;</span></span>
<span> </span>
<span><span>interface</span><span> DataModel</span><span> {</span></span>
<span><span>  primaryKey</span><span>:</span><span> Key</span><span>&lt;</span><span>string</span><span>&gt;;</span></span>
<span><span>  name</span><span>:</span><span> string</span><span>;</span></span>
<span><span>}</span></span>
<span><span>// Create a ClickHouse table</span></span>
<span><span>export</span><span> const</span><span> clickhouseTable</span><span> =</span><span> new</span><span> OlapTable</span><span>&lt;</span><span>DataModel</span><span>&gt;(</span><span>&#34;TableName&#34;</span><span>);</span></span>
<span> </span>
<span><span>// Create a Redpanda streaming topic</span></span>
<span><span>export</span><span> const</span><span> redpandaTopic</span><span> =</span><span> new</span><span> Stream</span><span>&lt;</span><span>DataModel</span><span>&gt;(</span><span>&#34;TopicName&#34;</span><span>, {</span></span>
<span><span>  destination: clickhouseTable,</span></span>
<span><span>});</span></span>
<span> </span>
<span><span>// Create an ingest API endpoint</span></span>
<span><span>export</span><span> const</span><span> ingestApi</span><span> =</span><span> new</span><span> IngestApi</span><span>&lt;</span><span>DataModel</span><span>&gt;(</span><span>&#34;post-api-route&#34;</span><span>, {</span></span>
<span><span>  destination: redpandaTopic,</span></span>
<span><span>});</span></span>
<span> </span>
<span><span>// Create consumption API endpoint</span></span>
<span><span>interface</span><span> QueryParams</span><span> {</span></span>
<span><span>  limit</span><span>?:</span><span> number</span><span>;</span></span>
<span><span>}</span></span>
<span><span>export</span><span> const</span><span> consumptionApi</span><span> =</span><span> new</span><span> ConsumptionApi</span><span>&lt;</span><span>QueryParams</span><span>, </span><span>DataModel</span><span>&gt;(</span><span>&#34;get-api-route&#34;</span><span>, {</span></span>
<span><span>  async</span><span> handler</span><span>({</span><span>limit</span><span> =</span><span> 10</span><span>}</span><span>:</span><span> QueryParams</span><span>, {</span><span>client</span><span>, </span><span>sql</span><span>})</span><span>:</span><span> {</span></span>
<span><span>    const</span><span> result</span><span> =</span><span> await</span><span> client.query.</span><span>execute</span><span>(</span><span>sql</span><span>`</span><span>SELECT</span><span> *</span><span> FROM</span><span> ${</span><span>clickhouseTable</span><span>}</span><span> LIMIT</span><span> ${</span><span>limit</span><span>}</span><span>`);</span></span>
<span><span>    return</span><span> await</span><span> result</span><span>.</span><span>json</span><span>();</span></span>
<span><span>  }</span></span>
<span><span>});</span></span></code></pre></div></div></div></div>
<h3 id="core-capabilities">Core Capabilities</h3>

<hr/>
<h3 id="why-moose-exists">Why Moose Exists</h3>
<p><img alt="Why Moose Exists" role="button" aria-expanded="false" aria-label="Zoom in" loading="lazy" width="1000" height="1000" decoding="async" data-nimg="1" src="https://docs.fiveonefour.com/backend-light.svg"/><img alt="Why Moose Exists" role="button" aria-expanded="false" aria-label="Zoom in" loading="lazy" width="1000" height="1000" decoding="async" data-nimg="1" src="https://docs.fiveonefour.com/backend-dark.svg"/></p>
<div><h3>Building Analytical Backends With Today&#39;s Tooling is Slow</h3><div><div><div><div><div><h4>Tool fragmentation</h4><p>More time spent integrating Kafka, ClickHouse, Postgres, dbt, Airflow, and a dozen other services instead of building your actual application</p></div></div></div></div><div><div><div><div><h4>Schema drift everywhere</h4><p>Your TypeScript or Python models, database schemas, API validation, and message formats all diverge over time</p></div></div></div></div><div><div><div><div><h4>Painful development workflow</h4><p>No local testing, long deployment cycles, and constant context switching</p></div></div></div></div><div><div><div><div><h4>SQL-only processing</h4><p>Having to use SQL for everything when you&#39;d rather use languages you&#39;re already comfortable with</p></div></div></div></div></div></div>
<h3 id="the-diy-approach">The DIY Approach</h3>
<div><h3>What if you need to add a simple string field to your data model?</h3><div><div><div><div><p><span>1</span></p><p><h4>Update your TS/Python Code Model</h4></p></div></div></div><div><div><div><p><span>2</span></p><p><h4>Update your Database Schema</h4></p></div></div></div><div><div><div><p><span>4</span></p><p><h4>Update your Runtime Validation</h4></p></div></div></div><div><div><div><p><span>5</span></p><p><h4>Update your transformations &amp; queries</h4></p></div></div></div></div></div>
<p><em>Can you see the problem? This process repeats for <strong>every change</strong>.</em></p>
<p>You also have to test that everything is working together in a safe, isolated dev environment, which is even more painful with so many moving parts.</p>
<h3 id="what-moose-does">What Moose Does</h3>
<p>With Moose, your TypeScript and Python code is the single source of truth for <strong>both your data application logic AND your data infrastructure</strong>:</p>
<div><pre tabindex="0"><code dir="ltr"><span><span>// Define your model ONCE</span></span>
<span><span>import</span><span> { Key, IngestPipeline } </span><span>from</span><span> &#34;@514labs/moose-lib&#34;</span><span>;</span></span>
<span> </span>
<span><span>interface</span><span> ExampleModel</span><span> {</span></span>
<span><span>  primaryKey</span><span>:</span><span> Key</span><span>&lt;</span><span>string</span><span>&gt;;</span></span>
<span><span>  name</span><span>:</span><span> string</span><span>;</span></span>
<span><span>  nested</span><span>:</span><span> {</span></span>
<span><span>    isActive</span><span>:</span><span> boolean</span><span>;</span></span>
<span><span>    value</span><span>:</span><span> number</span><span>;</span></span>
<span><span>    internalName</span><span>:</span><span> string</span><span>;</span></span>
<span><span>  }[];</span></span>
<span><span>  createdAt</span><span>:</span><span> Date</span><span>;</span></span>
<span><span>}</span></span>
<span> </span>
<span><span>// And use it EVERYWHERE - ONE line to wire everything up</span></span>
<span><span>export</span><span> const</span><span> examplePipeline</span><span> =</span><span> new</span><span> IngestPipeline</span><span>&lt;</span><span>ExampleModel</span><span>&gt;(</span><span>&#34;example&#34;</span><span>, {</span></span>
<span><span>  ingest: </span><span>true</span><span>,    </span><span>// Creates API endpoint with validation</span></span>
<span><span>  stream: </span><span>true</span><span>,    </span><span>// Creates properly structured Redpanda topic</span></span>
<span><span>  table: </span><span>true</span><span>      // Creates ClickHouse database table</span></span>
<span><span>});</span></span></code></pre></div>
<div><h3>You get end-to-end infrastructure for your data pipeline that is:</h3><div><div><div><div><p><h4>Defined purely in TypeScript or Python code</h4></p></div></div></div><div><div><div><p><h4>Completely type safe and validated</h4></p></div></div></div><div><div><div><p><h4>Able to catch errors at dev time, not at runtime</h4></p></div></div></div></div></div>
<div><h3>No More Context Switching</h3><div><div><div><div><p><h4>“Does my Database table use snake_case or camelCase?”</h4></p></div></div></div><div><div><div><p><h4>“Did I add the new field to both the model AND the table?”</h4></p></div></div></div><div><div><div><p><h4>“Which database field was nullable again?”</h4></p></div></div></div></div></div>
<h3 id="local-dev-in-seconds">Local Dev in Seconds</h3>
<div><h3>Local Dev Benefits</h3><div><div><div><div><div><h4>One-command startup</h4><p>Launch your entire data infrastructure locally with a single command</p></div></div></div></div><div><div><div><div><h4>Zero configuration</h4><p>All components come pre-configured and fully integrated - no setup required</p></div></div></div></div><div><div><div><div><h4>Production parity</h4><p>Use the same technologies and logic that will run in production</p></div></div></div></div><div><div><div><div><h4>Real-time feedback</h4><p>See your changes reflected instantly throughout the stack</p></div></div></div></div></div></div>
<p>Moose comes with a pre-configured and fully integrated data stack that runs entirely on your laptop. Spin it up with one command:</p>

<p>All the infrastructure is automatically spun up:</p>
<div><pre tabindex="0"><code dir="ltr"><span><span>⡏ Starting local infrastructure</span></span>
<span><span>  Successfully started containers</span></span>
<span><span>     Validated clickhousedb-1 docker container</span></span>
<span><span>     Validated redpanda-1 docker container</span></span>
<span><span>  Successfully validated red panda cluster</span></span>
<span><span>     Validated temporal docker container</span></span>
<span><span>  Successfully ran local infrastructure</span></span></code></pre></div>
<div><h3>Common workflow scenarios</h3><div><div><div><div><div><h4>Need to add or change a model?</h4><p>Moose hot reloads it to your local infrastructure when you save</p></div></div></div></div><div><div><div><div><h4>Added a new field?</h4><p>It&#39;s instantly available in your API, streams, and database</p></div></div></div></div><div><div><div><div><h4>Need to test your pipeline?</h4><p>Send sample data to your local ingest API and see the data flow through</p></div></div></div></div></div></div>
<h3 id="hot-reloading-dev-workflow-in-action">Hot Reloading Dev Workflow in Action</h3>
<p>Make a change to your model:</p>
<div><pre tabindex="0"><code dir="ltr"><span><span>// Add a field to your model</span></span>
<span><span>interface</span><span> ExampleModel</span><span> {</span></span>
<span><span>  primaryKey</span><span>:</span><span> Key</span><span>&lt;</span><span>string</span><span>&gt;;</span></span>
<span><span>  name</span><span>:</span><span> string</span><span>;</span></span>
<span><span>  nested</span><span>:</span><span> {</span></span>
<span><span>    isActive</span><span>:</span><span> boolean</span><span>;</span></span>
<span><span>    value</span><span>:</span><span> number</span><span>;</span></span>
<span><span>    internalName</span><span>:</span><span> string</span><span>;</span></span>
<span><span>  }[];</span></span>
<span><span>  createdAt</span><span>:</span><span> Date</span><span>;</span></span>
<span data-highlighted-line=""><span>  status</span><span>:</span><span> string</span><span>; </span><span>// New field</span></span>
<span><span>}</span></span></code></pre></div>
<p>Hit save and youll see your changes hot reloaded to your local infrastructure:</p>
<div><pre tabindex="0"><code dir="ltr"><span><span>⢹ Processing Infrastructure changes from file watcher</span></span>
<span><span>             ~ Topic: orders - Version: 0.0 - Retention Period: 604800s - Partition Count: 1</span></span>
<span data-highlighted-line=""><span>             ~ Table orders with column changes: [Added(Column { name: &#34;status&#34;, data_type: String, required: true, unique: false, primary_key: false, default: None })] and order by changes: OrderByChange { before: [], after: [] }</span></span>
<span><span>             ~ Topic to Table Sync Process: orders_0_0 -&gt; orders</span></span>
<span><span>             ~ API Endpoint: orders - Version: 0.0 - Path: ingest/orders - Method: POST - Format: Some(Json)</span></span></code></pre></div>
<div><h3>That&#39;s it! No additional steps needed.</h3><div><div><div><div><p><h4>Your API now validates this field</h4></p></div></div></div><div><div><div><p><h4>Your database schema is updated</h4></p></div></div></div><div><div><div><p><h4>Your streams carry the new field</h4></p></div></div></div></div></div>
<hr/>
<h3 id="modularity">Modularity</h3>
<p>Moose is designed to be modular and configurable. You can pick and choose which components you need and configure them to your liking.</p>
<div><h3>Default Moose Stack:</h3><div><div><div><div><div><h4>ClickHouse</h4><p>OLAP database (always enabled)</p></div></div></div></div><div><div><div><div><h4>Redpanda</h4><p>Kafka-compatible event streaming platform (can be disabled)</p></div></div></div></div><div><div><div><div><h4>Temporal</h4><p>Workflow orchestration (can be disabled)</p></div></div></div></div></div></div>

<div><h3>Planned Extensions:</h3><div><div><div><div><div><h4>Snowflake, Databricks, and BigQuery</h4><p>Cloud-native data warehouses</p></div></div></div></div><div><div><div><div><h4>Kafka, Kinesis, and Pulsar</h4><p>Kafka-compatible event streaming platforms</p></div></div></div></div></div></div>
<p><a href="https://calendly.com/d/cmh5-nrj-9nc/talk-to-engineering">Let us know</a> if you’d like to see support for specific platforms in your stack.</p>
<hr/>
<h3 id="what-can-you-build-with-moose">What Can You Build with Moose?</h3>
<p>Moose is ideal for a wide range of data-intensive applications, from real-time analytics to complex data pipelines:</p>
<div><div><p>User Facing Analytics</p><p>Embed leaderboards, charts, metrics, and other real-time features in your web or mobile apps</p></div><div><p>BI and Data Warehouses</p><p>Collect disparate data sources into an analytical database, produce custom reports, and more</p></div><div><p>Data Migrations</p><p>One-time migration of data from legacy systems to a modern data backend</p></div><div><p>Event Streaming</p><p>Real-time processing of events from Kafka, Redpanda, or other event streaming platforms</p></div><div><p>ETL Workloads</p><p>Repeated batch jobs to collect data from different sources and load them into an analytics environment</p></div></div>
<hr/>
<h3 id="community">Community</h3>
<div><div><div><h3>GitHub</h3><p>Star, check out the code, and contribute to Moose on GitHub</p></div></div><div><div><h3>Talk to the Moose Maintainers</h3><p>We&#39;re always looking to improve Moose and would love to hear from you!</p></div></div></div></main></article></div>
  </body>
</html>
