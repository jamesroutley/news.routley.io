<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://petermalmgren.com/biscuitsec-0/">Original</a>
    <h1>Notes on Biscuits for Authentication</h1>
    
    <div id="readability-page-1" class="page"><div><h2 id="what-are-biscuits">What are biscuits?</h2><p><a href="https://www.biscuitsec.org/">Biscuits</a> are a way to implement authorization tokens, such as <a href="https://fly.io/blog/api-tokens-a-tedious-survey/#biscuits">API tokens</a>, <a href="https://www.oauth.com/oauth2-servers/access-tokens/">OAuth access tokens</a>, and <a href="https://docs.djangoproject.com/en/4.1/topics/http/sessions/#enabling-sessions">session ID cookie values</a>.</p><h2 id="important-concepts--terminology">Important Concepts &amp; Terminology</h2><ul><li><strong>Authentication</strong> is the process of verifying that someone is who they say they are</li><li><strong>Authorization</strong> is the process of verifying that a token has access to do some operation on a resource</li><li><strong>Proof of possession</strong> is a process to prove that someone is in possession of a private key</li><li><strong>Delegation</strong> is a way to give someone else access to act on your behalf in an authorization systems, either implicitly via a bearer token, or explicitly via attenuation</li><li><strong>Attenuation</strong> is the process of adding a restriction to a token to support delegation</li><li><strong>Bearer tokens</strong> are credentials which grant access to resources, delegating the authority associated with them to the holder of the token</li><li><strong>Sessions</strong> are some proof that a a user has authenticated, and are usually stored or identified by a cookie</li><li><strong>Centralized or stateful authentication</strong> is a system of authentication that relies in a bearer token and some database to verify that a token is valid</li><li><strong>Decentralized or stateless authentication</strong> is a system of authentication that relies on cryptography to verify that a token is valid</li></ul><h2 id="comparisons">Comparisons</h2><h3 id="biscuits-vs-jwts">Biscuits vs JWTs</h3><p>Biscuits are similar to <a href="https://jwt.io/introduction">JWTs</a> in that they carry context about who is making the request and use public key cryptography for token verification. They both support <strong>stateless authentication</strong>.</p><p>Biscuits are different from JWTs by specifying that the <a href="https://www.biscuitsec.org/docs/reference/cryptography/">Ed25519 algorithm</a> be used for cryptographic operations, which are verifying and creating tokens.</p><p>In contrast to Biscuits, which mandate signing as part of the specification, JWTs can be unsigned or signed. If they are signed, the implementor is responsible for determining which encryption algorithm to use.</p><p>JWTs carry a JSON document, the keys of which are called claims, some of which are <a href="https://www.iana.org/assignments/jwt/jwt.xhtml">specifically defined</a> while others can be defined by the implementor. JWTs are considered to be <strong>bearer tokens</strong> and the claims can support <strong>authorization</strong>.</p><p>And although JWTs shouldn’t be used for <a href="https://redis.com/blog/json-web-tokens-jwt-are-dangerous-for-user-sessions/">user sessions</a> and a lot of people <a href="https://gist.github.com/samsch/0d1f3d3b4745d778f78b230cf6061452">seem to</a> <a href="https://apibakery.com/blog/tech/no-jwt/">really</a> <a href="https://betterprogramming.pub/stop-using-json-web-tokens-for-authentication-use-stateful-sessions-instead-c0a803931a5d">hate them</a>, chances are you will have to deal with them at some point if you work with <a href="https://openid.net/connect/">OpenID Connect</a> or products like <a href="https://supabase.com/">Supabase</a>.</p><h3 id="biscuits-vs-macaroons">Biscuits vs Macaroons</h3><p>Biscuits are really similar to <a href="https://research.google/pubs/pub41892/">macaroons</a> in a number of ways:</p><ol><li>They both support <strong>stateless authentication</strong></li><li>They both provide <strong>attenuation</strong> to support <strong>token delegation</strong></li><li>They both carry <strong>authorization</strong> policies, along with a way to verify those policies</li></ol><p>The main difference between biscuits and macaroons is in the encryption algorithms they use. Macaroons use <a href="https://en.wikipedia.org/wiki/Message_authentication_code">MAC (message authentication code) encryption</a> which requires a shared secret key to generate and verify that the tokens are valid. Biscuits use public key cryptography, which means that consumers of biscuits can verify their validity by sharing non-secret public keys with each other.</p><h3 id="biscuits-vs-centralized-token-service">Biscuits vs Centralized Token Service</h3><p>By “a centralized token service” I mean some centralized database or service which:</p><ol><li>Generates cryptographically random values and associates them with credentials</li><li>Can associate those credentials with permissions to support <strong>authorization</strong></li><li>Can generate new credentials with a more limited subset of permissions from existing credentials to support <strong>delegation</strong> and <strong>attenuation</strong></li></ol><p>The main difference between a biscuit and a centralized token service is that we need to talk to a database or a service to perform authentication and verify a user.</p><p>Biscuits can also be used as part of some centralized token service. Each biscuit has a unique <a href="https://www.biscuitsec.org/docs/guides/revocation/">revocation ID</a> that can be used to stop it from being used in the case of a breach or a user logout.</p></div></div>
  </body>
</html>
