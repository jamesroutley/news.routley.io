<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ddramdisk.store/">Original</a>
    <h1>DDRamDisk: RAM disk, a disk based on RAM memory chips</h1>
    
    <div id="readability-page-1" class="page"><div>
			<main id="primary">

				
<article id="post-2" class="page">
	<!-- .entry-header -->

	
	<div>
		
<p>RAM disk, this is a disk based on RAM memory chips. This kind of disk is not able to retain data after the power is turned off (unless a supporting battery is used), but has an exceptionally high read/write speed (especially for random access) and an unlimited lifespan. It is important in tasks that need a lot of cycles to write over information, even professional SSD drives don’t live long. To the operating system the RAM disk is indistinguishable from an SSD or HDD disk and no special drivers or setup is required. Unlike a disk that is virtually located in the computer’s RAM memory, where the maximum memory capacity is limited to 128-256 GB in the best consumer motherboards, a RAM disk for a PCIe slot, in general, has no volume limits and can work in any MB with a PCIe slot.</p>



<p>This project has started several year ago as part of a DC program (*distributed computing). With time, the internet speed has grown and the major problem of DC speed has been the low speed of HDDs. SSDs partially addressed this issue, but the higher wear of SSDs due to continuous job overwrites drove away new DC network users. Nobody likes to ruin their expensive SSD for a noetic goal. However, resource and fast write/read speeds with consistent lag are very critical for DC computing, where delay or failure in each segment slows down the whole compute network.</p>



<p>At that moment, our team generated an imaging of the future RAM disk using old good DDR3 memory. The thing is that such memory is cheap enough – about 40 cents per gigabyte – and readily accessible in big quantities now, during the silicon crisis. The DDR3 chips can bring the cost of the end device to a reasonable level without any loss of features or reliability. </p>



<p>The second evident condition is that the future drive works in the same way as HDD or SSD drive and is completely compatible with the OS and software products. That is why the Silicon Motion SM2264 chip was used (from may 2022). The chip supports PCIe x4, NVME 1.3, native DDR memory for clutter buffering and 8 channels of NAND/TLC memory. This allows it to use all available PCIe x4 speeds with no loss of speed.</p>



<p>Using memory slots would require more board area. The number of passive components required for impedance matching would increase. And of course the cost would have increased many times over.</p>



<p><strong>The first problem </strong>lurked in the fact that the interfaces of NAND and DDR memory are very much different and just plugging in DDR instead of NAND would not work.</p>



<p><strong>The second problem </strong>was the length of the wires between the DDR chip and the SM2264 cannot be infinite. And to build up to 1 TB we would need 256 DDR memory chips of 4GB each.</p>



<p>An FPGA as an intermediate between SM2264 and DDR was called for, but<strong> the third problem </strong>was that a hard memory controller of the FPGA cannot address that many DDR memory chips.</p>



<p>I would not waste your time on the background of our quest, but in result we came to an architectural solution with four FPGAs evenly spread over the card’s PCB, each of them connected to two banks of 32 DDR chips and programmatically emulated the work of two NAND chips each.</p>



<div><figure><img loading="lazy" width="1024" height="682" src="https://ddramdisk.store/wp-content/uploads/2021/07/1-1024x682.gif" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/1-1024x682.gif 1024w, https://ddramdisk.store/wp-content/uploads/2021/07/1-300x200.gif 300w, https://ddramdisk.store/wp-content/uploads/2021/07/1-768x512.gif 768w, https://ddramdisk.store/wp-content/uploads/2021/07/1-600x400.gif 600w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div>



<p>This solution ensures that the SM2264 (is used from may 2022) does not detect a trick and works with the memory the same way it does with NAND chips. The lengths of the wires separating the FPGA and the furthest DDR chip in the bank are within tolerance and their impedances can be matched using resistors and DCI (*Digitally Controlled Impedance) technology. The larger 12-layer board area and abundant free space has allowed us to reduce a lot of passive components using <a rel="noreferrer noopener" href="https://dl.acm.org/doi/10.1147/rd.293.0277" target="_blank">interlayer capacitance</a> and the own wires resistance. This solution was carefully tested in HyperLynx and then confirmed to work in the prototype. The example of this tracing is shown in Fig.</p>



<div><figure><img loading="lazy" width="624" height="471" src="https://ddramdisk.store/wp-content/uploads/2021/07/2.png" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/2.png 624w, https://ddramdisk.store/wp-content/uploads/2021/07/2-300x226.png 300w, https://ddramdisk.store/wp-content/uploads/2021/07/2-600x453.png 600w" sizes="(max-width: 624px) 100vw, 624px"/></figure></div>



<p>Additionally, the card is fitted with a Power Management Module (PIMC) and a boot system with two BIOS memory chips which contain bitstreams and configuration information. Two of these chips were installed for reliability reasons. The card also includes a load light column and a screen that displays the status of the drive’s operation, self-test codes, and errors. This small helper lets you quickly troubleshoot and find out problems. The below pictures show the PCB project and manufactured PCBs.</p>



<div><figure><img loading="lazy" width="811" height="278" src="https://ddramdisk.store/wp-content/uploads/2021/07/0.png" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/0.png 811w, https://ddramdisk.store/wp-content/uploads/2021/07/0-300x103.png 300w, https://ddramdisk.store/wp-content/uploads/2021/07/0-768x263.png 768w, https://ddramdisk.store/wp-content/uploads/2021/07/0-600x206.png 600w" sizes="(max-width: 811px) 100vw, 811px"/></figure></div>



<figure><ul><li><figure><img loading="lazy" width="1024" height="811" src="https://ddramdisk.store/wp-content/uploads/2021/07/6-1024x811.jpg" alt="" data-id="79" data-full-url="https://ddramdisk.store/wp-content/uploads/2021/07/6.jpg" data-link="https://ddramdisk.store/about_product/6-2/" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/6-1024x811.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2021/07/6-300x238.jpg 300w, https://ddramdisk.store/wp-content/uploads/2021/07/6-768x608.jpg 768w, https://ddramdisk.store/wp-content/uploads/2021/07/6-600x475.jpg 600w, https://ddramdisk.store/wp-content/uploads/2021/07/6.jpg 1200w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></li><li><figure><img loading="lazy" width="1024" height="815" src="https://ddramdisk.store/wp-content/uploads/2021/07/7-1024x815.jpg" alt="" data-id="80" data-full-url="https://ddramdisk.store/wp-content/uploads/2021/07/7.jpg" data-link="https://ddramdisk.store/about_product/attachment/7/" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/7-1024x815.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2021/07/7-300x239.jpg 300w, https://ddramdisk.store/wp-content/uploads/2021/07/7-768x611.jpg 768w, https://ddramdisk.store/wp-content/uploads/2021/07/7-600x478.jpg 600w, https://ddramdisk.store/wp-content/uploads/2021/07/7.jpg 1200w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></li></ul></figure>



<p>The disk test showed read/write speeds of 7000/6000 MB/s respectively, which is the limit for PCIeX4 gen 4 and approaching the speed limit of DDR3 memory (see the screenshot from <a href="https://youtu.be/o_0VpuLE3ZU" target="_blank" rel="noreferrer noopener">this video</a>).</p>



<div><figure><img loading="lazy" width="600" height="434" src="https://ddramdisk.store/wp-content/uploads/2021/07/3.jpg" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/3.jpg 600w, https://ddramdisk.store/wp-content/uploads/2021/07/3-300x217.jpg 300w" sizes="(max-width: 600px) 100vw, 600px"/></figure></div>



<p>Especially remarkable are the results of the RND4K tests (Q1T1 may be inaccurate due to the applied transport layer) – such a speed is reached due to specifics of the DDR chip bank, representing a grape cluster of small-volume media, which allows working with them in parallel and simultaneously, as opposed to one single NAND chip. We know of no SSD drives that could show a relative speed in such tests.</p>



<div><figure><img loading="lazy" width="800" height="480" src="https://ddramdisk.store/wp-content/uploads/2021/07/4.png" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/4.png 800w, https://ddramdisk.store/wp-content/uploads/2021/07/4-300x180.png 300w, https://ddramdisk.store/wp-content/uploads/2021/07/4-768x461.png 768w, https://ddramdisk.store/wp-content/uploads/2021/07/4-600x360.png 600w" sizes="(max-width: 800px) 100vw, 800px"/></figure></div>



<p>The below picture shows the basic controls of the DDRAM disk. These are the load light column, back-up battery connector, the display and the self-test button. After pressing this key, the drive shuts off all PCIe exchange and starts the test of all of its components, including memory chips. The test <strong><em>will destroy all the data on the drive</em></strong> regardless of back-up battery availability. The indicator shows the memory bank number of the memory being measured during the test. When the test passes, the light will show <a rel="noreferrer noopener" href="https://youtu.be/o_0VpuLE3ZU?t=711" target="_blank">P = passed</a>. If not, a fault code will be shown. For the user’s comfort, an error code interpretation table is painted on the drive’s PCB at the right side of the indicator. The indicator will flash the decimal point at a rate of 2 Hz during operation. This is a sign of normal operation of all drive systems.</p>



<div><figure><img loading="lazy" width="1024" height="898" src="https://ddramdisk.store/wp-content/uploads/2021/07/5-1024x898.jpg" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/5-1024x898.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2021/07/5-300x263.jpg 300w, https://ddramdisk.store/wp-content/uploads/2021/07/5-768x674.jpg 768w, https://ddramdisk.store/wp-content/uploads/2021/07/5-1536x1347.jpg 1536w, https://ddramdisk.store/wp-content/uploads/2021/07/5-2048x1796.jpg 2048w, https://ddramdisk.store/wp-content/uploads/2021/07/5-600x526.jpg 600w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div>



<p>On the back side of the card is a DDR memory chips plantation and a heatsink. The heatsink is needed, because the chips are installed very tight and from below are heated additionally by FPGA chips and other device elements. Not only does the radiator removes excess heat, but also equalizes the temperature of the different areas of the disk card, that eliminates the skewed characteristics of DDR chips because of uneven heating. A dry thermal interface based on 3M thermal pad is used.</p>



<div><figure><img loading="lazy" width="1024" height="864" src="https://ddramdisk.store/wp-content/uploads/2021/07/9-1024x864.jpg" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2021/07/9-1024x864.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2021/07/9-300x253.jpg 300w, https://ddramdisk.store/wp-content/uploads/2021/07/9-768x648.jpg 768w, https://ddramdisk.store/wp-content/uploads/2021/07/9-1536x1296.jpg 1536w, https://ddramdisk.store/wp-content/uploads/2021/07/9-2048x1728.jpg 2048w, https://ddramdisk.store/wp-content/uploads/2021/07/9-600x506.jpg 600w" sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div>



<p>The disk has a ledge on the board, leaning against the connector edge, to ease the mechanical stress on PCIe slot and to simplify mounting the disk to board. In case of need there is a possibility to break this ledge, for this a line of holes is provided which contains the breaking line. But we have not yet met a motherboard where it gets in the way.</p>



<p>During the resource tests the disk ran for 200 hours continuously under maximum load and alternating read/write operations. No changes in drive characteristics were noted.</p>



<figure><p>
<iframe loading="lazy" title="Full overview of the new DDR RAM disk" width="1170" height="658" src="https://www.youtube.com/embed/o_0VpuLE3ZU?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
</p></figure>



<p>We are currently testing a newest prototype RAM disk using two SM2264 chips in tandem and operating in a x8 slot. Expectedly, speed has increased twice.</p>



<p><strong>UPD may 11, 2022</strong></p>



<p>The latest version of the ddram disk is ready for batch production!</p>



<figure><img loading="lazy" width="1024" height="682" src="https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-1024x682.jpg" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-1024x682.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-300x200.jpg 300w, https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-768x512.jpg 768w, https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-1536x1023.jpg 1536w, https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1-600x400.jpg 600w, https://ddramdisk.store/wp-content/uploads/2022/05/TOP-1.jpg 1600w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>DDR3 PCIe x4 version</figcaption></figure>



<p>DDR3 news <a href="https://ddramdisk.store/2022/05/12/meet-the-latest-release/" target="_blank" rel="noreferrer noopener">https://ddramdisk.store/2022/05/12/meet-the-latest-release/</a> </p>



<figure><img loading="lazy" width="1024" height="768" src="http://ddramdisk.store/wp-content/uploads/2023/01/01-1-1024x768.jpg" alt="" srcset="https://ddramdisk.store/wp-content/uploads/2023/01/01-1-1024x768.jpg 1024w, https://ddramdisk.store/wp-content/uploads/2023/01/01-1-300x225.jpg 300w, https://ddramdisk.store/wp-content/uploads/2023/01/01-1-768x576.jpg 768w, https://ddramdisk.store/wp-content/uploads/2023/01/01-1-600x450.jpg 600w, https://ddramdisk.store/wp-content/uploads/2023/01/01-1.jpg 1216w" sizes="(max-width: 1024px) 100vw, 1024px"/><figcaption>DDR4 PCIe x8 version</figcaption></figure>



<p>DDR4 news <a href="https://ddramdisk.store/2023/01/19/the-ddr4-pcie-x8-lady-has-come-out/" target="_blank" rel="noreferrer noopener">https://ddramdisk.store/2023/01/19/the-ddr4-pcie-x8-lady-has-come-out/ </a></p>












  
  
  
  <div id="mp_form_fixed_bar1">
          <p><img alt="close" width="20" height="20" src="https://ddramdisk.store/wp-content/plugins/mailpoet/assets/img/form_close_icon/round_black.svg?mailpoet_version=3.89.1"/></p>
  </div>

  	</div><!-- .entry-content -->

	</article><!-- #post-2 -->

			</main><!-- #main -->
		</div></div>
  </body>
</html>
