<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/maxcountryman/warc-parquet">Original</a>
    <h1>Show HN: Easily Convert WARC (Web Archive) into Parquet, Then Query with DuckDB</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">
<g-emoji alias="file_cabinet" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f5c4.png">ğŸ—„ï¸</g-emoji>  A utility for converting <a href="https://iipc.github.io/warc-specifications/specifications/warc-format/warc-1.0/" rel="nofollow">WARC</a> to Parquet.
</p>
<p><a href="https://crates.io/crates/warc-parquet" rel="nofollow">
<img src="https://camo.githubusercontent.com/4cea2a81f827025c96351a7c01a52c93cd3a5f2fdc833eb7665e5de8ddc3e6d5/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f776172632d706172717565742e737667" data-canonical-src="https://img.shields.io/crates/v/warc-parquet.svg"/>
</a>
<a href="https://docs.rs/warc-parquet" rel="nofollow">
<img src="https://camo.githubusercontent.com/f4c7b439f785e2b403102d9d3a963447fc9fba496bdafe058d3a7678699794d9/68747470733a2f2f646f63732e72732f776172632d706172717565742f62616467652e737667" data-canonical-src="https://docs.rs/warc-parquet/badge.svg"/>
</a>
</p>
<h2 dir="auto"><a id="user-content--install" aria-hidden="true" href="#-install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="package" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e6.png">ğŸ“¦</g-emoji> Install</h2>
<p dir="auto">The binary may be installed via <code>cargo</code>:</p>
<div data-snippet-clipboard-copy-content="$ cargo install warc-parquet"><pre>$ cargo install warc-parquet</pre></div>
<p dir="auto">To use the crate in your project, add the following to your <code>Cargo.toml</code> file:</p>
<div data-snippet-clipboard-copy-content="[dependencies]
warc-parquet = &#34;0.4&#34;"><pre><code>[dependencies]
warc-parquet = &#34;0.4&#34;
</code></pre></div>
<h2 dir="auto"><a id="user-content--usage" aria-hidden="true" href="#-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="cartwheeling" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f938.png">ğŸ¤¸</g-emoji> Usage</h2>
<h3 dir="auto"><a id="user-content-the-binary" aria-hidden="true" href="#the-binary"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Binary</h3>
<p dir="auto">Once installed, the <code>warc-parquet</code> utility can be used to transform WARC into Parquet:</p>
<div data-snippet-clipboard-copy-content="$ wget --warc-file example &#39;https://example.com&#39;
$ cat example.warc.gz | warc-parquet --gzipped &gt; example.snappy.parquet"><pre>$ wget --warc-file example <span><span>&#39;</span>https://example.com<span>&#39;</span></span>
$ cat example.warc.gz <span>|</span> warc-parquet --gzipped <span>&gt;</span> example.snappy.parquet</pre></div>
<p dir="auto"><code>warc-parquet</code> is meant to fit organically into the UNIX ecosystem. As such processing multiple WARCs at once is straightforward:</p>
<div data-snippet-clipboard-copy-content="$ wget --warc-file github &#39;https://github.com&#39;
$ cat example.warc.gz github.warc.gz | warc-parquet --gzipped &gt; combined.snappy.parquet"><pre>$ wget --warc-file github <span><span>&#39;</span>https://github.com<span>&#39;</span></span>
$ cat example.warc.gz github.warc.gz <span>|</span> warc-parquet --gzipped <span>&gt;</span> combined.snappy.parquet</pre></div>
<p dir="auto">It&#39;s also simple to preprocess via standard UNIX piping:</p>
<div data-snippet-clipboard-copy-content="$ cat example.warc.gz | gzip -d | warc-parquet &gt; example.snappy.parquet"><pre>$ cat example.warc.gz <span>|</span> gzip -d <span>|</span> warc-parquet <span>&gt;</span> example.snappy.parquet</pre></div>
<p dir="auto">Various compression options, including the option to forego compression altogether, are also available:</p>
<div data-snippet-clipboard-copy-content="$ cat example.warc.gz | warc-parquet --gzipped --compression brotli &gt; example.brotli.parquet"><pre>$ cat example.warc.gz <span>|</span> warc-parquet --gzipped --compression brotli <span>&gt;</span> example.brotli.parquet</pre></div>
<blockquote>
<p dir="auto"><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">ğŸ’¡</g-emoji> <code>warc-parquet --help</code> displays complete options and usage information.</p>
</blockquote>
<h3 dir="auto"><a id="user-content-the-crate" aria-hidden="true" href="#the-crate"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>The Crate</h3>
<p dir="auto">Refer to <a href="https://docs.rs/warc-parquet" rel="nofollow">the docs</a> for more details about how to use the <code>Reader</code> within your own programs.</p>
<h3 dir="auto"><a id="user-content-duckdb" aria-hidden="true" href="#duckdb"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>DuckDB</h3>
<p dir="auto">There are any number of ways to consume Parquet once you have it. However a natural fit might be
<a href="https://duckdb.org" rel="nofollow">DuckDB</a>:</p>
<div data-snippet-clipboard-copy-content="$ duckdb
v0.3.3 fe9ba8003
Enter &#34;.help&#34; for usage hints.
Connected to a transient in-memory database.
Use &#34;.open FILENAME&#34; to reopen on a persistent database.

D select type, id from &#39;example.snappy.parquet&#39;;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   type   â”‚                       id                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ warcinfo â”‚ &lt;urn:uuid:A8063499-7675-4D8D-A736-A1D7DAE84C84&gt; â”‚
â”‚ request  â”‚ &lt;urn:uuid:3EB20966-D74F-4949-AACB-23DB3A0733A7&gt; â”‚
â”‚ response â”‚ &lt;urn:uuid:8B92CADC-F770-45BE-8B72-E13A61CD6D1C&gt; â”‚
â”‚ metadata â”‚ &lt;urn:uuid:4C0E9E17-E21B-49E0-859A-D1016FBDE636&gt; â”‚
â”‚ resource â”‚ &lt;urn:uuid:14F502A5-3BDE-4D0B-8A43-95F4BB8398C6&gt; â”‚
â”‚ resource â”‚ &lt;urn:uuid:6B6D6ADD-52FF-4760-AA00-FB9E739CABBE&gt; â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

D describe select * from &#39;example.snappy.parquet&#39;;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚       column_name       â”‚ column_type â”‚ null â”‚ key â”‚ default â”‚ extra â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                      â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ content_length          â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ date                    â”‚ TIMESTAMP   â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ type                    â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ content_type            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ concurrent_to           â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ block_digest            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ payload_digest          â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ ip_address              â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ refers_to               â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ target_uri              â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ truncated               â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ warc_info_id            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ filename                â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ profile                 â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ identified_payload_type â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_number          â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_origin_id       â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_total_length    â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ body                    â”‚ BLOB        â”‚ YES  â”‚     â”‚         â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜"><pre><code>$ duckdb
v0.3.3 fe9ba8003
Enter &#34;.help&#34; for usage hints.
Connected to a transient in-memory database.
Use &#34;.open FILENAME&#34; to reopen on a persistent database.

D select type, id from &#39;example.snappy.parquet&#39;;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   type   â”‚                       id                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ warcinfo â”‚ &lt;urn:uuid:A8063499-7675-4D8D-A736-A1D7DAE84C84&gt; â”‚
â”‚ request  â”‚ &lt;urn:uuid:3EB20966-D74F-4949-AACB-23DB3A0733A7&gt; â”‚
â”‚ response â”‚ &lt;urn:uuid:8B92CADC-F770-45BE-8B72-E13A61CD6D1C&gt; â”‚
â”‚ metadata â”‚ &lt;urn:uuid:4C0E9E17-E21B-49E0-859A-D1016FBDE636&gt; â”‚
â”‚ resource â”‚ &lt;urn:uuid:14F502A5-3BDE-4D0B-8A43-95F4BB8398C6&gt; â”‚
â”‚ resource â”‚ &lt;urn:uuid:6B6D6ADD-52FF-4760-AA00-FB9E739CABBE&gt; â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

D describe select * from &#39;example.snappy.parquet&#39;;
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
â”‚       column_name       â”‚ column_type â”‚ null â”‚ key â”‚ default â”‚ extra â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                      â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ content_length          â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ date                    â”‚ TIMESTAMP   â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ type                    â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ content_type            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ concurrent_to           â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ block_digest            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ payload_digest          â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ ip_address              â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ refers_to               â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ target_uri              â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ truncated               â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ warc_info_id            â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ filename                â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ profile                 â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ identified_payload_type â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_number          â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_origin_id       â”‚ VARCHAR     â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ segment_total_length    â”‚ UINTEGER    â”‚ YES  â”‚     â”‚         â”‚       â”‚
â”‚ body                    â”‚ BLOB        â”‚ YES  â”‚     â”‚         â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div>
</article>
          </div></div>
  </body>
</html>
