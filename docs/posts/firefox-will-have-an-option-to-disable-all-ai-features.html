<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mastodon.social/@firefoxwebdevs/115740500373677782">Original</a>
    <h1>Firefox will have an option to disable all AI features</h1>
    
    <div id="readability-page-1" class="page"><div>
  <header>
  <a href="http://iafisher.com/">home</a>
  <a href="http://iafisher.com/blog">blog</a>
  <a href="http://iafisher.com/portfolio">portfolio</a>
  <span>Ian Fisher</span>
</header>


  
  
  

  <main>
  <p>I write a lot of <a href="https://iafisher.com/blog/2022/02/khaganate">my own software</a>. I also write a lot of bugs. Since the beginning of the year, I have kept a log of every bug I found in code that I wrote. I wanted to better understand the kinds of mistakes that I tend to make and what I can do to avoid making more of them.</p>
<h2>Stats</h2>
<p>As of December 17, there are 67 bugs on the list (which excludes bugs at work). 58 of the bugs were in Python, 5 in Bash, and 2 each in JavaScript and Go. (I write almost all of my personal software in Python.)</p>
<p>6 of the bugs were in the source code for this website, 4 were in <a href="https://github.com/iafisher/foundation">foundation</a>, 2 were in <a href="https://github.com/iafisher/iprecommit">iprecommit</a>, and the 2 Go bugs were in <a href="https://github.com/iafisher/fast-concordance">fast-concordance</a>. The remaining 53 were in my private Python monorepo, which includes the <a href="https://iafisher.com/blog/2025/09/jobserver-woes">job scheduler</a> that I have alluded to previously, as well as many other things, and about which I intend to write a blog post soon.</p>
<h2>Static typing?</h2>
<p>7 of the 58 Python bugs (12%) would have been type errors in a statically-typed language. A few representative examples were:</p>
<ul>
<li>Failing to pass a required parameter to a function.</li>
<li>Calling <code>path.remove()</code> when the right API was <code>path.unlink()</code>.</li>
<li>Generating a integer too large to store in a signed 32-bit Postgres column.</li>
</ul>
<p>I run <a href="https://github.com/microsoft/pyright">Pyright</a> in my IDE and on every commit, which catches most type errors before they make it out into the wild. A few bugs got through for various reasons: because I had implicitly disabled type-checking with the <code>Any</code> type, because I had not made the interface to an external data source sufficiently typeful (Postgres, command-line arguments, JSON, etc.), or simply because Pyright <a href="https://github.com/microsoft/pyright/issues/10933">has limits</a>.</p>
<h2>Sample bugs</h2>
<p>My most interesting bugs of the year:</p>
<ul>
<li>An exception after <code>fork</code> but before <code>exec</code> caused clean-up handlers to be run in both the child and parent process, causing chaos. (This was the first bug in <a href="https://iafisher.com/blog/2025/09/jobserver-woes">&#34;Woes of writing your own jobserver&#34;</a>.)</li>
<li>Two different deadlock bugs caused by taking a lock in a signal handler – once an explicit file lock and once a lock inside a thread-safe data structure. (These were the last two bugs in <a href="https://iafisher.com/blog/2025/09/jobserver-woes">&#34;Woes of writing your own jobserver&#34;</a>.)</li>
<li>A log rotation job inconsistently tried to delete a file that did not exist (but should have existed) and crashed. The job was scheduled at regular intervals, and sometimes (mainly on my laptop when it was <a href="https://iafisher.com/notes/2025-09-macos-sleep-behavior">asleep</a>) a job would take longer than expected and still be running when the next job started. Both would see that the same file was ready for deletion but only one would win the race.</li>
<li>I have a script to upload Markdown files to my personal site. It uses hashes to only upload files that have changed. For this to work, the server and the client have to calculate the hash in exactly the same way, but the client was stripping Markdown front-matter before uploading, so for files with front-matter the client and server always computed a different hash and the file was re-uploaded every time.</li>
</ul>
<p>(My least interesting bugs were the 4 different ones caused by unset environment variables.)</p>
<p>And a few that were just amusing:</p>
<ul>
<li>Parsing a CSV import from Venmo failed the first time a transaction exceeded $1,000, because of the presence of the comma.</li>
<li>I switched from a bespoke parser for <a href="https://help.obsidian.md/properties">Obsidian properties</a> to an off-the-shelf YAML implementation, but some code couldn&#39;t handle the new parser&#39;s correct output because it was written to accept the old parser&#39;s broken output.</li>
<li>I use an LLM filter to recommend articles from the front page of Hacker News. One week I noticed that my recommendations suddenly increased in quantity and decreased in quality. While refactoring, I had accidentally changed <code>save_bookmarks(recommended_stories)</code> to <code>save_bookmarks(stories)</code>, thereby ignoring the actual recommendations.</li>
</ul>
<h2>Lessons</h2>
<p>I don&#39;t mind shipping bugs in personal software when the stakes are low. Still, every bug that slips through is an opportunity to re-examine my process and ask myself what I could do to prevent the same mistake from happening again. Sometimes this led to durable changes (e.g., running Pyright on the whole repo instead of only on the changed files in a commit) and sometimes it did not (many of the bugs would have been caught by simple unit tests, which I nonetheless continued to fail to write). I&#39;m optimistic that AI code review will help me catch bugs earlier, especially now that I have 67 examples of the kinds of mistakes that I tend to make. ∎</p>
  </main>

  
</div></div>
  </body>
</html>
