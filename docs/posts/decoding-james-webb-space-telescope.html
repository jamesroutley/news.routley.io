<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://destevez.net/2021/12/decoding-james-webb-space-telescope/">Original</a>
    <h1>Decoding James Webb Space Telescope</h1>
    
    <div id="readability-page-1" class="page"><article id="post-10735">

	<!-- .entry-header -->

	<div>
		
<p>The <a href="https://en.wikipedia.org/wiki/James_Webb_Space_Telescope">James Webb Space Telescope</a> probably needs no introduction, since it is perhaps the most important and well-known mission of the last years. It was launched on Christmas day from <a href="https://en.wikipedia.org/wiki/Guiana_Space_Centre">Kourou, French Guiana</a>, into a direct transfer orbit to the Sun-Earth L2 <a href="https://en.wikipedia.org/wiki/Lagrange_point">Lagrange point</a>. JWST uses S-band at 2270.5 MHz to transmit telemetry. The science data will be transmitted in K-band at 29.5 GHz, with a rate of up to 28 Mbps.</p>



<p>After launch, the first groundstation to pick the S-band signal from JWST was the 10 m antenna from the <a href="https://en.wikipedia.org/wiki/Italian_Space_Agency">Italian Space Agency</a> in <a href="https://en.wikipedia.org/wiki/Broglio_Space_Center">Malindi, Kenya</a>. This groundstation <a href="https://twitter.com/nascom1/status/1474692196175466497">commanded the telemetry rate to increase from 1 kbps to 4 kbps</a>. After this, the spacecraft’s footprint continued moving to the east, and it was <a href="https://twitter.com/nascom1/status/1474729944370405377">tracked for a few hours by the DSN in Canberra</a>. One of the things that Canberra did was to <a href="https://twitter.com/nascom1/status/1474756739895492612">increase the telemetry rate to 40 kbps</a>, which apparently <a href="https://twitter.com/nascom1/status/1474977129460748291">is the maximum</a> to be used in the mission.</p>



<p>As JWST moved away from Earth, its footprint started moving west. After Canberra, the spacecraft was tracked by Madrid. <a href="https://twitter.com/df2mz/status/1474787860465213445">Edgar Kaiser DF2MZ</a>, <a href="https://twitter.com/eb3frn">Iban Cardona EB3FRN</a> and other amateur observers in Europe received the S-band telemetry signal. When Iban <a href="https://twitter.com/eb3frn/status/1474796137404153874">started receiving the signal</a>, it was again using 4 kbps, but some time after, Madrid switched it to 40 kbps.</p>



<p>At 00:50 UTC on December 26, the spacecraft made its first correction burn, which lasted an impressive 65 minutes. Edgar <a href="https://twitter.com/df2mz/status/1475041741594144769">caught this maneouvre in the Doppler track</a>.</p>



<p>Later on, between 7:30 and 11:30 UTC, I have been receiving the signal with one of the 6.1 metre dishes at <a href="https://www.seti.org/ata">Allen Telescope Array</a>. The telemetry rate was 40 kbps and the spacecraft was presumably in lock with Goldstone, though it didn’t appear in <a href="https://eyes.nasa.gov/dsn/dsn.html">DSN now</a>. I will publish the recording in <a href="https://zenodo.org/">Zenodo</a> as usual, but since the files are rather large I will probably reduce the sample rate, so publishing the files will take some time.</p>



<p>In the rest of this post I give a description of the telemetry of JWST and do a first look at the telemetry data.</p>



<p>The lower rate configurations of the telemetry signal of JWST use PCM/PSK/PM with a 40 kHz subcarrier, while the 40 kbps configuration uses PCM/PM/NRZ. The spacecraft uses CCSDS concatenated coding, so the 4 kbps configuration actually corresponds to exactly 8 kbaud, while 40 kbps is 80 kbaud.</p>



<p>According to the data recorded by Iban, the 4 kbps telemetry uses a single (252, 220) Reed-Solomon codeword. This choice is interesting, because it gives a frame size of 2048 bits at the input of the convolutional encoder, taking into account the ASM. Several Chinese missions such as Tianwen-1 and Chang’e 5 have used this codeword size, because the baudrates they use are powers of two, such as 2048 or 16384 baud. By having 2048 bit frames, the get a nice round value for the time it takes to transmit a frame, such as 2 seconds, or 0.25 seconds. However, in the case of JWST the baudrate is not a power of 2, but rather a “nice round number in base 10”, such as 4000 or 40000. Therefore, they don’t get these nice round durations for the frames. Thus, it is curious that they have chosen the shortened size of (252, 220) rather than the full size of (255, 223).</p>



<p>The 40 kbps telemetry uses 5 interleaved (252, 220) Reed-Solomon codewords, so the total frame size is 1100 information bytes.</p>



<p>The GNU Radio decoder flowgraph that I used with Iban’s recording, which contains 4 kbps telemetry, can be downloaded <a href="https://github.com/daniestevez/jupyter_notebooks/blob/master/JWST/jwst_4kbps.grc">here</a>. It is shown in the figure below.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs.png"><img width="644" height="301" src="https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs-644x301.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs-644x301.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs-300x140.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs-768x360.png 768w, https://destevez.net/wp-content/uploads/2021/12/jwst_4kbs.png 1256w" sizes="(max-width: 644px) 100vw, 644px"/></a><figcaption>GNU Radio decoder for the 4 kbps telemetry</figcaption></figure>



<p>Unfortunately, the SNR in Iban’s recordings is slightly less than needed for decoding, and I haven’t been able to get a single Reed-Solomon frame decoded correctly. Still, taking into account that the data has errors, one can look at the frames and learn some things, since the Reed-Solomon code is systematic. This is what <a href="https://twitter.com/r2x0t/status/1474904522518581251">r00t.cz has been doing with the recordings</a>.</p>



<p>For the 40 kbps telemetry in the ATA recordings I have used <a href="https://github.com/daniestevez/jupyter_notebooks/blob/master/JWST/jwst_40kbps.grc">this flowgraph</a>, which is shown here.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps.png"><img width="644" height="470" src="https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps-644x470.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps-644x470.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps-300x219.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps-768x560.png 768w, https://destevez.net/wp-content/uploads/2021/12/jwst_40kbps.png 1288w" sizes="(max-width: 644px) 100vw, 644px"/></a><figcaption>GNU Radio decoder for the 40 kbps telemetry (using dual polarization)</figcaption></figure>



<p>The antenna feeds in the ATA use dual linear polarization (X and Y), so the Auto-polarization block combines the two polarizations to maximize the SNR. The signal from JWST is nominally circularly polarized (RHCP, I think), but since the low gain antenna is a patch antenna and we don’t see it directly from its boresight direction, in general we will see some elliptical polarization (see my <a href="https://destevez.net/2020/12/change-5-polarization-in-the-ata-observations/">post about the Chang’e 5 polarization</a>). I observed that at the beginning of the recording there was much more signal power in the X polarization than in the Y polarization. I will have to check how this evolves throughout the recording. The figure below shows the spectrum of the signal using only the X polarization.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_ata_2ex.png"><img width="644" height="348" src="https://destevez.net/wp-content/uploads/2021/12/jwst_ata_2ex-644x348.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_ata_2ex-644x348.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_ata_2ex-300x162.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_ata_2ex.png 717w" sizes="(max-width: 644px) 100vw, 644px"/></a></figure>



<p>The SNR in the X polarization is barely enough to decode, and some of the frames can be decoded, but others not. By combining both polarizations we gain some SNR and it is possible to decode a large fraction of the frames.</p>



<p>The figure below shows the GUI of the GNU Radio decoder running with the beginning of the ATA recording. We can see the difference of SNRs between the X and Y polarizations in the upper left spectrum plot. We see that the symbols are very noisy, so it almost seems magic that the Viterbi and Reed-Solomon decoder are able to decode so many correct frames.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_gr.png"><img width="644" height="355" src="https://destevez.net/wp-content/uploads/2021/12/jwst_gr-644x355.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_gr-644x355.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_gr-300x166.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_gr-768x424.png 768w, https://destevez.net/wp-content/uploads/2021/12/jwst_gr-1536x848.png 1536w, https://destevez.net/wp-content/uploads/2021/12/jwst_gr-1568x865.png 1568w, https://destevez.net/wp-content/uploads/2021/12/jwst_gr.png 1600w" sizes="(max-width: 644px) 100vw, 644px"/></a><figcaption>GNU Radio recording running with the ATA recording</figcaption></figure>



<p>The frames transmitted by JWST are CCSDS AOS frames. The spacecraft ID is 170 (0xaa), which matches the ID used in <a href="https://ssd.jpl.nasa.gov/horizons/app.html">NASA HORIZONS</a> and the <a href="https://sanaregistry.org/r/spacecraftid/records/14387">SANA registry</a>. There are two virtual channels in use, virtual channel 0, which carries the telemetry, and virtual channel 63, which is Only Idle Data.  The Only Idle Data frames have all the payload (everything besides the AOS primary header) filled with <code>0x78</code> bytes, which is ASCII for <code>x</code>.</p>



<p>Approximately 95% of the frames belong to virtual channel 0. The frames in virtual channel 0 contain CCSDS Space Packets using the M_PDU protocol. The last 4 bytes of the frame are a trailer. It seems that the contents of the trailer cycle through the values <code>0x010001eb</code>, <code>0x0904019e</code>, and  <code>0x09080100</code> every three frames (at least near the beginning of the recording). I am not sure what this trailer represents. I don’t think it is a Communications Link Control Word (as described in the <a href="https://public.ccsds.org/Pubs/232x0b4.pdf">CCSDS TC Space Data Link Protocol</a>) because one of the reserved bits is set to one instead of zero as it should. However I can’t rule out the possibility completely, since the values of the rest of the fields could make sense.</p>



<p>The figure below shows the number of frames lost in virtual channel 0 according to the jumps in the virtual channel frame counter. We can see that towards the end of the recording, as the spacecraft elevation decreases and eventually goes under the elevation mask, the error rate increases. Overall, 76% of the frames in virtual channel 0 have been decoded correctly.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_frame_loss.png"><img width="606" height="333" src="https://destevez.net/wp-content/uploads/2021/12/jwst_frame_loss.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_frame_loss.png 606w, https://destevez.net/wp-content/uploads/2021/12/jwst_frame_loss-300x165.png 300w" sizes="(max-width: 606px) 100vw, 606px"/></a></figure>



<p>Many Space Packet APIDs are active. As usual, I have done raster plots of each of them in <a href="https://github.com/daniestevez/jupyter_notebooks/blob/master/JWST/JWST%20Frames%20-%20ATA%202021-12-26.ipynb">a Jupyter notebook</a>. Glancing through these raster plots, my impression is that there are many that have complex data structures, though there are also many zones padded with zeros. The two figures below show some examples of how the APIDs look like. The full list of plots can be seen in <a href="https://github.com/daniestevez/jupyter_notebooks/blob/master/JWST/JWST%20Frames%20-%20ATA%202021-12-26.ipynb">the Jupyter notebook</a>.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404.png"><img width="644" height="640" src="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404-644x640.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404-644x640.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404-300x298.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404-150x150.png 150w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404-768x763.png 768w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1404.png 923w" sizes="(max-width: 644px) 100vw, 644px"/></a></figure>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730.png"><img width="644" height="645" src="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730-644x645.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730-644x645.png 644w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730-300x300.png 300w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730-150x150.png 150w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730-768x769.png 768w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1730.png 916w" sizes="(max-width: 644px) 100vw, 644px"/></a></figure>



<p>I have also seen that there are many fields with floating point numbers. These usually have a distinct “texture”, so they are not so difficult to spot in these raster plots.</p>



<p>I have tried to go through all the APIDs, plotting the values of all the floating point fields, though I haven’t tried to be exhaustive and might have left some. I haven’t seen any that look as interesting as the state vector data of Tianwen-1. Most of the floating point fields are 32-bit wide (using IEEE 754 big-endian representation), but there are a few that are 64-bit wide.</p>



<p>Perhaps the floating point channels that I have found more interesting are these adjacent three, which appear in APID 1201, and also in APIDs 1404 and 1727 (in several cases it seems that the same or very similar data appears in some fields of several different APIDs).</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1201_float.png"><img width="594" height="314" src="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1201_float.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1201_float.png 594w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1201_float-300x159.png 300w" sizes="(max-width: 594px) 100vw, 594px"/></a><figcaption>Floating point channels in APID 1201</figcaption></figure>



<p>Another set of floating point channels which looks interesting are the following 6 adjacent channels in APID 1755.</p>



<figure><a href="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1755_float.png"><img width="616" height="303" src="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1755_float.png" alt="" srcset="https://destevez.net/wp-content/uploads/2021/12/jwst_apid1755_float.png 616w, https://destevez.net/wp-content/uploads/2021/12/jwst_apid1755_float-300x148.png 300w" sizes="(max-width: 616px) 100vw, 616px"/></a><figcaption>Floating point channels in APID 1755</figcaption></figure>



<p>The full list of these plots is also in the Jupyter notebook. At the moment I have no idea of what kind of data any of them are showing. One should be careful when interpreting the data, because there is even the chance that some of the fields are not really floating point, but integers, even though they have reasonable values when interpreted as floating point.</p>



<p>Probably I’ll come back to these recordings in the next few days, but for now I wanted to publish what I have so far. The decoded frames are available in the <a href="https://github.com/daniestevez/jupyter_notebooks/tree/master/JWST">Github repository</a> and can be obtained using <a href="https://git-annex.branchable.com/">git-annex</a> as described in the <a href="https://github.com/daniestevez/jupyter_notebooks/blob/master/README.md">README</a>.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

				
</article></div>
  </body>
</html>
