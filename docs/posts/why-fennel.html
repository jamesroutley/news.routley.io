<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://fennel-lang.org/rationale">Original</a>
    <h1>Why Fennel?</h1>
    
    <div id="readability-page-1" class="page">

<p>Fennel is a programming language that runs on the Lua runtime.</p>
<h2 id="why-lua">Why Lua?</h2>
<p>The Lua programming language is an excellent and very underrated
tool. Is it remarkably powerful yet keeps a very small footprint both
conceptually as a language and in terms of the size of its
implementation. (The reference implementation consists of about nineteen
thousand lines of C and compiles to 278kb.) Partly because it is so
simple, Lua is also extremely fast. But the most important thing about
Lua is that it&#39;s specifically designed to be put in other programs to
make them reprogrammable by the end user.</p>
<p>The conceptual simplicity of Lua stands in stark contrast to other
&#34;easy to learn&#34; languages like JavaScript or Python--Lua contains very
close to the minimum number of ideas needed to get the job done; only
Forth and Scheme offer a comparable simplicity. When you combine this
meticulous simplicity with the emphasis on making programs
reprogrammable, the result is a powerful antidote to prevailing trends
in technology of treating programs as black boxes out of the control of
the user.</p>
<h2 id="and-yet">And yet...</h2>
<p>So if Lua is so great, why not just use Lua? In many cases you
should! But there are a handful of shortcomings in Lua which over time
have shown to be error-prone or unclear. Fennel runs on Lua, and the
runtime semantics of Fennel are a subset of Lua&#39;s, but you can think of
Fennel as an alternate notation you can use to write Lua programs which
helps you avoid common pitfalls. This allows Fennel to focus on doing
one thing very well and not get dragged down with things like
implementing a virtual machine, a standard library, or profilers and
debuggers. Any library or tool that already works for Lua will work just
as well for Fennel.</p>
<p>The most obvious difference between Lua and Fennel is the
parens-first syntax; Fennel belongs to the Lisp family of programming
languages. You could say that this removes complexity from the grammar;
the paren-based syntax is more regular and has fewer edge cases. Simply
by virtue of being a lisp, Fennel removes from Lua:</p>
<ul>
<li>statements (everything is an expression),</li>
<li>operator precedence (there is no ambiguity about what comes first),
and</li>
<li>early returns (functions always return in tail positions).</li>
</ul>
<h2 id="variables">Variables</h2>
<p>One of the most common legitimate criticisms leveled at Lua is that
it makes it easy to accidentally use globals, either by forgetting to
add a <code>local</code> declaration or by making a typo. Fennel allows
you to use globals in the rare case they are necessary but makes it very
difficult to use them by accident.</p>
<p>Fennel also removes the ability to reassign normal locals. If you
declare a variable that will be reassigned, you must introduce it with
<code>var</code> instead. This encourages cleaner code and makes it
obvious at a glance when reassignment is going to happen. Note that Lua
5.4 introduced a similar idea with <code>&lt;const&gt;</code> variables,
but since Fennel did not have to keep decades of existing code like Lua
it was able to make the cleaner choice be the default rather than
opt-in.</p>
<h2 id="tables-and-loops">Tables and Loops</h2>
<p>Lua&#39;s notation for tables (its data structure) feels somewhat dated.
It uses curly brackets for both sequential (array-like) and key/value
(dictionary-like) tables, while Fennel uses the much more familiar
notation of using square brackets for sequential tables and curly
brackets for key/value tables.</p>
<p>In addition Lua overloads the <code>for</code> keyword for both
numeric &#34;count from X to Y&#34; style loops as well as more generic
iterator-based loops. Fennel uses <code>for</code> in the first case and
introduces the <code>each</code> form for the latter.</p>
<h2 id="functions">Functions</h2>
<p>Another common criticism of Lua is that it lacks arity checks; that
is, if you call a function without enough arguments, it will simply
proceed instead of indicating an error. Fennel allows you to write
functions that work this way (<code>fn</code>) when it&#39;s needed for
speed, but it also lets you write functions which check for the
arguments they expect using <code>lambda</code>.</p>
<h2 id="other">Other</h2>
<p>If you&#39;ve been programming in newer languages, you are likely to be
spoiled by pervasive destructuring of data structures when binding
variables, as well as by pattern matching to write more declarative
conditionals. Both these are absent from Lua and included in Fennel.</p>
<p>Finally Fennel includes a macro system so that you can easily extend
the language to include new syntactic forms. This feature is
intentionally listed last because while lisp programmers have
historically made a big deal about how powerful it is, it is relatively
rare to encounter situations where such a powerful construct is
justified.</p>
<p>For a more detailed look at the guiding principles of Fennel from a
design perspective see <a href="https://fennel-lang.org/values">the
Values of Fennel</a>.</p>
<hr/>
<p><a href="https://fennel-lang.org/">Home</a></p>
<p><a href="https://git.sr.ht/~technomancy/fennel-lang.org">source for this site</a></p>


</div>
  </body>
</html>
