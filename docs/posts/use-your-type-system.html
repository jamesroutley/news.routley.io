<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.dzombak.com/blog/2025/07/use-your-type-system/">Original</a>
    <h1>Use Your Type System</h1>
    
    <div id="readability-page-1" class="page"><div id="gh-main">
    <article>

        <header>
            <span>
                Posted <time datetime="2025-07-24">24 Jul 2025</time>
                    in
                    <a href="https://www.dzombak.com/blog/tag/types/">Types</a>
            </span>

            


            
        </header>

        <div>




            <p>Today I&#39;m discussing a trivially simple technique that I&#39;ve rarely seen used in production codebases.</p><p>In programming, we often need to deal with simple values that can be represented by simple, generic types built into our programming language or provided by libraries: types like integer, string, or UUID.</p><p>In any nontrivial codebase, this inevitably leads to bugs when, for example, a string representing a user ID gets used as an account ID, or when a critical function accepts three integer arguments and someone mixes up the correct order when calling it.</p><p>A much better solution is to <strong>define different types</strong> and use them when representing different things! <code>int</code> or <code>string</code> are excellent building blocks, but passing them around your system as-is means you slowly but inevitably lose important context: <strong>what they actually represent</strong>.</p><h2 id="example">Example</h2><p>Here&#39;s a trivial example of what that might look like. Imagine if, instead of using plain old UUIDs, each of your models defined its own ID type:</p><pre><code>type AccountID uuid.UUID
type UserID uuid.UUID

func UUIDTypeMixup() {
    {
        userID := UserID(uuid.New())
        DeleteUser(userID)
        // no error
    }

    {
        accountID := AccountID(uuid.New())
        DeleteUser(accountID)
        // ^ error: Cannot use &#39;accountID&#39; (type AccountID) as the type UserID
    }

    {
        accountID := uuid.New()
        DeleteUserUntyped(accountID)
        // no error at compile time; likely error at runtime
    }
}</code></pre><h2 id="in-libwx">In libwx</h2><p>I previously discussed this in my 2015 talk, &#34;<a href="https://www.dzombak.com/blog/2015/12/string-is-not-a-sufficient-type-how-using-your-type-system-can-help-you-make-better-software/">String is not a sufficient type.</a>&#34; I&#39;ve found a great demonstration case for the technique in my weather &amp; atmospheric calculations library for Golang, <a href="https://pkg.go.dev/github.com/cdzombak/libwx?ref=dzombak.com"><code>libwx</code></a>. This library defines <a href="https://pkg.go.dev/github.com/cdzombak/libwx?ref=dzombak.com#pkg-types">types for every measurement it deals with</a>, along with methods for converting between the different types (<a href="https://pkg.go.dev/github.com/cdzombak/libwx?ref=dzombak.com#Km.Miles">for example, <code>Km.Miles()</code></a>).</p><p>This prevents the user from making mistakes that would be all too easy if the library dealt entirely in <code>float64</code>s:</p><figure><img src="https://www.dzombak.com/content/images/2025/07/types-prevent-unit-confusion.png" alt="" loading="lazy" width="1060" height="348" srcset="https://www.dzombak.com/content/images/size/w600/2025/07/types-prevent-unit-confusion.png 600w, https://www.dzombak.com/content/images/size/w1000/2025/07/types-prevent-unit-confusion.png 1000w, https://www.dzombak.com/content/images/2025/07/types-prevent-unit-confusion.png 1060w" sizes="(min-width: 720px) 720px"/></figure><p><a href="https://github.com/cdzombak/libwx_types_lab/blob/main/temperatures.go?ref=dzombak.com">I&#39;ve shared a slightly longer example on GitHub</a>:</p><pre><code>// Declare a temperature in Fahrenheit
temp := libwx.TempF(84)

// Declare a relative humidity in percent:
humidity := libwx.RelHumidity(67)

// Attempt to calculate the dew point using a function that takes
// Celsius instead of Fahrenheit:
fmt.Printf(&#34;Dew point: %.1fºF\n&#34;,
	libwx.DewPointC(temp, humidity))

// Note the compiler prevents us from making this mistake; it gives us
// the following error:
// Cannot use &#39;temp&#39; (type libwx. TempF) as the type TempC

// Attempt to calculate the dew point, but mix up the function arga:
fmt.Printf(&#34;Dew point: %.1fºF\n&#34;,
	libwx.DewPointF(humidity, temp))

// Again, the compiler prevents us from making this error.</code></pre><h2 id="conclusion">Conclusion</h2>
<!--kg-card-begin: html-->
<p><span><strong>Your type system is there to help you. Use it.</strong></span></p><!--kg-card-end: html-->
<p>Your models should each have their own ID type. Public and even private functions should often avoid dealing in floats or integers alone.</p><p>I&#39;ve seen <em>so many</em> bugs in real systems due to mixing up integers, strings, or UUIDs that represent different things. Meanwhile, it&#39;s simple to set up types that entirely eliminate this class of bug, even in a language like Go that isn&#39;t known for having a particularly powerful type system. It&#39;s absolutely astounding to me that this technique is not broadly used.</p><p>You can find all the code used in this post on GitHub:</p><figure><a href="https://github.com/cdzombak/libwx_types_lab?ref=dzombak.com"><div><p>GitHub - cdzombak/libwx_types_lab</p><p>Contribute to cdzombak/libwx_types_lab development by creating an account on GitHub.</p><p><img src="https://www.dzombak.com/content/images/icon/pinned-octocat-093da3e6fa40-15.svg" alt=""/><span>cdzombak</span></p></div><p><img src="https://www.dzombak.com/content/images/thumbnail/libwx_types_lab" alt="" onerror="this.style.display = &#39;none&#39;"/></p></a></figure>
        </div>


        

    </article>
</div></div>
  </body>
</html>
