<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gomakethings.com/dont-disable-buttons/">Original</a>
    <h1>Don&#39;t disable buttons</h1>
    
    <div id="readability-page-1" class="page"><article>

		<header>

			

			

		</header>

		

<p>One of the most common accessibility issues I find (and fix) <a href="https://gomakethings.com/consulting">on client projects</a> is dynamically disabled form buttons when a form is being submitted.</p>

<p>Today I want to talk about why developers do it, why it’s bad, and what you can do instead. Let’s dig in!</p>

<h2 id="why-developers-disable-buttons">Why developers disable buttons</h2>

<p>Typically, I see the pattern used to prevent a form from being submitted a second time while waiting for the form is processed.</p>

<p>Often, you’re waiting for an API response that may take a few moments, and you don’t want the user to submit the form again until the original response is processed.</p>
<div><pre><code data-lang="js"><span>form</span><span>.</span><span>addEventListener</span><span>(</span><span>&#39;submit&#39;</span><span>,</span> <span>function</span> <span>(</span><span>event</span><span>)</span> <span>{</span>

	<span>// Don&#39;t let the form reload the page
</span><span></span>	<span>event</span><span>.</span><span>preventDefault</span><span>();</span>

	<span>// Get the submit button and disable it
</span><span></span>	<span>let</span> <span>btn</span> <span>=</span> <span>form</span><span>.</span><span>querySelector</span><span>(</span><span>&#39;button&#39;</span><span>);</span>
	<span>btn</span><span>.</span><span>addAttribute</span><span>(</span><span>&#39;disabled&#39;</span><span>,</span> <span>&#39;&#39;</span><span>);</span>

	<span>// Do more form stuff...
</span><span></span>
	<span>// re-enable the button after the API responds
</span><span></span>	<span>btn</span><span>.</span><span>removeAttribute</span><span>(</span><span>&#39;disabled&#39;</span><span>);</span>

<span>});</span>
</code></pre></div>
<p>With the <code>button</code> disabled, it cannot be clicked again.</p>

<h2 id="why-this-pattern-is-bad">Why this pattern is bad</h2>

<p>For starters, it doesn’t really do what you want it to.</p>

<p>Just because the <code>button</code> is <code>disabled</code> doesn’t mean the form can’t be submitted. Someone could focus on one of the form fields, then press the <code>enter</code> or <code>return</code> key, and the form would submit.</p>

<p>But it’s also horrible for accessibility.</p>

<p>Elements with the <code>disabled</code> attribute cannot receive focus, which creates confusing situations for screen reader users and people who <a href="https://gomakethings.com/navigating-the-web-with-a-keyboard/">navigate the web with a keyboard</a>.</p>

<p>If the <code>button</code> is the current item in focus when you add the <code>disabled</code> attribute (for example, if someone just pressed it to submit the form), the element actually loses focus, which shifts to the <code>document</code> element.</p>

<p>For a screen reader user, this is particularly jarring, as now you’re in a totally different place on the page.</p>

<p>So to recap, it doesn’t do what you actually want it to <em>and</em> it breaks your application for a segment of your users.</p>

<h2 id="a-better-way">A better way</h2>

<p>So, what should you do instead?</p>

<p>I personally prefer to add an attribute to the <code>form</code> as its being submitted, and remove it after all of the form actions are done. Whenever a <code>submit</code> event happens, I check for that attribute first. If it exists, I end the event handler early to prevent multiple form submissions.</p>
<div><pre><code data-lang="js"><span>form</span><span>.</span><span>addEventListener</span><span>(</span><span>&#39;submit&#39;</span><span>,</span> <span>function</span> <span>(</span><span>event</span><span>)</span> <span>{</span>

	<span>// Don&#39;t let the form reload the page
</span><span></span>	<span>event</span><span>.</span><span>preventDefault</span><span>();</span>

	<span>// If the form is already submitting, do nothing
</span><span></span>	<span>if</span> <span>(</span><span>form</span><span>.</span><span>hasAttribute</span><span>(</span><span>&#39;data-submitting&#39;</span><span>))</span> <span>return</span><span>;</span>

	<span>// Add the [data-submitting] attribute to stop multiple submissions
</span><span></span>	<span>form</span><span>.</span><span>setAttribute</span><span>(</span><span>&#39;data-submitting&#39;</span><span>,</span> <span>&#39;&#39;</span><span>);</span>

	<span>// Do more form stuff...
</span><span></span>
	<span>// Remove the [data-submitting] attribute
</span><span></span>	<span>form</span><span>.</span><span>removeAttribute</span><span>(</span><span>&#39;data-submitting&#39;</span><span>);</span>

<span>});</span>
</code></pre></div>
<p>This preserves focus on your form elements and avoids any weird accessibility issues, prevents duplication form submissions, and also prevents keyboard actions on other form fields from submitting the form.</p>

<p>You can also style form elements to “appear” disabled using the <code>[data-submitting]</code> CSS selector…</p>
<div><pre><code data-lang="css"><span>[</span><span>data-submitting</span><span>]</span> <span>button</span> <span>{</span>
	<span>opacity</span><span>:</span> <span>0.8</span><span>;</span>
<span>}</span></code></pre></div>
<p>Don’t forget to also include <a href="https://gomakethings.com/how-and-why-to-use-aria-live/">an ARIA live region</a> and display form status messages throughout the process.</p>

<h2 id="need-help-with-stuff-like-this">Need help with stuff like this?</h2>

<p>I offer <a href="https://gomakethings.com/consulting">consulting services</a>, and can help your organization ship faster, reduce costs, and simplify web development.</p>

<p>If you’re a solo developer and just wish you had someone to ask questions about stuff like this, I also offer private coaching. <a href="https://gomakethings.com/about">Send me an email to learn more.</a>.</p>

<p>I’ve advised and written code for organizations like Apple, Harvard Business School, Adidas, Chobani, and more. I’d love to work with you and your team.</p>


	</article></div>
  </body>
</html>
