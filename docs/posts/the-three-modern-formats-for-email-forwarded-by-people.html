<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/EmailThreeForwardingFormats">Original</a>
    <h1>The three modern formats for email forwarded by people</h1>
    
    <div id="readability-page-1" class="page"><div><h2>The three modern formats for email forwarded by people</h2>

	<p><small>October  7, 2023</small></p>
</div><div><p>It&#39;s routine for people to forward email around, often with their
own comments added. Today, there are three different formats that
this is done in, all of which have their own ecological niche, and
all of which you may need to care about if you&#39;re setting up and
configuring a new mail client environment, or if you get sent
forwarded email by people (for example, because they&#39;re reporting
some problem with email, perhaps relayed to them from someone else).</p>

<p>The first format and probably the most common one is what I will
call <em>rendered text format</em>. In this format, the email message is
&#39;forwarded&#39; as text inserted into the message in more or less the
form the person forwarding it sees in their email client. This means
it has a limited selection of message headers and sometimes even
they won&#39;t be included fully intact. Rendered text format makes a
lot of sense for humans to read in ordinary circumstances, and it&#39;s
generally easy to quote everything (commentary and forwarded message
both) when people reply (often with <a href="https://utcc.utoronto.ca/~cks/space/blog/tech/TopPostingRealization">top posting</a>). Obviously this format doesn&#39;t
really work if the forwarded message has complex content, like
embedded images.</p>

<p>(The &#39;rendered text&#39; and the whole message may be HTML, but I don&#39;t
think very many mail clients will carefully construct a version
that still has the images attached and so on.)</p>

<p>The second format is MIME, with a message/rfc822 content type
(normally set to be &#39;inline&#39; instead of &#39;attachment&#39;). This forwards
the message with everything intact, including both the headers and
any complex formatting or embedded additional things (like images
or PDF attachments) that it may contain. Pretty much any decent
email client can show these MIME message/rfc822 parts inline,
rendered as they would show a regular message (so, for example,
with only certain headers shown). In theory MIME forwards are what
everyone should want and ask for if they want the full literal
message; they&#39;re certainly what you&#39;d like to get from people if
they&#39;re reporting spam. Any decent mail client should be able to
do things like show you the full headers or extract the entire
forwarded message to a file.</p>

<p>Unfortunately life is not always perfect, so we have the third
format, which I will call <em>literal plaintext format</em>. Literal
plaintext format includes the entire message in raw form, but not
in a separate MIME part, just as text, with all of its raw MIME
bits dumped out for the reader. You need literal plaintext format
because some places want the full message headers in contexts like
spam reports, but can&#39;t handle MIME message/rfc822 messages. Sometimes
they&#39;ll tell you this explicitly, and sometimes you&#39;ll just get
replies telling you that they couldn&#39;t handle your &#39;.eml&#39; attachment.</p>

<p>I believe that mail clients often default to the first format and
offer the second format as &#39;forward as an attachment&#39; or &#39;attach
message&#39; (although normally the MIME headers would ask for such
messages to be displayed inline). I don&#39;t know if it&#39;s very common
for mail clients to offer an easy way to do the third.</p>

<p>(I wrestled with this recently when I was configuring my <a href="https://www.gnu.org/software/emacs/manual/html_mono/mh-e.html">MH-E</a>
environment to be able to forward messages in all three formats.)</p>

<h3>Sidebar: Getting these formats in command line NMH</h3>

<p>NMH forwards messages with <a href="https://manpages.ubuntu.com/manpages/jammy/en/man1/forw.1mh.html"><code>forw</code></a> (<a href="https://manpages.org/forw">also</a>), which takes an assortment of options.
Forwarding messages as MIME is &#39;<code>forw -mime</code>&#39;, and don&#39;t forget to
give <a href="https://manpages.ubuntu.com/manpages/jammy/en/man1/whatnow.1mh.html"><code>whatnow</code></a>
(<a href="https://manpages.org/whatnow">also</a>) a &#39;<code>mime</code>&#39; command to process
the directives that <code>forw</code> will insert (as is necessary when <a href="https://utcc.utoronto.ca/~cks/space/blog/unix/MHSendingMIMEAttachments">adding
MIME attachments</a>).</p>

<p>Forwarding messages as literal plaintext is best done with &#39;<code>forw
-noformat -nodashstuffing</code>&#39;. This is not the proper NMH way to
forward messages in non-MIME format, but it&#39;s the way that&#39;s most
likely to be accepted by places that you report spam to that won&#39;t
accept MIME message/rfc822 format (<a href="https://mastodon.social/@cks/111188739380051982">yes, they exist</a>).</p>

<p>Forwarding messages as rendered text is sufficiently complicated
to be well outside the scope of this entry. This is due to NMH
limitations, especially with MIME messages; it&#39;s 2023, MIME has
been around for plural decades, and (N)MH still doesn&#39;t have any
good way to provide the rendered version of messages for forwarding
or replies.</p>

<p>(At least it&#39;s possible if you work hard enough, probably including
<a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/ToolsEmail">your own program to handle rendering MIME-encoded messages</a>.)</p>
</div></div>
  </body>
</html>
