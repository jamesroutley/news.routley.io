<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.system76.com/post/major-updates-for-system76-open-firmware-june-2023">Original</a>
    <h1>System76&#39;s coreboot open firmware manages to disable Intel ME for Raptor Lake</h1>
    
    <div id="readability-page-1" class="page"><div data-v-7773bbb7="" data-v-7773bbb7=""><p>We’re constantly making improvements to our products to provide the best experience for users. Last week, we introduced new functionality to our 13th Gen Intel laptops with System76 Open Firmware. If you have a CPU from a previous generation, take a look at our <a target="_blank" rel="noopener" href="https://github.com/system76/firmware-open/blob/master/FEATURES.md">firmware matrix</a> to see which updates are available on your system. We’ll be adding these changes to previous generations over time.</p><h2><strong>Re-disabled Intel Management Engine</strong></h2><p>We prefer to disable the Intel Management Engine wherever possible to reduce the amount of closed firmware running on System76 hardware. We’ve resolved a coreboot bug that allows the Intel ME (Management Engine) to once again be disabled.</p><p>This bug was a buffer overflow which caused coreboot firmware memory to be overwritten by the TPM measurement log, keeping the S3 suspend method from working properly. As a result of this, we had to switch from S3 to S0ix suspend, which required use of the Intel ME in order for OS-level drivers to function.</p><p>By fixing this bug, we were able to move back to S3 and re-disable the Intel ME on most platforms. (However, S3 suspend is not functional in the silicon we received for 11th Gen (Tiger Lake) U-class CPUs.) This fix was submitted upstream to coreboot as well.</p><p><a target="_blank" rel="noopener" href="https://review.coreboot.org/c/coreboot/+/73297">https://review.coreboot.org/c/coreboot/+/73297</a></p><h2><strong>Windows 11 &amp; Secure Boot support</strong></h2><p>Windows 11 requires Secure Boot to install without tweaks. To support this, we’ve added a new firmware setup menu for enabling and disabling Secure Boot. This menu also allows for entering setup mode for custom key enrollment.</p><p>Secure Boot and TPM2 support is now available in System76 Open Firmware on laptops with 13th Gen Intel CPUs. We&#39;ll be adding the feature to previous CPU generations over time.</p>
    <p>
      <img src="https://prismic-io.s3.amazonaws.com/blog-system76/343cb448-67f4-4251-8968-55623f483f69_bios-image-galp7.png" alt="Image" copyright=""/>
    </p>
  <p>Work is being done in Pop!_OS to enable the use of custom Secure Boot keys, in addition to adding TPM2-TOTP authentication of the firmware boot path.</p><h2><strong>Increased battery power limits &amp; CPU performance</strong></h2><p>The standard battery power limit for the CPU was increased from 28W to 45W on the majority of our 13th Gen Intel systems, with some going as high as 55W. This significantly improves CPU performance on battery on H-class and higher CPUs. Many older systems will be getting updates in the near future as well. This change was done after an analysis of power capabilities when developing the new 13th Gen systems. Battery life should remain about the same for most use cases. The CPU will finish tasks faster with total energy used remaining roughly the same. Continuous tasks like gaming can draw more energy, but framerates will be higher.</p><h2><strong>NVIDIA Dynamic Boost</strong></h2><p>On new systems with the NVIDIA 40-Series GPUs, we’ve added new code in coreboot to enable NVIDIA Dynamic Boost, which allows power to be shared between the CPU and GPU. In practice, this means that your system can provide up to an additional 25W boost to the subsystem that needs it most, significantly improving throughput and framerates.</p><h2><strong>Firmware Security Update</strong></h2><p>Firmware for 13th Gen Intel (Raptor Lake) systems is locked while running, meaning it cannot be tampered with or overwritten. To unlock it, you must be physically present at your computer; you’ll be prompted to type a randomly generated number as confirmation to begin firmware flashing, and the system will reboot. Both EC firmware and system firmware are locked on any boots where the prompt is not shown.</p>
    <p>
      <img src="https://images.prismic.io/blog-system76/c9fb6ba0-a1c5-4565-a401-22418c34e3f6_image2.png?auto=compress,format" alt="Image" copyright=""/>
    </p>
  <p><a target="_blank" rel="noopener" href="https://github.com/system76/firmware-setup/pull/18">system76/firmware-setup#1</a></p><h2><strong>Fixes for soldered DDR5 memory initialization in coreboot</strong></h2><p>The Lemur Pro (lemp12) laptop comes with one 8GB DDR5 DIMM (RAM stick) attached to the motherboard in addition to one DDR5 DIMM slot. We corrected issues with memory-down (memory soldered to the motherboard) DDR5 memory initialization on 12th and 13th Gen Intel (Alder Lake and Raptor Lake) platforms, ensuring future systems using this style of memory will be supported by coreboot.</p><h2><strong>Coreboot support for 13th Gen HX-class Intel processors</strong></h2><p>13th Gen Intel (Raptor Lake) HX-class CPUs contain a dedicated Platform Controller Hub (PCH) to boost performance. Though Raptor Lake HX-class chips were <em>somewhat</em> supported on coreboot, we added model IDs for a vast number of CPU and PCH devices to ensure full support. As with our other coreboot work, this support will be upstreamed for the benefit of all coreboot users.</p><h2><strong>Intel Discrete Thunderbolt driver for coreboot</strong></h2><p>Our new laptops with 13th Gen Intel HX-class CPUs use a Maple Ridge discrete Thunderbolt controller to support Thunderbolt connectivity. This controller required changes in firmware to support setting the correct security state and enforcing the use of VT-d in the OS. The driver has been submitted upstream to coreboot for use in other systems using this Thunderbolt controller.</p></div></div>
  </body>
</html>
