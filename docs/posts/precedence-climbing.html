<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bernsteinbear.com/blog/precedence-climbing/?utm_source=rss">Original</a>
    <h1>Precedence climbing</h1>
    
    <div id="readability-page-1" class="page"><div>
        

        
        
        <p><i>May 4, 2025</i></p>
        
        
        <div>
            <p>I wrote a <a href="https://pdubroy.github.io/200andchange/precedence-climbing/">sample precedence-climbing expression
parser</a>. I wrote
it for <a href="https://dubroy.com/blog/">Patrick Dubroy</a>’s excellent <a href="https://pdubroy.github.io/200andchange/">small website
for small programs</a>, which uses docco
to pull out code comments into a side pane next to the code and make everything
look pretty.</p>

<p>My implementation is a tokenizer and parser for simple math expressions and
function calls in under 200 SLOC. It builds an “AST” in the form of nested
Python lists that kind of look like S-expressions (but you could also make
classes for AST nodes if you like).</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span><span> </span><span>tokenize</span><span>(</span><span>&#34;1+2*3&#34;</span><span>)</span>
<span>[1, &#39;+&#39;, 2, &#39;*&#39;, 3]
</span><span>&gt;&gt;&gt;</span><span> </span><span>parse</span><span>(</span><span>_</span><span>)</span>
<span>[&#39;+&#39;, 1, [&#39;*&#39;, 2, 3]]
</span><span>&gt;&gt;&gt;</span><span>
</span></code></pre></div></div>

<p>It also comes with tests. It works standalone or can be used as the “simple
expression parser” component of a larger recursive descent parser (that handles
function definitions, variable binding, etc).</p>

<p>See also <a href="https://bernsteinbear.com/blog/ir-lvalues/">Parsing to IR and lvalues</a> which takes this
approach but builds an SSA based IR instead of an AST.</p>

        </div>
            
    <!-- Workaround for FB MITM -->
    <!-- Google tag (gtag.js) -->







    </div></div>
  </body>
</html>
