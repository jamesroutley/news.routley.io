<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.feld.me/posts/2025/09/webdav-isnt-dead-yet/">Original</a>
    <h1>WebDAV isn&#39;t dead yet</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p>I should have titled this post &#34;I hate S3&#34;.</p>
<blockquote>
<p>ðŸ“¢ What is the status quo?</p>
</blockquote>
<p>FTP is dead (yay), SFTP is too dependent on SSH and unix authentication.
AWS made S3 pervasive and now every webapp that needs to store files
assumes you&#39;ll be able to connect it S3. This is good for Amazon, but
painful for everyone else.</p>
<blockquote>
<p>ðŸ“¢ But who is WebDAV useful for?</p>
</blockquote>
<p>Most people working on personal projects, self-hosting, or just need
filesystem-over-HTTP-ish capabilities do not need S3, they just need a
place for their files behind some form of authentication. I stopped
reaching for S3 and started running from S3 a while ago and I think you
should consider doing the same.</p>
<p>Here are my core requirements:</p>
<ul>
<li>authentication</li>
<li>write files</li>
<li>efficiently sync files</li>
<li>ensure those files aren&#39;t publicly accessible by default</li>
<li>relatively easy to make those files public</li>
</ul>
<p>Here&#39;s what I don&#39;t need:</p>
<ul>
<li>advanced ACLs and roles</li>
<li>signed URLs</li>
<li>versioning (the V in WebDAV is actually versioning, but still...)</li>
<li>tiered storage</li>
<li>lifecycle rules</li>
<li>quotas, but could be done at the filesystem level (e.g., ZFS)</li>
<li>many things I can&#39;t think of right now</li>
</ul>
<p>This list probably resonates with you as well. I just don&#39;t think we
should be encouraging people to run Openstack Swift, CEPH, Minio, or
unfinished projects like Garage just to achieve file-storage-over-HTTP.</p>
<p>And with Minio recently <a href="https://biggo.com/news/202505261334_MinIO_Removes_Web_UI_Features">killing off most of their admin UI</a> and
making people suffer through crafting JSON policy files and uploading
them with the <code>mc</code> tool... just let it go. It&#39;s not worth your time.</p>
<p>How would you access WebDAV to manage files if you&#39;ve never tried before?
Lots of tools support it:</p>
<ul>
<li>MacOS Finder (<em>Go-&gt;Connect to Server...</em> enter <em>https://...</em>) and iOS
  Files</li>
<li>Windows Explorer (<em>Map Network Drive, Connect to a Web site...</em>)</li>
<li><a href="https://rclone.org">rclone</a></li>
<li>curl</li>
<li>Popular things like CyberDuck, WinSCP, Filezilla...</li>
</ul>
<p>It&#39;s broadly available as you can see even though it&#39;s considered by
many to be archaic or obsolete. Your webserver that you&#39;re running
probably already supports it and you just need to integrate auth and
setup a vhost / domain for it: Apache, Nginx, Caddy, Lighttpd, IIS ...
You&#39;ll even find support in OwnCloud/NextCloud too.</p>
<p>In fact, you&#39;re already using WebDAV and you just don&#39;t realize it. This
is how your contacts and calendars are synced on your devices. The CardDAV
and CalDAV protocols are somewhat like extensions to WebDAV so it suits those
purposes more efficiently, and they are not likely to go away any time
soon.</p>
<p>So here&#39;s how I&#39;m using it with Apache. I already have a few things that
work optimally in Apache so I didn&#39;t choose another webserver, but I
will note that Caddy probably has the simplest configuration
for ensuring individual users get dropped into a private directory. A
lot of out-of-the-box WebDAV solutions will be exposing all of
the files to anyone who can authenticate which is silly, but it&#39;s
solvable. I&#39;ll admit that Apache&#39;s config is probably the most
convoluted and verbose to achieve a multi-user setup with some semblance
of privacy, but it&#39;s not impossible.</p>
<p>My setup is using LDAP auth, but you can plug in your own obviously.</p>
<p>Behold:</p>
<div><pre><span></span><code><span># DAV specific modules you want</span>
<span>LoadModule</span><span> </span>dav_module<span> </span>libexec/apache24/mod_dav.so
<span>LoadModule</span><span> </span>dav_fs_module<span> </span>libexec/apache24/mod_dav_fs.so
<span>LoadModule</span><span> </span>dav_lock_module<span> </span>libexec/apache24/mod_dav_lock.so

<span># Ancient fixes Apache includes in example config, kept just because...</span>
<span>BrowserMatch</span><span> </span><span>&#34;Microsoft Data Access Internet Publishing Provider&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;MS FrontPage&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;^WebDrive&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;^WebDAVFS/1.[01234]&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;^gnome-vfs/1.0&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;^XML Spy&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34;^Dreamweaver-WebDAV-SCM1&#34;</span><span> </span>redirect-carefully
<span>BrowserMatch</span><span> </span><span>&#34; Konqueror/4&#34;</span><span> </span>redirect-carefully

<span>&lt;VirtualHost</span><span> </span><span>*:443</span><span>&gt;</span>
<span>    </span><span>ServerName</span><span> </span>webdav.example.com
<span>    </span><span>DocumentRoot</span><span> </span><span>/usr/local/www/webdav</span>
<span>    </span><span>SSLEngine</span><span> </span><span>on</span>
<span>    </span><span># other SSL settings left to you</span>

<span>    </span><span># This is really important when serving WebDAV</span>
<span>    </span><span># or some operations fail due to an index attempting to be served</span>
<span>    </span><span>DirectoryIndex</span><span> </span>disabled

<span>    </span><span>DavLockDB</span><span> </span><span>&#34;/tmp/DavLock&#34;</span>
<span>    </span><span>DavMinTimeout</span><span> </span><span>600</span>
<span>    </span><span>DavDepthInfinity</span><span> </span><span>On</span>

<span>    </span><span>&lt;Directory</span><span> </span><span>/usr/local/www/webdav/</span><span>&gt;</span>
<span>        </span><span>DAV</span><span> </span><span>On</span>
<span>        </span><span>AllowOverride</span><span> </span><span>None</span>

<span>        </span><span>AuthType</span><span> </span>Basic
<span>        </span><span>AuthName</span><span> </span>WebDAV
<span>        </span><span>AuthBasicProvider</span><span> </span>ldap
<span>        </span><span>AuthLDAPURL</span><span> </span>ldaps://ldapserver:636/ou=users,dc=example,dc=com?uid
<span>        </span><span>AuthLDAPRemoteUserAttribute</span><span> </span>uid
<span>        </span><span>&lt;Limit</span><span> </span><span>GET HEAD POST PUT OPTIONS MOVE DELETE COPY LOCK UNLOCK PROPFIND PROPPATCH MKCOL DUPLICATE</span><span>&gt;</span>
<span>            </span><span>Require</span><span> </span>ldap-group<span> </span>cn=webdav,ou=groups,dc=example,dc=com
<span>            </span><span>Require</span><span> </span>valid-user
<span>        </span><span>&lt;/Limit&gt;</span>
<span>    </span><span>&lt;/Directory&gt;</span>

<span>    </span><span># Force users to only be able to see files in the subdirectory matching their username</span>
<span>    </span><span>RewriteEngine</span><span> </span><span>On</span>
<span>    </span><span># Only rewrite if NOT already in user&#39;s directory</span>
<span>    </span><span>RewriteCond</span><span> </span>%{REQUEST_URI}<span> </span>!^/%{LA-U:REMOTE_USER}/
<span>    </span><span>RewriteCond</span><span> </span>%{LA-U:REMOTE_USER}<span> </span>^(.+)$
<span>    </span><span>RewriteRule</span><span> </span>^(.*)$<span> </span>/%1$1<span> </span>[L]
<span>&lt;/VirtualHost&gt;</span>
</code></pre></div>

<p>And now if there&#39;s a subdirectory under <code>/usr/local/www/webdav</code> matching
the user&#39;s name and writable by the webserver, they&#39;ll be able to
authenticate and use the storage space.</p>
<p>So what am I using this with?</p>
<ul>
<li><a href="https://joplinapp.org">Joplin</a>, a self hosted notes app that syncs to my own server</li>
<li><a href="https://keepassium.com">Keepassium</a>, Keepass app well integrated
  into iOS/MacOS</li>
<li><a href="https://www.videolan.org/vlc/">VLC</a></li>
<li><a href="https://firecore.com/infuse">Infuse</a></li>
<li>Publishing this static blog with rclone (it&#39;s faster than rsync over NFS/SMB, and I won&#39;t need a VPN when I&#39;m roaming!)</li>
</ul>
<p>While writing this article I came across an interesting project under
development, <a href="https://github.com/javi11/altmount">Altmount</a>. This would
allow you to &#34;mount&#34; published content on Usenet and access it directly
without downloading it... super interesting considering I can get
multi-gigabit access to Usenet pretty easily.</p>
<p>Don&#39;t sleep on WebDAV, give it a chance. It&#39;s not dead yet.</p>
	</div></div>
  </body>
</html>
