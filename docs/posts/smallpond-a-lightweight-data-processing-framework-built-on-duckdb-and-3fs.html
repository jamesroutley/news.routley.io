<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/deepseek-ai/smallpond">Original</a>
    <h1>Smallpond ‚Äì A lightweight data processing framework built on DuckDB and 3FS</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/deepseek-ai/smallpond/actions/workflows/ci.yml"><img src="https://github.com/deepseek-ai/smallpond/actions/workflows/ci.yml/badge.svg?branch=main" alt="CI"/></a>
<a href="https://pypi.org/project/smallpond/" rel="nofollow"><img src="https://camo.githubusercontent.com/f2fb88f1a131c3bbe25f3a2f97c54fbe00a3a161287fd182b3960b00db28ebdf/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f736d616c6c706f6e64" alt="PyPI" data-canonical-src="https://img.shields.io/pypi/v/smallpond"/></a>
<a href="https://deepseek-ai.github.io/smallpond/" rel="nofollow"><img src="https://camo.githubusercontent.com/51c41012387957253bba7ad1b120c7c8ff6b9d77cee7435921f9e47c36195932/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6c61746573742d627269676874677265656e2e737667" alt="Docs" data-canonical-src="https://img.shields.io/badge/docs-latest-brightgreen.svg"/></a>
<a href="https://github.com/deepseek-ai/smallpond/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/6581c31c16c1b13ddc2efb92e2ad69a93ddc4a92fd871ff15d401c4c6c9155a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue.svg"/></a></p>
<p dir="auto">A lightweight data processing framework built on <a href="https://duckdb.org/" rel="nofollow">DuckDB</a> and <a href="https://github.com/deepseek-ai/3FS">3FS</a>.</p>

<ul dir="auto">
<li>üöÄ High-performance data processing powered by DuckDB</li>
<li>üåç Scalable to handle PB-scale datasets</li>
<li>üõ†Ô∏è Easy operations with no long-running services</li>
</ul>

<p dir="auto">Python 3.8 to 3.12 is supported.</p>


<div dir="auto" data-snippet-clipboard-copy-content="# Download example data
wget https://duckdb.org/data/prices.parquet"><pre><span><span>#</span> Download example data</span>
wget https://duckdb.org/data/prices.parquet</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="import smallpond

# Initialize session
sp = smallpond.init()

# Load data
df = sp.read_parquet(&#34;prices.parquet&#34;)

# Process data
df = df.repartition(3, hash_by=&#34;ticker&#34;)
df = sp.partial_sql(&#34;SELECT ticker, min(price), max(price) FROM {0} GROUP BY ticker&#34;, df)

# Save results
df.write_parquet(&#34;output/&#34;)
# Show results
print(df.to_pandas())"><pre><span>import</span> <span>smallpond</span>

<span># Initialize session</span>
<span>sp</span> <span>=</span> <span>smallpond</span>.<span>init</span>()

<span># Load data</span>
<span>df</span> <span>=</span> <span>sp</span>.<span>read_parquet</span>(<span>&#34;prices.parquet&#34;</span>)

<span># Process data</span>
<span>df</span> <span>=</span> <span>df</span>.<span>repartition</span>(<span>3</span>, <span>hash_by</span><span>=</span><span>&#34;ticker&#34;</span>)
<span>df</span> <span>=</span> <span>sp</span>.<span>partial_sql</span>(<span>&#34;SELECT ticker, min(price), max(price) FROM {0} GROUP BY ticker&#34;</span>, <span>df</span>)

<span># Save results</span>
<span>df</span>.<span>write_parquet</span>(<span>&#34;output/&#34;</span>)
<span># Show results</span>
<span>print</span>(<span>df</span>.<span>to_pandas</span>())</pre></div>

<p dir="auto">For detailed guides and API reference:</p>
<ul dir="auto">
<li><a href="https://github.com/deepseek-ai/smallpond/blob/main/docs/source/getstarted.rst">Getting Started</a></li>
<li><a href="https://github.com/deepseek-ai/smallpond/blob/main/docs/source/api.rst">API Reference</a></li>
</ul>

<p dir="auto">We evaluated smallpond using the <a href="https://sortbenchmark.org/" rel="nofollow">GraySort benchmark</a> (<a href="https://github.com/deepseek-ai/smallpond/blob/main/benchmarks/gray_sort_benchmark.py">script</a>) on a cluster comprising 50 compute nodes and 25 storage nodes running <a href="https://github.com/deepseek-ai/3FS">3FS</a>.  The benchmark sorted 110.5TiB of data in 30 minutes and 14 seconds, achieving an average throughput of 3.66TiB/min.</p>
<p dir="auto">Details can be found in <a href="https://github.com/deepseek-ai/3FS?tab=readme-ov-file#2-graysort">3FS - Gray Sort</a>.</p>

<div dir="auto" data-snippet-clipboard-copy-content="pip install .[dev]

# run unit tests
pytest -v tests/test*.py

# build documentation
pip install .[docs]
cd docs
make html
python -m http.server --directory build/html"><pre>pip install .[dev]

<span><span>#</span> run unit tests</span>
pytest -v tests/test<span>*</span>.py

<span><span>#</span> build documentation</span>
pip install .[docs]
<span>cd</span> docs
make html
python -m http.server --directory build/html</pre></div>

<p dir="auto">This project is licensed under the <a href="https://github.com/deepseek-ai/smallpond/blob/main/LICENSE">MIT License</a>.</p>
</article></div></div>
  </body>
</html>
