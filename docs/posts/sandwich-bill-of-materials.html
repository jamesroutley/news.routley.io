<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://nesbitt.io/2026/02/08/sandwich-bill-of-materials.html">Original</a>
    <h1>Sandwich Bill of Materials</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p><strong>Specification:</strong> SBOM 1.0 (Sandwich Bill of Materials)</p>

<h3 id="abstract">Abstract</h3>

<p>Modern sandwich construction relies on a complex graph of transitive ingredients sourced from multiple registries (farms, distributors, markets). Consumers have no standardized way to enumerate the components of their lunch, assess ingredient provenance, or verify that their sandwich was assembled from known-good sources. SBOM addresses this by providing a machine-readable format for declaring the full dependency tree of a sandwich, including sub-components, licensing information, and known vulnerabilities.</p>

<h3 id="motivation">Motivation</h3>

<p>A typical sandwich contains between 6 and 47 direct dependencies, each pulling in its own transitive ingredients. A “simple” BLT depends on bacon, which depends on pork, which depends on a pig, which depends on feed corn, water, antibiotics, and a farmer whose field hasn’t flooded yet. The consumer sees three letters, but the supply chain sees a directed acyclic graph with cycle detection issues (the pig eats the corn that grows in the field that was fertilized by the pig).</p>

<p>The 2025 egg price crisis was a cascading failure equivalent to a left-pad incident, except it affected breakfast. A single avian flu outbreak took down the entire egg ecosystem for months. Post-incident analysis revealed that 94% of affected sandwiches had no lockfile and were resolving eggs to <code>latest</code> at assembly time.</p>

<h3 id="specification">Specification</h3>

<p>An SBOM document MUST be a JSON file with the <code>.sbom</code> extension, after YAML was considered and rejected on the grounds that the sandwich industry has enough problems without adding whitespace sensitivity.</p>

<p>Each sandwich component MUST include the following fields:</p>

<p><strong>surl</strong> (required): A Sandwich URL uniquely identifying the ingredient. Format: <code>surl:type/name@version</code>. Follows the same convention as <a href="https://github.com/package-url/purl-spec">PURL</a> but for food. Examples:</p>



<p><strong>name</strong> (required): The canonical name of the ingredient as registered in a recognized food registry. Unregistered ingredients (e.g., “that sauce from the place”) MUST be declared as <code>unverified-source</code> and will trigger a warning during sandwich linting.</p>

<p><strong>version</strong> (required): The specific version of the ingredient. Tomatoes MUST use calendar versioning (harvest date). Cheese MUST use age-based versioning (e.g., <code>cheddar@18m</code>). Bread follows semver, where a MAJOR version bump indicates a change in grain type, MINOR indicates a change in hydration percentage, and PATCH indicates someone left it out overnight and it’s a bit stale but probably fine.</p>

<p><strong>supplier</strong> (required): The origin registry. Valid registries include <code>farm://</code>, <code>supermarket://</code>, <code>farmers-market://</code>, and <code>back-of-the-fridge://</code>. The latter is considered an untrusted source and components resolved from it MUST include a <code>best-before</code> integrity check.</p>

<p><strong>integrity</strong> (required): A SHA-256 hash of the ingredient at time of acquisition.</p>

<p><strong>license</strong> (required): The license under which the ingredient is distributed. Common licenses include:</p>

<ul>
  <li><strong>MIT</strong> (Mustard Is Transferable): The ingredient may be used in any sandwich without restriction. Attribution appreciated but not required.</li>
  <li><strong>GPL</strong> (General Pickle License): If you include a GPL-licensed ingredient, the entire sandwich becomes open-source. You must provide the full recipe to anyone who asks. Pickle vendors have been particularly aggressive about this.</li>
  <li><strong>AGPL</strong> (Affero General Pickle License): Same as GPL, but if you serve the sandwich over a network (delivery apps), you must also publish the recipe. This is why most restaurants avoid AGPL pickles.</li>
  <li><strong>BSD</strong> (Bread, Sauce, Distributed): Permissive. You can do whatever you want as long as you keep the original baker’s name on the bread bag, and also a second copy of the baker’s name, and also don’t use the baker’s name to promote your sandwich without permission. There are four variants of this license and nobody can remember which is which.</li>
  <li><strong>SSPL</strong> (Server Side Pickle License): You may use this pickle in your sandwich, but if you offer sandwich-making as a service, you must open-source your entire kitchen, including the weird drawer with all the takeaway menus. Most cloud sandwich providers have stopped serving SSPL pickles entirely.</li>
  <li><strong>Proprietary</strong>: The ingredient’s composition is not disclosed. Common for “secret sauces.” Consumption is permitted but redistribution, reverse-engineering, or asking what’s in it are prohibited by the EULA you agreed to by opening the packet.</li>
  <li><strong>Public Domain</strong>: The ingredient’s creator has waived all rights. Salt, for example, has been public domain since approximately the Jurassic period, though several companies have attempted to relicense it.</li>
</ul>

<h3 id="dependency-resolution">Dependency Resolution</h3>

<p>Sandwich assembly MUST resolve dependencies depth-first. If two ingredients declare conflicting sub-dependencies (e.g., sourdough requires <code>starter-culture@wild</code> but the prosciutto’s curing process pins <code>salt@himalayan-pink</code>), the assembler SHOULD attempt version negotiation. If negotiation fails, the sandwich enters a conflict state and MUST NOT be consumed until a human reviews the dependency tree and makes a judgement call.</p>

<p>Circular dependencies are permitted but discouraged. A sandwich that contains bread made with beer made with grain from the same field as the bread is technically valid but will cause the resolver to emit a warning about “co-dependent sourdough.”</p>

<h3 id="vulnerability-scanning">Vulnerability Scanning</h3>

<p>All SBOM documents SHOULD be scanned against the National Sandwich Vulnerability Database (NSVD). Known vulnerabilities include:</p>

<ul>
  <li><strong>CVE-2024-MAYO</strong>: Mayonnaise left at room temperature for more than four hours. Severity: Critical. Affected versions: all. No patch available; mitigation requires refrigeration, which the specification cannot enforce.</li>
  <li><strong>CVE-2023-GLUTEN</strong>: Bread contains gluten. This is not a bug; it is a feature of wheat. However, it must be disclosed because approximately 1% of consumers will experience adverse effects, and the remaining 99% will ask about it anyway.</li>
  <li><strong>CVE-2025-AVO</strong>: Avocado ripeness window is approximately 17 minutes. Version pinning is ineffective. The working group recommends vendoring avocado (i.e., buying it already mashed) to reduce exposure to ripeness drift.</li>
  <li><strong>CVE-2019-SPROUT</strong>: Alfalfa sprouts were found to be executing arbitrary bacteria in an unsandboxed environment. Severity: High. The vendor disputes this classification.</li>
</ul>

<h3 id="provenance-and-attestation">Provenance and Attestation</h3>

<p>Each ingredient MUST include a signed provenance attestation from the supplier. The attestation MUST be generated in a hermetic build environment and MUST NOT be generated in a build environment where other food is being prepared simultaneously, as this introduces the risk of cross-contamination of provenance claims.</p>

<p>For farm-sourced ingredients, the attestation chain SHOULD extend to the seed or animal of origin. A tomato’s provenance chain includes the seed, the soil, the water, the sunlight, the farmer, the truck, the distributor, and the shelf it sat on for a period the supermarket would prefer not to disclose.</p>

<p>Eggs are worse, because an egg’s provenance attestation is generated by a chicken that may itself lack a valid attestation chain. The working group has deferred the question of chicken-or-egg provenance ordering to version 2.0.</p>

<h3 id="reproducible-builds">Reproducible Builds</h3>

<p>A sandwich MUST be reproducible. Given identical inputs, two independent assemblers MUST produce bit-for-bit identical sandwiches, which in practice is impossible. The specification handles this by requiring assemblers to document all sources of non-determinism in a <code>sandwich.lock</code> file, including:</p>

<ul>
  <li>Ambient temperature at time of assembly</li>
  <li>Knife sharpness (affects tomato slice thickness, which affects structural integrity)</li>
  <li>Whether the assembler was “just eyeballing it” for condiment quantities</li>
  <li>Gravitational constant at location of assembly</li>
</ul>

<p>Reproducible sandwich builds remain aspirational. A compliance level of “close enough” is acceptable for non-safety-critical sandwiches. Safety-critical sandwiches SHOULD target full reproducibility.</p>

<h3 id="transitive-dependency-auditing">Transitive Dependency Auditing</h3>

<p>Consumers SHOULD audit their full dependency tree before consumption. A <code>sbom audit</code> command will flag any ingredient that:</p>

<ul>
  <li>Has not been updated in more than 12 months</li>
  <li>Is maintained by a single farmer with no succession plan (see also: goat farming)</li>
  <li>Has more than 200 transitive sub-ingredients</li>
  <li>Was sourced from a registry that does not support 2FA</li>
  <li>Contains an ingredient whose maintainer has mass-transferred ownership to an unknown entity in a different country (see: the <code>left-lettuce</code> incident)</li>
</ul>

<h3 id="adoption-and-compliance">Adoption and Compliance</h3>

<p>Early adoption has been mixed. The artisanal sandwich community objects to machine-readable formats on philosophical grounds, arguing that a sandwich’s ingredients should be discoverable through the act of eating it. The fast food industry has expressed support in principle but notes that their sandwiches’ dependency trees are trade secrets and will be shipped as compiled binaries.</p>

<p>The EU Sandwich Resilience Act (SRA) requires all sandwiches sold or distributed within the European Union to include a machine-readable SBOM by Q3 2027. Sandwiches without a valid SBOM will be denied entry at the border. The European Commission has endorsed the specification as part of its broader lunch sovereignty agenda, arguing that member states cannot depend on foreign sandwich infrastructure without visibility into the ingredient graph. A working paper on “strategic autonomy in condiment supply chains” is expected Q2 2027.</p>

<p>The US has issued Executive Order 14028.5, which requires all sandwiches served in federal buildings to include an SBOM. The order does not specify whether it means Sandwich or Software Bill of Materials. Several federal agencies have begun submitting both.</p>

<h3 id="the-sandwich-heritage-foundation">The Sandwich Heritage Foundation</h3>

<p>The <a href="https://www.softwareheritage.org/">Software Heritage</a> foundation archives all publicly available source code as a reference for future generations, and the Sandwich Heritage Foundation has adopted the same mission for sandwiches, with less success.</p>

<p>Every sandwich assembled under SBOM 1.0 is archived in a content-addressable store keyed by its integrity hash. The archive currently holds 14 sandwiches because most contributors cannot figure out how to hash a sandwich without eating it first. A BLT submitted in March was rejected because the tomato’s checksum changed during transit. The Foundation suspects condensation.</p>

<p>Long-term preservation remains an open problem. Software can be archived indefinitely on disk, but sandwiches introduce material constraints the specification was not designed for. The Foundation has explored freeze-drying, vacuum sealing, and “just taking a really detailed photo,” but none of these produce a bit-for-bit reproducible sandwich from the archive. The working group considers this a storage layer concern and out of scope for the specification.</p>

<p>Funding comes from individual donations and a pending grant application to the EU’s Horizon programme under the call for “digital preservation of cultural food heritage.” The application was rejected once already on the grounds that sandwiches are not digital, a characterization the Foundation disputes given that every sandwich under SBOM 1.0 is, by definition, a digital artifact with a hash.</p>

<h3 id="acknowledgments">Acknowledgments</h3>

<p>This specification is dedicated to a small sandwich shop on Folsom Street in SoMA that made the best BLT the author has ever eaten, and which closed in 2019 without producing an SBOM or publishing its recipe in any machine-readable format.</p>

<hr/>

<p><em>This specification is provided “AS IS” without warranty of any kind, including but not limited to the warranties of edibility, fitness for a particular meal, and non-contamination. The SBOM Working Group is not responsible for any sandwich constructed in accordance with this specification that nonetheless tastes bad.</em></p>

  </div>

  
</article>

      </div></div>
  </body>
</html>
