<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.eff.org/deeplinks/2022/08/fog-revealed-guided-tour-how-cops-can-browse-your-location-data">Original</a>
    <h1>Fog Revealed: A guided tour of how cops can browse your location data</h1>
    
    <div id="readability-page-1" class="page"><div>
            <article role="article">
  
  
  <div>
    <div><div><div><p><i><span>This article is part of EFF’s investigation of location data brokers and Fog Data Science. Be sure to check out our </span></i><a href="https://www.eff.org/issues/location-data-brokers"><i><span>issue page on Location Data Brokers</span></i></a><i><span>.</span></i></p>
<p><span>In </span><a href="https://eff.org/deeplinks/2022/08/inside-fog-data-science-secretive-company-selling-mass-surveillance-local-police"><span>Part 1 of our series on Fog Data Science</span></a><span>, we saw how when you give some apps permission to view your location, it can end up being packaged and sold to numerous other companies. Fog Data Science is one of those companies, and it has created a sleek search engine called Fog Reveal that allows cops to browse through that location data as if they were Google Maps results.</span></p>
<p><span>In this article, we’ll be taking a deep dive into Fog Reveal’s features. Although accounts for Reveal are typically only available to police departments, we were able to analyze the app’s public-facing code to get a better understanding of how it works, how it’s used, and what it looks like when cops get warrantless access to your location data.</span></p>
<h3><span>What We Found</span></h3>
<h3><span><div><div><div><p><span><i>Fog Reveal’s main page, allowing users to create geofenced device queries anywhere in the U.S.</i></span><span></span></p></div></div></div></span></h3>
<p><span>Fog Reveal offers law enforcement a powerful and incredibly invasive tool for sifting through huge datasets of phone location data. Reveal’s workflow allows cops to perform “geofenced” device searches, i.e. a search for all devices in a specified region on a map, and then find all other locations those devices were at other times. A </span><a href="https://www.documentcloud.org/documents/22187494-chino_2019-20_attachments#document/p11/a2143083"><span>powerpoint presentation</span></a><span> we received from the Chino Police Department describes how cops use these features to identify so-called “bed-down” locations and build up “patterns of life” for device’s owners. These features clearly undercut Fog’s claim that their product only contains “anonymized” data with “no PII [personally identifiable information]”.</span></p>
<p><span>We also discovered that Reveal’s frontend code contains the traces of a much more powerful “federal” featureset, which would allow users to further deanonymize data by revealing </span><a href="https://eff.org/deeplinks/2022/08/how-ad-tech-became-cop-spy-tech"><span>device Advertiser IDs</span></a><span>, IP addresses, and other phone details. As we will discuss, we do not know if these features are currently in use, but regardless, they demonstrate how simply showing a few more data fields can make a data aggregation tool like this much more invasive.</span></p>
<h3><span>Methodology</span></h3>
<p><span>To properly interpret our findings, it’s important to understand what kind of software Fog Reveal is, and to explain our research methodology. Fog Reveal, like Google Maps, is a web application that runs in your browser. To research its functionality, we locally reconstructed the app based on the web resources available by visiting www.fogreveal.com. This was possible because upon loading the page, without logging in or even clicking anything, the site automatically requests nearly all the javascript/HTML needed by the fully functional app. Throughout this document, we’ll be referring to the javascript and HTML pulled from Reveal as the “frontend” or “frontend code”, and to its server-side application as the “backend” or “backend code.”</span></p>
<p><span>By saving Reveal’s frontend files and organizing them into directories mirroring their original URL paths, we made a local reproduction of the site’s resources. From there, we wrote a mock backend server to serve the files and handle API calls made by the frontend, and then systematically worked out the format of data expected from that API. Once this was done, we had a semi-functional local reproduction of Reveal that made no requests to Fog’s actual server, and yet allowed us to explore its features. <br/></span></p>
<p><span>Because our mock server isn’t an exact replica of Reveal’s actual backend, we should preface this article by saying that our findings here only apply to the frontend code, as our mock server’s functionality is based on educated guesses and only returns fake location data. Consequently, it’s possible that our local reproduction’s behavior differs from Fog’s actual application. Where appropriate, we will cite the relevant frontend code (which we&#39;ve made available on <a href="https://www.documentcloud.org/projects/fog-data-science-javascripts-209415/">DocumentCloud</a>) and point out where uncertainties remain, and in general will describe our estimation of Fog Reveal’s actual features with as few assumptions about the backend as possible.</span></p>
<p><span>With that out of the way, let’s now take a look at our findings on Fog Reveal’s features. All of the data depicted in the following document, including latitude/longitude coordinates and IP addresses, are fake data generated randomly by our mock backend server. All screenshots are of our reconstructed app, not of Fog’s production app.</span></p>
<h3><span>Making a query</span></h3>
<p><span>After signing into Reveal, the user is presented with a Google Maps view of the US, as well as a toolbox at the top-right of the screen:</span></p>
<div><div><div><p>Users (most likely law enforcement) can zoom in on a location of interest, and use the toolbox to draw a geofence.</p></div></div></div>
<p><span>Reveal’s frontend shows several tools for drawing geofences, the most basic of which is just a circle:</span></p>
<div><div><div><p><i>Here, we’ve targeted the EFF offices in San Francisco.</i></p></div></div></div>
<p><span>If this isn’t specific enough, users can also draw arbitrary shapes to carve out a more detailed geofence:</span></p>
<div><div><div><p><i>We’ve now excluded EFF’s neighbors, as well as our patio.</i></p></div></div></div>
<p><span>The frontend limits the size of these geofence queries, although those limits are quite large. For example, the frontend circle tool will allow queries with a radius of 2500 meters<a id="footnoteref1_c6swfkh" title="circle.v4.3.js" href="#footnote1_c6swfkh">1</a>, allowing up to nearly 20 square kilometers</span><span> when performing a “signal search.” It’s possible that the backend imposes further limitations.</span></p>
<p><span>The user can also specify a date and time range for their query, and it seems that these ranges can stretch back over several months: a </span><a href="https://www.documentcloud.org/documents/22273670-fog-data-science-portal-users-manual?responsive=1&amp;title=1"><span>copy of Fog Reveal’s user manual</span></a><span> received from Greensboro Police Department claims that date/time ranges can extend up to 90 days, and can be searched “back to Jun[e] of 2017”.</span></p>
<h3><span>Query Results</span></h3>
<p><span>After specifying a geofence and date/time range, the user can run their query. Queries return a set of data points, referred to as “signals” in the user manual, which represent where a device was at a given point in time<a id="footnoteref2_f261nps" title="MHP&#39;s Software License Agreement, signal.v4.4.js" href="#footnote2_f261nps">2</a>.</span><span> The user can then do further analysis on these signals, such as grouping them by the device that produced them, or displaying the path taken by the device over time:</span></p>
<div><div><div><p><i>Our query results show 10 signals originating from 2 separate devices.</i></p></div></div></div>
<div><div><div><p><i>By grouping the signals by the device that produced them, Reveal can trace out their path over time, giving us a view into how the device’s owner was moving that day.</i></p></div></div></div>
<p><span>As an aside, in this example we&#39;ve been using the EFF office in San Francisco, which coincidentally was the location of a Planned Parenthood clinic in the past. While we do not have evidence that Fog or its law enforcement customers are using Reveal to search for people who’ve sought reproductive healthcare, it’s nevertheless conceivable that it could be used in this way: we have </span><a href="https://www.documentcloud.org/documents/22187494-chino_2019-20_attachments#document/p14"><span>examples of cops using Reveal to search individual buildings</span></a><span>, as well as examples of </span><a href="https://www.eff.org/deeplinks/2022/05/safegraphs-disingenuous-claims-about-location-data-mask-dangerous-industry"><span>other data brokers selling the location data of Planned Parenthood patients</span></a><span> (though SafeGraph stopped this practice after the story broke). After the Supreme Court’s decision to overturn </span><i><span>Roe v. Wade</span></i><span>, and as states across the country pass increasingly draconian bills restricting people’s access to abortion, it’s important to consider that Reveal and tools like it represent a new threat to people seeking reproductive healthcare.</span></p>
<h3><span>Digging deeper with device queries</span></h3>
<p><span>The frontend code suggests that Fog creates unique internal identifiers for devices–called “Fog IDs” (or “registration IDs,”<a id="footnoteref3_tnks445" title="modals.v4.1.html" href="#footnote3_tnks445">3</a></span><span> which we understand to be the same as Fog’s “device registration number”). These unique identifiers can be queried directly, allowing users to get </span><i><span>all</span></i><span> signals produced by devices within a certain period of time, regardless of whether they were in the original geofence or not:</span></p>

<p><span>In the user manual, this feature is called a “device query” and is described as including data from the device’s “local, regional or global travel.” The user manual also describes a feature called “common device queries”, which allow the user to determine “if any devices are common to multiple locations.”</span></p>
<h3><span>Federal features</span></h3>
<p><span>If certain user parameters</span><span> are set<a id="footnoteref4_yl9zdkg" title="user.v4.7.js" href="#footnote4_yl9zdkg">4</a>, Reveal will update its logo to display “Reveal Federal”, and enables the frontend to request a much more powerful suite of query tools from the backend. The frontend code suggests that these conditions may occur if the user is a member of federal law enforcement<a id="footnoteref5_41gllen" title="user.v4.7.js" href="#footnote5_41gllen">5</a></span><span>, but because we have no public records mentioning any such federal users, we don’t know for sure which users (if any) this is true for. For the purposes of this document, we will refer to these hypothetical users as federal users.</span></p>
<p><span>Federal users have access to an interface for converting between Fog’s internal device IDs (“FOG IDs”) and the device’s actual Advertiser ID<a id="footnoteref6_ha4nbce" title="header.v4.5.html" href="#footnote6_ha4nbce">6</a></span><span>:</span><span><br/></span></p>

<p><span>This is eyebrow raising for a couple reasons. First, if this feature is operational, it would contradict assurances made in a </span><a href="https://www.documentcloud.org/documents/22189386-missouri-state-highway-patrol_emails-3#document/p16/a2144713"><span>sample State search warrant Fog sends to customers</span></a><span> that FOG IDs can’t be converted back into Advertiser IDs. Second, if users could retrieve the Advertiser IDs of all devices in a query’s results, it would make Reveal far more capable of unmasking the identities of those device’s owners. This is due to the fact that if you have access to a device, you can read its Advertiser ID, and thus law enforcement would be able to verify if a specific person’s device was part of a query’s results.</span></p>
<p><span>Additionally, when a federal user views the devices in their results, the frontend is designed to show them a great deal more information<a id="footnoteref7_iq7fzd0" title="device.v4.5.html, modals.v5.1.html" href="#footnote7_iq7fzd0">7</a></span><span> about each device than it does non-federal users. Assuming that the backend provides this data, a federal user could view device information such as:</span></p>
<ul>
<li><span>User Agent</span></li>
<li><span>Browser Family</span></li>
<li><span>Browser Version</span></li>
<li><span>OS Family</span></li>
<li><span>OS Version</span></li>
<li><span>Device Family</span></li>
<li><span>Device Brand</span></li>
<li><span>Device Model</span></li>
<li><span>Whether the device belongs to an EU Resident</span></li>
<li><span>Last Seen IP Addresses</span></li>
</ul>

<p><span>Federal users are also given an interface to query for signals/devices based on one or more IP addresses:</span></p>

<h3><span>Connections to Venntel</span></h3>
<p><span>Many of the features we analyzed in this article are powered by API calls that reference Venntel, a major player in the data broker scene and </span><a href="https://www.aclu.org/news/privacy-technology/new-records-detail-dhs-purchase-and-use-of-vast-quantities-of-cell-phone-location-data"><span>DHS contractor</span></a><span>. Although it’s true that Fog’s engineers could have named these API endpoints arbitrarily, the way they function does seem to suggest that Venntel is a source of location and device data for Reveal.</span></p>
<p><span>Notably, when a Reveal user performs any geofenced device query, that query is submitted to the URL path <code>/Venntel/GetLocationData</code>. Additionally, queries for specific device locations send a request to <code>/Venntel/GetDeviceLocationData</code>, and when a federal user makes a request for more device details, the frontend sends a request to <code>/Venntel/GetDeviceDetails</code>. This means that nearly all frontend requests having to do with searching device or location data are prefixed with “Venntel”. And this wouldn’t be the only connection between Fog and Venntel: </span><a href="https://eff.org/deeplinks/2022/08/inside-fog-data-science-secretive-company-selling-mass-surveillance-local-police"><span>many of the records EFF has received point to a close link between the two companies</span></a><span>. <br/></span></p>
<h3><span>Conclusions</span></h3>
<p><span>As we&#39;ve seen, Fog Reveal provides law enforcement a powerfully invasive tool for searching huge swaths of commercially available location data. With a few clicks, its users can find not only the devices present in a location, but also </span><i><span>everywhere else</span></i><span> each of those devices went during other time periods. Its federal featureset, whether currently in use or not, demonstrates how much more invasive the tool could be by only revealing a handful of other fields.</span></p>

<p><em>Read more about Fog Data Science:</em></p>
<ul>
<li><em>Press release:<span> </span><a href="https://www.eff.org/press/releases/data-broker-helps-police-see-everywhere-youve-been-click-mouse-eff-investigation">Data Broker Helps Police See Everywhere You’ve Been with the Click of a Mouse: EFF Investigation</a></em></li>
<li><em><a href="https://www.eff.org/deeplinks/2022/06/what-fog-data-science-why-surveillance-company-so-dangerous">What is Fog Data Science? Why is the Surveillance Company so Dangerous?</a></em></li>
<li><em><a href="https://www.eff.org/deeplinks/2022/08/inside-fog-data-science-secretive-company-selling-mass-surveillance-local-police">Inside Fog Data Science, the Secretive Company Selling Mass Surveillance to Local Police</a></em></li>
<li><em><a href="https://www.eff.org/deeplinks/2022/08/fog-data-science-puts-our-fourth-amendment-rights-sale">Fog Data Science Puts our Fourth Amendment Rights up for Sale</a></em></li>
<li><a href="https://www.eff.org/deeplinks/2022/08/how-law-enforcement-around-country-buys-cell-phone-location-data-wholesale">How Law Enforcement Around the Country Buys Cell Phone Location Data Wholesale</a></li>
<li><em><a href="https://www.eff.org/deeplinks/2022/08/how-ad-tech-became-cop-spy-tech">How Ad Tech Became Cop Spy Tech</a></em></li>
</ul>


</div></div></div>  </div>

          </article>
    </div></div>
  </body>
</html>
