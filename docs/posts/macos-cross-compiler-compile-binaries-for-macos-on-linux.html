<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/shepherdjerred/macos-cross-compiler">Original</a>
    <h1>Show HN: macOS-cross-compiler – Compile binaries for macOS on Linux</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://quintenkonyn.recurse.com/shepherdjerred/macos-cross-compiler/blob/main/assets/256.png"><img src="https://quintenkonyn.recurse.com/shepherdjerred/macos-cross-compiler/raw/main/assets/256.png" alt="A picture of Tux holding a red apple"/></a></p>
<p dir="auto">This project allows you to cross-compile code on Linux that will be executed on macOS.</p>
<p dir="auto">It supports:</p>
<ul dir="auto">
<li>✅ C</li>
<li>✅ C++</li>
<li>✅ Fortran</li>
<li>✅ Rust</li>
</ul>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">This project is focused on supporting newer versions of macOS and C, C++, Fortran, and Rust. Versions older than macOS 13 (Ventura) are not well tested, though they <em>should</em> work fine.</p>
</div>
<p dir="auto">The cross-compilers are available as a Docker image. This is easiest way to distribute the project since there are so many host dependencies. If you are interested in using this without Docker, you should take a look at <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> which forms the base of this project.</p>
<p dir="auto">The Docker image is hosted available at <a href="https://github.com/shepherdjerred/macos-cross-compiler/pkgs/container/macos-cross-compiler">ghcr.io/shepherdjerred/macos-cross-compiler:latest</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Run the container
# Note: You&#39;ll probably want to bind-mount some files to compile.
# The `samples` directory has some Hello World programs.
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash"><pre><span><span>#</span> Run the container</span>
<span><span>#</span> Note: You&#39;ll probably want to bind-mount some files to compile.</span>
<span><span>#</span> The `samples` directory has some Hello World programs.</span>
$ docker run ghcr.io/shepherdjerred/macos-cross-compiler:latest /bin/bash</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-quick-start" aria-hidden="true" tabindex="-1" href="#quick-start"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Quick Start</h2>
<p dir="auto">Install the requirements below, then follow the instructions in the usage section.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-host-requirements" aria-hidden="true" tabindex="-1" href="#host-requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Host Requirements</h3>
<ul dir="auto">
<li>Docker</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-usage" aria-hidden="true" tabindex="-1" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h3>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p dir="auto">The Docker image is quite large. It includes several compilers and the macOS SDK.</p>
</div>
<div dir="auto" data-snippet-clipboard-copy-content="# Start a Docker container using the Docker image.
# Replace `$PWD/samples` with the path to the source you want to compile.
$ docker run \
  -v $PWD/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

# Now that you&#39;re inside of the Docker container, you can run the compilers.

# Compile using gcc
## targeting darwin arm64
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
## targeting darwin x86_64
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

# Compile using clang
## for darwin arm64
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

# Compile using gfortran
## for darwin arm64
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
## for darwin x86_64
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

# Compile using Zig
## C targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

## C++ targeting darwin arm64(change aarch64 -&gt; x86_64 to target amd64)
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

## Rust targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)
$ export CC=zig-cc-aarch64-macos
$ cd rust &amp;&amp; cargo build --target aarch64-apple-darwin"><pre><span><span>#</span> Start a Docker container using the Docker image.</span>
<span><span>#</span> Replace `$PWD/samples` with the path to the source you want to compile.</span>
$ docker run \
  -v <span>$PWD</span>/samples:/workspace \
  --rm \
  -it \
  ghcr.io/shepherdjerred/macos-cross-compiler:latest \
  /bin/bash

<span><span>#</span> Now that you&#39;re inside of the Docker container, you can run the compilers.</span>

<span><span>#</span> Compile using gcc</span>
<span><span>#</span># targeting darwin arm64</span>
$ aarch64-apple-darwin22-gcc hello.c -o hello
$ aarch64-apple-darwin22-g++ hello.cpp -o hello
<span><span>#</span># targeting darwin x86_64</span>
$ x86_64-apple-darwin22-gcc hello.c -o hello
$ x86_64-apple-darwin22-g++ hello.cpp -o hello

<span><span>#</span> Compile using clang</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.c -o hello
$ aarch64-apple-darwin22-clang --target=aarch64-apple-darwin22 hello.cpp -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.c -o hello
$ x86_64-apple-darwin22-clang --target==x86_64-apple-darwin22 hello.cpp -o hello

<span><span>#</span> Compile using gfortran</span>
<span><span>#</span># for darwin arm64</span>
$ aarch64-apple-darwin22-gfortran hello.f90 -o hello
<span><span>#</span># for darwin x86_64</span>
$ x86_64-apple-darwin22-gfortran hello.f90 -o hello

<span><span>#</span> Compile using Zig</span>
<span><span>#</span># C targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig cc \
    -target aarch64-macos \
    --sysroot=/sdk \
    -I/sdk/usr/include \
    -L/sdk/usr/lib \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.c

<span><span>#</span># C++ targeting darwin arm64(change aarch64 -&gt; x86_64 to target amd64)</span>
$ zig c++ \
    -target aarch64-macos \
    --sysroot=/sdk -I/sdk/usr/include \
    -I/sdk/usr/include/c++/v1/ \
    -L/sdk/usr/lib \
    -lc++ \
    -F/sdk/System/Library/Frameworks \
    -framework CoreFoundation \
    -o hello hello.cpp

<span><span>#</span># Rust targeting darwin arm64 (change aarch64 -&gt; x86_64 to target amd64)</span>
$ <span>export</span> CC=zig-cc-aarch64-macos
$ <span>cd</span> rust <span>&amp;&amp;</span> cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-rust" aria-hidden="true" tabindex="-1" href="#rust"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Rust</h3>
<p dir="auto">Support for Rust requires a bit of project configuration.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# .cargo/config.toml
[build]
[target.aarch64-apple-darwin]
linker = &#34;zig-cc-aarch64-macos&#34;

[target.x86_64-apple-darwin]
linker = &#34;zig-cc-x86_64-macos&#34;"><pre><span><span>#</span> .cargo/config.toml</span>
[<span>build]</span>
[<span>target</span>.<span>aarch64-apple-darwin</span>]
<span>linker</span> = <span><span>&#34;</span>zig-cc-aarch64-macos<span>&#34;</span></span>

[<span>target</span>.<span>x86_64-apple-darwin</span>]
<span>linker</span> = <span><span>&#34;</span>zig-cc-x86_64-macos<span>&#34;</span></span></pre></div>
<p dir="auto">Once configured, you can run <code>cargo</code> after setting the <code>CC</code> variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export CC=&#34;zig-cc-x86_64-macos&#34;
cargo build --target x86_64-apple-darwin

export CC=&#34;zig-cc-aarch64-macos&#34;
cargo build --target aarch64-apple-darwin"><pre><span>export</span> CC=<span><span>&#34;</span>zig-cc-x86_64-macos<span>&#34;</span></span>
cargo build --target x86_64-apple-darwin

<span>export</span> CC=<span><span>&#34;</span>zig-cc-aarch64-macos<span>&#34;</span></span>
cargo build --target aarch64-apple-darwin</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-c-c-and-fortran-compiler-executables" aria-hidden="true" tabindex="-1" href="#c-c-and-fortran-compiler-executables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>C, C++ and Fortran Compiler Executables</h3>
<p dir="auto">The table below shows the name of the executable for each architecture/compiler pair.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">By default the target kernel version is <code>darwin22</code>. You&#39;ll need to change <code>darwin22</code> if you choose to compile for another kernel version.</p>
</div>
<table>
<thead>
<tr>
<th></th>
<th>x86_64</th>
<th>aarch64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>clang</strong></td>
<td>x86_64-apple-darwin22-clang</td>
<td>aarch64-apple-darwin22-clang</td>
</tr>
<tr>
<td><strong>clang++</strong></td>
<td>x86_64-apple-darwin22-clang++</td>
<td>aarch64-apple-darwin22-clang++</td>
</tr>
<tr>
<td><strong>gcc</strong></td>
<td>x86_64-apple-darwin22-gcc</td>
<td>aarch64-apple-darwin22-gcc</td>
</tr>
<tr>
<td><strong>g++</strong></td>
<td>x86_64-apple-darwin22-g++</td>
<td>aarch64-apple-darwin22-g++</td>
</tr>
<tr>
<td><strong>gfortran</strong></td>
<td>x86_64-apple-darwin22-gfortran</td>
<td>aarch64-apple-darwin22-gfortran</td>
</tr>
</tbody>
</table>
<p dir="auto">The relevant compilers are located at <code>/osxcross/bin</code> and <code>/gcc/bin</code>. Both these directories are already on the <code>PATH</code> in the Docker container.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-cctools" aria-hidden="true" tabindex="-1" href="#cctools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>cctools</h3>
<p dir="auto">This project compiles <a href="https://github.com/tpoechtrager/cctools-port">cctools</a>, which is Apple&#39;s version of <a href="https://www.gnu.org/software/binutils/" rel="nofollow">binutils</a>. These programs are low-level utilities that are used by compilers, such as the archiver <code>ar</code>, the loader <code>ld</code>, and the assembler <code>as</code>.</p>
<p dir="auto">You probably don&#39;t need to run these programs directly, but if you do they are located at <code>/cctools/bin</code>, and they are also on the <code>PATH</code>.</p>
<p dir="auto">Complete tool list:</p>
<ul dir="auto">
<li>ObjectDump</li>
<li>ar</li>
<li>as</li>
<li>bitcode_strip</li>
<li>check_dylib</li>
<li>checksyms</li>
<li>cmpdylib</li>
<li>codesign_allocate</li>
<li>ctf_insert</li>
<li>dyldinfo</li>
<li>install_name_tool</li>
<li>ld</li>
<li>libtool</li>
<li>lipo</li>
<li>machocheck</li>
<li>makerelocs</li>
<li>mtoc</li>
<li>mtor</li>
<li>nm</li>
<li>nmedit</li>
<li>otool</li>
<li>pagestuff</li>
<li>ranlib</li>
<li>redo_prebinding</li>
<li>seg_addr_table</li>
<li>seg_hack</li>
<li>segedit</li>
<li>size</li>
<li>strings</li>
<li>strip</li>
<li>unwinddump</li>
<li>vtool</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-code-signing-notarizing-and-universal-binaries" aria-hidden="true" tabindex="-1" href="#code-signing-notarizing-and-universal-binaries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Code Signing, Notarizing, and Universal Binaries</h2>
<p dir="auto"><a href="https://developer.apple.com/documentation/security/code_signing_services" rel="nofollow">Code signing</a> (but <em>not</em> <a href="https://developer.apple.com/documentation/security/notarizing_macos_software_before_distribution/" rel="nofollow">notarizing</a>) should be possible with this project, but it is untested. Building <a href="https://developer.apple.com/documentation/apple-silicon/building-a-universal-macos-binary" rel="nofollow">universal binaries</a> should also be possible, but again, this is not tested.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-target-compatibility" aria-hidden="true" tabindex="-1" href="#target-compatibility"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Target Compatibility</h2>
<p dir="auto">This project can build for macOS on both x86_64 and aarch64 archtictures, regardless of the host architecture.</p>
<table>
<thead>
<tr>
<th></th>
<th>Linux x86_64</th>
<th>Linux arm64</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>macOS x86_64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>macOS aarch64</strong></td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">aarch64 is Apple&#39;s internal name for arm64. They&#39;re used interchangably, but aarch64 is more correct when referring to macOS on arm64.</p>
</div>
<p dir="auto">This project supports the following languages:</p>
<ul dir="auto">
<li>C (up to C 17)</li>
<li>C++ (up to C++ 20)</li>
<li>Fortran (up to Fortran 2018)</li>
<li>Rust (any version)</li>
</ul>
<p dir="auto">This project supports the following versions of macOS:</p>
<ul dir="auto">
<li>✅ macOS 11 Big Sur</li>
<li>✅ macOS 12 Monterey</li>
<li>✅ macOS 13 Ventura</li>
</ul>
<p dir="auto">Support for macOS 14 Sonoma has not been extensively tested. macOS 14-specific features can be added by updating the SDK version. The Docker image uses the 13.0 SDK by default.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p dir="auto">This project is tested on modern verisons of macOS, Clang, and GCC. It has not been tested with older versions of these softwares. If you need compatabiltiy with older versions, check out the <a href="https://github.com/tpoechtrager/osxcross">osxcross project</a>.</p>
</div>
<h2 tabindex="-1" dir="auto"><a id="user-content-technical-details" aria-hidden="true" tabindex="-1" href="#technical-details"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Technical Details</h2>
<p dir="auto">This repository is essentially a wrapper around the following projects:</p>
<ul dir="auto">
<li><a href="https://github.com/tpoechtrager/apple-libtapi">https://github.com/tpoechtrager/apple-libtapi</a></li>
<li><a href="https://github.com/tpoechtrager/cctools-port">https://github.com/tpoechtrager/cctools-port</a></li>
<li><a href="https://github.com/tpoechtrager/xar">https://github.com/tpoechtrager/xar</a></li>
<li><a href="https://github.com/iains/gcc-darwin-arm64">https://github.com/iains/gcc-darwin-arm64</a></li>
</ul>
<p dir="auto">These resources were helpful when working on this project:</p>
<ul dir="auto">
<li><a href="https://www.lurklurk.org/linkers/linkers.html" rel="nofollow">https://www.lurklurk.org/linkers/linkers.html</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html" rel="nofollow">http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a></li>
<li><a href="https://gist.github.com/loderunner/b6846dd82967ac048439">https://gist.github.com/loderunner/b6846dd82967ac048439</a></li>
<li><a href="http://clarkkromenaker.com/post/library-dynamic-loading-mac/" rel="nofollow">http://clarkkromenaker.com/post/library-dynamic-loading-mac/</a></li>
<li><a href="https://github.com/qyang-nj/llios">https://github.com/qyang-nj/llios</a></li>
</ul>
<p dir="auto">The Zig and Rust portion were informed by these resources:</p>
<ul dir="auto">
<li><a href="https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html" rel="nofollow">https://andrewkelley.me/post/zig-cc-powerful-drop-in-replacement-gcc-clang.html</a></li>
<li><a href="https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/" rel="nofollow">https://actually.fyi/posts/zig-makes-rust-cross-compilation-just-work/</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-development" aria-hidden="true" tabindex="-1" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Development</h2>
<p dir="auto">The Docker images for this repository are built with <a href="https://earthly.dev" rel="nofollow">Earthly</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`
# The first run will take ~20 minutes on an M1 MacBook.
# Subsequent runs are faster.
earthly +image

# Verify that the compilers work correctly
earthly +test

# If you&#39;re on macOS, try actually running the binaries
earthly +validate"><pre><span><span>#</span> Create a Docker image tagged as `shepherdjerred/macos-cross-compiler`</span>
<span><span>#</span> The first run will take ~20 minutes on an M1 MacBook.</span>
<span><span>#</span> Subsequent runs are faster.</span>
earthly +image

<span><span>#</span> Verify that the compilers work correctly</span>
earthly +test

<span><span>#</span> If you&#39;re on macOS, try actually running the binaries</span>
earthly +validate</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-inspiration" aria-hidden="true" tabindex="-1" href="#inspiration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Inspiration</h2>
<p dir="auto">This project would not have been possible without the <a href="https://github.com/tpoechtrager/osxcross">osxcross</a> project.</p>
</article></div></div>
  </body>
</html>
