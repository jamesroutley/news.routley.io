<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://thechipletter.substack.com/p/risc-v-part-1-origins-and-architecture">Original</a>
    <h1>RISC-V Origins and Architecture, Part 1</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_2400,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg" width="1200" height="800.625" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/ec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:false,&#34;imageSize&#34;:&#34;large&#34;,&#34;height&#34;:854,&#34;width&#34;:1280,&#34;resizeWidth&#34;:1200,&#34;bytes&#34;:136422,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:true,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fec1486f1-aefd-4fb0-9c71-09d4f6506ab6_1280x854.jpeg 1456w" sizes="100vw" fetchpriority="high"/></picture></div></a><figcaption>Yunsup Lee holding RISC V prototype chip. At UC Berkeley Par Lab Winter Retreat, January 2013.</figcaption></figure></div><div><p><em><strong>What happens when you combine two of the most influential technology movements of the last few decades, RISC and Open Standards? </strong></em></p><p><em><strong>You get RISC-V.</strong></em></p></div><p><span>RISC-V (pronounced risk-five) is a relatively new Instruction Set Architecture. It’s supporters make ambitious claims for the architecture. From the </span><a href="https://riscv.org/about/" rel="">RISC-V International Website</a><span>:</span></p><blockquote><p>RISC-V is an open standard Instruction Set Architecture (ISA) enabling a new era of processor innovation through open collaboration</p><p>RISC-V enables the community to share technical investment, contribute to the strategic future, create more rapidly, enjoy unprecedented design freedom, and substantially reduce the cost of innovation.</p></blockquote><p>By any standards, RISC-V is starting to make an impact. RISC-V International also says that as a the end of 2022, over 10 billion RISC-V cores had been shipped. RISC-V International corporate members include Intel, Google, Qualcomm, AMD, Nvidia and hundreds more.</p><p>So why is RISC-V attracting so much attention?</p><p>In this post, we’ll look at the early development of RISC-V and the architecture itself.  In ‘RISC-V - Part 2’, we’ll look at the architecture’s later development and ambitions of its backers.</p><p>It’s only possible to give a brief of overview of RISC-V in a couple of posts. There will be some areas where the description given here is somewhat simplified. So this week’s supplementary post, for paid subscribers, has links that provide lots more in-depth information on the architecture.</p><p><em><strong>If you value The Chip Letter</strong></em><strong>,</strong><em><strong> then please consider becoming a paid subscriber. You’ll get additional weekly content, learn more, and help keep this newsletter going!</strong></em></p><p>Let’s start with a very high-level overview of the precursors to RISC-V.</p><p><span>We’ve already seen how the concept of Reduced Instruction Set Computers originated at IBM with the work of </span><a href="https://thechipletter.substack.com/p/the-first-risc-john-cocke-and-the" rel="">John Cocke on the IBM 801</a><span>. Although the 801 never became an IBM product, word of the ideas behind the machine soon spread, including to a group at the University of California Berkeley led by David Patterson, who invented the term ‘Reduced Instruction Set Computer’ or ‘RISC’</span></p><p>The 1980 paper, “The Case for a Reduced Instruction Set Computer”, by Patterson and David Ditzel, argued the case for RISC machines, setting out their key advantages, including better performance than their more complex competitors.</p><p>Alongside the RISC paper, the Berkeley team also developed their own RISC microprocessor, which became known as the Berkeley RISC-I. The RISC-I design had just 31 instructions but a large set of registers, with 78 32-bit registers arranged into six ‘register windows’.</p><p>As work on RISC-I progressed, a second RISC design, ‘RISC-II’ also known as ‘Blue’, was developed at Berkeley.</p><p>Meanwhile, spurred on in large part by the work at Berkeley, many other RISC designs started to emerge. At Stanford, a separate research project under John Hennessy led to the development of the MIPS architecture. Many large computer companies started to develop their own RISC architectures including PA-RISC from HP, SPARC from Sun (influenced by the RISC-II designs), PC/RT from IBM and, across the Atlantic in Cambridge in the UK, ARM from Acorn Computers.</p><p>At UC Berkeley, two further RISC projects, SOAR and SPUR, followed RISC-II in the late 1980s.</p><p>Meanwhile, even more new  RISC architectures emerged during the late 1980s and early 1990s as firms looked to take advantage of RISC techniques. </p><p>One by one, though, each of these architectures later fell by the wayside. Today, only Arm remains as a viable business. </p><blockquote><p><span>For lots more on the early days of RISC see  </span><a href="https://thechipletter.substack.com/p/risc-on-a-chip-david-patterson-and" rel="">RISC on a Chip: David Patterson and Berkeley RISC-I</a><span> and The RISC Wars </span><a href="https://thechipletter.substack.com/p/the-risc-wars-part-1-the-cambrian-c55" rel="">Part 1</a><span> and </span><a href="https://thechipletter.substack.com/p/the-risc-wars-part-2-the-age-of-alliances" rel="">Part 2</a><span>.</span></p></blockquote><p>The story of RISC-V takes us back to the UC, Berkeley in February 2005.</p><p>A group of researchers, including David Patterson and Krste Asanović, started meeting to discuss issues around parallelism in computing system. This in turn led to the formation of a ‘Parallel Computing Laboratory’ also known as ‘Par Lab’ at Berkeley.</p><p>This in turn led to the formation of a research program to investigate the issues around building systems with large numbers (from 64 to over a thousand) of processor cores. The program became known as ‘Research Accelerator for Multiple Processors’ or RAMP.</p><p>Over the course of the next few years, they built a series of color-coded systems: RAMP Red, RAMP Blue, RAMP White and RAMP Gold. These systems used a range of different processor core including PowerPC 405, Xilinx MicroBlaze cores running on Field Programmable Gate Arrays, or Sun’s SPARC.</p><p>At around the same time Intel and Microsoft, who seeing the increasing importance of multicore and parallel computing had run a competition for university projects to do research in the area. The competition and $10m of funding was jointly won by Berkeley’s Par Lab. A photo from 2008 shows Pat Gelsinger, then and now again of Intel, cutting a large red ribbon to open the new, partly Intel funded, offices of Par Lab.</p><p>By 2008, members of the RAMP team were getting frustrated with the cores they were using, commenting that “Most pre-existing IP cores are inappropriate without significant work.”</p><p>As RAMP was coming to an end in 2010, Asanović, together with his graduate students Yunsup Lee and Andrew Waterman who had been working together on RAMP Gold, needed a processor core for use in what was intended to be a ‘three month’ research project. </p><p>Their first thoughts were to use the Arm ISA for the new processor. Born in the UK, Asanović had owned a 6502-based Atom home computer from Arm developer Acorn. He’d then studied in Cambridge at the time that the Arm processor was being developed. He’d left the UK in 1989 to study under David Patterson at Berkeley, going on to gain a PhD at Berkeley in 1998, with a thesis on the subject of in vector microprocessors.</p><p>Asanović, Waterman and Lee soon realised, though, that using Arm would mean buying a licence. Even worse, they would probably not be able to modify the core as they wanted and would then struggle to distribute their designs to researchers at other universities to study and build on.</p><p>They looked at existing ISAs with fewer restrictions, such as SPARC, OpenRISC and DLX, another ISA designed by David Patterson together with John Hennessy at Stanford in the 1990s. In each case though the ISA didn’t meet their needs.</p><p>With no obvious alternatives available, in May 2010 they started work on the development their own ISA.</p><p>By August 2010 the new processor had a name ‘RISC-V’: with V chosen as ‘V for Five, V for Vector, V for Variants’ and was already taking shape. </p><p>The designation as the ‘fifth RISC’ was seen as appropriate as Patterson’s later 1980s RISC projects at Berkeley, SOAR and SPUR, had been retrospectively designated as RISC-III and RISC-IV respectively.</p><p>The Berkeley team asked the question ‘Are we crazy not to use a standard ISA?’ before noting that existing standard ISAs (x86, ARM and GPUs) would probably be too complex for a university project anyway.</p><p>Asanović would later, credit Lee and Waterman for pushing the idea, reflecting that:</p><blockquote><p>One of the greatest powers in the universe is grad-student naivety. When you don’t realise something is impossible, you try it anyway.</p></blockquote><p>They were soon joined by David Patterson, who had developed RISC-I at Berkeley almost thirty years before.</p><p>The team iterated on the new ISA. In order to make implementation as simple as possible, they gradually reduced the number of instructions down to the absolute minimum needed.</p><p>By May 2011, they were ready to publish the first version of the ‘RISC-V Instruction Set Manual’. This short document (at just 32 pages) outlined several goals for the RISC-V ISA, including to:</p><ul><li><p>Provide a realistic but open ISA that captures important details of commercial general-purpose ISA designs and that is suitable for direct hardware implementation.</p></li><li><p>Provide a small but complete base ISA that avoids “over-architecting” for a particular microarchitecture style.</p></li><li><p>Be simple to subset for educational purposes and to reduce the complexity of bringing up new implementations.</p></li></ul><p>The new ISA was designed to support 32 and 64-bit variants (designated RV32 and RV64), multi-core implementations and floating point operations. Crucially, it was also designed to allow processor designers to add their own extensions to the architecture.</p><p>And the ISA was was very simple indeed. The minimum implementation of RV32 described in the first manual had just 47 instructions.</p><p>The first RISC-V Instruction Set Manual acknowledges the influence of previous research architectures, including Torrent-0, The Scale (Software-Controlled Architecture for Low Energy) project at MIT and Maven (Malleable Array of Vector-thread ENgines). </p><p>However, RISC-V represented a clean break from these predecessors, which had typically been based on Stanford’s MIPS RISC project.</p><p>The Berkeley team would later describe how a new ‘clean slate’ RISC ISA can learn from the mistakes of previous designs:</p><blockquote><p>… a new RISC ISA can be better than its predecessors by learning from their mistakes:</p><p>- Leaving out too much: No load/store byte or load/store half word in the initial Alpha ISA, and no floating-point load/store double in MIPS I.</p><p>- Including too much: The shift option for ARM instructions and register windows in SPARC.</p><p>- Allowing current micro-architectural designs to affect the ISA: Delayed branch in MIPS and SPARC, and floating-point trap barriers in Alpha.</p></blockquote><p>If RISC-V set out to learn from mistakes in previous ISA’s, it also re-used a lot from those ISA’s. David Patterson and Tony Chen published a paper entitled ‘RISC-V Geneology’ (sic) in 2016, which, on an instruction by instruction basis, sets out the historical antecedents of RISC-V:</p><blockquote><p>This report discusses the historical precedents of RV32G. We look at 18 prior instruction set architectures, chosen primarily from earlier UC Berkeley RISC architectures and major proprietary RISC instruction sets.”</p></blockquote><p>The ISA’s ranged from the mainframe CDC6600 of 1964, followed by RISC-I in 1981 and then leading to ARMv6 in 2002 and Cray X1 in 2003.</p><p>There are 122 instructions in RISCV-G (a version of RISC-V that includes single and double precision floating point instructions) . Patterson and Chen found that 98 of the instructions appear in at least three historical ISAs. Only 6 were not found in the 18 ISA’s examined.</p><p>The paper includes a detailed comparison of the instruction sets of RISC-V and 18 earlier architectures:</p><div><figure><a target="_blank" href="https://riscv.org/technical/specifications/risc-v-genealogy/" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg" width="608" height="738.4798807749628" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1630,&#34;width&#34;:1342,&#34;resizeWidth&#34;:608,&#34;bytes&#34;:277624,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:&#34;https://riscv.org/technical/specifications/risc-v-genealogy/&#34;,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F7f2e7e44-5059-4da0-8b4c-ad517dd7d6a4_1342x1630.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>RISC-V Genealogy - Click on image for link to full report</figcaption></figure></div><p>David Patterson later did did a more specific comparison with an earlier Berkeley design of his own, highlighting how much RISC-I and RISC-V have in common, in his 2017 blog post “How close is RISC-V to RISC-I?”</p><blockquote><p>By far the biggest surprise was how close is the original instruction set of the RISC-I to the base instruction set of RISC-V (RV32I). The figure below compares the two instruction sets.  In fact, RISC-I is may be the closest instruction set to RISC-V of any era; it is certainly much closer than the original Stanford MIPS and IBM 801 instruction sets.</p></blockquote><p>So RISC-V really was a return to the roots of RISC.</p><p>An instruction set is of limited use without working silicon. Over the next three years, Asanović and his colleagues developed a series of processor cores using the new architecture. To support this work, they created a number of tools to enable the development of hardware using the RISC-V architecture.</p><h5>Chisel</h5><p>The most important is probably ‘Chisel’, a tool, based on the Scala programming language, that takes the place of traditional ‘hardware description languages’ like Verilog and VHDL. These languages enable designers to specify the structure of the digital logic in an integrated circuit in a text file.</p><p>Verilog and VHDL are relatively ‘low level’ in how they describe the hardware. Scala on the other hand is a ‘high-level’ language that allows for the use of object oriented and functional approaches to programming.</p><p>Chisel enables designers to use a higher level of abstraction, which should make re-use of components easier and so support rapid iteration of designs.</p><p>Here is a brief extract from the definition of the RISC-V ‘SonicBoom’ (one of the RISC-V cores developed by the Berkeley team) core’s decode module, specified using Chisel. This is part of the logic that decodes ‘branch’ instructions. </p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png" width="604" height="710.0743801652893" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1138,&#34;width&#34;:968,&#34;resizeWidth&#34;:604,&#34;bytes&#34;:172123,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F4a039d90-ab87-41ef-8bbe-657d5e9b40b4_968x1138.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>Chisel in Action. An extract from the decode logic for the RISC-V SonicBoom CPU - https://github.com/riscv-boom/riscv-boom/tree/master</figcaption></figure></div><h5>Rocket Chip Generator</h5><p>Alongside Chisel they created RocketChip generator, a tool to enable researchers to quickly build their own System-on-Chip (SoC) designs.</p><blockquote><p>Rocket Chip is an open-source System-on-Chip design generator that emits synthesizable RTL. It leverages the Chisel hardware construction language to compose a library of sophisticated generators for cores, caches, and interconnects into an integrated SoC. Rocket Chip generates general-purpose processor cores that use the open RISC-V ISA, and provides both an in-order core generator (Rocket) and an out-of-order core generator (BOOM). For SoC designers interested in utilizing heterogeneous specialization for added efficiency gains, Rocket Chip supports the integration of custom accelerators in the form of instruction set extensions, coprocessors, or fully independent novel cores. Rocket Chip has been taped out (manufactured) eleven times, and yielded functional silicon prototypes capable of booting Linux.</p></blockquote><p>Using these new tools, the Berkeley team started to build real hardware using the RISC-V ISA.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg" width="807" height="1080" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/a7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1080,&#34;width&#34;:807,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:303270,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fa7aeaf71-29cc-4514-a966-107006a86e2f_807x1080.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>First Raven1 bring up ST28nm - By Drb333 - Own work, CC BY-SA 4.0, https://commons.wikimedia.org/w/index.php?curid=97283063</figcaption></figure></div><p>The first core was called Raven-1, developed in May 2011, which was built using a STMicroelectronics 28nm process. Raven-1 was followed by Raven-2 in August 2012 and Raven-3 in September 2013.</p><p>By 2014 the Berkeley team were able to demonstrate significant progress with their new ISA. The paper “A 45nm 1.3GHz 16.7 Double-Precision GFLOPS/W RISC-V Processor with Vector Accelerators” claimed:</p><blockquote><p>A 64-bit dual-core RISC-V processor with vector accelerators has been fabricated in a 45nm SOI process. This is the first dual-core processor to implement the open-source RISC-V ISA designed at the University of California, Berkeley.</p></blockquote><blockquote><p>To demonstrate the extensibility of the RISC-V ISA, we integrate a custom vector accelerator alongside each single-issue in-order scalar core.</p></blockquote><p>The paper then goes on to compare this RISC-V core, favourably, against a commercial Arm core, the Cortex-A5:</p><blockquote><p>In a standard 40 nm process, the RISC-V scalar core scores 10% higher in DMIPS/MHz than the Cortex-A5, ARM’s comparable single-issue in-order scalar core, and is 49% more area-efficient.</p></blockquote><blockquote><p>To compare against published numbers for a 32-bit ARM Cortex-A5, we implemented a similarly configured 64-bit Rocket core and evaluated it with the same Dhrystone benchmark and the same TSMC40GPLUS process corner that ARM used to evaluate the Cortex-A5. To demonstrate the extensibility of the RISC-V ISA, we integrate a custom vector accelerator alongside each single-issue in-order scalar core.</p></blockquote><p>Notably, the Berkeley team were already able to use standard open source software tools with the new ISA:</p><blockquote><p>The open-source RISC-V software toolchain includes a GCC cross-compiler, an LLVM cross-compiler, a software ISA simulator, an ISA verification suite, a Linux port, and additional documentation, and is available at www.riscv.org.</p></blockquote><p>From the very earliest of the architecture, its developers were adding specialised extensions to the instruction set. The SoC in this paper also included ‘Hwacha’ floating-point vector accelerators developed at Berkeley alongside the RISC-V cores:</p><blockquote><p>Hwacha is a single-lane decoupled vector pipeline optimized for an ASIC process. Hwacha more closely resembles traditional Cray vector pipelines than the SIMD units in SSE, AVX, or NEON.</p></blockquote><p>By 2015, the team was working on the development of more complex cores with the development of the BOOM ‘Berkeley Out of Order Machine’ core:</p><blockquote><p>BOOM is an out-of-order, superscalar RV64G core generator. The goal of BOOM is to serve as a baseline implementation for education, research, and industry and to enable in-depth exploration of out-of-order micro-architecture.</p></blockquote><blockquote><p>BOOM is written in 10k lines of Chisel code. BOOM is able to accomplish this low line count in part by instantiating many parts from the greater Rocket Chip repository; the front-end, functional units, page table walkers, caches, and floating point units are all instantiated from the Rocket and hardfloat repositories.</p></blockquote><p>By 2016 the Berkeley team had used their tools and the RISC-V ISA to design and build 11 chips on either 28nm or 45nm processes from STMicroelectronics, IBM or TSMC. </p><p>There was more to RISC-V than some tools and few cores though. There was a philosophy.</p><p>In 2014, the team returned to the original motivation behind the development of RISC-V. The paper ‘Instruction Sets Should Be Free: The Case For RISC-V’ by Asanović and Patterson sets out the case for an open and free ISA.  The paper states that: “While instruction set architectures (ISAs) may be proprietary for historical or business reasons, there is no good technical reason for the lack of free, open ISAs”.</p><blockquote><p>It’s not an error of omission. Companies with successful ISAs like ARM, IBM, and Intel have patents on quirks of their ISAs, which prevent others from using them without licenses. 1 Negotiations take 6-24 months and they can cost $1M-$10M, which rules out academia and others with small volumes. 2 An ARM license doesn’t even let you design an ARM core; you just get to use their designs. (Only ≈15 big companies have licenses that allow new ARM cores.) </p></blockquote><p>Asanović would later turn this into a series of questions, considering a long list of historic, and mostly defunct, ISAs.</p><ul><li><p>Do we need all these different ISAs? </p></li><li><p>Must they be proprietary?</p></li><li><p>Must they keep disappearing?</p></li><li><p><em>What if there was one stable free and open ISA everyone could use for everything?</em></p></li></ul><p>So RISC-V would be a free and open ISA. According to RISC-V International:</p><blockquote><p>The RISC-V ISA is free and open with a permissive license for use by anyone in all types of implementations. Designers are free to develop proprietary or open source implementations for commercial or other exploitations as they see fit.</p></blockquote><p><strong>RISC-V is sometimes compared with ‘Open Source’ projects such as Linux. However, it’s closer to open standards such as Ethernet. The RISC-V ISA defines on open standard for the interface between processor hardware and software just as the Ethernet standard defines a set of open networking standards.</strong></p><p><strong>However, the open standard does not mean that any particular RISC-V core implementation will be either free or open. Users of the RISC-V standards are free to be able to make their designs open or closed depending on their preference and purposes.</strong></p><p>There are, however, a number of ‘open source’ RISC-V cores available, including the original Rocket and BOOM designs from Berkeley and cores from Western Digital and others.</p><p>To have an impact, RISC-V needed to ‘escape’ from Berkeley, so the RISC-V team started to ‘spread the word’ about RISC-V.</p><p>In September 2014, they descended on the ‘Hot Chips 26’ conference in Cupertino. A dozen members of the RISC-V team with blue t-shirts, decorated with a blue and yellow RISC-V logo, manned a sponsor booth and started to proclaim the benefits of RISC-V.</p><p>Badges were distributed with the slogan ‘Instruction sets want to be free!’ and a sign compared the Berkeley ‘RISC-V Rocket’ design with the Arm Cortex A-5.</p><p>The Berkeley team found a receptive audience for their message. They have recalled that they found that attendees were frustrated, less with the cost of licensing cores, but with how long it took to get started using commercial cores.</p><p>‘Hot Chips 26’ was only the start of the RISC-V team’s efforts to build an ecosystem around RISC-V. As early as 2014, the team already had huge ambitions for their new architecture. Returning to the 2014 paper ‘Instruction Sets Should Be Free: The Case For RISC-V’ by Asanović and Patterson, the paper ends by stating a goal for the RISC-V architecture:</p><blockquote><p>Although it’s hard to set aside biases, we believe that RISC-V is the best and safest choice for a free, open RISC ISA.</p></blockquote><blockquote><p>… our goal is grander: just as Linux has become the standard OS for most computing devices, we envision RISC-V becoming the standard ISA for all computing devices.</p></blockquote><p>We’ll consider this goal and find out how the backers of RISC-V have set out to achieve it in the next post in this series, ‘RISC-V – Part 2 : Aims and Ambitions’. We’ll look at the formation and the work of ‘RISC-V International’, at the later development of RISC-V and at a number of the efforts to commercialise RISC-V.</p><p>Let’s have a very high level look at the basics of the instruction set.</p><h5>Integer Registers</h5><p><span>A RISC-V CPU typically has 32</span></p><p><span> general purpose registers designated x0 to x31. </span></p><p>The register x0 is hard-coded to be zero. The program counter is distinct from these ‘general purpose’ registers.</p><p>Conditional branch instructions, for example, specify the comparison to be undertaken to determine whether the branch is taken, rather than relying on a previously set ‘flag’ that is set by a previous arithmetic or logic instruction.</p><p>The width of these registers depends on the ‘Base ISA’ used, with 32 and 64 bit versions - defining both the size of integer registers and the size of the address space - currently commonly being used. There is also a 128-bit version, which started as a joke, but has now become part of the standard.</p><h5>Base ISA</h5><p>Although it is convenient to speak of the RISC-V ISA, RISC-V is actually a family of related ISAs which build on what are known as ‘base’ ISAs. There are currently four base ISAs.</p><p>The original integer ‘bases’ (known as I) provide basic arithmetic and logic and load / store instructions. The simplest 32-bit and 64-bit RISC-V implementations are known as RV32I and RV64I, respectively.</p><h5>Base Integer Instruction Set</h5><p>So let’s have a look at the instructions in RV32I. The objectives of RV32I are set out in the ‘RISC-V Instruction Set Manual’</p><blockquote><p>RV32I was designed to be sufficient to form a compiler target and to support modern operating system environments. The ISA was also designed to reduce the hardware required in a minimal implementation.</p></blockquote><p>Consistent with the RISC ‘load-store’ philosophy, all arithmetic and logic instructions use values in registers or immediate values from the instruction itself. </p><p>The instructions in RV32I can be grouped as follows (with the assembler mnenomics for the instructions in each group):</p><ul><li><p><span>8 that load or store bytes, half-words or words to or from memory.</span><strong> [LB, LH, LW, LBU, LHU, SB, SH, SW].</strong></p></li><li><p><span>6 that perform program branches, including conditional branches, depending on the results of a specified comparison. [</span><strong>BEQ, BNE, BLT, BGE, BLTU, BGE].</strong></p></li><li><p><span>6 that shift registers by a specified number of bits. [</span><strong>SLL, SLLI, SRL, SRLI, SRA. SRAI].</strong></p></li><li><p><span>3 arithmetic instructions. [</span><strong>ADD, ADDI, SUB</strong><span>]</span></p></li><li><p><span>6 logical instructions. [</span><strong>XOR, XORI, OR, ORI, AND, ANDI</strong><span>]</span></p></li><li><p><span>4 that load either 0 or 1 into a register, depending on the result of a comparison. [</span><strong>SLT, SLTI, SLTU, SLTUI].</strong></p></li><li><p><span>2 jump and link instructions that store ‘program counter+4’ in a register and then jump to another address. [</span><strong>JAL, JALR</strong><span>].</span></p></li><li><p><span>2 that either load an immediate value into the upper 12 bits of a register or add an immediate value to the upper 12 bits of the program counter. [</span><strong>LUI, AUIPC</strong><span>]</span></p></li><li><p><span>2 that either transfer control either to the operating system or to a debugger. [</span><strong>SCALL, SBREAK</strong><span>]</span></p></li><li><p><span>1 relating to memory ordering. </span><strong>FENCE.</strong></p></li></ul><p>And that’s it! Just 40 instructions. </p><p>(Note that since the first version of the ISA manual was published in 2011, with 47 instructions, seven instructions, relating to memory ordering and status flags have been moved out from the base RV32I ISA.)</p><p><span>It’s worth emphasising that each of these instructions corresponds to a single machine instruction. There aren’t a multitude of addressing modes for each assembler mnemonic. Taking just one example, the </span><code>SUB</code><span> instruction simply subtracts one register from another placing the result in a third.</span></p><p><code>SUB rd, rs1, rs2</code></p><p>This subtracts register rs2 from rs1 and places the result in register rd.</p><p><span>By now you might be wondering about simple instructions that are missing. For example there is no ‘move’ instruction that copies the value in one register to another register. In fact there is a simple answer to this. We can use </span><code>ADDI</code><span> (add immediate) with an immediate value of zero to achieve this.</span></p><p><code>ADDI rd, rs, 0</code></p><p>This copies register rs into register rd.</p><p><span>This operation is so common that it’s convenient to give it it’s own assembly mnemonic </span><code>MV</code><span>, so we can write this as:</span></p><p><code>MV rd, rs</code></p><p><span>In fact RISC-V </span><a href="https://github.com/riscv-non-isa/riscv-asm-manual/blob/master/riscv-asm.md#-a-listing-of-standard-risc-v-pseudoinstructions" rel="">specifies</a><span> a whole series of these ‘pseudoinstructions’.</span></p><h5>Instruction Encoding</h5><p>The ISA is also designed to be straightforward for a processor to decode. The base 32-bit integer ISA has just 6 instruction formats and these place things like the opcode and source and destination register in the same place in the 32-bit long instruction.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png" width="1456" height="554" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:554,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:217593,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F40b1d2db-da00-4619-bf38-0a2d90ebd1fa_1960x746.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>32-bit RISC-V Instruction Decoding - Source https://en.wikipedia.org/wiki/RISC-V</figcaption></figure></div><h5>Extensions</h5><p>Many implementations of RISC-V ISA will add extensions that will materially increase the number of instructions - for example the vector extension adds almost two hundred new instructions - but the ISA is still significantly smaller than alternatives like x86 and Arm.</p><p>Here is a full list of the ‘standard’ extensions as at the start of August 2023:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png" width="570" height="890.4905660377359" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1656,&#34;width&#34;:1060,&#34;resizeWidth&#34;:570,&#34;bytes&#34;:427826,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F230b144e-ba1a-4186-9a9a-77e43f67ba35_1060x1656.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption>RISC-V Base and extensions - source https://en.wikipedia.org/wiki/RISC-V</figcaption></figure></div><p>In this table ‘G’ isn’t an extension but stands for a combination of the I base and a number of extensions. From the RISC-V instruction set specification:</p><blockquote><p>One goal of the RISC-V project is that it be used as a stable software development target. For this purpose, we define a combination of a base ISA (RV32I or RV64I) plus selected standard extensions (IMAFD, Zicsr, Zifencei) as a “general-purpose” ISA, and we use the abbreviation G for the IMAFDZicsr Zifencei combination of instruction-set extensions.</p></blockquote><p>Let’s consider the C extension. In the ‘I base’, all instructions are 32 bits long. One of the challenges for an architecture like RISC-V is obtaining code density that is competitive or better than competing ISA’s such as x86. The C extension allows a subset of the I instructions to be encoded in 16-bits, giving a significant improvement in code density.</p><p>The floating-point extensions are called F and D, and they respectively add single and double precision floating point.</p><p>These extensions add 32 new registers to the architecture. These registers are either 32-bit or 64-bit depending on whether the D extension is included in the architecture. In practice, F and D are usually implemented together.</p><p>We’ve now listed all the ‘standard’ extensions that are specified by RISC-V standards (we’ll explore what this means in Part 2). Crucially, though, there is nothing to stop a CPU designer from adding their own extensions. These can be then be made open or kept proprietary.</p><p>That’s the briefest of introductions to the RISC-V architecture. If that’s whetted your appetite for more then there are lots of resources to help explore the architecture in this week’s paid supplementary post.</p></div></div></div></article></div></div></div>
  </body>
</html>
