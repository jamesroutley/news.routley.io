<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.joshwcomeau.com/css/make-beautiful-gradients/">Original</a>
    <h1>CSS Gradients that avoid the ‚Äúgray dead zone‚Äù</h1>
    
    <div id="readability-page-1" class="page"><article><p>So here&#39;s a CSS linear gradient, going from pure yellow to pure blue:</p><p>Notice that it gets kinda washed out and muddy in the middle there?</p><p>This is what Erik Kennedy has coined the ‚Äúgray dead zone‚Äù. Unless you&#39;re really careful when selecting colors for your gradients, you&#39;ll often wind up with a desaturated midsection in your CSS gradients.</p><p>As it turns out, though, we can <em>absolutely</em> avoid the gray dead zone. In this blog post, we&#39;re going to learn about why this happens, and how we can use color theory to create rich, vivid, thoroughly-alive gradients.</p><div><h3><a name="how-gradients-are-calculated" id="how-gradients-are-calculated" href="#how-gradients-are-calculated"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><p>Link to this heading</p></a>How gradients are calculated</h3></div><p>Have you ever wondered how the CSS <code>linear-gradient</code> algorithm works? How does it actually calculate the specific color value for every pixel along the spectrum?</p><p>It figures it out by taking the mathematical average for each of the 3 color channels: Red, Green, and Blue.</p><p>Click and drag to see the specific RGB breakdown for every pixel along the way:</p><p><strong>How to use:</strong> Click and drag to reposition the indicator, or focus the indicator and use the left/right arrow keys.</p><p>In the RGB color space, we create colors by mixing three channels: red, green, and blue. Each channel has a range from 0 to 255.</p><p>If we max out all three channels ‚Äî 255 / 255 / 255 ‚Äî we get pure white. And if we set each channel to 0, we get black, the absence of any color.</p><p>In fact, if all 3 channels are set to the same value, the result will always be a grayscale color:</p><p>In the demo above, we start at pure yellow (255/255/0). As we move through the gradient, we start mixing in the blue (0/0/255). By the time we reach the very center, we&#39;ve mixed out half of the yellow, and mixed in half of the blue.</p><p>In other words, all three channels converge towards their middle value, 127.5. And the resulting color is gray.</p><p>It&#39;s a bit weird to me that the midpoint between blue and yellow is gray. By mixing two highly-saturated colors together, we wind up with a totally-desaturated color. What if there was a way to mix only the <em>pigment</em>, and keep the <em>saturation</em> consistent throughout?</p><div><h3><a name="alternative-color-modes" id="alternative-color-modes" href="#alternative-color-modes"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><p>Link to this heading</p></a>Alternative color modes</h3></div><p>There are lots of different ways to represent color. So far, we&#39;ve been using the R/G/B mode. And, honestly, this color mode kinda sucks. üòÖ</p><p>Let&#39;s talk about a different color mode: <em>HSL</em>.</p><p>HSL stands for Hue / Saturation / Lightness. If you&#39;ve ever used a color picker, you&#39;ve probably worked with this color mode.<span></span></p><p>Here&#39;s a live example:</p><p>Here&#39;s what each value represents:</p><ul><li><span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><p><strong>Hue</strong> controls what the pigment will be, where the color falls on the color wheel.</p></li><li><span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><p><strong>Saturation</strong> controls how vibrant the color will be.</p></li><li><span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><p><strong>Lightness</strong> controls how light or dark the color is.</p></li></ul><p>Personally, I find that this is a <em>much</em> more intuitive way to think about color.</p><p><strong>Here&#39;s the really magical thing:</strong> what if, instead of averaging out the RGB values in our gradients, we average out the HSL values?</p><p>Well, let&#39;s try it:</p><p>There&#39;s no more gray dead zone, because we&#39;re not mixing R/G/B values anymore, we&#39;re mixing H/S/L values.</p><p>The start color and end color share the same saturation and lightness, and so the only value that changes is the hue. As a result, we&#39;re effectively walking through the color wheel.</p><p>Here&#39;s another example, this time mixing colors with different saturations and lightnesses:</p><p>And here are the same colors, using typical RGB mixing:</p><p>Quite a difference, right?</p><p>Now, HSL isn&#39;t necessarily the best color mode to use in every situation; it tends to produce gradients that can be overly bright and vivid, because it doesn&#39;t take into account human perception.</p><p>According to the HSL color mode, both of these colors share the same ‚Äúlightness‚Äù:</p><p>Not everyone sees color the same way, but most people will say that the yellow feels a lot lighter than the blue, despite them having the same &#34;lightness&#34; value. HSL isn&#39;t concerned with how humans perceive colors, though; it&#39;s modeled after the raw physics, energy and wavelengths and such.</p><p>Fortunately, there are other color modes that <em>do</em> take human perception into account. For example, HCL is similar to HSL, but modeled after human vision:</p><p><strong>Which color mode is best?</strong> Well, it really depends what effect you&#39;re after! I like to experiment with lots of different color modes, to find the best one for a particular gradient.</p><div><h3><a name="applying-this-knowledge" id="applying-this-knowledge" href="#applying-this-knowledge"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><p>Link to this heading</p></a>Applying this knowledge</h3></div><p>I have some good news and some bad news. Let&#39;s start with the bad news.</p><p>CSS doesn&#39;t give us any way to change the color mode used in gradient calculations. We can&#39;t &#34;opt in&#34; to use HSL interpolation for a given gradient, at least not yet. CSS Images Level 4 does provide a way to specify a ‚Äúcolor interpolation method‚Äù, but as far as I know, it isn&#39;t widely supported in browsers.</p><p>Here&#39;s the good news, though: we can work around this limitation if we&#39;re a bit sneaky. üòà</p><p>Gradients in CSS don&#39;t have to stick to only two colors. We can pass 3 colors or 10 colors or 100 colors.</p><p>First, we&#39;ll need to manually calculate a bunch of in-between colors. We&#39;ll do this using JavaScript, so that we can use whatever color mode we want (using a helpful library like <a href="https://gka.github.io/chroma.js/" rel="noopener noreferrer" target="_blank">chroma.js</a>):</p><p>Next, we&#39;ll take that collection of colors, and pass each value to a CSS gradient function:</p><pre></pre><p>(We&#39;re using linear gradients here, but the same trick works for radial and conic gradients!)</p><p><strong>But wait, won&#39;t the CSS engine still use RGB interpolation to calculate the spaces <em>between</em> each provided color?</strong> Unless we pass <em>hundreds</em> of colors, enough for every single pixel, we&#39;re still relying on RGB interpolation!</p><p>This is true, but fortunately it&#39;s not a big deal.</p><p>When two colors are very similar to each other, it doesn&#39;t really matter which color mode we use. You&#39;ll wind up with approximately the same gradient. We aren&#39;t going to get a wildly-different &#34;average&#34; value, no matter how you define &#34;average&#34;.</p><p>For example, here&#39;s a gradient that uses two very-similar colors:</p><p>The colors are so similar that there&#39;s really no way for RGB interpolation to mess it up.</p><p>So then: our sneaky trick is to generate a bunch of midpoint colors using a custom color mode, and pass them all to our CSS gradient function. The CSS engine will use RGB interpolation, but it won&#39;t affect the final result (at least, not by enough for it to be perceptible to humans).</p><p>Alright, now the fun part. Let&#39;s talk about how to generate these gradients. üòÑ</p><div><h3><a name="introducing-gradient-generator" id="introducing-gradient-generator" href="#introducing-gradient-generator"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><p>Link to this heading</p></a>Introducing ‚ÄúGradient Generator‚Äù</h3></div><p>I&#39;ve created a tool that will help you generate lush, beautiful gradients you can use in CSS.</p><a href="https://www.joshwcomeau.com/gradient-generator/"><span type="default"><span><span><img alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjM5OCIgaGVpZ2h0PSIyMDQ0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="Screenshot of a tool that allows you to customize a gradient" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic"/></span></span></a><p>I&#39;m really excited about this tool. It uses all the stuff we&#39;ve talked about in this blog post, plus a few other nifty tricks (like using an easing curve to control the <em>distribution</em> of colors).</p><p>Tweak the controls until you like the result, and then copy the CSS snippet at the bottom. Right now, the tool only generates linear gradients, but you can copy/paste the set of CSS colors and use them in radial and conic gradients as well!</p><p>Check it out here:</p><p><strong>Oh, and one more thing:</strong> If you enjoyed this teaching style, with the interactive widgets and first-principles focus, you&#39;ll love my CSS course, <a href="https://css-for-js.dev/" rel="noopener noreferrer" target="_blank">CSS for JavaScript Developers</a>.</p><a href="https://www.joshwcomeau.com/gradient-generator/"><span type="default"><span><span><img alt="" aria-hidden="true" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjA3NiIgaGVpZ2h0PSIxMDY2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIvPg=="/></span><img alt="Screenshot of the CSS for JavaScript Developers homepage" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic"/></span></span></a><p>In my course, we take a similar approach to the entire CSS language. We learn how it works under-the-hood, so that the language stops feeling so dang surprising. We cover a bunch of common layouts and effects, but we focus on the underlying ideas, so that you can build <em>any</em> layout or effect with the tools you&#39;ve learned.</p><p>If you&#39;re interested, you can learn more here: <a href="https://css-for-js.dev/" rel="noopener noreferrer" target="_blank">https://css-for-js.dev/</a>.</p><p>I was inspired to build my gradient generator after seeing these two wonderful gradient generators:</p><ul><li><span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span></li><li><span><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div><p><a href="https://polychroma.app/" rel="noopener noreferrer" target="_blank">Polychroma</a> by @stormwarning</p></div></li></ul></article></div>
  </body>
</html>
