<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dosaygo-studio.github.io/hn-front-page-2035/news">Original</a>
    <h1>Show HN: Gemini Pro 3 hallucinates the HN front page 10 years from now</h1>
    
    <div id="readability-page-1" class="page"><p>DISCLOSURE: If you buy through affiliate links, I may earn a small commission. <a href="https://hamy.xyz/blog/disclosures">(disclosures)</a></p><div><p>In this post we&#39;ll walk through my solution to Advent of Code 2025 Day 5 in C#.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8L0kKUDicIo?si=K2-Zry_IP0sCXbuK" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
<h2 id="part-1">Part 1</h2>
<p>Notes:</p>
<pre><code>Part 1: 
* Fresh food ranges, blank line, then inventory food

Goal: 
* Get the count of fresh foods

Subproblems: 
* A: How to parse the data
    * Find first empty line - split on that
    * Grab the fresh data and put into set
    * Go over other food and see if fresh
* B: How to do the fresh inventory parsing - O(n)
    * 1: Simple fresh to set then go thorugh inventory and check

-&gt; Hashset not working, it&#39;s OOM
* To do less memory: 
    * A: Do intervals
        * Sort by low ranges, merge ranges
        * See if fresh food id in the inventories
</code></pre>
<p>I originally tried doing a simple range to set lookup but OOMed as the number values are huge. So had to switch to a merge range and binary search.</p>
<pre><code>public static long Day5Part1(string[] lines)
{
    var indexOfInventory = lines.ToList().IndexOf(&#34;&#34;);
    var foodInventory = lines.Skip(indexOfInventory + 1).ToList();
    var freshFoodRanges = BuildFreshFoodDataRanges(lines.Take(indexOfInventory).ToArray());

    return foodInventory
        .Select(long.Parse)
        .Select(foodId =&gt; IsFoodIdInFreshData(freshFoodRanges, foodId))
        .Count(isInRange =&gt; isInRange);
}

public static List&lt;FoodRangeInclusive&gt; BuildFreshFoodDataRanges(string[] lines)
{
    return lines
        .Select(l =&gt; l.Split(&#34;-&#34;))
        .Select(rawStrings =&gt; new FoodRangeInclusive(long.Parse(rawStrings[0]), long.Parse(rawStrings[1])))
        .OrderBy(r =&gt; r.Low)
        .Aggregate(new List&lt;FoodRangeInclusive&gt;(), (acc, next) =&gt;
        {
            if (acc.Count == 0 || next.Low &gt; acc[^1].High + 1)
                acc.Add(next);
            else
                acc[^1] = new FoodRangeInclusive(acc[^1].Low, Math.Max(acc[^1].High, next.High));
            return acc;
        });
}

public static bool IsFoodIdInFreshData(List&lt;FoodRangeInclusive&gt; freshFoodRanges, long foodId)
{
    int lo = 0, hi = freshFoodRanges.Count - 1;

    while (lo &lt;= hi)
    {
        int mid = lo + (hi - lo) / 2;
        var range = freshFoodRanges[mid];

        if (foodId &lt; range.Low)
            hi = mid - 1;
        else if (foodId &gt; range.High)
            lo = mid + 1;
        else
            return true; // foodId is within [Low, High]
    }

    return false;
}

// Doesn&#39;t work - OOM, numbers too big
// public static HashSet&lt;long&gt; BuildFreshDataSet(string[] lines)
// {
//     return lines 
//         .Select(l =&gt; l.Split(&#34;-&#34;))
//         .Select(rawStrings =&gt; (Lower: long.Parse(rawStrings[0]), Upper: long.Parse(rawStrings[1])))
//         .SelectMany(t =&gt; EnumerableExtensions.RangeInclusive(t.Lower, t.Upper).ToList())
//         .ToHashSet();
// }
</code></pre>
<h2 id="part-2">Part 2</h2>
<p>Part 2 was pretty easy cause I already had the functionality coded - just had to sum up the merged ranges.</p>
<pre><code>public static long Day5Part2(string[] lines)
{
    var indexOfInventory = lines.ToList().IndexOf(&#34;&#34;);
    var foodInventory = lines.Skip(indexOfInventory + 1).ToList();
    var freshFoodRanges = BuildFreshFoodDataRanges(lines.Take(indexOfInventory).ToArray());

    return freshFoodRanges
        .Sum(range =&gt; range.High - range.Low + 1);
}
</code></pre>
<h2 id="next">Next</h2>
<p><a href="https://hamy.xyz/blog/haminions">HAMINIONs Members</a> get access to the full source code (<a href="https://github.com/HAMY-LABS/hamy-labs-code-examples/tree/main/csharp/2025-12_csharp-aoc">Github Repo</a>) and that of dozens of other example projects.</p>
<p>If you liked this post you might also like:</p>
<ul>
<li><a href="https://hamy.xyz/tags/advent-of-code">See my previous Advent of Code submissions</a></li>
</ul>
</div></div>
  </body>
</html>
