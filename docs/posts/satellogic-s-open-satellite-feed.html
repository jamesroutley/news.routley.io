<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tech.marksblogg.com/satellogic-open-data-feed.html">Original</a>
    <h1>Satellogic&#39;s Open Satellite Feed</h1>
    
    <div id="readability-page-1" class="page"><div id="article_text">
            <p>Satellogic is a satellite designer, manufacturer and constellation operator. They were founded in 2010 and have offices in Argentina, Uruguay, Spain and the US.</p>
<p>They launched three prototype Cube satellites between 2013 and 2014, using China and Russia as their launch partners.</p>
<p>In 2016, they began launching ~38 KG, 10K-component, 51 x 57 x 82-cm NewSat microsatellites. These take around three months to build and are meant to last for three years in orbit. They&#39;ve named the constellation of these satellites &#34;Aleph-1&#34;.</p>
<p>Below is a rendering of their NewSat satellite.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/Aleph-1_internal_architecture.png"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/Aleph-1_internal_architecture.png"/></a></p><p>They&#39;re aiming to have 300 satellites in orbit at some point which would provide revisit times up to every 5 minutes.</p>
<p>Last week, Satellogic announced an open satellite feed programme and named their dataset &#34;Satellogic EarthView&#34;.</p>
<p>In this post, I&#39;ll examine Satellogic&#39;s constellation and open data feed.</p>
<div id="my-workstation">
<h2>My Workstation</h2>
<p>I&#39;m using a 6 GHz Intel Core <a href="https://www.intel.com/content/www/us/en/products/sku/236773/intel-core-i9-processor-14900k-36m-cache-up-to-6-00-ghz/specifications.html">i9-14900K</a> CPU. It has 8 performance cores and 16 efficiency cores with a total of 32 threads and 32 MB of L2 cache. It has a liquid cooler attached and is housed in a spacious, full-sized Cooler Master HAF 700 computer case. I&#39;ve come across videos on YouTube where people have managed to overclock the i9-14900KF to <a href="https://www.youtube.com/watch?v=fb7pl7PZOYo">9.1 GHz</a>.</p>
<p>The system has 96 GB of DDR5 RAM clocked at 6,000 MT/s and a 5th-generation, Crucial T700 4 TB NVMe M.2 SSD which can read at speeds up to 12,400 MB/s. There is a heatsink on the SSD to help keep its temperature down. This is my system&#39;s C drive.</p>
<p>The system is powered by a 1,200-watt, fully modular Corsair Power Supply and is sat on an ASRock Z790 Pro RS Motherboard.</p>
<p>I&#39;m running Ubuntu 22 LTS via Microsoft&#39;s Ubuntu for Windows on Windows 11 Pro. In case you&#39;re wondering why I don&#39;t run a Linux-based desktop as my primary work environment, I&#39;m still using an Nvidia GTX 1080 GPU which has better driver support on Windows and I use ArcGIS Pro from time to time which only supports Windows natively.</p>
</div>
<div id="installing-prerequisites">
<h2>Installing Prerequisites</h2>
<p>I&#39;ll use GDAL 3.4.1, Python 3.8 and a few other tools to help analyse the data in this post.</p>
<div><pre><span></span>$<span> </span>sudo<span> </span>apt<span> </span>update
$<span> </span>sudo<span> </span>apt<span> </span>install<span> </span><span>\</span>
<span>    </span>gdal-bin<span> </span><span>\</span>
<span>    </span>jq<span> </span><span>\</span>
<span>    </span>libimage-exiftool-perl<span> </span><span>\</span>
<span>    </span>python3-pip<span> </span><span>\</span>
<span>    </span>python3-virtualenv
</pre></div>
<p>I&#39;ll set up a Python Virtual Environment and install some dependencies.</p>
<div><pre><span></span>$<span> </span>python3<span> </span>-m<span> </span>venv<span> </span>~/.satl
$<span> </span><span>source</span><span> </span>~/.satl/bin/activate
$<span> </span>python3<span> </span>-m<span> </span>pip<span> </span>install<span> </span><span>\</span>
<span>    </span>astropy<span> </span><span>\</span>
<span>    </span>awscli<span> </span><span>\</span>
<span>    </span>html2text<span> </span><span>\</span>
<span>    </span>requests<span> </span><span>\</span>
<span>    </span>rich<span> </span><span>\</span>
<span>    </span>sgp4<span> </span><span>\</span>
<span>    </span>utm
</pre></div>
<p>I&#39;ll use DuckDB, along with its <a href="https://github.com/isaacbrodsky/h3-duckdb">H3</a>, <a href="https://duckdb.org/docs/extensions/json">JSON</a>, <a href="https://community-extensions.duckdb.org/extensions/lindel.html">Lindel</a>, <a href="https://duckdb.org/docs/data/parquet/overview">Parquet</a> and <a href="https://duckdb.org/docs/extensions/spatial.html">Spatial</a> extensions, in this post.</p>
<div><pre><span></span>$<span> </span><span>cd</span><span> </span>~
$<span> </span>wget<span> </span>-c<span> </span>https://github.com/duckdb/duckdb/releases/download/v1.1.3/duckdb_cli-linux-amd64.zip
$<span> </span>unzip<span> </span>-j<span> </span>duckdb_cli-linux-amd64.zip
$<span> </span>chmod<span> </span>+x<span> </span>duckdb
$<span> </span>~/duckdb
</pre></div>
<div><pre><span></span><span>INSTALL</span><span> </span><span>h3</span><span> </span><span>FROM</span><span> </span><span>community</span><span>;</span>
<span>INSTALL</span><span> </span><span>lindel</span><span> </span><span>FROM</span><span> </span><span>community</span><span>;</span>
<span>INSTALL</span><span> </span><span>json</span><span>;</span>
<span>INSTALL</span><span> </span><span>parquet</span><span>;</span>
<span>INSTALL</span><span> </span><span>spatial</span><span>;</span>
</pre></div>
<p>I&#39;ll set up DuckDB to load every installed extension each time it launches.</p>

<div><pre><span></span>.timer on
.width 180
LOAD h3;
LOAD lindel;
LOAD json;
LOAD parquet;
LOAD spatial;
</pre></div>
<p>The maps in this post were rendered with <a href="https://www.qgis.org/en/site/forusers/download.html">QGIS</a> version 3.42. QGIS is a desktop application that runs on Windows, macOS and Linux. The application has grown in popularity in recent years and has ~15M application launches from users all around the world each month.</p>
<p>I used QGIS&#39; <a href="https://github.com/marklit/tile_plus">Tile+ plugin</a> to add geospatial context with Bing&#39;s Virtual Earth Basemap to the maps. The dark, non-satellite imagery maps are mostly made up of vector data from Natural Earth and Overture.</p>
</div>
<div id="aleph-1-s-launch-history">
<h2>Aleph-1&#39;s Launch History</h2>
<p>Satellogic has launched 41 satellites for its Aleph-1 constellation as of January 14, 2025.</p>
<p>Their first seven satellites were launched by China between May 2016 and September 2020.</p>
<p>Their eighth satellite was launched by the ESA from the Spaceport in Kourou, French Guiana in September 2020.</p>
<p>China then launched 10 satellites of theirs in one mission in November 2020.</p>
<p>Since June 2021, SpaceX have launched 23 of their satellites with the most recent  being on January 14th, 2025.</p>
</div>
<div id="active-satellites">
<h2>Active Satellites</h2>
<p>Below I&#39;ve tried to find all of their active satellites&#39; locations. The positions of their satellites should change each time the following script is executed.</p>
<p>I couldn&#39;t find an official listing of their satellites <a href="https://en.wikipedia.org/wiki/Two-line_element_set">Two-line elements</a> (TLEs) but I found a listing of NORAD IDs. I scraped the n2yo listings for each satellite and parsed the name and TLE for each of those results.</p>

<div><pre><span></span><span>import</span> <span>json</span>
<span>from</span>   <span>glob</span>            <span>import</span> <span>glob</span>
<span>from</span>   <span>random</span>          <span>import</span> <span>randint</span>
<span>from</span>   <span>time</span>            <span>import</span> <span>sleep</span>

<span>from</span>   <span>html2text</span>       <span>import</span> <span>html2text</span>
<span>import</span> <span>requests</span>
<span>from</span>   <span>rich.progress</span>   <span>import</span> <span>track</span>


<span>for</span> <span>norad_id</span> <span>in</span> <span>track</span><span>((</span><span>46832</span><span>,</span> <span>46829</span><span>,</span> <span>46827</span><span>,</span> <span>46833</span><span>,</span> <span>46831</span><span>,</span> <span>46830</span><span>,</span>
                       <span>46840</span><span>,</span> <span>46835</span><span>,</span> <span>46836</span><span>,</span> <span>48905</span><span>,</span> <span>48921</span><span>,</span> <span>48920</span><span>,</span>
                       <span>48919</span><span>,</span> <span>52168</span><span>,</span> <span>52178</span><span>,</span> <span>52171</span><span>,</span> <span>52184</span><span>,</span> <span>52172</span><span>,</span>
                       <span>52747</span><span>,</span> <span>52764</span><span>,</span> <span>42760</span><span>,</span> <span>52748</span><span>,</span> <span>52752</span><span>,</span> <span>55064</span><span>,</span>
                       <span>55047</span><span>,</span> <span>55045</span><span>,</span> <span>55048</span><span>,</span> <span>56190</span><span>,</span> <span>56203</span><span>,</span> <span>56202</span><span>,</span>
                       <span>56201</span><span>,</span> <span>56943</span><span>,</span> <span>56944</span><span>,</span> <span>56966</span><span>,</span> <span>56968</span><span>,</span> <span>59122</span><span>,</span>
                       <span>60498</span><span>,</span> <span>60500</span><span>,</span> <span>60493</span><span>,</span> <span>46272</span><span>,</span> <span>45017</span><span>,</span> <span>45018</span><span>,</span>
                       <span>46828</span><span>)):</span>
    <span>resp</span> <span>=</span> <span>requests</span><span>.</span><span>get</span><span>(</span><span>&#39;https://www.n2yo.com/satellite/?s=</span><span>%d</span><span>&#39;</span> <span>%</span> <span>norad_id</span><span>)</span>
    <span>assert</span> <span>resp</span><span>.</span><span>status_code</span> <span>==</span> <span>200</span><span>,</span> <span>resp</span><span>.</span><span>status_code</span>

    <span>with</span> <span>open</span><span>(</span><span>&#39;</span><span>%d</span><span>.md&#39;</span> <span>%</span> <span>norad_id</span><span>,</span> <span>&#39;w&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
        <span>f</span><span>.</span><span>write</span><span>(</span><span>html2text</span><span>(</span><span>resp</span><span>.</span><span>content</span><span>.</span><span>decode</span><span>(</span><span>&#39;utf-8&#39;</span><span>)))</span>

    <span>sleep</span><span>(</span><span>randint</span><span>(</span><span>1</span><span>,</span> <span>2</span><span>))</span>

<span>tles</span> <span>=</span> <span>{}</span>

<span>for</span> <span>filename</span> <span>in</span> <span>glob</span><span>(</span><span>&#39;*.md&#39;</span><span>):</span>
    <span>lines</span> <span>=</span> <span>open</span><span>(</span><span>filename</span><span>)</span><span>.</span><span>readlines</span><span>()</span>
    <span>norad_id</span> <span>=</span> <span>int</span><span>(</span><span>filename</span><span>.</span><span>split</span><span>(</span><span>&#39;.&#39;</span><span>)[</span><span>0</span><span>])</span>
    <span>sat_name</span> <span>=</span> <span>None</span>

    <span>for</span> <span>num</span><span>,</span> <span>line</span> <span>in</span> <span>enumerate</span><span>(</span><span>lines</span><span>):</span>
        <span>if</span> <span>line</span><span>.</span><span>startswith</span><span>(</span><span>&#39;# NUSAT-&#39;</span><span>):</span>
            <span>sat_name</span> <span>=</span> <span>line</span><span>.</span><span>lstrip</span><span>(</span><span>&#39;# &#39;</span><span>)</span><span>.</span><span>strip</span><span>()</span>

        <span>if</span> <span>line</span><span>.</span><span>startswith</span><span>(</span><span>&#39;    1&#39;</span><span>):</span>
            <span>tles</span><span>[</span><span>norad_id</span><span>]</span> <span>=</span> <span>{</span>
                <span>&#39;tle&#39;</span><span>:</span> <span>[</span><span>line</span><span>.</span><span>strip</span><span>(),</span> <span>lines</span><span>[</span><span>num</span> <span>+</span> <span>1</span><span>]</span><span>.</span><span>strip</span><span>()],</span>
                <span>&#39;name&#39;</span><span>:</span> <span>sat_name</span><span>}</span>

            <span>break</span> <span># The TLE always comes after the sat name</span>

<span>open</span><span>(</span><span>&#39;tles.json&#39;</span><span>,</span> <span>&#39;w&#39;</span><span>)</span><span>.</span><span>write</span><span>(</span><span>json</span><span>.</span><span>dumps</span><span>(</span><span>tles</span><span>))</span>
</pre></div>
<p>The above produced names and TLEs for 22 of their satellites. I&#39;m not sure if the above is an accurate reflection of their constellation&#39;s status or not so please don&#39;t treat this as gospel.</p>
<p>I then ran the following on March 4th, 2025. It produced a CSV file with names and estimated locations of those 22 satellites.</p>

<div><pre><span></span><span>from</span>   <span>datetime</span> <span>import</span> <span>datetime</span>
<span>import</span> <span>json</span>

<span>from</span>   <span>astropy</span> <span>import</span> <span>units</span> <span>as</span> <span>u</span>
<span>from</span>   <span>astropy.time</span> <span>import</span> <span>Time</span>
<span>from</span>   <span>astropy.coordinates</span> <span>import</span> <span>ITRS</span><span>,</span> \
                                  <span>TEME</span><span>,</span> \
                                  <span>CartesianDifferential</span><span>,</span> \
                                  <span>CartesianRepresentation</span>
<span>from</span>   <span>sgp4.api</span> <span>import</span> <span>Satrec</span>
<span>from</span>   <span>sgp4.api</span> <span>import</span> <span>SGP4_ERRORS</span>


<span>tles</span> <span>=</span> <span>json</span><span>.</span><span>loads</span><span>(</span><span>open</span><span>(</span><span>&#39;tles.json&#39;</span><span>)</span><span>.</span><span>read</span><span>())</span>

<span>with</span> <span>open</span><span>(</span><span>&#39;locations.csv&#39;</span><span>,</span> <span>&#39;w&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
    <span>for</span> <span>norad_id</span> <span>in</span> <span>tles</span><span>:</span>

        <span>name</span>  <span>=</span> <span>tles</span><span>[</span><span>norad_id</span><span>][</span><span>&#39;name&#39;</span><span>]</span>
        <span>line1</span> <span>=</span> <span>tles</span><span>[</span><span>norad_id</span><span>][</span><span>&#39;tle&#39;</span><span>][</span><span>0</span><span>]</span>
        <span>line2</span> <span>=</span> <span>tles</span><span>[</span><span>norad_id</span><span>][</span><span>&#39;tle&#39;</span><span>][</span><span>1</span><span>]</span>

        <span>satellite</span> <span>=</span> <span>Satrec</span><span>.</span><span>twoline2rv</span><span>(</span><span>line1</span><span>,</span> <span>line2</span><span>)</span>

        <span>t</span> <span>=</span> <span>Time</span><span>(</span><span>datetime</span><span>.</span><span>utcnow</span><span>()</span><span>.</span><span>isoformat</span><span>(),</span> <span>format</span><span>=</span><span>&#39;isot&#39;</span><span>,</span> <span>scale</span><span>=</span><span>&#39;utc&#39;</span><span>)</span>

        <span>error_code</span><span>,</span> <span>teme_p</span><span>,</span> <span>teme_v</span> <span>=</span> <span>satellite</span><span>.</span><span>sgp4</span><span>(</span><span>t</span><span>.</span><span>jd1</span><span>,</span> <span>t</span><span>.</span><span>jd2</span><span>)</span> <span># in km and km/s</span>

        <span>if</span> <span>error_code</span> <span>!=</span> <span>0</span><span>:</span>
            <span>raise</span> <span>RuntimeError</span><span>(</span><span>SGP4_ERRORS</span><span>[</span><span>error_code</span><span>])</span>

        <span>teme_p</span> <span>=</span> <span>CartesianRepresentation</span><span>(</span><span>teme_p</span> <span>*</span> <span>u</span><span>.</span><span>km</span><span>)</span>
        <span>teme_v</span> <span>=</span> <span>CartesianDifferential</span><span>(</span><span>teme_v</span> <span>*</span> <span>u</span><span>.</span><span>km</span> <span>/</span> <span>u</span><span>.</span><span>s</span><span>)</span>
        <span>teme</span> <span>=</span> <span>TEME</span><span>(</span><span>teme_p</span><span>.</span><span>with_differentials</span><span>(</span><span>teme_v</span><span>),</span> <span>obstime</span><span>=</span><span>t</span><span>)</span>

        <span>itrs_geo</span> <span>=</span> <span>teme</span><span>.</span><span>transform_to</span><span>(</span><span>ITRS</span><span>(</span><span>obstime</span><span>=</span><span>t</span><span>))</span>
        <span>location</span> <span>=</span> <span>itrs_geo</span><span>.</span><span>earth_location</span>
        <span>loc</span> <span>=</span> <span>location</span><span>.</span><span>geodetic</span>

        <span>f</span><span>.</span><span>write</span><span>(</span><span>&#39;&#34;</span><span>%s</span><span>&#34;, &#34;POINT (</span><span>%f</span><span> </span><span>%f</span><span>)&#34;</span><span>\n</span><span>&#39;</span> <span>%</span> <span>(</span><span>name</span><span>.</span><span>lstrip</span><span>(</span><span>&#39;0&#39;</span><span>)</span><span>.</span><span>lstrip</span><span>(),</span>
                                             <span>loc</span><span>.</span><span>lon</span><span>.</span><span>deg</span><span>,</span>
                                             <span>loc</span><span>.</span><span>lat</span><span>.</span><span>deg</span><span>))</span>
</pre></div>
<p>Below is a rendering of the above CSV data in QGIS.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_gfkvrYHvtc.jpg"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_gfkvrYHvtc.jpg"/></a>
</p></div>
<div id="open-data-feed">
<h2>Open Data Feed</h2>
<p>Their S3 bucket appears to contain ~7M unique images from more than 3M locations. There is a metadata file for each image they&#39;ve collected as well as several versions, such as thumbnails, of each image available. There are both RGB and near-infrared imagery available with a resolution of one meter.</p>
<p>Below, I&#39;ll list out the contents of their S3 bucket.</p>
<div><pre><span></span>$<span> </span>aws<span> </span>--no-sign-request<span> </span><span>\</span>
<span>      </span>--output<span> </span>json<span> </span><span>\</span>
<span>      </span>s3api<span> </span><span>\</span>
<span>      </span>list-objects<span> </span><span>\</span>
<span>      </span>--bucket<span> </span>satellogic-earthview<span> </span><span>\</span>
<span>      </span>--max-items<span>=</span><span>100000000</span><span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>jq<span> </span>-c<span> </span><span>&#39;.Contents[]&#39;</span><span> </span><span>\</span>
<span>    </span>&gt;<span> </span>satellogic.s3.json
</pre></div>
<p>The resulting JSON file contains 35,480,124 lines and is 13 GB uncompressed. There are almost 10 TBs of content in this bucket.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;Total objects: &#34;</span><span> </span><span>`</span>wc<span> </span>-l<span> </span>satellogic.s3.json<span> </span><span>|</span><span> </span>cut<span> </span>-d<span>&#39; &#39;</span><span> </span>-f1<span>`</span>,<span> </span><span>\</span>
<span>        </span><span>&#34; TB: &#34;</span><span> </span><span>`</span>jq<span> </span>.Size<span> </span>satellogic.s3.json<span> </span><span>|</span><span> </span>awk<span> </span><span>&#39;{s+=$1}END{print s/1024/1024/1024/1024}&#39;</span><span>`</span>
</pre></div>
<div><pre><span></span>Total objects:  35480124,  TB:  9.79704
</pre></div>
<p>Each metadata filename contains its corresponding image&#39;s location as well as other useful attributes. I&#39;ll parse these filenames and produce a metadata database in DuckDB.</p>

<div><pre><span></span><span>import</span> <span>json</span>

<span>from</span>   <span>rich.progress</span> <span>import</span> <span>track</span>
<span>import</span> <span>utm</span>


<span>with</span> <span>open</span><span>(</span><span>&#39;enriched.s3.json&#39;</span><span>,</span> <span>&#39;w&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
    <span>for</span> <span>line</span> <span>in</span> <span>track</span><span>(</span><span>open</span><span>(</span><span>&#39;satellogic.s3.json&#39;</span><span>),</span>
                      <span>total</span><span>=</span><span>35_480_124</span><span>):</span>
        <span>rec</span> <span>=</span> <span>json</span><span>.</span><span>loads</span><span>(</span><span>line</span><span>)</span>
        <span>if</span> <span>not</span> <span>rec</span><span>[</span><span>&#39;Key&#39;</span><span>]</span><span>.</span><span>startswith</span><span>(</span><span>&#39;data/json/&#39;</span><span>):</span>
            <span>continue</span>

        <span>date_</span><span>,</span> \
        <span>time_</span><span>,</span> \
        <span>rec</span><span>[</span><span>&#39;sat&#39;</span><span>],</span> \
        <span>rec</span><span>[</span><span>&#39;zone&#39;</span><span>],</span> \
        <span>rec</span><span>[</span><span>&#39;region&#39;</span><span>],</span> \
        <span>rec</span><span>[</span><span>&#39;region2&#39;</span><span>],</span> \
        <span>_</span> <span>=</span> <span>rec</span><span>[</span><span>&#39;Key&#39;</span><span>]</span><span>.</span><span>split</span><span>(</span><span>&#39;/&#39;</span><span>)[</span><span>5</span><span>]</span><span>.</span><span>split</span><span>(</span><span>&#39;_&#39;</span><span>)</span>

        <span>rec</span><span>[</span><span>&#39;captured_at&#39;</span><span>]</span> <span>=</span> \
            <span>date_</span><span>[</span><span>0</span><span>:</span><span>4</span><span>]</span> <span>+</span> <span>&#39;-&#39;</span> <span>+</span> <span>date_</span><span>[</span><span>4</span><span>:</span><span>6</span><span>]</span> <span>+</span> <span>&#39;-&#39;</span> <span>+</span> <span>date_</span><span>[</span><span>6</span><span>:</span><span>8</span><span>]</span> <span>+</span> <span>&#39;T&#39;</span> <span>+</span> \
            <span>time_</span><span>[</span><span>0</span><span>:</span><span>2</span><span>]</span> <span>+</span> <span>&#39;:&#39;</span> <span>+</span> <span>time_</span><span>[</span><span>2</span><span>:</span><span>4</span><span>]</span> <span>+</span> <span>&#39;:&#39;</span> <span>+</span> <span>time_</span><span>[</span><span>4</span><span>:</span><span>6</span><span>]</span> <span>+</span> <span>&#39;Z&#39;</span>

        <span>try</span><span>:</span>
            <span>lat</span><span>,</span> <span>lon</span> <span>=</span> <span>utm</span><span>.</span><span>to_latlon</span><span>(</span><span>float</span><span>(</span><span>rec</span><span>[</span><span>&#39;region&#39;</span><span>]),</span>
                                     <span>float</span><span>(</span><span>rec</span><span>[</span><span>&#39;region2&#39;</span><span>]),</span>
                                     <span>int</span><span>(</span><span>rec</span><span>[</span><span>&#39;zone&#39;</span><span>][</span><span>0</span><span>:</span><span>2</span><span>]),</span>
                                     <span>northern</span><span>=</span><span>rec</span><span>[</span><span>&#39;zone&#39;</span><span>][</span><span>2</span><span>]</span> <span>==</span> <span>&#39;N&#39;</span><span>)</span>
        <span># WIP:</span>
        <span># OutOfRangeError: northing out of range</span>
        <span># (must be between 0 m and 10,000,000 m)</span>
        <span>except</span> <span>Exception</span> <span>as</span> <span>exc</span><span>:</span>
            <span>continue</span>

        <span>rec</span><span>[</span><span>&#39;lat&#39;</span><span>],</span> <span>rec</span><span>[</span><span>&#39;lon&#39;</span><span>]</span> <span>=</span> <span>float</span><span>(</span><span>lat</span><span>),</span> <span>float</span><span>(</span><span>lon</span><span>)</span>

        <span>f</span><span>.</span><span>write</span><span>(</span><span>json</span><span>.</span><span>dumps</span><span>(</span><span>rec</span><span>,</span> <span>sort_keys</span><span>=</span><span>True</span><span>)</span> <span>+</span> <span>&#39;</span><span>\n</span><span>&#39;</span><span>)</span>
</pre></div>
<p>The resulting JSON produced by the above script is 3.3 GB uncompressed and contains  7,095,985 lines. Below, I&#39;ll import it into DuckDB.</p>
<div><pre><span></span>$<span> </span>~/duckdb<span> </span>~/satellogic.duckdb
</pre></div>
<div><pre><span></span><span>CREATE</span><span> </span><span>OR</span><span> </span><span>REPLACE</span><span> </span><span>TABLE</span><span> </span><span>s3</span><span> </span><span>AS</span>
<span>    </span><span>SELECT</span><span> </span><span>*</span><span> </span><span>EXCLUDE</span><span>(</span><span>lat</span><span>,</span><span> </span><span>lon</span><span>),</span>
<span>           </span><span>ST_POINT</span><span>(</span><span>lon</span><span>,</span><span> </span><span>lat</span><span>)</span><span> </span><span>AS</span><span> </span><span>geom</span>
<span>    </span><span>FROM</span><span>   </span><span>READ_JSON</span><span>(</span><span>&#39;enriched.s3.json&#39;</span><span>);</span>
</pre></div>
</div>
<div id="data-fluency">
<h2>Data Fluency</h2>
<p>The imagery in this feed was captured between July and December 2022. Below is the breakdown by month and satellite of the number of images captured. I&#39;ve rounded the amounts to the nearest thousand.</p>
<div><pre><span></span><span>WITH</span><span> </span><span>a</span><span> </span><span>AS</span><span> </span><span>(</span>
<span>    </span><span>SELECT</span><span>   </span><span>sat</span><span>,</span>
<span>             </span><span>STRFTIME</span><span>(</span><span>captured_at</span><span>,</span><span>  </span><span>&#39;%m&#39;</span><span>)</span><span> </span><span>month_</span><span>,</span>
<span>             </span><span>ROUND</span><span>(</span><span>COUNT</span><span>(</span><span>*</span><span>)</span><span> </span><span>/</span><span> </span><span>1000</span><span>)::</span><span>INT</span><span> </span><span>num_rec</span>
<span>    </span><span>FROM</span><span>     </span><span>s3</span>
<span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span>
<span>    </span><span>ORDER</span><span> </span><span>BY</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span>
<span>)</span>
<span>PIVOT</span><span>    </span><span>a</span>
<span>ON</span><span>       </span><span>month_</span>
<span>USING</span><span>    </span><span>SUM</span><span>(</span><span>num_rec</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>sat</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>sat</span><span>[</span><span>3</span><span>:]::</span><span>INT</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────┬────────┬────────┬────────┬────────┬────────┬────────┐
│   sat   │   07   │   08   │   09   │   10   │   11   │   12   │
│ varchar │ int128 │ int128 │ int128 │ int128 │ int128 │ int128 │
├─────────┼────────┼────────┼────────┼────────┼────────┼────────┤
│ SN8     │      3 │        │        │        │        │        │
│ SN9     │     54 │     66 │     68 │     69 │    100 │     58 │
│ SN11    │     55 │     52 │     82 │     51 │     80 │     78 │
│ SN12    │        │        │      1 │        │        │        │
│ SN13    │     66 │     15 │        │        │     13 │     41 │
│ SN14    │        │        │      7 │      4 │        │      1 │
│ SN15    │     86 │     52 │     95 │     86 │     49 │        │
│ SN16    │     71 │     53 │     37 │     72 │     67 │     96 │
│ SN18    │     80 │     75 │     60 │     63 │    118 │    153 │
│ SN20    │     29 │     71 │     56 │     94 │    130 │     73 │
│ SN21    │     70 │     51 │     60 │    117 │    101 │     82 │
│ SN22    │     61 │     33 │     63 │     95 │    119 │    111 │
│ SN23    │     66 │     72 │     70 │     16 │        │        │
│ SN24    │     68 │     75 │     66 │     95 │     78 │    131 │
│ SN25    │     93 │     39 │     88 │      9 │        │        │
│ SN27    │     71 │     77 │    106 │     99 │     86 │    100 │
│ SN28    │        │     52 │     94 │    107 │    129 │    110 │
│ SN29    │     18 │     44 │     71 │    104 │     75 │    159 │
│ SN30    │     39 │     45 │     70 │     79 │     95 │     60 │
│ SN31    │     51 │    100 │     64 │     81 │    146 │    107 │
├─────────┴────────┴────────┴────────┴────────┴────────┴────────┤
│ 20 rows                                             7 columns │
└───────────────────────────────────────────────────────────────┘
</pre></div>
<p>I&#39;ll produce a heatmap of where the imagery was captured.</p>
<div><pre><span></span>$<span> </span>~/duckdb<span> </span>~/satellogic.duckdb
</pre></div>
<div><pre><span></span><span>COPY</span><span> </span><span>(</span>
<span>    </span><span>SELECT</span><span>   </span><span>h3_cell_to_boundary_wkt</span><span>(</span>
<span>                  </span><span>h3_latlng_to_cell</span><span>(</span><span>ST_Y</span><span>(</span><span>geom</span><span>),</span>
<span>                                    </span><span>ST_X</span><span>(</span><span>geom</span><span>),</span>
<span>                                    </span><span>5</span><span>))::</span><span>GEOMETRY</span><span> </span><span>geom</span><span>,</span>
<span>             </span><span>COUNT</span><span>(</span><span>*</span><span>)</span><span> </span><span>num_recs</span>
<span>    </span><span>FROM</span><span>     </span><span>s3</span>
<span>    </span><span>WHERE</span><span>    </span><span>ST_X</span><span>(</span><span>geom</span><span>)</span><span> </span><span>BETWEEN</span><span> </span><span>-</span><span>175</span><span> </span><span>AND</span><span> </span><span>175</span>
<span>    </span><span>AND</span><span>      </span><span>ST_Y</span><span>(</span><span>geom</span><span>)</span><span> </span><span>BETWEEN</span><span> </span><span>-</span><span>90</span><span>  </span><span>AND</span><span>  </span><span>90</span>
<span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span>
<span>)</span><span> </span><span>TO</span><span> </span><span>&#39;h3_5.gpkg&#39;</span>
<span>    </span><span>WITH</span><span> </span><span>(</span><span>FORMAT</span><span> </span><span>GDAL</span><span>,</span>
<span>          </span><span>DRIVER</span><span> </span><span>&#39;GPKG&#39;</span><span>,</span>
<span>          </span><span>LAYER_CREATION_OPTIONS</span><span> </span><span>&#39;WRITE_BBOX=YES&#39;</span><span>);</span>
</pre></div>
<p>This is a global view of their imagery footprints.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_7L3wLAfGAc.png"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_7L3wLAfGAc.png"/></a></p><p>Below is a zoomed-in view of North America.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_gfxsBb5stx.png"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_gfxsBb5stx.png"/></a></p><p>Below is a zoomed-in view of Europe, North Africa and the Middle East. Hotspots in Albania, Saudi Arabia and between India and China really stand out.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_QDvTFxYjIN.png"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_QDvTFxYjIN.png"/></a></p><p>The image below might be a bit easier to see on a mobile device.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_ISlxCDKTTQ.jpg"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_ISlxCDKTTQ.jpg"/></a>
</p></div>
<div id="imagery-by-country">
<h2>Imagery by Country</h2>
<p>I&#39;ll use the Database of Global Administrative Areas (<a href="https://gadm.org/">GADM</a>) to get the number of images per country in this dataset.</p>
<div><pre><span></span>$<span> </span>wget<span> </span>-c<span> </span>https://geodata.ucdavis.edu/gadm/gadm4.1/gadm_410-gpkg.zip
$<span> </span>unzip<span> </span>gadm_410-gpkg.zip
</pre></div>
<div><pre><span></span>$<span> </span>~/duckdb<span> </span>~/satellogic.duckdb
</pre></div>
<div><pre><span></span><span>CREATE</span><span> </span><span>OR</span><span> </span><span>REPLACE</span><span> </span><span>TABLE</span><span> </span><span>gadm</span><span> </span><span>AS</span>
<span>    </span><span>FROM</span><span>   </span><span>ST_READ</span><span>(</span><span>&#39;/mnt/f/gis/Global/gadm/gadm_410.gpkg&#39;</span><span>);</span>
</pre></div>
<p>The heatmap GeoPackage (GPKG) file I produced earlier has a record count for each hexagon across the globe containing at least one image. It contains 6,122 records in total. I&#39;ll use the centroid of each hexagon to find its matching country.</p>
<div><pre><span></span><span>CREATE</span><span> </span><span>OR</span><span> </span><span>REPLACE</span><span> </span><span>TABLE</span><span> </span><span>countries</span><span> </span><span>AS</span>
<span>    </span><span>SELECT</span><span>   </span><span>b</span><span>.</span><span>COUNTRY</span><span> </span><span>AS</span><span> </span><span>country</span><span>,</span>
<span>             </span><span>SUM</span><span>(</span><span>a</span><span>.</span><span>num_recs</span><span>)</span><span> </span><span>AS</span><span> </span><span>num_recs</span>
<span>    </span><span>FROM</span><span>     </span><span>ST_READ</span><span>(</span><span>&#39;h3_5.gpkg&#39;</span><span>)</span><span> </span><span>a</span>
<span>    </span><span>JOIN</span><span>     </span><span>gadm</span><span> </span><span>b</span><span> </span><span>ON</span><span> </span><span>ST_CONTAINS</span><span>(</span><span>b</span><span>.</span><span>geom</span><span>,</span>
<span>                                   </span><span>ST_CENTROID</span><span>(</span><span>a</span><span>.</span><span>geom</span><span>))</span>
<span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span><span>;</span>
</pre></div>
<p>Not every centroid landed on a polygon for any of the countries listed in GADM. It could be that the missing ~1.5M image locations are just off of the coast or out in territorial waters.</p>
<div><pre><span></span><span>SELECT</span><span> </span><span>SUM</span><span>(</span><span>num_recs</span><span>)</span>
<span>FROM</span><span>   </span><span>countries</span><span>;</span>
</pre></div>

<p>Nonetheless, the following should be representative of how often any one country features in this dataset.</p>
<div><pre><span></span><span>FROM</span><span>     </span><span>countries</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>num_recs</span><span> </span><span>DESC</span><span>;</span>
</pre></div>
<div><pre><span></span>┌────────────────────────┬──────────┐
│        country         │ num_recs │
│        varchar         │  int128  │
├────────────────────────┼──────────┤
│ United States          │   886871 │
│ Saudi Arabia           │   428122 │
│ Australia              │   423079 │
│ Spain                  │   326465 │
│ China                  │   324572 │
│ México                 │   304916 │
│ Pakistan               │   293720 │
│ Russia                 │   250520 │
│ Ukraine                │   184756 │
│ Brazil                 │   176929 │
│ Argentina              │   156790 │
│ Albania                │   115472 │
│ United Arab Emirates   │   114530 │
│ Oman                   │   102500 │
│ Bangladesh             │   101888 │
│ Iran                   │    98160 │
│ India                  │    81026 │
│ Iraq                   │    72990 │
│ Canada                 │    65153 │
│ North Korea            │    64570 │
│   ·                    │       ·  │
│   ·                    │       ·  │
│   ·                    │       ·  │
│ Haiti                  │     1519 │
│ Denmark                │     1428 │
│ Moldova                │     1384 │
│ Romania                │     1291 │
│ Mozambique             │     1217 │
│ South Korea            │     1188 │
│ Colombia               │     1139 │
│ Northern Cyprus        │     1088 │
│ Slovakia               │     1075 │
│ Indonesia              │     1070 │
│ Dominican Republic     │      717 │
│ Trinidad and Tobago    │      592 │
│ Somalia                │      563 │
│ Switzerland            │      511 │
│ Serbia                 │      472 │
│ Guam                   │      431 │
│ Cuba                   │      370 │
│ Bosnia and Herzegovina │      289 │
│ Philippines            │      263 │
│ Barbados               │      244 │
├────────────────────────┴──────────┤
│ 127 rows (40 shown)     2 columns │
└───────────────────────────────────┘
</pre></div>
</div>

<div id="qatari-imagery">
<h2>Qatari Imagery</h2>
<p>I drew a bounding box around Qatar to see how many images in this dataset feature the country. Due to the country&#39;s shape and proximity to Bahrain and Saudi Arabia, a few of their images were also included in this count.</p>
<div><pre><span></span>$<span> </span>~/duckdb<span> </span>~/satellogic.duckdb
</pre></div>
<div><pre><span></span><span>SELECT</span><span> </span><span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>FROM</span><span>   </span><span>s3</span>
<span>WHERE</span><span>  </span><span>ST_X</span><span>(</span><span>geom</span><span>)</span><span> </span><span>BETWEEN</span><span> </span><span>50</span><span>.</span><span>6515</span><span> </span><span>AND</span><span> </span><span>51</span><span>.</span><span>8086</span>
<span>AND</span><span>    </span><span>ST_Y</span><span>(</span><span>geom</span><span>)</span><span> </span><span>BETWEEN</span><span> </span><span>24</span><span>.</span><span>3595</span><span> </span><span>AND</span><span> </span><span>26</span><span>.</span><span>3612</span><span>;</span>
</pre></div>
<div><pre><span></span>┌──────────────┐
│ count_star() │
│    int64     │
├──────────────┤
│        64375 │
└──────────────┘
</pre></div>
<p>I&#39;ll get the URLs of the metadata for those 64,375 images and download them using eight threads.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;SELECT Key</span>
<span>        FROM   s3</span>
<span>        WHERE  ST_X(geom) BETWEEN 50.6515 AND 51.8086</span>
<span>        AND    ST_Y(geom) BETWEEN 24.3595 AND 26.3612&#34;</span><span> </span><span>\</span>
<span>        </span><span>|</span><span> </span>~/duckdb<span> </span>-csv<span> </span>-noheader<span> </span>~/satellogic.duckdb<span> </span><span>\</span>
<span>        </span>&gt;<span> </span>manifest.txt
</pre></div>
<div><pre><span></span>$<span> </span>mkdir<span> </span>qatar
$<span> </span><span>cd</span><span> </span>qatar

$<span> </span>cat<span> </span>../manifest.txt<span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>xargs<span> </span><span>\</span>
<span>        </span>-P8<span> </span><span>\</span>
<span>        </span>-I%<span> </span><span>\</span>
<span>        </span>wget<span> </span>-c<span> </span><span>&#34;https://satellogic-earthview.s3.us-west-2.amazonaws.com/%&#34;</span>
</pre></div>
<p>The above downloaded 252 MB of JSON and took almost an hour to complete. I&#39;ll concatenate those files into a single line-delimited JSON file. I&#39;ll then use DuckDB to convert the JSON into a GPKG file with a few fields cleaned up for the sake of ergonomics.</p>
<div><pre><span></span>$<span> </span><span>cd</span><span> </span>../
$<span> </span>find<span> </span>qatar/<span> </span><span>\</span>
<span>    </span>-type<span> </span>f<span> </span><span>\</span>
<span>    </span>-exec<span> </span>cat<span> </span><span>{}</span><span> </span>+<span> </span><span>\</span>
<span>    </span>&gt;<span> </span>qatar.json
$<span> </span>~/duckdb
</pre></div>
<div><pre><span></span><span>COPY</span><span> </span><span>(</span>
<span>    </span><span>SELECT</span><span> </span><span>properties</span><span>.</span><span>*</span><span> </span><span>EXCLUDE</span><span>(</span><span>providers</span><span>,</span>
<span>                                </span><span>&#34;proj:shape&#34;</span><span>,</span>
<span>                                </span><span>&#34;proj:transform&#34;</span><span>),</span>
<span>           </span><span>assets</span><span>.</span><span>preview</span><span>.</span><span>href</span><span>          </span><span>AS</span><span> </span><span>url_preview</span><span>,</span>
<span>           </span><span>assets</span><span>.</span><span>visual</span><span>.</span><span>href</span><span>           </span><span>AS</span><span> </span><span>url_visual</span><span>,</span>
<span>           </span><span>assets</span><span>.</span><span>analytic</span><span>.</span><span>href</span><span>         </span><span>AS</span><span> </span><span>url_analytic</span><span>,</span>
<span>           </span><span>assets</span><span>.</span><span>thumbnail</span><span>.</span><span>href</span><span>        </span><span>AS</span><span> </span><span>url_thumbnail</span><span>,</span>
<span>           </span><span>ST_GEOMFROMGEOJSON</span><span>(</span><span>geometry</span><span>)</span><span> </span><span>AS</span><span> </span><span>geom</span>
<span>    </span><span>FROM</span><span>   </span><span>&#39;qatar.json&#39;</span>
<span>)</span><span> </span><span>TO</span><span> </span><span>&#39;qatar.footprints.gpkg&#39;</span>
<span>    </span><span>WITH</span><span> </span><span>(</span><span>FORMAT</span><span> </span><span>GDAL</span><span>,</span>
<span>          </span><span>DRIVER</span><span> </span><span>&#39;GPKG&#39;</span><span>,</span>
<span>          </span><span>LAYER_CREATION_OPTIONS</span><span> </span><span>&#39;WRITE_BBOX=YES&#39;</span><span>);</span>
</pre></div>
<p>Below is an example record of the above GPKG file.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;FROM  ST_READ(&#39;qatar.footprints.gpkg&#39;)</span>
<span>        LIMIT 1&#34;</span><span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>~/duckdb<span> </span>-json<span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>jq<span> </span>-S<span> </span>.
</pre></div>
<div><pre><span></span><span>[</span>
<span>  </span><span>{</span>
<span>    </span><span>&#34;datetime&#34;</span><span>:</span><span> </span><span>&#34;2022-07-14T11:06:22.192899+00:00&#34;</span><span>,</span>
<span>    </span><span>&#34;geom&#34;</span><span>:</span><span> </span><span>&#34;POLYGON ((50.65626187904185 26.24828637962653, 50.656251675908884 26.25175366324302, 50.65240649343577 26.25174441056527, 50.652416810695826 26.24827712835427, 50.65626187904185 26.24828637962653))&#34;</span><span>,</span>
<span>    </span><span>&#34;grid:code&#34;</span><span>:</span><span> </span><span>&#34;39N-465288_2903610&#34;</span><span>,</span>
<span>    </span><span>&#34;gsd&#34;</span><span>:</span><span> </span><span>1</span><span>,</span>
<span>    </span><span>&#34;license&#34;</span><span>:</span><span> </span><span>&#34;CC-BY-4.0&#34;</span><span>,</span>
<span>    </span><span>&#34;platform&#34;</span><span>:</span><span> </span><span>&#34;newsat21&#34;</span><span>,</span>
<span>    </span><span>&#34;proj:epsg&#34;</span><span>:</span><span> </span><span>&#34;32639&#34;</span><span>,</span>
<span>    </span><span>&#34;satl:altitude&#34;</span><span>:</span><span> </span><span>461.4741909855675</span><span>,</span>
<span>    </span><span>&#34;satl:altitude_units&#34;</span><span>:</span><span> </span><span>&#34;km&#34;</span><span>,</span>
<span>    </span><span>&#34;satl:product_name&#34;</span><span>:</span><span> </span><span>&#34;L1&#34;</span><span>,</span>
<span>    </span><span>&#34;url_analytic&#34;</span><span>:</span><span> </span><span>&#34;https://satellogic-earthview.s3.us-west-2.amazonaws.com/data/tif/zone=39N/region=465288_2903610/date=2022-07-14/20220714_110622_SN21_39N_465288_2903610_TOA.tif&#34;</span><span>,</span>
<span>    </span><span>&#34;url_preview&#34;</span><span>:</span><span> </span><span>&#34;https://satellogic-earthview.s3.us-west-2.amazonaws.com/data/png/zone=39N/region=465288_2903610/date=2022-07-14/20220714_110622_SN21_39N_465288_2903610_preview.png&#34;</span><span>,</span>
<span>    </span><span>&#34;url_thumbnail&#34;</span><span>:</span><span> </span><span>&#34;https://satellogic-earthview.s3.us-west-2.amazonaws.com/data/png/zone=39N/region=465288_2903610/date=2022-07-14/20220714_110622_SN21_39N_465288_2903610_thumbnail.png&#34;</span><span>,</span>
<span>    </span><span>&#34;url_visual&#34;</span><span>:</span><span> </span><span>&#34;https://satellogic-earthview.s3.us-west-2.amazonaws.com/data/tif/zone=39N/region=465288_2903610/date=2022-07-14/20220714_110622_SN21_39N_465288_2903610_VISUAL.tif&#34;</span><span>,</span>
<span>    </span><span>&#34;view:azimuth&#34;</span><span>:</span><span> </span><span>97.95684658243894</span><span>,</span>
<span>    </span><span>&#34;view:off_nadir&#34;</span><span>:</span><span> </span><span>9.250787005630361</span><span>,</span>
<span>    </span><span>&#34;view:sun_azimuth&#34;</span><span>:</span><span> </span><span>269.67692021214305</span><span>,</span>
<span>    </span><span>&#34;view:sun_elevation&#34;</span><span>:</span><span> </span><span>57.10934720889825</span>
<span>  </span><span>}</span>
<span>]</span>
</pre></div>
<p>Below are the footprints of those 64,375 images. I&#39;ve colour-coded them by the date of their capture. I&#39;ve tinted the basemap blue to help the footprints stand out. The red bounding box was the search area.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_m7ijcDVW5m.jpg"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_m7ijcDVW5m.jpg"/></a></p><p>When I zoom in on any one of the large stripes of footprints, the individual footprints of each image can be seen.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_7rISpM7bAw.jpg"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_7rISpM7bAw.jpg"/></a></p><p>I&#39;ll pick a small part of Qatar along its coastline and download that area&#39;s images.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;SELECT url_visual</span>
<span>        FROM   ST_READ(&#39;qatar.footprints.gpkg&#39;)</span>
<span>        WHERE  ST_X(ST_CENTROID(geom)) BETWEEN 50.811115 AND 50.829002</span>
<span>        AND    ST_Y(ST_CENTROID(geom)) BETWEEN 25.522661 AND 25.542736&#34;</span><span> </span><span>\</span>
<span>        </span><span>|</span><span> </span>~/duckdb<span> </span>-csv<span> </span>-noheader<span> </span><span>\</span>
<span>        </span>&gt;<span> </span>url_visual.txt

$<span> </span>mkdir<span> </span>imagery
$<span> </span><span>cd</span><span> </span>imagery

$<span> </span>cat<span> </span>../url_visual.txt<span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>xargs<span> </span><span>\</span>
<span>        </span>-P8<span> </span><span>\</span>
<span>        </span>-I%<span> </span><span>\</span>
<span>        </span>wget<span> </span>-c<span> </span><span>&#34;%&#34;</span>
</pre></div>
<p>The above downloaded 24 GeoTIFFs totalling 9.1 MB. Each image is 384x384-pixels.</p>
<p>Each image has geospatial information embedded within it, so I can group them together into a single image that will retain the spatial data. I&#39;ll re-compress the image using WebP, so the resulting image is much smaller than the original source imagery.</p>
<div><pre><span></span>$<span> </span>gdalbuildvrt<span> </span>mosaic.vrt<span> </span>*VISUAL.tif

$<span> </span>gdal_translate<span> </span><span>\</span>
<span>    </span>-co<span> </span><span>NUM_THREADS</span><span>=</span>ALL_CPUS<span> </span><span>\</span>
<span>    </span>-of<span> </span>COG<span> </span><span>\</span>
<span>    </span>-co<span> </span><span>COMPRESS</span><span>=</span>WEBP<span> </span><span>\</span>
<span>    </span>-co<span> </span><span>PREDICTOR</span><span>=</span><span>2</span><span> </span><span>\</span>
<span>    </span>mosaic.vrt<span> </span><span>\</span>
<span>    </span>mosaic.tif
</pre></div>
<p>The resulting mosaic GeoTIFF is 225 KB.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_ZBoY0S4gxb.jpg"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_ZBoY0S4gxb.jpg"/></a></p><p>The 24 images look very different from one another and don&#39;t blend seamlessly. They share the same processing level and capture statistics, as far as I can tell.</p>
<div><pre><span></span><span>.</span><span>mode</span><span> </span><span>line</span>

<span>SELECT</span><span>   </span><span>datetime</span><span>,</span>
<span>         </span><span>platform</span><span>,</span>
<span>         </span><span>&#34;satl:product_name&#34;</span><span>,</span>
<span>         </span><span>&#34;view:azimuth&#34;</span><span>,</span>
<span>         </span><span>&#34;view:off_nadir&#34;</span><span>,</span>
<span>         </span><span>&#34;view:sun_azimuth&#34;</span><span>,</span>
<span>         </span><span>&#34;view:sun_elevation&#34;</span><span>,</span>
<span>         </span><span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>FROM</span><span>     </span><span>ST_READ</span><span>(</span><span>&#39;qatar.footprints.gpkg&#39;</span><span>)</span>
<span>WHERE</span><span>    </span><span>ST_X</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geom</span><span>))</span><span> </span><span>BETWEEN</span><span> </span><span>50</span><span>.</span><span>811115</span><span> </span><span>AND</span><span> </span><span>50</span><span>.</span><span>829002</span>
<span>AND</span><span>      </span><span>ST_Y</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geom</span><span>))</span><span> </span><span>BETWEEN</span><span> </span><span>25</span><span>.</span><span>522661</span><span> </span><span>AND</span><span> </span><span>25</span><span>.</span><span>542736</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span><span>,</span><span> </span><span>3</span><span>,</span><span> </span><span>4</span><span>,</span><span> </span><span>5</span><span>,</span><span> </span><span>6</span><span>,</span><span> </span><span>7</span><span>;</span>
</pre></div>
<div><pre><span></span>          datetime = 2022-10-10T07:11:56.894566+00:00
          platform = newsat16
 satl:product_name = L1
      view:azimuth = 283.5615135582265
    view:off_nadir = 23.243003077262802
  view:sun_azimuth = 149.1609429350105
view:sun_elevation = 53.39441361193675
      count_star() = 24
</pre></div>
<p>For clarity, below are the grid codes for each image in the mosaic.</p>
<p><a href="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_QmnW2jl4ox.png"><img alt="Satellogic" src="https://todaythings.substack.com/p/theme/images/satellogic/qgis-bin_QmnW2jl4ox.png"/></a></p><p>The following are types of imagery deliverables that Satellogic offers:</p>
<ul>
<li>L0: Raw</li>
<li>L1A: Raw corrected</li>
<li>L1B: L1 Basic (Cloud, shadow and usable data mask)</li>
<li>L1C: Ortho ready</li>
<li>L1D/L1D_SR: Ortho</li>
<li>L1: TOA Reflectance</li>
<li>L1_SR: TOA Reflectance SuperResolution</li>
</ul>
<p>The product listed in the metadata for these images was L1 which I&#39;m assuming means &#34;Radiometric-corrected imagery (TOA reflectance imagery)&#34;. Their product documentation says the imagery is corrected for sensor, optical and terrain distortions (orthorectified).</p>
<p>My best guess is that the images have been processed independently of one another. Basemap producers often strive to blend images next to one another seamlessly but that might not be a requirement for this imagery&#39;s original deliverable.</p>
</div>

        </div><p>
            Thank you for taking the time to read this post. I offer both consulting and hands-on development services to clients in North America and Europe. If you&#39;d like to discuss how my offerings can help your business please contact me via <a href="https://uk.linkedin.com/in/marklitwintschik/">LinkedIn</a>.
        </p></div>
  </body>
</html>
