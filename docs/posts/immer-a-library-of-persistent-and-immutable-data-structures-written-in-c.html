<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/arximboldi/immer">Original</a>
    <h1>Immer â€“ A library of persistent and immutable data structures written in C&#43;&#43;</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><a href="https://github.com/arximboldi/immer/actions?query=workflow%3Atest+branch%3Amaster"><img alt="GitHub Actions Badge" src="https://github.com/arximboldi/immer/workflows/test/badge.svg"/>
</a>
<a href="https://codecov.io/gh/arximboldi/immer" rel="nofollow"><img alt="CodeCov Badge" src="https://camo.githubusercontent.com/4a51e35b7b4392bdfc5abdcc37bc114c6dae8ba9d0660694985fc66faf5adc94/68747470733a2f2f636f6465636f762e696f2f67682f617278696d626f6c64692f696d6d65722f6272616e63682f6d61737465722f67726170682f62616467652e737667" data-canonical-src="https://codecov.io/gh/arximboldi/immer/branch/master/graph/badge.svg"/>
</a>
<a href="https://sinusoid.al" rel="nofollow"><img alt="Sinusoidal Engineering badge" src="https://camo.githubusercontent.com/06533a8c62f0ed2ed46bed9910f5d7d22d3ccab89f68223d972c3e354f2c7f77/68747470733a2f2f63646e2e7261776769742e636f6d2f617278696d626f6c64692f696d6d65722f333535613131333738326165646332656132323436333434343031343830393236396332333736642f646f632f5f7374617469632f73696e75736f6964616c2d62616467652e737667" data-canonical-src="https://cdn.rawgit.com/arximboldi/immer/355a113782aedc2ea22463444014809269c2376d/doc/_static/sinusoidal-badge.svg"/>
</a>
<themed-picture data-catalyst-inline="true"><picture>
  <source media="(prefers-color-scheme: dark)" srcset="https://camo.githubusercontent.com/2a434b1602aa4ce55eebec03214c0e476ff3d37813bfeaca86041a3a0b6b24f9/68747470733a2f2f63646e2e7261776769742e636f6d2f617278696d626f6c64692f696d6d65722f333838383137306432343733353963633039303565656435343863643436383937636165663066342f646f632f5f7374617469632f6c6f676f2d626c61636b2e737667" data-canonical-src="https://cdn.rawgit.com/arximboldi/immer/3888170d247359cc0905eed548cd46897caef0f4/doc/_static/logo-black.svg"/>
  <img width="100%" src="https://camo.githubusercontent.com/8d91dae426ae4703f6d3991ed9a0ece10f1aef8cd2bc70bbfbeb57767fe8c41c/68747470733a2f2f63646e2e7261776769742e636f6d2f617278696d626f6c64692f696d6d65722f333838383137306432343733353963633039303565656435343863643436383937636165663066342f646f632f5f7374617469632f6c6f676f2d66726f6e742e737667" alt="Logotype" data-canonical-src="https://cdn.rawgit.com/arximboldi/immer/3888170d247359cc0905eed548cd46897caef0f4/doc/_static/logo-front.svg"/>
</picture></themed-picture><p dir="auto"><strong>immer</strong> is a library of <a href="https://en.wikipedia.org/wiki/Persistent_data_structure" rel="nofollow">persistent</a> and <a href="https://en.wikipedia.org/wiki/Immutable_object" rel="nofollow">immutable</a> data structures
written in C++.  These enable whole new kinds of architectures for
interactive and concurrent programs of striking simplicity,
correctness, and performance.</p>
<ul dir="auto">
<li><strong>Documentation</strong> (<a href="https://sinusoid.es/immer/#contents" rel="nofollow">Contents</a>)</li>
<li><strong>Code</strong> (<a href="https://github.com/arximboldi/immer">GitHub</a>)</li>
<li><strong>CppCon&#39;17 Talk</strong>: <em>Postmodern Immutable Data Structures</em> (<a href="https://www.youtube.com/watch?v=sPhpelUfu8Q" rel="nofollow">YouTube</a>, <a href="https://sinusoid.es/talks/immer-cppcon17" rel="nofollow">Slides</a>)</li>
<li><strong>ICFP&#39;17 Paper</strong>: <em>Persistence for the masses</em> (<a href="https://public.sinusoid.es/misc/immer/immer-icfp17.pdf" rel="nofollow">Preprint</a>)</li>
</ul>
<blockquote>
<a href="https://www.patreon.com/sinusoidal" rel="nofollow">
    <img src="https://camo.githubusercontent.com/90f16065b192a0a30d112ee8aba8acf09817431bb831beaa3caf95cc784621da/68747470733a2f2f63646e2e7261776769742e636f6d2f617278696d626f6c64692f696d6d65722f6d61737465722f646f632f5f7374617469632f70617472656f6e2e737667" data-canonical-src="https://cdn.rawgit.com/arximboldi/immer/master/doc/_static/patreon.svg"/>
</a><p dir="auto">This library has full months of <em>pro bono</em> research and development
invested in it.  This is just the first step in a long-term vision
of making interactive and concurrent C++ programs easier to
write. <strong>Put your logo here and help this project&#39;s long term
sustainability by buying a sponsorship package:</strong> <a href="mailto:immer@sinusoid.al">immer@sinusoid.al</a></p>
</blockquote>
<a name="user-content-example"></a>

<div dir="auto" data-snippet-clipboard-copy-content="#include &lt;immer/vector.hpp&gt;
int main()
{
    const auto v0 = immer::vector&lt;int&gt;{};
    const auto v1 = v0.push_back(13);
    assert(v0.size() == 0 &amp;&amp; v1.size() == 1 &amp;&amp; v1[0] == 13);

    const auto v2 = v1.set(0, 42);
    assert(v1[0] == 13 &amp;&amp; v2[0] == 42);
}"><pre>#<span>include</span> <span><span>&lt;</span>immer/vector.hpp<span>&gt;</span></span>
<span>int</span> <span>main</span>()
{
    <span>const</span> <span>auto</span> v0 = immer::vector&lt;<span>int</span>&gt;{};
    <span>const</span> <span>auto</span> v1 = v0.<span>push_back</span>(<span>13</span>);
    <span>assert</span>(v0.<span>size</span>() == <span>0</span> &amp;&amp; v1.<span>size</span>() == <span>1</span> &amp;&amp; v1[<span>0</span>] == <span>13</span>);

    <span>const</span> <span>auto</span> v2 = v1.<span>set</span>(<span>0</span>, <span>42</span>);
    <span>assert</span>(v1[<span>0</span>] == <span>13</span> &amp;&amp; v2[<span>0</span>] == <span>42</span>);
}</pre></div>
<blockquote>
For a <strong>complete example</strong> check <a href="https://github.com/arximboldi/ewig">Ewig, a simple didactic
text-editor</a> built with this
library.  You may also wanna check <a href="https://github.com/arximboldi/lager">Lager, a Redux-like library</a> for writing interactive
software in C++ using a value-oriented design.</blockquote>
<a name="user-content-why"></a>

<p dir="auto">In the last few years, there has been a growing interest in immutable
data structures, motivated by the horizontal scaling of our processing
power and the ubiquity of highly interactive systems.  Languages like
<a href="http://clojure.org/reference/data_structures" rel="nofollow">Clojure</a> and <a href="http://docs.scala-lang.org/overviews/collections/overview.html" rel="nofollow">Scala</a> provide them by default, and implementations
for JavaScript like <a href="https://swannodette.github.io/mori/" rel="nofollow">Mori</a> and <a href="https://github.com/facebook/immutable-js">Immutable.js</a> are widely used,
specially in combination with modern UI frameworks like <a href="https://facebook.github.io/react/" rel="nofollow">React</a>.</p>
<dl>
<dt>Interactivity</dt>
<dd>Thanks to <em>persistence</em> and <em>structural sharing</em>, new values can
be efficiently compared with old ones.  This enables simpler ways of
<em>reasoning about change</em> that sit at the core of modern
interactive systems programming paradigms like <a href="https://en.wikipedia.org/wiki/Reactive_programming" rel="nofollow">reactive
programming</a>.</dd>
<dt>Concurrency</dt>
<dd>Passing immutable data structures by value does not need to copy
any data. In the absence of mutation, data can be safely read
from multiple concurrent processes, and enable concurrency
patterns like <a href="https://blog.golang.org/share-memory-by-communicating" rel="nofollow">share by communicating</a> efficiently.</dd>
<dt>Parallelism</dt>
<dd>Some recent immutable data structures have interesting properties
like <tt>O(log(n))</tt> concatenation, which enable new kinds of
<a href="http://docs.scala-lang.org/overviews/parallel-collections/overview.html" rel="nofollow">parallelization algorithms</a>.</dd>
</dl>
<a name="user-content-features"></a>

<dl>
<dt>Idiomatic</dt>
<dd>This library doesn&#39;t pretend that it is written in Haskell.  It
leverages features from recent standards to provide an API that is
both efficient and natural for a C++ developer.</dd>
<dt>Performant</dt>
<dd>You use C++ because you need this.  <em>Immer</em> implements state of
the art data structures with efficient cache utilization and have
been proven production ready in other languages.  It also includes
our own improvements over that are only possible because of the
C++&#39;s ability to abstract over memory layout.  We monitor the
performance impact of every change by collecting <a href="https://public.sinusoid.es/misc/immer/reports/" rel="nofollow">benchmark
results</a> directly from CI.</dd>
</dl>
<dl>
<dt>Customizable</dt>
<dd>We leverage templates and <a href="https://en.wikipedia.org/wiki/Policy-based_design" rel="nofollow">policy-based design</a> to build
data-structures that can be adapted to work efficiently for
various purposes and architectures, for example, by choosing among
various memory management strategies.  This turns
<em>immer</em> into a good foundation to provide immutable data
structures to higher level languages with a C runtime, like
<a href="https://www.python.org/" rel="nofollow">Python</a> or <a href="https://www.gnu.org/software/guile/" rel="nofollow">Guile</a>.</dd>
</dl>
<a name="user-content-dependencies"></a>

<p dir="auto">This library is written in <strong>C++14</strong> and a compliant compiler is
necessary.  It is <a href="https://travis-ci.org/arximboldi/immer" rel="nofollow">continuously tested</a> with Clang 3.8 and GCC 6, but
it might work with other compilers and versions.</p>
<p dir="auto">No external library is necessary and there are no other requirements.</p>
<a name="user-content-usage"></a>

<p dir="auto">This is a <strong>header only</strong> library.  You can just copy the <code>immer</code>
subfolder somewhere in your <em>include path</em>.</p>
<p dir="auto">If you are using the <a href="https://nixos.org/nix" rel="nofollow">Nix package manager</a> (we strongly recommend it)
you can just:</p>
<pre>nix-env -if https://github.com/arximboldi/immer/archive/master.tar.gz
</pre>
<p dir="auto">Alternatively, you can use <a href="https://cmake.org/" rel="nofollow">CMake</a> to install the library in your
system once you have manually cloned the repository:</p>
<pre>mkdir -p build &amp;&amp; cd build
cmake .. &amp;&amp; sudo make install
</pre>
<a name="user-content-installation"></a>

<a name="user-content-using-vcpkg"></a>

<p dir="auto">You can download and install immer using the <a href="https://github.com/Microsoft/vcpkg">vcpkg</a> dependency manager:</p>
<pre>git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
./bootstrap-vcpkg.sh
./vcpkg integrate install
./vcpkg install immer
</pre>
<p dir="auto">The immer port in vcpkg is kept up to date by Microsoft team members and community contributors. If the version is out of date, please <a href="https://github.com/Microsoft/vcpkg">create an issue or pull request</a> on the vcpkg repository.</p>
<a name="user-content-using-build2"></a>

<p dir="auto">For projects using <a href="https://build2.org" rel="nofollow">build2</a>, ensure your project is setup to use <a href="https://cppget.org" rel="nofollow">cppget.org</a> as a package repository, then add immer as a dependency in your project&#39;s <code>manifest</code> file:</p>
<pre>depends: libimmer ^0.8.1
</pre>
<p dir="auto">Then in your <code>buildfile</code>, import and link against the library:</p>
<pre>import libs = libimmer%lib{immer}

exe{hello}: {hxx cxx}{**} $libs
</pre>
<p dir="auto">The immer package in build2 is kept up to date by community contributors. If the version is out of date, please <a href="https://github.com/build2-packaging/immer">create an issue or pull request</a> on immer build2 package repository.</p>
<a name="user-content-development"></a>

<p dir="auto">In order to develop the library, you will need to compile and run the
examples, tests and benchmarks.  These require some additional tools.
The easiest way to install them is by using the <a href="https://nixos.org/nix" rel="nofollow">Nix package
manager</a>.  At the root of the repository just type:</p>
<pre>nix-shell
</pre>
<p dir="auto">This will download all required dependencies and create an isolated
environment in which you can use these dependencies, without polluting
your system.</p>
<p dir="auto">Then you can proceed to generate a development project using <a href="https://cmake.org/" rel="nofollow">CMake</a>:</p>
<pre>mkdir build &amp;&amp; cd build
cmake ..
</pre>
<p dir="auto">From then on, one may build and run all tests by doing:</p>
<pre>make check
</pre>
<p dir="auto">In order to build and run all benchmarks when running <code>make check</code>,
run <code>cmake</code> again with the option <code>-DCHECK_BENCHMARKS=1</code>.  The
results of running the benchmarks will be saved to a folder
<code>reports/</code> in the project root.</p>
<a name="user-content-license"></a>

<p dir="auto"><strong>This software is licensed under the Boost Software License 1.0</strong>.</p>
<a href="http://boost.org/LICENSE_1_0.txt" rel="nofollow"><img alt="Boost logo" src="https://camo.githubusercontent.com/73e49074cffc8e70b1f8b9bbe54e732ada99e02606ffa1fef76315c0b5399733/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f632f63642f426f6f73742e706e67" data-canonical-src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Boost.png"/></a>
<p dir="auto">The full text of the license is can be accessed <a href="http://boost.org/LICENSE_1_0.txt" rel="nofollow">via this link</a> and is also included
in the <code>LICENSE</code> file of this software package.</p>

</article></div></div>
  </body>
</html>
