<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.clearskyinstitute.com/ham/HamClock/">Original</a>
    <h1>HamClock – a real time space weather dashboard</h1>
    
    <div id="readability-page-1" class="page"><div id="tab-faq">

        <!-- accordions. all must be in one div, then each must be surrounded by h3/div -->

        <div id="accordion-faq">

        <h3>
             How do I build the ESP8266 software?
        </h3>
        <p>
        See the ESP8266 Notes tab.

        </p>




        <h3>
             How do I build the Desktop software?
        </h3>
        <p>
        See the Desktop tab.

        </p>





        <h3>
             How do I uninstall HamClock?
        </h3>
        <div>

        <p>
        Assuming you only ever installed HamClock according to my instructions in the Desktop tab,
        you can remove all traces by typing the following two commands in a terminal or ssh session:
    </p><pre>    sudo sh -c &#39;rm -fr ~/.hamclock ~/ESPHamClock* /usr/local/bin/hamclock*&#39;
    rm -fr ~/.hamclock ~/ESPHamClock* ~/.config/autostart/hamclock.desktop ~/Desktop/hamclock.desktop
    </pre>

        </div>





        <h3>
             I&#39;m new to Raspberry Pi -- how do I get started?
        </h3>
        <div>

        <ol>
            <li>If you are absolutely completely new, start at 
                <a target="_blank" href="https://www.raspberrypi.org/">raspberrypi.org</a>.
            </li>

            <li>If you don&#39;t have a Pi yet, I would start with a model 4b with 1 GB RAM.
            The smaller Pi models such as Zero W will work, but the 4b is definitely more responsive.
            Many places sell Pis or you can see the official list of vendors 
            <a target="_blank" href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/">here</a>.
            Pis are a little hard to find now but a current list of vendors with stock is
            <a target="_blank" href="https://rpilocator.com/">here</a>.
            </li>

            <li>
            For a display you can use a small touch screen such as 
            <a target="_blank" href="https://www.amazon.com/Raspberry-Pi-Official-Touch-Screen/dp/B073S3LQ6Q/">
            the official Pi 7&#34; LCD</a>.
            Or you can use any HDMI LCD display you might have or buy one such as 
            <a target="_blank" href="https://www.amazon.com/KOORUI-Business-Computer-Monitor-Display/dp/B09VD9P2Q3">this one</a>
            with which you will also need a keyboard, mouse and perhaps 
            a
            <a target="_blank" href="https://www.amazon.com/UGREEN-Adapter-Compatible-Raspberry-ZenBook/dp/B00B2HORKE/">micro HDMI adaptor</a>.
            </li>


            <li>If you don&#39;t already have one, buy a microSD card such as 
                <a target="_blank" href="https://www.amazon.com/dp/B07G3GMRYF/">this one</a>.
            </li>

            <li>Insert the microSD card into your desktop computer.
            If your computer does not have uSD port, you can try a USB adaptor such as
            <a target="_blank" href="https://www.amazon.com/Vanja-Adapter-Portable-Memory-Reader/dp/B00W02VHM6">this one</a>.
            </li>

            <li>Download and install the
                <a target="_blank" href="https://www.raspberrypi.org/software/">Raspberry Pi Imager</a>.
            </li>

            <li>Start the program and burn your microSD card with RPi operating system as follows:
                <ol>
                    <li>click <b>Choose OS</b>
                    </li><li>select the first choice on top
                    </li><li>click <b>Choose Storage</b>
                    </li><li>select the microSD you just inserted
                    </li><li>click <b>Write</b>
                    </li><li>wait for it to complete writing and verifying
                    </li><li>remove the microSD card when it says it is finished
                </li></ol>
            </li>
            <li>Insert the microSD card into your RPi
            </li>
            <li>Connect a keyboard, mouse, ethernet and display to your RPi
            </li>
            <li>Connect power to the RPi
            </li>
            <li>After a minute or so you will see the Desktop
            </li>
            <li>Work through the setup menus
            </li>
            <li>Start a browser by clicking the red raspberry in the upper left corner then Internet ⇒ Chromium
            </li>
            <li>Go to my project web page at
                <a target="_blank" href="https://clearskyinstitute.com/ham/HamClock">
                    https://clearskyinstitute.com/ham/HamClock
                </a>
            </li>
            <li>Start a terminal by clicking the red raspberry again then Accessories ⇒ Terminal
            </li>
            <li>Follow the instructions on my Desktop tab
            </li>
            <li>Read the User Guide to get the most from HamClock
            </li>
        </ol>


        </div>







        <h3>
             What can I do if a self-update reports FAIL with a message about SSL certificate?
        </h3>
        <div>

        <p>
        This error means your system is using a version of openssl (used by curl) that is older than 1.1.1.
        This occurs because a prominent high level SSL certificate expired on Sept 30 2021 and 
        openssl was updated to use the replacement certificate.
        You can find your version by opening a terminal command line and typing this command:
</p><pre>        openssl version
</pre>
        <p>
        To update openssl on an RPi you can try
</p><pre>        sudo apt upgrade openssl
</pre>
        <p>
        To update on macOS try these possibilities:

            </p><ul>
                <li>If you use macports update openssl as follows:
                <pre>    sudo port upgrade openssl
                </pre>
                (be sure /opt/local/bin is before /usr/bin in your PATH)
                </li>
                <li>or try this direct method (suggested by AL7CR):
                    <ul>
                        <li>Rename /etc/ssl/cert.pem to something else such as /etc/ssl/cert.pem.org </li>
                        <li>Download the latest cacert.pem from
                            <a target="_blank" href="https://curl.se/docs/caextract.html">
                                    https://curl.se/docs/caextract.html </a>
                            </li>
                        <li>Rename it to cert.pem </li>
                        <li>Copy it to /etc/ssl/cert.pem </li>
                    </ul>
                </li>
            </ul>

        <p>
        After the update, repeat the openssl command and you should see version 1.1.1 or larger.
        If so, repeat your HamClock version update and it should work.


        </p></div>  <!-- -k -->






        <h3>
             HamClock is displaying a big black screen with a cryptic message, what do I do?
        </h3>
        <div>

        <p>
        It depends on the message.

        </p><ul>
            <li>
                <code>permission error</code>
                </li>

            <li>
                <code>Address already in use</code>
                </li>

            <li>
                <code>sh: 0: illegal option -p</code>
                </li>

            <li>
                <code>No memory for satellite</code>
                </li>

            <li>
                <code>time is running backwards</code>
                </li>

            <li>
                Something else?

                <p>
                Copy it down exactly and 
                <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">email it to me</a>.
            </p></li>

        </ul>

        </div>





        <h3>
             Can HamClock run on Windows?
        </h3>
        <div>

        <p>
        No, you can&#39;t <i>run</i> it natively on Windows but you can <i>use</i> it
        if it is already running somewhere else on your network by
        using any desktop browser.
        See FAQ 14 about the hamclock web interface for details. 

        </p><p>
        For another approach, see the User Contrib tab for a suggestion on how to use WSL.

        </p></div>  <!-- run on windows -->




        <h3>
             Can HamClock run on iPhone or iPad or Android?
        </h3>
        <p>
        Not natively but it does seem to work under UserLand.
        See User Contrib 16 for more information.

        </p>  <!-- run on iphone -->


        <h3>
             How does HamClock compare to Geochron 4k?
        </h3>
        <div>

        <p>
        I do not have a
        <a target="_blank" href="https://www.geochron.com/4k">Geochron 4K</a>
        but from its literature I can think of the following
        functions related to ham radio that HamClock offers but Geochron does not: 

        </p><ol>
            <li>customized VOACAP predictions for MUF, TOA and path reliability</li>
            <li>trend plots and predictions for solar flux, solar wind, sunspot, XRay, Kp index and DRAP</li>
            <li>short and long path antenna beam heading and distance to any DX location</li>
            <li>display future satellite rise/set times and next overhead pass (not just global track)</li>
            <li>hamlib and flrig rig and rotator control for chasing DX spots</li>
            <li>display DE time in digital, analog or calendar formats </li>
            <li>list upcoming weekend contests</li>
            <li>azimuthal world maps centered on any location</li>
            <li>local weather, time, grid square, prefix and sun rise/set times at any DX location</li>
            <li>live display of DX Cluster, WSJT-X and JTDX FT8 contacts</li>
            <li>live solar images from Solar Dynamics Observatory and STEREO-A</li>
            <li>live quantitative Lunar data and EME planning tool</li>
            <li>live NCDXF beacon location, time and frequency schedule</li>
            <li>live RSS feeds from popular ham web sites</li>
            <li>live listing of POTA and SOTA activators</li>
            <li>live D layer absorption map </li>
            <li>live auroral map </li>
            <li>several map projections including Azimuthal, Mercator and Robinson</li>
            <li>Display headings from either true north or magnetic north</li>
            <li>Optional time scales including sidereal, Julian date and UNIX </li>
            <li>stopwatch and station ID count-down timer with optional color LED and switch control </li>
            <li>adjust time forward or back to explore Moon, gray line, satellite orbits etc</li>
            <li>Elecraft KX3 transceiver frequency control from DX Cluster spot</li>
            <li>2 BME280 sensors for temperature, pressure and humidity real-time and 25 hour trend plots</li>
            <li>Personalized WSPR, PSKReporter and RBN spot maps </li>
            <li>photosensor to adjust display brightness with changes in room lighting</li>
            <li>&#34;On The Air&#34; indicator controlled by GPIO pin from radio </li>
            <li>RESTful API remote control functions from any browser or curl command line</li>
            <li>can display on and be controlled from any web browser</li>
            <li>can become just a simple old fashioned time-and-temperature clock</li>
        </ol>

        <p>
        Conversely, Geochron can do things HamClock can not. These items are certainly interesting
        but to me they do not seem specifically useful to the typical amateur radio operator:

        </p><ol>
            <li>air and sea traffic</li>
            <li>pollution, population and pandemic maps</li>
        </ol>

        <p>
        I have nothing against Geochron. If I have misrepresented Geochron in any way, please
        <a href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">tell me how</a>
        and I will correct immediately.

        </p></div>





        <h3>
             How does the DX Cluster feature work?
        </h3>
        <div>

        <ol>
            <li>
                In Setup page 2, tap the <i>Cluster?</i> button then set the internet <code>host</code>
                name and <code>port</code> number for your desired node.
                A good list is <a target="_blank" href="https://www.ng3k.com/Misc/cluster.html">here</a>.
                HamClock supports DX Spider and AR-Cluster nodes.
                Not all are active so if the connection fails, try another.
                If no port is listed, try the usual default of 7300 for Spider and 7373 for AR-Cluster.

                <p>Also on Setup page 2:
                </p><ol>
                    <li>
                        You may enter a login different from your call, such as WB0OEW-1.
                        It is important to use unique logins for each program you use at the same time
                        as HamClock which are connecting to the same node.
                        If left blank, HamClock will use your call sign.
                    </li>
                    <li>
                        You can set one or more prefixes in the Watch list, separated by blanks or commas.
                        When a spot arrives starting any of these it will be highlighted in the list.
                    </li>
                    <li>
                        You can enter up to four arbitrary cluster commands.
                        Those commands that are set <b>On</b> will be sent one time when HamClock
                        logs into the node.
                        HamClock will store all the commands for you, whether they are <b>On</b> or <b>Off</b>.
                        Use the commands appropriate to the type of node you select.
                        An intro to Spider commands is
                        <a target="_blank" href="http://www.dxcluster.org/main/filtering_en.html">here</a>
                        and for AR-Cluster
                        <a target="_blank" href="https://www.w9az.com/cluster/ArcFilters.htm">here</a>.

                        <p>
                        It is important to understand that cluster commands are saved on the node and remain
                        in effect for the given login name even if you log out and log back in.
                        It is not enough to just not send them to get the opposite effect.
                        For example, suppose you want to reject all spots of US amateurs, you could
                        enter this (spider) command and set it <b>On</b>:
            </p><pre>            rej/spot 0 call_dxcc 226
            </pre>
                        Because it is set <b>On</b> HamClock will send this command when it logs in. 
                        Now suppose you restart HamClock and just turn this command <b>Off</b>.
                        This tells HamClock to not send this command when it logs in.
                        That&#39;s fine, but since the cluster remembers your settings across logins,
                        the filter will still remain in effect!
                        To turn off this filter, you need another command to explicitly clear it, such as
            <pre>            clear/spot 0
            </pre>
                        Thus, it&#39;s a good idea to create pairs of commands, one to engage and one to cancel
                        each filter type.
                    </li>
                </ol>
            </li><li>
                While in Setup, go to page 5 and choose the desired scrolling direction.
                You can also control whether spots are labeled on the map as complete call signs or
                just the prefix and whether and how the full path is drawn.
                Note that only the DX side is labeled since it rarely matters who exactly made the spot,
                just where.
            </li>
            <li>
                Once HamClock is up and running, select the DX Cluster data pane in either of the two right
                panes.
                The name of the host will be shown in yellow while a connection attempt is in progress,
                then it will turn green when the connection is established.
                If the connection fails, it will show an error in red.
            </li>
            <li>
                Once connected, just leave it run, new spots will be listed, scrolling when full.
                Tap on a spot to set HamClock&#39;s DX to that location.
                The tap can also set the frequency of your radio, see the User Guide for details.
            </li>
            <li>
                HamClock stores several more spots than those listed; use the Up and Down arrows to
                scroll backwards and forwards through time.
                HamClock always adds new spots to the end of the list, but if you have scrolled away
                HamClock will <b>not</b> automatically scroll back to the beginning to show them.
                To ensure you will see new spots immediately, just make sure the opposing arrow is not drawn.
            </li>
            <li>
                <span> Beware: </span>
                HamClock stays logged into the cluster node with your call sign as long as the DX Cluster
                data pane is visible. So do not use this feature if you want to use the unassisted
                category in a contest -- some judges do check!
            </li>
            <li>
                HamClock can also use the DX Cluster pane to communicate with WSJT-X or JTDX.
                Instead of showing cluster spots, it shows each FT8 station you log.
                Details for doing this are in the User Guide.
            </li>
            <li>
                HamClock enforces a limit of 10 server disconnects per hour.
                This was implemented at the request of cluster sysops to
                prevent HamClock repeating connection attempts endlessly do to the following situations:
                <ol>
                    <li>
                        You have multiple software programs connecting to the same cluster using the same login.
                        <p>
                        Clusters reject multiple simultaneous logins from the same callsign.
                        So when HamClock connects with the same call in use elsewhere,
                        the node disconnects, HamClock retries and this repeats continuously.
                        The limit of 10 now prevents this.
                        The solution is to use a unique suffix for each program,
                        such as WB0OEW-1 and WB0OEW-2.
                    </p></li>
                    <li>
                        You have set some nonsense cluster login, such as all blanks or NOCALL.
                        <p>
                        The nodes also reject these, resulting in the same reconnect looping situation.
                        The solution is to enter a valid call sign, perhaps with a suffix as above.
                    </p></li>
                </ol>
            </li>
        </ol>

        </div>





        <h3>
             Can I make different sizes other than those in the Makefile?
        </h3>
        <div>

        <p>
        No, it&#39;s not that simple.
        Each size requires its own custom fonts, graphics symbols, maps and images
        in order to take proper advantage of the different resolutions.
        Otherwise, these would be very pixelated if they were just multiples of the base images.
        Plus, if the aspect ratio changes, the layout would need to be rebalanced.
        This is why all sizes are multiples of 2 of the base size in order to maintain the
        same layout proportions.

        </p><p>
        Thus, HamClock can only be built for sizes 800x480, 1600x960, 2400xx1440 and 3200x1920.

        </p></div>   <!-- resized makes -->










        <h3>
             What is <b>xrandr</b>, or How do I get rid of the full-screen black border?
        </h3>
        <div>

        <p>
        <i>xrandr is dying an agonizing death, consider using a browser instead, see FAQ 14.
        </i>

        </p><p>
        Even though full screen mode uses the entire screen, HamClock still only uses the pixels
        specified in the make command size, filling the remaining space with black.
        With the GUI configuration (<i>not fb0</i>) you can try a command line program called
        <a target="_blank" href="https://www.commandlinux.com/man-page/man1/xrandr.1.html">xrandr</a>
        to expand HamClock to fill the screen by changing the effective display resolution to match HamClock.

        </p><p>
        Xrandr works by changing how the X server maps pixels to the display hardware.
        It&#39;s easy to try and undo if you decide you don&#39;t like it.

        </p><p>
        For example, my display is 1920 x 1080.
        HamClock can be built for sizes 800x480, 1600x960, 2400xx1440 and 3200x1920.
        Thus, the largest I can build HamClock that will fit is 1600 x 960.
        If I run this size with the Full screen option in setup set to Yes,
        HamClock will still be that size but will fill the surrounding gaps with black.
        With xrandr one can expand HamClock to fill the screen and eliminate those gaps.

        </p><p>
        To try it on a Pi,
        log in from some other computer with ssh (or putty) so we aren&#39;t trying to adjust the same
        screen we are using for commands.
        Run the following command while HamClock is running in its full screen mode:

        </p><pre>        xrandr --output HDMI-1 --scale-from 1600x960 --display :0
        </pre>

        <p>
        That&#39;s it, the effect should be immediate but ...

        </p><ul>

            <li>
                If xrandr gives an error about bad parameter match, try changing 
                <code>scale-from</code> a little.
            </li>

            <li>
                If at any time you want to go back to normal run xrandr again with your original screen size:
<pre>xrandr --output HDMI-1 --scale-from 1920x1080 --display :0
</pre>

            </li>

            <li>
                The xrandr change does not survive logging out or rebooting.
                To make the change permanent, put the exact xrandr command you liked in the file
                <code>~/.xsessionrc</code> using your favorite text editor.
            </li>

        </ul>

        <p>
        On RPi version <code>bookworm</code> things are different because the default window system
        has become Wayland.
        You can either use <code>raspi-config</code> to change back to X11 so the above will work,
        or you can use Wayland&#39;s alternative command called <code>wlr-randr</code> as follows:

        </p><ol>

            <li>ssh into the pi to which the display is connected.
            </li>

            <li>type in the command:
<pre>export WAYLAND_DISPLAY=wayland-1
</pre>
            </li>

            <li>run <code>wlr-randr</code> with no arguments to get a list of supported sizes.
            </li>

            <li>look through the list and find the smallest size that is larger than your hamclock.
            Also note the name of the display, as reported on the first line.
            </li>

            <li>run the command again but this time adding more arguments for your chosen values.
                For example:
<pre>wlr-randr --output HDMI-A-1 --mode 1680x1050
</pre>
            </li>

            <li>The effect will only last until you log out.
                To make the change permanent, edit the file <code>~/.config/wayfire.ini</code> and
                add two lines at the bottom; again for the same example:
<pre>[output]
mode = 1680x1050
</pre>
            </li>
        </ol>


        <p>
        xrandr works on macOS too with XQuartz but it only allows choosing from a fixed set of sizes. 
        So you can still reduce the border but you may not be able to eliminate it altogether.
        The general idea is to use the following procedure, again adjust sizes to fit your situation:

        </p><ol>
            <li>Run xrandr with no arguments for a list of available sizes; pick one at or slightly larger than your hamclock.</li>
            <li>Start HamClock and enter Setup.</li>
            <li>Go to Page 5, click Full Screen to Yes; now just leave it there for the moment and go to the next step.</li>
            <li>In another terminal run <code>xrandr --size 1600x1200</code>. You&#39;ll see the hamclock size jump.</li>
            <li>Now back in HamClock, click Done and HamClock should now occupy almost the entire screen.</li>
            <li>To get your screen back to normal, hold HamClock&#39;s padlock for 3 seconds, then choose exit.</li>
            <li>If you get really stuck in full-screen mode, type Option-Command-A to force XQuartz back to normal.</li>
        </ol>


        </div>   <!-- xrandr -->






        <h3>
             Can you bring back the old VOACAP data pane? I liked it much better.
        </h3>
        <div>

        <p>
        In a word, no. I have two reasons.

        </p><p>
        One is the previous version provided precision far beyond what is real.
        The VOACAP model is based on monthly averages, so several tens of percentage point
        changes can easily occur due to solar flares, geomagnetic disturbances
        and other effects that happen very rapidly.
        So although the model does generate percentage values,
        they don&#39;t really have as much meaning as the precision implies.
        I think of the VOACAP model as similar to climate.
        As the saying goes &#34;climate is what you expect, weather is what you get&#34;.

        </p><p>
        The second reason is I think seeing the daily trends adds greatly to the value of the display.
        For example, at a glance you can tell whether conditions will improve or get worse in the next
        few hours, or quickly pick a time of day that offers the best chances to contact a given location.
        These trends and planning capabilities were not possible when only the present hour values were shown.

        </p><p>
        Having said this, I will allow that it was nice to see just the current conditions at a glance.
        This is why I added a small marker below the new graph to show the current time.
        This way, you can just scan your eye up that column to see basically the same information
        as presented previously, with precision that represents reality just as well.
        Granted they are not numbers, but the color choices remain the same as before:
        red &lt; 33%, yellow &lt; 66% and green above 66%, with one change that I now make &lt; 10% black.

        </p><p>
        Give it more time and perhaps you will come to like the new graph as much as I do.


        </p></div>   <!-- voacap -->






        <h3>
             Does HamClock have a web interface?
        </h3>
        <div>

        <p>
        <i>If you are looking for the RESTful API command interface, see FAQ 42.</i>

        </p><p>
        Yes.
        Use a browser to load the page <code>live.html</code> on port 8081 from the host running hamclock.
        For example, if HamClock reports its local IP as 192.168.7.101, then enter this
        URL to run it from your browser:
        </p><pre>        http://192.168.7.101:8081/live.html
        </pre>

        <p>
        Some notes:
        </p><ul>
            <li> HamClock will be centered if smaller than the browser window, or shrunk to fit if the browser
                 window is smaller.
                 If the image looks chunky, build HamClock at a larger resolution.
            </li>
            <li> Keyboard and mouse input work if you first click on
                 the HamClock window to give it focus.
            </li>
            <li> Multiple simultaneous browser connections will share the same instance,
                 they all have control and all will stay in sync with each other.
            </li>
            <li> Setup page 5 <code>Full screen web?</code>
                 is supported but won&#39;t engage until the user makes at least one mouse tap.
                 This is not a bug in HamClock, this is because of a
                 <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Security/User_activation">web standard</a>
                 requirement to prevent malicious software from taking over the
                 screen without explicit user action to do so.
            </li>
            <li> To reset a browser session for any reason, refresh the page.
                 This will undo the full screen option until you click HamClock again (see previous).
            </li>
            <li> Screen blanking and timed on/off are not supported -- use your browser host&#39;s facility.
            </li>
            <li> If using full screen, the options to shutdown, restart etc apply to the computer
                 running HamClock, not the computer displaying it in a browser.
            </li>
            <li> If bandwidth is a concern, the lowest bandwidth occurs when
                 HamClock is made 800x480 and the map Night option is off.
            </li>
            <li> If unintended or malicious input is a concern,
                 connect instead to port 8082 which provides a read-only interface
                 or add passwords with -p per FAQ 52.
            </li>
        </ul>


        <p>
        Why would you use this?
        </p><ul>
            <li>
                It&#39;s an easier alternative to VNC or remote X servers.
            </li>
            <li>
                It&#39;s an easier way to accomplish full screen compared to using xrandr.
            </li>
            <li>
                It allows displaying one HamClock on multiple monitors simultaneously for, say,
                a contest group.
                <p>
                To run multiple <i>independent</i> instances from the same
                URL see the User Contrib 12.
            
            </p></li><li>
                You can see and control HamClock with your phone (if you dare).
            </li>
            <li>
                It&#39;s the easiest way to run HamClock on a headless Pi.
                To try this, make one of the <code>hamclock-web-XXX</code> versions and run as follows:
                (type <code>make help</code> for a complete list)
<pre>    cd ~/ESPHamClock
    make -j 4 hamclock-web-1600x960
    sudo make install
    hamclock &amp;
</pre>
                You won&#39;t see anything on your screen now, but browse to the host running
                HamClock as described above and <i>voilà!</i> you will find a live HamClock.
                <p>
                To start this automatically on each boot, run <code>crontab -e</code> then
                add the following as the last line:
</p><pre>@reboot /usr/local/bin/hamclock
</pre>
            </li>

        </ul>

        <p>
        Can I change the connection port number?

        </p><ul>
            <li>
                 Yes, by using the -w command line option.
                 For example, to change to port 7000, run hamclock as follows:

<pre>    hamclock -w 7000
</pre>

            </li>
        </ul>

        <p>
        Can I connect with https?

        </p><p>
        Not directly, HamClock only supports http connections.
        But if you have administrative access to a web site running apache,
        you can set up a reverse https proxy as follows:

        </p><ul>

            <li>
            You must use HamClock version 2.96 or newer.
            </li>

            <li>
            Find the apache configuration file containing the section for your VirtualHost *:443.
            On Ubuntu, it&#39;s somewhere in <code>/etc/apache2</code>.
            </li>

            <li>
            Within this section insert the following:
<pre>    # allow specific https access to http hamclock
    ProxyPass  /hamclock-live/live.html   http://127.0.0.1:8081/live.html
    ProxyPass  /hamclock-live/favicon.ico http://127.0.0.1:8081/favicon.ico
    ProxyPass  /hamclock-live/live-ws     ws://127.0.0.1:8081/live-ws
</pre>
            Use port 8082 for read-only access.
            </li>

            <li>
            Make sure a few modules are loaded:
<pre>    a2enmod proxy proxy_wstunnel proxy_http
</pre>
            </li>

            <li>
            Restart apache, typically with <code>apachectl graceful</code>.
            </li>

            <li>
            Build and run hamclock on the same machine running apache.
            </li>

            <li>
            Now use any browser and surf to your new HamClock web site with the following URL:
<pre>    https://&lt;your_web_site&gt;/hamclock-live/live.html
</pre>
            </li>
        </ul>



        <p>
        Cheers, and thanks for using HamClock.





        </p></div>   <!-- web interface -->






        <h3>
             Why do I get an error when displaying a satellite or it disappears after a while?
        </h3>
        <div>

        <p>
        Probably because your time is off.
        If the button below and to the right of your call sign says
        <span>OFF</span>
        then tap it so it says
        <span>UTC</span>
        and try again.

        </p><p>
        The error occurs because sat elements are only good for a few days so if the clock&#39;s time has
        been adjusted outside the valid range you&#39;ll get an error message.
        Time can be adjusted away from UTC if you click any of the time fields.
        That can be handy to intentionally move time forward or backwards to explore gray line,
        VOACAP predictions etc. See page 7 of the User Guide for more details.

        </p></div>  <!-- sat err -->






        <h3>
             Why do I have two HamClocks with identical settings showing slightly different VOACAP maps?
        </h3>
        <div>

        <p>
        Because they are showing maps for two adjacent hours.

        </p><p>
        Ideally all Clocks would update at the top of the hour.
        But with several thousand Clocks running the world over that would overwhelm the backend server.
        In order to spread out server hits, Clocks intentionally randomize their VOACAP
        updates throughout each hour.
        This means the map shown by any given Clock might be up to one hour late.

        </p><p>
        So in your case, one clock is showing a map for the current hour,
        and the other is still showing from the previous hour.
        When the Clock that happens to be updating later updates, it will then show the same map until
        the cycle repeats next hour.

        </p></div>  <!-- different VOACAP maps -->





        <h3>
             Why is my grid square wrong?
        </h3>
        <div>

        <p>
        It&#39;s probably not wrong but I can think of two possibilities why you might think so:

        </p><ol>
            <li>
            You are near a grid boundary and the HamClock display is misleading because of rounding.
            <p>
            For example, suppose you set your location to 35.1N 110.1W which is in grid DM45.
            HamClock will display this in the main DE pane as 35N 110W grid DM45.
            But taken at face value 35N 110W is in grid DM55 so the grid appears to be wrong because 
            the location is rounded for display.
            When in doubt, open the lat/long dialog to review the values as they are stored internally.
            </p><p>
            Note that displaying more precision would not eliminate this issue entirely,
            it can only reduce the region where this occurs.
            </p></li>

            <li>
            There are two different algorithms for exactly where a grid square is located.
            <p>
            Some programs use the center of a grid for their position, others use the SW corner.
            HamClock uses the corner because that is the historical technique described in
                <a target="_blank" href="https://www.clearskyinstitute.com/ham/HamClock/QSTGridSquares.pdf">this paper</a> published in January 1989 QST.
            My personal favorite web site that uses this technique is
                <a target="_blank" href="https://www.karhukoti.com/maidenhead-grid-square-locator">here</a>.
            But other popular web sites use the center, such as
                <a target="_blank" href="https://www.qrz.com/gridmapper">this one</a> on QRZ.com.
            So it depends which you consider correct.
        </p></li></ol>

        <p>
        If you still feel HamClock is in error, please 
        <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">send me the exact details</a>.

        </p></div>   <!-- grid square -->





        <h3>
             What is the HamClock diagnostic output?
        </h3>
        <div>

        <p>
        It is additional detailed status and diagnostic information HamClock writes to the file
        <code>$HOME/.hamclock/diagnostic-log.txt</code>.
        It is not intended for general consumption but can be helpful for troubleshooting.

        </p><p>
        The previous 3 logs are also stored in a rolling set with the following names:
        </p><pre>        <code>diagnostic-log-0.txt</code>
        <code>diagnostic-log-1.txt</code>
        <code>diagnostic-log-2.txt</code>
        </pre>

        <p>
        Sometimes it can be helpful to watch the file in real time which you can do with the following
        command; type Control-C to quit.
        </p><pre>        tail -f $HOME/.hamclock/diagnostic-log.txt
        </pre>

        <p>
        When asking for assistance, you may be asked to upload these files to my server for analysis.
        To do so, tap the padlock icon then select <code>Post diagnostics</code>.

        </p><p>
        On older HamClocks without this Posting facility, collect the files into a zip archive and email
        them to me as an attachment. 
        You can create a file named diags.zip using the following command line:
        </p><pre>        zip diags.zip ~/.hamclock/diagnostic-log*txt
        </pre>

        <p>
        If preferred, the diagnostics information can be written to stdout by invoking HamClock as
        follows:
        </p><pre>        hamclock -o
        </pre>

        </div>






        <h3>
             What is sudo and set-uid and why should I use them with HamClock, or not?
        </h3>
        <div>

        <p>
        <b>Sudo</b> stands for &#34;super-user do&#34;.
        In UNIX, the <i>super user</i> refers to extra privileges bestowed upon the <i>root</i> user.
        Rather than actually logging out and logging back in as user root to gain these privileges,
        this command arranges for you to have these greater privileges just long enough
        to run the command that follows on the same line.
        After that command completes, you are again restricted back to the normal privileges of your current
        user login.

        </p><p>
        But using sudo comes at a price.
        </p><ol>
            <li>
                Depending on <code>/etc/sudoers</code> it may require entering a password each time.
            </li>
            <li>
                It temporarily changes the HOME directory to <code>/root</code>.
                HamClock creates and uses a working directory named <code>.hamclock</code> (note the leading dot)
                in the HOME directory. HOME for the normal pi user is <code>/home/pi</code>.
                Thus, if you run HamClock without sudo it uses <code>/home/pi/.hamclock</code>
                but if you run it with sudo it uses <code>/root/.hamclock</code> and files therein are not
                accessible to the normal pi user.
                This duality can cause much confusion.
            </li>
            <li>
                sudo temporarly imposes a new set of minimal, more secure, environment variables.
                For example HOME becomes <code>/root</code>,
                PATH becomes just <code>/bin:/usr/bin</code> and DISPLAY is removed
                entirely. These are all at odds with HamClock.
            </li>
        </ol>

        <p>
        A <i>much</i> better way is to use <b>set-uid</b>.
        This refers to an automatic mechanism engaged by setting the mode of a program file in
        such a way that when the process runs, it has the same permissions as the <i>owner</i> of the file.
        Normally, the process has the permissions of the <i>user</i> running the file.
        Thus by making the program file owned by root,
        it has super-user privileges no matter what user runs it.
        Using this mechanism for HamClock allows it to have super-user privileges without using sudo.
        Unlike sudo, using set-uid does not change anything else, so HamClock will still use your
        <code>/home/pi/.hamclock</code> directory for its support
        files as expected.

        </p><p>
        The reason to escalate privileges with either of these methods in the first place is that
        HamClock requires super-user privileges to perform certain external IO and protected file
        system operations.
        It is possible in some configrations for someone with sufficient UNIX administrative
        knowledge to make adjustments so HamClock can run without super-user privileges, but this
        is beyond what most users want to deal with.
        So in the interest of providing the simplest and most enjoyable experience possible for
        the majority of users, the install instructions use set-uid root.

        </p><p>
        For those still interested in eliminating the need for root privileges, the following
        commands may help for RPi. They perform the following functions:
        </p><ol>
            <li>add user pi to various groups to allow necessary IO access </li>
            <li>remove the set-uid bit from the executable file</li>
            <li>change the group ownership of /usr/local/bin to user pi</li>
            <li>allow any user in group pi (specifically user pi) to modify /usr/local/bin</li>
        </ol>

<pre>    sudo usermod --append --groups video,input,gpio,i2c pi
    sudo chmod u-s /usr/local/bin/hamclock
    sudo chgrp pi /usr/local/bin
    sudo chmod g+w /usr/local/bin
</pre>

        <p>
        The last two steps are required so automatic updates may write a new version of the
        executable file in /usr/local/bin.

        </p><p>
        After executing these commands, subsequent instances of hamclock will no longer run as root
        but should be able to perform most functions.
        But note if you perform <code>sudo make install</code> again in the future
        this will set the set-uid bit again so remember to perform command 2 again.

        </p></div>


        <h3>
             Is it possible to change the RSS feeds?
        </h3>
        <div>

        <p>
        No. RSS feed formats are surprisingly inconsistent so I perform all the heavy lifting on my
        server and only send the plain titles back to HamClock. Plus, most now use https which uses too 
        much memory for the little ESP processor.


        </p><p>
        That said, if you have a feed in mind that is of general interest to the global ham
        community,
        <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">send me your suggestion</a>
        and I will consider adding it to the server processing.

        </p><p>
        You might also consider setting your own titles locally using the set_rss web command (see FAQ 14)
        or run the contributed script hcrss.pl (see the User Contrib tab).

        </p></div>  <!-- RSS -->





        <h3>
             Is it possible to speed up the data pane rotation?
        </h3>
        <p>
        Yes.
        See Setup page 5 for several speed choices.

        </p>  <!-- pane speed -->




        <h3>
             Occasionally I see &#34;WX too fast&#34; or similar -- What does that mean?
        </h3>
        <div>

        <p>
        It means either my connection to Open Weather Map is overloaded or your
        clock is making queries too rapidly.

        </p><p>
        In order to stay within the usage limits of my OWM subscription,
        my backend server will deny all HamClock weather queries if they arrive faster
        than 200 per minute.

        </p><p>
        My server also limits the request rate from any one public IP.
        Note if you have more than one HamClock at your shack, they all count as one for this limit because
        they each report the same public IP address.

        </p></div>  <!-- WX too fast -->




        <h3>
             Why is the data pane choice menu not working as I expect?
        </h3>
        <div>

        <p>
        If you are asking why you can not turn off a specific choice:
        </p><ul>
            <li>
            Each data pane must have at least one choice enabled at all times.
            To enforce this policy, you are not allowed to turn off the only remaining choice.
            The correct procedure is to first select another choice,
            then turn off the one you no longer want.
            </li>
        </ul>

        <p>
        If you are asking why a specific choice is not listed:
        </p><ul>
            <li>
            A given choice may only be assigned to one data pane at a time.
            To enforce this policy, the menus automatically remove choices
            that are already assigned to other panes. 
            The correct procedure to move a choice to a different pane is to first turn it off
            in its current pane, then select it in the desired pane.
            </li>

            <li>
            Note also that the DX Cluster data pane is not allowed to be in the left position
            across the top.
            </li>

        </ul>


        </div>  <!-- pane menu broken -->





        <h3>
             Is it possible to change the set of satellites?
        </h3>
        <div>

        <p>
        No. The list is maintained on my server which performs all the heavy lifting of discovery and
        updating, sending only the TLEs back to HamClock.

        </p><p>
        That said, if you have a satellite in mind that is of general interest
        to the global ham community feel free to send me a suggestion at
        <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">ecdowney@clearskyinstitute.com</a>.

        </p></div>


        <h3>
             How are the background maps managed?
        </h3>
        <div>

        <p>
        As of Version 2.52, the background map images are downloaded and stored as local files as needed.
        In previous versions they were embedded within the executable image and were thus immutable
        and limited by size of non-volatile memory.

        </p><p>
        This meant the ESP HamClocks could only ever support one map style, and even that was only at half
        the available screen resolution. ESP HamClocks now use the extended FLASH file system to store the
        map images at full resolution. The improved resolution is especially apparent in the night
        portion of the Terrain style map.
        Unfortunately, more pixels and slower FLASH access means the display
        update rate on the ESP is about 30% slower now
        but the added flexibility and visual results seem worth it.

        </p><p>
        The UNIX versions of HamClock store their map files in <code>~/.hamclock</code>
        so the number of files is limied only by available disk space.

        </p><p>
        If you run HamClock without a network connection, you will be limited to map styles already
        downloaded.

        </p><p>
        The maps are stored in .bmp format, version 4, using 16 bit RG565 pixels.
        There are separate files for day and night for each map style.
        HamClock uses these to render the day and night regions and blends them in a 12° band to 
        simulate civil twilight.

        </p></div>



        <h3>
             How does the self-update facility work?
        </h3>
        <div>

        <p>
        When asked to update itself, HamClock checks the support server if there is a newer version available.
        If so, for the ESP systems this is a binary file that is downloaded directly into FLASH and
        that&#39;s all there is to it.

        </p><p>
        But for the Desktop UNIX systems, this is a zip file containing the source code that requires
        many more steps:
            </p><ol>
                <li> the zip is downloaded into a unique directory within /tmp </li>
                <li> it is exploded with unzip which creates the source tree </li>
                <li> <code>make</code> is run within the source tree, using the same target that was used
                     to build the currently running program </li>
                <li> the resulting program file effectly overwrites the currently running program file. </li>
            </ol>
        
        <p>
        These steps present two challenges: how to
        find the full path of the program file to a running program and
        how to update its program file while it is still running.

        </p><p>
        To find the program file full path, HamClock first checks the argv[0] path given when it was
        executed, digging through symlinks if necessary to find the real program file.
        If this is already a full path, indicated by beginning with a slash (/), we are done.
        If not, then a test is made whether a file with that name exists with respect to the current working
        directory of HamClock. If so, we are done. If it still is not found, then the argv[0] name is
        checked for in each of the directories named in the PATH environment variable. If still not found,
        the update fails.

        </p><p>
        To update the program file, we have to deal with the fact that it is not possible on UNIX to
        modify the program file of a running program (even as root).
        So instead, HamClock does it indirectly by first removing the program file then copying in
        the new one created by <code>make</code> so it has the same name.
        To remove the current program file, HamClock requires write permission on
        its containing directory because removing a file actually just edits it out of its
        containing directory. If HamClock does not have this permission, the update fails.
        Copying in the new file then edits the same name back into the same
        directory, so it looks like it was overwritten when actually it was deleted and added again.
        Meanwhile, HamClock can continue to run because a deleted file still actually exists in memory
        until the last process with it open either closes it or exits, even if it is not named by any
        directory.


        </p></div>






        <h3>
             How do I connect the Bosch BME280 environment sensor to RPi?
        </h3>
        <div>


        <p>
        You have two choices.
        One is to wire it to the 40 pin header as described below. 
        The other is to use a USB-I2C bridge as described in FAQ 45.

        </p><h3>
            On the Raspberry Pi running linux, proceed as follows:
        </h3>

            <ol>
                <li> connect the sensor to the RPi using the 40 pin connector as follows:
                    <table>
                        <tbody><tr> <th> BME label </th> <th> RPi Header pin </th> </tr>
                        <tr> <td> Vin </td> <td> 1 </td> </tr>
                        <tr> <td> SDI </td> <td> 3 </td> </tr>
                        <tr> <td> SCK </td> <td> 5 </td> </tr>
                        <tr> <td> GND </td> <td> 9 </td> </tr>
                    </tbody></table>
                    </li>
                <li> install i2c-tools:
<pre>    sudo apt-get install i2c-tools
</pre>
                </li>
                <li> run <code>sudo raspi-config</code> and set the following options:
<pre>    Interface Options ⇒ I2C: enabled
</pre>
                </li>
                <li> Check the Bosch is connected correctly with these tests:
<pre>    sudo i2cdetect -y 1
</pre>
            you should see 77 in lower right corner of matrix; then
<pre>    sudo i2cdump -y 1 0x77 b
</pre>
            you should see a matrix of different numbers, <b>not</b> just all XX
                </li>
                <li>
                    Start HamClock. Enter Setup, go to Page 4, tap GPIO so it says Active.
                    Also select whether you want metric or imperial units.
                    For now leave the delta values set to zero. Click Done.
                </li>
                <li>
                    After HamClock is up and running again, tap any data pane and select one of the
                    ENV plots.
                </li>
                <li>
                    If you have some means of measuring temperature and pressure independent of the
                    BME280, note the errors, restart HamClock and enter the corrections in page 2 of
                    Setup.
                </li>
                <li>
                    Finally, you may add a second BME280 as shown in the following schematic.
                    Note that each has a different I2C bus address depending on whether SDO is grounded.

                    </li>
            </ol>

        <h3>
            On a Raspberry Pi running FreeBSD 14.0-RELEASE, proceed as follows:
        </h3>

            <ol>
                <li>
                    Connect the hardware the same as above
                </li>

                <li>
                    Edit <code>/boot/msdos/config.txt</code> to add the following line to the 
                    <code>[all]</code> section then reboot:
<pre>gpio=2,3=a0
</pre>
                </li>

                <li>
                    Test by running <code>sudo i2c -s</code> which should immediately report the device
                    address(es).
                </li>

            </ol>

        <h3>
            How long can the cable be?
        </h3>

        <p>

        I have used a direct connection of ten feet without any problem.
        I have also successfully used 100 feet of Cat 5 using a pair of these
        <a target="_blank" href="https://www.sparkfun.com/products/16988">extenders from Sparkfun</a>.

        </p></div>    <!-- BME on Pi -->




        <h3>
             What if my BME280 always reads 100% humidity?
        </h3>
        <p>
        This may mean your device has become saturated. 
        According to the
        <a target="_blank" href="https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme280-ds002.pdf">data sheet</a>
        page 46, you can try reconditioning the device by baking it at
        120 C for 2 hours, then letting it slowly cool to 25 C over 24 hours.
        If this doesn&#39;t help then your device may be broken.

        </p>  <!-- 100% humidity -->





        <h3>
             How do I exit HamClock?
        </h3>
        <p>
        Click and hold the padlock for 3 seconds, then select Exit.

        </p>




        <h3>
             What happened to fb0?
        </h3>
        <div>

        <p>
        Nothing, it&#39;s still supported for legacy users, but now that the GUI version can display 
        full screen it is no longer recommended for new installations.

        </p><p>
        For those new to HamClock who may not know about fb0, it was an early attempt to provide a
        full screen experience by turning off the GUI and accessing the RPi video frame buffer directly.
        This was accessed through the special
        file <code>/dev/fb0</code>, and hence the name.
        This allowed HamClock to fullfill its charter purpose on RPi of being a stand-alone
        appliance for ham radio information. Although successful, it required a lot of special
        programming and could be a challenge for users to install. It is now replaced by using
        <a target="_blank" href="https://specifications.freedesktop.org/wm-spec/1.3/ar01s05.html">
            FreeDesktop.org atoms</a>
        to accomplish the same full screen functionality with the normal X11 GUI.

        </p><p>

        If you have fb0 installed, please remove it before installing any new versions.
        This requires the following steps:

            </p><ol>
                <li>log into your RPi with ssh </li>

                <li>stop automatically starting hamclock, for example if you
                used crontab, 
                type <code>crontab -e</code> and remove the line that runs hamclock
                </li>

                <li>
                Make sure the GL driver is enabled by running <code>sudo raspi-config</code> and
                doing
                <p>
    Advanced Options ⇒ GL driver ⇒ OpenGL with fake KMS ⇒ Ok
                </p></li>

                <li>Restore using the GUI by doing
                <p>
                System Options ⇒ Boot ⇒ Desktop Autologin ⇒ Ok ⇒ Finish ⇒ Reboot? Yes
                </p></li>
            </ol>

        </div> <!-- fb0 -->


        <h3>
             Must I use /usr/local/bin for the executable?
        </h3>
        <div>

        <p>
        No. To build hamclock and put it in, say, /usr/bin, use the following steps:
        </p><pre>        cd ESPHamClock
        make -j 4 hamclock-1600x960
        sudo mv hamclock-1600x960 /usr/bin/hamclock
        sudo chown root /usr/bin/hamclock
        sudo chmod u+s /usr/bin/hamclock
        </pre>

        </div> <!-- /usr/local/bin -->





        <h3>
             Why does my screen go blank after a short while or not blank at all?
        </h3>
        <div>

        <p>
        Screen blanking control is a complex dance between the host and HamClock,
        and the music keeps changing.

        </p><p>
        Let&#39;s check the host first.

        </p><ol>
            <li> On systems running RPi Debian Bullseye start a terminal

                <ol>

                    <li> run <code>sudo raspi-config</code> then 
                        <ol>
                            <li> Go to Display Options ⇒ Screen Blanking ⇒ Enable </li>
                            <li> Go to Advanced Options ⇒ Wayland ⇒ Disable </li>
                            <li> select Finish (don&#39;t reboot yet)</li>
                        </ol>
                    </li>

                    <li> HamClock and xscreensaver do not mix.
                    To make sure you don&#39;t have it installed, run these commands:

                        <ol>
                            <li> <code>sudo apt remove xscreensaver</code> </li>
                            <li> <code>sudo apt autoremove</code> </li>
                        </ol>
                    </li>

                    <li>
                        Edit <code>/etc/X11/xorg.conf.d/10-blanking.conf</code> and make sure the line for
                        DPMS shows <code>Enable</code>. 
                    </li>

                    <li> reboot
                    </li>

                    <li> Log in, open a terminal and type <code>xset dpms force off</code>.
                         If the screen goes blank then HamClock should be able to blank the screen as well.
                         Click your mouse or type any key to get the display back on.
                    </li>
                </ol>
            </li>

            <li>
                On systems running Bookworm, or any system running Wayland, the means to control screen
                blanking is not yet stable which means the Idle timer and On/Off controls may not work at all.
                At the very least, on RPi make sure to use the HDMI plug nearest the power port.
                Give it a try without changing anything first; you might be lucky.

                <p>
                You may find HamClock can turn the monitor off but it comes right back on again.
                If this happens edit <code>/boot/firmware/cmdline.txt</code>
                and add <code>vc4.force_hotplug=1</code> to the end of the existing line
                (don&#39;t create a new line), then reboot.

                </p><p>
                If still no luck, your best bet is to turn off Wayland as follows:

                </p><ol>
                    <li> run <code>sudo raspi-config</code> then
                        <ol>
                            <li> Go to Display Options ⇒ Screen Blanking ⇒ Disable </li>
                            <li> Go to Advanced Options ⇒ Wayland ⇒ Disable </li>
                            <li> select Finish (don&#39;t reboot yet)</li>
                        </ol>
                    </li>

                    <li>
                        Edit <code>/etc/X11/xorg.conf.d/10-blanking.conf</code> and make sure the line for
                        DPMS shows <code>Enable</code>. 
                    </li>

                    <li> Click the Raspberry in the upper left corner to log out and log back in
                    </li>

                    <li> Open a terminal and type <code>xset dpms force off</code>.
                         If the screen goes blank then HamClock should be able to blank the screen as well.
                         Click your mouse or type any key to get the display back on.
                    </li>
                </ol>
            </li>

            <li>
                It could also be the monitor itself.
                Activate the monitor&#39;s own control menus and look for an option related to automatically
                setting the input. 
                Turning this off and setting HDMI directly can sometimes help.
            </li>
        </ol>

        <p>
        As for HamClock itself, it will only blank the screen if:

            </p><ul>
                <li>Full Screen mode is Yes in Setup page 5</li>
                <li>it was not built to be web-only</li>
                <li>it is displaying on the same system on which it is running</li>
            </ul>

        <p>
        If these criteria are not met then HamClock will not try to blank the screen,
        thus any blanking that does occur must be caused by the host system, not HamClock.

        </p><p>
        Follows are the HamClock settings that control when it will blank the screen:

            </p><ul>
                <li>
                Check the Idle time in the upper right corner.
                You may have to click the title region to change options to find the value.
                Click just above or below the Idle number to increase or decrease by 5 minutes.
                Set to 0 to display idle blanking.
                </li>

                <li>
                Check the Off and On (or Dim) times in the same menu.
                Change them the same way; set the times equal to disable blanking.
                These can also be set on a daily basis in Setup page 7.
                </li>

            </ul>

        </div> <!-- blank screen -->



        <h3>
             Why is the CPU usage so high on the Pi and other UNIX platforms?
        </h3>
        <div>

        <p>
        This is a consequence of HamClock being originally written for the ESP8266 embedded processor.
        I wrote a porting layer that allows me to use the same application code on the Pi.
        This saves me a lot of effort but since the ESP8266 code is fundamentally an infinite loop,
        the result is the UNIX program runs all the time also.

        </p><p>
        It&#39;s not usually a big deal in practice but if it bothers you,
        use the hamclock -t command line argument to set the desired CPU percentage.
        For example, to limit cpu usage to about 50%, run hamclock as follows:
        </p><pre>        hamclock -t 50
        </pre>

        <p>
        Note that lower limits will result in more sluggish performance.

        </p></div> <!-- high CPU -->



        <h3>
             What are rigctld and rotctld?

        </h3>
        <div>

        <p>
        <a target="_blank" href="http://hamlib.sourceforge.net/html/rotctld.1.html">Rigctld</a>
        is
        <a target="_blank" href="https://hamlib.github.io">hamlib&#39;s</a>
        <i><u>rig</u> <u>c</u>on<u>t</u>ro<u>l</u> <u>d</u>aemon</i>,
        and
        <a target="_blank" href="http://hamlib.sourceforge.net/html/rotctld.1.html">rotctld</a>
        is the
        <i><u>rot</u>ator <u>c</u>on<u>t</u>ro<u>l</u> <u>d</u>aemon</i>.
        They provide a device independent network protocol to control several brands of radios
        and single and dual axis antenna rotators without having to know their individual commands.
        On RPi you can install them with <code>sudo apt install hamlib</code>.

        </p><p>
        HamClock can create a network connection to these programs for automatic control of
        any radio or rotator* supported by hamlib.
        To get a list of all supported equipment run the programs with <code>-l</code>,
        such as <code>rigctld -l</code>.
        <i>You must get these hamlib programs working with your equipment before you can use
        them with HamClock.</i>

        </p><p>
        For practice, you can run either program in simulation mode by specifying model one, such as
        <code>rotctld -m 1</code>.
        Then enter the program&#39;s host and port number in HamClock&#39;s Setup, page 3.
        The rotator simulator is particularly fun.
        Start the simulator, then select the Rotator pane and get acquainted with the
        controls before connecting to your real rotator.
        There is no pane dedicated to rig control, it is only used to automatically set the radio frequency
        of a DX Cluster spot.

        </p><p>
        Do not confuse rigctld (or rotctld) with another hamlib program named
        <a target="_blank" href="http://hamlib.sourceforge.net/html/rigctl.1.html">rigctl</a>
        (or <a target="_blank" href="http://hamlib.sourceforge.net/html/rotctl.1.html">rotctl</a>).
        This program, without the trailing d, provides direct radio (or rotator)
        control using the command line, not a network connection.
        Both the command line and the network program use the same control libraries under the hood,
        so if one works the other will also.
        It can be a good idea to use rigctl (or rotctl) for initial testing, then once that works,
        change to rigctld (or rotctld) using the same <code>-m</code> model selector to allow
        network control from HamClock.

        </p><p>
        * Note as a special case, although the 
        <a target="_blank" href="https://www.yaesu.com/indexVS.cfm?cmd=DisplayProducts&amp;ProdCatID=104&amp;encProdID=79A89CEC477AA3B819EE02831F3FD5B8">Yaesu G5500</a>
        rotator is not supported by hamlib because it has no serial or networked computer interface,
        there is a project that provides a drop-in replacement for rotctld for the G5500
        <a target="_blank" href="https://clearskyinstitute.com/ham/G5500"> here </a>.

        </p></div> <!-- rotctld -->

        <h3>
             What is flrig?

        </h3>
        <div>

        <p>
        <a target="_blank" href="http://www.w1hkj.com/files/flrig/flrig-help.pdf">flrig</a>
        is w1hkj&#39;s program to provide network control of many ham radio transceivers. 
        It historically provided rig control to 
        <a target="_blank" href="http://www.w1hkj.com/FldigiHelp/index.html">fldigi</a>
        but works very well on its own.
        Unlike the
        <a target="_blank" href="https://hamlib.github.io">hamlib</a>
        tools, flrig includes its own GUI so many consider it easier to use.

        </p><p>
        You can download packages for several platforms 
        <a target="_blank" href="https://sourceforge.net/projects/fldigi/files/flrig/"> here</a>
        or on RPi you can install it with the command <code>sudo apt install flrig</code>. 
        Once installed, just type <code>flrig</code> and go to Config → Setup → Transceiver to 
        prepare for your radio.



        </p></div> <!-- flrig -->



        <h3>
             Can HamClock run without a network connection?

        </h3>
        <div>

        <p>
        It will run but you won&#39;t see much.

        </p><p>
        HamClock connects to clearskyinstitute.com for all the data plots, real-time images and
        maps and to various NTP servers for time.
        That just leaves the moon, NCDXF beacons, and BME environment data that is sourced locally.

        </p><p>
        You could get time without a net connection by using a GPS antenna and running gpsd.

        </p><p>
        On the other hand if you have a <i>slow</i> network connection, see FAQ 46.

        </p></div> <!-- no net -->




        <h3>
             Why does HamClock report K index and not A?

        </h3>
        <div>

        <p>
        Because K is more timely.
        The K index is reported every three hours while the A index is only updated once per day.
        Another important advantage is the 2 day forecast provided by NOAA for K index,
        which is not provided for A index.
        Together these features provide increased resolution and a better
        indication of expected trends than the A index.

        </p><p>
        You can find the exact relationship between A and K in the
        <a target="_blank" href="https://en.wikipedia.org/wiki/K-index">WikiPedia article</a>.

        </p></div> <!-- K index -->

        <h3>
             Why does HamClock report a different space weather value compared to XYZ?

        </h3>
        <div>

        <p>
        It could be a different source or different timing.

        </p><p>
        There are multiple primary resources for some statistics so it depends on which you are comparing 
        with.

        For example, the sun spot numbers are determined and reported independently by
        <a target="_blank" href="https://services.swpc.noaa.gov/text/daily-solar-indices.txt">NOAA</a>
        in the US and
        <a target="_blank" href="https://www.sidc.be/silso/eisninfo">SILSO</a> in Belgium.

        </p><p>
        It can also be due to timing.
        The various primary data sources publish at different times during the day
        and they are not always exactly on time.
        The secondary data consumers also have their own schedule of picking up the values
        which can also vary.

        For example, even WWV sources are not always in sync.
        Typically their Sun Spot Number
        <a target="_blank" href="https://services.swpc.noaa.gov/json/solar-cycle/swpc_observed_ssn.json">json</a> feed is several hours ahead of their
        <a target="_blank" href="https://services.swpc.noaa.gov/text/daily-solar-indices.txt">text</a> feed.
        Another example are their Kp numbers from
        <a target="_blank" href="https://services.swpc.noaa.gov/text/wwv.txt">here</a>
        and
        <a target="_blank" href="https://services.swpc.noaa.gov/text/daily-geomagnetic-indices.txt">here</a>
        are often out of sync by half an hour or more.

        </p></div> <!-- different values -->




        <h3>
             What are JD, MJD, LST, Solar and UNIX times?

        </h3>
        <div>

        <p>
        These are time scales useful in various applications other than ham radio.
        They are included with HamClock because of its general role as a time keeping device.

        </p><ul>
            <li><b>JD</b> is Julian Date.
            It is a steady continuous time scale for marking astronomical phenomenon spanning millennia.
            The value starts at noon Jan 1 4713 BC and increments by one each day thereafter.
            The Wikipedia entry is <a target="_blank" href="https://en.wikipedia.org/wiki/Julian_day">here</a>.
            </li>

            <li><b>MJD</b> is Modified Julian Date.
            It is the same as JD but rebased to midnight Nov 17, 1858, by subtracting 2400000.5.
            This produces a more manageable number and starts each day at the more familiar midnight.
            </li>

            <li><b>LST</b> is Local Sidereal Time.
            This is the value of Right Ascension currently passing through the local meridian.
            It is used by astronomers to quickly determine what portion of the celestial sphere
            is currently visible from a given location.
            One day on this scale is about 23:56 so it slowly advances during the year compared to
            civil time.
            The Wikipedia entry is
            <a target="_blank" href="https://en.wikipedia.org/wiki/Sidereal_time">here</a>.
            </li>

            <li><b>AST</b> is Apparent Solar Time.
            It is the local time referenced from the actual location of the sun,
            not the mean location used by civil time systems.
            The difference between these two is known as the Equation of Time.
            The Wikipedia entry is <a target="_blank" href="https://en.wikipedia.org/wiki/Solar_time">here</a>.
            </li>

            <li><b>Unix time</b> is the number of seconds since Jan 1 1970 UTC, not including leap seconds.
            It was created as a simple means of determining absolute time on early UNIX operating systems.
            It remains in commom use today because of its simplicity and convenience.
            The Wikipedia entry is <a target="_blank" href="https://en.wikipedia.org/wiki/Unix_time">here</a>.
            </li>

            <li><b>Day of Year</b> is often used for research data,
            time stations, and in military planning tools.
            For example see its usage at
            <a target="_blank" href="https://nsidc.org/support/faq/day-year-doy-calendar">NSIDC</a>,
            <a target="_blank" href="https://nrc.canada.ca/en/certifications-evaluations-standards/canadas-official-time/chu-broadcast-codes">CHU</a>
            and the Wikipedia entry 
            <a target="_blank" href="https://en.wikipedia.org/wiki/Calendar_date#Day_and_year_only">here</a>.
            </li>

        </ul>

        </div> <!-- time units -->



        <h3>
             Why isn&#39;t the Idle timeout and/or the On/Off timers working?
        </h3>
        <div>

        <p>
        HamClock only supports the Idle timeout and On/Off timers in the following situations:

        </p><ul>
            <li> HamClock is running on the ESP8266.
            </li>
            <li> The display is connected to a Pi using the DSI ribbon connector or the first HDMI connector.
            </li>
            <li> The Setup setting for Full screen is Yes.
            </li>
            <li> HamClock on Pi must be using xorg, screen blanking enabled and no screen saver.
                 To check, run <code>sudo raspi-config</code> then
                 <ul>
                     <li>Advanced Options ⇒ Wayland ⇒ disabled.</li>
                     <li>Display ⇒ Screen blanking ⇒ enabled.</li>
                 </ul>
                 Then also run <code>sudo apt remove xscreensaver</code> and reboot.
            </li>
        </ul>


        </div> <!-- on/off -->




        <h3>
             Can HamClock run on the Raspberry Pi Pico?
        </h3>
        <div>

        <p>
        Maybe, but I haven&#39;t been excited enough to try for several reasons:

        </p><ul>
            <li>
                There is no HDMI video 
                so the only display option would be the same SPI LCD used on the ESP8266 version.
                This glacial interface is the main reason it takes 30-60 seconds to render a single map view.
            </li>

            <li>
                The Pico clock speed is only 133 MHz, even slower than the ESP8266 160.
            </li>

            <li>
                The small amount of FLASH would not support OTA updates.
            </li>
        </ul>

        <p>
        But if I were to try, I&#39;d start with 
        <a target="_blank" href="https://github.com/earlephilhower/arduino-pico">this port</a>
        of the Arduino ecosystem. 
        Note this path would mimic the ESP8266 HamClock, not the RPi version.
        I&#39;m not aware of any path to achieve the latter.

        </p></div> <!-- pico -->




        <h3>
             Can HamClock be controlled via a RESTful API interface?
        </h3>
        <div>

        <p>
        Yes.
         HamClock provides a
        <a target="_blank" href="https://www.tibco.com/reference-center/what-is-a-restful-api">RESTful</a>
        API scripting interface, with which it can be controlled and queried over a network.
        These commands can be sent with command line tools such as curl or wget or with a browser.
        The list of commands below is followed by several examples.

        </p><p>
        By default, the RESTful API interface uses port 8080 but this can be changed with the -e command line
        argument. For example, to change to port 9000, run hamclock as follows:
        </p><pre>        hamclock -e 9000
        </pre>

        <table>
        <tbody><tr>
            <th>Syntax</th>
            <th>Summary </th>
        </tr>
        <tr>
            <td>get_capture.bmp</td>
            <td>Save screen as bmp file</td>
        </tr>
        <tr>
            <td>get_config.txt</td>
            <td>Report current HamClock configuration settings</td>
        </tr>
        <tr>
            <td>get_contests.txt</td>
            <td>Report current contests if that data pane has been shown</td>
        </tr>
        <tr>
            <td>get_de.txt</td>
            <td>Report DE info</td>
        </tr>
        <tr>
            <td>get_dx.txt</td>
            <td>Report DX info</td>
        </tr>
        <tr>
            <td>get_dxspots.txt</td>
            <td>Report current list of DX cluster spots</td>
        </tr>
        <tr>
            <td>get_livespots.txt</td>
            <td>Report current Live Spots list, if active (not ESP)</td>
        </tr>
        <tr>
            <td>get_livestats.txt</td>
            <td>Report current Live Spots stats, if active</td>
        </tr>
        <tr>
            <td>get_ontheair.txt</td>
            <td>Report current POTA/SOTA activators, if active</td>
        </tr>
        <tr>
            <td>get_satellite.txt</td>
            <td>Report current satellite position and passes, if defined</td>
        </tr>
        <tr>
            <td>get_satellites.txt</td>
            <td>Show a list of all available satellites.</td>
        </tr>
        <tr>
            <td>get_sensors.txt</td>
            <td>Generate list of BME280 sensor values, if attached</td>
        </tr>
        <tr>
            <td>get_spacewx.txt</td>
            <td>Get last-known data pane data and age </td>
        </tr>
        <tr>
            <td>get_sys.txt</td>
            <td>Report some basic HamClock system information</td>
        </tr>
        <tr>
            <td>get_time.txt</td>
            <td>Report HamClock&#39;s idea of UTC</td>
        </tr>
        <tr>
            <td>get_voacap.txt</td>
            <td>Report current band conditions percent reliability matrix, if active</td>
        </tr>
        <tr>
            <td>set_adif?file POST&amp;pane=[0123]|none</td>
            <td>Load an ADIF file in the given data pane or resume file handling, see example</td>
        </tr>
        <tr>
            <td>set_alarm?state=off|armed&amp;time=HR:MN&amp;utc=yes|no</td>
            <td>Set daily alarm off or arm at the given DE time</td>
        </tr>
        <tr>
            <td>set_auxtime?format=[one_from_menu]</td>
            <td>Set the auxiliary time format (beneath UTC)</td>
        </tr>
        <tr>
            <td>set_bmp?file POST&amp;pane=[123]|none</td>
            <td>Load a BMP file in the given data pane or restore, see example. Does not resize.</td>
        </tr>
        <tr>
            <td>set_cluster?host=xxx&amp;port=yyy</td>
            <td>Set a different DX cluster node</td>
        </tr>
        <tr>
            <td>set_defmt?fmt=[one_from_menu]&amp;atin=RSAtAt|RSInAgo</td>
            <td>Set DE pane time format to one of its menu choices, and rise/set if All info</td>
        </tr>
        <tr>
            <td>set_displayOnOff?on|off</td>
            <td>Turn display on or off</td>
        </tr>
        <tr>
            <td>set_displayTimes?on=HR:MN&amp;off=HR:MN&amp;day=[Sun..Sat]&amp;idle=mins</td>
            <td>
            Set display on and off DE times for the specified day, or today if not specified.
            </td>
        </tr>
        <tr>
            <td>
                set_livespots?spot=of|by&amp;what=call|grid&amp;show=maxdist|count
                </td>
            <td>Change Live Spots configuration
            </td>
        </tr><tr>
        </tr><tr>
            <td>set_mapcenter?lng=X
            </td>
            <td>Set a new center for the Mercator or Robinson map; not persistent across restarts.
            </td>
        </tr><tr>
            <td>set_mapcolor?setup=name&amp;color=R,G,B
            </td>
            <td>Set one of the Setup map colors. Color may be 0..255 RGB or common color
            </td>
        </tr>
        <tr>
            <td>set_mapview?Style=S&amp;Grid=G&amp;Projection=P&amp;RSS=on|off&amp;Night=on|off
            </td>
            <td>Change 1 or more map settings. S, G and P must match View menu text exactly.
            </td>
        </tr>
        <tr>
            <td>set_newde?grid=AB12&amp;lat=X&amp;lng=Y&amp;TZ=local-utc</td>
            <td>Define a new DE location using grid or latitude+longitude and optional time zone</td>
        </tr>
        <tr>
            <td>set_newdx?grid=AB12&amp;lat=X&amp;lng=Y&amp;TZ=local-utc</td>
            <td>Define a new DX location using grid or latitude+longitude and optional time zone</td>
        </tr>
        <tr>
            <td>set_once_alarm?state=off|armed&amp;time=YYYY-MM-DDTHR:MN&amp;tz=DE|UTC</td>
            <td>Set the one-time alarm off or arm at the given DE or UTC time</td>
        </tr>
        <tr>
            <td>
                set_pane?Pane[123]=<i>X,Y,Z... any set from:</i>
                <p>
                   VOACAP DE_Wx DX_Cluster DX_Wx Solar_Flux Planetary_K Moon
               </p></td>
            <td>Set the specified data pane 1-3 content, if allowed. </td>
        </tr>
        <tr>
            <td>
                set_pane?Pane0=<i>X,Y,Z... any set from:</i>
                <p>
                    DX_Cluster ADIF Contests POTA SOTA off
            </p></td>
            <td>Set the specified plot data pane 0 content, if allowed. </td>
        </tr>
        <tr>
            <td>set_panzoom?pan_x=X&amp;pan_y=Y&amp;pan_dx=dX&amp;pan_dy=dY&amp;zoom=Z</td>
            <td>Set map zoom and/or absolute or delta pan. Pan X [-330,330] Y [-165,165].
        </td></tr>
        <tr>
            <td>set_rotator?state=[un]stop|[un]auto&amp;az=X&amp;el=X</td>
            <td>Control rotator, if data pane is visible and connection is established.</td>
        </tr>
        <tr>
            <td>set_rss?reset|add=X|network|interval=secs|on|off|file POST</td>
            <td>Control RSS including local titles; see examples below.</td>
        </tr>
        <tr>
            <td>set_satname?abc|none</td>
            <td>Select satellite from built-in list, or none</td>
        </tr>
        <tr>
            <td>set_sattle?name=abc&amp;t1=line1&amp;t2=line2</td>
            <td>Define a satellite using TLE values</td>
        </tr>
        <tr>
            <td>set_screenlock?lock=on|off</td>
            <td>Control screen lock</td>
        </tr>
        <tr>
            <td>set_senscorr?sensor=76|77&amp;dTemp=X&amp;dPres=Y</td>
            <td>Set the given BME280 temperature and/or pressure correction in current units</td>
        </tr>
        <tr>
            <td>set_stopwatch?reset|run|stop|lap|countdown=mins</td>
            <td>Stopwatch commands</td>
        </tr>
        <tr>
            <td>set_time?change=delta_seconds</td>
            <td>Change time by the given number of +- seconds. </td>
        </tr>
        <tr>
            <td>set_time?ISO=YYYY-MM-DDTHH:MM:SS</td>
            <td>Set UTC to the given time</td>
        </tr>
        <tr>
            <td>set_time?Now</td>
            <td>Set UTC to current time from NTP or gpsd</td>
        </tr>
        <tr>
            <td>set_time?unix=secs_since_1970</td>
            <td>Set UTC to the given UNIX time</td>
        </tr>
        <tr>
            <td>set_title?msg=my message&amp;fg=R,G,B&amp;bg=R,G,B|rainbow</td>
            <td>Set call text to <i>msg</i>. Missing args are left unchanged. Changes are not persistent
            </td>
        </tr>
        <tr>
            <td>set_touch?x=X&amp;y=Y</td>
            <td>Virtually touch screen coordinate X, Y; scaled to 800 x 480: must lie outside map</td>
        </tr>
        <tr>
            <td>
                set_voacap?band=X&amp;power=W&amp;tz=DE|UTC&amp;mode=X&amp;map=REL|TOA|OFF&amp;TOA=X
            </td>
            <td>Set VOACAP model parameters.
                X values same as VOACAP data pane and not persistent.
            </td>
        </tr>
        <tr>
            <td>exit</td>
            <td>tells HamClock to exit (not ESP)</td>
        </tr>
        <tr>
            <td>live.html</td>
            <td>page with which HamClock can be controlled from a browser (not ESP)</td>
        </tr>
        <tr>
            <td>restart</td>
            <td>Restart HamClock</td>
        </tr>
        <tr>
            <td>updateVersion</td>
            <td>Check for new version and update if found</td>
        </tr>
        <tr>
            <td><i>any command not recognized</i></td>
            <td>Show this help</td>
        </tr>
        </tbody></table>

        <p>
        Examples; change the IP to match your hamclock host address.

        </p><p>
        Get the current clock UTC time:
        </p><pre>        curl &#39;http://192.168.7.101:8080/get_time.txt&#39;
        </pre>

        <p>
        Set display to turn on Wednesday at 8 AM and off at 10 PM, DE time, with 10 minutes idle time:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_displayTimes?on=8:00&amp;off=22:00&amp;day=Wed&amp;idle=10&#39;
        </pre>

        <p>
        Set a new DE location from latitude and longitude:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_newde?lat=40.7&amp;lng=-74&#39;
        </pre>

        <p>
        Save the current display to a file named hcscreen.bmp:
        </p><pre>        curl &#39;http://192.168.7.101:8080/get_capture.bmp&#39; &gt; hcscreen.bmp
        </pre>

        <p>
        Specify an earth satellite with its TLE:
        </p><pre>        curl --get &#39;http://192.168.7.101:8080/set_sattle&#39; --data-urlencode &#39;name=ISS&amp;t1=1 25544U 98067A   21320.06051688  .00001570  00000+0  37172-4 0  9998&amp;t2=2 25544  51.6441 311.7573 0004586 201.9414 260.8823 15.48581357312130&#39;
        </pre>

        <p>
        Set satellite to ISS and report current ephemeris with respect to DE:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_satname?ISS&#39;
        </pre>

        <p>
        Set Live Spots to report spots made by DE call using wspr on 40, 30 and 20m
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_livespots?spot=by&amp;what=call&amp;data=wspr&amp;bands=40,30,20
        </pre>

        <p>
        Set Pane 3 to rotate through NOAA Space weather, X-Ray flux and DRAP trend:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_pane?Pane3=Space_Wx,X-Ray,DRAP&#39;
        </pre>

        <p>
        Toggle the screen lock padlock:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_touch?x=224&amp;y=132&#39;
        </pre>

        <p>
        Change call sign to say QUIET PLEASE white on red:
        </p><pre>        curl --get &#39;http://192.168.7.101:8080/set_title&#39; --data-urlencode &#39;msg=QUIET PLEASE&amp;fg=255,255,255&amp;bg=red&#39;
        </pre>

        <p>
        ... then restore as per Setup:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_title?&#39;
        </pre>

        <p>
        Change map to Azimuthal projection with Countries style and RSS on, leaving Grid unchanged:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_mapview?RSS=on&amp;Projection=Azimuthal&amp;Style=Countries&#39;
        </pre>

        <p>
        Turn off RSS network feed and clear the local title list:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_rss?reset&#39;
        </pre>

        <p>
        Turn off RSS network feed and add one RSS title to local list:
        </p><pre>        curl --get &#39;http://192.168.7.101:8080/set_rss&#39; --data-urlencode &#39;add=This is a new RSS title&#39;
        </pre>

        <p>
        Turn off RSS network feed and load a file containing up to 15 lines into the RSS title list:
        </p><pre>        curl --data-binary &#39;@mytitles.txt&#39; &#39;http://192.168.7.101:8080/set_rss?file&#39;
        </pre>

        <p>
        Restore normal network RSS operation:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_rss?network&#39;
        </pre>


        <p>
        Load the ADIF file named myfile.adi and select ADIF in data pane 2 (center pane).
        </p><pre>        curl --data-binary &#39;@myfile.adi&#39; &#39;http://192.168.7.101:8080/set_adif?file&amp;pane=2&#39;
        </pre>

        <p>
        Resume reading from the local ADIF file named in Setup page 3, if any
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_adif?none&#39;
        </pre>


        <p>
        Load the BMP file named myimage.bmp in data pane 3 (right pane).
        </p><pre>        curl --data-binary &#39;@myimage.bmp&#39; &#39;http://192.168.7.101:8080/set_bmp?file&amp;pane=3&#39;
        </pre>

        <ul>
            <li>
                To create suitable bmp files from png consider using the netpbm tools as follows:
<pre>    sudo apt install netpbm
    pngtopam myimage.png | pamscale -width=160 | ppmtobmp -bpp 24 -windows &gt; myimage.bmp
</pre>
            </li>
            <li>
                The magic value 160 is for HamClock built as 800x480; use 320, 480 or 640 if
                built as 1600x960, 2400x1440 or 3200x1920, respectively.
            </li>
            <li>
                HamClock does not store the image.
                After the image is loaded, HamClock will continue updating the target pane as before
                which will eventually overwrite the loaded image.
                To maintain the image indefinitely, reload it faster than the updates.
            </li>
        </ul>

        <p>
        Resume pane 3 normal usage
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_bmp?pane=3&amp;none&#39;
        </pre>


        <p>
        Set map grid color to yellow:
        </p><pre>        curl &#39;http://192.168.7.101:8080/set_mapcolor?setup=Map_grid&amp;color=yellow&#39;
        </pre>

        </div> <!-- RESTful -->





        <h3>
             Can I run more than one instance of HamClock at the same time?
        </h3>
        <div>

        <p>
        Yes but you must arrange that they each use different ports and working directories
        so they do not interfere with each other.

        You do this using these command line switches when you start each hamclock:
        </p><ul>
            <li>
                <code>-e</code> sets a different REST API port
            </li>
            <li>
                <code>-w</code> sets a diffrrent web port
            </li>
            <li>
                <code>-d</code> sets a different working directory
            </li>
        </ul>

        <p>
        For example, to run hamclock using port 9080 for the RESTful API, 9081 for the web interface and
        /tmp/hamclock2 for the working directory, start hamlock as follows:

        </p><pre>        hamclock -e 9080 -w 9081 -d /tmp/hamclock2
        </pre>

        <p>
        If you don&#39;t need one or both of the networking options,
        specify port -1 to turn either one off completely.

        </p><p>
        Type <code>hamclock -help</code> for a full list of switches and their
        respective default values.

        </p></div> <!-- multiple hamclocks -->



        <h3>
             Can you make an option that shows the map full size?
        </h3>
        <div>

        <p>
        In theory, yes, but given the current internal software architecture this would be very difficult.

        </p><p>
        A key difficulty is that HamClock has no menu bar.
        This means there would be no way to control features that currently use the surrounding panes which,
        when you think about it, is almost everything.
        And adding a menu bar would require changing the internal structure of the program so completely
        it might as well become a separate program.

        </p><p>
        Another challenge would be the need for yet another set of map resolutions.
        This means all the various map styles (MUF, Auroras, Weather, etc etc) would all need to be
        generated at the new resolutions for each of the four basic build sizes.
        Generating the maps on demand is already the single highest load on my backend server, so adding
        more sizes would further increase this load.

        </p><p>
        So again, yes it&#39;s possible because HamClock is afterall &#34;just&#34; software,
        but for now it&#39;s well beyond my available resources.

        </p></div> <!-- full screen map-->





        <h3>
             Can I use a USB-I2C bridge to access I2C peripherals via USB on my linux system?
        </h3>
        <div>

        <p>
        Yes.
        HamClock supports two choices:
        the generic CH341T available from several places online
        and both the full and mini bridges from
        <a target="_blank" href="https://i2cdriver.com">i2cdriver.com</a>.

        </p><ol>

            <li>

                The i2cdriver bridge is by far the easier of the two to use.

                <ol>
                    <li>
                    Plug the bridge into a USB socket and connect the BME280 or other I2C
                    devices supported by HamClock to the bridge. 
                    </li>

                    <li>
                    In a terminal, type <code>ls /dev/cu.usbserial*</code>.
                    Look for a new entry that appears only when the bridge is installed.
                    </li>

                    <li>
                    Start HamClock and go to Setup page 4.
                    Enter the full path in the I2C field.
                    </li>

                    <li>
                    Click Done and let HamClock finish booting.
                    </li>
                </ol>

            </li>

            <li>

                The CH341T is more work.

                <ol>
                    <li>
                    Download the linux driver from
                    <a target="_blank" href="https://github.com/gschorcht/i2c-ch341-usb">https://github.com/gschorcht/i2c-ch341-usb</a>.
                    You need this because even though standard linux already includes a CH341 driver,
                    it only supports the tty capability of the chip, not the I2C.
                    </li>
                    
                    <li> 
                    Edit <code>i2c-ch341-usb.c</code> line 660 from
    <pre>   
        ch341_dev-&gt;irq_descs[i] = irq_to_desc(ch341_dev-&gt;irq_base + i);
    </pre>      
                    to
    <pre>   
        ch341_dev-&gt;irq_descs[i] = irq_data_to_desc(irq_get_irq_data(ch341_dev-&gt;irq_base + i));
    </pre>  
                    </li>
                
                    <li>
                    Now follow the build and install instructions on the github site.
                    </li>

                    <li>
                    Run <code>lsmod</code> and check that <code>i2c_ch341_usb</code> module is installed.
                    </li>

                    <li>
                    Attach your BME280 to the CH341 and plug it into a USB port.
                    I find that using a USB 3 port is much more reliable than a USB 2 port.
                    </li>

                    <li>
                    Run <code>ls /dev</code> and confirm there is a node of the form <code>i2c-N</code>,
                    where N is some number.
                    </li>

                    <li>
                    Run <code>sudo i2cdetect -y N</code> and confirm it shows the I2C address of your BME280,
                    either 77 or 76.
                    </li>

                    <li>
                    Start HamClock and go to Setup page 4.
                    Turn on the I2C field and enter the full path you found above.

                    </li><li>
                    Click Done and let HamClock finish booting.
                    </li>
                </ol>

            </li>

        </ol>

        <p>
        The devices function the same as if connected via the native I2C bus,
        although substantially slower.

        </p><p>
        Note the native RPi I2C header pins and these USB bridges can not work at the same time.

        </p></div> <!-- USB-I2C -->




        <h3>
             Why does the time stall occasionally?
        </h3>
        <div>

        <p>
        It is because HamClock is only a single thread of execution so it can only do one thing at a time.
        Thus, if the network connection
        is slow everything hangs during file downloads and it can&#39;t update the time digits.
        HamClock tries to reduce this effect by reading in fairly small chunks and
        updating the time after each chunk completes, but it can still look jerky.

        </p><p>
        Note the stalling does not affect the accuracy of the internal time keeping because that
        uses a hardware interrupt, so time proceeds apace regardless of the display.

        </p></div> <!-- stalling -->





        <h3>
             How accurate is HamClock weather data?
        </h3>
        <div>

        <p>
        The accuracy of the reports depends on several factors.

        </p><ul>
            <li>
                The data plan I have with 
                <a target="_blank" href="https://openweathermap.org">Open Weather Map</a>
                provides updates at least every two hours and uses a grid
                spacing of about ten miles.
                They do offer plans that provide much shorter delays and smaller grids but I am not willing
                to pay for them just for HamClock.
            </li>

            <li>
                Some of their data comes from models, not actual measurements.
                This allows them to appear to offer seamless global coverage even in areas that
                clearly could not have any measuring capabilities, but at the risk of modeling errors.
            </li>

            <li>
                HamClock queries for weather using the latitude and longitude given for DE.
                So the more accurate you specify your location, the better will be the results.
            </li>
        </ul>

        </div> <!-- weather -->




       <h3>
             Can I copy a configuration to another computer?
        </h3>
        <div>

        <p>
        Yes, but first a little background.

        </p><p>
        Each instance of HamClock needs its own working directory for supporting files.
        By default this is <code>$HOME/.hamclock</code> (note the leading dot).
        One file therein is called <code>eeprom</code> which contains all the configuration settings.
        This file is used a lot at runtime so don’t change it while hamclock is running.

        </p><p>
        So, to copy a hamclock configuration from computer A to B:
        </p><ul>
            <li>create or use an existing directory $HOME/.hamclock on B</li>
            <li>copy the file eeprom from A to B in said directory</li>
        </ul>

        <p>
        You don’t have to copy any of the other files in the directory,
        they take care of themselves automatically.
        And, again, don’t perform this copy while a hamclock is running on either system.

        </p><p>
        If you would like to keep multiple configurations on the same computer,
        use the command line option <code>-d</code> to specify some other working directory.
        Hamclock will create the specified directory if it doesn’t already exist.
        So for example, to use a separate working directory for someone with a call W9ABC,
        they could run hamclock like this:

        </p><pre>        hamclock -d $HOME/.hamclock-w9abc
        </pre>

        <p>
        You can even run several hamclocks at the same time on the same machine, see FAQ 43 and
        User Contrib item 12.

        </p></div> <!-- multi config -->





        <h3>
             Can I control HamClock with just a keyboard (no mouse)?
        </h3>
        <div>

        <p>
        Almost on the native GUI interface, definitely not on ESP8266 or the web browser interface.

        </p><p>
        The reason for &#34;almost&#34; is that the HamClock window must have what&#39;s called the &#34;focus&#34;
        in order for it to receive any keyboard events,
        and usually the only way to do that is to click the mouse once inside the HamClock window!
        The only way around this catch I know of is that most window managers have options such
        as &#34;focus follows mouse&#34; or &#34;focus on new windows&#34; which may help if you can find them.

        </p><p>
        But once HamClock has the focus then <i>yes indeed</i>,
        it can be completely controlled from the keyboard as follows:

        </p><ul>
            <li> <code>hjkl</code> or <code>arrow keys</code> move the red arrow cursor
                 left-down-up-right (same as the vi editor)
            </li>
            <li> accompanying these with <code>shift</code> and/or <code>control</code> will
                 multiply the step size by 2 and/or 4, respectively
            </li>
            <li> <code>space</code> or <code>Enter</code> will do the same as a mouse click
                 at the current cursor location
            </li>
            <li> accompanying these with <code>shift</code> and/or <code>control</code> will
                 function as a long hold
            </li>
            <li> If you enter a menu then:
                <ul>
                    <li> <code>hjkl</code> or <code>arrow keys</code> will navigate the items as a matrix
                    </li>
                    <li> <code>space</code> will toggle selections
                    </li>
                    <li> <code>Enter</code> will function as &#34;Ok&#34;
                    </li>
                    <li> <code>ESC</code> will function as &#34;Cancel&#34;.
                    </li>
                </ul>
            </li>
        </ul>

        <p>
        <i>Historical note:</i>
        Even though keyboard cursor control has been available by default for a long time,
        <i>starting with version 3.01 it will require that you start hamclock with the <code>‑y</code>
        command line option.</i>
        I decided to disable it by default because too many people are laying things on their keyboard
        causing it to repeat endlessly, which sends zillions of commands to my server for hours on end
        without their realizing it.
        Note that ‑y only applies to cursor control;
        the Setup pages and menus continue to work the same as always with or without ‑y.

        </p></div> <!-- keyboard -->





        <h3>
             How can I connect the photocell to an RPi hamclock?
        </h3>
        <div>

        <p>
        You can not connect an actual photocell directly to an RPi because it has no ADC input.

        </p><p>
        But you can connect an LTR-329 light sensor via I2C.
        I use 
        <a target="_blank" href="https://www.adafruit.com/product/5591">this breakout from Adafruit</a>.
        HamClock supports connecting it directly to the I2C pins 3 and 5 on the RPi 40 pin header,
        or using the USB-I2C bridge from
        <a target="_blank" href="https://i2cdriver.com">i2cdriver.com</a>.
        The bridge has the advantage that it will work on any UNIX system with a USB port,
        such as linux or macOS desktops.
        It even works on the RPi too, if you find USB to be more convenient than using the 40 pin header.

        </p><p>
        Once connected, the I2C light sensor supports the same HamClock functions as the photocell.
        See page 8 of the User Guide.

        </p><p>
        Note you can use the BME280 environment sensor in this manner also, see FAQ 45.

        </p><p>
        Unfortunately, I have not managed to get the native RPi I2C pins and the i2cdriver to work
        at the same time.
        So you must use one or the other for both BME280 and the LTR-392 light sensor.

        </p></div> <!-- pi photocell -->





        <h3>
             Why am I getting slow responses or lots of connection errors?
        </h3>
        <div>

        <p>
        HamClock needs a good internet connection so check that first.
        For example check that <code>ping clearskyinstitute.com</code>
        reports no dropped packets and round-trip times of about 50 ms or better.
        On WiFi, check that your RSSI is at least -60 or above
        (HamClock reports the RSSI just below your call sign).
        Even with a good signal, you might have local RF interference being created by other devices
        or appliances.
        If in doubt, consider moving your HamClock closer to your WiFi router with a clear line-of-site.

        </p><p>
        If the network looks good, it might be my server has blocked your public IP address.
        As HamClock becomes more popular, it seems to be inevitable it will also
        attract a few who want to ruin it for the many and that is indeed the case.

        </p><p>
        To combat this, I have implemented a monitor on my server that temporarily
        blocks any IP that makes rapid repeated connections.
        I can tune the parameters but as of Jan 2024 the rate threshold is faster than 
        one contact every four seconds sustained for a period of five minutes.
        Once blocked the IP will remain blocked, regardless of its contact rate,
        for three hours.

        </p><p>
        There is no legitimate HamClock usage that will cause a block but a few times
        I have found someone has a stuck keyboard or mouse button
        which causes HamClock to repeatedly make queries over and over.

        </p><p>
        If you feel you have been unfairly caught in my trap,
        feel free to make your case in an email to me at
        <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">
            ecdowney@clearskyinstitute.com</a>.

        </p></div> <!-- blocked ip -->





        <h3>
             Can I assign a password to certain sensitive commands?
        </h3>
        <div>

        <p>
        Yes, but first an important warning:

        </p><p>
        <b>I MAKE NO CLAIMS AS TO THE EFFECTIVENESS OF THIS FEATURE AND I ACCEPT NO RESPONSIBILITY
        IF IT IS BREACHED AND YOUR SYSTEMS ARE COMPROMISED. USE AT YOUR OWN RISK</b>.

        </p><p>
        To assign a password to certain potentially sensitive operations within HamClock 
        run it with the <code>-p</code> option,
        followed by the name of a text file containing pairs of categories and passwords.
        The file must be formatted according to the following rules:
        </p><ul>
            <li>Empty lines and those beginning with # are ignored.</li>
            <li>All other lines must begin with a category
                followed by one or more spaces or tabs,
                then all remaining characters define its password,
                including any embedded spaces.
            </li>
            <li>Categories may appear in any order.</li>
            <li>Categories not in the file, or if misspelled, behave as if no password is required.</li>
            <li>Categories and passwords are both case sensitive </li>
            <li>The categories available as of HamClock V3.05 are:
            </li><code>
            </code>
        </ul>

        <p>
        For example, if a text file named
        <code>hamclock_passwords.txt</code> contains the following:
        </p><pre>        # my hamclock passwords
        shutdown ^&amp;%@JJH78
        unlock my unlock password
        </pre>

        <p>
        then enable the two passwords by running hamclock as:
        </p><pre>        hamclock -p hamclock_passwords.txt
        </pre>

        <p>
        Implementation notes:
        </p><ul>
            <li>
                As each password is read from the file,
                it is immediately hashed using a 32 bit CRC then the memory
                containing the password is reset to a fixed value.
                The hamclock process stores only this CRC value, not the plain text.
            </li>
            <li>
                Passwords entered in the GUI are hashed with the same algorithm and considered a match
                if the CRC values agree.
                The plain text passwords themselves are never compared.
            </li>
            <li>
                Of course the passwords still exist long term in the file specified with <code>-p</code>.
                </li>
            <li>
                These passwords do <i>not</i> apply to RESTful commands nor to 
                commands engaged automatically via Demo mode.
            </li>
            <li>
                The list of categories can not be changed by the user. 
                <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">
                    Send me a note
                </a>
                if you would like to suggest additional categories.
            </li>
        </ul>

        
        </div> <!-- passwords -->




        <h3>
             My question is not here, where can I get help?
        </h3>
        <div>

        <p>
        Send me a note at
        <a target="_blank" href="mailto:ecdowney@clearskyinstitute.com?subject=HamClock">ecdowney@clearskyinstitute.com</a> but beware:

        </p><ol>
            <li> Be polite or your email will simply be discarded.
            </li>
            <li> If you installed or purchased HamClock using someone else&#39;s instructions,
                 contact them, not me.
            </li>
        </ol>

        <p>
        If you are submitting a bug report, always include:

        </p><ol>
            <li>HamClock version </li>
            <li>platform: ES8266 or UNIX/linux platform, distro and version </li>
            <li>a clear and concise statement of what you expected to see ... </li>
            <li> ... what you actually see ... </li>
            <li> ... and instructions for how to reproduce the unexpected result.
        </li></ol>

        <p>
        If using any UNIX system, also include the following as you feel might be helpful:
        </p><ul>
            <li>which <code>make</code> target you built </li>
            <li>display screen size and video type such as DSI or HDMI </li>
            <li>whether you are using VNC or a web connection</li>
            <li>whether you are using GUI in Full-screen mode</li>
            <li>pertinent Setup settings </li>
        </ul>

        <p>
        Thank you. Your coorperation will help us both find a resolution to your issue more quickly.

        </p></div>    <!-- help -->

        </div>    <!-- accordion-faq -->

    </div><div id="tab-contrib">

        <p>

        All contributed scripts referred to below are available in this
        <a target="_blank" href="https://www.clearskyinstitute.com/ham/HamClock/hamclock-contrib.zip">zip file</a>


        <!-- accordions. all must be in one div, then each must be surrounded by h3/div -->

        </p><div id="accordion-contrib">


        <h3>
             Tips for Executing and Displaying HamClock on Windows 10
        </h3>
        <div>

        <p>
        Contributed by Joeri van Dooren, ON3URE

        </p><ol>
            <li> In windows download <a target="_blank" href="https://sourceforge.net/projects/vcxsrv">
                https://sourceforge.net/projects/vcxsrv</a> </li>
            <li> Install; choose single windows </li>
            <li>
                 <a target="_blank" href="https://www.digitalocean.com/community/tutorials/how-to-install-the-windows-subsystem-for-linux-2-on-microsoft-windows-10">In Windows install WSL2 with ubuntu.</a>
            </li>
            <li> Start wsl.exe </li>
            <li> sudo apt update </li>
            <li> sudo apt -y install g++ libx11-dev wget </li>
            <li> wget https://www.clearskyinstitute.com/ham/HamClock/ESPHamClock.zip </li>
            <li> unzip ESPHamClock.zip </li>
            <li> cd ESPHamClock </li>
            <li> make hamclock-800x480 </li>
            <li> sudo make install </li>
            <li> export DISPLAY=:0 </li>
            <li> /usr/local/bin/hamclock </li>
        </ol>

        </div>  <!-- Win10 -->




        <h3>
             More tips for Executing and Displaying HamClock on Windows 10 and 11
        </h3>
        <div>

        <ul>
            <li>
                Contributed by Thanasis, M7SYR
                </li>

            <li>
                Contributed by Manos, SV1DAY
                </li>
        </ul>

        </div>  <!-- Win10-11 -->





        <h3>
             Automating qrz page from spots
        </h3>
        <div>

        <p>
        Contributed by Hans Klausmann, DL5RAZ

        </p><p>
        see dl5raz.py.


        </p></div> <!-- dl5raz --> 





        <h3>
             Script to simplify sending web commands from command line
        </h3>
        <div>

        <p>
        Script by Barry, N0NZ

        </p><p>
        Documentation <a target="_blank" href="https://www.clearskyinstitute.com/ham/HamClock/hamclock-contrib/hcmd.py.docx">here</a>.

        </p></div>  <!-- N0NZ -->






        <h3>
             Script to read and write the eeprom config file
        </h3>
        <div>

        <p>
        Contributed by Elwood Downey, wb0oew@arrl.net

        </p><p>
        Someone asked if they could edit the <code>eeprom</code> config file.
        Normally no, but since I enjoy writing perl,
        I couldn&#39;t resist writing <code>hceeprom.pl</code> to do exactly that.
        You can download it within the contrib collection
        <a target="_blank" href="https://www.clearskyinstitute.com/ham/HamClock/hamclock-contrib.zip">here</a>.

        </p><p>
        Save the script anywhere in your PATH and make it executable as usual.
        The script needs to know the directory containing the source files
        and the path to the eeprom file.
        By default these are assumed to be the current directory and
        <code>~/.hamclock/eeprom</code>, respectively,
        but these can be changed with the <code>-s</code> and <code>-e</code> options.
        Run the script with no args or <code>--help</code> for a complete usage summary.

        </p><p>
        Note well: you are hacking a file not intended for human consumption, so you can easily
        mess things up.
        There&#39;s no validation checking whatsoever, so you could go right ahead and 
        set preposperous values such as a longitude of 10000 or
        inconsistent values such as a lat/long that doesn&#39;t match the grid square sending HamClock
        into unexplored territory.
        Save a copy of eeprom before starting, or remove it then run HamClock so it will
        build a new one containing all defaults.
        Never edit the file while HamClock is running because HamClock often updates it, but only reads it
        once when starting up.
        You have been warned.

        </p><p>
        What ever, let&#39;s try it! Here are some examples:

        </p><p>
        Read the call sign:
        </p><pre>        hceeprom.pl NV_CALLSIGN
        NV_CALLSIGN = WB0OEW
        </pre>

        <p>
        Set a new call sign:
        </p><pre>        hceeprom.pl NV_CALLSIGN AB1XYZ
        NV_CALLSIGN = AB1XYZ
        </pre>

        <p>
        Set the DX cluster host:
        </p><pre>        hceeprom.pl NV_DXHOST usdx.w1nr.net
        NV_DXHOST = usdx.w1nr.net
        </pre>

        <p>
        Set DX spots to show as full call sign
        </p><pre>        hceeprom.pl NV_MAPSPOTS 2
        NV_MAPSPOTS = 2
        </pre>

        <p>
        Set the BME280 at I2C address 77 temperature correction:
        </p><pre>        hceeprom.pl NV_TEMPCORR2 -0.23
        NV_TEMPCORR2 = -0.23
        </pre>

        </div>  <!-- hceeprom.pl --> 







        <h3>
             Script to query for any space weather datum
        </h3>
        <div>

        <p>
        Contributed by Elwood Downey, wb0oew@arrl.net

        </p><p>
        This script <code>hcgetsw.sh</code> queries HamClock for the most recent value of any space weather
        data it provides.
        Run the script with -help for a complete list.

        </p></div>  <!-- hcgetsw script -->








        <h3>
             Script to send any RSS feed to HamClock
        </h3>
        <div>

        <p>
        Contributed by Elwood Downey, wb0oew@arrl.net

        </p><p>
        HamClock does not allow setting individual RSS feeds, see FAQ 20 for the reason why.
        But this script uses the web-based RSS title loading facility <code>set_rss</code> to read any
        RSS feed and load its titles into HamClock.

        </p><p>
        To use the script, just give it the host name (or IP) of your HamClock followed by the full URL
        of the RSS to load.
        For example:

        </p><pre>        hcrss.pl 192.168.7.117 https://www.arrl.org/news/rss
        </pre>

        </div>  <!-- hcrss script -->





        <h3>
             Instructions for macOS dual screen
        </h3>
        <div>

        <p>
        Contributed by AL7CR.

        </p><p>
        These settings allow a full screen Hamclock with no menu or borders on one display
        and a fully useable Mac desktop on the other.
        Tested on XQuartx 2.7.11 under High Sierra 10.13.6.
        The steps are:

        </p><ol>
            <li>
            Set &#34;Displays have separate spaces&#34;  otherwise running HamClock will cause the second screen
            to be black whether or not it is set to full screen mode.
            </li>

            <li>
            Set &#34;Assign to Display&#34; to the desired display.  This is done by right clicking the
            XQuartz icon in the dock and selecting the desired display.
            This option only appears if you have multiple displays.
            </li>

            <li>
            Autohide Dock and Menubar as for a single screen.
            Note that this setting is system wide and not per screen as you might expect.
            </li>

            <li>
            And the key point, in XQuartz preferences disable full screen mode.
            If this is not done Hamclock will disappear when it&#39;s window loses the system focus.
            Command-Option-A will make it reappear however you will not be able to work in
            one screen with Hamclock in the other unless XQuartz full screen is disabled.
            </li>

        </ol>
 
        </div>  <!-- macOS dual screen script -->






        <h3>
             Arch User Repository
        </h3>
        <div>

        <p>
        Contributed by KJ7RRV.

        </p><p>
        HamClock is available in the
        <a target="_blank" href="https://aur.archlinux.org">Arch User Repository</a>
        <a target="_blank" href="https://aur.archlinux.org/packages?O=0&amp;K=hamclock">here</a>.
        The package names are:

        </p><ul>
            <li>
            hamclock (800x480)
            </li>

            <li>
            hamclock-big (1600x960)
            </li>

            <li>
            hamclock-bigger (2400x1440)
            </li>

            <li>
            hamclock-huge (3200x1920)
            </li>
        </ul>

        </div>  <!-- arch -->





        <h3>
             Running HamClock on ProxMox
        </h3>
        <div>

        <p>
        Contributed by NI2O.

        </p><p>
        <a target="_blank" href="https://www.clearskyinstitute.com/ham/HamClock/hamclock-contrib/HamClock%20on%20ProxMox.pdf">This pdf</a>
        shows how to configure HamClock to operate in an LXC container on a ProxMox server.

        </p></div>  <!-- proxmox -->





        <h3>
            Compile HamClock statically so it will run on <i>e.g.</i> TrueNAS.
        </h3>
        <div>

        <p>
        Contributed by M1JKL.

        </p><p>
        <a target="_blank" href="https://www.truenas.com/">TrueNAS</a>
        allows you to run Docker containers and VMs of all sorts; in my
        case, all I wanted to do was to run Hamclock as a service and hence it
        seemed a massive overkill to go down the VM/Docker route - hundreds of
        MB of installed space used up for a simple executable.

        </p><p>
        So this is what I did:

        </p><ol>
            <li>

                edit the Makefile to say CXX = g++ -static

            </li>
            <li>

                run make with the hamclock configuration of your choice e.g.
<pre>make -j 4 hamclock-web-1600x960
</pre>

            </li>
            <li>

                copy the resulting hamclock executable to your truenas
                directory of choice, maybe in your home and make it executable

            </li>
            <li>

                go to ~/ and check it runs
<pre>$ ./hamclock
</pre>

            </li>
            <li>

                Truenas natively contains tmux which is a terminal multiplexer,
                so running something like
<pre>$ tmux ./hamclock
</pre>
                allows you to close the truenas login session whilst detaching from the
                still-running hamclock.

            </li>
        </ol>

        <p>
        I did this a few weeks ago so the description above is from memory.
        Anyone with a bit of linux knowledge (I have almost none!) will work out
        a more elegant approach to establish it as a true service by using
        things like init.d or /etc/rc.local.


        </p></div>  <!-- static truenas -->





        <h3>
            Web proxy to control multiple independent web hamclocks from the same URL
        </h3>
        <div>

        <p>
        Contributed by WB0OEW.

        </p><p>
        Suppose you wanted to provide one URL for club members to access HamClock
        from anywhere they could access a browser. 
        You could start one HamClock and publish its live web connection directly
        but as soon as more than one person connected they would interfere and things
        will get confusing and frustrating pretty quickly.

        </p><p>
        This little program solves that by functioning as a multiplexing proxy.
        It listens to the same port 8081 as a real HamClock, but runs a separate
        instance of hamclock for each IP reported by connecting browsers.

        </p><p>
        To give it a try, extract the program from the
        contrib collection mentioned at the top of this tab.
        The entire program is self-contained in a single file named <code>hcwebproxy.cpp</code>.
        Also, since the hamclocks that the proxy will run are only useful on the web,
        it is recommended to build a web-only hamclock just for use by the hcwebproxy.
        If this is how you normally build hamclock anyway then you can continue to use that one.

        </p><p>
        Putting it all together, assuming you want to use a different hamclock just for
        hcwebproxy, the procedure might go something like this:
        </p><pre>        cd ~
        curl -O &#39;https://clearskyinstitute.com/ham/HamClock/hamclock-contrib.zip&#39;
        unzip hamclock-contrib.zip
        cd hamclock-contrib
        make hcwebproxy
        sudo make install
        cd ~/ESPHamClock
        make hamclock-web-1600x960
        sudo mv hamclock-web-1600x960 /usr/local/bin
        sudo chown root /usr/local/bin/hamclock-web-1600x960
        sudo chmod u+s /usr/local/bin/hamclock-web-1600x960
        hcwebproxy -d ./hcwebproxy-hamclocks -h hamclock-web-1600x960 -i 240 -m 3 -v -- -t 50 &gt; x.hcwp &amp;
        </pre>

        <p>
        <i>The main reason for escalating to root privilege is to allow remote updates.
        See FAQ 19 for more information.</i>

        </p><p>
        Now surf to the usual URL such as <code>http://<i>your-host</i>:8081/live.html</code>
        and you should get a new HamClock.

        </p><p>
        Try these additional tests to understand different use cases:
        </p><ul>
            <li>
                Open another tab on the same browser to the same URL and you will share
                the same HamClock because the browser is reporting the same IP.
                Any changes in one tab will be immediately reflected in the other.
                You can have as many connections as desired open at the same time.
            </li>
            <li>
                Now close all connection tabs then open a new connection to the same URL.
                You will be reconnected to the same instance already running because
                the browser reports the same IP.
            </li>
            <li>
                Open the URL from a different computer and you will get a
                completely new HamClock with default settings, different from
                the instance from the first computer.
                Opening additional connections will connect to the same instance.
                Also see the note below regarding NAT routers.
            </li>
        </ul>

        <p>
        Futher notes:
        </p><ul>
            <li>
                This requires running HamClock version 2.91 or newer.
            </li>
            <li>
                Remember that all computers behind a NAT router connecting to a public IP
                will report as coming from the same public IP of the NAT.
                Thus, they will all share the same hamclock instance.
            </li>
            <li>
                Many simultaneous running hamclocks can be a large system load,
                so consider using the <code>-m</code> option to limit the maximum number accordingly.
                The default is 10 processes.
                Attempts to connect when this maximum has been reached will result in 
                a brief informative message.
                Also see -i, next.
            </li>
            <li>
                If the -m limit is reached when a new connection is attempted, hamclock processes
                that have been idle longer than <code>-i</code> hours are eligible for reassignment to handle
                the new connection. The default is 24 hours.
            </li>
            <li>
                Another way to mitigate high system load is to throttle back the maximum CPU usage
                for each HamClock.
                This is controlled by HamClock&#39;s own <code>-t</code> option which you can set
                using hcwebproxy&#39;s <code>--</code> option.
                Note well that this will reduce the responsiveness of each hamclock so use wisely.
                For example, to limit each hamclock to no more than 20% CPU:
    <pre>    hcwebproxy -h hamclock-web-1600x960 -- -t 20 &amp;
    </pre>
            </li>
            <li>
                Since more than one HamClock may well be running on the same host, note well that the
                features that use external hardware should only be activated on at most one at a time.
                This refers to everything on the last page of User Guide.
                HamClock itself tries to enforce single access but beware of this limitation.
            </li>
            <li>
                I actually find this so useful that I now always use this to access HamClock running
                on my RPi even if I just run one hamclock.
                Reason being that the hamclock processes are sleeping when I am not
                connected and the Pi runs much cooler most of the time.
                Plus it&#39;s super handy to check propagation conditions and my WSPR reports using
                my iPhone when away from the shack.
            </li>
            <li>
                If something goes terribly wrong, hcwebproxy will try to kill all the hamclock
                processes it knows about before it exits.
                To investigate why, run hcwebproxy again with <code>-v</code> for debug info
                and try to reproduce the problem. Send me the log if it seems like a bug.
            </li>
            <li>
                Even if hcwebproxy dies and all hamclocks get killed, their settings will be restored
                after a restart because all hamclock working directories are stored in separate 
                directories named by the connection IP. The directory in which these are created
                can be set with the <code>-d</code> option, the default is
                <code>$HOME/hcwebproxy-hamclocks</code>.
            </li>
            <li>
                Since all hamclock instances share the same program file, when any one of them performs a
                remote update, all subsequent hamclocks will use the newer version as well.
                Thus, after one hcwebproxy client does an update, merely <i>restarting</i> the others
                will update them also without requiring an actual <i>update</i>.
            </li>
            <li>
                Normally hcwebproxy disables the RESTful API ports on the hamclocks it starts because
                it is awkward to find the one you want. 
                Nevertheless, if this is important for your use case, you can use the
                <code>-a</code> option to assign each hamclock its own RESTful API port. 
                The port numbers are assigned sequentially starting with the value given with -a.
                No attempt is made to avoid ports already in use by other applications so choose wisely.
                The problem remains how to know which hamclock is using which port; this is
                left as an exercise for the reader.
            </li>
            <li>
                You can see what hcwebproxy is doing with a shell command such as:
    <pre>    ps ax | egrep &#39;hamclock|hcwebproxy&#39; | grep -v egrep
    </pre>
                The processes with status T are sTopped.
            </li>
        </ul>

        </div>  <!-- multi hamclock proxy -->



        <h3>
            Script to simplify running curl
        </h3>
        <div>

        <p>
        Contributed by WB0OEW.

        </p><p>
        Copy/paste the following into a file named <code>hccurl</code> and use
        it to send commands to hamclock that require embedded spaces.
</p><pre>#!/bin/bash
# run curl with spaces

if [ $# -lt 3 ] || [ $# -gt 4 ] ; then
    echo Purpose: curl wrapper for sending hamclock commands with or without embedded spaces
    echo Usage: hccurl host port command &#39;[value]&#39;
    echo Example set: hccurl 192.168.7.101 8080 set_title &#34;&#39;&#34;&#39;msg=QUIET PLEASE&amp;fg=255,255,255&amp;bg=red&#39;&#34;&#39;&#34;
    echo Example get: hccurl 192.168.7.101 8080 get_config.txt
else
    HOST=&#34;$1&#34;
    PORT=&#34;$2&#34;
    CMD=&#34;$3&#34;
    if [ $# -eq 3 ] ; then
        curl --get &#34;http://$HOST:$PORT/$CMD&#34;
    else
        VALU=&#34;$4&#34;
        curl --get &#34;http://$HOST:$PORT/$CMD&#34; --data-urlencode &#34;$VALU&#34;
    fi
fi

</pre>

        </div>  <!-- multi hamclock proxy -->




        <h3>
            Install HamClock using Docker
        </h3>
        <div>

        <ul>

            <li>

                Contributed by Julius, DO7JZ.

                <p>
                I&#39;ve got no Pi but servers and Linux machines.
                So I thought, I&#39;d create an easy way to run HamClock using Docker, exposing it as a website.
                The code and instructions can be found at
                    <a target="_blank" href="https://github.com/zeidlos/hamclock-docker">
                        https://github.com/zeidlos/hamclock-docker</a>.

                </p><p>
                I have not tested it on Windows, but potentially it&#39;ll run in WSL2.
                Works fine on my MacBook as well as my Linux-Server.
                I&#39;m pretty sure it&#39;s an easy way to install/run on Raspberry Pi,
                or NAS Systems that support Docker/Docker-Compose as well.

                </p><p>
                73

            </p></li>

            <li>
                Contributed by Chris, NZ6F

                <p>
                A complete docker implementation with supporting information is at
                    <a target="_blank" href="https://github.com/ChrisRomp/hamclock-docker">
                        https://github.com/ChrisRomp/hamclock-docker</a>.

            </p></li>
        </ul>


        </div>  <!-- Docker -->




        <h3>
            Connect HamClock with N3FJP logger
        </h3>
        <div>

        <p>
        Contributed by Chris, NZ6F

        </p><p>
        <a target="_blank" href="https://github.com/ChrisRomp/n3fjp2hamclock">N3FJP2HamClock</a>
        is a Windows application to synchronize HamClock with the call sign entry
        field in N3FJP logger applications.
        This application connects to the N3FJP API server, and when you tab out of the call sign field,
        it will update your HamClock(s) with the DX of the entered call.

        </p></div>  <!-- N3FJP2HamClock -->


        <h3>
            How to install and run HamClock on Android
        </h3>
        <div>

        <p>
        Contributed by Todd, N9MWB

        </p><p>
        Install UserLAnd on your android device from the play store.

        </p><p>
        Start UserLAnd and create a new Debian App.  Select:
</p><pre>        Desktop environment: Minimal
        Connection Type: Graphical
        Orientation: either
</pre>

        <p>
        You can also choose Ubuntu or probably another app, but the instruction will be slightly different.
        These instructions have worked fine for me with Debian.

        </p><p>
        I recommend using a vnc viewer such as RealVNC from my laptop/desktop once you have your UserLAnd
        session started.
        On the device, when the UserLAnd session comes up, click outside the terminal window and select
        the keyboard icon.
        Click on the terminal window and run vncpasswd and set the vnc password to something you&#39;ll remember.
        Then from a regular computer where you have a vnc viewer installed (I used RealVNC&#39;s viewer),
        vnc into the UserLAnd session.
        You might have to install net-tools and get your UserLAnd session&#39;s IP address,
        although it should be the same as the devices IP address.
        Then connect to ip-address:5951.
        At this point, you should be ready to install hamclock into your UserLAnd session.

        </p><p>
        For Debian

</p><pre>        sudo apt update -y
        sudo apt upgrade -y
        sudo apt-get -y install curl make g++ libx11-dev libgpiod-dev zip
        cd
        rm -fr ESPHamClock
        curl -O http://www.clearskyinstitute.com/ham/HamClock/ESPHamClock.zip
        unzip ESPHamClock.zip
        cd ESPHamClock
        make -j 4 hamclock-800x480     (or 1600x960 or 2400x1440 or 3200x1920 depending upon the screen resolution of your device.
        sudo make install
        hamclock
</pre>

        <p>
        You can now either use hamclock via vnc or connect with a browser to ip-address:8081/live.html

        </p></div>  <!-- Android -->






        <h3>
            Show weather station data as an RSS feed
        </h3>
          <!-- Weather RSS -->





        </div>  <!-- accordion-contrib -->


    </div></div>
  </body>
</html>
