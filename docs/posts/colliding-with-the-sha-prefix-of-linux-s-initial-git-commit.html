<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://people.kernel.org/kees/colliding-with-the-sha-prefix-of-linuxs-initial-git-commit">Original</a>
    <h1>Colliding with the SHA prefix of Linux&#39;s initial Git commit</h1>
    
    <div id="readability-page-1" class="page"><article id="post-body"><h2 id="title">Colliding with the SHA prefix of Linux&#39;s initial Git commit</h2><time datetime="2024-12-30T19:18:53Z" pubdate="" itemprop="datePublished" content="2024-12-30 19:18:53 +0000 UTC">December 30, 2024</time><div><h3 id="or-how-to-break-all-the-tools-that-parse-the-fixes-tag" id="or-how-to-break-all-the-tools-that-parse-the-fixes-tag">Or, how to break all the tools that parse the “Fixes:” tag</h3>

<h2 id="kees-cook-mailto-kees-kernel-org" id="kees-cook-mailto-kees-kernel-org"><a href="mailto:kees@kernel.org" rel="nofollow">Kees Cook</a></h2>

<p>There was a recent discussion about how Linux&#39;s “Fixes” tag, which traditionally uses the 12 character commit SHA prefix, has an <a href="https://lore.kernel.org/lkml/cover.1733421037.git.geert+renesas@glider.be/" rel="nofollow">ever increasing chance of collisions</a>. There are already 11-character collisions, and Geert wanted to raise the minimum short id to 16 characters. This was met with push-back for various reasons. One aspect that bothered me was some people still treating this like a theoretical “maybe in the future” problem. To clear up that problem, I generated a 12-character prefix collision against the start of Git history, commit <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=1da177e4c3f41524e886b7f1b8a0c1fc7321cac2" rel="nofollow">1da177e4c3f4 (“Linux-2.6.12-rc2”)</a>, which shows up in “Fixes” tags very often:</p>

<pre><code>$ git log --no-merges --oneline --grep &#39;Fixes: 1da177e4c3f4&#39; | wc -l
590
</code></pre>

<p>Tools like <code>linux-next</code>&#39;s “<a href="https://github.com/kees/kernel-tools/blob/trunk/helpers/check_fixes" rel="nofollow">Fixes tag checker</a>”, the Linux CNA&#39;s <a href="https://git.kernel.org/pub/scm/linux/security/vulns.git/tree/scripts/dyad" rel="nofollow">commit parser</a>, and my own <a href="https://github.com/kees/ubuntu-cve-tracker/blob/lifetime/scripts/report-kernel-bug-lifetime.py" rel="nofollow">CVE lifetime analysis scripts</a> do programmatic analysis of the “Fixes” tag and had no support for collisions (even shorter existing collisions).</p>

<p>So, in an effort to fix <a href="https://github.com/kees/kernel-tools/commit/5bf6a1e71df59a230ea0e138a82cdf3c5e8f349d" rel="nofollow">these</a> <a href="https://git.kernel.org/pub/scm/linux/security/vulns.git/commit/scripts/dyad?id=3e558e5c01f76cf3246cb82b1f32d9c6a7937c1e" rel="nofollow">tools</a>, I broke them with commit <a href="https://git.kernel.org/pub/scm/linux/kernel/git/kees/linux.git/commit/?h=dev/collide/v6.13-rc2/12-char&amp;id=1da177e4c3f47e316f6a4fdee9ae6a714293eed7" rel="nofollow">1da177e4c3f4 (“docs: git SHA prefixes are for humans”)</a>:</p>

<pre><code>$ git show 1da177e4c3f4
error: short object ID 1da177e4c3f4 is ambiguous
hint: The candidates are:
hint:   1da177e4c3f41 commit 2005-04-16 - Linux-2.6.12-rc2
hint:   1da177e4c3f47 commit 2024-12-14 - docs: git SHA prefixes are for humans
</code></pre>

<p>This is not yet in the upstream Linux tree, for fear of breaking countless other tools out in the wild. But it can serve as a test commit for those that want to get this fixed ahead of any future collisions (or this commit actually landing).</p>

<p>Lots of thanks to the <a href="https://github.com/not-an-aardvark/lucky-commit" rel="nofollow">lucky-commit</a> project, which will grind trailing commit message whitespace in an attempt to find collisions. Doing the 12-character prefix collision took about 6 hours on my <a href="https://developer.nvidia.com/opencl" rel="nofollow">OpenCL</a>-enabled RTX 3080 GPU.</p>

<p>For any questions, comments, etc, see <a href="https://fosstodon.org/@kees/113743400654323146" rel="nofollow">this thread</a>.</p>
</div></article></div>
  </body>
</html>
