<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Suzhou-Tongyuan/jnumpy">Original</a>
    <h1>JNumPy: Writing high-performance C extensions for Python in minutes</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h2 dir="auto"><a id="user-content-install-jnumpy" href="#install-jnumpy" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install JNumPy</h2>
<p dir="auto">Requirements:</p>
<ul dir="auto">
<li>Python &gt;= 3.7</li>
</ul>
<p dir="auto">You can install the Python package <code>jnumpy</code> with the following command:</p>
<p dir="auto"><code>pip install julia-numpy</code>.</p>
<p dir="auto">Note that JNumPy will install julia in <code>JNUMPY_HOME</code> for you, if there is no Julia installation available.</p>
<ol dir="auto">
<li>
<p dir="auto">write and export julia functions in file <code>example.jl</code></p>
<div data-snippet-clipboard-copy-content="module example

using TyPython
using TyPython.CPython

@export_py function mat_mul(a::StridedArray, b::StridedArray)::StridedArray
    return a * b
end

function init()
    @export_pymodule example begin
        jl_mat_mul = Pyfunc(jl_mat_mul)
    end
end

end"><pre><span>module</span> example

<span>using</span> TyPython
<span>using</span> TyPython<span>.</span>CPython

<span>@export_py</span> <span>function</span> <span>mat_mul</span>(a<span>::</span><span>StridedArray</span>, b<span>::</span><span>StridedArray</span>)<span>::</span><span>StridedArray</span>
    <span>return</span> a <span>*</span> b
<span>end</span>

<span>function</span> <span>init</span>()
    <span>@export_pymodule</span> example <span>begin</span>
        jl_mat_mul <span>=</span> <span>Pyfunc</span>(jl_mat_mul)
    <span>end</span>
<span>end</span>

<span>end</span></pre></div>
</li>
<li>
<p dir="auto">initialize and import the julia functions in Python</p>
<div data-snippet-clipboard-copy-content="from jnumpy import init_jl, exec_julia, include_src
import jnumpy as np
init_jl()
include_src(&#34;example.jl&#34;, __file__)
exec_julia(&#34;example.init()&#34;)

from example import jl_mat_mul

x = np.array([[1,2],[3,4]])
y = np.array([[4,3],[2,1]])
jl_mat_mul(x, y)
# array([[ 8,  5],
#       [20, 13]])"><pre><span>from</span> <span>jnumpy</span> <span>import</span> <span>init_jl</span>, <span>exec_julia</span>, <span>include_src</span>
<span>import</span> <span>jnumpy</span> <span>as</span> <span>np</span>
<span>init_jl</span>()
<span>include_src</span>(<span>&#34;example.jl&#34;</span>, <span>__file__</span>)
<span>exec_julia</span>(<span>&#34;example.init()&#34;</span>)

<span>from</span> <span>example</span> <span>import</span> <span>jl_mat_mul</span>

<span>x</span> <span>=</span> <span>np</span>.<span>array</span>([[<span>1</span>,<span>2</span>],[<span>3</span>,<span>4</span>]])
<span>y</span> <span>=</span> <span>np</span>.<span>array</span>([[<span>4</span>,<span>3</span>],[<span>2</span>,<span>1</span>]])
<span>jl_mat_mul</span>(<span>x</span>, <span>y</span>)
<span># array([[ 8,  5],</span>
<span>#       [20, 13]])</span></pre></div>
</li>
</ol>
<h2 dir="auto"><a id="user-content-environment-variables" href="#environment-variables" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Environment Variables</h2>
<ul dir="auto">
<li>
<p dir="auto"><code>JNUMPY_HOME</code>:</p>
<p dir="auto">The home directory for JNumPy-specific settings. The default value is <code>~/.jnumpy</code>. JNumPy runs julia in a default environment (<code>$JNUMPY_HOME/envs/default</code>). In case that you don&#39;t have a julia executable, JNumPy installs julia into <code>$JNUMPY_HOME</code> using <a href="https://github.com/johnnychen94/jill.py">jill.py</a>.</p>
</li>
<li>
<p dir="auto"><code>TYPY_JL_EXE</code>:</p>
<p dir="auto">The path of the julia executable in use.</p>
</li>
<li>
<p dir="auto"><code>TYPY_JL_OPTS</code>:</p>
<p dir="auto">Command-line options when launching julia. If you want to use a custom environment, you could set <code>--project=&lt;dir&gt;</code>. <code>TYPY_JL_OPTS</code> is the same as those arguments passed to <code>julia</code>.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-examples" href="#examples" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<p dir="auto">There are several examples presented in the <code>demo</code> directory. Those examples are standalone Python packages created using JNumPy, and can be imported if you have JNumPy installed.</p>
<ul dir="auto">
<li>
<p dir="auto"><code>demo/basic</code>: a tiny Python package to give an example of how to use JNumPy.</p>
</li>
<li>
<p dir="auto"><code>demo/kmeans</code>: a tiny Python package wrapping <a href="https://pydatablog.github.io/ParallelKMeans.jl/stable/" rel="nofollow">ParallelKMeans.jl</a>. It produces a 10x performance gain against Scikit-Learn.</p>
</li>
<li>
<p dir="auto"><code>demo/fft</code>: a tiny Python package wrapping FFTW.jl. It allows users to access FFT plans for accelerating FFTs.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-contributions" href="#contributions" aria-hidden="true"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributions</h2>
<p dir="auto">Open-source contributions are kindly accepted and appreciated including bug reports, documentations, pull requests, and general suggestions.</p>
</article>
          </div></div>
  </body>
</html>
