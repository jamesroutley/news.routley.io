<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lukeplant.me.uk/blog/posts/the-different-uses-of-python-type-hints/">Original</a>
    <h1>The different uses of Python type hints</h1>
    
    <div id="readability-page-1" class="page"><div id="contentinner">
  <article itemscope="" itemtype="http://schema.org/BlogPosting"><header>
      
      
    </header><section itemprop="articleBody"><div>
        <p>When you use <a href="https://peps.python.org/pep-0484/">type hints</a> in <a href="https://www.python.org/">Python</a>, you could be using them for one or more of at least 5 different things:</p>
<section id="interactive-programming-help"><h2>Interactive programming help</h2>
<p>Many editors will be able to use type hints to give you help with:</p>
<ul>
<li><p>autocomplete (e.g. suggesting methods that actually exist on the type of objects you are dealing with)</p></li>
<li><p>immediate error checking (e.g. squiggly red lines under mistakes)</p></li>
<li><p>code navigation (e.g. jump to definition)</p></li>
<li><p>refactoring (e.g. renaming a method and all uses of it)</p></li>
</ul>
<p>To be clear, these features can often work without type hints — for example, I’ve used <a href="https://github.com/davidhalter/jedi/">jedi</a> very effectively to provide jump to definition etc. on code bases without any type hints, and many linters like <a href="https://flake8.pycqa.org/en/latest/">flake8</a> and <a href="https://beta.ruff.rs/docs/">ruff</a> also provide a lot of functionality without types. But type hints can help a lot in cases where static analysis wouldn’t give clear answers.</p>
</section><section id="static-type-checking"><h2>Static type checking</h2>
<p>This is where a tool uses type hints to check the correctness of your code. I’m distinguishing this from the “immediate error checking” use case above, even though the same tool such as <a href="https://mypy.readthedocs.io/en/stable/">mypy</a> or <a href="https://microsoft.github.io/pyright/#/">pyright</a> might be behind it, because I’m specifically thinking of cases where your code will be rejected by something in your process (like checks in your CI build system) if type checking reports errors. This case is different because help in your editor can be ignored if it is wrong, but static type checks built into your deployment processes etc. either cannot be skipped, or require extra work to ignore. “Friendly assistant” and “opinionated gatekeeper” are quite different personas, and you might not appreciate them equally.</p>
</section><section id="runtime-behaviour-determination"><h2>Runtime behaviour determination</h2>
<p>Running Python code can use reflection/introspection techniques to inspect type hints and change behaviour on that basis. The most obvious example in my mind is <a href="https://docs.pydantic.dev/">pydantic</a>, which uses type annotations to determine what correct inputs look like, and also serialisation/deserialisation behaviour. Another example would be runtime type checking like <a href="https://beartype.readthedocs.io/en/latest/">beartype</a> or <a href="https://typeguard.readthedocs.io/en/latest/">typeguard</a>.</p>
<p><strong>UPDATE:</strong> Another use is <a href="https://lagom-di.readthedocs.io/en/latest/">dependency injection (Lagom)</a> (thanks <a href="https://lobste.rs/u/antoinewdg">antoinewdg</a>), and other notable projects leaning on runtime use of type hints include <a href="https://fastapi.tiangolo.com/">FastAPI</a> and <a href="https://typer.tiangolo.com/">Typer</a> (thanks <a href="https://www.b-list.org/">ubernostrum</a>). There are probably lots more.</p>
</section><section id="code-documentation"><h2>Code documentation</h2>
<p>A type hint can be used to tell user what kind of objects a function accepts or produces. This can be extracted in automatically created docs, or shown in your editor (in which case it also falls under “Interactive programming help”).</p>
<p>An interesting application of this is <a href="https://drf-spectacular.readthedocs.io/en/latest/">drf-spectacular</a>, which uses type hints as well as other information to extract an OpenAPI spec from a project using <a href="https://www.django-rest-framework.org/">DRF</a>. This spec, as well as serving as documentation or input to tools like <a href="https://github.com/Redocly/redoc">redoc</a> or <a href="https://swagger.io/tools/swagger-ui/">Swagger UI</a>, can also be used for type checking or code generation in another language, typically for web frontend code, via tools like <a href="https://github.com/OpenAPITools/openapi-generator">OpenAPI generator</a>.</p>
</section><section id="compiler-instructions"><h2>Compiler instructions</h2>
<p>I don’t know how many people are doing this, but tools like <a href="https://github.com/mypyc/mypyc">mypyc</a> will use type hints to compile Python code to something faster, like C extensions.</p>
</section><section id="conclusion"><h2>Conclusion</h2>
<p>There isn’t really a point of this post other than to say “be aware of these different use cases”. This awareness can be very important when you are in any discussion about the usefulness or necessity of type hints — which scenarios are you thinking about?</p>
<p>Also, when you are weighing up whether to add type hints, you might decide to do so in order to support some of these but not others – <a href="https://lukeplant.me.uk/blog/posts/python-type-hints-parsy-case-study/">as I did for the parsy library</a>.</p>
<p>Finally, and this is a bit of a gotcha to leave you with, you may need to be very aware of the different use cases when thinking about correctness. If you see <code>count: int</code>, what kind of guarantee do you have that the <code>count</code> name is actually bound to an <code>int</code> object at runtime? Is the type hint invoking some runtime checking, or is it merely docs, or hoping for a static type check that might not actually happen? You probably need to know which it is!</p>
</section><section id="links"><h2>Links</h2>
<ul>
<li><p><a href="https://lobste.rs/s/2beggz/different_uses_python_type_hints">Discussion of this post on Lobsters</a></p></li>
</ul></section>
</div>
    </section></article>



</div></div>
  </body>
</html>
