<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://bensch.ac/blog/fixing-react-native-universal-fs-node-module">Original</a>
    <h1>Fixing React Native Universal FS Node Module Not Supported Error</h1>
    
    <div id="readability-page-1" class="page"><div bordercurve="continuous"><div>
<p>Documenting for both my future self and anyone else on the world wide web who may run into the same issue.</p>
<p>I bootstrapped my project with <a href="https://tamagui.dev/"><span>yarn create tamagui</span></a> using the free web + mobile template.</p>
<p>While building my personal site and react-native play ground I ran into this issue when trying to build my <span>expo</span> project</p>
<pre><p><code><span>The package at </span><span>&#34;../../node_modules/next/dist/compiled/gzip-size/index.js&#34;</span><span> attempted to </span><span>import</span><span> the Node standard library module </span><span>&#34;fs&#34;</span><span>.</span></code></p></pre>
<p>The steps I took to debug the issue:</p>
<p>❌ Removed mdx deps</p>
<p>❌ copied tamagui example</p>
<p>❌ hard reset yarn and make deps use v3</p>
<p>❌ commented out places where fs is used</p>
<p>❌ commented out rss</p>
<p>❌ commented out all screens</p>
<p>❌ removed all next references from the project</p>
<p>❌ commend out fs fallback nextjs config</p>
<h2 role="heading">The Solution</h2>
<p>Running the <span>yarn why</span> command in the <span>expo</span> directory</p>
<pre><p><code><span>y why next
</span>└─ next-app@workspace:apps/next
<span>   └─ next@npm:14.2.5 </span><span>[</span><span>1e21e</span><span>]</span><span> </span><span>(</span><span>via npm:^14.2.3 </span><span>[</span><span>1e21e</span><span>]</span><span>)</span></code></p></pre>
<p>Next was still being imported into the project, directly.</p>
<p>I was still importing <span>@my/ui</span>. After looking through the components directory, <span>Layout</span> was importing <span>next/router</span>.</p>
<p>After replacing <span>next/router with </span>solito/router` the project built successfully.</p></div></div></div>
  </body>
</html>
