<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://stackoverflow.com/questions/7825055/what-does-the-operator-do-in-c">Original</a>
    <h1>What does the ??!??! operator do in C?</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="text">
<p>As already stated <code>??!??!</code> is essentially two <strong><a href="https://en.wikipedia.org/wiki/Digraphs_and_trigraphs#C" rel="noreferrer">trigraphs</a></strong> (<code>??!</code> and <code>??!</code> again)  mushed together that get replaced-translated to <code>||</code>, i.e the <a href="https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Logical_operators" rel="noreferrer"><strong>logical OR</strong></a>, by the preprocessor.</p>
<p>The following table containing every trigraph should help disambiguate alternate trigraph combinations:</p>
<pre><code>Trigraph   Replaces

??(        [
??)        ]
??&lt;        {
??&gt;        }
??/        \
??&#39;        ^
??=        #
??!        |
??-        ~
</code></pre>
<p><sup>Source: <em><a href="http://careferencemanual.com/" rel="noreferrer">C: A Reference Manual 5th Edition</a></em></sup></p>
<p>So a trigraph that looks like <code>??(??)</code> will eventually map to <code>[]</code>, <code>??(??)??(??)</code> will get replaced by <code>[][]</code> and so on, you get the idea.</p>
<p>Since trigraphs are substituted during preprocessing you could use <a href="https://gcc.gnu.org/onlinedocs/cpp/Overview.html" rel="noreferrer"><code>cpp</code></a> to get a view of the output yourself, using a silly <code>trigr.c</code> program:</p>
<pre><code>void main(){ const char *s = &#34;??!??!&#34;; } 
</code></pre>
<p>and processing it with:</p>
<pre><code>cpp -trigraphs trigr.c 
</code></pre>
<p>You&#39;ll get a console output of</p>
<pre><code>void main(){ const char *s = &#34;||&#34;; }
</code></pre>
<p>As you can notice, the option <code>-trigraphs</code> must be specified or else <code>cpp</code> will issue a warning; this indicates how <em>trigraphs are a thing of the past and of no modern value other than confusing people who might bump into them</em>.</p>
<hr/>
<p>As for the rationale behind the introduction of trigraphs, it is better understood when looking at <a href="https://en.wikipedia.org/wiki/ISO/IEC_646#History" rel="noreferrer">the history section of ISO/IEC 646</a>:</p>
<blockquote>
<p>ISO/IEC 646 and its predecessor ASCII (ANSI X3.4) largely endorsed existing practice regarding character encodings in the telecommunications industry.</p>
<p><em>As ASCII did not provide a number of characters needed for languages other than English, <strong>a number of national variants were made that substituted some less-used characters with needed ones</strong></em>.</p>
</blockquote>
<p><sup>(emphasis mine)</sup></p>
<p>So, in essence, some needed characters (those for which a trigraph exists) were replaced in certain national variants. This leads to the alternate representation using trigraphs comprised of characters that other variants still had around.</p>
    </div></div>
  </body>
</html>
