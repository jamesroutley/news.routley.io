<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://camg.me/qt-mobile-2023/">Original</a>
    <h1>Using Qt for Mobile in 2023</h1>
    
    <div id="readability-page-1" class="page"><div>
<article>

<div><p>Having used Qt for the past few years in a cross-platform app, I’ve come across more and more issues that keep piling up on mobile, to the point I’m beginning to think that Qt is not the best choice in 2023. While Qt is still quite good for desktop development, there are several areas it is lacking in mobile dev.</p>
<p>The goal of this post is to highlight these areas for both developers evaluating Qt, and for The Qt Company to understand developer pain points.</p>
<p><img src="https://camg.me/images/mobile_dev.jpg" alt="The two paths of mobile development"/></p><h2 id="touch-interaction--ui-performance">Touch Interaction / UI Performance</h2>
<p>Qt handles all rendering of the UI in its own stack, and doesn’t use native components like some other cross-platform frameworks (i.e React Native). This leads to touch interaction feeling noticeably worse than a native or React Native app. For example, the <code>ListView</code> in QML, Qt’s UI markup language, doesn’t support inertial scrolling.</p>
<div>
<div>
<video controls="" autoplay="">
<source src="/videos/qt_listview.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
<p>Qt&#39;s ListView</p>
</div>
<div>
<video controls="" autoplay="">
<source src="/videos/rn_listview.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
<p>React Native&#39;s ListView</p>
</div>
</div>
<p>In the above videos, notice how the quick scrolls in Qt’s ListView barely move the view. In React Native, these big and quick swipes move the view considerably, and have an inertia that feels good.</p>
<p>The lack of inertial scrolling comes up in other components, like the <code>SwipeView</code> and <code>Drawer</code>. QML does provide a more generic <code>MouseArea</code> that you could use to try to design this yourself, but unfortunately the result is unlikely to be performant enough to use, due to everything going through Qt’s custom touch stack. The custom touch stack also makes buttons and other interactions feel laggy.</p>
<h2 id="filesystem">Filesystem</h2>
<p>On desktop, Qt’s file APIs work quite well. On Android or iOS, they are more trouble than they’re worth. With Android’s <a href="https://source.android.com/docs/core/storage/scoped">Scoped storage updates</a> in Android 11, an app can’t access user files without opening a native dialog for them to select them. Once the user selects them, an app gets a content URI that it can read through. Qt’s filesystem APIs don’t account for any of this. This can be seen in Qt’s <a href="https://doc.qt.io/qt-6.6/qtquickcontrols-filesystemexplorer-example.html">File System Explorer</a> example which is currently broken.</p>
<div>
<video width="30%" controls="" autoplay="">
<source src="/videos/files.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
<p>Qt&#39;s file browser (doesn&#39;t load any files)</p>
</div>
<p>As a workaround, KDAB has released a <a href="https://github.com/KDAB/android/tree/master/shared_storage">sharedstorage</a> library that works nicely.</p>
<p>On iOS, you can try the <a href="https://doc.qt.io/qt-6/qml-qt-labs-platform-filedialog.html">FileDialog</a> QML type, but it doesn’t work for photos, even if you specify i.e <code>folder: StandardPaths: PicturesLocation</code>.</p>
<h2 id="text-interaction">Text Interaction</h2>
<h3 id="keyboard-issues">Keyboard Issues</h3>
<p>If your app uses any text input, you’ll probably have to write a lot of code to open and close the keyboard properly and work around other Qt bugs. There are also many issues dealing with autocorrect and predictive text on certain keyboards, i.e Gboard on Android (<a href="https://bugreports.qt.io/browse/QTBUG-120238">QTBUG-120238</a>). On iOS, the keyboard sometimes stays open and cannot be closed with Qt’s <code>Qt.inputMethod.hide()</code> method (<a href="https://bugreports.qt.io/browse/QTBUG-119601">QTBUG-119601</a>).</p>
<p>Unfortunately, there are many other similar issues, some of which have been open for years, and as Android and iOS get software updates, you can always find keyboard interaction to be broken in some way.</p>
<h3 id="text-handles-copypasteselect">Text Handles, Copy/Paste/Select</h3>
<p>These need to be implemented yourself. This is more difficult than it seems, due to the many edge cases, and the difficulty in getting it to feel smooth or native. In fact, this is currently broken in Qt’s <a href="https://doc.qt.io/qt-6/qtquickcontrols-texteditor-example.html">texteditor example</a>.</p>
<div>
<video width="30%" controls="" autoplay="">
<source src="/videos/text_handles.webm" type="video/webm"/>
Your browser does not support the video tag.
</video>
<p>Qt&#39;s texteditor example, with some strange window glitching when trying to select text</p>
</div>
<h2 id="permissions">Permissions</h2>
<p>Qt is currently working on its <a href="https://doc.qt.io/qt-6/permissions.html">Permissions API</a>, but it is still a work in progress and only contains support for 6 permissions on Android.</p>

<p>This module was completely rewritten in Qt 6. Unfortunately, Blueooth input does not work on Android or iOS. On Android, I was unable to get any Bluetooth input using Qt’s <a href="https://doc.qt.io/qt-6/qtmultimedia-audiosource-example.html">audiosource example</a>. On iOS, the Bluetooth device is not even recognized.</p>
<h2 id="developer-experience">Developer Experience</h2>
<p>It has gotten better in the past couple of years, but the developer experience of Qt on mobile is still lacking in my opinion. When using Qt, it’s recommended to use Qt Creator for development/deployment. However, Qt Creator’s Android debugging is flakey at best, and iOS debugging through Qt Creator is currently <a href="https://bugreports.qt.io/browse/QTCREATORBUG-29682">non-existent</a> for iOS 17 devices (iOS 17 was released ~3 months ago at time of writing).</p>
<p>Aside from debugging, there is an awful lot of discovery work needed to achieve behavior that is included by default in native apps, leading one to question if it’s all really worth it. The Qt community is also small compared to i.e React Native, so there may be no answers online on how to do X with Qt.</p>
<h2 id="conclusion">Conclusion</h2>
<p>I think that Qt needs to invest more in its mobile APIs and performance. While the framework may fit certain use cases, the performance of the UI (touch interactions, text interactions, loading, etc) make it impossible to make an app with great UX. The lack of mobile APIs can be difficult, but native integration is always necessary to some extent.</p>
<p>On the other hand, Qt may make sense for some teams which already have a large Qt codebase on desktop. While a separate mobile UI would be needed, being able to reuse large portions of existing code could outweigh the UX issues mentioned above. In any case, I look forward to seeing how Qt evolves, and continue to enjoy using it on desktop.</p>
<h2 id="other-options">Other options?</h2>
<p>Being able to share UI and code on Android and iOS is still a desire for many developers. As hinted throughout the post, I think React Native may be the only other possible contender. Flutter may also be an option, but I’m skeptical of their choice to handle all rendering and touch interaction themselves.</p>
<blockquote>
<p>Like React Native, Flutter uses reactive-style views. However, while RN transpiles to native widgets, Flutter compiles all the way to native code. Flutter controls each pixel on the screen, which avoids performance problems caused by the need for a JavaScript bridge.</p>
</blockquote>
<p>- <a href="https://docs.flutter.dev/get-started/flutter-for/react-native-devs">Flutter for React Native developers</a></p>
<p>I haven’t had time to try RN or Flutter in a serious way yet, but I’m looking forward to doing so in the future.</p>
</div>

</article>
</div></div>
  </body>
</html>
