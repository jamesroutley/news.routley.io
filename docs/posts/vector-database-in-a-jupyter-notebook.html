<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zilliz.com/blog/exploring-magic-vector-databases-jupyter-notebooks">Original</a>
    <h1>Vector Database in a Jupyter Notebook</h1>
    
    <div id="readability-page-1" class="page"><div><div><p>Anthropic recently released a 100k token version of Claude. Google recently released PaLM 2. And of course, we are all well aware of GPT and ChatGPT from OpenAI at this point. Large language models (LLMs) have driven the speed up in AI adoption, driving demand for vector databases along with them.</p>
<p>Why? Because vector databases can help solve one of the biggest problems LLMs face - a lack of domain knowledge and up-to-date data. Outside of LLMs, vector databases also show their usefulness in powering similarity search applications. In addition, they are necessary for working on product recommendations, reverse image search, and semantic text search.</p>
<p>How can you get started with a vector database in your Jupyter Notebook? This tutorial covers:</p>
<ul>
<li>What is a Vector Database?</li>
<li>How to Use a Vector Database in Your Jupyter Notebook</li>
<li>What is Milvus (Lite)?</li>
<li>Summary of a Vector Database in Your Jupyter Notebook</li>
</ul>
<p>This equally applies to CoLab notebooks. Here are two for you: a <a href="https://colab.research.google.com/drive/1qBVYsiNTp5w8zclqxkKp_hHIoKdCGwB8?usp=sharing">CoLab notebook for reverse image search</a>, and a <a href="https://colab.research.google.com/drive/1dTYiwmJrjojqGw_DTBX05wi0l5YoX1HU?usp=sharing">CoLab notebook for semantic text search</a>.</p>
<p>Before we jump into the tutorial, let’s get a basic understanding of vector databases. A <a href="https://zilliz.com/learn/what-is-vector-database">vector database</a> is built to store, index, and query vector data. They are primarily used for working with <a href="https://zilliz.com/glossary/unstructured-data">unstructured data</a> such as images, text, or video. First, you run your data through an existing neural network to get the vector embeddings, usually extracted from the second to last layer.</p>
<p>Those vector embeddings then get stored in a vector database. Once your vector embeddings are stored, you can query the vector database for the <code>top k</code> most similar data entries via vector embeddings as shown in the CoLab notebooks above. Some of the tools that vector databases abstract out for you include:</p>
<ul>
<li>Vector indexes you’d have to include otherwise.</li>
<li>Vector search algorithms such as HNSW.</li>
<li>A way to communicate with a persistent storage layer.</li>
</ul>
<p>Milvus is a vector database with a distributed system native backend. It is purpose-built to handle indexing, storing, and querying vector data at a billion scales. Milvus uses multiple layers and types of worker nodes for an easily scalable design. In addition to using multiple single-purpose nodes, Milvus also uses segmented data for more efficient indexing. Milvus uses 512MB data segments that don’t get changed after they are filled and queries them in parallel to offer the lowest latency across the industry.</p>
<p>
      <span>
        <a href="https://assets.zilliz.com/architecture_diagram_c2acfbe310.png" title="High Level architecture of Milvus Vector Database" target="_blank"><img src="https://assets.zilliz.com/architecture_diagram_c2acfbe310.png" alt="High Level architecture of Milvus Vector Database" id="high-level-architecture-of-milvus-vector-database"/></a>
        <span>High Level architecture of Milvus Vector Database</span>
      </span>
    </p>
<p>Typically, you would use <a href="https://milvus.io/docs/install_standalone-docker.md">Docker Compose</a>, <a href="https://milvus.io/docs/install_standalone-helm.md">Helm</a>, or the <a href="https://milvus.io/docs/install_standalone-operator.md">Milvus Operator</a> to launch a Milvus instance. However, Milvus Lite lets you launch a Milvus instance directly from your Jupyter Notebook or Python script. It works in the same way as Milvus and saves all your data locally.</p>
<p>You can start with a vector database like <a href="https://milvus.io/docs/milvus_lite.md">Milvus Lite</a> directly in your notebook through a <code>pip</code> install. In the first line of your Jupyter Notebook, run <code>! pip install pymilvus milvus</code>. Once you have <code>pymilvus</code> and <code>milvus</code> installed, you can start up the vector database and connect to it within an iPython notebook.</p>
<p>The <code>milvus</code> module provides Milvus Lite and the <code>pymilvus</code> module provides a Python interface to connect to Milvus. To start, we import three modules. First, <code>default_server</code> from <code>milvus</code>. Second,<code>connections</code> from <code>pymilvus</code>, and third, <code>utility</code> from <code>pymilvus</code>. We use the <code>start()</code> function from the <code>default_server</code> to start the server. Once the server is started, we connect using <code>connect</code> from <code>connections</code> and passing in the host, <code>localhost</code> or <code>127.0.0.1</code>, and the port, retrieved from the default server.</p>
<pre><code><span>from</span> milvus <span>import</span> default_server
<span>from</span> pymilvus <span>import</span> connections, utility


default_server.start()
connections.connect(host=<span>&#34;127.0.0.1&#34;</span>, port=default_server.listen_port)
</code></pre>
<p>Once you’ve connected to Milvus, you can use <code>utility</code> to check on your database. For example, call <code>get_server_version()</code> to ensure you have the latest version, which you can check for on the <a href="https://milvus.io/blog">Milvus Blog</a>. You can also use <code>utility</code> to check for <code>collections</code>, separate tables in Milvus. If you want to start anew, you can check if a collection with the name you want to use is already in use and either drop it with <code>drop_collection</code>, or pick a new name.</p>
<pre><code>utility.get_server_version()
<span>if</span> utility.has_collection(COLLECTION_NAME):
   utility.drop_collection(COLLECTION_NAME)
</code></pre>
<p>Want to go even further and use a vector database in production or for a larger project? Consider <a href="http://zilliz.com">Zilliz Cloud</a> or <a href="https://milvus.io/docs/install_standalone-docker.md">Milvus Standalone</a>.</p>
<p>In this post, we learned that vector databases are helpful whenever you need to do anything that involves a similarity search. They help index, store, and query vector embedding representations of unstructured data like images, videos, or text. Then we look at an example of using a vector database in your Jupyter Notebook via Milvus Lite.</p>
<p>Finally, we peek under the hood of Milvus to see the distributed system backend. We also provide resources to understand how to start using a vector database via examples in CoLab notebooks. For those that want to use a standalone vector database instance, we also provide examples for how to set up Milvus Standalone.</p>
</div></div></div>
  </body>
</html>
