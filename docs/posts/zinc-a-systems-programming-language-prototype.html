<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sr.ht/~oconnor0/zinc/">Original</a>
    <h1>Zinc, a systems programming language prototype</h1>
    
    <div id="readability-page-1" class="page"><div>
    
    <div>
      
      
      <div>
        <div><h2 id="zinc-a-systems-programming-language-prototype"><a href="#zinc-a-systems-programming-language-prototype" rel="nofollow noopener">#</a>Zinc, a systems programming language prototype</h2>
<p>Zinc is my attempt at a low-level systems programming language prototype.
I found this parser, called <a href="https://github.com/ianh/owl" rel="nofollow noopener">Owl</a> mirrored <a href="https://git.sr.ht/~oconnor0/owl" rel="nofollow noopener">here</a>, that generates parsers for visibly pushdown languages.
Visibly pushdown languages are those where recursion to other grammar productions must be guarded by tokens which can only be used for that purpose.
While somewhat limiting, this ends up meaning that all grammar productions that can &#34;contain&#34; other productions are wrapped in certain tokens and so the language is visually easier to parse.
And it runs in linear time.</p>
<pre><code>mut i = 0
def n = 10
while 0 &lt;= i &lt; n {
    def x = call rndi()
    if i = 0 {
        ; verify that the fixed seed rng is working as expected
        assert &#34;rndi() = 13109595&#34;: x = 13109595
    }
    call puti(x)
    call putc(10)
    set i = i + 1
}
return i
</code></pre>
<h3 id="features"><a href="#features" rel="nofollow noopener">#</a>Features!</h3>
<ol>
<li>All statements start with a keyword, except for blocks with start and end with curly braces.</li>
<li>Range conditionals like you used in math: <code>0 &lt;= i &lt; 100</code></li>
<li>Builtin <code>assert</code> syntax - that&#39;s included in all compliation modes. Make sure things are what you expect them to be.</li>
<li>Add new functions by defining them in the <a href="https://git.sr.ht/~oconnor0/zinc-proto/tree/HEAD/lib/prelude.h" rel="nofollow noopener"><code>lib/prelude.h</code></a>.</li>
<li><code>if</code> and <code>while</code> statements don&#39;t need parentheses around their conditional.</li>
<li>Mutable variables and immutable bindings.</li>
<li>Semicolons used to comment out the rest of the line.</li>
<li>The language splits side-effects from non-side-effecting code. Or rather would once functions and subroutines are implemented. Subroutines can have side-effects, functions cannot. Expressions can only apply functions, not call subroutines. It&#39;s like Haskell but better.</li>
<li>No package manager to distract you.</li>
<li>Simple type system. Currently, a unityped language - everything is an int - except for the optional <code>assert</code> message.</li>
<li>No need to write functions. Top-level code in a <code>.zn</code> is executed when the file is included.</li>
<li>No package/file/module imports yet. I had some idea about compiling each file to a struct, but whether there was one of them or multiple of them was undecided. And there&#39;s always the issue of what to do about side-effects on module load.</li>
<li>No nil. No pointers or references either. I wondered how far I could get with this model, maybe using arrays or structs or arenas or static allocations or something.</li>
</ol>
<h3 id="status"><a href="#status" rel="nofollow noopener">#</a>Status</h3>
<p>While I dreamed of integrating it with some 2D graphics or tile engine and playing around with old-school game dev, I ran into a few limitations with its design.
Like how cool would it be to write a clone of <a href="https://en.wikipedia.org/wiki/Raptor:_Call_of_the_Shadows" rel="nofollow noopener">Raptor: Call of the Shadows</a> in a language I wrote?</p>
<p>I intended to write it as a single-pass compiler directly from the syntax tree and targeting C via TCC to enable it to run quickly and on any platform.
Unfortunately I also designed a language with top-level execution and nested functions - neither of which I could come up with a good compilation model for if I wanted to preserve the single-pass, no AST, no IR design of the compiler.
It&#39;s certainly possible there is a model, but my musings couldn&#39;t figure it out.</p>
<p>The reality is too that I&#39;ve been a programmer in GC languages my entire career (if you ignore the 5 years I did C++ and Verilog) and that&#39;s where my mind resides so writing a low-level limited language was, well, limiting.</p>
<h2 id="older-notes"><a href="#older-notes" rel="nofollow noopener">#</a>Older Notes</h2>
<h3 id="goals"><a href="#goals" rel="nofollow noopener">#</a>Goals</h3>
<ul>
<li>Cross-platform - don&#39;t have to install Unix to get compiles on Windows to work. Don&#39;t depend on platform-specific tools.
<ul>
<li>Cross-compiling - compile to other targets - OS and architecture - easily.</li>
</ul>
</li>
<li>Single executable (optionally) with compiler, assembler, linker.</li>
<li>Can run without an OS.</li>
<li>Standard library is optional, but large-ish.</li>
<li>Core library is dynamic allocation free.</li>
<li>Low-level and easier, for me, to program in than C.</li>
<li>No magic - implicit casts, lots of optimizations for zero cost abstractions.</li>
<li>Prioritize simplicity - compiler or developer though?</li>
<li>To be a language I want to write in.</li>
<li>To be the implementation language for an application and a scripting programming language to come later.</li>
<li>Reasonable C interop, and probably, initial compilation to C.</li>
<li>Package system, should one develop, doesn&#39;t support transitive dependencies.</li>
<li>To eventually support a simple, cross-platform graphics.h or MODE 13h style graphics library.</li>
<li>To include a console.h/TUI style library.</li>
<li>Inline assembler.</li>
<li>Small and clean and sane language.</li>
<li>Some kind of module system.</li>
<li>Arbitrary, or principled, restrictions.</li>
<li>Builtin SIMD?</li>
</ul>
<h3 id="non-goals"><a href="#non-goals" rel="nofollow noopener">#</a>Non-goals</h3>
<ul>
<li>Garbage collection.</li>
<li>To be useful to anyone.</li>
<li>Complete memory safety, I think.</li>
<li>Advanced optimizations.</li>
</ul>
<h3 id="open-questions"><a href="#open-questions" rel="nofollow noopener">#</a>Open questions</h3>
<ul>
<li>How do modules and types interact?</li>
<li>How are runtime and compile time separated? How do they interact?</li>
<li>Where does polymorphism fit in? Parametric? Monomorphization?</li>
<li>What is the relationship between statements and expressions?</li>
</ul>
<h3 id="inspiration"><a href="#inspiration" rel="nofollow noopener">#</a>Inspiration</h3>
<ul>
<li>
<p><a href="https://briancallahan.net/blog/archive.html" rel="nofollow noopener">https://briancallahan.net/blog/archive.html</a></p>
</li>
<li>
<p><a href="https://drewdevault.com/" rel="nofollow noopener">https://drewdevault.com/</a></p>
</li>
<li>
<p><a href="https://jcs.org/" rel="nofollow noopener">https://jcs.org/</a></p>
</li>
<li>
<p><a href="http://cowlark.com/" rel="nofollow noopener">http://cowlark.com/</a></p>
</li>
<li>
<p><a href="http://cowlark.com/cowgol/" rel="nofollow noopener">http://cowlark.com/cowgol/</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=iUarU8Fhvug" rel="nofollow noopener">https://www.youtube.com/watch?v=iUarU8Fhvug</a></p>
</li>
<li>
<p><a href="https://www.pastraiser.com/cpu/i8080/i8080_opcodes.html" rel="nofollow noopener">https://www.pastraiser.com/cpu/i8080/i8080_opcodes.html</a></p>
</li>
<li>
<p><a href="https://zsmith.co/intel.php" rel="nofollow noopener">https://zsmith.co/intel.php</a></p>
</li>
<li>
<p><a href="https://github.com/ianh/owl" rel="nofollow noopener">https://github.com/ianh/owl</a></p>
</li>
<li>
<p><a href="https://mansfield-devine.com/speculatrix/" rel="nofollow noopener">https://mansfield-devine.com/speculatrix/</a></p>
</li>
<li>
<p><a href="https://blog.waleedkhan.name/union-vs-sum-types/" rel="nofollow noopener">https://blog.waleedkhan.name/union-vs-sum-types/</a></p>
</li>
<li>
<p><a href="https://github.com/mattiasgustavsson/libs" rel="nofollow noopener">https://github.com/mattiasgustavsson/libs</a> Mattias Gustavsson&#39;s single-file libraries</p>
</li>
<li>
<p><a href="https://github.com/nothings/stb/" rel="nofollow noopener">https://github.com/nothings/stb/</a> Nothings&#39; (Sean T Barrett&#39;s) single-file libraries</p>
</li>
<li>
<p><a href="https://github.com/gingerBill/gb" rel="nofollow noopener">https://github.com/gingerBill/gb</a> Ginger Bill&#39;s single-file libraries</p>
</li>
<li>
<p><a href="https://github.com/antirez/sds" rel="nofollow noopener">https://github.com/antirez/sds</a> Antirez&#39;s C string library</p>
</li>
<li>
<p><a href="https://github.com/floooh/sokol" rel="nofollow noopener">https://github.com/floooh/sokol</a> Sokol single header libraries</p>
</li>
<li>
<p><a href="https://github.com/sheredom/subprocess.h" rel="nofollow noopener">https://github.com/sheredom/subprocess.h</a> single header process launching solution for C</p>
</li>
<li>
<p><a href="https://github.com/jondgoodwin/cone/blob/master/PLAN.md" rel="nofollow noopener">https://github.com/jondgoodwin/cone/blob/master/PLAN.md</a> a language plan table</p>
</li>
<li>
<p><code>tail</code> to specify tail calls?</p>
</li>
<li>
<p><a href="https://github.com/r-lyeh/single_file_libs" rel="nofollow noopener">https://github.com/r-lyeh/single_file_libs</a></p>
</li>
<li>
<p><a href="https://github.com/libunwind/libunwind" rel="nofollow noopener">https://github.com/libunwind/libunwind</a></p>
</li>
<li>
<p><a href="https://github.com/nothings/stb/blob/master/docs/stb_howto.txt" rel="nofollow noopener">https://github.com/nothings/stb/blob/master/docs/stb_howto.txt</a></p>
</li>
<li>
<p><a href="https://github.com/Dexter9313/C-stacktrace" rel="nofollow noopener">https://github.com/Dexter9313/C-stacktrace</a></p>
</li>
<li>
<p><a href="https://github.com/iboB/b_stacktrace" rel="nofollow noopener">https://github.com/iboB/b_stacktrace</a></p>
</li>
<li>
<p><a href="https://github.com/scottt/debugbreak" rel="nofollow noopener">https://github.com/scottt/debugbreak</a></p>
</li>
<li>
<p><a href="https://github.com/wc-duck/dbgtools" rel="nofollow noopener">https://github.com/wc-duck/dbgtools</a></p>
</li>
<li>
<p><a href="https://github.com/edubart/minicoro/" rel="nofollow noopener">https://github.com/edubart/minicoro/</a></p>
</li>
<li>
<p><a href="https://ccodearchive.net/list.html" rel="nofollow noopener">https://ccodearchive.net/list.html</a></p>
</li>
<li>
<p><a href="https://github.com/clibs/clib/wiki/Packages" rel="nofollow noopener">https://github.com/clibs/clib/wiki/Packages</a></p>
</li>
<li>
<p><a href="https://github.com/clibs/commander" rel="nofollow noopener">https://github.com/clibs/commander</a></p>
</li>
<li>
<p><a href="https://github.com/clibs/flag" rel="nofollow noopener">https://github.com/clibs/flag</a></p>
</li>
<li>
<p><a href="https://github.com/clibs/buffer" rel="nofollow noopener">https://github.com/clibs/buffer</a></p>
</li>
<li>
<p><a href="https://nemequ.github.io/hedley/api-reference.html#HEDLEY_NO_RETURN" rel="nofollow noopener">https://nemequ.github.io/hedley/api-reference.html#HEDLEY_NO_RETURN</a></p>
</li>
<li>
<p><a href="https://github.com/rxi/kit" rel="nofollow noopener">https://github.com/rxi/kit</a></p>
</li>
<li>
<p><a href="https://github.com/erkkah/tigr" rel="nofollow noopener">https://github.com/erkkah/tigr</a></p>
</li>
<li>
<p><a href="https://github.com/martincohen/Punity" rel="nofollow noopener">https://github.com/martincohen/Punity</a></p>
</li>
<li>
<p><a href="https://ldtk.io/" rel="nofollow noopener">https://ldtk.io/</a></p>
</li>
<li>
<p><a href="https://monocypher.org/" rel="nofollow noopener">https://monocypher.org/</a></p>
</li>
<li>
<p><a href="https://opensource.org/license/UPL" rel="nofollow noopener">https://opensource.org/license/UPL</a></p>
</li>
<li>
<p><a href="https://oss.oracle.com/licenses/upl/" rel="nofollow noopener">https://oss.oracle.com/licenses/upl/</a></p>
</li>
</ul>
<blockquote>
<p>What you are I once was. What I am you will become.</p>
</blockquote>
</div>
      </div>
      
      
    </div>
    
  </div></div>
  </body>
</html>
