<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://kyle.cascade.family/posts/preventing-kubernetes-from-pulling-the-pause-image-from-the-internet/">Original</a>
    <h1>Preventing Kubernetes from Pulling the Pause Image from the Internet</h1>
    
    <div id="readability-page-1" class="page"><div>
                <div>
  <div>
  

  <div>
    <p><time datetime=" 2025-11-03T00:00:00Z">
        Publish Date: November 3, 2025
      </time>
      

      

      
    </p>
  </div>

  
</div>

  <p>I don’t normally write blog posts that regurgitate information from normal documentation, but this particular subject irks me.</p>
<p>If you are running an internal Kubernetes (k8s) platform, you owe it to yourself to make sure there is nothing <em>external</em> to your platform determining your reliability.</p>
<p>You could ask yourself: How many internet dependencies do you have to start a pod?
Should be zero, right???</p>
<p>If you use stock k8s, you might be surprised to know that each of your k8s nodes is actually reaching out to <code>registry.k8s.io</code> on first pod creation to get the <code>pause</code> image:</p>
<pre tabindex="0"><code>$ sudo crictl images
IMAGE                                     TAG                 IMAGE ID            SIZE
registry.k8s.io/pause                     3.9                 e6f1816883972
</code></pre><p>If you want to change that, you can update your containerd (1.x) toml:</p>
<pre tabindex="0"><code>[plugins.&#34;io.containerd.grpc.v1.cri&#34;]
  sandbox_image = &#34;YOUR_REGISTRY/pause:3.10&#34;
</code></pre><p>And depend on one less thing.
The rest of the blog post will go deeper into why this is the case.</p>

<p>The <code>pause</code> image is the container image that backs the k8s “sandbox” of a pod.
This <code>pause</code> <em>container</em> is designed to <a href="https://www.ianlewis.org/en/almighty-pause-container" target="_blank">hold the linux namespaces</a>.
The <code>pause</code> container used to also reap zombie processes from the other containers in a pod, its duty as PID1, but that isn’t the case by default anymore in <a href="https://github.com/kubernetes/kubernetes/pull/51634" target="_blank">k8s 1.8+</a>.</p>
<p>The sandbox of a pod is part of the <a href="https://kubernetes.io/docs/concepts/containers/cri/" target="_blank">CRI</a> spec.
The CRI spec is a generic way for k8s to talk pods (and sandboxes) that is not specific to any particular container runtime (like containerd).
Any container runtime that implements the CRI spec can, in theory, run k8s pods.</p>
<p>This means that the <code>pause</code> image has more to do with CRI than it does with k8s.</p>

<p>When a CRI-enabled container runtime needs to create a sandbox, at least with the case of containerd, it does this by creating a real container.</p>
<p>The image containerd is configured to use (by default) to create that sandbox, <em>is</em> the <code>pause</code> image.
You can see this in <a href="https://github.com/containerd/containerd/blob/a2dda37d5b6a9be5cfa683e1dfb6c6f5d8b0dc40/internal/cri/config/config.go#L76" target="_blank">code here</a>.</p>

<p>Per the <a href="https://kubernetes.io/docs/setup/production-environment/container-runtimes/#override-pause-image-containerd" target="_blank">current docs</a>, you can overwrite the containerd sandbox image with a containerd configuration like this (assuming you have mirrored to a local registry):</p>
<p>(containerd 1.x)</p>
<pre tabindex="0"><code>[plugins.&#34;io.containerd.grpc.v1.cri&#34;]
  sandbox_image = &#34;YOUR_REGISTRY/pause:3.10&#34;
</code></pre><p>(containerd 2.x)</p>
<pre tabindex="0"><code>version = 3

[plugins]
  [plugins.&#39;io.containerd.cri.v1.images&#39;]
    ...
    [plugins.&#39;io.containerd.cri.v1.images&#39;.pinned_images]
      sandbox = &#39;YOUR_REGISTRY/pause:3.10&#39;
</code></pre><p>Don’t take my word for it here, this particular setting has changed over time, check the official docs.</p>

<p>If you go to <a href="https://registry.k8s.io" target="_blank">registry.k8s.io</a> you will see:</p>
<blockquote>
<p>Please note that there is NO uptime SLA as this is a free, volunteer managed service.
We will however do our best to respond to issues and the system is designed to be reliable and low-maintenance.
If you need higher uptime guarantees please consider mirroring images to a location you control.</p>
</blockquote>
<p>So yea, this is your PSA.
Please <a href="https://github.com/kubernetes/registry.k8s.io/blob/main/docs/mirroring/README.md" target="_blank">mirror</a> like they recommend and reconfigure as needed to not depend on the internet.</p>

  
  <hr/>
<div>
    
	    
            <a href="https://kyle.cascade.family/posts/the-case-against-sidecars-revisited-part-1-the-case-for-sidecar-sanity/?ref=footer"><span>« Previous</span></a>
        
	    
    
</div>

  
  <p><a href="mailto:kyle@cascade.family?subject=Comment on: Preventing%20Kubernetes%20from%20Pulling%20the%20Pause%20Image%20from%20the%20Internet">Comment via email</a>

</p></div>
            </div></div>
  </body>
</html>
