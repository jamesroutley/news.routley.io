<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jmmv.dev/2022/12/endbasic-0.10.html">Original</a>
    <h1>EndBASIC 0.10: Core language, evolved</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<article><p>After three months of early-morning hacking, I‚Äôm pleased to announce that EndBASIC 0.10 is now available‚Äîright on time for some holiday-time experimentation!</p>
<p>This release marks a <em>huge</em> milestone because it makes the language usable for real-world development.</p>
<p>You see, when I started this project over two years ago, I wrote a rudimentary interpreter for something that resembled BASIC and then launched EndBASIC 0.1. Since then, I have been piling onto those insufficient foundations by adding flashy features such as <a href="https://ntietz.com/2020/11/endbasic-0.3.html">a web interface</a>, <a href="https://ntietz.com/2021/07/endbasic-0.7.html">a cloud file sharing service</a>, and <a href="https://ntietz.com/2021/11/endbasic-0.8.html">a hybrid text/graphics console</a>. These features have been well-received in every demo I‚Äôve given but‚Ä¶ the feedback that always came back was the same: ‚Äú<em>Give me some sort of functions or subroutines!</em>‚Äù, or ‚Äú<em>This is no BASIC without <code>GOTO</code>!</em>‚Äù.</p>
<p>And these criticisms were right. Trying to write any sort of non-trivial program in EndBASIC was a daunting and frustrating experience. I had tried to simplify coding to the foundations of structured programming, but without a way to perform unstructured jumps (aka go-tos) or define custom functions‚Ä¶ it was impossible to factor out common code, which is a need for the vast majority of programs that exceed a screenful of text. There were also usability deficits such as the lack of line numbers in error messages, which made it incredibly difficult to debug any failing program.</p>
<p>The situation had to change, and change it has in EndBASIC 0.10.</p>

<p>EndBASIC 0.10 is a <em>humongous</em> release that comes with improvements across the board. Most changes have focused on the core language, but they also spread to the standard library and the user interface. To summarize, these are the main changes in this release:</p>
<ul>
<li>
<p><strong>Support for <code>GOTO</code> <em>and</em> <code>GOSUB</code>.</strong> Implementing these required dropping the previous AST-based evaluator and replacing it with a bytecode-based executor (with an associated compiler). You can read more about this change in ‚Äú<a href="https://ntietz.com/2022/11/endbasic-bytecode.html">From AST to bytecode execution in EndBASIC</a>‚Äù.</p>
</li>
<li>
<p><strong>Error catching and handling via <code>ON ERROR</code>.</strong> This was also made possible by the new bytecode executor mentioned earlier.</p>
</li>
<li>
<p><strong>Precise line and column numbers in every error message.</strong> This required a massive overhaul of how the AST is represented to carry these details in every node. Modifying the AST was relatively easy‚Ä¶ but adjusting all existing tests to validate this new information was extremely laborious.</p>
</li>
<li>
<p><strong>Interop of numeric types.</strong> Being strict about numeric types was nice in theory‚Äîjust as it is a very welcome pedantic feature in Rust‚Äîbut the lack of automatic conversions between integers and doubles was‚Ä¶ quite annoying. As a consequence, this release brings transparent promotion of integers to doubles and automatic rounding of doubles to integers. This works now but I feel it‚Äôs a hack due to all of the special-casing that has taken place. A more advanced bytecode will probably make this better in the future.</p>
</li>
<li>
<p><strong>Revamped interactive help system.</strong> Previous versions provided a <code>HELP</code> command that exposed documentation for all high-level types, but failed to provide documentation about the language itself (other than for a simplified cheat-sheet that grew too cryptic and long). This release has fixed this by extending <code>HELP</code> to provide language-specific documentation.</p>
</li>
<li>
<p><strong>New control flow structures.</strong> These include suppport for <code>DO</code> loops (with all of their variants, which include infinite loops as well as <code>WHILE</code> and <code>UNTIL</code> clauses before or after the loop), <code>SELECT CASE</code>, and one-line <code>IF</code>s. <code>SELECT CASE</code> is probably the hardest structure that exists right now due to the oddities in its grammar and the many cases to consider.</p>
</li>
<li>
<p><strong>Addition of bitwise operators.</strong> These are a nice-to-have, and because these are now available, the language now supports specifying integer literals in binary, octal, decimal and hexadecimal bases.</p>
</li>
<li>
<p><strong>Rename of <code>EXIT</code> to <code>END</code> to terminate programs.</strong> This seems like a triviality, but it‚Äôs worth mentioning because it was quite difficult to retrofit it into the parser due to how <code>END</code> is sometimes a statement on its own and other times it is combined with other keywords (e.g. <code>END IF</code> or <code>END SELECT</code>). Stay tuned for an upcoming post that will deep dive into the parsing oddities of this language.</p>
</li>
<li>
<p><strong>Lots of small tweaks here and there.</strong> These include fixes to the editor, minor changes to the grammar, command renames, addition of exponents and square roots, addition of various new string functions, and addition of a way to query the screen size to let <del>games</del> programs adjust to different viewports.</p>
</li>
</ul>
<p>Quite a few changes, huh? :)</p>

<p>Here are the usual links to get you started:</p>
<ul>
<li>
<p><strong><a href="https://repl.endbasic.dev/">Launch the online interpreter</a></strong></p>
</li>
<li>
<p><strong><a href="https://www.endbasic.dev/">Visit the EndBASIC website</a></strong></p>
</li>
<li>
<p><strong><a href="https://github.com/endbasic/endbasic/releases/tag/endbasic-0.9.0">Read the release notes</a></strong></p>
</li>
</ul>
<p>Please <a href="mailto:support@endbasic.dev">let me know</a> if you have any questions, feedback, or encounter any issues. There are tons more things I wanted to continue tweaking and fixing before publishing 0.10, but I had to force myself to get it out of the door already. There will always be a next release to fix stuff.</p>
<p>With that, I‚Äôll leave you with a demo to display some holiday greetings, all written in EndBASIC and leveraging the new features in this release üòä</p>

<p>‚Ä¶ and if you have made it this far, you can also:</p>
<ul>
<li>play a <a href="https://repl.endbasic.dev/?run=jmmv/arka.bas">work-in-progress Arkanoid clone</a> and</li>
<li>play a <a href="https://repl.endbasic.dev/?run=jmmv/snake.bas">Snake clone</a>.</li>
</ul>
</article>
</div>
</div></div>
  </body>
</html>
