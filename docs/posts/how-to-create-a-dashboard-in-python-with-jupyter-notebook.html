<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mljar.com/blog/dashboard-python-jupyter-notebook/">Original</a>
    <h1>How to create a dashboard in Python with Jupyter Notebook</h1>
    
    <div id="readability-page-1" class="page"><div>

		
		
		<p><img src="https://mljar.com/blog/dashboard-python-jupyter-notebook/banner.jpg" alt="Dashboard Python Jupyter Notebook banner"/> Would you like to build a data dashboard in 9 lines of Python code? I will show you how to create a dashboard in Python with Jupyter Notebook. The dashboard will present information about stock for selected ticker (data table and chart). The notebook will be published as a web application. I will use an open-source <a href="https://github.com/mljar/mercury"><code>Mercury</code></a> framework to convert Python notebook to interactive web application.</p>

<p>The demo of the financial dashboard created in Python with Jupyter Notebook and published with <code>Mercury</code>:</p>

<p><img src="https://raw.githubusercontent.com/pplonski/dashboard-python-jupyter-notebook/main/media/jupyter-dashboard-finance.gif" alt="Financial Dashboard in Python with Jupyter Notebook"/></p>

<p>The dashboard is available online at <a href="https://dashboard-jupyter-notebook.herokuapp.com/">dashboard-jupyter-notebook.herokuapp.com/</a> (free Heroku dyno). The code repository:  <a href="https://github.com/pplonski/dashboard-python-jupyter-notebook">github.com/pplonski/dashboard-python-jupyter-notebook</a>.</p>

<h2 id="build-dashboard-with-9-lines-of-python-code">Build dashboard with 9 lines of Python code</h2>

<p>Letâ€™s start by creating an empty repository and cloning it:</p>

<div><div><pre><code>git clone git@github.com:pplonski/dashboard-python-jupyter-notebook.git
</code></pre></div></div>

<p>Please setup the virtual environment:</p>

<div><div><pre><code>virtualenv djenv
source djenv/bin/activate
</code></pre></div></div>

<p>I choose <code>djenv</code> as a name for virtual environment. I keep all required packages in the <code>requirements.txt</code> file:</p>

<div><div><pre><code>mljar-mercury
mplfinance
yfinance
</code></pre></div></div>

<p>The <a href="https://github.com/mljar/mercury"><code>mljar-mercury</code></a> is a Python package with <code>Mercury</code> framework. The <a href="https://github.com/matplotlib/mplfinance"><code>mplfinance</code></a> is a package to plot financial data using <code>matplotlib</code>. The <a href="https://github.com/ranaroussi/yfinance"><code>yfinance</code></a> is a package to download market data from Yahoo Finance API. Letâ€™s install required packages and set our environment as Jupyter kernel:</p>

<div><div><pre><code>pip install -r requirements.txt

# add kernel
python -m ipykernel install --user --name djenv
</code></pre></div></div>

<p>We have environment ready, the next step is to start a Jupyter Notebook and create a new notebook. Please remember to select kernel with <code>djenv</code> name when creating a new notebook:</p>

<div><div><pre><code># starts Jupyter Notebook
jupyter notebook
</code></pre></div></div>

<h2 id="the-code-in-notebook">The code in notebook</h2>

<p>We start the code with imports:</p>

<div><div><pre><code><span>import</span> <span>yfinance</span> <span>as</span> <span>yf</span>
<span>import</span> <span>mplfinance</span> <span>as</span> <span>mpf</span>
</code></pre></div></div>

<p>The stock data will be displayed for selected ticker. Letâ€™s create a variable for that:</p>



<p>The market data for selected ticker can be fetched with 1 line of code, thanks to amazing <code>yfinance</code> package:</p>

<div><div><pre><code><span>history</span> <span>=</span> <span>yf</span><span>.</span><span>Ticker</span><span>(</span><span>ticker</span><span>)</span><span>.</span><span>history</span><span>(</span><span>period</span><span>=</span><span>&#34;3mo&#34;</span><span>)</span>
</code></pre></div></div>

<p>We can print some statistics about data:</p>

<div><div><pre><code><span>print</span><span>(</span><span>f</span><span>&#34;3 months low: {history.Low.min().astype(int)}&#34;</span><span>)</span>
<span>print</span><span>(</span><span>f</span><span>&#34;3 months high: {history.High.max().astype(int)}&#34;</span><span>)</span>
</code></pre></div></div>

<p>Display the last 5 rows in the data (last 5 trading days):</p>



<p>The <code>history</code> variable is a Pandas DataFrame. The financial data can be easily plotted with <code>mplfinance</code> package:</p>

<div><div><pre><code><span>mpf</span><span>.</span><span>plot</span><span>(</span><span>history</span><span>,</span> <span>type</span><span>=</span><span>&#39;candle&#39;</span><span>,</span> <span>mav</span><span>=</span><span>(</span><span>7</span><span>),</span><span>figratio</span><span>=</span><span>(</span><span>18</span><span>,</span><span>10</span><span>))</span>
</code></pre></div></div>

<p>The candle plot with 7-days moving average (1 line of code):</p>

<p><img src="https://mljar.com/blog/dashboard-python-jupyter-notebook/mplfinance-candle-plot.png" alt="Finance candle plot with mplfinance"/></p>

<p>The whole notebook is preseted below, it has only 9 lines of Python code:</p>

<p><img src="https://mljar.com/blog/dashboard-python-jupyter-notebook/dashboard-jupyter.png" alt="Screenshot of code for building dashboard in Python with Jupyter Notebook"/></p>



<p>OK, the notebooks is ready. You can change the <code>ticker</code> variable (for example set to <code>&#34;MSFT&#34;</code>) and execute the notebook to get new data. However, it is not convenient to share the notebook with code, it is sometime impossible, if your users are non-technical and canâ€™t install Python and required packages. Please donâ€™t worry! ðŸ˜Š There is an open-source framework called <a href="https://github.com/mljar/mercury"><code>Mercury</code></a> for converting Python notebooks into interactive web applications. You can hide the code in the notebook and show only outputs (table and chart). The web app can be deployed to the cloud. You will share the link to the web application. The <code>ticker</code> variable can be converted into interactive widget. Sounds interesting?</p>

<p>What is more, you donâ€™t need to change any code in your notebook. Just add the YAML header in the first raw cell:</p>

<div><div><pre><code><span>---</span>
<span>title</span><span>:</span> <span>Finance dashboard</span>
<span>description</span><span>:</span> <span>Dashboard with financial data</span>
<span>show-code</span><span>:</span> <span>False</span>
<span>params</span><span>:</span>
    <span>ticker</span><span>:</span> 
        <span>input</span><span>:</span> <span>select</span>
        <span>value</span><span>:</span> <span>TSLA</span>
        <span>label</span><span>:</span> <span>Select ticker</span>
        <span>choices</span><span>:</span> <span>[</span><span>TSLA</span><span>,</span> <span>COIN</span><span>,</span> <span>MSFT</span><span>,</span> <span>PLTR</span><span>,</span> <span>SNOW</span><span>,</span> <span>NFLX</span><span>]</span>
<span>---</span>
</code></pre></div></div>

<p>The YAML will tell the <code>Mercury</code> framework how to display the notebook. It defines the <code>title</code> and appâ€™s <code>description</code>. The code is hidden with <code>show-code</code> paramter. The <code>ticker</code> variable is defined as a select widget. The whole notebook is presented below:</p>

<p><img src="https://mljar.com/blog/dashboard-python-jupyter-notebook/dashboard-jupyter-yaml-header.png" alt="Screenshot of code for building dashboard in Python with Jupyter Notebook"/></p>

<p>OK, but how to run the web app? It is very simple, just run the command:</p>



<p>Thatâ€™s all! The <code>Mercury</code> will detect the notebooks in the directory and will serve them as web applications.</p>

<h2 id="deploy-to-the-cloud">Deploy to the cloud</h2>

<p>I recommend Heroku service for deployment. It offers free dynos and the deployment can be done with one command! We need to define the <code>Procfile</code> that will tell Heroku how to run our code:</p>

<div><div><pre><code>web: mercury run 0.0.0.0:$PORT
</code></pre></div></div>

<p>Letâ€™s commit all files to the repo:</p>

<div><div><pre><code>git add dashboard.ipynb
git add requirements.txt
git add Procfile
git commit -am &#34;create dashboard in Python&#34;
git push
</code></pre></div></div>

<p>We are ready for deployment. The first step is to create the app in the Heroku. Iâ€™m using Heroku CLI tool for app creation:</p>

<div><div><pre><code>heroku create dashboard-jupyter-notebook
</code></pre></div></div>

<p>The deployment command:</p>



<p>Really?! Yes, thatâ€™s all. Just wait a minute and your server will be running ðŸ˜Š My dashboard is running at <a href="https://dashboard-jupyter-notebook.herokuapp.com/">dashboard-jupyter-notebook.herokuapp.com/</a>. The demo of the dashboard is below:</p>

<p><img src="https://raw.githubusercontent.com/pplonski/dashboard-python-jupyter-notebook/main/media/jupyter-dashboard-finance.gif" alt="Financial Dashboard in Python with Jupyter Notebook"/></p>

<p>If you update the notebook and would like to deploy a newer version of the notebook, please just use the same command:</p>



<h2 id="export-notebook-to-pdf">Export notebook to PDF</h2>

<p>The <code>Mercury</code> has an option to export executed notebook as PDF file. The typical workflow is:</p>

<ul>
  <li>user tweaks widgets values,</li>
  <li>user clicks <code>Run</code> button to execute the notebook with new parameters,</li>
  <li>user clicks <code>Download</code> button to get executed notebook as PDF.</li>
</ul>

<p>You need to add a Heroku buildpack to make it work. It can be done in the <a href="https://dashboard.heroku.com">Heroku dashboard</a>:</p>

<div><div><pre><code>https://github.com/jontewks/puppeteer-heroku-buildpack
</code></pre></div></div>

<p><img src="https://mljar.com/blog/dashboard-python-jupyter-notebook/heroku-buildpack.png" alt="Heroku Buildpack to export Python notebook as PDF"/></p>

<p>After adding a buildpack with <code>puppeteer</code> you need to re-deploy the app. Please add do changes in the code or add <code>welcome.md</code> file (<code>welcome.md</code> message <a href="https://mercury-docs.readthedocs.io/en/latest/welcome/">docs</a>) and deploy with:</p>



<p>The exporting notebook to PDF with one click:</p>

<p><img src="https://github.com/pplonski/dashboard-python-jupyter-notebook/raw/main/media/notebook-to-pdf.gif" alt="Download Python notebook as PDF"/></p>

<h2 id="summary">Summary</h2>

<p>The finance dashboard was created with only 9 lines of the Python code. The Jupyter Notebook was used for development. The notebook was published as interactive dashboard thanks to <a href="https://github.com/mljar/mercury"><code>Mercury</code></a> framework.</p>

<ul>
  <li>The Python code is available in my repository:  <a href="https://github.com/pplonski/dashboard-python-jupyter-notebook">github.com/pplonski/dashboard-python-jupyter-notebook</a>.</li>
  <li>The dashboard is available online at <a href="https://dashboard-jupyter-notebook.herokuapp.com/">dashboard-jupyter-notebook.herokuapp.com/</a>.</li>
</ul>

<p>If you have any questions or need help please subscribe to the newsletter below. In the form, you can leave feedback, comment, or question. We do our best to respond quickly :)</p>

		
		

		
		<hr/>
		<div>
			<h3>ðŸ’Œ Let&#39;s stay in touch ðŸ’Œ</h3>
			
			<p>
						Please subscribe to the newsletter to be notified about our product updates and new articles. We will send you one e-mail per month.
					</p>
		
			
		</div>
		
		

		<hr/>
		<div>
			<section>
				

				<a href="https://github.com/mljar/mercury" target="_blank">
					
					<img src="https://mljar.com/images/mercury/mercury_banner_down.png"/> 
				</a>
				<div>
					<h3>Share your Python Notebooks with others</h3>
					</div>

			</section>
		</div>

		<hr/>

		


		<!-- <hr />
		<div style="box-shadow: 12px black;">
			<section>
				<div style="text-align: center;">
					<h3>Check our open-source AutoML framework for tabular data!</h3>
					<br />
					<div class="dark-button " style="padding-bottom: 60px;">
						<a href="https://github.com/mljar/mljar-supervised" target="_blank">Check on GitHub!</a>
					</div>
				</div>

				<a href="https://github.com/mljar/mljar-supervised" target="_blank">
					<div class="container flex blog-mljar-section ">
					</div>
				</a>

			</section>
		</div> -->

		<hr/>

		
	</div></div>
  </body>
</html>
