<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lcamtuf.substack.com/p/now-youre-thinking-with-relays">Original</a>
    <h1>Now you&#39;re thinking with relays</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p><span>Some time ago, my eldest son decided to build a single-bit computer using discrete transistors. The idea of a one-bit device might sound wacky, but the moniker doesn’t refer to a machine that can only have two instructions or two memory cells. Instead, it stands for the “word” size of the arithmetic logic unit (ALU). Low bit widths result in simpler circuitry, but require operands wider than the hardware limit to be processed in steps. One-bit ALUs are a bit extreme, but they have commercial precedent — notably including the </span><a href="http://www.bitsavers.org/components/motorola/14500/MC14500B_Industrial_Control_Unit_Handbook_1977.pdf" rel="">MC14500B</a><span> microcontroller made by Motorola in the late 1970s. </span></p><p>That said, today’s post is about something else: as dictated by the iron laws of sibling rivalry, his younger brother soon approached me and asked if I could help him build a computing device that’s even more obsolete. After some back-and-forth, we settled on a relay-based calculator. I was given further instructions: the PCBs must be old-school and off-yellow, and all relays must be see-through.</p><p>From the get go, I knew we wouldn’t be building a circuit that’s 100% relay-based. Doing so would make the project drag on for months — and especially with these transparent relays that retail for $6 a piece, it would cost too much. Still, I figured we can employ relays to do the actual math!</p><p>One of the most fundamental building blocks of any electronic computing device is the adder circuit. Despite its unassuming name, the circuit is also sufficient to also implement subtraction, multiplication, and division of integers. A modern ALU will typically contain a variety of other arithmetic circuits too, but the adder is still a major star.</p><p>The addition of binary digits is conceptually similar to working with decimal numbers, except dumbed down. You have two inputs with two possible values each; there is one output digit with the same property; and there’s a carry bit that can be either propagated to the next column or used to signal an overflow. The behavior can be summed up using the following truth table:</p><blockquote><pre><code><code> In_A  | In_B  | Out   | Out_C
-------+-------+-------+-------
 0     | 0     | 0     | 0
 0     | 1     | 1     | 0
 1     | 0     | 1     | 0
 1     | 1     | 0     | 1</code></code></pre></blockquote><p>This is notionally an arithmetic operation, but a cursory glance at the two rightmost columns reveals that it can be implemented using simple Boolean logic:</p><blockquote><pre><code><code>Out   = In_A XOR In_B
Out_C = In_A AND In_B</code></code></pre></blockquote><p>In an electronic circuit, if you have a way to construct basic logic gates, a straightforward implementation is:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg" width="1456" height="720" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:720,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:75853,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F5f47e2ee-199f-4acf-89dc-abfec7540a8d_2032x1005.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>A rudimentary one-bit adder.</em></figcaption></figure></div><p>That said, this circuit (a “half adder”) is incomplete in the sense that it doesn’t have a way to take carry from the preceding column into account; in other words, it can’t automatically add multi-bit integers.</p><p>To build a complete (“full”) adder, we need to take a somewhat more complicated approach with a third input line:</p><blockquote><pre><code><code> In_A  | In_B  | In_C  | Out   | Out_C
-------+-------+-------+-------+-------
 0     | 0     | 0     | 0     | 0
 0     | 1     | 0     | 1     | 0
 1     | 0     | 0     | 1     | 0
 1     | 1     | 0     | 0     | 1
       |       |       |       |
 0     | 0     | 1     | 1     | 0
 0     | 1     | 1     | 0     | 1
 1     | 0     | 1     | 0     | 1
 1     | 1     | 1     | 1     | 1</code></code></pre></blockquote><p>The first half (In_C = 0) is the same as for a half adder. The second half differs. The equivalent Boolean algebra is less elegant, but still easy to reverse engineer:</p><blockquote><pre><code><code>Out   = (In_A XOR In_B) XOR In_C
Out_C = (In_A AND In_B) OR (In_C AND (In_A OR In_B))</code></code></pre></blockquote><p>The electronic implementation can be realized by following this formula, or alternately, imagined as two half adders chained together, plus an OR operation applied to their carry outputs:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg" width="1456" height="559" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/fb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:559,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:93292,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Ffb87caf5-3606-4ed0-8555-99df023e12f6_2423x930.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>One way to conceptualize a full adder.</em></figcaption></figure></div><p>A full adder can be arbitrarily stacked to add any number of binary digits in a single cycle; or it can be used serially as a part of a 1-bit ALU, similar to my eldest son’s design mentioned earlier on.</p><p>Relays have two properties that make them well-suited for building digital logic: they are inherently binary in their operation, and they can “amplify” input signals so that you can chain the devices indefinitely. (To be fair, the devices also have a number of disadvantages: they are slow, costly, loud, and their contacts are prone to wear.)</p><p><span>There are many ways to implement relay-based logic, in part because of the variety of relays on the market and all the different ways of encoding zeroes and ones. For example, Konrad Zuse’s Z3 computer relied on exotic four-pole double-throw (4PDT) devices and “cheated” by also propagating a secondary, inverted carry signal — but the design pulled off a full adder with </span><a href="https://tams-www.informatik.uni-hamburg.de/applets/hades/webdemos/05-switched/20-relays/zuseadd.html" rel="">just two relays</a><span>!</span></p><p>For my project, using the lowest possible number of relays wasn’t a particularly appealing goal. Instead, I wanted to stick to commodity parts and keep the layout clean. I also had the aforementioned requirement for relays with see-through housings.</p><p><span>After some research, I settled on a series of compact </span><a href="https://www.mouser.com/datasheet/2/307/omron_g6c_0911-1189952.pdf" rel="">G6C</a><span> relays from Omron. The devices are available with a single SPST-NO switch, or with a complementary pair of SPST-NO and SPST-NC terminals. Here’s the SPST-NO design I used for the OR gate:</span></p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg" width="1456" height="696" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/ebe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:696,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:108540,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Febe0f572-7358-4870-b13a-a732b82e2a91_2827x1351.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>A simple relay-based OR.</em></figcaption></figure></div><p>The operation of this circuit should be obvious: the output is connected to the positive supply rail if either of the relays is on. Otherwise, the output floats.</p><p>One could also implement an OR gate with a single SPDT relay, although the pass-through architecture for one of the inputs means that “fanout” (downstream loading of the output) must be kept in check:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png" width="1456" height="965" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:965,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:57440,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F86c3c187-c37e-4d3f-9c22-d119be03387a_1665x1104.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>A “budget” version of the same.</em></figcaption></figure></div><p>An AND gate can be constructed similarly, with one or two SPST-NO relays:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg" width="1456" height="1239" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1239,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:118742,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F71842868-648a-4fdc-928b-06f66e664e3a_2177x1852.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Two possible AND gate architectures.</em></figcaption></figure></div><p>The construction of an XOR gate is a bit more involved, generally benefiting from double-throw relays. Here’s the solution I implemented with Omron’s complementary SPST-NO + SPST-NC topology:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg" width="1456" height="677" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:677,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:102080,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F59ea0f39-2a3e-47ac-9188-ed057debebbc_2715x1262.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Relay-based XOR.</em></figcaption></figure></div><p>The SPST-NO terminals perform an OR operation, connecting the output to a common rail (bottom) when any of the relays is on. The SPST-NC side performs NAND, disconnecting that rail from the positive supply when both relays are energized.</p><p>A more compact version of essentially the same architecture can be drawn with SPDT relays, as shown below:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png" width="1456" height="672" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:672,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:77304,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8bc6893f-4f1d-424f-8715-e1b5b41de83c_2278x1052.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Another substantially identical take on XOR.</em></figcaption></figure></div><p>In the end, I used twelve relays for the most straightforward implementation of the six Boolean operations needed to implement a full adder:</p><blockquote><pre><code><code>Out   = (In_A XOR In_B) XOR In_C
Out_C = (In_A AND In_B) OR (In_C AND (In_A OR In_B))</code></code></pre></blockquote><p>Here’s the close-up of the adder section on the PCB. Note the “retro” curved traces and the deliberate absence of a solder mask:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png" width="1456" height="548" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:548,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:394133,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F818be9cc-5ab9-4879-8a55-75c8d35c30b9_3238x1218.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>PCB detail for the 1-bit full adder.</em></figcaption></figure></div><p>Getting this layout done in KiCad was an absolutely miserable experience. I had some extended back-and-forth with the PCB manufacturer too.</p><p>Nope, at least not for now! The entire “main” board is shown below, complete with keypad stickers, an old-school switch, a rare radial electrolytic cap — and yes, an 8-bit microcontroller:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg" width="1456" height="972" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:972,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:1902758,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F83a19cbd-1966-44d1-a14b-b95eb523f3fd_2000x1335.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Main PCB for Calc-U-Later.</em></figcaption></figure></div><p>The microcontroller is there to take care of a variety of auxiliary tasks that would require hundreds of additional relays. This includes keypad scanning, digit decoding, operation sequencing, error handling, and memory. That said, the adder has a clearly-delineated role and is there to perform actual math.</p><p>Here’s the sequence of MCU operations for addition:</p><ol><li><p>Set operand bit pointer to 0 (LSB),</p></li><li><p>Initialize the adder “carry in” line to zero,</p></li><li><p>Push operand bits onto the adder input lines,</p></li><li><p>Wait around 20 ms for the relays to settle,</p></li><li><p>Read back and store the adder output bit,</p></li><li><p>Propagate “carry out” to “carry in”,</p></li><li><p>Advance the operand bit pointer to the right,</p></li><li><p>Loop back to #3 until out of bits to add.</p></li></ol><p>In other words, there is no cheating, although the MCU could in principle do the ALU work on its own.</p><p>Of course, it’s not just addition; other arithmetic operations can be done with the same circuitry. For example, multiplication can be unwound into a series of progressive additions of bit-shifted values, somewhat akin to a dumbed-down version of how we do “long multiplication” by hand:</p><blockquote><pre><code>110 × 1011 = ?
 ↓     ↓
110 ×  1   →      110
110 ×  1   →     110
110 ×  0   →    000
110 ×  1   →   110 
              -------
       sum =  1000010</code></pre></blockquote><p>This bit shifting can be done with an adder if one is so inclined; each left shift is equivalent to adding the operand to itself (i.e., multiplying it by 2).</p><p>Subtraction is similarly easy: it can be implemented the addition of two’s complement (which in turn can be computed by abusing the adder to operate as a NOT gate.) And with subtraction done, division is also within reach.</p><p>That’s where I went a bit nuts and constructed a Rube Goldberg-esque device just for the sake of it. The PCB contains a couple of 7-segment displays, but they are driven entirely by relays:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png" width="1456" height="1027" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:1027,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:1048441,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F092d98cf-d3ac-4241-804f-f7bf2161aa80_2666x1880.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>A close-up of the unpopulated display board.</em></figcaption></figure></div><p>To keep the number of data lines in check, display state is stored in 8-bit latches (six 74HC259 chips at the bottom), so the relays are largely superfluous — but the idea was to make the entering digits as satisfying as watching the ALU at work.</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg" width="1456" height="971" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:971,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:1946960,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/jpeg&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8acdc040-6058-459d-bf12-023af2498b28_2000x1334.jpeg 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Assembled display module.</em></figcaption></figure></div><p>I will record a complete demo once I finish programming the MCU and build an enclosure. In the meantime, here’s a quick video of a functional test of the display module:</p><div id="vimeo-880234534" data-attrs="{&#34;videoId&#34;:&#34;880234534&#34;,&#34;videoKey&#34;:&#34;5a0003e7be&#34;,&#34;belowTheFold&#34;:true}" data-component-name="VimeoToDOM"><p><iframe src="https://player.vimeo.com/video/880234534?autoplay=0&amp;h=5a0003e7be" frameborder="0" gesture="media" allow="autoplay; fullscreen" allowautoplay="true" allowfullscreen="true" loading="lazy"></iframe></p></div><p>And here’s a lower-quality (but audio-visually mesmerizing!) cell phone video showing the multiplication of 111 by 222:</p><div id="vimeo-880389001" data-attrs="{&#34;videoId&#34;:&#34;880389001&#34;,&#34;videoKey&#34;:&#34;c315de4c25&#34;,&#34;belowTheFold&#34;:true}" data-component-name="VimeoToDOM"><p><iframe src="https://player.vimeo.com/video/880389001?autoplay=0&amp;h=c315de4c25" frameborder="0" gesture="media" allow="autoplay; fullscreen" allowautoplay="true" allowfullscreen="true" loading="lazy"></iframe></p></div><p>It depends. If we settle for primitive inputs and outputs — say, columns of fixed-position switches and indicators — then addition and subtraction can be done in a single step with an adder circuit of a sufficient width. The total number of relays would be a low multiple of the number of input bits.</p><p>The picture gets more complicated if we want to implement multiplication and division. These operations are most practically implemented as a series of steps. You’d need a clock, a “microcode sequencer”, and an array of multiplexers that flexibly connect registers to perform loads, stores, and ALU operations.</p><p>Even more complexity arises if we desire to support modern-style input, with digits typed in left-to-right. Because the operands need to be right-aligned during calculation, and the number of digits to be entered isn’t known beforehand, more circuitry would be needed to implement the necessary shifts.</p><p><span>In the end, precise estimates are hard, but extrapolating from early transistor calculators such as </span><a href="https://lcamtuf.substack.com/p/a-brief-history-of-counting-stuff" rel="">Friden EC-130</a><span>, I’d wager that around 500 relays would be needed for the task.</span></p><p><span>At $6 a piece, the relays I’m using in this project wouldn’t be a wise choice; that said, subminiature signal relays, such as </span><a href="https://www.mouser.com/datasheet/2/447/KEM_R7001_EA2_EB2-3316771.pdf" rel="">Kemet EA2-5NU</a><span>, would result in a final price tag of under $1,000 — and in a reasonable desk footprint, too.</span></p><p>Power shouldn’t be a major issue — we’re talking tens of watts — but performance is a limiting factor. For subminiature relays, 200 Hz is probably the upper limit. For larger relays, 50 Hz is a lot.</p><p>Once I have this “introductory” project wrapped up, I might be tempted to give a 100% relay-based calculator a try…</p><p><em><span>For a categorized list of my other articles on electronics, </span><a href="https://lcamtuf.coredump.cx/offsite.shtml" rel="">click here</a><span>.</span></em></p></div></div></div></article></div></div></div>
  </body>
</html>
