<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zwischenzugs.com/2022/08/08/who-should-write-the-terraform/">Original</a>
    <h1>“Who Should Write the Terraform?”</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<h2>The Problem</h2>



<p>Working in <a rel="noreferrer noopener" href="https://www.container-solutions.com/" target="_blank">Cloud Native consulting</a>, <strong>I’m often asked about who should do various bits of ‘the platform work</strong>‘. </p>



<p>I’m asked this in various forms, and at various levels, but the title’s question (‘Who should write the Terraform?) is a fairly typical one. Consultants are often asked simple questions that invite simple answers, but it’s our job to frustrate our clients, so <strong>I invariably say “it depends”</strong>.</p>



<p>The reason it depends is that <strong>the answers to these seemingly simple questions are very context-dependent</strong>. Even if there is an ‘ideal’ answer, the world is not ideal, and the best thing for a client at that time might not be the best thing for the industry in general.</p>



<p>So here I attempt to lay out the factors that help me answer that questions as honestly as possible. But before that, we need to lay out some background.</p>



<p><strong>Here’s an overview of the flow of the piece:</strong></p>



<ul><li>What is a platform?</li><li>How we got here<ul><li>Coders and Sysadmins became…</li><li>Dev and Ops, but silos and slow time to market, so…</li><li>DevOps, but not practical, so…</li><li>SRE and Platforms</li></ul></li><li>The factors that matter<ul><li>Non-negotiable standards</li><li>Developer capability</li><li>Management capability</li><li>Platform capability</li><li>Time to market</li></ul></li></ul>



<h2>What is a Platform?</h2>



<p>Those old enough to remember when the word ‘middleware’ was everywhere will know that many industry terms are so vague or generic as to be meaningless. However, for ‘platform’ work we have a handy definition, courtesy of <a rel="noreferrer noopener" href="https://teamtopologies.com/" target="_blank">Team Topologies</a>:</p>



<blockquote>
<p>The purpose of a platform team is to enable stream-aligned teams to deliver</p>
<cite>Team Topologies, Matthew Skelton and Manuel Pais</cite></blockquote>



<p>A platform team, therefore, (and putting it crudely) builds the stuff that lets others build and run their stuff.</p>



<p>So… is the Terraform written centrally, or by the stream-aligned teams?</p>



<p>To explain how I would answer that, I’m going to have to do a little history.</p>



<h2>How We Got Here</h2>



<h3>Coders and Sysadmins</h3>



<p><strong>In simpler times – after the Unix epoch and before the dotcom boom – there were coders and there were sysadmins.</strong> These two groups speciated from the generic ‘computer person’ that companies found they had to have on the payroll (whether they liked it or not) in the 1970s and 80s.</p>



<p>As a rule, the coders liked to code and make computers do new stuff, and the sysadmins liked to make sure said computers worked smoothly. Coders would eagerly explain that with some easily acquired new kit, they could revolutionise things for the business, while sysadmins would roll their eyes and ask how this would affect user management, or interoperability, or stability, or account management, or some other boring subject no-one wanted to hear about anymore.</p>



<p><strong>I mention this because this pattern has not changed. Not one bit. Let’s move on.</strong></p>



<h3>Dev and Ops</h3>



<p><strong>Time passed, and the Internet took over the world.</strong> Now we had businesses running websites as well as their internal machines and internal networks. Those websites were initially given to the sysadmins to run. Over time, these websites became more and more important for the bottom line, so eventually, the sysadmins either remained sysadmins and looked after ‘IT’, or became ‘operations’ (Ops) staff and looked after the public-facing software systems.</p>



<p>Capable sysadmins had always liked writing scripts to automate manual tasks (hence the t-shirt), and this tendency continued (sometimes) in Ops, with automation becoming the defining characteristic of modern Ops.</p>


<div>
<figure><a href="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png"><img loading="lazy" data-attachment-id="5847" data-permalink="https://zwischenzugs.com/2022/08/08/who-should-write-the-terraform/screenshot-2022-07-31-at-16-59-16/" data-orig-file="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png" data-orig-size="1354,1328" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="screenshot-2022-07-31-at-16.59.16" data-image-description="" data-image-caption="" data-medium-file="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=300" data-large-file="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=1024" src="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=1024" alt="" width="491" height="480" srcset="https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=979 979w, https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=150 150w, https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=300 300w, https://zwischenzugs.files.wordpress.com/2022/07/screenshot-2022-07-31-at-16.59.16.png?w=768 768w" sizes="(max-width: 491px) 100vw, 491px"/></a></figure></div>


<p>Eventually a rich infrastructure emerged around the work. ‘Pipelines’ started to replace ‘release scripts’, and concepts like ‘continuous integration’, and ‘package management’ arose. But we’re jumping ahead a bit; this came in the DevOps era.</p>



<p>Coders, meanwhile, spent less and less time doing clever things with chip registers and more and more time wrangling different software systems and APIs to do their business’s bidding. They stopped being called ‘coders’ and started being called ‘developers’.</p>



<p><strong>So ‘Devs’ dev’d, and ‘Ops’ ops’ed.</strong></p>



<p><strong>These groups grew in size and proportion of the payroll as software started to ‘eat the world’.</strong></p>



<p>In reality, of course, there was a lot of overlap between the two groups, and people would often move from one side of the fence to the other. But the distinction remained, and become organisational orthodoxy.</p>



<h3>Dev and Ops Inefficiencies</h3>



<p>As the Dev and Ops this pattern became bedded into organisation, <strong>people noted some inefficiencies with this state of affairs</strong>:</p>



<ul><li>Release overhead</li><li>Misplaced expertise</li><li>Cost</li></ul>



<p>First, <strong>there was a release overhead as Dev teams passed changes to Ops</strong>. Ops teams typically required instructions for how to do releases, and in a pre-automation age these were often prone to error without app- or even release-specific knowledge. I was present about 15 years in a very fractious argument between a software supplier and its client’s Ops team after an outage. The Ops team attempted to follow instructions for a release, which resulted in an outage, as instructions were not followed correctly. There was much swearing as the Ops team remonstrated that the instructions were not clear enough, while the Devs argued that if the instructions had been followed properly then it would have worked. Fun.</p>



<p>Second, <strong>Ops teams didn’t know in detail what they were releasing</strong>, so couldn’t fix things if they went wrong. The best they could do was restart things and hope they worked.</p>



<p>Third, <strong>Ops teams looked expensive to management</strong>. They didn’t deliver ‘new value’, just farmed existing value, and appeared slow to respond and risk-averse. </p>



<p><strong>I mention this because this pattern has not changed. Not one bit. Let’s move on.</strong></p>



<p>These and other inefficiencies were characterised as ‘silos’ – unhelpful and wasteful separations of teams for (apparently) no good purpose. Frictions increased as these mismatches were exacerbated by embedded organisational separation.</p>



<p><strong>The solution was clearly to get rid of the separation: no more silos!</strong></p>



<h3>Enter DevOps</h3>



<p><strong>The ‘no more silos’ battle cry got a catchy name – DevOps</strong>. The phrase was usefully vague and argued over for years, just as Agile was and is (see <a rel="noreferrer noopener" href="https://zwischenzugs.com/2017/10/15/my-20-year-experience-of-software-development-methodologies/" target="_blank">here</a>). DevOps is defined by Wikipedia as ‘a set of practices that combines software development (Dev) and IT operations (Ops)’. </p>



<p><strong>At the purest extreme, DevOps is the movement of all infrastructure and operational work and responsibilities (ie ‘delivery dependencies’) into the development team.</strong><span></span><span></span></p>



<p>This sounded great in theory. It would:</p>



<ul><li>Place the operational knowledge within the development team, where its members could more efficiently collaborate in tighter iterations</li><li>Deliver faster – no more waiting weeks for the Ops team to schedule a release, or waiting for Ops to provide some key functionality to the development team</li><li>Bring the costs of operations closer to the value (more exactly: the development team bore the cost of infrastructure and operations as part of the value stream), making P&amp;L decisions closer to the ‘truth’</li></ul>



<h3>DevOps Didn’t</h3>



<p>But despite a lot of effort, <strong>the vast majority of organisations couldn’t make this ideal work in practice</strong>, even if they tried. The reasons for this were systemic, and some of the reasons are listed below:</p>



<ul><li><strong>Absent an existential threat, the necessary organisational changes were more difficult to make. </strong>This constraint limited the willingness or capability to make any of the other necessary changes</li><li>The organisational roots of the Ops team were too deep. You couldn’t uproot the metaphorical tree of Ops without disrupting the business in all sorts of ways</li><li>There were regulatory reasons to centralise Ops work which made distribution very costly</li><li>The development team didn’t want to – or couldn’t – do the Ops work</li><li>It was more expensive. Since some work would necessarily be duplicated, you couldn’t simply distribute the existing Ops team members across the development teams, you’d have to hire more staff in, increasing cost</li></ul>



<p>I said ‘the vast majority’ of organisations couldn’t move to DevOps, but there are exceptions. <strong>The exceptions I’ve seen in the wild implemented a purer form of DevOps when there existed:</strong></p>



<ul><li><strong>Strong engineering cultures</strong> where teams full of T-shaped engineers want to take control of <em>all</em> aspects of delivery AND </li><li><strong>No requirement for centralised control</strong> (eg regulatory/security constraints)</li></ul>



<p>and/or,</p>



<ul><li>A gradual (perhaps guided) <strong>evolution over time</strong> towards the breaking up of services and distribution of responsibility</li></ul>



<p>and/or,</p>



<ul><li><strong>Strong management support</strong> and drive to enable</li></ul>



<p>The most famous example of the ‘strong management support’ is Amazon, where so-called pizza teams must deliver and support their products independently. (I’ve never worked for Amazon so I have no direct experience of the reality of this). This, notably, was the product of a <a rel="noreferrer noopener" href="https://api-university.com/blog/the-api-mandate/" target="_blank">management edict</a> to ensure teams operated independently.</p>



<p>When I think of this DevOps ideal, I think of a company with multiple teams each independently maintaining their own discrete marketing websites in the cloud. Not many businesses have that kind of context and topology. </p>



<h3>Enter SRE and Platforms</h3>



<p>One of the reasons listed above for the failure of DevOps was the critical one: expense.</p>



<p>Centralisation, for all its bureaucratic and slow-moving faults, <em>can</em> result in vastly cheaper and more scalable delivery across the business. <strong>Any dollar spent at the centre can save <em>n</em> dollars across your teams, where <em>n</em> is the number of teams consuming the platform.</strong></p>



<p>The most notable example of this approach is Google, who have a few workloads to run, and built their own platform to run them on. Kubernetes is a descendant of that internal platform.</p>



<p><strong>It’s no coincidence that Google came up with DevOps’s fraternal concept: SRE.</strong> SRE emphasised the importance of getting Dev skills into Ops rather than making Dev and Ops a single organisational unit. This worked well at Google primarily because there was an engineering culture at the centre of the business, and an ability to understand the value of investing in the centre rather than chasing features. Banks (who might well benefit from a similar way of thinking) are <em>dreadful</em> at managing and investing in centralised platforms, because they are not fundamentally tech companies (they are defenders of banking monopoly licences, but that’s a post for another day, also see <a rel="noreferrer noopener" href="https://zwischenzugs.com/2018/10/02/why-are-enterprises-so-slow/" target="_blank">here</a>).</p>



<p>So across the industry, those that might have been branded sysadmins first rebranded themselves as Ops, then as DevOps, and finally SREs. Meanwhile they’re mostly the same people doing similar work.</p>



<h2>Why the History Lesson?</h2>



<p>What’s the point of this long historical digression?</p>



<p>Well, it’s to explain that, <strong>with a few exceptions, the division between Dev and Ops, and between centralisation and distribution of responsibility has never been resolved</strong>. And the reasons why the industry seems to see-saw are the same reasons why the answer to the original question is never simple.</p>



<p>Right now, thanks to the SRE movement (and Kubernetes, which is a <a href="https://zwischenzugs.com/2019/03/25/aws-vs-k8s-is-the-new-windows-vs-linux/">trojan horse leading you away from cloud lock-in</a>), there is a fashion-swing back to centralisation. But that might change again in a few years.</p>



<p>And it’s in this historical milieu that I get asked questions about who should be responsible for what with respect to work that could be centralised. </p>



<h2>The Factors</h2>



<p>Here are the factors that play into the advice that I might give to these questions, in rough order of importance.</p>



<h3>Factor One: Non-Negotiable Standards</h3>



<p><strong>If you have standards or practices that must be enforced on teams</strong> for legal, regulatory, or business reasons, then at least some work needs to be done at the centre.</p>



<p>Examples of this include:</p>



<ul><li>Demonstrable separation of duties between Dev and Ops</li><li>User management and role-based access controls</li></ul>



<p>Performing an audit on one team is obviously significantly cheaper than auditing a hundred teams. Further, with an audit, the majority of expense is not in the audit but the follow-on rework. The cost of that can be reduced significantly if a team is experienced at knowing from the start what’s required to get through an audit. For these reasons, the cost of an audit across your 100 dev teams can be <em>more</em> than 100x the cost of a single audit at the centre. </p>



<h3>Factor Two: Engineer Capability</h3>



<p><strong>Development teams vary significantly in their willingness to take on work and responsibilities outside their existing domain of expertise.</strong> This can have a significant effect on who does what.</p>



<p>Anecdote: I once worked for a business that had a centralised DBA team, who managed databases for thousands of teams. There were endless complaints about the time taken to get ‘central IT’ to do their bidding, and frequent demands for more autonomy and freedom.</p>



<p>A cloud project was initiated by the centralised DBA team to enable that autonomy. It was explained that since the teams could now provision their own database instances in response to their demands, they would no longer have a central DBA team to call on.</p>



<p>Cue howls of despair from the development teams that they need a centralised DBA service, as they didn’t want to take this responsibility on, as they don’t have the skills.</p>



<p>Another example is embedded in the title question about Terraform. Development teams often don’t want to learn the skills needed for a change of delivery approach. They just want to carry on writing in whatever language they were hired to write in.</p>



<p><strong>This is where organisational structures like ‘cloud native centres of excellence’ (who just ‘advise’ on how to use new technologies), or ‘federated devops teams’ (where engineers are seconded to teams to spread knowledge and experience) come from.</strong> The idea with these ‘enabling teams’ is that once their job is done they are disbanded. Anyone who knows anything about political or organisational history knows that these plans to self-destruct often don’t pan out that way, and you’re either stuck with them forever, or some put-upon central team gets given responsibility for the code in perpetuity.</p>



<h3>Factor Three: Management Capability</h3>



<p>While the economic benefits of having a centralised team doing shared work may seem intuitively obvious, <strong>senior management in various businesses are often not able</strong> to understand its value, and manage it as a pure cost centre.</p>



<p>This is arguably due to assumptions arising out of internal accounting assumptions. Put simply, <strong>the value gained from centralised work is not traced back to profit calculations</strong>, so is seen as pure cost. (I wrote a little about non-obvious business value <a rel="noreferrer noopener" href="https://zwischenzugs.com/2022/05/29/business-value-management-autonomy-and-engineer-retention/" target="_blank">here</a>.)</p>



<p><strong>In companies with competent technical management, the value gained from centralised work is (implicitly, due to an understanding of the actual work involved) seen as valuable. </strong>This is why tech firms such as Google can successfully manage a large-scale platform, and why it gave birth to SRE and Kubernetes, two icons of tech org centralisation. It’s interesting that Amazon – with its roots in retail, distribution, and logistics – takes a radically different distributed approach.</p>



<p>If your organisation is not capable of managing centralised platform work, then it may well be more effective to distribute the work across the feature teams, so that cost and value can be more easily measured and compared.<span></span></p>



<h3>Factor Four: Platform Team Capability</h3>



<p>Here we are back to the old fashioned silo problem. <strong>One of the most common complaints about centralised teams is that they fail to deliver what teams actually need</strong>, or do so in a way that they can’t easily consume.</p>



<p>Often this is because of the ‘non-negotiable standards’ factor above resulting in security controls that stifle innovation. But i<strong>t can also be because the platform team is not interested, incentivised, or capable enough to deliver what the teams need</strong>. In these latter cases, it can be very inefficient or even harmful to get them to do some of the platform work.</p>



<p><strong>This factor can be mitigated with good management.</strong> I’ve seen great benefits from moving people around the business so they can see the constraints other people work under (a common principle in the DevOps movement) rather than just complain about their work. However, as we’ve seen, poor management is often already a problem, so this can be a non-starter.</p>



<h3>Factor Five: Time to Market</h3>



<p>Another significant factor is <strong>whether it’s important to keep the time to delivery low</strong>. Retail banks don’t care about time to delivery. They may say they do, but the reality is that they care far more about not risking their banking licence, not causing outages that attract the interest of regulators. In the financial sector, hedge funds, by contrast, might care very much about time to market as they are unregulated and wish to take advantage of any edge they might have as quickly as possible. Retail banks tend towards centralised organisational architectures, while hedge funds devolve responsibility as close to the feature teams as possible.</p>



<h2>So, Who Should Write the Terraform?</h2>



<p>Returning to the original question, the question of ‘who should write the Terraform?’ can now be more easily answered, or at least approached. Depending on the factors discussed above, it might make sense for them to be either centralised or distributed.</p>



<p><strong>More importantly, by not simply assuming that there is a ‘right’ answer, you can make decisions about where the work goes with your eyes open about what the risks, trade-offs, and systemic preferences of your business are.</strong></p>



<p>Whichever way you go, make sure that you establish which entity will be responsible for <em>maintaining</em> the resulting code as well as producing it. Code, it is important to remember, is an asset that needs maintenance to remain useful and if this is ignored there could be great confusion in the future.</p>



<hr/>



<p>If you enjoyed this, then please consider <a rel="noreferrer noopener" href="https://www.buymeacoffee.com/zwischenzugs" target="_blank">buying me a coffee</a> to encourage me to do more.</p>


<div>
<figure><a href="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg"><img loading="lazy" data-attachment-id="5886" data-permalink="https://zwischenzugs.com/2022/08/08/who-should-write-the-terraform/head_shot/" data-orig-file="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg" data-orig-size="1009,1345" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;1.7&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;SM-G950F&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;1554298362&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;4.2&#34;,&#34;iso&#34;:&#34;40&#34;,&#34;shutter_speed&#34;:&#34;0.0010288065843621&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;,&#34;latitude&#34;:&#34;51.533055555556&#34;,&#34;longitude&#34;:&#34;-0.12555555555556&#34;}" data-image-title="head_shot" data-image-description="" data-image-caption="" data-medium-file="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=225" data-large-file="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=768" src="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=768" alt="" width="138" height="183" srcset="https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=138 138w, https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=276 276w, https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=113 113w, https://zwischenzugs.files.wordpress.com/2022/08/head_shot.jpg?w=225 225w" sizes="(max-width: 138px) 100vw, 138px"/></a></figure></div>


<figure><a href="https://www.buymeacoffee.com/zwischenzugs"><img data-attachment-id="5328" data-permalink="https://zwischenzugs.com/bmc-button/" data-orig-file="https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png" data-orig-size="1090,306" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="bmc-button" data-image-description="" data-image-caption="" data-medium-file="https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=300" data-large-file="https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=1024" src="https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=1024" alt="" srcset="https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=1024 1024w, https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=150 150w, https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=300 300w, https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png?w=768 768w, https://zwischenzugs.files.wordpress.com/2021/05/bmc-button.png 1090w" sizes="(max-width: 1024px) 100vw, 1024px"/></a></figure>
	</div></div>
  </body>
</html>
