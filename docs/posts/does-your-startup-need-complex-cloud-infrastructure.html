<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.hadijaveed.me/2024/09/08/does-your-startup-really-need-complex-cloud-infrastructure/">Original</a>
    <h1>Does your startup need complex cloud infrastructure?</h1>
    
    <div id="readability-page-1" class="page"><div data-md-component="main"> <div>  <div data-md-component="content"> <!-- Page content --> <article>   <p>I recently listened to <a href="https://x.com/levelsio" target="_blank">Pieter Levels</a> on the <a href="https://www.youtube.com/watch?v=oFtjKbXKqbg&amp;ab_channel=LexFridman" target="_blank">Lex Friedman Podcast</a>, and it was eye-opening. Pieter has built numerous successful micro-SaaS businesses by running his applications on single server, avoiding cloud infrastructure complexity, and focusing on what truly matters: product-market fit.</p> <!-- more --> <p>While his approach might not suit teams and generally every startup, but it raises a valid point: we&#39;ve often made deployment and infrastructure management complex for complexity&#39;s sake.</p> <p>For small dev teams moving past the MVP stage, managing deployments and databases can be challenging. But here&#39;s the truth: not every project needs Kubernetes, complex distributed systems, or auto-scaling from day one. Simple infrastructure can often suffice, allowing teams to focus on building a great product and finding market fit.</p> <h2 id="recent-observations">Recent Observations<a href="#recent-observations" title="Permanent link">¶</a></h2> <p>Let me share two recent examples of projects I&#39;ve worked on that highlight this issue:</p> <h3 id="project-1-lambda-overload">Project 1: Lambda Overload<a href="#project-1-lambda-overload" title="Permanent link">¶</a></h3> <ul> <li>20-30 Lambda functions for different services</li> <li>SQS and various background jobs backed by Lambda</li> <li>Logs scattered across CloudWatch</li> </ul> <p>Result? Painful debugging, difficult changes, and complex deployments, even in a monorepo. Could this have been simplified to a single NodeJS container or Python Flask/FastAPI app with Redis for background tasks? Absolutely.</p> <h3 id="project-2-microservices-mayhem">Project 2: Microservices Mayhem<a href="#project-2-microservices-mayhem" title="Permanent link">¶</a></h3> <ul> <li>7 small microservices on Kubernetes (EKS)</li> <li>Separate services for CRUD and business logic</li> </ul> <p>While Kubernetes is powerful, the team spent more time on infrastructure than building features. Was this level of separation necessary for their scale?</p> <div> <p>Note</p> <p>Enterprise-scale companies face different challenges with compliance and large workforces. Startups don&#39;t need to mimic this complexity. Early-stage companies should prioritize product-market fit and rapid iteration.</p> </div> <h2 id="the-power-of-single-server-setups">The Power of Single Server Setups<a href="#the-power-of-single-server-setups" title="Permanent link">¶</a></h2> <p>Modern servers pack a punch. You can get powerful VMs from <a href="https://www.hetzner.com/" target="_blank">Hetzner</a> or <a href="https://www.latitude.sh/" target="_blank">latitude.sh</a> at budget-friendly prices. Even <a href="https://cloud.google.com/compute/vm-instance-pricing" target="_blank">GCP VMs</a> and <a href="https://aws.amazon.com/ec2/pricing/on-demand/" target="_blank">EC2</a> instances are reasonably priced.</p> <p>These machines offer robust compute power - think 40GB RAM and multiple cores - often outperforming distributed services or multiple Lambdas or ECS tasks. Plus, everything&#39;s centralized and easier to manage.</p> <p>Worried about scaling to millions of QPS? Cross that bridge when you come to it. By then, you&#39;ll likely have an infrastructure team to handle it.</p> <p>For a reliable single VM setup, you need:</p> <ol> <li>A robust machine (EC2, GCP VM, Hetzner, etc.)</li> <li>Secure access (HTTPS for web, IP-restricted SSH or SSM for deployment)</li> <li>CI/CD for zero-downtime deployments</li> <li>DNS configuration</li> <li>Regular database backups</li> <li>A standby VM for redundancy</li> </ol> <p>Yes, you&#39;ll need a solid disaster recovery strategy and tested mean recovery time, but it&#39;s achievable with a backup VM.</p> <h2 id="docker-compose">Docker Compose<a href="#docker-compose" title="Permanent link">¶</a></h2> <p>Docker Compose is fantastic for local development, managing multiple services with a single command. Surprisingly, it&#39;s underutilized in production environments, and Docker Swarm was deprecated..</p> <p>While Docker Compose can cause downtime during updates, there are <a href="https://docs.docker.com/compose/production/" target="_blank">guides for production deployment</a>. It&#39;s a balance between simplicity and production readiness.</p> <h2 id="docker-compose-anywhere-a-weekend-project">Docker Compose Anywhere: A Weekend Project<a href="#docker-compose-anywhere-a-weekend-project" title="Permanent link">¶</a></h2> <p>To simplify this setup further, I created <a href="https://github.com/hadijaveed/docker-compose-anywhere" target="_blank">Docker Compose Anywhere</a> over the weekend. This opinionated template offers:</p> <ul> <li>One-click Linux server setup via GitHub Actions</li> <li>Zero-downtime continuous deployment using GitHub Container Registry and <a href="https://github.com/Wowu/docker-rollout" target="_blank">Docker Rollout</a></li> <li>Environment variable and secret management (considering <a href="https://github.com/FiloSottile/age" target="_blank">age</a> or <a href="https://github.com/getsops/sops" target="_blank">sops</a> for improved security)</li> <li>Automated Postgres backups via GitHub Actions</li> <li>Multi-app support on a single VM</li> <li>Automated SSL with <a href="https://traefik.io/traefik/" target="_blank">Traefik</a> and <a href="https://letsencrypt.org/" target="_blank">Let&#39;s Encrypt</a></li> <li>Deploy Next.js apps, GO, Python, Node.js, and more</li> </ul> <h3 id="few-considerations">Few Considerations<a href="#few-considerations" title="Permanent link">¶</a></h3> <p>For security, remember to:</p> <ul> <li>Set strict firewall rules (open only necessary ports)</li> <li>Secure SSH keys (prefer SSM on AWS or CLI on GCP)</li> <li>Use a bastion host for enhanced security</li> <li>Protect secrets and consider using a WAF or Cloudflare</li> </ul> <p>Don&#39;t forget about data protection:</p> <ul> <li>Send encrypted database backups to secure cloud storage (e.g., S3 or equivalent)</li> <li>Regularly snapshot your disks for added redundancy</li> <li>Implement a retention policy for backups and snapshots</li> </ul> <p>As engineers, our primary goal should be advocating for simplicity in our setup and focusing on the core product. </p> <p>It&#39;s all too easy to get distracted by shiny new tools or complex setups that mimic what Google engineers or large enterprises are doing. But here&#39;s the truth: whether you&#39;re in a startup or not, what truly matters is talking to your users and finding product-market fit.</p> </article> </div>   </div>  </div></div>
  </body>
</html>
