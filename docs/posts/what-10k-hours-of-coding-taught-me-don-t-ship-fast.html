<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sotergreco.com/what-10000-hours-of-coding-taught-me-dont-ship-fast">Original</a>
    <h1>What 10k Hours of Coding Taught Me: Don&#39;t Ship Fast</h1>
    
    <div id="readability-page-1" class="page"><div id="post-content-wrapper"><p>I’ve been an engineer for over 7 years now. I have worked on countless projects in backend, frontend, and DevOps. I don’t consider myself a great engineer; there are people out there who are not only smarter but also more experienced. Over the years, I have learned some tricks to help me climb the programming ladder, allowing me to build software that is reliable and easy to work with.</p>
<p>Being slow has made me code faster, ship more, and be more productive in general. This didn’t come only from years of coding but also from life lessons and my religion. As an Orthodox Christian, you have to always be slow and not rush your moves.</p>
<h2 id="heading-the-1-problem-with-software">The #1 Problem with Software</h2>
<p>Most people, when they start to code, think that great engineers are magicians who build applications in a unique way that no one can understand. That is very far from the truth. If you actually take a look at great engineers&#39; code, you will find it very simple and easy to navigate and understand.</p>
<p>Your application doesn’t need to be fast, fancy, or use cutting-edge technology for you to be considered a good programmer. Managers also make that mistake. They hire people based on things that are far from the truth.</p>
<p>Giving coding tests where you have to build an application from scratch is a terrible way to judge someone&#39;s skills. Whiteboard interviews are actually better than coding challenges that give you 3 days to complete because at least they take a look at your IQ and your way of thinking.</p>
<p>Now, let&#39;s talk about the #1 problem that everyone should focus on but often overlooks:</p>
<p><strong>Developer Experience</strong></p>
<p>This is the most important thing in the entire project 99% of the time. Because everybody wants to ship fast to make money, but they end-up building 90% of the application in 1 month and the last 10% takes them 3 months to finish.</p>
<p>Developers are also hyped up for new projects so they try to take the quick dopamine to just have something to showcase as fast as possible and make there managers happy as well.</p>
<p>They end-up making there managers happy, yet in the long-run everybody is panicking and they are considering refactoring or even building the application from scratch after 4-5 years.</p>
<p>That’s why actually creating features becomes really hard and even harder to push them to production. This creates a snowball effect.  </p>
<p>Let’s take a look at 2 code examples. We have 2 controllers that get the trending users from our database and attach emojis to them. This is from one of my open-source projects <a target="_blank" href="http://eporanger.xyz">reporanger.xyz</a>.</p>
<p>This is the controller that is being called from the routes. In there we have all the functionality as well as a try-catch block to check for any errors as well.</p>
<pre><code>
<span>const</span> getTrendingUsers = <span>async</span> (_req: Request, res: Response, _next: NextFunction) =&gt; {
  <span>try</span> {
    <span>const</span> events = <span>await</span> GithubEvent.find({
      where: { event_date: MoreThan(<span>new</span> <span>Date</span>(<span>Date</span>.now() - <span>24</span> * <span>60</span> * <span>60</span> * <span>1000</span>)) },
      order: { event_size: <span>&#39;DESC&#39;</span> },
      take: <span>3</span>,
    });
    <span>const</span> users = <span>await</span> Username.find({ where: { id: In(events.map(<span>(<span>event</span>) =&gt;</span> event.username_id)) } });
    <span>const</span> topUsers = <span>await</span> getTopUsers(<span>3</span>);
    <span>const</span> trendingUsers = <span>await</span> <span>Promise</span>.all(
      users.map(<span>async</span> (user) =&gt; ({
        ...user,
        emoji: <span>await</span> emojiService.getEmoji(user.score, topUsers),
      })),
    );
    res.status(<span>200</span>).json({
      status: <span>200</span>,
      message: <span>&#39;Trending users fetched successfully&#39;</span>,
      data: trendingUsers,
      error: <span>&#39;&#39;</span>,
      success: <span>true</span>,
    });
  } <span>catch</span> (error) {
    res.status(<span>500</span>).json({
      status: <span>500</span>,
      message: <span>&#39;Error fetching trending users&#39;</span>,
      data: <span>null</span>,
      error: error.message,
      success: <span>false</span>,
    });
  }
};
</code></pre>
<p>Here is the same controller but we’ve used one simple principle: <strong>Unique Responsibility</strong></p>
<p>We spitted our code in 4 smaller re-usable files:</p>
<p>This help’s us in many more ways than we can understand.</p>
<ol>
<li><p>We can re-use the <code>user.service.ts</code> everywhere in our application we want. For example on a cron-job we can do <code>usernameService.getTrendingUsers();</code></p>
</li>
<li><p>We removed every try-catch block to make the code cleaner. We also log every error (<code>logger(&#39;error&#39;, error);</code>). This way, we can easily create an error service later that stores all errors in the database for future use-cases.</p>
</li>
<li><p>We have unified responses for all of our controller with the <code>resFn</code> <strong>,</strong> this is really important because we make sure that all of the request will return that same response by just using a simple generic as you can see below.</p>
</li>
<li><p>Developing a new controller is now 10X easier, because our coding architecture is seamless across our entire application. Even if another developer wrote code it wouldn’t make a difference on the coding style.</p>
</li>
</ol>
<pre><code>
<span>const</span> getTrendingUsers = asyncFn(<span>async</span> (_req: Request, res: Response, _next: NextFunction) =&gt; {
  <span>const</span> trendingUsers = <span>await</span> usernameService.getTrendingUsers();
  resFn(res, {
    status: <span>200</span>,
    message: <span>&#39;Trending users fetched successfully&#39;</span>,
    data: trendingUsers,
    error: <span>&#39;&#39;</span>,
    success: <span>true</span>,
  });
});


<span>const</span> getTrendingUsers = <span>async</span> () =&gt; {
  <span>const</span> events = <span>await</span> GithubEvent.find({
    where: { event_date: MoreThan(<span>new</span> <span>Date</span>(<span>Date</span>.now() - <span>24</span> * <span>60</span> * <span>60</span> * <span>1000</span>)) },
    order: { event_size: <span>&#39;DESC&#39;</span> },
    take: <span>3</span>,
  });
  <span>const</span> users = <span>await</span> Username.find({ where: { id: In(events.map(<span>(<span>event</span>) =&gt;</span> event.username_id)) } });
  <span>const</span> topUsers = <span>await</span> getTopUsers(<span>3</span>);
  <span>const</span> usersWithEmoji = <span>await</span> <span>Promise</span>.all(
    users.map(<span>async</span> (user) =&gt; ({
      ...user,
      emoji: <span>await</span> emojiService.getEmoji(user.score, topUsers),
    })),
  );
  <span>return</span> usersWithEmoji;
};


<span>export</span> <span>const</span> asyncFn = <span>(<span>fn: asyncPropsFunction</span>) =&gt;</span> <span>async</span> (req: Request, res: Response, next: NextFunction) =&gt; {
  <span>try</span> {
    <span>await</span> fn(req, res, next);
  } <span>catch</span> (error) {
    logger(<span>&#39;error&#39;</span>, error);
    next(error);
  }
};


<span>export</span> <span>const</span> resFn = <span>(<span>res: Response, { status, error, data, message, success }: IResponse&lt;<span>any</span>&gt;</span>) =&gt;</span> {
  <span>const</span> suc = success !== <span>undefined</span> ? success : <span>true</span>;

  res.status(status).json({
    error,
    data,
    message,
    success: suc,
    status,
  });
};


<span>export</span> <span>interface</span> IResponse&lt;T&gt; {
  status: <span>number</span>;
  message: <span>string</span>;
  data: T | <span>any</span>;
  error: <span>string</span>;
  success: <span>boolean</span>;
}
</code></pre>
<p>Now imagine if we didn’t implement a good architecture from the beginning and wanted to change something small across the application in the future. Even if we just wanted to log our errors, we would have to go to all of our controllers and add <code>logger(&#39;error&#39;, error);</code>. Or if we wanted to add a sixth field to our response, for example, <code>metadata</code>. It would be a nightmare.</p>
<h2 id="heading-do-the-refactoring-first">Do the Refactoring First</h2>
<p>Refactoring should be done before you write your code. What I mean by this is that eventually, every application needs refactoring. Refactoring a relatively big software, for example, with over 70,000 lines of code, can take 30-40 hours and also create a lot of errors and bugs in the process.</p>
<p>You might end up breaking the application or spending 20 more hours testing it. Also, when you reach a size this large, the refactoring won’t be as good as if you did it in the beginning.</p>
<p>What I propose is to spend your first 40-50 hours planning and refactoring. Just create a few controllers, brainstorm how that would scale in the future, refactor, and then continue.</p>
<p>Yes, your manager might scream in the beginning because you spent 50 hours coding and have almost nothing to showcase except a good architecture that will scale that no-one understand. But if you have the option to do it, then do it. It will save a ton of headaches for not only you but future developers as well.</p>
<p>Unit testing is also really important. Don’t be crazy with it just have at least 60% coverage and you are good to go. It will save you tones of bugs in the future.</p>
<h2 id="heading-pre-commit-checks">Pre-commit Checks</h2>
<p>This is very important. For JavaScript/TypeScript projects, we have Husky, but there are many alternatives for every language or framework out there. Husky is a tool that runs some commands before you commit your code. If got throw an error, the commit won&#39;t pass. Here is an example <code>.husky</code> configuration from <a target="_blank" href="http://reporanger.xyz">reporanger.xyz</a>.</p>
<ol>
<li><p>Lint Check</p>
</li>
<li><p>Run Tests</p>
</li>
<li><p>Prettify</p>
</li>
</ol>
<p>This 3 simple steps will make your codebase. 10X better.</p>
<pre><code><span>#!/bin/sh</span>
npx eslint --max-warnings=0 src api/src || {
  <span>echo</span> <span>&#34;ESLint check failed. Commit aborted.&#34;</span>
  <span>exit</span> 1
}

<span>cd</span> ./api &amp;&amp; npx jest || {
  <span>echo</span> <span>&#34;Tests failed. Commit aborted.&#34;</span>
  <span>exit</span> 1
}

<span>cd</span> .. &amp;&amp; npx prettier --write .
git update-index --again
</code></pre>
<h2 id="heading-in-a-nutshell">In a nutshell</h2>
<p>There are many things you could do to improve your code. But the things that I mentioned are not even hard to implement. Especially now with LLM’s the problem is that you are bored to do them not that you can’t.</p>
<p>Throw boredom out of the window and you will get many blessings. Start coding with love and not for money. If you do that, you will make more money, make your co-workers happy and your managers will thank you.</p>
<h3 id="heading-because-coding-is-not-writing-it-is-architecture"><em>Because Coding is not writing, it is Αrchitecture.</em></h3>
<p>Thanks for reading, and I hope you found this article helpful. If you have any questions, feel free to email me at <a target="_blank" href="mailto:x@sotergreco.com"><strong>x@sotergreco.com</strong></a><strong>, and I will respond.</strong></p>
<p>You can also keep up with my latest updates by checking out my X here: <a target="_blank" href="http://x.com/sotergreco"><strong>x.com/sotergreco</strong></a></p>
</div></div>
  </body>
</html>
