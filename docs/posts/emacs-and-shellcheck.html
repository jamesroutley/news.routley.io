<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://amitp.blogspot.com/2023/10/emacs-and-shellcheck.html">Original</a>
    <h1>Emacs and shellcheck</h1>
    
    <div id="readability-page-1" class="page"><div>
<!--Can't find substitution for tag [adStart]-->
<section id="3280840034841268479">
<time timestamp="2023-10-06T15:34:00-07:00">Friday, October 06, 2023</time>
<p>
Julia Evans had a great talk called <a href="https://jvns.ca/blog/2023/10/06/new-talk--making-hard-things-easy/">Making Hard Things Easy</a>.  One of the takeaways for me was that I should be using tools for parts of a system I find hard to remember. In particular, when writing <code>bash</code> scripts I should be using <code>shellcheck</code>.
</p>

<p>
It turns out Emacs 29 has support for <code>shellcheck</code>, and older versions of Emacs can use <a href="https://github.com/federicotdn/flymake-shellcheck">the flymake-shellcheck page</a>.
</p>

<p>
To set it up in Emacs 29:
</p>

<div>
<pre>(<span>use-package</span> <span>flymake</span>
  <span>:bind</span> ((<span>&#34;H-e&#34;</span> . flymake-show-project-diagnostics))

(<span>use-package</span> <span>sh-script</span>
  <span>:hook</span> (sh-mode . flymake-mode))
</pre>
</div>

<p>
I use <a href="https://github.com/minad/consult">consult</a> for navigating my errors, and I want to make errors more noticable in the mode line, so my flymake configuration is:
</p>

<div>
<pre>(<span>use-package</span> <span>flymake</span>
  <span>:bind</span> ((<span>&#34;H-e&#34;</span> . my/consult-flymake-project))
  <span>:preface</span>
  (<span>defun</span> <span>my/consult-flymake-project</span> ()
    (<span>interactive</span>)
    (consult-flymake t))
  <span>:custom</span>
  (flymake-suppress-zero-counters t)
  <span>:config</span>
  (<span>defface</span> <span>my/flymake-modeline-error-echo</span>
    &#39;((t <span>:inherit</span> &#39;flymake-error-echo <span>:background</span> <span>&#34;red&#34;</span>))
    <span>&#34;Mode line flymake errors&#34;</span>)
  (put &#39;flymake-error &#39;mode-line-face &#39;my/flymake-modeline-error-echo)
  (<span>defface</span> <span>my/flymake-modeline-warning-echo</span>
    &#39;((t <span>:inherit</span> &#39;flymake-warning-echo <span>:background</span> <span>&#34;orange&#34;</span>))
    <span>&#34;Mode line flymake warnings&#34;</span>)
  (put &#39;flymake-warning &#39;mode-line-face &#39;my/flymake-modeline-warning-echo))
</pre>
</div>

<p>
It&#39;s too early to know what other tweaks I might want, but so far it&#39;s alerted me to several errors in my shell scripts.
</p>
<p>
Labels:
<a href="https://amitp.blogspot.com/search/label/emacs" rel="tag">emacs</a>
</p>

</section>
<p>
<h4>
0 comments:
                  
</h4>
</p>

<!--Can't find substitution for tag [adEnd]-->
</div></div>
  </body>
</html>
