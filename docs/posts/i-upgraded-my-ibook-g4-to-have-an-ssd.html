<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://boredzo.org/blog/archives/2024-03-31/i-upgraded-my-ibook-g4-to-have-an-ssd">Original</a>
    <h1>I upgraded my iBook G4 to have an SSD</h1>
    
    <div id="readability-page-1" class="page"><div>
				<p>I did take some notes which I’ll present below, but this isn’t a full how-to. I used <a href="https://www.ifixit.com/Guide/iBook+G4+12-Inch+800+MHz-1.2+GHz+Hard+Drive+Replacement/166">iFixIt’s guide</a> plus occasional reference to the official Apple Service Source repair guide (those are not strictly public but can be had from your favorite abandonware site).</p>
<p>For this year’s <a href="https://marchintosh.com/">#MARCHintosh</a>, I decided to replace my iBook G4’s 30 GB spinning-rust hard drive with an SSD.</p>
<p><a href="https://marchintosh.com/"><img decoding="async" width="192" height="102" alt="The #Marchintosh logo, depicting a smiling compact Mac icon with a four-leaf clover and a stripe of six-color Apple rainbow." srcset="/blog/wp-content/uploads/2024/03/MARCHintoshLogo@1x.png, /blog/wp-content/uploads/2024/03/MARCHintoshLogo@2x.png 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/MARCHintoshLogo@1x.png"/></a></p>
<p>This was my second SSD upgrade, as I’d previously <a href="https://boredzo.org/cubehd">replaced my G4 Cube’s hard drive with an SSD</a>. (The pictures on that page show a hard drive because, before the SSD upgrade, I’d replaced the Cube’s hard drive with <em>another hard drive</em>, and that was what I originally documented on that page. Then, after that, when I decided to upgrade to an SSD, I used my own tutorial. iFixIt didn’t exist yet.)</p>
<p>I rather despise working on laptops, though this wasn’t as bad as I’d worried it would be. (Upgrading the memory in my Mac mini was harder. I pointedly did that as soon as the machine arrived so that it would be done and I’d never need to open the machine back up for the rest of its life.)</p>
<p>The thing that motivated me to go forward with it was that the iBook was absolutely filthy. It had been Mom’s, and she was a smoker in her life; she would routinely be smoking a cigarette and working on the computer, and getting so absorbed in the latter that ash would fall from her cigarette onto and into the computer. So I resolved to clean the disassembled parts as well as upgrade the storage.</p>
<p>For the cleaning, I mostly used paper towels wetted with diluted all-purpose cleaner. A couple small spots of deposited nail polish were resolved with cotton pads soaked with nail polish remover. It worked fine, at least so far—if I’ve started some chemical process of plastic deterioration, I don’t know it yet.</p>
<p><img decoding="async" loading="lazy" width="504" height="378" alt="The iBook in question, closed, and visibly dirty even on the outside." src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7672@2x.jpg" srcset="/blog/wp-content/uploads/2024/03/IMG_7672@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7672@2x.jpg 2x" src="/blog/wp-content/uploads/2024/03/IMG_7672@1x.jpg"/></p>
<p><img decoding="async" loading="lazy" width="504" height="378" alt="The iBook in question, closed, now thoroughly cleaned and spiffy." srcset="blog/wp-content/uploads/2024/03/IMG_7760@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7760@2x.jpg 2x" src="https://boredzo.org/blog/archives/2024-03-31/blog/wp-content/uploads/2024/03/IMG_7760@1x.jpg"/></p>
<p>Once I decided the project was go, I also added in a memory upgrade, because it was less than $20 and I was already buying stuff from OWC for the operation anyway. The machine had 512 MB of RAM; now it has 1 GB. (Plus the 128 MB on the logic board.)</p>
<p>One key difference from the Cube upgrade: The iBook, being a laptop, doesn’t have as much space for the upgraded drive. The Cube had some wiggle room taken up by brackets; the iBook has basically none. In the Cube, I installed a standard-size SATA SSD plus a SATA-to-PATA adapter; in the iBook, that wouldn’t have fit.</p>
<p>So my first thought was an M.2 SSD, that being the form factor that today’s computers generally use. I ran into a problem: There are like three different signaling protocols that all run over the M.2 form factor, and M.2 correspondingly has three different keying combinations to guard against protocol mismatches (an incompatible SSD won’t physically fit, though an SSD that fits isn’t necessarily compatible). I noped out of trying to sort that out.</p>
<p>What I went with instead was mSATA. This form factor is kind of dying off as M.2 takes over, but Kingston still sells mSATA SSDs directly from their own website, and I found a suitable adapter on Amazon. (I buy from alternatives like Micro Center or direct from manufacturers whenever possible, but it wasn’t in this case. The manufacturer’s website links to their Amazon store.)</p>
<p><img decoding="async" loading="lazy" width="606" height="340" alt="The two-and-a-half-inch spinning-rust hard drive, and the mSATA SSD in its IDE adapter, side by side in my hand." srcset="/blog/wp-content/uploads/2024/03/IMG_7735@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7735@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7735@1x.jpg"/></p>

<h3>What’d I put in there?</h3>
<p>Here’s the bill of materials I ended up with:</p>
<ul>
<li><a href="https://shop.kingston.com/collections/solid-state-drives/products/kc600-ssd-1?variant=40836176576704">Kingston 256GB mSATA SSD</a> (you could go bigger, but I cheaped out)</li>
<li><a href="https://www.amazon.com/Ableconn-IIDE-MSAT-2-5-Inch-Converter-Aluminum/dp/B017VQT5YW/132-2787373-3000614">Ableconn mSATA to IDE adapter</a></li>
<li><a href="https://eshop.macsales.com/item/OWC/2700DDRS1GBA/">OWC 1 GB PC2700 RAM SO-DIMM</a> (the original Apple DIMM was PC2100, so this was a speed upgrade as well as a size upgrade)</li>
<li><a href="https://eshop.macsales.com/item/OWC/MS8U3SSD120/">OWC external FireWire SSD</a> to reinstall the OS from, since this machine can’t boot from USB and I don’t trust the internal optical drive to not eat the next disc I put in it</li>
</ul>
<p>… and as I write this up now, I notice that OWC has now discontinued that last product. Did I buy the last one or something?</p>
<p>(It feels like OWC is moving away from selling products for older Macs, having now discontinued their last FireWire product AFAIK, and I’m bummed. At a time when the retro Mac community is resurgent, we can use every source for quality gear for our old Macs that we can get.)</p>
<p>For tools, I mostly used <a href="https://www.ifixit.com/products/essential-electronics-toolkit">one of iFixIt’s toolkits</a>, plus <a href="https://www.ifixit.com/products/precision-screw-extractor-set">the screw extractor set they sell</a>. I also found <a href="https://www.artsupplywarehouse.com/products/daylight-halo-table-magnifying-lamp%7CDAYU25200.html">a lighted magnifier</a> extremely helpful.</p>
<p>I also used <a href="https://coriolis-systems.com/">iPartition</a> to set up the external SSD with the Tiger and Leopard boot DVDs and various other things (including a copy I’d already made of the HDD).</p>
<h3>Hiccups</h3>
<h4>Hiccup #1: The case of the borked screw</h4>
<p>One of the three M2 (i.e., 2mm, i.e., <em>really tiny</em>) screws on the right side of the keyboard tray was visibly rusted and seemingly damaged. Trying to unscrew it (including a couple of attempts with the wrong size driver) damaged it further.</p>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="The inside of the keyboard tray. There are two screws in the rear and forward corners, and a third in the center. The forward screw has some visible rust on its head." srcset="/blog/wp-content/uploads/2024/03/IMG_7696@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7696@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7696@1x.jpg"/></p>
<p>I looked at a bunch of options and asked for ideas on Mastodon. A couple of people recommended precision screw extractors (much smaller and a different type than the kind you drill into a screw). I bought <a href="https://www.ifixit.com/products/precision-screw-extractor-set">the set that iFixIt sells</a>, which it turns out is <a href="https://www.centraltools.com/58-0675-4pc-screw-extractor-reversible-set.html">OEM’d by Moody Tools</a>.</p>
<p>The second extractor bit I tried, one of the smaller ones, worked perfectly, and drove the screw out as easily as the normal drivers did the undamaged screws. Thus I was unblocked and able to continue toward the hard drive.</p>
<p>I did encounter a second rusted screw near the latch mechanism. This I was able to clean with a few things, including a nylon-brush bit on a Dremel, without damaging the head. That screw came out and went back in with no further fuss.</p>
<h4>Hiccup #2: The case of the stuck installer</h4>
<p>After I got everything back together, the Tiger DVD wouldn’t boot. After either the verbose spew or the spinner, the OS switches to the normal GUI with a blue background, and should then show the Installer on that background—but it would get stuck at the blue background, with no window and no cursor.</p>
<p>On a whim, I tried Leopard (not a supported OS on this machine), and was pleasantly surprised to find that the iBook booted that DVD happily. Moreover, that it <em>worked</em>.</p>
<p>Leopard’s installer refused to install, of course, but it let me cancel and access the rest of the utilities—including Terminal, from which I was able to run <code>system_profiler</code>. Here, I figured, I could at least see whether any of my new hardware was showing up.</p>
<p>And the answer was <em>no</em>. Well, that was a let-down! The RAM slot read as empty (it definitely wasn’t), and querying the PATA bus <em>hung</em>.</p>
<p>I decided to try switching back to the original Apple DIMM, since it’s easier to get to the RAM than the hard drive. When I put the original DIMM back in, I noticed that it sat farther into the slot than the upgrade DIMM had been.</p>
<p>“HMMMMMM.”</p>
<p>So I popped it back out and re-upgraded the RAM. Sure enough, with a bit more attention to this detail, the new DIMM went into the slot exactly as far as the Apple DIMM had.</p>
<p>And when I booted the machine up again… everything worked. The new RAM showed up. PATA no longer hung.</p>
<p>“Hmm. PATA doesn’t hang anymore. Was that where Tiger was hanging?”</p>
<p>Yup! Or similar enough, anyway. It fixed the problem; Tiger’s installer was now unblocked.</p>
<h4>Hiccup #3: The case of the 512 MB partition map</h4>
<p>One of my goals for this machine is to try to cajole it into booting Mac OS 9 even though that isn’t supported, so I wanted to make sure to install the disk drivers that Mac OS 9 needs onto the SSD. This is an option in Disk Utility of that era… except it wasn’t showing up, presumably because this is a machine that (officially) can’t boot Mac OS 9 anyway, so why would it need that?</p>
<p>(The original hard drive had Mac OS 9 drivers installed. Maybe Panther was more permissive about that.)</p>
<p>Now, there is a second way to get Mac OS 9 drivers installed: <code>hdiutil create</code> has an option, <code>-layout &#39;UNIVERSAL HD&#39;</code>, that sets up the image with a partition map containing a full set of Mac OS 9 drivers for every then-imaginable device interface, from SCSI to ATA to FireWire. (There is also <code>&#39;UNIVERSAL CD&#39;</code>, which gives a different set of drivers.)</p>
<p>So my plan was:</p>
<ol>
<li>Create a RAM disk using <code>hdiutil create -nomount ram://262144</code> (that creates a 128 MB RAM disk), since I had nothing writable that I wasn’t about to obliterate (besides thumb drives), and I had plenty of RAM.</li>
<li>On the RAM disk, create a sparse disk image with the “UNIVERSAL HD” format and sized to the number of blocks <code>diskutil info</code> reported for the SSD.</li>
<li>Attach that disk image with <code>-nomount</code> so I can munge its contents directly.</li>
<li>Use <code>pdisk</code> to edit its partition map, specifically to create all the partitions I wanted.</li>
<li>Use <code>newfs_hfs</code> to format each of the partitions as HFS+J (or plain HFS+ in the case of the OS 9 partition).</li>
</ol>
<p>Problem: Whenever I attached the sparse disk image, pdisk showed that the partition map was set for a 512 MB storage device, not a 256 GB storage device. It doesn’t offer any way to change that, even in the advanced options.</p>
<p>Solution: This was apparently a Tiger bug, because when I rebooted back into the Leopard DVD, the same series of steps worked perfectly.</p>
<p>So I had to do my partitioning and formatting in Leopard, then reboot back to the Tiger DVD to install the OS.</p>
<h3>Results</h3>
<p>Well, the first sign of success was that the Tiger installation—from the FireWire SSD to the IDE SSD—only took 15 minutes. If you’ve ever installed old Mac OS X from a CD or DVD to a spinning-rust drive, you’ll remember it definitely takes longer than that.</p>
<p>My informal test of the HDD’s speed before the operation showed about 30 MB/sec write speed (<code>dd if=/dev/zero bs=10485760 of=test</code>, followed by math to convert its output to MB/sec because Tiger’s <code>dd</code> doesn’t have <code>status=progress</code>). After the upgrade, I found out about <a href="http://xbench.com">Xbench</a>, and ran that, and it showed about 90 MB/sec write speed in most cases, which is basically saturating the UDMA100 interface. So, with the caveat that the methodologies of the two tests aren’t the same, I feel comfortable saying I tripled my throughput.</p>
<p>Tiger certainly feels way faster than ever before on this machine. The progress-bar portion of the boot process is now a tiny fraction of it, as the progress bar goes from 0 to 100% in about a second.</p>
<p>I’m very happy with the upgrade. I plan to see if I can convince the machine to boot from a Mac OS 9 partition (not a supported configuration—the machine came with a special version of Panther) or install Leopard (also not supported; this machine officially only supports Panther and Tiger plus Classic).</p>
<h3>More photos</h3>
<h4>How dirty this thing was</h4>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="Photo of the front edge of the machine. To the left of the latch release button, I haven&#39;t cleaned yet, and there&#39;s a visible beige patina. To the right of the button, my cleaning has revealed mostly-pristine-looking gray and white plastic." src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7685@1x.jpg"/></p>
<p><img decoding="async" loading="lazy" width="504" height="353" alt="The underside of the machine. This surface is even filthier, with several brown streaks of unclear origin." src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7687@1x.jpg"/></p>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="The latch release mechanism, rife with dust bunnies. I used lots of canned air evicting them. I think I might have also resorted to a toothpick for some of it." src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7691@1x.jpg"/>
</p>
<h4>Note #1: Drive bay shock bumpers</h4>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="The IDE adapter (with mSATA SSD installed on the far side of it) sitting half-in the iBook&#39;s drive bay. Two black rubber washers are permanently affixed inside the drive bay, near the corners of the drive." srcset="/blog/wp-content/uploads/2024/03/IMG_7737@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7737@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7737@1x.jpg"/></p>
<h4>Note #2: Reinstalling the feet</h4>
<p>The iBook’s feet have a design that ensures there’s only one way to reinstall them. You’ll need to pay attention to it when putting the feet back in, to ensure you don’t put them in crooked.</p>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="View through the lighted magnifier of one of the recesses where a foot is about to be reinstalled. There&#39;s a ridge on the inside of one quadrant of the recess." srcset="/blog/wp-content/uploads/2024/03/IMG_7740@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7740@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7740@1x.jpg"/></p>
<p><img decoding="async" loading="lazy" width="504" height="283" alt="Photo of the recess with the ring installed—so now we&#39;re viewing it from the exterior side rather than the interior side. Inside the ring is a well with three keys. Next to the ring, resting upside down, is the foot that will go into this ring; it has three grooves in its underside to match those keys." srcset="/blog/wp-content/uploads/2024/03/IMG_7745@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7745@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7745@1x.jpg"/></p>
<h4>Just for fun</h4>
<p><img decoding="async" loading="lazy" width="504" height="353" alt="The old spinning-rust hard drive. There&#39;s an air-pressure-equalization vent hole near one edge, and the label has a section that says “DO NOT COVER THIS HOLE”. I&#39;m mischievously covering it with my fingertip." srcset="/blog/wp-content/uploads/2024/03/IMG_7732@1x.jpg, /blog/wp-content/uploads/2024/03/IMG_7732@2x.jpg 2x" src="https://boredzo.org/blog/wp-content/uploads/2024/03/IMG_7732@1x.jpg"/></p>

				

				<p>Categories: <a href="https://boredzo.org/blog/archives/category/uncategorized" rel="category tag">@Uncategorized</a>. |  <a href="#comments">Comments: 4</a> (<a href="https://boredzo.org/blog/archives/2024-03-31/i-upgraded-my-ibook-g4-to-have-an-ssd/feed">feed</a>).</p>
				
			</div></div>
  </body>
</html>
