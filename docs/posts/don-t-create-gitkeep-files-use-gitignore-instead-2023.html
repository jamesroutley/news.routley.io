<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/">Original</a>
    <h1>Don&#39;t create .gitkeep files, use .gitignore instead (2023)</h1>
    
    <div id="readability-page-1" class="page"><article><time datetime="2023-09-18">2023-09-18</time><img alt="Crystal a or simpler crystal b?" title="Crystal a or simpler crystal b?" src="https://adamj.eu/tech/assets/2023-09-18-crystals.jpeg"/><p>Git only tracks files, not directories. It will only create a directory if it contains a tracked file. But sometimes you need to â€œtrackâ€ a directory, to ensure it exists for fresh clones of a repository. For example, you might need an output directory called <code>build</code>.</p><p>In this post, weâ€™ll look at two ways to achieve this. First, the common but slightly flawed <code>.gitkeep</code> technique, then a simpler one using only a <code>.gitignore</code> file.</p><div id="the-gitkeep-technique"><h2>The <code>.gitkeep</code> technique<a title="Permalink to this headline" href="#the-gitkeep-technique"></a></h2><p>This technique uses an empty file called <code>.gitkeep</code>:</p><p>The empty file ensures that Git creates the directory with minimal cost. Any other filename may be used, as Git doesnâ€™t treat <code>.gitkeep</code> files any differently.</p><p>To set this up, you might create an empty file with <code>touch</code>:</p><p>Then ignore all files in the directory, except <code>.gitkeep</code>, by adding patterns in the repositoryâ€™s <code>.gitignore</code> file:</p><div><pre><span></span>/build/<span>*</span>
<span>!</span>/build/.gitkeep
</pre></div><p>The first pattern ignores everything in the <code>build</code> directory. The second one then un-ignores the <code>.gitkeep</code> file, allowing it to be committed.</p><p>This technique works, but it has some downsides:</p><ol><li>It requires editing two files.</li><li>If the directory is renamed, <code>.gitignore</code> needs updating, which is easy to miss.</li><li><code>.gitkeep</code> is not a name recognized by Git, so thereâ€™s no documentation on it, potentially confusing other developers.</li></ol><p>Thereâ€™s a better way that doesnâ€™t have these flaws.</p></div><div id="the-better-gitignore-technique"><h2>The better <code>.gitignore</code> technique<a title="Permalink to this headline" href="#the-better-gitignore-technique"></a></h2><p>This technique uses only a short <code>.gitignore</code> file inside the directory:</p><div><pre><span></span>build
â””â”€â”€ .gitignore
</pre></div><p>The <code>.gitignore</code> file has these contents:</p><p>The first pattern ignores all files in the directory. The second one then un-ignores the <code>.gitignore</code> file, so it can be committed.</p><p>You can create this file with <code>echo</code> and file redirection:</p><div><pre><span></span><span>$ </span><span>echo</span><span> </span><span>&#39;*\n!.gitignore&#39;</span><span> </span>&gt;<span> </span>build/.gitignore
</pre></div><p>When you add and commit the directory, Git will pick up on the <code>.gitignore</code> file first, skipping other files within the directory:</p><div><pre><span></span><span>$ </span>git<span> </span>add<span> </span>build

<span>$ </span>git<span> </span>status
<span>On branch main</span>
<span>Changes to be committed:</span>
<span>        new file:   build/.gitignore</span>

<span>$ </span>git<span> </span>commit<span> </span>-m<span> </span><span>&#34;Track build directory&#34;</span>
<span>[main </span><span>1cc9120</span><span>]</span><span> Track build directory</span>
<span> 1 file changed, 2 insertions(+)</span>
<span> create mode 100644 build/.gitignore</span>
</pre></div><p>The directory is now â€œtrackedâ€ with a single, standard file that will work even after renames.</p></div><div id="fin"><h2>Fin<a title="Permalink to this headline" href="#fin"></a></h2><p>Donâ€™t ignore this technique,</p><p>â€”Adam</p></div><hr/><p>ğŸ˜¸ğŸ˜¸ğŸ˜¸ Check out my new book on using GitHub effectively, <strong><a href="https://adamj.eu/tech/2025/11/11/boost-your-github-dx-out-now/">Boost Your GitHub DX</a></strong>! ğŸ˜¸ğŸ˜¸ğŸ˜¸</p><hr/><p><small>One summary email a week, no spam, I pinky promise.</small></p><p><strong>Related posts:</strong></p><ul><li><a href="https://adamj.eu/tech/2023/08/21/git-output-root-directory/">Git: Output the top-level directory of the current repository</a></li><li><a href="https://adamj.eu/tech/2023/08/20/git-output-just-current-branch-name/">Git: Output just the current branch name</a></li><li><a href="https://adamj.eu/tech/2023/01/31/git-add-remove-execute-permissions/">Git: How to add and remove execute permissions</a></li></ul><p><strong>Tags:</strong> <a href="https://adamj.eu/tech/tag/git/" rel="tag">git</a></p></article></div>
  </body>
</html>
